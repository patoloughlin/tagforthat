{"count":21112,"tag":"spring","questions":[{"tags":["spring","caching","spring-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13263392,"title":"spring mvc 3 caching example","body":"<p>I have requirement for spring mvc 3 caching. Requirement is : while starting the server, we need to call database for one dropdown and put those values in the cache. So that whenever we required those values, we need to retrieve from cache.</p>\n\n<p>Please help me with an example.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":6,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":5539,"score":3,"question_id":3230633,"title":"How to register handler interceptors with spring mvc 3.0?","body":"<p>It should be easy:</p>\n\n<pre><code>&lt;bean id=\"handlerMapping\"\n   class=\"org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping\"&gt;\n    &lt;property name=\"interceptors\"&gt;\n        &lt;list&gt;\n            &lt;ref bean=\"myInterceptor\" /&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>but this way the interceptor isn't called.</p>\n"},{"tags":["spring","handler","interceptor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":501,"score":0,"question_id":10720781,"title":"Spring 3.0 MVC Handler Interceptors not working","body":"<p>I am trying out the HandlerInterceptors from Spring MVC 3.0.</p>\n\n<p>Below is my interceptor</p>\n\n<pre><code>public class SessionInterceptor extends HandlerInterceptorAdapter {\n\n   @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n      System.out.println(\"inside preHandle\");\n      if(request.getSession().getAttribute(SessionConsta nts.USER_SESSION_NAME) == null) {\n         response.sendRedirect(\"welcome\");\n         return false;\n      }\n      return true;\n   }\n}\n</code></pre>\n\n<p>Below is my configuration in my xml</p>\n\n<pre><code>&lt;mvc:annotation-driven/&gt;\n\n&lt;mvc:interceptors&gt;\n&lt;mvc:interceptor&gt;\n&lt;mvc:mapping path=\"/services/*\"/&gt;\n&lt;bean class=\"com.ca.myca.interceptors.SessionInterceptor \" /&gt;\n&lt;/mvc:interceptor&gt;\n&lt;/mvc:interceptors&gt;\n</code></pre>\n\n<p>But the interceptor is not getting called.</p>\n\n<p>Please let me know if I am missing any thing.</p>\n"},{"tags":["spring","message-queue","websphere-mq","spring-jms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13278737,"title":"Single point to point queue and multiple listeners","body":"<p>I have a single 'point to point' IBM MQ queue receiving messages from multiple producers. My application consumes the messages from the queue. I am using spring 'jmstemplate\" and \"DefaultMessageListenerContainer\" to consume the messages asynchronously. </p>\n\n<p>My application is running on 2 jvms, meaning there are 2 listeners active on each jvm listening to the same queue.</p>\n\n<p>Coming to my questions, If a message arrives...</p>\n\n<p>1) How does the listeners know that the message arrived in the queue?</p>\n\n<p>2) Out of the two listeners, which one will receive the message ? What is the approach followed to distribute the messages to the listeners?</p>\n\n<p>3) Can i scale to 'N' count of listeners for a singe queue? If i grow to 10 listeners, how does the scaling work? how are the messages distributed to listeners?</p>\n\n<p>4) How does the MQ server make sure that the same message is not sent to multiple listeners?</p>\n\n<p>May be these are simple questions, but not able to drill down on how the above scenarios works. Please share your thoughts...</p>\n"},{"tags":["spring","hibernate","jpa-2.0","jboss7.x"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":148,"score":0,"question_id":11238662,"title":"Hibernate not flushing before find() results in null entity (JBoss AS7 container managed emf using jpa2)","body":"<p>I switched my application's entity manager factory from spring-managed to container-managed and have run into a problem. While creating an entity, there are times when I have to query for it within the same transaction that it was originally created in, before it has been flushed automatically at the end. In spring, the entity manager would (I believe) automatically flush the context before running find and be able to return the correct object, but in jboss the find method returns null.</p>\n\n<p>Here is a sample of the problem:</p>\n\n<pre><code>@PersistenceContext\nprivate EntityManager entityManager;\n\nprivate void test(){\n    Person person = new Person(\"firstname\", \"lastname\", \"email\", \"user\", \"pass\", Person.PersonType.admin);\n    entityManager.persist(person);\n    assert person.getId() != null;\n    Person person2 = entityManager.find(Person.class, person.getId());\n    assert person2 != null; //fail in jboss, ok in Spring\n}\n</code></pre>\n\n<p>If I try to add an <code>entityManager.flush()</code> call in between <code>persist()</code> and <code>find()</code> methods, jboss throws a <code>javax.persistence.TransactionRequiredException: no transaction is in progress</code> error, regardless of whether I throw @Transactional annotations around the method/class running the test.</p>\n\n<p>My persistence.xml file sets <code>&lt;property name=\"org.hibernate.FlushMode\" value=\"auto\"/&gt;</code>, but it doesn't seem to be working.</p>\n\n<p>Is there some configuration property that I missed to tell jboss to flush its context to the database before running a Find? Or am I ordering my statements incorrectly?</p>\n\n<p>I've put my <a href=\"http://pastebin.com/BPXxxRbY\" rel=\"nofollow\">persistence.xml</a> and <a href=\"http://pastebin.com/tHjhZTqi\" rel=\"nofollow\">my-ds.xml</a> files on pastebin.</p>\n\n<p>Thanks for the help.</p>\n\n<h2>Edit</h2>\n\n<p>Resolved. See comments below</p>\n"},{"tags":["spring","data","spring-data-neo4j"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12928251,"title":"Spring Data Neo4J @Indexed(unique = true) not working","body":"<p>I'm new to Neo4J and I have, probably an easy question.</p>\n\n<p>There're NodeEntitys in my application, a property (name) is annotated with @Indexed(unique = true) to achieve the uniqueness like I do in JPA with @Column(unique = true).</p>\n\n<p>My problem is, that when I persist an entity with a name that already exists in my graph, it works fine anyway.\nBut I expected some kind of exception here...?!\nHere' s an overview over basic my code:</p>\n\n<pre><code>@NodeEntity\npublic abstract class BaseEntity implements Identifiable\n{\n    @GraphId\n    private Long entityId;\n    ...\n}\n\npublic class Role extends BaseEntity\n{\n    @Indexed(unique = true)\n    private String name;\n    ...\n}\n\npublic interface RoleRepository extends GraphRepository&lt;Role&gt;\n{\n    Role findByName(String name);\n}\n\n@Service\npublic class RoleServiceImpl extends BaseEntityServiceImpl&lt;Role&gt; implements \n{\n    private RoleRepository repository;\n\n    @Override\n    @Transactional\n    public T save(final T entity) {\n    return getRepository().save(entity);\n    }\n}\n</code></pre>\n\n<p>And this is my test:</p>\n\n<pre><code>@Test\npublic void testNameUniqueIndex() {\n    final List&lt;Role&gt; roles = Lists.newLinkedList(service.findAll());\n    final String existingName = roles.get(0).getName();\n    Role newRole = new Role.Builder(existingName).build();\n    newRole = service.save(newRole);\n}\n</code></pre>\n\n<p>That's the point where I expect something to go wrong!\nHow can I ensure the uniqueness of a property, without checking it for myself??</p>\n\n<p>THANKS IN ADVANCE FOR ANY IDEAS!!</p>\n\n<p>P.S.: I'm using neo4j 1.8.M07, spring-data-neo4j 2.1.0.BUILD-SNAPSHOT and Spring 3.1.2.RELEASE.</p>\n"},{"tags":["spring","apache-camel","apache-karaf"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12937959,"title":"Karaf 2.3 Camel 2.10 : Is it possible to switch to Spring 3.1?","body":"<p>Is it possible to use Spring 3.1 on Karaf 2.3 without worrying about breaking anything ?</p>\n"},{"tags":["java","spring","spring-mvc","training"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13277061,"title":"Spring/Spring MVC Video, Online or CBT Courses: Recommendations?","body":"<p>I would like to improve my knowledge of Spring 3.1 ( especially Spring MVC ).  Schedules, locations and pricing of corporate classes have not worked for my company.   I've found the books for Spring 3.* to be incomplete or not optimally helpful in many ways.</p>\n\n<p>Could anyone recommend a video course, online training course or CBT course that is up to date ( at least Spring 3.0 ) and provides a means of asking questions/getting help?</p>\n\n<p>Thanks in advance for any information</p>\n\n<p>Steve</p>\n"},{"tags":["spring","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13275773,"title":"Skip tests at runtime when using SpringJUnit4ClassRunner","body":"<p>In my project, I have acceptance tests which take a long time to run.  When I add new features to the code and write new tests, I want to skip some existing test cases for the sake of time.  I am using Spring 3 and junit 4 using SpringJUnit4ClassRunner.  My idea is to create an annotation (@Skip or something) for the test class.  I am guessing I would have to modify the runner to look for this annotation and determine from system properties if a test class should be included while testing.  My question is, is this easily done?  Or am I missing an existing functionality somewhere which will help me?</p>\n\n<p>Thanks.\nEric</p>\n"},{"tags":["spring","controller","httpwebrequest","mapping"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13240667,"title":"How do I map this URL to a Spring controller method?","body":"<p>I'm using Spring 3.1.1.RELEASE.  I'm having fits mapping URLs to controller methods.  I would like to map the URL \"/my-context-path/organizations/add\" to the controller method below.  In my controller, I have</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/organizations\")\npublic class OrganizationController\n{\n\n    …\n    @RequestMapping(value = \"/add\", method = RequestMethod.GET)\n    public ModelAndView doGetadd()\n    {\n        … do some stuff …\n        return new ModelAndView(\"organizations/add\");\n    }   // doGetadd \n</code></pre>\n\n<p>In my web.xml I have</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee \n                                http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n    version=\"2.5\"&gt;\n\n    &lt;display-name&gt;SB Admin&lt;/display-name&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/organizations/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/dispatcher-servlet.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n</code></pre>\n\n<p>and in my dispathcer-servlet.xml I have</p>\n\n<pre><code>...\n&lt;!-- Enable annotation driven controllers, validation etc... --&gt;\n&lt;mvc:annotation-driven /&gt;\n\n&lt;context:component-scan base-package=\"org.myco.subco\" /&gt;\n\n    &lt;bean id=\"viewResolver\"\n            class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n            &lt;property name=\"prefix\"&gt;\n                    &lt;value&gt;/WEB-INF/views/&lt;/value&gt;\n            &lt;/property&gt;\n            &lt;property name=\"suffix\"&gt;\n                    &lt;value&gt;.jsp&lt;/value&gt;\n            &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>but requests for my desired context-path result in \"No mapping found for HTTP request with URI [/myproject-1.0-SNAPSHOT/organizations/add] in DispatcherServlet with name 'dispatcher\" errors (using JBoss 7).  How do I map this thing properly?  Note that I have multiple methods in my controller that I want to different URLs within the \"/organizations\" space.</p>\n"},{"tags":["java","spring","jax-ws"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13278630,"title":"JAX-WS + Spring server side WSDL to java code","body":"<p>I developed client side service by using axis2 for a given wsdl. Now i have to develop a server side service by using jax-ws+spring  for the same wsdl. Is there a way to generate java code from a wsdl for jax-ws and spring</p>\n"},{"tags":["spring","session","web-applications"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12810153,"title":"Spring session handling: HttpSessionDestroyedEvent not received","body":"<p>I have a web app where in the <em>web.xml</em> I have added the <em>HttpSessionEventPublisher</em> as listener. The web app runs on Jetty 7.x and we are using Spring 3.1.1.</p>\n\n<p>This is supposed to fire <em>HttpSessionCreatedEvent</em> and <em>HttpSessionDestroyedEvent</em> to Spring context event listeners.</p>\n\n<p>I have a Bean (@Controller) that implements <em>ApplicationListener&lt;ApplicationEvent></em>. <em>ApplicationEvent</em> is the common parent class of <em>HttpSessionCreatedEvent</em> and <em>HttpSessionDestroyedEvent</em>. When I now login to my web application or log out from it I'd expect these events to be fired to the <em>onApplicationEvent(ApplicationEvent event)</em> method. I have received other events like some request handling event, but the expected event's didn't show up. I have traced the app a bit, the <em>HttpSessionEventPublisher</em> definitely fires the event to the context, but the listener isn't approached. what do I miss here?</p>\n\n<p>Cheers,\nKai</p>\n"},{"tags":["java","spring","email-integration","mime-message"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13252616,"title":"Spring MimeMessageHelper: AddressException when adding multiple CC","body":"<p>I need to add multiple CC addresses to my mail message, but I keep getting the following exception:</p>\n\n<pre><code>javax.mail.internet.AddressException: Illegal Address (email@email.com;email@email.com,15)\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>final String ccAddress = (String) inputMessageHeaders.get(MailHeaders.CC);\nfinal String[] arrayOfCCAddress = ccAddress.split(\";\");\nfor(String cc : arrayOfCCAddress) {\n    InternetAddress address = new InternetAddress(cc);\n    mimeMessageHelper.setCc(address);\n}\n</code></pre>\n\n<p>The original value of ccAddress is \"email@email.com;email@email.com\"  The actual addresses are valid.  Why is it throwing an exception and adding the \",15\" to the end of the CC address?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","rest","spring-mvc","xml-serialization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13272443,"title":"Different response entity body based on accept header with Spring WebMVC REST controller","body":"<p>I have a controller with a method signature like this</p>\n\n<pre><code>@RequestMapping(value = \"/{project:[A-Z0-9_+\\\\.\\\\(\\\\)=\\\\-]+}\", method = RequestMethod.GET)\npublic ResponseEntity&lt;Object&gt; lookupProject(@PathVariable String project,\n        @RequestParam(value = \"fields\", required = false) String fields,\n        @RequestParam(value = \"asList\", required = false, defaultValue = \"false\") boolean asList);\n</code></pre>\n\n<p>I am returning for JSON a <code>Collection&lt;Object&gt;</code> or <code>Map&lt;String, Object&gt;</code>. This isn't suitable for XML. I'd rather return a <code>Project</code> object.</p>\n\n<p>Is there a clean way to determine which content type will be produced? The work-around would be another method which produces XML only and returns the <code>Project</code> object. I'd rather like to avoid duplicate code.</p>\n\n<p>I am on Spring 3.1.3-RELEASE.</p>\n"},{"tags":["spring","restlet","applicationcontext","restlet-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8,"score":1,"question_id":13276084,"title":"How do you implement Restlet Basic HTTP Authentication on a router?","body":"<p>I read the Restlet documentation on how to implement Basic HTTP Authentication but mine is not working when I make a request to a resource. Any reason why mine is not working?</p>\n\n<p>Application Context:</p>\n\n<pre><code>&lt;!-- Used to map routes to Restlet resources --&gt;\n    &lt;bean id=\"router\" class=\"org.restlet.ext.spring.SpringRouter\"&gt;\n        &lt;property name=\"attachments\"&gt;\n            &lt;map&gt;\n                &lt;!-- I removed the actual values because it references a company --&gt;\n                &lt;entry key=\"/getCompanies\" value=\"ClassResource\" /&gt;\n                &lt;entry key=\"/getList\" value=\"ClassResource\" /&gt;\n                &lt;entry key=\"/getFile\" value=\"ClassResource\" /&gt;\n                &lt;entry key=\"/archiveFile\" value=\"ClassResource\" /&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Used to have login authentication for requests --&gt;\n    &lt;bean id=\"challengeAuthenticator\" class=\"org.restlet.security.ChallengeAuthenticator\"&gt;\n        &lt;constructor-arg&gt;&lt;null /&gt;&lt;/constructor-arg&gt;\n        &lt;!-- Sets the Challenge scheme parameter to the static class member --&gt;\n        &lt;constructor-arg value=\"#{ T(org.restlet.data.ChallengeScheme).HTTP_BASIC }\" /&gt;\n        &lt;constructor-arg value=\"WSRealm\" /&gt;\n        &lt;property name=\"next\" ref=\"router\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Creates a restlet component that contains the server and attachs the application --&gt;\n    &lt;bean id=\"restletComponent\" class=\"org.restlet.ext.spring.SpringComponent\"&gt;\n        &lt;!-- Sets the server in the Restlet component --&gt;\n        &lt;property name=\"server\" ref=\"server\" /&gt;\n        &lt;!-- Attachs the application to the virtual host --&gt;\n        &lt;property name=\"defaultTarget\" ref=\"application\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>I was assuming that since I set the challenge Authenticator next method to the router when I make a request it hits the router and hits the authenticator before going to the resource.</p>\n\n<p>Java Code:</p>\n\n<pre><code>ApplicationContext springContext = new GenericXmlApplicationContext(\"applicationContext.xml\");\nComponent restletComponent = (Component) springContext.getBean(\"restletComponent\");\nGetFilesApplication application = (GetFilesApplication) springContext.getBean(\"application\");\nChallengeAuthenticator challengeAuthenticator =\n            (ChallengeAuthenticator) springContext.getBean(\"challengeAuthenticator\");\nConfig config = application.getConfig();\nMapVerifier mapVerifier = new MapVerifier();\n\n// Puts the user name and password (encrypted) in the map verifier\nmapVerifier.getLocalSecrets().put(config.getUsername(), StringCipher.encrypt(\n            config.getPassword()).toCharArray());\nchallengeAuthenticator.setVerifier(mapVerifier);\nrestletComponent.getDefaultHost().attachDefault(challengeAuthenticator);\n\n// Start the component\nrestletComponent.start();\n</code></pre>\n\n<p>Like I said earlier, the only thing I can see wrong with it is, I am unsure about setting challenge authenticator next method value to the router.</p>\n\n<p>Also for the client side added:</p>\n\n<pre><code>clientResource.setChallengeResponse(ChallengeScheme.HTTP_BASIC, \"correctUser\", StringCipher.encrypt(\"password\"));\n</code></pre>\n\n<p>Forgot to mention that I am testing this on my local machine the client and the web service.</p>\n"},{"tags":["java","spring","grails","groovy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13276276,"title":"Grails / Spring: How do you use importBeans with property a placeHolder in the spring.xml?","body":"<p>In my <code>Config.groovy</code>, I have a variable defined:</p>\n\n<pre><code>    bbws.baseUrl = \"http://localhost:8080/ballot-builder-ws/\"\n</code></pre>\n\n<p>In my <code>spring/resources.groovy</code> I have the following:</p>\n\n<pre><code>importBeans \"classpath:ballot-builder-client.spring.xml\"\n</code></pre>\n\n<p>The <code>ballot-builder-client.spring.xml</code> contains the following property placeholder:</p>\n\n<pre><code>&lt;jaxrs:client\n    id=\"ballotBuilderWebService\"\n    address=\"${bbws.baseUrl}\"\n    serviceClass=\"com.xx.xx.xx.BallotBuilderWebService\"\n    inheritHeaders=\"true\"&gt;\n.....\n&lt;/jaxrs:client&gt;\n</code></pre>\n\n<p>I can't seem to get this to work. The Grails documentation says this is possible, isn't very helpful beyond that. Can someone confirm/deny this is possible? What am I doing wrong?</p>\n"},{"tags":["java","spring","java-ee","velocity"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":858,"score":1,"question_id":4597248,"title":"Spring email and new line character","body":"<p>Can someone tell me how to insert newline characters in email content. I use this code snippet to send emails.</p>\n\n<pre><code>public boolean sendMail(final Account player, final Object tl, final String type)\n{\n    MimeMessagePreparator preparator = new MimeMessagePreparator() {\n        public void prepare(MimeMessage mimeMessage) throws Exception\n        {\n            MimeMessageHelper message = new MimeMessageHelper(mimeMessage);\n\n            String msgAdmin = msgFrom;\n            message.setTo(player.getEmail()); // TODO: changed from msgAdmin to player.getEmail()\n            message.setFrom(msgFrom);\n            message.setSubject(type + \" invitation\");\n            Map model = new HashMap();\n            model.put(\"tl\", tl);\n            model.put(\"player\", player);\n            model.put(\"type\", type);\n            String text = VelocityEngineUtils.mergeTemplateIntoString(velocityEngine,\n                    \"com/test/mail/invite.vm\", model);\n            logger.debug(text);\n            message.setText(text, true);\n        }\n    };\n    return sendMail(preparator);\n}\n</code></pre>\n\n<p>I tried \\r\\n characters in the email content. But it doesn't seem to work. HTML markup like BR tag works, but i dont want to add html markups in the email content. Any other solution is possible?</p>\n"},{"tags":["spring","security","grails-plugin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13276860,"title":"Sorry, we were not able to find a user with that username and password","body":"<p>I installed the Spring Security core plug-in 1.2.7.3 on Grails 2.1.1, ran the s2-quickstart command, and then initialized the initial user and roles in the bootstrap.groovy, but I still cannot login.  Text of the relevant piece of bootstrap.groovy follows:</p>\n\n<pre><code>    if (SecRole.count == 0) {\n        def fUserRole = SecRole.findByAuthority('ROLE_FlowUser') ?: new SecRole(authority: 'ROLE_FlowUser').save(failOnError: true, flush: true)\n        def fAdminRole = SecRole.findByAuthority('ROLE_FlowAdmin') ?: new SecRole(authority: 'ROLE_FlowAdmin').save(failOnError: true, flush: true)\n\n        def bf = SecUser.findByUsername('bill') ?: new SecUser(\n                username: 'bill',\n                password: 'eagle',\n                firstName: 'bill',\n                lastName: 'fly',\n                email: 'bill.fly@baylorhealth.edu',\n                accountExpired: false,\n                accountLocked: false,\n                passwordExpired: false,\n                enabled: true\n        ).save(failOnError: true, flush: true)\n\n        if (!bf.authorities.contains(fAdminRole)) {\n            SecUserSecRole.create bf, fAdminRole, true\n        }\n        if (!bf.authorities.contains(fUserRole)) {\n            SecUserSecRole.create bf, fUserRole, true\n        }\n    }\n</code></pre>\n\n<p>I am not encrypting the password in bootstrap, as seems to be the answer to most of the questions of this type.  All four records are getting written to the database tables, but of course, I cannot tell if the password is encrypted correctly.  My initial controller has the following annotation ahead of the class statement:\n@Secured(['IS_AUTHENTICATED_FULLY'])</p>\n\n<p>Also, I added the following to the config.groovy:</p>\n\n<p>// Added by the Spring Security Core plugin:\ngrails.plugins.springsecurity.userLookup.userDomainClassName = 'cocktail.SecUser'\ngrails.plugins.springsecurity.userLookup.authorityJoinClassName = 'cocktail.SecUserSecRole'\ngrails.plugins.springsecurity.authority.className = 'cocktail.SecRole'\ngrails.plugins.springsecurity.password.algorithm = 'SHA-256'</p>\n"},{"tags":["java","spring","junit"],"answer_count":4,"favorite_count":3,"up_vote_count":10,"down_vote_count":0,"view_count":3985,"score":10,"question_id":2228820,"title":"Add Spring 3.0.0 java based IOC to JUnit 4.7 tests","body":"<p>There is a doc <a href=\"http://static.springsource.org/spring/docs/2.5.6/reference/testing.html\" rel=\"nofollow\">http://static.springsource.org/spring/docs/2.5.6/reference/testing.html</a> how to add IoC support to junit tests using xml-configuration, but I can not find example for java-based configuration...</p>\n\n<p>For example, I have java-based bean:</p>\n\n<pre><code>public class AppConfig\n{\n    @Bean\n    public Test getTest() { return new Test(); }\n}\n</code></pre>\n\n<p>And test:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\npublic class IocTest\n{\n    @Autowired\n    private Test test;\n\n    @Test\n    public void testIoc()\n    {\n        Assert.assertNotNull(test);\n    }\n}\n</code></pre>\n\n<p>What should I add to enable java-based beans to my junit test without using xml-configs?</p>\n\n<p>Normally I use:</p>\n\n<pre><code>new AnnotationConfigApplicationContext(AppConfig.class);\n</code></pre>\n\n<p>but it does not work for tests...</p>\n"},{"tags":["java","spring","mvc","controller","session-bean"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13276391,"title":"Spring 3 MVC: Expose session scoped bean in MVC Controller method arguments","body":"<p>I want to pass a session-scoped domain bean around my controllers for consistency and simplicity - but this doesn't seem possible OOTB. Hope someone can advise.</p>\n\n<p>Question: <strong>Can a session-scoped bean be exposed as a MVC Controller argument</strong></p>\n\n<hr>\n\n<p>There appears to be an annotation for this: @SessionAttributes(\"myBean\") however this only maintains a Controller-level scope.</p>\n\n<p>I'm looking to avoid having to interact with HttpSession and instead pass around my domain object graph consistently through my controllers. This would seem a fairly standard requirement.</p>\n\n<p>This has benefits:</p>\n\n<ul>\n<li>Testability - just inject bean to test and not have to mock out HttpSession</li>\n<li>Abstraction - avoids Servlet model concerns and just the business problem</li>\n</ul>\n\n<p>Here's the current config:</p>\n\n<pre><code>@Controller\n@SessionAttributes(\"customer\")\npublic class LoginController {\n\n   @Inject Customer customer;\n\n   @RequestMapping(value = \"/login\", method = RequestMethod.GET)\n   public String welcome(Customer customer) {\n         ...\n         return \"loginDetailsView\";\n   }\n\n   public String processLogin(@Valid Customer customer, BindingResult bindingResult) {\n         ...\n         if (bindResult.hasErrors()) {\n             return \"loginDetailsView\";\n         else {\n             return \"homePageView\";\n         }\n   }\n</code></pre>\n\n<p>'Customer' session bean is a regular POJO using XML configured aop-proxy (CGLIB) to allow the session scoped bean to be injected into singletons (controller and service classes):</p>\n\n<pre><code>&lt;beans:bean id=\"customer\" class=\"com.mypackage.domain.Customer\" scope=\"session\"&gt;\n            &lt;aop:scoped-proxy proxy-target-class=\"true\"/&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n\n<p>The following question is virtually the same but there are no answers that don't involve extension to the Spring 3 core framework. </p>\n\n<p><em>Has this been intentionally omitted by Spring's designers</em>?  My intent is to use the domain model to back the forms without using 'form beans' and a layer of mappers.</p>\n\n<p>Can anyone advise a way / or indicate if this is poor practice? </p>\n\n<p>Prior question with bespoke solution:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3621266/how-to-pass-a-session-attribute-as-method-argument-parameter-with-spring-mvc\">How to pass a session attribute as method argument (parameter) with Spring MVC</a></p>\n\n<p>Please note: attempting to minimise the dependencies on the Spring framework and use Annotation support esp JSR-303 etc. Will adopt any OOTB solution - please don't suggest custom extentions.</p>\n"},{"tags":["spring","spring-mvc","spring-security"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":903,"score":1,"question_id":8381776,"title":"Dynamic Spring Security using SQL Query","body":"<p>Hello I want to make an intercept url pattern and access dynamically by using sql query in spring security. </p>\n\n<p>Generally we use this type of notation in XML and I want to take these values (/add-role and ROLE_ADMIN) from database.</p>\n\n<pre><code>&lt;intercept-url pattern=\"/add-role*\" access=\"ROLE_ADMIN\" /&gt;\n</code></pre>\n\n<p>Is it possible to do this dynamically?</p>\n"},{"tags":["spring","dependency-injection","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13275764,"title":"Spring: Injection of autowired dependencies failed","body":"<p>Hi I am working on Spring application. I want to hash the password using spring utility.</p>\n\n<pre><code>&lt;bean class=\"org.springframework.security.authentication.encoding.Md5PasswordEncoder\" id=\"passwordEncoder\"/&gt; \n</code></pre>\n\n<p>has been added in application-context.xml.</p>\n\n<p>Can anybody please help me out, for the below stack trace while starting Apache:</p>\n\n<pre><code>SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userDao': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: private java.lang.String com.sapram.qx.dao.UserDao.encodePassword(java.lang.String); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)\n    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)\n    at java.util.concurrent.FutureTask.run(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: private java.lang.String com.sapram.qx.dao.UserDao.encodePassword(java.lang.String); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:593)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)\n    ... 23 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:952)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:821)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)\n    ... 25 more\n</code></pre>\n"},{"tags":["java","spring","annotations","ehcache"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13275877,"title":"Add properties to @Cacheable annotation without using nested annotations","body":"<p>So I'm using ehcache-spring-annotations 1.2.0 in a Spring Roo project and Roo has a total fit every time it runs into nested annotations that it didn't create. Is there a way to rewrite this annotation without using nested annotations?</p>\n\n<pre><code>@Cacheable(cacheName = \"CacheName\", \n           keyGenerator = @KeyGenerator (\n               name = \"ListCacheKeyGenerator\",\n               properties = {\n                   @Property(name=\"useReflection\", value=\"true\"),\n                   @Property(name=\"checkforCycles\", value=\"true\")}))\npublic void method() {\n    // do something that needs cached\n}\n</code></pre>\n"},{"tags":["java","web-services","spring","soap","axiom"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13274770,"title":"Soap Handler org.w3c.dom.DOMException: HIERARCHY_REQUEST_ERR:","body":"<p>I'm using JAX-WS in a stateless bean exposed as a web service using Spring configuration (not Spring-WS).  I've added a SOAP Handler and in handler, when I try to getMessage() on the SOAPMessageContext, I get a An attempt was made to insert a\n node where it is not permitted.</p>\n\n<pre><code>        at org.apache.axiom.om.impl.dom.ParentNode.insertBefore(ParentNode.java:\n224)\n        at org.apache.axiom.om.impl.dom.NodeImpl.appendChild(NodeImpl.java:240)\n        at org.apache.axis2.saaj.SOAPPartImpl.appendChild(SOAPPartImpl.java:989)\n\n        at com.sun.xml.bind.marshaller.SAX2DOMEx.startElement(SAX2DOMEx.java:198\n)\n        at com.sun.xml.ws.message.SAX2DOMWriterEx.writeStartElement(SAX2DOMWrite\nrEx.java:97)\n        at com.sun.xml.ws.message.AbstractMessageImpl.writeTo(AbstractMessageImp\nl.java:144)\n        at com.sun.xml.ws.message.AbstractMessageImpl.readAsSOAPMessage(Abstract\nMessageImpl.java:226)\n        at com.sun.xml.ws.handler.SOAPMessageContextImpl.getMessage(SOAPMessageC\nontextImpl.java:87)\n</code></pre>\n\n<p>I added these dependencies to my Maven configuration:\n<a href=\"http://stackoverflow.com/questions/4888412/jax-ws-getting-domexception-hierarchy-request-err-upon-trying-to-add-security\">JAX-WS: Getting DOMException - HIERARCHY_REQUEST_ERR upon trying to add security headers</a></p>\n\n<p>I've read that the WebLogic saaj libraries are out of date.  I tried adding this to my startup environment script:</p>\n\n<pre><code>-Djavax.xml.soap.MessageFactory=com.sun.xml.internal.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1Impl\n</code></pre>\n\n<p>and also tried:</p>\n\n<pre><code>-Djavax.xml.soap.MessageFactory=org.springframework.ws.soap.axiom.AxiomSoapMessageFactory\n</code></pre>\n\n<p>but that hasn't helped.</p>\n"},{"tags":["java","spring","service","web","jaxb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":12892068,"title":"WebServiceTransportException: Not Found [404]","body":"<p>I'm currently implementing a spring web service using jaxb. But when I trying to consume the web service created a <code>WebServiceTransportException: Not Found [404]</code> error is encountered. I did try to search the net but could not able to find a possible root cause. Below I have show my source codes.</p>\n\n<p>application-context.xml\n\n        \n        \n        \n    </p>\n\n<pre><code>&lt;bean\n    class=\"org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter\"&gt;\n    &lt;constructor-arg ref=\"marshaller\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"marshaller\" class=\"org.springframework.oxm.jaxb.Jaxb2Marshaller\"&gt;\n    &lt;property name=\"classesToBeBound\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;com.ph.domain.EightBallRequest&lt;/value&gt;\n            &lt;value&gt;com.ph.domain.EightBallResponse&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"viewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;property name=\"prefix\"&gt;\n        &lt;value&gt;/jsp/&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"suffix\"&gt;\n        &lt;value&gt;.jsp&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"simpleUrlHandlerMapping\"\n    class=\"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping\"\n    lazy-init=\"true\"&gt;\n    &lt;property name=\"mappings\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"/test.asp\"&gt;LandingController&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;     \n\n&lt;bean name=\"LandingController\" class=\"com.ph.controller.LandingController\"&gt;\n    &lt;property name=\"stub\" ref=\"eightBallClient\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Client for webservice</p>\n\n<pre><code>public class EightBallClient extends WebServiceGatewaySupport {\n\nprivate Resource request;\n\npublic void setRequest(Resource request) {\n    this.request = request;\n}\n\npublic String AskQuestion(String question) throws IOException {\n    String responseString = null;\n\n    EightBallRequest request = new EightBallRequest();\n    request.setQuestion(question);\n\n    EightBallResponse response = new EightBallResponse();\n\n    response = (EightBallResponse) getWebServiceTemplate()\n            .marshalSendAndReceive(request);\n    responseString = response.getAnswer().toString();\n    return responseString;\n}\n}\n</code></pre>\n\n<p>definition of my web service</p>\n\n<p>\n        \n        \n        \n        \n    </p>\n\n<pre><code>&lt;bean id=\"schema\" class=\"org.springframework.xml.xsd.SimpleXsdSchema\"&gt;\n    &lt;property name=\"xsd\" value=\"/WEB-INF/eightball.xsd\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>And below is the error stack:</p>\n\n<pre><code>SEVERE: Servlet.service() for servlet dispatcher threw exception\norg.springframework.ws.client.WebServiceTransportException: Not Found [404]\n    at org.springframework.ws.client.core.WebServiceTemplate.handleError(WebServiceTemplate.java:626)\n    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:550)\n    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:501)\n    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:350)\n    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:344)\n    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:336)\n</code></pre>\n"},{"tags":["spring","websphere","shared-libraries"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3,"score":0,"question_id":13275172,"title":"Spring cannot find jar outside EAR - WebSphere community edition","body":"<p>I have an ear deployed to WebSphere Application Server Community Edition which uses spring to load different interfaces. For production all those classes are loaded inside the ear. I'm trying to override those classes with another class in a jar outside the EAR.</p>\n\n<p>I placed my jar in /var/shared/lib and have a deployment dependency which I thought would include those folder's into the classpath:</p>\n\n<pre><code>&lt;sys:dependencies&gt;\n&lt;sys:dependency&gt;\n&lt;sys:groupId&gt;org.apache.geronimo.configs&lt;/sys:groupId&gt;\n&lt;sys:artifactId&gt;sharedlib&lt;/sys:artifactId&gt;\n&lt;/sys:dependency&gt;\n&lt;/sys:dependencies&gt;\n</code></pre>\n\n<p>What am I missing? The spring results in a NoClassDef stating the class cannot be found.</p>\n"},{"tags":["java","spring","jsp","spring-security","acl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13273173,"title":"Spring ACL with properties file","body":"<p>I would like to know if someone have tried to implement a spring acl feature, but instead of using a Database, use a simple properties file. for example :</p>\n\n<p>myobject.input.field1=ACL_READ<br>\nmyobject.input.field2=ACL_READ,ACL_WRITE</p>\n\n<p>and in the jsp :</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;sec:accesscontrollist hasPermission=\"ACL_READ\" domainObject=\"myobject.input.field1\"&gt;\nThis will be shown if the user has either of the permissions \nrepresented by the values \"1\" or \"2\" on the given object.\n    &lt;input type=\"text\" name=\"field1\" /&gt;\n&lt;/sec:accesscontrollist&gt;\n</code></pre>\n\n<p>c.f. <a href=\"http://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html#d0e6991\" rel=\"nofollow\">http://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html#d0e6991</a></p>\n"},{"tags":["spring","struts2","spring-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":12,"score":-2,"question_id":13274869,"title":"Struts and Spring security integration","body":"<p>I want to create login module for my application using Spring-Security feature using authentication based on a database.\nI know how to implement Spring Security with Spring MVC, but the problem here is I am using Struts and Spring integration. I am not using Spring MVC.\nIn my application I am using Struts2.3 and Spring 3.0.</p>\n\n<p>I searched a lot but was not able to find a complete step by step article which explains in details all the steps involved.</p>\n\n<p>I would be grateful, if some could direct me to some tutorials for this.</p>\n"},{"tags":["spring","unit-testing","eclipselink","dao","hsqldb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13274548,"title":"Testing DAOs with hsqldb, eclipselink and spring","body":"<p>I'm a newbie at Spring data &amp; transactions as well as at unit testing... I got from a Spring training a working example of Spring DAO testing using a on the flow-generated HSQL database and Hibernate as JPA.\nIn my case, I'm using EclipseLink so I just wanted to adapt the example to this. Unfortunately I cannot make it work and I really don't see anymore how to fix it that's why I need your help.</p>\n\n<p>Here is my Test class :</p>\n\n<pre><code>public class BasicDAOTests {\n\n  private BasicDAO&lt;Projet&gt; basicDAO;//my BasicDAO is generic so I decided to test it on the type \"Projet\"\n\n  private PlatformTransactionManager transactionManager;\n\n  private TransactionStatus transactionStatus;\n\n@Before\n  public void setUp() throws Exception {\n    EntityManagerFactory entityManagerFactory = createEntityManageFactory();\n    basicDAO = new BasicDAO&lt;Projet&gt;(Projet.class);\n    basicDAO.setEmf(entityManagerFactory);\n    // begin a transaction\n    transactionManager = new JpaTransactionManager(entityManagerFactory);\n    transactionStatus = transactionManager.getTransaction(new DefaultTransactionDefinition());\n\n }\n\n private EntityManagerFactory createEntityManageFactory() {\n    // create a FactoryBean to help create a JPA EntityManagerFactory\n    LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\n    factoryBean.setJpaVendorAdapter(new EclipseLinkJpaVendorAdapter());\n    factoryBean.setDataSource(createTestDataSource());\n\n    /*Class[] annotatedClasses = new Class[] { Restaurant.class };\n    factoryBean..setAnnotatedClasses(annotatedClasses);\n    factoryBean.setHibernateProperties(createHibernateProperties());*/\n    // initialize according to the Spring InitializingBean contract\n    factoryBean.afterPropertiesSet();\n    // get the created session factory\n    return (EntityManagerFactory)factoryBean.getObject();\n}\n\n\n@SuppressWarnings(\"deprecation\")\n@Test\npublic void testFindProjectById() {\n    Projet project = basicDAO.findById(1);\n    assertNotNull(\"the project should never be null\", project);\n    assertEquals(\"the project id is wrong\", \"1\", project.getIdProjet());\n    assertEquals(\"the name is wrong\", \"Porc demain\", project.getNomProjet());\n    assertEquals(\"the data is wrong\", new Date(\"2012-07-30\"), project.getDtCreation());\n}\n\n@After\npublic void tearDown() throws Exception {\n    // rollback the transaction to avoid corrupting other tests\n    transactionManager.rollback(transactionStatus);\n}\n\n\nprivate DataSource createTestDataSource() {\n    return new EmbeddedDatabaseBuilder()\n    .setName(\"meansTest\")\n    .addScript(\"/folder/schema.sql\")\n    .addScript(\"/folder/test-data.sql\")\n    .build();\n}\n\n}\n</code></pre>\n\n<p>In all cases it just seems that it cannot create a proper EntityManagerFactory bean so I guess either I'm using the wrong Spring classes either I don't set their properties correctly... Do you have any suggestions to correct it?</p>\n\n<p>Thanks in advance for your help!</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13226582,"title":"Spring deployment in jboss error","body":"<p>I just wanted to add spring framework to my project, But when i try to deploy my war file in jboss 6.1.0 Final, it gives a error. I get following error,</p>\n\n<pre><code>    11:01:46,556 INFO  [STDOUT] ERROR: org.springframework.web.context.ContextLoader - Context initializ\nation failed\n11:01:46,557 INFO  [STDOUT] org.springframework.beans.factory.BeanCreationException: Error creating\nbean with name 'com.tapgift.merchant.integration.spring.DaoFactoryPostProcessor#0' defined in class\npath resource [config/dao-defs.xml]: Cannot resolve reference to bean 'DAOFactory' while setting bea\nn property 'daoFactory'; nested exception is org.springframework.beans.factory.BeanCreationException\n: Error creating bean with name 'DAOFactory' defined in class path resource [config/dao-defs.xml]: I\nnvocation of init method failed; nested exception is java.lang.NullPointerException\n</code></pre>\n\n<p>This is dao-def.xml</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\"&gt;\n\n    &lt;!-- All DAO bean definitions goes here --&gt;\n    &lt;bean id=\"DAOFactory\"\n        class=\"com.tapgift.merchant.integration.db.dao.jdbc.JdbcDaoFactoryImpl\" /&gt;\n\n    &lt;bean class=\"com.tapgift.merchant.integration.spring.DaoFactoryPostProcessor\"&gt;\n        &lt;property name=\"daoFactory\" ref=\"DAOFactory\" /&gt;\n    &lt;/bean&gt;\n\n     &lt;bean id=\"merchantDao\"\n        class=\"com.tapgift.merchant.integration.db.dao.jdbc.JdbcMerchantDao\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;     \n        &lt;property name=\"queryFactory\" ref=\"QueryFactory\" /&gt;         \n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>This is application-context.xml</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n\n    &lt;context:annotation-config /&gt;\n    &lt;context:component-scan base-package=\"com.tapgift.merchant\" /&gt;\n\n    &lt;import resource=\"classpath:config/spring-integration.xml\" /&gt;\n    &lt;import resource=\"classpath:config/dao-defs.xml\" /&gt; \n    &lt;import resource=\"classpath:config/query-defs.xml\" /&gt;   \n    &lt;import resource=\"classpath:config/spring-support.xml\" /&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>Finally this is web.xml</p>\n\n<pre><code>&lt;!-- The definition of the Root Spring Container shared by all Servlets and Filters --&gt;\n&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;classpath:config/application-context.xml\n                /WEB-INF/spring/root-context.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n\n<p>oops, almost missed the pom,</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.tapgift&lt;/groupId&gt;\n    &lt;artifactId&gt;merchant&lt;/artifactId&gt;\n    &lt;name&gt;merchant-server&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0.0-BUILD-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;java-version&gt;1.7&lt;/java-version&gt;\n        &lt;org.springframework-version&gt;3.1.0.RELEASE&lt;/org.springframework-version&gt;\n        &lt;org.aspectj-version&gt;1.6.9&lt;/org.aspectj-version&gt;\n        &lt;org.slf4j-version&gt;1.5.10&lt;/org.slf4j-version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;!-- Spring --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;               \n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n                   &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n                   &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n                   &lt;version&gt;3.2.1&lt;/version&gt;\n                   &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                  &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n                  &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n                  &lt;version&gt;2.6&lt;/version&gt;\n                  &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                 &lt;groupId&gt;commons-io&lt;/groupId&gt;\n                 &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n                 &lt;version&gt;2.0.1&lt;/version&gt;\n                 &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                 &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n                 &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n                 &lt;version&gt;1.4&lt;/version&gt;\n                 &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n        &lt;!-- AspectJ --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n            &lt;version&gt;${org.aspectj-version}&lt;/version&gt;\n        &lt;/dependency&gt;   \n\n        &lt;!-- Logging --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.15&lt;/version&gt;           \n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n                    &lt;artifactId&gt;mail&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;javax.jms&lt;/groupId&gt;\n                    &lt;artifactId&gt;jms&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.sun.jdmk&lt;/groupId&gt;\n                    &lt;artifactId&gt;jmxtools&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.sun.jmx&lt;/groupId&gt;\n                    &lt;artifactId&gt;jmxri&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- @Inject --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n            &lt;version&gt;1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Servlet --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- JSON view resolver --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;\n            &lt;version&gt;1.9.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Test --&gt;\n        &lt;!-- &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.7&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;  --&gt;       \n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.9&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;additionalProjectnatures&gt;\n                        &lt;projectnature&gt;org.springframework.ide.eclipse.core.springnature&lt;/projectnature&gt;\n                    &lt;/additionalProjectnatures&gt;\n                    &lt;additionalBuildcommands&gt;\n                        &lt;buildcommand&gt;org.springframework.ide.eclipse.core.springbuilder&lt;/buildcommand&gt;\n                    &lt;/additionalBuildcommands&gt;\n                    &lt;downloadSources&gt;true&lt;/downloadSources&gt;\n                    &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                    &lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                    &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.2.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;org.test.int1.Main&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>I can see all the files compiled and assembled to the war file. Appreciate, if a spring guru can point me the reason for this deployment error.  </p>\n\n<p>Edit: Added DaoFactoryImpl</p>\n\n<pre><code>package com.tapgift.merchant.integration.db.dao.jdbc;\n\nimport java.lang.reflect.ParameterizedType;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.InitializingBean;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.ApplicationContextAware;\n\nimport com.tapgift.merchant.integration.db.dao.BaseDao;\nimport com.tapgift.merchant.integration.db.dao.DaoFactory;\nimport com.tapgift.merchant.integration.db.dao.EntityBaseDao;\n\n/**\n * Class &lt;code&gt;CaseServiceImpl&lt;/code&gt; is an implementation of the &lt;tt&gt;DaoFactory&lt;/tt&gt; interface.\n */\npublic class JdbcDaoFactoryImpl implements DaoFactory, InitializingBean, ApplicationContextAware\n{\n    private ApplicationContext m_appCtx;\n    private Map&lt;String, EntityBaseDao&lt;?&gt;&gt; m_daoMap = new HashMap&lt;String, EntityBaseDao&lt;?&gt;&gt;();\n\n    /**\n     * {@inheritDoc}.\n     */\n    @Override\n    @SuppressWarnings(\"rawtypes\")\n    public void afterPropertiesSet() throws Exception\n    {\n        Map&lt;String, BaseDao&gt; beanMap = m_appCtx.getBeansOfType(BaseDao.class);\n        for (final BaseDao dao : beanMap.values())\n        {\n            m_daoMap.put(((EntityBaseDao) dao).getEntityType().getName(), (EntityBaseDao) dao);\n        }\n    }\n\n    /**\n     * {@inheritDoc}.\n     */\n    @Override\n    public BaseDao getDao(String name)\n    {\n        return this.m_daoMap.get(name);\n    }\n\n    /**\n     * {@inheritDoc}.\n     */\n    @Override\n    public &lt;T&gt; T getEntityDao(Class&lt;T&gt; clazz)\n    {\n        String entityName = ((Class) ((ParameterizedType) clazz.getGenericInterfaces()[0]).getActualTypeArguments()[0])\n            .getSimpleName().toUpperCase();\n        return clazz.cast(this.m_daoMap.get(entityName));\n    }\n\n    /**\n     * Set method for m_appCtx\n     */\n    @Override\n    public void setApplicationContext(ApplicationContext appCtx) throws BeansException\n    {\n        this.m_appCtx = appCtx;\n    }\n\n}\n</code></pre>\n\n<p><strong>Update 2</strong>\nThe problem seems to be creating the JdbbcDaoFactoryimpl instance, When i removed the\n<code>&lt;bean id=\"DAOFactory\" class=\"com.tapgift.merchant.integration.db.dao.jdbc.JdbcDaoFactoryImpl\" /&gt;</code> with its dependencies, i can deploy it without any problem. I checked the war file and all spring jars are belongs to same version. Need  a help desperately.</p>\n"},{"tags":["spring","hibernate","jpa","jdbc","tomcat7"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":25,"score":-1,"question_id":13260768,"title":"Cannot create JDBC driver of class '' for connect URL 'null' java.lang.NullPointerException Tomcat 7 Hibernate 4 Spring 3","body":"<p>Help!  I've googled and searched StackOverflow and nothing has fixed the stack trace below.</p>\n\n<p>How do I debug the situation to find the source of the NullPointerException?  Is there a way to have Hibernate or Spring show me the exact line in the configuration XML files which is causing this issue?</p>\n\n<p>Configuration:</p>\n\n<ul>\n<li>Tomcat 7 </li>\n<li>Hibernate 4 </li>\n<li>Spring 3 </li>\n<li>Struts 2 </li>\n<li>CentOS 6.3</li>\n<li>mysql-connector-java-5.1.20.jar is located in tomcat/lib</li>\n</ul>\n\n<p>tomcat/conf/server.xml: </p>\n\n<pre><code>&lt;Context docBase=\"ROOT\" path=\"/\" reloadable=\"false\"\n                         source=\"org.eclipse.jst.j2ee.server:ddddd\"&gt;\n                    &lt;Resource name=\"jdbc/cccc\" auth=\"Container\" type=\"javax.sql.DataSource\"\n                              maxActive=\"30\" maxIdle=\"15\" maxWait=\"300000\" removeAbandoned=\"true\"\n                              removeAbandonedTimeout=\"20\" driverClassName=\"com.mysql.jdbc.Driver\"\n                              logAbandoned=\"true\" username=\"aaaa\" password=\"bbbb\"\n                              url=\"jdbc:mysql://xxxx:yyyy/zzzzz\" /&gt;\n                &lt;/Context&gt;\n</code></pre>\n\n<p>WAR applicationContext.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xmlns:task=\"http://www.springframework.org/schema/task\"\n       xsi:schemaLocation=\"\n    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\n    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd\n    http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd\n    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd\" default-autowire=\"autodetect\"&gt;\n\n    &lt;context:property-placeholder location=\"classpath:amqp_connection.properties\"/&gt;\n    &lt;import resource=\"rabbit-config.xml\"/&gt;\n\n    &lt;task:annotation-driven scheduler=\"myScheduler\"/&gt;\n    &lt;task:scheduler id=\"myScheduler\" pool-size=\"10\"/&gt;\n\n   &lt;various beans/&gt;\n    &lt;bean class=\"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor\"/&gt;\n    &lt;bean class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n\n    &lt;!--  JPA implementation --&gt;\n    &lt;bean id=\"entityManagerFactory\"\n      class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"jndiDataSource\" /&gt;\n    &lt;property name=\"persistenceUnitName\" value=\"punit\"/&gt;\n    &lt;property name=\"jpaVendorAdapter\"&gt;\n        &lt;bean\n        class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n        &lt;property name=\"showSql\" value=\"false\" /&gt;\n        &lt;property name=\"database\" value=\"MYSQL\" /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean \n    class=\"org.springframework.beans.factory.config.MethodInvokingFactoryBean\" \n    lazy-init=\"false\"&gt; \n    &lt;property name=\"targetObject\" ref=\"jndiDataSource\" /&gt; \n    &lt;property name=\"targetMethod\" value=\"addConnectionProperty\" /&gt; \n    &lt;property name=\"arguments\"&gt; \n        &lt;list&gt; \n        &lt;value&gt;characterEncoding&lt;/value&gt; \n        &lt;value&gt;UTF-8&lt;/value&gt; \n        &lt;/list&gt; \n    &lt;/property&gt; \n    &lt;/bean&gt; \n\n    &lt;bean id=\"jndiDataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;property name=\"jndiName\" value=\"java:comp/env/jdbc/cccc\" /&gt;\n    &lt;property name=\"resourceRef\" value=\"false\" /&gt;\n    &lt;property name=\"defaultObject\" value=\"dummy\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"transactionManager\"\n      class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n    &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- The 'proxy-target-class=\"true\"' is to correctly autowire classes that implement interfaces.\n    e.g ReportUserDAO. All it means is that Spring will inject the concrete class instead of an\n    auto-proxied object that only implements the interface. --&gt;\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\" proxy-target-class=\"true\"/&gt;\n\n    &lt;!-- the transactional advice (i.e. what 'happens'; see the &lt;aop:advisor/&gt; bean below) --&gt;\n    &lt;tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\"&gt;\n    &lt;!-- the transactional semantics... --&gt;\n    &lt;tx:attributes&gt;\n        &lt;!-- all methods starting with 'get' are read-only (optimization) --&gt;\n        &lt;tx:method name=\"get*\" read-only=\"true\"/&gt;\n        &lt;!-- other methods use the default transaction settings (see below) --&gt;\n        &lt;tx:method name=\"*\"/&gt;\n    &lt;/tx:attributes&gt;\n    &lt;/tx:advice&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>Stack Trace:</p>\n\n<pre><code>Cannot create JDBC driver of class '' for connect URL 'null'\njava.lang.NullPointerException\n        at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507)\n        at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(JdbcOdbcDriver.java:476)\n        at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(JdbcOdbcDriver.java:307)\n        at java.sql.DriverManager.getDriver(DriverManager.java:253)\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\n        at org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:70)\n        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcServicesImpl.java:242)\n        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:117)\n        at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)\n        at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)\n        at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2277)\n        at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2273)\n        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1742)\n        at org.hibernate.ejb.EntityManagerFactoryImpl.&lt;init&gt;(EntityManagerFactoryImpl.java:94)\n        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)\n        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)\n        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)\n        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:268)\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:530)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:496)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:657)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:630)\n        at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:159)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:339)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doG59737 [localhost-startStop-1] \n\n\nINFO  c.t.u.m.j.JdbcMigrationLauncherFactory - Creating JdbcMigrationLauncher for web-application.\n59882 [localhost-startStop-1] \n\n\nINFO  c.t.u.m.MigrationRunnerFactory - Using specified migration strategy: 'com.tacitknowledge.util.migration.MissingPatchMigrationRunnerStrategy'\n60182 [localhost-startStop-1] \n\n\nERROR c.t.u.m.j.WebAppJNDIMigrationLauncher - java.lang.RuntimeException: Migration exception caught during migration\nMigration exception caught during migration\njava.lang.RuntimeException: Migration exception caught during migration\n        at com.tacitknowledge.util.migration.jdbc.WebAppJNDIMigrationLauncher.contextInitialized(WebAppJNDIMigrationLauncher.java:87)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:662)\nCaused by: com.tacitknowledge.util.migration.MigrationException: Unable to create a connection.\n        at com.tacitknowledge.util.migration.jdbc.PatchTable.createPatchStoreIfNeeded(PatchTable.java:117)\n        at com.tacitknowledge.util.migration.jdbc.PatchTable.isPatchStoreLocked(PatchTable.java:223)\n        at com.tacitknowledge.util.migration.jdbc.JdbcMigrationLauncher.waitForFreeLock(JdbcMigrationLauncher.java:587)\n        at com.tacitknowledge.util.migration.jdbc.JdbcMigrationLauncher.lockPatchStore(JdbcMigrationLauncher.java:546)\n        at com.tacitknowledge.util.migration.jdbc.JdbcMigrationLauncher.doMigrations(JdbcMigrationLauncher.java:477)\n        at com.tacitknowledge.util.migration.jdbc.JdbcMigrationLauncher.doMigrations(JdbcMigrationLauncher.java:136)\n        at com.tacitknowledge.util.migration.jdbc.util.MigrationUtil.doMigrations(MigrationUtil.java:46)\n        at com.tacitknowledge.util.migration.jdbc.WebAppJNDIMigrationLauncher.contextInitialized(WebAppJNDIMigrationLauncher.java:79)\n        ... 14 more\nCaused by: org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null'\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\n        at com.tacitknowledge.util.migration.jdbc.DataSourceMigrationContext.getConnection(DataSourceMigrationContext.java:76)\n        at com.tacitknowledge.util.migration.jdbc.PatchTable.createPatchStoreIfNeeded(PatchTable.java:99)\n        ... 21 more\nCaused by: java.lang.NullPointerException\n        at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507)\n        at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(JdbcOdbcDriver.java:476)\n        at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(JdbcOdbcDriver.java:307)\n        at java.sql.DriverManager.getDriver(DriverManager.java:253)\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)\n        ... 25 more\nMigration exception caught during migration\njava.lang.RuntimeException: Migration exception caught during migration\n        at com.tacitknowledge.util.migration.jdbc.WebAppJNDIMigrationLauncher.contextInitialized(WebAppJNDIMigrationLauncher.java:87)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:662)\nCaused by: com.tacitknowledge.util.migration.MigrationException: Unable to create a connection.\n        at com.tacitknowledge.util.migration.jdbc.PatchTable.createPatchStoreIfNeeded(PatchTable.java:117)\n        at com.tacitknowledge.util.migration.jdbc.PatchTable.isPatchStoreLocked(PatchTable.java:223)\n        at com.tacitknowledge.util.migration.jdbc.JdbcMigrationLauncher.waitForFreeLock(JdbcMigrationLauncher.java:587)\n        at com.tacitknowledge.util.migration.jdbc.JdbcMigrationLauncher.lockPatchStore(JdbcMigrationLauncher.java:546)\n        at com.tacitknowledge.util.migration.jdbc.JdbcMigrationLauncher.doMigrations(JdbcMigrationLauncher.java:477)\n        at com.tacitknowledge.util.migration.jdbc.JdbcMigrationLauncher.doMigrations(JdbcMigrationLauncher.java:136)\n        at com.tacitknowledge.util.migration.jdbc.util.MigrationUtil.doMigrations(MigrationUtil.java:46)\n        at com.tacitknowledge.util.migration.jdbc.WebAppJNDIMigrationLauncher.contextInitialized(WebAppJNDIMigrationLauncher.java:79)\n        ... 14 more\nCaused by: org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null'\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\n        at com.tacitknowledge.util.migration.jdbc.DataSourceMigrationContext.getConnection(DataSourceMigrationContext.java:76)\n        at com.tacitknowledge.util.migration.jdbc.PatchTable.createPatchStoreIfNeeded(PatchTable.java:99)\n        ... 21 more\nCaused by: java.lang.NullPointerException\n        at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507)\n        at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(JdbcOdbcDriver.java:476)\n        at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(JdbcOdbcDriver.java:307)\n        at java.sql.DriverManager.getDriver(DriverManager.java:253)\n        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)\n        ... 25 more\n\n\nNov 6, 2012 12:06:50 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: Error listenerStart\n\n\nNov 6, 2012 12:06:50 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: Context [] startup failed due to previous errors\n\n\nNov 6, 2012 12:06:51 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [perf4j-async-stats-appender-sink-CoalescingStatistics] but has failed to stop it. This is very likely to create a memory leak.\n\n\nNov 6, 2012 12:06:51 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [myScheduler-1] but has failed to stop it. This is very likely to create a memory leak.\n\n\nNov 6, 2012 12:06:51 PM org.apache.catalina.loader.WebappClassLoader loadClass\nINFO: Illegal access: this web application instance has been stopped already.  Could not load org.hibernate.engine.spi.ActionQueue.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.\njava.lang.IllegalStateException\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1600)\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\n        at org.hibernate.internal.SessionImpl.&lt;init&gt;(SessionImpl.java:238)\n        at org.hibernate.internal.SessionFactoryImpl$SessionBuilderImpl.openSession(SessionFactoryImpl.java:1839)\n        at org.hibernate.ejb.EntityManagerImpl.getRawSession(EntityManagerImpl.java:121)\n        at org.hibernate.ejb.EntityManagerImpl.getSession(EntityManagerImpl.java:97)\n        at org.hibernate.ejb.AbstractEntityManagerImpl.setDefaultProperties(AbstractEntityManagerImpl.java:273)\n        at org.hibernate.ejb.AbstractEntityManagerImpl.postInit(AbstractEntityManagerImpl.java:181)\n        at org.hibernate.ejb.EntityManagerImpl.&lt;init&gt;(EntityManagerImpl.java:89)\n        at org.hibernate.ejb.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:179)\n        at org.hibernate.ejb.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:174)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:376)\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:517)\n        at $Proxy132.createEntityManager(Unknown Source)\n        at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:234)\n        at $Proxy133.find(Unknown Source)\n        at com.picsauditing.dao.FeatureToggleDAO.find(FeatureToggleDAO.java:20)\n        at com.picsauditing.dao.FeatureToggleDAO.findFeatureToggle(FeatureToggleDAO.java:12)\n        at com.picsauditing.dao.FeatureToggleDAO$$FastClassByCGLIB$$47d66cf5.invoke(&lt;generated&gt;)\n        at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n        at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:618)\n        at com.picsauditing.dao.FeatureToggleDAO$$EnhancerByCGLIB$$ab7976be.findFeatureToggle(&lt;generated&gt;)\n        at com.picsauditing.toggle.FeatureToggleCheckerGroovy.scriptBodyFromProperty(FeatureToggleCheckerGroovy.java:100)\n        at com.picsauditing.toggle.FeatureToggleCheckerGroovy.script(FeatureToggleCheckerGroovy.java:69)\n        at com.picsauditing.toggle.FeatureToggleCheckerGroovy.isFeatureEnabled(FeatureToggleCheckerGroovy.java:46)\n        at com.picsauditing.messaging.subscription.EmailSubscriptionPoller.pollForMessage(EmailSubscriptionPoller.java:46)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:64)\n        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n        at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:662)\n</code></pre>\n"},{"tags":["spring","junit","applicationcontext"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13272016,"title":"JUnit: spring configuration","body":"<p>i try to write a test to controller</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=\"/WEB-INF/spring/root-context.xml\")\npublic class ContactServiceTest {\n\n    private MockHttpServletRequest request;\n    private MockHttpServletResponse response;\n    private ContactController controller;\n    private AnnotationMethodHandlerAdapter adapter;\n\n    @Autowired\n    private ApplicationContext applicationContext;\n\n    @Before\n    public void setUp() {\n        request    = new MockHttpServletRequest();\n        response   = new MockHttpServletResponse();\n        response.setOutputStreamAccessAllowed(true);\n        controller = new ContactController();\n        adapter = new AnnotationMethodHandlerAdapter();\n    }\n\n    @Test\n    public void getTest() throws Exception {\n        request.setRequestURI(\"/index\");\n        request.setMethod(\"GET\");\n        adapter.handle(request, response, controller);\n        System.out.println(response.getContentAsString());\n    }\n}\n</code></pre>\n\n<p>root-context.xml </p>\n\n<pre><code>  &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n        xmlns:aop=\"http://www.springframework.org/schema/aop\"\n         xmlns:context=\"http://www.springframework.org/schema/context\" \n         xmlns:jee=\"http://www.springframework.org/schema/jee\" \n         xmlns:lang=\"http://www.springframework.org/schema/lang\" \n         xmlns:p=\"http://www.springframework.org/schema/p\" \n         xmlns:tx=\"http://www.springframework.org/schema/tx\" \n         xmlns:util=\"http://www.springframework.org/schema/util\" \n         xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd\"&gt;\n\n\n&lt;context:annotation-config/&gt;\n\n        &lt;context:component-scan base-package=\"/src/main/java/com.doilidova.spr.dao\"/&gt;\n        &lt;context:component-scan base-package=\"/src/main/java/com.doilidova.spr.service\"/&gt;\n        &lt;!-- Файл с настройками ресурсов для работы с данными (Data Access Resources) --&gt;\n    &lt;import resource=\"data.xml\"/&gt;\n    &lt;!-- Файл с настройками безопасности --&gt;\n    &lt;import resource=\"security.xml\"/&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>well, i had the same issue with this <a href=\"http://stackoverflow.com/questions/6275130/junit-how-to-access-spring-configuration-as-spring-has-intended\">topic</a> , according to advice i created following direcrory structure: </p>\n\n<pre><code>&lt;proj&gt;\n   src\n      test\n         WEB-INF\n             spring\n                appServlet\n                     controllers.xml\n                     servlet-context.xml\n                  root-context.xml\n                  data.xml\n                  security.xml\n</code></pre>\n\n<p>now i have such exceptions:</p>\n\n<pre><code>INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a614a4: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,transactionManager,messageSource,propertyConfigurer,dataSource,sessionFactory]; root of factory hierarchy\nERROR: org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@cd564c] to prepare test instance [com.doilidova.spr.ContactServiceTest@dcc20c]\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [WEB-INF/spring/data.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/spring/data.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:96)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:44)\n    at org.springframework.test.context.TestContext.buildApplicationContext(TestContext.java:198)\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:233)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:126)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:85)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:231)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:95)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:139)\n    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61)\n    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:54)\n    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\n    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\n    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:52)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/spring/data.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)\n    ... 32 more\nCaused by: org.hibernate.HibernateException: Unable to instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]\n    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:110)\n    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructDefaultTuplizer(EntityTuplizerFactory.java:135)\n    at org.hibernate.tuple.entity.EntityEntityModeToTuplizerMapping.&lt;init&gt;(EntityEntityModeToTuplizerMapping.java:80)\n    at org.hibernate.tuple.entity.EntityMetamodel.&lt;init&gt;(EntityMetamodel.java:323)\n    at org.hibernate.persister.entity.AbstractEntityPersister.&lt;init&gt;(AbstractEntityPersister.java:456)\n    at org.hibernate.persister.entity.SingleTableEntityPersister.&lt;init&gt;(SingleTableEntityPersister.java:131)\n    at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:84)\n    at org.hibernate.impl.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:267)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1341)\n    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:859)\n    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)\n    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)\n    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)\n    ... 39 more\nCaused by: java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:107)\n    ... 53 more\nCaused by: java.lang.NoClassDefFoundError: javassist/util/proxy/MethodFilter\n    at org.hibernate.bytecode.javassist.BytecodeProviderImpl.getProxyFactoryFactory(BytecodeProviderImpl.java:49)\n    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactoryInternal(PojoEntityTuplizer.java:208)\n    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:186)\n    at org.hibernate.tuple.entity.AbstractEntityTuplizer.&lt;init&gt;(AbstractEntityTuplizer.java:151)\n    at org.hibernate.tuple.entity.PojoEntityTuplizer.&lt;init&gt;(PojoEntityTuplizer.java:78)\n    ... 58 more\nCaused by: java.lang.ClassNotFoundException: javassist.util.proxy.MethodFilter\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\nat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    ... 63 more\njava.lang.NoSuchMethodError: org.junit.runner.notification.RunNotifier.testAborted(Lorg/junit/runner/Description;Ljava/lang/Throwable;)V\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:146)\n    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61)\n    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:54)\n    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\n    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\n    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:52)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n</code></pre>\n\n<p>so where is the problem?</p>\n"},{"tags":["jquery","json","spring","rest","jersey"],"answer_count":0,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":27,"score":4,"question_id":13273536,"title":"Issue in REST with Jersey while array of JSON submit for POST using Jquery,","body":"<p>I have a Jersey implemenation of REST which provides a API from Tomcat (Server1)</p>\n\n<pre><code>@POST\n@Consumes({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\n@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })\npublic Users create(Users users) {\n    return dao.create(users);\n}\n</code></pre>\n\n<p>and requested is posted from a jquery client from Apache (Server2)</p>\n\n<pre><code>$.ajax({\n    type: 'POST',\n    contentType: 'application/json',\n    url: rootURL,\n    dataType: \"json\",\n    data: formToJSON(),\n    success: function(data, textStatus, jqXHR){\n        alert('user created successfully');\n\n    },\n    error: function(jqXHR, textStatus, errorThrown){\n        alert('user error: ' + textStatus);\n    }\n});\n</code></pre>\n\n<p>This jquery is actually submitting the request to server, but server/API was not able to recognize this request.Also all other request like @Formparam /@Header etc with POST /GET is working</p>\n\n<p>if I use the same thing using REST client it was working, Can anybody please help me to\nsort this issue for POST with type of request Object.</p>\n"},{"tags":["spring","properties"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":3183,"score":0,"question_id":8270290,"title":"Spring application context external properties?","body":"<p>i have a Spring application and its working well so far. Now i want the properties file in an external config folder and not in the packed jar to change things without the need to repack. This is what i got:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n&lt;!-- &lt;property name=\"locations\" value=\"classpath:/springcontext.properties\"/&gt;  --&gt;\n&lt;property name=\"locations\" value =\"config/springcontext.properties\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>The outcommented one is working and the other one i dont get to work :/ Can someone help?</p>\n\n<p>Edit:\nThx 4 comments so far.</p>\n\n<p>Maybe my question wasnt clear enough :). I perform a Maven build and everything will be packaged and i want this folder to be NOT in the package nut next to the outcomming jar and in this folder i want the properties file. possible?</p>\n"},{"tags":["eclipse","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":20,"score":-1,"question_id":13260375,"title":"How to run Spring/Maven project from Eclipse on a web server?","body":"<p>I downloaded the repository from the book “Spring by Example” by David Winterfeldt\n(Version 1.2.1). Then I successfully ran Maven scripts using Eclipse plugin.</p>\n\n<p>The instruction from the book is: “Right click on project and select 'Run As'/'Run on Server'.” </p>\n\n<p>However, there is no option to  'Run As'/'Run on Server' neither in Eclipse Indigo nor in Spring Tool Suite</p>\n\n<p>Moreover, nether the war file nor war structure have been produced using maven scripts</p>\n"},{"tags":["spring","servlets","annotations","jetty","injection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13265545,"title":"using ReloadableResourceBundleMessageSource in annotations injection","body":"<p>i am using ReloadableResourceBundleMessageSource in my web project, and i inject the class to a servlet, the problem is that i want to inject the class using spring annotations and it does not work for me can any one help?\nmy cose is:</p>\n\n<p>my.xml</p>\n\n<pre><code>&lt;bean id=\"messageSource\" class=\"org.springframework.context.support.ReloadableResourceBundleMessageSource\"&gt;\n    &lt;property name=\"basenames\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;classpath:myList&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"cacheSeconds\" value=\"1\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>myServletClass.java</p>\n\n<pre><code>protected void doGet(HttpServletRequest req, HttpServletResponse resp)\n        throws ServletException, IOException {\n\nApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"my.xml\");\nString message = applicationContext.getMessage(message, null, \"Default \n\", null);\n\n}\n</code></pre>\n\n<p>how do i inject the ReloadableResourceBundleMessageSource using annotations , i am using a jetty server</p>\n\n<p>thanks</p>\n"},{"tags":["eclipse","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":21,"score":-1,"question_id":13268953,"title":"My Eclipse (SpringToolSuite) restarts","body":"<p>I got a problem in my Eclipse (STS).\nWhen I press the \"3\" button on key board, Eclipse (springtoolsuite) restarts, Every thing was working fine till yesterday. Has any one face this kind of problem?</p>\n\n<p>I am using Ubutu 12.04 and SprintToolSuite 2.9.2</p>\n\n<p>PS: I Changed my keyboard but problem is still there,</p>\n"},{"tags":["spring","static-members","applicationcontext","restlet-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13269880,"title":"Spring Application Context: How do you set a constructor argument of a class to a class static member variable?","body":"<p>In the application context XML file, how do you set a constructor argument to a static class member?</p>\n\n<p>For example, I am using Restlet and one of Restlet's classes called ChallengeAuthenticator receives a challenge scheme member variable.</p>\n\n<pre><code>// Normal Initialization\nChallengeAuthenticator challengeAuthenticator = new ChallengeAuthenticator(\n                null, ChallengeScheme.HTTP_BASIC, \"WSRealm\");\n</code></pre>\n\n<p>I want to have this in the application context if possible. To something like this:</p>\n\n<pre><code>&lt;bean id=\"challengeAuthenticator\" class=\"org.restlet.security.ChallengeAuthenticator\"&gt;\n  &lt;!-- Not meant to be String for value just trying to make it easier to reader to interpret my question --&gt;  \n  &lt;constructor-arg value=\"ChallengeScheme.HTTP_BASIC\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13269756,"title":"RejectedExecutionException while submitting task to ThreadPoolTaskExecutor","body":"<p>spring <strong>ThreadPoolTaskExecutor</strong> for concurrent processing in our application. After successfully completing all the jobs the showdown methods  is called. This implementation is working fine, issue come when the junit is executed.</p>\n\n<p>I have written multiple test cases for this class using <strong>SpringJUnit4ClassRunner</strong>. The first test case will run perfectly and shutdown the ThreadPoolTaskExecutor. But when the second test case is trying to submit the task the below exception is raised</p>\n\n<pre><code>org.springframework.core.task.TaskRejectedException: Executor [java.util.concurrent.ThreadPoolExecutor@16cefa8] did not accept task: com.sample.SampleJob@ea3cdf\n    ....\naused by: java.util.concurrent.RejectedExecutionException\n    at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:1768)\n    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:767)\n</code></pre>\n\n<p>Based on my analyis the exception is thrown because i am trying to submit the task to ThreadPoolExecutor when it is shutdown. </p>\n\n<p>Can any one help me in resolving this issue?</p>\n"},{"tags":["spring","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":20,"score":3,"question_id":13268985,"title":"@ExceptionHandler in Spring","body":"<p>In my application I have configured an error page in web.xml. I need to override that for a specific controller based on a condition. Here when a condition becomes true I need to redirect to a specific error page otherwise normal error page should be rendered.\nHere is the code. Please help me.</p>\n\n<pre><code>@Controller\npublic class Test{\n\n @ExceptionHandler(Exception.class)\n public ModelAndView generateException(HttpServletRequest httpServletRequest){\n  if(condition) {\n   return new ModelAndView(\"myError.jsp\");\n  } else {\n   //should execute default error page.\n  }\n }\n}\n</code></pre>\n"},{"tags":["spring","grails","web-applications","applicationcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12841883,"title":"Setting parent application context in a grails application","body":"<p>I have a Spring application and I want to run in it an embedded Jetty instance where I want to deploy a Grails application.</p>\n\n<p>I need the Grails application to have access to the application context of the Spring application.</p>\n\n<p>I am deploying the Grails application as following:</p>\n\n<pre><code>    Server webServer = new Server(8080);\n    WebAppContext webapp = new WebAppContext();\n    webapp.setContextPath(\"/\");\n    webapp.setWar(\"MyGrailsApp.war\");\n    webServer.setHandler(webapp);\n    webServer.start();\n</code></pre>\n\n<p>To get the Grails application access to Spring application context I further added these lines before calling <em>webServer.start()</em>:</p>\n\n<pre><code>    ParentAwareContextLoaderListener contextLoaderListener = new ParentAwareContextLoaderListener();\n    //appContext is context of my Spring application\n    contextLoaderListener.setApplicationContext(appContext);\n    webapp.addEventListener(contextLoaderListener);\n</code></pre>\n\n<p>ParentAwareContextLoaderListener is a simple class like this:</p>\n\n<pre><code>public class ParentAwareContextLoaderListener extends ContextLoaderListener implements ApplicationContextAware {\nprivate ApplicationContext applicationContext;\n\n\n@Override\nprotected ApplicationContext loadParentContext(final ServletContext servletContext) {\n    return applicationContext;\n}\n\n@Override\npublic void setApplicationContext(final ApplicationContext applicationContext) throws BeansException {\n    this.applicationContext = applicationContext;\n}\n}\n</code></pre>\n\n<p>I further removed the original ContextLoaderListener from the Grails application web.xml. While this approach worked for one other non grails application, it is for some reason not working with Grails. I get this exception:</p>\n\n<pre><code>20138 [main] ERROR org.springframework.web.context.ContextLoader ContextLoader - Context initialization failed \njava.lang.IllegalArgumentException: ConfigurableWebApplicationContext environment must be of type ConfigurableWebEnvironmentObject of class [org.springframework.core.env.StandardEnvironment] must be an instance of interface org.springframework.web.context.ConfigurableWebEnvironment\n    at org.springframework.util.Assert.isInstanceOf(Assert.java:337)\n    at org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.getEnvironment(AbstractRefreshableWebApplicationContext.java:147)\n    at org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.getEnvironment(AbstractRefreshableWebApplicationContext.java:1)\n    at org.springframework.context.support.AbstractRefreshableConfigApplicationContext.resolvePath(AbstractRefreshableConfigApplicationContext.java:122)\n    at org.springframework.context.support.AbstractRefreshableConfigApplicationContext.setConfigLocations(AbstractRefreshableConfigApplicationContext.java:81)\n    at org.springframework.context.support.AbstractRefreshableConfigApplicationContext.setConfigLocation(AbstractRefreshableConfigApplicationContext.java:69)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:380)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)\n</code></pre>\n\n<p>Any idea how can this problem be solved? Thank you for any help</p>\n"},{"tags":["spring","batch","spring-batch"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13257971,"title":"Spring batch repository logging","body":"<p>Can the sql calls made by spring batch to store job repository information be logged? i am using oracle database and i am unable to find a way to log those calls.</p>\n"},{"tags":["java","spring","jpa","eclipselink"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13228854,"title":"TransactionRequiredException thrown by EclipseLink 2.4.1 when using Spring 3.1.3","body":"<p>i'm trying to setup the following components:</p>\n\n<ul>\n<li>EclipseLink 2.4.1</li>\n<li>Spring 3.1.3</li>\n<li>Glassfish 3.1.2</li>\n<li>Derby Embedded Database</li>\n</ul>\n\n<p>the stuff is running so far. but as soon as i want to persist something into my JPA context, a <code>TransactionRequiredException</code> is thrown:</p>\n\n<pre><code>javax.persistence.TransactionRequiredException: \nException Description: No transaction is currently active\n    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionWrapper.throwCheckTransactionFailedException(EntityTransactionWrapper.java:113)\n    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionWrapper.checkForTransaction(EntityTransactionWrapper.java:50)\n    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.checkForTransaction(EntityManagerImpl.java:1776)\n    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.flush(EntityManagerImpl.java:780)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)\n    at $Proxy439.flush(Unknown Source)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)\n    at $Proxy439.flush(Unknown Source)\n    at backend.dao.StoredObjectDAO.save(StoredObjectDAO.java:39)\n    at backend.service.StorageService.setObjectForKey(StorageService.java:35)\n    at backend.controller.StoredObjectController.setObjectForKey(StoredObjectController.java:40)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:604)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:565)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)\n    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)\n    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)\n    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)\n    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)\n    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)\n    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)\n    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)\n    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)\n    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)\n    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)\n    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)\n    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)\n    at java.lang.Thread.run(Thread.java:680)\n</code></pre>\n\n<p>the transaction manager is set up as described in various tutorials and even eclipse recognizes the aspectj weaving by indicating the pointcuts with the regarding icons in beside the linenumber pane.\nsince i'm using the <code>@Transactional</code> annotation, i properly set <code>&lt;tx:annotaion-driven /&gt;</code> to \"on\".</p>\n\n<p>but still, i keep getting the same exception. does anybody know if there is a particular setting needed when using this constelation of libraries?\nplease find all necessary files attached below.</p>\n\n<p>thanks,\nmanu</p>\n\n<h2>applicationContext-jpa.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n\n    &lt;context:load-time-weaver /&gt;\n    &lt;context:annotation-config /&gt;\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n\n    &lt;import resource=\"applicationContext-dataSource.xml\" /&gt;\n\n    &lt;bean id=\"jpaAdapter\" class=\"org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter\"&gt;\n        &lt;property name=\"databasePlatform\" value=\"org.eclipse.persistence.platform.database.DerbyPlatform\" /&gt;\n        &lt;property name=\"showSql\" value=\"true\" /&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"jpaDialect\" class=\"org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect\" /&gt;\n\n\n\n    &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"jpaVendorAdapter\" ref=\"jpaAdapter\" /&gt;\n        &lt;property name=\"persistenceXmlLocation\" value=\"classpath:/META-INF/persistence.xml\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\" /&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"jpaDialect\" ref=\"jpaDialect\" /&gt;\n    &lt;/bean&gt;\n\n\n\n    &lt;bean class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\"/&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<h2>applicationContext-dataSource.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd\n        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n\n\n    &lt;jee:jndi-lookup id=\"dataSource\" jndi-name=\"jdbc/backend\" /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<h2>persistence.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n    &lt;persistence-unit name=\"backend\" transaction-type=\"JTA\"&gt;\n        &lt;!-- \n            jta-data-source is only used for the IDE. Spring/Runtime uses the\n            data source from applicationContext-dataSource.\n        --&gt;\n        &lt;jta-data-source&gt;jdbc/backend&lt;/jta-data-source&gt;\n\n        &lt;class&gt;backend.model.StoredObject&lt;/class&gt;\n\n        &lt;exclude-unlisted-classes&gt;true&lt;/exclude-unlisted-classes&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<h2>StoredObjectDAO.java</h2>\n\n<pre><code>@Repository\n@Transactional\npublic class StoredObjectDAO implements IStoredObjectDAO {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Override\n    @Transactional(readOnly = true)\n    public Collection&lt;StoredObject&gt; listAll() {\n        TypedQuery&lt;StoredObject&gt; query = entityManager.createQuery(\"select s from StoredObject s\", StoredObject.class);\n        Collection&lt;StoredObject&gt; results = query.getResultList();\n        return results;\n    }\n\n    @Override\n    public void save(StoredObject storedObject) {\n        entityManager.persist(storedObject);\n        entityManager.flush(); // &lt;---- throws Exception\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","annotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12640265,"title":"@RequestMapping with 2 params in render method","body":"<p>I'm trying to manage 2 actions in the same controller, and everything's ok! The only thing is the doRender method. \nI'm trying to use the same render method for both actions, like this:</p>\n\n<pre><code>private static final String ACTION_ALTA_TIPO_FACTURA = \"action=\" + ServletContextKeys.SC_ALTA_TIPO_FACTURA;\nprivate static final String ACTION_BAJA_TIPO_FACTURA = \"action=\" + ServletContextKeys.SC_BAJA_TIPO_FACTURA;\n\n@RequestMapping(params = {ACTION_BAJA_TIPO_FACTURA,ACTION_ALTA_TIPO_FACTURA})\npublic final String doRender(@ModelAttribute(value = \"Factura\") Factura justfactura, Errors errors, RenderRequest renderrequest) {\n        ...\n}\n</code></pre>\n\n<p>But apparently this's not working. This's what the server log says:</p>\n\n<pre><code>[#|2012-09-28T11:54:05.723+0000|SEVERE|sun-appserver2.1|debug.com.sun.portal.portletcontainer.impl|_ThreadID=21;_ThreadName=httpSSLWorkerThread-8080-0;sifo3economicoweb|SifoIIIweb|SifoIIIweb_WAR_sifo3economicoweb_INSTANCE_fu7M;org.springframework.web.portlet.NoHandlerFoundException: No matching handler method found for portlet request: mode 'view', phase 'RENDER_PHASE', parameters map['action' -&gt; array&lt;String&gt;['altaFactura'], 'altaFactura_tabs' -&gt; array&lt;String&gt;['factura']];_RequestID=7ffe667a-23c0-4599-b1f6-0a53d11a5cb7;|PSPL_PCCSPCPCI0001 : Exception thrown from EntityID: sifo3economicoweb|SifoIIIweb|SifoIIIweb_WAR_sifo3economicoweb_INSTANCE_fu7M, cause: org.springframework.web.portlet.NoHandlerFoundException: No matching handler method found for portlet request: mode 'view', phase 'RENDER_PHASE', parameters map['action' -&gt; array&lt;String&gt;['altaFactura'], 'altaFactura_tabs' -&gt; array&lt;String&gt;['factura']]|#]\n</code></pre>\n\n<p>Any help, please??</p>\n"},{"tags":["oracle","spring","hibernate","spring-mvc","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13267920,"title":"spring security login not working with oracle","body":"<p>I am working on spring security login using jdbc-user-service. It is working on Mysql but not on oracle. I am using oracle 11 XE.</p>\n\n<p>The queries I have mentioned in  tag are correct because those return expected rows when I run those on oracle console.</p>\n\n<p>The datasource is :</p>\n\n<pre><code>&lt;bean id=\"dataSource\"\n    class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"${jdbc.driver}\" /&gt;\n    &lt;property name=\"url\" value=\"${datasource.url}\" /&gt;\n    &lt;property name=\"username\" value=\"${jdbc.user}\" /&gt;\n    &lt;property name=\"password\" value=\"${jdbc.password}\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>in sessionFactory bean hibernate dialect for oracle is given.</p>\n\n<pre><code>&lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;\n</code></pre>\n\n<p>Same code works for mysql and not on oracle. The application control is redirected to login page which I have set in spring security file. This means it is getting username &amp; password correctly.</p>\n\n<pre><code>&lt;form-login login-page=\"/landing\" default-target-url=\"/home\"\n        authentication-failure-url=\"/landing?msg=cw\" /&gt;\n</code></pre>\n\n<p>The authentication provider code in spring security xml is :</p>\n\n<pre><code>&lt;authentication-manager&gt;\n    &lt;authentication-provider&gt;\n    &lt;jdbc-user-service data-source-ref=\"dataSource\"\n            users-by-username-query=\" \n    select USERNAME as username, PASSWORD as password,'true' as enabled from \n    users where USERNAME=?\"\n\n            authorities-by-username-query=\" select u.USERNAME \n    as username, r.ROLE as authority from users u, roles r, user_roles \n    ur where u.USER_ID = ur.USER_ID and ur.ROLE_ID = r.id and u.USER_ID = (SELECT \n    USER_ID from users where USERNAME = ?)\" /&gt;\n\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p>Is there anything need to be configured in order to use oracle in spring security ?</p>\n\n<p>UPDATE : I set spring security debug and this is what is printing after I try to login.</p>\n\n<pre><code>INFO : Spring Security Debugger - \n\n************************************************************\n\nRequest received for '/j_spring_security_check':\n\norg.apache.catalina.connector.RequestFacade@7262b6\n\nservletPath:/j_spring_security_check\npathInfo:null\n\n  Security filter chain: [\n  ConcurrentSessionFilter\n  SecurityContextPersistenceFilter\n  LogoutFilter\n  UsernamePasswordAuthenticationFilter\n  BasicAuthenticationFilter\n  RequestCacheAwareFilter\n  SecurityContextHolderAwareRequestFilter\n  AnonymousAuthenticationFilter\n  SessionManagementFilter\n  ExceptionTranslationFilter\n  FilterSecurityInterceptor\n]\n\n\n************************************************************\n\n\nINFO : Spring Security Debugger - \n\n************************************************************\n\nRequest received for '/landing?msg=cw':\n\norg.apache.catalina.connector.RequestFacade@bf1a4a\n\nservletPath:/landing\npathInfo:null\n\nSecurity filter chain: [\nConcurrentSessionFilter\nSecurityContextPersistenceFilter\nLogoutFilter\nUsernamePasswordAuthenticationFilter\nBasicAuthenticationFilter\nRequestCacheAwareFilter\nSecurityContextHolderAwareRequestFilter\nAnonymousAuthenticationFilter\nSessionManagementFilter\nExceptionTranslationFilter\nFilterSecurityInterceptor\n]\n\n\n************************************************************\n</code></pre>\n"},{"tags":["java","spring","filter","spring-security","servlet-filters"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13266413,"title":"Adding Customized filter in spring security 3.0","body":"<p>I am trying to add another filter named captcha verification filter along with spring security's authentication filter.\nI am getting this error. What I am missing ?\nInitialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'java.util.LinkedHashMap' to required type 'java.util.Map' for property 'filterChainMap'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [com.asu.edu.base.vo.CaptchaFilterVO] to required type [javax.servlet.Filter] for property 'filterChainMap[/**][3]': no matching editors or conversion strategy found</p>\n\n<p>My .java file</p>\n\n<pre><code>public class CaptchaFilterVO {\n    @Autowired\n    private ReCaptcha reCaptcha = null;\n\n    public void doFilterInternal(HttpServletRequest req, HttpServletResponse res,\n            FilterChain chain) throws IOException, ServletException {       \n        String recaptcha_response = req.getParameter(\"recaptcha_response_field\");\n        String recaptcha_challenge = req.getParameter(\"recaptcha_challenge_field\");\n        String remoteAddress = req.getRemoteAddr();\n        ReCaptchaResponse reCaptchaResponse = this.reCaptcha.checkAnswer(\n                remoteAddress, recaptcha_challenge, recaptcha_response);\n        if (!reCaptchaResponse.isValid()) {\n\n            System.out.println(\"Captcha worong. Please try again.\");        \n\n        } \n        else \n        {\n            System.out.println(\"Captcha correct. No need to try again.\");\n        }\n        chain.doFilter(req, res);\n    }\n}\n</code></pre>\n\n<p>springsecurity.xml</p>\n\n<pre><code>     &lt;http auto-config=\"true\"&gt;\n        &lt;!-- intercept-url pattern=\"/welcome*\" access=\"ROLE_DEPARTMENT_MGR,ROLE_REGULAR_EMP,ROLE_GUEST_USR,ROLE_CORPORATE_MGR\" /&gt;\n        &lt;intercept-url pattern=\"/admin*\" access=\"ROLE_ADMIN\" /--&gt;\n        &lt;intercept-url pattern=\"/login\" filters=\"none\" /&gt;\n        &lt;intercept-url pattern=\"/resources*\" filters=\"none\" /&gt;\n        &lt;intercept-url pattern=\"/register\" filters=\"none\" /&gt;\n        &lt;intercept-url pattern=\"/logout\" filters=\"none\" /&gt;\n        &lt;intercept-url pattern=\"/loginfailed\" filters=\"none\" /&gt;\n        &lt;intercept-url pattern=\"/admin*\" access=\"ROLE_ADMIN\" /&gt;\n        &lt;intercept-url pattern=\"/Dashboard*\" access=\"ROLE_DEPARTMENT_MGR,ROLE_REGULAR_EMP,ROLE_CORPORATE_MGR\" /&gt;\n        &lt;intercept-url pattern=\"/*\" access=\"IS_AUTHENTICATED_FULLY\"/&gt;\n        &lt;form-login login-page=\"/login\" default-target-url=\"/\"\n            authentication-failure-url=\"/loginfailed\"   /&gt;\n        &lt;logout logout-success-url=\"/logout\" /&gt;\n        &lt;custom-filter ref=\"captchaVerifierFilter\" after=\"FORM_LOGIN_FILTER\"/&gt;\n\n&lt;/http&gt;     \n &lt;beans:bean id=\"captchaVerifierFilter\" class=\"com.asu.edu.base.vo.CaptchaFilterVO\"/&gt;\n &lt;beans:bean id=\"springSecurityFilterChain\" class=\"org.springframework.web.filter.DelegatingFilterProxy\"/&gt;\n&lt;beans:bean id=\"myfilterChainProxy\" class=\"org.springframework.security.web.FilterChainProxy\"&gt;\n    &lt;filter-chain-map path-type=\"ant\"&gt;     \n         &lt;filter-chain pattern=\"/*\" filters=\"springSecurityFilterChain,captchaVerifierFilter\"/&gt;\n    &lt;/filter-chain-map&gt;\n &lt;/beans:bean&gt;\n</code></pre>\n\n<p>EDIT: public class CaptchaFilterVO extends OncePerRequestFilter implements javax.servlet.Filter\nNow I have extended OncePerRequestFilter class but now I am facing a crash. Any help please.\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.http.HttpRequest]: Specified class is an interface\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)\n    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)</p>\n"},{"tags":["java","spring","jpa","delete","entity"],"answer_count":6,"favorite_count":2,"up_vote_count":13,"down_vote_count":0,"view_count":11449,"score":13,"question_id":2428706,"title":"JPA thinks I'm deleting a detached object","body":"<p>So, I've got a DAO that I used to load and save my domain objects using JPA. I finally managed to get the transaction stuff working (with a bunch of help from the folks here...), now I've got another issue.</p>\n\n<p>In my test case, I call my DAO to load a domain object with a given id, check that it got loaded and then call the same DAO to delete the object I just loaded. When I do that I get the following:</p>\n\n<pre>\njava.lang.IllegalArgumentException: Removing a detached instance mil.navy.ndms.conops.common.model.impl.jpa.Group#10\n at org.hibernate.ejb.event.EJB3DeleteEventListener.performDetachedEntityDeletionCheck(EJB3DeleteEventListener.java:45)\n at org.hibernate.event.def.DefaultDeleteEventListener.onDelete(DefaultDeleteEventListener.java:108)\n at org.hibernate.event.def.DefaultDeleteEventListener.onDelete(DefaultDeleteEventListener.java:74)\n at org.hibernate.impl.SessionImpl.fireDelete(SessionImpl.java:794)\n at org.hibernate.impl.SessionImpl.delete(SessionImpl.java:772)\n at org.hibernate.ejb.AbstractEntityManagerImpl.remove(AbstractEntityManagerImpl.java:253)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n at java.lang.reflect.Method.invoke(Method.java:600)\n at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:180)\n at $Proxy27.remove(Unknown Source)\n at mil.navy.ndms.conops.common.dao.impl.jpa.GroupDao.delete(GroupDao.java:499)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n at java.lang.reflect.Method.invoke(Method.java:600)\n at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:304)\n at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\n at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\n at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\n at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\n at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\n at $Proxy28.delete(Unknown Source)\n at mil.navy.ndms.conops.common.dao.impl.jpa.GroupDaoTest.testGroupDaoSave(GroupDaoTest.java:89)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n at java.lang.reflect.Method.invoke(Method.java:600)\n at junit.framework.TestCase.runTest(TestCase.java:164)\n at junit.framework.TestCase.runBare(TestCase.java:130)\n at junit.framework.TestResult$1.protect(TestResult.java:106)\n at junit.framework.TestResult.runProtected(TestResult.java:124)\n at junit.framework.TestResult.run(TestResult.java:109)\n at junit.framework.TestCase.run(TestCase.java:120)\n at junit.framework.TestSuite.runTest(TestSuite.java:230)\n at junit.framework.TestSuite.run(TestSuite.java:225)\n at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)\n at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)\n at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)\n at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)\n</pre>\n\n<p>Now given that I'm using the same DAO instance, and I've not changed EntityManagers (unless Spring does so without letting me know), how can this be a detached object?</p>\n\n<p>My DAO code looks like this:</p>\n\n<pre><code>\npublic class GenericJPADao implements IWebDao, IDao, IDaoUtil\n{\n    private static Logger logger = Logger.getLogger (GenericJPADao.class);\n\n    protected Class voClass;\n\n    @PersistenceContext(unitName = \"CONOPS_PU\")\n    protected EntityManagerFactory emf;\n\n    @PersistenceContext(unitName = \"CONOPS_PU\")\n    protected EntityManager em;\n\n    public GenericJPADao()\n    {\n        super ( );\n\n        ParameterizedType genericSuperclass = \n                        (ParameterizedType) getClass ( ).getGenericSuperclass ( );\n        this.voClass = (Class) genericSuperclass.getActualTypeArguments ( )[1];\n    }\n\n\n    ...\n\n\n    public void delete (INTFC modelObj, EntityManager em)\n    {\n        em.remove (modelObj);\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    public INTFC findById (Long id)\n    {\n        return ((INTFC) em.find (voClass, id));\n    }\n\n}\n</code></pre>\n\n<p>The test case code looks like:</p>\n\n<pre><code>\n    IGroup loadedGroup = dao.findById (group.getId ( ));\n    assertNotNull (loadedGroup);\n    assertEquals (group.getId ( ), loadedGroup.getId ( ));\n\n    dao.delete (loadedGroup); // - This generates the above exception\n\n    loadedGroup = dao.findById (group.getId ( ));\n    assertNull(loadedGroup);\n</code></pre>\n\n<p>Can anyone tell me what I'm doing wrong here? </p>\n\n<p>Thanks</p>\n"},{"tags":["web-services","spring","spring-ws"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13267863,"title":"Spring WS - step by step in STS (from WSDL)","body":"<p>I am trying to create a new Spring webservice project in STS. I checked this link<br>\n<a href=\"http://static.springsource.org/spring-ws/site/reference/html/tutorial.html\" rel=\"nofollow\">http://static.springsource.org/spring-ws/site/reference/html/tutorial.html</a><br>\nBut this doesn't tell the steps very clearly. Cany anyone please share any useful link to create a spring ws project (step-by-step)?</p>\n"},{"tags":["spring","mvc","apache-camel"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":19,"score":2,"question_id":13265703,"title":"Camel producerTemplate is not injected in spring MVC","body":"<p>I'm using Spring MVC and Camel in my project, but encountering an issue that the producerTemplate is not able to be Autowired. Please check details below, </p>\n\n<p>File web.xml:</p>\n\n<pre><code>&lt;context-param&gt;\n &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n   &lt;param-value&gt;/WEB-INF/dispatcher-servlet.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n\n<p>File ispatcher-servlet.xml  </p>\n\n<pre><code>&lt;import resource=\"camel-config.xml\"/&gt;\n</code></pre>\n\n<p>File camel-config.xml, define camelContext</p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.myproject.camel.routes\"/&gt;\n&lt;camelContext xmlns=\"http://camel.apache.org/schema/spring\" id=\"myproject.camel\"&gt;\n     &lt;contextScan/&gt;\n &lt;template id=\"producerTemplate\"/&gt;\n&lt;/camelContext&gt;\n</code></pre>\n\n<p>And here is my JAVA class:</p>\n\n<pre><code>package com.myproject.connector.camel;\npublic class CamelConnectorImp{\n    @Autowired\n    private ProducerTemplate producerTemplate; //This is null after starting\n    producerTemplate.requestBodyAndHeaders(serviceEndpoint,request, headers);\n...\n}\n</code></pre>\n\n<p>Can someone point out what I'm doing wrong please?</p>\n"},{"tags":["javascript","spring","hibernate","extjs"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13193361,"title":"Cascading Combobox in extjs","body":"<p>I want to do cascading combobox in extjs. I have to comboboxes  </p>\n\n<p><strong>Course combobox</strong>  </p>\n\n<pre><code>{ \n    xtype : 'combobox',  \n    emptyText : 'Course',  \n    id:'combo-course',  \n    displayField : 'name',  \n    valueField : 'id',  \n    store:coursestore,  \n    forceSelection: true,  \n    triggerAction:'all',  \n    queryMode: 'remote',  \n    listeners: {  \n        'select': {  \n            fn:function(combo, value) {  \n                var comboModule = Ext.getCmp('combo-module');  \n                comboModule .setDisabled(true);\n        comboModule .clearValue('');\n        comboModule .getStore().removeAll();\n        comboModule .getStore().load({\n        params: {courseId: combo.getValue()}\n         });\n                comboModule .setDisabled(false);  \n            }  \n        }  \n    }  \n}\n</code></pre>\n\n<p><strong>Course-Module:</strong></p>\n\n<pre><code>{\n    xtype : 'combobox',  \n    emptyText : 'Module',  \n    id:'combo-module',  \n    displayField : 'name',  \n    valueField : 'id',  \n    disabled:true,  \n    remoteFilter:true,  \n    store:coursemodulestore,  \n    forceSelection: true,  \n    queryMode: 'remote',  \n    triggerAction:'all'\n}\n</code></pre>\n\n<p><strong>Rest Service</strong></p>\n\n<pre><code>    @Path(\"/coursemodule/{courseId}\")\n    public List&lt;CourseModule&gt; getAllCourseModules(@PathParam(\"courseId\")String courseId ) {\n        try {           \n            return courseObj.getModulesForCourse(courseId);\n                } catch (HibernateException e) {\n            logger.debug(e.getMessage());\n        }\n        return null;\n    }\n</code></pre>\n\n<p>When I am running the application and select the first combobox it shows the right values in second combobox in the first time only;<br>\nBut when I am selecting the combobox the second time its not displaying values in second combobox.</p>\n"},{"tags":["java","spring","transactions","try-catch-finally"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13267125,"title":"How is exception handled in transactional context with finally block?","body":"<p>If i have transactional method like the one below, when is the finally block executed in case of transaction commit and rollback? For example if \"persist some entity in database with hibernate\" throws some hibernate exception which is true?</p>\n\n<p>1) transaction rollback\n2) finally block is executed</p>\n\n<p>or </p>\n\n<p>1) finally block is executed\n2) transaction rollback</p>\n\n<pre><code>public void someTransactionalPersist(...) {\n     try {\n     // persist some entity in database with hibernate\n     } finally {\n        // do something \n     }\n}\n</code></pre>\n"},{"tags":["java","spring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13263518,"title":"Disabling @Scheduled methods/beans in Spring","body":"<p>In my application I have 2 beans which have methods annotated with <code>@Scheduled</code> annotation. Sometimes I need to schedule both the methods, and sometimes I need to schedule either one of them, based on the input arguments to the application. How can I disable the @Scheduled method after it has been loaded? I am using Spring 3.1 .</p>\n"},{"tags":["java","spring","annotations"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13267145,"title":"What is the best way of extending spring application context?","body":"<p>I need to extend spring applicatioContext xml file with new beans definitions and then add references to them to list, which is a property of one bean:\nBasic applicationContext xml file:   </p>\n\n<pre><code>&lt;bean id=\"myBean\" class=\"com.example.MyBean\"&gt;\n    &lt;property name=\"providers\"&gt; \n        &lt;list&gt;\n            &lt;ref bean=\"provider1\"&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n&lt;bean id=\"provider1\" class=\"com.example.Provider\"&gt;\n</code></pre>\n\n<p>Depends on instance of application I have different providers, so I need to add them to the list. Now I have the additional beans definitions in database and use <code>BeanFactoryPostProcessor</code> to add them to the context and then add references to them to the list of providers. But I use <code>@Transactional</code> annotation on <code>myBean</code> and automatic transaction management (<code>tx:annotation-driven</code>) and because of using <code>BeanFactoryPostProcessor</code> the transaction annotations are not processed. </p>\n\n<p>So I need another way to extend the application context and then the list of providers. What can I use? </p>\n\n<p>My idea is to have xml file which at the beginning is empty and then fill it by data from database and then import it somehow in applicationContext. Is it possible?</p>\n\n<p>Thanks for your help </p>\n"},{"tags":["spring","jsp","spring-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13248425,"title":"HTTP Status 404 - Servlet HelloWeb is not available","body":"<p>I have been learning spring mvc, but I get error page \"HTTP Status 404 - Servlet HelloWeb is not available\" when I started tomcat server and went to URL <code>http://localhost:8080/HelloWeb/student</code>. What's wrong with my code or structure, how fix this? Thanks for help!</p>\n\n<p># web.xml:<br /></p>\n\n<p>Spring MVC Form Handling</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;HelloWeb&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;\n        org.springframework.web.servlet.DispatcherServlet\n    &lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;HelloWeb&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p># HelloWeb-servlet.xml<br /></p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.tutorialspoint\" /&gt;\n\n&lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;property name=\"prefix\" value=\"/WEB-INF/jsp/\" /&gt;\n    &lt;property name=\"suffix\" value=\".jsp\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","websphere","websphere-8"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13266744,"title":"ShallowEtagHeaderFilter does not work under WAS8 app server","body":"<p><code>org.springframework.web.filter.ShallowEtagHeaderFilter</code> is unable to set response header under WAS8 application server stating \"<strong><em>WARNING: Cannot set header. Response already committed</em></strong>\". However this works fine when tested under Tomcat server. <code>ShallowEtagHeaderFilter</code> is indeed wrapping the original response to delay the writing of response body, but still the response comes as committed after the filter chain's execution. Is this a possible websphere bug? Any suggestion / workaround to overcome this issue is welcome.</p>\n"},{"tags":["java","spring","jsp","extjs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13266702,"title":"Getting EXTJS form code in jsp/html","body":"<p>I have a requirement where i want the Extjs code in jsp format. Im working on a project where i need to display the extjs form when i click on a pdf/word and excel plugins.</p>\n\n<p>Im getting the code with the help of innerHTML of the div tag, where the extjs form is rendering. But, the data is getting overridden i.e., the code is containing div tags which are getting overlapped and the fieldcontainer are treated as div tags and not able to display.</p>\n\n<p>Please, can anyone tell me how to display the extjs form in a word/excel or pdf.</p>\n\n<p>Any help will be appreciated.</p>\n\n<p>Thank you,\nPraveen</p>\n"},{"tags":["java","spring","design-patterns"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13266686,"title":"Making better use of the bean factory approach in Spring","body":"<p>Without so much actual programming experience in Spring, but with lots of practice in developing entity component architectures, I came to the conclusion that a lot of Spring developers are underusing the beautiful bean factory model. I've seen a lot of code examples where complex logic has been directly imperatively coded into service class methods, making the classes unusable in changing contexts and requirements.</p>\n\n<p>I came to the idea that instead of overloading the service with complex coupled logic, one can instead inject it using the ApplciationContext. I created an abstract Action class, which should be nothing more than an encapsulation of some simple logic. Each action has a single method called do or doAction, to which an arbitrary number of parameters can be passed. Also, every Action class has a reference to the next possible action - nextAction, which gets executed immediately after the current running action finishes. </p>\n\n<p>Setting it this way, it will then be very easy to inject complex action chains into service classes, as service classes themselves will be limited to simply be the Entities, i.e. the containers, knowing only which Action they should execute, when a method call occurs.</p>\n\n<p>What do you think about this approach? Am I in the right direction?</p>\n"},{"tags":["spring","spring-security","spring-aop"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13264630,"title":"Spring Security - Global Method Security using point-cut is not working","body":"<p>I want to apply method level security in my web app so that only authorized users can access those service layer methods.</p>\n\n<p>There are two ways to implement this.</p>\n\n<p>1) To annotate my service layer methods with <code>@Secured</code> annotation and in the dispatcher-servlet.xml file with configuration (<code>&lt;security:global-method-security secured-annotations=\"enabled\" /&gt;</code>).</p>\n\n<p>But this would take a lot of time in my case as there are so many service class and methods already created so finding the methods and annotate them will not be a good way.</p>\n\n<p>2) To define a point cut expression for methods level security that will automatically detect the methods having my custom annotation <code>@SecuredAdmin</code> in my services and secure them with the role <code>ROLE_ADMIN</code>.</p>\n\n<p>In my case the option 1) is working very fine when I tried to test. And there is no issue. But when I tried the option 2) with following configuration I am not able to start my application.</p>\n\n<pre><code>&lt;security:global-method-security&gt;\n        &lt;security:protect-pointcut access=\"ROLE_ADMIN\" expression=\"execution(@com.xxx.yyy.zzz.services.SecuredAdmin * *.*(..))\"/&gt;\n    &lt;/security:global-method-security&gt;\n</code></pre>\n\n<p>I am getting following exception when I tried to start my server.</p>\n\n<pre><code>java.lang.IllegalArgumentException: error annotation type patterns are only supported at Java 5 compliance level or above\n    org.aspectj.weaver.tools.PointcutParser.parsePointcutExpression(PointcutParser.java:302)\n    org.aspectj.weaver.tools.PointcutParser.parsePointcutExpression(PointcutParser.java:279)\n    org.springframework.security.config.method.ProtectPointcutPostProcessor.postProcessBeforeInitialization(ProtectPointcutPostProcessor.java:94)\n    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)\n    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)\n    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    org.springframework.context.support.AbstractApplicationContext.initMessageSource(AbstractApplicationContext.java:773)\n    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:452)\n    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)\n    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)\n    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)\n    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)\n    javax.servlet.GenericServlet.init(GenericServlet.java:160)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\n    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)\n    org.apache.catalina.ha.tcp.ReplicationValve.invoke(ReplicationValve.java:333)\n    org.apache.catalina.ha.session.JvmRouteBinderValve.invoke(JvmRouteBinderValve.java:219)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)\n    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)\n    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\n    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>I have tried every possible way to change the code compliance level to 1.6 in both pom files and eclipse project properties.</p>\n\n<p>I am using Spring-Security 3.0 and aspectj related libraries are as following.</p>\n\n<p>spring-aop-3.1.0.RELEASE.jar</p>\n\n<p>spring-aspects-3.1.0.RELEASE.jar</p>\n\n<p>aspectjrt-1.6.5.jar</p>\n\n<p>aspectjweaver-1.6.5.jar</p>\n\n<p>Please help me in this regards. Ask me if you require any further information.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring","ehcache"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":10,"score":1,"question_id":13266339,"title":"How to use local xsd for EhCache with Spring","body":"<p>We are facing one issue about EhCache and Spring, when we point XSD file in ehcache.xml to  <a href=\"http://ehcache.org/ehcache.xsd\" rel=\"nofollow\">http://ehcache.org/ehcache.xsd</a>, everythink is ok, our application can startup correct.\n    But our server can't access external website, so we changed XSD location to local as below, but the application can't startup with following exception (already copy ehcache.xsd to classes folder, same as ehcache.xml).\n    I have googled many solution, but it still can't be fixed. I need your help about this. Thank you very much.</p>\n\n<p>Spring: 3.1.0\nEhCache: 2.4.2\nServer: Tomcat 6.0\nJava  :  1.6</p>\n\n<p>Config:</p>\n\n<pre><code>&lt;ehcache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:noNamespaceSchemaLocation=\"ehcache.xsd\"\n    updateCheck=\"false\" monitoring=\"autodetect\" dynamicConfig=\"true\"&gt; \n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>2012-11-07 16:54:42,003 WARN [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - &lt;Ignored XML validation warning&gt;\norg.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'ehcache.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not &lt;xsd:schema&gt;.\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.warning(ErrorHandlerWrapper.java:96)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:380)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)\n    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2440)\n    ... more\n2012-11-07 16:54:42,007 ERROR [org.springframework.web.context.ContextLoader] - &lt;Context initialization failed&gt;\norg.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 3 in XML document from ServletContext resource [/WEB-INF/classes/META-INF/ehcache.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'ehcache'.\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    ... more\nCaused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'ehcache'.\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)\n\n    ...  more\n</code></pre>\n"},{"tags":["java","mysql","database","spring","jdbc"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":582,"score":1,"question_id":9809100,"title":"How to use same connection for two queries in Spring?","body":"<p>I have the following code in a Spring JdbcTemplate based dao - </p>\n\n<pre><code>getJdbcTemplate().update(\"Record Insert Query...\");\nint recordId = getJdbcTemplate().queryForInt(\"SELECT last_insert_id()\");\n</code></pre>\n\n<p>The problem is that my sometimes my update and queryForInt queries get executed using different connections from the connection pool.</p>\n\n<p>This results in an incorrect recordId being returned since MySql last_insert_id() is supposed to be called from the same connection that issued insert query.</p>\n\n<p>I have considered the SingleConnectionDataSource but do not want to use it since it degrades the application performance. I only want single connection for these two queries. Not for all the requests for all the services.</p>\n\n<p>So I have two questions:</p>\n\n<ol>\n<li>Can I manage the connection used by the template class?</li>\n<li>Does JdbcTemplate perform automatic transaction management? If i manually apply a transaction to my Dao method does that mean two transactions will be created per query?</li>\n</ol>\n\n<p>Hoping that you guys can shed some light on the topic.</p>\n\n<p><strong>Update</strong> - I tried nwinkler's approach and wrapped my service layer in a transaction. I was surprised to see the same bug pop up again after sometime. Digging into the Spring source code i found this -  </p>\n\n<pre><code>public &lt;T&gt; T execute(PreparedStatementCreator psc, PreparedStatementCallback&lt;T&gt; action) \nthrows DataAccessException {\n//Lots of code  \nConnection con = DataSourceUtils.getConnection(getDataSource()); \n//Lots of code \n}\n</code></pre>\n\n<p>So contrary to what I thought, there isn't necessarily one database connection per transaction, but one connection for each query executed.\nWhich brings me back to my problem. I want to execute two queries from the same connection. :-(</p>\n\n<p><strong>Update</strong> - </p>\n\n<pre><code>&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"\n        destroy-method=\"close\"&gt;\n        &lt;property name=\"driverClassName\" value=\"${db.driver}\" /&gt;\n        &lt;property name=\"url\" value=\"${db.jdbc.url}\" /&gt;\n        &lt;property name=\"username\" value=\"${db.user}\" /&gt;\n        &lt;property name=\"password\" value=\"${db.password}\" /&gt;\n        &lt;property name=\"maxActive\" value=\"${db.max.active}\" /&gt;\n        &lt;property name=\"initialSize\" value=\"20\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\"\n        autowire=\"byName\"&gt;\n        &lt;property name=\"dataSource\"&gt;\n            &lt;ref local=\"dataSource\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n\n    &lt;bean id=\"transactionManager\"\n        class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:advice id=\"transactionAdvice\" transaction-manager=\"transactionManager\"&gt;\n        &lt;tx:attributes&gt;\n            &lt;tx:method name=\"*\" propagation=\"REQUIRES_NEW\" rollback-for=\"java.lang.Exception\" timeout=\"30\" /&gt;\n        &lt;/tx:attributes&gt;\n    &lt;/tx:advice&gt;\n    &lt;aop:config&gt;\n        &lt;aop:pointcut id=\"pointcut\" expression=\"execution(* service.*.*(..))\" /&gt;\n        &lt;aop:pointcut id=\"pointcut2\" expression=\"execution(* *.ws.*.*(..))\" /&gt;\n\n        &lt;aop:advisor pointcut-ref=\"pointcut\" advice-ref=\"transactionAdvice\" /&gt;\n        &lt;aop:advisor pointcut-ref=\"pointcut2\" advice-ref=\"transactionAdvice\" /&gt;\n    &lt;/aop:config&gt;\n</code></pre>\n"},{"tags":["java","spring","cookies","spring-security","httpresponse"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13247060,"title":"Is it possible to get username/last visited page after session timeout","body":"<p>In my application I have an <code>invalid-session-url</code> and I was wondering if it's possible to get the username in the <code>invalid-session-url</code>? If so please advise how to do that.</p>\n"},{"tags":["spring","spring-social"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":13,"score":-1,"question_id":13264163,"title":"Is Spring Social right approach to login into application with Twiiter,FaceBook and FoureSquare?","body":"<h1>1</h1>\n\n<p>please suggest which version of Spring Social is compatible with  Spring 3.1(Using Spring 3.1)</p>\n\n<h1>2</h1>\n\n<p>Any other way to integrate with these API with Application. </p>\n\n<p>Googled many times but did not get much helpn for #1 &amp; #2.</p>\n\n<p>Please advise!!!</p>\n"},{"tags":["java","spring","properties"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13248066,"title":"How to reload properties with Spring?","body":"<p>I'm using properties file with Spring 3. \nWhen Spring initializes its contex it loads the properties file and puts it in all beans with @Value annotation.</p>\n\n<p>I want to have a possibility to update some properties in a file, and expose a JMX on the server that will reload the new properties to Spring - without restarting the server, and reloading its context.</p>\n\n<p>Can I implement this by using some <strong>Spring method</strong> to reload properties and populate them to all beans, or should I write something like this by my own?</p>\n"},{"tags":["java","spring","data-binding","spring-mvc","underscores"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13253371,"title":"Binding request parameters with underscores in Spring MVC 3.0","body":"<p>Consider the following requirement: request parameters have to be bound to objects using Spring MVC 3.0. The request parameters contain underscores (e.g. <code>http://myurl:80/x?param_one=1&amp;param_two=2</code>). These parameters should be bound to the following object:</p>\n\n<pre><code>class MyObject {\n    private Integer paramOne;\n    private Integer paramTwo;\n\n    ...\n}\n</code></pre>\n\n<p>How would you go about doing this?</p>\n\n<p><strong>Important note:</strong> consider that there may be a substantial amount of parameters and objects like this and that it's not considered good practice to define setter methods on the objects that include underscores.</p>\n"},{"tags":["spring","hibernate","jsp","oracle10g","clob"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":411,"score":6,"question_id":12075253,"title":"java.sql.SQLException: operation not allowed: streams type cannot be used in batching while inserting data into Oracle clob data type","body":"<p>I'm using Hibernate Tools 3.2.1.GA with Spring version 3.0.2. I'm tying to insert data into Oracle (10g) database field of type <code>clob</code> as follows.</p>\n\n<pre><code>Clob c=Hibernate.createClob(request.getParameter(\"someTextFieldValueOnJSPPage\");\npojoObj.setSomeClobProperty(c);\n</code></pre>\n\n<p>it works just fine but when I attempt to insert a stream of data using a <a href=\"http://ckeditor.com/blog/CKEditor_for_Java_released\">CKEditor</a>,  <a href=\"http://ckeditor.com/demo\">demo</a> on my JSP page (the CKEditor simply renders an HTML <code>&lt;textarea&gt;&lt;/textarea&gt;</code> element) that may involve formatted text as well as images, flash etc, it throws the following exception.</p>\n\n<pre><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.exception.GenericJDBCException: could not update: [model.Cms#1]\n</code></pre>\n\n<hr>\n\n<pre><code>org.hibernate.exception.GenericJDBCException: could not update: [model.Cms#1]\n</code></pre>\n\n<hr>\n\n<pre><code>java.sql.SQLException: operation not allowed: streams type cannot be used in batching\n</code></pre>\n\n<p>How to resolve that exception? Is this the <a href=\"http://srikanth-myjavaj2eeblog.blogspot.in/2008/08/javasqlsqlexception-operation-not.html\">Oracle driver problem</a> or something else? I'm using <code>ojdbc14.jar</code>, <code>Oracle JDBC Driver version - 9.0.2.0.0</code>.</p>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>One of the entities that uses the <code>Clob</code> type is </p>\n\n<pre><code>public class Cms  implements java.io.Serializable\n{\n     private BigDecimal cmsId;\n     private Clob aboutUs;     //I'm currently dealing with this property.\n     private Clob contactUs;\n     private Clob privacyPolicy;\n     private Clob returnPolicy;\n     private Clob shippingPolicy;\n     private Clob termsOfUse;\n     private Clob exchangeLinks;\n     private Clob disclaimer;\n     private Clob aboutProducts;\n     private Clob purchasingConditions;\n     private Clob faq;\n\n    public Cms() {\n    }\n\n    public Cms(BigDecimal cmsId) {\n        this.cmsId = cmsId;\n    }\n    public Cms(BigDecimal cmsId, Clob aboutUs, Clob contactUs, Clob privacyPolicy, Clob returnPolicy, Clob shippingPolicy, Clob termsOfUse, Clob exchangeLinks, Clob disclaimer, Clob aboutProducts, Clob purchasingConditions, Clob faq) {\n       this.cmsId = cmsId;\n       this.aboutUs = aboutUs;\n       this.contactUs = contactUs;\n       this.privacyPolicy = privacyPolicy;\n       this.returnPolicy = returnPolicy;\n       this.shippingPolicy = shippingPolicy;\n       this.termsOfUse = termsOfUse;\n       this.exchangeLinks = exchangeLinks;\n       this.disclaimer = disclaimer;\n       this.aboutProducts = aboutProducts;\n       this.purchasingConditions = purchasingConditions;\n       this.faq = faq;\n    }\n\n    public BigDecimal getCmsId() {\n        return this.cmsId;\n    }\n\n    public void setCmsId(BigDecimal cmsId) {\n        this.cmsId = cmsId;\n    }\n\n    public Clob getAboutUs() {        &lt;-------------\n        return this.aboutUs;\n    }\n\n    public void setAboutUs(Clob aboutUs) {  &lt;-------------\n        this.aboutUs = aboutUs;\n    }\n    public Clob getContactUs() {\n        return this.contactUs;\n    }\n\n    public void setContactUs(Clob contactUs) {\n        this.contactUs = contactUs;\n    }\n    public Clob getPrivacyPolicy() {\n        return this.privacyPolicy;\n    }\n\n    public void setPrivacyPolicy(Clob privacyPolicy) {\n        this.privacyPolicy = privacyPolicy;\n    }\n    public Clob getReturnPolicy() {\n        return this.returnPolicy;\n    }\n\n    public void setReturnPolicy(Clob returnPolicy) {\n        this.returnPolicy = returnPolicy;\n    }\n    public Clob getShippingPolicy() {\n        return this.shippingPolicy;\n    }\n\n    public void setShippingPolicy(Clob shippingPolicy) {\n        this.shippingPolicy = shippingPolicy;\n    }\n    public Clob getTermsOfUse() {\n        return this.termsOfUse;\n    }\n\n    public void setTermsOfUse(Clob termsOfUse) {\n        this.termsOfUse = termsOfUse;\n    }\n    public Clob getExchangeLinks() {\n        return this.exchangeLinks;\n    }\n\n    public void setExchangeLinks(Clob exchangeLinks) {\n        this.exchangeLinks = exchangeLinks;\n    }\n    public Clob getDisclaimer() {\n        return this.disclaimer;\n    }\n\n    public void setDisclaimer(Clob disclaimer) {\n        this.disclaimer = disclaimer;\n    }\n    public Clob getAboutProducts() {\n        return this.aboutProducts;\n    }\n\n    public void setAboutProducts(Clob aboutProducts) {\n        this.aboutProducts = aboutProducts;\n    }\n    public Clob getPurchasingConditions() {\n        return this.purchasingConditions;\n    }\n\n    public void setPurchasingConditions(Clob purchasingConditions) {\n        this.purchasingConditions = purchasingConditions;\n    }\n    public Clob getFaq() {\n        return this.faq;\n    }\n\n    public void setFaq(Clob faq) {\n        this.faq = faq;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>In my Spring controller class, I'm using the following code to perform insertion on the <code>Clob</code> type in Oracle.</p>\n\n<pre><code>Cms c=new Cms();\nc.setCmsId(new BigDecimal(0));\nc.setAboutUs(Hibernate.createClob(request.getParameter(\"txtAboutUs\").toString()));\nsession.save(c);\nsession.flush();\nsession.getTransaction().commit();\nmodel.put(\"status\", \"1\");\nmodel.put(\"msg\",\"Insertion done successfully.\");\n//setParameter(cb);\n</code></pre>\n\n<p>Where <code>model</code> is simply a <code>Map model</code>, a formal parameter of the <code>submit()</code> method in the Spring controller class which is invoked when a submit button is clicked on the JSP page.</p>\n\n<hr>\n\n<p>I'm retrieving data using the following simple method in the Spring controller class</p>\n\n<pre><code>private void getData(Map model)\n{\n    Session session=NewHibernateUtil.getSessionFactory().getCurrentSession();\n    session.beginTransaction();\n    List&lt;Cms&gt;list=session.createQuery(\"from Cms order by cmsId desc\").list();\n    model.put(\"list\", list);\n\n    session.flush();\n    session.getTransaction().commit();\n}\n</code></pre>\n\n<p>Tried to do as mentioned <a href=\"http://stackoverflow.com/q/1644559/1391249\">here</a> but to no avail (I'm facing the same exceptions as specified in that question).</p>\n"},{"tags":["java","spring","struts","portal"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13262425,"title":"Portal vs structs web application","body":"<p>I wanted to build a new web application, I have experience in java technologies. Please suggest what technology i.e struts, spring, Portal etc., related to java is best to develope and integrate with multiple systems. Also this web application should handle huge amount of data. Kindly suggest. Thanks.</p>\n"},{"tags":["java","spring","spring-transactions"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13246469,"title":"@Transactional and GenericApplicationContext don't work together","body":"<p>I'm using @Transactional and transaction management by annotation (tx:annotation-driven...). I have problem when I'm using GenericApplicationContext to create application context and get some beans from it:</p>\n\n<pre><code>GenericApplicationContext ctx = new GenericApplicationContext();\n\n// Load beans definitions \nXmlBeanDefinitionReader xmlReader = new XmlBeanDefinitionReader(ctx);\nxmlReader.loadBeanDefinitions(new ClassPathResource(CONTEXT_PATH));\n\n// Register the datasource \nctx.getBeanFactory().registerSingleton(CONTEXT_DATASOURCE_BEAN_NAME, dataSource);\n\n// Get the service\nServiceInterface service = (ServiceInterface) ctx.getBean(\"service\");\n</code></pre>\n\n<p>I've got the instance of ServiceInterface but I want to have the proxy which contains information about transactions.</p>\n\n<p>Could you explain me what I've missed? </p>\n"},{"tags":["hibernate","spring","orm","pojo","sessionfactory"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":944,"score":2,"question_id":8227217,"title":"ORM library jar into spring application to define a 'sessionFactory'","body":"<p><strong>Problem</strong></p>\n\n<p>I can't define a correct <code>sessionFactory</code> bean in my project and fails web application initialization.</p>\n\n<p><strong>Log output</strong></p>\n\n<pre><code>    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'webServiceTest' defined in ServletContext resource [/WEB-INF/\nclasses/appcontext-spring.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: 'sessionFactory' or 'hibernateTemplate\n' is required\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1336)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:471)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)\n        ... 50 more\nCaused by: java.lang.IllegalArgumentException: 'sessionFactory' or 'hibernateTemplate' is required\n        at org.springframework.orm.hibernate3.support.HibernateDaoSupport.checkDaoConfig(HibernateDaoSupport.java:117)\n        at org.springframework.dao.support.DaoSupport.afterPropertiesSet(DaoSupport.java:44)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1367)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1333)\n        ... 60 more\n</code></pre>\n\n<p>I've created an ORM library with maven using <em>xml</em> mappings and pojos.\nI've imported into my project and I can't configure to access into DDBB.</p>\n\n<ul>\n<li><em>jdbc.properties</em> file is well defined with DDBB connection (<code>db.url</code>, <code>db.properties</code>, etc).</li>\n<li>All POJOs in library extend <em>HibernateDaoSupport</em> and implement basic op interface (CRUD). I'm using a service <strong>webServiceTest</strong> that extends <em>DaoBase</em> to make a test.</li>\n<li>I've did <em>JUnit</em> tests in ORM-library with good results.</li>\n</ul>\n\n<p>Here is <code>dataSource</code>, <code>sessionFactory</code>, etc definitions from <em>appcontext-persistance.xml</em> file:</p>\n\n<pre><code>    &lt;!-- PERSISTENCE SETUP --&gt;\n&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"\n    destroy-method=\"close\"&gt;\n    &lt;property name=\"driverClassName\"&gt;\n        &lt;value&gt;${db.driver}&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"url\"&gt;\n        &lt;value&gt;${db.url}&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"username\"&gt;\n        &lt;value&gt;${db.username}&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"password\"&gt;\n        &lt;value&gt;${db.password}&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;property name=\"maxActive\"&gt;\n        &lt;value&gt;${db.maxActive}&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;!-- Maximum number of idle dB connections to retain in pool. Set \n        to 0 for no limit --&gt;\n    &lt;property name=\"maxIdle\"&gt;\n        &lt;value&gt;${db.maxIdle}&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;!-- Maximum time to wait for a dB connection to become available \n        in ms, in this example 10 seconds. An Exception is thrown if this timeout \n        is exceeded. Set to -1 to wait indefinitely. --&gt;\n    &lt;property name=\"maxWait\"&gt;\n        &lt;value&gt;${db.maxWait}&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;!-- Autocommit setting. This setting is required to make Hibernate \n        work. Or you can remove calls to commit(). --&gt;\n    &lt;property name=\"defaultAutoCommit\"&gt;\n        &lt;value&gt;true&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;!-- Recover abandoned connections --&gt;\n    &lt;property name=\"removeAbandoned\"&gt;\n        &lt;value&gt;true&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;!-- Set the number of seconds a dB connection has been idle before \n        it is considered abandoned. --&gt;\n    &lt;property name=\"removeAbandonedTimeout\"&gt;\n        &lt;value&gt;11&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;!-- Log a stack trace of the code which abandoned the dB connection \n        resources. --&gt;\n    &lt;property name=\"logAbandoned\"&gt;\n        &lt;value&gt;true&lt;/value&gt;\n    &lt;/property&gt;\n\n&lt;/bean&gt;\n\n&lt;bean id=\"transactionManager\"\n    class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\"&gt;\n        &lt;ref local=\"sessionFactory\" /&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sessionFactory\"\n    class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"lobHandler\"&gt;\n        &lt;ref bean=\"oracleLobHandler\" /&gt;\n    &lt;/property&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n\n    &lt;!-- configura la fuente de los mappings --&gt;\n    &lt;property name=\"configLocation\" value=\"classpath:hibernate.cfg.xml\" /&gt;\n\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.Oracle9iDialect&lt;/prop&gt;\n            &lt;prop key=\"hibernate.generate_statistics\"&gt;true&lt;/prop&gt;\n\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Questions:</p>\n\n<ul>\n<li>Spring configuration has to load <em>hibernate.cfg.xml</em> from ORM jar? How can I do this ?</li>\n<li>How should I load a configuration from a Spring ORM project into another ?</li>\n<li>I define the mappings in ORM but I don't have any application context defined in ORM to include in the jar.</li>\n</ul>\n"},{"tags":["spring","tomcat7","autowired"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13260318,"title":"trying to use spring 3 but auto wired objects are null (on tomcat)","body":"<p>I am trying to do my first steps using spring, but I don't manage to get it working, I would appreciate your assistance.</p>\n\n<p>I am using tomcat and I have added to tomcat lib directory a file: jdbc-service.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:context=\"http://www.springframework.org/schema/context\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xmlns:tx=\"http://www.springframework.org/schema/tx\"\n   xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"&gt;\n\n\n&lt;context:spring-configured /&gt;\n\n&lt;context:component-scan base-package=\"com.myproject\"/&gt;\n\n&lt;context:property-placeholder location=\"database.properties\"/&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>I have a database.properties that defines several properties to be used to obtain DataSource object.\nI also have a class that uses @Configuration and it takes the properties for the DB.\nIn addition i have another @Configuration class that inherits from the first one and added JdbcTemplate object each method is annotated @Bean.</p>\n\n<p>I created an interface UserRepository and an implementation for this called UserRepositoryImpl - which has an annotated @Autowired member JdbcTemplate and implementation of only one method findById inherited from the interface UserRepository.</p>\n\n<p>I have another interface called UserManager and it's implementation UserManagerImpl - which is annotated as @Service, it has a member UserRepository annotated with @Autowired.\nit is implementing a method to findById and just tried to get the user from the DB using the UserRepository.</p>\n\n<p>Last, I have a servlet that uses a member</p>\n\n<pre><code>@Autowired\nprivate UserManager userManager;\n</code></pre>\n\n<p>the problem is that userManager is null. I think that the spring does not get initiated, but i don't know why. I am probably missing something important.</p>\n\n<p>Please help me as I can't progress.</p>\n\n<p>Thanks in advance. </p>\n"},{"tags":["java","hibernate","spring","transactions"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1655,"score":3,"question_id":3573418,"title":"Spring Transaction propagation issue","body":"<p>I am using Transaction management with Spring and Hibernate.\nMy situation is as follow: <br>\nI have got bean <strong>A</strong> which is sorrounded by transaction\nand it call bean <strong>B</strong> which is defined with transaction including the attribute 'PROPAGATION_REQUIRED'</p>\n\n<p>B in this case doesn't open new transaction but uses the exsiting one (saw in the logs: 'Participating in existing transaction'). However in case the method in B will throw a runtimeException, on its way back to A it will dirty the transaction and will cause it to be marked for roll-back, even if the external method of A will catch the exception and won't throw it away. I think that this behavior is wrong, in this case I want A to control the transaction and B should not interrupt the transaction in any case. <br>\nIs there any way to define B to open transaction if no transaction defined but DO NOTHING if it is already inside an exising transaction and let the upper level make the decision whether to commit or roll-back?</p>\n\n<p>See more responses about this issue in a thread in Spring community <a href=\"http://forum.springsource.org/showthread.php?t=94324\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":["java","spring","suggestions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13264165,"title":"A requirement to save on every event","body":"<p>I am working on a web application project related to portfolio management. There is this new requirement from client that he wants to save on every event (i.e. the page would be having lot of text boxes, grids, combo boxes etc and the client wants every change to be persisted to DB). There is also a need to have an undo button which should revert it to the initial statue the used came in.</p>\n\n<p>I foresee that this would cause issues when there is concurrent access i.e. there is a possibility that the other used might see partially saved data. The other issue is related to undo. I was thinking that i would have to save the data in may be user session before he starts modification and on click of undo, revert the record by reading from the session.</p>\n\n<p>I dont have much idea on how this could be achieved, whether this is a good approach/feature or not.</p>\n\n<p>Would very much appreciate if someone could provide suggestions on whether this could be achieved, if so, then how? and whether there are some apis/tools readily available. </p>\n"},{"tags":["java","spring","google","oauth"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":15,"score":2,"question_id":13263821,"title":"spring-social-google not sending clientId/clientKey","body":"<p>I'm attempting to add OAuth support to an existing Spring webapp to allow people to login with their Google/Facebook/Twitter/etc. accounts.  To do this I'm using the 'spring-social' framework, and the 'spring-social-google' library for it.  I'm also trying to do this while working within a number of constraints:</p>\n\n<ul>\n<li>The existing webapp does not use spring-security for authentication or for controlling access to resources, it provides its own form-based authentication. </li>\n<li>The existing webapp does not track the authenticated user details using the servlet-container's <code>Principal</code>, instead it stores a reference to the authenticated user in the HTTP session.   </li>\n<li>The existing webapp does not (and cannot) have a Spring DispatcherServlet bound to the webapp root URL (i.e. <code>/</code>).</li>\n</ul>\n\n<p>Accounts in the database are uniquely keyed by e-mail, so really all I'm attempting to do is glue together a flow that goes roughly like:</p>\n\n<pre><code>Login Page (user chooses between OAuth and direct login)\n    -&gt; &lt;Provider OAuth Flow&gt;  (user completes OAuth authorization)\n        -&gt; OAuth Callback URL (grab user email, check for existing account, create if needed) \n            -&gt; Post-login Landing Page (done)\n</code></pre>\n\n<p>Anyhow, the limitations noted above caused a variety of problems, most of which I've managed to find workarounds for.  However I'm getting some bizarre behavior from the Google OAuth connector (Twitter and Facebook appear to work correctly).  Basically, it appears that it is not sending the OAuth <code>clientId</code> or <code>clientSecret</code> during the final request to Google:</p>\n\n<pre><code>DEBUG: org.springframework.web.client.RestTemplate - Writing [\n    {code=[4/dVVrFDpNLDGTmXCuuQj6fcfaetEU.UkLPQd7NOLYbgrKXntQAax0INYiydQI], \n     redirect_uri=[http://localhost:8080/oauth/signin/google], \n     grant_type=[authorization_code]}] as \"application/x-www-form-urlencoded\"\n</code></pre>\n\n<p>This returns a code 400 (\"bad request\"). </p>\n\n<p>If I head over to <a href=\"http://hurl.it/\" rel=\"nofollow\">hurl.it</a> and POST the same data to the same URL (https://accounts.google.com/o/oauth2/token) and manually add in the <code>client_id</code> and <code>client_secret</code> values, the call returns a successful response.  </p>\n\n<p>So what could be causing the Google connector to omit these values?</p>\n\n<p>For reference, I'm including the spring-social-google library in my project like:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.social&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-social-google&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0.M1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>...and then in my <code>@Configuration</code> class I've got:</p>\n\n<pre><code>@Bean\n@Scope(value=\"singleton\", proxyMode=ScopedProxyMode.INTERFACES) \npublic ConnectionFactoryLocator connectionFactoryLocator() {\n    ConnectionFactoryRegistry registry = new ConnectionFactoryRegistry();\n\n    registry.addConnectionFactory(\n            new GoogleConnectionFactory(\n                    \"&lt;google client id&gt;\",  \n                    \"&lt;google secret key&gt;\"));\n\n    registry.addConnectionFactory(\n            new FacebookConnectionFactory(\n                    \"&lt;facebook client id&gt;\", \n                    \"&lt;facebook secret key&gt;\"));\n\n    registry.addConnectionFactory(\n            new TwitterConnectionFactory(\n                    \"&lt;twitter client id&gt;\",   \n                    \"&lt;twitter secret key&gt;\"));\n\n    return registry;\n}\n</code></pre>\n\n<p>The rest of what I'm using is pretty much standard straight out of the <a href=\"https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase\" rel=\"nofollow\">spring-social-showcase</a> example (albeit hacked up to remove extraneous things and to work within the constraints noted above).  Strangely, attempting to log in with Google does correctly show the OAuth authorization page on Google with my app/project name correctly displayed.  The error happens after I hit the \"Allow\" button to authorize the OAuth login and return to the webapp.</p>\n\n<p>Anyhow, what might be causing this issue, and how might it be fixed?</p>\n"},{"tags":["javascript","html","spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13262795,"title":"Check box value does not change after submission","body":"<p>What I am trying to do is to populate my input fields based on JSON object. Below are the fields with their default values:</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"id\"/&gt;\n&lt;input id=\"enabled1\" name=\"enabled\" type=\"checkbox\" value=\"true\"&gt; // not sure why value=\"true\" here, by default it should be false\n</code></pre>\n\n<p>The JSON object has the following format:</p>\n\n<pre><code>[{enabled:false, id:184}]\n</code></pre>\n\n<p>Based on the JSON object, I will iterate its properties and assign the value to the field accordingly. The iterate function is as follows:</p>\n\n<pre><code>            for ( var propertyName in aData) {\n                if (aData.hasOwnProperty(propertyName)){\n                    // check if field exist\n                    var elem = $(\"input[name=\"+propertyName+\"]\");\n                    var exist = elem.size() == 1;\n                    // if exist, update field with selected info\n                    if (exist){\n                        elem.val(aData[propertyName]);\n                    }\n                }\n            }\n</code></pre>\n\n<p>After the iterate function runs the fields are shown like below:</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"id\" value=\"184\"&gt;\n&lt;input id=\"enabled1\" name=\"enabled\" type=\"checkbox\" value=\"false\"&gt;\n</code></pre>\n\n<p>Now if I tick the checkBox and submit the information to server, I want the value to be true but somehow the value is still false. What did I miss out here ?</p>\n"},{"tags":["database","spring","aop","audit"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":22,"score":-1,"question_id":13261702,"title":"Spring AOP - Database Auditing","body":"<p>I'm using Spring AOP trying to define a good approach to have all my tables audited with no much hassle. Example of scenario:\nI have a table named Person and its respective table PersonLog, which will store the Person values in addition to the user who modified, when and the type of the event, for each update.</p>\n\n<p>Simply put, my question is:</p>\n\n<p>I'm trying to come up with a way that my advice class would be smart enough to handle any new table being audited without any needed modification to it... let's say that I created the table Car and its CarLog table, if I could avoid the need to change anything in my advice implementation (it would automatically identify Car as being audited and would be able to persist a CarLog entity) ---> I can identify table Car as being audited pretty easily (by annotation), but I'm struggling to find a way to create and persist a CarLog instance dynamically.</p>\n\n<p>Can anyone think of a way to accomplish that? Thanks.</p>\n"},{"tags":["java","spring"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1228,"score":0,"question_id":10572191,"title":"Spring applicationContext.xml","body":"<p>I am creating an application which uses Spring beans and I need to initialize <code>ApplicationContext</code> from <code>xml</code>. As it is not a server application, it doesn't have <code>WEB-INF</code> folder.So, where I should put the <code>xml</code> file?</p>\n"},{"tags":["java","spring"],"answer_count":2,"favorite_count":22,"up_vote_count":33,"down_vote_count":0,"view_count":8856,"score":33,"question_id":3652090,"title":"difference between applicationContext and spring-servlet.xml in spring","body":"<p>Are applicationContext.xml and spring-servlet.xml related anyhow in spring framework ? will the properties files declared in <code>applicationContext</code> be available to <code>DispatcherServlet</code> . On a related note, why do I need a <code>*-servlet.xml</code> at all ? why is <code>applicationContext.xml</code> alone insufficient ? </p>\n"},{"tags":["java","spring","soap","spring-ws"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":545,"score":1,"question_id":11631833,"title":"Spring WebServiceTemplate SOAPAction missing in HTTP Header","body":"<p>I am having difficulty in calling a SOAP 1.2 WebService via Spring-ws WebServiceTemplate.  The request being made is missing SOAPAction in Http Header and the server throws an error with \"Unable to handle request without a valid action parameter. Please supply a valid soap action.\"  I was able to figure out SOAP Action was missing by monitoring through wireshark. I am also not behind any proxy.</p>\n\n<p>I have made sure that the SOAP XML I am trying to send is valid by running the request through TCP Mon ( tool like SOAP UI) and was able to get response.</p>\n\n<p>Here is my spring config: </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n &lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n   xmlns:tx=\"http://www.springframework.org/schema/tx\"\nxmlns:util=\"http://www.springframework.org/schema/util\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans  \n                        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n                        http://www.springframework.org/schema/util\n                        http://www.springframework.org/schema/util/spring-util-3.0.xsd\"&gt;\n\n&lt;bean id=\"messageFactory\" class=\"org.springframework.ws.soap.saaj.SaajSoapMessageFactory\"&gt;\n    &lt;property name=\"soapVersion\"&gt;\n    &lt;util:constant static-field=\"org.springframework.ws.soap.SoapVersion.SOAP_12\" /&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"webServiceTemplate\" class=\"org.springframework.ws.client.core.WebServiceTemplate\"&gt;\n &lt;constructor-arg ref=\"messageFactory\" /&gt;\n&lt;property name=\"defaultUri\" value=\"https://ecomapi.networksolutions.com/soapservice.asmx\" /&gt;\n&lt;property name=\"messageSender\"&gt;\n    &lt;bean class=\"org.springframework.ws.transport.http.CommonsHttpMessageSender\" /&gt;     &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p></p>\n\n<p>And this is my java code: </p>\n\n<pre><code>            public void simpleSendAndReceive() {\n            try{\n            StreamSource source = new StreamSource(new StringReader(MESSAGE));\n            StreamResult result = new StreamResult(System.out);\n            SoapActionCallback actionCallBack = new SoapActionCallback(\"https://ecomapi.networksolutions.com/soapservice.asmx\") {\n                public void doWithMessage(WebServiceMessage msg) {\n                    SoapMessage smsg = (SoapMessage)msg;\n                    smsg.setSoapAction(\"http://networksolutions.com/ReadOrder\");\n                }\n            };\n            webServiceTemplate.sendSourceAndReceiveToResult(\n                    \"https://ecomapi.networksolutions.com/soapservice.asmx\",\n                     source,\n                     new SoapActionCallback(\"http://networksolutions.com/ReadOrder\"),\n     //                      actionCallBack,\n                     result);\n\n\n            System.out.println(source.getInputStream().toString());\n            System.out.println(result.getWriter().toString());\n\n            }catch (SoapFaultClientException e) {\n                System.out.println(e.getFaultCode());\n                System.out.println(e.getFaultStringOrReason());\n                System.out.println(e.fillInStackTrace().getLocalizedMessage());\n            } catch (WebServiceIOException we) {\n                System.out.println(we.getRootCause());\n            }\n        }\n</code></pre>\n"},{"tags":["spring","maven","instrumentation","autowired","cobertura"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":13080147,"title":"Spring @Autowired fails in case of Cobertura instrumented class","body":"<h3>Question</h3>\n\n<p>Cobertura instrumentation is breaking springs autowiring in a specific case. Does anyone know how to resolve this?</p>\n\n<h3>Scenario</h3>\n\n<ul>\n<li>I am running MVN 3.0.4 with the cobertura-maven-plugin version 2.5.1.</li>\n<li>mvn test runs without issues</li>\n<li>mvn compile, package etc also runs without issues.</li>\n<li>mvn cobertura:cobertura also ran without any issues up until the addition of 2 new features which introduced a number of new classes, including two new com.mycompany.executor executor classes.  (Example: MyHappyExecutor and MySadExecutor was added in addition to the existing MyExecutor)</li>\n<li>Excluding MyExecutor from the cobertura instrumentation process seems to fix autowiring</li>\n<li>Checking the spring autowiring output confirms that the correct beans are getting autowired.</li>\n</ul>\n\n<h3>Point of failure</h3>\n\n<p>Autowiring fails when attempting to autowire the instrumented version of myExecutor in myService. This worked fine before adding MyHappyExecutor and MySadExecutor. MyHappyExecutor and MySadExecutor are autowired and used in MyExecutor exclusively.</p>\n\n<p>I have attached the exception output below. Please not that class and package names have been edited.</p>\n\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myService': Injection of autowired dependencies failed; \nnested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.mycompany.executor.MyExecutor com.mycompany.service.impl.MyServiceImpl.myExecutor; \nnested exception is java.lang.IllegalArgumentException: Can not set com.mycompany.executor.MyExecutor field com.mycompany.service.impl.MyServiceImpl.myExecutor to $Proxy20\n</code></pre>\n\n<h3>Conclusion</h3>\n\n<p>Something in the Cobertura instrumentation process messes up Springs autowiring.</p>\n\n<h3>Update 1</h3>\n\n<p>Forcing CGLIB class proxies changes the error type to a \"java.lang.NoClassDefFoundError\" error. This is affects the standard test goal as well as the Cobertura goal. </p>\n\n<pre><code>&lt;aop:config proxy-target-class=\"true\"/&gt;\n</code></pre>\n\n<h3>Update 2</h3>\n\n<p>Here is the output from springs startup process for the 3 classes in question.</p>\n\n<pre><code>2012-11-01 16:21:51 INFO  [main] Overriding bean definition for bean 'myExecutor': replacing [Generic bean: class [com.mycompany.executor.MyExecutor]; scope=; abstract=false; lazyInit=false; autowireMode=1; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [configuration.xml]] with [Generic bean: class [com.mycompany.executor.MyExecutor]; scope=; abstract=false; lazyInit=false; autowireMode=1; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [configuration.xml]] - (DefaultListableBeanFactory.java:623)\n2012-11-01 16:21:51 INFO  [main] Overriding bean definition for bean 'happyExecutor': replacing [Generic bean: class [com.mycompany.executor.HappyExecutor]; scope=; abstract=false; lazyInit=false; autowireMode=1; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [configuration.xml]] with [Generic bean: class [com.mycompany.executor.HappyExecutor]; scope=; abstract=false; lazyInit=false; autowireMode=1; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [configuration.xml]] - (DefaultListableBeanFactory.java:623)\n2012-11-01 16:21:51 INFO  [main] Overriding bean definition for bean 'sadExecutor': replacing [Generic bean: class [com.mycompany.executor.SadExecutor]; scope=; abstract=false; lazyInit=false; autowireMode=1; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [configuration.xml]] with [Generic bean: class [com.mycompany.executor.SadExecutor]; scope=; abstract=false; lazyInit=false; autowireMode=1; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [configuration.xml]] - (DefaultListableBeanFactory.java:623)\n</code></pre>\n"},{"tags":["spring","spring-mvc","spring-roo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13251328,"title":"field:select with a static List in Spring Roo","body":"<p>Hy everyone.</p>\n\n<p>I have a simple problem here.\nin my order class i have OrderStatus field, which is an enum in the database. (Can be \"Under process\" or Dispatched)</p>\n\n<p>My problem is when im using update.jspx i want a field:select dropdown list, where the admin can change this value.</p>\n\n<p>Because these values can not be read out from database, i was thinking of creating a static arraylist inside order.java like this:</p>\n\n<pre><code>public static List&lt;String&gt; StatusList;\nstatic{\n  ArrayList&lt;String&gt; tmp = new ArrayList&lt;String&gt;();\n  tmp.add(\"Under process\");\n  tmp.add(\"Dispatched\");\n  StatusList = Collections.unmodifiableList(tmp);\n}\n\n\npublic List&lt;String&gt; getStatusList() {\n    return StatusList;\n}\n</code></pre>\n\n<p>How can i read out these value using field:select tag, and set them as orderStatus?</p>\n\n<pre><code>&lt;field:select field=\"orderStatus\" id=\"c_photostore_Porder_orderStatus\" items=\"${porders}\" itemValue=\"orderStatusList\" path=\"/porders\"/&gt;\n</code></pre>\n\n<p>if i could call a method from update.jspx would be fine also i think, but i know the syntax only in webflow, not in standard roo.</p>\n"},{"tags":["java","spring","maven-2","dependencies","spring-3"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1502,"score":1,"question_id":6564177,"title":"How to get a spring-framework-3.0.5-RELEASE-with-dependencies.zip file for Spring 3?","body":"<p>I have a bit of an issue with Spring 3 and it involves its dependencies or better said \"their lack of...\".</p>\n\n<p>When you <a href=\"http://www.springsource.com/download/community\" rel=\"nofollow\">download</a> Spring 2.5.x for example you get a <code>spring-framework-2.5.6-with-dependencies.zip</code> file containing the Spring distribution as well as its dependencies. </p>\n\n<p>For Spring 3 there isn't one. You only get the distro while dependencies are managed in Maven repository and retrieved with Ivy. That was the decision springsource fellows took. Which brings me to my problem. </p>\n\n<p>At work Maven repository has \"forbidden access\" written all over it and we don't use Ivy. We use Maven but with a local enterprise repository and nothing beyond that is allowed (security concerns yada yada which ultimately makes sense but makes my job as a developer harder). To put something in the local repository means approvals, deployments of resources, configurations, acces rights, time, money etc. </p>\n\n<p>It is OK with a few JARS here and there but I imagine Spring dependencies mean more than a few JARs. So that will be approved and installed over o long period of time. Meanwhile we can't develop in Spring 3 (while everything is set up in the local repository) so we need the dependencies.</p>\n\n<p>I found this page here:</p>\n\n<p><a href=\"http://static.springsource.org/downloads/nightly/snapshot-download.php?project=SPR\" rel=\"nofollow\">http://static.springsource.org/downloads/nightly/snapshot-download.php?project=SPR</a></p>\n\n<p>which contains some dependencies but i need it for release 3.0.5 not for nightly builds. </p>\n\n<p><strong>In short, I need a <code>spring-framework-3.0.5-RELEASE-with-dependencies.zip</code> file. Ho do I get one?</strong></p>\n\n<p>P.S. I must mention that I can't just download something home and bring everything on a stick which is the first suggestion that pops in mind. Other rules apply for this :D, so I need an official release to download.</p>\n"},{"tags":["spring","singleton","javabeans"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13261672,"title":"Could some one explain the below statements to me?","body":"<p>I was reading about Spring's bean declaration and how you use Factory-method to pass the instance to the bean declaration when the class has no public constructor...</p>\n\n<pre><code>package com.springinaction.springidol;\npublic class Stage{\nprivate Stage(){\n}\nprivate static class StageSingletonHolder{\n static Stage instance=new Stage();\n}\npublic static Stage getInstance(){\n    return StageSingletonHolder.instance;\n}\n}\n</code></pre>\n\n<p>after a few more lines i found the below text..</p>\n\n<blockquote>\n  <p>Spring’s notion of singletons is limited to the scope of the Spring\n  context. Unlike true singletons, which guarantee only a single\n  instance of a class per classloader, Spring’s singleton beans only\n  guarantee a single instance of the bean definition per the application\n  context—nothing is stopping you from instantiating that same class in\n  a more conventional way or even defining several  declarations\n  that instantiate the same class.</p>\n</blockquote>\n\n<p>I do not understand how this can/would be done..Could some one please explain?</p>\n"},{"tags":["forms","spring","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12899136,"title":"How do I populate an object in a command object?","body":"<p>I'm using Spring 3.1.1.RELEASE.  I have this command object …</p>\n\n<pre><code>@Entity\npublic class Contract {\n\n    @Id\n        @Column(name = \"ID\")\n        @GeneratedValue(strategy=GenerationType.AUTO)\n        private Integer id;\n\n        @OneToOne(fetch = FetchType.EAGER, targetEntity = Product.class)\n        @JoinColumn(name = \"PRODUCT_ID\")\n        @NotNull\n        private Product product;\n\n        @Column(name = \"ORDER_ID\")\n        @NotNull\n        private String orderId;     \n    …\n</code></pre>\n\n<p>and what I want on my JSP form is to have a drop down list of products represent the product field.  Once a user selects one and submits the form, it would populate the object's \"product\" member field through the command object's setProduct method.  I know how to set up the String fields, </p>\n\n<pre><code>&lt;form:input path=\"orderId\" /&gt;\n</code></pre>\n\n<p>but what do I need to put in my controller and JSP so that when my request is submitted to the controller …</p>\n\n<pre><code>@RequestMapping(value = \"/add\", method = RequestMethod.POST)\npublic ModelAndView addContract(final Contract contract,\n                                final BindingResult result) {\n…\n</code></pre>\n\n<p>the Product field will be populated correctly?</p>\n"},{"tags":["spring","hibernate","jsf-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13261566,"title":"JSF2 + Spring3 and hibernate: Spring Managed Bean (@Scope value=\"view\") LazyInitializationException exception","body":"<p>I've created custom spring scope using code found <a href=\"http://comdynamics.net/blog/109/spring3-jsf2-view-scope/\" rel=\"nofollow\">in this link</a> which enables the use of <code>view</code> scoped Spring managed bean similar to that of JSF2 @ViewScoped.</p>\n\n<p>When user presses the Submit button the following takes place:</p>\n\n<pre><code>- Backbean AA (@Scope(value=\"view\") calls injected @Service BB\n- @Service BB calls DAO class CC \n- CC is @Transactional(readOnly = true) and has sessionFactory injected \n     private SessionFactory sessionFactory;\n\n    //inject sessionGactory\n    public void setSessionFactory(SessionFactory sessionFactory) {\n        this.sessionFactory = sessionFactory;\n    }\n- in CC i set the @Transactional(readOnly = false, propagation = Propagation.REQUIRED)\n  for functions such as save/delete/saveOrUpdate\n</code></pre>\n\n<p>The Hibernate mapping concerning this class are:</p>\n\n<h2>RegUser.hbm.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n\"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd\"&gt;\n&lt;hibernate-mapping&gt;\n    &lt;class name=\"com.testApp.hibernate.RegUser\" table=\"reg_users\" schema=\"dbo\" catalog=\"devDB\"&gt;\n        &lt;id name=\"userPk\" type=\"java.lang.Long\"&gt;\n            &lt;column name=\"userPK\" /&gt;\n            &lt;generator class=\"identity\" /&gt;\n        &lt;/id&gt;\n        &lt;property name=\"firstname\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"firstname\" length=\"25\" not-null=\"true\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"lastname\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"lastname\" length=\"50\" not-null=\"true\" /&gt;\n        &lt;/property&gt;\n        &lt;set name=\"UserVsOrderses\" inverse=\"true\"&gt;\n            &lt;key&gt;\n                &lt;column name=\"userPK\" not-null=\"true\" /&gt;\n            &lt;/key&gt;\n            &lt;one-to-many class=\"com.testApp.hibernate.UserVsOrders\" /&gt;\n        &lt;/set&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<h2>UserVsOrders.hbm.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n\"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd\"&gt;\n&lt;hibernate-mapping&gt;\n    &lt;class name=\"com.testApp.hibernate.custOrders\" table=\"custOrders\" schema=\"dbo\" catalog=\"devDB\"&gt;\n        &lt;composite-id name=\"id\" class=\"com.testApp.hibernate.custOrdersId\"&gt;\n            &lt;key-property name=\"userPk\" type=\"java.lang.Long\"&gt;\n                &lt;column name=\"userPK\" /&gt;\n            &lt;/key-property&gt;\n            &lt;key-property name=\"OrderPk\" type=\"java.lang.Long\"&gt;\n                &lt;column name=\"OrderPK\" /&gt;\n            &lt;/key-property&gt;\n        &lt;/composite-id&gt;\n        &lt;many-to-one name=\"RegUser\" class=\"com.testApp.hibernate.RegUser\" update=\"false\" insert=\"false\" fetch=\"select\"&gt;\n            &lt;column name=\"userPK\" not-null=\"true\" /&gt;\n        &lt;/many-to-one&gt;\n        &lt;many-to-one name=\"Order\" class=\"com.testApp.hibernate.Order\" update=\"false\" insert=\"false\" fetch=\"select\"&gt;\n            &lt;column name=\"OrderPK\" not-null=\"true\" /&gt;\n        &lt;/many-to-one&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<h2>applicationContext.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n                        http://www.springframework.org/schema/tx\n                        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n                        http://www.springframework.org/schema/context\n                        http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"com.testApp\" /&gt;\n    &lt;context:annotation-config /&gt;\n\n    &lt;bean class=\"org.springframework.beans.factory.config.CustomScopeConfigurer\"&gt;\n        &lt;property name=\"scopes\"&gt;\n            &lt;map&gt;\n                &lt;entry key=\"view\"&gt;\n                    &lt;bean class=\"com.testApp.util.ViewScope\" /&gt;\n                &lt;/entry&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"net.sourceforge.jtds.jdbc.Driver\"&gt;\n        &lt;/property&gt;\n        &lt;property name=\"url\" value=\"jdbc:jtds:sqlserver://localhost:1433/devDB\"&gt;\n        &lt;/property&gt;\n        &lt;property name=\"username\" value=\"blabla\"&gt;&lt;/property&gt;\n        &lt;property name=\"password\" value=\"blabla\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"sessionFactory\"\n        class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\"&gt;\n            &lt;ref bean=\"dataSource\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.SQLServer2008Dialect&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.min_size\"&gt;5&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.max_size\"&gt;20&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.idle_test_period\"&gt;300&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.timeout\"&gt;1800&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.max_statements\"&gt;50&lt;/prop&gt;\n                &lt;prop key=\"cache.provider_class\"&gt;org.hibernate.cache.NoCacheProvider&lt;/prop&gt;\n                &lt;prop key=\"c3p0.acquire_increment\"&gt;1&lt;/prop&gt;\n            &lt;props&gt;\n        &lt;/property&gt;\n\n\n    &lt;bean id=\"transactionManager\"\n        class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"\n        p:sessionFactory-ref=\"sessionFactory\" /&gt;\n\n    &lt;bean id=\"transactionTemplate\" class=\"org.springframework.transaction.support.TransactionTemplate\"&gt;\n        &lt;property name=\"transactionManager\" ref=\"transactionManager\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n    ...\n    &lt;!-- some other beans declared below --&gt;\n\n    ...\n    &lt;!-- all the Mapping Resource  --&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>My Problem is that one first form submit all is well, but on the next form submit i get: </p>\n\n<pre><code>failed to lazily initialize a collection, no session or session was closed\n\nviewId=/page/regNewCust.xhtml\nlocation=C:\\repo\\dev\\WebRoot\\nz\\regNewCust.xhtml\nphaseId=PROCESS_VALIDATIONS(3)\n\nCaused by:\norg.hibernate.LazyInitializationException - failed to lazily initialize a collection, no session or session was closed\nat org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:394)\n</code></pre>\n\n<p>The page works fine if i set bean scope as <code>@Scope(value='request')</code></p>\n\n<p>I have tried adding the folloiwng to <code>web.xml</code> but it didn't help:</p>\n\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;openSessionInViewFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.orm.hibernate4.support.OpenSessionInViewFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;openSessionInViewFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p>I've also tried adding <code>&lt;set name=\"UserVsOrderses\" inverse=\"true\" fetch=\"join\"&gt;</code> which didn't help either.</p>\n\n<p>Can anyone point of what i'm doing wrong and how i can fix the issue?</p>\n"},{"tags":["spring","security","authentication","login","messages"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13261794,"title":"Display error messages in Spring login","body":"<p>I am using Spring security for authenticating users. I created a custom authentication provider and now I am wondering how I can get error messages from the provider into my form. This is the authenticate() method in my custom authentication provider:</p>\n\n<pre><code>@Override\npublic Authentication authenticate(Authentication authentication) throws AuthenticationException {\n    UserProfile profile = userProfileService.findByEmail(authentication.getPrincipal().toString());\n\n    if(profile == null){\n        throw new UsernameNotFoundException(String.format(\"Invalid credentials\", authentication.getPrincipal()));\n    }\n\n    String suppliedPasswordHash = DigestUtils.shaHex(authentication.getCredentials().toString());\n\n    if(!profile.getPasswordHash().equals(suppliedPasswordHash)){\n        throw new BadCredentialsException(\"Invalid credentials\");\n    }\n\n    UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(profile, null, profile.getAuthorities());\n\n    return token;\n}\n</code></pre>\n\n<p>This is my form:</p>\n\n<pre><code>&lt;form name='f' action=\"&lt;c:url value='j_spring_security_check' /&gt;\" method='POST'&gt;\n&lt;div id=\"data-entry-form\"&gt;\n\n    &lt;div class=\"form-entry\"&gt;\n        &lt;label&gt;&lt;spring:message code=\"login.form.label.email\"/&gt;&lt;/label&gt;\n        &lt;input type='text' name='j_username' value=''&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-entry\"&gt;\n        &lt;label&gt;&lt;spring:message code=\"login.form.label.password\"/&gt;&lt;/label&gt;\n        &lt;input type='password' name='j_password'/&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-entry\"&gt;\n        &lt;input type=\"submit\" value=\"Verzenden\"/&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>How would I get error messages into my form? From the moment I press the login button, Spring takes over, so the only method I could generate error messages in would be the authenticate() method...</p>\n"},{"tags":["java","spring","javabeans"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13259248,"title":"How to declare a bean which has a constructor which takes String and Map as parameters?","body":"<p>I am using ThreadPoolExecutor utility and passing the values thru constructor in called class. The constructor takes two arguments (1) a map (2) a string.</p>\n\n<p>I am confused on how to declare a bean for the called class which takes two arguments( a map and a string). My code is as below. </p>\n\n<pre><code>***Calling Class***\n\n    public class Starter {\n\n        ProcessScheduler deleteBatch;\n        public ProcessScheduler getDeleteBatch() {\n            return deleteBatch;\n            }\n\n        public void setDeleteBatch(ProcessScheduler deleteBatch) {\n            this.deleteBatch = deleteBatch;\n            }\n\n\n        public void start() {\n\n        ThreadPoolExecutor executor = testThreadPoolExecutorService.createNewThreadPool();\n\n\n            for (int i=0;i&lt;=5;i++)\n            {\n            Map m4 = arrayRecords.get(i);\n            executor.execute(new ProcessScheduler(\"Thread #\"+i,m4));                     // Comment - started \nThe above line executes fine but it gives null pointer error if I will call any other method from the run() inside  called class(ProcessScheduler). So I have use a Bean such as executor.execute(getDeleteBatch(\"Thread #\"+i,m4)) to get the instance of the bean. But I dont know how to do this in this case?\n\n// Comment - ended\n\n\n            }\n\n***Called Class***\n\n\n\npublic class ProcessScheduler implements Runnable {\n\n         public ProcessScheduler(String taskName, Map m) {\n            this.taskName = taskName;\n            this.deleteRecordsMap = (HashMap) m;\n            }\n        Processor processor;\n        public Processor getProcessor() \n        {\n            return processor;\n        }\n\n\n        public void setProcessor(Processor mappProcessor) {\n            this.mappProcessor = mappProcessor;\n        }\n\n\n        public void run() \n        {\n        // This returns null \n        processor.getNumbers();\n        }\n\n        }\n\n\n\nI have some confusions as below.\n(1) How to declare a bean for ProcessScheduler in this case. \n(2) Is the declaration of getDeleteBatch is correct in this case like below?\n\npublic ProcessScheduler getDeleteBatch() {\n            return deleteBatch;\n            }\n</code></pre>\n\n<p>Thanks\nGendaful</p>\n"},{"tags":["java","spring","activemq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13254243,"title":"Active MQ - incorporate the configuration broker","body":"<pre><code>&lt;bean id=\"myTopic\" class=\"org.apache.activemq.command.ActiveMQTopic\"&gt;\n    &lt;property name=\"physicalName\" value=\"feed.topic\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"myConnectionFactory\" class=\"org.apache.activemq.ActiveMQConnectionFactory\"&gt;\n    &lt;property name=\"brokerURL\" value=\"failover:tcp://localhost:61616\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"myJmsTemplate\" class=\"org.springframework.jms.core.JmsTemplate\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"myConnectionFactory\" /&gt;\n    &lt;property name=\"defaultDestination\" ref=\"myTopic\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sender\" class=\"com.feed.publish.PublishMessages\"&gt;\n    &lt;property name=\"jmsTemplate\" ref=\"myJmsTemplate\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I have the above set up using the spring framework that allows me to publish messages to a queue. However, if the activemq instance is terminated mid process, I would like it to write to disk/file the messages until a connection can be reestablished. I have found sample code off of the website of activemq however I am unsure how I integrate this in to my current setup</p>\n\n<pre><code>&lt;amq:broker useJmx=\"true\" persistent=\"true\" brokerName=\"localhost\"&gt;\n    &lt;amq:persistenceAdapter&gt;\n        &lt;amq:kahaPersistenceAdapter directory=\"activemq-data\"\n            maxDataFileLength=\"33554432\" /&gt;\n    &lt;/amq:persistenceAdapter&gt;\n    &lt;amq:transportConnectors&gt;\n        &lt;amq:transportConnector name=\"vm\" uri=\"vm://localhost\" /&gt;\n    &lt;/amq:transportConnectors&gt;\n&lt;/amq:broker&gt;\n</code></pre>\n\n<p>Can someone please tell me how I go about merging these two styles? Thanks</p>\n"},{"tags":["java","web-services","spring","jaxb","spring-ws"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1797,"score":1,"question_id":7541836,"title":"Java Spring Web Service Client Fault Handling","body":"<p>I have written a web service client (using Java Spring and JAXB Marshaller) that works with the UPS web service. When I send a valid request everything works well. When I send an invalid request (weight > 150 lbs) then the UPS web service responds with a SOAP Fault. The client application just fails with a </p>\n\n<pre><code>org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling \nexception; nested exception is javax.xml.bind.UnmarshalException: \nunexpected element (uri:\"http://schemas.xmlsoap.org/soap/envelope/\", local:\"Fault\").\n</code></pre>\n\n<p>Obviously my program isn't able to decipher the SOAP fault returned by the web service. I wrote a custom FaultMessageResolver, but it doesn't get invoked. Here's the code:</p>\n\n<pre><code>public class UpsRateClient extends WebServiceGatewaySupport {\n    public UpsRateClient(WebServiceMessageFactory messageFactory) {\n        super(messageFactory);\n        getWebServiceTemplate().setFaultMessageResolver(new UpsFaultMessageResolver());\n    }\n\n    public RateResponse getRate(RateRequest rateRequest) {\n        return (RateResponse) getWebServiceTemplate().marshalSendAndReceive(rateRequest, new UpsRequestWSMC());\n    }\n    private class UpsFaultMessageResolver implements FaultMessageResolver {\n        public void resolveFault(WebServiceMessage message) throws IOException{\n            System.out.println(\"Inside UpsFaultMessageResolver\");   \n        }\n    }\n}\n</code></pre>\n\n<p>Thanks for your time!</p>\n"},{"tags":["spring","hibernate","jpa","transactions","flush"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13259677,"title":"How do I set flush mode to \"COMMIT\" in my configuration files?","body":"<p>I'm using Spring 3.1.1.RELEASE, Hibernate 4.1.0.Final, and JPA 2.0.  Is there a way I can configure Spring transactions to commit after the transactions are executed without Java code?  In other words, I would like to set flush mode to commit in either the application context file, hibernate configuration file, or persistence.xml file.  My Spring transaction service class looks like</p>\n\n<pre><code>@Transactional(rollbackFor = Exception.class)\n@Service\npublic class ContractServiceImpl implements ContractService\n{\n\n    @Autowired\n    private ContractDAO m_contractDao;\n\n    public void addContract(Contract contract)\n    {\n       m_contractDao.create(contract);\n    }\n\n    ...\n</code></pre>\n\n<p>and my application context is set up like so …</p>\n\n<pre><code>&lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"org.hsqldb.jdbcDriver\"/&gt;\n    &lt;property name=\"url\" value=\"jdbc:hsqldb:mem:myproject\" /&gt;\n    &lt;property name=\"username\" value=\"sa\" /&gt;\n    &lt;property name=\"password\" value=\"\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"jpaVendorAdapter\"&gt;\n        &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"/&gt;\n    &lt;/property&gt;\n    &lt;property name=\"persistenceXmlLocation\" value=\"classpath*:META-INF/test-persistence.xml\"/&gt;\n    &lt;property name=\"persistenceUnitName\" value=\"testingDatabase\"/&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sharedEntityManager\" class=\"org.springframework.orm.jpa.support.SharedEntityManagerBean\"&gt;\n   &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n    &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven /&gt;\n</code></pre>\n\n<p>My persistence.xml file is</p>\n\n<pre><code>&lt;persistence version=\"2.0\"\n   xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence\n        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n        &lt;persistence-unit name=\"testingDatabase\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n                &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n                &lt;properties&gt;\n                        &lt;property name=\"hibernate.ejb.cfgfile\" value=\"/hsql_hibernate.cfg.xml\" /&gt;\n                &lt;/properties&gt;\n        &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>and my hibernate config file is</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n\"-//Hibernate/Hibernate Configuration DTD//EN\"\n\"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd\"&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=\"hibernate.connection.pool_size\"&gt;1&lt;/property&gt;\n        &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n        &lt;property name=\"dialect\"&gt;org.hibernate.dialect.HSQLDialect&lt;/property&gt;\n        &lt;property name=\"hibernate.hbm2ddl.auto\"&gt;create-drop&lt;/property&gt;\n\n        &lt;mapping class=\"org.mainco.subco.sbadmin.domain.Product\" /&gt;\n        &lt;mapping class=\"org.mainco.subco.sbadmin.domain.Contract\" /&gt;\n        &lt;mapping class=\"org.mainco.subco.organization.domain.Country\" /&gt;\n        &lt;mapping class=\"org.mainco.subco.organization.domain.State\" /&gt;\n        &lt;mapping class=\"org.mainco.subco.organization.domain.Address\" /&gt;\n        &lt;mapping class=\"org.mainco.subco.organization.domain.OrganizationType\" /&gt;\n        &lt;mapping class=\"org.mainco.subco.organization.domain.Organization\" /&gt;\n\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n"},{"tags":["spring","websphere","birt"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13241045,"title":"Why doesn't Websphere like BIRT?","body":"<p>I am trying to start a deployment of a project to Websphere and I get the following error trail. (Shortened)</p>\n\n<pre><code>ERROR org.springframework.web.context.ContextLoader - Context initialization failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birtView' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'birtEngine' while setting bean property 'birtEngine'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birtEngine': FactoryBean threw exception on object creation; nested exception is java.lang.RuntimeException: Could not start the Birt engine!\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birtEngine': FactoryBean threw exception on object creation; nested exception is java.lang.RuntimeException: Could not start the Birt engine!\nCaused by: java.lang.RuntimeException: Could not start the Birt engine!\nCaused by: org.eclipse.birt.core.exception.BirtException: error.CannotStartupOSGIPlatform\nCaused by: org.eclipse.birt.core.framework.FrameworkException: Cant register the ExtensionRegistry classpath\nCaused by: org.eclipse.core.runtime.CoreException: Extension registry provider is already set.\n</code></pre>\n\n<p>The solution to the 3rd from bottom error as I have found online was to delete the following line of code.</p>\n\n<pre><code>config.setEngineHome(\"C:/birt-runtime-3_7_0/ReportEngine\");\n</code></pre>\n\n<p>However, this is not present and unnecessary for our setup.\nIt(the BIRT specific code used) is very similar to this example online: </p>\n\n<p><a href=\"http://www.springsource.org/BusinessIntelligenceWithSpringAndBIRT\" rel=\"nofollow\">http://www.springsource.org/BusinessIntelligenceWithSpringAndBIRT</a></p>\n\n<p>The BirtView and BirtEngineFactory are the only relevant parts to my project.\nI have gone to this Bug Page and forum entry and tried the code addition. It did not work. The project starts up and works on Tomcat 6x without any issue.</p>\n\n<p><a href=\"http://www.eclipse.org/forums/index.php/m/727929/\" rel=\"nofollow\">http://www.eclipse.org/forums/index.php/m/727929/</a></p>\n\n<p><a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=351052\" rel=\"nofollow\">https://bugs.eclipse.org/bugs/show_bug.cgi?id=351052</a></p>\n\n<p>I have the class loader order in Web Sphere set to \"Classes loaded with application class loader first.\" as in the example in the link below.</p>\n\n<p><a href=\"http://wiki.eclipse.org/BirtPOJO_Viewer_WebSphere_Deployment\" rel=\"nofollow\">http://wiki.eclipse.org/BirtPOJO_Viewer_WebSphere_Deployment</a></p>\n\n<p>I still get the same set of errors and I'm not sure what else I should be doing.\nI know it is a bit hard to ask this without posting code, but would someone have an idea as to what I should look for? \nThanks.</p>\n"},{"tags":["spring","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13259377,"title":"Error in my spring-hibernate application","body":"<p>I am new to Spring, i am trying to create a simple project with spring and Hibernate with annotations(without use of configuration and mapping XML's). I am held up with this below error since 3 days, to go with troubles from hurricane 'Sandy'.</p>\n\n<p><strong>Here is the error i see..</strong></p>\n\n<pre><code>`ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/Spring]] (MSC service thread 1-2) StandardWrapper.Throwable: java.lang.NoClassDefFoundError: Lorg/hibernate/cache/CacheProvider;\nat java.lang.Class.getDeclaredFields0(Native Method) [rt.jar:1.6.0_25]\nat java.lang.Class.privateGetDeclaredFields(Class.java:2291) [rt.jar:1.6.0_25]\nat java.lang.Class.getDeclaredFields(Class.java:1743) [rt.jar:1.6.0_25]\nat org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:373) [org.springframework.orm-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:321) [org.springframework.orm-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:830) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:493) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:591) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) [org.springframework.context-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469) [org.springframework.context-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat javax.servlet.GenericServlet.init(GenericServlet.java:242) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]\nat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202) [jbossweb-7.0.13.Final.jar:]\nat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102) [jbossweb-7.0.13.Final.jar:]\nat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655) [jbossweb-7.0.13.Final.jar:]\nat org.apache.catalina.core.StandardContext.start(StandardContext.java:3873) [jbossweb-7.0.13.Final.jar:]\nat org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]\nat org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)\nat org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_25]\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_25]\nat java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25]\nCaused by: java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider from [Module \"deployment.Spring.war:main\" from Service Module Loader]\nat org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)\nat org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)\nat org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)\nat org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)\nat org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\nat org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)\n... 32 more\n\n16:42:59,393 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/Spring]] (MSC service thread 1-2) Servlet /Spring threw load() exception: java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider from [Module \"deployment.Spring.war:main\" from Service Module Loader]\nat org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)\nat org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)\nat org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)\nat org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)\nat org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\nat org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)\nat java.lang.Class.getDeclaredFields0(Native Method) [rt.jar:1.6.0_25]\nat java.lang.Class.privateGetDeclaredFields(Class.java:2291) [rt.jar:1.6.0_25]\nat java.lang.Class.getDeclaredFields(Class.java:1743) [rt.jar:1.6.0_25]\nat org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:373) [org.springframework.orm-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:321) [org.springframework.orm-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:830) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:493) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:591) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) [org.springframework.context-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469) [org.springframework.context-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\nat javax.servlet.GenericServlet.init(GenericServlet.java:242) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]\nat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202) [jbossweb-7.0.13.Final.jar:]\nat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102) [jbossweb-7.0.13.Final.jar:]\nat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655) [jbossweb-7.0.13.Final.jar:]\nat org.apache.catalina.core.StandardContext.start(StandardContext.java:3873) [jbossweb-7.0.13.Final.jar:]\nat org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]\nat org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)\nat org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_25]\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_25]\nat java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25]`\n</code></pre>\n\n<p><strong>Here is the code</strong></p>\n\n<pre><code>[ Spring-servlet.xml]\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans ...\n\n&lt;context:property-placeholder location=\"classpath:jdbc.properties\" /&gt;\n\n&lt;bean id=\"jspViewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;property name=\"viewClass\" value=\"org.springframework.web.servlet.view.JstlView\" /&gt;\n    &lt;property name=\"prefix\" value=\"/WEB-INF/jsp/\" /&gt;\n    &lt;property name=\"suffix\" value=\".jsp\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"${database.driver}\" /&gt;\n    &lt;property name=\"url\" value=\"${database.url}\" /&gt;\n    &lt;property name=\"username\" value=\"${database.username}\" /&gt;\n    &lt;property name=\"password\" value=\"${database.password}\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"annotatedClasses\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;com.spring.form.Items&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;${hibernate.show_sql}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.connection.pool_size\"&gt;${hibernate.connection.pool_size}&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;context:component-scan base-package=\"com.spring\" /&gt;\n\n&lt;tx:annotation-driven /&gt;\n\n\n&lt;/beans&gt;\n\nController\n\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport com.spring.form.Items;\nimport com.spring.service.ReceiptsService;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.servlet.ModelAndView;\n\n@Controller\n@RequestMapping(\"/receiptsnew\")\npublic class ReceiptsSpringController {\n\n@Autowired\nprivate ReceiptsService receiptsService;\n\npublic ReceiptsSpringController()\n{\n\n}\n\n@RequestMapping(value=\"/save\", method=RequestMethod.POST)\npublic ModelAndView saveItems(@ModelAttribute(\"item\")Items item, BindingResult result)\n{\n    receiptsService.addItem(item);\n\n    return new ModelAndView(\"redirect:/receiptsnew.html\");\n\n}\n\n@RequestMapping(method=RequestMethod.GET)\npublic ModelAndView viewItems()\n{\n    Map model= new HashMap();\n    model.put(\"items\", receiptsService.getAllItems());\n    //items is just a key values\n\n    return new ModelAndView(\"itemsView\",model);\n}\n\n@RequestMapping(value=\"/add\", method=RequestMethod.GET)\npublic ModelAndView addItems(@ModelAttribute(\"item\")Items item, BindingResult result) \n{\n    return new ModelAndView(\"itemAdd\"); \n}\n}\n\nDAO\n\n\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Repository;\nimport org.hibernate.SessionFactory;\nimport com.spring.form.Items;\n@Repository(\"itemDao\")\npublic class HibernateItemDao implements ItemDao {\n\n@Autowired\nprivate SessionFactory sessionFactory;\n\n\npublic void saveItem(Items item) {\n    // TODO Auto-generated method stub\n    sessionFactory.getCurrentSession().saveOrUpdate(item);\n}\n\n@SuppressWarnings(\"unchecked\")\npublic List&lt;Items&gt; getAllItems() {\n    // TODO Auto-generated method stub\n    return sessionFactory.getCurrentSession().createCriteria(Items.class).list();\n}\n\n}\n\n\n\n\nService layer  \n\n\nimport java.util.List;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport com.spring.dao.ItemDao;\nimport com.spring.form.Items;\n\n\n\n@Service(\"receiptsService\")\n@Transactional(propagation=Propagation.SUPPORTS, readOnly=true)\npublic class ReceiptsServiceImpl implements ReceiptsService {\n\n@Autowired\nprivate ItemDao itemDao;\n\npublic ReceiptsServiceImpl()\n{\n}\n\n\n@Transactional(propagation=Propagation.REQUIRED,readOnly=false)\npublic void addItem(Items item) {\n    // TODO Auto-generated method stub\n    itemDao.saveItem(item);\n}\n\npublic List&lt;Items&gt; getAllItems() {\n    // TODO Auto-generated method stub\n    return itemDao.getAllItems();\n}\n\n}\n\nForm data\n\n\n@Entity\n@Table(name=\"INVP200B\") \npublic class Items {\n\n@Id\n@Column(name=\"ITEMB\")\nprivate String itemno;\n\n@Column(name=\"QUARTB\")\nprivate String quantity;\n\n@Column(name=\"QTYPLB\")\nprivate String pallet;\n\npublic Items()\n{\n\n}\n\npublic String getItemno() {\n    return itemno;\n}\n\npublic void setItemno(String itemno) {\n    this.itemno = itemno;\n}\n\npublic String getQuantity() {\n    return quantity;\n}\n\npublic void setQuantity(String quantity) {\n    this.quantity = quantity;\n}\n\npublic String getPallet() {\n    return pallet;\n}\n\npublic void setPallet(String pallet) {\n    this.pallet = pallet;\n}\n\npublic String toString()\n{\n    return \" ITEM NO IS \"+itemno+\" QUANTITY IS\"+quantity+\" PALLET QUANTITY IS \"+pallet ;\n}\n}\n\nproperties\ndatabase.driver=oracle.jdbc.driver.OracleDriver\nhibernate.dialect=org.hibernate.dialect.Oracle10gDialect\nhibernate.show_sql=true\nhibernate.connection.pool_size=10\ndatabase.url=jdbc\\:oracle\\:thin\\:@app11.corebusiness.com\\:2521\\:oracle1\ndatabase.username=Alleg\ndatabase.password=Alleg\n</code></pre>\n\n<p>The following is the list of jars: <a href=\"http://i.stack.imgur.com/18rKU.png\" rel=\"nofollow\">http://i.stack.imgur.com/18rKU.png</a></p>\n\n<p>I used to get \"error-creating-bean-sessionfactory -nested exception\" until i changed the order of my bean declarations in the spring-servlet code.</p>\n"},{"tags":["ruby-on-rails","spring","java-ee","web-applications","mobile"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":16,"score":-2,"question_id":13260251,"title":"Java (Spring MVC) vs Ruby on Rails","body":"<p>Please advice me on what would be a better option for developing a web/mobile application. What are the pros and cons of using Java (Spring/Hibernate) or Ruby on Rails for a web/mobile application ?? Also is there any way of merging both and creating a more reliable/scalable solution. I am also open to other suggestions.</p>\n\n<p>PS : I have got a sound experience developing web applications using Java/J2EE but I am ready to change if it is better.</p>\n"},{"tags":["java","eclipse","spring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13258797,"title":"Spring classpath issue in eclipse","body":"<p>I'm trying to set up a Spring application to run in eclipse for the first time. I'm running it at as a standalone java application. The app builds without any errors but when I go to execute it, I get a ClassNotFoundException with the following stack trace:</p>\n\n<pre><code>DataLoadService [Java Application]  \n    com.pikefin.services.DataLoadService at localhost:52871 \n        Thread [main] (Suspended (exception ClassNotFoundException))    \n            URLClassLoader$1.run() line: 217    \n            AccessController.doPrivileged(PrivilegedExceptionAction&lt;T&gt;, AccessControlContext) line: not available [native method]   \n            Launcher$AppClassLoader(URLClassLoader).findClass(String) line: 205 \n            Launcher$AppClassLoader(ClassLoader).loadClass(String, boolean) line: 321   \n            Launcher$AppClassLoader.loadClass(String, boolean) line: 294    \n            Launcher$AppClassLoader(ClassLoader).loadClass(String) line: 266    \n            ClassPathXmlApplicationContext(AbstractApplicationContext).&lt;init&gt;(ApplicationContext) line: 161 \n            ClassPathXmlApplicationContext(AbstractRefreshableApplicationContext).&lt;init&gt;(ApplicationContext) line: 90   \n            ClassPathXmlApplicationContext(AbstractRefreshableConfigApplicationContext).&lt;init&gt;(ApplicationContext) line: 59 \n            ClassPathXmlApplicationContext(AbstractXmlApplicationContext).&lt;init&gt;(ApplicationContext) line: 61   \n            ClassPathXmlApplicationContext.&lt;init&gt;(String[], boolean, ApplicationContext) line: 136  \n            ClassPathXmlApplicationContext.&lt;init&gt;(String) line: 83  \n            DataLoadService.main(String[]) line: 20 \n    /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/bin/java (Nov 6, 2012 1:14:23 PM)\n</code></pre>\n\n<p>It's happening on this line of code:</p>\n\n<pre><code>ApplicationContext context=new ClassPathXmlApplicationContext(\"classpath:spring.xml\");\n</code></pre>\n\n<p>spring.xml gets moved into the class/ folder during the build process so I tried adding the class folder to the launch configuration (see screenshot).</p>\n\n<p><img src=\"http://i.stack.imgur.com/LP70z.png\" alt=\"enter image description here\"></p>\n\n<p>I'm working with eclipse 3.7.2 and spring 3.1.1</p>\n"},{"tags":["spring","spring-mvc","jetty","http-status-code-404","url-mapping"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13247921,"title":"Spring MVC - No mapping found for HTTP request with URI","body":"<p>I'm aware that there are loads of questions on the topic but none of the solutions i found here worked for me.\nI'm using Spring with Jetty 6 so i don't have a web.xml file. The mapping for the spring dispatcher servlet is set to \"/\" in jetty's config</p>\n\n<p>dispatcher:</p>\n\n<pre><code>&lt;bean class=\"org.mortbay.jetty.servlet.ServletHolder\"&gt;\n    &lt;property name=\"name\" value=\"spring\" /&gt;\n    &lt;property name=\"servlet\"&gt;\n        &lt;bean class=\"org.springframework.web.servlet.DispatcherServlet\" /&gt;\n    &lt;/property&gt;\n    &lt;property name=\"initParameters\"&gt;\n        &lt;map&gt;\n            &lt;entry key=\"contextConfigLocation\" value=\"classpath:com/project/config/spring-servlet.xml\" /&gt;\n        &lt;/map&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>... mapping:</p>\n\n<pre><code>&lt;bean class=\"org.mortbay.jetty.servlet.ServletMapping\"&gt;\n    &lt;property name=\"servletName\" value=\"spring\"&gt;&lt;/property&gt;\n    &lt;property name=\"pathSpec\" value=\"/\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The spring-servlet.xml looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"...\" ...&gt;\n\n\n&lt;context:component-scan base-package=\"com.project.web\" /&gt;\n&lt;mvc:annotation-driven /&gt;\n\n&lt;bean\n    class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;property name=\"prefix\"&gt;\n        &lt;value&gt;/WEB-INF/pages/&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"suffix\"&gt;\n        &lt;value&gt;.jsp&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>And i have a simple controller called HelloController:</p>\n\n<pre><code>@Controller\npublic class HelloController {\n\n    @RequestMapping(method = RequestMethod.GET, value=\"/welcome\")\n    public String sayHello(ModelMap model){\n    model.addAttribute(\"message\", \"Spring 3 MVC Hello World\");\n    return \"hello\";\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Reading the logs it seem to work but i get the following error: </p>\n\n<p>No mapping found for HTTP request with URI [/WEB-INF/pages/hello.jsp] in DispatcherServlet with name 'spring'</p>\n\n<p>which i don't understand. it maps the \"/welcome\" to /WEB-INF/pages/hello.jsp but it still says page cannot be found, which is just there where it seems to look for it. I added the WEB-INF folder to the classpath but it's still the same. Do you have any idea why's that?</p>\n"},{"tags":["spring","jms","hornetq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13245806,"title":"Run two standalone HornetQ servers on same machine","body":"<p>How can i run two standalone hornetq servers on same machine? which configuration should be changed? (i.e. Which ports)? And how to connect their JNDI servers?</p>\n\n<p>My jndiTemplate bean (in applicationContext.xml) (Should i use two jndiTemplates for each server?):</p>\n\n<pre><code>&lt;bean id=\"jndiTemplate\" class=\"org.springframework.jndi.JndiTemplate\"&gt;\n    &lt;property name=\"environment\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"java.naming.factory.initial\"&gt;org.jnp.interfaces.NamingContextFactory&lt;/prop&gt;\n            &lt;prop key=\"java.naming.factory.url.pkgs\"&gt;org.jboss.naming:org.jnp.interfaces&lt;/prop&gt;\n            &lt;prop key=\"java.naming.provider.url\"&gt;jnp://localhost:1099&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring","servlets","spring-security","servlet-filters"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13258005,"title":"Spring Security Filter Mapping - Disable on certain Url Pattern","body":"<p>I have the following servlet definitions:</p>\n\n\n\n<pre><code>    &lt;servlet&gt;\n        &lt;servlet-name&gt;licenseGenService&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.context.support.HttpRequestHandlerServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;licenseGenService&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/remoting/licensing&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;!-- Restful API Servlet--&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;licensingRestService&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;\n            com.sun.jersey.spi.spring.container.servlet.SpringServlet\n        &lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;\n                    com.sun.jersey.config.property.packages\n            &lt;/param-name&gt;\n            &lt;param-value&gt;\n                com.mydomain.licensing.rest\n            &lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;licensingRestService&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>And then the following security filter:</p>\n\n<pre><code>    &lt;filter&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;filter-class&gt;\n            org.springframework.web.filter.DelegatingFilterProxy\n        &lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n</code></pre>\n\n<p>So based on what I have read, url patterns with <code>/*</code> are overwritten by those with explicit urls. This works fine for my servlets. The things is, I do not want basic authentication required for the <code>licenseGenService</code> servlet. How can I define the security filter to only apply to the REST servlet, and not the <code>licenseGenService</code> one?</p>\n"},{"tags":["java","ios","json","spring","backend"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13038678,"title":"Remoting from iOS to Java/Spring backend","body":"<p>In our application we have an Adobe Flex client that communicates to our Java/Spring backend via a facade (using AMF) that is exposed via Spring. </p>\n\n<p>Any recommendations on how I could leverage this facade to make remote calls from iOS? Note that I would prefer backend frameworks that would be reusable from other clients (Android, etc).</p>\n\n<p>I hear about JSON &amp; RESTful web services. Would there be a way to rather easily get existing facade services to be exposed as RESTFul web services that uses JSON for object serialization?</p>\n\n<p>Or would you recommend something different?</p>\n\n<p>Any information and/or pointers will be appreciated!</p>\n\n<p>Update:</p>\n\n<p>So we have one option so far for this: JSON requests and responses via Spring</p>\n\n<p>Anybody want to suggest any other ways?</p>\n"},{"tags":["spring","websphere","portlet","portal","dojox.grid.datagrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13258224,"title":"Spring portlets + inter portlet communication + dojox DataGrid + without submitting form","body":"<p>I am looking for some ideas for an effective solution for the use case in hand.</p>\n\n<p>Before jumping into the use-case let me tell you versions we are using.</p>\n\n<p>Spring portlets (v3.1.0.RC1) compliant with JSR 286.<br>\nWebSphere Portal 6.1.5\n<br>Dojo v1.3<br>\nJSTL 1.1</p>\n\n<p>Here below is the case:<br></p>\n\n<ol>\n<li><p>We have Portlet A (in A.war) and Portlet B (in B.war). Both the portlets are done using Spring Portlet MVC v3.1.0.RC1.</p></li>\n<li><p>Portlet A contain a set of search input fields when submitted, it gets data from backend system and renders the search results (a set of records having multiple rows) in the same portlet (Portlet A) using dojox.grid.DataGrid. However, when we click any record in the data grid, we need to send data (say idOfTheDataElement - basically a number) to the other Portlet B.</p></li>\n<li><p>We want to establish inter portlet communication from Portlet A to B in order to send the \"idOfTheDataElement\" for any record and Portlet B has some processing logic to execute on receiving the data.</p></li>\n</ol>\n\n<p><br>\nPossible options we have seen are the following:<br>\n1. Grab the idOfTheDataElement when the record is clicked and submit the Portlet A to invoke the processAction and then set the idOfTheDataElement as public render parameter.</p>\n\n<p>OR<br><br>\n2. Grab the idOfTheDataElement when the record is clicked and submit the Portlet A to invoke the processAction and then publish the event by means of portlet eventing.</p>\n\n<p>What we are looking for is, instead of submitting form (which invokes the processAction of Portlet A) which enables to set the render parameter or publish the event.. is there a way to accomplish the inter-portlet communication for this use case without submitting the portlet A?</p>\n\n<p>Any ideas that would help are appreciated.</p>\n\n<p>Thanks,\nUresh</p>\n"},{"tags":["java","spring","grails"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13254007,"title":"Can I build a grails project into a stand-alone jar and use it from a Spring application?","body":"<p>We are using a opensource grails project, we want to integrate it with our systems using message queues.</p>\n\n<p>We can add our code for the message queues to the grails project. But what we would prefer to do is get the grails project to build a stand-alone jar file that we can then use from our project. </p>\n\n<p>In our application we would want to initiate the hibernate/GORM layer of the opensource grails project, we don't need to the web layers as we are using messaging.</p>\n\n<p>Ideally we would like our project to be a Spring/Java, however if this not practical then we would use a grails project.</p>\n\n<p>Is any of this possible, or are they better ways to extend an existing grails project?</p>\n"},{"tags":["spring","configuration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13254779,"title":"How to import Java-config class into XML-config so that both contexts have beans?","body":"<p>I have a project where I need to bootstrap @Configuration java-config classes into the XML configuration.</p>\n\n<p>To do that, I'm reading that I also need to include the following bean definition (along with the bean definitions of the classes annotated with @Configuration).</p>\n\n<pre><code>&lt;bean class=\"org.springframework.config.java.process.ConfigurationPostProcessor\" /&gt;\n</code></pre>\n\n<p>But, I end up receiving the following error:</p>\n\n<pre><code>Caused by: java.lang.ClassNotFoundException: org.springframework.config.java.process.ConfigurationPostProcessor\n</code></pre>\n\n<p>I have to assume I'm missing a jar somewhere, but my various web searches hasn't resulted in an answer yet.  Any help would be greatly appreciated.  Thanks.</p>\n\n<p><strong>EDIT</strong>:  Evidently, I was reading old documentation, which is no longer current.  Let me back up.  My project contains older XML-based configuration.  The newer code is all using 'Java-config'.  With that said, the contexts are apparently completely separate.  I'd like to 'import' a java-config class into the XML configuration, so that both contexts have those particular beans.  Does anyone know how I can do that?</p>\n"},{"tags":["spring","exception","exception-handling","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13256780,"title":"How to obtain the 'reason'/cause for an AccessDeniedException in Spring Security?","body":"<p>We're using Spring Security 3.1.3-RELEASE with method-level security. It works perfectly.</p>\n\n<p>I'd like to log, and maybe show to the user, <strong>why</strong> he is getting denied access.</p>\n\n<p>Using a <code>org.springframework.security.web.access.AccessDeniedHandlerImpl</code> subclass, I can get a reference to the <code>org.springframework.security.access.AccessDeniedException</code> thrown, but I can't find a way to determine what caused it (eg, 'Missing role ROLE_ADMIN' or something to that effect).</p>\n\n<p>Am I missing something, or does it simply not exist?</p>\n"},{"tags":["ajax","spring","jaxb","spring-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":12883523,"title":"Spring3 Unmarshalling XML to Java","body":"<p>I am having trouble connecting all the pieces that would allow xml sent from an ajax client to be unmarshalled into Java objects.  I am using Jquery for the ajax client, Spring3, and JAXB.  Here are the key components:</p>\n\n<p><strong>Ajax Client</strong></p>\n\n<pre><code>        function checkForNewActivities(activities) {\n            $j.ajax({\n                url: \"upload/checkForNewActivities\",\n                type: \"POST\",\n                async: true, \n                dataType: \"xml\",\n                data: ({activities:activities}),\n                contentType: \"application/xml\",\n\n                beforeSend: function() {\n                    alert(\"sending ajax\");\n                },\n                complete: function() {\n                    alert(\"ajax sent\");\n                },\n                success: function(data) {\n                    alert(\"success\");\n                },\n                error: function(jqXHR, textStatus, errorThrown) {\n                    alert(textStatus + errorThrown);\n                }\n            });\n        }\n</code></pre>\n\n<p><strong>Spring Config</strong></p>\n\n<pre><code>&lt;bean id=\"marshallingConverter\" class=\"org.springframework.http.converter.xml.MarshallingHttpMessageConverter\"&gt;\n          &lt;property name=\"marshaller\" ref=\"jaxbMarshaller\" /&gt;\n          &lt;property name=\"unmarshaller\" ref=\"jaxbMarshaller\" /&gt;\n          &lt;property name=\"supportedMediaTypes\" value=\"application/xml\"/&gt;\n    &lt;/bean&gt;\n\n&lt;bean id=\"jaxbMarshaller\" class=\"org.springframework.oxm.jaxb.Jaxb2Marshaller\"&gt;\n    &lt;property name=\"classesToBeBound\"&gt;\n        &lt;list&gt;\n           a bunch of java classes\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>And here is the Spring Controller method that is the target:</p>\n\n<pre><code>  @RequestMapping(value=\"/checkForNewActivities\",headers=\"application/xml\", method=RequestMethod.POST)\n  public @ResponseBody String uploadMultipleWorkouts(@RequestBody String activities) {        \n      System.out.println(activities);\n      return \"\"; \n  }\n</code></pre>\n\n<p>With the headers=\"application/xml\" in the RequestMapping, this method never gets called.  If I remove the headers param, then the method is called and dumping the activities to the console shows the escaped xml.</p>\n\n<p>I am clearly missing how to connect this method to the spring config so that unmarshalling xml takes place.</p>\n"},{"tags":["spring","security","roles","rights","authority"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13220149,"title":"How do roles and rights translate to Spring Security?","body":"<p>In my applications I usually create three tables for access management. Roles, Rights and an association table that maps between Roles and Rights.</p>\n\n<p>I am trying to translate this approach to Spring security and after reading [this article][1] I thought I was on the right track. I created a custom AuthenticationProvider and implemented the <code>authenticate()</code> method like so:</p>\n\n<pre><code>@Override\npublic Authentication authenticate(Authentication authentication) throws AuthenticationException {\n    UserProfile profile = userProfileService.findByEmail(authentication.getPrincipal().toString());\n\n    if(profile == null){\n        throw new UsernameNotFoundException(String.format(\"Invalid credentials\", authentication.getPrincipal()));\n    }\n\n    String suppliedPasswordHash = DigestUtils.shaHex(authentication.getCredentials().toString());\n\n    if(!profile.getPasswordHash().equals(suppliedPasswordHash)){\n        throw new BadCredentialsException(\"Invalid credentials\");\n    }\n\n    UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(profile, null, profile.getAuthorities());\n\n    return token;\n}\n</code></pre>\n\n<p>The <code>profile.getAuthorities()</code> method creates a list of Rights (rights are wrapped in my own implementation of GrantedAuthority).  So, the UsernamePasswordAuthenticationToken object is created with this list. This is the UserProfile.getGrantedAuthorities() method that takes care of this:</p>\n\n<pre><code>public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n    Set&lt;ProduxAuthority&gt; authorities = new HashSet&lt;ProduxAuthority&gt;();\n    for (Role role : roles) {\n        for (Right right : role.getRights()) {\n            ProduxAuthority produxAuthority = new ProduxAuthority(right.getName());\n            authorities.add(produxAuthority);\n        }\n    }\n    return authorities;\n}\n</code></pre>\n\n<p>My question is whether this is a correct approach. I am getting the impression that I should stuff roles into GrantedAuthorities instead of rights, but I would like to use rights to secure methods and urls, because it gives me more fine grained control  over authorization. How would I accomplish this? And what is the difference between a ROLE and a PERMISSION in Spring? Do permissions map to rights and could I use hasPermission() to secure stuff bases on rights instead of roles? </p>\n"},{"tags":["java","mysql","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13256569,"title":"Hibernate issue: @OneToMany annotation returns duplicates","body":"<p>I am facing a problem with Hibernate (4.3.0) where as unidirectional @OneToMany returns duplicates.</p>\n\n<p>My database structure (MySQL with InnoDB) where as 'entry' table has a 1:N relationship with 'entry_address' table. The 'entry' table is the main table and 'entry_address' is a sub-table of 'entry' table.</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE IF NOT EXISTS `entry` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(500) NOT NULL,\n  `active` int(1) NOT NULL DEFAULT '0',\n  `modifiedTS` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,\n  `createdTS` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;\n\nINSERT INTO `entry` (`id`, `name`, `active`, `modifiedTS`, `createdTS`) VALUES\n(1, 'Test1', 0, '2012-11-05 13:41:03', '2012-11-01 10:11:22'),\n(2, 'Test2', 1, '2012-11-05 11:19:37', '2012-11-01 10:11:33'),\n(3, 'Test3', 1, '2012-11-05 11:19:37', '2012-11-01 10:11:44');\n\nCREATE TABLE IF NOT EXISTS `entry_address` (\n  `id` int(10) unsigned NOT NULL,\n  `precedence` int(1) NOT NULL DEFAULT '0',\n  `line` varchar(255) DEFAULT NULL,\n  `line2` varchar(255) DEFAULT NULL,\n  `street` varchar(255) DEFAULT NULL,\n  `street2` varchar(255) DEFAULT NULL,\n  `zip` int(5) DEFAULT NULL,\n  `city` varchar(255) DEFAULT NULL,\n  `country` varchar(255) DEFAULT NULL,\n  UNIQUE KEY `entry_address_uq` (`id`,`precedence`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nINSERT INTO `entry_address` (`id`, `precedence`, `line`, `line2`, `street`, `street2`, `zip`, `city`, `country`) VALUES\n(1, 0, 'Line4.1', 'Line4.2', 'Street4.1', 'Street4.2', 9488, 'Schellenberg', 'Liechtenstein'),\n(2, 10, 'Line1.1', 'Line1.2', 'Street1.1', 'Street1.2', 9492, 'Eschen', 'Liechtenstein'),\n(2, 20, 'Line2.1', 'Line2.2', 'Street2.1', 'Street2.2', 9490, 'Vaduz', 'Liechtenstein'),\n(2, 30, 'Line3.1', 'Line3.2', 'Street3.1', 'Street3.2', 9494, 'Schaan', 'Liechtenstein'),\n(3, 10, 'Line5.1', 'Line5.2', 'Street5.1', 'Street5.2', 9492, 'Eschen', 'Liechtenstein'),\n(3, 20, 'Line6.1', 'Line6.2', 'Street6.1', 'Street6.2', 9492, 'Eschen', 'Liechtenstein');\n\nALTER TABLE `entry_address`\n  ADD CONSTRAINT `entry_address_fk` FOREIGN KEY (`id`) REFERENCES `entry` (`id`);\n</code></pre>\n\n<p>Here's the minimal code of \"entry\" entity.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Collection;\nimport javax.persistence.*;\n\n@Entity\n@Table(name = \"entry\")\npublic class Entry {\n    @Id\n    @GeneratedValue\n    @Column(name = \"id\")\n    private Integer id;\n\n    @Column(name = \"name\")\n    private String name;\n\n    @OneToMany(fetch=FetchType.EAGER)\n    @JoinColumn(name = \"id\")\n    private Collection&lt;EntryAddress&gt; addresses;\n\n    @Override\n    public String toString() {\n        return String.format(\"Entry [id=%s, name=%s, addresses=%s]\", id, name, addresses);\n    }\n}\n</code></pre>\n\n<p>Here's the minimal code of \"entry_address\" entity:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.*;\n\n@Entity\n@Table(name = \"entry_address\")\npublic class EntryAddress {\n    @Id\n    @Column(name = \"id\")\n    private Integer id;\n\n    @Column(name = \"line\")\n    private String line;\n\n    @Override\n    public String toString() {\n        return String.format(\"EntryAddress [line=%s]\", line);\n    }\n}\n</code></pre>\n\n<p>This is the query done by Hibernate (looks good!):\nHibernate: select this_.id as id0_1_, this_.name as name0_1_, addresses2_.id as id0_3_, addresses2_.id as id1_3_, addresses2_.id as id1_0_, addresses2_.line as line1_0_ from entry this_ left outer join entry_address addresses2_ on this_.id=addresses2_.id</p>\n\n<p><img src=\"http://i.stack.imgur.com/26wP3.jpg\" alt=\"MySQL Output\"></p>\n\n<p>But if I run JUnit using:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Collection;\n\nimport junit.framework.Assert;\nimport li.pitschmann.transaction.dao.EntryDao;\nimport li.pitschmann.transaction.entity.Entry;\n\nimport org.junit.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests;\n\n@ContextConfiguration(locations={\"file:**/web-spring.xml\"})\npublic class EntryDaoTest extends AbstractTransactionalJUnit4SpringContextTests {\n    @Autowired\n    private EntryDao entryDao;\n\n    @Test\n    public void findAllEntries() {\n        Collection&lt;Entry&gt; entries = entryDao.findEntries();\n\n        Assert.assertNotNull(entries);\n\n        for (Entry e : entries) {\n            System.out.println(\"++: \" + e);\n        }\n        // Assert.assertEquals(3, entries.size());\n\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Collection;\n\nimport org.hibernate.SessionFactory;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport li.pitschmann.transaction.dao.EntryDao;\nimport li.pitschmann.transaction.entity.Entry;\n\npublic class EntryDaoImpl implements EntryDao {\n    private SessionFactory sessionFactory;\n\n    /**\n     * {@inheritDoc}\n     */\n    @SuppressWarnings(\"unchecked\")\n    @Transactional\n    public Collection&lt;Entry&gt; findEntries() {\n        return sessionFactory.getCurrentSession().createCriteria(Entry.class).list();\n    }\n\n    public void setSessionFactory(SessionFactory sessionFactory) {\n        this.sessionFactory = sessionFactory;\n    }\n}\n</code></pre>\n\n<p>Spring XML (most important part, Spring 3.1.2.RELEASE):</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n&lt;context:annotation-config /&gt;\n&lt;!-- MySQL DataSource --&gt;\n&lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\"&gt;\n    &lt;property name=\"driverClass\" value=\"com.mysql.jdbc.Driver\" /&gt;\n    &lt;property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/entry_db\" /&gt;\n    &lt;property name=\"user\" value=\"root\" /&gt;\n    &lt;property name=\"password\" value=\"\" /&gt;\n&lt;/bean&gt;\n&lt;!-- Session Factory --&gt;\n&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"packagesToScan\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;li.pitschmann.transaction.entity&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n&lt;!-- Transaction Manager --&gt;\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The console log is:</p>\n\n<pre><code>++: Entry [id=1, name=Test1, addresses=[EntryAddress [line=Line4.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line1.1], EntryAddress [line=Line1.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line1.1], EntryAddress [line=Line1.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line1.1], EntryAddress [line=Line1.1]]]\n++: Entry [id=3, name=Test3, addresses=[EntryAddress [line=Line5.1], EntryAddress [line=Line5.1]]]\n++: Entry [id=3, name=Test3, addresses=[EntryAddress [line=Line5.1], EntryAddress [line=Line5.1]]]\n</code></pre>\n\n<p>I also tried to use @OneToMany(fetch=FetchType.LAZY) instead of FetchType.EAGER - same issue with duplicate addresses.</p>\n\n<pre><code>++: Entry [id=1, name=Test1, addresses=[EntryAddress [line=Line4.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line1.1], EntryAddress [line=Line1.1]]]\n++: Entry [id=3, name=Test3, addresses=[EntryAddress [line=Line5.1], EntryAddress [line=Line5.1]]]\n</code></pre>\n\n<p><strong>Expectation</strong></p>\n\n<p>This is my expecation (3 entry objects with different addresses):</p>\n\n<pre><code>++: Entry [id=1, name=Test1, addresses=[EntryAddress [line=Line4.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line2.1], EntryAddress [line=Line3.1]]]\n++: Entry [id=3, name=Test3, addresses=[EntryAddress [line=Line5.1], EntryAddress [line=Line6.1]]]\n</code></pre>\n\n<p>Is there a bug in Hibernate or am I doing something wrong? Hope someone can help me to find the root cause?! Thank you :-)</p>\n"},{"tags":["java","spring","struts2","ibatis"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13000157,"title":"Measuring the performance of the website","body":"<p>I Have been working on a web based project which is made up of technologies like struts2,spring2.6 and ibatis with servlets , Now the issuse is that the outcome of this project is a website means on hitting the starting url its start but the website pages are too slow means to switch from one jsp to another it takes much time, Now I want to measure the performance and want to optimize it so that it can be a fast a little bit, Please advise which tools will help me to achieve this..!</p>\n"},{"tags":["spring","wso2","identity","saml-2.0","wso2carbon"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12853448,"title":"How can I send role/permission info from project to identity server?","body":"<p>I'm working on a wso2 webapp project. And I use spring and saml conf on it. I want to sent user's role and permission from wso2 project to identity server.\nHow can I send role/permission info from project to identity server?</p>\n\n<p>Best Regards ,\nEzgi</p>\n"},{"tags":["spring","nhibernate-mapping","spring-transactions"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":9,"score":1,"question_id":13256760,"title":"Transaction management with Spring and hibernate, using isolation_serializable","body":"<p>I am using Spring transaction management to control a application with hibernate, it uses two instance of threads to access concurrency database and modify one table. It is ensuring that the values are conserved. \nThe table before is:</p>\n\n<pre><code>   quantidade_livro_id | quantidade | livro_id | tt \n  ---------------------+------------+----------+----\n                     7 |        100 |        3 | as \n                     5 |        100 |        1 | as\n                     6 |        100 |        2 | as\n</code></pre>\n\n<p>And the table after: </p>\n\n<pre><code>   quantidade_livro_id | quantidade | livro_id | tt \n  ---------------------+------------+----------+----\n               7 |        100 |        3 | as\n               5 |         50 |        1 | as\n               6 |        150 |        2 | as\n</code></pre>\n\n<p>The main code start two threads: </p>\n\n<pre><code>        Servico t1 = new Servico();\n        Servico t2 = new Servico();\n        //transaction 1\n        t1.setId1(5);\n        t1.setValorTransacao(50);\n        t1.setId2(6);\n        //transaction 2     \n        t2.setId1(5);   \n        t2.setValorTransacao(100);\n        t2.setId2(7);   \n\n        //start transaction 1\n        t1.start();\n        //start transaction 2\n        t2.start(); \n</code></pre>\n\n<p>The class Servico is: </p>\n\n<pre><code>public void run() {\n        executa();\n    }\n\n\npublic void executa(){\n    ApplicationContext appContext = \n            new ClassPathXmlApplicationContext(\"spring/config/BeanLocations.xml\");\n\n    livroQuantidadeBo = (LivroQuantBo)appContext.getBean(\"livroQuantBoProxy\");\n    try {\n        livroQuantidadeBo.transacao(getId1(),getValorTransacao(),getId2());\n    } catch (RuntimeException e) {\n        // TODO Auto-generated catch block\n        System.out.println(e);\n    }\n</code></pre>\n\n<p>The class LivroQuantBoImpl have the method: </p>\n\n<pre><code>public void transacao(int id1,int valorTransferencia, int id2) throws RuntimeException{\n    LivroQuantidade livroQ = livroQuantDao.find(id1);\n    LivroQuantidade livroQ2 = livroQuantDao.find(id2);\n    if(livroQ.getQuantidade() - valorTransferencia &gt;= 0){\n        livroQ.setQuantidade(livroQ.getQuantidade() - valorTransferencia);\n        livroQ2.setQuantidade(valorTransferencia + livroQ2.getQuantidade());\n        livroQuantDao.update(livroQ);\n        livroQuantDao.update(livroQ2);\n    }\n}\n</code></pre>\n\n<p>And my Spring .conf is :</p>\n\n<pre><code>    &lt;!--  DATASOURCE --&gt;  \n    &lt;bean \n    class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"location\"&gt;\n            &lt;value&gt;properties/database.properties&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"dataSource\" \n             class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"${jdbc.driverClassName}\" /&gt;\n        &lt;property name=\"url\" value=\"${jdbc.url}\" /&gt;\n        &lt;property name=\"username\" value=\"${jdbc.username}\" /&gt;\n        &lt;property name=\"password\" value=\"${jdbc.password}\" /&gt;\n    &lt;/bean&gt;\n\n\n    &lt;!-- HIBERNATE --&gt;\n\n    &lt;!-- Hibernate session factory --&gt;\n    &lt;bean id=\"sessionFactory\" \n         class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n\n        &lt;property name=\"dataSource\"&gt;\n          &lt;ref bean=\"dataSource\"/&gt;\n        &lt;/property&gt;\n\n        &lt;property name=\"hibernateProperties\"&gt;\n           &lt;props&gt;\n             &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/prop&gt;\n             &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n           &lt;/props&gt;\n         &lt;/property&gt;\n\n         &lt;property name=\"mappingResources\"&gt;\n        &lt;list&gt;\n               &lt;value&gt;hibernate/Livro.hbm.xml&lt;/value&gt;\n               &lt;value&gt;hibernate/LivroQuantidade.hbm.xml&lt;/value&gt;\n        &lt;/list&gt;\n          &lt;/property&gt;   \n\n        &lt;/bean&gt;\n\n    &lt;!-- TRANSAÇÃO  --&gt;\n\n    &lt;bean id=\"transactionInterceptor\" class=\"org.springframework.transaction.interceptor.TransactionInterceptor\"&gt;\n        &lt;property name=\"transactionManager\" ref=\"transactionManager\" /&gt;\n        &lt;property name=\"transactionAttributes\"&gt;\n        &lt;props&gt;\n        &lt;prop key=\"save\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;\n        &lt;prop key=\"transacao\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;\n        &lt;prop key=\"transacao\"&gt;ISOLATION_SERIALIZABLE&lt;/prop&gt;\n        &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n    &lt;/bean&gt;\n\n\n    &lt;!-- BEANS --&gt;\n        &lt;!-- Livro business object --&gt;\n       &lt;bean id=\"livroBo\" class=\"br.com.spring.bo.LivroBoImpl\" &gt;\n            &lt;property name=\"livroDao\" ref=\"livroDao\" /&gt;\n            &lt;property name=\"livroQuantBo\" ref=\"livroQuantBo\" /&gt;\n       &lt;/bean&gt;\n\n       &lt;!-- Livro Data Access Object --&gt;\n       &lt;bean id=\"livroDao\" class=\"br.com.spring.dao.LivroDaoImpl\" &gt;\n            &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"&gt;&lt;/property&gt;\n       &lt;/bean&gt;\n\n        &lt;!-- ProductQoh business object --&gt;\n       &lt;bean id=\"livroQuantBo\" class=\"br.com.spring.bo.LivroQuantBoImpl\" &gt;\n            &lt;property name=\"livroQuantDao\" ref=\"livroQuantDao\" /&gt;\n       &lt;/bean&gt;\n\n       &lt;!-- ProductQoh Data Access Object --&gt;\n       &lt;bean id=\"livroQuantDao\" class=\"br.com.spring.dao.LivroQuantDaoImpl\" &gt;\n            &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"&gt;&lt;/property&gt;\n       &lt;/bean&gt;\n\n     &lt;!-- PROXY --&gt;\n\n       &lt;bean id=\"livroBoProxy\"\n            class=\"org.springframework.aop.framework.ProxyFactoryBean\"&gt;\n            &lt;property name=\"target\" ref=\"livroBo\" /&gt;\n            &lt;property name=\"interceptorNames\"&gt;\n                &lt;list&gt;\n                    &lt;value&gt;transactionInterceptor&lt;/value&gt;\n                &lt;/list&gt;\n            &lt;/property&gt;\n       &lt;/bean&gt;\n\n        &lt;bean id=\"livroQuantBoProxy\"\n            class=\"org.springframework.aop.framework.ProxyFactoryBean\"&gt;\n            &lt;property name=\"target\" ref=\"livroQuantBo\" /&gt;\n            &lt;property name=\"interceptorNames\"&gt;\n                &lt;list&gt;\n                    &lt;value&gt;transactionInterceptor&lt;/value&gt;\n                &lt;/list&gt;\n            &lt;/property&gt;\n       &lt;/bean&gt;\n</code></pre>\n\n<p>And it's doing this runtime exception: </p>\n\n<pre><code> Hibernate: select livroquant0_.quantidade_livro_id as quantidade1_2_, livroquant0_.quantidade as quantidade2_, livroquant0_.livro_id as livro3_2_ from springhibernate2.quantidadeLivro livroquant0_ where livroquant0_.quantidade_livro_id=?\n Hibernate: select livroquant0_.quantidade_livro_id as quantidade1_3_, livroquant0_.quantidade as quantidade3_, livroquant0_.livro_id as livro3_3_ from springhibernate2.quantidadeLivro livroquant0_ where livroquant0_.quantidade_livro_id=?\n Hibernate: select livroquant0_.quantidade_livro_id as quantidade1_3_, livroquant0_.quantidade as quantidade3_, livroquant0_.livro_id as livro3_3_ from springhibernate2.quantidadeLivro livroquant0_ where livroquant0_.quantidade_livro_id=?\n Hibernate: select livroquant0_.quantidade_livro_id as quantidade1_2_, livroquant0_.quantidade as quantidade2_, livroquant0_.livro_id as livro3_2_ from springhibernate2.quantidadeLivro livroquant0_ where livroquant0_.quantidade_livro_id=?\n Hibernate: update springhibernate2.quantidadeLivro set quantidade=?, livro_id=? where quantidade_livro_id=?\n Hibernate: update springhibernate2.quantidadeLivro set quantidade=?, livro_id=? where quantidade_livro_id=?\n Hibernate: update springhibernate2.quantidadeLivro set quantidade=?, livro_id=? where quantidade_livro_id=?\n Hibernate: update springhibernate2.quantidadeLivro set quantidade=?, livro_id=? where quantidade_livro_id=?\n Nov 6, 2012 3:02:49 PM org.hibernate.util.JDBCExceptionReporter logExceptions\n WARNING: SQL Error: 0, SQLState: 40001\n Nov 6, 2012 3:02:49 PM org.hibernate.util.JDBCExceptionReporter logExceptions\n SEVERE: Batch entry 0 update springhibernate2.quantidadeLivro set quantidade='0', livro_id='1' where quantidade_livro_id='5' was aborted.  Call getNextException to see the cause.\n Nov 6, 2012 3:02:49 PM org.hibernate.util.JDBCExceptionReporter logExceptions\n WARNING: SQL Error: 0, SQLState: 40001\n Nov 6, 2012 3:02:49 PM org.hibernate.util.JDBCExceptionReporter logExceptions\n SEVERE: ERROR: could not serialize access due to concurrent update\n Nov 6, 2012 3:02:49 PM org.hibernate.event.def.AbstractFlushingEventListener performExecutions\n SEVERE: Could not synchronize database state with session\n org.hibernate.exception.LockAcquisitionException: Could not execute JDBC batch update\n     at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:82)\n     at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)\n     at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:254)\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:237)\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:142)\n     at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\n     at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\n     at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\n     at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\n     at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\n     at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)\n     at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)\n     at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)\n     at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)\n     at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)\n     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n     at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n     at $Proxy0.transacao(Unknown Source)\n     at br.com.spring.service.Servico.executa(Servico.java:29)\n     at br.com.spring.service.Servico.run(Servico.java:19)\n  Caused by: java.sql.BatchUpdateException: Batch entry 0 update springhibernate2.quantidadeLivro set quantidade='0', livro_id='1' where quantidade_livro_id='5' was aborted.  Call getNextException to see the cause.\nat org.postgresql.jdbc2.AbstractJdbc2Statement$BatchResultHandler.handleError(AbstractJdbc2Statement.java:2621)\nat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1837)\nat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:407)\nat org.postgresql.jdbc2.AbstractJdbc2Statement.executeBatch(AbstractJdbc2Statement.java:2754)\nat org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\nat org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:247)\n... 17 more\n   org.springframework.dao.CannotAcquireLockException: Could not execute JDBC batch update; SQL [update springhibernate2.quantidadeLivro set quantidade=?, livro_id=? where quantidade_livro_id=?]; nested exception is org.hibernate.exception.LockAcquisitionException: Could not execute JDBC batch update\n</code></pre>\n\n<p>What is wrong? </p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13256406,"title":"What's the harm to make a STATIC method in service layer -- Spring 3","body":"<p>I know it is not a best design but just a thought from a Spring newbie.</p>\n\n<p>Now we can easily <code>autowire</code> any service method to each other conveniently in Spring framework. But What is the disadvantage to create a static factory method of the service class and call it everywhere?</p>\n\n<p>It's pretty common like this:</p>\n\n<pre><code>@Autowired\nCustomerService customerService;\n\n....\nAccountDetail ad = customerService.getAccountDetail(accountId, type);\n</code></pre>\n\n<p>But this should work too:</p>\n\n<pre><code>AccountDetail ad = CustomerService.getAccountDetail(accountId, type); //if we make getAccountDetail(String, String) static\n</code></pre>\n\n<p>So why there is a design like autowire? It looks fancy and really cool, but the work behind this is still create one service bean instance on another service object.</p>\n\n<p>Seriously while Spring is all over the market so many posts and articles are talking about pros &amp; renovations. But is it guaranteeing better performance(like using autowire instead of static)?</p>\n\n<p>Hope this is not a stupid question, but it confuses me sometimes.</p>\n"},{"tags":["java","spring","jquery-ajax","exception-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13252315,"title":"How to retrieve descriptive message from Spring response.sendError(...) on user side?","body":"<p>I have an exception handler defined as following in a Spring controller:</p>\n\n<pre><code>@ExceptionHandler(Customized4ExceptionHandler.class)\npublic void handleCustomized4Exception(\n    Customized4ExceptionHandler ex,\n    HttpServletRequest request,\n    HttpServletResponse response) throws IOException {\n\n        response.sendError(HttpStatus.EXPECTATION_FAILED.value(),\n        \"zzzzzzz\");\n\n}\n</code></pre>\n\n<p>When the error is triggered, I get the following on the user side:</p>\n\n<p><img src=\"http://i.stack.imgur.com/MzYjY.jpg\" alt=\"enter image description here\"></p>\n\n<p>The error code is correct, but the \"zzzzzzz\" descriptive message is not displayed. How can I display it on the user side?</p>\n\n<p>My Javascript is:</p>\n\n<pre><code>$.ajax({\n    type: 'GET',\n    url:  prefix + \"/throwCustomized4ExceptionHandler\",\n    dataType: 'json',\n    async: true,\n    success: function(result) {\n        alert('Unexpected success !!!');\n    },\n    error: function(jqXHR, textStatus, errorThrown) {\n        alert(jqXHR.status + \" \"\n                   + textStatus + \" \"\n               + errorThrown + \" !\");\n    }\n});\n</code></pre>\n"},{"tags":["java","spring","environment-variables"],"answer_count":4,"favorite_count":4,"up_vote_count":11,"down_vote_count":0,"view_count":11442,"score":11,"question_id":3965446,"title":"how to read System environment variable in Spring applicationContext","body":"<p>How to read the <code>system environment variable</code> in the application context?</p>\n\n<p>I want something like :</p>\n\n<pre><code>&lt;util:properties id=\"dbProperties\"\n        location=\"classpath:config_DEV/db.properties\" /&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;util:properties id=\"dbProperties\"\n        location=\"classpath:config_QA/db.properties\" /&gt;\n</code></pre>\n\n<p>depending on the environement.</p>\n\n<p>Can I have something like this in my application Context? </p>\n\n<pre><code>&lt;util:properties id=\"dbProperties\"\n        location=\"classpath:config_${systemProperties.env}/db.properties\" /&gt;\n</code></pre>\n\n<p>where the actual val is set based on the SYSTEM ENVIRONMENT VARIABLE</p>\n\n<p>I'm using Spring 3.0</p>\n"},{"tags":["java","spring","grails","frameworks","wicket"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":89,"score":0,"question_id":13253534,"title":"Java Web App Development Framework Choice","body":"<p>My development team is developing a new enterprise level web application - it is partly a port of an existing asp.net application but with new functionality too. It is large and has a large database.</p>\n\n<p>The project must be developed in Java and hibernate which must interact with Oracle DB initially and must deploy to WebLogic server. The project has very tight deadlines. The development team has intermediate-senior java, oracle experience. The UX/Look &amp; feel are important.</p>\n\n<p>I suspect to ensure good web application architecture, rapid application development and a fair degree of convention in the development, we must use a web development framework.</p>\n\n<p>Further, there will likely be need that this app supports mobile apps (not web apps for mobile browsers) in future.</p>\n\n<p>Our options are: Wicket, Spring MVC and Grails.</p>\n\n<p>Which framework should we use given the parameters above?</p>\n\n<p>This is not a \"which framework is best question\", it is which of the above 3 frameworks is better for a team with:</p>\n\n<ul>\n<li>intermediate-senior java experience</li>\n<li>no java web framework experience</li>\n<li>supports rad given the tight deadlines</li>\n<li>will offer a good application architecture and conventions</li>\n<li>support mobile apps in future</li>\n</ul>\n\n<p>I hope that java developer with experience of these frameworks can give good input here to make an effective decision.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["ajax","spring","hibernate","jsp","jackson"],"answer_count":2,"favorite_count":7,"up_vote_count":8,"down_vote_count":0,"view_count":1300,"score":8,"question_id":11856005,"title":"Returning a java.util.List from a Spring MVC controller via Ajax using Jackson","body":"<p>Based on <a href=\"http://stackoverflow.com/q/11777153/1391249\">my question</a> posted a few days ago, I realized that <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/SimpleFormController.html\" rel=\"nofollow\"><code>SimpleFormController</code></a> is inappropriate for handling Ajax requests. Therefore, I'm migrating my application towards annotated controllers.</p>\n\n<p>I'm trying to return a <code>java.util.List</code> from Oracle database using Spring MVC 3.0.2 with Hibernate via Ajax using <a href=\"http://jackson.codehaus.org/1.9.8/jackson-all-1.9.8.jar\" rel=\"nofollow\">Jackson 1.9.8</a> (its download <a href=\"http://wiki.fasterxml.com/JacksonDownload\" rel=\"nofollow\">page</a>) but I haven't yet worked with JSON in any technology. I have read up some tutorials/articles but I couldn't get the idea of how to return such complex data structures and parse them using JSON in Spring. I'm trying to learn JSON-like concepts first.</p>\n\n<p>What basically I'm trying is when a country is selected from a country select box, the states corresponding to that country should be populated from the database via Ajax. I don't have precise idea about how to return a <code>java.util.List</code> over an Ajax response, how to parse it and again use it in Java code. I'm only upto the following level.</p>\n\n<p>JS code.</p>\n\n<pre><code>function getStates(countryId)\n{\n    $.ajax({\n        datatype:\"json\",\n        type: \"POST\",\n        url: \"/wagafashion/ajax/TempAjax.htm\",\n        data: \"countryId=\" + countryId,\n\n        success: function(response)\n        {\n            $('#msg').html(response);\n            $('#stateList').val('');\n        },\n        error: function(e)\n        {\n            alert('Error: ' + e);\n        }\n    });\n}\n</code></pre>\n\n<p>The method in the Spring controller class which is invoked when the Ajax request is made on the <code>onchange</code> event of the country select box.</p>\n\n<pre><code>@RequestMapping(method=RequestMethod.POST, value=\"ajax/TempAjax\")\npublic @ResponseBody List&lt;StateTable&gt; getStateList(@ModelAttribute(\"tempBean\") TempBean tempBean, BindingResult error, Map model, HttpServletRequest request, HttpServletResponse response)\n{\n    Session session=NewHibernateUtil.getSessionFactory().getCurrentSession();\n    session.beginTransaction();\n    List&lt;StateTable&gt;list=session.createQuery(\"from StateTable where country.countryId=:countryId order by stateId\").setParameter(\"countryId\", new BigDecimal(request.getParameter(\"countryId\"))).list();\n\n    session.flush();\n    session.getTransaction().commit();\n    return list;\n}\n</code></pre>\n\n<p>The state select box I need to populate with the list of states returned by the Ajax response using a <code>&lt;c:forEach&gt;&lt;/c:forEach&gt;</code> loop of EL.</p>\n\n<pre><code>&lt;form:select path=\"cmbState\" class=\"validate[required] text-input tooltip\" title=\"Mandatory select field.\"&gt;\n    &lt;form:option value=\"\"&gt;Select&lt;/form:option&gt;\n        &lt;c:forEach items=\"${stateList}\" var=\"row\"&gt;\n            &lt;c:choose&gt;\n                &lt;c:when test=\"${row.stateId==param['stateId'] and deselectCombo!=1}\"&gt;\n                    &lt;form:option value=\"${row.stateId}\" selected=\"selected\"&gt;${row.stateName}&lt;/form:option&gt;\n                &lt;/c:when&gt;\n                &lt;c:otherwise&gt;\n                    &lt;form:option value=\"${row.stateId}\"&gt;${row.stateName}&lt;/form:option&gt;\n                &lt;/c:otherwise&gt;\n            &lt;/c:choose&gt;\n        &lt;/c:forEach&gt;\n    &lt;/form:select&gt;\n\n    &lt;font style=\"color: red\"&gt;&lt;form:errors path=\"stateId\"/&gt;&lt;/font&gt;&lt;br/&gt;\n</code></pre>\n\n<p>I could only make Ajax request and response successfully. Nothing more I could understand from those tutorials found over the internet. More precisely, how can I use the Ajax response in the <code>items</code> attribute of the preceding <code>&lt;c:forEach&gt;&lt;c:forEach&gt;</code> loop such as <code>items=\"${stateList}\"</code>? </p>\n\n<p>Could you give me some hint/idea how can I return a list of data and use it in the preceding loop to populate the state select box? Could you please lead me some steps ahead from here?</p>\n\n<p>I'm using NetBeans 6.9.1 (not Eclipse). In some tutorials about Marvan projects in Eclipse, it was mentioned that the <code>pom.xml</code> file is required to configure to include <code>&lt;dependencies&gt;&lt;/dependencies&gt;</code> (Jackson dependency). There is no such thing like <code>pom.xml</code> in my project in NetBeans. Is it required to configure somewhere in some xml file in NetBeans such as the one mentioned <a href=\"http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/\" rel=\"nofollow\">here</a>?</p>\n"},{"tags":["spring","multiple","schedule","crontrigger"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13255644,"title":"Spring 3.0.7 CronTrigger executes task multiple times when triggered","body":"<p>Okay I've looked through everything I can find and haven't found an answer to my issue.  A couple items were close but not close enough. I have a Spring 3.0.7 based web app running in Tomcat 7.  In the applicationContext.xml I have:</p>\n\n<pre><code>&lt;task:scheduler id=\"scheduledReportsScheduler\" pool-size=\"1\"/&gt; \n&lt;task:scheduled-tasks scheduler=\"scheduledReportsScheduler\"&gt; \n        &lt;task:scheduled ref=\"scheduledReportsQueuer\" method=\"process\" cron=\"0 */1 * * * *\"/&gt; \n&lt;/task:scheduled-tasks&gt;\n&lt;bean id=\"scheduledReportsQueuer\" class=\"com.foo.scheduledServices.ScheduledReportsQueuerService\"&gt;&lt;/bean&gt;\n</code></pre>\n\n<p>This executes my ScheduledReportsQueuerService class once every minute.  That works fine. Then inside of that class I check some database tables and try to schedule tasks based on a CronTrigger if they haven't already been scheduled:</p>\n\n<pre><code>if(!_workers.containsKey(schedule.getRptScheduleId())){\n    _logger.debug(Thread.currentThread().getName() + \" Creating and scheduling ScheduledReportQueuerWorker for scheduled report ID: \"+schedule.getRptScheduleId()+\"(\"+schedule.getReportName()+\") \"+schedule.getCronPattern());\n    ScheduledReportQueuerWorker newWorker = new ScheduledReportQueuerWorker(schedule);\n    newWorker.setRptRequestDAO(getRptRequestDao());\n    newWorker.setRptScheduleDAO(getRptScheduleDao());\n    _workers.put(schedule.getRptScheduleId(), newWorker);\n    ScheduledFuture&lt;?&gt; newFuture = _scheduler.schedule(newWorker, new CronTrigger(schedule.getCronPattern()));\n    _futures.put(schedule.getRptScheduleId(), newFuture);\n}\n\nprivate ConcurrentTaskScheduler _scheduler;\n</code></pre>\n\n<p>This also seems to work as the new tasks (newWorker above) are executed.  The issue is they are getting executed multiple times at the correct trigger time. For instance if a new task has a cron pattern of '* */2 * * * *' it should execute once every 2 minutes. Instead what is happening is the task is getting executed 50-60 times in a row every 2 minutes.</p>\n\n<p>This is driving me nuts any help you can give would be great.</p>\n"},{"tags":["spring","jax-rs"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":196,"score":2,"question_id":11019866,"title":"Spring java configuration doesn't find a bean which has been created through context:component-scan","body":"<p>I have so far mixed xml and java configurations with very good success, but there is a use case which seems not to work.\nI let spring configure my JAX-RS resources using component scan and they are correctly resolved:</p>\n\n<pre><code>&lt;context:component-scan\n    base-package=\"&lt;my packages&gt;\"&gt;\n    &lt;context:include-filter type=\"annotation\"\n        expression=\"javax.ws.rs.Path\" /&gt;\n...\n</code></pre>\n\n<p>But if I try to call one of those classes in my java config:</p>\n\n<pre><code>HttpInvokerServiceExporter exp = new HttpInvokerServiceExporter();\nexp.setService(context.getBean(Users.class));\n</code></pre>\n\n<p>I get this error:\nNo unique bean of type [com.gecod.allianz.arco.web.restresources.Users] is defined: expected single bean but found 0: </p>\n\n<p>One solution could be to declare JAX-RS bean in xml or java configuration, but this way Resteasy doesn't recognize them as JAX-RS resources.</p>\n\n<p>I think I have a race condition, any hints?</p>\n"},{"tags":["web-services","spring","cxf","jboss7.x"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":13022968,"title":"How to disable scanning @WebService annotations in JBoss AS 7?","body":"<p>I have web services developed using Spring+ApacheCXF and I need tod eploy them on JBoss AS7.\nThey are being deployed by CXFServlet properly.</p>\n\n<p>But JBoss AS7 also deploying them by scanning @WebService annotations(as expected without Spring Injection).</p>\n\n<p>How to disable scanning @WebService annotations in JBoss AS 7?</p>\n\n<p>PS: I am deploying as a .war file.</p>\n\n<p>PS PS: \nMy current cxf webservices are being deployed properly. But JBoss AS7 also trying to scan @WebService classes and deploying them also(without dependencies injected).I am looking for a way to turn of JBossAS7's scanning for @WebService classes.</p>\n"},{"tags":["database","spring","hibernate","spring-mvc","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13254715,"title":"Authentication using Spring 3 and Hibernate 3 (annotation based)","body":"<p>My application is based on Spring 3, Hibernate 3, MySQL. I read the Spring Security document and learnt that I can implement Authentication as given below,</p>\n\n<pre><code>&lt;authentication-manager&gt;\n   &lt;authentication-provider&gt;\n    &lt;jdbc-user-service data-source-ref=\"dataSource\"\n\n       users-by-username-query=\"\n          select username,password, enabled \n          from users where username=?\" \n\n       authorities-by-username-query=\"\n          select u.username, ur.authority from users u, user_roles ur \n          where u.user_id = ur.user_id and u.username =?  \" \n\n    /&gt;\n   &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p>I understood above part but my concern is, in my application user table doesn't only store the userName, password and enabled field. It also stores first and last name, emailID, phone etc. On successful authentication, I want next jsp to populate all user details automatically and not ask user the same information which it will ask to non-regirstered user.</p>\n\n<ol>\n<li>I want to use annotation based configuration and not xml based (unlike\nmentioned in spring 2.5 examples)</li>\n<li>spring document doesnt use hibernate for security. Should i use\nhibernate or jdbc-user-service? if hibernate then how?</li>\n<li>I saw couple of examples use customized UserService. Is that I need\nto do as well?</li>\n</ol>\n\n<p>Can someone kindly advice with good examples? any references to other posts will help too.</p>\n"},{"tags":["spring","mvc","maven","project","cloudfoundry"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12453505,"title":"Spring Template Project Now Working with Cloud Foundry Server","body":"<p>Hope someone could help me solve my problem. I'm currently trying to create a spring mvc project using STS tool.\nSo I created one using the Spring Template Project provided by STS. I tried to run it using tomcat server and it's doing fine. But when I tried using the VMare Cloud Foundry Server, it is not working anymore. I'm having this kind of error: </p>\n\n<pre><code>org.apache.jasper.JasperException: java.lang.NullPointerException\norg.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:538)\norg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:370)\norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\norg.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)\norg.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)\norg.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\norg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:617)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n</code></pre>\n\n<p>I would appreciate any help!</p>\n\n<p>Thanks!</p>\n"},{"tags":["spring","hibernate","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":13078798,"title":"\"No Session found for current thread\" with Spring3+Hibernate4 using JTA TransactionManager","body":"<p>I am trying to do a migration from </p>\n\n<p>spring 1.2.9 with hibernate 3.2.0.ga </p>\n\n<p>to </p>\n\n<p>spring 3.1.1.RELEASE with hibernate 4.0.1.Final</p>\n\n<p>Most of the <strong>bean wiring are done with xml</strong> instead of annotation.  I have done the necessary changes as well as unit testing for dao, service and controller objects before deployment to ensure the compatibility of the existing spring configuration.</p>\n\n<p>When I deploy to JBoss AS 7.1.1.Final, I get \"No Session found for current thread\".  I have been looking for answer through this forum and spring and hibernate documentation, and I still not able to find a solution that is applicable to my problem.</p>\n\n<p>Here is the hibernate exception logs</p>\n\n<pre><code>&gt; 06:18:25,703 ERROR [com.test.customer.dao.InvoicingInfoDAOImpl] (http--12\n7.0.0.1-8080-1) selectBillingInfoIdById:Runtime error.: org.hibernate.HibernateE\nxception: **No Session found for current thread**\n        at org.springframework.orm.hibernate4.SpringSessionContext.currentSessio\nn(SpringSessionContext.java:97) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFa\nctoryImpl.java:883) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]\n        at com.test.customer.dao.InvoicingInfoDAOImpl.selectBillingInfoBy\nId(InvoicingInfoDAOImpl.java:58) [classes:]\n        at com.test.customer.services.CustomerServiceImpl.getBillingInfo(\nCustomerServiceImpl.java:535) [classes:]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1\n.6.0_25]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39) [rt.jar:1.6.0_25]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25) [rt.jar:1.6.0_25]\n        at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_25]\n        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflecti\non(AopUtils.java:318) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJo\ninpoint(ReflectiveMethodInvocation.java:183) [spring-aop-3.1.1.RELEASE.jar:3.1.1\n.RELEASE]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(\nReflectiveMethodInvocation.java:150) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE\n]\n        at org.springframework.transaction.interceptor.TransactionInterceptor.in\nvoke(TransactionInterceptor.java:110) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE\n]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(\nReflectiveMethodInvocation.java:172) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE\n]\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynami\ncAopProxy.java:202) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at $Proxy22.getBillingInfo(Unknown Source)      at com.test.custo\nmer.CustomerController.getBillingInfo(CustomerController.java:205) [classes:]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1\n.6.0_25]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39) [rt.jar:1.6.0_25]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25) [rt.jar:1.6.0_25]\n        at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_25]\n        at org.springframework.web.method.support.InvocableHandlerMethod.invoke(\nInvocableHandlerMethod.java:213) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeF\norRequest(InvocableHandlerMethod.java:126) [spring-web-3.1.1.RELEASE.jar:3.1.1.R\nELEASE]\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocabl\neHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96) [spring-we\nbmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingH\nandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617) [spring\n-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingH\nandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578) [spring-webm\nvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapt\ner.handle(AbstractHandlerMethodAdapter.java:80) [spring-webmvc-3.1.1.RELEASE.jar\n:3.1.1.RELEASE]\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(Dispatch\nerServlet.java:923) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.web.servlet.DispatcherServlet.doService(Dispatche\nrServlet.java:852) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(Frame\nworkServlet.java:882) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServ\nlet.java:789) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:754) [jboss-s\nervlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-s\nervlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl\nicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF\nilterChain.java:248) [jbossweb-7.0.13.Final.jar:]\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV\nalve.java:275) [jbossweb-7.0.13.Final.jar:]\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV\nalve.java:161) [jbossweb-7.0.13.Final.jar:]\n        at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(Secu\nrityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]\n</code></pre>\n\n<p>Here is the spring configuration for session factory and transaction manager (it is using jta here)</p>\n\n<pre><code>&gt; &lt;!-- Configuration of Hibernate SessionFactory --&gt;\n    &lt;bean id=\"sessionFactory\"\n        class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\"&gt;\n            &lt;ref bean=\"csvliteDataSource\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;ref bean=\"csvliteHibernateProperties\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"mappingResources\"&gt;\n            &lt;list&gt;\n                &lt;!-- Customer Domain Mapping --&gt;\n                &lt;value&gt;com/test/customer/domain/InvoicingInfo.hbm.xml&lt;/value&gt;\n                &lt;value&gt;com/test/customer/domain/PickupAddress.hbm.xml&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configurationof Hibernate Configuration Properties --&gt;\n    &lt;bean id=\"csvliteHibernateProperties\" class=\"java.util.Properties\"&gt;\n        &lt;constructor-arg&gt;\n            &lt;props&gt;\n                &lt;!-- Hibernate Configuration Properties --&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.SQLServer2008Dialect&lt;/prop&gt;             \n                &lt;prop key=\"hibernate.current_session_context_class\"&gt;org.springframework.orm.hibernate4.SpringSessionContext&lt;/prop&gt;\n                &lt;!-- Hibernate Configuration Properties - enabled only if debugging --&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.generate_statistics\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.use_sql_comments\"&gt;true&lt;/prop&gt;\n                &lt;!-- Hibernate Cache Properties --&gt;\n                &lt;prop key=\"hibernate.cache.provider_class\"&gt;org.hibernate.cache.OSCacheProvider&lt;/prop&gt;\n                &lt;prop key=\"hibernate.cache.use_query_cache\"&gt;true&lt;/prop&gt;         \n            &lt;/props&gt;\n        &lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configuration of Data Source --&gt;\n    &lt;bean id=\"csvliteDataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiName\"&gt;\n            &lt;value&gt;java:jboss/datasources/CSLiteDS&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configuration of Transaction Manager --&gt;\n    &lt;bean id=\"csvliteTxManager\"\n        class=\"org.springframework.transaction.jta.JtaTransactionManager\"&gt;\n        &lt;property name=\"transactionManagerName\"&gt;\n            &lt;value&gt;java:jboss/TransactionManager&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>Here is spring configuration for relevant dao and service objects (it uses TransactionProxyFactoryBean for each service object)</p>\n\n<pre><code>&lt;bean id=\"invoicingInfoDAO\"\n    class=\"com.test.customer.dao.InvoicingInfoDAOImpl\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"pickupAddressDAO\"\n    class=\"com.test.customer.dao.PickupAddressDAOImpl\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"customerService\"\n    class=\"org.springframework.transaction.interceptor.TransactionProxyFactoryBean\"&gt;\n    &lt;property name=\"transactionManager\" ref=\"csvliteTxManager\"/&gt;\n    &lt;property name=\"target\" ref=\"customerServiceImpl\"/&gt;\n    &lt;property name=\"transactionAttributes\"&gt; \n        &lt;props&gt;     \n            &lt;prop key=\"getBillingInfo\"&gt;PROPAGATION_REQUIRES_NEW, -Throwable&lt;/prop&gt;                                              \n            &lt;prop key=\"addBillingInfo\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"updateBillingInfo\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"addPickupAddress\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"updatePickupAddress\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"getPickupAddress\"&gt;PROPAGATION_REQUIRES_NEW, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"unlockPickupAddress\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"lockPickupAddress\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"lockBillingInfo\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"unlockBillingInfo\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"closePickupAddress\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"processPurgePickupAddress\"&gt;PROPAGATION_REQUIRED, -Throwable&lt;/prop&gt;\n            &lt;prop key=\"getMultiplePickupAddress\"&gt;PROPAGATION_REQUIRES_NEW, -Throwable&lt;/prop&gt;           \n        &lt;/props&gt;\n    &lt;/property&gt;     \n&lt;/bean&gt; \n&lt;bean id=\"customerServiceImpl\" class=\"com.test.customer.services.CustomerServiceImpl\"&gt;\n    &lt;property name=\"invoicingInfoDAO\" ref=\"invoicingInfoDAO\"/&gt;  \n    &lt;property name=\"pickupAddressDAO\" ref=\"pickupAddressDAO\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>What have really I missed out in my configuration?</p>\n\n<p>=========================</p>\n\n<p>[Update - 20121101]</p>\n\n<p>I took the suggestion from @adrian-shum, and cross reference with some information I found over the net.</p>\n\n<p>I did the following tests, but all of the test are not working except when i switch to HibernateTransaction instead of JTA transaction.</p>\n\n<h1>Test 1 - SUCCESS</h1>\n\n<p>(with HibernateTransactionManager)</p>\n\n<pre><code>&lt;!-- Configurationof Hibernate Configuration Properties --&gt;\n    &lt;bean id=\"csvliteHibernateProperties\" class=\"java.util.Properties\"&gt;\n        &lt;constructor-arg&gt;\n            &lt;props&gt;\n                &lt;!-- Hibernate Configuration Properties --&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.SQLServer2008Dialect&lt;/prop&gt;             \n                &lt;prop key=\"hibernate.current_session_context_class\"&gt;org.springframework.orm.hibernate4.SpringSessionContext&lt;/prop&gt;\n\n        &lt;!-- Hibernate Configuration Properties - enabled only if debugging --&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.generate_statistics\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.use_sql_comments\"&gt;true&lt;/prop&gt;\n                &lt;!-- Hibernate Cache Properties --&gt;\n                &lt;prop key=\"hibernate.cache.provider_class\"&gt;org.hibernate.cache.OSCacheProvider&lt;/prop&gt;\n                &lt;prop key=\"hibernate.cache.use_query_cache\"&gt;true&lt;/prop&gt;         \n            &lt;/props&gt;\n        &lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configuration of Data Source --&gt;\n    &lt;bean id=\"csvliteDataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiName\"&gt;\n            &lt;value&gt;java:jboss/datasources/CSLiteDS&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configuration of Transaction Manager --&gt;\n    &lt;bean id=\"csvliteTxManager\"\n        class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n        &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<h1>TEST 2 - FAILED</h1>\n\n<p>(with JtaTransactionManager - hibernate.transaction.manager_lookup_class + hibernate.transaction.factory_class)</p>\n\n<pre><code>&lt;!-- Configurationof Hibernate Configuration Properties --&gt;\n    &lt;bean id=\"csvliteHibernateProperties\" class=\"java.util.Properties\"&gt;\n        &lt;constructor-arg&gt;\n            &lt;props&gt;\n                &lt;!-- Hibernate Configuration Properties --&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.SQLServer2008Dialect&lt;/prop&gt;             \n                &lt;prop key=\"hibernate.current_session_context_class\"&gt;org.springframework.orm.hibernate4.SpringSessionContext&lt;/prop&gt;\n                &lt;prop key=\"hibernate.transaction.factory_class\"&gt;org.hibernate.transaction.JtaTransactionFactory&lt;/prop&gt;\n                &lt;prop key=\"hibernate.transaction.manager_lookup_class\"&gt;org.hibernate.transaction.JBossTransactionManagerLookup&lt;/prop&gt;\n\n                &lt;!-- Hibernate Configuration Properties - enabled only if debugging --&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.generate_statistics\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.use_sql_comments\"&gt;true&lt;/prop&gt;\n                &lt;!-- Hibernate Cache Properties --&gt;\n                &lt;prop key=\"hibernate.cache.provider_class\"&gt;org.hibernate.cache.OSCacheProvider&lt;/prop&gt;\n                &lt;prop key=\"hibernate.cache.use_query_cache\"&gt;true&lt;/prop&gt;         \n            &lt;/props&gt;\n        &lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configuration of Data Source --&gt;\n    &lt;bean id=\"csvliteDataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiName\"&gt;\n            &lt;value&gt;java:jboss/datasources/CSLiteDS&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configuration of Transaction Manager --&gt;   \n    &lt;bean id=\"csvliteTxManager\"\n        class=\"org.springframework.transaction.jta.JtaTransactionManager\"&gt;\n        &lt;property name=\"transactionManagerName\"&gt;\n            &lt;value&gt;java:jboss/TransactionManager&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<h1>TEST 3 - FAILED</h1>\n\n<p>(with JtaTransactionManager - hibernate.transaction.jta.platform property)</p>\n\n<pre><code>&lt;!-- Configurationof Hibernate Configuration Properties --&gt;\n    &lt;bean id=\"csvliteHibernateProperties\" class=\"java.util.Properties\"&gt;\n        &lt;constructor-arg&gt;\n            &lt;props&gt;\n                &lt;!-- Hibernate Configuration Properties --&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.SQLServer2008Dialect&lt;/prop&gt;             \n                &lt;prop key=\"hibernate.current_session_context_class\"&gt;org.springframework.orm.hibernate4.SpringSessionContext&lt;/prop&gt;\n                &lt;!-- prop key=\"hibernate.transaction.jta.platform\"&gt;org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform&lt;/prop--&gt;\n                &lt;prop key=\"hibernate.transaction.jta.platform\"&gt;org.hibernate.service.jta.platform.internal.JBossStandAloneJtaPlatform&lt;/prop&gt;\n\n                &lt;!-- Hibernate Configuration Properties - enabled only if debugging --&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.generate_statistics\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.use_sql_comments\"&gt;true&lt;/prop&gt;\n                &lt;!-- Hibernate Cache Properties --&gt;\n                &lt;prop key=\"hibernate.cache.provider_class\"&gt;org.hibernate.cache.OSCacheProvider&lt;/prop&gt;\n                &lt;prop key=\"hibernate.cache.use_query_cache\"&gt;true&lt;/prop&gt;         \n            &lt;/props&gt;\n        &lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configuration of Data Source --&gt;\n    &lt;bean id=\"csvliteDataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiName\"&gt;\n            &lt;value&gt;java:jboss/datasources/CSLiteDS&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configuration of Transaction Manager --&gt;\n    &lt;bean id=\"csvliteTxManager\"\n        class=\"org.springframework.transaction.jta.JtaTransactionManager\"&gt;\n        &lt;property name=\"transactionManagerName\"&gt;\n            &lt;value&gt;java:jboss/TransactionManager&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>Using Hibernate Transaction is not an option for me.  Is there anything I need to do on JBoss AS 7 side in order to make the JTA transaction works? </p>\n\n<p>=========================</p>\n\n<p>[Update - 20121101]</p>\n\n<p>Basically, I did not find any other exception from the log other than the exception that I have posted earlier.</p>\n\n<p>However, interestingly i did not see any log entry that shows the binding of transaction manager to the JNDI that I have specified, and it always says it will be using \"HHH000399: Using default transaction strategy (direct JDBC transactions)\"  </p>\n\n<pre><code>15:46:00,548 INFO  [org.springframework.transaction.jta.JtaTransactionManager] (\nMSC service thread 1-5) Using JTA UserTransaction: org.jboss.tm.usertx.client.Se\nrverVMClientUserTransaction@307c44\n15:46:00,548 INFO  [org.springframework.transaction.jta.JtaTransactionManager] (\nMSC service thread 1-5) Using JTA TransactionManager: com.arjuna.ats.jbossatx.jt\na.TransactionManagerDelegate@a2f435\n15:46:00,548 INFO  [org.springframework.transaction.jta.JtaTransactionManager] (\nMSC service thread 1-5) Using JTA TransactionSynchronizationRegistry: com.arjuna\n.ats.internal.jta.transaction.arjunacore.TransactionSynchronizationRegistryImple\n@4ef523\n15:46:01,736 INFO  [org.hibernate.annotations.common.Version] (MSC service threa\nd 1-5) HCANN000001: Hibernate Commons Annotations {4.0.1.Final}\n15:46:01,767 INFO  [org.hibernate.Version] (MSC service thread 1-5) HHH000412: H\nibernate Core {4.0.1.Final}\n15:46:01,783 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-5) HHH0\n00206: hibernate.properties not found\n15:46:01,783 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-5) HHH0\n00021: Bytecode provider name : javassist\n15:46:06,142 INFO  [org.hibernate.dialect.Dialect] (MSC service thread 1-5) HHH0\n00400: Using dialect: org.hibernate.dialect.SQLServer2008Dialect\n15:46:06,189 INFO  [org.hibernate.engine.transaction.internal.TransactionFactory\nInitiator] (MSC service thread 1-5) HHH000399: Using default transaction strateg\ny (direct JDBC transactions)\n15:46:06,205 INFO  [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (M\nSC service thread 1-5) HHH000397: Using ASTQueryTranslatorFactory\n15:46:06,361 INFO  [org.hibernate.validator.util.Version] (MSC service thread 1-\n5) Hibernate Validator 4.2.0.Final\n</code></pre>\n\n<p>Not sure if this is the cause... if yes, what do i need to do then? </p>\n"},{"tags":["spring","spring-jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13254619,"title":"Method purpose and what value is used by Spring's DataSourceUtils.applyTransactionTimeout()?","body":"<p>Spring's DataSourceUtils defines a <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/datasource/DataSourceUtils.html#applyTransactionTimeout%28java.sql.Statement,%20javax.sql.DataSource%29\" rel=\"nofollow\">method</a> that applies a transaction timeout, without specifying it explicitly. The Javadoc reads:</p>\n\n<pre><code>public static void applyTransactionTimeout(Statement stmt,\n                                           DataSource dataSource)\n                                    throws SQLException\nApply the current transaction timeout, if any, to the given JDBC Statement object.\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Where does the timeout value come from? </li>\n<li>Why is the call needed at all? If the transaction is acquired through Spring, wouldn't whatever timeout (or the default one) be applied anyway? </li>\n</ol>\n\n<p>Thank you.</p>\n"},{"tags":["oracle","spring","hibernate","stored-procedures","jdbc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13253854,"title":"spring 3.1 with hibernate 4 can't use StoredProcedure with OracleTypes","body":"<p>Recently we upgraded from hibernate 3.5 to 4.1.7 as well as spring from 3.0.5 to 3.1.3. Hibernate is configured via jpa in spring so no changes is made. </p>\n\n<p>After the upgrade, most of the stuff works fine but one function that uses StoredProcedure is broken with the following exception: </p>\n\n<pre><code>java.lang.ClassCastException: $Proxy188 cannot be cast to oracle.jdbc.OracleConnection\n    at oracle.sql.TypeDescriptor.setPhysicalConnectionOf(TypeDescriptor.java:829)\n    at oracle.sql.TypeDescriptor.&lt;init&gt;(TypeDescriptor.java:583)\n    at oracle.sql.ArrayDescriptor.&lt;init&gt;(ArrayDescriptor.java:224)\n    at org.springframework.data.jdbc.support.oracle.SqlArrayValue.createTypeValue(SqlArrayValue.java:71)\n    at org.springframework.jdbc.core.support.AbstractSqlTypeValue.setTypeValue(AbstractSqlTypeValue.java:58)\n    at org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:281)\n    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:217)\n    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:128)\n    at org.springframework.jdbc.core.CallableStatementCreatorFactory$CallableStatementCreatorImpl.createCallableStatement(CallableStatementCreatorFactory.java:212)\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1008)\n    at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)\n    at org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144)\n</code></pre>\n\n<p>In debug mode, I found the <code>AbsructSqlTypeValue.setTypeValue()</code> method has the following implementation:</p>\n\n<pre><code>public final void setTypeValue(PreparedStatement ps, int paramIndex, int sqlType, String typeName)\n        throws SQLException {\n\n    Object value = createTypeValue(ps.getConnection(), sqlType, typeName);\n    if (sqlType == TYPE_UNKNOWN) {\n        ps.setObject(paramIndex, value);\n    }\n    else {\n        ps.setObject(paramIndex, value, sqlType);\n    }\n}\n</code></pre>\n\n<p>The <code>ps.getConnection()</code> method here actually returns a new Hibernate 4 LogicalConnectionImpl which wraps around the real OracleConnection. And that's why the it throws the ClassCastException in Oracle driver. </p>\n\n<p>The reason why it calls to oracle.SqlArrayValue is because the store proc takes list of longs as input parameter. When the input parameter is defined, we uses OracleTypes.ARRAY then while binding the values, we create a new SqlArrayValue object to wrap around the Long[]. I tried to use the generic Types.Array and Long[] directly but it didn't work either with the following exception:</p>\n\n<pre><code>Caused by: java.sql.SQLException: Fail to convert to internal representation: [Ljava.lang.Long;@337f5afe\n    at oracle.sql.ARRAY.toARRAY(ARRAY.java:187)\n    at oracle.jdbc.driver.OraclePreparedStatement.setObjectCritical(OraclePreparedStatement.java:8782)\n    at oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:8278)\n    at oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:8877)\n    at oracle.jdbc.driver.OracleCallableStatement.setObject(OracleCallableStatement.java:4992)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.setObject(OraclePreparedStatementWrapper.java:240)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at oracle.ucp.jdbc.proxy.StatementProxyFactory.invoke(StatementProxyFactory.java:230)\n    at oracle.ucp.jdbc.proxy.PreparedStatementProxyFactory.invoke(PreparedStatementProxyFactory.java:124)\n    at oracle.ucp.jdbc.proxy.CallableStatementProxyFactory.invoke(CallableStatementProxyFactory.java:101)\n    at $Proxy214.setObject(Unknown Source)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)\n</code></pre>\n\n<p>I don't understand why the jdbcTemplate somehow uses the hibernate connection instead of the native OracleConnection, maybe there is some configuration somewhere can fix it magically?</p>\n"},{"tags":["java","spring","exception"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":28,"score":-1,"question_id":13253414,"title":"Spring exceptions","body":"<p>Most of the exceptions thrown in spring are runtime exceptions which tend not be highlighted by eclipse (for me anyway). Is it just a case of learning what can be thrown and when or is there a better way of doing this. The reason i ask is because i find myself missing the catching of the run time exceptions and this obviously is not good.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":4,"favorite_count":25,"up_vote_count":30,"down_vote_count":0,"view_count":9190,"score":30,"question_id":2066946,"title":"trigger 404 in spring-mvc controller?","body":"<p>How do I get a spring 3.0 controller to trigger a 404?</p>\n\n<p>I have a controller with <code>@RequestMapping(value = \"/**\", method = RequestMethod.GET)</code> and for some urls accessing the controller I want the container to come up with a 404.</p>\n"},{"tags":["java","spring","scala","lift"],"answer_count":11,"favorite_count":56,"up_vote_count":75,"down_vote_count":0,"view_count":20840,"score":75,"question_id":2683914,"title":"Why would I use Scala/Lift over Java/Spring?","body":"<p>I know this question is a bit open but I have been looking at Scala/Lift as an alternative to Java/Spring and I wonder what are the real advantages that Scala/Lift has over it. From my perspective and experience, Java Annotations and Spring really minimizes the amount of coding that you have to do for an application. Does Scala/Lift improve upon that?</p>\n"},{"tags":["java","mysql","spring","jdbc","timestamp"],"answer_count":5,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":182,"score":2,"question_id":13109982,"title":"Return Timestamp With Prepared Statement","body":"<p>I have an auto generated timestamp that is created each time a record is inserted or updated in a mysql table. Is there a way to return this timestamp in a way similar to how I would use a keyholder to return a newly created id?</p>\n\n<pre><code>KeyHolder keyHolder = new GeneratedKeyHolder();\nJdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n\n//Insert Contact\njdbcTemplate.update(new PreparedStatementCreator() {\n    @Override\n    public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {\n        PreparedStatement preparedStatement = connection.prepareStatement(SQL_ADD, Statement.RETURN_GENERATED_KEYS);\n        preparedStatement.setString(1, contact.getFirstName());\n        preparedStatement.setString(2, contact.getLastName());\n        preparedStatement.setInt(3, contact.getOrganizationId());\n        preparedStatement.setString(4, contact.getType());\n        preparedStatement.setInt(5, contact.getUserId());\n        return preparedStatement;\n        }   \n}, keyHolder);\n//Use keyholder to obtain newly created id\ncontact.setId(keyHolder.getKey().intValue());\n</code></pre>\n\n<p>Is there some way to also return the new timestamp without having to requery the table? I have been looking for ways to return it along with the id as a key in the keyholder, but it doesn't seem to be returned as a key?</p>\n"},{"tags":["spring","injection"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13253296,"title":"How to guarantee that Spring @Autowired injection can be accessible in the constructor","body":"<p>I have a Spring Bean which has a @Autowired setter getter injection. However, when i try to access injected bean, i get NullPointerException because the injected bean has not be really injected. </p>\n\n<p>Is there any way to guarantee that the injection is done before constructure call?</p>\n\n<pre><code>@Component\n@Scope(\"session\")\npublic class A{\n\n@Autowired\nB;\n\npublic A()\n{\n//B is null here, because it has not been injected yet.\n}\n\n//Setter Getters\n}\n</code></pre>\n"},{"tags":["java","spring","autowired"],"answer_count":6,"favorite_count":45,"up_vote_count":97,"down_vote_count":0,"view_count":36724,"score":97,"question_id":633158,"title":"Spring @Autowired usage","body":"<p>What are the pros and cons of using @Autowired in a class that will be wired up by Spring?  </p>\n\n<p>Just to clarify, I'm talking specifically about the @Autowired annotation, not auto-wiring in XML.</p>\n\n<p>I probably just don't understand it, but to me it almost seems like an anti-pattern - your classes start to become aware that they are tied to a DI framework, rather than just being POJOs.  Maybe I'm a glutton for punishment, but I like having the external XML config for beans, and I like to have explicit wirings, so I know exactly what is wired where.</p>\n"},{"tags":["spring","tomcat","sso","josso"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12103323,"title":"tomcat+josso1.8.6+spring","body":"<p>I use JOSSO 1.8.6. I configure all in the Tomcat lib directory file related to JOSSO, and I'm also doing all configuration in web application[spring] WEB-INF file. I got the below URL.</p>\n\n<pre><code>http://localhost:8080/TestLogin/?josso_cmd=login_optional\n &amp;josso_back_to=http://localhost:8080/TestLoginDemo/josso_security_check\n &amp;josso_partnerapp_id=TestLoginDemo\n</code></pre>\n\n<p>But my question is:</p>\n\n<p>My parent web application is --TestLogin means this application login page is main to display all the other web application [child web application].</p>\n\n<p>I have 3 child application</p>\n\n<ol>\n<li>TestLoginDemo</li>\n<li>jossoLogin1</li>\n<li>JossoLoginDemo</li>\n</ol>\n\n<p>All are spring application.</p>\n\n<p>I hit in browser mean URL is <code>http://localhost:8080/TestLoginDemo</code></p>\n\n<p>So the below URL I see</p>\n\n<pre><code>http://localhost:8080/TestLogin/?josso_cmd=login_optional\n &amp;josso_back_to=http://localhost:8080/TestLoginDemo/josso_security_check\n &amp;josso_partnerapp_id=TestLoginDemo\n</code></pre>\n\n<p>But after the successful login I find the <code>TestLogin</code> flow means not transfer to the <code>TestLoginDemo</code>.</p>\n\n<p>So what is the way if I have to carry on flow for <code>TestLoginDemo</code>?</p>\n\n<p>And; after success this URL:</p>\n\n<pre><code>http://localhost:8080/TestLogin/?josso_cmd=login_optional\n &amp;josso_back_to=http://localhost:8080/TestLoginDemo/josso_security_check\n &amp;josso_partnerapp_id=TestLoginDemo\n</code></pre>\n\n<p>login page I got below URL in success:</p>\n\n<pre><code>http://localhost:8080/TestLogin/login.htm\n</code></pre>\n\n<p>instead of the below correct URL:</p>\n\n<pre><code>http://localhost:8080/TestLoginDemo/login.htm\n</code></pre>\n\n<p>Could anybody guide me on how to achieve this?</p>\n"},{"tags":["java","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":30,"score":-3,"question_id":13253087,"title":"what is best site to study Spring and Hibernate?","body":"<p>I am wiling to learn the Spring and Hibernate in java ? So what is best site to study Spring and Hibernate ?Thanks in advance...</p>\n"},{"tags":["java","spring","factory"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13134526,"title":"Java: creating a OCP based factory through Spring?","body":"<p>I have the following code:</p>\n\n<pre><code>public IFoo getFoo(Type type) // Type is an enum containing A, B etc.\n{\n    switch(type)\n    {\n        case A: return new Foo1(); // implements IFoo\n        case B: return new Foo2(); // implements IFoo\n        etc.\n    } \n}\n</code></pre>\n\n<p>This obviously violates OCP, so I need to refactor; plus I now need to return prototype beans which are managed by a Spring container. To achieve this, I can think of the following options:</p>\n\n<p>1) make this class AppContextAware; create a Map&lt;Type, String&gt; where String is the bean id; define these beans as prototype in Spring Config and define this Map too in Spring config and get it injected in this class, then get the bean id from this map for a given enum and use it to get a bean from AppContext,</p>\n\n<p>2) similar approach, but for the value in Map, use a TargetSource which has an abstract method which I call in <code>getTarget()</code> and I wire the defined prototype beans using <code>lookup-method</code> as this abstract method per TargetSource definition,</p>\n\n<p>3) similar approach, but I use a FactoryBean instead of TargetSource.</p>\n\n<p>In #1 my class depends on AppContext, in other approaches it doesn't. So I'm leaning towards #2 or #3, but which one to pick? Or is there any other, better approach that I haven't thought of?</p>\n"},{"tags":["java","spring","eclipse-plugin","eclipse-rcp"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":91,"score":3,"question_id":12587908,"title":"Eclipse RCP cannot find applicationContext.xml","body":"<p>I am facing some issues integrating Eclipse RCP and Spring IOC.</p>\n\n<p>Below is my approach to the process.</p>\n\n<p>Steps I've done </p>\n\n<ol>\n<li>Created a Bundle (Using plug-in from exisitng archives project type) which has all Spring jars.</li>\n<li>Created a Simple Hello RCP application with a view.</li>\n<li>Added the Bundle as a dependency to the RCP project(step2) </li>\n</ol>\n\n<p>Created a simple class in my RCP project whose object has to instantiated through applicationContext.xml.</p>\n\n<pre><code>public class Triangle {\n            public void draw(){\n                System.out.println(\"Traingle drawn\");\n            }\n       }\n</code></pre>\n\n<p>My applicationContext.xml code</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN 2.0//EN\" \"http://www.springframework.org/dtd/spring-beans-2.0.dtd\"&gt;\n&lt;beans&gt;\n   &lt;bean id=\"JGID\" class=\"st.Triangle\"/&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>A code snippet part of My view where I'm fetching applicationContext.xml is as below</p>\n\n<pre><code>ApplicationContext applicationContext = new FileSystemXmlApplicationContext(\"D:/applicationContext.xml\");\nTriangle triangle = (Triangle) applicationContext.getBean(\"JGID\");\ntriangle.draw();\n</code></pre>\n\n<p>this throws error</p>\n\n<blockquote>\n  <p>Cannot find class [st.Triangle] for bean with name 'JGID' defined in\n  file [D:\\applicationContext.xml]; nested exception is\n  java.lang.ClassNotFoundException: st.Triangle</p>\n</blockquote>\n\n<p>How do I resolve this error ?    </p>\n\n<p>As a workaround I tried the other way, also I failed as in below i.e.., using ClassPathXmlApplicationContext</p>\n\n<pre><code>ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n</code></pre>\n\n<p>Below is the error</p>\n\n<blockquote>\n  <p>!MESSAGE Unable to create view ID st.view: IOException parsing XML document from class path resource [applicationContext.xml]; nested exception is java.io.FileNotFoundException: class path resource\n  [applicationContext.xml] cannot be opened because it does not exist\n       !STACK 0 java.io.FileNotFoundException: class path resource [applicationContext.xml] cannot be opened</p>\n</blockquote>\n\n<p>The above code line in my Eclipse RCP applcication, where does it check or look for the xml file. </p>\n\n<p>I tried the following ways.</p>\n\n<ul>\n<li>Placed applicationContext.xml in src folder.</li>\n<li>At the project folder. </li>\n<li>Inisde the package.</li>\n</ul>\n\n<p>In all the 3 cases, it says <code>FileNotFoundException</code>. Where should I place the <code>applicationContext.xml</code> file to make the <code>applicationContext</code> reference to find it?</p>\n"},{"tags":["java","hibernate","spring","jsf"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":5902,"score":3,"question_id":3081441,"title":"org.hibernate.HibernateException: Illegal attempt to associate a collection with two open sessions","body":"<p>Upon deleting an entity from the database I get the following exception: </p>\n\n<pre><code>org.hibernate.HibernateException: Illegal attempt to associate a collection with two open sessions\n   at org.hibernate.collection.AbstractPersistentCollection.setCurrentSession(AbstractPersistentCollection.java:410)\n   at org.hibernate.event.def.OnUpdateVisitor.processCollection(OnUpdateVisitor.java:43)\n   at org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:101)\n   at org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:61)\n   at org.hibernate.event.def.AbstractVisitor.processEntityPropertyValues(AbstractVisitor.java:55)\n at org.hibernate.event.def.AbstractVisitor.process(AbstractVisitor.java:123)\n at org.hibernate.event.def.DefaultDeleteEventListener.onDelete(DefaultDeleteEventListener.java:101)\n at org.hibernate.event.def.DefaultDeleteEventListener.onDelete(DefaultDeleteEventListener.java:52)\n at org.hibernate.impl.SessionImpl.fireDelete(SessionImpl.java:767)\n at org.hibernate.impl.SessionImpl.delete(SessionImpl.java:745)\n at org.springframework.orm.hibernate3.HibernateTemplate$25.doInHibernate(HibernateTemplate.java:790)\n at org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:372)\n at org.springframework.orm.hibernate3.HibernateTemplate.delete(HibernateTemplate.java:784)\n at org.springframework.orm.hibernate3.HibernateTemplate.delete(HibernateTemplate.java:780)\n at pl.edu.agh.adam.core.projects.dao.TagDAO.delete(TagDAO.java:98)\n at pl.edu.agh.adam.core.projects.ProjectService.deleteTag(ProjectService.java:109)\n at pl.edu.agh.adam.core.projects.web.TagPresenter.deleteTag(TagPresenter.java:97)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n at java.lang.reflect.Method.invoke(Method.java:597)\n at com.sun.el.parser.AstValue.invoke(AstValue.java:234)\n at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)\n at org.apache.myfaces.view.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:83)\n at javax.faces.component._MethodExpressionToMethodBinding.invoke(_MethodExpressionToMethodBinding.java:88)\n at org.apache.myfaces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:100)\n at javax.faces.component.UICommand.broadcast(UICommand.java:120)\n at javax.faces.component.UIData.broadcast(UIData.java:708)\n at javax.faces.component.UIViewRoot._broadcastAll(UIViewRoot.java:890)\n at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:234)\n at javax.faces.component.UIViewRoot._process(UIViewRoot.java:1202)\n at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:623)\n at org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:35)\n at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:143)\n at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:93)\n at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)\n at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\n at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n at java.lang.Thread.run(Thread.java:619)\n</code></pre>\n\n<p>I've dug deep and tried numerous solutions from the hibernate forum, but still I don't know what's going on and where the sessions are opened. The conditions under which this problem occurs:</p>\n\n<p>First: <code>OpenSessionInViewFilter</code> - I've asked about it here. Everything seemed to work fine, but the deleting stopped all of a sudden the following day and all I've done is - I've added a non-connected class to a non-connected package.</p>\n\n<pre><code>  &lt;!-- Hibernate OpenSession Filter --&gt;\n  &lt;filter&gt;\n   &lt;filter-name&gt;hibernateFilter&lt;/filter-name&gt;\n   &lt;filter-class&gt;org.springframework.orm.hibernate3.support.OpenSessionInViewFilter&lt;/filter-class&gt;\n   &lt;init-param&gt;\n    &lt;param-name&gt;singleSession&lt;/param-name&gt;\n    &lt;param-value&gt;false&lt;/param-value&gt;\n   &lt;/init-param&gt;\n   &lt;init-param&gt;\n    &lt;param-name&gt;sessionFactoryBeanName&lt;/param-name&gt;\n    &lt;param-value&gt;sessionFactory&lt;/param-value&gt;\n   &lt;/init-param&gt;\n   &lt;/filter&gt;\n  &lt;filter-mapping&gt;\n    &lt;filter-name&gt;hibernateFilter&lt;/filter-name&gt;\n   &lt;url-pattern&gt;*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt;\n</code></pre>\n\n<p>Second: three-tier architecture. Here are the classes and the JSF page:</p>\n\n<pre><code>@Entity\n@Table(name = \"tag\")\npublic class Tag implements Serializable {\nprivate static final long serialVersionUID = 1L;\n@ManyToMany(mappedBy = \"tags\", targetEntity = Project.class)\nList&lt;Project&gt; projects = new ArrayList&lt;Project&gt;();\n@Transient\npublic static final String PROP_ID = \"id\";\n@Id\n@GeneratedValue(strategy=GenerationType.IDENTITY)\n@Column(name = \"tag_id\")\nprivate Long id;\n@Transient\npublic static final String PROP_NAME = \"name\";\n@Column(name = \"name\", length = 25, unique = true)\nprivate String name;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class TagDAO extends HibernateDaoSupport implements ITagDAO {\n\n@Override\npublic void create(Tag tag) {\n  getHibernateTemplate().save(tag);\n}\n\n@Override\npublic Tag getTag(String name){\n  Tag group = null;\n\n  DetachedCriteria criteria = DetachedCriteria.forClass(Tag.class);\n  criteria.add(Restrictions.eq(\"name\", name));\n  List&lt;Tag&gt; tags = getHibernateTemplate().findByCriteria(criteria);\n  if ((tags != null) &amp;&amp; (tags.size() &gt; 0)) {\n    group = (Tag)tags.get(0);\n  }\n  return group;\n}\n\n@Override\npublic Tag getTag(Long id){\nTag group = null;\nList&lt;Tag&gt; groups = getHibernateTemplate().find(\n \"from Tag where id = ?\", id);\nif ((groups != null) &amp;&amp; (groups.size() &gt; 0)) {\ngroup = (Tag)groups.get(0);\n}\nreturn group;\n}\n\n@Override\npublic List&lt;Tag&gt; getTags(){\nList&lt;Tag&gt; ret = getHibernateTemplate().find(\"from Tag\");\nSystem.out.println(\"Dao got \"+ret.size()+\" tags\");\nreturn ret;\n}\n\n@Override\npublic Integer getTagCount() {\nDetachedCriteria criteria = DetachedCriteria.forClass(Tag.class);\ncriteria.setProjection(Projections.rowCount());\nreturn (Integer)(getHibernateTemplate().findByCriteria(criteria).get(0));\n}\n\n@Override\npublic void delete(Tag group) {\ngetHibernateTemplate().delete(group);\n\n}\n\n@Override\npublic void update(Tag group) {\n\ngetHibernateTemplate().update(group);\n\n}\n\n@Override\npublic List&lt;Tag&gt; getTags(Integer first, Integer resultsPerPage,\nString order, Boolean asc) {\n\nDetachedCriteria criteria = DetachedCriteria.forClass(Tag.class);\nif (asc){\ncriteria.addOrder(Order.asc(order));\n}else{\ncriteria.addOrder(Order.desc(order));\n} \nreturn (List&lt;Tag&gt;)getHibernateTemplate().findByCriteria(criteria, first, resultsPerPage);\n}\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class ProjectService implements IProjectService {\n\n// Beans used by this service.\nprivate IProjectDAO projectDao;\nprivate ITagDAO tagDao;\n\n@Override\npublic void createProject(Project project) throws AlreadyExistsException {\n if (projectDao.getProject(project.getName()) != null) {\n  throw new AlreadyExistsException();\n }\n projectDao.addProject(project);\n}\n\n@Override\npublic List&lt;Project&gt; getProjects(Integer first, Integer howMany, String order,\n  boolean asc) {\n return projectDao.getProjects(first, howMany, order, asc);\n} \n\n@Override\npublic Integer getProjectCount(){\n return projectDao.getProjectCount();\n}\n\n@Override\npublic List&lt;Project&gt; getProjects() {\n return projectDao.getAllProjects();\n}\n\n@Override\npublic void deleteProject(Long id) {\n projectDao.removeProject(id);\n}\n\n@Override\npublic List&lt;Tag&gt; getTags() {\n return tagDao.getTags();\n}\n\n@Override\npublic Tag getTag(String name){\n return tagDao.getTag(name);\n}\n@Override\npublic void createTag(Tag tag) throws AlreadyExistsException {\n if (tagDao.getTag(tag.getName()) != null) {\n  throw new AlreadyExistsException();\n }\n tagDao.create(tag);\n}\n@Override\npublic void deleteTag(Long id) {\n  tagDao.delete(tagDao.getTag(id));\n}\n@Override\npublic void updateTag(Tag tag) {\ntagDao.update(tag);\n\n}\n}\n</code></pre>\n\n<hr>\n\n<pre><code>@ManagedBean(name = \"tagPresenter\")\n@RequestScoped\npublic class TagPresenter {\n\n private List&lt;Tag&gt; tags;\n private IProjectService projectService;\n private Tag tag;\n\n\n public void setTag(Tag tag) {\n  this.tag= tag;\n }\n public Tag getTag() {\n  return tag;\n }\n\n public TagPresenter() {\n  projectService = (IProjectService)ServiceFinder.getInstance()\n   .findBean(\"projectService\");\n  tags = projectService.getTags();\n }\n\n private void refresh() {\n  tags = projectService.getTags();\n }\n\n public List&lt;Tag&gt; getTags() {\n  refresh();\n  return tags;\n }\n\n public void deleteTag() {\n  projectService.deleteTag(tag.getId());\n }\n\n}\n</code></pre>\n\n<hr>\n\n<p>finally the webpage:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:ui=\"http://java.sun.com/jsf/facelets\"     xmlns:h=\"http://java.sun.com/jsf/html\" xmlns:f=\"http://java.sun.com/jsf/core\" xmlns:p=\"http://primefaces.prime.com.tr/ui\"&gt; \n &lt;ui:composition template=\"/templates/template.xhtml\"&gt;\n  &lt;ui:define name=\"head\"&gt;\n   &lt;title&gt;Tags&lt;/title&gt;\n   &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"#{facesContext.externalContext.requestContextPath}/styles/style.css\"/&gt;\n  &lt;/ui:define&gt;\n  &lt;ui:define name=\"content\"&gt;\n  &lt;h:form name=\"commandForm\"&gt;\n  &lt;p:dataTable var=\"tag\" name=\"tagsList\" value=\"${tagPresenter.tags}\" paginator=\"true\" rows=\"10\"  &gt;\n    &lt;p:column sortBy=\"#{tag.id}\"&gt;\n      &lt;f:facet name=\"header\"&gt;\n       &lt;h:outputText value=\"Id\" /&gt;\n      &lt;/f:facet&gt;\n       &lt;h:outputText value=\"#{tag.id}\" /&gt;\n     &lt;/p:column&gt;\n     &lt;p:column sortBy=\"#{tag.name}\"&gt;\n      &lt;f:facet name=\"header\"&gt;\n       &lt;h:outputText value=\"Name\" /&gt;\n      &lt;/f:facet&gt;\n       &lt;h:outputText value=\"#{tag.name}\" /&gt;\n     &lt;/p:column&gt;\n      &lt;p:column&gt;\n       &lt;h:commandLink action=\"#{tagDisplayer.showTag}\" value=\"Modify\"&gt;\n         &lt;f:setPropertyActionListener target=\"#{tagDisplayer.tag}\" value=\"#{tag}\"/&gt;\n       &lt;/h:commandLink&gt;\n       &lt;h:commandLink action=\"#{tagPresenter.deleteTag}\" value=\"Delete\"&gt;\n        &lt;f:setPropertyActionListener target=\"#{tagPresenter.tag}\" value=\"#{tag}\"/&gt;\n       &lt;/h:commandLink&gt;\n     &lt;/p:column&gt;\n    &lt;/p:dataTable&gt;\n    &lt;/h:form&gt;\n    &lt;p:messages id=\"deletingError\" showDetail=\"true\"/&gt;\n  &lt;/ui:define&gt;\n &lt;/ui:composition&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>How is this problem caused and how can I solve it?</p>\n"},{"tags":["spring","hibernate","transactions","jpa-2.0","lazy-loading"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":210,"score":0,"question_id":9848931,"title":"Spring 3 JPA: LazyInitializationException despite @Transactional Service Method","body":"<p>I am working with Spring 3, Hibernate 3.0.6 and JPA 2.</p>\n\n<p>I am getting <code>LazyInitializationException</code>:</p>\n\n<p>Here is the Service:\n    @Service\n    public class ReportServiceImpl implements ReportService {\n        private ReportDAO reportDAO;\n        private FieldDefDAO fieldDefDAO;\n        private FieldDefService fieldDefService;</p>\n\n<pre><code>    /**\n     * \n     */\n    @Override\n    @Transactional(propagation = Propagation.REQUIRED)\n    public void updateReport(ReportTemplate reportTemplate, String[] fieldIds) {\n        logger.entry(reportTemplate);\n\n        try {\n            ReportTemplate existingReport = reportDAO.findById(\n                    reportTemplate.getId(), true);\n\n            existingReport.setName(reportTemplate.getName());\n            existingReport.setDepartment(reportTemplate.getDepartment());\n\n            // set selected fields\n            if (fieldIds != null) {\n                existingReport.removeReportFields();\n\n                for (String fieldId : fieldIds) {\n\n                    FieldDef fd = fieldDefDAO.findById(Long.parseLong(fieldId), false);\n\n                    // EXCEPTION THROWN HERE (\n                    reportTemplate.addReportField(fd, i);\n                }\n            }\n            reportDAO.mergeState(existingReport, false);\n        } catch (FocusDAOException fde) {\n            throw new FocusServiceException(fde);\n        }\n        logger.exit();\n    }\n}\n</code></pre>\n\n<p>The Entities:</p>\n\n<pre><code>@Entity\n@Table(name = \"REPORT_TEMPLATE\")\n@SQLDelete(sql = \"UPDATE REPORT_TEMPLATE SET deleted = 1 WHERE REPORTTEMPLATE_ID = ? and OPTLOCK = ?\")\n@Where(clause = \"deleted &lt;&gt; 1\")\npublic class ReportTemplate extends Template {\n\n    private Long id;\n    private Set&lt;ReportField&gt; reportFields = new HashSet&lt;ReportField&gt;();\n\n    /**\n     * @return the id\n     */\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = \"REPORTTEMPLATE_ID\")\n    public Long getId() {\n        return id;\n    }\n\n    /**\n     * @param id\n     *            the id to set\n     */\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    /**\n     * @return the reportFields\n     */\n    @OneToMany(mappedBy = \"reportTemplate\", cascade = { CascadeType.PERSIST,\n            CascadeType.MERGE })\n    public Set&lt;ReportField&gt; getReportFields() {\n        return reportFields;\n    }\n\n    /**\n     * @param reportFields\n     *            the reportFields to set\n     */\n    public void setReportFields(Set&lt;ReportField&gt; reportFields) {\n        this.reportFields = reportFields;\n    }\n\n    /**\n     * \n     * @param field\n     */\n    @Transient\n    public void addReportField(FieldDef field, int order) {\n        ReportField rf = new ReportField(this, field, order);\n\n        reportFields.add(rf);\n        field.getReportFields().add(rf);        \n    }\n\n    /**\n     * \n     */\n    public void removeReportFields() {\n        for (ReportField rf : reportFields) {\n            rf.setReportTemplate(null);\n            reportFields.remove(rf);\n        }\n    }\n\n}\n\n@Entity\n@Table(name = \"REPORT_FIELD\", uniqueConstraints = @UniqueConstraint(columnNames = {\n    \"REPORTFIELD_ID\", \"FIELDDEF_ID\", \"DISPLAY_ORDER\" }))\npublic class ReportField {\n\nprivate Long id;\n\n// @OrderColumn\nprivate FieldDef field;\nprivate ReportTemplate reportTemplate;\nprivate int order;\n\n/**\n * \n */\npublic ReportField() {}\n\n/**\n * \n * @param reportTemplate\n * @param field\n * @param order\n */\npublic ReportField(ReportTemplate reportTemplate, FieldDef field, int order) {\n    this.reportTemplate = reportTemplate;\n    this.field = field;\n    this.order = order;\n}\n\n/**\n * @return the id\n */\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\n@Column(name = \"REPORTFIELD_ID\")\npublic Long getId() {\n    return id;\n}\n\n/**\n * @param id\n *            the id to set\n */\npublic void setId(Long id) {\n    this.id = id;\n}\n\n/**\n * @return the field\n */\n@ManyToOne\n@JoinColumn(name = \"FIELDDEF_ID\", nullable = false)\npublic FieldDef getField() {\n    return field;\n}\n\n/**\n * @param field\n *            the field to set\n */\npublic void setField(FieldDef field) {\n    this.field = field;\n}\n\n/**\n * @return the report\n */\n@ManyToOne\n@JoinColumn(name = \"REPORTTEMPLATE_ID\", nullable = false)\npublic ReportTemplate getReportTemplate() {\n    return reportTemplate;\n}\n\n/**\n * @param report\n *            the report to set\n */\npublic void setReportTemplate(ReportTemplate reportTemplate) {\n    this.reportTemplate = reportTemplate;\n}\n\n/**\n * @return the order\n */\n@Column(name = \"DISPLAY_ORDER\", nullable = false)\npublic int getOrder() {\n    return order;\n}\n\n/**\n * @param order\n *            the order to set\n */\npublic void setOrder(int order) {\n    this.order = order;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>configuration:\n        \n        </p>\n\n<pre><code>        &lt;security:global-method-security\n            pre-post-annotations=\"enabled\" /&gt;\n\n        &lt;mvc:resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n        &lt;bean id=\"jspViewResolver\"\n            class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n            &lt;property name=\"viewClass\"\n                value=\"org.springframework.web.servlet.view.JstlView\" /&gt;\n            &lt;property name=\"prefix\" value=\"/WEB-INF/jsp/\" /&gt;\n            &lt;!-- &lt;property name=\"suffix\" value=\".jsp\" /&gt; --&gt;\n        &lt;/bean&gt;\n\n        &lt;bean id=\"tilesViewResolver\"\n            class=\"org.springframework.web.servlet.view.UrlBasedViewResolver\"&gt;\n            &lt;property name=\"viewClass\"&gt;\n                &lt;value&gt;\n                    org.springframework.web.servlet.view.tiles2.TilesView\n            &lt;/value&gt;\n            &lt;/property&gt;\n            &lt;property name=\"order\" value=\"1\" /&gt;\n        &lt;/bean&gt;\n\n        &lt;bean id=\"tilesConfigurer\"\n            class=\"org.springframework.web.servlet.view.tiles2.TilesConfigurer\"&gt;\n            &lt;property name=\"definitions\"&gt;\n                &lt;list&gt;\n                    &lt;value&gt;/WEB-INF/tiles/tiles.xml&lt;/value&gt;\n                &lt;/list&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n\n        &lt;bean id=\"projectDS\" class=\"org.apache.tomcat.jdbc.pool.DataSource\"\n            destroy-method=\"close\"\n            p:driverClassName=\"${driver.class.name}\"\n            p:url=\"${url}\"\n            p:initialSize=\"${initial.size}\"\n            p:maxActive=\"${max.active}\"\n            p:maxIdle=\"${max.idle}\"\n            p:minIdle=\"${min.idle}\"\n            p:testOnBorrow=\"true\"\n            p:validationQuery=\"SELECT 1\"\n            p:validationInterval=\"30000\"\n            p:timeBetweenEvictionRunsMillis=\"30000\"\n            p:removeAbandoned=\"true\"\n            p:removeAbandonedTimeout=\"60\"\n            p:logAbandoned=\"true\"\n            p:abandonWhenPercentageFull=\"75\"\n            p:jdbcInterceptors=\"ConnectionState;StatementFinalizer;ResetAbandonedTimer;SlowQueryReport(threshold=3000)\"\n        /&gt;\n\n        &lt;bean id=\"projectEMF\"\n            class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n            &lt;property name=\"dataSource\" ref=\"projectDS\" /&gt;\n            &lt;property name=\"jpaVendorAdapter\" ref=\"jpaVendorAdapter\" /&gt;\n        &lt;/bean&gt;\n\n        &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n            &lt;property name=\"entityManagerFactory\" ref=\"projectEMF\" /&gt;\n            &lt;property name=\"dataSource\" ref=\"projectDS\" /&gt;\n        &lt;/bean&gt;\n\n        &lt;bean id=\"jpaVendorAdapter\"\n            class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n\n            &lt;property name=\"database\" value=\"SQL_SERVER\" /&gt;\n            &lt;property name=\"showSql\" value=\"false\" /&gt;\n            &lt;property name=\"generateDdl\" value=\"false\" /&gt;\n            &lt;property name=\"databasePlatform\" value=\"org.hibernate.dialect.SQLServerDialect\" /&gt;\n        &lt;/bean&gt;\n\n        &lt;bean id=\"validator\"\n            class=\"org.springframework.validation.beanvalidation.LocalValidatorFactoryBean\" /&gt;\n\n        &lt;bean id=\"auditLog\" class=\"ca.utoronto.med.dc.focus.persistence.audit.AuditLog\" /&gt;\n\n        &lt;bean\n            class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n\n    &lt;!-- focus: Edit the package name below. --&gt;\n        &lt;bean id=\"logoutHandlerBean\"\n            class=\"ca.utoronto.med.dc.focus.security.LogoutSuccessHandlerImpl\" /&gt;\n\n        &lt;bean id=\"customAuthenticationFailureHandlerBean\"\n            class=\"ca.utoronto.med.dc.focus.security.AuthenticationFailureHandlerImpl\" /&gt;\n\n        &lt;bean id=\"customAuthenticationSuccessHandlerBean\"\n            class=\"ca.utoronto.med.dc.focus.security.AuthenticationSuccessHandlerImpl\" /&gt;\n\n        &lt;bean id=\"httpSessionEventListener\"\n            class=\"ca.utoronto.med.dc.focus.security.SimpleHttpSessionEventListenerImpl\" /&gt;\n\n        &lt;mvc:annotation-driven /&gt;\n        &lt;task:annotation-driven /&gt;\n        &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n        &lt;context:component-scan base-package=\"ca.utoronto.med.dc.*\" /&gt;\n\n    &lt;!-- Uncomment the following section to enable Aspects --&gt;\n    &lt;!-- &lt;aop:aspectj-autoproxy /&gt; \n        &lt;bean id=\"authorizationMgr\" class=\"ca.utoronto.med.dc.focus.aspect.AuthorizationMgr\" /&gt;\n    --&gt; \n\n        &lt;context:annotation-config\n            transaction-manager=\"transactionManager\" proxy-target-class=\"false\" /&gt;\n\n        &lt;util:properties id=\"projectProperties\" location=\"/WEB-INF/focus.properties\" /&gt;\n\n        &lt;!--Bean to load properties file --&gt;\n        &lt;bean id=\"placeholderConfig\"\n            class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n            &lt;property name=\"location\" value=\"/WEB-INF/focus.properties\" /&gt;\n        &lt;/bean&gt;\n\n        &lt;!-- mail --&gt;\n    &lt;!-- &lt;bean id=\"mailSender\" class=\"org.springframework.mail.javamail.JavaMailSenderImpl\"&gt;        \n            &lt;property name=\"host\" value=\"${mailserver.host}\" /&gt;\n            &lt;property name=\"port\" value=\"${mailserver.port}\" /&gt;\n            &lt;property name=\"username\" value=\"${mailserver.username}\" /&gt;\n            &lt;property name=\"password\" value=\"${mailserver.password}\" /&gt;\n        &lt;/bean&gt; --&gt;\n\n        &lt;!-- Configure the multipart resolver --&gt;\n        &lt;bean id=\"multipartResolver\" class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"&gt;\n\n            &lt;!-- one of the properties available; the maximum file size in bytes --&gt;\n            &lt;property name=\"maxUploadSize\" value=\"1000000\"/&gt;\n\n        &lt;/bean&gt;\n\n    &lt;/beans&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-security"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":55,"score":-1,"question_id":13251378,"title":"Setting field value from spring controller","body":"<p>HOw can i set a hidden input field value(in jsp) from spring  Controller?</p>\n"},{"tags":["spring","e-commerce","spring-data-neo4j","broadleaf-commerce"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13248106,"title":"ecommerce framework for Java and Neo4j as database","body":"<p>I am using Neo4j (Spring Data Neo4j) as my database and Java as a language(using the Spring framework). </p>\n\n<p>Now, I have to implement e-commerce platform as part of my application. I came across broadleaf e-commerce but wondering if i can Neo4j as DB instead of any relational DB.</p>\n\n<p>Also, Are there any other frameworks which gives me following features but give the option of configuring DB,\n1. Order management\n2. payment Gateway \n3. My Cart and order placement</p>\n\n<p>This is for B2B website.</p>\n\n<p>Kindly let me know some pointers on how to move ahead from this.</p>\n\n<p>Thanks,\nAbdul</p>\n"},{"tags":["spring","rest","spring-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13229584,"title":"@RequestBody or @ModelAttribute with Spring+REST web services","body":"<p>I am creating a Restful website and Web services for iPhone and android apps with <strong>Spring 3.1</strong>. In my application, i am using Spring Message Convertors (<code>org.springframework.http.converter.json.MappingJacksonHttpMessageConverter</code>) to converting JSON into Java object and vice-versa.</p>\n\n<blockquote>\n  <p>My objective is that there should be only single controller\n  method(same URL) that should be used by JSP page, Iphone/Andois app.</p>\n</blockquote>\n\n<p>I am using <strong>Spring form tag</strong> for object binding from JSP to controller with the help of <code>@ModelAttribute</code> like below.</p>\n\n<pre><code>       @RequestMapping(value = \"reset-password\", method = RequestMethod.POST)\n        public ModelAndView resetPassword(@ModelAttributeForgot forgotPassword,HttpServletRequest request) { \n           System.out.println(\"data recived==\"+forgotPassword.getNewPassword());\n        }\n</code></pre>\n\n<p>But the same is NOT working in the case if the data is being posted from iPhone/Android app and the result is:</p>\n\n<blockquote>\n  <p>data recived==null;</p>\n</blockquote>\n\n<p>So to overcome this problem i have used <code>@RequestBody</code> annotation at place of <code>@ModelAttribute</code>.</p>\n\n<p>So my controller looks like below:</p>\n\n<pre><code>    @RequestMapping(value = \"reset-password\", method = RequestMethod.POST)\n        public ModelAndView resetPassword(@RequestBody Forgot forgotPassword,HttpServletRequest request) { \n           System.out.println(\"data recived==\"+forgotPassword.getNewPassword());\n        }\n</code></pre>\n\n<p>It works then and the result i got is:</p>\n\n<blockquote>\n  <p>data recived==somedata;</p>\n</blockquote>\n\n<p>But @RequestBody then doesn't work with spring form on JSP page and the data doesn't get converted into object and i got <code>null</code> values.</p>\n\n<ol>\n<li>Can't i use <code>@RequestBody</code> annotation to post data in form of JSON\nwith spring form tag from JSP page??</li>\n<li>Is there any way by using which i can post data from my JSP form as\nwell as from I phone App by using only a single controller method(either @ModelAttribute or @RequestBody).</li>\n</ol>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>While writing <code>String</code> in place of Bean class, i am able to get the content in form of plain text, as below:</p>\n\n<p>@RequestMapping(value = \"reset-password\", method = RequestMethod.POST)\n            public ModelAndView resetPassword(@RequestBody String string,HttpServletRequest request) { }</p>\n\n<p><strong>Result from web page call:</strong></p>\n\n<blockquote>\n  <p>uid=11&amp;confirmPassword=somepassword&amp;newPassword=somepassword</p>\n</blockquote>\n\n<p><strong>Result from iPhone using web service call(in *<em>JSON</strong>)</em>*</p>\n\n<pre><code>{\"newPassword\":\"somepassword\",\"confirmPassword\":\"somepassword\",\"uid\":\"11\"}\n</code></pre>\n\n<p>But problem is that using this approach i have to parse the JSON string into Java object manually. And in web page content i have to find the values manually that i don't want.</p>\n\n<p>Please help.</p>\n\n<p>Regards,</p>\n\n<p>Arun Kumar</p>\n"},{"tags":["spring","liferay","portlet","liferay-6"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":532,"score":0,"question_id":11045933,"title":"Portlet:actionurl is not going to @Actionmapping in controller","body":"<p>I am using Liferay portal-6 with <code>Spring-3</code>.</p>\n\n<p>In my portlet, first it goes to the <code>@Rendermapping</code> without params and displays the default jsp,\nwhen I click on a button I am passing the <code>actionurl</code>, but its not going to the corresponding <code>@Actionmapping</code>.</p>\n\n<p>My <code>searchForm.jsp</code> looks like this:</p>\n\n<pre><code>&lt;portlet:actionURL var=\"showSearchResultsUrl\"&gt;\n    &lt;portlet:param name=\"myaction\" value=\"searchResults\" /&gt;\n&lt;/portlet:actionURL&gt;\n\n&lt;form:form id=\"searchForm\" name=\"searchForm\" commandName=\"patientStoryForm\"    method=\"POST\" action=\"${showSearchResultsUrl}\" enctype=\"multipart/form-data\" &gt;\n    &lt;input type=\"button\" name=\"search_btn\" value=\"Search\"/&gt;&lt;/td&gt;\n&lt;/form:form&gt;\n</code></pre>\n\n<p>My controller is like this:</p>\n\n<pre><code>@Controller(value = \"searchPatientStoryController\")\n@RequestMapping(value = \"VIEW\")\n@SessionAttributes(types = PatientStoryForm.class)\npublic class SearchPatientStoryController {\n\n    @RenderMapping\n    public String showSearchForm(RenderResponse response, Model model) {\n        return \"searchForm\";\n    }\n\n    @RenderMapping(params = \"myaction=searchResultsForm\")\n    public String showSearchResultsForm(RenderResponse response, Model model) {\n        return \"searchResultsForm\";\n    }\n\n    @ActionMapping(params = \"myaction=searchResults\")\n    public void searchResults(\n        @ModelAttribute(value = \"patientStoryForm\") PatientStoryForm patientStoryForm,\n        BindingResult bindingResult, ActionResponse response, ActionRequest request,\n        SessionStatus sessionStatus, Model model) {\n\n        response.setRenderParameter(\"myaction\", \"searchResultsForm\");\n    }\n}\n</code></pre>\n\n<p>When I click on button in <code>searchForm.jsp</code> it is supposed to go to <code>@Actionmapping</code> but it is not going.</p>\n\n<p>Please help me.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","java","spring","spring.net","data-access"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13237529,"title":"Spring.NET Equivalent for Java Spring Data Access Usage","body":"<p>What is the equivalent of \"SimpleJdbcCall\", \"MapSqlParameterSource\" and \"BeanPropertySqlParameterSource\" in Spring.NET? How can write the Java below in Spring.NET:</p>\n\n<pre><code>publicvoid create(T object) {\nif(object==null)\nreturn null;\nSimpleJdbcCall pspCreate = new SimpleJdbcCall(jdbcTemplate).withProcedureName(\"cr eate_sp\").withReturnValue().declareParameters(new SqlOutParameter(\"id\", Types.BIGINT));\nSqlParameterSource in = new BeanPropertySqlParameterSource(object);\nMap&lt;String, Object&gt; m = pspCreate.execute(in);\nlong id = m.containsKey(IDENTITY_VALUE)?(Long) m.get(IDENTITY_VALUE):0;\nint resultCode =m.containsKey(RETURN_VALUE)?(Integer) m.get(RETURN_VALUE):0;\n}\n\n\npublic List&lt;T&gt; retrieveAll(int pageNum, int pageSize) {\nSqlParameterSource in = new MapSqlParameterSource()\n.addValue(\"pageNum\", pageNum, Types.INTEGER)\n.addValue(\"pageSize\", pageSize, Types.INTEGER);\n\nSimpleJdbcCall pspRetrieveAll =new SimpleJdbcCall(jdbcTemplate).withProcedureName(\"re trieve_all_sp\").withReturnValue().returningResultS et(\"LIST\", BeanPropertyRowMapper.newInstance(UploadBatch.clas s)).returningResultSet(NO_OF_RECORDS, new RowMapper&lt;Long&gt;() {\n\n@Override\npublic Long mapRow(ResultSet rs, int rowNum) throws SQLException {\nreturn rs.getLong(1);\n}\n});\nMap&lt;String, Object&gt; m = pspRetrieveAll.execute(in);\nList&lt;T&gt; list=null;\nif(m.containsKey(LIST))\nlist = (List&lt;T&gt;) m.get(LIST);\n\nreturn list;\n} \n</code></pre>\n"},{"tags":["spring","m2eclipse","multi-module"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":12786060,"title":"Spring multi module fails to deploy with m2eclipse build due applicationContext.xml not loaded","body":"<p>Basically I have a multi module application:</p>\n\n<p>data\nbusiness\nweb-app</p>\n\n<p>in the web-app part there is <strong>web.xml</strong>\nwith this configuration for loading different applicationContext.xml configuration files:</p>\n\n<pre><code>&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;classpath*:META-INF/spring/applicationContext.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n\n<p>[...]</p>\n\n<pre><code>&lt;!-- Handles Spring requests --&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;empp-v2-web&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;WEB-INF/spring/webmvc-config.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n</code></pre>\n\n<p>my other two modules have each an META-INF/spring/applicationContext.xml.\nin webmvc-config.xml I do a component scan only for classes with @Controller annotation, meanwhile in the applicationContext I scan for everything in the base package except controllers.</p>\n\n<p>the problem is that when I try to autowire a bean in a controller I get always a NoSuchBeanDefinitionException. \nThis happens running the application as an exploded project with \"Add and Remove\" on the server configured in eclipse. If I do a maven build and deploy manually the application on the same server, the application works and the beans are autowired. \nDoes m2eclipse need some special configuration?\nTo me it seems that the applicationContext.xml are not loaded in this case.\nHow can verify that m2eclipse is coping resource files in the correct place?</p>\n"},{"tags":["spring","jms","hornetq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13246422,"title":"Which HornetQ libraries i need for JMS client?","body":"<p>I have a standalone hornetq server and a <em>JMS client</em> working with it! With respect to hornetq user-manual i should only add <em>jnp-client.jar</em> and <em>jms.jar</em> to client classpath. But when i trying use hornetq server (produce and consume messages), several ClassNotFoundExceptions thrown, so i forced adding these jar files to my client classpath:</p>\n\n<p><em>1. jms\n 2. jnp-client</em> \n 3. hornetq-jms-client \n 4. netty \n 5. hornetq-core-cilent \n 6. jboss-common</p>\n\n<p>Am i using <em>Hornetq core client</em> instead of <em>jms client</em>?? What jar files i really need for <em>jms client</em>?? </p>\n\n<p>My applicationContext.xml:</p>\n\n<pre><code>&lt;!-- JndiTemplate --&gt;\n&lt;bean id=\"jndiTemplate\" class=\"org.springframework.jndi.JndiTemplate\"&gt;\n        &lt;property name=\"environment\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"java.naming.factory.initial\"&gt;org.jnp.interfaces.NamingContextFactory&lt;/prop&gt;\n                &lt;prop key=\"java.naming.factory.url.pkgs\"&gt;org.jboss.naming:org.jnp.interfaces&lt;/prop&gt;\n                &lt;prop key=\"java.naming.provider.url\"&gt;jnp://localhost:1099&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;!-- Connection Factory --&gt;\n&lt;bean id=\"hornetqConnectionFactory\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiTemplate\" ref=\"jndiTemplate\"/&gt;\n        &lt;property name=\"jndiName\" value=\"/ConnectionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- Destionation --&gt;\n&lt;bean id=\"annotationDeleteCommandDestination\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiTemplate\" ref=\"jndiTemplate\"/&gt;\n        &lt;property name=\"jndiName\" value=\"/queue/command/annotation/deleteQueue\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- Message Listener --&gt;\n&lt;bean id=\"annotationMessageHandler\" class=\"command.messaging.handler.annotation.AnnotationMessageHandler\"&gt;\n        &lt;property name=\"annotationService\" ref=\"annotationService\"/&gt;\n&lt;/bean&gt;\n\n&lt;!-- Message Listener Container --&gt;\n&lt;bean id=\"annotationDeleteCommandMsgListenerContainer\"\n      class=\"org.springframework.jms.listener.DefaultMessageListenerContainer\" \n      p:connectionFactory-ref=\"hornetqConnectionFactory\"\n      p:destination-ref=\"annotationDeleteCommandDestination\"\n      p:cacheLevelName=\"CACHE_CONSUMER\"\n      p:messageListener-ref=\"annotationDeleteCommandMessageHandler\"\n      p:concurrentConsumers=\"10\"\n      p:maxConcurrentConsumers=\"50\"\n      p:receiveTimeout=\"5000\"\n      p:idleTaskExecutionLimit=\"10\n      p:idleConsumerLimit=\"5\" /&gt;\n\n&lt;!-- Message Producer --&gt;\n&lt;bean id=\"messageSender\" class=\"command.messaging.sender.MessageSender\"&gt;\n        &lt;property name=\"connectionFactory\" ref=\"hornetqConnectionFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["spring","soap-client"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13247501,"title":"Spring Framework. Issues with accessing SOAP Webservice","body":"<p>Im trying to access the SOAP webservice. from the client UI. Im getting the below error message while accessing the webservice. Im not sure what needs to be done to fix this issue. When I put debug points in the client code and run, the same code works fine and Im able to access the webservice fine in debug mode. Please Assist. </p>\n\n<pre><code>DEBUG http-8080-3 org.springframework.ws.soap.server.SoapMessageDispatcher - Endpoint invocation resulted in exception - responding with Fault\norg.springframework.ws.soap.saaj.SaajSoapEnvelopeException: Could not access envelope: Unable to create envelope from given source: ; nested exception is com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source: \nat org.springframework.ws.soap.saaj.SaajSoapMessage.getEnvelope(SaajSoapMessage.java:90)\nat org.springframework.ws.soap.AbstractSoapMessage.getSoapHeader(AbstractSoapMessage.java:41)\nat org.springframework.ws.soap.server.SoapMessageDispatcher.handleHeaders(SoapMessageDispatcher.java:102)\nat org.springframework.ws.soap.server.SoapMessageDispatcher.handleRequest(SoapMessageDispatcher.java:92)\nat org.springframework.ws.server.MessageDispatcher.dispatch(MessageDispatcher.java:205)\nat org.springframework.ws.server.MessageDispatcher.receive(MessageDispatcher.java:168)\nat org.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:88)\nat org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:57)\nat org.springframework.ws.transport.http.MessageDispatcherServlet.doService(MessageDispatcherServlet.java:197)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:563)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)\nat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)\nat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\nat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)\nat java.lang.Thread.run(Unknown Source)\nCaused by: com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source: \nat com.sun.xml.internal.messaging.saaj.soap.EnvelopeFactory.createEnvelope(Unknown Source)\nat com.sun.xml.internal.messaging.saaj.soap.ver1_1.SOAPPart1_1Impl.createEnvelopeFromSource(Unknown Source)\nat com.sun.xml.internal.messaging.saaj.soap.SOAPPartImpl.getEnvelope(Unknown Source)\nat org.springframework.ws.soap.saaj.Saaj13Implementation.getEnvelope(Saaj13Implementation.java:169)\nat org.springframework.ws.soap.saaj.SaajSoapMessage.getEnvelope(SaajSoapMessage.java:86)\n... 24 more\nCaused by: javax.xml.transform.TransformerException: javax.xml.transform.TransformerException: org.w3c.dom.DOMException: NAMESPACE_ERR: An attempt is made to create or change an object in a way which is incorrect with regard to namespaces.\nat com.icl.saxon.IdentityTransformer.transform(IdentityTransformer.java:92)\nat com.sun.xml.internal.messaging.saaj.util.transform.EfficientStreamingTransformer.transform(Unknown Source)\n... 29 more\nCaused by: javax.xml.transform.TransformerException: org.w3c.dom.DOMException: NAMESPACE_ERR: An attempt is made to create or change an object in a way which is incorrect with regard to namespaces.\nat com.icl.saxon.ContentEmitter.startElement(ContentEmitter.java:124)\nat org.xml.sax.helpers.XMLFilterImpl.startElement(Unknown Source)\nat com.sun.xml.internal.messaging.saaj.util.RejectDoctypeSaxFilter.startElement(Unknown Source)\nat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\nat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\nat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\nat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)\nat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)\nat com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)\nat org.xml.sax.helpers.XMLFilterImpl.parse(Unknown Source)\nat com.icl.saxon.IdentityTransformer.transform(IdentityTransformer.java:90)\n... 30 more\n</code></pre>\n"},{"tags":["java","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":13245886,"title":"How do I rollback transactions in multiple classes?","body":"<p>I have two classes, ServiceA and ServiceB, both which have methods calling the database</p>\n\n<p>in ServiceA i have the following code </p>\n\n<pre><code>public void updateData() {\n//some database updates\nserviceB.addDetails();\n//some more database updates\n}\n</code></pre>\n\n<p>here is my configuration in applicationContext for both the classes</p>\n\n<pre><code>&lt;bean id=\"serviceATarget\" class=\"com.company.service.ServiceA\"&gt;\n    &lt;property name=\"serviceB\" ref=\"serviceB\" /&gt;\n    &lt;property name=\"serviceADAO\" ref=\"serviceADAO\" /&gt;\n&lt;/bean&gt;\n&lt;bean id=\"serviceA\" class=\"org.springframework.transaction.interceptor.TransactionProxyFactoryBean\"&gt;\n    &lt;property name=\"transactionManager\" ref=\"transactionManager\" /&gt;\n    &lt;property name=\"target\" ref=\"serviceATarget\" /&gt;\n    &lt;property name=\"transactionAttributes\"&gt;\n    &lt;props&gt;\n        &lt;prop key=\"update*\"&gt;PROPAGATION_REQUIRED,-Exception&lt;/prop&gt;\n    &lt;/props&gt;\n&lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"serviceBTarget\" class=\"com.company.service.serviceB\"&gt;\n    &lt;property name=\"serviceBDAO\" ref=\"serviceBDAO\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"serviceB\" class=\"org.springframework.transaction.interceptor.TransactionProxyFactoryBean\"&gt;\n    &lt;property name=\"transactionManager\" ref=\"transactionManager\" /&gt;\n    &lt;property name=\"target\" ref=\"serviceBTarget\" /&gt;\n    &lt;property name=\"transactionAttributes\"&gt;\n    &lt;props&gt;\n    &lt;prop key=\"add*\"&gt;PROPAGATION_REQUIRED,-Exception&lt;/prop&gt;\n    &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The issue is that in ServiceA, if an exception occurs after the \"//some more database updates\" section, the updates made in <code>serviceB.addDetails()</code> are not being rolled back. </p>\n\n<p>Help would be appreciated. Thanks. </p>\n"},{"tags":["java","spring","validation"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13244856,"title":"Spring Dynamic Validation","body":"<p>I am new to Spring validations. Previously i have used Struts validations. For dynamic validations, we will configure in errormessages.properties file like \"errors.required={0} is required.\" later we will replace {0} with name. Is ther anyway in spring also for doing this. Please help me.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","caching"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12581812,"title":"Caching in Spring Web service?","body":"<p>I need to load some data from DB to Cache on server start up.And once a request came, need to take the data from this cache.Also need to refresh cache in frequent intervals.It would be help if somebody provide way for achieving this.I am using Spring 3.1.\nThanks</p>\n"},{"tags":["java","spring","dependency-injection","spring-security","deprecated"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13244020,"title":"Remember Me with Spring Security 3.1.3 - deprecated default constructors","body":"<p>I'm doing a login with Spring Security 3.1 but I get a warning to deprecated and I could not get erased, it seems that this configuration is for version 3.0</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/security\"\n    xmlns:beans=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n                    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n                    http://www.springframework.org/schema/security \n                    http://www.springframework.org/schema/security/spring-security-3.1.xsd\"&gt;\n\n    &lt;http auto-config=\"true\" use-expressions=\"true\"&gt;\n        &lt;intercept-url pattern=\"/pages/admin/**\" access=\"hasRole('ROLE_ADMIN')\" /&gt;\n        &lt;intercept-url pattern=\"/**\" access=\"permitAll\"/&gt;\n        &lt;form-login login-page=\"/pages/login.jsf\"/&gt;\n        &lt;remember-me key=\"jsfspring-sec\" services-ref=\"rememberMeServices\"/&gt;\n        &lt;logout\n            invalidate-session=\"true\"\n            delete-cookies=\"JSESSIONID,SPRING_SECURITY_REMEMBER_ME_COOKIE\"\n            logout-success-url=\"/pages/login.jsf\"/&gt;\n    &lt;/http&gt;\n\n    &lt;authentication-manager alias=\"authenticationManager\"&gt;\n        &lt;authentication-provider ref=\"rememberMeAuthenticationProvider\"&gt;\n        &lt;/authentication-provider&gt;\n        &lt;authentication-provider&gt;\n            &lt;user-service id=\"userDetailsService\"&gt;\n                &lt;user authorities=\"ROLE_ADMIN\" name=\"admin\" password=\"admin\" /&gt;\n            &lt;/user-service&gt;\n        &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n\n    &lt;beans:bean id=\"rememberMeServices\"\n        class=\"org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices\"&gt;\n        &lt;beans:property  name=\"key\" value=\"jsfspring-sec\" /&gt;\n        &lt;beans:property  name=\"userDetailsService\" ref=\"userDetailsService\" /&gt;\n        &lt;beans:property  name=\"alwaysRemember\" value=\"true\" /&gt;\n        &lt;beans:property  name=\"tokenValiditySeconds\" value=\"60\" /&gt;\n    &lt;/beans:bean&gt;\n\n\n    &lt;beans:bean id=\"rememberMeAuthenticationProvider\"\n        class=\"org.springframework.security.authentication.RememberMeAuthenticationProvider\"&gt;\n        &lt;beans:property name=\"key\" value=\"jsfspring-sec\"/&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;beans:bean id=\"rememberMeFilter\"\n        class=\"org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter\"&gt;\n        &lt;beans:property name=\"rememberMeServices\" ref=\"rememberMeServices\"/&gt;\n        &lt;beans:property name=\"authenticationManager\" ref=\"authenticationManager\" /&gt;\n    &lt;/beans:bean&gt;\n\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>I could not find how to do it with Spring 3.1. Can someone help me? The last three beans are deprecated, I would appreciate help. Here is the url of the repository in GitHub: <a href=\"https://github.com/wmanriques/spring_template\" rel=\"nofollow\">https://github.com/wmanriques/spring_template</a></p>\n"},{"tags":["java","spring","validation","spring-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13246199,"title":"Spring 3.0 MVC custom WebArgumentResolver skips validation","body":"<p>We've got a couple of <code>@RequestMapping</code> annotated controllers methods that do stuff. They each have more than 1 argument that we would like to be bound. For example:</p>\n\n<pre><code>@RequestMapping(value = \"/a/b\", method = RequestMethod.GET)\n@ResponseBody\npublic Response getAB(ARequest aRequest, BRequest bRequest) throws ServiceException {\n    ...\n}\n</code></pre>\n\n<p>This obviously works fine. However, one quirk in our requirements is that we get request parameters that contain <em>underscores</em>. For example; on the endpoint above we'd get a request that looks like: <code>http://x:8000/a/b?req_param=1</code>. This causes default Spring binding to fail, because in our objects we'd like to have bound we define <code>req_param</code> camel-cased (<code>reqParam</code>) rather than use underscores in our Java code.</p>\n\n<p>To solve this we have implemented our own annotation (<code>@Camelize</code>) and our own custom <code>WebArgumentResolver</code>, which we've registered in the Spring context. We then annotate our controller method arguments with <code>@Camelize</code>, which causes our custom <code>WebArgumentResolver</code> to step in and correct the binding. This also works fine.</p>\n\n<p>Now the issues arise, more specifically it would appear that when we want to also <em>validate</em> our arguments this fails. For example, continuing with the example above:</p>\n\n<pre><code>@RequestMapping(value = \"/a/b\", method = RequestMethod.GET)\n@ResponseBody\npublic Response getAB(@Camelize @Valid ARequest aRequest, Errors aRequestErrors, BRequest bRequest) throws ServiceException {\n    ...\n}\n</code></pre>\n\n<p>This fails with the exception: <code>java.lang.IllegalStateException: Errors/BindingResult argument declared without preceding model attribute. Check your handler method signature!</code>.</p>\n\n<p>It would appear that we cannot use our custom <code>WebArgumentResolver</code> and validate using <code>@Valid</code> at the same time. We have narrowed it down to the custom <code>WebArgumentResolver</code>, in the sense that <em>as soon as</em> this <em>doesn't</em> return <code>UNRESOLVED</code>, Spring MVC will just not bother with validation and throw the exception above.</p>\n\n<ul>\n<li>Can anyone confirm that this is the expected behaviour?</li>\n<li>Is there a work-around for this? Currently we're thinking about removing the custom <code>WebArgumentResolver</code> and replacing it with a filter, but this seems very intrusive for what we need.</li>\n</ul>\n\n<p>Thanks!</p>\n\n<p><strong>Edit:</strong> we're using Spring 3.0.5.</p>\n"},{"tags":["spring","tomcat","jms","jndi","hornetq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13049736,"title":"JNDI does not work with HornetQ and tomcat","body":"<p>I'm trying running JMS application using hornetq on tomcat! I tried following <a href=\"http://wash-inside-out.blogspot.com/2010/08/hornetq-jms-integration-with-tomcat.html\" rel=\"nofollow\">this article</a>. I put jndi.properties in my client class path;  jndi.properties: </p>\n\n<pre><code>java.naming.factory.initial=org.apache.naming.java.javaURLContextFactory \njava.naming.factory.url.pkgs=org.apache.naming\n</code></pre>\n\n<p>I added these dependencies to pom.xml:</p>\n\n<pre><code>&lt;dependency&gt; \n    &lt;groupId&gt;tomcat&lt;/groupId&gt; \n    &lt;artifactId&gt;naming-factory&lt;/artifactId&gt; \n    &lt;version&gt;5.5.23&lt;/version&gt; \n    &lt;scope&gt;test&lt;/scope&gt; \n&lt;/dependency&gt; \n&lt;dependency&gt; \n     &lt;groupId&gt;tomcat&lt;/groupId&gt; \n     &lt;artifactId&gt;naming-resources&lt;/artifactId&gt; \n     &lt;version&gt;5.5.23&lt;/version&gt; \n     &lt;scope&gt;test&lt;/scope&gt; \n &lt;/dependency&gt;\n</code></pre>\n\n<p>My JMS spring beans:</p>\n\n<pre><code>&lt;bean id=\"jndiTemplate\" class=\"org.springframework.jndi.JndiTemplate\"&gt;\n        &lt;property name=\"environment\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"java.naming.factory.initial\"&gt;org.apache.naming.java.javaURLContextFactory&lt;/prop&gt;\n                &lt;prop key=\"java.naming.factory.url.pkgs\"&gt;org.apache.naming&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;!-- Connection Factory --&gt;\n&lt;bean id=\"hornetqConnectionFactory\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;property name=\"jndiTemplate\" ref=\"jndiTemplate\"/&gt;\n    &lt;property name=\"jndiName\" value=\"/ConnectionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- Destinations --&gt;\n&lt;bean id=\"annotationDeleteCommandDestination\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;property name=\"jndiTemplate\" ref=\"jndiTemplate\"/&gt;\n    &lt;property name=\"jndiName\" value=\"/queue/command/annotation/deleteQueue\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I'm using HornetQ default server (standalone, non-clustered)</p>\n\n<p>hornetq-jms.xml:</p>\n\n<pre><code>&lt;queue name=\"annotationDeleteCommandQueue\"&gt;\n    &lt;entry name=\"/queue/command/annotation/deleteQueue\"/&gt;\n&lt;/queue&gt;\n\n&lt;connection-factory name=\"NettyConnectionFactory\"&gt;\n      &lt;xa&gt;false&lt;/xa&gt;\n      &lt;connectors&gt;\n         &lt;connector-ref connector-name=\"netty\"/&gt;\n      &lt;/connectors&gt;\n      &lt;entries&gt;\n         &lt;entry name=\"/ConnectionFactory\"/&gt;\n      &lt;/entries&gt;\n   &lt;/connection-factory&gt;\n</code></pre>\n\n<p>But when i starting tomcat i get this error:</p>\n\n<pre><code> org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hornetqConnectionFactory' defined in ServletContext resource [/WEB-INF/classes/config/spring/applicationContext-jms.xml]: \nInvocation of init method failed; nested exception is javax.naming.NameNotFoundException: Name ConnectionFactory is not bound in this Context .........\n</code></pre>\n\n<p>What is wrong?\nShould i put any jar files in the tomcat classpath? (which jars?)\nShould i put queues and connection factories definitions in the tomcat configs? (how?)\nCan i disable JNDI in tomcat and use hornetq standalone JNDI instead?</p>\n"},{"tags":["java","eclipse","spring","java-ee","jar"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13245570,"title":"Jar file ADD DIRECTORY ENTRIES Eclipse option while exporting jar","body":"<p>I don't whether I am asking correct question or not but want to clear my doubt.</p>\n\n<p>Actually I came across the scenario of referring class files from jar file.\nI mean to say I have one backend java project say ABC with application-context.xml file in it.</p>\n\n<p>Now I created jar file of ABC project and used in one web based application.</p>\n\n<p>Here I am facing a problem of beans not getting Autowired and came to know the problem was,\nWhen I export the jar file of ABC project using Eclipse, I have not selected \n\"ADD DIRECTORY ENTRIES\" checkbox which later on I did and all worked.</p>\n\n<p>just to see what changes has been made by checking this box in a jar file so that all worked,</p>\n\n<p>So I created 2 jar files one with \"ADD DIRECTORY ENTRIES\" checked and one with unchecked, then I compared both jar using beyond compare and found there is no difference at all.</p>\n\n<p>Can someone explain me what exactly \"ADD DIRECTORY ENTRIES\" does?</p>\n\n<p>what I know is it should add complete structure instead of single path like \ncom/company/project/MyJavaFile.class</p>\n\n<blockquote>\n  <p>com/company/</p>\n  \n  <p>com/company/project/</p>\n  \n  <p>com/company/project/MyJavaFile.class</p>\n</blockquote>\n\n<p>Please correct me if I am wrong.   </p>\n"},{"tags":["spring","junit","mybatis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13130938,"title":"JUnit testing MyBatis-Spring project","body":"<p>An <code>IllegalStateException</code> gets thrown on attempting to JUnit test a MyBatis-Spring project.</p>\n\n<p>The problem appears to be with <strong>Autowiring</strong> MyBatis Mapper Beans (pardon my jargon since I'm new to the whole MyBatis-Spring-JUnit setup). I inherited the setup from somebody else. Let me know if any other information is relevent to get help.</p>\n\n<p>The setup described below works when I expose the whole thing as a web-service. But, it fails when I try to JUnit test it. How can I Autowire the mapper <strong>while testing</strong>?</p>\n\n<h1>Setup</h1>\n\n<h3>Under main/java</h3>\n\n<ul>\n<li>persistence folder: ProductMapper.java</li>\n<li>service folder: ProductService.java</li>\n<li>ws folder: BrowserService.java</li>\n<li>ws/impl folder: BrowserServiceImpl.java</li>\n</ul>\n\n<h3>Under main/resources</h3>\n\n<ul>\n<li>persistence folder: ProductMapper.xml</li>\n</ul>\n\n<h3>BrowserService.java</h3>\n\n<pre><code>class BrowserServiceImpl {\n\n    private ProductService productService;\n\n    // setters and getters\n    // Methods\n}\n</code></pre>\n\n<h3>ProductService.java</h3>\n\n<pre><code>class ProductService {\n\n    @Autowired\n    private ProductMapper productMapper;\n\n    // Methods\n}\n</code></pre>\n\n<h3>Context.xml</h3>\n\n<pre><code>&lt;beans&gt;\n    &lt;bean id=\"browserSvc\" class=\"com.comp.team.proj.ws.impl.BrowserServiceImpl\"&gt;\n        &lt;property name=\"productService\" ref=\"productService\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- MyBatis Config --&gt;\n    &lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt;\n        &lt;property name=\"basePackage\" value=\"com.comp.team.proj.persistence\" /&gt;\n        &lt;property name=\"annotationClass\" value=\"org.springframework.stereotype.Repository\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\"&gt;\n        &lt;property name=\"driverClassName\" value=\"oracle.jdbc.OracleDriver\"/&gt;\n        &lt;property name=\"url\" value=\"jdbc:oracle:thin:@xxx.xxx.xxx.com:xxxx:xxx\"/&gt;\n        &lt;property name=\"username\" value=\"myusername\"/&gt;\n        &lt;property name=\"password\" value=\"mypassword\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Other beans --&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>If you are curious what the Exception looks like:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n...\nCaused by: org.springframework.beans.factory.BeanCreationException: \n  Could not autowire field: private com.comp.team.proj.persistence.ProductMapper \n    com.comp.team.proj.service.ProductService.productMapper;\n\nnested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: \n  No matching bean of type [com.comp.team.proj.persistence.ProductMapper]\n    found for dependency:\n       expected at least 1 bean which qualifies as autowire candidate for this \n       dependency.\n...\n</code></pre>\n\n<h1>EDIT</h1>\n\n<p>See the dataSource <em>Bean</em> in the updated <code>Context.xml</code> above. Does the configuration look correct?</p>\n\n<p>Looks like one problem is with the <strong>dataSource</strong> setup. I make this assumption because the JUnit test runs, but throws an exception. So, it's not the JUnit setup most likely. If the dataSource setup is correct, MyBatis will successfully instantiate the <strong>Mapper</strong> Bean and the Autowiring will succeed.</p>\n\n<h2>Test File</h2>\n\n<pre><code>@ContextConfiguration\n@RunWith(SpringJUnit4ClassRunner.class)\npublic class ProductCountTest extends AbstractTransactionalJUnit4SpringContextTests {\n\n    @Autowired\n    protected BrowserService browserSvc;\n\n    @Test\n    public void testGetProductCount() {\n        long count = browserSvc.getProductCount();\n\n        assertTrue(count &gt; 0);\n    }\n\n}\n</code></pre>\n\n<p>It finds the <code>Context.xml</code> file without any problem as I placed it in the right directory.</p>\n"},{"tags":["java","spring","realpath","webcontent"],"answer_count":6,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":9748,"score":5,"question_id":2786426,"title":"How can I get real path for file in my WebContent folder?","body":"<p>I need to get real path for file in my WebContent directory, so that framework that I use can access that file. It only takes String file as attribute, so I need to get the real path to this file in WebContent directory.</p>\n\n<p>I use Spring Framework, so solution should be possible to make in Spring.</p>\n"},{"tags":["java","json","spring","hibernate","jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13244039,"title":"Cycle in Hibernate OneToMany relation","body":"<p>I use Hibernate and </p>\n\n<p>have two entities(City and Region) with OneToMany relation.</p>\n\n<p>the First:</p>\n\n<pre><code> @Entity\n @Table(name = \"p_region\")\n public class Region implements Serializable{\n\n@OneToMany(mappedBy = \"region\",fetch= FetchType.LAZY,  cascade = CascadeType.MERGE)\nprivate List&lt;City&gt; citys;\n\nprivate static final long serialVersionUID = 1L;\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Integer id;\n\n\nprivate String name;\n\n//++++++++++++++++++++ GETSET\n\npublic List&lt;City&gt; getCitys() {\n    return citys;\n}\n\npublic void setCitys(List&lt;City&gt; citys) {\n    this.citys = citys;\n}\n\npublic Integer getId() {\n    return id;\n}\n\npublic void setId(Integer id) {\n    this.id = id;\n}\n\npublic String getName() {\n    return name;\n}\n\npublic void setName(String name) {\n    this.name = name;\n}\n\n }\n</code></pre>\n\n<p>and the second one:</p>\n\n<pre><code>    @Entity\n    @Table(name = \"p_city\")\n    public class City implements Serializable {\nprivate static final long serialVersionUID = 1L;\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Integer id;\n\n@NotEmpty(message = \"Название не должно быть пустым\")\n@Length(max = 10, min = 2, message = \"Название должно быть менее 2 символов и не \n более 100\")\n     private String cityName;\n\n@NotEmpty(message = \"Код города не должно быть пустым\")\nprivate String cityCode;\n    @Column(name = \"zone\")\n    private Integer zone;\n\n\n@Basic(optional = true)\n@Temporal(javax.persistence.TemporalType.TIMESTAMP)\nprivate Date entryDate = Calendar.getInstance().getTime();\n\n@ManyToOne()\nprivate Region region;\n\n@Basic(optional = true)\nprivate String zip_code;\n\n// GET SET ::::::::::::::::::::::::::::::::::\n    public Integer getZone() {\n    return zone;\n    }\n\n    public void setZone(Integer zone) {\n    this.zone = zone;\n    }\npublic Region getRegion() {\n    return region;\n}\n\npublic void setRegion(Region region) {\n    this.region = region;\n}\n\npublic void delete() {\n    System.out.println(\"QQQQQQQQQQQQQQQQQQQQQQ\");\n}\n\npublic String getCityCode() {\n    return cityCode;\n}\n\npublic void setCityCode(String cityCode) {\n    this.cityCode = cityCode;\n}\n\npublic String getCityName() {\n    return cityName;\n}\n\npublic void setCityName(String cityName) {\n    this.cityName = cityName;\n}\n\npublic Date getEntryDate() {\n    return entryDate;\n}\n\npublic void setEntryDate(Date entryDate) {\n    this.entryDate = entryDate;\n}\n\npublic Integer getId() {\n    return id;\n}\n\npublic void setId(Integer id) {\n    this.id = id;\n}\n\npublic String getZip_code() {\n    return zip_code;\n}\n\npublic void setZip_code(String zip_code) {\n    this.zip_code = zip_code;\n}\n\n     }\n</code></pre>\n\n<p><strong>When I try to get simple Object(City) with JSON it returns the cycle:</strong></p>\n\n<pre><code>     {\"id\":577,\"region\":{\"name\":\"нет региона\",\"id\":15,\"citys\":[{\"id\":577,\"region\":  \n     {\"name\":\"нет региона\",\"id\":15,\"citys\":[{\"id\":577,\"region\":{\"name\":\"нет   \n     региона\",\"id\":15,\"citys\":[{\"id\":577,\"region\":{\"name\":\"нет\n     региона\",\"id\":15,\"citys\":[{\"id\":577,\"region\":{\"name\":\"нет    \n     региона\",\"id\":15,\"citys\":[{\"id\":577,\"region\":{\"name\":\"нет \n     региона\",\"id\":15,\"citys\":[{\"id\":577,\"region\":{\"name\":\"нет......so on.\n</code></pre>\n\n<p><strong>Is there any solutions for this issue?</strong></p>\n"},{"tags":["spring","ehcache"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13224653,"title":"@cacheable of com.googlecode.ehcache.annotations.Cacheable not working with spring","body":"<p>I am new to ehcache and spring annotations integration.  Am using the <strong>com.googlecode.ehcache.annotations.Cacheable</strong> annotation as below with <strong>spring 2.5</strong> and it never caches the return values. <code>cache.getKeys()</code> return an empty list and the method gets invoked every time controller makes a call.\nPlease please help me out.</p>\n\n<p>The following method is the implementation of an interface that would be invoked by the controller upon request from a mapped jsp <code>URL.cacheID</code> is always constant and my idea is to store the retrieved values in a hashmap and access these maps when ever required in the application.</p>\n\n<pre><code> @Override\n @Cacheable(cacheName=\"partnerMapping\")\n public String retrievePartnerMappings(String cacheID) {\n   partnerCodeToNameMapping = new HashMap&lt;String, String&gt;();\n   partnerNameToCodeMapping = new HashMap&lt;String, String&gt;();\n   Cache cache = cacheManager.getCache(\"partnerMapping\");\n   log.debug(cache.getKeys().toString());\n   try {\n   log.debug(\"Querying for partner mappings...\");\n   Collection&lt;PartnerMapping&gt; partnerMappings = this.getSimpleJdbcTemplate()\n      .query(\n          sqlStatements.getProperty(\"selectAllSql\"),\n          ParameterizedBeanPropertyRowMapper\n              .newInstance(PartnerMapping.class));\n   for (PartnerMapping mapping : partnerMappings) {\n     partnerCodeToNameMapping.put(mapping.getPartnerCode().toUpperCase(),\n        mapping.getPartnerName());\n     partnerNameToCodeMapping.put(mapping.getPartnerName(), mapping\n        .getPartnerCode().toUpperCase());\n   }\n   return \"success\";\n } catch (DataAccessException e) {\n  log.error(\"Unable to retrieve the partner mappings!!\", e);\n  return \"fail\";\n }\n}\n</code></pre>\n\n<p>ehCache.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ehcache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:noNamespaceSchemaLocation=\"http://ehcache.org/ehcache.xsd\"&gt;\n\n&lt;cache name=\"partnerMapping\" maxElementsInMemory=\"100\" eternal=\"false\"\n   overflowToDisk=\"false\" timeToLiveSeconds=\"120\" timeToIdleSeconds=\"120\"/&gt;\n&lt;/ehcache&gt;\n</code></pre>\n\n<p>spring-context.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \nxmlns:context=\"http://www.springframework.org/schema/context\"\nxmlns:ehcache=\"http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans                         \nhttp://www.springframework.org/schema/beans/spring-beans-2.5.xsd        \nhttp://www.springframework.org/schema/context \nhttp://www.springframework.org/schema/context/spring-context-2.5.xsd\nhttp://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring \nhttp://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.1.xsd\"&gt;\n\n  &lt;ehcache:annotation-driven /&gt;\n  &lt;context:annotation-config /&gt;\n  &lt;context:component-scan base-package=\"com.spring.ehcache\" /&gt;\n\n  &lt;ehcache:config cache-manager=\"cacheManager\"&gt;\n    &lt;ehcache:evict-expired-elements interval=\"60\" /&gt;\n  &lt;/ehcache:config&gt;\n\n  &lt;bean id=\"cacheManager\" class=\"org.springframework.cache.ehcache.EhCacheManagerFactoryBean\"&gt;\n    &lt;property name=\"configLocation\"  value=\"/WEB-INF/ehcache.xml\"/&gt;\n  &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["java","spring","map","javabeans"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13243376,"title":"How to merge multiple maps into one in Spring","body":"<p>I have several maps defined in my context file.  Is there a way to combine those maps into one map that contains all of their entries, without writing Java code (and without using nested maps)?  I'm looking for the equivalent of Map m = new HashMap(); m.putAll(carMap); m.putAll(bikeMap); \nSeems like there should be a way to do this in Spring context file, but the Spring 3.0 reference doc section on util:map doesn't cover this use case.</p>\n\n<pre><code>&lt;!-- I want to create a map with id \"vehicles\" that contains all entries of the other maps --&gt;\n\n&lt;util:map id=\"cars\"&gt;\n    &lt;entry key=\"groceryGetter\" value-ref=\"impreza\"/&gt;\n&lt;/util:map&gt;\n\n&lt;util:map id=\"bicycles\"&gt;\n    &lt;entry key=\"commuterBike\" value-ref=\"schwinn\"/&gt;\n&lt;/util:map&gt;\n</code></pre>\n"},{"tags":["java","spring","hibernate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13234498,"title":"Hibernate Exception When deleting","body":"<p>When i'm trying to delete object it's throwing excption <code>org.springframework.dao.DataIntegrityViolationException: could not delete</code>. </p>\n\n<p>Please verify my classes.</p>\n\n<pre><code>class Address{\n}\n\nclass Location{\n    @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private Address address;\n}\n\nclass SupplierLocation{\n\n    @ManyToOne(fetch=FetchType.LAZY)\n    @Cascade( { CascadeType.ALL })\n    private Location locations;\n\n    @ManyToOne(fetch=FetchType.LAZY)\n    private Supplier supplier;\n\n}\n\nLocation location;\n</code></pre>\n\n<p>Which object we need to remove. i'm tried like <code>sess.delete(location)</code>.</p>\n\n<p>Thanks in advance</p>\n\n<p>Best Regards,\nRavi</p>\n"},{"tags":["spring","jboss5.x","esb","spring-integration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13243250,"title":"Channel dropping messages how to debug","body":"<p>I am fairly new to Spring integration, but learning so far.</p>\n\n<p>I am getting messages from a channel named \"Channel-1\" and passing on to \"Channel-2\" through a bridge</p>\n\n<pre><code>&lt;task:executor id=\"Channel2Executor\" pool-size=\"${executor.pool.size}\" rejection-policy=\"CALLER_RUNS\" /&gt;\n\n&lt;int:channel id=\"Channel-2\"&gt;\n    &lt;int:dispatcher task-executor=\"Channel2Executor\"/&gt;\n&lt;/int:channel&gt;\n\n&lt;int:bridge id=\"adapterParserBridge\" input-channel=\"Channel-1\" output-channel=\"Channel-2\"&gt;\n&lt;/int:bridge&gt;\n</code></pre>\n\n<p>Strange thing is that when I deploy the application in JBoss, first time the message passes through and makes to end of my subsequent flow, though there are some errors in later part of flow.</p>\n\n<p>Second time onwards the message reaches till \"Channel-1\", but never makes beyond - no errors, no logs, all on DEBUG mode, no trace of anything.</p>\n\n<p>So my questions are:</p>\n\n<p>1) Are the errors which are happening in later part of flow cause of such an issue?</p>\n\n<p>2) How to debug such an drop of message for no reason and without any error?</p>\n\n<p>3) Any other suggestions or pointers to drill through these channels would be great</p>\n"},{"tags":["java","spring","factory-method"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":5159,"score":1,"question_id":6784960,"title":"Spring and passing parameters to factory-method in runtime","body":"<p>The documentation of method context.getBean(name, user) says</p>\n\n<blockquote>\n  <p>Allows for specifying explicit constructor arguments / factory method\n  arguments</p>\n</blockquote>\n\n<p>but no matter what I do (tried everything), with the most logical setting I get this when the beans are being loaded up during initialization:</p>\n\n<blockquote>\n  <p>org.springframework.beans.factory.UnsatisfiedDependencyException:\n  Error creating bean with name 'fileValidator' defined in\n  PortletContext resource\n  [/WEB-INF/classes/context/customer-form-portlet.xml]: Unsatisfied\n  dependency expressed through constructor argument with index 0 of type\n  [com.liferay.portal.model.User]: Ambiguous factory method argument\n  types - did you specify the correct bean references as factory method\n  arguments?\n      org.springframework.beans.factory.UnsatisfiedDependencyException:\n  Error creating bean with name 'fileValidator' defined in\n  PortletContext resource\n  [/WEB-INF/classes/context/customer-form-portlet.xml]: Unsatisfied\n  dependency expressed through constructor argument with index 0 of type\n  [com.liferay.portal.model.User]: Ambiguous factory method argument\n  types - did you specify the correct bean references as factory method\n  arguments?</p>\n</blockquote>\n\n<pre><code>&lt;bean id=\"fileValidator\" \n      class=\"cz.instance.transl.validation.file.FileValidator\" \n      factory-method=\"createInstance\" /&gt;\n</code></pre>\n\n<hr>\n\n<pre><code>    private FileValidator(User user) {\n        this.user = user;\n    }\n\n    public static FileValidator createInstance(User user) {\n        return new FileValidator(user);\n    }\n</code></pre>\n\n<p>The commentary says you can do it,  but if you specify constructor arguments in xml definiton of that bean or not, it fails.</p>\n"},{"tags":["spring","spring-security"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13242823,"title":"Spring config location file not found exception","body":"<p>In my web app i'm trying to use spring security. I have the following project structure:</p>\n\n<p><img src=\"http://i48.tinypic.com/17q1zq.png\" alt=\"Project structure\"></p>\n\n<p>In my web.xml i set the configLocations like this:</p>\n\n<p><img src=\"http://i45.tinypic.com/smpvmw.png\" alt=\"Project structure\"></p>\n\n<p>And in my HibernateUtil, i create the ClassPathXmlApplicationContext like this:</p>\n\n<p><img src=\"http://i49.tinypic.com/ev1jxv.png\" alt=\"Project structure\"></p>\n\n<p>But, when i execute the app, i get the following errors:</p>\n\n<pre><code>GRAVE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML    document from class path resource [resources/applicationContext.xml]; nested exception is    java.io.FileNotFoundException: class path resource [resources/applicationContext.xml] cannot     be opened because it does not exist\nat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)\nat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\nat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\nat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\nat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\nat org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\nat org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\nat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)\nat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:527)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:441)\nat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)\nat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)\nat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)\nat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)\nat org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)\nat org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)\nat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\nat java.util.concurrent.FutureTask.run(FutureTask.java:138)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\nat java.lang.Thread.run(Thread.java:680)\nCaused by: java.io.FileNotFoundException: class path resource [resources/applicationContext.xml] cannot be opened because it does not exist\nat org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:157)\nat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)\n... 20 more\n</code></pre>\n\n<p>What might be wrong?</p>\n"},{"tags":["spring","redirect","liferay-6"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13242061,"title":"ModelAndView redirect request does not work in liferay 6","body":"<p>Our Spring based portlet works great on Liferay 5 but not on Liferay 6. </p>\n\n<p>For some reason when doing redirect using</p>\n\n<pre><code>new ModelAndView(\"redirect\", desiredRedirectViewId, listOfReports);\n</code></pre>\n\n<p>It works only on liferay 5.2.3. but not on liferay 6</p>\n\n<p>BTW:I am using Spring 3.0.2</p>\n"},{"tags":["java","spring","tomcat","maven"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13241560,"title":"\"Bean name must not be empty\" error on spring bean that has a bean name","body":"<p>I am puzzled at the error I am getting when trying to start up tomcat with my maven build (shown below). For some context, I am converting an old app into a maven project. The error comes when I run: </p>\n\n<pre><code>mvn tomcat:run-war\n</code></pre>\n\n<p>The project builds fine, but blows up when parsing the applicationContext files on server startup. applicationContext-main.xml (shown below) contains references to beans defined in both applicationContext-foo.xml and applicationContext.shared.xml.</p>\n\n<p>The applicationContext files work as expected in the non-maven app, and this is a direct copy of the applicationContext files.</p>\n\n<p>I've tried some debugging and have found that the external references to other application context files are being resolved fine, adding a name attribute results in: a bean with the name \"cacheManager\" has already been defined in this file, swapping the id for the name attribute results in the same \"bean name must not be empty error\", and making the constructor arg an empty map results in the same error.</p>\n\n<p>I'm puzzled. I did come across this <a href=\"http://forum.springsource.org/archive/index.php/t-26844.html\" rel=\"nofollow\">post</a> which reported the same error, and was caused by a prefix being set on the beans. I'm unaware of any prefix being set in my case.</p>\n\n<p>Any ideas on how to resolve this? Thanks in advance.</p>\n\n<pre><code>Nov 05, 2012 3:10:11 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\nINFO: Loading XML bean definitions from class path resource [com/xactsites/shared/applicationContext-shared.xml]\nNov 05, 2012 3:10:11 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\nINFO: Loading XML bean definitions from class path resource [com/xactsites/foo/applicationContext-foo.xml]\nNov 05, 2012 3:10:11 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\nINFO: Loading XML bean definitions from class path resource [com/xactsites/help/applicationContext-help.xml]\nNov 05, 2012 3:10:11 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\nINFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/classes/applicationContext-main.xml]\nNov 05, 2012 3:10:11 PM org.springframework.web.context.ContextLoader initWebApplicationContext\nSEVERE: Context initialization failed\norg.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unexpected failure during bean definition parsing\nOffending resource: ServletContext resource [/WEB-INF/classes/applicationContext-main.xml]\nBean 'cacheManager'; nested exception is java.lang.IllegalArgumentException: Bean name must not be empty\nCaused by: java.lang.IllegalArgumentException: Bean name must not be empty\n    at org.springframework.util.Assert.hasText(Assert.java:161)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.registerBeanDefinition(DefaultListableBeanFactory.java:305)\n    at org.springframework.beans.factory.xml.UtilNamespaceHandler$MapBeanDefinitionParser.parse(UtilNamespaceHandler.java:163)\n    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:78)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1147)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseNestedCustomElement(BeanDefinitionParserDelegate.java:1185)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parsePropertySubElement(BeanDefinitionParserDelegate.java:844)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parsePropertySubElement(BeanDefinitionParserDelegate.java:832)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parsePropertyValue(BeanDefinitionParserDelegate.java:828)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseConstructorArgElement(BeanDefinitionParserDelegate.java:734)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseConstructorArgElements(BeanDefinitionParserDelegate.java:641)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:563)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:421)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:390)\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:165)\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:142)\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:89)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:499)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:407)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:357)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:126)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:142)\n    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:123)\n    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:91)\n    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:94)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:294)\n    at org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.refresh(AbstractRefreshableWebApplicationContext.java:156)\n    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:246)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:184)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:49)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)\n    at org.apache.catalina.startup.Embedded.start(Embedded.java:825)\n    at org.codehaus.mojo.tomcat.AbstractRunMojo.startContainer(AbstractRunMojo.java:558)\n    at org.codehaus.mojo.tomcat.AbstractRunMojo.execute(AbstractRunMojo.java:255)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)\n    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)\n    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)\n</code></pre>\n\n<p>applicationContext-main.xml</p>\n\n<pre><code>...\n&lt;bean id=\"cacheManager\" class=\"com.foo.bar.commons.caching.MainCacheManager\"&gt;\n    &lt;constructor-arg&gt;\n        &lt;util:map&gt;\n            &lt;entry key=\"RIGHTS_CACHES\"&gt;\n                &lt;util:list value-type=\"com.foo.bar.commons.caching.MainCache\"&gt;\n                    &lt;ref bean=\"aCache\" /&gt;\n                    &lt;ref bean=\"gRepository\" /&gt;\n                    &lt;ref bean=\"gRCache\" /&gt;\n                    &lt;ref bean=\"uRCache\" /&gt;\n                    &lt;ref bean=\"userService\" /&gt;\n                    &lt;ref bean=\"vUService\" /&gt;\n                    &lt;ref bean=\"rIService\" /&gt;\n                &lt;/util:list&gt;\n            &lt;/entry&gt;\n            &lt;entry key=\"RULES_CACHES\"&gt;\n                &lt;util:list value-type=\"com.foo.bar.commons.caching.MainCache\"&gt;\n                    &lt;ref bean=\"gBRService\" /&gt;\n                &lt;/util:list&gt;\n            &lt;/entry&gt;\n        &lt;/util:map&gt;\n    &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n...\n</code></pre>\n"},{"tags":["java","hibernate","spring","dbunit"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":4515,"score":2,"question_id":5066201,"title":"org.dbunit.dataset.NoSuchTableException: Did not find table 'xxx' in schema 'null'","body":"<p>I know there have been discussions wrt to dbunit here. I have read most of them but I cant seem to find a solution to my problem.</p>\n\n<p>I have set up hibernate and spring. I am doing TDD so I had to wire up a proper DAO testing framework before writing code. Dbunit came to mind and I got to setting it up. Here is ma testdataset.xml</p>\n\n<pre><code>    &lt;?xml version='1.0' encoding='UTF-8'?&gt;\n    &lt;dataset&gt;\n        &lt;table name=\"status\"&gt;\n            &lt;column&gt;statusId&lt;/column&gt;\n            &lt;column&gt;status&lt;/column&gt;\n            &lt;row&gt;\n                &lt;value&gt;0&lt;/value&gt;\n                &lt;value&gt;Available&lt;/value&gt;\n            &lt;/row&gt;\n        &lt;/table&gt;\n        &lt;table name=\"user\"&gt;\n            &lt;column&gt;userId&lt;/column&gt;\n            &lt;column&gt;firstName&lt;/column&gt;\n            &lt;column&gt;lastName&lt;/column&gt;\n            &lt;column&gt;username&lt;/column&gt;\n            &lt;column&gt;password&lt;/column&gt;\n            &lt;column&gt;email&lt;/column&gt;\n            &lt;row&gt;\n                &lt;value&gt;0&lt;/value&gt;\n                &lt;value&gt;system&lt;/value&gt;\n                &lt;value&gt;admin&lt;/value&gt;\n                &lt;value&gt;admin&lt;/value&gt;\n                &lt;value&gt;admin&lt;/value&gt;\n                &lt;value&gt;admin@ccbs.com&lt;/value&gt;\n            &lt;/row&gt;\n        &lt;/table&gt;\n        &lt;table name=\"reservation\"&gt;\n            &lt;column&gt;reservationId&lt;/column&gt;\n            &lt;column&gt;userId&lt;/column&gt;\n            &lt;column&gt;reservationDate&lt;/column&gt;\n            &lt;column&gt;startDate&lt;/column&gt;\n            &lt;column&gt;endDate&lt;/column&gt;\n            &lt;column&gt;statusId&lt;/column&gt;\n            &lt;row&gt;\n                &lt;value&gt;0&lt;/value&gt;\n                &lt;value&gt;0&lt;/value&gt;\n                &lt;value&gt;2011-02-20 12:46:00.0&lt;/value&gt;\n                &lt;value&gt;2011-03-01 12:00:00.0&lt;/value&gt;\n                &lt;value&gt;2011-04-01 12:00:00.0&lt;/value&gt;\n                &lt;value&gt;0&lt;/value&gt;\n            &lt;/row&gt;\n        &lt;/table&gt;\n    &lt;/dataset&gt;\n</code></pre>\n\n<p>All seems well until i try to wire up some code using a base class that loads the dataset. Here is my code:</p>\n\n<pre><code>@Transactional\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"classpath:test-applicationContext.xml\" })\n@TransactionConfiguration(transactionManager = \"transactionManager\", defaultRollback = true)\npublic class BaseContextSensitiveTest {\n\n    @BeforeClass\npublic static void setUpDatabase() throws Exception {\n    URL file = getInitalDatasetURL();\n    testDataset = createDataset(file);\n}\n\n   @Before\npublic void init() throws Exception {\n    log.info(\"Initializing Data Set\");\n    connection = createDBUnitConnection();\n\n    DatabaseOperation.CLEAN_INSERT.execute(connection, testDataset);\n}\n\nprivate static URL getInitalDatasetURL() throws FileNotFoundException {\n    URL file = ClassLoader.getSystemResource(TEST_DATASET_LOCATION);\n    if (file == null) {\n        throw new FileNotFoundException(\"Unable to find '\"\n                + TEST_DATASET_LOCATION + \"' in the classpath\");\n    }\n    return file;\n}\n\nprivate static IDataSet createDataset(URL file) throws IOException,\n        DataSetException {\n\n    return new XmlDataSet(file.openStream());\n}\n\nprivate IDatabaseConnection createDBUnitConnection()\n        throws DatabaseUnitException, SQLException {\n\n    Connection connection = getConnection();\n    IDatabaseConnection dbUnitConn = new DatabaseConnection(connection);\n\n    // use the hsql datatypefactory so that boolean properties work\n    // correctly\n    DatabaseConfig config = dbUnitConn.getConfig();\n    config.setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY,\n            new HsqldbDataTypeFactory());\n\n    return dbUnitConn;\n}\n</code></pre>\n\n<p>As soon as it hits the <code>DatabaseOperation.CLEAN_INSERT.execute(connection, testDataset);</code> it throws the following exception:</p>\n\n<pre><code>org.dbunit.dataset.NoSuchTableException: Did not find table 'USER' in schema 'null'\nat org.dbunit.database.DatabaseTableMetaData.&lt;init&gt;(DatabaseTableMetaData.java:142)\nat org.dbunit.database.DatabaseDataSet.getTableMetaData(DatabaseDataSet.java:290)\nat org.dbunit.operation.DeleteAllOperation.execute(DeleteAllOperation.java:109)\nat org.dbunit.operation.CompositeOperation.execute(CompositeOperation.java:79)\nat com.cottage.test.BaseContextSensitiveTest.init(BaseContextSensitiveTest.java:64)\n</code></pre>\n\n<p>I have all the hibernate mapping files in place and the database is already set up with no data. Funny thing (or annoying thing depending on how you look at it) is that if I change the order of the tables in the dataset, the missingtableexception complains of another table... either user, reservation or status.</p>\n\n<p>Any suggestions on what I might be doing wrong?</p>\n"},{"tags":["java","spring","localization","form-validation","locale"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13238946,"title":"Spring 3 validation: using messages.property entry inside errorArgs?","body":"<p>what I'm looking for is very easy to explain:\nI have a form which must support both italian and english. Let's suppose I have a First Name input text field. The form label will be:</p>\n\n<ul>\n<li>for EN: \"First Name\"</li>\n<li>for IT: \"Nome\"</li>\n</ul>\n\n<p>what I want is an validation error message like these</p>\n\n<ul>\n<li>for EN: \"the <strong>First Name</strong> field is required\"</li>\n<li>for IT: \"il campo <strong>Nome</strong> è richiesto\"</li>\n</ul>\n\n<p>please note I'm quoting the <em>field name</em> inside the error message.</p>\n\n<p>I have the <code>messages_en.properties</code> with the lines:</p>\n\n<pre><code>errors.empty.field = the {0} field is required\nregistration.form.firstname = First Name\n</code></pre>\n\n<p>and of course the <code>messages_it.properties</code> with the lines:</p>\n\n<pre><code>errors.empty.field = il campo {0} è richiesto\nregistration.form.firstname = Nome\n</code></pre>\n\n<p>Now, inside my custom validator class I have</p>\n\n<pre><code>ValidationUtils.rejectIfEmpty(errors, \"firstname\", \"errors.empty.field\", new Object[]{\"registration.form.firstname\"}, \"the First Name is required\");\n</code></pre>\n\n<p>which doesn't works properly. The output is the \"registration.form.username\" string as it is. I'd like to inject the field name with the proper locale at runtime. Is there a way to do so?</p>\n"},{"tags":["java","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13239040,"title":"org.springframework.dao.DataIntegrityViolationException misreporting cause?","body":"<p>I'm using hibernate to insert to a mysql table on which all columns are defined as not null. It has a unique primary key and another unique index on several columns.</p>\n\n<p>I'm getting the following error:</p>\n\n<blockquote>\n  <p>org.springframework.dao.DataIntegrityViolationException: Could not\n  execute JDBC batch update; SQL [insert into MY_TABLE(col1, col2, col3,\n  col4, ID_) values (?, ?, ?, ?, ?)]; constraint [null]</p>\n</blockquote>\n\n<p>This error is in customer logs and I can't reproduce the problem myself, so I can't put in debugging to see what the values are in the insert statement.</p>\n\n<p>My understanding is that \"constraint [null]\" means a \"not null\" constraint is being violated. However, looking at my code, I cannot see any possible way that any of the data could be null at the time of the insert, unless hibernate is trying to insert a null ID (which would be a very bad bug in hibernate and so seems unlikely).</p>\n\n<p>However, I can see how it could happen that a unique constraint is being violated. Is it possible that the message is misleading and I'm actually getting a unique key violation? Does \"constraint[null]\" always mean a not null constraint was violated?</p>\n"},{"tags":["java","spring","spring-mvc","web-frameworks","apache-tiles"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":1023,"score":7,"question_id":9748481,"title":"Better alternative to Apache Tiles","body":"<p>I'm looking for a framework that is better and easier to use than Apache Tiles (which so far, I have used a couple of times).</p>\n\n<p>With Tiles, it seems that when I have 100 actions I need to creates 100 jsp files and create 100 definitions in <code>tiles.xml</code>.</p>\n\n<p>Is there a better framework to manage my templates? I want to create, for example, 2 templates:</p>\n\n<p>a) menu and column for content<br>\nb) menu, column for content, right column with banner</p>\n\n<p>In both templates the menu is constant. In <code>template b</code>, the right column is constant, so only  the content column is different. For this simple example I <strong><em>don't want to</em></strong> define each JSP file that extends the <code>template a</code> (just to provide a body). Thats lame imo. Or maybe I`m lame and I can define a DEFAULT template in Apache Tiles and I'm just not using it right. In anycase, all help appreciated.</p>\n"},{"tags":["spring","javamail","inputstream","sftp","jsch"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13238181,"title":"How can convert inputstream to InputStreamsource or Datasource to attach in Spring JavaMail","body":"<p>I am getting inputstream from the Jsch channelSFTP like below.</p>\n\n<pre><code>   ChannelSftp channelSftp = (ChannelSftp)channel;\n   InputStream input=channelsftp.get(unixPath);//unixPath is path to my file which is on SFTP server\n</code></pre>\n\n<p>I have to attach the file in the <code>unixPath</code> in the Spring javaMail attachment. But when i see API of Spring JavaMail <a href=\"http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/mail/javamail/MimeMessageHelper.html#addAttachment%28java.lang.String,%20javax.activation.DataSource%29\" rel=\"nofollow\"><code>addAttachment()</code></a> method it takes only <code>InputStreamSource</code> or <code>Datasource</code>.\nMy problem is I am not able to get the <code>InputStreamSource</code> or <code>Datasource</code> from the inputStream which I am getting form SFTP channel.How Can I get <code>InputStreamSource</code> or <code>Datasource</code> from the above inputstream? Thanks in advance. </p>\n"},{"tags":["spring","junit","jax-ws","mockito","webservice-client"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13237708,"title":"How do I mock a JAX WS client?","body":"<p>My question is how can I mock a JAXWS client.  The details are I'm using Spring 3.1.1.RELEASE and this mockito dependency</p>\n\n<pre><code>            &lt;dependency&gt;\n                    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                    &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n                    &lt;version&gt;1.9.0&lt;/version&gt;\n                    &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n</code></pre>\n\n<p>I'm generating a JAX WS client like so ...</p>\n\n<pre><code>                    &lt;plugin&gt;\n                            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                            &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\n                            &lt;executions&gt;\n                                    &lt;execution&gt;\n                                            &lt;goals&gt;\n                                                    &lt;goal&gt;wsimport&lt;/goal&gt;\n                                            &lt;/goals&gt;\n                                            &lt;configuration&gt;\n                                                    &lt;wsdlUrls&gt;\n                                                            &lt;wsdlUrl&gt;${wsdl.url}&lt;/wsdlUrl&gt;\n                                                    &lt;/wsdlUrls&gt;\n                                                    &lt;sourceDestDir&gt;${basedir}/src/main/java&lt;/sourceDestDir&gt;\n                                                    &lt;packageName&gt;org.mainco.myws&lt;/packageName&gt;\n                                            &lt;/configuration&gt;\n                                    &lt;/execution&gt;\n                            &lt;/executions&gt;\n                    &lt;/plugin&gt; \n</code></pre>\n\n<p>I'm configuring my Spring context like so ...</p>\n\n<pre><code>&lt;jaxws:client id=\"orgWebServiceClient\"\n    serviceClass=\"org.mainco.myws.OrganizationWebService\"\n    address=\"http://hbs-01.qa2.mainco.cb:8443/bsg/myws/OrganizationService?WSDL\"\n    /&gt;\n</code></pre>\n\n<p>However, when I try and mock this in Junit (4.8.1), it is failing.  My JUnit code snippet is </p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration({ \"classpath:testAppContextHSQL.xml\" })\npublic class OrgWsdlServiceTest extends AbstractTransactionalJUnit4SpringContextTests  \n{\n    ...\n\n    @Autowired\n    private OrganizationWebService m_ows;\n\n...\n        final OrganizationWebService orgWebSvcSpy = Mockito.spy(m_ows);\n</code></pre>\n\n<p>The error is</p>\n\n<pre><code>Cannot mock/spy class $Proxy88\nMockito cannot mock/spy following:\n  - final classes\n  - anonymous classes\n  - primitive types\" type=\"org.mockito.exceptions.base.MockitoException\"&gt;org.mockito.exceptions.base.MockitoException:\nCannot mock/spy class $Proxy88\nMockito cannot mock/spy following:\n  - final classes\n  - anonymous classes\n  - primitive types^M\n        at org.mainco.myco.orgsclient.service.OrgWsdlServiceTest.setupMockOrg(OrgWsdlServiceTest.java:421)^M\n        at org.mainco.myco.orgsclient.service.OrgWsdlServiceTest.testSaveOrgWoParent(OrgWsdlServiceTest.java:116)^M\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)^M\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)^M\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)^M\n        at java.lang.reflect.Method.invoke(Method.java:597)^M\n        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)^M\n        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)^M\n        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)^M\n        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)^M\n        at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)^M\n        at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)^M\n        at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)^M\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)^M\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)^M\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)^M\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)^M\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)^M\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)^M\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)^M\n        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)^M\n        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)^M\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)^M\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)^M\n        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)^M\n        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)^M\n        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)^M\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)^M\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)^M\n</code></pre>\n"},{"tags":["java","spring","el","tiles"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13235965,"title":"Spring + Tiles how to use EL in tiles.xml","body":"<p>I have tiles set up in my spring project as the view handler like this:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.web.servlet.view.tiles2.TilesViewResolver\" /&gt;\n&lt;bean class=\"org.springframework.web.servlet.view.tiles2.TilesConfigurer\"&gt;\n    &lt;property name=\"definitions\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;/WEB-INF/views/**/tiles.xml&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I'd like to use EL to access the session scope inside tiles.xml, for resolving a jsp file name. This should be possible if i use CompleteAutoloadTilesContainerFactory, as described here:</p>\n\n<p><a href=\"http://tiles.apache.org/framework/tutorial/advanced/el-support.html\" rel=\"nofollow\">http://tiles.apache.org/framework/tutorial/advanced/el-support.html</a></p>\n\n<p>How can I set my spring tiles configuration to allow this. Ive tried using EL as it is currently set up but the EL is not parsed.</p>\n\n<p>Thanks!\nNFV</p>\n"},{"tags":["web-services","spring","jax-ws","context","webservice-client"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13200366,"title":"How do I set up a web service client in my spring application context?","body":"<p>I'm using Maven 3.0.3 and Spring 3.1.1.RELEASE.  I would like to autowire a web service client, whose classes I'm generating with the jaxws-maven-plugin ...</p>\n\n<pre><code>                    &lt;plugin&gt;\n                            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                            &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\n                            &lt;executions&gt;\n                                    &lt;execution&gt;\n                                            &lt;goals&gt;\n                                                    &lt;goal&gt;wsimport&lt;/goal&gt;\n                                            &lt;/goals&gt;\n                                            &lt;configuration&gt;\n                                                    &lt;wsdlUrls&gt;\n                                                            &lt;wsdlUrl&gt;${wsdl.url}&lt;/wsdlUrl&gt;\n                                                    &lt;/wsdlUrls&gt;\n                                                    &lt;sourceDestDir&gt;${basedir}/src/main/java&lt;/sourceDestDir&gt;\n                                                    &lt;packageName&gt;org.myco.myws&lt;/packageName&gt;\n                                            &lt;/configuration&gt;\n                                    &lt;/execution&gt;\n                            &lt;/executions&gt;\n                    &lt;/plugin&gt;\n</code></pre>\n\n<p>However, I'm confused about how to setup my Spring applicaton context.  I have</p>\n\n<pre><code>    &lt;bean id=\"organizationWebService\" class=\"org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean\"&gt;\n        &lt;property name=\"serviceInterface\" value=\"org.myco.myws.OrganizationWebService\" /&gt;\n        &lt;property name=\"namespaceUri\" value=\"http://myco.org/myws/\" /&gt;\n        &lt;property name=\"serviceName\" value=\"api\" /&gt;\n        &lt;property name=\"endpointAddress\" value=\"http://hbs-01.qa2.myco.cb:8443/bsg/myws/OrganizationService?WSDL\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>But I get this error.  Note the \"related cause: WSDL Metadata not available to create the proxy\".  How do I configure this thing correctly?</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext^M\n        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)^M\n        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)^M\n        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)^M\n        at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)^M\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)^M\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)^M\n        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)^M\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)^M\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)^M\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)^M\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)^M\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)^M\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)^M\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)^M\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)^M\n        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)^M\n        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)^M\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)^M\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)^M\n        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)^M\n        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)^M\n        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)^M\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)^M\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)^M\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)^M\n        at java.lang.reflect.Method.invoke(Method.java:597)^M\n        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)^M\n        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)^M\n        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)^M\n        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)^M\n        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)^\n    ...\nRelated cause: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &amp;apos;organizationWebService&amp;apos; defined in class path resource [testAppContextHSQL.xml]: Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: WSDL Metadata not available to create the proxy, either Service instance or ServiceEndpointInterface org.myco.myws.OrganizationWebService should have WSDL information\n</code></pre>\n"},{"tags":["spring","annotations","context"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":26,"score":3,"question_id":13200479,"title":"Is it possible to set a system path as spring context","body":"<p>I want to load my Spring application context via annotations like this:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"file:/path/to/spring-context1.xml\", \"file:/path/to/spring-context2.xml\"})\n</code></pre>\n\n<p>I am trying this because the context file is not in my classpath.\nI've read several times that this was possible but it does not seem to work.\nSo my question is: \"Is this really possible and am I doing something wrong?</p>\n\n<p>I've got another question if this happens to be possible: if I want to use a relative path instead of an absolute one, from where should it be relative? From the pom.xml location?</p>\n\n<p>Thanks a lot for your help.</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13201861,"title":"Spring issue with profile","body":"<p>I am trying to get the variables uploaded directly based on environment in which the code is running. I wrote some  code and ran into issues. Can you please point me what i am doing wrong.</p>\n\n<p>WebAppInitializer.java</p>\n\n<pre><code>public class WebAppInitializer implements WebApplicationInitializer {\n@Override\npublic void onStartup(ServletContext sc) throws ServletException {\n// Create the 'root' Spring application context\nAnnotationConfigWebApplicationContext root = new AnnotationConfigWebApplicationContext();\nroot.scan(\"com.configs\");\nroot.getEnvironment().setActiveProfiles(\"dev\");\nroot.refresh();\n\n\n// Manages the lifecycle of the root application context\nsc.addListener(new ContextLoaderListener(root));\n\n// Handles requests into the application\nServletRegistration.Dynamic appServlet = sc.addServlet(\"appServlet\",\n                               new DispatcherServlet(new GenericWebApplicationContext()));\nappServlet.setLoadOnStartup(1);\nSet&lt;String&gt; mappingConflicts = appServlet.addMapping(\"/\");\n\nif (!mappingConflicts.isEmpty()) {\n    throw new IllegalStateException(\n                    \"'appServlet' could not be mapped to '/' due \"\n                    + \"to an existing mapping. This is a known issue under Tomcat versions \"\n                    + \"&lt;= 7.0.14; see https://issues.apache.org/bugzilla/show_bug.cgi?id=51278\");\n}\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>DynamicConfig.java</p>\n\n<pre><code>@Configuration\n@Profile(\"dev\")\n@PropertySource(\"classpath:/devel.properties\")\n\npublic class DynamicConfig {\n\n@Autowired \nEnvironment env;\n\n@Bean\npublic TestClass testClass(){\n    TestClass testClass = new TestClass();\n    testClass.setEnvironment(env.getProperty(\"environment\"));\n    return testClass;       \n}\n</code></pre>\n\n<p>}</p>\n\n<p>TestClass is simple class with one instance variable which will come from config based on environment.</p>\n\n<p>TestCase:\n     package com.tester;</p>\n\n<pre><code> import org.junit.Test;\n import org.springframework.context.ApplicationContext;\n import org.springframework.context.annotation.AnnotationConfigApplicationContext;\n\n import com.configs.DynamicConfig;\n  import com.configs.EnvironmentDetector;\n import com.tester.TestClass;\n\n public class TestClassTest {\n    AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(DynamicConfig.class);\n\n @Test\npublic void test(){\n    ApplicationContext context = new AnnotationConfigApplicationContext(DynamicConfig.class);\n   context.getEnvironment().setActiveProfiles(\"dev\");\n     context.scan(\"com.configs\");\n    TestClass test = context.getBean(TestClass.class);\n    System.out.println(test.getEnvironment());\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Now I am getting below error</p>\n\n<pre><code>    Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.282 sec &lt;&lt;&lt; FAILURE!\n  test(com.tester.TestClassTest)  Time elapsed: 0.279 sec  &lt;&lt;&lt; ERROR!\n org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.tester.TestClass] is defined: expected single bean but found 0: \nat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:280)\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1106)\nat com.tester.TestClassTest.test(TestClassTest.java:16)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:300)\nat org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)\nat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:146)\nat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)\nat $Proxy0.invoke(Unknown Source)\nat org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:145)\nat org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:87)\nat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)\n</code></pre>\n\n<p>When i remove the line <strong>@profile(\"dev\")</strong> from the DynamicConfig.java code is running fine. But i want that. I want to create similar classes for prod.</p>\n\n<p>Please help</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","junit","datasource","jdbctemplate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13224036,"title":"How do you test a spring jdbcTemplate with JUNIT?","body":"<p>I have a DAO that I'm trying to test that uses a jdbcTemplate.  The spring jdbcTemplate has a datasoruce attribute on it that needs to be set for it to work.  However, when a JUNIT test runs the datasource does not exist and the bean creation fails.  How can I set up the datasource of the jdbcTemplate to work in the JUNIT test case?</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Thanks</p>\n\n<p>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'thisDatasource' defined in class path resource [userDataBaseContext.xml]: Invocation of init method failed; nested exception is javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)\n    ... 33 more\nCaused by: javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial\n    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:645)\n    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)\n    at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:325)\n    at javax.naming.InitialContext.lookup(InitialContext.java:392)\n    at org.springframework.jndi.JndiTemplate$1.doInContext(JndiTemplate.java:154)\n    at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:87)\n    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:152)\n    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:178)\n    at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:95)\n    at org.springframework.jndi.JndiObjectLocator.lookup(JndiObjectLocator.java:105)\n    at org.springframework.jndi.JndiObjectFactoryBean.lookupWithFallback(JndiObjectFactoryBean.java:201)\n    at org.springframework.jndi.JndiObjectFactoryBean.afterPropertiesSet(JndiObjectFactoryBean.java:187)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1479)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)\n    ... 40 more</p>\n"},{"tags":["spring","jax-ws","jboss7.x","autowired"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1360,"score":0,"question_id":10445969,"title":"Using JAX-WS webservices with Spring 3.0.X on JBoss AS 7.1.X","body":"<p>I have some problems deploying a JAX-WS webservice with Spring 3.0.6 on JBoss AS Final 7.1.1.</p>\n\n<p>I have tried two first method from this tutorial: <a href=\"http://www.javacodegeeks.com/2010/11/jaxws-with-spring-and-maven-tutorial.html\" rel=\"nofollow\">http://www.javacodegeeks.com/2010/11/jaxws-with-spring-and-maven-tutorial.html</a></p>\n\n<p>When I was using the first method (extending SpringBeanAutowiringSupport and declaring the servlet in web.xml) the application deploys correctly, but the beans that I inject in the webservice are Null.</p>\n\n<p>Using the second method with SimpleJaxWsServiceExporter I am getting an error while deploying:</p>\n\n<pre><code>10:09:33,012 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-2) Context initialization failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter#0' defined in ServletContext resource [/WEB-INF/generic-applicationContext.xml]: Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: java.lang.RuntimeException: java.net.BindException: Address already in use: bind\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895) [spring-context-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425) [spring-context-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]\n    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_18]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_18]\n    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_18]\nCaused by: javax.xml.ws.WebServiceException: java.lang.RuntimeException: java.net.BindException: Address already in use: bind\n    at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:350)\n    at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:239)\n    at org.jboss.wsf.stack.cxf.client.ProviderImpl$DelegateEndpointImpl.publish(ProviderImpl.java:300)\n    at org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter.publishEndpoint(SimpleJaxWsServiceExporter.java:68) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.remoting.jaxws.AbstractJaxWsServiceExporter.publishEndpoints(AbstractJaxWsServiceExporter.java:154) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.remoting.jaxws.AbstractJaxWsServiceExporter.afterPropertiesSet(AbstractJaxWsServiceExporter.java:125) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]\n    ... 20 more\n</code></pre>\n\n<h1>web.xml</h1>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" version=\"2.5\"&gt;\n\n    &lt;display-name&gt;subscription-barring-service&lt;/display-name&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/generic-applicationContext.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n        &lt;/listener&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<h1>application context:</h1>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xmlns:task=\"http://www.springframework.org/schema/task\"\n    xsi:schemaLocation=\"\n            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd\n            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n            http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd\"&gt;\n\n        &lt;context:component-scan\n            base-package=\"org.bluewin.bwsso.services.barring\" /&gt;\n\n        &lt;bean class=\"org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter\"/&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<h1>webservice:</h1>\n\n<pre><code>@Service(\"terminateSessionsEndpoint\") \n@WebService(serviceName = \"TerminateSessionsEndpoint\", portName = \"TerminateSessionsEndpoint\")\npublic class TerminateSessionsEndpoint extends SpringBeanAutowiringSupport {\n\n    private Logger logger = Logger.getLogger(TerminateSessionsEndpoint.class);\n\n    @Autowired\n    GetOpenSessionsService sessionsServiceImpl;\n\n    @Autowired\n    TerminateSessionService terminateSessionImpl;\n\n    @Autowired\n    BarringServiceConfiguration barringServiceConfiguration;\n\n    @WebMethod(operationName = \"TerminateAllSessionsForAccountId\")\n    @WebResult(name = \"TerminateAllSessionsResponse\") \n    public TerminateAllSessionsResponseVO terminateAllSessionsForAccountId(\n            @WebParam(name = \"TerminateAllSessionsRequest\") \n            TerminateAllSessionsRequestVO requestWS) {\n\n        logger.info(\"Incoming request: \" + requestWS);\n        TerminateAllSessionsResponseVO returnVO = new TerminateAllSessionsResponseVO();\n        returnVO.setHeaderVO(requestWS.getHeaderVO());\n\n        logger.info(\"barringServiceConfiguration = \" + barringServiceConfiguration);\n\n        OpenSessions openSessions = null;\n        try {\n            openSessions = sessionsServiceImpl.getAllOpenSessions(requestWS.getAccountId());    \n            terminateSessionImpl.terminateAllSessions(openSessions, requestWS.getHeaderVO().getSourceIp());\n\n        } catch(BarringServiceException exception) {\n            returnVO.setErrorCode(BarringServiceUtils.ERR_INVALID_ACCOUNT_ID);\n            returnVO.setErrorMsg(\"Invalid account id.\");\n            logger.error(\"Outgoing response: \" + returnVO);\n            return returnVO;\n        } \n\n        returnVO.setErrorCode(0);\n        returnVO.setTerminatedSessionsAmount(openSessions.getOpenSessions());\n\n        logger.info(\"Outgoing response: \" + returnVO);\n        return returnVO;\n    }\n}\n</code></pre>\n\n<p>Any clue how can I get it work?</p>\n\n<p>Regards,\nKrzysztof</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":237,"score":0,"question_id":10792551,"title":"How to obtain a current user locale from Spring without passing it as a parameter to functions?","body":"<p>I am using Spring 3.1 and want to find the locale active for the current user is there a way to grab the locale directly without being forced to pass it from the controller to the service layer ... etc. </p>\n\n<p>does spring store the locale in a thread local storage where it can be grabbed by calling some static method?</p>\n"},{"tags":["spring","spring-aop"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":427,"score":2,"question_id":8347151,"title":"Spring AOP and Exception Intercepting","body":"<p>I'm trying to configure Spring so that it executes advice when a specific exception subclass (<code>MyTestException</code>) is thrown:</p>\n\n<pre><code>public class MyTestExceptionInterceptor implements ThrowsAdvice\n{\n    public void afterThrowing(Method method, Object[] args, Object target, Exception exc)\n    {\n        // I want this to get executed every time a MyTestException is thrown,\n        // regardless of the package/class/method that is throwing it.\n    }\n}\n</code></pre>\n\n<p>And the XML config:</p>\n\n<pre><code>&lt;bean name=\"interceptor\" class=\"org.me.myproject.MyTestExceptionInterceptor\"/&gt;\n\n&lt;aop:config&gt;\n    &lt;aop:advisor advice-ref=\"interceptor\" pointcut=\"execution(???)\"/&gt;\n&lt;/aop:config&gt;\n</code></pre>\n\n<p>I have a feeling that I should be using the <code>target</code> pointcut specifier (instead of <code>execution</code>) since - according to the <a href=\"http://static.springsource.org/spring/docs/2.0.x/reference/aop.html\" rel=\"nofollow\">Spring docs</a> - it seems as though <code>target</code> allows me to specify the type of exception to match against, but I'm not sure if that's wrong, or what my <code>pointcut</code> attribute needs to look like.</p>\n\n<p>I would <strong>greatly</strong> prefer to keep the AOP config done in XML (as opposed to Java/annotations, but I could probably translate an annotation-based solution into XML if need be.</p>\n\n<p>Thanks in advance for any suggestions!</p>\n"},{"tags":["java","spring","lazy-initialization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13234399,"title":"lazily initialize a bean which is referenced by another lazy-init bean","body":"<p>I have a bean which is lazily-initialized and have a couple of arguments and properties to be set.</p>\n\n<pre><code>  &lt;bean id=\"abc\" class=\"a.b.c.abc\" lazy-init=\"true\"&gt;\n        &lt;constructor-arg ref=\"qwert\" /&gt;\n        &lt;property name=\"aImplementations\"&gt;\n            &lt;list&gt;\n                &lt;ref bean=\"newBean\" /&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>Whereas <code>newBean</code> is defined as <code>&lt;bean id=\"newBean\" class=\"a.b.c.newBean\" lazy-init=\"true\" init-method=\"init\" /&gt;</code></p>\n\n<p>But lazy bean gets initialized and init() method is called.</p>\n\n<p>If I remove bean <code>'abc'</code> and just keep <code>newBean</code>, init() method of newBean class is not called.</p>\n\n<p>What could be the reason? I searched on Google but no help.</p>\n"},{"tags":["spring","spring-security","oauth-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13234486,"title":"Spring security oauth to create a web provider","body":"<p>first of all, sorry for my bad english.</p>\n\n<p>I searched here and googled about an answer for this question. I created a sample with spring webservice called rest provider, to add my logic for the clients app´s. Via wsdl I´m able to connect and get a xml/json as response to use at the client, it´s working fine my web service.</p>\n\n<p>The problem is, I need to create a security for the clients connection. I read about oauth2 and spring-security, but I´m confused about wich one should be used, if the oauth2 must be implemented at my provider or spring security must be add to the client app. I know these are simple questions, but I´m not able to connect and integrate these informations... Is there a way to follow?</p>\n\n<p>Thanks.</p>\n"},{"tags":["spring","gwt","resttemplate","gwt-compiler"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13082723,"title":"How to make Interaction with GWT - Spring RestTemplate","body":"<p>This is the continuation of <a href=\"http://stackoverflow.com/q/12972409/1012454\">issue</a></p>\n\n<p>I'm currently working on a task where it has <code>GWT</code>, <code>Restful</code> and <code>Spring Framework</code> environment.</p>\n\n<p>It has two application; <strong>Application #1</strong> which expose some information through Restful Webservice and <strong>Application #2</strong> which consume that service and display those details in GWT.</p>\n\n<p>For Application #2, I have used <code>Spring RestTemplate</code> to consume the <code>Restful Webservice</code> and return backs the List of Details through an Interface. And at the GWT end, there was some <code>DataListProvider</code> to set the Data List in <code>GWT-DataGrid</code>.</p>\n\n<p>Now the problem is, I doesn't know how to make the interaction with <code>GWT DataListProvider</code> with my <code>DetailService</code> Class(this returns the <strong><code>List&lt;Details&gt;</code></strong> in a method). When I directly call the Service Class in <code>GWT- OnModule()</code> method, during <code>GWT Compile</code>, i'm facing some <strong>UnResolved Type Error</strong>, Since this class indirectly calls the <code>Spring Libraries</code> classes, thus GWT cannot compile this.</p>\n\n<pre><code>com.google.gwt.dev.jjs.InternalCompilerException: Failed to get JNode\n    at com.google.gwt.dev.jjs.impl.TypeMap.get(TypeMap.java:140)\n    at com.google.gwt.dev.jjs.impl.TypeMap.get(TypeMap.java:71)\n    at com.google.gwt.dev.jjs.impl.BuildTypeMap.getType(BuildTypeMap.java:730)\n    at com.google.gwt.dev.jjs.impl.BuildTypeMap.createField(BuildTypeMap.java:570)\n    at com.google.gwt.dev.jjs.impl.BuildTypeMap.access$300(BuildTypeMap.java:99)\n    at com.google.gwt.dev.jjs.impl.BuildTypeMap$BuildDeclMapVisitor.visit(BuildTypeMap.java:180)\n    at org.eclipse.jdt.internal.compiler.ast.FieldDeclaration.traverse(FieldDeclaration.java:285)\n    at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.traverse(TypeDeclaration.java:1232)\n    at org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.traverse(CompilationUnitDeclaration.java:687)\n    at com.google.gwt.dev.jjs.impl.BuildTypeMap.createPeersForNonTypeDecls(BuildTypeMap.java:637)\n    at com.google.gwt.dev.jjs.impl.BuildTypeMap.exec(BuildTypeMap.java:514)\n    at com.google.gwt.dev.jjs.impl.BuildTypeMap.exec(BuildTypeMap.java:523)\n    at com.google.gwt.dev.jjs.JavaToJavaScriptCompiler.precompile(JavaToJavaScriptCompiler.java:599)\n    at com.google.gwt.dev.jjs.JavaScriptCompiler.precompile(JavaScriptCompiler.java:33)\n    at com.google.gwt.dev.Precompile.precompile(Precompile.java:284)\n    at com.google.gwt.dev.Precompile.precompile(Precompile.java:233)\n    at com.google.gwt.dev.Precompile.precompile(Precompile.java:145)\n    at com.google.gwt.dev.Compiler.run(Compiler.java:232)\n    at com.google.gwt.dev.Compiler.run(Compiler.java:198)\n    at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)\n    at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)\n    at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)\n    at com.google.gwt.dev.Compiler.main(Compiler.java:177)\n      [ERROR] &lt;no source info&gt;: public class org.springframework.web.client.RestTemplate\n    extends org.springframework.http.client.support.InterceptingHttpAccessor\n    implements : Unresolved type org.springframework.web.client.RestOperations\n</code></pre>\n\n<p>Please provide your suggestion how to make an interaction between these Service Class and GWT.</p>\n"},{"tags":["spring","neo4j","spring-data-neo4j"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":109,"score":0,"question_id":13127649,"title":"java.lang.NoSuchMethodError: org.neo4j.kernel.impl.transaction.SpringTransactionManager.<init>(Lorg/neo4j/graphdb/GraphDatabaseService;)V","body":"<p>I am am starting to learn <code>spring-data-neo4j</code></p>\n\n<p>Very basic test case i am running but unable to succeed. \nthe error is: <code>java.lang.IllegalStateException: Failed to load ApplicationContext</code></p>\n\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'neo4jRelationshipBacking' defined in class path resource [org/springframework/data/neo4j/aspects/config/Neo4jAspectConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.aspects.support.relationship.Neo4jRelationshipBacking org.springframework.data.neo4j.aspects.config.Neo4jAspectConfiguration.neo4jRelationshipBacking() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'neo4jTemplate' defined in class path resource [org/springframework/data/neo4j/aspects/config/Neo4jAspectConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.Neo4jTemplate org.springframework.data.neo4j.config.Neo4jConfiguration.neo4jTemplate() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mappingInfrastructure' defined in class path resource [org/springframework/data/neo4j/aspects/config/Neo4jAspectConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.MappingInfrastructureFactoryBean org.springframework.data.neo4j.config.Neo4jConfiguration.mappingInfrastructure() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'neo4jTransactionManager' defined in class path resource [org/springframework/data/neo4j/aspects/config/Neo4jAspectConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.transaction.PlatformTransactionManager org.springframework.data.neo4j.config.Neo4jConfiguration.neo4jTransactionManager()] threw exception; nested exception is java.lang.NoSuchMethodError: org.neo4j.kernel.impl.transaction.SpringTransactionManager.&lt;init&gt;(Lorg/neo4j/graphdb/GraphDatabaseService;)V\n</code></pre>\n\n<p><code>User.java</code> pojo annotated with <code>@NodeEntity</code></p>\n\n<pre><code>@NodeEntity\npublic class User {\n    @GraphId\n    private Long id;\n\n    User(String name){\n        this.name = name;\n    }\n    private String name;\n\n    public Long getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n}\n</code></pre>\n\n<p><strong>configuration file is:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:neo4j=\"http://www.springframework.org/schema/data/neo4j\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n        http://www.springframework.org/schema/data/neo4j http://www.springframework.org/schema/data/neo4j/spring-neo4j-2.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd\"&gt;\n\n    &lt;context:annotation-config/&gt;\n    &lt;context:spring-configured/&gt;\n\n    &lt;neo4j:config  storeDirectory=\"D:/data/db\"/&gt;\n    &lt;tx:annotation-driven mode=\"proxy\"/&gt;\n    &lt;context:component-scan base-package=\"com.neo4j.model\"/&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>JUnit test case is</strong> :</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations={\"classpath:/graph-test-context.xml\"})\npublic class Neo4jUserTest {\n\n    @Autowired\n    Neo4jTemplate neo4jTemplate;\n    @Test\n    public void test() {\n        User user = new User(\"test\");\n        neo4jTemplate.beginTx();\n        neo4jTemplate.save(user);\n    }\n}\n</code></pre>\n\n<p><strong>i have manually added below jar files from the eclipse buildpath:</strong></p>\n\n<pre><code>commons-logging-1.0.4.jar\nlog4j-1.2.15.jar\njta.jar\ncglib-2.1.3.jar\nvalidation-api-1.0.0.GA.jar\nlucene-core-3.5.0.jar\nservlet-api.jar\norg.springframework.aop-3.1.2.RELEASE.jar\norg.springframework.asm-3.1.2.RELEASE.jar\norg.springframework.aspects-3.1.2.RELEASE.jar\norg.springframework.beans-3.1.2.RELEASE.jar\norg.springframework.context.support-3.1.2.RELEASE.jar\norg.springframework.context-3.1.2.RELEASE.jar\norg.springframework.core-3.1.2.RELEASE.jar\norg.springframework.expression-3.1.2.RELEASE.jar\norg.springframework.instrument.tomcat-3.1.2.RELEASE.jar\norg.springframework.instrument-3.1.2.RELEASE.jar\norg.springframework.jdbc-3.1.2.RELEASE.jar\norg.springframework.jms-3.1.2.RELEASE.jar\norg.springframework.orm-3.1.2.RELEASE.jar\norg.springframework.oxm-3.1.2.RELEASE.jar\norg.springframework.test-3.1.2.RELEASE.jar\norg.springframework.transaction-3.1.2.RELEASE.jar\norg.springframework.web.portlet-3.1.2.RELEASE.jar\norg.springframework.web.servlet-3.1.2.RELEASE.jar\norg.springframework.web.struts-3.1.2.RELEASE.jar\norg.springframework.web-3.1.2.RELEASE.jar\nD:\\JUnit\\junit-4.6.jar\ncom.springsource.org.aopalliance-1.0.0.jar\naspectjtools-1.6.0.jar\nasm-attrs.jar\nasm.jar\nspring-data-neo4j-2.1.0.RC1.jar\nspring-data-neo4j-aspects-2.1.0.RC1.jar\nspring-data-neo4j-cross-store-2.1.0.RC1.jar\nspring-data-neo4j-rest-2.1.0.RC1.jar\nslf4j-api-1.6.1.jar\nslf4j-log4j12-1.7.2.jar\ngeronimo-jta_1.1_spec-1.1.1.jar\nlucene-core-3.5.0.jar\norg.apache.servicemix.bundles.jline-0.9.94_1.jar\nscala-library-2.9.0-1.jar\nserver-api-1.7.2.jar\nspring-data-commons-core-1.3.1.RELEASE.jar\nhamcrest-all-1.3.jar\nneo4j-cypher-dsl-1.6.M02.jar\nneo4j-cypher-1.9-20120912.103508-32.jar\nneo4j-kernel-1.9-20120912.102607-33.jar\nneo4j-lucene-index-1.9-20120912.103015-33.jar\n</code></pre>\n"},{"tags":["java","spring","configuration","autowired"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13232426,"title":"How to inject config settings into autowired spring beans?","body":"<p>I have a bean for an webservice client in my project which requires some configuration settings to be injected.  We are using Spring 3.1. Currently the best idea that came up was using the @Value annotation like this:</p>\n\n<pre><code>@Service\npublic class MyWebServiceClient {\n  private String endpointUrl;\n\n  @Required\n  @Value(\"${mywebserviceClient.endpointUrl}\")\n  public void setEndpointUrl(String endpointUrl) {\n    this.endpointUrl = endpointUrl;\n  }\n\n}\n</code></pre>\n\n<p>However I don't really like hardcoding the property name into the class. It also has the problem that there is no way to have more than one client with different settings in the same context (as there is only one property and this is hardcoded). Is there a more elegant way of doing this with autowiring or should I resort to plain old xml configuration for doing this?</p>\n"},{"tags":["database","spring","h2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13180781,"title":"Spring H2 embedded-database file?","body":"<p>I currently run my petproject on maven using an embedded jetty and H2 database:</p>\n\n<pre><code>&lt;jdbc:embedded-database id=\"dataSource\" type=\"H2\"&gt;\n   &lt;jdbc:script location=\"/WEB-INF/database.sql\"/&gt;\n&lt;/jdbc:embedded-database&gt;\n</code></pre>\n\n<p>This setup resets my DB every time I run the server. I want to save the DB as a file in disk so that I do not lose my data upon every server start. How do I accomplish this?</p>\n"},{"tags":["java","spring","jsp","spring-security"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":52,"score":-1,"question_id":13221421,"title":"not able to link css and images","body":"<p>I am working on a spring, hibernate, jsp application. I am trying to display an image from my jsp page. The image not displayed on the browser. I am also not able to link my css into jsp page.</p>\n\n<p>My jsp page is:</p>\n\n<pre><code>&lt;%@ page contentType=\"text/html;charset=UTF-8\"%&gt;\n&lt;%@ taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\"%&gt;\n&lt;%@ taglib prefix=\"fmt\" uri=\"http://java.sun.com/jsp/jstl/fmt\"%&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;link href=\"css/style.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;/head&gt;\n&lt;body id=\"page1\"&gt;\n&lt;div class=\"headerlogo\" align=\"center\"&gt;&lt;a href=\"\"&gt;&lt;img src=\"images/Logo1.png\" alt=\"\" /&gt;&lt;/a&gt;&lt;/div&gt;\n&lt;div align=\"center\"&gt;\n    &lt;h1&gt;&lt;spring:message code=\"header.title\"/&gt;&lt;/h1&gt;\n    Language :\n    &lt;a href=\"?lang=en_US\"&gt;English&lt;/a&gt;|\n    &lt;a href=\"?lang=sp_SP\"&gt;Spanish&lt;/a&gt;\n\n    &lt;h3&gt;\n        &lt;a href=\"home\"&gt;&lt;spring:message code=\"header.gotohome\" /&gt; &lt;/a&gt;\n    &lt;/h3&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I have set \n\n\nfor my images and css folders</p>\n\n<p>My Spring Security xml is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/security\"\n    xmlns:beans=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans-3.1.xsd\nhttp://www.springframework.org/schema/security\nhttp://www.springframework.org/schema/security/spring-security-3.1.xsd\"&gt;\n\n\n    &lt;http pattern=\"/images/**\" security=\"none\" /&gt;\n    &lt;http pattern=\"/css/**\" security=\"none\" /&gt;\n\n    &lt;http auto-config=\"true\" use-expressions=\"true\"&gt;\n\n        &lt;intercept-url pattern=\"/admin*\" access=\"hasRole('SYS_ADMIN')\" /&gt;\n\n        &lt;form-login login-page=\"/login\" default-target-url=\"/role-check\"\n            authentication-failure-url=\"/login?error=true\" /&gt;\n        &lt;logout logout-success-url=\"/login\" /&gt;\n\n         &lt;/http&gt; \n\n         &lt;authentication-manager&gt; \n        &lt;authentication-provider&gt; \n\n        &lt;jdbc-user-service data-source-ref=\"fmsDataSource\"  \n        users-by-username-query=\"select USERNAME,PASSWORD, 'true' as enabled from users where USERNAME=?\"\n        authorities-by-username-query=\"select u.USERNAME, ur.AUTHORITY from users u, user_roles ur where u.USER_ID = ur.USER_ID and u.USERNAME =? \" /&gt;\n    &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>Please help.\nThanks</p>\n"},{"tags":["spring","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13232708,"title":"Custome session timeout handler","body":"<p>i am using <strong>spring security 3</strong> and i have the session timeout set to 30 minutes, and when session timeouts the user is redirected to login page.</p>\n\n<p>what i want to do is to implement a solution that if the user is in a specific page (<strong>/page/specific_page</strong>) the user gets redirected to specific page (<strong>/page/anotherloginpage</strong>) other than login page.</p>\n\n<p>any ideas how to implement that ?</p>\n\n<p>please advise, thanks.</p>\n"},{"tags":["spring","spring-roo","spring-webflow"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13201869,"title":"Spring Web Flow with Paypal","body":"<p>Hy!</p>\n\n<p>Im integrating Paypal payment in Spring Web flow.</p>\n\n<p>The app forwards the request to the PayPal website using externalRedirect.(setExpresscheckout) User logs in to PayPal and pays for the item. Once the user completes the payment, paypal forwards the request back to the flow.\nIs there is way to enter a particular view-state within the flow once the request comes back from PayPal?</p>\n\n<p>I tried this, but doesnt work:</p>\n\n<p>This is part of the paypalcontroller, where i set the return urls to paypal:</p>\n\n<pre><code>private void sessionmanager(RequestContext context) {\nHttpServletRequest request = (HttpServletRequest)context.getExternalContext().getNativeRequest();\n//generate Spring Webflow return URL\nString url = request.getRequestURL()+\";jsessionid=\"+ request.getSession().getId() + \"?\" +\n            request.getQueryString();\nString paypalCancelUrl   = url + \"&amp;_eventId=end-state\";\nString paypalApprovedUrl = url + \"&amp;_eventId=approved\";\n}\n</code></pre>\n\n<p>flow.xml:</p>\n\n<pre><code>&lt;view-state id=\"view-state-1\" view=\"sampleflow/view-state-1\"&gt;\n    &lt;transition on=\"success\" to=\"view-state-2\"/&gt;\n    &lt;transition on=\"cancel\" to=\"end-state\"/&gt;\n    &lt;transition on=\"approved\" to=\"view-state-2\"/&gt;\n&lt;/view-state&gt;\n</code></pre>\n\n<p>this is the url what is generated by session manager code, and paypal redirects to it:</p>\n\n<pre><code>http://localhost:8080/testpaysys/sampleflow;jsessionid=D693C9D4A2681CA6FF18E7C7078EA971?null&amp;_eventId=approved\n</code></pre>\n\n<p>The approved eventID seems not working, i get to the flow, but to the starting state.(doesnt redirect to state 2)</p>\n\n<p>What am i missing?</p>\n"},{"tags":["java","spring","annotations","postconstruct"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13231293,"title":"How to disable @PostConstruct in Spring during Test","body":"<p>Within a Spring Component I have a <code>@PostConstruct</code> statement. Similar to below:</p>\n\n<pre><code>@Singleton\n@Component(\"filelist\")\npublic class FileListService extends BaseService {\n\n    private List listOfFiles = new Arrays.list();\n\n    //some other functions\n\n\n    @PostConstruct\n    public void populate () {\n\n        for (File f : FileUtils.listFiles(new File(SystemUtils.JAVA_IO_TMPDIR), new String[]{\"txt\"},true)){\n            listOfFiles.add(f.getName());\n        }   \n    }\n\n    @Override\n    public long count() throws DataSourceException {\n        return listOfFiles.size();\n    }\n\n    //  more methods .....\n}\n</code></pre>\n\n<p>During Unit tests I would not like to have the <code>@PostConstruct</code> function called, is there a way to telling Spring not to do post processing? Or is there a better Annotation for calling a initiation method on a class durning non-testing ?</p>\n"},{"tags":["java","mysql","spring","hibernate","transactions"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":848,"score":0,"question_id":1635633,"title":"Spring Transactions in different DAOs does not work anyway?","body":"<p>Here is my implementation in summary</p>\n\n<p>1) all DAOs implemented using HibernateDAO support/ @Transational annotation is only used in Service layer</p>\n\n<p>2) Use MySQL / HibernateTransactionManager</p>\n\n<p>3) Test using main(String args[]) method  (do transactions work using this method? )</p>\n\n<p>Transactions does not get rollbacked and invalid entried can be seen in the database.\nWhat am I doing wrong here?</p>\n\n<p>Detailed information is given below.</p>\n\n<p>1) I have configured transactions using @Transactional annotation in service layer as:</p>\n\n<pre><code>@Transactional(readOnly=false, rollbackFor={DuplicateEmailException.class,DuplicateLoginIdException.class,IdentityException.class},propagation=Propagation.REQUIRES_NEW)\n    public void createUserProfile(UserProfile profile)\n    \t\tthrows DuplicateEmailException, DuplicateLoginIdException,\n    \t\tIdentityException {\n\n    \t//Accessing DAO (implemented using HibernateDAOSupport)\n                identityDAO.createPrincipal(profile.getSecurityPrincipal());\n    \ttry {\n                //Accessing DAO\n    \t\tuserProfileDAO.createUserProfile(profile);\n    \t} catch (RuntimeException e) {\n    \t\tthrow new IdentityException(\"UseProfile create Error\", e);\n    \t}\n\n    }\n</code></pre>\n\n<p>2) My Transation Manager configuration / datasource is as follows :</p>\n\n<pre><code>&lt;bean id=\"dataSource\"\n    \tclass=\"org.apache.commons.dbcp.BasicDataSource\"\n    \tdestroy-method=\"close\"&gt;\n    \t&lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n    \t&lt;property name=\"url\"\n    \t\tvalue=\"jdbc:mysql://localhost:3306/ibmdusermgmt\" /&gt;\n    \t&lt;property name=\"username\" value=\"root\" /&gt;\n    \t&lt;property name=\"password\" value=\"root\" /&gt;\n    \t&lt;property name=\"defaultAutoCommit\" value=\"false\"/&gt;\t\t\n    &lt;/bean&gt;\n\n    &lt;bean id=\"sessionFactory\"\n    \tclass=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n    \t&lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\t\t\n    \t&lt;property name=\"mappingLocations\"\n    \t\tvalue=\"classpath*:hibernate/*.hbm.xml\" /&gt;\n    \t&lt;property name=\"hibernateProperties\"&gt;\n    \t\t\t&lt;prop key=\"hibernate.dialect\"&gt;\n    \t\t\torg.hibernate.dialect.MySQLDialect\n    \t\t\t&lt;/prop&gt;\t\t\t\t\n    \t\t\t&lt;prop key=\"hibernate.query.substitutions\"&gt;\n    \t\t\t\ttrue=1 false=0\n    \t\t\t&lt;/prop&gt;\n    \t\t\t&lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n    \t\t\t&lt;prop key=\"hibernate.use_outer_join\"&gt;false&lt;/prop&gt;\n    \t\t&lt;/props&gt;\n    \t&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"transactionManager\"\n    \tclass=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    \t&lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n</code></pre>\n\n<p>3) Test using main() method as follows :</p>\n\n<pre><code>public static void main(String[] args) {\n\n    \tApplicationContext cnt=new ClassPathXmlApplicationContext(\"testAppContext.xml\");\n    \tIUserProfileService upServ=(IUserProfileService)cnt.getBean(\"ibmdUserProfileService\");\n\n    \tUserProfile up=UserManagementFactory.createProfile(\"testlogin\");//\t\t\n    \tup.setAddress(\"address\");\n    \tup.setCompany(\"company\");\n    \tup.setTelephone(\"94963842\");\n    \tup.getSecurityPrincipal().setEmail(\"security@email.com\");\n    \tup.getSecurityPrincipal().setName(\"Full Name\");\n    \tup.getSecurityPrincipal().setPassword(\"password\");\n    \tup.getSecurityPrincipal().setSecretQuestion(new SecretQuestion(\"Question\", \"Answer\"));\n\n    \ttry {\n    \t\tupServ.createUserProfile(up);\n    \t} catch(Exception e){\n    \t\te.printStackTrace();\n    \t}\n</code></pre>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":5,"up_vote_count":19,"down_vote_count":0,"view_count":5016,"score":19,"question_id":3896013,"title":"No adapter for handler exception","body":"<p>I'm developing a web application using spring mvc framework. I want to to both annotation and beanName based url mappings.</p>\n\n<p>I've the following configurations in my context file</p>\n\n<pre><code>&lt;mvc:annotation-driven /&gt;\n\n&lt;bean class=\"org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping\"&gt;&lt;/bean&gt;\n</code></pre>\n\n<p>My annotation based controllers are working fine but beanNamed based url mapping are throwing the exception \"No adapter for handler\".</p>\n\n<p>What am I doing wrong here?</p>\n\n<p>Thank you</p>\n"},{"tags":["java","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":62,"score":3,"question_id":13231496,"title":"Spring bean scope based on dynamic constructor value","body":"<p>I have to create a bean where it needs to be cached based on the dynamic constructor value. Example: I need an OrganizationResource bean where \"x\" (constructor value) organization will have its own specific instance values and \"y\" (constructor value) will have different values.\nBut I don't want to create a new object for every x value, I want it to be cached.</p>\n\n<p>I know there are 2 scopes, singleton and prototype, for dynamic constructor value. I am planning to use prototype, but it seems it will create a new object every time, how can I implement cache based on constructor value in spring?</p>\n"},{"tags":["spring","hibernate","jsf","transactions","richfaces"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13225207,"title":"org.hibernate.LazyInitializationException when migrating webapp to JSF 2.1 & RichFaces 4","body":"<p>I know this question has been asked a lot, but the strange thing here is that I had no problems when using jsf 1.1 / richfaces 3, along with hibernate 3.7 and spring 2.5.</p>\n\n<p>Now that I migrated my front-end to jsf 2.1 / richfaces 4 (hibernate and spring remained the same) the following exception appears when I try to access a collection marked as \"lazy=true\" in hibernate mapping config:</p>\n\n<pre><code>org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.mu.afs.Afi.cods, no session or session was closed\nat org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:358)\nat org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:350)\nat org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:97)\nat org.hibernate.collection.PersistentBag.size(PersistentBag.java:225)\nat javax.faces.model.ListDataModel.isRowAvailable(ListDataModel.java:91)\nat javax.faces.model.ListDataModel.setRowIndex(ListDataModel.java:105)\n</code></pre>\n\n<p>The collection that I try to reach is referenced by a <code>rich:datatable</code> in the same xhtml that the <code>Afi</code> entity; \nHere is the part of the xhtml that tries to access the collecion upon an ajax request of a master table:</p>\n\n<pre><code>&lt;rich:extendedDataTable id=\"tableCods\" selectionMode=\"single\" \nselection=\"#{afiBean.codSelected}\"\nstyle=\"width: 100%; height: 100px\" \nvalue=\"#{afiBean.selectedAfi.cods}\" var=\"cod\"&gt;\n...\n&lt;rich:column width=\"50px\" style=\"text-align: right;\"&gt;\n    &lt;f:facet name=\"header\"&gt;&lt;h:outputText value=\"Months\"/&gt;&lt;/f:facet&gt;\n    &lt;h:outputText value=\"#{cod.months}\" /&gt;\n&lt;/rich:column&gt;\n&lt;rich:column width=\"80px\" style=\"text-align: right;\"&gt;\n    &lt;f:facet name=\"header\"&gt;&lt;h:outputText value=\"Cap\" /&gt; &lt;/f:facet&gt;\n    &lt;h:outputText  value=\"#{cod.cap}\"&gt;\n        &lt;f:convertNumber pattern=\"######,##0.00\" locale=\"es_AR\" /&gt;\n    &lt;/h:outputText&gt;\n&lt;/rich:column&gt;\n&lt;rich:column width=\"200px\" style=\"text-align: center;\"&gt;\n    &lt;f:facet name=\"header\"&gt;&lt;h:outputText value=\"Class\"/&gt;&lt;/f:facet&gt;\n    &lt;h:outputText value=\"#{cod.clazz}\" /&gt;\n&lt;/rich:column&gt;\n...\n</code></pre>\n\n<p></p>\n\n<p>Here is my web.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\nxsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\nversion=\"2.5\"&gt;\n...\n&lt;filter&gt;\n    &lt;filter-name&gt;sessionFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.orm.hibernate3.support.OpenSessionInViewFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;sessionFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n    &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;\n    &lt;dispatcher&gt;INCLUDE&lt;/dispatcher&gt;\n&lt;/filter-mapping&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;servlet&gt;\n    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/faces/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n...\n</code></pre>\n\n<p></p>\n\n<p>This is part of my application-context.xml:</p>\n\n<pre><code>...\n    &lt;bean id=\"txManager\"\n    class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"txProxyTemplate\" abstract=\"true\"\n    class=\"org.springframework.transaction.interceptor.TransactionProxyFactoryBean\"&gt;\n    &lt;property name=\"transactionManager\" ref=\"txManager\" /&gt;\n    &lt;property name=\"transactionAttributes\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"save*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;\n            &lt;prop key=\"store*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;\n            &lt;prop key=\"get*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;\n            &lt;prop key=\"read*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;\n            &lt;prop key=\"load*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;\n            &lt;prop key=\"*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n...\n</code></pre>\n\n<p>The service that is accessing the <code>Afi</code> entity is defined as follow:</p>\n\n<pre><code>&lt;bean id=\"afiService\" parent=\"txProxyTemplate\"&gt;\n    &lt;property name=\"proxyInterfaces\" value=\"com.mu.afs.services.AfiService\" /&gt;\n    &lt;property name=\"target\"&gt;\n        &lt;bean class=\"com.mu.afs.services.impl.AfiServiceImpl\"&gt;\n            &lt;property name=\"afiDao\" ref=\"afiDao\" /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n    &lt;bean id=\"afiliadosDao\"\n    class=\"com.mu.afs.dao.impl.HibernateAfiDaoImpl\"\n    parent=\"hibernateDaoSupport\"&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I would really appreciate if someone can throw some light on this issue. I dont know whether is related to a migration issue or if there is a problem with this configuration and was somehow \"masked\" with a previous version of jsf and richfaces. </p>\n\n<p>I tried to put here any relevant information that I thought it would help without boring and overwhelm the reader, but let me know if something is missing here.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring","exception","servlets","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13228879,"title":"i want to handle database connection exception using spring security","body":"<p>I am getting the following error:- <strong>Login error. Reason : Could not get JDBC Connection; nested exception is com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown database 'dbname'</strong> when i try to connect with wrong database. But i want to handle that exception and want to show some customize message.</p>\n\n<p>Here is my configuration file:-\n<strong>Spring-security.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/security\"\n    xmlns:beans=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans-3.1.xsd\nhttp://www.springframework.org/schema/security\nhttp://www.springframework.org/schema/security/spring-security-3.1.xsd\"&gt;\n\n    &lt;!--&lt;http pattern=\"/abc/**\" security=\"none\" /&gt; --&gt;\n\n    &lt;http auto-config=\"true\" use-expressions=\"true\"&gt;\n\n        &lt;intercept-url pattern=\"/admin*\" access=\"hasRole('SYS_ADMIN')\" /&gt;\n        &lt;intercept-url pattern=\"/cab-stop-admin*\" access=\"hasAnyRole('SYS_ADMIN','CABSTOP_ADMIN')\" /&gt;\n        &lt;intercept-url pattern=\"/driver*\" access=\"hasAnyRole('DRIVER','SYS_ADMIN','CABSTOP_ADMIN')\" /&gt;\n        &lt;intercept-url pattern=\"/customer*\" access=\"hasAnyRole('CUSTOMER','SYS_ADMIN','CABSTOP_ADMIN')\" /&gt;\n\n        &lt;form-login login-page=\"/login\" default-target-url=\"/role-check\"\n            authentication-failure-url=\"/login?error=true\" /&gt;\n            &lt;remember-me key=\"_spring_security_remember_me\"/&gt;\n        &lt;logout logout-success-url=\"/login\" /&gt;\n\n         &lt;/http&gt; \n\n         &lt;authentication-manager&gt; \n        &lt;authentication-provider&gt; \n        &lt;password-encoder hash=\"md5\"  /&gt;\n        &lt;jdbc-user-service data-source-ref=\"fmsDataSource\"  \n        users-by-username-query=\"select Username,Password, 'true' as enabled from login_details where Username=?\"\n        authorities-by-username-query=\"select u.Username, ur.Role_Name from login_details u, role_master ur where u.Role_Master_Id = ur.Role_Master_Id and u.Username =? \" /&gt;\n    &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p><strong>login.jsp</strong></p>\n\n<pre><code>&lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\"%&gt;\n&lt;%@ page contentType=\"text/html;charset=UTF-8\"%&gt;\n&lt;%@ taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\"%&gt;\n&lt;%@ taglib prefix=\"fmt\" uri=\"http://java.sun.com/jsp/jstl/fmt\"%&gt;\n\n&lt;jsp:include page=\"header.jsp\" /&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;&lt;spring:message code=\"message.home\" /&gt;&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;c:if test=\"${not empty param.error}\"&gt;\n    &lt;font color=\"red\"&gt;&lt;br /&gt; Login error. \n    Reason : ${sessionScope[\"SPRING_SECURITY_LAST_EXCEPTION\"].message} &lt;/font&gt;\n\n&lt;/c:if&gt;\n&lt;form  name=\"loginForm\" onsubmit=\"return validateForm();\"&gt;\n&lt;h1&gt;&lt;spring:message code=\"message.login\" /&gt;&lt;/h1&gt;\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td align=\"right\"&gt;&lt;spring:message code=\"message.username\"\n            text=\"default text\" /&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" name=\"j_username\" id=\"j_username\" autofocus=\"autofocus\"/&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td align=\"right\"&gt;&lt;spring:message code=\"message.password\"\n            text=\"default text\" /&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"password\" name=\"j_password\" /&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n\n    &lt;tr&gt;\n        &lt;label  for='_spring_security_remember_me'&gt;\n                        Remember me:\n                        &lt;input type='checkbox' name='_spring_security_remember_me' value=\"on\"/&gt;\n    &lt;/tr&gt;\n\n    &lt;tr&gt;\n        &lt;td colspan=\"2\" align=\"right\"&gt;&lt;input type=\"submit\"\n            value=\"&lt;spring:message code=\"message.login\" /&gt;\" /&gt;&lt;/td&gt;\n        &lt;td colspan=\"2\" align=\"right\"&gt;&lt;a href=\"&lt;%=request.getContextPath()%&gt;/customer/register\"&gt;&lt;spring:message\n            code=\"message.register\" text=\"default text\" /&gt;&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td colspan=\"2\" align=\"right\"&gt;&lt;a href=\"&lt;%=request.getContextPath()%&gt;/forgot-password\"&gt;&lt;spring:message\n            code=\"message.forgotpassword\" text=\"default text\" /&gt;&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;jsp:include page=\"footer.jsp\" /&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>hibernate-config.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n     xmlns:p=\"http://www.springframework.org/schema/p\"\n     xmlns:context=\"http://www.springframework.org/schema/context\"\n     xmlns:aop=\"http://www.springframework.org/schema/aop\"\n     xmlns:tx=\"http://www.springframework.org/schema/tx\"\n     xsi:schemaLocation=\"\n     http://www.springframework.org/schema/beans \n     http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n     http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context-3.1.xsd\n     http://www.springframework.org/schema/tx\n     http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n     http://www.springframework.org/schema/aop \n     http://www.springframework.org/schema/aop/spring-aop-3.1.xsd\"&gt;\n\n\n    &lt;context:component-scan base-package=\"com.cabfms.dao\"/&gt;\n\n  &lt;!-- enable the configuration of transactional behavior based on annotations --&gt;\n  &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n    &lt;bean id=\"fmsDataSource\"\n        class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"\n        p:driverClassName=\"${db.driverClassName}\" p:url=\"${db.url}\"\n        p:username=\"${db.username}\" p:password=\"${db.password}\" /&gt;\n\n    &lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"fmsDataSource\" /&gt;\n        &lt;property name=\"packagesToScan\" value=\"com.cabfms.entities\" /&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n                &lt;prop key=\"javax.persistence.validation.mode\"&gt;none&lt;/prop&gt;\n            &lt;/props&gt;\n            &lt;!--&lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;${hibernate.show_sql}&lt;/prop&gt;\n                &lt;prop key=\"javax.persistence.validation.mode\"&gt;none&lt;/prop&gt;\n                &lt;prop key=\"hibernate.current_session_context_class\"&gt;${hibernate.current_session_context_class}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.connection.pool_size\"&gt;${hibernate.connection.pool_size}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.min_size\"&gt;${hibernate.c3p0.min_size}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.max_size\"&gt;${hibernate.c3p0.max_size}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.timeout\"&gt;${hibernate.c3p0.timeout}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.max_statements\"&gt;${hibernate.c3p0.max_statements}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.idle_test_period\"&gt;${hibernate.c3p0.idle_test_period}&lt;/prop&gt;\n\n\n            &lt;/props&gt;\n\n\n        --&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n      &lt;!--Transaction Manager Added --&gt;  \n    &lt;bean id = \"transactionManager\" class = \"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name = \"sessionFactory\" ref = \"sessionFactory\" /&gt;\n&lt;/bean&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>web.xml</strong></p>\n\n<pre><code>&lt;web-app&gt;\n\n    &lt;display-name&gt;Web Application&lt;/display-name&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;\n            /WEB-INF/dispatcher-servlet.xml,\n            /WEB-INF/hibernate-config.xml,\n            /WEB-INF/spring-security.xml,\n            /WEB-INF/application-context.xml\n        &lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener\n        &lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;!-- Spring MVC --&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet\n        &lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n        &lt;!--&lt;url-pattern&gt;/services/*&lt;/url-pattern&gt; --&gt;\n        &lt;!--&lt;url-pattern&gt;/views/*&lt;/url-pattern&gt; --&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;!-- Spring Security --&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy\n        &lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;&lt;!--\n\n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n\n--&gt;\n&lt;error-page&gt;\n    &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;\n    &lt;location&gt;/error-page&lt;/location&gt;\n&lt;/error-page&gt;\n&lt;/web-app&gt;\n</code></pre>\n"},{"tags":["spring","jsf","primefaces"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13230513,"title":"How to get file name and file Type using inputStream?","body":"<p>guys i'm using inputStream for file Download . now i want to pass fileName and fileType into DefaultStreamedContent .now how can i find fileName and FileType using inputStream .</p>\n\n<pre><code>InputStream inputStream = new BufferedInputStream(new FileInputStream(filePath));\nfileDownload = new DefaultStreamedContent(inputStream,**fileType,fileName**);\n</code></pre>\n"},{"tags":["javascript","spring","jsp"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13230238,"title":"create new elements using javascript","body":"<p>In my Spring web application, for customer registration page I am adding and removing divs containing text, img and a-ref elements. When I write the code inside the same jsp the page works perfectly but according to my requirement when I try to put javascript code into a js file and import it and click add button a new div is inserted along with script code as given below,</p>\n\n<p><img src=\"http://i.stack.imgur.com/rbPKa.png\" alt=\"in the image below when i press the '+' sign button i intend to call a js function which adds a row with text field and a close button and an img, but instead of this it shows the code\"></p>\n\n<p>the js function I am using to add a div is..</p>\n\n<pre><code>function addInputBox() { \nvar ni = document.getElementById('myDiv'); \nvar numi = document.getElementById('theValue');\nvar num = (document.getElementById('theValue').value -1)+ 2;\nnumi.value = num;\nvar newdiv = document.createElement('div');\nvar divIdName = 'my'+num+'Div';\n\nnewdiv.setAttribute('id',divIdName); \nvar htmlString  = '&lt;div style=\"margin-top: 5px\"&gt;&lt;input type=\"text\"name=\"service_name\" title=\"Service Name\" maxlength=\"200\" style=\"width:400px;vertical-align:middle;\"/&gt;'+ \n                            '&lt;a href=\"javascript:removeInputBox(\\''+divIdName+'\\')\"&gt;&lt;img src=\"&lt;c:url value=\"/resources/img/common/x.png\" /&gt;\" alt=\"\" style=\"vertical-align:middle;margin-left: 5px\"/&gt;&lt;/a&gt;'+\n                            '&lt;img src=\"&lt;c:url value=\"/resources/img/ope/new.png\" /&gt;\" style=\"vertical-align:middle;margin:2px 0 0 2px;margin-left: 5px\" /&gt; &lt;/div&gt; ';\n\nnewdiv.innerHTML = htmlString; \nni.appendChild(newdiv);} \n</code></pre>\n\n<p>any idea what may went wrong? any help would be greatly appreciated..</p>\n"},{"tags":["json","spring","serialization","spring-mvc","jackson"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1555,"score":4,"question_id":7793689,"title":"Spring and JacksonJson, serialising different fields with views","body":"<p>In a <a href=\"http://stackoverflow.com/questions/7578081/spring-and-jackson-json-serialising-two-different-sets-of-fields\">previous similar question</a>, I asked about, how to serialise two different sets of fields using JacksonJson and Spring.</p>\n\n<p>My use case is the typical Controller mapping with <code>@ResponseBody</code> annotation returning directly a particular object or collections of objects, that are then rendered with JacksonJson whenever the client adds <code>application/json</code> in the <code>Accept</code> header.</p>\n\n<p>I had two answers, the first one suggests to return different interfaces with a different getter list, the second suggests to use Json Views.</p>\n\n<p>I don't have problems to understand the first way, however, for the second, after reading the documentation on <a href=\"http://wiki.fasterxml.com/JacksonJsonViews\" rel=\"nofollow\"><code>JacksonJsonViews</code></a>, I don't know how to implement it with Spring.</p>\n\n<p>To stay with the example, I would declare three stub classes, inside the class Views:</p>\n\n<pre><code>// View definitions:\npublic class Views {\n    public static class Public { }\n    public static class ExtendedPublic extends PublicView { }\n    public static class Internal extends ExtendedPublicView { }\n}\n</code></pre>\n\n<p>Then I've to declare the classes mentioned:</p>\n\n<pre><code>public class PublicView { }   \npublic class ExtendedPublicView { }\n</code></pre>\n\n<p>Why on earth they declare empty static classes and external empty classes, I don't know. I understand that they need a \"label\", but then the static members of Views would be enough. And it's not that <code>ExtendedPublic</code> extends <code>Public</code>, as it would be logical, but they are in fact totally unrelated.</p>\n\n<p>And finally the bean will specify with annotation the view or list of views:</p>\n\n<pre><code>//changed other classes to String for simplicity and fixed typo \n//in classname, the values are hardcoded, just for testing\npublic class Bean {\n    // Name is public\n    @JsonView(Views.Public.class)\n    String name = \"just testing\";\n\n    // Address semi-public\n    @JsonView(Views.ExtendedPublic.class)\n    String address = \"address\";\n\n    // SSN only for internal usage\n    @JsonView(Views.Internal.class)\n    String ssn = \"32342342\";\n}\n</code></pre>\n\n<p>Finally in the Spring Controller, I've to think how to change the original mapping of my test bean:</p>\n\n<pre><code>@RequestMapping(value = \"/bean\") \n@ResponseBody\npublic final Bean getBean() {\n    return new Bean();\n}\n</code></pre>\n\n<p>It says to call:</p>\n\n<pre><code>//or, starting with 1.5, more convenient (ObjectWriter is reusable too)\nobjectMapper.viewWriter(ViewsPublic.class).writeValue(out, beanInstance);\n</code></pre>\n\n<p>So I have an <code>ObjectMapper</code> instance coming out of nowhere and an <code>out</code> which is not the servlet typical <code>PrintWriter out = response.getWriter();</code>, but is an instance of <code>JsonGenerator</code> and that can't be obtained with the new operator. So I don't know how to modify the method, here is an incomplete try:</p>\n\n<pre><code>@RequestMapping(value = \"/bean\")\n@ResponseBody\npublic final Bean getBean() throws JsonGenerationException, JsonMappingException, IOException {\n    ObjectMapper objectMapper = new ObjectMapper();\n    JsonGenerator out; //how to create?\n    objectMapper.viewWriter(Views.Public.class).writeValue(out, new Bean());\n    return ??; //what should I return?\n}\n</code></pre>\n\n<p>So I would like to know if anybody had success using <code>JsonView</code> with Spring and how he/she did. The whole concept seems interesting, but the documentation seems lacking, also the example code is missing.</p>\n\n<p>If it's not possible I will just use interfaces extending each others. Sorry for the long question.</p>\n"},{"tags":["java","javascript","spring","java-ee","spring-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13228203,"title":"Springs MVC JSON Response and convert it to JS Object","body":"<p>I am having a question that how can I send JSON Object from Springs MVC so that I can convert it into a JavaScript Object on my HTML Page.</p>\n\n<p>In a traditional way I do it: Below is a snippet from Java Servlet which sets a request attribute and forward it to the JSP Page.</p>\n\n<pre><code>   JSONObject jsonObj = new JSONObject();\n   jsonObj.put(\"name\",\"test\");\n   jsonObj.put(\"age\",24);\n   request.setAttribute(\"jsonObj\",jsonObj);\n   request.getRequestDispatcher(\"test.jsp\").forward(request,response);\n</code></pre>\n\n<p>In JSP I retrieve as :</p>\n\n<pre><code>   &lt;script type=\"text/javascript\"&gt;\n    var jsonObj =&lt;%=request.getAttribute(\"jsonObj\"); %&gt;;\n    alert(\"name = \"+jsonObj.name+\" ; age = \"+jsonObj.age); // This will output name and age from the JSON Object\n   &lt;/script&gt;\n</code></pre>\n\n<p>So what I need to ask how can I do the same in Springs MVC. How can I send the JSONObject from Dispatcher Servlet, and convert it to JS object in my JSP page ?</p>\n"},{"tags":["spring","jboss","jms","hornetq","spring-jms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13162326,"title":"Managing JMS transaction with Spring","body":"<p>I'm trying to manage JMS transaction with Spring and HornetQ.<br>\nThis is the code I wrote:</p>\n\n<pre><code>public void receive() {\n    TransactionStatus status = transactionManager.getTransaction(new DefaultTransactionDefinition());\n    Message msg = jmsTemplate.receive(queue);\n    boolean success = false;\n    if (msg != null) {\n            try {\n               success = handleMessage(msg);\n               if (success) { \n                   msg.acknowledge(); // session is still open within the transaction\n               }\n            } catch (JMSException e) {\n                transactionManager.rollback(status);\n            }\n            if (success)\n                transactionManager.commit(status);\n            else\n                transactionManager.rollback(status):\n    }\n}\n</code></pre>\n\n<p>I'm doing a synchronous read from the queue, with timeout set to 0, since I don't wanna block on the read. Because of this I have to check if something was actually received.</p>\n\n<p>This is an excerpt of my <strong>applicationContext.xml</strong>:</p>\n\n<pre><code>&lt;bean id=\"inVMConnectionFactory\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;property name=\"jndiName\"&gt;\n        &lt;value&gt;java:/ConnectionFactory&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"cachedConnectionFactory\" class=\"org.springframework.jms.connection.CachingConnectionFactory\"&gt;\n    &lt;property name=\"targetConnectionFactory\" ref=\"inVMConnectionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"producer\" class=\"it.ubiquity.gestoreprofilazione.onweb.OnWebProducer\" scope=\"singleton\"&gt;\n    &lt;property name=\"queue\" ref=\"retryQueue\" /&gt;\n    &lt;property name=\"connectionFactory\" ref=\"cachedConnectionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"jmsTemplate\" class=\"org.springframework.jms.core.JmsTemplate\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"cachedConnectionFactory\" /&gt;\n    &lt;property name=\"sessionTransacted\" value=\"true\" /&gt;\n    &lt;property name=\"sessionAcknowledgeMode\" value=\"#{T(javax.jms.Session).CLIENT_ACKNOWLEDGE}\" /&gt;\n    &lt;property name=\"pubSubDomain\" value=\"false\" /&gt;\n    &lt;property name=\"receiveTimeout\" value=\"#    {T(org.springframework.jms.core.JmsTemplate).RECEIVE_TIMEOUT_NO_WAIT}\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"jmsTransactionManager\" class=\"org.springframework.jms.connection.JmsTransactionManager\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"cachedConnectionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"consumer\" class=\"it.ubiquity.gestoreprofilazione.onweb.OnWebConsumer\" scope=\"singleton\"&gt;\n    &lt;property name=\"queue\" ref=\"retryQueue\" /&gt;\n    &lt;property name=\"jmsTemplate\" ref=\"jmsTemplate\" /&gt;\n    &lt;property name=\"transactionManager\" ref=\"jmsTransactionManager\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The problem I have is quite strange: the first time I receive a message, handleMessage fail, so I rollback the transaction. Then nothing more happens. If I check with the JMX console, I can see there's one message on the queue. Now, if I restart JBoss, the messages is receive again and again, as expected.<br>\nMaybe there's something wrong with my configuration, but why it works after a reboot?</p>\n\n<ul>\n<li>HornetQ 2.2.10   </li>\n<li>JBoss 5.1.0</li>\n<li>Spring 3.1.2</li>\n</ul>\n\n<p><strong>UPDATE</strong><br>\nWith debugging enabled I see the first time:  </p>\n\n<blockquote>\n  <p>DEBUG [org.springframework.jms.connection.JmsTransactionManager]\n  (baseScheduler-1) Creating new transaction with name [null]:\n  PROPAGATION_REQUIRED,ISOLATION_DEFAULT</p>\n</blockquote>\n\n<p>and after the first rollback, on subsequent receive and rollback I see:</p>\n\n<blockquote>\n  <p>DEBUG [org.springframework.jms.connection.JmsTransactionManager]\n  (baseScheduler-1) Participating in existing transaction</p>\n</blockquote>\n\n<p>Instead, after restarting JBoss, I read that the transaction is actually rolled back:</p>\n\n<blockquote>\n  <p>DEBUG [org.springframework.jms.connection.JmsTransactionManager]\n  (baseScheduler-1) Initiating transaction rollback 2012-11-05\n  09:54:14,436 DEBUG\n  [org.springframework.jms.connection.JmsTransactionManager]\n  (baseScheduler-1) Rolling back JMS transaction on Session</p>\n</blockquote>\n\n<p>So, why the rollback it's not happening the first time, and as soon I restart the server it happens all the time? What am I doing wrong?</p>\n"},{"tags":["java","spring","jms"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":203,"score":5,"question_id":8926506,"title":"How can I control the rate at which Spring receives from a queue?","body":"<p>I am using Spring's message-driven POJO framework (and <code>DefaultMessageListenerContainer</code> in particular) to listen to several queues and topics.</p>\n\n<p>In the case of one particularly queue, there is a need to slow the rate at which I drain the queue, on the order of one message every five minutes. The actual processing of the messages is a sub-second operation, but I would like the listener to sit idle for some time in between messages.</p>\n\n<p>I have created a bit of a hack, but it is decidedly sub-optimal: What I've done is to set the max concurrency to 1 and add a <code>Thread.sleep(..)</code> after processing each message. I would like to find a way instead to use the <code>DefaultMessageListenerContainer</code> to wait between attempts to receive, rather than causing the handler to do the waiting during the would-be processing of a message. </p>\n\n<p>I had considered if there was a <code>ScheduledExecutor</code> that would help, but I realize that the throttling would need to be done where the tasks are produced. Is there perhaps some method from <code>DefaultMessageListenerContainer</code> that I could override to accomplish what I'm after?</p>\n"},{"tags":["java","spring","jboss","jms","apache-camel"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13229088,"title":"Apache Camel JMS - Exceptions not returned to caller with request/reply","body":"<p>I created a simple request/reply setup with Apache Camel and JMS. Everything works fine - calls are dispatched to the server side service and results are returned to the client. Only when there is an exception on the server side this exception will not be returned to the caller. The exception appears on the server and the client receives a timeout. I would like to receive the exception on the client side.</p>\n\n<p>As far as I understood the available docs that what I want should be the default behaviour. I also played around with the onException clause or setting up another route for the back transfer but all that did not help. So my question is what am I missing in my setup to get exceptions returned to the caller?</p>\n\n<p>Here are the details (code simplified):</p>\n\n<ul>\n<li>The JMS queue for communication is deployed in a standalone JBoss (7.1.1.FINAL)</li>\n<li>JNDI is used to lookup the Factory to create connections to the queue</li>\n<li>The client is currently a Spring webapplication running in a Jetty</li>\n<li>The server is currently a simple standalone Java application configured with Spring</li>\n<li>Spring version 3.1.2.RELEASE</li>\n<li>Apache Camel 2.10.2</li>\n</ul>\n\n<p>DTOs/Exception exchanged between client and server:</p>\n\n<pre><code>public class RequestDTO implements Serializable {\n    String payload;\n    ...\n}\n\npublic class ResponseDTO implements Serializable {\n    String payload;\n    ...\n}\n\npublic class RmtServiceException extends Exception implements Serializable {\n    public RmtServiceException() {\n        super(\"Exception in service.\");\n    }\n}\n</code></pre>\n\n<p>Interface for the service called via JMS:</p>\n\n<pre><code>public interface RmtService {\n    ResponseDTO doSomething(RequestDTO request) throws RmtServiceException;\n}\n</code></pre>\n\n<p>Implementation for the Service:</p>\n\n<pre><code>@Component(\"rmtService\")\npublic class RmtServiceImpl implements RmtService {\n    public ResponseDTO doSomething(RequestDTO request) throws RmtServiceException {\n        // Return a ResponseDTO if processing is successful,\n        // otherwise throw an RmtServiceException\n    }\n}\n</code></pre>\n\n<p>Client configuration:</p>\n\n<pre><code>&lt;bean id=\"remoteJndiTemplate\" class=\"org.springframework.jndi.JndiTemplate\"&gt;\n    &lt;property name=\"environment\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"java.naming.factory.initial\"&gt;org.jboss.naming.remote.client.InitialContextFactory&lt;/prop&gt;\n            &lt;prop key=\"java.naming.provider.url\"&gt;remote://localhost:4447&lt;/prop&gt;\n            &lt;prop key=\"java.naming.security.principal\"&gt;JNDI_USER&lt;/prop&gt;\n            &lt;prop key=\"java.naming.security.credentials\"&gt;JNDI_PASSWORD&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"remoteJmsConnectionFactory\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;property name=\"jndiTemplate\" ref=\"remoteJndiTemplate\"/&gt;\n    &lt;property name=\"jndiName\" value=\"jms/RemoteConnectionFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"authenticatedJmsConnectionFactory\" class=\"org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter\"&gt;\n    &lt;property name=\"targetConnectionFactory\" ref=\"remoteJmsConnectionFactory\"/&gt;\n    &lt;property name=\"username\" value=\"JMS_USER\"/&gt;\n    &lt;property name=\"password\" value=\"JMS_PASSWORD\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean name=\"hq\" class=\"org.apache.camel.component.jms.JmsComponent\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"authenticatedJmsConnectionFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;camel:camelContext id=\"APIContext\" autoStartup=\"true\"&gt;\n    &lt;camel:endpoint id=\"queue\" uri=\"hq:queue:test.queue\"/&gt;\n&lt;/camel:camelContext&gt;\n\n&lt;camel:proxy\n        id=\"rmtServiceProxy\"\n        serviceInterface=\"RmtService\"\n        serviceUrl=\"hq:queue:test.queue\"/&gt;\n</code></pre>\n\n<p>Server configuration:</p>\n\n<pre><code>&lt;bean id=\"remoteJndiTemplate\" class=\"org.springframework.jndi.JndiTemplate\"&gt;\n    &lt;property name=\"environment\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"java.naming.factory.initial\"&gt;org.jboss.naming.remote.client.InitialContextFactory&lt;/prop&gt;\n            &lt;prop key=\"java.naming.provider.url\"&gt;remote://localhost:4447&lt;/prop&gt;\n            &lt;prop key=\"java.naming.security.principal\"&gt;JNDI_USER&lt;/prop&gt;\n            &lt;prop key=\"java.naming.security.credentials\"&gt;JNDI_PASSWORD&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"remoteJmsConnectionFactory\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;property name=\"jndiTemplate\" ref=\"remoteJndiTemplate\"/&gt;\n    &lt;property name=\"jndiName\" value=\"jms/RemoteConnectionFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"authenticatedJmsConnectionFactory\" class=\"org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter\"&gt;\n    &lt;property name=\"targetConnectionFactory\" ref=\"remoteJmsConnectionFactory\"/&gt;\n    &lt;property name=\"username\" value=\"JMS_USER\"/&gt;\n    &lt;property name=\"password\" value=\"JMS_PASSWORD\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean name=\"hq\" class=\"org.apache.camel.component.jms.JmsComponent\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"authenticatedJmsConnectionFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;camel:camelContext id=\"APIContext\" autoStartup=\"true\"&gt;\n    &lt;camel:endpoint id=\"queue\" uri=\"hq:queue:test.queue\"/&gt;\n    &lt;camel:route&gt;\n        &lt;camel:from ref=\"queue\"/&gt;\n        &lt;camel:to uri=\"bean:rmtService\"/&gt;\n    &lt;/camel:route&gt;\n&lt;/camel:camelContext&gt;\n</code></pre>\n\n<p>Observed behaviour when there's an exception on the server side:</p>\n\n<p>In the server logs the following Output appears:</p>\n\n<pre><code>ERROR: org.apache.camel.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-XXX-49296-1352104153517-0-8 on ExchangeId: ID-XXX-49296-1352104153517-0-7). Exhausted after delivery attempt: 1 caught: org.apache.camel.RuntimeCamelException: RmtServiceException: Exception in service.\norg.apache.camel.RuntimeCamelException: RmtServiceException: Exception in service.\nat org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1270)\nat org.apache.camel.component.bean.BeanInvocation.invoke(BeanInvocation.java:87)\nat org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:130)\nat org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)\nat org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:73)\nat org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:101)\nat org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:71)\nat org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)\nat org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)\nat org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:122)\nat org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:298)\nat org.apache.camel.processor.SendProcessor.process(SendProcessor.java:117)\nat org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)\nat org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)\nat org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)\nat org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)\nat org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)\nat org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)\nat org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)\nat org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91)\nat org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)\nat org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:334)\nat org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:220)\nat org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)\nat org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)\nat org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:303)\nat org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)\nat org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)\nat org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150)\nat org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117)\nat org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48)\nat org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)\nat org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)\nat org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)\nat org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)\nat org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)\nat org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)\nat org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86)\nat org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:104)\nat org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:562)\nat org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:500)\nat org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:468)\nat org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:326)\nat org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:264)\nat org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1071)\nat org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1063)\nat org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:960)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\nat java.lang.Thread.run(Thread.java:680)\nCaused by: RmtServiceException: Exception in service.\nat RmtServiceImpl.doSomething(...)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat org.apache.camel.component.bean.BeanInvocation.invoke(BeanInvocation.java:83)\n... 48 more\nWARN : org.apache.camel.component.jms.EndpointMessageListener - Execution of JMS message listener failed. Caused by: [org.apache.camel.RuntimeCamelException - RmtServiceException: Exception in service.]\n... (Same stacktrace again)\n</code></pre>\n\n<p>And the client receives a timeout:</p>\n\n<pre><code>WARN : org.apache.camel.component.jms.reply.TemporaryQueueReplyManager - Timeout occurred after 20000 millis waiting for reply message with correlationID [ID-XXX-49307-1352104250851-0-13]. Setting ExchangeTimedOutException on (MessageId: ID-XXX-49307-1352104250851-0-15 on ExchangeId: ID-XXX-49307-1352104250851-0-14) and continue routing.\n2012-11-05 10:03:11.964:WARN:oejs.ServletHandler:/app/some/action\njava.lang.reflect.UndeclaredThrowableException\nat $Proxy45.doSomething(Unknown Source)\nat ...\nCaused by: \norg.apache.camel.ExchangeTimedOutException: The OUT message was not received within: 20000 millis due reply message with correlationID: ID-XXX-49307-1352104250851-0-13 not received. Exchange[Message: BeanInvocation public abstract ResponseDTO RmtService.doSomething(RequestDTO) throws RmtServiceException with [RequestDTO@...]]]\nat org.apache.camel.component.jms.reply.ReplyManagerSupport.processReply(ReplyManagerSupport.java:133)\nat org.apache.camel.component.jms.reply.TemporaryQueueReplyHandler.onTimeout(TemporaryQueueReplyHandler.java:61)\nat org.apache.camel.component.jms.reply.CorrelationTimeoutMap.onEviction(CorrelationTimeoutMap.java:53)\nat org.apache.camel.component.jms.reply.CorrelationTimeoutMap.onEviction(CorrelationTimeoutMap.java:30)\nat org.apache.camel.support.DefaultTimeoutMap.purge(DefaultTimeoutMap.java:203)\nat org.apache.camel.support.DefaultTimeoutMap.run(DefaultTimeoutMap.java:159)\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)\nat java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)\nat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)\nat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)\nat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)\nat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\nat java.lang.Thread.run(Thread.java:680)\n</code></pre>\n\n<p>So once again: Everything else works as expected, only the exceptions are not returned to the caller. Any help on this is greatly appreciated! Thanks in advance.</p>\n"},{"tags":["spring","jpa","data","annotations","customization"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13193500,"title":"How to extends Spring Data JPA @Query Method Annotation","body":"<p>How to extends Spring Data JPA @Query Method Annotation ?</p>\n\n<p>From this article <a href=\"http://www.javacodegeeks.com/2012/08/hibernate-native-sql-features-into-your.html\" rel=\"nofollow\">http://www.javacodegeeks.com/2012/08/hibernate-native-sql-features-into-your.html</a> i learn how to extends Spring data JPA Functionality, unfortunately the article tells about ElementType.TYPE annotation, but i need to understand ElementType.METHOD annotation and how this annotated method will by registered and handled by spring data jpa.</p>\n\n<p>11052012 1547 --\nI did further research about how to handle method annotation, I Found that I Need to involve AOP to intercept original method invocation with my custom annotation processor.</p>\n\n<p>I Did this</p>\n\n<pre><code>@NoRepositoryBean\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Dynaque {\n    String value() default \"\";\n}\n\n\n@NoRepositoryBean\n@Aspect\n@Component(\"dynaqueAopListener\")\npublic class DynaqueAopListener {\n    @Pointcut(\"@annotation(my.repo.engine.package.Dynaque)\")\n    public void dynaqueMethods() {\n    }\n\n    @Around(\"dynaqueMethods()\")\n    public Object profile(ProceedingJoinPoint pjp) throws Throwable {\n        Method m = ((MethodSignature) pjp.getSignature()).getMethod();\n        Dynaque d = null;\n        if (m != null) {\n            d = m.getAnnotation(Dynaque.class);\n\n        }\n        Object output = pjp.proceed();\n        //my custom query logic here\n        return output;\n    }\n\n}\n</code></pre>\n\n<p>Then I got next obstacle, \nI Found that SD JPA scan all methods of every Repository Interface and do QueryLookup using QueryLookupStrategy to them, I don't know how to exclude methods that using @Dynaque annotation from SD - JPA QueryLookup so that I can implement my own query logic to that methods. </p>\n"},{"tags":["spring","jersey"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13136817,"title":"Populating a spring request scoped bean in a ContainerRequestFiler","body":"<p>I wrote a rest service using jersey 1.13 and spring 3.1.1 which runs on tomcat 6.\nIn tomcat I'm using a realm which will do the authentication.\nIn my application I need the current user but I don't want to access the SecurityContext from jersey in every resource. I want to inject a request scoped ApplicationConfig object in my rest resources which will contain the current user. Later I can extend this class to contain more request level configuration parameteters. This seems a nice abstraction to me.</p>\n\n<pre><code>@Component\n@Scope(value = \"request\")\npublic class ApplicationConfig\n{\n    private String userCode;\n\n    public String getUserCode()\n    {\n        return this.userCode;\n    }\n\n    public void setUserCode(String userCode)\n    {\n        this.userCode = userCode;\n    }\n}\n</code></pre>\n\n<p>I created a ApplicationConfigManager to provide access to the configuration.</p>\n\n<pre><code>@Component\npublic class ApplicationConfigManager\n{\n    @Autowired\n    public ApplicationConfig applicationConfig;\n\n    public ApplicationConfig getApplicationConfig()\n    {\n        return this.applicationConfig;\n    }\n}\n</code></pre>\n\n<p>The application config manager is defined as a singleton (default) but the ApplicationConfig should be request scope, hence the @Scope annotation.</p>\n\n<p>I'm using a (jersey) ContainterRequestFilter to set the user on the application config object.</p>\n\n<pre><code>@Component\n@Provider\npublic class ApplicationConfigFilter implements ResourceFilter, ContainerRequestFilter\n{\n    @Autowired\n    private ApplicationConfigManager applicationConfigManager;\n\n    @Override\n    public ContainerRequest filter(ContainerRequest request)\n    {\n        this.applicationConfigManager.getApplicationConfig().setUserCode(\n            request.getSecurityContext().getUserPrincipal().getName()\n        );\n        return request;\n    }\n\n    @Override\n    public ContainerRequestFilter getRequestFilter()\n    {\n        return this;\n    }\n\n    @Override\n    public ContainerResponseFilter getResponseFilter()\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p>To register this filter I created a ResourceFilterFactory </p>\n\n<pre><code>@Component\n@Provider\npublic class ResourceFilterFactory extends RolesAllowedResourceFilterFactory\n{\n    @Autowired\n    private ApplicationConfigFilter applicationConfigFilter;\n\n    @Override\n    public List&lt;ResourceFilter&gt; create(AbstractMethod am)\n    {\n        // get filters from RolesAllowedResourceFilterFactory Factory!\n        List&lt;ResourceFilter&gt; rolesFilters = super.create(am);\n        if (null == rolesFilters) {\n            rolesFilters = new ArrayList&lt;ResourceFilter&gt;();\n        }\n\n        // Convert into mutable List, so as to add more filters that we need\n        // (RolesAllowedResourceFilterFactory generates immutable list of filters)\n        List&lt;ResourceFilter&gt; filters = new ArrayList&lt;ResourceFilter&gt;(rolesFilters);\n\n        filters.add(this.applicationConfigFilter);\n\n        return filters;\n    }\n}\n</code></pre>\n\n<p>I activated this factory by setting this into the web.xml</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;com.sun.jersey.spi.spring.container.servlet.SpringServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;com.sun.jersey.config.property.packages&lt;/param-name&gt;\n        &lt;param-value&gt;com.mypackage&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;com.sun.jersey.spi.container.ResourceFilters&lt;/param-name&gt;\n        &lt;param-value&gt;com.mypackage.ResourceFilterFactory&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n</code></pre>\n\n<p>I also added these listeners to bootstrap the spring context and to get the request scope working</p>\n\n<pre><code>&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n</code></pre>\n\n<p>This is what I put in my application context to get the scanning feature working and to define the aplication config object (I guess this is not even necessary as spring will find it automagically)</p>\n\n<pre><code>&lt;context:annotation-config/&gt;\n&lt;context:component-scan base-package=\"com.mypackage\" /&gt;\n\n&lt;bean id=\"applicationConfig\" class=\"com.mypackage.ApplicationConfig\" scope=\"request\"/&gt;\n</code></pre>\n\n<p>And now my problem. When I start the application spring will be bootstrapped and it will inject the ApplicationConfig object onto the ApplicationConfigManager which is injected onto the ApplicationConfigFilter.</p>\n\n<p>At this point it throws the exception:</p>\n\n<pre><code>.\n.\nCaused by: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually o\nperating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n        at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131) ~[spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.web.context.request.AbstractRequestAttributesScope.get(AbstractRequestAttributesScope.java:40) ~[spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n        ... 57 common frames omitted\n</code></pre>\n\n<p>This exception is pretty clear and I think it means the request scoped ApplicationConfig cannot be injected because no request was sent yet.</p>\n\n<p>So I spring should instantiate the ApplicationConfig object ONLY when a request is sent and not during application startup. I searched for solutions and found that injecting a request scoped bean in a singleton bean is not very logical. I would always get the same object anyway. The solution is to use a proxy so I changed the @Scope annotation on the ApplicationConfig class to this</p>\n\n<pre><code>@Scope(value = \"request\", proxyMode = ScopedProxyMode.TARGET_CLASS)\n</code></pre>\n\n<p>This should give me a new ApplicationConfig object for every request.</p>\n\n<p>The app now starts up just fine (it doesn't seem to instantiate the ApplicationConfig) but when I send a request to my rest service I found, using debugging, that I get different ApplicationConfig objects instead of the same one for the request.</p>\n\n<p>So what am I doing wrong?</p>\n"},{"tags":["java","android","iphone","web-services","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":45,"score":-5,"question_id":13141904,"title":"Best Java webservices for both Android and iPhone apps","body":"<p>We are having web based java web application. </p>\n\n<p>We are planning to develop the mobile app in both iPhone and Android of the existing web application. </p>\n\n<p>I am planning to create an other java web services(RESTFul) app over the existing web app which will be providing service for both Android, iPhone even plan to use in Blackberry and Windows mobile in effective way later.</p>\n\n<p>Now I am ooking for advice on best web service in java platform to develop which will be good and best for all client.</p>\n"},{"tags":["java","spring","exception-handling","default"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13222292,"title":"How to retrieve default HandlerExceptionResolver instances in Spring 3.x?","body":"<p>The Javadoc says that <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerExceptionResolver.html\" rel=\"nofollow\">AnnotationMethodHandlerExceptionResolver</a>, <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/ResponseStatusExceptionResolver.html\" rel=\"nofollow\">ResponseStatusExceptionResolver</a> and <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/support/DefaultHandlerExceptionResolver.html\" rel=\"nofollow\">DefaultHandlerExceptionResolver</a> are enabled by default in the DispatcherServlet.</p>\n\n<p>I am trying to create a <code>HandlerExceptionResolverComposite</code>, but I would like to retrieve the <code>HandlerExceptionResolver</code> instances enabled by default. I tried <code>@Autowired</code>, but unsuccessfully.</p>\n\n<p>My current solution is:</p>\n\n<pre><code>@Configuration\npublic class ErrorHandling {\n\n//  @Autowired\n//  AnnotationMethodHandlerExceptionResolver amher;\n//  \n//  @Autowired\n//  ResponseStatusExceptionResolver rser;\n//  \n//  @Autowired\n//  DefaultHandlerExceptionResolver dher;\n\n    @Bean\n    HandlerExceptionResolverComposite getHandlerExceptionResolverComposite() {\n\n        HandlerExceptionResolverComposite result\n            = new HandlerExceptionResolverComposite();\n\n        List&lt;HandlerExceptionResolver&gt; l\n            = new ArrayList&lt;HandlerExceptionResolver&gt;();\n\n        l.add(new AnnotationMethodHandlerExceptionResolver());\n        l.add(new ResponseStatusExceptionResolver());\n        l.add(new DefaultHandlerExceptionResolver());\n\n        result.setExceptionResolvers(l);\n\n        return result;\n\n    }\n\n}\n</code></pre>\n\n<p>My question is: how can I retrieve the <code>HandlerExceptionResolver</code> instances enabled by default? Is it an issue if I create my own instances?</p>\n"},{"tags":["spring","xstream"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13227532,"title":"Same xstream alias for two different classes","body":"<p>Can I have same <code>xstream</code> alias for two different classes in Spring <br>        </p>\n\n<pre><code>@XstreamAlias(\"user\")\n  class User {\n}    \n\n@XstreamAlias(\"user\")                                                 \nclass AdUser {\n}\n</code></pre>\n\n<p>I get deserializing issue with when My application context gets loaded.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","hibernate","connection","isolation-level"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13223019,"title":"How to set Diffrent value then 'auto' in connection.release_mode (spring + hibernate)","body":"<p>Is it possible to set a diffrent value then 'auto' to the hibernate propery - \"connection.release_mode\"?</p>\n\n<p>We use Spring with hibernate, When I try to define in this propery - 'after_transaction' (When i define hibernate properties in session factory definition), In runtime i get an exception (Spring exception) that the only valid value (in Spring terms) for this prop is 'on_close'. This fact cause us many troubles. We use the session-per-request pattern (meaning \" a client sends a request to the server, where the Hibernate persistence layer is running. Hibernate opens a new Session, and all database operations are executed in this unit of work.\"(<a href=\"http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch02.html#session-per-operation\" rel=\"nofollow\">hibernate doc</a>  ). when   on_close is defined - connection is being allocate per service (there is not re-use of connections).</p>\n\n<p>We use HibernateTransactionManager to manage transactions in combination with TransactionInterceptor. We handle sessions with AnnotationSessionFactoryBean (our session factory) , I try to define in the session factory decleration in the \"hibernateProperties\" part - > connection.release_mode=after_transaction. In Runtime when server try loading session factory I got this exception :     </p>\n\n<pre><code>org.springframework.transaction.InvalidIsolationLevelException: HibernateTransactionManager is not allowed to support custom isolation levels: make sure that its 'prepareConnection' flag is on (the default) and that the Hibernate connection release mode is set to 'on_close' (SpringTransactionFactory's default). Make sure that your LocalSessionFactoryBean actually uses SpringTransactionFactory: Your Hibernate properties should *not* include a 'hibernate.transaction.factory_class' property!\n    at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:515)\n    ... 121 more\n</code></pre>\n\n<p>Why spring do that? and is there a bypass</p>\n\n<p>any advice would be appreciated.</p>\n"},{"tags":["spring","dependency-injection","classloader","aspectj","compile-time-weaving"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":131,"score":0,"question_id":12853772,"title":"Problems changing from Load Time Weaver to Compile Time Weaver in Spring","body":"<p>I'm trying to change from load-time-weaving to compile-time-weaving with my Spring 2.5 app. </p>\n\n<p>To do this, I did the following:</p>\n\n<ol>\n<li><p>In my ant build file, I added</p>\n\n<pre><code>&lt;path id=\"aspectPath\"&gt;\n    &lt;pathelement location=\"${lib.home}/spring-aspects.jar\"/&gt;\n&lt;/path&gt;\n\n&lt;taskdef resource=\"org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties\"&gt;\n    &lt;classpath&gt;\n        &lt;pathelement location=\"${aspectj.home}/aspectjtools.jar\"/&gt;\n    &lt;/classpath&gt;\n&lt;/taskdef&gt;\n</code></pre></li>\n</ol>\n\n<p>and replaced the reference to the javac compiler with the following</p>\n\n<pre><code>    &lt;iajc sourceroots=\"${src.home}\" \n        destdir=\"${build.home}/WEB-INF/classes\" \n        classpathRef=\"compile.classpath\" \n        aspectPathRef=\"compile.classpath\" \n        debug=\"${compile.debug}\" \n        deprecation=\"${compile.deprecation}\" \n        encoding=\"cp1252\" \n        source=\"1.6\" \n        target=\"1.6\" \n        showWeaveInfo=\"${compile.debug}\"/&gt;\n</code></pre>\n\n<p>In applicationContext.xml I then replaced </p>\n\n<pre><code>&lt;context:load-time-weaver/&gt;\n</code></pre>\n\n<p>with </p>\n\n<pre><code>&lt;context:spring-configured/&gt;\n</code></pre>\n\n<p>Other configuration settings in my app context file, BTW, include</p>\n\n<pre><code>&lt;tx:annotation-driven/&gt;\n&lt;context:component-scan base-package=\"com.domain.somepackage\"/&gt;\n&lt;bean class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n</code></pre>\n\n<p>In the context.xml file, I removed the following from the loader tag</p>\n\n<pre><code>loaderClass=\"org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader\"\n</code></pre>\n\n<p>When I run the build script, it compiles without errors.</p>\n\n<p>I do get this warning however.</p>\n\n<pre><code>[iajc] warning at &lt;Unknown&gt;::0 Found @DeclareAnnotation while current release \ndoes not support it (see 'org.aspectj.weaver.bcel.AtAjAttributes') \n</code></pre>\n\n<p>at the top, and this warning at the bottom:</p>\n\n<pre><code>[iajc] warning at C:\\server-\nlib\\aspectjtools.jar!org\\aspectj\\ajdt\\internal\\compiler\\\nCompilerAdapter.class:121::0 advice defined in    \norg.aspectj.ajdt.internal.compiler.CompilerAdapter has not been \napplied [Xlint:adviceDidNotMatch]\n</code></pre>\n\n<p>Most of the logging looks like:</p>\n\n<pre><code>[iajc] weaveinfo Join point 'method-execution(void com.kjconfigurator.upgra\nde.Upgrade1_07HelperImp.addServiceParticipation(com.kjconfigurator.core.domain.U\nser, com.kjconfigurator.core.domain.ServiceAccount))' in Type 'com.kjconfigurato\nr.upgrade.Upgrade1_07HelperImp' (Upgrade1_07HelperImp.java:196) advised by after\nReturning advice from 'org.springframework.transaction.aspectj.AnnotationTransac\ntionAspect' (spring-aspects.jar!AbstractTransactionAspect.class:77(from Abstract\nTransactionAspect.aj))\n</code></pre>\n\n<p>I removed the tomcatspringweaver jar from the tomcat lib.\nI am using aspectj1.7</p>\n\n<p>When I start the app up, I get an error indicating that when a dao class is being injected into a service class there is an NPE at at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:104)</p>\n\n<pre><code>Caused by: org.springframework.beans.PropertyBatchUpdateException; nested\nPropertyAccessExceptions (1) are: PropertyAccessException 1: \norg.springframework.beans.MethodInvocationException: Property 'dao' threw exception; \nnested exception is java.lang.NullPointerException\n</code></pre>\n\n<p>The Dao class extends an AbstractJpaDao class that looks like this:</p>\n\n<pre><code>public abstract class AbstractJpaDao&lt;T&gt;  {\n    private static Logger log = Logger.getLogger(AbstractJpaDao.class.getName());\n\n    private EntityManager entityManager;\n\n    @PersistenceContext\n    public void setEntityManager(EntityManager entityManager) {\n        this. entityManager = entityManager;\n    }\n    ...\n}\n</code></pre>\n\n<p>It's been such a long time since all this was initially set up, I don't remember how all the configurations work. Nor do I understand class loaders or AspectJ very well. But something is not happening correctly, perhaps the Entitymanager is not being injected for some reason.</p>\n\n<p>Questions.</p>\n\n<ol>\n<li>What might be causing this?</li>\n<li>Is <code>&lt;context:spring-configured/&gt;</code> really needed? </li>\n<li>The package referenced by <code>&lt;context:component-scan base-package=\"com.domain.somepackage\"/&gt;</code> does not include the Dao class in question. When I do add another component-scan tag with the dao's package in it, nothing different happens. Is this necessary?</li>\n</ol>\n"},{"tags":["java","spring","servlets"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13225008,"title":"Request scoped beans in Spring HttpRequestHandler","body":"<p>I have followed the suggestion <a href=\"http://stackoverflow.com/questions/1866953/how-to-connect-httpservlet-with-spring-application-context-in-web-xml\">here -> How to connect HttpServlet with Spring Application Context in web.xml</a> to allow access to spring beans in a servlet. It seems to work fine for singleton beans, however I need to access request-scoped beans in my handleRequest() method.</p>\n\n<p>As-is, request scoped beans can't be wired in to the HttpRequestHandler, as it is singleton scoped and as such there is a mis-match of scopes.</p>\n\n<p>I tried making my HttpRequestHandler a request-scoped bean, however this still only ever resulted in a single bean. i.e. a new instance was not injected for each request. I can only assume that somehow the mechanism employed by org.springframework.web.context.support.HttpRequestHandlerServlet is not allowing a new instace for each request.</p>\n\n<p>My workaround is to get the bean directly from the application context inside the handleRequest method, e.g.<br/><br/>\n<code>Calendar localNow = (Calendar) applicationContext.getBean(\"now\");</code></p>\n\n<p>but ideally I'd just like to have the request scoped bean injected in for me.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["java","spring","hibernate","tomcat6"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13226994,"title":"java tomcat6 - How to automatically refresh page when a data is added?","body":"<p>first of all let me explain what Im tring to do. Im trying to create a very simple web based chat program. In my development I have 2 pcs using only 1 ip address. The ip address that is being used is the ip address which runs the tomcat6 server. The simple chat is connected to the database. How will I make the web page automatically update when the other pc input data(message) in the database without reloading the page.</p>\n\n<p>Please forgive me if my question might sound idiotic. I have no experience in chat program. Please help.</p>\n"},{"tags":["spring","tomcat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13221039,"title":"How to access css file with Tomcat 6 and Spring 3.0.4","body":"<p>I try to access css file by:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"META-INF/resources/css/style.css\" /&gt;\n</code></pre>\n\n<p>Structure:</p>\n\n<pre><code>springhibernate\n -META-INF\n   -recources\n       -css\n           -style.css\n       -img\n -WEB-INF\n    -classes\n    -jsp\n    web.xml\n    application-context.xml\n</code></pre>\n\n<p>web.xml part:</p>\n\n<pre><code>  &lt;servlet&gt;\n        &lt;servlet-name&gt;test&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;test&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>How can I refer to a css file?</p>\n"},{"tags":["java","spring","list"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13225325,"title":"How to use List to display objects of a Model Map in Spring?","body":"<p>I apologize in advance for an ambiguity or poor terminology that I use. I'm attempting to use List in order to convert the objects of a Model Map and then display the output in a corresponding jsp, but I'm having trouble understanding what I'm doing wrong. \"Collections.List\" returns an error \"cannot find symbol\" although I've imported java.util.List, which I thought could be called from Collections. </p>\n\n<p>I appreciate any assistance and I'm willing to provide any clarification necessary.</p>\n\n<pre><code>@RequestMapping(\nvalue  = \"/updateProducts.htm\",\nmethod = RequestMethod.GET\n)\npublic String list(ModelMap modelMap) {\n\n    List&lt;Product&gt; products;\n        products = Collections.List(modelMap.values());\n\nmodelMap.addAttribute(\"updateProductsForm\", new UpdateProductsForm());\nmodelMap.addAttribute(\"products\", products);\n\npublic String list(ModelMap modelMap) {\n</code></pre>\n\n<p>I followed your advice. But now I'm getting errors on \"elements\" in \"products.elements\", as well as \"modelMap.values\" still. I added java.util.Collections as well as java.util.Enumeration ..</p>\n\n<pre><code>List&lt;Product&gt; products;\n    products = Collections.list(modelMap.values());\n\nfor (Enumeration&lt;Product&gt; e = products.elements(); e.hasMoreElements();) {\n            System.out.println(e.nextElement());\n        }\n\nmodelMap.addAttribute(\"updateProductsForm\", new UpdateProductsForm());\nmodelMap.addAttribute(\"products\", products);\n</code></pre>\n"},{"tags":["spring","hibernate","jpa","jboss","hibernate-criteria"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":200,"score":0,"question_id":10554039,"title":"Hibernate tuple criteria queries","body":"<p>I am trying to create a query using hibernate following the example given in section 9.2 of <a href=\"http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/querycriteria.html#querycriteria-tuple\" rel=\"nofollow\">chapter 9</a></p>\n\n<p>The difference with my attempt is I am using spring MVC 3.0. Here is my Address class along with the method i created.</p>\n\n<pre><code>@RooJavaBean\n@RooToString\n@RooEntity\n@RooJson\npublic class Address {\n\n    @NotNull\n    @Size(min = 1)\n    private String street1;\n\n    @Size(max = 100)\n    private String street2;\n\n    private String postalcode;\n\n    private String zipcode;\n\n    @NotNull\n    @ManyToOne\n    private City city;\n\n    @NotNull\n    @ManyToOne\n    private Country country;\n\n    @ManyToOne\n    private AddressType addressType;\n\n    @Transient\n    public static List&lt;Tuple&gt; jqgridAddresses(Long pID){\n        CriteriaBuilder builder = Address.entityManager().getCriteriaBuilder();\n        CriteriaQuery&lt;Tuple&gt; criteria = builder.createTupleQuery();\n        Root&lt;Address&gt; addressRoot = criteria.from( Address.class );\n        criteria.multiselect(addressRoot.get(\"id\"), addressRoot.get(\"street1\"), addressRoot.get(\"street2\"));\n        criteria.where(builder.equal(addressRoot.&lt;Set&lt;Long&gt;&gt;get(\"id\"), pID));\n        return Address.entityManager().createQuery( criteria ).getResultList();\n    }\n}\n</code></pre>\n\n<p>The method called <code>jqgridAddresses</code> above is the focus. I opted not to use the \"<strong>Path\"</strong> because when I say something like <strong>Path idPath = addressRoot.get( Address_.id );</strong> as in section 9.2 of the documentation, the <strong>PathAddress_.id</strong> stuff produces a compilation error.</p>\n\n<p>The method above returns an empty list of type <code>Tuple</code> as its size is zero even when it should contain something. This suggests that the query failed. Can someone please advise me.</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13199834,"title":"Spring exception catching","body":"<p>I am writing a REST application using Spring. It is divided into 3 layers, controller, service and repository.</p>\n\n<p>The repository layer are using Spring data and MongoDb. The exceptions from MongoDb are translated to Spring Data exceptions.</p>\n\n<p>Using the @ExceptionHandler annotation I tried to catch those exceptions in the repository layer. This did not work. The only way to catch the exception with @ExceptionHandler is to put the code in the controller layer.</p>\n\n<p>Is there a way for me to catch and handle the exceptions in the repository layer,, without using try/catch blocks.</p>\n\n<p>//regards\n//lasse  </p>\n"},{"tags":["spring","maven"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":9732531,"title":"Why is Spring published under two different sets of artifacts?","body":"<p>Whhy is Spring published under two systems of artifact names?</p>\n\n<p>For example, the spring core is (usually?) used as</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n    &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>(see: <a href=\"http://mvnrepository.com/artifact/org.springframework/spring-core/3.1.1.RELEASE\" rel=\"nofollow\">http://mvnrepository.com/artifact/org.springframework/spring-core/3.1.1.RELEASE</a> )</p>\n\n<p>but it is also published as</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;org.springframework.core&lt;/artifactId&gt;\n    &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>(see: <a href=\"http://ebr.springsource.com/repository/app/bundle/version/detail?name=org.springframework.core&amp;version=3.1.1.RELEASE\" rel=\"nofollow\">http://ebr.springsource.com/repository/app/bundle/version/detail?name=org.springframework.core&amp;version=3.1.1.RELEASE</a> )</p>\n\n<p><strong>Questions:</strong></p>\n\n<ol>\n<li><p>Why do they publish the same (?) jar as two different artifacts?</p></li>\n<li><p>Which one should I use?</p></li>\n<li><p>Why can I find the first jar in the maven central repository, but not the second jar? In which repository can I find the second jar?</p></li>\n</ol>\n"},{"tags":["spring","hibernate","logback","spring-data"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":24,"score":3,"question_id":13223905,"title":"hibernate logback sql","body":"<p>I want to see the actual parameters of my SQL queries when I use Hibernate. I add this to my logback.xml to see the queries (with question marks):</p>\n\n<pre><code>&lt;logger name=\"org.hibernate.type\" level=\"TRACE\" /&gt;\n</code></pre>\n\n<p>but to no effect. </p>\n\n<p>Is there any special configuration necessary?</p>\n\n<p>OnConsoleStatusListener shows me the correct configuration</p>\n\n<pre><code>23:48:15,246 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate.type] to TRACE\n</code></pre>\n\n<p>but no output from org.hibernate.type package.</p>\n\n<p>I'm using Spring with Jpa.</p>\n"},{"tags":["spring","aspectj","spring-aop"],"answer_count":0,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13182205,"title":"Java Spring AOP: Using CustomizableTraceInterceptor with JavaConfig @EnableAspectJAutoProxy, not XML <aop:advisor>","body":"<p>Spring AOP has a method-level tracer called <code>CustomizableTraceInterceptor</code>. Using Spring's XML configuration approach, one would set up this tracer like so:</p>\n\n<pre><code>&lt;bean id=\"customizableTraceInterceptor\" class=\"\n  org.springframework.aop.interceptor.CustomizableTraceInterceptor\"&gt;\n  &lt;property name=\"enterMessage\" value=\"Entering $[methodName]($[arguments])\"/&gt;\n  &lt;property name=\"exitMessage\" value=\"Leaving $[methodName](): $[returnValue]\"/&gt;\n&lt;/bean&gt;\n\n&lt;aop:config&gt;\n  &lt;aop:advisor advice-ref=\"customizableTraceInterceptor\"\n    pointcut=\"execution(public * org.springframework.data.jpa.repository.JpaRepository+.*(..))\"/&gt;\n&lt;/aop:config&gt;\n</code></pre>\n\n<p>I would like to set up above configuration using Spring's JavaConfig style (i.e. taking advantage of Java annotations, especially <code>@EnableAspectJAutoProxy</code> for activating AspectJ in JavaConfig).</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = { \"some.package\" })\n@ComponentScan(basePackages = { \"some.package2\", \"some.package3\" })\n@EnableAspectJAutoProxy\npublic class FacebookDomainConfiguration {\n\n    @Bean someBean() {\n    ...\n    }\n...\n}\n</code></pre>\n\n<p>What is the <code>@EnableAspectJAutoProxy</code>-style equivalent for <code>&lt;aop:advisor advice-ref=\"customizableTraceInterceptor\" ...&gt;</code>?</p>\n"},{"tags":["java","spring","redirect","spring-mvc","jstl"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13224576,"title":"How to redirect to another site in Spring MVC JavaEE","body":"<p>I've been googling a while and I couldn't find a clear answer or documentation about this specific method.</p>\n\n<p>I want to redirect to another site, like stackoverflow.com using this method... But I don't know how to do it. Any help will be appreciated.</p>\n\n<pre><code>@RequestMapping(value = \"/redirectTravelocity\", method = RequestMethod.GET)\nprivate ModelAndView processForm()\n{\n    ModelAndView modelAndView = new ModelAndView( \"redirect:stackoverflow.com\" );\n    Map&lt;String, Object&gt; model = modelAndView.getModel();\n\n    model.put( \"error\", \"this.is.my.error.code\" );\n    return new ModelAndView( \"redirect:stackoverflow.com\", model );\n}\n</code></pre>\n\n<p>It doesn't work, it redirects within my site and it crashes... I know this is stupid but I don't know how to do it.</p>\n"},{"tags":["java","spring","java-ee","spring-mvc","jstl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13223050,"title":"Trimming input boxes and adding to context JSTL","body":"<p>I'm new to the JSTL world so please be gentle with me, I already been reading but couldn't find the solution for this.</p>\n\n<p>I want to trim the whitespaces from both beginning and end of a input box, so when the user click the submit button my Controller receives the string without spaces.</p>\n\n<p>Please don't suggest me to use other frameworks because I'm already having trouble with this, when I master this, I'll advance to the next step.</p>\n\n<p>Here's my JSP code, I tried this, but doesn't work, it seems that the context doesn't keep the values I pass, after that I was only trying...  Any help appreciated!</p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\n    pageEncoding=\"ISO-8859-1\"%&gt;\n&lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\"%&gt;\n&lt;%@ taglib uri=\"http://java.sun.com/jsp/jstl/functions\" prefix=\"fn\"%&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\"&gt;\n&lt;LINK REL=StyleSheet HREF=\"resources/index-style.css\" TYPE=\"text/css\"&gt;\n&lt;title&gt;Submit a new academic!&lt;/title&gt;\n&lt;/head&gt;\n&lt;div class=\"home\"&gt;\n    &lt;a href=\"index\"&gt;&lt;img src=\"resources/home.png\" /&gt;&lt;/a&gt;\n&lt;/div&gt;\n&lt;div class=\"list\"&gt;\n    &lt;h1&gt;This is the place where you register a new Academic on the\n        system!&lt;/h1&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;div class=\"list\"&gt;\n    &lt;form action=\"addAcademicAction\" method=\"post\"&gt;\n        &lt;p&gt;Submit your name:&lt;/p&gt;\n        &lt;input type=\"text\" name=\"academicName\"&gt;&lt;br&gt;\n        &lt;p&gt;Level of education&lt;/p&gt;\n        &lt;input type=\"radio\" name=\"educationLevel\" value=\"student\" checked&gt;Student&lt;br&gt;\n        &lt;input type=\"radio\" name=\"educationLevel\" value=\"csstudent\"&gt;Computer\n        Science Student&lt;br&gt; &lt;input type=\"radio\" name=\"educationLevel\"\n            value=\"professor\"&gt;Professor&lt;br&gt; &lt;br&gt;\n        &lt;button name=\"submit\" type=\"submit\" value=\"HTML\"&gt;Add\n            Academic!&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n\n&lt;c:if test=\"${context.request.method=='POST'}\"&gt;\n    &lt;c:set var=\"academicName\" value=\"${fn:trim(param.academicName)}\"/&gt;\n&lt;/c:if&gt;\n\n&lt;body&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["spring","maven","aspectj","gradle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13204954,"title":"AspectJ AJC working with aspectj-maven-plugin but not Gradle","body":"<p>I have been trying to get spring-aspects copiled into a Gradle application.</p>\n\n<p>I first was trying to get a Vaadin Spring integration working and have copied vaadin-6-spring-3-integration-2/]<a href=\"https://vaadin.com/wiki/-/wiki/Main/Spring%20Integration\" rel=\"nofollow\">1</a> and <a href=\"https://vaadin.com/wiki/-/wiki/Main/Spring%20Integration\" rel=\"nofollow\">Vaadin Spring Integration</a> and when I run the application from Gradle with the exact task from <a href=\"https://github.com/SpringSource/spring-framework/blob/master/spring-aspects/aspects.gradle\" rel=\"nofollow\">https://github.com/SpringSource/spring-framework/blob/master/spring-aspects/aspects.gradle</a> nothing gets Autowired (everything is null). I have also tried this version: '<a href=\"https://raw.github.com/breskeby/gradleplugins/0.9-upgrade/aspectjPlugin/aspectJ.gradle\" rel=\"nofollow\">https://raw.github.com/breskeby/gradleplugins/0.9-upgrade/aspectjPlugin/aspectJ.gradle</a>'\nI also used the updated version noted on <a href=\"http://stackoverflow.com/questions/11550393/gradle-1-0-spring-aspectj-build-problems\">gradle-1-0-spring-aspectj-build-problems</a> but nothing seems to work with spring-aspects compile time weaving except for the Maven plugin.\nHere is the Gradle task I have used last:</p>\n\n<pre><code>task compileJava(dependsOn: JavaPlugin.PROCESS_RESOURCES_TASK_NAME, overwrite: true)  {\n    dependsOn configurations.ajc.getTaskDependencyFromProjectDependency(true, \"compileJava\")\n\n    doLast{\n        ant.taskdef( resource:\"org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties\", classpath: configurations.ajc.asPath)\n        ant.iajc(source:sourceCompatibility, target:targetCompatibility, destDir:sourceSets.main.output.classesDir.absolutePath, maxmem:\"512m\", fork:\"true\",\n                aspectPath:configurations.aspects.asPath, inpath:configurations.ajInpath.asPath, sourceRootCopyFilter:\"**/.svn/*,**/*.java\",classpath:configurations.compile.asPath){\n            sourceroots{\n                sourceSets.main.java.srcDirs.each{\n                    pathelement(location:it.absolutePath)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Then when I created a Maven pom to use the following plugin:</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${aspectj-maven-plugin.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;!-- Required as the plugin does not resolve this by default --&gt;\n                &lt;source&gt;${maven.compiler.source}&lt;/source&gt;\n                &lt;target&gt;${maven.compiler.target}&lt;/target&gt;\n                &lt;aspectLibraries&gt;\n                    &lt;aspectLibrary&gt;\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n                    &lt;/aspectLibrary&gt;\n                &lt;/aspectLibraries&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;goal&gt;test-compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>The application is autowired fine.</p>\n\n<p>Can anyone help getting Gradle to work?</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":217,"score":0,"question_id":11570779,"title":"unit testing REST client -- mock the service","body":"<p>I am trying to test <code>REST</code> client functionality when the response status indicates error. So I want to mock the rest service to return an error code (like 404) and test that the client is handling the error cases correctly. Is there a way to mock the service?</p>\n"},{"tags":["spring","testing","rest","mocking","mule"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":565,"score":1,"question_id":8083510,"title":"How to mock REST Services?","body":"<p>I have a maven/mule/spring development environment that I build REST services within.  I also have a series of TestNG tests to validate these services.  I also want the ability to alter the responses from the services, either returning specific information or throw an exception.  This was I can automatically test broader behaviours of the services.  I figured that mocking the services would be the best approach, but I cannot find any good information on how to mock a REST service.</p>\n\n<p>Is there any material I can review on how to mock a REST web service?</p>\n\n<p>--Update---</p>\n\n<p>I thought I would add an example to make the problem more concrete.  If I have the following setup:</p>\n\n<pre><code>testA calls serviceA, which then calls serviceB\n</code></pre>\n\n<p>If serviceA should return a web exception to testA if serviceB responds with an error, I would like to inject a mockedServiceB in to the system for the test where mockedServiceB always returns an error:</p>\n\n<pre><code>testA calls serviceA, which then calls mockedServiceB (which always returns an error to serviceA)\n</code></pre>\n"},{"tags":["java","spring"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":39,"score":3,"question_id":13220919,"title":"Spring bean alias usage","body":"<p>I know what bean alias means in spring. But I want to know the use cases for making use of alias. Why would somebody want to refer a bean using alias name instead of its name?  </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","form-handling"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13214105,"title":"Form object's id being set to 0","body":"<p>I'm lost for ideas as to why this controller method is not working, but maybe someone has seen something like this before. My web form supplies all the Property object's variables (one of them being the id) using the masqueraded PUT method. It's annotated like this:</p>\n\n<pre><code>package uk.co.nicshouse.jester.domain;\n\nimport java.io.Serializable;\nimport javax.persistence.Embedded;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\n\n\n@Entity\npublic class Property implements Serializable\n{\n    @Id\n    @GeneratedValue\n    private long id;\n    private String name;\n    private String description;\n\n    @Embedded\n    private Address address;\n\n    @Override\n    public boolean equals(Object obj)\n    {\n        if (obj == null) {\n            return false;\n        }\n        if (getClass() != obj.getClass()) {\n            return false;\n        }\n        final Property other = (Property) obj;\n        if (this.id != other.id) {\n            return false;\n        }\n        if ((this.name == null) ? (other.name != null) : !this.name.equals(other.name)) {\n            return false;\n        }\n        if ((this.description == null) ? (other.description != null) : !this.description.equals(other.description)) {\n            return false;\n        }\n        if (this.address != other.address &amp;&amp; (this.address == null || !this.address.equals(other.address))) {\n            return false;\n        }\n        return true;\n    }\n\n\n\n    @Override\n    public int hashCode()\n    {\n        int hash = 3;\n        hash = 29 * hash + (int)this.id;\n        hash = 29 * hash + (this.name != null ? this.name.hashCode() : 0);\n        hash = 29 * hash + (this.description != null ? this.description.hashCode() : 0);\n        hash = 29 * hash + (this.address != null ? this.address.hashCode() : 0);\n        return hash;\n    }\n\n    @Override\n    public String toString()\n    {\n        return \"Property{\" + \"id=\" + id + \", name=\" + name + \", description=\" + description + \", address=\" + address + '}';\n    }\n\n\n\n    public long getId()\n    {\n        return id;\n    }\n\n    public void setId(long id)\n    {\n        this.id = id;\n    }\n\n    public String getName()\n    {\n        return name;\n    }\n\n    public void setName(String name)\n    {\n        this.name = name;\n    }\n\n    public String getDescription()\n    {\n        return description;\n    }\n\n    public void setDescription(String description)\n    {\n        this.description = description;\n    }\n\n    public Address getAddress()\n    {\n        return address;\n    }\n\n    public void setAddress(Address address)\n    {\n        this.address = address;\n    }\n\n}\n</code></pre>\n\n<p>The controller looks like this:</p>\n\n<pre><code>package uk.co.nicshouse.jester.mvc;\n\nimport java.util.List;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.validation.Valid;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.portlet.ModelAndView;\nimport uk.co.nicshouse.jester.domain.Property;\nimport uk.co.nicshouse.jester.service.PropertyService;\n\n\n@Controller\n@RequestMapping(\"/property\")\npublic class PropertyController\n{\n    @Autowired\n    private PropertyService propertyService;\n\n\n    /*\n     * Methods that return views\n     */\n\n    @RequestMapping(method=RequestMethod.GET, produces=\"text/html\")\n    public String listProperty(Model model, HttpServletRequest request)\n    {\n        model.addAttribute( propertyService.getAll() );\n        model.addAttribute(\"hostname\", request.getServerName());\n        return \"property/list\";\n    }\n\n    @RequestMapping(value=\"/{id}\", method=RequestMethod.GET, produces=\"text/html\")\n    public String viewProperty(@PathVariable long id, Model model)\n    {\n        model.addAttribute( propertyService.getById(id) );\n        return \"property/view\";\n    }\n\n    @RequestMapping(value=\"/{id}/edit\", method=RequestMethod.GET, produces=\"text/html\")\n    public String editProperty(@PathVariable long id, Model model)\n    {\n        model.addAttribute( propertyService.getById(id) );\n        return \"property/edit\";\n    }\n\n    @RequestMapping(value=\"/new\", method=RequestMethod.GET, produces=\"text/html\")\n    public String newProperty(Model model)\n    {\n        model.addAttribute( new Property() );\n        return \"property/edit\";\n    }\n\n    @RequestMapping(value=\"/new\", method=RequestMethod.POST)\n    public String createProperty(@Valid Property property, BindingResult bindingResult)\n    {\n        getPropertyService().create(property);\n        return \"redirect:/property/\" + property.getId();\n    }\n\n    @RequestMapping(value=\"/**\", method=RequestMethod.PUT)\n    public String updateProperty(@RequestParam(\"id\") int id, Property property)\n    {\n        System.out.println(\"Supplied id: \" + id);\n        System.out.println(\"Supplied property: \" + property);\n        getPropertyService().update(property);\n\n        return \"redirect:/property/\" + property.getId();\n    }\n\n\n\n\n\n    public PropertyService getPropertyService()\n    {\n        return propertyService;\n    }\n\n    public void setPropertyService(PropertyService propertyService)\n    {\n        this.propertyService = propertyService;\n    }\n}\n</code></pre>\n\n<p>And the form as generated by jstl looks like this:</p>\n\n<pre><code>&lt;form id=\"property\" action=\"/jester/property/1/edit\" method=\"post\" enctype=\"multipart/form-data\"&gt;&lt;input type=\"hidden\" name=\"_method\" value=\"PUT\"/&gt;\n&lt;input id=\"id\" name=\"id\" type=\"hidden\" value=\"3\"/&gt;\n&lt;div&gt;\n    &lt;label for=\"name\"&gt;Name&lt;/label&gt;\n    &lt;input id=\"name\" name=\"name\" type=\"text\" value=\"Test Name\" size=\"15\"/&gt;&lt;br/&gt;\n\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;label for=\"description\"&gt;Description&lt;/label&gt;\n    &lt;textarea id=\"description\" name=\"description\" size=\"15\"&gt;Test Description Here&lt;/textarea&gt;&lt;br/&gt;\n\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;label for=\"address.street\"&gt;Street&lt;/label&gt;\n    &lt;input id=\"address.street\" name=\"address.street\" type=\"text\" value=\"Test Street\" size=\"15\"/&gt;&lt;br/&gt;\n\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;label for=\"address.borough\"&gt;Borough&lt;/label&gt;\n    &lt;input id=\"address.borough\" name=\"address.borough\" type=\"text\" value=\"\" size=\"15\"/&gt;&lt;br/&gt;\n\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;label for=\"address.town\"&gt;Town&lt;/label&gt;\n    &lt;input id=\"address.town\" name=\"address.town\" type=\"text\" value=\"Test Town\" size=\"15\"/&gt;&lt;br/&gt;\n\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;label for=\"address.county\"&gt;County&lt;/label&gt;\n    &lt;input id=\"address.county\" name=\"address.county\" type=\"text\" value=\"Test County\" size=\"15\"/&gt;&lt;br/&gt;\n\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;label for=\"address.postcode\"&gt;Postcode&lt;/label&gt;\n    &lt;input id=\"address.postcode\" name=\"address.postcode\" type=\"text\" value=\"TT11 1TT\" size=\"15\"/&gt;&lt;br/&gt;\n\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;label for=\"address.country\"&gt;Country&lt;/label&gt;\n    &lt;input id=\"address.country\" name=\"address.country\" type=\"text\" value=\"UK\" size=\"15\"/&gt;&lt;br/&gt;\n\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;input type=\"submit\" value=\"Save\" /&gt;\n    &lt;input type=\"reset\" /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>The strange thing is that the <code>id==3</code> (the correct value from the HTML form), but <code>property.id==0</code>! Property's other variables are set correctly. Any ideas why this is happening?</p>\n"},{"tags":["java","spring","junit","spring-data"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":13214209,"title":"Should I unit test generated Java code?","body":"<p>Simple question. If I use spring-data to generate CRUD methods for my DAO layer, should I still write unit tests against the generated methods? Or would that be the equivalent of unit testing library code?</p>\n\n<p>Thanks in advance.</p>\n\n<p>EDIT: To clarify, I'm asking whether or not the unit test needs to be written <em>in addition to</em> a suite of integration tests that get run before a release. For example, a <a href=\"https://en.wikipedia.org/wiki/Unit_test\" rel=\"nofollow\">unit test</a> for the findAll() method of the DAO layer would be similar to the following:</p>\n\n<pre><code>class DepartmentDAOTest extends spock.lang.Specification {\n   /* ... */\n   def \"returns all departments\"() {\n       setup:\n       def result = new List&lt;Department&gt;()\n       when:\n       result = dao.findAll()\n       then:\n       result.size() == EXPECTED_SIZE\n   }\n}\n</code></pre>\n\n<p>Whereas an <a href=\"https://en.wikipedia.org/wiki/Integration_test\" rel=\"nofollow\">integration test</a> would be run probably by a test team or developer by hand, possibly before tagging a new release. This could either be automated using <a href=\"http://jwebunit.sourceforge.net/\" rel=\"nofollow\">JWebUnit</a> or <a href=\"http://www.gebish.org/\" rel=\"nofollow\">Geb</a>, and tests every component (including the platform) to ensure they work as expected when \"integrated.\"</p>\n\n<p>If I were to write the DAO implementation by hand using JdbcTemplate there would be no question that I should unit test every method. When I unit test the service layer (which makes calls to the DAO layer) I can mock out the DAO layer so I don't test it twice.</p>\n\n<p>If I make a call into a third-party library like pdfbox for generating a PDF, there's an expectation for each method to work (because it is tested as a part of the pdfbox project). I don't test that their drawSquare method really draws a square, but during integration testing I'll see that my export PDF functionality correctly exports a PDF the way we want it to. </p>\n\n<p>So the question should really be re-worded as, \"Under which testing phase should I test my usage of spring-data?\"</p>\n"},{"tags":["ajax","spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13218491,"title":"Spring MVC reload parts of the page","body":"<p>My current MVC application in Spring is a classical one - controller returns view name to render, then *.jsp file is rendered to the browser. Simple and bullet-proof :)</p>\n\n<p>What I want to do now is to update parts of the page using AJAX.</p>\n\n<p>Part of the page should be handled by method in controller, something like \"taskList\" would render readty-to-include html with list of tasks.</p>\n\n<p>It's all fine and dandy with ajax itself - I just create holding div in page and populate it with html from that request.</p>\n\n<p>Now the question:\nIs there a way to include that html in page on server side?\nSomething like (warning: pseudocode :))</p>\n\n<pre><code>&lt;div id=\"taskListHolder\"&gt;\n    &lt;someSpringtag:include 'taskList' /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Basically I want to include html from one controller response in another.\nSo in case of first page load no AJAX is necessary and it would also work when JS is disabled.</p>\n\n<p>What are the best practices to do such a thing?</p>\n\n<p>Thanks!\nLeonti</p>\n"},{"tags":["ajax","spring","spring-mvc","spring-3","valums-file-uploader"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13212666,"title":"valums file-uploader IE and @Responsebody. IE Launches download dialog.","body":"<p>I am using valums file-uploader to upload files. This works great if my Spring controller returns void. If I add a @Responsebody Object to my controller IE things that I am about to download instead of uploading a file and launches a dialog. </p>\n\n<p>The reason I would like to have a @Responsebody Object and not void is for error handling. How can I trick IE in this case?</p>\n"},{"tags":["java","spring","grails","rest"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3568,"score":1,"question_id":3152835,"title":"What is the best Java RESTful framework for a very simple backend server?","body":"<p>I need to develop a very thin shim for hadoop to be used together with Rails/Sinatra application. I'm a .Net developer and have a lot experience with Ruby. So what is the best framework to choose giving the fact it is needed for a very small project and it should provide RESTful web services.</p>\n\n<p>I looked at Grails and it seems to be very robust and Rails alike solution. Should I look at Spring? Or it will be an overkill for my use case?</p>\n"},{"tags":["spring","java-ee","spring-mvc","spring-webflow","spring-webflow-2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13219031,"title":"Reading query strings from GET inside Spring web flow","body":"<p>Hy.</p>\n\n<p>Im continuing a spring web flow, using execution key. (an order paypal payment)\nand would need to read query strings from get. &amp;TokenID and &amp;PayerID</p>\n\n<p>this is how the URL looks like where Paypal redirects user after confirming payment:</p>\n\n<pre><code>/sampleflow?execution=e1s1&amp;_eventId=approved&amp;token=EC5D7416956W8431713&amp;PayerID=TN2RE8ZTH67JN\n</code></pre>\n\n<p>if eventID is approved, my flow redirects to a payment confirmed state. This part is working.\nI just need to get the query string parameters somehow.</p>\n\n<p>Any way to do this?</p>\n"},{"tags":["java","spring","file-io"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13218898,"title":"Is there any reason not to use resource.getInputStream()?","body":"<p>Is it ever favorable to create a <code>FileInputStream</code>, like this:</p>\n\n<pre><code>InputStream fileInputStream = new FileInputStream(resource.getFile());\n</code></pre>\n\n<p>instead of using the <code>InputStream</code> created by the resource, like this:</p>\n\n<pre><code>InputStream resourceInputStream = resource.getInputStream();\n</code></pre>\n\n<p>The resource is an <code>org.springframework.core.io.Resource</code>.</p>\n"},{"tags":["java","spring","javabeans","ioc-container"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13198177,"title":"Compound beans in Spring?","body":"<p>Suppose I have my own bean which contains another beans hardcoded.</p>\n\n<p>How to join this with Spring configuration?</p>\n\n<p>First way is to use factory-method:</p>\n\n<pre><code>&lt;bean id=\"bean1\" class=\"myClass1\"/&gt;\n&lt;bean id=\"bean1.member\" factory-bean=\"bean1\" factory-method=\"getMember\"/&gt;\n&lt;bean id=\"bean2\" class=\"myClass2\"&gt;\n   &lt;property name=\"collaborator\" ref=\"bean1.member\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Another way is to use EL:</p>\n\n<pre><code>&lt;bean id=\"bean1\" class=\"myClass1\"/&gt;\n&lt;bean id=\"bean2\" class=\"myClass2\"&gt;\n   &lt;property name=\"collaborator\" value=\"#{bean1.member}\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>In latter case Spring does not realize the dependency. Anyway, Bean Graph in Eclipse displays beans unrelated.</p>\n\n<p>Are there better ways? May be I may implement some interface with <code>MyClass1</code> so that it will treated as container or context?</p>\n"},{"tags":["java","spring","configuration","spring-security","cas"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13147249,"title":"Implementing CAS with Spring Security 3","body":"<p>I currently have spring security configured and working correctly.  I want to get CAS working so I can have a single sign on across multiple apps I've written.  I am confused how I can make cas use my custom userdetailService.</p>\n\n<p>Currently I have this is my spring-security.xml</p>\n\n<pre><code>    &lt;authentication-manager alias=\"authManager\"&gt;\n        &lt;authentication-provider user-service-ref=\"userDetailsService\"&gt;\n            &lt;password-encoder ref=\"passwordEncoder\"&gt;\n                &lt;salt-source ref=\"saltSource\"/&gt;\n            &lt;/password-encoder&gt;\n        &lt;/authentication-provider&gt;\n    &lt;/authetication-manager&gt;\n</code></pre>\n\n<p>From all the cas examples I have found they say to do implement the manage this way:</p>\n\n<pre><code>&lt;beans:bean id=\"casAuthenticationProvider\" class=\"org.springframework.security.cas.authentication.CasAuthenticationProvider\"&gt;\n    &lt;beans:property name=\"authenticationUserDetailsService\"&gt;\n        &lt;beans:bean class=\"org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper\"&gt;\n            &lt;beans:constructor-arg ref=\"userDetailsService\"/&gt;\n        &lt;/beans:bean&gt;\n    &lt;/beans:property&gt;\n    &lt;beans:property name=\"serviceProperties\" ref=\"serviceProperties\"/&gt;\n    &lt;beans:property name=\"ticketValidator\"&gt;\n        &lt;beans:bean class=\"org.jasig.cas.client.validation.Cas20ServiceTicketValidator\"&gt;\n            &lt;beans:constructor-arg index=\"0\" value=\"https://localhost:8443/cas\"/&gt;\n        &lt;/beans:bean&gt;\n    &lt;/beans:property&gt;\n    &lt;beans:property name=\"key\" value=\"1234554321\"/&gt;\n&lt;/beans:bean&gt;\n\n&lt;authentication-manager alias=\"authManager\"&gt;\n    &lt;authentication-provider ref=\"casAuthenticationProvider\"/&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p>The documentation is confusing.  How do I go from a working spring-security app to one that implements cas and still use my custom user details?  Also what do I need to change on the jsp pages?  Any help would be much appreciated.</p>\n\n<p>Thanks  </p>\n"},{"tags":["spring","dependency-injection"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13206266,"title":"Spring 3 setter-injection: How is it done when you need to use the injected class in constructor of another class?","body":"<p>If i have :</p>\n\n<pre><code>@Component\nclass Foo {\n\n    @Autowired      \n    private Bar b; //where b is @Service\n\n     public Foo(){          \n        //if i need to use b here, what do i need to do?\n        b.something(); // &lt;-- b is null so it'll crash here\n    }\n\n    public void setB(Bar b){\n        this.b = b;\n    }\n}\n</code></pre>\n\n<p>From reading Spring docs i understand that setter-based injection method is recommended over constructor based injection but in above example i need to be using the injected spring class inside the constructor of current class so for that it HAS to be constructor based injection correct? </p>\n\n<p>If so is this what it's going to look like?</p>\n\n<pre><code>@Component\nclass Foo {\n\n    private Bar b; //where b is @Service\n\n    @Autowired\n     public Foo(Bar b){\n        b.something(); // b won't be null now !\n    }\n}\n</code></pre>\n"},{"tags":["spring","hibernate","aop"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13171987,"title":"Spring Hibernate Connection through AOP standalone application","body":"<p>I am trying to develop Annotation based Spring Hibernate standalone application to connect to DB. I've gone through the some blogs and wondered like we should not make use of hibernateTemplate becoz coupling your application tightly to the spring framework. For this reason, Spring recommends that HibernateTemplate no longer be used.Further more my requirement is changed to Spring Hibernate with AOP using Declarative Transaction management.I am new to AOP concepts. Can any one please give an example on Spring Hibernate Connection through AOP. That would be a great help to me.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring","open-source","springsource"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":59,"score":-1,"question_id":13215805,"title":"earning by getting involved in Springsource projects","body":"<p>Can one make any earning by getting involved in Springsource projects(by contributing code, submitting pull requests, testing features etc.) </p>\n"},{"tags":["spring","aop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":10018472,"title":"Wrapping unknown exceptions into custom exception using throws advice","body":"<p>Is it possible to wrap an exception into a custom exception in a throwsAdvice and throw back this custom exception?\nE.g I have a class A with a method called as func(). This func() throws different exceptions. I apply throws advice on this func where I wrap all these exceptions into MyOwnException class and throw back MyOwnException instead.</p>\n\n<p>Is this possible, please advise.</p>\n"},{"tags":["spring","spring-security"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13217918,"title":"Spring Security Tables","body":"<p>In the spring security documentation , there are five tables to be created .</p>\n\n<p>1.users\n2.authorities ( map users to authorities ) \n3.groups\n4.groups_authorities ( map groups to authorities )\n5.group_members  ( map users to groups ) </p>\n\n<p>Why do we need to map both users and authorities to groups ? If we map either authroities or users to groups , cant we derive the other relationship ?</p>\n"},{"tags":["spring","spring-annotations"],"answer_count":5,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":200,"score":3,"question_id":12229282,"title":"Difference between Spring annotations","body":"<p>I have started reading Spring with Annotations and got confused. I am putting my doubts in two separate parts as below:</p>\n\n<p>1) Difference between <code>@Component and @Configuration</code>. I read that both removes the necessity of wiring code to be put in XML but didn't get the difference between these.</p>\n\n<p>2) Difference between <code>@Autowired,@Inject and @Resource</code></p>\n\n<p>While giving the difference, please specify which one to use when with its pros/cons</p>\n"},{"tags":["xml","eclipse","spring","namespaces"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":11743214,"title":"Managing Spring namespace schemas in Eclipse and Maven","body":"<p>I've been setting up Spring namespaces using <code>schemaLocation</code> in Eclipse without issue, but now I need to work without a network connection so I can't look up the the schemas from springframework.org.</p>\n\n<p>I know that when I bring a Spring component using Maven, I get the schemas I need and some files that map namespace handlers. How do I set up Eclipse to use these files in such a way that everything required is in the project?</p>\n\n<p>I know about the XML catalog in Eclipse, but setting this up would seem to involve lots of manual activities on any workstation I use that needs to be done every time I use a new Spring component or change versions. It seems that everything I need comes in the Spring jar, so how do I set up use this stuff instead of any external setup, so that I have everything I need to work and build in the Eclipse project itself?</p>\n"},{"tags":["java","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":13213643,"title":"Spring + session + hibernate = error listener start and error creating bean","body":"<p>I have some problems with things mentioned above.</p>\n\n<p>Here is my springconfig:</p>\n\n<pre><code>    &lt;context:annotation-config/&gt;\n&lt;context:property-placeholder location=\"jdbc.properties\"/&gt;\n\n&lt;bean id=\"cart\" class=\"cart.ShoppingCart\" scope=\"session\"&gt;\n    &lt;aop:scoped-proxy/&gt;\n&lt;/bean&gt;\n&lt;bean id=\"shopServlet\" class=\"ShopServlet\" scope=\"request\"/&gt;\n&lt;bean id=\"cartServlet\" class=\"cart.ShoppingCartServlet\" scope=\"request\"/&gt;\n&lt;bean id=\"productService\" class=\"products.ProductService\"/&gt;\n&lt;bean id=\"orderBean\" class=\"order.OrderBean\" scope=\"request\"/&gt;\n&lt;bean id=\"orderService\" class=\"order.OrderService\"/&gt;\n\n&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\"&gt;\n    &lt;property name=\"driverClassName\" value=\"${jdbc.driverClassName}\"/&gt;\n    &lt;property name=\"url\" value=\"${jdbc.url}\"/&gt;\n    &lt;property name=\"username\" value=\"${jdbc.username}\"/&gt;\n    &lt;property name=\"password\" value=\"${jdbc.password}\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;${hibernate.show_sql}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.format_sql\"&gt;${hibernate.format_sql}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.generate_statistics\"&gt;${hibernate.generate_statistics}&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>@Repository\n@Transactional\npublic class ProductService{\n\n@Autowired\nSessionFactory sessionFactory;\n</code></pre>\n\n<p>And the stack trace:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cart' defined in BeanDefinition defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor#0': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class\n\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor#0': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class\n\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class\n\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class\n\nCaused by: java.lang.IncompatibleClassChangeError: Implementing class\n</code></pre>\n\n<p>I tried to work with this example <a href=\"http://javaprogrammingtips4u.blogspot.com/2010/04/spring-integration-with-hibernate_23.html\" rel=\"nofollow\">link</a> and search through many different solutions, but I dont know. Some version mismatch or I am not understanding something.</p>\n\n<p>Dependencies:</p>\n\n<pre><code>  &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;cglib&lt;/groupId&gt;\n        &lt;artifactId&gt;cglib-nodep&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n        &lt;version&gt;20030825.184428&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-pool&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-pool&lt;/artifactId&gt;\n        &lt;version&gt;20030825.183949&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.myfaces.core&lt;/groupId&gt;\n        &lt;artifactId&gt;myfaces-impl&lt;/artifactId&gt;\n        &lt;version&gt;2.1.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-hibernate3&lt;/artifactId&gt;\n        &lt;version&gt;2.0.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;aopalliance&lt;/groupId&gt;\n        &lt;artifactId&gt;aopalliance&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-annotations&lt;/artifactId&gt;\n        &lt;version&gt;3.5.6-Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;4.1.7.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>If someone feels very powerful - here is the full code. Application is very small. <a href=\"https://www.dropbox.com/s/smy50sjlrvsiiyo/shoplab2-test.zip\" rel=\"nofollow\">link</a></p>\n"},{"tags":["spring","spring-mvc","log4j"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13153004,"title":"How to configure logging in spring mvc web application?","body":"<p>I have developed a web application where i can register a employee.</p>\n\n<p>My <code>web.xml</code>  </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xmlns=\"http://java.sun.com/xml/ns/javaee\"\n xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee \n http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" id=\"WebApp_ID\" version=\"2.5\"&gt;\n\n  &lt;display-name&gt;Employee Registration&lt;/display-name&gt;\n\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n\n  &lt;servlet&gt;\n  &lt;servlet-name&gt;sapient&lt;/servlet-name&gt;\n  &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n\n  &lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;sapient&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Now when i clicking on a <code>Register</code> Button in my html page.It goes to a controller class where i have wrote a code for logging.</p>\n\n<pre><code>@org.springframework.stereotype.Controller\npublic class RegController  {\n    private static final Logger LOGGER = Logger\n            .getLogger(RegController.class.getName());\n\n\n@RequestMapping(value = \"/register.htm\", method = RequestMethod.GET)\npublic ModelAndView handleRequest(HttpServletRequest request,\n        HttpServletResponse response) throws Exception {\n    LOGGER.debug(\"ENTERING the contoller class\");\n    ModelAndView mav = new ModelAndView(\"register\");\n    LOGGER.debug(\"exiting the contoller class\");\n    return mav;\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I have created a package called <code>resource</code> and have created a log4j.properties file in </p>\n\n<pre><code># Direct log messages to a log file\nlog4j.appender.file=org.apache.log4j.RollingFileAppender\nlog4j.appender.file.File=C:\\\\loging.log\nlog4j.appender.file.MaxFileSize=1MB\nlog4j.appender.file.MaxBackupIndex=1\nlog4j.appender.file.layout=org.apache.log4j.PatternLayout\nlog4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n\n</code></pre>\n\n<p>But my logs are not created in c drive.</p>\n\n<p>Do i need to configure something in web.xml ?\nI have already included log4j.jar file.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":63,"score":3,"question_id":13155403,"title":"how to go to next page only after clicking submit button in java using spring","body":"<p>I need to redirect to a page only after clicking the submit button, but not directly typing the url in the address bar. If it was directly typed in address bar, then it should display the home page.</p>\n\n<p>Iam using session.getAttribute to do the above process. I am thinking if there is any altrnative for this, as I need to do this for every post method... </p>\n\n<p>The below method is for first page, where I created a session attribute which is used in the next page.</p>\n\n<pre><code> @RequestMapping(value = \"/payment\", method = RequestMethod.POST)\npublic String submitForPayment(@ModelAttribute(\"deposit\") Deposit deposit, ModelMap model, HttpServletRequest request) throws IOException \n{\n            try {\n                HttpSession sessionForNextPage = request.getSession(true);\n                sessionForNextPage.setAttribute(\"vNumber\",\n                        deposit.getValidityNumber());\n\n                    return \"redirect:success\";\n\n            } catch (NullPointerException exception) {\n                return \"redirect:payment\";\n            }\n        }\n</code></pre>\n\n<p>The method below is for the next page where the session declared above is used.</p>\n\n<pre><code>@RequestMapping(value = \"/success\", method = RequestMethod.GET)\npublic String showSuccess(ModelMap model, HttpServletRequest request) \n          {\n        try {\n\n            view = \"success\";\n            HttpSession session = request.getSession(false);\n            int vNumber = (int) session.getAttribute(\"vNumber\");\n            System.out.println(vNumber);\n            if (vNumber != 0) {\n                request.getSession(false).removeAttribute(\"vNumber\");\n                return view;\n            }\n\n            else\n                return \"pay\";\n        } catch (Exception e) {\n\n            return \"redirect:pay\";\n        }\n    }\n</code></pre>\n\n<p>Is there any other way to do this, as I have to do this for all the methods...</p>\n"},{"tags":["javascript","jquery","spring","jquery-ajax","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":115,"score":1,"question_id":13198145,"title":"spring mvc 3 dynamic list binding + jquery + AJAX","body":"<p>I am facing an issue with dynamic list binding in Spring. I am trying to create an \"Add Contact\" page which basically looks like this:</p>\n\n<p><img src=\"http://i47.tinypic.com/345g50h.png\" alt=\"Contact Form\"></p>\n\n<p>When the \"Add Phone\" button is clicked I want another \"Phone Type\" and \"Phone Number\" button to appear below so that the user can enter multiple phone numbers. This is where I am facing issues.</p>\n\n<p>Below is my code:</p>\n\n<p>Domain Class - Contact:</p>\n\n<p>In my form, The First Name, Last Name, Email and Birthday are instance variable of the domain class \"Contact\" and Phone Type and Phone Number of the part of List Phones.</p>\n\n<pre><code>    @Entity\n    @Table(name = \"CONTACTS_JPA2\")\n    public class Contact {\n\n    @Id\n    @Column(name = \"CONTACT_ID\")\n    @GeneratedValue\n    private int Id;\n\n    @Column(name = \"FIRST_NAME\")\n    private String firstname;\n\n    @Column(name = \"LAST_NAME\")\n    private String lastname;\n\n    @SuppressWarnings(\"unchecked\") \n    @OneToMany(mappedBy = \"contact\", cascade = CascadeType.ALL)\n    private List&lt;Phone&gt; phones = LazyList.decorate(new ArrayList&lt;Phone&gt;(),FactoryUtils.instantiateFactory(Phone.class));\n\n    @Column(name = \"EMAIL_ID\")\n    private String emailid;\n\n    @Column(name = \"BIRTHDAY\")\n    private Date birthday;\n\n        /*Getters and Setters*/\n\n    }\n</code></pre>\n\n<p>Class Phone:</p>\n\n<pre><code>    @Entity\n    @Table(name = \"PHONE\")\n    public class Phone {\n\n    @Id\n     @Column(name = \"ID\")\n     private int Id;\n\n    @Column(name = \"PHONE_NBR\")\n    private String phonenumber;\n\n    @Column(name = \"PHONE_TYPE\")\n    private String phonetype;\n\n    @ManyToOne()\n    @JoinColumn(name = \"CONTACT_ID\")\n    private Contact contact;\n\n    /*Getters and Setter*/\n\n    }\n</code></pre>\n\n<p>HTML Form(JSP):</p>\n\n<pre><code>    &lt;form:form id = \"addcontactform\" name=\"addcontact\" method=\"POST\" commandName=\"contact\"&gt;\n    &lt;table&gt;\n      &lt;tr&gt;\n       &lt;td&gt;First Name:&lt;/td&gt;\n       &lt;td&gt;&lt;form:input name = \"firstname\" id = \"firstname\" path=\"firstname\" value=''/&gt;&lt;/td&gt;\n       &lt;td&gt;Last Name:&lt;/td&gt;\n       &lt;td&gt;&lt;form:input name = \"lastname\" id = \"lastname\" path=\"lastname\" value=''/&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td&gt;Email:&lt;/td&gt;\n        &lt;td&gt;&lt;form:input name = \"emailid\" id = \"emailid\" path=\"emailid\"/&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td&gt;Phone Type:&lt;/td&gt;\n        &lt;td&gt;\n          &lt;spring:bind path = \"contact.phones[0].phonetype\"&gt;\n            &lt;form:select id =\"phonetype\" name=\"phonetype\" path=\"${status.expression}\"&gt;\n             &lt;option value=\"-- Select Phone Type --\"&gt;-- Select Phone Type --&lt;/option&gt;\n             &lt;option value=\"Home\"&gt;Home&lt;/option&gt;\n             &lt;option value=\"Cell\"&gt;Cell&lt;/option&gt;\n             &lt;option value=\"Work\"&gt;Work&lt;/option&gt;\n            &lt;/form:select&gt;\n        &lt;/spring:bind&gt;\n        &lt;/td&gt;\n        &lt;td&gt;Phone Number:&lt;/td&gt;\n        &lt;td&gt;\n          &lt;spring:bind path = \"contact.phones[0].phonenumber\"&gt;\n            &lt;form:input name = \"phonenumber\" id = \"phonenumber\" path=\"${status.expression}\" value=''/&gt;\n          &lt;/spring:bind&gt;\n        &lt;/td&gt;\n        &lt;td&gt;&lt;form:button type = \"button\" id = \"addphone\"&gt;Add Phone&lt;/form:button&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n       &lt;td&gt;Birthday:&lt;/td&gt;\n       &lt;td&gt;&lt;form:input id = \"birthday\" path=\"birthday\" value=''/&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n\n    &lt;/div&gt;\n      &lt;input type=\"submit\" id = \"mysubmit\" name=\"mysubmit\" value=\"Add Contact\" /&gt;\n    &lt;/div&gt;\n\n    &lt;/form:form&gt;\n</code></pre>\n\n<p>Javascript on the above form:</p>\n\n<p>What I am trying to do here is, when the \"Add Phone\" button is clicked, I send out an AJAX request to the server with the count of the row to be inserted.</p>\n\n<pre><code>    &lt;script type=\"text/javascript\" src=\"${pageContext.request.contextPath}/resources/scripts/jquery.min.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function(){\n\n       $('#addphone').click(function(){ \n       phonecount++;\n       alert('Addinh phone '+phonecount);\n\n       $.get(\"displayaddphone\", {count : phonecount},callback);\n\n       function callback(data){\n             alert('in Callback');\n             $(\"#addphone\").before(data);\n       };\n       return false;\n    });\n    &lt;/script&gt;\n</code></pre>\n\n<p>Controller method called on AJAX request:\nIt adds the row count to the model and returns a jsp - addnewphone.jsp</p>\n\n<pre><code>@RequestMapping(value = \"/displayaddphone\")\npublic String appendaddphone(@RequestParam(value=\"count\") int addphonecount,ModelMap model){\n    model.addAttribute(\"addphonecount\", addphonecount);\n    return \"addnewphone\";\n}\n</code></pre>\n\n<p>addnewphone JSP: This contains the HTML fragment for the new row. </p>\n\n<pre><code>    &lt;%@ taglib uri=\"http://www.springframework.org/tags/form\" prefix=\"form\"%&gt;\n    &lt;%@ taglib uri=\"http://www.springframework.org/tags\" prefix=\"spring\" %&gt;\n\n    &lt;tr&gt;\n       &lt;td&gt;Phone Type:&lt;/td&gt;\n       &lt;td&gt;\n         &lt;form:select id =\"phonetype\" name=\"phonetype\" path=\"contact.phones[${addphnbr}].phonetype\"&gt;\n          &lt;option value=\"-- Select Phone Type --\"&gt;-- Select Phone Type --&lt;/option&gt;\n          &lt;option value=\"Home\"&gt;Home&lt;/option&gt;\n          &lt;option value=\"Cell\"&gt;Cell&lt;/option&gt;\n          &lt;option value=\"Work\"&gt;Work&lt;/option&gt;\n         &lt;/form:select&gt;\n       &lt;/td&gt;\n\n       &lt;td&gt;Phone Number:&lt;/td&gt;\n       &lt;td&gt;\n         &lt;form:input name = \"phonenumber\" id = \"phonenumber\" path=\"contact.phones[${addphnbr}].phonenumber\" value=''/&gt;\n       &lt;/td&gt;\n    &lt;/tr&gt;\n</code></pre>\n\n<p>I am trying to pass this view(contained in the variable 'data') into my AJAX callback function in the above javascript and add it to my original \"Add Contact\" form using - $(\"#addphone\").before(data);</p>\n\n<p>I am getting the following error when I click the \"Add Phone button\":</p>\n\n<pre><code>    SEVERE: Servlet.service() for servlet [appServlet] in context with path    [/ContactList-JPA2] threw exception [java.lang.IllegalStateException: Neither BindingResult  nor plain target object for bean name 'contact' available as request attribute] with root  cause\n    java.lang.IllegalStateException: Neither BindingResult nor plain target object for   bean name 'contact' available as request attribute\nat org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:141)\nat org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(Abs tractDataBoundFormElementTag.java:178)\nat org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)\nat org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)\nat org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:127)\nat org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)\nat org.springframework.web.servlet.tags.form.SelectTag.writeTagContent(SelectTag.java:199)\nat org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)\nat org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)\nat org.apache.jsp.WEB_002dINF.views.addnewphone_jsp._jspx_meth_form_005fselect_005f0(addnewphone_jsp.java:117)\nat org.apache.jsp.WEB_002dINF.views.addnewphone_jsp._jspService(addnewphone_jsp.java:76)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)\nat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)\nat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)\nat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)\nat org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)\nat org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)\nat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\nat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)\nat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)\nat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\nat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)\nat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\nat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\nat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\nat com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:88)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)\nat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\nat java.lang.Thread.run(Thread.java:722)\n</code></pre>\n\n<p>Basically, I am trying to contruct the HTML that I want to add in my main page in a separate jsp and trying to add that to my form dynamically. Is this a correct approach at all for my scenario. Please advice.</p>\n"},{"tags":["spring","servlets","spring-mvc","autowired","applicationcontext"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13206588,"title":"How to get Spring WebContext in class annotated @controller","body":"<p>In Spring MVC with annotation, we mark any POJO with @Controller. \nIn this controller we can get WebApplicationContext, using autowired property.</p>\n\n<pre><code>@Controller\npublic class HomePageController {\n\n@Autowired\nApplicationContext act;\n\n    @RequestMapping(\"/*.html\")\n    public String handleBasic(){\n        SimpleDomain sd = (SimpleDomain)act.getBean(\"sd1\");\n        System.out.println(sd.getFirstProp());\n        return \"hello\";\n}\n</code></pre>\n\n<p>But in this approach we do not have servletContext handy with us. So is there way we can still use older way of getting WebApplicationContext ? i.e.</p>\n\n<pre><code>WebApplicationContextUtils.getRequiredWebApplicationContext(servletContext)\n</code></pre>\n\n<p>How will we get servletContext here ?</p>\n\n<p>I am not facing any compulsion to use old way; so this question is just out of curiosity to check flexibility of spring. \nAlso It can be a interview question. </p>\n"},{"tags":["java","spring","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":13214551,"title":"java.lang.IllegalArgumentException: Property 'transactionManager' is required","body":"<p>I am getting the following error when I deploy a Spring application:</p>\n\n<p>java.lang.IllegalArgumentException: Property 'transactionManager' is required</p>\n\n<p>I am using:\nOS: OSX Mountain Lion\nIDE: Springsource Tools Suite 3.1.0\nSpring: 3.1.2\nHibernate: 4.1.7\nJava: 1.6\nwebserver: vFabric tomcat v2.7</p>\n\n<p>Do I have some missing configuration? Are the libraries in my pom.xml wrong? </p>\n\n<p>deployment log:</p>\n\n<pre><code>Nov 3, 2012 2:32:12 PM org.apache.catalina.core.StandardContext loadOnStartup\nSEVERE: Servlet /basicServer threw load() exception\njava.lang.IllegalArgumentException: Property 'transactionManager' is required\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.afterPropertiesSet(TransactionAspectSupport.java:195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:292)\n    at org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerByCGLIB$$8779d852.transactionInterceptor(&lt;generated&gt;)\n    at org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.transactionAdvisor(ProxyTransactionManagementConfiguration.java:46)\n    at org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerByCGLIB$$8779d852.CGLIB$transactionAdvisor$0(&lt;generated&gt;)\n    at org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerByCGLIB$$8779d852$$FastClassByCGLIB$$4a8a503d.invoke(&lt;generated&gt;)\n    at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)\n    at org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerByCGLIB$$8779d852.transactionAdvisor(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:86)\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:100)\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:86)\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:68)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:359)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1461)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:353)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:748)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:353)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:86)\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:100)\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:86)\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:68)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:359)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1461)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:740)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)\n    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)\n    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)\n    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)\n    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)\n    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)\n    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)\n    at javax.servlet.GenericServlet.init(GenericServlet.java:160)\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)\n    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)\n    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)\n    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:680)\nNov 3, 2012 2:32:12 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory /Users/bruce/springsource/vfabric-tc-server-developer-2.7.2.RELEASE/base-instance/webapps/manager\nNov 3, 2012 2:32:12 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory /Users/bruce/springsource/vfabric-tc-server-developer-2.7.2.RELEASE/base-instance/webapps/ROOT\nNov 3, 2012 2:32:13 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [\"http-bio-8080\"]\nNov 3, 2012 2:32:13 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 8754 ms\n</code></pre>\n\n<p>My Config files (ServicesConfiguration.java  AppConfig.java)\nServicesConfiguration.java:</p>\n\n<pre><code>package com.bsches.basicServer.config;\n\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Properties;\n\nimport javax.sql.DataSource;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.dialect.H2Dialect;\nimport org.hibernate.service.ServiceRegistry;\nimport org.hibernate.service.ServiceRegistryBuilder;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.cache.Cache;\nimport org.springframework.cache.CacheManager;\nimport org.springframework.cache.annotation.EnableCaching;\nimport org.springframework.cache.concurrent.ConcurrentMapCache;\nimport org.springframework.cache.support.SimpleCacheManager;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\nimport org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseBuilder;\nimport org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType;\nimport org.springframework.orm.hibernate4.HibernateTransactionManager;\nimport org.springframework.orm.hibernate4.LocalSessionFactoryBuilder;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\n\nimport com.bsches.basicServer.services.CustomerService;\n\nimport entities.Customer;\n\n@Configuration\n@EnableCaching\n@EnableWebMvc\n@EnableTransactionManagement\npublic class ServicesConfiguration {\n\n    @Value(\"${jdbc.driverClassName}\")\n    private String driverClassName;\n    @Value(\"${jdbc.url}\")\n    private String url;\n    @Value(\"${jdbc.username}\")\n    private String username;\n    @Value(\"${jdbc.password}\")\n    private String password;\n\n    @Value(\"${hibernate.dialect}\")\n    private String hibernateDialect;\n    @Value(\"${hibernate.show_sql}\")\n    private String hibernateShowSql;\n    @Value(\"${hibernate.hbm2ddl.auto}\")\n    private String hibernateHbm2ddlAuto;\n\n    @Bean\n    public CustomerService customerService() throws Exception {\n        return new CustomerService(this.sessionFactory());\n    }\n\n    @Bean\n    public SessionFactory sessionFactory() throws Exception {\n        Properties props = new Properties();\n\n        Map&lt;String, String&gt; p = new HashMap&lt;String, String&gt;();\n        p.put(org.hibernate.cfg.Environment.HBM2DDL_AUTO, hibernateHbm2ddlAuto);\n        p.put(org.hibernate.cfg.Environment.HBM2DDL_IMPORT_FILES,\n                \"import_h2.sql\");\n        p.put(org.hibernate.cfg.Environment.DIALECT, hibernateDialect);\n        p.put(org.hibernate.cfg.Environment.SHOW_SQL, hibernateShowSql);\n        Map&lt;String, String&gt; propsMap = p;\n\n        for (String k : propsMap.keySet())\n            props.setProperty(k, propsMap.get(k));\n\n         org.hibernate.cfg.Configuration configuration = new org.hibernate.cfg.Configuration();\n         configuration.configure();\n         ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(props).buildServiceRegistry();        \n         SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);\n         return sessionFactory;\n\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager() throws Exception {\n        return new HibernateTransactionManager(sessionFactory());\n    }\n\n    @Bean()\n    public DataSource dataSource() {\n        DriverManagerDataSource ds = new DriverManagerDataSource();\n        ds.setDriverClassName(driverClassName);\n        ds.setUrl(url);\n        ds.setUsername(username);\n        ds.setPassword(password);\n        return ds;\n    }\n\n    @Bean\n    public CacheManager cacheManager() throws Exception {\n        SimpleCacheManager scm = new SimpleCacheManager();\n        Cache cache = new ConcurrentMapCache(\"customers\");\n        scm.setCaches(Arrays.asList(cache));\n        return scm;\n    }\n}\n</code></pre>\n\n<p>AppConfig.java:</p>\n\n<pre><code>package com.bsches.basicServer.config;\n\nimport org.springframework.beans.factory.config.PropertyPlaceholderConfigurer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.core.io.ClassPathResource;\n\n@Import({ServicesConfiguration.class})\n@Configuration\npublic class AppConfig {\n    @Bean\n    public static PropertyPlaceholderConfigurer getPropertyPlaceholderConfigurer()\n    {\n        PropertyPlaceholderConfigurer ppc = new PropertyPlaceholderConfigurer();\n        ppc.setLocation(new ClassPathResource(\"application.properties\"));\n        ppc.setIgnoreUnresolvablePlaceholders(true);\n        return ppc;\n    }\n\n}\n</code></pre>\n\n<p>pom.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.bsches&lt;/groupId&gt;\n    &lt;artifactId&gt;basicServer&lt;/artifactId&gt;\n    &lt;name&gt;basicServer&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0.0-BUILD-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;java-version&gt;1.6&lt;/java-version&gt;\n        &lt;org.springframework-version&gt;3.1.0.RELEASE&lt;/org.springframework-version&gt;\n        &lt;org.aspectj-version&gt;1.6.9&lt;/org.aspectj-version&gt;\n        &lt;org.slf4j-version&gt;1.5.10&lt;/org.slf4j-version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;!-- Spring --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;!-- Exclude Commons Logging in favor of SLF4j --&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                 &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- AspectJ --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n            &lt;version&gt;${org.aspectj-version}&lt;/version&gt;\n        &lt;/dependency&gt;   \n\n        &lt;!-- Logging --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.15&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n                    &lt;artifactId&gt;mail&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;javax.jms&lt;/groupId&gt;\n                    &lt;artifactId&gt;jms&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.sun.jdmk&lt;/groupId&gt;\n                    &lt;artifactId&gt;jmxtools&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.sun.jmx&lt;/groupId&gt;\n                    &lt;artifactId&gt;jmxri&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- @Inject --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n            &lt;version&gt;1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Servlet --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Test --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.7&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jpa&lt;/artifactId&gt;\n            &lt;version&gt;2.0.8&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;5.0.0.Alpha1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;cglib&lt;/groupId&gt;\n            &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n            &lt;version&gt;2.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;4.1.7.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.9&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;additionalProjectnatures&gt;\n                        &lt;projectnature&gt;org.springframework.ide.eclipse.core.springnature&lt;/projectnature&gt;\n                    &lt;/additionalProjectnatures&gt;\n                    &lt;additionalBuildcommands&gt;\n                        &lt;buildcommand&gt;org.springframework.ide.eclipse.core.springbuilder&lt;/buildcommand&gt;\n                    &lt;/additionalBuildcommands&gt;\n                    &lt;downloadSources&gt;true&lt;/downloadSources&gt;\n                    &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                    &lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                    &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.2.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;org.test.int1.Main&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":359,"score":0,"question_id":4945967,"title":"Basic Spring 3 configuration for IOC","body":"<p>Can anybody tell me a basic configuration to use String dependency injection? What are the minimum required jars?\nAt the moment I'd like to use only Inversion Of Controll, maybe later I'll integrate ORM.\nThanks</p>\n"},{"tags":["spring","mvc","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":71,"score":3,"question_id":13211021,"title":"Spring security, bypass login page after changing password","body":"<p>I'm relatively new to Java/Spring/MVC. I hope someone can shine some light on this, because this problem is about to ruin yet another weekend without getting solved.</p>\n\n<p>At the moment I'm working on a project, implementing a couple of RFC's. Each RFC has it's own 'challenges', ranging from changing hibernate queries and stored procedures to minor textual changes and adding extra fields to forms.</p>\n\n<p>The problem I am now facing has (I think) to do with Spring security.</p>\n\n<p>The present situation:<br>\nTo login to the application, user is presented by a login page (/user/login.jsp). After entering a username and password, user is sent to welcome page (/welcome/hello.jsp).</p>\n\n<p>If a user forgets their password, they use a link that will sent an email providing a link to a page (/welcome/newPassword?code=xxx) where a new password can be entered. Entering the Submit-button will do some validation, save the password in the database and displays a 'password changed' message on the page.\nTo enter the application, user will now have to login with the new password.</p>\n\n<p>What the customer wants:\nAfter submitting the new password, the user should be automatically logged in with the new password and redirected to /welcome/hello.jsp</p>\n\n<p>I searched the web, but couldn't find the scenario I was looking for (or maybe didn't recognize it!).</p>\n\n<p>What I thought would do the trick:</p>\n\n<p>I have this method in WelcomeController which presently handles the new password:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.POST)\npublic void newPassword(Model model, HttpSession httpSession, ModelAttribute(PASSWORD) Passwords password, BindingResult result) {\n    logger.debug(\"Posting password for new password\");\n    ScreenMessage message = null;\n\n    //\n    try {\n        // errors from initBinder - back to page\n        if (result.hasErrors()) {\n            return;\n        }\n\n        // Validate input: on error go back to form\n        passwordValidator.validate(password, result);\n        if (result.hasErrors()) {\n            return;\n        }\n\n        // Save password\n        passwordService.createNewOwnPassword(result, password);\n        if (result.hasErrors()) {\n            return;\n        }\n\n        // No errors\n        message = new ScreenMessage();\n        message.setText(CHANGED);\n        message.setArg(THIS_PASSWORD, 0);\n        model.addAttribute(MESSAGE, message);\n        httpSession.setAttribute(ACTION_READ, Boolean.TRUE);\n\n        // Errors are fatal.\n    } catch (Exception e) {\n        logger.error(\"ERROR-CHANGE-password for user: \" + password.getUser().getLoginName(), e);\n        result.reject(  ERROR_FATAL, new Object[] { password}, ERROR_FATAL);\n    } finally {\n        model.addAttribute(PASSWORD, password);\n    }\n}\n</code></pre>\n\n<p>I thought I could simply change this method to have it return a ModelAndView and use redirect:</p>\n\n<pre><code>ModelAndView mav = new ModelAndView(\"redirect:/welcome/hello\", (ModelMap) model);\n        return mav; \n</code></pre>\n\n<p>But: It keeps sending me to /user/login, exactly the page I don't want to go to...</p>\n\n<p>Extra information that could be handy:</p>\n\n<p>As far as I can tell the application is using Spring 2.5.</p>\n\n<p>(I hope relevant) Part of my security-applicationContext.xml:</p>\n\n<pre><code>    &lt;!--  always-use-default-target=\"true\" --&gt;\n    &lt;security:form-login login-page=\"/dyn/user/login\" \n        login-processing-url=\"/dyn/user/j_spring_security_check\"\n        default-target-url=\"/dyn/welcome/hello\" \n        always-use-default-target=\"true\"\n        authentication-failure-handler-ref=\"exceptionTranslationRouting\" /&gt;\n\n    &lt;security:access-denied-handler error-page=\"/dyn/welcome/hello\" /&gt;\n\n    &lt;security:logout logout-success-url=\"/dyn/user/logout\" invalidate-session=\"true\" /&gt;\n</code></pre>\n\n<p>Is my idea of redirecting to /welcome/hello too simple or am I just missing something small? </p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13213061,"title":"SpringMVC RequestMapping for GET parameters","body":"<p>How to make the RequestMapping to handle GET parameters in the url?\nFor example i have this url</p>\n\n<pre><code>http://localhost:8080/userGrid?_search=false&amp;nd=1351972571018&amp;rows=10&amp;page=1&amp;sidx=id&amp;sord=desc\n</code></pre>\n\n<p>(from jqGrid)</p>\n\n<p>how should my RequestMapping look like? I want to get the parameters using HttpReqest</p>\n\n<p>Tried this:</p>\n\n<pre><code>@RequestMapping(\"/userGrid\")\n    public @ResponseBody GridModel getUsersForGrid(HttpServletRequest request)\n</code></pre>\n\n<p>but it doesn't work.</p>\n"},{"tags":["xml","spring","rest","validator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13211577,"title":"Spring REST MVC: validation of incoming XML (without using form)","body":"<p>I have a controller that receives as @RequestBody a string containing a request XML.</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.POST, value=\"/app-authorization\")\npublic Response getAppAuthorization(\n        HttpServletResponse response, BindingResult results,\n        @RequestBody String body){\n    log.info(\"Requested app-authorization through xml: \\n\" + body);\n\n    Source source = new StreamSource(new StringReader(body));\n    RefreshTokenRequest req = (RefreshTokenRequest) jaxb2Mashaller.unmarshal(source);\n\n    validator.validate(req, results);\n    if(results.hasErrors()){\n        log.info(\"DOESN'T WORK!\");\n        response.setStatus(500);\n        return null;\n    }\n    InternalMessage&lt;Integer, Response&gt; auth = authService.getRefreshToken(req);\n    response.setStatus(auth.getHttpStatus());\n    return auth.getReponse();\n}\n</code></pre>\n\n<p>The AuthorizationValidator is the following:</p>\n\n<pre><code>@Component(\"authenticationValidator\")\npublic class AuthenticationValidator implements Validator{\n\n    public boolean supports(Class&lt;?&gt; clazz) {\n        return AuthorizationRequest.class.isAssignableFrom(clazz);\n    }\n\n    public void validate(Object target, Errors errors) {\n        errors.rejectValue(\"test\", \"there are some errors\");\n\n    }\n}\n</code></pre>\n\n<p>I'd like to know if there's a way to inject an object Validator into my controller in such a way that:</p>\n\n<ol>\n<li>@Autowired \\n Validator validator; makes me obtain automatically a reference to my AuthenticationValidator</li>\n<li>every controller is linked to one or more validators withouth indicating their class explicitly.</li>\n</ol>\n"},{"tags":["java","spring","java-ee","spring-data"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13210698,"title":"Does Spring Data Pageagle take page number or query offset?","body":"<p>I'm using <code>spring-data jpa 1.1.0.M1</code> now we were using a much higher version and run into issues with <code>spring-data-mongodb</code> due to <code>spring-data-commons</code>. because of that we've used entity manager in our service for certain query including queries with <code>offset</code> and <code>limit</code>.  </p>\n\n<p>Now that we've downgraded and everything seems to be fine we would like to maintain everything under repository level when it comes to <code>data access</code> and do much on Business Logic in the Services.  </p>\n\n<p>From this <a href=\"http://static.springsource.org/spring-data/data-jpa/docs/1.1.2.RELEASE/reference/html/#repositories.special-parameters\" rel=\"nofollow\">documentation</a> i understand that <code>pageable interface</code> is what i need. But the implementation class <a href=\"http://static.springsource.org/spring-data/data-commons/docs/1.1.0.M1/api/\" rel=\"nofollow\">PageRequest</a> takes <code>page</code> argument. would that mean that my <code>offset</code> becomes the following?</p>\n\n<pre><code>offset = page* limit; =&gt; page = offset/limit; \n</code></pre>\n\n<p>Am I getting it right?\nthanks for reading this.</p>\n"},{"tags":["spring","autowired"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":113,"score":0,"question_id":12902664,"title":"Injection of resource dependencies failed in Spring 3.1","body":"<p>Appreciate any help on Injecting dependencies error. Same thing perfectly works when bean in standalone. During apache 6.0.35 startup, it throws following. Appreciate any help and thanks in advance. I am using Spring 3.1.1</p>\n\n<pre><code>**SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'appConfigBean': Injection of resource dependencies failed; nested exception is \norg.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ExtConfigBean' is defined**\n</code></pre>\n\n<p>Complete Code and Configuration are given below</p>\n\n<p>Java Code</p>\n\n<pre><code>    @Configuration\n@PropertySource(\"classpath:application.properties\")\n@Component\n@Service\npublic class AppConfig implements ApplicationConstants, ApplicationContextAware {\n\n    @Autowired\n    private ApplicationContext applicationContext;\n\n    /**\n     * Main Map Bean\n     */\n    @Resource(name = \"ExtConfigBean\")\n    private LinkedHashMap&lt;String, String&gt; extConfigBeanMap;\n\n        @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        System.out.println(\"Autowiring Context Ref: \" + applicationContext);\n        this.applicationContext = applicationContext;\n    }\n}\n</code></pre>\n\n<p>application.properties</p>\n\n<pre><code>application=ApplicationTest\nversion=1.0.0\nrelease=July 2012\n</code></pre>\n\n<p>ApplicationContext File is</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:util=\"http://www.springframework.org/schema/util\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xmlns:lang=\"http://www.springframework.org/schema/lang\" xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xmlns:beans=\"http://www.springframework.org/schema/beans\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n       http://www.springframework.org/schema/util \n       http://www.springframework.org/schema/util/spring-util-2.0.xsd\n       http://www.springframework.org/schema/tx \n       http://www.springframework.org/schema/tx/spring-tx-2.0.xsd\n       http://www.springframework.org/schema/aop \n       http://www.springframework.org/schema/aop/spring-aop-2.0.xsd\n       http://www.springframework.org/schema/lang \n       http://www.springframework.org/schema/lang/spring-lang-2.0.xsd\n       http://www.springframework.org/schema/context\n       http://www.springframework.org/schema/context/spring-context-3.1.xsd\n       http://www.springframework.org/schema/oxm\n       http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd\n       http://www.springframework.org/schema/mvc \n       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\"&gt;\n\n    &lt;!-- Configures the @Controller programming model --&gt;\n    &lt;mvc:annotation-driven /&gt;\n\n    &lt;!-- Activates scanning of @Autowired --&gt;\n    &lt;context:annotation-config /&gt;\n    &lt;!-- &lt;bean class=\"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor\" /&gt; --&gt;\n\n    &lt;!-- Activates scanning of @Repository and @Service --&gt;\n    &lt;context:component-scan\n        base-package=\"com.app.test \"&gt;\n    &lt;/context:component-scan&gt;\n\n    &lt;!-- Application wide Spring Injection --&gt;\n    &lt;bean id=\"contextProvider\" class=\"com.app.test.AppContextProvider\" lazy-init=\"false\" /&gt;\n\n    &lt;bean id=\"appConfigBean\" class=\"com.app.test.config.AppConfig\" lazy-init=\"false\" /&gt;\n\n\n        &lt;!-- Application Configuration --&gt;\n    &lt;bean id=\"ExtConfigBean\" class=\"org.springframework.beans.factory.config.MapFactoryBean\"&gt;\n        &lt;property name=\"sourceMap\"&gt;\n            &lt;map&gt;\n                &lt;entry key=\"some_key\"&gt;\n                    &lt;value&gt;Some Key Value&lt;/value&gt;\n                &lt;/entry&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>web.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n</code></pre>\n\n<p>http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"></p>\n\n<pre><code>&lt;!-- Java-based Spring container definition --&gt;\n&lt;context-param&gt;\n    &lt;param-name&gt;contextClass&lt;/param-name&gt;\n    &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;!-- Location of Java @Configuration classes that configure the components \n    that makeup this application --&gt;\n&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;com.xxx.ealert.app.config&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;!-- Creates the Spring Container shared by all Servlets and Filters --&gt;\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;!-- Processes application requests --&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;Spring MVC Dispatcher Servlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;Spring MVC Dispatcher Servlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n\n&lt;!-- Secures the application --&gt;\n&lt;filter&gt;\n    &lt;filter-name&gt;securityFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;targetBeanName&lt;/param-name&gt;\n        &lt;param-value&gt;springSecurityFilterChain&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;securityFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n\n&lt;!-- Reads request input using UTF-8 encoding --&gt;\n&lt;filter&gt;\n    &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;encoding&lt;/param-name&gt;\n        &lt;param-value&gt;UTF-8&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","multithreading","spring","amazon-ec2"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13211937,"title":"Blocked threads in getBeanFactory","body":"<p>I have a high throughput server, running with spring IOC (2.5.6) on Amazon EC2 (Virginia). In the past few days I didn't do any changed in the code (only some configuration changes), but suddenly I started seeing crazy locking issue with spring. The application seem to spend 60%-80% of it's time trying to get beans (different beans, from different areas of the code), and a thread dump shows most threads are stuck in the following manner:</p>\n\n<pre><code>Thread 15148: (state = BLOCKED)\n - org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory() @bci=6, line=151 (Compiled frame)\n - org.springframework.context.support.AbstractApplicationContext.getBean(java.lang.String) @bci=1, line=880 (Compiled frame)\n</code></pre>\n\n<p>Our application is very IO intensive, so I expect to see most of the time spent on database connections and HTTP client access. \nI'm not sure which additional information I can provide here.</p>\n\n<p>Anyone seen something of that sort?</p>\n"},{"tags":["spring","grails","dependency-injection","inversion-of-control"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13210919,"title":"Spring dependency injection not completing in time","body":"<p>All,</p>\n\n<p>I'm setting up a Spring IOC container using dependency injection, etc.  I'm running into a very bizarre behavior where it seems that some beans in a collection get fully initialized before use while others don't.  The weird part is that all of these beans share the same superclass and the failed dependency injection is happening in one of the superclass dependencies.  Here is the example:</p>\n\n<pre><code>@Component\nclass Bar {\n  void doSomething() {\n  // do something\n  }\n}\n\nclass Foo {\n  @Autowired Bar bar\n}\n\n@Component\nclass FooSubclass1 extends Foo {\n}\n\n@Component\nclass FooSubclass2 extends Foo {\n}\n\n@Component\nclass FooManager implements InitializingBean {\n  @Autowried Collection&lt;Foo&gt; myFoos\n\n  void afterPropertiesSet() {\n    for (Foo foo : myFoo) {\n      foo.bar.doSomething()\n    }\n  }\n}\n</code></pre>\n\n<p>During startup the above code would successfully 'doSomething' when iterating over the instance of FooSubclass1 but throw a null point when iterating over the instance of FooSubclass2 when trying to access bar.doSomething() as bar is null.  </p>\n\n<p>Of note is that if I don't use InitializingBean as a startup marker I don't run into this problem.  If I simply wait for the application to load and then iterate over the collection of Foos all is well.  So there appears to be some sort of issue with timing -- the instance of FooSubclass2 has bean created and added to the context but has not bean fully injected.</p>\n\n<p>My understanding of spring is that a given object should be fully created/injected before it is added to the context and that AfterPropertiesSet should only be run after all dependencies have been satisfied.  As such I'm not really sure where to start debugging this issue.</p>\n\n<p>A few notes: I'm running this on a Groovy+Grails setup though I don't think that's related to the issue.  It's all core spring under the covers and this is clearly something that is happening at the spring level.  Also the example above is a bit dumbed down from my real example.  I am injecting a collection of a few dozen DAO type objects into the Autowired collection.  The injection makes it through several of the DAOs successfully but always fails on the same one.  If I remove that DAO from the list it fails on the next one in the list.  </p>\n"},{"tags":["java","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13211292,"title":"What are the objectives for IKM Spring Framework test?","body":"<p>I am registered to take 2 IKM tests, JAVA 6 PROGRAMMING (JAVA SE 6) and JAVA/SPRING FRAMEWORK.</p>\n\n<p>I've found some information about Java SE test and supposedly the objectives are more or less similar with SCJP objectives: </p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/3866305/are-ikm-java-tests-more-complex-than-sun-certification-exams\">Are IKM Java tests more complex than Sun certification exams?</a> </li>\n<li><a href=\"http://javaikm.blogspot.com/\" rel=\"nofollow\">IKM Java SE mock questions</a></li>\n</ul>\n\n<p>but unfortunately I cannot find any information about IKM Spring Framework test and even google is helpless.</p>\n\n<p>Have any of you taken IKM Spring Framework test? What can I expect from this? What are the objectives? Help appreciated.</p>\n"},{"tags":["spring","aop","aspectj","spring-transactions","load-time-weaving"],"answer_count":1,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":103,"score":5,"question_id":13162582,"title":"How to configure AspectJ with Load Time Weaving without Interface","body":"<p>On my project, I currently use AspectJ (not just Spring AOP due to some limitation) with the weaving at the Compile Time. In order to speed up the development on Eclipse, I want to do the weaving at the Load Time. I succeed to do that but with one major constraint: using an interface for my service that contained some transactional methods. <strong>If I declare the service with its implementation instead of its interface, in the caller class, there is no weaving and so no transaction supported.</strong></p>\n\n<p>So <strong>if it is supported by AspectJ, how to configure AspectJ with Load Time Weaving without Interface ?</strong></p>\n\n<p>I created a little project that reproduce the issue:</p>\n\n<p>The following test fail.</p>\n\n<p>The following test succeed if :</p>\n\n<ul>\n<li><p>the injected service is declared with its interface instead of its implementation (i.e. replace \"@Inject MyServiceImpl service\" by \"@Inject MyService service\"), the test succeed.</p></li>\n<li><p>the weaving is executed during the compilation (the configuration, POM &amp; Spring application context, is obviously different in this case). But my goal is to do the weaving at the Load-Time to avoid a weaving phase every time I save a Java file.</p></li>\n<li><p>Spring AOP (tx:annotation-driven mode=\"proxy\"), that is a proxy-based solution, is used instead of AspectJ. But in this case, we encountered the self-invocation issue, i.e. a method within the target object calling some other method of the target object, won’t lead to an actual transaction at runtime even if the invoked method is marked with @Transactional.</p></li>\n</ul>\n\n<p>aspectj-ltw/src/test/java/mycompany/aspectj_ltw/MyServiceImplTest.java</p>\n\n<pre><code>package mycompany.aspectj_ltw;\n\nimport static junit.framework.Assert.assertTrue;\n\nimport javax.inject.Inject;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"classpath:/META-INF/spring/applicationContext.xml\" })\npublic class MyServiceImplTest {\n\n    @Inject\n    MyServiceImpl service;\n\n    @Test\n    public void shouldBeExecutedInTransaction() {\n        assertTrue(this.service.isExecutedInTransaction());\n    }\n}\n</code></pre>\n\n<p>aspectj-ltw/src/main/java/mycompany/aspectj_ltw/MyService.java</p>\n\n<pre><code>package mycompany.aspectj_ltw;\n\npublic interface MyService {\n\n    boolean isExecutedInTransaction();\n\n}\n</code></pre>\n\n<p>aspectj-ltw/src/main/java/mycompany/aspectj_ltw/MyServiceImpl.java</p>\n\n<pre><code>package mycompany.aspectj_ltw;\n\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.transaction.support.TransactionSynchronizationManager;\n\n@Service\npublic class MyServiceImpl implements MyService {\n\n    @Transactional\n    public boolean isExecutedInTransaction() {\n        return TransactionSynchronizationManager.isActualTransactionActive();\n    }\n\n}\n</code></pre>\n\n<p>aspectj-ltw/src/test/resources/META-INF/applicationContext.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\" xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd   http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"mycompany.aspectj_ltw\" /&gt;\n\n    &lt;context:load-time-weaver aspectj-weaving=\"on\" /&gt;\n    &lt;aop:config proxy-target-class=\"true\"/&gt;\n    &lt;aop:aspectj-autoproxy proxy-target-class=\"true\"/&gt;\n    &lt;tx:annotation-driven mode=\"aspectj\"\n        transaction-manager=\"transactionManager\" proxy-target-class=\"true\" /&gt;\n\n    &lt;bean class=\"org.apache.commons.dbcp.BasicDataSource\"\n        destroy-method=\"close\" id=\"dataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"org.h2.Driver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:h2:mem:mydb\" /&gt;\n        &lt;property name=\"username\" value=\"sa\" /&gt;\n        &lt;property name=\"password\" value=\"\" /&gt;\n    &lt;/bean&gt;\n    &lt;bean class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"\n        id=\"transactionManager\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>aspectj-ltw/src/test/resources/META-INF/aop.xml</p>\n\n<pre><code>&lt;!DOCTYPE aspectj PUBLIC\n        \"-//AspectJ//DTD//EN\" \"http://www.eclipse.org/aspectj/dtd/aspectj.dtd\"&gt;\n&lt;aspectj&gt;\n  &lt;weaver options=\"-showWeaveInfo -debug -verbose -XmessageHandlerClass:org.springframework.aop.aspectj.AspectJWeaverMessageHandler\"&gt;\n        &lt;include within=\"mycompany.aspectj_ltw..*\"/&gt;\n  &lt;/weaver&gt;\n&lt;/aspectj&gt;\n</code></pre>\n\n<p>aspectj-ltw\\pom.xml</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;mycompany&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectj-ltw&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;aspectj-ltw&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;spring.version&gt;3.0.5.RELEASE&lt;/spring.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.8.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n            &lt;version&gt;1.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n            &lt;version&gt;1.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n            &lt;version&gt;1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;cglib&lt;/groupId&gt;\n            &lt;artifactId&gt;cglib-nodep&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;1.2.143&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\n            &lt;version&gt;0.9.24&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;version&gt;0.9.24&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\n            &lt;version&gt;1.6.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;forkMode&gt;always&lt;/forkMode&gt;\n                    &lt;argLine&gt;\n                        -javaagent:C:/maven-2_local_repo/org/springframework/spring-instrument/3.0.5.RELEASE/spring-instrument-3.0.5.RELEASE.jar\n                    &lt;/argLine&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>VM arguments to run the test:</p>\n\n<pre><code>-javaagent:C:/maven-2_local_repo/org/springframework/spring-instrument/3.0.5.RELEASE/spring-instrument-3.0.5.RELEASE.jar\n</code></pre>\n"},{"tags":["java","spring","spring-aop"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12330020,"title":"Spring AOP for database operation","body":"<p>I am working in a spring,hibernate project and database is oracle. I have DAO layer for persistence related operations.</p>\n\n<p>In all my tables, I have <code>create_date</code> and <code>update_date</code> columns representing the timestamp when a row is inserted and updated in the tables respectively.  </p>\n\n<p>There is a requirement that I have to update the above two mentioned timestamp columns of that particular table for which the request is meant to whenever any insert/update operation happens.For example, If my DAO layer has two methods, say m1 and m2 responsible for impacting t1 and t2 tables respectively. Now, if m1 method is invoked, then timestamp columns of t1 table will be updatedi.e. For insert, <code>create_date</code> column will be updated and for any update <code>update_date</code> column will be updated.  </p>\n\n<p>I have idea of Spring AOP so I was thinking to use AOP to implement the above requirement, though, i am not quite sure if it can be achieved using AOP.</p>\n\n<p>Please let me know if I can use AOP to fulfill this requirement. And if it is possible, then please provide me the inputs how to implement it.</p>\n"},{"tags":["java","spring","internationalization"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13209496,"title":"Spring MVC internatialization","body":"<p>I'm trying to use internatialization in my spring mvc application. \nBut I can't get how to use it for inputs.\nI want to do smth like this:</p>\n\n<pre><code>&lt;input id=\"actionButton\" type=\"submit\" value='&lt;spring:message code=\"LogIn\"/&gt;'/&gt;\n</code></pre>\n\n<p>But the button than has label 'spring:message code=\"LogIn\"', not the value of this constant from .properties file. How can I do this?</p>\n"},{"tags":["spring","hibernate","activemq","apache-camel","spring-transactions"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13209406,"title":"Apache Camel Shared Transaction Resource","body":"<p>I have a Spring-Camel app backed with a Mysql+Hibernate on a Tomcat. I'm trying to implement a <a href=\"http://camel.apache.org/transactional-client.html\" rel=\"nofollow\">transacted route</a> that consumes from embedded ActiveMQ queue, makes some db based duplicate check and produces to another embedded ActiveMQ queue.</p>\n\n<p>To provide transactionality I'm using <a href=\"http://www.javaworld.com/javaworld/jw-01-2009/jw-01-spring-transactions.html?page=4\" rel=\"nofollow\">Shared Transaction Resource pattern</a>. Both Hibernate sessionFactory and ActiveMQ BrokerService JDBCPersistenceAdapter use the same datasource.</p>\n\n<p>Camel endpoints use HibernateTransactionManager(PROPAGATION_REQUIRES_NEW). It seems to be working but I want to clarify if this is a bulletproof approach in case of system crash, failure,</p>\n\n<p>Do I need to migrate to jta, 2PC?</p>\n"},{"tags":["java","spring","http","jsp","servlets"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13208696,"title":"http get from jsp and resolve status code","body":"<p>I need to send http request to certain URL via jsp (by clicking on a link / button). Depending on the http response status code I need to generate corresponding output in the jsp (200 - action OK, 404 - unknown action etc, the content of the URL is irrelevant). Is there any way to achieve this behaviour?</p>\n\n<p>I am using Spring.</p>\n"},{"tags":["java","spring","spring-el"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":51,"score":4,"question_id":13199879,"title":"Spring expression in xml configuration file","body":"<p>It is useful to have different property sets for different users. </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xmlns:context=\"http://www.springframework.org/schema/context\"\n   xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n            http://www.springframework.org/schema/context\n            http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n    &lt;context:property-placeholder\n        location=\"classpath:/path/to/package/default.properties,\n        classpath:/path/to/package/#{ systemProperties['user.name'] }.properties\"/&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>When executing the application, spring does not recognize the expression. The context does not start and spring says: <code>class path resource [path/to/package/#{ systemProperties['user.name'] }.properties] cannot be opened</code> </p>\n\n<p>When I replace the expression manually with a string resulting in a valid resource then the behaviour is as expected. The <a href=\"http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html#expressions-beandef\" rel=\"nofollow\">manual states</a> it should work. </p>\n\n<p>The spring-context and spring-core (3.1.2-RELEASE) are in classpath.</p>\n\n<ul>\n<li>How come spring does not pick up the environment variable?</li>\n<li>I'm open to alternate solutions solving the same functional problem.</li>\n</ul>\n"},{"tags":["java","spring","hibernate","persistence","jax-rs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":23,"score":0,"question_id":13096250,"title":"JAX-RS + jersy persistence","body":"<p>I am creating a Rest Server using JAX-RS (Jersy) + Spring. My DB layer is MySQL.</p>\n\n<p>What would be the best way to store my data in my DB? Is there any alternative to Hibernate? I have never worked in Hibernate but there seems to be a lot of XML files and configuration. </p>\n\n<p>It would be easier to use Grails or ROR instead. Can anyone point me out a better solution to persist my data in the project? </p>\n"},{"tags":["java","spring","tomcat","transactions","jotm"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":254,"score":1,"question_id":7724033,"title":"Using JOTM transaction manager Doesn't works on Tomcat","body":"<p>Facing a strange problem here, below is the configuration i am using:\n1. Apache Tomcat 6.0.26\n2. mySql\n3. Spring framework+ Hibernate</p>\n\n<p>We have used JOTM for transaction management </p>\n\n<pre><code>&lt;bean id=\"jotm\"\n      class=\"org.springframework.transaction.jta.JotmFactoryBean\" /&gt;\n&lt;bean id=\"transactionManager\"\n      class=\"org.springframework.transaction.jta.JtaTransactionManager\"&gt;\n    &lt; property name=\"userTransaction\" ref=\"jotm\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The problem is that i have one service which creates and entity on my local DB and then calls a web service on failiure of which the created entity in local DB should be rolled back. On failure of the web service call i am throwing RunTimeException which should ideally rollback the transaction as per mentioned in the spring configuration file. However this is not happening. Instead of JOTM if i am using Hibernate transaction manager it is rolling back the transaction. Can someone please throw some light on if i am  missing out on anything while implementing through JOTM.</p>\n\n<p>Appreciate the help in advance,</p>\n\n<p>Vaibhav</p>\n"},{"tags":["multithreading","spring","asynchronous","thread-synchronization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13206792,"title":"Spring @Async limit number of threads","body":"<p>My question is very similar to this one : <a href=\"http://stackoverflow.com/questions/4324212/async-prevent-a-thread-to-continue-until-other-thread-have-finished\">@Async prevent a thread to continue until other thread have finished</a></p>\n\n<p>Basically i need run ~ hundreds of computations in more threads. I want to run only some amount of parallel threads e.g. 5 threads with 5 computationis in paralell.</p>\n\n<p>I am using spring framework and @Async option is natural choice. I do not need full-featured JMS queue, that`s a bit overhead for me.</p>\n\n<p>Any ideas ?\nThank you</p>\n"},{"tags":["spring","caching","configuration"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13206823,"title":"Access properties files included in non-spring maven module from a spring maven module","body":"<p>We're adding one cache module implementing Spring Cache Framework to our codebase, which will be included as one of dependencies in our applications to utilize caching.</p>\n\n<p>We'd like to have application specific settings for cache configurations, such as using different caching mechanisms, or different caching parameters, like expiry. In the mean time, we'd also like to keep the Spring dependency just in the cache module, so other applications just need to declare cache module as one of dependencies, and start using caching. </p>\n\n<p>So my question is:\nIf, say, our webapp module uses the cache module, can the cache module read the properties file that specifies webapp application specific cache settings included in webapp class path (using either PropertyPlaceholderConfigurer or PropertyOverrideConfigurer) at run time to configure the caching accordingly? (webapp is NOT a spring applications, cache module will be a jar included in the webapp war file).</p>\n"},{"tags":["java","spring","hibernate","multi-tenant"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13204558,"title":"Abstract class varible with spring","body":"<p>I am using spring and Hibernate and Dao design pattern for the my project, In my <code>GenericDaoImpl</code>(Abstract class) class has \"tenentId\", I want to set the \"tenentId\" when use login to the System. My other DaoImpl classes extends from <code>GenericDaoImpl</code>, so I need to set the tenentId(It's define in <code>GenericDaoImpl</code>) user login time and reset the \"tenentId\" when user log out.</p>\n\n<p>What is the best way to do this?</p>\n\n<p>In my test cases I tried @Autowired the \"GenericDaoImpl\" but I couldn't do that, It throws an exception telling, <code>org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type</code>. I know the problem now,</p>\n\n<p>(We can't create instance of abstract classes,if use tenantId as static variable, is it going to be a problem?)\nCan any one suggest me any solution?</p>\n\n<p>Thank you,\nUdeshika  </p>\n"},{"tags":["spring","hibernate","testng"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13206153,"title":"How to prevent test from cleaning up db before each test in TestNG?","body":"<p>I have a test like this:</p>\n\n<pre><code> @RunWith(SpringJUnit4ClassRunner.class),\n @ContextConfiguration(locations = { \"file:war/WEB-INF/application-context.xml\" })\n @Transactional\n public class ServiceImplTest extends AbstractTestNGSpringContextTests\n {\n     @Autowired\n     private Service service;\n\n     @Test\n     @Rollback(false)\n     public void testCreate()\n     {\n         .....\n         //save an entity to table_A\n         service.save(a);\n     }\n }\n</code></pre>\n\n<p>It seems that the table_A will be cleaned up before each test running(not roolback after test ran),because after each test,all old data entries in the table are cleaned up,only new inserted entry by test is left.How to prevent this \"cleaning\" action?</p>\n"},{"tags":["java","spring","hibernate","junit"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13198968,"title":"Failed to load ApplicationContext: No persistence exception translators found in bean factory","body":"<p>I have an abstract test case created for testing my Spring MVC controllers:</p>\n\n<pre><code>@SuppressWarnings(\"unused\")\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration({\"classpath:META-INF/spring/applicationContext.xml\",\n                        \"classpath:META-INF/spring/applicationContext-jpa.xml\",\n                        \"file:src/main/webapp/WEB-INF/spring/webmvc-config-test.xml\"}) \n@PersistenceContext(name = \"persistenceUnit\")\npublic class TestableControllerTest {\n\n    @Autowired\n    ApplicationContext applicationContext;\n\n    private MockHttpServletRequest request;\n    private MockHttpServletResponse response;   \n    private RequestMappingHandlerAdapter handlerAdapter;\n\n    @Before\n    public void setUp() {\n        request = new MockHttpServletRequest();\n        response = new MockHttpServletResponse();\n\n        handlerAdapter = applicationContext.getBean(RequestMappingHandlerAdapter.class);\n    }\n\n    @Test\n    public void testMethod() {\n\n    }\n\n    private Object getHandler(MockHttpServletRequest request) throws Exception {\n        HandlerExecutionChain chain = null;  \n\n        Map&lt;String, HandlerMapping&gt; map = applicationContext.getBeansOfType(HandlerMapping.class);  \n        Iterator&lt;HandlerMapping&gt; itt = map.values().iterator();  \n\n        while (itt.hasNext()) {  \n            HandlerMapping mapping = itt.next();  \n            chain = mapping.getHandler(request);  \n            if (chain != null) {  \n                break;  \n            }   \n        }  \n\n        if (chain == null) {  \n            throw new InvalidParameterException(\"Unable to find handler for request URI: \" + request.getRequestURI());  \n        }  \n\n        return chain.getHandler();      \n    }\n\n}\n</code></pre>\n\n<p>Running <strong>mvn clean surefire-report:report</strong></p>\n\n<p>Results in:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)\n    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)\n    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:728)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)\n    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)\n    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)\n    ... 30 more\nCaused by: java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:142)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.&lt;init&gt;(PersistenceExceptionTranslationInterceptor.java:79)\n    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.&lt;init&gt;(PersistenceExceptionTranslationAdvisor.java:70)\n    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    ... 42 more\n</code></pre>\n\n<p>Which is odd because not only does my persistence.xml configure a JPA dialect:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" version=\"2.0\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n&lt;persistence-unit name=\"persistenceUnit\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.MySQL5InnoDBDialect\"/&gt;\n            &lt;!-- value=\"create\" to build a new database on each run; value=\"update\" to modify an existing database; value=\"create-drop\" means the same as \"create\" but also drops tables when Hibernate closes; value=\"validate\" makes no changes to the database --&gt;\n            &lt;property name=\"hibernate.hbm2ddl.auto\" value=\"create\"/&gt;\n            &lt;property name=\"hibernate.ejb.naming_strategy\" value=\"org.hibernate.cfg.ImprovedNamingStrategy\"/&gt;\n            &lt;property name=\"hibernate.connection.charSet\" value=\"UTF-8\"/&gt;\n            &lt;!-- Uncomment the following two properties for JBoss only --&gt;\n            &lt;!-- property name=\"hibernate.validator.apply_to_ddl\" value=\"false\" /--&gt;\n            &lt;!-- property name=\"hibernate.validator.autoregister_listeners\" value=\"false\" /--&gt;\n            &lt;property name=\"hibernate.hbm2ddl.import_files\" value=\"dynamic.sql, static.sql\"/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>But I've also explicitly registered an exception translator in applicationContext-jpa.xml</p>\n\n<pre><code>&lt;bean class=\"org.springframework.orm.hibernate4.HibernateExceptionTranslator\"/&gt;\n</code></pre>\n\n<p>I can't for the life of me work out why the bean factory doesn't offer this instance. Any ideas or suggestions appreciated.</p>\n"},{"tags":["java","spring","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13200307,"title":"Conditional Spring Security","body":"<p>I want to have spring security that should be configurable through a boolean flag- switch on/off kind of functionality.</p>\n\n<p>For example,</p>\n\n<pre><code>&lt;bean class=\"org.springframework.ws.server...\"&gt;\n&lt;property name=\"interceptors\"&gt;\n&lt;list&gt;\n----&gt; Here I would like an if condition test based on external property i.e. if true, register the interceptor, else do nothing\n   &lt;ref local=\"wsSecurityInterceptor\"&gt;\n--&gt; other interceptors like logging etc.\n&lt;/list&gt;\n&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Is this possible in config.xml? Thanks a lot.</p>\n"},{"tags":["spring","spring-webflow-2"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13204393,"title":"spring webflow variable serialization","body":"<p>I have flow that serves processing for three different entities. Thus I have parent flow definition with common flow states and in concrete flow definition I extend that flow with real data and action implementation.</p>\n\n<p>I want to store bean instance which processes entity in variable, so I can access this variable in parent flow definition.</p>\n\n<p>In parent flow defintion</p>\n\n<pre><code>&lt;action-state id=\"prepareReview\" &gt;\n    &lt;evaluate expression=\"processor.prepare(modelInstance)\" /&gt;\n    &lt;transition to=\"check\" /&gt;\n&lt;/action-state&gt;\n</code></pre>\n\n<p>and in concrete flow definition I have</p>\n\n<pre><code>&lt;on-start&gt;\n    &lt;set name=\"flowScope.processor\" value=\"concreteProcessor\"/&gt;\n&lt;/on-start&gt;\n</code></pre>\n\n<p>Where <code>concreteProcessor</code> is a singleton bean that implements necessary processing. It is stateless so it is useless to serialize it, moreover it contains autowired dao variables which implementation use HibernateDaoSupport which can not be serialized.</p>\n\n<p>Are there any way to overcome this issue? I have one solution, that however is not very convenient as I would need to write in every concrete flow definition boilerplate code of concrete processor method invocation.</p>\n\n<pre><code>&lt;action-state id=\"prepareReview\" parent=\"common#prepareReview\"&gt;\n    &lt;evaluate expression=\"concreteProcessor.prepare(modelInstance)\" /&gt;\n&lt;/action-state&gt;\n</code></pre>\n\n<p>That is a bit cumbersome.</p>\n"},{"tags":["spring","autowired","inject","qualifiers"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13198784,"title":"Can't use @Qualifier along with @Inject and autowire=\"byType\"","body":"<p>I have the bean config:</p>\n\n<pre><code>&lt;bean id=\"PostLoginUpdater\" class=\"xyz.auth.PostLoginUpdater\" autowire=\"byType\" /&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>public class PostLoginUpdater implements PostLoginStatePersonalizer {\n\n    //@Qualifier(\"CustomerManager\")\n    @Inject\n    //@Resource(name = \"CustomerManager\")      \n    private CustomerManager customerManager;\n\n    public void setCustomerManager(CustomerManager customerManager)\n    {\n        this.customerManager = customerManager;\n    }\n}\n</code></pre>\n\n<p>Because there are two beans that implement CustomerManager I get this error:</p>\n\n<blockquote>\n  <p>No unique bean of type [CustomerManager] is defined: expected single\n  matching bean but found 2</p>\n</blockquote>\n\n<p>As you can see, I'v tried several combinations (@Inject along with @Qualifier, @Ressource,  only @Qualifier) But I don't get rid of this error message.</p>\n\n<p>I've read that @Qualifier can be used along with @Inject. (<a href=\"http://www.springindepth.com/book/annotation-based-bean-config-dependency-injection.html%20%2aclick%2a\" rel=\"nofollow\"><em>readHere</em></a>) Can't I used them together if I defined autowire=\"byType\" in bean config?</p>\n\n<p>And I don't use <code>&lt;context:annotation-config /&gt;</code> or <code>&lt;context:component-scan /&gt;</code></p>\n"},{"tags":["spring","tomcat","web-applications"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13195011,"title":"Considerations for responsiveness of web application using SQLite and Tomcat","body":"<p>I'm planning to create a web based application for restaurant billing for my client. The technology is Spring, hibernate. Since my client is not inclined to any browsers, I will ask him to go with Firefox. Planning to deploy my App in Tomcat instance in his local machine.\nThis is my first real time deployment. I have planned to use SQLite in Firefox to give at least 70% of responsive time of desktop application. How do I make my application more stable since he will be using it round the clock? Will the responsiveness of my application deteriorate in days? I don't have any clear forecast on this.</p>\n"},{"tags":["java","spring","file-upload"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13202081,"title":"access model from resolveException","body":"<p>I'm a beginner with Spring MVC. I'm working on implementing the HandlerExceptionResolver interface in a controller so that it can catch a MaxUploadSizeExceededException. During this exception, I want to redirect the user to the original page, which was a generic view page for a specific record id.</p>\n\n<p>The original id is passed in a model when uploading the file. Yet when it reaches the resolveException method, it seems I no longer have access to that model.</p>\n\n<p>Is there a way to redirect the user to the original view by retrieving the id of the model? </p>\n\n<p>The tricky part with this, it seems, is that this particular type of exception occurs before it reaches the controller. So I can't use a try/catch block within the controller.</p>\n"},{"tags":["mysql","spring","hibernate","spring-mvc","jspx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13195806,"title":"Adding data to multiple tables using Spring forms in Spring MVC","body":"<p>I have the following database schema and I need to add data to all three tables using a single view <a href=\"http://i.stack.imgur.com/3HXhC.png\" rel=\"nofollow\">http://i.stack.imgur.com/3HXhC.png</a> (Due to stackoverflow rules, I cannot link the image directly).</p>\n\n<p>What I hope to achieve, is to create an order, have it given an Workshop order id, and have it linked to LineItems which will let the user specify the quantity of items from the Inventory table to be added to the order.</p>\n\n<p>I can create a workshop order in my database, and create a lineitem with the workshop orders id, and add the id and quantity from an inventory item into the lineitem table, and then use the attached code to display each lineitem orderline, with the total amount of items, which item is in the order, total price, customer name etc.</p>\n\n<p>How do I go about creating a view that will let me create an order this way? The flow I imagine is:\nCreate workshop order -> add line items from inventory -> save the order.</p>\n\n<p>Having worked on Spring and Hibernate for only a couple of weeks, I have not really figured out a smart approach to solve this, but hopefully someone in here has. By all means, feel free to criticize my database scheme, my classes and anything else. It may be a stupid design, not well suited for an actual production system. </p>\n\n<p>I have attached my primary classes involved in this.</p>\n\n<p>LineItems.java</p>\n\n<pre><code>@Entity\n@Table(name = \"LINE_ITEMS\")\n@AssociationOverrides({\n@AssociationOverride(name = \"pk.inventory\", \n    joinColumns = @JoinColumn(name = \"INVENTORY_Id\")),\n@AssociationOverride(name = \"pk.workshop\", \n    joinColumns = @JoinColumn(name = \"WORKSHOP_ORDERS_Id\"))\n})\npublic class LineItems implements Serializable {\n\nprivate static final long serialVersionUID = 5703588914404465647L;\n\n\n@EmbeddedId\nprivate LineItemsPK pk = new LineItemsPK();\n\nprivate int quantity;\n\n\npublic LineItems() {\n\n}\n\npublic LineItemsPK getPK() {\n    return pk;\n}\n\npublic void setPK(LineItemsPK pk) {\n    this.pk = pk;\n}\n\n@Column(name = \"WORKSHOP_ORDERS_Id\", nullable=false, updatable=false,    \n    insertable=false)\npublic Long getWorkshopOrdersId() {\n    return getPK().getWorkshop().getId();\n}\n\n@Column(name = \"Id\")\n@JoinColumn(name=\"INVENTORY_Id\", nullable=false, updatable=false, insertable=false)\npublic Long getInventoryId() {\n    return getPK().getInventory().getId();\n}\n\n\n@ManyToOne\npublic Workshop getWorkshop() {\n    return getPK().getWorkshop();\n}\n\npublic void setWorkshop(Workshop workshop) {\n    getPK().setWorkshop(workshop);\n}\n\n@ManyToOne\n@JoinColumn(name = \"INVENTORY_Id\")\npublic Inventory getInventory() {\n    return getPK().getInventory();\n}\n\npublic void setInventory(Inventory inventory) {\n    getPK().setInventory(inventory);\n}\n\n\npublic int getQuantity() {\n    return this.quantity;\n}\n\npublic void setQuantity(int quantity) {\n    this.quantity = quantity;\n}\n\npublic boolean equals(Object o) {\n    if (this == o) {\n        return true;\n    }\n\n    if (o == null || getClass() != o.getClass()) {\n        return false;\n    }\n\n    LineItems that = (LineItems) o;\n\n    if (getPK() != null ? !getPK().equals(that.getPK())\n            : that.getPK() != null) {\n        return false;\n    }\n\n    return true;\n}\n\npublic int hashCode() {\n    return (getPK() != null ? getPK().hashCode() : 0);\n}\n} \n</code></pre>\n\n<p>LineItemsPK.java</p>\n\n<pre><code>@Embeddable\npublic class LineItemsPK implements Serializable {\n\nprivate static final long serialVersionUID = -4285130025882317338L;\n\n@ManyToOne\nprivate Inventory inventory;\n@ManyToOne\nprivate Workshop workshop;\n\npublic Workshop getWorkshop() {\n    return workshop;\n}\n\npublic void setWorkshop(Workshop workshop) {\n    this.workshop = workshop;\n}\n\npublic Inventory getInventory() {\n    return inventory;\n}\n\npublic void setInventory(Inventory inventory) {\n    this.inventory = inventory;\n}\n\n@Override\npublic boolean equals(Object o) {\n    if(this == o) {\n        return true;\n    }\n\n    if(o == null || getClass() != o.getClass()) {\n        return false;\n    }\n\n    LineItemsPK that = (LineItemsPK) o;\n\n    if(workshop != null ? !workshop.equals(that.workshop) : that.workshop != null) {\n        return false;\n    }\n\n    if(inventory != null ? !inventory.equals(that.inventory) : that.inventory != null) {\n        return false;\n    }\n\n    return true;\n}\n\n@Override\npublic int hashCode() {\n    int result;\n    result = (workshop != null ? workshop.hashCode() : 0);\n    result = 31 * result + (inventory != null ? inventory.hashCode() : 0);\n\n    return result;\n}\n}\n</code></pre>\n\n<p>Workshop.java</p>\n\n<pre><code>@Entity\n@Table(name = \"WORKSHOP_ORDERS\")\npublic class Workshop implements Serializable {\n\nprivate static final long serialVersionUID = -8106245965993313684L;\n\npublic Long id;\npublic Long inventoryItemId;\npublic String workshopService;\npublic String workshopNotes;\npublic Long customersId;\npublic Long paymentId;\n\nprivate Customer customer;\nprivate Payment payment;\n\nprivate Set&lt;LineItems&gt; lineItems = new HashSet&lt;LineItems&gt;(0);\n\npublic Workshop() {\n\n}\n\npublic Workshop(Long inventoryItemId, String workshopService, String workshopNotes,\n        Customer customer, Payment payment) {\n\n    this.inventoryItemId = inventoryItemId;\n    this.workshopService = workshopService;\n    this.workshopNotes = workshopNotes;\n    this.customer = customer;\n    this.payment = payment;\n}\n\npublic Workshop(Long inventoryItemId, String workshopService, String workshopNotes,\n        Customer customer, Payment payment, Set&lt;LineItems&gt; lineItems) {\n\n    this.inventoryItemId = inventoryItemId;\n    this.workshopService = workshopService;\n    this.workshopNotes = workshopNotes;\n    this.customer = customer;\n    this.payment = payment;\n\n    this.lineItems = lineItems;\n}\n\n@OneToMany(mappedBy = \"pk.workshop\", fetch = FetchType.LAZY, cascade = CascadeType.ALL)\npublic Set&lt;LineItems&gt; getLineItems() {\n    return this.lineItems;\n}\n\npublic void setLineItems(Set&lt;LineItems&gt; lineItems) {\n    this.lineItems = lineItems;\n}\n\n@ManyToOne\n@JoinColumn(name=\"CUSTOMERS_Id\", nullable = false, insertable = false, updatable = false)\npublic Customer getCustomer() {\n    return customer;\n}\n\npublic void setCustomer(final Customer customer) {\n    this.customer = customer;\n}\n\n@OneToOne(cascade = CascadeType.ALL)\n@JoinColumn(name=\"PAYMENT_Id\", insertable = false, updatable = false, nullable = false)\npublic Payment getPayment() {\n    return payment;\n}\n\npublic void setPayment(final Payment payment) {\n    this.payment = payment;\n}\n\n\n@Id\n@GeneratedValue(strategy = IDENTITY)\n@Column(name = \"Id\", nullable = false)\npublic Long getId() {\n    return id;\n}\n\n@Column(name = \"InventoryItemId\")\npublic Long getInventoryItemId() {\n    return inventoryItemId;\n}\n\n@Column(name = \"WorkshopService\")\npublic String getWorkshopService() {\n    return workshopService;\n}\n\n@Column(name = \"WorkshopNotes\")\npublic String getWorkshopNotes() {\n    return workshopNotes;\n}\n\n@Column(name = \"CUSTOMERS_Id\")\npublic Long getCustomersId() {\n    return customersId;\n}\n\n@Column(name = \"PAYMENT_Id\")\npublic Long getPaymentId() {\n    return paymentId;\n}\n\npublic void setId(Long id) {\n    this.id = id;\n}\n\npublic void setInventoryItemId(Long inventoryItemId) {\n    this.inventoryItemId = inventoryItemId;\n}\n\npublic void setWorkshopService(String workshopService) {\n    this.workshopService = workshopService;\n}\n\npublic void setWorkshopNotes(String workshopNotes) {\n    this.workshopNotes = workshopNotes;\n}\n\npublic void setCustomersId(Long customersId) {\n    this.customersId = customersId;\n}\n\npublic void setPaymentId(Long paymentId) {\n    this.paymentId = paymentId;\n}\n\npublic String toString() {\n    return \"Customer id: \" + this.customersId + \"Notes: \" + workshopNotes;\n}\n}\n</code></pre>\n\n<p>Inventory.java</p>\n\n<pre><code>@Entity\n@Table(name = \"INVENTORY\")\npublic class Inventory implements Serializable {\n\nprivate static final long serialVersionUID = -8907719450013387551L;\n\nprivate Long id;\nprivate String itemName;\nprivate String itemVendorName;\nprivate Long itemInventoryStatus;\nprivate Double itemBuyPrice;\nprivate Double itemSellPrice;\n\nprivate Set&lt;LineItems&gt; lineItems = new HashSet&lt;LineItems&gt;(0);\n\npublic Inventory() {\n\n}\n\npublic Inventory(String itemName, String itemVendorName, Long itemInventoryStatus,\n        Double itemBuyPrice, Double itemSellPrice) {\n    this.itemName = itemName;\n    this.itemVendorName = itemVendorName;\n    this.itemInventoryStatus = itemInventoryStatus;\n    this.itemBuyPrice = itemBuyPrice;\n    this.itemSellPrice = itemSellPrice;\n}\n\npublic Inventory(String itemName, String itemVendorName, Long itemInventoryStatus,\n        Double itemBuyPrice, Double itemSellPrice, Set&lt;LineItems&gt; lineItems) {\n    this.itemName = itemName;\n    this.itemVendorName = itemVendorName;\n    this.itemInventoryStatus = itemInventoryStatus;\n    this.itemBuyPrice = itemBuyPrice;\n    this.itemSellPrice = itemSellPrice;\n\n    this.lineItems = lineItems;\n}\n\n@OneToMany(mappedBy = \"pk.inventory\", fetch = FetchType.LAZY, cascade = CascadeType.ALL)\npublic Set&lt;LineItems&gt; getLineItems() {\n    return this.lineItems;\n}\n\npublic void setLineItems(Set&lt;LineItems&gt; lineItems) {\n    this.lineItems = lineItems;\n}\n\n\n@Id\n@Column(name = \"Id\", nullable = false)\n@GeneratedValue(strategy = IDENTITY)\npublic Long getId() {\n    return this.id;\n}\n\n@Column(name = \"ItemName\")\npublic String getItemName() {\n    return this.itemName;\n}\n\n@Column(name = \"ItemVendorName\")\npublic String getItemVendorName() {\n    return this.itemVendorName;\n}\n\n@Column(name = \"ItemInventoryStatus\")\npublic Long getItemInventoryStatus() {\n    return this.itemInventoryStatus;\n}\n\n@Column(name = \"ItemBuyPrice\")\npublic Double getItemBuyPrice() {\n    return this.itemBuyPrice;\n}\n\n@Column(name = \"ItemSellPrice\")\npublic Double getItemSellPrice() {\n    return this.itemSellPrice;\n}\n\n\npublic void setId(Long id) {\n    this.id = id;\n}\n\npublic void setItemName(String itemName) {\n    this.itemName = itemName;\n}\n\npublic void setItemVendorName(String itemVendorName) {\n    this.itemVendorName = itemVendorName;\n}\n\npublic void setItemInventoryStatus(Long itemInventoryStatus) {\n    this.itemInventoryStatus = itemInventoryStatus;\n}\n\npublic void setItemBuyPrice(Double itemBuyPrice) {\n    this.itemBuyPrice = itemBuyPrice;\n}\n\npublic void setItemSellPrice(Double itemSellPrice) {\n    this.itemSellPrice = itemSellPrice;\n}\n\npublic String toString() {\n    return \"Item id:\" + this.id + \" ItemName: \" + this.itemName +\n            \" ItemInventoryStatus: \" + this.itemInventoryStatus +\n            \" ItemBuyPrice: \" + this.itemBuyPrice + \" ItemSellPrice \" + this.itemSellPrice;\n}\n}\n</code></pre>\n"},{"tags":["spring","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1099,"score":0,"question_id":11447534,"title":"org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains'","body":"<p>I created a new Project with STS, Roo and GWT and tried to include Spring Security.\nSince then i get the following error. Has anyone got an idea what went wrong?!</p>\n\n<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL</p>\n\n<p>Stacktrace:</p>\n\n<pre><code>    [INFO] org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL\n[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)\n[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n[INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n[INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)\n[INFO]  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)\n[INFO]  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\n[INFO]  at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)\n[INFO]  at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)\n[INFO]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)\n[INFO]  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)\n[INFO]  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)\n[INFO]  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)\n[INFO]  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)\n[INFO]  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)\n[INFO]  at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)\n[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)\n[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n[INFO]  at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)\n[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)\n[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n[INFO]  at org.mortbay.jetty.Server.doStart(Server.java:222)\n[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)\n[INFO]  at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)\n[INFO]  at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)\n[INFO]  at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)\n[INFO]  at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)\n[INFO]  at com.google.gwt.dev.DevMode.main(DevMode.java:311)\n[INFO] Caused by: java.lang.NoSuchFieldError: NULL\n[INFO]  at org.springframework.expression.TypedValue.&lt;clinit&gt;(TypedValue.java:32)\n[INFO]  at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:88)\n[INFO]  at org.springframework.expression.spel.support.StandardEvaluationContext.&lt;init&gt;(StandardEvaluationContext.java:74)\n[INFO]  at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)\n[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)\n[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:224)\n[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:311)\n[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)\n[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)\n[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153)\n[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)\n[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)\n[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n[INFO]  ... 29 more\n</code></pre>\n\n<p>my web.xml</p>\n\n<pre><code>    &lt;!-- Enable escaping of form submission contents --&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;defaultHtmlEscape&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;classpath*:META-INF/spring/applicationContext*.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n\n        &lt;filter&gt;\n            &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n            &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n          &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n          &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n\n\n\n    &lt;filter&gt;\n        &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;encoding&lt;/param-name&gt;\n            &lt;param-value&gt;UTF-8&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n    &lt;/filter&gt;\n\n\n\n    &lt;filter&gt;\n        &lt;filter-name&gt;HttpMethodFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n    &lt;filter&gt;\n        &lt;filter-name&gt;Spring OpenEntityManagerInViewFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter&lt;/filter-class&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;HttpMethodFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;Spring OpenEntityManagerInViewFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n    &lt;!-- Creates the Spring Container shared by all Servlets and Filters --&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;!-- Handles Spring requests --&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Weltenbrand&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;WEB-INF/spring/webmvc-config.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;requestFactory&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;de.roio.weltenbrand.server.CustomRequestFactoryServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Weltenbrand&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;requestFactory&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/gwtRequest&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;session-config&gt;\n        &lt;session-timeout&gt;10&lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n\n    &lt;servlet&gt;\n     &lt;servlet-name&gt;authServlet&lt;/servlet-name&gt;\n     &lt;servlet-class&gt;de.roio.weltenbrand.server.authentication.AuthServiceImpl&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n     &lt;servlet-name&gt;authServlet&lt;/servlet-name&gt;\n     &lt;url-pattern&gt;/Weltenbrand/auth&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Here the applicationContext.xml:</p>\n\n<pre><code>&lt;bean id=\"customAuthListener\" class=\"de.roio.weltenbrand.server.authentication.CustomAuthListener\"/&gt;\n\n&lt;security:http auto-config=\"true\"&gt;\n    &lt;security:intercept-url pattern=\"/gwtspringsecurityproject/**\" access=\"ROLE_USER\"/&gt;\n    &lt;security:intercept-url pattern=\"/gwt/**\" access=\"ROLE_USER\"/&gt;\n    &lt;security:intercept-url pattern=\"/**/*.html\" access=\"ROLE_USER\"/&gt;\n    &lt;security:intercept-url pattern=\"/**\" access=\"IS_AUTHENTICATED_ANONYMOUSLY\" /&gt;\n&lt;/security:http&gt;\n\n&lt;bean id=\"customAuthenticationProvider\"\n       class=\"de.roio.weltenbrand.server.authentication.CustomAuthenticationProvider\" /&gt;   \n\n&lt;security:authentication-manager alias=\"authenticationManager\"&gt;\n    &lt;security:authentication-provider ref=\"customAuthenticationProvider\"/&gt;\n&lt;/security:authentication-manager&gt;\n\n&lt;context:property-placeholder location=\"classpath*:META-INF/spring/*.properties\"/&gt;\n\n&lt;context:spring-configured/&gt;\n\n&lt;context:component-scan base-package=\"de.roio.weltenbrand\"&gt;\n    &lt;context:exclude-filter expression=\".*_Roo_.*\" type=\"regex\"/&gt;\n    &lt;context:exclude-filter expression=\"org.springframework.stereotype.Controller\" type=\"annotation\"/&gt;\n&lt;/context:component-scan&gt;\n&lt;bean class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\" id=\"dataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"${database.driverClassName}\"/&gt;\n    &lt;property name=\"url\" value=\"${database.url}\"/&gt;\n    &lt;property name=\"username\" value=\"${database.username}\"/&gt;\n    &lt;property name=\"password\" value=\"${database.password}\"/&gt;\n    &lt;property name=\"testOnBorrow\" value=\"true\"/&gt;\n    &lt;property name=\"testOnReturn\" value=\"true\"/&gt;\n    &lt;property name=\"testWhileIdle\" value=\"true\"/&gt;\n    &lt;property name=\"timeBetweenEvictionRunsMillis\" value=\"1800000\"/&gt;\n    &lt;property name=\"numTestsPerEvictionRun\" value=\"3\"/&gt;\n    &lt;property name=\"minEvictableIdleTimeMillis\" value=\"1800000\"/&gt;\n    &lt;property name=\"validationQuery\" value=\"SELECT 1\"/&gt;\n&lt;/bean&gt;\n&lt;bean class=\"org.springframework.orm.jpa.JpaTransactionManager\" id=\"transactionManager\"&gt;\n    &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt;\n&lt;/bean&gt;\n&lt;tx:annotation-driven mode=\"aspectj\" transaction-manager=\"transactionManager\"/&gt;\n&lt;bean class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\" id=\"entityManagerFactory\"&gt;\n    &lt;property name=\"persistenceUnitName\" value=\"persistenceUnit\"/&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["spring","javabeans","ojb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12848719,"title":"Spring Bean Inheritance and Null Pointer Exception Issue","body":"<p>I am working on adding a new bean to a Business Object.</p>\n\n<p>To do so, I first add the member to the PurchaseOrderDocument Class by assigning it the following:</p>\n\n<pre><code>protected String purchaseOrderCurrentCMActionStatus;\n</code></pre>\n\n<p>Then of course I assign it the usual getter and setters like so:</p>\n\n<pre><code> public String getPurchaseOrderCurrentCMActionStatus() {\n    return purchaseOrderCurrentCMActionStatus;\n}\n\npublic void setPurchaseOrderCurrentCMActionStatus(String purchaseOrderCurrentCMActionStatus) {\n    this.purchaseOrderCurrentCMActionStatus = purchaseOrderCurrentCMActionStatus;\n}\n</code></pre>\n\n<p>Okay, so that is all happening in my Java Class.</p>\n\n<p>So now, in the corresponding XML file called PurchaseOrderDocument.xml located in the DataDictionary directory I added the following bean definition -</p>\n\n<pre><code> &lt;bean id=\"PurchaseOrderDocument-purchaseOrderCurrentCMActionStatus\"\n  parent=\"PurchaseOrderDocument-purchaseOrderCurrentCMActionStatus-parentBean\"/&gt;\n\n    &lt;bean id=\"PurchaseOrderDocument-purchaseOrderCurrentCMActionStatus-parentBean\" abstract=\"true\" parent=\"AttributeDefinition\"&gt;\n    &lt;property name=\"name\" value=\"purchaseOrderCurrentCMActionStatus\"/&gt;\n    &lt;property name=\"label\" value=\"Current CM Action Status\"/&gt;\n    &lt;property name=\"required\" value=\"false\"/&gt;\n    &lt;property name=\"shortLabel\" value=\"CM Status\"/&gt;\n    &lt;property name=\"control\"&gt;\n       &lt;ref bean=\"HiddenControl\"/&gt;\n    &lt;/property&gt;\n &lt;/bean&gt; \n</code></pre>\n\n<p>Next, I need to create the OJB mapping, so in the ojb.xml file I added the following line of XML code -</p>\n\n<pre><code>&lt;field-descriptor name=\"purchaseOrderCurrentCMActionStatus\" column=\"CURR_CM_ACTION_STATUS\" jdbc-type=\"VARCHAR\"/&gt;\n</code></pre>\n\n<p>I also created the column CURR_CM_ACTION_STATUS in my corresponding TABLE - so I double and triple checked that the names were a spot on match.</p>\n\n<p>Right -</p>\n\n<p>So here's the question:\nWithin my PurchaseOrderDocument I have a trigger that waits for an event that will fire off the \"Setter\" code I specified above for this bean.\nThe weird thing is that this code that I have written is generating a NULL Pointer Exception.</p>\n\n<p>I have pin-pointed the problem to the following line -</p>\n\n<pre><code>&lt;bean id=\"PurchaseOrderDocument-purchaseOrderCurrentCMActionStatus-parentBean\" abstract=\"true\" parent=\"AttributeDefinition\"&gt;\n</code></pre>\n\n<p>If I change the following line:</p>\n\n<pre><code>parent = \"AttributeDefinition\"\n</code></pre>\n\n<p>to</p>\n\n<pre><code>parent = \"Note-noteText\"\n</code></pre>\n\n<p>(Note is a Class and noteText is the member varaible the I ORIGINALLY had in this bean that I was inheriting from - but I don't want to inherit from the Note Class anymore, I want it local to my PurchaseOrderDocument class.  Anyways, when I had the Note-noteText in there, I DID NOT get the null pointer exception, but rather, after the \"set\" method was called by my trigger, NOTHING was written to the database, which incidentally is ORACLE.)</p>\n\n<p>Thus, this is my reason for moving away from inheritance and instead I want this bean to be local to THIS class.</p>\n\n<p>A co-worker of mine mentioned that perhaps Spring is looking for this bean in the FORM and since I don't have it there - it is puking on it...but I have my doubts.</p>\n\n<p>Also notice that I am using a HIDDEN CONTROL.  When I added the parent=\"AttributeDefinition\" text, I received an error saying that I didn't specify a control attribute.  Since, this bean gets its contents NOT from USER input, I specified this HIDDEN CONTROL attribute.  </p>\n\n<p>Maybe this is part of the problem??</p>\n\n<p>Here is the stack trace just in case -</p>\n\n<pre>\nStacktrace:\n    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:521)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:412)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)\n    org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398)\n    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)\n    org.kuali.rice.kns.web.struts.action.KualiRequestProcessor.process(KualiRequestProcessor.java:101)\n    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)\n    org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.kuali.rice.kew.web.UserLoginFilter.doFilter(UserLoginFilter.java:92)\n    org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:50)\n    org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:167)\n    org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:121)\n    org.kuali.rice.kns.web.filter.SetResponseBufferSizeFilter.doFilter(SetResponseBufferSizeFilter.java:78)\n    org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)\n    org.kuali.rice.kns.web.filter.SessionFilter.doFilter(SessionFilter.java:41)\n\nroot cause\n\njavax.servlet.ServletException: javax.servlet.jsp.JspException: java.lang.NullPointerException\n    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:861)\n    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:794)\n    org.apache.jsp.jsp.module.purap.PurchaseOrder_jsp._jspService(PurchaseOrder_jsp.java:269)\n    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)\n    org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398)\n    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)\n    org.kuali.rice.kns.web.struts.action.KualiRequestProcessor.process(KualiRequestProcessor.java:101)\n    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)\n    org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.kuali.rice.kew.web.UserLoginFilter.doFilter(UserLoginFilter.java:92)\n    org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:50)\n    org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:167)\n    org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:121)\n    org.kuali.rice.kns.web.filter.SetResponseBufferSizeFilter.doFilter(SetResponseBufferSizeFilter.java:78)\n    org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)\n    org.kuali.rice.kns.web.filter.SessionFilter.doFilter(SessionFilter.java:41)\n\nroot cause\n\njava.lang.NullPointerException\n    org.kuali.rice.kns.datadictionary.exporter.AttributesMapBuilder.buildAttributeMap(AttributesMapBuilder.java:66)\n    org.kuali.rice.kns.datadictionary.exporter.AttributesMapBuilder.buildAttributesMap(AttributesMapBuilder.java:51)\n    org.kuali.rice.kns.datadictionary.exporter.DocumentEntryMapper.mapEntry(DocumentEntryMapper.java:88)\n    org.kuali.rice.kns.datadictionary.exporter.TransactionalDocumentEntryMapper.mapEntry(TransactionalDocumentEntryMapper.java:30)\n    org.kuali.rice.kns.datadictionary.exporter.DataDictionaryMap.get(DataDictionaryMap.java:60)\n    javax.el.MapELResolver.getValue(MapELResolver.java:51)\n    javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)\n    org.apache.el.parser.AstValue.getValue(AstValue.java:123)\n    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)\n    org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)\n    org.apache.jsp.tag.web.kr.documentPage_tag._jspx_meth_c_005fset_005f0(documentPage_tag.java:382)\n    org.apache.jsp.tag.web.kr.documentPage_tag.doTag(documentPage_tag.java:313)\n    org.apache.jsp.jsp.module.purap.PurchaseOrder_jsp._jspService(PurchaseOrder_jsp.java:260)\n    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)\n    org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398)\n    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)\n    org.kuali.rice.kns.web.struts.action.KualiRequestProcessor.process(KualiRequestProcessor.java:101)\n    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)\n    org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.kuali.rice.kew.web.UserLoginFilter.doFilter(UserLoginFilter.java:92)\n    org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:50)\n    org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:167)\n    org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:121)\n    org.kuali.rice.kns.web.filter.SetResponseBufferSizeFilter.doFilter(SetResponseBufferSizeFilter.java:78)\n    org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)\n    org.kuali.rice.kns.web.filter.SessionFilter.doFilter(SessionFilter.java:41)\n</pre>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13199722,"title":"Programmatically change property value","body":"<pre><code> &lt;beans:bean id=\"loginUrlAuthenticationEntryPoint\"\n            class=\"org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint\"&gt;\n    &lt;beans:property name=\"loginFormUrl\" value=\"/session-timeout-1.do\" /&gt;\n &lt;/beans:bean/&gt; \n</code></pre>\n\n<p>I have 2 different session-timeout pages for different types of users. After a user logs in, the value of the property may have to change from \"/session-timeout-1.do\" to \"/session-timeout-2.do\" after checking the type of the user.</p>\n\n<p>I am wondering that is there an API that can change the property value at runtime?</p>\n\n<p>Or is it possible to have a variable in the config file, e.g. </p>\n\n<pre><code>&lt;beans:property name=\"loginFormUrl\" value=\"${time-out-url}\"&gt;\n</code></pre>\n\n<p>where variable \"time-out-url\" can be set programmatically?</p>\n"},{"tags":["java","spring","spring-el"],"answer_count":0,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":40,"score":4,"question_id":13200269,"title":"is SpEL supported in import statements?","body":"<p>I would like to import different resource files based on some condition. Is this possible?</p>\n\n<p>These don't work:</p>\n\n<pre><code>&lt;import resource=\"#{ systemProperties['foo'] }.xml\" /&gt; \n\n&lt;import resource=\"#{ T(my.testpkg).getValue() }.xml\" /&gt; \n</code></pre>\n"},{"tags":["java","spring","jboss","jta","jotm"],"answer_count":5,"favorite_count":6,"up_vote_count":7,"down_vote_count":0,"view_count":37741,"score":7,"question_id":117751,"title":"Spring JTA TransactionManager config: Supporting both Tomcat and JBoss","body":"<p>I have a web application using JPA and JTA with Spring. I would like to support both JBoss and Tomcat. When running on JBoss, I'd like to use JBoss' own TransactionManager, and when running on Tomcat, I'd like to use JOTM.</p>\n\n<p>I have both scenarios working, but I now find that I seem to need two separate Spring configurations for the two cases. With JOTM, I need to use Spring's <code>JotmFactoryBean</code>:</p>\n\n<pre><code>&lt;bean id=\"transactionManager\" \n class=\"org.springframework.transaction.jta.JtaTransactionManager\"&gt;\n    &lt;property name=\"userTransaction\"&gt;\n        &lt;bean class=\"org.springframework.transaction.jta.JotmFactoryBean\"/&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>In JBoss, though, I just need to fetch \"TransactionManager\" from JNDI:</p>\n\n<pre><code>&lt;bean id=\"transactionManager\" \n class=\"org.springframework.transaction.jta.JtaTransactionManager\"&gt;\n    &lt;property name=\"transactionManager\"&gt;\n        &lt;bean class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n             &lt;property name=\"resourceRef\" value=\"true\" /&gt;\n             &lt;property name=\"jndiName\" value=\"TransactionManager\" /&gt;\n             &lt;property name=\"expectedType\" \n               value=\"javax.transaction.TransactionManager\" /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Is there a way to configure this so that the appropriate TransactionManager - JBoss or JOTM - is used, without the need for two different configuration files?</p>\n"},{"tags":["java","eclipse","spring","tomcat7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13199026,"title":"Tomcat 7 integrated in eclipse classpath issue","body":"<p>I am running eclipse on a mac and have my tomcat folder at /Library/WebServer/apache-tomcat.\nI am using the tomcat 7 server from within eclipse and configured it to use the original tomcat folder as its working directory.</p>\n\n<p>Problem is that when using the PropertyPlaceholderConfigurer bean in Spring 3.1 and specify the location as \"classpath:database.properties\", when i start tomcat it will always give me a FileNotFoundException.</p>\n\n<p>I have tried placing the database.properties file in lib,conf and root folder of the tomcat folder.</p>\n\n<p>I am out of options, please help!</p>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>Tried Guido Simone's solution, but i get:</p>\n\n<pre><code>ERROR: org.springframework.web.context.ContextLoader - Context initialization failed\norg.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: /Library/WebServer/apache-tomcat-7.0.32/conf/database.properties (No such file or directory)\n</code></pre>\n\n<p>So i finally see the full path that spring is looking for the file(which is correct) and the file is physically there. Any other suggestions? And if this is going to work, do other webservers have this catalina.base variable also or is this tomcat specific? Because i kind of need platform independence at a later stage. </p>\n"},{"tags":["java","spring","spring-mvc","annotations"],"answer_count":3,"favorite_count":16,"up_vote_count":31,"down_vote_count":0,"view_count":12100,"score":31,"question_id":6827752,"title":"What's the difference between @Component, @Repository & @Service annotations in Spring?","body":"<p>Can <code>@Component</code>, <code>@Repository</code> &amp; <code>@Service</code> annotations be used interchangeably in Spring or do they provide any particular functionality besides acting as a notation device?</p>\n\n<p>In other words, if I have a Service class and I change the annotation from <code>@Service</code> to <code>@Component</code>, will it still behave the same way? </p>\n\n<p>Or does the annotation also influence the behavior and functionality of the class?</p>\n"},{"tags":["java","spring","nullpointerexception","autowired"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":13196976,"title":"NullPointerException on dependency injection with Spring","body":"<p>I have 3 types. </p>\n\n<p>ServiceAffaire.java:</p>\n\n<pre><code>package ws.magicnew.sync;\n\n...\n\n@Transactional\n@Service(\"serviceAffaire\")\npublic class ServiceAffaire implements IServiceAffaire {\n\n    private static Log log = LogFactory.getLog(ServiceAffaire.class);\n\n    //private static SimpleDateFormat sdf = new SimpleDateFormat(MagicFacade.WS_DATE_FORMAT);\n\n    @Autowired\n    @Qualifier(\"manifestationService\")\n    protected IManifestationService manifestationService;\n\n    @Autowired\n    @Qualifier(\"typeDeManifestationService\")\n    protected ITypeDeManifestationService typeService;\n\n    @Autowired\n    @Qualifier(\"espaceManifestationService\")\n    protected IEspaceManifestationService espaceManifService;\n\n    @Autowired\n    @Qualifier(\"siteService\")\n    protected ISiteService siteService;\n\n    @Autowired\n    @Qualifier(\"natureService\")\n    protected INatureService natureService;\n\n    @Autowired\n    @Qualifier(\"facadeGetAffaire\")\n    protected MagicFacade facadeGetAffaire;\n\n    @Autowired\n    @Qualifier(\"compteurManifestation\")\n    private Compteur compteurManifestation;\n\n    @Autowired\n    @Qualifier(\"compteurContenus\")\n    protected Compteur compteurContenus;\n\n        public synchronized void synchronize(boolean setFlag) throws Exception {\n            ...\n        }\n}\n</code></pre>\n\n<p>IServiceAffaire.java:</p>\n\n<pre><code>package ws.magicnew.sync;\n\npublic interface IServiceAffaire {\n\n    public void synchronize(boolean setFlag) throws Exception;\n\n}\n</code></pre>\n\n<p>and CacheAction.java:</p>\n\n<pre><code>package ws.magicnew.sync;\n\n...\n\n@Configurable\n@Transactional\npublic class CacheAction extends DispatchAction {\n\n    private static Log log = LogFactory.getLog(CacheAction.class);\n\n    @Autowired\n    @Qualifier(\"serviceAffaire\")\n    private IServiceAffaire serviceAffaire;\n\n    public ActionForward getAffaire(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {\n        boolean setFlag = Boolean.parseBoolean(CmsProperties.SYNCRO_AFFAIRES_FLAG);\n        log.info(\"getAffaire debut \" +setFlag);\n        serviceAffaire.synchronize(setFlag); // NullPointerException here: serviceAffaire is null\n        log.info(\"getAffaire fin \" +setFlag);\n        request.setAttribute(\"message\", \"Le service get affaire a été lancé.\");\n\n        return mapping.findForward(\"cache\");\n    }\n}\n</code></pre>\n\n<p>The wiring is made in a applicationContext-scanpackages.xml file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\" xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xmlns:util=\"http://www.springframework.org/schema/util\"\n    xmlns:ehcache=\"http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring\"\n    xmlns:jaxws=\"http://cxf.apache.org/jaxws\" \n    xmlns:cxf=\"http://cxf.apache.org/core\" \n    xsi:schemaLocation=\"\n            http://www.springframework.org/schema/aop \n                http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n            http://www.springframework.org/schema/beans \n                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n            http://www.springframework.org/schema/context \n                http://www.springframework.org/schema/context/spring-context-3.0.xsd\n            http://www.springframework.org/schema/jee \n                http://www.springframework.org/schema/jee/spring-jee-3.0.xsd\n            http://www.springframework.org/schema/tx \n                http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n            http://www.springframework.org/schema/util \n                http://www.springframework.org/schema/util/spring-util-3.0.xsd\n            http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring \n                http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.1.xsd \n            http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd\n            http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd\"&gt;\n    &lt;context:annotation-config /&gt;\n    &lt;context:component-scan base-package=\"ws.magicnew.sync\" /&gt;\n    &lt;context:component-scan base-package=\"ws.magicnew.facade\" /&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>This seems ok to me, but I still get a <code>NullPointerException</code> when I'm calling the CacheAction.getAffaire() method. I can't figure out why and it's driving me crazy. Any clue?</p>\n\n<p>I had previously some issues with the injection of the attributes of ServiceAffaire (which I solved), so Spring is actually autowiring them. But for some reason, it is unable to inject ServiceAffaire into CacheAction.</p>\n\n<p>As indicated as comment in the code, the serviceAffaire attribute is null when ServiceAffaire.synchronize is called, as I can see when I execute in debug mode.</p>\n"},{"tags":["facebook","spring","social","spring-social"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":138,"score":0,"question_id":11591797,"title":"Spring Social for Facebook - get user location","body":"<p>I am using spring social Facebook to connect to facebook. The connection works well. I am trying to get the user's location with the following code:</p>\n\n<pre><code>FacebookProfile profile = facebook.userOperations().getUserProfile();\nReference rLocation = profile.getLocation();\nLocation location= facebook.fetchObject(rLocation.getId(), Location.class);\n</code></pre>\n\n<p>But what I get is an empty location object (it doesn't have any of the details). I can see that the rLocation does have a name (Los Angeles) but I also need the country. </p>\n\n<p>Any idea how to get the actual Location object?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13197904,"title":"Why does spring task scheduler wait for previous task to finish?","body":"<p>I have the following task scheduler setup:</p>\n\n<pre><code>&lt;bean id=\"Task\" class=\"foo.bar.Task\" /&gt;\n\n&lt;bean id=\"TaskScheduler\"\n  class=\"org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler\"&gt;\n    &lt;property name=\"waitForTasksToCompleteOnShutdown\" value=\"true\" /&gt;\n    &lt;property name=\"poolSize\" value=\"1000\" /&gt;\n&lt;/bean&gt;\n\n&lt;task:scheduled-tasks scheduler=\"TaskScheduler\"&gt;\n  &lt;task:scheduled ref=\"Task\" method=\"run\" cron=\"*/5 * * * * *\" /&gt;\n&lt;/task:scheduled-tasks&gt;\n</code></pre>\n\n<p>The Task just prints a line and sleeps for 10 seconds. With this setup, my expectation was that the task would run every 5 seconds, regardless of whether the previous task had finished it's execution (ie stopped sleeping). But that's not the case, the task runs once ever 15 seconds (the sleep time and then the next time the cron is hit).</p>\n\n<p>How can I configure this so that the task runs every 5 seconds regardless of whether the previous execution finished?</p>\n"},{"tags":["java","spring","spring-mvc","twitter","spring-social"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13183811,"title":"Spring Social getting Facebook friends not working","body":"<p>I'm using Spring Social to connect to Facebook and Twitter.\nThe connection part works fine, but when I try to get Facebook friends, it throws error: </p>\n\n<blockquote>\n  <p>The server encountered an internal error () that prevented it from\n  fulfilling this request.</p>\n</blockquote>\n\n<p>But fetching Twitter friends works fine.</p>\n\n<p>My configuration file is as follows:</p>\n\n<pre><code>&lt;bean id=\"connectionFactoryLocator\"\n        class=\"org.springframework.social.connect.support.ConnectionFactoryRegistry\"&gt;\n        &lt;property name=\"connectionFactories\"&gt;\n            &lt;list&gt;\n                &lt;bean\n                    class=\"org.springframework.social.twitter.connect.TwitterConnectionFactory\"&gt;\n                    &lt;constructor-arg value=\"${twitter.consumerKey}\" /&gt;\n                    &lt;constructor-arg value=\"${twitter.consumerSecret}\" /&gt;\n                &lt;/bean&gt;\n                &lt;bean\n                    class=\"org.springframework.social.facebook.connect.FacebookConnectionFactory\"&gt;\n                    &lt;constructor-arg value=\"${facebook.clientId}\" /&gt;\n                    &lt;constructor-arg value=\"${facebook.clientSecret}\" /&gt;\n                    &lt;constructor-arg value=\"${facebook.appNamespace}\" /&gt;\n                &lt;/bean&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"textEncryptor\" class=\"org.springframework.security.crypto.encrypt.Encryptors\"\n        factory-method=\"noOpText\" /&gt;\n\n    &lt;bean id=\"usersConnectionRepository\"\n        class=\"org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository\"&gt;\n        &lt;constructor-arg ref=\"jpaDataSource\" /&gt;\n        &lt;constructor-arg ref=\"connectionFactoryLocator\" /&gt;\n        &lt;constructor-arg ref=\"textEncryptor\" /&gt;\n        &lt;property name=\"connectionSignUp\" ref=\"accountConnectionSignUp\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"accountConnectionSignUp\" class=\"com.joinups.controller.AccountConnectionSignUp\" /&gt;\n\n    &lt;bean id=\"connectionRepository\" factory-method=\"createConnectionRepository\"\n        factory-bean=\"usersConnectionRepository\" scope=\"request\"&gt;\n        &lt;constructor-arg value=\"#{request.userPrincipal.name}\" /&gt;\n        &lt;aop:scoped-proxy proxy-target-class=\"false\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean class=\"org.springframework.social.connect.web.ProviderSignInController\"&gt;\n        &lt;property name=\"applicationUrl\" value=\"${application.url}\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean class=\"com.joinups.config.SocialApiConfig\" /&gt;\n</code></pre>\n\n<p>The SocialApiConfig is as follows:</p>\n\n<pre><code>@Configuration\npublic class SocialApiConfig {\n\n    @Bean\n    @Scope(value=\"request\", proxyMode=ScopedProxyMode.INTERFACES)   \n    public Facebook facebook(ConnectionRepository connectionRepository) {\n        Connection&lt;Facebook&gt; facebook = connectionRepository.findPrimaryConnection(Facebook.class);\n        return facebook != null ? facebook.getApi() : new FacebookTemplate();\n    }\n\n    @Bean\n    @Scope(value=\"request\", proxyMode=ScopedProxyMode.INTERFACES)   \n    public Twitter twitter(ConnectionRepository connectionRepository) {\n        Connection&lt;Twitter&gt; twitter = connectionRepository.findPrimaryConnection(Twitter.class);\n        return twitter != null ? twitter.getApi() : new TwitterTemplate();\n    }\n}\n</code></pre>\n\n<p>And my controller to get the friends is as follows:</p>\n\n<pre><code>@Controller\npublic class SocialController {\n\n    private final Twitter twitter;\n    private final Facebook facebook;\n\n    @Inject\n    public SocialController(Twitter twitter, Facebook facebook) {\n        this.twitter = twitter;\n        this.facebook = facebook;\n    }\n\n    @RequestMapping(value=\"/social/facebook/friends\")\n    public @ResponseBody JSONObject facebookFriends(Model model) {\n        model.addAttribute(\"facebookProfiles\", facebook.friendOperations().getFriendProfiles());\n        return JSONObject.fromObject(model);\n    }\n\n    @RequestMapping(value=\"/social/twitter/friends\")\n    public @ResponseBody JSONObject twitterFriends(Model model) {\n        model.addAttribute(\"twitterProfiles\", twitter.friendOperations().getFriends());\n        return JSONObject.fromObject(model);\n    }\n\n}\n</code></pre>\n\n<p>While the Twitter part works perfectly fine, the Facebook part throws error:\nPlease help.\nAm I missing something.</p>\n\n<p>p.s. I also have a CustomConnectController controller that extends ConnectController. Just FYI.</p>\n"},{"tags":["java","spring","jmx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":312,"score":0,"question_id":4360603,"title":"spring jmx change property files","body":"<p>Is there a Spring JMX example to change configuration properties dynamically. </p>\n"},{"tags":["spring","hibernate","jsf","transactions","open-session-in-view"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13194511,"title":"OSIV pattern ViewScped","body":"<p>Is there any accepted way to use OSIV pattern in viewscoped; I am trying to use JSF, Spring and Hibernate with JPA</p>\n"},{"tags":["spring","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":32,"score":-3,"question_id":13190571,"title":"How to implement remember-me functionality using spring security","body":"<p>How to implement remember-me functionality using spring security :-</p>\n\n<p>I am using spring security for the user authentication and now i want remember-me functionality on login page,\ni have goggled it so many time but not getting the exact solution, please give the answer with coding example</p>\n\n<p>i have tried that:-</p>\n\n<p><strong>Spring-security.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n</code></pre>\n\n<p>http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\nhttp://www.springframework.org/schema/security\n<a href=\"http://www.springframework.org/schema/security/spring-security-3.1.xsd\" rel=\"nofollow\">http://www.springframework.org/schema/security/spring-security-3.1.xsd</a>\"></p>\n\n<pre><code>&lt;!--&lt;http pattern=\"/abc/**\" security=\"none\" /&gt; --&gt;\n\n    &lt;http auto-config=\"true\" use-expressions=\"true\"&gt;\n\n        &lt;intercept-url pattern=\"/admin*\" access=\"hasRole('SYS_ADMIN')\" /&gt;\n        &lt;intercept-url pattern=\"/cab-stop-admin*\" access=\"hasAnyRole('SYS_ADMIN','CABSTOP_ADMIN')\" /&gt;\n        &lt;intercept-url pattern=\"/driver*\" access=\"hasAnyRole('DRIVER','SYS_ADMIN','CABSTOP_ADMIN')\" /&gt;\n        &lt;intercept-url pattern=\"/customer*\" access=\"hasAnyRole('CUSTOMER','SYS_ADMIN','CABSTOP_ADMIN')\" /&gt;\n\n        &lt;form-login login-page=\"/login\" default-target-url=\"/role-check\"\n            authentication-failure-url=\"/login?error=true\" /&gt;\n            &lt;remember-me key=\"_spring_security_remember_me\"/&gt;\n        &lt;logout logout-success-url=\"/login\" /&gt;\n\n         &lt;/http&gt; \n\n         &lt;authentication-manager&gt; \n        &lt;authentication-provider&gt; \n        &lt;password-encoder hash=\"md5\"  /&gt;\n        &lt;jdbc-user-service data-source-ref=\"fmsDataSource\"  \n        users-by-username-query=\"select Username,Password, 'true' as enabled from login_details where Username=?\"\n        authorities-by-username-query=\"select u.Username, ur.Role_Name from login_details u, role_master ur where u.Role_Master_Id = ur.Role_Master_Id and u.Username =? \" /&gt;\n    &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>and my jsp is:-</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td align=\"right\"&gt;&lt;spring:message code=\"message.username\"\n            text=\"default text\" /&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" name=\"j_username\" /&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td align=\"right\"&gt;&lt;spring:message code=\"message.password\"\n            text=\"default text\" /&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"password\" name=\"j_password\" /&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n\n    &lt;tr&gt;\n        &lt;td&gt; Remember me:&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"checkbox\" name=\"_spring_security_remember_me\" id=\"rememberMe\"/&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table\n</code></pre>\n\n<p>but it is not working \nI want know that is this ok or i need some thing else</p>\n\n<p>Thanks in Advance</p>\n"},{"tags":["eclipse","spring","debugging","exception","output"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":31,"score":0,"question_id":13195899,"title":"How to see nested exceptions trace, hidden by Spring?","body":"<p>When I am debugging Spring application in Eclipse, I am getting long exception chains. For example, I have </p>\n\n<pre>\nError creating bean with name '...' defined in file [...Tester.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:\nPropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property '...' threw exception; nested exception is java.lang.IllegalArgumentException: ...\n</pre>\n\n<p>And so on. Multiple stacks with exceptions inside Spring, which is uninteresting. It should be my exceptions somewhere below, but Spring does not show them.</p>\n\n<p>And I can't click into exception and navigate to problem place as usual.</p>\n\n<p>How to say Spring to output all exceptions?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Below is the full output. One can see that the place where <code>IllegalArgumentException</code> occurred was probably truncated.</p>\n\n<pre>\nException in thread \"main\" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mybean' defined in file [D:\\mypath\\myconfig.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:\nPropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'myproperty' threw exception; nested exception is java.lang.IllegalArgumentException: my exception message\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1361)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)\n    at org.springframework.context.support.FileSystemXmlApplicationContext.(FileSystemXmlApplicationContext.java:140)\n    at org.springframework.context.support.FileSystemXmlApplicationContext.(FileSystemXmlApplicationContext.java:84)\n    at springtests.SpringRunner.main(SpringRunner.java:8)\nCaused by: org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:\nPropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'target.partner' threw exception; nested exception is java.lang.IllegalArgumentException: Illegal frame length 1 in explicit constructor\n    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)\n    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1358)\n    ... 13 more\n</pre>\n"},{"tags":["spring","setter","autowired","inject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13193655,"title":"Why do I need a setter for autowired / injected field?","body":"<p>I have a bean:</p>\n\n<pre><code>    &lt;bean id=\"BasketLogic\" class=\"efco.logic.EfcoBasketLogic\" autowire=\"byType\"&gt;\n        &lt;property name=\"documentLogic\" ref=\"DocumentLogic\" /&gt;\n        &lt;property name=\"stateAccess\" ref=\"StateAccess\" /&gt;\n        &lt;property name=\"contextAccess\" ref=\"ContextAccess\" /&gt;\n    &lt;/bean&gt;\n\n  &lt;bean id=\"EfcoErpService\" autowire=\"byType\" class=\"efco.erp.service.EfcoErpServiceImpl\"&gt;\n    &lt;constructor-arg ref=\"ErpConnector\"/&gt;\n  &lt;/bean&gt;\n</code></pre>\n\n<p><em>documentLogic</em>, <em>stateAccess</em> and <em>contextAccess</em> are fields on <em>BasketLogicImpl</em></p>\n\n<p>And I do not have <code>&lt;context:component-scan /&gt;</code> </p>\n\n<p>EfcoBasketLogic.java:</p>\n\n<pre><code>public class EfcoBasketLogic extends BasketLogicImpl {\n\n        @Inject\n        private EfcoErpService erpService;\n    ...\n    ...\n    ...\n}\n</code></pre>\n\n<p>erpService is <em>null</em>, unless I provide a setter. But why? I thought a setter isn't needed where autowiring is taking place? Could it be that BasketLogicImpl is responsible for that?</p>\n"},{"tags":["java","database","spring","hibernate","gwt"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13196441,"title":"Self teaching professional java skills","body":"<p>I've been programming in java for a while and I really like the language, I've mostly just done game programming, but I want to get a feel for some of the more commonly used api's and frameworks and just get a generally more well-rounded grasp of the language and the common libraries in the current job market.</p>\n\n<p>From what I found things like spring, hibernate, and GWT are pretty in demand right now. I looked at some tutorials online and they weren't hard to follow but I really felt like I had no context for what I was learning - I had no idea how any of it would be use in a real work environment. I know nothing can rival the benefit I'd get from actual work experience but that's not an option for me right now, I need another way to learn these technologies in a way where I'll at least feel comfortable working with them and know what I'm doing beyond just understanding what code does what. I checked out a few books but they were all really old(like pre-2006, am I right to assume those books would be kind of out of date today?) or required experience with libraries that I didn't have and can't get. I hate getting stuck looking for the best resource to learn something instead of spending my time actually learning.</p>\n\n<p>All I really want is someone to point me to a resource(website or ebook) that is aimed at already experienced java developers and will not only teach me some interesting useful java technology(anything that is useful, I dont know much outside of graphics libraries and game related things so I was thinking some database or web programming api's) but also give me a good perspective of it and leave me feeling confident that I could actually use what I learned on a practical application.</p>\n\n<p>If my post makes you think I'm not yet experienced to be learning these things, which I doubted earlier today but am now starting to question, then what do you think is the next step for me? I just want to get better at java.</p>\n\n<p>Thanks everyone</p>\n"},{"tags":["java","database","spring"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13195988,"title":"Where to find list of exceptions and when their occurs","body":"<p>I am using <code>SimpleJdbcTemplate</code> to connect to database. Where I can found all exception and also when they are thrown? I know just few for example:</p>\n\n<pre><code>org.springframework.jdbc.BadSqlGrammarException\n</code></pre>\n\n<p>occurs when the SQL query has bad grammar. But I need to know more for example what exception is thrown when database is unreachble or there is lock etc.</p>\n"},{"tags":["java","spring","amazon-s3","amazon-web-services","spring-integration"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13195256,"title":"Spring Integration - Send message immediately after FTP download","body":"<p>Is there a way to have Spring Integration's FTP Inbound Channel Adapter (actually I'm using the S3 Inbound Channel adapter, but they're very similar) fire off a message for each file it has downloaded, as soon as it has downloaded it? I have a very large directory, and I want to process files as soon as they arrive on my local filesystem, instead of waiting for the whole directory to get downloaded.</p>\n"},{"tags":["java","sql","spring","parameters","resultset"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":142,"score":0,"question_id":11786534,"title":"Spring MVC 3.0 Getting Values Out From Sql Query","body":"<p>I am very new to using Spring MVC 3.0 and i am writing a custom authentication class and i would like to know how i can extract the values from an sql query into variables so i can do a comparison under is an example of what i am trying to achieve and some code is omitted which i am asking about;</p>\n\n<pre><code>import java.sql.ResultSet;\nimport java.sql.SQLException;\n\nimport org.apache.log4j.Logger;\nimport org.springframework.jdbc.core.simple.ParameterizedRowMapper;\nimport org.springframework.jdbc.core.support.JdbcDaoSupport;\n\nimport com.crimetrack.DAO.LoginDAO;\nimport com.crimetrack.business.Login;\n\npublic class JdbcLoginDAO extends JdbcDaoSupport implements LoginDAO {\n\n    private final Logger logger = Logger.getLogger(getClass()); \n    String dbUserName;\n    String dbPassword;\n\n    public boolean AuthenticateUser(Login login) {\n        logger.debug(\"Authenticating User\");\n\n        String sql = \"SELECT userName, password FROM tblofficers WHERE userName = :userName AND password = :password \";\n\n        //code for parameters : userName and password using login.getPassword() and login.getUsername()\n        //and code to get vaules out from query for comparison\n\n\n        if (dbUserName == login.getUserName()) {\n\n            if (dbPassword == login.getPassword()){\n                return true;\n            }\n        }\n\n        return false;\n\n    }\n\n\n    public static class LoginMapper implements ParameterizedRowMapper&lt;Login&gt;{\n\n         public Login mapRow(ResultSet rs, int rowNum) throws SQLException {\n                Login dbLogin = new Login();\n                dbLogin.setUserName(rs.getString(\"userName\"));\n                dbLogin.setPassword(rs.getString(\"password\"));\n                return dbLogin;\n            }       \n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","inheritance"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13195284,"title":"Calling method from abstract class","body":"<p>I have the following abstract class</p>\n\n<pre><code>public abstract class ReturnAgentFromTab extends BasePage{\n\n    @Persist(\"session\")\n    public abstract Agent getAgent();\n    public abstract void setAgent(Agent agent);\n\n    @InjectObject(\"spring:agentApplicationModeResolver\")\n    public abstract AgentApplicationModeResolver getAgentApplicationModeResolver();\n\n    .... more @InjectObject()\n\n    public void nextPage(IRequestCycle cycle) {\n\n        setApplicationModeUsingAgentStatus(getAgent());\n\n        AgentSearchNavigationManager navManager = getAgentSearchNavigationManagerFactory().getAgentSearchNavigationManager();\n        FlowStage stage = getFlowStage();\n        if (stage == null) {\n            setApplicationModeUsingAgentStatus(getAgent());\n            stage = getUserDefaultFlowStageService().getDefaultFlowStage(UserHolder.getUser(), getVisitClass().getApplicationMode());\n        }\n\n        Class nextPageClass = navManager.getNextPage(getUserDefaultFlowStageService());\n\n        String nextPageQualifier = getUserDefaultFlowStageService().getPageQualifier(getAgent(), nextPageClass, getVisitClass().getApplicationMode());\n        IPage nextPage = getPageUtils().getPage(nextPageClass, nextPageQualifier);\n        if ((getFlowStage() instanceof PSDFlowStage)) {\n            nextPageQualifier = getFlowStage().getValue();\n        }\n        nextPage = getPageUtils().getPage(nextPageClass, nextPageQualifier);\n        if (navManager instanceof NameBasedAgentSearchNavigationManager &amp;&amp; nextPageClass != SignOffStatusPage.class) {\n            NameBasedAgentSearchNavigationManager nameBasedNavManager = (NameBasedAgentSearchNavigationManager) navManager;\n            String nextPageName = nameBasedNavManager.getNextPageName(stage); \n            if (!nextPageName.equals(nextPageClass.getSimpleName())) {\n                nextPage = getPageUtils().getPage(nextPageName, nextPageQualifier);\n            }\n        }\n\n        if (isNextPageActivateAgentGeneral(nextPage)) {\n            initialisePageLink(nextPageClass, nextPage);\n        }\n        ((WuamsBasePage) nextPage).init(getAgent().getAgentId());\n        getPageUtils().navigateTo(nextPage);\n\n    }\n\n    private void setApplicationModeUsingAgentStatus(Agent agent) {\n        getVisitClass().setApplicationMode(getHomeLinksFactory().getRegionHomeLinksService().getApplicationMode(agent));\n    }\n\n    private boolean isNextPageActivateAgentGeneral(IPage nextPage) {\n        return nextPage instanceof ActiveAgentGeneralPage;\n    }\n\n    private void initialisePageLink(Class nextPageClass, IPage nextPage) {\n        if (getVisitClass().getPageLink() == null) {\n            getVisitClass().setPageLink(PageLinkUtil.getPageLinkMessageKeyFromPageClass(nextPageClass, \n                    getUserDefaultFlowStageService().getDefaultFlowStage(UserHolder.getUser(), getVisitClass().getApplicationMode()).getValue()));\n        }\n    }\n\n}\n</code></pre>\n\n<p>What I want to do is call my <code>nextPage(cycle)</code> from another class that is abstract and extends <code>ReturnAgentFromTab</code>, but when I try </p>\n\n<pre><code>public abstract class DoSomethingWithAgent extends ReturnAgentFromTab {\n\n@Persist(\"session\")\npublic abstract ReturnAgentFromTab getReturnAgentFromTab();\npublic abstract void setReturnAgentFromTab(ReturnAgentFromTab returnAgentFromTab);\n....\ngetReturnAgentFromTab().nextPage(cycle);\n</code></pre>\n\n<p>I get a null pointer exception, I know this is because I am not actually setting ReturnAgentFromTab anywhere but I do not understand how to set it using abstract classes. Can anybody help?</p>\n\n<p>If ye need more code just ask</p>\n"},{"tags":["java","spring","mongodb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":194,"score":1,"question_id":11046105,"title":"Iterate over large collection in MongoDB via spring-data","body":"<p>Friends!</p>\n\n<p>I am using MongoDB in java project via spring-data. I use Repository interfaces to access data in collections. For some processing I need to iterate over all elements of collection. I can use fetchAll method of repository, but it always return ArrayList.</p>\n\n<p>However, it is supposed that one of collections would be large - up to 1 million records several kilobytes each at least. I suppose I should not use fetchAll in such cases, but I could not find neither convenient methods returning some iterator (which may allow collection to be fetched partially), nor convenient methods with callbacks.</p>\n\n<p>I've seen only support for retrieving such collections in pages. I wonder whether it is the only way for working with such collections?</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13194779,"title":"Reading Enviornment variables in Spring application context","body":"<p>I have three enviornment variables.\nMY_TOPIC\nMY_CONTEXT_FACTORY\nMY_LDAP</p>\n\n<p>First one - MY_TOPIC works like this</p>\n\n<pre><code>&lt;bean id=\"myPublishTopic\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiTemplate\"&gt;\n            &lt;ref bean=\"jndiTemplate\"/&gt;\n        &lt;/property&gt;\n        &lt;property name=\"jndiName\"&gt;\n            &lt;value&gt;fxClientDestinationUID=${MY_TOPIC}&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt; \n</code></pre>\n\n<p>Last two does not work reading from enviornment variables. How do it make this work?</p>\n\n<pre><code>&lt;bean id=\"jndiTemplate\" class=\"org.springframework.jndi.JndiTemplate\"&gt;\n        &lt;property name=\"environment\"&gt;\n         &lt;props&gt;\n            &lt;prop key=\"java.naming.factory.initial\"&gt;${MY_CONTEXT_FACTORY}&lt;/prop&gt;\n            &lt;prop key=\"java.naming.provider.url\"&gt;${MY_LDAP}&lt;/prop&gt;\n         &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt; \n</code></pre>\n\n<p>Last two works only if i read it from properties file which i want to avoid.</p>\n\n<pre><code>&lt;bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"location\"&gt;&lt;value&gt;/WEB-INF/classes/springConfig-devel.properties&lt;/value&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n"},{"tags":["spring","maven-2","configuration","servlets","war"],"answer_count":2,"favorite_count":7,"up_vote_count":5,"down_vote_count":0,"view_count":1967,"score":5,"question_id":3703389,"title":"Where do Spring bean configuration files go in a Maven WAR module?","body":"<p>I've looked at a bunch of sample projects and I can't seem to tease out a common best practice.  I've seen Spring bean config files sometimes go in the <code>src/main/webapp/WEB-INF</code> directory.  I've seen this in conjunction with with a Servlet definition in <code>web.xml</code> like this:</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;my-stuff&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/my-stuff-servlet.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n</code></pre>\n\n<p>But I've also seen bean config files included within <code>web.xml</code> top level -- i.e. outside of a Servlet.  What does this mean?  Is this for cross-Servlet beans?  Sometimes it's in the <code>src/main/webapp/WEB-INF</code> directory and sometimes it's in <code>src/main/resources</code>.   Also I've seen other bean config files defined in WAR modules with just about everything in <code>src/main/resources</code>.</p>\n\n<p>I've read and re-read the Spring documentation, but the only convention I found is that by default a Servlet context config file should be in the <code>src/main/webapp/WEB-INF</code> directory named <code>{servlet-name}-servlet.xml</code>.</p>\n\n<p>So what's the best practice and why?</p>\n"},{"tags":["java","spring","caching"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13178723,"title":"Spring Cache Abstraction with multi-value queries","body":"<p>Does Spring Cache abstraction support multi-value queries?</p>\n\n<p>Instead of:</p>\n\n<p>@Cacheable(\"books\")\npublic Book findBook(ISBN isbn) {...}</p>\n\n<p>Imagine a query that goes like this:</p>\n\n<p>@Cacheable(\"books\")\npublic List&lt; Book > findBook(List&lt; ISBN > isbns) {...}</p>\n\n<p>Is this supported? Will it individually cache each book returned in the collection?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","scheduled-tasks"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13194264,"title":"Scheduled Annotation not working without component scan","body":"<p>I am using Spring's task executor to schedule a method at regular interval.</p>\n\n<pre><code>public class ABC{\n    @Scheduled(fixedDelay=100000)\n    public void test(){\n    }\n}\n</code></pre>\n\n<p>It doesn't work with simple bean declaration for the class ABC.</p>\n\n<pre><code>&lt;bean id=\"abc\" class=\"com.test.ABC\" /&gt;\n</code></pre>\n\n<p>If I put component scan then it works fine.</p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.test\"/&gt;\n&lt;context:annotation-config/&gt;\n</code></pre>\n\n<p>What could be the reason?</p>\n\n<p>I think, both should work fine as Component scan is just an alternative for defining individual bean. might be something wrong from my side. </p>\n\n<p>Let me know if my thoughts are not correct.</p>\n\n<p>Thanks,</p>\n"},{"tags":["java","spring","spring-mvc","mapping","url-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":168,"score":1,"question_id":12202302,"title":"Map / (root URL) in Spring MVC","body":"<p>This is something that I think should be very easy, but so far I have not been able to get it to work.</p>\n\n<p>What I want to do is map my root path to a Spring MVC Controller. With a normal <code>Servlet</code>, I would just add a mapping for \"<code>/</code>\" in my <code>web.xml</code>, and it would pick it up quite well. But with Spring MVC, not so much.</p>\n\n<p>I have tried many combinations, but none seem to work. I think the following one should work.</p>\n\n<p>In <code>web.xml</code>:</p>\n\n<pre><code>&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;myDispatcherServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>In my <code>contextConfigLocation</code> file:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping\"&gt;\n    &lt;property name=\"alwaysUseFullPath\" value=\"true\"/&gt;\n    &lt;property name=\"mappings\"&gt;\n        &lt;util:map&gt;\n            &lt;entry key=\"/\" value-ref=\"rootController\"/&gt;\n        &lt;/util:map&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"rootController\" class=\"my.package.RootController\"&gt;\n</code></pre>\n\n<p>Then obviously, there is the case of the controller itself. I have no clue how to map the method to the actual root path. My attempt is something like this:</p>\n\n<pre><code>public class RootController extends MultiActionController {\n\n    @RequestMapping(\"/\")\n    public ModelAndView display(HttpServletRequest request, HttpServletResponse response) throws Exception {\n\n        final Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\n        model.put(\"someVariable\", \"Hello, MVC world.\");\n        return new ModelAndView(\"rootPage\", model);\n    }\n}\n</code></pre>\n\n<p>So let's say my application runs on <code>http://localhost:8080/app/</code>, I want that exact URL to execute the method <code>display</code>. I do not want to type anything after <code>/app/</code>. In fact, some things after <code>/app/</code> are mapped to other controllers, and that all works fine (and they have to keep working).</p>\n\n<p>What am I missing here? Why is this not simply working? If I use the same <code>url-pattern</code> to map to a plain <code>Servlet</code> instance, it works fine and I reach the <code>doGet</code> method, but with Spring MVC I seem to missing some particular black magic to get this to work.</p>\n"},{"tags":["spring","hibernate","struts2","testng","hsqldb"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13193171,"title":"For test suite, replacing MYSQL by in memory HSQLDB is not working","body":"<p>We have an application where we use Struts, Spring, and hibernate.\nPreviously, we were using mysql databse for running test suites using testng framework.\nNow we want to use “in memory” database of HSQLDB. \nWe have made all the required code changes to use HSQLDB in “in memory” mode.</p>\n\n<p>For ex.</p>\n\n<p>Datasource url = jdbc:hsql:mem:TEST_DB</p>\n\n<p>Username = sa</p>\n\n<p>Password =</p>\n\n<p>Driver = org.hsqldb.jdbcDriver</p>\n\n<p>Hibernate dialect= org.hibernate.dialect.HSQLDialect</p>\n\n<p>Hibernate.hbm2ddl.aoto = create</p>\n\n<pre><code>   @Autowired\nprivate DriverManagerDataSource dataSource;\nprivate static Connection dbConnection;\nprivate static IDatabaseConnection dbUnitConnection;\nprivate static IDataSet dataSet;\nprivate MockeryHelper mockeryHelper;\n\n    public void startUp() throws Exception {\nmockeryHelper = new MockeryHelper();\n        if (dbConnection == null) {\n            dbConnection = dataSource.getConnection();\n            dbUnitConnection = new DatabaseConnection(dbConnection);\n            dbUnitConnection.getConfig().setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY, new HsqldbDataTypeFactory());\n            dataSet = new XmlDataSet(new FileInputStream(\"src/test/resources/test-data.xml\"));\n        }\n        DatabaseOperation.CLEAN_INSERT.execute(dbUnitConnection, dataSet);\n}\n</code></pre>\n\n<p>We have done required code changes to our base class where we do startup and teardown of database before and after each test.\nWe use test-data.xml file from where we insert test data to created database using testng framework.  Now my questions  are</p>\n\n<p>1.when I run  test case, database gets created and data is also inserted correctly. However, my respective daos return empty object list when I try to retrieve them from interceptors of struts.</p>\n\n<p>2.We use HSQLDB version 1.8.0.10. Same configurations are made for other project. In that project, most of the test cases are running with success, however for some of them sorting order of data is incorrect.\nWe discovered that HSQLDB is case sensitive for sorting. And there is one property sql.ignore_case, when set to true, sorting becomes case insensitive. But this is not working for us.\nCan someone please help in this?\n Thanks in adavance. </p>\n"},{"tags":["java","xml","spring","xml-schema"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13192713,"title":"Taking more time to load the spring-*.xsd files from classpath with no internet","body":"<p>Initially i had my header for appcontext.xml as below.</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \nxmlns:util=\"http://www.springframework.org/schema/util\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans \nhttp://www.springframework.org/schema/beans/spring-beans-3.1.xsd\nhttp://www.springframework.org/schema/context \nhttp://www.springframework.org/schema/context/spring-context-3.1.xsd\nhttp://www.springframework.org/schema/util \nhttp://www.springframework.org/schema/util/spring-util-3.1.xsd\"&gt;\n</code></pre>\n\n<p>This doesnt work if there is no internet connection. Hence changed the above xsi:schemaLocation as below</p>\n\n<pre><code>  xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n  classpath:/org/springframework/beans/factory/xml/spring-beans-3.1.xsd\n   http://www.springframework.org/schema/context\n   classpath:/org/springframework/context/config/spring-context-3.1.xsd\n   http://www.springframework.org/schema/util\n    classpath:/org/springframework/beans/factory/xml/spring-util-3.1.xsd\"\n</code></pre>\n\n<p>The above approach takes a long time to load the xsd files and run the application. </p>\n\n<p>Is there any other approach to minimise the time taken to load.I see that classpath:/.. is the only option to load xsd when there is no internet connection. Can someone help me on this.</p>\n"},{"tags":["java","spring","dao"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13192651,"title":"Remove child row only","body":"<p>I have contact table. Having staff as OneToOne relation, So staff has StaffId and ContactId. When I am trying to delete staff (staffDAO.remove(staff)), it does nothing. Here are the declaration I mentioned in both Staff.java and Contact.java. Please help.</p>\n\n<p>Contact.java</p>\n\n<pre><code>@OneToOne( cascade = {CascadeType.ALL }, mappedBy = \"contact\")\nprivate Staff staff;\n</code></pre>\n\n<p>Staff.java</p>\n\n<pre><code>@OneToOne\n@JoinColumn(name = \"contact_id\", nullable = false)\nprivate Contact contact;\n</code></pre>\n\n<p>Thanks,\nOm</p>\n"},{"tags":["spring","transactions","hibernate-session"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13188881,"title":"How to understand PROPAGATION_REQUIRED","body":"<p>I still don't understand the following:</p>\n\n<pre><code>method xxx{\n    Teacher t=dao.get(new Teacher(1));\n    t.setName(\"mark\"); \n\n    finder.find(Teacher.class,null,null,null);\n\n    dao.getSf().getCurrentSession().evict(t);               \n\n    t.setName(\"ff\"); \n    return t;\n}\n</code></pre>\n\n<p>Both <code>xxx</code> and <code>finder.find</code> are under tx control and propagation is required, but I found that only the first modify commits to the db. When I remove the <code>find</code> method, none of the modifies are committed. Why is this?</p>\n\n<p>Ok, here is my code:</p>\n\n<pre><code>public List&lt;T&gt; find(Class&lt;T&gt; bean, Map&lt;String, Object&gt; param,Pageable pg,Sortable od) {\n    //from Questionair t where 1=1\n    String hql=\"from \"+this.getBeanName(bean)+\" \"+this.allias+\" where 1=1 \"+this.getWhereCourse(param)+\" \";\n    if(od!=null &amp;&amp; od.getDir()!=null &amp;&amp; od.getSort()!=null){\n        hql+=\"order by \"+this.allias+\".\"+od.getSort()+\" \"+od.getDir();\n    }\n    //开始查询\n    Session s=sf.getCurrentSession();\n    Query q=sf.getCurrentSession().createQuery(hql);\n    if(pg!=null){\n        q.setFirstResult(pg.getStart());\n        q.setMaxResults(pg.getStart()+pg.getLimit());\n    }\n    System.out.println(q);\n    return q.list();\n}\n</code></pre>\n\n<p>And xxx method in QuestionairService:</p>\n\n<pre><code>    try{\n        Teacher t=dao.get(new Teacher(1));\n        t.setName(\"mark\"); \n\n        //-------------\n        System.out.println(\"加入finder\");\n        finder.find(Teacher.class,null,null,null);\n\n        //-------------\n        System.out.println(\"加入evict\");\n        dao.getSf().getCurrentSession().evict(t);\n\n\n        t.setName(\"ff\"); \n        return t;\n    }\n</code></pre>\n\n<p>And here is my configuration</p>\n\n<pre><code>&lt;tx:advice id=\"txAdvice\" transaction-manager=\"tm\"&gt;\n    &lt;tx:attributes&gt;\n        &lt;tx:method name=\"*\" propagation=\"REQUIRED\" /&gt;\n        &lt;!--  &lt;tx:method name=\"find\" propagation=\"REQUIRES_NEW\"/&gt; --&gt;\n    &lt;/tx:attributes&gt;\n&lt;/tx:advice&gt;\n&lt;aop:config&gt;\n    &lt;aop:pointcut id=\"allService\" expression=\"(execution(* com.etc.ssh.service.*.*(..)))\" /&gt;\n    &lt;aop:pointcut id=\"allFinders\" expression=\"(execution(* com.etc.ssh.finder.*.find(..)))\" /&gt;\n    &lt;aop:pointcut id=\"allSession\" expression=\"(execution(* *.getCurrentHttpSession(..)))\" /&gt;\n    &lt;aop:advisor pointcut-ref=\"allService\" advice-ref=\"txAdvice\"/&gt;\n    &lt;aop:advisor pointcut-ref=\"allFinders\" advice-ref=\"txAdvice\"/&gt;\n&lt;/aop:config&gt;\n\n&lt;aop:config proxy-target-class=\"true\"&gt;\n    &lt;aop:advisor pointcut-ref=\"allSession\" advice-ref=\"ssAdvice\"/&gt;\n&lt;/aop:config&gt;\n</code></pre>\n"},{"tags":["spring","spring-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13190504,"title":"Session attribute custom annotation in spring","body":"<p>I am trying to implement the example at <a href=\"http://karthikg.wordpress.com/2009/11/08/learn-to-customize-spring-mvc-controller-method-arguments/\" rel=\"nofollow\">this link</a>.</p>\n\n<p>My requirement is to get the user session from custom annotations.</p>\n\n<p>I have added the following in my <code>servlet.xml</code>.</p>\n\n<pre><code>&lt;bean class=\"org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter\"&gt;     \n   &lt;property name=\"customArgumentResolver\" ref=\"sessionArgResolver\"/&gt;\n&lt;/bean&gt;  \n\n&lt;bean id=\"sessionArgResolver\" class=\"com.simple.util.SessionAttributeAnnotationResolver\"/&gt;\n</code></pre>\n\n<p>Firstly i tried with simple <code>string str</code>. I have included the session variable <code>value(str)</code> using request object in one controller class. So the session contains the <code>string str</code>.</p>\n\n<p>To retrieve the session  i used the above link.</p>\n\n<p>My controller is like this </p>\n\n<pre><code>@RequestMapping(value = \"addproperty\", method = { RequestMethod.GET })\n    public String addPost(@SessionParam(value=\"str\") String str,ModelMap model) {\n\nSystem.out.println(str);//it is giving correct values only..\n\nreturn \"addproperty\";\n}\n</code></pre>\n\n<p>I put <code>system.out.println</code> in my <code>SessionAttributeArgumentResolver</code> class to see how many times it is executing.</p>\n\n<p>when i execute the application, first time it is executing 2 times and when i click everytime it is executing another two times.</p>\n\n<p>So i added the below code to servlet.xml</p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n        &lt;mvc:argument-resolvers&gt;\n            &lt;bean  id=\"sessionArgResolver\" class=\"com.tavant.simple.util.SessionAttributeAnnotationResolver\"/&gt;\n        &lt;/mvc:argument-resolvers&gt;\n    &lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>when i run the application,<code>SessionAttributeArgumentResolver</code> is not executed, when i click the addproperty link(above controller) it is running  2 times and from next time onwards only one time.(why? first time it is running 2 times?)</p>\n\n<p>MY ACTUAL AIM IS TO RETRIEVE THE USER OBJECT FROM THE SESSION.</p>\n\n<p>When i modify the code for User class object it is saying the error.</p>\n\n<p>Arguement type mismatched.</p>\n\n<p>1)How to get the user details from session?</p>\n\n<p>2)can anybody tell the importance of mvc-annotationdriven?</p>\n\n<p>3)<code>http://stackoverflow.com/questions/12393937/spring-mvc-implementation-of-webargumentresolver</code></p>\n\n<p>The answer for the question tells that HandlerMethodArgumentResolver is for spring 3.1. But For my applications the jar files are 3.1 only. what exactly the resolver will do for custom annotations?</p>\n\n<p>i am also getting the basic doubt as what is the meaning of resolver.(In case of mvc-driven tag also argresolvers tag is included)</p>\n"},{"tags":["java","spring","spring-mvc","mapping","friendly-url"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":13184411,"title":"Friendly Url mapping issues - Java Spring","body":"<p>I'm struggling with errors on the web.xml where all the pages are comming up as 404, possibly there is a root path but I can not be sure where its set etc..</p>\n\n<p>This is my current web.xml</p>\n\n<p><code></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" id=\"WebApp_ID\" version=\"2.5\"&gt;\n  &lt;display-name&gt;Spring3MVC&lt;/display-name&gt;\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;\n                  org.springframework.web.servlet.DispatcherServlet\n              &lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p></code></p>\n\n<p>My listener controller is like this</p>\n\n<p><code></p>\n\n<pre><code>/*\n * User\n*/\n@RequestMapping(value={\"/user/{id}\"}, method=RequestMethod.GET)\npublic ModelAndView profileDisplay(\n        HttpServletRequest request, \n        HttpServletResponse response,\n        @RequestParam(value=\"id\", required=false) String id\n) throws UnknownHostException, MongoException {\n    ServiceSerlvet.appendSesssion(request);\n    //get search ALL users\n    BasicDBObject searchQuery = new BasicDBObject();\n        searchQuery.put(\"_id\", new ObjectId(id));\n    List&lt;DBObject&gt; searchResponse = PersonController.searchUsers(searchQuery);      \n\n    //System.out.println(\"response from search user method: \"+searchResponse);\n\n        return new ModelAndView(\"user\", \"people\", searchResponse);\n}\n</code></pre>\n\n<p></code></p>\n\n<p>This is the current error that is coming out. How come its not mapping, how do I go about fixing this?</p>\n\n<p>INFO: Server startup in 5904 ms\n01-Nov-2012 19:40:21 org.springframework.web.servlet.DispatcherServlet noHandlerFound\nWARNING: No mapping found for HTTP request with URI [/springApp21] in DispatcherServlet with name 'spring'\n01-Nov-2012 19:40:22 org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver handleNoSuchRequestHandlingMethod\nWARNING: No matching handler method found for servlet request: path '/user', method 'GET', parameters map['id' -> array['4fa6eddc0234964172522248']]\n01-Nov-2012 19:40:24 org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver handleNoSuchRequestHandlingMethod\nWARNING: No matching handler method found for servlet request: path '/user', method 'GET', parameters map['id' -> array['4fa6eddc0234964172522248']]</p>\n"},{"tags":["java","spring","transactions","spring-security","acl"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":574,"score":0,"question_id":5714046,"title":"JdbcMutableAclService - Transaction must be running","body":"<p>I'm trying to implement spring security acl into a project. After building the main configuration part and creating the according database schema, I'm trying to create some ACEs and let the magic happen. But I'm facing this exception over and over again</p>\n\n<pre><code>java.lang.IllegalArgumentException: Transaction must be running\n    org.springframework.util.Assert.isTrue(Assert.java:65)\n    org.springframework.security.acls.jdbc.JdbcMutableAclService.createOrRetrieveSidPrimaryKey(JdbcMutableAclService.java:219)\n    org.springframework.security.acls.jdbc.JdbcMutableAclService$1.setValues(JdbcMutableAclService.java:136)\n    org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:892)\n    org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:1)\n    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:586)\n    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:614)\n    org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:883)\n    org.springframework.security.acls.jdbc.JdbcMutableAclService.createEntries(JdbcMutableAclService.java:123)\n    org.springframework.security.acls.jdbc.JdbcMutableAclService.updateAcl(JdbcMutableAclService.java:314)\n</code></pre>\n\n<p>My basic configuration parts</p>\n\n<pre><code>&lt;bean id=\"dataSource\"\n    class=\"org.apache.commons.dbcp.BasicDataSource\"\n    destroy-method=\"close\" &gt;\n    &lt;property name=\"driverClassName\" value=\"${core.db.driverClassName}\" /&gt;\n    &lt;property name=\"url\" value=\"${core.db.jdbcUrl}\" /&gt;\n    &lt;property name=\"username\" value=\"${core.db.user}\" /&gt;\n    &lt;property name=\"password\" value=\"${core.db.password}\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"aclCache\"\n    class=\"org.springframework.security.acls.domain.EhCacheBasedAclCache\"&gt;\n    &lt;constructor-arg&gt;\n        &lt;bean class=\"org.springframework.cache.ehcache.EhCacheFactoryBean\"&gt;\n            &lt;property name=\"cacheManager\"&gt;\n                &lt;bean class=\"org.springframework.cache.ehcache.EhCacheManagerFactoryBean\" /&gt;\n            &lt;/property&gt;\n            &lt;property name=\"cacheName\" value=\"aclCache\" /&gt;\n        &lt;/bean&gt;\n    &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"auditLogger\"\n    class=\"org.springframework.security.acls.domain.ConsoleAuditLogger\" /&gt;\n\n&lt;bean id=\"aclAuthorizationStrategy\"\n    class=\"org.springframework.security.acls.domain.AclAuthorizationStrategyImpl\"&gt;\n    &lt;constructor-arg name=\"auths\"&gt;\n        &lt;list&gt;\n            &lt;bean\n                class=\"org.springframework.security.core.authority.GrantedAuthorityImpl\"&gt;\n                &lt;constructor-arg value=\"ACL_ADMIN\" /&gt;\n            &lt;/bean&gt;\n            &lt;bean\n                class=\"org.springframework.security.core.authority.GrantedAuthorityImpl\"&gt;\n                &lt;constructor-arg value=\"ACL_ADMIN\" /&gt;\n            &lt;/bean&gt;\n            &lt;bean\n                class=\"org.springframework.security.core.authority.GrantedAuthorityImpl\"&gt;\n                &lt;constructor-arg value=\"ACL_ADMIN\" /&gt;\n            &lt;/bean&gt;\n        &lt;/list&gt;\n    &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"lookupStrategy\" class=\"org.springframework.security.acls.jdbc.BasicLookupStrategy\"&gt;\n    &lt;constructor-arg name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;constructor-arg name=\"aclCache\" ref=\"aclCache\"/&gt;\n    &lt;constructor-arg name=\"aclAuthorizationStrategy\" ref=\"aclAuthorizationStrategy\"/&gt;\n    &lt;constructor-arg name=\"auditLogger\" ref=\"auditLogger\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"aclService\"\n    class=\"org.springframework.security.acls.jdbc.JdbcMutableAclService\" &gt;\n    &lt;constructor-arg name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;constructor-arg name=\"lookupStrategy\" ref=\"lookupStrategy\" /&gt;\n    &lt;constructor-arg name=\"aclCache\" ref=\"aclCache\" /&gt;\n    &lt;property name=\"sidIdentityQuery\" value=\"SELECT id FROM acl_sid\" /&gt;\n    &lt;property name=\"classIdentityQuery\" value=\"SELECT id FROM acl_class\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"jdbcTransactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"txProxyTemplate\" abstract=\"true\" class=\"org.springframework.transaction.interceptor.TransactionProxyFactoryBean\"&gt; \n    &lt;property name=\"transactionManager\"&gt;&lt;ref local=\"jdbcTransactionManager\"/&gt;&lt;/property&gt; \n    &lt;property name=\"target\"&gt;&lt;ref local=\"aclService\" /&gt;&lt;/property&gt; \n    &lt;property name=\"transactionAttributes\"&gt; \n        &lt;props&gt; \n            &lt;prop key=\"create*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt; \n            &lt;prop key=\"update*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt; \n            &lt;prop key=\"delete*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt; \n        &lt;/props&gt; \n    &lt;/property&gt; \n&lt;/bean&gt;  \n</code></pre>\n\n<p>It seems that I'm missing something because the transaction should be active through the TransactionProxy. </p>\n\n<p>Accessing the service in a controller this way</p>\n\n<pre><code>...\nObjectIdentity oi = new ObjectIdentityImpl(X.class, vm.hashCode());\nSid sid = new PrincipalSid(userDn);\nPermission p = BasePermission.READ;\n\n// Create or update the relevant ACL\nMutableAcl acl = null;\ntry {\n    acl = (MutableAcl) aclService.readAclById(oi);\n} catch (NotFoundException nfe) {\n    acl = aclService.createAcl(oi);\n}\n\n// Now grant some permissions via an access control entry (ACE)\nacl.insertAce(acl.getEntries().size(), p, sid, true);\naclService.updateAcl(acl);\n...\n</code></pre>\n"},{"tags":["spring","apache","proxy","jetty"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12957513,"title":"Reverse proxy with Apache and static content behind application inside of jetty","body":"<p>My applications is spring based and served by jetty. The current setup looks like this.</p>\n\n<p>Apache - > Reverse proxy -> Embedded Jetty -> Application</p>\n\n<p>When I access the app directly (<em>http://127.0.0.1:15000</em>) without reverse proxy the static resources are loaded (css, .js etc) but if I access it through reverse proxy \n(<em>https://127.0.0.1/app/</em>) it doesn't work. </p>\n\n<p>Here are my configs.</p>\n\n<p><strong>apache2.conf</strong></p>\n\n<pre><code>ProxyPass /app/ http://127.0.0.1:15000/\nProxyPassReverse /app/ http://127.0.0.1:15000/\nSSLProxyEngine on \n\nRewriteEngine On\nRewriteRule /app$ /app/ [R]\n</code></pre>\n\n<p><strong>spring-servlet.xml</strong></p>\n\n<pre><code> ...\n &lt;mvc:default-servlet-handler /&gt;\n &lt;mvc:resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n ... \n</code></pre>\n\n<p>I would like that in both ways the static content will be delivered. </p>\n"},{"tags":["java","spring","caching","dependency-injection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13189814,"title":"How can I make the cache name in Spring cache configurable?","body":"<p>We use Spring cache framework for caching, and we'd like to able to support multiple namespaces for caches, such as \"book\", or \"isbn\", with the cache namespaces being configurable, rather than hardcoded in the class, like, instead of having</p>\n\n<pre><code>@Cacheable({ \"book\",\"isbn\"})\npublic Book findBook(ISBN isbn) {...}\n</code></pre>\n\n<p>we want to be able somehow inject the cache name from a properties file, so that the cache name can be dynamically set, like:</p>\n\n<pre><code>@Cacheable({ #cachename1, #cachename2})\npublic Book findBook(ISBN isbn) {...}\n</code></pre>\n\n<p>I'm using SpEL here, but don't know if this is doable at all.</p>\n"},{"tags":["java","sql","spring","db2"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13190249,"title":"JdbcTemplate does not support Parameterized Query 'IN' case? Must by NamedParameterJdbcTemplate?","body":"<p>Aimed at preventing SQL injection attacks, all the SQL Statement code in my project should transformed to Parameterized Query. But I got a problem when the query condition includes a 'IN' case. Like this (Using DB2 database):</p>\n\n<pre><code>String employeeId = 'D2309';\nString name = \"%brady%\";\n\nList&lt;Integer&gt; userRights = new ArrayList&lt;Integer&gt;();\nuserRights.add(1);\nuserRights.add(2);\nuserRights.add(3);\n\nString sql = \"SELECT * FROM T_EMPLOYEE WHERE EMPLOYEE_ID = ? AND NAME LIKE ? \nAND RIGHT IN (?)\";\n\njdbcTemplate.query(sql, new Object[] {employeeId, name, userRights}, new \nEmployeeRowMapper());\n</code></pre>\n\n<p>The above code runs failed with the exception:</p>\n\n<pre><code>org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad \nSQL grammar [SELECT * FROM T_EMPLOYEE WHERE EMPLOYEE_ID = ? AND NAME LIKE ? AND \nRIGHT IN (?)]; nested exception is com.ibm.db2.jcc.am.io: [jcc][1091][10824]\n[3.57.82] .... ERRORCODE=-4461, SQLSTATE=42815\n</code></pre>\n\n<p>The question here is that does not JdbcTemplate support Parameterized Query for IN case? and I know this work can be done by NamedParameterJdbcTemplate, and whether only NamedParameterJdbcTemplate can do IN case query?</p>\n\n<p>Thanks a lot.</p>\n"},{"tags":["spring","hibernate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13190315,"title":"In Spring, why needn't we begin a transaction before a session.createQuery method call?","body":"<p>I have read this thread:<a href=\"https://forum.hibernate.org/viewtopic.php?f=1&amp;t=987460\" rel=\"nofollow\">Why to start DB transaction for createCriteria/createQuery</a>, <br/>\nthen I understand why we need to begin a transaction. <br/>\nbut now, I found that, we don't needs to do that in spring... <br/></p>\n\n<p>Then why is this?</p>\n"},{"tags":["spring","jsf-2","primefaces","pagination","nullpointerexception"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13072491,"title":"Exception while implementing LazyModel for primefaces datalist","body":"<p>I am trying to implement the lazy loading model for the primefaces datalist similar to datatable as shown <a href=\"http://www.primefaces.org/showcase/ui/datatableLazy.jsf\" rel=\"nofollow\">here</a>.</p>\n\n<p>My initial code with the normal AJAX pagination feature works absolutely fine. However, when I try using the lazy loading model, I get the exception below when the page loads :</p>\n\n<pre><code>com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException\nSEVERE: Error Rendering View[/pages/index.xhtml]\njava.io.NotSerializableException: java.util.ArrayList$SubList\n    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)\n    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)\n    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)\n    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)\n    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)\n    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)\n    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)\n    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)\n    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)\n    at java.util.HashMap.writeObject(HashMap.java:1100)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)\n    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)\n    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)\n    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)\n    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)\n    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)\n    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)\n    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)\n    at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)\n    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)\n    at java.util.HashMap.writeObject(HashMap.java:1100)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)\n    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)\n    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)\n    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)\n    at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:325)\n    at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:173)\n    at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)\n    at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)\n    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)\n    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:418)\n    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)\n    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)\n    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)\n    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)\n    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n    at java.lang.Thread.run(Thread.java:722)\n</code></pre>\n\n<p>Here's the code of <strong>index.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \n    \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"\n   xmlns:ui=\"http://java.sun.com/jsf/facelets\"\n   xmlns:h=\"http://java.sun.com/jsf/html\"\n   xmlns:f=\"http://java.sun.com/jsf/core\"\n   xmlns:p=\"http://primefaces.org/ui\"&gt;\n\n&lt;ui:composition template=\"/pages/templates/template.xhtml\"&gt;\n   &lt;ui:define name=\"content\"&gt;\n\n      &lt;h:form prependId=\"false\" id=\"form\"&gt;\n         &lt;p:dataList value=\"#{movies.lazyMovieModel}\" var=\"movie\" id=\"movies\" paginator=\"true\" rows=\"10\"\n            paginatorTemplate=\"{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}\"\n            type=\"none\" paginatorAlwaysVisible=\"false\" lazy=\"true\"&gt;\n\n            &lt;h:outputText value=\"#{movie.movieName}, #{movie.releaseYear}\" style=\"margin-left:10px\"&gt;\n            &lt;/h:outputText&gt;\n            &lt;br/&gt;\n         &lt;/p:dataList&gt;\n      &lt;/h:form&gt;\n\n   &lt;/ui:define&gt;\n&lt;/ui:composition&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>MovieListBean.java</strong></p>\n\n<pre><code>import org.primefaces.model.LazyDataModel;\n\nimport com.clixflix.enitities.Movie;\nimport com.clixflix.jsf.extensions.LazyMovieDataModel;\n\n@ManagedBean(name = \"movies\")\n@ViewScoped\npublic class MovieListBean extends BaseBean implements Serializable\n{\n   private static final long serialVersionUID = -5719443344065177588L;\n\n   private LazyDataModel&lt;Movie&gt; lazyMovieModel;\n\n   @PostConstruct\n   public void initialize() {\n      lazyMovieModel = new LazyMovieDataModel();\n   }\n\n   public LazyDataModel&lt;Movie&gt; getLazyMovieModel() \n   {\n      List&lt;Movie&gt; movieList = getServiceLocator().getMovieService().getMovieList();\n      ((LazyMovieDataModel) lazyMovieModel).setMovieList(movieList);\n      return lazyMovieModel;\n   }\n}\n</code></pre>\n\n<p><strong>LazyMovieDataModel.java</strong> (LazyModel implementation)</p>\n\n<pre><code>public class LazyMovieDataModel extends LazyDataModel&lt;Movie&gt;\n{\n   private static final long serialVersionUID = 8745562148994455749L;\n\n   private List&lt;Movie&gt; movieList;\n\n   public LazyMovieDataModel() {\n      this.movieList = Collections.emptyList();\n   }\n\n   @Override\n   public List&lt;Movie&gt; load(int first, int pageSize, String sortField, SortOrder sortOrder, Map&lt;String, String&gt; filters) {\n      // Sorting\n      if (null != sortField) {\n         LazySorter sorter = new LazySorter(sortField, sortOrder);\n         Collections.sort(movieList, sorter);\n         sorter = null;\n      }\n\n      // RowCount\n      int rowCount = movieList.size();\n      this.setRowCount(rowCount);\n\n      // Pagination\n      if (rowCount &gt; pageSize) {\n         return movieList.subList(first, (first + pageSize));\n      }\n      else {\n         return movieList;\n      }\n   }\n\n\n   private class LazySorter implements Comparator&lt;Movie&gt;\n   {\n      private String sortField;\n\n      private SortOrder sortOrder;\n\n      LazySorter(String sortField, SortOrder sortOrder) {\n         this.sortField = sortField;\n         this.sortOrder = sortOrder;\n      }\n\n      @SuppressWarnings(\"unchecked\")\n      @Override\n      public int compare(Movie movie1, Movie movie2) {\n         Object value1 = null, value2 = null;\n\n         try {\n            value1 = Movie.class.getField(this.sortField).get(movie1);\n            value2 = Movie.class.getField(this.sortField).get(movie2);\n\n            int value = ((Comparable&lt;Object&gt;) value1).compareTo(value2);\n            return SortOrder.ASCENDING.equals(sortOrder) ? value : -1 * value;\n         }\n         catch (IllegalArgumentException | IllegalAccessException | NoSuchFieldException | SecurityException e) {\n            e.printStackTrace();\n            return 0;\n         }\n      }\n   }\n\n   public void setMovieList(List&lt;Movie&gt; movieList) {\n      this.movieList = movieList;\n   }\n}\n</code></pre>\n\n<p>I am assuming the exception is at this line:</p>\n\n<pre><code>return movieList.subList(first, (first + pageSize));\n</code></pre>\n\n<p>Could anyone please guide me as to what am I missing?</p>\n\n<p>Also, I observe in the logs, that when I use the lazymodel, the DB gets queried <strong>three times</strong> but when I use the normal AJAX pagination, the DB is queried <strong>only once</strong> :|</p>\n\n<hr>\n\n<p><strong>UPDATE</strong>: I figured out the reason for the DB being queried 3 times. It was because I was calling my service in the getter of the LazyModel instead of only in the load method.</p>\n\n<p>I made the following changes in the classes:</p>\n\n<p><strong>LazyMovieDataModel.java</strong></p>\n\n<pre><code>public class LazyMovieDataModel extends LazyDataModel&lt;Movie&gt;\n{\n   private static final long serialVersionUID = 8745562148994455749L;\n\n   public LazyMovieDataModel() {}\n\n   @Override\n   public List&lt;Movie&gt; load(int first, int pageSize, String sortField, SortOrder sortOrder, Map&lt;String, String&gt; filters) {\n\n      List&lt;Movie&gt; movieList = getServiceLocator().getMovieService().getMovieList(first, (first + pageSize));\n\n      // RowCount\n      int rowCount = ((Number)getServiceLocator().getMovieService().getMovieCount()).intValue();\n      this.setRowCount(rowCount);\n   }\n}\n</code></pre>\n\n<p><strong>LazyModel getter in MovieListBean.java</strong></p>\n\n<pre><code>/* Removed PostConstruct init method */\n\npublic LazyDataModel&lt;Movie&gt; getLazyMovieModel() \n{\n   return lazyMovieModel;\n}\n</code></pre>\n\n<p>The above changes work fine on the initial page load. However, when I hit the next page button (or any pagination button) I get an NPE for <code>getServiceLocator()</code> in the load method.</p>\n\n<p>The serviceLocator is a <code>protected</code> access modified managed property inherited from BaseBean and injected using Spring.</p>\n\n<p>Any reason why the getter returns null on subsequent invokes ???</p>\n"},{"tags":["java","sql","spring","db2"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13189051,"title":"How to handle 'IN' case in SQL Statement with the way of Parameterized Query?","body":"<p>To avoid SQL injection attacks in my project, I'm attempting access database with Parameterized Query way. Right now I know how to handle equal case like below (With Spring JdbcTemplate):</p>\n\n<pre><code>String sql = \"SELECT * FROM T_USER WHERE USERNAME = ? AND PASSWORD = ?\"\njdbcTemplate.query(sql, \n                   new UserRowMapper(), \n                   new Object[]{\"%admin%\", \"%password%\"});\n</code></pre>\n\n<p>Above code runs no problem, but I had no idea how to handle the 'IN' case, following is my case, and it works failed:</p>\n\n<pre><code>String sql = \n   \"SELECT * FROM T_USER WHERE USERNAME = ? AND PASSWORD = ? AND CLASS_ID IN (?)\"\njdbcTemplate.query(sql, \n                   new UserRowMapper(), \n                   new Object[]{\"%admin%\", \"%password%\", \"1,2,3\"});\n</code></pre>\n\n<p>Anybody give me guidance? Thanks a lot.</p>\n"},{"tags":["java","spring","spring-security"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2524,"score":0,"question_id":8808207,"title":"j_spring_security_check 404 issue","body":"<p>I am trying to get my spring + hibernate + spring-security and tiles2 - \"HelloWorld\" application to work, following <a href=\"http://www.yves-hoppe.de/java/82-spring-3-mvc-advanced-example?showall=1\" rel=\"nofollow\">this guide</a> (its in german unfortunately).</p>\n\n<p>My problem is that I get a \"404\" error message when logging into my application. Redirection to the login page works as intended, but I can't reach \"http://localhost:8080/App/j_spring_security_check\" when I hit the login button.</p>\n\n<p>My web.xml looks this way:</p>\n\n<pre><code>&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;\n        /WEB-INF/defs/applicationContext.xml\n        /WEB-INF/defs/applicationContext-security.xml\n    &lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;filter&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n  &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt; \n  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.security.web.session.HttpSessionEventPublisher&lt;/listener-class&gt;\n&lt;/listener&gt;\n</code></pre>\n\n<p>and applicationContext-security.xml file looks this way ...</p>\n\n<pre><code>&lt;http use-expressions=\"true\"&gt;\n    &lt;intercept-url pattern=\"/index.html\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/timeout.html\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/redirect.html\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/media/**\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/includes/**\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/office/**\" access=\"hasRole('ROLE_USER')\" /&gt;\n    &lt;intercept-url pattern=\"/office/admin/**\" access=\"hasRole('ROLE_ADMIN')\" /&gt;\n\n    &lt;form-login login-page=\"/index.html\" \n            authentication-failure-url=\"/index.html?login_error=1\"\n            default-target-url='/office/kunden.html'\n            always-use-default-target='true'\n            /&gt;\n    &lt;logout logout-success-url=\"/index.html\" /&gt;\n    &lt;remember-me /&gt;\n    &lt;session-management invalid-session-url=\"/index.html\"&gt;\n        &lt;concurrency-control max-sessions=\"2\" error-if-maximum-exceeded=\"true\" /&gt;\n    &lt;/session-management&gt;\n&lt;/http&gt;\n\n&lt;authentication-manager&gt;\n    &lt;authentication-provider&gt;\n        &lt;jdbc-user-service data-source-ref=\"mysqldataSource\" \n                    authorities-by-username-query=\"select username, authority from benutzer where username = ?\"\n                    users-by-username-query=\"select username, password, enabled from benutzer where username = ?\"/&gt;\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p>The database connection seems to be O.K.</p>\n\n<p>I would be very glad if someone could give me a hint on that, because I already did a lot of googling, but didn't find a solution yet.</p>\n\n<p>I use spring 3.1 and tomcat 7.0.23</p>\n"},{"tags":["java","spring","concurrency","jms","messaging"],"answer_count":5,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":3412,"score":5,"question_id":3088814,"title":"How can I handle multiple messages concurrently from a JMS topic (not queue) with java and spring 3.0?","body":"<p>Note that I'd like multiple message listeners to handle successive messages from the topic concurrently.  In addition I'd like each message listener to operate transactionally so that a processing failure in a given message listener would result in that listener's message remaining on the topic.</p>\n\n<p>The spring DefaultMessageListenerContainer seems to support concurrency for JMS queues only.</p>\n\n<p>Do I need to instantiate multiple DefaultMessageListenerContainers?</p>\n\n<p>If time flows down the vertical axis:</p>\n\n<pre><code>ListenerA reads msg 1        ListenerB reads msg 2        ListenerC reads msg 3\nListenerA reads msg 4        ListenerB reads msg 5        ListenerC reads msg 6\nListenerA reads msg 7        ListenerB reads msg 8        ListenerC reads msg 9\nListenerA reads msg 10       ListenerB reads msg 11       ListenerC reads msg 12\n...\n</code></pre>\n\n<p><strong>UPDATE:</strong><br>\n<em>Thanks for your feedback @T.Rob and @skaffman.</em>  </p>\n\n<p>What I ended up doing is creating multiple <code>DefaultMessageListenerContainers</code> with <code>concurrency=1</code> and then putting logic in the message listener so that only one thread would process a given message id.</p>\n"},{"tags":["android","spring","android-annotations"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13182519,"title":"Spring Rest Template usage causes EOFException","body":"<p>I'm receiving <code>java.io.EOFException</code>'s when using Spring REST template on Android.</p>\n\n<p>The stacktrace cause reads like this:</p>\n\n<pre><code>Caused by: java.io.EOFException\nat libcore.io.Streams.readAsciiLine(Streams.java:203)\nat libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:560)\nat libcore.net.http.HttpEngine.readResponse(HttpEngine.java:813)\nat libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)\nat libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:486)\nat org.springframework.http.client.SimpleClientHttpResponse.getRawStatusCode(SimpleClientHttpResponse.java:49)\nat org.springframework.http.client.SimpleClientHttpResponse.getStatusCode(SimpleClientHttpResponse.java:55)\nat org.springframework.http.client.BufferingClientHttpResponseWrapper.getStatusCode(BufferingClientHttpResponseWrapper.java:47)\nat com.company.util.LoggingClientHttpRequestInterceptor.intercept(LoggingClientHttpRequestInterceptor.java:33)\nat org.springframework.http.client.InterceptingClientHttpRequest$RequestExecution.execute(InterceptingClientHttpRequest.java:81)\nat com.company.api.interceptor.AuthTokenInterceptor.intercept(AuthTokenInterceptor.java:51)\nat org.springframework.http.client.InterceptingClientHttpRequest$RequestExecution.execute(InterceptingClientHttpRequest.java:81)\nat org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:67)\nat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:46)\nat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:63)\nat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:475)\n... 14 more\n</code></pre>\n\n<p>Another similar stacktrace:</p>\n\n<pre><code>org.springframework.web.client.ResourceAccessException: I/O error: null; nested exception is java.io.EOFException\nat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:490)\nat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:438)\nat org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:414)\nat com.company.api.ApiClient_.logLoginAttempt(ApiClient_.java:299)\nat com.company.security.CompanyAuthenticationService$2.onCreateCall(CompanyAuthenticationService.java:206)\nat com.company.api.SafeApiCall.doInBackground(SafeApiCall.java:49)\nat com.company.api.SafeApiCall.doInBackground(SafeApiCall.java:22)\nat android.os.AsyncTask$2.call(AsyncTask.java:287)\nat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)\nat java.util.concurrent.FutureTask.run(FutureTask.java:137)\nat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)\nat java.lang.Thread.run(Thread.java:856)\nCaused by: java.io.EOFException\nat libcore.io.Streams.readAsciiLine(Streams.java:203)\nat libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:560)\nat libcore.net.http.HttpEngine.readResponse(HttpEngine.java:813)\nat libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)\nat libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:486)\nat org.springframework.http.client.SimpleClientHttpResponse.getRawStatusCode(SimpleClientHttpResponse.java:49)\nat org.springframework.http.client.SimpleClientHttpResponse.getStatusCode(SimpleClientHttpResponse.java:55)\nat org.springframework.http.client.BufferingClientHttpResponseWrapper.getStatusCode(BufferingClientHttpResponseWrapper.java:47)\nat org.springframework.web.client.DefaultResponseErrorHandler.hasError(DefaultResponseErrorHandler.java:46)\nat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:476)\n... 13 more\n</code></pre>\n\n<p>This is all happening on Android 4.1.2, installed on my Xoom tablet.</p>\n\n<p>The problem appears and disappears. It's not triggered by long requests either. The server part is running on a machine within the local network. When I try to run the API Calls through <code>curl</code>, it works just fine.</p>\n\n<p><strong>AuthTokenInterceptor</strong>:</p>\n\n<pre><code>@Override\npublic ClientHttpResponse intercept(HttpRequest request, byte[] data, ClientHttpRequestExecution execution) throws IOException {\n    HttpHeaders headers = request.getHeaders();\n    if (!StringUtils.isEmpty(mAuthToken)) {\n        headers.add((mIsOAuth ? \"Authorization\" : \"authToken\"), (mIsOAuth ? \"Bearer \" : \"\") + mAuthToken);\n    }\n    return execution.execute(request, data);\n}\n</code></pre>\n\n<p><strong>LoggingClientHttpRequestInterceptor</strong>:</p>\n\n<pre><code>/** {@inheritDoc} */\n@Override\npublic ClientHttpResponse intercept(HttpRequest httpRequest, byte[] bytes, ClientHttpRequestExecution clientHttpRequestExecution) throws IOException {\n    Log.d(TAG, \"To     : \" + httpRequest.getURI());\n    Log.d(TAG, \"Method : \" + httpRequest.getMethod().name());\n    Log.d(TAG, \"Data   : \" + new String(bytes));\n\n    for (Object key : httpRequest.getHeaders().keySet()) {\n        Log.d(TAG, \"Header &lt;\" + key + \"&gt;: \" + httpRequest.getHeaders().get(key));\n    }\n\n    final ClientHttpResponse response = clientHttpRequestExecution.execute(httpRequest, bytes);\n\n    if (response != null) {\n        Log.d(TAG, \"Response: \" + response.getStatusCode());\n        if (response.getBody() != null) {\n            Log.d(TAG, \"Response: \" + convertStreamToString(response.getBody()));\n        }\n    } else {\n        Log.d(TAG, \"Response: \" + response);\n    }\n\n    return response;\n}\n</code></pre>\n\n<p>The Rest Template is configured like this:</p>\n\n<pre><code>final RestTemplate template = new RestTemplate(false);\ntemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());\ntemplate.setRequestFactory(new BufferingClientHttpRequestFactory(template.getRequestFactory()));\nApiUtils.addAuthTokenHeaderToRestTemplate(template, mAuthToken, false);\nApiUtils.addRequestLoggingToRestTemplate(template);\n</code></pre>\n\n<p>The API call in question that crashed here is described in the Android annotations based interface:</p>\n\n<pre><code>@Post(\"/user/memberships\")\n@Accept(MediaType.APPLICATION_JSON)\nCompanyApiResponse saveGroupMembership(UserGroupMembership membership) throws RestClientException;\n</code></pre>\n\n<p>Things I've tried:</p>\n\n<ul>\n<li>Removed LoggingInterceptor</li>\n<li>Called all API calls by CURL</li>\n<li>Removed call BufferingClientHttpRequestFactory - <strong>Helped a little but the error still occurs.</strong></li>\n<li>Tested it on Android 2.3 - <strong>the error cannot be reproduced</strong></li>\n</ul>\n\n<p>I've been reading various forums posts, the EOF exception seems to appear if URLs are incorrect, which I double checked in this case.</p>\n\n<p>Also of note, once the EOF Exception occurs, the call not even reaches the server side.</p>\n\n<p>Where would be a good point to continue the search for a fix? Is this a Android 4.1 inconvenience?</p>\n\n<p>While debugging this issue, I also found <a href=\"https://jira.springsource.org/browse/ANDROID-102\" rel=\"nofollow\">https://jira.springsource.org/browse/ANDROID-102</a> which prevented me from seeing the real error (EOF) before.</p>\n\n<hr>\n\n<p><strong>Update:</strong> Just found <a href=\"http://code.google.com/p/google-http-java-client/issues/detail?id=116\" rel=\"nofollow\">http://code.google.com/p/google-http-java-client/issues/detail?id=116</a> -  it might be related.</p>\n\n<p>The fix is also outlined in <a href=\"https://codereview.appspot.com/6225045/\" rel=\"nofollow\">https://codereview.appspot.com/6225045/</a> - so it might've been merged for 4.1.</p>\n"},{"tags":["spring","jsp","spring-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":3254,"score":1,"question_id":2249888,"title":"How to handle back browser button problem using spring?","body":"<p>How to handle back browser button problem using spring?.</p>\n\n<p>In my application user login properly and when user click on back button page state is not maintained. So do i maintain the page state even the user click on back button / forward button </p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","transactions"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":5906,"score":4,"question_id":2754160,"title":"Question about spring transaction propagation","body":"<p>I have a question about spring transaction propagation. If I use <strong><em>@Transactional(propagation = Propagation.REQUIRED)</em></strong> to annotate a method m1. When execution logic enter m1, if there is already a transaction, m1 will use that one. When after m1, what about the transaction? It ends or still open?(if I call m1 in another method, and after the invocation there is still other things to do).</p>\n\n<p>In summary, I want to know when exiting an annotated method, the transaction ends or still open?</p>\n\n<p>Great thanks.</p>\n"},{"tags":["java","spring","session-variables"],"answer_count":3,"favorite_count":12,"up_vote_count":7,"down_vote_count":0,"view_count":36868,"score":7,"question_id":2227395,"title":"Spring 3.0 set and get session attribute","body":"<p>I want to read a domain object (UserVO) from session scope.</p>\n\n<p>I am setting the UserVO in a controller called WelcomeController</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/welcome.htm\")\npublic class WelcomeController {\n@RequestMapping(method = RequestMethod.POST)\n    public String processSubmit(BindingResult result, SessionStatus status,HttpSession session){\n      User user = loginService.loginUser(loginCredentials);\n     session.setAttribute(\"user\", user);\n         return \"loginSuccess\";\n    }\n}\n</code></pre>\n\n<p>I am able to use the object in jsp pages <code>&lt;h1&gt;${user.userDetails.firstName}&lt;/h1&gt;</code></p>\n\n<p>But I am not able to read the value from another Controller,</p>\n\n<p>I am trying to read the session attribute as follows:</p>\n\n<pre><code>@Controller\npublic class InspectionTypeController {\n@RequestMapping(value=\"/addInspectionType.htm\", method = RequestMethod.POST )\n public String addInspectionType(InspectionType inspectionType, HttpSession session)\n {\n           User user = (User) session.getAttribute(\"user\");\n           System.out.println(\"User: \"+ user.getUserDetails().getFirstName);\n\n        }\n} \n</code></pre>\n"},{"tags":["eclipse","spring","maven-2","jsf"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2412,"score":0,"question_id":3396933,"title":"Eclipse does not deploy jars into WEB-INF/lib directory","body":"<p>To integrate JSF with Spring I have added these lines in <code>web.xml</code>:</p>\n\n<pre><code>&lt;context-param&gt;  \n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n&lt;listener&gt;  \n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n&lt;listener&gt;  \n    &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n</code></pre>\n\n<p>And I have added all the spring dependencies using Maven, but when I run the project I receive the following error messages:</p>\n\n<pre><code>java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener\njava.lang.ClassNotFoundException: org.springframework.web.context.request.RequestContextListener\n</code></pre>\n\n<p>When I took a glance at the folder <code>/WEB-INF/lib</code> I have found no JAR files, although dependencies are declared in the <code>pom.xml</code>.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n    &lt;version&gt;${spring.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I think that the problem that the JAR's are not packaged with the draft.\nDo you have an idea how to fix it?</p>\n"},{"tags":["spring","spring-security"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":1493,"score":7,"question_id":4269686,"title":"Spring Security - need 403 error, not redirect","body":"<p>I am using Spring Security 3.0.4. I have a bunch of web service which are protected by Spring Security. When I access them as an unauthenticated user, Spring Security redirects to login page. Instead of that, I want to return HTTP 403 error. How can I achieve that?</p>\n\n<p>Here is my security config:</p>\n\n<pre><code>&lt;http auto-config=\"false\" use-expressions=\"true\" &gt;\n\n    &lt;intercept-url pattern=\"/authorization.jsp\" access=\"permitAll\"/&gt;\n    &lt;intercept-url pattern=\"/registration.jsp\" access=\"permitAll\"/&gt;\n    &lt;intercept-url pattern=\"/api/authorization/auth\" access=\"permitAll\"/&gt;\n    &lt;intercept-url pattern=\"/api/authorization/new\" access=\"permitAll\"/&gt;\n    &lt;intercept-url pattern=\"/api/accounts/new\" access=\"permitAll\"/&gt;\n    &lt;intercept-url pattern=\"/app/**\" access=\"permitAll\"/&gt;\n    &lt;intercept-url pattern=\"/extjs/**\" access=\"permitAll\"/&gt;\n\n    &lt;intercept-url pattern=\"/**\" access=\"hasRole('ROLE_USER')\" /&gt;\n\n    &lt;form-login login-page=\"/authorization.jsp\"\n            default-target-url=\"/index.jsp\"\n            authentication-failure-url=\"/registration.jsp?login_error=1\"\n            always-use-default-target=\"true\"\n            /&gt;\n\n    &lt;logout logout-success-url=\"/authorization.jsp\"\n            logout-url=\"/j_spring_security_logout\"\n            invalidate-session=\"true\"/&gt;        \n\n&lt;/http&gt;\n</code></pre>\n"},{"tags":["java","web-services","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13186647,"title":"Reinitialize webservice defined as a spring bean","body":"<p>I have a spring bean definition for some external webservices that tend to be unreliable so I can foresee a day where I start up my web application and connectivity to the webservice is unavailable, which would cause the intialization of the spring bean to fail, and consequently cause dependency problems to the other parts of the system that would rely on this bean.</p>\n\n<pre><code>    &lt;bean id=\"services.ext.service\" class=\"org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean\"&gt;\n        &lt;property name=\"serviceInterface\" value=\"com.ext.WebService\"/&gt;\n        &lt;property name=\"wsdlDocumentUrl\" value=\"http://www.somehost.com/ws/blah.wsdl\"/&gt;\n        &lt;property name=\"serviceName\" value=\"Service\"/&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>My question is if there is a way I can setup this bean to be lazy-initialized AND in the event that the bean fails somehow trigger the bean to be re-initialized until it is successful?  Or perhaps theres a better way of setting up the external webservice.</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":11978039,"title":"RetryWithHttpsEntryPoint","body":"<p>I'm having a problem with some of the links on my web application on netbeans. The web app has spring mvc and spring security implemented.</p>\n\n<p>So basically, I have a link on one of the pages</p>\n\n<pre><code>&lt;td colspan=\"2\" align=\"center\"&gt;\n&lt;h3 align=\"#center\"&gt;You can login &lt;a href=\"login.jsp\"&gt;here&lt;/a&gt;.&lt;/h3&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>Then when I click \"here\", I get an error: \"Firefox has detected that the server is redirecting the request for this address in a way that will never complete.\"</p>\n\n<p>The logs are as follows:</p>\n\n<pre><code>14:45:34,255 DEBUG FilterChainProxy:176 - Converted URL to lowercase, from: '/login.jsp'; to: '/login.jsp'\n14:45:34,255 DEBUG FilterChainProxy:183 - Candidate is: '/login.jsp'; pattern is /**; matched=true\n14:45:34,255 DEBUG FilterChainProxy:351 - /login.jsp at position 1 of 13 in additional filter chain; firing Filter: 'org.springframework.security.web.access.channel.ChannelProcessingFilter@a3d369'\n14:45:34,255 DEBUG DefaultFilterInvocationSecurityMetadataSource:178 - Converted URL to lowercase, from: '/login.jsp'; to: '/login.jsp'\n14:45:34,255 DEBUG DefaultFilterInvocationSecurityMetadataSource:196 - Candidate is: '/login.jsp'; pattern is /; matched=false\n14:45:34,255 DEBUG DefaultFilterInvocationSecurityMetadataSource:196 - Candidate is: '/login.jsp'; pattern is /login.jsp*; matched=true\n14:45:34,255 DEBUG ChannelProcessingFilter:101 - Request: FilterInvocation: URL: /login.jsp; ConfigAttributes: [REQUIRES_SECURE_CHANNEL]\n14:45:34,255 DEBUG RetryWithHttpsEntryPoint:65 - Redirecting to: \n14:45:34,271 DEBUG FilterChainProxy:176 - Converted URL to lowercase, from: '/'; to: '/'\n</code></pre>\n\n<p>If you notice, my app loses the url. It was able to match the url but then with the RetryWithHttpsEntryPoint, it's redirected to a blank url.</p>\n\n<p>Any suggestions to fix this? Thanks!</p>\n"},{"tags":["java","hibernate","spring","exception","lazyload"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":6457,"score":1,"question_id":7654818,"title":"org.hibernate.LazyInitializationException: could not initialize proxy - no Session","body":"<p>I have 2 physical servers which my web application hits managed by load balancers. I always get -</p>\n\n<p><strong>org.hibernate.LazyInitializationException: could not initialize proxy - no Session</strong> </p>\n\n<p>when one of the servers are hit while the other one runs smoothly without any problems. I have a local managed cache store enabled and managed by the application. This exception happens only while trying to access one particular column from one table. The rest of the operations work absolutely fine regardless of which server is hit.</p>\n\n<p>Making lazy=false will become a performance issue because the number of rows on that table is quite large. And by the way, we are using get(object) on session instead of load(object).</p>\n"},{"tags":["spring","mongodb","rest","spring-data","http-status-code-406"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13183543,"title":"Spring MVC REST with mongoDB","body":"<p>I use Spring 3.1 with Spring Data mongodb 1.1.2 and I user jackson 1.9.9 for returning JSON to the user.\nI have a Controller with the following mappings.\nBut I get different behavior when doing a request. These are my first tests with mongoDB but I think something is wrong.</p>\n\n<pre><code>@RequestMapping(value = \"/account/{username}\", method = RequestMethod.GET)\n@ResponseBody public Account findAccount(@PathVariable(\"username\") String username) {\n    return accountService.findByUsername(username);  \n}\n\n@RequestMapping(value = \"/account/mongo/{username}\", method = RequestMethod.GET)\n@ResponseBody\npublic MongoAccount mongoAccounts(@PathVariable(\"username\") String username) {\n    return mongoAccountService.findByUsername(username);\n}\n</code></pre>\n\n<p>If I go to <code>/account/myUsername</code> with my browser I get a JSON response as expected.\nIf I go to <code>/account/mongo/myUsername</code> with my browser I get a 406 not acceptable HTTP error.\nBut I when turn on my debugger I can see I try to return a real MongoAccount object in my controller mapping. (as intended...)</p>\n\n<p>Both domain objects are in the same package\nAccount is a class annotated with hibernate end persistence annotations;</p>\n\n<pre><code>@Entity\n@Table(name = \"account\")\npublic class Account extends AbstractEntity {\n    @Id\n    @Column(name = \"username\")\n    private String username;\n</code></pre>\n\n<p>MongoAccount is a class annotated with Spring Data and Spring Data MongoDB annotations:</p>\n\n<pre><code>@Document\npublic class MongoAccount {\n    @Id\n    private String username;\n</code></pre>\n"},{"tags":["java","spring","mapping","friendly-url"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13175786,"title":"Java Sping Friendly Url mapping issues","body":"<p>I've been trying to implement friendly url mapping in my first Java spring site. I've been following this tutorial. <a href=\"http://outbottle.com/spring-3-web-mvc-friendly-url-using-requestmapping-variable-uri/\" rel=\"nofollow\">http://outbottle.com/spring-3-web-mvc-friendly-url-using-requestmapping-variable-uri/</a></p>\n\n<p>My current mapping works well with id's as parameters. localhost:8080/user?id=1312321321</p>\n\n<p><code>\n    /*\n     * User\n    */\n    @RequestMapping(method=RequestMethod.GET, value={\"/user\",\"/user/{id}\"})\n    public ModelAndView profileDisplay(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            @RequestParam(value=\"id\", required=false) String id\n    ) throws UnknownHostException, MongoException {\n        ServiceSerlvet.appendSesssion(request);\n        //get search ALL users\n        BasicDBObject searchQuery = new BasicDBObject();\n            searchQuery.put(\"_id\", new ObjectId(id));\n        List searchResponse = PersonController.searchUsers(searchQuery);</p>\n\n<pre><code>    //System.out.println(\"response from search user method: \"+searchResponse);\n\n    return new ModelAndView(\"user\", \"people\", searchResponse);\n}\n</code></pre>\n\n<p></code></p>\n\n<p>My web xml currently looks like this... its working but is it correct to write out various url mapping like this? I take it the * is a wild card to allow say /user/22222?</p>\n\n<p><code></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \nxmlns=\"http://java.sun.com/xml/ns/javaee\" \nxmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" \nxsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee \nhttp://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" id=\"WebApp_ID\" version=\"2.5\"&gt;\n  &lt;display-name&gt;Spring3MVC&lt;/display-name&gt;\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;\n                  org.springframework.web.servlet.DispatcherServlet\n              &lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\n\n\n    &lt;url-pattern&gt;/gallery/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/galleryupload/*&lt;/url-pattern&gt;\n\n    &lt;url-pattern&gt;/delete/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/edit/*&lt;/url-pattern&gt;\n\n    &lt;url-pattern&gt;/search/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/members/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/profile/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/messages/*&lt;/url-pattern&gt;\n\n    &lt;url-pattern&gt;/index/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/login/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/logout/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/register/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/user/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/jsoninterests/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/jsonlocations/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/jsonmembers/*&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/jsonuniqueuser/*&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p></code></p>\n\n<p>When I try and adapt my code to take just a name like this localhost:8080/user/john</p>\n\n<p>it breaks - but I am unsure how to set the mapping in the web.xml, do I set the mapping like this in web.xml?</p>\n\n<p><code>\n    @RequestMapping(value=\"/user/{id}\", method= RequestMethod.GET)\n            public ModelAndView profileDisplay(\n                    @PathVariable(value=\"id\") String id,\n                    HttpServletRequest request,\n                    HttpServletResponse response\n            ) throws UnknownHostException, MongoException {</p>\n\n<pre><code>    ServiceSerlvet.appendSesssion(request);\n            //get search ALL users\n            BasicDBObject searchQuery = new BasicDBObject();\n                searchQuery.put(\"_id\", new ObjectId(id));\n            List&lt;DBObject&gt; searchResponse = PersonController.searchUsers(searchQuery);\n\n            //System.out.println(\"response from search user method: \"+searchResponse);\n\n            return new ModelAndView(\"user\", \"people\", searchResponse);\n        }\n</code></pre>\n\n<p></code></p>\n"},{"tags":["java","spring","struts2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":13157829,"title":"Struts 2 post parameter from Action A to Action B","body":"<p>I've got a little problem to get a post parameter in a Struts 2 Action.</p>\n\n<p>My first Action loads a list:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.nordakademie.hausarbeit.action;\n\nimport java.util.List;\n\nimport com.opensymphony.xwork2.Action;\n\nimport de.nordakademie.hausarbeit.model.Pruefungsfach;\nimport de.nordakademie.hausarbeit.service.PruefungsfaecherService;\n\npublic class IndexAction implements Action {\n    private PruefungsfaecherService pruefungsfaecherService;\n    private List&lt;Pruefungsfach&gt; pruefungsfaecher;\n\n    public String execute() throws Exception {\n        pruefungsfaecher = pruefungsfaecherService.listPruefungen();\n        return SUCCESS;\n    }\n\n    public List&lt;Pruefungsfach&gt; getPruefungsfaecher() {\n        return pruefungsfaecher;\n    }\n\n    public void setPruefungsfaecherService(PruefungsfaecherService pruefungsfaecherService) {\n        this.pruefungsfaecherService = pruefungsfaecherService;\n    }\n\n}\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>    &lt;%@ page contentType=\"text/html; charset=UTF-8\"%&gt;\n&lt;%@ taglib prefix=\"s\" uri=\"/struts-tags\"%&gt;\n\n&lt;%-- Niels Maseberg --%&gt;\n\n&lt;h2&gt;Übersicht Prüfungsfächer&lt;/h2&gt;\n&lt;s:form&gt;\n    &lt;table cellpadding=\"0\"&gt;\n        &lt;caption&gt;Liste aller Prüfungsfächer inklusive Studienrichtung und Jahrgang&lt;/caption&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;&amp;nbsp;&lt;/th&gt;\n                &lt;th&gt;Studienrichtung&lt;/th&gt;\n                &lt;th&gt;Titel&lt;/th&gt;\n                &lt;th&gt;Jahrgang&lt;/th&gt;\n                &lt;th&gt;Beschreibung&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;s:iterator value=\"pruefungsfaecher\" status=\"rowstatus\"&gt;\n                &lt;s:if test=\"#rowstatus.odd == true\"&gt;\n                    &lt;tr class=\"odd\"&gt;\n                &lt;/s:if&gt;\n                &lt;s:else&gt;\n                    &lt;tr class=\"even\"&gt;\n                &lt;/s:else&gt;\n                    &lt;td class=\"cell_radio\"&gt;&lt;s:radio name=\"selectedPruefungsfachId\" list=\"#{id:''}\" theme=\"simple\"/&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;s:property value=\"manipel.getPk().getStudienrichtung()\"/&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;s:property value=\"titel\"/&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;s:property value=\"manipel.getPk().getJahrgang()\"/&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;s:property value=\"beschreibung\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/s:iterator&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n    &lt;div class=\"buttons\"&gt;\n        &lt;div class=\"button\"&gt;\n            &lt;s:submit value=\"Prüfungen anzeigen\" action=\"pruefungslist\" /&gt;\n        &lt;/div&gt;\n        &lt;div class=\"clear\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/s:form&gt;\n</code></pre>\n\n<p>My second action gets the selectedPruefungsfachId and loads the Pruefungsfach so that I can put a hidden value in the second jsp:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.nordakademie.hausarbeit.action;\n\nimport java.util.List;\n\nimport org.apache.log4j.Logger;\n\nimport com.opensymphony.xwork2.Action;\n\nimport de.nordakademie.hausarbeit.model.Pruefung;\nimport de.nordakademie.hausarbeit.model.Pruefungsfach;\nimport de.nordakademie.hausarbeit.service.PruefungenService;\nimport de.nordakademie.hausarbeit.service.PruefungsfaecherService;\n\npublic class PruefungslistAction implements Action {\n    private PruefungenService pruefungenService;\n    private PruefungsfaecherService pruefungsfaecherService;\n\n    private Long selectedPruefungsfachId;\n    private List&lt;Pruefung&gt; pruefungen;\n    private Pruefungsfach pruefungsfach;\n    private static final Logger logger = Logger.getLogger(PruefungslistAction.class);\n\n    public String execute() throws Exception {\n        if(logger.isDebugEnabled()){\n            logger.debug(\"Pruefungsfach mit der ID '\" + selectedPruefungsfachId + \"' wurde gewählt\");\n        }\n\n        pruefungen = pruefungenService.listPruefungen(selectedPruefungsfachId);\n\n        pruefungsfach = pruefungsfaecherService.getPruefungsfach(selectedPruefungsfachId);\n        if(logger.isDebugEnabled()){\n            logger.debug(\"Pruefungsfach mit der ID '\" + pruefungsfach.getId() + \"' wurde geladen\");\n        }\n\n        return SUCCESS;\n    }\n\n    public Long getSelectedPruefungsfachId() {\n        return selectedPruefungsfachId;\n    }\n\n    public void setSelectedPruefungsfachId(Long selectedPruefungsfachId) {\n        this.selectedPruefungsfachId = selectedPruefungsfachId;\n    }\n\n    public List&lt;Pruefung&gt; getPruefungen() {\n        return pruefungen;\n    }\n\n    public void setPruefungenService(PruefungenService pruefungenService) {\n        this.pruefungenService = pruefungenService;\n    }\n\n    public void setPruefungsfaecherService(\n            PruefungsfaecherService pruefungsfaecherService) {\n        this.pruefungsfaecherService = pruefungsfaecherService;\n    }\n\n    public Pruefungsfach getPruefungsfach() {\n        return pruefungsfach;\n    }\n\n}\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;%@ page contentType=\"text/html; charset=UTF-8\"%&gt;\n&lt;%@ taglib prefix=\"s\" uri=\"/struts-tags\"%&gt;\n\n&lt;h2&gt;Übersicht Prüfungen aus Prüfungsfach \"&lt;s:property value=\"pruefungsfach.getTitel()\" /&gt;\"&lt;/h2&gt;\n&lt;s:form&gt;\n    &lt;div class=\"buttons\"&gt;\n        &lt;div class=\"button\"&gt;\n            &lt;!--\n            &lt;s:url id=\"createPruefungUrl\" action=\"createPruefung\"&gt;\n                &lt;s:param name=\"selectedPruefungsfachId\"&gt;&lt;s:property value=\"pruefungsfach.getId()\" /&gt;&lt;/s:param&gt;\n            &lt;/s:url&gt;\n            &lt;a href=\"${createPruefungUrl}\"&gt;&lt;s:text name=\"btnCreatePruefung\" /&gt;&lt;/a&gt;\n            &lt;s:url id=\"pruefungenHistorieActionUrl\" action=\"pruefungenHistorie\"&gt;\n                &lt;s:param name=\"selectedPruefungsfachId\"&gt;&lt;s:property value=\"pruefungsfach.getId()\" /&gt;&lt;/s:param&gt;\n            &lt;/s:url&gt;\n            &lt;a href=\"${pruefungenHistorieActionUrl}\"&gt;&lt;s:text name=\"btnPruefungenHistorie\" /&gt;&lt;/a&gt;\n            --&gt;\n\n            &lt;s:hidden name=\"selectedPruefungsfachId\" value=\"%{pruefungsfach.id}\" /&gt;\n            &lt;s:submit key=\"btnCreatePruefung\" action=\"createPruefung\" /&gt;\n            &lt;s:submit key=\"btnPruefungenHistorie\" action=\"pruefungenHistorie\" /&gt;\n        &lt;/div&gt;\n        &lt;div class=\"clear\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n    &lt;table cellpadding=\"0\"&gt;\n        &lt;caption&gt;Liste aller Prüfungen im Prüfungsfach \"&lt;s:property value=\"pruefungsfach.getTitel()\" /&gt;\"&lt;/caption&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;&amp;nbsp;&lt;/th&gt;\n                &lt;th&gt;Datum&lt;/th&gt;\n                &lt;th&gt;Dozent&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;s:iterator value=\"pruefungen\" status=\"rowstatus\"&gt;\n                &lt;s:if test=\"#rowstatus.odd == true\"&gt;\n                    &lt;tr class=\"odd\"&gt;\n                &lt;/s:if&gt;\n                &lt;s:else&gt;\n                    &lt;tr class=\"even\"&gt;\n                &lt;/s:else&gt;\n                    &lt;td class=\"cell_radio\"&gt;&lt;s:radio name=\"selectedPruefungId\" list=\"#{id:''}\" theme=\"simple\"/&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;s:property value=\"datum\"/&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;s:property value=\"dozent.getPerson().getVorname()\"/&gt; &lt;s:property value=\"dozent.getPerson().getName()\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/s:iterator&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n\n&lt;/s:form&gt;\n</code></pre>\n\n<p>When i now click on the submit action=\"pruefungenHistorie\" the Action PruefungenHistorieAction is called but there i don´t get the parameter \"selectedPruefungsfachId\"</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.nordakademie.hausarbeit.action;\n\nimport java.util.List;\n\nimport org.apache.log4j.Logger;\n\nimport com.opensymphony.xwork2.ActionSupport;\n\nimport de.nordakademie.hausarbeit.model.Pruefungsfach;\nimport de.nordakademie.hausarbeit.service.PruefungsfaecherService;\nimport de.nordakademie.hausarbeit.service.StudentService;\n\npublic class PruefungenHistorieAction extends ActionSupport {\n    private static final long serialVersionUID = 1L;\n    private StudentService studentService;\n    private PruefungsfaecherService pruefungsfaecherService;\n    private List&lt;Integer&gt; matrikelnummern;\n    private Long selectedPruefungsfachId;\n    private Integer selectedMatrikelnummer;\n    private static final Logger logger = Logger.getLogger(PruefungenHistorieAction.class);\n\n    public String execute() throws Exception {\n        // Load MatrikelnummerList\n        _loadMatrikelnummerList();\n        return SUCCESS;\n    }\n\n    /**\n     * showDetail Most useless comment in the world; why bother?\n     */\n    public String showDetail() {\n        return SUCCESS;\n    }\n\n    public void validate() {\n        super.validate();\n\n        _loadMatrikelnummerList();\n\n        if (getSelectedMatrikelnummer().equals(\"none\")) {\n            addFieldError(\"selectedMatrikelnummer\", getText(\"error.no.matrikelnummer.selected\"));\n        }\n    }\n\n    private void _loadMatrikelnummerList() {\n        if(logger.isDebugEnabled()){\n            logger.debug(\"PruefungenHistorieAction: Pruefungsfach mit der ID '\" + selectedPruefungsfachId + \"' wird geladen\");\n        }\n\n        Pruefungsfach pruefungsfach = pruefungsfaecherService.getPruefungsfach(selectedPruefungsfachId);        \n        matrikelnummern = studentService.getMatrikelnummerListByManipel(pruefungsfach.getManipel());\n    }\n\n    public void setStudentService(StudentService studentService) {\n        this.studentService = studentService;\n    }\n\n    public Long getSelectedPruefungsfachId() {\n        return selectedPruefungsfachId;\n    }\n\n    public void setSelectedPruefungsfachId(Long selectedPruefungsfachId) {\n        this.selectedPruefungsfachId = selectedPruefungsfachId;\n    }\n\n    public List&lt;Integer&gt; getMatrikelnummern() {\n        return matrikelnummern;\n    }\n\n    public Integer getSelectedMatrikelnummer() {\n        return selectedMatrikelnummer;\n    }\n\n    public void setSelectedMatrikelnummer(Integer selectedMatrikelnummer) {\n        this.selectedMatrikelnummer = selectedMatrikelnummer;\n    }\n}\n</code></pre>\n\n<p>The attribute selectedPruefungsfachId is null and I don't understand why because in Action \"PruefungslistAction\" I get the parameter and in the next action I don't get the parameter...</p>\n\n<p>Here is the struts.xml:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!-- AUTHOR: Niels Maseberg --&gt;\n\n&lt;!DOCTYPE struts PUBLIC\n        \"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN\"\n        \"http://struts.apache.org/dtds/struts-2.0.dtd\"&gt;\n\n&lt;struts&gt;\n    &lt;constant name=\"struts.enable.DynamicMethodInvocation\" value=\"false\" /&gt;\n    &lt;constant name=\"struts.devMode\" value=\"false\" /&gt;\n    &lt;constant name=\"struts.custom.i18n.resources\" value=\"ApplicationResources\" /&gt;\n\n    &lt;!-- Custom Theme for Struts (Author: Niels Maseberg; Base of Theme xhtml) --&gt;\n    &lt;constant name=\"struts.ui.theme\" value=\"notendatenbank\" /&gt;\n    &lt;constant name=\"struts.ui.templateDir\" value=\"template\" /&gt;\n\n    &lt;!-- Struts Package --&gt;\n    &lt;package name=\"default\" extends=\"tiles-default\" namespace=\"/\"&gt;\n        &lt;result-types&gt;\n            &lt;result-type name=\"tiles\" class=\"org.apache.struts2.views.tiles.TilesResult\" default=\"true\" /&gt;\n        &lt;/result-types&gt;\n\n        &lt;default-action-ref name=\"index\" /&gt;\n\n        &lt;action name=\"index\" class=\"de.nordakademie.hausarbeit.action.IndexAction\"&gt;\n            &lt;result type=\"tiles\"&gt;index&lt;/result&gt;\n        &lt;/action&gt;\n\n        &lt;action name=\"notenuebersicht\" class=\"de.nordakademie.hausarbeit.action.NotenuebersichtAction\"&gt;\n            &lt;result type=\"tiles\"&gt;notenuebersicht&lt;/result&gt;\n            &lt;interceptor-ref name=\"validation\"&gt;\n                &lt;param name=\"validateAnnotatedMethodOnly\"&gt;true&lt;/param&gt;                \n                &lt;param name=\"excludeMethods\"&gt;execute&lt;/param&gt;\n            &lt;/interceptor-ref&gt;\n        &lt;/action&gt;\n\n        &lt;action name=\"notenuebersichtDetail\" class=\"de.nordakademie.hausarbeit.action.NotenuebersichtAction\" method=\"showDetail\"&gt;\n            &lt;result name=\"input\"&gt;notenuebersicht&lt;/result&gt;\n            &lt;result name=\"success\"&gt;notenuebersichtDetail&lt;/result&gt;\n        &lt;/action&gt;\n\n        &lt;action name=\"pruefungslist\" class=\"de.nordakademie.hausarbeit.action.PruefungslistAction\"&gt;\n            &lt;result type=\"tiles\"&gt;pruefungslist&lt;/result&gt;\n        &lt;/action&gt;\n\n        &lt;action name=\"createPruefung\" class=\"de.nordakademie.hausarbeit.action.CreatePruefungAction\"&gt;\n            &lt;result name=\"input\"&gt;createPruefung&lt;/result&gt;\n            &lt;result name=\"success\"&gt;pruefungslist&lt;/result&gt;\n            &lt;result type=\"tiles\"&gt;createPruefung&lt;/result&gt;\n        &lt;/action&gt;\n\n        &lt;action name=\"pruefungenHistorie\" class=\"de.nordakademie.hausarbeit.action.PruefungenHistorieAction\"&gt;\n            &lt;result type=\"tiles\"&gt;pruefungenHistorie&lt;/result&gt;\n            &lt;interceptor-ref name=\"validation\"&gt;\n                &lt;param name=\"validateAnnotatedMethodOnly\"&gt;true&lt;/param&gt;                \n                &lt;param name=\"excludeMethods\"&gt;execute&lt;/param&gt;\n            &lt;/interceptor-ref&gt;\n        &lt;/action&gt;\n\n        &lt;action name=\"pruefungenHistorieDetail\" class=\"de.nordakademie.hausarbeit.action.PruefungenHistorieAction\" method=\"showDetail\"&gt;\n            &lt;result name=\"input\"&gt;pruefungenHistorie&lt;/result&gt;\n            &lt;result name=\"success\"&gt;pruefungenHistorieDetail&lt;/result&gt;\n        &lt;/action&gt;\n\n    &lt;/package&gt;\n\n&lt;/struts&gt;\n</code></pre>\n"},{"tags":["spring","struts2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13181766,"title":"Struts2 List is not filled by form/post if uninitialized","body":"<p>My Action class contains following list and subclass:</p>\n\n<pre><code>public List&lt;PointInTimesWrapper&gt; pointInTimesWrapper = new ArrayList&lt;PointInTimesWrapper&gt;();\n// And generated public getters and setters...\n\n\npublic class PointInTimesWrapper {\n\n    public PointInTimesWrapper() {\n        super();\n    }\n    public PointInTimesWrapper(String date) {\n        super(); \n        this.date = date;\n    }\n    public PointInTimesWrapper(int initialTimesCount) {\n        super();\n        // Initialanzahl von Uhrzeiten\n        for(int i = this.times.size(); i &lt; initialTimesCount; i++)\n            this.times.add(new String());\n    }\n\n    private String date;\n    private List&lt;String&gt; times = new ArrayList&lt;String&gt;();\n    // public generated getters / setters...\n\n}\n</code></pre>\n\n<p>And my JSP has following tag:\n    <code>&lt;s:textfield theme=\"simple\" name=\"pointInTimesWrapper[0].date\"/&gt;</code></p>\n\n<p>But as long as I do not initialize the pointInTimesWrapper List Struts2 does not populate the form date into the list. The problem is that I do not know the correct size of the list in upfront, because the form has a variable size. I also tried to use LazyList, but it did not help. If I add some new PointInTimesWrapper to the list in the prepare() method, they are filled.</p>\n\n<p>Is that correct and how can I do it better?</p>\n\n<p>Thank you very much.</p>\n"},{"tags":["java","spring","hibernate","classcastexception"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13145603,"title":"ClassCastException in implementation class","body":"<p>Why am I getting the ClassCastException:</p>\n\n<p>Wrapped exception:</p>\n\n<pre><code>java.lang.ClassCastException: com.avt.model.CasePmt\n    at com.avt.dao.impl.CasePmtDaoImpl.findAllCasePmt(CasePmtDaoImpl.java:68)\n    at com.avt.ViewCasePmtAction.view(ViewCasePmtAction.java:127)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:585)\n    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:280)\n    at gov.pbgc.spectrum.util.SpectrumLookupDispatchAction.execute(SpectrumLookupDispatchAction.java:113)\n    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484)\n    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)\n    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)\n    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:525)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:763)    \n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n</code></pre>\n\n<p>My implementation class is</p>\n\n<pre><code>public List&lt;CasePmt&gt; findAllCasePmt() {\n            List list;\n            list = getHibernateTemplate().executeFind(new HibernateCallback() {\n                    public Object doInHibernate(Session session)\n                                    throws HibernateException, SQLException {\n\n                            Query q = session\n                                            .getNamedQuery(\"findAll\");\n                            return q.list();\n                    }\n            });\n            Iterator it = list.iterator();\n            List&lt;CasePmt&gt; l = new ArrayList&lt;CasePmt&gt;();\n\n            CasePmt voObj;\n            while (it.hasNext()) {\n                    voObj = new CasePmt();\n\n                    Object[] objs = (Object[]) it.next();\n                    // System.out.print(\"\\n\" + objs[0].toString());\n\n                    if (objs[2] != null) {\n                            voObj.setCaseTxNum(objs[1].toString());\n                    }\n\n\n    .......................\n                        }\n                    l.add(voObj);\n            }\n            return l;\n    }\n</code></pre>\n\n<p>and my action call is :</p>\n\n<pre><code>List&lt;CasePmt&gt; CsList =       \n             CasePmtBo.getCaseDao().findAllCasePmt();\n</code></pre>\n\n<p>Im getting error in line 68 which is \"Object[] objs = (Object[]) it.next();\" line.\nWhy am i getting this issue?</p>\n\n<p>Any inputs..im revisiting this today and facing the issue. </p>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13162322,"title":"how can i read a collection of objects saved in an xml in a spring app","body":"<p>I have set of static data in xml like</p>\n\n<pre><code>&lt;books&gt;\n  &lt;book id=\"isbn-1\"&gt; \n    &lt;name&gt;name1&lt;/name&gt;\n    &lt;author&gt;athorname&lt;/author&gt;\n  &lt;/book&gt;\n  &lt;book id=\"isbn-2\"&gt; \n    &lt;name&gt;name1&lt;/name&gt;\n    &lt;author&gt;athorname&lt;/author&gt;\n  &lt;/book&gt;\n&lt;/books&gt;\n</code></pre>\n\n<p>I would like to read them and load them in Book model object just like they were in DB. </p>\n\n<p>Given a isbn I would like to parse this xml and load the corresponding object etc. <br></p>\n\n<p>One way I can achieve this is load it as list in memory. <br/>\nThe other way is maybe store each book in different xml with isbn as xml name and load it.</p>\n\n<p>one - doesnt work if the list is huge.<br>\ntwo - creates lots of files and difficult to manage.</p>\n\n<p>Is there any other way I can achieve this using spring-framework or any other java library?</p>\n"},{"tags":["spring","flex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13168215,"title":"PropertyTypeDescriptor and Spring 3.1.2","body":"<p>I'm working on a project using Spring-Flex 1.5.2 and Spring 3.1.2 and recently after adding some DAO's to my project i started getting this error on the WebLogic Console when trying to populate one of my combos:</p>\n\n<pre><code>[BlazeDS]org/springframework/core/convert/support/PropertyTypeDescriptor\njava.lang.NoClassDefFoundError: org/springframework/core/convert/support/PropertyTypeDescriptor\n    at org.springframework.flex.core.io.HibernateProxyConverter.convert(HibernateProxyConverter.java:48)\n    at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:35)\n    at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:171)\n    at org.springframework.flex.core.io.SpringPropertyProxy.getValue(SpringPropertyProxy.java:160)\n    at flex.messaging.io.amf.Amf3Output.writePropertyProxy(Amf3Output.java:601)\n    at flex.messaging.io.amf.Amf3Output.writeCustomObject(Amf3Output.java:532)\n    at flex.messaging.io.amf.Amf3Output.writeObject(Amf3Output.java:207)\n    at flex.messaging.io.amf.Amf3Output.writeObjectArray(Amf3Output.java:854)\n    at flex.messaging.io.amf.Amf3Output.writeAMFArray(Amf3Output.java:445)\n    at flex.messaging.io.amf.Amf3Output.writeObject(Amf3Output.java:193)\n    at flex.messaging.io.ArrayCollection.writeExternal(ArrayCollection.java:97)\n    at flex.messaging.io.amf.Amf3Output.writePropertyProxy(Amf3Output.java:594)\n    at flex.messaging.io.amf.Amf3Output.writeArrayCollection(Amf3Output.java:476)\n    at flex.messaging.io.amf.Amf3Output.writeObject(Amf3Output.java:189)\n    at flex.messaging.messages.AbstractMessage.writeExternalBody(AbstractMessage.java:705)\n    at flex.messaging.messages.AbstractMessage.writeExternal(AbstractMessage.java:435)\n    at flex.messaging.messages.AsyncMessage.writeExternal(AsyncMessage.java:140)\n    at flex.messaging.messages.AcknowledgeMessage.writeExternal(AcknowledgeMessage.java:94)\n    at flex.messaging.messages.AcknowledgeMessageExt.writeExternal(AcknowledgeMessageExt.java:55)\n    at flex.messaging.io.amf.Amf3Output.writePropertyProxy(Amf3Output.java:594)\n    at flex.messaging.io.amf.Amf3Output.writeCustomObject(Amf3Output.java:532)\n    at flex.messaging.io.amf.Amf3Output.writeObject(Amf3Output.java:112)\n    at flex.messaging.io.amf.Amf0Output.writeObject(Amf0Output.java:206)\n    at flex.messaging.io.amf.AmfMessageSerializer.writeObject(AmfMessageSerializer.java:196)\n    at flex.messaging.io.amf.AmfMessageSerializer.writeBody(AmfMessageSerializer.java:186)\n    at flex.messaging.io.amf.AmfMessageSerializer.writeMessage(AmfMessageSerializer.java:142)\n    at flex.messaging.endpoints.amf.SerializationFilter.invoke(SerializationFilter.java:198)\n    at flex.messaging.endpoints.BaseHTTPEndpoint.service(BaseHTTPEndpoint.java:291)\n    at flex.messaging.endpoints.AMFEndpoint$$EnhancerByCGLIB$$25364767.service(&lt;generated&gt;)\n    at org.springframework.flex.servlet.MessageBrokerHandlerAdapter.handle(MessageBrokerHandlerAdapter.java:109)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)\n    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)\n    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)\n    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)\n    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)\n    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)\n    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)\n    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)\n    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)\n    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3496)\n    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)\n    at weblogic.security.service.SecurityManager.runAs(Unknown Source)\n    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2180)\n    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2086)\n    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1406)\n    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)\n    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)\nCaused by: java.lang.ClassNotFoundException: org.springframework.core.convert.support.PropertyTypeDescriptor\n    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:283)\n    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:256)\n    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:54)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:176)\n    at weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:35)\n    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n    ... 57 more\n</code></pre>\n\n<p>Google has failed me on this one... so any help is greatly appreciated.</p>\n\n<p>I have annotated my services with @RemotingDestination and created the Remote Objects in my Mxml, like this:</p>\n\n<pre><code>&lt;s:RemoteObject id=\"marketSegment\" destination=\"marketSegmentServiceImpl\" endpoint=\"http://localhost:7001/scpi/messageBroker/amf\"&gt;&lt;/s:RemoteObject&gt;\n</code></pre>\n\n<p>then i'm adding this on my combobox:</p>\n\n<pre><code>dataProvider=\"{marketSegment.findAllCatalogs.lastResult}\"\n</code></pre>\n\n<p>and this on my creationComplete: </p>\n\n<pre><code>private function init():void{\n    marketSegment.findAllCatalogs();\n    biotech.findAllCatalogs();\n}\n</code></pre>\n\n<p>This is working to fetch obects that have only primitive type properties, but fails with the mentioned error when trying to fetch any object with complex type properties. </p>\n"},{"tags":["spring","quartz-scheduler"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13178645,"title":"can't understand quartz schedule expression","body":"<p>Spring quartz schedule expression</p>\n\n<pre><code>0 40 4-16 * * *\n</code></pre>\n\n<p>Java spring scheduler quartz</p>\n\n<p>I have old code with express schedule=\"0 40 4-16 * * *\" i do not understand what does that mean ?</p>\n\n<p>Even after readying the following file can't figure out what does above Cron expression do. <a href=\"http://en.wikipedia.org/wiki/Cron\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Cron</a></p>\n"},{"tags":["java","spring","struts2","spring-security"],"answer_count":4,"favorite_count":1,"up_vote_count":24,"down_vote_count":0,"view_count":717,"score":24,"question_id":8829346,"title":"Struts2 + Spring Security 2.06: Valuestack is null when attempting to use @Secured on an Action method","body":"<p>Before I begin, I've to say the closest answer I've found is <a href=\"http://forum.springsource.org/showthread.php?66381-Method-security-with-struts2-make-all-request-params-in-action-NULL\">here</a> but honestly I don't really understand what's going on there.</p>\n\n<p>I'm using Struts2 + Spring Security 2.06 with a custom authentication provider and access decision manager to remove the need for a \"ROLE_\" prefix.</p>\n\n<p>My applicationContext-security.xml looks like this:</p>\n\n<pre><code>    &lt;beans:bean id=\"customAuthenticationProvider\"\n                class=\"com.test.testconsole.security.CustomAuthenticationProvider\"&gt;\n        &lt;beans:property name=\"userManagementService\" ref=\"userManagementService\"/&gt;\n        &lt;custom-authentication-provider/&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;!--Customize Spring Security's access decision manager to remove need for \"ROLE_\" prefix--&gt;\n    &lt;beans:bean\n            id=\"accessDecisionManager\"\n            class=\"org.springframework.security.vote.AffirmativeBased\"&gt;\n        &lt;beans:property name=\"decisionVoters\"&gt;\n            &lt;beans:list&gt;\n                &lt;beans:ref bean=\"roleVoter\"/&gt;\n                &lt;beans:ref bean=\"authenticatedVoter\"/&gt;\n            &lt;/beans:list&gt;\n        &lt;/beans:property&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;beans:bean\n            id=\"roleVoter\"\n            class=\"org.springframework.security.vote.RoleVoter\"&gt;\n        &lt;beans:property name=\"rolePrefix\" value=\"\"/&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;beans:bean\n            id=\"authenticatedVoter\"\n            class=\"org.springframework.security.vote.AuthenticatedVoter\"&gt;\n    &lt;/beans:bean&gt;\n\n&lt;global-method-security secured-annotations=\"enabled\" access-decision-manager-ref=\"accessDecisionManager\"/&gt;\n</code></pre>\n\n<p>Relevant portion of my web.xml:</p>\n\n<pre><code>    &lt;!--Spring Security--&gt;\n&lt;filter&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter&gt;\n    &lt;filter-name&gt;struts2&lt;/filter-name&gt;\n    &lt;filter-class&gt;\n        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter\n    &lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;!--Has to be placed _Before_ the struts2 filter-mapping--&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;struts2&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p>And I'm simply using @Secured in one of my action classes like so:</p>\n\n<pre><code>@Secured({\"TEST_ADMIN\"})\npublic String editAccount() {\n    logger.info(\"Editing account for: \" + email);\n    //blah blah blah\n}\n</code></pre>\n\n<p>With the @Secured annotation added to a method in the action, all parameters become null, in fact looks like the valuestack is null:</p>\n\n<pre><code>154379 [1146701440@qtp-1897259366-0] DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler  - Entering nullPropertyValue [target=[com.test.testconsole.sections.SettingsAction@da47641, com.opensymphony.xwork2.DefaultTextProvider@1cc50164], property=currentPage]        \n154379 [1146701440@qtp-1897259366-0] WARN  com.opensymphony.xwork2.ognl.OgnlValueStack  - Caught an exception while evaluating expression 'currentPage.equals('Summary')' against value stack\n    java.lang.NullPointerException: target is null for method equals\n        at ognl.OgnlRuntime.callMethod(OgnlRuntime.java:1347)\n        at ognl.ASTMethod.getValueBody(ASTMethod.java:90)\n        at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:212)\n        at ognl.SimpleNode.getValue(SimpleNode.java:258)\n        at ognl.ASTChain.getValueBody(ASTChain.java:141)\n        at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:212)\n        at ognl.SimpleNode.getValue(SimpleNode.java:258)\n        at ognl.Ognl.getValue(Ognl.java:494)\n        at com.opensymphony.xwork2.ognl.OgnlUtil.getValue(OgnlUtil.java:217)\n        at com.opensymphony.xwork2.ognl.OgnlValueStack.getValue(OgnlValueStack.java:342)\n        at com.opensymphony.xwork2.ognl.OgnlValueStack.tryFindValue(OgnlValueStack.java:331)\n        at com.opensymphony.xwork2.ognl.OgnlValueStack.tryFindValueWhenExpressionIsNotNull(OgnlValueStack.java:307)\n        at com.opensymphony.xwork2.ognl.OgnlValueStack.findValue(OgnlValueStack.java:293)\n        at org.apache.struts2.components.Component.findValue(Component.java:382)\n        at org.apache.struts2.components.If.start(If.java:86)\n        at org.apache.struts2.views.jsp.ComponentTagSupport.doStartTag(ComponentTagSupport.java:53)\n        at org.apache.jsp.WEB_002dINF.views.layouts.header_jsp._jspx_meth_s_if_0(org.apache.jsp.WEB_002dINF.views.layouts.header_jsp:252)\n        at org.apache.jsp.WEB_002dINF.views.layouts.header_jsp._jspService(org.apache.jsp.WEB_002dINF.views.layouts.header_jsp:97)\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:109)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:389)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)\n        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)\n        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)\n        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)\n        at org.mortbay.jetty.servlet.Dispatcher.include(Dispatcher.java:192)\n        at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:1013)\n        at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:698)\n        at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:80)\n        at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:73)\n        at org.apache.tiles.context.TilesRequestContextWrapper.dispatch(TilesRequestContextWrapper.java:72)\n        at org.apache.struts2.tiles.StrutsTilesRequestContext.dispatch(StrutsTilesRequestContext.java:88)\n        at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:283)\n        at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:140)\n        at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:117)\n        at org.apache.tiles.jsp.taglib.RenderTagSupport.execute(RenderTagSupport.java:154)\n        at org.apache.tiles.jsp.taglib.RoleSecurityTagSupport.doEndTag(RoleSecurityTagSupport.java:75)\n        at org.apache.tiles.jsp.taglib.ContainerTagSupport.doEndTag(ContainerTagSupport.java:80)\n        at org.apache.jsp.WEB_002dINF.views.layouts.bodyWithSidebar_jsp._jspx_meth_tiles_insertAttribute_0(org.apache.jsp.WEB_002dINF.views.layouts.bodyWithSidebar_jsp:121)\n        at org.apache.jsp.WEB_002dINF.views.layouts.bodyWithSidebar_jsp._jspService(org.apache.jsp.WEB_002dINF.views.layouts.bodyWithSidebar_jsp:58)\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:109)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:389)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)\n        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)\n        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)\n        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)\n        at org.mortbay.jetty.servlet.Dispatcher.include(Dispatcher.java:192)\n        at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:1013)\n        at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:698)\n        at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:80)\n        at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:73)\n        at org.apache.tiles.context.TilesRequestContextWrapper.dispatch(TilesRequestContextWrapper.java:72)\n        at org.apache.struts2.tiles.StrutsTilesRequestContext.dispatch(StrutsTilesRequestContext.java:88)\n        at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:606)\n        at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:280)\n        at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:140)\n        at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:117)\n        at org.apache.tiles.jsp.taglib.RenderTagSupport.execute(RenderTagSupport.java:154)\n        at org.apache.tiles.jsp.taglib.RoleSecurityTagSupport.doEndTag(RoleSecurityTagSupport.java:75)\n        at org.apache.tiles.jsp.taglib.ContainerTagSupport.doEndTag(ContainerTagSupport.java:80)\n        at org.apache.jsp.WEB_002dINF.views.layouts.main_jsp._jspx_meth_tiles_insertAttribute_0(org.apache.jsp.WEB_002dINF.views.layouts.main_jsp:473)\n        at org.apache.jsp.WEB_002dINF.views.layouts.main_jsp._jspService(org.apache.jsp.WEB_002dINF.views.layouts.main_jsp:157)\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:109)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:389)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)\n        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)\n        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)\n        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)\n        at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)\n        at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)\n        at org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:198)\n        at org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:179)\n        at org.apache.tiles.context.TilesRequestContextWrapper.dispatch(TilesRequestContextWrapper.java:72)\n        at org.apache.struts2.tiles.StrutsTilesRequestContext.dispatch(StrutsTilesRequestContext.java:88)\n        at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:606)\n        at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:246)\n        at org.apache.struts2.views.tiles.TilesResult.doExecute(TilesResult.java:105)\n        at org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)\n        at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:373)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:277)\n        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)\n        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)\n        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)\n        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)\n        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)\n        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)\n        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)\n        at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)\n        at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)\n        at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)\n        at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)\n        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)\n        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)\n        at org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)\n        at org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)\n        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n        at org.springframework.security.ui.SessionFixationProtectionFilter.doFilterHttp(SessionFixationProtectionFilter.java:67)\n        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n        at org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)\n        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n        at org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)\n        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n        at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:278)\n        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n        at org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)\n        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n        at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)\n        at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n        at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n        at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)\n        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)\n        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)\n        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)\n        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)\n        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)\n        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)\n        at org.mortbay.jetty.Server.handle(Server.java:326)\n        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:536)\n        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:915)\n        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:539)\n        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)\n        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:405)\n        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)\n</code></pre>\n\n<p>I read in the Spring Security FAQ that the Controller/Action is not the best place to secure methods, but the described failure in the FAQ is that the @Secured annotation will not work, i.e. method will not be secured.</p>\n\n<p>In my case, I get a null valuestack even before reaching that method; execute() is not secured, only editUser() and that wasn't even called yet.</p>\n\n<p>I hope someone has the same experience and found a solution .. thanks.</p>\n\n<p><strong>Update:</strong>\nI wonder if this will help: <a href=\"http://stackoverflow.com/questions/8229600/spring-security-how-i-can-enable-method-security-annotations\">Spring Security - how I can enable Method Security annotations?</a></p>\n\n<p>My Action classes currently extend a BaseAction class where I put common functionality though ..</p>\n"},{"tags":["java","spring","web-applications","spring-webflow","spring-webflow-2"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13172474,"title":"Conversational flow application implementation","body":"<p>Does spring web flow used widely in industry for a conversational flow behavioral application or a wizard kind of application. The main purpose of going such application is to reduced the data we need to keep in session right? Does it worth to go for a framework such as web flow or else what would be other industry standard implementation for such enterprise application?</p>\n\n<p>Below are the disadvantages of a normal implementation contrast to spring web flow which Spring claims,</p>\n\n<ol>\n<li>Visualizing the flow is very difficult.</li>\n<li>The application has a lot of code accessing the HTTP session.</li>\n<li>Enforcing controlled navigation is important but not possible.</li>\n<li>Proper browser back button support seems unattainable.</li>\n<li>Browser and server get out of sync with \"Back\" button use.</li>\n<li>Multiple browser tabs causes concurrency issues with HTTP session data. </li>\n</ol>\n"},{"tags":["spring","spring-aop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13172673,"title":"Pointcut is not being applied to Abstract method","body":"<p>I am trying to apply pointcut to an implemented method in childclass but the AspectMethod is not being invoked around this pointcut.\nFollowing is my configuration and code:     </p>\n\n<pre><code>public abstract class ParentClass {\n  protected abstract void buildResponse(QueryResponse qryResp,ContentSearchServiceResponseImpl cssResp);\n}\n\n\npublic class ChildClass extends ParentClass {\n@override    \npublic void buildResponse(QueryResponse qryResp,ContentSearchServiceResponseImpl  ssResp){\n//doSomething\n}\n</code></pre>\n\n<p>Pointcuts:</p>\n\n<pre><code>&lt;aop:pointcut id=\"pointcutId\"\n            expression=\"execution(public * ParentClass.buildResponse(..))\" /&gt;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>&lt;aop:pointcut id=\"pointcutId\"\n            expression=\"execution(protected * ParentClass.buildResponse(..))\" /&gt;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>&lt;aop:pointcut id=\"pointcutId\"\n            expression=\"execution(public * ParentClass+.buildResponse(..))\" /&gt;\n</code></pre>\n\n<p>For any of the configurations of pointcuts above Aspect is not being created.I have tried almost everything.If anyone has some idea on this...I can not use Child Class's name directly because in my case multiple child classes are implementing this abstract method</p>\n"},{"tags":["spring","dependency-injection","guice","playframework"],"answer_count":5,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":2510,"score":9,"question_id":5016600,"title":"Example use-cases for using Dependency Injection with the Play Framework","body":"<p>I am a big fan of Dependency Injection and the Play Framework, but am having trouble seeing how the two could be exploited together.</p>\n\n<p>There are modules for Spring and Guice, but the way that Play works makes it hard for me to see how DI could be beneficial beyond some quite simple cases.</p>\n\n<p>A good example of this is that Play expects JPA work to be done by static methods associated with the entity in question:</p>\n\n<pre><code>@Entity\nPerson extends Model {\n    public static void delete(long id) {\n        em().find(id).remove();\n    }\n\n    //etc\n}\n</code></pre>\n\n<p>So there is no need for a <code>PersonManager</code> to be injected into controllers in the way it might for a Spring J2EE application. Instead a controller just calls <code>Person.delete(x)</code>.</p>\n\n<p>Obviously, DI is beneficial when there are interfaces with external systems, as the concrete implementation can be mocked for testing etc., but I don't see much benefit for a self-contained Play application.</p>\n\n<p>Does anyone have any good examples? Does anyone use it to inject a <code>Manager</code>-style class into <code>Controller</code>s so that a number of operations can be done within the same transaction, for example?</p>\n"},{"tags":["java","image","spring","uploader"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13177762,"title":"Java Spring User Image Uploader with Mongodb","body":"<p>I've created a basic user system, where people can register and login.</p>\n\n<p>Its storing textual data at this time, but I would like to expand the code to allow users to upload images of themselves.</p>\n\n<p>I am using a mongodb, so I can stash the user id as a folder when the user gets created, as they add images of themselves it will go into this folder.</p>\n\n<p>1.How do I dynamically create these folders and where. I've read the folder would normally be stored in the WEB-INF.</p>\n\n<p>Or should/could the images be stored as a blob file in the mongodb? </p>\n\n<p>2.How do I copy/store the images into these folders correctly, in the correct place.</p>\n\n<p>I've tried adapting code from here <a href=\"http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-fileupload-example.html\" rel=\"nofollow\">http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-fileupload-example.html</a></p>\n\n<p>Its currently not relating to the user, nor is it organising the images into folders. Eventually I'd like to auto scale/crop the images to produce various thumbnail sizes.</p>\n\n<hr>\n\n<p><em>FileUpload.java</em></p>\n\n<p><code></p>\n\n<pre><code>package net.fileupload;\n\nimport org.springframework.web.multipart.MultipartFile;\npublic class FileUpload {\n MultipartFile file;\n public void setFile(MultipartFile file){\n  this.file=file;\n  }\n public MultipartFile getFile(){\n  return file;\n  }\n }\n</code></pre>\n\n<p></code></p>\n\n<hr>\n\n<p><em>FileUploadController.java</em> </p>\n\n<p><code>\n         package net.fileupload;</p>\n\n<pre><code>        import javax.servlet.http.HttpServletRequest;\n        import javax.servlet.http.HttpServletResponse;\n        import org.springframework.validation.BindException;\n        import org.springframework.web.multipart.MultipartFile;\n        import org.springframework.web.servlet.ModelAndView;\n        import org.springframework.web.servlet.mvc.SimpleFormController;\n        import java.io.InputStream;\n        import java.io.OutputStream;\n        import java.io.FileOutputStream;\n        import java.util.*;\n\n        import net.fileupload.FileUpload;;\n\n        public class FileUploadController extends SimpleFormController{\n\n          @Override\n          protected ModelAndView onSubmit(HttpServletRequest request,\n                   HttpServletResponse response, Object command, BindException errors)\n                   throws Exception {\n             FileUpload fileUpload = (FileUpload)command;\n             MultipartFile multipartFile = fileUpload.getFile();\n             String fileName=\"\";\n\n             // image type of file processing...\n             System.err.println(\"-------------------------------------------\");\n             try {\n               InputStream inputStream = null;\n               OutputStream outputStream = null;\n               if (multipartFile.getSize() &gt; 0) {\n                  inputStream = multipartFile.getInputStream();\n                  fileName = request.getRealPath(\"\") + \"/images/\"+ multipartFile.getOriginalFilename();\n                  System.out.println(fileName);\n                  outputStream = new FileOutputStream(fileName);\n                  int readBytes = 0;\n                  byte[] buffer = new byte[2000000];\n                  while ((readBytes = inputStream.read(buffer, 0, 2000000)) != -1) {\n                     outputStream.write(buffer, 0, readBytes);\n                   }\n                  outputStream.close();\n                  inputStream.close();\n                }       \n              } catch (Exception e) {\n                 e.printStackTrace();\n              }\n             // .......................................... \n             Map model = new HashMap();\n             model.put(\"fileName\", multipartFile.getOriginalFilename());\n             model.put(\"filepath\", \"images/\"+multipartFile.getOriginalFilename());\n\n             return new ModelAndView(getSuccessView(), model);\n           }\n         }\n</code></pre>\n\n<p></code></p>\n\n<hr>\n\n<p><em>FileUploadValidator.java</em> </p>\n\n<p><code>\n        package net.fileupload;</p>\n\n<pre><code>    import org.springframework.validation.Errors;\n    import org.springframework.validation.Validator;\n    import net.fileupload.FileUpload;\n\n    public class FileUploadValidator implements Validator{\n        @Override\n        public boolean supports(Class clazz){\n            return FileUpload.class.isAssignableFrom(clazz);\n         }  \n        @Override\n        public void validate(Object target, Errors errors){\n          FileUpload fileUpload = (FileUpload)target;\n          if(fileUpload.getFile().getSize()==0){\n               errors.rejectValue(\"file\", \"error.empty.file\", \"Please Select File.\");\n            }\n          System.out.println(fileUpload.getFile().getSize());\n\n          if(fileUpload.getFile().getSize() &gt; 2000000){\n               errors.rejectValue(\"file\", \"error.empty.file\", \"File size more than 2000000 bytes \");\n            }\n        }\n    }\n</code></pre>\n\n<p></code></p>\n\n<p><strong>Retrieving the images.</strong></p>\n\n<p>In theory the following should return the list of images relevant to a user. May wish to return these images as a json array.</p>\n\n<hr>\n\n<p>a gallery controller</p>\n\n<p><code>\n         import java.util.ArrayList; </p>\n\n<pre><code>        import java.util.List; \n\n        import com.mongodb.BasicDBObject;\n\n        import com.mongodb.DBObject;\n\n\n        public class GalleryController{\n\n\n            public static List&lt;DBObject&gt; getGallery(){\n\n                //__Prepare response\n                List&lt;DBObject&gt; images = new ArrayList&lt;DBObject&gt;();\n                BasicDBObject results = new BasicDBObject();\n\n                BasicDBObject result = new BasicDBObject();\n\n                    result.put(\"image1\", \"/images/Bannan.jpg\");\n                    result.put(\"image2\", \"/images/Koala.jpg\");\n                    result.put(\"image3\", \"/images/Monkey.jpg\");\n\n                    results.put(\"images\", result);\n                    images.add(results);\n\n                return images;\n            }\n\n        }\n</code></pre>\n\n<p></code></p>\n\n<hr>\n\n<p>a listener controller</p>\n\n<p><code><br>\n        /*\n         * Gallery methods\n        */</p>\n\n<pre><code>    @RequestMapping(method=RequestMethod.GET, value={\"/gallery\"})\n    public ModelAndView galleryDisplay(\n            HttpServletRequest request, \n            HttpServletResponse response,\n            @RequestParam(value=\"mode\", required=false) String mode\n        ) {\n            String message = \"search view for \"+mode;\n\n\n            List&lt;DBObject&gt; images = GalleryController.getGallery();\n            System.out.println(images);\n\n            String viewPage = \"gallery/galleryview\";\n\n            return new ModelAndView(viewPage, \"images\", images);\n    }\n</code></pre>\n\n<p></code></p>\n"},{"tags":["spring","autowired","scan","explicit"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":43,"score":3,"question_id":13176997,"title":"@Autowired doesn't work if component-scan removed","body":"<p>I'm facing the problem, that the annotation @Autowired doesn't work anymore (in all Java classes that uses this annotation) if I remove the component-scan tag from config</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n  &lt;context:component-scan base-package=\"efco.auth\" /&gt;\n\nhere are some beans...\n</code></pre>\n\n<p>There is only one class in the efco.auth package, and this one has no relation to the following class EfcoBasketLogic.</p>\n\n<p>and a class that uses @Autowired:</p>\n\n<pre><code>package efco.logic;\n    public class EfcoBasketLogic extends BasketLogicImpl {\n\n        @Autowired\n        private EfcoErpService erpService;\n</code></pre>\n\n<p>This Bean is defined in an other spring config file:</p>\n\n<pre><code>&lt;bean id=\"BasketLogic\" class=\"efco.logic.EfcoBasketLogic\"&gt;\n    &lt;property name=\"documentLogic\" ref=\"DocumentLogic\" /&gt;\n    &lt;property name=\"stateAccess\" ref=\"StateAccess\" /&gt;\n    &lt;property name=\"contextAccess\" ref=\"ContextAccess\" /&gt;\n  &lt;/bean&gt;\n</code></pre>\n\n<p>As you can see, erpService is not defined. The other three properties are on BasketLogicImpl and have setters.</p>\n\n<p>What I'm doing wrong?</p>\n"},{"tags":["java","spring","classpath","applicationcontext"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13177288,"title":"How to pass local filename to ClassPathXmlApplicationContext?","body":"<p>By \"local filename\" I mean that resource file is located in the same directory as class file. In the case below this is <code>JUnitRunner.class</code> file. Java's <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29\" rel=\"nofollow\"><code>getResource()</code></a> file can handle this if path does not start with <code>/</code>'</p>\n\n<p>I can't figure out, how to do the same <code>ClassPathXmlApplicationContext</code> constructor? </p>\n\n<pre><code>\npackage springtests;\n\nimport java.io.File;\nimport java.net.URISyntaxException;\nimport java.net.URL;\n\nimport org.junit.Test;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class JUnitRunner {\n\n    private final static Logger log = LoggerFactory.getLogger(JUnitRunner.class);\n\n    @Test\n    public void test() throws URISyntaxException {\n\n        String filename = \"test01.xml\";\n\n        URL url = getClass().getResource(filename);\n\n\n        File file = new File(url.toURI());\n        log.info(\"File exists: {}\", file.exists());\n\n        try {\n            new ClassPathXmlApplicationContext(filename);\n        }\n        catch(Exception e) {\n            log.error(\"Can't load context\", e);\n        }\n\n    }\n}\n</code></pre>\n\n<p>the output follows</p>\n\n<pre>\n15:32:27,375 3    [main] INFO  springtests.JUnitRunner  - File exists: true\n15:32:27,422 50   [main] INFO  org.springframework.context.support.ClassPathXmlApplicationContext  - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@ee3aa7: startup date [Thu Nov 01 15:32:27 MSK 2012]; root of context hierarchy\n15:32:27,475 103  [main] INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader  - Loading XML bean definitions from class path resource [test01.xml]\n15:32:27,477 105  [main] ERROR springtests.JUnitRunner  - Can't load context\norg.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [test01.xml]; nested exception is java.io.FileNotFoundException: class path resource [test01.xml] cannot be opened because it does not exist\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n\n...\n</pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>XML file is located in the same folder as class file. It is visible from the fact that <code>getResource()</code> see it.</p>\n"},{"tags":["java","spring","configuration"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13177064,"title":"Spring console app, load property file from outside of JAR","body":"<p>I'm using Spring in a console Java application. \nMy application will be deployed like:</p>\n\n<pre><code>folder/myJar.jar\nfolder/db/connection.properties\n</code></pre>\n\n<p>How do I load the <em>connection.properties</em> in a <code>PropertyPlaceholderConfigurer</code> in application context?</p>\n\n<p>I have tried</p>\n\n<pre><code>&lt;bean id=\"propertyConfigurer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n    &lt;property name=\"location\" value=\"db/connection.properties\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>but it won't work.</p>\n\n<p>I need it this way for my database username/password and other details.</p>\n"},{"tags":["java","spring"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":5252,"score":6,"question_id":829463,"title":"Spring prototype beans in combination with singleton beans and dependency injection. Is there an approach that is configuration only?","body":"<p>I have a singleton bean which needs for each call of a function to return a reference to a different (new) prototype bean. The only way that I can think of doing this is to programmatically retrieve a new prototype bean instance from the BeanFactory/ApplicatioContext by invoking its getBean() method. Code sample will follow...</p>\n\n<p>Is there a better way to do this? Only via configuration, hopefully? (Personally, I doubt there is...)  </p>\n\n<pre><code>&lt;bean id=\"protoBean\" scope=\"prototype\"\n        class=\"com.blahblah.ProtoBean\" /&gt;\n\n&lt;bean id=\"singletonBean\"\n        class=\"com.blahblah.SingletonBean\" /&gt;\n\npublic class ProtoBean {\n\n    ....\n}\n\npublic class SingletonBean {\n\n    private BeanFactory factory;\n\n    public ProtoBean dispense() {\n        return (ProtoBean) factory.getBean(\"protoBean\");\n    }\n\n    ....\n}\n</code></pre>\n"},{"tags":["java","sql","spring","orm","mybatis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13085631,"title":"Mybatis nested collection doesn't work correctly with column prefix","body":"<p>I need to set collection for object in another collection using mybatis mappings.</p>\n\n<p>It works for me w/o using columnPrefix, but I need it since there are a lot of repeteable columns.</p>\n\n<pre><code>     &lt;resultMap id=\"ParentMap\" type=\"org.example.mybatis.Parent\"&gt;\n        &lt;id column=\"Id\" jdbcType=\"VARCHAR\" property=\"id\" /&gt;\n        &lt;result column=\"Name\" jdbcType=\"VARCHAR\" property=\"name\" /&gt;\n        &lt;result column=\"SurName\" jdbcType=\"VARCHAR\" property=\"surName\" /&gt;\n\n        &lt;collection property=\"childs\"\n        javaType=\"ArrayList\" ofType=\"org.example.mybatis.Child\"\n        resultMap=\"ChildMap\" columnPrefix=\"c_\"/&gt;       \n    &lt;/resultMap&gt;\n\n&lt;resultMap id=\"ChildMap\" type=\"org.example.mybatis.Parent\"&gt;\n    &lt;id column=\"Id\" jdbcType=\"VARCHAR\" property=\"id\" /&gt;\n    &lt;result column=\"ParentId\" jdbcType=\"VARCHAR\" property=\"parentId\" /&gt;\n    &lt;result column=\"Name\" jdbcType=\"VARCHAR\" property=\"name\" /&gt;\n    &lt;result column=\"SurName\" jdbcType=\"VARCHAR\" property=\"surName\" /&gt;\n    &lt;result column=\"Age\" jdbcType=\"INTEGER\" property=\"age\" /&gt;\n\n    &lt;collection property=\"toys\"\n        javaType=\"ArrayList\" ofType=\"org.example.mybatis.Toy\"\n        resultMap=\"ToyMap\" columnPrefix=\"t_\"/&gt;   \n&lt;/resultMap&gt;\n\n&lt;resultMap id=\"ToyMap\" type=\"org.example.mybatis.Toy\"&gt;\n    &lt;id column=\"Id\" jdbcType=\"VARCHAR\" property=\"id\" /&gt;\n    &lt;result column=\"ChildId\" jdbcType=\"VARCHAR\" property=\"childId\" /&gt;\n    &lt;result column=\"Name\" jdbcType=\"VARCHAR\" property=\"name\" /&gt;\n    &lt;result column=\"Color\" jdbcType=\"VARCHAR\" property=\"color\" /&gt;\n&lt;/resultMap&gt;\n\n&lt;sql id=\"Parent_Column_List\"&gt;\n    p.Id, p.Name, p.SurName,\n&lt;/sql&gt;  \n\n&lt;sql id=\"Child_Column_List\"&gt;\n    c.Id as c_Id, c.ParentId as c_ParentId, c.Name as c_Name, c.SurName as c_Surname, c.Age as c_Age,\n&lt;/sql&gt;\n\n&lt;sql id=\"Toy_Column_List\"&gt;\n    t.Id as t_Id, t.Name as t_Name, t.Color as t_Color\n&lt;/sql&gt;  \n\n&lt;select id=\"getParent\" parameterType=\"java.lang.String\" resultMap=\"ParentMap\" &gt;\n    select \n    &lt;include refid=\"Parent_Column_List\"/&gt;\n    &lt;include refid=\"Child_Column_List\" /&gt;\n    &lt;include refid=\"Toy_Column_List\" /&gt;\n    from Parent p\n\n    left outer join Child c on p.Id = c.ParentId\n    left outer join Toy t on c.Id = t.ChildId\n    where p.id = #{id,jdbcType=VARCHAR}\n</code></pre>\n\n<p></p>\n\n<p>With columnPrefix all works fine, but nested toys collection is empty.\nSql query on database works correctly and all toys are joined.</p>\n\n<p>May be i missed something or this is bug with mybatis?</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":39,"score":4,"question_id":13173341,"title":"Spring MVC: Appropriate extension point for wrapping API Responses","body":"<p>I have a simple REST API, build using Spring MVC <code>@Controller</code>s and <code>@RequestMapping</code>. I'd like to start wrapping responses to provide additional with metadata.</p>\n\n<p>For example, given a call that would return</p>\n\n<pre><code>HTTP GET: /users/1\n{\n    \"userName\" : \"Jack Jackerson\"\n}\n</code></pre>\n\n<p>I'd like to wrap it, as follows:</p>\n\n<pre><code>{\n    \"metadata\" : \n    {\n        \"callLimit\" : \"50\",\n        \"callsRemaining\" : \"49\"\n    },\n    \"result\" :\n    {\n        \"userName\" : \"Jack Jackerson\"\n    }\n}  ..etc..\n</code></pre>\n\n<p>Additionally, I'd like to support standard set of parameters for managing lists (<code>limit</code> and <code>offset</code>).</p>\n\n<p>As this touches all the api methods, I'd like to implement it as a decorator of some spring internal service, so the methods themselves can focus on their actual logic, and keep this boilerplate stuff centralized.</p>\n\n<p>I've started down the path of decorating the <code>HttpMessageConverter</code>'s that are registered, and wrapping them with a decorator.</p>\n\n<p>However, this doesn't provide me access to the inbound request for methods that don't declare a <code>@RequestBody</code>.  (Many don't)</p>\n\n<p>Ideally, I need to be higher in the stack  - <code>RequestResponseBodyMethodProcessor.writeWithMessageConverters()</code> looks like a good candidate, but I don't know how to hook in here.</p>\n\n<p>What options are available with Spring MVC to implement this type of API-Wide processing of request / responses?</p>\n"},{"tags":["java","spring","testng","rollback"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13173634,"title":"How to stop rollback in TestNG?","body":"<p>I have a test like this:</p>\n\n<pre><code>@ContextConfiguration(locations = { \"file:war/WEB-INF/application-context.xml\" })\npublic class ServiceImplTest extends AbstractTestNGSpringContextTests\n{\n    @Autowired\n    private Service service;\n\n    @Rollback(false)\n    @Test\n    public void testCreate()\n    {\n           .....\n              //save an entity to table_A\n      service.save(a);\n    }\n}\n</code></pre>\n\n<p>The table_A will be cleaned up; how to stop this cleaning action?</p>\n"},{"tags":["java","spring"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":774,"score":1,"question_id":3625488,"title":"applicationContext-service.xml problem definitions","body":"<p><br>\nWorking with spring, below, the code of applicationContext-service.xml:</p>\n\n<pre><code>&lt;bean id=\"mediaObjectService\" class=\"path.MediaObjectServiceImpl\"&gt;\n\n        &lt;property name=\"mediaObjectDao\" &gt;\n            &lt;ref bean=\"mediaObjectDao\"/&gt;\n        &lt;/property&gt;\n        &lt;property name=\"semanticQuestionDao\" &gt;\n            &lt;ref bean=\"semanticQuestionDao\"/&gt;\n        &lt;/property&gt; \n        &lt;aop:scoped-proxy/&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>And while doing a test, I get his error:</p>\n\n<blockquote>\n  <p>org.springframework.beans.factory.BeanCreationException:\n  Error creating bean with name\n  'scopedTarget.mediaObjectService'\n  defined in class path resource\n  [applicationContext-service.xml]:\n  Initialization of bean failed; nested\n  exception is\n  java.lang.NoSuchMethodError:\n  net.sf.cglib.proxy.Enhancer.setInterceptDuringConstruction(Z)V</p>\n</blockquote>\n\n<p>As I know, the session scoped objects always have a prefix called <code>scopedTarget.</code> to the name of the bean-id.<br>\nSo, if I am right, <code>mediaObjectService</code> is the bean-id, which is right declarated.<br>\nMaybe I am wrong, but anyway, I don't see the error I made.</p>\n\n<p>Any help??</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","android","spring","reflection","dalvik"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":205,"score":3,"question_id":11421085,"title":"Implementing Spring-like package scanning in Android","body":"<p>I'm attempting to implement a package-scanning feature, similar to Spring's <code>component-scan</code>, for the Android framework I'm developing. Basically, I would like to be able to specify a base package, e.g. <code>com.foo.bar</code> and retrieve all <code>Class</code> instances that have a particular annotation. I don't want to have to register every component with my framework as that would defeat the purpose of the auto scanning.</p>\n\n<p>Based on my research, it seems that it's not possible with Java to retrieve resources given a package name using reflection. However, I briefly looked into the <a href=\"http://code.google.com/p/reflections/\" rel=\"nofollow\">Reflections framework</a>, and I'm wondering if there is an Android-compatible equivalent. If not, perhaps there is a slightly less obvious way to accomplish what I want to do.</p>\n\n<p>I looked into the Spring source a bit to see how they achieved this, but I don't think what they are doing would work within the Dalvik runtime.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Currently, the below code has been the best I can do to retrieve all classes that contain a specific annotation, but frankly it's a pretty poor solution. It makes some really unsafe assumptions about the <code>ClassLoader</code> plus it scans (and loads) all application classes.</p>\n\n<pre><code>public Set&lt;Class&lt;?&gt;&gt; getClassesWithAnnotation(Class&lt;? extends Annotation&gt; annotation) {\n    Set&lt;Class&lt;?&gt;&gt; classes = new HashSet&lt;Class&lt;?&gt;&gt;();\n    Field dexField = PathClassLoader.class.getDeclaredField(\"mDexs\");\n    dexField.setAccessible(true);\n    PathClassLoader classLoader = (PathClassLoader) Thread.currentThread().getContextClassLoader();\n    DexFile[] dexs = (DexFile[]) dexField.get(classLoader);\n    for (DexFile dex : dexs) {\n        Enumeration&lt;String&gt; entries = dex.entries();\n        while (entries.hasMoreElements()) {\n            String entry = entries.nextElement();\n            Class&lt;?&gt; entryClass = dex.loadClass(entry, classLoader);\n            if (entryClass != null &amp;&amp; entryClass.isAnnotationPresent(annotation)) {\n                classes.add(entryClass);\n            }\n        }\n    }\n    return classes;\n}\n</code></pre>\n"},{"tags":["java","spring","tomcat","jasper-reports","jstl"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":158,"score":3,"question_id":12943030,"title":"OutOfMemoryError: PermGen Space -- Jasper Report with Spring running on Tomcat","body":"<p>Our web application encounter a complicated situation</p>\n\n<p>It is a Spring application developed by STS/<code>Tomcat 7</code>. After the application been integrated with <code>Jasper report 4.6.0</code>, it always throw `OutOfMemoryError:  PermGen Space. Then the only way to get it work is to restart the application. But after a while it happen again.\nHere is log before the exception:</p>\n\n<pre><code>Oct 17, 2012 3:42:27 PM org.apache.jasper.compiler.TldLocationsCache tldScanJar\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nOct 17, 2012 3:42:30 PM org.apache.catalina.core.ApplicationDispatcher invoke\nSEVERE: Servlet.service() for servlet jsp threw exception\n</code></pre>\n\n<p>Here is a section within the exception where I found something about <code>Jasper</code>:</p>\n\n<pre><code>at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:442)\nat org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)\nat org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)\nat org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)\nat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)\nat org.apache.jasper.servlet.JspServletWrapper.loadTagFile(JspServletWrapper.java:240)\nat org.apache.jasper.compiler.TagFileProcessor.loadTagFile(TagFileProcessor.java:578)\nat org.apache.jasper.compiler.TagFileProcessor.access$000(TagFileProcessor.java:49)\nat org.apache.jasper.compiler.TagFileProcessor$TagFileLoaderVisitor.visit(TagFileProcessor.java:655)\n</code></pre>\n\n<p>Here are a few findings when the situation occurs:</p>\n\n<ol>\n<li><p>The issue can happen on page without any Jasper Report components. It seems the Jasper Report bean is trying to find a tag lib all the time when <code>a request is processed by the back end and responded to the front end</code>. Normally from log file I can see above exception will not throw until all back end operations(JPA management) are complete</p></li>\n<li><p>When run log4J on debug mode, I see tons of information showing something like parsing/rendering the all components from Jasper template(textfields, pen, box...), there is a small cut from the huge log:</p>\n\n<pre><code>2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester.sax -- startElement(http://jasperreports.sourceforge.net/jasperreports,textElement,textElement)\n2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester --   Pushing body text ''\n2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester --   New match='jasperReport/summary/band/textField/textElement'\n2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester --   Fire begin() for FactoryCreateRule[className=net.sf.jasperreports.engine.xml.JRTextElementFactory, attributeName=null, creationFactory=net.sf.jasperreports.engine.xml.JRTextElementFactory@12dc6007]\n2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester -- [FactoryCreateRule]{jasperReport/summary/band/textField/textElement} New net.sf.jasperreports.engine.design.JRDesignTextField\n2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester.sax -- ignorableWhitespace()\n</code></pre>\n\n<p>Still, this log is generated when a request to the page which does not contains any Jasper component.</p></li>\n</ol>\n\n<p>I did some research but still cannot find the solution to this issue. </p>\n\n<ol>\n<li><p>The first question is even there is a <code>jasperreport bean</code> in the application why it is always running when it is not even autowired with current service(meaning current page doesn't have any jasper component). Is there a solution/answer to this situation?</p></li>\n<li><p>Also from the exception message\n     At least one JAR was scanned for TLDs yet contained no TLDs.\n     at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:442)</p>\n\n<p>should comes from Tomcat, and <code>Tomcat never contains any JSTL jar</code>, then I assume it cannot find a match TLD to parse jasper report hence do a full scan of all jars. If so, then how come there is huge amount of debug logs from <code>org.apache.commons.digester.Digester</code> actually seems busy on parsing the jasper template?</p></li>\n</ol>\n\n<p>In general, make this thread is just try to figure out a solution to the probelm, and also find an answer to why Jasper is so active on a place doesn't require it, and how we can let tomcat properly parsed the templates?</p>\n\n<p>Apologize if too verbose, and thanks for any hints.</p>\n"},{"tags":["java","spring","jsp","spring-mvc","cookies"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13173635,"title":"Using Cookies to save the values in Spring MVC form fields","body":"<p>Lets say I have a <strong>Spring MVC</strong> form like this:</p>\n\n<pre><code>&lt;form:form action=\"${pageContext.servletContext.contextPath}/secure/main.htm\" commandName=\"secure/main\"&gt;\n\n    &lt;form:input path=\"operatorId\" cssClass=\"textField\"/&gt;\n\n    &lt;form:input path=\"clientId\" cssClass=\"textField\"/&gt;\n\n&lt;/form:form&gt;\n</code></pre>\n\n<p>What I am trying to do is to store those fields values in the cookies that they will be saved other time user logins into the system. It is similar to <code>Remember Me</code> checkbox, but just without the checkbox. My controller looks like this:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.POST)\npublic String processAuthenticate(@Valid AuthenticationForm authenticationForm,\n                                  Map&lt;String, Object&gt; model,\n                                  HttpServletRequest request,\n                                  HttpServletResponse response) {\n\n    authenticationForm = (AuthenticationForm) model.get(\"authenticationForm\");\n\n    Cookie[] cookies = request.getCookies();\n    for (Cookie cookie : cookies) {\n        System.out.println(cookie.getValue());\n        if (cookie.getName().equals(\"clientId\")) {\n            authenticationForm.setClientId(cookie.getValue());\n        } else if (cookie.getName().equals(\"operatorId\")) {\n            authenticationForm.setOperatorId(cookie.getValue());\n        }\n    }\n\n    String clientId = authenticationForm.getClientId();\n    String operatorId = authenticationForm.getOperatorId();\n\n    Cookie cookieClientId= new Cookie(\"clientId\", clientId);\n    cookieClientId.setMaxAge(COOKIE_EXPIRY);\n    response.addCookie(cookieClientId);\n\n    Cookie cookieOperatorId = new Cookie(\"operatorId\", operatorId);\n    cookieOperatorId.setMaxAge(COOKIE_EXPIRY);\n    response.addCookie(cookieOperatorId);\n\n    return MAIN_FORM_MAPPING;\n}\n</code></pre>\n\n<p>But when I click the button and this method is invoked, my values are not saved. It is the first time I am trying to use <code>Cookies</code> so maybe I am missing something? I was following <a href=\"http://stackoverflow.com/questions/9785254/remember-me-in-jsp-login-page\">this SO</a> question. But in my case this does not work. Anybody could advice me with the solution to this problem?</p>\n"},{"tags":["spring","naming-conventions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13174070,"title":"Spring Naming Convention","body":"<p>I'm working on a Spring/JSF application, which has a typical presentation/service/dao layer architecture. Classes in the service layer are name XXXService, where XXX is some domain model object. e.g. UserService, EmployeeService etc. The problem is, in this application, the term <strong><em>Service</em></strong> has a different meaning and is used extensively in the domain model objects, documentation etc. The result is that there are classes that look like this</p>\n\n<p><code>\nServiceService {</p>\n\n<pre><code>    Service createService(ServiceConfig serviceConfig);\n\n    void updateService(Service service);    \n</code></pre>\n\n<p>}\n</code></p>\n\n<p>And client code that look like this (this is actual code)</p>\n\n<p><code>\nServiceService serviceService = ServiceLocator.locate(\"serviceService\");</p>\n\n<p>Service service = serviceService.createService(ServiceConfig.DEFAULT_CONFIG);\n</code></p>\n\n<p>Although this follows the naming convention perfectly, it doesn't read very well.</p>\n\n<p>I'm trying to refactor the application and apply a more sensible naming convention. The best I can think of is to rename the <strong><em>Service</em></strong> domain object to <strong><em>Svc</em></strong> or something like that, but I'm not entirely satisfied with that solution. Any suggestions?</p>\n"},{"tags":["spring","junit","webdriver"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13172946,"title":"Loading applicationcontext on a single test run","body":"<p>Here is my test context</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \nxmlns:mvc=\"http://www.springframework.org/schema/mvc\" \nxmlns:p=\"http://www.springframework.org/schema/p\" \nxmlns:aop=\"http://www.springframework.org/schema/aop\" \nxmlns:tx=\"http://www.springframework.org/schema/tx\" \nxmlns:context=\"http://www.springframework.org/schema/context\" \nxsi:schemaLocation=\"http://www.springframework.org/schema/beans \nhttp://www.springframework.org/schema/beans/spring-beans-3.0.xsd \nhttp://www.springframework.org/schema/aop\nhttp://www.springframework.org/schema/aop/spring-aop-3.0.xsd \nhttp://www.springframework.org/schema/tx\nhttp://www.springframework.org/schema/tx/spring-tx-3.0.xsd \nhttp://www.springframework.org/schema/mvc \nhttp://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\nhttp://www.springframework.org/schema/context \nhttp://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n\n    &lt;bean id=\"firefoxDriver\" class=\"org.openqa.selenium.firefox.FirefoxDriver\"/&gt;\n\n    &lt;bean id=\"htmlUnitDriver\" class=\"org.openqa.selenium.htmlunit.HtmlUnitDriver\"/&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>A parent class for all the test classes, where I inject the bean</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration( \"/testContext.xml\") \n\n\npublic class VisibleTestSuite {\n\n    private static WebDriver  driver;\n\n\n\n@AfterClass\n  public static void tearDown() throws InterruptedException {\n      Thread.sleep(3000);\n  }\n    /**\n     * @return the driver\n     */\n    public WebDriver getDriver() {\n        return driver;\n    }\n\n    /**\n     * @param aDriver the driver to set\n     */\n    @Resource(name=\"firefoxDriver\")\n    public  void setDriver(WebDriver Driver) {\n        driver = Driver;\n    }\n}\n</code></pre>\n\n<p>I use Netbeans 7.0. This works fine, when I run all my test in Build, but when I try to run a single test class by choosing Test File, I get</p>\n\n<pre><code>Failed to load ApplicationContext\njava.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)\nCaused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 11 in XML document from class path resource [testContext.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'root'.\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:217)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:102)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:57)\n    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)\n    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)\nCaused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'root'.\n    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)\n    at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\n    at org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)\n    at org.apache.xerces.impl.xs.XMLSchemaValidator.startElement(Unknown Source)\n    at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)\n    at org.apache.xerces.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(Unknown Source)\n    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\n    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)\n    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)\n    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\n</code></pre>\n\n<p>Please help me to get applicationcontext loaded also on single test run!</p>\n"},{"tags":["mysql","spring","maven","maven-tomcat-plugin","maven-eclipse-plugin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13157059,"title":"Adding mySql to eclipse project with maven tomcat plugin","body":"<p>I have a spring mvc project downloaded from the web and fully working. I'm using maven and maven tomcat plugin to manage dependencies and to run the webapp in the built-in tomcat. I'm trying to add mySql support in my project. Since i'm new to maven and maven tomcat plugin, I don't know hot to do this. Before i tried to add mysql, all was working and i was able to launch my web app simply executing a tomcat:run maven goal.</p>\n\n<p>For now, when i execute tomcat:run i get a</p>\n\n<pre><code>com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n</code></pre>\n\n<p>Here is what i've already done after some reading around the web:\nI added dependencies for mysql driver (and Hibernate annotations too since i want to use it) in my pom.xml, and specified the dependency for tomcat plugin:</p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;mysql&lt;/groupId&gt;\n&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n&lt;version&gt;5.1.9&lt;/version&gt;\n</code></pre>\n\n<h2>    </h2>\n\n<pre><code>&lt;plugin&gt;\n&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n&lt;artifactId&gt;tomcat-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;1.1&lt;/version&gt;\n&lt;configuration&gt;\n        &lt;mode&gt;context&lt;/mode&gt;\n    &lt;/configuration&gt;\n&lt;dependencies&gt;      \n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;version&gt;5.1.9&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;/plugin&gt;                       \n</code></pre>\n\n<p>You can also notice a  tag to specify to use a context.xml file. But I don't know where to put this file. I readed it should be generated automatically in tomcat/conf, but it's not present. So i added it manually with this content:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Context&gt;\n     &lt;Resource name=\"jdbc/mkyongdb\" auth=\"Container\" type=\"javax.sql.DataSource\"\n           maxActive=\"50\" maxIdle=\"30\" maxWait=\"10000\"\n           username=\"root\" password=\"password\" \n           driverClassName=\"com.mysql.jdbc.Driver\"\n           url=\"jdbc:mysql://localhost:3306/mkyongdb\"/&gt;\n\n&lt;/Context&gt;\n</code></pre>\n\n<p>Then in web.xml, located in tomcat/conf i added:</p>\n\n<pre><code>&lt;resource-ref&gt;\n&lt;description&gt;MySQL Datasource example&lt;/description&gt;\n&lt;res-ref-name&gt;jdbc/mkyongdb&lt;/res-ref-name&gt;\n&lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n&lt;res-auth&gt;Container&lt;/res-auth&gt;\n&lt;/resource-ref&gt;\n</code></pre>\n\n<p>I placed the same content in src/main/webapp/META-INF/context.xml and in src/main/webapp/WEB-INF/web.xml</p>\n\n<p>With all these configuration, the error mentioned above doesn't appears. But if i try to use hibernate adding </p>\n\n<pre><code>&lt;bean id=\"dataSource\" \n     class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n&lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n&lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/mkyongdb\" /&gt;\n&lt;property name=\"username\" value=\"root\" /&gt;\n&lt;property name=\"password\" value=\"password\" /&gt;\n&lt;/bean&gt;\n&lt;bean\n    id=\"sessionFactory\"\n    class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\" &gt;\n    &lt;property name=\"dataSource\" &gt;\n        &lt;ref bean=\"dataSource\" /&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\" &gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.hbm2ddl.auto\" &gt;create-drop&lt;/prop&gt;\n            &lt;prop key=\"hibernate.dialect\" &gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\" &gt;true&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=\"annotatedClasses\" &gt;\n        &lt;list&gt;\n            &lt;value&gt;org.mose.grouporganizer.entity.AccelerometerFeatures&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>then i get the comunication link failure. What i'm missing?\nIf it's needed i can add the full stack trace.</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12695099,"title":"Spring, JSF, How to send events between beans from two different sessions","body":"<p>I want to send event or message between beans from different session instances.</p>\n\n<p><em>Service which send events:</em></p>\n\n<pre><code>@Service\n@Scope(\"singleton\")\npublic class ServiceA\n{\n   void methodA()\n   {      \n      ...\n      messanger.post(new ReloadColorsEvent());  \n   }\n}\n</code></pre>\n\n<p><em>Bean which handles event:</em></p>\n\n<pre><code> @Bean\n @Scope(\"session\")\n public class EventHandler() \n {\n    @PostContruct\n    void registerEvents()\n    {\n      messanger.register(this);\n    }   \n\n    void handleFun(ReloadColorEvent reloadColorEvent)\n    {   ... \n    }\n }\n</code></pre>\n\n<p>Let's say that we have 2 logged users. So, 2 sessions were created (<em>session 1</em> and <em>session 2</em>). Session 1 and Session 2 have own <code>EventHandlers</code>.\nAfter <code>methodA</code> is called event is send.</p>\n\n<p>Now, I want to handle this event by <code>handleFun</code> method in <code>EventHandler</code> object from session1 and session2.</p>\n"},{"tags":["spring","hibernate","tomcat","spring-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13172738,"title":"Can I initialize Spring via Tomcats web xml (../webapps/WEB-INF/web.xml)?","body":"<p>Thanks to the UNUSUAL deployment of Tomcat6 I need to deploy my web app that is using the Spring &amp; Hibernate on a server where access to the WAR deployment's web.xml at <em>/webapps/MyDeployment/WEB-INF/web.xml</em> is not allowed. </p>\n\n<p>So I need to know if such a deployment is even possible, Where we will initialize the spring framework in the serever's web.xml at <em>/webapps/WEB-INF/web.xml</em> and not use the WAR's web.xml ?</p>\n\n<p>Below is the WAR's web.xml that I am currently using at my environment,</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\nxsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\nid=\"WebApp_ID\" version=\"2.5\"&gt;\n&lt;display-name&gt;abcd&lt;/display-name&gt;\n\n&lt;!--Here we specify about the DispatcherServlet class in the Web Deployment \n    Descriptor --&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;*.abcd&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;*.xyz&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;*.pqr&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p></p>\n\n<p>Unfortunately changes in the Tomcat configuration is not allowed,</p>\n\n<p>Any suggestions will be highly appreciated.</p>\n"},{"tags":["java","eclipse","spring","aop"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":785,"score":3,"question_id":10214875,"title":"Getting message \"The type org.aopalliance.aop.Advice cannot be resolved.\" in spring java program","body":"<p>I'm trying to set up the spring AOP example from this page:</p>\n\n<p><a href=\"http://www.javabeat.net/articles/51-introduction-to-springs-aspect-oriented-programminga-4.html\" rel=\"nofollow\">http://www.javabeat.net/articles/51-introduction-to-springs-aspect-oriented-programminga-4.html</a></p>\n\n<p>I'm using Eclipse Indigo as my development environment. </p>\n\n<p>On these lines:</p>\n\n<pre><code>public class LogAfterThrowsAdvice implements ThrowsAdvice{\n\npublic class LogAfterReturningAdvice implements AfterReturningAdvice{ \n\npublic class LogBeforeCallAdvice implements MethodBeforeAdvice {\n</code></pre>\n\n<p>I'm getting the message:</p>\n\n<blockquote>\n  <p>The type org.aopalliance.aop.Advice cannot be resolved. It is\n  indirectly referenced from required .class files</p>\n</blockquote>\n\n<p>I downloaded the org.aopalliance package from here:</p>\n\n<p><a href=\"http://sourceforge.net/projects/aopalliance/\" rel=\"nofollow\">http://sourceforge.net/projects/aopalliance/</a></p>\n\n<p>The jar file is aopalliance-alpha1.jar. It does not contain the path org.aopalliance.aop. I'm wondering if I should be using a different aopalliance jar file?</p>\n"},{"tags":["spring","mule"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13155381,"title":"Mule JMX agent - Need to update port value at runtime","body":"<p>I am using a spring property 'port', but the value of this port variable changes dynamically when the application is running and I want to access this new dynamic value everytime its value changes. But I am getting an exception at startup when using the configuration below.</p>\n\n<pre><code>&lt;custom-agent name=\"jolokia-agent\" class=\"org.jolokia.mule.JolokiaMuleAgent\"&gt;\n    &lt;spring:property name=\"port\" value=\"#[app.registry.appConf.port]\"&lt;/spring:property&gt;\n&lt;/custom-agent&gt;\n</code></pre>\n\n<p>appConf is a Spring Bean.</p>\n\n<p>Snippet of the error:</p>\n\n<pre><code>10/31/12 15:18:44.244 ERROR [main] DefaultMuleApplication - null\n java.lang.NumberFormatException: For input string: \"[app.registry.appConf.port]\"\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\n    at java.lang.Integer.parseInt(Integer.java:449)\n    at java.lang.Integer.valueOf(Integer.java:528)\n    at java.lang.Integer.decode(Integer.java:958)\n    at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:155)\n    at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.j    ava:115)\n    at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.ja    va:434)\n    at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:4    06)\n    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.ja    va:163)\n    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470)\n    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:516)\n    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:510)\n</code></pre>\n\n<p>The application started when I changed the value attribute to a Spring Expression<br/>\n    <strong>value=\"#{appConf.port}\"</strong><br/>\nbut the value is not getting updated at runtime. </p>\n\n<p>I need to change this value at run-time. How can this be achevied?</p>\n"},{"tags":["java","spring","hibernate","flex","blazeds"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13171782,"title":"How to Append Login userid into url using spring Flex?","body":"<p>In my Sample Application i'm using Spring+Hibernate+Flex using BlazeDs plugin.\nActually i have an <code>Login mxml</code> file in flex.when authenticate user login it shows <code>LoginSuccess</code> (it is moving Service Page it is another component in flex).</p>\n\n<pre><code>With out Login:http://localhost:8080/A2M/A2M-debug/A2M.html\nAfter Login:http://localhost:8080/A2M/A2M-debug/A2M.html\n\nActually i want adding userid and password into url after login.\n</code></pre>\n\n<p>why i'm asking this one is when we are copy url(appending username &amp; password) another tab of browser it is continue that session only. </p>\n\n<p>So <code>How to add userid into Url?</code>\nPlease help me...give me your Valuable Suggestion or reference..</p>\n\n<pre><code>Thank you\n</code></pre>\n"},{"tags":["html","spring","spring-mvc","listboxitem"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13166519,"title":"HTML select options element","body":"<p>I have a list of colors i am retrieving from the database the list contains the colorCode e.g. #FFEBCD, #FFFFFF and so on i would like to set the background color of each option in the list to its background color. Can someone tell me if this is possible and how can i get the each list items to reflect their color using the color code. Under is the code. I want to really show the color as the background of the list item.</p>\n\n<pre><code>   &lt;li&gt;\n        &lt;form:label for=\"eyeColorId\" path=\"eyeColorId\"&gt;Select Eye Color&lt;/form:label&gt;        \n        &lt;form:select path=\"eyeColorId\" id=\"eyeColorId\"&gt;\n        &lt;form:options items = \"${eyeColor.eyeColorList}\" itemValue=\"colorCode\" itemLabel=\"colorDesc\" style=\"background-color: ${colorCode}\"/&gt;\n        &lt;/form:select&gt;          \n        &lt;form:errors path=\"eyeColorId\" id=\"errors\"/&gt;\n    &lt;/li&gt;   \n</code></pre>\n"},{"tags":["java","spring","collections","binding","velocity"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":454,"score":0,"question_id":7070210,"title":"Binding a variable collection inside a Spring enabled Velocity template","body":"<p>Suppose I have the following form backing object for a Velocity 1.5 template:</p>\n\n<pre><code>public class Bucket {\n\n    String data1;\n    String data2;\n    String data3;\n    String data4;\n\n    // getters setters blah blah...\n}\n</code></pre>\n\n<p>I'd like to bind these four String attributes to the following java.util.Map of Strings, inside four drop down single select controls:</p>\n\n<pre><code>\"a\" : \"1\"\n\"b\" : \"2\"\n\"c\" : \"3\"\n\"d\" : \"4\"\n</code></pre>\n\n<p>If inside my page's controller Model, I name the backing object \"boData\", and the value map \"labelKeys\",  velocity can bind the backing object's properties for me:</p>\n\n<pre><code>#springFormSingleSelect( \"boData.data1\" $labelKeys \"\")\n#springFormSingleSelect( \"boData.data2\" $labelKeys \"\")\n#springFormSingleSelect( \"boData.data3\" $labelKeys \"\")\n#springFormSingleSelect( \"boData.data4\" $labelKeys \"\")\n</code></pre>\n\n<p>However, is there a way to avoid invoking #springFormSingleSelect four times? I mean, there's a pattern here, but I can't see the way to express it in Velocity's terms.</p>\n\n<p>If for example, I defined instead these four String attributes inside class Bucket as a Java array, or a java.util.List, how could I tell velocity that I need it to bind a drop down single select control for each element in the List?</p>\n\n<pre><code>public class Bucket {\n    List&lt;String&gt; dataItems = new ArrayList&lt;String&gt;();\n    // getter, setter...\n}\n</code></pre>\n\n<p>I thank you for any insight you could provide!</p>\n"},{"tags":["java","spring","jackson"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13167078,"title":"Is it thread safe when adding FiterProvider on objectMapper on perRequest basis in spring mvc?","body":"<p>I have following  way of adding Custom Object Mapper.</p>\n\n<p></p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters&gt;\n        &lt;bean class=\"org.springframework.http.converter.json.CMSMappingJacksonHttpMessageConverter\"&gt;\n            &lt;property name=\"objectMapper\" ref=\"jsonMapper\"/&gt;\n        &lt;/bean&gt;\n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>and then in controller I am using</p>\n\n<p>@Autowired\n  private ObjectMapper jsonMapper;</p>\n\n<p>in one of the action methods I am</p>\n\n<pre><code>@RequestMapping(produces = \"application/json\", method = RequestMethod.GET)\npublic\n@ResponseBody\nResponse get(){\n    jsonMapper.setFilters(new SimpleFilterProvider().addFilter(dynamic_per_request));\n    return service.get();\n}\n</code></pre>\n\n<p>I am just worried it will not be thread safe. Is it true? If yes how can I make it thread safe?</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":13060582,"title":"org.springframework.beans.factory.BeanCreationException Error creating bean with name 'certificateOrderRepository'","body":"<p>Hello i'm a newbee in spring framework and i am trying to do testing using jUnit. Whenever i run my test, i keep on having this error. can anyone please help me.</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'certificateOrderRepository': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'systemConfigurationDto' defined in file [E:\\confidential\\Global_Sign\\40_Make\\royaljelly-pc\\target\\test-classes\\test-applicationContext-bean.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'mtaDto.password' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Nested property in path 'mtaDto.password' does not exist; nested exception is org.springframework.beans.NotReadablePropertyException: Invalid property 'mtaDto' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Bean property 'mtaDto' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:300)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)\n    at org.springframework.test.AbstractSingleSpringContextTests.createApplicationContext(AbstractSingleSpringContextTests.java:216)\n    at org.springframework.test.AbstractSingleSpringContextTests.loadContextLocations(AbstractSingleSpringContextTests.java:192)\n    at org.springframework.test.AbstractSingleSpringContextTests.loadContext(AbstractSingleSpringContextTests.java:172)\n    at org.springframework.test.AbstractSpringContextTests.getContext(AbstractSpringContextTests.java:133)\n    at org.springframework.test.AbstractSingleSpringContextTests.setUp(AbstractSingleSpringContextTests.java:101)\n    at junit.framework.TestCase.runBare(TestCase.java:132)\n    at org.springframework.test.ConditionalTestCase.runBare(ConditionalTestCase.java:79)\n    at junit.framework.TestResult$1.protect(TestResult.java:110)\n    at junit.framework.TestResult.runProtected(TestResult.java:128)\n    at junit.framework.TestResult.run(TestResult.java:113)\n    at junit.framework.TestCase.run(TestCase.java:124)\n    at junit.framework.TestSuite.runTest(TestSuite.java:232)\n    at junit.framework.TestSuite.run(TestSuite.java:227)\n    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:81)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'systemConfigurationDto' defined in file [E:\\confidential\\Global_Sign\\40_Make\\royaljelly-pc\\target\\test-classes\\test-applicationContext-bean.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'mtaDto.password' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Nested property in path 'mtaDto.password' does not exist; nested exception is org.springframework.beans.NotReadablePropertyException: Invalid property 'mtaDto' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Bean property 'mtaDto' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1361)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:435)\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:409)\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:541)\n    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:147)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:297)\n    ... 30 more\nCaused by: org.springframework.beans.NotWritablePropertyException: Invalid property 'mtaDto.password' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Nested property in path 'mtaDto.password' does not exist; nested exception is org.springframework.beans.NotReadablePropertyException: Invalid property 'mtaDto' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Bean property 'mtaDto' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\n    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:893)\n    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)\n    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1358)\n    ... 43 more\nCaused by: org.springframework.beans.NotReadablePropertyException: Invalid property 'mtaDto' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Bean property 'mtaDto' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\n    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:707)\n    at org.springframework.beans.BeanWrapperImpl.getNestedBeanWrapper(BeanWrapperImpl.java:555)\n    at org.springframework.beans.BeanWrapperImpl.getBeanWrapperForPropertyPath(BeanWrapperImpl.java:532)\n    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:890)\n    ... 46 more\n</code></pre>\n"},{"tags":["spring","session","gwt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13168648,"title":"null pointer exception from Session","body":"<p>I'm using <a href=\"http://code.google.com/p/spring4gwt/\" rel=\"nofollow\"><code>spring4gwt</code></a> in my project.</p>\n\n<p>I have the following login service implementation:</p>\n\n<pre><code>@Service(\"loginService\")\npublic class LoginServiceImpl extends RemoteServiceServlet implements LoginService {\n\n    @Override\n    @Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class)\n    public UserBean checkUser(String userName, String password) throws Exception {\n\n        HttpSession httpSession = getThreadLocalRequest().getSession();\n\n    }\n}\n</code></pre>\n\n<p>When I call the <code>loginService.checkUser(\"test\",\"test\")</code> (In hosted mode), I get a null pointer exception, as <code>getThreadLocalRequest()</code> returns NULL instead of the actual session.</p>\n\n<p>I didn't try in web mode yet.</p>\n\n<p>Why would I get a null session? Does it have something to do with spring4gwt?</p>\n"},{"tags":["java","spring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13157808,"title":"Spring Form Tag Error (Binding Result)","body":"<p>I am teaching myself Spring Form tags, and have run into what is probably a simple error that I haven't been able to solve.  I get the following error when I launch this app in a browser:</p>\n\n<pre><code>java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'index' available as request attribute\n</code></pre>\n\n<p>I've tried most of the fixes that came up in a Google search to no avail.  Can someone spot where I went wrong?  Below are the relevant components.  Thanks very much.</p>\n\n<p>Controller:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/registration\")\npublic class LoginController {\n\n    @RequestMapping(method = RequestMethod.GET)\n    public String setupForm(ModelMap model) {\n        Registration registration = new Registration();\n        model.addAttribute(\"registration\", registration);\n        return \"index\";\n\n    }\n\n\n    @RequestMapping(method = RequestMethod.POST)\n    public String onSubmit(@ModelAttribute(\"registration\") Registration registration, Map model) {\n        return \"success\";\n    }\n}\n</code></pre>\n\n<p>JSP (/index.jsp):</p>\n\n<pre><code>        &lt;form:form commandName=\"index\"&gt;\n        &lt;table border=\"0\" cellspacing=\"12\"&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;form:input path=\"email\"/&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;form:password path=\"password\"/&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;input type=\"submit\" value=\"Submit\"/&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/form:form&gt;\n</code></pre>\n\n<p>Command Object (Registration.java) :</p>\n\n<pre><code>public class Registration {\n    private String password;\n    private String email;\n    // getters,setters\n</code></pre>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13165806,"title":"Spring Scope annotation value","body":"<p>Does the Spring framework provide String constants to replace the \"prototype\" string literal value in the example annotation below?</p>\n\n<pre><code>@Service\n@Scope(\"prototype\")\npublic class CustomerService \n{\n......\n}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13165800,"title":"How to return an html file using Spring MVC controller","body":"<p>I'm working on a website using both WaveMaker and Springsource MVC.</p>\n\n<p>The entry generated by WaveMaker is named 'index.html'. I import all browser-side code into the /view directroy of an MVC project. And try to configure ContextLoadListener to map it into an uri. Using:</p>\n\n<pre><code>@RequestMapping(value = \"/index\", method = RequestMethod.GET)\npublic String testIndex() {\n\n    return \"index.html\";\n}\n</code></pre>\n\n<p>Then I got the following error testing it:</p>\n\n<pre><code>SEVERE: PWC6117: File \"C:\\glassfish3\\glassfish\\domains\\domain1\\eclipseApps\\TribblesDashboard\\WEB-INF\\views\\index.html.jsp\" not found\n</code></pre>\n\n<p>How do I fix it?</p>\n"},{"tags":["java","spring","api","finance"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":774,"score":4,"question_id":4904690,"title":"Direct Deposit via Authorize.net's eCheck.net API in Java","body":"<p>How do I start, if I'd like to write spring online application that would depositing money from <code>business bank account</code> to <code>customer bank account</code>.</p>\n\n<p>It is the common scenario where you keep balance for customer and when they decide to withdraw they can opt for bank account deposit. </p>\n\n<p>I'm looking for something in Java. Examples and real open source project usage would be greatly appreciated!</p>\n\n<p>UDPATE:<br>\nAs hinted in comments <code>Automatic Clearing House</code> or <code>ACH</code> (aka <code>Electronic Funds Transfer</code> or <code>EFT</code>) is something I would be very interested to see in Java API example or project.</p>\n\n<h3>How do you create ACH or EFT with Java <a href=\"http://www.authorize.net/support/eCheck.pdf\" rel=\"nofollow\">Authorize.net's eCheck.net API</a> ?</h3>\n"},{"tags":["java","web-services","spring","gwt"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13154194,"title":"How should I communicate with Spring backend - GWT front-end + mobile devices","body":"<p>I'm developing a server-client application. It is a service that is supposed to be used by thousands of users so it should scale well. The server side is done in Spring + JPA(Hibernate) and it provides about 80 API methods. There will be multiple clients - GWT webapp, mobile devices clients (iOS, Android, Windows) + a simple desktop client (Eclipse RCP / To be decided).</p>\n\n<p>I'm considering various ways to connect to the server side. My ideas are (maybe there are some other, better ways):</p>\n\n<ol>\n<li><strong>Use SOAP Webservices to expose server API to all the clients</strong>\n<ul>\n<li>SOAP WS are considered to be slow and I don't know it can handle all the communication</li>\n<li>Android doesn't officially support SOAP WS (bu there are some 3rd party libs)</li>\n</ul></li>\n<li><strong>Use RESTfull WS to handle communication</strong>\n<ul>\n<li>better performance than SOAP</li>\n<li>official support on all the mobile devices</li>\n<li>may be difficult to access RESTfull WS from non-web, desktop client</li>\n</ul></li>\n<li><strong>Use REST WS for mobile, GWT Request Factory for webapp</strong>\n<ul>\n<li>Request Factory is recommended way to communicate with GWT client (at least it was on 2009 Google I/O). I suppose it should perform better than Web Services?</li>\n</ul></li>\n</ol>\n\n<p>Which solution (listed above or not) would perform best and be the most productive for developers?</p>\n\n<p>If you've worked on a similar project, I'd love to know your opinion :)</p>\n"},{"tags":["java","spring","exception","applicationcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":100,"score":3,"question_id":12827178,"title":"java.lang.ExceptionInInitializerError Exception when creating Application Context in Spring","body":"<p>I am practicing with Spring, and am getting a java.lang.ExceptionInInitializerError exception when I try to instantiate the context. The Exception appears below, with my code following it. I have simplified my experiment from before.</p>\n\n<p>The Exception</p>\n\n<pre><code>Oct 17, 2012 5:54:22 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh\nINFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@570c16b7: startup date [Wed Oct 17 17:54:22 CDT 2012]; root of context hierarchy\nException in thread \"main\" java.lang.ExceptionInInitializerError\nat org.springframework.context.support.AbstractRefreshableApplicationContext.createBeanFactory(AbstractRefreshableApplicationContext.java:195)\nat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:128)\nat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:535)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)\nat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\nat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\nat helloworld.HelloWorldTest.main(HelloWorldTest.java:13)\nCaused by: java.lang.NullPointerException\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.&lt;clinit&gt;(DefaultListableBeanFactory.java:105)\n... 7 more\n</code></pre>\n\n<p>My configuration XML</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:c=\"http://www.springframework.org/schema/c\"\nxmlns:p=\"http://www.springframework.org/schema/p\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\"&gt;\n\n&lt;bean id=\"messageContainer\" class=\"helloworld.MessageContainer\"&gt;\n    &lt;property name=\"message\" value=\"Hello World\"&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"messageOutputService\" class=\"helloworld.MessageOutputService\"&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p></p>\n\n<p>My test class.</p>\n\n<pre><code>package helloworld;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class HelloWorldTest {\n\n/**\n * @param args\n */\npublic static void main(String[] args)\n{\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"HelloWorldTest-context.xml\");\n\n    MessageContainer message = context.getBean(MessageContainer.class);\n\n    MessageOutputService service = context.getBean(MessageOutputService.class);\n\n    service.outputMessageToConsole(message);\n\n}\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-data","spring-data-jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13166599,"title":"Using Java Configuration with auditing in Spring Data JPA","body":"<p>Java configuration was <a href=\"http://blog.springsource.org/2012/10/15/spring-data-release-train-arrived/\" rel=\"nofollow\">introduced in version 1.2.0 of Spring Data</a>, but I can't figure out how the java configuration for <code>&lt;jpa:auditing&gt;</code> should look like. I couldn't find any examples in the docs, neither did I figure it out by looking at the Spring Data JPA Source. </p>\n\n<p>I'm suspecting it's not possible to translate <code>&lt;jpa:auditing&gt;</code> into java configuration, but as I couldn't find a Jira for the possibly missing feature, I'm unsure. Does anyone know if I still have to use XML configuration if I use Spring Data JPA with auditing?</p>\n"},{"tags":["java","spring","stored-procedures","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13162043,"title":"Spring SimpleJdbcCall default (optional) arguments","body":"<p>I am trying to invoke a stored procedure which has default (optional) arguments without passing them and it is not working.  Essentially the same problem as described <a href=\"http://forum.springsource.org/showthread.php?108006-How-to-make-SimpleJdbcCall-use-Function-and-Procedure-default-arguments&amp;s=e077b42fd45ae3a3177a01c90339893c\" rel=\"nofollow\">here</a>.</p>\n\n<p>My code:</p>\n\n<pre><code>  SqlParameterSource in = new MapSqlParameterSource()\n        .addValue(\"ownname\", \"USER\")\n        .addValue(\"tabname\", cachedTableName)\n        .addValue(\"estimate_percent\", 20)\n        .addValue(\"method_opt\", \"FOR ALL COLUMNS SIZE 1\")\n        .addValue(\"degree\", 0)\n        .addValue(\"granularity\", \"AUTO\")\n        .addValue(\"cascade\", Boolean.TRUE)\n        .addValue(\"no_invalidate\", Boolean.FALSE)\n        .addValue(\"force\", Boolean.FALSE);\n</code></pre>\n\n<p>And I get an exception:</p>\n\n<pre><code>Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Required input parameter 'PARTNAME' is missing\n    at org.springframework.jdbc.core.CallableStatementCreatorFactory$CallableStatementCreatorImpl.createCallableStatement(CallableStatementCreatorFactory.java:209)\n</code></pre>\n\n<p>Where PARTNAME is an optional parameter according to <a href=\"http://www.toadworld.com/KNOWLEDGE/KnowledgeXpertforOracle/tabid/648/TopicID/STATT/Default.aspx\" rel=\"nofollow\">this</a>.  Also confirmed by the fact that I can run this procedure w/o the PARTNAME argument manually.</p>\n"},{"tags":["php","spring","flex","flex4","flex-mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13164258,"title":"Flex - Retrieve and store variables from PHP","body":"<p><strong>EDIT</strong> - Looks like you cannot parse data from PHP without going through XML. Using JSON will be the best way. <a href=\"http://www.vipercreations.com/tutorials.php?t=28&amp;page=3&amp;c=Adobe%20Flex\" rel=\"nofollow\">Source</a></p>\n\n<p>I'm very new to Flex been using it for 2.5 days. My Flex application accesses a PHP script that calculates two numbers. The script works as it is but I want to retrieve multiple variables from the PHP script so I can have an answer for not only addition but also multiplcation etc...</p>\n\n<p>I hope I have made some sense....</p>\n\n<p><strong>Flex:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;s:View xmlns:fx=\"http://ns.adobe.com/mxml/2009\" \n        xmlns:s=\"library://ns.adobe.com/flex/spark\"\n        title=\"Adding Numbers\"&gt;\n\n    &lt;fx:Declarations&gt;\n        &lt;!-- Place non-visual elements (e.g., services, value objects) here --&gt;\n        &lt;s:HTTPService id=\"srvCalc\" url=\"http://192.168.0.3/flex/flex-phpexample/calc.php\"\n                   resultFormat=\"text\"\n                   method=\"POST\"&gt;\n\n        &lt;s:request xmlns=\"\"&gt;\n            &lt;number1&gt;{txtNumber1.text}&lt;/number1&gt;\n            &lt;number2&gt;{txtNumber2.text}&lt;/number2&gt;\n        &lt;/s:request&gt;\n\n    &lt;/s:HTTPService&gt;\n    &lt;/fx:Declarations&gt;\n\n    &lt;fx:Script&gt;\n        &lt;![CDATA[\n            private function btnCalc_Click(event:MouseEvent):void\n            {\n                srvCalc.send();\n            }\n        ]]&gt;\n    &lt;/fx:Script&gt;\n\n    &lt;s:VGroup width=\"400\" horizontalCenter=\"0\" verticalCenter=\"0\"&gt;\n        &lt;s:Label id=\"txtAnswer\" text=\"{srvCalc.lastResult}\" /&gt;\n\n        &lt;s:Label text=\"First Number:\" /&gt;\n        &lt;s:TextInput id=\"txtNumber1\"\n                     width=\"100%\"/&gt;\n\n        &lt;s:Label text=\"Second Number:\"/&gt;\n        &lt;s:TextInput id=\"txtNumber2\"\n                     width=\"100%\"/&gt;\n\n        &lt;s:Button id=\"btnCalc\"\n                  label=\"Calculate\"\n                  click=\"btnCalc_Click(event)\"/&gt;\n    &lt;/s:VGroup&gt;\n\n&lt;/s:View&gt;\n</code></pre>\n\n<p><strong>PHP:</strong></p>\n\n<pre><code>&lt;?php\n    $number1 = $_POST['number1'];\n    $number2 = $_POST['number2'];\n\n    print($number1 + $number2);\n?&gt;\n</code></pre>\n"},{"tags":["java","spring","collections","guava"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":13153609,"title":"HashMap returned by Maps.newHashMap vs new HashMap","body":"<p>I am trying Guava for the first time and I find it really awesome. </p>\n\n<p>I am executing few parameterized retrieve queries on a Spring jdbc template. The method in the DAO (<code>AbstractDataAccessObject</code>) goes like this. No problem here. </p>\n\n<pre><code>public Map&lt;String,Object&gt; getResultAsMap(String sql, Map&lt;String,Object&gt; parameters) {\n    try {\n        return jdbcTemplate.queryForMap(sql, parameters);\n    } catch (EmptyResultDataAccessException e) {\n        //Ignore if no data found for this query\n        logger.error(e.getMessage(), e);\n\n    }\n    return null;\n}\n</code></pre>\n\n<p>Here's the problem :</p>\n\n<p>When I call this method using </p>\n\n<pre><code>getResultAsMap(query, new HashMap&lt;String,Object&gt;(ImmutableMap.of(\"gciList\",gciList)));\n</code></pre>\n\n<p>it works great. </p>\n\n<p>But when I do this</p>\n\n<pre><code>getResultAsMap(query, Maps.newHashMap(ImmutableMap.of(\"gciList\",gciList)));\n</code></pre>\n\n<p>the compiler gets upset saying </p>\n\n<p><code>The method getResultAsMap(String, Map&lt;String,Object&gt;) in the type AbstractDataAccessObject is not applicable for the arguments (String, HashMap&lt;String,List&lt;String&gt;&gt;)</code> </p>\n\n<p>Am I doing something wrong or what could be the reason for this complaint?</p>\n"},{"tags":["java","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13165446,"title":"Failed to load applicationContext - cannot find applicaitonContext-test","body":"<p>I'm trying to run integration tests but my project keeps failing to load my application context. Here's the error trace: </p>\n\n<p><code>\njava.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.weaving.AspectJWeavingEnabler#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'loadTimeWeaver': Initialization of bean failed; nested exception is java.lang.IllegalStateException: ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079)\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:643)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)\n    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)\n    ... 24 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'loadTimeWeaver': Initialization of bean failed; nested exception is java.lang.IllegalStateException: ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.context.weaving.LoadTimeWeaverAwareProcessor.postProcessBeforeInitialization(LoadTimeWeaverAwareProcessor.java:95)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1413)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    ... 36 more\nCaused by: java.lang.IllegalStateException: ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar\n    at org.springframework.context.weaving.DefaultContextLoadTimeWeaver.setBeanClassLoader(DefaultContextLoadTimeWeaver.java:83)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1436)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1408)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    ... 45 more</p>\n\n<p></code></p>\n\n<p>ClassLoader does not provide an 'addTransformer(ClassFileTransformer)' method? What are you talking about, Java?</p>\n"},{"tags":["spring","tomcat","tomcat6","portlet","springsource-tc-server"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13162815,"title":"How to change context path of where beans are found","body":"<p>I'm receiving this error when starting my app :  </p>\n\n<blockquote>\n  <p>java.io.FileNotFoundException: Could not open ServletContext resource\n  [/WEB-INF/spring/servlet/servlet-context.xml]</p>\n</blockquote>\n\n<p>I don't know why Spring is searching for servlet-context.xml . All of my contexts are configured in web-inf/context/portlet\nIs there a setting I can add to web.xml so tomcat can resolve the contexts from a different dir to /WEB-INF/spring/servlet/servlet-context.xml ? Or is another way of fixing this issue ?</p>\n"},{"tags":["java","spring","spring-security"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13162967,"title":"Spring Security error on try redirect \"Access is Denied\"","body":"<p>Realized the implementation of spring security in my project, but I'm having trouble defining a redirect. When access is locked I need to redirect that user to a specific URL.</p>\n\n<p>When i put the tag \"access-denied-handler\" i hope he redirect to the page defined on the bean, but don't happen.</p>\n\n<p>security-context.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \nxmlns:security=\"http://www.springframework.org/schema/security\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\n                       http://www.springframework.org/schema/beans/spring-beans.xsd\n                       http://www.springframework.org/schema/security\n                       http://www.springframework.org/schema/security/spring-security-3.1.xsd\"&gt;\n\n&lt;!-- Method Security --&gt;\n&lt;security:global-method-security pre-post-annotations=\"enabled\"&gt;\n    &lt;security:expression-handler ref=\"expressionHandler\" /&gt;\n&lt;/security:global-method-security&gt;\n\n\n&lt;bean id=\"expressionHandler\" class=\"org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler\"&gt;\n    &lt;property name=\"permissionEvaluator\" ref=\"permissionEvaluator\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"permissionEvaluator\" class=\"net.pontoall.hemisphere.security.HemispherePermissionEvaluator\"/&gt;\n\n&lt;!-- Publicos --&gt;\n&lt;security:http pattern=\"/layouts/**\" security=\"none\" /&gt;\n&lt;security:http pattern=\"/messages/**\" security=\"none\" /&gt;\n&lt;security:http pattern=\"/test/**\" security=\"none\" /&gt;\n&lt;security:http pattern=\"/resources/**\" security=\"none\" /&gt;\n&lt;security:http pattern=\"/login/**\" security=\"none\" /&gt;\n&lt;security:http pattern=\"/install/**\" security=\"none\" /&gt;\n&lt;security:http pattern=\"/cobredireto/**\" security=\"none\" /&gt;\n&lt;security:http pattern=\"/hotsite/**\" security=\"none\" /&gt;\n&lt;security:http pattern=\"/captcha.jpg\" security=\"none\" /&gt;\n\n&lt;security:http auto-config=\"true\" use-expressions=\"true\"&gt;\n\n    &lt;security:access-denied-handler ref=\"HemisphereAccessDeniedHandler\"/&gt;\n\n    &lt;security:intercept-url pattern=\"/**\" access=\"isAuthenticated()\" /&gt;\n\n    &lt;security:form-login login-page=\"/login\" default-target-url=\"/home\" \n                         authentication-failure-url=\"/login?logout=true\" \n                         authentication-success-handler-ref=\"authenticationSuccessHandler\"\n                         authentication-failure-handler-ref=\"authenticationFailureHandler\"/&gt;\n\n    &lt;security:logout logout-url=\"/j_spring_security_logout\" invalidate-session=\"true\" success-handler-ref=\"logoutHandler\"/&gt;\n&lt;/security:http&gt;\n\n&lt;!-- Authentication Manager --&gt;\n&lt;security:authentication-manager alias=\"authenticationManager\"&gt;\n    &lt;!-- Custom Authentication provider --&gt;\n    &lt;security:authentication-provider ref=\"hemisphereAuthenticationProvider\"/&gt;\n&lt;/security:authentication-manager&gt;\n\n&lt;bean id=\"hemisphereAuthenticationProvider\" class=\"net.pontoall.hemisphere.security.HemisphereAuthenticationProvider\"&gt;\n    &lt;property name=\"userDetailsService\" ref=\"userDetailService\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"authenticationSuccessHandler\" class=\"net.pontoall.hemisphere.security.HemisphereAuthenticationSuccessHandler\"&gt;\n    &lt;property name=\"defaultTargetUrl\" value=\"/home\" /&gt;\n    &lt;property name=\"alwaysUseDefaultTargetUrl\" value=\"no\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"authenticationFailureHandler\" class=\"net.pontoall.hemisphere.security.HemisphereAuthenticationFailureHandler\"&gt;\n    &lt;property name=\"defaultFailureUrl\" value=\"/login\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"logoutHandler\" class=\"net.pontoall.hemisphere.security.HemisphereLogoutHandler\"/&gt;\n\n&lt;bean id=\"HemisphereAccessDeniedHandler\" class=\"net.pontoall.hemisphere.security.HemisphereAccessDeniedHandler\"&gt;\n    &lt;property name=\"errorPage\" value=\"/error/permissao\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p></p>\n\n<p>Bean Java - HemisphereAccessDeniedHandler.java:</p>\n\n<pre><code>public class HemisphereAccessDeniedHandler implements AccessDeniedHandler {\n\nprivate String errorPage;\n\npublic String getErrorPage() {\n    return errorPage;\n}\n\npublic void setErrorPage(String errorPage) {\n\n    if (errorPage == \"\") {\n        errorPage = \"/\";\n    }\n\n    this.errorPage = errorPage;\n}\n\n@Override\npublic void handle(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException) throws IOException, ServletException {\n    // Set the 403 status code.\n    response.setStatus(HttpServletResponse.SC_FORBIDDEN);\n    response.sendRedirect(errorPage);\n}\n\n}\n</code></pre>\n"},{"tags":["java","spring","quartz-scheduler"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13162828,"title":"Java + Spring + Quartz-scheduler: Fire a job after the ending of other jobs","body":"<p>I have this problem:</p>\n\n<p>I have several jobs scheduled. Every job produces a file. Now I have to schedule another job that picks all these files, compresses them and sends via FTP to a remote server.</p>\n\n<p>So the last job has to wait until completion of the other jobs to start. How can I schedule this job? Can you give me some examples?</p>\n\n<p>I'm using Spring integration with Quartz.</p>\n"},{"tags":["hibernate","spring","zk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4501,"score":0,"question_id":2487972,"title":"zk selecting combobox item programatically","body":"<p>I cannot set the value of combobox programatically can some one tell me what missing in the code</p>\n\n<pre><code> public class Profile extends Window implements AfterCompose {\n\n    @Override\n    public void afterCompose() {\n       Session session = Sessions.getCurrent(false);\n                ApplicationContext ctx = WebApplicationContextUtils.getRequiredWebApplicationContext(\n                (ServletContext) getDesktop().getWebApp().getNativeContext());\n\n        UsersDao usersDao = (UsersDao) ctx.getBean(\"daoUsers\");\n\n\n        User user = (User) session.getAttribute(\"user\");\n        user = usersDao.getUser(user.getUsername(),user.getPassword());\n\n        Textbox username_t = (Textbox) this.getFellow(\"username\");\n        Textbox password_t = (Textbox) this.getFellow(\"password\");\n        Textbox conpassword_t = (Textbox) this.getFellow(\"con_password\");\n        Textbox firstname_t = (Textbox) this.getFellow(\"firstName\");\n        Textbox lastname_t = (Textbox) this.getFellow(\"lastName\");\n        Textbox email_t = (Textbox) this.getFellow(\"email\");\n        Combobox hintQuestion_t = (Combobox) this.getFellow(\"hintQuestion\");\n        Textbox hintAnswer_t = (Textbox) this.getFellow(\"hintAnswer\");\n        Combobox locale_t = (Combobox) this.getFellow(\"locale\");\n        Combobox authority_t = (Combobox) this.getFellow(\"authority\");\n\n        username_t.setText(user.getUsername());\n        firstname_t.setText(user.getUserDetails().getFirstName());\n        lastname_t.setText(user.getUserDetails().getLastName());\n        email_t.setText(user.getUserDetails().getEmail());\n        Comboitem selectedItem = getSelectedIndexComboboxItem(hintQuestion_t, user.getHintQuestion());\n        hintQuestion_t.setSelectedItem(selectedItem);\n        hintAnswer_t.setText(user.getHintAnswer());\n        selectedItem = getSelectedIndexComboboxItem(locale_t, user.getUserDetails().getLocale());\n        locale_t.setSelectedItem(selectedItem);\n        selectedItem = getSelectedIndexComboboxItem(authority_t, ((Authority)user.getAuthorities().toArray()[0]).getRole());\n        authority_t.setSelectedItem(selectedItem);\n\n\n    }\n\n   private Comboitem getSelectedIndexComboboxItem(Combobox combobox, String value) {\n        List&lt;Comboitem&gt; items = combobox.getItems();\n        Comboitem item = items.get(0);\n        for (int i = 0; i &lt; items.size(); i++) {\n            Comboitem comboitem = items.get(i);\n            String label = (String)comboitem.getLabel();\n            String cval = (String)comboitem.getValue();\n            if ((label!=null &amp;&amp; label.equalsIgnoreCase(value)) || (cval != null  &amp;&amp; cval.equalsIgnoreCase(value))) {\n                item = comboitem;\n                break;\n            }\n        }\n        return item;\n    }\n}\n</code></pre>\n\n<p>// zk file</p>\n\n<pre><code>&lt;window id=\"profile\" use=\"com.jf.web.zk.ui.Profile\"&gt;\n        &lt;tabbox  id=\"tabbox\" width=\"40%\" &gt;\n            &lt;tabs&gt;\n                &lt;tab label=\"Account Information\"/&gt;\n                &lt;tab label=\"Personal Information\"/&gt;\n                &lt;tab label=\"Contact Details\"/&gt;\n            &lt;/tabs&gt;\n            &lt;tabpanels&gt;\n                &lt;tabpanel&gt;\n                    &lt;grid&gt;\n                        &lt;rows&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('user.username')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;textbox id=\"username\" /&gt;*,a-zA-Z,0-9\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('user.password')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;textbox id=\"password\" type=\"password\"/&gt;*\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('registration.user.password.confirm')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;textbox id=\"con_password\" type=\"password\"/&gt;*\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('user.details.first.name')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;textbox id=\"firstName\" type=\"text\"/&gt;*\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('user.details.last.name')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;textbox id=\"lastName\" type=\"text\"/&gt;*\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('user.details.email')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;textbox id=\"email\" type=\"text\"/&gt;*\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('user.hint.question')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;combobox id=\"hintQuestion\" onCreate='self.setSelectedIndex(1);'&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('user.hint.question.possible.value1')}\" /&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('user.hint.question.possible.value2')}\" /&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('user.hint.question.possible.value3')}\" /&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('user.hint.question.possible.value4')}\" /&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('user.hint.question.possible.value5')}\" /&gt;\n                                    &lt;/combobox&gt;*\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('user.hint.answer')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;textbox id=\"hintAnswer\" type=\"text\"/&gt;*\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('user.details.locale')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;combobox id=\"locale\" onCreate='self.setSelectedIndex(1);self.setReadonly(true);'&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('user.details.locale.en')}\" value=\"en_US\"/&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('user.details.locale.bg')}\" value=\"bg_BG\"/&gt;\n                                    &lt;/combobox&gt;*\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                            &lt;row&gt;\n                                &lt;label value=\"${i18nUtils.message('authority.account.type')}\"/&gt;\n                                &lt;hbox&gt;\n                                    &lt;combobox id=\"authority\" onCreate='self.setSelectedIndex(0);self.setReadonly(true);'&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('authority.job.seeker')}\" value=\"Job Seeker\"/&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('authority.employer')}\" value=\"Employer\"/&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('authority.hra')}\" value=\"Human Resource Agency\"/&gt;\n                                        &lt;comboitem label=\"${i18nUtils.message('authority.advertiser')}\" value=\"Advertiser\"/&gt;\n                                    &lt;/combobox&gt;*\n                                &lt;/hbox&gt;\n                            &lt;/row&gt;\n                        &lt;/rows&gt;\n                    &lt;/grid&gt;\n                &lt;/tabpanel&gt;\n            &lt;/tabpanels&gt;\n        &lt;/tabbox&gt;\n        &lt;grid width=\"40%\"&gt;\n            &lt;rows&gt;\n                &lt;row&gt;\n                    &lt;button label=\"${i18nUtils.message('bttn.save')}\" onClick=\"save()\"/&gt;\n                    &lt;button label=\"${i18nUtils.message('bttn.cancel')}\" onClick=\"cancel()\"/&gt;\n                &lt;/row&gt;\n            &lt;/rows&gt;\n        &lt;/grid&gt;\n    &lt;/window&gt;\n&lt;/zk&gt;\n</code></pre>\n\n<p>The \"getSelectedIndexComboboxItem()\" does return the correct selected item but there seems no effect on the UI. Like for example the locale is set to default Bulgarian language and I need to set it to English.</p>\n\n<p>Abdul Khaliq </p>\n"},{"tags":["java","spring","jdbctemplate"],"answer_count":4,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":3805,"score":4,"question_id":10606229,"title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I am using Jdbctemplate to retrieve a single String value from the db.  Here is my method.</p>\n\n<pre><code>    public String test() {\n        String cert=null;\n        String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \n             where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n        cert = (String) jdbc.queryForObject(sql, String.class); \n        return cert;\n    }\n</code></pre>\n\n<p>In my scenario it is complete possible to NOT get a hit on my query so my question is how do I get around the following error message.</p>\n\n<pre><code>EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\n</code></pre>\n\n<p>It would seem to me that I should just get back a null instead of throwing an exception.  How can I fix this?  Thanks in advance.</p>\n"},{"tags":["java","css","spring","internet-explorer","jsf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13161831,"title":"View using Spring/JSF don't load CSS","body":"<p>I’m trying to run the project below, but I get a “bug” on Internet Explorer 9 with Document Mode: IE9 Standards. It simply don’t load the css.</p>\n\n<p>In Chrome, Firefox, IE 7 and IE8, IE 9 with IE8 Standards / IE7 Standards it runs ok.</p>\n\n<p>What I could to do to fix this “bug”???</p>\n\n<p>web.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"3.0\" xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"&gt;\n    &lt;display-name&gt;HibernateSpringJSFDispatcher&lt;/display-name&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/application-context.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;facelets.REFRESH_PERIOD&lt;/param-name&gt;\n        &lt;param-value&gt;2&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;javax.faces.DEFAULT_SUFFIX&lt;/param-name&gt;\n        &lt;param-value&gt;.xhtml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.jsf&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;/WEB-INF/application-context.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>application-context.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n\n       xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/context \n        http://www.springframework.org/schema/context/spring-context-3.0.xsd\n        http://www.springframework.org/schema/tx \n        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n        http://www.springframework.org/schema/aop \n        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n        http://www.springframework.org/schema/mvc\n        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"br.gov.pr.maringa\" /&gt;\n\n    &lt;import resource=\"classpath:persistence-context.xml\"/&gt;\n\n    &lt;!-- map all requests to /resources/** to the container default servlet (ie, don't let Spring handle them) --&gt;\n\n    &lt;bean id=\"defaultServletHttpRequestHandler\" class=\"org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler\" /&gt;\n\n    &lt;bean id=\"simpleUrlHandlerMapping\" class=\"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping\"&gt;\n        &lt;property name=\"urlMap\"&gt;\n        &lt;map&gt;\n            &lt;entry key=\"/resources/**\" value-ref=\"defaultServletHttpRequestHandler\" /&gt;\n            &lt;entry key=\"/javax.faces.resource/**\" value-ref=\"defaultServletHttpRequestHandler\" /&gt;\n        &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean class=\"org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter\" /&gt;\n\n    &lt;mvc:annotation-driven/&gt;\n    &lt;bean id=\"viewResolver\" class=\"org.springframework.web.servlet.view.UrlBasedViewResolver\"&gt;\n        &lt;property name=\"cache\" value=\"false\" /&gt;\n        &lt;property name=\"viewClass\" value=\"org.springframework.faces.mvc.JsfView\" /&gt;\n        &lt;property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n        &lt;property name=\"suffix\" value=\".xhtml\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"entityManagerFactory\"\n        class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"loadTimeWeaver\"&gt;\n            &lt;bean\n                class=\"org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"persistence-unit\" /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>faces-config.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;faces-config version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xi=\"http://www.w3.org/2001/XInclude\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"       http://java.sun.com/xml/ns/javaee       http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd\"&gt;\n    &lt;application&gt;\n        &lt;resource-handler&gt;br.gov.pr.maringa.hibernatespringjsfdispatcher.CustomResourceHandler&lt;/resource-handler&gt;\n        &lt;el-resolver&gt;org.springframework.web.jsf.el.SpringBeanFacesELResolver&lt;/el-resolver&gt;\n        &lt;resource-bundle&gt;\n            &lt;base-name&gt;MessageResources&lt;/base-name&gt;\n            &lt;var&gt;messages&lt;/var&gt;\n        &lt;/resource-bundle&gt;\n    &lt;/application&gt;\n&lt;/faces-config&gt;\n</code></pre>\n\n<p>CustomResourceHandler.java</p>\n\n<pre><code>package br.gov.pr.maringa.hibernatespringjsfdispatcher;\n\nimport javax.faces.application.Resource;\nimport javax.faces.application.ResourceHandler;\nimport javax.faces.application.ResourceHandlerWrapper;\nimport javax.faces.application.ResourceWrapper;\nimport javax.faces.context.FacesContext;\n\nimport com.sun.faces.util.Util;\n\n/**\n * Custom JSF ResourceHandler.\n * \n * This handler bridges between Spring MVC and JSF managed resources. The handler takes\n * care of the case when a JSF facelet is used as a view by a Spring MVC Controller and the\n * view uses components like h:outputScript and h:outputStylesheet by correctly pointing the \n * resource URLs generated to the JSF resource handler.\n * \n * The reason this custom handler wrapper is needed is because the JSF internal logic assumes\n * that the request URL for the current page/view is a JSF url. If it is a Spring MVC request, JSF\n * will create URLs that incorrectly includes the Spring controller context.\n * \n * This handler will strip out the Spring context for the URL and add the \".jsf\" suffix, so the\n * resource request will be routed to the FacesServlet with a correct resource context (assuming the\n * faces servlet is mapped to the *.jsf pattern). \n * \n *\n */\npublic class CustomResourceHandler extends ResourceHandlerWrapper {\n\n    private ResourceHandler wrapped;\n\n    public CustomResourceHandler(ResourceHandler wrapped) {\n        this.wrapped = wrapped;\n    }\n    @Override\n    public ResourceHandler getWrapped() {\n        return this.wrapped;    \n    }\n\n    @Override\n    public Resource createResource(String resourceName, String libraryName) {\n        return new CustomResource(super.createResource(resourceName, libraryName));\n    }\n    @Override\n    public Resource createResource(String resourceName, String libraryName,\n            String contentType) {\n        return new CustomResource(super.createResource(resourceName, libraryName, contentType));\n    }\n\n    private static class CustomResource extends ResourceWrapper {\n\n        private Resource wrapped;\n\n        private CustomResource(Resource wrapped) {\n            this.wrapped = wrapped;\n        }\n        @Override\n        public Resource getWrapped() {\n            return this.wrapped;\n        }\n        @Override\n        public String getRequestPath() {\n            String path = super.getRequestPath();\n            FacesContext context = FacesContext.getCurrentInstance();\n            String facesServletMapping = Util.getFacesMapping(context);\n            // if prefix-mapped, this is a resource that is requested from a faces page\n            // rendered as a view to a Spring MVC controller.\n            // facesServletMapping will, in fact, be the Spring mapping\n            if (Util.isPrefixMapped(facesServletMapping)) {\n                // remove the Spring mapping\n                path = path.replaceFirst(\"(\" + facesServletMapping + \")/\", \"/\");\n                // append .jsf to route this URL to the FacesServlet\n                path = path.replace(wrapped.getResourceName(), wrapped.getResourceName() + \".jsf\");\n            }\n            return path;\n        }\n\n    }\n}\n</code></pre>\n\n<p>HelloWorldController.java</p>\n\n<pre><code>package br.gov.pr.maringa.hibernatespringjsfdispatcher.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\n\nimport br.gov.pr.maringa.exception.InvalidEntityException;\nimport br.gov.pr.maringa.hibernatespringjsfdispatcher.model.HelloWorld;\nimport br.gov.pr.maringa.hibernatespringjsfdispatcher.model.Usuario;\nimport br.gov.pr.maringa.hibernatespringjsfdispatcher.model.UsuarioHome;\n\n@Controller\npublic class HelloWorldController {\n\n    @Autowired\n    private HelloWorld helloWorld;\n    @Autowired\n    private UsuarioHome uh;\n\n    @RequestMapping(value=\"/helloWorld\", method=RequestMethod.GET)\n    public void helloWorld() {\n        helloWorld.setMessage(\"Hello World from Spring MVC to JSF\");\n\n        Usuario u = new Usuario();\n\n        u.setUsuario(\"claudio\");\n        u.setSenha(\"1234\");\n\n        try {\n            uh.save(u);\n        } catch (InvalidEntityException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n    @RequestMapping(value=\"/helloWorld\", method=RequestMethod.POST)\n    public void helloWorldPost(@RequestParam String msg) {\n        helloWorld.setMessage(msg);\n    }\n}\n</code></pre>\n\n<p>helloWorld.xhtml</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n   \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"\n    xmlns:p=\"http://primefaces.org/ui\"  \n    xmlns:h=\"http://java.sun.com/jsf/html\"\n    xmlns:ui=\"http://java.sun.com/jsf/facelets\"&gt;\n    &lt;h:head&gt;\n        &lt;title&gt;Hello World&lt;/title&gt;\n    &lt;/h:head&gt;\n    &lt;h:body&gt;\n        &lt;p&gt;${helloWorld.message}&lt;/p&gt;\n        &lt;p:panel header=\"qualquercoisa\"&gt;abc&lt;/p:panel&gt;\n        &lt;p&gt;Say something: &lt;/p&gt;\n        &lt;form method=\"post\"&gt;\n            &lt;input name=\"msg\" type=\"text\"&gt;&lt;/input&gt;\n            &lt;input type=\"submit\" &gt;&lt;/input&gt;\n        &lt;/form&gt;\n        &lt;p&gt;This image is linked as a JSF resource&lt;/p&gt;\n        &lt;h:graphicImage name=\"images/jsf.jpg\" /&gt;\n        &lt;p&gt;This image is directly linked&lt;/p&gt;\n        &lt;img src=\"resources/images/spring.png\"&gt;&lt;/img&gt;\n    &lt;/h:body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>References:\n<a href=\"http://papweb.wordpress.com/2011/07/29/spring-mvc-3-jsf-2-with-maven-2-and-tomcat/\" rel=\"nofollow\">http://papweb.wordpress.com/2011/07/29/spring-mvc-3-jsf-2-with-maven-2-and-tomcat/</a></p>\n"},{"tags":["java","spring","junit","zk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13154433,"title":"Why does the controller not get injected when testing .zul page with Zats?","body":"<p>I am trying to implement a first Zats test and got stuck because of missing Spring dependency injection.</p>\n\n<p>The test with the code snippets from below goes green, but <em>doAfterCompose</em> is never called. It seems that the controller injection into the zul page does not work. Changing the <em>apply=\"${teamsPopupCtrl}\"</em> to a full qualified name, the controller gets used, but <em>teamService</em> is null and I got a NullPointerException when <em>teamService.findAll()</em> is called from <em>doAfterCompose</em>. So again it seems that nothing gets injected.</p>\n\n<p>The ApplicationContext itself is loading without any error and using <em>@Autowired private TeamService teamService;</em> for verification in my test class works as expected. When firstTest is executed, teamService is not null.</p>\n\n<p>I also tried to use</p>\n\n<pre><code>&lt;?variable-resolver class=\"org.zkoss.zkplus.spring.DelegatingVariableResolver\"?&gt;\n</code></pre>\n\n<p>in zul page but that only leads to</p>\n\n<pre><code>IOException: Server returned HTTP response code: 500 for URL: http://127.0.0.1:56851/teamsPopup.zul\n</code></pre>\n\n<p>which I could not specify any further.</p>\n\n<p><strong>Zul page:</strong></p>\n\n<pre><code>&lt;?page id=\"teamsPopup\" title=\"layout\" contentType=\"text/html;charset=UTF-8\"?&gt;\n&lt;zk&gt;\n    &lt;window apply=\"${teamsPopupCtrl}\" width=\"400px\" title=\"Fachteams\" border=\"normal\" closable=\"true\"&gt;\n        &lt;listbox id=\"teamsList\" multiple=\"true\" checkmark=\"true\" width=\"380px\" mold=\"paging\" pageSize=\"10\"&gt;\n            &lt;listhead&gt;&lt;listheader label=\"Fachteams\" /&gt;&lt;/listhead&gt;           \n        &lt;/listbox&gt;\n        &lt;hbox height=\"10px\" /&gt;\n        &lt;toolbar mold=\"panel\" align=\"center\"&gt;\n            &lt;button id=\"btnOk\" forward=\"onOK\" label=\"OK\" mold=\"trendy\" height=\"25px\" width=\"120px\" image=\"./images/ok.png\" /&gt;\n            &lt;button forward=\"onClose\" label=\"Abbruch\" mold=\"trendy\" height=\"25px\" width=\"120px\" image=\"./images/cancel.png\" /&gt;\n        &lt;/toolbar&gt;\n    &lt;/window&gt;\n&lt;/zk&gt;\n</code></pre>\n\n<p><strong>Test class:</strong></p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = {\"classpath:applicationContext/test-applicationContext.xml\"})\npublic class TeamsPopupTest {\n\n    @BeforeClass\n    public static void beforeClass() throws Exception {\n        Zats.init(\"./src/main/webapp/WEB-INF/pages/schemaOverview\");\n    }\n\n    @AfterClass\n    public static void afterClass() throws Exception {\n        Zats.end();\n    }\n\n    @After\n    public void after() throws Exception {\n        Zats.cleanup();\n    }\n\n    @Test\n    public void firstTest() throws Exception {\n        final DesktopAgent desktop = Zats.newClient().connect(\"/teamsPopup.zul\");\n    }\n}\n</code></pre>\n\n<p><strong>Controller class:</strong></p>\n\n<pre><code>@Component\n@Scope(value = \"prototype\")\npublic class TeamsPopupCtrl extends AbstractPopupCtrl {\n\n    private static final long serialVersionUID = -1945118180857183121L;\n\n    // ZK Autowire\n    Listbox teamsList;\n\n    @Autowired\n    @Qualifier(\"teamsPopupModel\")\n    private PopupModel popupModel;\n\n    @Autowired\n    private TeamService teamService;\n\n    // ZK Autowire\n    private Listbox teamsBox;\n\n    @Override\n    public void doAfterCompose(final Window comp) throws Exception {\n        super.doAfterCompose(comp);\n        this.teamsList.setItemRenderer(new TeamListBoxRenderer());\n        this.teamsList.setModel(getFilteredTeamList());\n    }\n\n    public SchemaModel getSchemaModel() {\n        return (SchemaModel) getPerspectiveController().getCurrentPerspective().getModel();\n    }\n\n    @SuppressWarnings({\"unchecked\", \"rawtypes\"})\n    public void onOK(final Event event) {\n        final ListModelList&lt;?&gt; model = (ListModelList&lt;?&gt;) this.teamsList.getModel();\n        final List&lt;Team&gt; selectedTeams = new ArrayList(model.getSelection());\n        this.teamService.addTeamsToNodeInSchema(getSchemaModel().getCurrentNode(), selectedTeams);\n        this.teamsBox.setModel(new ListModelList&lt;NodeTeamAssociation&gt;(getSchemaModel().getCurrentNode().getNodeTeamList()));\n        doClosePopup();\n        if (!model.getSelection().isEmpty()) {\n            modify();\n        }\n    }\n\n    @Override\n    public void doOpenPopup(final org.zkoss.zul.Window window) {\n        super.doOpenPopup(window);\n        Executions.createComponents(\"/WEB-INF/pages/schemaOverview/teamsPopup.zul\", getModel().getPopupWindow(), null);\n    }\n\n    private ListModelList&lt;Team&gt; getFilteredTeamList() {\n        final Collection&lt;Team&gt; allTeams = new ArrayList&lt;Team&gt;(this.teamService.findAll());\n        for (final NodeTeamAssociation selectedTeam : getSchemaModel().getCurrentNode().getNodeTeamList()) {\n            allTeams.remove(selectedTeam.getTeam());\n        }\n        return new ListModelList&lt;Team&gt;(allTeams);\n    }\n\n    protected class TeamListBoxRenderer implements ListitemRenderer&lt;Team&gt;, Serializable {\n\n        private static final long serialVersionUID = 8268285374821502239L;\n\n        @Override\n        public void render(final Listitem item, final Team teamdata, final int index) throws Exception {\n            final Listcell lc = new org.zkoss.zul.Listcell();\n            lc.setLabel(teamdata.getName());\n            lc.setValue(teamdata);\n            lc.setParent(item);\n            TeamsPopupCtrl.this.teamsList.setMultiple(true);\n            TeamsPopupCtrl.this.teamsList.setCheckmark(true);\n        }\n    }\n\n    @Override\n    protected PopupModel getModel() {\n        return this.popupModel;\n    }\n}\n</code></pre>\n\n<p>Does anyone have any idea how to get the test work with dependency injection or what I am missing in my test setup?</p>\n"},{"tags":["spring","properties","escaping","curly-braces"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13162346,"title":"Escape property reference in spring property file","body":"<p>I'm going crazy on an issue that is certainly elementary. I just want to escape my spring propeties file in order to get in my bean property: <em>${ROOTPATH}/relativePath</em></p>\n\n<p>I have a simple spring config file that contains:</p>\n\n<pre><code>&lt;context:property-placeholder location=\"classpath:myprops.properties\" /&gt;\n\n&lt;bean id=\"myBean\" class=\"spring.MyBean\"&gt;\n    &lt;property name=\"myProperty\" value=\"${myproperty}\" /&gt;\n&lt;/bean&gt; \n</code></pre>\n\n<p>The myprops.properties contains:</p>\n\n<pre><code>myproperty=\\${ROOTPATH}/relativePath\n</code></pre>\n\n<p>The above setup returns: <em>Could not resolve placeholder 'ROOTPATH'</em>. I tried a lot of possible syntaxes but was not able to find the right one :/</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["spring","java-ee","logging","tomcat6","spring-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13161277,"title":"Unable to enable logging using CustomizableTraceInterceptor in Spring 3.0.6","body":"<p>I have a very simple setup </p>\n\n<p>I have an <code>applicationContext.xml</code> file like this :</p>\n\n<pre><code>    &lt;context:component-scan base-package=\"com.mkyong.common.controller\" /&gt;\n\n    &lt;bean id=\"customizableTraceInterceptor\"\n        class=\"org.springframework.aop.interceptor.CustomizableTraceInterceptor\"&gt;\n        &lt;property name=\"enterMessage\" value=\"Entering $[methodName]($[arguments])\" /&gt;\n        &lt;property name=\"exitMessage\" value=\"Leaving $[methodName](): $[returnValue]\" /&gt;\n    &lt;/bean&gt;\n    &lt;bean\n        class=\"org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator\"&gt;\n        &lt;property name=\"beanNames\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;*Service&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;!-- &lt;property name=\"proxyTargetClass\" value=\"true\" /&gt; --&gt;\n        &lt;property name=\"interceptorNames\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;customizableTraceInterceptor&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;mvc:annotation-driven /&gt;\n\n    &lt;bean id=\"wowService\" class=\"org.daud.WowService\" scope=\"prototype\" /&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>The controller class is also very simple :</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/welcome\")\npublic class HelloController {\n\n    @Autowired\n    private WowService wowService;\n\n    @RequestMapping(method = RequestMethod.GET)\n    public String printWelcome(ModelMap model) {\n\n        getWowService().printIt();\n        model.addAttribute(\"message\", \"Spring 3 MVC Hello World\");\n        return \"hello\";\n\n    }\n\n    public WowService getWowService() {\n        return wowService;\n    }\n\n    public void setWowService(WowService wowService) {\n        this.wowService = wowService;\n    }\n\n}\n</code></pre>\n\n<p>The web.xml is :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n         version=\"3.0\" metadata-complete=\"true\"&gt;\n\n    &lt;display-name&gt;simple-form&lt;/display-name&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;\n            org.springframework.web.context.ContextLoaderListener\n        &lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;\n            /WEB-INF/applicationContext.xml\n        &lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;simple-form&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;&lt;/param-value&gt;\n        &lt;/init-param&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;simple-form&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p><code>WowService</code> is also very simple</p>\n\n<pre><code>public class WowService {\n\n    public String printIt() {\n        return \"daud\";\n\n    }\n}\n</code></pre>\n\n<p>I have the <code>spring jars of version 3.0.6</code>, <code>aopalliance-1.0.jar</code> and <code>commons-logging-1.1.1.jar</code> in my lib folder and nothing else. But there is no trace being recorded.. i.e there is no logging being done when we enter the method of <code>WowService</code>, or when we leave it. I can't figure out why.</p>\n"},{"tags":["web-services","spring","spring-mvc","annotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13038928,"title":"How to reference another project in eclipse for spring 3.1 autowiring?","body":"<p>I'm using tomcat 6x, spring 3.1 with annotations, cxf 2.2x.  I have a web service project, lets call it wsproject that I have referenced in my main project, lets call that myproject.  I added a project reference for wsproject to myproject using the configurebuildpath in eclipse.  I have everything working and I'm able to go from the main project to the code in the web service project.  </p>\n\n<p>Now however, when I try to autowire a service, like myservice from wsproject into the controller, for example, mycontroller in myproject, spring throws this error:  </p>\n\n<p><strong>No matching bean of type [com.service.MyService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}</strong></p>\n\n<p>I have this in the servlet-context.xml:</p>\n\n<pre><code>&lt;annotation-driven /&gt;\n...\n&lt;context:annotation-config/&gt;\n&lt;context:component-scan base-package=\"com.myproject\" /&gt;\n\n\n &lt;beans:import resource=\"classpath*:/WEB-INF/spring/serviceServlet/service-context.xml\"/&gt;\n&lt;context:component-scan base-package=\"com.service.myService\"/&gt;  \n\n&lt;beans:bean id=\"myService\" class=\"com.service.myServiceImpl\"&gt;\n    &lt;beans:property name=\"myService\" ref=\"myService\" /&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n\n<p>and in the MyController class I have:</p>\n\n<pre><code>@Controller\npublic class MyController {\n    @Autowired\n    private MyService myService;\n...\n</code></pre>\n\n<p>and on the service I have:</p>\n\n<pre><code>@Service\n@WebService(targetNamespace = \"http://...\")\npublic interface MyService {\n</code></pre>\n\n<p>//more methods ...</p>\n\n<p>but it seems like Spring can't find the other project for some reason.  So when I start up the app I get this error when it loads.  Any ideas what is wrong here? </p>\n\n<p>I did import the project into STS and under the spring explorer I could see that this additional service-context wasn't loaded, so that seems to be the root issue of the problem.  Something isn't configured correctly here.</p>\n\n<p>Aftermath:</p>\n\n<p>I wasn't actually pointing to the code in the second project, even though eclipse appeared to be using it. When I removed the original war dependency in maven, compile errors showed up.  So even though eclipse was stopping on breakpoints in the service project, that code wasn't actually running.  I have no idea how that could be, but it was.  </p>\n\n<p>So, I removed the service project as a reference to the client project, packaged it up as a war and ran it on tomcat. That solved my referencing issues.</p>\n"},{"tags":["spring","redirect","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13159800,"title":"spring-security-redirect is not read by spring security 3.1?","body":"<p>So we're using spring-security-redirect as a parameter in the form that is sent to j_spring_security_check, in order to send the user to the correct page after a successful login. Migrating from Spring security 3.0 to 3.1, this stopped working. We use a subclass of SavedRequestAwareAuthenticationSuccessHandler, overriding onAuthenticationSuccess(), and debugging that method I see that getTargetUrlParameter() returns null. isAlwaysUseDefaultTargetUrl() returns false.</p>\n\n<p>Browsing around I can't find anyone having similar problems... I find some references to AbstractAuthenticationTargetUrlRequestHandler.DEFAULT_TARGET_PARAMETER, which seems to have disappeared in 3.1.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","spring","dependency-injection"],"answer_count":9,"favorite_count":49,"up_vote_count":67,"down_vote_count":0,"view_count":134093,"score":67,"question_id":317687,"title":"inject property value into Spring bean","body":"<p>I have a bunch of Spring beans which are picked up from the classpath via annotations, e.g.</p>\n\n<pre><code>@Repository(\"personDao\")\npublic class PersonDaoImpl extends AbstractDaoImpl implements PersonDao {\n    // Implementation omitted\n}\n</code></pre>\n\n<p>In the Spring XML file, there's a <a href=\"http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html\">PropertyPlaceholderConfigurer</a> defined:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"propertyConfigurer\" \n  class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n    &lt;property name=\"location\" value=\"/WEB-INF/app.properties\" /&gt;\n&lt;/bean&gt; \n</code></pre>\n\n<p>I want to inject one of the properties from app.properites into the bean shown above. I can't simply do something like </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean class=\"com.example.PersonDaoImpl\"&gt;\n    &lt;property name=\"maxResults\" value=\"${results.max}\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Because PersonDaoImpl does not feature in the Spring XML file (it is picked up from the classpath via annotations). I've got as far as the following:</p>\n\n<pre><code>@Repository(\"personDao\")\npublic class PersonDaoImpl extends AbstractDaoImpl implements PersonDao {\n\n    @Resource(name = \"propertyConfigurer\")\n    protected void setProperties(PropertyPlaceholderConfigurer ppc) {\n    // Now how do I access results.max? \n    }\n}\n</code></pre>\n\n<p>But it's not clear to me how I access the property I'm interested in from <code>ppc</code>?</p>\n"},{"tags":["spring","hibernate","jpa","transactions","spring-transactions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13155373,"title":"Two JPA EntityManagers within Spring managed transactions?","body":"<p>I'm using Spring's transaction support and JPA (Hibernate) to persist my entities. Everything's working as it should, but I'm stuck when dealing with partial updates within one request:</p>\n\n<p>For every user (HTTP) request I've to write a log entry into a database table, even if an update of the \"main\" business entity fails (for instance because of a validation error). So my first/principal transaction get's rolled back, but the second (writing the log) should commit. This seems to work using the correct propagation level for writing the log entry:</p>\n\n<pre><code>@Repository\n@Transactional(propagation = Propagation.REQUIRES_NEW)\npublic class UserTracker extends ... {\n\n  @PersistenceContext private EntityManager em;\n\n  public void log(...) {\n    // create log entity and persist it\n    ...\n    em.persist(log);\n    em.flush();\n  }\n\n}\n</code></pre>\n\n<p>My problem is, however, that I get the same EntityManager injected in the second transaction as in the first. So flushing the entity manager (either explicitly or implicitly when the second transaction commits) will also flush my dirty business entity from the first transaction.</p>\n\n<p>How can I remedy this? I would like to use a second, clean and fresh EntityManager for the logging part and I know I could open one programmatically, but is there a cleaner/declarative \"Spring-way\" of doing this? </p>\n"},{"tags":["linux","spring","hibernate","sessionfactory"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13147292,"title":"Spring DataSource with embedded HSQL in memory database and hibernate create-drop ordering on Linux","body":"<p>I am using Spring 3.1 with annotations to create a DataSource that uses embedded HSQL.</p>\n\n<pre><code>@Bean\npublic DataSource dataSource() throws Exception {\n    EmbeddedDatabaseFactoryBean bean = new EmbeddedDatabaseFactoryBean();\n    bean.setDatabaseType(EmbeddedDatabaseType.HSQL);\n    bean.afterPropertiesSet();\n    DataSource object = bean.getObject();\n    return object;\n}\n</code></pre>\n\n<p>I am also configuring a SessionFactory like this</p>\n\n<pre><code>@Bean\npublic SessionFactory sessionFactory() {\n    SessionFactory sessionFactory = new LocalSessionFactoryBuilder(dataSource)\n        .setNamingStrategy(namingStrategy())\n        .addProperties(hibernateProperties)\n        .addAnnotatedClass(Some.class)\n        .buildSessionFactory();\n    logger.info(\"Created session factory: \" + sessionFactory + \" with dataSource: \" + dataSource);\n    return sessionFactory;\n}\n</code></pre>\n\n<p>The problem is if I create some other beans using @Component in which I populate the database, the SQL script fails because the database has not been created. My hibernate.properties includes the following line to generate DDL</p>\n\n<pre><code>properties.put(\"hibernate.hbm2ddl.auto\", \"create-drop\");\n</code></pre>\n\n<p>So it is some sort of ordering issue with bean creating. However this problem only occurs in Linux (Kubuntu 12.04) and not on Windows 7!</p>\n"},{"tags":["spring","scope"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":13155472,"title":"How to ignore a custom spring tenant","body":"<p>We are having a product when we use custom spring scope - 'tenant'.\nIt is tightly related with our system architecture.</p>\n\n<p>During the live of the product we decided to drop this scope, but we really wouldn't like  to break the backward compatibility.\nOther words we want that existing product implementations to start without error like :</p>\n\n<blockquote>\n  <p>Initialization of bean failed; nested exception is java.lang.IllegalStateException: No Scope registered for scope 'tenant'</p>\n</blockquote>\n\n<p>We also don't want to correct any occurrence of the tenant defintion in the spring configuration or in any java class (where  <code>@Scope(\"tenant\")</code> occurs).</p>\n\n<p>We managed to ignore the the scope while loading bean definitions by using custom </p>\n\n<pre><code>XmlBeanDefinitionReader\n</code></pre>\n\n<p>It seems that we are missing the general concept to filter any bean creation (any BeanDefinition ) and ignore the scope - replace it with Singleton.</p>\n\n<p>Here is the code</p>\n\n<p>Here is the code with overrides the scope :                                           <pre><code> \nnew ReaderEventListener()\n            {</p>\n\n            @Override\n            public void importProcessed(final ImportDefinition importDefinition)\n            {\n                //\n            }\n\n            @Override\n            public void defaultsRegistered(final DefaultsDefinition defaultsDefinition)\n            {\n                // \n            }\n\n            @Override\n            public void componentRegistered(final ComponentDefinition componentDefinition)\n            {\n\n                for (final BeanDefinition beanDefinition : componentDefinition.getBeanDefinitions())\n                {\n\n                    if (\"tenant\".equalsIgnoreCase(beanDefinition.getScope()))\n                    {\n                        beanDefinition.setScope(BeanDefinition.SCOPE_SINGLETON);\n                        if (LOG.isDebugEnabled())\n                        {\n                            LOG.debug(\"Adjusting bean defintion for \" + beanDefinition\n                                    + \" - ignoring tenant scope - please modify it manually to avoid confussion.\");\n                        }\n                    }\n                }\n\n                for (final BeanDefinition beanDefinition : componentDefinition.getInnerBeanDefinitions())\n                {\n\n                    if (\"tenant\".equalsIgnoreCase(beanDefinition.getScope()))\n                    {\n                        beanDefinition.setScope(BeanDefinition.SCOPE_SINGLETON);\n                        if (LOG.isDebugEnabled())\n                        {\n                            LOG.debug(\"Adjusting bean defintion for \" + beanDefinition\n                                    + \" - ignoring tenant scope - please modify it manually to avoid confussion.\");\n                        }\n                    }\n                }\n            }\n\n            @Override\n            public void aliasRegistered(final AliasDefinition aliasDefinition)\n            {\n                //\n            }\n        }); &lt;code&gt;\n</code></pre>\n\n<p>It looks like it is working in the most cases except for such ones :\n\n\n        \n            \n                EXACT\n                REGEX\n                STARTS_WITH\n                ENDS_WITH\n                CONTAINS\n            \n        \n        \n            \n                \n                \n            \n        \n    \n\nIt looks like it is able to change the scope tenant for the wrapping</p>\n\n<blockquote>\n  <p>org.springframework.beans.factory.config.ListFactoryBean</p>\n</blockquote>\n\n<p>but not for the underlying beans ....</p>\n\n<p>Thing worth mentioning is that we munually load one by one a files containing bean definitions by our own.</p>\n"},{"tags":["spring","configuration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13157893,"title":"Spring load parts of one config with different loaders from file and classpath","body":"<p>Is it possible load custom part of config from file and automatically load other part of config from classpath, placed inside jar?</p>\n\n<p>I have command line apllication written on java with spring 2.5.6 framework.\nConfig of apllication consist from 2 parts:</p>\n\n<ol>\n<li>bigApplicationContext.xml  </li>\n<li><p>customConfig.xml with import of bigApplicationContext.xml</p>\n\n<p></p></li>\n</ol>\n\n<p>bigApplicationContext has references to some beans from customConfig.</p>\n\n<p>I placed bigApplicationContext and default customConfig inside jar. Configs loaded by ClassPathXmlApplicationContext. It's OK</p>\n\n<p>Troubles goes when I want provide additional command line option for my application --pathToCustomConfig</p>\n\n<p>I want to load custom part of config from file and automatically load other part of config from bigApplicationContext, placed inside jar.</p>\n\n<p>Is it possible? Now I have </p>\n\n<blockquote>\n  <p>Configuration problem: Failed to import bean definitions from relative\n  location</p>\n</blockquote>\n"},{"tags":["java","spring","java-ee","maven","servlet-filters"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13158284,"title":"Java EE conditional filter mapping","body":"<p>I have a Spring MVC web application with the following in web.xml:</p>\n\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;foo&lt;/filter-name&gt;\n    &lt;filter-class&gt;bar.foo&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;yada&lt;/param-name&gt;\n        &lt;param-value&gt;baz&lt;/param-value&gt;\n        &lt;description&gt;fooz.&lt;/description&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;foo&lt;/filter-name&gt;\n    &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p>This is perfectly fine for running in a production environment, but not while I'm developing on my local machine.</p>\n\n<p>Is there any way to set e.g. Maven properties up so that it is enabled or disabled depending on the active build profile?</p>\n"},{"tags":["java","spring","validation","freemarker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13139239,"title":"Validation of @spring.formInput in #list iterator","body":"<p>I have a freemarker page, where I need to post an Entry from a list of Entries.</p>\n\n<p>In order to overcome problems with spring.formInput and freemarker lists (<a href=\"http://stackoverflow.com/questions/8006163/spring-forminput-in-list-iterator\">see problem here</a>) I construct the html forms in the following way:</p>\n\n<pre><code>&lt;#list entries as entry&gt;\n    &lt;@form.form method=\"POST\" commandName=\"receiver\"&gt;\n        &lt;@spring.formInput \"entries.entry[${entry_index}].name\"/&gt;\n        &lt;@spring.formInput \"entries.entry[${entry_index}].value\"/&gt;\n    &lt;/@form.form&gt;\n&lt;/#list&gt;\n</code></pre>\n\n<p>My Controller looks like this:</p>\n\n<pre><code>@RequestMapping(method=POST, params=\"save\") \npublic String save(@ModelAttribute(value=\"entries\") @Valid Entries entries, BindingResult result, Model model){\n    /*notice, we always get the last item in the list, since the entries  \"carries\" the index of the form through, and  creates\n     * null-object in the first n places\n    */ \n    int index = entries.size()-1;\n    Entry entry = entries.get(index);\n    if (!result.hasErrors()) {\n        formService.save(entry);\n    }\n\n    return \"\";\n}\n</code></pre>\n\n<p>Unfortunately the @Valid annotations causes error whenever I post an Entry apart from the first in list.</p>\n\n<p>This happens because spring automatically populates my list with null values up till the current index.</p>\n\n<ul>\n<li>I would prefer to post an Entry instead of Entries, but I do not\nthink this can be done. </li>\n<li>Alternatively, how do I stop the validation from taking place on\nthe first n-1 entries in list?</li>\n<li>Or, can I somehow test which object in list (index) caused the\nerror, so that I can just avoid errors from the first n-1 entries?</li>\n</ul>\n"},{"tags":["java","spring","jsp","spring-mvc","taglib"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":176,"score":4,"question_id":13097778,"title":"Create custom tag library which extends Spring tag library","body":"<p>I want to create custom tag library which should extends the exuisting Spring MVC 3.0 tag library. I want to do this because I want my jsp code to be independent of any framework. That means if I want to change from Spring to Struts then I dont have any need to change anything in JSP pages, I just change my customized tag library which will extend Struts tag library and all work fine.</p>\n"},{"tags":["spring","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13155455,"title":"Alternative to subclassing LocalValidatorFactoryBean in Spring","body":"<p>In our code we have implemented a subclass to org.springframework.validation.beanvalidation.LocalValidatorFactoryBean, overriding validate(Object target, Errors errors) with our own implementation where we run validations, do some extra processing and register error messages.</p>\n\n<p>Upgrading from 3.0 to 3.1, it seems that this method is no longer called. A colleague debugged the spring code and found that it seems that the method with the signature validate(Object target, Errors errors, Object... validationHints) is called instead, and the old validate() is simply skipped. Changing to use the method with validationHints made things work again.</p>\n\n<p>This fix feels kind of weird and prone to future confusion. Is there another way to process validations that is more future-proof?</p>\n"},{"tags":["java","spring","aop","aspectj"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13157225,"title":"Logging with aspects","body":"<p>Have a RESTful web-serice with Facade layer, Service layer and Dao layer.\nTrying to journalize all invokes of all methods of classes, marked with annotation @Log</p>\n\n<pre><code>@Target({ElementType.TYPE, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Log {\n}\n</code></pre>\n\n<p>Here's the aspect code:</p>\n\n<pre><code>public class LoggingAspect {\n  @Around(\"@target(Log)\")\n  public Object log(ProceedingJoinPoint pjp) throws Throwable {\n    log.debug(\"Start \" + pjp.getSignature().getName());\n    Object result = pjp.proceed();\n    log.debug(\"End \" + pjp.getSignature().getName());\n    return result;\n  }\n}\n</code></pre>\n\n<p>Facade, Service and Dao are marked with @Log.\nSome example:</p>\n\n<pre><code>public Obj Facade.createObj(String name){ //1\n  return service.createObj(name);\n}\n\npublic Obj Service.createObj(String name){ //2\n  return dao.createObj(name);\n}\n\npublic Obj Dao.createObj(String name){ //3\n  Long idOfCreatedObj = /*code that creates an object and returns it's ID*/;\n  return loadObjById(idOfCreatedObj); /* load the created object by id */\n}\n\npublic Obj Dao.loadObjById(Long id){ //4\n  return /* code that loads the object by it's id */;\n}\n</code></pre>\n\n<p>In this example methods 1, 2, 3 are logged successfully. But the nested dao method (loadObjById) is not logged.</p>\n\n<p>WHY?</p>\n\n<p>P.S. In spring-config.xml there's\n    <code>&lt;aop:aspectj-autoproxy proxy-target-class=\"true\"/&gt;</code></p>\n"},{"tags":["java","spring","caching","java-ee","ehcache"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":267,"score":0,"question_id":11194982,"title":"Spring annotation cache: CacheDecoratorFactory not configured for defaultCache","body":"<p>I'm trying to use Sping Annotation cache with EhCache. So, for first, I added the dependency to my pom.xml and configured the application-context.xml as:</p>\n\n<pre><code>&lt;ehcache:annotation-driven cache-manager=\"cacheManager\" /&gt;\n\n&lt;ehcache:config cache-manager=\"cacheManager\"&gt;\n    &lt;ehcache:evict-expired-elements interval=\"60\" /&gt;\n&lt;/ehcache:config&gt;\n\n&lt;bean id=\"cacheManager\" class=\"org.springframework.cache.ehcache.EhCacheManagerFactoryBean\"&gt;\n    &lt;property name=\"configLocation\"  value=\"ehcache.xml\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>This is the ehcache.xml configuration file:</p>\n\n\n\n<pre><code>&lt;ehcache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"http://ehcache.org/ehcache.xsd\"&gt;\n    &lt;defaultCache eternal=\"true\" maxElementsInMemory=\"100\" overflowToDisk=\"false\" /&gt;\n    &lt;cache name=\"alfresco\" maxElementsInMemory=\"10\" eternal=\"true\" overflowToDisk=\"false\" /&gt;\n&lt;/ehcache&gt;\n</code></pre>\n\n<p>for last, I added the Annontation @Cachable to the methods that need to be cached:</p>\n\n<pre><code>@Cacheable(value=\"alfresco\")\npublic EMContents getContents(RestTemplate restTemplate, String ticket, String webScriptUrl, String em_name)\n</code></pre>\n\n<p>I create a junit class to call two times the same method, and, it doesn't use the cache the second time (the first one doesn't create the key value).</p>\n\n<p>It seems to work fine, but I get this message: </p>\n\n<pre><code>25 Jun 2012 19:40:07  INFO EhCacheManagerFactoryBean:100 - Initializing EHCache CacheManager\n25 Jun 2012 19:40:07 DEBUG ConfigurationFactory:148 - Configuring ehcache from InputStream\n25 Jun 2012 19:40:07 DEBUG BeanHandler:271 - Ignoring ehcache attribute xmlns:xsi\n25 Jun 2012 19:40:07 DEBUG BeanHandler:271 - Ignoring ehcache attribute xsi:noNamespaceSchemaLocation\n25 Jun 2012 19:40:07 DEBUG PropertyUtil:88 - propertiesString is null.\n25 Jun 2012 19:40:07 DEBUG CacheManager:605 - No disk store path defined. Skipping disk store path conflict test.\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:184 - No CacheManagerEventListenerFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...\n25 Jun 2012 19:40:07 DEBUG Cache:1183 - Initialised cache: alfresco_action\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:331 - CacheDecoratorFactory not configured. Skipping for 'alfresco_action'.\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:360 - CacheDecoratorFactory not configured for defaultCache. Skipping for 'alfresco_action'.\n25 Jun 2012 19:40:07 DEBUG Cache:1183 - Initialised cache: alfresco\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:331 - CacheDecoratorFactory not configured. Skipping for 'alfresco'.\n25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:360 - CacheDecoratorFactory not configured for defaultCache. Skipping for 'alfresco'.\n25 Jun 2012 19:40:07 DEBUG DefaultListableBeanFactory:458 - Finished creating instance of bean 'cacheManager'\n</code></pre>\n\n<p>Any clue? Something seems to be wrong with my configuration. </p>\n\n<p>Thanks for your time<br />Andrea</p>\n"},{"tags":["spring","url","servlets"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13156882,"title":"HttpServletRequest.getServletPath is returning decoded string","body":"<p>On my site I'm using the following URL: <a href=\"http://example.com/test%2Ftest2.htm\" rel=\"nofollow\">http://example.com/test%2Ftest2.htm</a>\nWhen I print getServletPath in my HandlerInterceptorAdapter I see de decoded servletPath: <code>/test/test2.htm</code>. How do I get the not-decoded string? Like: <code>/test/test2&amp;2Ftest2.htm</code></p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":170,"score":2,"question_id":12467186,"title":"Java Spring WS org.springframework.ws.soap.saaj.SaajSoapEnvelopeException: Could not access envelope","body":"<p>I'am experencing a strange behaviour of a spring ws in different environments. Following works fine with Soap UI on a local tomcat 7.0.29, but does return below mentioned error.</p>\n\n<p>servlet.xml:</p>\n\n<pre><code>&lt;bean id=\"propertyPlaceholder\"\n    class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n    &lt;property name=\"locations\"&gt;\n        &lt;value&gt;classpath:ws.properties&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"systemPropertiesModeName\" value=\"SYSTEM_PROPERTIES_MODE_FALLBACK\" /&gt;\n    &lt;property name=\"searchSystemEnvironment\" value=\"true\" /&gt;\n&lt;/bean&gt;\n\n\n&lt;bean\n    class=\"org.springframework.ws.transport.http.WsdlDefinitionHandlerAdapter\"&gt;\n    &lt;property name=\"transformLocations\" value=\"true\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean\n    class=\"org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter\"&gt;\n    &lt;property name=\"messageFactory\"&gt;\n        &lt;bean class=\"org.springframework.ws.soap.saaj.SaajSoapMessageFactory\" /&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"payloadMapping\"\n    class=\"org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping\"&gt;\n    &lt;property name=\"interceptors\"&gt;\n        &lt;list&gt;\n            &lt;ref local=\"validatingInterceptor\" /&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"validatingInterceptor\"\n    class=\"org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor\"\n    autowire=\"byName\"&gt;\n    &lt;property name=\"schema\" value=\"/xsd/schema.xsd\" /&gt;\n    &lt;property name=\"validateRequest\" value=\"true\" /&gt;\n    &lt;property name=\"validateResponse\" value=\"true\" /&gt;\n&lt;/bean&gt;\n\n\n\n&lt;bean\n    class=\"org.springframework.ws.soap.server.endpoint.SoapFaultAnnotationExceptionResolver\" /&gt;\n\n\n\n\n\n&lt;bean id=\"defaultHandlerMapping\"\n    class=\"org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping\" /&gt;\n\n&lt;bean id=\"baseWsdlDefinition\" abstract=\"true\"\n    class=\"org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition\"&gt;\n    &lt;property name=\"requestSuffix\" value=\"Request\" /&gt;\n    &lt;property name=\"responseSuffix\" value=\"Response\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sampleJaxbMarshaller\" class=\"org.springframework.oxm.jaxb.Jaxb2Marshaller\"&gt;\n    &lt;property name=\"classesToBeBound\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;com.db.vhs.ws.jaxb.PlacementRequest&lt;/value&gt;\n            &lt;value&gt;com.db.vhs.ws.jaxb.PlacementResponse&lt;/value&gt;...\n</code></pre>\n\n<p>scheam.xsd:</p>\n\n<p>\n</p>\n\n<pre><code>&lt;xs:annotation&gt;\n\n    &lt;xs:appinfo&gt;\n\n        &lt;jaxb:globalBindings&gt;\n\n            &lt;jaxb:javaType name=\"java.util.Date\" xmlType=\"xs:dateTime\"\n                parseMethod=\"javax.xml.bind.DatatypeConverter.parseDateTime\"\n                printMethod=\"javax.xml.bind.DatatypeConverter.printDateTime\" /&gt;\n\n        &lt;/jaxb:globalBindings&gt;\n\n    &lt;/xs:appinfo&gt;\n\n&lt;/xs:annotation&gt;\n\n\n\n\n&lt;!-- getClusterRequest --&gt;\n\n&lt;xs:element name=\"getClusterRequest\"&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"id\" type=\"xs:long\" /&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n\n&lt;xs:element name=\"getClusterResponse\"&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"id\" type=\"xs:long\" /&gt;\n            &lt;xs:element name=\"Vcenter\" type=\"xs:string\" /&gt;\n            &lt;xs:element name=\"NAME\" type=\"xs:string\" /&gt;\n            &lt;xs:element name=\"MOREF\" type=\"xs:string\" /&gt;\n            &lt;xs:element name=\"OVERALLSTATUS\" type=\"xs:string\" /&gt;\n            &lt;xs:element name=\"COLLECTIONDATE\" type=\"xs:dateTime\" /&gt;\n            &lt;xs:element name=\"DPMENABLED\" type=\"xs:int\" /&gt;\n            &lt;xs:element name=\"DRSENABLED\" type=\"xs:int\" /&gt;\n            &lt;xs:element name=\"HAENABLED\" type=\"xs:int\" /&gt;\n            &lt;xs:element name=\"NUMCPUCORES\" type=\"xs:int\" /&gt;\n            &lt;xs:element name=\"NUMHOSTS\" type=\"xs:int\" /&gt;\n            &lt;xs:element name=\"TOTALCPU\" type=\"xs:long\" /&gt;\n            &lt;xs:element name=\"TOTALMEMORY\" type=\"xs:long\" /&gt;\n            &lt;xs:element name=\"VDatacenterID\" type=\"xs:long\" /&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n\n\n&lt;xs:element name=\"placementRequest\"&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"request_header\" type=\"header\" /&gt;\n            &lt;xs:element name=\"request_body\" type=\"requestBody\" /&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n\n\n\n\n&lt;xs:complexType name=\"header\"&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=\"request_id\" type=\"xs:string\" /&gt;\n        &lt;xs:element name=\"uuid\" type=\"xs:string\" /&gt;\n        &lt;xs:element name=\"type\" type=\"xs:string\" /&gt;\n        &lt;xs:element name=\"request_type\"&gt;\n            &lt;xs:simpleType&gt;\n                &lt;xs:restriction base=\"xs:int\"&gt;\n                    &lt;xs:minInclusive value=\"0\" /&gt;\n                    &lt;xs:maxInclusive value=\"1\" /&gt;\n                &lt;/xs:restriction&gt;\n            &lt;/xs:simpleType&gt;\n        &lt;/xs:element&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n\n\n\n&lt;xs:complexType name=\"requestBody\"&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:choice&gt;\n            &lt;xs:element name=\"cluster_request\" type=\"clusterRequest\" /&gt;\n            &lt;xs:element name=\"region_request\" type=\"regionRequest\" /&gt;\n        &lt;/xs:choice&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n\n\n\n&lt;xs:complexType name=\"clusterRequest\"&gt;\n    &lt;xs:sequence minOccurs=\"0\" maxOccurs=\"unbounded\"&gt;\n        &lt;xs:element name=\"cluster\" type=\"xs:string\" /&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n\n&lt;xs:complexType name=\"regionRequest\"&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=\"region\" type=\"xs:string\" /&gt;\n        &lt;xs:element name=\"OS\" type=\"xs:string\" /&gt;\n        &lt;xs:element name=\"clusterProductType\"&gt;\n            &lt;xs:simpleType&gt;\n                &lt;xs:list itemType=\"xs:string\" /&gt;\n            &lt;/xs:simpleType&gt;\n        &lt;/xs:element&gt;\n        &lt;xs:element name=\"class\"&gt;\n            &lt;xs:simpleType&gt;\n                &lt;xs:restriction base=\"xs:int\"&gt;\n                    &lt;xs:minInclusive value=\"0\" /&gt;\n                    &lt;xs:maxInclusive value=\"3\" /&gt;\n                &lt;/xs:restriction&gt;\n            &lt;/xs:simpleType&gt;\n        &lt;/xs:element&gt;\n        &lt;xs:element name=\"class_type\"&gt;\n            &lt;xs:simpleType&gt;\n                &lt;xs:restriction base=\"xs:int\"&gt;\n                    &lt;xs:minInclusive value=\"0\" /&gt;\n                    &lt;xs:maxInclusive value=\"2\" /&gt;\n                &lt;/xs:restriction&gt;\n            &lt;/xs:simpleType&gt;\n        &lt;/xs:element&gt;\n        &lt;xs:element name=\"subnet\" type=\"xs:string\" /&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n\n\n\n\n\n&lt;xs:element name=\"placementResponse\"&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"response_header\" type=\"header\" /&gt;\n            &lt;xs:element name=\"response_body\" type=\"responseBody\" /&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n\n\n\n\n\n&lt;xs:complexType name=\"responseBody\"&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=\"class\"&gt;\n            &lt;xs:simpleType&gt;\n                &lt;xs:restriction base=\"xs:int\"&gt;\n                    &lt;xs:minInclusive value=\"0\" /&gt;\n                    &lt;xs:maxInclusive value=\"3\" /&gt;\n                &lt;/xs:restriction&gt;\n            &lt;/xs:simpleType&gt;\n        &lt;/xs:element&gt;\n        &lt;xs:element name=\"capacity\"&gt;\n            &lt;xs:complexType&gt;\n                &lt;xs:sequence minOccurs=\"0\" maxOccurs=\"unbounded\"&gt;\n                    &lt;xs:element name=\"cluster\"&gt;\n                        &lt;xs:complexType&gt;\n                            &lt;xs:sequence&gt;\n                                &lt;xs:element name=\"cluster_name\" type=\"xs:string\"&gt;&lt;/xs:element&gt;\n                                &lt;xs:element name=\"v_center\" type=\"xs:string\"&gt;&lt;/xs:element&gt;\n                                &lt;xs:sequence minOccurs=\"0\" maxOccurs=\"unbounded\"&gt;\n                                    &lt;xs:element name=\"storage\" type=\"storage\"&gt;&lt;/xs:element&gt;\n                                &lt;/xs:sequence&gt;\n                                &lt;xs:sequence minOccurs=\"0\" maxOccurs=\"unbounded\"&gt;\n                                    &lt;xs:element name=\"host\" type=\"host\"&gt;&lt;/xs:element&gt;\n                                &lt;/xs:sequence&gt;\n                                &lt;xs:element name=\"class_type\" type=\"xs:int\"&gt;&lt;/xs:element&gt;\n                                &lt;xs:element name=\"timestamp\" type=\"xs:string\"&gt;&lt;/xs:element&gt;\n                            &lt;/xs:sequence&gt;\n                        &lt;/xs:complexType&gt;\n                    &lt;/xs:element&gt;\n                &lt;/xs:sequence&gt;\n            &lt;/xs:complexType&gt;\n        &lt;/xs:element&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n\n\n\n\n&lt;!-- complex types for response ngp --&gt;\n\n\n&lt;xs:complexType name=\"storage\"&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=\"data_store_name\" type=\"xs:string\" /&gt;\n        &lt;xs:element name=\"total_storage\" type=\"xs:long\" /&gt;\n        &lt;xs:element name=\"allocated_storage\" type=\"xs:long\" /&gt;\n        &lt;xs:element name=\"storage_class\" type=\"xs:string\" /&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n\n\n&lt;xs:complexType name=\"host\"&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=\"host_name\" type=\"xs:string\" /&gt;\n        &lt;xs:sequence minOccurs=\"0\" maxOccurs=\"unbounded\"&gt;\n            &lt;xs:element name=\"port_group_name\" type=\"portgroup\" /&gt;\n        &lt;/xs:sequence&gt;\n        &lt;xs:element name=\"physical_cpus\" type=\"xs:int\" /&gt;\n        &lt;xs:element name=\"allocated_cpus\" type=\"xs:int\" /&gt;\n        &lt;xs:element name=\"available_cpu_size\" type=\"xs:long\" /&gt;\n        &lt;xs:element name=\"average_cpu_usage\" type=\"xs:double\" /&gt;\n        &lt;xs:element name=\"max_cpu_usage\" type=\"xs:double\" /&gt;\n        &lt;xs:element name=\"physical_memory\" type=\"xs:long\" /&gt;\n        &lt;xs:element name=\"allocated_memory\" type=\"xs:long\" /&gt;\n        &lt;xs:element name=\"average_memory_usage\" type=\"xs:double\" /&gt;\n        &lt;xs:element name=\"max_memory_usage\" type=\"xs:double\" /&gt;\n        &lt;xs:element name=\"number_of_vms\" type=\"xs:int\" /&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n\n&lt;xs:complexType name=\"portgroup\"&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=\"name\" type=\"xs:string\" /&gt;\n        &lt;xs:element name=\"subnet\" type=\"xs:string\" /&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n</code></pre>\n\n<p> </p>\n\n<p>The first method works in both environments, the second (placementRequest) returns:</p>\n\n<pre><code>&lt;html&gt;&lt;head&gt;&lt;title&gt;Apache Tomcat/7.0.29 - Error report&lt;/title&gt;&lt;style&gt;&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--&gt;&lt;/style&gt; &lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 500 - Request processing failed; nested exception is org.springframework.ws.soap.saaj.SaajSoapEnvelopeException: Could not access envelope: Unable to create envelope from given source: ; nested exception is com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source: &lt;/h1&gt;&lt;HR size=\"1\" noshade=\"noshade\"&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt; Exception report&lt;/p&gt;&lt;p&gt;&lt;b&gt;message&lt;/b&gt; &lt;u&gt;Request processing failed; nested exception is org.springframework.ws.soap.saaj.SaajSoapEnvelopeException: Could not access envelope: Unable to create envelope from given source: ; nested exception is com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source: &lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;description&lt;/b&gt; &lt;u&gt;The server encountered an internal error (Request processing failed; nested exception is org.springframework.ws.soap.saaj.SaajSoapEnvelopeException: Could not access envelope: Unable to create envelope from given source: ; nested exception is com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source: ) that prevented it from fulfilling this request.&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;exception&lt;/b&gt; &lt;pre&gt;org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.ws.soap.saaj.SaajSoapEnvelopeException: Could not access envelope: Unable to create envelope from given source: ; nested exception is com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source:\n</code></pre>\n\n<p>org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:583)\norg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:641)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n</p><p><b>root cause</b> <pre>org.springframework.ws.soap.saaj.SaajSoapEnvelopeException: Could not access envelope: Unable to create envelope from given source: ; nested exception is com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source:\norg.springframework.ws.soap.saaj.SaajSoapMessage.getEnvelope(SaajSoapMessage.java:107)\norg.springframework.ws.soap.AbstractSoapMessage.getSoapBody(AbstractSoapMessage.java:36)\norg.springframework.ws.soap.AbstractSoapMessage.getPayloadSource(AbstractSoapMessage.java:46)\norg.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping.getLookupKeyForMessage(PayloadRootAnnotationMethodEndpointMapping.java:57)\norg.springframework.ws.server.endpoint.mapping.AbstractMethodEndpointMapping.getEndpointInternal(AbstractMethodEndpointMapping.java:56)\norg.springframework.ws.server.endpoint.mapping.AbstractEndpointMapping.getEndpoint(AbstractEndpointMapping.java:83)\norg.springframework.ws.server.MessageDispatcher.getEndpoint(MessageDispatcher.java:248)\norg.springframework.ws.server.MessageDispatcher.dispatch(MessageDispatcher.java:201)\norg.springframework.ws.server.MessageDispatcher.receive(MessageDispatcher.java:168)\norg.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:88)\norg.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:57)\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)\norg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:641)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n</pre></p><p><b>root cause</b> <pre>com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source:\ncom.sun.xml.internal.messaging.saaj.soap.EnvelopeFactory.createEnvelope(EnvelopeFactory.java:114)\ncom.sun.xml.internal.messaging.saaj.soap.ver1_1.SOAPPart1_1Impl.createEnvelopeFromSource(SOAPPart1_1Impl.java:70)\ncom.sun.xml.internal.messaging.saaj.soap.SOAPPartImpl.getEnvelope(SOAPPartImpl.java:122)\norg.springframework.ws.soap.saaj.Saaj13Implementation.getEnvelope(Saaj13Implementation.java:169)\norg.springframework.ws.soap.saaj.SaajSoapMessage.getEnvelope(SaajSoapMessage.java:103)\norg.springframework.ws.soap.AbstractSoapMessage.getSoapBody(AbstractSoapMessage.java:36)\norg.springframework.ws.soap.AbstractSoapMessage.getPayloadSource(AbstractSoapMessage.java:46)\norg.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping.getLookupKeyForMessage(PayloadRootAnnotationMethodEndpointMapping.java:57)\norg.springframework.ws.server.endpoint.mapping.AbstractMethodEndpointMapping.getEndpointInternal(AbstractMethodEndpointMapping.java:56)\norg.springframework.ws.server.endpoint.mapping.AbstractEndpointMapping.getEndpoint(AbstractEndpointMapping.java:83)\norg.springframework.ws.server.MessageDispatcher.getEndpoint(MessageDispatcher.java:248)\norg.springframework.ws.server.MessageDispatcher.dispatch(MessageDispatcher.java:201)\norg.springframework.ws.server.MessageDispatcher.receive(MessageDispatcher.java:168)\norg.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:88)\norg.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:57)\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)\norg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:641)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n</pre></p><p><b>root cause</b> <pre>javax.xml.transform.TransformerException: org.xml.sax.SAXParseException: The markup in the document preceding the root element must be well-formed.\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:719)\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)\ncom.sun.xml.internal.messaging.saaj.util.transform.EfficientStreamingTransformer.transform(EfficientStreamingTransformer.java:393)\ncom.sun.xml.internal.messaging.saaj.soap.EnvelopeFactory.createEnvelope(EnvelopeFactory.java:102)\ncom.sun.xml.internal.messaging.saaj.soap.ver1_1.SOAPPart1_1Impl.createEnvelopeFromSource(SOAPPart1_1Impl.java:70)\ncom.sun.xml.internal.messaging.saaj.soap.SOAPPartImpl.getEnvelope(SOAPPartImpl.java:122)\norg.springframework.ws.soap.saaj.Saaj13Implementation.getEnvelope(Saaj13Implementation.java:169)\norg.springframework.ws.soap.saaj.SaajSoapMessage.getEnvelope(SaajSoapMessage.java:103)\norg.springframework.ws.soap.AbstractSoapMessage.getSoapBody(AbstractSoapMessage.java:36)\norg.springframework.ws.soap.AbstractSoapMessage.getPayloadSource(AbstractSoapMessage.java:46)\norg.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping.getLookupKeyForMessage(PayloadRootAnnotationMethodEndpointMapping.java:57)\norg.springframework.ws.server.endpoint.mapping.AbstractMethodEndpointMapping.getEndpointInternal(AbstractMethodEndpointMapping.java:56)\norg.springframework.ws.server.endpoint.mapping.AbstractEndpointMapping.getEndpoint(AbstractEndpointMapping.java:83)\norg.springframework.ws.server.MessageDispatcher.getEndpoint(MessageDispatcher.java:248)\norg.springframework.ws.server.MessageDispatcher.dispatch(MessageDispatcher.java:201)\norg.springframework.ws.server.MessageDispatcher.receive(MessageDispatcher.java:168)\norg.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:88)\norg.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:57)\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)\norg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:641)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n</pre></p><p><b>root cause</b> <pre>org.xml.sax.SAXParseException: The markup in the document preceding the root element must be well-formed.\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1231)\ncom.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)\norg.xml.sax.helpers.XMLFilterImpl.parse(XMLFilterImpl.java:333)\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:636)\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:707)\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)\ncom.sun.xml.internal.messaging.saaj.util.transform.EfficientStreamingTransformer.transform(EfficientStreamingTransformer.java:393)\ncom.sun.xml.internal.messaging.saaj.soap.EnvelopeFactory.createEnvelope(EnvelopeFactory.java:102)\ncom.sun.xml.internal.messaging.saaj.soap.ver1_1.SOAPPart1_1Impl.createEnvelopeFromSource(SOAPPart1_1Impl.java:70)\ncom.sun.xml.internal.messaging.saaj.soap.SOAPPartImpl.getEnvelope(SOAPPartImpl.java:122)\norg.springframework.ws.soap.saaj.Saaj13Implementation.getEnvelope(Saaj13Implementation.java:169)\norg.springframework.ws.soap.saaj.SaajSoapMessage.getEnvelope(SaajSoapMessage.java:103)\norg.springframework.ws.soap.AbstractSoapMessage.getSoapBody(AbstractSoapMessage.java:36)\norg.springframework.ws.soap.AbstractSoapMessage.getPayloadSource(AbstractSoapMessage.java:46)\norg.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping.getLookupKeyForMessage(PayloadRootAnnotationMethodEndpointMapping.java:57)\norg.springframework.ws.server.endpoint.mapping.AbstractMethodEndpointMapping.getEndpointInternal(AbstractMethodEndpointMapping.java:56)\norg.springframework.ws.server.endpoint.mapping.AbstractEndpointMapping.getEndpoint(AbstractEndpointMapping.java:83)\norg.springframework.ws.server.MessageDispatcher.getEndpoint(MessageDispatcher.java:248)\norg.springframework.ws.server.MessageDispatcher.dispatch(MessageDispatcher.java:201)\norg.springframework.ws.server.MessageDispatcher.receive(MessageDispatcher.java:168)\norg.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:88)\norg.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:57)\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)\norg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:641)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n</pre></p><p><b>note</b> The full stack trace of the root cause is available in the Apache Tomcat/7.0.29 logs.</p><h3>Apache Tomcat/7.0.29</h3></p>\n\n<p>pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;4.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;7.0.29&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-ws-core-tiger&lt;/artifactId&gt;\n        &lt;version&gt;1.5.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-ws-core&lt;/artifactId&gt;\n        &lt;version&gt;1.5.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\n        &lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\n        &lt;version&gt;1.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;xerces&lt;/groupId&gt;\n        &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n        &lt;version&gt;2.8.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.ws.commons.schema&lt;/groupId&gt;\n        &lt;artifactId&gt;XmlSchema&lt;/artifactId&gt;\n        &lt;version&gt;1.4.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\n        &lt;version&gt;11.2.0.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.cloudbees.thirdparty&lt;/groupId&gt;\n        &lt;artifactId&gt;vijava&lt;/artifactId&gt;\n        &lt;version&gt;5.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n        &lt;version&gt;1.6.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n        &lt;version&gt;1.6&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-configuration&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-configuration&lt;/artifactId&gt;\n        &lt;version&gt;1.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dom4j&lt;/groupId&gt;\n        &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;4.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>I read that it could be that the web server overrides the maven dependencies? Or do you have any suggestions how to solve this? Greatly appreciated if someone can help!!!</p>\n"},{"tags":["annotations","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3267,"score":0,"question_id":1546907,"title":"spring annotation configuration issue","body":"<p>I don't know why spring 2.5.6 keeps complaining, but I don't have any \"orderBy\" annotation.</p>\n\n<pre><code>2009-10-10 13:55:37.242::WARN:  Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.annotation.internalPersiste\nnceAnnotationProcessor': Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'order' of bean class [org.springfra\nmework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor]: Bean property 'order' is not writable or has an invalid setter method. Does the parameter type of the setter match the re\nturn type of the getter?:\norg.springframework.beans.NotWritablePropertyException: Invalid property 'order' of bean class [org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor]: Bean propert\ny 'order' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?\n        at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:801)\n        at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:651)\n        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:78)\n        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:59)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1276)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010)\n</code></pre>\n\n<p>or even when I swap to use lower version spring 2.5.1, it's still complaining:</p>\n\n<pre><code>2009-10-10 13:57:56.062::WARN:  failed ContextHandlerCollection@5da0b94d\njava.lang.NoClassDefFoundError: org/springframework/context/support/AbstractRefreshableConfigApplicationContext\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:621)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)\n        at java.net.URLClassLoader.access$000(URLClassLoader.java:56)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:366)\n        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:621)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)\n        at java.net.URLClassLoader.access$000(URLClassLoader.java:56)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:366)\n        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)\n        at org.springframework.util.ClassUtils.forName(ClassUtils.java:230)\n        at org.springframework.util.ClassUtils.forName(ClassUtils.java:183)\n        at org.springframework.web.context.ContextLoader.determineContextClass(ContextLoader.java:283)\n        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:243)\n</code></pre>\n\n<p>If I do not use annotation, it works fine. No problem at all,</p>\n\n<p>Everything happened after this</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context-2.5.xsd\"\n    default-autowire=\"byName\"&gt;\n\n    &lt;context:component-scan base-package=\"demo.dao\"&gt;\n        &lt;context:include-filter type=\"annotation\"\n            expression=\"org.springframework.stereotype.Repository\"/&gt;\n    &lt;/context:component-scan&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>and I am sure my spring is configured properly.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xmlns:util=\"http://www.springframework.org/schema/util\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n                           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd\n                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd\n                           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd\"\n       default-autowire=\"byName\"&gt;\n\n    &lt;!-- For mail settings and future properties files --&gt;\n    &lt;bean id=\"propertyConfigurer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:jdbc.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Check all the beans managed by Spring for persistence-related annotations. e.g. PersistenceContext --&gt;\n    &lt;bean class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n\n    &lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"${jdbc.driverClassName}\"/&gt;\n        &lt;property name=\"url\" value=\"${jdbc.url}\"/&gt;\n        &lt;property name=\"username\" value=\"${jdbc.username}\"/&gt;\n        &lt;property name=\"password\" value=\"${jdbc.password}\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n\n        &lt;!-- jpaVendorAdapter Hibernate, injected into emf --&gt;\n        &lt;property name=\"jpaVendorAdapter\"&gt;\n            &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n                &lt;property name=\"showSql\" value=\"${hibernate.show_sql}\"/&gt;\n                &lt;!-- Data Definition Language script is generated and executed for each run --&gt;\n                &lt;property name=\"generateDdl\" value=\"${jdbc.generateDdl}\"/&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n\n        &lt;!--&lt;property name=\"hibernateProperties\"&gt; --&gt;\n        &lt;property name=\"jpaProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}\n                &lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;${hibernate.show_sql}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2ddl.auto}\n                &lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>Can anyone tell me what is wrong? How can I fix this?</p>\n"},{"tags":["java","spring","spring-mvc","integration","spring-batch"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13153876,"title":"Integrating Spring Batch with Spring MVC","body":"<p>Can you guys guide me to some nice tutorial containing <code>Context-Configuration</code>(<strong>applicationContext.xml</strong>) details and some example code for running a simple batch job using <a href=\"http://static.springsource.org/spring-batch/\" rel=\"nofollow\">Spring Batch</a> from within my <a href=\"http://static.springsource.org/spring-batch/\" rel=\"nofollow\">Spring MVC Web-App</a> or help me in the same way here only.</p>\n\n<p><em>THanks</em></p>\n"},{"tags":["java","spring","spring-security","session-replication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13154051,"title":"Common session in Spring Security apps","body":"<p>I have two applications running on my server and in both applications i use Spring Security. This applications are interacting and the problem is that user should authenticate twice. So is there anyway to share a security context among mulitple web applications? Or customize some sessionDAO in Spring Security? Or something like this?</p>\n"},{"tags":["java","spring","spring-annotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13153216,"title":"After bean definition created from @Configuration","body":"<p>The problem:</p>\n\n<p>I have a bean (<code>ConversionService</code>) that needs a collection of <code>Converter</code>s to be created. So within my <code>@Configuration</code> class I have a <code>@Bean</code> that is a <code>Collection&lt;Converter&gt;</code> with a specific <code>@Qualifier</code>.</p>\n\n<p>For my <code>ConversionService</code> <code>@Bean</code>, I receive the <code>Converter</code> collection as parameter using my <code>@Qualifier</code> like this:</p>\n\n<pre><code>@Bean\npublic ConversionService createConversionService(@Qualifier(\"converters\") converters) {\n    // here I perform the ConversionService creation\n}\n</code></pre>\n\n<p>This works and is exactly how I want it. But I have several <code>@Configuration</code> classes, and each one shall be able to add something to the <code>Converter</code> collection. I initially though maybe there is a way to implement a method invoked after bean definition is read from <code>@Configuration</code> class. Something like this:</p>\n\n<pre><code>@Configuration\npublic class MyConfiguration {\n\n    @Autowired\n    @Qualifier(\"converters\")\n    private Collection&lt;Converter&gt; converters;\n\n    public void init() {\n        converters.add(xy);\n    }\n\n}\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>@Configuration\npublic class MyConfiguration {\n\n    public void init(@Qualifier(\"converters\") Collection&lt;Converter&gt; converters) {\n        converters.add(xy);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","java-ee"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13152946,"title":"What is OncePerRequestFilter?","body":"<p>Documentation says <code>org.springframework.web.filter.OncePerRequestFilter</code> \"<em>guarantees to be just executed once per request</em>\". Under what circumstances a Filter may possibly be executed more than once per request?</p>\n"},{"tags":["spring","mybatis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13151972,"title":"Mybatis + Spring , Service is Intailized but Dao are null","body":"<p>Mybatis + Spring </p>\n\n<p>When I Autowire a Dao into service and calling service in Junit Test the Service Object is Intailized but The Dao Object are null.....</p>\n\n<p>Please help me on this, it is very urgent.........</p>\n\n<p>Thanks in Advance</p>\n\n<pre><code>springTest/springcontext-datasource.xml\n-----------------------------------------------------------------------\n\n&lt;?xml version=\"1.0\" encoding=\"gb18030\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n     xmlns:aop=\"http://www.springframework.org/schema/aop\"\n     xmlns:tx=\"http://www.springframework.org/schema/tx\"\n     xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\n     xmlns:context=\"http://www.springframework.org/schema/context\"\n     xsi:schemaLocation=\"\n     http://www.springframework.org/schema/context \n     http://www.springframework.org/schema/context/spring-context-3.0.xsd\n     http://www.springframework.org/schema/beans \n     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n     http://www.springframework.org/schema/jdbc \n     http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd\n     http://www.springframework.org/schema/tx \n     http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n     http://www.springframework.org/schema/aop \n     http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\"&gt;\n\n    &lt;bean id=\"propertyConfigurer\"\n          class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"location\"&gt;\n            &lt;value&gt;classpath:springTest/config.properties&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;     \n\n    &lt;!-- define the mysql dataSource --&gt;\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\"&gt;\n        &lt;property name=\"driverClassName\" value=\"${driverClassName}\" /&gt;\n        &lt;property name=\"url\" value=\"${url}\" /&gt;\n        &lt;property name=\"username\" value=\"${username}\" /&gt;\n        &lt;property name=\"password\" value=\"${password}\" /&gt;\n    &lt;/bean&gt; \n\n    &lt;!-- transaction manager --&gt;\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;/bean&gt;\n\n     &lt;aop:config&gt;  \n         &lt;aop:advisor pointcut=\"execution(* com.service..*.*(..))\" advice-ref=\"txAdvice\"/&gt;  \n     &lt;/aop:config&gt;\n     &lt;tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\"&gt;  \n         &lt;tx:attributes&gt;  \n             &lt;tx:method name=\"get*\" read-only=\"true\"/&gt;  \n             &lt;tx:method name=\"find*\" read-only=\"true\"/&gt;  \n             &lt;tx:method name=\"*\"  propagation=\"REQUIRED\"/&gt;  \n        &lt;/tx:attributes&gt;  \n     &lt;/tx:advice&gt;       \n\n      &lt;!-- enable component scanning and autowire (beware that this does not enable mapper scanning!) --&gt;    \n    &lt;context:component-scan base-package=\"com.service\" /&gt;\n\n     &lt;!-- define the SqlSessionFactory --&gt;\n    &lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"typeAliasesPackage\" value=\"com.domain\" /&gt;\n        &lt;property name=\"mapperLocations\" value=\"classpath*:com/dao/*.xml\" /&gt;\n    &lt;/bean&gt;\n\n   &lt;!-- scan for mappers and let them be autowired --&gt;\n    &lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt;\n        &lt;property name=\"basePackage\" value=\"com.dao\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"productService\" class=\"com.service.ProductService\" &gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n\nDAO\n-----------------------------------------------------------------------\npackage com.dao;\n\nimport com.domain.Author;\n\npublic interface AuthorMapper {\n\n    int deleteByPrimaryKey(Integer authorId);\n}\n\ndomain\n-----------------------------------------------------------------------\npackage com.domain;\n\npublic class Author {\n    private Integer authorId;\n\n    private String sourceId;\n\n    private String name;\n\n    private String personalName;\n\n    private Integer revision;\n\n    private String lastModified;\n\n    public Integer getAuthorId() {\n        return authorId;\n    }\n\n    public void setAuthorId(Integer authorId) {\n        this.authorId = authorId;\n    }\n\n    public String getSourceId() {\n        return sourceId;\n    }\n\n    public void setSourceId(String sourceId) {\n        this.sourceId = sourceId == null ? null : sourceId.trim();\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name == null ? null : name.trim();\n    }\n\n    public String getPersonalName() {\n        return personalName;\n    }\n\n    public void setPersonalName(String personalName) {\n        this.personalName = personalName == null ? null : personalName.trim();\n    }\n\n    public Integer getRevision() {\n        return revision;\n    }\n\n    public void setRevision(Integer revision) {\n        this.revision = revision;\n    }\n\n    public String getLastModified() {\n        return lastModified;\n    }\n\n    public void setLastModified(String lastModified) {\n        this.lastModified = lastModified == null ? null : lastModified.trim();\n    }\n}\n\npackage com.service;\nProductService\n-----------------------------------------------------------------------\n\n@Service\npublic class ProductService{\n    @Autowired\n    private AuthorMapper authorMapper;\n\n    public Author selectAuthorByPrimaryKey(Integer authorId) {\n        Author author = null;\n        try{\n            System.out.println(\"authorMapper:\"+authorMapper);\n            author = authorMapper.selectByPrimaryKey(authorId);\n            System.out.println(\"Author Obj:\"+author);\n            return author;\n        }catch(Exception e){\n            log.info(e.getMessage()+\" selectAuthorByPrimaryKey authorId:\"+authorId);\n        }\n        return author;\n    }\n}\n\npackage com.test;\nProductServiceTest\n-----------------------------------------------------------------------\n\n@ContextConfiguration(locations = {\"classpath:springTest/springcontext-*.xml\"})\n@Controller\npublic class ProductServiceTest extends AbstractTransactionalJUnit4SpringContextTests {\n\n    @Autowired\n    private ProductService productService;\n\n    @Test\n    public void test01_selectAuthor(){\n        try{\n        System.out.println(\"productService:\"+productService);\n            Author author = productService.selectAuthorByPrimaryKey(1);\n\n\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n}\n\nAuthorMapper.xml\n-----------------------------------------------------------------------\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\" &gt;\n&lt;mapper namespace=\"com.dao.AuthorMapper\" &gt;\n\n  &lt;resultMap id=\"BaseResultMap\" type=\"com.domain.Author\" &gt;\n    &lt;id column=\"author_id\" property=\"authorId\" jdbcType=\"INTEGER\" /&gt;\n    &lt;result column=\"source_id\" property=\"sourceId\" jdbcType=\"VARCHAR\" /&gt;\n    &lt;result column=\"name\" property=\"name\" jdbcType=\"VARCHAR\" /&gt;\n    &lt;result column=\"personal_name\" property=\"personalName\" jdbcType=\"VARCHAR\" /&gt;\n    &lt;result column=\"revision\" property=\"revision\" jdbcType=\"INTEGER\" /&gt;\n    &lt;result column=\"last_modified\" property=\"lastModified\" jdbcType=\"VARCHAR\" /&gt;\n  &lt;/resultMap&gt;\n\n  &lt;sql id=\"Base_Column_List\" &gt;\n    author_id, source_id, name, personal_name, revision, last_modified\n  &lt;/sql&gt;\n\n  &lt;select id=\"selectByPrimaryKey\" resultMap=\"BaseResultMap\" parameterType=\"java.lang.Integer\" &gt;\n    select \n    &lt;include refid=\"Base_Column_List\" /&gt;\n    from author_t\n    where author_id = #{authorId,jdbcType=INTEGER}\n  &lt;/select&gt;  \n&lt;/mapper&gt;\n\nconfig.properties\n-----------------------------------------------------------------------\n\ndriverClassName = com.mysql.jdbc.Driver\nurl = jdbc:mysql://localhost:3306/test\nusername =root\npassword =satish\n\n\n\nauthor_t Table\n-----------------------------------------------------------------------\n\nCREATE TABLE `author_t` (\n  `author_id` int(15) NOT NULL AUTO_INCREMENT,\n  `source_id` varchar(15) NOT NULL,\n  `name` varchar(1000) NOT NULL,\n  `personal_name` varchar(1000) DEFAULT NULL,\n  `revision` int(3) DEFAULT NULL,\n  `last_modified` varchar(100) DEFAULT NULL,\n  PRIMARY KEY (`author_id`),\n  UNIQUE KEY `source_id` (`source_id`)\n) ENGINE=InnoDB\n\n\nOutPut Of Junit Test\n----------------------------------------------------------------------\nproductService:com.service.ProductService@ee9867d\nauthorMapper:null\nAuthor Obj:null\n\n\npom.xml\n-----------------------------------------------------------------------\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.8.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n        &lt;version&gt;1.6.11&lt;/version&gt;\n    &lt;/dependency&gt;           \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;   \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;   \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;   \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;   \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;   \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5.RELEASE&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;       \n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;\n        &lt;version&gt;1.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n        &lt;version&gt;1.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.17&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n        &lt;version&gt;1.2.16&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-beanutils-core&lt;/artifactId&gt;\n        &lt;version&gt;1.8.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;cglib&lt;/groupId&gt;\n        &lt;artifactId&gt;cglib-nodep&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["spring","spring-aop","spring-transactions","spring-annotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13152448,"title":"Spring nested transaction handling and nested propogation","body":"<p>I have a below scenario where I would like to understand the nested Transaction handling in Spring and also the propogation. I actually read enough about this but still was unclear about some facts.</p>\n\n<pre><code>public class ServiceImpl {\n@Autowired \npublic AnotherService anotherService;\n\n@Transactional // by default it is PROPOGATION_REQUIRED\npublic void insert (){\n    anotherService.anotherInsert();\n}\n}\n\npublic class AnotherServiceImpl {\n\n@Transactional(propagation = Propagation.NESTED)\npublic void anotherInsert() {\n    insertSomeTestData();\n}\n\nprivate void insertSomeTestData() {\n    // call insert some test data recursively\n    // insert trasaction\n    insertSomeTestData();\n}\n}\n</code></pre>\n\n<p>In this scenario, <code>anotherInsert</code> will commit the nested data and rollsback for some data , would this affect the outer transaction which is by Default <code>PROPOGATION_REQUIRED</code> Also the unclear point is still that , what If the transactions are nested, will they begin a new one in such cases?</p>\n"},{"tags":["web-services","spring","design","architecture","jax-ws"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13135193,"title":"expose all functionality via webservices","body":"<p>i have an application build with Struts2 used for web layer and Spring (IoC,Transactions),Jpa2,Hibernate used for service layer.<br>\nNow i want to split this app into a core of services exposed via webservices, and a web client (in the far future we will also have a mobile client) that will access functionality from the core system. I was thinking in wrapping my service classes that i have now in some jax-ws endpoints.  </p>\n\n<p>Due the fact that when i designed the service layer i have applied some bad practices, like accessing Session from service layer, now i have some problems porting the app to the new desired format.  I have used sessions in service layer mainly because i have implemented some aspects that log the crud activity in database and i had to knew which was the user performing these actions.  </p>\n\n<p>A simple solution would be to either perform these aspects on client, but i guess this is not so elegant (i think that ideally the client should be as thin as it can be), or when performing any CRUD operation to send along with the object to perform also the userId of the user, but this is even uglier then the first approach.<br>\nAny idea how can i overcome this? I have to mention that i can change the services part that is based on session if i find a alternative solution.  </p>\n\n<p>Regarding the auth problems i was thinking to use a auth token, and build some sort of session management in the core part.<br>\nSo the client app will hit the login method on core and if auth is ok i will send back a token (using jax-ws handlers) that the client will send on every subsequent request.<br>\nWhat do you think of that? is there a better approach here ?  </p>\n\n<p>Any elegant solutions on the above problems?</p>\n"},{"tags":["spring","spring-mvc","jdbctemplate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13152724,"title":"Spring JDBC template update function is getting blocked","body":"<p>There is weird issue. I am making simple Spring JdbcTemplate call as follows</p>\n\n<pre><code>jdbcTemplate.update(copyDataTestQuery, new Object[]{test.getTestId(),test.getStartDate(),test.getEndDate()}, new int[]{java.sql.Types.INTEGER, java.sql.Types.TIMESTAMP, java.sql.Types.TIMESTAMP});\n</code></pre>\n\n<p>Execution of program gets blocked on this statement.</p>\n\n<p>When I replace variable with their actual values in query, then call completes without any delay. </p>\n\n<pre><code>jdbcTemplate.update(copyDataTestQuery);\n</code></pre>\n\n<p>Quick search did not give any answer.</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":11998718,"title":"spring 3 @schedule issue","body":"<p>I have two apps both use @Scheduled annotation. And both has their own application context xml which contains <code>&lt;task:annotation-driven /&gt;</code>. Now when I deploy both apps, I am getting this exceptions</p>\n\n<blockquote>\norg.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Only one AsyncAnnotationBeanPostProcessor may exist within the context.\n</blockquote>\n\n<p>Can somebody explain why I am getting it?</p>\n\n<p>Thanks in adavance</p>\n"},{"tags":["spring","spring-mvc","resourcebundle"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13152407,"title":"Spring MVC: No message found under code for locale 'en_US'","body":"<p>Dispatcher-servlet.xml;</p>\n\n<pre><code>&lt;bean id=\"messageSource\" class=\"org.springframework.context.support.ReloadableResourceBundleMessageSource\"&gt; &lt;property name=\"basename\" value=\"classpath:messages\" /&gt; &lt;property name=\"defaultEncoding\" value=\"UTF-8\" /&gt; &lt;/bean&gt;\n</code></pre>\n\n<p>I have messages_en.properties under /resources/messages_en.properties</p>\n\n<pre><code>label.meetingDescription=Meeting Description\n</code></pre>\n\n<p>in my JSP.i am using like</p>\n\n<pre><code>&lt;form:label path=\"meetingDiscription\"&gt;\n        &lt;spring:message code=\"label.meetingDescription\" /&gt;\n&lt;/form:label&gt;\n</code></pre>\n\n<p>i am getting error;</p>\n\n<pre><code>javax.servlet.ServletException: javax.servlet.jsp.JspTagException: NoNo message found under code 'label.meetingDescription' for locale 'en_US'\n</code></pre>\n\n<p>javax.servlet.ServletException: javax.servlet.jsp.JspTagException: No message found under code 'label.meetingDescription' for locale 'en_US'</p>\n\n<p>Please help asap..thanks</p>\n"},{"tags":["spring","phonegap","backbone.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13151114,"title":"Calling webservice from backbone","body":"<p>Currently I can call webservice from phoneGap app (mobile app). But now I want the client server communication using <code>Backbone.js</code>.</p>\n\n<p>I have a user model with username and password fields. I want to pass these parameter for authentication purpose and fetch the response from server.\nI tried with this :</p>\n\n<pre><code>var User = Backbone.Model.extend({\n    urlRoot: 'http://server_ip/projectName/authenticate'\n});\n\nvar myUser = new User({ \n    username:\"nnj\",\n    password:\"nnj\"\n});\n\nvar fetchSuccess = function(data) {\n    alert(data);\n};\n\nmyUser.fetch({success: fetchSuccess});\n</code></pre>\n\n<p>Here is my Spring side controller function :</p>\n\n<pre><code>@RequestMapping(value = \"authenticate\")\n    @ResponseBody\n    public String testing(){\n        String test=\"123123\";\n        return \"{\"+test+\":\\\"123\\\"}\";\n    }\n</code></pre>\n\n<p>But I am not able to call the web service.</p>\n\n<p>How can I achieve this? Any link/reference appreciated.</p>\n\n<p>Thank You. </p>\n"},{"tags":["java","spring","rest","tiles"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":292,"score":2,"question_id":6664857,"title":"Spring MVC & Rest: different \"layout\" with same \"content\"?","body":"<p>I have a Spring 3.0 web application which tries to follow the REST principles as long as it is pragmatic.</p>\n\n<p>I have a controller method to return a folder (this are my Business Entities). (GET <a href=\"http://.../folders/\" rel=\"nofollow\">http://.../folders/</a>{id}). If a user accesses this URL he gets a complete HTML page: with header, footer, menu, and the folder details. – The \"enhancing\" with header, footer and menu is done with Apache Tiles.</p>\n\n<p>Now I have another view where the user see the folder tree, and if he clicks on one of the folders, the folder details will/should be loaded via AJAX, and displayed next to the tree. In this case the AJAX Response should be the rendered HTML (no JSON), because the <em>real</em> content should look like when the user access the folder page directly.</p>\n\n<p>My problem is, when I request the same URL, then the server will return not only the <em>real</em> content, but also the header, footer and menu.</p>\n\n<p>My question is how can I handle this in a <em>stylish</em> way:  – Of course I can use an additional parameter and two controller methods with different tile templates, but I think is not nice, because it uses html parameter for “layout” and I have to write two controller methods (and all the stuff around) only to have two tile templates</p>\n\n<ul>\n<li>So what is a recommended way to access the same \"content\" with another HTML \"layout\" in a rest way?</li>\n<li>Is there any way to switch the template in the tiles template definition, depending on what I need (how that is specified depends on the answer to the other question).</li>\n</ul>\n"},{"tags":["java","spring","exception","transactions","rollback"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2572,"score":0,"question_id":5933947,"title":"JTA transaction unexpectedly rolled back (maybe due to a timeout); nested exception is javax.transaction.RollbackException","body":"<p>I am getting  UnexpectedRollbackException .Here is the complete stackTrace .</p>\n\n<blockquote>\n  <p>org.springframework.transaction.UnexpectedRollbackException: JTA transaction unexpectedly rolled back (maybe due to a timeout); nested exception is javax.transaction.RollbackException\n          at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1031)\n          at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:732)\n          at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:701)\n          at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:321)\n          at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:116)\n          at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\n          at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:635)\n          at com.cmates.userIcon.service.IconUpdaterServiceImpl$$EnhancerByCGLIB$$78838aa7.persist()\n          at com.cmates.userIcon.service.ScheduledIconUpdaterServiceImpl.doScheduledTask(ScheduledIconUpdaterServiceImpl.java:125)\n          at com.cmates.profile.services.IconSyncSingletonImpl.process(IconSyncSingletonImpl.java:121)\n          at com.cmates.profile.services.IconSyncJob.executeInternal(IconSyncJob.java:25)\n          at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:86)\n          at org.quartz.core.JobRunShell.run(JobRunShell.java:202)\n          at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:525)\n  Caused by: javax.transaction.RollbackException\n          at org.objectweb.jotm.TransactionImpl.commit(TransactionImpl.java:245)\n          at org.objectweb.jotm.Current.commit(Current.java:488)\n          at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1028)\n          ... 13 more\n  [18 Apr 2011 00:54:00,590] ERROR ErrorLogger          - Job (DEFAULT.iconSyncJob threw an exception.\n                                                                                                                                                        1,88          </p>\n</blockquote>\n\n<p>This exception start coming suddenly in my logs.I didnot made any change in my code </p>\n\n<p>Thanks\nAshish </p>\n"},{"tags":["spring","session","spring-mvc","portlet"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13142955,"title":"ModelMap, Session attributes and Spring Portlet MVC","body":"<p>What's the real role of ModelMap in Spring Portlet MVC? I've been testing a few portlets using Spring Portlet MVC 3.0 in WebSphere Portal 7 and it seems <strong>every</strong> attribute set in ModelMap gets stored in PortletSession.</p>\n\n<p>If that's the case, what's the role of Session Attributes? (by the way, there's a several bug including clearing these guys). And what if I want to store attributes that last only to the current request? (For example, a Confirmation Message). If I put this message in the ModelMap, it gets stored in session and I have to manually clear it every time a user gets into Portal.</p>\n"},{"tags":["java","spring","hibernate","maven","production-environment"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13146643,"title":"Production-ready configurations for Spring + Hibernate?","body":"<p>The Hibernate connection provider works for development and simple testing purposes, but should be explicitly set to a more robust provider, like c3p0, before moving the project to a production environment.</p>\n\n<p>What other configurations or dependencies should typically be changed, added, or at least checked for production-readiness, in any of the Hibernate, Maven, or Spring xml config files (hibernate.cfg.xml, applicationContext.xml, pom.xml, etc.)?</p>\n"},{"tags":["hibernate","spring","tomcat","spring-mvc","apache-commons-dbcp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2184,"score":0,"question_id":7773719,"title":"Hibernate Exception: Connection Pool exhausted error after Spring upgrade","body":"<p>I am using Spring + Hibernate + Dbcp + Tomcat in my application. For some reason after a recent spring upgrade to version 3.0.6 the application has started to throw the following exception.</p>\n\n<pre><code>    org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Cannot open connection\nat org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:596)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)\nat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\nat $Proxy7.findURLByPattern(Unknown Source)\nat com.xxx.security.DAOBasedFilterInvocationDefinitionMap.lookupAttributes(DAOBasedFilterInvocationDefinitionMap.java:80)\nat org.acegisecurity.intercept.web.AbstractFilterInvocationDefinitionSource.getAttributes(AbstractFilterInvocationDefinitionSource.java:39)\nat org.acegisecurity.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:236)\nat org.acegisecurity.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:104)\nat org.acegisecurity.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:72)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.ui.ntlm.HttpFilter.doFilter(HttpFilter.java:51)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:110)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.ui.logout.LogoutFilter.doFilter(LogoutFilter.java:106)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:286)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.util.FilterChainProxy.doFilter(FilterChainProxy.java:149)\nat org.acegisecurity.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:98)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)\nat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)\nat org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\nat org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\nat org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\nat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\nat java.lang.Thread.run(Thread.java:619)\n    Caused by: org.hibernate.exception.GenericJDBCException: Cannot open connection\nat org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103)\nat org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91)\nat org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)\nat org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:29)\nat org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:420)\nat org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144)\nat org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:119)\nat org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:57)\nat org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:551)\n... 36 more\n    Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, pool exhausted, cause: Timeout waiting for idle object\nat org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:148)\nat org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:518)\nat org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81)\nat org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:417)\n... 40 more\n    Caused by: java.util.NoSuchElementException: Timeout waiting for idle object\nat org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:801)\nat org.apache.commons.dbcp.AbandonedObjectPool.borrowObject(AbandonedObjectPool.java:119)\nat org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:140)\n... 43 more\n</code></pre>\n\n<p>My configuration is as follows </p>\n\n<pre><code>&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\"&gt;\n    &lt;property name=\"driverClassName\" value=\"${db.driverClassName}\" /&gt;\n    &lt;property name=\"url\" value=\"${db.url}\" /&gt;\n    &lt;property name=\"username\" value=\"${db.username}\" /&gt;\n    &lt;property name=\"password\" value=\"${db.password}\" /&gt;\n    &lt;property name=\"maxActive\" value=\"10\" /&gt;\n    &lt;property name=\"maxIdle\" value=\"6\" /&gt;\n    &lt;property name=\"maxWait\" value=\"120\" /&gt;\n    &lt;property name=\"defaultAutoCommit\" value=\"true\" /&gt;\n    &lt;property name=\"removeAbandoned\" value=\"true\" /&gt;\n    &lt;property name=\"removeAbandonedTimeout\" value=\"60\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\"&gt;\n        &lt;ref bean=\"dataSource\" /&gt;\n    &lt;/property&gt;\n\n    &lt;property name=\"configLocations\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;classpath:com/xxx/model/hibernate/hibernate-gas.cfg.xml&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt; org.hibernate.dialect.SQLServerDialect &lt;/prop&gt;\n            &lt;prop key=\"hibernate.jdbc.fetch_size\"&gt;10&lt;/prop&gt;\n            &lt;prop key=\"hibernate.jdbc.batch_size\"&gt;50&lt;/prop&gt;\n            &lt;prop key=\"hibernate.generate_statistics\"&gt;true&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"hibernateTemplate\" class=\"org.springframework.orm.hibernate3.HibernateTemplate\"&gt;\n    &lt;property name=\"sessionFactory\"&gt;\n        &lt;ref bean=\"sessionFactory\" /&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n\n&lt;bean id=\"myTransactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\"&gt;\n        &lt;ref local=\"sessionFactory\" /&gt;\n    &lt;/property&gt;\n    &lt;property name=\"nestedTransactionAllowed\" value=\"true\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"propagationRequired\" abstract=\"true\" class=\"org.springframework.transaction.interceptor.TransactionProxyFactoryBean\"&gt;\n    &lt;property name=\"transactionManager\"&gt;\n        &lt;ref bean=\"myTransactionManager\" /&gt;\n    &lt;/property&gt;\n    &lt;property name=\"transactionAttributes\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"select*\"&gt;\n                PROPAGATION_REQUIRED,readOnly, timeout_300\n            &lt;/prop&gt;\n            &lt;prop key=\"search*\"&gt;\n                PROPAGATION_REQUIRED,readOnly, timeout_300\n            &lt;/prop&gt;\n            &lt;prop key=\"*\"&gt;\n                PROPAGATION_REQUIRED, timeout_300,\n                -Exception\n            &lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"propagationRequiresNew\" abstract=\"true\" class=\"org.springframework.transaction.interceptor.TransactionProxyFactoryBean\"&gt;\n    &lt;property name=\"transactionManager\"&gt;\n        &lt;ref bean=\"transactionManager\" /&gt;\n    &lt;/property&gt;\n    &lt;property name=\"transactionAttributes\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"*\"&gt;\n                PROPAGATION_REQUIRES_NEW, timeout_300,\n                -Exception\n            &lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring","servlets","spring-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13146427,"title":"Spring dispatcher url pattern not working","body":"<p>Mapping to a controller method is not working. Going to <code>http://localhost:8080/teleseminars/telesem_live</code> returns a 404 and this shows up in the logs:</p>\n\n<blockquote>\n  <p>2012-10-30 11:37:58,190 [http-8086-1] [WARN ]\n  [org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:947)]\n  No mapping found for HTTP request with URI\n  [/teleseminars/telesem_live] in DispatcherServlet with name\n  'dispatcher'</p>\n</blockquote>\n\n<p>Any help is appreciated. Thanks!</p>\n\n<p>Here is the controller:</p>\n\n<pre><code>@Controller\npublic class TeleseminarsController {\n\n    private final Logger logger = LoggerFactory.getLogger(getClass());\n\n    @RequestMapping(value= \"/teleseminars/{page}/{series}\", method = RequestMethod.GET) ///{page}/{series}\n    public String getTele(@PathVariable(\"page\") String page,\n            @PathVariable(\"series\") String series,\n            HttpServletRequest request,\n            final Model model) {\n\n                //do stuff\n\n            return page;\n    }\n}\n</code></pre>\n\n<p>I have this on web.xml</p>\n\n<pre><code>&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/teleseminars/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n"},{"tags":["java","web-services","spring","soap","ejb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13147961,"title":"Extracting whole SOAP message with JAX-WS","body":"<p>I have an EJB stateless bean web service and would like to get access to the whole SOAP message, not just the SOAP Body as I'm currently getting in the parameter. I want to submit the message to a different component. I'm using Spring configuration but not Spring-WS. I followed this tutorial:</p>\n\n<p><a href=\"http://java.dzone.com/articles/creating-soap-message-handlers\" rel=\"nofollow\">http://java.dzone.com/articles/creating-soap-message-handlers</a></p>\n\n<p>as is and didn't make any changes for now.  It just logs the SOAP message.  handleMessage() isn't getting called.</p>\n\n<pre><code>@Stateless\n@WebService(portName = \"XRequest_PortType\", serviceName = \"XRequestService\", endpointInterface = \"XRequestPortType\")\n@Addressing(enabled = true)\n@HandlerChain(file = \"LogMessage_handler.xml\")\n@Interceptors(SpringBeanAutowiringInterceptor.class)\npublic class XRequest_PortTypeWS implements\n        XRequestPortType {\n...}\n</code></pre>\n\n<p>The LogMessage_handler.xml is slightly different from the tutorial but I tried it both ways:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;javaee:handler-chains \n     xmlns:javaee=\"http://java.sun.com/xml/ns/javaee\" \n     xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;javaee:handler-chain&gt;\n    &lt;javaee:handler&gt;\n      &lt;javaee:handler-class&gt;com.test.ws.LogMessageHandle&lt;/javaee:handler-class&gt;\n    &lt;/javaee:handler&gt;\n  &lt;/javaee:handler-chain&gt;\n&lt;/javaee:handler-chains&gt;\n</code></pre>\n\n<p>LogMessageHandler:</p>\n\n<pre><code>package com.test.ws;\n\nimport java.io.IOException;\nimport java.util.Collections;\nimport java.util.Set;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.xml.namespace.QName;\nimport javax.xml.soap.SOAPException;\nimport javax.xml.soap.SOAPMessage;\nimport javax.xml.ws.handler.MessageContext;\nimport javax.xml.ws.handler.soap.SOAPHandler;\nimport javax.xml.ws.handler.soap.SOAPMessageContext;\n\n/**\n * \n * @author meerasubbarao\n */\npublic class LogMessageHandler implements SOAPHandler&lt;SOAPMessageContext&gt; {\n\n    public boolean handleMessage(SOAPMessageContext messageContext) {\n        log(messageContext);\n        return true;\n\n    }\n\n    public Set&lt;QName&gt; getHeaders() {\n        return Collections.EMPTY_SET;\n    }\n\n    public boolean handleFault(SOAPMessageContext messageContext) {\n        return true;\n    }\n\n    public void close(MessageContext context) {\n    }\n\n    private void log(SOAPMessageContext messageContext) {\n        SOAPMessage msg = messageContext.getMessage(); // Line 1\n        try {\n            msg.writeTo(System.out); // Line 3\n        } catch (SOAPException ex) {\n            Logger.getLogger(LogMessageHandler.class.getName()).log(\n                    Level.SEVERE, null, ex);\n        } catch (IOException ex) {\n            Logger.getLogger(LogMessageHandler.class.getName()).log(\n                    Level.SEVERE, null, ex);\n        }\n    }\n\n}\n</code></pre>\n\n<p>Is this even the best way to get the whole SOAP message? I would still need to to call a Spring bean from XRequest_PortTypeWS to send the SOAP message.</p>\n"},{"tags":["spring","context"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13147658,"title":"Browse spring context","body":"<p>Currently, I'm working on a project which has a large number of dependencies.\nDuring development, I sometimes have issue with some spring bean.\nNormally, the stack trace can tell me the name of the bean. However, it does not shows me which context .xml file declares the bean. Moreover, it does not tell me which .jar file contains the context file and how that context file is imported into my project (I means the chain of import). </p>\n\n<p>As there are many depedencies, not all context file are uses, many beans are override....\nIt takes me a lot of time to search the correct context file. One simple solution is to import all related project into my eclipse workspace and everything becomes horribly slow.</p>\n\n<p>I'm thinking about writing a tools to speed up the process:</p>\n\n<p>Given a name of spring bean / the class of bean, the tool will search in the whole class path of application and returns:\n + The spring context file which declares the bean.\n + The .jar file that contains the spring context file.\n + Extract the content spring context file and show it directly to user\n + If user provides the root spring context file, the tool will shows the import chain to the destination spring context file.</p>\n\n<p>It does not take lots of time to implement this but I just wonder whethere somebody has already implement it. I just don't want to reinvent the wheel.</p>\n\n<p>I found the project <a href=\"https://github.com/julior/spring-inspector\" rel=\"nofollow\">https://github.com/julior/spring-inspector</a>. It's interesting, but it's not what I need.</p>\n\n<p>If you know the tool like above, I'm very happy to know</p>\n"},{"tags":["java","spring","ftp","spring-integration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13144333,"title":"Stopping Spring Integration app after processing all messages from FTP list","body":"<p>What would be the best way of stopping a Spring Integration application after it has processed all messages that resulted from a series of FTP Outbound Gateway <code>ls</code> commands?</p>\n\n<p>As a one-off job I need to traverse an FTP directory structure, recursing for each directory found, and copy down each file and then send it on as message for processing. Once the FTP directory tree has been fully traversed, <em>and</em> all the messages that resulted from the traversal have been processed, I'd like to stop the application gracefully.</p>\n\n<p>My current thoughts are that I could try and keep a track of the activity of the gateway and all queues, and when they've all had a size of 0 for a while, terminate the application. This could be made more sophisticated by doing <em>something</em> like keeping a count of all files for each directory (this'd require extending <code>AbstractRemoteFileOutboundGateway</code>), making sure the directory name stays on all message headers through the flow, and then having a downstream component that keeps a count of messages processed for each directory, and initiates shutdown once they've all been accounted for.</p>\n\n<p>That sounds like a fair amount of work - does anyone know of a simpler way? I've got a choice between writing the app without Spring Integration and doing a load of tedious stuff by hand (iterating of FTP trees, copying files about), or using Spring Integration but instead having to extend bits of it to match my use case.</p>\n"},{"tags":["javascript","ajax","spring","jquery-ajax","spring-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13146052,"title":"spring mvc 3 + jquery + AJAX + $.get - value not returned from controller to callback method","body":"<p>I am new to AJAX and currently learning to use it with Spring MVC. I am facing issues on the same. </p>\n\n<p>Before proceeding to the actual real time requirement that I am working on, I am testing out the whole AJAX+Spring MVC+jquery combination with something really basic to get my understanding right.</p>\n\n<p>I am having a search box+'submit' button on a page. I am sending a hard coded text to the Spring controller on submit using $.get. Then I am sending another text from that controller back to the callback function and trying to display the returned text in the callback function using an 'alert' box. This doesn't seem to work.</p>\n\n<p>I see that the call back function is being called(since the 'alert' inside the callback function is being fired) so I am kind of assuming that control is being transferred to the controller and back to the callback method but I am not able to figure out why the text that is returned from the controller is not showing up on the alert box in the call back method. Not sure what I am missing here to capture the return value in the call back method.</p>\n\n<p>Your response and help on this is really appreciated.</p>\n\n<p>Thanks.</p>\n\n<p>HTML for text box and submit button:</p>\n\n<pre><code>    &lt;div class = \"searchcontactform\"&gt;\n      &lt;form id = \"searchcontactform\" name=\"searchcontactform\" method=\"GET\"&gt;\n        &lt;input type = 'text' size='25' name = \"searchlastname\" id = \"searchlastname\" value='Enter Last Name to Search'/&gt;\n        &lt;input type = \"submit\" value=\"Find\"&gt;\n      &lt;/form&gt;\n   &lt;/div&gt;\n</code></pre>\n\n<p>JavaScript that triggers on submit of the above form:</p>\n\n<pre><code>    &lt;script type=\"text/javascript\" src=\"${pageContext.request.contextPath}/resources/scripts/jquery.min.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\"&gt;\n\n    $(document).ready(function( ) {\n    $('#searchcontactform').submit(function(){\n\n         $.get(\"ContactList-JPA/search\", {textsent : 'Hello Controller'},callback);\n\n         function callback(textreceived){\n               alert('In Callback. Text Received is: '+textreceived);\n         };\n    });\n    });\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>        @RequestMapping(value = \"/search\", method = RequestMethod.GET)\n        public @ResponseBody String searchcontact(@RequestParam(value=\"textsent\") String textsent){\n        return textsent;\n        }\n</code></pre>\n\n<p>Jackson Dependency in POM.xml:</p>\n\n<pre><code>           &lt;dependency&gt;\n        &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;\n        &lt;version&gt;1.7.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Annotation driven in servlet-context.xml and root-context.xml:</p>\n\n<pre><code>    &lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n    &lt;annotation-driven /&gt;\n</code></pre>\n"},{"tags":["java","spring","transactions","spring-aop"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":855,"score":1,"question_id":3710514,"title":"Spring AOP and transaction add custom interceptors","body":"<p>My spring definition regarding trasnsaction are defined as following:</p>\n\n<pre><code>&lt;bean id=\"txInterceptor\"\n    class=\"org.springframework.transaction.interceptor.TransactionInterceptor\"&gt;\n    &lt;property name=\"transactionManager\" ref=\"transactionManager\"/&gt;\n&lt;/bean&gt;\n\n&lt;aop:config&gt;\n    &lt;aop:pointcut id=\"defaultServiceOperation\"\n          expression=\"execution(* x.y.service.*Service.*(..))\"/&gt;\n    &lt;aop:advisor pointcut-ref=\"defaultServiceOperation\"\n          advice-ref=\"defaultTxAdvice\"/&gt;\n&lt;/aop:config&gt;\n\n&lt;tx:advice id=\"defaultTxAdvice\"&gt;\n    &lt;tx:attributes&gt;                        \n         &lt;tx:method name=\"*\"/&gt;\n    &lt;/tx:attributes&gt;\n&lt;/tx:advice&gt;\n</code></pre>\n\n<p>Now, I'd like to add some additional interceptors that my App contains, that will run before every time that transaction interceptor is invoked. i.e. I'd like to add to the pointcut 'defaultServiceOperation' other advise, or add to the 'defaultTxAdvice' pre interceptors. Something like:</p>\n\n<pre><code>&lt;property name=\"preInterceptors\"&gt;\n      &lt;list&gt;\n           &lt;ref bean=\"optimisticLockingInterceptor\"/&gt;\n           &lt;ref bean=\"deadLockingInterceptor\"/&gt;            \n      &lt;/list&gt;\n&lt;/property&gt;\n</code></pre>\n\n<p>Is it possible and how can I do it?</p>\n"},{"tags":["java","spring","aspectj","spring-aop"],"answer_count":3,"favorite_count":6,"up_vote_count":11,"down_vote_count":1,"view_count":4824,"score":10,"question_id":3423972,"title":"Spring @Transaction method call by the method within the same class, does not work?","body":"<p>I am new to Spring Transaction. Some thing that I found really odd, probably I did understand this properly. I wanted to have a transactional around method level and I have a caller method within the same class and it seems like it does not like that, it has to be called from the separate class. I don't understand how is that possible. If anyone has an idea how to resolve this issue, I would greatly appreciate. I would like to use the same class to call the annotated transactional method.</p>\n\n<p>Here is the code: </p>\n\n<pre><code>public class UserService {\n\n    @Transactional\n    public boolean addUser(String userName, String password) {\n        try {\n            // call DAO layer and adds to database.\n        } catch (Throwable e) {\n            TransactionAspectSupport.currentTransactionStatus()\n                    .setRollbackOnly();\n\n        }\n    }\n\n    public boolean addUsers(List&lt;User&gt; users) {\n        for (User user : users) {\n            addUser(user.getUserName, user.getPassword);\n        }\n    } \n}\n</code></pre>\n"},{"tags":["java","spring"],"answer_count":6,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1954,"score":4,"question_id":1188381,"title":"Application Configuration (Spring?)","body":"<p>I'm getting tired of all this boring boilerplate code to parse application configuration like database connections, working directories, API endpoints and whatnot. Spring IoC looks nice, but this will force the user of my application to modify the XML file just to edit the database URL and so on. This might also be very distributed in the XML file where all my other wiring ocours.</p>\n\n<p>What is the best technique to allow end-users to configurate services (which do not run inside an application server)? What go you guys use?</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13144906,"title":"Spring scheduling with queue size of 1","body":"<p>I am using the spring 3 Scheduling and Thread Pooling framework.  I would like to schedule different tasks at different times/intervals.  I want each task to run to completion before another task is started.</p>\n\n<p>I.E.\nIf I have task1 and task2:\ntask1 runs every 10 minutes and takes 1 minute to run\ntask2 runs once a day and takes 5 minutes to run.</p>\n\n<p>If task1 and task2 timers fire at the same time I want task1 and task2 to be put on a queue and only one task to be taken off at a time.</p>\n\n<p>I know that I can setup this up with a Spring ThreadPoolTaskExecutor, ie</p>\n\n<pre><code>&lt;task:executor id=\"executorWithPoolSizeRange\"\n               pool-size=\"5-10\"\n               queue-capacity=\"1\"/&gt;\n</code></pre>\n\n<p>However I am not sure how to hook that executor into a scheduler.  When using a Spring ThreadPoolTaskScheduler you can only set the poolSize not the queueSize as well</p>\n\n<pre><code>&lt;task:scheduler id=\"scheduler\" pool-size=\"10\"/&gt;\n</code></pre>\n\n<p>Does anyone have any idea how I might be able to use the Spring exceutor and scheduler services together to accomplish my goal?</p>\n"},{"tags":["spring","hibernate","maven","hbm2ddl","hibernate3-maven-plugin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13130397,"title":"NullPointerException when switching from hibernate-maven-plugin version 2.2 to version 3.0","body":"<p>I am updating the versions of my pom.xml dependencies and I've run into a vague error when I change the version of the hibernate3-maven-plugin from</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;!-- Run \"mvn hibernate3:hbm2ddl\" to generate schema --&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate3-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.2&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;!-- Run \"mvn hibernate3:hbm2ddl\" to generate schema --&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate3-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.0&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>With version 2.2, everything compiles successfully, and</p>\n\n<pre><code>mvn hibernate3:hbm2ddl\n</code></pre>\n\n<p>creates the correct schema from annotated classes.</p>\n\n<p>Changing nothing else but the version results in the following error when I run the hbm2ddl command again:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project myProject: There was an error creating the AntRun task. NullPointerException -&gt; [Help 1]\n</code></pre>\n\n<p>The full stack trace is as follows:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project myProject: There was an error creating the AntRun task. NullPointerException -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project myProject: There was an error creating the AntRun task.\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)\n    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)\n    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)\nCaused by: org.apache.maven.plugin.MojoExecutionException: There was an error creating the AntRun task.\n    at org.codehaus.mojo.hibernate3.AbstractHibernateMojo.execute(AbstractHibernateMojo.java:84)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)\n    ... 19 more\nCaused by: java.lang.NullPointerException\n    at org.codehaus.plexus.configuration.DefaultPlexusConfiguration.add(DefaultPlexusConfiguration.java:174)\n    at org.codehaus.plexus.configuration.DefaultPlexusConfiguration.addChild(DefaultPlexusConfiguration.java:150)\n    at org.codehaus.mojo.hibernate3.util.PlexusConfigurationUtils.setHibernateConfiguration(PlexusConfigurationUtils.java:289)\n    at org.codehaus.mojo.hibernate3.util.PlexusConfigurationUtils.parseHibernateTool(PlexusConfigurationUtils.java:67)\n    at org.codehaus.mojo.hibernate3.AbstractHibernateToolMojo.getConfiguration(AbstractHibernateToolMojo.java:60)\n    at org.codehaus.mojo.hibernate3.AbstractHibernateMojo.execute(AbstractHibernateMojo.java:76)\n    ... 21 more\n</code></pre>\n\n<p>If I go back to version 2.2, everything works fine. And because I am not looking to upgrade for any particular reason other than simply having the most up-to-date dependencies, I'll stick with 2.2 for the time being.</p>\n\n<p>Hopefully someone can shed some light on this!</p>\n"},{"tags":["java","spring","authentication","active-directory","ldap"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":396,"score":0,"question_id":11493742,"title":"FastBind for authentication against Active Directory using Spring LDAP","body":"<p>I have a Spring MVC application (using 3.0.5 version), and need to bind to Active Directory using Spring LDAP for simply and only authenticating user's credentials. The application is hosted on a Linux server, so I need a <strong><em>cross-platform</em></strong> solution. And the application <em>does not</em> use Spring Security.</p>\n\n<p>What is an effective way to implement user authentication in this setup? Active Directory supports <code>FastBind</code> control (id=<code>1.2.840.113556.1.4.1781</code>), so I would like to leverage that since all I need is validation of the input credentials and need no other information back from AD.</p>\n\n<p>Thanks!</p>\n\n<p><strong>Update (7/16/2012)</strong>: I will continue to update my question with details of the resolution.</p>\n\n<p>Based on the answer from @ig0774 I wrote the following <code>connection control</code> class:</p>\n\n<pre><code>package com.company.authentication;\n\nimport javax.naming.ldap.Control;\n\npublic class FastBindConnectionControl implements Control {\n\n    @Override\n    public String getID() {\n        return \"1.2.840.113556.1.4.1781\";\n    }\n\n    @Override\n    public boolean isCritical() {\n        return true;\n    }\n\n    @Override\n    public byte[] getEncodedValue() {\n        return null;\n    }\n}\n</code></pre>\n\n<p>Then, I extended <code>AbstractContextSource</code>, using the <code>FastBind</code> connection-control class:</p>\n\n<pre><code>package com.company.authentication;\n\nimport java.util.Hashtable;\nimport javax.naming.NamingException;\nimport javax.naming.directory.DirContext;\nimport javax.naming.ldap.Control;\nimport javax.naming.ldap.InitialLdapContext;\nimport org.springframework.ldap.core.support.AbstractContextSource;\n\npublic class FastBindActiveDirectoryContextSource extends AbstractContextSource {\n\n    @Override\n    protected DirContext getDirContextInstance(Hashtable env) throws NamingException {\n        return new InitialLdapContext(env, new Control[] { new FastBindConnectionControl() });\n    }\n}\n</code></pre>\n\n<p>Finally, a service class to encapsulate the authentication mechanism:</p>\n\n<pre><code>package com.company.authentication;\n\nimport javax.naming.AuthenticationException;\nimport javax.naming.directory.DirContext;\nimport org.springframework.ldap.core.ContextSource;\nimport org.springframework.ldap.support.LdapUtils;\n\npublic class ActiveDirectoryAuthService implements IAuthenticate {\n\n    private ContextSource contextSource;\n    public void setContextSource(ContextSource contextSource) {\n        this.contextSource = contextSource;\n    }\n\n    @Override\n    public boolean authenticate(final String login, String password) {\n        try {\n            DirContext ctx = contextSource.getContext(login, password);\n            LdapUtils.closeContext(ctx);\n            return true;\n        }\n        catch (Exception e) {\n            return false;\n        }\n    }\n}\n</code></pre>\n\n<p>In my Spring application context configuration file, I added the following:</p>\n\n<pre><code>&lt;bean id=\"ADContextSource\" class=\"com.company.authentication.FastBindActiveDirectoryContextSource\"&gt;\n    &lt;property name=\"url\" value=\"ldaps://x.x.x.x:636\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"userAuthenticationService\" class=\"com.company.authentication.ActiveDirectoryAuthService\"&gt;\n    &lt;property name=\"contextSource\" ref=\"ADContextSource\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Finally, <code>userAuthenticationService</code> bean is injected into the client class, say a login controller.</p>\n\n<pre><code>package com.company.web;\n\nimport com.company.authentication;\n\n@Controller\npublic class LoginController {\n\n    @Autowired\n    private IAuthenticate userAuthenticationService;\n\n    public String authenticateUser(String login, String password) {\n      if (this.userAuthenticationService.authenticate(login, password)) {\n          return \"welcome\";\n      }\n      else {\n        return \"login\";\n      }\n    }\n}\n</code></pre>\n"},{"tags":["android","spring","resttemplate"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":155,"score":0,"question_id":12533671,"title":"Android with Spring Resttemplate: Error messageConverter","body":"<p>i am developing android application with maven and spring resttemplate.</p>\n\n<p>This is my pom.xml</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;platform.version&gt; 2.3.3&lt;/platform.version&gt;\n    &lt;spring.version&gt;1.0.0.RELEASE&lt;/spring.version&gt;\n    &lt;simple-version&gt;2.4.1&lt;/simple-version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;!-- Spring Android Core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.android&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-android-core&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Spring Rest Android --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.android&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-android-rest-template&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Using Jackson for JSON marshaling --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;\n        &lt;version&gt;1.7.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Using Simple for XML marshaling --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.simpleframework&lt;/groupId&gt;\n        &lt;artifactId&gt;simple-xml&lt;/artifactId&gt;\n        &lt;version&gt;${simple-version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;artifactId&gt;stax&lt;/artifactId&gt;\n                &lt;groupId&gt;stax&lt;/groupId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;artifactId&gt;stax-api&lt;/artifactId&gt;\n                &lt;groupId&gt;stax&lt;/groupId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;com.jayway.maven.plugins.android.generation2&lt;/groupId&gt;\n            &lt;artifactId&gt;android-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;androidManifestFile&gt;${project.basedir}/AndroidManifest.xml&lt;/androidManifestFile&gt;\n                &lt;assetsDirectory&gt;${project.basedir}/assets&lt;/assetsDirectory&gt;\n                &lt;resourceDirectory&gt;${project.basedir}/res&lt;/resourceDirectory&gt;\n                &lt;nativeLibrariesDirectory&gt;${project.basedir}/src/main/native&lt;/nativeLibrariesDirectory&gt;\n                &lt;sdk&gt;\n                    &lt;platform&gt;10&lt;/platform&gt;\n                &lt;/sdk&gt;\n                &lt;emulator&gt;\n                    &lt;avd&gt;10&lt;/avd&gt;\n                &lt;/emulator&gt;\n                &lt;deleteConflictingFiles&gt;true&lt;/deleteConflictingFiles&gt;\n                &lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;\n            &lt;/configuration&gt;\n            &lt;extensions&gt;true&lt;/extensions&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.3.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.6&lt;/source&gt;\n                &lt;target&gt;1.6&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n\n<p>In main Activity i have this code into button:</p>\n\n<pre><code>@Override\npublic void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.main);\n\n    btnLogin = (Button) findViewById(R.id.btnLogin);\n\n    btnLogin.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View arg0) {\n\n            String email = \"user@xxxx.com\";\n            String passwd = \"123456\";\n\n            restTemplate = new RestTemplate();\n\n            try {\n                Users user = restTemplate.getForObject(URL + \"/{email}/{password}\",\n                                Users.class, email, passwd);\n\n                if (user != null) {\n                    System.out.println(\"Mi nombre es: \" + user);\n                }\n\n            } catch (ResourceAccessException ex) {\n                System.out.println(\"OFF\");\n            } catch (RestClientException ex) {\n                System.out.println(\"Error\");\n            }\n        }\n    });\n</code></pre>\n\n<p>When i run my aaplication into device this is the error that show in logCat:</p>\n\n<pre><code>java.lang-IllegalArgumentException: 'messageConverters' must not be empty\n</code></pre>\n\n<p>Thansk!!!!</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13144676,"title":"How to walk a directory tree on the classpath looking resource files?","body":"<p>I have a collection of resources on the classpath something along the lines:</p>\n\n<pre><code>com/example/foo\n    r1.txt\n    r2.txt\n    r3.txt\n    bar/\n      b1.txt\n      b2.txt\n      baz/\n       x.txt\n       y.txt\n</code></pre>\n\n<p>I know that this package is on the class-path sitting in WEB-INF lib, what I want to able to traverse the class-path starting at com.example.foo looking for all the .txt files. Call a function with siganutre similar to the following. </p>\n\n<p>List files = findFiles(\"com/example/foo\",\"*.txt\"); </p>\n\n<p>I am using spring 3.1 so I am happy to use any methods that are part of spring.</p>\n\n<p><strong>UPDATE:</strong>\nSolution using Spring based @jschoen suggestion below:</p>\n\n<pre><code>PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\nResource[] resources = resolver.getResources(\"classpath:com/example/foo/**/*.txt\");\n</code></pre>\n\n<p>The spring matches using ant style patters thus the need for the double ** </p>\n"},{"tags":["spring","tomcat","jsf","http-status-code-500"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":3610,"score":2,"question_id":712716,"title":"get some stack trace info into a custom tomcat error 500 page","body":"<p>What is the best way of getting some of the stack trace info, perhaps the Exeception.message onto my custom error 500 page with tomcat, spring, jsf?  I'd just like the root cause of the exeception displayed.</p>\n"},{"tags":["java","spring","transactions","jta","amazon-dynamodb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12880680,"title":"Transaction Strategies for DynamoDB in Spring","body":"<p>What would be the most appropriate way to enable transactionality of multi-operation updates on AWS DynamoDB in a Java Spring application?</p>\n\n<p>AWS' DynamoDB is atomic only on a per-row update. I have a requirement to maintain secondary indices as separate tables, so I'd insert the 'main' row in the main table, and then insert a row into the secondary index table. If the second insert fails, I'd like to 'roll back' the first, in order to keep my data consistent. DynamoDB doesn't have any native support for transactions or rollbacks.</p>\n\n<p>I'm familiar with using a Spring transaction manager when working with JPA datasources like Hibernate, but I'm not sure what the best approach to implementing my own transaction-management code would be.</p>\n"},{"tags":["spring","hibernate","readonly","interceptor","flush"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13142765,"title":"Why hibernate flushes on select queries (EmptyInterceptor)?","body":"<p>I would like to understand a counter intuitive Hibernate behaviour I am seeing. I always thought that \"flush\" meant that hibernate had a data structure in-memory that has to be written to the DB. This is not what I am seeing. </p>\n\n<p>I have created the following Interceptor:</p>\n\n<pre><code>public class FeedInterceptor extends EmptyInterceptor\n{\n    @Override\n    public void postFlush(Iterator entities)\n    {\n          System.out.println(\"postFlush\");          \n    }\n}\n</code></pre>\n\n<p>Registered it in my ApplicationContext</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\"&gt;\n   &lt;property name=\"entityInterceptor\"&gt;\n      &lt;bean class=\"interceptor.FeedInterceptor\"/&gt;\n   &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>But, strange enough, I see \"postFlush\" written to the console for every row retrieved from the DB from my DAO:</p>\n\n<pre><code>Session session = sessionFactory.getCurrentSession();\nQuery query = session.createQuery(\"from Feed feed\");\nquery.list();\n</code></pre>\n\n<p>Why is that?</p>\n"},{"tags":["java","spring","rest","spring-mvc","get"],"answer_count":5,"favorite_count":2,"up_vote_count":21,"down_vote_count":0,"view_count":6166,"score":21,"question_id":3526523,"title":"Spring MVC @PathVariable getting truncated","body":"<p>I have a controller that provides RESTful access to information:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.GET, value = Routes.BLAH_GET + \"/{blahName}\")\npublic ModelAndView getBlah(@PathVariable String blahName, HttpServletRequest request,\n                            HttpServletResponse response) {\n</code></pre>\n\n<p>The problem I am experiencing is that if I hit the server with a path variable with special characters it gets truncated. For example:\n<a href=\"http://localhost:8080/blah-server/blah/get/blah2010.08.19-02:25:47\" rel=\"nofollow\">http://localhost:8080/blah-server/blah/get/blah2010.08.19-02:25:47</a></p>\n\n<p>The parameter blahName will be blah2010.08</p>\n\n<p>However, the call to request.getRequestURI() contains all the information passed in.</p>\n\n<p>Any idea how to prevent Spring from truncating the @PathVariable?</p>\n"},{"tags":["java","spring","portlet","dozer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13140984,"title":"NoClassDefFoundError: mapping files from CommonsMultipartFile to byte[]","body":"<p>I'm trying to map with dozer from CommonsMultipartFile to byte[].</p>\n\n<p>I know I need a customConverter cause dozer doesn't know anything about  CommonsMultipartFile type, so I made it:</p>\n\n<pre><code>    public class FileJtfConverter extends DozerConverter&lt;CommonsMultipartFile, byte[]&gt; {\n\n    /**\n     * Constructor\n     */\n    public FileJtfConverter() {\n        super(CommonsMultipartFile.class, byte[].class);\n    }\n\n    @Override\n    public final byte[] convertTo(CommonsMultipartFile a, byte[] b) {\n        if (a != null) {\n            return a.getBytes();\n        }\n        return null;\n    }\n\n    @Override\n    public final CommonsMultipartFile convertFrom(byte[] b, CommonsMultipartFile a) {\n        throw new UnsupportedOperationException(\"Not supported yet.\");\n    }\n    }\n</code></pre>\n\n<p>And my dozer xml file:  </p>\n\n<pre><code>&lt;mapping type=\"one-way\"&gt;        \n    &lt;class-a&gt;myPackage.ClassA\n    &lt;/class-a&gt;\n    &lt;class-b&gt;myPackage.ClassB\n    &lt;/class-b&gt;\n    ...\n    &lt;field custom-converter=\"es.xunta.formacion.sifo3.transporte.util.converter.FileJtfConverter\"&gt;\n       &lt;a&gt;anexo&lt;/a&gt;\n       &lt;b&gt;anexo&lt;/b&gt;\n    &lt;/field&gt;\n&lt;/mapping&gt;\n</code></pre>\n\n<p>Where Class A and class B are:</p>\n\n<pre><code>public class ClassA{\n    ...\n    private CommonsMultipartFile anexo;\n    ...\n    public final CommonsMultipartFile getAnexo() {\n    return anexo;\n    }\n\n    public final void setAnexo(CommonsMultipartFile anexo) {\n    this.anexo = anexo;\n    }\n}\n\npublic class ClassB{\n    ...\n    protected byte[] anexo;\n    ...\n    public void setAnexo(byte[] value) {\n    this.anexo = ((byte[]) value);\n    }\n\n    public byte[] getAnexoPago() {\n        return anexoPago;\n    }\n}\n</code></pre>\n\n<p>All seems ok, but it's throwing an exception: \n    org.dozer.MappingException: java.lang.NoClassDefFoundError: org/apache/commons/fileupload/FileUploadException</p>\n\n<p>And this is pretty weird, because I have defined the dependencies in my pom.xml file...</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;                \n    &lt;/dependency&gt;   \n</code></pre>\n\n<p>Any ideas..? Thanks a lot!</p>\n"},{"tags":["spring","http","url","servlets"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13142382,"title":"work with spring on servlet class","body":"<p>I have a servlet class that extends HttpServlet, in my doPost method i check the req.getQueryString() and then return a respond to the client using.</p>\n\n<pre><code>resp.setContentType(\"text/html\");\nPrintWriter out = resp.getWriter();         \nout.println(\"My Respond\");\n</code></pre>\n\n<p>In my client side I call the server using a URL</p>\n\n<pre><code>URL url = new URL( \"my server ip\" );                \nHttpURLConnection servletConnection = (HttpURLConnection) url.openConnection();\nservletConnection.setRequestMethod(\"POST\");\nservletConnection.setDoOutput(true);\n\nInputStream response = servletConnection.getInputStream();\nInputStreamReader inputStreamReader = new InputStreamReader(response);\nBufferedReader bufferedReader = new BufferedReader(inputStreamReader);\n</code></pre>\n\n<p>and every thing works just fine the client call the server the server return an answer to the client.</p>\n\n<p>the troubles start when i want to change my servlet class to work with spring and for this i need to change the servlet extension to HttpRequestHandlerServlet, but when i do that i get a 500 or 503 ERROR,\nwhat do i need to change in my client side so i could work with spring in my server side and the logic of my code will remain. </p>\n"},{"tags":["java","android","spring","gson"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13141926,"title":"HTTPClientErrorException: 400 Bad Request using Spring REST template","body":"<pre><code>String Stringifiedjson = new Gson().toJson(user);\nLog.d(\"SpringAndroid\", Stringifiedjson);\n\nHttpHeaders requestHeaders = new HttpHeaders();\nrequestHeaders.setAccept(Collections.singletonList(new \n         MediaType(\"application\", \"json\")));\n\nHttpEntity &lt;? &gt; requestEntity = new HttpEntity &lt; Object &gt;   \n       (Stringifiedjson, requestHeaders);\n\nGsonHttpMessageConverter messageConverter = new GsonHttpMessageConverter();\nList &lt; HttpMessageConverter &lt;? &gt;&gt; messageConverters = \n      new ArrayList &lt; HttpMessageConverter &lt;? &gt;&gt; ();\nmessageConverters.add(messageConverter);\n\nRestTemplate restTemplate = new RestTemplate();\nrestTemplate.setMessageConverters(messageConverters);\n\ntry {   \n    ResponseEntity&lt;String&gt; responseEntity = restTemplate.\n         exchange(url, HttpMethod.POST, requestEntity, String.class);               \n}\n</code></pre>\n\n<p>I am getting a 400 Bad Request, but when i send the <code>Stringifiedjson</code> in my fiddler. I get a valid <code>response</code>. Now how to post the GSON Object using RestTemplate</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13134319,"title":"Bean property 'myDataSource' is not writable or has an invalid setter method","body":"<p>\n    </p>\n\n<pre><code>&lt;/bean&gt;\n\n&lt;bean id=\"service\" class=\"com.virtusa.service.ServiceIMP\"&gt;\n&lt;property name=\"dao\" ref=\"EmployeeDAO\"&gt;&lt;/property&gt;\n&lt;/bean&gt; \n\n\n\n&lt;bean id=\"EmployeeDAO\" class=\"com.virtusa.dao.EmployeeDAO\"&gt;\n    &lt;property name=\"myDataSource\" ref=\"myDataSource\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>my spring congig file</p>\n\n<p>private DataSource myDataSource;\n    private JdbcTemplate jdbcTemplate;</p>\n\n<pre><code>public void setDataSource(DataSource myDataSource) {\n    this.myDataSource = myDataSource;\n     this.jdbcTemplate = new JdbcTemplate(myDataSource);\n }\n</code></pre>\n\n<p>my dao</p>\n"},{"tags":["spring","testing","testng","spring-annotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13092322,"title":"Spring + TestNG integration tests, injecting DAO with annotations fails","body":"<p>I first did not mention what was the key component of this issue: I am using TestNG here.</p>\n\n<p>I have a DAO layer performing persistence. It works fine as part of my little web app (I have a classic Controller, Service, DAO layers design). I can update this question with my XMLs if required.</p>\n\n<p>My Service layer</p>\n\n<pre><code>@Service\npublic class UserServiceImpl implements UserService {\n\n    @Autowired\n    private UserDao userDao;\n\n    @Override\n    public GoodVibeUserDetails getUser(String username) throws UsernameNotFoundException {\n\n        GoodVibeUserDetails user = userDao.getDetailsRolesAndImagesForUser(username);\n\n        return user;\n    }\n\n    // more methods...\n\n}\n</code></pre>\n\n<p>My DAO layer</p>\n\n<pre><code>@Repository\npublic class UserDaoImplHibernate implements UserDao {\n\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    // My methods using sessionFactory &amp; \"talking\" to the Db via the sessionFactory\n}\n</code></pre>\n\n<p>And here is my Test Class</p>\n\n<pre><code>@Component\npublic class UserDaoImplHibernateTests{\n\n    @Autowired\n    private UserDao userDao;\n\n    private GoodVibeUserDetails user; \n\n    @BeforeMethod\n    public void beforeEachMethod() throws ParseException{\n        user = new GoodVibeUserDetails();\n        user.setUsername(\"adrien\");\n        user.setActive(true);\n        // &amp; so on...\n    }\n\n    /*\n     * When everything is fine - test cases\n     */\n    @Test\n    public void shouldAcceptRegistrationAndReturnUserWithId() throws Exception{\n        assertNotNull(userDao) ;\n        user = userDao.registerUser(user);\n        assertNotNull(user.getId()) ;\n    }\n\n    // more test cases...\n\n}\n</code></pre>\n\n<p>But for my test class the Autowiring, <code>userDao</code> always returns <strong>Null</strong>, I'm only starting to do tests in Spring and I'm a bit lost. Any pointers are welcome.</p>\n\n<hr>\n\n<p>Latest edit after Boris Treukhov's answer</p>\n\n<pre><code>import ...\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\nimport static org.junit.Assert.assertNotNull;\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(\"/applicationContext.xml\")\npublic class UserDaoImplHibernateTests{\n\n    @Autowired\n    @Qualifier(\"userDao\")\n    private UserDao userDao;\n\n    private GoodVibeUserDetails user; \n\n    @BeforeMethod\n    public void beforeEachMethod() throws ParseException{\n        user = new GoodVibeUserDetails();\n        user.setUsername(\"adrien\");\n        user.setActive(true);\n        // &amp; so on...\n    }\n\n    /*\n     * When everything is fine - test cases\n     */\n    @Test\n    public void shouldAcceptRegistrationAndReturnUserWithId() throws Exception{\n        assertNotNull(userDao) ;\n        user = userDao.registerUser(user);\n        assertNotNull(user.getId()) ;\n    }\n\n    // more test methods...\n\n}\n</code></pre>\n\n<p>And this is my <strong>applicationContext.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n    xmlns:tx=\"http://www.springframework.org/schema/tx\" \n    xmlns:context=\"http://www.springframework.org/schema/context\" \n    xmlns:p=\"http://www.springframework.org/schema/p\" \n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd \n    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd \n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\" &gt;\n\n\n    &lt;!-- the application context definition scans within the base package of the application --&gt;\n    &lt;!-- for @Components, @Controller, @Service, @Configuration, etc. --&gt;\n    &lt;context:annotation-config /&gt;\n    &lt;context:component-scan base-package=\"com.goodvibes\" /&gt;\n\n    &lt;bean id=\"propertyConfigurer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\" p:location=\"/WEB-INF/jdbc.properties\" /&gt;\n\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\" \n        p:driverClassName=\"${jdbc.driverClassName}\" p:url=\"${jdbc.databaseurl}\" \n        p:username=\"${jdbc.username}\" p:password=\"${jdbc.password}\" /&gt;\n\n\n    &lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"configLocation\"&gt;\n            &lt;value&gt;classpath:hibernate.cfg.xml&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property name=\"configurationClass\"&gt;\n            &lt;value&gt;org.hibernate.cfg.AnnotationConfiguration&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;${jdbc.dialect}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;${jdbc.show_sql}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.connection.SetBigStringTryClob\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.jdbc.batch_size\"&gt;0&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven /&gt;\n\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n        &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n    &lt;/bean&gt;\n\n    [...]\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>I did not add a repository-config.xml as this should be enough to access <code>userDao</code>. I still get userDao equal null though.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","spring","hsqldb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13141328,"title":"How do I create a specific date in HSQLDB?","body":"<p>I need to create a HIGH date in HSQLDB and the solution is eluding me.  I need something like </p>\n\n<pre><code>Date(9999-12-31 0:0:0)\n</code></pre>\n\n<p>but I cannot find a function or whatever to do it.  I am loding the date via Spring on startup and i need something like:</p>\n\n<pre><code>insert intoMOD (\n  ITM_INST_ELECTR_MOD_STRT_TS,\n  ITM_INST_ID,\n  ELECTR_MOD_ID,\n  ITM_INST_ELECTR_MOD_END_TS\n) VALUES (\n  CURRENT_DATE,\n  0,\n  0,\n  Date(9999-12-31 0:0:0)\n)\n</code></pre>\n\n<p>What is the way to create a specific data using SQL in Hypersonic?</p>\n"},{"tags":["spring","spring-batch","retry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13138483,"title":"Is there any Spring Retry documentation?","body":"<p>I'm interested in finding out more about Spring Retry. Is there any documentation anywhere? All I can find is the source code in the <a href=\"https://github.com/SpringSource/spring-retry\" rel=\"nofollow\">GitHub project</a>.</p>\n"},{"tags":["spring","integration"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13118496,"title":"Spring Integration | FTP - FILE Adapter Issue","body":"<p>The application which i am working on has an Integration Layer build using Spring Integration 2.5, It tries to pull a CSV file from FTP server using FTP adapter and drops it on to local server which is polled by \nFile adapter. So as soon as file is downloaded by ftp the file adapter passes it on to Splitter wherein the CSV file is split into separate records and send to downstream for further processing. </p>\n\n<p>The issue occurs when splitter some times does not see the file tha is downloaded by the FTP adapter. Below is the config details and that piece of code from splitter which tries to check if the file exists and throws user defined exception if the file does not exists. </p>\n\n<p>The problem is that it always runs into the exception.</p>\n\n<pre><code>  &lt;ftp:inbound-channel-adapter id=\"ftpInbound\" channel=\"ftpChannel\"\n        session-factory=\"ftpClientFactory\"\n        filename-regex=\"${ftp.server.remotefilename}\"\n        auto-create-local-directory=\"true\" delete-remote-files=\"false\"\n        remote-directory=\"${ftp.server.remotefolder}\"\n        local-directory=\"file:${ftp.server.localfolder}\"&gt;\n        &lt;si:poller ref=\"FTPPoller\"&gt;&lt;/si:poller&gt;\n    &lt;/ftp:inbound-channel-adapter&gt;\n    &lt;si:channel id=\"ftpChannel\"&gt;\n        &lt;si:queue /&gt;\n    &lt;/si:channel&gt;\n\n    &lt;file:inbound-channel-adapter id=\"fileInboundAdapter\"\n        channel=\"fileIn\" directory=\"file:${ftp.server.localfolder}\"\n        filename-pattern=\"${ftp.server.localfilename}\"\n        auto-create-directory=\"true\" prevent-duplicates=\"false\"&gt;\n        &lt;si:poller ref=\"filePoller\"&gt;&lt;/si:poller&gt;\n    &lt;/file:inbound-channel-adapter&gt;\n\n    &lt;si:channel id=\"fileIn\" /&gt;\n\n    &lt;si:splitter input-channel=\"fileIn\" output-channel=\"csvRowsIn\" ref=\"inboundFileRowSplitter\" method=\"extractRows\" /&gt;\n</code></pre>\n\n<hr>\n\n<pre><code>public class InboundFileRowSplitter {\n\n    @Splitter\n    public Collection&lt;String[]&gt; extractRows( @Headers\n    Map&lt;String, Object&gt; headers, File keywordFile ) {\n\n       &gt;&gt;Other Processing&lt;&lt;\n\n        return processKeywordsFile( keywordFile );\n    }\n\n\n    private Collection&lt;String[]&gt; processKeywordsFile( File keywordFile ) {\n\n       try {\n            if (keywordFile.exists()) {\n\n             &gt;&gt;Other Processing&lt;&lt;\n\n            } else {\n                throw new ResourceLoaderException( \"............................\" );\n            }\n\n        } catch (Exception e) {\n            &gt;&gt;Other Processing&lt;&lt;\n        } finally {\n           &gt;&gt;Other Processing&lt;&lt;\n        }\n\n    }\n</code></pre>\n\n<p>In the below code it throws under defined expection ResourceLoaderException. Any suggestion on how to resolve this issue would be appreciated, Its Production issue and early response would really.</p>\n"},{"tags":["java","spring","mybatis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13140315,"title":"Autowire daos into a service and that service into a Junit test class","body":"<p>I am trying to autowire Dao's into service and service into a Junit test class, and I got the below error.</p>\n\n<pre><code>    productService:null\njava.lang.NullPointerException\n    at com.localbazaar.product.test.ProductServiceTest.test01_selectAuthor(ProductServiceTest.java:28)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)\n    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82)\n    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n</code></pre>\n\n<p>When I write an interface and implementation for <code>ProductService</code>, the service object is printing but the author object is coming null.</p>\n\n<p>Can any one tell me how to fix this issue?</p>\n\n<pre><code>//DAO\npackage com.dao;\n\nimport com.domain.Author;\n\npublic interface AuthorMapper {\n\n    int deleteByPrimaryKey(Integer authorId);\n}\n\n//service\npackage com.service;\n\n@Service\npublic class ProductService{\n\n    @Autowired\n    private AuthorMapper authorMapper;\n        public AuthorselectAuthorByPrimaryKey(Integer authorId) {\n        Author author = null;\n        try{\n            author = authorMapper.selectAuthorByPrimaryKey(authorId);\n        }catch(Exception e){}\n        return author ;\n    }\n}\n---------------------------------------------------------------------------------\n// JUnit Test Class\n@ContextConfiguration(locations = {\"classpath:springTest/springcontext.xml\"})\n@Controller\npublic class ProductServiceTest extends   AbstractTransactionalJUnit4SpringContextTests {\n\n        @Autowired\n    private ProductService productService;\n\n    @Test\n    public void test01_selectAuthor(){\n        try{\n        System.out.println(\"productService:\"+productService);\n            Author author = productService.selectAuthorByPrimaryKey(1);\n            System.out.println(author);\n            System.out.println(author.getAuthorId());\n            System.out.println(author.getSourceId());\n            System.out.println(author.getName());\n            System.out.println(author.getPersonalName());\n            System.out.println(author.getRevision());\n            System.out.println(author.getLastModified());\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }   \n}\n----------------------------------------------------------------------------------\n\nAuthoerMapper.xml\n\n\n\n  &lt;resultMap id=\"BaseResultMap\" type=\"com.domain.Author\" &gt;\n    &lt;id column=\"author_id\" property=\"authorId\" jdbcType=\"INTEGER\" /&gt;\n    &lt;result column=\"source_id\" property=\"sourceId\" jdbcType=\"VARCHAR\" /&gt;\n    &lt;result column=\"name\" property=\"name\" jdbcType=\"VARCHAR\" /&gt;\n    &lt;result column=\"personal_name\" property=\"personalName\" jdbcType=\"VARCHAR\" /&gt;\n    &lt;result column=\"revision\" property=\"revision\" jdbcType=\"INTEGER\" /&gt;\n    &lt;result column=\"last_modified\" property=\"lastModified\" jdbcType=\"VARCHAR\" /&gt;\n  &lt;/resultMap&gt;\n\n  &lt;sql id=\"Base_Column_List\" &gt;\n    author_id, source_id, name, personal_name, revision, last_modified\n  &lt;/sql&gt;\n\n  &lt;select id=\"selectByPrimaryKey\" resultMap=\"BaseResultMap\" parameterType=\"java.lang.Integer\" &gt;\n    select \n    &lt;include refid=\"Base_Column_List\" /&gt;\n    from author_t\n    where author_id = #{authorId,jdbcType=INTEGER}\n  &lt;/select&gt;\n\n  &lt;select id=\"selectAuthorBySourceId\" resultMap=\"BaseResultMap\" parameterType=\"java.lang.String\" &gt;\n    select \n    &lt;include refid=\"Base_Column_List\" /&gt;\n    from author_t\n    where source_id = #{sourceId,jdbcType=VARCHAR}\n  &lt;/select&gt;\n\n  &lt;delete id=\"deleteByPrimaryKey\" parameterType=\"java.lang.Integer\" &gt;\n    delete from author_t\n    where author_id = #{authorId,jdbcType=INTEGER}\n  &lt;/delete&gt;\n\n  &lt;insert id=\"insert\" parameterType=\"com.domain.Author\" &gt;\n    &lt;selectKey resultType=\"java.lang.Integer\" keyProperty=\"authorId\" order=\"AFTER\" &gt;\n      SELECT LAST_INSERT_ID()\n    &lt;/selectKey&gt;\n    insert into author_t (source_id, name, personal_name, \n      revision, last_modified)\n    values (#{sourceId,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{personalName,jdbcType=VARCHAR}, \n      #{revision,jdbcType=INTEGER}, #{lastModified,jdbcType=VARCHAR})\n  &lt;/insert&gt;\n\n  &lt;insert id=\"insertSelective\" parameterType=\"com.domain.Author\" &gt;\n    &lt;selectKey resultType=\"java.lang.Integer\" keyProperty=\"authorId\" order=\"AFTER\" &gt;\n      SELECT LAST_INSERT_ID()\n    &lt;/selectKey&gt;\n    insert into author_t\n    &lt;trim prefix=\"(\" suffix=\")\" suffixOverrides=\",\" &gt;\n      &lt;if test=\"sourceId != null\" &gt;\n        source_id,\n      &lt;/if&gt;\n      &lt;if test=\"name != null\" &gt;\n        name,\n      &lt;/if&gt;\n      &lt;if test=\"personalName != null\" &gt;\n        personal_name,\n      &lt;/if&gt;\n      &lt;if test=\"revision != null\" &gt;\n        revision,\n      &lt;/if&gt;\n      &lt;if test=\"lastModified != null\" &gt;\n        last_modified,\n      &lt;/if&gt;\n    &lt;/trim&gt;\n    &lt;trim prefix=\"values (\" suffix=\")\" suffixOverrides=\",\" &gt;\n      &lt;if test=\"sourceId != null\" &gt;\n        #{sourceId,jdbcType=VARCHAR},\n      &lt;/if&gt;\n      &lt;if test=\"name != null\" &gt;\n        #{name,jdbcType=VARCHAR},\n      &lt;/if&gt;\n      &lt;if test=\"personalName != null\" &gt;\n        #{personalName,jdbcType=VARCHAR},\n      &lt;/if&gt;\n      &lt;if test=\"revision != null\" &gt;\n        #{revision,jdbcType=INTEGER},\n      &lt;/if&gt;\n      &lt;if test=\"lastModified != null\" &gt;\n        #{lastModified,jdbcType=VARCHAR},\n      &lt;/if&gt;\n    &lt;/trim&gt;\n  &lt;/insert&gt;\n\n  &lt;update id=\"updateByPrimaryKeySelective\" parameterType=\"com.domain.Author\" &gt;\n    update author_t\n    &lt;set &gt;\n      &lt;if test=\"sourceId != null\" &gt;\n        source_id = #{sourceId,jdbcType=VARCHAR},\n      &lt;/if&gt;\n      &lt;if test=\"name != null\" &gt;\n        name = #{name,jdbcType=VARCHAR},\n      &lt;/if&gt;\n      &lt;if test=\"personalName != null\" &gt;\n        personal_name = #{personalName,jdbcType=VARCHAR},\n      &lt;/if&gt;\n      &lt;if test=\"revision != null\" &gt;\n        revision = #{revision,jdbcType=INTEGER},\n      &lt;/if&gt;\n      &lt;if test=\"lastModified != null\" &gt;\n        last_modified = #{lastModified,jdbcType=VARCHAR},\n      &lt;/if&gt;\n    &lt;/set&gt;\n    where author_id = #{authorId,jdbcType=INTEGER}\n  &lt;/update&gt;\n\n  &lt;update id=\"updateByPrimaryKey\" parameterType=\"com.domain.Author\" &gt;\n    update author_t\n    set source_id = #{sourceId,jdbcType=VARCHAR},\n      name = #{name,jdbcType=VARCHAR},\n      personal_name = #{personalName,jdbcType=VARCHAR},\n      revision = #{revision,jdbcType=INTEGER},\n      last_modified = #{lastModified,jdbcType=VARCHAR}\n    where author_id = #{authorId,jdbcType=INTEGER}\n  &lt;/update&gt;\n\n----------------------------------------------------------------------------------\n//springcontext.xml\n\n\n    &lt;bean id=\"propertyConfigurer\"\n          class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"location\"&gt;\n            &lt;value&gt;classpath:springTest/config.properties&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;     \n\n    &lt;!-- define the mysql dataSource --&gt;\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\"&gt;\n        &lt;property name=\"driverClassName\" value=\"${driverClassName}\" /&gt;\n        &lt;property name=\"url\" value=\"${url}\" /&gt;\n        &lt;property name=\"username\" value=\"${username}\" /&gt;\n        &lt;property name=\"password\" value=\"${password}\" /&gt;    \n    &lt;/bean&gt; \n\n    &lt;!-- transaction manager --&gt;\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;/bean&gt;\n\n     &lt;aop:config&gt;  \n         &lt;aop:advisor pointcut=\"execution(* com.service..*.*(..))\" advice-ref=\"txAdvice\"/&gt;  \n     &lt;/aop:config&gt;\n     &lt;tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\"&gt;  \n         &lt;tx:attributes&gt;  \n             &lt;tx:method name=\"get*\" read-only=\"true\"/&gt;  \n             &lt;tx:method name=\"find*\" read-only=\"true\"/&gt;  \n             &lt;tx:method name=\"*\"  propagation=\"REQUIRED\"/&gt;  \n        &lt;/tx:attributes&gt;  \n     &lt;/tx:advice&gt;       \n\n      &lt;!-- enable component scanning and autowire (beware that this does not enable mapper scanning!) --&gt;    \n    &lt;context:component-scan base-package=\"com.service\" /&gt;\n\n     &lt;!-- define the SqlSessionFactory --&gt;\n    &lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"typeAliasesPackage\" value=\"com.domain\" /&gt;\n        &lt;property name=\"mapperLocations\" value=\"classpath*:com/dao/*.xml\" /&gt;\n    &lt;/bean&gt;\n\n   &lt;!-- scan for mappers and let them be autowired --&gt;\n    &lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt;\n        &lt;property name=\"basePackage\" value=\"com.dao\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"productService\" class=\"com.service.ProductService\" /&gt;\n</code></pre>\n"},{"tags":["spring","scala"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":13123714,"title":"Scala Spring @Value in constructor body","body":"<p>I have the following spring pseudo-code wired scala class.</p>\n\n<pre><code>@Service\nclass Something {\n\n@Value(\"${some.property}\")\nval someString : String\n\n// do something with someString in the body\n}\n</code></pre>\n\n<p>However this won't work because the someString is part of the constructor body, and spring can't wire in the values until after the constructor has executed.</p>\n\n<p>How can I wire in @Value's so that it works, and isn't horrible (my current solution with a custom constructor containing all the values I need just doesn't feel \"scala\" and looks horrible.</p>\n\n<p>Edit: To clarify, my current solution is this:</p>\n\n<pre><code>@Service\nclass Something { \n  @Autowired \n  def this(@Value(\"${some.prop}\") prop : String) { \n    this() \n    // do other construction stuff here\n  }\n}\n</code></pre>\n\n<p>I just think it looks ugly and feel there is a better way. I also don't like having to create these secondary constructors when I'd rather enforce it on the primary constructor.</p>\n\n<p>Edit 2: To further clarify, I was hoping there was a way to do something like this:</p>\n\n<pre><code>@Service\nclass Something(@Value(\"${some.property}\") string : String) {\n// use the value in your constructor here\n}\n</code></pre>\n\n<p>Because this looks far more elegant. I just can't get it to work :)</p>\n"},{"tags":["spring","rest","spring-mvc","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13139662,"title":"Spring REST JUnit 4","body":"<p>I have a spring controller with multiple spring bean dependencies (autowired services). Each service has also few spring bean dependencies (autowired daos). \nFor instance, controller login method:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/\")\npublic class ClientAccessController extends BaseController {\n\n    @Autowired\n    IFileService fileService;\n\n    @Autowired\n    MidTierService midTierService;\n\n    /**\n     * Used to handle client login requests\n     * Works as a proxy to MID tier server\n     *\n     * @param request LoginRequest(userLogin, userPassword, compId, installGuid)\n     * @return LoginResponse (token)\n     * @throws Exception\n     */\n    @RequestMapping(method = RequestMethod.POST, value = \"/login\", headers = \"Content-   type=application/json\")\n    public ResponseEntity&lt;LoginResponse&gt; login(@RequestBody LoginRequest request) throws Exception {\n\n        log.info(\"LOGIN REQUEST [ \" + request.toString() + \" ]\");\n\n        String token = midTierService.authenticateNativeClient(request.getLogin(), request.getPassword(), request.getGuId(),\n                request.getCompid().toString());\n        LoginResponse response = new LoginResponse(token);\n\n        HttpHeaders httpHeaders = new HttpHeaders();\n        httpHeaders.setContentType(MediaType.APPLICATION_JSON);\n\n        ResponseEntity&lt;LoginResponse&gt; responseEntity = new ResponseEntity&lt;&gt;(response, HttpStatus.OK);\n\n        log.info(\"LOGIN RESPONSE [ \" + response.toString());\n\n        return responseEntity;\n    }\n</code></pre>\n\n<p>I am trying to write JUnit tests for only controller <code>ClienAccessController</code>. But when I autowire <code>ClientAccessController</code> in test class, spring tries to create beans for all controller dependencies and all nested ones (daos etc) but I really don't need em, only <code>MidTierService</code>. \nSo what should I do to exclude nested beans initializations and to use only what I need in test classes?</p>\n"},{"tags":["java","spring","frameworks","apache-torque"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":198,"score":0,"question_id":1058329,"title":"presentation layer to go with apache torque","body":"<p>I'm planning on using Apache torque as my object-relational mapper (ORM), and I was wondering if anybody has any suggestions around what framework to use for presentation layer with torque. maybe Spring?</p>\n\n<p>I don't know if this helps, but my application is basically going to be bunch of forms to input data and based on that data, I'll generate reports in form of a graph or chart. </p>\n"},{"tags":["spring","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13131122,"title":"Spring Security - Redirect if already logged in","body":"<p>I'm new to Spring: </p>\n\n<p>I do not want authenticated user from accessing the login page. What is the proper way to handle redirects for the '/login' if the user is already authenticated? Say, I want to redirect to '/index' if already logged in.</p>\n\n<p>I have tried 'isAnonomous()' on login, but it redirects to access denied page.</p>\n\n<pre><code>&lt;security:http auto-config=\"true\" use-expressions=\"true\" ...&gt;\n    &lt;form-login login-processing-url=\"/resources/j_spring_security_check\"\n                 default-target-url=\"/index\"\n                login-page=\"/login\" authentication-failure-url=\"/login?login_error=t\" /&gt;\n    &lt;logout logout-url=\"/resources/j_spring_security_logout\"  /&gt;\n   ...\n  &lt;security:intercept-url pattern=\"/login\" access=\"permitAll\" /&gt;\n  &lt;security:intercept-url pattern=\"/**\" access=\"isAuthenticated()\" /&gt;\n&lt;/security:http&gt;\n</code></pre>\n"},{"tags":["java","spring","hibernate","rest","transactions"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13138564,"title":"Catch Hibernate Persistence Exceptions in @Transactional REST service methods","body":"<p>We're building a REST service with Spring and JPA where each method is annotated <code>@Transactional</code>, since one REST call is one transaction. Now if say a user is trying to call delete on a resource that has dependencies, hibernate will throw a <code>PersistenceException</code>, causing the REST server call to return with status 500. </p>\n\n<p>We want to catch those exceptions and wrap them in our own error object, that will contain custom error codes as well as the orignial message.</p>\n\n<p>I tried just plain catching all <code>RuntimeExceptions</code> in the REST call and then returning our custom error object. That however won't work, as appearently the fact that the transaction has been aborted will get handled outside my method.</p>\n\n<p>I also tried to catch the <code>PersistenceException</code> directly at DAO level. This worked fine in my unit tests didn't change anything outside them. Also our web container seems to just do its own thing by throwing a <code>DataIntegrityViolationException</code> instead of a <code>PersistenceException</code>. That doesn't even appear in the trace. As a side note, that's rather confusing, as I thought Hibernate would take care of its own stuff. Why is spring interfering?</p>\n\n<p>Well anyway.. I also tried to use </p>\n\n<pre><code>TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();\n</code></pre>\n\n<p>inside the REST service method with no success. </p>\n\n<p>I'm at a loss here.. It seems error handling for a transaction started by <code>@Transactional</code> is just out of my hands..?! Is it maybe because the annotation creates a proxy that gets processed in a different scope?</p>\n\n<p>Is the only option to handle transactions manually with the <code>TransactionTemplate</code>?</p>\n"},{"tags":["spring","struts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":14,"score":-1,"question_id":13137364,"title":"Injecting static references in Struts action class","body":"<p>Our application contains struts and spring. Struts action classes are also configured as spring beans in applicationContext.xml. Spring class references are wired to action classes using 'property'.</p>\n\n<p>For Ex.,</p>\n\n<p><strong>applicationContext.xml</strong></p>\n\n<pre><code>&lt;bean id=\"sampleAction\" class=\"com.arizona.sample.action.SampleAction\"&gt;\n    &lt;property name=\"sampleManager\" ref=\"sampleManager\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>In SampleAction, I got to write a static method where it uses 'sampleManager' reference. So, I have configured 'sampleManager' as static variable. At runtime I got a NullPointerExcpetion at the place where 'sampleManager' is used. I have concluded that 'sampleManager' ain't get initialized.</p>\n\n<p>Can anyone please help me in this regard?</p>\n\n<p>P.S.: I have provided setSampleManager(..) and also tried with @Autowired.</p>\n"},{"tags":["spring","jamon"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13119016,"title":"Using jamon in Spring","body":"<p>I am trying to use Jamon in my spring app to but i don't see any messages here's my context.xml definitions for jamon .</p>\n\n<pre><code>&lt;bean id=\"jamonMonitoringAspectInterceptor\" class=\"org.springframework.aop.interceptor.JamonPerformanceMonitorInterceptor\"&gt;\n    &lt;property name=\"loggerName\" value=\"JamonLogger\"/&gt;\n    &lt;property name=\"trackAllInvocations\" value=\"true\"&gt;&lt;/property&gt;\n    &lt;property name=\"useDynamicLogger\" value=\"true\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;aop:config&gt;\n        &lt;aop:pointcut id=\"jamonMonitoringPointcut\"\n                    expression=\"execution(* com.myorg.somepack.networkapi.websocket.WebSocketService.*(..))\"/&gt;\n\n            &lt;aop:advisor pointcut-ref=\"jamonMonitoringPointcut\" \n                    advice-ref=\"jamonMonitoringAspectInterceptor\"/&gt;\n&lt;/aop:config&gt;\n</code></pre>\n\n<p>I don't get any exception and everything is working fine but I don't see jamon working.</p>\n"},{"tags":["spring","hibernate","interceptor","sessionfactory"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13137647,"title":"How to wire a SessionFactory into a Hibernate Interceptor with Spring?","body":"<p>So, I am following the Hibernate documentation to configure interceptors (<a href=\"http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/events.html#objectstate-interceptors\" rel=\"nofollow\">link</a>). Then, I am registering my interceptor in the AnnotationSessionFactoryBean as follows:</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\"&gt;\n&lt;property name=\"entityInterceptor\"&gt;\n&lt;bean class=\"domain.interceptor.AddressInterceptor\"/&gt;\n&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>What I want to achieve is to insert a row in my log table when something is caught in my Interceptor. Though, this introduces a cyclical configuration dependency: the Interceptor needs the SessionFactory and the SessionFactory needs the Interceptor. How could I wire in the SessionFactory in my Interceptor?</p>\n"},{"tags":["hibernate","spring","spring-3"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":4038,"score":3,"question_id":4041645,"title":"Set Hibernate session's flush mode in Spring","body":"<p>I am writing integration tests and in one test method I'd like to write some data to DB and then read it. </p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = {\"classpath:applicationContext.xml\"})\n@TransactionConfiguration()\n@Transactional\npublic class SimpleIntegrationTest {\n\n    @Resource\n    private DummyDAO dummyDAO;\n\n    /**\n     * Tries to store {@link com.example.server.entity.DummyEntity}.\n     */\n    @Test\n    public void testPersistTestEntity() {\n        int countBefore = dummyDAO.findAll().size();\n        DummyEntity dummyEntity = new DummyEntity();\n        dummyDAO.makePersistent(dummyEntity);\n\n        //HERE SHOULD COME SESSION.FLUSH()\n\n        int countAfter = dummyDAO.findAll().size();\n\n        assertEquals(countBefore + 1, countAfter);\n    }\n}\n</code></pre>\n\n<p>As you can see between storing and reading data, the session should be flushed because the default <code>FushMode</code> is <code>AUTO</code> thus no data can be actually stored in DB.</p>\n\n<p><strong>Question:</strong> Can I some how set <code>FlushMode</code> to <code>ALWAYS</code> in session factory or somewhere else to avoid repeating <code>session.flush()</code> call?</p>\n\n<p>All DB calls in DAO goes with <code>HibernateTemplate</code> instance.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring","hadoop"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13063238,"title":"Spring Hadoop | Job not appearing on Job Tracker GUI","body":"<p>I am using Spring for Apache Hadoop 1.0.0.M2 for my application. The application is packaged as a binary distribution using maven assembly plugin and run over the cluster using:\njava -jar mlprocessor.jar</p>\n\n<p>The manifest file in the jar includes reference to the Main class which loads the spring context file. The job executes fine and I see the results as well. However, there is no trace of this job on the Job Tracker GUI.</p>\n\n<p>The logs show the following warning though: WARN [org.apache.hadoop.util.NativeCodeLoader] - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</p>\n\n<p>I wanted to check whether anyone is aware of this issue, or there is something that I am missing.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","dependency-injection","autowired"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13136433,"title":"Autowire class from different Maven module?","body":"<p>I have a maven project with the following structure:</p>\n\n<pre><code>spring-di-test\n +--spring-di-test-core\n |     com.example.core.DITestMain\n +--spring-di-test-store\n       com.example.store.DITest\n       com.example.store.RandomStringService\n</code></pre>\n\n<p>where spring-di-test is the root project and the two below are modules.</p>\n\n<p>My classes look like this:</p>\n\n<p><em>DITestMain located in spring-di-test-core</em></p>\n\n<pre><code>public class DITestMain {\n    public static void main(String[] args) {\n        new DITest().run();\n    }\n}\n</code></pre>\n\n<p><em>applicationContext.xml located in spring-di-test-core's resources folder</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n                           http://www.springframework.org/schema/context \n                           http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n    &lt;context:spring-configured/&gt;\n    &lt;context:component-scan base-package=\"com.example.*\" annotation-config=\"true\"/&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p><em>DITest located in spring-di-test-store</em></p>\n\n<pre><code>@Configurable(preConstruction = true)\n@Controller\npublic class DITest {   \n    @Autowired(required=true)\n    private RandomStringService randomStringService;\n\n    public void run() {\n        System.out.println(randomStringService.getRandomString());\n    }\n}\n</code></pre>\n\n<p><em>RandomStringService located in spring-di-test-store</em></p>\n\n<pre><code>@Service(\"randomStringService\")\npublic class RandomStringService {\n\n    private final Random random;\n\n    public RandomStringService() {\n        random = new Random();\n    }\n\n    public String getRandomString() {\n        StringBuilder sb = new StringBuilder();\n        int length = random.nextInt(20);\n        for (int i = 0; i &lt; length + 1; i++) {\n            sb.append(new Character((char) ('a' + random.nextInt(20))));\n        }\n        return sb.toString();\n    }\n}\n</code></pre>\n\n<p><em>applicationContext.xml located in spring-di-test-store</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n                           http://www.springframework.org/schema/context \n                           http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n    &lt;context:spring-configured/&gt;\n    &lt;context:component-scan base-package=\"com.example.*\" annotation-config=\"true\"/&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>When I run DITestMain, I get a NullPointerException for randomStringService. What went wrong?</p>\n"},{"tags":["java","spring","spring-mvc","log4j"],"answer_count":8,"favorite_count":7,"up_vote_count":19,"down_vote_count":0,"view_count":52113,"score":19,"question_id":1266139,"title":"log4j:WARN No appenders could be found for logger in web.xml","body":"<p>I already put the log4jConfigLocation in web.xml, but still, i get warning </p>\n\n<p>log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).\nlog4j:WARN Please initialize the log4j system properly. what did i missed out?</p>\n\n<p></p>\n\n<pre><code>    &lt;context-param&gt;\n    \t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    \t&lt;param-value&gt;\n\n    \t\t\t/WEB-INF/applicationContext.xml\n\n    \t&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n &lt;context-param&gt;\n    &lt;param-name&gt;log4jConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/classes/log4j.properties&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n\n\n  &lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n\n  &lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n\n\n\n\n    &lt;servlet&gt;\n    \t&lt;servlet-name&gt;suara2&lt;/servlet-name&gt;\n    \t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n    \t&lt;servlet-name&gt;suara2&lt;/servlet-name&gt;\n    \t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n</code></pre>\n"},{"tags":["spring","spring-batch","rerun"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13082394,"title":"How to re-run a Spring Batch job?","body":"<p>I have defined a Spring Batch job which runs once just fine. However it is unable to run a second time due to a duplicate entry in the primary key for the JOB_INSTANCE_ID;</p>\n\n<pre><code>SEVERE: Job Terminated in error: PreparedStatementCallback; SQL [INSERT into    BATCH_JOB_INSTANCE(JOB_INSTANCE_ID, JOB_NAME, JOB_KEY, VERSION) values (?, ?, ?, ?)]; Duplicate entry '0' for key 'PRIMARY'; nested exception is com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '0' for key 'PRIMARY'\n</code></pre>\n\n<p>I've read that this can be over-come by setting command line parameters on the job, e.g.</p>\n\n<pre><code>java -cp ${CLASSPATH} org.springframework.batch.core.launch.support.CommandLineJobRunner myJob.xml myJob date=20121025154016 -next\n</code></pre>\n\n<p>Whether I include the -next parameter or not, it will not run the job.</p>\n\n<p>My Spring Batch configuration looks as follows (batch/launchContext.xml);</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans\n    xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:batch=\"http://www.springframework.org/schema/batch\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:util=\"http://www.springframework.org/schema/util\"\n    xmlns:jdbc=\"http://springframework.org/schema/jdbc\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/jdbc     http://www.springframework.org/schema/jdbc/spring-jdbc.xsd\n    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd\n    http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch.xsd\nhttp://springframework.org/schema/jdbc http://springframework.org/schema/jdbc/spring-jdbc.xsd\n    http://www.springframework.org/schema/context \nhttp://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n    &lt;!-- Launch context: how to launch all of the jobs --&gt;\n    &lt;!-- Expects a data source configuration file to be used, with a DataSource bean \ncalled \"dataSource\" --&gt;\n\n    &lt;!-- The data source for the jobs status --&gt;\n    &lt;import resource=\"dataSource.xml\" /&gt;\n\n    &lt;bean\n            id=\"jobRepository\"                        \nclass=\"org.springframework.batch.core.repository.support.JobRepositoryFactoryBean\"&gt;\n            &lt;property\n                    name=\"dataSource\"\n                    ref=\"dataSource\" /&gt;\n            &lt;property\n                    name=\"databaseType\"\n                    value=\"MySQL\" /&gt;\n            &lt;property\n                    name=\"transactionManager\"\n                    ref=\"transactionManager\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean\n            id=\"incrementer\"\n            class=\"org.springframework.batch.core.launch.support.RunIdIncrementer\" /&gt;\n\n    &lt;bean\n            id=\"jobLauncher\"\n            class=\"org.springframework.batch.core.launch.support.SimpleJobLauncher\"&gt;\n            &lt;property\n                    name=\"jobRepository\"\n                    ref=\"jobRepository\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean\n            id=\"transactionManager\"\n            class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n            &lt;property\n                    name=\"dataSource\"\n                    ref=\"dataSource\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean\n            id=\"jobExplorer\"       \nclass=\"org.springframework.batch.core.explore.support.JobExplorerFactoryBean\"&gt;\n            &lt;property\n                    name=\"dataSource\"\n                    ref=\"dataSource\" /&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>And the job is like this (in the myJob.xml file)</p>\n\n<pre><code>....\n&lt;import resource=\"batch/launchContext.xml\" /&gt;\n...\n    &lt;batch:job\n            id=\"myJob\"\n            job-repository=\"jobRepository\"\n            incrementer=\"incrementer\"&gt;\n            &lt;batch:step id=\"step1\"&gt;\n                    &lt;batch:tasklet transaction-manager=\"transactionManager\"&gt;\n                            &lt;batch:chunk\n                                    reader=\"myReader\"\n                                    processor=\"myProcessor\"\n                                    writer=\"myWriter\"\n                                    commit-interval=\"10\" /&gt;\n                    &lt;/batch:tasklet&gt;\n            &lt;/batch:step&gt;\n    &lt;/batch:job&gt;\n</code></pre>\n\n<p>Ideally what I'd like is each run of the job to be persisted with the run date/time. Is there a way to configure the launcher to do this automatically?</p>\n\n<p>Thanks,</p>\n\n<p>John </p>\n"},{"tags":["java","spring","cxf"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13134636,"title":"How to manage a sequence in java without a DB?","body":"<p>The scenario is as follows:</p>\n\n<p>I'm using Apache CXF to expose web services to a client.\nAfter receiving a request and processing it, I need to add a sequence number to the processed message header, and the I forward it to another program via MQ.\nAlso I use Spring to handle bean management and injection.</p>\n\n<p>What's the best way to manage a sequence without using a DB (since installing a DB just for sequence management seems to have an enormous overhead and bloat).\nIf the solution is to use a file (a properties file?), how can I opt for consistency if any exception occurs?\nAlso I need the sequence to be consistent when multiple requests arrive simultaneously.</p>\n"},{"tags":["spring","tomcat","spring-security","kerberos","spnego"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":185,"score":1,"question_id":12517134,"title":"BadCredentialsException: Kerberos validation not succesfull","body":"<p>I would like to perform authentification with SPNEGO. I use:</p>\n\n<ul>\n<li>spring-core-3.1.0.RELEASE.jar </li>\n<li>spring-security-core-3.1.0.RELEASE.jar</li>\n<li>spring-security-kerberos-core-1.0.0.M2.jar </li>\n<li>package codec from spring\ncore security 3.0.7 (https://jira.springsource.org/browse/SES-98)</li>\n<li>tomcat</li>\n</ul>\n\n<p>My Config file looks like the following. When I try to authentificate  with the above libraries I got the following exception. </p>\n\n<p>Had someone the same problem and handled it?</p>\n\n<p>Config file (taken from spring security kerberos example):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:sec=\"http://www.springframework.org/schema/security\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd\"&gt;\n\n    &lt;!-- This configuration uses SPNEGO by default, but one could also use a form if he directly goes to /login.html --&gt;\n    &lt;sec:http entry-point-ref=\"spnegoEntryPoint\" use-expressions=\"true\"&gt;\n        &lt;sec:intercept-url pattern=\"/secure/**\" access=\"isAuthenticated()\" /&gt;\n        &lt;sec:custom-filter ref=\"spnegoAuthenticationProcessingFilter\"\n            position=\"BASIC_AUTH_FILTER\" /&gt;\n        &lt;sec:form-login login-page=\"/login.html\" default-target-url=\"/secure/index.jsp\"/&gt;\n    &lt;/sec:http&gt;\n\n    &lt;bean id=\"spnegoEntryPoint\"\n        class=\"org.springframework.security.extensions.kerberos.web.SpnegoEntryPoint\" /&gt;\n\n    &lt;bean id=\"spnegoAuthenticationProcessingFilter\"\n        class=\"org.springframework.security.extensions.kerberos.web.SpnegoAuthenticationProcessingFilter\"&gt;\n        &lt;property name=\"authenticationManager\" ref=\"authenticationManager\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;sec:authentication-manager alias=\"authenticationManager\"&gt;\n        &lt;sec:authentication-provider ref=\"kerberosServiceAuthenticationProvider\" /&gt; &lt;!-- Used with SPNEGO --&gt;\n        &lt;sec:authentication-provider user-service-ref=\"dummyUserDetailsService\"/&gt; &lt;!-- Used with form login --&gt;\n    &lt;/sec:authentication-manager&gt;\n\n\n\n    &lt;bean id=\"kerberosServiceAuthenticationProvider\"\n        class=\"org.springframework.security.extensions.kerberos.KerberosServiceAuthenticationProvider\"&gt;\n        &lt;property name=\"ticketValidator\"&gt;\n            &lt;bean\n                class=\"org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator\"&gt;\n                &lt;property name=\"servicePrincipal\" value=\"HTTP/xxx.xx.xx.xx@XX-XXX.XXX.XX\" /&gt;\n                &lt;!-- Setting keyTabLocation to a classpath resource will most likely not work in a Java EE application Server --&gt;\n                &lt;!-- See the Javadoc for more information on that --&gt;\n                &lt;property name=\"keyTabLocation\" value=\"file:/home/xxxxx/conf/krb5/krb5.keytab\" /&gt;\n                &lt;property name=\"debug\" value=\"true\" /&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n        &lt;property name=\"userDetailsService\" ref=\"dummyUserDetailsService\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- This bean definition enables a very detailed Kerberos logging --&gt;\n    &lt;bean\n        class=\"org.springframework.security.extensions.kerberos.GlobalSunJaasKerberosConfig\"&gt;\n        &lt;property name=\"debug\" value=\"true\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!--\n        Just returns the User authenticated by Kerberos and gives him the\n        ROLE_USER\n    --&gt;\n\n    &lt;bean id=\"dummyUserDetailsService\"\n        class=\"org.springframework.security.extensions.kerberos.sample.DummyUserDetailsService\" /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>Exception which I got:</p>\n\n<pre><code>org.springframework.security.authentication.BadCredentialsException: Kerberos validation not succesfull\n        at org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator.validateTicket(SunJaasKerberosTicketValidator.java:69)\n        at org.springframework.security.extensions.kerberos.KerberosServiceAuthenticationProvider.authenticate(KerberosServiceAuthenticationProvider.java:86)\n        at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)\n        at org.springframework.security.extensions.kerberos.web.SpnegoAuthenticationProcessingFilter.doFilter(SpnegoAuthenticationProcessingFilter.java:131)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n        at org.apache.catalina.ha.session.JvmRouteBinderValve.invoke(JvmRouteBinderValve.java:219)\n        at org.apache.catalina.ha.tcp.ReplicationValve.invoke(ReplicationValve.java:333)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)\n        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n        at java.lang.Thread.run(Thread.java:722)\nCaused by: java.security.PrivilegedActionException: GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate\ntype to decrypt AP REP - RC4 with HMAC)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:415)\n        at org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator.validateTicket(SunJaasKerberosTicketValidator.java:67)\n        ... 29 more\nCaused by: GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - RC4 with HMAC)\n        at sun.security.jgss.krb5.Krb5Context.acceptSecContext(Krb5Context.java:778)\n        at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:342)\n        at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:285)\n        at sun.security.jgss.spnego.SpNegoContext.GSS_acceptSecContext(SpNegoContext.java:871)\n        at sun.security.jgss.spnego.SpNegoContext.acceptSecContext(SpNegoContext.java:544)\n        at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:342)\n        at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:285)\n        at org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:146)\n        at org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:136)\n        ... 32 more\nCaused by: KrbException: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - RC4 with HMAC\n        at sun.security.krb5.KrbApReq.authenticate(KrbApReq.java:273)\n        at sun.security.krb5.KrbApReq.&lt;init&gt;(KrbApReq.java:144)\n        at sun.security.jgss.krb5.InitSecContextToken.&lt;init&gt;(InitSecContextToken.java:108)\n        at sun.security.jgss.krb5.Krb5Context.acceptSecContext(Krb5Context.java:761)\n        ... 40 more\n</code></pre>\n"},{"tags":["spring","inheritance","jaxb","unmarshalling","resttemplate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":11126949,"title":"Spring JAXB2Marshaller not handling inheritance properly","body":"<p>I have a spring MVC web application which consumes backend REST services. </p>\n\n<p>The JAXB XML classes look like this</p>\n\n<pre><code>@XmlSeeAlso({Child1.class, Child2.class})\nabstract class Base {\n   String attr1;\n}\n\nclass Child1 {\n   String attrChild1;\n}\n\nclass Child2 {\n   String attrChild2; \n}\n\n@XmlRootElement\nclass MyList {\n\n   @XmlElement (name=\"list\")\n   List&lt;Base&gt; lists;\n}\n</code></pre>\n\n<p>The generated XML looks like this</p>\n\n<pre><code>&lt;list xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:type=\"child1\"&gt;\n  &lt;attr1&gt;...&lt;/attr1&gt;\n  &lt;attrChild1&gt;...&lt;/attrChild1&gt;\n&lt;/list&gt;\n&lt;list xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:type=\"child2\"&gt;\n  &lt;attr1&gt;...&lt;/attr1&gt;\n  &lt;attrChild2&gt;...&lt;/attrChild2&gt;\n&lt;/list&gt;\n</code></pre>\n\n<p>In my Spring MVC app, I have this config</p>\n\n<pre><code>&lt;bean id=\"restTemplate\" class=\"org.springframework.web.client.RestTemplate\"&gt;\n&lt;property name=\"messageConverters\"&gt; \n    &lt;list&gt; \n        &lt;bean class=\"org.springframework.http.converter.xml.MarshallingHttpMessageConverter\"&gt; \n            &lt;property name=\"marshaller\" ref=\"jaxbMarshaller\"/&gt; \n            &lt;property name=\"unmarshaller\" ref=\"jaxbMarshaller\"/&gt; \n        &lt;/bean&gt; \n        &lt;bean class=\"org.springframework.http.converter.FormHttpMessageConverter\"/&gt; \n    &lt;/list&gt; \n&lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"jaxbMarshaller\" class=\"org.springframework.oxm.jaxb.Jaxb2Marshaller\"&gt; \n&lt;property name=\"classesToBeBound\"&gt; \n    &lt;list&gt; \n         ... classes to be bounded\n    &lt;/list&gt; \n&lt;/property&gt; \n&lt;/bean&gt; \n</code></pre>\n\n<p>If I use restTemplate.getForObject() to receive it, I got this error</p>\n\n<p>JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException: Unable to create an instance of Base.</p>\n\n<p>However, if I receive it as a string and manually unmarshall it, I have no error. </p>\n\n<p>Any clue? Thanks much.</p>\n"},{"tags":["java","spring","dependency-injection","inversion-of-control"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13124595,"title":"Spring Autowired Class","body":"<p>When we annotate a class as <code>@Autowired</code>, does it HAVE to be a interface or can it be a class? </p>\n\n<p>All the examples of using Spring I have seen, use an interface and then implement it on a class. The interface type is then used to call a function on the Concrete class. Can we not just simply add <code>@Autowired</code> to a concrete class rather than an interface. </p>\n\n<p>I know of the Programme to a interface analogy in JAVA, but if u are not depending on Polymorphism, then why to write an interface? </p>\n"},{"tags":["spring","hibernate","jax-rs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13111048,"title":"JAX-RS with Spring and Hibernate","body":"<p>I am new to using Spring and Hibernate with JAX-RS. I have managed to Configure Spring with JAX-RS together, and now i want to configure Hibernate in this. Can anyone show me a good tutorial to using Spring JAX-RS and Hibernate ?</p>\n\n<p>Kind Regards.</p>\n"},{"tags":["spring","repository","spring-data","spring-data-jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13129894,"title":"Can I choose the name of my jpa repository?","body":"<p>I have to name my interface that extends the CrudRepository\nwith a spacific name (I use spring and Jpa)\ni.e.</p>\n\n<pre><code>public interface UserRepository extends CrudRepository&lt;User, Long&gt; {}\n</code></pre>\n\n<p>so in this case I have a Entity with name UserRepository </p>\n\n<p>I tried annotation</p>\n\n<pre><code>@Entity(name=\"UserCustomRepository\")\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt; {}\n</code></pre>\n\n<p>but it doesn't work...</p>\n"},{"tags":["java","spring","jsp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":46,"score":-6,"question_id":13133239,"title":"need to find a way to improve my java skills","body":"<p>Hi I need to measure my java skills, find an assignment to do, or if its possible provide me of a list of complex java applications that have done, so I can redo them</p>\n"},{"tags":["mysql","spring","swing","hibernate","password-encryption"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":13131304,"title":"Working with password in Hibernate (for standalone applications)","body":"<p>I'm looking for best practices around how to deal with password fields in my Java standalone application (Netbeans+Spring+Hibernate+MySQL database+Swing).</p>\n\n<p>1) I've created a table with a password column.... so, which data type must be this column?\n2) Which kind of algorythms for SALTing passwords do you recomend to follow and implement on my app?\n3) Do you recommend saving password as a plain-text or after being transformed according with the algorythm?\n4) Sample codes of all this process</p>\n\n<p>I hope we can help many other developers who must deal with Spring for standalone apps and around the tasks with Hibernate on this kind of questions.</p>\n\n<p>Thanks in advance for any suggestions.</p>\n"},{"tags":["spring","spring-security","authorization","roles","taglib"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13132922,"title":"Spring Security taglib sec:authorize with role hierarchy not working","body":"<p>I can't get sec:authorize hasRole() to work with the role hierarchy. If I have a user with role ROLE_BOSS which is the parent of ROLE_WORKER, then  is false for some reason. In my service classes @PreAuthorize(\"hasRole('ROLE_WORKER')\") does work however. I assumed they both used the same evaluator, so why doesn't the taglib work? Thanks for the help.</p>\n\n<p>JSP:</p>\n\n<pre><code>&lt;sec:authorize access=\"hasRole('ROLE_BOSS')\"&gt;\n  &lt;p&gt;This shows up.&lt;/p&gt;\n&lt;/sec:authorize&gt;\n&lt;sec:authorize access=\"hasRole('ROLE_WORKER')\"&gt;\n  &lt;p&gt;This does not show up, but should.&lt;/p&gt;\n&lt;/sec:authorize&gt;\n</code></pre>\n\n<p>-config.xml security:</p>\n\n<pre><code>&lt;bean id=\"expressionHandler\" class=\"org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler\"&gt;\n  &lt;property name=\"permissionEvaluator\" ref=\"permissionEvaluator\"/&gt;\n  &lt;property name=\"roleHierarchy\" ref=\"roleHierarchy\"/&gt;\n&lt;/bean&gt;\n\n&lt;sec:global-method-security pre-post-annotations=\"enabled\"&gt;\n  &lt;sec:expression-handler ref=\"expressionHandler\"/&gt;\n&lt;/sec:global-method-security&gt;\n\n&lt;bean id=\"permissionEvaluator\" class=\"com.myapp.security.MyPermissionEvaluator\"&gt;\n  &lt;constructor-arg index=\"0\"&gt;\n    &lt;map key-type=\"java.lang.String\" value-type=\"com.myapp.security.Permission\"&gt;\n      &lt;entry key=\"contractReadAccess\" value-ref=\"contractReadPermission\"/&gt;\n      &lt;entry key=\"contractWriteAccess\" value-ref=\"contractWritePermission\"/&gt;\n    &lt;/map&gt;\n  &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"contractReadPermission\" class=\"com.myapp.security.ContractReadPermission\"/&gt;\n&lt;bean id=\"contractWritePermission\" class=\"com.myapp.security.ContractWritePermission\"/&gt;\n\n&lt;sec:http use-expressions=\"true\" access-decision-manager-ref=\"accessDecisionManager\"&gt;\n  &lt;sec:intercept-url pattern=\"/worker/**\" access=\"isAuthenticated()\" requires-channel=\"https\"/&gt;\n  &lt;sec:intercept-url pattern=\"/boss/**\" access=\"hasRole('ROLE_BOSS')\" requires-channel=\"https\"/&gt;\n\n  &lt;sec:form-login login-page=\"/login\" authentication-failure-url=\"/login?login_error=1\" authentication-success-handler-ref=\"successHandler\"/&gt;\n  &lt;sec:logout logout-url=\"/logout\" logout-success-url=\"/login\" invalidate-session=\"true\"/&gt;\n&lt;sec:remember-me/&gt;\n&lt;/sec:http&gt;\n\n&lt;bean id=\"accessDecisionManager\" class=\"org.springframework.security.access.vote.AffirmativeBased\"&gt;\n  &lt;constructor-arg&gt;\n    &lt;list&gt;\n      &lt;ref bean=\"roleVoter\" /&gt;\n      &lt;bean class=\"org.springframework.security.web.access.expression.WebExpressionVoter\"&gt;\n        &lt;property name=\"expressionHandler\"&gt;\n          &lt;bean class=\"org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler\"&gt;\n            &lt;property name=\"roleHierarchy\" ref=\"roleHierarchy\"/&gt;\n          &lt;/bean&gt;\n        &lt;/property&gt;\n      &lt;/bean&gt;\n      &lt;bean class=\"org.springframework.security.access.vote.AuthenticatedVoter\"/&gt;\n    &lt;/list&gt;\n  &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"roleVoter\" class=\"org.springframework.security.access.vote.RoleHierarchyVoter\"&gt;\n  &lt;constructor-arg ref=\"roleHierarchy\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"roleHierarchy\" class=\"org.springframework.security.access.hierarchicalroles.RoleHierarchyImpl\"&gt;\n  &lt;property name=\"hierarchy\"&gt;\n    &lt;value&gt;\n      ROLE_BOSS &gt; ROLE_WORKER\n    &lt;/value&gt;\n  &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;sec:authentication-manager alias=\"authenticationManager\"&gt;\n  &lt;sec:authentication-provider user-service-ref=\"myUserDetailsService\"/&gt;\n&lt;/sec:authentication-manager&gt;\n</code></pre>\n"},{"tags":["spring","spring-mvc","maven-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13132551,"title":"Error while building Spring MVC application","body":"<p>I am new at Spring framework. I have Spring Tool Suite Version 3.1.0 installed with JDK 1.7 on my system.\nRecently I imported into my IDE a pre-built Spring MVC project already working on another system. But when I am trying to build it, it is giving the following error :-</p>\n\n<p><code>Errors occurred during the build.\nErrors running builder 'Maven Project Builder' on project 'vdm'.\nCould not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5\nPlugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5\nCould not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5\nPlugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5</code></p>\n\n<p>Moreover, when I check Maven's Lifecycycle Mapping, it shows :-</p>\n\n<p><img src=\"http://i.stack.imgur.com/1kEb7.png\" alt=\"enter image description here\"></p>\n\n<p>My Environment configuration is as :-</p>\n\n<p><img src=\"http://i.stack.imgur.com/PfYhv.png\" alt=\"enter image description here\"></p>\n\n<p>My pom.xml is :- </p>\n\n<pre><code>  &lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt; \n- &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; \n  &lt;groupId&gt;com.engineersindia&lt;/groupId&gt; \n  &lt;artifactId&gt;vdsc&lt;/artifactId&gt; \n  &lt;name&gt;abc&lt;/name&gt; \n  &lt;packaging&gt;war&lt;/packaging&gt; \n  &lt;version&gt;1.0.0-BUILD-SNAPSHOT&lt;/version&gt; \n- &lt;properties&gt;\n  &lt;java-version&gt;1.6&lt;/java-version&gt; \n  &lt;org.springframework-version&gt;3.0.6.RELEASE&lt;/org.springframework-version&gt; \n  &lt;org.aspectj-version&gt;1.6.9&lt;/org.aspectj-version&gt; \n  &lt;org.slf4j-version&gt;1.5.10&lt;/org.slf4j-version&gt; \n  &lt;/properties&gt;\n- &lt;dependencies&gt;\n- &lt;!--  Spring \n  --&gt; \n- &lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt; \n  &lt;artifactId&gt;spring-context&lt;/artifactId&gt; \n  &lt;version&gt;${org.springframework-version}&lt;/version&gt; \n- &lt;exclusions&gt;\n- &lt;!--  Exclude Commons Logging in favor of SLF4j \n  --&gt; \n- &lt;exclusion&gt;\n  &lt;groupId&gt;commons-logging&lt;/groupId&gt; \n  &lt;artifactId&gt;commons-logging&lt;/artifactId&gt; \n  &lt;/exclusion&gt;\n  &lt;/exclusions&gt;\n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt; \n  &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; \n  &lt;version&gt;${org.springframework-version}&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;!--  AspectJ \n  --&gt; \n- &lt;dependency&gt;\n  &lt;groupId&gt;org.aspectj&lt;/groupId&gt; \n  &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt; \n  &lt;version&gt;${org.aspectj-version}&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;!--  Logging \n  --&gt; \n- &lt;dependency&gt;\n  &lt;groupId&gt;org.slf4j&lt;/groupId&gt; \n  &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; \n  &lt;version&gt;${org.slf4j-version}&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;org.slf4j&lt;/groupId&gt; \n  &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt; \n  &lt;version&gt;${org.slf4j-version}&lt;/version&gt; \n  &lt;scope&gt;runtime&lt;/scope&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;org.slf4j&lt;/groupId&gt; \n  &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; \n  &lt;version&gt;${org.slf4j-version}&lt;/version&gt; \n  &lt;scope&gt;runtime&lt;/scope&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;log4j&lt;/groupId&gt; \n  &lt;artifactId&gt;log4j&lt;/artifactId&gt; \n  &lt;version&gt;1.2.15&lt;/version&gt; \n- &lt;exclusions&gt;\n- &lt;exclusion&gt;\n  &lt;groupId&gt;javax.mail&lt;/groupId&gt; \n  &lt;artifactId&gt;mail&lt;/artifactId&gt; \n  &lt;/exclusion&gt;\n- &lt;exclusion&gt;\n  &lt;groupId&gt;javax.jms&lt;/groupId&gt; \n  &lt;artifactId&gt;jms&lt;/artifactId&gt; \n  &lt;/exclusion&gt;\n- &lt;exclusion&gt;\n  &lt;groupId&gt;com.sun.jdmk&lt;/groupId&gt; \n  &lt;artifactId&gt;jmxtools&lt;/artifactId&gt; \n  &lt;/exclusion&gt;\n- &lt;exclusion&gt;\n  &lt;groupId&gt;com.sun.jmx&lt;/groupId&gt; \n  &lt;artifactId&gt;jmxri&lt;/artifactId&gt; \n  &lt;/exclusion&gt;\n  &lt;/exclusions&gt;\n  &lt;scope&gt;runtime&lt;/scope&gt; \n  &lt;/dependency&gt;\n- &lt;!--  @Inject \n  --&gt; \n- &lt;dependency&gt;\n  &lt;groupId&gt;javax.inject&lt;/groupId&gt; \n  &lt;artifactId&gt;javax.inject&lt;/artifactId&gt; \n  &lt;version&gt;1&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;!--  Servlet \n  --&gt; \n- &lt;dependency&gt;\n  &lt;groupId&gt;javax.servlet&lt;/groupId&gt; \n  &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; \n  &lt;version&gt;2.5&lt;/version&gt; \n  &lt;scope&gt;provided&lt;/scope&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; \n  &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; \n  &lt;version&gt;2.1&lt;/version&gt; \n  &lt;scope&gt;provided&lt;/scope&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;javax.servlet&lt;/groupId&gt; \n  &lt;artifactId&gt;jstl&lt;/artifactId&gt; \n  &lt;version&gt;1.2&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;!--  Test \n  --&gt; \n- &lt;dependency&gt;\n  &lt;groupId&gt;junit&lt;/groupId&gt; \n  &lt;artifactId&gt;junit&lt;/artifactId&gt; \n  &lt;version&gt;4.7&lt;/version&gt; \n  &lt;scope&gt;test&lt;/scope&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.ldap&lt;/groupId&gt; \n  &lt;artifactId&gt;spring-ldap-core&lt;/artifactId&gt; \n  &lt;version&gt;1.3.1.RELEASE&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.security&lt;/groupId&gt; \n  &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt; \n  &lt;version&gt;3.1.0.M2&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.security&lt;/groupId&gt; \n  &lt;artifactId&gt;spring-security-ldap&lt;/artifactId&gt; \n  &lt;version&gt;3.1.0.M2&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;commons-dbcp&lt;/groupId&gt; \n  &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt; \n  &lt;version&gt;1.4&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;displaytag&lt;/groupId&gt; \n  &lt;artifactId&gt;displaytag&lt;/artifactId&gt; \n  &lt;version&gt;1.2&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt; \n  &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt; \n  &lt;version&gt;1.5.3&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;org.hibernate&lt;/groupId&gt; \n  &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt; \n  &lt;version&gt;4.1.0.Final&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;cglib&lt;/groupId&gt; \n  &lt;artifactId&gt;cglib&lt;/artifactId&gt; \n  &lt;version&gt;2.2&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt; \n  &lt;artifactId&gt;jasperreports-fonts&lt;/artifactId&gt; \n  &lt;version&gt;4.7.0&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;commons-digester&lt;/groupId&gt; \n  &lt;artifactId&gt;commons-digester&lt;/artifactId&gt; \n  &lt;version&gt;2.1&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt; \n  &lt;artifactId&gt;groovy&lt;/artifactId&gt; \n  &lt;version&gt;1.7.11&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt; \n  &lt;artifactId&gt;jasperreports&lt;/artifactId&gt; \n  &lt;version&gt;4.7.0&lt;/version&gt; \n  &lt;/dependency&gt;\n- &lt;dependency&gt;\n  &lt;groupId&gt;com.lowagie&lt;/groupId&gt; \n  &lt;artifactId&gt;itext&lt;/artifactId&gt; \n  &lt;version&gt;2.1.7&lt;/version&gt; \n  &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n- &lt;build&gt;\n- &lt;plugins&gt;\n- &lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; \n  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; \n- &lt;configuration&gt;\n  &lt;source&gt;${java-version}&lt;/source&gt; \n  &lt;target&gt;${java-version}&lt;/target&gt; \n  &lt;/configuration&gt;\n  &lt;/plugin&gt;\n- &lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; \n  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt; \n- &lt;configuration&gt;\n  &lt;warName&gt;abc&lt;/warName&gt; \n  &lt;/configuration&gt;\n  &lt;/plugin&gt;\n- &lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; \n  &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt; \n- &lt;executions&gt;\n- &lt;execution&gt;\n  &lt;id&gt;install&lt;/id&gt; \n  &lt;phase&gt;install&lt;/phase&gt; \n- &lt;goals&gt;\n  &lt;goal&gt;sources&lt;/goal&gt; \n  &lt;/goals&gt;\n  &lt;/execution&gt;\n  &lt;/executions&gt;\n  &lt;/plugin&gt;\n- &lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; \n  &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt; \n  &lt;version&gt;2.5&lt;/version&gt; \n- &lt;configuration&gt;\n  &lt;encoding&gt;UTF-8&lt;/encoding&gt; \n  &lt;/configuration&gt;\n  &lt;/plugin&gt;\n  &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;/project&gt;\n</code></pre>\n\n<p>Even when I am importing the project as a Maven Project, after retrieving listings, it giving the following errors :-</p>\n\n<p><img src=\"http://i.stack.imgur.com/HsESo.png\" alt=\"enter image description here\"></p>\n"},{"tags":["spring","ejb","jboss7.x"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":164,"score":4,"question_id":12903624,"title":"Spring <jee:remote-slsb> and JBoss AS7 - No EJB receiver available for handling","body":"<p>I have got @Remote EJB on JBoss AS 7, available by name <code>java:global/RandomEjb/DefaultRemoteRandom!pl.lechglowiak.ejbTest.RemoteRandom</code>.</p>\n\n<p>Standalone client is Spring application that uses <code>&lt;jee:remote-slsb&gt;</code> bean.\nWhen trying to use that bean I get <code>java.lang.IllegalStateException: EJBCLIENT000025: No EJB receiver available for handling [appName:, moduleName:RandomEjb, distinctName:] combination for invocation context org.jboss.ejb.client.EJBClientInvocationContext@1a89031</code>.</p>\n\n<p>Here is relevant part of applicationContext.xml:</p>\n\n<pre><code>&lt;jee:remote-slsb id=\"remoteRandom\"\n    jndi-name=\"RandomEjb/DefaultRemoteRandom!pl.lechglowiak.ejbTest.RemoteRandom\"\n    business-interface=\"pl.lechglowiak.ejbTest.RemoteRandom\"\n    &lt;jee:environment&gt;\n        java.naming.factory.initial=org.jboss.naming.remote.client.InitialContextFactory\n        java.naming.provider.url=remote://localhost:4447\n        jboss.naming.client.ejb.context=true\n        java.naming.security.principal=testuser\n        java.naming.security.credentials=testpassword\n    &lt;/jee:environment&gt;\n&lt;/jee:remote-slsb&gt;\n\n&lt;bean id=\"remoteClient\" class=\"pl.lechglowiak.RemoteClient\"&gt;\n    &lt;property name=\"remote\" ref=\"remoteRandom\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>RemoteClient.java\n    public class RemoteClient {</p>\n\n<pre><code>private RemoteRandom random;\n\npublic void setRemote(RemoteRandom random){\n    this.random = random;\n}\n\npublic Integer callRandom(){\n    try {\n        return random.getRandom(100);\n    } catch (Exception e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>My jboss client jar:\n    \n    org.jboss.as\n    jboss-as-ejb-client-bom\n    7.1.2.Final\n    pom\n    </p>\n\n<p>pl.lechglowiak.ejbTest.RemoteRandom is available for client application classpath.\njndi.properties contains exact properties as in <code>&lt;jee:environment&gt;</code> of <code>&lt;jee:remote-slsb&gt;</code>.</p>\n\n<p>Such code runs without exception:</p>\n\n<pre><code>Context ctx2 = new InitialContext();\nRemoteRandom rr = (RemoteRandom)  ctx2.lookup(\"RandomEjb/DefaultRemoteRandom!pl.lechglowiak.ejbTest.RemoteRandom\");\nSystem.out.println(rr.getRandom(10000));\n</code></pre>\n\n<p>But this:</p>\n\n<pre><code>ApplicationContext ctx = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\nRemoteClient client = ctx.getBean(\"remoteClient\", RemoteClient.class);\nSystem.out.println(client.callRandom());\n</code></pre>\n\n<p>ends with exception: java.lang.IllegalStateException: EJBCLIENT000025: No EJB receiver available for handling [appName:, moduleName:RandomEjb, distinctName:] combination for invocation context org.jboss.ejb.client.EJBClientInvocationContext@1a89031. </p>\n\n<p><code>jboss.naming.client.ejb.context=true</code> is set.\nDo you have any idea what am I setting wrong in <code>&lt;jee:remote-slsb&gt;</code>?</p>\n"},{"tags":["spring","sso","netsuite"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13132827,"title":"sso with netsuite integration in spring using cas","body":"<p>I want to implement Single signon between Spring application and Netsuite using cas. Seached many things on net but nothing was fruitful. kindly help me on this with some links or documents.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring","velocity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13127082,"title":"org.springframework.core.NestedIOException: Cannot find Velocity template for URL","body":"<p>Velocity Configuration with spring,I am missing some configuration. Please tell me why it is happening so.\nGetting the below error when I hit my url.</p>\n\n<pre><code>SEVERE: Servlet.service() for servlet springDispatcher threw exception\norg.springframework.core.NestedIOException: Cannot find Velocity template for URL [layout.vm]: Did you specify the correct resource loader path?; nested exception is org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'layout.vm'\nat org.springframework.web.servlet.view.velocity.VelocityLayoutView.checkResource(VelocityLayoutView.java:133)\nat org.springframework.web.servlet.view.UrlBasedViewResolver.loadView(UrlBasedViewResolver.java:438)\nat org.springframework.web.servlet.view.AbstractCachingViewResolver.createView(AbstractCachingViewResolver.java:186)\nat org.springframework.web.servlet.view.UrlBasedViewResolver.createView(UrlBasedViewResolver.java:401)\nat org.springframework.web.servlet.view.AbstractCachingViewResolver.resolveViewName(AbstractCachingViewResolver.java:103)\nat org.springframework.web.servlet.DispatcherServlet.resolveViewName(DispatcherServlet.java:1211)\nat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1160)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\nat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\nat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)\nat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)\n</code></pre>\n\n<p>spring-context.xml</p>\n\n<pre><code>&lt;bean id=\"velocityConfig\"\nclass=\"org.springframework.web.servlet.view.velocity.VelocityConfigurer\"&gt;\n&lt;property name=\"resourceLoaderPath\" value=\"/WEB-INF/velocity/\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- View resolvers can also be configured with ResourceBundles or XML files. \nIf you need different view resolving based on Locale, you have to use the \nresource bundle resolver. --&gt;\n&lt;bean id=\"viewResolver\"\nclass=\"org.springframework.web.servlet.view.velocity.VelocityLayoutViewResolver\"&gt;\n&lt;property name=\"cache\" value=\"true\" /&gt;\n&lt;property name=\"prefix\" value=\"\" /&gt;\n&lt;property name=\"suffix\" value=\".vm\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I'm getting the below exception when the velocityconfig is dropped.</p>\n\n<pre><code>org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [org.springframework.web.servlet.view.velocity.VelocityConfig] is defined: expected single bean but found 0\nat org.springframework.beans.factory.BeanFactoryUtils.beanOfTypeIncludingAncestors(BeanFactoryUtils.java:367)\nat org.springframework.web.servlet.view.velocity.VelocityView.autodetectVelocityEngine(VelocityView.java:239)\nat org.springframework.web.servlet.view.velocity.VelocityView.initApplicationContext(VelocityView.java:225)\nat org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)\nat org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)\nat org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)\nat org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)\nat org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)\nat org.springframework.beans.fact\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13130829,"title":"In Spring's RequestMapping, is {parameter:.+} any different than {parameter}","body":"<p>I'm looking at some Spring code that uses a RequestMapping like so:</p>\n\n<pre><code>@RequestMapping(\"/foo/{bar:.+}\")\n</code></pre>\n\n<p>Is this functionally any different than the following?</p>\n\n<pre><code>@RequestMapping(\"/foo/{bar}\")\n</code></pre>\n\n<p>From what I can tell the RegExp is always applied to the segment between slashes, so the two should be equivalent (although maybe .+ might say \"non-empty?).</p>\n\n<p>I suppose another way to phrase the question might be:</p>\n\n<p>Is Spring's <code>{bar}</code> equivalent to <code>{bar:.*}</code> or <code>{bar:.+}</code>?</p>\n"},{"tags":["java","spring","hibernate","unit-testing","transactions"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13131242,"title":"How to test transactional work performed on `POST_COMMIT_INSERT` callback","body":"<p>I'm having difficulty debugging and diagnosing an issue within my application.</p>\n\n<p>I have a JPA event listener wired in to perform work in a <code>POST_COMMIT_INSERT</code>.  The work that is performed is also transactional.</p>\n\n<p>I'm having difficulty writing a test that captures the work that occurred in the post-transactional transaction.</p>\n\n<p>My current test performs it's assertions in a <code>@PostTransaction</code> method.  However, although I see the data being persisted (using log statements), the postTransaction-transaction work isn't available to me.</p>\n\n<p>I suspect it's because in my <code>@PostTransaction</code> method, I'm still too early - and that there's another transaction in progress.</p>\n\n<p>Here's a sample that roughly demonstrates the scenario:</p>\n\n<blockquote>\n  <p>After a <code>Foo</code> has been created &amp; saved, create and save a <code>Bar</code>.</p>\n</blockquote>\n\n<pre><code>// Step 1.  The factory that responds to creation of the Foo, and build a bar.\n@Component\nclass BarFactory implements PostInsertEventListener\n{\n     // Note:  I've tried various versions of @Transactional on different points\n     // within this class, and none have worked.\n\n     @Autowired\n     private BarRepository repository;\n\n     @Override\n     public void onPostInsert(PostInsertEvent event) \n     {\n         if (event.getEntity() instanceof Foo)\n         {\n             createBar();\n         }\n     }\n     @Transactional\n     public createBar()\n     {\n         Bar bar = new Bar();\n         repository.save(bar);\n         log.info(\"Bar was created: \" + bar.getId());\n     }\n }\n\n // Step 2:  Register the BarFactory\n @Component\n class LifecycleListenerFactory {\n    // This is a spring bean, and the listeners are also spring beans\n    // so we have to use a somewhat long-winded approach to register them\n    // with the EntityManager\n    @Autowired\n    public LifecycleListenerFactory(EntityManager em, BarFactory barFactory)\n    {\n        SessionFactory sessionFactory = getSessionFactory(em);\n        EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(EventListenerRegistry.class);\n        EventListenerGroup&lt;PostInsertEventListener&gt; eventListenerGroup = registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT);\n        eventListenerGroup.appendListener(barFactory);\n    }\n\n\n   SessionFactory getSessionFactory(EntityManager entityManager) {\n       Session session = (Session) entityManager.getDelegate();\n       SessionFactory sessionFactory = session.getSessionFactory();\n       return sessionFactory;\n   }\n } \n\n\n// Step 3:  Test.\n@RunWith(SpringJUnit4ClassRunner.class)\n@Transactional\n@TransactionConfiguration(defaultRollback=false)\nclass MyTest {\n   @Autowired\n   private FooRepository fooRepo;\n   @Autowired\n   private BarRepository barRepo;\n\n   @Test\n   public void test()\n   {\n       fooRepo.save(new Foo());\n   }\n\n   @AfterTransaction\n   public void assert()\n   {\n       assertThat(barRepo.findAll().size(),equalTo(1));\n   }\n}\n</code></pre>\n\n<p>In this scenario, I see the following output:</p>\n\n<p><code>INFO:  Bar was created: 1</code></p>\n\n<p>But the test fails.</p>\n\n<p>Am I correct in my assumption that my <code>@AfterTransaction</code> is running after the wrong transaction, or is something else wrong here?</p>\n\n<p>If so, how do I test this?</p>\n\n<p>I've tried moving the <code>@Transaction</code> boundaries around in the <code>BarFactory</code>, but that hasn't had any effect.</p>\n"},{"tags":["spring","hibernate","maven","hbm2ddl","hibernate3-maven-plugin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13131432,"title":"What are the <hbm2ddl/> configuration options for the hibernate3-maven-plugin-3.0?","body":"<p>I can't seem to find any documentation on the configuration options for hbm2ddl. Here is what I have in my pom.xml:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;!-- Run \"mvn hibernate3:hbm2ddl\" to generate schema --&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate3-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.0&lt;/version&gt;\n\n    &lt;configuration&gt;\n        &lt;hibernatetool&gt;\n            &lt;annotationconfiguration\n                    propertyfile=\"src/main/resources/hibernate.cfg.xml\" /&gt;\n            &lt;hbm2ddl update=\"true\" create=\"true\" drop=\"true\" export=\"false\"\n                     outputfilename=\"shemaDiff.ddl\" format=\"true\"\n                     console=\"false\"/&gt;\n        &lt;/hibernatetool&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>If I run</p>\n\n<pre><code>mvn hibernate3:hbm2ddl\n</code></pre>\n\n<p>It builds successfully, but the database is empty when I check.</p>\n\n<p>The .script file looks like the following:</p>\n\n<pre><code>SET DATABASE UNIQUE NAME HSQLDB3AAEB9E84A\nSET DATABASE GC 0\nSET DATABASE DEFAULT RESULT MEMORY ROWS 0\nSET DATABASE EVENT LOG LEVEL 0\nSET DATABASE SQL NAMES FALSE\nSET DATABASE SQL REFERENCES FALSE\nSET DATABASE SQL SIZE TRUE\nSET DATABASE SQL TYPES FALSE\nSET DATABASE SQL TDC DELETE TRUE\nSET DATABASE SQL TDC UPDATE TRUE\nSET DATABASE SQL TRANSLATE TTI TYPES TRUE\nSET DATABASE SQL CONCAT NULLS TRUE\nSET DATABASE SQL NULLS FIRST TRUE\nSET DATABASE SQL UNIQUE NULLS TRUE\nSET DATABASE SQL CONVERT TRUNCATE TRUE\nSET DATABASE SQL AVG SCALE 0\nSET DATABASE SQL DOUBLE NAN TRUE\nSET DATABASE SQL LONGVAR IS LOB FALSE\nSET DATABASE TRANSACTION CONTROL LOCKS\nSET DATABASE DEFAULT ISOLATION LEVEL READ COMMITTED\nSET DATABASE TRANSACTION ROLLBACK ON CONFLICT TRUE\nSET DATABASE TEXT TABLE DEFAULTS ''\nSET FILES WRITE DELAY 500 MILLIS\nSET FILES BACKUP INCREMENT TRUE\nSET FILES CACHE SIZE 10000\nSET FILES CACHE ROWS 50000\nSET FILES SCALE 8\nSET FILES LOB SCALE 32\nSET FILES DEFRAG 0\nSET FILES NIO TRUE\nSET FILES NIO SIZE 256\nSET FILES LOG TRUE\nSET FILES LOG SIZE 50\nCREATE USER SA PASSWORD DIGEST 'd41d8cd98f00b204e9800998ecf8427e'\nALTER USER SA SET LOCAL TRUE\nCREATE SCHEMA PUBLIC AUTHORIZATION DBA\nALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 1\nSET DATABASE DEFAULT INITIAL SCHEMA PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.YES_OR_NO TO PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.TIME_STAMP TO PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.CARDINAL_NUMBER TO PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.CHARACTER_DATA TO PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.SQL_IDENTIFIER TO PUBLIC\nGRANT DBA TO SA\nSET SCHEMA SYSTEM_LOBS\nINSERT INTO BLOCKS VALUES(0,2147483647,0)\n</code></pre>\n\n<p>Interestingly, if I set console=\"true\", it prints the correct sql table setup:</p>\n\n<pre><code>create table ACCOUNT (\n    ACCOUNT_ID integer generated by default as identity (start with 1),\n    ...\n);\n\ncreate table ... etc.\n</code></pre>\n\n<p>If I downgrade to version 2.2, so the plugin looks like the following:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;!-- Run \"mvn hibernate3:hbm2ddl\" to generate schema --&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate3-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.2&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>and (without changing anything else) run mvn hibernate3:hbm2ddl, then the database tables are created properly from the annotated classes and the .script file reflects this:</p>\n\n<pre><code>SET DATABASE UNIQUE NAME HSQLDB3AAEB9E84A\nSET DATABASE GC 0\nSET DATABASE DEFAULT RESULT MEMORY ROWS 0\nSET DATABASE EVENT LOG LEVEL 0\nSET DATABASE SQL NAMES FALSE\nSET DATABASE SQL REFERENCES FALSE\nSET DATABASE SQL SIZE TRUE\nSET DATABASE SQL TYPES FALSE\nSET DATABASE SQL TDC DELETE TRUE\nSET DATABASE SQL TDC UPDATE TRUE\nSET DATABASE SQL TRANSLATE TTI TYPES TRUE\nSET DATABASE SQL CONCAT NULLS TRUE\nSET DATABASE SQL NULLS FIRST TRUE\nSET DATABASE SQL UNIQUE NULLS TRUE\nSET DATABASE SQL CONVERT TRUNCATE TRUE\nSET DATABASE SQL AVG SCALE 0\nSET DATABASE SQL DOUBLE NAN TRUE\nSET DATABASE SQL LONGVAR IS LOB FALSE\nSET DATABASE TRANSACTION CONTROL LOCKS\nSET DATABASE DEFAULT ISOLATION LEVEL READ COMMITTED\nSET DATABASE TRANSACTION ROLLBACK ON CONFLICT TRUE\nSET DATABASE TEXT TABLE DEFAULTS ''\nSET FILES WRITE DELAY 500 MILLIS\nSET FILES BACKUP INCREMENT TRUE\nSET FILES CACHE SIZE 10000\nSET FILES CACHE ROWS 50000\nSET FILES SCALE 8\nSET FILES LOB SCALE 32\nSET FILES DEFRAG 0\nSET FILES NIO TRUE\nSET FILES NIO SIZE 256\nSET FILES LOG TRUE\nSET FILES LOG SIZE 50\nCREATE USER SA PASSWORD DIGEST 'd41d8cd98f00b204e9800998ecf8427e'\nALTER USER SA SET LOCAL TRUE\nCREATE SCHEMA PUBLIC AUTHORIZATION DBA\nSET SCHEMA PUBLIC\nCREATE MEMORY TABLE PUBLIC.ACCOUNT(ACCOUNT_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY, ...)\nALTER TABLE PUBLIC.ACCOUNT ALTER COLUMN ACCOUNT_ID RESTART WITH 1\n...\nALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 1\nSET DATABASE DEFAULT INITIAL SCHEMA PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.YES_OR_NO TO PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.TIME_STAMP TO PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.CARDINAL_NUMBER TO PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.CHARACTER_DATA TO PUBLIC\nGRANT USAGE ON DOMAIN INFORMATION_SCHEMA.SQL_IDENTIFIER TO PUBLIC\nGRANT DBA TO SA\nSET SCHEMA SYSTEM_LOBS\nINSERT INTO BLOCKS VALUES(0,2147483647,0)\n</code></pre>\n\n<p>Does anyone know what the configurations of hbm2ddl need to be, in order to properly create the tables with hibernate3-maven-plugin-3.0?</p>\n"},{"tags":["spring","jms","websphere","activemq","spring-jms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13104571,"title":"FailoverTransport instantiated multiple times","body":"<p>I'm using spring-jms version 3.0.5 and activeMQ version 4.5.2. When deployed to Tomcat, everything seems to work properly. When deployed to WebSphere, it appears that four separate failover transports are being insantiated, and my MessageListener implementation receives the same message four times for every message that gets published to my topic.</p>\n\n<p>Here's my config:</p>\n\n<pre><code>&lt;bean id=\"activeMQConnectionFactory\"\n      class=\"org.apache.activemq.ActiveMQConnectionFactory\"&gt;\n       &lt;property name=\"brokerURL\" value=\"failover://(tcp://server.com:12345,tcp://server2.com:12345)?randomize=false/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"topic\" class=\"org.apache.activemq.command.ActiveMQTopic\"&gt;\n    &lt;constructor-arg value=\"TOPIC.ONE\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"jmsTemplate\" class=\"org.sprinframework.jms.core.JmsTemplate\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"connectionFactory\" /&gt;\n    &lt;property name=\"defaultDestination\" ref=\"topic\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean name=\"topicListener\" class=\"com.foo.TopicListener\" /&gt;\n\n&lt;jms:listener-container connection-factory=\"connectionFactory\" cache=\"auto\" destination-type=\"topic\"&gt;\n    &lt;jms:listener destination=\"topic\" ref=\"topicListener\" /&gt;\n&lt;/jms:listener-container&gt;\n</code></pre>\n\n<p>Here's my message listener:</p>\n\n<pre><code>import javax.jms.MessageListener;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class TopicListener implements MessageListener {\n\n    public void onMessage(Message msg) {\n        log(msg);\n    }\n\n}\n</code></pre>\n\n<p>And here's what I see in my logs (only on WebSphere)</p>\n\n<pre><code>11:59:59,764 () INFO (Thread-50) (DefaultLifecycleProcessor) Starting beans in phase 214783647\n12:00:00,140 () INFO (ActiveMQ Task) (FailoverTransport) Successfully connected to tcp://server.com:12345\n12:00:00,253 () INFO (ActiveMQ Task) (FailoverTransport) Successfully connected to tcp://server.com:12345\n12:00:00,342 () INFO (ActiveMQ Task) (FailoverTransport) Successfully connected to tcp://server.com:12345\n12:00:00,423 () INFO (ActiveMQ Task) (FailoverTransport) Successfully connected to tcp://server.com:12345\n12:00:00,492 () INFO (Thread-50) (ContextLoader) Root WebApplicationContext: initialization completed in 100239 ms\n</code></pre>\n\n<p>And then once I publish to the topic, I see:</p>\n\n<pre><code>12:01:00,250 () INFO (org.springframework.jms.listener.DefaultMessageListenerContainer#0-1) (TopicListener) logging message\n12:01:00,251 () INFO (org.springframework.jms.listener.DefaultMessageListenerContainer#3-1) (TopicListener) logging message\n12:01:00,251 () INFO (org.springframework.jms.listener.DefaultMessageListenerContainer#2-1) (TopicListener) logging message\n12:01:00,275 () INFO (org.springframework.jms.listener.DefaultMessageListenerContainer#1-1) (TopicListener) logging message\n</code></pre>\n\n<p>I've seen some indication that this sort of behavior might be expected if I'd set <code>concurrentConsumers &gt; 1</code>, but as far as I can tell, I haven't. How can I make sure I'm only receiving these messages once?</p>\n\n<p>UPDATE:</p>\n\n<p>With debug logging on, I also see:</p>\n\n<pre><code>2012-10-28 12:00:00,000 () DEBUG (Thread-50) (DefaultLifecycleProcessor) Starting bean 'org.springframework.jms.listener.DefaultMessageListenerContainer#0' of type [class org.springframework.jms.listener.DefaultMessageListenerContainer]\n2012-10-28 12:00:00,011 () DEBUG (Thread-50) (DefaultLifecycleProcessor) Starting bean 'org.springframework.jms.listener.DefaultMessageListenerContainer#1' of type [class org.springframework.jms.listener.DefaultMessageListenerContainer]\n2012-10-28 12:00:00,021 () DEBUG (Thread-50) (DefaultLifecycleProcessor) Starting bean 'org.springframework.jms.listener.DefaultMessageListenerContainer#2' of type [class org.springframework.jms.listener.DefaultMessageListenerContainer]\n2012-10-28 12:00:00,029 () DEBUG (Thread-50) (DefaultLifecycleProcessor) Starting bean 'org.springframework.jms.listener.DefaultMessageListenerContainer#3' of type [class org.springframework.jms.listener.DefaultMessageListenerContainer]\n</code></pre>\n\n<p>Why would Spring create four of these beans?</p>\n"},{"tags":["java","spring","spring-mvc","servlets"],"answer_count":3,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":4891,"score":11,"question_id":2158647,"title":"Logging response body (HTML) from HttpServletResponse using Spring MVC HandlerInterceptorAdapter","body":"<p>I am trying to log (just to console write now for simplicity sake) the final rendered HTML that will be returned by the HttpServletResponse. (i.e. the body) To this end, I am using the HandlerInterceptorAdapter from Spring MVC like so:</p>\n\n<pre><code>public class VxmlResponseInterceptor extends HandlerInterceptorAdapter {\n    @Override\n    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {\n        System.out.println(response.toString());\n    }\n}\n</code></pre>\n\n<p>This works as expected and I see the HTTP response headers in the console. My question is if there is a relatively simple way to log the entire response body (i.e. final rendered HTML) to the console without having to resort to doing jumping jacks with PrintWriters, OutputStream's and the like.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13116893,"title":"How to handle Error/Exception on multiple database connections with spring and hibernate?","body":"<p><br/>\nI am using spring and hibernate to work on multiple database server save,update simultaneously using 2 datasource configuration.\nI am using</p>\n\n<pre><code>org.springframework.jdbc.datasource.DriverManagerDataSource\n</code></pre>\n\n<p>class for creating datasource.\nIf both the database server up/running then it's work fine.\nIf I close one of my database server and trying to catch the exception then it's not coming in catch block\nand the stack trace error displaying on my web browser.</p>\n\n<pre><code>Stack Trace:\n</code></pre>\n\n<pre>\n    ** BEGIN NESTED EXCEPTION **\n    java.net.ConnectException\n    MESSAGE: Connection refused: connect\nSTACKTRACE:\n\njava.net.ConnectException: Connection refused: connect\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)\n    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)\n    at java.net.Socket.connect(Socket.java:525)\n    at java.net.Socket.connect(Socket.java:475)\n    at java.net.Socket.(Socket.java:372)\n    at java.net.Socket.(Socket.java:215)\n    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:256)\n    at com.mysql.jdbc.MysqlIO.(MysqlIO.java:271)\n    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2771)\n    at com.mysql.jdbc.Connection.(Connection.java:1555)\n    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)\n    at java.sql.DriverManager.getConnection(DriverManager.java:582)\n    at java.sql.DriverManager.getConnection(DriverManager.java:154)\n    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)\n    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)\n    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)\n    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)\n    at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:82)\n    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)\n    at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)\n    at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:116)\n    at org.hibernate.id.insert.AbstractSelectingDelegate.performInsert(AbstractSelectingDelegate.java:54)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2186)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2666)\n    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)\n    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)\n    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:321)\n    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)\n    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130)\n    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)\n    at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)\n    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)\n    at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)\n    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)\n    at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:562)\n    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:550)\n    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:546)\n    at org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:686)\n    at org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:1)\n    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)\n    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)\n    at org.springframework.orm.hibernate3.HibernateTemplate.save(HibernateTemplate.java:683)\n    at com.service.RegistrationServiceImpl.add(RegistrationServiceImpl.java:56)\n    at com.controller.RegistrationController.onSubmit(RegistrationController.java:48)\n    at org.springframework.web.servlet.mvc.SimpleFormController.processFormSubmission(SimpleFormController.java:272)\n    at org.springframework.web.servlet.mvc.AbstractFormController.handleRequestInternal(AbstractFormController.java:268)\n    at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)\n    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:763)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:709)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:613)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:536)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\n    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n    at java.lang.Thread.run(Thread.java:619)\n\n\n** END NESTED EXCEPTION *\n</pre>\n\n<p>How can I handle this exception.\nI want to display in my GUI that one of my db server is down If any of my db server is down.</p>\n\n<p>Please help on this.</p>\n"},{"tags":["java","spring","hibernate","jpa-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13100536,"title":"Advice about spring transaction management redesign","body":"<p>I will try to describe the issue I'm trying to solve. I realized that an app that I've developed has a poorly implemented spring transaction management. I'm using declarative approach with transactions defined on DAO interface methods (CRUD), not on service layer methods. It's a web app that does some kind of message processing and multiple threads operate on the same message instance simultaneously. Here are the steps in a typical sequence:</p>\n\n<ol>\n<li>Message is created in T1 (transaction 1) and is put into outbound queue. T1 is terminated.</li>\n<li>Message is taken from the queue by a different thread, sent and updated with time of sending and some additional info. Properties of the message object are set and dao.update(m) is called, t2 starts.</li>\n<li>Before t2 commits, delivery report is received and Tread3 starts to process same message object by finding it in db (saved in step 1), updating it's state property and calling dao.upate(m) so t3 starts while t2 is still in progress. </li>\n<li>Another thread (thread 4) further process same message object by changing it's state again in t4.</li>\n</ol>\n\n<p>The result that occurs from time to time is that changes from t2 are lost and sending time is null in db. \nI need help in figuring out how to improve app design and eliminate this issue by preventing concurrent processing of the same message.</p>\n\n<ol>\n<li><p>Should I concentrate on transaction redesign (using it on service level instead of dao) and using the serializable isolation level(or other) or </p></li>\n<li><p>should i use JPA entity manager locking?</p></li>\n</ol>\n\n<p>App uses spring 3 and JPA2 with hibernate implementation.</p>\n"},{"tags":["java","spring","hibernate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13128172,"title":"Multiple transaction managers, no session found","body":"<p>I need to have two transaction managers in my Spring application. I use them by annotating service classes by @Transactional(\"nameOfTxManager\"). Howewer, I am only able to use one of them - when I call some method of service class annotated with second transaction manager, I get \"org.hibernate.HibernateException: No Session found for current thread\" exception. Here is some code that reflects problem:</p>\n\n<p>1st service class:</p>\n\n<pre><code>@Transactional(\"txManagerHSQL\")\npublic class LocalSynchroServiceImpl extends SynchroServiceImpl implements LocalSynchroService {\n\n    public List&lt;Synchro&gt; findAll() {\n        return getDaoAgent().getSynchroDao().findAllLocal();\n    }\n}\n</code></pre>\n\n<p>2nd service class</p>\n\n<pre><code>@Transactional(\"txManagerMySQL\")\npublic class RemoteSynchroServiceImpl extends SynchroServiceImpl implements RemoteSynchroService {\n\n    public List&lt;Synchro&gt; findAll() {\n        return getDaoAgent().getSynchroDao().findAllRemote();\n    }\n}\n</code></pre>\n\n<p>Piece of configuration connected with transactions:</p>\n\n<pre><code>&lt;tx:annotation-driven /&gt;\n&lt;bean id=\"txManagerHSQL\" class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n     &lt;property name=\"sessionFactory\" ref=\"sessionFactoryHSQL\"/&gt;\n&lt;/bean&gt;\n&lt;bean id=\"txManagerMySQL\" class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n     &lt;property name=\"sessionFactory\" ref=\"sessionFactoryMySQL\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>org.hibernate.HibernateException: No Session found for current thread\n    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)\n    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:941)\n    at pl.mbrnwsk.clientsRegister.dao.DaoImpl.getCurrentSession(DaoImpl.java:75)\n</code></pre>\n\n<p>The annotation of 2nd service class is interpreted correctly, because when I change name of transaction manager to some random name, I get the exception that such bean was not found. And also, when I set name as @Transactional(\"txManagerHSQL\"), it works fine but with not the transaction manager I want.</p>\n"},{"tags":["java","spring","jpa","jpql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13095460,"title":"jpa one-to-many sql error while initializing","body":"<p>In my java spring webapp I have relationship: One account can have many groups and one group can have only one account.</p>\n\n<p>Group entity:</p>\n\n<pre><code>@Entity\n@Table(name = \"group\")\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class Group {\n\n@Id\n@GeneratedValue(generator = \"group_id\", strategy = GenerationType.SEQUENCE)\n@SequenceGenerator(name = \"group_id\", sequenceName = \"group_group_id_seq\", allocationSize = 1)\n@Column(name = \"group_id\")\nprivate Long id;\n\n@Basic\n@NotBlank\n@Column(name = \"name\")\nprivate String name;\n\n@ManyToOne(targetEntity = Account.class, fetch = FetchType.LAZY)\n@JoinColumn(name = \"account_id\")\nprivate Account account;\n\n@Basic\n@NotBlank\n@Column(name = \"all\")\nprivate boolean all;\n\n@ManyToMany(targetEntity = Word.class, fetch = FetchType.LAZY)\n@JoinTable(name = \"group_word\", joinColumns = {@JoinColumn(name=\"group_id\")}, inverseJoinColumns = {@JoinColumn(name=\"word_id\")})\nprivate List&lt;Word&gt; words;\n\ngetters/setters...\n</code></pre>\n\n<p>Account entity:</p>\n\n<pre><code>@Entity\n@JsonIgnoreProperties(ignoreUnknown = true)\n@Table(name = \"account\")\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class Account  extends User implements UserDetails {\n\n@Id\n@GeneratedValue(generator = \"account_id\", strategy = GenerationType.SEQUENCE)\n@SequenceGenerator(name = \"account_id\", sequenceName = \"account_account_id_seq\", allocationSize = 1)\n@Column(name = \"account_id\")\nprivate Long accountId;\n\n@Column(name = \"username\")\nprivate String username;\n\n@Column(name = \"password\")\nprivate String password;\n\n@Transient\nprivate String repeatedPassword;\n\n@DateTimeFormat(iso = ISO.DATE_TIME)\n@Column(name = \"registration_date\")\nDate registrationDate = Calendar.getInstance().getTime();\n\n@Column(name = \"email\")\nprivate String email;\n\n@ManyToMany(targetEntity = Role.class, fetch = FetchType.LAZY)\n@JoinTable(name = \"account_role\", joinColumns = {@JoinColumn(name=\"account_id\")}, inverseJoinColumns = {@JoinColumn(name=\"role_id\")})\nprivate List&lt;Role&gt; roles;\n\npublic List&lt;Role&gt; getRoles() {\n    return roles;\n}\n\npublic void setRoles(List&lt;Role&gt; roles) {\n    this.roles = roles;\n}\n\n@OneToMany(mappedBy=\"account\", fetch = FetchType.LAZY)\nprivate List&lt;Group&gt; groups;\n\npublic List&lt;Group&gt; getGroups() {\n    return groups;\n}\n\npublic void setGroups(List&lt;Group&gt; groups) {\n    this.groups = groups;\n\ngetters/setters...\n</code></pre>\n\n<p>When i invoke this service method:</p>\n\n<pre><code>public List&lt;Group&gt; listUserGroups(String username) {\n    try {\n        Account foundAccount = accountDao.findUserByUsername(username);\n        List&lt;Group&gt; userGroups = foundAccount.getGroups();\n        userGroups.size();\n        return userGroups;\n    } catch (UserNotFoundException unf) {\n        logger.error(\"User not found: \" + username, unf.getMessage());\n        return Collections.emptyList();\n    }\n}\n</code></pre>\n\n<p>I have an error on line: </p>\n\n<pre><code>userGroups.size();\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>00:27:27,528 DEBUG [org.hibernate.engine.StatefulPersistenceContext] - initializing non-lazy collections\n00:27:27,528 DEBUG [org.hibernate.loader.Loader] - loading collection: [pl.net.grodek.snd.model.Account.groups#116]\n00:27:27,528 DEBUG [org.hibernate.jdbc.AbstractBatcher] - about to open PreparedStatement (open PreparedStatements: 0, globally: 0)\n00:27:27,528 DEBUG [org.hibernate.SQL] - select groups0_.account_account_id as account4_20_1_, groups0_.group_id as group1_1_, groups0_.group_id as group1_19_0_, groups0_.account_account_id as account4_19_0_, groups0_.all as all19_0_, groups0_.name as name19_0_ from group groups0_ where groups0_.account_account_id=?\n00:27:27,544 DEBUG [org.hibernate.jdbc.AbstractBatcher] - about to close PreparedStatement (open PreparedStatements: 1, globally: 1)\n00:27:27,544 DEBUG [org.hibernate.util.JDBCExceptionReporter] - could not initialize a collection: [pl.net.grodek.snd.model.Account.groups#116] [select groups0_.account_account_id as account4_20_1_, groups0_.group_id as group1_1_, groups0_.group_id as group1_19_0_, groups0_.account_account_id as account4_19_0_, groups0_.all as all19_0_, groups0_.name as name19_0_ from group groups0_ where groups0_.account_account_id=?]\norg.postgresql.util.PSQLException: ERROR: syntax error near \"group\"\nPosition: 227\nat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2103)\nat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1836)\nat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)\nat org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:512)\nat org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:388)\nat org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:273)\nat com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)\nat org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)\nat org.hibernate.loader.Loader.getResultSet(Loader.java:1953)\nat org.hibernate.loader.Loader.doQuery(Loader.java:802)\nat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)\nat org.hibernate.loader.Loader.loadCollection(Loader.java:2166)\nat org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:62)\nat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:627)\nat org.hibernate.event.def.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:83)\nat org.hibernate.impl.SessionImpl.initializeCollection(SessionImpl.java:1863)\nat org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:369)\nat org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:111)\nat org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:134)\nat org.hibernate.collection.PersistentBag.size(PersistentBag.java:248)\nat pl.net.grodek.snd.service.GroupServiceImpl.listUserGroups(GroupServiceImpl.java:47)\nat pl.net.grodek.snd.service.GroupServiceImpl.listUserGroups(GroupServiceImpl.java:1)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat \n</code></pre>\n\n<p>I think that the problem is in query generated by jpa:</p>\n\n<pre><code>select groups0_.account_account_id as account4_20_1_, groups0_.group_id as group1_1_, groups0_.group_id as group1_19_0_, groups0_.account_account_id as account4_19_0_, groups0_.all as all19_0_, groups0_.name as name19_0_ from group groups0_ where groups0_.account_account_id=?\n</code></pre>\n\n<p>where there are doubled account_id and group_id. But my question why this is happening. Please clarify for me this issue because I ran out of ideas :(</p>\n\n<p>EDIT: </p>\n\n<p>Oh i forgot about DB tables:</p>\n\n<pre><code>CREATE TABLE \"group\"\n(\n    group_id bigserial NOT NULL,\n    name character varying(150)[] NOT NULL,\n    \"all\" boolean NOT NULL DEFAULT false,\n    account_id bigint NOT NULL,\n    CONSTRAINT group_id_pk PRIMARY KEY (group_id ),\n    CONSTRAINT account_id_fk FOREIGN KEY (account_id)\n    REFERENCES account (account_id) MATCH SIMPLE\n    ON UPDATE NO ACTION ON DELETE NO ACTION\n)\n\nCREATE TABLE account\n(\n    account_id bigserial NOT NULL,\n    username character varying(32),\n    password character varying(64),\n    email character varying(100),\n    registration_date timestamp with time zone NOT NULL,\n    word_for_today bigint,\n    groups_on_page integer NOT NULL,\n    CONSTRAINT account_pk PRIMARY KEY (account_id ),\n    CONSTRAINT word_fk FOREIGN KEY (word_for_today)\n  REFERENCES word (word_id) MATCH SIMPLE\n  ON UPDATE NO ACTION ON DELETE NO ACTION,\n    CONSTRAINT unique_mail UNIQUE (email ),\n    CONSTRAINT unique_username UNIQUE (username )\n)\n</code></pre>\n"},{"tags":["java","spring","spring-data","mongodb-java"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":619,"score":2,"question_id":10311061,"title":"Spring Data MongoDB Date Between","body":"<p>I use spring data mongodb.</p>\n\n<p>I want the records between two dates.</p>\n\n<pre><code>MongoDB Query:\n\ndb.posts.find({startDate: {$gte: start, $lt: end}}); // works\n\n//Not works\nQuery query = new Query();\nquery.addCriteria(Criteria.where(\"startDate\").gte(startDate).and(\"startDate\").lt(endDate));\n</code></pre>\n"},{"tags":["spring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":174,"score":0,"question_id":7380232,"title":"Spring-iBatis create database dynamically","body":"<p>I am new to spring-iBatis. I have a requirement to create a database dynamically from my application. The database is MySql. I have seen that there are methods for insert,update and delete like SQLMap.insert(). but I am not finding any method to execute Create statement. Can anyone help me ?</p>\n"},{"tags":["java","spring","dao","hibernate-4.x"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13120986,"title":"Spring 3 and Hibernate 4 Dao","body":"<p>I found HibernateTemplate is removed from Hibernate 4 and how should I configure Dao application context xml file?</p>\n"},{"tags":["spring","hibernate-4.x"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":947,"score":4,"question_id":9193198,"title":"Spring: Why the SessionFactoryUtils class in Hibernate 4 does not provide the getSession method?","body":"<p>What happened to the SessionFactoryUtils.getSession method from Hibernate 4 in Spring 3.1.0  ?  What should be used instead ? sessionFactory.getCurrentSession() keeps giving me this exception: </p>\n\n<pre><code>org.hibernate.HibernateException: No Session found for current thread\nat org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)\nat org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:883)\n</code></pre>\n\n<p>Any hint ?</p>\n"},{"tags":["java","spring","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13123510,"title":"Mocking local object created by spring application context using Mockito","body":"<p>I am trying to mock a local object, using Mockito Framework, that is being created from the spring application context; But every time I run the application its fails to replace the original object with the mocked object.</p>\n\n<p>Here is the original class's code spinets:</p>\n\n<pre><code>public void executeMyJob(){\n    ApplicationContext springContext = ApplicationContextUtil.getApplicationContext();\n\n    MusicEAO music= (MusicEAO) springContext.getBean(\"MusicEAO\");\n    List&lt;Brand&gt; dataList =music.getAll();\n\n    ......\n}  \n</code></pre>\n\n<p>I want to mock the <code>MusicEAO</code> so when the <code>getAll()</code> method is called, it will use the mock object.</p>\n\n<p>Below is my test class code snippets:</p>\n\n<pre><code>@Mock\nMusicEAO musicEAO;\nwhen(musicEAO.findAll()).thenReturn(myDefinedList);\n</code></pre>\n\n<p>How can I resolve this issue?</p>\n"},{"tags":["spring","session-variables","portlet"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13123550,"title":"@SessionAttributes doesn't get removed in Spring Portlet MVC","body":"<p>I have a simple Portlet that I expect to take some user input, do some stuff and show a success message. The code goes like this:</p>\n\n<pre><code>@Controller(value = \"myController\")\n@RequestMapping(value = \"VIEW\")\n@SessionAttributes(\"myCommand\")\npublic class MyController {\n\n    @ModelAttribute(\"someList\")\n    public Map&lt;String, String&gt; getSomeList() {\n        return theList;\n    }\n\n    @ModelAttribute(\"myCommand\")\n    public CambioPlanCommand getCommandObject(PortletSession session,\n            Principal principal) throws SeguridadMiClaroException {\n        MyCommand command = new MyCommand();\n        return command;\n    }\n\n    @RenderMapping\n    public String showView() {\n        return \"myView\";\n    }\n\n    @ActionMapping(params = \"action=stuff\")\n    public void doStuff(\n            @ModelAttribute(value = \"myCommand\") MyCommand datosFormulario,\n            BindingResult bindingResult, SessionStatus status,\n            PortletSession session, Principal principal, ModelMap modelMap,\n            PortletRequest request) {\n\n            modelMap.put(\"theMessage\", \"Stuff is done\");\n            status.setComplete();\n\n\n    }\n\n}\n</code></pre>\n\n<p>The first time I execute the Portlet everything goes fine: The command object gets populated, the message is put in model and my JSP shows it in screen. Then I go to another page to play with some other portlets; and when I return to my original Portlet I expect the following:</p>\n\n<ul>\n<li>To get an empty instance of MyCommand</li>\n<li>To see no Message in Screen</li>\n</ul>\n\n<p>But I find the opossite, and I still see the message configured in the previous request. I'm very confused about this, since the Message was not configured as a SessionAttribute (only the command) and I called SessionStatus.setComplete() so if everything was stored in Session it should already be removed.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>The problem seems related to this <a href=\"https://jira.springsource.org/browse/SPR-6126\" rel=\"nofollow\">JIRA issue</a>.</p>\n"},{"tags":["spring","jpa","osgi","eclipselink"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1393,"score":2,"question_id":2789024,"title":"Unable to acquire a connection from driver [null], user [null] and URL [null]. / EclipseLink 1.2 / Spring 2.5.6 / OSGI","body":"<p>I try to deploy a project where EclipseLink JPA is used as ORM tool on an OSGI platform. The project works fine when running outside of a OSGI container.</p>\n\n<p>Version used : Spring 2.5.6, EclipseLink 1.2.0</p>\n\n<p>Unfortunately, I get this error on the OSGI platform :</p>\n\n<pre><code>Exception Description: Unable to acquire a connection from driver [null], user [null] and URL [null].  Verify that you have set the expected driver class and URL.  Check your login, persistence.xml or sessions.xml resource.  The jdbc.driver property should be set to a class that is compatible with your database platform\n    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:290)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:146)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:198)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:186)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:434)\n    at $Proxy152.createEntityManager(Unknown Source)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:190)\n    at $Proxy153.find(Unknown Source)\n</code></pre>\n\n<p>For an unknown reason the datasource which is created and added to the org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean is not retrieved by EclipseLink</p>\n\n<p>Any idea is welcome ?</p>\n\n<p>Kind regards,</p>\n\n<p>charles</p>\n"},{"tags":["spring","hibernate","transactions"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":13087928,"title":"Spring Hibernate transaction management","body":"<p>I have just started making a project using spring and hibernate. My DAO layer class extends HibernateDaoSupport. We are not using annotations. \nEarlier, we were using struts, hence we used getTransaction, commit, roolback.. methods provided by Session object.\nMy requirement is very simple, for all DAO classes, if there is an exception, rollback otherwise commit. Please suggest a simplest way of introducing spring transaction management. </p>\n"},{"tags":["spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13119759,"title":"Return a file from Controller in Spring","body":"<p>I am new to spring. I have a controller with a RequestMapping for several GET parameters. They return a String .\nBut one method needs to return a file in the \"/res/\" folder. How do I do that?</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.GET,value = \"/getfile\")\npublic @ResponseBody \nString getReviewedFile(@RequestParam(\"fileName\") String fileName)\n{\n    return //the File Content or better the file itself\n}\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","junit","mockito","springmockito"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12247360,"title":"@ReplaceWithMock not mocking using Springmockito-annotations","body":"<p>I have a class which I am trying unit test.  I am trying to test it using Mockito, and to resolve the spring injection with mockito I am using Springockito and Springockito-annotations.</p>\n\n<pre><code>@ContextConfiguration(loader = SpringockitoContextLoader.class,\n        locations = {\"classpath:testApplication-context-EU.xml\"})\npublic class RelatedSearchToHotUrlProcessorTest extends AbstractJUnit4SpringContextTests {\n\n    @Autowired\n    RelatedSearchToHotUrlProcessor processor;\n\n    @ReplaceWithMock\n    private RestOperations restTemplate;\n\n\n    @Test\n    public void testGetCategoryFromIdWithNoStoredAlias() {\n        Taxonomy mockTaxonomy = mock(Taxonomy.class, RETURNS_DEEP_STUBS);\n        GraphType.Node mockNode = mock(GraphType.Node.class);\n        when(restTemplate.getForObject(anyString(), eq(Taxonomy.class))).thenReturn(mockTaxonomy);\n        when(mockTaxonomy\n                .getRev()\n                .get(0)\n                .getCountry()\n                .get(0)\n                .getGraph()\n                .getNodeOrAtom()\n                .get(0)).thenReturn(mockNode);\n        when(mockNode.getAlias()).thenReturn(\"mockalias\");\n        String categoryAlias = processor.getCategoryAliasFromId(13130L);\n        assertEquals(\"mockalias\", categoryAlias);\n    }\n}\n</code></pre>\n\n<p>If I remove the <code>@ReplaceWithMock</code> and the <code>private RestOperations restTemplate</code> lines then it makes the right call and the value can be validated as correct.  However, I want to mock the RestOperations object inside the processor, but using the @ReplaceWithMock makes the restTemplate variable null, causing it to fail.  I haven't been able to work out how to isolate this member and mock it.</p>\n"},{"tags":["spring","netbeans"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":4780,"score":1,"question_id":6732804,"title":"No mapping found for HTTP request with URI in DispatcherServlet with name 'dispatcher'","body":"<p>I'm new to Spring framework. I just started implementing multiaction controller in netbeans. But. I'm getting the above error. I'm pasting my code below. Plz take a look into it and resolve me the issue. </p>\n\n<p>dispatcher-servlet.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xmlns:p=\"http://www.springframework.org/schema/p\"\n   xmlns:aop=\"http://www.springframework.org/schema/aop\"\n   xmlns:tx=\"http://www.springframework.org/schema/tx\"\n   xsi:schemaLocation=\"http://www.springframework.org/schema/beans           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"&gt;\n\n&lt;bean class=\"org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping\"/&gt;\n\n&lt;bean id=\"urlMapping\" class=\"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping\"&gt;\n    &lt;property name=\"mappings\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"index.htm\"&gt;indexController&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"viewResolver\"\n      class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"\n      p:prefix=\"/WEB-INF/jsp/\"\n      p:suffix=\".jsp\" /&gt;\n\n&lt;bean name=\"indexController\"\n      class=\"org.springframework.web.servlet.mvc.ParameterizableViewController\"\n      p:viewName=\"index\" /&gt;\n&lt;bean name=\"/*.htm\" class=\"controller.MyController\"/&gt;\n &lt;/beans&gt;\n</code></pre>\n\n<p>index.jsp: </p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n    &lt;title&gt;Hello&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;h4&gt;Multi Action Controller Example&lt;/h4&gt;\n    &lt;a href=\"add.htm\"&gt;Add&lt;/a&gt;\n    &lt;a href=\"update.htm\"&gt;Update&lt;/a&gt;\n    &lt;a href=\"remove.htm\"&gt;Remove&lt;/a&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>MyController.java: </p>\n\n<pre><code>    package controller; \n\n    import javax.servlet.http.HttpServletRequest;\n    import javax.servlet.http.HttpServletResponse;\n    import org.springframework.web.servlet.ModelAndView;\n    import org.springframework.web.servlet.mvc.multiaction.MultiActionController;\n\n    public class MyController extends MultiActionController {\n    public ModelAndView add(HttpServletRequest req,HttpServletResponse resp) throws      Exception{\n    System.out.println(\"Add ma\");\n    return new ModelAndView(\"result\",\"message\",\"Add Method Called\");\n}\npublic ModelAndView update(HttpServletRequest req,HttpServletResponse resp) throws Exception{\n    System.out.println(\"Update ma\");\n    return new ModelAndView(\"result\",\"message\",\"Update Method Called\");\n}\npublic ModelAndView remove(HttpServletRequest req,HttpServletResponse resp) throws Exception{\n    System.out.println(\"Remove ma\");\n    return new ModelAndView(\"result\",\"message\",\"Remove Method Called\");\n}\n}\n</code></pre>\n\n<p>result.jsp: </p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n    &lt;title&gt;Nee Varaatha&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Please Show it &lt;/h1&gt;\n    ${message}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","spring","state-pattern"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13120097,"title":"Cleaning up stopped threads","body":"<p>I have a state machine, which is used by many threads to manage the states of a game. I need to be able to clean the threads if something happens and an instance of a game does not change state for whatever reason.</p>\n\n<p>How could i do this, i have the state machine?</p>\n"},{"tags":["spring","hibernate","servlets","context","config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":32,"score":-3,"question_id":13121222,"title":"How to use Spring hibernate with Servlet","body":"<p>I have 2 project:</p>\n\n<ul>\n<li>core: Spring hibernate </li>\n<li>web: servlet-jsp, web refer to core project.</li>\n</ul>\n\n<p>I want to use some DAO (in core project) in servlet, these DAO config as beans by using @Repository annotation. \nCan anyone tell me how can i do that?\nThanks.</p>\n"},{"tags":["spring","configuration"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":650,"score":0,"question_id":5471272,"title":"Can't get PropertyPlaceholderConfigurer to work the way I want","body":"<p>I'm trying to use PropertyPlaceholderConfigurer to read my app configuration. Basically there is a first configuration file in <code>WEB-INF/config/config.properties</code> that contains the filesystem location of another properties file (so that it is not destroyed during app deploy or update). I'm trying to have this set up in <code>servlet-context.xml</code> but only the first one works:</p>\n\n<pre><code>&lt;bean id=\"propertyConfigurerInternal\"\n    class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n    &lt;property name=\"location\"&gt;\n        &lt;value&gt;/WEB-INF/config/config.properties&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n\n&lt;bean id=\"propertyConfigurerExternal\"\n    class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"\n    depends-on=\"propertyConfigurerInternal\"&gt;\n    &lt;property name=\"location\"&gt;\n        &lt;value&gt;file:${baseDataFolder}/jaccise.conf&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The first one (<code>propertyConfigurerInternal</code>) is created with no problem, but the second one fails like this: </p>\n\n<blockquote>\n  <p><code>org.springframework.beans.factory.BeanInitializationException</code>: Could not load properties; nested exception is <code>java.io.FileNotFoundException</code>: <code>${baseDataFolder}\\jaccise.conf</code> (Impossibile trovare il percorso specificato) &lt;- Means \"Can't find file in specified path\"</p>\n</blockquote>\n\n<p>like the EL expression is not working... How do I solve this?</p>\n"},{"tags":["java","spring","base64"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":13119306,"title":"Base64 image encoding using java","body":"<p>I am trying to encode images using base64 encoding on the image URL.\nBut it gives the same encoding for all the URLs.</p>\n\n<p>My code is as follows:  </p>\n\n<pre><code>Object namee = url.openConnection().getContentType();\nString name = (String) namee;\n\nBufferedImage image = ImageIO.read(url);  \n\n//getting image extension from content type\nString ext = name.substring(name.lastIndexOf(\"/\") + 1); \n\nByteArrayOutputStream baos = new ByteArrayOutputStream();\n\nImageIO.write(image, ext, baos);\nbyte[] imageData = baos.toByteArray();\nString base64value = Base64.encodeBase64URLSafeString(imageData);\n</code></pre>\n"},{"tags":["spring","hibernate","thread-safety","batch-processing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13118267,"title":"Thread safety hibernate DAO layer","body":"<p>I have a list of Transaction objects.</p>\n\n<pre><code>List&lt;Transaction&gt; transactions;\n</code></pre>\n\n<p>I need to batch process these transactions by creating a pool of threads which update transactions concurrently.\nThese threads update these transactions using the same DAO class(<strong>Spring</strong> singleton bean) to update the transaction. I'm using <strong>Hibernate</strong> as <strong>ORM</strong></p>\n\n<p>What am I to consider to make sure my code is thread safe? I'm a bit confused.</p>\n\n<p>Here's the DAO class. <code>SessionFactory</code> is also defined as a Spring bean which is then autowired to DAO class.</p>\n\n<pre><code>@Autowired\nSessionFactory sessionFactory;\n\n@Override\npublic Transaction update(Transaction transaction) {\n    Session session = sessionFactory.openSession();\n    session.beginTransaction();\n\n    session.update(transaction);\n\n    session.getTransaction().commit();\n    return transaction;\n}\n</code></pre>\n"},{"tags":["spring","security","pre-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13120362,"title":"Spring Security @PreAuthorize \"false\" instead of Exception","body":"<p>I encountered the situation when I need to use @Pre or @PostAuthorize annotation but with returned value \"false\" instead Authentication Exception. Have anyone any idea how to realize this?</p>\n"},{"tags":["java","spring","hibernate","spring-transactions"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13106679,"title":"Transaction in Spring + hibernate","body":"<p>We are using transaction management through declarative approach, we have specify that all the method which is start with <strong>update*</strong> must follow the transaction.</p>\n\n<p>Suppose we have a transaction method <strong>updatePayroll()</strong> inside this method we are calling four another method, but our requirement is to rollback only in case of first two method get failed else no rollback is required. I don't know how to implement this as my <strong>updatePayroll()</strong> is transacted method so how it is possible to tell the spring that we need only two method's of <strong>updatePayroll()</strong> should be transacted.</p>\n\n<p>code:</p>\n\n<pre><code>public void updatePayroll()\n{\n// below two methods of updateParyroll is required transaction where updatePayroll is transacted method through declarative approach.\nupdateLWPEmployees();\n\nprocessSalary();\n\n// below methods does not require transaction.\nprintSalarySlip();\n\nsendEmail();\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":495,"score":3,"question_id":8581228,"title":"How to define an EnumMap in Spring 3.0","body":"<p>I've been trying to define an EnumMap in Spring using  . I tried the following variations</p>\n\n<pre><code>&lt;util:map map-class=\"java.util.EnumMap\" key-type=\"xyz.EnumType\"&gt;\n&lt;entry key=\"SOME_ENUM_TYPE\"&gt;\n   &lt;ref bean=\"someBean\"/&gt;\n&lt;/entry&gt;\n&lt;/util:map&gt;\n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>Error creating bean with name 'util:map#1c599b0e': Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [java.util.EnumMap]: No default constructor found; nested exception is java.lang.NoSuchMethodException: java.util.EnumMap.&lt;init&gt;()\n</code></pre>\n\n<p>The following definition is what I tried initially</p>\n\n<pre><code>&lt;util:map map-class=\"java.util.EnumMap\"&gt;\n&lt;entry key=\"SOME_ENUM_TYPE\"&gt;\n   &lt;ref bean=\"someBean\"/&gt;\n&lt;/entry&gt;\n&lt;/util:map&gt;\n</code></pre>\n\n<p>and this gave me some error of not being able to assign the enumtype to String.</p>\n\n<p>There are examples on the site to using a generic map, but I am trying to see whether I can use an EnumMap, since it's considered the most optimal for Enums. The answer might be very obvious, so my apologies if the question is stupid. This is probably due to my limited knowledge of Spring. Thanks</p>\n"},{"tags":["java","spring","file","download","controller"],"answer_count":5,"favorite_count":12,"up_vote_count":18,"down_vote_count":0,"view_count":11261,"score":18,"question_id":5673260,"title":"Downloading a file from spring controllers","body":"<p>I have a requirement where I need to download a PDF from the website, the PDF needs to be generated within the code, which II thought would be a combination of freemarker and a PDF generation framework like iText (any better way?). However my main problem is how do I allow the user to download a file through a Spring Controller?</p>\n\n<p>Any ideas or solutions on how to tackle this problem is greatly welcomed</p>\n\n<p>Regards,\nMilinda</p>\n"},{"tags":["spring","selenium","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13118297,"title":"Bean injection in testing","body":"<p>I am writing Selenium WebDriver/Junit tests. I initialize the driver in Spring bean. I have a class:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration( \"/testContext.xml\") \n\n\n   public class VisibleTestSuite {\n\nprivate WebDriver driver;\n\n\n\n\n/**\n * @return the driver\n */\npublic WebDriver getDriver() {\n    return driver;\n}\n\n/**\n * @param aDriver the driver to set\n */\n@Resource(name=\"firefoxDriver\")\npublic  void setDriver(WebDriver Driver) {\n    driver = Driver;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>This actually works when I run all the tests by choosing Build in Netbeans. But when I try to run a single test class by right/Test (Junit) i get failed to load application contextillegal state error.</p>\n\n<pre><code>     java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)\nCaused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 11 in XML document from class path resource [testContext.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'root'.\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:217)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:102)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:57)\n    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)\n    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)\nCaused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'root'.\n    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)\n    at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\n    at org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)\n    at org.apache.xerces.impl.xs.XMLSchemaValidator.startElement(Unknown Source)\n    at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)\n    at org.apache.xerces.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(Unknown Source)\n    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\n    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)\n    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)\n    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\n</code></pre>\n\n<p>I don't have root tag in spring context files, and they are still working. Why is the driver loaded on build?</p>\n\n<p>I need to run the tests all together and individually. I supposed bean is loaded simultaneously with a class. Anyone help me to get this work? </p>\n"},{"tags":["json","hibernate","spring","spring-mvc","lazy-loading"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2486,"score":0,"question_id":6277439,"title":"Lazy Loadng error in JSON serializer","body":"<p>I have such kind of @OneToOne Hibernate relationShip</p>\n\n<pre><code>public class Address implements Serializable {\n\n    private String id;\n    private String city;\n    private String country;\n//setter getters ommitted\n}\n\npublic class Student implements Serializable {\n\n    private String id;\n    private String firstName;\n    private String lastName;    \n    private Address address;\n}\n</code></pre>\n\n<p>address Item is mapped as LAZY.</p>\n\n<p>Now I want to fetch user and it's address using </p>\n\n<pre><code>session.load(Student.class,id);\n</code></pre>\n\n<p>In my daoService.</p>\n\n<p>Then I return it as JSON from my Spring MVC controller:</p>\n\n<pre><code>@RequestMapping(value=\"/getStudent.do\",method=RequestMethod.POST)\n    @ResponseBody\n    public Student getStudent(@RequestParam(\"studentId\") String id){\n        Student student = daoService.getStudent(id);\n        return student;\n    }\n</code></pre>\n\n<p>Unfortunately, it's not working because of Lazy clasees and I fails with: </p>\n\n<pre><code>org.codehaus.jackson.map.JsonMappingException: No serializer found for class org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS) ) (through reference chain: com.vanilla.objects.Student_$$_javassist_1[\"address\"]-&gt;com.vanilla.objects.Address_$$_javassist_0[\"handler\"])\n    at org.codehaus.jackson.map.ser.StdSerializerProvider$1.serialize(StdSerializerProvider.java:62)\n</code></pre>\n\n<p>I do use OpenSessionInViewInterceptor and it works just fine.\nI understand that I can user left join HQL query and retrieve student and address that way and solve the problem. I also understand that changing relation to EAGER will solve it. </p>\n\n<p>But how can I serialize to JSON lazy classes using standard jackson message converter which of cause I added to my XML file. </p>\n"},{"tags":["spring","spring-mvc","navigation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13118566,"title":"navigation between pages in STS","body":"<p>I'm trying to do simple navigation between two pages, but an error appears and i can not solve it</p>\n\n<p>firt page is my <code>home.jsp</code> here i make a link </p>\n\n<pre><code>&lt;a href=\"/timecard/NewAccount\"&gt;&lt;FONT COLOR=\"#40C0FF\"&gt;Create New Account&lt;/FONT&gt;&lt;/a&gt;\n</code></pre>\n\n<p>then i make accounts folder i witch i have to files <code>createAccount.jsp</code> - this is my target page, and <code>views.xml</code> whit this source</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;!DOCTYPE tiles-definitions PUBLIC \"-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN\" \"http://tiles.apache.org/dtds/tiles-config_2_1.dtd\"&gt;\n&lt;tiles-definitions&gt;\n&lt;definition extends=\"default\" name=\"createNew\"&gt;\n&lt;put-attribute name=\"body\" value=\"/WEB-INF/views/accounts/createAccount.jsp\"/&gt;\n&lt;/definition&gt;\n\n&lt;/tiles-definitions&gt;\n</code></pre>\n\n<p>And my <code>AccountsController</code></p>\n\n<pre><code>@Controller\n@RequestMapping(value=\"/timecard/newAccounts\")\npublic class AccountsController {\n\n\n@RequestMapping(method=RequestMethod.GET)\npublic String accountForm(Model model){\n\n    return \"createNew\";\n}\n\n}\n</code></pre>\n\n<p>So when i click the link in <code>home.jsp</code> the page is not found and this is the message </p>\n\n<p><code>WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/timecard/NewAccount] in DispatcherServlet with name 'appServlet'</code> </p>\n\n<p>i'm really confused. can you tell me what i'm doing wrong.\nthanks in advance</p>\n"},{"tags":["spring","spring-webflow"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13118841,"title":"Using multiple JpaFlowExecutionListener in Spring Web Flow","body":"<p>I'm using multiple DataSources in my JSF/Spring/Spring-Webflow application. So I tried to declare multiple <b>JpaFlowExecutionListener</b> in the configuration file of Spring Web Flow because i had this problem :</p>\n\n<blockquote>\n  <p>Caused by: org.hibernate.LazyInitializationException: failed to lazily\n  initialize a collection of role:\n  com.abc.commons.domain.Module,\n  no session or session was closed</p>\n</blockquote>\n\n<p>But this haven't solved the problem. Spring Web Flow appear to use only the first JpaFlowExecutionListener declared in <strong>webflow.xml</strong></p>\n\n<p>Any way to solve this problem ?</p>\n\n<p>Thanks in advance :)</p>\n\n<p><strong>applicationContext.xml</strong></p>\n\n<pre><code>&lt;jpa:repositories base-package=\"com.abc.dao.ratikDB\"\n    factory-class=\"com.abc.dao.support.CustomRepositoryFactoryBean\"\n    transaction-manager-ref=\"ratikDBTransactionManager\"\n    entity-manager-factory-ref=\"ratikDBEntityManagerFactory\"&gt;\n&lt;/jpa:repositories&gt;\n\n&lt;jpa:repositories base-package=\"com.abc.dao.csmaDB\"\n    factory-class=\"com.abc.dao.support.CustomRepositoryFactoryBean\"\n    transaction-manager-ref=\"csmaDBTransactionManager\"\n    entity-manager-factory-ref=\"csmaDBEntityManagerFactory\"&gt;\n&lt;/jpa:repositories&gt;\n\n&lt;bean id=\"ratikDBTransactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"\n    p:entityManagerFactory-ref=\"ratikDBEntityManagerFactory\"&gt;\n    &lt;description&gt;Please read\n        http://www.springframework.org/docs/reference/transaction.html\n    &lt;/description&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"csmaDBTransactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"\n    p:entityManagerFactory-ref=\"csmaDBEntityManagerFactory\"&gt;\n    &lt;description&gt;Please read\n        http://www.springframework.org/docs/reference/transaction.html\n    &lt;/description&gt;\n&lt;/bean&gt;\n\n\n&lt;bean id=\"hibernateJpaVendorAdapter\"\n    class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n    &lt;description&gt;Allow spring to configure hibernate specific settings\n    &lt;/description&gt;\n&lt;/bean&gt;\n&lt;bean id=\"adminXDBEntityManagerFactory\"\n    class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"\n    p:dataSource-ref=\"ratikDBDataSource\" p:jpaVendorAdapter-ref=\"hibernateJpaVendorAdapter\"\n    p:jpaProperties=\"classpath:hibernate.properties\"&gt;\n    &lt;description&gt;Build the entity manager with Hibernate as a provider\n    &lt;/description&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"csmaDBEntityManagerFactory\"\n    class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"\n    p:dataSource-ref=\"csmaDBDataSource\" p:jpaVendorAdapter-ref=\"hibernateJpaVendorAdapter\"\n    p:jpaProperties=\"classpath:hibernate.properties\"&gt;\n    &lt;description&gt;Build the entity manager with Hibernate as a provider\n    &lt;/description&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>My <strong>webflow.xml</strong></p>\n\n<pre><code>&lt;flow-executor id=\"flowExecutor\"&gt;\n    &lt;flow-execution-listeners&gt;\n        &lt;listener ref=\"flowTimerFilter\" /&gt;\n        &lt;listener ref=\"facesContextListener\" /&gt;\n        &lt;listener ref=\"securityListener\" /&gt;\n        &lt;listener ref=\"JpaFlowExecutionListener\" /&gt;\n        &lt;listener ref=\"flowsMenuExecutionListener\" /&gt;\n    &lt;/flow-execution-listeners&gt;\n    &lt;!-- Note1: if you change ' max-executions' then please change also flowsMenuHandler.maxExecutions --&gt;\n    &lt;!-- Note2: when max-execution-snapshots is \"0\" then snapshoting is disabled, this is better for performances --&gt;\n     &lt;flow-execution-repository max-executions=\"5\" max-execution-snapshots=\"0\"/&gt;\n&lt;/flow-executor&gt;\n\n&lt;!-- The registry of executable flow definitions --&gt;\n&lt;flow-registry id=\"flowRegistry\" flow-builder-services=\"flowBuilderServices\" base-path=\"/WEB-INF/flows\"&gt;\n    &lt;flow-location-pattern value=\"/**/*-flow.xml\" /&gt;\n&lt;/flow-registry&gt;\n\n&lt;!-- Configures the Spring Web Flow JSF integration --&gt;\n&lt;faces:flow-builder-services id=\"flowBuilderServices\" development=\"true\" /&gt; \n\n&lt;!-- A listener to create and release a FacesContext --&gt;\n&lt;beans:bean id=\"facesContextListener\" class=\"org.springframework.faces.webflow.FlowFacesContextLifecycleListener\" /&gt;\n\n&lt;!-- A listener to apply Spring Security authorities --&gt;\n&lt;beans:bean id=\"securityListener\" class=\"org.springframework.webflow.security.SecurityFlowExecutionListener\" /&gt;\n\n&lt;beans:bean id=\"flowTimerFilter\" class=\"com.abc.web.filter.FlowTimerFilter\"&gt;\n    &lt;beans:description&gt;Simple debug listener allowing you to track and log the active flow&lt;/beans:description&gt;\n&lt;/beans:bean&gt;\n\n&lt;beans:bean id=\"JpaFlowExecutionListener\" class=\"org.springframework.webflow.persistence.JpaFlowExecutionListener\"&gt;\n    &lt;beans:constructor-arg ref=\"ratikDBEntityManagerFactory\" /&gt;\n    &lt;beans:constructor-arg ref=\"ratikDBTransactionManager\" /&gt;\n&lt;/beans:bean&gt;\n\n\n\n&lt;beans:bean id=\"flowsMenuExecutionListener\" class=\"com.tunisiana.adminx.web.flow.FlowsMenuExecutionListener\"&gt;\n    &lt;beans:description&gt;Track the various user's flows so they can be reached from a Menu&lt;/beans:description&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13084601,"title":"Binding from Set to <form:select> in SpringMVC","body":"<p>I am creating web using Spring MVC and I am still beginner with Spring. I have two entities with many to many relationship. in practice, I have UserGroup, which can have many or one (or none) UserAuthority I want to edit these relationships using form with multiple select. Creating new UserGroup entity or editing existing one works fine, with one small issue: when editing existing UserGroup, there are not select appropriate authorities in the select box. I've been working on this for more than a day with no success. Can someone please help me?</p>\n\n<p>My model for entities is:</p>\n\n<pre><code>@Entity\npublic class UserGroup {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String title;\n\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(\n        name = \"user_group_has_user_authority\",\n        joinColumns = {\n            @JoinColumn(name = \"user_group_id\")},\n        inverseJoinColumns = {\n            @JoinColumn(name = \"user_authority_id\")})\n    private Set&lt;UserAuthority&gt; authorities;\n}\n</code></pre>\n\n<p>(I left out getters and setters, but I have them in my code)</p>\n\n<p>and</p>\n\n<pre><code>public class UserAuthority {\n    @Id\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\n    private Long id;\n\n    private String code;\n\n    private String name;\n}\n</code></pre>\n\n<p>(again, I left out setters and getters).</p>\n\n<p>My form looks like this:</p>\n\n<pre><code>&lt;form:form action=\"${action}\" method=\"post\" commandName=\"userGroup\" id=\"user-group-form\"&gt;\n    &lt;form:input readonly=\"true\" cssClass=\"dn\" path=\"id\"/&gt;\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td&gt;\n                &lt;form:label path=\"title\"&gt;Title&lt;/form:label&gt;\n                &lt;form:errors path=\"title\" /&gt;\n            &lt;/td&gt;\n            &lt;td&gt;\n                &lt;form:input path=\"title\"/&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt;\n                &lt;form:label path=\"authorities\"&gt;Authorities&lt;/form:label&gt;\n                &lt;form:errors path=\"authorities\" /&gt;    \n            &lt;/td&gt;\n            &lt;td&gt;\n                &lt;form:select path=\"authorities\" multiple=\"true\" items=\"${authoritiesList}\" /&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td colspan=\"2\"&gt;\n                &lt;input type=\"submit\" value=\"Save\" /&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/form:form&gt;\n</code></pre>\n\n<p>My contoller methods are following:</p>\n\n<pre><code>@RequestMapping(value = \"/editGroup\", method = RequestMethod.GET) \npublic ModelAndView editGroup(Model model, HttpServletRequest request) {\n    Long id = null;\n    UserGroup userGroup = null;\n    HashMap&lt;String, Object&gt; editModel = new HashMap&lt;&gt;(2);\n\n    try {\n        id = Long.parseLong(request.getParameter(\"id\"));\n    } catch (NumberFormatException ex) {\n    }\n    if (id != null) {\n        userGroup = groupsManager.get(id);\n    } \n\n    UserGroupData userGroupData = groupsManager.createFromUserGroup(userGroup);\n\n    editModel.put(\"userGroup\", userGroupData);\n    editModel.put(\"authoritiesList\", getAuthoritiesList());\n\n    return new ModelAndView(\"/users/groupEdit\", editModel);\n}\n\n@RequestMapping(value = \"/editGroup\", method = RequestMethod.POST)\npublic String updateGroupAction(@ModelAttribute(\"userGroup\") @Validated UserGroupData userGroupData, BindingResult result, Model model, HttpServletRequest request) {\n\n    if (result.hasErrors()) {\n        model.addAttribute(\"userGroup\", userGroupData);\n        return \"/users/groupEdit\";\n    }\n    groupsManager.saveUserGroupData(userGroupData);\n    return \"redirect:/users/listGroup\";\n}\n\nprivate Map &lt;Long, String&gt; getAuthoritiesList() {      //I also tried returning Map&lt;String,String&gt; but result was same.\n    Map&lt;Long,String&gt; authorities = new LinkedHashMap&lt;&gt;();\n    for (UserAuthority ua : authorityManager.getAll()) {\n        authorities.put(ua.getId(), ua.getName());\n    }\n    return authorities;\n}\n</code></pre>\n\n<p>Finnaly, I use this converter to create UserAuthority from String (actually I googled this somewhere, but it works :) )\n    public class StringToUserAuthorityConverter implements Converter {</p>\n\n<pre><code>    /**\n     * The string that represents null.\n     */\n    private static final String NULL_REPRESENTATION = \"null\";\n\n    @Autowired\n    private UserAuthorityDao authorityDao;\n\n    @Override\n    public UserAuthority convert(final String id) {\n        if (id.equals(NULL_REPRESENTATION)) {\n            return null;\n        }\n        Long lId = null;\n        try {\n            lId = new Long(id);\n        } catch (NumberFormatException e) {\n\n        }\n        return authorityDao.find(lId);\n    }\n}\n</code></pre>\n\n<p>As I said, all creating and editing works, only problem I have is, that authorities already associated to group are not selected when editing existing group. Any help would be greatly appreciated. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I found out two things, maybe it can help:</p>\n\n<p>1) In html page, there is following field:</p>\n\n<pre><code>&lt;input type=\"hidden\" value=\"1\" name=\"_authorities\"&gt;\n</code></pre>\n\n<p>I read it should contains values of my authorities field form model, but no matter what, it always contains 1 in my case</p>\n\n<p>2) If my form fails validation (that means if I don't enter Title, which is mandatory) form reloads with error message, but select box is empty. Isn't it sign of something?</p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>I resolved point 2) from my last edit...</p>\n"},{"tags":["java","spring","hibernate","ehcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13090948,"title":"hibernate `cache usage` parameter programmatically","body":"<p>I'm currently configuring hibernate to use ehcache and provide a <code>CacheManager</code> programmatically. We do not use hibernate.xml nor ehcache.xml as we have our own configuration service to provide such informataion.</p>\n\n<p>Now I'm facing an issue: where must the configuration <code>cache usage</code> be defined programmatically?</p>\n\n<p>I'd like to activate it when I create the <code>CacheConfiguration</code> if it is possible but I do not find a method that allows setting the property.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","spring","maven-2","surefire","spring-test"],"answer_count":11,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":5704,"score":6,"question_id":3365628,"title":"JUnit tests pass in Eclipse but fail in Maven Surefire","body":"<p>I have written some JUnit tests using JUnit 4 and spring-test libraries. When I run the tests inside Eclipse then run fine and pass. But when I run them using Maven (during the build process), they fail giving a spring related error. I am not sure what is causing the problem, JUnit, Surefire or Spring. Here is my test code, spring configuration and the exception that I get from Maven:</p>\n\n<p><em>PersonServiceTest.java</em></p>\n\n<pre><code>package com.xyz.person.test;\n\nimport static com.xyz.person.util.FjUtil.toFjList;\nimport static junit.framework.Assert.assertEquals;\nimport static org.junit.Assert.assertNotNull;\n\nimport java.util.List;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\nimport org.springframework.test.context.transaction.TransactionConfiguration;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport com.xyz.person.bo.Person;\nimport com.xyz.person.bs.PersonService;\n\nimport fj.Effect;\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"classpath*:personservice-test.xml\" })\n@TransactionConfiguration(transactionManager = \"transactionManager\", defaultRollback = false)\npublic class PersonServiceTest {\n\n    @Autowired\n    private PersonService service;\n\n    @Test\n    @Transactional\n    public void testCreatePerson() {\n        Person person = new Person();\n        person.setName(\"abhinav\");\n        service.createPerson(person);\n\n        assertNotNull(person.getId());\n    }\n\n    @Test\n    @Transactional\n    public void testFindPersons() {\n        Person person = new Person();\n        person.setName(\"abhinav\");\n        service.createPerson(person);\n\n        List&lt;Person&gt; persons = service.findPersons(\"abhinav\");\n        toFjList(persons).foreach(new Effect&lt;Person&gt;() {\n            public void e(final Person p) {\n                assertEquals(\"abhinav\", p.getName());\n            }});\n    }\n\n}\n</code></pre>\n\n<p><em>personservice-test.xml</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n      http://www.springframework.org/schema/beans/spring-beans.xsd\n      http://www.springframework.org/schema/tx\n      http://www.springframework.org/schema/tx/spring-tx.xsd\n      http://www.springframework.org/schema/aop\n      http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n      http://www.springframework.org/schema/context\n      http://www.springframework.org/schema/context/spring-context-2.5.xsd\"&gt;\n\n    &lt;import resource=\"classpath:/personservice.xml\" /&gt;\n\n    &lt;bean id=\"datasource\"\n        class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"\n        lazy-init=\"true\"&gt;\n        &lt;property name=\"driverClassName\" value=\"org.apache.derby.jdbc.EmbeddedDriver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:derby:InMemoryDatabase;create=true\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"entityManagerFactory\"\n        class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"datasource\" /&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"PersonService\" /&gt;\n        &lt;property name=\"jpaVendorAdapter\"&gt;\n            &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n                &lt;property name=\"databasePlatform\" value=\"org.hibernate.dialect.DerbyDialect\" /&gt;\n                &lt;property name=\"showSql\" value=\"true\" /&gt;\n                &lt;property name=\"generateDdl\" value=\"true\" /&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n        &lt;property name=\"jpaPropertyMap\"&gt;\n            &lt;map&gt;\n                &lt;entry key=\"hibernate.validator.autoregister_listeners\" value=\"false\" /&gt;\n                &lt;entry key=\"javax.persistence.transactionType\" value=\"RESOURCE_LOCAL\" /&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\" /&gt;\n        &lt;property name=\"dataSource\" ref=\"datasource\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\"\n        proxy-target-class=\"false\" /&gt;\n\n    &lt;bean id=\"beanMapper\" class=\"org.dozer.DozerBeanMapper\"&gt;\n        &lt;property name=\"mappingFiles\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;personservice-mappings.xml&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p><em>Exception in Maven</em></p>\n\n<pre><code>-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning com.xyz.person.test.PersonServiceTest\n23:18:51,250  WARN JDBCExceptionReporter:77 - SQL Warning: 10000, SQLState: 01J01\n23:18:51,281  WARN JDBCExceptionReporter:78 - Database 'InMemoryDatabase' not created, connection made to existing database instead.\n23:18:52,937  WARN JDBCExceptionReporter:77 - SQL Warning: 10000, SQLState: 01J01\n23:18:52,937  WARN JDBCExceptionReporter:78 - Database 'InMemoryDatabase' not created, connection made to existing database instead.\n23:18:52,953  WARN TestContextManager:429 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.transaction.TransactionalTestExecutionListener@359a359a] to process 'after' execution for test: method [public void com.xyz.person.test.PersonServiceTest.testCreatePerson()], instance [com.xyz.person.test.PersonServiceTest@1bc81bc8], exception [org.springframework.transaction.IllegalTransactionStateException: Pre-bound JDBC Connection found! JpaTransactionManager does not support running within DataSourceTransactionManager if told to manage the DataSource itself. It is recommended to use a single JpaTransactionManager for all transactions on a single DataSource, no matter whether JPA or JDBC access.]\njava.lang.IllegalStateException: No value for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@3f563f56] bound to thread [main]\n        at org.springframework.transaction.support.TransactionSynchronizationManager.unbindResource(TransactionSynchronizationManager.java:199)\n        at org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion(JpaTransactionManager.java:489)\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.cleanupAfterCompletion(AbstractPlatformTransactionManager.java:1011)\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:804)\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)\n        at org.springframework.test.context.transaction.TransactionalTestExecutionListener$TransactionContext.endTransaction(TransactionalTestExecutionListener.java:515)\n        at org.springframework.test.context.transaction.TransactionalTestExecutionListener.endTransaction(TransactionalTestExecutionListener.java:290)\n        at org.springframework.test.context.transaction.TransactionalTestExecutionListener.afterTestMethod(TransactionalTestExecutionListener.java:183)\n        at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:426)\n        at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:90)\n        at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)\n        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:59)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:115)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:102)\n        at org.apache.maven.surefire.Surefire.run(Surefire.java:180)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n        at java.lang.reflect.Method.invoke(Method.java:599)\n        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:350)\n        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)\n23:18:53,078  WARN TestContextManager:377 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.transaction.TransactionalTestExecutionListener@359a359a] to process 'before' execution of test method [public void com.xyz.person.test.PersonServiceTest.testFindPersons()] for test instance [com.xyz.person.test.PersonServiceTest@79f279f2]\norg.springframework.transaction.IllegalTransactionStateException: Pre-bound JDBC Connection found! JpaTransactionManager does not support running within DataSourceTransactionManager if told to manage the DataSource itself. It is recommended to use a single JpaTransactionManager for all transactions on a single DataSource, no matter whether JPA or JDBC access.\n        at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:304)\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)\n        at org.springframework.test.context.transaction.TransactionalTestExecutionListener$TransactionContext.startTransaction(TransactionalTestExecutionListener.java:507)\n        at org.springframework.test.context.transaction.TransactionalTestExecutionListener.startNewTransaction(TransactionalTestExecutionListener.java:269)\n        at org.springframework.test.context.transaction.TransactionalTestExecutionListener.beforeTestMethod(TransactionalTestExecutionListener.java:162)\n        at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:374)\n        at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:73)\n        at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82)\n        at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)\n        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:59)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:115)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:102)\n        at org.apache.maven.surefire.Surefire.run(Surefire.java:180)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n        at java.lang.reflect.Method.invoke(Method.java:599)\n        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:350)\n        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)\nTests run: 3, Failures: 0, Errors: 3, Skipped: 0, Time elapsed: 15.625 sec &lt;&lt;&lt; FAILURE!\n\nResults :\n\nTests in error:\n  testCreatePerson(com.xyz.person.test.PersonServiceTest)\n  testCreatePerson(com.xyz.person.test.PersonServiceTest)\n  testFindPersons(com.xyz.person.test.PersonServiceTest)\n\nTests run: 3, Failures: 0, Errors: 3, Skipped: 0\n</code></pre>\n"},{"tags":["spring","spring-security"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12501678,"title":"How to add custom password encoder to Spring Security?","body":"<p>I'm attempting to convert a web project to Spring.\nI have already incorporated Spring Security, however the old project used SHA-1 converted to a  hex string to encrypt user passwords.</p>\n\n<p>I was wondering how I can go about making a custom password encoder that will allow me to specify exactly how I want the password encrypted.</p>\n"},{"tags":["java","spring","jdbc","spring-jdbc","springsource"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":683,"score":5,"question_id":9469643,"title":"Difference Between Spring JDBC Vs Plain JDBC?","body":"<p>What is the main difference between Spring JDBC VS JDBC?</p>\n"},{"tags":["spring","webforms","bind"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":242,"score":0,"question_id":9296309,"title":"Spring framework bind form array property","body":"<pre><code>// my form\npublic class myForm {\nprivate double[] myField;\n\npublic double[] getMyField(){\n    return myField;\n}\n\npublic void setMyField(double[] myField){\n    this.myField = myField;\n}\n}\n\n// my jsp\n...\n...\n&lt;c:set var=\"i\" value=\"0\"/&gt;\n&lt;c:forEach items=\"${myList}\" var=\"data\"&gt;\n&lt;form:input path=\"myField[${$i}]\"/&gt;\n&lt;c:set var=\"i\"&gt;${i + 1}&lt;/c:set&gt;\n&lt;/c:forEach&gt;\n...\n...\n</code></pre>\n\n<p>After spring render jsp generate this code ;</p>\n\n<pre><code>&lt;input type=\"text\" value=\"0.0\" name=\"myField0\" id=\"myField0\"/&gt;\n&lt;input type=\"text\" value=\"0.0\" name=\"myField1\" id=\"myField1\"/&gt;\n&lt;input type=\"text\" value=\"0.0\" name=\"myField2\" id=\"myField2\"/&gt;\n...\n...\n</code></pre>\n\n<p>Spring cant bind my form on controller , because form names not valid (myField0, myField1..) . If i change names with firebug (as myField[0], myField[1] etc.) initBinder works and i catch my form data on controller. How can i solve this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["spring","hibernate","jpa","persistence-unit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13113739,"title":"spring jpa hibernate with more datasources","body":"<p>I have to use two different database in my application(spring) with Hibernate,Jpa. \nI'd like to define the different table directly to the different data sources. \nSo I use two different persistence unit and I try to use</p>\n\n<pre><code>&lt;property name=\"packagesToScan\" value=\"it.two.app.domain.first\" /&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;property name=\"packagesToScan\" value=\"it.two.app.domain.second\" /&gt;\n</code></pre>\n\n<p>putting the different tables into the different packages.\nbut It doesn't work.\nInfact all the table is with the first data source.\nthen I tried to write into the perstistence XML file the name of the class\nlike</p>\n\n<pre><code> &lt;persistence-unit name=\"persistenceFirst\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n &lt;class&gt;it.two.app.domain.first.OneTable&lt;/class&gt;\n &lt;exclude-unlisted-classes/&gt;\n&lt;/persistence-unit&gt;\n</code></pre>\n\n<p>and\n    \n     it.two.app.domain.second.OtherTable\n     \n    </p>\n\n<p>But when I run Log says\n    Table 'firstDB.other-table' doesn't exist\nand I use into the services file </p>\n\n<pre><code>@PersistenceContext(unitName =\"persistenceFirst\")\nprivate EntityManager em;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>@PersistenceContext(unitName = \"persistenceSecond\")\nEntityManager em;\n</code></pre>\n\n<p>Have you got some Ideas?\nThi is the data sources XML file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\nxmlns:jpa=\"http://www.springframework.org/schema/data/jpa\"\nxmlns:tx=\"http://www.springframework.org/schema/tx\"\nxmlns:p=\"http://www.springframework.org/schema/p\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd\n    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n    http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd\n    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n    http://www.springframework.org/schema/context     http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n\n&lt;!-- first datasource --&gt;\n&lt;context:property-placeholder location=\"classpath:jdbc-first.properties\"/&gt;\n&lt;bean id=\"dataSourceFirst\"  class=\"org.apache.commons.dbcp.BasicDataSource\"\n    p:driverClassName=\"${jdbc.driverClassName}\" p:url=\"${jdbc.databaseurl}\"\n    p:username=\"${jdbc.username}\" p:password=\"${jdbc.password}\"  /&gt;\n&lt;!-- second datasource --&gt;      \n&lt;context:property-placeholder location=\"classpath:jdbc-second.properties\"/&gt;\n&lt;bean id=\"dataSourceSecond\"     class=\"org.apache.commons.dbcp.BasicDataSource\"\n    p:driverClassName=\"${jdbc.driverClassName}\" p:url=\"${jdbc.databaseurl}\"\n    p:username=\"${jdbc.username}\" p:password=\"${jdbc.password}\"  /&gt;     \n\n\n&lt;bean id=\"transactionManagerFirst\"  class=\"org.springframework.orm.jpa.JpaTransactionManager\"\np:entityManagerFactory-ref=\"emfFirst\"/&gt;\n\n&lt;bean id=\"transactionManagerSecond\"     class=\"org.springframework.orm.jpa.JpaTransactionManager\"\np:entityManagerFactory-ref=\"emfSecond\"/&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"transactionManagerFirst\"/&gt;\n&lt;tx:annotation-driven transaction-manager=\"transactionManagerSecond\"/&gt;\n\n\n&lt;jpa:repositories base-package=\"it.two.app.repository.first\"\nentity-manager-factory-ref=\"emfFirst\" transaction-manager-ref=\"transactionManagerFirst\" /&gt;\n\n&lt;jpa:repositories base-package=\"it.two.app.repository.second\"\nentity-manager-factory-ref=\"emfSecond\" transaction-manager-ref=\"transactionManagerSecond\" /&gt;\n\n&lt;bean id=\"emfFirst\"\nclass=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n&lt;property name=\"persistenceUnitName\" value=\"persistenceFirst\"/&gt;\n&lt;property name=\"persistenceXmlLocation\" value=\"classpath:/META-INF/persistence-first.xml\"/&gt;\n&lt;property name=\"jpaVendorAdapter\"&gt;\n    &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\" /&gt;\n&lt;/property&gt;\n\n&lt;property name=\"dataSource\" ref=\"dataSourceFirst\" /&gt;\n&lt;property name=\"packagesToScan\" value=\"it.two.app.domain.first\" /&gt;\n&lt;property name=\"jpaProperties\"&gt;\n    &lt;props&gt;\n        &lt;prop     key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n        &lt;prop key=\"hibernate.max_fetch_depth\"&gt;3&lt;/prop&gt;\n        &lt;prop key=\"hibernate.jdbc.fetch_size\"&gt;50&lt;/prop&gt;\n        &lt;prop key=\"hibernate.jdbc.batch_size\"&gt;10&lt;/prop&gt;\n    &lt;/props&gt;\n&lt;/property&gt;\n\n&lt;/bean&gt;\n\n&lt;bean id=\"emfSecond\"     class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n&lt;property name=\"persistenceUnitName\" value=\"persistenceSecond\"/&gt;\n&lt;property name=\"persistenceXmlLocation\" value=\"classpath:/META-INF/persistence-        second.xml\"/&gt;\n&lt;property name=\"jpaVendorAdapter\" &gt;\n &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"/&gt;\n&lt;/property&gt;\n&lt;property name=\"dataSource\" ref=\"dataSourceSecond\"/&gt;\n&lt;property name=\"packagesToScan\" value=\"it.two.app.domain.second\"/&gt;\n&lt;property name=\"jpaProperties\"&gt;\n &lt;props&gt;\n&lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt; \n&lt;prop key=\"hibernate.max_fetch_depth\"&gt;3&lt;/prop&gt;\n&lt;prop key=\"hibernate.jdbc.fetch_size\"&gt;50&lt;/prop&gt;\n&lt;prop key=\"hibernate.jdbc.batch_size\"&gt;10&lt;/prop&gt;\n &lt;/props&gt;\n&lt;/property&gt;\n\n&lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>SOLUTION!!!!!!\nI undestand the problem.\nSimply</p>\n\n<pre><code>&lt;!-- first datasource --&gt;\n &lt;bean id=\"dataSourceFirst\"  class=\"org.apache.commons.dbcp.BasicDataSource\"\n    p:driverClassName=\"com.mysql.jdbc.Driver\" p:url=\"url....\"\n    p:username=\"username\" p:password=\"password\"  /&gt;\n&lt;!-- second datasource --&gt;      \n&lt;bean id=\"dataSourceSecond\"     class=\"org.apache.commons.dbcp.BasicDataSource\"\n     p:driverClassName=\"com.mysql.jdbc.Driver\" p:url=\"url2....\"\n    p:username=\"username2\" p:password=\"password2\"  /&gt;    \n</code></pre>\n"},{"tags":["spring","apache-camel"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":13021332,"title":"How to define a custom CamelBeanPostProcessor with Camel 2.9","body":"<p>Camel uses the <a href=\"http://camel.apache.org/maven/current/camel-spring/apidocs/org/apache/camel/spring/CamelBeanPostProcessor.html\" rel=\"nofollow\">CamelBeanPostProcessor</a> class to support autowiring of camel endpoints, producer templates etc into beans using annotations.</p>\n\n<p>The documentation for the class says:</p>\n\n<blockquote>\n  <p>If you use the  element in your Spring XML then one of\n  these bean post processors is implicitly installed and configured for\n  you. So you should never have to explicitly create or configure one of\n  these instances.</p>\n</blockquote>\n\n<p>but no mention on how to actually provide a custom implementation.</p>\n\n<p>I use Spring and the <code>&lt;camelContext...&gt;</code> way of configuring camel. How do I provide my own implementation of CamelBeanPostProcessor, that way? The reason is I want to override the <code>canPostProcessBean</code> method to exclude a couple of bean types as post processing them causes a problem for us. They will never have any camel features in them, so it is not a problem.</p>\n"},{"tags":["java","spring","autowired"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13085096,"title":"Support for autowiring in a class not instantiated by spring (3)","body":"<p>I realize this should be really basic but I haven't found a second step example after Helloworld</p>\n\n<p>So what I have is:</p>\n\n<p>spring config xml called spring-beans.xml:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xmlns:context=\"http://www.springframework.org/schema/context\"\n   xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans-2.5.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context-2.5.xsd\"&gt;\n\n    &lt;context:annotation-config /&gt;\n    &lt;context:component-scan base-package=\"org\" /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>A spring context initialized class:</p>\n\n<pre><code>public static void main(String[] args) {\n    // initialize Spring\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"META-INF/spring-beans.xml\");\n\n    App app = (App) context.getBean(\"app\");\n    app.run();\n}\n</code></pre>\n\n<p>Relevant details of AppImpl class:</p>\n\n<pre><code>@Component(\"app\")\npublic final class AppImpl implements App{    \n\n    // focus of question: This autowiring works\n    @Autowired\n    private DAO1 dao1;\n\n\n    public void run() {\n        //focus of question: This works as daoclass is instantiated properly                   \n        obj1s = dao1.myFind();            \n\n        badJobs = runJobs(obj1s);\n    }\n\n    private List&lt;Obj1&gt; runJobs(final List&lt;Obj1&gt; obj1s) {        \n        List&lt;Obj1&gt; jobsGoneBad = new ArrayList&lt;Obj1&gt;();\n        for (Obj1 next : obj1s) {\n\n            // focus of question: usage of new keyword, thus not spring container managed?\n            Job job = new JobImpl(next);\n            job.run();\n\n        }\n        return jobsGoneBad;\n    }    \n}\n</code></pre>\n\n<p>Relevant details of JobImpl:</p>\n\n<pre><code>public class JobImpl implements Job {\n\n    private Obj1 obj1;\n\n    // focus of question: can't autowire\n    @Autowired\n    private DAO2 dao2;\n\n    @Override\n    public void run() {\n        //focus of question: opDAO == null - not initialized by @Autowired\n        Obj2 obj2 = dao2.myFind();        \n    }\n\n}\n</code></pre>\n\n<p>Relevant details of DAO1:</p>\n\n<pre><code>@Repository(\"DAO1\") //Focus of question: DAO1 is a repository stereotype\npublic class DAO1 {\n\n    myfind() { ...}\n}\n</code></pre>\n\n<p>Relevant details of DAO2:</p>\n\n<pre><code>@Repository(\"DAO2\") //Focus of question: DAO2 is a repository stereotype\npublic class DAO2 {        \n\n    myfind() { ...}\n}\n</code></pre>\n\n<p>Right, so I initialize the App through a springcontext call and then succesfully instantiate a DAO1 instance through the use of @Autowired.</p>\n\n<p>Then I create an unmanaged instance of Job and want to inject \"singeltonish\" dependencies in that class too by using @Autowired</p>\n\n<p>Both Dao classes are spring stereotypes and scanner finds them fine.</p>\n\n<p>So my question is basically, how should I instantiate the job instance so that I can use @Autowired concept inside it?</p>\n\n<p>If I need a globally accessible applicationcontext, how do I best introduce that?</p>\n"},{"tags":["mysql","hibernate","spring","jdbc","c3p0"],"answer_count":3,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":9508,"score":9,"question_id":1511855,"title":"Reproduce com.mysql.jdbc.exceptions.jdbc4.CommunicationsException with a setup of Spring, hibernate and C3P0","body":"<p>I got this error from the production code:</p>\n\n<blockquote>\n  <p>com.mysql.jdbc.exceptions.jdbc4.CommunicationsException:\n  The last packet successfully received\n  from the server was36940 seconds\n  ago.The last packet sent successfully\n  to the server was 36940 seconds ago,\n  which is longer than the server\n  configured value of 'wait_timeout'.\n  You should consider either expiring\n  and/or testing connection validity\n  before use in your application,\n  increasing the server configured\n  values for client timeouts, or using\n  the Connector/J connection property\n  'autoReconnect=true' to avoid this\n  problem.</p>\n</blockquote>\n\n<p>And now I'm trying to reproduce the problem locally and fix it. I setup the spring context as following:</p>\n\n<pre><code>&lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\"\n    &lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\"\n    destroy-method=\"close\" p:driverClass=\"com.mysql.jdbc.Driver\"\n    p:jdbcUrl=\"jdbc:mysql://localhost:3306/test?userUnicode=yes&amp;amp;characterEncoding=UTF-8&amp;amp\"\n    p:idleConnectionTestPeriod=\"120\" p:initialPoolSize=\"1\" p:maxIdleTime=\"1800\"\n    p:maxPoolSize=\"1\" p:minPoolSize=\"1\" p:checkoutTimeout=\"1000\"\n\n/&gt;\n\n&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;value&gt;\n            hibernate.connection.provider_class = org.hibernate.connection.C3P0ConnectionProvider\n            hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\n            hibernate.default_schema=platform_server_original\n            hibernate.show_sql=false\n        &lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"mappingResources\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;sometables.hbm.xml&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Then I set my mysql wait_timeout to 10 seconds, then run my test, which is basically open a connection, do a query, close it, so it returns to the pool, then sleep the thread for 15 seconds, and then open a connection again, and do a query again, so it will break. However, I got a similar error only:</p>\n\n<blockquote>\n  <p>com.mysql.jdbc.exceptions.jdbc4.CommunicationsException:\n  Communications link failure</p>\n  \n  <p>Last packet sent to the server was 16\n  ms ago.</p>\n</blockquote>\n\n<p>So I wonder are these two errors the same, or they are different? I did some researches, and it seems both errors came down to the same solution: using a property \"testConnectionOnCheckout=true\". However, according to c3p0 doc, this is a very expensive check. It advises the use of \"idleConnectionTestPeriod\", but I'm already setting that to 120 seconds. What value should I use it so it can properly verify the idle connection?</p>\n\n<p>So I'm basically ask two things: \n1. how do I reproduce the error I got in production code? \n2. how do I fix it?</p>\n\n<p>Thanks!</p>\n"},{"tags":["spring","security","session","context","sharing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13081304,"title":"How can we flow user session from one spring application context to another?","body":"<p>How can we flow user session from one spring application context to another?\nBasically I have one spring application representing Web Layer and another spring application representing REST layer.  I want when Web Layer access the REST layer the session containing user info to be available from to Web at REST layer for authentication.</p>\n\n<p>Please suggest.</p>\n\n<p><em>Edit after receiving first ans:</em> <br>\nAt present we do have Web Layer in place along with security and all the other flows.  What we are about to intended is to introduce REST layer.  This REST layer is suppose to be called by present Web Layer and by other APIs.  We do not want to make any changes for Web Layer, but at the same time need security to be placed at REST Layer that should work for Web Layer too when calling REST services.</p>\n"},{"tags":["java","spring","tomcat","tomcat7"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":5530,"score":1,"question_id":6085893,"title":"Why am I getting a 404 requested resource not available error from Tomcat 7","body":"<p>I have recreated this project in Eclipse as many ways as I can think of and continue to get this same error- </p>\n\n<pre><code>HTTP Status 404 - /SpringTest/hello \n\n    type Status report\n\n    message /SpringTest/hello\n\n    description The requested resource (/SpringTest/hello) is not available.\n</code></pre>\n\n<p>Please help me find the issue in my code below.</p>\n\n<p>web.xml - </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n    id=\"WebApp_ID\" version=\"2.5\"&gt;\n    &lt;display-name&gt;Spring3MVC&lt;/display-name&gt;\n    &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;\n            org.springframework.web.servlet.DispatcherServlet\n        &lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>spring-servlet.xml - </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n    &lt;context:component-scan\n        base-package=\"net.viralpatel.spring3.controller\" /&gt;\n\n    &lt;bean id=\"viewResolver\"\n        class=\"org.springframework.web.servlet.view.UrlBasedViewResolver\"&gt;\n        &lt;property name=\"viewClass\"\n            value=\"org.springframework.web.servlet.view.JstlView\" /&gt;\n        &lt;property name=\"prefix\" value=\"/WEB-INF/jsp/\" /&gt;\n        &lt;property name=\"suffix\" value=\".jsp\" /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>Controller - </p>\n\n<pre><code>package net.viralpatel.spring3.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.servlet.ModelAndView;\n\n@Controller\npublic class HelloWorldController {\n\n    @RequestMapping(\"/hello\")\n    public ModelAndView helloWorld() {\n\n        String message = \"Hello World, Spring 3.0!\";\n        return new ModelAndView(\"hello\", \"message\", message);\n    }\n}\n</code></pre>\n\n<p>index.jsp -</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Spring 3.0 MVC Series: Index - ViralPatel.net&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;a href=\"hello\"&gt;Say Hello&lt;/a&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>hello.jsp</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Spring 3.0 MVC Series: Hello World - ViralPatel.net&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    ${message}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>.classpath - </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;classpath&gt;\n&lt;classpathentry kind=\"src\" path=\"src\"/&gt;\n&lt;classpathentry kind=\"con\" path=\"org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk\"&gt;\n    &lt;attributes&gt;\n        &lt;attribute name=\"owner.project.facets\" value=\"java\"/&gt;\n    &lt;/attributes&gt;\n&lt;/classpathentry&gt;\n&lt;classpathentry kind=\"con\" path=\"org.eclipse.jst.server.core.container/org.eclipse.jst.server.tomcat.runtimeTarget/Tomcat\"&gt;\n    &lt;attributes&gt;\n        &lt;attribute name=\"owner.project.facets\" value=\"jst.web\"/&gt;\n    &lt;/attributes&gt;\n&lt;/classpathentry&gt;\n&lt;classpathentry kind=\"con\" path=\"org.eclipse.jst.j2ee.internal.web.container\"/&gt;\n&lt;classpathentry kind=\"con\" path=\"org.eclipse.jst.j2ee.internal.module.container\"/&gt;\n&lt;classpathentry kind=\"output\" path=\"build/classes\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p>.project - </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;projectDescription&gt;\n&lt;name&gt;SpringTest&lt;/name&gt;\n&lt;comment&gt;&lt;/comment&gt;\n&lt;projects&gt;\n&lt;/projects&gt;\n&lt;buildSpec&gt;\n    &lt;buildCommand&gt;\n        &lt;name&gt;org.eclipse.wst.jsdt.core.javascriptValidator&lt;/name&gt;\n        &lt;arguments&gt;\n        &lt;/arguments&gt;\n    &lt;/buildCommand&gt;\n    &lt;buildCommand&gt;\n        &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;\n        &lt;arguments&gt;\n        &lt;/arguments&gt;\n    &lt;/buildCommand&gt;\n    &lt;buildCommand&gt;\n        &lt;name&gt;org.eclipse.wst.common.project.facet.core.builder&lt;/name&gt;\n        &lt;arguments&gt;\n        &lt;/arguments&gt;\n    &lt;/buildCommand&gt;\n    &lt;buildCommand&gt;\n        &lt;name&gt;org.eclipse.wst.validation.validationbuilder&lt;/name&gt;\n        &lt;arguments&gt;\n        &lt;/arguments&gt;\n    &lt;/buildCommand&gt;\n&lt;/buildSpec&gt;\n&lt;natures&gt;\n    &lt;nature&gt;org.eclipse.jem.workbench.JavaEMFNature&lt;/nature&gt;\n    &lt;nature&gt;org.eclipse.wst.common.modulecore.ModuleCoreNature&lt;/nature&gt;\n    &lt;nature&gt;org.eclipse.wst.common.project.facet.core.nature&lt;/nature&gt;\n    &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;\n    &lt;nature&gt;org.eclipse.wst.jsdt.core.jsNature&lt;/nature&gt;\n&lt;/natures&gt;\n&lt;/projectDescription&gt;\n</code></pre>\n\n<p>My Project - </p>\n\n<p><img src=\"http://i.stack.imgur.com/spi70.gif\" alt=\"My Project Explorer\"></p>\n\n<p>Eclipse console output - </p>\n\n<p>May 21, 2011 10:28:11 PM org.apache.catalina.core.AprLifecycleListener init\nINFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\\glassfish3\\jdk\\bin;.;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:/glassfish3/jdk/bin/../jre/bin/client;C:/glassfish3/jdk/bin/../jre/bin;C:/glassfish3/jdk/bin/../jre/lib/i386;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\QuickTime\\QTSystem\\;C:\\glassfish3\\jdk\\bin;C:\\eclipse-jee-helios-SR2-win32\\eclipse;\nMay 21, 2011 10:28:11 PM org.apache.tomcat.util.digester.SetPropertiesRule begin\nWARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:SpringTest' did not find a matching property.\nMay 21, 2011 10:28:11 PM org.apache.coyote.AbstractProtocolHandler init\nINFO: Initializing ProtocolHandler [\"http-bio-8080\"]\nMay 21, 2011 10:28:11 PM org.apache.coyote.AbstractProtocolHandler init\nINFO: Initializing ProtocolHandler [\"ajp-bio-8009\"]\nMay 21, 2011 10:28:11 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 425 ms\nMay 21, 2011 10:28:11 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service Catalina\nMay 21, 2011 10:28:11 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.14\nMay 21, 2011 10:28:11 PM org.apache.catalina.core.ApplicationContext log\nINFO: Initializing Spring FrameworkServlet 'spring'\nMay 21, 2011 10:28:11 PM org.springframework.web.servlet.FrameworkServlet initServletBean\nINFO: FrameworkServlet 'spring': initialization started\nMay 21, 2011 10:28:11 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh\nINFO: Refreshing WebApplicationContext for namespace 'spring-servlet': startup date [Sat May 21 22:28:11 CDT 2011]; root of context hierarchy\nMay 21, 2011 10:28:11 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions\nINFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring-servlet.xml]\nMay 21, 2011 10:28:12 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons\nINFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1e1ec86: defining beans [helloWorldController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,viewResolver]; root of factory hierarchy\nMay 21, 2011 10:28:12 PM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler\nINFO: Mapped URL path [/hello] onto handler 'helloWorldController'\nMay 21, 2011 10:28:12 PM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler\nINFO: Mapped URL path [/hello.*] onto handler 'helloWorldController'\nMay 21, 2011 10:28:12 PM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler\nINFO: Mapped URL path [/hello/] onto handler 'helloWorldController'\nMay 21, 2011 10:28:12 PM org.springframework.web.servlet.FrameworkServlet initServletBean\nINFO: FrameworkServlet 'spring': initialization completed in 545 ms\nMay 21, 2011 10:28:12 PM org.apache.coyote.AbstractProtocolHandler start\nINFO: Starting ProtocolHandler [\"http-bio-8080\"]\nMay 21, 2011 10:28:12 PM org.apache.coyote.AbstractProtocolHandler start\nINFO: Starting ProtocolHandler [\"ajp-bio-8009\"]\nMay 21, 2011 10:28:12 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 1139 ms</p>\n"},{"tags":["json","spring","hibernate","jpa","spring-roo"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":13112921,"title":"Spring Roo, JSON, Detached entity passed to persist","body":"<p>I am new to learning Spring roo. I am getting <code>org.hibernate.PersistentObjectException: detached entity passed to persist</code> exception, when I post JSON for creating entity with <code>MANY_TO_MANY</code> relation. Here are details:</p>\n\n<p>.roo file:</p>\n\n<pre><code>project --topLevelPackage com.test.book --projectName bookmanager --java 6 --packaging JAR\njpa setup --provider HIBERNATE --database HYPERSONIC_IN_MEMORY\n\nentity jpa --class ~.domain.Category\nfield string --fieldName title --sizeMin 2 --notNull\n\nentity jpa --class ~.domain.Book\nfield string --fieldName name --notNull --unique\nfield set --fieldName categories --type ~.domain.Category --cardinality MANY_TO_MANY\n\nfocus --class ~.domain.Category\nfield set --fieldName books --type ~.domain.Book --cardinality MANY_TO_MANY --mappedBy categories\n\nweb mvc setup\nweb mvc all --package ~.web\n\njson all --deepSerialize\nweb mvc json all After project is created I used following script to create entities\n</code></pre>\n\n<p>After project is created I used following script to create entities:</p>\n\n<pre><code>// curl -i -X POST -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d '{title:'cat1'}' http:// localhost: 8080/bookmanager/categorys\n</code></pre>\n\n<p>Worked fine. <code>cat1</code> Category was created sucessfully.</p>\n\n<p>But ...</p>\n\n<pre><code>// curl -i -X POST -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d '{name:'bookname1',categories:[{\"id\":1,\"title\":\"cat1\",\"version\":0}]}' http:// localhost: 8080/bookmanager/books\n</code></pre>\n\n<p>returned following exception:</p>\n\n<pre><code>Data access failure\nSorry, a problem occurred while accessing the database.\n\n\nDetails\norg.hibernate.PersistentObjectException: detached entity passed to persist: com.test.book.domain.Category; nested exception is javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist: com.test.book.domain.Category\norg.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:326)\norg.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect.ajc$afterThrowing$org_springframework_orm_jpa_aspectj_JpaExceptionTranslatorAspect$1$18a1ac9(JpaExceptionTranslatorAspect.aj:15)\ncom.test.book.domain.Book_Roo_Jpa_ActiveRecord.ajc$interMethod$com_test_book_domain_Book_Roo_Jpa_ActiveRecord$com_test_book_domain_Book$persist(Book_Roo_Jpa_ActiveRecord.aj:43)\ncom.test.book.domain.Book.persist(Book.java:1)\ncom.test.book.domain.Book_Roo_Jpa_ActiveRecord.ajc$interMethodDispatch1$com_test_book_domain_Book_Roo_Jpa_ActiveRecord$com_test_book_domain_Book$persist(Book_Roo_Jpa_ActiveRecord.aj)\ncom.test.book.web.BookController_Roo_Controller_Json.ajc$interMethod$com_test_book_web_BookController_Roo_Controller_Json$com_test_book_web_BookController$createFromJson(BookController_Roo_Controller_Json.aj:44)\ncom.test.book.web.BookController.createFromJson(BookController.java:1)\nsun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\njava.lang.reflect.Method.invoke(Method.java:597)\norg.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)\norg.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)\norg.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\norg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\norg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\norg.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\norg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:641)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\norg.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\norg.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\norg.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\norg.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\ncom.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:88)\norg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\norg.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)\norg.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)\norg.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\njava.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\njava.lang.Thread.run(Thread.java:662)\n</code></pre>\n\n<p>When I create objects using UI generated by spring roo, it works fine but it doesn't when I attempt same with JSON. I think I may not be passing json object in correct format. Please can anyone tell me how to post JSON object to create new Book entity associated with a specific Categories.</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13113635,"title":"How to modify a record displaying a form in a view","body":"<p>I am trying to accomplish the following:</p>\n\n<p>I have a list of fruits, that are stored in a table with two columns \"id\", \"name\" and \"color\".\nNext to each fruit, I got a \"modify\" button. What I want to do here is being able to display the fruit in a form and being able to modify the \"name\" and \"color\" attributes.</p>\n\n<p>I don't understand why, but when I click the \"modify\" button, the form is being displayed but the properties of the fruits that I clicked are not.</p>\n\n<p>Here is the code:</p>\n\n<p>Controller:</p>\n\n<pre><code>@RequestMapping(value = \"/fruit/modify\", method = RequestMethod.POST)\n    public String modifyFruit( @RequestParam(\"id\") int id, ModelMap model) {\n        Fruit fruit = fruitManager.getFruitById(id);\n        model.addAttribute(\"fruit\", fruit);\n        return \"redirect:/modifyfruit\";\n    }\n\n    @RequestMapping(value = \"/modifyfruit\", method = RequestMethod.GET)\n    public String showAddForm(@ModelAttribute(\"fruit\") Fruit fruit, ModelMap model) {\n        model.addAttribute(\"fruit\", fruit);\n        return \"/secure/modifyfruit\";\n    }\n</code></pre>\n\n<p>Here is the modify button that I am displaying next to each fruit in my list:</p>\n\n<pre><code>&lt;td&gt;\n    &lt;c:url var=\"modifyUrl\" value=\"/fruit/modify.html\"/&gt;    \n    &lt;form id=\"${fruitForm}\" action=\"${modifyUrl}\" method=\"POST\"&gt;\n        &lt;input id=\"id\" name=\"id\" type=\"hidden\" value=\"${fruit.id}\"/&gt;\n        &lt;input type=\"submit\" value=\"modify\"/&gt;\n    &lt;/form&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>Here is the modifyfruit.jsp that I am using to display the form that I want to populate:</p>\n\n<pre><code>&lt;body&gt;\n    &lt;form:form method=\"post\" commandName=\"fruit\"&gt;\n        &lt;table width=\"95%\" bgcolor=\"f8f8ff\" border=\"0\" cellspacing=\"0\"\n            cellpadding=\"5\"&gt;\n            &lt;tr&gt;\n                &lt;td align=\"right\"&gt;Name:&lt;/td&gt;\n                &lt;td&gt;&lt;form:input path=\"title\" value=\"${fruit.name}\"/&gt;&lt;/td&gt;   \n            &lt;/tr&gt;\n&lt;tr&gt;\n                &lt;td align=\"right\"&gt;Color:&lt;/td&gt;\n                &lt;td&gt;&lt;form:input path=\"color\" value=\"${fruit.color}\"/&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n        &lt;br&gt;\n        &lt;input type=\"submit\" align=\"center\" value=\"Post Ad\"&gt;\n    &lt;/form:form&gt;\n\n&lt;/body&gt;\n</code></pre>\n"},{"tags":["java","eclipse","spring","jre","sts-springsourcetoolsuite"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":1983,"score":1,"question_id":4304791,"title":"how do you get a jre installed in eclipse/springsource toolsuite?","body":"<p>For some reason, when I go to add a JRE to eclipse/sts and give it the location of the JDK 1.6.0_22, it says:</p>\n\n<p><strong>Target is not a JDK root. System library was not found.</strong></p>\n\n<p>I am giving it this folder, which is accurate and works for everything else:\n<strong>/opt/jdk1.6.0_22</strong></p>\n\n<p>But it <em>is</em> the jdk root. IDEA thinks so. Every other APP on the planet thinks so too. Aside: God, I really hate eclipse. This is why I never use it, because nothing works like it's supposed to. I just want to try Spring Insight out, so that's why I am using STS...</p>\n\n<p>I am on Ubuntu 10.10 if that makes any difference.</p>\n\n<p>Please help. I think I can finally get this to work if I can just get STS/Eclipse to stop being stupid :/</p>\n"},{"tags":["java","spring","mongodb"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":432,"score":3,"question_id":11684673,"title":"spring-mongo-1.0.xsd error","body":"<p>I am getting the following error and not been able to solve it n googling was not fruitful either. please help.</p>\n\n<pre><code>Referenced file contains errors (http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd). For more \n information, right click on the message in the Problems View and select \"Show Details...\"\n</code></pre>\n\n<p>this is my code.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:mongo=\"http://www.springframework.org/schema/data/mongo\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/data/mongo\n    http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd\n    http://www.springframework.org/schema/context \n    http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n    &lt;!--   replica-set=\"localhost:27017,localhost:27018\" --&gt;\n    &lt;context:annotation-config /&gt;\n    &lt;mongo:repositories base-package=\"com.kensho.dms.*\" /&gt;\n    &lt;mongo:jmx/&gt;\n    &lt;mongo:mongo host=\"192.168.55.2\" port=\"27017\" /&gt;\n    &lt;mongo:db-factory dbname=\"kenshodb\" mongo-ref=\"mongo\" /&gt;\n    &lt;bean id=\"mongoTemplate\" class=\"org.springframework.data.mongodb.core.MongoTemplate\"&gt;\n        &lt;constructor-arg name=\"mongo\" ref=\"mongo\"/&gt;\n        &lt;constructor-arg name=\"databaseName\" value=\"kenshodb\"/&gt;\n     &lt;/bean&gt;\n     &lt;bean id=\"mongoLoggedInUserDAO\" class=\"com.kensho.nosql.MongoUserDAOImpl\"  /&gt;\n\n\n&lt;/beans&gt;       \n</code></pre>\n\n<p>I tyried many things. i feel its some dependency problem. Please help.</p>\n"},{"tags":["spring","hibernate","maven","hbm2ddl","hibernate3-maven-plugin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13113115,"title":"Maven + Spring + Hibernate: hibernate3-maven-plugin hbm2ddl fails for reason \"Caused by: java.lang.NullPointerException\"","body":"<p>I had to downgrade Hibernate from version 4 to version 3 (3.3.2.GA to be specific), due to current lack of support for Hibernate 4 within Spring, and now the project fails to build when it attempts to generate schema with hbm2ddl. The error is too vague, and Google-ing it hasn't yielded much.</p>\n\n<p>Here's my pom.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"\n         http://maven.apache.org/POM/4.0.0\n         http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;example&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Spring + Hibernate Example&lt;/name&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;spring.version&gt;3.1.2.RELEASE&lt;/spring.version&gt;\n        &lt;hibernate.version&gt;3.3.2.GA&lt;/hibernate.version&gt;\n        &lt;java.version&gt;1.6&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;extensions&gt;\n            &lt;extension&gt;\n                &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n                &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n                &lt;version&gt;2.0.0&lt;/version&gt;\n            &lt;/extension&gt;\n            &lt;extension&gt;\n                &lt;groupId&gt;log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n                &lt;version&gt;1.2.17&lt;/version&gt;\n            &lt;/extension&gt;\n        &lt;/extensions&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.0.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;!-- Run \"mvn hibernate3:hbm2ddl\" to generate schema --&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate3-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0&lt;/version&gt;\n\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;generate-ddl&lt;/id&gt;\n                        &lt;phase&gt;process-classes&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;hbm2ddl&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n\n                &lt;configuration&gt;\n                    &lt;hibernatetool destdir=\"${project.build.directory}/generated\"&gt;\n                        &lt;annotationConfiguration configurationfile=\"hibernate.cfg.xml\"/&gt;\n\n                        &lt;hbm2ddl export=\"false\" create=\"true\" update=\"true\"\n                                 format=\"format\" outputfilename=\"schemaDiff.ddl\"/&gt;\n\n                    &lt;/hibernatetool&gt;\n                &lt;/configuration&gt;\n\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- Inversion of Control: Spring Dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;!-- Exclude the problematic commons-logging --&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Object Relational Mapping: Hibernate --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.transaction&lt;/groupId&gt;\n            &lt;artifactId&gt;jta&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Hibernate Annotations Dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-annotations&lt;/artifactId&gt;\n            &lt;version&gt;3.5.6-Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0.ga&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Database: HSQLDB --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Connection Pool: C3P0 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;c3p0&lt;/groupId&gt;\n            &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Second-level caching: Ehcache --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ehcache&lt;/groupId&gt;\n            &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n            &lt;version&gt;1.2.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Logging: SLF4j &amp; Log4J --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n            &lt;version&gt;1.6.6&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.6.6&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;1.6.6&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Testing: JUnit --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.10&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Testing: Spring --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>Running</p>\n\n<pre><code>mvn hibernate3:hbm2ddl\n</code></pre>\n\n<p>fails with</p>\n\n<pre><code>[ERROR] Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl\n(default-cli) on project example: There was an error creating the AntRun task.\nNullPointerException -&gt; [Help 1]\n</code></pre>\n\n<p>The full stack trace is:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project example: There was an error creating the AntRun task. NullPointerException -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (default-cli) on project example: There was an error creating the AntRun task.\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)\n    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)\n    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)\nCaused by: org.apache.maven.plugin.MojoExecutionException: There was an error creating the AntRun task.\n    at org.codehaus.mojo.hibernate3.AbstractHibernateMojo.execute(AbstractHibernateMojo.java:84)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)\n    ... 19 more\nCaused by: java.lang.NullPointerException\n    at org.codehaus.plexus.configuration.DefaultPlexusConfiguration.add(DefaultPlexusConfiguration.java:174)\n    at org.codehaus.plexus.configuration.DefaultPlexusConfiguration.addChild(DefaultPlexusConfiguration.java:150)\n    at org.codehaus.mojo.hibernate3.util.PlexusConfigurationUtils.setHibernateConfiguration(PlexusConfigurationUtils.java:289)\n    at org.codehaus.mojo.hibernate3.util.PlexusConfigurationUtils.parseHibernateTool(PlexusConfigurationUtils.java:67)\n    at org.codehaus.mojo.hibernate3.AbstractHibernateToolMojo.getConfiguration(AbstractHibernateToolMojo.java:60)\n    at org.codehaus.mojo.hibernate3.AbstractHibernateMojo.execute(AbstractHibernateMojo.java:76)\n    ... 21 more\n</code></pre>\n\n<p>Hopefully someone can shed some light on this!</p>\n"},{"tags":["java","spring","web","applet"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13112512,"title":"Integrate Applet to Spring web application","body":"<p>sorry about my english.</p>\n\n<p>I have a problem and i cant find any solution. I have a spring web application and im trying integrate an applet to a jsp page.</p>\n\n<p>Here is the code where i call the applet.</p>\n\n<pre><code>    &lt;object type=\"application/x-java-applet;version=1.6\" width=\"200\" height=\"200\" title=\"Java\"&gt;&lt;param name=\"code\" value=\"cl.facele.sign.applet.WebSignApplet.class\"&gt;\n    &lt;param name=\"archive\" value=\"/frontend-1.4/lib/fea-signer-0.94.jar, /frontend-1.4/lib/httpcore-4.0.1.jar, /frontend-1.4/lib/httpmime-4.0.jar, /frontend-1.4/lib/apache-mime4j-0.6.jar, /frontend-1.4/lib/commons-codec-1.3.jar, /frontend-1.4/lib/httpclient-4.0.jar, /frontend-1.4/lib/commons-logging-1.1.1.jar\"&gt;&lt;param name=\"XML_IDS\" value=\"{xmlIds}\"&gt;\n    &lt;param name=\"DOCS_IDS\" value=\"{docsIds}\"&gt;&lt;param name=\"WS_URL_SERVER\" value=\"http://localhost:8080/efactoryapp\"&gt;\n    &lt;param name=\"WS_GET_DOC_METHOD\" value=\"/services.htm?faction=getDocument&amp;amp;id=\"&gt;\n    &lt;param name=\"WS_POST_DOC_METHOD\" value=\"/services.htm?        faction=addDocumentDeclarado\"&gt;\n    &lt;param name=\"urlRefreshTarget\" value=\"\"&gt;Para utilizar la componente de firma electrónica debe instalar plugin &lt;a href=\"http://java.sun.com/update/1.6.0/jinstall-6u22-windows-i586.cab\"&gt;Java v.1.6&lt;/a&gt;\n    &lt;/object&gt;\n</code></pre>\n\n<p>When the jsp page is loaded the JVM console show me this error.</p>\n\n<pre><code>    java.lang.ClassFormatError: Incompatible magic value 218762506 in class file cl/facele/sign/applet/WebSignApplet\nat java.lang.ClassLoader.defineClass1(Native Method)\nat java.lang.ClassLoader.defineClassCond(Unknown Source)\nat java.lang.ClassLoader.defineClass(Unknown Source)\nat java.security.SecureClassLoader.defineClass(Unknown Source)\nat sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)\nat sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)\nat sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)\nat sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)\nat java.lang.ClassLoader.loadClass(Unknown Source)\nat sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)\nat sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)\nat sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)\nat java.lang.Thread.run(Unknown Source)\n    Excepción: java.lang.ClassFormatError: Incompatible magic value 218762506 in class file cl/facele/sign/applet/WebSignApplet\n    java.lang.ClassFormatError: Incompatible magic value 218762506 in class file         cl/facele/sign/applet/WebSignApplet\nat java.lang.ClassLoader.defineClass1(Native Method)\nat java.lang.ClassLoader.defineClassCond(Unknown Source)\nat java.lang.ClassLoader.defineClass(Unknown Source)\nat java.security.SecureClassLoader.defineClass(Unknown Source)\nat sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)\nat sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)\nat sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)\nat sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)\nat java.lang.ClassLoader.loadClass(Unknown Source)\nat sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)\nat sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)\nat sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)\nat java.lang.Thread.run(Unknown Source)\n    Excepción: java.lang.ClassFormatError: Incompatible magic value 218762506 in class file cl/facele/sign/applet/WebSignApplet\n</code></pre>\n\n<p>Thank you for any help!</p>\n\n<p>UPDATE:</p>\n\n<p>If this help, im implementing my application and my applet with eclipse and tomcat.</p>\n"},{"tags":["java","mysql","spring","hibernate","java-ee"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":11846144,"title":"hibernate not able to reconnect to the mysql DB","body":"<p>In my spring-hibernate application, we are using <code>org.apache.tomcat.jdbc.pool.DataSource</code> for connection pooling. When we start the server, we are able to see the connection to the DB is established and after the mysql service is stopped the server starts throwing error saying that the connection is lost. When the mysql service is started again, should we have to restart the server to reestablish the connections to the DB? Cuz even after providing autoReconnect=true parameter, the application is not able to establish connection to the DB.</p>\n"},{"tags":["hibernate","spring","tomcat","jpa","entitymanager"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":670,"score":0,"question_id":9203122,"title":"Spring JPA Read Write splitting - have transactional use the write datasource","body":"<p>I have an application that uses Hibernate/JPA, with Spring and Jersey. In my application context I set the data source, define an entity manager factory, set the transaction manager with that entity manger factory, and have various service methods annotated with the transactional annotation, so I also have the tx:annotation-driven definition to wire in my transaction manager where needed. This setup works great, I've been able to read and right just fine. I would like to move to a DB setup where I have a Master with multiple slaves (MySQL). So I want all the methods annotated with transactional to use a data source pointing to the master db server, and all others to use a connection pool of the slaves. </p>\n\n<p>I've tried creating two different datasources, with two different entity manager factories, and two different persistent units - ugly to say the least. I tried a MySQL Proxy but we had more problems with that then we need. The connection pooling is handled in the servlet container already. Could I implement something in Tomcat that reads the transaction and directs it to the right database server, or is there a way I could get all those methods annotated with the transactional annotation to use a particular datasource?</p>\n"},{"tags":["java","hibernate","spring","books"],"answer_count":5,"favorite_count":11,"up_vote_count":16,"down_vote_count":0,"view_count":22067,"score":16,"question_id":460739,"title":"What is the best book to learn Spring and Hibernate","body":"<p>I would like to learn Spring and Hibernate in an efficient way.</p>\n\n<p>Next weeks, I will have a lot of time to read but I will not be in front of a computer (so it will difficult to read online tutorials for example).</p>\n\n<p>So, my question is : what is the best book to learn Spring and Hibernate ?</p>\n\n<p>Of course, I know that I'll have to practice a little when I'll progress further in my reading.</p>\n"},{"tags":["java","spring","spring-mvc","spring-webflow-2"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":113,"score":5,"question_id":12750618,"title":"Spring webflow full query string in EL","body":"<p>In short, how can I get the full query string using EL in a webflow view jsp?  This is what I am trying to do:</p>\n\n<pre><code>&lt;span class=\"forgot-password\"&gt;\n  &lt;a href=\"forgotPasswordRequest?&lt;%=request.getQueryString() %&gt;\"&gt;\n    &lt;spring:message code=\"screen.welcome.link.forgotPassword\" /&gt;\n  &lt;/a&gt;\n&lt;/span&gt;\n</code></pre>\n\n<p>Except I would like to use EL instead of the scriptlet <code>&lt;%=request.getQueryString() %&gt;</code>.  It appears easy enough to get any individual parameter using <code>${param.someParameterName}</code>, but I want the whole thing.  More specifically I am using <a href=\"http://www.jasig.org/cas\" rel=\"nofollow\">CAS</a> as an SSO provider.  In order to authenticate, an app would redirect its login to CAS with a query string containing the parameter <code>service</code> that is the URL to return to after successful authentication.  Something like this:</p>\n\n<pre><code>?service=http%3A%2F%2Fmysite.com%3A9080%2Fwelcome\n</code></pre>\n\n<p>My CAS login page has a link for a forgotten password webflow.  I need to propagate that service parameter to that other webflow.  So I could do something like this:</p>\n\n<pre><code>&lt;span class=\"forgot-password\"&gt;\n  &lt;a href=\"forgotPasswordRequest?service=${param.service}\"&gt;\n    &lt;spring:message code=\"screen.welcome.link.forgotPassword\" /&gt;\n  &lt;/a&gt;\n&lt;/span&gt;\n</code></pre>\n\n<p>But then I lose all the URL escaping.  Furthermore, if there are other parameters that I want to preserve in the future, they would be lost as well.</p>\n\n<p>The scriptlet currently works, but its ugly and I don't like having code (since this is true java code) in my presentation even though it is trivial.  EL is certainly a much more elegant solution.</p>\n\n<p>I poked around all of the <em>Special EL variables</em> listed in the <a href=\"http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch04s04.html\" rel=\"nofollow\">spring documentation</a>, but was still unable to come up with a way to get the full queryString.</p>\n\n<p><em>-------------------------------- UPDATE --------------------------------</em></p>\n\n<p>Ok, so I am making some ground...  Turns out that the <code>ExternalContext</code> interface has a <code>getNativeRequest()</code> which is the actual <code>HttpServletRequest</code> object.  From there I can get the full query string thusly:</p>\n\n<pre><code>externalContext.getNativeRequest().getQueryString()\n</code></pre>\n\n<p>So now I assume that since there is a <em>Special EL variable</em> called externalContext, i would just do this:</p>\n\n<pre><code>${externalContext.nativeRequest.queryString}\n</code></pre>\n\n<p>right?  Wrong!  It turns out the <code>externalContext</code> variable is not available from the JSP page.  Anyone know why?  However, there is also <code>flowRequestScope</code>, which is available to the JSP and has a <code>getExternalContext</code> method, so now I can do this:</p>\n\n<pre><code>${flowRequestScope.externalContext.nativeRequest.queryString}\n</code></pre>\n\n<p>Cool, that works... But why is it necessary?  Why are only some of the <em>Special EL variables</em> pushed to the JSP page, and why do some of them change (<code>viewScope</code> seems to have all of its values promoted up a level to root so viewScope.commandName is referenced as ${commandName} in the JSP EL)?  I must be missing something fundamental in the way WebFlow works.  Can someone point me in the right direction?</p>\n"},{"tags":["java","mysql","spring","stored-procedures","spring-mvc"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13111628,"title":"Passing a List<String> to a MYSQL Stored Procedure in Java Spring?","body":"<p>Is it possible to call this in Spring using SimpleJdbcCall and pass a List as the variable?</p>\n\n<p>MYSQL</p>\n\n<pre><code>DELIMITER //\nCREATE PROCEDURE example(IN list ?)\n    BEGIN\n        SELECT * FROM exampleTable WHERE exampleColumn IN (list)\n    END //\n</code></pre>\n\n<p>Java</p>\n\n<pre><code>SimpleJdbcCall jdbcCall = new SimpleJdbcCall(source).withProcedureName(\"example\");\nSqlParameterSource in = new MapSqlParameterSource().\n                              addValue(?, ?);\nMap&lt;String, Object&gt; out = jdbcCall.execute(in);\n</code></pre>\n"},{"tags":["spring","jsf","el"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13025144,"title":"Possibilities of resolving backing beans in JSF and Spring","body":"<p>I use <code>org.springframework.web.jsf.el.SpringBeanFacesELResolver</code> in my JSF + Spring application. Every backing bean needs an interface to be resolved. I guess that it's interface type of dependency injection.</p>\n\n<pre><code>#{bean.text}\n\npublic interface IBean {\n    String getText();\n}\n\n@Named\n@Scope(\"session\")\npublic class Bean implements IBean {\n    public String getText() {\n        return \"Hello World!\";\n    }\n}\n</code></pre>\n\n<p>I would like to get rid of the interface. It's kind of bureaucracy for me. Is it possible?</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13088746,"title":"Difference between an error code and a message code as far as Spring validation is concerned?","body":"<p>I am in reference to the following method from <code>BindingResult</code>:</p>\n\n<p><a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/BindingResult.html#resolveMessageCodes%28java.lang.String,%20java.lang.String%29\" rel=\"nofollow\"><code>BindingResult.html#resolveMessageCodes(java.lang.String, java.lang.String)</code></a></p>\n\n<p>I am trying to figure out the difference between an error code and a message code. Can someone please provide an example, especially one that would illustrate <strong>why there could be several message codes for a given error code</strong>?</p>\n"},{"tags":["java","spring","maven","pom"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13110936,"title":"How to find appropriate entry for a pom online?","body":"<p>I am trying to find an appropriate <code>pom</code> entry for</p>\n\n<pre><code>org.springframework.web.servlet-3.1.2.RELEASE.jar\n</code></pre>\n\n<p>Got to web, but nothing further</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n    &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Ultimately i need to import </p>\n\n<pre><code>import org.springframework.web.servlet.ModelAndView;\n</code></pre>\n\n<p>But am unable to locate this jar in <a href=\"http://mvnrepository.com/artifact/org.springframework/\" rel=\"nofollow\">here</a>. Found everything i needed but servlet. </p>\n\n<p>Please assist</p>\n"},{"tags":["java","spring","spring-mvc","twitter","spring-social"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13110813,"title":"Overriding default Redirect View in Spring Social","body":"<p>I'm trying to override the default behavior of Spring Social to redirect to \"connect/{providerId}Connected\" once connected to a provider (Twitter, Facebook etc).</p>\n\n<p>So I'm trying to override the default behavior by overriding the method <strong>protected java.lang.String connectedView(java.lang.String providerId)</strong></p>\n\n<p>So I've subclassed ConnectController and tried overriding:</p>\n\n<pre><code>@Controller\npublic class CustomConnectController extends ConnectController{\n\n    @Inject\n    public CustomConnectController(\n            ConnectionFactoryLocator connectionFactoryLocator,\n            ConnectionRepository connectionRepository) {\n        super(connectionFactoryLocator, connectionRepository);\n    }\n\n\n    @Override\n    protected String connectedView(String providerId){\n        //Do some logic\n\n        return \"redirect:/foo/bar;\n    }\n\n}\n</code></pre>\n\n<p>See documentation of the controller class: <a href=\"http://static.springsource.org/spring-social/docs/1.0.x/api/org/springframework/social/connect/web/ConnectController.html\" rel=\"nofollow\">http://static.springsource.org/spring-social/docs/1.0.x/api/org/springframework/social/connect/web/ConnectController.html</a></p>\n\n<p>But I get the following error:</p>\n\n<blockquote>\n  <p>Caused by: java.lang.IllegalStateException: Ambiguous mapping found.\n  Cannot map\n  'org.springframework.social.connect.web.ConnectController#0' bean\n  method  public org.springframework.web.servlet.view.RedirectView\n  org.springframework.social.connect.web.ConnectController.connect(java.lang.String,org.springframework.web.context.request.NativeWebRequest)\n  to\n  {[/connect/{providerId}],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}:\n  There is already 'customConnectController' bean method public\n  org.springframework.web.servlet.view.RedirectView\n  org.springframework.social.connect.web.ConnectController.connect(java.lang.String,org.springframework.web.context.request.NativeWebRequest)\n  mapped.</p>\n</blockquote>\n\n<p>Can anyone please guide.\nMy requirement is as follows:\n1. After user connects social account (Twitter, Facebook etc)\n2. Do some business logic\n3. Redirect to /foo/bar page</p>\n\n<p>Please help.</p>\n"},{"tags":["java","spring","jaxb2"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1430,"score":3,"question_id":9067703,"title":"Specify a package instead of \"classesToBeBound\" for spring Jaxb2Marshaller","body":"<p>I am trying to use Jaxb2Marshaller to marshal a set of java classes using spring. I know this can be done using the following code</p>\n\n<pre><code>&lt;bean id=\"jaxbMarshaller\" class=\"org.springframework.oxm.jaxb.Jaxb2Marshaller\"&gt;\n    &lt;property name=\"classesToBeBound\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;com.example.test1&lt;/value&gt;\n            &lt;value&gt;com.example.test2&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;  \n</code></pre>\n\n<p>What I would like to do is instead of specifying a list of classes, I would like to specify just the package name containing all the classes ( in the above case com.example).</p>\n\n<p>Does anyone know of a way to do this, or any other way which does not require me to list all the classes. any help would be appreciated !</p>\n\n<p>Thanks.</p>\n"},{"tags":["spring","hibernate","ehcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13083987,"title":"Spring3.1 and hibernate4 + eh-cache","body":"<p>I am using <strong>Spring3.1</strong> and <strong>hibernate4</strong> for my web application. Here i am trying for <strong>eh cache</strong> but getting some error, here is my configuration that i have used:- </p>\n\n<p><strong>dispatcher-servlet.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns:cache=\"http://www.springframework.org/schema/cache\"\n    http://www.springframework.org/schema/cache\n    http://www.springframework.org/schema/cache/spring-cache-3.1.xsd\"&gt;\n\n    &lt;cache:annotation-driven /&gt;\n    &lt;bean id=\"defaultEhCacheManager\"\n        class=\"org.springframework.cache.ehcache.EhCacheManagerFactoryBean\"\n        p:config-location=\"/WEB-INF/ehcache.xml\" p:shared=\"false\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"cacheManager\" class=\"org.springframework.cache.ehcache.EhCacheCacheManager\"&gt;\n        &lt;property name=\"cacheManager\" ref=\"ehcache\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;cache:annotation-driven cache-manager=\"cacheManager\" /&gt;\n    &lt;bean id=\"cacheManager\"&gt;\n        &lt;property name=\"cacheManager\" ref=\"ehcache\" /&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"ehcache\"\n        class=\"org.springframework.cache.ehcache.EhCacheManagerFactoryBean\"&gt;\n        &lt;property name=\"configLocation\" value=\"/WEB-INF/ehcache.xml\" /&gt;\n    &lt;/bean&gt; \n</code></pre>\n\n<p><strong>ehcache.xml</strong></p>\n\n<pre><code>&lt;cache name=\"sampleCache1\" \n    maxElementsInMemory=\"10000\"\n    eternal=\"false\"\n    overflowToDisk=\"true\"\n    timeToIdleSeconds=\"300\"\n    timeToLiveSeconds=\"600\"&gt;\n&lt;/cache&gt;\n</code></pre>\n\n<p>and here is the dependency:-</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\n    &lt;artifactId&gt;ehcache-core&lt;/artifactId&gt;\n    &lt;version&gt;2.5.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I am getting the following error:-- </p>\n\n<p><strong>SEVERE: Context initialization failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cache.interceptor.CacheInterceptor#0': Cannot resolve reference to bean 'cacheManager' while setting bean property 'cacheManager';</strong> nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cacheManager' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'ehcache' while setting bean property 'cacheManager'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ehcache' is defined\n    at </p>\n\n<p>Please suggest any solution ASAP.</p>\n\n<p>Thanks In Advance</p>\n"},{"tags":["spring","aop"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13090574,"title":"selective AOP invocation","body":"<p>I have a class on which there are several methods and the interface for the class looks something like this </p>\n\n<p>Some main program calls the method doSomeOperation which in turn calls the other methods in the class based on business rule. I have a situation where I have to populate some stats after some of the methods in this class is invoked.</p>\n\n<p>For example, after calling doSomeOperation which in turn calls say doOps1, populate some stats table on the database indicating how many records were inserted/updated/deleted etc in specific table and how much time it took etc by doOps1 method. I am trying to use Spring AOP for this purpose. However the issue that I am facing is that the intended code is not getting invoked.</p>\n\n<p><strong>Here is the full code (for sample purpose only)</strong></p>\n\n<pre><code> package spring.aop.exp;\n\npublic interface Business {\n    void doSomeOperation();        \n    void doOps1();\n}\n</code></pre>\n\n<hr>\n\n<pre><code>package spring.aop.exp;\n\npublic class BusinessImpl implements Business {\n\n    public void doSomeOperation() {\n            System.out.println(\"I am within doSomeOperation\");\n            try {\n                    Thread.sleep(200);\n            } catch (InterruptedException e) {\n                    System.out.println(\"Thread interrupted\");\n            }\n            System.out.println(\"Done with sleeping.\");\n            doOps1();\n    }\n\n    public void doOps1() {\n        System.out.println(\"within Ops1\");\n    }               \n\n}\n</code></pre>\n\n<hr>\n\n<p><strong>The aspect class</strong></p>\n\n<pre><code>package spring.aop.exp;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.After;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\n\n@Aspect\npublic class BusinessProfiler {\n\n        @Pointcut(\"execution(* doOps1*(..))\")\n        public void businessMethods1() { }\n\n\n        @After(\"businessMethods1()\")\n         public void profile1() throws Throwable {\n            //this method is supposed to populate the db stats and other statistics\n\n            System.out.println(\"populating stats\");\n\n        }\n\n}\n</code></pre>\n\n<p><strong>-- the main class</strong></p>\n\n<pre><code>package spring.aop.exp;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class SpringAOPDemo {\n\n        /**\n         * @param args\n         */\n        public static void main(String[] args) {\n                ApplicationContext context = new ClassPathXmlApplicationContext(\n                                \"ExpAOP.xml\");\n                Business bc = (Business) context.getBean(\"myBusinessClass\");\n                bc.doSomeOperation();                   \n        }\n\n}\n</code></pre>\n\n<p><em><strong></em>*and the configuration file***</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:aop=\"http://www.springframework.org/schema/aop\"\n        xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\nhttp://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\"&gt;\n\n        &lt;!-- Enable the @AspectJ support --&gt;\n        &lt;aop:aspectj-autoproxy /&gt;\n\n        &lt;bean id=\"businessProfiler\" class=\"spring.aop.exp.BusinessProfiler\" /&gt;\n        &lt;bean id=\"myBusinessClass\" class=\"spring.aop.exp.BusinessImpl\" /&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>On running the main program, I am getting the output (and it is not calling profile1 rom the Aspect class - BusinessProfiler). however if I directly call the doOps1 from main class then the aspect method gets invoked. I would like to know if aspect is supposed to work if only called from the main method and not otherwise.</p>\n\n<blockquote>\n  <p>Oct 26, 2012 11:56:19 AM\n  org.springframework.context.support.AbstractApplicationContext\n  prepareRefresh INFO: Refreshing\n  org.springframework.context.support.ClassPathXmlApplicationContext@be2358:\n  display name\n  [org.springframework.context.support.ClassPathXmlApplicationContext@be2358];\n  startup date [Fri Oct 26 11:56:19 EDT 2012]; root of context hierarchy\n  Oct 26, 2012 11:56:19 AM\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader\n  loadBeanDefinitions INFO: Loading XML bean definitions from class path\n  resource [ExpAOP.xml] Oct 26, 2012 11:56:19 AM\n  org.springframework.context.support.AbstractApplicationContext\n  obtainFreshBeanFactory INFO: Bean factory for application context\n  [org.springframework.context.support.ClassPathXmlApplicationContext@be2358]:\n  org.springframework.beans.factory.support.DefaultListableBeanFactory@1006d75\n  Oct 26, 2012 11:56:19 AM\n  org.springframework.beans.factory.support.DefaultListableBeanFactory\n  preInstantiateSingletons INFO: Pre-instantiating singletons in\n  org.springframework.beans.factory.support.DefaultListableBeanFactory@1006d75:\n  defining beans\n  [org.springframework.aop.config.internalAutoProxyCreator,businessProfiler,myBusinessClass];\n  root of factory hierarchy </p>\n</blockquote>\n\n<p><em><strong></em>*I am within doSomeOperation</strong> \n<strong>Done with sleeping.</strong> \n<strong>within Ops1***</strong></p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13108797,"title":"Exception using spring3","body":"<p>I have developed an application using Spring 3 and Hibernate. For Testing my DAO I use Junit and when I run the test I get an exception.</p>\n\n<p>This is part of my application context.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"&gt;\n&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"/&gt;\n    &lt;property name=\"url\" value=\"jdbc:mysql://localhost/register\"/&gt;\n    &lt;property name=\"username\" value=\"root\"/&gt;\n&lt;/bean&gt;\n\n\n&lt;bean id=\"sessionFactory\" \nclass=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;property name=\"configurationClass\" value=\"org.hibernate.cfg.AnnotationConfiguration\"/&gt; \n\n    &lt;property name=\"annotatedClasses\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;com.model.Register&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n\n\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n            &lt;prop key=\"hbm2ddl.auto\"&gt;update&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>When I run my test I get the following exception:</p>\n\n<blockquote>\n  <p>org.springframework.beans.factory.BeanDefinitionStoreException: Line 10 in XML document from class path resource [application-context.xml] is invalid; nested exception is org.xml.sax.SAXParseException: L'élément racine de document \"beans\" doit correspondre à la racine DOCTYPE \"null\". org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 105; L'élément racine de document \"beans\" doit correspondre à la racine DOCTYPE \"null\".  at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source) </p>\n</blockquote>\n"},{"tags":["oracle","spring","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":13108616,"title":"Oracle 11g DBCP The Network Adapter could not establish the connection","body":"<p>I'm traied to connect oracle with Spring and DBCP.</p>\n\n<pre><code>    &lt;bean id=\"dataSource\" class=\"org.apache.tomcat.dbcp.dbcp.BasicDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"oracle.jdbc.OracleDriver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:oracle:thin:@localhost:1521/ORCL\" /&gt;\n        &lt;property name=\"username\" value=\"PMSYSDB\" /&gt;\n        &lt;property name=\"password\" value=\"********\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>but I get: <code>Could not get JDBC Connection; nested exception is org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (IO Error: The Network Adapter could not establish the connection)</code></p>\n\n<p>I'm able to connect via SQLDeveloper with this properties:</p>\n\n<pre><code>Hostname: localhost\nPort    : 1521\nSID     : ORCL\nusername: PMSYSDB\npassword:\n</code></pre>\n\n<p>so my database is up and running...\n Firewall is off... \n The database and the tomcat are on the same machine...</p>\n\n<p>Think it's not important, but i use the datasource with Spring Security:</p>\n\n<pre><code>     &lt;authentication-manager&gt;\n         &lt;authentication-provider&gt;\n        &lt;jdbc-user-service data-source-ref=\"dataSource\"\n\n           users-by-username-query=\"\n              select username, password, enabled \n              from users where username=?\" \n\n           authorities-by-username-query=\"\n              select u.username, ur.authority from users u, user_roles ur \n              where u.user_id = ur.user_id and u.username =?  \" \n\n        /&gt;\n      &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n</code></pre>\n"},{"tags":["spring","hibernate"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13094031,"title":"Hibernate 4, JPA 2 and HSQL, not able to query by ID","body":"<p>I have a domain object called Service that contains an id field amongst others:</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.SEQUENCE)\n@Column(name = \"id\", nullable = false)\nprivate Integer id;\n\n@Column(name = \"type\")\nprivate Service.ServiceTypes serviceType;\n</code></pre>\n\n<p>In my DAO implementation, I can easily query by serviceType:</p>\n\n<pre><code>@Override\n    public Set&lt;Service&gt; queryDatabaseByServiceType(ServiceTypes serviceType) {\n        logger.debug(\"Querying the database by service type \" + serviceType.toString());\n        return new HashSet&lt;Service&gt;(super.entityManager.createQuery(\"from Service s where s.type = :serviceType\").setParameter(\"serviceType\", serviceType).getResultList());\n    }\n</code></pre>\n\n<p>When I copy and past that method and try to run the query against \"id\", I get zero results.</p>\n\n<pre><code>@Override\n    public Service queryDatabaseByServiceId(int id) {\nList&lt;Service&gt; results = super.entityManager.createQuery(\"from Service s where s.id = :id\").setParameter(\"id\", id).getResultList();\nreturn results.get(0);\n</code></pre>\n\n<p>always returns nothing....  I've tried it a million different ways...</p>\n\n<pre><code>CriteriaBuilder builder = super.entityManager.getCriteriaBuilder();\nCriteriaQuery&lt;Service&gt; criteria = builder.createQuery(Service.class);\nRoot&lt;Service&gt; s1 = criteria.from(Service.class);\nTypedQuery&lt;Service&gt; query = super.entityManager.createQuery(\n    criteria.select(s1).where(builder.equal(s1.get(\"id\"), id)));\nService service = query.getSingleResult();\nreturn service;\n</code></pre>\n\n<p>Still nothing.  I'm not sure why I can query against other columns but not the ID.  I've verified the IDs I'm passing in are valid, nothing ever works.</p>\n\n<p>Any ideas?</p>\n\n<p>EDIT:  Here are other ways I've tried the query:</p>\n\n<pre><code>Service ser = super.entityManager.find(Service.class, new Integer(1));\n\nList z1 = super.entityManager.createQuery(\"select s.id from Service s\").getResultList();\n\nList results1 = super.entityManager.createQuery(\"SELECT s FROM Service s WHERE id = 1\").getResultList();\n\nList&lt;Service&gt; results = super.entityManager.createQuery(\"from Service as s where s.id = :id\").setParameter(\"id\", new Integer(1)).getResultList();\n</code></pre>\n\n<p>I've tried changing the field in my domain object to \"idx\" instead of \"id\", I've tried changing the column name to \"service_id\" thinking maybe there's some internal conflict between what it uses for the id field and my object, but still nothing.  As noted before and in the comments, querying by any other field works fine and I can easily get results showing the IDs:</p>\n\n<pre><code>return new HashSet&lt;Service&gt;(super.entityManager.createQuery(\"from Service s where s.type = :serviceType\").setParameter(\"serviceType\", serviceType).getResultList());\n</code></pre>\n\n<p>produces a populated list and when converted to json i see this in my browser:</p>\n\n<pre><code>{\"services\":[{\"id\":2,\"serviceType\":\"x\",.....\n</code></pre>\n\n<p>With all those various types of queries, here is the log output:</p>\n\n<pre><code>DEBUG: service.impl.ServiceServiceImpl - Querying the database by service id 2\nHibernate: select service0_.service_id as service1_0_, service0_.description as descript2_0_, service0_.name as name0_, service0_.type as type0_, service0_.tmodel as tmodel0_, service0_.uddi_id as uddi6_0_, service0_.url as url0_, service0_.version as version0_ from services service0_ where service0_.service_id=?\nTRACE: org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [INTEGER] - 1\nINFO : service.impl.ServiceServiceImpl - results list from id query: 0\nHibernate: select service0_.service_id as service1_0_0_, service0_.description as descript2_0_0_, service0_.name as name0_0_, service0_.type as type0_0_, service0_.tmodel as tmodel0_0_, service0_.uddi_id as uddi6_0_0_, service0_.url as url0_0_, service0_.version as version0_0_ from services service0_ where service0_.service_id=?\nTRACE: org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [INTEGER] - 1\nHibernate: select service0_.service_id as col_0_0_ from services service0_\nINFO : service.impl.ServiceServiceImpl - z1 count: 0\nHibernate: select service0_.service_id as service1_0_, service0_.description as descript2_0_, service0_.name as name0_, service0_.type as type0_, service0_.tmodel as tmodel0_, service0_.uddi_id as uddi6_0_, service0_.url as url0_, service0_.version as version0_ from services service0_ where service0_.service_id=1\nINFO : service.impl.ServiceServiceImpl - results1 from id query: 0\nHibernate: select service0_.service_id as service1_0_, service0_.description as descript2_0_, service0_.name as name0_, service0_.type as type0_, service0_.tmodel as tmodel0_, service0_.uddi_id as uddi6_0_, service0_.url as url0_, service0_.version as version0_ from services service0_ where service0_.service_id=2\nINFO : service.impl.ServiceServiceImpl - results2 from id query: 0\nHibernate: select service0_.service_id as service1_0_0_, service0_.description as descript2_0_0_, service0_.name as name0_0_, service0_.type as type0_0_, service0_.tmodel as tmodel0_0_, service0_.uddi_id as uddi6_0_0_, service0_.url as url0_0_, service0_.version as version0_0_ from services service0_ where service0_.service_id=?\nTRACE: org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [INTEGER] - 2\n</code></pre>\n"},{"tags":["java","forms","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13108649,"title":"Spring MVC Form static text","body":"<p>I'm trying to make form with Spring MVC for editing some object. Some fields of this object are set at the moment of creation and then can not be edited, so they must be shown on editing form like plain text, not like an input.\nI was very suprised when I didn't find smth like spring:output in spring forms tag library. How can do it? Please help :)\nHere is the code of my form:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n    &lt;%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%&gt;\n    &lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jstl/core\" %&gt;\n    &lt;%@taglib prefix=\"form\" uri=\"http://www.springframework.org/tags/form\" %&gt;\n    &lt;%@ taglib prefix=\"sec\" uri=\"http://www.springframework.org/security/tags\" %&gt;\n    &lt;%@taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\" %&gt;\n\n    &lt;h1&gt;&lt;spring:message code=\"Information\" /&gt;&lt;/h1&gt;\n\n    &lt;form:form commandName=\"shop\" method=\"POST\"&gt;\n        &lt;table&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;spring:message code=\"ShopCompanyName\"/&gt;\n                &lt;td colspan=\"2\"&gt;**HERE MUST BE A STATIC TEXT \nFILLED WITH THE VALUE OF SOME FIELD FROM OBJECT**&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td colspan=\"3\"&gt;&lt;h2&gt;&lt;spring:message code=\"Contacts\"/&gt;&lt;/h2&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;spring:message code=\"ShopUserLN\"/&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;form:input path=\"user.lastName\"/&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;form:errors path=\"user.lastName\" cssClass=\"error\"/&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;spring:message code=\"ShopUserFN\"/&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;form:input path=\"user.firstName\"/&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;form:errors path=\"user.firstName\" cssClass=\"error\"/&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;spring:message code=\"ShopUserMN\"/&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;form:input path=\"user.middleName\"/&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;spring:message code=\"ShopUserPhone\"/&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;form:input path=\"user.phone\"/&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;form:errors path=\"user.phone\" cssClass=\"error\"/&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n        &lt;input type=\"submit\" value=\"Save\"&gt;\n    &lt;/form:form&gt;\n</code></pre>\n"},{"tags":["java","spring","maven-2","maven-assembly-plugin"],"answer_count":5,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":11540,"score":5,"question_id":3650252,"title":"Problem starting Spring application from Java","body":"<p>I am able to compile and start my Spring project using Maven:</p>\n\n<pre><code>mvn -e  clean  compile  exec:java -Dexec.mainClass=de.fraunhofer.fkie.tet.vmware.manager.Test\n</code></pre>\n\n<p>However, when i assemble all jars in a single file using the maven-assembly-plugin (including <code>applicationContext.xml</code>), i always get an Exception during the java call:</p>\n\n<pre><code>java -cp target/test-jar-with-dependencies.jar:.  de.fraunhofer.fkie.tet.vmware.manager.Test\n\n  INFO: Loading XML bean definitions from class path resource [applicationContext.xml]\n  Sep 6, 2010 10:37:21 AM org.springframework.util.xml.SimpleSaxErrorHandler warning\n  WARNING: Ignored XML validation warning\n  org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'http://www.springframework.org/schema/context/spring-context.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not &lt;xsd:schema&gt;.\n  ...\n  Exception in thread \"main\" org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: \n  Line 10 in XML document from class path resource [applicationContext.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: \n  The matching wildcard is strict, but no declaration can be found for element 'context:annotation-config'.\n  ...\n  Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: \n  The matching wildcard is strict, but no declaration can be found for element 'context:annotation-config'.\n</code></pre>\n\n<p>I also tried to attach the schema definitions, i.e. <code>spring-context.xsd</code> etc., directly to the classpath, but without any success.</p>\n\n<pre><code>less src/main/resources/applicationContext.xml\n\n  &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n  &lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xmlns:context=\"http://www.springframework.org/schema/context\"\n         xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n                             http://www.springframework.org/schema/beans/spring-beans.xsd\n                             http://www.springframework.org/schema/context \n                             http://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n      &lt;context:annotation-config /&gt;   &lt;!-- wegen '@PostConstruct' --&gt;\n  &lt;!--&lt;context:component-scan base-package=\"de.fraunhofer\" /&gt;     --&gt;\n\n  ...\n</code></pre>\n"},{"tags":["spring","ibatis","spring-orm"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13107700,"title":"What is the purpose of using Spring-orm?","body":"<p>I have the following maven dependency in my project.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n    &lt;version&gt;2.5.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>We are using iBatis for ORM.</p>\n\n<ul>\n<li>What is the purpose of giving this dependency?</li>\n<li>Is this required if I to have bridge between Spring and iBatis?</li>\n<li>In general how Spring and iBatis linked?</li>\n</ul>\n\n<p>Thanks for your response.</p>\n"},{"tags":["java","spring","configuration","osgi","war"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13091103,"title":"How do I set up both OSGi and non-OSGi WARs to use an external properties file","body":"<p>I have a project that uses Spring that may be run as a .war in an OSGi container, namely Karaf, or as a .war in a non-OSGi container, such as Jetty.  The .wars are created by separate Maven projects.</p>\n\n<p>Currently, my project has a properties file that sits inside the .war and is grabbed from the classpath of the .war using a <code>PropertyPlaceholderConfigurer</code> bean in Spring.  We'd like to externalize that properties file.  What is the best/easiest way to set up external properties file(s) for both .wars?</p>\n\n<p>I understand that the OSGi .war could set up our <code>PropertyPlaceholderConfigurer</code> bean to reference properties files using <code>osgix:cm-properties</code>, but I'm not confident that this would also work for the non-OSGi .war. (Or would it?)</p>\n"},{"tags":["java","spring","tomcat","amazon-s3","sax"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":235,"score":4,"question_id":12180606,"title":"Best practice: Creation of SAX parser for XMLReader","body":"<p>I'm using the Amazon S3 SDK in two separate wars running on the same Tomcat. I initialize an AmazonS3Client in the @PostConstruct of one of my Spring services.</p>\n\n<p>If I run these wars separately, everything usually works fine. If I run them together, one of them - the second one to start up - throws the following exception:</p>\n\n<blockquote>\n  <p>com.amazonaws.AmazonClientException: Couldn't initialize a sax driver for the XMLReader</p>\n</blockquote>\n\n<p>I have a workaround where I set the following System property if this happens, after catching the AmazonClientException:</p>\n\n<pre><code>try {\n  init();\n} catch (AmazonClientException ase) {\n  System.setProperty(\"org.xml.sax.driver\", \"com.sun.org.apache.xerces.internal.parsers.SAXParser\");\n  init();\n}\n</code></pre>\n\n<p>But this is of course horrible. Is there a better way to do this? Why does this occur in these circumstances?</p>\n\n<p>UPDATE: At first, it seemed that moving the intitalization of the AmazonS3Client out of the @PostConstruct and initializing it lazily prevented this error completely. But apparently it still occurs sometimes - even when I only run one war instead of both.</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13106232,"title":"How to delete a record using Spring MVC and annotations","body":"<p>I am relatively new to Spring and I am trying to accomplish the following:</p>\n\n<p>Let's say I have a list of fruits in a database table with 2 columns \"id\" and \"name\". I would like to have a page displaying the list and have a \"delete\" button next to each fruit. I thought that would be easy to accomplish but I can't figure it out and can't find any tutorial explaining this.</p>\n\n<p>This is what I have for now:</p>\n\n<p>View:</p>\n\n<pre><code>&lt;c:forEach items=\"${fruits}\" var=\"fruit\"&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;c:out value=\"${fruit.name}\" /&gt;&lt;/td&gt;\n        &lt;sec:authorize access=\"hasRole('admin')\"&gt;\n            &lt;td&gt;\n                &lt;a href=\"&lt;c:url var=\"deleteUrl\" value=\"/fruit/remove.html\"/&gt;\"&gt;DELETE&lt;/a&gt;\n                &lt;form id=\"${fruitFormId}\" method=\"POST\"&gt;\n                    &lt;input id=\"fruit\" name=\"fruit\" type=\"hidden\" value=\"${fruit.id}\"/&gt;\n                &lt;/form&gt;\n            &lt;/td&gt;\n        &lt;/sec:authorize&gt;\n    &lt;/tr&gt;\n&lt;/c:forEach&gt;\n</code></pre>\n\n<p>Then the controller:</p>\n\n<pre><code>@Controller\npublic class FruitController{\n\n    @Autowired\n    private FruitManager fruitManager;\n\n    @RequestMapping(value = \"/list\", method = RequestMethod.GET)\n    public String getFruits(ModelMap model) {\n        model.addAttribute(\"fruits\", this.fruitManager.getFruits());\n        return \"list\";\n    }\n\n    @RequestMapping(value = \"/fruit/remove\", method = RequestMethod.POST)\n    public String removeAd(Fruit fruit) {\n        fruitManager.removeFruit(fruit);\n        return \"/list\";\n    }\n</code></pre>\n\n<p>I am not even sure I am using the \"good and clean\" way right now and would like to accomplish this \"the right way\", following conventions if any.</p>\n"},{"tags":["java","web-services","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13107438,"title":"How to post xml directly insted of object in resttemplate in Spring","body":"<p>method defined in resttemplate in spring post contents on specified url</p>\n\n<pre><code>public &lt;T&gt; ResponseEntity&lt;T&gt; postForEntity(String url,\n                                           Object request,\n                                           Class&lt;T&gt; responseType,\n                                           Map&lt;String,?&gt; uriVariables)\n                                throws RestClientException\n</code></pre>\n\n<p>in this i want to <code>post xml data instead of object in request</code>\nsince request object is also created from xml data using some type of mapping .How can i do it if i am able to post xml data directly then i can generate request data at runtime but in case of object i can not do it at runtime.</p>\n"},{"tags":["spring","maven"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13105906,"title":"jaxws-spring maven dependency is for what purpose","body":"<p>I have the following maven dependecy in my project.</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.jvnet.jax-ws-commons.spring&lt;/groupId&gt;\n   &lt;artifactId&gt;jaxws-spring&lt;/artifactId&gt;\n   &lt;version&gt;1.8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Question:</p>\n\n<ul>\n<li>Is this <a href=\"http://www.springsource.org/spring-web-services\" rel=\"nofollow\">Spring Webservices</a> project?</li>\n<li>If not what this dependency is for? </li>\n</ul>\n\n<p>Thanks for your help.</p>\n"},{"tags":["spring","hibernate","jsf-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13080166,"title":"Integrating JSF2 with Spring3 and Hibernate4 - applicationContext.xml error?","body":"<p>I'm trying to create a JSF2 application which uses Spring3 for the DI and hibernate to handle the persistence.</p>\n\n<p>I'm stock on the following error and don't know how to proceed:</p>\n\n<pre><code>26/10/2012 1:57:04 PM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.InvalidMappingException: Unable to read XML\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)\n    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)\n    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)\n    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)\n    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\n    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)\n    at org.apache.catalina.core.StandardService.start(StandardService.java:525)\n    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\nCaused by: org.hibernate.InvalidMappingException: Unable to read XML\n    at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:109)\n    at org.hibernate.cfg.Configuration.add(Configuration.java:478)\n    at org.hibernate.cfg.Configuration.add(Configuration.java:474)\n    at org.hibernate.cfg.Configuration.add(Configuration.java:647)\n    at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:685)\n    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:272)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)\n    ... 36 more\nCaused by: org.dom4j.DocumentException: Connection refused: connect Nested exception: Connection refused: connect\n    at org.dom4j.io.SAXReader.read(SAXReader.java:484)\n    at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:78)\n    ... 43 more\n</code></pre>\n\n<p>my <code>applicationContext.xml</code> is listed below:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n                        http://www.springframework.org/schema/tx\n                        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n                        http://www.springframework.org/schema/context\n                        http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"com.myapp.techrro\" /&gt;\n    &lt;context:annotation-config /&gt;\n\n    &lt;bean class=\"org.springframework.beans.factory.config.CustomScopeConfigurer\"&gt;\n        &lt;property name=\"scopes\"&gt;\n            &lt;map&gt;\n                &lt;entry key=\"view\"&gt;\n                    &lt;bean class=\"com.myapp.util.ViewScope\" /&gt;\n                &lt;/entry&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"net.sourceforge.jtds.jdbc.Driver\"&gt;\n        &lt;/property&gt;\n        &lt;property name=\"url\" value=\"jdbc:jtds:sqlserver://localhost:1433/myapp\"&gt;\n        &lt;/property&gt;\n        &lt;property name=\"username\" value=\"mydb\"&gt;&lt;/property&gt;\n        &lt;property name=\"password\" value=\"somepass\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"sessionFactory\"\n        class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\"&gt;\n            &lt;ref bean=\"dataSource\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.HSQLDialect&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.min_size\"&gt;5&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.max_size\"&gt;20&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.idle_test_period\"&gt;300&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.timeout\"&gt;1800&lt;/prop&gt;\n                &lt;prop key=\"hibernate.c3p0.max_statements\"&gt;50&lt;/prop&gt;\n                &lt;prop key=\"cache.provider_class\"&gt;org.hibernate.cache.NoCacheProvider&lt;/prop&gt;\n                &lt;prop key=\"c3p0.acquire_increment\"&gt;1&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n        &lt;property name=\"mappingResources\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;com/myapp/techrro/hibernate/UserOrderHist.hbm.xml\n                &lt;/value&gt;\n                &lt;value&gt;com/myapp/techrro/hibernate/UserAccessHist.hbm.xml\n                &lt;/value&gt;\n                &lt;value&gt;com/myapp/techrro/hibernate/User.hbm.xml&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"userOrderHistDAO\" class=\"com.myapp.techrro.hibernate.userOrderHistDAO\"&gt;\n        &lt;property name=\"sessionFactory\"&gt;\n            &lt;ref bean=\"sessionFactory\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"userAccessHistDAO\" class=\"com.myapp.techrro.hibernate.userAccessHistDAO\"&gt;\n        &lt;property name=\"sessionFactory\"&gt;\n            &lt;ref bean=\"sessionFactory\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"userDAO\" class=\"com.myapp.techrro.hibernate.userDAO\"&gt;\n        &lt;property name=\"sessionFactory\"&gt;\n            &lt;ref bean=\"sessionFactory\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<h2>Update:</h2>\n\n<p>below are my mapping files, they were generated by myEclipse:</p>\n\n<p><code>User.hbm.xml</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n\"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd \"&gt;\n&lt;!-- \n    Mapping file autogenerated by MyEclipse Persistence Tools\n--&gt;\n&lt;hibernate-mapping&gt;\n    &lt;class name=\"com.myapp.techrro.hibernate.User\" table=\"User\" schema=\"dbo\" catalog=\"mydb\"&gt;\n        &lt;id name=\"user_PK\" type=\"java.lang.Long\"&gt;\n            &lt;column name=\"user_PK\" /&gt;\n            &lt;generator class=\"identity\" /&gt;\n        &lt;/id&gt;\n        &lt;property name=\"username\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"username\" length=\"20\" not-null=\"true\" unique=\"true\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"password\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"password\" length=\"40\" not-null=\"true\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"userRole\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"userRole\" length=\"1\" not-null=\"true\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"active\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"active\" length=\"1\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"type\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"type\" length=\"3\" not-null=\"true\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"firstName\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"firstName\" length=\"30\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"lastName\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"lastName\" length=\"30\" /&gt;\n        &lt;/property&gt;\n        &lt;set name=\"userOrderHistLog\" inverse=\"true\"&gt;\n            &lt;key&gt;\n                &lt;column name=\"user_PK\" /&gt;\n            &lt;/key&gt;\n            &lt;one-to-many class=\"com.myapp.techrro.hibernate.userOrderHist\" /&gt;\n        &lt;/set&gt;\n        &lt;set name=\"userAccessHistLog\" inverse=\"true\"&gt;\n            &lt;key&gt;\n                &lt;column name=\"user_PK\" not-null=\"true\" /&gt;\n            &lt;/key&gt;\n            &lt;one-to-many class=\"com.myapp.techrro.hibernate.userAccessHist\" /&gt;\n        &lt;/set&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p><code>UserOrderHist.hbm.xml</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n\"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd \"&gt;\n&lt;!-- \n    Mapping file autogenerated by MyEclipse Persistence Tools\n--&gt;\n&lt;hibernate-mapping&gt;\n    &lt;class name=\"com.myapp.techrro.hibernate.userOrderHist\" table=\"userOrderHist\" schema=\"dbo\" catalog=\"mydb\"&gt;\n        &lt;id name=\"userOrderHis_PK\" type=\"java.lang.Long\"&gt;\n            &lt;column name=\"userOrderHis_PK\" /&gt;\n            &lt;generator class=\"identity\" /&gt;\n        &lt;/id&gt;\n        &lt;many-to-one name=\"user\" class=\"com.myapp.techrro.hibernate.User\" fetch=\"select\"&gt;\n            &lt;column name=\"user_PK\" /&gt;\n        &lt;/many-to-one&gt;\n        &lt;property name=\"action\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"action\" length=\"1\" not-null=\"true\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"prod\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"username\" length=\"20\" not-null=\"true\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"type\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"userRole\" length=\"1\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"Updated\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"deleteFG\" length=\"1\" /&gt;\n        &lt;/property&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p><code>UserAccessHist.hbm.xml</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n\"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd \"&gt;\n&lt;!-- \n    Mapping file autogenerated by MyEclipse Persistence Tools\n--&gt;\n&lt;hibernate-mapping&gt;\n    &lt;class name=\"com.myapp.techrro.hibernate.userAccessHist\" table=\"userAccessHist\" schema=\"dbo\" catalog=\"mydb\"&gt;\n        &lt;id name=\"userAccessHistPK\" type=\"java.lang.Long\"&gt;\n            &lt;column name=\"userAccessHistPK\" /&gt;\n            &lt;generator class=\"identity\" /&gt;\n        &lt;/id&gt;\n        &lt;many-to-one name=\"user_PK\" class=\"com.myapp.techrro.hibernate.User\" fetch=\"select\"&gt;\n            &lt;column name=\"adminUserPK\" not-null=\"true\" /&gt;\n        &lt;/many-to-one&gt;\n        &lt;property name=\"createdDate\" type=\"java.sql.Timestamp\"&gt;\n            &lt;column name=\"createdDate\" length=\"23\" not-null=\"true\" /&gt;\n        &lt;/property&gt;\n        &lt;property name=\"accessDetail\" type=\"java.lang.String\"&gt;\n            &lt;column name=\"accessDetail\" length=\"100\" not-null=\"true\" /&gt;\n        &lt;/property&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p>Can someone please possible causes of such error? Thanks </p>\n"},{"tags":["spring","spring-mvc","thymeleaf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13105048,"title":"Spring with Thymeleaf view integration","body":"<p>Starting out with Spring MVC and Thymeleaf for a project - But I am facing the issue of loading the index page - </p>\n\n<p>My Controller is as follows - </p>\n\n<pre><code>@Controller\n\npublic class HomeController {\n\n        @RequestMapping(method=RequestMethod.GET, value=\"/\")\n        public ModelAndView index(){\n            ModelAndView mav = new ModelAndView();\n            mav.setViewName(\"index\");\n            mav.addObject(\"user\", new UserCredential());\n            return mav;\n        }\n</code></pre>\n\n<p>and my servlet.xml file is </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n     xmlns:context=\"http://www.springframework.org/schema/context\"\n     xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n     xsi:schemaLocation=\"\n      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\n      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"web.controller\" /&gt;\n\n    &lt;!-- Enabling Spring MVC configuration through annotations --&gt;\n    &lt;mvc:annotation-driven /&gt;\n\n    &lt;!--  Mapping Static Resources --&gt;\n    &lt;mvc:resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n    &lt;bean id=\"templateResolver\" class=\"org.thymeleaf.templateresolver.ServletContextTemplateResolver\"&gt;\n        &lt;property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n        &lt;property name=\"suffix\" value=\".html\" /&gt;\n        &lt;property name=\"templateMode\" value=\"HTML5\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"templateEngine\" class=\"org.thymeleaf.spring3.SpringTemplateEngine\"&gt;\n        &lt;property name=\"templateResolver\" ref=\"templateResolver\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean class=\"org.thymeleaf.spring3.view.ThymeleafViewResolver\"&gt;\n        &lt;property name=\"templateEngine\" ref=\"templateEngine\" /&gt;\n        &lt;property name=\"order\" value=\"1\" /&gt;\n        &lt;property name=\"viewNames\" value=\"*.html\"/&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>My file structure is -- </p>\n\n<pre><code>WebContent\n -- WEB_INF\n    -- views\n      -- index.html\n</code></pre>\n\n<p>However I get the following exception - </p>\n\n<p><code>javax.servlet.ServletException: Could not resolve view with name 'index1' in servlet with name</code> 'springMVC'</p>\n\n<p>Am I placing the file in the wrong place or missing something in my controller?</p>\n"},{"tags":["java","spring","maven","spring-mvc","sitemesh"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":340,"score":1,"question_id":9596801,"title":"Best practices for sharing web-tier code (Controllers and JSPs) between similar web apps","body":"<p>I'm working on rewriting some aging web applications.  There are two in particular that are very, very similar, yet share no code today and I aim to fix that.</p>\n\n<p>The projects are being rewritten with Maven, Spring MVC, and Sitemesh.</p>\n\n<p>Model tier code is easy enough to share using JARs.  But I don't know of any good ways to share common web-tier code (JSPs and Controllers) between similar apps.</p>\n\n<p>Here's some background.  These apps are webstores.  One is a normal store (think amazon.com) that a user can sign into, search products, add to a shopping cart, and check out.  The other is basically the same thing, only it's a punchout site.  The product browse and shopping cart portions are identical.  Sign in and checkout, however, are completely different.  </p>\n\n<p>I'm oversimplifying, but it's enough to illustrate the problem.  There's a significant portion of web-tier code in the product browse and shopping cart sections that should be able to be shared between the two.</p>\n\n<p>I don't think it's possible to simply have the same WAR file running as either \"mode\" based on an environment variable or settings from a different database.  One of the differences is a completely different Spring Security config.  It would also be preferable to leave the other site's sign-in and checkout controllers out of the component-scan so nobody can somehow cross over to the wrong one with URL manipulation.</p>\n\n<p>I originally started using Maven Profiles and filtering to keep two different config sets (web.xml, spring configs, etc.) in the same WAR project.  Based on which Maven profile is selected, the resulting WAR is built with a different config set (and a different name for clarity).  This violates the Maven principal that one pom produces one artifact.</p>\n\n<p>Is there a better way to do this?  What about Maven WAR Overlays?  I see people talking about using overlays to share common resources like CSS, JS, images, and even some common JSPs.  But I don't see anyone mention sharing classes like Controllers this way.  </p>\n\n<p>I could push the Controller classes down to the JARs, but logically it seems they should stay with their respective JSPs.  And JSPs can't also be pushed down to the JARs (right?).</p>\n\n<p>I also thought about making it an EAR containing multiple WAR files -- one WAR for the common shopping experience, and another WAR for the appropriate sign-in and checkout.  I believe the session can be shared between two WARs in the same EAR, but I'm not sure if it plays nice with Spring's session-scope beans.  I hear they're not really stored in the session.  I'd also have to figure out what to do about the Sitemesh decorators being used for the header/footer.  The same Sitemesh config and its resources would need to be copied into both WARs, right?  So in the end, the shopping WAR artifact would still be different in each circumstance.</p>\n\n<p>I have to believe that other people have dealt with this before.  Am I thinking about it the wrong way?  Is there a common solution for this sort of thing?</p>\n"},{"tags":["java","spring","spring-mvc","portlet","portal"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":234,"score":4,"question_id":9628218,"title":"Migrate Spring portlet to web mvc","body":"<p>I was assigned to restructure an existing project. This project is a portal with two features. </p>\n\n<ol>\n<li>allow users single sign on to view brief information from other existing web apps</li>\n<li>managing users through other web app's API/databases </li>\n</ol>\n\n<p>This project uses <a href=\"http://static.springsource.org/spring/docs/current/spring-framework-reference/html/portlet.html\" rel=\"nofollow\">Spring Portlet MVC 3</a>, <a href=\"http://www.exoplatform.com/company/en/products\" rel=\"nofollow\">eXo portal container</a>, and <a href=\"http://en.wikipedia.org/wiki/Central_Authentication_Service\" rel=\"nofollow\">CAS single sign on</a> (each are standalone web apps).</p>\n\n<p>As time goes by, we find that the first feature needs to be shut down. This leaves single sign on,  allowing users to click a link and reach other systems. We want to convert this project to a normal web app using Spring MVC to get rid of the heaviness of eXo platform. Can anyone exposed to this situation please give a suggestion? Is there an elegant way to do this?</p>\n"},{"tags":["spring","hibernate","jpa"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":59,"score":-1,"question_id":13041123,"title":"Hibernate Spring JPA annotations exception on context initialization - NoSuchMethodError: javax.persistence.Table.uniqueConstraints()","body":"<p>Having this problem. Seems to deploy okay then the problem reappears... Can't figure out what's up. Tried from both netbeans and intellij, tried on tomcat and jetty.</p>\n\n<p>Looks like it's somehow related to JPA annotations... Unsure how to proceed. Could this be related to my jdk?</p>\n\n<p>Pom.xml for the services module that uses annotations.</p>\n\n<p>http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    \n        hpweb\n        hpweb\n        1.0\n    \n    4.0.0</p>\n\n<pre><code>&lt;artifactId&gt;service&lt;/artifactId&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;service&lt;/name&gt;\n&lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;hibernate.version&gt;3.5.4-Final&lt;/hibernate.version&gt;\n&lt;/properties&gt;\n\n&lt;repositories&gt;\n\n&lt;/repositories&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;artifactId&gt;common&lt;/artifactId&gt;\n        &lt;groupId&gt;hpweb&lt;/groupId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Spring framework --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- MySQL database driver --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.9&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;!-- SQLite JDBC library --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.xerial&lt;/groupId&gt;\n        &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;3.7.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Hibernate framework --&gt;\n\n\n    &lt;!--dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate&lt;/artifactId&gt;\n        &lt;version&gt;${hibernate.version}&lt;/version&gt;\n    &lt;/dependency--&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;${hibernate.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-annotations&lt;/artifactId&gt;\n        &lt;version&gt;${hibernate.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;1.6.6&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--Hibernate library dependecy start &gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dom4j&lt;/groupId&gt;\n        &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency--&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n        &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--dependency&gt;\n        &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\n        &lt;version&gt;1.0.1.Final&lt;/version&gt;\n    &lt;/dependency--&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;antlr&lt;/groupId&gt;\n        &lt;artifactId&gt;antlr&lt;/artifactId&gt;\n        &lt;version&gt;2.7.7&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javassist&lt;/groupId&gt;\n        &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n        &lt;version&gt;3.12.1.GA&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Generic dao --&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.sakaiproject&lt;/groupId&gt;\n        &lt;artifactId&gt;generic-dao&lt;/artifactId&gt;\n        &lt;version&gt;0.9.18&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.soundcloud&lt;/groupId&gt;\n        &lt;artifactId&gt;java-api-wrapper&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n\n<p></p>\n\n<p>stack trace</p>\n\n<pre><code>SEVERE: Context initialization failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.heavypressure.service.IUserService com.heavypressure.web.controller.impl.UserController.userService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.heavypressure.orm.dao.impl.UserDao com.heavypressure.service.impl.UserService.userDao; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:655)\n    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1628)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:680)\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.heavypressure.service.IUserService com.heavypressure.web.controller.impl.UserController.userService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.heavypressure.orm.dao.impl.UserDao com.heavypressure.service.impl.UserService.userDao; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)\n    ... 27 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.heavypressure.orm.dao.impl.UserDao com.heavypressure.service.impl.UserService.userDao; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)\n    ... 29 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.heavypressure.orm.dao.impl.UserDao com.heavypressure.service.impl.UserService.userDao; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)\n    ... 40 more\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:730)\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)\n    ... 42 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:795)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:723)\n    ... 55 more\nCaused by: java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;\n    at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:550)\n    at org.hibernate.cfg.AnnotationConfiguration.processArtifactsOfType(AnnotationConfiguration.java:636)\n    at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:359)\n    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1206)\n    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:717)\n    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:188)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)\n    ... 66 more\n</code></pre>\n"},{"tags":["spring","thymeleaf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13104319,"title":"Spring 3 with Thymeleaf config issue","body":"<p>Hello I have the following jars in my build path - </p>\n\n<p>spring-beans-3.1.2.RELEASE.jar<br>\nspring-context-3.1.2.RELEASE.jar<br>\nspring-core-3.1.2.RELEASE.jar<br>\nspring-expression-3.1.2.RELEASE.jar<br>\nspring-web-3.1.2.RELEASE.jar<br>\nspring-webmvc-3.1.2.RELEASE.jar<br>\nthymeleaf-spring3-2.0.13.jar<br></p>\n\n<p>and my servlet</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;br&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n     xmlns:context=\"http://www.springframework.org/schema/context\"\n     xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n     xsi:schemaLocation=\"\n      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\n      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"web.controller\" /&gt;\n\n    &lt;!-- Enabling Spring MVC configuration through annotations --&gt;\n    &lt;mvc:annotation-driven /&gt;\n\n    &lt;!--  Mapping Static Resources --&gt;\n    &lt;mvc:resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n    &lt;bean id=\"templateResolver\" class=\"org.thymeleaf.templateresolver.ServletContextTemplateResolver\"&gt;\n        &lt;property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n        &lt;property name=\"suffix\" value=\".html\" /&gt;\n        &lt;property name=\"templateMode\" value=\"HTML5\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"templateEngine\" class=\"org.thymeleaf.spring3.SpringTemplateEngine\"&gt;\n        &lt;property name=\"templateResolver\" ref=\"templateResolver\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean class=\"org.thymeleaf.spring3.view.ThymeleafViewResolver\"&gt;\n        &lt;property name=\"templateEngine\" ref=\"templateEngine\" /&gt;\n        &lt;property name=\"order\" value=\"1\" /&gt;\n        &lt;property name=\"viewNames\" value=\"*.html\" /&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>The error I get on launching is - </p>\n\n<p><em>\nCannot find class [org.thymeleaf.templateresolver.ServletContextTemplateResolver] for bean with name 'templateResolver' defined in ServletContext resource [/WEB-INF/springMVC-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.thymeleaf.templateresolver.ServletContextTemplateResolver\n</em>\nAm I missing any other library here? Any help is much appreciated.</p>\n"},{"tags":["hibernate","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2776,"score":0,"question_id":6716087,"title":"java.lang.IllegalStateException: LifecycleProcessor not initialized - call 'refresh' before invoking lifecycle methods via the context","body":"<p>I'm using maven_spring 3.1.M2 + hibernate 3.5. Once I put the line <code>&lt;tx:annotation-driven /&gt;</code> in my applicationcontex xml file, the follwoing error will occur:</p>\n\n<pre><code>WARNING: Exception thrown from LifecycleProcessor on context close\njava.lang.IllegalStateException: LifecycleProcessor not initialized - call 'refresh' before invoking lifecycle methods via the context: Root WebApplicationContext: startup date [Sat Jul 16 13:00:52 IST 2011]; root of context hierarchy\n    at org.springframework.context.support.AbstractApplicationContext.getLifecycleProcessor(AbstractApplicationContext.java:350)\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1033)\n    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:988)\n    at org.springframework.web.context.ContextLoader.closeWebApplicationContext(ContextLoader.java:534)\n    at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:142)\n    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4721)\n    at org.apache.catalina.core.StandardContext$4.call(StandardContext.java:5423)\n        at org.apache.catalina.core.StandardContext$4.call(StandardContext.java:5402)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662)\n</code></pre>\n\n<p>What should I do to fix this?</p>\n"},{"tags":["spring","java-ee","jsf-2","migration","tomcat6"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13085749,"title":"@ViewScoped doesn't work, bean is created for every request","body":"<p>I am migrating from JSF1.2 to 2.1, I changed entries for beans in faces-config.xml to annotations. I try use @ViewScoped instead @RequestScoped and @ManagedProperties(To many params in few classes), but every time i click submit for my form bean with annotated as @ViewScoped is recreated. For @SessionScoped everything works correctyl. </p>\n\n<p>I read few Q&amp;A here, and <a href=\"http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers\" rel=\"nofollow\">This article</a>, but i didn't force it to work.</p>\n\n<p>I change JSTL tags to rendered atribute, or c:if with ui:param rendered.</p>\n\n<p>in my web.xml i set params:</p>\n\n<pre><code>&lt;context-param&gt;\n  &lt;param-name&gt;javax.faces.PARTIAL_STATE_SAVING&lt;/param-name&gt;\n  &lt;param-value&gt;false&lt;/param-value&gt;\n&lt;/context-param&gt;\n&lt;context-param&gt;\n  &lt;param-name&gt;javax.faces.STATE_SAVING_METHOD&lt;/param-name&gt;\n  &lt;param-value&gt;CLIENT&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n\n<p>I tried javax.faces.PARTIAL_STATE_SAVING = true, but didn't work too. With javax.faces.STATE_SAVING_METHOD = SERVER the same problem. </p>\n\n<p>I removed tags handler for test, but it didn't help too.</p>\n\n<p>In project is used: Mojarra 2.1.13, hibernate 3.6, spring 3.1(far as i know updated form 2.x by my predecessor), acegi-security-1.0.5, tomahawk20, urlrewrite-3.2.0.</p>\n\n<p>I use tomcat 6</p>\n\n<p><b>EDIT:</b></p>\n\n<p>This is my bean:\n    package my.package;</p>\n\n<pre><code>import javax.faces.bean.ManagedBean; \nimport javax.faces.bean.SessionScoped;\nimport javax.faces.bean.ViewScoped;\n\nimport my.package.MyOtherBean;\n\n@ManagedBean(name=\"someNameBean\")\n@ViewScoped\n//@SessionScoped\npublic class MyBean extends MyOtherBean {\n\npublic MyBean(){\n    super();\n    //XXX\n    System.out.println(\"--&gt;&gt; someNameBean is being created\");       \n}\n}\n\n\n\npackage my.package;\n\n@ManagedBean(name=\"someNameMyOtherBean\")\n//@ViewScoped\n@SessionScoped\npublic class MyOtherBean extends BaseBean {\n\nprivate ClassWithFormFields dataIn; //getter &amp; setter exist\n//a lot of code here\n\n}\n</code></pre>\n\n<p>Example use of bean</p>\n\n<pre><code>&lt;h:selectOneMenu value=\"#{someNameBean.dataIn.currencyId}\" id=\"currencyId\" tabindex=\"2\" &gt;\n&lt;f:selectItems value=\"#{someNameBean.dataIn..availableCurrencies}\"/&gt;\n&lt;/h:selectOneMenu&gt;\n</code></pre>\n\n<p><b>Update</b>\nserviceLocalizator is managed by Spring xml files ans JSF annotation</p>\n\n<pre><code>@ManagedBean\npublic class BaseBean implements Serializable {\n\nprivate static final long serialVersionUID = 1L;\n\nprotected transient Logger log = Logger.getLogger(this.getClass());\n\n@ManagedProperty(value=\"#{serviceLocalizator}\")\nprotected transient ServiceLocalizator serviceLocalizator;\n\n    //few more lines\n\n}\n</code></pre>\n\n<p><b>Update 2:</b>\nIt's My fault. Thanks for @kolossus that he the indicated direction.\nI i was looking for answer and I found and read <a href=\"http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html\" rel=\"nofollow\">BalusC article</a> And now i now, i shouldn't return string in backing bean action. With null instead string it works. I badly understood concept of a view, I thought that ViewSoped bean id live as long as tab/windows is the same. Now i know that is it JSF View.\nI'am sory for a trouble.</p>\n\n<p>Maybe is a way to use @ViewSoped with redirect to new page?</p>\n"},{"tags":["spring","jsp","servlets"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13101177,"title":"blob image render in spring mvc 3.0","body":"<p>I am trying to read blob type image which is coming from Database. My method in controller. Only Image file is displaying on JSP nothing else</p>\n\n<pre><code>@RequestMapping(value = \"/showDetails\")\npublic ModelAndView showDetails(@RequestParam(\"doc\") int id,\n        HttpServletResponse responce) {\n    ModelAndView mView = new ModelAndView();\n    File file = documentDao.getFileDetail(id);\n    byte[] bytes = null;\n    try {\n        OutputStream op = responce.getOutputStream();\n        int length = (int) file.getContent().length();\n        bytes = file.getContent().getBytes(1, length);\n        op.write(bytes);\n        op.flush();\n        op.close();\n        responce.setContentType(\"image/gif\");\n        mView.addObject(\"image\", op);\n    } catch (Exception e1) {\n        e1.printStackTrace();\n    }\n\n    mView.addObject(\"file\", file);\n    mView.setViewName(\"filedetails\");\n    return mView;\n}\n</code></pre>\n\n<p>The above method in my controller class. And I want to render image as well as some text on JSP. But only image is coming in Browser.</p>\n"},{"tags":["java","spring","servlets","web.xml"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":21959,"score":1,"question_id":1865088,"title":"How to register multiple servlets in web.xml in one Spring application","body":"<p>I want to define two servlets in my Spring web.xml - one for the application html/jsp pages, and one for a web service that will be called by an external application.  Here is the web.xml:</p>\n\n<pre><code>&lt;servlet&gt;\n  &lt;servlet-name&gt;myservlet&lt;/servlet-name&gt;\n  &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;myservlet&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n\n&lt;context-param&gt;\n  &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n  &lt;param-value&gt;WEB-INF/user-service-servlet.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;servlet&gt;\n  &lt;servlet-name&gt;user-webservice&lt;/servlet-name&gt;\n  &lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;\n  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;user-webservice&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/UserService/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>If I have myservlet use the DispatcherServlet in the file by itself, it works fine.  If I have the user-webservice with the context-param for it's config file (user-service-servlet.xml), it works fine.  However, if I have both in the file, then the myservlet doesn't work as the myservlet-servlet.xml file isn't loaded automatically.  If I remove the context-param, then the myservlet works, but the user-webservice doesn't work as it's configuration file (user-service-servlet.xml) isn't loaded.</p>\n\n<p>How can I have both servlets defined and both of their configuration files loaded?</p>\n"},{"tags":["java","spring","ant","build"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1380,"score":0,"question_id":4722873,"title":"unable to build new java spring project","body":"<p>i am trying to build a simple java spring project i got setup which contains my hibernate .hbm mappings, the POJO'S that go with each mappings and one SimpleFormController class that looks like this:</p>\n\n<pre><code>package com.jr.user.controller;\n\nimport org.springframework.web.portlet.mvc.SimpleFormController;\n\npublic class RegisterNewUser extends SimpleFormController{\n\n}\n</code></pre>\n\n<p>Its empty as you can see but when i try to build it i get the following error below:</p>\n\n<blockquote>\n  <p>BUILD FAILED\n  C:\\Users\\xxxxxxxxxxxxx\\Work\\Online\n  Racing League\\build.xml:45: Unable to\n  find a javac compiler;\n  com.sun.tools.javac.Main is not on the\n  classpath. Perhaps JAVA_HOME does not\n  point to the JDK. It is currently set</p>\n  \n  <p>to \"C:\\Program Files (x86)\\Java\\jre6\"</p>\n  \n  <p>Total time: 237 milliseconds</p>\n</blockquote>\n\n<p>Also, whats weird is that the package line on the above code is highlighted in a red underline indicating a syntax or code error and when i mouse over to that line, this is what it says:</p>\n\n<blockquote>\n  <p>The type javax.portlet.PortletContext\n  cannot be resolved. It is indirectly\n  referenced from required .class files</p>\n</blockquote>\n\n<p>My build.xml looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;project name=\"Online Racing League\" basedir=\".\" default=\"usage\"&gt;\n    &lt;property file=\"build.properties\"/&gt;\n\n    &lt;property name=\"src.dir\" value=\"src\"/&gt;\n    &lt;property name=\"web.dir\" value=\"war\"/&gt;\n    &lt;property name=\"build.dir\" value=\"${web.dir}/WEB-INF/classes\"/&gt;\n    &lt;property name=\"name\" value=\"Online Racing League\"/&gt;\n\n    &lt;path id=\"master-classpath\"&gt;\n        &lt;fileset dir=\"${web.dir}/WEB-INF/lib\"&gt;\n            &lt;include name=\"*.jar\"/&gt;\n        &lt;/fileset&gt;\n        &lt;!-- We need the servlet API classes: --&gt;\n        &lt;!--  * for Tomcat 5/6 use servlet-api.jar --&gt;\n        &lt;!--  * for other app servers - check the docs --&gt;\n        &lt;fileset dir=\"${appserver.lib}\"&gt;\n            &lt;include name=\"servlet*.jar\"/&gt;\n        &lt;/fileset&gt;\n        &lt;pathelement path=\"${build.dir}\"/&gt;\n    &lt;/path&gt;\n\n    &lt;target name=\"usage\"&gt;\n        &lt;echo message=\"\"/&gt;\n        &lt;echo message=\"${name} build file\"/&gt;\n        &lt;echo message=\"-----------------------------------\"/&gt;\n        &lt;echo message=\"\"/&gt;\n        &lt;echo message=\"Available targets are:\"/&gt;\n        &lt;echo message=\"\"/&gt;\n        &lt;echo message=\"build     --&gt; Build the application\"/&gt;\n        &lt;echo message=\"deploy    --&gt; Deploy application as directory\"/&gt;\n        &lt;echo message=\"deploywar --&gt; Deploy application as a WAR file\"/&gt;\n        &lt;echo message=\"install   --&gt; Install application in Tomcat\"/&gt;\n        &lt;echo message=\"reload    --&gt; Reload application in Tomcat\"/&gt;\n        &lt;echo message=\"start     --&gt; Start Tomcat application\"/&gt;\n        &lt;echo message=\"stop      --&gt; Stop Tomcat application\"/&gt;\n        &lt;echo message=\"list      --&gt; List Tomcat applications\"/&gt;\n        &lt;echo message=\"\"/&gt;\n    &lt;/target&gt;\n\n    &lt;target name=\"build\" description=\"Compile main source tree java files\"&gt;\n        &lt;mkdir dir=\"${build.dir}\"/&gt;\n        &lt;javac destdir=\"${build.dir}\" source=\"1.5\" target=\"1.5\" debug=\"true\"\n               deprecation=\"false\" optimize=\"false\" failonerror=\"true\"&gt;\n            &lt;src path=\"${src.dir}\"/&gt;\n            &lt;classpath refid=\"master-classpath\"/&gt;\n        &lt;/javac&gt;\n    &lt;/target&gt;\n\n    &lt;target name=\"deploy\" depends=\"build\" description=\"Deploy application\"&gt;\n        &lt;copy todir=\"${deploy.path}/${name}\" preservelastmodified=\"true\"&gt;\n            &lt;fileset dir=\"${web.dir}\"&gt;\n                &lt;include name=\"**/*.*\"/&gt;\n            &lt;/fileset&gt;\n        &lt;/copy&gt;\n    &lt;/target&gt;\n\n    &lt;target name=\"deploywar\" depends=\"build\" description=\"Deploy application as a WAR file\"&gt;\n        &lt;war destfile=\"${deploy.path}/${name}.war\"\n             webxml=\"${web.dir}/WEB-INF/web.xml\"&gt;\n            &lt;fileset dir=\"${web.dir}\"&gt;\n                &lt;include name=\"**/*.*\"/&gt;\n            &lt;/fileset&gt;\n        &lt;/war&gt;\n        &lt;copy todir=\"${deploy.path}\" preservelastmodified=\"true\"&gt;\n            &lt;fileset dir=\".\"&gt;\n                &lt;include name=\"*.war\"/&gt;\n            &lt;/fileset&gt;\n        &lt;/copy&gt;\n    &lt;/target&gt;\n\n\n\n    &lt;!-- ============================================================== --&gt;\n    &lt;!-- Tomcat tasks - remove these if you don't have Tomcat installed --&gt;\n    &lt;!-- ============================================================== --&gt;\n\n        &lt;path id=\"catalina-ant-classpath\"&gt;\n            &lt;!-- We need the Catalina jars for Tomcat --&gt;\n            &lt;!--  * for other app servers - check the docs --&gt;\n            &lt;fileset dir=\"${appserver.lib}\"&gt;\n                &lt;include name=\"catalina-ant.jar\"/&gt;\n            &lt;/fileset&gt;\n        &lt;/path&gt;\n\n        &lt;taskdef name=\"install\" classname=\"org.apache.catalina.ant.DeployTask\"&gt;\n            &lt;classpath refid=\"catalina-ant-classpath\"/&gt;\n        &lt;/taskdef&gt;\n        &lt;taskdef name=\"reload\" classname=\"org.apache.catalina.ant.ReloadTask\"&gt;\n            &lt;classpath refid=\"catalina-ant-classpath\"/&gt;\n        &lt;/taskdef&gt;\n        &lt;taskdef name=\"list\" classname=\"org.apache.catalina.ant.ListTask\"&gt;\n            &lt;classpath refid=\"catalina-ant-classpath\"/&gt;\n        &lt;/taskdef&gt;\n        &lt;taskdef name=\"start\" classname=\"org.apache.catalina.ant.StartTask\"&gt;\n            &lt;classpath refid=\"catalina-ant-classpath\"/&gt;\n        &lt;/taskdef&gt;\n        &lt;taskdef name=\"stop\" classname=\"org.apache.catalina.ant.StopTask\"&gt;\n            &lt;classpath refid=\"catalina-ant-classpath\"/&gt;\n        &lt;/taskdef&gt;\n\n        &lt;target name=\"install\" description=\"Install application in Tomcat\"&gt;\n            &lt;install url=\"${tomcat.manager.url}\"\n                     username=\"${tomcat.manager.username}\"\n                     password=\"${tomcat.manager.password}\"\n                     path=\"/${name}\"\n                     war=\"${name}\"/&gt;\n        &lt;/target&gt;\n\n        &lt;target name=\"reload\" description=\"Reload application in Tomcat\"&gt;\n            &lt;reload url=\"${tomcat.manager.url}\"\n                     username=\"${tomcat.manager.username}\"\n                     password=\"${tomcat.manager.password}\"\n                     path=\"/${name}\"/&gt;\n        &lt;/target&gt;\n\n        &lt;target name=\"start\" description=\"Start Tomcat application\"&gt;\n            &lt;start url=\"${tomcat.manager.url}\"\n                     username=\"${tomcat.manager.username}\"\n                     password=\"${tomcat.manager.password}\"\n                     path=\"/${name}\"/&gt;\n        &lt;/target&gt;\n\n        &lt;target name=\"stop\" description=\"Stop Tomcat application\"&gt;\n            &lt;stop url=\"${tomcat.manager.url}\"\n                     username=\"${tomcat.manager.username}\"\n                     password=\"${tomcat.manager.password}\"\n                     path=\"/${name}\"/&gt;\n        &lt;/target&gt;\n\n        &lt;target name=\"list\" description=\"List Tomcat applications\"&gt;\n            &lt;list url=\"${tomcat.manager.url}\"\n                     username=\"${tomcat.manager.username}\"\n                     password=\"${tomcat.manager.password}\"/&gt;\n        &lt;/target&gt;\n\n    &lt;!-- End Tomcat tasks --&gt;\n\n    &lt;/project&gt;\n</code></pre>\n\n<p>And my build properties is looks like this:</p>\n\n<pre><code># Ant properties for building the springapp\n\nappserver.home=C:/Program Files/Apache Software Foundation/Tomcat 7.0\n# for Tomcat 5 use $appserver.home}/server/lib\n# for Tomcat 6 use $appserver.home}/lib\nappserver.lib=${appserver.home}/lib/\n\ndeploy.path=${appserver.home}/webapps\n\ntomcat.manager.url=http://localhost:8080/manager\ntomcat.manager.username=\ntomcat.manager.password=\n</code></pre>\n\n<p>Whats strange is that if i do not extend SimpleFormController . the error:</p>\n\n<blockquote>\n  <p>The type javax.portlet.PortletContext\n  cannot be resolved. It is indirectly\n  referenced from required .class files</p>\n</blockquote>\n\n<p>dissapears but i still fail to build it with the exact same error.</p>\n\n<p>im currently using eclipse IDE and tomcat 7</p>\n\n<p>I have the necessary libs needed to run spring and hibernate so i cant quite figure out whats the issue.</p>\n\n<p>i checked the JAVA home path and my java is installed there correctly.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13103232,"title":"cannot access to hessian remote service at [http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService]","body":"<p>Can someone help me with my problem?</p>\n\n<p>I have following error:</p>\n\n<p>Tests in error: </p>\n\n<pre><code>   testCreateNewCustomer(eu.ibacz.swsc.spring.di.testdependencyinjection.BankServiceTest): Cannot connect to Hessian remote service at [http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService]; nested exception is com.caucho.hessian.client.HessianConnectionException: HessianProxy cannot connect to 'http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService\n\n   testGetAllCustomers(eu.ibacz.swsc.spring.di.testdependencyinjection.BankServiceTest): Cannot connect to Hessian remote service at [http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService]; nested exception is com.caucho.hessian.client.HessianConnectionException: HessianProxy cannot connect to 'http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService\n</code></pre>\n\n<p>I dont know where can be problem. </p>\n\n<p>This is my applicationContext.xml </p>\n\n<pre><code>   &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n   &lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n   xmlns:aop=\"http://www.springframework.org/schema/aop\"\n   xsi:schemaLocation=\"http://www.springframework.org/schema/beans                                                                                               \n   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-                                             \n   aop-3.0.xsd\"&gt;``\n\n\n\n  &lt;import resource=\"spring-db-config.xml\"/&gt;\n  &lt;aop:aspectj-autoproxy/&gt;\n  &lt;bean \n   class=\"org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor\"/&gt;\n\n  &lt;bean id=\"jdbcTemplateDatasource\" class=\"org.springframework.jdbc.core.JdbcTemplate\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n  &lt;/bean&gt;\n\n  &lt;bean id=\"springJdbcCustomerDao\"    \n   class=\"eu.ibacz.swsc.spring.di.testdependencyinjection.dao.impl.JdbcTemplateCustomerDaoImpl\"&gt;\n    &lt;property name=\"jdbcTemplate\" ref=\"jdbcTemplateDatasource\"/&gt;\n  &lt;/bean&gt;\n\n  &lt;bean id=\"bankService\" \n   class=\"eu.ibacz.swsc.spring.di.testdependencyinjection.service.impl.BankServiceImpl\"&gt;\n    &lt;property name=\"customerDao\" ref=\"springJdbcCustomerDao\"/&gt;\n  &lt;/bean&gt;\n\n  &lt;bean id=\"notifier\" class=\"eu.ibacz.swsc.spring.commons.springdemocommons.SysOutNotifier\" /&gt; \n\n  &lt;bean  \n   class=\"eu.ibacz.swsc.spring.di.testdependencyinjection.aspect.BankServiceLoggingAspect\"&gt;\n    &lt;property name=\"notifier\" ref=\"remoteNotifier\"/&gt;\n  &lt;/bean&gt;  \n\n  &lt;bean id=\"remoteNotifier\" class=\"org.springframework.remoting.caucho.HessianProxyFactoryBean\"&gt;\n    &lt;property name=\"serviceUrl\" value=\"${url.adress}\" /&gt;\n    &lt;property name=\"serviceInterface\"   \n     value=\"eu.ibacz.swsc.spring.commons.springdemocommons.Notifier\"/&gt;\n  &lt;/bean&gt;\n\n\n  &lt;bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n    &lt;property name=\"location\"&gt;\n        &lt;value&gt;urlconfig.properties&lt;/value&gt;\n    &lt;/property&gt;\n  &lt;/bean&gt;\n</code></pre>\n\n<p>urlconfing.properties looks this way:</p>\n\n<pre><code>   url.adress=http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService\n</code></pre>\n\n<p>I have already started Jetty Server using command prompt.</p>\n\n<p>thx for help</p>\n"},{"tags":["java","spring","design"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":97,"score":2,"question_id":13102525,"title":"Java code design dilemma","body":"<p>I have a dilemma regarding the design of my code.</p>\n\n<p>First of all, I am converting a VB to Java system.\nThe VB program has a class module which is like a combination of POJO and access the database for its logic. I created a similar class in JAVA with getters and setters. My dilemma is that since I need to copy the structure of the VB codes (we are forced to), I also need to include the query services in my JAVA class. But in our framework, only service classes have access to the query services. </p>\n\n<p>I am thinking of changing my JAVA class to an abstact class, and use Anonymous class instead.</p>\n\n<p>Sample:</p>\n\n<pre><code>public abstract class MyClass {\n     private int a;\n     private int b;\n\n     public String calculate1() {\n          // do processing for variables a and b\n          String sql = \"\" // build sql here\n          List&lt;Map&lt;String, Object&gt;&gt; result = query(sql);\n     }\n\n     public String calculate2() {\n          // do processing for variables a and b\n          String anotherSql = \"\" // build anotherSql\n          List&lt;Map&lt;String, Object&gt;&gt; result = query(anotherSql);\n     }\n\n     protected abstract List&lt;Map&lt;String, Object&gt;&gt; query(String sql);\n\n     // getters and setters for a and b\n}\n\npublic class MyService {\n     @Autowired\n     private QueryService myQueryService;\n\n     public void execute() {\n          MyClass myClass = new MyClass() {\n             @Override\n             protected List&lt;Map&lt;String, Object&gt;&gt; query(String sql) {\n                 return myQueryService.executeQuery(sql);\n             }\n          };\n     }\n}\n</code></pre>\n\n<p>A few things to consider:</p>\n\n<ol>\n<li>My Service is a singleton-scope bean.</li>\n<li>I also like MyClass to be session based (1 instance per user). </li>\n<li>Since I wont be declaring the MyClass in my Spring context, it cannot use dependency injection and cannot use other services. I will be saving the instance in a session and will just be retrieving the instance of MyClass.</li>\n</ol>\n\n<p>Also because of this dilemma, I am forced to use string queries and JDBC template. Originally, our framework uses DAO objects and Hibernate. If someone also can solve the code using DAO, that would be better. If I will be using DAO objects, I would have to use different DAO objects with their DAO service classes.</p>\n\n<p>I am not entirely sure if this is a good design. I don't know also if this will work. I was not able to run this in my environment.</p>\n\n<p>I would really appreciate it if someone can enlighten me.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","rest","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":143,"score":0,"question_id":11985709,"title":"Spring security without form login","body":"<p>I have implemented Spring Security Expression in my application Spring controller:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"init\")\npublic class InitController {\n    @PreAuthorize(\"hasRole('ROLE_ADMIN')\")\n    @RequestMapping(value = \"/\", method = RequestMethod.GET)\n    public @ResponseBody String home(){\n        return \"This is the init page\";\n    }\n}\n</code></pre>\n\n<p>With this security configuration:</p>\n\n<pre><code>&lt;http auto-config=\"true\" create-session=\"stateless\" use-expressions=\"true\"&gt;\n    &lt;intercept-url pattern=\"/_ah*\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/init/*\" access=\"hasRole('ROLE_ADMIN')\"/&gt;\n    &lt;intercept-url pattern=\"/init*\" access=\"hasRole('ROLE_ADMIN')\"/&gt;\n&lt;/http&gt;\n</code></pre>\n\n<p>When this resource is accessed the the default Spring login form is displayed (<code>http://localhost:8888/spring_security_login</code>) however I don't want this to happen and that I just want to have the credentials to be inserted in the request header like \"x-authorization-key\" or whatever that fits the scenario. </p>\n\n<p>What is the possible solution for this? </p>\n\n<ul>\n<li>Is it a good to just have the x-authorization-key to be in the request </li>\n<li>If so, how does it fit with the Spring security mechanism, that is how that it fit with the \"hasRole\" expression</li>\n<li>It is important the the my web service is stateless, and each request gets authenticated</li>\n<li>Finally, how to do deal with Spring security without having to deal with the Spring login form</li>\n</ul>\n\n<p>header</p>\n"},{"tags":["java","spring","tomcat","maven","velocity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13101715,"title":"Spring/Velocity/Maven/Tomcat - \"requested resource is not available\"","body":"<p>I'm writing web application with using Spring, Velocity and Tomcat as container. My problem is that everything worked fine when I launched application on Windows 7, but some day I was forced to replace it with Windows 8. I've installed Eclipse IDE for Java EE Developers, m2e for Maven Integration, Velocity tools and Tomcat 7.x. When I started application, and typed \"http://localhost:8080/web/hello\" I've got <code>\"HTTP Status 404 - The requested resource is not available\"</code> error. I have no idea what is going on, because it worked earlier. If it's needed I can paste some source code, but I think problem is with some wrong path after installing new Windows. Thanks in advance for help</p>\n"},{"tags":["spring","session","spring-security"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1287,"score":2,"question_id":9211662,"title":"Online users with Spring Security","body":"<p>I'm using Spring Security and I would like to know which users are currently online. I first tried the approach using <code>SessionRegistryImpl</code> and <code>&lt;session-management session-authentication-strategy-ref=\"...\" ... /&gt;</code>, but I guess this List is stored in memory and I would like to avoid it (it's going to be a huge website and a lot of users will be online at the same time, the List can become huge). Please correct me if I'm wrong.</p>\n\n<p>The second approach I tried is using a listener and the <code>HttpSessionListener</code> interface and a custom <code>AuthenticationManager</code> and storing the \"is online flag\" in the database. Basically, the flag is set to true in the <code>authenticate(...)</code> method of my authentication manager and set to false in the <code>sessionDestroyed(...)</code> method of my session listener.</p>\n\n<p>web.xml:</p>\n\n<pre><code>&lt;web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee\n         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n         version=\"2.5\"&gt;\n\n    &lt;display-name&gt;Test&lt;/display-name&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/security.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;!-- Security --&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;my.package.SessionListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;test&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;test&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;session-config&gt;\n        &lt;session-timeout&gt;1&lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Spring Security configuration:</p>\n\n<pre><code>&lt;beans:beans xmlns=\"http://www.springframework.org/schema/security\"\n             xmlns:beans=\"http://www.springframework.org/schema/beans\"\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd\"&gt;\n    &lt;beans:bean id=\"authenticationManager\" class=\"my.package.security.AuthenticationManager\" /&gt;\n\n    &lt;http disable-url-rewriting=\"true\" authentication-manager-ref=\"authenticationManager\"&gt;\n        &lt;!--&lt;intercept-url pattern=\"/\" access=\"ROLE_ANONYMOUS\" /&gt;--&gt;\n        &lt;intercept-url pattern=\"/login*\" access=\"ROLE_ANONYMOUS\" /&gt;\n        &lt;intercept-url pattern=\"/favicon.ico\" access=\"ROLE_ANONYMOUS\" /&gt;\n        &lt;intercept-url pattern=\"/*\" access=\"ROLE_USER\" /&gt;\n        &lt;form-login login-processing-url=\"/authorize\" login-page=\"/login\" authentication-failure-url=\"/login-failed\" /&gt;\n        &lt;logout logout-url=\"/logout\" logout-success-url=\"/login\" /&gt;\n        &lt;remember-me data-source-ref=\"dataSource\" /&gt;\n    &lt;/http&gt;\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>my.package.SessionListener:</p>\n\n<pre><code>public class SessionListener implements HttpSessionListener\n{\n    public void sessionCreated(HttpSessionEvent httpSessionEvent)\n    {\n\n    }\n\n    public void sessionDestroyed(HttpSessionEvent httpSessionEvent)\n    {\n        UserJpaDao userDao = WebApplicationContextUtils.getWebApplicationContext(httpSessionEvent.getSession().getServletContext()).getBean(UserJpaDao.class);\n\n        Authentication a = SecurityContextHolder.getContext().getAuthentication();\n        if(a != null)\n        {\n            User loggedInUser = userDao.findByAlias(a.getName());\n\n            if(loggedInUser != null)\n            {\n                loggedInUser.setOnline(false);\n                userDao.save(loggedInUser);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>my.package.security.AuthenticationManager:</p>\n\n<pre><code>public class AuthenticationManager implements org.springframework.security.authentication.AuthenticationManager\n{\n    @Autowired\n    UserJpaDao userDao;\n\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException\n    {\n        User loggedInUser = null;\n        Collection&lt;? extends GrantedAuthority&gt; grantedAuthorities = null;\n\n        ...\n\n        loggedInUser = userDao.findByAlias(authentication.getName());\n        if(loggedInUser != null)\n        {\n            // Verify password etc.\n            loggedInUser.setOnline(true);\n            userDao.save(loggedInUser);\n        }\n        else\n        {\n            loggedInUser = null;\n            throw new BadCredentialsException(\"Unknown username\");\n        }\n\n        return new UsernamePasswordAuthenticationToken(loggedInUser, authentication.getCredentials(), grantedAuthorities);\n    }\n}\n</code></pre>\n\n<p><s><code>sessionCreated</code> and <code>sessionDestroyed</code> are fired correctly, but <code>SecurityContextHolder.getContext().getAuthentication();</code> is always null.</s></p>\n\n<p><strong>Update:</strong> almost everything is working perfectly. The only problem is that when the session expires due to timeout, <code>SecurityContextHolder.getContext().getAuthentication()</code> returns null in the <code>sessionDestroyed(...)</code> method. It works perfectly when the logout is manually triggered.</p>\n\n<p>Can someone help me? Any hint is greatly appreciated.</p>\n\n<p>Thank you</p>\n"},{"tags":["java","mysql","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13101504,"title":"Return Timestamp With Spring Prepared Statement Creator","body":"<p>I use a keyHolder to return an auto generated id when inserting a record into a database like so:</p>\n\n<pre><code>DataSourceTransactionManager transactionManager = new DataSourceTransactionManager(dataSource);\nTransactionTemplate transactionTemplate = new TransactionTemplate(transactionManager);\ntransactionTemplate.execute(new TransactionCallback&lt;Contact&gt;() {\n\n    @Override\n    public Contact doInTransaction(TransactionStatus status) {\n        KeyHolder keyHolder = new GeneratedKeyHolder();\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n\n        //Insert Contact\n        jdbcTemplate.update(new PreparedStatementCreator() {\n            @Override\n            public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {\n                PreparedStatement preparedStatement = connection.prepareStatement(SQL_ADD, Statement.RETURN_GENERATED_KEYS);\n                preparedStatement.setString(1, contact.getFirstName());\n                preparedStatement.setString(2, contact.getLastName());\n                preparedStatement.setInt(3, contact.getOrganizationId());\n                preparedStatement.setString(4, contact.getType());\n                preparedStatement.setInt(5, contact.getUserId());\n                return preparedStatement;\n            }   \n        }, keyHolder);\n        //Set contact's unique ID from returned keyholder.\n        contact.setId(keyHolder.getKey().intValue());\n</code></pre>\n\n<p>In the database I also have a field called dateModified which creates an auto generated timestamp and i'd like to know if I can get this field from within the keyholder (or another way) so I can set the timstamp on my object as well? </p>\n\n<pre><code>contact.setDateModified(keyHolder.getKey(\"timestamp\").dateValue()); \n//Is something like this possible?\n</code></pre>\n\n<p>Does the keyholder only return auto generated id's or can it get the timestamp as well? Currently I query the database again before I return the object and collect the timestamp that way. But this results in a seamingly meaningless and wasteful query and feels like a hack. It would be so much easier to have the date returned automatically with the keyholder and set it the same way I do the id.</p>\n"},{"tags":["java","spring"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13101186,"title":"May Service annotated classes contain SQL/HQL in spring framework?","body":"<p>i examine lots of samples but i didn't find an adequate solution for this.\nSome documents say \"Ideally your business logic layer shouldn’t know there is a database. It shouldn’t know about connection strings or SQL.\"</p>\n\n<p>I found some samples which locate the business logic to @Service annotated classes but they use SQL/HQL in @Service methods.</p>\n\n<p>What should be the ideal usage? If we want to change database or persistence technology should we change only @Repository annotated classes or both of them?</p>\n"},{"tags":["java","spring","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13101139,"title":"Hibernate needed values to save a child","body":"<p>I currently have working code to save children to a parent entity.  But I'm wondering if I'm doing things right since I now have an overload on select statements going thru hibernate.  I do use caching so atm I don't have delay problems but I'm wondering if I can't be more efficient.  Take this little extract as example</p>\n\n<pre><code>MbaLog.debugLog(logger, \"Saving CodeType\");\nSite site = codeType.getSite();\nif (site != null &amp;&amp; site.isProxy())\n    codeType.setSite(siteRepository.loadSiteById(site.getId()));\nLong recordId = codeRepository.saveCodeType(codeType);\n</code></pre>\n\n<p>I have an entity CodeType that I'm saving that has a child Site.  This child is passed to the method as a proxy object with just it's id filled in.  Then I fetch a fully loaded Site object from the database and set it on codetype.  Next up I save the codeType with the sessionfactory of hibernate to the database (code not visible here, but it's behind the codeRepository).</p>\n\n<p>This works but I'm loading a full site, that has childs of it's own so I see at least 5 queries passing before the insert.  I could put a lot of stuff lazy on site, but for the time being I rather not do that due to possible code complications in deeper layers.  I had to learn hibernate and JPA on the job and never had much training from experts in the past.  So I'm wondering, is there a shortcut to save the site on codetype ?  Do I need to have it fully loaded or is the id enough ?  or just the id and version (I'm using @version annotation on all my entities for optimistic locking)</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["facebook","spring","spring-mvc","spring-social"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13094047,"title":"Spring social ConnectController /connect/facebook gives a 404 error","body":"<p>I am trying to get the facebook login working with spring social.\n<strong>I have created an app on facebook.</strong></p>\n\n<p><strong>Dispatcher Servlet</strong> </p>\n\n<pre><code>   &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;ABC&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;*.cs&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n</code></pre>\n\n<p><strong>configfured the xmls</strong></p>\n\n<pre><code>&lt;servlet-mapping&gt;\n&lt;servlet-name&gt;ABC&lt;/servlet-name&gt;\n&lt;url-pattern&gt;*.cs&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n\n&lt;!-- Configure a connection repository through which account-to-provider connections will be stored --&gt; \n&lt;beans:bean id=\"connectionRepository\" class=\"org.springframework.social.connect.jdbc.JdbcConnectionRepository\"&gt;\n&lt;beans:constructor-arg ref=\"dataSource\" /&gt;\n&lt;beans:constructor-arg ref=\"textEncryptor\" /&gt;\n&lt;/beans:bean&gt;\n\n\n\n&lt;!-- Configure a Facebook service provider --&gt;\n&lt;beans:bean class=\"org.springframework.social.facebook.connect.FacebookServiceProvider\"&gt;\n&lt;beans:constructor-arg index=\"0\" value=\"564846465216\" /&gt;\n&lt;beans:constructor-arg index=\"1\" value=\"f4554iojfjh9iu7km54f54pok5ok4\" /&gt;\n&lt;beans:constructor-arg index=\"2\" ref=\"connectionRepository\" /&gt;\n&lt;/beans:bean&gt;\n\n&lt;beans:bean id=\"textEncryptor\" class=\"org.springframework.security.crypto.encrypt.Encryptors\" factory-method=\"noOpText\" /&gt;\n\n&lt;beans:bean class=\"org.springframework.social.web.connect.ConnectController\"&gt;\n&lt;beans:constructor-arg index=\"0\" value=\"http://localhost:8080/CitySpanks/\" /&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n\n<p><strong>I am referring this link</strong>\n<a href=\"http://static.springsource.org/spring-social/docs/1.0.0.M2/reference/html/connecting.html\" rel=\"nofollow\">http://static.springsource.org/spring-social/docs/1.0.0.M2/reference/html/connecting.html</a></p>\n\n<p><strong>in my jsp</strong></p>\n\n<pre><code>&lt;a href=\"&lt;c:url value=\"connect/facebook\" /&gt;\"&gt;Connect to Facebook&lt;/a&gt;\n</code></pre>\n\n<p>Anything i am missing ??? I keep getting a 404 error on clicking the above link.</p>\n\n<p>Thanks :)</p>\n"},{"tags":["eclipse","spring","plugins"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13100203,"title":"STS Spring plugin on Eclipse Juno installation","body":"<p>I am having problem with installation of STS plugin on my Eclipse Juno instance. I am running windows 7 64 bit with 64 bit eclipse and 64 bit java. \nEclipse is installed outside Program Files directory\nError message that I am getting:</p>\n\n<p>Unable to read repository at\n<a href=\"http://dist.springsource.com/release/TOOLS/update/e4.2/compositeContent.xml\" rel=\"nofollow\">http://dist.springsource.com/release/TOOLS/update/e4.2/compositeContent.xml</a></p>\n\n<p>I have tried everything listed here <a href=\"https://issuetracker.springsource.com/browse/STS-2890\" rel=\"nofollow\">https://issuetracker.springsource.com/browse/STS-2890</a></p>\n"},{"tags":["java","mysql","spring","jdbc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1106,"score":0,"question_id":6520284,"title":"Error at connecting to database using Spring","body":"<p>I am trying to run a springexample. I have configured my .xml file as follows. I am using mysql as my DB, but I'm getting the error mentioned below</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n    &lt;bean id=\"dataSource\" destroy-method=\"close\" \n        class=\"org.apache.commons.dbcp.BasicDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"org.hsqldb.jdbcDriver\"/&gt;\n        &lt;property name=\"url\" value=\"jdbc:hsqldb:hsql://127.0.0.1:3306\"/&gt;\n        &lt;property name=\"username\" value=\"root\"/&gt;\n        &lt;property name=\"password\" value=\"root\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"forumDAO\" class=\"com.vaannila.dao.ForumDAOImpl\"&gt;\n         &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>error</p>\n\n<p>EDIT</p>\n\n<p>now changed to</p>\n\n<pre><code>&lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"/&gt;\n&lt;property name=\"url\" value=\"jdbc:mysql://127.0.0.1:3306/test\"/&gt;\n&lt;property name=\"username\" value=\"root\"/&gt;\n&lt;property name=\"password\" value=\"root\"/&gt;\n</code></pre>\n\n<blockquote>\n  <p>Exception in thread \"main\"\n  org.springframework.jdbc.CannotGetJdbcConnectionException: Could not\n  get JDBC Connection; nested exception is\n  org.apache.commons.dbcp.SQLNestedException: Cannot create\n  PoolableConnectionFactory (socket creation error)\n        at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:82)\n        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:572)\n        at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:786)\n        at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:842)\n        at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:850)\n        at com.vaannila.dao.ForumDAOImpl.insertForum(ForumDAOImpl.java:29)</p>\n</blockquote>\n"},{"tags":["spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12887809,"title":"Login validator in java","body":"<p><strong>This  my code in login validator.</strong></p>\n\n<pre><code>@Override\npublic void validate(Object target, Errors error) {\n    LoginCredential credential = (LoginCredential) target;      \n    if (isEmpty(credential.getPassword()) || !loginServiceImpl.isValidCredential(credential)) \n        error.rejectValue(\"password\", null, \"Invalid credential\");\n</code></pre>\n\n<p><strong>If the user log in a wrong password, I got this error.</strong></p>\n\n<p>Invalid property 'password' of bean class [qwerty.asd.domain.hibernate.AgentShift]: Bean property 'password' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?</p>\n\n<p>But I dont have password column in agentShift, its in the login credetial.\nI dont have any idea how to deal with it. Any help will be appreciated.\nThank you in advance.</p>\n\n<p><strong>This is the highlighted error in my login validator:</strong></p>\n\n<p>error.rejectValue(\"password\", null, \"Invalid credential\");</p>\n"},{"tags":["spring","mvc","jackson"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13098971,"title":"How do I add a jackson objectmapper dateformat config into spring mvc config?","body":"<p>I have a problem about jackson 2.1.</p>\n\n<p>My pojo have some date properties, I want turn it to string, I setted it in spring-servlet.xml but it's not usefull.</p>\n\n<p>I don't like use <code>@JsonSerialize(using = JsonDateSerializer.class)</code> on the setter.</p>\n\n<p>this is my configuration:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n    &lt;property name=\"objectMapper\"&gt;\n        &lt;bean class=\"com.fasterxml.jackson.databind.ObjectMapper\"&gt;\n            &lt;property name=\"dateFormat\"&gt;\n                &lt;bean class=\"java.text.SimpleDateFormat\"&gt;\n                    &lt;constructor-arg type=\"java.lang.String\" value=\"yyyy-MM-dd\"&gt;&lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13088835,"title":"Difference between \"addError(ObjectError error)\" and \"rejectValue(String field, String errorCode)\" in Spring","body":"<p>I am trying to understand the difference between:</p>\n\n<ul>\n<li><strong>void addError(ObjectError error) (from\norg.springframework.validation.Errors)</strong> </li>\n<li><strong>void rejectValue(String field,\nerrorCode) (from org.springframework.validation.BindingResult)</strong></li>\n</ul>\n\n<p>I did read the Spring javadocs but could not understand the difference between the two.</p>\n\n<p>Can anyone please provide an explanation or a code sample?</p>\n"},{"tags":["java","web-services","spring","castor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13098920,"title":"No Introspector defined in properties error in castor mapping","body":"<p>when i am trying to unMarshal the xml into object it is showing following error .</p>\n\n<pre><code>[org.exolab.castor.xml.util.resolvers.ByIntrospection] - No Introspector defined in properties!\njava.lang.IllegalStateException: No Introspector defined in properties!\n</code></pre>\n\n<p>my java code is </p>\n\n<pre><code>HttpClient hc=new HttpClient();\n           GetMethod getMethod  =new GetMethod(\"http://xml.rezgo.com/xml?key=2D8-F3V0-X7C0-C6I&amp;transcode=p103&amp;i=search_items&amp;t=tag&amp;q=nature\");\n            try {\n                getMethod.setRequestHeader(\"User-Agent\", \"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1\");\n\n\n\n                int returnCode = hc.executeMethod(getMethod);\n\n                StreamSource streamSource=new StreamSource(getMethod.getResponseBodyAsStream());\n\n                ApplicationContext appContxt=new FileSystemXmlApplicationContext(\"src/test/resources/spring-ws-servlet.xml\");\n       CustomCastorMarshaller castorMarshaller=(CustomCastorMarshaller)appContxt.getBean(\"castorMarshaller\");\n       XMLStreamReader reader = reader = XMLInputFactory.newInstance().createXMLStreamReader(new StreamSource(new StringReader(getMethod.getResponseBodyAsString())));\n       Source staxSource = new StAXSource(reader);\n\n       TourList tourList=(TourList) castorMarshaller.unmarshalStaxSource(staxSource);   \n\n               System.out.println(\"Return code\"+returnCode);\n            //  System.out.println(getMethod.getResponseBodyAsString());\n             System.out.println(tourList.numberOfResult);\n            System.out.println(\"Result ends\");\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            } catch (Exception ex) {\n              ex.printStackTrace();\n            }\n    }\n</code></pre>\n"},{"tags":["java","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13092296,"title":"Hibernate entity class is not picking up","body":"<p>I am trying to use hibernate with annotations. I annotated my class with @Entity (Made sure that this is javax.persistance.Entity instead of Hibernate's entity) and @Table. </p>\n\n<p>When I am trying to query the table with </p>\n\n<pre><code>session.createQuery(\"from HibernateMatchedInvoiceItem\").list()\n</code></pre>\n\n<p>But this is failing with following exception</p>\n\n<pre><code>caused by: org.hibernate.hql.ast.QuerySyntaxException: HibernateMatchedInvoiceItem is not mapped [from HibernateMatchedInvoiceItem]\n</code></pre>\n\n<p>my session factory is defined as follows. </p>\n\n<pre><code>   &lt;bean id=\"SessionFactory\"\n      class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"\n      parent=\"AbstractSessionFactory\" depends-on=\"AppConfigHelper\"&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n      &lt;props&gt;\n        &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.OracleDialect&lt;/prop&gt;\n     &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n</code></pre>\n\n<p>I didn't define persistant.xml file. Is it the reason behind this exception? \nMy doubt is that, since everything hibernate wants(database connection &amp; class mapping) is specified through configuration and annotations, why do we need to specify persistance.xml file explicitly? </p>\n"},{"tags":["java","hibernate","spring"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":606,"score":4,"question_id":9318378,"title":"ClassCastException InjectedDataSourceConnectionProvider Spring 3.1.0, Hibernate 4, JPA EntityManagerFactory","body":"<p>Using:</p>\n\n<ul>\n<li>Spring 3.1.0</li>\n<li>Hibernate 4</li>\n<li>JPA 2</li>\n<li>GWT 2.3.0.</li>\n</ul>\n\n<p>[Similar to <a href=\"http://stackoverflow.com/questions/8891467/exception-in-spring-3-1-hibernate-4-0-1\">Exception in Spring 3.1 + Hibernate 4.0.1</a> ]</p>\n\n<p>When running a very simple GWT application (using the Greeting Service) and adding a spring configuration to the application (via web.xml and related spring configuration files), an exception occurs when the system is brought up in gwt dev mode (from within Eclipse and from the command-line (mvn gwt:run)).</p>\n\n<p>The exception is shown below:</p>\n\n<blockquote>\n  <p>[WARN] Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jgkgwtclasscastissueEntityManagerFactory' defined in ServletContext resource [/WEB-INF/classes/spring-main-config.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: jgkgwtclasscastissue-PU] Unable to build EntityManagerFactory: java.lang.ClassCastException: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider cannot be cast to org.hibernate.service.jdbc.connections.spi.ConnectionProvider</p>\n</blockquote>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n\n    &lt;!-- POM file generated with GWT webAppCreator --&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.gs&lt;/groupId&gt;\n    &lt;artifactId&gt;jgkgwtclasscastissue&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;GWT Maven Archetype&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;gwtVersion&gt;2.3.0&lt;/gwtVersion&gt;\n        &lt;maven.compiler.source&gt;1.6&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;\n        &lt;webappDirectory&gt;${project.build.directory}/${project.build.finalName}    &lt;/webappDirectory&gt;\n        &lt;antlr.version&gt;2.7.6&lt;/antlr.version&gt;\n        &lt;aopalliance.version&gt;1.0&lt;/aopalliance.version&gt;\n        &lt;c3p0.version&gt;0.9.1.2&lt;/c3p0.version&gt;\n        &lt;cglib.version&gt;2.2.2&lt;/cglib.version&gt;\n        &lt;commons-beanutils.version&gt;1.8.3&lt;/commons-beanutils.version&gt;\n        &lt;commons-collections.version&gt;3.1&lt;/commons-collections.version&gt;\n        &lt;commons-logging.version&gt;1.1.1&lt;/commons-logging.version&gt;\n        &lt;ojdbc6.version&gt;11.1.0.7.0&lt;/ojdbc6.version&gt;\n        &lt;commons-dbcp.version&gt;1.4&lt;/commons-dbcp.version&gt;\n        &lt;dom4j.version&gt;1.6.1&lt;/dom4j.version&gt;\n        &lt;ehcache.version&gt;2.4.6&lt;/ehcache.version&gt;\n        &lt;javassist.version&gt;3.9.0.GA&lt;/javassist.version&gt;\n        &lt;javax.inject.version&gt;1.0-PFD-1&lt;/javax.inject.version&gt;\n        &lt;javax.transaction.version&gt;1.1&lt;/javax.transaction.version&gt;\n        &lt;junit.version&gt;4.9&lt;/junit.version&gt;\n        &lt;log4j.version&gt;1.2.16&lt;/log4j.version&gt;\n        &lt;slf4j-api.version&gt;1.6.1&lt;/slf4j-api.version&gt;\n        &lt;slf4j-log4j12.version&gt;1.6.1&lt;/slf4j-log4j12.version&gt;\n\n        &lt;org.aspectj.version&gt;1.6.10&lt;/org.aspectj.version&gt;\n        &lt;org.hibernate.version&gt;4.0.0.Final&lt;/org.hibernate.version&gt;\n        &lt;org.hibernate-commons-annotations.version&gt;4.0.1.Final&lt;/org.hibernate-commons-annotations.version&gt;\n            &lt;org.hibernate.hibernate-validator.version&gt;4.1.0.Final&lt;/org.hibernate.hibernate-validator.version&gt;\n        &lt;org.hibernate.jpamodelgen.version&gt;1.1.1.Final&lt;/org.hibernate.jpamodelgen.version&gt;\n        &lt;org.springframework.version&gt;3.1.0.RELEASE&lt;/org.springframework.version&gt;\n        &lt;org.springframework.data.version&gt;1.0.1.RELEASE&lt;/org.springframework.data.version&gt;\n        &lt;wagon-ssh.version&gt;1.0-beta-6&lt;/wagon-ssh.version&gt;\n\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${slf4j-api.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;${slf4j-log4j12.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\n            &lt;artifactId&gt;gwt-servlet&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.gwt&lt;/groupId&gt;\n            &lt;artifactId&gt;gwt-user&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.7&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;4.1.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n            &lt;version&gt;${org.hibernate-commons-annotations.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;${org.hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;${org.hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-ehcache&lt;/artifactId&gt;\n            &lt;version&gt;${org.hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-asm&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;    \n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;aopalliance&lt;/groupId&gt;\n            &lt;artifactId&gt;aopalliance&lt;/artifactId&gt;\n            &lt;version&gt;${aopalliance.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n            &lt;version&gt;${org.aspectj.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-instrument-tomcat&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.data.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-commons-core&lt;/artifactId&gt;\n            &lt;version&gt;1.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\n            &lt;version&gt;${ojdbc6.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\n            &lt;version&gt;${commons-beanutils.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;\n            &lt;version&gt;${org.hibernate.jpamodelgen.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n            &lt;version&gt;${commons-dbcp.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;!-- Generate compiled stuff in the folder used for developing mode --&gt;\n        &lt;outputDirectory&gt;${webappDirectory}/WEB-INF/classes&lt;/outputDirectory&gt;\n\n        &lt;plugins&gt;\n\n            &lt;!-- GWT Maven Plugin --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;gwt-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                            &lt;goal&gt;test&lt;/goal&gt;\n                            &lt;goal&gt;i18n&lt;/goal&gt;\n                            &lt;goal&gt;generateAsync&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;runTarget&gt;jgkgwtclasscastissue.html&lt;/runTarget&gt;\n                    &lt;hostedWebapp&gt;${webappDirectory}&lt;/hostedWebapp&gt;\n                                &lt;i18nMessagesBundle&gt;com.gs.client.Messages&lt;/i18nMessagesBundle&gt;\n                    &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;!-- Copy static web files before executing gwt:run --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.1.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;exploded&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;webappDirectory&gt;${webappDirectory}&lt;/webappDirectory&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>It is unclear where the problem is.  Any suggestions?</p>\n"},{"tags":["spring","java-ee","transactions","osgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13088189,"title":"How to use Spring in OSGI environment?","body":"<p>Basically, I want to be able to use Spring to do this in an OSGI bundle:</p>\n\n<ul>\n<li>use applicationContext.xml to define beans and proxy and decorate them</li>\n<li>use @Transactional on a method to give it a transaction (Spring will need to proxy it)</li>\n</ul>\n\n<p>I understand that there is Spring DM which has been retired into Eclipse Gemini. I can still use spring DM 2.0 that will allow me point 1 with spring blueprint? Is there a way to use 'regular' Spring to do this too? </p>\n\n<p>How do I do point 2? Is it possible to use Spring in OSGI bundle to provide transactions? Has anyone done this successfully?</p>\n\n<p>Should I stay away from Spring in OSGI, or is there more that I'm not aware of?</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":22,"score":2,"question_id":13094133,"title":"How do I \"capture\" the part of the path matched by **","body":"<p>I've got a @RequestMapping that looks like:</p>\n\n<pre><code>@RequestMapping(\"/foo/{bar}/blah/**\")\npublic void handleRequest(@PathVariable String bar, @PathVariable String remainder) {\n</code></pre>\n\n<p>How do I configure things so that remainder gets whatever is matched by \"**\"?</p>\n"},{"tags":["java","spring","postgresql","lucene"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13050010,"title":"Get random row from very big file with Lucene","body":"<p>I have a Spring-based Java webapp. And my problem is:</p>\n\n<p>I have a file which has 34MB and has 2.7 million lines. Lines are just single words one after another:</p>\n\n<pre><code>abc\nabcdfg\nxyz\netc\n</code></pre>\n\n<p>I need to choose 15 random unique lines from this file <strong>which are not next to each other</strong> in a quite fast way. I know that to search such a big files I can use Apache Lucene. Do you know if Lucene can get for me these random lines. Or maybe you have some other idea that can help me to solve this problem.</p>\n\n<p>I would really appreciate any help</p>\n\n<p>Thanks in advance</p>\n\n<p>EDIT:</p>\n\n<p>Or maybe just put this file into database [PostgreSQL]?</p>\n"},{"tags":["spring","spring-security","logout","session-management"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":5397,"score":2,"question_id":2601013,"title":"Spring Security: Redirect to invalid-session-url instead of logout-success-url on successful logout","body":"<p>I have implemented a login-logout system with Spring Security 3.0.2, everything is fine but for this one thing: after I added a session-management tag with invalid-session-url attribute, on logout Spring would always redirect me on the invalid-session-url instead of the logout-success-url (which it correctly did before).</p>\n\n<p>Is there a way to avoid this behaviour?</p>\n\n<p>This is my configuration:</p>\n\n<pre><code>&lt;http use-expressions=\"true\" auto-config=\"true\"&gt;\n        [...some intercept-url's...]\n\n    &lt;form-login login-page=\"/login\" authentication-failure-url=\"/login?error=true\"\n            login-processing-url=\"/login-submit\" default-target-url=\"/home\"\n            always-use-default-target=\"true\" /&gt;\n\n    &lt;logout logout-success-url=\"/home?logout=true\" logout-url=\"/login-logout\" /&gt;\n\n    &lt;session-management invalid-session-url=\"/home?invalid=true\" /&gt;\n&lt;/http&gt;\n</code></pre>\n\n<p>Thanks a lot.</p>\n"},{"tags":["spring","maven","struts2","continuous-integration","integration-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":13093346,"title":"How do I control spring injections that vary between the test environment and the production environment?","body":"<p>I'm setting up a CI situation in which I will deploy my web app to a test environment.  In this test environment, I want the business objects used by the app to be mocks of the real ones; the mocks will return static test data.  I'm using this to run tests agains my ui. I'm controlling the injections of these business object dependencies with Spring; it's a struts 2 application, for what that's worth. </p>\n\n<p>My question is Maven related, I think.  What is the best way to have my Maven build determine whether or not to build the spring configuration out for injecting the mocks or injecting the real thing?  Is this a good use for maven profiles?  Other alternatives?  </p>\n"},{"tags":["java","spring","dependency-injection"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":4701,"score":4,"question_id":3141130,"title":"conditional beans using spring","body":"<p>I am trying to write a <code>ValidatorFactory</code> which will give me a validator based on its type </p>\n\n<pre><code>public Validator getNewValidator(ValidatorType type){\n\n    switch:\n         case a : new Validator1();\n         break;\n          case b : new Validator2();\n        break;\n\n}\n</code></pre>\n\n<p>I want to write using spring xml beans definition</p>\n\n<p>I can use method injection but it will let me create only one object and the method does </p>\n\n<p>not take any arguments.</p>\n\n<p>I don't want to use <code>FactoryBean</code>.. I am just looking whether we can do this using spring xml </p>\n\n<p>bean definition.</p>\n"},{"tags":["java","spring","frameworks","java-ee-6"],"answer_count":6,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":1121,"score":9,"question_id":4670365,"title":"Should I go for Spring or stick with Java EE 6?","body":"<p>I will be finishing the core Java course and now I have to move on to <a href=\"http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition\">Java EE</a> side.\nI am so much confused that I should simply go with Java EE 6 because I have the books which easily teach from start to end and everything is there.</p>\n\n<p>Or should I start with <a href=\"http://en.wikipedia.org/wiki/Spring_Framework\">Spring</a> only?</p>\n\n<p>Because as I have to start from scratch it is good I follow the trend which is good and more job oriented.</p>\n\n<p>Or even if I do Java EE only and then if I need to move on to Spring it will be fast or vice versa.</p>\n\n<p>Also where does <a href=\"http://en.wikipedia.org/wiki/Hibernate_%28Java%29\">Hibernate</a> stand between them? I mean if I use Java EE 6, do I still need Hibernate or in Java EE 6, I don't need it.</p>\n\n<p>Will I be at a disadvantage if I don't use Spring or Spring can make my building web application any way easier than the core Java EE/ <a href=\"http://en.wikipedia.org/wiki/JavaServer_Faces\">JSF</a> framework.</p>\n"},{"tags":["java","spring","spring-mvc","freemarker"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":5478,"score":3,"question_id":3129167,"title":"First steps with freemarker with spring mvc","body":"<p>So I have Index action in my HomeController.java class.</p>\n\n<p>I have my freemarker templates in:</p>\n\n<pre><code>/web-inf/ftl/test.ftl\n</code></pre>\n\n<p>How can I load the template?</p>\n\n<p>I have this in my appname-servlet.xml:</p>\n\n<pre><code> &lt;bean id=\"viewResolver\"\n          class=\"org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver\"&gt;\n        &lt;property name=\"suffix\"&gt;\n            &lt;value&gt;.ftl&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"freemarkerConfig\" class=\"org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer\"&gt;\n        &lt;property name=\"templateLoaderPath\" value=\"/WEB-INF/freemarker/\"/&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p><strong>What should my action code look like for HomeController index action?</strong></p>\n\n<p>I have /web-inf/freemarker/index.ftl </p>\n"},{"tags":["java","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13092607,"title":"Bean creation exception","body":"<p>My application context looks likt this,</p>\n\n<pre><code>&lt;bean id=\"caseTxBo\" class=\"gov.case.rcp.bo.impl.caseTxBoImpl\" &gt;\n            &lt;property name=\"caseTxDao\" ref=\"caseTxDao\" /&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"caseTxDao\" class=\"gov.case.rcp.dao.impl.caseTxDaoImpl\" &gt;\n            &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n</code></pre>\n\n<p>Action class gets the context like this:</p>\n\n<pre><code>ServletContext context = request.getSession().getServletContext();\n     BeanFactory factory = WebApplicationContextUtils.\n           getRequiredWebApplicationContext(context);\n     CaseTxBOImpl caseTxBo = (\n\n             caseTxBoImpl) factory.getBean(\"caseTxBo\");\n\n     List&lt;caseTxPmt&gt; errorVarList =       \n     caseTxBo.getcaseTxDao().findAllcaseTx();\n\n    model.put(\"caseTxList\", caseTxList);\n</code></pre>\n\n<p>BOImpl implements Dao and DAOImpl implements Dao:</p>\n\n<p>DaoImpl has the implementation and returns caseTxList.</p>\n\n<p>but I get a runTimeException as </p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'caseTxBo' defined in ServletContext resource [/WEB-INF/classes/applicationContext.xml]: Cannot resolve reference to bean 'caseTxDao' while setting bean property 'caseTxDao'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'caseTxDao' defined in ServletContext resource [/WEB-INF/classes/applicationContext.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'sessionFactory' of bean class [gov.case.rcp.pp.dao.impl.CaseTxDaoImpl]: Bean property 'sessionFactory' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?\nfollows:\nat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)\n</code></pre>\n\n<p>Where did i go wrong?</p>\n"},{"tags":["java","xml","spring","spring-mvc","base64"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":1,"view_count":8202,"score":4,"question_id":9845767,"title":"Base64 Encoder - Java","body":"<p>I have to encode a XML file to Base64 String. We are using Java 6. Is there any open source API to encode to Base64 format?\n    The XML file is also a generated one. So, do i need to create an XML file first and convert? \n    Can i just create the XML in a String or StringBuffer and encode to Base64?\n    Will that can be decoded to a XML file?</p>\n\n<p>Please help</p>\n"},{"tags":["java","web-services","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13091593,"title":"Spring error in Restful webservice calling","body":"<p>when i am tring to access rezgo sample api using restful webservice i am geting exception .i want to get convert this response in sample object\npackage com.mycompany.hr.client;</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.apache.log4j.Logger;\nimport org.springframework.http.HttpEntity;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.client.RestOperations;\nimport org.springframework.web.client.RestTemplate;\nimport org.springframework.ws.client.core.WebServiceTemplate;\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n\n        List&lt;MediaType&gt; acceptableMediaTypes = new ArrayList&lt;MediaType&gt;();\n          acceptableMediaTypes.add(MediaType.APPLICATION_XML);\n          HttpHeaders headers = new HttpHeaders();\n          headers.setAccept(acceptableMediaTypes);\n          //ResponseEntity&lt;String&gt; result = restTemplate.exchange(\"http://localhost:8080/spring-rest-provider/krams/person/{id}\", HttpMethod.PUT, entity, String.class, id);\n          Map&lt;String,String&gt; urlParam=new HashMap&lt;String,String&gt;();\n          urlParam.put(\"key\",\"2D8-F3V0-X7C0-C6I\");\n          urlParam.put(\"transcode\", \"p103\");\n          urlParam.put(\"i\", \"p103\");\n          urlParam.put(\"t\", \"tag\");\n          urlParam.put(\"q\", \"nature\");\n\n          RestTemplate wsTemplate = new RestTemplate();\n         ResponseEntity&lt;TourList&gt; tl=( wsTemplate).getForEntity(\"http://xml.rezgo.com/xml?key=2D8-F3V0-X7C0-C6I&amp;transcode=p103&amp;i=search_items&amp;t=tag&amp;q=nature\",TourList.class,Collections.singleton(urlParam));\n\n    }\n\n}\n</code></pre>\n\n<p>this is my code i am geting following exception.</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoSuchMethodError: org.springframework.util.CollectionUtils.unmodifiableMultiValueMap(Lorg/springframework/util/MultiValueMap;)Lorg/springframework/util/MultiValueMap;\n    at org.springframework.web.util.UriComponents.&lt;init&gt;(UriComponents.java:100)\n    at org.springframework.web.util.UriComponentsBuilder.build(UriComponentsBuilder.java:222)\n    at org.springframework.web.util.UriComponentsBuilder.build(UriComponentsBuilder.java:212)\n    at org.springframework.web.util.UriTemplate.&lt;init&gt;(UriTemplate.java:70)\n    at org.springframework.web.client.RestTemplate$HttpUrlTemplate.&lt;init&gt;(RestTemplate.java:653)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:407)\n    at org.springframework.web.client.RestTemplate.getForEntity(RestTemplate.java:229)\n    at com.mycompany.hr.client.Main.main(Main.java:52)\n</code></pre>\n\n<p>please help me resolve this problem.</p>\n"},{"tags":["spring","optional","spring-el"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13084229,"title":"How to inject a bean only when it exists","body":"<p>I have the following structure of spring context files ( <code>-&gt;</code> stands for 'includes') :</p>\n\n<pre><code>A1.xml -&gt; B.xml &amp; C.xml\nA2.xml -&gt; B.xml\n</code></pre>\n\n<p><code>C.xml</code> defines a bean <code>c</code></p>\n\n<p><code>B.xml</code> defines a bean <code>b</code> with a dependency on <code>c</code></p>\n\n<p>Obviously this fails for A2, because there is no <code>c</code> defined in the context <code>A2</code>.</p>\n\n<p><strong>How can I specify something like: if you have <code>c</code> in the context inject it in <code>b</code> otherwise just inject <code>null</code>?</strong></p>\n\n<p>I looked into Spring EL but </p>\n\n<pre><code>&lt;property name=\"b\" ref=\"#{ @c?:null}\" /&gt;\n</code></pre>\n\n<p>Just gave me a <code>NoSuchBeanDefinitionException</code> for a name which seemed to be the value of <code>b.toString()</code> !?</p>\n\n<p>Btw: I already know that this thing is messy as hell and should be cleaned up as fast as possible.</p>\n"},{"tags":["xml","spring","mongodb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12880444,"title":"Spring servlet-context.xml error with mongo","body":"<p>I have the following spring servlet-context.xml file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans \n    xmlns=\"http://www.springframework.org/schema/beans\" \n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\" \n    xmlns:sec=\"http://www.springframework.org/schema/security\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:mongo=\"http://www.springframework.org/schema/data/mongo\"\n    xmlns:p=\"http://www.springframework.org/schema/p\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n        http://www.springframework.org/schema/data/mongo http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd\n        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd\n        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n</code></pre>\n\n<p>and I get in eclipse the following error on the file:</p>\n\n<blockquote>\n  <p>The errors below were detected when validating the file\n  \"spring-mongo-1.0.xsd\" via the file \"servlet-context.xml\".  In most\n  cases these errors can be detected by validating\n  \"spring-mongo-1.0.xsd\" directly.  However it is possible that errors\n  will only occur when spring-mongo-1.0.xsd is validated in the context\n  of servlet-context.xml.</p>\n</blockquote>\n\n<p>src-resolve:Cannot resolve the name 'repository:repository'to a(n) 'type definition' componenent Location: line 110</p>\n\n<p>The project still works, but I am trying to get rid of this error. Any ideas?</p>\n"},{"tags":["spring","deployment","websphere"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12898444,"title":"Deploying Spring in WAS-ND","body":"<p>I'm encountering this error whenever I deploy my .war file to WAS-ND.</p>\n\n<pre><code>Error Stack: \norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file &lt;filename&gt;\n\nnested exception is java.lang.IncompatibleClassChangeError: org.springframework.asm.ClassVisitor \n\n\nCaused by: java.lang.IncompatibleClassChangeError: org.springframework.asm.ClassVisitor\n</code></pre>\n\n<p>I did some research and found out that I needed the cglib and asm jars for this to work. Unfortunately, I already have them...</p>\n\n<p>Jars: </p>\n\n<pre><code>cglib-nodep-2.2.2.jar\nspring-asm-3.1.1.RELEASE.jar\n</code></pre>\n\n<p>I don't understand why it still won't work... Any help here? :(</p>\n"},{"tags":["spring","hibernate","transactions"],"answer_count":3,"favorite_count":3,"up_vote_count":2,"down_vote_count":1,"view_count":81,"score":1,"question_id":13066017,"title":"@Transactional in Spring+Hibernate","body":"<p>I an using <strong>Spring 3.1 + Hibernate 4.x</strong> in my web application. \nIn my DAO, i am saving User type object as following </p>\n\n<pre><code>sessionFactory.getCurrentSession().save(user);\n</code></pre>\n\n<p>But getting following exception:</p>\n\n<pre><code>org.hibernate.HibernateException: save is not valid without active transaction\n</code></pre>\n\n<p>I googled and found similar <a href=\"http://stackoverflow.com/questions/12002737/org-hibernate-hibernateexception-save-is-not-valid-without-active-transaction\">question</a> on SO, with following solution:</p>\n\n<pre><code>   Session session=getSessionFactory().getCurrentSession();\n   Transaction trans=session.beginTransaction();\n   session.save(entity);\n   trans.commit();\n</code></pre>\n\n<p>That solves the problem. But in that solution, there is lot of mess of beginning and committing the transactions manually. </p>\n\n<p>Can't i use     <code>sessionFactory.getCurrentSession().save(user);</code> directly without begin/commit of transactions manually?</p>\n\n<p>I try to use <code>@Transactional</code> on my service/dao methods too, but the problem persists.</p>\n\n<p><strong>EDIT :</strong> Here is my Hibernate Config File:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n     xmlns:p=\"http://www.springframework.org/schema/p\"\n     xmlns:aop=\"http://www.springframework.org/schema/aop\"\n     xmlns:tx=\"http://www.springframework.org/schema/tx\"\n     xsi:schemaLocation=\"\n     http://www.springframework.org/schema/beans \n     http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n     http://www.springframework.org/schema/tx\n     http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n     http://www.springframework.org/schema/aop \n     http://www.springframework.org/schema/aop/spring-aop-3.1.xsd\"&gt;\n\n\n  &lt;!-- enable the configuration of transactional behavior based on annotations --&gt;\n  &lt;tx:annotation-driven transaction-manager=\"txManager\"/&gt;\n\n    &lt;bean id=\"dataSource\"\n        class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"\n        p:driverClassName=\"${db.driverClassName}\" p:url=\"${db.url}\"\n        p:username=\"${db.username}\" p:password=\"${db.password}\" /&gt;\n\n    &lt;bean id=\"sessionFactory\"\n        class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"packagesToScan\" value=\"com.myapp.entities\" /&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n\n    &lt;bean id=\"txManager\"\n        class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n        &lt;property name=\"sessionFactory\"&gt;\n            &lt;ref bean=\"sessionFactory\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>I am using following Hibernate 4 dependencies:</p>\n\n<pre><code>&lt;!-- Hibernate Dependency --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;4.1.7.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;4.1.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;cglib&lt;/groupId&gt;\n            &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n            &lt;version&gt;${cglib.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n\n<p>Please help.</p>\n"},{"tags":["java","spring","spring-mvc","twitter-api","spring-social"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13089657,"title":"No matching bean of type [org.springframework.social.twitter.api.Twitter] found for dependency","body":"<p>I'm using Spring Social to connect to Twitter.\nThe connect part works okay, but when I try to get the friends list, I get the following error:</p>\n\n<pre><code>Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.springframework.social.twitter.api.Twitter] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}\n</code></pre>\n\n<p>My Controller class:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/social\")\npublic class SocialController {\n\n    private final Twitter twitter;\n\n    @Inject\n    public SocialController(Twitter twitter) {\n        this.twitter = twitter;\n    }\n\n    @RequestMapping(value=\"/twitter/friends\", method=RequestMethod.GET)\npublic String friends(Model model) {\n    model.addAttribute(\"profiles\", twitter.friendOperations().getFriends());\n    return \"twitter/friends\";\n}\n}\n</code></pre>\n\n<p>My XML config is as follows: (only relevant part shown)</p>\n\n<pre><code>&lt;!-- Spring Social --&gt;\n    &lt;bean id=\"connectionFactoryLocator\"\n        class=\"org.springframework.social.connect.support.ConnectionFactoryRegistry\"&gt;\n        &lt;property name=\"connectionFactories\"&gt;\n            &lt;list&gt;\n                &lt;bean\n                    class=\"org.springframework.social.twitter.connect.TwitterConnectionFactory\"&gt;\n                    &lt;constructor-arg value=\"${twitter.consumerKey}\" /&gt;\n                    &lt;constructor-arg value=\"${twitter.consumerSecret}\" /&gt;\n                &lt;/bean&gt;\n                &lt;bean\n                    class=\"org.springframework.social.facebook.connect.FacebookConnectionFactory\"&gt;\n                    &lt;constructor-arg value=\"${facebook.clientId}\" /&gt;\n                    &lt;constructor-arg value=\"${facebook.clientSecret}\" /&gt;\n                &lt;/bean&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"textEncryptor\" class=\"org.springframework.security.crypto.encrypt.Encryptors\"\n        factory-method=\"noOpText\" /&gt;\n\n    &lt;bean id=\"usersConnectionRepository\"\n        class=\"org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository\"&gt;\n        &lt;constructor-arg ref=\"jpaDataSource\" /&gt;\n        &lt;constructor-arg ref=\"connectionFactoryLocator\" /&gt;\n        &lt;constructor-arg ref=\"textEncryptor\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"connectionRepository\" factory-method=\"createConnectionRepository\"\n        factory-bean=\"usersConnectionRepository\" scope=\"request\"&gt;\n        &lt;constructor-arg value=\"#{request.userPrincipal.name}\" /&gt;\n        &lt;aop:scoped-proxy proxy-target-class=\"false\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean class=\"org.springframework.social.connect.web.ConnectController\"&gt;\n        &lt;!-- relies on by-type autowiring for the constructor-args --&gt;\n        &lt;property name=\"applicationUrl\" value=\"${application.url}\" /&gt;\n    &lt;/bean&gt;\n    &lt;!-- Spring Social --&gt;\n</code></pre>\n\n<p>Please guide. I'll be very thankful.</p>\n\n<h2>EDIT</h2>\n\n<p>I think I forgot to add </p>\n\n<pre><code>@Bean\n    @Scope(value=\"request\", proxyMode=ScopedProxyMode.INTERFACES)   \n    public Twitter twitter() {\n        Connection&lt;Twitter&gt; twitter = connectionRepository().findPrimaryConnection(Twitter.class);\n        return twitter != null ? twitter.getApi() : new TwitterTemplate();\n    }\n</code></pre>\n\n<p>to the XML file. Any idea how it would be represented in the XML context. I'm new to Annotation based config &amp; hence using xml based ones. Please help.</p>\n\n<h2>EDIT 2</h2>\n\n<p>I settled for a workaround. Decided to use both Annotation based config and XML based config together.\nJust adding the thing I did for everyone:</p>\n\n<p>I added a config:</p>\n\n<pre><code>public class SocialApiConfig {\n    @Bean\n    @Scope(value=\"request\", proxyMode=ScopedProxyMode.INTERFACES)   \n    public Facebook facebook(ConnectionRepository connectionRepository) {\n        Connection&lt;Facebook&gt; facebook = connectionRepository.findPrimaryConnection(Facebook.class);\n        return facebook != null ? facebook.getApi() : new FacebookTemplate();\n    }\n\n    @Bean\n    @Scope(value=\"request\", proxyMode=ScopedProxyMode.INTERFACES)   \n    public Twitter twitter(ConnectionRepository connectionRepository) {\n        Connection&lt;Twitter&gt; twitter = connectionRepository.findPrimaryConnection(Twitter.class);\n        return twitter != null ? twitter.getApi() : new TwitterTemplate();\n    }\n}\n</code></pre>\n\n<p>Then included this in my XML based config</p>\n\n<pre><code>&lt;bean class=\"com.joinups.config.SocialApiConfig\" /&gt;\n</code></pre>\n\n<p>Thanks to everyone for guiding me get the correct answer! Thanks a lot. You guys rock!</p>\n"},{"tags":["spring","mybatis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13072363,"title":"MyBatis very slow","body":"<p>I'm wondering why MyBatis is <strong>slow</strong> in my application.</p>\n\n<p>For a <code>SELECT COUNT(*)</code>, the time taken is:</p>\n\n<ol>\n<li>20 secs    - first request</li>\n<li>2-3 secs   - subsequent requests</li>\n</ol>\n\n<p>Caching, most likely, is making the subsequent requests faster.</p>\n\n<h1>Configuration</h1>\n\n<ul>\n<li><strong>3-tier</strong> (WPF UI - Java Backend - Oracle Database)</li>\n<li><strong>JBoss</strong> Server exposes the Java Backed as a Web-Service for the WPF UI</li>\n<li><strong>Request time</strong> == time taken between when the WPF UI sends and receives the result</li>\n</ul>\n\n<h1>Approaches tried</h1>\n\n<ol>\n<li><p><strong>Disabled logging</strong></p>\n\n<p>I don't know if disabling both the logging subsystem and log4j makes a difference; but, the best I got was 15 secs for the <code>SELECT COUNT(*)</code>.</p></li>\n<li><p><strong>Disabled Caching and Lazy loading</strong></p>\n\n<p>This too probably made a 5 sec difference at most.</p></li>\n</ol>\n\n<h2>Do the following help?</h2>\n\n<ol>\n<li>Using explicit <strong>result mapping</strong>, by turning off auto-mapping. (See Result Maps <a href=\"http://www.mybatis.org/core/sqlmap-xml.html\" rel=\"nofollow\">here</a>).</li>\n<li>Using <strong>Pooling</strong>. (See environments <a href=\"http://www.mybatis.org/core/configuration.html\" rel=\"nofollow\">here</a>).</li>\n</ol>\n\n<p>The above techniques are listed here:</p>\n\n<ol>\n<li><a href=\"http://mybatis-user.963551.n3.nabble.com/myBatis-is-slow-td2236249.html\" rel=\"nofollow\">MyBatis forums</a></li>\n<li><a href=\"http://www.jboss.com/pdf/JB_JEAP4_3_PerformanceTuning_wp.pdf\" rel=\"nofollow\">JBoss Best Practices</a> (Page 9)</li>\n</ol>\n\n<h3>Another example</h3>\n\n<p>For a nested SQL statement with 2 joins and 1 sub-query, the time taken is:</p>\n\n<ol>\n<li>60-90 secs - first request</li>\n<li>2-3 secs   - subsequent requests</li>\n</ol>\n\n<h2>Edits</h2>\n\n<ol>\n<li><strong>Spring Framework</strong> being used (I discovered this just now as the code I have is inherited from somebody else).</li>\n<li>Do <strong>transactions</strong> help speed up SQL statements with <strong>sub-queries</strong>?</li>\n<li><strong>MS SQL</strong> database being used (not Oracle as previously mentioned).</li>\n</ol>\n"},{"tags":["java","spring","marshalling","jaxb2","unmarshalling"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13089624,"title":"JAXB2 annotations: troubles rendering a value in a list","body":"<p>Ihave some issues trying to render the following xml code with JAXB2 annotations:</p>\n\n<pre><code>....\n&lt;bizTransactionList&gt;\n    &lt;bizTransaction type=\"urn:epcglobal:fmcg:btt:po\"&gt;\n        http://transaction.acme.com/po/54847\n    &lt;/bizTransaction&gt;\n    &lt;!--other entries --&gt;\n&lt;/bizTransactionList&gt;\n...\n</code></pre>\n\n<p>following the <a href=\"http://jaxb.java.net/tutorial/section_6_2_7_4-Mapping-a-Class-to-Simple-Content-or-Simple-Type-XmlValue.html#Mapping%20a%20Class%20to%20Simple%20Content%20or%20Simple%20Type%3a%20XmlValue\" rel=\"nofollow\">documentation</a> I managed to solve the problem as follows:\n1) inside the class which owns the list I annotate the list getter this way</p>\n\n<pre><code>@XmlElementWrapper(name=\"bizTransactionList\")\n@XmlElement(name=\"bizTransaction\")\npublic List&lt;BizTransaction&gt; getBizTransactionList() {\n    return bizTransactionList;\n}\n</code></pre>\n\n<p>2) I create the BizTransaction class as follows</p>\n\n<pre><code>public class BizTransaction {\n\n    private URI transactionId;\n    private URI type;\n\n    @XmlValue\n    public URI getTransactionId() {\n        return transactionId;\n    }\n\n    public void setTransactionId(URI transactionId) {\n        this.transactionId = transactionId;\n    }\n\n    @XmlAttribute\n    public URI getType() {\n        return type;\n    }\n\n    public void setType(URI type) {\n        this.type = type;\n    }\n\n    public BizTransaction() {\n        // TODO Auto-generated constructor stub\n    }\n\n    public BizTransaction(URI transactionId, URI type) {\n        super();\n        this.transactionId = transactionId;\n        this.type = type;\n    }\n\n}\n</code></pre>\n\n<p>now the problem is that the attribute works fine, but the value (i.e. the transactionId variable) is always null.\nCan you help me to spot the problem?</p>\n"},{"tags":["spring","session","rest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13089102,"title":"How to retrieve users count on REST_client side and use it on REST_server side?","body":"<p>I have a Spring RESTful application which has server and client. The client provide a login and searching interface, and the server verifies the user and does the query with a DB-like component. The requirement is that close DB connection unless there is no more user activity. Because we don't want make new connection for every query since it is quite slow. The question is how can I retrieve the user information to be used in server side so that deciding to close the connection or not. Spring Security? </p>\n\n<p>Hope the question is clear, thanks a lot..</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13058108,"title":"Autowiring hierarchical beans","body":"<p>Here's my scenario. I have two classes <strong>ClassA</strong> and <strong>ClassB</strong>. <strong>ClassB</strong> inherits <strong>ClassA</strong>. \n<br>I'm using <code>@Component</code> annotation on both of them to make them Spring beans. </p>\n\n<pre><code>@Component\npublic class ClassA{\n    // parent\n}\n\n@Component\npublic class ClassB extends ClassA{\n    // child\n}\n\npublic class ClassC{\n\n    @Autowired\n    private ClassA classA;\n\n    public void doSomething(){\n\n    }\n}\n</code></pre>\n\n<p>Now, whenever I try to use <code>@autowired</code> annotation in <strong>ClassC</strong> to inject <strong>ClassA</strong> as shown above, I get the following exception. </p>\n\n<blockquote>\n  <p>No unique bean of type [<strong>ClassA</strong>] is defined: expected single matching bean but found 2: [<strong>classA</strong>, <strong>classB</strong>]</p>\n</blockquote>\n\n<p>I understand that when auto-wiring by type, spring finds two beans that are assignable to <strong>ClassA</strong> and so it throws an exception. </p>\n\n<p>Is there an easy way to resolve this problem apart from using <code>@Qualifier</code> annotation and auto-wiring by name? </p>\n\n<p>Could I instruct spring to not only check for a bean that is assignable by type but also check to see if  it is the exact same class type? </p>\n"},{"tags":["java","spring","java-ee","jpa"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":13070157,"title":"Transaction in JPA using multiple threads","body":"<p>My objective is to provoke an optimistic locking exception in my application using a unit test. I already have a understanding on how to do this in theory. But my problem in practice is how do I maintain a transaction between two threads ?</p>\n\n<p>So, this is what I've done so far:</p>\n\n<p>I am using a JUnit test with:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n</code></pre>\n\n<p>using EntityManager <em>org.springframework.orm.jpa.JpaTransactionManager</em></p>\n\n<p>where each method is defined <code>@Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class)</code></p>\n\n<p>and start a transaction with <code>entityManager.getTransaction().begin();</code> and end with <code>entityManager.getTransaction().rollback());</code></p>\n\n<p>This works great, saving, updating etc in single threaded tests.</p>\n\n<p>To create multiple threads I use Springs TaskExecutor (similiar to what's desribed here:  <a href=\"http://stackoverflow.com/questions/852743/any-good-spring-threading-with-a-taskexecutor-examples\">Any good Spring threading with a TaskExecutor examples?</a>)</p>\n\n<p>But what do I have to do to maintain the transaction between the two threads? I've tried stuff like annotating the run()-method with @Transactional but this doesn't work.</p>\n"},{"tags":["java","spring","mvc","freemarker"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13085693,"title":"Spring with FreeMarker: Could not resolve view with name 'Home' in servlet with name 'MyServlet'","body":"<p>I am trying to create a very simple integration of FreeMarker and Spring. However, when I run my example, I get an exception:</p>\n\n<pre><code>GRAVE: Servlet.service() for servlet MyServlet threw exception\njavax.servlet.ServletException: Could not resolve view with name 'Home' in servlet with name 'MyServlet'\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1162)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    at java.lang.Thread.run(Thread.java:662)\n</code></pre>\n\n<p>I don't know what's wrong with my configuration:</p>\n\n<p><strong>web.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"2.5\" xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextClass&lt;/param-name&gt;\n        &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;com.jverstry.Configuration&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p><strong>Web Configuration</strong></p>\n\n<pre><code>@EnableWebMvc\n@Configuration\n@ComponentScan(basePackages = \"com.jverstry\")\npublic class WebConfig extends WebMvcConfigurerAdapter {\n\n    @Bean\n    public ViewResolver getViewResolver() {\n\n        FreeMarkerViewResolver resolver = new FreeMarkerViewResolver();\n        resolver.setCache(true);\n        resolver.setPrefix(\"WEB-INF/pages/\");\n        resolver.setSuffix(\".ftl\");\n\n        return resolver;\n\n    }\n\n    @Bean\n    public FreeMarkerConfigurer getFreemarkerConfig() {\n\n        FreeMarkerConfigurer result = new FreeMarkerConfigurer();\n\n        result.setTemplateLoaderPath(\"WEB-INF/pages/\");\n\n        return result;\n\n    }   \n\n}\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>@Controller\npublic class MyController {\n\n    @RequestMapping(value = \"/\")\n    public String home(@ModelAttribute(\"model\") ModelMap model) {\n\n        model.addAttribute(\"MsTime\", System.currentTimeMillis());\n\n        return \"Home\";\n\n    }\n\n}\n</code></pre>\n\n<p><strong>P.S.</strong>: Of course, there is a <code>Home.ftl</code> file in <code>WEB-INF/pages/</code>.</p>\n"},{"tags":["java","spring","soap","jax-ws"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13088578,"title":"Pass object to SOAPHandler without cast in JAX-WS","body":"<p>I'm searching for a way, on the client side, to pass an object to my SOAPHandler without casting my Port object to a BindingProvider to get at the request context.  Usually you see code like:</p>\n\n<pre><code>Map&lt;String,Object&gt; requestContext = ((BindingProvider)port).getRequestContext();\nrequestContext.put(\"key\", object);\n</code></pre>\n\n<p>Where the code in your handler would look like:</p>\n\n<pre><code>public boolean handleMessage(SOAPMessageContext context) {\n    Boolean isRequest = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);\n\n    if (isRequest) {\n        // Do stuff to SOAP header based on \"object\"\n    }\n    return true;\n}\n</code></pre>\n\n<p>I don't like the cast because I'm using Spring's AOP to wrap the calls from the client-side Port object, and the cast causes it to error.</p>\n"},{"tags":["spring","hibernate","jpa","spring-security","jpa-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13086821,"title":"Put Spring EntityManager in thread for async Servlet 3.0?","body":"<p>We're trying to enable Servlet's 3.0 \"async-supported\" in our Spring application:</p>\n\n<ul>\n<li><p>Added in web.xml <strong>(async-supported)true(/async-supported)</strong> for all servlets and filters.</p></li>\n<li><p>Rewrote the request handling code as</p></li>\n</ul>\n\n<p>**</p>\n\n<pre><code>request.getAsyncContext().start(new Runnable() {\n  @Override\n  public void run() {\n    handleRequest(servlet, request, response);\n  }\n});\n</code></pre>\n\n<p>**</p>\n\n<p>This causes two problems:</p>\n\n<ol>\n<li><p>Spring Security authentication is lost when running the asynchronous code.</p></li>\n<li><p>There is no EntityManager/session/... any more either.</p></li>\n</ol>\n\n<p>Of course both problems are due to the fact the handler code is not executed in the same thread as the thread that created the Runnable. Ideally the worker thread should \"inherit\" the Spring contexts from the invoking thread.</p>\n\n<p>I could get around the Spring Security problem by saving the authentication at construction time and setting it at execution time. </p>\n\n<pre><code>private final Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n\ntry {\n  SecurityContextHolder.clearContext();\n  SecurityContextHolder.getContext().setAuthentication(authentication);\n\n  ..run code here..\n\n} finally {\n  SecurityContextHolder.clearContext();\n} \n</code></pre>\n\n<p>However, for the second problem I have no clue how to \"transfer\" the session to the executing thread. For servlet 2.x we were using <strong><em>OpenEntityManagerInViewFilter</em></strong> to stick a session to the thread.</p>\n\n<pre><code>&lt;filter&gt;\n  &lt;filter-name&gt;openEntityManagerInViewFilter&lt;/filter-name&gt;\n  &lt;filter-class&gt;org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter&lt;/filter-class&gt;\n  &lt;async-supported&gt;true&lt;/async-supported&gt;\n  &lt;init-param&gt;\n    &lt;param-name&gt;entityManagerFactoryBeanName&lt;/param-name&gt;\n    &lt;param-value&gt;entityManagerFactory&lt;/param-value&gt;\n  &lt;/init-param&gt;\n&lt;/filter&gt;\n</code></pre>\n\n<p>But now of course this does not make sense any more because the thread it sticks it to is not the same as the one which executed the request.</p>\n\n<p>I've tried various versions of Spring 3.1 and 3.2. But to no effect. </p>\n\n<p>Anybody who knows how to get around this ? Preferably with hacking. :-)</p>\n\n<p>My <strong>web.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n         version=\"3.0\"&gt;\n\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;Foo&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;com.foo.Main&lt;/servlet-class&gt;\n    &lt;async-supported&gt;true&lt;/async-supported&gt;\n  &lt;/servlet&gt;\n\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;Foo&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/restricted/*&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n\n  &lt;filter&gt;\n    &lt;filter-name&gt;openEntityManagerInViewFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter&lt;/filter-class&gt;\n    &lt;async-supported&gt;true&lt;/async-supported&gt;\n    &lt;init-param&gt;\n      &lt;param-name&gt;entityManagerFactoryBeanName&lt;/param-name&gt;\n      &lt;param-value&gt;entityManagerFactory&lt;/param-value&gt;\n    &lt;/init-param&gt;\n  &lt;/filter&gt;\n\n  &lt;filter&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n    &lt;async-supported&gt;true&lt;/async-supported&gt;\n  &lt;/filter&gt;\n\n  &lt;filter-mapping&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt;\n\n  &lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n\n  &lt;listener&gt;\n    &lt;listener-class&gt;org.bar.ServletInit&lt;/listener-class&gt;\n  &lt;/listener&gt;\n\n  &lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n  &lt;context-param&gt;\n    &lt;param-name&gt;contextInitializerClasses&lt;/param-name&gt;\n    &lt;param-value&gt;com.foo.SpringCtxInitializer&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n  &lt;filter-mapping&gt;\n    &lt;filter-name&gt;openEntityManagerInViewFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/restricted/*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n"},{"tags":["spring","spring-webflow","spring-webflow-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13086376,"title":"Spring Web Flow exception handling","body":"<p>How to prevent exception, \nif <code>requestParameters.sortBy</code> is passed as string (<code>java.lang.NumberFormatException</code>) or is missing (<code>java.lang.NullPointerException</code>)?</p>\n\n<pre><code>&lt;view-state id=\"journeySearch\" model=\"journeyForm\"&gt;\n\n     ...\n\n    &lt;transition on=\"sort\"&gt;\n        &lt;set name=\"journeyCriteria.sortBy\" value=\"requestParameters.sortBy\" type=\"int\" /&gt;\n        &lt;evaluate expression=\"bookingService.searchJourneys(journeyCriteria)\" result=\"viewScope.journeys\" /&gt; \n    &lt;/transition&gt;\n&lt;/view-state&gt;\n</code></pre>\n"},{"tags":["spring","hibernate","sessionfactory"],"answer_count":3,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":1870,"score":3,"question_id":10298483,"title":"Spring and hibernate: No Session found for current thread","body":"<p>im gettting the following error</p>\n\n<pre><code>org.hibernate.HibernateException: No Session found for current thread\nat org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)\nat org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1024)\nat com.fexco.shoptaxfreemobile.service.ProfileService.registerVisitor(ProfileService.java:57)\nat com.fexco.shoptaxfreemobile.controller.ProfileController.registerVisitor(ProfileController.java:91)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\nat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:668)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:770)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat com.fexco.shoptaxfreemobile.jsonp.JsonpCallbackFilter.doFilter(JsonpCallbackFilter.java:33)\nat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\nat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\nat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)\nat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\nat java.lang.Thread.run(Thread.java:619)\n</code></pre>\n\n<p>Service class</p>\n\n<pre><code>@Service\npublic class ProfileService {\n\n@Resource(name = \"mySessionFactory\")\nprivate SessionFactory sessionFactory;\n\n@Autowired\nprivate ProfileDao profileDao;\n\nprivate class CountrySorter implements Comparator&lt;Country&gt; {\n    @Override\n    public int compare(Country country1, Country country2) {\n        if ( country1.getId().compareTo(new Long (3)) &lt; 0){\n            return country1.getId().compareTo(country2.getId());\n        }\n        return country1.getName().compareToIgnoreCase(country2.getName());\n    }               \n}\n\npublic List&lt;Country&gt; getCountries() {\n\n    List&lt;VisitorCountry&gt; visitorCountries = profileDao.getAllCountries();       \n\n    List&lt;Country&gt; countries = new ArrayList&lt;Country&gt;();\n    for ( VisitorCountry country : visitorCountries){\n        countries.add(country.getCountry());\n    }\n\n    Comparator&lt;Country&gt; comparator = new CountrySorter();       \n    Collections.sort(countries, comparator);\n\n    return countries;\n}\n\npublic RegisterResponse registerVisitor(JsonVisitor visitorDetails){\n    Visitor storedVisitor = (Visitor) sessionFactory.getCurrentSession().get(Visitor.class, visitorDetails.getTfscNumber(), LockMode.NONE);\n    if ( storedVisitor == null){\n        storedVisitor = new Visitor(visitorDetails);\n    }else{\n        storedVisitor.setVisitorDetails(visitorDetails);    \n    }\n\n    try{\n        sessionFactory.getCurrentSession().saveOrUpdate(storedVisitor);\n\n    }catch(Exception ex){\n        return new RegisterResponse(false, \"Failed To Register Card. Please Try Again Later.\", visitorDetails);\n    }\n\n    return new RegisterResponse(true, \"\", visitorDetails);\n\n}\n\n}\n</code></pre>\n\n<p>bit of DAO class</p>\n\n<pre><code>@Service\n@Transactional\npublic class ProfileDao {\n\n@Resource(name = \"mySessionFactory\")\nprivate SessionFactory sessionFactory;\n\npublic List getAllCountries(){\n\n    List&lt;VisitorCountry&gt; visitorCountries = sessionFactory.getCurrentSession()\n    .getNamedQuery(\"GET_ALL_COUNTRIES\").list();\n\n    return visitorCountries;\n\n}\n\npublic List&lt;Retailer&gt; getRetailerByRetailerNumber(String retailerNo) {\n\n    List&lt;Retailer&gt; retailerByRetailerNumber = sessionFactory.getCurrentSession()\n    .getNamedQuery(\"FindRetailerByRetailerNo\").setString(\"retailerNo\", retailerNo).list();\n\n    return retailerByRetailerNumber;\n}\n</code></pre>\n\n<p>and i have this in my application-context.xml</p>\n\n<pre><code>&lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n&lt;bean id=\"mySessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"myDataSource\" /&gt;\n    &lt;property name=\"configLocation\" value=\"classpath:hibernate.cfg.xml\" /&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;value&gt;\n            &lt;![CDATA[\n        hibernate.show_sql=true\n        hibernate.format_sql=true\n        hibernate.cache.provider_class=org.hibernate.cache.NoCacheProvider\n        ]]&gt;\n        &lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>can anyone spot why i am getting the following error?</p>\n"},{"tags":["spring","spring-mvc","sts-springsourcetoolsuite","spring-data","spring-data-jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":13072502,"title":"We upgraded to STS 3.1 and we now get \"Invalid derived query\" all over the place in our Spring Data JpaRepository interfaces. Why?","body":"<p>We have implemented our repositories exactly as demonstrated in the Spring Data documentation, and everything was fine until we upgraded from STS 2.9 to STS 3.1.  All attempts to get these errors to disappear have failed, and in some cases they don't even make sense!  They don't match any properties in either the interface or the entities used!</p>\n\n<p>Here is an example:</p>\n\n<pre><code>public interface CreditNotesRepository extends JpaRepository&lt;CreditNotes, Long&gt; {\n\n    CreditNotes findCurrentCreditNotes(Long shipmentDetailId);\n}\n</code></pre>\n\n<p>The \"findCurrentCreditNotes\" is a named query in our entity.  This code executes perfectly fine.</p>\n\n<pre><code>@NamedQueries({\n    @NamedQuery(name = \"CreditNotes.getCount\", query = \"SELECT COUNT(f) FROM CreditNotes f\"),\n    @NamedQuery(name = \"CreditNotes.findCurrentCreditNotes\", query =\n        \"SELECT creditNotes FROM CreditNotes creditNotes\"\n        + \" WHERE creditNotes.shipmentDetail.shipmentDetailId = ?1 \"\n        + \" AND creditNotes.notesSeqNumber =  (SELECT max(creditNotes2.notesSeqNumber) FROM CreditNotes creditNotes2\"\n        + \" WHERE creditNotes.shipmentDetail.shipmentDetailId = creditNotes2.shipmentDetail.shipmentDetailId)\")\n})\n</code></pre>\n\n<p>And the error we get:</p>\n\n<pre><code>Invalid derived query! No property find found for type ca.cole.freight.model.CreditNotes\n</code></pre>\n\n<p>Although this is just a flag (doesn't affect compilation), it is annoying and confusing.  Can anyone shed some light on this?  And explain it to me like I'm 6 years old!  ;)</p>\n"},{"tags":["spring","hibernate","struts2","log4j","tiles"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13087529,"title":"Unnecessary logging by logger in struts 2 + tiles + hibernate aaplication","body":"<p>I have a struts 2 plus spring plus hibernate application. In efforts of modularising the application, i incorporated tiles in the application. After using TILES, the pages are loading very slowly. I can see in the console that CommonsLogger.java and Log4JLoggerFactory.java are maniacally putting logs viz..<code>Key 'disabled' was not found on instance of java.util.LinkedHashMap. Introsp...</code> I dont see any reason why this should be logged. earlier the pages were loading fine but now it is crazy. Please help me solve this issue.</p>\n"},{"tags":["spring","hibernate","exception","maven","sharding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13072690,"title":"java.lang.NoClassDefFoundError: org/hibernate/engine/SessionFactoryImplementor from Spring 3.1.2/Hibernate 4.1.7 and Shards 3.0.0.Beta2","body":"<p>I'm trying a simple Hibernate shard example (Yes, odd, 3.0.0.Beta2 released 4 years ago) using Hibernate Core 4.1.7 and Spring 3.1.2 and hit this issue during session factory initialization:</p>\n\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in class path resource [shardedspring-config.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.hibernate.SessionFactory it.sella.lab.crm.sys.persistence.ShardedSessionFactoryBuilder.createSessionFactory()] threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/engine/SessionFactoryImplementor\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:581)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\n    at in.rixx.crm.model.Activity.&lt;clinit&gt;(Activity.java:17)\n</code></pre>\n\n<p>This is how I pick Spring and Hibernate:</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;4.1.7.Final&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n &lt;/dependency&gt; \n</code></pre>\n\n<p>This doesn't seem like a issue with shards library - it looks like a general issue caused by refactored SessionFactoryImplementor class. Referring to <a href=\"https://jira.springsource.org/browse/SPR-8885\" rel=\"nofollow\">https://jira.springsource.org/browse/SPR-8885</a>, I've also switched to org.springframework.orm.hibernate4.HibernateTransactionManager for bean 'transactionmanager' - it isn't helping.</p>\n\n<p>Is there any functional workaround right now for Spring 3.x and Hibernate 4.x?</p>\n"},{"tags":["java","spring","captcha"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1252,"score":0,"question_id":6869829,"title":"best captcha for spring?","body":"<p>Trying to implement captcha with spring framework. \nI'm searching to find a good one. \nDifferent users have different opinions. \nAny idea which works best with spring? </p>\n\n<p>What is the advantage of JCaptcha over recaptcha ? </p>\n"},{"tags":["java","spring","hibernate","java-ee"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":588,"score":0,"question_id":12433499,"title":"org.hibernate.QueryParameterException: could not locate named parameter","body":"<p>My project setting are Spring MVC, Hibernate 3.2.x, on MySQL DB</p>\n\n<p>Getting the following error: \norg.hibernate.QueryParameterException: could not locate named parameter email </p>\n\n<p>Approach #1:</p>\n\n<pre><code>@Override\n    public Boolean isExist(String email)\n    {\n    boolean flag = false;  \n   String hql = \"from com.cmgr.beans.UserAccount u where u.email = :email\";\n  List&lt;UserAccount&gt; result = currentSession().createQuery(hql)\n .setParameter(\"email\", email)\n .list();\n\n  UserAccount userAccount = (UserAccount)result.get(0);\n  if (userAccount!=null &amp;&amp; userAccount.getEmail().equalsIgnoreCase(email))\n  {\n      flag = true;\n  }\n    return flag;\n    }\n</code></pre>\n\n<p>Approach #2:</p>\n\n<pre><code> @Override\n    public Boolean isExist(String email) {\n        boolean flag = false;\n        String hql = \"from com.cmgr.beans.UserAccount u where u.email = :email\";\n        List&lt;UserAccount&gt; result = currentSession().createQuery(hql).setString(\"email\", email).list();\n\n        UserAccount userAccount = (UserAccount) result.get(0);\n        if (userAccount != null &amp;&amp; userAccount.getEmail().equalsIgnoreCase(email)) {\n            flag = true;\n        }\n        return flag;\n    }\n</code></pre>\n\n<p>Error:\njava.lang.IllegalArgumentException: Parameter email does not exist as a named parameter in [from com.cmgr.beans.UserAccount u where u.email = :email]</p>\n\n<p>UserAccount class:</p>\n\n<pre><code>package com.cmgr.beans;\n\nimport java.io.Serializable;\nimport java.util.List;\nimport java.util.Set;\nimport javax.persistence.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\n\n@Entity\n@Table(name = \"user_account\")\npublic class UserAccount implements Serializable {\n\n    @Autowired\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY, generator = \"user_account_seq\")\n    @SequenceGenerator(name = \"user_account_seq\", sequenceName = \"user_account_seq\")\n    @Column(name = \"user_id\")\n    private Long UserId = null;\n    //\n    @Autowired\n    @Column(name = \"user_name\")\n    private String UserName;\n    //\n    @Autowired\n    @Column(name = \"user_type\")\n    private String UserType = null;\n    //\n    @Autowired\n    @Column(name = \"first_name\")\n    private String FirstName;\n    //\n    @Autowired\n    @Column(name = \"last_name\")\n    private String LastName;\n    //\n    @Autowired\n    @Column(name = \"email\")\n    private String Email;\n    //\n    @Autowired\n    @Column(name = \"phone_contact_1\")\n    private String PhoneContact1 = null;\n    //\n    @Autowired\n    @Column(name = \"phone_contact_2\")\n    private String PhoneContact2 = null;\n    //primary_address_is_usa\n    @Autowired\n    @Column(name = \"primary_address_is_usa\")\n    private Boolean primaryAddressIsUsa = null;\n    //\n    @Autowired\n    @Column(name = \"address_1\")\n    private String Address1 = null;\n    //\n    @Autowired\n    @Column(name = \"city1\")\n    private String city1 = null;\n    //\n    @Autowired\n    @Column(name = \"state1\")\n    private String state1 = null;\n    //\n    @Autowired\n    @Column(name = \"country1\")\n    private String country1 = null;\n    //\n    @Autowired\n    @Column(name = \"zipcode\")\n    private Integer zipcode = 0;\n    //\n    @Autowired\n    @Column(name = \"Industry\")\n    private String Industry = null;\n    //is the user account Active either due to user deactivation,admin deactivation, or nonpayment\n    @Autowired\n    @Column(name = \"active\")\n    private boolean Active = false;\n    //1 to 1 relation with registerationCode in Registeration class \n    @Autowired\n    @Qualifier(\"UserRegisteration\")\n    @OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"Registeration_Code_fk\", referencedColumnName = \"registeration_code\", nullable = false)\n    private UserRegisteration UserRegisteration;\n    //1 to many relation with EmailId in Email class  \n    @OneToMany(cascade = {CascadeType.ALL})\n    @JoinColumn(name = \"emailed_id\")\n    private List&lt;Emailed&gt; emailed = null;\n    //1 to many relation with signatureId in signature class\n    @OneToMany(cascade = {CascadeType.ALL})\n    @JoinColumn(name = \"signature_id\")\n    private List&lt;Signature&gt; signatures;\n    //1 to many relation with UserAccountDocId in UserAccountDoc class \n    @OneToMany(cascade = {CascadeType.ALL})\n    @JoinColumn(name = \"user_doc_id\")\n    private Set&lt;UserAccountDocumentRelationship&gt; UserAccountDocumentRelationship;\n\n    @Autowired(required = false)\n    public UserAccount() {\n    }\n\n    @Autowired(required = true)\n    public UserAccount(String UserName, String FirstName, String LastName, String Email, String Industry) {\n        this.FirstName = FirstName;\n        this.LastName = LastName;\n        this.Email = Email;\n        this.Industry = Industry;\n        this.UserName = UserName;\n    }\n\n    @Autowired(required = false)\n    public UserAccount(String UserName, Long UserId, String FirstName, String LastName, String Email, String Industry) {\n        this.UserId = UserId;\n        this.FirstName = FirstName;\n        this.LastName = LastName;\n        this.Email = Email;\n        this.Industry = Industry;\n        this.UserName = UserName;\n    }\n\n    public String getIndustry() {\n        return Industry;\n    }\n\n    public void setIndustry(String Industry) {\n        this.Industry = Industry;\n    }\n\n    public String getAddress1() {\n        return Address1;\n    }\n\n    public void setAddress1(String Address1) {\n        this.Address1 = Address1;\n    }\n\n    public String getPhoneContact1() {\n        return PhoneContact1;\n    }\n\n    public void setPhoneContact1(String PhoneContact1) {\n        this.PhoneContact1 = PhoneContact1;\n    }\n\n    public String getPhoneContact2() {\n        return PhoneContact2;\n    }\n\n    public void setPhoneContact2(String PhoneContact2) {\n        this.PhoneContact2 = PhoneContact2;\n    }\n\n    public boolean isActive() {\n        return Active;\n    }\n\n    public void setActive(boolean Active) {\n        this.Active = Active;\n    }\n\n    public String getEmail() {\n        return Email;\n    }\n\n    public void setEmail(String Email) {\n        this.Email = Email;\n    }\n\n    public String getFirstName() {\n        return FirstName;\n    }\n\n    public void setFirstName(String FirstName) {\n        this.FirstName = FirstName;\n    }\n\n    public String getLastName() {\n        return LastName;\n    }\n\n    public void setLastName(String LastName) {\n        this.LastName = LastName;\n    }\n\n    public com.cmgr.beans.UserRegisteration getUserRegisteration() {\n        return UserRegisteration;\n    }\n\n    public void setUserRegisteration(com.cmgr.beans.UserRegisteration UserRegisteration) {\n        this.UserRegisteration = UserRegisteration;\n    }\n\n    public Long getUserId() {\n        return UserId;\n    }\n\n    public void setUserId(Long UserId) {\n        this.UserId = UserId;\n    }\n\n    public String getUserType() {\n        return UserType;\n    }\n\n    public void setUserType(String UserType) {\n        this.UserType = UserType;\n    }\n\n    public List&lt;Emailed&gt; getEmailed() {\n        return emailed;\n    }\n\n    public void setEmailed(List&lt;Emailed&gt; emailed) {\n        this.emailed = emailed;\n    }\n\n    public List&lt;Signature&gt; getSignatures() {\n        return signatures;\n    }\n\n    public void setSignatures(List&lt;Signature&gt; signatures) {\n        this.signatures = signatures;\n    }\n\n    public String getCity1() {\n        return city1;\n    }\n\n    public void setCity1(String city1) {\n        this.city1 = city1;\n    }\n\n    public String getCountry1() {\n        return country1;\n    }\n\n    public void setCountry1(String country1) {\n        this.country1 = country1;\n    }\n\n    public Boolean getPrimaryAddressIsUsa() {\n        return primaryAddressIsUsa;\n    }\n\n    public void setPrimaryAddressIsUsa(Boolean primaryAddressIsUsa) {\n        this.primaryAddressIsUsa = primaryAddressIsUsa;\n    }\n\n    public String getState1() {\n        return state1;\n    }\n\n    public void setState1(String state1) {\n        this.state1 = state1;\n    }\n\n    public Integer getZipcode() {\n        return zipcode;\n    }\n\n    public void setZipcode(Integer zipcode) {\n        this.zipcode = zipcode;\n    }\n\n    public String getUserName() {\n        return UserName;\n    }\n\n    public void setUserName(String UserName) {\n        this.UserName = UserName;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (obj == null) {\n            return false;\n        }\n        if (getClass() != obj.getClass()) {\n            return false;\n        }\n        final UserAccount other = (UserAccount) obj;\n        if ((this.UserId == null) ? (other.UserId != null) : !this.UserId.equals(other.UserId)) {\n            return false;\n        }\n        return true;\n    }\n\n    @Override\n    public int hashCode() {\n        int hash = 3;\n        hash = 73 * hash + (this.UserId != null ? this.UserId.hashCode() : 0);\n        return hash;\n    }\n\n    public Set&lt;com.cmgr.beans.UserAccountDocumentRelationship&gt; getUserAccountDocumentRelationship() {\n        return UserAccountDocumentRelationship;\n    }\n\n    public void setUserAccountDocumentRelationship(Set&lt;com.cmgr.beans.UserAccountDocumentRelationship&gt; UserAccountDocumentRelationship) {\n        this.UserAccountDocumentRelationship = UserAccountDocumentRelationship;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","asynchronous","spring-security","spring-annotations"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13086669,"title":"@Async annotation not working","body":"<p>I am using <code>@Async</code> annotation at service layer using Spring-3.0, for the implementation I referred <a href=\"http://www.skill-guru.com/blog/2010/01/13/asynchronous-method-invocation-in-spring-3-0/\" rel=\"nofollow\">This Post</a> But at the time of deployment it gives below explained exception. If I remove the changes done for @Async from applicationContext.xml everything works fine.</p>\n\n<pre><code>SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authenticationService' defined in URL [jar:file:/D:/Software/Softwares/apache-tomcat-6.0.33/temp/0-scd-web/WEB-INF/lib/security-integration-spring-1.0.1.jar!/META-INF/spring/security-impl-services-bundle-context.xml]: Unsatisfied dependency expressed through bean property 'internalAuthenticationService': : Error creating bean with name 'internalAuthenticationService': Post-processing of the FactoryBean's object failed; nested exception is java.lang.IllegalArgumentException: Class must not be null; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'internalAuthenticationService': Post-processing of the FactoryBean's object failed; nested exception is java.lang.IllegalArgumentException: Class must not be null\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1091)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:982)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)\n    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)\n    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)\n    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)\n    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\n    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)\n    at org.apache.catalina.core.StandardService.start(StandardService.java:525)\n    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'internalAuthenticationService': Post-processing of the FactoryBean's object failed; nested exception is java.lang.IllegalArgumentException: Class must not be null\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:142)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:116)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:91)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:217)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:671)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:610)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1076)\n    ... 40 more\nCaused by: java.lang.IllegalArgumentException: Class must not be null\n    at org.springframework.util.Assert.notNull(Assert.java:112)\n    at org.springframework.core.annotation.AnnotationUtils.findAnnotation(AnnotationUtils.java:129)\n    at org.springframework.aop.support.annotation.AnnotationClassFilter.matches(AnnotationClassFilter.java:63)\n    at org.springframework.aop.support.ClassFilters$UnionClassFilter.matches(ClassFilters.java:100)\n    at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:195)\n    at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:250)\n    at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:231)\n    at org.springframework.scheduling.annotation.AsyncAnnotationBeanPostProcessor.postProcessAfterInitialization(AsyncAnnotationBeanPostProcessor.java:116)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:361)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.postProcessObjectFromFactoryBean(AbstractAutowireCapableBeanFactory.java:1429)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:139)\n    ... 50 more\n</code></pre>\n\n<p>Can anybody please suggest me any solution?\nMany Thanks in Advance.</p>\n"},{"tags":["spring","jsp","select","spring-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":8765,"score":3,"question_id":4331532,"title":"Multiple Select in Spring 3.0 MVC","body":"<p>Ok so I've been trying to accomplish multiple selects in Spring MVC for a while and have had no luck.</p>\n\n<p>Basically what I have is a Skill class:</p>\n\n<pre><code>public class Skill {\n    private Long id;\n    private String name;\n    private String description;\n    //Getters and Setters\n}\n</code></pre>\n\n<p>And an Employee who has multiple Skills:</p>\n\n<pre><code>public class Employee {\n    private Long id;\n    private String firstname;\n    private String lastname;\n    private Set&lt;Skill&gt; skills;\n    //Getters and Setters\n}\n</code></pre>\n\n<p>All of these are mapped to Hibernate but that shouldn't be an issue.</p>\n\n<p>Now I would like to be able to do in the JSP is to select Skills for an Employee from a <code>&lt;select multiple=\"true\"&gt;</code> element. </p>\n\n<p>I have tried this in the JSP with no luck:</p>\n\n<pre><code>&lt;form:select multiple=\"true\" path=\"skills\"&gt;\n    &lt;form:options items=\"skillOptionList\" itemValue=\"name\" itemLabel=\"name\"/&gt;\n&lt;form:select&gt;\n</code></pre>\n\n<p>Here is my Controller:</p>\n\n<pre><code>@Controller\n@SessionAttributes\npublic class EmployeeController {\n     @Autowired\n     private EmployeeService service;\n\n     @RequestMapping(value=\"/addEmployee\", method = RequestMethod.POST)\n     public String addSkill(@ModelAttribute(\"employee\") Employee emp, BindingResult result, Map&lt;String, Object&gt; map) {\n\n        employeeService.addEmployee(emp);\n\n        return \"redirect:/indexEmployee.html\";\n    }\n\n    @RequestMapping(\"/indexEmployee\")\n    public String listEmployees(@RequestParam(required=false) Integer id, Map&lt;String, Object&gt; map) {\n\n        Employee emp = (id == null ? new Employee() : employeeService.loadById(id));\n\n        map.put(\"employee\", emp);\n        map.put(\"employeeList\", employeeService.listEmployees());\n        map.put(\"skillOptionList\", skillService.listSkills());\n\n        return \"emp\";\n    }\n}\n</code></pre>\n\n<p>But this does not seem to work. I get the following Exception:</p>\n\n<pre><code>SEVERE: Servlet.service() for servlet jsp threw exception\njavax.servlet.jsp.JspException: Type [java.lang.String] is not valid for option items\n</code></pre>\n\n<p>I feel like it should be possible where we can have a form for a Model that has multiple select from a list of options provided. What is the best practice to have <code>form:select</code> and <code>form:options</code> in Spring 3.0 MVC?</p>\n\n<p>Thanks!</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>Ok so just in case anyone wonders what the solution is. In addition to user 01001111 fix:</p>\n\n<pre><code>&lt;form:select multiple=\"true\" path=\"skills\"&gt;\n    &lt;form:options items=\"${skillOptionList}\" itemValue=\"name\" itemLabel=\"name\"/&gt;\n&lt;form:select&gt;\n</code></pre>\n\n<p>We need to add a <code>CustomCollectionEditor</code> to the controller as follows:</p>\n\n<pre><code>@Controller\n@SessionAttributes\npublic class EmployeeController {\n\n    @Autowired\n    private EmployeeeService employeeService;\n\n    @Autowired\n    private SkillService skillService;\n\n    @InitBinder\n    protected void initBinder(WebDataBinder binder) {\n        binder.registerCustomEditor(Set.class, \"skills\", new CustomCollectionEditor(Set.class)\n          {\n            @Override\n            protected Object convertElement(Object element)\n            {\n                Long id = null;\n\n                if(element instanceof String &amp;&amp; !((String)element).equals(\"\")){\n                    //From the JSP 'element' will be a String\n                    try{\n                        id = Long.parseLong((String) element);\n                    }\n                    catch (NumberFormatException e) {\n                        System.out.println(\"Element was \" + ((String) element));\n                        e.printStackTrace();\n                    }\n                }\n                else if(element instanceof Long) {\n                    //From the database 'element' will be a Long\n                    id = (Long) element;\n                }\n\n                return id != null ? employeeService.loadSkillById(id) : null;\n            }\n          });\n    }\n}\n</code></pre>\n\n<p>This allows Spring to add Sets of Skills between the JSP and Model.</p>\n"},{"tags":["java","spring"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":15,"score":2,"question_id":13086559,"title":"How to register a Spring 3.1 Printer or Parser in the FormatterRegistry","body":"<p>Spring 3.0 introduced the <a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#core-convert\" rel=\"nofollow\">Type Conversion API</a> and <a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#format\" rel=\"nofollow\">Field Formatting API</a>, containing\n <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/format/Printer.html\" rel=\"nofollow\"><code>Printer</code></a>, <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/format/Parser.html\" rel=\"nofollow\"><code>Parser</code></a>, <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/format/Formatter.html\" rel=\"nofollow\"><code>Formatter</code></a> (<code>Converter</code>), <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/format/FormatterRegistry.html\" rel=\"nofollow\"><code>FormatterRegistry</code></a>... (and Spring 3.1 introduced <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/format/FormatterRegistrar.html\" rel=\"nofollow\"><code>FormatterRegistrar</code></a>.)</p>\n\n<p>But I found no already build in way to register my own <code>Printer</code> or <code>Parser</code>. I only find a way to register <code>Formatter</code> in the <code>FormatterRegistry</code>.</p>\n\n<p>So my question is, did I need to implement a way to register a <code>Printer</code> or <code>Parser</code> by my own, or did I have overlooked something.</p>\n\n<p><em>The question is NOT how to implement it by my own, the question is simple whether I have overlooked something.</em></p>\n"},{"tags":["spring","hibernate","postgresql","java-ee","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13086240,"title":"Spring + Hibernate + Postgres query issue","body":"<p>I have written a sample code in Spring + Hibernate + Postgres to get the results from MySql and it is working fine. I changed the dialect and other parameters in Hibernate according to Postgres and when I execute the same program; \nI got the following error:</p>\n\n<pre>\nHibernate: select this_.ID as ID0_0_, this_.Address as Address0_0_, this_.Country as Country0_0_, this_.Email as Email0_0_, this_.FirstName as FirstName0_0_, this_.IsDelete as IsDelete0_0_, this_.LastName as LastName0_0_, this_.LastUpdated as LastUpda8_0_0_, this_.Password as Password0_0_, this_.Phone as Phone0_0_, this_.RoleID as RoleID0_0_, this_.State as State0_0_, this_.Status as Status0_0_, this_.UserName as UserName0_0_ from User this_\nWARN : [Oct-26 17:05:42,914] hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: 42703\nERROR: [Oct-26 17:05:42,914] hibernate.util.JDBCExceptionReporter - ERROR: column this_.id does not exist\n  Position: 8\nDEBUG: [Oct-26 17:05:42,914] mvc.annotation.AnnotationMethodHandlerExceptionResolver - Resolving exception from handler [com.medrubik.webservices.rest.LoginController@14f5021]: org.hibernate.exception.SQLGrammarException: could not execute query\nDEBUG: [Oct-26 17:05:42,930] mvc.annotation.ResponseStatusExceptionResolver - Resolving exception from handler [com.medrubik.webservices.rest.LoginController@14f5021]: org.hibernate.exception.SQLGrammarException: could not execute query\nDEBUG: [Oct-26 17:05:42,930] mvc.support.DefaultHandlerExceptionResolver - Resolving exception from handler [com.medrubik.webservices.rest.LoginController@14f5021]: org.hibernate.exception.SQLGrammarException: could not execute query\nDEBUG: [Oct-26 17:05:42,930] web.servlet.DispatcherServlet - Could not complete request\norg.hibernate.exception.SQLGrammarException: could not execute query\n    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)\n    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)\n    at org.hibernate.loader.Loader.doList(Loader.java:2216)\n    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)\n    at org.hibernate.loader.Loader.list(Loader.java:2099)\n    at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:94)\n    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569)\n    at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)\n    at com.medrubik.services.UserService.getAllUsers(UserService.java:58)\n    at com.medrubik.services.UserService$$FastClassByCGLIB$$f4a499c6.invoke()\n    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)\n    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:692)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:108)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:625)\n    at com.medrubik.services.UserService$$EnhancerByCGLIB$$ff758697.getAllUsers()\n    at com.medrubik.webservices.rest.LoginController.getAllUsers(LoginController.java:81)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)\n    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)\n    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)\n    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:552)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: org.postgresql.util.PSQLException: ERROR: column this_.id does not exist\n  Position: 8\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2157)\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1886)\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:255)\n    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:555)\n    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:417)\n    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:302)\n    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)\n    at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:674)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)\n    at org.hibernate.loader.Loader.doList(Loader.java:2213)\n    ... 44 more\n</pre>\n\n<p>Could anyone advice me on how to resolve this issue? Is there any issue while creating db or any ACL issues?</p>\n"},{"tags":["java","spring","hibernate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13086252,"title":"State machine.. with state stored in database","body":"<p>I have created a state machine before, where the state has been held in the context. however i need to create a state machine in Java/spring/hibernate which can have the state injected in from perhaps the database. So the state machine almost behaves like a static state machine.</p>\n\n<p>Not sure how this would work or even if it would .. any ideas?</p>\n"},{"tags":["java","spring","dependency-injection","guice","slf4j"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13079843,"title":"How to inject SLF4J bindings with Guice?","body":"<p>After a cursory inspection, it seems like SLF4J and Guice (well, any DI framework, really) are sort of conflicting philosophies. SLF4J takes the approach \"<em>hey, we won't know until runtime what classes we're going to bind to, and that's OK.</em>\" Guice, on the other hand, seems to say \"<em>hey, we need to know at compile-time exactly what classes we're binding to.</em>\".</p>\n\n<p>So I ask: is it possible to use Guice/Spring/whatever DI framework to configure/inject SLF4J bindings?</p>\n\n<p>The kicker is that the Java <code>ClassLoader</code> is what is really \"injecting\" SLF4J at runtime with the proper Logger/LoggerFactory/etc. objects, so I can't figure out how to inject those ClassLoaders so that they returns the <code>org.slf4j.impl.Logger</code> that I want at runtime:</p>\n\n<p>I ask because I like the benefit of SLF4J and logging against an API, but also like the benefits of DI. Is there a way to make this work? Thanks in advance!</p>\n"},{"tags":["spring","hibernate","jsf","jsf-2","migration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13073546,"title":"java.io.NotSerializableException with spring and @ViewScoped bean","body":"<p>I do migration form JSF 1.2 to JSF 2.1 in a quite large project. There is a few libraries use: hibernate 3.6, spring 3.1(far as i know updated form 2.x by my predecessor), acegi-security-1.0.5, tomahawk20, urlrewrite-3.2.0. I will update all of them, when i finish migration to jsf2.1</p>\n\n<p>I changed entries for beans in faces-config.xml to annotations, and change JSTL markup to JSF (c:if to rendered atribute or ui:fragment section) there is no JSTL now. Beans in this project had a lot of params. Ajax is used there, so I decided use @ViewScoped, but i have exception(pasted down). I don't know why with @SessionScoped exeption doesn't appear, and everything works correctly. I know SessionSoped life longer then View, but what is difference for this example?</p>\n\n<p>I read a few Q&amp;A hear and added Serializable interface to classes which i found in spring beans configuration files, but still doesn't work.</p>\n\n<p>i.e for this entry:</p>\n\n<pre><code>&lt;bean id=\"SomeDaoImpl\" class=\"my.package\"&gt;\n    &lt;property name=\"sessionFactory\"&gt;\n        &lt;ref bean=\"sessionFactory\" /&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I implemented Serializable in SomeDaoImpl class, but didn't help.</p>\n\n<p>I added this entry to my web.xml, but still doesn't work.</p>\n\n<pre><code>&lt;context-param&gt;\n    &lt;param-name&gt;javax.faces.PARTIAL_STATE_SAVING&lt;/param-name&gt;\n    &lt;param-value&gt;false&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n\n<p>this class org.springframework.orm.hibernate3.HibernateInterceptor i found in xml file where are spring beans, </p>\n\n<p>EXCEPTION: </p>\n\n<pre><code>SEVERE: Error Rendering View[/folder1/folder2/index.xhtml]\njava.io.NotSerializableException: org.springframework.orm.hibernate3.HibernateInterceptor\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)\nat java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1346)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1154)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)\nat java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)\nat java.util.HashMap.writeObject(HashMap.java:1001)\nat sun.reflect.GeneratedMethodAccessor117.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:940)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)\nat java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)\nat java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1346)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1154)\nat java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)\nat java.util.HashMap.writeObject(HashMap.java:1001)\nat sun.reflect.GeneratedMethodAccessor117.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:940)\nat java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)\nat java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)\nat java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)\nat com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:346)\nat com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:182)\nat com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)\nat com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:113)\nat com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)\nat com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:441)\nat com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)\nat javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)\nat javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)\nat org.apache.myfaces.tomahawk.application.ResourceViewHandlerWrapper.renderView(ResourceViewHandlerWrapper.java:93)\nat com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)\nat com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)\nat com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)\nat my.package.util.faces.LifecycleDecorator.render(LifecycleDecorator.java:90)\nat javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat my.package.util.ie9fix.ie9fixFilter.doFilter(ie9fixFilter.java:41)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)\nat org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)\nat org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)\nat org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:265)\nat org.acegisecurity.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)\nat org.acegisecurity.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:72)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:166)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:135)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.wrapper.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:81)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.ui.logout.LogoutFilter.doFilter(LogoutFilter.java:110)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)\nat org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)\nat org.acegisecurity.util.FilterChainProxy.doFilter(FilterChainProxy.java:149)\nat org.acegisecurity.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:98)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\nat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\nat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)\nat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\nat java.lang.Thread.run(Thread.java:662)\n</code></pre>\n\n<p>Any tips what should i check or read to understand what do i wrong?\nI working with JSF for few weeks, and I am still learning. I never used spring.</p>\n"},{"tags":["spring","javabeans","overriding"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13073370,"title":"Spring bean overiding bug/feature","body":"<p>Recently i came across a \"strange\" Spring behaviour which i do not know if it is the expected behavior or a bug.</p>\n\n<p>I have two spring files:</p>\n\n<p>FileA.xml</p>\n\n<pre><code>&lt;bean id=\"AbstractParent\" class=\"com.classes.MyAbstractClass\" abstract=\"true\"/&gt;    \n&lt;bean id=\"ConcreateChild parent=\"AbstractParent\" /&gt;\n</code></pre>\n\n<p>FileB.xml</p>\n\n<pre><code>&lt;import resource=\"FileA.xml\"/&gt;\n&lt;bean id=\"AnotherChild\" parent=\"AbstractParent\" /&gt;\n&lt;bean id=\"ConcreateChild\" parent=\"AnotherChild\"/&gt;\n</code></pre>\n\n<p>I also have two different objects(which implement BeanNameAware) that have a reference to \"ConcreateChild\". I was expecting that both objects will have a reference to the same ConcreateChild object. But this is not the case.</p>\n\n<p>When i debug and try to see the BeanName one reference is giving me \"ConcreateChild\" (as expected) but the other \"AnotherChild\".</p>\n\n<p>Does anyone know if this is expected? I would expect the same reference to \"ConcreateChild\" always.</p>\n\n<p>Couldn't find any answers or explanation in Spring documentation thus i posted here.</p>\n\n<p>Thanks.</p>\n"},{"tags":["spring","jsp","java-ee","sso","cas"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2293,"score":0,"question_id":6125527,"title":"Jasig CAS single sign out not working","body":"<p>I have manage to get single sign on working beautifully. It is just single sign out that is not working.</p>\n\n<p>The scenario is like this:</p>\n\n<ol>\n<li>Open webapp1 and get redirected to CAS login page</li>\n<li>Enter details and login</li>\n<li>Open webapp2 which also uses CAS. Automatically logs in, as the user already signed in.</li>\n<li>Log of webapp1</li>\n<li>Try to open webapp1 or webapp2 (in another tab) redirects you back to the login page.</li>\n<li>However, the session to webapp2 in step 3 is not closed and the user can still use the application without any problems. How do I automatically invalidate the session when the user signs out?</li>\n</ol>\n\n<p>The log off button for both applications first call session.ivalidate() and then redirects to <a href=\"https://localhost:8443/cas/logout\" rel=\"nofollow\">https://localhost:8443/cas/logout</a></p>\n\n<p>The single sign out filter is the first filter in the web.xml file. I even read through this forum post, but couldn’t figure out the problem.</p>\n\n<p>Following is the extract from my web.xml</p>\n\n<pre><code>&lt;!-- CAS settings --&gt;\n&lt;!-- Use filter init-param if your container does not support context params. \n    CAS Authentication Filter and CAS Validation Filter need a serverName init-param \n    in lieu of a context-param definition. --&gt;\n&lt;context-param&gt;\n    &lt;param-name&gt;serverName&lt;/param-name&gt;\n    &lt;param-value&gt;https://localhost:8443&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n  &lt;!-- Facilitates CAS single sign-out --&gt;\n  &lt;listener&gt;\n        &lt;listener-class&gt;org.jasig.cas.client.session.SingleSignOutHttpSessionListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n\n  &lt;!--\n  CAS client filters\n  Single sign-out filter MUST come first since it needs to be evaluated\n  before other filters.\n  --&gt;\n  &lt;filter&gt;\n        &lt;filter-name&gt;CAS Single Sign Out Filter&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.jasig.cas.client.session.SingleSignOutFilter&lt;/filter-class&gt;\n  &lt;/filter&gt;\n\n  &lt;filter&gt;\n        &lt;filter-name&gt;CAS Authentication Filter&lt;/filter-name&gt;\n        &lt;!--\n        IMPORTANT:\n        Use Saml11AuthenticationFilter for version 3.1.12 and later.\n        Use org.jasig.cas.client.authentication.AuthenticationFilter for previous\n        versions.\n        --&gt;\n        &lt;filter-class&gt;\n              org.jasig.cas.client.authentication.Saml11AuthenticationFilter&lt;/filter-class&gt;\n        &lt;init-param&gt;\n              &lt;param-name&gt;casServerLoginUrl&lt;/param-name&gt;\n              &lt;param-value&gt;https://localhost:8443/cas/login&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n        &lt;param-name&gt;service&lt;/param-name&gt;\n        &lt;param-value&gt;https://localhost:8443/JAdaptiv/default.action&lt;/param-value&gt;\n    &lt;/init-param&gt;\n  &lt;/filter&gt;\n\n  &lt;filter&gt;\n        &lt;filter-name&gt;CAS Validation Filter&lt;/filter-name&gt;\n        &lt;filter-class&gt;\n              org.jasig.cas.client.validation.Saml11TicketValidationFilter&lt;/filter-class&gt;\n        &lt;init-param&gt;\n              &lt;param-name&gt;casServerUrlPrefix&lt;/param-name&gt;\n              &lt;param-value&gt;https://localhost:8443/cas&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n              &lt;param-name&gt;redirectAfterValidation&lt;/param-name&gt;\n              &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n              &lt;!-- Leniency of time checking in ms when validating SAML assertions. Consider \n                    setting this parameter more liberally if you anticipate system clock drift \n                    on your application servers relative to the CAS server. The default is 1000 \n                    (1s) and at least one person had problems with drift at that small a tolerance \n                    value. A good approach is to start low and then increase by 1000 as needed \n                    until problems stop. Note that increasing this value may have negative security \n                    implications. Consider fixing clock drift problems as an alternative. --&gt;\n              &lt;param-name&gt;tolerance&lt;/param-name&gt;\n              &lt;param-value&gt;1000&lt;/param-value&gt;\n        &lt;/init-param&gt;\n  &lt;/filter&gt;\n\n  &lt;filter&gt;\n        &lt;filter-name&gt;CAS HttpServletRequest Wrapper Filter&lt;/filter-name&gt;\n        &lt;filter-class&gt;\n              org.jasig.cas.client.util.HttpServletRequestWrapperFilter&lt;/filter-class&gt;\n  &lt;/filter&gt;\n\n  &lt;filter&gt;\n        &lt;filter-name&gt;CAS Assertion Thread Local Filter&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.jasig.cas.client.util.AssertionThreadLocalFilter&lt;/filter-class&gt;\n  &lt;/filter&gt;\n\n  &lt;filter-mapping&gt;\n        &lt;filter-name&gt;CAS Single Sign Out Filter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt;\n\n  &lt;filter-mapping&gt;\n        &lt;filter-name&gt;CAS Authentication Filter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt;\n\n  &lt;filter-mapping&gt;\n        &lt;filter-name&gt;CAS Validation Filter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt;\n\n  &lt;filter-mapping&gt;\n        &lt;filter-name&gt;CAS HttpServletRequest Wrapper Filter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt;\n\n  &lt;filter-mapping&gt;\n    &lt;filter-name&gt;CAS Assertion Thread Local Filter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n"},{"tags":["java","spring","java-ee","spring-mvc"],"answer_count":6,"favorite_count":5,"up_vote_count":9,"down_vote_count":0,"view_count":24543,"score":9,"question_id":284368,"title":"How do I bind collection attributes to a form in Spring MVC","body":"<p>I'm trying to bind one of my model objects to the fields of a form, using Spring-MVC. Everything works fine, except that one of the attributes of the model object is an unordered collection. Doing something like</p>\n\n<pre><code>    &lt;c:forEach items=\"${m.items}\" var=\"i\" varStatus=\"itemsRow\"&gt;\n      &lt;form:input path=\"items[${itemsRow.index}]\"/&gt;\n    &lt;/c:forEach&gt;\n    &lt;form:errors path=\"items\" /&gt;\n</code></pre>\n\n<p>would work fine for a List-type property, but for a Set throws an error when, upon submit, it tries to bind input field content to object attributes.</p>\n\n<p>Is there something in Spring that works out of the box with Sets?</p>\n"},{"tags":["spring","apache","tomcat","spring-security","load-balancing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13081169,"title":"Spring and acgi security is issue with load balancing in tomcat","body":"<p>i have <strong>spring</strong> application using <strong>acgi security</strong> for authentication i have also used many <strong>filters and interceptors</strong>, it works fine on single host machine. now i want to run my application in clustered using tomcat and also using <strong>load balancing</strong> of apache server. \nnow when i am running my application in clustering it works fine when <strong>used stickySession mode</strong>,\nbut when i <strong>use multicasting</strong>, it does not allow login and always redirect to login page.</p>\n\n<p>i am not guessing why this problem is coming.</p>\n"},{"tags":["mysql","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13083279,"title":"Connecting two tables with a middle table using Hibernate and annotations","body":"<h2>Got 3 tables I need to connect.</h2>\n\n<p>Got my first project where I am making the database myself, while learning a new framework, which can be kinda confusing as I am not that well off when it come down to DBs.</p>\n\n<p>I am using Spring 3.1.0.RELEASE and Hibernate 3.6.8.Final</p>\n\n<p>I will name the most important attributes here, to give the general idea of what it is I am trying to achieve here.</p>\n\n<blockquote>\n  <p><strong>Inventory</strong> (id, ItemName...)</p>\n  \n  <p><strong>Line_Items</strong> (WORKSHOP_ORDERS_Id, INVENTORY_Id, Quantity)</p>\n  \n  <p><strong>Workshop_Order</strong> (Id, WorkshopService, WorkshopNotes...)</p>\n</blockquote>\n\n<p>This way I can hopefully have more than one item for each order, planning to hold one Line_Items for each different product in every order, linking it to the correct order by FKs.</p>\n\n<p>I have tried different things with my annotations, my persistence.xml works, this is the only place in my code where there are any issues. I am 100% clueless on how to map this relation with annotations, so I am going to post my code here, even though it is no where near anything useful (but I may get some pointers).</p>\n\n<pre><code>import java.io.Serializable;\n\nimport javax.persistence.*;\n\n@Entity\n@Table(name = \"LINE_ITEMS\")\npublic class LineItems implements Serializable {\n\nprivate static final long serialVersionUID = 2414994088922470197L;\n\npublic Long workshopOrderId;\npublic Long inventoryId;\npublic int quantity;\n\npublic Workshop workshop;\npublic Inventory inventory;\n\n@OneToMany(mappedBy = \"workshop\",cascade = CascadeType.ALL)\n@JoinColumn(name=\"WORKSHOP_ORDERS_Id\", insertable = false, updatable = false, nullable = false)\npublic Workshop getWorkshop() {\n    return workshop;\n}\n\n@OneToMany(mappedBy = \"inventory\", cascade = CascadeType.ALL)\n@JoinColumn(name=\"INVENTORY_Id\", insertable = false, updatable = false, nullable = false)\npublic Inventory getInventory() {\n    return inventory;\n}\n\npublic void setWorkshop(Workshop workshop) {\n    this.workshop = workshop;\n}\n\npublic void setInventory(Inventory inventory) {\n    this.inventory = inventory;\n}\n\n@Id\n@Column(name = \"WORKSHOP_ORDERS_Id\")\npublic Long getWorkshopOrderId() {\n    return workshopOrderId;\n}\n\n@Id\n@Column(name = \"INVENTORY_Id\")\npublic Long getInventoryId() {\n    return inventoryId;\n}\n\n@Column(name = \"Quantity\")\npublic int getQuantity() {\n    return quantity;\n}   \n\npublic void setWorkshopOrderId(Long workshopOrderId) {\n    this.workshopOrderId = workshopOrderId;\n}\n\npublic void setInventoryId(Long inventoryId) {\n    this.inventoryId = inventoryId;\n}\n\npublic void setQuantity(int quantity) {\n    this.quantity = quantity;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I have heard some talk about a bug in Hibernate, but not sure if this relates to my issue.</p>\n\n<p>Basically what I need is not necessary the complete solution to the problem, but some idea of what I am doing and what I should do to correct it. I would love some assistance in both smart database design (regarding the tables I have shown, and the correct way to do it in Hibernate).</p>\n\n<p>Any advice or help will be appreciated.</p>\n"},{"tags":["spring","jms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13081073,"title":"spring jms message creation","body":"<p>If I have assigned a message creator in my listener container which parses out the xml coming out of the queue and creates an equivalent java object for it does, spring jms guarantee this operation is thread safe ? </p>\n"},{"tags":["web-services","spring","security","kerberos","spnego"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13054049,"title":"Is it possible to use Spring Security – Kerberos Extension to make soap calls to Kerberos protected service?","body":"<p>Is it possible to use Spring Security – Kerberos Extension to make soap calls to Kerberos protected service ? We have Wss4jSecurityInterceptor for Spring-ws , but if the soap client want to send kerberos token , we don;t have any kerberosSecurityInterceptor ? Is there a way to do this using Spring Security – Kerberos Extension? Please advise?</p>\n"},{"tags":["java","spring"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1073,"score":1,"question_id":3998066,"title":"How can I run my Spring apps offline?","body":"<p>I have a Spring application (not a web app) that should be possible to run offline. However, when I try to do that, it crashes with this error message:</p>\n\n<pre><code>- Loading XML bean definitions from class path resource [applicationContext.xml]\n21220 [main] WARN  org.springframework.beans.factory.xml.XmlBeanDefinitionReader \n - Ignored XML validation warning\norg.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'http://www.springframework.org/schema/tool/spring-tool-3.0.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not &lt;xsd:schema&gt;.\nat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)\nat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.warning(Unknown Source)\n...\n</code></pre>\n\n<p>This is caused by Spring not being able to find the schemas, as they are online and Spring is offline. How can I run my Spring apps offline?</p>\n"},{"tags":["hibernate","spring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":2231256,"title":"How do I prevent Spring/Hibernate from automatically committing my modifications to the database?","body":"<p>I am working with Spring and Hibernate. I have an object which was retrieved from the database with HibernateTemplate. </p>\n\n<p>When I modify this object Hibernate is making inserts into the database before the data is ready to be inserted, the result is a lot of database errors along the line of \"cannot insert NULL into ...\". </p>\n\n<p>Is there a way to tell Spring/Hibernate \"don't update the database with this until I call HibernateTemplate.persist()\"? I looked in the HibernateTemplate javadoc but couldn't find anything</p>\n"},{"tags":["spring","tomcat6","connection-pooling","c3p0"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2155,"score":2,"question_id":5246874,"title":"Using c3p0 connection Pooling in a tomcat Spring based App","body":"<p>I have a Spring Based Web App running under tomcat 6. Now, I want to use c3p0 connection pooling instead of tomcat's default dbcp. So, from the <a href=\"http://www.mchange.com/projects/c3p0/index.html#tomcat-specific\" rel=\"nofollow\">c3p0 help</a> doc, I have defined the data source in context.xml something like </p>\n\n<pre><code>&lt;Resource name=\"jdbc/sample\" auth=\"Container\"\n driverClassName=\"oracle.jdbc.driver.OracleDriver\"\n url=\"jdbc:oracle:thin:@someServer:1551:xyz\"\n username=\"userName\"\n password=\"pwd\"\n validationQuery=\"SELECT 1 FROM dual\"\n testOnBorrow=\"true\"\n testWhileIdle=\"true\"\n factory=\"org.apache.naming.factory.BeanFactory\" \n type=\"com.mchange.v2.c3p0.ComboPooledDataSource\" \n maxPoolSize=\"20\" \n minPoolSize=\"5\" \n acquireIncrement=\"1\" \n</code></pre>\n\n<p>/></p>\n\n<p>Now, the documentation says, I should Include the following in web.xml</p>\n\n<pre><code>&lt;resource-ref&gt;\n  &lt;res-ref-name&gt;jdbc/sample&lt;/res-ref-name&gt;\n  &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n  &lt;res-auth&gt;Container&lt;/res-auth&gt;\n&lt;/resource-ref&gt; \n</code></pre>\n\n<p>I also have the following in applicationContext.xml</p>\n\n<pre><code>&lt;jee:jndi-lookup id=\"sampleDataSource\" resource-ref=\"true\"\n    jndi-name=\"jdbc/sample\" /&gt;\n</code></pre>\n\n<p>When I start the tomcat, I get </p>\n\n<p><strong>javax.naming.NameNotFoundException: Name jdbc is not bound in this Context</strong></p>\n\n<p>Without c3p0 and using default connection pooling in tomcat6 works fine.</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","spring","spring-security"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":7824,"score":3,"question_id":3453957,"title":"Creating a custom login form with Spring Security","body":"<p>I'm trying to get the custom login form to work with Spring Security 3.0.</p>\n\n<p>The default login form works fine with the security configuration below.  Then I added the form-login attribute, created the login controller and jsp page to handle the /accounts/logIn URL and now have this problem:  when I enter my guest/guest credentials, I am sent back to the logIn page.</p>\n\n<p>One thing I noticed in the catalina.out log is that the successful check is looking at /j_security_check, whereas the unsuccessful one is looking at /accounts/j_security_check.</p>\n\n<p>Here's my security-config.xml:</p>\n\n<pre><code>&lt;http auto-config=\"true\" use-expressions=\"true\"&gt;\n    &lt;form-login login-page=\"/accounts/logIn\" /&gt;&lt;!--ADDED THIS AFTER TESTING DEFAULT LOGIN--&gt;\n    &lt;intercept-url pattern=\"/accounts/logIn\" access=\"permitAll()\"/&gt;\n    &lt;intercept-url pattern=\"/**\" access=\"isAuthenticated()\"/&gt;\n&lt;/http&gt;\n\n&lt;authentication-manager alias=\"authenticationManager\"&gt;\n    &lt;authentication-provider&gt;\n &lt;user-service&gt;\n            &lt;user authorities=\"ROLE_USER\" name=\"guest\" password=\"guest\"/&gt;\n        &lt;/user-service&gt;\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p></p>\n\n<p>Here is the section of catalina.out that looks relevant:</p>\n\n<p><pre><code>\nDEBUG: org.springframework.security.web.FilterChainProxy - Candidate is: '/accounts/j_spring_security_check'; pattern is /**; matched=true\nDEBUG: org.springframework.security.web.FilterChainProxy - /accounts/j_spring_security_check?j_username=guest&amp;j_password=guest at position 1 of 10 in additional filter\\\n chain; firing Filter: 'org.springframework.security.web.context.SecurityContextPersistenceFilter@8cbb423'\nDEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - HttpSession returned null object for SPRING_SECURITY_CONTEXT\nDEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - No SecurityContext was available from the HttpSession: org.apache.catalina.sessi\\\non.StandardSessionFacade@4679cf8c. A new one will be created.\nDEBUG: org.springframework.security.web.FilterChainProxy - /accounts/j_spring_security_check?j_username=guest&amp;j_password=guest at position 2 of 10 in additional filter\\\n chain; firing Filter: 'org.springframework.security.web.authentication.logout.LogoutFilter@5d49453c'\nDEBUG: org.springframework.security.web.FilterChainProxy - /accounts/j_spring_security_check?j_username=guest&amp;j_password=guest at position 3 of 10 in additional filter\\\n chain; firing Filter: 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@756095fc'\nDEBUG: org.springframework.security.web.FilterChainProxy - /accounts/j_spring_security_check?j_username=guest&amp;j_password=guest at position 4 of 10 in additional filter\\\n chain; firing Filter: 'org.springframework.security.web.authentication.www.BasicAuthenticationFilter@18170f98'\nDEBUG: org.springframework.security.web.FilterChainProxy - /accounts/j_spring_security_check?j_username=guest&amp;j_password=guest at position 5 of 10 in additional filter\\\n chain; firing Filter: 'org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1200d083'\nDEBUG: org.springframework.security.web.savedrequest.DefaultSavedRequest - pathInfo: both null (property equals)\nDEBUG: org.springframework.security.web.savedrequest.DefaultSavedRequest - queryString: arg1=null; arg2=j_username=guest&amp;j_password=guest (property not equals)\nDEBUG: org.springframework.security.web.savedrequest.HttpSessionRequestCache - saved request doesn't match\nDEBUG: org.springframework.security.web.FilterChainProxy - /accounts/j_spring_security_check?j_username=guest&amp;j_password=guest at position 6 of 10 in additional filter\\\n chain; firing Filter: 'org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@737951b0'\nDEBUG: org.springframework.security.web.FilterChainProxy - /accounts/j_spring_security_check?j_username=guest&amp;j_password=guest at position 7 of 10 in additional filter\\\n chain; firing Filter: 'org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49c06a6d'\nDEBUG: org.springframework.security.web.authentication.AnonymousAuthenticationFilter - Populated SecurityContextHolder with anonymous token: 'org.springframework.secur\\\nity.authentication.AnonymousAuthenticationToken@6faaf9b0: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.securit\\\ny.web.authentication.WebAuthenticationDetails@ffff8868: RemoteIpAddress: 0:0:0:0:0:0:0:1%0; SessionId: 0560416CA2D07AFF3040E75867157A95; Granted Authorities: ROLE_ANON\\\nYMOUS'\n</pre></code></p>\n"},{"tags":["java","spring"],"answer_count":5,"favorite_count":7,"up_vote_count":10,"down_vote_count":0,"view_count":9659,"score":10,"question_id":310271,"title":"Injecting beans into a class outside the Spring managed context","body":"<p>I'm an end-user of one of my company's products. It is not very suitable for integration into Spring, however I am able to get a handle on the context and retrieve the required bean by name.  However, I would still like to know if it was possible to inject a bean into this class, even though the class is not managed by Spring itself.</p>\n\n<p>Clarification: The same application which is managing the lifecycle of some class MyClass, is also managing the lifecycle of the Spring context. Spring does not have any knowledge of the instance of MyClass, and I would like to some how provide the instance to the context, but cannot create the instance in the context itself.</p>\n"},{"tags":["c#","java","spring","inversion-of-control","spring.net"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13080935,"title":"How similar are Spring.Net and Java Spring?","body":"<p>I know both Java and C#, and would like to become familiar with an IoC framework available in both.  I know Java Spring is very popular, and saw there was a Spring.Net IoC.  Is it particularly easy to jump between the two?  I will mostly be writing web applications.</p>\n"},{"tags":["spring","rest","spring-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":25,"score":-2,"question_id":13078180,"title":"Spring MVC REST downloading multiple files at once","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1041542/how-to-download-multiple-files-with-one-http-request\">How to download multiple files with one HTTP request?</a>  </p>\n</blockquote>\n\n\n\n<p>I was looking for a solution of exposing a REST API endpoint using Spring MVC 3.x (e.g. <code>/download/{catalog}</code>, where \"catalog\" would be a virtual directory containing a set of files) that streams all  content available in a certain \"catalog\". The response would consist in :</p>\n\n<pre><code>metadata for file1 (JSON e.g. {\"creationDate\": \"blah-blah\", \"lastModified\":\"blah-blah\",...})\nfile1 byte stream\nmetadata for file2\nfile2 byte stream\n...\n</code></pre>\n\n<p>Compressing all response output to a zip file is not intended and not required.\nThanks.</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13080485,"title":"Spring MVC 3 Issue with the resources tag","body":"<p>I am trying to setup my first spring application and wanted to setup the mapping for the static content. However I get the following exception when loading my pages -- </p>\n\n<pre>\n\n    org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Cannot locate BeanDefinitionParser for element [resources]\n    Offending resource: ServletContext resource [/WEB-INF/springMVC-servlet.xml]\n        org.springframework.beans.factory.parsing.FailFastProblemReporter.fatal(FailFastProblemReporter.java:59)\n        org.springframework.beans.factory.parsing.ReaderContext.fatal(ReaderContext.java:68)\n        org.springframework.beans.factory.parsing.ReaderContext.fatal(ReaderContext.java:55)\n        org.springframework.beans.factory.xml.NamespaceHandlerSupport.findParserForElement(NamespaceHandlerSupport.java:84)\n        org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)\n        org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1335)\n        org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1325)\n        org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)\n        org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)\n        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)\n        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)\n        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n        org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)\n        org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)\n        org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)\n        org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)\n        org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)\n        org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\n        org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)\n        org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)\n        org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)\n        org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)\n        org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)\n        org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)\n        org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)\n        javax.servlet.GenericServlet.init(GenericServlet.java:160)\n        org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n        org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n        org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)\n        org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n        org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)\n        org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)\n        org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\n        java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        java.lang.Thread.run(Thread.java:680)\n\n    </pre>\n\n<p>My servlet file is as follows -- </p>\n\n<pre>\n\n\n    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?>\n        &lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xmlns:context=\"http://www.springframework.org/schema/context\"\n         xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n         xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n          http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\n          http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\">\n\n            &lt;context:component-scan\n                base-package=\"web.controller\" />\n\n         &lt;!-- Enabling Spring MVC configuration through annotations -->\n         &lt;mvc:annotation-driven />\n        &lt;!--  Mapping Static Resources -->\n        &lt;mvc:resources mapping=\"/css/**\" location=\"/resources/\" />\n        &lt;mvc:resources mapping=\"/js/**\" location=\"/js/\" />\n        &lt;mvc:resources mapping=\"/img/**\" location=\"/img/\" />\n\n </pre>\n\n<p>Am I missing something in the declaration?</p>\n"},{"tags":["spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13072638,"title":"Spring 3.1 + Hibernate 4.1 - Run code before webapp finishes deploying","body":"<p>I have a spring based webapp that persists data with Hibernate.  The default web page that comes up when the service is deployed immediately makes an ajax request for the data.  So if the data doesn't already exist, it needs to be fetched and persisted.  I want to make sure that when I deploy the service, before spring is up and tomcat is serving out my web pages that I can execute code to fetch and persist my data.</p>\n\n<p>I thought a regular context listener might do the trick, but I don't know if there's any guarantee that it will finish before everything else is initialized.  Is there something in Spring that can do this?  Or will a context listener do the trick?</p>\n"},{"tags":["spring","spring-jdbc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13081089,"title":"spring queryForInt method throws exception invalid column type","body":"<p>I am using queryForInt() method of spring JDBC template. It has two arguments: query string and second arguments for parametrized SQL. I have sql query like: select count(*) from table X where x.x1=? and x.x2=? . I am passing two integer values in arguments list:</p>\n\n<ul>\n<li><p>args.add(12); args.add(50);</p>\n\n<p>Data type of x1 and x2 in DB is Number. </p>\n\n<p>This method is always throwing PreparedStatementCallback; uncategorized SQLException for SQL [&lt;>>]; SQL state [99999]; error code [17004]; Invalid column type</p></li>\n</ul>\n\n<p>I am not able to figure what is wrong. \nHowever if I hard-code the parameter value in SQL and use same in single parameter version method of queryForInt; it works: \"select count(*) from table X where x.x1=12 and x.x2=50\". This works.</p>\n\n<p>Any idea what is issue here? I am using spring 3.0.6 version.</p>\n"},{"tags":["java","xml","spring"],"answer_count":0,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13080005,"title":"Standard method for parsing XML documents without downloading a DTD","body":"<p>So, our application parses XML documents retrieved from a web service (specifically <a href=\"http://www.ncbi.nlm.nih.gov/pubmed\" rel=\"nofollow\">PubMed</a>). Those documents declare a DTD (<a href=\"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&amp;id=11748933,11700088&amp;retmode=xml\" rel=\"nofollow\">an example</a>). By default, and contrary to my naive expectations, the XML library we use (JDom2, built on Xerces I believe) downloads that DTD before parsing the XML document. Downloads, as in makes an HTTP request over the internet to the address specified.</p>\n\n<p>From reading other posts here, its my understanding that reading the DTD is necessary given that it may contain entity declarations required to parse the &foo; bits in the document (BTW, this is insanity in the XML standard, right?)</p>\n\n<p>I thought that there must be some easy, standard, any-one-who-knows-what-they-are-doing-does-this way of specifying that I have the DTD locally. But, all I see is mentions of setting up an XML catalog (black magic), or creating a custom EntityResolver (pain in my ass).</p>\n\n<p>For other problems that I encounter, I find in Spring or some other Java library a standard way of overcoming them without a lot of boiler plate. For this one however, I feel like I'm writing relatively sloppy brittle code to accomplish something that every other developer must encounter.</p>\n\n<p>How do you write XML applications, using well-known libraries, that don't make web requests over-and-over again to fetch files that never change?</p>\n\n<p>PS:\nI discovered this problem because PubMed was having connectivity issues earlier today, and my unit tests (that use mocked up documents based on real queries) were failing when the XML parser couldn't retrieve the DTD.</p>\n\n<p>PPS:\nI find it really amusing that the W3C <a href=\"http://www.w3.org/blog/systeam/2008/02/08/w3c_s_excessive_dtd_traffic/\" rel=\"nofollow\">has issues with this</a> when they are the ones that propagated a standard that practically begs for this sort of abuse.</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13058752,"title":"Spring - Build path is incomplete. Cannot find class file for org/springframework/beans/factory/Aware in dispatcher-servlet.xml","body":"<p>I installed Spring Tool Suite and am now using it for a little sample project. However I keep having an error in my dispatcher-servlet.xml file:</p>\n\n<pre><code>Build path is incomplete. Cannot find class file for org/springframework/beans/factory/Aware\n</code></pre>\n\n<p>This error is highlighted here:</p>\n\n<pre><code>&lt;bean\n    **class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;**\n    &lt;property name=\"prefix\"&gt;\n        &lt;value&gt;/WEB-INF/pages/&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"suffix\"&gt;\n        &lt;value&gt;.jsp&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Any thought?</p>\n"},{"tags":["spring","maven"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13078738,"title":"Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/util]","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3335203/yet-another-unable-to-locate-spring-namespacehandler-error\">Yet another “unable to locate Spring NamespaceHandler” error</a>  </p>\n</blockquote>\n\n\n\n<p>i have a jobs packages which has spring.handlers and spring schemas files under META-INF, in pom.xml i create a jar with dependencies using maven-assembly-plugin, and run the code from command line refering to that jar:</p>\n\n<pre><code>java -cp jobs-jar-with-dependencies.jar MyJob -orgName=testOrg -channelName=testChannel \n</code></pre>\n\n<p>then i got this error:</p>\n\n<pre><code>Exception in thread \"main\" org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unexpected failure during bean definition parsing\nOffending resource: class path resource [jobsApplicationContext.xml]\nBean 'analyticsCatalogIdFactory'; nested exception is org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/util]\n</code></pre>\n\n<p>then i unzip that jar with dependencies jar file, double check those 2 spring files, and found they are chopped, i original files are:</p>\n\n<p>spring.handlers:</p>\n\n<pre><code>http\\://www.springframework.org/schema/p=org.springframework.beans.factory.xml.SimplePropertyNamespaceHandler\nhttp\\://www.springframework.org/schema/util=org.springframework.beans.factory.xml.UtilNamespaceHandler\nhttp\\://www.springframework.org/schema/context=org.springframework.context.config.ContextNamespaceHandler\nhttp\\://www.springframework.org/schema/jee=org.springframework.ejb.config.JeeNamespaceHandler\nhttp\\://www.springframework.org/schema/lang=org.springframework.scripting.config.LangNamespaceHandler\n</code></pre>\n\n<p>spring.schemas:</p>\n\n<pre><code>http\\://www.springframework.org/schema/context/spring-context-2.5.xsd=org/springframework/context/config/spring-context-2.5.xsd\nhttp\\://www.springframework.org/schema/context/spring-context.xsd=org/springframework/context/config/spring-context-2.5.xsd\nhttp\\://www.springframework.org/schema/jee/spring-jee-2.0.xsd=org/springframework/ejb/config/spring-jee-2.0.xsd\nhttp\\://www.springframework.org/schema/jee/spring-jee-2.5.xsd=org/springframework/ejb/config/spring-jee-2.5.xsd\nhttp\\://www.springframework.org/schema/jee/spring-jee.xsd=org/springframework/ejb/config/spring-jee-2.5.xsd\nhttp\\://www.springframework.org/schema/lang/spring-lang-2.0.xsd=org/springframework/scripting/config/spring-lang-2.0.xsd\nhttp\\://www.springframework.org/schema/lang/spring-lang-2.5.xsd=org/springframework/scripting/config/spring-lang-2.5.xsd\nhttp\\://www.springframework.org/schema/lang/spring-lang.xsd=org/springframework/scripting/config/spring-lang-2.5.xsd\nhttp\\://www.springframework.org/schema/beans/spring-beans-2.0.xsd=org/springframework/beans/factory/xml/spring-beans-2.0.xsd\nhttp\\://www.springframework.org/schema/beans/spring-beans-2.5.xsd=org/springframework/beans/factory/xml/spring-beans-2.5.xsd\nhttp\\://www.springframework.org/schema/beans/spring-beans.xsd=org/springframework/beans/factory/xml/spring-beans-2.5.xsd\nhttp\\://www.springframework.org/schema/tool/spring-tool-2.0.xsd=org/springframework/beans/factory/xml/spring-tool-2.0.xsd\nhttp\\://www.springframework.org/schema/tool/spring-tool-2.5.xsd=org/springframework/beans/factory/xml/spring-tool-2.5.xsd\nhttp\\://www.springframework.org/schema/tool/spring-tool.xsd=org/springframework/beans/factory/xml/spring-tool-2.5.xsd\nhttp\\://www.springframework.org/schema/util/spring-util-2.0.xsd=org/springframework/beans/factory/xml/spring-util-2.0.xsd\nhttp\\://www.springframework.org/schema/util/spring-util-2.5.xsd=org/springframework/beans/factory/xml/spring-util-2.5.xsd\nhttp\\://www.springframework.org/schema/util/spring-util.xsd=org/springframework/beans/factory/xml/spring-util-2.5.xsd\n</code></pre>\n\n<p>and the chopped versions are:</p>\n\n<pre><code>spring.handlers:\nhttp\\://www.springframework.org/schema/context/spring-context-2.5.xsd=org/springframework/context/config/spring-context-2.5.xsd\n    http\\://www.springframework.org/schema/context/spring-context.xsd=org/springframework/context/config/spring-context-2.5.xsd\n    http\\://www.springframework.org/schema/jee/spring-jee-2.0.xsd=org/springframework/ejb/config/spring-jee-2.0.xsd\n    http\\://www.springframework.org/schema/jee/spring-jee-2.5.xsd=org/springframework/ejb/config/spring-jee-2.5.xsd\n    http\\://www.springframework.org/schema/jee/spring-jee.xsd=org/springframework/ejb/config/spring-jee-2.5.xsd\n    http\\://www.springframework.org/schema/lang/spring-lang-2.0.xsd=org/springframework/scripting/config/spring-lang-2.0.xsd\n    http\\://www.springframework.org/schema/lang/spring-lang-2.5.xsd=org/springframework/scripting/config/spring-lang-2.5.xsd\n    http\\://www.springframework.org/schema/lang/spring-lang.xsd=org/springframework/scripting/config/spring-lang-2.5.xsd\n</code></pre>\n\n<p>spring.handlers:</p>\n\n<pre><code>http\\://www.springframework.org/schema/context=org.springframework.context.config.ContextNamespaceHandler\nhttp\\://www.springframework.org/schema/jee=org.springframework.ejb.config.JeeNamespaceHandler\nhttp\\://www.springframework.org/schema/lang=org.springframework.scripting.config.LangNamespaceHandler\n</code></pre>\n\n<p>i do'nt know where in the process that the files got chopped. thing that i noticed is when i build it from local machine, i saw lots of 'skipping' steps:</p>\n\n<pre><code>[INFO] [jar:jar {execution: default-jar}]\n[INFO] Building jar: /Users/dd/workspace/jobs/target/jobs-1.20.0-SNAPSHOT.jar\n[INFO] [jar:test-jar {execution: default}]\n[INFO] Building jar: /Users/dd/workspace/jobs/target/jobs-1.20.0-SNAPSHOT-tests.jar\n[INFO] Preparing source:jar\n[WARNING] Removing: jar from forked lifecycle, to prevent recursive invocation.\n[INFO] [enforcer:enforce {execution: enforce-versions}]\n[INFO] [source:jar {execution: default}]\n[INFO] Building jar: /Users/dd/workspace/jobs/target/jobs-1.20.0-SNAPSHOT-sources.jar\n[INFO] [assembly:single {execution: make-assembly}]\n[INFO] META-INF/ already added, skipping\n[INFO] META-INF/MANIFEST.MF already added, skipping\n...\n[INFO] META-INF/spring.handlers already added, skipping\n[INFO] META-INF/spring.schemas already added, skipping\n</code></pre>\n\n<p>but when i unzip the jobs-1.20.0-SNAPSHOT.jar i still see my original spring files. cannot figure out where they got changed. and how i can stop that, thanks.</p>\n\n<p>my jobsApplicationContext.xml has the namespace defined:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:util=\"http://www.springframework.org/schema/util\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n       http://www.springframework.org/schema/util\n       http://www.springframework.org/schema/util/spring-util-2.0.xsd\"&gt;\n</code></pre>\n"},{"tags":["java","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13062421,"title":"Property expansion with PropertiesFactoryBean","body":"<p>I wish to expose a <code>Properties</code> Spring bean whose values have been expanded via the typical property expansion mechanism. I'm using Spring 3.1. Let me digress.</p>\n\n<p>Given the following properties file:</p>\n\n<pre><code>server.host=myhost.com\nservice.url=http://${server.host}/some/endpoint\n</code></pre>\n\n<p>And this portion of Spring XML config file:</p>\n\n<pre><code>&lt;bean id=\"appProperties\" class=\"org.springframework.beans.factory.config.PropertiesFactoryBean\"&gt;\n  &lt;property name=\"locations\"&gt;\n    &lt;list&gt;\n      &lt;value&gt;classpath:default.properties&lt;/value&gt;\n    &lt;/list&gt;\n  &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;context:property-placeholder properties-ref=\"appProperties\" /&gt;\n</code></pre>\n\n<p>I can write the following working code:</p>\n\n<pre><code>@Component\npublic class MyComponent {\n\n  @Autowired\n  @Qualifier(\"appProperties\")\n  private Properties appProperties;\n\n  @Value(\"${service.url}\")\n  private String serviceUrl;\n\n  // remainder omitted\n\n}\n</code></pre>\n\n<p>The only problem is that if I obtain the <code>service.url</code> value from <code>appProperties</code> I get <code>http://${server.host}/some/endpoint</code> - ie the value is unexpanded. However, if I get the value of <code>service.url</code> from <code>serviceUrl</code>, the value has been expanded: <code>http://myhost.com/some/endpoint</code>.</p>\n\n<p>Does anyone know of a good way to expose a <code>Properties</code> instance as a Spring bean whose values have been expanded?</p>\n\n<p>Alternatively, if anyone can point me to a Spring bean (must be Spring 3.1) that will do the expansion for me, I'll accept this too! (Interestingly, if you manually pull the property values from the <code>Environment</code> or <code>PropertySource</code> you'll find that these too are unexpanded.)</p>\n\n<p>Thanks,\nMuel.</p>\n"},{"tags":["spring","spring-mvc","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13071801,"title":"How to get Spring mvc validation messages without using messages.properties?","body":"<p>I have a Spring mvc application with a Controller, Model, Service, and Validation classes.  Everything works fine.  In developing what I currently have, I stored the validation messages in a messages.properties file -which I registered in a configuration class like this:</p>\n\n<pre><code>@Bean\npublic MessageSource messageSource() {\n\n    final ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();\n    messageSource.setBasename(\"[package name]/messages/messages\");\n\n    return messageSource;\n}\n</code></pre>\n\n<p>In the Validator, I add a validation message if the user didn't answer a field such as this:</p>\n\n<pre><code>ValidationUtils.rejectIfEmptyOrWhitespace(errors, \"age\", \"required\", new Object[] {\"Age\"});\n</code></pre>\n\n<p>In the messages.properties file I have this (above 'age' is the name of the model object, 'required' is the key used to retrieve the message in the messages.properties file):</p>\n\n<pre><code>required = {0} is required.\n</code></pre>\n\n<p>Ok, again -this all works fine.  But what I'd like to do is externalize the messages to a database (basically, these are corporate messages that all applications use).</p>\n\n<p>My question is -how do I get Spring to use the database instead of messages.properties?  Or is I do use messages.properties, to only store the message's id (database key) instead of the message itself?</p>\n\n<p>I have a couple ideas of what to do -but no idea how to do either one.  I 'think' that the Spring-form tag library ends up performing the work of getting the actual message.  Perhaps I could somehow intercept that call?  Or maybe somehow change the messageSource to something else rather than defining the messages.properties file.</p>\n\n<p>Anyways, does anyone have any ideas?</p>\n"},{"tags":["spring","spring-mvc","intellij-idea","jpa-2.0","weblogic-10.x"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":144,"score":0,"question_id":12945305,"title":"Why do I get an unexpected EntityManagerFactory when using JPA within WebLogic?","body":"<p>I am trying to create a Spring MVC web app (Spring Framework 3.0.5).  I am using IntelliJ IDEA 11.1.3 to deploy my app on a WebLogic Server (10.3.4).  One of my web pages attempts to store some data in a database using JPA.  My persistence.xml specifies:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n    &lt;persistence-unit name=\"LeaveSchedulerJPA\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n    &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n    &lt;class&gt;com.engilitycorp.leavetracker.jpa.UserRole&lt;/class&gt;\n    &lt;properties&gt;\n        &lt;property name=\"javax.persistence.jdbc.url\" value=\"jdbc:oracle:thin:@localhost:1521:xe \"/&gt;\n        &lt;property name=\"javax.persistence.jdbc.user\" value=\"leavescheduler\"/&gt;\n        &lt;property name=\"javax.persistence.jdbc.password\" value=\"xxx\"/&gt;\n        &lt;property name=\"javax.persistence.jdbc.driver\" value=\"oracle.jdbc.OracleDriver\"/&gt;\n    &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>However, when I look in the debugger, my EntityManagerFactory is shown as an <code>org.apache.openjpa.persistence.EntityManagerFactoryImpl</code>, and when I call <code>createEntityManager</code>, I get an <code>org.apache.openjpa.persistenceArgumentException</code> that states that \"A JDBC Driver or DataSource class name must be specified in the ConnectionDriverName property\".</p>\n\n<p>It appears to my newbie eye that the persistence.xml may not be getting processed.  I've tried putting it in <code>(project)/src/main/resources/META-INF</code> and <code>(project)/src/main/resources/META-INF/spring</code>, with the same unfortunate result.</p>\n\n<p>I am not committed to using Hibernate persistence; however, I do want to use something that implements JPA 2, and I am having a real hard time configuring my environment.  For example, I have little idea how openjpa got involved in my app.  I suppose it may be the default JPA provider for something (WebLogic?, IntelliJ IDEA?).  Any help/suggestions would be much appreciated.</p>\n\n<p>My web.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"2.5\" xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"\n        http://java.sun.com/xml/ns/javaee\n        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;\n\n    &lt;!-- The definition of the Root Spring Container shared by all Servlets and Filters --&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/spring/root-context.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;!-- Creates the Spring Container shared by all Servlets and Filters --&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;!-- Processes application requests --&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;/WEB-INF/spring/appServlet/servlet-context.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>root-context.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\"&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>servlet-context.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/mvc\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:beans=\"http://www.springframework.org/schema/beans\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/mvc\n        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n    &lt;!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure --&gt;\n\n    &lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n    &lt;annotation-driven /&gt;\n\n    &lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory --&gt;\n    &lt;resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n    &lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\n    &lt;beans:bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n        &lt;beans:property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n        &lt;beans:property name=\"suffix\" value=\".jsp\" /&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;context:component-scan base-package=\"com.engilitycorp.leavetracker\" /&gt;\n\n&lt;/beans:beans&gt;\n</code></pre>\n"},{"tags":["java","spring","tomcat","logging","jasper-reports"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13077258,"title":"Jasper with Spring -- so many logs from org.apache.commons.digester","body":"<p>I have a thread <a href=\"http://stackoverflow.com/questions/12943030/outofmemoryerror-permgen-space-jasper-report-with-spring-running-on-tomcat\">here</a> to demonstrate current issue in Spring with Jasper report. I have sorted out most of the issue with help from all geniuses from SO but still stuck on solving the memories spent on <code>org.apache.commons.digester</code>. </p>\n\n<p>The situation is quite common when wired the jasper report bean and if we turn on debug log mode, there are tons of log info from <code>org.apache.commons.digester.Digiester.sax</code>, <code>EVEN CURRENT PAGE HAS NOTHING TO DO WITH JASPER REPORT</code>. so seems to me that the jasper bean is not well wired so when the application is running, the container is trying to help the bean get wired at all time.</p>\n\n<p>Here are some normal logs during runtime(happens when there is no jasper report on the view), telling about tld jar confusion, but application can still keep running.</p>\n\n<pre><code>Oct 17, 2012 3:42:27 PM org.apache.jasper.compiler.TldLocationsCache tldScanJar\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n</code></pre>\n\n<p>Here is the bean in applicationContext config file, which is a very common bean</p>\n\n<pre><code>&lt;bean id=\"pdfStandard\" class=\"org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView\"&gt;\n    &lt;property name=\"url\" value=\"classpath:/META-INF/jasperReports/pdf_stardard.jrxml\" /&gt;\n    &lt;property name=\"reportDataKey\" value=\"datasource\" /&gt;\n    &lt;property name=\"headers\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"Content-Disposition\"&gt;attachment; filename=standard.pdf&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>And here is a small cut from the gigabytes log file on debug level, <code>looks like it is parsing the template all the time without a rest</code>, or trying to parse XML from jasper library? </p>\n\n<pre><code>    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester.sax -- startElement(http://jasperreports.sourceforge.net/jasperreports,textElement,textElement)\n    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester --   Pushing body text ''\n    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester --   New match='jasperReport/summary/band/textField/textElement'\n    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester --   Fire begin() for FactoryCreateRule[className=net.sf.jasperreports.engine.xml.JRTextElementFactory, attributeName=null, creationFactory=net.sf.jasperreports.engine.xml.JRTextElementFactory@12dc6007]\n    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester -- [FactoryCreateRule]{jasperReport/summary/band/textField/textElement} New net.sf.jasperreports.engine.design.JRDesignTextField\n    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester.sax -- ignorableWhitespace()\n</code></pre>\n\n<p>Now the question are:</p>\n\n<ol>\n<li><p>Why the <code>org.apache.commons.digester</code> keeping \"digest\" jasper report component, even current view has nothing to do with Jasper report?</p></li>\n<li><p>Still very confused about whether it is the jasper bean not well wired or something wrong with the <code>digester</code> so that keep the jasper report bean/template so active. I try to save some unnecessary memory consumption but I guess only turn off the log from <code>digester</code> may not be a solution as they probably still running on the background.</p></li>\n<li><p>I am very confident about when start application on tomcat/vfabbric, jasper report get compile at compile-time instead of load-time. So why it still looks like the 'digester' is working hard on parsing the jasper template?</p></li>\n</ol>\n\n<p>Many thanks in advance.</p>\n"},{"tags":["java","spring","javabeans","destroy"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2677,"score":1,"question_id":4460384,"title":"when is a spring beans destroy-method called?","body":"<p>I have put a sysout statement in the \"destroy-method\" for a bean. When i run a sample code, the sysout is not getting output. Does that mean the destroy-method is not getting called ?</p>\n\n<p>The Test Class:</p>\n\n<pre><code>  package spring.test;\n\n  import org.springframework.context.ApplicationContext;\n  import org.springframework.context.support.ClassPathXmlApplicationContext;\n\n  public class InitTest {\n    public static void main(String[] args) {\n        ApplicationContext ctx = new ClassPathXmlApplicationContext(\"InitTestContext.xml\");\n        InitTestBean bean = (InitTestBean)ctx.getBean(\"InitTestBean\");\n        bean.display();\n    }\n  }\n</code></pre>\n\n<p>The Bean</p>\n\n<pre><code>  package spring.test;\n\n  public class InitTestBean {\n    private String prop1;\n    private String prop2;\n\n    public InitTestBean(String prop1, String prop2) {\n        System.out.println(\"Instantiating InitTestBean\");\n        this.prop1 = prop1;\n        this.prop2 = prop2;\n    }\n\n    public void setProp1(String prop1) {\n        System.out.println(\"In setProp1\");\n        this.prop1 = prop1;\n    }\n\n    public void setProp2(String prop2) {\n        System.out.println(\"In setProp2\");\n        this.prop2 = prop2;\n    }\n\n    public String getProp1() {\n        return prop1;\n    }\n\n    public String getProp2() {\n        return prop2;\n    }\n\n    public void display() {\n        System.out.println(\"Prop1 is \" + prop1);\n        System.out.println(\"Prop2 is \" + prop2);\n    }\n\n    public void initialize(){\n        System.out.println(\"In initialize\");\n        this.prop1 = \"init-prop1\";\n        this.prop2 = \"init-prop2\";\n    }\n\n    public void teardown() {\n        System.out.println(\"In teardown\");\n        this.prop1 = null;\n        this.prop2 = null;\n    }\n  }\n</code></pre>\n\n<p>The Config file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\"&gt;\n\n    &lt;bean id=\"InitTestBean\" class=\"spring.test.InitTestBean\" init-method=\"initialize\" destroy-method=\"teardown\"&gt;\n        &lt;constructor-arg value=\"Prop1\" /&gt;\n        &lt;constructor-arg value=\"Prop2\" /&gt;\n        &lt;property name=\"prop1\" value=\"setProp1\"/&gt;\n        &lt;property name=\"prop2\" value=\"setProp2\"/&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["java","multithreading","spring","executorservice","apache-commons-dbcp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13076124,"title":"Apache DBCP with executor or multithreaded environment","body":"<p>I have the following code in my services.xml</p>\n\n<pre><code>&lt;bean id=\"executorService\" class=\"java.util.concurrent.Executors\" factory-method=\"newFixedThreadPool\"&gt;\n    &lt;constructor-arg value=\"10\" /&gt;\n&lt;/bean&gt;\n&lt;task:annotation-driven executor=\"executor\" /&gt;\n\n&lt;task:executor id=\"executor\" pool-size=\"10\" queue-capacity=\"100\" rejection-policy=\"CALLER_RUNS\" /&gt;\n</code></pre>\n\n<p>In the same project, I also have connections to the database, that use dbcp.BasicDataSource.</p>\n\n<p>I've read that DBCP is effective mostly when your app is single-threaded, NOT multi-threaded. The use of executor tells me that the app is multi-threaded. Do you think the use of DBCP here is not proper? Would this be a good practice? Or, am i living an age-old myth that DBCP can't handle multi-hreaded environment?</p>\n\n<p>Any guidance in the right direction would be appreciated.</p>\n"},{"tags":["java","spring","maven-2","spring-security"],"answer_count":4,"favorite_count":8,"up_vote_count":77,"down_vote_count":0,"view_count":47312,"score":77,"question_id":2161050,"title":"Spring 3.0 - Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/security]","body":"<p>Any ideas what could be the cause of this?</p>\n\n<blockquote>\n  <p>Unable to locate Spring\n  NamespaceHandler for XML schema\n  namespace\n  [http://www.springframework.org/schema/security]</p>\n</blockquote>\n\n<pre><code>org.springframework.web.context.ContextLoader initWebApplicationContext: Context initialization failed\norg.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/security]\nOffending resource: ServletContext resource [/WEB-INF/applicationContext.xml]\n</code></pre>\n\n<p>This is my applicationContext.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/security\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:beans=\"http://www.springframework.org/schema/beans\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/context \n        http://www.springframework.org/schema/context/spring-context-3.0.xsd\n        http://www.springframework.org/schema/security\n        http://www.springframework.org/schema/security/spring-security-3.0.xsd\"&gt;\n...\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>In my pom.xml I have:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;      \n    &lt;version&gt;3.0.1.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-openid&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["spring","unit-testing","spring-mvc","spring-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":314,"score":0,"question_id":11649036,"title":"@ExceptionHandler not working with Spring MVC 3.1 unit test","body":"<p>I'm able to do nearly all of the unit test on my Spring MVC controller by instantiating the object outside of the normal servlet context. But I would like to be able to run some tests to insure that my object serialization is working properly, headers are being generated, etc.</p>\n\n<p>To run a test inside the servlet context, I create a modified context file so that various beans are NOT constructed, then I create mocked versions of those beans in my test case using EasyMock. I then invoke my handler with code like this, and get most of what I need from the MockHttpServletResponse.</p>\n\n<p>I think this gets the essence of it:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"file:root-context.xml\",\n                                    \"file:junit-servlet-context.xml\" } )\n\npublic class HomeControllerConfigHandlerHttp {\n@Autowired\nprivate RequestMappingHandlerAdapter handlerAdapter;\n\n@Autowired\nprivate RequestMappingHandlerMapping handlerMapping;\n    ... //miscellaneous setup\npublic void someTest() throws Exception\n{\n    MockHttpServletRequest request = new MockHttpServletRequest();\n    request.setMethod(\"GET\");\n    request.setRequestURI(\"/config\");\n    request.addParameter(\"foo\", \"bar\");\n    request.addParameter(\"device\", \"oakmont\");\n    MockHttpServletResponse response = new MockHttpServletResponse();\n    Object handler = handlerMapping.getHandler(request).getHandler();\n    replay(dblient);\n    expect(serviceClient.checkDevice(\"oakmont\")).andReturn( true );\n    serviceClient.destroy();\n    replay(serviceClient);\n    ModelAndView modelAndView = handlerAdapter.handle(request, response, handler);\n    String content = new String( response.getContentAsByteArray() );\n    Assert.assertEquals(content, \"Expected configuration\");\n    String content_type = response.getHeader(\"Content-type\");\n    Assert.assertEquals( content_type, \"text/plain\");\n    int status = response.getStatus();\n    Assert.assertEquals(status,  200 );\n</code></pre>\n\n<p>This does what I expect it to do, but there is one catch. I do a lot of error handling in my controller with an @ExceptionHandler. It is an easy way to back out of an error case in any handler, and it gives me a consistent way of exposing errors.</p>\n\n<p>The @ExceptionHandler works fine in normal servlet deployment, but in this unit test mockup it does not get invoked when I throw an exception. Stepping into the Spring code is a bit of a challenge for me, I'm new to it and so I get lost pretty quickly. However, it looks like in the normal servlet environment, there is an exception handler that looks for an annotated handler. When running under SpringJUnit4ClassRunner, the exception isn't processed the same way.</p>\n\n<p>If there is a way to fix this, I'd like to do it. I've avoided spring-test-mvc because of a lack of pioneer spirit, but if someone tells me that it can manage this just fine, I'll try that instead.</p>\n\n<p>The contents of my junit-servlet-context.xml file are nearly identical to the servlet-context.xml file created by the Spring Template MVC wizard. The only difference is the addition of an exclude-filter that is used to prevent instantiation of a @Component that creates a few singletons used by my controller.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/mvc\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:beans=\"http://www.springframework.org/schema/beans\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n&lt;!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure --&gt;\n\n&lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n&lt;annotation-driven /&gt;\n\n&lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory --&gt;\n&lt;resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n&lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\n&lt;beans:bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;beans:property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n    &lt;beans:property name=\"suffix\" value=\".jsp\" /&gt;\n&lt;/beans:bean&gt;\n&lt;context:component-scan base-package=\"com.cisco.onplus.home.dmz\" &gt;\n&lt;context:exclude-filter type=\"regex\" expression=\".*InitDatabase.*\"/&gt;\n&lt;/context:component-scan&gt;   \n&lt;/beans:beans&gt;\n</code></pre>\n"},{"tags":["java","database","spring","hibernate","sessionfactory"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13072948,"title":"Multiple Hibernate data sources","body":"<p>I have a project that currently uses 3 databases on the same database server. One of the databases has now been moved to another physical server and I'm trying to get hibernate to handle this but struggling to work out where to start - should I duplicate datasource, sessionfactory, hibernatetemplate, and transaction manager and then try to manage this in the code? I'm using Spring 3 and Hibernate 3.5. Is this a common thing to do? Any advice would be much appreciated.</p>\n\n<p>If it helps my config currently looks like this:</p>\n\n<pre><code>&lt;bean id=\"datasource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"/&gt;\n    &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/DatabaseOne\"/&gt;\n    &lt;property name=\"username\" value=\"username\"/&gt;\n    &lt;property name=\"password\" value=\"password\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"datasource\"/&gt;\n    &lt;property name=\"exposeTransactionAwareSessionFactory\"&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;\n    &lt;property name=\"annotatedClasses\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;domain.DatabaseOneObject&lt;/value&gt;\n            &lt;value&gt;domain.DatabaseTwoObject&lt;/value&gt;\n            &lt;value&gt;domain.DatabaseThreeObject&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"hibernateTemplate\" class=\"org.springframework.orm.hibernate3.HibernateTemplate\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["eclipse","spring","debugging","spring-roo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12737065,"title":"Site runs fine with mvn tomcat:run but can't debug in Eclipse with Debug As","body":"<p>(using 1.2.2.RELEASE rev 7d75659)</p>\n\n<p>The web app runs fine if I run mvn tomcat:run from the command line and can use it in the browser </p>\n\n<p>In Eclipse 4.2.1, I tried (right click project) > Debug As > Debug on Server > Tomcat v6 Server at localhost</p>\n\n<p>Got a 500 server error (below)</p>\n\n<p>what can I do to get debugging working?</p>\n\n<pre><code>HTTP Status 500 - \n\n--------------------------------------------------------------------------------\n\ntype Exception report\n\nmessage \n\ndescription The server encountered an internal error () that prevented it from fulfilling this request.\n\nexception \n\norg.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from relative location [webflow-config.xml]\nOffending resource: ServletContext resource [/WEB-INF/spring/webmvc-config.xml]; nested exception is org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/webflow-config]\nOffending resource: ServletContext resource [/WEB-INF/spring/webflow-config.xml]\n\n    org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)\n    org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)\n    org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:271)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:196)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:181)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\n    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\n    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\n    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)\n    org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)\n    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)\n    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)\n    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)\n    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)\n    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)\n    javax.servlet.GenericServlet.init(GenericServlet.java:212)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\n    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\n    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    java.lang.Thread.run(Unknown Source)\n\n\nroot cause \n\norg.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/webflow-config]\nOffending resource: ServletContext resource [/WEB-INF/spring/webflow-config.xml]\n\n    org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)\n    org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)\n    org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:80)\n    org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.error(BeanDefinitionParserDelegate.java:316)\n    org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1416)\n    org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1409)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:255)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:196)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:181)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\n    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\n    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\n    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)\n    org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)\n    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)\n    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)\n    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)\n    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)\n    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)\n    javax.servlet.GenericServlet.init(GenericServlet.java:212)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\n    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\n    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    java.lang.Thread.run(Unknown Source)\n\n\nnote The full stack trace of the root cause is available in the Apache Tomcat/6.0.32 logs.\n\n\n--------------------------------------------------------------------------------\n\nApache Tomcat/6.0.32\n</code></pre>\n"},{"tags":["spring","servlets","spring-mvc","path"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13073961,"title":"How to get the project name or path of from context or other class?","body":"<p>my project run on:</p>\n\n<pre><code>hXXp://localhost:8080/mvc\n</code></pre>\n\n<p>but when I rebuild on client part it would be:</p>\n\n<pre><code>hxxp://localhsot:8080/mvc-1.0.0-SNAPSHOT\n</code></pre>\n\n<p>I want get the parameter of <code>mvc</code> or <code>mvc-1.0.0-SNAPSHOT</code> in one of my controller of SpringMVC. </p>\n\n<p>（because I will setting some dynamic picture path）</p>\n\n<p>How to get these names in context or controller class?</p>\n"},{"tags":["spring","validation","bean-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13059961,"title":"ConstraintValidatorContext stores previous nodes when it shouldn't","body":"<p>I have this class</p>\n\n<pre><code>@HasNose\n@HasMouth\npublic class Person {\n\n    String fieldA;\n    String fieldB;\n    // getters and setters\n\n}\n</code></pre>\n\n<p>Now the custom annotations validator look something like this</p>\n\n<pre><code>// validator of @HasNose\n@Override\npublic boolean isValid(Object object, \n                        ConstraintValidatorContext context) {\n\n    // some tests that determine there is an error\n    context.disableDefaultConstraintViolation();\n            context.buildConstraintViolationWithTemplate(\"Some message\")\n            .addNode(\"fieldA\")\n            .addConstraintViolation();\n\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// validator of @HasMouth\n@Override\npublic boolean isValid(Object object, \n                        ConstraintValidatorContext context) {\n\n    // some tests that determine there is an error\n    context.disableDefaultConstraintViolation();\n            context.buildConstraintViolationWithTemplate(\"Some message\")\n            .addNode(\"fieldB\")\n            .addConstraintViolation();\n\n}\n</code></pre>\n\n<p>Running this produces the exception:</p>\n\n<pre><code>java.lang.IllegalStateException: JSR-303 validated property 'fieldA.fieldB' does not have a corresponding accessor for Spring data binding - check your DataBinder's configuration (bean property versus direct field access)\nat org.springframework.validation.beanvalidation.SpringValidatorAdapter.processConstraintViolations(SpringValidatorAdapter.java:148)\nat org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:101)\nat org.springframework.validation.DataBinder.validate(DataBinder.java:722)\nat org.springframework.web.method.annotation.ModelAttributeMethodProcessor.validateIfApplicable(ModelAttributeMethodProcessor.java:154)\nat org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:107)\nat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:74)\nat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:155)\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:641)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\nat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)\nat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\nat java.lang.Thread.run(Thread.java:680)\n</code></pre>\n\n<p>For some reason \"ConstraintValidatorContext\" is concatenating both fields. Debugging shows that the attribute \"propertyPath\" comes already filled out with \"fieldA\".\nI thought it should be at the root level per constraint validator doesn't it?</p>\n"},{"tags":["json","spring","spring-mvc","file-upload","response"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":262,"score":2,"question_id":11511875,"title":"how to force spring to return \"text/html\" instead of \"application/json\"?","body":"<p>I have a file attachment plug-in (<a href=\"http://valums.com/ajax-upload/\" rel=\"nofollow\">AJAX File Upload plugin from Valums</a>) that requires the return json to be of type \"text/html\". The web application I'm developing utilizes the Spring Framework, which forces the return type to be \"application/json\". I want the json to return as \"text/html\". Since the return json is of type \"application/json\", I get a file download dialog box, which is something the users should not see (the file should upload automatically). </p>\n\n<pre><code>@RequestMapping(value=\"attachmentUpload\", method=RequestMethod.POST)\npublic @ResponseBody Map&lt;String, String&gt; attachmentUpload(\n        @ModelAttribute(\"fileUploadFB\") @Valid final FileUploadFormBean fileUploadFB,\n        BindingResult result,\n        SessionStatus sessionStatus,\n        HttpServletResponse response) {\n\n    final Map&lt;String, String&gt; resultMap = new HashMap&lt;String, String&gt;();\n\n    resultMap.put(\"success\", \"true\");\n\n    // vain attempts to force text/html; do not work\n    response.setContentType(\"text/html;charset=UTF-8\");\n    response.setHeader(\"Content-Type\", \"text/html\");\n\n    return resultMap;\n}\n</code></pre>\n\n<p>If anyone has any suggestions, it would be greatly appreciated!</p>\n"},{"tags":["java","spring","jasper-reports"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":294,"score":1,"question_id":10381696,"title":"Displaying the images in html report using ireport","body":"<p>I was trying for long, am create report using iReport designer. In that its showing the images in all format(PDF,Excel,RTF). but while am trying to display in html format, the image is not displaying. What i want to do to solve dis problem. Am trying dis for long time. could anyone help me.\nThe following is the code i am using in my controller class for images in html report.</p>\n\n<pre><code> String image = request.getSession().getServletContext().getRealPath(\"/\"); \nMap parameterMap = new HashMap();\n\n\n parameterMap.put(\"datasource\", JRdataSource);\n        parameterMap.put(\"Image1\",image);\n        parameterMap.put(\"Image2\",image);\n        parameterMap.put(JRExporterParameter.CHARACTER_ENCODING, \"UTF8\");\n        parameterMap.put(JRHtmlExporterParameter.IMAGES_URI, \"../report/image?image=\");\n        parameterMap.put(JRHtmlExporterParameter.IS_USING_IMAGES_TO_ALIGN, Boolean.FALSE);\n //htmlReport bean has ben declared in the jasper-views.xml file\n        modelAndView = new ModelAndView(\"htmlReport\", parameterMap);\n\n        return modelAndView;\n</code></pre>\n\n<p>The below is my jrxml code.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;jasperReport xmlns=\"http://jasperreports.sourceforge.net/jasperreports\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd\" name=\"testreport2\" language=\"java\" pageWidth=\"595\" pageHeight=\"842\" columnWidth=\"555\" leftMargin=\"20\" rightMargin=\"20\" topMargin=\"20\" bottomMargin=\"20\"&gt;\n    &lt;property name=\"ireport.zoom\" value=\"1.0\"/&gt;\n    &lt;property name=\"ireport.x\" value=\"0\"/&gt;\n    &lt;property name=\"ireport.y\" value=\"0\"/&gt;\n    &lt;parameter name=\"Image1\" class=\"java.lang.String\"/&gt;\n    &lt;parameter name=\"Image2\" class=\"java.lang.String\"/&gt;\n    &lt;field name=\"activePackage\" class=\"java.lang.String\"/&gt;\n    &lt;background&gt;\n        &lt;band splitType=\"Stretch\"/&gt;\n    &lt;/background&gt;\n    &lt;title&gt;\n        &lt;band height=\"60\" splitType=\"Stretch\"&gt;\n            &lt;staticText&gt;\n                &lt;reportElement mode=\"Opaque\" x=\"0\" y=\"0\" width=\"555\" height=\"56\"/&gt;\n                &lt;textElement/&gt;\n                &lt;text&gt;&lt;![CDATA[]]&gt;&lt;/text&gt;\n            &lt;/staticText&gt;\n            &lt;staticText&gt;\n                &lt;reportElement mode=\"Opaque\" x=\"0\" y=\"2\" width=\"515\" height=\"54\" backcolor=\"#E6E6E6\"/&gt;\n                &lt;textElement/&gt;\n                &lt;text&gt;&lt;![CDATA[]]&gt;&lt;/text&gt;\n            &lt;/staticText&gt;\n            &lt;image scaleImage=\"Clip\" isUsingCache=\"false\"&gt;\n                &lt;reportElement key=\"image-1\" x=\"308\" y=\"2\" width=\"187\" height=\"58\"/&gt;\n                &lt;imageExpression class=\"net.sf.jasperreports.engine.JRRenderable\"&gt;&lt;![CDATA[net.sf.jasperreports.engine.JRImageRenderer.getInstance(image-dir\"/flower1.png\"))]]&gt;&lt;/imageExpression&gt;\n            &lt;/image&gt;\n            &lt;image scaleImage=\"Clip\" isUsingCache=\"false\"&gt;\n                &lt;reportElement key=\"image-1\" x=\"0\" y=\"0\" width=\"226\" height=\"57\"/&gt;\n                &lt;imageExpression class=\"net.sf.jasperreports.engine.JRRenderable\"&gt;&lt;![CDATA[net.sf.jasperreports.engine.JRImageRenderer.getInstance(image-dir\"/flower2.png\"))]]&gt;&lt;/imageExpression&gt;\n            &lt;/image&gt;\n        &lt;/band&gt;\n    &lt;/title&gt;\n    &lt;pageHeader&gt;\n        &lt;band height=\"35\" splitType=\"Stretch\"/&gt;\n    &lt;/pageHeader&gt;\n    &lt;columnHeader&gt;\n        &lt;band height=\"61\" splitType=\"Stretch\"&gt;\n            &lt;staticText&gt;\n                &lt;reportElement x=\"0\" y=\"0\" width=\"100\" height=\"20\"/&gt;\n                &lt;textElement/&gt;\n                &lt;text&gt;&lt;![CDATA[activePackage]]&gt;&lt;/text&gt;\n            &lt;/staticText&gt;\n        &lt;/band&gt;\n    &lt;/columnHeader&gt;\n    &lt;detail&gt;\n        &lt;band height=\"39\" splitType=\"Stretch\"&gt;\n            &lt;textField&gt;\n                &lt;reportElement x=\"0\" y=\"0\" width=\"100\" height=\"20\"/&gt;\n                &lt;textElement/&gt;\n                &lt;textFieldExpression&gt;&lt;![CDATA[$F{activePackage}]]&gt;&lt;/textFieldExpression&gt;\n            &lt;/textField&gt;\n        &lt;/band&gt;\n    &lt;/detail&gt;\n    &lt;columnFooter&gt;\n        &lt;band height=\"45\" splitType=\"Stretch\"/&gt;\n    &lt;/columnFooter&gt;\n    &lt;pageFooter&gt;\n        &lt;band height=\"54\" splitType=\"Stretch\"/&gt;\n    &lt;/pageFooter&gt;\n    &lt;summary&gt;\n        &lt;band height=\"42\" splitType=\"Stretch\"/&gt;\n    &lt;/summary&gt;\n&lt;/jasperReport&gt;\n</code></pre>\n\n<p>Here the two images are located under webapp/images.I am passing these images as the parameter from the controller class to the jrxml file.</p>\n\n<p>Images are not displaying.Anything wrong in my code.Anyhelp will be highly appreciated.</p>\n"},{"tags":["hibernate","spring","jpa","persist","postconstruct"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":166,"score":1,"question_id":8903499,"title":"Spring + JPA + Hibernate: No inserts at startup","body":"<p>I'm executing a method at startup time with <code>@PostConstruct</code> annotation. This method has to check a value stored in a table in DB. If it doesn't exist, then it has to insert it. The checking of the value in DB is done correctly, however if I had to persist it, it won't write it to DB. It doesn't throw any exception and <code>persist()</code> is executed (apparently) without problems, only the value is not inserted in DB.</p>\n\n<p>Moreover, once everything is up, if I manually call that method (from a Controller, for example), it will insert the value correctly.</p>\n\n<pre><code>@PostConstruct\npublic void insertIfNecessary()\n{\n   Request r = Request.findRequestForUser(this.me);\n   if ( r == null )\n   {\n      r = new Request();\n      r.setOwner(this.me);\n      r.persist();\n   }\n}\n</code></pre>\n\n<p>Do you know what may be wrong?</p>\n\n<p>Best regards,\nMiguel</p>\n"},{"tags":["spring","primefaces","spring-security","spring-webflow"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13073128,"title":"Spring PrimeFaces selectOneMenu submit send me to 405 - Request method 'POST' not supported","body":"<p>I've got very painful problem. Could not find solution on web. </p>\n\n<p>I'm using Spring 3.0 with JSF and PrimeFaces Spring Security is configured, also have configuration for Spring Web Flow (but I'm not using it in this example).</p>\n\n<p>Here is behavior I want to achieve:\nUser choosing a value from p:selectOneMenu and it submits on change. Then the value is send for the Bean and it's being changed there as well.\nEffect: using p:selectOneMenu i changed value inside the userBean</p>\n\n<p>After implementing all, I got an error which says:</p>\n\n<pre><code>    HTTP Status 405 - Request method 'POST' not supported\n</code></pre>\n\n<p>Select One Menu is written like that :</p>\n\n<pre><code>&lt;f:view&gt;\n&lt;h:form id=\"formUserChange\"  &gt;\n&lt;p:panelGrid columns=\"2\"&gt;\n&lt;p:selectOneMenu id=\"chooseUserType\" onchange=\"formUserChange.submit();\" \nvalue=\"#{userBean.userType}\" valueChangeListener=\"#{userBean.processValueChange}\" \nstyle=\"padding: 0px 5px; font-size: 13px; width: 200px;\" &gt;\n      &lt;f:selectItem itemLabel=\"Option 1\" itemValue=\"KO\" /&gt;\n      &lt;f:selectItem itemLabel=\"Option 2\" itemValue=\"KJ\" /&gt;\n&lt;/p:selectOneMenu&gt;\n&lt;/p:panelGrid&gt;\n&lt;/h:form&gt;\n&lt;/f:view&gt;\n</code></pre>\n\n<p>Bean is placed like that:</p>\n\n<pre><code>   @ManagedBean(name = \"userBean\")\n   @SessionScoped\n   public class UserBean implements Serializable, ValueChangeListener {\n\nprivate static final long serialVersionUID = 1L;\n\nprivate String userName = \"Michal\";\nprivate String userType = \"WO\";\n\npublic UserBean() {\n}\n\npublic String getUserName() {\n    System.out.println(\"I got now \" + userType);\n    return userName;\n}\n\npublic void setUserName(String userName) {\n    this.userName = userName;\n}\n\npublic String getUserType() {\n    return userType;\n}\n\npublic void setUserType(String userType) {\n    this.userType = userType;\n    System.out.println(\"I set user as \" + userType);\n}\n\n@Override\npublic void processValueChange(ValueChangeEvent arg0) throws AbortProcessingException {\n    System.out.println(\"I have got \" + userType);\n}\n\n    }\n</code></pre>\n\n<p>On one example I've found on web, guy said that valueChangeListener is not needed because value=\"#{userBean.userType}\" will do the trick, but its not the issue here, I tried both with no effect. </p>\n\n<p>The value is not changing at all. I know that bean works on the console but got errors on the console:</p>\n\n<pre><code>    18:09:26,565 INFO  [stdout] (http-localhost-127.0.0.1-8080-4) I got now WO\n\n    18:09:28,537 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-4) Request method 'POST' not supported\n</code></pre>\n\n<p>And also I got the page (as mentioned at start):</p>\n\n<pre><code>    HTTP Status 405 - Request method 'POST' not supported\n</code></pre>\n\n<p>What do I missed ? Any annotation or sth ?\nI don't got a clue what's wrong</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13072125,"title":"How to create a list of different types of objectsusing Spring without them being beans","body":"<p>I have a class which will have a list of commands that it must execute one after another. Commands may be repeated and I don't want to create a bean for each Command.</p>\n\n<p>What I have in mind is something like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n&lt;bean id=\"parent\" class=\"Parent\"&gt;\n    &lt;property name=\"commands\"&gt;\n        &lt;list value-type=\"Command\"&gt;\n            &lt;value&gt;OneCommand&lt;/value&gt;\n            &lt;value&gt;OtherCommand&lt;/value&gt;\n            &lt;value&gt;OneCommand&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>And for each value the constructor of the class is called and a new Command object added to the list.</p>\n\n<p>Thing is that when I run a test with that xml file the following exception:</p>\n\n<pre><code>...\n\nCaused by: java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.fideliapos.middleoffice.provisioning.ProvisioningCommand] for property 'commands[0]': no matching editors or conversion strategy found\nat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:231)\nat org.springframework.beans.TypeConverterDelegate.convertToTypedCollection(TypeConverterDelegate.java:520)\nat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:173)\nat org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:447)\n... 42 more\n</code></pre>\n\n<p>What am I doing wrong? How can I get spring to call the constructor?</p>\n"},{"tags":["spring","hibernate","caching","tomcat","jpa"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13072220,"title":"monitor performance with JPA + Spring","body":"<p>What are the tools and approaches you suggest to use for monitoring performance? My app is running on Tomcat, Spring 3, JPA, Hibernate and solr. I've noticed some lag/slow activity on a certain page.\nThe app does not have any code of cache setup. Or even connection pooling.</p>\n\n<p>Pardon my beginner-style questions, I'm only entering the \"performance monitoring\" world just now...</p>\n\n<p>I know couple of things to look at is- dabatase calls, connection pooling, indexed tables, caching etc.</p>\n"},{"tags":["spring","dependency-injection","repository"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13072101,"title":"Injecting Object into @Repository loaded with component-scan - No Autowired","body":"<p>I have the following Dao class defined:</p>\n\n<pre><code>@Repository\npublic class MyDao {\n\n  private JdbcTemplate jdbcTemplate;\n\n  private String myString;\n\n  @Autowired \n  public void setDataSource(DataSource dataSource) {\n    this.jdbcTemplate = new JdbcTemplate(dataSource);\n  }\n</code></pre>\n\n<p>I'm using component scanning over the package where MyDao is defined so I do not have a bean definition for MyDao in my Spring configuration file. Is there a way to inject a String into myString without using autowiring? What are my alternatives for this?</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13071191,"title":"Spring 3 Web MVC - @Controller method() pre & post processing functionality through annotations","body":"<p>I'd like to be able to have the following:</p>\n\n<pre><code>@Controller    \npublic class MyController {\n\n    @RequestMapping(value=\"/someurl\", method=RequestMethod.GET)\n    @PreProcess\n    @PostProcess\n    public String doStuff(ModelMap map) {\n        //do stuff\n        return \"someurl\";\n    }\n\n}\n</code></pre>\n\n<p>The <code>@PreProcess</code> and <code>@PostProcess</code> are arbitrarily named Annotations.</p>\n\n<p>I've been looking for a working example of this but I can't find any. I've looked at AOP and the use of the <code>@Aspect</code> annotation but I found it quite complex. A working example of what I'm trying to do would be great.</p>\n\n<p>I've sampled Spring Security in the past but this isn't quite what I need because I need the processing to be custom, pretty much anything I want.</p>\n\n<p>I know that this functionality is available in .Net MVC. Hoping it's available in Spring also.</p>\n\n<p>Any help or pointers really appreciated.</p>\n"},{"tags":["java","web-services","spring","rest","jax-rs"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13071161,"title":"REST Service with jax-rs : BeanCreationException","body":"<p>Hello i have a problem with apache cxf and a rest service (with jax-rs, and spring).</p>\n\n<p>I'm trying to publish a rest service : userService</p>\n\n<p>The error is : </p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Invocation of init method failed; nested exception is org.apache.cxf.service.factory.ServiceConstructionException\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1422)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:518)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)\n    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:680)\nCaused by: org.apache.cxf.service.factory.ServiceConstructionException\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:194)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1546)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1487)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1419)\n    ... 22 more\nCaused by: javax.ws.rs.WebApplicationException\n    at org.apache.cxf.jaxrs.AbstractJAXRSFactoryBean.checkResources(AbstractJAXRSFactoryBean.java:315)\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:144)\n    ... 29 more\n25 oct. 2012 16:42:21 org.apache.catalina.core.StandardContext listenerStart\nGRAVE: Exception lors de l'envoi de l'évènement contexte initialisé (context initialized) à l'instance de classe d'écoute (listener) org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Invocation of init method failed; nested exception is org.apache.cxf.service.factory.ServiceConstructionException\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1422)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:518)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)\n    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:680)\nCaused by: org.apache.cxf.service.factory.ServiceConstructionException\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:194)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1546)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1487)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1419)\n    ... 22 more\nCaused by: javax.ws.rs.WebApplicationException\n    at org.apache.cxf.jaxrs.AbstractJAXRSFactoryBean.checkResources(AbstractJAXRSFactoryBean.java:315)\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:144)\n    ... 29 more\n</code></pre>\n\n<p>The web.xml : </p>\n\n<pre><code>    &lt;display-name&gt;CXF REST Example&lt;/display-name&gt;\n&lt;description&gt;CXF REST Example&lt;/description&gt;\n\n&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/applicationContext-cxf.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;\n        org.springframework.web.context.ContextLoaderListener\n    &lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;servlet&gt;\n    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;\n        org.apache.cxf.transport.servlet.CXFServlet\n    &lt;/servlet-class&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>The applicationContext-cxf.xml :</p>\n\n<pre><code>&lt;import resource=\"classpath:META-INF/cxf/cxf.xml\" /&gt;\n\n&lt;jaxrs:server id=\"userService\" address=\"/\"&gt;\n    &lt;jaxrs:serviceBeans&gt;\n        &lt;ref bean=\"userService\" /&gt;\n    &lt;/jaxrs:serviceBeans&gt;\n&lt;/jaxrs:server&gt;\n</code></pre>\n\n<p>The service interface : </p>\n\n<pre><code>@Path(\"v1\")\npublic interface UserService {\n    @GET\n    @Path(\"user\")\n    @Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })\n    public User getUser();\n}\n</code></pre>\n\n<p>The service implementation : </p>\n\n<pre><code>@Service(\"userService\")\npublic class UserServiceImpl implements UserService {\n\n    public User getUser() {\n        User u = new User();\n        u.setFirstName(\"plop\");\n        u.setLastName(\"plop\");\n        u.setEmail(\"plop@plop.com\");\n        u.setUuid(\"1\");\n\n        return u;\n    }\n\n}\n</code></pre>\n\n<p>Thanks a lot for the help ! This problem kills me !</p>\n"},{"tags":["java","spring","spring-mvc","annotations","spring-security"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2364,"score":1,"question_id":4828758,"title":"Spring security using model properties to apply roles","body":"<p>I have a Spring MVC app which I wish to integrate Spring Security with (Spring 3.0.x).</p>\n\n<p>web.xml contains:</p>\n\n<pre><code>&lt;context-param&gt;\n    &lt;description&gt;Context Configuration locations for Spring XML files&lt;/description&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;\n        classpath*:spring/spring-model.xml\n        classpath*:spring/spring-compiler.xml\n        classpath*:spring/spring-ui.xml\n        classpath*:spring/spring-security.xml\n    &lt;/param-value&gt;\n&lt;/context-param&gt;\n&lt;listener&gt;\n    &lt;description&gt;&lt;![CDATA[\n        Loads the root application context of this web app at startup, use \n        contextConfigLocation paramters defined above or by default use \"/WEB-INF/applicationContext.xml\".\n        - Note that you need to fall back to Spring's ContextLoaderServlet for\n        - J2EE servers that do not follow the Servlet 2.4 initialization order.\n\n        Use WebApplicationContextUtils.getWebApplicationContext(servletContext) to access it anywhere in the web application, outside of the framework.\n\n        The root context is the parent of all servlet-specific contexts.\n        This means that its beans are automatically available in these child contexts,\n        both for getBean(name) calls and (external) bean references.\n    ]]&gt;&lt;/description&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n&lt;servlet&gt;\n    &lt;description&gt;Configuration for the Spring MVC webapp servlet&lt;/description&gt;\n    &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;classpath*:spring/spring-mvc.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/app/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>I would like to add role-based security so that users can't access certain parts of the site.</p>\n\n<p>e.g. a user should have the role <code>CRICKET_USER</code> to be able to access <code>http://example.com/sports/cricket</code> and the role <code>FOOTBALL_USER</code> to access <code>http://example.com/sports/football</code>.</p>\n\n<p>The URIs in the application retain this hierarchy, so there might be resources such as <code>http://example.com/sports/football/leagues/premiership</code> which should similarly require the user to have the role <code>FOOTBALL_USER</code>.</p>\n\n<p>I have a controller like so:</p>\n\n<pre><code>@Controller(\"sportsController\")\n@RequestMapping(\"/sports/{sportName}\")\npublic class SportsController {\n\n    @RequestMapping(\"\")\n    public String index(@PathVariable(\"sportName\") Sport sport, Model model) {\n        model.addAttribute(\"sport\", sport);\n        return \"sports/index\";\n    }\n\n}\n</code></pre>\n\n<p>I've been trying to use the most idiomatic, obvious way to fulfil this requirement, but I'm not sure I've found it yet. I've tried 4 different approaches.</p>\n\n<h1>@PreAuthorize annotation</h1>\n\n<p>I've tried to use <code>@PreAuthorize(\"hasRole(#sportName.toUpperCase() + '_USER')\")</code> on each @RequestMapping method on that controller (and other controllers which handle URI requests further down the hierarchy. I haven't been able to get that working; no error, but it doesn't seem to do anything.</p>\n\n<p>Bad points:</p>\n\n<ul>\n<li>Doesn't work?</li>\n<li>Method-level annotation, rather than class level, on the <code>@Controller</code>. That isn't very DRY. Plus there is the potential for leaving a security hole if more functionality gets added and someone forgets to add the annotation to the new code.</li>\n<li>I can't write a test for it.</li>\n</ul>\n\n<h1>Intercept-url in Spring Security chain</h1>\n\n<pre><code>&lt;http use-expressions=\"true\"&gt;\n\n    &lt;!--  note that the order of these filters are significant --&gt;\n    &lt;intercept-url pattern=\"/app/sports/**\" access=\"hasRole(#sportName.toUpperCase() + '_USER')\" /&gt;\n\n    &lt;form-login always-use-default-target=\"false\"\n        authentication-failure-url=\"/login/\" default-target-url=\"/\"\n        login-page=\"/login/\" login-processing-url=\"/app/logincheck\"/&gt;\n    &lt;!-- This action catch the error message and make it available to the view --&gt;\n    &lt;anonymous/&gt;\n    &lt;http-basic/&gt;\n    &lt;access-denied-handler error-page=\"/app/login/accessdenied\"/&gt;\n    &lt;logout logout-success-url=\"/login/\" logout-url=\"/app/logout\"/&gt;\n&lt;/http&gt;\n</code></pre>\n\n<p>This feels like it should work, would be obvious to other developers as to what it's doing but I've not been successful with this approach. My only pain-point with this approach is not being able to write a test that will flag a problem if something changes down the road.</p>\n\n<pre><code>java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole(#sportName.toUpper() + '_USER')'\nat org.springframework.security.access.expression.ExpressionUtils.evaluateAsBoolean(ExpressionUtils.java:13)\nat org.springframework.security.web.access.expression.WebExpressionVoter.vote(WebExpressionVoter.java:34)\n...\nCaused by: \norg.springframework.expression.spel.SpelEvaluationException: EL1011E:(pos 17): Method call: Attempted to call method toUpper() on null context object\nat org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:69)\nat org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:57)\n</code></pre>\n\n<h1>Standard Filter in the Spring Security chain.</h1>\n\n<pre><code>public class SportAuthorisationFilter extends GenericFilterBean {\n\n    /**\n     * {@inheritDoc}\n     */\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n\n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n\n        String pathInfo = httpRequest.getPathInfo();\n\n        /* This assumes that the servlet is coming off the /app/ context and sports are served off /sports/ */\n        if (pathInfo.startsWith(\"/sports/\")) {\n\n            String sportName = httpRequest.getPathInfo().split(\"/\")[2];\n\n            List&lt;String&gt; roles = SpringSecurityContext.getRoles();\n\n            if (!roles.contains(sportName.toUpperCase() + \"_USER\")) {\n                throw new AccessDeniedException(SpringSecurityContext.getUsername()\n                        + \"is  not permitted to access sport \" + sportName);\n            }\n        }\n\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>&lt;http use-expressions=\"true\"&gt;\n\n    &lt;!--  note that the order of these filters are significant --&gt;\n\n    &lt;!--\n      Custom filter for /app/sports/** requests. We wish to restrict access to those resources to users who have the\n      {SPORTNAME}_USER role.\n    --&gt;\n    &lt;custom-filter before=\"FILTER_SECURITY_INTERCEPTOR\" ref=\"sportsAuthFilter\"/&gt;\n    &lt;form-login always-use-default-target=\"false\"\n        authentication-failure-url=\"/login/\" default-target-url=\"/\"\n        login-page=\"/login/\" login-processing-url=\"/app/logincheck\"/&gt;\n    &lt;!-- This action catch the error message and make it available to the view --&gt;\n    &lt;anonymous/&gt;\n    &lt;http-basic/&gt;\n    &lt;access-denied-handler error-page=\"/app/login/accessdenied\"/&gt;\n    &lt;logout logout-success-url=\"/login/\" logout-url=\"/app/logout\"/&gt;\n&lt;/http&gt;\n\n&lt;beans:bean id=\"sportsAuthFilter\" class=\"com.example.web.controller.security.SportsAuthorisationFilter\" /&gt;\n</code></pre>\n\n<p>Plus points:</p>\n\n<ul>\n<li>This works</li>\n</ul>\n\n<p>Bad points:</p>\n\n<ul>\n<li>No tests.</li>\n<li>Potentially fragile if our application URI structure changes.</li>\n<li>Not obvious to the next guy that comes to change the code.</li>\n</ul>\n\n<h1>Validate in the Formatter implementation used by @PathVariable</h1>\n\n<pre><code>@Component\npublic class SportFormatter implements DiscoverableFormatter&lt;Sport&gt; {\n\n@Autowired\nprivate SportService SportService;\n\npublic Class&lt;Sport&gt; getTarget() {\n    return Sport.class;\n}\n\npublic String print(Sport sport, Locale locale) {\n    if (sport == null) {\n        return \"\";\n    }\n    return sport.getName();\n}\n\npublic Sport parse(String text, Locale locale) throws ParseException {\n    Sport sport;\n\n    if (text == null || text.isEmpty()) {\n        return new Sport();\n    }\n\n    if (NumberUtils.isNumber(text)) {\n        sport = sportService.getByPrimaryKey(new Long(text));\n    } else {\n        Sport example = new Sport();\n        example.setName(text);\n        sport = sportService.findUnique(example);\n    }\n\n    if (sport != null) {\n        List&lt;String&gt; roles = SpringSecurityContext.getRoles();\n\n        if (!roles.contains(sportName.toUpperCase() + \"_USER\")) {\n            throw new AccessDeniedException(SpringSecurityContext.getUsername()\n                    + \"is  not permitted to access sport \" + sportName);\n        }      \n    }\n\n    return sport != null ? sport : new Sport();\n    }\n}\n</code></pre>\n\n<p>Plus points:</p>\n\n<ul>\n<li>This works.</li>\n</ul>\n\n<p>Bad points:</p>\n\n<ul>\n<li>Does this rely on every @RequestMapping annotated method in the controllers having a @PathVariable which retrieves the Sport instance?</li>\n<li>No tests.</li>\n</ul>\n\n<p>Please point out which part of the fine manual I'm missing.</p>\n"},{"tags":["spring","jpa-2.0"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13069999,"title":"Spring Transaction with JNDI and JPA transaction manager","body":"<p>I have defined DataSource in Context.xml(JNDI) and i would like to use with JPA transaction manager in Spring application Context.xml. I don't want to use JTA Transaction since i am using tomcat server.</p>\n\n<p>Could anyone help me how can i achieve this with an example? I am using @transactional annotations in DAO's and services.</p>\n\n<p>Regards\nVijay</p>\n"},{"tags":["spring","spring-security","acegi"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":6240,"score":6,"question_id":631217,"title":"Spring Security: How to get the initial target url","body":"<p>I am using the spring security to restricted urls. I am trying to provide signup and login page, on the same page.</p>\n\n<p>On login spring security transfers to the restricted page. However i am trying to pass the target url to the signup process, so that after signup we can redirect to the restricted page.</p>\n\n<p>How to get the actual URL that user was redirected from. </p>\n\n<p>Any Ideas?</p>\n"},{"tags":["spring","spring-mvc","spring-security","spring-el"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12896240,"title":"How to access objects inside model in @PostAuthorize using SpEL","body":"<p>I created this method just to explain the scenario. I would like to evaluate the user domain object inside the model object.</p>\n\n<p>I know I can evaluate return objects and method arguments. But I got the following error when I tried with model object,*<em>is it not possible to use model objects in PostAuthorize / PreAuthorize? *</em> </p>\n\n<h2>Error</h2>\n\n<p><em>[Request processing failed; nested exception is java.lang.IllegalArgumentException: Failed to evaluate expression '#model.user.userName != 'ramesh''] with root cause\norg.springframework.expression.spel.SpelEvaluationException: EL1008E:(pos 7): Field or property 'user' cannot be found on object of type 'org.springframework.validation.support.BindingAwareModelMap'</em></p>\n\n<h2>code</h2>\n\n<pre><code>@PostAuthorize(\"#model.user.userName != 'ramesh'\")\n    @RequestMapping(value=\"/createusername\", method = RequestMethod.GET)\n    public String getCreateUserNamePage(ModelMap model) {\n        User user = new User();\n        String username = SecurityContextHolder.getContext().getAuthentication().getName();\n        if(username!=null)\n            user = customUserDetailsService.getUserByUsername(username);\n        else\n            user.setUserName(username);\n        model.put(\"user\", user);\n        return \"createusername\";\n    }\n</code></pre>\n"},{"tags":["spring","spring-security"],"answer_count":2,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":2566,"score":5,"question_id":5389274,"title":"Spring Security 3 Get Initially Requested URL","body":"<p>I need to modify my spring security login page based on where the user came from. My client wants the styles different between the two.  If you come from appcontextroot/test vs appcontextroot/choose.  I tried to do the below but the String url=savedRequest.getRedirectUrl(); is equal to the spring login page already and not the initial page requested by the user. Any ideas?</p>\n\n<pre><code>ExternalContext externalContext = FacesUtils.getExternalContext();\n    HttpServletRequest request = (HttpServletRequest)externalContext.getRequest();\n    HttpSession session = request.getSession(false);\n    if(session != null) {\n        SavedRequest savedRequest = new DefaultSavedRequest(request, new PortResolverImpl());\n        String url=savedRequest.getRedirectUrl();\n    } \n</code></pre>\n"},{"tags":["spring","caching","solr","search-engine","strategy-pattern"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13065647,"title":"What caching strategy for search queries","body":"<p>We are developing a search engine web application that will enable users to search the content of about 200 portals.</p>\n\n<p>Our business partner is taking care of maintaining and feeding a solr/lucene instance that is doing the workhorse job of indexing the data.</p>\n\n<p>Our application queries solr and presents the results in a human-friendly way. However, we are wondering how we could limit the amount of queries, perhaps using some form of <strong>caching</strong>. The results could be cached for few hours.</p>\n\n<p>What we are wondering is: what could be a <strong>good strategy</strong> for caching the queries results? Obviously we expect the method invocations to vary a lot... Does it make sense at all to do caching?</p>\n\n<p>Is there some caching system that is particularly suitable in this use case? We are using Spring 3 for the development.</p>\n"},{"tags":["spring","maven","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13070254,"title":"Reading properties file from a class which is in another jar","body":"<p>I have a project with multiple maven subprojects. Using Spring, JPA, JUnit.</p>\n\n<pre><code>+common\n   + WebserviceBindingProvider.java  \n+views\n   +......\n   +src/main/test/TestClass.java\n   +src/main/test/resources/mocking.properties\n\nThe \"common\" project has a class that reads the properties file \"mocking.properties\" that is in the \"views\" project test folders - src/main/test/resources/\nThe common.jar is added as dependency to the views project.\n\nThe code is something like below.\n\nResource resource = new ClassPathResource(\"/mock_endpoints.properties\"); \nprops = PropertiesLoaderUtils.loadProperties(resource);\n</code></pre>\n\n<p>When i run the test case i am getting the \"props\" as null.</p>\n\n<p>Can anyone let me know what i am missing.</p>\n"},{"tags":["java","spring","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":38,"score":4,"question_id":13069532,"title":"I'm restoring a database and I need to lock any activity to it from my Java application while doing it","body":"<p>I'm using a c3p0 ComboPooledDataSource with Spring and Hibernate and the solution I came up with is a custom Datasource class that accepts the actual Datasource in it's constructor. I delegate all the responsibility to the actual datasource. I have a locked boolean which when set to true makes getConnection() wait until locked is false again.</p>\n\n<p>I was just wondering whether anyone can see flaws in my approach or have better alternatives? Thanks!</p>\n\n<pre><code>public interface LockableDataSource extends DataSource {\n    public boolean isLocked();\n\n    public void setLocked(boolean locked);\n}\n\n\npublic class LockableDataSourceImpl implements LockableDataSource{\n\n    private DataSource dataSource;\n    private boolean locked = false;\n\n\n    public LockableDataSourceImpl(DataSource dataSource) {\n        this.dataSource = dataSource;\n    }\n\n    public Connection getConnection() throws SQLException {\n        while(locked){\n            try {\n                Thread.sleep(500);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n        return dataSource.getConnection();\n    }\n\n    public Connection getConnection(String s, String s1) throws SQLException {\n        while(locked){\n            try {\n                Thread.sleep(500);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n        return dataSource.getConnection(s, s1);\n    }\n\n    public PrintWriter getLogWriter() throws SQLException {\n        return dataSource.getLogWriter();\n    }\n\n    public void setLogWriter(PrintWriter printWriter) throws SQLException {\n        dataSource.setLogWriter(printWriter);\n    }\n\n    public void setLoginTimeout(int i) throws SQLException {\n        dataSource.setLoginTimeout(i);\n    }\n\n    public int getLoginTimeout() throws SQLException {\n        return dataSource.getLoginTimeout();\n    }\n\n    public &lt;T&gt; T unwrap(Class&lt;T&gt; tClass) throws SQLException {\n        return dataSource.unwrap(tClass);\n    }\n\n    public boolean isWrapperFor(Class&lt;?&gt; aClass) throws SQLException {\n        return dataSource.isWrapperFor(aClass);\n    }\n\n    public boolean isLocked() {\n        return locked;\n    }\n\n    synchronized public void setLocked(boolean locked) {\n        this.locked = locked;\n    }\n}   \n</code></pre>\n"},{"tags":["java","spring","tomcat","classnotfoundexception"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13069398,"title":"ClassNotFoundException at Spring Bean Injection","body":"<p>I have a Spring <code>beans.xml</code> that specifies a certain class <code>my.package.Class</code> to be injected somewhere in my code by <strong>Autowiring</strong>. The program is actually a web application inside a Tomcat container. Now when I launch Tomcat the logfile tells me <code>my.package.Class</code> cannot be found, even though its JAR is both in the classpath and the web application's lib/ directory. Do I have to tell Tomcat or Spring where to find the JAR, too, and if so: how?</p>\n"},{"tags":["java","spring","jms","lazy-initialization"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2817,"score":3,"question_id":4412628,"title":"Spring 3.0 lazy-init not honoured for DefaultMessageListenerContainer?","body":"<p>I've setup a spring config for JMS. Things work fine, except I can't seem to get it to lazy load (notice the default-lazy-init true in the code below). If I comment out the jmsContainer(DMLC) from my config below, lazy loading works as expected. Otherwise, it will instantiate the DMLC, which in turn creates the queue and connection factory.</p>\n\n<p>What am I missing?</p>\n\n<p>jmsContext.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:p=\"http://www.springframework.org/schema/p\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"\n       default-lazy-init=\"true\"&gt;\n\n    &lt;bean id=\"jndiTemplate\" class=\"org.springframework.jndi.JndiTemplate\"&gt;\n        &lt;property name=\"environment\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"java.naming.factory.initial\"&gt;weblogic.jndi.WLInitialContextFactory&lt;/prop&gt;\n                &lt;prop key=\"java.naming.provider.url\"&gt;t3:localhost:7001&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"queue\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"\n          p:jndiTemplate-ref=\"jndiTemplate\" p:jndiName=\"jms/queue\"/&gt;\n\n    &lt;bean id=\"connectionFactory\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"\n          p:jndiTemplate-ref=\"jndiTemplate\" p:jndiName=\"jms/connectionfactory\"/&gt;\n\n    &lt;bean id=\"jmsDestinationResolver\" class=\"org.springframework.jms.support.destination.JndiDestinationResolver\"\n        p:jndiTemplate-ref=\"jndiTemplate\" p:cache=\"true\" /&gt;\n\n    &lt;bean id=\"jmsContainer\" class=\"org.springframework.jms.listener.DefaultMessageListenerContainer\"\n          p:autoStartup=\"false\"\n          p:destination-ref=\"queue\"\n          p:destinationResolver-ref=\"jmsDestinationResolver\"\n          p:connectionFactory-ref=\"connectionFactory\"\n          p:messageListener-ref=\"queueListener\" /&gt;\n\n    &lt;bean id=\"queueListener\" class=\"com.blah.QueueListener\"/&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>And the test I'm using to drive it, DummyTest.java:</p>\n\n<pre><code>package blah;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(\"classpath:jmsContext.xml\")\npublic class DummyTest {\n\n    @Test\n    public void shouldDoSomething() {\n\n    }\n\n}\n</code></pre>\n\n<p>When jmsContainer is commented out, the test above passes. Otherwise, I get this:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\nCaused by: org.springframework.beans.factory.BeanCreationException: \nError creating bean with name 'jmsContainer' defined in class path resource [com/blah/config/jmsContext.xml]: \nCannot resolve reference to bean 'connectionFactory' while setting bean property 'connectionFactory'; \nnested exception is org.springframework.beans.factory.BeanCreationException: \nError creating bean with name 'connectionFactory' defined in class path resource [com/blah/config/jmsContext.xml]: \nInvocation of init method failed; nested exception is javax.naming.NameNotFoundException: \nException in lookup.: `jms/connectionfactory' could not be found. \n[Root exception is weblogic.corba.cos.naming.NamingContextAnyPackage.NotFound: IDL:weblogic/corba/cos/naming/NamingContextAny/NotFound:1.0]\n</code></pre>\n\n<p>The \"connectionFactory\" bean gets instantiated as a dependency of \"jmsContainer\" and it fails. With \"jmsContainer\" commented out, \"connectionFactory\" does not get instantiated.</p>\n\n<p>The jms code works fine, but I have renamed my JNDI names on purpose so I can see when things get started.</p>\n"},{"tags":["java","spring","jsp","spring-mvc","jstl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13069606,"title":"object passed by controller not found in jsp page","body":"<p>i'm working on a simple spring mvc web application i have :\na simple controller :</p>\n\n<pre><code>public class LoginController extends MultiActionController {\n    private final static String VIEW_LOGIN = \"/login\";\n\n\n    public ModelAndView handleLogin(HttpServletRequest request,\n            HttpServletResponse response){\n        ModelAndView mv = new ModelAndView(VIEW_LOGIN);\n        String prova = \"PROVA123\";\n        mv.addObject(prova);\n        return mv;\n    }\n}\n</code></pre>\n\n<p>a simple jsp page:</p>\n\n<pre><code>&lt;%@ taglib uri='http://java.sun.com/jsp/jstl/core' prefix='c'%&gt;\n\n&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"&gt;\n&lt;html&gt;\n  &lt;head&gt;   \n\n    &lt;title&gt;Login - Gestione Studenti&lt;/title&gt;\n\n    &lt;!--\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"styles.css\"&gt;\n    --&gt;\n\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;p&gt;&lt;c:out value=\"${prova}\"/&gt;&lt;/p&gt;&lt;br&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>this is the dispatcher servlet xml file </p>\n\n<pre><code>&lt;bean id=\"loginController\" class=\"it.mediosoft.gestionestudenti.web.LoginController\"&gt;\n        &lt;property name=\"methodNameResolver\" ref=\"handlerResolver\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"urlMapping\"\n        class=\"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping\"&gt;\n        &lt;property name=\"mappings\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"/login.html\"&gt;loginController&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"handlerResolver\"\n        class=\"org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver\"&gt;\n        &lt;property name=\"mappings\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"/login.html\"&gt;handleLogin&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n     &lt;bean id=\"viewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n        &lt;property name=\"viewClass\"&gt;&lt;value&gt;org.springframework.web.servlet.view.JstlView&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"prefix\"&gt;&lt;value&gt;/WEB-INF/jsp/&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"suffix\"&gt;&lt;value&gt;.jsp&lt;/value&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>why in login.jsp can't i use the object that loginController return in ModelAndView ?\nthe \"c:out\" doesn't print anything....any advice ? </p>\n"},{"tags":["java","xml","spring","context"],"answer_count":3,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":11819,"score":11,"question_id":3035630,"title":"How to achieve conditional resource import in a Spring XML context?","body":"<p>What I would like to achieve is the ability to \"dynamically\" (i.e. based on a property defined in a configuration file) enable/disable the importing of a child Spring XML context.</p>\n\n<p>I imagine something like:</p>\n\n<pre><code>&lt;import condition=\"some.property.name\" resource=\"some-context.xml\"/&gt;\n</code></pre>\n\n<p>Where the property is resolved (to a boolean) and when true the context is imported, otherwise it isn't.</p>\n\n<p>Some of my research so far:</p>\n\n<ul>\n<li><p>Writing a custom NamespaceHandler (and related classes) so I can register my own custom element in my own namespace. For example: <code>&lt;myns:import condition=\"some.property.name\" resource=\"some-context.xml\"/&gt;</code></p>\n\n<p>The problem with this approach is that I do not want to replicate the entire resource importing logic from Spring and it isn't obvious to me what I need to delegate to to do this.</p></li>\n<li>Overriding <code>DefaultBeanDefinitionDocumentReader</code> to extend the behaviour of the \"import\" element parsing and interpretation (which happens there in the <code>importBeanDefinitionResource</code> method). However I'm not sure where I can register this extension.</li>\n</ul>\n"},{"tags":["java","spring","apache-camel"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":467,"score":0,"question_id":11035278,"title":"How to send file as mail attachment via camel spring DSL","body":"<p>I'm using Camel 2.9.x for integration purposes in our current project. One of the routes consists of two endpoints - file polling endpoint and smtp mail endpoint. Files produced by the first endpoint must be sent through smtp endpoint as attachments.</p>\n\n<p>For Camel configuration we're using Spring DSL (this actually is a requirement). Spring version is 3.1.1. Unfortunately, I've found only java dsl examples and documentation of attaching a file to a e-mail message in camel routes.</p>\n\n<pre><code>&lt;endpoint uri=\"file:///path/to\" id=\"file-source\"/&gt;\n&lt;endpoint uri=\"smtp://mail.example.com:25/?username=someuser@example.com&amp;amp;password=secret&amp;amp;to=recv@example.com\" id=\"mail-dest\"/&gt;\n&lt;route id=\"simplified-for-readability\"&gt;\n  &lt;from ref=\"file-source\"/&gt;\n  &lt;to ref=\"mail-dest\"/&gt;\n&lt;/route&gt;\n</code></pre>\n\n<p>This config sends files as plain/text body, not as attachments (even binary files).\nIs there a way to send files as attachments without using Java dsl?</p>\n"},{"tags":["spring","caching"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":39,"score":0,"question_id":13064154,"title":"Spring Cache: How to use Cache key based on the response object","body":"<p>I have these to methods:</p>\n\n<pre><code>@Cacheable(value=\"products\")\npublic Product findByName(String name)\n@CacheEvict(value = \"products\", key=\"#productId\")\npublic boolean updateProduct(int productID)\n</code></pre>\n\n<p>The product has a field id, which is the key.</p>\n\n<p>Now I have the problem, that themethod findByName still find old objects after using the update-method. I think, the problem, is that findByName strored the object under the key name and not the productId. In the method arguments, I dont have the productId. But I dont know, how I can tell Spring cache to use a property of the returned object.</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13065205,"title":"Questions on Spring MVC Component Scan","body":"<p>I am using component scan to scan all the Controller,Service and DAO classes. If I put my Services and DAO interfaces on the same package with the implementer, would this cause the component scan process slower (Would it be like two times slower) ? Does it scan the subpackages as well ?</p>\n"},{"tags":["spring","jsf","spring-mvc","jsf-2","spring-webflow"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":65,"score":-1,"question_id":13068448,"title":"Can anyone get a Project working with Spring MVC, Spring Web Flow and Faces working?","body":"<p>Can anyone get a Project working with Spring MVC, Spring Web Flow and Faces working?  I had a sample project that has Spring MVC samples and Spring Web Flow Samples in it.. I use it to test out stuff.  I wanted to add some faces (JSF) stuff to it but once I did it looks like the Spring MVC still works but not the Spring Web Flow anymore. please check out my files and let me know if you can help.</p>\n\n<p><strong>WEB.XML</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n    id=\"WebApp_ID\" version=\"2.5\"&gt;\n    &lt;display-name&gt;WebFlowWithDojo&lt;/display-name&gt;\n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\n        &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n        &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;\n        &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;\n        &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/spring/root-config.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;!-- -ADD THE FOLLOWING FOR SPRING-JS, DOJO AND DIJIT --&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Resource Servlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.js.resource.ResourceServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n\n    &lt;!-- Map all /resources requests to the Resource Servlet for handling --&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Resource Servlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/resources/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n\n    &lt;!-- Add for Spring Security Configuration --&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n\n    &lt;!-- Just here so the JSF implementation can initialize, *not* used at runtime --&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;!-- Just here so the JSF implementation can initialize --&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.faces&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p><strong>FACES-CONFIG.XML</strong></p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;faces-config xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd\"\n    version=\"2.0\"&gt;\n\n    &lt;application&gt;\n        &lt;el-resolver&gt;org.springframework.web.jsf.el.SpringBeanFacesELResolver&lt;/el-resolver&gt;\n    &lt;/application&gt;\n\n&lt;/faces-config&gt;\n</code></pre>\n\n<p><strong>FLOW.XML</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:webflow=\"http://www.springframework.org/schema/webflow-config\"\n    xmlns:faces=\"http://www.springframework.org/schema/faces\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/webflow-config\n        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd\n        http://www.springframework.org/schema/faces\n        http://www.springframework.org/schema/faces/spring-faces-2.2.xsd\"&gt;\n\n    &lt;!-- Executes flows: the central entry point into the Spring Web Flow system --&gt;\n    &lt;webflow:flow-executor id=\"flowExecutor\"&gt;\n        &lt;webflow:flow-execution-listeners&gt;\n            &lt;webflow:listener ref=\"facesContextListener\"/&gt;\n        &lt;/webflow:flow-execution-listeners&gt;\n    &lt;/webflow:flow-executor&gt;\n\n    &lt;!-- The registry of executable flow definitions --&gt;\n    &lt;webflow:flow-registry id=\"flowRegistry\" flow-builder-services=\"flowBuilderServices\" base-path=\"/WEB-INF\"&gt;\n        &lt;webflow:flow-location-pattern value=\"**/*-flow.xml\" /&gt;\n    &lt;/webflow:flow-registry&gt;\n\n    &lt;!-- Configures the Spring Web Flow JSF integration --&gt;\n    &lt;faces:flow-builder-services id=\"flowBuilderServices\" /&gt;\n\n    &lt;!-- A listener maintain one FacesContext instance per Web Flow request. --&gt;\n    &lt;bean id=\"facesContextListener\" \n        class=\"org.springframework.faces.webflow.FlowFacesContextLifecycleListener\" /&gt;  \n\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>POM.XML</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.uftwf.testweb&lt;/groupId&gt;\n    &lt;name&gt;WebFlowWithDojo&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0.0-BUILD-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;java-version&gt;1.5&lt;/java-version&gt;\n        &lt;springframework-version&gt;3.1.1.RELEASE&lt;/springframework-version&gt;\n        &lt;springwebflow-version&gt;2.3.1.RELEASE&lt;/springwebflow-version&gt;\n        &lt;springsecurity-version&gt;3.1.1.RELEASE&lt;/springsecurity-version&gt;\n        &lt;org.slf4j-version&gt;1.5.10&lt;/org.slf4j-version&gt;\n        &lt;hibernate.version&gt;4.1.1.Final&lt;/hibernate.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- Spring --&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;${springframework-version}&lt;/version&gt;\n            &lt;!-- will come with all needed Spring dependencies such as spring-core \n                and spring-beans --&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n            &lt;version&gt;${springframework-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;${springframework-version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.webflow&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-faces&lt;/artifactId&gt;\n            &lt;version&gt;${springwebflow-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n            &lt;version&gt;${springsecurity-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;version&gt;${springsecurity-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;version&gt;${springsecurity-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\n            &lt;version&gt;${springsecurity-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.transaction&lt;/groupId&gt;\n            &lt;artifactId&gt;jta&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;cglib&lt;/groupId&gt;\n            &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.21&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;c3p0&lt;/groupId&gt;\n            &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\n            &lt;version&gt;4.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n            &lt;version&gt;4.2.1&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\n            &lt;version&gt;1.6.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;jstl&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Logging --&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-ext&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n            &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.16&lt;/version&gt;\n\n        &lt;/dependency&gt;\n        &lt;!-- JSF-303 Dependency Injection --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n            &lt;version&gt;1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Servlet --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Sun Mojarra JSF 2 runtime --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.faces&lt;/groupId&gt;\n            &lt;artifactId&gt;jsf-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.faces&lt;/groupId&gt;\n            &lt;artifactId&gt;jsf-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.1.7&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- JSR 303 validation --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.GA&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- ********************************************************************** \n            ** HIBERNATE DEPENDENCIES ** ********************************************************************** --&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;4.0.2.GA&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Test --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.7&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;repositories&gt;\n        &lt;!-- For testing against latest Spring snapshots --&gt;\n        &lt;repository&gt;\n            &lt;id&gt;org.springframework.maven.snapshot&lt;/id&gt;\n            &lt;name&gt;Spring Maven Snapshot Repository&lt;/name&gt;\n            &lt;url&gt;http://maven.springframework.org/snapshot&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/releases&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;!-- For developing against latest Spring milestones --&gt;\n        &lt;repository&gt;\n            &lt;id&gt;org.springframework.maven.milestone&lt;/id&gt;\n            &lt;name&gt;Spring Maven Milestone Repository&lt;/name&gt;\n            &lt;url&gt;http://maven.springframework.org/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;!-- For Hibernate Validator --&gt;\n        &lt;repository&gt;\n            &lt;id&gt;org.jboss.repository.releases&lt;/id&gt;\n            &lt;name&gt;JBoss Maven Release Repository&lt;/name&gt;\n            &lt;url&gt;https://repository.jboss.org/nexus/content/repositories/releases&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;!-- For Sun Mojarra JSF 2 implementation --&gt;\n        &lt;repository&gt;\n            &lt;id&gt;maven2-repository.dev.java.net&lt;/id&gt;\n            &lt;name&gt;Java.net Repository for Maven&lt;/name&gt;\n            &lt;url&gt;http://download.java.net/maven/2/&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;!-- For PrimeFaces JSF component library --&gt;\n\n    &lt;/repositories&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;WebFlowTemplate&lt;/finalName&gt;\n    &lt;/build&gt;\n    &lt;artifactId&gt;WebFlowTestProject&lt;/artifactId&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p><strong>Ok so I think I posted everything that I could of... should I post it in SVN somewhere?? who can get this working??</strong></p>\n"},{"tags":["java","spring","ehcache","hibernate-4.x"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13066612,"title":"Custom configuration for ehcache with hibernate 4 and spring","body":"<p>I'm currently trying to integrate second level caching in our spring application. We use hibernate 4 as ORM.</p>\n\n<p>We use a custom configuration.xml file that is accessible through an injected <code>ConfigurationService</code>, I should access my level 2 cache settings through this service and instanciate my <code>CacheManager</code></p>\n\n<p>From the ehcache code it seems that it needs an xml file. It seems not possible to delegate manually to build our own <code>CacheManager</code>.</p>\n\n<p>I know there is a property to define the provider class or the factory class, but these do not support injection of my configuration service (<code>hibernate.cache.provider_class</code> or <code>hibernate.cache.region.factory_class</code>)</p>\n\n<p>Finally I went through spring documentation for <code>EhCacheFactoryBean</code> and <code>EhCacheManagerFactoryBean</code> but the purpose of those helpers do not seem to be the configuration of the hibernate level 2 cache.</p>\n\n<p>I'm able to instanciate a custom configured <code>CacheManager</code> but where should I inject it in hibernate's context?</p>\n\n<p>Thanks in advance,\nP-H</p>\n"},{"tags":["java","spring","ldap"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1508,"score":0,"question_id":9692975,"title":"A Basic Spring 3.1 LDAP Example","body":"<p>I've been looking for a very basic example of using LDAP authentication in Spring 3.1.   In the docs for the security download I found a page similar to this one</p>\n\n<p><a href=\"http://3.3%20LDAP%20Sample%20%20The%20LDAP%20sample%20application%20provides%20a%20basic%20configuration%20and%20sets%20up%20both%20a%20namespace%20configuration%20and%20an%20equivalent%20configuration%20using%20traditional%20beans,%20both%20in%20the%20same%20application%20context%20file.%20This%20means%20there%20are%20actually%20two%20identical%20authentication%20providers%20configured%20in%20this%20application.\" rel=\"nofollow\">http://static.springsource.org/spring-security/site/docs/3.0.x/reference/sample-apps.html</a></p>\n\n<blockquote>\n  <p>3.3 LDAP Sample</p>\n  \n  <p>The LDAP sample application provides a basic configuration and sets up\n  both a namespace configuration and an equivalent configuration using\n  traditional beans, both in the same application context file. This\n  means there are actually two identical authentication providers\n  configured in this application.</p>\n</blockquote>\n\n<p>Trouble is, it is not there in the distribution or I am having a brain fart.  Can anyone tell where I can find it or another modern Spring LDAP sample?</p>\n\n<p>Thanks in advance</p>\n\n<p>Steve</p>\n"},{"tags":["java","spring","quartz"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13066886,"title":"Dynamically Scheduled Jobs with Quartz","body":"<p>I implemented a Scheduled Job in Spring, I'm using Spring 3.1.1 with Hibernate and Struts2. The configuration works fine, but I want to change de cron dynamically, so I found several examples but I could not implement them, everywhere are different configurations, I only need to read cron values from the database instead of configuration file. Is this possible somehow?</p>\n\n<p>My configuration now looks like that:</p>\n\n\n\n<pre><code>&lt;!-- Scheduler Tasks --&gt;\n&lt;bean name=\"statTask\" class=\"com.bvc.spring.schedulers.MarketStatusJob\"&gt;&lt;/bean&gt;\n\n&lt;!-- Scheduler jobs --&gt;\n&lt;bean id=\"statJobDetail\" class=\"org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean\"&gt;\n    &lt;property name=\"targetObject\" ref=\"statTask\" /&gt;\n    &lt;property name=\"targetMethod\" value=\"execute\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- Cron Triggers --&gt;\n&lt;bean id=\"statCronTrigger\" class=\"org.springframework.scheduling.quartz.CronTriggerBean\"&gt;\n    &lt;property name=\"jobDetail\" ref=\"statJobDetail\" /&gt;\n    &lt;property name=\"cronExpression\" value=\"0 30 12 1/1 * ? *\"/&gt;\n&lt;/bean&gt;\n\n&lt;!-- Triggers --&gt;\n&lt;bean class=\"org.springframework.scheduling.quartz.SchedulerFactoryBean\"&gt;\n    &lt;property name=\"triggers\"&gt;\n        &lt;list&gt;\n            &lt;ref bean=\"statCronTrigger\"/&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Thanks in advance for help guys.</p>\n"},{"tags":["java","spring","exception","spring-data","spring-data-jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":13055659,"title":"Spring Data JPA @EnableJpaRepositories TypeNotPresentExceptionProxy","body":"<p>I having a spring 3.2.0.M2 setup with spring data jpa 1.2.0.RELEASE.</p>\n\n<p>I also have java config. This i my Repository config class.</p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories(basePackages = {\"xxx.xxx.xxx.core.dao\"})\n@EnableTransactionManagement\npublic class Repository {\n\n    @Bean\n    public DataSource dataSource() {\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(\"com.mysql.jdbc.Driver\");\n        dataSource.setUrl(\"jdbc:mysql://localhost:3306/xxxx\");\n        dataSource.setUsername(\"xxxx\");\n        dataSource.setPassword(\"xxxx\");\n\n        return dataSource;\n    }\n\n    @Bean\n    public EntityManagerFactory entityManagerFactory() {\n        HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n        vendorAdapter.setGenerateDdl(true);\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n        factory.setJpaVendorAdapter(vendorAdapter);\n        factory.setPackagesToScan(\"xx.xxxx.xxxx.xxxx.domain\");\n        factory.setDataSource(dataSource());\n        factory.afterPropertiesSet();\n        return factory.getObject();\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        JpaTransactionManager txManager = new JpaTransactionManager();\n        txManager.setEntityManagerFactory(entityManagerFactory());\n        return txManager;\n    }\n</code></pre>\n\n<p>When I deploy my application I get the following exception:</p>\n\n<pre><code>(org.springframework.web.context.ContextLoader:307) - Context initialization failed\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [/Developer/tomcat/webapps/core/WEB-INF/classes/xx/xxxx/xxxx/xxxx/xxxx/Repository.class]; nested exception is java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy\n    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:261)\n    at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:242)\n    at org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:84)\n    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1431)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1421)\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\n    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\n    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\n    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)\n    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:535)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)\n    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:968)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:542)\n    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1453)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)\n    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1445)\n    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:677)\n    at org.apache.catalina.manager.ManagerServlet.doPut(ManagerServlet.java:435)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:644)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:680)\nCaused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy\n    at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:653)\n    at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:460)\n    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:286)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:222)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52)\n    at java.lang.Class.initAnnotationsIfNecessary(Class.java:3070)\n    at java.lang.Class.getAnnotations(Class.java:3050)\n    at org.springframework.core.type.classreading.AnnotationAttributesReadingVisitor.registerMetaAnnotations(AnnotationAttributesReadingVisitor.java:247)\n    at org.springframework.core.type.classreading.AnnotationAttributesReadingVisitor.doVisitEnd(AnnotationAttributesReadingVisitor.java:241)\n    at org.springframework.core.type.classreading.RecursiveAnnotationAttributesVisitor.visitEnd(AnnotationAttributesReadingVisitor.java:166)\n    at org.springframework.asm.ClassReader.a(Unknown Source)\n    at org.springframework.asm.ClassReader.accept(Unknown Source)\n    at org.springframework.asm.ClassReader.accept(Unknown Source)\n    at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:59)\n    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:80)\n    at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:101)\n    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:237)\n    ... 63 more\n</code></pre>\n\n<p>When I remove the @EnableJpaRepositores annotation than it works. At least I think so because than my application context will load but it will say that I have a dependency injection used. Of course caus by removing the annotation.</p>\n\n<p>Can someone help me out?</p>\n"},{"tags":["spring","spring-data","spring-data-jpa","specification"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13048830,"title":"jpa specification query method","body":"<p>We are using the Spring Data JPA for database access. Our repositories contain basic query methods. What we want to do now is to use the Specification-Interface (criteria API) <em>combined</em> with complex query methods (like <code>findByName(Specification spec)</code>). The problem is that these two ways block each other out (since there are two <code>where</code> queries now). Is there any way to do this, like telling JPA to combine the two <code>where</code> parts with <code>AND</code>? The reason we want to do this is because some parts of the <code>where</code> query are essential for every query. They should be defined in the name of the query method. The Specification only should contain individual criterias for individual use-cases.\nOr is there any other way to solve this?</p>\n"},{"tags":["spring","jstl","tagx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12730926,"title":"How to add a \"static\" drop down list box in a create/update form","body":"<p>I have a Spring Roo project.\nI would like to add a dropdown listbox with static values in a create/update form.</p>\n\n<p>Here is the create.jspx file. See the <code>srvEnco</code> field.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;div xmlns:c=\"http://java.sun.com/jsp/jstl/core\" xmlns:field=\"urn:jsptagdir:/WEB-  INF/tags/form/fields\" xmlns:form=\"urn:jsptagdir:/WEB-INF/tags/form\" xmlns:jsp=\"http://java.sun.com/JSP/Page\" xmlns:spring=\"http://www.springframework.org/tags\" version=\"2.0\"&gt;\n&lt;jsp:directive.page contentType=\"text/html;charset=UTF-8\"/&gt;\n&lt;jsp:output omit-xml-declaration=\"yes\"/&gt;\n&lt;form:create id=\"fc_fr_mediapost_domain_Srv\" modelAttribute=\"srv\" path=\"/srvs\" render=\"${empty dependencies}\"&gt;\n    &lt;field:input field=\"srvNom\" id=\"c_fr_mediapost_domain_Srv_srvNom\" max=\"30\" required=\"true\"/&gt;\n    &lt;field:textarea field=\"srvDesc\" id=\"c_fr_mediapost_domain_Srv_srvDesc\"/&gt;\n    &lt;field:select field=\"modId\" id=\"c_fr_mediapost_domain_Srv_modId\" itemValue=\"modId\" items=\"${modsrvs}\" path=\"/modsrvs\" required=\"true\"/&gt;\n    &lt;field:select field=\"mntId\" id=\"c_fr_mediapost_domain_Srv_mntId\" itemValue=\"mntId\" items=\"${mntsrvs}\" path=\"/mntsrvs\"/&gt;\n    &lt;field:select field=\"opsId\" id=\"c_fr_mediapost_domain_Srv_opsId\" itemValue=\"opsId\" items=\"${opses}\" path=\"/opses\" required=\"true\"/&gt;\n    &lt;field:select field=\"prcId\" id=\"c_fr_mediapost_domain_Srv_prcId\" itemValue=\"prcId\" items=\"${prcs}\" path=\"/prcs\"/&gt;\n    &lt;field:input field=\"srvSeri\" id=\"c_fr_mediapost_domain_Srv_srvSeri\" max=\"15\"/&gt;\n    &lt;field:input field=\"srvLoca\" id=\"c_fr_mediapost_domain_Srv_srvLoca\" max=\"30\"/&gt;\n    &lt;field:input field=\"srvImmo\" id=\"c_fr_mediapost_domain_Srv_srvImmo\" max=\"5\"/&gt;\n    &lt;field:input field=\"srvIp\" id=\"c_fr_mediapost_domain_Srv_srvIp\" max=\"15\"/&gt;\n    &lt;field:select field=\"srvEnco\" id=\"c_fr_mediapost_domain_Srv_srvEnco\" itemValue=\"Key\" itemLabel=\"Value\" items=\"${srvEnco}\" path=\"\" required=\"true\"/&gt;\n    &lt;field:datetime field=\"srvDateDebuVali\" id=\"c_fr_mediapost_domain_Srv_srvDateDebuVali\" dateTimePattern=\"${srv_srvdatedebuvali_date_format}\"/&gt;\n    &lt;field:datetime field=\"srvDateFinVali\" id=\"c_fr_mediapost_domain_Srv_srvDateFinVali\" dateTimePattern=\"${srv_srvdatefinvali_date_format}\"/&gt;\n&lt;/form:create&gt;\n&lt;form:dependency dependencies=\"${dependencies}\" id=\"d_fr_mediapost_domain_Srv\" render=\"${not empty dependencies}\"/&gt;\n</code></pre>\n\n<p></p>\n\n<p>I have added this source code in my Class controller (SrvController;java).</p>\n\n<pre><code>@ModelAttribute (\"srvEnco\")\npublic Collection&lt;KeyValue&gt; populateSrvEnco() {\n    int max=42;\n    Collection&lt;KeyValue&gt; result = new ArrayList&lt;KeyValue&gt;(max);\n\nfor (int i = 1; i &lt;= max; i++) {\n    String keyValue = new Integer(i).toString();\n        result.add(new DefaultKeyValue(keyValue, keyValue));            \n    }\n    return result;\n}\n</code></pre>\n\n<p>The problem is that when I'm running my app, the <code>srvEnco</code> field stays like a <code>&lt;field:input&gt;</code> tag, and not like a <code>&lt;field:select&gt;</code>.</p>\n"},{"tags":["eclipse","spring","tomcat","maven"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12931750,"title":"Maven dependencies not deployed on Eclipse Tomcat instance","body":"<p>I'm using Spring Tool Suite 3.1 and I have some issues deploying a web application to tomcat.</p>\n\n<p>When I hit \"run on server\" and the server starts it throws the famous:</p>\n\n<blockquote>\n  <p><code>java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener</code></p>\n</blockquote>\n\n<p>So I check the <code>/wtpwebapps</code> directory to find that the project is deployed, but inside the <code>lib</code> folder only a few libraries are present. I completely miss the rationale behind their selection. Of course the libraries related to spring aren't there. Can anyone help?</p>\n\n<p>This is my <code>org.eclipse.wst.common.commonent</code> file, maybe it can be useful:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project-modules id=\"moduleCoreId\" project-version=\"1.5.0\"&gt;\n&lt;wb-module deploy-name=\"Checkup\"&gt;\n    &lt;wb-resource deploy-path=\"/\" source-path=\"/target/m2e-wtp/web-resources\"/&gt;\n    &lt;wb-resource deploy-path=\"/\" source-path=\"/WebContent\" tag=\"defaultRootSource\"/&gt;\n    &lt;wb-resource deploy-path=\"/WEB-INF/classes\" source-path=\"/src/main/java\"/&gt;\n    &lt;wb-resource deploy-path=\"/WEB-INF/classes\" source-path=\"/src/main/resources\"/&gt;\n    &lt;wb-resource deploy-path=\"/WEB-INF/classes\" source-path=\"/src/test/java\"/&gt;\n    &lt;wb-resource deploy-path=\"/WEB-INF/classes\" source-path=\"/src/test/resources\"/&gt;\n    &lt;property name=\"context-root\" value=\"Checkup\"/&gt;\n    &lt;property name=\"java-output-path\" value=\"/Checkup/build/classes\"/&gt;\n&lt;/wb-module&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>you can see the list of maven plugin embedded with STS installation (no customizations)</p>\n\n<p><img src=\"http://i.stack.imgur.com/5t3EB.jpg\" alt=\"STS maven plugins\"></p>\n"},{"tags":["spring","spring-mvc","spring-security"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":2013,"score":2,"question_id":5450894,"title":"j_spring_security_check not available. Please help with Spring3 login","body":"<p>I am trying to write something in Spring3 with Security.  I was trying to use the default login screen which everyone says Spring will display for you.  but after two days of trying and getting the error:</p>\n\n<blockquote>\n  <p>/spring-security-login not found</p>\n</blockquote>\n\n<p>I give up and changed my code to:</p>\n\n<pre><code>&lt;http  auto-config=\"true\"&gt; \n&lt;intercept-url pattern=\"/friends/**\" access=\"ROLE_USER,ROLE_ADMIN\"  /&gt;\n&lt;form-login login-page=\"/login.jsp\" \n        default-target-url=\"/friends/add.html\"\n        authentication-failure-url=\"/login.jsp?authfailed=true\" /&gt;\n&lt;/http&gt;\n</code></pre>\n\n<p>and I added the <code>login.jsp</code> to my project which I think I made right.  Now I am getting this error:</p>\n\n<blockquote>\n  <p>HTTP Status 404 - /MySpring/j_spring_security_check\n  message /MySpring/j_spring_security_check\n  description The requested resource (/MySpring/j_spring_security_check) is not available.</p>\n</blockquote>\n"},{"tags":["spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":37,"score":0,"question_id":13050094,"title":"What is the work around for Hibernate 4 persistence support for org.joda.time.contrib.hibernate.PersistentDateTime","body":"<p>Hi All I am new to Spring and am building application using the following dependencies      </p>\n\n<pre><code> &lt;dependency&gt;\n            &lt;groupId&gt;joda-time&lt;/groupId&gt;\n            &lt;artifactId&gt;joda-time&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;joda-time&lt;/groupId&gt;\n            &lt;artifactId&gt;joda-time-hibernate&lt;/artifactId&gt;\n            &lt;version&gt;1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;4.1.7.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n                &lt;spring.framework.version&gt;3.1.2.RELEASE&lt;/spring.framework.version&gt;\n</code></pre>\n\n<p>I am not able to persist the objects with fields with datatype DateTime from the class  org.joda.time.contrib.hibernate.PersistentDateTime.</p>\n\n<pre><code>@Column(name = \"LAST_MODIFIED_DATE\")\n    @Type(type = \"org.joda.time.contrib.hibernate.PersistentDateTime\")\n    public DateTime getLastModifiedDate() {\n        return lastModifiedDate;\n    }\n</code></pre>\n\n<p>Can anybody suggest how to use the joda DateTime.</p>\n"},{"tags":["java","spring","tomcat","comet"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":49,"score":-2,"question_id":13062048,"title":"Push Notification to Client","body":"<p>My project i build using Struts, Spring, Hibernate. And using tomcat for server. Now i want to implement push notification in my application (web). Like updating table on view layer according to new data on database, show notification when certain condition is happen. I want to ask, how can i implement this. I meant, what better i should use. Maybe comet or etc? And if you have link tutorial, i also need it.</p>\n\n<p>And I want to ask, whether this (push) related to messaging? Thank you.,</p>\n\n<p>i've try this link <a href=\"http://www.ibm.com/developerworks/web/library/wa-cometjava/\" rel=\"nofollow\">http://www.ibm.com/developerworks/web/library/wa-cometjava/</a>\nBut, it look like pull. My case is like chatting application, if someone login, the other member will get a notification. Still confuse how to implement this, still newbie one</p>\n"},{"tags":["java","spring","mongodb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13035978,"title":"Spring + MongoDB + DBRef","body":"<p>On a Spring project I'm using Spring Data MongoDB, and have 2 classes:</p>\n\n<pre><code>public class ClassA\n{\n@Id\nprivate String id;\n\nprivate String description\n\n@DBRef\nprivate ClassB classBId;\n\n// Getters and Setters\n}\n\npublic class ClassB\n{\n@Id\nprivate String id;\n\nprivate String description\n\n// Getters and Setters\n}\n</code></pre>\n\n<p>Being so I have 2 collections, classA and classB and populated them with several instances.</p>\n\n<p>The classA instances are being stored like:</p>\n\n<blockquote>\n  <p>{ \"_id\" : { \"$oid\" : \"5086b371004d7c4bfff0a142\"} , \"_class\" :\n  \"com.spring.custom.ClassA\", \"description\" : \"Description A\"  ,\n  \"classBId\" : { \"$ref\" : \"classB\" , \"$id\" : { \"$oid\" :\n  \"50866d45004d84852b16a8b8\"}}}</p>\n</blockquote>\n\n<p>My question is, how do I make a query that will return all classA objects that reference to classB instance with id \n50866d45004d84852b16a8b8?</p>\n\n<p>I've tried like this but with no sucess:</p>\n\n<pre><code>ClassB cb = new ClassB(); cb.setId(\"50866d45004d84852b16a8b8\");\n\nCriteria criteria = Criteria.where(\"classBId\").is(classBObject);\nQuery query = new Query(); query.addCriteria(criteria);\n</code></pre>\n"},{"tags":["spring","jsp","spring-mvc","internationalization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13064560,"title":"Internationalization with Spring and JSP","body":"<p>I am facing trouble in JSP spring internationalization. My dispatcherServlet.xml contains:</p>\n\n<pre><code>   &lt;bean id=\"localeResolver\"\n        class=\"org.springframework.web.servlet.i18n.SessionLocaleResolver\"&gt;\n        &lt;property name=\"defaultLocale\" value=\"en\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"localeChangeInterceptor\"\n        class=\"org.springframework.web.servlet.i18n.LocaleChangeInterceptor\"&gt;\n        &lt;property name=\"paramName\" value=\"language\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean class=\"org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping\" &gt;\n        &lt;property name=\"interceptors\"&gt;\n            &lt;list&gt;\n                &lt;ref bean=\"localeChangeInterceptor\" /&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;!-- Application Message Bundle --&gt;\n    &lt;bean id=\"messageSource\" class=\"org.springframework.context.support.ReloadableResourceBundleMessageSource\"&gt;\n        &lt;property name=\"basename\" value=\"/WEB-INF/messages/messages\" /&gt;\n        &lt;property name=\"cacheSeconds\" value=\"0\" /&gt;\n        &lt;property name=\"defaultEncoding\" value=\"UTF-8\"/&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>and my jsp contains</p>\n\n<pre><code>    &lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Admin&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;a href=&lt;c:url value=\"/j_spring_security_logout\"/&gt;&gt;Logout&lt;/a&gt;&lt;br/&gt;\n\n\n\n    Language : &lt;a href=\"?language=en\"&gt;English&lt;/a&gt;|\n    &lt;a href=\"?language=zh_CN\"&gt;Chinese&lt;/a&gt;\n &lt;h1&gt;\n        &lt;spring:message code=\"only.Admin.allowed.here\" text=\"default text\" /&gt;\n        &lt;/h1&gt;    \n\n\n    Current Locale : ${pageContext.response.locale}\n\n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>The default EN language works fine, but I am not able to change the language into Chinese while clicking on Chinese option. The address bar URL changes to <code>/admin?language=en</code> to <code>/admin? language=zh_CN</code> but displays no result.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring","annotations","struts"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12795100,"title":"Could @RequestMapping and struts's mapping be used in the same time?","body":"<p>Could I use action mappings in <code>struts.xml</code> and Spring's <code>RequestMapping</code> annotation in the same time?\n(my environment is Struts 2.3.1 and Spring 3.1.1)</p>\n\n<p>in my <code>struts.xml</code> something like this:</p>\n\n<pre><code>&lt;package name=\"proj\" namespace=\"/proj\" extends=\"proj-default\"&gt;\n    &lt;action name=\"home\" class=\"proj\"&gt;\n        &lt;result name=\"success\" type=\"tiles\"&gt;proj.home&lt;/result&gt;\n    &lt;/action&gt;\n&lt;/package&gt;\n</code></pre>\n\n<p>and one of my class is annotated like this:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/dialog\")\npublic class MyDialogController {\n    ...\n    @RequestMapping(value=\"/info\", method=RequestMethod.GET)\n    public String info(NativeWebRequest request) {\n        ...\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","email"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13062030,"title":"Spring Email Sent Status","body":"<p>Is there a way to check if the email was received or not using spring framework's email functions?</p>\n"},{"tags":["java","spring","hibernate","jsf","annotations"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":59,"score":-2,"question_id":13060059,"title":"Efficiently managing the memory in Java Web Application","body":"<p>I am working with medium sized Java web application. I need to create 25 Spring Managed services and DAO;s and and around 20 JSF Managed beans.Along with this I have around 20 model classes. In this 20 are session scoped beans.How can I effectively do memory management with all the beans. How can I efficiently work with session scoped beans? How much heap memory is required for this kind of application. I am mostly using annoatations.Does this increase my performance.Please suggest.</p>\n"},{"tags":["java","spring","rest","collections","jaxb"],"answer_count":3,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":1217,"score":8,"question_id":4305415,"title":"Generic return object for a collection of objects in RESTful Spring3 app","body":"<p>I am looking for a generic way of returning a set of objects in my REST service. I use the Spring3 message-converters and the @ResponseBody annotation.</p>\n\n<p>Some sites say that JAXB2 has \"problems\" returning a standard java.util.List, and all examples found define a dedicated class (e.g. Authors, Products, Customers) for each data domain, such as:</p>\n\n<p><a href=\"http://www.ibm.com/developerworks/web/library/wa-spring3webserv/index.html\" rel=\"nofollow\">http://www.ibm.com/developerworks/web/library/wa-spring3webserv/index.html</a>\n(see \"Collection of resources\", second paragraph)</p>\n\n<p>Has anyone found a way to provide a generic class/approach for this that spares me creating all those collection classes?</p>\n\n<p><strong>Update 5th April 2011:</strong> I haven't really made any progress on this. Returning a generic list object always results in a JAXBException \"class XXX nor any of its super class is known to this context\"</p>\n"},{"tags":["spring","jboss7.x","ejb-3.1"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":82,"score":3,"question_id":12963405,"title":"Injecting EJB 3 into Spring Bean","body":"<p>I am trying to inject EJB into Spring (3.1.2) service (both in <strong>different</strong> WARs)\nBoth are very simple (methods removed to simplify example):</p>\n\n<p>EJB:</p>\n\n<pre><code>@Remote\npublic interface MyBean {\n}\n\n@Singleton\npublic class MyBeanImpl implements MyBean{\n}\n</code></pre>\n\n<p>Service:</p>\n\n<pre><code>@Service\npublic class MyServiceImpl implements MyService{\n}\n</code></pre>\n\n<p>At first sight thing is very simple, but I tried:</p>\n\n<pre><code>@EJB(lookup = \"java:global/ejbApp/MyBeanImpl!com.my.MyBean\")\nprivate MyBean myBean;\n</code></pre>\n\n<p>and it didin't work. Then I also tried:</p>\n\n<pre><code>@EJB(mappedName = \"java:global/ejbApp/MyBeanImpl!com.my.MyBean\")\nprivate MyBean myBean;\n</code></pre>\n\n<p>And</p>\n\n<pre><code>@Resource(mappedName = \"java:global/ejbApp/MyBeanImpl!com.my.MyBean\")\nprivate MyBean myBean;\n</code></pre>\n\n<p>but neither worked.</p>\n\n<p>I managed to inject my EJB  using:</p>\n\n<pre><code>&lt;jee:jndi-lookup id=\"myBean\" jndi-name=\"java:global/ejbApp/MyBeanImpl!com.my.MyBean\" /&gt;\n</code></pre>\n\n<p>in my spring configuration and in the service:</p>\n\n<pre><code>@Autowired\nprivate MyBean myBean;\n</code></pre>\n\n<p>But I really dont like this solution. I would like to have my JNDI path in <strong>some</strong> annotation to be able to do e.g:</p>\n\n<pre><code>@EJB(lookup = MyBean.JNDI_NAME)\nprivate MyBean myBean;\n</code></pre>\n"},{"tags":["spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":41,"score":3,"question_id":13061746,"title":"How to access hibernate session in Thread?","body":"<p>As Hibernate sessions are not thread-safe, I am not able to get currnet hibernate session through sessionFactory.getCurrentSession(); </p>\n\n<p>If I choose sessionFactory.openSession(); it works fine for thread itself but for nested classes[called from the thread] it wont allow me to access same newly opened session[Throws \"No Session found for current thread\" exception].</p>\n\n<p>I am using Spring 3.1.1 and Hibernate 4.1.3</p>\n\n<p>Is there any way to get the current session in thread?</p>\n\n<p>Or is there any way to access newly opened session to nested classes which are called from the thread? </p>\n"},{"tags":["spring","spring-security","taglib"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13025014,"title":"Spring Security on Rest services","body":"<p>I have implmented a server backend for a mobile client using Spring MVC,Restful webservices. I want to secure the app with spring security. I have put a custom login.jsp to handle the login  as follows.</p>\n\n<pre><code>&lt;body onload='document.f.j_username.focus();'&gt;\n&lt;h3&gt;Login with Username and Password (Custom Page)&lt;/h3&gt;\n\n&lt;c:if test=\"${not empty error}\"&gt;\n    &lt;div class=\"errorblock\"&gt;\n        Your login attempt was not successful, try again.&lt;br /&gt; Caused :\n        ${sessionScope[\"SPRING_SECURITY_LAST_EXCEPTION\"].message}\n    &lt;/div&gt;\n&lt;/c:if&gt;\n\n&lt;form name='f' action=\"&lt;c:url value='j_spring_security_check' /&gt;\"\n    method='POST'&gt;\n\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td&gt;User:&lt;/td&gt;\n            &lt;td&gt;&lt;input type='text' name='j_username' value=''&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Password:&lt;/td&gt;\n            &lt;td&gt;&lt;input type='password' name='j_password' /&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td colspan='2'&gt;&lt;input name=\"submit\" type=\"submit\"\n                value=\"submit\" /&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td colspan='2'&gt;&lt;input name=\"reset\" type=\"reset\" /&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p></p>\n\n<p>my web.xml is as follows.</p>\n\n<pre><code>&lt;display-name&gt;Spring MVC Application&lt;/display-name&gt;\n\n&lt;!-- Spring MVC --&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;\n        /WEB-INF/mvc-dispatcher-servlet.xml,\n        /WEB-INF/spring-security-context.xml\n    &lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;!-- Spring Security --&gt;\n&lt;filter&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p></p>\n\n<p>spring-security-context.xml is as follws.</p>\n\n<pre><code>&lt;beans:beans xmlns=\"http://www.springframework.org/schema/security\"\nxmlns:beans=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans \n                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n                http://www.springframework.org/schema/security \n                http://www.springframework.org/schema/security/spring-security-3.0.xsd\"&gt;\n\n\n&lt;http auto-config=\"true\"&gt;\n    &lt;intercept-url pattern=\"/getHierarchy\" access=\"ROLE_USER\" /&gt;\n    &lt;form-login login-page=\"/login\" default-target-url=\"/getHierarchy\"\n        authentication-failure-url=\"/loginfailed\" /&gt;\n    &lt;logout logout-success-url=\"/logout\" /&gt;\n&lt;/http&gt;\n\n&lt;authentication-manager&gt;\n    &lt;authentication-provider&gt;\n        &lt;user-service&gt;\n            &lt;user name=\"admin\" password=\"admin\" authorities=\"ROLE_USER\" /&gt;\n        &lt;/user-service&gt;\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p>  </p>\n\n<p>But I get a warning on eclipse </p>\n\n<blockquote>\n  <p>The tag handler class for \"c:if\" (org.apache.taglibs.standard.tag.rt.core.IfTag) was not found on the Java Build Path</p>\n</blockquote>\n\n<p>And get a not found error on j_spring_security_check when I submit the form. I have included jstl1.2 in the classpath. Why do I get a tag handler not found warning even if I have included the taglib?</p>\n"},{"tags":["spring","file","file-upload","spring-roo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13018735,"title":"Spring Roo File Upload","body":"<p>Hy everyone!</p>\n\n<p>Im trying to implement file upload with Spring roo. The files path will be persisted in the database, and the file will be saved on the file system.\nAccording to informations found on the spring dveloper board, i modified the input.tagx and create.tagx files.(info: <a href=\"https://jira.springsource.org/browse/ROO-442\" rel=\"nofollow\">https://jira.springsource.org/browse/ROO-442</a>)\ninput.tagx:</p>\n\n<pre><code>&lt;jsp:root xmlns:c=\"http://java.sun.com/jsp/jstl/core\"             xmlns:fn=\"http://java.sun.com/jsp/jstl/functions\"      xmlns:spring=\"http://www.springframework.org/tags\" xmlns:form=\"http://www.springframework.org/tags/form\" xmlns:jsp=\"http://java.sun.com/JSP/Page\" version=\"2.0\"&gt;\n&lt;jsp:output omit-xml-declaration=\"yes\" /&gt;\n\n&lt;jsp:directive.attribute name=\"id\" type=\"java.lang.String\" required=\"true\" rtexprvalue=\"true\" description=\"The identifier for this tag (do not change!)\" /&gt;\n&lt;jsp:directive.attribute name=\"field\" type=\"java.lang.String\" required=\"true\" rtexprvalue=\"true\" description=\"The field exposed from the form backing object\" /&gt;\n&lt;jsp:directive.attribute name=\"label\" type=\"java.lang.String\" required=\"false\" rtexprvalue=\"true\" description=\"The label used for this field, will default to a message bundle if not supplied\" /&gt;\n&lt;jsp:directive.attribute name=\"labelCode\" type=\"java.lang.String\" required=\"false\" rtexprvalue=\"true\" description=\"Key for label message bundle if label is not supplied\" /&gt;\n&lt;jsp:directive.attribute name=\"required\" type=\"java.lang.Boolean\" required=\"false\" rtexprvalue=\"true\" description=\"Indicates if this field is required (default false)\" /&gt;\n&lt;jsp:directive.attribute name=\"disabled\" type=\"java.lang.Boolean\" required=\"false\" rtexprvalue=\"true\" description=\"Specify if this field should be enabled\" /&gt;\n&lt;jsp:directive.attribute name=\"validationRegex\" type=\"java.lang.String\" required=\"false\" rtexprvalue=\"true\" description=\"Specify regular expression to be used for the validation of the input contents\" /&gt;\n&lt;jsp:directive.attribute name=\"validationMessageCode\" type=\"java.lang.String\" required=\"false\" rtexprvalue=\"true\" description=\"Specify the message (message property code) to be displayed if the regular expression validation fails\" /&gt;\n&lt;jsp:directive.attribute name=\"validationMessage\" type=\"java.lang.String\" required=\"false\" rtexprvalue=\"true\" description=\"Specify the message to be displayed if the regular expression validation fails\" /&gt;\n</code></pre>\n\n<p>\n    \n    \n    \n    \n        \n        \n        </p>\n\n<pre><code>&lt;c:if test=\"${empty render or render}\"\n   &lt;c:when test=\"${disableFormBinding}\"&gt;\n   &lt;input id=\"_${field}_id\" name=\"${field}\" type=\"${type}\"/&gt;\n    &lt;/c:when&gt;\n    &lt;c:otherwise&gt;\n&lt;!-- currently (spring 3.0.3), form:input doesn't support type attribute --&gt;\n&lt;!-- &lt;form:input id=\"_${field}_id\" path=\"${field}\" disabled=\"${disabled}\"/&gt; --&gt;\n&lt;input id=\"_${field}_id\" name=\"${field}\" type=\"${type}\"/&gt;\n&lt;br/&gt;\n&lt;form:errors cssClass=\"errors\" id=\"_${field}_error_id\" path=\"${field}\"/&gt;\n&lt;/c:otherwise&gt;    \n    &lt;c:if test=\"${empty disabled}\"&gt;\n      &lt;c:set value=\"false\" var=\"disabled\" /&gt;\n    &lt;/c:if&gt;\n\n&lt;c:if test=\"${empty label}\"&gt;\n  &lt;c:if test=\"${empty labelCode}\"&gt;\n    &lt;c:set var=\"labelCode\" value=\"${fn:substringAfter(id,'_')}\" /&gt;\n  &lt;/c:if&gt;\n\n\n    &lt;spring:message code=\"label_${fn:toLowerCase(labelCode)}\" var=\"label\" htmlEscape=\"false\" /&gt;\n    &lt;/c:if&gt;\n\n    &lt;c:if test=\"${empty validationMessage}\"&gt;\n      &lt;c:choose&gt;\n        &lt;c:when test=\"${empty validationMessageCode}\"&gt;\n          &lt;spring:message arguments=\"${fn:escapeXml(label)}\" code=\"field_invalid\" var=\"field_invalid\" htmlEscape=\"false\" /&gt;\n        &lt;/c:when&gt;\n        &lt;c:otherwise&gt;\n          &lt;spring:message arguments=\"${fn:escapeXml(label)}\" code=\"${validationMessageCode}\" var=\"field_invalid\" htmlEscape=\"false\" /&gt;\n        &lt;/c:otherwise&gt;\n      &lt;/c:choose&gt;\n    &lt;/c:if&gt;\n\n    &lt;c:if test=\"${empty required}\"&gt;\n      &lt;c:set value=\"false\" var=\"required\" /&gt;\n    &lt;/c:if&gt;\n\n    &lt;c:set var=\"sec_field\"&gt;\n      &lt;spring:escapeBody javaScriptEscape=\"true\" &gt;${field}&lt;/spring:escapeBody&gt;\n    &lt;/c:set&gt;\n\n    &lt;div id=\"_${fn:escapeXml(id)}_id\"&gt;\n      &lt;label for=\"_${sec_field}_id\"&gt;\n        &lt;c:out value=\"${fn:escapeXml(label)}\" /&gt;\n        :\n      &lt;/label&gt;\n      &lt;c:choose&gt;\n        &lt;c:when test=\"${disableFormBinding}\"&gt;\n          &lt;input id=\"_${sec_field}_id\" name=\"${sec_field}\" type=\"${fn:escapeXml(type)}\" /&gt;\n        &lt;/c:when&gt;\n        &lt;c:otherwise&gt;\n          &lt;c:choose&gt;\n            &lt;c:when test=\"${type eq 'password'}\"&gt;\n              &lt;form:password id=\"_${sec_field}_id\" path=\"${sec_field}\" disabled=\"${disabled}\" /&gt;\n            &lt;/c:when&gt;\n            &lt;c:otherwise&gt;\n              &lt;form:input id=\"_${sec_field}_id\" path=\"${sec_field}\" disabled=\"${disabled}\" /&gt;\n            &lt;/c:otherwise&gt;\n          &lt;/c:choose&gt;\n          &lt;br /&gt;\n          &lt;form:errors cssClass=\"errors\" id=\"_${sec_field}_error_id\" path=\"${sec_field}\" /&gt;\n        &lt;/c:otherwise&gt;\n      &lt;/c:choose&gt;\n      &lt;c:choose&gt;\n        &lt;c:when test=\"${required}\"&gt;\n          &lt;spring:message code=\"field_required\" var=\"field_required\" htmlEscape=\"false\" /&gt;\n          &lt;spring:message argumentSeparator=\",\" arguments=\"${label},(${field_required})\" code=\"field_simple_validation\" var=\"field_validation\" htmlEscape=\"false\" /&gt;\n        &lt;/c:when&gt;\n        &lt;c:otherwise&gt;\n          &lt;spring:message argumentSeparator=\",\" arguments=\"${label}, \" code=\"field_simple_validation\" var=\"field_validation\" htmlEscape=\"false\" /&gt;\n        &lt;/c:otherwise&gt;\n      &lt;/c:choose&gt;\n      &lt;c:set var=\"sec_field_validation\"&gt;\n        &lt;spring:escapeBody javaScriptEscape=\"true\"&gt;${field_validation}&lt;/spring:escapeBody&gt;\n      &lt;/c:set&gt;\n      &lt;c:set var=\"sec_field_invalid\"&gt;\n        &lt;spring:escapeBody javaScriptEscape=\"true\" htmlEscape=\"true\"&gt;${field_invalid}&lt;/spring:escapeBody&gt;\n      &lt;/c:set&gt;\n      &lt;c:set var=\"sec_field_required\"&gt;\n        &lt;spring:escapeBody javaScriptEscape=\"true\"&gt;${field_required}&lt;/spring:escapeBody&gt;\n      &lt;/c:set&gt;\n      &lt;c:set var=\"sec_validation_regex\" value=\"\" /&gt;\n      &lt;c:if test=\"${!empty validationRegex}\"&gt;\n        &lt;c:set var=\"sec_validation_regex\" value=\"regExp : '${validationRegex}', \" /&gt;\n      &lt;/c:if&gt;\n      &lt;script type=\"text/javascript\"&gt;\n        Spring.addDecoration(new Spring.ElementDecoration({elementId : '_${sec_field}_id', widgetType : 'dijit.form.ValidationTextBox', widgetAttrs : {promptMessage: '${sec_field_validation}', invalidMessage: '${sec_field_invalid}', required : ${required}, ${sec_validation_regex} missingMessage : '${sec_field_required}' }})); \n      &lt;/script&gt;\n    &lt;/div&gt;\n    &lt;br /&gt;\n  &lt;/c:if&gt;\n&lt;/jsp:root&gt;\n</code></pre>\n\n<p>create.tagx:</p>\n\n<pre><code>&lt;jsp:root xmlns:c=\"http://java.sun.com/jsp/jstl/core\" xmlns:fn=\"http://java.sun.com/jsp/jstl/functions\" xmlns:util=\"urn:jsptagdir:/WEB-INF/tags/util\" xmlns:form=\"http://www.springframework.org/tags/form\" xmlns:jsp=\"http://java.sun.com/JSP/Page\" xmlns:spring=\"http://www.springframework.org/tags\" version=\"2.0\"&gt;\n  &lt;jsp:output omit-xml-declaration=\"yes\"/&gt;\n\n  &lt;jsp:directive.attribute name=\"id\" type=\"java.lang.String\" required=\"true\" rtexprvalue=\"true\" description=\"The identifier for this tag (do not change!)\"/&gt;\n  &lt;jsp:directive.attribute name=\"modelAttribute\" type=\"java.lang.String\" required=\"true\" rtexprvalue=\"true\" description=\"The name of the model attribute for form binding\"/&gt;\n  &lt;jsp:directive.attribute name=\"path\" type=\"java.lang.String\" required=\"true\" rtexprvalue=\"true\" description=\"Specify the relative URL path (wit leading /)\" /&gt;\n  &lt;jsp:directive.attribute name=\"compositePkField\" type=\"java.lang.String\" required=\"false\" rtexprvalue=\"true\" description=\"The field name of the composite primary key (only used if a composite PK is present in the form backing object)\" /&gt;\n  &lt;jsp:directive.attribute name=\"multipart\" type=\"java.lang.Boolean\" required=\"false\" rtexprvalue=\"true\" description=\"Indicate if this is a multipart form (default: false)\" /&gt;\n  &lt;jsp:directive.attribute name=\"label\" type=\"java.lang.String\" required=\"false\" rtexprvalue=\"true\" description=\"The label used for this object, will default to a message bundle if not supplied\"/&gt;\n  &lt;jsp:directive.attribute name=\"render\" type=\"java.lang.Boolean\" required=\"false\" rtexprvalue=\"true\" description=\"Indicate if the contents of this tag and all enclosed tags should be rendered (default 'true')\" /&gt;\n  &lt;jsp:directive.attribute name=\"openPane\" type=\"java.lang.Boolean\" required=\"false\" rtexprvalue=\"true\" description=\"Control if the title pane is opened or closed by default (default: true)\"/&gt;\n  &lt;jsp:directive.attribute name=\"z\" type=\"java.lang.String\" required=\"false\" description=\"Used for checking if element has been modified (to recalculate simply provide empty string value)\"/&gt;\n  &lt;jsp:directive.attribute name=\"enctype\" type=\"java.lang.String\" required=\"false\" description=\"Used to set the enctype, e.g. multipart/form-data for file upload support. \"/&gt;\n  &lt;c:if test=\"${empty render or render}\"&gt;\n    &lt;c:if test=\"${empty label}\"&gt;\n      &lt;spring:message code=\"label_${fn:toLowerCase(fn:substringAfter(id,'_'))}\" var=\"label\" htmlEscape=\"false\" /&gt;\n    &lt;/c:if&gt;\n\n    &lt;!--&lt;c:set var=\"enctype\" value=\"application/x-www-form-urlencoded\"/&gt; --&gt;\n    &lt;form:form action=\"${form_url}\" method=\"POST\" modelAttribute=\"${modelAttribute}\" enctype=\"${enctype}\"&gt;\n    &lt;/form:form&gt;\n    &lt;c:if test=\"${multipart}\"&gt;\n      &lt;c:set var=\"enctype\" value=\"multipart/form-data\"/&gt;\n    &lt;/c:if&gt;\n    &lt;spring:message arguments=\"${label}\" code=\"entity_create\" var=\"title_msg\" htmlEscape=\"false\" /&gt;\n    &lt;util:panel id=\"${id}\" title=\"${title_msg}\" openPane=\"${openPane}\"&gt;\n      &lt;spring:url value=\"${path}\" var=\"form_url\"/&gt;\n      &lt;c:set var=\"jsCall\" value=\"\"/&gt;\n      &lt;c:if test=\"${not empty compositePkField}\"&gt;\n        &lt;c:set var=\"jsCall\" value=\"encodePk()\" /&gt;\n      &lt;/c:if&gt;\n      &lt;form:form action=\"${form_url}\" method=\"POST\" modelAttribute=\"${modelAttribute}\" enctype=\"${enctype}\" onsubmit=\"${jsCall}\"&gt;\n        &lt;form:errors cssClass=\"errors\" delimiter=\"&amp;lt;p/&amp;gt;\"/&gt;\n        &lt;c:if test=\"${not empty compositePkField}\"&gt;\n          &lt;form:hidden id=\"_${fn:escapeXml(compositePkField)}_id\" path=\"${fn:escapeXml(compositePkField)}\" /&gt;\n          &lt;script type=\"text/javascript\"&gt;\n          &lt;![CDATA[\n            dojo.require(\"dojox.encoding.base64\");\n            function encodePk() {\n              var obj = new Object();\n              dojo.query(\"input[name^=\\\"${compositePkField}.\\\"]\").forEach(function(node, index, nodelist){\n                obj[node.name.substring('${compositePkField}'.length + 1)] = node.value;\n              });\n              var json = dojo.toJson(obj);\n              var tokArr = [];\n              for (var i = 0; i &lt; json.length; i++) {\n                tokArr.push(json.charCodeAt(i));\n              }\n              var encoded = dojox.encoding.base64.encode(tokArr);\n              dojo.byId('_${fn:escapeXml(compositePkField)}_id').value = encoded;\n            }\n          ]]&gt;\n          &lt;/script&gt;\n        &lt;/c:if&gt;\n        &lt;jsp:doBody /&gt;\n        &lt;div class=\"submit\" id=\"${fn:escapeXml(id)}_submit\"&gt;\n          &lt;spring:message code=\"button_save\" var=\"save_button\" htmlEscape=\"false\" /&gt;\n          &lt;script type=\"text/javascript\"&gt;Spring.addDecoration(new Spring.ValidateAllDecoration({elementId:'proceed', event:'onclick'}));&lt;/script&gt;\n          &lt;input id=\"proceed\" type=\"submit\" value=\"${fn:escapeXml(save_button)}\"/&gt;\n        &lt;/div&gt;\n      &lt;/form:form&gt;\n    &lt;/util:panel&gt;\n  &lt;/c:if&gt;\n&lt;/jsp:root&gt;\n</code></pre>\n\n<p>My problem is i get the fallowing error:</p>\n\n<pre><code>javax.servlet.jsp.JspTagException: Illegal use of &amp;lt;when&amp;gt;-style tag without &amp;lt;choose&amp;gt; as its direct parent\n    at org.apache.taglibs.standard.tag.common.core.WhenTagSupport.doStartTag(WhenTagSupport.java:95)\n    at org.apache.jsp.tag.web.form.fields.input_tagx._jspx_meth_c_005fwhen_005f0(input_tagx.java:519)\n    at org.apache.jsp.tag.web.form.fields.input_tagx.doTag(input_tagx.java:325)\n    at org.apache.jsp.WEB_002dINF.views.pphotoes.create_jspx._jspx_meth_field_005finput_005f0(create_jspx.java:172)\n    at org.apache.jsp.WEB_002dINF.views.pphotoes.create_jspx.access$2(create_jspx.java:157)\n</code></pre>\n\n<p>What am i doing wrong? (My controller and entity files are good i think, if needed i can post them)</p>\n\n<p>Thx for any help.\ncheers.</p>\n"},{"tags":["spring","hibernate","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":174,"score":0,"question_id":13044127,"title":"Spring MVC 3 with Hibernate 4 integration","body":"<p>My current goal is to enable transaction management in my web app with using Hibernate 4. </p>\n\n<p>Firstly, my web.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"2.5\" xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;\n\n    &lt;!-- The definition of the Root Spring Container shared by all Servlets \n        and Filters --&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;\n             /WEB-INF/spring/root-context.xml,\n             /WEB-INF/spring/appServlet/*-context.xml\n        &lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n\n    &lt;!-- Creates the Spring Container shared by all Servlets and Filters --&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.security.web.session.HttpSessionEventPublisher&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;!-- Processes application requests --&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;!-- Spring Security --&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n    &lt;session-config&gt;\n        &lt;session-timeout&gt;5&lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>mvc-dispatcher-servlet.xml (renamed from servlet-context.xml):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"sec://www.springframework.org/schema/mvc\"\n    xmlns:beans=\"http://www.springframework.org/schema/beans\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\" \n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\n        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd\"&gt;\n\n    &lt;!-- DispatcherServlet Context: defines this servlet's request-processing \n        infrastructure --&gt;\n\n    &lt;context:component-scan base-package=\"com.moose.springmvc.controller\" /&gt;\n\n    &lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n    &lt;mvc:annotation-driven /&gt;\n\n    &lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving \n        up static resources in the ${webappRoot}/resources directory --&gt;\n    &lt;mvc:resources mapping=\"/resources/**\" location=\"resources/\" /&gt;\n\n    &lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources \n        in the /WEB-INF/views directory --&gt;\n    &lt;beans:bean\n        class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n        &lt;beans:property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n        &lt;beans:property name=\"suffix\" value=\".jsp\" /&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;mvc:interceptors&gt;\n        &lt;beans:bean\n            class=\"org.springframework.web.servlet.i18n.LocaleChangeInterceptor\"&gt;\n            &lt;beans:property name=\"paramName\" value=\"lang\" /&gt;\n        &lt;/beans:bean&gt;\n    &lt;/mvc:interceptors&gt;\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>My database-context.xml (renamed from spring-database.xml) configuration:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"com.moose.springmvc.service,com.moose.springmvc.dao\" /&gt;\n\n    &lt;tx:annotation-driven proxy-target-class=\"true\" transaction-manager=\"transactionManager\"/&gt;\n\n    &lt;bean id=\"transactionManager\"\n        class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"\n        p:sessionFactory-ref=\"sessionFactory\" /&gt;\n\n    &lt;bean id=\"sessionFactory\"\n        class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"\n        p:packagesToScan=\"com.moose.springmvc.entity\" p:dataSource-ref=\"dataSource\"\n        p:configLocation=\"classpath:hibernate.cfg.xml\"&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\"&gt;\n        &lt;property name=\"driverClass\" value=\"com.mysql.jdbc.Driver\" /&gt;\n        &lt;property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/crud\" /&gt;\n        &lt;property name=\"user\" value=\"root\" /&gt;\n        &lt;property name=\"password\" value=\"mysql@123#\" /&gt;\n        &lt;!--  TODO adjust pooling parameters... --&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>My DAO class:</p>\n\n<pre><code>@Repository\npublic class UserDAO\n{\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    ...\n\n    public int save(User user)\n    {\n        return (Integer) sessionFactory.getCurrentSession().save(user);\n    }\n\n    ...  \n}\n</code></pre>\n\n<p>My Service class:</p>\n\n<pre><code>@Service\n@Transactional\npublic class UserService {\n\n    protected static Logger logger = LoggerFactory\n            .getLogger(UserService.class);\n\n    @Autowired\n    private UserDAO userDAO;\n\n\n    public Integer createUser(User user){\n\n        return userDAO.save(user);\n    }\n}\n</code></pre>\n\n<p>Relevant code for AjaxBootstrapController class:</p>\n\n<pre><code>@Controller\npublic class AjaxBootstrapController {\n    @Autowired\n    private UserService userService;\n\n        ....\n\n    @RequestMapping(value = \"/userAjaxCustomTag\", method = RequestMethod.POST)\n    public String processFormAjax(\n            @ModelAttribute(value = \"user\") @Valid User user,\n            BindingResult result) {\n        if (!result.hasErrors()) {\n            userService.createUser(user);\n        }\n        return \"userForm\";\n    }\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>hibernate.cfg.xml config:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n        \"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd\"&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;!-- Database connection settings --&gt;\n        &lt;property name=\"connection.driver_class\"&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n        &lt;property name=\"connection.url\"&gt;jdbc:mysql://localhost:3306/crud&lt;/property&gt;\n        &lt;property name=\"connection.username\"&gt;root&lt;/property&gt;\n        &lt;property name=\"connection.password\"&gt;mysql@123#&lt;/property&gt;\n\n        &lt;!-- JDBC connection pool (use the built-in) --&gt;\n        &lt;property name=\"connection.pool_size\"&gt;1&lt;/property&gt;\n\n        &lt;!-- SQL dialect --&gt;\n        &lt;property name=\"dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n\n        &lt;!-- Disable the second-level cache --&gt;\n        &lt;property name=\"cache.provider_class\"&gt;org.hibernate.cache.internal.NoCacheProvider&lt;/property&gt;\n\n        &lt;!-- Echo all executed SQL to stdout --&gt;\n        &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n\n        &lt;!-- Drop and re-create the database schema on startup\n        &lt;property name=\"hbm2ddl.auto\"&gt;create&lt;/property&gt;\n         --&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n\n<p>I get new exception : </p>\n\n<pre><code>org.hibernate.HibernateException: save is not valid without active transaction\n    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:348)\n    at $Proxy31.save(Unknown Source)\n    at com.moose.springmvc.dao.UserDAO.save(UserDAO.java:45)\n    at com.moose.springmvc.service.UserService.createUser(UserService.java:23)\n    at com.moose.springmvc.service.UserService$$FastClassByCGLIB$$60239454.invoke(&lt;generated&gt;)\n    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)\n    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)\n    at com.moose.springmvc.service.UserService$$EnhancerByCGLIB$$419f68a0.createUser(&lt;generated&gt;)\n    at com.moose.springmvc.controller.AjaxBootstrapController.processFormAjax(AjaxBootstrapController.java:60)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n</code></pre>\n\n<p>Is there anything wrong with configuration or annotation ?</p>\n"},{"tags":["spring","jsf","dependency-injection","jsf-2","converter"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3990,"score":3,"question_id":5069991,"title":"How to inject a Spring 3 Bean into a JSF 2 Converter","body":"<p>I am trying to <code>@javax.naming.Inject</code> a Spring 3 Bean called <code>WtvrBean</code> into a JSF 2 <code>@FacesConverter</code>.</p>\n\n<p>Both the Bean and the Converter are on the same package. And, in my spring's applicationContext.xml, I am scanning this package:</p>\n\n<pre><code>&lt;context:component-scan base-package=\"my-package\" /&gt;\n</code></pre>\n\n<p>But this is not working. For sure, the JSF 2 internal class that uses the converter is \ndefinitely not in <code>my-package</code>.</p>\n\n<p>For instance, if I remove the <code>@ManagedBean</code> from a JSF 2 ManagedBean, and replace it to <code>@org.springframework.stereotype.Component</code> or <code>@Controller</code>, the <code>WtvrBean</code> can be <code>@Inject</code>ed on this ManagedBean, by using Spring WebFlow.</p>\n\n<p>Well, as far as I know, there is no such thing as a <code>@Converter</code> stereotype in Spring.</p>\n\n<p>I know I can use </p>\n\n<pre><code>FacesContextUtils.getWebApplicationContext(context).getBean(\"WtvrBean\")\n</code></pre>\n\n<p>But, with that approach, the coupling between the web app and the spring is getting more tight. (annotations are metadata, and are not even considered dependency by some authors).</p>\n\n<p>I am using <code>FacesContextUtils</code> so far, if there is no better solution.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["spring","jsp","spring-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1533,"score":0,"question_id":8788390,"title":"use spring bean in JSP","body":"<p>i have bean that contain method [void return] and want access to this bean in JSP.</p>\n\n<pre><code>public class A {\n\n  public void run() {}\n}\n</code></pre>\n\n<p>add below code to spring config file.</p>\n\n<pre><code>&lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;property name=\"exposeContextBeansAsAttributes\" value=\"true\"/&gt;\n&lt;/bean&gt;\n     &lt;bean id=\"a\" class=\"com.example.A\"\n &gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>now in my JSP page :</p>\n\n<pre><code>${a.run}\n</code></pre>\n\n<p>but this solution not work.please help me for access spring bean on JSP page.</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":13056341,"title":"Adding a web interface (Spring MVC) to existing Java application","body":"<p>I have an existing Java application (Spring based) that currently does NOT have a web interface, nor does it run in a web container.  It packages up nicely with a start program and just works.</p>\n\n<p>What I need to do is add an administrative web interface for some administrative type things, retrieving real time metrics, and perhaps some graphs to give the users a warm fuzzy feeling knowing that everything is working.  As we are a Spring shop, and some of our web applications already use Spring MVC it only makes sense to us, however, I'm not happy with the suggestions I've had from our internal Spring folks on how I should procede.</p>\n\n<p>What would be the ideal way to bolt on this web interface?</p>\n\n<ul>\n<li>Convert my application to a web application and have a web container launch the application.  I not too keen on this approach is the web tier is really secondary to the primary application.</li>\n<li>Create a separate project that packages as a war, embed Jetty in my existing app and have it load the war.  I think I can use the context loader listener to make the root context of my application the parent to the web application spring context.  This would involve breaking up my Maven project into 2 projects I believe.  I can't use an existing web technology for communication between the web tier and the primary application as my primary application is not web enabled.</li>\n<li>Embed Jetty and put the Spring MVC stuff directly in my app.  While I've done this approach before, it does involve some ugliness - for instance exploding the JSP tag libs into my jar.</li>\n</ul>\n\n<p>Any thoughts on some clean separation here?  </p>\n\n<p>Also of note, my current jar contains some utility applications which some shell scripts launch.  Going a pure WAR route would make this not so easy, since I can't juse point java at my war file and choose a class to execute.</p>\n\n<p>Thanks.</p>\n"},{"tags":["spring","jboss","spring-security","jboss7.x"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":13043107,"title":"Spring security error on JBoss 7.1 > No bean named 'springSecurityFilterChain' is defined","body":"<p>I am using JBoss 7.1. My app is using spring 3.1, spring security, and for JSF 2 components it is using Richfaces [4.2.1 final]. \nHere is part of my web.xml  ></p>\n\n<pre><code>    &lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;classpath:**/*Context.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n    &lt;filter&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p>Inside WEB-INF, I have applicationContext.xml and securityContext.xml for spring configurations.\nI have tried with this configuration too ></p>\n\n<pre><code>  &lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;classpath:**/applicationContext.xml, classpath:**/securityContext.xml &lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n\n<p>And, as I checked I could see WEB-INF\\lib folder includes all spring jars as expected according to my maven dependencies [after failed deployment inside $JBOSS_HOME\\standalone\\deployments\\projectname\\WEB-INF\\lib]</p>\n\n<p>And, now error stacktrace when I try to deploy it from Eclipse:</p>\n\n<pre><code>09:52:50,588 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA\n09:52:51,998 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA\n09:52:52,179 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final \"Brontes\" starting\n09:52:59,384 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)\n09:52:59,435 INFO  [org.xnio] XNIO Version 3.0.3.GA\n09:52:59,563 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA\n09:52:59,623 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.3.GA\n09:52:59,784 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers\n09:52:59,983 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem\n09:52:59,982 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem\n09:52:59,995 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension\n09:52:59,992 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.\n09:52:59,990 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem\n09:52:59,991 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem\n09:53:00,580 INFO  [org.jboss.as.security] (MSC service thread 1-5) JBAS013100: Current PicketBox version=4.0.7.Final\n09:53:00,906 INFO  [org.jboss.as.connector] (MSC service thread 1-1) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)\n09:53:02,387 INFO  [org.jboss.as.naming] (MSC service thread 1-2) JBAS011802: Starting Naming Service\n09:53:02,478 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) JBAS015400: Bound mail session [java:jboss/mail/Default]\n09:53:03,552 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)\n09:53:05,215 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-8) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080\n09:53:07,662 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-1) JBoss Web Services - Stack CXF Server 4.0.2.GA\n09:53:10,500 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-4) JBAS015012: Started FileSystemDeploymentService for directory F:\\work\\softwares\\Application Servers\\JBoss\\jboss-as-7.1.1.Final\\jboss-as-7.1.1.Final\\standalone\\deployments\n09:53:10,648 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015003: Found com.misl.treasury.ui.war in deployment directory. To trigger deployment create a file called com.misl.treasury.ui.war.dodeploy\n09:53:10,719 INFO  [org.jboss.as.remoting] (MSC service thread 1-6) JBAS017100: Listening on localhost/127.0.0.1:4447\n09:53:10,719 INFO  [org.jboss.as.remoting] (MSC service thread 1-7) JBAS017100: Listening on /127.0.0.1:9999\n09:53:11,471 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-7) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]\n09:53:12,046 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015876: Starting deployment of \"com.misl.treasury.ui.war\"\n09:53:24,162 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/com.misl.treasury.ui]] (MSC service thread 1-2) No Spring WebApplicationInitializer types detected on classpath\n09:53:24,238 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/com.misl.treasury.ui]] (MSC service thread 1-2) Initializing Spring root WebApplicationContext\n09:53:24,242 INFO  [org.springframework.web.context.ContextLoader] (MSC service thread 1-2) Root WebApplicationContext: initialization started\n09:53:24,337 INFO  [org.springframework.web.context.support.XmlWebApplicationContext] (MSC service thread 1-2) Refreshing Root WebApplicationContext: startup date [Wed Oct 24 09:53:24 ALMT 2012]; root of context hierarchy\n09:53:24,472 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (MSC service thread 1-2) Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@15dd61: defining beans []; root of factory hierarchy\n09:53:24,479 INFO  [org.springframework.web.context.ContextLoader] (MSC service thread 1-2) Root WebApplicationContext: initialization completed in 234 ms\n09:53:24,575 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/com.misl.treasury.ui]] (MSC service thread 1-2) Exception starting filter springSecurityFilterChain: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'springSecurityFilterChain' is defined\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1097) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:326) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:236) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:194) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:447) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3269) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3865) [jbossweb-7.0.13.Final.jar:]\n    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_23]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_23]\n    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_23]\n\n09:53:24,613 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Error filterStart\n09:53:24,615 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Context [/com.misl.treasury.ui] startup failed due to previous errors\n09:53:24,617 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/com.misl.treasury.ui]] (MSC service thread 1-2) Closing Spring root WebApplicationContext\n09:53:24,620 INFO  [org.springframework.web.context.support.XmlWebApplicationContext] (MSC service thread 1-2) Closing Root WebApplicationContext: startup date [Wed Oct 24 09:53:24 ALMT 2012]; root of context hierarchy\n09:53:24,623 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (MSC service thread 1-2) Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@15dd61: defining beans []; root of factory hierarchy\n09:53:24,688 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.web.deployment.default-host.\"/com.misl.treasury.ui\": org.jboss.msc.service.StartException in service jboss.web.deployment.default-host.\"/com.misl.treasury.ui\": JBAS018040: Failed to start context\n    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_23]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_23]\n    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_23]\n\n09:53:24,703 INFO  [org.jboss.as] (MSC service thread 1-2) JBAS015951: Admin console listening on http://127.0.0.1:9990\n09:53:24,705 ERROR [org.jboss.as] (MSC service thread 1-2) JBAS015875: JBoss AS 7.1.1.Final \"Brontes\" started (with errors) in 35657ms - Started 460 of 539 services (2 services failed or missing dependencies, 76 services are passive or on-demand)\n09:53:24,908 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment \"com.misl.treasury.ui.war\" was rolled back with failure message {\"JBAS014671: Failed services\" =&gt; {\"jboss.web.deployment.default-host.\\\"/com.misl.treasury.ui\\\"\" =&gt; \"org.jboss.msc.service.StartException in service jboss.web.deployment.default-host.\\\"/com.misl.treasury.ui\\\": JBAS018040: Failed to start context\"}}\n09:53:24,913 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report\nJBAS014777:   Services which failed to start:      service jboss.web.deployment.default-host.\"/com.misl.treasury.ui\": org.jboss.msc.service.StartException in service jboss.web.deployment.default-host.\"/com.misl.treasury.ui\": JBAS018040: Failed to start context\n\n09:53:24,937 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {\"JBAS014653: Composite operation failed and was rolled back. Steps that failed:\" =&gt; {\"Operation step-2\" =&gt; {\"JBAS014671: Failed services\" =&gt; {\"jboss.web.deployment.default-host.\\\"/com.misl.treasury.ui\\\"\" =&gt; \"org.jboss.msc.service.StartException in service jboss.web.deployment.default-host.\\\"/com.misl.treasury.ui\\\": JBAS018040: Failed to start context\"}}}}\n09:53:25,282 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015877: Stopped deployment com.misl.treasury.ui.war in 361ms\n</code></pre>\n\n<p>This app was working fine untill I started to migrate it from tomcat 7 to JBoss 7.1\nThanks in advance</p>\n"},{"tags":["java","spring","spring-security","aspectj"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":356,"score":0,"question_id":11400503,"title":"@Secured annotations not working in AspectJ Mode with Autoproxy","body":"<p>I'm trying to get my Spring MVC app to play nice with Spring @Secured annotations and AspectJ auto-proxying but it doesn't seem to be proxying or recognising my @Secured annotations. I have a controller like this:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/\")\npublic class ApplicationController {\n\n    private ApplicationFactory applicationFactory;\n\n    @Inject\n    public ApplicationController(ApplicationFactory applicationFactory) {\n        super();\n        this.applicationFactory = applicationFactory;\n    }\n\n    @Secured(\"ROLE_USER\")\n    @ResponseBody\n    @RequestMapping(method = GET)\n    public Application getApplicationInfo() {\n        return applicationFactory.buildApplication(this);\n    }\n\n}\n</code></pre>\n\n<p>And a spring security XML that looks something like this:</p>\n\n<p>Code:</p>\n\n<pre><code>  &lt;security:global-method-security secured-annotations=\"enabled\" mode=\"aspectj\" proxy-target-class=\"true\" /&gt;\n\n  &lt;security:http auto-config=\"true\" use-expressions=\"true\"&gt;\n    &lt;security:http-basic/&gt;\n  &lt;/security:http&gt;\n</code></pre>\n\n<p>The above is being loaded by a no-xml Spring @Configuration component like this:</p>\n\n<pre><code>@Configuration\n@ComponentScan(basePackages = {\"com.example\"})\n@EnableWebMvc\n@ImportResource(\"classpath:security.xml\")\npublic class ApplicationConfiguration extends WebMvcConfigurerAdapter {\n\n}\n</code></pre>\n\n<p>Which in turn is loaded using a Servlet 3.0 WebApplicationInitializer:</p>\n\n<pre><code>public class SpringMvcInitializer implements WebApplicationInitializer {\n\n    private final AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();\n\n    public void onStartup(ServletContext servletContext) throws ServletException {\n        context.register(ApplicationConfiguration.class);\n\n        servletContext.addListener(new ContextLoaderListener(context));\n        servletContext.addListener(new Log4jConfigListener());\n\n        final DelegatingFilterProxy proxy = new DelegatingFilterProxy(\"springSecurityFilterChain\", context);\n        FilterRegistration.Dynamic filter = servletContext.addFilter(\"securityFilter\", proxy);\n        filter.addMappingForUrlPatterns(EnumSet.of(REQUEST), false, \"/*\");\n\n        final DispatcherServlet servlet = new DispatcherServlet(context);\n        ServletRegistration.Dynamic dispatcher = servletContext.addServlet(\"dispatcher\", servlet);\n        dispatcher.setLoadOnStartup(1);\n        dispatcher.addMapping(\"/*\");\n    }\n\n}\n</code></pre>\n\n<p>However, Spring Security isn't detecting the annotation and I'm still able the secured endpoint above without being authorised. According to the <a href=\"http://static.springsource.org/spring-security/site/faq.html#faq-method-security-in-web-context\" rel=\"nofollow\">Spring Security FAQ</a>, this maybe because the <code>&lt;global-method-security&gt;</code> element is being loaded in the wrong application context, but I don't know how to ensure this using the above no-xml Spring configuration.</p>\n\n<p>Am I missing something? I tried adding the @EnableAspectJAutoProxy(proxyTargetClass = true) to my application configuration but that didn't help either. Is there anyway to have run time weaving or will I have to use compile time weaving to enable annotation-based security for my application?</p>\n"},{"tags":["spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":145,"score":0,"question_id":12075327,"title":"Issue with Spring Hibernate PostgreSQL configuration","body":"<p>I am getting various issues with configuration of spring hibernate and postgresql. I try to resolve one issue and i get some different issue. \nI am using spring 3.1.0 release version and hibernate 4.1.4.Final\nI am getting error BeanFactory not initialized or already closed - call 'refresh' before accessing beans via the ApplicationContext</p>\n\n<p>and my web.xml is </p>\n\n<pre><code>&lt;web-app id=\"WebApp_ID\" version=\"2.4\"\n    xmlns=\"http://java.sun.com/xml/ns/j2ee\" \n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd\"&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/dispatcher-servlet.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>And my dispatcher-servlet is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:aop=\"http://www.springframework.org/schema/aop\"\nxmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:util=\"http://www.springframework.org/schema/util\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"\n   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd\n   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd\n   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n&lt;mvc:annotation-driven&gt; &lt;/mvc:annotation-driven&gt;\n&lt;context:component-scan base-package=\"com.max.ade.common.model\" /&gt;\n&lt;context:component-scan base-package=\"com.max.ade.daoImpl\" /&gt;\n&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"org.postgresql.Driver\" /&gt;\n    &lt;property name=\"url\" value=\"jdbc:postgresql://localhost:5432/TestUserDB\" /&gt;\n    &lt;property name=\"username\" value=\"postgres\" /&gt;\n    &lt;property name=\"password\" value=\"root123\" /&gt;\n&lt;/bean&gt;\n&lt;bean id=\"viewResolver\"\n    class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;property name=\"prefix\"&gt;\n        &lt;value&gt;/WEB-INF/pages/&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"suffix\"&gt;\n        &lt;value&gt;.jsp&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n&lt;bean id=\"sessionFactory\"\n    class=\"org.springframework.orm.hibernate4.annotation.AnnotationSessionFactoryBean\"&gt;\n\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"configLocation\" value=\"classpath:hibernate.cfg.xml\" /&gt;\n    &lt;!-- Scan packages for annotated entities --&gt;\n    &lt;property name=\"packagesToScan\" value=\"com.max.ade.common.model\" /&gt;\n&lt;/bean&gt;\n&lt;!-- Transaction support beans --&gt;\n&lt;bean id=\"transactionManager\"\n    class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\"&gt;&lt;/tx:annotation-  driven&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>And after issue resolving, above is my file structure for dispatcher-servlet.xml. \nAre configuration things work differently with hibernate 3.6.4 and hibernate 4.1.4 beside issue mentioned (BeanFactory not initialized or already closed - call 'refresh' before accessing beans via the ApplicationContext)</p>\n\n<p>Any concrete pointer will be great help. </p>\n\n<p>Thanks. </p>\n"},{"tags":["java","mysql","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13057266,"title":"Hibernate Parent Child Same Table Error","body":"<p>I have a problem with Hibernate using a parent child relationship in the same table.  I can do selects and inserts but I can not delete.  I wrote a JUnit test to see what was going on and found some odd behavior.</p>\n\n<p>Here is how I define my table:</p>\n\n<pre><code>CREATE TABLE `product` (\n  `productId` bigint(20) NOT NULL AUTO_INCREMENT,\n  `name` varchar(50) NOT NULL,\n  `parentProductId` bigint(20) NULL DEFAULT NULL,\n  PRIMARY KEY (`productId`),\n  CONSTRAINT `FK_PARENTPRODUCT` FOREIGN KEY (`parentProductId`) REFERENCES `product` (`productId`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;\n</code></pre>\n\n<p>My Product class looks like :</p>\n\n<pre><code>@Entity\n@Table(name = \"product\")\npublic class Product {\n\n    private Long productId;\n    private String name;\n    private Product parentProduct;\n    private Set&lt;Product&gt; children;\n    private List&lt;CustomerProduct&gt; productCustomers;\n\n    public Product() {\n    }\n\n    public Product(Long productId, String name) {\n        this.productId = productId;\n        this.name = name;\n    }\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    public Long getProductId() {\n        return productId;\n    }\n\n    public void setProductId(Long productId) {\n        this.productId = productId;\n    }\n\n    @NotNull\n    @Size(min = 1, max = 50)\n    public String getName() {\n    return name;\n    }\n\n    public void setName(String name) {\n    this.name = name;\n    }\n\n    @ManyToOne\n    @JoinColumn(name = \"parentProductId\")\n    public Product getParentProduct() {\n        return parentProduct;\n    }\n\n    public void setParentProduct(Product parentProduct) {\n        this.parentProduct = parentProduct;\n    }\n\n    @OneToMany(mappedBy = \"parentProduct\", fetch = FetchType.EAGER)\n    public Set&lt;Product&gt; getChildren() {\n        return children;\n    }\n\n    public void setChildren(Set&lt;Product&gt; children) {\n        this.children = children;\n    }\n\n    @OneToMany(mappedBy = \"product\")\n    public List&lt;CustomerProduct&gt; getProductCustomers() {\n        return productCustomers;\n    }\n\n    public void setProductCustomers(List&lt;CustomerProduct&gt; productCustomers) {\n        this.productCustomers = productCustomers;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        final Product other = (Product) obj;\n        if (this.productId != other.productId\n            &amp;&amp; (this.productId == null || !this.productId.equals(other.productId)))\n                return false;\n        if ((this.name == null) ? (other.name != null) : !this.name.equals(other.name))\n            return false;\n        return true;\n    }\n\n    @Override\n    public int hashCode() {\n        int hash = 7;\n        hash = 31 * hash + name.length();\n        hash = 31 * hash + (name == null ? 0 : name.hashCode());\n        return hash;\n    }\n\n    @Override\n    public String toString() {\n        return \"Product [productId=\" + productId + \", name=\" + name + \"]\";\n    }\n}\n</code></pre>\n\n<p>I wrote a few JUnit tests which are:</p>\n\n<pre><code>@Test\n@Transactional(readOnly=true)\npublic void getProductNoChildren() {\n    Product p = productService.getProductById(Long.parseLong(\"1\"));\n    assertNotNull(p);\n    assertTrue(p.getName().equals(\"Test\"));\n    assertNull(p.getParentProduct());\n    assertTrue(p.getChildren().size() == 0);\n}\n\n@Test\n@Transactional(readOnly=true)\npublic void getProductWithChildren() {\n    Product p = productService.getProductById(Long.parseLong(\"10\"));\n    assertNotNull(p);\n    assertTrue(p.getName().equals(\"Test_2\"));\n    assertNull(p.getParentProduct());\n    assertTrue(p.getChildren().size() &gt; 0);\n}\n\n@Test\n@Transactional(readOnly=true)\npublic void getProductWithParent() {\n    Product p = productService.getProductById(Long.parseLong(\"20\"));\n    assertNotNull(p);\n    assertTrue(p.getName().equals(\"Test_3\"));\n    assertNotNull(p.getParentProduct());\n    assertTrue(p.getParentProduct().getProductId() == Long.parseLong(\"2\"));\n    assertTrue(p.getChildren().size() == 0);\n}\n</code></pre>\n\n<p>The first 2 tests pass.  The 3rd always fails with a NullPointerException on the 2nd line of the hashcode method.  Says name is null.  I verified this only happens when a parentProductId is set.  I can not figure out why this is happening.  The name should never be null.  Do I have an error in the way I defined the hibernate annotations for my class?</p>\n\n<p>Here is my stacktrace if anyone is interested.....</p>\n\n<pre><code>java.lang.NullPointerException\nat com.symmetry.security.model.Product.hashCode(Product.java:145)\nat java.util.HashMap.put(HashMap.java:372)\nat java.util.HashSet.add(HashSet.java:200)\nat java.util.AbstractCollection.addAll(AbstractCollection.java:305)\nat org.hibernate.collection.PersistentSet.endRead(PersistentSet.java:352)\nat org.hibernate.engine.loading.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:261)\nat org.hibernate.engine.loading.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:246)\nat org.hibernate.engine.loading.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:219)\nat org.hibernate.loader.Loader.endCollectionLoad(Loader.java:1005)\nat org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:993)\nat org.hibernate.loader.Loader.doQuery(Loader.java:857)\nat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)\nat org.hibernate.loader.Loader.loadEntity(Loader.java:2037)\nat org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:86)\nat org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:76)\nat org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3293)\nat org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:496)\nat org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:477)\nat org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)\nat org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:285)\nat org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)\nat org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)\nat org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:1038)\nat org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:630)\nat org.hibernate.type.EntityType.resolve(EntityType.java:438)\nat org.hibernate.engine.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:139)\nat org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:982)\nat org.hibernate.loader.Loader.doQuery(Loader.java:857)\nat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)\nat org.hibernate.loader.Loader.loadEntity(Loader.java:2037)\nat org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:86)\nat org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:76)\nat org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3293)\nat org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:496)\nat org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:477)\nat org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)\nat org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:285)\nat org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)\nat org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)\nat org.hibernate.impl.SessionImpl.get(SessionImpl.java:1005)\nat org.hibernate.impl.SessionImpl.get(SessionImpl.java:998)\nat com.symmetry.security.dao.hibernate.HibernateAbstractDao.findById(HibernateAbstractDao.java:52)\nat com.symmetry.security.dao.hibernate.HibernateAbstractDao$$FastClassByCGLIB$$b227fdff.invoke(&lt;generated&gt;)\nat net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)\nat org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\nat org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)\nat com.symmetry.security.dao.hibernate.HibernateProductDao$$EnhancerByCGLIB$$415fcf17.findById(&lt;generated&gt;)\nat com.symmetry.security.service.ProductServiceImpl.getProductById(ProductServiceImpl.java:42)\nat com.symmetry.security.service.ProductServiceImpl$$FastClassByCGLIB$$8b8f4a88.invoke(&lt;generated&gt;)\nat net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)\nat org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\nat org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)\nat com.symmetry.security.service.ProductServiceImpl$$EnhancerByCGLIB$$b032e753.getProductById(&lt;generated&gt;)\nat com.symmetry.security.service.ProductServiceImplUnitTest.getProductWithParent(ProductServiceImplUnitTest.java:87)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\nat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)\nat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)\nat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\nat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\nat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\nat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)\nat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13054466,"title":"@Autowired in Spring MVC @Controller does not work on a private field","body":"<p>I have a Spring MVC Controller in a very XML-slimmed application, we use a lot of annotations and as little config as possible. The Controller is working and it also has a number of resource values injected. But I've experienced a really strange behavior with this controller; annotated private fields referencing other components will not be injected.\nThis will not work.</p>\n\n<pre><code>@Controller\npublic class EntranceUnitController {\n\n    @Value(\"${remote.baseUrl}\")\n    private String baseUrl = \"http://localhost\";\n\n    @Value(\"${remote.port}\")\n    private String pushPort = \"8080\";\n\n    @Autowired\n    private HttpClientFactory httpClientFactory;\n\n    ...\n</code></pre>\n\n<p>It seems that the <code>httpClientFactory</code> isn't there yet when the private fields are set, if I set a break point to inspect the value there is of course <code>null</code> set when the controller is created.</p>\n\n<p>BUT, if I make a setter for the component and annotate the set-method instead of the private field the controller works as expected.</p>\n\n<pre><code>@Controller\npublic class EntranceUnitController {\n\n    @Value(\"${remote.baseUrl}\")\n    private String baseUrl = \"http://localhost\";\n\n    @Value(\"${remote.port}\")\n    private String pushPort = \"8080\";\n\n    private HttpClientFactory httpClientFactory;\n\n    @Autowired\n    public void setHttpClientFactory(HttpClientFactory httpClientFactory) {\n        this.httpClientFactory = httpClientFactory;\n    }\n\n    ...\n</code></pre>\n\n<p>To me this is really annoying. Isn't the auto wiring injection for annotated values happening at the same time regardless injection point? I.e. why does it matter that the object is injected with a setter? I thought that private field injections are directly followed by constructs and setters, me start to think I'm wrong in that case...</p>\n"},{"tags":["java","eclipse","spring","heap-memory","oom"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13041147,"title":"how to increase STS (Spring Source Tool) memory size","body":"<p>I am trying to increase heap size (memory) for the spring source tool as I am getting out of memory.</p>\n\n<p>If I increase from Xmx from 768m to 1024m i get error \"Failed to Create Java Virtual Machine\".</p>\n\n<p>If i revert Xmx to 768m it works fine but i get OOM (Out of Memory). I have STS 2.9.2. OS is win7.</p>\n\n<p>This is currentlywhat I have in sts.ini at the moment.</p>\n\n<pre><code>-startup\nplugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.2.R36x_v20101222\n-product\ncom.springsource.sts.ide\n--launcher.defaultAction\nopenFile\n--launcher.XXMaxPermSize\n384M\n-vmargs\n-Dosgi.requiredJavaVersion=1.6\n-Xms256m\n-Xmx1024m\n-Xss1m\n-XX:PermSize=256m\n-XX:MaxPermSize=1024m\n</code></pre>\n\n<p>what should i change. Please advise.</p>\n"},{"tags":["spring","web-applications"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13056700,"title":"Spring: Is it possible to place your filter mappings in application-security.xml instead of web.xml?","body":"<p>Is it possible to place your filter mapping in application-security.xml instead of web.xml?</p>\n"},{"tags":["java","spring","datasource","mybatis","spring-transactions"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13055609,"title":"Not routing DataSource with Spring 3 and MyBatis","body":"<p>I have a default database and sometimes I have to make a select in another database.</p>\n\n<p>I've searched many blogs and questions here about this, but couldn't make it work.</p>\n\n<p>Tried the <a href=\"http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/\" rel=\"nofollow\">http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/</a> way. Nothing.</p>\n\n<p>Code for RouterDataSource class:</p>\n\n<pre><code>public class RouterDataSource extends AbstractRoutingDataSource {   \n    @Override\n    protected DataSourceEnum determineCurrentLookupKey() {\n         return DataSourceContextHolder.getTargetDataSource();\n    }   \n}\n</code></pre>\n\n<p>Code for DataSourceContextHolder class:</p>\n\n<pre><code>public class DataSourceContextHolder {\n     private static final ThreadLocal&lt;DataSourceEnum&gt; contextHolder = new ThreadLocal&lt;DataSourceEnum&gt;();\n\n     public static void setTargetDataSource(DataSourceEnum targetDataSource) {\n         Assert.notNull(targetDataSource, \"Target data source cannot be null\");\n         contextHolder.set(targetDataSource);\n     }\n\n     public static DataSourceEnum getTargetDataSource() {\n         if (contextHolder.get() != null)\n             return (DataSourceEnum) contextHolder.get();\n         else\n             return DataSourceEnum.DB1;\n     }\n\n     public static void resetDefaultDataSource() {\n         contextHolder.remove();\n     }\n}\n</code></pre>\n\n<p>Code for the method calling to change the database:</p>\n\n<pre><code>@Override\npublic CodeHD getCategoryByCode(String code) throws BusinessException {\n    DataSourceContextHolder.setTargetDataSource(DataSourceEnum.DATABASE2);\n    return (CodeHD) persistency.getObject(GETOBJECT_BY_CODE, code);\n}\n</code></pre>\n\n<p>Code for DatasourceEnum class:</p>\n\n<pre><code>public enum DataSourceEnum {\n    DB1,\n    DB2;\n}\n</code></pre>\n\n<p>And finally the configuration on my applicationContext.xml:</p>\n\n<pre><code>&lt;bean id=\"parentDataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" abstract=\"true\"&gt;\n    &lt;property name=\"driverClass\" value=\"oracle.jdbc.pool.OracleDataSource\" /&gt;\n    &lt;property name=\"acquireIncrement\" value=\"10\" /&gt;\n    &lt;property name=\"idleConnectionTestPeriod\" value=\"60\" /&gt;\n    &lt;property name=\"maxStatements\" value=\"50\" /&gt;\n    &lt;property name=\"minPoolSize\" value=\"5\" /&gt;\n    &lt;property name=\"maxPoolSize\" value=\"15\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"database1DS\" parent=\"parentDataSource\"&gt;\n    &lt;property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@database1:1521:xe\" /&gt;\n    &lt;property name=\"user\" value=\"user\" /&gt;\n    &lt;property name=\"password\" value=\"password\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"database2DS\" parent=\"parentDataSource\"&gt;\n    &lt;property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@database2:1521:xe\" /&gt;\n    &lt;property name=\"user\" value=\"user\" /&gt;\n    &lt;property name=\"password\" value=\"password\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n     &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n  &lt;/bean&gt;\n\n&lt;bean id=\"dataSource\" class=\"package.RouterDataSource\"&gt;\n    &lt;property name=\"defaultTargetDataSource\" ref=\"database1DS\"/&gt;\n    &lt;property name=\"targetDataSources\"&gt;\n        &lt;map key-type=\"package.DataSourceEnum\"&gt;\n            &lt;entry key=\"DB1\" value-ref=\"database1DS\"/&gt;\n            &lt;entry key=\"DB2\" value-ref=\"database2DS\"/&gt;\n        &lt;/map&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The problem is that when I set it to DB2 it won't change.</p>\n\n<p>Can anyone help me?</p>\n"},{"tags":["spring","validation","cxf"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13056261,"title":"Validate javax.validation annotated object throught cxf service","body":"<p>I have a sample class like this</p>\n\n<pre><code>public class Log implements Serializable{\n\n    @NotNull\n    @Pattern(regexp=\"[a-z0-9]\")\n    private String controller;\n}\n</code></pre>\n\n<p>and a cxf webservice:</p>\n\n<pre><code>@WebService\n@SOAPBinding(style=Style.DOCUMENT, use=Use.LITERAL)\n@SchemaValidation\npublic interface LogService {\n\n    @WebMethod BigInteger createLog(@NotNull String appName,@Valid Log log);\n}\n</code></pre>\n\n<p>This is my spring ws configuration:</p>\n\n<pre><code>&lt;jaxws:endpoint id=\"logService\" implementor=\"#logServiceEndpoint\"\n    address=\"/logService\"&gt;\n    &lt;jaxws:properties&gt;\n        &lt;entry key=\"schema-validation-enabled\" value=\"true\" /&gt;\n    &lt;/jaxws:properties&gt;\n&lt;/jaxws:endpoint&gt;\n\n&lt;bean id=\"logServiceEndpoint\" class=\"it.trecube.logging.ws.LogServiceImpl\"&gt;\n    &lt;property name=\"controller\" ref=\"loggingController\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I would that Log class is validated and that this information are presented into created wsdl and appName validated also, but i try to pass appName=null and Log without controller and all go ok...</p>\n\n<p>i use spring, maven and cxf</p>\n\n<p>tanks for reply and sorry for my bad english </p>\n"},{"tags":["spring","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13055885,"title":"Spring not accepting a POST parameter unless @RequestParam \"required=false\"","body":"<p>I am running a Spring 3.1.2 application. I have a RESTful servlet with a number of methods. The GET methods are working fantastic (<code>@PathVariables</code> matching, responses correctly marshalled to JSON or XML based on the Accept header, etc) 100% of the time.</p>\n\n<p>However the POST method is simply not working. After hours of messing around with converts and every other Spring aspect I could find (all tinkering reverted), I narrowed it do to the <code>required</code> field in <code>@RequestParam</code>. This is a simplified test method I've been using to investigate:</p>\n\n<pre><code>@RequestMapping (value = \"/bogus\",\n                 method = POST)\npublic @ResponseBody PassResponse bogus (\n            @RequestParam (value = \"test\", required = false) String test) {\n    // Just some handy garbage objects that marshal to JSON/XML\n    UserResponse user = new UserResponse ();\n    user.setName (test);\n    AccountDetail detail = new AccountDetail (user,null);\n    return new PassResponse (detail);\n}\n</code></pre>\n\n<p><strong>required=false</strong>: everything works (parameter is received and interpreted). Exactly as I expect it to work</p>\n\n<p><strong>requiredt=true</strong>: (or not specified, since this is the default) I consistently get the message \"<em>MissingServletRequestParameterException: Required String parameter 'test' is not present</em>\"</p>\n\n<p>Client side view:</p>\n\n<p><strong>required=true</strong></p>\n\n<pre><code>Request URL:http://localhost:8080/internal-project/rest/bogus\nRequest Method:POST\nStatus Code:400 Bad Request\nRequest Headersview source\nAccept:application/json\nConnection:keep-alive\nContent-Length:12\nHost:localhost:8080\nRequest Payload\ntest=LALALAA\nResponse Headersview source\nConnection:close\nContent-Length:971\nContent-Type:text/html;charset=utf-8\nDate:Wed, 24 Oct 2012 18:41:05 GMT\nServer:Apache-Coyote/1.1\n</code></pre>\n\n<p><strong>required=false</strong></p>\n\n<pre><code>Request URL:http://localhost:8080/internal-project/rest/bogus\nRequest Method:POST\nStatus Code:200 OK\nRequest Headersview source\nAccept:application/json\nConnection:keep-alive\nContent-Length:12\nHost:localhost:8080\nRequest Payload\ntest=LALALAA\nResponse Headersview source\nContent-Type:application/json;charset=UTF-8\nDate:Wed, 24 Oct 2012 18:44:03 GMT\nServer:Apache-Coyote/1.1\nTransfer-Encoding:chunked\n</code></pre>\n\n<p>It is the exact same test suite being run when toggling <code>required</code> and I can see the parameter is being passed. When the parameter is optional, Spring handles the it correctly.</p>\n\n<p>If anyone has run across this before or has any ideas I'd love to hear them. Marking the required parameter as optional, even if it works, is terrible self documentation even if I comment it. Plus the behavior is making me a little nervous. Hopefully I just screwed something up somewhere...</p>\n"},{"tags":["java","spring","hibernate","jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13055910,"title":"What are the causes for javax.persistence.TransactionRequiredException: no transaction is in progress","body":"<p>What are the causes for </p>\n\n<pre><code>javax.persistence.TransactionRequiredException: no transaction is in progress  at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:971)\n</code></pre>\n\n<p>Even after having </p>\n\n<ul>\n<li><p><code>&lt;tx:annotation-driven/&gt;</code> in applicationContext</p></li>\n<li><p>methods annotated with @Transactional</p></li>\n</ul>\n\n<p>In Spring 3.1.1 + Hibernate 4.1</p>\n"},{"tags":["java","spring","spring-security"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":5169,"score":3,"question_id":8649818,"title":"Implement custom AuthenticationProvider in Spring Security 2.06","body":"<p>I'm using Spring Security to secure a Struts2 web application. Due to project constraints, I'm using Spring Security 2.06.</p>\n\n<p>My team built a custom User Management API that authenticates a user after taking in username and password parameters, and returns a custom user object containing a list of roles and other attributes like email, name, etc.</p>\n\n<p>From my understanding, the typical Spring Security use-case uses a default UserDetailsService to retrieve a UserDetails object; this object will contain (among other things) a password field that will be used by the framework to authenticate the user.</p>\n\n<p>In my case, I want to let our custom API do the authentication, then return a custom UserDetails object containing the roles and other attributes (email, etc).</p>\n\n<p>After some research, I figured out that I can do this through a custom implementation of AuthenticationProvider. I also have custom implementations of UserDetailsService and UserDetails.</p>\n\n<p>My problem is that I don't really understand what I'm supposed to be returning in CustomAuthenticationProvider. Do I use my custom UserDetailsService object here? Is that even needed? Sorry, I'm really confused.</p>\n\n<p>CustomAuthenticationProvider:</p>\n\n<pre><code>public class CustomAuthenticationProvider implements AuthenticationProvider {\n\nprivate Logger logger = Logger.getLogger(CustomAuthenticationProvider.class);\n\nprivate UserDetailsService userDetailsService; //what am i supposed to do with this?\n\n@Override\npublic Authentication authenticate(Authentication authentication) throws AuthenticationException {\n    UsernamePasswordAuthenticationToken auth = (UsernamePasswordAuthenticationToken) authentication;\n    String username = String.valueOf(auth.getPrincipal());\n    String password = String.valueOf(auth.getCredentials());\n\n    logger.info(\"username:\" + username);\n    logger.info(\"password:\" + password);\n    /* what should happen here? */\n\n    return null;  //what do i return?\n}\n\n@Override\npublic boolean supports(Class aClass) {\n    return true;  //To indicate that this authenticationprovider can handle the auth request. since there's currently only one way of logging in, always return true\n}\n\npublic UserDetailsService getUserDetailsService() {\n    return userDetailsService;\n}\n\npublic void setUserDetailsService(UserDetailsService userDetailsService) {\n    this.userDetailsService = userDetailsService;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>applicationContext-security.xml:</p>\n\n<pre><code>&lt;beans:bean id=\"customUserDetailsService\" scope=\"prototype\" class=\"com.test.testconsole.security.CustomUserDetailsService\"/&gt;\n\n&lt;beans:bean id=\"customAuthenticationProvider\" class=\"com.test.testconsole.security.CustomAuthenticationProvider\"&gt;\n    &lt;custom-authentication-provider /&gt;\n    &lt;beans:property name=\"userDetailsService\" ref=\"customUserDetailsService\" /&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n\n<p>To summarize, this is what I need:</p>\n\n<ol>\n<li>User logs in through a web form</li>\n<li>Authenticate user using in-house user management API</li>\n<li>For successfully authenticated users, populate GrantedAuthories, etc.</li>\n<li><p>Return an user entity containing roles/authorities, and other attributes like email, name, etc. I should then be able to access this object like so ..</p>\n\n<pre><code>//spring security get user name\nAuthentication auth = SecurityContextHolder.getContext().getAuthentication();\nuserName = auth.getName(); //get logged in username\nlogger.info(\"username: \" + userName);\n\n//spring security get user role\nGrantedAuthority[] authorities = auth.getAuthorities();\nuserRole = authorities[0].getAuthority();\nlogger.info(\"user role: \" + userRole);\n</code></pre></li>\n</ol>\n\n<p>I hope this makes sense. Any help or pointers will be appreciated!</p>\n\n<p>Thanks!</p>\n\n<p>Update:</p>\n\n<p>I've made some progress, I think.</p>\n\n<p>I have a custom Authentication object implementing the Authentication interface:</p>\n\n<pre><code>public class CustomAuthentication implements Authentication {\n\n    String name;\n    GrantedAuthority[] authorities;\n    Object credentials;\n    Object details;\n    Object principal;\n    boolean authenticated;\n\n    public CustomAuthentication(String name, GrantedAuthority[] authorities, Object credentials, Object details, Object principal, boolean\n                                authenticated){\n        this.name=name;\n        this.authorities=authorities;\n        this.details=details;\n        this.principal=principal;\n        this.authenticated=authenticated;\n\n    }\n    @Override\n    public GrantedAuthority[] getAuthorities() {\n        return new GrantedAuthority[0];  //To change body of implemented methods use File | Settings | File Templates.\n    }\n\n    @Override\n    public Object getCredentials() {\n        return null;  //To change body of implemented methods use File | Settings | File Templates.\n    }\n\n    @Override\n    public Object getDetails() {\n        return null;  //To change body of implemented methods use File | Settings | File Templates.\n    }\n\n    @Override\n    public Object getPrincipal() {\n        return null;  //To change body of implemented methods use File | Settings | File Templates.\n    }\n\n    @Override\n    public boolean isAuthenticated() {\n        return false;  //To change body of implemented methods use File | Settings | File Templates.\n    }\n\n    @Override\n    public void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException {\n        //To change body of implemented methods use File | Settings | File Templates.\n    }\n\n    @Override\n    public String getName() {\n        return null;  \n    }\n}\n</code></pre>\n\n<p>and updated my CustomerAuthenticationProvider class:</p>\n\n<pre><code>    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        UsernamePasswordAuthenticationToken auth = (UsernamePasswordAuthenticationToken) authentication;\n        String username = String.valueOf(auth.getPrincipal());\n        String password = String.valueOf(auth.getCredentials());\n\n        logger.info(\"username:\" + username);\n        logger.info(\"password:\" + password);\n\n        //no actual validation done at this time\n\n        GrantedAuthority[] authorities = new GrantedAuthorityImpl[1];\n        authorities[0] = new GrantedAuthorityImpl(\"ROLE_USER\");\n\n        CustomAuthentication customAuthentication = new CustomAuthentication(\"TestMerchant\",authorities,\"details\",username,password,true);\n\n    return customAuthentication;\n\n    //return new UsernamePasswordAuthenticationToken(username,password,authorities); \n}\n</code></pre>\n\n<p>It works if I return an UsernamePasswordAuthenticationToken object, but if I try to return CustomAuthentication, I get the following error:</p>\n\n<pre><code>java.lang.ClassCastException: com.test.testconsole.security.CustomAuthentication cannot be cast to org.springframework.security.providers.UsernamePasswordAuthenticationToken\n    at com.test.testconsole.security.CustomAuthenticationProvider.authenticate(CustomAuthenticationProvider.java:27)\n    at org.springframework.security.providers.ProviderManager.doAuthentication(ProviderManager.java:188)\n    at org.springframework.security.AbstractAuthenticationManager.authenticate(AbstractAuthenticationManager.java:46)\n    at org.springframework.security.intercept.AbstractSecurityInterceptor.authenticateIfRequired(AbstractSecurityInterceptor.java:319)\n    at org.springframework.security.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:258)\n    at org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:106)\n    at org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.ui.SessionFixationProtectionFilter.doFilterHttp(SessionFixationProtectionFilter.java:67)\n    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)\n    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.providers.anonymous.AnonymousProcessingFilter.doFilterHttp(AnonymousProcessingFilter.java:105)\n    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.ui.rememberme.RememberMeProcessingFilter.doFilterHttp(RememberMeProcessingFilter.java:116)\n    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)\n    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.ui.basicauth.BasicProcessingFilter.doFilterHttp(BasicProcessingFilter.java:174)\n    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:278)\n    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)\n    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)\n    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)\n    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)\n    at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)\n    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)\n    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)\n    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)\n    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)\n    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)\n    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)\n    at org.mortbay.jetty.Server.handle(Server.java:326)\n    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:536)\n    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:915)\n    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:539)\n    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)\n    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:405)\n    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)\n    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)\n</code></pre>\n\n<p>It's like something is expecting not just any Authentication object, but a specific implementation of it - UsernamePasswordAuthenticationToken. This makes me think that I may be missing another custom component .. maybe a filter?</p>\n"},{"tags":["spring","rest","integration-testing","maven-jetty-plugin","load-time-weaving"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2672,"score":2,"question_id":5538564,"title":"Configuring Integration Tests using Spring/Jetty (or Tomcat)/Maven for REST tests","body":"<p>I would like to test our REST service with HTTP requests (kinda blackbox testing). However, after a couple of hours googling and trying different configs, I am still not able to start Jetty correctly. Here is the my current configuration (I tried multiple different versions):</p>\n\n<p>pom.xml</p>\n\n<pre><code>        ...\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.8&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;junitArtifactName&gt;junit:junit&lt;/junitArtifactName&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;**/*_Roo_*&lt;/exclude&gt;\n                    &lt;exclude&gt;**/*Util*&lt;/exclude&gt;\n                    &lt;exclude&gt;**/*IT*&lt;/exclude&gt;\n                &lt;/excludes&gt;\n                &lt;forkMode&gt;once&lt;/forkMode&gt;\n                &lt;argLine&gt;-javaagent:'${settings.localRepository}/org/springframework/spring-instrument/${org.springframework-version}/spring-instrument-${org.springframework-version}.jar' -javaagent:'${settings.localRepository}/org/aspectj/aspectjweaver/${org.aspectj-version}/aspectjweaver-${org.aspectj-version}.jar'&lt;/argLine&gt;\n                &lt;useSystemClassLoader&gt;true&lt;/useSystemClassLoader&gt; \n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.8&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;forkMode&gt;once&lt;/forkMode&gt;\n                &lt;argLine&gt;-javaagent:'${settings.localRepository}/org/springframework/spring-instrument/${org.springframework-version}/spring-instrument-${org.springframework-version}.jar' -javaagent:'${settings.localRepository}/org/aspectj/aspectjweaver/${org.aspectj-version}/aspectjweaver-${org.aspectj-version}.jar'&lt;/argLine&gt;\n                &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;integration-test&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;integration-test&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;verify&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;verify&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;  \n            &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;  \n            &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;  \n            &lt;version&gt;6.1.10&lt;/version&gt;  \n            &lt;configuration&gt;  \n                &lt;scanintervalseconds&gt;10&lt;/scanintervalseconds&gt;  \n                &lt;stopkey&gt;foo&lt;/stopkey&gt;  \n                &lt;stopport&gt;9999&lt;/stopport&gt;  \n                &lt;contextpath&gt;/${project.artifactId}&lt;/contextpath&gt;  \n                &lt;connectors&gt;  \n                    &lt;connector implementation=\"org.mortbay.jetty.nio.SelectChannelConnector\"&gt;  \n                        &lt;port&gt;9090&lt;/port&gt;  \n                    &lt;/connector&gt;  \n                &lt;/connectors&gt;  \n            &lt;/configuration&gt;  \n            &lt;executions&gt;  \n                &lt;execution&gt;  \n                    &lt;id&gt;start-jetty&lt;/id&gt;  \n                    &lt;phase&gt;pre-integration-test&lt;/phase&gt;  \n                    &lt;goals&gt;  \n                        &lt;goal&gt;run&lt;/goal&gt;  \n                    &lt;/goals&gt;  \n                    &lt;configuration&gt;  \n                        &lt;scanintervalseconds&gt;0&lt;/scanintervalseconds&gt;  \n                        &lt;daemon&gt;true&lt;/daemon&gt;  \n                    &lt;/configuration&gt;  \n                &lt;/execution&gt;  \n                &lt;execution&gt;  \n                    &lt;id&gt;stop-jetty&lt;/id&gt;  \n                    &lt;phase&gt;post-integration-test&lt;/phase&gt;  \n                    &lt;goals&gt;  \n                        &lt;goal&gt;stop&lt;/goal&gt;  \n                    &lt;/goals&gt;  \n                &lt;/execution&gt;  \n            &lt;/executions&gt;  \n        &lt;/plugin&gt;\n        ...\n</code></pre>\n\n<p>orm.xml</p>\n\n<pre><code>&lt;!-- &lt;context:load-time-weaver/&gt; --&gt;\n&lt;context:load-time-weaver weaver-class=\"org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver\"/&gt;\n&lt;context:spring-configured/&gt;\n&lt;context:annotation-config /&gt;\n&lt;context:component-scan base-package=\"com.example.jump.domain\"&gt;\n    &lt;context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Repository\"/&gt;\n&lt;/context:component-scan&gt;\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n</code></pre>\n\n<p>Right now, I am getting the exception:</p>\n\n<ul>\n<li>java.lang.IllegalStateException: ClassLoader [org.mortbay.jetty.webapp.WebAppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar</li>\n</ul>\n\n<p>I understand the exception, but I wasn't able to fix it. I also tried a couple of other approaches, like giving the javaagent via MAVEN_OPTS or trying to set VM args to Jetty. The problem is Google gives back a bunch of 'solutions' for different versions and none was working.</p>\n\n<p>I am currently pretty frustrated that a common scenario like doing REST services tests, is so hard to achieve in Spring. So if you are clever enough to find the right configuration, please share it with me in a way that even a monkey could configure it and I promise if we ever met the beers are on me.</p>\n\n<p>Here are the versions I use:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;java-version&gt;1.6&lt;/java-version&gt;\n    &lt;org.springframework-version&gt;3.0.5.RELEASE&lt;/org.springframework-version&gt;\n    &lt;org.aspectj-version&gt;1.6.9&lt;/org.aspectj-version&gt;\n    &lt;org.slf4j-version&gt;1.5.10&lt;/org.slf4j-version&gt;\n    &lt;redis.version&gt;1.0.0.BUILD-SNAPSHOT&lt;/redis.version&gt;\n    &lt;org.jboss.hibernate.version&gt;3.6.0.Final&lt;/org.jboss.hibernate.version&gt;\n    &lt;net.sf.ehcache.version&gt;2.3.1&lt;/net.sf.ehcache.version&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>Maven 2.21</p>\n\n<p>I happily provide more information if needed. Like I said every help appreciated.</p>\n"},{"tags":["java","multithreading","spring","tomcat7","httpconnection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":13040150,"title":"Spring WS and MultiThreadedHttpConnectionManager","body":"<p>I have a web service on Spring WS 2.1.0. Web service runs on Tomcat 7 and implements an endpoint with one transactional method that read data from database and generate different reports. Tomcat 7 runs behind Apache Server via JServ protocol.</p>\n\n<p>During stress test via Apache JMeter I came to conclusion that simultaneous requests are handled serially. At first I tried to tune database connection pool (commons-dbcp and later tomcat-jdbc) but result was the same. Endpoint method only reads data, so there are no read-after-write or write-after-read dependencies and transactions could by handled in parallel. Thus the problem is in HTTP connections handling.</p>\n\n<p>After some searching (and googling, of course) I found out that Spring WS comes with the default connection manager(SimpleHttpConnectionManager) which is single threaded. The good practise is to replace SimpleHttpConnectionManager with MultiThreadedHttpConnectionManager. I found sample code that looks like this:</p>\n\n<pre><code>&lt;bean id=\"httpClient\" class=\"org.apache.commons.httpclient.HttpClient\"&gt;\n    &lt;constructor-arg&gt;\n        &lt;bean class=\"org.apache.commons.httpclient.MultiThreadedHttpConnectionManager&gt;\n            &lt;property name=\"maxConnectionsPerHost\" value=\"20\"/&gt;\n            &lt;property name=\"maxTotalConnections\" value=\"100\"/&gt;\n        &lt;/bean&gt;\n    &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>But this example isn't rather clear to me because I don't understand how Spring uses HttpClient (refers to ID or autowiring it).  So how can I use MultiThreadedHttpConnectionManager with Spring in my case? Where should I inject configured instance of this class? </p>\n"},{"tags":["spring","aop","aspectj","spring-roo"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":202,"score":0,"question_id":12144606,"title":"No matching factory method found: factory method 'aspectOf()'","body":"<p>I have the following aspect:</p>\n\n<pre><code>package trc.suivi.aspects;\n\nimport java.util.Date;\n\nimport org.apache.log4j.Logger;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport trc.suivi.domain.EvenementPli;\nimport trc.suivi.domain.Pli;\nimport trc.suivi.domain.TypeEvenement;\nimport trc.suivi.repository.EvenementPliRepository;\n\npublic aspect PliEventManagerAspect {\n\n    private static final Logger log = Logger.getLogger(PliEventManagerAspect.class);\n\n    @Autowired\n    private EvenementPliRepository evenementPliRepository;\n\n    public PliEventManagerAspect() {\n    }\n\n    pointcut catchEMPersist(Pli pli) : (execution(* trc.suivi.repository.PliRepository+.save(*)) &amp;&amp; args(pli));\n    pointcut catchEMPersist() : (execution(trc.suivi.domain.Pli.persist()));\n\n    after(Pli pli) returning: catchEMPersist(pli) {\n        log.debug(\"catchEMPersist(pli)\");\n        EvenementPli ev = new EvenementPli();\n        ev.setDateCreation(new Date());\n        ev.setType(TypeEvenement.creation);\n        ev.setMessage(\"Création d'un pli\");\n        evenementPliRepository.save(ev);        \n    }\n\n    after() returning: catchEMPersist() {\n        log.debug(\"catchEMPersist()\");\n        EvenementPli ev = new EvenementPli();\n        ev.setDateCreation(new Date());\n        ev.setType(TypeEvenement.creation);\n        ev.setMessage(\"Création d'un pli\");\n        evenementPliRepository.save(ev);        \n    }\n\n}\n</code></pre>\n\n<p>And the following xml config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd\n        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\"&gt;\n    &lt;aop:aspectj-autoproxy /&gt;\n    &lt;bean class=\"trc.suivi.aspects.PliEventManagerAspect\" factory-method=\"aspectOf\"/&gt;\n &lt;/beans&gt;\n</code></pre>\n\n<p>When I start my app, I get this:</p>\n\n<pre><code>No matching factory method found: factory method 'aspectOf()'. Check that a method with the specified name exists and that it is static.\n</code></pre>\n\n<p>I am quite dumbfounded as I am pretty sure this config worked fine before. What is more this is a Spring Roo project so all the aspectJ config should be fine.</p>\n\n<p>Can anyone please help?</p>\n"},{"tags":["java","spring","tomcat","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":45,"score":3,"question_id":13052542,"title":"Is a parallel Spring-MVC application possible with a non-spring web app?","body":"<p>I have a Tomcat application pretty huge. Very ctitical to the business (real money making). But it is legacy Java code. Meaning, JSP (with a lot of Javascript, Java code), Servlets (with thousands of lines of code) and so on. We want to get away from this crappy code. Now a request has come for another application (different purpose, different functionality). We need it at another context root /NewApp lets say under the legacy application directory structure. Like a mini-site. It will have a different URL, could even be serving a few virtual hosts. </p>\n\n<p>We dont want to extend the Legacy code. We want to move to better technologies and better way of doing things. We are strongly for Spring (tiles, jackson etc. etc.) and all the things it has to offer including portlets. So, we are thinking of possibilities of bringing in DispatcherServlet/ContextLoaderListener/configLocation etc into the legacy app web.xml and have a spring app side by side. </p>\n\n<p>The main reason is the new app has serious dependencies on the legacy services and libraries.</p>\n\n<ol>\n<li>Is this peaceful coexistance possible? </li>\n<li>What are the challenges that we could possibly face? </li>\n<li>Can you please point us to any example configurations?</li>\n</ol>\n\n<p>We cant separate them out unfortunately. Appreciate your insight into this.</p>\n\n<p>Thank you!! </p>\n"},{"tags":["java","xml","spring"],"answer_count":9,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":10412,"score":3,"question_id":827071,"title":"Best book/ tutorial to learn/implement web services using java, xml and spring","body":"<p>I am a newbie to web-services. What is a good way to learn web-services implementation using java, xml and spring? Are there any good books which cover this topic in good width?\nOr, are there any online resources, tutorials, etc.?</p>\n\n<p>Also, what would be good projects to understand this hands-on?</p>\n\n<p>Any recommendations>?</p>\n"},{"tags":["java","spring","jsp","spring-mvc","jsp-tags"],"answer_count":7,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":8182,"score":2,"question_id":4219166,"title":"Can not find the tag library descriptor of springframework","body":"<p>I'm trying to follow the example of spring JPetStore but I get an error in the JSP pages in the line that references the lib tag spring:</p>\n\n<p><strong>Can not find the tag library descriptor for \"http://www.springframework.org/tags\"</strong></p>\n\n<pre><code>&lt;%@ taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\" %&gt;\n</code></pre>\n\n<p>What is the URL of this library?</p>\n\n<p>Is there any way to avoid the direct dependence on this URL?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["ajax","spring","url","parameters","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13049182,"title":"How to pass a URL as a parameter to a Spring 3.1 controller","body":"<p>This is fairly straightforward.  I need to pass a url to my controller from my front end through an AJAX call, ie \"http://www.x.com/some/path\".  Spring controllers interpret portions of the path as variables, with \"/\" delineating, so this obviously doesn't work:  \"http://myserver.com/myapp/controller/http://www.x.com/some/path\".</p>\n\n<p>So my question is, how can I get that value to my controller?</p>\n\n<p>Edit: I'm using Dojo 1.8 on my front end.</p>\n"},{"tags":["java","xml","spring","resttemplate"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":13038529,"title":"Force Spring RestTemplate to use XmlConverter","body":"<p>We are integrating with a third party that is sending xml with the content-type header as text/html. We were planning on using Spring's RestTemplate to map it to classes we've generated from xsds, but the RestTemplate fails to find an appropriate converter to use for the content. The third party refuses to fix the content-type because it might break other partner's integration.</p>\n\n<p>Is there a way with Spring's RestTemplate to force it to use a specific converter?\nWe are basically just doing the following:</p>\n\n<pre><code>RestTemplate restTemplate = new RestTemplate();\nXmlClass xmlClass = restTemplate.getForObject(\"http://example.com/\", XmlClass.class);\n</code></pre>\n\n<p>And get the following exception:</p>\n\n<blockquote>\n  <p>org.springframework.web.client.RestClientException: Could not extract\n  response: no suitable HttpMessageConverter found for response type\n  [XmlClass] and content type [text/html;charset=ISO-8859-1]    at\n  org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:84)</p>\n</blockquote>\n"},{"tags":["spring","annotations"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13042226,"title":"Cannot autowire 2 Configuration beans of the same type","body":"<p>I have two GenericHandlerResolver beans that are defined in HandlerConfiguration.java like:</p>\n\n<pre><code>@Bean(autowire = Autowire.BY_NAME)\n@Scope(value = \"prototype\")\npublic GenericHandlerResolver defaultHandlerResolver() {\n    return new GenericHandlerResolver(){{\n        setHandlers(new ArrayList&lt;Handler&gt;(){{\n            add(loggingHandler());\n            add(sessionHandler());\n        }});\n    }};\n}\n\n@Bean(autowire = Autowire.BY_NAME)\n@Scope(value = \"prototype\")\npublic GenericHandlerResolver maskingHandlerResolver() {\n    return new GenericHandlerResolver(){{\n        setHandlers(new ArrayList&lt;Handler&gt;(){{\n            add(maskingLoggingHandler());\n            add(sessionHandler());\n        }});\n    }};\n}\n</code></pre>\n\n<p>Then I want to Autowire two different beans into WebServiceConfiguration.java and use them in several dozen JaxWsPortProxyFactoryBean beans like:</p>\n\n<pre><code>@Configuration\npublic class WebServiceConfiguration {\n...\n\npublic Integer paymentServiceTimeout;\n@Bean @DependsOn(\"applicationProperties\")\npublic Map&lt;String, Object&gt; paymentServiceProperties(){\n    return new HashMap&lt;String, Object&gt;(){\n        {put(timeoutKey, paymentServiceTimeout);}\n    };\n}\n\n...\n// Logging handler resolver:    \n/*@Autowired\nprotected GenericHandlerResolver defaultHandlerResolver;*/\n\n// Logging handler resolver that will mack Credit Cards:\n@Autowired\nprotected GenericHandlerResolver maskingHandlerResolver;\n\n...\n\n@Bean\n@Lazy\n@DependsOn(\"applicationProperties\")\npublic JaxWsPortProxyFactoryBean paymentServicePort() throws Exception {\n    JaxWsPortProxyFactoryBean jppfb = new JaxWsPortProxyFactoryBean() {{\n        setServiceInterface(PaymentServicePortType.class);\n        setWsdlDocumentUrl(new URL(paymentServiceEndpoint + \"?wsdl\"));\n        setServiceName(\"PaymentService\");\n        setEndpointAddress(paymentServiceEndpoint);\n        setCommonProperties(this,\n                paymentServiceProperties(),\n                maskingHandlerResolver,\n                LEGACY_NAMESPACE);\n    }};\n    jppfb.afterPropertiesSet();\n    return jppfb;\n}\n\nprotected void setCommonProperties(JaxWsPortProxyFactoryBean bean,\n                                   Map&lt;String, Object&gt; customProperties,\n                                   GenericHandlerResolver handlerResolver,\n                                   String namespace) {\n    bean.setMaintainSession(false);\n    bean.setLookupServiceOnStartup(false);\n    bean.setCustomProperties(customProperties);\n    bean.setHandlerResolver(handlerResolver);\n    bean.setNamespaceUri(namespace);\n}\n</code></pre>\n\n<p>My issue is that this works in XML config, but now that I move this to javaConfig, if I have more than one GenericHandlerResolver in WebServiceConfiguration.java, the handler does not work (no logging), but I dont get any error messages so I dont know what is happening.</p>\n"},{"tags":["java","facebook","spring","spring-mvc","social-networking"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":42,"score":-4,"question_id":13052643,"title":"Login with facebook. Something similar to stack login page","body":"<p>I am building a website which will go live soon.</p>\n\n<p>I do not want to have a user registration form. I want the user to login through facebook.\nVery similar to what we have on the stack overflow login page.</p>\n\n<p>we i logged in this website, i logged in thru facebook..</p>\n\n<p>i want the same feature on my website.</p>\n\n<p>i searched a lot online but couldnt find anything.</p>\n\n<p>I am building my website in Spring framework. so i would like spring references.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","web-applications","jasper-reports"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13028592,"title":"Error instantiating extensions registry for chart.theme [SOLVED]","body":"<p>I'm trying to generate a <em>PDF</em> with <em>JasperReports</em>.</p>\n\n<p>At the first time I try, I get this error:</p>\n\n<pre><code>ERROR [net.sf.jasperreports.extensions.DefaultExtensionsRegistry] Error instantiating extensions registry for chart.theme \nfrom vfszip:My-App.ear/lib/jasperreports-chart-themes-4.7.0.jar/jasperreports_extension.properties\norg.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: \nFailed to import bean definitions from relative location [defaultChartPropertiesBean.xml]\nOffending resource: URL \n[My-App.ear/lib/jasperreports-chart-themes-4.7.0.jar/net/sf/jasperreports/chartthemes/spring/beans/chartThemesBeans.xml];\nnested exception is org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: \nFailed to import bean definitions from relative location [chartConstantsBean.xml]\nOffending resource: URL \n[My-App.ear/lib/jasperreports-chart-themes-4.7.0.jar/net/sf/jasperreports/chartthemes/spring/beans/defaultChartPropertiesBean.xml]; \nnested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from URL \n[My-App.ear/lib/jasperreports-chart-themes-4.7.0.jar/net/sf/jasperreports/chartthemes/spring/beans/chartConstantsBean.xml];\nnested exception is org.springframework.beans.FatalBeanException: \nClass [org.springframework.beans.factory.xml.UtilNamespaceHandler] for namespace \n[http://www.springframework.org/schema/util] does not implement the [org.springframework.beans.factory.xml.NamespaceHandler] interface\nat org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)\nat org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)\nat org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)\nat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:219)\nat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:148)\nat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:133)\nat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)\nat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)\nat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)\nat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\nat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\nat org.springframework.beans.factory.xml.XmlBeanFactory.&lt;init&gt;(XmlBeanFactory.java:73)\nat org.springframework.beans.factory.xml.XmlBeanFactory.&lt;init&gt;(XmlBeanFactory.java:61)\nat net.sf.jasperreports.extensions.SpringExtensionsRegistryFactory.getBeanFactory(SpringExtensionsRegistryFactory.java:101)\n</code></pre>\n\n<p>However, the <em>PDF</em> is generated without any problem.</p>\n\n<p>Plus, the next time I try to generate one <em>PDF</em>, no more errors. This only occurs on the first generation.</p>\n\n<p>What is a reason? And how I can avoid this error?</p>\n"},{"tags":["java","spring","hibernate","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13051090,"title":"Spring, Hibernate and AbstractTransactionalJUnit4SpringContextTests: objects with multiple mappings to same underlying data cannot be found","body":"<p>I have successfully created numerous database-related unit tests for a Spring 2.5.6/Hibernate 3.5.3 project using <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/context/junit4/AbstractTransactionalJUnit4SpringContextTests.html\" rel=\"nofollow\">AbstractTransactionalJUnit4SpringContextTests</a>. One example, where a Device object is created and then verified that the same object is included in the list of all Device objects:</p>\n\n<pre><code>@ContextConfiguration(locations = { \"classpath:/UnitTests-context.xml\" })\n@RunWith(SpringJUnit4ClassRunner.class)\npublic class DeviceDaoTests extends AbstractTransactionalJUnit4SpringContextTests {\n\n    @Test\n    public void testGetDeviceList() {\n        Device device = new Device();\n        this.sessionFactory.getCurrentSession().merge(device);\n\n        Query myQuery = this.sessionFactory.getCurrentSession().createQuery(\"from Device\");\n        List&lt;Device&gt; allDevices = myQuery.list();\n        assertTrue(allDevices.contains(device);\n    }\n}\n</code></pre>\n\n<p>This test works.</p>\n\n<p>The Device class, which is mapped to a table named DEVICES:</p>\n\n<pre><code>@Entity\n@Table(name = \"DEVICES\")\npublic class Device {\n\n//properties omitted for brevity and readability\n\n}\n</code></pre>\n\n<p>There is also a class named DeviceListItem, which is mapped to a database view named DEVICESLIST_VIEW containing parts of the DEVICES table (as well as other tables):</p>\n\n<pre><code>@Entity\n@Table(name = \"DEVICESLIST_VIEW\")\npublic class DeviceListItem {\n\n//properties omitted for brevity and readability\n\n}\n</code></pre>\n\n<p>Now if I want to test that inserting a Device in the database results in a DeviceListItem with the same id being found from the list of all DeviceListItem  objects (similarily to the first test), there is a problem - the following test fails:</p>\n\n<pre><code>   @Test\n   public void testGetDeviceListItemList() {\n      Device device = new Device();\n      this.sessionFactory.getCurrentSession().merge(device);\n\n      Query myQuery = this.sessionFactory.getCurrentSession().createQuery(\"from DeviceListItem\");\n      List&lt;DeviceListItem&gt; allDeviceListItems = myQuery.list();\n      assertTrue(allDeviceListItems.get(0).getId().equals(device.getId())\n  }\n</code></pre>\n\n<p>All the mappings, DAO classes etc. work when running the application on the web server - only the aforementioned unit test fails. This is probably because a new object of type Device is saved, but the items read are of type DeviceListItem and Hibernate does not \"know\" that they both refer to the same underlying database table and becase the objects are not really saved to the database.</p>\n\n<p>Is there a way to make this test work, i.e. to test the scenario where a Device object is written to the database and read from the database as a DeviceListItem object?</p>\n\n<p>(Please note that there might by typos, style issues etc. in the code examples, as the examples are strongly simplified and are not necessarily copy/pasted from actually executed code)</p>\n"},{"tags":["java","spring","hibernate","transactions","spring-transactions"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13051204,"title":"Spring transaction REQUIRED vs REQUIRES_NEW : Rollback Transaction","body":"<p>I have a method that have the <code>propagation = Propagation.REQUIRES_NEW</code> transactional property:</p>\n\n<pre><code>@Transactional(propagation = Propagation.REQUIRES_NEW)\npublic void createUser(final UserBean userBean) {\n    //Some logic here that requires modification in DB\n}\n</code></pre>\n\n<hr>\n\n<p>This method can be called multiple times simultaneously, and for every transaction if an error occurs than it's rolled back (independently from the other transactions).</p>\n\n<p>The problem is that this might force Spring to create multiple transactions, even if another one is available, and may cause some performance problems.</p>\n\n<hr>\n\n<p>Java doc of <code>propagation = Propagation.REQUIRED</code> says: <code>Support a current transaction, create a new one if none exists.</code></p>\n\n<p>This seems to solve the performance problem, doesn't it?</p>\n\n<p>What about the rollback issue ? What if a new method call rolls back while using an existing transaction ? won't that rollback the whole transaction even the previous calls ?</p>\n\n<p><strong>[EDIT]</strong>\nI guess my question wasn't clear enough:</p>\n\n<p>We have hundreds of clients connected to our server. </p>\n\n<p>For each client we naturally need to send a feedback about the transaction (OK or exception -> rollback). </p>\n\n<p>My question is: if I use <code>REQUIRED</code>, does it mean only one transaction is used, and if the 100th client encounters a problem the 1st client's transaction will rollback as well ?</p>\n"},{"tags":["java","spring","hibernate","jpa-2.0"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":905,"score":1,"question_id":6843198,"title":"JPA/Hibernate remove all in Entity","body":"<p>I have this Entity Class</p>\n\n<pre><code>public class Entity {\n\n    @Id \n    @Column(name=\"ID\")\n    private int id;\n\n    @OneToMany(mappedBy=\"flusso\", cascade=CascadeType.ALL, orphanRemoval=true)\n    private List&lt;Cron&gt; listCron;\n\n    //getter and setter Method\n}\n</code></pre>\n\n<p>and in my Dao Class i have this method</p>\n\n<pre><code>(...)\n    @Transactional\n    public void removeAll(Entity entity) throws PersistenceDaoException {\n        try {\n            final Class&lt;? extends Object&gt; paramClass = entity.getClass();\n            String nameClass = paramClass.getSimpleName();\n            Query q = em.createQuery (\"DELETE FROM \" + nameClass);\n            int del = q.executeUpdate ();\n            if (del == 1){\n                System.out.println(\"risultato:\" + del);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n(...)\n</code></pre>\n\n<p>I do a simple test and i have this problem:</p>\n\n<pre><code>javax.persistence.TransactionRequiredException: Executing an update/delete query\n    at org.hibernate.ejb.AbstractQueryImpl.executeUpdate(AbstractQueryImpl.java:96)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:310)\n    at $Proxy24.executeUpdate(Unknown Source)\n    at it.synclab.fb.jpa.dao.impl.GenericDaoImpl.removeAll(GenericDaoImpl.java:138)\n    at it.synclab.fb.jpa.dao.impl.FlussoDaoImpl.removeAll(FlussoDaoImpl.java:143)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)\n    at $Proxy22.removeAll(Unknown Source)\n    at it.synclab.fb.jpa.test.FlussoDaoTest.main(FlussoDaoTest.java:30)\n</code></pre>\n\n<p>This method is marked with @Transactional, where am I doing wrong?</p>\n\n<p>PS:This is my applicationContext.xml:</p>\n\n<pre><code>&lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"fb-persistence\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt; \n        &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt; \n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n\n    &lt;bean class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n\n\n    &lt;bean name=\"entityDaoImpl\" class=\"it.synclab.fb.jpa.dao.impl.EntityDaoImpl\" /&gt;\n</code></pre>\n"},{"tags":["java","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13052212,"title":"ReloadingPropertyPlaceholderConfigurer","body":"<p>For some reason the ReloadablePropertiesFactoryBean doens't seem to do what I expect. When I change a property in the test.properties file I get a log message saying:</p>\n\n<pre><code>9979 [timer] INFO com.krest.core.properties.ReloadablePropertiesFactoryBean - Reloading Properties...\n</code></pre>\n\n<p>But for some reason nothing happens. The old property value is still set on my test bean. Does anybody know why this is? I use Spring 3 and my configuration looks like this:</p>\n\n<pre><code>&lt;bean id=\"configproperties\"\n    class=\"com.krest.core.properties.ReloadablePropertiesFactoryBean\"&gt;\n    &lt;property name=\"location\"\n        value=\"classpath:test.properties\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"propertyConfigurer\"\n    class=\"com.krest.core.properties.ReloadingPropertyPlaceholderConfigurer\"&gt;\n    &lt;property name=\"properties\" ref=\"configproperties\" /&gt;\n    &lt;property name=\"reloadingPlaceholderPrefix\" value=\"rel{\" /&gt;\n    &lt;property name=\"reloadingPlaceholderSuffix\" value=\"}\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"mybean\" class=\"nl.mycompany.TestBean\"&gt;\n    &lt;property name=\"message\" value=\"rel{timer-delay}\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- regularly reload property files. --&gt;\n&lt;bean id=\"timer\" class=\"org.springframework.scheduling.timer.TimerFactoryBean\"&gt;\n    &lt;property name=\"scheduledTimerTasks\"&gt;\n        &lt;bean id=\"reloadProperties\"\n            class=\"org.springframework.scheduling.timer.ScheduledTimerTask\"&gt;\n            &lt;property name=\"period\" value=\"1000\" /&gt;\n            &lt;property name=\"runnable\"&gt;\n                &lt;bean class=\"com.krest.core.properties.ReloadConfiguration\"&gt;\n                    &lt;property name=\"reconfigurableBeans\"&gt;\n                        &lt;list&gt;\n                            &lt;ref bean=\"configproperties\" /&gt;\n                        &lt;/list&gt;\n                    &lt;/property&gt;\n                &lt;/bean&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","web-services","spring","asynchronous","aspectj"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13051569,"title":"Spring request scope in an async service? Implement ThreadScope over threadLocal variable, plus an AsyncAspect to clean up","body":"<p>I've a web service that starts a series of action. All these actions started from the same request are sharing an <em>actionContext</em> that contains some locks and some other information.</p>\n\n<p>Until now this <em>actionContext</em> object is injected by Spring in all the actions using a '<em>Request</em>' scope.</p>\n\n<p>Now I'm implementing a web socket service to be able to follow the evolution of these actions.<br>\nThe webService will now have to spawn a thread that handles the actions execution and return the webSocket address to the calling application/user.</p>\n\n<p>The action has been implemented using the @async annotation of spring and will run in a pool of thread as defined in the application context.</p>\n\n<p><strong>THE PROBLEM:</strong><br>\nWith this new functionality the '<em>request</em>' scope doesn't work any more, since the spawned thread is not a request (Spring will block the execution).</p>\n\n<p>What is the best solution to handle this problem?</p>\n\n<ul>\n<li>Implement my <strong>Thread scope</strong> to handle the <em>actionContext</em> and inject it correctly in all the actions?</li>\n<li>Pass the <em>actionContext</em> everywhere manually (in my opinion it doesn't look nice)</li>\n<li>Implement a webService that instantiate a webSocket and request the caller to call this as first and then pass its reference to the real webService?</li>\n</ul>\n\n<p>Thanks for the help!</p>\n"},{"tags":["spring","xml-namespaces","illegalargumentexception"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12991093,"title":"java.lang.IllegalArgumentException: Prefix '' is already bound to ''","body":"<p><strong>sun-jaxws.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;endpoints version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/jax-ws/ri/runtime\"&gt;\n  &lt;endpoint implementation=\"ways.org.commerce.inventory.service.InventoryServiceImpl\" name=\"InventoryServiceImpl\" url-pattern=\"/services/InventoryServiceImpl\"/&gt;\n&lt;/endpoints&gt;\n</code></pre>\n\n<p><strong>web.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"2.5\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;classpath:applicationContext-Main.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;com.sun.xml.ws.transport.http.servlet.WSServletContextListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;InventoryServiceImpl&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;com.sun.xml.ws.transport.http.servlet.WSServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;InventoryServiceImpl&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/services/InventoryServiceImpl&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;session-config&gt;\n        &lt;session-timeout&gt;\n            30\n        &lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p><strong>InventoryServiceImpl.java</strong></p>\n\n<pre><code>@WebService(serviceName = \"InventoryServiceImpl\")\npublic class InventoryServiceImpl implements IFInventoryService {\n\n    private IFInventoryDAO inventoryDAO;\n\n    @WebMethod(exclude = true)\n    public IFInventoryDAO getInventoryDAO() {\n        return inventoryDAO;\n    }\n\n    @WebMethod(exclude = true)\n    public void setInventoryDAO(IFInventoryDAO inventoryDAO) {\n        this.inventoryDAO = inventoryDAO;\n    }\n\n    @WebMethod(operationName = \"addProduct\")\n    public void addProduct(\n            @WebParam(name = \"product\") ProductBean product) throws CommerceBaseException {\n        if (inventoryDAO.productExists(product.getProductUniqueCode())) {\n            throw new CommerceBaseException(\"Product Not Found\", InventoryErrorCode.PRODUCT_NOT_FOUND_ERROR);\n        }\n        inventoryDAO.addProduct(product);\n    }\n\n    @WebMethod(operationName = \"getProduct\")\n    public ProductBean getProduct(\n            @WebParam(name = \"productUniqueCode\") String productUniqueCode) throws CommerceBaseException {\n        if (inventoryDAO.productExists(productUniqueCode)) {\n            throw new CommerceBaseException(\"Product Not Found\", InventoryErrorCode.PRODUCT_NOT_FOUND_ERROR);\n        }\n        return inventoryDAO.getProduct(productUniqueCode);\n    }\n\n    @WebMethod(operationName = \"productExists\")\n    public boolean productExists(\n            @WebParam(name = \"productUniqueCode\") String productUniqueCode) {\n        return inventoryDAO.productExists(productUniqueCode);\n    }\n}\n</code></pre>\n\n<p><strong>I am getting following exception</strong></p>\n\n<pre><code>SEVERE: Exception sending context initialized event to listener instance of class com.sun.xml.ws.transport.http.servlet.WSServletContextListener\ncom.sun.xml.ws.transport.http.servlet.WSServletException: WSSERVLET11: failed to parse runtime descriptor: java.lang.IllegalArgumentException: Prefix '' is already bound to ''\n    at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:139)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4681)\n    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5184)\n    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5179)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662)\nCaused by: java.lang.IllegalArgumentException: Prefix '' is already bound to ''\n    at com.sun.xml.txw2.StartTag.addNamespaceDecl(StartTag.java:171)\n    at com.sun.xml.txw2.ContainerElement._namespace(ContainerElement.java:313)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at com.sun.xml.txw2.ContainerElement.invoke(ContainerElement.java:114)\n    at $Proxy179._namespace(Unknown Source)\n    at com.sun.xml.ws.wsdl.writer.WSDLGenerator.generateDocument(WSDLGenerator.java:339)\n    at com.sun.xml.ws.wsdl.writer.WSDLGenerator.doGeneration(WSDLGenerator.java:272)\n    at com.sun.xml.ws.server.EndpointFactory.generateWSDL(EndpointFactory.java:443)\n    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:209)\n    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:505)\n    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:253)\n    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:147)\n    at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:124)\n    ... 8 more\n20 Oct, 2012 11:17:18 PM org.apache.catalina.core.ApplicationContext log\nINFO: Closing Spring root WebApplicationContext\n</code></pre>\n\n<p>Please help me to figure out where i am doing mistake...</p>\n"},{"tags":["spring","continuous-integration","cobertura","autoproxy"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13051651,"title":"Creating BeanFactoryPostProcessor to enable DefaultAdvisorProxyCreator","body":"<p>I'm having an issue in my development environment that's being caused by Cobertura Instrumented classes in ANT.  Because of the way some of the service classes are injected, I need to enable AutoProxying by class.  I can do this easily with  in one of my test Spring configuration files.  </p>\n\n<p>This works fine.  The problem is that running the unit tests within eclipse, I don't need this.  And the CGLib seems to be causes memory errors on my machine.  I've made memory adjustments to eclipse that make the problem a little more manageable, but what I really want to do is enable the autoproxy only when I'm in the CI environment.</p>\n\n<p>I've created a custom BeanFactoryPostProcessor that, depending on system variable, should enable auto proxying.  But it doesn't seem to work.  The code I've ended up with is here:</p>\n\n<pre><code>    private void enableClassProxy(ConfigurableListableBeanFactory beanFactory){\nlogger.trace(\"Executing post process method: enableClassProxy!\");\ntry{\n    if (! StringUtils.isBlank(enableClassProxy)){\n        DefaultAdvisorAutoProxyCreator aopProxyCreator = new DefaultAdvisorAutoProxyCreator();\n\n        aopProxyCreator.setProxyTargetClass(true);\n        aopProxyCreator.setBeanFactory(beanFactory);\n            beanFactory.addBeanPostProcessor(aopProxyCreator);\n\n\n            logger.info(\"Enabling Class Auto Proxy\");\n    }\n}catch(Exception e){\n    //Problems loading the context should not prevent the continued execution of the application\n    logger.warn(\"Unable to forceAutoProxyCreator for the application context!\");\n}\n}\n</code></pre>\n\n<p>It runs as expected when I add system properties in the CI environment, but it does not autoproxy as expected.  I still receive exceptions: \"Can not set [class] field [class] to $ProxyN\"</p>\n\n<p>Does anyone have any ideas as to how I might be able to enable class auto proxy only in the CI environment?</p>\n\n<p>We do have plans to create the interfaces which is why I thought I could quickly create a BeanPostProcessor to do the trick.</p>\n"},{"tags":["java","spring","events","architecture","jms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13051281,"title":"Architecture event driven advice","body":"<p>Lately I have upgraded my application work in an event driven architecture using Spring3.1</p>\n\n<p>I was wonder what do you think:</p>\n\n<ol>\n<li><p>having a DAO instance in each class which has the need of inserting/updating/etc record in the DB.(regular way) </p></li>\n<li><p>shall I send messages to DAO(via jms/channels/whatever) and the message's content will be the instructions of what I should do (inserting/updating/etc record in the DB)</p></li>\n</ol>\n\n<p>how way number 2 is good in a loose coupling manners?</p>\n\n<p>maybe it's overkill ?</p>\n\n<p>this or any other suggestions or advice are welcome.</p>\n\n<p>thanks.\nray.</p>\n"},{"tags":["spring","file-upload","multipart"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":106,"score":1,"question_id":13050333,"title":"Upload File issue with spring 3 - MultipartException , connection reset","body":"<p>I got a form belonging to a web app that contains a \"file\" field to upload a pdf file.( spring 3 environment, multipart file upload)\nUploading file works fine in test environnement (all browsers), and only works with Firefox in production environment (file upload cause connection reset exception with low internet connection client browser especially) </p>\n\n<p>The following exception is thrown a few seconds after submit button is pressed : ( browser is IE/Chrome running in windows environment but not Firefox)</p>\n\n<pre><code>org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is org.apache.commons.fileupload.FileUploadBase$IOFileUploadException: Processing of multipart/form-data request failed. null\n    at org.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:162)\n    at org.springframework.web.multipart.commons.CommonsMultipartResolver.resolveMultipart(CommonsMultipartResolver.java:138)\n    at org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:887)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:750)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:162)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at fr.ifma.utils.FiltreUTF8.doFilter(FiltreUTF8.java:21)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)\n    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)\n    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)\n    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)\n    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)\n    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)\n    at java.lang.Thread.run(Thread.java:662)\nCaused by: org.apache.commons.fileupload.FileUploadBase$IOFileUploadException: Processing of multipart/form-data request failed. null\n    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:371)\n    at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:126)\n    at org.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:155)\n    ... 38 more\nCaused by: java.io.IOException\n    at org.apache.jk.common.JkInputStream.receive(JkInputStream.java:205)\n    at org.apache.jk.common.JkInputStream.refillReadBuffer(JkInputStream.java:265)\n    at org.apache.jk.common.JkInputStream.doRead(JkInputStream.java:183)\n    at org.apache.coyote.Request.doRead(Request.java:427)\n    at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:304)\n    at org.apache.tomcat.util.buf.ByteChunk.substract(ByteChunk.java:419)\n    at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:327)\n    at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:193)\n    at org.apache.commons.fileupload.MultipartStream$ItemInputStream.makeAvailable(MultipartStream.java:976)\n    at org.apache.commons.fileupload.MultipartStream$ItemInputStream.read(MultipartStream.java:886)\n    at java.io.InputStream.read(InputStream.java:82)\n    at org.apache.commons.fileupload.util.Streams.copy(Streams.java:96)\n    at org.apache.commons.fileupload.util.Streams.copy(Streams.java:66)\n    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:366)\n    ... 40 more\n24 oct. 2012 10:40:38 org.apache.jk.core.MsgContext action\nATTENTION: Unable to send headers\njava.net.SocketException: Broken pipe\n    at java.net.SocketOutputStream.socketWrite0(Native Method)\n    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\n    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)\n    at org.apache.jk.common.ChannelSocket.send(ChannelSocket.java:539)\n    at org.apache.jk.common.JkInputStream.appendHead(JkInputStream.java:324)\n    at org.apache.jk.core.MsgContext.action(MsgContext.java:266)\n    at org.apache.coyote.Response.action(Response.java:183)\n    at org.apache.coyote.Response.sendHeaders(Response.java:379)\n    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:314)\n    at org.apache.catalina.connector.OutputBuffer.close(OutputBuffer.java:274)\n    at org.apache.catalina.connector.CoyoteWriter.close(CoyoteWriter.java:108)\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:394)\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\n    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)\n    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:162)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at fr.ifma.utils.FiltreUTF8.doFilter(FiltreUTF8.java:21)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)\n    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)\n    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)\n    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)\n    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)\n    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)\n    at java.lang.Thread.run(Thread.java:662)\n24 oct. 2012 10:40:38 org.apache.jk.common.ChannelSocket processConnection\n</code></pre>\n\n<p>Here is the web app code and configuration : </p>\n\n<p>spring multipart resolver  configuration : \n    \n        \n        \n    </p>\n\n<p>Controller : </p>\n\n<pre><code>/**      \n * this controller handles file upload and save files to dao.\n     * @author Christophe.Dumonet@ifma.fr\n     * @param request\n * @param documentFormBean\n * @param result\n * @param file\n * @return\n */\n@RequestMapping(value = \"/save\", method = RequestMethod.POST)\npublic ModelAndView save(HttpServletRequest request,\n        @Valid DocumentFormBean documentFormBean,BindingResult result,\n        @RequestParam(\"file\") MultipartFile file) {\n    ResourceBundle bundle = ResourceBundle.getBundle(\"messages\", request.getLocale());\n\n    Map&lt;String,Object&gt; map = new HashMap&lt;String, Object&gt;();\n\n    map.put(\"documentFormBean\", new DocumentFormBean());\n    map.put(\"documentList\", documentDao.findAllForaDepot(Long.parseLong((String) request.getParameter(\"depot\"))));\n    map.put(\"depot\", depotDao.find(Long.parseLong((String) request.getParameter(\"depot\"))));\n\n    //Handle too many documents attached : how many documents attached to this depot now ? throw an error to UI.\n    @SuppressWarnings(\"rawtypes\")\n    List documentAttached = documentDao.findAllForaDepot(Long.parseLong((String) request.getParameter(\"depot\")));\n    if (documentAttached != null &amp;&amp; documentAttached.size() &gt;= Integer.parseInt(SpringPropertiesUtil.getProperty(\"Depot.maximum.file.number.authorized\"))){\n        map.put(\"MaximumFileNumberReached\", bundle.getString(\"Depot.maximum.file.number.errormessage\"));\n        return new ModelAndView(\"ajoutDocumentsRapport\", map);\n    }\n\n    //handle file empty or not pdf\n    if (result.hasErrors() || (file.isEmpty()) || !file.getContentType().contains(\"pdf\")) {\n        map.put(\"errors\", result);\n\n        if (file.isEmpty()) map.put(\"ErrorMessageFileEmpty\", bundle.getString(\"view.addrapport.error.fileisempty\"));\n\n        if (!file.getContentType().contains(\"pdf\")) map.put(\"ErrorMessageFileTypeNotPDF\", bundle.getString(\"view.addrapport.error.filetype.onlypdf\"));\n        return new ModelAndView(\"ajoutDocumentsRapport\", map);\n    } else{\n\n\n    try {\n        //Blob blob = Hibernate.createBlob(file.getInputStream());\n        //cause Hibernate.createBlob is deprecated, use a LobHelper interface instead.\n        org.hibernate.Session se = (org.hibernate.Session)depotDao.getHibernateTemplate().getSessionFactory().getCurrentSession();\n        LobHelper lh = se.getLobHelper();\n        Blob blob = lh.createBlob(file.getBytes());\n\n        Document newDocument = new Document();\n        newDocument.setDescription(documentFormBean.getDescription());\n        newDocument.setContentType(file.getContentType());\n        newDocument.setFilename(file.getOriginalFilename());\n        newDocument.setContent(blob);\n        newDocument.setDepot(depotDao.find(Long.parseLong((String) request.getParameter(\"depot\"))));\n        documentDao.save(newDocument);\n        map.put(\"documentList\", documentDao.findAllForaDepot(Long.parseLong((String) request.getParameter(\"depot\"))));\n        } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return new ModelAndView(\"ajoutDocumentsRapport\",map);\n    }\n}\n</code></pre>\n\n<p>Tomcat 6 AJP connector  connector configuration :\n(Original configuration was : )</p>\n\n<pre><code>&lt;Connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\"/&gt;\n</code></pre>\n\n<p>(also tried with this one : )</p>\n\n<pre><code>&lt;Connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\"\n             connectionTimeout=\"120000\" maxThreads=\"1000\"\n            minSpareThreads=\"50\" maxSpareThreads=\"100\" enableLookups=\"false\"\n            acceptCount=\"150\" address=\"127.0.0.1\"\n            useBodyEncodingForURI=\"true\"\n            compression=\"on\"\n            compressionMinSize=\"1024\"\n            compressableMimeType=\"text/html,text/xml\"\n            connectionUploadTimeout=\"3600000\"\n            disableUploadTimeout=\"true\"\n    /&gt;\n</code></pre>\n\n<p>Apache 2 virtual host configuration :</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerAdmin webmaster@localhost\n    DocumentRoot /var/www\n    Timeout 3600\n    ProxyPass / ajp://localhost:8009/\n    ProxyPassReverse / ajp://localhost:8009/\n    ProxyTimeout 3600\n\n    &lt;Proxy *&gt;\n    Order deny,allow\n    Allow from all\n    &lt;/Proxy&gt;\n\n    &lt;Directory /var/www/&gt;\n            Options -Indexes FollowSymLinks MultiViews\n            AllowOverride None\n            Order allow,deny\n            allow from all\n    &lt;/Directory&gt;\n\n     ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/\n     ErrorLog ${APACHE_LOG_DIR}/error.log\n     LogLevel warn\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Html form : </p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\npageEncoding=\"ISO-8859-1\"%&gt;\n&lt;%@taglib uri=\"http://java.sun.com/jsp/jstl/core\" prefix=\"c\"%&gt;\n&lt;%@taglib uri=\"http://www.springframework.org/tags/form\" prefix=\"form\"%&gt;\n&lt;%@taglib uri=\"http://www.springframework.org/tags\" prefix=\"spring\"%&gt;\n&lt;%@ taglib uri=\"http://java.sun.com/jsp/jstl/functions\" prefix=\"fn\"%&gt;\n&lt;%@ taglib uri=\"http://displaytag.sf.net\" prefix=\"display\"%&gt;\n&lt;%@ taglib uri=\"http://java.sun.com/jsp/jstl/fmt\" prefix=\"fmt\"%&gt;\n&lt;%@ page isELIgnored=\"false\" %&gt;\n\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\"&gt;\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;base\nhref=\"&lt;%=request.getScheme() + \"://\" + request.getServerName()\n                + \":\" + request.getServerPort() + request.getContextPath()\n                + \"/\"%&gt;\" /&gt;\n\n&lt;link href=\"css/style1.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"css/style.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link type=\"text/css\" rel=\"stylesheet\" href=\"css/solid.css\" /&gt;\n&lt;link type=\"text/css\" rel=\"stylesheet\" href=\"css/errors.css\" /&gt;\n&lt;script type=\"text/javascript\" src=\"script/jquery-1.6.2.min.js\"&gt;&lt;/script&gt; \n&lt;script type=\"text/javascript\" src=\"script/jquery.validate.js\"&gt;&lt;/script&gt;\n\n&lt;/head&gt;\n&lt;body&gt;  \n\n&lt;form:form id=\"myform\" method=\"post\" action=\"save.html\" commandName=\"documentFormBean\" enctype=\"multipart/form-data\"&gt;\n\n&lt;c:set var=\"depot\" value=\"${depot.id}\" scope=\"session\" /&gt;\n&lt;input type=\"hidden\" name=\"depot\" value=\"${depot.id}\" /&gt; \n&lt;table id=\"gradient-style\"&gt;\n    &lt;tr&gt;\n        &lt;th colspan=\"8\"&gt;&lt;h3&gt;Fichiers joints au rapport&lt;/h3&gt;\n        &lt;/th&gt;\n    &lt;/tr&gt;\n\n    &lt;tr&gt;&lt;td&gt;-&gt;Ajouter un document&lt;/td&gt;\n        &lt;td&gt;&lt;form:textarea path=\"description\" /&gt;\n        &lt;br/&gt;\n         &lt;span style=\"color:red\"&gt;*&lt;/span&gt;description du fichier\n        &lt;form:errors path=\"description\" cssClass=\"error\" /&gt;\n        &lt;/td&gt;\n        &lt;td colspan=\"3\"&gt;\n        &lt;input type=\"file\" name=\"file\" /&gt;\n        &lt;br/&gt;&lt;span class=\"error\" &gt;${ErrorMessageFileEmpty}&lt;/span&gt;\n        &lt;br/&gt;&lt;span class=\"error\" &gt;${ErrorMessageFileTypeNotPDF}&lt;/span&gt;\n        &lt;br/&gt;&lt;span class=\"error\" &gt;${MaximumFileNumberReached}&lt;/span&gt;\n        &lt;/td&gt;\n        &lt;td colspan=\"3\"&gt;&lt;input type=\"submit\" id=\"upload\" value=\"Ajouter le document\" /&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr &gt; &lt;td colspan=\"8\"&gt; &lt;div style=\"color:red\"&gt;Attention : le document doit comporter obligatoirement une description et un fichier PDF (taille maximum : 20Mo) &lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;\n    &lt;tr &gt; &lt;td colspan=\"8\"&gt; &lt;div &gt;Note : Si vous le déposant n'est pas autorisé à publier son rapport pour des raisons de confidentialité, déposer simplement la page de garde en pdf du rapport &lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;span class=\"error\"&gt;${msg}&lt;/span&gt;\n\n    &lt;c:if test=\"${!empty documentList}\"&gt;    \n    Liste des documents associés au rapport : \n    &lt;table id=\"gradient-style\"&gt;\n    &lt;tr&gt;\n        &lt;th&gt;Description&lt;/th&gt;\n        &lt;th&gt;Nom du fichier&lt;/th&gt;\n        &lt;th&gt;type de contenu&lt;/th&gt;\n        &lt;th&gt;T&amp;eacute;l&amp;eacute;charger&lt;/th&gt;\n        &lt;th&gt;Supprimer&lt;/th&gt;\n    &lt;/tr&gt;\n\n\n    &lt;c:forEach items=\"${documentList}\" var=\"document\"&gt;\n        &lt;tr&gt;\n\n            &lt;td width=\"250px\"&gt;${document.description}&lt;/td&gt;\n            &lt;td width=\"250px\"&gt;${document.filename}&lt;/td&gt;\n            &lt;td width=\"250px\"&gt;${document.contentType}&lt;/td&gt;\n            &lt;td width=\"20px\"&gt;&lt;a\n                href=\"${pageContext.request.contextPath}/download/${document.id}.html\"\n                target=\"_blank\"&gt;&lt;img\n                    src=\"${pageContext.request.contextPath}/images/save-icon.jpg\"\n                    width=\"20px\" height=\"20px\"\n                    border=\"0\" title=\"Download this document\" /&gt;T&amp;eacute;l&amp;eacute;charger&lt;/a&gt;\n            &lt;/td&gt;\n            &lt;td width=\"20px\"&gt;&lt;a\n                href=\"${pageContext.request.contextPath}/remove/document/${document.id}/depot/${depot.id}.html\"\n                onclick=\"return confirm('Etes vous certain de vouloir supprimer ce fichier ?')\"&gt;&lt;img\n                    width=\"20px\" height=\"20px\" src=\"${pageContext.request.contextPath}/images/delete-icon.jpg\"\n                    border=\"0\" title=\"Delete this document\" /&gt;Supprimer&lt;/a&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/c:forEach&gt;\n\n\n    &lt;/table&gt;\n    &lt;/c:if&gt;\n    &lt;script&gt;\n    function disp_warning()\n    {\n      alert(\"Vous devez ajouter au moins un document SVP !\")\n    }\n    &lt;/script&gt;\n    &lt;table id=\"gradient-style\"&gt;\n        &lt;tr&gt;\n        &lt;th colspan=\"6\"&gt;\n            &lt;c:choose&gt;\n                 &lt;c:when test=\"${fn:length(documentList) gt 0}\"&gt;\n                    &lt;button type=\"button\" onclick=\"location.href='endAdd.html'\"&gt;&lt;spring:message code=\"application.add.end.title\"/&gt;  &lt;/button&gt;\n                &lt;/c:when&gt;\n                &lt;c:otherwise&gt;\n                    &lt;button type=\"button\" onclick=\"disp_warning()\"&gt;&lt;spring:message code=\"application.add.end.title\"/&gt;&lt;/button&gt;\n                &lt;/c:otherwise&gt;\n            &lt;/c:choose&gt;\n        &lt;/th&gt;\n    &lt;/tr&gt;\n\n    &lt;/table&gt;\n&lt;/form:form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>What could be the possible reasons for this exception?<br>\nConnection reset on file upload usually means the client aborted sending...so what ?\nAny Help would be appreciate.\nChristophe D.</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13035225,"title":"How to use a Spring @Value from properties to set an annotation attribute","body":"<p>I'm trying to set an attribute in an annotation, using Spring <code>@Value</code>, but I get <code>Type mismatch: cannot convert from Value to String</code>. Here is what I tried:</p>\n\n<pre><code>@Table(name = \"myTable\", catalog = @Value(\"${database.myCatalog}\") )\n</code></pre>\n\n<p>Is it possible? And if yes, how to do it?</p>\n"},{"tags":["java","spring","spring-remoting","httpinvoker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12968281,"title":"Spring HTTP invoker waits one second before processing next request","body":"<p>I have set up an spring http invoker example as described here <a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html\" rel=\"nofollow\">http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html</a> in section 20.4</p>\n\n<p>If i do several service calls in a row (see my for-loop), between the single calls is one second though the server processes the method in less than 4ms.</p>\n\n<p>Any ideas.</p>\n\n<p>Stefan</p>\n\n<p>Here the config and call:</p>\n\n<pre><code>&lt;!-- server side --&gt;\n&lt;bean name=\"configurationServiceExporter\"\nclass=\"org.springframework.remoting.httpinvoker.SimpleHttpInvokerServiceExporter\"&gt;\n    &lt;property name=\"service\" ref=\"configurationService\" /&gt;\n    &lt;property name=\"serviceInterface\"\n        value=\"remote.service.ConfigurationService\" /&gt;\n&lt;/bean&gt;\n&lt;bean id=\"httpServer\"\n    class=\"org.springframework.remoting.support.SimpleHttpServerFactoryBean\"&gt;\n    &lt;property name=\"contexts\"&gt;\n        &lt;util:map&gt;\n                    &lt;entry key=\"/remoting/ConfigurationService\" value-ref=\"configurationServiceExporter\" /&gt;\n                    &lt;/util:map&gt;\n    &lt;/property&gt;\n    &lt;property name=\"port\" value=\"${port.httpinvoker}\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- client side --&gt;\n&lt;bean id=\"configurationServiceProxy\"     class=\"org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean\"&gt;\n    &lt;property name=\"serviceUrl\"\n        value=\"http://localhost:7777/remoting/ConfigurationService\" /&gt;\n    &lt;property name=\"serviceInterface\"\n        value=\"remote.service.ConfigurationService\" /&gt;\n&lt;/bean&gt;\n\n/** here the service call*/\n@Component\npublic class ServiceConsumer {\n\nprivate ConfigurationService configurationService;\n\npublic void do(){\n for (int i = 0; i &lt; 10; i++) \n    this.configurationService.getConfigurationValue(SMTP_HOST);\n}\n</code></pre>\n"},{"tags":["spring","spring-mvc","converter","formatter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13048368,"title":"Difference between Spring MVC formatters and converters","body":"<p>I would need some clarification regarding the <strong>difference</strong> between Spring MVC <strong>formatters</strong> and <strong>converters</strong>.</p>\n\n<p>My understanding of the main difference between them is that the <strong>formatter works on data that is going to be displayed to the end user</strong> such as a date, SSN or credit card number <strong>whereas the converter works on data hidden behind form controls</strong> such as the value attribute of an select's option.</p>\n\n<p>Am I right or wrong? Can someone please provide advice and/or samples in order to better explain the difference between the two.</p>\n"},{"tags":["spring","struts2","web.xml"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13032639,"title":"Freemarker template (FTL) not working in struts2","body":"<p>I am working with Struts2 and ftl. Instead of jsp I want to use ftl, but when I define welcome file in web.xml as login.ftl it is not working. It just shown as text. The entire code is shown in the browser, but if it is jsp everything works.</p>\n\n<p>I just paste my web.xml below.    </p>\n\n<pre><code>&lt;filter&gt;\n&lt;filter-name&gt;struts2&lt;/filter-name&gt;\n&lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n&lt;filter-name&gt;struts2&lt;/filter-name&gt;\n&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n\n&lt;context-param&gt;\n&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;listener&gt;\n&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;welcome-file-list&gt;\n&lt;welcome-file&gt;login.ftl&lt;/welcome-file&gt;\n&lt;/welcome-file-list&gt;\n</code></pre>\n\n<p>How can I configure ftl in Struts2? If I use that same page as output page of an action it is working. How can I solve this? Is there any problem with my web.xml configuration?? Please help me. Thank you in advance.</p>\n"},{"tags":["jquery","json","spring","rest","spring-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3908,"score":1,"question_id":7481055,"title":"Sending JSON Data to Server Error","body":"<p>I want to sent a JSON data to my controller's POST handler. I do that at my client side:</p>\n\n<pre><code>var userName = $('#userName').val();\nvar password = $('#password').val();\nvar mail = $('#mail').val();\nvar admin =$(\"#admin\").is(':checked');\nvar user = {userName: userName, password: password, mail: mail, admin:admin};\n\n$.ajax({\n   async : false,\n   type:'POST',\n   url: '/uxiy/webapp/uxmer',\n   data: user,\n   dataType: 'json',\n   success: function(data) {\n       ...\n   },\n   error: function(data) {\n       ...\n   }\n});\n</code></pre>\n\n<p>My Spring controller as follows:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.POST)\npublic void createUser(HttpServletResponse response, @RequestBody User user) {\n    user.setName(\"POST worked\");\n    //todo If error occurs response.sendError(HttpServletResponse.SC_NOT_FOUND);\n    response.setStatus(HttpServletResponse.SC_OK);\n}\n</code></pre>\n\n<p>However when I send my data I get that error at Firebug:</p>\n\n<blockquote>\n  <p>\"NetworkError: 415 Unsupported Media Type\"</p>\n</blockquote>\n\n<p>What is wrong?</p>\n\n<p><strong>PS:</strong>\nAn example of Firebug POST details:</p>\n\n<pre><code>Parameters  application/x-www-form-urlencoded\nadmin   true\nmail    user@user.com\npassword    r\nuserName    userx\nSource\nuserName=userx&amp;password=r&amp;mail=user%40user.com&amp;admin=true\n</code></pre>\n\n<p><strong>PS2:</strong>\nAfter I added </p>\n\n<pre><code>contentType: 'application/json',\n</code></pre>\n\n<p>it started to give </p>\n\n<pre><code>\"NetworkError: 400 Bad Request\" \n</code></pre>\n\n<p>What can be the problem, making serialization, etc?</p>\n\n<p><strong>PS3:</strong>\nHere: <a href=\"http://blog.springsource.com/2010/01/25/ajax-simplifications-in-spring-3-0/\" rel=\"nofollow\">http://blog.springsource.com/2010/01/25/ajax-simplifications-in-spring-3-0/</a> it says: </p>\n\n<blockquote>\n  <p>If there are validation errors, a HTTP 400 is returned with the\n  error messages, otherwise a HTTP 200 is returned.</p>\n</blockquote>\n\n<p>I have 400 Bad Request Error. Maybe the problem is related to that?</p>\n"},{"tags":["java","oracle","spring","stored-procedures","jdbc"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":13048365,"title":"Batch executing of stored procedure with Spring JDBC API","body":"<p>Is it possible to execute stored procedure using Spring JDBC API in batch mode?</p>\n\n<p>I tried to use Spring JdbcTemplate's method batchUpdate and it doesn't work.\nI use Spring 3.0 and Oracle JDBC driver version 11.2.0.3</p>\n\n<pre><code>   JdbcTemplate template = new JdbcTemplate(dataSource);\n\n    template.batchUpdate(\"BEGIN SCHEMA.PERSON_UPDATE(I_N_PERSON_ID=&gt; ?  ,I_S_NAME=&gt; ?  ,J_N_TID=&gt; ?);END;\", \n                new BatchPreparedStatementSetter() {\n                    public void setValues(PreparedStatement ps, int i) throws SQLException {\n                        OracleCallableStatement cs = (OracleCallableStatement) ps;\n                        cs.setString(1, persons.get(i).getName());\n                        cs.setLong(2, persons.get(i).getPersonId());\n                        cs.registerOutParameter(3, OracleTypes.NUMBER);\n                    }\n\n                    public int getBatchSize() {\n                        return persons.size();\n                    }} \n                );\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["spring","spring-mvc","spring-security"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13033473,"title":"POST not supported","body":"<p>I had a loginform previously which looked like following</p>\n\n<pre><code>&lt;div class=\"span-10 last\"&gt;\n    &lt;c:url value=\"/j_spring_security_check\" var=\"loginActionUrl\" /&gt;\n    &lt;user:login   actionNameKey=\"login.login\" action=\"${loginActionUrl}\"/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>but now i changed the form to looks like following.</p>\n\n<pre><code>&lt;div class=\"span-10 last\"&gt;\n    &lt;c:url value=\"/login/loginNow\" var=\"loginActionUrl\" /&gt;\n    &lt;user:login actionNameKey=\"login.login\" action=\"${loginActionUrl}\"/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My controller looks like this now </p>\n\n<pre><code>@Controller\n@RequestMapping(value = \"/login\")\npublic class LoginPageController {\n    @RequestMapping(value = \"/loginNow\", method = RequestMethod.POST)\n    public String doLogin(\n        @RequestHeader(value = \"referer\", required = false) final String referer,\n        @Valid final LoginForm loginForm, final BindingResult bindingResult,\n        final Model model, final HttpServletRequest request,\n        final HttpServletResponse response) throws CMSItemNotFoundException {\n\n        if (somethingMissing) {\n            return to login page.\n        }\n\n        return FORWARD_PREFIX + \"/j_spring_security_check\";\n\n    }\n}\n</code></pre>\n\n<p>But now i am getting Request method post not supported. I don't know why..? How can i rectify the mistake..\nThanks</p>\n"},{"tags":["spring","aspectj"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13047636,"title":"<context:load-time-weaver/> dynamically","body":"<p>I am looking for a way to enable aspectJ load time weaving dynamically, say based on whether a JNDI property is true.</p>\n\n<p>Basically, (context:load-time-weaver) have this tag conditionally.</p>\n\n<p>Any quick way to do this?</p>\n"},{"tags":["java","spring","portlet","dozer"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":13030020,"title":"Dozer mapping: NoSuchMethodException","body":"<p>I'm trying to convert one type to another, using dozer mappings. I've defined some beans like these:</p>\n\n<pre><code>public class OneBean extends TwoBean {\n\n    private static final long serialVersionUID = 1L;\n\n    public OneBean() {\n    }\n\n    private Short idOne;\n\n   public final Short getIdOne() {\n        return idOne;\n    }\n\n    public final void setIdOne(Short idOne) {\n        this.idOne = idOne;\n    }\n}\n\n\npublic class TwoBean extends ThreeBean{\n\n    private static final long serialVersionUID = 1L;\n\n    public TwoBean() {\n    }\n\n    private Short idTwo;\n\n   public final Short getIdTwo() {\n        return idTwo;\n    }\n\n    public final void setIdTwo(Short idTwo) {\n        this.idTwo = idTwo;\n    }\n}\npublic class ThreeBean  {\n\n    private static final long serialVersionUID = 1L;\n\n    public ThreeBean() {\n    }\n\n    private Short idThree;\n\n    public final Short getIdThree() {\n        return idThree;\n    }\n\n    public final void setIdThree(Short idThree) {\n        this.idThree = idThree;\n    }\n}\n\npublic class OneTypeBean extends TwoTypeBean {\n\n    private static final long serialVersionUID = 1L;\n\n\n    public OneTypeBean() {\n    }\n\n    private Short idOne;\n\n    public final Short getIdOne() {\n        return idOne;\n    }\n\n    public final void setIdOne(Short idOne) {\n        this.idOne = idOne;\n    }\n}\n\n\npublic class TwoTypeBean {\n\n    private static final long serialVersionUID = 1L;\n\n    public TwoTypeBean() {\n    }\n\n    private Short idTwo;\n    private Short idThree;\n\n    public final Short getIdTwo() {\n        return idTwo;\n    }\n\n    public final void setIdTwo(Short idTwo) {\n        this.idTwo = idTwo;\n    }\n\n\n\n    public final Short getIdThree() {\n        return idThree;\n    }\n\n    public final void setIdThree(Short idThree) {\n        this.idThree = idThree;\n    }\n\n}\n</code></pre>\n\n<p>And the dozer file is like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;mappings xmlns=\"http://dozer.sourceforge.net\"\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xsi:schemaLocation=\"\n        http://dozer.sourceforge.net \n        http://dozer.sourceforge.net/schema/beanmapping.xsd\"&gt;\n\n    &lt;mapping&gt;\n        &lt;class-a&gt;mypackage.TwoTypeBean&lt;/class-a&gt;\n        &lt;class-b&gt;mypackage.TwoBean&lt;/class-b&gt;\n        &lt;field&gt;\n            &lt;a&gt;idTwo&lt;/a&gt;\n            &lt;b&gt;idTwo&lt;/b&gt;\n        &lt;/field&gt;\n        &lt;field&gt;\n            &lt;a&gt;idThree&lt;/a&gt;\n            &lt;b&gt;idThree&lt;/b&gt;\n        &lt;/field&gt;\n    &lt;/mapping&gt;\n    &lt;mapping&gt;\n        &lt;class-a&gt;mypackage.OneTypeBean&lt;/class-a&gt;\n        &lt;class-b&gt;mypackage.OneBean&lt;/class-b&gt;\n        &lt;field&gt;\n            &lt;a&gt;idOne&lt;/a&gt;\n            &lt;b&gt;idOne&lt;/b&gt;\n        &lt;/field&gt;\n    &lt;/mapping&gt;\n&lt;/mappings&gt;     \n</code></pre>\n\n<p>Then, I'm trying to convert a OneBean object in OneTypeBean object, like this:</p>\n\n<pre><code>private OneTypeBean convertBeanToType(TwoBean twoBean) {\n\n    if (twoBean instanceof OneBean) { \n        //OneBean one = (OneBean) twoBean;\n        return convert(twoBean, OneTypeBean.class);\n    }\n}\n</code></pre>\n\n<p>All seems ok to me (may be a problem with the hierarchy??), but, I found this error:</p>\n\n<pre><code>    [#|2012-10-23T12:45:45.542+0000|INFO|sun-appserver2.1|javax.enterprise.system.stream.out|_ThreadID=32;_ThreadName=httpSSLWorkerThread-8080-4;|un.enterprise.web.connector.grizzly.DefaultProcessorTask.process(DefaultProcessorTask.java:872)\n    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.executeProcessorTask(DefaultReadTask.java:341)\n    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:263)\n    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:214)\n    at com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:264)\n    at com.sun.enterprise.web.connector.grizzly.ssl.SSLWorkerThread.run(SSLWorkerThread.java:106)\nCaused by: org.dozer.MappingException: java.lang.NoSuchMethodException: [B.&lt;init&gt;()\n    at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:82)\n    at org.dozer.factory.ConstructionStrategies$ByConstructor.newInstance(ConstructionStrategies.java:261)\n    at org.dozer.factory.ConstructionStrategies$ByConstructor.create(ConstructionStrategies.java:245)\n    at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:65)\n    at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:477)\n    at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:434)\n    at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:330)\n    at org.dozer.MappingProcessor.mapField(MappingProcessor.java:276)\n    at org.dozer.MappingProcessor.map(MappingProcessor.java:245)\n    at org.dozer.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:999)\n    at org.dozer.MappingProcessor.map(MappingProcessor.java:234)\n    at org.dozer.MappingProcessor.map(MappingProcessor.java:187)\n    at org.dozer.MappingProcessor.map(MappingProcessor.java:124)\n    at org.dozer.MappingProcessor.map(MappingProcessor.java:119)\n    at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:111)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)\n    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:362)\n    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.doHandle(AnnotationMethodHandlerAdapter.java:349)\n    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.handleAction(AnnotationMethodHandlerAdapter.java:283)\n    at org.springframework.web.portlet.DispatcherPortlet.doActionService(DispatcherPortlet.java:641)\n    at org.springframework.web.portlet.FrameworkPortlet.processRequest(FrameworkPortlet.java:519)\n    at org.springframework.web.portlet.FrameworkPortlet.processAction(FrameworkPortlet.java:460)\n    at com.sun.portal.portletcontainer.appengine.PortletAppEngineServlet.service(PortletAppEngineServlet.java:264)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)\n    at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:427)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:333)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)\n    at com.sun.portal.portletcontainer.appengine.PortletAppEngineFilter.doFilter(PortletAppEngineFilter.java:105)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)\n    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:871)\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:723)\n    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:679)\n    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:594)\n    at com.sun.portal.portletcontainer.impl.PortletContainer.invokePAE(PortletContainer.java:819)\n    at com.sun.portal.portletcontainer.impl.PortletContainer.invokePAE(PortletContainer.java:694)\n    at com.sun.portal.portletcontainer.impl.PortletContainer.executeAction(PortletContainer.java:339)\n    at com.liferay.portal.portletcontainer.WindowInvoker.invokeAction(WindowInvoker.java:267)\n    at com.liferay.portlet.InvokerPortletImpl.processAction(InvokerPortletImpl.java:357)\n    at com.liferay.portal.action.LayoutAction.processPortletRequest(LayoutAction.java:591)\n    at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:419)\n    ... 96 more\nCaused by: java.lang.NoSuchMethodException: [B.&lt;init&gt;()\n    at java.lang.Class.getConstructor0(Class.java:2706)\n    at java.lang.Class.getDeclaredConstructor(Class.java:1985)\n    at org.dozer.factory.ConstructionStrategies$ByConstructor.newInstance(ConstructionStrategies.java:257)\n    ... 146 more\n\n|#]\n</code></pre>\n\n<p>I don't know what else could I do, I can't find the mistake. Any help..? Thanks!</p>\n\n<p>Edit:</p>\n\n<p>As I see in <a href=\"http://dozer.sourceforge.net/documentation/baseattributes.html\" rel=\"nofollow\">http://dozer.sourceforge.net/documentation/baseattributes.html</a> , maybe I should changue my dozer to something like this...</p>\n\n<p>Still not working, but working in progress...</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;mappings xmlns=\"http://dozer.sourceforge.net\"\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xsi:schemaLocation=\"\n        http://dozer.sourceforge.net \n        http://dozer.sourceforge.net/schema/beanmapping.xsd\"&gt;\n\n    &lt;mapping&gt;\n        &lt;class-a&gt;mypackage.TwoTypeBean&lt;/class-a&gt;\n        &lt;class-b&gt;mypackage.ThreeBean&lt;/class-b&gt;\n        &lt;field&gt;\n            &lt;a&gt;idThree&lt;/a&gt;\n            &lt;b&gt;idThree&lt;/b&gt;\n        &lt;/field&gt;\n    &lt;/mapping&gt;\n    &lt;mapping&gt;\n        &lt;class-a&gt;mypackage.OneTypeBean&lt;/class-a&gt;\n        &lt;class-b&gt;mypackage.OneBean&lt;/class-b&gt;\n        &lt;field&gt;\n            &lt;a&gt;idTwo&lt;/a&gt;\n            &lt;b&gt;idTwo&lt;/b&gt;\n        &lt;/field&gt;\n        &lt;field&gt;\n            &lt;a&gt;idOne&lt;/a&gt;\n            &lt;b&gt;idOne&lt;/b&gt;\n        &lt;/field&gt;\n    &lt;/mapping&gt;\n&lt;/mappings&gt; \n</code></pre>\n"},{"tags":["spring","hibernate","sessionfactory"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13047716,"title":"Spring + Hibernate4 Error CurrentSessionContext is always null","body":"<p>I'm using Hibernate 4 with spring 3.1 in a simple java Apllication.</p>\n\n<p>I use the following code to create  the Spring SessionFactory and then convert it into a hibernate SessionFactory:\npls waht is missing here ... Is this the right way to go?? Or do I miss something..? pls help!</p>\n\n<pre><code>.....\n......\ncontext=new ClassPathXmlApplicationContext(new String[]{\"spring.xml\"});\n    return (SessionFactory) context.getBean(\"mySessionFactory\");\n......\n</code></pre>\n\n<p>The CurrentSessionContext ofthe sessionfactory is always null!\nSo I cant execute</p>\n\n<pre><code>sessionFactory.getcurrentSession() \n</code></pre>\n\n<p>-> gives me an java.lang.NullPointer Exception</p>\n\n<p>myBean Declarations in spring.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\"&gt;\n\n\n\n &lt;bean id=\"myDataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\"&gt;\n    &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"/&gt;\n    &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/test\"/&gt;\n    &lt;property name=\"username\" value=\"root\"/&gt;\n    &lt;property name=\"password\" value=\"\"/&gt;\n  &lt;/bean&gt;\n\n      &lt;bean id=\"mySessionFactory\"  name=\"mySessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\" scope=\"singleton\"&gt;\n        &lt;property name=\"dataSource\" ref=\"myDataSource\"/&gt;\n        &lt;property name=\"mappingResources\"&gt;\n\n          &lt;list&gt;\n            &lt;value&gt;TblUrls.hbm.xml&lt;/value&gt;\n          &lt;/list&gt;\n        &lt;/property&gt;\n         &lt;property name=\"hibernateProperties\"&gt;\n             &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt; \n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt; \n                &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/prop&gt; \n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt; \n                &lt;prop key=\"hibernate.transaction.jta.platform\"&gt;org.hibernate.service.jta.platform.internal.SunOneJtaPlatform&lt;/prop&gt;\n                &lt;prop key=\"hibernate.current_session_context_class\"&gt;org.springframework.orm.hibernate4.SpringSessionContext&lt;/prop&gt;\n              &lt;/props&gt;\n        &lt;/property&gt;\n      &lt;/bean&gt;\n   &lt;bean class=\"org.springframework.orm.hibernate4.support.OpenSessionInViewInterceptor\"&gt;\n        &lt;property name=\"sessionFactory\"&gt;\n            &lt;ref local=\"mySessionFactory\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id = \"transactionManager\" class = \"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n        &lt;property name = \"sessionFactory\" ref = \"mySessionFactory\" /&gt;\n\n    &lt;/bean&gt;\n&lt;!--   &lt;bean id=\"myProductDao\" class=\"hib.TblUrlsHome\"&gt; --&gt;\n&lt;!--     &lt;property name=\"sessionFactory\" ref=\"mySessionFactory\"/&gt; --&gt;\n&lt;!--   &lt;/bean&gt; --&gt;\n\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["spring","hibernate"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":165,"score":1,"question_id":10556368,"title":"How to use group_concat in Hibernate + Spring","body":"<p>How can I use <code>addSqlFunction()</code> in spring when I configured hibernate with hibernate.cfg.xml file? Or is there any other way to use group_concat?</p>\n"},{"tags":["java","jquery","spring","http-get","httpsession"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":13015583,"title":"Why isn't getSession() returning the same session in subsequent requests distanced in short time periods?","body":"<p>I am sending a <code>$.getJSON</code> (HTTP GET) request twice (with different data), one after another (lets say we have request1 and request2). I can see in the developer tools from FF and Chrome that I have the same <code>cookie:JSESSIONID=FD0D502635EEB67E3D36203E26CBB59A</code> header field.  </p>\n\n<p>On the server side I try to get the session:  </p>\n\n<pre><code>HttpSession session = request.getSession();\nboolean isSessionNew = session.isNew();\nString sessionId = session.getId();\nString cookieFromRequestHeader = request.getHeader(\"cookie\");\n</code></pre>\n\n<p>If I print these variables for both requests I get,<br>\nrequest1:  </p>\n\n<blockquote>\n  <p>isSessionNew:true<br>\n  cookieFromRequestHeader:JSESSIONID=FD0D502635EEB67E3D36203E26CBB59A<br>\n  session.getId():9212B14094AB92D0F7F10EE21F593E52</p>\n</blockquote>\n\n<p>request2:  </p>\n\n<blockquote>\n  <p>isSessionNew:true<br>\n  cookieFromRequestHeader:JSESSIONID=FD0D502635EEB67E3D36203E26CBB59A<br>\n  session.getId(): E8734E413FA3D3FEBD4E38A7BF27BA58</p>\n</blockquote>\n\n<p><strong>As you can see, the server clearly created a new session for request2 on a <code>request.getSession()</code>. But why does it do this? It should theoretically be synchronized and give you the same session that the first request (that reached this code first) created.</strong> Now, to be sure that the session creation is synchronized I did the following:  </p>\n\n<pre><code>@Autowired\nprivate ServletContext servletContext;\n...\nsynchronized (servletContext) {\n    HttpSession session = request.getSession();\n    boolean isSessionNew = session.isNew();\n    String sessionId = session.getId();\n    String cookieFromRequestHeader = request.getHeader(\"cookie\");\n}\n</code></pre>\n\n<p>and I got the same results.  </p>\n\n<p>If I send the same requests later again (lets say request1' and request2') I get,<br>\nrequest1':  </p>\n\n<blockquote>\n  <p>isSessionNew:false<br>\n  cookieFromRequestHeader:JSESSIONID=E8734E413FA3D3FEBD4E38A7BF27BA58 \n  session.getId():E8734E413FA3D3FEBD4E38A7BF27BA58</p>\n</blockquote>\n\n<p>request2':  </p>\n\n<blockquote>\n  <p>isSessionNew:false<br>\n  cookieFromRequestHeader:JSESSIONID=E8734E413FA3D3FEBD4E38A7BF27BA58<br>\n  session.getId():E8734E413FA3D3FEBD4E38A7BF27BA58  </p>\n</blockquote>\n\n<p><strong>If you see closely now, the session id is the same (in request1' and request2') and is the last one created from the request2. Is there a way of me getting the same session from multiple subsequent requests that come to the server in very short time frames?</strong>  </p>\n\n<p>I am not using any special features - I am using Spring's out of the box session strategy. Also, it looks like the cookie JSESSIONID from the frist 2 requests (request1 and request2) come from the first time I visit the page (lets say there was a request0 sent to the server when it created this JSESSIONID). But it also looks like unless you explicitly call request.getSession(), the backend/server will always create a new JSESSIONID for every response and send it back to the client. So when a new request is sent from the client after a response comes, its going to have a new JSESSIONID. It looks like Spring out of the box session handling is not working appropriately.</p>\n\n<p>Kind Regards,<br>\ndespot</p>\n\n<p><strong>ADDITIONAL RESEARCH</strong>:  </p>\n\n<p>I wanted to see if I can register the session creation with a HttpSessionListner. This way I can see when the session with id FD0D502635EEB67E3D36203E26CBB59A (the cookie that is being sent in request1 and request2) is created. And also, weather using the listener (the SessionProcessor) I can store the sessions in a map by id and later on retrieve them by the id from the cookie (so I don't need to create another session).<br>\nSo here is the code:  </p>\n\n<pre><code>public interface ISessionProcessor extends ISessionRetriever, ISessionPopulator {\n}\n\npublic interface ISessionRetriever {\n\n    HttpSession getSession(String sessionId);\n}\n\npublic interface ISessionPopulator {\n\n    HttpSession setSession(String sessionId, HttpSession session);\n}\n</code></pre>\n\n<p>The reason for separating these was because I only wanted to allow the listener to add sessions to the map, and the controllers only to be able to create a session through request.getSession() - so the listner's sessionCreated method was invoked always (as you'll see below).  </p>\n\n<pre><code>public class SessionProcessor implements ISessionProcessor {\n\n    private Map&lt;String, HttpSession&gt; sessions = new HashMap&lt;String, HttpSession&gt;();\n\n    @Override\n    public HttpSession getSession(String sessionId) {\n            return sessions.get(sessionId);\n    }\n\n    @Override\n    public HttpSession setSession(String sessionId, HttpSession session) {\n            return sessions.put(sessionId, session);\n    }\n\n}\n\npublic class SessionRetrieverHttpSessionListener implements HttpSessionListener {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(SessionRetrieverHttpSessionListener.class);\n\n    @Autowired\n    private ISessionPopulator sessionPopulator;\n\n    @Override\n    public void sessionCreated(HttpSessionEvent se) {\n            HttpSession session = se.getSession();\n            LOGGER.debug(\"Session with id {} created. MaxInactiveInterval: {} session:{}\", new Object[]{session.getId(), session.getMaxInactiveInterval(), session});\n            sessionPopulator.setSession(session.getId(), session);\n    }\n\n    @Override\n    public void sessionDestroyed(HttpSessionEvent se) {\n            HttpSession session = se.getSession();\n            // session has been invalidated and all session data (except Id) is no longer available\n            LOGGER.debug(\"Session with id {} destroyed. MaxInactiveInterval: {}, LastAccessedTime: {}, session:{}\", \n                            new Object[]{session.getId(), session.getMaxInactiveInterval(), session.getLastAccessedTime(), session});\n    }\n}  \n</code></pre>\n\n<p>in web.xml:\n    \n        org.springframework.web.context.ContextLoaderListener\n    </p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/spring/my-servlet-context.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;mypackage.listener.SessionRetrieverHttpSessionListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>in my-servlet-context.xml:</p>\n\n<pre><code>&lt;bean class=\"mypackage.listener.SessionProcessor\"/&gt;\n&lt;bean class=\"mypackage.SomeController\"/&gt;\n</code></pre>\n\n<p>in my controller:</p>\n\n<pre><code>                    synchronized (servletContext) {\n                            String cookieFromRequestHeader = request.getHeader(\"cookie\");\n                            LOG.debug(\"cookieFromRequestHeader:{}\", new Object[] {cookieFromRequestHeader});\n                            String jsessionIdFromCookieFromRequestHeader = cookieFromRequestHeader.substring(cookieFromRequestHeader.indexOf(\"=\") + 1);\n                            LOG.debug(\"jsessionIdFromCookieFromRequestHeader:{}\", new Object[] {jsessionIdFromCookieFromRequestHeader});\n                            session = sessionRetriever.getSession(jsessionIdFromCookieFromRequestHeader);\n                            LOG.debug(\"session:{}\", new Object[] {session});\n                            if (session == null) {\n                            LOG.debug(\"request.isRequestedSessionIdFromCookie():{}, request.isRequestedSessionIdFromURL():{}, WebUtils.getSessionId(request):{}.\", new Object[] {request.isRequestedSessionIdFromCookie(), request.isRequestedSessionIdFromURL(), WebUtils.getSessionId(request)});\n                            session = request.getSession();\n                            boolean isSessionNew = session.isNew();\n                            LOG.debug(\"Is session new? - {}. The session should not be new after the first fingerprint part is received - check if this occured in the logs - if that happend than there is an error!\", isSessionNew);\n                            LOG.debug(\"request.isRequestedSessionIdFromCookie():{}, request.isRequestedSessionIdFromURL():{}, WebUtils.getSessionId(request):{}.\", new Object[] {request.isRequestedSessionIdFromCookie(), request.isRequestedSessionIdFromURL(), WebUtils.getSessionId(request)});\n                            //read http://stackoverflow.com/a/2066883 and think about using ServletContextAware also.\n                            LOG.debug(\"cookieFromRequestHeader:{} session.getId(): {}\", new Object[]{cookieFromRequestHeader, session.getId()});\n                            }\n                    }\n</code></pre>\n\n<p>This gave me the same results. It appeared that the session creation by means other than request.getSession (when spring itself out of box created the session), was either not registered by the listener or the cookie/jsessionID came from somewhere else. Look the answer for more.</p>\n\n<p>Other <strong>sources</strong> that helped me go through the HttpSession issues:<br>\n<a href=\"http://stackoverflow.com/questions/2066843/get-web-app-root-from-spring-controller/2066883#2066883\">servlet context injection in controller</a><br>\n<a href=\"http://www.ibm.com/developerworks/library/j-jtp09238/index.html\" rel=\"nofollow\">overview of concurrency when you have to work with HttpSession</a><br>\n<a href=\"http://stackoverflow.com/questions/1820629/using-request-getsession-as-a-locking-object\">using HttpSession object to do synchronization (avoid this)</a><br>\n<a href=\"http://stackoverflow.com/questions/9802165/is-synchronization-within-an-httpsession-feasible/9802428#9802428\">the \"best\" way to do synchronization when working with HttpSession</a><br>\nsome spring reference stuff:<br>\n<a href=\"http://static.springsource.org/spring-security/site/docs/3.1.x/reference/session-mgmt.html\" rel=\"nofollow\">session management</a><br>\n<a href=\"http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#Session%20Management\" rel=\"nofollow\">session management in security</a><br>\ndiscussions on how to get session when you have a sessionId (what I did above):<br>\n<a href=\"http://www.coderanch.com/t/365859/Servlets/java/session-object-session-ID\" rel=\"nofollow\">coderanch discussion</a><br>\n<a href=\"http://stackoverflow.com/questions/1499581/how-can-i-manually-load-a-java-session-using-a-jsessionid/1499625#1499625\">stackoverflow</a><br>\n<a href=\"http://www.mkyong.com/spring/spring-how-to-do-dependency-injection-in-your-session-listener/\" rel=\"nofollow\">the post that helped me finalize my listener autowiring</a></p>\n"},{"tags":["java","sql","spring","mybatis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13046625,"title":"Mybatis one-to-many collection mapping always have one default entity","body":"<p>I want to rewrite our services to use mybatis mapping and joins to have our entity full and completed on database/mybatis layer.</p>\n\n<pre><code>&lt;resultMap id=\"ParentMap\" type=\"org.example.mybatis.Parent\"&gt;\n    &lt;id column=\"id\" jdbcType=\"VARCHAR\" property=\"id\" /&gt;\n    &lt;id column=\"Name\" jdbcType=\"VARCHAR\" property=\"name\" /&gt;\n    &lt;id column=\"SurName\" jdbcType=\"VARCHAR\" property=\"surName\" /&gt;\n\n    &lt;collection property=\"childs\" column=\"ChildId\"\n        javaType=\"ArrayList\" ofType=\"org.example.mybatis.Child\"\n        resultMap=\"org.example.ChildMap\" /&gt;    \n&lt;/resultMap&gt;\n\n&lt;resultMap id=\"ChildMap\" type=\"org.example.mybatis.Parent\"&gt;\n\n    &lt;id column=\"id\" jdbcType=\"VARCHAR\" property=\"id\" /&gt;\n    &lt;id column=\"Name\" jdbcType=\"VARCHAR\" property=\"name\" /&gt;\n    &lt;id column=\"SurName\" jdbcType=\"VARCHAR\" property=\"surName\" /&gt;\n    &lt;id column=\"Age\" jdbcType=\"INTEGER\" property=\"age\" /&gt;\n&lt;/resultMap&gt;\n\n&lt;sql id=\"Parent_Column_List\"&gt;\n    p.Id, p.Name, p.SurName,\n&lt;/sql&gt;  \n\n&lt;sql id=\"Child_Column_List\"&gt;\n    c.Id, c.ParentId c.Name, c.SurName, c.Age\n&lt;/sql&gt;  \n\n&lt;select id=\"getParent\" parameterType=\"java.lang.String\" resultMap=\"ParentMap\" &gt;\n    select \n    &lt;include refid=\"Parent_Column_List\"/&gt;\n\n    &lt;include refid=\"Child_Column_List\" /&gt;\n    from Parent p\n\n    left outer join Child c on p.Id = c.ParentId\n    where p.id = #{id,jdbcType=VARCHAR}\n</code></pre>\n\n<p></p>\n\n<p>Problem is next: if parent doesn't has childs, some default entity with null or default fields will be added to list.\nI understand that this is nature of outer join, but is mybatis not very clever to understand that this is fake? </p>\n\n<p>Is there some workaround about this? I cannot use inner join since parent entity is required to be in result.</p>\n"},{"tags":["java","spring","jsp","tabs","portlet"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12912888,"title":"jsp portlet tabs sharing the same bean","body":"<p>I need to share the same bean in two tabs defined this way:</p>\n\n<pre><code>&lt;fmt:message var=\"tabNames\" key=\"message.tab.alta\" /&gt;\n\n\n&lt;c:set var=\"tabValues\" value=\"valtab01,valtab02\" /&gt;\n\n\n&lt;portlet:renderURL var=\"URL01\" &gt;\n        &lt;portlet:param name=\"action\" value=\"${ServletContextKeys.SC_INSERT}\" /&gt;\n    &lt;portlet:param name=\"${ServletContextKeys.SC_TAB_INSERT}\" value=\"valtab01\" /&gt;\n&lt;/portlet:renderURL&gt;\n\n&lt;portlet:renderURL var=\"URL02\" &gt;\n     &lt;portlet:param name=\"action\" value=\"${ServletContextKeys.SC_ADD_LIST}\" /&gt;\n     &lt;portlet:param name=\"${ServletContextKeys.SC_TAB_INSERT}\" value=\"valtab02\" /&gt;\n&lt;/portlet:renderURL&gt;\n\n&lt;liferay-ui:tabs \n     names=\"${tabNames}\"\n     tabsValues=\"${tabEscrituraValues}\"\n     param=\"${ServletContextKeys.SC_TAB_INSERT}\"\n     url0=\"${URL01}\"\n     url1=\"${URL02}\"\n     value=\"${insert_tabs}\"\n  /&gt;\n</code></pre>\n\n<p>So I need to define just one bean in the 2 jsp's representing the 2 tabs:</p>\n\n<pre><code>    &lt;form:form id=\"formInsert\" action=\"action01\" method=\"post\" modelAttribute=\"myBean\" enctype=\"multipart/form-data\"&gt;\n</code></pre>\n\n<p>But I don't know how to make the 2 jsp's share the same bean. \nI need to fill some data of the bean in one tab, and fill one list (within the same bean) on the other tab.\nOnce all the data is filled, submit from the first tab, and I'll need the whole bean in the controller (The data from the first tab and the list from the second one)\nI'm quite new working with portlets, spring and all this stuff, so any help would be great!</p>\n\n<p>Is this possible..?</p>\n"},{"tags":["java","hibernate","spring"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2495,"score":2,"question_id":1561543,"title":"hibernate and spring persistance problem. Possible identity value not incremented?","body":"<p>I am using hibernate 3.2.6, and spring 2.5.6 \nThe database Im connecting to is: DB2 for Z OS 390 V8.1</p>\n\n<p>When I run my testcase (below) I save the test file object. Hibernate DOES Save the object to the database, but my test blows out after the save, where it's trying to update the object with the correct id.  I think that it's not getting the  correct id (it looks like it's getting a '0' for the id), or Im not even sure why its trying to update the object that is already persisted.  I dont know if this is a spring, hibernate, mapping, dialect, or etc issue.</p>\n\n<p>My config:</p>\n\n<p>The business object:</p>\n\n<pre><code>&lt;hibernate-mapping&gt;\n\n    &lt;class name=\"cat.edis.tmiweb.business.File\" table=\"FILE\"&gt;\n\n    \t&lt;id name=\"id\" type=\"java.lang.Long\" column=\"gen_file_id\"&gt;\n    \t\t&lt;generator class=\"native\"&gt;&lt;/generator&gt;\n    \t&lt;/id&gt;\n\n    \t&lt;property name=\"creationTimeStamp\" type=\"java.util.Date\" column=\"crte_ts\" /&gt;\n    \t&lt;property name=\"name\" type=\"java.lang.String\" column=\"file_nm\" /&gt;\n    \t&lt;property name=\"type\" type=\"java.lang.String\" column=\"file_typ_desc\" /&gt;\n    \t&lt;property name=\"description\" type=\"java.lang.String\" column=\"file_desc\" /&gt;\n    \t&lt;property name=\"length\" type=\"java.lang.Long\" column=\"file_lgth\" /&gt;\n    \t&lt;property name=\"contentBlob\" type=\"blob\" column=\"file_cntnt\" /&gt;\n\n    &lt;/class&gt;\n\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p>The pojo:</p>\n\n<pre><code>/*\n * Created on Oct 9, 2009\n *\n */\npackage cat.edis.tmiweb.business;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.sql.Blob;\nimport java.sql.SQLException;\nimport java.util.Date;\n\nimport org.hibernate.Hibernate;\n\n/**\n * @author dudekta\n */\npublic class File {\n    private Long id;\n    private Date creationTimeStamp;\n    private String name;\n    private String type;\n    private String description;\n    private Long length;\n    private byte[] content;\n\n\n    /** Don't invoke this. Used by Hibernate only. */\n    public void setContentBlob(Blob imageBlob) {\n     this.content = this.toByteArray(imageBlob);\n    }\n\n    /** Don't invoke this. Used by Hibernate only. */\n    public Blob getContentBlob() {\n     return Hibernate.createBlob(this.content);\n    }\n\n    private byte[] toByteArray(Blob fromBlob) {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        try {\n         return toByteArrayImpl(fromBlob, baos);\n        } catch (SQLException e) {\n         throw new RuntimeException(e);\n        } catch (IOException e) {\n         throw new RuntimeException(e);\n        } finally {\n         if (baos != null) {\n          try {\n           baos.close();\n          } catch (IOException ex) {\n          }\n         }\n        }\n       }\n\n    private byte[] toByteArrayImpl(Blob fromBlob, ByteArrayOutputStream baos)\n    throws SQLException, IOException {\n    byte[] buf = new byte[4000];\n    InputStream is = fromBlob.getBinaryStream();\n    try {\n     for (;;) {\n      int dataSize = is.read(buf);\n\n      if (dataSize == -1)\n       break;\n      baos.write(buf, 0, dataSize);\n     }\n    } finally {\n     if (is != null) {\n      try {\n       is.close();\n      } catch (IOException ex) {\n      }\n     }\n    }\n    return baos.toByteArray();\n   }\n\n    /**\n     * @return Returns the creationTimeStamp.\n     */\n    public Date getCreationTimeStamp() {\n        return creationTimeStamp;\n    }\n    /**\n     * @param creationTimeStamp\n     *            The creationTimeStamp to set.\n     */\n    public void setCreationTimeStamp(Date creationTimeStamp) {\n        this.creationTimeStamp = creationTimeStamp;\n    }\n    /**\n     * @return Returns the description.\n     */\n    public String getDescription() {\n        return description;\n    }\n    /**\n     * @param description\n     *            The description to set.\n     */\n    public void setDescription(String description) {\n        this.description = description;\n    }\n    /**\n     * @return Returns the id.\n     */\n    public Long getId() {\n        return id;\n    }\n    /**\n     * @param id\n     *            The id to set.\n     */\n    public void setId(Long id) {\n        this.id = id;\n    }\n    /**\n     * @return Returns the length.\n     */\n    public Long getLength() {\n        return length;\n    }\n    /**\n     * @param length\n     *            The length to set.\n     */\n    public void setLength(Long length) {\n        this.length = length;\n    }\n    /**\n     * @return Returns the name.\n     */\n    public String getName() {\n        return name;\n    }\n    /**\n     * @param name\n     *            The name to set.\n     */\n    public void setName(String name) {\n        this.name = name;\n    }\n    /**\n     * @return Returns the type.\n     */\n    public String getType() {\n        return type;\n    }\n    /**\n     * @param type\n     *            The type to set.\n     */\n    public void setType(String type) {\n        this.type = type;\n    }\n    /**\n     * @return Returns the content.\n     */\n    public byte[] getContent() {\n        return content;\n    }\n\n    /**\n     * @param content\n     *            The content to set.\n     */\n    public void setContent(byte[] content) {\n        this.content = content;\n    }\n}\n</code></pre>\n\n<p>The application context:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\"&gt;\n\n    &lt;!--  Webservices --&gt;\n    &lt;bean id=\"FPSService\" class=\"cat.edis.tmiweb.services.fps.FPSServiceImpl\"&gt;\n    \t&lt;constructor-arg type=\"java.lang.String\" value=\"http://localhost:8888/someendpoint\" /&gt;\n    \t&lt;constructor-arg type=\"java.lang.String\" value=\"bill\" /&gt;\n    \t&lt;constructor-arg type=\"java.lang.String\" value=\"will\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!--  Database stuff that we should separate out--&gt;\n\n    &lt;bean id=\"fileDAO\" class=\"cat.edis.tmiweb.dao.FileDAOImpl\"&gt;\n    \t&lt;property name=\"sessionFactory\"&gt;\n    \t\t&lt;ref bean=\"TMISessionFactory\" /&gt;\n    \t&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"TMIDataSource\" class=\"cat.cis.template.spring.util.TUFDataSource\" destroy-method=\"close\"&gt;\n    \t&lt;property name=\"poolName\" value=\"db2OS390GenData\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"TMISessionFactory\" class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n    \t&lt;property name=\"dataSource\" ref=\"TMIDataSource\" /&gt;\n\n    \t&lt;property name=\"mappingResources\"&gt;\n    \t\t&lt;list&gt;\n    \t\t\t&lt;!-- PUT HIBERNATE MAPPING FILES HERE --&gt;\n    \t\t\t&lt;value&gt;cat/edis/tmiweb/business/File.hbm.xml&lt;/value&gt;\n    \t\t&lt;/list&gt;\n    \t&lt;/property&gt;\n    \t&lt;property name=\"hibernateProperties\"&gt;\n    \t\t&lt;map&gt;\n    \t\t\t&lt;entry&gt;\n    \t\t\t\t&lt;key&gt;\n    \t\t\t\t\t&lt;value&gt;hibernate.show_sql&lt;/value&gt;\n    \t\t\t\t&lt;/key&gt;\n    \t\t\t\t&lt;value&gt;true&lt;/value&gt;\n    \t\t\t&lt;/entry&gt;\n    \t\t\t&lt;entry&gt;\n    \t\t\t\t&lt;key&gt;\n    \t\t\t\t\t&lt;value&gt;hibernate.default_schema&lt;/value&gt;\n    \t\t\t\t&lt;/key&gt;\n    \t\t\t\t&lt;value&gt;N4GK001$&lt;/value&gt;\n    \t\t\t&lt;/entry&gt;\n    \t\t\t&lt;entry&gt;\n    \t\t\t\t&lt;key&gt;\n    \t\t\t\t\t&lt;value&gt;hibernate.dialect&lt;/value&gt;\n    \t\t\t\t&lt;/key&gt;\n    \t\t\t\t&lt;ref bean=\"TMIDialect\" /&gt;\n    \t\t\t&lt;/entry&gt;\n    \t\t&lt;/map&gt;\n    \t&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"TMIDialect\" factory-bean=\"TMIDialectFactory\" factory-method=\"instance\" /&gt;\n\n    &lt;bean id=\"TMIDialectFactory\" class=\"cat.cis.template.spring.util.EnvironmentBeanStrategyFactory\"&gt;\n    \t&lt;property name=\"envKey\" value=\"tuf.environment\" /&gt;\n    \t&lt;property name=\"defaultKey\" value=\"DEV\" /&gt;\n    \t&lt;property name=\"target\"&gt;\n    \t\t&lt;map&gt;\n    \t\t\t&lt;entry key=\"DEV\" value=\"org.hibernate.dialect.DB2390Dialect\" /&gt;\n    \t\t\t&lt;entry key=\"TEST\" value=\"org.hibernate.dialect.DB2390Dialect\" /&gt;\n    \t\t\t&lt;entry key=\"QA\" value=\"org.hibernate.dialect.DB2390Dialect\" /&gt;\n    \t\t\t&lt;entry key=\"PROD\" value=\"org.hibernate.dialect.DB2390Dialect\" /&gt;\n    \t\t&lt;/map&gt;\n    \t&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    \t&lt;property name=\"sessionFactory\"&gt;\n    \t\t&lt;ref bean=\"TMISessionFactory\" /&gt;\n    \t&lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>FileDAO:</p>\n\n<pre><code>/*\n * Created on Oct 9, 2009\n */\npackage cat.edis.tmiweb.dao;\n\nimport org.springframework.orm.hibernate3.support.HibernateDaoSupport;\n\nimport cat.edis.tmiweb.business.File;\n\n/**\n * @author dudekta\n *  \n */\npublic class FileDAOImpl extends HibernateDaoSupport implements FileDAO {\n\n    /**\n     * \n     * @param id\n     * @return\n     */\n    public File load(Long id) {\n        return (File) getHibernateTemplate().get(File.class, id);\n    }\n\n    /**\n     * \n     * @param file\n     * @return\n     */\n    public void save(File file) {\n        getHibernateTemplate().save(file);\n    }\n\n}\n</code></pre>\n\n<p>My Test:</p>\n\n<pre><code>public void testSaveBlob() {\n        FileDAO fileDAO =(FileDAO)SpringTestInitializer.getContext().getBean(\"fileDAO\");\n        File file = new File();\n        file.setName(\"TestMe\");\n        file.setType(\"txt\");\n        file.setCreationTimeStamp(new Date());\n        file.setDescription(\"idc\");\n\n        byte[] testBytes = new byte[1024];\n        byte byteValue = 1;\n        for (int i = 0; i &lt; testBytes.length; i++) {\n            testBytes[i] = byteValue;\n        }\n        file.setLength(new Long(testBytes.length));\n        file.setContent(testBytes);\n        fileDAO.save(file);\n\n        File dbFile = fileDAO.load(file.getId());\n        assertNotNull(file);\n    }\n</code></pre>\n\n<p>Output to console from Hibernate:</p>\n\n<pre><code>Initializing Spring....\nSpring test context created....\nHibernate: insert into N4GK001$.FILE (gen_file_id, crte_ts, file_nm, file_typ_desc, file_desc, file_lgth, file_cntnt) values (default, ?, ?, ?, ?, ?, ?)\nHibernate: select identity_val_local() from sysibm.sysdummy1\nHibernate: update N4GK001$.FILE set crte_ts=?, file_nm=?, file_typ_desc=?, file_desc=?, file_lgth=?, file_cntnt=? where gen_file_id=?\n</code></pre>\n\n<p>Trace:</p>\n\n<blockquote>\n  <p>org.springframework.dao.DataIntegrityViolationException:\n  could not update:\n  [cat.edis.tmiweb.business.File#0];\n  nested exception is\n  org.hibernate.exception.DataException:\n  could not update:\n  [cat.edis.tmiweb.business.File#0]     at\n  org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:639)\n    at\n  org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)\n    at\n  org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)\n    at\n  org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)\n    at\n  org.springframework.orm.hibernate3.HibernateTemplate.save(HibernateTemplate.java:694)\n    at\n  cat.edis.tmiweb.dao.FileDAOImpl.save(FileDAOImpl.java:31)\n    at\n  cat.edis.tmiweb.dao.FileDAOImplTest.testSaveBlob(FileDAOImplTest.java:50)\n    at\n  sun.reflect.NativeMethodAccessorImpl.invoke0(Native\n  Method)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n    at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n    at\n  java.lang.reflect.Method.invoke(Method.java:391)\n    at\n  junit.framework.TestCase.runTest(TestCase.java:154)\n    at\n  org.jmock.core.VerifyingTestCase.runBare(VerifyingTestCase.java:39)\n    at\n  junit.framework.TestResult$1.protect(TestResult.java:106)\n    at\n  junit.framework.TestResult.runProtected(TestResult.java:124)\n    at\n  junit.framework.TestResult.run(TestResult.java:109)\n    at\n  junit.framework.TestCase.run(TestCase.java:118)\n    at\n  junit.framework.TestSuite.runTest(TestSuite.java:208)\n    at\n  junit.framework.TestSuite.run(TestSuite.java:203)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:436)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:311)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\n  Caused by:\n  org.hibernate.exception.DataException:\n  could not update:\n  [cat.edis.tmiweb.business.File#0]     at\n  org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:77)\n    at\n  org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)\n    at\n  org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2430)\n    at\n  org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2312)\n    at\n  org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2612)\n    at\n  org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:96)\n    at\n  org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)\n    at\n  org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)\n    at\n  org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168)\n    at\n  org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\n    at\n  org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\n    at\n  org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\n    at\n  org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:390)\n    at\n  org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:420)\n    ... 20 more Caused by:\n  COM.ibm.db2.jdbc.DB2Exception:\n  [IBM][CLI Driver][DB2] SQL0100W  No\n  row was found for FETCH, UPDATE or\n  DELETE; or the result of a query is an\n  empty table.  SQLSTATE=02000</p>\n  \n  <p>at\n  COM.ibm.db2.jdbc.app.SQLExceptionGenerator.throw_SQLException(Unknown\n  Source)   at\n  COM.ibm.db2.jdbc.app.SQLExceptionGenerator.throw_SQLException(Unknown\n  Source)   at\n  COM.ibm.db2.jdbc.app.SQLExceptionGenerator.check_return_code(Unknown\n  Source)   at\n  COM.ibm.db2.jdbc.app.DB2PreparedStatement.loadParameters(Unknown\n  Source)   at\n  COM.ibm.db2.jdbc.app.DB2PreparedStatement.execute2(Unknown\n  Source)   at\n  COM.ibm.db2.jdbc.app.DB2PreparedStatement.executeUpdate(Unknown\n  Source)   at\n  cat.cis.tuf.server.connector.jdbc.v1.JDBCv1DBStatement.executeUpdate(JDBCv1DBStatement.java:206)\n    at\n  org.hibernate.jdbc.NonBatchingBatcher.addToBatch(NonBatchingBatcher.java:23)\n    at\n  org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2408)\n    ... 31 more</p>\n</blockquote>\n\n<p>The exception object:</p>\n\n<pre><code> ex= DataException  (id=341)\nbacktrace= Object[35]  (id=349)\ncause (NestableRuntimeException)= DB2Exception  (id=325)\ncause (Throwable)= DataException  (id=341)\ndelegate= NestableDelegate  (id=350)\ndetailMessage= \"could not update: [cat.edis.tmiweb.business.File#0]\"\nsql= \"update N4GK001$.FILE set crte_ts=?, file_nm=?, file_typ_desc=?, file_desc=?, file_lgth=?, file_cntnt=? where gen_file_id=?\"\nsqle= DB2Exception  (id=325)\nstackTrace= null\n</code></pre>\n\n<p>**</p>\n\n<p>Switched to type 4 driver: (still using org.hibernate.dialect.DB2390Dialect)</p>\n\n<p>NEW error! **\\</p>\n\n<pre><code>org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n   at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:672)\n   at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)\n   at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)\n   at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)\n   at org.springframework.orm.hibernate3.HibernateTemplate.save(HibernateTemplate.java:694)\n   at cat.edis.tmiweb.dao.FileDAOImpl.save(FileDAOImpl.java:31)\n   at cat.edis.tmiweb.dao.FileDAOImplTest.testSaveBlob(FileDAOImplTest.java:50)\n   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n   at java.lang.reflect.Method.invoke(Method.java:391)\n   at junit.framework.TestCase.runTest(TestCase.java:154)\n   at org.jmock.core.VerifyingTestCase.runBare(VerifyingTestCase.java:39)\n   at junit.framework.TestResult$1.protect(TestResult.java:106)\n   at junit.framework.TestResult.runProtected(TestResult.java:124)\n   at junit.framework.TestResult.run(TestResult.java:109)\n   at junit.framework.TestCase.run(TestCase.java:118)\n   at junit.framework.TestSuite.runTest(TestSuite.java:208)\n   at junit.framework.TestSuite.run(TestSuite.java:203)\n   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:436)\n   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:311)\n   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n   at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\n   at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\n   at org.hibernate.jdbc.NonBatchingBatcher.addToBatch(NonBatchingBatcher.java:24)\n   at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2408)\n   at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2312)\n   at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2612)\n   at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:96)\n   at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)\n   at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)\n   at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168)\n   at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\n   at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\n   at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\n   at org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:390)\n   at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:420)\n   ... 20 more\n</code></pre>\n"},{"tags":["spring","hibernate","tomcat","tomcat6","noclassdeffounderror"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":13045262,"title":"Spring + Hibernate + Tomcat Dependency problems","body":"<p>when I run tomcat and the war is deployed I get :\n<strong>NoClassDefFoundError : org/apache/commons/collections/map/LRUMap</strong></p>\n\n<blockquote>\n  <p>Invocation of init method failed; nested exception is\n  java.lang.NoClassDefFoundError:\n  org/apache/commons/collections/map/LRUMap\n  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)\n  ~[spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]</p>\n</blockquote>\n\n<p>What is strange is that I got the <code>commons-collections-2.1.jar</code> (I even tried 3.1) in my WEB-INF lib folder.</p>\n\n<p>Edit :\nI did copy the <code>commons-collections</code> from <code>WEB-INF/lib</code> to <code>Tomcat lib</code> and it seems to work. However I won't be able to do that on the production server, why isn't it taking my <code>WEB-INF/lib</code> version ?</p>\n"},{"tags":["java","spring","jms","spring-jms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13034605,"title":"Thread safety with multiple MessageListeners using same onMessage?","body":"<p>How can I ensure that two Listener containers:</p>\n\n<pre><code>&lt;bean id=\"listenerContainer\"\n    class=\"org.springframework.jms.listener.DefaultMessageListenerContainer\"&gt;\n    &lt;property name=\"messageListener\" ref=\"MessageListener\" /&gt;\n    &lt;property name=\"connectionFactory\" ref=\"tcf\" /&gt;\n    &lt;property name=\"destinationName\" value=\"${jms-topic}\" /&gt;\n    &lt;property name=\"pubSubDomain\" value=\"true\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"listenerContainer-2\"\n    class=\"org.springframework.jms.listener.DefaultMessageListenerContainer\"&gt;\n    &lt;property name=\"messageListener\" ref=\"MessageListener\" /&gt;\n    &lt;property name=\"connectionFactory\" ref=\"tcf\" /&gt;\n    &lt;property name=\"destinationName\" value=\"${jms-topic-2}\" /&gt;\n    &lt;property name=\"pubSubDomain\" value=\"true\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"MessageListener\" class=\"com.my.url.jms.listener.DefaultMessageListener\"&gt;\n    &lt;property name=\"transformer\" ref=\"transformer\" /&gt;\n    &lt;property name=\"publisher\" ref=\"publisher\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>That recieve messages from different topics. Are thread safe? </p>\n\n<p>As you can see, they use the same Message Listener which is also reliant on some other spring beans. All messages will be received by the same onMessage Method in the same class.</p>\n\n<pre><code>public class SomeKlass implements MessageListener {\n\n\n    public void onMessage(Message message) {        \n            //Do some work\n    }\n\n}\n</code></pre>\n\n<p>Can someone advise me on the best practice for this kind of problem. Messages from both topics need to be handled in the same way so I only need one MessageListener.</p>\n\n<p>Thanks</p>\n"},{"tags":["spring","spring-aop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13044541,"title":"interface implementation changes pointcut interpretation","body":"<p>I want to select all methods annotated with @RequestMapping in classes annotated with @Controller.</p>\n\n<p>The following pointcut definition works fine ... in some cases:</p>\n\n<pre><code>@within(org.springframework.stereotype.Controller)\n    and\n@annotation(org.springframework.web.bind.annotation.RequestMapping)\n</code></pre>\n\n<p>The problem is, that as soon as the @Controller-annotated class implements some interface, the pointcut is not applicable any more and the methods do not get intercepted. This even happens, when I just implement java.io.Serializable.</p>\n\n<p>This for example does not work, but it works as soon as I remove the \"<em>implements Serializable</em>\":</p>\n\n<pre><code>@Controller\npublic class TestController extends BaseController implements Serializable {\n    @RequestMapping(value = \"/test\")\n    public String testAuth1(final Model model) {\n        return \"test\";\n    }\n}\n</code></pre>\n\n<p>Spring XML config:</p>\n\n<pre><code>&lt;aop:config&gt;\n    &lt;aop:pointcut id=\"handlerMethods\"\n        expression=\"@within(org.springframework.stereotype.Controller) and @annotation(org.springframework.web.bind.annotation.RequestMapping)\" /&gt;\n    &lt;aop:aspect ref=\"handlerAdvice\"&gt;\n        &lt;aop:before method=\"interceptionMethod\" pointcut-ref=\"handlerMethods\" /&gt;\n    &lt;/aop:aspect&gt;\n&lt;/aop:config&gt;\n</code></pre>\n\n<p>Any ideas about that? Thanks!</p>\n"},{"tags":["java","spring","main","hang"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13044925,"title":"Command-line application using Spring context never ends","body":"<p>I created mini framework to executing some spring beans from <code>main()</code> method rather than deploying and running full-fledged webapp just to launch those beans. It looks like this:</p>\n\n<pre><code>public abstract class BaseLauncher {\n\n    private static final String APP_CONTEXT_PATH = \"com/project/dev/launchers/launchersApplicationContext.xml\";\n    static ApplicationContext context = new ClassPathXmlApplicationContext(APP_CONTEXT_PATH);\n\n    protected void launch() {\n        context.getBean(getClass()).perform();\n        //The process never ends so we want to know when we can kill it\n        System.out.println(\"launcher finished\");\n    }\n\n    @Transactional\n    abstract protected void perform();\n\n}\n</code></pre>\n\n<p>And example launcher looks like this:</p>\n\n<pre><code>@Component\npublic class ParamLoaderLauncher extends BaseLauncher {\n    @Inject\n    ParamLoader paramLoader;\n\n    public static void main(String[] args) {\n        new ParamLoaderLauncher().launch();\n    }\n\n    @Override\n    protected void perform() {\n        paramLoader.loadParams();\n    }\n}\n</code></pre>\n\n<p>It all works great except that when the invoked bean method is finished, application just keep running and we need to kill it manually. I guess it has something to do with using spring app context. Maybe some special spring-related non-deamon thread is launched? If so, is there any way to kill it? Or what other cause of this may be in such simple code?</p>\n"},{"tags":["spring","maven","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13044628,"title":"spring error during build","body":"<p>I have to make small website using <code>spring</code>. so i choose <code>spring template project</code> than <code>new spring mvc project</code> whatever i try there is an error that occurred</p>\n\n<p><code>Errors occurred during the build.\nErrors running builder 'Maven Project Builder' on project 'mTime'.Errors occurred during the build.\nErrors running builder 'Maven Project Builder' on project 'mTime'.\nCould not calculate build plan: Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\\Users\\User01\\.m2\\repository\\org\\apache\\maven\\plugins\\maven-war-plugin\\2.1.1\\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)\nFailed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\\Users\\User01\\.m2\\repository\\org\\apache\\maven\\plugins\\maven-war-plugin\\2.1.1\\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)\nCould not calculate build plan: Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\\Users\\User01\\.m2\\repository\\org\\apache\\maven\\plugins\\maven-war-plugin\\2.1.1\\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)\nFailed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\\Users\\User01\\.m2\\repository\\org\\apache\\maven\\plugins\\maven-war-plugin\\2.1.1\\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)</code></p>\n\n<p>i know that <code>maven</code> is included in <code>spring framework</code>, and when i check the directory the jars are there. how can i terminate this error?</p>\n\n<p>thanks in advance.</p>\n"},{"tags":["spring","grails","jetty"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2879,"score":1,"question_id":2419745,"title":"Grails 1.2.1 with Spring 3.0.0 dependency problem under Jetty","body":"<p>Just moved to Grails 1.2.1 (used 1.1.1 before). Changed application.properties, ran grails upgrade, fixed BuildConfig and Bootstrap - everything works just fine from grails console.</p>\n\n<p>However, getting a problem when deploy packaged war under jetty 6.1.22:</p>\n\n<pre><code>1581 [main] ERROR org.springframework.web.context.ContextLoader  - Context initialization failed org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is java.lang.NoSuchMethodError: org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.setParameterNameDiscoverer(Lorg/springframework/core/ParameterNameDiscoverer;)V\n</code></pre>\n\n<p>My project is built with maven2. I researched the war dependencies and see that both spring 2.5.6 and 3.0.0.RELEASE are used there. \nI then tried to suppress use of spring 2.5.6 and got a problem with Acegi plugin (using version 0.5.1):</p>\n\n<pre><code>2010-03-10 21:06:56.440:WARN::Nested in org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is java.lang.NoSuchMethodError: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["java","spring","gwt","spring-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13044153,"title":"GWT + Spring Services + Spring Security","body":"<p>I've a small architecture as follows :</p>\n\n<ul>\n<li>Client-App (using GWT)</li>\n<li>RESTful-services (using Spring)</li>\n</ul>\n\n<p>Client can communicate with services through <em>ProxyServlet</em> to avoid 'Same-Origin-Policy' because they were deployed as different applications (WAR)</p>\n\n<p>The RESTful-services were secured using Spring-Security, and also the Client-App</p>\n\n<p>The question is, how to sign-in in one application (say client), and use that session to make calls on the other app?</p>\n"},{"tags":["spring","jboss","jaxb","classloader"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":2937,"score":4,"question_id":4410017,"title":"How to separate ear classloader and system classloader in JBoss 6?","body":"<p>I'm trying to upgrade from JBoss 4.2.1 to JBoss 6.  In JBoss 4.2.1, we are manually deploying our application as an exploded war and everything works beautifully.</p>\n\n<p>I'm running into problems because the application that I am trying to deploy uses versions of 3rd party libraries that are older than the ones that JBoss 6 now includes by default.  The result of this is that I'm getting classloader conflicts all over the place and the application won't even start.</p>\n\n<p>At present, I have tried using the <a href=\"http://community.jboss.org/wiki/classloadingconfiguration\" rel=\"nofollow\">JBoss Classloading Documentation</a> as well as the scanty bits of documentation for <a href=\"http://java.dzone.com/articles/jboss-microcontainer-classloading\" rel=\"nofollow\">jboss-classloading.xml</a> and haven't had any success.</p>\n\n<p>Has anyone out there managed to do this successfully? If you have, how did you do it?</p>\n\n<p>I've included a stack trace below in case it offers any useful information.</p>\n\n<pre><code>Caused by: java.lang.Error: Error visiting \"/C:/jboss6/server/default/deploy/app.war/WEB-INF/lib/jaxb-xjc-2.1.12.jar/1.0/com/sun/codemodel/JConditional.class\"\n    at org.jboss.classloading.plugins.vfs.VFSResourceVisitor.visit(VFSResourceVisitor.java:268) [jboss-classloading-vfs.jar:2.2.0.Alpha9]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:407) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:395) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.classloading.plugins.vfs.VFSResourceVisitor.visit(VFSResourceVisitor.java:102) [jboss-classloading-vfs.jar:2.2.0.Alpha9]\n    at org.jboss.deployers.vfs.plugins.classloader.VFSDeploymentClassLoaderPolicyModule.visit(VFSDeploymentClassLoaderPolicyModule.java:181) [:2.2.0.Alpha8]\n    at org.jboss.scanning.plugins.DeploymentUnitScanner.scan(DeploymentUnitScanner.java:111) [:1.0.0.Alpha7]\n    at org.jboss.scanning.spi.helpers.UrlScanner.scan(UrlScanner.java:96) [:1.0.0.Alpha7]\n    at org.jboss.scanning.deployers.ScanningDeployer.deploy(ScanningDeployer.java:90) [:1.0.0.Alpha7]\n    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179) [:2.2.0.Alpha8]\n    ... 41 more\n</code></pre>\n"},{"tags":["java","spring","postgresql","spring-batch","spring-batch-admin"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":266,"score":0,"question_id":8817691,"title":"Reg. transaction support for a spring batch job at job level","body":"<p>Lets assume that i need to execute a spring batch job with 2 steps.step 1 is to read data from a postgres table and update values in the same table. step 2 is to read data from another postgres table and update this table. How can i achieve transactions at job level for this scenario?</p>\n\n<p>That is, if the second step fails, then the first step should be rolled back. </p>\n"},{"tags":["java","spring","jax-ws","cxf","jboss7.x"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13015164,"title":"Is there a way to deploy Spring+ApacheCXF WebServices on JBoss AS 7.1.1.FINAL?","body":"<p>I have a webservice application developed using ApacheCXF+Spring. It is working fine on Tomcat and JBoss 5 as well.</p>\n\n<p>Now I need to deploy it on JBoss AS 7.1.1.FINAL. But its not working because JBoss AS7 comes with Apache CXF-2.4.6.</p>\n\n<p>When I try to deploy the application JBossAs7 not all considering CXFServlet configured in web.xml. WebService is deployed as a plain JAX-WS webservice and Spring injection(@Autowired) is not happening.</p>\n\n<p>I want to use Apache CXF for publishing WebServices because I can customise the WebService URL Endpoints easily and use all Spring features with ease.</p>\n\n<p>Is there a way to deploy Spring+ApacheCXF WebServices on JBoss AS 7.1.1.FINAL?</p>\n\n<p>PS: CXFServlet doesn't get initialized on startup because I missed to include <code>&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</code>. Now its getting initialized properly. But I am running into other issue: <a href=\"http://stackoverflow.com/questions/13022968/how-to-disable-scanning-webservice-annotations-in-jboss-as-7\">How to disable scanning @WebService annotations in JBoss AS 7?</a></p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13041536,"title":"@Bean (autowire = Autowire.BY_NAME)","body":"<p>What is the purpose of setting the autowire property of <strong>@Bean</strong> to <strong>*Autowire.BY_NAME*</strong></p>\n\n<p>Looking at the JavDocs, I dont really know when I would use this, or why it would be set to <strong>*Autowire.BY_NAME*</strong></p>\n\n<pre><code>/**\n * Are dependencies to be injected via autowiring?\n */\nAutowire autowire() default Autowire.NO;\n</code></pre>\n\n<p>I have an existing prototype bean that is created with</p>\n\n<pre><code>@Bean (autowire = Autowire.BY_NAME)\n</code></pre>\n\n<p>But I dont understand why.\nThe comments only state:</p>\n\n<blockquote>\n  <p>Note: We have to explicitly set Autowire.BY_NAME in the bean\n  definitions to be able to use @Autowired in other spring config\n  classes</p>\n</blockquote>\n\n<p>Does this mean we have to set a bean to @Bean (autowire = Autowire.BY_NAME) in order to be able to use the Bean with @Autowired and it will be autowired by name from the @Bean?</p>\n"},{"tags":["java","performance","spring","rest","scalability"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":156,"score":1,"question_id":12787275,"title":"Tomcat Performance with Huge String Responses","body":"<p>I've a springRest web service endpoint that returns a string text of size 4MB. As we do load test of this endpoint we constantly see heap spikes and ultimately the system crashes. I'm thinking - as we make requests each request is serviced by a thread separately. My hypothesis is: Because the string is saved in a global static variable, each thread takes a copy of the 4MB and after around 3000 requests the heap is all consumed and the system crashes because 3000 threads taking each 4MB is around 12GB and hence the system goes out of memory. But this is my hypothesis.</p>\n\n<p>My question: doesn't tomcat reclaim the memory after each thread that processes a request has done it's job?\nIs this related to GC (garbage collection)?\nIn the request life cycle - as a request comes, a thread is created (per that request) does the thread get it's own copy of the response or it just references the response? if that huge string response is copied to each thread then may be that's why the heap spike is showing.\nWhen the response is given back to the client how does tomcat reclaim the resources of that thread? when does it do it? is claiming request threads related to GC?</p>\n\n<p>Another aspect that i observed is: delay on the method socketWrite0() - this takes from 70-95% of the response time. It is a bottle neck i think. So in the flow of request response - who writes to the socket? the thread? or the thread hands the response to tomcat and tomcat writes it?</p>\n\n<p>If any of you could give me a hint or an aspect to look at that relates memory spikes with huge string responses, i'd really appreciate it. thanks guys!</p>\n\n<p>rose</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":13000754,"title":"Spring 3.1.2 MVC @ExceptionHandler with @ResponseBody","body":"<p>I'm trying to implement a Spring Web MVC @ExceptionHandler with a @ResponseBody to return an object containing validation errors.  (<a href=\"http://doanduyhai.wordpress.com/2012/05/06/spring-mvc-part-v-exception-handling/\" rel=\"nofollow\">Strategy E documented here</a>).</p>\n\n<p>In Spring 3.0.x, there was a confirmed <a href=\"https://jira.springsource.org/browse/SPR-6902\" rel=\"nofollow\">bug</a> , since resolved, that prohibited this from working properly.  I'm using Spring 3.1.2, and shouldn't be running into that one.</p>\n\n<p>I am, however, running into an exception\"Could not find acceptable representation\".  </p>\n\n<p>Here's the exception:</p>\n\n<pre><code>[10/21/12 12:56:53:296 CDT] 00000045 ExceptionHand E redacted.loggi\nng.jdk14.LogWrapper error Failed to invoke @ExceptionHandler method: public \nredacted.model.view.ValidationErrorResponse redacted.controller.Re\nstController.handleValidationException(redacted.util.ValidationExceptio\nn,javax.servlet.http.HttpServletResponse)\n\nOriginating Class/Method:redacted.web.ui.filter.AccessControlFilter.pr\nocessFilter()\n\n                                 org.springframework.web.HttpMediaTypeNotAccepta\nbleException: Could not find acceptable representation\n        at org.springframework.web.servlet.mvc.method.annotation.AbstractMessage\nConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMeth\nodProcessor.java:115)\n</code></pre>\n\n<p>And here's the code:</p>\n\n<pre><code>@ExceptionHandler(ValidationException.class)\n@ResponseStatus(value = HttpStatus.PRECONDITION_FAILED)\n@ResponseBody\npublic ValidationErrorResponse handleValidationException(ValidationException ex, HttpServletResponse response) {\n    List&lt;ValidationError&gt; errs = new LinkedList&lt;ValidationError&gt;();\n    for (ObjectError er : ex.getErrors()) {\n        errs.add(new ValidationError(er.getObjectName(), er.getDefaultMessage()));\n    }\n\n    return new ValidationErrorResponse(errs);\n\n}\n\n@RequestMapping(value = \"/search\")\n@ResponseBody\npublic SearchResult search(@Valid @ModelAttribute SearchRequest searchRequest, BindingResult bResult) {\n    if (bResult.hasErrors()) {\n        throw new ValidationException(bResult.getAllErrors());\n    }\n    return searchService.search(searchRequest);\n}\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["xml","spring","configuration","namespaces"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":1005,"score":6,"question_id":2852602,"title":"Whats the consensus on Spring p namespace for Beans?","body":"<p>It's been out for a while so I am wondering if people are using the p XML namespace within their Spring configuration files.  Is it a helpful shortcut?  Is it a good idea that ended up in the trash can?  </p>\n\n<p>Where does the Java community largely stand?</p>\n"},{"tags":["sql","oracle","spring","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13040363,"title":"jdbc.BadSqlGrammarException table or view does not exist. Tested query in database, works. But web application errors","body":"<blockquote>\n  <p><strong>EDIT: FIXED! Look below</strong></p>\n</blockquote>\n\n<p>So I have tested the query in SQL Developer and it works fine. However, in my implementation, the run does not load the data into the list and spits out this error:</p>\n\n<pre><code>org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad\nSQL grammar [select columnname,displayname, viewsortorder,capsdisind,window, DIS\nFIELDID , (select  1 from WEB_CUSTDISABLEDFIELDS where custid =? AND  A.DISFIELD\nID  = WEB_CUSTDISABLEDFIELDS.DISFIELDID) from web_DISABLEDFIELDS  A ]; nested ex\nception is java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not e\nxist\n\n        at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.d\noTranslate(SQLErrorCodeSQLExceptionTranslator.java:220)\n        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslat\nor.translate(AbstractFallbackSQLExceptionTranslator.java:72)\n        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:\n607)\n        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:64\n1)\n        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:67\n0)\n        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:67\n8)\n        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:71\n0)\n        at com.caps.capslink.dao.AdminDAOImpl.getCustDisabledFieldsFromDB(AdminD\nAOImpl.java:177)\n        at com.caps.capslink.businessobject.AdminBOImpl.getCustDisabledFields(Ad\nminBOImpl.java:67)\n        at com.caps.capslink.service.AdminServiceImpl.getCustDisabledFieldsList(\nAdminServiceImpl.java:53)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at flex.messaging.services.remoting.adapters.JavaAdapter.invoke(JavaAdap\nter.java:421)\n        at flex.messaging.services.RemotingService.serviceMessage(RemotingServic\ne.java:183)\n        at flex.messaging.MessageBroker.routeMessageToService(MessageBroker.java\n:1503)\n        at flex.messaging.endpoints.AbstractEndpoint.serviceMessage(AbstractEndp\noint.java:884)\n        at flex.messaging.endpoints.amf.MessageBrokerFilter.invoke(MessageBroker\nFilter.java:121)\n        at flex.messaging.endpoints.amf.LegacyFilter.invoke(LegacyFilter.java:15\n8)\n        at flex.messaging.endpoints.amf.SessionFilter.invoke(SessionFilter.java:\n44)\n        at flex.messaging.endpoints.amf.BatchProcessFilter.invoke(BatchProcessFi\nlter.java:67)\n        at flex.messaging.endpoints.amf.SerializationFilter.invoke(Serialization\nFilter.java:146)\n        at flex.messaging.endpoints.BaseHTTPEndpoint.service(BaseHTTPEndpoint.ja\nva:278)\n        at flex.messaging.MessageBrokerServlet.service(MessageBrokerServlet.java\n:322)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl\nicationFilterChain.java:304)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF\nilterChain.java:210)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV\nalve.java:224)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV\nalve.java:175)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica\ntorBase.java:472)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j\nava:164)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j\nava:100)\n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:\n929)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal\nve.java:118)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav\na:405)\n        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcesso\nr.java:316)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(\nAbstractProtocol.java:515)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoin\nt.java:1544)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not e\nxist\n\n        at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.ja\nva:91)\n        at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:1\n12)\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java\n:173)\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)\n        at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1030)\n        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.\njava:194)\n        at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPrepare\ndStatement.java:785)\n        at oracle.jdbc.driver.T4CPreparedStatement.executeMaybeDescribe(T4CPrepa\nredStatement.java:860)\n        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStateme\nnt.java:1186)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePrep\naredStatement.java:3381)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePrepare\ndStatement.java:3425)\n        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(Oracle\nPreparedStatementWrapper.java:1490)\n        at org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(Jd\nbcTemplate.java:648)\n        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:\n591)\n        ... 39 more\n</code></pre>\n\n<p>I've searched multiple problems with this error but none of them seem to address the same issue as mines. I am using Oracle SQL.</p>\n\n<p>I have also looked into these files to see what it could be but couldn't find anything:</p>\n\n<p>at com.caps.capslink.dao.AdminDAOImpl.getCustDisabledFieldsFromDB(AdminDAOImpl.java:177)</p>\n\n<p>at com.caps.capslink.businessobject.AdminBOImpl.getCustDisabledFields(AdminBOImpl.java:67)</p>\n\n<p>at com.caps.capslink.service.AdminServiceImpl.getCustDisabledFieldsList(AdminServiceImpl.java:53)</p>\n\n<p>Maybe someone has ran into this problem before? Any help is appreciated. Thanks!</p>\n\n<p><strong>FIXED THE PROBLEM</strong></p>\n\n<p>The issue was the tables. They just needed permissions in the database to be accessed.</p>\n\n<p>What I did was this:</p>\n\n<pre><code>grant all on sa.table to public\n/\ncreate public synonym table for sa.table\n/\ngrant all on sa.table2 to public\n/\ncreate public synonym table2 for sa.table2\n/\n</code></pre>\n"},{"tags":["spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13039812,"title":"How to Update a page in Spring mvc","body":"<p>Can someone please point me to the right direction, it is a very simple spring form that I'm trying to edit. I have tried various examples from net but can not get it working. </p>\n\n<pre><code>&lt;form:form id=\"myForm\" modelAttribute=\"contacts\" method=\"Post\" action=\"contacts.html\" commandName=\"contacts\"&gt;\n\n        &lt;label&gt;First Name&lt;span class=\"small\"&gt;Edit your first name&lt;/span&gt;&lt;/label&gt;\n        &lt;form:input path=\"firstName\" /&gt;&lt;br&gt;\n        &lt;form:errors path=\"firstName\" cssClass=\"error\" /&gt;&lt;br&gt;\n\n        &lt;label&gt;Last Name&lt;span class=\"small\"&gt;Edit your last name&lt;/span&gt;&lt;/label&gt;\n        &lt;form:input path=\"lastName\" /&gt;&lt;br&gt;\n        &lt;form:errors path=\"lastName\" cssClass=\"error\" /&gt;&lt;br&gt;\n\n        &lt;button type=\"submit\"&gt;Amend&lt;/button&gt;\n    &lt;/form:form&gt;\n\nprotected static final String EDIT_VIEW_KEY = \"editForm\";\n\n@Autowired\nprivate ContactsService conService;\n\n@RequestMapping(value=\"/edit/{id}\", method = RequestMethod.GET)\npublic String showEditForm(@PathVariable(\"id\") Integer id,\n        @ModelAttribute(\"contacts\") Contacts contacts,Model model){\n\n    model.addAttribute(\"contacts\", conService.listContactsById(id));\n    return EDIT_VIEW_KEY;\n}\n</code></pre>\n\n<p>and the error I'm getting is this;</p>\n\n<pre><code>org.springframework.beans.NotReadablePropertyException: Invalid property 'firstName' of bean class [java.util.ArrayList]: Bean property 'firstName' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\norg.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:729)\norg.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:721)\norg.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:147)\norg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)\norg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)\norg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)\norg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)\norg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)\norg.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:126)\norg.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)\norg.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)\norg.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)\norg.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)\norg.apache.jsp.WEB_002dINF.views.editForm_jsp._jspx_meth_form_005finput_005f0(editForm_jsp.java:214)\norg.apache.jsp.WEB_002dINF.views.editForm_jsp._jspx_meth_c_005fforEach_005f0(editForm_jsp.java:173)\norg.apache.jsp.WEB_002dINF.views.editForm_jsp._jspx_meth_form_005fform_005f0(editForm_jsp.java:128)\norg.apache.jsp.WEB_002dINF.views.editForm_jsp._jspService(editForm_jsp.java:85)\norg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\norg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)\norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\norg.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)\norg.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)\norg.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)\norg.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:103)\norg.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96)\norg.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)\norg.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)\norg.apache.tiles.renderer.impl.ChainedDelegateAttributeRenderer.write(ChainedDelegateAttributeRenderer.java:76)\norg.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)\norg.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)\norg.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:336)\norg.apache.tiles.template.InsertAttributeModel.renderAttribute(InsertAttributeModel.java:210)\norg.apache.tiles.template.InsertAttributeModel.end(InsertAttributeModel.java:126)\norg.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)\norg.apache.jsp.WEB_002dINF.jsp.layout_jsp._jspx_meth_tiles_005finsertAttribute_005f3(layout_jsp.java:180)\norg.apache.jsp.WEB_002dINF.jsp.layout_jsp._jspService(layout_jsp.java:98)\norg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\norg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)\norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\norg.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241)\norg.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:222)\norg.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)\norg.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)\norg.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)\norg.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)\norg.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)\norg.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)\norg.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)\norg.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)\norg.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)\norg.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\norg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:621)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n</code></pre>\n\n<p>Many thanks</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13039991,"title":"Spring: How do I substitute constant values for constructor-args?","body":"<p>I am working on a project where I am given a project configuration as</p>\n\n<p><strong>project-config.xml</strong></p>\n\n<pre><code> &lt;bean id=\"awsCredentials\" class=\"com.amazonaws.auth.BasicAWSCredentials\"&gt;\n        &lt;constructor-arg\n                value=\"${com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-accessKeyId}\"/&gt;\n        &lt;constructor-arg\n                value=\"${com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-secretAccessKey}\"/&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>I am adding a test configuration from where I can pass this values</p>\n\n<p><strong>test-config.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n    com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator-destBucketName=bucketname\n    com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-accessKeyId=accesskey\n    com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-secretAccessKey=secretaccess key\n\n    &lt;bean id=\"spa-evaluation-factory\" class=\"com.myorg.sparrow..business.DummySpaEvaluationFactory\"/&gt;\n    &lt;import resource=\"classpath:/com/myorg/sparrow/spa_adapter/project-config.xml\"/&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>But this doesn't work. How can I</p>\n\n<p>have the variables defined in <code>test-config.xml</code> </p>\n\n<pre><code>com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator-destBucketName=bucketname\n        com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-accessKeyId=accesskey\n        com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-secretAccessKey=secretaccess key\n</code></pre>\n\n<p>substitute for values in <code>project-config.xml</code></p>\n\n<pre><code>&lt;bean id=\"awsCredentials\" class=\"com.amazonaws.auth.BasicAWSCredentials\"&gt;\n            &lt;constructor-arg\n                    value=\"${com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-accessKeyId}\"/&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-security","spring-annotations"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":148,"score":1,"question_id":12334922,"title":"Spring and Spring security configuration help, cannot find a bean","body":"<p>I keep receiving the exception with a message: \"org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'userDetailsService' is defined\" even though the bean is defined as a service in the UserDetailsServiceImpl class. Such as:</p>\n\n<pre><code>@Service(value=\"userDetailsService\")\npublic class UserDetailsServiceImpl implements UserDetailsService{\n</code></pre>\n\n<p>I am using the latest Spring and Spring Security. </p>\n\n<p>I am not sure what I am doing wrong. I am pasting the configuration of my spring xml files. The spring-security.xml shows that it can find beans from the servlet-context.xml when using the component-scan.</p>\n\n<p>Thank you</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.filterChains': Cannot resolve reference to bean org.springframework.security.web.DefaultSecurityFilterChain#0' while setting bean property sourceList' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.web.DefaultSecurityFilterChain#0': Cannot resolve reference to bean org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0' while setting constructor argument with key [2]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0': Cannot resolve reference to bean org.springframework.security.authentication.ProviderManager#0' while setting bean property authenticationManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.authenticationManager': Cannot resolve reference to bean org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'userDetailsService' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'userDetailsService' is defined\n</code></pre>\n\n<p>spring-security.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/security\"\nxmlns:beans=\"http://www.springframework.org/schema/beans\" \nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n       http://www.springframework.org/schema/security\n       http://www.springframework.org/schema/security/spring-security-3.1.xsd\"&gt;\n\n\n&lt;beans:import resource=\"classpath*:servlet-context.xml\"/&gt; \n\n&lt;global-method-security secured-annotations=\"enabled\"&gt;&lt;/global-method-security&gt;    \n\n&lt;http auto-config=\"true\" &gt;\n    &lt;!-- Filtering url patterns --&gt;\n\n    &lt;!-- Anonymous users --&gt;\n    &lt;intercept-url pattern=\"/\" access=\"IS_AUTHENTICATED_ANONYMOUSLY\" /&gt;\n    &lt;intercept-url pattern=\"/login*\" access=\"IS_AUTHENTICATED_ANONYMOUSLY\" /&gt;\n\n    &lt;!-- Login and logout controls --&gt;\n    &lt;form-login login-page=\"/login\" default-target-url=\"/profile\"\n        authentication-failure-url=\"/loginfailed\" /&gt;\n    &lt;logout invalidate-session=\"true\" logout-success-url=\"/\"\n        delete-cookies=\"JSESSIONID\" /&gt;\n\n&lt;/http&gt;\n\n&lt;beans:bean id=\"authenticationProvider\"\n    class=\"org.springframework.security.authentication.dao.DaoAuthenticationProvider\"&gt;\n    &lt;beans:property name=\"userDetailsService\" ref=\"userDetailsService\"/&gt;\n&lt;/beans:bean&gt;\n\n\n\n&lt;beans:bean id=\"authenticationManager\"\n    class=\"org.springframework.security.authentication.ProviderManager\"&gt;\n    &lt;beans:property name=\"providers\"&gt;\n        &lt;beans:list&gt;\n            &lt;beans:ref local=\"authenticationProvider\" /&gt;\n        &lt;/beans:list&gt;\n    &lt;/beans:property&gt;\n&lt;/beans:bean&gt;\n\n&lt;authentication-manager&gt;\n    &lt;authentication-provider user-service-ref=\"userDetailsService\"&gt;\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;    \n</code></pre>\n\n<p></p>\n\n<p>servlet-context.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/mvc\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:beans=\"http://www.springframework.org/schema/beans\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxmlns:tx=\"http://www.springframework.org/schema/tx\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd \n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n\n&lt;annotation-driven /&gt;\n\n&lt;resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n&lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\n&lt;beans:bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;beans:property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n    &lt;beans:property name=\"suffix\" value=\".jsp\" /&gt;\n&lt;/beans:bean&gt;\n\n                                              &lt;!-- Data source configuration --&gt;\n\n&lt;!-- JDBC configuration for ORM --&gt;\n&lt;beans:bean id=\"dbDataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n   &lt;beans:property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"/&gt;\n   &lt;beans:property name=\"url\" value=\"jdbc:mysql://localhost:3306/dbName\"/&gt;\n   &lt;beans:property name=\"username\" value=\"root\"/&gt;\n   &lt;beans:property name=\"password\" value=\"\"/&gt;\n&lt;/beans:bean&gt;   \n\n&lt;!-- Hibernate session Factory --&gt;\n&lt;beans:bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n   &lt;beans:property name=\"dataSource\" ref=\"dbDataSource\" /&gt;\n\n   &lt;!-- All the model packages with hibernate annotations that need to be scanned. --&gt;\n   &lt;beans:property name=\"packagesToScan\"&gt;\n       &lt;beans:value&gt;\n           com.package.registration.models\n       &lt;/beans:value&gt;\n   &lt;/beans:property&gt;\n\n   &lt;!-- Hibernate specific properties --&gt;\n   &lt;beans:property name=\"hibernateProperties\"&gt;\n       &lt;beans:props&gt;\n           &lt;beans:prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/beans:prop&gt;\n           &lt;beans:prop key=\"hibernate.show_sql\"&gt;true&lt;/beans:prop&gt;\n           &lt;beans:prop key=\"hibernate.format_sql\"&gt;true&lt;/beans:prop&gt;\n           &lt;beans:prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/beans:prop&gt;\n           &lt;beans:prop key=\"org.hibernate.transaction\"&gt;true&lt;/beans:prop&gt;\n       &lt;/beans:props&gt;\n   &lt;/beans:property&gt;\n&lt;/beans:bean&gt;\n\n&lt;!-- A transaction manager for working with Hibernate SessionFactories --&gt;\n&lt;beans:bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;beans:property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/beans:bean&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n\n&lt;context:component-scan base-package=\"com.package.app\" /&gt;   \n</code></pre>\n\n<p></p>\n"},{"tags":["spring","web-applications","web.xml"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13038397,"title":"Is it possible to dynamically generate parts of you web.xml?","body":"<p>Is it possible to have entries in your web.xml be dynamically created?</p>\n"},{"tags":["java","javascript","json","spring","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":13036592,"title":"How to automatically convert long values to strings in Spring?","body":"<p>I am using Spring MVC 3 and a MappingJacksonHttpMessageConverter to serialize my java objects to JSON when they're sent to my client.  My problem is that Java long values are being rounded  in the client because Javascript numbers can't handle the precision of long values.  To get around this, I'm going to send these fields as strings instead of longs.  Is there any way to automatically have Spring convert longs to strings without me having to cast every return value in my controllers?</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13038455,"title":"Spring getBean(Class<T> interfaceToCreate, Object... args) method is missing?","body":"<p>I was trying to create factory class for my spring beans</p>\n\n<pre><code>public interface MyBean implements TBean{}\n\n@Component\n@Scope(\"prototype\")\npublic class MyBeanImpl implements MyBean{\n   public MyBeanImpl(Request request){//..}\n}\n\n@Component\npublic class MyFactory {\n    public &lt;T extends TBean&gt; T createbean(Class&lt;T&gt; interfaceToCreate, Object... args) {\n        return (T)AppContext.getApplicationContext().getBean(interfaceToCreate, args);\n    }\n}\n</code></pre>\n\n<p>method <code>AppContext.getApplicationContext()</code> returns <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContext.html\" rel=\"nofollow\">ApplicationContext</a> object</p>\n\n<p>here I should be be able to create a spring bean like:</p>\n\n<pre><code>@Autowired\nprotected MyFactory factory;\n\nRequest myRequest;\nvoid somemethod(){\n    factory.createbean(MyBean.class, myRequest)\n}\n</code></pre>\n\n<p>but <a href=\"http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/beans/factory/BeanFactory.html\" rel=\"nofollow\">BeanFactory</a>  does not expose any method like: <code>getBean(Class&lt;T&gt; clazz, Object... args)</code> And I do not have default constructor for <code>MyBeanImpl</code> class </p>\n\n<p>Does anyone know how to accomplish that?</p>\n"},{"tags":["java","eclipse","spring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13037998,"title":"Spring Bean Compilation issue","body":"<p>I am messing around and trying out some sample spring code. In this instance i am trying to create a string and use it inside another bean. the other bean sets the string in a class and then when i call that class hopefully it should print out the message. however, i get an error message. Please could someone suggest what might be wrong here?</p>\n\n<pre><code>public static void main(String[] args) {\n    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"MyConfig.xml\");\n\nSetterMessage message = (SetterMessage) applicationContext.getBean(\"setStringFromBean\");\nSystem.out.println(message.getMessage()); \n}\n\npublic class SetterMessage {\n\n    private String message = null;\n    /**\n     * Gets message.\n     */\n    public String getMessage() {\n        return message;\n    }\n\n    /**\n     * Sets message.\n     */\n    public void setMessage(String message) {\n        this.message = message;\n    }\n}\n\n&lt;bean id=\"createString\" class=\"java.lang.String\"&gt;\n&lt;constructor-arg value=\"Hello from a bean\"&lt;/constructor-arg&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"setStringFromBean\" class=\"SetterMessage\"&gt;\n    &lt;property name=\"message\" ref=\"createString\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>the error is</p>\n\n<blockquote>\n  <p>Oct 23, 2012 8:36:58 PM\n  org.springframework.context.support.AbstractApplicationContext\n  prepareRefresh INFO: Refreshing\n  org.springframework.context.support.ClassPathXmlApplicationContext@4447393f:\n  startup date [Tue Oct 23 20:36:58 BST 2012]; root of context hierarchy\n  Oct 23, 2012 8:36:58 PM\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader\n  loadBeanDefinitions INFO: Loading XML bean definitions from class path\n  resource [MyConfig.xml] Oct 23, 2012 8:36:58 PM\n  org.springframework.beans.factory.support.DefaultListableBeanFactory\n  preInstantiateSingletons INFO: Pre-instantiating singletons in\n  org.springframework.beans.factory.support.DefaultListableBeanFactory@643ae941:\n  defining beans [defaultMessage,constructorBean,setterMessage]; root of\n  factory hierarchy Exception in thread \"main\"\n  org.springframework.beans.factory.NoSuchBeanDefinitionException: No\n  bean named 'setStringFromBean' is defined     at\n  org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:549)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at\n  org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1106)\n    at Main.main(Main.java:13)</p>\n</blockquote>\n"},{"tags":["spring","cron","quartz-scheduler"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13038272,"title":"Spring quartz schedule expression","body":"<p>Java spring scheduler quartz</p>\n\n<p>I have old code with express <code>schedule=\"*/10 * * * * *\"</code> i do not understand what does that mean ?</p>\n\n<p>Even after readying the following file can't figure out what does above Cron expression do.\n<a href=\"http://quartz-scheduler.org/api/2.0.0/org/quartz/CronTrigger.html\" rel=\"nofollow\">http://quartz-scheduler.org/api/2.0.0/org/quartz/CronTrigger.html</a></p>\n"},{"tags":["spring","integration","spring-integration","inbound","poller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13037357,"title":"Reading of files with max-messages-per-poll=10 and prevent-duplicates=false","body":"<p>I'm trying to read files from the directory. If file cannot be processed it stays there to be tried later.</p>\n\n<pre><code>&lt;file:inbound-channel-adapter prevent-duplicates=\"false\" id=\"fileInput\" directory=\"file:${java.io.dir}/input-data\" auto-create-directory=\"true\" filter=\"compositeFileFilterBean\"/&gt;\n\n    &lt;integration:poller id=\"poller\" max-messages-per-poll=\"10\" default=\"true\" &gt;\n        &lt;integration:interval-trigger interval=\"60\" time-unit=\"SECONDS\" /&gt;\n    &lt;/integration:poller&gt;\n</code></pre>\n\n<p>The problem is if max-messages-per-poll set to, say 10, then each poll will return exactly 10 messages, even if there is only 1 file (i.e. all 10 messages will be the same).</p>\n"},{"tags":["java","json","spring","jackson"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13036931,"title":"Can I ignore just a setter w/ Jackson & Spring?","body":"<p>I have a situation where I am passing back n forth an object from Java to Javascript client and it's being serialized by the built in Jackson mapper in Spring 3 (using the @RequestBody / @ResponseBody and application/json content type)</p>\n\n<p>The problem I have is some classes implement from an interface which has a getter but no setter. </p>\n\n<p>I do want the getter value available from the client side so I cannot use @JsonIgnore annotation because then it ignores the property entirely, both serializing and deserializing. I need the property when serialized.</p>\n\n<p>Any other way to do this?</p>\n"},{"tags":["java","spring","spring-mvc","soa"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12943116,"title":"Avoiding tight coupling between Service classes","body":"<p>Say I have 2 service classes:</p>\n\n<pre><code>UserService\nProductService\n</code></pre>\n\n<p>Is it wrong if within my ProductService class I inject the UserService?</p>\n\n<pre><code>public class ProductserviceImpl implements ProductService {\n\n\n  @Autowired\n  UserService userService;\n\n\n  @Override\n  public void someThing() {\n      ..\n      userService.otherThing(..);\n      ..\n  }\n\n}\n</code></pre>\n\n<p>I know as an alternative <strong>I could create yet another class that injects both UserService and ProductService, but coming up with a name for this class is very tricky :)</strong>  Is there a name for these types of classes in the SOA world?</p>\n"},{"tags":["java","spring","mvc","session","struts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13038096,"title":"Calling Two Actions together in Struts-SpringMvc apps","body":"<p>I have website running on 2 web apps, struts based message board running as APP-1, and Spring MVC based web site as APP-2. The sign-in procedure is dual, mean either user can sign-in from APP-1 or APP-2. It creates cookie on every sign-in and each app can detect that cookie.</p>\n\n<p>Now, the problem is with the sign-out. The sign-out is a REST call, so, if I sign-out from APP-1, I have to send an action for APP-2 for sign-out then redirect to the main page.</p>\n\n<p>The problem is with forward or redirect I can do only one thing. Example:</p>\n\n<pre><code>void method() {\n  response.sendRedirect(url1); // nothing return, just a signout Rest action...\n  response.sendRedirect(url2); // it will redirect to other page.....any idea how it work...\n}\n</code></pre>\n\n<p>I wanna run these two action together in a Spring MVC controller. And Both should run in same session. I tried with other way through URL calling REST action:</p>\n\n<pre><code>  Sign-Out Action....\n  Then.....REST Signout Action for APP-2 through URL....It runs but not in same session...\n  URL urlAction = new URL(url);\n  HttpURLConnection conn = (HttpURLConnection)urlAction.openConnection();\n  conn.setRequestMethod(\"GET\");\n  BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n  then \n  redirect:\"www.home.com\";\n</code></pre>\n\n<p>It works but not running in same session...Any idea how to solve this issue.....</p>\n\n<p>I also try with HttpClient but no luck...</p>\n\n<pre><code>  DefaultHttpClient httpClient = new DefaultHttpClient();\n  HttpGet getRequest = new HttpGet(\"Rest Action URL....\");\n  HttpResponse res = httpClient.execute(getRequest);\n</code></pre>\n"},{"tags":["spring","grails","priority","url-mapping","urlmapping"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13037144,"title":"Grails: Setting URL mapping priorities","body":"<p>I sometimes come across a situation where I'm trying to set URLMappings as such:</p>\n\n<pre>\n    /** -> ContentController\n    /static/${image}/{imageNumber} -> ResourcesController\n</pre>\n\n<p>Then when I visit <code>/static/image/13</code> it will often hit the <code>/**</code> instead of the <pre>/static/*/*</pre>. How do I tell Spring / Grails to rather try and match the other one first?</p>\n\n<p>Any advice much appreciated!</p>\n"},{"tags":["spring","build","gradle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13022820,"title":"Getting compilation error while building spring using gradle","body":"<p>I am learning to use Spring and gradle by downloading the spring source using git. I have downloaded it using \n     git clone git://github.com/SpringSource/spring-framework.git\nAlso I have setup gradle in my local.</p>\n\n<p>While I am trying to execute</p>\n\n<p>gradle build</p>\n\n<p>I am getting compilation error as follows:</p>\n\n<pre><code>C:\\Users\\mahendran\\spring-framework&gt;gradle build\n:spring-core:asmRepackJar\n:spring-core:cglibRepackJar\n:spring-core:compileJava\nC:\\Users\\mahendran\\spring-framework\\spring-core\\src\\main\\java\\org\\springframework\\util\\xml\\StaxUtils.java:318: \ncannot find symbol symbol : method newFactory()\nlocation: class javax.xml.stream.XMLEventFactory\n            return new XMLEventStreamWriter(eventWriter, XMLEventFactory.newFactory());\n                                                                        ^\nNote: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: Some input files use unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n1 error\n:spring-core:compileJava FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':spring-core:compileJava'.\nCompilation failed; see the compiler error output for details.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 1 mins 5.58 secs\n</code></pre>\n"},{"tags":["spring","spring-mvc","session-variables"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13036077,"title":"Spring @SessionAttributes and status.setComplete()","body":"<p>I was reviewing Spring documentation for <code>@SessionAttributes</code> annotation, and I found the following:</p>\n\n<blockquote>\n  <p>The type-level @SessionAttributes annotation declares session\n  attributes used by a specific handler.</p>\n</blockquote>\n\n<p>Does that mean that when I made a request to another controller (handler) all @SessionAttributes get removed? Or I have to make a explict call to <code>status.setComplete()</code>? What I'm trying to avoid is to have unnecesary objects in my HttpSession.</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13035801,"title":"Internal forwarding from one controller method to another (Spring-MVC)","body":"<p>I am new to spring so not sure how i can do this.I have to handle 2 use case by using single controller method.\nMethod is already in place so i can not change the signature of it as it can break all other functionalists, here is the method signature</p>\n\n<pre><code>@RequestMapping(value = \"/edit-address\", method = RequestMethod.POST)\n    public @ResponseBody JsonResponse editAddress()\n</code></pre>\n\n<p><code>JsonResponse</code> is a custom object with following signature</p>\n\n<pre><code>private String status;\nprivate Object result;\nprivate String steps;\n</code></pre>\n\n<p>There is one more requirement where we need to validate this address from third part and based on the return results need to show pop-up.\nI can easily show popu-up if the method signature was not a custom object, but now not sure how i can do this</p>\n\n<p>is there a way to achieve any of the followwing</p>\n\n<ol>\n<li>To send JSP content back to the view in place of JSON object from this method.</li>\n<li>To internally forward control to another method in controller which can send back view to the UI</li>\n</ol>\n"},{"tags":["spring","spring-mvc","form-handling"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13035686,"title":"How to pass data through POST to different TAB?","body":"<p>I have developed an application using Spring-MVC and hibernate which involves <code>user registration</code> .\nAnd there are many field such as name , age, email_id and it is working fine .</p>\n\n<p>Now I want to give my website Advertisement on other sites. \nSo ad will be a small clickable picture.</p>\n\n<p>To explain this i will take an example , you must have seen ads of <code>matrimonials</code>websites . </p>\n\n<p>In their ADS , they asks us for name , age and their is a submit button. \nOn clciking on the submit button ,they take us to the main registration page where the fields which we have entered already comes in the textboxes in our case it is name and age and more detail is to enter there.</p>\n\n<p>In my application , i also want to ask just <code>name</code>  and after they click on submit button .\nThey should be taken to main registration page on <code>new tab</code>.\nBut their name should come in the textbox.</p>\n\n<p>How do they do this?\nHow i can achieve this?</p>\n"},{"tags":["spring","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13031932,"title":"Using server name in pattern with multiple http elements Spring Security?","body":"<p>Spring Security 3.1 supports multiple http elements.</p>\n\n<p>I would like to have the security for our mobile site to basically always require a login whereas the \"normal\" website will have a lot more public pages.</p>\n\n<p>I was thinking of using the multiple http elements feature of Spring Security for this, but I can't find anything about using variables such as server name (e.g. m.site.com) in the pattern field.</p>\n\n<p>Can I use request variables in the http pattern field. If so, how?</p>\n\n<p>Here's some of the code i tried:</p>\n\n<pre><code>    &lt;http security=\"none\" pattern=\"/assets/**\"/&gt;\n&lt;!-- \n&lt;http use-expressions=\"true\" request-matcher-ref=\"mobileHttpConfigSelector\" entry-point-ref=\"myAuthenticationProcessingFilterEntryPoint\" &gt;\n\n    &lt;intercept-url pattern=\"/*/*/login.html\"  access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/*/*/registration/**\"  access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/**\"  access=\"isAuthenticated()\" /&gt;\n\n    &lt;anonymous enabled=\"true\" granted-authority=\"ROLE_ANONYMOUS\"/&gt;\n    &lt;remember-me services-ref=\"rememberMeServices\" key=\"${msa.security.key}\" use-secure-cookie=\"true\"/&gt;\n    &lt;custom-filter position=\"CONCURRENT_SESSION_FILTER\" ref=\"concurrencyFilter\" /&gt;\n    &lt;custom-filter position=\"FORM_LOGIN_FILTER\" ref=\"myUserPassFilter\"/&gt;\n    &lt;custom-filter position=\"LOGOUT_FILTER\" ref=\"myLogoutFilter\"/&gt;\n    &lt;custom-filter ref=\"countrySelectFilter\" before=\"FIRST\" /&gt;\n    &lt;custom-filter ref=\"userAgentFilter\" before=\"LAST\" /&gt;\n\n    &lt;session-management invalid-session-url=\"/\" session-authentication-strategy-ref=\"sas\"&gt;\n    &lt;/session-management&gt;\n&lt;/http&gt;\n--&gt;\n&lt;http use-expressions=\"true\" entry-point-ref=\"myAuthenticationProcessingFilterEntryPoint\" &gt;\n\n    &lt;intercept-url pattern=\"/*/*/account/**\" access=\"isAuthenticated()\" /&gt;\n\n    &lt;intercept-url pattern=\"/**\"  access=\"permitAll\" /&gt;\n\n    &lt;anonymous enabled=\"true\" granted-authority=\"ROLE_ANONYMOUS\"/&gt;\n    &lt;remember-me services-ref=\"rememberMeServices\" key=\"${msa.security.key}\" use-secure-cookie=\"true\"/&gt;\n\n    &lt;custom-filter position=\"CONCURRENT_SESSION_FILTER\" ref=\"concurrencyFilter\" /&gt;\n    &lt;custom-filter position=\"FORM_LOGIN_FILTER\" ref=\"myUserPassFilter\"/&gt;\n    &lt;custom-filter position=\"LOGOUT_FILTER\" ref=\"myLogoutFilter\"/&gt;\n    &lt;custom-filter ref=\"countrySelectFilter\" before=\"FIRST\" /&gt;\n    &lt;custom-filter ref=\"userAgentFilter\" before=\"LAST\" /&gt;\n\n    &lt;session-management invalid-session-url=\"/\" session-authentication-strategy-ref=\"sas\"&gt;\n        &lt;!-- &lt;concurrency-control max-sessions=\"2\" error-if-maximum-exceeded=\"false\" session-registry-alias=\"sessionRegistry\"/&gt;--&gt;\n    &lt;/session-management&gt;\n&lt;/http&gt;\n&lt;global-method-security secured-annotations=\"enabled\" pre-post-annotations=\"enabled\"/&gt;\n\n&lt;beans:bean id=\"mobileHttpConfigSelector\" class=\"nl.msw.compraventa.interceptor.security.MobileHttpConfigSelector\"/&gt;\n</code></pre>\n\n<p>The http section with mobileHttpConfigSelector has been commented out because if I activate I get No unique bean of type [org.springframework.security.web.context.SecurityContextRepository] is defined.</p>\n\n<p>Kind regards,\nMarc</p>\n"},{"tags":["java","spring","spring-integration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12978068,"title":"Spring Integration Wiretap and Exceptions","body":"<p>I'm using Spring Integration and have set a wiretap on a channel so that I can log some data. One concern I have though is that if an Exception is thrown during the logging, the message is not passed along the channel that I am snooping on.</p>\n\n<p>I would have thought that the purpose of a wiretap was to allow me to listen in on the message without making myself known, but this appears not to be the case.</p>\n\n<p>Other than me wrapping the whole thing up in a try/catch block, is there any way to ignore exceptions in the wiretap ? </p>\n"},{"tags":["spring","spring-security","acl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13020905,"title":"Getting all available permissions spring security acl","body":"<p>I have to implement access controls in my application and I am using spring ACLs for it. My model has User, groups, permissions.</p>\n\n<p>The problem I am trying to solve is to get permissions on a domain object for a user. I was able to get all the access control entries for that user (principal sid, and group sids), and using that I was able to get a final set of permissions by taking a union over all the permissions. Lets say the combined mask is 111, which would be Read, Write, and Create permissions going by the permissions defined in BasePermissions.<br>\nThe problem I am facing now is I cant find any way to get a list of all defined base permissions so that I can compare the mask to individual permissions. The base permission class does not seem to provide any such method. I do not want to hardcode cases in an if-then clause, since the number of permissions might increase in future.</p>\n\n<p>Any pointers would be appreciated. Thanks. </p>\n"},{"tags":["spring","spring-3"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13034875,"title":"spring mvc:annotation-driven java.lang.NoClassDefFoundError: javax/servlet/AsyncListener","body":"<p>I have developed an app with spring 3.0, which was working fine.</p>\n\n<p>i need to use some features of <code>&lt;mvc:annotation-driven/&gt;</code> when i am including it in the config file i am receiving errors.</p>\n\n<p>below is the code i have used and the errors:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:context=\"http://www.springframework.org/schema/context\" \nxmlns:tx=\"http://www.springframework.org/schema/tx\"\nxmlns:mvc=\"http://www.springframework.org/schema/mvc\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans-3.0.xsd\nhttp://www.springframework.org/schema/context \nhttp://www.springframework.org/schema/context/spring-context-3.0.xsd\nhttp://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd \nhttp://www.springframework.org/schema/tx\nhttp://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"&gt;\n\n    &lt;mvc:annotation-driven /&gt;\n......\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>Stack trace:</strong></p>\n\n<pre><code>java.lang.NoClassDefFoundError: javax/servlet/AsyncListener\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClassCond(Unknown Source)\n    at java.lang.ClassLoader.defineClass(Unknown Source)\n    at java.security.SecureClassLoader.defineClass(Unknown Source)\n    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2527)\n    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1010)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1483)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1361)\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)\n    at java.lang.Class.getDeclaredMethods(Unknown Source)\n    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:159)\n    at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:104)\n    at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:87)\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:233)\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:622)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)\n    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:634)\n    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:591)\n    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:648)\n    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:511)\n    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:452)\n    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)\n    at javax.servlet.GenericServlet.init(GenericServlet.java:212)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)\n    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)\n    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4187)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4496)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)\n    at org.apache.catalina.core.StandardService.start(StandardService.java:519)\n    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:581)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\nCaused by: java.lang.ClassNotFoundException: javax.servlet.AsyncListener\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1516)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1361)\n    ... 42 more\nOct 23, 2012 9:24:23 PM org.apache.catalina.core.StandardContext loadOnStartup\n</code></pre>\n"},{"tags":["java","spring","properties","javabeans","ref"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13033448,"title":"Creating property to a ref bean, Spring","body":"<p>I have searched in this site a lot of spring.. but i'm really new to this..\nso here is my question:</p>\n\n<p>I have 3 main classes i'm gonna put it like this..</p>\n\n<pre><code> public class User\n {\n    private String name;\n    private ArrayList&lt;Car&gt; cars;\n\n    public ArrayList&lt;Car&gt; getCars() \n    {\n       return cars;\n    }\n\n    public void setCars(ArrayList&lt;Car&gt; cars) \n    {\n       this.cars= cars;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n       this.name = name;\n    }\n }\n\n public class Car\n {\n    private String type;\n    private ArrayList&lt;Wheel&gt; wheels;\n\n    public ArrayList&lt;Wheel&gt; getWheels() \n    {\n       return wheels;\n    }\n\n    public void setWheels(ArrayList&lt;Wheel&gt; wheels) \n    {\n       this.wheels= wheels;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n       this.type= type;\n    }\n }\n\n public class Wheel\n {\n    private String name;        \n\n    public String getName() {\n        return name;\n    }\n\n    public void setType(String name) {\n       this.name= name;\n    }\n }\n</code></pre>\n\n<p>That's the Java code.. this is just an example. So i have 3 classes, as u see one is the user that can have one or many cars, then is the car that can have one or many wheels..</p>\n\n<p>In my Spring.xml i want to do something like this..</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:util=\"http://www.springframework.org/schema/util\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd\"&gt;\n\n    &lt;bean id=\"car1\" class=\"Car\"&gt;\n        &lt;property name=\"type\" value=\"motorcycle\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"wheel1\" class=\"Wheel\"&gt;\n        &lt;property name=\"name\" value=\"one\"/&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"wheel2\" class=\"Wheel\"&gt;\n        &lt;property name=\"name\" value=\"two\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"user1\" class=\"User\"&gt;\n        &lt;property name=\"name\" value=\"Me\"/&gt;\n        &lt;property name=\"cars\"&gt;\n            &lt;list value-type=\"Car\"&gt;\n                &lt;ref bean=\"car1\"&gt;\n                  &lt;property name=\"wheels\"&gt;\n                     &lt;ref bean=\"wheel1\"&gt;\n                     &lt;ref bean=\"wheel2\"&gt;\n                  &lt;/property\"&gt;\n                &lt;/ref&gt;\n            &lt;/list&gt; \n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p></p>\n\n<p>If u see this spring.. i want to create the user instance and the cars and wheels by spring-code.. but it won't let me do this.. cause i can't create a ref bean with a property children.. so i can't add wheels to my ref bean car.. how can i do this? or this can't be done this way, maybe is another solution to this.. dunno.. Thanks in advance..</p>\n\n<p>Sorry for my bad english.</p>\n"},{"tags":["java","spring"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13034515,"title":"How to exclude a class from Spring in applicationContext?","body":"<p>Here we only want to exclude a class from certain classpath, say</p>\n\n<p><code>com.abc.projectA.service.orderService.sectionA.orderService.class</code></p>\n\n<p>However there is another class with same name but in different classpath</p>\n\n<p><code>com.abc.projectA.service.orderService.sectionB.orderService.class</code></p>\n\n<p>so that only filer by class name is not going to work.</p>\n\n<p>But I tried the following method:</p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.abc\"&gt;\n    &lt;!--other filters--&gt;\n    &lt;!--.......--&gt;\n    &lt;context:exclude-filter expression=\"projectA\\.service\\.orderService\\.sectionA\\.orderService\" type=\"regex\" /&gt;\n&lt;/context:component-scan&gt;\n</code></pre>\n\n<p>It doesn't work. So I bet the <code>&lt;context:exclude-filter&gt;</code> only valid on package level but not for specific class? If so, how to exclude a class from bean injection so that we can pick and choose with class to get wired with same class name?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13033907,"title":"What is the most Spring-like way to wire a String property to another bean's method?","body":"<p>I've got two beans, and I'd like to wire the String property of one bean to the String value of the property of another (which is computed from the environment of the program). What is the best way to wire these together?</p>\n\n<p>The best solution I can think of is:</p>\n\n<pre><code>&lt;bean id=\"thisBean\"&gt;\n  &lt;property name=\"foo\"&gt;\n    &lt;bean factory-bean=\"otherBean\" factory-method=\"getStringForThisBean\" /&gt;\n  &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>There are other ways to do it, like using SpringEL or working inside Spring's property system, but this is the easiest. It just doesn't feel right creating a heavy-weight bean to store a String value.</p>\n\n<p>Is there a better way?</p>\n"},{"tags":["java","spring","hibernate","ehcache"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13032552,"title":"A soft-locked cache entry was removed already. Out of balance lock/unlock sequences?","body":"<p>I'am using java 1.6, spring 2.5, hibernate 3.3.1 and ehcache 2.6.0. Programs is connected to two databases. There is two ehcache configurations, but in this case only one is used.\nAt the end of the batch the programs return this error :</p>\n\n<pre><code>    2012-10-23 15:44:43,406 ERROR (AbstractReadWriteEhcacheAccessStrategy.java:159) - Cache dao.data.MyObject Key dao.data.MyObject#28 Lockable : null\nA soft-locked cache entry was removed already. Out of balance lock/unlock sequences ?\n</code></pre>\n\n<p>What can produce this error ?</p>\n"},{"tags":["spring","classpath","file-not-found"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12673271,"title":"Error \"classpath resource cannot be opened because it does not exist\"","body":"<p>I'm trying to develop a simple spring 3 web application with a connection to a small database, just to get used to it!</p>\n\n<p>I defined the database connection in a different xml file and tried to include it in the web.xml file via <code>&lt;listener&gt;</code> and <code>&lt;context-param&gt;</code> tag. </p>\n\n<p>Now I created a different folder for xml definition files and added it to the classpath, but the error mentioned above is still there! </p>\n\n<p>Does anybody have a solution for this?</p>\n"},{"tags":["spring","jpa","spring-data","criteriaquery"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13033121,"title":"Spring Criteria Query date formatting grouping","body":"<p>I am using Oracle 11g, Spring Data.</p>\n\n<p>I want to write a Specification using Spring Data. Here is the table Structure:</p>\n\n<pre><code>Column name        Type\n\nContract_id         BIGINT    \nContract_date       TimeStamp    \nContract_Amount     INTEGER\n</code></pre>\n\n<p>Data in this table is like:</p>\n\n<pre><code>  Contract_id                Contract_date          Contract_Amount     \n      1                   2012-10-22 10:00:00.0        541\n      2                   2012-10-23 12:30:00.0         67\n      3                   2012-10-20 17:00:00.0        874\n      4                   2012-10-24 12:30:00.0         10\n</code></pre>\n\n<p>Now, I want to get the data in the following format:</p>\n\n<pre><code>Hour     Total Amount\n10:00        541\n12:30         77 \n......\n</code></pre>\n\n<p>I am using Spring Data and need to write this as a Specification using Criteria Query.</p>\n\n<p>Don't know how to get the hour:minute format grouping done.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","session","servlets","spring-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":367,"score":1,"question_id":9588455,"title":"Is there a \"Spring 3 MVC way\" to listen to the end session event?","body":"<p>I would like to delete some temporal files when user session finishes. The information associated with the files is stored in an object annotated with <code>@SessionAttributes</code>. </p>\n\n<p>The only way I've found to deal with this is creating an <code>HttpSessionListener</code>.</p>\n\n<p>Is there a higher level, simplified, Springy way to listen to the session end event where I could easily get my annotated object?</p>\n"},{"tags":["spring","spring-mvc","dojo","dijit","spring-webflow"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12962010,"title":"How do I make a Textarea field with Spring Webflow and Dojo(dijit)","body":"<p>I been trying to find out how to make a textarea field in my Spring Webflow project we are using Dojo (dijit) for the forms.  can someone please help.  below is my code!</p>\n\n<pre><code>&lt;td valign=\"top\"&gt;&lt;form:input path=\"bio\" class=\"value\" /&gt; &lt;script\n\n                            type=\"text/javascript\"&gt;\n                        Spring.addDecoration(new Spring.ElementDecoration({\n                            elementId : \"name\",\n                            widgetType : \"dijit.form.ValidationTextBox\",\n                            widgetAttrs : {\n                                promptMessage : \"Please enter your name from 2 to 10 characters\",\n                                invalidMessage : \"A 2 to 10 characters value is required.\",\n                                required : true,\n                                regExp : \"^[a-zA-Z]{2,10}$\"\n                            }\n                        }));\n                    &lt;/script&gt; &lt;br /&gt;\n                        &lt;p&gt;&lt;/td&gt;\n</code></pre>\n"},{"tags":["spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13012333,"title":"spring persistence xml","body":"<p>What is the difference between:</p>\n\n<p>persistenc.xml can be configured with hibernate properties OR Javax.persistence properties.</p>\n\n<p>What scenarios would you use either one.</p>\n\n<p>I tried using javax.persistence but my spring app would not work.. changed it to hibernate and it started working.</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1934,"score":0,"question_id":8044277,"title":"Spring MVC Interceptor Mapping Problems","body":"<p>I have this segment of XML:</p>\n\n<pre><code>&lt;mvc:interceptors&gt;\n    &lt;mvc:interceptor&gt;\n        &lt;mvc:mapping path=\"/statics/**\" /&gt;\n        &lt;bean class=\"com.company.website.servlet.StaticsHandlerInterceptor\" /&gt;\n    &lt;/mvc:interceptor&gt;\n    &lt;mvc:interceptor&gt;\n        &lt;mvc:mapping path=\"/data/**\" /&gt;\n        &lt;bean class=\"com.company.website.servlet.AJAXHandlerInterceptor\" /&gt;\n    &lt;/mvc:interceptor&gt;\n    &lt;mvc:interceptor&gt;\n        &lt;mvc:mapping path=\"/**\" /&gt;\n        &lt;bean class=\"com.company.website.servlet.PageHandlerInterceptor\" /&gt;\n    &lt;/mvc:interceptor&gt;\n&lt;/mvc:interceptors&gt;\n</code></pre>\n\n<p>I have three different interceptors for a reason, though the <code>StaticsHandlerInterceptor</code> is just the <code>preHandle</code> method returning <code>true</code> (for all of my static content (js, css, etc)). The second one is for AJAX requests. The third one is for actual pages. What I see happening is the statics and the AJAX interceptors being called when they are supposed to be; however, with them, the page interceptor is always being called. I only want the page interceptor to be called for pages. How do I make that happen?</p>\n"},{"tags":["java","spring"],"answer_count":2,"favorite_count":8,"up_vote_count":7,"down_vote_count":0,"view_count":4090,"score":7,"question_id":748377,"title":"How do you make a multi-module spring configuration?","body":"<p>I have a multi-module (maven) spring build. All the modules publish some beans, and most also consume beans defined further down the dependency graph. Although most of it is annotation declared beans, almost every module also has one or two xml-declared beans.</p>\n\n<p>Although we have a half-decent solution, but I am really wondering what is the correct/optimal way to organize the xml files in this scenario? Do you use import between the modules or is there some other way ? Do you put all the xml files in one place or spread them around according to the dependency graph? How does your solution handle partial spring contexts (typical integration tests) ?</p>\n\n<p>I'd also like to have this organized in a way that lets me leverage my IDE's spring support optimally (IDEA and a few eclipse users).</p>\n"},{"tags":["spring","rest","spring-data-jpa","hateoas","spring-data-rest"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12879975,"title":"Spring Data REST URI vs. entity ID","body":"<p>Spring Data REST decouples RESTful IDs (viz., URIs) from entity IDs, and I'm having trouble linking them back up when saving new objects. See the interesting discussion around this decoupling at <a href=\"https://github.com/SpringSource/spring-data-rest/issues/13\" rel=\"nofollow\">https://github.com/SpringSource/spring-data-rest/issues/13</a>.</p>\n\n<p>Suppose that a client app wants to create a new <code>Ticket</code> resource with an associated <code>TicketCategory</code> resource. I want to post the <code>Ticket</code> against a remote Spring Data REST endpoint. The <code>Ticket</code> doesn't yet have an ID since it's new. The <code>TicketCategory</code> has an ID, but on the client it's a URI per the discussion above. So when I save the <code>Ticket</code>, Spring Data REST passes the <code>Ticket</code> to Spring Data JPA, which doesn't like it: Spring Data JPA thinks that the <code>TicketCategory</code>&mdash;having no entity ID&mdash;is transient:</p>\n\n<pre><code>org.hibernate.TransientPropertyValueException:\n    Not-null property references a transient value -\n    transient instance must be saved before current operation:\n    com.springinpractice.ch13.helpdesk.model.Ticket.category -&gt;\n    com.springinpractice.ch13.helpdesk.model.TicketCategory\n</code></pre>\n\n<p><strong>UPDATE:</strong> The documentation at</p>\n\n<p><a href=\"https://github.com/SpringSource/spring-data-rest/wiki/JPA-Repository-REST-Exporter\" rel=\"nofollow\">https://github.com/SpringSource/spring-data-rest/wiki/JPA-Repository-REST-Exporter</a></p>\n\n<p>has a section called \"Updating relationships\" that describes a scheme using HTTP POST to establish relationships between entities. I don't know if that's the only approach currently available, but it seems that this approach would require leaving the association null on the initial post and then updating it with a subsequent post. In the case above that would be undesirable since the category field is required (<code>@NotNull</code>) for tickets.</p>\n"},{"tags":["java","spring","hibernate","jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13006398,"title":"unable to persist entity in spring tests with JpaTransactionManager","body":"<p>I'm trying to persist an entity using. My test case works (data are persisted in db) when I handle my transaction myself.</p>\n\n<pre><code>public User saveUser(User user) {\n    getEm().getTransaction().begin();\n    getEm().persist(user);\n    getEm().getTransaction().commit();      \n    return user;\n}\n</code></pre>\n\n<p>(entity manager comes from a template class which my DAO class extends)</p>\n\n<p>It stops persisiting data when I configure spring to handle transactions.</p>\n\n<p>test-context.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd \n    http://www.springframework.org/schema/jdbc \n    http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd \n    http://www.springframework.org/schema/tx \n    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\"&gt;\n\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n    &lt;bean id=\"entityManagerFactory\"\n        class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"domainPU\" /&gt;\n        &lt;property name=\"loadTimeWeaver\"&gt;\n            &lt;bean\n                class=\"org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"\n        destroy-method=\"close\"&gt;\n        &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:mysql://192.168.5.111/testdb\" /&gt;\n        &lt;property name=\"username\" value=\"sdgdsgs\" /&gt;\n        &lt;property name=\"password\" value=\"sdfgdsg\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\"&gt;\n            &lt;ref local=\"entityManagerFactory\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>UsersRepositoryTest:</p>\n\n<pre><code>@ContextConfiguration(locations = { \"classpath:test-context.xml\", \"classpath:module-context.xml\" })\n@TransactionConfiguration(defaultRollback=false)\npublic class UsersRepositoryTest extends AbstractTransactionalTestNGSpringContextTests {\n\n    @Autowired\n    private UsersRepository usersRepository;\n\n    @Test(dependsOnMethods = {\"findUserByLogin\"})\n    public void registerUser() throws DataAccessException {\n        User myUser = getUserHomer();\n        usersRepository.saveUser(myUser);\n\n        User returnedUser = usersRepository.getUserByLogin(myUser.getLogin());\n\n        assertNotNull(returnedUser);\n                ...\n    }\n}\n</code></pre>\n\n<p>stacktrace:</p>\n\n<pre><code>2012-10-22 08:26:26 org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean createNativeEntityManagerFactory\nINFO: Building JPA container EntityManagerFactory for persistence unit 'domainPU'\n2012-10-22 08:26:26 org.hibernate.annotations.common.Version &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}\n2012-10-22 08:26:26 org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {4.1.6.Final}\n2012-10-22 08:26:26 org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\n2012-10-22 08:26:26 org.hibernate.cfg.Environment buildBytecodeProvider\nINFO: HHH000021: Bytecode provider name : javassist\n2012-10-22 08:26:26 org.hibernate.ejb.Ejb3Configuration configure\nINFO: HHH000204: Processing PersistenceUnitInfo [\n    name: domainPU\n    ...]\n2012-10-22 08:26:26 org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator instantiateExplicitConnectionProvider\nINFO: HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider\n2012-10-22 08:26:27 org.hibernate.dialect.Dialect &lt;init&gt;\nINFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\n2012-10-22 08:26:27 org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation\nINFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException\n2012-10-22 08:26:27 org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService\nINFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory\n2012-10-22 08:26:27 org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory &lt;init&gt;\nINFO: HHH000397: Using ASTQueryTranslatorFactory\n2012-10-22 08:26:27 org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization\nINFO: Bean 'entityManagerFactory' of type [class org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2012-10-22 08:26:27 org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization\nINFO: Bean 'hibernateTranslator' of type [class org.springframework.orm.hibernate4.HibernateExceptionTranslator] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2012-10-22 08:26:27 org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons\nINFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5c28305d: defining beans [org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,entityManagerFactory,dataSource,transactionManager,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,hibernateTranslator,usersDao,zoneDao,usersRepository,zoneRepository,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy\n2012-10-22 08:26:27 org.springframework.test.context.transaction.TransactionalTestExecutionListener startNewTransaction\nINFO: Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3341b736]; rollback [false]\nHibernate: select user0_.id as id0_, user0_.active as active0_, user0_.creation_date as creation3_0_, user0_.email as email0_, user0_.last_login_date as last5_0_, user0_.login as login0_, user0_.password as password0_, user0_1_.AVATAR as AVATAR1_, user0_1_.FIRST_NAME as FIRST2_1_, user0_1_.ID as ID1_, user0_1_.LAST_NAME as LAST4_1_, case when user0_1_.id is not null then 1 when user0_.id is not null then 0 end as clazz_ from user user0_ left outer join client user0_1_ on user0_.id=user0_1_.id where user0_.login=?\nHibernate: select phone0_.id as id2_0_, phone0_.phone_number as phone2_2_0_, phone0_.user_id as user3_2_0_ from phone phone0_ where phone0_.id=?\nHibernate: select address0_.ID as ID6_0_, address0_.apartment_number as apartment2_6_0_, address0_.city as city6_0_, address0_.country as country6_0_, address0_.house_number as house5_6_0_, address0_.post_code as post6_6_0_, address0_.street as street6_0_ from address address0_ where address0_.ID=?\nHibernate: select user0_.id as id0_, user0_.active as active0_, user0_.creation_date as creation3_0_, user0_.email as email0_, user0_.last_login_date as last5_0_, user0_.login as login0_, user0_.password as password0_, user0_1_.AVATAR as AVATAR1_, user0_1_.FIRST_NAME as FIRST2_1_, user0_1_.ID as ID1_, user0_1_.LAST_NAME as LAST4_1_, case when user0_1_.id is not null then 1 when user0_.id is not null then 0 end as clazz_ from user user0_ left outer join client user0_1_ on user0_.id=user0_1_.id where user0_.login=?\n2012-10-22 08:26:27 org.springframework.test.context.transaction.TransactionalTestExecutionListener endTransaction\nINFO: Committed transaction after test execution for test context [[TestContext@63edf84f testClass = UsersRepositoryTest, testInstance = pl.eports.zonen.user.repository.UsersRepositoryTest@7e3bc473, testMethod = findUserByLogin@UsersRepositoryTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1c493dca testClass = UsersRepositoryTest, locations = '{classpath:test-context.xml, classpath:module-context.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]]\n2012-10-22 08:26:27 org.springframework.test.context.transaction.TransactionalTestExecutionListener startNewTransaction\nINFO: Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3341b736]; rollback [false]\nHibernate: select user0_.id as id0_, user0_.active as active0_, user0_.creation_date as creation3_0_, user0_.email as email0_, user0_.last_login_date as last5_0_, user0_.login as login0_, user0_.password as password0_, user0_1_.AVATAR as AVATAR1_, user0_1_.FIRST_NAME as FIRST2_1_, user0_1_.ID as ID1_, user0_1_.LAST_NAME as LAST4_1_, case when user0_1_.id is not null then 1 when user0_.id is not null then 0 end as clazz_ from user user0_ left outer join client user0_1_ on user0_.id=user0_1_.id where user0_.login=?\n2012-10-22 08:26:27 org.springframework.test.context.transaction.TransactionalTestExecutionListener endTransaction\nINFO: Committed transaction after test execution for test context [[TestContext@63edf84f testClass = UsersRepositoryTest, testInstance = pl.eports.zonen.user.repository.UsersRepositoryTest@7e3bc473, testMethod = registerUser@UsersRepositoryTest, testException = java.lang.AssertionError: expected object to not be null, mergedContextConfiguration = [MergedContextConfiguration@1c493dca testClass = UsersRepositoryTest, locations = '{classpath:test-context.xml, classpath:module-context.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]]\nPASSED: findUserByLogin\nFAILED: registerUser\njava.lang.AssertionError: expected object to not be null\n    at org.testng.Assert.fail(Assert.java:94)\n        ...\n</code></pre>\n\n<p>As you can see from the stacktrace, transaction seems to be started and finished, but no sql inserts are produced and no data are inserted into db (data rollback is set to false)</p>\n\n<p>I've tried force flushing data after persist() but spring managed transaction seems to be finished by then.</p>\n\n<p>I've looked for a similar issue on forums but none works.\nI can provide some more code if necessary.</p>\n\n<p>I'm using Spring 3.1.2 and Hibernate 4.1.6.Final</p>\n\n<p><strong>update:</strong></p>\n\n<p>DAO: (@Transactional annotation is put here instead on service layer temporarily)</p>\n\n<pre><code>@Repository\npublic class JpaUsersDAO extends JpaDAOTemplate&lt;User&gt; implements UsersDAO {\n\npublic JpaUsersDAO(EntityManagerFactory factory) {\n    super(factory.createEntityManager(), User.class);\n}\n\n    @Transactional\n    public User saveUser(User user) {\n        getEm().persist(user);  \n        return user;\n    }\n}\n</code></pre>\n\n<p>DAOTemplate:</p>\n\n<pre><code>public abstract class JpaDAOTemplate&lt;T extends Serializable&gt; {\n\n    private EntityManager em;\n\n    private Class&lt;T&gt; clazz;\n\n    public JpaDAOTemplate(EntityManager em, final Class&lt;T&gt; clazz) {\n        this.em = em;\n        this.clazz = clazz;\n    }\n\n    public EntityManager getEm() {\n        return em;\n    }\n\n    public T getById(Integer id) {...}\n    ...\n}\n</code></pre>\n\n<p>bean definition:</p>\n\n<pre><code>&lt;bean id=\"usersDao\"\n    class=\"pl.package.user.dao.impl.JpaUsersDAO\"&gt;\n    &lt;constructor-arg ref=\"entityManagerFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>It seems that the transaction is lost somewhere after selects and before calling getEm().persist() - <strong>org.hibernate.ejb.TransactionImpl#tx is null</strong> when calling persist() but it was <strong>org.hibernate.engine.transaction.internal.jdbc.JDBCTransaction</strong> before the call (when sql select statements calls were made)</p>\n\n<p><strong>update 2</strong>\ndebug level stacktrace:</p>\n\n<pre><code>[2012-10-23 11:15:14,546]DEBUG 38629[main] - org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:365) - Creating new transaction with name [registerUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''\n[2012-10-23 11:15:33,252]DEBUG 57335[main] - org.hibernate.internal.SessionImpl.&lt;init&gt;(SessionImpl.java:316) - Opened session at timestamp: 13509837332\n[2012-10-23 11:15:33,252]DEBUG 57335[main] - org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:368) - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@18025c5c] for JPA transaction\n[2012-10-23 11:15:40,085]DEBUG 64168[main] - org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:158) - begin\n[2012-10-23 11:15:40,101]DEBUG 64184[main] - org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:295) - Obtaining JDBC connection\n[2012-10-23 11:15:40,101]DEBUG 64184[main] - org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:301) - Obtained JDBC connection\n[2012-10-23 11:15:40,101]DEBUG 64184[main] - org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:69) - initial autocommit status: true\n[2012-10-23 11:15:40,101]DEBUG 64184[main] - org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:71) - disabling autocommit\n[2012-10-23 11:16:06,934]DEBUG 91017[main] - org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:407) - Not exposing JPA transaction [org.hibernate.ejb.EntityManagerImpl@18025c5c] as JDBC transaction because JpaDialect [org.springframework.orm.jpa.DefaultJpaDialect@5f343722] does not support JDBC Connection retrieval\n[2012-10-23 11:16:06,934]DEBUG 91017[main] - org.springframework.test.context.transaction.TransactionalTestExecutionListener.isRollback(TransactionalTestExecutionListener.java:357) - No method-level @Rollback override: using default rollback [false] for test context [[TestContext@5809fdee testClass = UsersRepositoryTest, testInstance = pl.eports.zonen.user.repository.UsersRepositoryTest@3fde891b, testMethod = registerUser@UsersRepositoryTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@77fe4169 testClass = UsersRepositoryTest, locations = '{classpath:test-context.xml, classpath:module-context.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]]\n[2012-10-23 11:16:06,934] INFO 91017[main] - org.springframework.test.context.transaction.TransactionalTestExecutionListener.startNewTransaction(TransactionalTestExecutionListener.java:275) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@37977909]; rollback [false]\n[2012-10-23 11:17:08,103]DEBUG152186[main] - org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:245) - Returning cached instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\n[2012-10-23 11:17:08,118]DEBUG152201[main] - org.springframework.transaction.interceptor.AbstractFallbackTransactionAttributeSource.getTransactionAttribute(AbstractFallbackTransactionAttributeSource.java:106) - Adding transactional method 'saveUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''\n[2012-10-23 11:17:08,118]DEBUG152201[main] - org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:245) - Returning cached instance of singleton bean 'txManager'\n[2012-10-23 11:17:27,073]DEBUG171156[main] - org.springframework.orm.jpa.JpaTransactionManager.doGetTransaction(JpaTransactionManager.java:331) - Found thread-bound EntityManager [org.hibernate.ejb.EntityManagerImpl@18025c5c] for JPA transaction\n[2012-10-23 11:18:04,031]DEBUG208114[main] - org.springframework.transaction.support.AbstractPlatformTransactionManager.handleExistingTransaction(AbstractPlatformTransactionManager.java:470) - Participating in existing transaction\n</code></pre>\n\n<p><strong>Final update:</strong></p>\n\n<p>Problem was in the way I injected EntityManagerFactory to my DAO. I used applicationContext.xml configuration file to inject it (this way EMF does not participate in transaction). To have it working I changed my DAO class to:</p>\n\n<pre><code>@Repository\npublic class JpaUsersDAO extends JpaDAOTemplate&lt;User&gt; implements UsersDAO {\n\n    @PersistenceContext\n    private EntityManager em;\n...\n}\n</code></pre>\n"},{"tags":["java","spring","enums"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":13030974,"title":"Spring: How do I inject ENUM in Spring configuration?","body":"<p>I have a <code>ENUM</code> as </p>\n\n<pre><code>package com.myorg.sparrow.s3Environment;\n\nimport javax.annotation.Nonnull;\n\npublic enum DocumentType {\n    Document(\"document/\", \".xml.gz\", \"binary/octet-stream\", \"gzip\", true);\n\n    private final String path;\n    private final String suffix;\n    private final String contentType;\n    private final String contentEncoding;\n    private final Boolean compress;\n\n    private DocumentType(@Nonnull final String path, @Nonnull final String suffix,\n                         @Nonnull final String contentType, @Nonnull final String contentEncoding,\n                         @Nonnull final Boolean compress) {\n        this.path = path;\n        this.suffix = suffix;\n        this.contentType = contentType;\n        this.contentEncoding = contentEncoding;\n        this.compress = compress;\n    }\n\n    @Nonnull\n    public String getPath() {\n        return path;\n    }\n\n    @Nonnull\n    public String getSuffix() {\n        return suffix;\n    }\n\n    @Nonnull\n    public String getContentType() {\n        return contentType;\n    }\n\n    @Nonnull\n    public String getContentEncoding() {\n        return contentEncoding;\n    }\n\n    @Nonnull\n    public Boolean isCompress() {\n        return compress;\n    }\n}\n</code></pre>\n\n<p>I want to inject this value of <code>DocumentType.Document</code> in <code>Spring</code> configuration file</p>\n\n<pre><code>   &lt;bean id=\"s3Service\" class=\"com.myorg.sparrow.business.xml.persist.S3Service\"&gt;\n        &lt;constructor-arg ref=\"awsCredentials\" /&gt;\n        &lt;constructor-arg value=\"**DocumentType.DOCUMENT**\" /&gt; // how do I inject it here?\n        &lt;constructor-arg value=\"${com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator-destBucketName}\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>How do I inject this value in </p>\n\n<pre><code>&lt;constructor-arg value=\"**DocumentType.DOCUMENT**\" /&gt; // how do I inject it here?\n</code></pre>\n\n<p>I am very new to Spring framework and not sure how to achieve this</p>\n\n<p>Thank you</p>\n"},{"tags":["java","spring","spring-mvc","internationalization","spring-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":13031070,"title":"Spring Security i18n: wrong error message resolved","body":"<p>I'm working on web application that uses Spring (MVC), Hibernate, Spring Security and ZK as frontend. I'm using latest releases of all libraries (3.1.2 Spring, 3.1.3 Spring Security, 4.1.7 Hibernate) and I have a problem with internationalization (i18n). I'll get into the details after configuration (relevant parts only): </p>\n\n<p><strong>web.xml:</strong></p>\n\n<pre><code>&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/spring/root-context.xml /WEB-INF/spring/spring-security.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;servlet&gt;\n    &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;\n            /WEB-INF/spring/appServlet/servlet-context.xml \n        &lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n\n&lt;servlet&gt;\n    &lt;servlet-name&gt;zkLoader&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.zkoss.zk.ui.http.DHtmlLayoutServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;update-uri&lt;/param-name&gt;\n        &lt;param-value&gt;/zkau&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;servlet&gt;\n    &lt;servlet-name&gt;auEngine&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.zkoss.zk.au.http.DHtmlUpdateServlet&lt;/servlet-class&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;zkLoader&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;*.zul&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;auEngine&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/zkau/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n\n&lt;listener&gt;\n    &lt;description&gt;ZK JSP Tags environment initiation &lt;/description&gt;\n    &lt;display-name&gt;ZK JSP Initiator&lt;/display-name&gt;\n    &lt;listener-class&gt;org.zkoss.jsp.spec.JspFactoryContextListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;filter&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;filter-class&gt; org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p><strong>servlet-context:</strong></p>\n\n<pre><code>&lt;beans:bean id=\"localeResolver\" class=\"org.springframework.web.servlet.i18n.SessionLocaleResolver\"&gt;\n    &lt;beans:property name=\"defaultLocale\" value=\"hr\" /&gt;\n&lt;/beans:bean&gt;\n\n&lt;interceptors&gt;\n    &lt;beans:bean id=\"localeChangeInterceptor\" class=\"org.springframework.web.servlet.i18n.LocaleChangeInterceptor\"&gt;\n        &lt;beans:property name=\"paramName\" value=\"lang\" /&gt;\n    &lt;/beans:bean&gt;\n&lt;/interceptors&gt;\n\n&lt;beans:bean id=\"messageSource\" class=\"org.springframework.context.support.ReloadableResourceBundleMessageSource\"&gt;\n    &lt;beans:property name=\"basename\" value=\"classpath:message\" /&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n\n<p><strong>spring-security.xml:</strong></p>\n\n<pre><code>&lt;http pattern=\"/resources/**\" security=\"none\" /&gt;\n\n&lt;http auto-config=\"true\"&gt;\n    &lt;intercept-url pattern=\"/login*\" access=\"IS_AUTHENTICATED_ANONYMOUSLY\" /&gt;\n    &lt;intercept-url pattern=\"/**\" access=\"ROLE_USER\" /&gt;\n    &lt;form-login login-page=\"/login\" default-target-url=\"/\" authentication-failure-url=\"/loginfailed\" /&gt;\n&lt;/http&gt;\n</code></pre>\n\n<p><strong>root-context.xml:</strong></p>\n\n<p>Nothing relevant to the problem here, just datasource definition, sessionfactory and bean declarations.</p>\n\n<p><strong>Now on to the problem:</strong> </p>\n\n<p>I have 2 files: message_en.properties and message_hr.properties that both reside in src/main/resources directory. I have created this project using \"Spring template project\" and then chose \"Spring MVC project\" (Using STS 2.9.2). I have read about how to customize Spring Security messages and those that need to be overridden are put in message.properties files with custom message attached. The one I'm using for testing is:</p>\n\n<p><strong>Original message in spring-security-core.jar</strong>\nAbstractUserDetailsAuthenticationProvider.badCredentials = Bad credentials </p>\n\n<p><strong>Overridden in message_en.properties:</strong></p>\n\n<p>AbstractUserDetailsAuthenticationProvider.badCredentials = Invalid user name or password</p>\n\n<p><strong>Overridden in message_hr.properties:</strong></p>\n\n<p>AbstractUserDetailsAuthenticationProvider.badCredentials = Bla Bla Bla</p>\n\n<p><strong>Scenario 1:</strong></p>\n\n<p>If I leave everything as described above in the configuration files, changing lang parameter in url bar or just by clicking on the links I have in the login page, properly reads all the messages from my custom message_xx.properties except the SS one's. So instead of giving me \"Invalid user name or password\" or \"Bla Bla Bla\" I get \"Bad credentials\".</p>\n\n<p><strong>Scenario 2:</strong></p>\n\n<p>If I move messageSource bean from servlet-context.xml to the spring-security.xml it loads proper error message but no matter what locale is set it always reads \"Bla Bla Bla\". This happens even if I change lang param of localeChangeInterceptor bean.</p>\n\n<p>What am I suppose to do here to make this work properly? </p>\n\n<p>Forgot to mention: \nIn order to get Spring Security message I'm using this in jsp page</p>\n\n<p>${sessionScope[\"SPRING_SECURITY_LAST_EXCEPTION\"].message}</p>\n"},{"tags":["java","spring","security","xss","apache-stringutils"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":11718451,"title":"Selective HTML escaping with Java","body":"<p>Is there anything in <code>JavaSE</code>, <code>Spring</code> or <code>Apache Commons StringUtils</code> that would allow me to strip out HTML from a String but also supply a whitelist of HTML entities that I would like to allow?</p>\n\n<p>Thanks</p>\n"},{"tags":["spring","java-ee","spring-mvc","jsf-2"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13005570,"title":"Bean Scopes Managment in JSF + Spring","body":"<p>I am building a application using JSF2.0 + Spring 3.0 .My beans are managed by Spring in this application.<br/>In this application I have a form which have 3 SelectOneMenuItems(JSF)</p>\n\n<ol>\n<li>When user select 1st dropdown box value it then it will populate 2nd dropdown box(As i have placed logic in EventChangeListener)</li>\n<li>And when user select value from 2nd drop down it will populate 3rd drop down according to the selection of 2nd drop down</li>\n</ol>\n\n<p>Now When I submit the form, it will submit fine but it doesn't not remove the values from the box.\nI tried <strong>request scope</strong> in spring but it generate another problem that is when a value select by first drop down let say country and i send value to next drop down of province (to populate province according to country drop down selection) , spring consider it a new request and refresh the bean, So country's drop down value get removed and i get <code>NullPointerException</code> while populating provinces.\nWhat should I do now I really get stucked.Please help</p>\n"},{"tags":["java","android","spring","gson"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":13026872,"title":"Calling an RESTFul using Spring-Android","body":"<p>Here is my Strifified json, </p>\n\n<pre><code> {\n       \"Request\":{\n              \"Object1\":{\n                 \"Key1\":\"Value1\"\n              },\n              \"Object2\":{\n                  \"Key2\":\"Value2\"\n              }\n       },\n       \"Object3\":{\n                 \"Key3\":\"Value3\"\n       }\n}\n</code></pre>\n\n<p>I am forming this using Gson. <code>String Stringifiedjson = new Gson().toJson(user);</code>\nHere is what i am trying to achive. </p>\n\n<pre><code>RestTemplate rest = new RestTemplate();\nString url = \"\";\nString event = rest.getForObject(url, Stringifiedjson);\n</code></pre>\n\n<ol>\n<li>How would i send to my REST Service and get back my result in <code>onEventHandler</code> or <code>onErrorHandler</code>. I am basically from <code>JavaScript</code> background.</li>\n<li>Why does the method getForObject does not accept <code>String, String</code> as params.</li>\n</ol>\n\n<p><strong>Update:</strong></p>\n\n<pre><code>AuthenticateUser user = new AuthenticateUser(credential, Header);       \nHttpHeaders requestHeaders = new HttpHeaders();\nrequestHeaders.setContentType(new MediaType(\"application\",\"json\"));         \n//HttpEntity&lt;AuthenticateUser&gt; requestEntity = new HttpEntity&lt;AuthenticateUser&gt;(user, requestHeaders);\n\n\nRestTemplate restTemplate = new RestTemplate();\nrestTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());\nrestTemplate.getMessageConverters().add(new StringHttpMessageConverter());\nString url = \"url\";             \nString result = restTemplate.postForObject(url, AuthenticateUser.class, String.class);\n</code></pre>\n\n<p>Attached is the pastie of what exception i am getting.</p>\n\n<p><a href=\"http://pastie.org/private/efyfvvbxyxdsvm3lvv7q\" rel=\"nofollow\">http://pastie.org/private/efyfvvbxyxdsvm3lvv7q</a></p>\n"},{"tags":["java","spring","enums"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13015870,"title":"Java enums mutability usecases and possibilities?","body":"<p>I don't know if I'm the only one to know that, but the values of an enum are not implicitly final and can be modified.</p>\n\n<pre><code>  enum EnumTest {\n    TOTO(\"TOTO 1\"),\n    TATA(\"TATA 2\"),\n    ;\n\n    private String str;\n\n    private EnumTest(String str) {\n      this.str = str;\n    }\n\n    @Override\n    public String toString() {\n      return str;\n    }\n  }\n\n  public static void main(String[] args) {\n    System.out.println(EnumTest.TATA);\n    EnumTest.TATA.str = \"newVal\";\n    System.out.println(EnumTest.TATA);\n  }\n\nTATA 2\nnewVal\n</code></pre>\n\n<p>These values are oftenly initialized at instance creation (<code>TOTO(\"TOTO 1\")</code>) but, except myself, I've never seen anyone using the final keyword for enum variables that should be immutable. That's not the point of the question, just wondering if I'm the only one aware of this.</p>\n\n<hr>\n\n<p>What I'd like to know is if there was any usecase to create mutable enums?</p>\n\n<p>And I'd also like to know the limits of what we can do with enums (good practice or not).\nI've not tested it, but maybe an enum can be injected with Spring beans?\nAt least it seems we can annotate each instance (@Deprecated works fine for exemple), and also the methods.</p>\n"},{"tags":["spring","maven","webdriver","selenium2"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":140,"score":2,"question_id":12956776,"title":"Spring SimpleThreadScope does not support descruction callbacks","body":"<p>I would like to run parallel selenium tests (using webriver and the Spring JUnit runner). Webdriver is a spring bean with the custom thread scope. But I get a following warning <code>SimpleThreadScope does not support descruction callbacks</code> So the browsers are not closed. Any idea how to close them (more precisely call the quit method)?</p>\n\n<p>spring config</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"threadScope\" class=\"org.springframework.context.support.SimpleThreadScope\" /&gt;\n\n&lt;bean class=\"org.springframework.beans.factory.config.CustomScopeConfigurer\"&gt;\n    &lt;property name=\"scopes\"&gt;\n           &lt;map&gt;\n               &lt;entry key=\"thread\" value-ref=\"threadScope\" /&gt;\n           &lt;/map&gt;\n       &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"webDriver\" class=\"org.openqa.selenium.remote.RemoteWebDriver\" scope=\"thread\" destroy-method=\"quit\"&gt;\n    &lt;constructor-arg name=\"remoteAddress\" value=\"http://localhost:4444/wd/hub\" /&gt;\n    &lt;constructor-arg name=\"desiredCapabilities\" ref=\"browserAgent\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>maven config</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.12&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;includes&gt;\n            &lt;include&gt;**/*Test.class&lt;/include&gt;\n        &lt;/includes&gt;\n        &lt;reportsDirectory&gt;${basedir}/target/surefire-reports&lt;/reportsDirectory&gt;\n        &lt;parallel&gt;classes&lt;/parallel&gt;\n        &lt;threadCount&gt;2&lt;/threadCount&gt;\n        &lt;perCoreThreadCount&gt;false&lt;/perCoreThreadCount&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>This post <a href=\"http://www.springbyexample.org/examples/custom-thread-scope-module-code-example.html\" rel=\"nofollow\">http://www.springbyexample.org/examples/custom-thread-scope-module-code-example.html</a> suggests a custom Thread implementations. But where is an extension point type of Runnable using any JUnit runner?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ThreadScopeRunnable implements Runnable {\n\n    protected Runnable target = null;\n\n    /**\n     * Constructor\n     */\n    public ThreadScopeRunnable(Runnable target) {\n        this.target = target;\n    }\n\n    /**\n     * Runs &lt;code&gt;Runnable&lt;/code&gt; target and \n     * then afterword processes thread scope \n     * destruction callbacks.\n     */\n    public final void run() {\n        try {\n            target.run();\n        } finally {\n            ThreadScopeContextHolder.currentThreadScopeAttributes().clear();\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["spring","session","spring-security","session-timeout"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1508,"score":0,"question_id":4900404,"title":"Spring security session expiration","body":"<ol>\n<li>What is the maximum time of user inactivity (session expiration time) when using spring security?</li>\n<li>When is session expiration date updated? Does it update when we call <code>SecurityContextHolder.getContext().getAuthentication()</code> ? I.e. what is \"user activity\" for spring security?</li>\n</ol>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","concurrency"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":13029294,"title":"Should both getter and setter be synchronized?","body":"<p>I have 2 methods with spring @Transactional annotations. </p>\n\n<pre><code>@Transactional(readOnly = true) \npublic ConfigParameter getConfigParameter(String key) { \n\n@Transactional(readOnly = false) \npublic void setConfigParameter(ConfigParameter param) {\n</code></pre>\n\n<p>readOnly = false means that method will by synchronized. \nWhen <strong>readyOnly = false</strong> on setter is set it means access to the setter is synchronized. </p>\n\n<p>Do you agree that in such case, getter should also have readOnly set to true (be synchronized). Because otherwise we will have a risk of getting inconsistent state of returned Object. </p>\n\n<p>I arrived at this problem when I checked this class with FindBugs and got a warning: </p>\n\n<blockquote>\n  <p><strong>Unsynchronized get method, synchronized set method</strong> \n  This class contains\n  similarly-named get and set methods where the set method is\n  synchronized and the get method is not.  This may result in incorrect\n  behavior at runtime, as callers of the get method will not necessarily\n  see a consistent state for the object.  The get method should be made\n  synchronized.</p>\n</blockquote>\n"},{"tags":["java","hibernate","spring","amazon-web-services","pessimistic-locking"],"answer_count":4,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":10196,"score":4,"question_id":8645694,"title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>i have a java project works as a webserver  </p>\n\n<p>i face this exception always   </p>\n\n<p>i read some documentation, i found that pessimistic locking (or optimistic, but i read that pessimistic is better) is the best way to solve this exception   </p>\n\n<p>but i couldn't found any clear example that explain how to use it  </p>\n\n<p>my methods style is:  </p>\n\n<pre><code>@Transactional\nPublic void test(Email email, String Subject){\n   getEmailById(String id);\n   email.setSubject(Subject);\n   updateEmail(email);\n}\n</code></pre>\n\n<p><b>while:</b>  </p>\n\n<pre><code>email is a hibernate class (it will be a table in the database) \ngetEmailById(String id) is a function that return an email \n                                  (this method not annotated with @Transctional)\nupdateEmail(email): is a method that update the email\n</code></pre>\n\n<p><b>Note:</b> i use hibernate for save, update &amp; so on (example: session.getcurrentSession.save(email))</p>\n\n<p><b>Exception:</b></p>\n\n<pre><code>            ERROR 2011-12-21 15:29:24,910 Could not synchronize database state with session [myScheduler-1]\n            org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [email#21]\n                at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:1792)\n                at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2435)\n                at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2335)\n                at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2635)\n                at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:115)\n                at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)\n                at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)\n                at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168)\n                at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)\n                at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)\n                at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)\n                at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:365)\n                at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)\n                at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)\n                at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)\n                at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)\n                at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)\n                at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n                at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n                at $Proxy130.generateEmail(Unknown Source)\n                at com.admtel.appserver.tasks.EmailSender.run(EmailNotificationSender.java:33)\n                at com.admtel.appserver.tasks.EmailSender$$FastClassByCGLIB$$ea0d4fc2.invoke(&lt;generated&gt;)\n                at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)\n                at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n                at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:55)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)\n                at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:50)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)\n                at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:50)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)\n                at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n                at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)\n                at com.admtel.appserver.tasks.EmailNotificationSender$$EnhancerByCGLIB$$33eb7303.run(&lt;generated&gt;)\n                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n                at java.lang.reflect.Method.invoke(Method.java:597)\n                at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)\n                at org.springframework.scheduling.support.MethodInvokingRunnable.run(MethodInvokingRunnable.java:65)\n                at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:51)\n                at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n                at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)\n                at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)\n                at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)\n                at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)\n                at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)\n                at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n                at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n                at java.lang.Thread.run(Thread.java:680)\n            ERROR 2011-12-21 15:29:24,915 [ exception thrown &lt; EmailNotificationSender.run() &gt; exception message Object of class [Email] with identifier [211]: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [Email#21] with params ] [myScheduler-1]\n            org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Object of class [Email] with identifier [21]: optimistic locking failed; nested exception is \n</code></pre>\n"},{"tags":["java","spring","spring-mvc","form-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13027862,"title":"How to invoke a controller using a button in Spring-mvc?","body":"<p>I am using Spring MVC.\nI have a home page called <code>index.jsp</code> </p>\n\n<pre><code>&lt;a href=\"register.htm\"&gt; Register an Employee&lt;/a&gt;\n\n&lt;input type=\"button\" onclick=\"register.htm\" value=\"REGISTER\"&gt;\n</code></pre>\n\n<p>When i click on a link <code>Register an Employee</code> , the flow comes into the <code>handleRequest</code> but when i click on submit button nothing happened.</p>\n\n<p>My handleRequest method look like this.</p>\n\n<pre><code>@RequestMapping(value = \"/register.htm\", method = RequestMethod.GET)\n    public ModelAndView handleRequest(HttpServletRequest request,\n            HttpServletResponse response) throws Exception {\n        ModelAndView mav = new ModelAndView(\"register\");\n        return mav;\n\n    }\n</code></pre>\n\n<p>How i can do this?</p>\n"},{"tags":["java","spring","jsp","javabeans","parameter-passing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":13017348,"title":"Passing parameters to bean's method from JSP","body":"<p>I'm using following things for my project:\nSpring 3.0.1 + Apache Tiles 2.2.1 + Glassfish 2.1. What i'm trying to do is to call some method in jsp-page and pass some parameters to it. For example, i have a bean:</p>\n\n<pre><code>@Component\n@Scope(value = \"singleton\")\npublic class TestBean {\n    public void test(String param){\n        System.out.println(\"param = \" + param);\n    }\n}\n</code></pre>\n\n<p>and i have jsp-page:</p>\n\n<pre><code>&lt;%@page contentType=\"text/html; charset=utf-8\"%&gt;\n${testBean.test(\"hello\")}\n</code></pre>\n\n<p>This code gives me an exception like: </p>\n\n<blockquote>\n  <p>org.apache.jasper.JasperException: The function test must be used with\n  a prefix when a default namespace is not specified</p>\n</blockquote>\n\n<p>If i call some method without passing parameters to it - everything is ok. </p>\n\n<p>I have tried to put jboss-el.jar in my WEB-INF/lib and put required parameters in web.xml (as explained <a href=\"http://stackoverflow.com/questions/3284236/jsf-2-0-method-invocation/3284328#3284328\">here</a>), but with no effect.</p>\n\n<p>And i'm restricted to the set of technologies i have wrote above, so i cant add anything or, for example, can't change version of my app-server.</p>\n\n<p>With all these conditions, is there a solution for my problem?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring","batch-processing","spring-batch"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13026408,"title":"Spring Batch CommandLineRunner with multiple bean config files","body":"<p>I'm writing a Spring Batch application and have split the Spring Beans Configuration into multiple files;</p>\n\n<ul>\n<li>batch/launchContext.xml (JobLauncher/JobRepository etc)</li>\n<li>batch/common.xml (common beans used in all jobs)</li>\n<li>dataSource.xml (the data source)</li>\n<li>batch/jobs/myJob.xml (individual files for jobs)</li>\n</ul>\n\n<p>The reason for this is because I wish the data source to be changed between dev/test/production setup and also to save re-writing the same bean definitions over-and-over again.</p>\n\n<p>The problem lies when I wish to launch a Spring Batch application.  When reading the instructions here <a href=\"http://static.springsource.org/spring-batch/reference/html/configureJob.html#runningJobsFromCommandLine\" rel=\"nofollow\">http://static.springsource.org/spring-batch/reference/html/configureJob.html#runningJobsFromCommandLine</a> it assumes one Spring configuration file per job, but that's not how I wish to do it.</p>\n\n<p>How may I run a Spring Batch job, from the command line, which uses multiple bean configuration files?</p>\n"},{"tags":["java","spring","aop","cglib"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":10110253,"title":"How to inject an JDK Proxied class in Spring which has protected methods?","body":"<p>I have a fairly odd set of circumstances.  I'm using Spring 3.0.6 with a bean which implements and interface.  So far, pretty normal stuff.  My bean also has some protected methods.  I'm using some AOP (JDK Proxies) and everything works fine.</p>\n\n<p>My problem comes in when I want to inject this bean into another package class.  Under normal circumstances, I would be able to inject the implementation and get access to the protected methods.  Unfortunately, since it is JDK proxied, I can only inject based on the interface.</p>\n\n<p>Since I need access to the protected methods, I cannot declare the methods in the interface, so I'm somewhat in a catch-22 situation.  I tried switching to CGLIB proxies, but they crash with other advisors advising beans with final methods, etc) so that isn't really a solution.</p>\n\n<p>Any suggestions as to what I can do?  I've tried using a @PostConstruct method to retrieve the bean from the application context, but there too (not surprisingly) it is only able to retrieve the Proxied bean and consequently cannot cast it to the implementation required.</p>\n\n<p>Any suggestions would be appreciated.</p>\n\n<p>Thanks!</p>\n\n<p>Eric</p>\n"},{"tags":["java","spring","aop"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":11184104,"title":"Spring AOP @Pointcut not trigerring","body":"<p>I am very new to spring. I want to trigger a method when a particular method from another class is invoked that is why I thought of using @Pointcut.</p>\n\n<p>The code below is almost identical to the that I am coding and I don't what else I have to add.</p>\n\n<pre><code>public class OrgManagerImpl implements OrgManager {\n    public IOrg getOrg(String orgShortName) {\n    }\n}\n</code></pre>\n\n<p>and this is the class that will should be trigerred:</p>\n\n<pre><code>@Aspect\npublic class OrgManagerSynchronizer { \n\n    @Pointcut(\"execution(* com.alvin.OrgManager.getOrg(..))\")\n    public void classMethods() {}\n\n    @Before(\"classMethods()\")\n    public void synchronize(JoinPoint jp) {\n        //code should be executed. but does not execute.\n    }\n\n}\n</code></pre>\n\n<p>and in my .xml this was specified:</p>\n\n<pre><code>aop:aspectj-autoproxy\n</code></pre>\n\n<p>What more should I add? I don't know what to do next.</p>\n\n<p>Thanks.</p>\n"},{"tags":["spring","aop"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":339,"score":2,"question_id":3351038,"title":"Why does my Spring AOP aspect work in my unit test but not my webapp?","body":"<p>I have an aspect working correctly in my unit tests, a log message is printed from the actual method, and afterwards from the aspect applied. </p>\n\n<p>When running my webapp though, I only see the result of the '@afterReturning' advice applied, my method does not execute first.</p>\n\n<p>My config:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xmlns:aop=\"http://www.springframework.org/schema/aop\"\n   xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n   http://www.springframework.org/schema/aop \n   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\"&gt;\n\n  &lt;aop:aspectj-autoproxy proxy-target-class=\"true\" /&gt;\n\n  &lt;bean id=\"loggingAspect\" class=\"com.mypackage.MyAspect\" /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>Any ideas ?</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["xml","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13012300,"title":"Error with p: schema url","body":"<p>Im seeting properties on my applicationContext like this:</p>\n\n<pre><code>&lt;bean id=\"dataSource\"\n      class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"\n      p:driverClassName=\"${jdbc.driverClassName}\"\n      p:url=\"${jdbc.url}\"\n      p:username=\"${jdbc.username}\"\n      p:password=\"${jdbc.password}\" /&gt;\n</code></pre>\n\n<p>but im getting this error on my schema reference for p:</p>\n\n<pre><code>Error: File not found in the specified address : http://www.springframework.org/schema/p\n</code></pre>\n\n<p>did the url change or something?</p>\n"},{"tags":["java","spring","aop","factory","factorybean"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":13024464,"title":"How to get a Factory + AOP working in Spring","body":"<p>I have a singleton Spring bean (and it has to stay a singleton) which needs a fresh instance of another bean (Lets call it X) every time a certain method executes.</p>\n\n<p>So far I looked at the following approaches:</p>\n\n<ul>\n<li><p>just create X using new. This worked for a while but now we need spring AOP features for X, so this doesn't work anymore, since the resulting instances are not Spring managed.</p></li>\n<li><p>I considered a FactoryBean as a dependency, but I would only get a single X instance from the FactoryBean, which doesn't meet my first instance.</p></li>\n<li><p>the current plan is to manually lookup X in the Spring context, and declare it there with a prototype dependency. This should work, but I think it is really ugly.</p></li>\n</ul>\n\n<p>=> How can I inject a factory in my bean so that I can call its factory method any time I see fit and getting a spring managed instance out of it.</p>\n"},{"tags":["spring","spring-mvc","spring-webflow-2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13026525,"title":"Can't bind spring:checkbox","body":"<p>I have jsp page with some spring:form which contain many spring:input's, and spring:checkbox'es.\nAlso there is some checkbox (with default value 'true') with onchange js listener such as:</p>\n\n<pre><code> var isChecked  = $('#checkboxid')....;\n     if (isChecked === 'true'){\n          $('#someTab').each(function(){\n              $(this).show();\n        });\n        $('#anotherTab').each(function(){\n              $(this).hide();\n        });\n     }else{\n         $('#someTab').each(function(){\n              $(this).hide();\n        });\n        $('#anotherTab').each(function(){\n              $(this).show();\n        });\n     }\n</code></pre>\n\n<p>So by default 'anotherTab' is hided by jQueyr .hide().\nAlso there is a 'save' button:</p>\n\n<pre><code>$(document).ready(function(){\n            Spring.addDecoration(new Spring.AjaxEventDecoration({\n                formId: \"formId\",\n                elementId: \"saveButton\",\n                event: \"onclick\",\n                params: {_eventId: \"save\"}\n            }));\n</code></pre>\n\n<p>Also there is form:checkbox on 'anotherTab'. \nIf a load page, click to checkbox to show hided 'anotherTab' and  try to set 'true' value to checkbox on \n'anotherTab' and click to save that will be post request without thue value for checkbox on 'anotherTab'.\nCould it happends to me because when page loaded checkbox on 'anotherTab' is hided, and Spring.addDecoration binding do not bind these checkbox?</p>\n"},{"tags":["java","spring","testing","junit","testng"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13024556,"title":"What are typical uses cases for Test Execution Listeners in Testing Frameworks such as JUnit and TestNG?","body":"<p>JUnit,TestNG, and Spring testing have test execution listeners as an extension mechanism. Test execution listeners seem to be a low level feature of interest to framework developers and tool developers. </p>\n\n<p>What are the main use cases in which Test execution listeners are useful?  Can they be useful to application developers?</p>\n"},{"tags":["spring","spring-mvc","velocity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12975634,"title":"Spring VelocityViewResolver not resolving","body":"<p>I get the following error when trying to set up a Spring project with Velocity.</p>\n\n<pre><code>PageNotFound - No mapping found for HTTP request with URI [/SpringMVCVelocity/Enquiries/viewAllEnquiries] in DispatcherServlet with name 'mvc-dispatcher'\n</code></pre>\n\n<p>I have set up the spring context.xml as-</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n    xmlns:webflow=\"http://www.springframework.org/schema/webflow-config\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans     \n        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n        http://www.springframework.org/schema/context \n        http://www.springframework.org/schema/context/spring-context-3.1.xsd\n        http://www.springframework.org/schema/tx \n        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n        http://www.springframework.org/schema/mvc \n        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n        http://www.springframework.org/schema/webflow-config\n        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"ecommerce.dao\" /&gt;     \n\n    &lt;bean id=\"velocityConfig\" class=\"org.springframework.web.servlet.view.velocity.VelocityConfigurer\"&gt;\n      &lt;property name=\"resourceLoaderPath\" value=\"/WEB-INF/view/\"/&gt;   \n    &lt;/bean&gt;\n\n    &lt;bean id=\"viewResolver\" class=\"org.springframework.web.servlet.view.velocity.VelocityViewResolver\"&gt;\n      &lt;property name=\"cache\" value=\"false\"/&gt;\n      &lt;property name=\"prefix\" value=\"\"/&gt;\n      &lt;property name=\"suffix\" value=\".vm\"/&gt;\n      &lt;property name=\"order\" value=\"-1\"/&gt;\n      &lt;property name=\"exposeSpringMacroHelpers\" value=\"true\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n\n    &lt;mvc:annotation-driven/&gt;\n\n    &lt;!-- Forwards requests to the \"/\" resource to the \"welcome\" view --&gt;\n    &lt;mvc:view-controller path=\"/\" view-name=\"welcome\"/&gt;\n\n    &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalEntityManagerFactoryBean\"&gt;\n      &lt;property name=\"persistenceUnitName\" value=\"ecommerce\"/&gt;\n   &lt;/bean&gt;\n    &lt;!-- enable the configuration of transactional behavior based on annotations --&gt;\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Configures Handler Interceptors --&gt;   \n    &lt;mvc:interceptors&gt;\n        &lt;!-- Changes the locale when a 'locale' request parameter is sent; e.g. /?locale=de --&gt;\n        &lt;bean class=\"org.springframework.web.servlet.i18n.LocaleChangeInterceptor\" /&gt;\n    &lt;/mvc:interceptors&gt;\n\n    &lt;!-- Saves a locale change using a cookie --&gt;\n    &lt;bean id=\"localeResolver\" class=\"org.springframework.web.servlet.i18n.CookieLocaleResolver\" /&gt;\n\n    &lt;!-- Application Message Bundle --&gt;\n    &lt;bean id=\"messageSource\" class=\"org.springframework.context.support.ReloadableResourceBundleMessageSource\"&gt;\n        &lt;property name=\"basename\" value=\"/WEB-INF/messages/messages\" /&gt;\n        &lt;property name=\"cacheSeconds\" value=\"0\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- \n        FLOW HANDLING\n     --&gt;\n\n    &lt;!-- Enables FlowHandler URL mapping --&gt;\n    &lt;bean id=\"flowController\" class=\"org.springframework.webflow.mvc.servlet.FlowHandlerAdapter\"&gt;\n        &lt;property name=\"flowExecutor\" ref=\"flowExecutor\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;webflow:flow-executor id=\"flowExecutor\" flow-registry=\"flowRegistry\"/&gt;\n\n    &lt;bean class=\"org.springframework.webflow.mvc.servlet.FlowHandlerMapping\"&gt;\n        &lt;property name=\"flowRegistry\" ref=\"flowRegistry\" /&gt;\n        &lt;property name=\"order\" value=\"-1\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;webflow:flow-registry id=\"flowRegistry\" flow-builder-services=\"flowBuilderServices\"&gt;\n        &lt;webflow:flow-location path=\"/WEB-INF/view/flows/flow.xml\"/&gt;\n    &lt;/webflow:flow-registry&gt;\n\n    &lt;webflow:flow-builder-services id=\"flowBuilderServices\" view-factory-creator=\"mvcViewFactoryCreator\" /&gt;\n\n    &lt;bean id=\"mvcViewFactoryCreator\" class=\"org.springframework.webflow.mvc.builder.MvcViewFactoryCreator\"&gt;\n        &lt;property name=\"viewResolvers\" ref=\"viewResolver\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- \n\n       Bean Injections\n\n    --&gt;\n    &lt;bean id=\"carModelDao\" class=\"ecommerce.dao.CarModelDao\"/&gt;\n\n    &lt;bean id=\"carController\" class=\"ecommerce.controller.CarController\"&gt;\n        &lt;property name=\"carModelDao\" ref=\"carModelDao\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"veloController\" class=\"ecommerce.controller.VelocityController\"&gt;\n        &lt;property name=\"carModelDao\" ref=\"carModelDao\"/&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>My controller is:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/Enquiries\")\n@SessionAttributes({\"enqList\", \"search\"})\n\npublic class EnquiryController {\n\n    private static final Logger logger = Logger.getLogger(EnquiryController.class);\n    private PagedListHolder&lt;Enquiry&gt; enqList = null;\n    private int pageSize = 10;\n\n    @Autowired\n    private EnquiryDao enquiryDao;\n\n    @RequestMapping(\"/viewAllEnquiries\")\n    public String  getAllEnquiries(@RequestParam(required=false) String page, Model model) {\n\n        if (\"next\".equals(page) &amp;&amp; enqList != null) {\n            enqList.nextPage();\n        } else if (\"previous\".equals(page) &amp;&amp; enqList != null) {\n            enqList.previousPage();\n        } else {\n            // well there is no page parameter, so it must be a new request\n            enqList = new PagedListHolder&lt;Enquiry&gt;(enquiryDao.getAllEnquiries());\n            enqList.setPageSize(pageSize);\n        }\n        model.addAttribute(\"search\", new Search());\n        model.addAttribute(\"enqList\", enqList);\n\n        return \"viewAllEnquiries\";\n    }\n</code></pre>\n\n<p>This controller is not even called.  It does however successfully manage to resolve the welcome view with:</p>\n\n<pre><code>&lt;mvc:view-controller path=\"/\" view-name=\"welcome\"/&gt;\n</code></pre>\n"},{"tags":["java","spring","aop","spring-aop"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13024177,"title":"I am unable to call the advised method using Spring AOP","body":"<p>How can I call advised method from a before advice? I am using Spring 3.0.5 and XML configuration. </p>\n\n<p>I have written following code:</p>\n\n<pre><code>public interface Arithmatic {\n\n    public int add(int a,int b);//Advised method\n    public int sub(int a,int b);//Advised method\n}\n\npublic class ArithmaticImpl implements Arithmatic {\n\n\n   public int add(int a,int b){\n       return (a+b); \n   }\n\n\n   public int sub(int a,int b){\n      return (a-b); \n   }\n}\n</code></pre>\n\n<p>and my AOP class is</p>\n\n<pre><code>public class ValidateNumber{\n   public validateNumber(int a,int b){\n\n   if (a&lt;0||b&lt;0)  {\n       // how can show validation message?\n   } else {\n       //how can i call Advised methods?\n   }\n\n }\n</code></pre>\n\n<p>}</p>\n\n<p>Congiguration file is</p>\n\n<pre><code>&lt;aop:config&gt;\n    &lt;aop:aspect ref=\"validatenumber\"&gt;\n    &lt;aop:before pointcut=\"execution(* com.arithematic.Arithmatic.add(int,int)) and args(a,b)\" method=\"add\" arg-names=\"a,b\"/&gt;\n    &lt;/aop:aspect&gt;\n &lt;/aop:config&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["spring","tiles2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13025418,"title":"Is it possible to use Spring mvc:resources with Apache Tiles 2?","body":"<p>I have to load static content from outside my webapp directory, so I added the following lines to my Spring application context XML:</p>\n\n<pre><code>&lt;mvc:resources mapping=\"/css/**\" location=\"file:///path/to/my/static/css/\" /&gt;\n&lt;mvc:resources mapping=\"/js/**\" location=\"file:///path/to/my/static/js/\" /&gt;\n&lt;mvc:resources mapping=\"/static/**\" location=\"file:///path/to/my/static/content/\" /&gt;\n</code></pre>\n\n<p>I can load my CSS files just fine from JSPs and from Tiles using the JSTL c library:</p>\n\n<pre><code>&lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;insert title here&lt;/title&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"&lt;c:url value=\"/css/style.css\" /&gt;\" /&gt;\n&lt;/head&gt;\n...\n</code></pre>\n\n<p>Now I want to use files from a <code>mvc:resources</code> directory as parts of my tiles definition. I configured my tiles template like this</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?&gt;\n&lt;!DOCTYPE tiles-definitions PUBLIC\n       \"-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN\"\n       \"http://tiles.apache.org/dtds/tiles-config_2_0.dtd\"&gt;\n&lt;tiles-definitions&gt;\n    &lt;definition name=\"defaultTemplate\" template=\"/static/default.jsp\"&gt;\n        &lt;put-attribute name=\"title\" value=\"CMS example\" /&gt;\n        &lt;put-attribute name=\"header\" value=\"/static/header.jsp\" /&gt;\n        &lt;put-attribute name=\"menu\" value=\"/static/menu.jsp\" /&gt;\n        &lt;put-attribute name=\"footer\" value=\"/static/footer.jsp\" /&gt;\n    &lt;/definition&gt;\n&lt;/tiles-definitions&gt;\n</code></pre>\n\n<p>But the <code>/static/**</code> are not resolvable, because that's not a real folder in my webapp but a mapped location from <code>mvc:resources</code>.</p>\n\n<p><strong>My question</strong> Is it even possible to use mvc:resources for Tiles definitions? Or do I have to use something else?</p>\n\n<p><em>edit</em> Should I consider implementing my own TilesFactory, like <a href=\"http://tiles.apache.org/2.2/framework/how-to/definitions-db.html\" rel=\"nofollow\">http://tiles.apache.org/2.2/framework/how-to/definitions-db.html</a>?</p>\n"},{"tags":["spring","hibernate","jpa","transactions"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":370,"score":0,"question_id":9721004,"title":"@Transactional Annotation + for a data insertion in a loop","body":"<p>I am using <strong>Spring 3, JPA + Hibernate</strong> for a <code>CMS</code> application. In that application I have a service class method which is annotated with <code>@Transactional</code> Annotation with <code>rollBack</code> property. Inside that method I am inserting data (ie entity classes) to a table using a loop. For each <code>iteration</code> of the loop entity classes has to be saved to the database. But it is not happening. The commit only happens when the execution of the loop has completed and exits from the method. Then it commits and saves all at once. But I need to read data once it gets inserted into the database before committing in this case. I tried with the <code>ISOLATION LEVEL</code> to read uncommitted but it didn't supported since I am using the default <code>JPADialect</code>. Also tried to add the <strong>hibernate</strong> implementation of <code>jpaDialect</code> but still it didn't worked. Please help with a workaround for this problem. One more thing, is there any way using propagation required method.</p>\n"},{"tags":["java","spring","hibernate","jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13014910,"title":"SimpleJpaRepository does not modify persisted entity","body":"<p>When I'm persisting an entity with <code>SimpleJpaRepository#save()</code> it will not modify it. E.g. it will not set the new id of the entity.</p>\n\n<p>Apart from that, everything works fine. The entity is being persisted and given an id. If I read it from the database I can see the id. Is this normal behavior? I know the #save method returns the persisted entity but I would prefer it to modify the given entity. Is there a way of configuring this?</p>\n\n<p>Thanks</p>\n\n<p>-- edit</p>\n\n<p>Let's assume this is what I do:</p>\n\n<pre><code>User user = new User();\n// do something with user\n\nuserRepository.save(user);\n</code></pre>\n\n<p>Then <code>user</code> stays the same. The object <em>is</em> written to the database but user does not become managed. Also <code>saveAndFlush(user)</code> will not result in different behavior. What I can do is <code>user = userRepository.save(user)</code>. In this case user becomes the managed instance. But from Hibernate I'm used to just save the object and my submitted object becomes managed. Is there a way of archieving this with JPA?</p>\n"},{"tags":["java","spring","annotations","transactions","dao"],"answer_count":9,"favorite_count":40,"up_vote_count":64,"down_vote_count":0,"view_count":43914,"score":64,"question_id":1079114,"title":"Spring @Transactional Annotation Best Practice","body":"<p>We are currently discussing the Best Practice for placing the <code>@Transactional</code> annotations in our code.</p>\n\n<p>Do you place the <code>@Transactional</code> in the <code>DAO</code> classes and/or their methods or is it better to annotate the Service classed which are calling using the DAO objects? Or does it make sense to annotate both \"layers\"?</p>\n"},{"tags":["jquery","json","spring","jsp","jqplot"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":169,"score":0,"question_id":13000541,"title":"jqplot line chart with json array - (Solved)","body":"<p>My Spring Controller class looks like this      </p>\n\n<pre><code>@SuppressWarnings(\"rawtypes\")\n    @RequestMapping(value = \"/cityGridView\", method = RequestMethod.GET)\n    public @ResponseBody\n    Object[] showLineChart(Map&lt;String, Object&gt; map, HttpServletRequest request,\n            HttpServletResponse response) {\n        List&lt;MapTable&gt; list = contactService.fin();\n        Object[] rows = new Object[list.size()];\n        int i = 0;\n        for (MapTable table : list) {\n            Object[] temp = new Object[2];\n            temp[0] = table.getSRDate();\n            temp[1] = table.getNumberOfSR();\n            rows[i] = temp;\n            i++;\n        }\n        Object[] object = new Object[1];\n        object[0] = rows;\n        return object;\n    }\n</code></pre>\n\n<p>In my jsp i handle response like this. (seems issue in here ??)</p>\n\n<pre><code>&lt;div id=\"chart1\" style=\"width: 800px;height: 500px\" &gt;&lt;/div&gt;\n    &lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function(){\n          var ajaxDataRenderer = function(url, plot, options) {\n            var ret = null;\n            $.ajax({\n              async: false,\n              url: url,\n              dataType:\"json\",\n              success: function(data) {\n                ret = data;\n              }\n            });\n            return ret;         \n          };\n\n    var jsonurl = 'cityGridView.html';\n\n    var today = new Date(); \n\n    var plot1 = $.jqplot('chart1', jsonurl, {\n          title:'Data Point Highlighting',\n          dataRenderer: ajaxDataRenderer,\n          dataRendererOptions: {\n              unusedOptionalUrl: jsonurl\n              },\n          axes:{\n            xaxis:{\n                label: \"SR_DATES\",\n                'numberTicks' : 7,\n                min: '2012-10-01',\n                max: '2012-10-07',\n                renderer:$.jqplot.DateAxisRenderer,\n                rendererOptions:{tickRenderer:$.jqplot.CanvasAxisTickRenderer},\n                tickInterval:'1 day', \n                tickOptions:{\n                    formatString:'%Y-%#m-%#d'\n                    }\n            },\n            yaxis:{\n                label: \"SR COUNT\",\n                tickOptions:{\n                    formatString:'%d'\n                    },\n                min:10,\n                max:30\n            }\n          },\n          highlighter: {\n            show: true,\n            sizeAdjust: 7.5\n          },\n          cursor: {\n            show: true\n          }\n      });\n    });\n\n    &lt;/script&gt;\n</code></pre>\n\n<ul>\n<li><p>My JSON like this </p>\n\n<p>[[\"2012-10-01\",15.0],[\"2012-10-02\",20.0],[\"2012-10-03\",25.0],[\"2012-10-04\",18.0],[\"2012-10-05\",22.0],[\"2012-10-06\",24.0]]</p></li>\n</ul>\n\n<p>Here shows my MapTable Class</p>\n\n<pre><code>public class MapTable {\n\n    private Date SRDate;\n    private int numberOfSR;\n\n    public Date getSRDate() {\n        return SRDate;\n    }\n\n    public void setSRDate(Date sRDate) {\n        SRDate = sRDate;\n    }\n\n    public int getNumberOfSR() {\n        return numberOfSR;\n    }\n\n    public void setNumberOfSR(int numberOfSR) {\n        this.numberOfSR = numberOfSR;\n    }\n}\n</code></pre>\n\n<p>contactService.fin(); Method called to Service Classes &amp; finally it in DAO classes.\nData also correctly come like above i mentioned array.here is my DAO class</p>\n\n<pre><code>public List&lt;MapTable&gt; fin(){\n        @SuppressWarnings(\"unchecked\")\n        List&lt;MapTable&gt; dashboardBeanList = jdbcTemplate\n                    .query(\"select trunc(ASSIGNED_datetime) as SR_DATE, count(*) as COUNT \" +\n                            \"from sbl_service_request_v \" +\n                            \"where SR_TYPE ='Complaint' \" +\n                            \"and DATE_COMMITED  is not null \" +\n                            \"and ASSIGNED_DIVISION  in ('CSO','IT_IVR') \" +\n                            \"and trunc(ASSIGNED_datetime) &gt;= sysdate -30 \" +\n                            \"group by  trunc(ASSIGNED_datetime) \" +\n                            \"order by trunc(ASSIGNED_datetime)\",\n                                            new Object[] {},\n                                new RowMapper() {\n                                      public MapTable mapRow(ResultSet rs, int rowNum)\n                                                  throws SQLException {\n                                          MapTable dashboardBean=new MapTable();\n                                          dashboardBean.setSRDate(rs.getDate(\"SR_DATE\"));\n                                          dashboardBean.setNumberOfSR(rs.getInt(\"COUNT\"));\n                                          return dashboardBean;\n                                      }\n                                });\n        return dashboardBeanList;\n    }\n</code></pre>\n"},{"tags":["java","spring","xsd","wsdl","spring-ws"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":177,"score":0,"question_id":11642100,"title":"Is there a way to expose a static XSD in Spring WS 2?","body":"<p>If, for example orders.wsdl imports Orders.xsd, how can it be configured using static-wsdl</p>\n\n<pre><code>&lt;sws:static-wsdl id=\"orders\" location=\"/WEB-INF/wsdl/orders.wsdl\"/&gt;\n</code></pre>\n\n<p>such that Orders.xsd can be viewed in the browser like <code>http://host/context/Orders.xsd</code></p>\n\n<p>Dynamic wsdl supports it.</p>\n\n<pre><code>&lt;sws:dynamic-wsdl id=\"orders\"\n    portTypeName=\"Orders\"\n    locationUri=\"http://localhost:8080/ordersService/\"&gt;\n  &lt;sws:xsd location=\"/WEB-INF/xsd/Orders.xsd\"/&gt;\n&lt;/sws:dynamic-wsdl&gt;\n</code></pre>\n\n<p>But static-wsdl doesn't have the sws:xsd property.</p>\n"},{"tags":["spring","mvc","backbone.js"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13007689,"title":"Spring MVC and Backbone.js Integration Issue","body":"<p>I am trying to understand the integration of Spring MVC with backbone.js as its view technology. I find a couple of examples online such as <a href=\"https://github.com/sdeleuze/spring-backbone-todo/\" rel=\"nofollow\">here</a> and <a href=\"https://github.com/consileonpl/spring-3.1-backbone.js-todo-list\" rel=\"nofollow\">here too</a> However, in both of these samples, I am facing the same issues that the Spring MVC controller (the TodoController in the first link and TaskController in the second) does not seem to get called. </p>\n\n<p>First, there are no log messages printed (even if I do a desperate <em>System.out.println()</em> in the controller class). Second, when I try to set break points in the controller classes and go into debug mode, it was not stopped at all, but the example is accessible  through localhost:8080/todo  (Assume that is the url of the deployed war file). In both examples, a code based configuration approach is used (there is no web.xml). So I am wondering, does the controller class ever got called?  </p>\n\n<p>I have been stumbling on this for the weekend. So I would really appreciate it if someone can point me the right direction. Thanks!!!</p>\n"},{"tags":["spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13006908,"title":"session.isOpen() vs session.isConnected()","body":"<p>I am working on sample of Hibernate4 with Spring 3.1.</p>\n\n<p>In my sample , While i print <code>sessionFactory.getCurrentSession().isOpen()</code> on console it prints </p>\n\n<blockquote>\n  <p>true</p>\n</blockquote>\n\n<p>But I am facing an exception on </p>\n\n<pre><code>sessionFactory.getCurrentSession().isConnected()\n</code></pre>\n\n<p>Exception is:</p>\n\n<pre><code>org.hibernate.HibernateException: isConnected is not valid without active transaction\n</code></pre>\n\n<p><strong>EDIT :</strong> I googled more and found following solution</p>\n\n<p><code>sessionFactory.getCurrentSession().beginTransaction();\nsessionFactory.getCurrentSession().isConnected()</code> </p>\n\n<p>But i don't want to write begin transaction maually every time i opearte with session methods like <code>isConnected</code>, <code>get</code>,<code>find</code> , <code>save</code> etc. </p>\n\n<ol>\n<li>What are the other possible solutions for above exception?</li>\n<li>What if i place <code>@Transactional</code> on my dao class methods?</li>\n</ol>\n\n<p>Regards,</p>\n\n<p>Arun Kumar</p>\n"},{"tags":["java","spring","inversion-of-control","setter","getter"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":13022702,"title":"Spring getter and setter dependant","body":"<p>I would like to make sure if I understand this correctly. Spring needs setter to inject a field reference? could it do it just detecting it as  a public field. Is there an alternative to this. From what I understand J2EE @Inject annotation can do this without any problem. But I have always inclined more to Spring.</p>\n"},{"tags":["java","spring","jpa","persistence","jta"],"answer_count":2,"favorite_count":9,"up_vote_count":5,"down_vote_count":0,"view_count":5756,"score":5,"question_id":1962525,"title":"Persistence-unit as RESOURCE_LOCAL or JTA?","body":"<p>I have queries as below:</p>\n\n<ol>\n<li>What is the difference of these two?   </li>\n<li>Are both of these supported by all databases?</li>\n<li>Are JPA Transactionmanager and JTA Transactionmanager different?</li>\n</ol>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12982237,"title":"Turning off the Spring MVC data binder","body":"<p>first post on stackoverflow... I'm starting to play around with SpringMVC and I was trying to figure out what would be the best approach to link my entities to the web views as stateless as possible.</p>\n\n<p>One way I've found is to use the @ModelAttribute on a method that receive in parameter (from the request) the entity ID, which finds it from the service/persistence layer, and return it so it is inserted into the Model of the current request.</p>\n\n<p>In addition, Spring MVC binds any incoming parameter that matches a field of my entity and updates its value automatically (through the WebDataBinder).</p>\n\n<p>My question is concerning this last behaviour. I find it useful that my entity gets updated when some data has been posted by the client. But I would like to avoid it on a simple GET request (which I see as read-only). Current behaviour would allow to update the entity by adding parameter in the query of such request, which could be a security issue.</p>\n\n<p>I know about the dataBinder.setAllowedFields() and stuff but I would prefer a way to disable any kind of field mapping a any GET request. Is there any way to do it?</p>\n\n<p>Thanks!</p>\n\n<p>Edited: I have added a sample prototype to make it clearer what I am looking for...</p>\n\n<pre><code>@ModelAttribute Entity retrieveEntity(@RequestParam(required=true) Long id) {\n    // This is called before the request handler and before parameters are mapped to the entity\n    return entityRepository.get(id);\n}\n\n@RequestMapping(value=\"/modify\", method=RequestMethod.POST) \npublic ModelAndView handleModifyRequest(@ModelAttribute Entity entity) {\n    // Here, I want my entity to reflect the parameters passed in the posted form (this works)\n    ....\n}\n\n@RequestMapping(value=\"/read\", method=RequestMethod.GET) \npublic ModelAndView handleReadRequest(@ModelAttribute Entity entity) {\n    // Here, I DON'T want my entity to reflect the parameters passed in the URL (which is what happens...)\n    ....\n}\n</code></pre>\n"},{"tags":["flex","spring","blazeds"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":6740,"score":2,"question_id":961523,"title":"Spring BlazeDS flex.messaging.endpoints.AMFEndpoint","body":"<p>I have been struggling with this today for quite a while, removing everything but the default channels just to get it going. I have resolved all of my library issues (I hope) and now am getting the error below. I have also included my config files in case anyone can take a look at this. Thanks!!!</p>\n\n<pre><code>03:19:51,945 INFO  [STDOUT] - Context initialization failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean \n    with name '_messageBrokerDefaultHandlerMapping': Initialization of bean failed; \n    nested exception is org.springframework.beans.factory.BeanCreationException: \n    Error creating bean with name '_messageBroker': Invocation of init method failed; \n    nested exception is flex.messaging.MessageException: An unknown exception occurred\n    while creating an instance of type 'flex.messaging.endpoints.AMFEndpoint'.\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:480)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)\n    at java.security.AccessController.doPrivileged(Native Method)\n</code></pre>\n\n<p>My config files are here:</p>\n\n<h1>messaging-config:</h1>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;service id=\"message-service\" \nclass=\"flex.messaging.services.MessageService\"&gt;\n\n&lt;adapters&gt;\n    &lt;adapter-definition id=\"actionscript\" class=\"flex.messaging.services.messaging.adapters.ActionScriptAdapter\" default=\"true\" /&gt;\n    &lt;!-- &lt;adapter-definition id=\"jms\" class=\"flex.messaging.services.messaging.adapters.JMSAdapter\"/&gt; --&gt;\n&lt;/adapters&gt;\n\n&lt;default-channels&gt;\n    &lt;channel ref=\"my-amf\"/&gt;\n&lt;/default-channels&gt;\n&lt;/service&gt;\n</code></pre>\n\n<h1>proxy-config:</h1>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;service id=\"proxy-service\" \nclass=\"flex.messaging.services.HTTPProxyService\"\nmessageTypes=\"flex.messaging.messages.HTTPMessage,flex.messaging.messages.SOAPMessage\"&gt;\n\n&lt;properties&gt;\n    &lt;connection-manager&gt;\n        &lt;max-total-connections&gt;100&lt;/max-total-connections&gt;\n        &lt;default-max-connections-per-host&gt;2&lt;/default-max-connections-per-host&gt;\n    &lt;/connection-manager&gt;\n    &lt;allow-lax-ssl&gt;true&lt;/allow-lax-ssl&gt;\n&lt;/properties&gt;\n\n&lt;adapters&gt;\n    &lt;adapter-definition id=\"http-proxy\" class=\"flex.messaging.services.http.HTTPProxyAdapter\" default=\"true\"/&gt;\n    &lt;adapter-definition id=\"soap-proxy\" class=\"flex.messaging.services.http.SOAPProxyAdapter\"/&gt;\n&lt;/adapters&gt;\n\n&lt;default-channels&gt;\n    &lt;channel ref=\"my-amf\"/&gt;\n    &lt;!-- &lt;channel ref=\"java-amf\"/&gt; --&gt;\n&lt;/default-channels&gt;\n\n&lt;/service&gt;\n</code></pre>\n\n<h1>remoting-config:</h1>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;service id=\"remoting-service\" \nclass=\"flex.messaging.services.RemotingService\"&gt;\n\n&lt;adapters&gt;\n            &lt;adapter-definition id=\"java-object\" class=\"flex.messaging.services.remoting.adapters.JavaAdapter\"/&gt;\n&lt;/adapters&gt;\n\n&lt;default-channels&gt;\n    &lt;channel ref=\"my-amf\"/&gt;\n&lt;/default-channels&gt;\n\n&lt;/service&gt;\n</code></pre>\n\n<h1>services-config:</h1>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;services-config&gt;\n\n&lt;services&gt;\n    &lt;service-include file-path=\"spring-remoting-config.xml\" /&gt;\n    &lt;service-include file-path=\"spring-proxy-config.xml\" /&gt;\n    &lt;service-include file-path=\"spring-messaging-config.xml\" /&gt;        \n&lt;/services&gt;\n\n&lt;security&gt;\n    &lt;login-command class=\"flex.messaging.security.TomcatLoginCommand\" server=\"Tomcat\"/&gt;\n\n&lt;/security&gt;\n\n&lt;channels&gt;\n\n    &lt;!-- Java --&gt;\n    &lt;channel-definition id=\"my-amf\" class=\"mx.messaging.channels.AMFChannel\"&gt;\n        &lt;endpoint url=\"http://{server.name}:{server.port}/{context.root}/messagebroker/amf\" class=\"flex.messaging.endpoints.AMFEndpoint\"/&gt;\n    &lt;/channel-definition&gt;\n\n&lt;/channels&gt;\n\n&lt;logging&gt;\n    &lt;target class=\"flex.messaging.log.ConsoleTarget\" level=\"Error\"&gt;\n        &lt;properties&gt;\n            &lt;prefix&gt;[BlazeDS] &lt;/prefix&gt;\n            &lt;includeDate&gt;false&lt;/includeDate&gt;\n            &lt;includeTime&gt;false&lt;/includeTime&gt;\n            &lt;includeLevel&gt;false&lt;/includeLevel&gt;\n            &lt;includeCategory&gt;false&lt;/includeCategory&gt;\n        &lt;/properties&gt;\n        &lt;filters&gt;\n            &lt;pattern&gt;Endpoint.*&lt;/pattern&gt;\n            &lt;pattern&gt;Service.*&lt;/pattern&gt;\n            &lt;pattern&gt;Configuration&lt;/pattern&gt;\n        &lt;/filters&gt;\n    &lt;/target&gt;\n&lt;/logging&gt;\n\n&lt;system&gt;\n    &lt;redeploy&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;!-- \n        &lt;watch-interval&gt;20&lt;/watch-interval&gt;\n        &lt;watch-file&gt;{context.root}/WEB-INF/flex/services-config.xml&lt;/watch-file&gt;\n        &lt;watch-file&gt;{context.root}/WEB-INF/flex/proxy-config.xml&lt;/watch-file&gt;\n        &lt;watch-file&gt;{context.root}/WEB-INF/flex/remoting-config.xml&lt;/watch-file&gt;\n        &lt;watch-file&gt;{context.root}/WEB-INF/flex/messaging-config.xml&lt;/watch-file&gt;\n        &lt;watch-file&gt;{context.root}/WEB-INF/flex/data-management-config.xml&lt;/watch-file&gt;\n        &lt;touch-file&gt;{context.root}/WEB-INF/web.xml&lt;/touch-file&gt;\n         --&gt;\n    &lt;/redeploy&gt;\n&lt;/system&gt;\n\n&lt;/services-config&gt;\n</code></pre>\n"},{"tags":["spring","spring-roo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12845451,"title":"Spring Roo - create web scaffolding based on json controllers?","body":"<p>It would appear that the only way to build the default web scaffolding is with the standard web mvc controllers that are form based. Is is possible to automatically create views that use the mvc json controllers instead?</p>\n"},{"tags":["asp.net-mvc","spring","tomcat","webpage-rendering"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12939361,"title":"Spring MVC handles request after page rendering","body":"<p>I have a Spring MVC application(2.5.6) and after a page render, spring MVC does several requests as GET method which cause the erasing of my current command value. \nIt was working under tomcat 5.5 and I updated the application to tomcat 6.0.35 but I have the same problem with Jetty also. I'm wondering weather Spring MVC 2.5.6 behaves differently under tomcat 5.5 and tomcat 6.x\nThe business scearis is as following:\nuse create a Vacancy\nWithout saving it, he click on Preview button\nThan, there is a button to go back(not the browser's one), and after clicking on back button, the edit form is displayed with validation errors on all the fields and any value is kept.\nThanks for any help.</p>\n"},{"tags":["java","spring","scala","customization","javabeans"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":109,"score":3,"question_id":12936080,"title":"using a .properties file with a Custom Bean Parser","body":"<p>I have a custom implementation of an AbstractSingleBeanDefinitionParser to allow me to define 3D Vectors in my spring config with less... ceremony than would otherwise be required.</p>\n\n<pre><code>&lt;rbf:vector3d id=\"test_vector\" delimeter=\";\" value=\"45;46;47\"/&gt;\n</code></pre>\n\n<p>That works great, and I have been using it for months without any problems.  Yesterday I tried to define the value in a .properties file like this:</p>\n\n<p>In test.properties I have:</p>\n\n<pre><code>vector3d.value=1,2,3\n</code></pre>\n\n<p>And in the xml file I have:</p>\n\n<pre><code>&lt;context:property-placeholder location=\"test.properties\"/&gt;\n&lt;rbf:vector3d id=\"test_vector_with_properties\" delimeter=\",\" value=\"${vector3d.value}\"/&gt;\n</code></pre>\n\n<p>When I try to run my unit test, it crashes, and I get this exception:</p>\n\n<pre><code>Caused by: java.lang.NumberFormatException: For input string: \"${vector3d.value}\"\n    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1222)\n    at java.lang.Double.parseDouble(Double.java:510)\n    at scala.collection.immutable.StringLike$class.toDouble(StringLike.scala:234)\n    at scala.collection.immutable.StringOps.toDouble(StringOps.scala:31)\n    at rb.foundation.spring.xml.Vector3DBeanDefinitionParser$$anonfun$1.apply(Vector3DBeanDefinitionParser.scala:25)\n</code></pre>\n\n<p>When I use the .properties file for normal beans, it works great, which leads me to believe that there is a subtlety that I overlooked in my implemention of my parser.  It's written in scala, but you should be able to follow it:</p>\n\n<pre><code>class Vector3DBeanDefinitionParser extends AbstractSingleBeanDefinitionParser\n{\n  override def getBeanClass(element : Element) = classOf[Vector3D]\n\n  override def doParse(element: Element, builder: BeanDefinitionBuilder)\n  {\n    val delim = element.getAttribute(\"delimeter\")\n    val value = element.getAttribute(\"value\")\n\n    val values = value.split(delim).map(_.toDouble)\n\n    builder.addConstructorArgValue(values(0))\n    builder.addConstructorArgValue(values(1))\n    builder.addConstructorArgValue(values(2))\n  }\n}\n</code></pre>\n\n<p>I'm happy to add the key substitution if necessary, I just need to know where/how to do it.</p>\n\n<p>Ideas?</p>\n"},{"tags":["javascript","spring","spring-social"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13018576,"title":"Spring social security with javascript handebars","body":"<p>I have an application that has a javascript handlebars front end and a middle tier consisting of spring controllers/roo. I am struggling to come up with an authentication scheme that supports spring social integration. </p>\n\n<p>I have a working example for spring social security using the spring social security project for spring mvc, but have no idea how to proceed with integrating spring social with handlebars. Does anybody have an idea on how to go about integrating spring social security with javascript handlebars?</p>\n"},{"tags":["spring","github","gradle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13017443,"title":"What location (in windows) git files will be stored by default?","body":"<p>I have downloaded Spring Source from github as below\ngit clone git://github.com/SpringSource/spring-framework.git</p>\n\n<p>The console message as below:</p>\n\n<pre><code>$ git clone git://github.com/SpringSource/spring-framework.git\nCloning into 'spring-framework'...\nremote: Counting objects: 115615, done.\nremote: Compressing objects: 100% (36847/36847), done.\nremote: Total 115615 (delta 62280), reused 114048 (delta 61512)\nReceiving objects: 100% (115615/115615), 25.73 MiB | 254 KiB/s, done.\nResolving deltas: 100% (62280/62280), done.\nChecking out files: 100% (6191/6191), done.\n</code></pre>\n\n<p>Now which location these files will be stored? (I am using Windows Vista)\nAlso I need to run gradle build and gradle install (as per <a href=\"https://github.com/SpringSource/spring-framework#building-from-source).t\" rel=\"nofollow\">https://github.com/SpringSource/spring-framework#building-from-source).t</a></p>\n"},{"tags":["java","spring","javabeans"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13017066,"title":"What happens when spring bean definition file loaded into application multiple times?","body":"<p>I am just curious to know when a <code>Spring.xml</code> file loaded into application multiple times into an application using <code>ClassPathXmlApplicationContext</code>. For example if I want to get the services defined in <code>Spring.xml</code> into my claases by creating new instance of <code>ApplicationContext</code> in each class . Does this approach create each time new beans without destroying the previously created beans?Does this creates any memory problems ? When I see in <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/ClassPathXmlApplicationContext.html\" rel=\"nofollow\">ClassPathXmlApplicationContext API</a> in spring website I found this.Does this refresh creates new bean definition of existing bean by destroying existed one?</p>\n\n<pre><code>ClassPathXmlApplicationContext(String... configLocations)\n      ***Create a new ClassPathXmlApplicationContext, loading the definitions from the given XML files and automatically refreshing the context.***\n</code></pre>\n"},{"tags":["java","json","spring","jackson","deserialization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":35,"score":-2,"question_id":13016479,"title":"jackson polymorphism optout echo","body":"<p>I need to deserialize bunch of polymorphic classes ,but there is a single class that opts out. </p>\n\n<p>I have 2 polymorphism objects and 1 a special object\nFor example:</p>\n\n<pre><code>{\n  ...//common properties\n  type: \"Impl1\" \n  ...//non-common properties i.e. specific to Impl1\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>{\n  ...//common properties\n  type: \"Impl2\" \n  ...//non-common properties i.e. specific to Impl2\n}\n</code></pre>\n\n<p>and a special pojo (say Echo) that opts out polymorphism. It is </p>\n\n<pre><code>{\n   message: \"echo\"\n}\n</code></pre>\n\n<p>I need to distinguish between these POJOs by using Jackson version 1.9.8 .</p>\n"},{"tags":["spring","git","github"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":45,"score":0,"question_id":13016869,"title":"How to download an open source project (like Spring) in github","body":"<p>I wanted to download spring source from \n<a href=\"https://github.com/SpringSource/spring-framework\" rel=\"nofollow\">https://github.com/SpringSource/spring-framework</a>\nI have installed Git in my local Windows Vista Machine. How to download and setup in eclipse project.</p>\n"},{"tags":["java","spring","ehcache","pojo","method-parameters"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1330,"score":5,"question_id":9719067,"title":"Ehcache automatic key generation and @Cacheable spring annotation","body":"<p>Does anybody know how the default key generation for Ehcache works? If I have the following method:</p>\n\n<pre><code>@Cacheable(cacheName = CACHE_KEY) // CACHE_KEY is static final field.\npublic List&lt;DataObject&gt; list(\n    int firstRecord, int maxRecords, int pageSize, FilterObject filter) {\n    ....\n}\n</code></pre>\n\n<p>where <code>FilterObject</code> is a custom POJO, what should I expect to be the actual cache key? What I am observing is when using different <code>FilterObject</code> instances, it always produces the same result (the first call result is cached and returned). Probably it is the <code>FilterObject</code> POJO which causes the behaviour - I suppose it is either serialization, or <code>.toString()</code> issue, because I haven't overridden these methods. </p>\n\n<p>Still I was unable to find exact information on how the cache key for such method is being formed both in Ehcache's website and in the <code>@Cacheable</code> annotation documentation.\nI'd appreciate any information and recommendations on this topic.</p>\n"},{"tags":["java","spring","environment-variables","apache-camel"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":13015738,"title":"Having spring context variable pointing to actual external contexts in webapp","body":"<p>I am currently modifying our Apache Camel-based app to Tomcat. Because of business needs, we would have to host multiple instances of app on single machine, each with it's own set of config. Previously config files were bundled with app (and thus easily accessible from classpath), but now they will be separated in some absolute path (like path/instance1, path/instance2 etc). What I want to achieve with Spring:</p>\n\n<ul>\n<li>export instance conf path as variable in initial spring context file, so I can reference to it via ${instance_conf_path} (currently I have it in property file, read through PropertyPlaceholderConfigurer)</li>\n<li>have real spring contexts (they are logically separated) imported using  in the initial context mentioned</li>\n<li>since this path is also used in few parts of Apache Camel routing, I need to use this variable also there (this should work according to Camel's manual)</li>\n</ul>\n\n<p>Camel 2.10.2 is has Spring 3.0.7 in transitive dependencies, but after reading <a href=\"http://blog.springsource.com/2011/02/15/spring-3-1-m1-unified-property-management/\" rel=\"nofollow\">this article</a> I put manually Spring 3.1.2 into maven. But it was still complaining it doesn't know the variable. Any suggestions? Or do you know a better way in Spring to store all config externally and setting just path to this config in app bundle?\nThank You</p>\n"},{"tags":["spring","jsf","jsf-2","itext"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":982,"score":0,"question_id":7607795,"title":"Can't create a PDF with iText and JSF","body":"<p>I want to create a pdf using iText in my JSF + Spring web app.\nWhen I click on a button the pdf should be generated. The method that is fired:</p>\n\n<pre><code>public void createPDF() {\n    log.debug(\"entered createPDF\");\n    FacesContext context = FacesContext.getCurrentInstance(); \n    HttpServletResponse response = (HttpServletResponse)context.getExternalContext().getResponse();  \n    response.setContentType(\"application/pdf\");  \n    response.setHeader(\"Content-disposition\",  \"inline=filename=file.pdf\");\n    try {\n\n        // Get the text that will be added to the PDF\n        String text = \"test\";\n        // step 1\n        Document document = new Document();\n        // step 2\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        PdfWriter.getInstance(document, baos);\n        // step 3\n        document.open();\n        // step 4\n        document.add(new Paragraph(text));\n        // step 5\n        document.close();\n\n        // setting some response headers\n        response.setHeader(\"Expires\", \"0\");\n        response.setHeader(\"Cache-Control\",\n            \"must-revalidate, post-check=0, pre-check=0\");\n        response.setHeader(\"Pragma\", \"public\");\n        // setting the content type\n        response.setContentType(\"application/pdf\");\n        // the contentlength\n        response.setContentLength(baos.size());\n        // write ByteArrayOutputStream to the ServletOutputStream\n        OutputStream os = response.getOutputStream();\n        baos.writeTo(os);\n        os.flush();\n        os.close();\n        log.debug(\"flushed and closed the outputstream\");\n\n    }\n    catch(DocumentException e) {\n        log.error(\"error: \"+e);\n    }\n    catch (IOException e) {\n        log.error(\"error: \"+e);\n    }\n    catch (Exception ex) {\n        log.debug(\"error: \" + ex.getMessage());\n    }\n    context.responseComplete();\n    log.debug(\"context.responseComplete()\");\n}\n</code></pre>\n\n<p>this is the page with the button:</p>\n\n<pre><code>&lt;!DOCTYPE composition PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n    \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;ui:composition xmlns=\"http://www.w3.org/1999/xhtml\"\n    xmlns:s=\"http://jboss.org/seam/faces\"\n    xmlns:ui=\"http://java.sun.com/jsf/facelets\"\n    xmlns:f=\"http://java.sun.com/jsf/core\"\n    xmlns:h=\"http://java.sun.com/jsf/html\"\n    xmlns:rich=\"http://richfaces.org/rich\"\n    xmlns:a4j=\"http://richfaces.org/a4j\"\n    xmlns:c=\"http://java.sun.com/jsp/jstl/core\"\n    template=\"/pages/layout/layout.xhtml\"&gt;\n\n&lt;ui:define name=\"content\"&gt;\n        &lt;h:form&gt;\n            &lt;rich:panel style=\"width: 785px; height: 530px; \"&gt;\n&lt;a4j:commandButton value=\"Afdrukken\" execute=\"@form\"\n                    action=\"#{huishoudinkomenAction.print}\" style=\"float:right;\" /&gt;\n\n        &lt;/rich:panel&gt;\n    &lt;/h:form&gt;\n&lt;/ui:define&gt;\n</code></pre>\n\n<p></p>\n\n<p>I see the debug messages in the log but nothing happens to the web app. I don't see a pdf.\nWhat am I doing wrong?</p>\n\n<p>Regards,</p>\n\n<p>Derk</p>\n\n<p><strong>EDIT:\nWhen I changed the <code>&lt;a4j:commandButton /&gt;</code> to a <code>&lt;h:commandButton /&gt;</code> it worked.</strong></p>\n"},{"tags":["java","spring","hibernate","model"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13015803,"title":"Spring, Hibernate and multiple schemas in one codebase","body":"<p>What is the accepted practice to use multiple database 'models' in a Spring / Hibernate combo ? </p>\n\n<p>Would appreciate some help on an issue that has me scratching my head, as I am no expert in Spring/Hibernate !</p>\n\n<p>We are developing a web project that up until now has been built to the specification of its first customer. All the database tables are mapped to POJOs and we use Hibernate Annotations. Very simply, the project is a CRUD application that allows end users to update database information via a front end.</p>\n\n<p>We now need to support a new customer, but this customer has a slightly different specification; we will have changes to a number of tables' columns and datatypes.</p>\n\n<p>We don't want to combine into one table, as this bloats up the database with lots of NULL columns (there will be 10+ unique columns per customer in some table). </p>\n\n<p>The front end we can handle easily enough, as we just convert to and from JSON and the front end has been implemented per-customer from the ground up. But the backend is a bit more complicated.</p>\n\n<p>We have tried a prototype where we override two tables at runtime; we converted two corresponding model classes to interfaces and implemented a concrete class per customer, loaded via the Spring configuration, e.g for a \"products\" table, we tried:</p>\n\n<pre><code>package com.mycompany.generic.model;\npublic interface Product \n</code></pre>\n\n<p>and then</p>\n\n<pre><code>package com.mycompany.customera.model;\n@Table(name=\"products\")\npublic class CustomerAProduct implements Properties {\n  String colour;\n  int weight;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>package com.mycompany.customerb.model;\n@Table(name=\"products\")\npublic class CustomerBProduct implements Properties {\n  String colour;\n  int volume;\n  Double price;\n}\n</code></pre>\n\n<p>..where Spring loads, as a runtime option, <em>com.mycompany.customera</em> or <em>customerb</em> depending on configuration, along with any customer-specific validations/service classes to act on the new POJO's. You see that the underlying columns can be different.</p>\n\n<p>However, I am hesitate to pitch into implementing this, because..</p>\n\n<ul>\n<li>Almost every model class will need converting and implementing per-customer, not just the ones that are different. This is because we have many joins (OneToMany etc) within the model classes, Hibernate does not let you join to an interface (eg <a href=\"https://hibernate.onjira.com/browse/HHH-4338\" rel=\"nofollow\">HHH-4338</a>)</li>\n<li>some sort of util/factory is required to generate new instances of classes, as where we used to do <em>new Properties</em> we do not know whether to use <em>new CustomerAProperties()</em> or <em>new CustomerBProperties()</em> (for the same reason, we cannot use TargetEntity to solve the above problem, because this requires a .class file which cannot be set in the code)</li>\n</ul>\n\n<p>These seem pretty major downsides so I am trying to research a better way to do it. We can build per-customer, via Maven, but then I am not sure how to implement this in a way that isn't going to break Eclipse while we develop locally..</p>\n\n<p>Or, is there some other method that I am not aware of ? </p>\n\n<p>thanks in advance for any suggestions or pointers on what to research etc.</p>\n"},{"tags":["java","spring","redirect","controller"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13015912,"title":"Creating Multiple actions in one method in Spring MVC Controller","body":"<p>I wanna create 2 actions in one method in spring MVC.</p>\n\n<p>One is rest action and other is web action.</p>\n\n<pre><code>void method() {\n   response.sendRedirect(url1); // nothing return, just a signout action...\n   response.sendRedirect(url2); // it will redirect to other page.....any idea how it work...\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":128,"score":2,"question_id":13013227,"title":"Cannot set boolean to null","body":"<p>I have a class Shop with the following variable</p>\n\n<pre><code>@Column(columnDefinition = \"bit\")\nprivate boolean atShop;\n</code></pre>\n\n<p>Using this value, I am using HSQL to retrieve this information from the application</p>\n\n<pre><code>from Person person\nleft join fetch person.shop\n</code></pre>\n\n<p>when I try call this HSQL statement i get the following error</p>\n\n<pre><code>org.springframework.orm.hibernate3.HibernateSystemException: could not set a field value by reflection setter of com.test.dataobject.Shop.atShop; nested exception is org.hibernate.PropertyAccessException: could not set a field value by reflection setter of com.test.dataobject.Shop.atShop\n</code></pre>\n\n<p>It is throwing this because it is trying to set the boolean to null in the HSQL. I can solve this problem by changing <code>private boolean atShop;</code> to <code>private Boolean atShop;</code> but i want to keep this as a <code>boolean</code> as i am saving it as a bit in my database</p>\n\n<p>Is there a way to solve this without changing <code>boolean</code> to <code>Boolean</code>?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>I know that boolean can only be true/false and Boolean can be set to null, but is there a way to get hibernate/spring to set this value to false(which i thought it should do automatically) instead of trying to set it to null and throwing this exception?</p>\n\n<p>I have also tried adding annotation to automatically set the value to false but this does not work either</p>\n\n<pre><code>@Column(nullable = false, columnDefinition = \"bit default 0\")\nprivate boolean atShop;\n</code></pre>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13013776,"title":"Connecting a Spring context inside a webapp to one outside","body":"<p>I have an application that embeds tomcat, and in the embedded tomcat, launches a webapp, and in the webapp, has a spring context.</p>\n\n<p>I want to communicate a bean's worth of configuration from the application to code inside the webapp, and, if at all possible, I'd like to avoid going over JNDI falls in a barrel. So, I wonder, is there any way to get the ContextLoaderListener to connect up with an 'outer' context? Failing that, I can communicate a reference via a static field in a class that is loaded in the application's class loader and then inherited into the webapp's class loader.</p>\n"},{"tags":["spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3198,"score":3,"question_id":10818291,"title":"Spring 3.1 + Hibernate 4 - HibernateTemplate","body":"<p>Spring's <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate4/package-summary.html\" rel=\"nofollow\">hibernate4 package</a> appears to have done away with HibernateTemplate and HibernateDaoSupport. I'm in the process of upgrading Hibernate from 3 to 4 in my Spring app and I have a fair few subclasses of Spring's HibernateDaoSupport and a couple of Hibernate callbacks through HibernateTemplate. Perhaps I'm not using the right search terms, but I can't find any info in the reference docs on how I should be refactoring these to <a href=\"http://forum.springsource.org/showthread.php?124677-Is-there-a-class-to-replace-o-s-o-hibernate3-HibernateTemplate-with-Hibernate-4&amp;p=406779#post406779\" rel=\"nofollow\">\"use plain hibernate daos as explained in the reference guide\"</a>. Can anyone help point me in the right direction?</p>\n"},{"tags":["spring","data","neo4j"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":12920258,"title":"Neo4J - Simple cypher query","body":"<p>Assume there are two node entities:</p>\n\n<pre><code>public class Account extends BaseEntity\n{\n...\n@Fetch\n@RelatedTo(type = \"HAS_ROLE\")\nprivate Set&lt;Role&gt; roles = Sets.newHashSet();\n...\n}\n\npublic class Role extends BaseEntity\n{\n...\n}\n</code></pre>\n\n<p>In my repository, I have a Query that should get all Accounts by a given Role:</p>\n\n<pre><code>public interface AccountRepository extends GraphRepository&lt;Account&gt;\n{\n    @Query(\"START account=node:Account(0) MATCH account-[:HAS_ROLE]-&gt;({0}) return account\")\n    Iterable&lt;Account&gt; findByRole(Role role);\n}\n</code></pre>\n\n<p>But this query doesn't work, when I use this method in my test case I get the following error:</p>\n\n<pre><code>org.springframework.dao.InvalidDataAccessResourceUsageException: Error executing statement START account=node:Account(0) MATCH account-[:HAS_ROLE]-&gt;({0}) return account; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: Error executing statement START account=node:Account(0) MATCH account-[:HAS_ROLE]-&gt;({0}) return account; nested exception is expected string\n</code></pre>\n\n<p>As it seems, there is something wrong with my query, but I don't know what, and could't figure it out yet...\nCould anyone provide some help??\nTHANKS!</p>\n"},{"tags":["spring","http","spring-mvc","error-handling","bad-request"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":1606,"score":5,"question_id":6175600,"title":"Spring MVC Request body error handling","body":"<p>While using <code>@RequestBody</code> <code>StreamSource</code> found out, that if xml in request body in not valid <code>StreamSource</code> throws an Exception(resulting in 400 Bad Request) and i'm not able to handle it(tell client what is bad).</p>\n\n<p>Is there a way to handle such exception?</p>\n"},{"tags":["oracle","spring","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13011414,"title":"How to copy a row of a table using spring jdbc","body":"<p>I need to copy a row except one column which is the unique key to another row using spring jdbc. I'm getting nullpointer exception even though I check for null values. Is ther any other good way to achieve this? Help me. Thanks. Please find my code below: </p>\n\n<pre><code>insert.update(new Object[] { \n                    argModel.getKey(),\n                    CommonUtils.isNotNull(argModel.getPage_Key())?argModel.getPage_Key():\"\",\n                    CommonUtils.isNotNull(argModel.getNoteBookRef())?argModel.getNoteBookRef():\"\", \n                    argModel.getBatchNum(),\n                    alStructKey,\n                    identifiedStructKey,\n                    reactionKey,\n                    argModel.getAnalysisType(),\n                    CommonUtils.isNotNull(argModel.getSubmitted_Amt())?argModel.getSubmitted_Amt():\"0\",\n                    CommonUtils.isNotNull(argModel.getEstimated_Purity())?argModel.getEstimated_Purity():\"0\",\n                    CommonUtils.isNotNull(argModel.getKey_Nmr_Exp())?argModel.getKey_Nmr_Exp():\"\",\n                    CommonUtils.isNotNull(argModel.getSolvent_Used())?argModel.getSolvent_Used():\"\",\n                    CommonUtils.isNotNull(argModel.getProbe_Used())?argModel.getProbe_Used():\"\",\n                    CommonUtils.isNotNull(argModel.getSamp_Temp())?argModel.getSamp_Temp():\"0\",\n                    CommonUtils.isNotNull(argModel.getAchiral_Purity())?new Float(argModel.getAchiral_Purity()):0.0,\n                    CommonUtils.isNotNull(argModel.getChiral_Purity())?new Float(argModel.getChiral_Purity()):0.0,\n                    CommonUtils.isNotNull(argModel.getPeak1_Amt())?argModel.getPeak1_Amt():\"0\",\n                    CommonUtils.isNotNull(argModel.getPeak2_Amt())?argModel.getPeak2_Amt():\"0\",\n                    CommonUtils.isNotNull(argModel.getRequestId())?argModel.getRequestId():\"0\",\n                    CommonUtils.isNotNull(argModel.getSubmissionComments())?argModel.getSubmissionComments():\"\",\n                    CommonUtils.isNotNull(argModel.getStatusComments())?argModel.getStatusComments():\"\",\n                    CommonUtils.isNotNull(argModel.getCcList())?argModel.getCcList():\"\",\n                    argModel.isSaveSampleForPickUp()?\"YES\":\"NO\",\n                    CommonUtils.isNotNull(argModel.getAnalyticalContact())?argModel.getAnalyticalContact():\"\",\n                    argModel.getSubmittedOn(),\n                    argModel.getAcceptedOn(),\n                    CommonUtils.isNotNull(argModel.getSubmissionStatus())?argModel.getSubmissionStatus():\"\",\n                    CommonUtils.isNotNull(argModel.getSubmitter())?argModel.getSubmitter():\"\",\n                    CommonUtils.isNotNull(argModel.getTherapetuicArea())?argModel.getTherapetuicArea():\"\",\n                    CommonUtils.isNotNull(argModel.getProjectCode())?argModel.getProjectCode():\"\",\n                    CommonUtils.isNotNull(argModel.getCro())?argModel.getCro():\"\",\n                    CommonUtils.isNotNull(argModel.getSiteCode())?argModel.getSiteCode():\"\",\n                    CommonUtils.isNotNull(argModel.getAnalysisXml())?StorageUtils.toClobObject(CommonUtils.replaceSpecialCharsinXML(argModel.getAnalysisXml())):\"\"\n                    });\n</code></pre>\n"},{"tags":["java","spring","java-ee","pojo"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13011529,"title":"Calling Spring Based web application Classes from POJO","body":"<p>I have a WEB Application. I was asked to Call a Class (Service) inside the Spring application from a POJO.</p>\n\n<p>The Service is not exposed either as Webservice or REST. I was just the application as a jar. I had to add this to build path and call the service.</p>\n\n<p>Will it work??</p>\n\n<p>Am terribly confused!</p>\n"},{"tags":["java","eclipse","spring","eclipse-plugin","osgi"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12996260,"title":"How to migrate from Spring DI to OSGi DI in a nice manner?","body":"<p>I have a <code>Swing</code> project using <code>Spring</code> for DI and now I am trying to migrate to <code>Eclipse 4</code> and <code>OSGi</code>.<br>\nUsing the configuration files of <code>Spring</code> the user could comment/uncomment beans in order to add/remove functionality (offered by these back-end beans).<br>\nNow in <code>Eclipse</code> and <code>OSGi</code> I am looking for the best way to do this based on <code>OSGi</code>.<br>\nI know that I can make the beans as services and define start levels in <code>OSGi</code> but this does not solve my use case, which is:<br>\nThe application starts <em>without</em> these beans/modules running and if the user updates the configuration from the running UI these beans/modules start and they are also started on the next start-up of the application.<br>\nIs there a nice/clean approach for my problem?</p>\n"},{"tags":["java","spring","spring-data"],"answer_count":4,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":709,"score":3,"question_id":8610428,"title":"Scanning Spring Data repositories by Spring Config?","body":"<p>I'm trying to use spring data and spring config together in a small standalone application.</p>\n\n<pre><code>...\n  public static void main( String[] args )\n  {        \n    ApplicationContext ctx = new AnnotationConfigApplicationContext(AppConfig.class);\n    ... \n  }\n</code></pre>\n\n<p><strong>1.</strong> My question is how can I discover the spring data repositories without using </p>\n\n<pre><code>&lt;jpa:repositories base-package=\"foo.repositories\" /&gt;\n</code></pre>\n\n<p>by spring config ?</p>\n\n<p><strong>2.</strong> If not, can I use 'ClassPathXmlApplicationContext' and 'AnnotationConfigApplicationContext' together somehow ?</p>\n"},{"tags":["spring","tomcat","primefaces"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":13011011,"title":"prime faces jsf pages will not render on linux tomcat but will render on eclipse test env","body":"<p>My first time posting so if i break the protocalls I apologise</p>\n\n<p>I have created a project that runs Primefaces with Spring using Eclipse and a tomcat 6 server on windows the application runs perfectly fine, when the application is moved to the \"live\" server which is a linux box the screens will not display</p>\n\n<p>All the libraries are copied over as they should be, when I try access the url on the linux box with the jsf extention(login.jsf) i recive a 404 error, when i try using the .xhtml extention (login.xhtml) i recive an xml view of the code</p>\n\n<p>my web.xml file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://java.sun.com/xml/ns/javaee\" \nxmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" version=\"2.5\"&gt;\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;myApp&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n      &lt;param-value&gt;WEB-INF/applicationContext.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;\n  &lt;/servlet&gt;\n  &lt;context-param&gt;\n    &lt;param-name&gt;javax.faces.STATE_SAVING_METHOD&lt;/param-name&gt;\n    &lt;param-value&gt;server&lt;/param-value&gt;\n  &lt;/context-param&gt;\n  &lt;context-param&gt;\n    &lt;param-name&gt;javax.faces.DEFAULT_SUFFIX&lt;/param-name&gt;\n    &lt;param-value&gt;.xhtml&lt;/param-value&gt;\n  &lt;/context-param&gt;\n  &lt;context-param&gt;\n    &lt;param-name&gt;com.sun.faces.expressionFactory&lt;/param-name&gt;\n    &lt;param-value&gt;com.sun.el.ExpressionFactoryImpl&lt;/param-value&gt;\n  &lt;/context-param&gt;\n  &lt;context-param&gt;\n    &lt;param-name&gt;javax.faces.PROJECT_STAGE&lt;/param-name&gt;\n    &lt;param-value&gt;Development&lt;/param-value&gt;\n  &lt;/context-param&gt;\n  &lt;context-param&gt;\n    &lt;param-name&gt;javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL&lt;/param-name&gt;\n    &lt;param-value&gt;true&lt;/param-value&gt;\n  &lt;/context-param&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;myApp&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;*.jsf&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n  &lt;context-param&gt;\n    &lt;param-name&gt;log4jtLocation&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/log4j.xml&lt;/param-value&gt;\n  &lt;/context-param&gt;\n  &lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n  &lt;listener&gt;\n    &lt;listener-class&gt;\n      org.springframework.web.context.ContextLoaderListener\n   &lt;/listener-class&gt;\n  &lt;/listener&gt;\n  &lt;listener&gt;\n    &lt;listener-class&gt;\n          org.springframework.web.context.request.RequestContextListener\n       &lt;/listener-class&gt;\n  &lt;/listener&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>my login.xhtml</p>\n\n<pre><code> &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n    &lt;ui:composition xmlns=\"http://www.w3.org/1999/xhtml\"\n          xmlns:h=\"http://java.sun.com/jsf/html\"\n          xmlns:f=\"http://java.sun.com/jsf/core\"\n          xmlns:ui=\"http://java.sun.com/jsf/facelets\"\n          xmlns:p=\"http://primefaces.org/ui\"\n          template = \"template/template.xhtml\"&gt;\n    &lt;h:head&gt;\n\n    &lt;/h:head&gt;\n    &lt;ui:define name=\"body\"&gt;\n    &lt;h:form id=\"form\"&gt;\n\n    &lt;p:growl id=\"growl\" showDetail=\"true\" /&gt; \n\n\n          &lt;p:panel&gt;\n                &lt;p:panelGrid columns=\"2\"&gt;\n                        &lt;h:outputLabel value=\"Username:\"/&gt;\n                        &lt;p:inputText value = \"#{loginUI.username}\"/&gt;\n\n                        &lt;h:outputLabel value=\"Password\"/&gt;\n                        &lt;p:password value = \"#{loginUI.password}\"/&gt;\n\n\n                &lt;/p:panelGrid&gt;\n                &lt;p:commandButton value=\"Login\" actionListener=\"#{loginUI.login}\" update=\"growl\"/&gt; \n\n          &lt;/p:panel&gt;\n    &lt;/h:form&gt;\n    &lt;/ui:define&gt;\n    &lt;/ui:composition&gt;\n    [/code]\n</code></pre>\n\n<p>my faces config file</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n    &lt;faces-config\n        xmlns=\"http://java.sun.com/xml/ns/javaee\"\n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n        xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd\"\n        version=\"2.1\"&gt;\n\n         &lt;application&gt;\n      &lt;el-resolver&gt;\n              org.springframework.web.jsf.el.SpringBeanFacesELResolver\n      &lt;/el-resolver&gt;\n       &lt;/application&gt;\n\n    &lt;/faces-config&gt;\n</code></pre>\n\n<p>when i start the tomcat there are no errors in the log</p>\n\n<p>thanks in advance</p>\n"},{"tags":["jquery","mysql","spring","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13010075,"title":"Get custom rowId in jqGrid subgrid","body":"<p>When I try to expand a row of parent table to show a sub grid, the ID that is being passed is being generated by javascript. So the first row of the parent table gets a rowid of 1, second  the rowid of 2. So when I click to expand the subgrid for each of them, the URL that gets called is <code>myurl.html?q=1</code> and <code>myurl.html?q=2</code>. I'm using the <code>q=?</code> part of the query to fetch the rows for the subgrid. </p>\n\n<p>However, the problem is that my parent rows are stored in the database with a unique id, which is not <code>1 2 3 etc.</code> it is an autogenerated id by Mysql. </p>\n\n<p><strong>Question</strong> </p>\n\n<p>How can I change the behavior of parentGrid or subGrid so that when subgrid is expanded, rather than autogenerated <code>1, 2, 3, etc.</code> I get the actual ID of the parent row as it is in the DB.  </p>\n"},{"tags":["java","spring","web","annotations","autowired"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":96,"score":2,"question_id":13010177,"title":"Why won't my variable be autowired?","body":"<p>For some reason the object pointer I am trying to instantiate with @Autowired is never instantiated. I've tried looking at several examples, but nothing seems to work! Here is my code:</p>\n\n<p>Testing.java</p>\n\n<pre><code>package com.example.core.service.integration;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.test.context.ContextConfiguration;\n\n@ContextConfiguration(locations={\"/app-context.xml\"})\npublic class Testing {\n\n@Autowired\nprivate IntegrationRestService integrationRestService;\n\npublic static void main(String args[])  {\n    Testing t = new Testing();\n    t.checkNull();\n}\n\nprivate void checkNull() {\n    if(integrationRestService == null) System.err.println(\"FAIL...\");\n    else System.out.println(\"SUCCESS!\");\n}\n\n}\n</code></pre>\n\n<p>IntegrationTestService.java</p>\n\n<pre><code>public interface IntegrationRestService {\n\npublic  FindSomething getFindSomethingResponse(String a, int b, int c);\n\npublic  FindSomethingElse getFindSomethingElseResponse(String urlToRead);\n}\n</code></pre>\n\n<p>IntegrationRestServiceImpl.java</p>\n\n<pre><code>@Service\n@Path(\"/test\")\npublic class IntegrationRestServiceImpl implements IntegrationRestService {\n\n\n    public IntegrationRestServiceImpl() {\n        super();\n     }\n   ...\n}\n</code></pre>\n\n<p>app-context.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:mvc=\"http://www.springframework.org/schema/mvc\"     xmlns:p=\"http://www.springframework.org/schema/p\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\ndefault-autowire=\"constructor\"\nxsi:schemaLocation=\"\n    http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n\n&lt;!-- JSR-303 support will be detected on classpath and enabled automatically --&gt;\n&lt;context:annotation-config/&gt;\n\n&lt;context:component-scan base-package=\"com.example.core\"/&gt;\n\n\n&lt;bean id=\"IntegrationRestService\" class=\"com.example.core.service.integration.IntegrationRestServiceImpl\" /&gt;\n&lt;bean id=\"Testing\" class=\"com.example.core.service.integration.Testing\" /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>Any ideas what on I'm doing wrong?</p>\n\n<h1>Answer:</h1>\n\n<p>Testing.java</p>\n\n<pre><code>@Service\npublic class Testing {\n\n@Autowired\nprivate IntegrationRestService integrationRestService;\n\npublic static void main(String args[])  {\n    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"/META-INF/spring/app-context.xml\");\n    Testing testing = (Testing) context.getBean(Testing.class);\n    testing.checkNull();\n}\n\n\nprivate void checkNull() {\n    if(integrationRestService == null) System.err.println(\"FAIL...\");\n    else System.out.println(\"SUCCESS!\");\n}\n\n}\n</code></pre>\n\n<p>app-context.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:mvc=\"http://www.springframework.org/schema/mvc\" xmlns:p=\"http://www.springframework.org/schema/p\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\ndefault-autowire=\"constructor\"\nxsi:schemaLocation=\"\n    http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n\n&lt;!-- JSR-303 support will be detected on classpath and enabled automatically --&gt;\n&lt;context:annotation-config/&gt;\n\n&lt;context:component-scan base-package=\"com.example.core\"/&gt;\n\n&lt;bean id=\"testing\" class=\"com.example.core.service.integration.Testing\"/&gt;\n\n&lt;bean id=\"integrationRestService\" class=\"com.example.core.service.integration.IntegrationRestServiceImpl\" /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["spring","web-applications","modularity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13007015,"title":"Java web application modularize with spring","body":"<p>I'm trying to build a project structure like this:</p>\n\n<pre><code>Project\n|--Web_module.war\n    |--Data_module.jar(Spring)\n    |--Util_module.jar\n    |--other public api...\n</code></pre>\n\n<p>which means, different modules should be packed into different jars, so i have to have more spring configurations(application-context.xml) for different modules (e.g. for data module and for web module).</p>\n\n<p>My question, how could I organize all the configuration files to include them correctly in the web module.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["spring","gwt","gwt-rpc","gwt2","resttemplate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12972409,"title":"could not integrate GWT with Spring RestTemplate implementation","body":"<p>I'm a beginner in GWT. Currently I'm trying to create an Web application in Spring to consume data from <strong>REST</strong> and displays those details in <strong>GWT</strong>. So, I used  <strong>Spring RestTemplate</strong> for client(to make a request and unmarshalling to java Object) and left the Dependency Injection to Spring(annotation). I have developed these entire thing in <strong>Eclipse IDE which has GWT-2.4 plugin.</strong></p>\n\n<p>I have tried to start this Web Application in below Cases and facing the specified issues.</p>\n\n<p><strong>Case #1:</strong>\nWhen i'm trying to start the application as Google Web Application (Right Click -> Run as -> Google Web Application), The dependency injection is not happening, It throws NullPointerException on an Property reference. I guess when i'm starting as Google App it doesn't makes my Context Loaded and thus Bean-DI is not happening.</p>\n\n<p><strong>Case #2:</strong>\nWhile trying to Run on Tomcat Server, all my Bean Creation and Dependency Injection are happening, but it doesn't make an EntryPoint for GWT. I have not defined any Controller explicitly, because i'm in the thought of GWT will take care of it(as like running in Google Web App Server).</p>\n\n<p><strong>NOTE:</strong> The Application is working perfectly when i'm running the GWT modules seperately(not consumes the data from WebService) and even Spring RestTemplate Module working as good enough in consume RestService and displays the values in System.Out.println().</p>\n\n<p><strong>The core issue is in making an Interaction between GWT and Spring DI.</strong></p>\n\n<p><strong>Project.gwt.xml:</strong></p>\n\n<p></p>\n\n<pre><code>&lt;inherits name='com.google.gwt.user.User'/&gt;\n&lt;inherits name='com.google.gwt.user.theme.clean.Clean'/&gt;\n\n&lt;entry-point class='com.abc.XXXX.gwt.ui.client.XXXX'/&gt;\n\n  &lt;source path='client'/&gt;\n  &lt;source path='shared'/&gt;\n  &lt;source path='service'/&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>ApplicationContext.xml:</strong></p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.serco.XXXX\" /&gt;\n\n&lt;context:property-placeholder location=\"classpath:ClientConfig.properties\" /&gt;\n\n&lt;bean id=\"clientSkillService\" class=\"com.abc.XXXX.gwt.ui.service.clientService.impl.ClientSkillService\"\n    p:hostName=\"${rest.hostName}\"\n    p:portNumber=\"${rest.port}\"\n    p:userName=\"${rest.userName}\"\n    p:password=\"${rest.password}\"&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"restTemplate\" class=\"org.springframework.web.client.RestTemplate\"&gt;\n    &lt;property name=\"messageConverters\"&gt;\n        &lt;list&gt;\n            &lt;bean class=\"org.springframework.http.converter.xml.MarshallingHttpMessageConverter\"&gt;\n                &lt;constructor-arg&gt;\n                    &lt;bean class=\"org.springframework.oxm.jaxb.Jaxb2Marshaller\"&gt;\n                        &lt;property name=\"classesToBeBound\"&gt;\n                            &lt;list&gt;\n                                &lt;value&gt;com.abc.XXXX.gwt.ui.shared.SkillDetailList&lt;/value&gt;\n                                &lt;value&gt;com.abc.XXXX.gwt.ui.shared.SkillDetail&lt;/value&gt;\n                            &lt;/list&gt;\n                        &lt;/property&gt;\n                    &lt;/bean&gt;\n                &lt;/constructor-arg&gt;\n            &lt;/bean&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>Web.xml:</strong></p>\n\n<pre><code>&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;\n    classpath:ApplicationContext.xml\n    &lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n</code></pre>\n\n<p>Kindly provide your suggestion, how to make it work. </p>\n\n<p>Thanks in Advance.</p>\n\n<p><strong>Updated:</strong> HTML File</p>\n\n<pre><code> &lt;head&gt;\n    &lt;meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\"&gt;\n    &lt;title&gt;XYZ UI DASHBOARD&lt;/title&gt;\n    &lt;script type=\"text/javascript\" language=\"javascript\" src=\"RTSocketDataMonitor/RTSocketDataMonitor.nocache.js\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1 align=\"center\"&gt;XYZ UI DASHBOARD&lt;/h1&gt;\n    &lt;div align=\"center\" id=\"grid_tbl\"&gt;&lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p><strong>Entry Point Class: XXXX.java</strong></p>\n\n<pre><code>public class XXXX implements EntryPoint {\n    /*entry point method*/\n    public void onModuleLoad() {\n        //Creation of DialogBoxes and Panel here\n        DialogBox dialogBox;\n        //Creation of Composite Derived Class which has DataGrid, DataList, Columnprovider properties to render Details in Table format\n        SkillDetailPaginationHandler&lt;SkillDetail&gt; skd = \n        new SkillDetailPaginationHandler&lt;SkillDetail&gt;();\n        //added VertiCal Panel in Dialogue Boxes and set it in RootPanel\n        RootPanel.get(\"grid_tbl\").add(dialogBox);\n    }\n}\n</code></pre>\n\n<p><strong>GWT Compiled WAR Contents:</strong></p>\n\n<pre><code>  -&gt;Root\n      --&gt;XXXX(Folder in the Project Name)\n        --&gt;gwt(Folder)\n        --&gt;XXXX.nocache.js\n        --&gt;host.html\n      --&gt;WEB-INF (Folder)\n        --&gt; deploy\n        --&gt; lib \n        --&gt; web.xml\n</code></pre>\n"},{"tags":["spring","jpa-2.0","spring-data-jpa"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13009937,"title":"spring data jpa query to limit","body":"<p>I have query as such :</p>\n\n<pre><code>@Query(\"select a from Ability a where a.eventLogic = ?1 AND a.abilitySetId = ?2 ORDER BY    RAND() LIMIT ?3\")\n</code></pre>\n\n<p>BUt i get an error:</p>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: org.hibernate.hql.ast.QuerySyntaxException: unexpected token: LIMIT near line 1, column 117\n</code></pre>\n\n<p>How can i programmatically put in the limit number?</p>\n"},{"tags":["java","spring","javabeans"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":801,"score":1,"question_id":9347929,"title":"Spring - set a property only if the value is not null","body":"<p>When using Spring, is it possible to set a property only if the value passed is not null?</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;bean name=\"myBean\" class=\"some.Type\"&gt;\n   &lt;property name=\"abc\" value=\"${some.param}\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The behavior I'm looking for is:</p>\n\n<pre><code>some.Type myBean = new some.Type();\nif (${some.param} != null) myBean.setAbc(${some.param});\n</code></pre>\n\n<p>The reason I need this is since <code>abc</code> has a default value which I don't want to override with a <code>null</code>.\nAnd the Bean I am creating is not under my source control - so I cannot change its behavior. (Also, <code>abc</code> for this purpose might be a primitive, so I can't set it with a null anyway.</p>\n\n<p><strong>EDIT:</strong><br>\nAccording to the answers I think my question requires clarification.</p>\n\n<p>I have bean I need to instantiate and pass to 3rd party I use. This bean has many properties (12 currently) of various types (<code>int</code>, <code>boolean</code>, <code>String</code>, etc.)<br>\nEach property has a default value - I don't know what it is and would prefer not needing to know unless it becomes an issue.\nWhat I'm looking for is a generic solution that comes from Spring's abilities - currently the only solution I have is a reflection based.</p>\n\n<p><strong>Configuration</strong></p>\n\n<pre><code>&lt;bean id=\"myBean\" class=\"some.TypeWrapper\"&gt;\n   &lt;property name=\"properties\"&gt;\n     &lt;map&gt;\n         &lt;entry key=\"abc\" value=\"${some.value}\"/&gt;\n         &lt;entry key=\"xyz\" value=\"${some.other.value}\"/&gt;\n         ...\n      &lt;/map&gt;\n   &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p><strong>Code</strong></p>\n\n<pre><code>public class TypeWrapper\n{\n    private Type innerBean;\n\n    public TypeWrapper()\n    {\n        this.innerBean = new Type();\n    }\n\n    public void setProperties(Map&lt;String,String&gt; properties)\n    {\n        if (properties != null)\n        {\n            for (Entry&lt;String, Object&gt; entry : properties.entrySet())\n            {\n                String propertyName = entry.getKey();\n                Object propertyValue = entry.getValue();\n\n                setValue(propertyName, propertyValue);\n            }\n        }\n    }\n\n    private void setValue(String propertyName, Object propertyValue)\n    {\n        if (propertyValue != null)\n        {\n           Method method = getSetter(propertyName);\n           Object value = convertToValue(propertyValue, method.getParameterTypes()[0]);\n           method.invoke(innerBean, value);\n        }\n    }\n\n    private Method getSetter(String propertyName)\n    {\n      // Assume a valid bean, add a \"set\" at the beginning and toUpper the 1st character.\n      // Scan the list of methods for a method with the same name, assume it is a \"valid setter\" (i.e. single argument)\n      ... \n    }\n\n    private Object convertToValue(String valueAsString, Class type)\n    {\n        // Check the type for all supported types and convert accordingly\n        if (type.equals(Integer.TYPE))\n        {\n          ...\n        }\n        else if (type.equals(Integer.TYPE))\n        {\n          ...\n        }\n        ...\n    }\n}\n</code></pre>\n\n<p>The real \"difficulty\" is in implementing <code>convertToValue</code> for all possible value types.\nI have done this more than once in my life - so it is not a major issue to implement it for all possible types that I need (mostly primitives and a few enums) - but I hoped a more intelligent solution existed.</p>\n"},{"tags":["java","spring","javafx","spring-remoting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":13007331,"title":"org.springframework.remoting.RemoteAccessException: Could not access HTTP invoker remote service occurs when starting tasks from anbother thread","body":"<p>I have spring application with JavaFX client, and I get this exception when ever come method is called which runs in another thread (for background tasks) - which is not the main JavaFx thread.</p>\n\n<pre><code>org.springframework.remoting.RemoteAccessException: Could not access HTTP invoker remote service at [http://localhost:8080/server/service/security/UserGroupService]; \n nested exception is java.net.SocketTimeoutException: Read timed out\nat org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.convertHttpInvokerAccessException(HttpInvokerClientInterceptor.java:211)\nat org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:144)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\nat $Proxy63.batchJobSetAccessRightsToConsultant(Unknown Source)\nat client.view.control.reporting.AccessRightsBatchDialog$1Local$744.invoke$(AccessRightsBatchDialog.fx:374)\nat com.sun.javafx.functions.Function1.invoke(Function1.java:44)\nat com.sun.javafx.functions.Function1.invoke$(Function1.java:38)\nat client.async.AsyncTask.taskRun(AsyncTask.fx:71)\nat client.async.AsyncTaskHelper.run(AsyncTaskHelper.java:32)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\nat java.lang.Thread.run(Thread.java:662)\n  Caused by: java.net.SocketTimeoutException: Read timed out\nat java.net.SocketInputStream.socketRead0(Native Method)\nat java.net.SocketInputStream.read(SocketInputStream.java:129)\nat java.io.BufferedInputStream.fill(BufferedInputStream.java:218)\nat java.io.BufferedInputStream.read(BufferedInputStream.java:237)\nat org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)\nat org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)\nat org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)\nat org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)\nat org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)\nat org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)\nat org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)\nat org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)\nat org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\nat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\nat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\nat org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor.executePostMethod(CommonsHttpInvokerRequestExecutor.java:195)\nat org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor.doExecuteRequest(CommonsHttpInvokerRequestExecutor.java:129)\nat org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.executeRequest(AbstractHttpInvokerRequestExecutor.java:136)\nat org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:191)\nat org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:173)\nat org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:141)\n... 11 more\n</code></pre>\n\n<p>The last change I made, and I suspect, a cause of this - because I need user info from HTTP session, in each service proxy , I am passing this httpInvokerRequestExecutor bean :</p>\n\n<pre><code>&lt;bean id=\"httpInvokerRequestExecuter\" class=\"org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor\" &gt;\n\nfor example:\n\n&lt;bean id=\"testServiceProxy\"\n    class=\"org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean\"&gt;\n    &lt;property name=\"serviceUrl\" value=\"${remoteUrl}/service/test/TestService\" /&gt;\n    &lt;property name=\"serviceInterface\"\n        value=\"common.service.test.TestService\" /&gt;\n    &lt;property name=\"httpInvokerRequestExecutor\" ref=\"httpInvokerRequestExecuter\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>With methods which run in main thread, this never seems to happen.</p>\n\n<p>All ideas on caused and possible solutions are very welcomed</p>\n\n<p>Thanx.  </p>\n"},{"tags":["eclipse","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":11642727,"title":"Vmware tcServer for Eclipse Juno","body":"<p>From within <code>Eclipse JEE - Juno</code>, <em>\"new server wizard</em>\" there is no <code>Vmware tcServer</code> option even after installing <code>Spring STS plugin</code> and <code>Vmware tcServe</code>r extension. Unlike with my Eclipse Indigo/Helios where there is a tcServer option.</p>\n\n<p>What could be the reason? </p>\n"},{"tags":["web-services","spring","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13009479,"title":"Spring Security","body":"<p>I am trying to use spring security in my application developing restful web services and not getting the way how to send request to j_spring_security_check directly so that i can provide same url as a web service to Authorization of username and password.</p>\n\n<p>Currently i am using following request pattern:</p>\n\n<p>URL: \"http://localhost:8080/CabFMS/j_spring_security_check\"\nContent-type: application/x-www-form-urlencoded\nBody: {'j_username':'user','j_password':'123'}</p>\n\n<p>Response: is Bad credentials</p>\n\n<p>I am not sure about Content-type and body parameters. Please provide suggestion. To send request i am using REST Client</p>\n\n<p>Tarun Gupta</p>\n"},{"tags":["spring","jpa","hibernate-mapping"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13009370,"title":"No identifier specified for entity.. exception .. spring and jpa","body":"<p>I keep getting the following exception:</p>\n\n<pre><code> org.hibernate.AnnotationException: No identifier specified for entity:\n</code></pre>\n\n<p>My entity is as follows:.. I have read up other posts, and I seem to be doing everything as i should.. have an @id column.</p>\n\n<pre><code>@Entity\n@Table(name = \"runner_pool\")\npublic class RunnerPool implements Serializable {\n\n    private static final long serialVersionUID = 4603353128430948197L;\n\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = \"runner_id\")\n    @Id\n    private Long runnerId;\n</code></pre>\n"},{"tags":["spring","jms","activemq","jmstemplate"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13005847,"title":"ACTIVEMQ - How can subscriber receive topic messages when started after publisher?","body":"<p>In my program, I have two modules :- Publisher and Subscriber which communicate via Topic.</p>\n\n<p>I understand that in order to receive messages by subscriber, it should be started before publisher. But there may be a scenario where the subscriber goes down for some reason and needs to be restarted. Is there any way, by which if I start the Subscriber after Publisher, then also it should be able to receive message?</p>\n"},{"tags":["spring","hibernate","calendar","primefaces","spring-webflow"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13008652,"title":"Primfaces calendar/hibernate - send date only to database","body":"<p>I have a form which inserts a date into a table. When primefaces calendar is used, the date is correct, but the time is added as well (in my case: 00:00:00.0) </p>\n\n<p>here's my form:</p>\n\n<pre><code>&lt;h:form&gt;\n        &lt;h:messages/&gt;\n        &lt;h:inputText value=\"#{testBean.saveTabletest.first}\"/&gt;&lt;br/&gt;\n        &lt;p:inputMask value=\"#{testBean.saveTabletest.second}\" mask=\"99999\"/&gt;&lt;br/&gt;\n        &lt;p:calendar id=\"testcal\" value=\"#{testBean.saveTabletest.dates}\" dateOnly=\"true\" showOn=\"button\"/&gt;&lt;br/&gt;\n        &lt;p:commandButton value=\"Send\" action=\"save\"/&gt;\n&lt;/h:form&gt;\n</code></pre>\n\n<p>And here is how the date is inserted in the database :  2012-10-03 00:00:00.0</p>\n\n<p>I want the date inserted into the database without the time. The column in the table is a \"date-column\"</p>\n\n<p>Is there a primefaces property that I can set to do this? or do I have to change the function that saves the data in the table (i am using hibernates saveOrupdate)? </p>\n"},{"tags":["spring","jersey"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12151444,"title":"ContainerRequest .getEntity is empty in filter method of ContainerResponseFilter","body":"<p>I am creating my own logging filter implementing ContainerRequestFilter and ContainerResponseFilter. I want to print the request entity only if the response failed eg. Response status code as 404, 500. </p>\n\n<p>but I get empty string when I do request.getEntity() or request.getEntityInputStream() \nin the filter method of ContainderResponseFilter(); </p>\n\n<p>It looks like jersey removes the content after reading it at resource level. </p>\n"},{"tags":["spring","annotations"],"answer_count":2,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":5785,"score":8,"question_id":2902335,"title":"Instantiating multiple beans of the same class with Spring annotations","body":"<p>With an XML configured Spring bean factory, I can easily instantiate multiple instances of the same class with different parameters. How can I do the same with annotations? I would like something like this:</p>\n\n<pre><code>@Component(firstName=”joe”, lastName=”smith)\n@Component(firstName=”mary”, lastName=”Williams”)\npublic class Person { /* blah blah */ }\n</code></pre>\n"},{"tags":["spring","mvc","spring-mvc","model"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2188,"score":3,"question_id":8593397,"title":"Backbone.js + Spring MVC. Save model","body":"<p>I'm am junior in Backbone.js. When I send request from JSP FORM server side auvtomaticaly parse datas to my ModelObject. But when I sending requests from Backbone save() my ModelObject is empty on Server Side. How can I do it like as JSP FORMs?</p>\n\n<pre><code>    @RequestMapping(value = \"/member/ajax*\", method = RequestMethod.POST)\n    public void onSubmitAjax(Member member, HttpServletResponse response, HttpServletRequest request) throws Exception {\n        //member is empty           \n        memberManager.saveMember(member); \n\n    }\n</code></pre>\n\n<p>when I use GET it's working on Client Side:</p>\n\n<pre><code>@RequestMapping(value = \"/member/ajax*\", method = RequestMethod.GET)\n    public\n    @ResponseBody\n    Member showForm(@RequestParam(required = false) Long id, HttpServletRequest request) throws Exception {\n        Member member = memberManager.getMember(id);\n        return member;\n    }\n</code></pre>\n"},{"tags":["unit-testing","spring","embedded-database","h2"],"answer_count":4,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":9685,"score":7,"question_id":2012292,"title":"Spring configuration for embedded H2 database for tests","body":"<p>What does your Spring configuration for a datasource with embedded <a href=\"http://www.h2database.com/html/main.html\" rel=\"nofollow\">h2 database</a> that you use for integration (JUnit-)tests look like? My first try with a <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/datasource/SingleConnectionDataSource.html\" rel=\"nofollow\">SingleConnectionDataSource</a> basically worked, but failed on more complicated tests where you need several connections at the same time or suspended transactions. You might start h2 in <a href=\"http://stackoverflow.com/questions/1503079/start-the-h2-database-in-server-mode-via-spring\">tcp based server mode</a> as well, but this is probably not the fastest communication mode for a temporary embedded database in memory. What are the possibilities and their advantages / disadvantages? And how do you create the tables / populate the database?</p>\n\n<p>Update: Let's specify some concrete requirements that are important for such tests.</p>\n\n<ul>\n<li>The database should be temporary and in memory</li>\n<li>The connection should probably not use tcp to be fast</li>\n<li>It would be nice if I could use a database tool to inspect the content of the database during debugging</li>\n<li>We have to define a datasource since we can't use the application servers datasource in Unittests</li>\n</ul>\n"},{"tags":["spring","spring-mvc","jsf-2","java-ee-6"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13005421,"title":"JSF View scope in Spring 3.0","body":"<p>Is there anything like View scope in Spring 3.0? Actually I have a application (using JSF+Spring) whose beans are managed by spring.So I want to destroy these beans on navigation.But I didn't found any scope like VIEW scope in spring.\nI saw <a href=\"http://cagataycivici.wordpress.com/2010/02/17/port-jsf-2-0s-viewscope-to-spring-3-0/?blogsub=confirming#subscribe-blog\" rel=\"nofollow\">this link</a> but it didn't work for me. <br/>Guide me if anyOne Have an idea?<br/><br/>\n<strong>Edit:</strong><br/></p>\n\n<pre><code>import java.util.Map;\n\nimport javax.faces.context.FacesContext;\n\nimport org.springframework.beans.factory.ObjectFactory;\nimport org.springframework.beans.factory.config.Scope;\n\n/**\n * Implements the JSF View Scope for use by Spring. This class is registered as a Spring bean with the CustomScopeConfigurer.\n*/\npublic class ViewScope implements Scope {\n\n    public Object get(String name, ObjectFactory&lt;?&gt; objectFactory) {\n\n        System.out.println(\"**************************************************\");\n        System.out.println(\"-------------------- Getting objects For View Scope ----------\");\n        System.out.println(\"**************************************************\");\n        if (FacesContext.getCurrentInstance().getViewRoot() != null) {\n            Map&lt;String, Object&gt; viewMap = FacesContext.getCurrentInstance().getViewRoot().getViewMap();\n            if (viewMap.containsKey(name)) {\n                return viewMap.get(name);\n            } else {\n                Object object = objectFactory.getObject();\n                viewMap.put(name, object);\n                return object;\n            }\n        } else {\n            return null;\n        }\n    }\n\n    public Object remove(String name) {\n        System.out.println(\"**************************************************\");\n        System.out.println(\"-------------------- View Scope object Removed ----------\");\n        System.out.println(\"**************************************************\");\n\n        if (FacesContext.getCurrentInstance().getViewRoot() != null) {\n            return FacesContext.getCurrentInstance().getViewRoot().getViewMap().remove(name);\n        } else {\n            return null;\n        }\n    }\n\n    public void registerDestructionCallback(String name, Runnable callback) {\n        // Do nothing\n    }\n\n    public Object resolveContextualObject(String key) {         return null;\n    }\n\n    public String getConversationId() {\n        return null;\n    }\n\n}\n</code></pre>\n\n<p>--> In application context<br/></p>\n\n<pre><code>&lt;bean class=\"org.springframework.beans.factory.config.CustomScopeConfigurer\"&gt;\n    &lt;property name=\"scopes\"&gt;\n            &lt;map&gt;\n                &lt;entry key=\"view\"&gt;\n                    &lt;bean class=\"com.delta.beans.ViewScope\"/&gt;\n                &lt;/entry&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n &lt;/bean&gt;\n</code></pre>\n"},{"tags":["spring","dependency-injection","inversion-of-control","ninject"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12365418,"title":"Inversion of control (IoC) on DataBase?","body":"<p>EDITED: I tried to make the question more clear.</p>\n\n<p>Here is my question,</p>\n\n<p>We have a single database and we have one code. But we use this code for two different regions. We separate some part of the code by using IoC container.</p>\n\n<p>The problem is DB Structure in common doesn't compensate both of regions specialty. Some tables has to have more columns has no sense for other region(s). Finally on my model there are many bulky fields. What is your offer? </p>\n\n<p>Beside this each IoC brings me less merge availability .</p>\n\n<p><strong>1.case) Do I need to separate the model with IoC?  //My code can't build for other region in this case</strong></p>\n\n<p><strong>2.case) Do I need to separate the DB? //Brings me less merge availability, and first case occurs</strong> </p>\n\n<p><strong>3.case) Separate project's codes //Brings me do same things for all region(s)</strong></p>\n\n<p><strong>4.case) Ignore it . // I use same columns for different purposes for two region and it doesn't smell good.</strong></p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["java","hibernate","spring","jpa","jboss"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1861,"score":0,"question_id":6853112,"title":"Spring 3..0.5 + hierbnate 3.6.6.final + jboss as 7 Database access","body":"<p>I'm upgrading our projects from spring 2.5.6, hibernate 3.3.2, jboss 4.2 to <strong>Spring 3..0.5 + hierbnate 3.6.6.final + jboss as 7</strong>.</p>\n\n<p>Lots of issues there and I decided to write a simple project and delopy it on jboss as7(with Spring 3..0.5 + hierbnate 3.6.6.final) at the begining. The project is very simple: A DAO class will access the MYSQL database. But the application fails when it's entityManager try to access the DB, throwing \"threw exception: org.hibernate.MappingException: Unknown entity\".</p>\n\n<p>Below is my project:</p>\n\n<p>My web controller class:</p>\n\n<pre><code>package com.yan.testing.web.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport com.yan.testing.jpa.dao.IYanDao;\nimport com.yan.testing.jpa.entity.Yan;\n\n@Controller\npublic class WebController {\n\n    @Autowired\n    IYanDao yanDao;\n\n    @RequestMapping(\"sayHello.do\")\n    public String SayHello(){\n        Yan yan = yanDao.findById(1L);\n        System.out.println(yan.getName());\n        return \"sayHello\";\n    }\n}\n</code></pre>\n\n<p>My DAO inferface:</p>\n\n<pre><code>package com.yan.testing.jpa.dao;\n\nimport com.yan.testing.jpa.entity.Yan;\n\npublic interface IYanDao {\n    Yan findById(Long id);\n}\n</code></pre>\n\n<p>And In my DAO class :</p>\n\n<pre><code>package com.yan.testing.jpa.dao.impl;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\nimport org.springframework.stereotype.Repository;\nimport com.yan.testing.jpa.dao.IYanDao;\nimport com.yan.testing.jpa.entity.Yan;\n\n@Repository(value=\"yanDao\")\npublic class YanDao implements IYanDao{\n\n    private EntityManager entityManager;\n    @PersistenceContext \n    public void setEntityManager(EntityManager entityManager) {\n        this.entityManager = entityManager;\n    }\n\n    public Yan findById(Long id){\n        return entityManager.find(Yan.class, id);\n    }\n}\n</code></pre>\n\n<p><strong>Here comes the problem:\n    <code>\"entityManager.find(Yan.class, id);\"</code> throw exception:</strong></p>\n\n<pre><code>Servlet.service() for servlet spring threw exception: org.hibernate.MappingException: Unknown entity: com.yan.testing.jpa.entity.Yan\n</code></pre>\n\n<p>It seems like hibernate don't recognize my entity. As my entity is generated using Jboss tools, I can't find any error in my entity class. </p>\n\n<p>Below is my entity class:</p>\n\n<pre><code>package com.yan.testing.jpa.entity;\n\n// default package\n// Generated Jul 27, 2011 4:15:52 PM by Hibernate Tools 3.4.0.CR1\n\nimport static javax.persistence.GenerationType.IDENTITY;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n/**\n * Yan generated by hbm2java\n */\n\n@Entity\n@Table(name = \"yan\", catalog = \"fuhu_app_submission\")\npublic class Yan implements java.io.Serializable {\n\n    private static final long serialVersionUID = -6812001362936479032L;\n    private Integer objId;\n    private String name;\n\n    public Yan() {\n    }\n\n    public Yan(String name) {\n        this.name = name;\n    }\n\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    @Column(name = \"obj_id\", unique = true, nullable = false)\n    public Integer getObjId() {\n        return this.objId;\n    }\n\n    public void setObjId(Integer objId) {\n        this.objId = objId;\n    }\n\n    @Column(name = \"name\", length = 45)\n    public String getName() {\n        return this.name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n\n<p>Below is my application and jboss as 7 configuration:</p>\n\n<p>applicationContext.xml(which basically define a entityManagerFactory bean)</p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.yan.testing\"/&gt; \n&lt;context:annotation-config/&gt;\n\n&lt;bean id=\"dataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;property name=\"jndiName\" value=\"java:jboss/datasources/MySqlDS\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"persistenceXmlLocation\" value=\"classpath*:META-INF/jpa-persistence.xml\"/&gt;   \n    &lt;property name=\"jpaVendorAdapter\"&gt;\n            &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n                &lt;property name=\"showSql\" value=\"false\" /&gt;\n            &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;    \n&lt;tx:annotation-driven /&gt;\n</code></pre>\n\n<p>jpa-persistence.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;persistence version=\"1.0\"\n    xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\"&gt;\n\n    &lt;persistence-unit name=\"app_sub_jpa\"&gt;\n        &lt;description&gt;Hibernate for JPA&lt;/description&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.MySQLDialect\" /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>My jboss confi standalone.xml:</p>\n\n<pre><code>&lt;subsystem xmlns=\"urn:jboss:domain:datasources:1.0\"&gt;\n            &lt;datasources&gt;\n                &lt;datasource jndi-name=\"java:jboss/datasources/MySqlDS\" pool-name=\"MySqlDS\" enabled=\"true\" jta=\"true\" use-java-context=\"true\" use-ccm=\"true\"&gt;\n                    &lt;connection-url&gt;\n                        jdbc:mysql://127.0.0.1:3306/my_schema\n                    &lt;/connection-url&gt;\n                    &lt;driver&gt;\n                        com.mysql\n                    &lt;/driver&gt;\n                    &lt;transaction-isolation&gt;\n                        TRANSACTION_READ_COMMITTED\n                    &lt;/transaction-isolation&gt;\n                    &lt;security&gt;\n                        &lt;user-name&gt;\n                            root\n                        &lt;/user-name&gt;\n                        &lt;password&gt;\n                            root\n                        &lt;/password&gt;\n                    &lt;/security&gt;\n                    &lt;statement&gt;\n                        &lt;prepared-statement-cache-size&gt;\n                            32\n                        &lt;/prepared-statement-cache-size&gt;\n                    &lt;/statement&gt;\n                &lt;/datasource&gt;\n                &lt;drivers&gt;\n                    &lt;driver name=\"com.mysql\" module=\"com.mysql\"&gt;\n                        &lt;xa-datasource-class&gt;\n                            com.mysql.jdbc.jdbc2.optional.MysqlXADataSource\n                        &lt;/xa-datasource-class&gt;\n                    &lt;/driver&gt;\n                &lt;/drivers&gt;\n            &lt;/datasources&gt;\n        &lt;/subsystem&gt;\n</code></pre>\n\n<p>Any help or hints are appreciated. </p>\n\n<p>Thank you</p>\n\n<p>Andrew</p>\n"},{"tags":["spring","validation","spring-mvc","bean-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13003940,"title":"Complex Spring form validation using javax.validation","body":"<p>What I'm trying to accomplish is:</p>\n\n<p>Have a bean backed form being validated, for example using the following class</p>\n\n<pre><code>public class PersonForm {\n\n    @NotNull\n    String name;\n\n    List&lt;Long&gt; interests;\n\n    // This attribute is not filled out in the form\n    List&lt;Interest&gt; realInterests;\n}\n</code></pre>\n\n<p>So, \"name\" and \"interests\" come from the web form. \"name\" has some constrains (NotNull) and using @Valid does what it is supposed to do.</p>\n\n<p>\"interests\" is a list of Interest ids.</p>\n\n<p>After doing the initial validation of the \"name\" I fill out the List collection.</p>\n\n<pre><code>@CustomValidInterest\npublic class Interest {\n\n    Long id;\n    String name;\n    boolean available;\n\n}\n</code></pre>\n\n<p>I want to validate this structure afterwards. \"@CustomValidInterest\" is a custom validation annotation. \nI can do a 2-stage validation using do this with Validation Groups.</p>\n\n<p>The problem is, if some \"Interest\" object is not valid I want to associate the error message with the \"interests\" field (List&lt; Long > type), so when I retrieve the form errors the error is associated with the right field.</p>\n\n<p>Maybe I'm trying to use validation the wrong way. I was trying to avoid having a bunch of programmatic comparisons which filled errors manually.</p>\n"},{"tags":["spring","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12966339,"title":"What am I doing to get this wrong?","body":"<p>I am trying to create a test for my controller. Here's what I have similar. Just name changes. I am using Mockito and Spring MVC. The test configuration files have the autowired beans in them mocked via mock factory. I get a null pointer...</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations={\n        ...\n })\npublic class MyReportControllerTest {\n\nprivate MockHttpServletRequest request;\nprivate MockHttpServletResponse response;\nprivate MockHttpSession session;\nprivate HandlerAdapter handlerAdapter;\n\n@Autowired\nprivate ApplicationContext applicationContext;\n\n@Autowired\nprivate MyService myService;\n\n@Autowired\nprivate RequestMappingHandlerMapping rmhm;\n\n@Before\npublic void setUp() throws Exception {\n    request = new MockHttpServletRequest();\n    response = new MockHttpServletResponse();\n    session = new MockHttpSession();\n    handlerAdapter = applicationContext\n            .getBean(RequestMappingHandlerAdapter.class);\n\n    request.setSession(session);\n    request.addHeader(\"authToken\", \"aa\");\n\n    Mockito.when(\n            myService.getMyInfo(YEAR))\n            .thenReturn(getMyInfoList());\n}\n@Test\npublic void testGetMyInfo(){\n    request.setRequestURI(\"/getMyInfo/\" + 2011);\n    request.setMethod(\"GET\");\n\n    try {\n        if( handlerAdapter == null){\n            System.out.println(\"Handler Adapter is null!\");\n        }\n        if( request == null){\n            System.out.println(\"Request is null!\");\n        }\n        if( response == null){\n            System.out.println(\"Response is null!\");\n        }\n        if( rmhm.getHandler(request) == null){\n            System.out.println(\"rmhm.getHandler(request) is null!\");\n        }\n        //the above returns null\n        System.out.println(\"RMHM: \" + rmhm.toString());\n        System.out.println(\"RMHM Default Handler: \" + rmhm.getDefaultHandler());\n        handlerAdapter.handle(request, response, \n                rmhm.getHandler(request)\n                .getHandler());//null pointer exception here &lt;---\n\n        ...\n\n\n    } catch (Exception e) {\n        e.printStackTrace();\n        fail(\"getMyReport failed. Exception\");\n    }\n\n}\n\npublic List&lt;MyInfo&gt; getMyInfoList(){...}\n</code></pre>\n\n<p>I have done a thorough debugging and found that the Handler remains null for my mock request. What am I missing that it doesn't get turned into a handler, or even goes to the default handler?</p>\n"},{"tags":["spring","hibernate","java-ee","spring-data","spring-data-jpa"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":13005864,"title":"Spring Data JPA select Distinct values with ability to use Pageable","body":"<p>I use Spring Data JPA in project. I have next Entity Bean \"TABLE\". I have created own repository </p>\n\n<pre><code>TableRepository extends JpaRepository&lt;Table, Long&gt;, JpaSpecificationExecutor&lt;TABLE&gt;. \n</code></pre>\n\n<p>Also I've created Specification to select filtered data. I have bean with items that should be selected and group them in one list of <em>.in()</em> predicates (something like \"<em>SELECT * FROM WHERE ID in(...) AND VALUE in(...) AND VALUE2 in(...) ...</em>\")</p>\n\n<pre><code>public static Specification&lt;Table&gt; filteredListOfValues(final FilterRequestsParametersBean filterRequestsParametersBean) {\n        return new Specification&lt;Table&gt;() {\n\n            public Predicate toPredicate(Root&lt;Table&gt; root, CriteriaQuery&lt;?&gt; criteriaQuery, CriteriaBuilder criteriaBuilder) {\n                List&lt;Predicate&gt; listOfPredicates = createListOfPredicates(root, filterRequestsParametersBean);\n                return criteriaBuilder.and(listOfPredicates.toArray(new Predicate[listOfPredicates.size()]));\n            }\n        };\n    }\n</code></pre>\n\n<p>After that I <em>findAll()</em> items with <em>TableRepository</em> and <em>Pageable</em> parameter.</p>\n\n<pre><code>this.getTableRepository().findAll(where(filteredListOfValues(filterRequestsParametersBean)), pageable);\n</code></pre>\n\n<p><em>Table</em> view:</p>\n\n<pre><code>id, value, etc..\n 1,   1,   ...\n 2,   1,   ...\n 3,   2,   ...\n 4,   2,   ...\n 5,   3,   ...\n 6,   5,   ...\n</code></pre>\n\n<p>And question. How can I select all values that are distinct from field <em>VALUE</em> in <em>TABLE</em> with using Pageable.</p>\n\n<hr>\n\n<p>Of course I can use HashMap, but I will not have facilities of Pageable from Spring Data JPA. I need sorting and paging. </p>\n\n<p>I also can use Specification for one field Value, like:</p>\n\n<pre><code>    public static Specification&lt;Long&gt; filteredListOfValues(final FilterRequestsParametersBean filterRequestsParametersBean) {\n            return new Specification&lt;Long&gt;() {\n\n                public Predicate toPredicate(Root&lt;Long&gt; root, CriteriaQuery&lt;?&gt; criteriaQuery, CriteriaBuilder criteriaBuilder) {\n\n....//somethind like that\ncriteriaQuery.select(root.&lt;Long&gt; get(\"value\")).distinct(true);\n....\nList&lt;Predicate&gt; listOfPredicates = createListOfPredicates(root, filterRequestsParametersBean);\n                    return criteriaBuilder.and(listOfPredicates.toArray(new Predicate[listOfPredicates.size()]));\n                }\n            };\n        }\n</code></pre>\n\n<p>but in that case, method findAll() from repository TableRepository only can accept specification like: <code>JpaSpecificationExecutor&lt;Table&gt;</code>, not <code>JpaSpecificationExecutor&lt;Long&gt;</code></p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","mvc","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13005078,"title":"java.util.MissingResourceException: Can't find bundle for base name views, locale en","body":"<p>I have a file called <code>views.properties</code> inside my <code>src/main/webapp</code> folder. and I have the following line inside my <code>court-servlet.xml</code> file. The <code>court-servlet.xml</code> is located in <code>src/main/webapp/WEB-INF</code> folder.</p>\n\n<pre><code>&lt;bean id=\"resourceBundleResolver\"\n    class=\"org.springframework.web.servlet.view.ResourceBundleViewResolver\"&gt;\n    &lt;property name=\"basename\" value=\"views\" /&gt;\n    &lt;property name=\"order\" value=\"#{contentNegotiatingResolver.order+1}\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>However, I keep getting exception whenever I launch the app. It keeps throwing exception</p>\n\n<pre><code>java.util.MissingResourceException: Can't find bundle for base name views, locale en\njava.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1427)\njava.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1250)\njava.util.ResourceBundle.getBundle(ResourceBundle.java:952)\norg.springframework.web.servlet.view.ResourceBundleViewResolver.getBundle(ResourceBundleViewResolver.java:271)\norg.springframework.web.servlet.view.ResourceBundleViewResolver.initFactory(ResourceBundleViewResolver.java:225)\norg.springframework.web.servlet.view.ResourceBundleViewResolver.loadView(ResourceBundleViewResolver.java:194)\norg.springframework.web.servlet.view.AbstractCachingViewResolver.createView(AbstractCachingViewResolver.java:158)\norg.springframework.web.servlet.view.AbstractCachingViewResolver.resolveViewName(AbstractCachingViewResolver.java:77)\norg.springframework.web.servlet.view.ContentNegotiatingViewResolver.resolveViewName(ContentNegotiatingViewResolver.java:357)\norg.springframework.web.servlet.DispatcherServlet.resolveViewName(DispatcherServlet.java:1091)\norg.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1040)\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:798)\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)\norg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:621)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n</code></pre>\n\n<p>Can someone please help me solving this issue? I tried some solutions posted here before, but none of them works.</p>\n\n<p>Thanks!</p>\n"},{"tags":["spring"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":23,"score":0,"question_id":13005257,"title":"Not able to access a File Resource using Spring 3.x","body":"<p>I have been trying to open this .json file for a while and it giving me a null pointer exception. Please let me know if I am doing something incorrect.</p>\n\n<pre><code>/**\n * Handles requests for the application UI.\n */\n@Controller\n@RequestMapping(\"/UIController\")\npublic class UIController {\n\nprivate static final Logger logger = LoggerFactory.getLogger(UIController.class);\nprivate @Autowired ServletContext servletContext;\n\n@RequestMapping(value = \"/ClientTree\", method = RequestMethod.GET)\npublic @ResponseBody String clientTree() throws IOException {\n    InputStream inputStream = null;\n    try {\n        inputStream = servletContext.getResourceAsStream(\"C:\\\\ClientJson.json\");\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n        return bufferedReader.readLine();\n    } finally {\n        if (inputStream != null) {\n           inputStream.close();\n        }\n    }\n}\n}\n</code></pre>\n\n<p>I am trying to open and read the file contents, sending those contents to the UI to populate a tree jQuery widget.</p>\n"},{"tags":["java","spring","tomcat","jpa","eclipselink"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":4616,"score":4,"question_id":6417863,"title":"How do I configure dynamic weaving using EclipseLink & Spring?","body":"<p>How do I configure dynamic weaving using EclipseLink &amp; Spring?  Right now I'm trying to get this working with a Junit test, but I'll later have to have it work with Tomcat (my department has been standardized on it for something like 10 years).</p>\n\n<p>I'm running into two main problems:</p>\n\n<p><strong>1. Spring wants a load time weaver:</strong></p>\n\n<p>Exception:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:181)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\n&lt;snip&gt;\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.weaving.AspectJWeavingEnabler#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'loadTimeWeaver': Initialization of bean failed; nested exception is java.lang.IllegalStateException: ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)\n&lt;snip&gt;\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'loadTimeWeaver': Initialization of bean failed; nested exception is java.lang.IllegalStateException: ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)\n&lt;snip&gt;\nCaused by: java.lang.IllegalStateException: ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar\n    at org.springframework.context.weaving.DefaultContextLoadTimeWeaver.setBeanClassLoader(DefaultContextLoadTimeWeaver.java:91)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1437)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1408)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    ... 44 more\n</code></pre>\n\n<p>I can fix this by configuring the Spring Instrumentation:</p>\n\n<pre><code>JVM parameter:\n-javaagent:/path/to/org.springframework.instrument-3.1.0.M2.jar\n</code></pre>\n\n<p><strong>2. Eclipselink is not satisfied with the Spring Instrumentation:</strong></p>\n\n<p>Error:</p>\n\n<pre><code>(similar error messages repeated many times)\n\n[EL Severe]: 2011-06-20 16:12:57.951--ServerSession(979781372)--Local Exception Stack: \nException [EclipseLink-0] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.IntegrityException\nDescriptor Exceptions: \n---------------------------------------------------------\n\nException [EclipseLink-60] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DescriptorException\nException Description: The method [_persistence_set_shellType_vh] or [_persistence_get_shellType_vh] is not defined in the object [ps.entity.JudicialArtifactFamily].\nInternal Exception: java.lang.NoSuchMethodException: ps.entity.JudicialArtifactFamily._persistence_get_shellType_vh()\nMapping: org.eclipse.persistence.mappings.ManyToOneMapping[shellType]\nDescriptor: RelationalDescriptor(ps.entity.JudicialArtifactFamily --&gt; [DatabaseTable(JUDICIAL_ARTIFACT_FAMILY)])\n\nException [EclipseLink-218] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DescriptorException\nException Description: A NullPointerException would have occurred accessing a non-existent weaved _vh_ method [_persistence_get_shellType_vh].  The class was not weaved properly - for EE deployments, check the module order in the application.xml deployment descriptor and verify that the module containing the persistence unit is ahead of any other module that uses it.\n</code></pre>\n\n<p>I <em>tried</em> to fix this by using the EclipseLink weaver:</p>\n\n<pre><code>-javaagent:/dev/tools/javaagents/eclipselink.jar\n</code></pre>\n\n<p>But then I get the same exception from problem #1.</p>\n\n<p><strong>Library versions</strong></p>\n\n<p>I am using:</p>\n\n<ul>\n<li>Java 1.6.0_24</li>\n<li>EclipseLink 2.2.0.v20110202-r8913</li>\n<li>Spring 3.1.0 M2</li>\n</ul>\n\n<p><strong>Configuration files</strong></p>\n\n<p>Here is my persistence.xml:</p>\n\n<pre><code>&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             version=\"2.0\"\n             xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n    &lt;persistence-unit name=\"eclipseLinkHashPU\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n        &lt;class&gt;ps.entity.Artifact&lt;/class&gt;\n        &lt;class&gt;ps.entity.JudicialArtifactFamily&lt;/class&gt;\n        &lt;class&gt;ps.entity.ShellType&lt;/class&gt;\n        &lt;class&gt;ps.entity.SourceArtifact&lt;/class&gt;\n        &lt;class&gt;ps.entity.Health&lt;/class&gt;\n        &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\n        &lt;properties&gt;    \n            &lt;property name=\"eclipselink.ddl-generation\" value=\"drop-and-create-tables\"/&gt;\n            &lt;property name=\"eclipselink.ddl-generation.output-mode\" value=\"database\"/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>Here is my application.xml:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:jaxrs=\"http://cxf.apache.org/schema/jaxrs\" xmlns:jee=\"http://www.springframework.org/schema/jee\" xmlns:util=\"http://www.springframework.org/schema/util\" xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n           http://www.springframework.org/schema/tx \n           http://www.springframework.org/schema/tx/spring-tx-2.0.xsd\n           http://www.springframework.org/schema/context\n           http://www.springframework.org/schema/context/spring-context-2.5.xsd\n           http://cxf.apache.org/schema/jaxrs\n           http://cxf.apache.org/schema/jaxrs.xsd\n           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd          \n           http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.5.xsd\n           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"ps\"&gt;\n    &lt;/context:component-scan&gt;\n\n    &lt;context:load-time-weaver/&gt;\n\n    &lt;alias alias=\"entityManagerFactory\" name=\"eclipseLinkEntityManagerFactory\"/&gt;\n\n    &lt;bean id=\"eclipseLinkEntityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"persistenceXmlLocation\" value=\"classpath:eclipselink-persistence.xml\" /&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"eclipseLinkHashPU\" /&gt;\n        &lt;property name=\"jpaPropertyMap\"&gt;\n            &lt;map&gt;\n                &lt;entry key=\"eclipselink.logging.level\" value=\"Severe\"/&gt;\n                &lt;entry key=\"eclipselink.target-database\" value=\"org.eclipse.persistence.platform.database.oracle.OraclePlatform\"/&gt;\n                &lt;entry key=\"javax.persistence.nonJtaDataSource\" value-ref=\"hash1DataSource\"/&gt;\n                &lt;!-- it's not good that I'm turning weaving off --&gt;\n                &lt;!-- &lt;entry key=\"eclipselink.weaving\" value=\"false\"/&gt; --&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n        &lt;property name=\"jpaVendorAdapter\"&gt;\n            &lt;bean class=\"org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter\"&gt;\n                &lt;property name=\"databasePlatform\" value=\"oracle\" /&gt;\n                &lt;property name=\"database\" value=\"ORACLE\" /&gt;\n                &lt;property name=\"generateDdl\" value=\"true\" /&gt;\n                &lt;property name=\"showSql\" value=\"true\" /&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- datasources, etc --&gt;\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["eclipse","spring","google-app-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":12809170,"title":"ASM library: Version incompatibility between GAE and Spring","body":"<p>I'm currently working on a project based on Spring 3.1.2 which needs to run over GAE.</p>\n\n<p>After researching the logs, I think I know why I'm getting a 500 Internal Server Error whenever I need to interact with the App. The problem I'm facing is related with ASM (http://asm.ow2.org/).</p>\n\n<p>It seems like GAE relies on ASM 4.0, while the project runs fine locally if I use ASM 3.1.</p>\n\n<p>However, I found impossible to make it work when ASM 4.0 :(</p>\n\n<p>I'm completely new to Google App Engine, so ... any tip to solve this issue is welcome! (I've already lost the whole morning finding what the problem was and trying too many different ways to solve it ... but no way).</p>\n\n<p>Thank you very much in advance for your suggestions ;)</p>\n"},{"tags":["java","spring","spring-mvc","sts-springsourcetoolsuite","springsource-tc-server"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2805,"score":1,"question_id":8848724,"title":"No mapping found for HTTP request with URI [/myproject/] in DispatcherServlet with name 'appServlet'","body":"<p>I'm absolutely newbie with Java and Spring and I want to learn from example.</p>\n\n<p>I'm using an out-of-the-box configuration / installation</p>\n\n<ul>\n<li>Mac OSX</li>\n<li>Springsource Tool Suite as IDE</li>\n<li>Spring 2.8.1.RELEASE</li>\n<li>vfabric-tc-server-developer-2.6.1.RELEASE</li>\n</ul>\n\n<p>I've tried to generate a new project based on \"Spring Template Project\". Then I've chosen the \"Spring MVC Project\". The sample project is generated. After that, without modifying anything,  I've tried to execute de \"home.jsp\" page via \"Run As\". The Web Server starts and finally I received the error in the console Tab.</p>\n\n<blockquote>\n  <p>No mapping found for HTTP request with URI [/myproject/] in\n  DispatcherServlet with name 'appServlet'</p>\n</blockquote>\n\n<p>And this other output in these web pages:</p>\n\n<ul>\n<li><a href=\"http://localhost:8080/myproject/WEB-INF/views/home.jsp\" rel=\"nofollow\">http://localhost:8080/myproject/WEB-INF/views/home.jsp</a></li>\n<li><a href=\"http://localhost:8080/myproject\" rel=\"nofollow\">http://localhost:8080/myproject</a></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/UWHTr.png\" alt=\"enter image description here\"></p>\n\n<p>Here you can see an image on how my project is structured (auto generated for STS):</p>\n\n<p><img src=\"http://i.stack.imgur.com/HnvjD.png\" alt=\"enter image description here\"></p>\n\n<p>What is wrong?</p>\n\n<p>Here you can see the content of the <strong>web.xml</strong> file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"2.5\" xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;\n\n    &lt;!-- The definition of the Root Spring Container shared by all Servlets and Filters --&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/spring/root-context.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;!-- Creates the Spring Container shared by all Servlets and Filters --&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;!-- Processes application requests --&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;/WEB-INF/spring/appServlet/servlet-context.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>The <strong>root-context.xml</strong> file has this content.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\"&gt;\n\n    &lt;!-- Root Context: defines shared resources visible to all other web components --&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>And finally the <strong>servlet-context.xml</strong> has this content.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/mvc\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:beans=\"http://www.springframework.org/schema/beans\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n    &lt;!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure --&gt;\n\n    &lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n    &lt;annotation-driven /&gt;\n\n    &lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory --&gt;\n    &lt;resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n    &lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\n    &lt;beans:bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n        &lt;beans:property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n        &lt;beans:property name=\"suffix\" value=\".jsp\" /&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;context:component-scan base-package=\"com.mycompany.myapp\" /&gt;\n\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>Does anybody have an idea to solve it?</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13003929,"title":"Spring MVC checkbox issue","body":"<p>I have an array of checkbox which are rendered on the JSP. Checkbox works just fine but when i post the JSP on controller i am not getting just those checkbox which are clicked but all along with bind path variable which is always false, while it should be true if checked. Due to this i am not able to figure out which box were checked and which were unchecked on the page. Here is my JSP -</p>\n\n<pre><code>&lt;c:forEach var=\"sizeVo\" items=\"${menuVO.sizeList}\" varStatus=\"item\"&gt;\n                            &lt;tr class=\"${item.index % 2 == 0 ? 'odd gradeX' : 'even gradeC'}\"&gt;          \n                            &lt;td&gt;&lt;form:hidden path=\"sizeList[${item.index}].sizeId\" id=\"sizeId\" value=\"${sizeVo.sizeId}\"/&gt;\n                                &lt;form:checkbox path=\"sizeList[${item.index}].isChecked\" id=\"sizeSelect\" value=\"on\"&gt;&lt;/form:checkbox&gt; \n                            &lt;/td&gt;\n                            &lt;td&gt;\n                                &lt;c:out value=\"${sizeVo.sizeName}\"/&gt;\n                                &lt;form:hidden path=\"sizeList[${item.index}].sizeName\" id=\"sizeName\" value=\"${sizeVo.sizeName}\"/&gt;\n                            &lt;/td&gt;\n                            &lt;td&gt;\n                                &lt;c:out value=\"${sizeVo.sizeDesc}\"/&gt;                                                             \n                                &lt;form:hidden path=\"sizeList[${item.index}].sizeDesc\" id=\"sizeDesc\" value=\"${sizeVo.sizeDesc}\"/&gt;\n                            &lt;/td&gt;\n                            &lt;td&gt;&lt;form:input path=\"sizeList[${item.index}].sizePrice\" id=\"sizePrice\" size=\"20\" class=\"validate[required] small\"/&gt;&lt;/td&gt;                                   \n                            &lt;/tr&gt;\n                            &lt;/c:forEach&gt;\n</code></pre>\n\n<p>Page model attribute is mainVO which contains sizeVO list. SizeVo has properties like id, name, price ect. In controller if i print i am getting following </p>\n\n<pre><code>SizeVO Object {Id: 3, Name: Big, Description: desc - 6, Price: 50, isChecked: false}, SizeVO Object {Id: 4, Name: Half , Description: desc - 2, Price: 10, isChecked: false}\n</code></pre>\n"},{"tags":["spring","jsf","tomcat","jsr330"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12999355,"title":"How to remove NullPointerException from JSR 330 Spring application","body":"<p>I am implementing Spring+JSF application following the guidlines of <a href=\"http://www.mkyong.com/jsf2/jsf-2-0-spring-integration-example/\" rel=\"nofollow\">http://www.mkyong.com/jsf2/jsf-2-0-spring-integration-example/</a> but I am using the latest Spring version (i.e. 3.x, it already contains the JSR 330 implementation, according to the documentation, so this should not be an issue) and my own classes, that is the difference from the mentioned example.</p>\n\n<p>I am stuck with <code>NullPointerException</code> that indicates that the bean (that acts as JSF managed) bean has not received injection of the instance of Spring bean. All the beans use JSR 330 annotations at appropriate places (<code>@Named</code>, <code>@Inject</code>) and the interfaces of the beans and the variables (under <code>@Inject</code> annotation) follow the usual naming patterns...</p>\n\n<p>So - how to debug this situation. E.g. is there way to see all the beans that sit into the Spring application context. E.g. so we can determine that the Spring context is not initialized appropriately. Maybe there are other methods how to see what is happening in app (debug injection)?</p>\n"},{"tags":["spring","spring-webflow","spring-webflow-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12848387,"title":"Spring Webflow: how to force a flow to start again?","body":"<p>I am new to SWF and I unexpectedly inherited the maintenance of a SWF application.</p>\n\n<p>The users have a horizontal menu at the top of the screen, in which 5 options appears. When one of them is clicked, a portlet is loaded in the screen.</p>\n\n<p>Two days ago, I received a task: whenever a user clicks in one of these options, the portlet must disregard its previous state and start again.</p>\n\n<p>Example: one of the portlets is called 'SEARCH' and the other 'REPORTS'. Today, if a user clicks 'SEARCH', the appl shows a little form and a 'GO' button. After clicking 'GO', the appl shows a list of results, each one with an edit button. After clicking to edit one of them, the appl shows the details of the result selected. So far, so good. </p>\n\n<p>Proceeding the example, suppose the user now clicks in the 'REPORTS' option in the menu. The appl will show the report portlet, with its own contents. Again, so far, so good.</p>\n\n<p>However, if the user now clicks again in 'SEARCH', the portlet will display its last state, that is, the edition of a previous searched item.</p>\n\n<p>I was asked to alter this behavior, so each time a user clicks in 'SEARCH', it will open empty, that is, the portlet's webflow will start from the beginning again. </p>\n\n<p>How can I do this? Could someone please help me?</p>\n\n<p>I searched the documentation of SMF and also studied the spring-webflow-config-2.0.xsd file, looking for some specific configuration for this case, but to no avail.</p>\n\n<p>Thanks, </p>\n\n<p>FQL</p>\n"},{"tags":["spring","weblogic","timertask"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13002206,"title":"During what phase of WebLogic server startup does a Spring timer task run?","body":"<p>I have a singleton Java class which acts as a simple cache and is deployed as part of a war on WebLogic. The data for the cache is not initially populated in the constructor of my cache class, instead, I rely on a Spring timer thread calling the loadData() method to get the initial data from a database. I also rely on the timer running every x minutes to check for new data.</p>\n\n<p>If I was using a WebLogic startup class instead of Spring I could select the Run Before Application Deployments option in the Administration Console (or set the StartupClassMBean's LoadBeforeAppActivation attribute to \"true\") to perform startup tasks after JMS and JDBC services are available, but before applications and modules have been activated.</p>\n\n<p>How can I achieve this same behaviour using a Spring Timer?</p>\n\n<p>Thanks for any help you can provide!</p>\n\n<p>Mandy</p>\n"},{"tags":["javascript","jquery","spring","jsp","spring-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12999489,"title":"JSP not displaying correctly","body":"<p>I have a JSP form that is retrieved using a RequestMapping during GET.\nJSP page structure for the page looks like this:</p>\n\n<pre><code>&lt;div id=\"myDiv\"&gt;\n     &lt;script&gt;\n        function update() {\n           update_fn(formId, ... more parameters);  // this is a function defined in a .js file, this submits the form\n        }\n     &lt;/script&gt;\n\n     &lt;form:form ... &gt;\n        &lt;button id=\"myButtonUniqueIDWithCurrentTime\" onclick=\"update()\"&gt;OK&lt;/button&gt;\n     &lt;/form:form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Now when the button is clicked, udpate_fn() is called which sends a POST request using $.ajax. The RequestMapping contains the form annotated with <code>@ModelAttribute</code> and <code>@Valid</code>.</p>\n\n<p>If BindResult is error free then I push the data to the database otherwise I send back the same form to the client. This is what it looks like.</p>\n\n<pre><code>@RequestMapping(value = \"/formSubmit\", method = RequestMethod.POST)\npublic ModelAndView addData(\n  @ModelAttribute(\"editForm\") @Valid BackingForm form,\n  BindingResult result, Model model) {\n\nboolean success = false;\nString message = \"\";\nMap&lt;String, Object&gt; m = new HashMap&lt;String, Object&gt;();\nif (form == null) {\n  form = new BackingForm();\n} else {\n  if (result.hasErrors()) {\n    success = false;\n    message = \"Please fix the errrors noted above\";\n  } else {\n    try {\n      MyEntity entity = form.getWrappedEntity();\n      entityRepository.addData(entity);\n      form = new BackingForm();    // why is empty form not visible in JSP\n      success = true;\n      message = \"Data Successfully Added\";\n    } catch (EntityExistsException ex) {\n      ex.printStackTrace();\n      success = false;\n      message = \"Entity Already exists.\";\n    } catch (Exception ex) {\n      ex.printStackTrace();\n      success = false;\n      message = \"Internal Error. Please try again or report a Problem.\";\n    }\n  }\n}\n\nm.put(\"editForm\", form);\nm.put(\"success\", success);\nm.put(\"message\", message);\n\nModelAndView mv = new ModelAndView(\"editForm\");\nmv.addObject(\"model\", m);\n\nreturn mv;\n</code></pre>\n\n<p>}</p>\n\n<p>This is the Javascript for the post request.</p>\n\n<pre><code>function updateGeneric(form, resultDivId, url) {\n   var data = $(\"#\" + form.getAttribute(\"id\")).serialize();\n   $.ajax({\n    type : \"POST\",\n    url : url,\n    data : data,\n    success : function(response) {\n      console.log(response);\n      $(\"#\" + resultDivId).replaceWith(response);\n    }\n   });\n}\n</code></pre>\n\n<p>As shown in the code above When the data is successfully added I do the following:</p>\n\n<pre><code>      form = new BackingForm();    // why is empty form not visible in JSP\n      success = true;\n      message = \"Data Successfully Added\";\n</code></pre>\n\n<p>Now when I putting this form in the ModelAndView and then replacing the rendered view with the ModelAndView returned'editForm.jsp', why is the correct form not showing up in the page?\nI am getting the correct values for message, success in the jsp page.\nBut the form contains the values from the old submission even when it is set to a new form.</p>\n\n<p>Note I am not redirecting after the POST. I am just replacing an HTML fragment using jquery.</p>\n\n<p>Can you point out what is wrong with my code and what could be a neat way to do the same thing?</p>\n\n<p>Thanks in Advance!</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12996971,"title":"Spring security remember me issue","body":"<p>I'm using spring security in my app. Now I'm trying to make remember me functionality work correctly. Here is my spring-security.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/security\"\n             xmlns:beans=\"http://www.springframework.org/schema/beans\"\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xmlns:context=\"http://www.springframework.org/schema/context\"\n             xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n             http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n             http://www.springframework.org/schema/context\n                           http://www.springframework.org/schema/context/spring-context-3.1.xsd\n                        http://www.springframework.org/schema/security\n                        http://www.springframework.org/schema/security/spring-security-3.1.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"core\"/&gt;\n\n    &lt;http auto-config=\"false\" use-expressions=\"true\"&gt;\n        &lt;intercept-url pattern=\"/views/**\" access=\"permitAll\"/&gt;\n        &lt;form-login authentication-failure-handler-ref=\"loginFailure\"\n                    authentication-success-handler-ref=\"loginSuccess\"/&gt;\n        &lt;remember-me key=\"key\"/&gt;\n        &lt;logout\n                invalidate-session=\"true\"\n                delete-cookies=\"true\"/&gt;\n\n    &lt;/http&gt;\n\n\n    &lt;authentication-manager&gt;\n        &lt;authentication-provider&gt;\n            &lt;password-encoder hash=\"md5\"/&gt;\n            &lt;jdbc-user-service data-source-ref=\"ds\"\n                               users-by-username-query=\"SELECT email, password, enabled FROM tuser WHERE email=?\"\n                               authorities-by-username-query=\"SELECT tuser, role_id FROM user_role WHERE tuser=?\"/&gt;\n        &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n\n    &lt;global-method-security pre-post-annotations=\"enabled\" secured-annotations=\"enabled\" /&gt;\n\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>and here is my app code.\njsp:</p>\n\n<pre><code>&lt;form:form method=\"POST\"&gt;\n\n        &lt;table&gt;\n            &lt;tr&gt;\n                &lt;td&gt;User:&lt;/td&gt;\n                &lt;td&gt;\n                    &lt;input type=\"text\" id=\"j_username\"/&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Password:&lt;/td&gt;\n                &lt;td&gt;\n                    &lt;input type=\"password\" id=\"j_password\"/&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;input type=\"checkbox\" id=\"_spring_security_remember_me\"/&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;s:message code=\"RememberMe\"/&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td colspan='2'&gt;\n                    &lt;input id=\"loginBtn\" name=\"submit\" type=\"button\" onclick=\"ajaxLogin()\" value=\"Войти\"/&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n\n    &lt;/form:form&gt;\n</code></pre>\n\n<p>and javascript that makes ajax login:</p>\n\n<pre><code>function ajaxLogin() {\n    $(\"#errorText\").css('display', 'none');\n    $('#loginBtn').attr('disabled', 'true');\n\n    var user_name = $(\"#j_username\").val();\n    var user_pass = $(\"#j_password\").val();\n    var rememberMe = $(\"#_spring_security_remember_me\").prop(\"checked\");\n\n    $.ajax({\n        url:\"../../j_spring_security_check\",\n        data:{ j_username:user_name, j_password:user_pass, _spring_security_remember_me:rememberMe},\n        type:\"POST\",\n        beforeSend:function (xhr) {\n\n            xhr.setRequestHeader(\"login-ajax\", \"true\");\n        },\n        success:function (result) {\n\n            if (result == \"ok\") {\n                window.location.reload()\n            } else {\n                $(\"#errorText\").css('display', 'block');\n            }\n\n        },\n        error:function (XMLHttpRequest, textStatus, errorThrown) {\n            return false;\n        }\n    })\n    ;\n}\n</code></pre>\n\n<p>The problem is that spring remembers user even if I do not check the remeber me option in the login form. If I remove  from config file, it doesn't remember. Does the presence of this parameter makes spring behave like this? How can I control the remember me function?\nThanks in advance!</p>\n"},{"tags":["java","oracle","spring","function","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12315804,"title":"Oracle Sql Function return type for Spring Jdbc","body":"<p>I have an sql function (no idea about sql)</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION RATELIMIT_OWN.Get_Conns_By_Login_IP_CallerId (p_yyyymm VARCHAR2, p_login VARCHAR2, p_framed_ip VARCHAR2, p_caller_id VARCHAR2 )\n    RETURN CONNECTION_RECORD_4_IPV6_TABLE PIPELINED IS\n\nTYPE        ref0 IS REF CURSOR;\ncur0        ref0;\nv_where_clause VARCHAR2(512);\n\nout_rec     CONNECTION_RECORD_4_IPV6 := connection_record_4_ipv6(NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);\n\nBEGIN\n\n  if p_login is not NULL\n  then\n    v_where_clause := 'where login=''' || p_login || '''';\n    if p_framed_ip is not NULL\n    then\n      v_where_clause := v_where_clause || ' and framed_ip=''' || p_framed_ip || '''';\n    end if;\n    if p_caller_id is not NULL\n    then\n      v_where_clause := v_where_clause || ' and caller_id=''' || p_caller_id || '''';\n    end if;\n  else\n    v_where_clause := '';\n    if p_framed_ip is not NULL\n    then\n      v_where_clause := 'where framed_ip=''' || p_framed_ip || '''';\n      if p_caller_id is not NULL\n      then\n        v_where_clause := v_where_clause || ' and caller_id=''' || p_caller_id || '''';\n      end if;\n    else\n      if p_caller_id is not NULL\n      then\n        v_where_clause := 'where caller_id=''' || p_caller_id || '''';\n      end if;    \n    end if;\n  end if;\n\n  OPEN cur0 FOR\n    'SELECT login,acct_ts_start,acct_ts_stop,cause,duration,inb,outb,framed_ip,caller_id,called_id,nas_id,radius_type,format_ipv6_prefix(framed_ipv6_prefix),format_ipv6_prefix(delegated_ipv6_prefix) from ticket partition (TICKETS_P' || p_yyyymm || ') ' || v_where_clause;\n\n   LOOP\n   FETCH cur0 INTO out_rec.login, out_rec.acct_start, out_rec.acct_stop, out_rec.cause, out_rec.duration, out_rec.in_bytes, out_rec.out_bytes, out_rec.public_ip, out_rec.caller_id, out_rec.called_id, out_rec.nas_id, out_rec.radius_type, out_rec.framed_ipv6_prefix, out_rec.delegated_ipv6_prefix;\n   EXIT WHEN cur0%NOTFOUND;\n   PIPE ROW(out_rec);\n  END LOOP;\n  CLOSE cur0;\n\nRETURN;\nEND Get_Conns_By_Login_IP_CallerId;\n/\n</code></pre>\n\n<p>I am calling this function using Spring JDBC template</p>\n\n<pre><code> SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplateMartinique).withSchemaName(\"RATELIMIT_OWN\").withFunctionName(\"Get_Conns_By_Login_IP_CallerId\").withReturnValue()\n            .declareParameters(new SqlParameter(P_YYYYMM, Types.VARCHAR))\n            .declareParameters(new SqlParameter(P_LOGIN, Types.VARCHAR))\n            .declareParameters(new SqlParameter(P_FRAMED_IP, Types.VARCHAR))\n            .declareParameters(new SqlParameter(P_CALLER_ID, Types.VARCHAR));\n\n    SearchAccountBean resultBean = null;\n\n    SqlParameterSource paramMap = new MapSqlParameterSource().addValue(P_YYYYMM, searchAccountBean.getDate(), Types.VARCHAR).addValue(P_LOGIN, searchAccountBean.getLogin(), Types.VARCHAR)\n            .addValue(P_FRAMED_IP, searchAccountBean.getIpAddress(), Types.VARCHAR).addValue(P_CALLER_ID, searchAccountBean.getCaller(), Types.VARCHAR);\n    caller.compile();\n    Object result = caller.executeFunction(Object.class, paramMap);\n</code></pre>\n\n<p>Now it's throwing invalid column type 1111.\nI debugged and found it's returning \"return of SQL type 1111\".</p>\n\n<p>I want to know how can i retrieve the values of function result in java.</p>\n"},{"tags":["spring","spring-mvc"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":372,"score":2,"question_id":5643702,"title":"Spring Dependency Injection","body":"<p>I am learning Spring using Spring Recipes. As of now I understood that we can inject dependencies using Setter Injection or Injecting via constructor. My question is, in real world applications what method is used more often and why? I know its a subjective question but I cant think of a better place than this site to get perfect insights. Thanks again.</p>\n"},{"tags":["spring","spring-batch"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12999435,"title":"how to create a report on filtered items in spring-batch?","body":"<p>I basically want to create a report with the items that were filtered out in every step in my batch. Currently I can see how many were filtered (and skipped) with spring-batch-admin, but I want the list of items so I can take care of them manually.</p>\n\n<p>My step runs over a list of clients and brings data on them from a 3rd party source. I have username+password for every account which I use to get the data. It's possible for a client not to have credentials. I filter those before I run the processor. But a client might have wrong credentials (he miss-typed them) and then I also want to filter it but \"differently\". I don't want to skip those items because I don't want to set a limit after which my job will fail. Even if all of them were nulls or in-correct, I'd like to continue to the next stage.</p>\n\n<p>My chunk currently consist of a DB reader, DB writer and a <code>CompositeItemProcessor</code> that does:</p>\n\n<ul>\n<li>Validates that the client has credentials and filters out those who doesn't have.</li>\n<li>Runs the data enhancer (another <code>ItemProcessor</code>) that goes and fetch the data. In case this one gets an error for bad credentials it filters the item too (returns null).</li>\n</ul>\n\n<p>What I want to do is:</p>\n\n<ul>\n<li>Distinguish between the two \"types\" of filtering that happened (at the same step). Currently I see all of them sum-ed together in the <code>filterCount</code> field in spring-batch-admin.</li>\n<li>Send a report with the clients that were filtered for each case for manual handling later. I'd also like to aggregate filtered items from a couple of steps and send them together at the end.</li>\n</ul>\n\n<p>What would be the best approach? Can I know what <code>ItemProcessor</code> caused the item to be filtered? I know there are <code>ItemListeners</code> that gets notified after an item is being processed, should I use these somehow? How do I store the results (filtered items) until the end of the job?</p>\n\n<p>I tried to look for a best-practice on this one since I don't think I'm the only one trying to create a report after his job was run, but couldn't find anything useful..</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","bean-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12965307,"title":"JSR303 - Validate Only if Populated","body":"<p>I have a field in a Java Bean (kilograms) that is not mandatory, but if the user does enter it, it obviously needs to be a number.</p>\n\n<p>Is there a combination of JSR303 annotations that can enforce that rule?  I tried </p>\n\n<pre><code>@Min(value=0)\n</code></pre>\n\n<p>But that obviously disallows empty, which is allowable.</p>\n\n<p>Thanks for any help.</p>\n"},{"tags":["spring","data","null","neo4j","spring-data"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12966402,"title":"Null return using GraphRepository from Spring Data for Neo4j","body":"<p>Recently i've been playing with Spring Data for Neo4j (<code>version 2.1.0.BUILD-SNAPSHOT</code>) and i'm having an issue related to its GraphRepository interface.</p>\n\n<p>You can write a method that will search for a node of T class using the properties contained in the method's name, like this:</p>\n\n<pre><code>public interface UserRepository extends GraphRepository&lt;User&gt; {\n    public User findByUsername(String username);\n    public User findById(Long id);\n}\n</code></pre>\n\n<p>My User class:</p>\n\n<pre><code>@NodeEntity\npublic class User {\n\n    @GraphId\n    Long id;\n\n    @Indexed\n    private String username;\n\n    private String password;\n\n    ...\n}\n</code></pre>\n\n<p>And my applicationContext.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:neo4j=\"http://www.springframework.org/schema/data/neo4j\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xsi:schemaLocation=\" \n        http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context \n        http://www.springframework.org/schema/context/spring-context.xsd\n        http://www.springframework.org/schema/data/neo4j\n        http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd\n        http://www.springframework.org/schema/tx\n        http://www.springframework.org/schema/tx/spring-tx.xsd\"&gt;\n\n\n    &lt;context:spring-configured /&gt;\n    &lt;context:annotation-config /&gt;\n\n    &lt;context:component-scan base-package=\"package.for.services\" /&gt;  \n    &lt;neo4j:repositories base-package=\"package.for.repositories\" /&gt;\n\n    &lt;neo4j:config graphDatabaseService=\"graphDatabaseService\" /&gt;\n    &lt;bean id=\"graphDatabaseService\" class=\"org.neo4j.kernel.EmbeddedGraphDatabase\"\n        destroy-method=\"shutdown\" scope=\"singleton\"&gt;\n        &lt;constructor-arg value=\"/path/to/neo4j.db\" /&gt;\n        &lt;constructor-arg&gt;\n            &lt;map&gt;\n                &lt;entry key=\"allow_store_upgrade\" value=\"true\" /&gt;\n            &lt;/map&gt;\n        &lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>My issue is that <code>findById(Long id)</code> method does return a node with that specific id, but <code>findByUsername(String username)</code> does return <code>null</code> instead of a node with that specific username.</p>\n\n<p>Any help will be appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12998748,"title":"Spring Security authentication context propagation","body":"<p>Spring Security 3 claims to provide a transparent authentication context propagation for HttpInvoker. </p>\n\n<p>Can anyone point me to the exact location for this integration code (I've looked though Spring Security code itself and find nothing, as well as in the HttpInvoker related classes)?</p>\n"},{"tags":["java","spring","hibernate","intellij-idea"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12998450,"title":"Basic attribute type should not be IDao - intellij message","body":"<p>I am receiving the following message in my Entity object ?</p>\n\n<blockquote>\n  <p>Basic attribute type should not be IDao</p>\n</blockquote>\n\n<p>Where it is being used like this :</p>\n\n<pre><code>@Entity\n@Table\npublic final class MyEnity {\n\n    @Resource(name = \"Dao\")\n    private IDao dao;\n</code></pre>\n\n<p>I know the name is bad, but what is the problem with injecting my Dao(annotated with repository) into my Domain object that is annotated as a hibernate entity ? And IDao is an interface implemented by Dao class ... </p>\n"},{"tags":["spring","web-applications","maven","websphere","rad"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2553,"score":0,"question_id":7963496,"title":"Causes for java.io.FileNotFoundException: class path resource [services.xml] cannot be opened because it does not exist","body":"<p>I have a web-application on RAD 7.5. I am building the application using Maven and deploying on WebSphere 6.1.</p>\n\n<p>A part of my web.xml is:</p>\n\n<pre><code>&lt;context-param&gt;\n   &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n   &lt;param-value&gt;classpath:services.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n\n<p>This is the only place where I am referencing services.xml.</p>\n\n<p>My services.xml is in folder</p>\n\n<pre><code>FruitApplication/src/main/resources/services.xml\n</code></pre>\n\n<p>After building with maven, services.xml is in the following path in the target folder</p>\n\n<pre><code>target/FruitApplication-1.0.0/WEB-INF/classes/services.xml\n</code></pre>\n\n<p>On deployment, I continuously get below mentioned error. However, on building the application two three times, it disappears on its own and then reappears again haphazardly.</p>\n\n<p>What is the actual cause of this error ? \nHow to solve this error ?</p>\n\n<p>The top of my services.xml looks like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd\n        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd\"&gt;\n</code></pre>\n\n<p>Is something needs to be changed here ???</p>\n\n<p>Below is the complete pom.xml I am using for \"maven-install\":</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;FruitApplication&lt;/groupId&gt;\n  &lt;artifactId&gt;FruitApplication&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;1.0.0&lt;/version&gt;\n\n &lt;build&gt; \n  &lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.0.1&lt;/version&gt;\n        &lt;configuration&gt;\n        &lt;archive&gt;\n              &lt;manifestFile&gt;\n            src/main/webapp/META-INF/MANIFEST.MF\n          &lt;/manifestFile&gt;\n        &lt;/archive&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n &lt;/build&gt; \n\n &lt;dependencies&gt;\n        ... dependencies here ...\n &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>I have already tried all the below three options:</p>\n\n<pre><code>&lt;param-value&gt;classpath:services.xml&lt;/param-value&gt;\n&lt;param-value&gt;classpath:/services.xml&lt;/param-value&gt;\n&lt;param-value&gt;WEB-INF/classes/services.xml&lt;/param-value&gt;\n</code></pre>\n\n<p>How I am deploying:</p>\n\n<p>I am removing the application from the server by right clicking on server and \"add or remove applications\"</p>\n\n<p>I am doing a run-as \"maven-clean\" and then run-as \"maven-install\" on the application and again adding the application by right clicking on the server and \"add or remove applications\"</p>\n"},{"tags":["spring","collections","jaxb","setter","xjc"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":759,"score":2,"question_id":4679419,"title":"JAXB: How to use auto-generated classes from Spring?","body":"<p>I am using <em>xjc</em> to generated Java classes from an XSD. The resulting classes only include getter methods for collection types, e.g. <em>List</em>, but no setter methods. How can i use these generated classes as beans within the Spring Framework, i.e. how to populate these fields with data from <em>applicationContext.xml</em>?</p>\n\n<p>As a reply to 'duffymo' and 'fatih': Actually i can tell Spring to use the JAXB ObjectFactory and its factory methods to create the beans,</p>\n\n<pre><code>&lt;bean id=\"myFactory\" class=\"generated.ObjectFactory\" /&gt;\n&lt;bean id=\"myBean\" factory-bean=\"myFactory\" factory-method=\"createMyBeanMethod\" /&gt;\n</code></pre>\n\n<p>the remaining problem is how to populate the collection fields without having setter methods?</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12934829,"title":"Spring MVC Read and Parse a file in","body":"<p>I'm new to Spring and I'm just trying to open a simple text file and parse it so I can create some POJOs. My problem is I can't get Spring to find the txt file.</p>\n\n<p>I've tried putting the file all over the place and right now I've put it in </p>\n\n<p>/myAop/src/main/resources/myFile.txt</p>\n\n<p>and I'm referencing it in a file called </p>\n\n<p>com.myApp.pojo.Team.java</p>\n\n<p>using code like this:</p>\n\n<pre><code>FileSystemResource resource = new FileSystemResource(\"/myApp/src/main/resources/myFile.txt\");\nFile f =resource.getFile();\n</code></pre>\n\n<p>However, I'm not having any luck.</p>\n\n<p>I've also tried several other locations.\nThanks in advance for the help.</p>\n"},{"tags":["java","spring","caching","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":12997517,"title":"Caching HTTP reponses in a SpringMVC app","body":"<p>I would like my Spring Controller to cache the content which returns. I have found a lot of questions how to disable caching. I would like to know how to enable caching. My Controller looks like this one:</p>\n\n<pre><code>@Controller\npublic class SimpleController {\n\n    @RequestMapping(\"/webpage.htm\")\n    public ModelAndView webpage(HttpServletRequest request, \n                                HttpServletResponse response) {\n        ModelAndView mav = new ModelAndView(\"webpage\");\n        httpServletResponse.setHeader(“Cache-Control”, “public”);\n        //some code\n        return mav;\n    }\n}\n</code></pre>\n\n<p>As you can see I have added the line: <code>httpServletResponse.setHeader(“Cache-Control”, “public”);</code> to set caching but in my browser when I refresh this page I am still getting the same status result: <code>200 OK</code>. How can I achieve result <code>304 not modified</code>? I can set annotation <code>@ResponseStatus(value = HttpStatus.NOT_MODIFIED)</code> on this method but will it be only status or also actual caching?</p>\n"},{"tags":["flex","spring","flex4","blazeds"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":9782781,"title":"Flex 3 and Spring 4 Integration POM Dependencies","body":"<p>What are the maven dependencies in order to completely download all the Spring 3 and Flex 4 files required for the Spring Blaze Integration project?</p>\n\n<p>Currently I am getting an exception that this class is not found:</p>\n\n<p>flex.messaging.​AbstractFlexSessionProvider</p>\n\n<p>Thanks</p>\n"},{"tags":["spring","quartz-scheduler","inject"],"answer_count":7,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":5893,"score":4,"question_id":6990767,"title":"inject bean reference into a Quartz job in Spring?","body":"<p>I managed to configure and schedule a Quartz  job using JobStoreTX persistent store in Spring. I do not use Spring's Quartz jobs, because I need to schedule them dynamically, at run time, and all examples of integrating Spring with Quartz that i found were hard-coding the shcedules in the Spring config files... Anyway, here is how I schedule the job:</p>\n\n<pre><code>JobDetail emailJob = JobBuilder.newJob(EMailJob.class)\n.withIdentity(\"someJobKey\", \"immediateEmailsGroup\")\n.storeDurably()\n.build();\n\nSimpleTrigger trigger = (SimpleTrigger) TriggerBuilder.newTrigger() \n.withIdentity(\"someTriggerKey\", \"immediateEmailsGroup\")\n.startAt(fireTime)\n.build();\n\n// pass initialization parameters into the job\nemailJob.getJobDataMap().put(NotificationConstants.MESSAGE_PARAMETERS_KEY,       messageParameters);\nemailJob.getJobDataMap().put(NotificationConstants.RECIPIENT_KEY, recipient);\n\nif (!scheduler.checkExists(jobKey) &amp;&amp; scheduler.getTrigger(triggerKey) != null)     {                                       \n// schedule the job to run\nDate scheduleTime1 = scheduler.scheduleJob(emailJob, trigger);\n}\n</code></pre>\n\n<p>The EMailJob is a simple job that is sending e-mail using the Spring's JavaMailSenderImpl class.</p>\n\n<pre><code>public class EMailJob implements Job {\n@Autowired\nprivate JavaMailSenderImpl mailSenderImpl;\n\n    public EMailJob() {\n    }\n    public void execute(JobExecutionContext context)\n       throws JobExecutionException {\n   ....\n    try {\n        mailSenderImpl.send(mimeMessage);\n    } catch (MessagingException e) {\n        ....\n        throw new JobExecutionException(\"EMailJob failed: \" +  jobKey.getName(), e);\n    }\n\n    logger.info(\"EMailJob finished OK\");\n\n}\n</code></pre>\n\n<p>The problem is that I need to get a reference to an instance of this class (JavaMailSenderImpl)  in my EMailJob class. When I try to inject it like this:</p>\n\n<pre><code>@Autowired\nprivate JavaMailSenderImpl mailSenderImpl;\n</code></pre>\n\n<p>it is not injected - the reference is NULL. I'm assuming this is happening because it is not  Spring who instantiates the EMailJob class, but Quartz, and Quartz does not know anything about dependency injection...</p>\n\n<p>So, is there some way to force this injection to happen?</p>\n\n<p>thanks!</p>\n\n<p>Update 1:\n@Aaron:\nhere is a relevant part of the stacktrace from the startup, which is showing the the EMailJob was instantiated twice:</p>\n\n<pre><code>2011-08-15 14:16:38,687 [main] INFO     org.springframework.context.support.GenericApplicationContext - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler#0' is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2011-08-15 14:16:38,734 [main] INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1328c7a: defining beans [...]; root of factory hierarchy\n2011-08-15 14:16:39,734 [main] INFO  com.cambridgedata.notifications.EMailJob - EMailJob() -  initializing ...\n2011-08-15 14:16:39,937 [main] INFO  org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor -   Validated configuration attributes\n2011-08-15 14:16:40,078 [main] INFO  org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Validated configuration attributes\n2011-08-15 14:16:40,296 [main] INFO  org.springframework.jdbc.datasource.init.ResourceDatabasePopulator - Executing SQL script from class path resource ...\n2011-08-15 14:17:14,031 [main] INFO  com.mchange.v2.log.MLog - MLog clients using log4j logging.\n2011-08-15 14:17:14,109 [main] INFO  com.mchange.v2.c3p0.C3P0Registry - Initializing c3p0-0.9.1.1 [built 15-March-2007 01:32:31; debug? true; trace: 10]\n2011-08-15 14:17:14,171 [main] INFO  org.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\n2011-08-15 14:17:14,171 [main] INFO  org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.0.1 created.\n2011-08-15 14:17:14,187 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Using thread monitor-based data access locking (synchronization).\n2011-08-15 14:17:14,187 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - JobStoreTX initialized.\n2011-08-15 14:17:14,187 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.0.1) 'NotificationsScheduler' with instanceId  'NON_CLUSTERED'\n Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.\n   NOT STARTED.\n Currently in standby mode.\n Number of jobs executed: 0\n Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 3 threads.\n Using job-store 'org.quartz.impl.jdbcjobstore.JobStoreTX' - which supports persistence. and is not clustered.\n\n2011-08-15 14:17:14,187 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'NotificationsScheduler' initialized from the specified file : 'spring/quartz.properties' from the class resource path.\n2011-08-15 14:17:14,187 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.0.1\n2011-08-15 14:17:14,234 [main] INFO  com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource - Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -&gt; 3, acquireRetryAttempts -&gt; 30, acquireRetryDelay -&gt; 1000, autoCommitOnClose -&gt; false, automaticTestTable -&gt; null, breakAfterAcquireFailure -&gt; false, checkoutTimeout -&gt; 0, connectionCustomizerClassName -&gt; null, connectionTesterClassName -&gt; com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -&gt; 2sajb28h1lcabf28k3nr1|13af084, debugUnreturnedConnectionStackTraces -&gt; false, description -&gt; null, driverClass -&gt; com.mysql.jdbc.Driver, factoryClassLocation -&gt; null, forceIgnoreUnresolvedTransactions -&gt; false, identityToken -&gt; 2sajb28h1lcabf28k3nr1|13af084, idleConnectionTestPeriod -&gt; 50, initialPoolSize -&gt; 3, jdbcUrl -&gt; jdbc:mysql://localhost:3306/2010rewrite2, lastAcquisitionFailureDefaultUser -&gt; null, maxAdministrativeTaskTime -&gt; 0, maxConnectionAge -&gt; 0, maxIdleTime -&gt; 0, maxIdleTimeExcessConnections -&gt; 0, maxPoolSize -&gt; 5, maxStatements -&gt; 0, maxStatementsPerConnection -&gt; 120, minPoolSize -&gt; 1, numHelperThreads -&gt; 3, numThreadsAwaitingCheckoutDefaultUser -&gt; 0, preferredTestQuery -&gt; select 0 from dual, properties -&gt; {user=******, password=******}, propertyCycle -&gt; 0, testConnectionOnCheckin -&gt; true, testConnectionOnCheckout -&gt; false, unreturnedConnectionTimeout -&gt; 0, usesTraditionalReflectiveProxies -&gt; false ]\n2011-08-15 14:17:14,312 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Freed 0 triggers from 'acquired' / 'blocked' state.\n2011-08-15 14:17:14,328 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Recovering 0 jobs that were in-progress at the time of the last shut-down.\n2011-08-15 14:17:14,328 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Recovery complete.\n2011-08-15 14:17:14,328 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 'complete' triggers.\n2011-08-15 14:17:14,328 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 stale fired job entries.\n2011-08-15 14:17:14,328 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler NotificationsScheduler_$_NON_CLUSTERED started.\n2011-08-15 14:17:14,515 [NotificationsScheduler_QuartzSchedulerThread] INFO  com.cambridgedata.notifications.EMailJob - EMailJob() -  initializing ...\n</code></pre>\n\n<p>thanks!</p>\n\n<p>Update #2: @Ryan:</p>\n\n<p>I tried to use the SpringBeanJobFactory as following:</p>\n\n<pre><code>    &lt;bean id=\"jobFactoryBean\" class=\"org.springframework.scheduling.quartz.SpringBeanJobFactory\"&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"schedulerFactoryBean\" class=\"org.springframework.scheduling.quartz.SchedulerFactoryBean\"&gt;\n        &lt;property name=\"configLocation\" value=\"classpath:spring/quartz.properties\"/&gt;\n        &lt;property name=\"jobFactory\" ref=\"jobFactoryBean\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>And I have modified my main class to get Scheduler from this factory, instead of Quartz':</p>\n\n<pre><code>    @PostConstruct\npublic void initNotificationScheduler() {\n    try {\n        //sf = new StdSchedulerFactory(\"spring/quartz.properties\");\n        //scheduler = sf.getScheduler();\n\n        scheduler = schedulerFactoryBean.getScheduler();\n        scheduler.start();\n            ....\n</code></pre>\n\n<p>But when I run the app - get errors, see below. Here is the stacktrace from Spring startup . Seems like the Scheduler itself is created fine, but the error comes when it is trying to instantiate my EMailJob:</p>\n\n<pre><code>2011-08-15 21:49:42,968 [main] INFO  org.springframework.scheduling.quartz.SchedulerFactoryBean - Loading Quartz config from [class path resource [spring/quartz.properties]]\n2011-08-15 21:49:43,031 [main] INFO  com.mchange.v2.log.MLog - MLog clients using log4j logging.\n2011-08-15 21:49:43,109 [main] INFO  com.mchange.v2.c3p0.C3P0Registry - Initializing c3p0-0.9.1.1 [built 15-March-2007 01:32:31; debug? true; trace: 10]\n2011-08-15 21:49:43,187 [main] INFO  org.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\n2011-08-15 21:49:43,187 [main] INFO  org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.0.1 created.\n2011-08-15 21:49:43,187 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Using thread monitor-based data access locking (synchronization).\n2011-08-15 21:49:43,187 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - JobStoreTX initialized.\n2011-08-15 21:49:43,187 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.0.1) 'schedulerFactoryBean' with instanceId 'NON_CLUSTERED'\n Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.\n NOT STARTED.\n Currently in standby mode.\n Number of jobs executed: 0\n Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 3 threads.\n Using job-store 'org.quartz.impl.jdbcjobstore.JobStoreTX' - which supports persistence. and is not clustered.\n\n2011-08-15 21:49:43,187 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'schedulerFactoryBean' initialized from an externally provided properties instance.\n2011-08-15 21:49:43,187 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.0.1\n2011-08-15 21:49:43,187 [main] INFO  org.quartz.core.QuartzScheduler - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@566633\n2011-08-15 21:49:43,265 [main] INFO  com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource - Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -&gt; 3, acquireRetryAttempts -&gt; 30, acquireRetryDelay -&gt; 1000, autoCommitOnClose -&gt; false, automaticTestTable -&gt; null, breakAfterAcquireFailure -&gt; false, checkoutTimeout -&gt; 0, connectionCustomizerClassName -&gt; null, connectionTesterClassName -&gt; com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -&gt; 1hge13f8h1lsg7py1rg0iu0|1956391, debugUnreturnedConnectionStackTraces -&gt; false, description -&gt; null, driverClass -&gt; com.mysql.jdbc.Driver, factoryClassLocation -&gt; null, forceIgnoreUnresolvedTransactions -&gt; false, identityToken -&gt; 1hge13f8h1lsg7py1rg0iu0|1956391, idleConnectionTestPeriod -&gt; 50, initialPoolSize -&gt; 3, jdbcUrl -&gt; jdbc:mysql://localhost:3306/2010rewrite2, lastAcquisitionFailureDefaultUser -&gt; null, maxAdministrativeTaskTime -&gt; 0, maxConnectionAge -&gt; 0, maxIdleTime -&gt; 0, maxIdleTimeExcessConnections -&gt; 0, maxPoolSize -&gt; 5, maxStatements -&gt; 0, maxStatementsPerConnection -&gt; 120, minPoolSize -&gt; 1, numHelperThreads -&gt; 3, numThreadsAwaitingCheckoutDefaultUser -&gt; 0, preferredTestQuery -&gt; select 0 from dual, properties -&gt; {user=******, password=******}, propertyCycle -&gt; 0, testConnectionOnCheckin -&gt; true, testConnectionOnCheckout -&gt; false, unreturnedConnectionTimeout -&gt; 0, usesTraditionalReflectiveProxies -&gt; false ]\n2011-08-15 21:49:43,343 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Freed 0 triggers from 'acquired' / 'blocked' state.\n2011-08-15 21:49:43,359 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Recovering 0 jobs that were in-progress at the time of the last shut-down.\n2011-08-15 21:49:43,359 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Recovery complete.\n2011-08-15 21:49:43,359 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 'complete' triggers.\n2011-08-15 21:49:43,359 [main] INFO  org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 stale fired job entries.\n2011-08-15 21:49:43,359 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler schedulerFactoryBean_$_NON_CLUSTERED started.\n2011-08-15 21:49:43,562 [schedulerFactoryBean_QuartzSchedulerThread] ERROR org.quartz.core.ErrorLogger - An error occured instantiating job to be executed. job= 'immediateEmailsGroup.DEFAULT.jobFor_1000new1'\norg.quartz.SchedulerException: Problem instantiating class  'com.cambridgedata.notifications.EMailJob' -  [See nested exception:  java.lang.AbstractMethodError:  org.springframework.scheduling.quartz.SpringBeanJobFactory.newJob(Lorg/quartz/spi/TriggerFiredBundle;Lorg/quartz/Scheduler;)Lorg/quartz/Job;]\nat org.quartz.core.JobRunShell.initialize(JobRunShell.java:141)\nat org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:381)\nCaused by: java.lang.AbstractMethodError: org.springframework.scheduling.quartz.SpringBeanJobFactory.newJob(Lorg/quartz/spi/TriggerFiredBundle;Lorg/quartz/Scheduler;)Lorg/quartz/Job;\nat org.quartz.core.JobRunShell.initialize(JobRunShell.java:134)\n</code></pre>\n\n<p>thanks!</p>\n"},{"tags":["spring","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12985862,"title":"How to limit only one session per user and block the subsequent login attempt?","body":"<p>The default behavior of concurrency control is to expire the original session. However, I would like to block the second user which is logging in with the same credentials with displaying message \"User has already logged in\". How can I accomplish this ?</p>\n\n<p>Below is the configuration of spring-security.xml: </p>\n\n<pre><code>&lt;http auto-config=\"false\" use-expressions=\"true\"&gt;\n    &lt;intercept-url pattern=\"/login*\" access=\"permitAll\"\n        requires-channel=\"https\" /&gt;\n    &lt;intercept-url pattern=\"/userHasLoggedIn\" access=\"permitAll\"\n        requires-channel=\"https\" /&gt;\n    &lt;intercept-url pattern=\"/j_spring_security_*\" access=\"permitAll\"\n        requires-channel=\"https\" /&gt;\n    &lt;intercept-url pattern=\"/session*\" access=\"permitAll\"\n        requires-channel=\"https\" /&gt;\n    &lt;form-login login-page=\"/login\" authentication-failure-url=\"/loginFailed\" /&gt;\n    &lt;intercept-url pattern=\"/**\" access=\"isAuthenticated()\"\n        requires-channel=\"https\" /&gt;\n    &lt;session-management invalid-session-url=\"/sessionExpired\" session-authentication-error-url=\"/loginAlready\"&gt;\n        &lt;concurrency-control error-if-maximum-exceeded=\"false\" expired-url=\"/userHasLoggedIn\" max-sessions=\"1\"/&gt;\n    &lt;/session-management&gt;\n    &lt;logout delete-cookies=\"JSESSIONID\" /&gt;\n&lt;/http&gt;\n</code></pre>\n\n<p><strong>(Updated)</strong> My final spring security configuration:</p>\n\n<pre><code>&lt;http auto-config=\"false\" use-expressions=\"true\"&gt;\n        &lt;intercept-url pattern=\"/login*\" access=\"permitAll\"\n            requires-channel=\"https\" /&gt;\n        &lt;form-login default-target-url=\"/home\" login-page=\"/login\" authentication-failure-url=\"/loginFailed\" /&gt;\n        &lt;intercept-url pattern=\"/**\" access=\"isFullyAuthenticated()\"\n            requires-channel=\"https\" /&gt;\n        &lt;session-management session-authentication-error-url=\"/loginFailed\"&gt;\n            &lt;concurrency-control expired-url=\"/loginFailed\" error-if-maximum-exceeded=\"true\" max-sessions=\"1\"/&gt;\n        &lt;/session-management&gt;\n        &lt;logout delete-cookies=\"JSESSIONID\" /&gt;\n    &lt;/http&gt;\n</code></pre>\n"},{"tags":["java","spring","mvc","jboss"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12995697,"title":"How to deploy spring mvc application in jboss server?","body":"<p>I am implementing a Spring MVC application using JBoss application server.\nI am getting the following exceptions when i run the application during JBoss server start up.\nWhere as it's working fine in Tomcat.</p>\n\n<p>Can anyone please give me some suggestions.\nI am using Eclipse IDE.</p>\n\n<pre>\nUnexpected error during load of:com.ibm.icu.impl.data.LocaleElements_zh__PINYIN: java.lang.ClassFormatError: Unknown constant tag 60 in class file com/ibm/icu/impl/data/LocaleElements_zh__PINYIN\n\nException sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/dispatcher-servlet.xml]; nested exception is java.lang.NoClassDefFoundError: org/jboss/virtual/VirtualFileVisitor\n</pre>\n"},{"tags":["html","spring","spring-roo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12995752,"title":"Spring Roo: How to create form and submit input","body":"<p>I am using Spring Roo for a university assignment and would like to add a search form. I do not want to use the tag library that Roo creates, instead I would like to use twitter bootstrap. This is what my form look like:</p>\n\n<pre><code>&lt;form class=\"form-search\"&gt;\n  &lt;input type=\"text\" class=\"input-medium search-query\"&gt;\n  &lt;button type=\"submit\" class=\"btn\"&gt;Search&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>When a user presses the search button I need to submit the text to a controller which will search for the objects and return them to the view. My problem is that I do not understand how to actually submit the input text. I don't understand how that part works in html. </p>\n\n<p>I tried adding something this: action=\"/courses/find\" method=\"POST\"  to the form tag, but I don't know where to go from here.</p>\n"},{"tags":["java","spring","dependency-injection","guice"],"answer_count":3,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":702,"score":5,"question_id":3149137,"title":"The decorator pattern and @Inject","body":"<p>When using Spring's based XML configuration, it's easy to decorate multiple implementations of the same interface and specify the order. For instance, a logging service wraps a transactional service which wraps the actual service.</p>\n\n<p>How can I achieve the same using the <code>javax.inject</code> annotations?</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12994386,"title":"How to call .class for a class with type parameter? E.g. List<String>.class","body":"<p>To start with an easy example, calling <code>List&lt;String&gt;.class</code> results in compile error, I can just call <code>List.class</code> to achieve my purpose.</p>\n\n<p>Recently, I am doing things related to Spring REST template. I have to input a class object for the <code>getForObject</code> method. I have such a class: <code>Foo&lt;T&gt;</code>.</p>\n\n<p>The result is, I cannot provide <code>Foo&lt;Bar&gt;.class</code> as one of the arguments.\nCould anyone please help?</p>\n"},{"tags":["java","spring","hibernate","jpa","tomcat7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":164,"score":0,"question_id":12717895,"title":"Memory Leak on stop or redeploy - Spring 3.1.2, Hibernate 4.1.0, Spring Data-Jpa 1.1.0, Tomcat 7.0.30","body":"<h1>Problem</h1>\n\n<p>The application has no issues running for days on end on the production server, but when I perform a deploy for updates, the Tomcat Manager program will complain about leaks (if I click find leaks). If I perform 6-10 deploys, eventually Tomcat runs out of memory with a PermGen memory error and I need to restart the Tomcat service and everything returns to normal.</p>\n\n<p>When I run/debug the application locally and perform some actions that require access through Jpa/Hibernate (ie, I login or request a List from a JpaRepository) and then shutdown the application, I receive the following messages in my debug output from Tomcat:</p>\n\n<blockquote>\n  <p>Oct 03, 2012 2:55:13 PM org.apache.catalina.loader.WebappClassLoader\n  checkThreadLocalMapForLeaks SEVERE: The web application [/]\n  created a ThreadLocal with key of type\n  [org.springframework.core.NamedThreadLocal] (value [Transactional\n  resources]) and a value of type [java.util.HashMap] (value [{public\n  abstract java.lang.Object\n  org.springframework.data.repository.CrudRepository.findOne(java.io.Serializable)=java.lang.Object@842e211}])\n  but failed to remove it when the web application was stopped. Threads\n  are going to be renewed over time to try and avoid a probable memory\n  leak. </p>\n  \n  <p>Oct 03, 2012 2:55:13 PM\n  org.apache.catalina.loader.WebappClassLoader\n  checkThreadLocalMapForLeaks SEVERE: The web application [/]\n  created a ThreadLocal with key of type\n  [org.springframework.core.NamedThreadLocal] (value [Transactional\n  resources]) and a value of type [java.util.HashMap] (value [{public\n  abstract java.util.List\n  org.springframework.data.jpa.repository.JpaRepository.findAll()=java.lang.Object@842e211}])\n  but failed to remove it when the web application was stopped. Threads\n  are going to be renewed over time to try and avoid a probable memory\n  leak. </p>\n  \n  <p>Oct 03, 2012 2:55:13 PM\n  org.apache.catalina.loader.WebappClassLoader\n  checkThreadLocalMapForLeaks SEVERE: The web application [/]\n  created a ThreadLocal with key of type\n  [org.springframework.core.NamedThreadLocal] (value [Transactional\n  resources]) and a value of type [java.util.HashMap] (value [{public\n  abstract java.lang.Iterable\n  org.springframework.data.querydsl.QueryDslPredicateExecutor.findAll(com.mysema.query.types.Predicate)=java.lang.Object@842e211}])\n  but failed to remove it when the web application was stopped. Threads\n  are going to be renewed over time to try and avoid a probable memory\n  leak. </p>\n  \n  <p>Oct 03, 2012 2:55:13 PM\n  org.apache.catalina.loader.WebappClassLoader\n  checkThreadLocalMapForLeaks SEVERE: The web application [/]\n  created a ThreadLocal with key of type\n  [org.springframework.core.NamedThreadLocal] (value [Transactional\n  resources]) and a value of type [java.util.HashMap] (value [{public\n  abstract data.domain.UserAccount\n  UserAccountRepository.findByUserName(java.lang.String)=java.lang.Object@842e211}])\n  but failed to remove it when the web application was stopped. Threads\n  are going to be renewed over time to try and avoid a probable memory\n  leak.</p>\n</blockquote>\n\n<p>etc, etc.</p>\n\n<h1>Configuration</h1>\n\n<p>Spring is configured via annotations and I'm also using Postgres 8.4 as the database backend.</p>\n\n<p>JPA is configured via annotations (jpa-repository-context.xml just says to look for this class):</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\n@ImportResource( \"classpath*:*jpa-repository-context.xml\" )\n@ComponentScan( basePackages = { \"data.repository\" } )\npublic class PersistenceJpaConfig\n{\n    @Bean\n        public LocalContainerEntityManagerFactoryBean entityManagerFactory()\n        {\n            LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\n            factoryBean.setDataSource( dataSource() );\n            factoryBean.setPackagesToScan( new String[] { \"data.domain\" } );\n\n            // Setup vendor specific information. This will depend on the chosen DatabaseType\n            HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n            vendorAdapter.setGenerateDdl( true );\n            vendorAdapter.setShowSql( false );\n            vendorAdapter.setDatabasePlatform( \"org.hibernate.dialect.PostgreSQL82Dialect\" );\n\n            factoryBean.setJpaVendorAdapter( vendorAdapter );\n\n            Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();\n            properties.put( \"hibernate.ejb.naming_strategy\", \"org.hibernate.cfg.ImprovedNamingStrategy\" );\n\n            factoryBean.setJpaPropertyMap( properties );\n\n            return  factoryBean;\n        }\n\n        @Bean\n        public DataSource dataSource()\n        {\n            JndiDataSourceLookup lookup = new JndiDataSourceLookup();\n            DataSource dataSource;\n\n            dataSource = lookup.getDataSource( \"java:comp/env/jdbc/postgres\" );\n\n\n            return dataSource;\n        }\n\n        @Bean\n        public PlatformTransactionManager transactionManager()\n        {\n            JpaTransactionManager transactionManager = new JpaTransactionManager();\n            transactionManager.setEntityManagerFactory( entityManagerFactory().getObject() );\n\n            return transactionManager;\n        }\n}\n</code></pre>\n\n<p>Example Repository:</p>\n\n<pre><code>public interface UserAccountRepository extends JpaRepository&lt;UserAccount, Long&gt;, QueryDslPredicateExecutor&lt;UserAccount&gt; {\n}\n</code></pre>\n\n<p>All of my Repositories are accessed through a Service class which is registered as an @Component in Spring. This is done to remove repository access from Spring controllers:</p>\n\n<pre><code>@Component\npublic class UserAccountService {\n\n    @Autowired\n    private UserAccountRepository userAccountRepository;\n\n    public List&lt;UserAccount&gt; getUserAccounts() {\n        return userAccountRepository.findAll();\n    }\n    ...\n}\n</code></pre>\n\n<p>And here are the versions for the various components in use in Maven's pom.xml:</p>\n\n<pre><code>&lt;properties&gt;\n        &lt;!-- Persistence and Validation--&gt;\n        &lt;hibernate.version&gt;4.1.0.Final&lt;/hibernate.version&gt;\n        &lt;hibernate.jpa.version&gt;1.0.1.Final&lt;/hibernate.jpa.version&gt;\n        &lt;javax.validation.version&gt;1.0.0.GA&lt;/javax.validation.version&gt;\n        &lt;querydsl.version&gt;2.2.5&lt;/querydsl.version&gt;\n        &lt;spring.jpa.version&gt;1.1.0.RELEASE&lt;/spring.jpa.version&gt;\n\n        &lt;!-- Spring and Logging --&gt;\n        &lt;spring.version&gt;3.1.2.RELEASE&lt;/spring.version&gt;\n        &lt;spring.security.version&gt;3.1.2.RELEASE&lt;/spring.security.version&gt;\n        &lt;slf4j.version&gt;1.6.4&lt;/slf4j.version&gt;\n        &lt;jackson.version&gt;1.9.9&lt;/jackson.version&gt;\n\n        &lt;!-- Testing Suites --&gt;\n        &lt;selenium.version&gt;2.24.1&lt;/selenium.version&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<h1>Questions</h1>\n\n<ol>\n<li>What is causing the memory leak and how do I fix it? </li>\n<li>How would I go about debugging this particular issue?</li>\n<li>Is there anything in my configuration set that could be improved?</li>\n</ol>\n\n<p>I have really run out of ideas on solving this problem.</p>\n"},{"tags":["java","json","spring","spring-mvc","jackson"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12990323,"title":"What's a good built in data structure to use for jackson json conversion?","body":"<p>In my ajax response, I want to return a JSON result.</p>\n\n<p>I'm using spring mvc, and I have jackson in my pom.xml already.</p>\n\n<p>Now in my controller's action I have:</p>\n\n<pre><code>  @ResponseBody\n    @RequestMapping(value = \"/someAjaxResponse\", method = RequestMethod.POST)\n    public String someAjaxResponse(HttpServletRequest request, HttpServletResponse response) {\n\n    }\n</code></pre>\n\n<p>What built in java datastructure/type do you suggest I use so I can then convert it to json using jackson?</p>\n\n<p>I don't want to create a new class for each response type, so I'm looking for a good general  purpose java type for this purpose.</p>\n\n<p>Suggestions?</p>\n\n<p>For converting to json, which method would be best as I know jackson has multiple ways converting objects, like ObjectMapper which I believe you create a single instance of and re-use throughout the entire application?  So does that mean I mark it as final?</p>\n"},{"tags":["java","spring","lucene","full-text-search","spring-data"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1676,"score":1,"question_id":8376008,"title":"Using Lucene/Solr with Spring Data","body":"<p>I am using Spring Data (Mongo) for my web application (close to a social networking website). Now, I wish to provide <strong>search</strong> capabilities over the content written within the application (such as posts, tags, friends, etc.).</p>\n\n<p>I believe Lucene/Solr is one of the better libraries to go for such cases, but am not sure how to use (integrate?) it with Spring Data (or maybe there is some inherent support within Spring for it). </p>\n\n<p>Would appreciate help (documentation, links, blog posts, etc.) on this!</p>\n"},{"tags":["jquery","html","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":58,"score":0,"question_id":12993551,"title":"Using jQuery to set value on SPAN element","body":"<p>I have an element <code>&lt;span id=\"userName.errors\" class=\"errors\"&gt;Enter Your User Name &lt;/span&gt;</code> i would like to use jquery to remove the text 'Enter Your User Name ' or any element that belongs to the class 'errors'</p>\n"},{"tags":["spring","spring-mvc","quartz-scheduler","quartz"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3776,"score":4,"question_id":4258313,"title":"How to use @Autowired in a Quartz Job?","body":"<p>i am using quartz with spring\nand i want to inject/use another class in the job class\nand i don't know how to do it correctly</p>\n\n<p>the xml:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans-2.5.xsd\"&gt;\n\n   &lt;!-- Scheduler task --&gt;\n   &lt;bean name=\"schedulerTask\" class=\"com.mkyong.quartz.SchedulerTask\" /&gt;\n\n   &lt;!-- Scheduler job --&gt;\n   &lt;bean name=\"schedulerJob\"\n       class=\"org.springframework.scheduling.quartz.JobDetailBean\"&gt;\n\n     &lt;property name=\"jobClass\" value=\"com.mkyong.quartz.SchedulerJob\" /&gt;\n\n     &lt;property name=\"jobDataAsMap\"&gt;\n        &lt;map&gt;\n          &lt;entry key=\"schedulerTask\" value-ref=\"schedulerTask\" /&gt;\n         &lt;/map&gt;\n      &lt;/property&gt;\n   &lt;/bean&gt;\n\n   &lt;!-- Cron Trigger --&gt;\n   &lt;bean id=\"cronTrigger\"\n    class=\"org.springframework.scheduling.quartz.CronTriggerBean\"&gt;\n\n    &lt;property name=\"jobDetail\" ref=\"schedulerJob\" /&gt;\n    &lt;property name=\"cronExpression\" value=\"0/10 * * * * ?\" /&gt;\n\n   &lt;/bean&gt;\n\n   &lt;!-- Scheduler --&gt;\n   &lt;bean class=\"org.springframework.scheduling.quartz.SchedulerFactoryBean\"&gt;\n    &lt;property name=\"jobDetails\"&gt;\n       &lt;list&gt;\n          &lt;ref bean=\"schedulerJob\" /&gt;\n       &lt;/list&gt;\n    &lt;/property&gt;\n\n    &lt;property name=\"triggers\"&gt;\n        &lt;list&gt;\n        &lt;ref bean=\"cronTrigger\" /&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n   &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>the quartz job:</p>\n\n<pre><code>package com.mkyong.quartz;\n\nimport org.quartz.JobExecutionContext;\nimport org.quartz.JobExecutionException;\nimport org.springframework.scheduling.quartz.QuartzJobBean;\n\npublic class SchedulerJob extends QuartzJobBean\n{\n    private SchedulerTask schedulerTask;\n\n    public void setSchedulerTask(SchedulerTask schedulerTask) {\n        this.schedulerTask = schedulerTask;\n    }\n\n    protected void executeInternal(JobExecutionContext context)\n    throws JobExecutionException {\n\n        schedulerTask.printSchedulerMessage();\n\n    }\n}\n</code></pre>\n\n<p>the task to be executed:</p>\n\n<pre><code>package com.mkyong.quartz;\n\npublic class SchedulerTask {\n\n   public void printSchedulerMessage() {\n\n       System.out.println(\"Struts 2 + Spring + Quartz ......\");\n\n   }\n}\n</code></pre>\n\n<p>i want to inject another DTO class that deals with Database in the task class\nto do some database work in the task, how to do that ?</p>\n"},{"tags":["java","spring","mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12978074,"title":"Spring @ResponseBody view resolution","body":"<h1>Question</h1>\n\n<p>Have anyone figured out an alternative means of view resolution for <code>@ResponseBody</code> (to allow implementing part of what <a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config\" rel=\"nofollow\"><code>ConcentNegotiatingViewResolver</code></a> does) ?</p>\n\n<h1>Reasoning</h1>\n\n<p>The spring view resolution mechanism is very powerful, in particular with <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.html\" rel=\"nofollow\"><code>ContentNegotiatingViewResolver</code></a>, allowing view resolution e.g., on path extensions (<code>foo.json</code>) or request parameters (<code>?view=json</code>). </p>\n\n<p>However, when using <code>@ResponseBody</code> annotation the view resolution chain is bypassed. With <a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config\" rel=\"nofollow\"><code>mvc:annotation-driven</code></a> we get a <a href=\"http://static.springsource.org/spring/docs/3.1.0.RC1/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/RequestMappingHandlerAdapter.html\" rel=\"nofollow\"><code>RequestMappingHandlerAdapter</code></a> instead, with view resolution which seems to be based solely on the <code>Accept</code>header. </p>\n"},{"tags":["java","spring","hibernate","bean-validation"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12986030,"title":"Hibernate Validator not invoked on Object Graph","body":"<p>I have a model object which has entities annotated with hibernate validation annotations. For example @NotBlank, @NotNull, @Length.\nI have a form backing this model which decorates an instance of the model object. I have annotated this instance with an @NotNull, @Valid annotation. I am registering a validator for this backing form in the Controller Class and the form validator is being invoked when the @RequestMapping method argument is annotated with @Valid annotation.</p>\n\n<p>Note the model is also annotated with the @Entity annotation, the model backing form is just \na thin wrapper around the model.</p>\n\n<p>However the validations on the decorated object are not being checked? I know this because in the request mapping method definition I check the BindResult for errors and there are none.\nMy form fields are all empty, hence the validations on the fields on the decorated model annotated with @NotBlank should be checked. However that does not happen.</p>\n\n<p>Can you help me fix this?</p>\n\n<p>Edit:\nSample Code</p>\n\n<pre><code>@Entity\nclass MyModel {\n    @Id\n@GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(nullable=false)\n    private Long id;\n\n    @NotBlank\n    @Column(unique=true, length=30, nullable=false)\n    private String number;\n\n    @Column(length=30, nullable=false)\n    @Length(min=1, max=30)\nprivate String firstName;\n    /* ... getters and setters ... */\n}\n\npublic class MyModelBackingForm {\n\n   @NotNull\n   @Valid\n   private MyModel model;\n   /* ... delegate getters and setters for all fields in MyModel ...  */\n }\n</code></pre>\n\n<p>Edit:\nAdd Controller Code</p>\n\n<pre><code>@InitBinder\nprotected void initBinder(WebDataBinder binder) {\n  binder.setValidator(new MyBackingFormValidator());\n}\n</code></pre>\n\n<p>Edit:</p>\n\n<pre><code>public class MyBackingFormValidator implements Validator {\n\n  public MyBackingFormValidator() {\n    super();\n  }\n\n  @Override\n  public boolean supports(Class&lt;?&gt; clazz) {\n    return Arrays.asList(MyBackingForm.class, MyModel.class).contains(clazz);\n  }\n\n  @Override\n  public void validate(Object obj, Errors errors) {\n   // custom validation code commented ... as I want to check if JSR 303 validations invoked\n  }\n}\n</code></pre>\n"},{"tags":["spring","spring-webflow-2"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2778,"score":1,"question_id":377585,"title":"Spring WebFLow Handling Request in JSP","body":"<p>I am newbie to <code>Spring Webflow</code>, I have am using Custom <code>FlowHandler</code> </p>\n\n<p>I can reach the respective Controller, but if set an attribute in a request Object I don't get it in JSP that is <code>View state</code>.</p>\n\n<p>How can I proceed in this?</p>\n"},{"tags":["spring","spring-roo"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":563,"score":0,"question_id":7565181,"title":"Spring Roo finder issue","body":"<p>I have followed <a href=\"http://blog.springsource.com/2009/05/27/roo-part-2/\" rel=\"nofollow\">Spring Roo tutorial</a> (by Ben Alex). Until create finder everything went fine. When I am create <code>finder</code> It won't generate generate relevent JSP file. it only update java and .aj file.  What kind of issue this can be?</p>\n\n<pre><code>~.domain.Rsvp roo&gt; controller class --class ~.web.PublicRsvpController\nCreated SRC_MAIN_JAVA\\com\\wedding\\web\\PublicRsvpController.java\nUpdated SRC_MAIN_WEBAPP\\WEB-INF\\i18n\\application.properties\nCreated SRC_MAIN_WEBAPP\\WEB-INF\\views\\publicrsvp\nCreated SRC_MAIN_WEBAPP\\WEB-INF\\views\\publicrsvp\\views.xml\nCreated SRC_MAIN_WEBAPP\\WEB-INF\\views\\publicrsvp\\index.jspx\nUpdated SRC_MAIN_WEBAPP\\WEB-INF\\views\\menu.jspx\n~.domain.Rsvp roo&gt; finder list --class ~.domain.Rsvp --filter code,equ\nfindRsvpsByAttendingEquals(Integer attending)\nfindRsvpsByAttendingGreaterThanEquals(Integer attending)\nfindRsvpsByAttendingLessThanEquals(Integer attending)\nfindRsvpsByAttendingNotEquals(Integer attending)\nfindRsvpsByCodeEquals(String code)\nfindRsvpsByCodeIsNotNull()\nfindRsvpsByCodeIsNull()\nfindRsvpsByCodeLike(String code)\nfindRsvpsByCodeNotEquals(String code)\nfindRsvpsByConfirmedEquals(Date confirmed)\nfindRsvpsByConfirmedGreaterThanEquals(Date confirmed)\nfindRsvpsByConfirmedLessThanEquals(Date confirmed)\nfindRsvpsByConfirmedNotEquals(Date confirmed)\nfindRsvpsByEmailEquals(String email)\nfindRsvpsByEmailNotEquals(String email)\nfindRsvpsBySpecialRequestsEquals(String specialRequests)\nfindRsvpsBySpecialRequestsIsNotNull()\nfindRsvpsBySpecialRequestsIsNull()\nfindRsvpsBySpecialRequestsLike(String specialRequests)\nfindRsvpsBySpecialRequestsNotEquals(String specialRequests)\n\n~.domain.Rsvp roo&gt; finder add --finderName findRsvpsByCodeEquals\nUpdated SRC_MAIN_JAVA\\com\\wedding\\domain\\Rsvp.java\nCreated SRC_MAIN_JAVA\\com\\wedding\\domain\\Rsvp_Roo_Finder.aj\n\n~.domain.Rsvp roo&gt;\n</code></pre>\n"},{"tags":["spring","jsf","spring-annotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":451,"score":0,"question_id":7966063,"title":"Spring annotations with JSF","body":"<p>Can anybody tell me how should I use Spring annotations in JSF application so that I can use spring annotations (eg. @Service or @Component) instead of @ManagedBean and use that bean in EL expressions on jsf view page.<br/><br/>First I would like to know whether it is possible or not? And if yes, how?</p>\n"},{"tags":["spring","caching","statistics","abstraction"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":179,"score":3,"question_id":5316494,"title":"Is there a provider agnostic way of getting live cache statistics in upcoming Spring 3.1?","body":"<p>Spring 3.1.0.M1 is out and one of the many useful features is <a href=\"http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html\" rel=\"nofollow\">Cache Abstraction</a> </p>\n\n<p>But what I could not find is a <strong>provider agnostic</strong> way to show live cache statistics. Basically I just want to show a list of all the cache names and their corresponding keys with the count of hits, misses and their sizes (in kb) either on a web page or via JMX. I know ehcache does provide this feature and if I use <a href=\"http://ehcache.org/apidocs/net/sf/ehcache/Ehcache.html#getLiveCacheStatistics%28%29\" rel=\"nofollow\">ehcache API</a> inside the code I can get it (have already used it in the past). But I believe using ehcache API inside the code throws away the whole notion of Spring framework's cache abstraction.</p>\n"},{"tags":["jquery","ajax","spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":638,"score":1,"question_id":6908923,"title":"How to send a session scoped attribute through jquery ajax call","body":"<p>I have an issue I have this jQuery code:</p>\n\n<pre><code>    $(document).ready(function(){\n        $(\"#follow\").click(function(){\n            $.ajax({\n                type: 'POST',\n                url:'/tweety-0.0.1-SNAPSHOT/twitter/tiles/follow',\n                data:{\n                        searchedUser: $('#searchedUser').val()\n                }   \n        })\n    })\n})\n</code></pre>\n\n<p>this piece of code get hidden id and send it's value to the following method in my controller:</p>\n\n<pre><code>@RequestMapping(value=\"/follow\",method=RequestMethod.POST)\n    public @ResponseBody void followUser(@RequestParam(\"searchedUser\") String userToFollow, \n            @ModelAttribute(\"user\") User user) {\n            if(userToFollow.equals(user.getUsername())){\n                // do nothing\n            }else{\n                service.followUser(userToFollow,user.getUsername());\n            }\n    }\n</code></pre>\n\n<p>I want to send a session scoped attribute through the previous ajax call. Any clue on how doing that??</p>\n"},{"tags":["spring","spring-mvc","spring-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12988273,"title":"Any way to accept bot json and regular objects in Spring controller","body":"<p>Is this possible to achive in any way? </p>\n\n<pre><code>@RequestMapping(value = \"/test\", method = RequestMethod.POST)\npublic String test(@RequestBody Person personJson , Person personRegular){\n    Person person = personJson != null ? personJson : personRegular;\n}\n</code></pre>\n"},{"tags":["spring","spring-security"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":123,"score":1,"question_id":12916320,"title":"How to configure different UserDetailsService beans for form and OpenID authentication","body":"<p>I am trying to customize authentication with spring security 3.1 to use both form and OpenID login.  </p>\n\n<p>Here is my spring-security.xml file:</p>\n\n<pre><code>   &lt;http auto-config=\"true\" use-expressions=\"true\"&gt;\n\n    &lt;intercept-url pattern=\"/login.htm\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/loginfailed*\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/loginopenidfailed*\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/home.htm\" access=\"permitAll\" /&gt;\n    &lt;intercept-url pattern=\"/**.htm\" access=\"hasRole('ROLE_CLOUD_USER')\" /&gt;\n\n    &lt;form-login login-page=\"/login.htm\"\n        default-target-url=\"/admin.htm\"\n        authentication-failure-url=\"/loginfailed.htm\"\n        always-use-default-target=\"true\"/&gt;\n    &lt;logout logout-url=\"/logout.htm\" logout-success-url=\"/home.htm\" /&gt;  \n    &lt;openid-login authentication-failure-url=\"/loginopenidfailed.htm\"&gt;\n      &lt;attribute-exchange&gt;\n        &lt;openid-attribute name=\"email\" type=\"http://schema.openid.net/contact/email\" required=\"true\" count=\"2\"/&gt;\n        &lt;openid-attribute name=\"name\" type=\"http://schema.openid.net/namePerson/friendly\" /&gt;\n      &lt;/attribute-exchange&gt;\n    &lt;/openid-login&gt;\n  &lt;/http&gt;\n\n  &lt;!--Authentication Manager --&gt;\n  &lt;authentication-manager alias=\"authenticationManager\"&gt;\n    &lt;authentication-provider ref=\"daoAuthenticationProvider\"/&gt;\n    &lt;authentication-provider ref=\"openIDAuthenticationProvider\"/&gt;\n  &lt;/authentication-manager&gt;\n\n  &lt;!--dao authentication provider --&gt;\n  &lt;beans:bean id=\"daoAuthenticationProvider\" class=\"org.springframework.security.authentication.dao.DaoAuthenticationProvider\"&gt;\n    &lt;beans:property name=\"userDetailsService\" ref=\"userService\" /&gt;\n    &lt;beans:property name=\"passwordEncoder\"&gt;\n      &lt;beans:bean class=\"org.springframework.security.authentication.encoding.ShaPasswordEncoder\" /&gt;\n    &lt;/beans:property&gt;\n  &lt;/beans:bean&gt;\n\n  &lt;!--openID authentication provider --&gt;\n  &lt;beans:bean id=\"openIDAuthenticationProvider\" class=\"org.springframework.security.openid.OpenIDAuthenticationProvider\"&gt;\n    &lt;beans:property name=\"userDetailsService\" ref=\"openIDUserDS\" /&gt;\n  &lt;/beans:bean&gt;\n\n  &lt;!--openID UserDetail --&gt;\n  &lt;beans:bean id=\"openIDUserDS\" class=\"test.security.CloudOpenIDUserDS\"/&gt;\n\n  &lt;user-service id=\"userDetailsService\"&gt;\n    &lt;user name=\"abdellah\" password=\"32fe5bbf04adc744455c92fa7b71e9dca8ce729c\" authorities=\"ROLE_CLOUD_USER\" /&gt;\n    &lt;user name=\"guest\"    password=\"35675e68f4b5af7b995d9205ad0fc43842f16450\" authorities=\"ROLE_CLOUD_USER\" /&gt;\n  &lt;/user-service&gt;\n\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>You can see that I have two provider elements in the \"authentication-manager\", one for each type of authentication. The OpenID provider is configured with a <code>UserDetailService</code> bean called <code>openIDUserDS</code>.</p>\n\n<p>When I deploy the application, I get this exception:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'org.springframework.security.web.DefaultSecurityFilterChain#0' while setting bean property 'sourceList' with key [0]; nested exception is \n\n... Snip to root cause ...\n\nCaused by: org.springframework.context.ApplicationContextException: More than one UserDetailsService registered. Please use a specific Id reference in &lt;remember-me/&gt; &lt;openid-login/&gt; or &lt;x509 /&gt; elements.\n    at org.springframework.security.config.http.UserDetailsServiceFactoryBean.getUserDetailsService(UserDetailsServiceFactoryBean.java:102)\n    at org.springframework.security.config.http.UserDetailsServiceFactoryBean.authenticationUserDetailsService(UserDetailsServiceFactoryBean.java:66)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)\n    ... 95 more\n</code></pre>\n"},{"tags":["java","spring","aop","aspectj"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12929716,"title":"Why server complaining about aspectOf is missing?","body":"<p>I am currently trying to inject Spring bean in AspectJ like the code shown below, anyhow I the server (WAS Liberty Profile) keep complaining the method aspectOf is missing. May I know how could I solve this problem?</p>\n\n<p><strong>application-context.xml</strong></p>\n\n<pre><code>&lt;aop:aspectj-autoproxy/&gt;\n&lt;import resource=\"/context-file-A.xml\"/&gt;\n</code></pre>\n\n<p><strong>context-file-A.xml</strong></p>\n\n<pre><code>&lt;bean id=\"loggingAspect\" class=\"com.huahsin.LoggingAspect\" factory-method=\"aspectOf\"&gt;\n</code></pre>\n\n<p><strong>JAVA code</strong></p>\n\n<pre><code>@Aspect\npublic class LoggingAspect {\n   ...\n}\n</code></pre>\n"},{"tags":["java","spring","cron","cronexpression","crontrigger"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":94,"score":0,"question_id":12986840,"title":"cron expression with spring quartz","body":"<p>How to write cron expressions for below?</p>\n\n<ol>\n<li>first working day  of each month at 00:00:00</li>\n<li>4th working day of each month at 06:00:00</li>\n<li>00:00:00 on saturday</li>\n</ol>\n\n<p>Based on above cron expression, how to get start date and end date?</p>\n\n<ol>\n<li>first day of prior month and first day of present month</li>\n<li>1st of previous month and 3 rd working day of present month</li>\n<li>Date of monday on present week and date of staturday of present week.</li>\n</ol>\n"},{"tags":["java","spring","proxy","cglib"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":12987658,"title":"avoiding problems with spring cglib proxy","body":"<p>Using cglib proxies in spring causes:</p>\n\n<p>a) double invocation of constructor</p>\n\n<p>b) not allow to intercept a method invoked from another method</p>\n\n<p>but why spring creates a bean and then a proxy? is it possible to dynamically generate class that extends a specified bean class and then invoke constructor only once? that would solve a) and b) for public and protected methods. am i missing something?</p>\n"},{"tags":["spring","struts2","struts","themes"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12986566,"title":"Struts2 Template ... not found","body":"<p>I created a new  theme template for Struts2. </p>\n\n<p>So I placed following code into my struts.xml\n    </p>\n\n<p>Where is this template directory, so that I can put the new theme into it. I tried many locations and none of them worked.</p>\n\n<p>java.io.FileNotFoundException: Template /template/mynew/actionerror.ftl not found.</p>\n"},{"tags":["spring","tomcat"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12985256,"title":"tomcat and spring web app error while running","body":"<p>When I am trying to run my application I am getting the following error: I checked all my jar files they are good and web.xml is also good..is there anything I am missing..!!!</p>\n\n<pre><code>SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\njava.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:184)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\n    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\n    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)\n    at org.apache.catalina.core.StandardService.start(StandardService.java:525)\n    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:592)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\n</code></pre>\n"},{"tags":["spring","jdbc","spring-transactions","spring-annotations","springsource-tc-server"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12987040,"title":"Spring transaction annotation throws Rollback Exception for tcserver 7.0","body":"<p>I have a scenario, where I am using Spring Transaction management with JDBC and tcServer 6.0. Below snippet code </p>\n\n<pre><code>@Transactional(rollbackFor = Throwable.class)\npublic int dropDynamicModelTables(String namespace) {\n ....\n</code></pre>\n\n<p>some DML operations are performed and some of the tables are dropped. The above code was working absolutely fine , but when I use tcServer 7.0 version I get Exception as  <code>org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only </code></p>\n\n<p>Does anyone have any idea why  am I facing the problem. The only change is from tcServer 6.0 to tcServer 7.0. Is it issue with application or with the Server.</p>\n\n<p>It is very urgent for me as we have GA QA test on Monday. Any help would be really appreciated.</p>\n"},{"tags":["spring","unmanaged","components","aspectj","autowired"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":10477,"score":2,"question_id":1004278,"title":"Autowiring Unmanaged Beans Annotated With @Component","body":"<p>I want to use @AutoWired to inject a non-managed bean configured with @Component into a managed bean.  I'm pretty sure I have the configuration right, but for some reason I keep getting the exception:</p>\n\n<pre><code>No unique bean of type [foo.Baz] is defined: Unsatisfied dependency of type [class foo.Baz]: expected at least 1 matching bean\n</code></pre>\n\n<p>Based on the error, I'm guessing it's not able to find the Baz class, but I'm not sure why.  It's my understanding that the context:spring-configured element in the XML config was supposed to allow me to do this.  I also made sure to include the appropriate jar files (spring-weaving.jar and aspectjweaver.jar).</p>\n\n<p>Here's a simple example of my set up.</p>\n\n<p>My XML config:</p>\n\n<pre><code>&lt;beans ...&gt;\n    ...\n\n    &lt;context:annotation-config/&gt;\n    &lt;context:spring-configured/&gt;\n    &lt;context:component-scan base-package=\"foo\"/&gt;\n\n    &lt;bean id=\"bar\" class=\"foo.Bar\"/&gt;\n    ...\n&lt;/beans&gt;\n</code></pre>\n\n<p>I have one managed bean:</p>\n\n<pre><code>package foo;\n\npublic class Bar {\n\n    @Autowired\n    private Baz baz;\n\n    public void setBaz(Baz baz) {\n        this.baz = baz;\n    }\n\n    ...\n}\n</code></pre>\n\n<p>And one unmanaged bean:</p>\n\n<pre><code>package foo;\n\n@Component\npublic class Baz {\n    ...\n}\n</code></pre>\n\n<p>Is there something I'm missing?</p>\n\n<p><em>EDIT</em>: The log lists the beans its instantiating, and foo.Baz isn't one of them.  I don't know why it's not picking up the @Component annotated class.</p>\n"},{"tags":["java","spring","spring-aop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12979243,"title":"Very simple Spring AOP pointcut","body":"<p>The <code>create()</code> pointcut works just fine, but I can't get the <code>setStatus()</code> pointcut to work however I try... I've tried with <code>@Before</code>, <code>@After</code>, <code>@AfterReturning</code>, but nothing.</p>\n\n<p>According to the debugger, both methods are called.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.baz;\n\n@Aspect\npublic class ServiceAspect {\n   @Pointcut(\"execution(* com.foo.ServiceImpl.create(..))\")\n    public void create() {}\n\n    @Pointcut(\"execution(* com.bar.Subscription.setStatus(..))\")\n    public void setStatus() {}\n\n    // works\n    @AfterReturning(pointcut=\"create()\", returning=\"retVal\")\n    public void afterCreate(Object retVal) {\n        // omitted\n    }\n\n    // doesn't work\n    @Before(\"setStatus()\")\n    public void status() {\n        // omitted\n    }\n\n    // doesn't work\n    @Before(\"setStatus() &amp;&amp; args(status)\")\n    public void status(int status) {\n        // omitted\n    }\n\n    // doesn't work\n    @After(\"setStatus()\")\n    public void status() {\n        // omitted\n    }\n\n    // doesn't work\n    @AfterReturning(pointcut=\"setStatus()\")\n    public void status2() {\n        // omitted\n    }\n\n    // doesn't work\n    @AfterReturning(pointcut=\"setStatus()\", returning=\"retVal\")\n    public void afterSetStatus(Object retVal) {\n        // omitted\n    }\n\n    // doesn't work\n    @Around(\"setStatus()\")\n    public Object aroundStatus(ProceedingJoinPoint pjp) throws Throwable {\n        Object output = pjp.proceed();\n        return output;\n    }\n}\n</code></pre>\n\n<p>The methods looks like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Subscription extends FooBar implements Baz {\n    public void setStatus(int status) { /* ... */ }\n}\n\npublic class ServiceImpl implements Service {\n    public Subscription create(Session session, Subscription template) { /* ... */ }\n}\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>I've tried using both <code>&lt;aop:aspectj-autoproxy /&gt;</code>, <code>&lt;aop:aspectj-autoproxy proxy-target-class=\"true\"/&gt;</code> and <code>&lt;aop:aspectj-autoproxy proxy-target-class=\"false\"/&gt;</code>.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>I've tried calling <code>setStatus()</code> directly on <code>Subscription</code>, but it didn't catch that either.</p>\n\n<pre><code>Subscription subscription = new Subscription();\nsubscription.setStatus(1);\n</code></pre>\n"},{"tags":["spring","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12863039,"title":"JDBC - Multiple queries in NamedParameterJdbcTemplate","body":"<p>Is there any way I can execute more than 1 query using a <code>NamedParameterJdbcTemplate</code> in <em>one single</em> call?</p>\n"},{"tags":["java","spring","spring-mvc","build"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1579,"score":0,"question_id":10292103,"title":"some error while running spring mvc project","body":"<p>Hi Iam facing this error..can anybody help...please.springsource tool suite is the tool am using.these are the errors..</p>\n\n<pre><code>&gt;     Description   Resource    Path    Location    Type\n&gt;     Error occured processing XML 'Unable to load schema mappings from location [META-INF/spring.schemas]'. See Error Log for more\n&gt; details   root-context.xml    /masterdataqa/src/main/webapp/WEB-INF/spring    Unknown Spring\n&gt; Beans Problem\n</code></pre>\n\n<p>and </p>\n\n<blockquote>\n  <p>Description   Resource    Path    Location    Type Error occured processing XML\n  'Unable to load schema mappings from location\n  [META-INF/spring.schemas]'. See Error Log for more\n  details   servlet-context.xml /masterdataqa/src/main/webapp/WEB-INF/spring/appServlet Unknown Spring\n  Beans Problem</p>\n  \n  <p>Apr 24, 2012 10:44:31 AM org.apache.catalina.core.AprLifecycleListener\n  init INFO: The APR based Apache Tomcat Native library which allows\n  optimal performance in production environments was not found on the\n  java.library.path: C:\\Program\n  Files\\Java\\jdk1.6.0_31\\bin;C:\\WINDOWS\\Sun\\Java\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;D:\\oracle\\product\\10.2.0\\db_1\\bin;C:\\Program\n  Files\\Java\\jdk1.6.0_25\\bin;C:\\Program Files\\IBM\\Lotus\\Notes;C:\\Program\n  Files\\PHP;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\Program\n  Files\\Intel\\DMIX;C:\\Program Files\\Microsoft SQL\n  Server\\100\\DTS\\Binn\\;C:\\Program Files\\Microsoft SQL\n  Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;C:\\Program Files\\Microsoft\n  SQL Server\\100\\Tools\\Binn\\;C:\\Program Files\\Microsoft Visual Studio\n  9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0;C:\\Program\n  Files\\PHP;C:\\Program Files\\QuickTime\\QTSystem\\;C:\\Program\n  Files\\Heroku\\bin;C:\\Program Files\\ruby-1.9.3\\bin;C:\\Program\n  Files\\git\\bin;C:\\Program Files\\git\\cmd;D:\\apache-maven-3.0.4\\bin;;.\n  Apr 24, 2012 10:44:32 AM\n  org.apache.tomcat.util.digester.SetPropertiesRule begin WARNING:\n  [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting\n  property 'source' to 'org.eclipse.jst.jee.server:masterdataqa' did not\n  find a matching property. Apr 24, 2012 10:44:34 AM\n  org.apache.coyote.AbstractProtocol init INFO: Initializing\n  ProtocolHandler [\"http-bio-8080\"] Apr 24, 2012 10:44:34 AM\n  org.apache.coyote.AbstractProtocol init INFO: Initializing\n  ProtocolHandler [\"ajp-bio-8009\"] Apr 24, 2012 10:44:34 AM\n  org.apache.catalina.startup.Catalina load INFO: Initialization\n  processed in 4747 ms Apr 24, 2012 10:44:34 AM\n  org.apache.catalina.core.StandardService startInternal INFO: Starting\n  service Catalina Apr 24, 2012 10:44:34 AM\n  org.apache.catalina.core.StandardEngine startInternal INFO: Starting\n  Servlet Engine: Apache Tomcat/7.0.25 Apr 24, 2012 10:44:35 AM\n  org.apache.catalina.util.SessionIdGenerator createSecureRandom INFO:\n  Creation of SecureRandom instance for session ID generation using\n  [SHA1PRNG] took [140] milliseconds. Apr 24, 2012 10:44:36 AM\n  org.apache.catalina.loader.WebappClassLoader validateJarFile INFO:\n  validateJarFile(C:\\Documents and\n  Settings\\srinivasa\\Documents\\workspace-sts-2.9.0.RELEASE.metadata.plugins\\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\\masterdataqa\\WEB-INF\\lib\\servlet-api.jar)\n  - jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class Apr 24, 2012 10:44:36 AM\n  org.apache.catalina.startup.TaglibUriRule body INFO: TLD skipped. URI:\n  <a href=\"http://www.springframework.org/tags/form\" rel=\"nofollow\">http://www.springframework.org/tags/form</a> is already defined Apr 24,\n  2012 10:44:36 AM org.apache.catalina.startup.TaglibUriRule body INFO:\n  TLD skipped. URI: <a href=\"http://www.springframework.org/tags\" rel=\"nofollow\">http://www.springframework.org/tags</a> is already\n  defined Apr 24, 2012 10:44:36 AM\n  org.apache.catalina.startup.TaglibUriRule body INFO: TLD skipped. URI:\n  <a href=\"http://www.springframework.org/tags/form\" rel=\"nofollow\">http://www.springframework.org/tags/form</a> is already defined Apr 24,\n  2012 10:44:36 AM org.apache.catalina.startup.TaglibUriRule body INFO:\n  TLD skipped. URI: <a href=\"http://www.springframework.org/tags\" rel=\"nofollow\">http://www.springframework.org/tags</a> is already\n  defined Apr 24, 2012 10:44:37 AM\n  org.apache.catalina.core.ApplicationContext log INFO: Initializing\n  Spring root WebApplicationContext INFO :\n  org.springframework.web.context.ContextLoader - Root\n  WebApplicationContext: initialization started INFO :\n  org.springframework.web.context.support.XmlWebApplicationContext -\n  Refreshing Root WebApplicationContext: startup date [Tue Apr 24\n  10:44:37 IST 2012]; root of context hierarchy INFO :\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader -\n  Loading XML bean definitions from ServletContext resource\n  [/WEB-INF/spring/root-context.xml] ERROR:\n  org.springframework.web.context.ContextLoader - Context initialization\n  failed org.springframework.beans.factory.BeanDefinitionStoreException:\n  Unexpected exception parsing XML document from ServletContext resource\n  [/WEB-INF/spring/root-context.xml]; nested exception is\n  java.lang.IllegalStateException: Unable to load schema mappings from\n  location [META-INF/spring.schemas]    at\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)\n    at\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    at\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    at\n  org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)\n    at\n  org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)\n    at\n  org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)\n    at\n  org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)\n    at\n  org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)\n    at\n  org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\n    at\n  org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)\n    at\n  org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)\n    at\n  org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)\n    at\n  org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)\n    at\n  org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)\n    at\n  org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)\n    at\n  org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)\n    at\n  org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at\n  org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)\n    at\n  org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)     at\n  java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662) Caused by:\n  java.lang.IllegalStateException: Unable to load schema mappings from\n  location [META-INF/spring.schemas]    at\n  org.springframework.beans.factory.xml.PluggableSchemaResolver.getSchemaMappings(PluggableSchemaResolver.java:153)\n    at\n  org.springframework.beans.factory.xml.PluggableSchemaResolver.resolveEntity(PluggableSchemaResolver.java:110)\n    at\n  org.springframework.beans.factory.xml.DelegatingEntityResolver.resolveEntity(DelegatingEntityResolver.java:85)\n    at\n  org.springframework.beans.factory.xml.ResourceEntityResolver.resolveEntity(ResourceEntityResolver.java:74)\n    at\n  com.sun.org.apache.xerces.internal.util.EntityResolverWrapper.resolveEntity(EntityResolverWrapper.java:107)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLEntityManager.resolveEntity(XMLEntityManager.java:1100)\n    at\n  com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.resolveDocument(XMLSchemaLoader.java:595)\n    at\n  com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2432)\n    at\n  com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1782)\n    at\n  com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:705)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3104)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:922)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)\n    at\n  com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)\n    at\n  com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)\n    at\n  com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)\n    at\n  com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:235)\n    at\n  com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)\n    at\n  org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\n    at\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\n    ... 23 more Caused by: java.util.zip.ZipException: invalid LOC header\n  (bad signature)   at java.util.zip.ZipFile.read(Native Method)    at\n  java.util.zip.ZipFile.access$1200(ZipFile.java:31)    at\n  java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:459)   at\n  java.util.zip.ZipFile$1.fill(ZipFile.java:242)    at\n  java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141)\n    at java.io.FilterInputStream.read(FilterInputStream.java:116)   at\n  java.io.FilterInputStream.read(FilterInputStream.java:90)     at\n  java.util.Properties$LineReader.readLine(Properties.java:418)     at\n  java.util.Properties.load0(Properties.java:337)   at\n  java.util.Properties.load(Properties.java:325)    at\n  org.springframework.core.io.support.PropertiesLoaderUtils.loadAllProperties(PropertiesLoaderUtils.java:111)\n    at\n  org.springframework.beans.factory.xml.PluggableSchemaResolver.getSchemaMappings(PluggableSchemaResolver.java:144)\n    ... 46 more Apr 24, 2012 10:44:37 AM\n  org.apache.catalina.core.StandardContext listenerStart SEVERE:\n  Exception sending context initialized event to listener instance of\n  class org.springframework.web.context.ContextLoaderListener\n  org.springframework.beans.factory.BeanDefinitionStoreException:\n  Unexpected exception parsing XML document from ServletContext resource\n  [/WEB-INF/spring/root-context.xml]; nested exception is\n  java.lang.IllegalStateException: Unable to load schema mappings from\n  location [META-INF/spring.schemas]    at\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)\n    at\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    at\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    at\n  org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)\n    at\n  org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)\n    at\n  org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)\n    at\n  org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)\n    at\n  org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)\n    at\n  org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\n    at\n  org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)\n    at\n  org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)\n    at\n  org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)\n    at\n  org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)\n    at\n  org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)\n    at\n  org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)\n    at\n  org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)\n    at\n  org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at\n  org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)\n    at\n  org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)     at\n  java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662) Caused by:\n  java.lang.IllegalStateException: Unable to load schema mappings from\n  location [META-INF/spring.schemas]    at\n  org.springframework.beans.factory.xml.PluggableSchemaResolver.getSchemaMappings(PluggableSchemaResolver.java:153)\n    at\n  org.springframework.beans.factory.xml.PluggableSchemaResolver.resolveEntity(PluggableSchemaResolver.java:110)\n    at\n  org.springframework.beans.factory.xml.DelegatingEntityResolver.resolveEntity(DelegatingEntityResolver.java:85)\n    at\n  org.springframework.beans.factory.xml.ResourceEntityResolver.resolveEntity(ResourceEntityResolver.java:74)\n    at\n  com.sun.org.apache.xerces.internal.util.EntityResolverWrapper.resolveEntity(EntityResolverWrapper.java:107)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLEntityManager.resolveEntity(XMLEntityManager.java:1100)\n    at\n  com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.resolveDocument(XMLSchemaLoader.java:595)\n    at\n  com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2432)\n    at\n  com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1782)\n    at\n  com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:705)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3104)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:922)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)\n    at\n  com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)\n    at\n  com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)\n    at\n  com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)\n    at\n  com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)\n    at\n  com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:235)\n    at\n  com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)\n    at\n  org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\n    at\n  org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\n    ... 23 more Caused by: java.util.zip.ZipException: invalid LOC header\n  (bad signature)   at java.util.zip.ZipFile.read(Native Method)    at\n  java.util.zip.ZipFile.access$1200(ZipFile.java:31)    at\n  java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:459)   at\n  java.util.zip.ZipFile$1.fill(ZipFile.java:242)    at\n  java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141)\n    at java.io.FilterInputStream.read(FilterInputStream.java:116)   at\n  java.io.FilterInputStream.read(FilterInputStream.java:90)     at\n  java.util.Properties$LineReader.readLine(Properties.java:418)     at\n  java.util.Properties.load0(Properties.java:337)   at\n  java.util.Properties.load(Properties.java:325)    at\n  org.springframework.core.io.support.PropertiesLoaderUtils.loadAllProperties(PropertiesLoaderUtils.java:111)\n    at\n  org.springframework.beans.factory.xml.PluggableSchemaResolver.getSchemaMappings(PluggableSchemaResolver.java:144)\n    ... 46 more Apr 24, 2012 10:44:37 AM\n  org.apache.catalina.core.StandardContext startInternal SEVERE: Error\n  listenerStart Apr 24, 2012 10:44:37 AM\n  org.apache.catalina.core.StandardContext startInternal SEVERE: Context\n  [/masterdataqa] startup failed due to previous errors Apr 24, 2012\n  10:44:37 AM org.apache.catalina.core.ApplicationContext log INFO:\n  Closing Spring root WebApplicationContext Apr 24, 2012 10:44:37 AM\n  org.apache.coyote.AbstractProtocol start INFO: Starting\n  ProtocolHandler [\"http-bio-8080\"] Apr 24, 2012 10:44:37 AM\n  org.apache.coyote.AbstractProtocol start INFO: Starting\n  ProtocolHandler [\"ajp-bio-8009\"] Apr 24, 2012 10:44:37 AM\n  org.apache.catalina.startup.Catalina start INFO: Server startup in\n  2790 ms</p>\n</blockquote>\n"},{"tags":["spring","hibernate","jpa-2.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12985269,"title":"Best Audit trail mechanism for Spring + JPA + Hibernate application","body":"<p>I am using Spring 3.0 + JPA2 + Hibernate 4.1 with MySQL 5.5\nI am looking to record 5 fields in my tables for audit trail purposes - lastModifiedByUser, lastModifiedTime, createdByUser, createdTime, isActive</p>\n\n<p>I am not deleting any data from the tables, just marking them off as isActive false.</p>\n\n<p>What is the best tool to help me record these audit fields in my tables ?\nI am wondering if DB triggers are not the best idea, specially since modifying / creating user  name is also recorded.</p>\n"},{"tags":["spring","hibernate","bean-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12985206,"title":"How to detect if Spring Validation passed?","body":"<p>I am trying to use Spring 3.0 validations using annotations.\n<a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#core-convert\" rel=\"nofollow\">http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#core-convert</a></p>\n\n<p>My code looks like in the documentation:</p>\n\n<pre><code>@Controller\npublic class MyController {\n\n    @InitBinder\n    protected void initBinder(WebDataBinder binder) {\n       binder.setValidator(new FooValidator());\n    }\n\n    @RequestMapping(\"/foo\", method=RequestMethod.POST)\n    public void processFoo(@Valid Foo foo) { ... }\n\n}\n\npublic class PersonValidator implements Validator {\n\n    /**\n     * This Validator validates just Person instances\n     */\n   public boolean supports(Class clazz) {\n    return Person.class.equals(clazz);\n  }\n\npublic void validate(Object obj, Errors e) {\n    ValidationUtils.rejectIfEmpty(e, \"name\", \"name.empty\");\n}\n</code></pre>\n\n<p>}</p>\n\n<p>How do I tell in my RequestMapping method if the validation passed or not?</p>\n"},{"tags":["spring","rest","https","spring-integration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":215,"score":0,"question_id":9555139,"title":"Spring integration. Want to use HTTPS","body":"<p>I'm using Spring Integration - HTTP Adaptor.</p>\n\n<p>Now, I want to make it HTTPS. Please let me know how to implement it.</p>\n"},{"tags":["java","spring","spring-mvc","servlet-3.0"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12984380,"title":"Loading an hierarchy of ApplicationContexts in WebApplicationInitializer","body":"<p>I'm using Servlet 3 (Tomcat 7) + Spring 3.1, and trying to load my webapp using WebApplicationInitializer.</p>\n\n<p>In the usual examples I've seen, you have a Root ApplicationContext, loaded with ContextLoaderListener, and a servlet ApplicationContext, loaded with DispatcherServlet.</p>\n\n<p>(To be clear, I'm not talking about web.xml, but programatically, inside WebApplicationInitializer).</p>\n\n<p>Now, I'd like to have a hierarchy of ApplicationContexts, let's say:</p>\n\n<p>Root -> AppContext1 -> AppContext2 -> ServletAppContext</p>\n\n<p><strong>-></strong> denotes Parent -> Child relationship. Each AppContext can access its own beans and the ones of its ancestors.</p>\n\n<p>For an example:</p>\n\n<ul>\n<li>Root defines properties, DAO and TX. </li>\n<li>AppContext1 defines JPA and Spring Data repositories.</li>\n<li>AppContext2 defines JMS and Spring integration pipes.</li>\n<li>ServletAppContext defines Controllers and views.</li>\n</ul>\n\n<p>My first approach was to add the Root ApplicationContext to the ContextLoaderListener, Then set it as a parent of AppContext1. Set AppContext1 as a parent of AppContext2. Set AppContext2 as a parent of ServletAppContext. And finally associate ServletAppContext with the DispatcherServlet.</p>\n\n<p>The thing is, at shutdown time, DispatcherServlet closes ServletAppContext, but it does not propagate. AppContext1 and AppContext2 are never closed to their beans are never released. So I'm guessing I'm using a wrong approach.</p>\n\n<p>I tried associating AppContext2 to ContextLoaderListener instead of Root. In this case, AppContext2 closes, but AppContext1 and Root remain open.</p>\n\n<p>I also cannot have 3 ContextLoaderListeners, 1 for each of my AppContexts (Root, 1, 2).</p>\n\n<p>My question is, what's the right approach for this situation? I'm open to suggestions.  </p>\n"},{"tags":["spring","jpa","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12982606,"title":"Spring 3 Form Validation link to JPA Entity","body":"<p>I am planning to use Spring 3 validations in my Web Application. I was considering that since I already have the properties of my JPA entities annotated with some standard validations like nullable=\"false\" or length=\"50\". Is there any way I could reuse JPA validations in Spring 3 Backing forms?</p>\n\n<p>I feel a better idea would be to recode the validations on the Spring form as we can have more helpful error messages. What do you think -\nIs it possible in a clean way to reuse JPA validations in Spring forms?\nWhat is a better design - reimplement the validations or reuse the basic ones and code more specific validations separately?</p>\n"},{"tags":["java","jquery","spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12984176,"title":"\"Bad Request\" when attempting to send array to spring mvc controller","body":"<p>I saw related questions and tried those none of those helped. I'm sending POST requst with jquery like this :</p>\n\n<pre><code>var data = {};          \n            //this works every time and it's not issue\n            var statusArray = $(\"#status\").val().split(',');  \n            var testvalue = $(\"#test\").val();\n\n                     data.test = testvalue;\n            data.status = statusArray ;\n\n             $.post(\"&lt;c:url value=\"${webappRoot}/save\" /&gt;\", data, function() {\n        })\n</code></pre>\n\n<p>On the controller side I've tried following :</p>\n\n<pre><code>public void saveStatus(ModelMap model, Principal principal, HttpSession session, final HttpServletResponse response, @RequestParam String test, @RequestBody String [] status) {\n\n        //I never get to this point, but when I set statusArray to required false test variable is being populated correctly\n        }\n\n\npublic void saveStatus(ModelMap model, Principal principal, HttpSession session, final HttpServletResponse response, @RequestParam String test, @RequestParam String [] status) {\n\n        //I never get to this point, but when I set statusArray to required false test variable is being populated correctly\n        }\n\n\n\npublic void saveStatus(ModelMap model, Principal principal, HttpSession session, final HttpServletResponse response, @RequestParam String test, @RequestParam(\"status\") String [] status) {\n\n        //I never get to this point, but when I set statusArray to required false test variable is being populated correctly\n        }\n\n\npublic void saveStatus(ModelMap model, Principal principal, HttpSession session, final HttpServletResponse response, @RequestParam String test, @RequestParam(name=\"status\") String [] status) {\n\n        //I never get to this point, but when I set statusArray to required false test variable is being populated correctly\n        }\n</code></pre>\n\n<p>none of these worked I'm wondering what I'm doing wrong, whatever I do I get <code>Bad request</code></p>\n"},{"tags":["spring","spring-mvc","dependency-injection","autowired"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12983974,"title":"Spring 3 MVC BeanCreationException - Class is an interface","body":"<p>I'm relatively new to Spring and even newer to annotations and autowiring. I can't figure out how to wire my beans. The idea is to switch between CacheService and NoCacheService by changing the application-config.xml but I cannot get past the exception. </p>\n\n<p>Exception</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'Service' defined in ServletContext resource [/WEB-INF/application-config.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [webapp.Services]: Specified class is an interface\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\norg.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\norg.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\norg.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\norg.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\norg.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)\n&lt;snip&gt;\n</code></pre>\n\n<p>Classes:</p>\n\n<pre><code>package webapp;\ninterface Service {\n    List&lt;String&gt; get();\n}\n\n@Service(\"cache\")\nCacheService implements Service {\n    //from cache then from IO bound source\n    @Autowired\n    public CacheService(int v1, int v2)\n    ...\n}\n\n@Service(\"nocache\")\nNoCacheService implements Service {\n    //from IO bound source\n    ....\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>@RequestMapping(\"/\")\n@Controller\npublic class ServiceController {\n\n    @Autowired\n    Service service;\n    ...\n}\n</code></pre>\n\n<p>application-config xml:</p>\n\n<pre><code>&lt;mvc:annotation-driven /&gt;\n&lt;context:component-scan base-package=\"webapp\"/&gt;\n\n&lt;beans:bean id=\"Service\" class=\"webapp.Service\"&gt;\n    &lt;beans:property name=\"cache\" ref=\"cache\" /&gt;\n&lt;/beans:bean&gt;\n\n\n&lt;beans:bean id=\"cache\" class=\"webapp.CacheService\"&gt;\n    &lt;beans:constructor-arg index=\"0\" value=\"50\"/&gt; &lt;!-- v1 --&gt;\n    &lt;beans:constructor-arg index=\"1\" value=\"100\"/&gt; &lt;!-- v2 --&gt;\n&lt;/beans:bean&gt;\n\n&lt;beans:bean id=\"nocache\" class=\"webapp.NoCacheService\"&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n"},{"tags":["spring","jaxb","http-post"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":12977501,"title":"415 Unsupported Media type JAXB in Spring","body":"<p><img src=\"http://i.stack.imgur.com/JuhFB.png\" alt=\"My headers for POST setup\">\n<img src=\"http://i.stack.imgur.com/KZbQt.png\" alt=\"Main POST setup\"></p>\n\n<p>I'm a bit of stuck here. I am trying to POST from firefox's poster a small snippet of XML. </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;IntellexEvent&gt;\n &lt;RuleName&gt;a rule name&lt;/RuleName&gt;\n &lt;/IntellexEvent&gt;\n</code></pre>\n\n<p>Simple enough, now my class for <code>IntellexEvent</code> is</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = \"IntellexEvent\")\npublic class IntellexEvent {    \n // @XmlElement(name = \"RuleName\")\n    private String RuleName;\n    public String getRuleName()\n    {\n        return RuleName;\n    }\n\n    public void setRuleName(String RuleName)\n    {\n         this.RuleName = RuleName;\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>My Controller is...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\n\n@RequestMapping(\"/cace/**\")\npublic class CaceController \n{\n    @Autowired\n    IUserService userService;\n\n    public CaceController()\n    {\n\n    }\n\n@RequestMapping(value = \"/cace/postXML\", method = RequestMethod.POST)\n    public Result postXML(@RequestBody String intellexEvent) throws Exception\n    {   \n        String temp = intellexEvent;\n\n        Result result = new Result();\n        result.setStatusCode(200);\n        result.setSuccess(true);\n            return result;\n    }\n</code></pre>\n\n<p>} </p>\n\n<p>--EDITED -- \nSo here I have the @RequestBody as a String. What I wanted was for it to be automatically marshalled into an IntellexEvent.... As a string I am able to hit my backend on the POST, when I change the String to an IntellexEvent I get a 415 error.</p>\n\n<p>I just want to be able to hit my backend, I've tried GETs, and I hit just fine, (I didn't include them in my controller here) what am I missing here? In spring-mvc-servlet.xml I've defined the jaxb2 marshaller. If you need more information just ask, thanks in advance guys!</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":123,"score":2,"question_id":12869014,"title":"web service exposed by extending SpringBeanAutowiringSupport is failing to inject @Autowired dependencies","body":"<p>My web service exposed by extending SpringBeanAutowiringSupport is failing to inject @Autowired dependencies.</p>\n\n<p>Web service deploys fine and I'm able to invoke the @WebMethod but I'm getting a NullPointerException due to the failed injection.</p>\n\n<p>I put <code>System.out.println(\"Consructing XmlContactMapper...\");</code> in the constructor of XmlContactMapper (one of my dependencies with @Autowired).  When I deploy the web service I see the debug line so I know the constructor is being invoked.  But for some reason an instance of XmlContactMapper isn't being injected into my ContactServiceImpl xmlMapper property.</p>\n\n<p>Any ideas on what I'm doing wrong?</p>\n\n<p>Using...</p>\n\n<ul>\n<li>Spring 3.0.5.RELEASE</li>\n<li>GlassFish 3.1</li>\n<li>jaxws-rt 2.1.4</li>\n</ul>\n\n<h2>web.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xmlns=\"http://java.sun.com/xml/ns/javaee\" \n         xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n         id=\"WebApp_ID\" version=\"3.0\" metadata-complete=\"true\"&gt;\n\n    &lt;display-name&gt;contact-sib&lt;/display-name&gt;\n\n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;           \n            classpath:/config/bean-config.xml\n        &lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;JaxWsEndpoint&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;com.sun.xml.ws.transport.http.servlet.WSServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;JaxWsEndpoint&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/services/contact&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n\n&lt;/web-app&gt;\n</code></pre>\n\n<h2>sun-jaxws.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;endpoints xmlns=\"http://java.sun.com/xml/ns/jax-ws/ri/runtime\"\n           version=\"2.0\"&gt;\n\n  &lt;endpoint name=\"ContactService\" \n            implementation=\"com.bb.sc.sib.contact.ContactServiceImpl\" \n            url-pattern=\"/services/contact\"/&gt;\n\n&lt;/endpoints&gt;\n</code></pre>\n\n<h2>bean-config.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context =\"http://www.springframework.org/schema/context\"\n       xmlns:tx = \"http://www.springframework.org/schema/tx\"\n       xmlns:p = \"http://www.springframework.org/schema/p\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n                           http://www.springframework.org/schema/context\n                           http://www.springframework.org/schema/context/spring-context-3.0.xsd\n                           http://www.springframework.org/schema/tx\n                           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"com.bb.sc.sib.contact\"/&gt;\n    &lt;context:annotation-config/&gt;\n\n    &lt;bean id=\"xmlMapper\" class=\"com.bb.sc.sib.contact.XmlContactMapper\"/&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<h2>web service</h2>\n\n<pre><code>@WebService (endpointInterface=\"com.bb.sc.sei.contact.ContactService\", serviceName=\"JaxWsContactService\")\npublic class ContactServiceImpl extends SpringBeanAutowiringSupport implements ContactService {\n    @Autowired\n    private ContactComponent contactComponent;\n    @Autowired\n    private MapperFacade xmlMapper;\n</code></pre>\n\n<h2>Logging</h2>\n\n<pre><code>INFO: 10:56:40.073 [admin-thread-pool-4848(419)] DEBUG o.s.w.c.s.SpringBeanAutowiringSupport - Current WebApplicationContext is not available for processing of ContactServiceImpl: Make sure this class gets constructed in a Spring web application. Proceeding without injection.\n</code></pre>\n"},{"tags":["spring","junit","context"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2389,"score":2,"question_id":2425015,"title":"How to access Spring context in jUnit tests annotated with @RunWith and @ContextConfiguration?","body":"<p>I have following test class</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = {\"/services-test-config.xml\"})\npublic class MySericeTest {\n\n  @Autowired\n  MyService service;\n...\n\n}\n</code></pre>\n\n<p>Is it possible to access <code>services-test-config.xml</code> programmatically in one of such methods? Like:</p>\n\n<pre><code>ApplicationContext ctx = somehowGetContext();\n</code></pre>\n"},{"tags":["java","spring","security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12983380,"title":"How do I utilize Spring 3's Security with SSO?","body":"<p>We are using Spring 3 framework and we have a SSO (Single sign on) provider which redirects to our app passing special tokens in the request to indicate the user is authenticated. </p>\n\n<p>I would like to use Spring security to handle stuff like denying access to pages unless the user is authenticated, but I'd also like to be able to bypass this on my local machine while developing the application.</p>\n\n<p>So in the production scenario, I expect the SSO to redirect to our app, specifically to a \"/login.html\" target which is supposed to somehow trigger a custom class I write to pull the expected login info from request and load up the user's info from our database and put it in session for the rest of the app to use.</p>\n\n<p>Then in the development scenario I need to bypass SSO by just being able to create a session using a custom login page and then load the user's info from database just as above.</p>\n\n<p>I am trying to figure out how to do it myself but I can't seem to wrap my head around all of it. </p>\n\n<p>Any info on how to accomplish this even just high level kind of road map would be a huge help</p>\n"},{"tags":["java","spring","jsf","jpa","mdi"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12983292,"title":"Multi Document Interface (MDI) for JavaServer Faces and Spring, dynamic loading of facelets fragment","body":"<p>I am trying to architecture and develop MDI interface for single-page JSF application, where each document or report is provided as a new tab in TabView control. But there are some design issues that cause some concern.</p>\n\n<p>First - how to create dynamically new Tab in TabView? I am trying to use PrimeFaces <a href=\"http://www.primefaces.org/showcase/ui/tabviewDynamic.jsf\" rel=\"nofollow\">http://www.primefaces.org/showcase/ui/tabviewDynamic.jsf</a> but it seems to me that if the new tab is created (e.g. added to the collection over which PrimeFaces iterates and creates tabs), then one should refresh (e.g. using Ajax) whole TabView and not just to dynamically add new tab.</p>\n\n<p>Maybe this is more general question - how to dynamically insert one facelets page fragment into another page. One can esily imagine how this can be done in pure HTML/JavaScript application - e.g. using DOM or JQuery. But are there some dynamic content capabilities of JSF with  the similar effect? If such capabilities existed then it could be possible to design and test each document and report as a separate page and only at the end one can provide them for inclusion in TabView as a separate tabs.</p>\n\n<p>Second question is about session - it could be great to run each tab in its own scope (some kind of session of transaction) - is it possible with the combination of JavaServer Faces and Spring (using JPA for data access).</p>\n\n<p>But maybe JavaServerFaces are not relevant anymore - e.g. maybe good application can be made with pure HTML/JavaScript that simply consume and use remote web services... But Java certainly has some reliability and appeal.</p>\n"},{"tags":["spring","spring-security","saml","saml-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12814802,"title":"SAML role/permission","body":"<p>I'm using saml on my spring project. I did authentication but I couldn't use\nrole or permission part. I want do this. I can't find any example about\nthis.</p>\n\n<p>Can you help me about this problem?</p>\n\n<p>Best Regards ,\nEzgi</p>\n"},{"tags":["spring","spring-security","saml","saml-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12836917,"title":"SAML logout and lost session","body":"<p>I'm doing a sample webapp project, use spring and  saml on it. I did login part, so when I run this project ,its move direclty to my identity server and there I login on this server than go to the my project home page. But I couldnt do logout part. When I click my project logout button , logout page is coming but my seesion isn't lost. So if I want login again, this time project dont go the identity server login page. Because, actually according to my project, I dont logout on project. I want logout on identity server , so want to lost my session. </p>\n\n<p>How can I do it?</p>\n\n<p>Thank you so much for now,\nEzgi, </p>\n"},{"tags":["java","spring","type-conversion","spring-3"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":534,"score":4,"question_id":7738305,"title":"Spring conversion service - from List<A> to List<B>","body":"<p>I have registered a custom conversion service in a Spring 3 application. It works well for POJOs but it does not work on Lists.</p>\n\n<p>For example, I convert from <code>String</code> to <code>Role</code> and it works fine, but not for <code>List&lt;String&gt;</code> to <code>List&lt;Role&gt;</code>.</p>\n\n<p>All kind of <code>ClassCastExceptions</code> fly in the application when trying to inject Lists, no matter what they contain. The Conversion service calls the convertor for <code>List&lt;String&gt;</code> to <code>List&lt;Role&gt;</code> for all.</p>\n\n<p>This makes sense if you think about it. Type erasure is the culprit here and the convertion service actually sees <code>List</code> to <code>List</code>.</p>\n\n<p>Is there a way to tell the conversion service to work with generics?</p>\n\n<p>What other options do I have?</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12981754,"title":"Spring MVC Relative Redirect from HttpServletResponse","body":"<p>Given this methodology of relative redirect to another controller:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/someController\")\npublic class MyController {\n    @RequestMapping(\"/redirme\")\n    public String processForm(ModelMap model) {            \n        return \"redirect:/someController/somePage\";\n    }\n}\n</code></pre>\n\n<p>How can I simulate that same <em>relative</em> redirect given that I'm within an interceptor? </p>\n\n<pre><code>public class MyInterceptor extends HandlerInterceptorAdapter {\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception\n    {\n        response.sendRedirect(\"/someController/somePage\");\n        return false;\n    }\n}\n</code></pre>\n\n<p>Now with the interceptor, i will end up at application.com/someController/somePage when I really want to be at application.com/deployment/someController/somePage. Surely there must be a 'spring' solution for this?</p>\n"},{"tags":["spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12980809,"title":"spring rest - post request body","body":"<p>I have a method for spring rest for POST method.</p>\n\n<pre><code>public @ResponseBody User createUser(@RequestBody User user, \n                                     @RequestBody String subscriptionId, \n                                     HttpServletRequest request,\n                                     HttpServletResponse response);\n</code></pre>\n\n<p>I am trying to test it in the rest client, but I am not sure how to build a request body. User object has username, timezone, but the second variable is just a string. </p>\n\n<p>When I use this for request, it doesn't work.</p>\n\n<pre><code>{\"username\":\"tester@example.com\", \"timezone\": \"EST\", \"subscriptionId\" : \"1234\"}\n</code></pre>\n\n<p>can anybody tell me how to build a request?</p>\n"},{"tags":["sql-server","spring","hibernate","junit","rollback"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12713973,"title":"Junit test not rolling back transaction on sqlserver","body":"<p>I have created an integration test of a service that is not rolling back the transaction after completion. I know this from looking at the db and from my the error I get when I run the test a second time. I've been googling this issue all morning and feel I have everything set properly. This is a hibernate/jpa app writing to SQLServer 2008. I am not sure where else to look. Snippet below.</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@TestExecutionListeners({\n        DependencyInjectionTestExecutionListener.class,\n        DirtiesContextTestExecutionListener.class,\n        TransactionalTestExecutionListener.class })\n@TransactionConfiguration(defaultRollback=true)\n@Transactional // extend transactional boundary to test class so that automatic rollback works properly\n@ContextConfiguration(locations = {\n        \"file:./src/main/resources/AghostMobile.Service-business.service-context.xml\",\n        \"file:./src/main/resources/AghostMobile.Service-service-context.xml\",\n        \"file:./src/main/resources/AghostMobile.Service-dao-context.xml\"})\npublic class ColorSchemeMigrationServiceIntTest {\n\n    /**\n     * The service being tested, injected by Spring\n     *\n     */\n    @Autowired\n    ColorSchemeMigrationService service;\n\n    /**\n     * The helper services, injected by Spring.\n     *\n     */\n    @Autowired\n    protected WebsitecolorpaletteuserdefinedService userPaletteService;\n    @Test\n    public void testSaveColorPalette() {\n        Integer mobileWebsiteId = Integer.valueOf(386);\n        Integer custId = Integer.valueOf(15);\n        Integer siteId = Integer.valueOf(2);\n        String user = \"Test\";\n\n        Websitecolorpaletteuserdefined palette = service.translateColorScheme(mobileWebsiteId, custId, siteId, user);\n\n        service.saveColorPalette(palette);\n\n        Websitecolorpaletteuserdefined response = userPaletteService.findWebsitecolorpaletteuserdefinedByCustIdAndSiteId(custId, siteId);\n\n        assertNotNull(\"User palette not found.\", response);\n        assertEquals(\"CustId is not the expected value.\", custId, response.getCustId());\n        assertEquals(\"SiteId is not the expected value.\", siteId, response.getSiteId());\n    }\n</code></pre>\n\n<p>Currently, I have the following beans defined:</p>\n\n<pre><code>&lt;!-- ******************************************************************** --&gt;\n&lt;!-- Setup the transaction manager --&gt;\n&lt;!-- ******************************************************************** --&gt;\n    &lt;!-- Using Atomikos Transaction Manager --&gt;\n    &lt;bean id=\"atomikosTransactionManager\" class=\"com.atomikos.icatch.jta.UserTransactionManager\" init-method=\"init\"\n        destroy-method=\"close\"&gt;\n        &lt;property name=\"forceShutdown\" value=\"true\" /&gt;\n        &lt;property name=\"startupTransactionService\" value=\"true\" /&gt;\n        &lt;property name=\"transactionTimeout\" value=\"60\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"atomikosUserTransaction\" class=\"com.atomikos.icatch.jta.UserTransactionImp\" /&gt;\n    &lt;!-- Configure the Spring framework to use JTA transactions from Atomikos --&gt;\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.transaction.jta.JtaTransactionManager\"&gt;\n        &lt;property name=\"transactionManager\" ref=\"atomikosTransactionManager\" /&gt;\n        &lt;property name=\"userTransaction\" ref=\"atomikosUserTransaction\" /&gt;\n        &lt;property name=\"transactionSynchronizationName\" value=\"SYNCHRONIZATION_ON_ACTUAL_TRANSACTION\" /&gt;\n    &lt;/bean&gt;\n&lt;!-- ******************************************************************** --&gt;\n&lt;!-- Setup a data source --&gt;\n&lt;!-- ******************************************************************** --&gt;\n&lt;!-- Using Apache DBCP Data Sources --&gt;\n&lt;bean name=\"hostDataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\" &gt;\n    &lt;property name=\"driverClassName\" value=\"${My_JDTs_to_AgHost_Host_scheme.connection.driver_class}\" /&gt;\n    &lt;property name=\"username\" value=\"${My_JDTs_to_AgHost_Host_scheme.connection.username}\" /&gt;\n    &lt;property name=\"password\" value=\"${My_JDTs_to_AgHost_Host_scheme.connection.password}\" /&gt;\n    &lt;property name=\"url\" value=\"${My_JDTs_to_AgHost_Host_scheme.connection.url}\" /&gt;\n    &lt;property name=\"maxIdle\" value=\"${My_JDTs_to_AgHost_Host_scheme.minPoolSize}\" /&gt;\n    &lt;property name=\"maxActive\" value=\"${My_JDTs_to_AgHost_Host_scheme.maxPoolSize}\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- ******************************************************************** --&gt;\n&lt;!-- Setup each persistence unit --&gt;\n&lt;!-- ******************************************************************** --&gt;\n            &lt;!-- Configure a JPA vendor adapter --&gt;\n            &lt;bean id=\"My_JDTs_to_AgHost_Host_schemeJPAVendorAdapter\" class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n                &lt;property name=\"showSql\" value=\"${My_JDTs_to_AgHost_Host_scheme.show_sql}\" /&gt;\n                &lt;property name=\"generateDdl\" value=\"${My_JDTs_to_AgHost_Host_scheme.generateDdl}\" /&gt;\n                &lt;property name=\"databasePlatform\" value=\"${My_JDTs_to_AgHost_Host_scheme.dialect}\" /&gt;\n            &lt;/bean&gt;\n            &lt;!-- EntityManager Factory that brings together the persistence unit, datasource, and JPA Vendor --&gt;\n            &lt;bean id=\"My_JDTs_to_AgHost_Host_scheme\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n                &lt;property name=\"dataSource\" ref=\"hostDataSource\" /&gt;\n                &lt;property name=\"persistenceUnitName\" value=\"My_JDTs_to_AgHost_Host_scheme\" /&gt;\n                &lt;property name=\"jpaVendorAdapter\" ref=\"My_JDTs_to_AgHost_Host_schemeJPAVendorAdapter\" /&gt;\n                    &lt;property name=\"jpaPropertyMap\"&gt;\n                        &lt;map&gt;\n                                    &lt;entry key=\"hibernate.transaction.manager_lookup_class\" value=\"com.atomikos.icatch.jta.hibernate3.TransactionManagerLookup\" /&gt;\n                                    &lt;!-- &lt;entry key=\"hibernate.transaction.factory_class\" value=\"org.hibernate.transaction.JTATransactionFactory\" /&gt; --&gt;\n                                    &lt;entry key=\"hibernate.connection.release_mode\" value=\"on_close\" /&gt;\n                        &lt;/map&gt;\n                    &lt;/property&gt;\n            &lt;/bean&gt;\n</code></pre>\n\n<p>This does allow me to update my data, but does not rollback my transaction. So, I am using a transaction manager,  org.springframework.jdbc.datasource.DataSourceTransactionManager. I replaced the three beans in the \"Setup transaction manager\" block with:</p>\n\n<pre><code>    &lt;bean id=\"transactionManager\"\n        class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n        &lt;property name=\"dataSource\" ref=\"hostDataSource\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>This left me with tests failing with <em>IllegalStateException: This method needs a transaction for the calling thread and none exists.</em> The exception also stated:</p>\n\n<pre><code>Possible causes: either you didn't start a transaction,\nit rolledback due to timeout, or it was committed already.\nACTIONS: You can try one of the following: \n1. Make sure you started a transaction for the thread.\n2. Make sure you didn't terminate it yet.\n3. Increase the transaction timeout to avoid automatic rollback of long transactions;\n   check [http://www.atomikos.com/Documentation/JtaProperties][1] for how to do this.\n</code></pre>\n\n<p>I'll admit to not having read that document yet and will do so after posting these updates. I have also found this thread, which looked promising: <a href=\"http://stackoverflow.com/questions/10897015/persistence-unit-different-hibernate-transaction-manager-lookup-class-property\">persistence-unit, different hibernate.transaction.manager_lookup_class property</a>. You can see that commented out in bean My_JDTs_to_AgHost_Host_scheme. This failed pretty miserably. But, perhaps I didn't use it properly.</p>\n\n<p>I also found this thread: <a href=\"http://stackoverflow.com/questions/3128111/spring-jta-jpa-dao-integration-test-doesnt-rollback\">Spring/JTA/JPA DAO integration test doesn&#39;t rollback?</a>. This looks quite promising, but again I am not sure how to use what it is telling me.</p>\n"},{"tags":["java","spring","jdbc","batch-processing","spring-batch"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":12979229,"title":"Processing millions of database records in Java","body":"<p>I have a requirement to write a batch job that fetches rows from a database table and based on a certain conditions, write to other tables or update this row with a certain value. We are using spring and jdbc to fetch the result set and iterate through and process the records using a standalone java program that is scheduled to run weekly. I know this is not the right way to do it, but we had to do it as a temporary solution. As the records grow into millions, we will end up with out of memory exceptions, so I know this is not the best approach.</p>\n\n<p>Can any of you recommend what is the best way to deal with such a situation?</p>\n\n<p>Use Threads and fetch 1000 records per thread and process them in parallel?</p>\n\n<p>(OR)</p>\n\n<p>Use any other batch mechanism to do this (i know there is spring-batch but have never used this)</p>\n\n<p>(OR)</p>\n\n<p>Any other ideas?</p>\n"},{"tags":["spring","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12979426,"title":"Multiple Dispatcher servlet example and configuration in Spring","body":"<p>Can some one give me a link for multiple dispatcher servlet example?. I am trying to run two applications in a single Spring MVC. I have checked different examples in google and written everything in web.xml, wrote two *-servlet.xml files. I have different jsp pages. Specified different url's for the application. But still one of the application is not running?</p>\n\n<p>Any brief example link or can anyone atleast tell me the configuration files required when writing two dispatcher servlets in a Spring MVC.</p>\n\n<p>Thank You\nSam</p>\n"},{"tags":["spring","spring-mvc","mime-types"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12977368,"title":"How to change the content type in exception handler","body":"<p>Suppose I have a controller that serves <code>GET</code> request and returns bean to be serialized to JSON and also provides an exception handler for <code>IllegalArgumentException</code> that can be raised in service:</p>\n\n<pre><code>@RequestMapping(value = \"/meta/{itemId}\", method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\n@ResponseBody\npublic MetaInformation getMetaInformation(@PathVariable int itemId) {\n    return myService.getMetaInformation(itemId);\n}\n\n@ExceptionHandler(IllegalArgumentException.class)\n@ResponseStatus(value = HttpStatus.BAD_REQUEST)\n@ResponseBody\npublic String handleIllegalArgumentException(IllegalArgumentException ex) {\n    return ExceptionUtils.getStackTrace(ex);\n}\n</code></pre>\n\n<p>Message convertors are:</p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters&gt;\n        &lt;bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\" /&gt;\n        &lt;bean class=\"org.springframework.http.converter.StringHttpMessageConverter\" /&gt;\n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>Now when I request the given URL in browser I see the correct JSON reply. However if exception is raised, the stringified exception is converted into JSON as well, but I would love it to be processed by <code>StringHttpMessageConverter</code> (resulting <code>text/plain</code> mime type). How can I go it?</p>\n\n<p>To make the picture more complete (and complicated), suppose I also have the following handler:</p>\n\n<pre><code>@RequestMapping(value = \"/version\", method = RequestMethod.GET)\n@ResponseBody\npublic String getApplicationVersion() {\n    return \"1.0.12\";\n}\n</code></pre>\n\n<p>This handler allows the return string to be serialized by both <code>MappingJackson2HttpMessageConverter</code> and <code>StringHttpMessageConverter</code> depending in passed <code>Accept-type</code> by the client. The return types and values should be as following:</p>\n\n<pre>\n+----+---------------------+-----------------------+------------------+-------------------------------------+\n| NN | URL                 | Accept-type           | Content-type     | Message converter                   |\n|    |                     | request header        | response header  |                                     |\n+----+---------------------+-----------------------+------------------+-------------------------------------+\n| 1. | /version            | text/html; */*        | text/plain       | StringHttpMessageConverter          |\n| 2. | /version            | application/json; */* | application/json | MappingJackson2HttpMessageConverter |\n| 3. | /meta/1             | text/html; */*        | application/json | MappingJackson2HttpMessageConverter |\n| 4. | /meta/1             | application/json; */* | application/json | MappingJackson2HttpMessageConverter |\n| 5. | /meta/0 (exception) | text/html; */*        | text/plain       | StringHttpMessageConverter          |\n| 6. | /meta/0 (exception) | application/json; */* | text/plain       | StringHttpMessageConverter          |\n+----+---------------------+-----------------------+------------------+-------------------------------------+\n</pre>\n"},{"tags":["spring","tiles2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12979104,"title":"Spring Tiles: Add context information (menu, title)","body":"<p>I am wondering what is the best way to add context information (like the current menu or the title of the page) to spring 3 + tiles 2 app.</p>\n\n<p>I want the system to be as easily extenable as possible, so for example my tiles config uses a wildcards, because I do not want to write a new entry for every new request handler:</p>\n\n<pre><code>&lt;tiles-definitions&gt;\n&lt;definition name=\"baseLayout\" template=\"/WEB-INF/jsp/layout.jsp\"&gt;\n    &lt;put-attribute name=\"title\" value=\"Template\" /&gt;\n    &lt;put-attribute name=\"header\" value=\"/WEB-INF/jsp/header.jsp\" /&gt;\n    &lt;put-attribute name=\"menu\" value=\"/WEB-INF/jsp/menu.jsp\" /&gt;\n    &lt;put-attribute name=\"body\" value=\"/WEB-INF/jsp/content.jsp\" /&gt;\n    &lt;put-attribute name=\"footer\" value=\"/WEB-INF/jsp/footer.jsp\" /&gt;\n&lt;/definition&gt;    \n &lt;definition name=\"**-tile\" extends=\"baseLayout\"&gt;\n    &lt;put-attribute name=\"title\" value=\"{1}\" /&gt;\n    &lt;put-attribute name=\"body\" value=\"/WEB-INF/jsp/{1}.jsp\" /&gt;\n&lt;/definition&gt;\n&lt;/tiles-definitions&gt;\n</code></pre>\n\n<p>So I guess the only choice left is to add stuff to the model. I could of course add a new model entry (e.g. MODEL_ID) for every requesthandler, like this:</p>\n\n<pre><code>@RequestMapping(value=\"/order/{orderId}.x\")\npublic String showOrder(ModelMap model, @PathVariable long orderId) {\n    // do stuff\n    model.addAttribute(Context.MODEL_ID, Context.getOrderContext());\n}\n</code></pre>\n\n<p>and then this particular MODEL_ID is interpreted in title.jsp to show a title and in menu.jsp to highlight the current menu item.</p>\n\n<p>However, I do not like the idea of adding those lines to all request methods of all my controllers. </p>\n\n<p>I was thinking about writing an Interceptor which tries to determine the \"context\" based on the name of the view or requestpath, but then I have to rewrite all URLs in the interceptor and also keep them in sync with the Controllers.</p>\n\n<p>What is the correct or simpliest way to add context info to every controller to use in common tiles?</p>\n"},{"tags":["java","spring","transactions"],"answer_count":2,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":4617,"score":8,"question_id":3037006,"title":"Starting new transaction in Spring bean","body":"<p>We have:</p>\n\n<pre><code>@Transactional(propagation = Propagation.REQUIRED)\npublic class MyClass implementes MyInterface { ...\n</code></pre>\n\n<p>MyInterface has a single method: <code>go()</code>.  </p>\n\n<p>When go() executes we start a new transaction which commits/rollbacks when the method is complete - this is fine.</p>\n\n<p>Now let's say in go() we call a private method in MyClass that has <code>@Transactional(propagation = Propagation.REQUIRES_NEW</code>.  It seems that Spring \"ignores\" the REQUIRES_NEW annotation and does not start a new transaction.  I believe this is because Spring AOP operates on the interface level (MyInterface) and does not intercept any calls to MyClass methods.  Is this correct?</p>\n\n<p>Is there any way to start a new transaction within the go() transaction?  Is the only way to call <em>another</em> Spring managed bean that has transactions configured as REQUIRES_NEW?</p>\n\n<hr>\n\n<p><strong>Update</strong>: Adding that when clients execute <code>go()</code> they do so via a reference to the interface, not the class:</p>\n\n<pre><code>@Autowired\nMyInterface impl;\n\nimpl.go();\n</code></pre>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12966366,"title":"Spring image files access cause 404 not found","body":"<p>When I put below url which exists on Server, I get the 404 error</p>\n\n<pre><code>localhost/PDFDemo/resources/jquery/css/ui-lightness/images/ui-bg_highlight-soft_100_eeeeee_1x100.png\n\n\n\nError 404--Not Found\n\nFrom RFC 2068 Hypertext Transfer Protocol -- HTTP/1.1:\n\n10.4.5 404 Not Found\n\nThe server has not found anything matching the Request-URI. No indication is given of whether the condition is temporary or permanent.\n\nIf the server does not wish to make this information available to the client, the status code `403 (Forbidden)` can be used instead. The `410 (Gone)` status code SHOULD be used if the server knows, through some internally configurable mechanism, that an old resource is permanently unavailable and has no forwarding address.\n</code></pre>\n\n<p>I had same problem for javascript files and resolved the issue by putting below in web.xml </p>\n\n<pre><code>&lt;mime-mapping&gt;\n        &lt;extension&gt;js&lt;/extension&gt;\n        &lt;mime-type&gt;text/javascript&lt;/mime-type&gt;\n    &lt;/mime-mapping&gt;\n</code></pre>\n\n<p>Are there equivalent codes for jsp and images which I can put in <code>contextConfigLocation</code>(eg : servlet.xml).</p>\n"},{"tags":["java","json","spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12976659,"title":"Spring MVC: Marshal and unmarshal non-string objects using json","body":"<p>In <a href=\"http://stackoverflow.com/questions/12773323/how-to-marshall-non-string-objects-with-jaxb-and-spring/12778970#12778970\">this</a> post it's been asked how to convert non-string java objects in such a way it's possible to set a string representation of every object and use it to fill the xml.</p>\n\n<p>The solution of the question allows the server spring mvc controller to treat incoming and outgoing xml messages in the same way.</p>\n\n<p>Now my question is how to do the same thing using json? </p>\n\n<p>For example, i would like a InetSocketAddress representation like:</p>\n\n<pre><code>\"address\":{\n         \"address\":\"localhost\",\n         \"hostName\":\"localhost\",\n         \"port\":5683,\n         \"unresolved\":false\n      }\n</code></pre>\n\n<p>to be like...</p>\n\n<pre><code>\"address\": \"localhost:5683\"\n</code></pre>\n"},{"tags":["java","spring","spring-batch"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":12847266,"title":"Using a job parameter as a prepared statement parameter in a JdbcCursorItemReader","body":"<p>I have a job that has to run multiple times with different job parameters. I want to set up a JdbcCursorItemReader to perform a query for the job, the itemReader is configured like this:</p>\n\n<pre><code>&lt;bean id=\"tpsItemReader\" \n    class=\"org.springframework.batch.item.database.JdbcCursorItemReader\"&gt;\n    &lt;property name=\"dataSource\" ref=\"myDataSource\"/&gt;\n    &lt;property name=\"sql\" value=\"#{sqlQueries['tps.findStuffforSomeSubset']}\"/&gt;\n    &lt;property name=\"preparedStatementSetter\"&gt;\n        &lt;bean class=\"com.initech.reports.tps.ParameterSetter\"&gt;\n            &lt;!-- can't hardcode this, I want a job parameter here --&gt;\n            &lt;constructor-arg value=\"A\"/&gt; \n        &lt;/bean&gt;\n    &lt;/property&gt;\n    &lt;property name=\"rowMapper\"&gt;\n        &lt;bean class=\"com.initech.reports.tps.CustomerRowMapper\"/&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>and the job is configured like this:</p>\n\n<pre><code>&lt;batch:job id=\"tpsReportJob\"&gt;\n    &lt;batch:step id=\"tpsReportJob.generateReport\"&gt;\n        &lt;batch:tasklet&gt;\n            &lt;batch:chunk reader=\"tpsItemReader\" \n            processor=\"tpsItemProcessor\" \n            writer=\"tpsItemWriter\" commit-interval=\"100000\"/&gt;\n        &lt;/batch:tasklet&gt;\n    &lt;/batch:step&gt;\n&lt;/batch:job&gt;\n</code></pre>\n\n<p>The parameterSetter is pretty minimal:</p>\n\n<pre><code>package com.initech.reports.tps;\n\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\n\nimport org.springframework.jdbc.core.PreparedStatementSetter;\n\npublic class ParameterSetter implements PreparedStatementSetter {\n\n    private final String x;\n\n    public ParameterSetter(String x) {this.x = x;}\n\n    @Override\n    public void setValues(PreparedStatement ps) throws SQLException {\n        ps.setString(1, x);\n    }\n}\n</code></pre>\n\n<p>This is using spring-batch 2.1.8.</p>\n\n<p>How do I get the job parameter into the query?</p>\n\n<p>I think I'm close, I tried changing the parameter setter config to:</p>\n\n<pre><code>        &lt;bean class=\"com.initech.reports.tps.ParameterSetter\"&gt;\n            &lt;constructor-arg value=\"#{jobParameters['myParam']}\"/&gt;\n        &lt;/bean&gt;\n</code></pre>\n\n<p>but I get this error:</p>\n\n<pre><code>Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1008E:(pos 0): Field or property 'jobParameters' cannot be found on object of type 'org.springframework.beans.factory.config.BeanExpressionContext'\n    at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:208)\n    at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:72)\n    at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:52)\n    at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:93)\n    at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:88)\n    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:139)\n    ... 51 more\n</code></pre>\n\n<p>I found <a href=\"http://stackoverflow.com/q/6078009/217324\">a very similar question</a>, the difference between that one and this is that I don't have a reader class to annotate, I just have the xml entry because I'd like to avoid having to create my own itemReader. (I could try overriding the jdbcCursorItemReader class just to be able to annotate it...)</p>\n"},{"tags":["spring","testing","activemq","mockito"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12978146,"title":"How to do integration test with activemq and spring3?","body":"<p>I have a code like this, but I'm not sure how would I test this piece of of code that I extracted from my project. I'm using Spring3 and ActiveMQ. And I'm using spring to do remote HTTPInvoker that's why I have the GateWay. So, when I call method <code>submit</code> in my <code>Gateway</code>, it's going to send a JMS message via JMSDispatcher. How would you inject <code>JmsTemplate</code> to <code>Gateway</code>? As far as I know, if I want to test JMS I have to configure it in application-context.xml in Spring and inject overridden JmsTemplate. So, I could test the message inside the queue? But I can't inject <code>JmsTemplate</code> to <code>Gateway</code> since Mockito will complain about not having that field inside <code>Gateway</code>.</p>\n\n<pre>\n<code>\npublic class Gateway {\n    @Autowired\n    private ProcessController processController;\n    public void submit() {\n         processControllerFactory.submit();\n    }\n\n}\n\npublic ProcessController {\n    @Autowired\n    private JMSDispatcher jmsDispatcher;\n    public void submit() {\n          // do something\n          jmsDispatcher.send(message);\n    }\n}\n\npublic JMSDispatcher {\n    @Autowired\n    @Qualifier(\"someJmsTemplate\")\n    private JmsTemplate jmsTemplate;\n\n    public void send(MessageCreator message) {\n          jmsTemplate.send(message);\n    }\n}\n\n</code>\n</pre>\n"},{"tags":["java","spring","spring-batch"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12976662,"title":"SpringBatch CommandLineJobRunner -next using old run.id","body":"<p>We are using the CommandLineJobRunner to execute Spring Batch jobs.  We are using -next on the command line:</p>\n\n<pre><code>java -Dlog4j.configuration=file:./prop/log4j.properties -Dlogfile=logfile_load_data -jar EtlLoadData.jar loaddata_etl_config.xml loaddata_etl_job -next\n</code></pre>\n\n<p>We started coming down with an error:</p>\n\n<pre><code>Job Terminated in error: A job instance already exists and is complete for parameters={run.id=10}.  If you want to run this job again, change the parameters. \n\norg.springframework.batch.core.repository.JobInstanceAlreadyCompleteException: A job instance already exists and is complete for parameters={run.id=10}.  If you want to run this job again, change the parameters.\n    at  org.springframework.batch.core.repository.support.SimpleJobRepository.createJobExecution(SimpleJobRepository.java:122)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\nat org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean$1.invoke(AbstractJobRepositoryFactoryBean.java:168)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\nat $Proxy14.createJobExecution(Unknown Source)\nat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:111)\nat org.springframework.batch.core.launch.support.CommandLineJobRunner.start(CommandLineJobRunner.java:349)\nat org.springframework.batch.core.launch.support.CommandLineJobRunner.main(CommandLineJobRunner.java:574)\n</code></pre>\n\n<p>I thought that if you were running with the <code>-next</code> option, this shouldn't be an issue.  Any ideas?</p>\n\n<p>As a temporary workaround, I cleaned up the SpringBatch table in the database, but I don't want this to happen again.</p>\n"},{"tags":["spring","jax-ws"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2990,"score":0,"question_id":6837970,"title":"how to develop JAX-WS webservice client using spring?","body":"<p>I have one requirement to develop web service client in standalone java application which is using spring framework. My question is how can i develop one java class which can be used to call a web service. All I have is location of the WSDL and wsdl file? Also this application should run in diff envt. where url of the WSDL is diff. So basically I want to externalize the url property if possible.</p>\n\n<p>I heard about the using JaxwsproxFactoryBean from spring framework but not finding any good working example.</p>\n\n<p>Thanks</p>\n"},{"tags":["spring","hibernate","grails"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12971451,"title":"Releasing Grails database connection early","body":"<p>I have a controller action that does the following things:</p>\n\n<ol>\n<li><p>Gets a domain object from the database</p></li>\n<li><p>Uses info on that object to find a data file (on disk) and writes contents of that file to the response output stream.</p></li>\n</ol>\n\n<p>My problem is that the database connection is reserved for the duration of the action, including the (long) time required to stream the data. This results in a lot of unnecessary database connections when there are several users streaming data at the same time.</p>\n\n<pre><code>def stream() {\n  StreamDetails sd = StreamDetails.get(params.id)\n\n  // Extract info needed to read the stream\n  String filename = sd.filename\n\n  // The database connection is no longer needed, how to properly release it?\n\n  // Start writing the data stream to response output\n  // This may take a long time and does not use a db connection\n  streamService.writeToOutput(filename,response.getOutputStream())\n}\n</code></pre>\n\n<p>I have tried:</p>\n\n<ol>\n<li><p>Injecting the <code>sessionFactory</code> bean to the controller and calling <code>sessionFactory.currentSession.close()</code> before calling the service. However this causes a <code>SessionException</code> on the line calling the service, ie. before entering the <code>writeToOutput()</code> method (and nothing in that method needs a database connection). AND I don't think the session should be really closed, just released to the pool.</p></li>\n<li><p>Copy-pasting the code from <code>streamService.writeToOutput(...)</code> to the controller to avoid the service call. In this case all the code gets executed but a <code>SessionException</code> is still thrown after the action is complete.</p></li>\n</ol>\n\n<p>How to properly release the connection early?</p>\n"},{"tags":["spring","spring-integration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12975169,"title":"Spring Integration POST web service url mapping","body":"<p>I am using Spring Integration to make a POST REST WebService call\nMy outbound gateway is defined as below :</p>\n\n<pre><code>&lt;int-http:outbound-gateway\n        url=\"url\"\n        http-method=\"POST\" request-channel=\"reqChannel\"\n        reply-channel=\"replyChannel\" expected-response-type=\"java.lang.String\"&gt;\n&lt;/int-http:outbound-gateway&gt;\n</code></pre>\n\n<p>My problem is with <code>url</code>. I need to have different url based on different conditions. How can I make the <code>url</code> variable configurable from payload rather than hard coding.</p>\n"},{"tags":["java","spring","spring-mvc","bean-validation"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12926433,"title":"Spring bean validation without using @valid","body":"<p>I have used spring validation in the conventional way like this:</p>\n\n<pre><code>@RequestMapping(value=\"userRegistration\", method = RequestMethod.POST)\npublic ModelAndView registerUser(@Valid UserAccountVO userAccountVO, BindingResult result,Model model){\n    if (result.hasErrors()){\n    // Do something\n    }\n//Do something else\n}\n</code></pre>\n\n<p>That works well and good.</p>\n\n<p>But now I have case where I can't do a form submission, but instead get values in javascript and send them using Ajax on click of a button, something like this.</p>\n\n<pre><code>var nameStr = $(\"#usrnmbx\").val();\nvar emailidStr = $(\"#emailidbx\").val()\n//and more and then send them using ajax\n</code></pre>\n\n<p>So to implement bean validation my new method looks something like this.</p>\n\n<pre><code>@RequestMapping(value = \"/userRegistration\", method = RequestMethod.POST)\npublic @ResponseBody JSONresponse registerUser(HttpServletRequest request,@RequestParam(value = \"name\") String name, // and more){\n\nUserAccountVO userAccountVO = new UserAccountVO(name, emailId,password, confirmPassword);\nBindingResult result = new BeanPropertyBindingResult(userAccountVO,\"userAccount\");\nuserAccountValidator.validate(userAccountVO, result); //userAccountValidator is spring Validator implementation \nif (result.hasErrors()) {\n //Do something\n}\n//Do something else\n}\n</code></pre>\n\n<p>But this looks dirty. I definitely think there are better ways of doing this. And this doesn't seem like picking up the validation annotations that I have put up in the POJO. \nCan any of you suggest a better implementation. \nThanks in advance.</p>\n"},{"tags":["spring","http","types","media"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":10429583,"title":"Handling media types in Spring","body":"<p>Is it possible for us to handle http media types dynamically or handle multiple media types using \"ByteArrayHttpMessageConverter\"?\nMy requirement is such that i won't get to know the exact media type until i retrieve the document from server! so either i should try to handle it dynamically or i should go for including all the possible media types to be handled :( \nCould you please suggest me some ideas?\nhere is the link to the spring forum where i have posted it long back without any response.\n<a href=\"http://forum.springsource.org/showthread.php?124301-Handling-multiple-media-types\" rel=\"nofollow\">http://forum.springsource.org/showthread.php?124301-Handling-multiple-media-types</a></p>\n\n<p>Thanks in Advance!\nPaary</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12972819,"title":"Can I access a annotation on the instance of a bean to be injected","body":"<p>Given a class :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public ClassA {\n    @Autowired\n    @SomeAnnotation(\"foo\")\n    private ClassB bar;\n}\n\n@Component\n@Scope(prototype)\npublic ClassB {\n    private String someString;\n}\n</code></pre>\n\n<p>I would like to write some bean processor (post construct...) that can at <code>ClassB</code> construction time can access the <code>@SomeAnnotation</code> on the intances that <code>ClassB</code> is getting injected into so that I can set the value of <code>someString</code> to \"foo\".</p>\n\n<p>I know this isn't very IoC and I'm going to guess it cannot be done.</p>\n"},{"tags":["spring","tomcat","tomcat7"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":12974051,"title":"Enabling URL access without specifying port number","body":"<p>I have a Spring RESTful application which runs on Tomcat 7.0. The only way to access the application would be through </p>\n\n<pre><code>https://localhost:8443/SpringMVC-New/\n</code></pre>\n\n<p>How can I access my application through below url ?</p>\n\n<pre><code>https://localhost/SpringMVC-New/  \n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>A part of my server.xml:</p>\n\n<pre><code>&lt;Connector connectionTimeout=\"20000\" port=\"443\" protocol=\"HTTP/1.1\" redirectPort=\"8443\"/&gt;\n\n&lt;Connector SSLEnabled=\"true\" clientAuth=\"false\" keystoreFile=\"conf/keystore.jks\" keystorePass=\"cms@123#\" maxThreads=\"200\" port=\"8443\" protocol=\"org.apache.coyote.http11.Http11Protocol\" scheme=\"https\" secure=\"true\" sslProtocol=\"TLS\"/&gt;\n</code></pre>\n\n<p>With the above configuration I get SSL connection error.</p>\n"},{"tags":["java","spring","hibernate","java-ee","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":107,"score":1,"question_id":12971848,"title":"Making Spring 3 MVC controller method Transactional","body":"<p>I am using Spring 3.1 and have my DAO and service layer(transactional) written.</p>\n\n<p>However in a special case to avoid a lazy init exception I have to make a spring mvc request handler method @transactional. But It is failing to attach transaction to that method. Method name is ModelAndView home(HttpServletRequest request, HttpServletResponse response). \n<a href=\"http://forum.springsource.org/showthread.php?46814-Transaction-in-MVC-Controller\" rel=\"nofollow\">http://forum.springsource.org/showthread.php?46814-Transaction-in-MVC-Controller</a> \nFrom this link it seems it is not possible to attach transaction (by  default ) to mvc methods. Solution suggested in that link seems to be for Spring 2.5 (overriding handleRequest ). Any help will be reallyappreciated. Thanks</p>\n\n<pre><code>@Controller\npublic class AuthenticationController { \n@Autowired\nCategoryService categoryService;    \n@Autowired\nBrandService brandService;\n@Autowired\nItemService itemService;\n\n@RequestMapping(value=\"/login.html\",method=RequestMethod.GET)\nModelAndView login(){       \n    return new ModelAndView(\"login.jsp\");       \n}   \n@RequestMapping(value=\"/home.html\",method=RequestMethod.GET)\n@Transactional\nModelAndView home(HttpServletRequest request, HttpServletResponse response){\n    List&lt;Category&gt; categories = categoryService.readAll();\n    request.setAttribute(\"categories\", categories);     \n    List&lt;Brand&gt; brands = brandService.readAll();\n    request.setAttribute(\"brands\", brands);     \n    List&lt;Item&gt; items = itemService.readAll();\n    request.setAttribute(\"items\", items);\n    Set&lt;Image&gt; images = items.get(0).getImages();\n    for(Image i : images ) {\n        System.out.println(i.getUrl());\n    }\n    return new ModelAndView(\"home.jsp\");    \n}\n</code></pre>\n"},{"tags":["java","spring","xmpp","openfire","xmppframework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":11759297,"title":"Embed openfire in a spring java application","body":"<p>Is it possible to embed open fire or any xmpp server in a spring java application?</p>\n"},{"tags":["spring","error-handling","spring-security","type-mismatch"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12973984,"title":"Spring security, custom login form: display custom message matching SPRING_SECURITY_LAST_EXCEPTION","body":"<p>I am implementing Spring Security &amp; I have a Custom Login form such as:</p>\n\n<pre><code>&lt;c:if test=\"${not empty param.error}\"&gt;\n  &lt;div class=\"errorblock\"&gt;\n    LOGIN ERROR&lt;br/&gt;\n    Reason: ${sessionScope[\"SPRING_SECURITY_LAST_EXCEPTION\"].message}&lt;br/&gt;\n  &lt;/div&gt;\n&lt;/c:if&gt;\n\n&lt;form method=\"POST\" action=\"&lt;c:url value=\"/j_spring_security_check\"/&gt;\"&gt;\n    ...\n&lt;/form&gt;\n</code></pre>\n\n<p>So far so good, the Reason displayed is as expected (ie. <code>Could not open Hibernate Session for transaction; nested exception is org.hibernate.TransactionException: JDBC begin failed</code> if my database is down)</p>\n\n<p>I would like to be able to display a more user-friendly message, such as \"Issue with database, please contact an admin\"</p>\n\n<p>I tried adding <code>typeMismatch.org.hibernate.TransactionException=Unable to connect to databse, please contact an admin</code> to my <code>messages.properties</code> which I already used to override Spring security auth exception, see <a href=\"http://stackoverflow.com/questions/1373407/how-to-display-custom-error-message-in-jsp-for-spring-security-auth-exception\">how to display custom error message in jsp for spring security auth exception</a></p>\n\n<p>I'm not too sure how to \"call\" this custom error messages.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["spring","java-ee","jms","spring-batch"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12971782,"title":"Spring Batch or JMS for long running jobs","body":"<p>I have the problem that I have to run very long running processes on my Webservice and now I'm looking for a good way to handle the result. The scenario : A user executes such a long running process via UI. Now he gets the message that his request was accepted and that he should return some time later. So there's no need to display him the status of his request or something like this. I'm just looking for a way to handle the result of the long running process properly. Since the processes are external programms, my application server is not aware of them. Therefore I have to wait for these programms to terminate. Of course I don't want to use EJBs for this because then they would block for the time no result is available. Instead I thought of using JMS or Spring Batch. Does anyone ever had the same problem or an advice which solution would be better? </p>\n"},{"tags":["java","javascript","spring"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":12973392,"title":"How to lock and Unlock a URL in java","body":"<p>There is a hyperlink in my webpage, on click of which it navigates to a jsp page. once am in that jsp page i should be able to lock the jsp page where if others access the same jsp page it should show an alert or a warning saying its already in use. when i come out of that jsp page then if others access the URL it should navigate to that page. Any idea how to achieve that in java? Am using spring framework 3.1. it is a web aplication. Can i handle it in javascript?</p>\n"},{"tags":["java","ruby-on-rails","spring"],"answer_count":9,"favorite_count":5,"up_vote_count":9,"down_vote_count":0,"view_count":7018,"score":9,"question_id":1119692,"title":"Is Spring hard compared to Ruby on Rails?","body":"<p>If I have no to little experience in either of them, but know enough Java and Ruby to be comfortable, is one framework harder to learn than the other?  Is one easier to use for the beginner on these?</p>\n\n<p>I know it is hard to answer.  Just looking for general thoughts on it.</p>\n"},{"tags":["spring","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12971101,"title":"HibernateTemplate vs HibernateDaoSupport vs SessionFactory Injection","body":"<p>I have seen in lot of forums and still in confusion. We are starting a new project with Spring 3.1 &amp; Hibernate 4 and need to decide which strategy to use for Hibernate with Spring:</p>\n\n<ol>\n<li><p>Accessing Hibernate directly</p>\n\n<p>Session session = HibernateUtil.getSessionFactory().getCurrentSessio n();\nsession.beginTransaction();</p></li>\n<li><p>Using HibernateTemplate</p>\n\n<p>List bb = (List)hibernateTemplate.find(\"from cc\");</p></li>\n<li><p>Using HibernateDAOSupport classes </p>\n\n<p>List bb =(List)getHibernateTemplate().find(\"from cc\");</p></li>\n</ol>\n\n<p>Can you please help what should i use? I have read from <a href=\"http://www.coderanch.com/t/501712/Spring/HibernateTemplate-or-HibernateDaoSupport-or-Hibernate\" rel=\"nofollow\">CodeRanch</a> and one another <a href=\"http://www.coderanch.com/t/479938/ORM/databases/Diff-between-Hinernate-Template-HibernateDAOSupport\" rel=\"nofollow\">link</a> which tell that from <strong>Hibernate 3.x</strong> onwards we should inject <code>SessionFactory</code> in our DAO Classes(using <code>@Repository</code>). </p>\n\n<p>Can someone explain this in detail?</p>\n\n<p>Regards,</p>\n\n<p>Arun Kumar</p>\n"},{"tags":["spring","maven"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12971994,"title":"Access maven project version in Spring without filtering","body":"<p>Using maven, I would like to get the my project version within spring but without filtering. I tried it like this</p>\n\n<pre><code>@PropertySource(\"classpath:META-INF/maven/groupId/artifactId/pom.properties\")\n</code></pre>\n\n<p>as proposed here: <a href=\"http://stackoverflow.com/questions/3886753/access-maven-project-version-in-spring-config-files#3886921\">Access maven project version in Spring config files</a></p>\n\n<p>As written there it is not possible with test or jetty:run. maven is generating the META-INF only in the packaged archive. Is there a way to instruct maven to generate META-INF before so you can start jetty:run, let spring read the project version from manifest without getting an error?</p>\n"},{"tags":["spring","javabeans","autowired"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12971673,"title":"Spring bean id conflict","body":"<p>I'm a new Spring user, and probably doing something wrong (due to a misunderstanding of the concepts/internals of Spring IOC), so hopefully this question will result in a simple answer.</p>\n\n<p>Here's what I'm trying to do: I'm trying to use two beans from two different 3rd party libraries:</p>\n\n<pre><code>&lt;bean id=\"validator\" class=\"org.owasp.esapi.ESAPI\" factory-method=\"validator\"/&gt;\n&lt;bean id=\"validator\" class=\"org.springframework.validation.beanvalidation.LocalValidatorFactoryBean\"/&gt;\n</code></pre>\n\n<p>The problem is that they both have the same Id, and that is not allowed.  I'm trying to auto-wire the ESAPI validator, and the LocalValidatorFactoryBean is used by spring if I followed correctly.</p>\n\n<p>So my simplified class for using the ESAPI validator would be:</p>\n\n<pre><code>public class ValidatedString {\n    @Autowired(required=true)\n    Validator stringValidator; \n\n    public void doSomethingWithTheValidator() {\n        // do something\n    }\n}\n</code></pre>\n\n<p>But what I can't understand is how I can change the Id.  Both return a Validator class, from a different package, and I was under the impression that the id field needs to be the same as the class name.</p>\n\n<p>Help??</p>\n"},{"tags":["java","spring","session","tomcat","spring-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":433,"score":1,"question_id":10071462,"title":"Disable Remember-Me in Spring Security & Tomcat","body":"<p>I wonder, is there any way to disable remember-me in Spring Security?\nScenario I want to implement is pretty common: after closing browser window I would like user's session to expire. Seems weird, but it doesn't work with Tomcat 7 &amp; Spring Security 3.1.\nWe use auto-config in Spring Security configuration file, but there is no remember-me element.</p>\n\n<p>What is the best solution to get it working? Thanks in advance!</p>\n\n<p><strong>Update</strong> Here is the usage scenario to clarify my problem:</p>\n\n<ol>\n<li>User logs into restricted area, say, /secure.html</li>\n<li>Then he closes the browser without logging out manually.</li>\n<li>He opens the browser again and goes directly to /secure.html.</li>\n<li>Current Spring's behaviour: page is displayed successfully. Expected behaviour: redirecting to login page.</li>\n</ol>\n\n<p><strong>New symptoms</strong> for differential diagnosis:\nUser is probable reathenticated because JSESSIONID in the same between browser close/open. How I could forse Tomcat or Spring to generate a new session for every browser session?</p>\n\n<p><strong>Update</strong> Fragment of Spring Security configuration:</p>\n\n<pre><code>&lt;http auto-config=\"true\"&gt;\n    &lt;anonymous key=\"anonymous-security\" /&gt;\n    &lt;intercept-url pattern=\"/auth/**\" access=\"IS_AUTHENTICATED_ANONYMOUSLY\" /&gt;\n    &lt;intercept-url pattern=\"/**\" access=\"ROLE_ADMIN\" /&gt;\n    &lt;form-login login-page=\"/auth/login.html\" \n                default-target-url=\"/auth/default.html\"\n                authentication-failure-url=\"/auth/failed.html\" /&gt;\n    &lt;logout logout-success-url=\"/auth/logout.html\" delete-cookies=\"JSESSIONID\" /&gt;\n&lt;/http&gt;\n</code></pre>\n\n<p><strong>Update</strong> Documentation <a href=\"http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ftn.d0e765\" rel=\"nofollow\">claims</a> that there is no default remember-me configuration in auto-config=\"true\" since 3.0 (we use 3.1):</p>\n\n<blockquote>\n  <p>In versions prior to 3.0, this list also included remember-me\n  functionality. This could cause some confusing errors with some\n  configurations and was removed in 3.0.</p>\n</blockquote>\n\n<p>What's wrong with my web app?</p>\n"},{"tags":["spring","java-ee"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12970079,"title":"Spring : Is there a way to efficiently handling the bean initialization errors?","body":"<p>There is a need where in I want to catch the <code>exception</code> occured during spring initialization while server startup and ignore if the cause of <code>exception</code> is of <code>type 'X'</code> ? Is this possible ?\n<code>lazy-init</code> is not the option here.....\nIf i can specify an <code>onExceptionClass</code> while defining a bean that would be great or something like that ?</p>\n\n<p>below is the beanId :</p>\n\n<pre><code>&lt;bean id=\"entityManagerFactoryMemberDB\"\n    class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\" depends-on=\"addBtsConfiguration,systemPrereqs\"&gt;\n    &lt;property name=\"persistenceUnitName\" value=\"MemberDBUnit\" /&gt;\n    &lt;property name=\"dataSource\" ref=\"memberDBDataSource\" /&gt;\n    &lt;property name=\"jpaVendorAdapter\"&gt;\n        &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n            &lt;property name=\"database\" value=\"${memberDB.jdbc.database}\" /&gt;\n            &lt;property name=\"showSql\" value=\"${memberDB.hibernate.show_sql}\" /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n</code></pre>\n\n<p></p>\n\n<p>In this case hibernate tries to get connection to the DB, which for some reason i want to ignore, is it possible ?</p>\n"},{"tags":["spring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7235,"score":0,"question_id":7414385,"title":"org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'actionTypeManager': Injection of autowired dependencies failed","body":"<p>Please find the full stacktrace</p>\n\n<pre><code>2011-09-14 15:45:47 ContextLoader [ERROR] Context initialization failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'actionTypeManager': Injection of autowired dependencies failed; nested exception is org.spri\nngframework.beans.factory.BeanCreationException: Could not autowire field: private com.abc.exp.abc..abc.security.actiontype.ActionTypeInterface com.abc.exp.abc..abc.secur\nity.actiontype.ActionTypeManager.aInterface; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'JPAActionType': Injection o\nf persistence dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in clas\ns path resource [beans.xml]: Invocation of init method failed; nested exception is java.lang.AbstractMethodError: org.apache.log4j.Logger.trace(Ljava/lang/String;)V\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)\n        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3972)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:905)\n        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:740)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:500)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:519)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:581)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.abc.exp.abc..abc.security.actiontype.ActionTypeInterface com.abc.e\nxp.abc..abc.security.actiontype.ActionTypeManager.aInterface; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'JPAActio\nnType': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFacto\nry' defined in class path resource [beans.xml]: Invocation of init method failed; nested exception is java.lang.AbstractMethodError: org.apache.log4j.Logger.trace(Ljava/lang/String\n;)V\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)\n        ... 37 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'JPAActionType': Injection of persistence dependencies failed; nested exception is\n org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [beans.xml]: Invocation of init method\n failed; nested exception is java.lang.AbstractMethodError: org.apache.log4j.Logger.trace(Ljava/lang/String;)V\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:341)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:844)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)\n        ... 39 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [beans.xml]: Invocation of i\nnit method failed; nested exception is java.lang.AbstractMethodError: org.apache.log4j.Logger.trace(Ljava/lang/String;)V\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:529)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:495)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:656)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:629)\n        at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:147)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)\n        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:338)\n        ... 50 more\nCaused by: java.lang.AbstractMethodError: org.apache.log4j.Logger.trace(Ljava/lang/String;)V\n        at org.hibernate.cfg.annotations.PropertyBinder.make(PropertyBinder.java:184)\n        at org.hibernate.cfg.AnnotationBinder.bindId(AnnotationBinder.java:1911)\n        at org.hibernate.cfg.AnnotationBinder.processElementAnnotations(AnnotationBinder.java:1279)\n        at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:754)\n        at org.hibernate.cfg.AnnotationConfiguration.processArtifactsOfType(AnnotationConfiguration.java:546)\n        at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:291)\n        at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1148)\n        at org.hibernate.ejb.Ejb3Configuration.buildMappings(Ejb3Configuration.java:1226)\n        at org.hibernate.ejb.EventListenerConfigurator.configure(EventListenerConfigurator.java:173)\n        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:854)\n        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:425)\n        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:131)\n        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:225)\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:308)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)\n        ... 63 more\n14 Sep, 2011 3:45:47 PM org.apache.catalina.core.StandardContext start\nSEVERE: Error listenerStart\n14 Sep, 2011 3:45:47 PM org.apache.catalina.core.StandardContext start\nSEVERE: Context [/abc.] startup failed due to previous errors\n14 Sep, 2011 3:45:47 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc\nSEVERE: A web application registered the JBDC driver [org.h2.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has\n been forcibly unregistered.\n14 Sep, 2011 3:45:47 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory docs\n14 Sep, 2011 3:45:47 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory ROOT\n14 Sep, 2011 3:45:47 PM org.apache.coyote.http11.Http11Protocol start\nINFO: Starting Coyote HTTP/1.1 on http-8080\n14 Sep, 2011 3:45:47 PM org.apache.jk.common.ChannelSocket init\nINFO: JK: ajp13 listening on /0.0.0.0:8009\n14 Sep, 2011 3:45:47 PM org.apache.jk.server.JkMain start\nINFO: Jk running ID=0 time=0/18  config=null\n14 Sep, 2011 3:45:47 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 9212 ms\n</code></pre>\n"},{"tags":["java","spring","jsf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12720359,"title":"How to validate user from his mobile no by sending validation message?","body":"<p>How to validate user from his mobile no by sending validation message (or Use any third party API)? In Java JSF, Spring web application.</p>\n"},{"tags":["java","xml","spring","keystore","password-encryption"],"answer_count":4,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":3080,"score":6,"question_id":4196545,"title":"Hide datasource password in spring xml file","body":"<p>there is a way to hide/encrypt password in xml spring config file?\nI read that is possible with a \"custom\" subclass of DataSource, but the solutions keep key in same config file as plain text...so is a bit useless.</p>\n\n<p>There is a way to use KeyStore for this?\nFor example read the value from a keystore.</p>\n\n<p>Thanks all.</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12966144,"title":"SQL Error: 1366 Incorrect integer value Spring MVC Hibernate","body":"<p>I am having some trouble figuring out why something is not working when trying to persist an object using Springs default Repositories. I am using hibernate as my persistence layer and Spring MVC framework. I use JPA instead of hibernate mapping files. </p>\n\n<p>The error I am seeing is the following:</p>\n\n<pre><code>WARN : org.hibernate.util.JDBCExceptionReporter - SQL Error: 1366, SQLState: HY000\nERROR: org.hibernate.util.JDBCExceptionReporter - Incorrect integer value: '\\xAC\\xED\\x00\\x05sr\\x00!com.kwhours.butternut.domain.Type\\xCF;\\xBF\\xEF\\x8A\\x82\\x87\\xF1\\x02\\x00\\x0DZ\\x00\\x06isLeafI\\x00\\x05levelL\\' for column 'type_id' at row 1\n</code></pre>\n\n<p>I am trying to persist a domain object with JPA annotations the relevant part of that code is:</p>\n\n<pre><code>@Entity\n@Table(name = \"question\")\npublic class Question implements java.io.Serializable {\n    private Type type;\n\n    @Column(name = \"type_id\")\n    public Type getType() {\n        return this.type;\n    }\n\n    public void setType(Type type) {\n        this.type = type;\n    }\n}\n</code></pre>\n\n<p>I have a foreign key constraint properly set up on the question.type_id column to type.id column. I am able to have my objects all properly represented in code but when I try to make the following repository persist the object, I get the afore mentioned error.</p>\n\n<pre><code>public interface QuestionRepository extends CrudRepository&lt;Question, Long&gt; {\n    public List&lt;Question&gt; findByDatasetInstanceId(Long datasetInstanceId);\n}\n</code></pre>\n\n<p>So to be clear. I can make a new question object and retrieve a type object from the db using a repository. I can set questions.type to this new type object but I get that error whenever I try to persist the question which contains that type using the repository above. I checked out the type object in the debugger and there seems to be nothing amiss with it. Any clues or suggestions are helpful. That looks like some kind of escape character sequence but I am not really sure.</p>\n"},{"tags":["java","spring","jackson"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":12937197,"title":"How to define a generic list deserializer through annotations with Jackson?","body":"<p>Let's say I have an object which has list properties:</p>\n\n<pre><code>public class Citizen {\n    name\n    List&lt;Tickets&gt; tickets\n    List&lt;Fines&gt; fines\n}\n</code></pre>\n\n<p>I'd like to define a generic custom deserializer for lists through annotations:</p>\n\n<pre><code>public class Citizen {\n    ...\n    @JsonDeserializer(MyListDeserializer&lt;Tickets&gt;) // &lt;-- generic deserializer\n    public void setTickets(List&lt;Tickets&gt; tickets) {\n        this.tickets = tickets;\n    }\n\n    @JsonDeserializer(MyListDeserializer&lt;Fines&gt;) // &lt;-- how can I do that? \n    public void setFines(List&lt;Fines&gt; fines) {\n        this.fines = fines;\n    }\n}\n</code></pre>\n\n<p>I'm looking for a way to create a \"generic\" deserializer — one that would be able to deserialize both types of lists, similar to <a href=\"http://stackoverflow.com/questions/6704992/contextualdeserializer-for-mapping-json-to-different-types-of-maps-with-jackson/6714275\">ContextualDeserializer for mapping JSON to different types of maps with Jackson</a>.</p>\n\n<p>The final purpose is to implement custom deserializing logic in <code>MyListDeserializer</code> to deserialize empty strings <code>\"\"</code> as empty lists, but I'd like to know about a general approach, not just for empty strings.</p>\n"},{"tags":["spring","hibernate","jpa","jpa-2.0","mule"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12778068,"title":"Mule to JPA compatibility","body":"<p>I using Mule Studio version: 1.3.1 .</p>\n\n<p>buildDate: 201209061215</p>\n\n<p>I am not able to get JPA end point. I also downloaded <code>jpa-connector-1.0-20120925-2201.jar</code>\nBut I dont know to to integrate with mule studio.</p>\n\n<p>So I decided to use a simple Java transformer and write my processing logic which will be internally using JPA/Hibernate.</p>\n\n<p>I came to know that i have to use a JPA vendor adapter for spring, else none of my service, DAO classes will be instantiated.</p>\n\n<p>I have declared a datasource and entityManager as beans of spring inside mule flow xml as shown.</p>\n\n<pre><code>&lt;spring:bean id=\"dataSource\"\n            class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n                &lt;spring:property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n                &lt;spring:property name=\"url\" value=\"jdbc:mysql://localhost:3306/eigDB\" /&gt;\n                &lt;spring:property name=\"username\" value=\"root\" /&gt;\n                &lt;spring:property name=\"password\" value=\"tiger\" /&gt;\n        &lt;/spring:bean&gt;\n\n        &lt;spring:bean id=\"entityManagerFactory\"\n        class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;spring:property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;spring:property name=\"persistenceUnitName\" value=\"autoRebateSystem\" /&gt;\n        &lt;spring:property name=\"jpaVendorAdapter\"&gt;\n            &lt;spring:bean\n                class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n                &lt;spring:property name=\"databasePlatform\" value=\"org.hibernate.dialect.Oracle10gDialect\" /&gt;\n                &lt;spring:property name=\"showSql\" value=\"true\" /&gt;\n            &lt;/spring:bean&gt;\n</code></pre>\n\n<p>But mule flow xml is not able to recognize any class of spring framework.\nFinding very difficult to replace those class names.</p>\n\n<p>Plez provide the solution for my problem, \nBy letting me know the PROPER replacements for mule studio.</p>\n\n<pre><code>1) org.springframework.jdbc.datasource.DriverManagerDataSource\n2) org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\n3) org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\n</code></pre>\n"},{"tags":["spring","rest","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12960693,"title":"Spring MVC Controller with JSON and JSP","body":"<p>Can the same method in a controller be used for both JSP and other MIME types (like XML and JSON)?</p>\n\n<p>I know of the following ways to resolve views in Spring MVC.</p>\n\n<ol>\n<li>Return a <code>String</code> with the view name and add attributes to the <code>Model</code> or <code>ModelMap</code></li>\n<li>Return a <code>ModelAndView</code> with the view name and model</li>\n<li>Return an <code>Object</code> with a <code>@ResponseBody</code> annotation</li>\n</ol>\n\n<p>I use 1 or 2 when I am dealing with JSP and 3 when I want to return JSON or XML.</p>\n\n<p>I know I can use two methods and with the <code>@RequestMapping(headers=\"accept=application/xml\")</code> or <code>@produces</code> annotations to define which MIME types they handle, but is it possible to do this in just one method?</p>\n\n<p>The controller logic is pretty simple and it seems like unnecessary duplication to have two different methods mapped which return the same exact model, or is this just simply the way it's done?</p>\n"},{"tags":["spring","quartz-scheduler"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12968185,"title":"How to make JobDetailBean run non concurrently?","body":"<p>I am running some scheduled jobs using the Quartz Scheduler. All the jobs in my application are <strong>JobDetailBean</strong> jobs.</p>\n\n<p>I know that using MethodInvokingJobDetailFactoryBean, we can make a job non-concurrent like this:</p>\n\n<pre><code>&lt;property name=\"concurrent\"&gt;&lt;value&gt;false&lt;/value&gt;&lt;/property&gt;\n</code></pre>\n\n<p>I wonder how we can make the JobDetailBean jobs non-concurrent. <strong>JobDetailBean</strong> jobs run concurrently by default.</p>\n\n<p>The requirement is: jobA needs to run every 5 min but only if the previous instance of it has completed.</p>\n\n<p>Thanks,</p>\n\n<p>Shikha</p>\n"},{"tags":["java","spring","web-security","shiro","saltedhash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12896592,"title":"Having trouble with apache shiro saltedauthentication.hashProvidedCredentials not given expected hash","body":"<p>This is the second time I'm using <code>apache shiro</code> in a project but the first time am <code>salting</code> the password.this time around i use <code>apache shiro 1.2.0</code> . I'm using shiro in a web application using jsp, spring, JPA(spring-data-jpa) and using <code>SHA256</code> for encryption then <code>base64</code> before saving to database. I have a <code>SaltedJPARealm</code>, a <code>Sha256CredentialMatcher</code> which implements a HashedCredentialMatcher. this is how i do</p>\n\n<p><strong>creating a user in my controller</strong></p>\n\n<pre><code>RandomNumberGenerator rng = new SecureRandomNumberGenerator();\nByteSource salt = rng.nextBytes(10);              \n        String hashedPasswordBase64 = new Sha256Hash(signupForm.getPassword(),salt).toBase64();\n\nuserService.createUser(signupForm.getFullName(), signupForm.getEmail(), hashedPasswordBase64, salt.toBase64());\n</code></pre>\n\n<p>so supposed my password is <code>password1234</code> and the generated salt is <code>/ZFfGOcSxYhy+g==</code> so in my database i have password: <code>whb+0AihIGJ4n8QwULj1tR6qSwCrA+1BUvnoe4q4Cy4=</code> the salt in the <code>salt field in the database</code> is the same.</p>\n\n<p>In my configuration in spring is:</p>\n\n<pre><code>&lt;!--....--&gt;\n &lt;bean id=\"saltedJPARealm\" class=\"bla.bla.webapp.security.SaltedJPARealm\"&gt;\n    &lt;constructor-arg  ref=\"credMatcher\"/&gt;\n&lt;/bean&gt;\n\n    &lt;bean id=\"credMatcher\" class=\"bla.bla.webapp.security.Sha256CredentialMatcher\"&gt;\n        &lt;property name=\"storedCredentialsHexEncoded\" value=\"false\" /&gt;\n        &lt;property name=\"hashAlgorithmName\" value=\"SHA-256\" /&gt;\n        &lt;!--&lt;property name=\"hashIterations\" value=\"1024\" /&gt;--&gt;\n    &lt;/bean&gt;\n&lt;bean id=\"securityManager\" class=\"org.apache.shiro.web.mgt.DefaultWebSecurityManager\" depends-on=\"userRepository\"&gt;\n    &lt;property name=\"realm\" ref=\"saltedJPARealm\" /&gt;\n&lt;/bean&gt;\n&lt;!--....--&gt;\n</code></pre>\n\n<p><strong>login user</strong></p>\n\n<pre><code> Subject currentUser = SecurityUtils.getSubject();\n if (!currentUser.isAuthenticated()) {\n            UsernamePasswordToken token = new UsernamePasswordToken(loginForm.getEmail(), loginForm.getPassword(), loginForm.isRememberMe());\n  SecurityUtils.getSubject().login(token);\n        }\n</code></pre>\n\n<p>The <code>SaltedJPARealm's doGetAuthenticationInfo(AuthenticationToken at)</code> returns <code>SaltedAuthenticationInfo</code> after getting the user from the database :</p>\n\n<pre><code>ByteSource salt = ByteSource.Util.bytes(user.getSalt());           \nreturn new SimpleAuthenticationInfo(user, user.getPassword().toCharArray(),salt,this.getName());\n</code></pre>\n\n<p>the <code>doCredentialsMatch</code> of Sha256CredentialMatcher looks like :</p>\n\n<pre><code>    Object tokenfromSubmition = hashProvidedCredentials(token.getCredentials(),((SaltedAuthenticationInfo)info).getCredentialsSalt(),0);\n    Object passwordFromStorage =this.getCredentials(info);\n\n    Boolean match = equals(tokenfromSubmition, passwordFromStorage);\n    return match;\n</code></pre>\n\n<p>full code is available <a href=\"http://pastie.org/5061920\" rel=\"nofollow\">here on pastie</a> the authentication fails with this. but when i change the code not to salt the password(when creating account) and return AuthenticationInfo as opposed to SaltedAuthenticationInfo. it works with the same class. am wondering what exactly am doing wrong?</p>\n"},{"tags":["spring","mongodb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12968261,"title":"spring-mongodb how to get return-type of List<String>","body":"<p>For example, i just want to get the name from collection: users(name, password, age, email) , \nand the result type should be List \ni don't want to use \"foreach\" to change List to List\n how could i do?\nThanks!</p>\n"},{"tags":["spring","jpa","osgi","enterprise","aries"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12961660,"title":"How to set up Persistence with Enterprise Osgi","body":"<p>I have been exploring this area for a while and would like suggestions of what has already been done by you. I'll break down my current thoughts:</p>\n\n<p>1) <strong>Use existing implementation of Enterprise Osgi with Apache Aries or Eclipse Gemini.</strong></p>\n\n<p>Samples say, use peristence.xml in your bundle to define everything about database,classes,provider,ect. Inject EntityManager or EntityManagerFactory into some bundle DAO or ServiceImpl using blueprint.xml. Use JTA transactions declared in blueprint.xml and the entity manager for all operations.</p>\n\n<ul>\n<li>Samples seem naive, injected EntityManager is not threadsafe nor ever closed</li>\n<li>If I inject EntityManagerFactory instead, I need to create EntityManager and close it on every operation?</li>\n<li>Enterprise OSGI spec and Apache Aries are so new and immature, seems a bit scary</li>\n<li>JTA transactions defined in blueprint.xml, really there's no better way?</li>\n</ul>\n\n<p>2) <strong>Use Spring's Dynamic Modules blueprint  + Aries</strong>. </p>\n\n<p>Use Aries to deal with JPA persistence like above and use Spring DM to inject SharedEntityManagerBean into every DAO and Spring's declarative transactions through Spring's @Transactional annotation</p>\n\n<ul>\n<li>Is this even possible with Spring in OSGI? Can we use 'regular' spring in OSGI bundles?</li>\n<li>Spring DM was retired into Gemini, but how do we still use Spring?</li>\n</ul>\n\n<p>3) <strong>Custom solution</strong> (seemed to be popular pre-Enterprise OSGI)</p>\n\n<ul>\n<li>Forget Aries JPA and manually implement some Extender bundle</li>\n<li>Manually construct EntityManagerFactory by looking at what entity classes Bundles want to contribute and inject it into Bundles which will use it</li>\n<li>Bundles don't need to have persistence.xml, they just 'use a EntityManager' which may be good only if all bundles share the same database.</li>\n</ul>\n\n<p>4) <strong>Your way</strong> ?</p>\n"},{"tags":["spring","java-ee"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12967451,"title":"How do @value annotations work in Spring?","body":"<p>I've never worked with Spring before, and I've run into a configuration object that looks somewhat like this</p>\n\n<pre><code>public class Config {\n\n@Value(\"${app.module.config1\")\nprivate String config1;\n\n@Value(\"${app.module.config2\")\nprivate String config2\n\n...\n\n...\n\npublic String getConfig1() {\n    return config1;\n}\n\n...\n</code></pre>\n\n<p>Can anyone explain what is happening here? I'm assuming this is some type of code injection, but I can't find where these values are coming from!</p>\n"},{"tags":["java","spring","hsqldb","spring-webflow"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12965515,"title":"Is the name of import.sql in Spring webflow booking-faces project significant","body":"<p>I have been playing around with one of the sample Spring Webflow projects, booking-faces (Spring webflow + JSF + primefaces)</p>\n\n<p>Once the application is deployed, I am able to search the hotels from the database, which is quite amazing to me. I thought I would need to execute the sql in import.sql to populate the database first.  </p>\n\n<p>Then I search the whole project and find no where is this import.sql referenced by other configuration files. </p>\n\n<p>So it's natural for me to think hsqldb will look for all the .sql files on the classpath and execute them to populate the in-memory database. </p>\n\n<p>However, when I change the sql file name from <strong>import.sql</strong> to, say, <strong>import123.sql</strong>, the data is not inserted into db. Even changing to <strong>Import.sql</strong> is no longer working. </p>\n\n<p>So my question is</p>\n\n<ol>\n<li>Is the name of this sql file significant? Must it be <strong>import.sql</strong>? Any other choices?</li>\n<li>How can I get hsqldb to execute arbitrary sql files? </li>\n</ol>\n"},{"tags":["spring","jpa-2.0","spring-orm"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":494,"score":1,"question_id":11544157,"title":"No transaction in progress exception with Spring 3.1 and JPA 2","body":"<p>I have been at this for weeks.  I have tried eclipselink and now just plain JPA.  I keep getting the same issue.  Everytime I try to flush my entity manager I get 'javax.persistence.TransactionRequiredException: no transaction is in progress' exception.  I know its something to do with how I have everything wired but I can't figure it out.</p>\n\n<p>I have tried writing JUnit tests to test, but since I am new to spring that has a entirely different set of issue.</p>\n\n<p>Some things to note: \n<strong>I am not using a persistence.xml since I am using spring 3.1</strong>\n*<em>App Server: WebSphere 8.5 (Liberty Profile)</em>*</p>\n\n<p>exception</p>\n\n<pre><code>[ERROR   ] SRVE0777E: Exception thrown by application class 'org.springframework.web.servlet.FrameworkServlet.processRequest():894'\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress\n  at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)\n  at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\n  at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)\n  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)\n  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1221)\n  at [internal classes]\n[ERROR   ] SRVE0315E: An execption occurred: com.ibm.ws.webcontainer.webapp.WebAppErrorReport: org.springframework.web.util.NestedServletException: Request processing failed&amp;#59; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress\n    at com.ibm.ws.webcontainer.webapp.WebAppErrorReport.constructErrorReport(WebAppErrorReport.java:153)\n    at com.ibm.ws.webcontainer.webapp.WebAppErrorReport.constructErrorReport(WebAppErrorReport.java:194)\n    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1078)\n    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:4173)\n    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:302)\n    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost.handleRequest(DynamicVirtualHost.java:296)\n    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:1006)\n    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$1.run(DynamicVirtualHost.java:253)\n    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink$TaskWrapper.run(HttpDispatcherLink.java:457)\n    at com.ibm.ws.threading.internal.Worker.executeWork(Worker.java:398)\n    at com.ibm.ws.threading.internal.Worker.run(Worker.java:380)\n    at java.lang.Thread.run(Thread.java:662)\nCaused by: org.springframework.web.util.NestedServletException: Request processing failed; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)\n    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1221)\n    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:757)\n    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:440)\n    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)\n    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:92)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)\n    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\n    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)\n    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)\n    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:939)\n    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1036)\n    ... 9 more\nCaused by: javax.persistence.TransactionRequiredException: no transaction is in progress\n    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:983)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)\n    at $Proxy120.flush(Unknown Source)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)\n    at $Proxy120.flush(Unknown Source)\n    at com.smartpharm.dao.AbstractGenericDao.save(AbstractGenericDao.java:22)\n    at com.smartpharm.account.dao.impl.AccountDaoJpaImpl.createUser(AccountDaoJpaImpl.java:27)\n    at com.smartpharm.account.service.impl.AccountServiceImpl.createUser(AccountServiceImpl.java:21)\n    at com.smartpharm.account.controller.AccountController.createAccount(AccountController.java:36)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\n    ... 49 more\n</code></pre>\n\n<p>pom.xml dependencies</p>\n\n<pre><code>    &lt;properties&gt;\n        &lt;org.springframework.version&gt;3.1.1.RELEASE&lt;/org.springframework.version&gt;\n    &lt;/properties&gt;\n&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n            &lt;version&gt;1.3&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.19&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-pool&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-pool&lt;/artifactId&gt;\n            &lt;version&gt;1.6&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n            &lt;version&gt;1.3&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.14&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.lexi.lexidata&lt;/groupId&gt;\n            &lt;artifactId&gt;LexiData&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core-asl&lt;/artifactId&gt;\n            &lt;version&gt;1.9.6&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1.Final&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core-lgpl&lt;/artifactId&gt;\n            &lt;version&gt;1.9.7&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;\n            &lt;version&gt;1.9.7&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;4.1.4.Final&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;cglib&lt;/groupId&gt;\n            &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n            &lt;version&gt;2.2.2&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.10&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n\n<p>app-config.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n\n\n     &lt;context:annotation-config/&gt;\n     &lt;context:component-scan base-package=\"com.smartpharm\"/&gt;   \n\n     &lt;import resource=\"db-config.xml\"/&gt;\n     &lt;import resource=\"security-config.xml\"/&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>db-config.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:jee=\"http://www.springframework.org/schema/jee\"\n     xmlns:tx=\"http://www.springframework.org/schema/tx\"\n     xsi:schemaLocation=\"http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd\n        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"&gt;\n\n\n     &lt;jee:jndi-lookup id=\"lexiDataSource\" jndi-name=\"jdbc/lexiDb\" expected-type=\"javax.sql.DataSource\"/&gt; \n     &lt;jee:jndi-lookup id=\"smartDataSource\" jndi-name=\"jdbc/smartDb\" expected-type=\"javax.sql.DataSource\"/&gt;\n\n     &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"smartDataSource\" /&gt;\n        &lt;property name=\"packagesToScan\" value=\"com.smartPharm\" /&gt;\n        &lt;property name=\"jpaVendorAdapter\"&gt;\n           &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n              &lt;property name=\"showSql\" value=\"true\" /&gt;\n              &lt;property name=\"generateDdl\" value=\"true\" /&gt;\n              &lt;property name=\"databasePlatform\" value=\"org.hibernate.dialect.MySQL5Dialect\" /&gt;\n           &lt;/bean&gt;\n        &lt;/property&gt;\n     &lt;/bean&gt;\n\n     &lt;bean id=\"txManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\" /&gt;\n     &lt;/bean&gt;\n\n     &lt;tx:annotation-driven transaction-manager=\"txManager\" proxy-target-class=\"false\" /&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>AbstractGenericDao</p>\n\n<pre><code>package com.smartpharm.dao;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\n\nimport org.springframework.transaction.annotation.Transactional;\n\n\npublic abstract class AbstractGenericDao&lt;K,PK&gt; implements GenericDao&lt;K,PK&gt; {\n\n    @PersistenceContext\n    public EntityManager em;\n\n    public EntityManager getEntityManager() {\n        return em;\n    }\n\n    @Transactional\n    public K save(K toAdd) {\n        em.persist(toAdd);\n        em.flush();\n        return toAdd;\n    }\n\n    abstract public K find(PK pk);\n\n    public void deleteByPrimaryKey(PK pk) {\n        em.remove(find(pk));\n        em.flush();\n    }\n\n    public void delete(K toDelete) {\n        em.remove(toDelete);\n        em.flush();\n    }\n\n}\n</code></pre>\n\n<p>AccountDaoJpaImpl\n    package com.smartpharm.account.dao.impl;</p>\n\n<pre><code>import org.apache.log4j.Logger;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport com.smartpharm.account.dao.AccountDao;\nimport com.smartpharm.account.entities.User;\nimport com.smartpharm.account.model.CreateUserRequest;\nimport com.smartpharm.dao.AbstractGenericDao;\n\n@Repository\n@Transactional\npublic class AccountDaoJpaImpl extends AbstractGenericDao&lt;User, Integer&gt; implements AccountDao{\n\n    private static Logger log = Logger.getLogger(AccountDaoJpaImpl.class);\n\n    @Transactional\n    public void createUser(CreateUserRequest createUserRequest){\n        log.info(\"creating User for \" + createUserRequest.getEmailAddress());\n\n        User user = new User();\n        user.setUserName(createUserRequest.getEmailAddress());\n        user.setPassword(\"password\");\n\n        user = save(user);\n\n        log.debug(\"user \" + user.getUserId() + \" created\");\n    }\n\n\n    @Override\n    public User find(Integer pk) {\n        // TODO Auto-generated method stub\n        return null;\n    }\n}\n</code></pre>\n\n<p>AccountServiceImpl</p>\n\n<pre><code>package com.smartpharm.account.service.impl;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport com.smartpharm.account.dao.AccountDao;\nimport com.smartpharm.account.model.CreateUserRequest;\nimport com.smartpharm.account.service.AccountService;\n\n\n@Service\n@Transactional\npublic class AccountServiceImpl implements AccountService {\n\n    @Autowired\n    AccountDao accountDao;\n\n    @Transactional\n    public void createUser(CreateUserRequest request){\n        accountDao.createUser(request);\n    }\n}\n</code></pre>\n\n<p>AccountController</p>\n\n<pre><code>package com.smartpharm.account.controller;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.apache.log4j.Logger;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport com.smartpharm.account.model.CreateUserRequest;\nimport com.smartpharm.account.model.CreateUserResponse;\nimport com.smartpharm.account.service.AccountService;\n\n@Controller\npublic class AccountController {\n\n    private static Logger log = Logger.getLogger(AccountController.class);\n\n    @Autowired\n    AccountService accountService;\n\n    public AccountController(){\n    }\n\n    @RequestMapping(value=\"/admin/createUser\", method=RequestMethod.POST)\n    public @ResponseBody CreateUserResponse createAccount(@RequestBody CreateUserRequest createUserRequest, HttpServletRequest request, HttpServletResponse response){\n        log.debug(createUserRequest);\n\n        accountService.createUser(createUserRequest);\n\n        return new CreateUserResponse(\"userCreated\", \"no error\");\n    }\n\n}\n</code></pre>\n\n<p>Also in the log right before it tries to commit at the DB layer I see log that it created then destroyed an EntityManager twice</p>\n\n<pre><code>DEBUG AccountController - CreateUserRequest \nfirstName = test\nmiddleInit = test\nlastName = tset\nemailAddress = test\ndob = \naddress1 = \naddress2 = \ncity = \nstate = \nzip = \n\n\nINFO  AccountDaoJpaImpl - creating User for test\n\nDEBUG SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation\n\nDEBUG SessionImpl - Opened session at timestamp: 13426274946\n\nDEBUG EntityManagerFactoryUtils - Closing JPA EntityManager\n\nDEBUG SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation\n\nDEBUG SessionImpl - Opened session at timestamp: 13426274950\n\nDEBUG EntityManagerFactoryUtils - Closing JPA EntityManager\n</code></pre>\n"},{"tags":["java","multithreading","spring","deadlock","apache-commons-dbcp"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1978,"score":2,"question_id":5714511,"title":"Deadlock issue in DBCP deployed on Tomcat","body":"<p>I'm using DBCP data source (with default configuration) in Spring configuration to manage my connections to the database, and I'm running into a deadlock condition when the number of clients increase.</p>\n\n<p>I found that there is a deadlock issue in DBCP 1.2.1 which I was using, which was supposed to be resolved in 1.4. So I upgraded to 1.4, but the issue still persists.</p>\n\n<p>In the thread dump, there are many threads blocked with the following stack trace on top:</p>\n\n<pre><code>   java.lang.Thread.State: WAITING on org.apache.commons.pool.impl.GenericObjectPool$Latch@b6b09e\nat java.lang.Object.wait(Native Method)\nat java.lang.Object.wait(Object.java:485)\nat org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1104)\nat org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)\nat org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\nat org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:200)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:350)\nat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:261)\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:101)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:160)\nat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\nat org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:631)\n</code></pre>\n\n<p>Any suggestions are welcome!</p>\n"},{"tags":["spring","jpa"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":344,"score":2,"question_id":11357817,"title":"Entity manager does not persist data in the DB","body":"<p>Trough the entity manager I'm tryng to persist the entity in the database but I don manage to persists it. Here goes my configuration.</p>\n\n<p>I have this Entity:</p>\n\n<pre><code>@Entity\n@Table(name = \"User\")\npublic class UserModel implements Serializable, ModelItem {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Integer id;\n\n    @Column(nullable = false)\n    private String username;\n\n    @Column(nullable = false)\n    private String password;\n\n    @Column(nullable = false)\n    private String name;\n\n    private String surname;\n\n    private String notes;\n\n    private String cellphone;\n\n    @Column(nullable = false)\n    private String email;\n\n    private Boolean enabled;\n\n    //get and set methods\n    .....\n}\n</code></pre>\n\n<p>and my import bean that does the persistence:</p>\n\n<pre><code>@Repository\npublic class ImportServiceImpl implements ImportService {\n\n    @PersistenceContext\n    protected EntityManager entityManager;\n\n    @Transactional\n    public boolean importExample() {\n        User u= new User();\n        u.setUsername(\"username\");\n        u.setPassword(\"password\");\n        u.setName(\"name\");\n        u.setEmail(\"email\");\n        entityManager.persist(u);\n    }\n}\n</code></pre>\n\n<p>The spring configuration for the entity manager and the db connction:</p>\n\n<pre><code>&lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n&lt;bean class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n&lt;tx:annotation-driven /&gt;\n&lt;bean class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\"/&gt; \n&lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"jpaVendorAdapter\"&gt;\n        &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n            &lt;property name=\"showSql\" value=\"true\" /&gt; &lt;!-- Prints used SQL to stdout --&gt;\n            &lt;property name=\"generateDdl\" value=\"true\" /&gt; &lt;!-- Generates tables. --&gt;\n            &lt;property name=\"databasePlatform\" value=\"org.hibernate.dialect.MySQL5Dialect\" /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n&lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"/&gt;\n    &lt;property name=\"url\"&gt;\n        &lt;value&gt;${db.url}&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"username\"&gt;\n        &lt;value&gt;${db.username}&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"password\"&gt;\n        &lt;value&gt;${db.password}&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n    &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>and my persistence.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\"\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\"\n             version=\"1.0\"&gt;\n    &lt;persistence-unit name=\"application\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n    &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.connection.url\" value=\"jdbc:mysql://localhost:3306/testdata\"/&gt;\n            &lt;property name=\"hibernate.connection.driver_class\" value=\"com.mysql.jdbc.Driver\"/&gt;\n            &lt;property name=\"hibernate.connection.password\" value=\"password\"/&gt;\n            &lt;property name=\"hibernate.connection.username\" value=\"root\"/&gt;\n            &lt;property name=\"hibernate.hbm2ddl.auto\" value=\"create-drop\"/&gt;\n        &lt;/properties&gt;\n\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>So when I run my example I don't get any error but entity is not persisted. I also tryied to add entityManager.flush() after persist but in this case i get this error:</p>\n\n<pre><code>javax.persistence.TransactionRequiredException: no transaction is in progress\n    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:793)\n</code></pre>\n\n<p>So I'm thinking my Transactional bean is not well binded to the method, but I can not understand the reason. Somebody knows why?</p>\n\n<p>I also noticed in STS that for this transaction are generated 2 beans with same data it looks strange (I don't know if it is a bug of STS or is a problem in my configuration that creates 2 beans):</p>\n\n<p><img src=\"http://i.stack.imgur.com/fxx83.png\" alt=\"enter image description here\"> </p>\n"},{"tags":["spring","dependency-injection"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12959544,"title":"When using Dependency Injection, how do I ignore missing properties?","body":"<p>I'm trying to make my application backwards compatible to at least one previous version. The biggest issue I'm having is expected properties that don't exist in the old properties file.</p>\n\n<p>For instance, let's say the old properties file looks like this:</p>\n\n<pre><code>prop.old=some text\n</code></pre>\n\n<p>The new properties file looks like this:</p>\n\n<pre><code>prop.old=some text\nprop.new=some new text\n</code></pre>\n\n<p>And the relevant section of the new app-context.xml looks like this:</p>\n\n<pre><code>&lt;beans:bean id=\"myClass\" class=\"com.mycompany.MyClass\"&gt;\n    &lt;beans:property name=\"oldThing\" value=\"${prop.old}\" /&gt;\n    &lt;beans:property name=\"newThing\" value=\"${prop.new}\" /&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n\n<p>Obviously, this will blow up at runtime. Is there a way to check if the property exists and, if it doesn't, using an empty string instead?</p>\n"},{"tags":["spring","grails","constraints"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12960272,"title":"Imported unique constraints doesn't get validated","body":"<p>I have a Spring Security User class which has a unique constraint for username and email. In a Command class I imported all constraints from this class with \"importFrom User\". All constraints work as expected EXCEPT the unique ones.</p>\n\n<p>However when saving the User the unique constraints get validated and errors are shown. But it would be nice if they get validated BEFORE saving like all other constraints.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I added this to the controller:</p>\n\n<pre><code>user.errors.fieldErrors.each {\n    command.errors.rejectValue(it.getField(), it.getCode())\n}\n</code></pre>\n\n<p>Seems like a dirty workaround, but it works.</p>\n"},{"tags":["java","spring","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":12881699,"title":"Junit class in spring","body":"<p>I am getting error on this code :</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"classpath:applicationContext.xml\" })\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>file not found exception\n</code></pre>\n\n<p>Please help me.</p>\n"},{"tags":["java","database","spring","dao","jdbctemplate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":159,"score":0,"question_id":12964709,"title":"Generic DAO pattern Spring JDBC Template","body":"<p>It's been a while since had to implement this pattern from the beginning so I am a bit confused on what I am missing about using this pattern with spring jdbc.  Here is a snippet from my BaseDao:</p>\n\n<pre><code>    protected BaseDao(RowMapper&lt;T&gt; rowMapper, String tableName, JdbcTemplate jdbcTemplate)\n   {\n      this.rowMapper = rowMapper;\n      this.tableName = tableName;\n      this.findByIdSql = \"SELECT * FROM \" + tableName + \" WHERE id = ?\";\n      this.jdbcTemplate = jdbcTemplate;\n   }\n\n   public T findById(final Integer id)\n   {\n      if (id == null)\n      {\n         return null;\n      }\n\n      Object[] params = { id };\n      return jdbcTemplate.queryForObject(findByIdSql, params, rowMapper);\n   }\n\n   public T save(final T dto)\n   {\n      if (dto == null)\n      {\n         return null;\n      }\n\n      try\n      {\n         if (dto.isNew())\n         {\n            final Integer newId = jdbcTemplate.update(\"INSERT INTO \" + tableName);\n         }\n      }\n      catch (UncategorizedSQLException e)\n      {\n         logger.error(\"****************\" + e.getMessage(), e);\n         throw new RuntimeException(\"Could not persist: \" + e.getMessage());\n      }\n   }\n\n   public void delete(final T dto)\n   {\n      if (dto == null)\n      {\n         final String errorMessage = \"Can't delete a null object\";\n         logger.warn(errorMessage);\n         throw new RuntimeException(errorMessage);\n      }\n\n      if (!dto.cameFromDatabase())\n      {\n         throw new RuntimeException(\"Can't delete an object that didn't come from the database\");\n      }\n\n      try\n      {\n\n      }\n      catch (JdbcUpdateAffectedIncorrectNumberOfRowsException e)\n      {\n         final String message = \"The delete failed on \" + dto + \".  \" + e.getMessage();\n         logger.error(message);\n         throw new RuntimeException(message, e);\n\n      }\n   }\n</code></pre>\n\n<p>As you can see I got my findById working and able to handle any class thrown at it.  The trouble is I don't recall on how to \"generify\" the save (handles insert and update) and delete using simply the jdbctemplate.  Can this not be accomplished?  Does every DAO need to define these two methods itself?  I don't see how jdbc template can flex to writing seperate insert, update, delete statements.  Browsing the web I see tons of examples using hibernate or an entitymanager.  Is this the route I should take?  Or what is the plainly obvious step I am missing here?</p>\n\n<p>I know the save and delete are not filled out but I'm just wondering how to handle the line </p>\n\n<pre><code>final Integer newId = jdbcTemplate.update(\"INSERT INTO \" + tableName);\n</code></pre>\n\n<p>To handle any DTO thrown at it.</p>\n\n<p>Thank you kindly!</p>\n"},{"tags":["spring","jms","activemq","jmstemplate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12960232,"title":"Issue or confusion with JMS/spring/AMQ not processing messages asynchronously","body":"<p>We have a situation where we set up a component to run batch jobs using spring batch remotely.  We send a JMS message with the job xml path, name, parameters, etc. and we wait on the calling batch client for a response from the server.</p>\n\n<p>The server reads the queue and calls the appropriate method to run the job and return the result, which our messaging framework does by: </p>\n\n<pre><code>    this.jmsTemplate.send(queueName, messageCreator);\n    this.LOGGER.debug(\"Message sent to '\" + queueName + \"'\");\n\n    try {\n        final Destination replyTo = messageCreator.getReplyTo();\n        final String correlationId = messageCreator.getMessageId();\n\n        this.LOGGER.debug(\"Waiting for the response '\" + correlationId + \"' back on '\" + replyTo + \"' ...\");\n        final BytesMessage message = (BytesMessage) this.jmsTemplate.receiveSelected(replyTo, \"JMSCorrelationID='\"\n                + correlationId + \"'\");\n        this.LOGGER.debug(\"Response received\");\n</code></pre>\n\n<p>Ideally, we want to be able to call out runJobSync method twice, and have two jobs simultaneously operate.  We have a unit test that does something similar, without jobs.  I realize this code isn't very great, but, here it is:</p>\n\n<p>final List result = Collections.synchronizedList(new ArrayList());      </p>\n\n<pre><code>    Thread thread1 = new Thread(new Runnable(){\n\n        @Override\n        public void run() {\n            client.pingWithDelaySync(1000); \n            result.add(Thread.currentThread().getName());\n        }\n\n    }, \"thread1\");\n\n    Thread thread2 = new Thread(new Runnable(){\n\n        @Override\n        public void run() {\n            client.pingWithDelaySync(500);              \n            result.add(Thread.currentThread().getName());\n        }\n\n    }, \"thread2\");\n\n    thread1.start();\n    Thread.sleep(250);\n    thread2.start();\n\n    thread1.join();\n    thread2.join();\n\n    Assert.assertEquals(\"both thread finished\", 2, result.size());\n    Assert.assertEquals(\"thread2 finished first\", \"thread2\", result.get(0));\n    Assert.assertEquals(\"thread1 finished second\", \"thread1\", result.get(1));\n</code></pre>\n\n<p>When we run that test, thread 2 completes first since it just has a 500 millisencond wait, while thread 1 does a 1 second wait:</p>\n\n<pre><code>Thread.sleep(delayInMs);\n    return result;\n</code></pre>\n\n<p>That works great.\nWhen we run two remote jobs in the wild, one which takes about 50 seconds to complete and one which is designed to fail immediately and return, this does not happen.</p>\n\n<p>Start the 50 second job, then immediately start the instant fail job.  The client prints that we sent a message requesting that the job run, the server prints that it received the 50 second request, but waits until that 50 second job is completed before handling the second message at all, even though we use the ThreadPoolExecutor.</p>\n\n<p>We are running transactional with Auto acknowledge.</p>\n\n<p>Doing some remote debugging, the Consumer from AbstractPollingMessageListenerContainer shows no unhandled messages (so consumer.receive() obviously just returns null over and over).  The webgui for the amq broker shows 2 enqueues, 1 deque, 1 dispatched, and 1 in the dispatched queue.  This suggests to me that something is preventing AMQ from letting the consumer \"have\" the  second message.  (prefetch is 1000 btw)\nThis shows as the only consumer for the particular queue.</p>\n\n<p>Myself and a few other developers have poked around for the last few days and are pretty much getting nowhere.  Any suggestions on either, what we have misconfigured if this is expected behavior, or, what would be broken here.</p>\n\n<p>Does the method that is being remotely called matter at all?  Currently the job handler method uses an executor to run the job in a different thread and does a future.get() (the extra thread is for reasons related to logging).</p>\n\n<p>Any help is greatly appreciated</p>\n"},{"tags":["java","spring","callback","rmi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12962164,"title":"Pooling data from server using RMI and springs","body":"<p>I am new to RMI and springs and need a little help with a feature we are implementing.</p>\n\n<p>We are creating chat software with java and want to use RMI with springs. \nI can setup a client server interaction fairly easily using RMIServerExporter, interfaces, etc.</p>\n\n<p>The problem I can get my head around is that the client needs to pool data from the server. We need to get keep checking for new messages. \nWe can't push data from the server for other reasons.</p>\n\n<p>How do I go about setting up RMI with springs so that the client pools data from the server. I have looked up callbacks but this involved pushing from the server!?</p>\n\n<p>Is there away to do this. Let me know if you need to me explain this further</p>\n"},{"tags":["java","spring","spring-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12964509,"title":"Is possible to access URL via Controller with different directory?","body":"<p>My basic module in project is accessible via this url:</p>\n\n<pre><code>http://localhost:8080/basic/\n</code></pre>\n\n<p>I have defined controller with mapping <code>@RequestMapping(\"/webpage.htm\")</code>. So as we expect, this view is accessible via this URL: <code>http://localhost:8080/basic/webpage.htm</code>.</p>\n\n<p>But I have also another module in my application. This module is accessible via URL like this:</p>\n\n<pre><code>http://localhost:8080/another/\n</code></pre>\n\n<p>And at this moment I would like to make mapping like this one: <code>http://localhost:8080/another/webpage.htm</code>. Is possible to handle this request by the same controller?</p>\n\n<p>I have tried to do something like this in my controller:</p>\n\n<pre><code>@RequestMapping(\"/{module}/webpage.htm\")\npublic ModelAndView handleMyRequest(@PathVariable(\"module\") String module, \n                    HttpServletRequest request, HttpServletResonse response) {\n    //my code\n}\n</code></pre>\n\n<p>But this isn't working. Of course I can now access my view by new URL: <code>http://localhost:8080/basic/something/webpage.htm</code>.</p>\n\n<p>According to this <a href=\"http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules</a> can I make working in this way mapping?</p>\n"},{"tags":["java","spring","profiles"],"answer_count":3,"favorite_count":5,"up_vote_count":9,"down_vote_count":0,"view_count":2309,"score":9,"question_id":10041410,"title":"Default profile in Spring 3.1","body":"<p>In my application I have beans annotated with <code>@Profile(\"prod\")</code> and <code>@Profile(\"demo\")</code>.\nThe first one, as you can guess :), is used on beans that connect to production DB and second one annotates beans that use some fake DB (<code>HashMap</code> or whatever)- to make development faster.</p>\n\n<p>What I would like to have is default profile (<code>\"prod\"</code>) that will be used always if it is not overridden by \"<em>something-else</em>\".</p>\n\n<p>Perfect would be to have in my <code>web.xml</code>:</p>\n\n<pre><code>&lt;context-param&gt;\n     &lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;\n     &lt;param-value&gt;prod&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n\n<p>and then override this with <code>-Dspring.profiles.active=\"demo\"</code> so that I could do:</p>\n\n<pre><code>mvn jetty:run -Dspring.profiles.active=\"demo\". \n</code></pre>\n\n<p>But sadly this is not working. Any idea how could I achive that? Setting <code>-Dspring.profiles.active=\"prod\"</code> on all my environments  is not an option.</p>\n"},{"tags":["java","spring","jdbc","c3p0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4383,"score":0,"question_id":3449322,"title":"How to log JDBC connection info on org.springframework.jdbc.CannotGetJdbcConnectionException","body":"<p>I'm working on an application which uses the Spring framework in combination with Ibatis and a C3P0 Connection pool. The system connects to about 12 seperate databases.</p>\n\n<p>When one of the databases is unreachable, I get a stacktrace in the logfile which is generated by Spring (see below). However, this logging is missing very vital information on WHICH of the databases can not be reached.</p>\n\n<p>Basically, I would like the jdbc connection string (sans Passwords) to be logged upon connection errors. Is there an easy way to tell Spring to log this?</p>\n\n<pre><code>Invocation of init method failed; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is java.sql.SQLException: Connections could not be acquired from the underlying database!\nCaused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is java.sql.SQLException: Connections could not be acquired from the underlying database!\nCaused by: java.sql.SQLException: Connections could not be acquired from the underlying database!\n        at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106)\n        at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:529)\n        at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)\n        at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:113)\n        at org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy.getConnection(TransactionAwareDataSourceProxy.java:109)\n        at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:113)\n        at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79)\n        at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:183)\n        at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForObject(SqlMapClientTemplate.java:242)\n</code></pre>\n\n<p>....</p>\n"},{"tags":["spring","validation","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":109,"score":0,"question_id":12945880,"title":"Spring Mvc @InitBinder Validation","body":"<p>I have a <strong>Spring MVC</strong> application and i have a Validation class that implements <strong>Validator</strong>. This validation class is called in the controller using the <strong>@InitBinder</strong> annotation. This validation occurs before inserting a record into the database however when i want to do an update i would not need all the fields to be validated from this validation class. I insert a record and update using the same view and the view has a controller that handles the insert and update based on <strong>HttpRequest</strong>.</p>\n\n<p>Is there a way in the Validation class where i can specify the request the user makes so i wont validate the userName again since its an update. </p>\n\n<p>Is it that i would have to pass in an Http Request to this class and then receive the user defined operation in the class and then use it to tweak my validation based on operation, if so how can it be done? I want to validate certain fields in the validation class based on the users request either and insert into th database or an update.</p>\n\n<p><strong>Validation class</strong></p>\n\n<pre><code>public class OfficerRegistrationValidation implements Validator{\n\n\n    private final Logger logger = Logger.getLogger(getClass());\n\n    @Autowired\n    public ValidateUserManager validateUserManager;\n\n    public boolean supports(Class&lt;?&gt; clazz) {\n\n        return Officers.class.equals(clazz);\n    }\n\n\n    public void validate(Object target, Errors errors) {\n\n        Officers officer = (Officers) target;\n\n\n\n    if (officer.getUserName() == null){.......................\n</code></pre>\n\n<p><strong>Controller function that handles request</strong></p>\n\n<pre><code> @RequestMapping(value=\"officer_registration.htm\", method=RequestMethod.POST)\n     public ModelAndView handleRequest(@Valid @ModelAttribute Officers officer, \n                                        BindingResult result,\n                                        ModelMap m,\n                                        Model model,\n                                        HttpServletRequest request,\n                                        HttpServletResponse response)throws Exception{\n\n         try{\n             if(result.hasErrors()){\n\n                 model.addAttribute(\"division\", myDivision);\n                 model.addAttribute(\"position\", myPosition);\n                 model.addAttribute(\"gender\", myGender);\n                 return new ModelAndView(\"officer_registration\");\n\n            }else{\n\n                //check the request if its an update or an insert\n                String user_request = request.getParameter(\"user_request\");\n                logger.info(\"The Users Request Was \" + user_request);\n\n                if (user_request.equals(\"Save\")){\n\n                        officerManager.RegisterOfficer(officer);\n                        model.addAttribute(\"badgeNoStatus\",\"true\");\n                        model.addAttribute(\"saveBtnStatus\",\"disabled\");\n                        model.addAttribute(\"userNameStatus\",\"true\");\n                        model.addAttribute(\"startDateStatus\",\"true\");\n                        model.addAttribute(\"icon\",\"ui-icon ui-icon-circle-check\");\n                        model.addAttribute(\"results\",\"Record Was Saved\");\n\n                }else{//if its an update\n                    //only need certain validation from the validation class here \n                    officerManager.UpdateOfficer(officer);\n</code></pre>\n\n<p>.......................</p>\n\n<p><strong>UPDATED 2012-10-18</strong></p>\n\n<p>when i annotate the class with @Component and add @Autowired private HttpServletRequest request together with the getters and setters for this i am getting the following error:</p>\n\n<p><strong>Error Log</strong></p>\n\n<pre><code>java.lang.NullPointerException\n    at org.apache.commons.dbcp.BasicDataSource.close(BasicDataSource.java:486)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:300)\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:226)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442)\n    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\n    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)\n    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)\n    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    at java.lang.Thread.run(Unknown Source)\n1580 [http-8084-2] ERROR org.springframework.web.context.ContextLoader  - Context initialization failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'officerRegistrationValidation' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.crimetrack.service.OfficerRegistrationValidation]: Constructor threw exception; nested exception is java.lang.NullPointerException\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\n    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)\n    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)\n    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.crimetrack.service.OfficerRegistrationValidation]: Constructor threw exception; nested exception is java.lang.NullPointerException\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)\n    ... 36 more\nCaused by: java.lang.NullPointerException\n    at com.crimetrack.service.OfficerRegistrationValidation.&lt;init&gt;(OfficerRegistrationValidation.java:30)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)\n    ... 38 more\n</code></pre>\n\n<p><strong>Error Log after adding org.springframework.web.context.ContextLoaderListener</strong></p>\n\n<pre><code>850  [http-8084-2] DEBUG org.springframework.beans.factory.support.DisposableBeanAdapter  - Invoking destroy method 'close' on bean with name 'dataSource'\n850  [http-8084-2] WARN  org.springframework.beans.factory.support.DisposableBeanAdapter  - Invocation of destroy method 'close' failed on bean with name 'dataSource'\njava.lang.NullPointerException\n    at org.apache.commons.dbcp.BasicDataSource.close(BasicDataSource.java:486)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:300)\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:226)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442)\n    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\n    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)\n    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)\n    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    at java.lang.Thread.run(Unknown Source)\n850  [http-8084-2] ERROR org.springframework.web.context.ContextLoader  - Context initialization failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'officerRegistrationValidation' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.crimetrack.service.OfficerRegistrationValidation]: Constructor threw exception; nested exception is java.lang.NullPointerException\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\n    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)\n    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)\n    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.crimetrack.service.OfficerRegistrationValidation]: Constructor threw exception; nested exception is java.lang.NullPointerException\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)\n    ... 36 more\nCaused by: java.lang.NullPointerException\n    at com.crimetrack.service.OfficerRegistrationValidation.&lt;init&gt;(OfficerRegistrationValidation.java:31)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)\n    ... 38 more\n</code></pre>\n\n<p><strong>ApplicationContext.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xmlns:aop=\"http://www.springframework.org/schema/aop\"\n         xmlns:tx=\"http://www.springframework.org/schema/tx\"\n         xmlns:context=\"http://www.springframework.org/schema/context\"\n\n         xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n           http://www.springframework.org/schema/aop \n           http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n           http://www.springframework.org/schema/tx \n           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n           http://www.springframework.org/schema/context\n           http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt; \n\n&lt;!-- __________________________________________________________________________________________________ --&gt;        \n\n    &lt;bean id=\"officerManager\" class=\"com.crimetrack.service.OfficerManager\"&gt;\n        &lt;property name =\"officerDao\" ref=\"officerDao\"/&gt;\n    &lt;/bean&gt;         \n&lt;!-- __________________________________________________________________________________________________ --&gt;              \n\n    &lt;bean id=\"countryManager\" class=\"com.crimetrack.service.CountryManager\"&gt;\n        &lt;property name=\"countryDao\" ref=\"countryDao\"/&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"countryDao\" class=\"com.crimetrack.jdbc.JdbcCountryDAO\"&gt;\n        &lt;constructor-arg index=\"0\" ref=\"dataSource\"/&gt;\n    &lt;/bean&gt;\n&lt;!-- __________________________________________________________________________________________________ --&gt;\n\n    &lt;bean id=\"authenticationManager\" class=\"com.crimetrack.service.AuthenticationManager\"&gt;\n        &lt;property name=\"loginDao\" ref=\"loginDao\" /&gt; \n    &lt;/bean&gt;    \n    &lt;bean id=\"loginDao\" class=\"com.crimetrack.jdbc.JdbcLoginDAO\"&gt;\n         &lt;constructor-arg index=\"0\" ref=\"dataSource\"/&gt;\n    &lt;/bean&gt;\n&lt;!-- __________________________________________________________________________________________________ --&gt;  \n\n    &lt;bean id=\"divisionManager\" class=\"com.crimetrack.service.DivisionManager\"&gt;\n        &lt;property name=\"divisionDao\" ref=\"divisionDao\"/&gt;\n    &lt;/bean&gt;    \n    &lt;bean id=\"divisionDao\" class=\"com.crimetrack.jdbc.JdbcDivisionDAO\"&gt;\n         &lt;constructor-arg index=\"0\" ref=\"dataSource\"/&gt;\n    &lt;/bean&gt;\n&lt;!-- __________________________________________________________________________________________________ --&gt;    \n\n     &lt;bean id=\"positionManager\" class=\"com.crimetrack.service.PositionManager\"&gt;\n        &lt;property name=\"positionDao\" ref=\"positionDao\"/&gt;\n    &lt;/bean&gt;    \n    &lt;bean id=\"positionDao\" class=\"com.crimetrack.jdbc.JdbcPositionDAO\"&gt;\n         &lt;constructor-arg index=\"0\" ref=\"dataSource\"/&gt;\n    &lt;/bean&gt;      \n&lt;!-- __________________________________________________________________________________________________ --&gt;    \n\n    &lt;bean id=\"genderManager\" class=\"com.crimetrack.service.GenderManager\"&gt;\n        &lt;property name=\"genderDao\" ref=\"genderDao\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"genderDao\" class=\"com.crimetrack.jdbc.JdbcGenderDAO\" &gt;\n         &lt;constructor-arg index=\"0\" ref=\"dataSource\"/&gt;\n    &lt;/bean&gt; \n&lt;!-- __________________________________________________________________________________________________ --&gt; \n\n    &lt;bean id=\"officerRegistrationValidation\" class=\"com.crimetrack.service.OfficerRegistrationValidation\"&gt;\n        &lt;property name=\"validateUserManager\" ref=\"validateUserManager\"/&gt;            \n    &lt;/bean&gt;\n\n    &lt;bean id=\"validateUserManager\" class=\"com.crimetrack.service.ValidateUserManager\"&gt;\n            &lt;property name=\"officerDao\" ref=\"officerDao\"/&gt;\n    &lt;/bean&gt;\n\n\n    &lt;bean id=\"officerDao\" class=\"com.crimetrack.jdbc.JdbcOfficersDAO\" &gt;\n            &lt;constructor-arg index=\"0\" ref=\"dataSource\"/&gt;\n    &lt;/bean&gt;         \n&lt;!-- __________________________________________________________________________________________________ --&gt; \n\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\"&gt;\n            &lt;property name=\"driverClassName\" value=\"${jdbc.driverClassName}\"/&gt;\n            &lt;property name=\"url\" value=\"${jdbc.url}\"/&gt;\n            &lt;property name=\"username\" value=\"${jdbc.username}\"/&gt;\n            &lt;property name=\"password\" value=\"${jdbc.password}\"/&gt;\n    &lt;/bean&gt;\n&lt;!-- __________________________________________________________________________________________________ --&gt;    \n\n    &lt;bean id=\"propertyConfigurer\" \n          class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:jdbc.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;!-- __________________________________________________________________________________________________ --&gt;    \n\n    &lt;bean id=\"transactionManager\" \n          class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;/bean&gt;\n\n\n\n\n\n  &lt;/beans&gt;\n</code></pre>\n"},{"tags":["java","spring","hibernate","annotations","inner-classes"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":103,"score":5,"question_id":12955201,"title":"Hibernate session within inner class","body":"<p>I have an issue with getting session on anonymus inner class in hibernate with spring session factory.\nHere is the code:</p>\n\n<pre><code>public class DomainDaoImpl extends BasicDaoImpl&lt;Domain&gt; implements Iterable&lt;Collection&lt;Domain&gt;&gt; {\n\n...\n\n@Override\npublic Iterator&lt;Collection&lt;Domain&gt;&gt; iterator() {\n    return (new Iterator&lt;Collection&lt;Domain&gt;&gt;() {\n        private int counter = 0;\n        public static final int LIMIT = 100;\n\n        ...\n\n        @Override\n        @Transactional(readOnly = true)\n        public Collection&lt;Domain&gt; next() {\n            final Criteria criteria = getCurrentSession().createCriteria(Domain.class);\n            final LinkedHashSet&lt;Domain&gt; result = new LinkedHashSet&lt;Domain&gt;();\n\n            List resultList = null;\n            while (!(resultList = criteria.list()).isEmpty()) {\n                criteria.setFirstResult((counter++ * LIMIT) + 1);\n                criteria.setMaxResults(LIMIT);\n                result.addAll(resultList);\n            }\n            return result;\n        }\n\n        ...\n    });\n</code></pre>\n\n<p>The issue is <em>org.hibernate.HibernateException: No Session found for current thread</em>\nthis happens usually when DAO method is not within transaction.\nSo how to make it work with an inner class?</p>\n"},{"tags":["java","spring","classpath","axis2","spring-ws"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12944811,"title":"Spring webservicetemplate jar conflict issue with Axis2","body":"<p>I use Spring web services and Axis2 both in my app. They are completely independent and it works great, except that Spring WebServiceTemplate started throwing the exception below..</p>\n\n<p>I suspect it's happening because Spring requires saaj.jar (which has javax.xml.soap.SOAPElement) and Axis2 requires axiom-dom.jar (which has org.apache.axiom.om.impl.dom.ElementImpl)</p>\n\n<p>Both the interfaces extend org.w3c.dom.Element and somehow Spring in picking up the one from axiom-dom.jar</p>\n\n<p>Any ideas as to what i can do to prevent Spring from picking up the wrong implementation at runtime other than perhaps renaming axiom-dom.jar to z-axiom-dom.jar, so its later in the classpath?</p>\n\n<p>com.sun.xml.wss.XWSSecurityException: com.sun.xml.wss.XWSSecurityException: <strong>java.lang.ClassCastException: org.apache.axiom.om.impl.dom.ElementImpl cannot be cast to javax.xml.soap.SOAPElement</strong>\n         at org.springframework.ws.soap.security.xwss.XwsSecurityInterceptor.secureMessage(XwsSecurityInterceptor.java:139)\n         at org.springframework.ws.soap.security.AbstractWsSecurityInterceptor.handleRequest(AbstractWsSecurityInterceptor.java:179)\n         at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:542)\n         at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:502)\n         at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:351)\n         at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:341)</p>\n"},{"tags":["java","spring","maven","spring-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12961394,"title":"How to autowire service in another module?","body":"<p>I am working on application which contains few sub modules. On one of these modules I have service with header like this:</p>\n\n<pre><code>@Transactional\n@Service(\"mySimpleService\")\npublic class MySimpleServiceImpl implements MySimpleService {}\n</code></pre>\n\n<p>On the another module I have a controller in which I would like to use one of the MySimpleService method. So I have something similar to this:</p>\n\n<pre><code>@Controller\npublic class EasyController {    \n\n    @Autowired\n    private MySimpleService mySimpleService;\n\n    @RequestMapping(\"/webpage.htm\")\n    public ModelAndView webpage(@RequestParam , @RequestParam, HttpServletRequest request, HttpServletResponse response) {\n        ModelAndView mav = new ModelAndView(”webpage”);\n        mav.addObject(”name”, mySimpleService.getObject());\n        return mav;\n    }\n}\n</code></pre>\n\n<p>On the line <code>mav.addObject(”name”, mySimpleService.getObject());</code> I am getting <code>NullPointerException</code>. I don't know why. I am not getting error similar to <code>Could not autowire field</code> but only <code>NullPointerException</code>.</p>\n\n<p>I have also created my own interceptor in this way to check some another ideas in my task:</p>\n\n<pre><code>public class CustomInterceptor extends HandlerInterceptorAdapter {\n\n    @Autowired\n    private MySimpleService mySimpleService;\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, \n                             HttpServletResponse response, Object handler)\n                             throws Exception {         \n        request.setAttribute(\"attr\", mySimpleService.getAttribute());\n        return true;\n    }    \n}\n</code></pre>\n\n<p>This interceptor is of course declared in dispatcher servlet. In my logs I can see <code>NullPointerException</code> at line: <code>request.setAttribute(\"attr\", mySimpleService.getAttribute());</code>. So this is exactly problem with getting access to service from another application module.</p>\n\n<p>How can I achieve this?</p>\n\n<p>I have heard about ideas like building EJB with my service and share it using <code>JNDI</code> or using Maven - copy folder with my service to target module during building application. I have tried to do the second option but it isn't working and I can't check if the coping was successful. Is possible to check Maven based solution? Do you have another suggestions?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>This is component scaning from target module dispatcher servlet:</p>\n\n<pre><code>&lt;context:component-scan base-package=\"my.package.target.module.controller\" annotation-config=\"false\"/&gt;\n</code></pre>\n"},{"tags":["java","spring","xsd","jaxb","marshalling"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1494,"score":3,"question_id":4803464,"title":"Why check for root element is required in Jaxb2Marshaller?","body":"<p>I am using Jaxb2Marshaller to marshal Java beans through spring @ResponseBody annotation. For JSON marshaling was working fine. But for xml I was continuously getting HTTP 406 response. Little bit digging in Jaxb2Marshaller class reveals it checks for @XmlRootElement for bounded classes (see below snippet). </p>\n\n<p>While generating java code from xsd my pojo does not contain @XmlRootElement and proper message converter was not identified by AnnotationMethodHandlerAdapter and finally result in 406.</p>\n\n<p>Instead of auto generating java code from xsd I have created my own pojo class and used @XmlRootElement. Then marshaling works fine.</p>\n\n<p>I want to understand why it is important of having @XmlRootElement check for bounded classes. Or any way to specify element as @XmlRootElement in xsd.</p>\n\n<p>Code snippet from Jaxb2Marshaller:</p>\n\n<pre><code>public boolean supports(Class clazz) {\n    return supportsInternal(clazz, true);\n}\n\nprivate boolean supportsInternal(Class&lt;?&gt; clazz, boolean checkForXmlRootElement) {\n    if (checkForXmlRootElement &amp;&amp; clazz.getAnnotation(XmlRootElement.class) == null) {\n        return false;\n    }\n    if (clazz.getAnnotation(XmlType.class) == null) {\n        return false;\n    }\n    if (StringUtils.hasLength(getContextPath())) {\n        String className = ClassUtils.getQualifiedName(clazz);\n        int lastDotIndex = className.lastIndexOf('.');\n        if (lastDotIndex == -1) {\n            return false;\n        }\n        String packageName = className.substring(0, lastDotIndex);\n        String[] contextPaths = StringUtils.tokenizeToStringArray(getContextPath(), \":\");\n        for (String contextPath : contextPaths) {\n            if (contextPath.equals(packageName)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    else if (!ObjectUtils.isEmpty(classesToBeBound)) {\n        return Arrays.asList(classesToBeBound).contains(clazz);\n    }\n    return false;\n}\n</code></pre>\n\n<p>Edit:\nBlaise answer helped me solve @XmlRootElement problem. But still if someone has any information about why check for XmlRootElement is required, will be a good info.</p>\n"},{"tags":["java","spring","jstl","spring-webflow"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12952544,"title":"Spring/JSTL: How to iterate over a map and bind input fields to the values?","body":"<p>So my command object has a <code>public Map&lt;ProductVO, String&gt; availableProducts;</code> which holds the site's various products/services as the keys and the amount the user wishes to purchase as the values. Normal getter/setter is provided of course.</p>\n\n<p>This map is instantiated (as a HashMap) and populated during a setup step with all products from our database and all the values are initially set to \"0\".</p>\n\n<p>In the jsp I then have a table to display each product in a row with each row holding the product.description, product.price and then an input field where the user can enter how many of that product they want or just leave it at zero (don't worry about non-numeric validation, will handle somewhere else).</p>\n\n<p>My JSTL foreach looks like this;</p>\n\n<pre><code>&lt;c:forEach var=\"availableProductEntry\" items=\"${credit.availableProducts}\"&gt;\n    &lt;c:set var=\"product\" value=\"${availableProductEntry.key}\" /&gt;\n    &lt;tr&gt;\n        &lt;td&gt;${product.description}&lt;/td&gt;\n        &lt;td&gt;${product.price}\"&lt;/td&gt;\n        &lt;td&gt;&lt;form:input path=\"${availableProductEntry.value}\" /&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/c:forEach&gt;\n</code></pre>\n\n<p>This works fine for display, ie the table appears exactly how I want it, with all products iterated and displayed, description, price and the initial value of the field correct.</p>\n\n<p>However upon putting some numbers in the fields and hitting submit I inspect the command object and it doesn't look like the Map values have been updated, they're all still \"0\".</p>\n\n<p>I've probably got the <code>path=\"${availableProductEntry.value}\"</code> part wrong. </p>\n\n<p>Is there a way to get the dynamically generated input fields to update the values of the Map that they initially pulled their value from?</p>\n"},{"tags":["java","spring","spring-aop"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":12951368,"title":"Spring: does objects privately created in spring managed beans accessible by spring?","body":"<p>I have a Java class which is something like the following:</p>\n\n<pre><code>public class Foo{\n   public void doSomething(){\n     StageA a = new StageA();\n     StageB b = new StageB();\n     StageC c = new StageC();\n     a.execute();\n     b.execute();\n     c.execute();\n   }\n}\n</code></pre>\n\n<p>Now, assuming I can't really edit this class itself, could I still use <em>spring AOP</em> to apply logging <code>around</code> the <code>execute</code> methods? (presumably without using <em>aspect4j</em>)</p>\n"},{"tags":["spring","validation","spring-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12960611,"title":"Spring MVC InitBinder Validation","body":"<p>I have a <strong>Spring MVC</strong> application in this application i have a form that allows users to create and update a record. When the user <strong>POST</strong> the form to create a record <strong><em>@InitBinder</em></strong> function is used to implement validation.</p>\n\n<p>However when the user wants to update the record i would only need part of the validation to be executed and not the entire validation e.g. The check if the username exist would not be needed when updating a record only when creating a record.</p>\n\n<p>Can someone point me in the direction to get this done. I am using <strong>Spring MVC 3.0</strong> and i have a validation class that <strong>implements Validator</strong>. I am thinking i need the HttpServletRequest in the validation class. Can some one please shed some light on this. </p>\n"},{"tags":["java","spring","unit-testing","java-ee"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12960094,"title":"Automated integration tests on deployed j2ee environment?","body":"<p>Our team is currently introducing automated testing to an existing J2EE web application that is deployed on Weblogic. We've had success with unit testing using JUnit and Mockito which are automatically run when our app is built and deployed by Jenkins.</p>\n\n<p>Integration testing has been more challenging because our application relies on components provided by the J2EE container such as WorkManager. There are several Spring beans which require these components to initialize properly. One way we've been able to get around it is to create custom application context configuration files which create mocks of the components that we don't really need for testing but still require to initialize the bean. This has been somewhat of a maintenance nightmare because each integration test needs it's own config and some can be quite involved.</p>\n\n<p>What we really want is to be able to have the entire application initialized with the normal configuration used in a deployed environment when running our integration tests. Is there a way to have integration tests automatically execute after deployment through Jenkins or another tool? </p>\n"},{"tags":["spring","inheritance","override"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12959038,"title":"Inheritance third party Spring Bean with our own implementation","body":"<p>Hi I need one help with writing new Spring bean, as a replacement to third party API's spring bean.\nI want to modify, third party API's Spring Bean's certain methods, to fulfill my requirements, and at the same time I don't want to modify their (Third party API's spring Implementation).\nMy approach is --> \nI will inherit i.e. extend the current third-party spring bean, \nI will override their certain methods,<br>\nand I want to modify spring bean context xml declarations for that bean, \nso that every-where my bean will be referenced and as I am inheriting the default bean, there won't be any issues with accessing methods as well, \nI will comment out / or make it (i.e. default spring bean declaration in spring-context xmls) abstract template (using abstract = true param in context xml bean tag), and I will add my spring bean's declaration and will make default bean as parent (using parent = 'default_spring_bean_id').</p>\n\n<p>But I am confused at one point - \nThe default bean implementation extends org.springframework.extensions.surf.util.AbstractLifecycleBean and overrides onbootstrap method only.</p>\n\n<p>so now I can't extend both AbstractLifecycleBean and actual default Spring bean impl class.</p>\n\n<p>So,is my approach right?, What can be solution, so that I actually get away from modifying third party jar class, but still able to override few methods for my functionality.</p>\n\n<p>Thanks in advance. Any response is welcome. </p>\n"},{"tags":["java","image","spring","spring-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12957990,"title":"Dynamic image in jsp","body":"<p>I try to put image generate in dynamic way using Spring mvc controller. </p>\n\n<pre><code>@Controller\n@RequestMapping(\"/\")\npublic String generateMik(final HttpServletResponse response){\n...\nBufferdImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n...\n\nresponse.setContentType(\"image/png\");\ntry {\n    OutputStream os = response.getOutputStream();\n    ImageIO.write(buffer, \"png\", os);\n    os.flush();\n    os.close();\n...\n}\n</code></pre>\n\n<p>And i show this picture in .jsp :</p>\n\n<pre><code>&lt;img src=\"picture\" id=\"picture\"&gt;\n</code></pre>\n\n<p>All works fine, picture show in my browser, but i got a exception and i don't have any idea to resolve this problem in normal why (i don't wanna to catch this exception).</p>\n\n<pre><code>org.apache.catalina.core.ApplicationDispatcher invoke\nSEVERE: Servlet.service() for servlet jsp threw exception\njava.lang.IllegalStateException: getOutputStream() has already been called for this response\nat org.apache.catalina.connector.Response.getWriter(Response.java:626)\nat org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:215)\nat org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)\nat org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)\nat org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)\n...\n</code></pre>\n\n<p>And my question is: how i can generate dynamic picture in possibly simples way? I don't wanna to temporary save picture. Maybe put to model outputStream and show in somehow magic way in jsp?</p>\n"},{"tags":["spring","spring-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":12957905,"title":"Spring events for games.. can it handle it?","body":"<p>Im looking at implementing a tablet game, and am considering various solutions for the gaming server side of things.</p>\n\n<p>The game basically loops through a set of states, which trigger message events to be sent to clients. Message sending is done via another API. So the event listener delegates to the message sender on a particular event.</p>\n\n<p>Another listener handles the incoming parts, but im only concerned with sending raising events on state changes.</p>\n\n<p>I have looked at JMS and Spring events, i like spring events as they are neat and tidy, however not sure how they would cope on a server. JMS seems large and since im only listeneing to internal events most of the time, not sure how they would work if things changed.. hummm</p>\n"},{"tags":["java","spring","ehcache"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12958550,"title":"ehcache rmi replication does not work","body":"<p>I want to use ehcache on cluster, and chose RMI replication for this. Though caching works, it's not being replicated. My ehcache.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ehcache&gt;\n    &lt;cache name=\"myCache\"\n       maxElementsInMemory=\"5000\"\n       eternal=\"false\"\n       timeToIdleSeconds=\"3000\"\n       timeToLiveSeconds=\"3000\"\n       overflowToDisk=\"false\"\n       statistics = \"true\"&gt;\n        &lt;cacheEventListenerFactory\n            class=\"net.sf.ehcache.distribution.RMICacheReplicatorFactory\"\n            properties=\"replicateAsynchronously=true, replicatePuts=true, replicateUpdates=true,\n            replicateUpdatesViaCopy=false, replicateRemovals=true \"/&gt;\n        &lt;!-- RMI Cache bootstrap --&gt;\n        &lt;bootstrapCacheLoaderFactory\n            class=\"net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory\"\n            properties=\"bootstrapAsynchronously=true, maximumChunkSizeBytes=5000000\"\n            propertySeparator=\",\"/&gt;\n    &lt;/cache&gt;\n    &lt;cacheManagerPeerProviderFactory\n        class=\"net.sf.ehcache.distribution.RMICacheManagerPeerProviderFactory\"\n        properties=\"peerDiscovery=automatic, multicastGroupAddress=230.0.0.1,\n        multicastGroupPort=4446, timeToLive=32\"/&gt;\n    &lt;cacheManagerPeerListenerFactory\n        class=\"net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory\"\n        properties=\"hostName=127.0.0.1, port=40001,\n        socketTimeoutMillis=2000\"/&gt;\n&lt;/ehcache&gt;\n</code></pre>\n\n<p>I think thats because it's something wrong with multicast properties, but don't know what exactly.\nCluster: two glassfish instances run on local machine.</p>\n"},{"tags":["ajax","spring","mvc","rest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12957193,"title":"Spring MVC 3.0 - restrict what gets routed through the dispatcher servlet","body":"<p>I want to use Spring MVC 3.0 to build interfaces for AJAX transactions.  I want the results to be returned as JSON, but I don't necessarily want the web pages to be built with JSP.  I only want requests to the controllers to be intercepted/routed through the DispatcherServlet and the rest of the project to continue to function like a regular Java webapp without Spring integration.</p>\n\n<p>My thought was to define the servlet-mapping url pattern in web.xml as being something like \"/controller/*\", then have the class level @RequestMapping in my controller to be something like @RequestMapping(\"/controller/colors\"), and finally at the method level, have @RequestMapping(value = \"/controller/colors/{name}\", method = RequestMethod.GET). </p>\n\n<p>Only problem is, I'm not sure if I need to keep adding \"/controller\" in all of the RequestMappings and no matter what combo I try, I keep getting 404 requested resource not available errors.</p>\n\n<p>The ultimate goal here is for me to be able to type in a web browser \"http://localhost:8080/myproject/controller/colors/red\" and get back the RGB value as a JSON string.</p>\n"},{"tags":["spring","dependency-injection","scheduling","transactional","spring-3"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":846,"score":4,"question_id":5443876,"title":"Spring3 's @Transactional @Scheduled not committed to DB?","body":"<p>This is my 1st time trying Spring3's @Scheduled , but found I cannot commit to DB. This is my code :</p>\n\n<pre><code>@Service\npublic class ServiceImpl implements Service , Serializable\n{\n  @Inject \n  private Dao dao;\n\n  @Override\n  @Scheduled(cron=\"0 0 * * * ?\") \n  @Transactional(rollbackFor=Exception.class)\n  public void hourly()\n  {\n    // get xxx from dao , modify it\n    dao.update(xxx);\n  }\n}\n</code></pre>\n\n<p>I think it should work , I can see it starts-up hourly and load xxx from DB , but data is not committed to DB.</p>\n\n<p>There's been <code>tx:annotation-driven</code> in spring's xml :</p>\n\n<pre><code>&lt;bean id=\"entityManagerFactoryApp\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n  &lt;property name=\"persistenceUnitName\" value=\"myapp\"/&gt;\n&lt;/bean&gt;\n&lt;bean id=\"transactionManagerApp\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n  &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactoryApp\" /&gt;\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"transactionManagerApp\" /&gt;\n</code></pre>\n\n<p>Can somebody tell me what I missed here ?</p>\n\n<p>I have one '<strong>dirty</strong>' solution :</p>\n\n<pre><code>@Service\npublic class ServiceImpl implements Service , Serializable\n{\n  @Inject \n  private Dao dao;\n\n  @Inject\n  @Qualifier(\"transactionManagerApp\")\n  private PlatformTransactionManager txMgrApp;\n\n  @Override\n  @Scheduled(cron=\"0 0 * * * ?\")\n  @Transactional(rollbackFor=Exception.class)\n  public void hourly()\n  {\n    final TransactionTemplate txTemplateApp = new TransactionTemplate(txMgrApp);\n    txTemplateApp.execute(new TransactionCallbackWithoutResult()\n    {\n      @Override\n      protected void doInTransactionWithoutResult(TransactionStatus status)\n      {\n        //get xxx from dao\n        dao.update(xxx);\n      }\n    });\n  }\n}\n</code></pre>\n\n<p>It <strong>works fine</strong> here , but it is so redundant , making the code harder to read. \nI wonder why <strong>TransactionManager is not injected</strong> (and opened) in the previous code snippets?</p>\n\n<p>Thanks a lot !</p>\n"},{"tags":["xml","spring","configuration","javabeans","context"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12893760,"title":"Spring cannot find bean xml configuration file when it does exist","body":"<p>I am trying to make my first bean in Spring but got a problem with loading a context.\nI have a configuration XML file of the bean in src/main/resources.</p>\n\n<p>I receive the following IOException</p>\n\n<pre><code>    Exception in thread \"main\" org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML \ndocument from class path resource [src/main/resources/beans.xml]; nested exception is \n\njava.io.FileNotFoundException: class path resource [src/main/resources/beans.xml] cannot \nbe opened because it does not exist\n</code></pre>\n\n<p>but I don't get it since I do the following code test:</p>\n\n<pre><code>File f = new File(\"src/main/resources/beans.xml\");\nSystem.out.println(\"Exist test: \" + f.exists());\n</code></pre>\n\n<p>which gives me true! resources is in the classpath\nwhat's wrong?</p>\n"},{"tags":["java","spring","hibernate","open-session-in-view"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12941751,"title":"Open Session In Conversation Implementations","body":"<p>Until now I have been using my own OpenSessionInConversation filter which basically tracks a cookie that has a UUID which I use as a key in a map of Hibernate Sessions.</p>\n\n<p>This approach is giving me trouble when I want to know when to close a Hibernate Session. I set my servlet container (tomcat for testing and glassfish for production) session timeout to 30 mins and I use a HttpSessionListener to close Hibernate Sessions. But as I'm using Spring Security, when my users log in or log out Spring destroys the HttpSession and creates a new One, then my previous Hibernate Session is still open and I have to create a new one for the newly open HttpSession.</p>\n\n<p>UPDATE: The idea is to close the hibernate session when the cookie expires i.e. about 30 minutes that the browser shuts-down, not when the user logins or logs out.</p>\n\n<p>So, I have configured spring with session fixation protection with this:</p>\n\n<pre><code> &lt;!-- Sessions --&gt;\n        &lt;sec:session-management\n            session-fixation-protection=\"migrateSession\"&gt;\n            &lt;sec:concurrency-control max-sessions=\"1\"\n                session-registry-alias=\"springSessionRegistry\" expired-url=\"/login/?expired=true\"\n                error-if-maximum-exceeded=\"true\" /&gt;\n        &lt;/sec:session-management&gt;\n</code></pre>\n\n<p>As you can see, Spring will invalidate (and migrate) the current session when a user login or logout. So my HttpSessionListener is called when the user logins to invalidate the former session (and I don't want to close the Hibernate Session in this moment) and when the session expires (thats the moment when I want to close the Hibernate Session).</p>\n\n<p>Is there a better way to implement this functionality?</p>\n\n<p>OK, here is what I got:</p>\n\n<pre><code>public class OpenSessionInViewInsideConversationFilter extends\n          OncePerRequestFilter {\n\n     protected static final Logger log = LoggerFactory\n               .getLogger(OpenSessionInViewInsideConversationFilter.class);\n\n     public OpenSessionInViewInsideConversationFilter() {\n\n     }\n\n     @Override\n     protected void doFilterInternal(HttpServletRequest request,\n               HttpServletResponse response, FilterChain filterChain)\n               throws ServletException, IOException {\n\n          UUID conversationId = lookupConversationOrCreateIfNecessary(request,\n                    response);\n\n          if ( !ConversationManager.isConversationOpen(conversationId) ) {\n               log.debug(\"Conversation for this request already expired, restarting.\");\n               ConversationManager.restartConversation(conversationId);\n          }\n\n          ConversationManager\n                    .bindConversationToRequest(conversationId, request);\n          log.debug(\"Binding conversation '{}' to Request\", conversationId);\n\n          try {\n\n               filterChain.doFilter(request, response);\n\n          } finally {\n\n               log.debug(\"Unbinding conversation from request '{}'\", request);\n               ConversationManager.unbindConversationToRequest(request);\n\n          }\n\n     }\n\n     private UUID lookupConversationOrCreateIfNecessary(\n               HttpServletRequest request, HttpServletResponse response) {\n          UUID conversationId = null;\n\n          conversationId = lookupConversationIdOnCookies(request);\n\n          if ( conversationId == null ) {\n               conversationId = startNewConversationAndStoreCookie(request,\n                         response);\n          }\n          return conversationId;\n     }\n\n     private UUID startNewConversationAndStoreCookie(\n               HttpServletRequest request, HttpServletResponse response) {\n          UUID conversationId;\n          log.debug(\"No conversation cookie found in request {}, creating new conversation.\",\n                    request);\n\n          conversationId = ConversationManager.createNewConversation();\n\n          Cookie cookie = new Cookie(\n                    Constantes.ACTIVE_CONVERSATION_COOKIE_NAME,\n                    conversationId.toString());\n\n          cookie.setMaxAge(-1); // It will expire after browser shut-down\n\n          response.addCookie(cookie);\n          return conversationId;\n     }\n\n     private UUID lookupConversationIdOnCookies(HttpServletRequest request) {\n\n          if ( request.getCookies() == null || request.getCookies().length == 0 )\n               return null;\n\n          UUID conversationId = null;\n\n          for (Cookie cookie : request.getCookies()) {\n               if ( cookie.getName().equals(\n                         Constantes.ACTIVE_CONVERSATION_COOKIE_NAME) ) {\n                    log.debug(\"Conversation cookie found in request {}.\",\n                              request);\n                    conversationId = UUID.fromString(cookie.getValue());\n                    break;\n               }\n          }\n\n          return conversationId;\n     }\n}\n</code></pre>\n\n<p>Conversation Manager:</p>\n\n<pre><code>    public class ConversationManager {\n\n        private static Map&lt;UUID, Session&gt; conversationMap = new HashMap&lt;UUID, Session&gt;();\n\n        private static Map&lt;HttpServletRequest, UUID&gt; requestMap = new HashMap&lt;HttpServletRequest, UUID&gt;();\n\n        private static Session defaultSession = null;\n\n        private static SessionFactoryImplementor factory = null;\n\n        public static UUID createNewConversation() {\n\n            UUID conversationId = UUID.randomUUID();\n\n            Session sessionForConversation = factory.openSession();\n\n            conversationMap.put(conversationId, sessionForConversation);\n\n            return conversationId;\n        }\n\n        public static Session getSessionFromConversation(UUID conversationId) {\n            return conversationMap.get(conversationId);\n        }\n\n        public static void bindConversationToRequest(UUID conversationId, HttpServletRequest request) {\n            requestMap.put(request, conversationId);\n        }\n\n        public static UUID getConversationForRequest(HttpServletRequest request) {\n            return requestMap.get(request);\n        }\n\n        public static Session getSessionForRequest(HttpServletRequest request) {\n            UUID conversationId = ConversationManager.getConversationForRequest(request);\n            return conversationMap.get(conversationId);\n        }\n\n        public static UUID unbindConversationToRequest(HttpServletRequest request) {\n            UUID conversationId = requestMap.remove(request);\n            return conversationId;\n        }\n\n        public static void endConversation(UUID conversationId) {\n            Session session = conversationMap.remove(conversationId);\n            session.close();\n        }\n\n        public static void endDefaultConversation() {\n            defaultSession.close();\n            defaultSession = null;\n        }\n\n        public static Session getDefaultConversationSession() {\n            return defaultSession;\n        }\n\n        public static void startDefaultConversation(Session defaultSession) {\n            ConversationManager.defaultSession = defaultSession;\n        }\n\n        public static boolean isConversationOpen(UUID conversationID) {\n            return conversationMap.containsKey(conversationID);\n        }\n\n        public static void restartConversation(UUID conversationId) {\n            Session sessionForConversation = factory.openSession();\n            conversationMap.put(conversationId, sessionForConversation);\n        }\n\n        public static SessionFactoryImplementor getFactory() {\n            return factory;\n        }\n\n        public static void setFactory(SessionFactoryImplementor factory) {\n            ConversationManager.factory = factory;\n        }\n\n    }\n</code></pre>\n\n<p>Conversation Hibernate Context</p>\n\n<pre><code>public class ConversationalCurrentSessionContext implements CurrentSessionContext {\n\n    private static final long serialVersionUID = 803157986557235023L;\n\n    protected static final Logger log = LoggerFactory\n            .getLogger(ConversationalCurrentSessionContext.class);\n\n    public ConversationalCurrentSessionContext() {\n\n    }\n\n    public ConversationalCurrentSessionContext(SessionFactoryImplementor sessionFactoryImplementor) {\n        ConversationManager.setFactory(sessionFactoryImplementor);\n    }\n\n    @Override\n    public Session currentSession() throws HibernateException {\n\n        HttpServletRequest request = null;\n\n        try {\n            request = JsfUtils.getCurrentHttpRequest();\n        } catch (Exception e) {\n            log.debug(\"No current faces context found, returning default conversation.\");\n        }\n\n        if (request == null) {\n            return (Session) ConversationManager.getDefaultConversationSession();\n        } else {\n            return (Session) ConversationManager.getSessionForRequest(request);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["spring","maven","classpath"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":251,"score":0,"question_id":10826673,"title":"How to point to a Spring resource using Maven parent pom/child poms directory structure?","body":"<p>I have a Maven parent pom, and 2 child projects.  I am using Spring, and can't get the classpath to point from child_project_2 to a resource in child_project_1.</p>\n\n<pre><code>parent\n  child_1\n    - src\n      - main\n        - java\n          - com\n            - company\n              - package1\n                  - app1.java\n      - resources\n          -config.xml\n\n  child_2\n    - src\n      - main\n        - java\n          - com\n            - company\n              - package2\n                  - app2.java\n        - resources\n</code></pre>\n\n<p>When I run app1.java, I load the config.xml file using:</p>\n\n<p>ApplicationContext ctx = new GenericXmlApplicationContext(\"src/main/resources/config.xml\");</p>\n\n<p>However when I run app2.java, and need to load in the config.xml, I can't seem to get the classpath correct.  Using this Maven directory structure, how can all my sub-projects that use Spring point to the same config.xml file that lives at child_1/src/main/resources/config.xml? </p>\n\n<p>I've tried the absolute path on my local machine.  I've tried the relative path from child_2 up to parent and back down to config.xml, and the relative path from child_2/src/main/resources back up to the parent and down to config.xml. </p>\n"},{"tags":["java","spring","spring-mvc","dependency-injection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12953967,"title":"dependency-check in Spring3.x","body":"<p>Spring2.5 had a feature called dependency-check which can be given for a bean tag and default-dependency-check which can be given at the parent level <code>&lt;beans&gt;</code> tag.</p>\n\n<p>Eg: <code>&lt;bean id=\"soandSo\" class=\"...\" dependecy-check=\"\"/&gt;</code></p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\" \n    default-dependency-check=\"all\"&gt;\n</code></pre>\n\n<p>however in Spring3.x these attributes are deprecated, is there any alternate way of setting dependency-check apart from using <code>@Required</code> attribute and any equivalent to default-dependency-check in Spring3.x??</p>\n"},{"tags":["spring","jsp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12955422,"title":"SpringMVC variables not carrying into View","body":"<p>I am new to Spring and was trying to setup a basic Web App using the Spring Framework. But I am facing an issue where the message variables are not being passed to the view -- the jsp doesn't show the messages.</p>\n\n<p>Following is my code - </p>\n\n<p>Controller.java</p>\n\n<pre><code>import org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.servlet.ModelAndView;\n\n@Controller\n\npublic class HomeController {\n        @RequestMapping(method=RequestMethod.GET, value=\"/\")\n    public String index(){\n        ModelAndView mav = new ModelAndView();\n        mav.setViewName(\"index\");\n        String message = new String(\"Hello Welcome - Please click to login\");\n        System.out.println(message);\n        mav.addObject(\"message\", message);\n            return \"index\";\n    }\n</code></pre>\n\n<p>index.jsp</p>\n\n<pre><code>&lt;%@ taglib prefix=\"form\" uri=\"http://www.springframework.org/tags/form\" %&gt;\n&lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %&gt;\n&lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\" pageEncoding=\"UTF-8\"%&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Login&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;c:url value=\"login\" var=\"somevar\" /&gt;\n&lt;h1&gt;Click here to &lt;/h1&gt; &lt;a href= \"${somevar}\"&gt;${1+1}&lt;/a&gt;  \n &lt;c:out value=\"${message}\"/&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The evaluation works all fine - but the string for the variable 'message's comes as empty.</p>\n\n<p>Am I missing something? Any guidance would be much appreciated.</p>\n"},{"tags":["java","spring","api","rest","javadoc"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1412,"score":5,"question_id":4244521,"title":"javadoc-like tool for spring-mvc rest api documentation?","body":"<p>I was looking for a <strong>javadoc-like REST API documentation tool</strong>. I already documented my rest controllers in javadoc and I think it would be nice to just create an api documentation from it for the front-end developers.</p>\n\n<p>I think there isn't a tool, yet. So does someone have ideas how to accomplish this task? I thought about using the <strong>classic javadoc tool</strong> and add some <strong>spring / rest specific logic</strong>. But I'm not sure yet if I also need some special markup or what could be pitfalls. In the end I'd like to have some tool that can be <strong>integrated into the maven site lifecycle</strong> but that shouldn't be hard to accomplish.</p>\n\n<p>It may be difficult to handle inheritance: I use it a lot across REST resources but for the reader, inheritance is nothing she should care about. So sub-controllers must somehow integrate the super controllers methods but also be able to create some meaningful documentation in the context of the actual controller. I'm not sure if spring allows me to overwrite methods from super controllers but still evaluates its annotations.</p>\n\n<p>I'd appreciate any hints on related projects, tools that already exists or just your experience with the javadoc-tool!</p>\n"},{"tags":["java","spring","naming-conventions","spring-mvc"],"answer_count":9,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":4654,"score":8,"question_id":995473,"title":"What naming convention do you use for the service layer in a Spring MVC application?","body":"<p>I'm stuck with figuring out a good naming convention for the service layer in a spring application. For each class in the service layer I first write the interface it should implement and then the actual class. So for example I have the following interface:</p>\n\n<pre><code>public interface UserAccountManager{\n   public void registerUser(UserAccount newUserAccount);\n   public void resetPassword(UserAccount userAccount);\n...\n}\n</code></pre>\n\n<p>And then the implementation class...</p>\n\n<p>What bugs me here is UserAccountManager is a good name for the implementation class so I'm forced into giving it a stupid name like SimpleUserAccountManager or UserAccountDbManager.\nWhat are some of the conventions you've used so far? Is it a good idea to put the implementation classes in a different package and give them the same names as the interfaces?\nAlso what are your thoughts on using names ending with Manager over names ending with Service?</p>\n"},{"tags":["spring","hibernate","jpa"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":150,"score":1,"question_id":12635205,"title":"Spring JPA/Hibernate in standalone app","body":"<p>I am utilizing spring in non web application and I am using hibernate for working with DB. Problem I am experiencing is that while \"registerShutdownHook();\" does close spring context container it does not properly shut down and close resources for JPA so my connections to DB are getting maxed out.</p>\n\n<pre><code>&lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"persistenceUnitName\" value=\"pu\" /&gt;\n    &lt;property name=\"jpaVendorAdapter\"&gt;\n        &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n            &lt;property name=\"generateDdl\" value=\"false\" /&gt;\n            &lt;property name=\"showSql\" value=\"false\" /&gt;\n            &lt;property name=\"databasePlatform\" value=\"org.hibernate.dialect.MySQL5Dialect\" /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n    &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n&lt;bean class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n\n&lt;bean class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\"/&gt;\n</code></pre>\n\n<p>I use configuration presented above to fire up JPA layer and use \"@Transactional\" annotations to inject EM's into DAO's.</p>\n\n<p>Maybe someone could help me out what am I missing or how should I handle proper closing of JPA sessions in standalone environment ?</p>\n\n<p>Thank you,</p>\n\n<p>P.S. Exception I am getting is: java.net.SocketException: No buffer space available (maximum connections reached?): connect</p>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12954135,"title":"Dereference Field Name in Java to Validate it","body":"<p>In <code>PHP</code>, which is, of course, an interpreted language, I can dereference field names at runtime, e.g. <code>'source'</code> and <code>'value'</code> below, and use the values of those two fields pointed to by source and value.</p>\n\n<pre><code>{$key['source']}[LANGUAGE_NONE][0]['value'];\n</code></pre>\n\n<p>Is there a similar facility in <code>Java</code> to do so?  I have some properties of a bean that I need to validate and perform various checks against.  Rather than hardcoding the logic, I'd like to loop through a <code>SQL</code> table of fieldnames and perform the indicated validation on the field.  E.g. if I have the value <code>\"email\"</code> in the database, I would pick the property below and validate it based on the rules in the database column:</p>\n\n<pre><code>String email;\n</code></pre>\n\n<p>I will have many beans and many fields, which is why I was thinking of this approach.  I don't have a say in the design  :(</p>\n\n<p>Another option I was thinking was using <code>Spring validation</code>, but there does not appear to be a way to trigger it until a <code>Spring Form Bean</code> is submitted.  Maybe there's an alternate way to trigger it?</p>\n"},{"tags":["spring","fckeditor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12954117,"title":"FKeditor and Spring MVC Maven integration step by step","body":"<p>I want to use Fckeditor in my spring mvc. Could you provide instruction or link to set up step by step?</p>\n\n<p>I did below steps but when I run, 404 not found [/springmvc/fckeditor/editor/fckeditor.html ]is showing. </p>\n\n<p>Could you check me what I am wrong and guide me?</p>\n\n<p>Firstly, as per documentation I added below code in pom.xml.</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;net.fckeditor&lt;/groupId&gt;\n  &lt;artifactId&gt;java-core&lt;/artifactId&gt;\n  &lt;version&gt;2.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And in web.xml file, I added below code.</p>\n\n<pre><code>&lt;servlet&gt;\n      &lt;servlet-name&gt;ConnectorServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;\n          net.fckeditor.connector.ConnectorServlet\n      &lt;/servlet-class&gt;\n      &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;ConnectorServlet&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;\n    /resources/fckeditor/editor/filemanager/connectors/*\n  &lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>After that I download FCKeditor_2.6.8.zip file and extract in the src/main/resources folder.</p>\n\n<p>In the jsp page, I added taglib, javascript and tag.</p>\n\n<p><code>&lt;%@ taglib uri=\"http://java.fckeditor.net\" prefix=\"FCK\" %&gt;</code></p>\n\n<blockquote>\n<pre><code>function FCKeditor_OnComplete(editorInstance) {\n  window.status = editorInstance.Description;\n}\n</code></pre>\n</blockquote>\n\n<pre><code>&lt;FCK:editor instanceName=\"EditorDefault\"&gt;\n  &lt;jsp:attribute name=\"value\"&gt;This is some &lt;strong&gt;sample text\n      &lt;/strong&gt;. You are using &lt;a href=\"http://www.fckeditor.net\"&gt;\n      FCKeditor&lt;/a&gt;.\n  &lt;/jsp:attribute&gt;\n&lt;/FCK:editor&gt; \n</code></pre>\n\n<p>But Fckeditor is still not working.</p>\n\n<p>Could you guide me which is wrong?</p>\n\n<p>Thank you,</p>\n"},{"tags":["java","spring","jpa","spring-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":319,"score":2,"question_id":3773389,"title":"Product creation doesn't work (under Spring MVC with JPA)","body":"<p>Well, the code is working under the Test Enviroment, but not on the front context of the application. This is driving me crazy to be honest.</p>\n\n<p>Here is the <strong>controller</strong>:</p>\n\n<pre><code>package org.admios.nuevoproyecto.controller;\n\nimport java.util.List;\nimport org.springframework.web.bind.WebDataBinder;\nimport org.springframework.web.bind.annotation.InitBinder;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.validation.BindingResult;\nimport org.admios.nuevoproyecto.dao.ProductDAO;\nimport org.admios.nuevoproyecto.model.Product;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\nimport org.apache.log4j.Logger;\nimport org.springframework.web.bind.annotation.PathVariable;\n\nimport static java.lang.System.out;\n\n@Controller\n@RequestMapping(\"/product\")\npublic class ProductController {\n\n    private static Logger logger = Logger.getLogger(ProductController.class);\n\n    @Autowired\n    ProductDAO pdi;\n\n    @InitBinder\n    public void setAllowedFields(WebDataBinder dataBinder) {\n        dataBinder.setDisallowedFields(\"id\");\n    }\n\n    @RequestMapping(value=\"/list\")\n    public void listAllProducts() {\n        List&lt;Product&gt; products = pdi.getProducts();\n\n        for (Product product : products) {\n            System.out.println(\"Title: \" + product.getTitle());\n            System.out.println(\"Description: \" + product.getDescription());\n            System.out.println(\"Price: \" + product.getPrice());\n            System.out.println(\"--------\");\n        }\n    }\n\n    @RequestMapping(value=\"/add\", method=RequestMethod.POST)\n    public String addProduct(@ModelAttribute Product product, BindingResult result) {\n        logger.info(\"Entrando en el metodo para agregar nuevo producto\");\n\n//      Product newProduct = new Product();\n//      newProduct.setTitle(\"Titulo del producto2s\");\n//      newProduct.setDescription(\"Descripcion del producto\");\n//      newProduct.setPrice(220f);\n\n        System.out.println(product.getPrice());\n\n        Product savedProduct = pdi.saveProduct(product);\n\n        System.out.println(savedProduct.getId());\n\n        return \"hello\";\n    }\n\n    @RequestMapping(value=\"/form\")\n    public String viewForm() {\n        out.println(\"entering viewForm()\");\n        return \"addproduct\";\n    }\n\n    @RequestMapping(value=\"/view/{id}\", method=RequestMethod.GET)\n    public void viewProduct(@PathVariable(\"id\") Long id) {\n        System.out.println(id);\n    }\n\n    @ModelAttribute(\"product\")\n    public Product getProductObject() {\n        out.println(\"entering getProductObject()\");\n        return new Product();\n    }\n}\n</code></pre>\n\n<p>The DAO implementation:</p>\n\n<pre><code>package org.admios.nuevoproyecto.dao;\n\nimport java.util.List;\nimport javax.persistence.EntityManagerFactory;\nimport org.admios.nuevoproyecto.model.Product;\nimport org.apache.log4j.Logger;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.orm.jpa.support.JpaDaoSupport;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Repository\npublic class ProductDaoImp extends JpaDaoSupport implements ProductDAO {\n\n    private static Logger log = Logger.getLogger(ProductDaoImp.class);\n\n    @Autowired\n    public ProductDaoImp(EntityManagerFactory entityManagerFactory) {\n        super.setEntityManagerFactory(entityManagerFactory);\n    }\n\n    @Override\n    public List&lt;Product&gt; getProducts() {\n        return getJpaTemplate().find(\"select p from Product p\");\n    }\n\n    @Override\n    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)\n    public Product saveProduct(Product product) {\n        log.info(\"Trying to create a new product\");\n\n        Product newProduct = getJpaTemplate().merge(product);\n        log.info(newProduct.getDescription());\n        log.info(newProduct.getTitle());\n        log.info(newProduct.getId());\n        log.info(newProduct.getPrice());\n\n        return newProduct;\n    }\n\n    @Override\n    public void removeProduct(Product product) {\n        getJpaTemplate().remove(product);\n    }\n\n    @Override\n    public Product getProductById(Integer id) {\n        return getJpaTemplate().find(Product.class, id);\n    }\n\n}\n</code></pre>\n\n<p>The applicationContext looks like this:\n<a href=\"http://pastie.org/1175350\" rel=\"nofollow\">http://pastie.org/1175350</a></p>\n"},{"tags":["spring","tomcat","servlets"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12950108,"title":"File not found when application deployed on tomcat","body":"<p>This works fine in a unit test. I get the file and can print the content. When I deploy this on a server I get a FilenotFoundExcpetion. What can be the reason for this? I am deploying on a tomcat.  </p>\n\n<pre><code>String path = \"WebContent/images/image.jpeg\";\n\nFileSystemResource resource = new FileSystemResource(path);\n\nFile image = resource.getFile();\n</code></pre>\n"},{"tags":["java","spring"],"answer_count":2,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":86,"score":8,"question_id":12953919,"title":"How can I create a new annotation?","body":"<p>How can I create a new annotation based on a Spring <code>@Service</code> annotation or <code>@Component</code>?</p>\n\n<p>I want just to change the name for a more semantic use: for example change the name to <code>@TransactionelService</code>.</p>\n"},{"tags":["java","spring","integration","spring-integration"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12570518,"title":"Spring Integration Channels on Content","body":"<p>I have used Spring Integration in my current successfully for some of the needs. Awesome.. </p>\n\n<p>There is some weird behavior observed on a heavy load  where-in the same message seems to be processed more than once. I can confirm that because there are multiple rows in the database which is typically the last command on the chain that is configured over the channel. </p>\n\n<p>Digging into the manual further, it looks seems like load-balancing is done automatically by spring. The manual says that the message is balanced between multiple message handlers. </p>\n\n<p>Question is:</p>\n\n<ol>\n<li>How many handlers are present on a channel by default? The spring XML that gets loaded does not seem to have that configuration. All i do is this (per the recommendation in the manual):</li>\n</ol>\n\n<blockquote>\n<pre><code>&lt;int:channel id=\"SwPath.Channel\"/&gt;\n&lt;int:chain id=\"SwPath.chain\" input-channel=\"SwPath.Channel\"&gt;\n&lt;/int:chain&gt;\n</code></pre>\n</blockquote>\n\n<p>I can disable the fail-over but I am curious to know how many are present by default. </p>\n"},{"tags":["spring","spring-mvc"],"answer_count":3,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":1525,"score":7,"question_id":2691667,"title":"Can spring mvc trim all strings obtained from forms?","body":"<p>I know struts2 default config will trim all strings obtained from forms.</p>\n\n<p>For example: </p>\n\n<p>I type <pre>\"   whatever \"</pre> in a form and submit, I will get <pre>\"whatever\"</pre> The string has been auto trimmed</p>\n\n<p>Does spring mvc have this function too? THX.</p>\n"},{"tags":["spring","java-ee","jsf-2","primefaces","primepush"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":197,"score":2,"question_id":12897919,"title":"PrimePush chat is not working","body":"<p>my target is on page load to subscribe two users in chat (teacher and student), and they can send messages to each others, so here's what i did:</p>\n\n<p><strong>1- BackingBean:</strong></p>\n\n<pre><code>package com.myapp.beans;\n\nimport org.primefaces.context.RequestContext;\nimport org.primefaces.push.PushContext;\nimport org.primefaces.push.PushContextFactory;\nimport org.springframework.context.annotation.Scope;\nimport org.springframework.stereotype.Component;\n\nimport com.ocpsoft.pretty.faces.annotation.URLMapping;\nimport com.xeno.xenoTemplate.utils.constants.Pages;\n\n@Component(\"chatBean\")\n@Scope(\"view\")\n@URLMapping(id = Pages.CHAT, pattern = \"/chat\", viewId = \"/faces/pages/users/chat.xhtml\")\npublic class ChatView {\n\n    private final PushContext pushContext = PushContextFactory.getDefault()\n            .getPushContext();\n\n    private String privateMessage;\n\n    private String privateUser;\n\n    private final static String CHANNEL = \"/chat/\";\n\n    private String student = \"student\";\n\n    private String teacher = \"teacher\";\n\n    private boolean pageLoaded;\n\n    private boolean studentLoggedIn;\n\n    private boolean teacherLoggedIn;\n\n    public void preRender() {\n        System.out.println(\"########### preRender CHAT BEAN #########\");\n        if (!pageLoaded) { // invoked first time page loaded\n            System.out.println(\"########### Invoking PreRender Code #########\");\n            if (!studentLoggedIn) {\n                System.out.println(\"########## STUDENT LOG IN ##########\");\n                RequestContext.getCurrentInstance().execute(\n                        \"subscriber.connect('/\" + student + \"')\");\n                studentLoggedIn = true;\n            }\n            if (!teacherLoggedIn) {\n                System.out.println(\"########## TEACHER LOG IN ##########\");\n                RequestContext.getCurrentInstance().execute(\n                        \"subscriber.connect('/\" + teacher + \"')\");\n                teacherLoggedIn = true;\n            }\n            pageLoaded = true;\n        }\n    }\n\n    public void sendPrivate() {\n        System.out.println(\"######### SEND PRIVATE ##########\");\n        pushContext.push(CHANNEL + privateUser, \"[PM] \" + \"PRIVATE\" + \": \"\n                + privateMessage);\n        privateMessage = null;\n    }\n\n    public void setTeacher(String teacher) {\n        this.teacher = teacher;\n    }\n\n    public String getTeacher() {\n        return teacher;\n    }\n\n    public void setStudent(String student) {\n        this.student = student;\n    }\n\n    public String getStudent() {\n        return student;\n    }\n\n    public void setStudentLoggedIn(boolean studentLoggedIn) {\n        this.studentLoggedIn = studentLoggedIn;\n    }\n\n    public boolean isStudentLoggedIn() {\n        return studentLoggedIn;\n    }\n\n    public void setTeacherLoggedIn(boolean teacherLoggedIn) {\n        this.teacherLoggedIn = teacherLoggedIn;\n    }\n\n    public boolean isTeacherLoggedIn() {\n        return teacherLoggedIn;\n    }\n\n    public String getPrivateUser() {\n        return privateUser;\n    }\n\n    public void setPrivateUser(String privateUser) {\n        this.privateUser = privateUser;\n    }\n\n    public String getPrivateMessage() {\n        return privateMessage;\n    }\n\n    public void setPrivateMessage(String privateMessage) {\n        this.privateMessage = privateMessage;\n    }\n\n}\n</code></pre>\n\n<p>and in the <strong>JSF page</strong>:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"\n    xmlns:h=\"http://java.sun.com/jsf/html\"\n    xmlns:f=\"http://java.sun.com/jsf/core\"\n    xmlns:ice=\"http://www.icesoft.com/icefaces/component\"\n    xmlns:p=\"http://primefaces.org/ui\"\n    xmlns:pretty=\"http://ocpsoft.com/prettyfaces\"\n    xmlns:ui=\"http://java.sun.com/jsf/facelets\"\n    xmlns:sec=\"http://www.springframework.org/security/tags\"\n    xmlns:c=\"http://java.sun.com/jsp/jstl/core\"&gt;\n\n&lt;h:head&gt;\n    &lt;title&gt;Chat&lt;/title&gt;\n&lt;/h:head&gt;\n\n&lt;h:body&gt;\n\n    &lt;ui:composition template=\"/pages/template/commonLayout.xhtml\"&gt;\n\n        &lt;ui:define name=\"content\"&gt;\n        &lt;f:event type=\"preRenderView\" listener=\"#{chatBean.preRender}\" /&gt;\n\n            &lt;h:form id=\"form\"&gt;\n\n                &lt;p:fieldset id=\"container\" legend=\"PrimeChat\" toggleable=\"true\"&gt;\n\n                    &lt;h:panelGroup&gt;\n\n                       &lt;h:panelGrid columns=\"2\" columnClasses=\"publicColumn,usersColumn\"\n                            style=\"width:400px;\"&gt;\n\n                       &lt;p:outputPanel style=\"height: 100px;\" id=\"public\" layout=\"block\"\n                                styleClass=\"ui-corner-all ui-widget-content chatlogs\" /&gt;\n\n                       &lt;h:panelGroup id=\"users\" styleClass=\"usersList\"&gt;\n\n                                &lt;p:commandButton id=\"private_send\" title=\"Chat\" icon=\"ui-icon-comment\"\n                                    oncomplete=\"pChat.show()\" update=\":form:privateChatContainer\"&gt;\n                                    &lt;f:setPropertyActionListener value=\"#{chatBean.student}\"\n                                        target=\"#{chatBean.privateUser}\" /&gt;\n                                &lt;/p:commandButton&gt;\n                        #{chatBean.student}\n                        &lt;/h:panelGroup&gt;\n\n                        &lt;/h:panelGrid&gt;\n\n\n\n                    &lt;/h:panelGroup&gt;\n\n\n                &lt;/p:fieldset&gt;\n\n                &lt;!-- Private Chat Dialog --&gt;\n                &lt;p:dialog widgetVar=\"pChat\" header=\"Private Chat\" modal=\"true\"\n                    showEffect=\"fade\" hideEffect=\"fade\"&gt;\n                    &lt;h:panelGrid id=\"privateChatContainer\" columns=\"2\"\n                        columnClasses=\"vtop,vtop\"&gt;\n                        &lt;p:outputLabel for=\"pChatInput\"\n                            value=\"To: #{chatBean.privateUser}\" /&gt;\n                        &lt;p:inputTextarea id=\"pChatInput\"\n                            value=\"#{chatBean.privateMessage}\" rows=\"5\" cols=\"30\" /&gt;\n\n                        &lt;p:spacer /&gt;\n                        &lt;p:commandButton value=\"Send\"\n                            actionListener=\"#{chatBean.sendPrivate}\"\n                            oncomplete=\"pChat.hide()\" /&gt;\n                    &lt;/h:panelGrid&gt;\n                &lt;/p:dialog&gt;\n\n            &lt;/h:form&gt;\n\n            &lt;p:socket onMessage=\"handleMessage\" channel=\"/chat\"\n                autoConnect=\"false\" widgetVar=\"subscriber\" /&gt;\n\n            &lt;script type=\"text/javascript\"&gt;\n                function handleMessage(data) {\n                    alert('handleMessage');\n                    var chatContent = $(PrimeFaces\n                            .escapeClientId('form:public'));\n                    chatContent.append(data + '&lt;br /&gt;');\n                    chatContent.scrollTop(chatContent.height());\n                }\n            &lt;/script&gt;\n\n\n\n        &lt;/ui:define&gt;\n\n    &lt;/ui:composition&gt;\n\n&lt;/h:body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>web.xml:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n      version=\"3.0\"&gt; \n\n  &lt;display-name&gt;MyAPP&lt;/display-name&gt;\n\n  &lt;listener&gt;\n    &lt;listener-class&gt;\n        org.springframework.web.context.ContextLoaderListener\n    &lt;/listener-class&gt;\n  &lt;/listener&gt;\n\n  &lt;listener&gt;\n    &lt;listener-class&gt;\n        org.springframework.web.context.request.RequestContextListener\n    &lt;/listener-class&gt;\n  &lt;/listener&gt;\n\n  &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;\n        classpath:META-INF/spring/applicationContext.xml\n        classpath:META-INF/spring/applicationSecurity.xml\n        &lt;/param-value&gt;\n\n  &lt;/context-param&gt;\n\n  &lt;context-param&gt;\n    &lt;param-name&gt;javax.faces.FACELETS_LIBRARIES&lt;/param-name&gt;\n    &lt;param-value&gt;\n    /WEB-INF/springsecurity.taglib.xml;/WEB-INF/utils.taglib.xml\n    &lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n\n  &lt;context-param&gt;\n    &lt;param-name&gt;javax.faces.FACELETS_SKIP_COMMENTS&lt;/param-name&gt;\n    &lt;param-value&gt;false&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n\n\n\n\n  &lt;!--  --&gt;\n  &lt;context-param&gt;\n    &lt;param-name&gt;javax.faces.PROJECT_STAGE&lt;/param-name&gt;\n    &lt;param-value&gt;Development&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;/&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n\n  &lt;context-param&gt;\n    &lt;description&gt;State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2&lt;/description&gt;\n    &lt;param-name&gt;javax.faces.STATE_SAVING_METHOD&lt;/param-name&gt;\n    &lt;param-value&gt;server&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n  &lt;context-param&gt;\n    &lt;param-name&gt;javax.servlet.jsp.jstl.fmt.localizationContext&lt;/param-name&gt;\n    &lt;param-value&gt;resources.application&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n\n   &lt;filter&gt;\n      &lt;filter-name&gt;hibernateFilter&lt;/filter-name&gt;\n      &lt;filter-class&gt;org.springframework.orm.hibernate4.support.OpenSessionInViewFilter&lt;/filter-class&gt;\n      &lt;init-param&gt;\n         &lt;param-name&gt;sessionFactoryBeanName&lt;/param-name&gt;\n         &lt;param-value&gt;sessionFactory&lt;/param-value&gt;         \n      &lt;/init-param&gt;      \n   &lt;/filter&gt;\n\n   &lt;filter-mapping&gt;\n        &lt;filter-name&gt;hibernateFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n        &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;\n        &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n        &lt;dispatcher&gt;ERROR&lt;/dispatcher&gt;\n    &lt;/filter-mapping&gt; \n\n  &lt;!-- Spring Security --&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;filter-class&gt;\n            org.springframework.web.filter.DelegatingFilterProxy\n        &lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n        &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;\n        &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n        &lt;dispatcher&gt;ERROR&lt;/dispatcher&gt;\n    &lt;/filter-mapping&gt;\n\n    &lt;!--  \n    &lt;filter&gt;\n      &lt;filter-name&gt;Pretty Filter&lt;/filter-name&gt;\n      &lt;filter-class&gt;com.ocpsoft.pretty.PrettyFilter&lt;/filter-class&gt;\n      &lt;init-param&gt;\n            &lt;param-name&gt;logLevel&lt;/param-name&gt;\n            &lt;param-value&gt;ERROR&lt;/param-value&gt;\n      &lt;/init-param&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n    &lt;filter-name&gt;Pretty Filter&lt;/filter-name&gt;\n      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n      &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;\n      &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n      &lt;dispatcher&gt;ERROR&lt;/dispatcher&gt;\n    &lt;/filter-mapping&gt;\n    --&gt;\n\n    &lt;session-config&gt;\n      &lt;session-timeout&gt;30&lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n\n\n\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/faces/*&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n\n  &lt;error-page&gt;\n     &lt;exception-type&gt;java.lang.Throwable&lt;/exception-type&gt;\n     &lt;location&gt;/error&lt;/location&gt;\n  &lt;/error-page&gt;\n\n   &lt;error-page&gt;\n     &lt;error-code&gt;400&lt;/error-code&gt;\n     &lt;location&gt;/error&lt;/location&gt;\n   &lt;/error-page&gt;\n\n   &lt;error-page&gt;\n     &lt;error-code&gt;404&lt;/error-code&gt;\n     &lt;location&gt;/pageNotFound&lt;/location&gt;\n   &lt;/error-page&gt;\n\n   &lt;!-- PrimePush Servlet --&gt;\n\n   &lt;servlet&gt;\n      &lt;servlet-name&gt;Push Servlet&lt;/servlet-name&gt;\n      &lt;servlet-class&gt;org.primefaces.push.PushServlet&lt;/servlet-class&gt;\n       &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n        &lt;init-param&gt;\n          &lt;param-name&gt;org.atmosphere.cpr.broadcasterCacheClass&lt;/param-name&gt;\n          &lt;param-value&gt;org.atmosphere.cache.HeaderBroadcasterCache&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n          &lt;param-name&gt;org.atmosphere.cpr.broadcasterClass&lt;/param-name&gt;\n          &lt;param-value&gt;org.atmosphere.cpr.DefaultBroadcaster&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n          &lt;param-name&gt;org.atmosphere.cpr.broadcastFilterClasses&lt;/param-name&gt;\n          &lt;param-value&gt;org.atmosphere.client.TrackMessageSizeFilter&lt;/param-value&gt;\n        &lt;/init-param&gt;    \n        &lt;init-param&gt;\n          &lt;param-name&gt;org.atmosphere.cpr.sessionSupport&lt;/param-name&gt;\n          &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n     &lt;/servlet&gt;\n\n     &lt;servlet-mapping&gt;\n       &lt;servlet-name&gt;Push Servlet&lt;/servlet-name&gt;\n       &lt;url-pattern&gt;/primepush/*&lt;/url-pattern&gt;\n     &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>i am using the <strong>following jars</strong>:</p>\n\n<ol>\n<li>JSF 2.1.10</li>\n<li>PrimeFaces 4.0-SNAPSHOT</li>\n<li>Tomcat 7.0.32</li>\n<li>atmosphere-runtime 1.0.1</li>\n</ol>\n\n<p><strong>HEADERS</strong></p>\n\n<pre><code>Request URL:http://localhost:8080/MyAPP/chat\nRequest Method:POST\nStatus Code:200 OK\nRequest Headersview source\nAccept:application/xml, text/xml, */*; q=0.01\nAccept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3\nAccept-Encoding:gzip,deflate,sdch\nAccept-Language:en-US,en;q=0.8\nConnection:keep-alive\nContent-Length:282\nContent-Type:application/x-www-form-urlencoded; charset=UTF-8\nCookie:JSESSIONID=2BB4298A4E291CCCBB80EE3A4A5624BC\nFaces-Request:partial/ajax\nHost:localhost:8080\nOrigin:http://localhost:8080\nReferer:http://localhost:8080/PrimeTemplate/chat\nUser-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11\nX-Requested-With:XMLHttpRequest\nForm Dataview URL encoded\njavax.faces.partial.ajax:true\njavax.faces.source:form:j_idt31\njavax.faces.partial.execute:@all\nform:j_idt31:form:j_idt31\nform:form\nform:j_idt24:\nform:container_collapsed:false\nform:pChatInput:aaaaaaaaaaaa\njavax.faces.ViewState:5079906166114901626:-433970771510989466\nResponse Headersview source\nCache-Control:no-cache\nContent-Length:190\nContent-Type:text/xml;charset=UTF-8\nDate:Thu, 18 Oct 2012 10:40:04 GMT\nServer:Apache-Coyote/1.1\nX-Powered-By:JSF/2.0\n</code></pre>\n\n<p><strong>RESPONSE:</strong></p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;partial-response&gt;&lt;changes&gt;&lt;update id=\"javax.faces.ViewState\"&gt;&lt;![CDATA[5079906166114901626:-433970771510989466]]&gt;&lt;/update&gt;&lt;/changes&gt;&lt;/partial-response&gt;\n</code></pre>\n\n<p><strong>ISSUE:</strong></p>\n\n<p>i can open the chat window for the student and type a chat message then press enter, the code gets in the <code>sendPrivate</code> bean method, but the JS <code>handleMessage</code> function is not called and hence the private message is not displayed in the JSF page, i get no errors in browser console.</p>\n\n<p>please advise how to fix that.</p>\n"},{"tags":["spring","jsf","ssl","https","jboss6.x"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12952251,"title":"Configuring https in JBoss Spring JSF Web application","body":"<p>I have configured https with JBoss6 in a Spring JSF web application and its working for entire site, but i need get https only for specific folders and files. In my web.xml I have configured it this way</p>\n\n<p>folder specific code block which works but after visiting the page If I go back to a normal http page by clicking on a link in page it also comes in as https in URL</p>\n\n<pre><code>&lt;security-constraint&gt;\n    &lt;web-resource-collection&gt;\n        &lt;web-resource-name&gt;secured folder&lt;/web-resource-name&gt;\n        &lt;url-pattern&gt;/myfolder/*&lt;/url-pattern&gt;\n    &lt;/web-resource-collection&gt;\n    &lt;user-data-constraint&gt;\n        &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n    &lt;/user-data-constraint&gt;\n&lt;/security-constraint&gt;\n</code></pre>\n\n<p>the below code works if I put this only without the folder specific code block and it enables https for entire site.</p>\n\n<pre><code>&lt;security-constraint&gt;\n     &lt;web-resource-collection&gt;\n        &lt;web-resource-name&gt;Protected Area, so redirect to HTTPS&lt;/web-resource-name&gt;\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n       &lt;/web-resource-collection&gt;\n       &lt;user-data-constraint&gt;\n            &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n        &lt;/user-data-constraint&gt;\n&lt;/security-constraint&gt;\n</code></pre>\n\n<p>Is there anything else which I have been missing to achieve this?</p>\n"},{"tags":["java","spring","map","converter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12953218,"title":"How to get all child class object from parent class object and put in map java spring","body":"<p>How to get all child class object from parent class object and put in map  java spring </p>\n\n<pre><code> public static Map&lt;String, Object&gt; ConvertObjectToMap(Object obj, Integer number) throws            IllegalAccessException, IllegalArgumentException, InvocationTargetException {\n    Class&lt;?&gt; pomclass = obj.getClass();\n    pomclass = obj.getClass();\n    Method[] methods = obj.getClass().getMethods();\n    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n    for (Method m : methods) {\n        if (m.getName().startsWith(\"get\") &amp;&amp; !m.getName().startsWith(\"getClass\")) {\n            Object value = null;\n            value = (Object) m.invoke(obj);\n            if (number &lt;= 1) {\n                if (value.getClass().isAnnotation()) {\n                    map.putAll(ConvertObjectToMap(value, number++));\n                } else {\n                    map.put(m.getName().substring(3), (Object) value);\n                }\n            }\n        }\n    }\n    return map;\n}\n</code></pre>\n\n<p>is this correct ?</p>\n"},{"tags":["java","spring","junit","junit4","concordion"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12953521,"title":"Integrating ConcordionPlus and Spring","body":"<p>I have a number of <a href=\"http://www.concordion.org/\" rel=\"nofollow\">Concordion</a> tests which make use of Spring @Autowired/@ContextConfiguration. These currently work fine and run using this <a href=\"https://gist.github.com/2719776#file_concordion_spring_junit4_class_runner.java\" rel=\"nofollow\">ConcordionSpringJunit4ClassRunner</a> implementation.</p>\n\n<p>It's a pretty simple class, however migrating to <a href=\"http://www.agileinsider.org/concordion-plus/\" rel=\"nofollow\">ConcordionPlus</a> has proven to be more involved. My current implementation is a merge of the <a href=\"http://code.google.com/p/concordion-plus/source/browse/trunk/src/main/java/org/agileinsider/concordion/junit/ConcordionPlus.java?r=2\" rel=\"nofollow\">ConcordionPlus.java runner</a> with the <a href=\"https://gist.github.com/2719776#file_concordion_spring_junit4_class_runner.java\" rel=\"nofollow\">ConcordionSpringJunit4ClassRunner</a>, however this doesn't work at all.</p>\n\n<p>There is an apparent solution for (vanilla) Concordion using this <a href=\"https://github.com/thucydides-webtests/thucydides/blob/master/thucydides-junit/src/main/java/net/thucydides/junit/spring/SpringIntegration.java\" rel=\"nofollow\">SpringIntegration Rule</a> but I've had no success migrating this to work with <a href=\"http://code.google.com/p/concordion-plus/source/browse/trunk/src/main/java/org/agileinsider/concordion/junit/ConcordionPlus.java?r=2\" rel=\"nofollow\">ConcordionPlus</a> either.</p>\n\n<p>I would appreciate any pointers on this, and do plan to spend more time investigating when I'm able.</p>\n"},{"tags":["spring","spring-mvc","javabeans"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12952589,"title":"Constructors in Bean","body":"<p>I have one small issue with creating a new bean. Basically as per request, I get some parameters, which needs to be passed to a bean. Below I am instantiating ControllerService for each request. Rather I would like it to be a bean with scope=protype. So that I get a fresh object for every request. \nBut then how do i set the 2 properties (kpiName, kpiInput) that I am sending via constructors in the bean??</p>\n\n<pre><code>@Autowired\n@Qualifier(\"serviceManager\")\nCleanser serviceManager;  \n\n@RequestMapping(method = RequestMethod.POST)\npublic @ResponseBody\nString getKPIResult(@RequestParam(\"kpiName\") String kpiName,\n            @RequestParam(\"kpiInput\") String kpiInput) {    \n\n    return serviceManager.checkAndExecute(new ControllerService(kpiName, kpiInput));\n}\n</code></pre>\n"},{"tags":["spring","spring-mvc","spring-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":12952112,"title":"Return List of XML elements from controller","body":"<p>I know how to return on XML element from my controller.</p>\n\n<p>What if I need to return a List of a specific class? What I can think of is a wrapper object holding a List. Is there another way to do this?  </p>\n\n<pre><code>@RequestMapping(value = \"/test\", method = RequestMethod.GET, produces = \"application/xml\")\npublic @ResponseBody\nTest getTest() {\n    return new Test();\n}\n\n@XmlRootElement\npublic class Test {\n    private String name = \"kalle\";\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n}\n</code></pre>\n"},{"tags":["spring","security","redirect","login"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12952325,"title":"Spring Security : redirect to previous page after login","body":"<p>I want to redirect to previous page after user login always.</p>\n\n<p>I know that redirect to previous page after login when user denied accessing some page.</p>\n\n<p>But I wonder that all that times, if user directly login after click login link or I redirect login page by force.</p>\n\n<p>When the time that I menthion situation above, redirect to index page after login always.</p>\n\n<p>Please help me...... </p>\n"},{"tags":["spring","jdbctemplate","spring-jdbc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12950419,"title":"Spring JdbcTemplate: Using PreparedStatement with many parameters","body":"<p>I have SQL query that have long list of parameters. Most of parameters are simple, but need some cutomization for other parameter so i decided to use <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/PreparedStatementCreator.html\" rel=\"nofollow\">PreparedStatementCreator</a> or <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/PreparedStatementSetter.html\" rel=\"nofollow\">PreparedStatementSetter</a> instead of simple:</p>\n\n<pre><code>@Override\npublic Long add(final SomeEntity d) {\n   final String sql = \"insert into (.....) values (?, ?, ?, ?, .....) returning id\";\n   return getJdbcTemplate().queryForLong(sql, new Object[]{.....,....,...,... });\n}\n</code></pre>\n\n<p>It's all ok, but don't want to set all that simple parameters using: <code>ps.setString(1,...); ps.setLong(20,....);</code> and so on. Is there a trade-off between these two solutions - i mean using <code>PreparedStatement</code>, but with simple parameters set automatically from array <code>Object[]</code> ? I hope you understand me ;)</p>\n\n<pre><code>@Override\npublic Long add(final SomeEntity d) {\n    final String sql = \"insert into (.....) values (?, ?, ?, ?, .....) returning id\";\n\n    return getJdbcTemplate().query(sql, new PreparedStatementSetter() {\n        @Override\n        public void setValues(PreparedStatement ps) throws SQLException {\n            ps.setLong(1, ....);\n            ps.setString(2, ....);\n            ps.setDate(3, ....);\n            ps.setString(4, ....);          \n            ...\n            ...\n            // other parameters\n            try {\n                FileInputStream in = new FileInputStream(d.getPath());\n                ps.setBinaryStream(44, in, in.available());\n            } catch (IOException e) {\n                ps.setBytes(4, null);\n            }\n        }\n    }, \n    new ResultSetExtractor&lt;Long&gt; (){\n        @Override\n        public Long extractData(ResultSet rs) throws SQLException,\n                DataAccessException {\n            if (rs.next()) {\n                return rs.getLong(1);\n            }\n            return null;\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","spring","tomcat","servlets"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2528,"score":0,"question_id":2638389,"title":"No bean named '...' is defined and Spring @Resource annotation","body":"<p>I use @Resource to annotate bean classes, @Autowired to autowire dependencies,\nand in Spring configuration file these things: <pre>\n    context:component-scan base-package=\"package1,package2\" \n    tx:annotation-driven\n</pre></p>\n\n<p>So, it works fine (tested). Spring scans package1, package2, classes with @Resource annotation\nand then I can get them using getBean() IF TESTED FROM CONSOLE APPLICATION [say, with main() function].</p>\n\n<p>But when I try to use next approach (to use Spring in container managed environment = with Tomcat):</p>\n\n<pre>\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;classpath*:beans.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n</pre>\n\n<p>compile a jar with all the bean classes and put this jar into WEB-INF/lib<br><br></p>\n\n<p>then what I see? I cannot getBean() any of those @Resource annotated beans!<br>\nSpring simply cannot find them.<br>\nStill I can getBean() beans that are explicitly present in beans.xml.<br>\n<br><br>\nWhere's the problem?</p>\n"},{"tags":["spring","caching","jpa","lazy-loading","ehcache"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12951434,"title":"Method level Eh-cache: issue in lazy loading of cached entities","body":"<p>I am trying to setup method level caching by eh-cache for a service which returns JPA entities as below:</p>\n\n<p><strong>Service:</strong></p>\n\n<pre><code>public class SOMCCategoryServiceImpl extends CategoryServiceImpl implements CategoryService {   \n@Override\n@Cacheable(cacheName = \"storeServiceCache\")\npublic Category findByGuid(String categoryCode, String catalogCode,\n        CategoryLoadTuner loadTuner) {\n    // TODO Auto-generated method stub\n    return super.findByGuid(categoryCode, catalogCode, loadTuner);\n}\n</code></pre>\n\n<p><strong>ehcache.xml as :</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ehcache name=\"applicationCache\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:noNamespaceSchemaLocation=\"http://ehcache.org/ehcache.xsd\"&gt;\n    &lt;diskStore path=\"java.io.tmpdir\" /&gt;\n    &lt;defaultCache eternal=\"true\" maxElementsInMemory=\"10000\"\n        overflowToDisk=\"false\" timeToIdleSeconds=\"20000\" timeToLiveSeconds=\"20000\" /&gt;\n\n    &lt;cache name=\"storeServiceCache\" maxElementsInMemory=\"10000\"\n        eternal=\"false\" overflowToDisk=\"false\" timeToIdleSeconds=\"200000\"\n        timeToLiveSeconds=\"200000\"&gt;     \n    &lt;/cache&gt;    \n&lt;/ehcache&gt;\n</code></pre>\n\n<p>Cache is working fine but I m facing issue with the properities which are going to be lazy loaded from the cached entity(obviously).</p>\n\n<p>Is there any configuration or solution by which I can keep the lazy loading intact?</p>\n\n<p><strong>To be noted that I can't cache at Persistence level as it is a third party code.</strong></p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql-server","spring","mybatis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12951295,"title":"using mybatis to select from sqlserver","body":"<p>I have problem with mybatis\nI use sql server 2005 as DB\nI want to fetch a record from db with mybatis but when I call my service,it throw a not valid column name exception\nwhen I run my select directly in db every thing is ok.\nhere is my select</p>\n\n<pre><code>@Select(value = \"SELECT SERVICECODE FROM SERVICETYPES WITH (NOLOCK) WHERE SERVICECODE =13\")\n    @Results(value = {\n            @Result(javaType = CustomerService.class),\n            @Result(property = \"balanceService\", column = \"SERVICECODE\")\n    })\n    public BigDecimal getBillMaxPay() throws SQLException;\n</code></pre>\n\n<p>my CustomerService class</p>\n\n<pre><code>    public class CustomerService implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    private short balanceService = 0;   //0:without service,1:has service,2:service has been expired\n    private short transactionService = 0;\n    private short billService = 0;\n    private short draftService = 0;\n    private short customerDraftService = 0;\n    private short chequeService = 0;\n    private BigDecimal customerDraftMaxPay;\n    private BigDecimal billMaxPay;\n    private BigDecimal draftMaxPay;\n...\n\n\n  spring config\n\n  &lt;!--*******Data Source*********--&gt;\n&lt;bean id=\"localDataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\"&gt;\n    &lt;property name=\"driverClassName\" value=\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"/&gt;\n    &lt;property name=\"url\" value=\"\"/&gt;        \n    &lt;property name=\"username\" value=\"\"/&gt;\n    &lt;property name=\"password\" value=\"\"/&gt;\n\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n&lt;!--*******myBatis configure*********--&gt;\n&lt;bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n    &lt;property name=\"dataSource\" ref=\"localDataSource\"/&gt;\n&lt;/bean&gt;\n\n&lt;!-- Define the SqlSessionFactory --&gt;\n&lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"localDataSource\"/&gt;\n    &lt;property name=\"typeAliasesPackage\" value=\"com.behsazan.corebanking.telbank.dto\"/&gt;\n&lt;/bean&gt;\n\n&lt;!-- Scan for mappers and let them be autowired --&gt;\n&lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt;\n    &lt;property name=\"basePackage\" value=\"com.behsazan.corebanking.telbank.dao.local\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>my pom.xml</p>\n\n<pre><code>        &lt;!--myBatis--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;\n        &lt;version&gt;3.0.6&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;\n        &lt;version&gt;1.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--sql server--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n        &lt;artifactId&gt;sqljdbc&lt;/artifactId&gt;\n        &lt;version&gt;4.0&lt;/version&gt;\n    &lt;/dependency&gt;   \n</code></pre>\n\n<p>and finally my exception</p>\n\n<pre><code>    org.springframework.dao.TransientDataAccessResourceException: \n### Error querying database.  Cause: com.microsoft.sqlserver.jdbc.SQLServerException: The column name  is not valid.\n### The error may involve defaultParameterMap\n### The error occurred while setting parameters\n### Cause: com.microsoft.sqlserver.jdbc.SQLServerException: The column name  is not valid.\n; SQL []; The column name  is not valid.; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: The column name  is not valid.\n</code></pre>\n\n<p>but when I run my query in Db ,everything is ok\nthank you</p>\n"},{"tags":["spring","jsp","http-status-code-404"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12951047,"title":"Spring MVC jsp mapping","body":"<p>Hello I am new to Spring and stuck on my jsp mapping - my pages give out the 404 - Page not found error.</p>\n\n<p><strong>My Project Structure is</strong></p>\n\n<pre><code>\n\n    WebContent\n     + META-INF\n     - WEB-INF\n      - jsp\n        index.jsp\n        login.jsp\n      +lib\n      springMVC-servlet.xml\n      web.xml\n\n</code></pre>\n\n<p>Web.xml</p>\n\n<pre><code>\n\n\n     &lt;display-name>spring&lt;/display-name>\n        &lt;servlet>\n             &lt;servlet-name>springMVC&lt;/servlet-name>\n             &lt;servlet-class>org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class>\n            &lt;load-on-startup>1&lt;/load-on-startup>  \n        &lt;/servlet>\n\n     &lt;servlet-mapping>\n      &lt;servlet-name>springMVC&lt;/servlet-name>\n      &lt;url-pattern>/&lt;/url-pattern>\n     &lt;/servlet-mapping>\n     &lt;welcome-file-list> \n      &lt;welcome-file>index.jsp&lt;/welcome-file> \n    &lt;/welcome-file-list>\n    &lt;/web-app>\n    </code></pre>\n\n<p>springMVC-servlet.xml</p>\n\n<pre><code>\n\n    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    &lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n     xmlns:context=\"http://www.springframework.org/schema/context\"\n     xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n     xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\n      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\">\n\n        &lt;context:component-scan\n            base-package=\"web.controller\" />\n\n     &lt;!-- Enabling Spring MVC configuration through annotations -->\n     &lt;mvc:annotation-driven />\n\n        &lt;bean id=\"viewResolver\"\n            class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n            &lt;property name=\"prefix\" value=\"/WEB-INF/jsp/\" />\n            &lt;property name=\"suffix\" value=\".jsp\" />\n        &lt;/bean>\n    &lt;/beans>\n\n</code></pre>\n\n<p>HomeController</p>\n\n<pre><code>\n\n    @RequestMapping(method=RequestMethod.GET, value=\"/\")\n            public String index(){\n                    return \"index\";\n            }\n\n            @RequestMapping(value=\"/login\")\n            public String login() {\n                return \"login\";\n            }\n\n</code></pre>\n\n<p>I am able to load the <code>http://localhost:8080/Spring3/ </code></p>\n\n<p>The index.jsp has the following code - </p>\n\n<pre><code>\n\n    &lt;%@ taglib prefix=\"form\" uri=\"http://www.springframework.org/tags/form\" %>\n    &lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n    &lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n       pageEncoding=\"UTF-8\"%>\n    &lt;html>\n    &lt;head>\n    &lt;title>Login&lt;/title>\n    &lt;/head>\n    &lt;body>\n    &lt;c:url value=\"login.jsp\" var=\"somevar\" />\n    &lt;h1>Click here to &lt;/h1> &lt;a href= \"${somevar}\">Login&lt;/a>   \n    &lt;/body>\n    &lt;/html>\n\n</code></pre>\n\n<p>However when I click the link to the login page - I get the 404 page.</p>\n\n<p>I am not sure what is going wrong - Can anyone help me identify where my mapping is going wrong. </p>\n"},{"tags":["xml","spring","properties"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12951012,"title":"read properties in xml-format from .properties-file using spring","body":"<p>i am trying to read some properties from a .properties-file that contains xml from a spring environment, like this:</p>\n\n<p>values.properties:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\" standalone=\"no\"?&gt;\n&lt;!DOCTYPE properties SYSTEM \"http://java.sun.com/dtd/properties.dtd\"&gt;\n&lt;properties&gt;\n&lt;entry key=\"drivers\"&gt;oracle.jdbc.OracleDriver&lt;/entry&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>Accessing the value drivers using </p>\n\n<pre><code>&lt;context:property-placeholder location=\"classpath:values.properties\" /&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>&lt;bean id=\"dataSource\"\n        class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt; \n        &lt;property name=\"driverClassName\" value=\"${drivers}\" /&gt;      \n    &lt;/bean&gt;\n</code></pre>\n\n<p>in beans.xml results in </p>\n\n<p>Exception in thread \"main\" org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [META-INF/beans.xml]: Could not resolve placeholder 'drivers'</p>\n\n<p>When i rename values.properties to values.xml and change the name in the property-placeholder, the value can be accessed, the value can also be accessed if i write <code>drivers=oracle.jdbc.OracleDriver</code> into values.properties (containing xml), so i assume: properties can be loaded from xml-files, but said files need an .xml extension ?</p>\n\n<p>My question is:\nIs there a way to load properties from an xml-formatted text inside a file with .properties-extension using the spring environment?</p>\n"},{"tags":["json","spring","jaxb","mocking","jackson"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":256,"score":0,"question_id":12514285,"title":"Registrer MappingJackson2HttpMessageConverter in Spring 3.1.2 with JAXB annotations","body":"<p>I have a number of entities with JAXB annotations that I would like to convert to JSON using a message-converter.</p>\n\n<p>I know that my ObjectMapper that reads the JAXB annotations works:</p>\n\n<pre><code>String correctJsonText = jacksonObjectMapper.writeValueAsString(entityWithJAXB); \n</code></pre>\n\n<p>But when i call my rest service the default registered MappingJacksonHttpMessageConverter   (which is not configured for reading JAXB) seems to take over - resulting in a stackoverflow due to cyclic references when @XmlTransient is ignored...</p>\n\n<p>How do i configure Spring to use MappingJackson2HttpMessageConverter ?</p>\n\n<p><strong>Current Configuration</strong></p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters register-defaults=\"false\"&gt;\n        &lt;bean id=\"jacksonMessageConverter\" class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n            &lt;property name=\"objectMapper\" ref=\"jacksonObjectMapper\" /&gt;\n            &lt;property name=\"supportedMediaTypes\"&gt;\n                &lt;list&gt;\n                    &lt;bean class=\"org.springframework.http.MediaType\"&gt;\n                        &lt;constructor-arg index=\"0\" value=\"application\" /&gt;\n                        &lt;constructor-arg index=\"1\" value=\"json\" /&gt;\n                        &lt;constructor-arg index=\"2\" value=\"UTF-8\" /&gt;\n                    &lt;/bean&gt;\n                &lt;/list&gt;\n            &lt;/property&gt;\n\n        &lt;/bean&gt;\n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n\n&lt;bean id=\"jaxbAnnotationInspector\" class=\"com.fasterxml.jackson.module.jaxb.JaxbAnnotationIntrospector\" /&gt;\n\n&lt;bean id=\"jacksonObjectMapper\" class=\"com.fasterxml.jackson.databind.ObjectMapper\"&gt;\n    &lt;property name=\"annotationIntrospector\" ref=\"jaxbAnnotationInspector\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p><strong>REST service</strong></p>\n\n<pre><code>@RequestMapping(value=\"/{id}\", method=RequestMethod.GET, produces = \"application/json;charset=UTF-8\")\npublic @ResponseBody EntityWithJAXB readEntityWithJAXB(@PathVariable int id, Model model) {\n    return entityService.getById(id);\n}\n</code></pre>\n\n<p><strong>Dependencies</strong></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;2.0.5&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.0.5&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-module-jaxb-annotations&lt;/artifactId&gt;\n    &lt;version&gt;2.0.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>UPDATE / Solution</strong></p>\n\n<p>By debugging my context I could see that the configuration in <code>&lt;mvc:annotation-driven&gt;</code> had no effect. </p>\n\n<p>It turned out that my unit test with MockMcv always loaded the default handleradapters, thus ignoring my custom objectmapper. Due to convenience I only tested the controller using junit test, since it hit the controller just fine I did not think of this as probable error cause...</p>\n\n<p>I did not find a fix for my test yet, but when I call the service using curl everything works!</p>\n\n<p><strong>UPDATE / Final solution</strong></p>\n\n<p>Just found a solution for my test setup; when using MockMvc (spring-test-mvc) you must specify custom message-converters explicit:</p>\n\n<pre><code>private MockMvc mockMvc;\n\n@Autowired\nprivate MappingJackson2HttpMessageConverter jacksonMessageConverter;\n\n@Autowired\nprivate RestController restController;\n\n@Before\npublic void initMockMvc(){\n    mockMvc = MockMvcBuilders.standaloneSetup(restController)\n            .setMessageConverters(jacksonMessageConverter).build();\n} \n\n@Test\npublic void testRestController() throws Exception{\n    DefaultRequestBuilder requestBuilder = MockMvcRequestBuilders.get(\"/json/42\");\n    this.mockMvc.perform(requestBuilder).andDo(print()).andExpect(status().isOk());\n}\n</code></pre>\n\n<p>The only remaining issue is that the <code>jacksonMessageConverter</code> can't be autowired directly until the following JIRA is resolved: <a href=\"https://jira.springsource.org/browse/SPR-9469\" rel=\"nofollow\">https://jira.springsource.org/browse/SPR-9469</a>. Until then, I have just created a copy of the jacksonMessageConverter in my test context.</p>\n"},{"tags":["spring","java-ee","jboss"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12926079,"title":"Jboss6.1 ClassNotFound in WEB/lib for listener","body":"<p>I use jboss6.1. When I try to deploy a web app, it say class not found when try to load spring.</p>\n\n<pre><code>&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n</code></pre>\n\n<p>the error is </p>\n\n<pre><code>Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationListener\n</code></pre>\n\n<p>I put the spring in WEB/lib. Is that wrong? Or should be something else?</p>\n\n<hr>\n\n<p>Thanks for the kind replies. What confuses me is I put the spring jars in my webapp's WEB/lib folder. Isn't that enough?</p>\n\n<hr>\n\n<p>Following are the web.xml and the jars. ( I put all I grabbed in the dist folder of spring3.1)</p>\n\n<p>But I wonder maybe is because I use jboss and there's something special in it? I google some post class loader but don't understand.</p>\n\n<hr>\n\n<p>web.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:jsp=\"http://java.sun.com/xml/ns/javaee/jsp\"\n    xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n    id=\"CMDB_WS_HOST\" version=\"3.0\"&gt;\n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n    &lt;session-config&gt;\n        &lt;session-timeout&gt;99999999&lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n    &lt;context-param&gt; \n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;WEB-INF/beans.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;com.inspur.cmdb.system.StartupListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<hr>\n\n<p>spring jars in web/lib</p>\n\n<p>org.springframework.aop-3.1.0.M2.jar</p>\n\n<p>org.springframework.asm-3.1.0.M2.jar</p>\n\n<p>org.springframework.aspects-3.1.0.M2.jar</p>\n\n<p>org.springframework.beans-3.1.0.M2.jar</p>\n\n<p>org.springframework.context.support-3.1.0.M2.jar</p>\n\n<p>org.springframework.context-3.1.0.M2.jar</p>\n\n<p>org.springframework.core-3.1.0.M2.jar</p>\n\n<p>org.springframework.expression-3.1.0.M2.jar</p>\n\n<p>org.springframework.instrument.tomcat-3.1.0.M2.jar</p>\n\n<p>org.springframework.instrument-3.1.0.M2.jar</p>\n\n<p>org.springframework.jdbc-3.1.0.M2.jar</p>\n\n<p>org.springframework.jms-3.1.0.M2.jar</p>\n\n<p>org.springframework.orm-3.1.0.M2.jar</p>\n\n<p>org.springframework.oxm-3.1.0.M2.jar</p>\n\n<p>org.springframework.test-3.1.0.M2.jar</p>\n\n<p>org.springframework.transaction-3.1.0.M2.jar</p>\n\n<p>org.springframework.web.portlet-3.1.0.M2.jar</p>\n\n<p>org.springframework.web.servlet-3.1.0.M2.jar</p>\n\n<p>org.springframework.web.struts-3.1.0.M2.jar</p>\n\n<p>org.springframework.web-3.1.0.M2.jar</p>\n"},{"tags":["spring","scheduler","spring-batch"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12934619,"title":"Spring Batch with support of Scheduler","body":"<p><strong>Scenario:</strong> The system needs to check the Product table in the database DAILY to check every product's expiration date. The system needs to get a list of products with expiration dates matching the current date. Then, removes these products in the database.</p>\n\n<p>Things to consider:\n - Runs a single query to retrieve products that has matching expiration date.\n - Remove these products in the database.\n - We are talking about thousands of products here.</p>\n\n<p><strong>QUESTION:</strong> Is there a need for me to create a Spring Batch Job supported with Scheduler for this or just a Scheduled Job to do this efficiently?</p>\n\n<p>Because in Scheduled Job, I can just schedule the checking and removing daily. And its done. At the same time, I can also do it using Spring Batch with Scheduler. But, what do you think is the more efficient way?</p>\n"},{"tags":["java","sql","spring","spring-data-jpa"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":12943574,"title":"Spring Data JPA Select Distinct","body":"<p>I have a situation where I need to build a <code>select distinct a.address from Person a</code> (where address is a Address entity inside the Person) kind of query.  </p>\n\n<p>I am using Specification to dynamically build my where clause and using the <code>findAll(Specification&lt;T&gt;)</code> function to get the result. The problem is I can not use specification to build my select clause and hence can not use <code>findAll(Spcification)</code> function.</p>\n\n<p>What would be the best way to do something like this?</p>\n"},{"tags":["spring","specifications","spring-data","querydsl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12933327,"title":"Spring Data Specification or QueryDSL","body":"<p>In one of the projects, we are using Spring Data. Now that the queries are getting complex, we thought about adding Spring Data Specification or QueryDSL. </p>\n\n<p>However, not sure about the best way forward. I think they both serve the same purpose. Is any one is recommended over the other?</p>\n\n<p>Thanks</p>\n"},{"tags":["spring"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12949309,"title":"Spring not dynamic Switch DataSource","body":"<p><strong>Why use AbstractRoutingDataSource can not dynamic switch DataSource\nThis is the configuration information</strong></p>\n\n<pre><code>public class DynamicSwitch {\n    public static final ThreadLocal&lt;String&gt; local=new ThreadLocal&lt;String&gt;();\n\n    public static void setDB(String id){\n        local.set(id);\n    }\n    public static String getDB(){\n        return local.get();\n    }\n    public static void removeDB(){\n         local.remove();\n    }\n}\n\npublic class DynamicSource extends AbstractRoutingDataSource implements InitializingBean{\n    @Override\n    protected Object determineCurrentLookupKey() {\n        // TODO Auto-generated method stub\n        return DynamicSwitch.getDB();\n    }\n}\n\n&lt;bean id=\"dynamic\" class=\"com.aware.DynamicSource\"&gt;\n    &lt;property name=\"targetDataSources\"&gt;\n        &lt;map key-type=\"java.lang.String\"&gt;\n                &lt;entry key=\"1\" value-ref=\"dataSource\"&gt;&lt;/entry&gt;\n                &lt;entry key=\"2\" value-ref=\"localdataSource\"&gt;&lt;/entry&gt;\n        &lt;/map&gt;\n    &lt;/property&gt;\n    &lt;property name=\"defaultTargetDataSource\" ref=\"dataSource\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"methodService\" class=\"com.test.service.MethodServiceImpl\"&gt;\n    &lt;property name=\"sqlMapClient\" ref=\"sqlMapClient\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"test\" class=\"com.test.Test\" scope=\"prototype\"&gt;&lt;/bean&gt;\n\npublic class Test2 extends ActionSupport{\n\n    public String execute() throws Exception {\n        // TODO Auto-generated method stub\n        DynamicSwitch.setDB(\"2\");\n        MethodService methodService=(MethodService)ApplicationAware.getBean(\"methodService\");\n        Map&lt;String, String&gt; map=new HashMap&lt;String, String&gt;();\n        List list=methodService.testList(\"Service_ks_missionSpace.getService_ks_missionList\", map);\n        System.out.println(list.size());\n        return SUCCESS;\n}\n</code></pre>\n\n<p><strong>Invoke DynamicSwitch.setDB(\"2\") find can not Switch DataSource.\nDataSource or to default dataSource\nWhy</strong></p>\n"},{"tags":["spring","spring-mvc"],"answer_count":6,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":4459,"score":9,"question_id":2958497,"title":"Encoding problem using Spring MVC","body":"<p>I have a demo web application that creates users. When I try to insert data in other languages (like french) the characters are not encoded correctly.  The code on the controller is:</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\n    @RequestMapping(value = \"/user/create.htm\", params={\"id\"}, method = RequestMethod.GET)\n    public String edit(@RequestParam(\"id\") Long id, ModelMap model) {\n        System.out.println(\"id is \" + id);\n        User user = userService.get(id);\n\n        model.put(\"user\", user);\n        return \"user/create\";\n    }\n\n    @RequestMapping(value = \"/user/create.htm\", method = RequestMethod.POST)\n    public String save(@ModelAttribute(\"user\") User user, BindingResult result) {\n\n        System.out.println(user.getFirstName());\n        System.out.println(user.getLastName());\n\n\n        validator.validate(user, result);\n        if(result.hasErrors()) {\n            return \"user/create\"; \n        }\n\n        userService.save(user);\n        return \"redirect:list.htm\";\n    }\n</code></pre>\n\n<p>my web.xml is:</p>\n\n<pre><code>...\n\n    &lt;filter&gt;\n        &lt;filter-name&gt;encoding-filter&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;encoding&lt;/param-name&gt;\n            &lt;param-value&gt;UTF-8&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;encoding-filter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n...\n</code></pre>\n\n<p>and the page is:</p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%&gt;\n&lt;%@ taglib prefix=\"form\" uri=\"http://www.springframework.org/tags/form\" %&gt;\n&lt;%@ taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\" %&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n\n...\n\n&lt;form:form method=\"post\" commandName=\"user\"&gt;\n\n...\n\n&lt;form:input path=\"firstName\" cssErrorClass=\"form-error-field\"/&gt;\n\n...\n</code></pre>\n\n<p>when I enter some french characters in the first name then the output from the <code>system.out.println</code> is <code>????+?????</code> or something similar.</p>\n\n<p>I saw other people fixing this with the <code>CharacterEncodingFilter</code> but this doesn't seem to work.</p>\n\n<p>Thanks a lot.</p>\n\n<p>Edited the filter value.</p>\n"},{"tags":["java","spring","dependency-injection","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":12944040,"title":"inject into unit test (only XML)","body":"<p>Want to inject a dao that has a configured data source injected into it.. not a fan of annotation because it makes code ugly, i want a pure XML solution. </p>\n\n<p>the test cases are in subfolders in test folder, which is at the same level as the src folder</p>\n\n<pre><code>src\n   com\n       name\n           dao\n               ProductDao\ntest\n   com\n       name\n           dao\n               ProductDaoTest\n</code></pre>\n\n<p>ProductDaoTest needs to have ProductDao injected in it. tried to do that, spring injects it ok, but the ProductDao depenedencies arenot being injected, and I am facing NPE.</p>\n\n<p>thought about moving test classes into src folder, but I dont think I should have to do that. the other alternative that I am thinking of is running the test cases via the browse through controller calls (but wont be unit testing anymore), so I am stuck trying to figure out the right thing to do.</p>\n\n<p>thank you!\np.s. tests are junit, tomcat, spring 3.1</p>\n"},{"tags":["java","multithreading","spring","spring-integration"],"answer_count":2,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":467,"score":9,"question_id":8924694,"title":"Waiting for all threads to finish in Spring Integration","body":"<p>I have a self-executable jar program that relies heavily on Spring Integration. The problem I am having is that the <strong>program is terminating before the other Spring beans have completely finished</strong>.</p>\n\n<p>Below is a cut-down version of the code I'm using, I can supply more code/configuration if needed. The entry point is a main() method, which bootstraps Spring and starts the import process:</p>\n\n<pre><code>public static void main(String[] args) {\n    ctx = new ClassPathXmlApplicationContext(\"flow.xml\");\n    DataImporter importer = (DataImporter)ctx.getBean(\"MyImporterBean\");\n    try {\n        importer.startImport();\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        ctx.close();\n    }\n}\n</code></pre>\n\n<p>The DataImporter contains a simple loop that fires messages to a Spring Integration gateway. This delivers an active \"push\" approach to the flow, rather than the common approach of polling for data. This is where my problem comes in:</p>\n\n<pre><code>public void startImport() throws Exception {\n    for (Item item : items) {\n        gatewayBean.publish(item);\n        Thread.sleep(200); // Yield period\n    }\n}\n</code></pre>\n\n<p>For completeness, the flow XML looks something like this:</p>\n\n<pre><code>&lt;gateway default-request-channel=\"inChannel\" service-interface=\"GatewayBean\" /&gt;\n\n&lt;splitter input-channel=\"inChannel\" output-channel=\"splitChannel\" /&gt;\n\n&lt;payload-type-router input-channel=\"splitChannel\"&gt;\n    &lt;mapping type=\"Item\" channel=\"itemChannel\" /&gt;\n    &lt;mapping type=\"SomeOtherItem\" channel=\"anotherChannel\" /&gt;\n&lt;/payload-type-router&gt;\n\n&lt;outbound-channel-adapter channel=\"itemChannel\" ref=\"DAOBean\" method=\"persist\" /&gt;\n</code></pre>\n\n<p>The flow starts and processes items effectively, but once the startImport() loop finishes the main thread terminates and tears down all the Spring Integration threads immediately. This results in a race condition, the last (n) items are not completely processed when the program terminates.</p>\n\n<p>I have an idea of maintaining a reference count of the items I am processing, but this is proving to be quite complicated, since the flow often splits/routes the messages to multiple service activators - meaning it is difficult to determine if each item has \"finished\". </p>\n\n<p>What I think I need is some way to either check that no Spring beans are still executing, or to flag that all items sent to the gateway have been completely processed before terminating. </p>\n\n<p><strong>My question is, how might I go about doing either of these, or is there a better approach to my problem I haven't thought of?</strong></p>\n"},{"tags":["java","sql","oracle","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12932799,"title":"Improving performance of native sql query in spring/hibernate applicaiton?","body":"<p>I have below the <code>native sql query</code>. i am using <code>Oracle</code> database.</p>\n\n<pre><code>select\n         * \n     from\n         (select\n             row_.*,\n             rownum rownumber \n         from\n             (select\n                 colmn1,\n                 colmn2,\n                 colmn3,\n                 colmn4,\n                 colmn5,\n                 colmn6,\n                 from\n                 Table5\n             where\n                 colmn5 In (\n                    '19901','10001'\n                 ) \n             order by\n                colmn1 ) row_ ) \n         Where\n             Rownumber &lt;= 50000\n             and rownumber &gt; 0\n</code></pre>\n\n<p>Above query returns <code>50000</code> records. if i execute above query in <code>sqldeveloper</code>, it takes only <code>30 seconds</code> but in the spring and hibernate integrated application it takes <code>15 minutes</code>. How can i improve the performance?</p>\n\n<p>Thanks!</p>\n"},{"tags":["spring","tomcat","maven"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12947846,"title":"Unable To Render Page In Latest Tomcat Version","body":"<p>My maven webapp project unable to render page in latest tomcat versions.The page will render when i replace the catalina.jar and tomcat-coyote.jar in tomcat lib.Could any one help me to solve this issue please ? </p>\n"},{"tags":["spring","jsf-2","dependency-injection","autowired","managed-bean"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":185,"score":1,"question_id":12847436,"title":"Null pointer when autowiring the bean into JSF Managed bean","body":"<p>I have developed a Email service using Spring Java mail and Velocity Template like below.</p>\n\n<p>Email.java</p>\n\n<pre><code>@Component\npublic class Email {    \n\n        private JavaMailSender mailSender;      \n        private VelocityEngine velocityEngine;  \n\n\n         @Autowired\n        private ApplReviewService applReviewService;\n\n       @Autowired\n        private UserService userService;\n\n\n        public void setUserService(UserService userService ) {\n            this.userService=userService;\n        }\n\n\n        public UserService getuserService() {\n            return userService;\n        }\n\n        @Autowired\n        @Required\n        public void setMailSender(JavaMailSender mailSender) {\n            this.mailSender = mailSender;\n        }\n\n        public VelocityEngine getVelocityEngine() {\n            return velocityEngine;\n        }\n\n        @Autowired\n        @Required\n        public void setVelocityEngine(VelocityEngine velocityEngine) {\n            this.velocityEngine = velocityEngine;\n        }\n</code></pre>\n\n<p>// Method to send Email.\n}</p>\n\n<p>My Spring.xml   </p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.test.common\"/&gt;\n\n    &lt;bean id=\"mailSender\" class=\"org.springframework.mail.javamail.JavaMailSenderImpl\"&gt;\n           &lt;/bean&gt;\n\n   &lt;bean id=\"velocityEngine\" class=\"org.springframework.ui.velocity.VelocityEngineFactoryBean\"&gt;\n      &lt;property name=\"velocityProperties\"&gt;\n         &lt;value&gt;\n            resource.loader=class\n            class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader\n         &lt;/value&gt;\n      &lt;/property&gt;\n   &lt;/bean&gt;\n\n\n@ManagedBean(name=\"person\")\n@SessionScoped\nPublic class Person{\n\n@Autowired\nprivate Email email ; // getter and setter for this.\n\n}\n</code></pre>\n\n<p>I am trying autowire my Email class into Jsf managedBean but I am getting null pointer exception. Where I am going wrong.</p>\n"},{"tags":["spring","tomcat"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12947168,"title":"Using Same WebApproot in Spring Framework and TomCat","body":"<p>I have a 3rd party Spring app in Tomcat7, and I would like to run multiple copies in different contexts.  There is an issue with Tomcat and Spring where each context needs a unique WebApproot.  However, this app uses a specific hardcoded value for WebApproot, it will not work if changed to a different value.  Is there any hack/workaround to get this to work, other than running multiple instances of Tomcat on different ports?</p>\n"},{"tags":["java","android","spring","dependency-injection"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12946029,"title":"Can the Spring Framework be used in android applications?","body":"<p>I am writing a android application which requires dependency injection in the data access API the application will need (I am implementing this API). I don't want to write the dependency injection manually. Therefore, I was thinking of using Spring. I realize that there are two versions of spring. A regular version and a android version. Can the regular version be used in the android application cause I just want the dependency injection functionality and already have the files.</p>\n"},{"tags":["spring","spring-mvc","mocking","integration-testing","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":297,"score":0,"question_id":9824414,"title":"What can be used instead of MockMvc (sprint-mvc-test)?","body":"<p>I would like to do a test like: <a href=\"http://stevelibonati.wordpress.com/2012/02/05/spring-mvc-test-with-a-sprinkle-of-mockito/\" rel=\"nofollow\">http://stevelibonati.wordpress.com/2012/02/05/spring-mvc-test-with-a-sprinkle-of-mockito/</a></p>\n\n<p>My problem is that I am not allowed to use SNAPSHOTS in this project. Is it possible to achieve this kind og testing (send request object and get the close-to-real response) to e.g do a XML validating....</p>\n"},{"tags":["xml","eclipse","spring","xsd","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12940600,"title":"attributeGroup in xsd and its representation in xml","body":"<p>Given this XSD from <a href=\"http://www.springframework.org/schema/security/spring-security-3.1.xsd\" rel=\"nofollow\">this document</a></p>\n\n<pre><code>&lt;xs:element name=\"jdbc-user-service\" substitutionGroup=\"security:any-user-service\"&gt;\n    &lt;xs:annotation&gt; .. etc &lt;/xs:annotation&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:attribute name=\"id\" type=\"xs:token\"&gt;&lt;/xs:attribute&gt;\n        &lt;xs:attributeGroup ref=\"security:jdbc-user-service.attlist\"/&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n\n&lt;xs:attributeGroup name=\"jdbc-user-service.attlist\"&gt;\n    &lt;xs:attribute name=\"data-source-ref\" use=\"required\" type=\"xs:token\"&gt;\n    &lt;/xs:attribute&gt;\n    &lt;xs:attribute name=\"cache-ref\" type=\"xs:token\"&gt;\n    &lt;/xs:attribute&gt;\n    &lt;xs:attribute name=\"users-by-username-query\" type=\"xs:token\"&gt;\n    &lt;/xs:attribute&gt;\n    &lt;xs:attribute name=\"authorities-by-username-query\" type=\"xs:token\"&gt;\n    &lt;/xs:attribute&gt;\n    &lt;xs:attribute name=\"group-authorities-by-username-query\" type=\"xs:token\"&gt;     \n    &lt;/xs:attribute&gt;\n    &lt;xs:attribute name=\"role-prefix\" type=\"xs:token\"&gt;\n    &lt;/xs:attribute&gt;\n&lt;/xs:attributeGroup&gt;\n</code></pre>\n\n<p>then why is eclipse giving me this error</p>\n\n<blockquote>\n  <p>cvc-complex-type.2.4.a: Invalid content was found starting with element 'jdbc-user-service'. One of '{\"http://\n   www.springframework.org/schema/security\":user}' is expected.</p>\n</blockquote>\n\n<p>when I provide the following XML?</p>\n\n<pre><code>&lt;jdbc-user-service\n    data-source-ref=\"dataSource\"\n    users-by-username-query=\"SELECT u.uname, u.upwd, u.enabled FROM ucsdb.users u WHERE u.uname = ?\"/&gt;\n</code></pre>\n\n<p>Thanks,</p>\n"},{"tags":["java","xml","spring","maven","applicationcontext"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":118,"score":1,"question_id":10519622,"title":"Wiring multiple independent Spring Applications using Maven","body":"<p>My project consists of multiple Spring subprojects:</p>\n\n<ul>\n<li>Service1</li>\n<li>Service2</li>\n<li>Service3</li>\n</ul>\n\n<p>Every Service has multiple dependencies to other Beans inside, so every Service has an applicationContext.xml wiring the Service together. </p>\n\n<p>I made every subproject an standalone maven build and i thought i can create a AllServicesTogether Application to wire those Service{1..3} together.</p>\n\n<p>This works by adding maven dependencies to those Services.</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.myproject&lt;/groupId&gt;\n        &lt;artifactId&gt;myproject-service{1..3}&lt;/artifactId&gt;\n        &lt;version&gt;0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n    ...\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>But inside the AllServicesTogether Application, all wiring of the SubServices is lost. I guess Subservices aren't compiled with the Subservice ApplicationContext, but use the AllServicesTogether ApplicationContext.</p>\n\n<p>The Idea is to encapsulate all wiring of SubSerivces and simply wire the AllServicesTogether by using:\n</p>\n\n<pre><code>&lt;beans ..&gt;\n    &lt;bean class=\"org.myproject.service1.Service1\"/&gt;\n    &lt;bean class=\"org.myproject.service1.Service2\"/&gt;\n    &lt;bean class=\"org.myproject.service1.Service3\"/&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>I created those subprojects from the bigger project spending hours on it.\nIs it possible to use this wiring method or do i need to include the context.xml's from all those Services?</p>\n"},{"tags":["spring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12946300,"title":"Spring read JSON payload in prehandle interceptor and controller","body":"<p>I am a web-app based on spring-mvc 3.1.0 running on Tomcat 6 , JDK 1.6. I need to read the incoming JSON request payload in my \"prehandle\" Interceptor method and then forward to the controller method to further service the JSON request. I had created a HttpServletRequestWrapper for the same . The issue is HttpServletRequestWrapper  and / or HttpServletRequest inputstream reaches EOF by the time the Controller method wakes up to service the request . </p>\n\n<p>My code works perfectly in case there is no interceptor code. Kindly help.</p>\n\n<p><strong>My HttpServletRequestWrapper code :</strong> </p>\n\n<p>public class MyRequestWrapper extends HttpServletRequestWrapper {</p>\n\n<pre><code>private static final Logger logger = Logger.getLogger(MyRequestWrapper.class);\n\nprivate final ByteArrayOutputStream bos = new ByteArrayOutputStream();\n\nprivate final ServletInputStream inputStream;\n\nprivate BufferedReader reader;\n\npublic MyRequestWrapper(HttpServletRequest request) throws IOException {\n\n    super(request);\n\n    this.inputStream = new RequestCachingInputStream(request.getInputStream());\n}\n\n@Override\npublic ServletInputStream getInputStream() throws IOException {\n    logger.debug(\"inside getInputStream\");\n    return inputStream;\n}\n\n@Override\npublic String getCharacterEncoding() {\n\n    return super.getCharacterEncoding() != null ? super.getCharacterEncoding() :\n            WebUtils.DEFAULT_CHARACTER_ENCODING;\n}\n\n@Override\npublic BufferedReader getReader() throws IOException {\n\n    if (this.reader == null) {\n        this.reader = new BufferedReader(new InputStreamReader(inputStream, getCharacterEncoding()));\n    }\n    return this.reader;\n}\n\npublic byte[] toByteArray() {\n\n    return this.bos.toByteArray();\n}\n\nprivate class RequestCachingInputStream extends ServletInputStream {\n\n    private final ServletInputStream is;\n\n    private RequestCachingInputStream(ServletInputStream is) {\n        logger.debug(\"inside RequestCachingInputStream\");\n        this.is = is;\n    }\n\n    @Override\n    public int read() throws IOException {\n\n        int ch = is.read();\n\n        logger.debug(\"inside read =&gt; \"+ch);\n\n        if (ch != -1) {\n            bos.write(ch);\n        }\n        return ch;\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>My contoller code :</strong> </p>\n\n<p>@RequestMapping( value=\"/common/listProp\" , method = RequestMethod.POST , consumes = \"application/json\")</p>\n\n<p>public @ResponseBody CommonResponseDao getListMasterProperty(@RequestBody CommonRequestBo commonRequestBo) {</p>\n\n<pre><code>    logger.debug(\"CommonHandler =&gt; \"+commonRequestBo);\n\n    CommonResponseDao commonResponseDao =  commonBo.listMasterProperty(commonRequestBo);\n\n    return commonResponseDao;\n}\n</code></pre>\n\n<p><strong>My prehandle Interceptor code :</strong> </p>\n\n<p>public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)throws Exception {</p>\n\n<pre><code>String requestUri = request.getRequestURI();\n\nlogger.debug(\"Request URI : \"+requestUri);\n\nHy5TestRequestWrapper hy5TestRequestWrapper = new Hy5TestRequestWrapper(request);\n\nlogger.debug(\"json payload from wrapper =&gt; \"+IOUtils.toString( hy5TestRequestWrapper.getInputStream() ));\n\n// json string check logic\n\nreturn true;\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","spring","spring-mvc","junit4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":12945816,"title":"Is it possible to use JExample and Spring integration test at the same time?","body":"<p>I'm testing a Spring web MVC application with heavy RESTful invocation that POST and DELETE a remote resource on demands.</p>\n\n<p>When I'm trying to run integrated test, obviously I need to test POST first and then DELETE second. Unfortunately JUnit doesn't support such dependency test, and the vanilla JExample class cannot be run with Spring application context. Is there a feasible way of using both?</p>\n"},{"tags":["spring","spring-mvc","url-rewriting"],"answer_count":2,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":57,"score":8,"question_id":12498450,"title":"Is it possible to redirect a url using spring","body":"<p>I'm working on a project using spring, MVC, and implementing webapp-runner. The project used to have a hierarchy like /test/home/index.jsp but using webapp-runner it changed to /home/index.jsp. So, What I need is to support and redirect the old url's with \"/test/home/index.jsp\" to \"/home/index.jsp\" so the page doesn't brake in case an old url is used.\nI will be thankful if anyone can give me a hand.</p>\n"},{"tags":["json","spring","jackson","deserialization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12933394,"title":"Jackson deserialize \"\" as an empty list","body":"<p>I have a JSON string that marks empty lists as <code>\"\"</code> instead of <code>[]</code>. So for example, if I have an object with no children, I'll receive a string like this:</p>\n\n<pre><code>{\"id\":13, \"children\":\"\"}\n</code></pre>\n\n<p>I'd like to deserialize that to a Parent class, with children properly set to an empty list of children.</p>\n\n<pre><code>public class Parent {\n\n    private Long id;\n    private List&lt;Child&gt; children;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public List&lt;Child&gt; getChildren() {\n        return children;\n    }\n\n    public void setChildren(List&lt;Child&gt; children) {\n        this.children = children;\n    }\n}\n</code></pre>\n\n<p>For the above JSON string, I'd like an object that will have its <code>id</code> set to <code>13</code>, and the <code>children</code> set to a <code>new ArrayList&lt;Child&gt;()</code></p>\n\n<pre><code>Parent\n    id &lt;- 13\n    children &lt;- new ArrayList&lt;Child&gt;()\n</code></pre>\n\n<p>I would know how to use an annotation for the entire class</p>\n\n<pre><code>@JsonDeserialize(using = ParentDeserializer.class)\npublic class Parent { \n    ...\n}\n</code></pre>\n\n<p>and then </p>\n\n<pre><code>public class ParentDeserializer extends JsonDeserializer&lt;Parent&gt; {\n    public Parent deserialize(JsonParser parser, DeserializationContext context) {\n        ...    \n    }\n}\n</code></pre>\n\n<p>However, I'd like to solve a general problem of instantiating Lists properly from <code>\"\"</code> strings:</p>\n\n<pre><code>public class Parent {\n    ...\n    // Can I get something like this?\n    @JsonDeserialize(using = EmptyArrayDeserializer&lt;Child&gt;.class) \n    public void setChildren(List&lt;Child&gt; children) {\n        this.children = children;\n    }\n}\n</code></pre>\n\n<p>Can I get something like that?</p>\n"},{"tags":["spring","applicationcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12944713,"title":"Is it possible to set a resource property value inside applicationcontext?","body":"<p>In an applicationcontext.xml, is it possible to set a value which can be used later in SPEL expressions?</p>\n\n<p>For example is there a way to do this?:</p>\n\n<pre><code>&lt;setProperty name=\"foo\" value=\"someval\" /&gt;\n\n\n&lt;bean id=\"beanId\" name=\"beanName\" class=\"SomeClass\"&gt;\n    &lt;property name=\"someVal\" value=\"blah_${foo}\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The actual reason I want to do this is that I use  statements to create entity managers which are used in many different application contexts. The problem is that the entity managers require a unique name which is used by Bitronix to create a local file which breaks if multiple unit tests run at the same time using the same name for that field. To set that unique name I currently have a separate properties file for each application context and import it to get a unique name from it.</p>\n\n<p>Rather than doing that nonsense I'd rather just do this:</p>\n\n<pre><code>&lt;setProperty name=\"uniqueName\" value=\"someUniqueName\" /&gt;\n&lt;import resource=\"classpath*:shared/db/fooDb.xml\" /&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-3"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":304,"score":1,"question_id":11304999,"title":"Why unit testing with Spring 3.1 WebMvcConfig is fail?","body":"<p>From Spring 3.1, we can use JavaConfig more easily thanks to <a href=\"http://static.springsource.org/spring/docs/current/spring-framework-reference/html/new-in-3.1.html#d0e1343\" rel=\"nofollow\">@Enable*</a> annotations. </p>\n\n<p>So I made a WebConfig to set WebMvc configuration, and tried to test it. But if I extends WebMvcConfigurerAdapter or WebMvcConfigurationSupport with WebConfig the unit test fails because of lack of ServletContext. The codes and messages looks like below.</p>\n\n<p>WebConfig.java</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig extends WebMvcConfigurationSupport {}\n</code></pre>\n\n<p>Test.java</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes=WebConfig.class)\npublic class TestFail {\n    @Test\n    public void test() {}\n}\n</code></pre>\n\n<p>Message</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\n...\nCaused by: java.lang.IllegalArgumentException: A ServletContext is required to configure default servlet handling\n    at org.springframework.util.Assert.notNull(Assert.java:112)\n    at org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer.&lt;init&gt;(DefaultServletHandlerConfigurer.java:54)\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.defaultServletHandlerMapping(WebMvcConfigurationSupport.java:253)\n    at com.zum.news.comments.web.WebConfig$$EnhancerByCGLIB$$8bbfcca1.CGLIB$defaultServletHandlerMapping$10(&lt;generated&gt;)\n    at com.zum.news.comments.web.WebConfig$$EnhancerByCGLIB$$8bbfcca1$$FastClassByCGLIB$$19b86ad0.invoke(&lt;generated&gt;)\n    at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:215)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)\n    at com.zum.news.comments.web.WebConfig$$EnhancerByCGLIB$$8bbfcca1.defaultServletHandlerMapping(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)\n    ... 41 more\n</code></pre>\n\n<p>How to unit test the WebConfig properly?</p>\n"},{"tags":["flex","hibernate","spring","blazeds"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3252,"score":0,"question_id":2489978,"title":"How to solve \"NullPointerException\" with \"Server.processing\" error while we are using Flex Builder 3 and BlazeDS?","body":"<p>I am using Flex builder 3, BlazeDS, and Java with Spring and Hibernate framework. I using the remote object to load a string from spring's configuration files. But in testing, I found this fault event like this:</p>\n\n<blockquote>\n  <p>RPC Fault\n  faultString=\"java.lang.NullPointerException\"\n  faultCode=\"Server.Processing\"\n  faultDetail=\"null\"</p>\n</blockquote>\n\n<p>I have checked the configuration in remote-config.xml and services-config.xml. But it looks good. Some people have talked about this problem around the Internet and I think you can help me and them.</p>\n\n<p>I am using these environment:</p>\n\n<ul>\n<li>Flex Builder 3</li>\n<li>BlazeDS 3.2.0</li>\n<li>JBoss server</li>\n</ul>\n\n<p>Full stacktrace:</p>\n\n<pre>\n[RPC Fault faultString=\"java.lang.NullPointerException\" faultCode=\"Server.Processing\" faultDetail=\"null\"]\n at mx.rpc::AbstractInvoker/http://www.adobe.com/2006/flex/mx/internal::faultHandler()[C:\\autobuild\\3.2.0\\frameworks\\projects\\rpc\\src\\mx\\rpc\\AbstractInvoker.as:220]\n at mx.rpc::Responder/fault()[C:\\autobuild\\3.2.0\\frameworks\\projects\\rpc\\src\\mx\\rpc\\Responder.as:53]\n at mx.rpc::AsyncRequest/fault()[C:\\autobuild\\3.2.0\\frameworks\\projects\\rpc\\src\\mx\\rpc\\AsyncRequest.as:103]\n at NetConnectionMessageResponder/statusHandler()[C:\\autobuild\\3.2.0\\frameworks\\projects\\rpc\\src\\mx\\messaging\\channels\\NetConnectionChannel.as:569]\n at mx.messaging::MessageResponder/status()[C:\\autobuild\\3.2.0\\frameworks\\projects\\rpc\\src\\mx\\messaging\\MessageResponder.as:222]\n</pre>\n"},{"tags":["spring","hibernate","tomcat","jpa","persistence-unit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12941265,"title":"Can I use one hibernate persistence unit on tomcat and share it between deployed wars?","body":"<p>I have an application running on tomcat where we have multiple wars. </p>\n\n<ol>\n<li>War1 is a web app that is used to provision the database.</li>\n<li>War2 is for uploading data via a web service.</li>\n<li>War3 is for getting data via a web service.</li>\n<li>War4 is another web app that is used to view the data in a dashboard.</li>\n</ol>\n\n<p>We use hibernate/jpa and spring. The classes are annotated and we don't have a persistence.xml  for any of them. All configuration is in the spring context file and the annotations.\nHere's the spring file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:jpa=\"http://www.springframework.org/schema/data/jpa\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:flow=\"http://www.springframework.org/schema/webflow-config\"\n       xmlns:lang=\"http://www.springframework.org/schema/lang\"\n       xmlns:osgi=\"http://www.springframework.org/schema/osgi\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xmlns:util=\"http://www.springframework.org/schema/util\"\n       xmlns:p=\"http://www.springframework.org/schema/p\"\n       xmlns:cache=\"http://www.springframework.org/schema/cache\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n          http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n          http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n          http://www.springframework.org/schema/webflow-config http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd\n          http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd\n          http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi-3.0.xsd\n          http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n          http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd\n          http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\n          http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd\n\"&gt;\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n    &lt;!-- Directory to scan for repository classes --&gt;\n    &lt;jpa:repositories\n        base-package=\"com.blah.db.model.repository\" /&gt;\n    &lt;bean id=\"propertyConfigurer\"\n          class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;/WEB-INF/configuration.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;cache:annotation-driven /&gt;\n        &lt;bean id=\"cacheManager\" class=\"org.springframework.cache.ehcache.EhCacheCacheManager\" p:cache-manager-ref=\"ehcache\"/&gt;\n        &lt;bean id=\"ehcache\" class=\"org.springframework.cache.ehcache.EhCacheManagerFactoryBean\"\n                    p:config-location=\"/WEB-INF/ehcache.xml\"\n                    p:shared=\"true\"/&gt;\n    &lt;context:component-scan base-package=\"com.blah.db.model.service\" /&gt;\n    &lt;context:component-scan base-package=\"com.blah.business.objects\" /&gt;\n    &lt;context:component-scan base-package=\"com.blah.data.access.objects\" /&gt;\n    &lt;context:component-scan base-package=\"com.blah.common\" /&gt;\n\n    &lt;bean class=\"org.springframework.orm.jpa.JpaTransactionManager\"\n      id=\"transactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\"\n            ref=\"entityManagerFactory\" /&gt;\n        &lt;property name=\"jpaDialect\"&gt;\n            &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaDialect\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"entityManagerFactory\"\n      class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"packagesToScan\" value=\"com.blah.db.model\"  /&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"jpaVendorAdapter\"&gt;\n            &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n                &lt;property name=\"generateDdl\" value=\"${hibernate.generate.ddl}\" /&gt;\n                &lt;property name=\"database\" value=\"${hibernate.database}\" /&gt;\n                &lt;property name=\"showSql\" value=\"${show.sql}\" /&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n        &lt;property name=\"jpaProperties\"&gt;\n            &lt;map&gt;\n                &lt;entry key=\"hibernate.default_schema\" value=\"${default.schema}\"/&gt;\n                &lt;entry key=\"hibernate.dialect\" value=\"${jdbc.hibernate.dialect}\"/&gt;\n                &lt;entry key=\"hibernate.id.new_generator_mappings\" value=\"${new.generator.mappings}\"/&gt;\n                &lt;entry key=\"hibernate.cache.region.factory_class\" value=\"${hibernate.cache.factory.class}\"/&gt;\n                &lt;entry key=\"hibernate.cache.use_second_level_cache\" value=\"${hibernate.use.second.level.cache}\"/&gt;\n                &lt;entry key=\"hibernate.cache.use_query_cache\" value=\"${hibernate.use.query.cache}\"/&gt;\n                &lt;entry key=\"net.sf.ehcache.configurationResourceName\" value=\"${ehcache.config.file}\"/&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"dataSource\"\n      class=\"org.apache.commons.dbcp.BasicDataSource\"\n      destroy-method=\"close\"&gt;\n        &lt;property name=\"driverClassName\" value=\"org.postgresql.Driver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:postgresql://127.0.0.1:5432/blah\" /&gt;\n        &lt;property name=\"username\" value=\"postgres\" /&gt;\n        &lt;property name=\"password\" value=\"password\" /&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"openSessionInViewInterceptor\" class=\"org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor\"&gt;\n        &lt;property name=\"entityManagerFactory\"&gt;\n            &lt;ref local=\"entityManagerFactory\"/&gt;\n        &lt;/property&gt;\n        &lt;property name=\"jpaProperties\"&gt;\n            &lt;map&gt;\n                &lt;entry key=\"singleSession\" value=\"true\"/&gt;\n                &lt;entry key=\"flushModeName\" value=\"FLUSH_AUTO\"/&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>How do I ensure that all the wars use a single persistence unit? I want to be able to use ehcache, but I know I can't use it if they all use their own PU.</p>\n\n<p>Is my only option moving to JavaEE and packaging it all in an EAR?</p>\n\n<p>Thanks!</p>\n"},{"tags":["spring","jpa-2.0","criteria-api","specification"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":491,"score":0,"question_id":10854334,"title":"JPA2 Criteria-API: select... in (select from where)","body":"<p>I have the following database model:</p>\n\n<pre><code>A\naId\n\nAB\naId\nbId\n\nB\nbId\nstatus\n</code></pre>\n\n<p>In a Spring data Specification, I want to return the instances of A when B.status is 'X'.\nThe JPQL code is the following:</p>\n\n<pre><code>select a from A a where a in\n     (select ab.id.a from AB ab where ab.id.b.status= :status)\n</code></pre>\n\n<p>These are the model classes:</p>\n\n<pre><code>@Entity\npublic class A {\n     private Long aId;\n\n     @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = \"id.a\")\n     private Set&lt;AB&gt; ab;\n}\n\n@Entity\npublic class B {\n     private Long bId;\n     private String Status;\n\n     @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = \"id.b\")\n     private Set&lt;AB&gt; ab;\n}\n\n@Entity\npublic class AB {\n     private ABPK id;\n}\n\npublic class ABPK {\n     @ManyToOne\n     @JoinColumn(name=\"aId\")\n     private A a;\n\n     @ManyToOne\n     @JoinColumn(name=\"bId\")\n     private B b;\n}\n</code></pre>\n\n<p>How would be the JPA Criteria in the Spring Specification?</p>\n\n<pre><code>public class ASpecifications {\n     public static Specification&lt;A&gt; test(final String status) {\n          return new Specification&lt;Party&gt;() {\n          @Override\n          public Predicate toPredicate(Root&lt;A&gt; a, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb) {\n            return null;\n          }\n        };\n     }\n}\n</code></pre>\n"},{"tags":["java","spring","jpa","ejb"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12731236,"title":"JPA entity mapping from different persistent unit","body":"<p>Is there any specific configuration to put an entity from different persistence Unit into a current mapping?</p>\n\n<p>For example:</p>\n\n<pre><code>@RooJpaActiveRecord(persistenceUnit = \"persistenceUnit_central\")\npublic class UserGroups{\n\n    //users come from `persistenceUnit_client`\n    //how to work this out?\n    //can mappedBy and targetEntity works the same way\n    //as they are in the same persistence unit?\n    @OneToMany\n    private List&lt;User&gt; users;\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","jms","ibm-mq"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":11932741,"title":"Is there a way to identify an unknown jms object that is deserialisable?","body":"<p>So you find an exception in your logs:</p>\n\n<pre><code>Execution of JMS message listener failed, and no ErrorHandler has been set.\ncom.company.eq.mo.app.exception.DefaultMessageListenerException: Failed to handle message.; nested exception is com.company.eq.mo.app.exception.DefaultMessageListenerException: This message does not contain a recognised java object; nested exception is javax.jms.MessageFormatException: MQJMS1061: Unable to deserialize object the class name to find out anymore info about the message:\n</code></pre>\n\n<p>The message is Deserialisable and you can't get and print the object out at runtime:</p>\n\n<pre><code>    Object object = ((ObjectMessage) message).getObject();\n                object.getClass();\n</code></pre>\n\n<p>Because it does not exist in your class path.</p>\n\n<p>Is there any other way of getting the class/object name?</p>\n"},{"tags":["java","spring","jms","jta","spring-jms"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":162,"score":0,"question_id":9179559,"title":"Transaction Support for Springs onMessage handler","body":"<p>So I have some boilerplate code that consumes messages from a topic:</p>\n\n<pre><code>    public void onMessage(Message message )\n{\n    try\n    {\n        // try my conversion\n    }\n    catch(MyConversionException e)\n    {\n        //catch conversion error but still consume off topic\n    }\n\n    //Any other error i.e. runtime errors will not cause the message to be consumed from topic. So it can be retried\n\n}\n</code></pre>\n\n<p>I wish to be able to try to convert the message into another object. If this causes an error I will catch it with my own exception handling and write it to an error queue.</p>\n\n<p>My question is, how do I set up Springs messageListenerContainer bean to be Transactional and only consume if this has taken place successfully???</p>\n\n<p><strong>[EDIT]</strong>   Here is the bean so far:</p>\n\n<pre><code>    &lt;!-- MESSAGE LISTENER CONTAINER --&gt;\n&lt;bean id=\"ListenerContainer\"\n    class=\"org.springframework.jms.listener.DefaultMessageListenerContainer\"&gt;\n    &lt;property name=\"messageListener\" ref=\"MessageListener\" /&gt;\n    &lt;property name=\"connectionFactory\" ref=\"Tcf\" /&gt;\n    &lt;property name=\"destinationResolver\" ref=\"JmsDestinationResolver\" /&gt;\n    &lt;property name=\"receiveTimeout\" value=\"${jms-timeout}\" /&gt;\n    &lt;property name=\"destinationName\" value=\"${jms-topic}\" /&gt;\n    &lt;property name=\"concurrency\" value=\"1\" /&gt;\n    &lt;property name=\"pubSubDomain\" value=\"true\" /&gt;\n    &lt;property name=\"subscriptionDurable\" value=\"${jms-durable-flag}\"/&gt;\n    &lt;property name=\"durableSubscriptionName\" value=\"${jms-durable-name}\" /&gt;\n    &lt;property name=\"clientId\" value=\"${jms-client-id}\"/&gt;\n&lt;/bean&gt; \n</code></pre>\n"},{"tags":["java","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12942264,"title":"spring messages.properties uses variable name","body":"<p>Is there a way to use a title instead of a variable name when overriding Spring's default messages using the messages.properties file?</p>\n\n<p>For example, I used this</p>\n\n<pre><code>typeMismatch.java.lang.Integer={0} must be a number.\n</code></pre>\n\n<p>to create the error message \"firstName must be a number.\", but I would prefer more readability, like \"First Name must be a number.\".</p>\n\n<p>Is there any way to do this?</p>\n"},{"tags":["java","spring"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12941955,"title":"Spring Beans - how to wire null as a constructor arg?","body":"<p>I have the following bean defined:</p>\n\n<pre><code>&lt;bean id=\"myBean\" class=\"com.me.myapp.Widget\"&gt;\n    &lt;constructor-arg name=\"fizz\" value=\"null\"/&gt;\n    &lt;constructor-arg name=\"buzz\" ref=\"someOtherBean\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>When I run my app, Spring throws a bean config exception:</p>\n\n<pre><code>[java] Exception in thread \"main\" org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'myBean' defined in class path resource [spring-config.xml]:\nUnsatisfied dependency expressed through constructor argument with index 0\nof type [com.me.myapp.Widget]: Could not convert constructor argument value of\ntype [java.lang.String] to required type [com.me.myapp.Widget]: Failed to\nconvert value of type 'java.lang.String' to required type\n'com.me.myapp.Widget'; nested exception is java.lang.IllegalStateException:\nCannot convert value of type [java.lang.String] to required\ntype [com.me.myapp.Widget]: no matching editors or conversion strategy found\n</code></pre>\n\n<p>I just want to create a <code>Widget</code> like I would if I wrote the following Java:</p>\n\n<pre><code>Widget w = new Widget(null, someOtherBean);\n</code></pre>\n\n<p>How can I do this? Thanks in advance!</p>\n"},{"tags":["java","spring"],"answer_count":4,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":116,"score":9,"question_id":12920606,"title":"When to use autowiring in Spring","body":"<p>I am reading the book <a href=\"http://rads.stackoverflow.com/amzn/click/1430241071\">Pro Spring 3</a>. It has a certain paragraph that really confused me. The paragraph is about autowiring in spring. Here is an excerpt:</p>\n\n<blockquote>\n  <p>In most cases, the answer to the question of whether you should use\n  autowiring is definitely “no!” Autowiring can save you time in small\n  applications, but in many cases, it leads to bad  practices and is\n  inflexible in large applications.  Using byName seems like a good\n  idea, but it  may lead you to give your classes artificial property\n  names so that you can take advantage of the autowiring functionality. \n  The whole idea behind Spring is that you can create your classes how\n  you like and have Spring work for you, not the other way around ...</p>\n  \n  <p>... For any nontrivial application, steer clear of autowiring at all\n  costs.</p>\n</blockquote>\n\n<p>I have always been using the @Autowired tag in applications I have created. Can someone explain what is wrong with it and what I should use instead?</p>\n\n<p>A mini example on how I handle most things now is:</p>\n\n<pre><code>@Service(\"snippetService\")\npublic class SnippetService {\n\n    @Autowired\n    private TestService testService;\n\n    public Snippet getSnippet() {\n        return testService.getSnippet();\n    }\n}    \n</code></pre>\n\n<p>Is using autowiring like this \"wrong\" or am I missing something?</p>\n"},{"tags":["spring","spring-security"],"answer_count":2,"favorite_count":8,"up_vote_count":14,"down_vote_count":0,"view_count":28185,"score":14,"question_id":1629211,"title":"How do I get the Session Object in Spring?","body":"<p>I am relatively new to <a href=\"http://en.wikipedia.org/wiki/Spring%5FFramework\" rel=\"nofollow\">Spring</a> and Spring security.</p>\n\n<p>I was attempting to write a program where I needed to authenticate a user at the server end using Spring security,</p>\n\n<p>I came up with the following:</p>\n\n<pre><code>public class CustomAuthenticationProvider extends AbstractUserDetailsAuthenticationProvider{\n    @Override\n    protected void additionalAuthenticationChecks(UserDetails userDetails, UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken)\n                    throws AuthenticationException\n    {\n        System.out.println(\"Method invoked : additionalAuthenticationChecks isAuthenticated ? :\"+usernamePasswordAuthenticationToken.isAuthenticated());\n    }\n\n    @Override\n    protected UserDetails retrieveUser(String username,UsernamePasswordAuthenticationToken authentication) throws AuthenticationException \n    {\n        System.out.println(\"Method invoked : retrieveUser\");\n        //so far so good, i can authenticate user here, and throw exception if not authenticated!!\n        //THIS IS WHERE I WANT TO ACCESS SESSION OBJECT\n    }\n}\n</code></pre>\n\n<p>My usecase is that when a user is authenticated, I need to place an attribute like:</p>\n\n<pre><code>session.setAttribute(\"userObject\", myUserObject);\n</code></pre>\n\n<p>myUserObject is an object of some class that I can access throughout my server code across multiple user requests.</p>\n"},{"tags":["spring"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":12941457,"title":"Reading all spring beans from a particular context file","body":"<p>I have a spring context file with several beans of type  defined.\nIf the input to my program is \"help\" then I would like to display the bean names from the context file, so that the user can pick a particular bean and give it as input. The program would instantiate the bean with that name and perform some logic.\nI am not able to query the list of bean names from a particular context file.\nI don't want to use a properties file to store the bean names as I am already using spring context files. Is there a better way to do this ?</p>\n"},{"tags":["java","spring","config"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12941095,"title":"Using FactoryBean and DisposableBean with Spring's Java Config","body":"<p>The <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolExecutorFactoryBean.html\" rel=\"nofollow\">ThreadPoolExecutorFactoryBean</a> is a <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/FactoryBean.html\" rel=\"nofollow\">FactoryBean</a> implementing <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/DisposableBean.html\" rel=\"nofollow\">DisposableBean</a>. When being used in Spring's XML bean definition like this</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"executorService\" \n      class=\"org.springframework.scheduling.concurrent.ThreadPoolExecutorFactoryBean\"/&gt;\n</code></pre>\n\n<p>the created bean will be an instance of <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"nofollow\">ExecutorService</a> and ensures <code>ThreadPoolExecutorFactoryBean#destroy()</code> is called, once the Spring Application Context is shut down.</p>\n\n<p>Is it possible to configure such a bean with a Spring 3's <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/annotation/Configuration.html\" rel=\"nofollow\">@Configuration</a> class?</p>\n"},{"tags":["java","spring","mvc","mvvm","architecture"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":171,"score":4,"question_id":12883759,"title":"Maintaining Clean Architecture in Spring MVC with a data-centric approach","body":"<h1>Maintaining Clean Architecture in Spring MVC with a data-centric approach</h1>\n\n<p>I'm trying to map out the architecture for the front-end of a new Java-based web app (portal type application) we are making at work. I want to get this right from day one, and I would like to kick off a discussion here to help me implement Uncle Bob's <a href=\"http://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html\" rel=\"nofollow\">Clean Architecture</a> in my architectural design.</p>\n\n<p>Here's a quick run-down of our tech stack, top to bottom (the technology isn't importance, the structure is):</p>\n\n<ul>\n<li>Oracle Database</li>\n<li>Oracle Service Bus exposing services using WSDLs</li>\n<li>JAX-WS generated Java-classes from the WSDLs (let's call this the \"generated service layer\")</li>\n<li>A Domain module consisting of POJOs mapped to the generated data objects</li>\n<li>A Consumer-module exposing the \"generated service layer\" to the front-end application</li>\n<li>A Spring MVC based front-end module using FreeMarker to render the views</li>\n</ul>\n\n<p>A key point:</p>\n\n<blockquote>\n  <p>In particular, the name of something declared in an outer circle must not be mentioned by the code in the an inner circle. That includes, functions, classes. variables, or any other named software entity.</p>\n</blockquote>\n\n<p>Attempting to adhere to Bob's Clean Architecture, I've gone back and forth a bit with myself regarding where to place the <em>application logic</em>, namely the \"Use Case\"-layer in his architecture.</p>\n\n<p>Here is the approach I've come up with:</p>\n\n<h2>Layer 1 - Entities</h2>\n\n<blockquote>\n  <p>Entities encapsulate Enterprise wide business rules. </p>\n</blockquote>\n\n<p>This is where our Domain module containing the <em>domain-objects</em> lives, these are self-containing objects with minimal dependencies on each other. Only logic pertaining to the objects themselves may live on these domain objects, and no use-case specific logic.</p>\n\n<p>Access to our database is exposed via WSDLs using a service bus that transforms the data, as opposed to an ORM like JPA or Hibernate. Because of this, we do not have \"entities\" in the traditional sense (with Ids), but a <em>data-centric approach</em> making this layer a data access layer, presented to the rest of the application by the Consumer-module.</p>\n\n<h2>Layer 2 - Use Cases</h2>\n\n<blockquote>\n  <p>The software in this layer contains application specific business rules.</p>\n</blockquote>\n\n<p>This is where logic specific to our application's use cases lives. Changes to this layer should not affect the data access layer (layer 1). Changes to the GUI or framework implementation (Spring MVC) should not affect this layer.</p>\n\n<p><strong>This is where it gets a little tricky:</strong>\nSince our data access layer (in layer 1) must be kept clean of application logic, we need a layer that facilitates use of that layer in a fashion that suits the use cases. One solution I've found to this problem is the use a variant of the \"<em>MVVM-pattern</em>\" that I choose to call <em>MVC-VM</em>. See below for an explanation. The \"VM\"-part of this lives in this Use Case-layer, represented by <code>*ViewModel</code>-classes that encapsulate this Use Case-specific logic.</p>\n\n<h2>Layer 3 - Interface Adapters</h2>\n\n<blockquote>\n  <p>The software in this layer is a set of adapters that convert data from the format most convenient for the use cases and entities, to the format most convenient for some external agency such as the Database or the Web.</p>\n</blockquote>\n\n<p>This is where the MVC-architecture of our GUI lives (the \"MVC\" in our \"MVC-VM\"). Essentially this is when the <code>Controller</code>-classes get data from the <code>*ViewModel</code>-classes and puts it in Spring MVC's <code>ModelMap</code> ojects that are used directly by the FreeMarker-templates in the View.</p>\n\n<p>The way I see it, the servicebus would in our case also fall in under this layer.</p>\n\n<h2>Layer 4 - Frameworks and Drivers</h2>\n\n<blockquote>\n  <p>Generally you don’t write much code in this layer other than glue code that communicates to the next circle inwards.</p>\n</blockquote>\n\n<p>This layer is really just a configuration-layer in our application, namely the Spring configuration. This would for example be where we specify that FreeMarker is used to render the view.</p>\n\n<hr>\n\n<h3>Model View ViewModel Pattern</h3>\n\n<blockquote>\n  <p>MVVM facilitates a clear separation of the development of the graphical user interface (either as markup language or GUI code) from the development of the business logic or back end logic known as the model (also known as the data model to distinguish it from the view model). The view model of MVVM is a value converter meaning that the view model is responsible for exposing the data objects from the model in such a way that those objects are easily managed and consumed.</p>\n</blockquote>\n\n<p>More on the MVVM-pattern at <a href=\"http://en.wikipedia.org/wiki/Model_View_ViewModel\" rel=\"nofollow\">Wikipedia</a>.</p>\n\n<p>The MVC-VM roles would be fulfilled in our application like so:</p>\n\n<ul>\n<li><strong>Model</strong> - represented simply by the <code>ModelMap</code> datastructure in Spring MVC that is used by the view templates.</li>\n<li><strong>View</strong>  - FreeMarker templates</li>\n<li><p><strong>Controller</strong> Spring's <code>Controller</code>-classes that directs <em>HTTP URL requests</em> to specific <em>handlers</em> (and as such functions as a FrontController). The handlers in these classes are responsible for fetching data from the use case-layer and pushing it out to the view templates when showing data(HTTP <code>GET</code>), as well as sending data down for storing (HTTP <code>POST</code>). This way it essentially functions as a <em>binder</em> between the ViewModel and View, using the Model.</p></li>\n<li><p><strong>ViewModel</strong> - These classes are responsible for 1) structuring data from the data access layer in a fashion that is usable by the View and 2) treat data-input from the View. \"Treat\" means to validate and to break down the data so that it can be sent down the stack for storing. This layer would take form as <code>&lt;UseCase&gt;VM</code>-classes in a <code>viewmodel</code> package in our Spring MVC front-end module.</p></li>\n</ul>\n\n<p>A key component here is the implicit binding that happens in Spring MVC between <code>ModelMap</code> and the FreeMarker-templates. The templates only use the model (<code>ModelMap</code>s), where the controller has put the data in a format it can use. That way we can make templates like so:</p>\n\n<pre><code>&lt;body&gt;\n  &lt;h1&gt;Welcome ${user}!&lt;/h1&gt;\n  &lt;p&gt;Our latest product:\n  &lt;a href=\"${latestProduct.url}\"&gt;${latestProduct.name}&lt;/a&gt;!\n&lt;/body&gt;\n</code></pre>\n\n<hr>\n\n<p>I apologize for the verbose explanation, but I could not explain this (relatively simple) architecture in fewer words. </p>\n\n<p>I would greatly appreciate some input on my approach here - am I on the right track? Does the MVC-VM thing make sense? Am I violating any Clean Architecture Principles?</p>\n\n<p>There are of course many solutions to this, but I am trying to find a solution that is 1) not over-engineered and 2) adheres to the principles of Bob's Clean Architecture.</p>\n\n<hr>\n\n<h2>Update:</h2>\n\n<p>I think the key issue that puts me off here is what form the \"Use case\" layer takes in this application. Remember we have an MVC front-end that gets data from a data access layer. If the MVC part fits in Bob's \"Interfaces adapters\", and the domain models of the data layer fit in Bob's \"Entities\" layer, then what do I call the use case classes that implement application logic? I am tempted to just call them <code>&lt;UseCase&gt;Model</code>s and put them in the MVC project, but according to Bob</p>\n\n<blockquote>\n  <p>The models are likely just data structures that are passed from the controllers to the use cases, and then back from the use cases to the presenters and views.</p>\n</blockquote>\n\n<p>so that means my model objects should be \"dumb\" (like a simple <code>Map</code>. <code>ModelMap</code> in Spring) and it is then the responsibility of the controller to put data from the Use Case class into this Map-structure. </p>\n\n<p>So again, what form does my Use Case-classes take? How about <code>&lt;UseCase&gt;Interactor</code>?</p>\n\n<p><strong>But in conclusion</strong> I realize that the MVC-MV-thing is over-engineering (or simply incorrect) - as \"mikalai\" indicates below this essentially just a two-layer applcation in its current form; a data access layer and a front-end MVC layer. Simple as that.</p>\n"},{"tags":["spring","spring-mvc","apache-tiles"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12939619,"title":"spring mvc and ReloadableResourceBundleMessageSource","body":"<p>I am trying to build a spring MVC application (basically for self trainning reasons). This application has spring MVC, tiles, spring thems and jsp (sorry for numbering all but since i am not sure what i do wrong, i just wish to number all i think may help you help me).</p>\n\n<p>my spring mvc configuration seems to work, untill i try to get message property from property files through org.springframework.context.support.ReloadableResourceBundleMessageSource.\nso here is my configuration</p>\n\n<pre><code>&lt;bean id=\"messageSource\" class=\"org.springframework.context.support.ReloadableResourceBundleMessageSource\" p:cacheSeconds=\"3000\"&gt;\n    &lt;property name=\"basenames\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;messages&lt;/value&gt;\n            &lt;value&gt;dev&lt;/value&gt;\n            &lt;value&gt;theme&lt;/value&gt;\n        &lt;/list&gt;         \n    &lt;/property&gt;\n&lt;/bean&gt;  \n\n\n&lt;bean id=\"tilesConfigurer\" class=\"org.springframework.web.servlet.view.tiles2.TilesConfigurer\" p:definitions=\"/WEB-INF/tiles-defs/tiles-defs.xml\" /&gt;\n&lt;bean id=\"tilesViewResolver\" class=\"org.springframework.web.servlet.view.ResourceBundleViewResolver\" p:basename=\"views\" /&gt;\n\n\n&lt;!-- Declare the Interceptor --&gt;\n&lt;bean id=\"localeChangeInterceptor\" class=\"org.springframework.web.servlet.i18n.LocaleChangeInterceptor\" p:paramName=\"language\"/&gt;\n&lt;bean id=\"themeChangeInterceptor\" class=\"org.springframework.web.servlet.theme.ThemeChangeInterceptor\" p:paramName=\"theme\"/&gt;\n\n&lt;!-- Declare the Resolver --&gt;\n&lt;bean id=\"localeResolver\" class=\"org.springframework.web.servlet.i18n.SessionLocaleResolver\"/&gt;\n&lt;bean id=\"themeResolver\" class=\"org.springframework.web.servlet.theme.SessionThemeResolver\"/&gt;\n\n&lt;!-- Spring themes --&gt;\n&lt;bean class=\"org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping\"&gt;\n    &lt;property name=\"interceptors\"&gt;\n        &lt;list&gt;\n            &lt;ref local=\"themeChangeInterceptor\" /&gt;\n            &lt;ref bean=\"localeChangeInterceptor\" /&gt;                          \n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>tiles and theme seem to work, so in my tiles baselayout i have:</p>\n\n<pre><code>&lt;title&gt;&lt;tiles:insertAttribute name=\"title\" ignore=\"true\" /&gt;&lt;/title&gt;\n    &lt;c:set var=\"css\"&gt;&lt;spring:theme code=\"css\"/&gt;&lt;/c:set&gt;\n    &lt;c:if test=\"${not empty css}\"&gt;\n        &lt;link rel=\"stylesheet\" href=\"&lt;c:url value='${css}'/&gt;\" type=\"text/css\"/&gt;\n    &lt;/c:if&gt;\n</code></pre>\n\n<p>this works! html is rendered with the correct css that i have in css property located inside theme.properties file loaded from ReloadableResourceBundleMessageSource and magically existing inside tiles!</p>\n\n<p>So, getting courage i go to my jsp and insert\nattempt 1:</p>\n\n<pre><code> &lt;p&gt;&lt;spring:message code=\"context\"/&gt;&lt;/p&gt;\n</code></pre>\n\n<p>attempt 2: </p>\n\n<pre><code>&lt;p&gt;&lt;fmt:message key=\"context\"/&gt;&lt;/p&gt;\n</code></pre>\n\n<p>tags used:</p>\n\n<pre><code>&lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %&gt;\n</code></pre>\n\n\n\n\n<p>(is there a difference? both work? seen both over web... so i tried once the first and then the second one)</p>\n\n<p>and in the messages.properties/messages_el_gr.properties files i type context=default and context=greek.</p>\n\n<p>This gives me exception in the first case and in the second just the string context prefixed and postfixed with ???.\nException i get is:</p>\n\n<blockquote>\n  <p>SEVERE: Servlet.service() for servlet [dispatcher] in context with path [/homeAutomation] threw exception [Request processing failed; nested exception is org.apache.tiles.impl.CannotRenderException: ServletException including path '/WEB-INF/tiles/baseLayout.jsp'.] with root cause\n  javax.servlet.jsp.JspTagException: No message found under code 'context' for locale 'el_GR'.\n      at org.springframework.web.servlet.tags.MessageTag.doStartTagInternal(MessageTag.java:184)\n      at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)\n      at org.apache.jsp.WEB_002dINF.jsp.friends_jsp._jspx_meth_spring_005fmessage_005f0(friends_jsp.java:104)\n      at org.apache.jsp.WEB_002dINF.jsp.friends_jsp._jspService(friends_jsp.java:75)\n      at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n      at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n      at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)\n      at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\n      at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)\n      at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)\n      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n      at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)\n      at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)\n      at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)\n      at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:927)\n      at org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)\n      at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)\n      at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:103)\n      at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96)\n      at org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)\n      at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)\n      at org.apache.tiles.renderer.impl.ChainedDelegateAttributeRenderer.write(ChainedDelegateAttributeRenderer.java:76)\n      at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)\n      at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)\n      at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:336)\n      at org.apache.tiles.template.InsertAttributeModel.renderAttribute(InsertAttributeModel.java:210)\n      at org.apache.tiles.template.InsertAttributeModel.end(InsertAttributeModel.java:126)\n      at org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)\n      at org.apache.jsp.WEB_002dINF.tiles.baseLayout_jsp._jspx_meth_tiles_005finsertAttribute_005f3(baseLayout_jsp.java:307)\n      at org.apache.jsp.WEB_002dINF.tiles.baseLayout_jsp._jspService(baseLayout_jsp.java:108)\n      at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n      at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n      at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)\n      at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\n      at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)\n      at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)\n      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n      at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)\n      at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)\n      at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)\n      at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)\n      at org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241)\n      at org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:222)\n      at org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)\n      at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)\n      at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)\n      at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)\n      at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)\n      at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)\n      at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)\n      at ......</p>\n</blockquote>\n\n<p>I consider that i do not have the messageSource inside my context, so i considered as next step of searching what is going on to do the following (found on web)</p>\n\n<pre><code>@Autowired\nReloadableResourceBundleMessageSource messageSource;\n@RequestMapping(\"/friends.htm\")\npublic ModelAndView getPage()\n{   \n    ModelAndView modelAndView=new ModelAndView(\"friends\");\n    modelAndView.addObject(messageSource);\n    return modelAndView;\n}\n</code></pre>\n\n<p>by the way, my previeus controller had that method as follows:</p>\n\n<pre><code>@RequestMapping(\"/friends.htm\")\npublic String getPage()\n{   \n    return friends;\n}\n</code></pre>\n\n<p>This again throws same exception.. messageSource is not null.. it is autowired.\nif i do inside the controller:messageSource.getMessage(\"context\", null, Locale.ENGLISH), this throws the same exception when trying to get it.. (Greek locale does not exist?? with english it will go to default locale properties file which is messages.properties, correct?)</p>\n\n<p>Ah, what else can i give you... yes property files are located in the src/main/resources directory and in war inside homeAutomation.war\\WEB-INF\\classes\\ and homeAutomation.war   (why?? i thought these would exist only in homeautomation.war directory... but skip this, atleast they are there...) my poms war plugin configuration is as follows:</p>\n\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.1.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;webResources&gt;\n                    &lt;resource&gt;\n                        &lt;directory&gt;src/main/resources&lt;/directory&gt;\n                    &lt;/resource&gt;\n                &lt;/webResources&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>in target directory again i see the property files in both target\\classes directory and target\\homeAutomation.</p>\n\n<p>After all these, i still do not know what i do wrong and i cannot get localized properties inside my jsp working. I hope i gave al the necessary info (sorry for the too much info..., did not know which was relevant and which not). If you need more info please ask. Have been searching for this five days now and still have no clue.</p>\n"},{"tags":["java","spring","servlets","spring-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":578,"score":0,"question_id":10034993,"title":"Spring store object in session","body":"<p>I would like to implement a shopping cart with Spring, so I need to save an object <code>Cart</code> ( which has attributes like products, paymentType and deliveryType ) in session. I've tried to create it with bean and attribute \"scope\" set to \"session\", but it just doesn't work, should I use some additional annotations in my controller or <code>Cart</code> class? Any example usage would be really helpful :-) Thanks in advance.</p>\n"},{"tags":["java","multithreading","spring","hibernate","repository"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12936928,"title":"Problems with threads and hibernate sessions","body":"<p>Im using hibernate 3 and spring.\nWhen I start a thread an exception occurred:</p>\n\n<pre><code>org.hibernate.HibernateException: Illegal attempt to associate a collection with two open sessions\n</code></pre>\n\n<p>I dont know how to detach entities or close session with this architecture.\nI appreciate some help.</p>\n\n<p><code>CommunicationService.sendCommunications()</code> code:</p>\n\n<pre><code>public void sendCommunications(HibernateMessageToSendRepository messageToSendRepository)  {\n    Long messageId = new Long(41); //this is only for test. the idea is get a list of id and generate a thread group.\n    MessageSender sender = SmsSender(messageId, messageToSendRepository);\n    sender.start();\n}\n</code></pre>\n\n<p>Invoking <code>sendCommunications</code> code:</p>\n\n<pre><code>ApplicationContext appCont = new ClassPathXmlApplicationContext(\"appContext.xml\");      \nServiceLocator serviceLocator = ServiceLocator.getInstance();\nHibernateMessageToSendRepository messageToSendRepository = (HibernateMessageToSendRepository) appCont.getBean(\"messageToSendRepository\");\n\nCommunicationService communication = serviceLocator.getCommunicationService();\ncommunication.sendCommunications(messageToSendRepository);\n</code></pre>\n\n<p>SmsSender (extends from MessageSender (thread)) code:</p>\n\n<pre><code>public class SmsSender extends MessageSender {\n\n    public SmsSender(Long messageToSendId, HibernateMessageToSendRepository messageToSendRepository) {\n        super(messageToSendRepository);\n        MessageToSend messageToSendNew = this.messageToSendRepository.getById(messageToSendId);     \n        this.messageToSend = messageToSendNew;\n    }\n\n    public void run() {\n        try {\n            MessageToSendSms messageToSendSms = (MessageToSendSms) this.messageToSend;\n            Iterator&lt;CustomerByMessage&gt; itCbmsgs = messageToSendSms.getCustomerByMessage().iterator();          \n            while (itCbmsgs.hasNext()) {                \n                CustomerByMessage cbm = (CustomerByMessage) itCbmsgs.next();                        \n\n                //sms sending\n                this.getGateway().sendSMS(cbm.getBody(), cbm.getCellphone());                       \n                cbm.setStatus(CustomerByMessageStatus.SENT_OK);\n                cbm.setSendingDate(Calendar.getInstance().getTime());               \n            }           \n\n            messageToSendSms.getMessage().setStatus(messageToSendStatus.ALL_MESSAGES_SENT);\n            this.messageToSendRepository.update(messageToSendSms);      \n        } catch (Exception e) {         \n            this.log.error(\"Error en sms sender \" + e.getMessage());\n        }\n\n    }\n}\n</code></pre>\n\n<p><code>MessageToSendRepository</code> code:</p>\n\n<pre><code>public void update(MessageToSend messageToSend) {\n    try {\n        this.getSession().update(messageToSend);\n    } catch (HibernateException e) {\n        this.log.error(e.getMessage(), e);\n        throw e;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","google-app-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12938008,"title":"Google App Engine GAE MemcacheService Singleton injection with Spring","body":"<p>Using com.google.appengine.api.memcache.MemcacheService for caching in App Engine, I'm creating the memcacheservice instance using a factory, and injecting it into my classes with spring as a singleton. </p>\n\n<p>I'm asking if this is correct and optimal and if anyone has input on the positive or negative effect of using the lazy-init option or synchronized(). I'd like to have the answer to this question result in the best possible way to use memcacheservice in this manner. </p>\n\n<p>Thanks! </p>\n\n<p>Factory:</p>\n\n<pre><code>public class CacheFactory {\n\n    private static MemcacheService INSTANCE;\n\n    private CacheFactory() {\n    }\n\n    public static MemcacheService getInstance() {\n        if (INSTANCE == null) {\n            synchronized(CacheFactory.class){\n            INSTANCE =  MemcacheServiceFactory.getMemcacheService();\n            }\n        }\n        return INSTANCE;\n\n    }\n\n\n\n}\n</code></pre>\n\n<p>Spring Bean:</p>\n\n<pre><code> &lt;bean id=\"cacheFactory\" class=\"com.nimbits.server.transactions.memcache.CacheFactory\"\n          factory-method=\"getInstance\" lazy-init=\"false\" scope=\"singleton\" &gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>sample usage:</p>\n\n<pre><code>   &lt;bean id=\"someService\" class=\"SomeServiceImpl\"&gt;\n        &lt;property name=\"cacheFactory\" ref=\"cacheFactory\" /&gt;\n   &lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","asp.net","spring","mono"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12932233,"title":"asp.net mvc vs java spring on linux","body":"<p>I am doing a POC for a project that required hosting on linux server, and using iphone, ipad etc to interact with the server.</p>\n\n<p>I have strong background in asp.net mvc, however have little knowledge in java and no experience in java spring. </p>\n\n<p>for the requirement, i have to use HTML5 with toggling to multiple views at the controller to support multiple platform, or i could be using phoneGap to render the view.</p>\n\n<p>If I opt to use asp.net MVC , i have to use Mono to develop (which the latest release of 2.10 supports asp.net MVC 3) , and apache to host the application.</p>\n\n<p>If i opt to use java spring, all the support for the application seems native without much \"hacking\".</p>\n\n<p>The question is that is it worth to use java , which will have some learning curve for me and my team, with benefits (performance or the support) or i should go with the asp.net mvc with Mono in which we need to learn only the Mono in order to develop it for linux server?</p>\n"},{"tags":["spring","jsf","jsf-2","spring-security","springsource"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12931825,"title":"how to enable java server faces property in project facets","body":"<p>Please help me to resolve this spring tool suite error. The error occurred when I am trying to enable java server faces property in project facets. \n<img src=\"http://i.stack.imgur.com/0Or13.jpg\" alt=\"enter image description here\"></p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","hibernate","entitymanager"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12937394,"title":"EntityManager cannot use persist to save element to database(solved)","body":"<p>I met the problem of persisting element to database using EntityManager. Based on the  answers I found, I tried those 4 ways in my DaoJpa to do such thing but still failed. Here I attached the four ways I tried:</p>\n\n<p>Code in Controller part:</p>\n\n<pre><code>   @Transactional \n   SmartProduct smartProduct = new SmartProduct();\n            smartProduct.setName(\"Dove Soap\");\n            smartProductDao.persist(smartProduct);\n</code></pre>\n\n<p>1.\n    DaoJpa:</p>\n\n<pre><code> @Transactional\n public void persist(SmartProduct smartProduct) {\n            entityManager.persist(smartProduct);\n</code></pre>\n\n<p>Doesn't work!</p>\n\n<p>2.</p>\n\n<pre><code>@Transactional\npublic void persist(SmartProduct smartProduct) {\nentityManager.persist(smartProduct);\nentityManager.flush();\n</code></pre>\n\n<blockquote>\n  <p>Exception I got: no transaction is in progress</p>\n</blockquote>\n\n<p>3.</p>\n\n<pre><code>@Transactional\npublic void persist(SmartProduct smartProduct) {\nEntityTransaction emTransaction = entityManager.getTransaction();\n        emTransaction.begin();  \n        entityManager.persist(smartProduct);\n        emTransaction.commit();\n        entityManager.close();\n</code></pre>\n\n<blockquote>\n  <p>Exception I got:\n      Not allowed to create transaction on shared EntityManager - use Spring \n      transactions or EJB CMT instead</p>\n</blockquote>\n\n<p>4.</p>\n\n<pre><code>@Transactional\npublic void persist(SmartProduct smartProduct) {\n                    EntityManagerFactory emf = Persistence.createEntityManagerFactory(\"persistenceUnit\");\n                EntityManager em = emf.createEntityManager();\n                EntityTransaction etx = em.getTransaction();\n                etx.begin();\n                em.persist(smartProduct);\n                etx.commit();\n                em.close();\n                emf.close();\n</code></pre>\n\n<blockquote>\n  <p>Exception I got:\n      The application must supply JDBC connections</p>\n</blockquote>\n\n<p>Could someone help me  figure out the problem please? Many thanks in advance! </p>\n\n<p>Many thanks JustinKSU's help. I add the annotation in Spring context and then it solved!\nHere is the previous version of my Spring context:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.orm.jpa.JpaTransactionManager\" id=\"transactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven mode=\"aspectj\" transaction-manager=\"transactionManager\" /&gt;\n\n    &lt;bean class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\" id=\"entityManagerFactory\"&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"persistenceUnit\" /&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>After added the </p>\n\n<pre><code>&lt;tx:annotation-driven /&gt;\n</code></pre>\n\n<p>it works:</p>\n\n<pre><code>&lt;tx:annotation-driven /&gt;\n    &lt;bean class=\"org.springframework.orm.jpa.JpaTransactionManager\" id=\"transactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven mode=\"aspectj\" transaction-manager=\"transactionManager\" /&gt;\n\n    &lt;bean class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\" id=\"entityManagerFactory\"&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"persistenceUnit\" /&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring","struct"],"answer_count":0,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12938210,"title":"How to forward/redirect action from Struts Controller to Spring Controller","body":"<p>I have 2 web application, one is in Struts and other in Spring running in Same server.</p>\n\n<p>I wanna logout from Struts at the same time logout from Spring web app.</p>\n\n<p>How can I forward/redirect from StructLogOut Action to SpringLogOut Action:</p>\n\n<p>Will this work?? </p>\n\n<pre><code>response.sendRedirect(\"/com/SpringAction\"); \n</code></pre>\n"},{"tags":["spring","hibernate","tomcat","spring-security"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12937977,"title":"using spring 3 latest source in apache tomcat 6.0.14","body":"<p>Is latest spring 3 framework compatible with apache tomcat application server - version 6.0.14?</p>\n\n<p>Also can what is the best version of hibernate i can use along with latest version of spring. </p>\n\n<p>Is it fine to use configuration xml file in the spring 3 application setup instead of @configuration annotation in the code ?</p>\n\n<p>Please share your thoughts.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","oracle","spring","stored-procedures"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12937843,"title":"Issue while calling Oracle Sproc in Java (Using Spring 3.0)","body":"<p>In Java development using Spring 3.0,\nI am having problem while executing the Sproc written for Oracle.</p>\n\n<h2>Here is the Sproc code:</h2>\n\n<pre><code>create or replace PROCEDURE            \nADD_PRODUCT\n( product_id IN VARCHAR2\n, description IN VARCHAR2\n, weight IN FLOAT\n, specification IN VARCHAR2\n, category IN VARCHAR2\n, manufacturer IN VARCHAR2\n, syncount IN NUMBER\n, nonAccentedURL IN VARCHAR2\n, nonAccentedManufacturer IN VARCHAR2\n) AS\n    recCount number;\nBEGIN\n      recCount := 0;\n\n      SELECT    COUNT(*) \n      INTO  recCount\n      FROM  ERP_MANUFACTURER\n      WHERE NAME = manufacturer;  \n\n\n\n  IF recCount &lt; 1 THEN\n    INSERT INTO ERP_MANUFACTURER (NAME, URL) VALUES (manufacturer,     nonAccentedManufacturer);\n  END IF;\n\n  INSERT INTO ERP_PRODUCT (ID, DESCRIPTION, WEIGHT, SPECIFICATION, CATEGORY, MANUFACTURER, SYNCCOUNT, URL) \n  VALUES     (product_id,description,weight,specification,category,manufacturer,syncount,nonAccentedURL);        \n</code></pre>\n\n<h2>END ADD_PRODUCT;</h2>\n\n<h2>Here is the Code (in DAO):</h2>\n\n<pre><code>public int ADD_Product(String codigo_produto, String descricao, float peso, String espeficiacao, String categoria, String fabricante, int sysCount, int SENT_STATUS) throws Exception {\n\n    SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplate).withFunctionName(\"ADD_PRODUCT\");\n\n    MapSqlParameterSource paramMap = new MapSqlParameterSource();\n\n    paramMap.addValue(\"product_id\", codigo_produto, Types.VARCHAR);\n    paramMap.addValue(\"description\", descricao, Types.VARCHAR);\n    paramMap.addValue(\"weight\", peso, Types.FLOAT);\n    paramMap.addValue(\"specification\",espeficiacao, Types.VARCHAR);\n    paramMap.addValue(\"category\", categoria, Types.VARCHAR);\n    paramMap.addValue(\"manufacturer\", fabricante, Types.VARCHAR);\n    paramMap.addValue(\"syncount\", sysCount, Types.NUMERIC);\n    paramMap.addValue(\"nonAccentedURL\", URLEncoder.encode(deAccent(espeficiacao).toLowerCase(), \"UTF-8\"), Types.VARCHAR);\n    paramMap.addValue(\"nonAccentedManufacturer\", URLEncoder.encode(deAccent(fabricante).toLowerCase(), \"UTF-8\"), Types.VARCHAR);\n\n    Map&lt;String, Object&gt; i = caller.execute(paramMap);\n\n    return i.size();\n}\n</code></pre>\n\n<hr>\n\n<p>When this Method is Executed,\nFollowing is the Log of Error:</p>\n\n<hr>\n\n<pre><code>org.springframework.jdbc.BadSqlGrammarException: CallableStatementCallback; bad SQL grammar [{? = call ADD_LOG(?, ?, ?, ?)}]; nested exception is java.sql.SQLException: ORA-06550: line 1, column 13:\n</code></pre>\n\n<p>PLS-00306: wrong number or types of arguments in call to 'ADD_LOG'\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored</p>\n\n<pre><code>at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:98)\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:969)\nat org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1003)\nat org.springframework.jdbc.core.simple.AbstractJdbcCall.executeCallInternal(AbstractJdbcCall.java:391)\nat org.springframework.jdbc.core.simple.AbstractJdbcCall.doExecute(AbstractJdbcCall.java:354)\nat org.springframework.jdbc.core.simple.SimpleJdbcCall.execute(SimpleJdbcCall.java:181)\nat br.edeploy.voive.dao.ProductDAO.ADD_Log(ProductDAO.java:139)\nat br.edeploy.voice.service.ProdutosIn.doGet(ProdutosIn.java:277)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat br.com.caelum.vraptor.resource.DefaultResourceNotFoundHandler.couldntFind(DefaultResourceNotFoundHandler.java:41)\nat br.com.caelum.vraptor.interceptor.ResourceLookupInterceptor.intercept(ResourceLookupInterceptor.java:71)\nat br.com.caelum.vraptor.core.ToInstantiateInterceptorHandler.execute(ToInstantiateInterceptorHandler.java:54)\nat br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54)\nat br.com.caelum.vraptor.core.EnhancedRequestExecution.execute(EnhancedRequestExecution.java:23)\nat br.com.caelum.vraptor.VRaptor$1.insideRequest(VRaptor.java:92)\nat br.com.caelum.vraptor.ioc.spring.SpringProvider.provideForRequest(SpringProvider.java:56)\nat br.com.caelum.vraptor.VRaptor.doFilter(VRaptor.java:89)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\nat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)\nat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\nat java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>Caused by: java.sql.SQLException: ORA-06550: line 1, column 13:\nPLS-00306: wrong number or types of arguments in call to 'ADD_LOG'\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored</p>\n\n<pre><code>at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)\nat oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:112)\nat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:173)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)\nat oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1030)\nat oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:191)\nat oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:944)\nat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1222)\nat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3381)\nat oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3482)\nat oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:3856)\nat oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1373)\nat org.springframework.jdbc.core.JdbcTemplate$5.doInCallableStatement(JdbcTemplate.java:1005)\nat org.springframework.jdbc.core.JdbcTemplate$5.doInCallableStatement(JdbcTemplate.java:1)\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:953)\n... 34 more\n</code></pre>\n\n<hr>\n\n<p>Can anyone help me in debugging this.</p>\n\n<p>Thanks.</p>\n"},{"tags":["spring","transactions","crud","spring-transactions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12936755,"title":"Spring not use transaction for select","body":"<p>We are using Spring 3 AOP to assign a transactions into CRUD operations.</p>\n\n<pre><code>  &lt;tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\"&gt;\n    &lt;tx:attributes&gt;\n        &lt;tx:method name=\"*\" propagation=\"REQUIRED\" isolation=\"READ_COMMITTED\" rollback-for=\"java.lang.Throwable\" /&gt;\n    &lt;/tx:attributes&gt;\n&lt;/tx:advice&gt;\n\n&lt;aop:config&gt;\n    &lt;aop:pointcut id=\"txService\" expression=\"execution(* com.co.service..I*Service.*(..))\" /&gt;\n    &lt;aop:advisor pointcut-ref=\"txService\" advice-ref=\"txAdvice\" /&gt;\n&lt;/aop:config&gt;\n</code></pre>\n\n<p>And everything is working well, however we would like to assign a transactions only to CREATE-UPDATE-DELETE (CUD) operations (not to SELECT). \nWe don't need a transaction for the SELECT statement. \nThat is very common situation, but we were unable to google some standard embedded spring approach to do so.\nIs there some cute way to make transactions only for CUD, without using @Transactional (as we have lots of methods and someone can forget to mark method as @Transactional) and without making smth like below:</p>\n\n<pre><code>&lt;aop:config&gt;\n    &lt;aop:pointcut id=\"txService\" expression=\"execution(* com.co.service..I*Service.insert*(..))\" /&gt;\n    &lt;aop:pointcut id=\"txService\" expression=\"execution(* com.co.service..I*Service.update*(..))\" /&gt;\n    &lt;aop:pointcut id=\"txService\" expression=\"execution(* com.co.service..I*Service.delete*(..))\" /&gt;\n    &lt;aop:advisor pointcut-ref=\"txService\" advice-ref=\"txAdvice\" /&gt;\n&lt;/aop:config&gt;\n</code></pre>\n\n<p>?</p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","spring","jpa","spring-roo","jooq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12599110,"title":"Spring roo and jOOQ","body":"<p>jOOQ should be an alternative to standard JPA. Is there any way to use it in Roo as JPA provider? Is it even possible?</p>\n\n<p>The reason for this: We have Oracle database and jOOQ has quick and easy set up for connection to that database. On the other hand, Roo is very usefull tool but lacks on setting up Oracle database connection.</p>\n"},{"tags":["java","arrays","spring","properties"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1166,"score":0,"question_id":6862514,"title":"Automatically wiring multiple arrays from properties file with Spring","body":"<p>I have a class like this:</p>\n\n<pre><code>class MyClass {\n    Map&lt;String, String[]&gt; arrays; \n    public void setArrays(Map&lt;String, String[]&gt; arrays)\n    {\n        this.arrays = arrays;\n    }\n    public String[] getArray(String key)\n    {\n        return arrays.get(key);\n    }\n}    \n</code></pre>\n\n<p>The values are provided from a properties file like this:</p>\n\n<pre><code># my.properties\narrays.arrayOne=a,b,c\narrays.arrayTwo=d,e,f\n</code></pre>\n\n<p>Using spring I can wire the property this way:</p>\n\n<pre><code>&lt;property name=\"arrays\"&gt;\n    &lt;map&gt;\n        &lt;entry key=\"arrayOne\" value=\"${arrays.arrayOne}\"/&gt;\n        &lt;entry key=\"arrayTwo\" value=\"${arrays.arrayTwo}\"/&gt;\n    &lt;/map&gt;\n&lt;/property&gt;\n</code></pre>\n\n<p>Now, this works but I have to manually edit the wiring every time I add a new entry into the properties file. Is there a better way to do this?</p>\n"},{"tags":["spring","struts2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12933389,"title":"How to resolve could not initialize class org.springframework.web.context.ContextLoader?","body":"<p>I want to integrate struts2 with spring. so i am using the follwing code in my web-inf/classes folder.</p>\n\n<p>applicationcontext.xml</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN//EN\" \"http://www.springframework.org/dtd/spring-beans.dtd\"&gt;\n    &lt;beans&gt;\n     &lt;bean id=\"helloWorldClass\" class=\"com.test.spring.HelloWorld\" &gt;\n          &lt;property name=\"message\" value=\"Hello World!\" /&gt;\n     &lt;/bean&gt;\n     &lt;/beans&gt;\n</code></pre>\n\n<p>struts.xml</p>\n\n<pre><code>    &lt;!DOCTYPE struts PUBLIC \n         \"-//Apache Software Foundation//DTD Struts Configuration  2.0//EN\"\n         \"http://struts.apache.org/dtds/struts-2.0.dtd\"&gt;\n    &lt;struts&gt;    \n    &lt;struts-config&gt;\n    &lt;!-- Spring Struts plugin --&gt;\n&lt;plug-in className=\"org.springframework.web.struts.ContextLoaderPlugIn\"&gt;\n    &lt;set-property property=\"contextConfigLocation\"\n        value=\"/WEB-INF/classes/applicationContext.xml\" /&gt;\n&lt;/plug-in&gt;\n    &lt;/struts-config&gt;\n    &lt;constant name=\"struts.devMode\" value=\"false\" /&gt;\n    &lt;constant name=\"struts.objectFactory\" value=\"spring\" /&gt;\n    &lt;package name=\"default\" extends=\"struts-default\"&gt;\n    &lt;action name=\"helloWorld\" class=\"helloWorldClass\"&gt;\n        &lt;result name=\"SUCCESS\"&gt;/success.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;/package&gt;\n    &lt;/struts&gt;\n</code></pre>\n\n<p>I have used these file and one class which is helloWorld with the package as com.test.spring. Only getter/setter method of variable message is included in class.</p>\n\n<p>content in pom.xml file:</p>\n\n<pre><code>            &lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;jboss-snapshots&lt;/id&gt;\n        &lt;url&gt;http://snapshots.jboss.org/maven2&lt;/url&gt;\n        &lt;releases&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/releases&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n    &lt;repository&gt;\n        &lt;id&gt;opensymphony-releases&lt;/id&gt;\n        &lt;name&gt;Opensymphony Releases&lt;/name&gt;\n&lt;url&gt;https://oss.sonatype.org/content/repositories/opensymphony-releases&lt;/url&gt;\n    &lt;/repository&gt;\n    &lt;repository&gt;\n        &lt;id&gt;mvn-adamgent&lt;/id&gt;\n        &lt;url&gt;http://mvn-adamgent.googlecode.com/svn/maven/release&lt;/url&gt;\n        &lt;name&gt;Adam Gent Maven Repository&lt;/name&gt;\n    &lt;/repository&gt;\n\n    &lt;repository&gt;\n        &lt;id&gt;maven2-repository.dev.java.net&lt;/id&gt;\n        &lt;name&gt;Java.net Repository for Maven&lt;/name&gt;\n        &lt;url&gt;http://download.java.net/maven/2/&lt;/url&gt;\n        &lt;layout&gt;default&lt;/layout&gt;\n    &lt;/repository&gt;\n\n     &lt;repository&gt;\n    &lt;id&gt;springsource-milestones&lt;/id&gt;\n    &lt;name&gt;SpringSource Milestones Proxy&lt;/name&gt;\n    &lt;url&gt;https://oss.sonatype.org/content/repositories/springsource-milestones&lt;/url&gt;\n     &lt;/repository&gt;      \n&lt;/repositories&gt; \n     &lt;dependencies&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;junit&lt;/groupId&gt;\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\n           &lt;version&gt;3.8.1&lt;/version&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n       &lt;/dependency&gt;    \n        &lt;dependency&gt;\n      &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n            &lt;version&gt;1.2.1&lt;/version&gt;\n        &lt;/dependency&gt;   \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n      &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n      &lt;version&gt;1.3.2&lt;/version&gt;\n    &lt;/dependency&gt;   \n        &lt;dependency&gt;\n       &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n&lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;   \n    &lt;dependency&gt;\n&lt;groupId&gt;org.freemarker&lt;/groupId&gt;\n&lt;artifactId&gt;freemarker&lt;/artifactId&gt;\n&lt;version&gt;2.3.13&lt;/version&gt;\n   &lt;/dependency&gt;            \n   &lt;dependency&gt;\n&lt;groupId&gt;opensymphony&lt;/groupId&gt;\n&lt;artifactId&gt;ognl&lt;/artifactId&gt;\n&lt;version&gt;2.6.11&lt;/version&gt;\n   &lt;/dependency&gt;            \n    &lt;dependency&gt;\n&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\n&lt;artifactId&gt;struts2-convention-plugin&lt;/artifactId&gt;\n&lt;version&gt;2.1.6&lt;/version&gt;\n   &lt;/dependency&gt;           \n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\n&lt;artifactId&gt;struts2-core&lt;/artifactId&gt;\n&lt;version&gt;2.1.6&lt;/version&gt;\n  &lt;/dependency&gt;            \n&lt;dependency&gt;\n&lt;groupId&gt;com.opensymphony&lt;/groupId&gt;\n&lt;artifactId&gt;xwork&lt;/artifactId&gt;\n&lt;version&gt;2.1.2&lt;/version&gt;\n   &lt;/dependency&gt;            \n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\n&lt;artifactId&gt;struts2-spring-plugin&lt;/artifactId&gt;\n&lt;version&gt;2.1.6&lt;/version&gt;\n &lt;/dependency&gt;            \n&lt;dependency&gt;\n&lt;groupId&gt;org.antlr&lt;/groupId&gt;\n&lt;artifactId&gt;antlr-runtime&lt;/artifactId&gt;\n&lt;version&gt;3.1.3&lt;/version&gt;\n  &lt;/dependency&gt;          \n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework&lt;/groupId&gt;\n&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n&lt;version&gt;3.0.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;                \n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework&lt;/groupId&gt;\n&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n&lt;version&gt;3.0.5.RELEASE&lt;/version&gt;\n &lt;/dependency&gt;            \n&lt;!-- Spring framework --&gt; \n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring&lt;/artifactId&gt;\n    &lt;version&gt;2.5.6&lt;/version&gt;\n&lt;/dependency&gt; \n    &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n    &lt;version&gt;2.5.6&lt;/version&gt;\n&lt;/dependency&gt; \n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-struts&lt;/artifactId&gt;\n    &lt;version&gt;2.0.8&lt;/version&gt;\n&lt;/dependency&gt;\n     &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n         &lt;version&gt;2.5.6&lt;/version&gt;\n       &lt;/dependency&gt;\n      &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;testspring&lt;/finalName&gt;\n       &lt;/build&gt;\n    &lt;/project&gt;\n</code></pre>\n\n<p>By using this file i have downloaded jar files in web-inf/lib folder in target.</p>\n\n<p>When i upload this war file on glassfish server it showing following error message.</p>\n\n<p><strong>Error occurred during deployment: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoClassDefFoundError: Could not initialize class org.springframework.web.context.ContextLoader. Please see server.log for more details.</strong></p>\n\n<p>Can anyone please help me to solve this error and how to integrate struts2 with spring.</p>\n\n<p>Thanks in Advance.</p>\n"},{"tags":["spring","spring-mvc","jackson"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12934045,"title":"Null values as empty strings when using @ResponseBody annotation","body":"<p>Is there a way when using <code>@ResponseBody</code> annotation to have null values mapped to empty strings?</p>\n"},{"tags":["spring","hibernate","jpa-2.0","jboss5.x"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":277,"score":2,"question_id":10642868,"title":"Persistence unit not finding managed entity","body":"<p><code>@PersistenceContext</code> entity manager cannot find an/any entity class which it appeared to have processed during container launch.</p>\n\n<p>During persistence unit setup, it appears that the container finds and registers the entity:</p>\n\n<pre><code>2012-05-17 15:28:21,978 INFO  [org.hibernate.cfg.annotations.Version] (main) Hibernate Annotations 3.4.0.GA\n2012-05-17 15:28:21,997 INFO  [org.hibernate.annotations.common.Version] (main) Hibernate Commons Annotations 3.1.0.GA\n2012-05-17 15:28:22,004 INFO  [org.hibernate.ejb.Version] (main) Hibernate EntityManager 3.4.0.GA\n2012-05-17 15:28:22,039 INFO  [org.hibernate.ejb.Ejb3Configuration] (main) Processing \nPersistenceUnitInfo [\n    name: dashboardPu\n    ...]\n2012-05-17 15:28:22,069 WARN  [org.hibernate.ejb.Ejb3Configuration] (main) Persistence provider caller does not implement the EJB3 spec correctly. PersistenceUnitInfo.getNewTempClassLoader() is null.\n2012-05-17 15:28:22,146 INFO  [org.hibernate.cfg.AnnotationBinder] (main) Binding entity from annotated class: scholastic.dashboard.dto.ReportRequest\n2012-05-17 15:28:22,161 INFO  [org.hibernate.cfg.annotations.QueryBinder] (main) Binding Named query: ReportRequest.getReportsByUser =&gt; from ReportRequest where userId = :userId\n</code></pre>\n\n<p>However, the later attempt to use that entity fails. I've verified that the entitymanager is indeed using dashboardPu (there are 3 persistence units in this ear) by dropping into the debugger and looking through the entitymanager>factory>persistenceUnit.</p>\n\n<pre><code>2012-05-17 15:28:54,730 DEBUG [org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter] (http-127.0.0.1-8080-2) Opening JPA EntityManager in OpenEntityManagerInViewFilter\n2012-05-17 15:28:54,731 DEBUG [org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter] (http-127.0.0.1-8080-1) Using EntityManagerFactory 'dashboardEntityManagerFactory' for OpenEntityManagerInViewFilter\n2012-05-17 15:28:54,731 DEBUG [org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter] (http-127.0.0.1-8080-1) Opening JPA EntityManager in OpenEntityManagerInViewFilter\n2012-05-17 15:28:54,775 DEBUG [scholastic.dashboard.dao.ReportRequestDao] (http-127.0.0.1-8080-2) Get reports for secretuserid\n2012-05-17 15:28:54,797 WARN  [org.hibernate.hql.QuerySplitter] (http-127.0.0.1-8080-2) no persistent classes found for query class: from scholastic.dashboard.dto.ReportRequest where user_id = secretuserid\n</code></pre>\n\n<p>I got here by first having it fail to find the <code>\"ReportRequest.getReportsByUser\"</code> query using <code>em.createNamedQuery()</code>, then trying a query w/o using the full path name to the entity class <code>from ReportRequest where userId = :userId</code>, and then the query in the last code block line above.</p>\n\n<p>Using JBoss 5.1, JPA 2, Hibernate 3.3 or 3.6, Spring 3.0.5.</p>\n\n<p>Code snippets:</p>\n\n<pre><code>@Entity\n@Table(name=\"td_report_request\")\n@NamedQueries({\n@NamedQuery(name=ReportRequestDao.GET_REPORTS_BY_USER, \n        query=\"from ReportRequest where userId = :userId\"),\n})\npublic class ReportRequest extends SlmsGuidAbstract {...}\n\n...\n@Repository\npublic class ReportRequestDao {\n\n    @PersistenceContext\n    private EntityManager em;\n\n    public List&lt;ReportRequest&gt; getReportRequests(String userId) {\n    // TODO uncomment this line and remove the one after when we go to JBoss &gt;= 6\n//      TypedQuery&lt;ReportRequest&gt; query = em.createNamedQuery(GET_REPORTS_BY_USER, ReportRequest.class);\n//      Query query = em.createNamedQuery(GET_REPORTS_BY_USER);\n    Query query = em.createQuery(\"from scholastic.dashboard.dto.ReportRequest where user_id = \" + userId);\n\n...\n&lt;bean id=\"dashboardEntityManagerFactory\"\n      class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n      &lt;property name=\"dataSource\" ref=\"lycea.ds.jndi-MySqlDS\" /&gt;\n      &lt;property name=\"persistenceUnitName\" value=\"dashboardPu\"/&gt;\n&lt;/bean&gt;\n...\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"\n         version=\"2.0\"&gt;\n&lt;persistence-unit name=\"dashboardPu\" transaction-type=\"JTA\"&gt;\n    &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n    &lt;jta-data-source&gt;java:/MySqlDS&lt;/jta-data-source&gt;\n    &lt;properties&gt;\n        &lt;property name=\"jboss.entity.manager.factory.jndi.name\" value=\"java:/dashboardPu\"/&gt;\n        &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.MySQLDialect\"/&gt;\n        &lt;property name=\"hibernate.query.factory_class\" value=\"org.hibernate.hql.ast.ASTQueryTranslatorFactory\"/&gt;\n        &lt;property name=\"hibernate.connection.release_mode\" value=\"auto\"/&gt;\n        &lt;property name=\"hibernate.transaction.manager_lookup_class\" value=\"org.hibernate.transaction.JBossTransactionManagerLookup\" /&gt;\n        &lt;property name=\"hibernate.hbm2ddl.auto\" value=\"update\"/&gt;\n    &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n"},{"tags":["spring","spring-jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":11524127,"title":"JDBCTemplate Hangs","body":"<p>I am using <code>JDBCTemplate</code> in my code but for one particular query <code>JDBCTemplate</code>  Hangs after calling more than 3-4 times sometime after 15-20 attempts.I haven't found any bug in my code.\nBelow is my code snapshot<br>\n<code>\n    private String getXXX(String table)<br>\n        {<br>\n                System.out.println(\"Test 1\");<br>\n            final List data = getJdbcTemplate().queryForList(SELECT_TBL_NME,\n                    new Object[] { table}, String.class);<br>\n                System.out.println(\"Test 2\");<br>\n            ret = data.size() > 0 ? data.get(0) : null;   </p>\n\n<pre><code>     return ret;  \n  }  \n</code></pre>\n\n<p></code>  </p>\n\n<p>Console hangs at Test1 without any error if function is  getting called more than 15 times or sometimes even after 3rd or 4th call.  </p>\n"},{"tags":["spring","spring-mvc","spring-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12935190,"title":"Spring security perform validations for custom login form","body":"<p>I need to do some validations on the login form before calling the authenticationManager for authentication. Have been able to achieve it with help from one existing post - <a href=\"http://stackoverflow.com/questions/7025614/how-to-make-extra-validation-in-spring-security-login-form/12929497#12929497\">How to make extra validation in Spring Security login form?</a></p>\n\n<p>Could someone please suggest me whether I am following the correct approach or missing out something? Particularly, I was not very clear as to how to show the error messages. \nIn the filter I use validator to perform validations on the login field and in case there are errors, I throw an Exception (which extends AuthenticationException) and encapsulate the Errors object. A getErrors() method is provided to the exception class to retrieve the errors.</p>\n\n<p>Since in case of any authentication exception, the failure handler stores the exception in the session, so in my controller, I check for the exception stored in the session and if the exception is there, fill the binding result with the errors object retrieved from the my custom exception (after checking runtime instance of AuthenticationException)</p>\n\n<p>The following are my code snaps - </p>\n\n<p>LoginFilter class</p>\n\n<pre><code>public class UsernamePasswordLoginAuthenticationFilter extends\n        UsernamePasswordAuthenticationFilter {\n\n    @Autowired\n    private Validator loginValidator;\n\n    /* (non-Javadoc)\n     * @see org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#attemptAuthentication(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)\n     */\n    @Override\n    public Authentication attemptAuthentication(HttpServletRequest request,\n            HttpServletResponse response) throws AuthenticationException {\n\n        Login login = new Login();\n        login.setUserId(request.getParameter(\"userId\"));\n        login.setPassword(request.getParameter(\"password\"));\n        Errors errors = new BeanPropertyBindingResult(login, \"login\");\n        loginValidator.validate(login, errors);\n        if(errors.hasErrors()) {\n            throw new LoginAuthenticationValidationException(\"Authentication Validation Failure\", errors);\n        }\n        return super.attemptAuthentication(request, response);\n    }\n}\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>@Controller\npublic class LoginController {\n\n    @RequestMapping(value=\"/login\", method = RequestMethod.GET)\n    public String loginPage(@ModelAttribute(\"login\") Login login, BindingResult result,  HttpServletRequest request) {\n\n        AuthenticationException excp = (AuthenticationException)\n                request.getSession().getAttribute(WebAttributes.AUTHENTICATION_EXCEPTION);\n        if(excp != null) {\n            if (excp instanceof LoginAuthenticationValidationException) {\n                LoginAuthenticationValidationException loginExcp = (LoginAuthenticationValidationException) excp;\n                result.addAllErrors(loginExcp.getErrors());\n            }\n        }\n        return \"login\";\n    }\n\n    @ModelAttribute\n    public void initializeForm(ModelMap map) {\n        map.put(\"login\", new Login());\n    }\n</code></pre>\n\n<p>This part in the controller to check for the instance of the Exception and then taking out the Errors object, does not look a clean approach. I am not sure whether this is the only way to handle it or someone has approached it in any other way? Please provide your suggestions. </p>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","spring-batch"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":114,"score":2,"question_id":12755988,"title":"Spring Batch Item Processor not Executing","body":"<p>I am creating a Spring Batch job using the Spring Batch template included with STS 2.81 and using examples from Spring Batch in Action by Manning. I am able to execute the chunk reader and writer without problems, but my code is skipping the processor. I have even tried nulling out all objects as it gets in the processor and nothing, the objects still manage to get written as if the processor is ignored. I tried calling the System.out.println within the Processor but nothign gets printed out in the terminal. I finally changed the configuration from using an XML bean to a Component via annotation and it did not work either. I am not sure if there is some setting that I am missing out...I followed examples in both Spring Batch in Action and from the SpringSource website and everything look ok...help!</p>\n\n<p>Here's the code:</p>\n\n<pre><code>&lt;batch:job id=\"job1\"&gt;\n    &lt;batch:step id=\"step1\"  &gt;           \n        &lt;batch:tasklet transaction-manager=\"transactionManager\" start-limit=\"100\" &gt;\n            &lt;batch:chunk reader=\"productFlatFileReader\"\n                         processor=\"productProcessor\"\n                         writer=\"productFlatFileWriter\"\n                         commit-interval=\"10\" /&gt;\n        &lt;/batch:tasklet&gt;\n    &lt;/batch:step&gt;\n&lt;/batch:job&gt;\n</code></pre>\n\n<p>Here's the processor bean:</p>\n\n<pre><code>&lt;bean id=\"productProcessor\" class=\"com.test.training.processors.ProductProcessor\" /&gt;\n</code></pre>\n\n<p>This is the Processor class that I am trying to execute with no avail:</p>\n\n<pre><code>package com.test.training.processors;\n\nimport org.springframework.batch.item.ItemProcessor;\nimport org.springframework.stereotype.Component;\nimport com.test.training.entities.Product;\n\npublic class ProductProcessor implements ItemProcessor&lt;Product, Product&gt; {\n\n@Override\npublic Product process(Product product) throws Exception {\n    product.setDescription(\"Processor is WORKING!\");\n    return product;\n    //return this.validateProductByProductIdentifier(product) ? null : product;\n}\n\nprivate boolean validateProductByProductIdentifier(Product product) {\n    return product.getProduct_identifier() == 5 ? true : false;\n}\n}\n</code></pre>\n"},{"tags":["java","ajax","spring","jsp","spring-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":377,"score":1,"question_id":11818844,"title":"How do you handle Ajax requests in Spring MVC?","body":"<p>In Spring MVC (I'm working with 3.0.2), two HTTP methods are <strong>always</strong> (or mostly as it seems to me) reserved (i.e. mapped with appropriate handlers) which are <a href=\"http://techforum4u.com/content.php/229-HTTP-Request-GET-HEAD-POST-PUT-DELETE-OPTION-TRACE\" rel=\"nofollow\">GET and POST</a> such as</p>\n\n<pre><code>@RequestMapping(method=RequestMethod.GET)\npublic String showForm(Map model)\n{\n     //Usually retrieve data from the database when the page is loaded.\n\n     return \"admin_side/Temp\";\n}\n</code></pre>\n\n<p>The above method is invoked when a GET request is made.</p>\n\n<hr>\n\n<pre><code>@RequestMapping(method=RequestMethod.POST)\npublic String onSubmit(@ModelAttribute(\"tempBean\") @Valid TempBean tempBean, BindingResult error, Map model, HttpServletRequest request, HttpServletResponse response)\n{\n     //Perform some basic operations with the database like insert, update or delete when the form is submitted (by clicking a submit button or so).\n\n     return \"admin_side/Temp\";\n}\n</code></pre>\n\n<p>The above method is invoked when a POST request is made. Assuming that the Spring controller is designated with the <code>@RequestMapping(value=\"admin_side/Temp\")</code> annotation.</p>\n\n<hr>\n\n<p>Now, what happens, if I need to use Ajax and I need to perform different functionality than the preceding methods do? I can neither handle another method with the GET method nor with the POST method because there are already handlers mapped (both the HTTP methods, GET and POST are reserved to handle the <code>showForm()</code> and <code>onSubmit()</code> methods respectively).</p>\n\n<p>For the sake of demonstration, I used the <code>method=RequestMethod.PUT</code> approach <strong>with Ajax</strong> such as</p>\n\n<pre><code>@RequestMapping(method=RequestMethod.PUT)\npublic @ResponseBody String getStateList(@ModelAttribute(\"tempBean\") @Valid TempBean tempBean, BindingResult error, HttpServletRequest request, HttpServletResponse response)\n{\n    return \"Message\";\n}\n</code></pre>\n\n<p>and it worked as intended but I felt it should <strong>not</strong> be the best solution. How do you handle Ajax requests in Spring MVC, if you have such a scenario (actually, it seems to be quite usual to me)? Should I (always) use <code>RequestMethod.PUT</code>? (or what is the best HTTP method for Ajax in Spring?)</p>\n\n<p>Is there a way to map more than one method with same HTTP method in the same controller (an obvious answer should be <strong>no</strong>)? Again, which approach do you use when you need to work with Ajax in Spring MVC? Hope you follow what I mean! It's quite difficult for me to express as my English is at the very initial stage.</p>\n"},{"tags":["spring","spring-mvc","jstl","modelattribute"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12934086,"title":"how to read the already existing bean in jstl|form?","body":"<p>I have simple form with SpringMVC, I want retrieve my already had bean by pbid. the problem is the server side I can get the already setting bean, but the jsp side it always get new bean. Can I use the @ModelAttribute(\"productbean\") to received some parameters to get the bean store in my server-side? how to do it? The jstl|form seem always get new form</p>\n\n<pre><code>&lt;form:form method=\"post\" modelAttribute=\"productbean\" action=\"\"&gt;\n&lt;table&gt;\n\n    &lt;/tr&gt;\n\n    &lt;tr&gt;\n        &lt;td width=\"118\"&gt;&lt;form:label for=\"name\" path=\"name\" &gt; Production Name:&lt;/form:label&gt;&lt;/td&gt;\n        &lt;td colspan=\"2\"&gt;&lt;form:hidden path=\"pbid\"/&gt;&lt;form:input path=\"name\" type=\"text\" size=\"50\" /&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n...\n</code></pre>\n\n<p>My controler is like:</p>\n\n<pre><code>@RequestMapping(value=\"/createproduct\", method=RequestMethod.GET)\npublic  String getProduct(HttpServletRequest req, Model model, \n        @RequestParam(value = \"pbid\", required = false, defaultValue = \"\") String spbid) throws MalformedURLException {\n    UUID pbid;\n    if(spbid.isEmpty())pbid=UUID.randomUUID();\n    else pbid=UUID.fromString(spbid);\n    ProductBean tmp;\n    if(!products.containsKey(pbid)){\n        tmp=createbean();\n        pbid=tmp.getPbid(); \n        System.err.println(\"============new productbean===============\\n\");\n    }else{\n        tmp=products.get(pbid);\n        System.err.println(tmp.getMpf().size());\n        System.err.println(tmp.getMpf().printFileNameList());\n    }\n .....\n\n@ModelAttribute(\"productbean\")\npublic ProductBean createbean(){\n    ProductBean productbean=new ProductBean(context.getRealPath(filepath));\n    products.put(productbean.assignID(), productbean);\n    return productbean;\n}\n</code></pre>\n"},{"tags":["c#","spring","ado.net","spring.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12934698,"title":"Exception when adding Params to a sproc via Spring Data .net","body":"<pre><code> class UserStoredProc : StoredProcedure\n{\n\n\n    private static string procedureName = \"scrumpls_GetUserByUsername\";\n\n    public UserStoredProc(IDbProvider dbProvider): base(dbProvider, procedureName)\n    {\n        //DeriveParameters();\n        AddRowMapper(\"userStoredProc\", new UserRowMapper&lt;User&gt;());\n        Compile();\n    }\n\n    public virtual List&lt;User&gt; GetUserByName(string userName)\n    {\n        IDictionary dict = new Hashtable();\n        dict[\"@Username\"] = \"Josh1\";\n        IDictionary outParams = QueryByNamedParam&lt;User&gt;(dict);\n\n        //IDictionary outParams = Query&lt;User&gt;();\n\n        return outParams[\"orderDetailRowMapper\"] as List&lt;User&gt;;\n    }\n\n\n}\n</code></pre>\n\n<p>With the sproc call being...</p>\n\n<p>exec dbo.scrumpls_GetUserByUsername @Username = 'Josh1'</p>\n\n<p>This is being called with....</p>\n\n<p>private static void InitContext()\n        {</p>\n\n<pre><code>        NamespaceParserRegistry.RegisterParser(typeof (DatabaseNamespaceParser));\n        _applicationContext = new XmlApplicationContext(\"file://C:/Users/40025489/Desktop/AppContext.xml\");\n\n    }\n\n    private static void CallStoredProc()\n    {\n        UserStoredProc storedProc = _applicationContext[\"userStoredProc\"] as UserStoredProc;\n        List&lt;User&gt; details = storedProc.GetUserByName(\"Josh\");\n\n\n        Console.WriteLine(\"There are users: \" + details.Count);\n        Console.WriteLine(details.First().Name);\n        Console.ReadLine();\n\n    }\n</code></pre>\n\n<p>However im getting a strange exception saying....</p>\n\n<p>CommandCallback; uncategorized DataException for SQL []; ErrorCode [201]; Procedure or function 'scrumpls_GetUserByUsername' expects parameter '@Username', which was not supplied.</p>\n\n<p>I have also tried this with the DeriveParameters(); method but i run into similar issues.</p>\n\n<p>thanks guys.</p>\n"},{"tags":["mysql","spring","jpa","transactions"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12921582,"title":"@Transactional doesn't perform commit","body":"<p>Please see my following code snippet.</p>\n\n<pre><code>@Transactional\npublic void saveMembersService(List&lt;Member&gt; list1, List&lt;Member&gt; list2)\n{\n    saveMembersDAO(list1); // does not perform commit. Why?\n    saveMembersDAO(list2); // does not perform commit. Why?\n} // does perform commit only here!\n\n@PersistenceContext\nprivate EntityManager em;\n\n@Transactional\npublic void saveMembersDAO(List&lt;Member&gt; members)\n    throws HibernateException\n{\n    Iterator&lt;Member&gt; it = members.iterator();\n    while (it.hasNext())\n    {\n        Member wsBean = it.next();\n        em.persist(wsBean); // overall commit will be made after method exit\n    }\n}\n</code></pre>\n\n<p>I use MySQL as DB. I watch MySql logs after above method execution. But I can see only <strong>single</strong> commit after <em>saveMembersService</em> method execution. I expect to see <strong>two</strong> commits for each transactional method invocation. Where am I wrong ?</p>\n\n<p><strong>UPDATE 1:</strong> Sorry, I have forgot to add @Transactional to my service method. It fixed now</p>\n\n<p><strong>UPDATE 2:</strong> I've checked with <strong>Propagation.REQUIRES_NEW</strong> attribute for DAO - result is the same (with and with out @Transactional at service method)</p>\n"},{"tags":["java","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":12920349,"title":"Random errors with Threads and Hibernate sessions","body":"<p>Im using hibernate3 and spring.</p>\n\n<p>Java code:</p>\n\n<p>Class CommunicationServiceImpl, method sendAllMessages:</p>\n\n<pre><code>Collection&lt;MessageToSend&gt; messagesToSend = this.repositoriesLocator.getMessageToSendRepository().getMessagesToSend();\n\n\n        Iterator&lt;MessageToSend&gt; iteratorMesToSe = messagesToSend.iterator();\n        while (iteratorMesToSe.hasNext()) {\n            MessageToSend mts = iteratorMesToSe.next();\n\n            MessageSender sender = new SmsSender(mts, this.repositoriesLocator);\n            sender.start(); //run thread                \n        }\n</code></pre>\n\n<p>SmsSender:</p>\n\n<pre><code>public class SmsSender extends MessageSender {\n\npublic SmsSender(MessageToSend messageToSend, RepositoriesLocator repositoriesLocator) {\n    super(messageToSend, repositoriesLocator);      \n}\n\npublic void sendMessages() {            \n    try {\n        MessageToSendSms messageToSendSms = (MessageToSendSms) this.messageToSend;                                                      \n        Iterator&lt;CustomerByMessage&gt; itCbmsgs = messageToSendSms.getCustomerByMessage().iterator();          \n        while (itCbmsgs.hasNext()) {                \n            CustomerByMessage cbm = (CustomerByMessage) itCbmsgs.next();        \n\n            //sms sending                           \n            String sResult = this.sendSMS(cb.getBody(), cbm.getCellPhone());\n            cbm.setStatus(CustomerByMessageStatus.SENT_OK);\n            cbm.setSendingDate(Calendar.getInstance().getTime());                               \n        }\n\n        messageToSendSms.setStatus(messageToSendStats.PROCESSED)\n        this.log.info(\"saving messageToSend...\"); \n        //this line dont work!\n        this.repositoriesLocator.getMessageToSendRepository().update(messageToSendSms);         \n        this.log.info(\"messageToSend saved!\");                      \n    } catch (Exception e) {         \n        this.log.error(\"Error sms sender \" + e.getMessage());\n    }       \n}\n</code></pre>\n\n<p>This is a part of my appContext.xml:</p>\n\n<pre><code>&lt;bean id=\"serviceCommunication\"\n    class=\"org.springframework.transaction.interceptor.TransactionProxyFactoryBean\"&gt;\n    &lt;property name=\"transactionManager\"&gt;\n        &lt;ref local=\"transactionManager\" /&gt;\n    &lt;/property&gt;\n    &lt;property name=\"target\"&gt;\n        &lt;ref local=\"communicationServiceImpl\" /&gt;\n    &lt;/property&gt;             \n    &lt;property name=\"transactionAttributes\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"*\"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"communicationServiceImpl\"\n    class=\"com.ninatec.fnet3.services.communication.impl.CommunicationServiceImpl\"\n    parent=\"serviceParent\"&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>HibernateRepository<br>\nrepositoriesLocator.getMessageToSendRepository().update CODE:</p>\n\n<pre><code>public void update(MessageToSend messageToSend) {\n    try {\n        this.getSession().update(messageToSend);\n    } catch (HibernateException e) {\n        this.log.error(e.getMessage(), e);\n        throw e;\n    }\n}\n</code></pre>\n\n<p>The entity MessageToSend, has never been updated.</p>\n\n<p>When I invoke CommunicationServiceImpl.sendAllMessages()  I have in a collection all messagesToSend.\nFor each MessageToSend I make a Thread to send the message.\nThe Thread smsSender works good, but not the persistence in the data base. Changes in the object MessageToSend has not been updated in my database.</p>\n\n<p>Randoms errors are:</p>\n\n<p>session closed,</p>\n\n<p>could not initialize proxy - no Session,</p>\n\n<p>could not initialize proxy - the owning Session was closed,</p>\n\n<p>Illegal attempt to associate a collection with two open sessions in hibernate and</p>\n\n<p>failed to lazily initialize a collection of role: no session or session was closed</p>\n\n<hr>\n\n<ul>\n<li><ul>\n<li>about the thread. I want to use one thread for x sms. Every smsSender, send a group of sms.</li>\n</ul></li>\n</ul>\n\n<p>I dont understand how detach the objects from session explicitly in my architecture.</p>\n"},{"tags":["eclipse","spring","maven"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1021,"score":1,"question_id":10046654,"title":"Maven + Spring + Dynamic Web Module ( Eclipse ) = java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener","body":"<p>My problem is that even set the \"Deployment Assembly\" to include the maven dependencies, this giving that my class is not being found, I do not know what else to do.</p>\n\n<p>And I'm just noticing that with the <code>ContextLoaderListener</code> class since other classes seem to be included in my package.</p>\n\n<p>My file pom.xml</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.mkyong.common&lt;/groupId&gt;\n    &lt;artifactId&gt;SpringMVC&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;SpringMVC Maven Webapp&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n    &lt;dependencies&gt;\n        &lt;!-- &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; \n            &lt;version&gt;3.8.1&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; --&gt;\n\n        &lt;!-- Spring framework --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring&lt;/artifactId&gt;\n            &lt;version&gt;2.5.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring MVC framework --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;2.5.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- JSTL --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;taglibs&lt;/groupId&gt;\n            &lt;artifactId&gt;standard&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- for compile only, your container should have this --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;SpringMVC&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.0-beta-1&lt;/version&gt;\n                &lt;configuration&gt;&lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>My file web.xml</p>\n\n<pre><code>&lt;web-app id=\"WebApp_ID\" version=\"2.4\"\n    xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee \n    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd\"&gt;\n\n    &lt;display-name&gt;Spring Web MVC Application&lt;/display-name&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/mvc-dispatcher-servlet.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n"},{"tags":["spring","dependency-injection","inversion-of-control","ioc-container"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12933081,"title":"How does IoC create instances for beans","body":"<p>I learned that when IoC container initializes, it creates instances and injects the dependencies.</p>\n\n<p>How does it create the objects? Is it creating them using the new operator?</p>\n"},{"tags":["spring","hibernate","configuration","hibernate-mapping"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12832444,"title":"Can I load attribute values of a Hibernate mapping file from a properties file?","body":"<p>Does Hibernate or the combination of Spring Framework and Hibernate (I'm working on a Java web app which uses Spring 2.5 and Hibernate 3.2) offer any mechanism for loading attribute values in Hibernate's hbm.xml mapping files from e.g. <code>properties</code> files?</p>\n\n<p>More specifically some of our domain objects are mapped to a different database catalog than most of the Hibernate mapped classes. Thus we use the <code>catalog=\"secondaryCatalogName\"</code> attribute to specify the catalog name for these classes.</p>\n\n<p>We use a <code>database.properties</code> file and Spring's <code>PropertyPlaceholderConfigurer</code> to specify the default and secondary catalog names in all of our Spring configuration. However, if I need to change the secondary catalog name, I also have to change the catalog attribute in those few hbm.xml -files. It would be great if I could use a placeholder such as <code>${secondary.catalog}</code> for the catalog attribute in the mapping files as well. </p>\n\n<p>Is this possible?</p>\n\n<p>Here's a simplified example using configuration snippets:</p>\n\n<p><strong>Database structure</strong></p>\n\n<pre><code>MySQL instance\n- catalog: CatalogA\n    - table: TableFoo\n    - table: TableBar\n    - ...\n- catalog: CatalogB\n    - table: TableBaz\n    - ...\n</code></pre>\n\n<p><strong>database.properties</strong></p>\n\n<pre><code>primary.catalog=CatalogA\nsecondary.catalog=CatalogB # &lt;-- wish I could use this property in hbm.xml\n</code></pre>\n\n<p><strong>SessionFactory -configuration (Spring):</strong></p>\n\n<pre><code>&lt;bean id=\"sessionFactory\" class=\"...hibernate3.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"mappingResources\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;Foo.hbm.xml&lt;/value&gt;\n            &lt;value&gt;Bar.hbm.xml&lt;/value&gt;\n            &lt;value&gt;Baz.hbm.xml&lt;/value&gt;\n            ...\n        &lt;/list&gt;\n    &lt;/property&gt; \n\n   ...\n\n    &lt;property name=\"hibernateProperties\"&gt;\n       &lt;props&gt;\n           ...\n           &lt;prop key=\"hibernate.default_catalog\"&gt;${primary.catalog}&lt;/prop&gt;\n       &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;                 \n</code></pre>\n\n<p><strong>Foo.hbm.xml:</strong></p>\n\n<p>Hibernate mapping for a domain object in <strong>CatalogA</strong> (CatalogA entity mappings always work fine because of <code>hibernate.default_catalog</code> property)</p>\n\n<pre><code>&lt;hibernate-mapping&gt;\n    &lt;class name=\"Foo\" table=\"TableFoo\"&gt;\n    ...\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p><strong>Baz.hbm.xml:</strong></p>\n\n<p>Hibernate mapping for a domain object in <strong>CatalogB</strong> (this is the problem because of the <strong>catalog</strong> attribute: it must change in <em>all</em> hbm.xmls of CatalogB entities if I want to use a different secondary catalog name)</p>\n\n<pre><code>&lt;hibernate-mapping&gt;\n    &lt;class name=\"Baz\" table=\"TableBaz\" catalog=\"CatalogB\"&gt;\n    ...\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n"},{"tags":["spring","tomcat","session-timeout"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12932589,"title":"Changing the default session timeout of a spring web application","body":"<p>I have to test an web application that is written by spring and jsp.The default \nsession-timeout for the application is 30 min.I want to reduce the session-timeout. For doing this, I have changed in the 'web.xml' file in tomcatInstallationLocation/conf/. But it doesn't work. The default configuration in 'tomcatInstallationLocation/conf/web.xml' was -</p>\n\n<pre><code>&lt;session-config&gt;\n    &lt;session-timeout&gt;30&lt;/session-timeout&gt;\n&lt;/session-config&gt;\n</code></pre>\n\n<p>Where I've just changed the time and make it -</p>\n\n<pre><code>&lt;session-config&gt;\n    &lt;session-timeout&gt;5&lt;/session-timeout&gt;\n&lt;/session-config&gt;\n</code></pre>\n\n<p>But is still doesn't work. As I know far, in this situation I have to make a change in my spring application's 'web.xml'. But I'm not sure. Can any one help me?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","hibernate","exception"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":11490636,"title":"Why are exception in spring and hibernate most unchecked exception?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4609870/why-hibernate-changed-hibernateexception-to-runtimeexception-unchecked\">why hibernate changed HibernateException to RuntimeException (unchecked)</a>  </p>\n</blockquote>\n\n\n\n<p>What is the reason for keeping exception in spring and hibernate as unchecked exception?</p>\n\n<p>Is only to reduce the cluttering while coding or there is some other design principal behind it?</p>\n"},{"tags":["spring","spring-webflow","springsource"],"answer_count":1,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":1175,"score":8,"question_id":6282829,"title":"Spring Web Flow 3 Development Abandoned?","body":"<p>Does anyone have any information on Spring Web Flow 3 status?</p>\n\n<p>Here are a few relevant links that support my sense that springsource has essentially abandoned the project:</p>\n\n<p>1)<a href=\"https://jira.springsource.org/browse/SWF#selectedTab=com.atlassian.jira.plugin.system.project%3aroadmap-panel\">Official roadmap</a> indicates they are missing milestones by over a year now with no update to the roadmap.</p>\n\n<p>2)<a href=\"http://forum.springsource.org/showthread.php?86858-Discuss-Spring-Web-Flow-3-Development\">Forum thread</a> filled with these questions ignored by Keith Donald and Spring team.</p>\n\n<p>3)<a href=\"http://www.springsource.org/download\">Official Download page</a> says the latest release is 2.2.1 but is actually 2.3 so that is not even being kept up-to-date anymore.</p>\n\n<p>While Web Flow version 2 I'm sure is a great product, the issues above are all obvious red flags when it comes to evaluating an open source product -- as well as evaluating the company behind that project. Am I simply missing some communication channel where all this has been discussed in detail before? I find it hard to believe that springsource, a company that seemingly had their act together, would be this negligent with one of their flagship products.</p>\n"},{"tags":["java","spring","threadpool","connection-pooling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12915429,"title":"How to pool statefull bean?","body":"<p>I am using Spring 3.1 on standalone env.</p>\n\n<p>I have scenario where I am creating programmatic prototype beans. </p>\n\n<p>each bean has it's own state.(they are statefull, having unique id and etc..)</p>\n\n<p>After a bean is created I am connecting it to a topic(via DLMC pragmatically).</p>\n\n<p>Each message being sent to the topic contains a specific id(one of the topic's consumers)</p>\n\n<p>Latency and throughput are very important for me. </p>\n\n<p>So in case i am sending load of messages to a specific bean I am having ridiculous delay between each message since that bean is very busy and it wont be free until it finish it's current job.</p>\n\n<p>So I thought that I need to create pool of the same bean each time I first create it to avoid such situation.</p>\n\n<p>Any ideas how can I achieve that? Maybe there is a  high level solution for that?</p>\n\n<p>I am creating those spring mdbs pragmatically this way:</p>\n\n<p>java  code:</p>\n\n<pre><code>MyMdb myMdb= (MyMdb) beanFactory.getBean(\"MyMdb\", id);\n</code></pre>\n\n<p>and xml:</p>\n\n<pre><code>&lt;bean id=\"fixSessionMDB\" class=\"com.finbird.fixgw.core.mdb.FixSessionMDB\"\n    scope=\"prototype\" lazy-init=\"true\"&gt;\n    &lt;constructor-arg ref=\"0\" /&gt;\n    &lt;constructor-arg ref=\"0\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>thanks,\nray.</p>\n"},{"tags":["spring","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12911247,"title":"How to get security=none for localhost (jetty) and spring security otherwise?","body":"<p>I'm very new to Spring and a bit of a newb in java as well so I may be missing something obvious.  We deploy to WAS for UAT and prod but are starting to move to embedded jetty as our apps are pretty lightweight.</p>\n\n<p>Soooo ... we've been hacking our web.xml to comment out the <code>&lt;filter&gt;</code> tags and commenting out the  for spring security.xml in application context.  Not ideal as we use maven.  So as a learning exercise I'm trying to get this to work tidily and been reading a lot of blogs and questions here and, frankly, getting confused.</p>\n\n<p>My first try was to leave the <code>&lt;filter&gt;</code> in web.xml and create a new beans <code>profile=\"jettyLocal\"</code> with <code>http auto-config=\"true\" security=\"none\"</code>.  Then I start jetty from RTC with <code>-Dspring.profiles.active=\"JettyLocal\"</code>.  This seems to have no effect.  I.e. with or without that I still get a chain of exceptions - \"no authentication manager\" and error creating the spring filterChains bean.</p>\n\n<p>Is the problem that web.xml is loaded before the <code>-Dspring..</code> is processed?  Am I asking the wrong question?  Happy to RTFM if you can give me pointers.  I have Spring in Action 3.0 but can't see anything relevant, maybe due to my lack of experience.</p>\n\n<p>eta:  To clarify as I was unclear.  I have the app working nicely with Spring-security on an external WAS with AD security, a localhost WAS with a user-service tag giving a hardcoded user name managed by named profile beans.  What I am struggling with is keeping those 2 but having no security for running quick tests with jetty:run.\nThanks for the suggestions thus far. All good reading.</p>\n\n<p>eta 2: The samples I can find all assume I'll be testing a whole web app with logon pages etc.  But I want to use jetty:run for quick tests of classes or packages that can respond to web calls using a simple test harness.</p>\n\n<p>eta 3: I've managed to get close enough to what I want by adding to spring-security.xml</p>\n\n<pre><code>&lt;beans:beans profile=\"dev\"&gt;\n    &lt;authentication-manager&gt;\n        &lt;authentication-provider&gt;\n            &lt;user-service&gt;\n                &lt;user name=\"xxx\" password=\"xxx\" authorities=\"xxx\" /&gt;\n            &lt;/user-service&gt;\n        &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>\nand starting jetty with -Dspring.profiles.active=\"dev\"</p>\n"},{"tags":["spring","spring-mvc","spring-webflow"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3845,"score":0,"question_id":2577861,"title":"Cannot locate BeanDefinitionParser for element [executor]","body":"<p>I'm trying to learn Spring MVC 2.0 and Spring Web Flow 1.0. </p>\n\n<p>I get following error (possibly when the dispatcher delegates a request to flow):</p>\n\n<blockquote>\n  <p>Configuration problem: Cannot locate BeanDefinitionParser for element [executor]</p>\n</blockquote>\n\n<p>I am using the Spring 2.0 and Web Flow 1.0 jar files in the application's build path.</p>\n\n<p>Below is my Spring MVC 2.0 configuration file:</p>\n\n<pre><code>&lt;bean name=\"/phonebook.htm\" \n      class=\"org.springframework.webflow.executor.mvc.FlowController\"&gt;\n    &lt;property name=\"flowExecutor\" ref=\"flowExecutor\"/&gt; \n&lt;/bean&gt; \n&lt;!-- Resolves flow view names to .jsp templates --&gt; \n&lt;bean id=\"viewResolver\"\n      class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt; \n    &lt;property name=\"prefix\" value=\"/WEB-INF/jsp/\"/&gt; &lt;property name=\"suffix\" value=\".jsp\"&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>And my Spring Web Flow 1.0 config:</p>\n\n<pre><code>&lt;flow:executor id=\"flowExecutor\" registry-ref=\"flowRegistry\"/&gt; \n&lt;!-- Creates the registry of flow definitions for this application --&gt; \n&lt;flow:registry id=\"flowRegistry\"&gt; &lt;flow:location path=\"/WEB-INF/flows/**-flow.xml\"/&gt;\n&lt;/flow:registry&gt; \n</code></pre>\n"},{"tags":["spring","hibernate","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":56,"score":-3,"question_id":12915045,"title":"Hibernate configuration for using PostgreSQL Schemas","body":"<p>I'm trying to use <a href=\"http://www.postgresql.org/docs/current/static/ddl-schemas.html\" rel=\"nofollow\">PostgreSQL Schemas</a> in my web app, but I'm having a hard time getting Hibernate to use them.</p>\n\n<p>By reading many posts I came to know that <a href=\"http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#services-MultiTenantConnectionProvider\" rel=\"nofollow\">Hibernate Multi-Tenant</a> is an approach which is required to be used for this. I've tried all possible kind of configurations to make it work but it's not working.</p>\n\n<p>Any pointers towards making this work would be really helpful.</p>\n\n<p>How to make Spring-Hibernate-PostgreSQL talk to one another?</p>\n"},{"tags":["java","spring","gson"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12773170,"title":"Spring RestTemplate, GsonHttpMessageConverter","body":"<p>given JSON</p>\n\n<pre><code>{\"news\" : [ {...}, {...}, {...} ] }\n</code></pre>\n\n<p>the array contains custom objects, which I already declared as POJOs. Want I simply want to map my custom objects by keypath \"news\".</p>\n\n<pre><code>restTemplate.exchange(URI + \"/news/{limit}/\", HttpMethod.GET, CustomObject[].class, 10)\n</code></pre>\n\n<p>throws an exception, because this JSON is expected</p>\n\n<pre><code>[ {...}, {...}, {...}]\n</code></pre>\n\n<p>Is there a way to configure RestTemplate to match my needs?</p>\n\n<p>Regards </p>\n\n<p><strong>Update:</strong></p>\n\n<pre><code>restTemplate.exchange(URI + \"/news/{limit}/\", HttpMethod.GET, requestEntity, JsonElement.class,10).getBody().getAsJsonObject().get(\"news\");\nCustomObject[] result = gson.fromJson(body, CustomObject[].class);\n</code></pre>\n\n<p>This snippet works but is there a cleaner way? For my suprise mapping to <code>JSONObject</code> doesn't even worked, JSONElement did the job at the end.</p>\n"},{"tags":["java","spring","hibernate","hibernate-criteria"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12899315,"title":"Hibernate Criteria most recent date field of Collection","body":"<p>I have Laboratories with a collection of states, here are my simplified Classes:</p>\n\n<pre><code>    LabState {\n        private Integer id;\n        private State state;\n        private Date date;\n        private String comments;\n    }\n\n    State{\n        private Integer id;\n        private String name;\n\n    }\n\n    Lab{\n        private Integer id;\n        private List&lt;LabState&gt; states = new ArrayList&lt;LabState&gt;();\n        private Date date;\n        private String name\n    }\n</code></pre>\n\n<p>I want to get via Hibernate Criteria the Last State from a specific laboratory. in mySql this work fine:</p>\n\n<pre><code>SELECT ls.* FROM labs_states les INNER JOIN\n    ( SELECT idLab, idLabState, MAX(date) AS lastDate FROM labs_states GROUP BY idLab)\n        groupedLabs ON les.idLab = groupedLabs.idLab  AND les.date = groupedLabs.lastDate\n</code></pre>\n\n<p><strong>Edit: SearchMethod:</strong></p>\n\n<pre><code>   public List&lt;Labs&gt; search(LabSearch labSearch) {\n\n            SessionFactory sessionFactory = hibernateTemplate.getSessionFactory();\n            Session session = sessionFactory.openSession();\n\n            Criteria criteria = session.createCriteria(Lab.class);\n\n            criteria.add(Restrictions.like(\"name\", \"%\" + labSearch.getName() + \"%\"));\n\n            if(labSearch.getState() != null){\n                criteria.createCriteria(\"states\").add(Restrictions.eq(\"state\", labSearch.getState())).addOrder(Order.asc(\"date\")).list().get(0);\n\n\n            return (List&lt;Lab&gt;) criteria.list();\n}\n</code></pre>\n\n<p>I don't nkow how to do this with Criteria, or if there is any other way to do</p>\n\n<p>thanks</p>\n"},{"tags":["spring","hibernate","jpa","jpa-2.0","hibernate-annotations"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12930686,"title":"JPA: Deleting detached instance","body":"<p>I get resultList from typedQuery object.\nI take first object from that list. </p>\n\n<p>eg. <code>LoginAttempt loginAttempt = loginAttempts.get(0);</code>  </p>\n\n<p>When, I update this object and call <code>entityManager.merge(loginAttempt);</code> it is updated successfully.</p>\n\n<p>But when I am going to delete this object it gives me exception ie. <code>java.lang.IllegalArgumentException: Removing a detached instance.</code></p>\n\n<p>Any suggestion. Thanks :)</p>\n\n<p>Actually, I want to remove only. I just mention merge because, I am get confused that merge is working but remove is not working...</p>\n"},{"tags":["java","spring","jboss5.x"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2890,"score":2,"question_id":3811246,"title":"No JTA UserTransaction available - specify either 'userTransaction' or 'userTransactionName' ","body":"<p>I have encountered a strange problem with spring transaction. My application uses Spring with EJBs. The EJBs also invoke Spring service classes annotated with <code>@Transaction</code>. I have used Spring <code>JtaTransactionManager</code> for transaction management. The application is packaged as an EAR file and is deployed on jboss5.0 and it works fine. But when I instruct jboss to use separate classloader for each EAR application, spring initialization gives error. </p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean\n   with name 'transactionManager' defined in ServletContext resource \n   [/WEB-INF/applicationContext.xml]: Invocation of init method failed; \nnested exception is java.lang.IllegalStateException: No JTA UserTransaction \n   available - specify either 'userTransaction' or 'userTransactionName' or \n   'transactionManager' or 'transactionManagerName'\n</code></pre>\n\n<p>Why initialization of Spring is not successful?</p>\n\n<p>Thanks</p>\n"},{"tags":["html","forms","spring","jsp","struts"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12927575,"title":"Adding form content dynamically to jsp","body":"<p>In my project, for every user the form elements like textbox, radiobox, button etc differ(type, number and order all can differ).\nThey need to be fetched from db per user.\nI need your suggestions wrt to displaying and managing the content of the jsp in this regard.\nIs there any tool or engine present to manage this kind of content display?</p>\n\n<p>PS: I am using Struts and Spring integration framework.</p>\n"},{"tags":["hibernate","spring","maven","c3p0"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":615,"score":2,"question_id":6841596,"title":"C3P0 won't start configured in Hibernate properties with Spring?","body":"<p>I'm using Hibernate 3.3.1GA and Spring 3.0.2 (and Maven from eclipse). I added c3p0-0.9.1 jar to classpath, and first tried this approach (configuring c3p0 within datasource bean):</p>\n\n<pre><code>&lt;bean id=\"dataSource2\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" destroy-method=\"close\"&gt;\n    &lt;property name=\"driverClass\" value=\"${ora.driverClassName}\" /&gt;\n    &lt;property name=\"jdbcUrl\" value=\"${ora.url}\" /&gt;\n    &lt;property name=\"user\" value=\"${ora.username}\" /&gt;\n    &lt;property name=\"password\" value=\"${ora.password}\" /&gt;\n\n    &lt;property name=\"minPoolSize\" value=\"${minPoolSize}\" /&gt;\n    &lt;property name=\"maxPoolSize\" value=\"${maxPoolSize}\" /&gt;\n    &lt;property name=\"maxIdleTime\" value=\"${maxIdleTime}\" /&gt;\n    &lt;property name=\"maxStatements\" value=\"${maxStatements}\" /&gt;\n    &lt;property name=\"acquireIncrement\" value=\"${acquireIncrement}\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>This seems to <strong>work</strong>, as I can see c3p0 log in the eclipse console.<br>\nHowever, when I tried configuring it within hibernate sessionFactory properties, like this:</p>\n\n<pre><code>&lt;bean id=\"sessionFactory2\" class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\" name=\"sessionFactory2\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource2\" /&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n            &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n            &lt;prop key=\"hibernate.query.substitutions\"&gt;true 1, false 0&lt;/prop&gt;\n\n            &lt;!-- C3P0 properties (hibernate.c3p0.idle_test_period)  --&gt;\n            &lt;prop key=\"hibernate.connection.provider_class\"&gt;org.hibernate.connection.C3P0ConnectionProvider&lt;/prop&gt;\n            &lt;prop key=\"hibernate.c3p0.min_size\"&gt;1&lt;/prop&gt;\n            &lt;prop key=\"hibernate.c3p0.max_size\"&gt;20&lt;/prop&gt;\n            &lt;prop key=\"hibernate.c3p0.timeout\"&gt;600&lt;/prop&gt;\n            &lt;prop key=\"hibernate.c3p0.acquire_increment\"&gt;1&lt;/prop&gt;\n            &lt;prop key=\"hibernate.c3p0.max_statements\"&gt;50&lt;/prop&gt;\n\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=\"mappingResources\"&gt;\n        &lt;list&gt;\n                     ...\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>this <strong>doesn't work</strong>, c3p0 just won't start, no output, no error, nothing...<br>\nActually, I don't find it so strange , because when I opened hibernate-core-3.3.1.GA jar from Maven repository, I couldn't find <em>org.hibernate.connection.C3P0ConnectionProvider</em> class. I tried some other versions of hibernate (3.3.2, 3.6.0), and still same thing was happening (no C3P0ConnectionProvider class was in jar file). I treid removing <em>connection.providerclass</em> property, no difference.</p>\n\n<p>I read a ton of related questions here and on other forums, and I can't really understand what's the problem. <a href=\"http://stackoverflow.com/questions/4303988/hibernate-3-3-and-c3p0\">This</a> is basically my problem, but I didn't find it useful. Am I missing something in the properties configuration, did I name them wrong or something?  </p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","connection","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12910904,"title":"Oracle DB Connectivity issue with Java Spring Bean","body":"<p>Actually I am trying to call queryForInt() method but it displays NULL exception. When I acces the dB with same credential using Following Code:</p>\n\n<p>----------------This is Working-----------------------</p>\n\n<pre><code>DriverManagerDataSource dataSource = new DriverManagerDataSource();\ndataSource.setDriverClassName(\"oracle.jdbc.driver.OracleDriver\");\ndataSource.setUrl(\"jdbc:oracle:thin:@localhost:1521:xe\");\ndataSource.setUsername(\"userName\");\ndataSource.setPassword(\"pwd\");\n</code></pre>\n\n<p>------ In Bean -----------------(This is not working)\n    \n    \n        \n        \n        \n    </p>\n\n<pre><code>&lt;!-- DAOS --&gt;\n&lt;bean id=\"ProductDAO\" class=\"br.edeploy.voive.dao.ProductDAO\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>---------On ProductDAO Class --------------(Exception is thrown here when I use Spring method)</p>\n\n<pre><code>try\n{\n  int i = getSimpleJdbcTemplate().queryForInt(\"Select * from ERP_PRODUCT\", \"\");\n}\ncatch(DataAccessException dax)\n{\n  throw new Exception(\"Error: \"+dax.getMessage());\n}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["xml","hibernate","spring","lucene"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":157,"score":0,"question_id":9264931,"title":"Set dynamic index directory for hibernate-search in Spring","body":"<p>This has been discussed already, however none of the solutions/advices worked for me. I want to configure the lucene search index path in Spring via persistence.xml. This is important, since the deployment server is (of course) different from my local machine, so paths will not match. Right now, my configuration of hibernate-search inside the  persistence.xml looks like this:</p>\n\n<pre><code>&lt;property name=\"hibernate.search.default.directory_provider\" value=\"filesystem\" /&gt; \n&lt;property name=\"tempdir\" value=\"#{ systemProperties['java.io.tmpdir'] }\" /&gt;\n&lt;property name=\"hibernate.search.default.indexBase\" value=\"${tempdir}\\hibernate\\index\" /&gt; \n</code></pre>\n\n<p>I've seen this...</p>\n\n<p><a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html#expressions-beandef-xml-based\" rel=\"nofollow\">http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html#expressions-beandef-xml-based</a></p>\n\n<p>...so it should work?! However, the variable is not replaced, and the files are written to a newly created subdir having the name ${tempdir}, which is not what I wanted :)</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["java","spring","security","jmx"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12929335,"title":"Java JMX get the logged in user","body":"<p>I have a JMX server started by JVM process that can be optionally secured (for now its not, so I'm ready to consider any extensible way for it). For example as an option I looked at <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/management/agent.html\" rel=\"nofollow\">official tutorial</a> and its ok for now to use user/password authentication.\nThe MBeans are deployed via spring (annotations approach is used).</p>\n\n<p>Now I would like to get <strong>from within</strong> my MBean the user name for some additional actions. Is it possible to do in JMX technology at all? If Yes how? :)</p>\n\n<p>Example:</p>\n\n<pre><code>public class MyMBean {\n\n    public void myOp() {\n\n        String userName = ... ?;  // or whatever object that can bring me the name\n\n        makeSomethingWithUserName ( userName );\n\n        doMyStuffHere();\n    }\n}\n</code></pre>\n\n<p>I've found <a href=\"http://www.java.net/node/680707\" rel=\"nofollow\">this tutorial</a> but it seems to be glassfish specific and I'm looking for plain java based solution.</p>\n\n<p>Thanks a lot and have a nice day</p>\n"},{"tags":["spring","cloud","vmware","cloudfoundry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12926454,"title":"MySQL server not found in cloud foundry","body":"<p>I am trying to deploy my spring 3 + tomcat 6 + mysql 5.5 application on cloud foundry cloud. I am able to deploy application from Eclipse using STS plugin for cloudfoundry. Now issue i am getting is my application is not ablt to connect to database. I have configured a mysql service and started a tunnel. I have used tunnels username/password and URL to connect to database in application context file.</p>\n\n<pre><code>&lt;Resource name=\"jdbc/myDB\" auth=\"Container\" type=\"javax.sql.DataSource\"\n           maxActive=\"10\" maxIdle=\"3\" maxWait=\"10000\"\n           username=\"xxx\" password=\"xxx\" driverClassName=\"com.mysql.jdbc.Driver\"\n           url=\"jdbc:mysql://127.0.0.1:10100/xxx?autoReconnect=true\"/&gt;\n</code></pre>\n\n<p>I am getting error.</p>\n\n<pre><code>Could not get JDBC Connection; nested exception is org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Could not create connection to database server. Attempted reconnect 3 times. Giving up.)\n</code></pre>\n\n<p>Can someone please help me. Also let me know how to upload my local sql database dump on cloud foundry DB because i think once i will be able to connect this is going to be another problem</p>\n"}]}
