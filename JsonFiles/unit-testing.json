{"total":15322,"page":1,"pagesize":100,"questions":[{"tags":["java","unit-testing","testing","groovy","mocking"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2,"score":0,"question_id":13298695,"title":"Groovy unit test for overloaded method","body":"<p>Using the MockFor how can I write unit tests for overloaded methods.</p>\n\n<p>For example</p>\n\n<pre><code>public HttpResponse execute(HttpUriRequest request, HttpContext context)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>public HttpResponse execute(HttpHost target, HttpRequest request)\n</code></pre>\n\n<p>I have written:</p>\n\n<pre><code>        def responseMocker = new MockFor(HttpResponse.class)\n        HttpResponse response = responseMocker.proxyInstance()\n        def requestMocker = new MockFor(HttpUriRequest.class)\n        def request = requestMocker.proxyInstance()\n        def contextMocker = new MockFor(HttpContext.class)\n        def context = contextMocker.proxyInstance();\n        def clientMocker = new MockFor(HttpClient.class)\n        clientMocker.demand.execute(request, context) { response }\n\n        HttpClientSample client = new HttpClientSample(clientMocker.proxyInstance())\n\n        assertEquals response, client.execute(request,context)\n</code></pre>\n\n<p>This test above fails with:</p>\n\n<p>groovy.lang.MissingMethodException: No signature of method: ....</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2,"score":0,"question_id":13298690,"title":"jasmine settimeout","body":"<p>I am new to Jasmine and I have a problem with the following test:</p>\n\n<pre><code>describe(\"my test suite\", function() {\n    it(\"my testcase\", function() {\n        var callbackWasCalled = false;\n        function callback(){\n            callbackWasCalled = true;\n        }\n        methodToTest(callback);\n        expect(callbackWasCalled).toBe(true);\n    });\n});\n</code></pre>\n\n<p>In most cases that works but this code does not:</p>\n\n<pre><code>methodToTest(callback) {\n    setTimeout(function() { callback(); }, 100);\n}\n</code></pre>\n\n<p>Why is that?\nWhen I add a console.log in the callback I see that it gets called.</p>\n"},{"tags":["java","unit-testing","testing","mockito"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13298662,"title":"Mockito's ArgumentCaptor: One method name, two method definitions (Part 2)","body":"<p>I asked a <a href=\"http://stackoverflow.com/questions/13279617/mockitos-argumentcaptor-one-method-name-two-method-definitions\">similar question yesterday</a> in which I'm using a single method name, but have two different arguments I'm passing along.  This one does not involve argument types that share a parent class.</p>\n\n<p>I am using PowerMockito to return a PrintWrite from a constructor.  I need to mock its print methods.</p>\n\n<p>There are four kinds of print/println calls I am tracking:</p>\n\n<pre><code>print(long l)\nprint(java.lang.String s) \nprint(char c)\nprintln()\n</code></pre>\n\n<p>Particularly what I care about is the one that prints a long.  I have the following setup:</p>\n\n<pre><code>Mockito.doNothing().when(fakePrintWriter).println();\nMockito.doNothing().when(fakePrintWriter).print(any(Long.class));\nMockito.doNothing().when(fakePrintWriter).print(any(String.class));\nMockito.doNothing().when(fakePrintWriter).print(any(Character.class));\n</code></pre>\n\n<p>With the following verifies, which I want to capture certain arguments with:</p>\n\n<pre><code>Mockito.verify(fakePrintWriter, Mockito.times(11)).print(outputCaptor.capture());\nMockito.verify(fakePrintWriter, Mockito.times(1)).print(longPrintCaptor.capture());\nMockito.verify(fakePrintWriter, Mockito.times(9)).print(eq(','));\nMockito.verify(fakePrintWriter, Mockito.times(3)).println();\n</code></pre>\n\n<p>Which slaps me in the face with this:</p>\n\n<pre><code>Wanted but not invoked:\nprintWriter.print(&lt;Capturing argument&gt;);\n</code></pre>\n\n<p>Drilling down by testing a print on a long normally, I discovered that calling print(long l) is actually calling println.  So, I instead changed my long print setup/verify to this:</p>\n\n<pre><code>Mockito.doNothing().when(fakePrintWriter).println(any(Long.class));\n...\nMockito.verify(fakePrintWriter, Mockito.times(1)).println(longPrintCaptor.capture());\n</code></pre>\n\n<p>Which then gives me the resulting conflict with println:</p>\n\n<pre><code>Argument(s) are different! Wanted:\nprintWriter.println(&lt;Capturing argument&gt;);\n...\nActual invocation has different arguments:\nprintWriter.println();\n...\n\nExpected :printWriter.println(&lt;Capturing argument&gt;);\nActual   :printWriter.println();\n</code></pre>\n\n<p>Like yesterday I am at a loss as to how to resolve this- I considered using a custom Answer to track the string that gets outputted (I want to verify the actual order of the values that are being outputted) but I believe doing so would only result in similar errors.  Any ideas on what to do?</p>\n"},{"tags":["c#","asp.net","unit-testing","testing"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":173,"score":1,"question_id":9108976,"title":"Automated Test Tool","body":"<p>I am looking automated test tool for testing my website project like NUnit. I used Nunit test tool my last project. Now I have to write new test tool for my new web project. \nAnybody know test tool better than Nunit? or should I use Nunit again?\nWhat is the best automated test tool?</p>\n"},{"tags":["java","string","unit-testing","junit","junit4"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13298181,"title":"Unit test multiline strings in Java","body":"<p>I want to unit test an API that parses a file for specific patterns.<br>\nThe fragments of text returned, may be multiline and contain tabs etc. I.e. the text in the file is formatted with new lines and tabs to be readable by a user (same as we nicely indent an xml file).<br>\n<strong>Problem:</strong> Since <code>Java</code> does not offer the option to define such strings (which will be the expected outcome in an <code>Assert</code> check of the API output) how are such problems handled?<br>\nI thought e.g. to save all the expected output in a file with some kind of special character to mark beginning and end of each expected fragment but I thought that perhaps there is a standard approach to such a problem.<br>\nIs there a better option?   </p>\n\n<p><strong>Update:</strong>\nExample:  </p>\n\n<pre><code>This is an example String.    \n     This is an inner part of the string.        Another part.           Another also.    \n                      This is also an inner part.   \n     Now an outer.   This is the outer example       string.\n</code></pre>\n"},{"tags":["ruby-on-rails","unit-testing","rspec","rspec-rails"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13298015,"title":"rspec not working for a sign in test using spork","body":"<p>Rspec is not working with Rails 3.0.6 and ruby 1.8.7 (2012-06-29 patchlevel 370) [i686-linux]</p>\n\n<p>I have this simple users_spec.rb file</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe \"Log in\" do\n\n  context \"User sign in\" do\n\n    it \"shows error for not confirmed users after sign in\" do\n      visit \"/users/sign_in\"\n      fill_in \"Email\", :with =&gt; \"guillem.hernandez.sola+rspec@gmail.com\"  \n      fill_in \"user_password\", :with =&gt; \"foobar\"\n      click_button \"user_submit\"\n      page.should have_content(I18n.t('devise.failure.invalid'))\n    end\n\n  end   \n\nend\n</code></pre>\n\n<p>This spec_helper.rb file I included on the former file</p>\n\n<pre><code>require 'rubygems'\nrequire 'spork'\n#uncomment the following line to use spork with the debugger\n#require 'spork/ext/ruby-debug'\n\nSpork.prefork do\n  # Loading more in this block will cause your tests to run faster. However,\n  # if you change any configuration or code from libraries loaded here, you'll\n  # need to restart spork for it take effect.\n\nend\n\nSpork.each_run do\n  # This code will be run each time you run your specs.\n\nend\n\n# This file is copied to spec/ when you run 'rails generate rspec:install'\nENV[\"RAILS_ENV\"] ||= 'test'\nrequire File.expand_path(\"../../config/environment\", __FILE__)\nrequire 'rspec/rails'\nrequire 'rspec/autorun' # Required for Rcov to run.\nrequire \"email_spec\"\nrequire \"capybara/rspec\"\n#require File.expand_path(File.dirname(__FILE__) + \"/blueprints\")\n\n# Require helpers here\nrequire File.expand_path(File.dirname(__FILE__) + \"/positions_helper\")\n\ninclude PositionsHelper\n\n# Requires supporting ruby files with custom matchers and macros, etc,\n# in spec/support/ and its subdirectories.\nDir[Rails.root.join(\"spec/support/**/*.rb\")].each {|f| require f}\n\nRSpec.configure do |config|\n  # == Mock Framework\n  #\n  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:\n  #\n  # config.mock_with :mocha\n  # config.mock_with :flexmock\n  # config.mock_with :rr\n  config.mock_with :rspec\n\n  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures\n#  config.fixture_path = \"#{::Rails.root}/spec/fixtures\"\n\n  # If you're not using ActiveRecord, or you'd prefer not to run each of your\n  # examples within a transaction, remove the following line or assign false\n  # instead of true.\n  config.use_transactional_fixtures = true\n\n\nend\n</code></pre>\n\n<p>And my Gemfile to execute the rails app</p>\n\n<pre><code>source 'http://rubygems.org'\n\ngem 'rails', '3.0.6'\ngem 'rake', '0.8.7'\n\ngem 'mysql' #Development in windows\ngem 'mysql2', '&lt; 0.3'\n\ngem 'mongrel'\ngem 'jquery-rails', '&gt;= 0.2.7' #Replace Prototype with JQuery\ngem 'active_scaffold_vho' #Used in typical CRUD interfaces\ngem 'inherited_resources', '~&gt; 1.2.1' #Used for more complex views such the home page\ngem 'has_scope', '~&gt; 0.5.0' #Used in the positions controller\ngem 'json_pure' #Used to parse events\ngem 'formtastic', '~&gt; 1.2.3' #Used in forms\ngem 'devise', '~&gt; 1.3.4' #Authentication\ngem 'recaptcha', :require =&gt; 'recaptcha/rails' #Captcha for register\n\ngem 'uuidtools', '~&gt; 2.1.2'\n\ngem 'capistrano', '~&gt; 2.6.0' #Deployments\n\ngem 'cgi_multipart_eof_fix'\ngem 'fastthread'\n\ngem 'mongoid', \"~&gt; 2.0\" #Mongoid\ngem 'bson_ext', \"~&gt; 1.3\" #Mongoid\n\ngem 'redis', \"~&gt; 2.2.0\"\ngem 'resque'\ngem 'resque-scheduler'\n\ngem 'SystemTimer', \"~&gt; 1.2.3\" #recomended by mongoid and redis\n\ngem 'ar_mailer_rails3' #Mailer system\ngem 'lazy_high_charts', \"~&gt; 1.1.1\" #Dashboard charts\n\ngem 'rails-breadcrumbs', \"~&gt; 1.0.0\"\n\ngem 'curb' #Used to send commands to terminals\n\ngem 'geonames', \"~&gt; 0.2.2\" #Used to \n\ngem 'activemerchant'\n\ngem 'savon', \"~&gt; 0.9.7\"\n\ngem 'rack-ssl'\ngem 'state_machine'\n\ngem \"http_accept_language\", '~&gt; 1.0.2'\n\ngem 'recurly', '~&gt; 2.1.0'\ngem 'newrelic_rpm'\n\ngroup :test, :development do\n  gem 'rspec-rails', \"~&gt; 2.8\"\n  gem 'rspec-mocks', \"~&gt; 2.8\"\n  gem 'capybara', \"~&gt; 0.4.1.2\"\n  gem 'database_cleaner', \"~&gt; 0.6.7 \"\n  gem 'cucumber', \"~&gt; 0.10.2\"\n  gem 'spork', \"~&gt; 0.9.0\"\n  gem 'launchy', \"~&gt; 0.4.0\"\n  gem 'machinist', \"~&gt; 1.0.6\"\n  gem 'factory_girl_rails', \"1.7.0\"\n  gem 'faker', \"~&gt; 0.9.5\"\n  gem 'email_spec'  \n  gem 'rails-erd'  \n# To use debugger (ruby-debug for Ruby 1.8.7+, ruby-debug19 for Ruby 1.9.2+)\n  gem 'ruby-debug'\nend\n\ngroup :development do\n  gem \"hirb\"\n  gem \"awesome_print\"\nend\n</code></pre>\n\n<p>This configuration is not working for users_spec.rb on the development and test environment. I run spork using bundle exec spork while I am running the test and the </p>\n\n<p>How can I use rspec on development and test environments? What am I missing on the configuration? Do I need any command before running the tests?</p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13297572,"title":"Exception not caught by assertRaises","body":"<p>I have a unit test that checks for exception in constructor:</p>\n\n<pre><code>import unittest\nfrom jaboci import Jacobi\n\nclass TestJacobi(unittest.TestCase):\n\n    def test_even(self):\n        a = 11\n        n = 12\n        Jacobi(a, n)\n        self.assertRaises(ValueError, Jacobi, a, n)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>The class under test:</p>\n\n<pre><code>class Jacobi:\n\n    def __init__(self, a, n):\n        self.a = a\n        self.n = n\n        if n % 2 == 0:\n            raise ValueError(\"N must be odd.\")\n</code></pre>\n\n<p>When i run unittest with <code>-m unittest discover</code>, the test fails:</p>\n\n<pre><code>E\n======================================================================\nERROR: test_even (test_jacobi.TestJacobi)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/prasopes/prg/python/PycharmProjects/jacobi_symbol/test_jacobi.py\", line 9, in test_even\n    Jacobi(a, n)\n  File \"/home/prasopes/prg/python/PycharmProjects/jacobi_symbol/jaboci.py\", line 7, in __init__\n    raise ValueError(\"N must be odd.\")\nValueError: N must be odd.\n\n----------------------------------------------------------------------\nRan 1 test in 0.000s\n\nFAILED (errors=1)\n</code></pre>\n"},{"tags":["unit-testing","grails","selenium","junit","spock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13297403,"title":"Recommended Unit Testing Systems for Grails?","body":"<p>I've recently started working with <a href=\"http://www.grails.org/\" rel=\"nofollow\">Grails</a> and I've gone through the basics on getting started. However, I'm a bit unsure how to make an informed decision on a testing environment / system. There are so many testing plugin choices I have no idea which one to choose.</p>\n\n<blockquote>\n  <p><em><strong>What is the Most Comprehensive Testing Framework for Grails Apps</em>?</strong></p>\n</blockquote>\n"},{"tags":["c++","linux","windows","unit-testing","code-coverage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13194741,"title":"Has anyone successfully ported COVTOOL to a windows build environment?","body":"<p>COVTOOL is a C++ linux code coverage tool.</p>\n\n<p>As the title question suggests, I'm pushing the odds here by trying to make COVTOOL work on windows environment.</p>\n\n<p>Has anyone else succeeded with this ? </p>\n"},{"tags":["c++","unit-testing","unicode"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":613,"score":5,"question_id":6136800,"title":"Unicode test strings for unit tests","body":"<p>I need some Utf32 test strings to exercise some cross platform string manipulation code. I'd like a suite of test strings that exercise the utf32 &lt;-> utf16 &lt;-> utf8 encodings to validate that characters outside the BMP can be transformed from utf32, through utf16 surrogates, through utf8, and back. properly.</p>\n\n<p>And I always find it a bit more elegent if the strings in question arn't just composed of random bytes, but are actually meaningful in the (various) languages they encode.</p>\n"},{"tags":["python","unit-testing","testing","mocking"],"answer_count":7,"favorite_count":17,"up_vote_count":25,"down_vote_count":0,"view_count":9258,"score":25,"question_id":295438,"title":"How can one mock/stub python module like urllib","body":"<p>I need to test a function that needs to query a page on an external server using urllib.urlopen (it also uses urllib.urlencode). The server could be down, the page could change; I can't rely on it for a test.</p>\n\n<p>What is the best way to control what urllib.urlopen returns?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","asp.net-mvc-4","tdd"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":48,"score":1,"question_id":13296735,"title":"Ho to show value of TDD to a difficult Client","body":"<p>A client wants quality ASP.NET MVC 4 website but forces to cut corners to meet deadlines. In return the client is ready to compromise by talking out thing such as TDD and pair programming.</p>\n\n<p>I have already tried to make him aware on the quality going downwards. But it seems to be the least concern for the client.</p>\n\n<p>What things can I do to demonstrate how bad it will be if TDD is eliminated before the client starts eliminating other good practises for e.g DRY</p>\n"},{"tags":["c#","unit-testing","moles"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13276250,"title":"Mole HttpRequest.Files","body":"<p>I am unit testing a web application and I am using Moles to mock up a <code>HttpRequest</code>.  I am now trying to test some file upload functionality that uses <code>HttpRequest.Files</code>, so I am trying to find the correct way to mole out that functionality.  This is what I have tried so far, but calls to the <code>HttpRequest.Files.Count</code> are throwing a null reference exception.  I am guessing that I am not approaching something correctly in how I am constructing the <code>HttpFileCollection</code> object.  Can anyone provide some guidance or the correct way to mole out the <code>HttpFileCollection</code> object?</p>\n\n<pre><code> HttpRequest req = new HttpRequest(@\"C:\\SomeFile.txt\", \"http://localhost/VirtualPath/\", \"\");\n MHttpRequest mReq = new MHttpRequest(req)\n        {\n            InstanceBehavior = Microsoft.Moles.Framework.MoleBehaviors.Fallthrough,\n            FilesGet = () =&gt;\n                {\n                    HttpFileCollection collection = new HttpFileCollection();\n                    System.Web.Moles.MHttpFileCollection filecoll = new MHttpFileCollection(collection)\n                    {\n                        InstanceBehavior = Microsoft.Moles.Framework.MoleBehaviors.Fallthrough\n                    };\n\n                    System.Web.Moles.MHttpPostedFile file = new MHttpPostedFile();\n                    System.IO.MemoryStream ms = new System.IO.MemoryStream();\n                    Bitmap b = new Bitmap(100, 100);\n\n                    b.Save(ms, System.Drawing.Imaging.ImageFormat.Png);\n\n                    file.ContentLengthGet = () =&gt; { return (int)ms.Length; };\n                    file.ContentTypeGet = () =&gt; { return \"image/png\"; };\n                    file.FileNameGet = () =&gt; { return \"filename.png\"; };\n                    file.InputStreamGet = () =&gt; { return ms; };\n\n                    filecoll.ItemGetInt32 = value =&gt; { \n                        return file;\n                    };\n\n                    return filecoll;\n                }\n        };\n</code></pre>\n"},{"tags":["unit-testing","com","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13294412,"title":"throw COMException with unit test mocking","body":"<p>I am writing unit test for c# application that is communicating with COM component.\nIn the event handling there is code that catch COMException and check for its property ErrorCode.\nI am trying to mock that.\nBut seems there is no way to set the ErrorCode property of COMException.\nIs there a way around that?</p>\n"},{"tags":["unit-testing","ember.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13295363,"title":"how do i unit test an Ember Router?","body":"<p>i've looked at the unit testing for Ember.Router and noticed that it does not define any connectOutlets() on its routes.</p>\n\n<p>however, i want to understand how i should unit test my own extension of the Router in my app.  obviously i don't want all the dom elements instantiating for a unit test.  is there a way to unit test the Router in isolation?  some sort of 'headless' or 'testing' flag?</p>\n\n<p>or should i just concentrate on integration testing and put my router tests in there?</p>\n\n<pre><code> App.Router = Ember.Router.extend({})\n</code></pre>\n"},{"tags":["c#","visual-studio-2010","unit-testing","slowcheetah","xml-transform"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12866620,"title":"Using xml transformations in unit tests","body":"<h2>Background:</h2>\n\n<p>Currently we have around 10 unit/integration test projects that hit a database to do tests.  Each test class that hits the database inherits from a class called <code>IntegrationTest</code> which is in a seperate dll called <code>TestBase</code>. <code>TestBase</code> contains a configuration file (nhibernate_log4net.cfg.xml) that houses the connection string to the database. </p>\n\n<p>Our development team is a group of about 7 or 8.  If two team members were to run the unit tests at the same time there would be conflicts because a lot of the tests are adding and deleting data that is common across many tests.  This would cause tests to fail erroneously between the two developers.</p>\n\n<h2>Layout:</h2>\n\n<p><strong>TestBase.dll</strong><br>\nIntegrationTest.cs  (Contains <strong>[DeploymentItem(\"nhibernate_log4net.cfg.xml\"]</strong>)<br>\nnhibernate_log4net.cfg.xml<br>\nnhibernate_log4net.cfg.Developer 1.xml  (Transformation file)<br>\nnhibernate_log4net.cfg.Developer 2.xml  (Transformation file)<br>\n...</p>\n\n<p><strong>UnitTest.dll</strong><br>\nReferences -> <strong>TestBase.dll</strong><br>\nMyUnitTest.cs (Inherits from IntegrationTest in <strong>TestBase.dll</strong>)  </p>\n\n<h2>Problem:</h2>\n\n<p>My idea was to use <code>SlowCheetah</code> xml transformations on the configuration file in the <code>TestBase</code> dll for each developer in the team but the transformed file does not get copied to the <strong>Out</strong> directory of the unit test. The base configuration file (non transformed one) is the one that gets copied out to the <strong>Out</strong> directory.  I have a feeling it's because of the <code>[DeploymentItem(\"nhibernate_log4net.cfg.xml\")</code> attribute I have to use to get the config file out there in the first place.</p>\n\n<p><strong>Is there any way to use xml transformations on an xml config file that is included in a separate dll than the unit testing project?</strong></p>\n"},{"tags":["c++","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13256837,"title":"SOLVED - Unit Testing. Mocking of private member data","body":"<p><br>\n   I'm looking for the best practice for C++ codings style that will ensure ease of unit tests. The question comes from trying to implement a mock class for a private data member. The private data member is accessed in a few different methods in the class. So far all the examples I can find show how to write a mock class but not how to best write the code that will use both real and mocked objects. </p>\n\n<p>In the example below I'm not sure how to get mCustom from type MyOtherClass to my mock MockMyOtherClass. I suspect my approach is wrong and thus the question.</p>\n\n<pre><code>class MyClass{\n private:\n    MyOtherClass mCustom;\n\n public:\n};\n</code></pre>\n\n<p>[EDIT] <br>\nI went with a compiler directive and a added a new constructor.</p>\n\n<pre><code>#ifdef UNIT_TESTING\n #include \"mock.h\"\n#else\n  #include \"myotherclass.h\"\n#endif\n\nclass MyClass{\n     private:\n        MyOtherClass mCustom;\n\n     public:\n        MyClass(MyOtherClass pClass) {mCustom = pClass; }\n    };\n</code></pre>\n"},{"tags":["unit-testing","quartz.net-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2,"score":0,"question_id":13294421,"title":"Unit Testing: Quartz.net Fire trigger on demand","body":"<p>I am doing a Unit Testing for a scheduled job, I am using Quartz.net, I am new to this library. </p>\n\n<p>I need to force the trigger to fire on demand, so that the job get executed and I can retrieve the test results.\nI was using a <code>SimpleTriggerImpl</code>, and I tried to fire the trigger by setting <code>trigger.StartTimeUtc = DateTime.UtcNow</code>, but the job Execute method isn't being called.\nHow can I do this?</p>\n\n<p>Thanks</p>\n"},{"tags":["unit-testing","hadoop"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13288214,"title":"how to unit test Hadoop Writable","body":"<p>I Implemented <code>WritableComparable</code> of my own but I canoot find good wasy to unit test <code>write</code> and <code>readFields</code> methods.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["unit-testing","junit","jpa-2.0","ejb-3.1","openjpa"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13285512,"title":"How do I test OpenJPA persistent classes from another Eclipse project in a JUnit Test","body":"<p>So here's what I'm trying to do and stuck at: </p>\n\n<p>I have a shared Eclipse Java project with @Entity (EJB 3.1) classes that is used by a couple of other Eclipse WebApp projects. This project itself has no persistence.xml! The other WebApp projects that use this project declare their own persistence.xml under WebContent/META-INF and refer to the JAR of this project in their persistence.xml using the jar-file tag. Of course the shared project's JAR is added as a deployment dependency in these WebApp projects and is placed under WEB-INF/lib.</p>\n\n<p>Now I am creating JUnit4 Testcases to test Stateless session beans in these WebApp projects. I'm using Apache TomEE 1.5.0 Plus and in the testcase I use a @Before method to start the OpenEJB container in Embedded mode using EJBContainer.createEJBContainer() method. For this to work properly, I have created an alternate test.persistence.xml (that uses a different datasource to an HSQL memory db and creates the tables using forward mapping). I have placed this in META-INF of the src folder and in the @Before method, I set the \"openejb.altdd.prefix\" to \"test\" so that the alternate test.persistence.xml is read. All this setup is working.</p>\n\n<p>The trouble is that as soon as OpenJPA 2.2.0 starts, it complains that there are no persistent classes from the shared project! This is because, the jar-file tag in test.persistence.xml refers to a jar that doesn't exist! When Eclipse deploys the other WebApp projects, it creates the JAR under WEB-INF/lib and the actual persistence.xml refers to the jar under that path! However, I do not find any such JAR when running a JUnit testcase.</p>\n\n<p>So how do I refer to this JAR or the classes in the shared project in the test.persistence.xml without making the testcase itself overly dependent on deployment structure or any specific hard-coded path! This testcase will eventually be committed to the repository and hence must be such that any dev checking it out can simply run it.</p>\n\n<p>Any pointers in the right direction would be greatly appreciated!</p>\n"},{"tags":["sql-server","unit-testing","fulltext-index","population"],"answer_count":4,"favorite_count":1,"up_vote_count":10,"down_vote_count":0,"view_count":4498,"score":10,"question_id":2727911,"title":"How can I know when SQL Full Text Index Population is finished?","body":"<p>We are writing unit tests for our ASP.NET application that run against a test SQL Server database. \nThat is, the ClassInitialize method creates a new database with test data, and the ClassCleanup deletes the database. We do this by running .bat scripts from code.</p>\n\n<p>The classes under test are given a connection string that connects to the unit test database rather than a production database.</p>\n\n<p>Our problem is, that the database contains a full text index, which needs to be fully populated with the test data in order for our tests to run as expected.</p>\n\n<p>As far as I can tell, the fulltext index is always populated in the background. I would like to be able to either:</p>\n\n<ol>\n<li>Create the full text index, fully populated, with a synchronous (transact-SQL?) statement, or</li>\n<li>Find out when the fulltext population is finished, is there a callback option, or can I ask repeatedly?</li>\n</ol>\n\n<p>My current solution is to force a delay at the end the class initialize method - 5 seconds seems to work - because I can't find anything in the documentation.</p>\n"},{"tags":["java","unit-testing","sockets","tdd","easymock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13293761,"title":"What are good ways to test TCP client-server communication using EasyMock?","body":"<p>I read this link on testing client socket <a href=\"http://stackoverflow.com/questions/5577274/testing-java-sockets\">here</a> using EasyMock. However, it seems like the server socket is already written and mocking it is not necessary. </p>\n\n<p>Are there ways to test client with mocking Server, and testing Server with mocking client? Those two should be independent? </p>\n"},{"tags":["java","unit-testing","design","junit","integration-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13293101,"title":"A Nice/Deadly Unimplementable Strategy for Building JUnit Integration Tests?","body":"<p>The system I am working has (fortunately) JUnit unit tests already, which are covering some percentage of the code functionality (Better than nothing, I suppose). </p>\n\n<p>The methods in the system are highly dependent to each other and the combination of the parameters that can  be sent to a method as an input is huge. Let's see an example:</p>\n\n<pre><code>public void showMessage (final Language language, final Applications apps, final UserID userId)\n</code></pre>\n\n<p>The above method can have more than 300,000 different messageboxes poping up, based on different apps and userIds. Apart from the fact that whether putting such huge pressure on a single method a couple of them at least, sounds resoanable or not (which IMO cannot be justified design-wise), we are encountering the fear of a bug which can cause huge problems.</p>\n\n<p>That being said, what we found is simply is as follows:</p>\n\n<ol>\n<li>Refactoring JUnit Unit Tests</li>\n<li>Extract a lot of objects in the method as parameters</li>\n<li>Create an Object Factory</li>\n<li>Feed the unit tests with different inputs created by the factory (brute-force test, maybe?)</li>\n<li>Check the outcome of the newly refactored tests</li>\n</ol>\n\n<p>So basically, the question is as follows:</p>\n\n<p>Creating Integration Tests on top of Unit Tests: Possibilities and Challenges? Is this a customized approach or this is a rational standard approach? Where to put such tests in both the project files and project build lifecycle, should they be built all the time to complete the build process?</p>\n\n<p>Any type of feedback/comment, both from JUnit implementation limitations and Design/Idea limitations.</p>\n"},{"tags":["python","unit-testing","heroku","continuous-integration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13285518,"title":"Continuous integration/Testing Python on Heroku","body":"<p>So I've been looking into ways to using Heroku for a small-scale personal project (Python Flask + MongoDB), however I can't seem to find much information on how to do simple continuos integration testing or simple unit testing on a Heroku staging instance. I feel that this would be necessary to make sure that everything will work in production, before actually making it public.</p>\n\n<p>There doesn't seem to be much information on as to how I could achieve this. There are a couple of CI addons that would help, but they currently work only with Ruby/RoR (<a href=\"https://www.tddium.com/\" rel=\"nofollow\">tddium</a>, <a href=\"https://www.railsonfire.com/\" rel=\"nofollow\">Rails on Fire</a>) and proper testing on Heroku seems like a problem that should already be solved by a number of people. <a href=\"https://devcenter.heroku.com/articles/buildpacks\" rel=\"nofollow\">Buildpacks</a> seem like a potential way to achieve what I need, but I'd rather use existing tools than re-invent the wheel myself. </p>\n\n<p>So the question is, what are my options?</p>\n"},{"tags":["java","unit-testing","maven","sonar","execution-time"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13293142,"title":"Very large unit test execution time in Sonar","body":"<p>I am investigating the unit test time execution in Sonar, and there are very big differences between the tests run from maven and the tests run from Sonar.</p>\n\n<p>For example, for a single Java test class I get:</p>\n\n<ul>\n<li>just maven: 1.5 sec</li>\n<li>maven with cobertura: 5.7 sec</li>\n<li>sonar: 16 sec</li>\n</ul>\n\n<p>Why is the difference between maven and Sonar so big?\nWhat other instrumentation does Sonar make that adds 10 sec to the execution time?</p>\n"},{"tags":["ruby","unit-testing","watir"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":19,"score":2,"question_id":13291372,"title":"Setting up Test Suite in Ruby","body":"<p>I am trying to setup a test suite in Ruby to automate the Testing of a WebUI (using Watir)</p>\n\n<p>The individual tests are fine and all run correctly, but I am having problems with the suite.</p>\n\n<p>Eg if one of my tests is (where BaseTestClass extends Test::Unit::TestCase)</p>\n\n<pre><code>class Test3_1_3_1_2 &lt; BaseTestClass\n  def testHeightOfMainPanel\n    assert(false, 'Not implemented')\n  end\nend\n</code></pre>\n\n<p>In my RunAllTests script I am trying to do the following</p>\n\n<pre><code>require 'test/unit'\n\nTest::Unit.at_start do\n  #Lets create our own user for these tests\n  createCCUser(User, Password)\nend\n\nTest::Unit.at_exit do\n  #Delete our own user\n  deleteUser(User)\nend\n\n\nDir[\"./**/Test*.rb\"].each{|s|\n  puts s.to_s\n  load s\n}\n</code></pre>\n\n<p>So basically what I want to do is create a new user at the start of the tests, run the tests and then delete the user. This is necessary because the system is a single sign on (kinda) and if we used the same user for everyone, there is no guarantee that the tests will execute properly (ie someone else could run the test at the same time and then the first user would be kicked out)</p>\n\n<p>The errors I am getting are:\nundefined method <code>at_start'\nand\nprivate method</code>at_exit' called </p>\n\n<p>I know I am doing something wrong, but being very new to Ruby it is hard to see where.\nBasically what I need is a way to perform some setup run all the tests that can be found, and then do a cleanup. Each test has its own separate setup and teardown methods</p>\n\n<p>I should also add, I have tried many variations of the same above, eg</p>\n\n<pre><code>require 'test/unit'\n\nclass Temp &lt; Test::Unit::TestCase\n  Test::Unit.at_exit do\n    #Delete our own user\n    deleteUser(User)\n  end\n\n\n  Test::Unit.at_start do\n    #Lets create our own user for these tests\n    createCCUser(User, Password)\n  end\n\n  Dir[\"./**/Test*.rb\"].each { |s|\n    puts s.to_s\n    load s\n  }\nend\n</code></pre>\n\n<p>And I still don't get it. Any help would be appreciated</p>\n"},{"tags":["unit-testing","cmake","ctest"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":205,"score":2,"question_id":8716199,"title":"Running Nested Tests with CTest","body":"<p>I have a small, but non-trivial project, which for architectural reasons is built as three separete projects, they are inter-dependent, so unless I'm particularly focused, or improving test-coverage having spotted a hole, it makes sense for me to work from the proejct root.</p>\n\n<p>The layout is as such:</p>\n\n<pre><code>/CMakeLists.txt\n/build/\n/src/command-line-application/\n/src/command-line-application/CMakeLists.txt\n/src/command-line-application/build/\n/src/command-line-application/src/\n/src/command-line-application/tests/\n/src/command-line-application/include/\n/src/vlc-plugin/\n/src/vlc-plugin/src/\n/src/libmyproject/\n/src/libmyproject/CMakeLists.txt\n/src/libmyproject/build/\n/src/libmyproject/src/\n/src/libmyproject/tests/\n/src/libmyproject/include/\n/src/libmyotherproject/\n/src/libmyotherproject/CMakeLists.txt\n/src/libmyotherproject/build/\n/src/libmyotherproject/src/\n/src/libmyotherproject/tests/\n/src/libmyotherproject/include/\n</code></pre>\n\n<p>A word on the architecture, <code>libmyproject</code> is the real meat of my application, it's built this way because a CLI is a horrible way to ship code to end-users, as a library, it is also used from C# and Objective-C applications. (and all that works as expected)</p>\n\n<p>The <code>libmyotherproject</code> is some platform specific support code, not directly connected to <code>libmyproject</code>, it has a few unit tests.</p>\n\n<p>The <code>vlc-plugin</code> isn't important here, except to show that not everything in <code>/src/*/</code> has unit tests.</p>\n\n<p>My workflow is typically to hack on the CLI app until something useful crops up, and then refactor it into the library, and make sure it's portable.</p>\n\n<p>When I'm working in <code>/src/*/build/</code>, typically running <code>cmake ../ &amp;&amp; make &amp;&amp; ctest --output-on-failure</code>, everything works.</p>\n\n<p>When I'm working in <code>/build</code>, and run <code>cmake</code>, the individual components are built correctly (using <code>add_subdirectories()</code>) from CMake, but <code>CTest</code> does not recursively find the tests.</p>\n\n<p>The documentation for <code>CTest</code> is a little unhelpful in what you should do:</p>\n\n<pre><code>USAGE\n         ctest [options]\n\nDESCRIPTION\n       The  \"ctest\"  executable is the CMake test driver program.  CMake-generated build trees created for\n       projects that use the ENABLE_TESTING and ADD_TEST commands have testing support.  This program will\n       run the tests and report results.\n</code></pre>\n\n<p>I would have expected since the <code>ADD_TEST()</code> calls live in <code>/src/libmyotherproject/tests/CMakeLists.txt</code>, that they would be run? (They are at least compiled when I run <code>cmake</code> from <code>/build/</code>)</p>\n\n<p>I hope I have been able to provide enough informaton, thank you.</p>\n"},{"tags":["c#","unit-testing","mocking","moq"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13291760,"title":"moq: When using Setup(), how is equality of method parameters determined?","body":"<p>I'm using the <code>Setup()</code> method to set up the behaviour of a mocked instance of an interface.</p>\n\n<p>The method I'm setting up (let's call it <code>DoSomething()</code>) accepts an instance of a class (let's call the class <code>Foo</code>).</p>\n\n<pre><code>Foo foo = // Existing foo instance\nMock&lt;IMyInterface&gt; mock = new Mock&lt;IMyInterface&gt;();\nmock.Setup(x =&gt; x.DoSomething(foo)).Returns(1);\n</code></pre>\n\n<p>The problem I'm having is that when I use the mock, it never matches the setup, so never returns 1. I have overridden <code>Equals()</code> and <code>GetHashCode()</code> for <code>Foo</code>.</p>\n\n<p>Can anyone help? How does Moq determine whether the parameters provided to a set up method are equal or not?</p>\n"},{"tags":["ios","security","unit-testing","ios-simulator","keychain"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":97,"score":4,"question_id":13087175,"title":"Keychain Services API fails with errSecNotAvailable in iphonesimulator 6.0","body":"<p>Calls to the the Keychain Services fail with <strong>errSecNotAvailable</strong> when executing a target using the command line tools and the iphone simulator is set to Hardware version 6.0 (10A403). If I change the simulator version to other previous version (4.3, 5.0, 5.1) and re-execute using the same command line script the calls succeed.</p>\n\n<p>I'm running latest XCode 4.5 and the command line tools were downloaded from within XCode.</p>\n\n<p>To reproduce this error just do the following:</p>\n\n<ol>\n<li>Setup an ios library project with a OCUnit target</li>\n<li>Set Base SDK to 6.0</li>\n<li>Set iOS Deployment Target to 4.3</li>\n<li>Copy and paste the code st the end of the post into the test project (it will only try to store a password and retrieve it)</li>\n<li>Add the Security.framework to the OCUnit target</li>\n</ol>\n\n<p>Execute the OCUnit target in XCode and see the test pass with whatever Hardware Version is set in the iphone simulator (just change it between executions).</p>\n\n<p>Execute the OCUnit target from the command line using:</p>\n\n<pre><code>xcodebuild -target TARGET_NAME_HERE -sdk iphonesimulator -configuration Release TEST_AFTER_BUILD=YES\n</code></pre>\n\n<p>with iphone simulator set to Hardware Version 6.0 and the test will <strong>fail</strong>. If you change the iphone simulator Hardware Version to 4.3, 5.0 or 5.1 and execute the command line script again the test will <strong>succeed</strong>.</p>\n\n<p>Is this a command line tool problem? an iphone simulator problem? an OCUnit target running from the command line problem?</p>\n\n<p>Who likes having unit tests that only pass when comets are aligned??</p>\n\n<p>Any ideas?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#define KEYCHAIN_ITEM_ATTRIBUTES (id)kSecClassGenericPassword, kSecClass, @\"MyService\", kSecAttrService, @\"MyPassword\", kSecAttrAccount\n\nconst NSString* MyPassword = @\"blabla\";\n\n- (void)testExample\n{\n    // remove previous keychain item\n    OSStatus status = SecItemDelete((CFTypeRef)[NSDictionary dictionaryWithObjectsAndKeys:KEYCHAIN_ITEM_ATTRIBUTES, nil]);\n    NSLog(@\"SecItemDelete status:%ld\",status);\n    NSParameterAssert(status == errSecSuccess || status == errSecItemNotFound);\n\n    // add keychain item with new value\n    NSData *data = [MyPassword dataUsingEncoding:NSUTF8StringEncoding];\n    status = SecItemAdd((CFTypeRef)[NSDictionary dictionaryWithObjectsAndKeys:KEYCHAIN_ITEM_ATTRIBUTES, data, kSecValueData, nil], NULL);\n    NSLog(@\"SecItemAdd status:%ld\",status);\n    NSParameterAssert(status == errSecSuccess);\n\n    // get password\n    status = SecItemCopyMatching((CFTypeRef)[NSDictionary dictionaryWithObjectsAndKeys:KEYCHAIN_ITEM_ATTRIBUTES,\n                                             kSecMatchLimitOne, kSecMatchLimit, kCFBooleanTrue, kSecReturnData, nil], (CFTypeRef *)&amp;data);\n    NSLog(@\"SecItemCopyMatching status:%ld\",status);\n    NSParameterAssert(status == errSecSuccess);\n\n    if (status == errSecItemNotFound)\n        NSLog(@\"SecItemCopyMatching status:%ld\", status);\n    else\n        NSLog(@\"SecItemCopyMatching result:%@\",[[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease]);\n}\n</code></pre>\n\n<p>Regarding securityd daemon not being launched, I can check it IS being launched, using </p>\n\n<pre><code>launchctl list | grep securityd\n</code></pre>\n\n<p>after the simulator starts, and getting</p>\n\n<pre><code>-   0   com.apple.iPhoneSimulator:com.apple.securityd\n</code></pre>\n\n<p>I also tried stopping this securityd daemon and launch another manually... I looked at GTM's RunIPhoneUnitTest.sh script for a simple line I could use, but when I try this</p>\n\n<pre><code>launchctl submit -l ios6securityd -- /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/libexec/securityd\n</code></pre>\n\n<p>gives me a -5 status code on that daemon.</p>\n"},{"tags":["php","unit-testing","gearman"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":542,"score":4,"question_id":7078282,"title":"Remove all Gearman jobs from the Gearman Job Server","body":"<p>Is there a way to remove all Gearman jobs from the Gearman Job Server? I have a PHP application that runs Gearman jobs in the background. For my unit tests I need to ensure that a) there are no jobs waiting for a worker that executes it and b) that there is no worker working. The latter is not that important because it is easy to kill the workers but the former--I don't know how to implement this.</p>\n"},{"tags":[".net","visual-studio","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12674606,"title":"Can Visual Studio 2012 run unit tests in parallel?","body":"<p>Can Visual Studio 2012 run unit tests in parallel? Visual Studio 2010 has an option to do this (see <a href=\"http://blogs.msdn.com/b/vstsqualitytools/archive/2009/12/01/executing-unit-tests-in-parallel-on-a-multi-cpu-core-machine.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/vstsqualitytools/archive/2009/12/01/executing-unit-tests-in-parallel-on-a-multi-cpu-core-machine.aspx</a>) but I can't find anything similar in Visual Studio 2012.</p>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","testing","yii","tdd","input-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13284366,"title":"Where to test validation - in unit or functional test?","body":"<p>Where do you suggest to test validation?</p>\n\n<p>This is a functional test from Yii demos:</p>\n\n<pre><code>// test login process, including validation\n $this-&gt;clickAndWait('link=Login');\n $this-&gt;assertElementPresent('name=LoginForm[username]');\n $this-&gt;type('name=LoginForm[username]','demo');\n $this-&gt;clickAndWait(\"//input[@value='Login']\");\n $this-&gt;assertTextPresent('Password cannot be blank.');\n</code></pre>\n\n<p>But validation testing against each wrong case (such as \"password is too long\" or \"email is incorrect\") would take vaste amount of time. So, why not to test the validation only in unit tests?</p>\n"},{"tags":["unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13289793,"title":"An Unit test framework (xUnit) from scratch?","body":"<p>I am developing for a local russian ERP system. It is like SAP or Axapta I guess. I'm thinking about implementing a xUnit test framework for this system. I don't know where to start from. I also want to implement continious integration in the development process. I am former java-developer, I know what is TDD, and I used JUnit. But I never went into details of how it works inside and how the interaction with CI tools is made.</p>\n\n<p>Does anyone have any experience of creating an xUnit test framework from scratch? I believe it is possible to do for our system since it is implemented for example for SAP ABAP language which is an uncommon language.</p>\n\n<p>Thank you.</p>\n"},{"tags":["unit-testing","mocking","moq","stubbing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13287860,"title":"Unit Test Assert against end result or verifying whether the parameters were called using Moq","body":"<p>Below is a class (Class1) that I want to test, but I'm not fully satisfied with my Unit Test. Please see below code samples.</p>\n\n<p>System Under Test</p>\n\n<pre><code>public interface IRepository {\n    string GetParameter(int id);\n}\n\npublic class Repository {\n    public string GetParameter(int id) {\n        return \"foo\";\n    }\n}\n\npublic class ErrorInfo {\n    public string ErrorCodes { get; set; }\n}\n\npublic interface IErrorProvider {\n    ErrorInfo BuildErrorMessage(string errorCodes);\n}\n\npublic class ErrorProvider {\n    public ErrorInfo BuildErrorMessage(string errorCodes) {\n        return new ErrorInfo(){ErrorCodes = errorCodes};\n    }\n}\n\npublic class Class1 {\n    private readonly IRepository _repository;\n    private readonly IErrorProvider _errorProvider;\n    public Class1(IRepository repository, IErrorProvider errorProvider) {\n        _repository = repository;\n        _errorProvider = errorProvider;\n    }\n\n    public List&lt;ErrorInfo&gt; GetErrorList(int id) {\n        var errorList = new List&lt;ErrorInfo&gt;();\n        string paramName = _repository.GetParameter(id);\n\n        if (string.IsNullOrEmpty(paramName)) {\n            string errorCodes = string.Format(\"{0}, {1}\", 200, 201);\n            var error = _errorProvider.BuildErrorMessage(errorCodes);\n            errorList.Add(error);\n        }\n\n        return errorList;\n    }\n}\n</code></pre>\n\n<p>Unit Tests</p>\n\n<p>Below test passes and we check whether the correct error codes being used within the system under test.</p>\n\n<pre><code>[TestMethod]\npublic void GetErrorList_WhenParameterIsEmpty_ReturnsExpectedErrorCodes2() {\n        //Arrange\n        var stubRepo = new Mock&lt;IRepository&gt;();\n        stubRepo.Setup(x =&gt; x.GetParameter(It.IsAny&lt;int&gt;())).Returns(string.Empty);\n\n        var stubErrorMock = new Mock&lt;IErrorProvider&gt;();\n\n        const int id = 5;\n        var sut = new Class1(stubRepo.Object, stubErrorMock.Object);\n\n        //Act\n        var result = sut.GetErrorList(id);\n\n        //Verify\n        string verifiableErrorCodes = \"200, 201\";\n        stubErrorMock.Verify(x =&gt; x.BuildErrorMessage(verifiableErrorCodes));\n}\n</code></pre>\n\n<p>However I would prefer testing the end result. For example, I want to Assert against the error codes that have been used in the production code. Below test fails but I like to know your thoughts on how to Assert against the errorCodes that has been used in the system under test. </p>\n\n<pre><code>[TestMethod]\npublic void GetErrorList_WhenParameterIsEmpty_ReturnsExpectedErrorCodes1() {\n        //Arrange\n        var stubRepo = new Mock&lt;IRepository&gt;();\n        stubRepo.Setup(x =&gt; x.GetParameter(It.IsAny&lt;int&gt;())).Returns(string.Empty);\n\n        string expectedErrorCodes = \"200, 201\";\n        var stubErrorRepo = new Mock&lt;IErrorProvider&gt;();\n        stubErrorRepo.Setup(e =&gt; e.BuildErrorMessage(It.IsAny&lt;string&gt;()));\n\n        const int id = 5;\n        var sut = new Class1(stubRepo.Object, stubErrorRepo.Object);\n\n        //Act\n        var result = sut.GetErrorList(id);\n\n        //Assert\n        Assert.AreEqual(expectedErrorCodes, result.Single().ErrorCodes);\n}\n</code></pre>\n\n<p>What would be the correct way to test this error codes that has been used in the system?</p>\n"},{"tags":["python","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":179,"score":0,"question_id":3045657,"title":"unittest in python: ignore an import from the code I want to test","body":"<p>I have a python program that imports pythoncom (and uses pythoncom.CoCreateInstance from it). I want to create a unittest for the program logic without it importing pythoncom (so I can run the test on Linux as well).</p>\n\n<p>What options are there? Can I do it without modifying the system under test?</p>\n\n<p>What I found so far:</p>\n\n<pre><code>sys.modules[\"pythoncom\"] = \"test\"\nimport module_that_imports_pythoncom\n</code></pre>\n\n<p>My problem with it is if I have:</p>\n\n<pre><code>from pythoncom.something import something\n</code></pre>\n\n<p>I'll get:</p>\n\n<pre><code>ImportError: No module named something.something\n</code></pre>\n\n<p>And <code>sys.modules[\"something.something\"]</code> or <code>sys.modules[\"pythoncom.something.something\"]</code> doesn't work.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","unit-testing","testing","command-line-arguments","py.test"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13275738,"title":"Can't get pytest to understand command-line arguments on setups","body":"<p>So I have been trying to get pytest to run selenium tests on different environments based on some command-line argument. But it keeps throwing this error:</p>\n\n<pre><code>TypeError: setup_class() takes exactly 2 arguments (1 given)\n</code></pre>\n\n<p>It seems that it is understanding that <code>setup_class</code> takes 2 arguments, but <code>host</code> is not being passed. Here's the code for <code>setup_class</code>:</p>\n\n<pre><code>def setup_class(cls, host):\n        cls.host = host\n</code></pre>\n\n<p>And here is the conftest.py file:</p>\n\n<pre><code>def pytest_addoption(parser):\n    parser.addoption(\"--host\", action=\"store\", default='local',\n        help=\"specify the host to run tests with. local|stage\")\n\n@pytest.fixture(scope='class')\ndef host(request):\n    return request.config.option.host\n</code></pre>\n\n<p>What is strange is that <code>host</code> is being seen by the functions (so if I make a test_function and pass host as a parameter, it gets it just fine), it is just the <code>setup</code> fixtures that are not working. </p>\n\n<p>I looked around and found this, <a href=\"http://stackoverflow.com/questions/11358437/pytest-use-funcargs-inside-setup-module\">pytest - use funcargs inside setup_module</a> but that doesn't seem to be working (and it is outdated since 2.3. </p>\n\n<p>Does anyone know what I'm doing wrong? Using py.test 2.3.2. </p>\n\n<p>Thanks</p>\n"},{"tags":["c#",".net","unit-testing","sockets","tdd"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13283480,"title":"How to write unit test for asynchronous (socket) code that includes ManualResetEvent.WaitOne()?","body":"<p>I am playing around with a socket server and try to work according to the Test Driven Development pattern.</p>\n\n<p>There's a working test for the socket creation method, but my test hangs due to the fact that I have a ManualResetEvent.WaitOne() so that my socket waits for a connection before creating another one.</p>\n\n<p>Here's the code block to test:</p>\n\n<pre><code>ManualResetEvent allDone = new ManualResetEvent(false);\npublic void StartListening()\n{\n    allDone.Reset();\n\n    //Inform on the console that the socket is ready\n    Console.WriteLine(\"Waiting for a connection...\");\n\n    /* Waits for a connection and accepts it. AcceptCallback is called and the actual\n     * socket passed as AsyncResult\n     */\n    listener.BeginAcceptTcpClient(\n        new AsyncCallback(AcceptCallback),\n        listener);\n\n    allDone.WaitOne();\n}\n</code></pre>\n\n<p>And here's the test method which hangs at \"networkChannel.StartListening();</p>\n\n<pre><code>[TestMethod]\npublic void NetworkChannel_IsAcceptingConnectionsAsynchronously()\n{\n    ITcpClient client = MockRepository.GenerateMock&lt;ITcpClient&gt;();\n    ITcpListener listener = MockRepository.GenerateMock&lt;ITcpListener&gt;();\n    IAsyncResult asyncResult = MockRepository.GenerateMock&lt;IAsyncResult&gt;();\n\n    listener.Expect(x =&gt; x.BeginAcceptTcpClient(null, null)).IgnoreArguments().Return(asyncResult);\n    listener.Expect(x =&gt; x.EndAcceptTcpClient(asyncResult)).Return(client);\n\n    NetworkChannel networkChannel = new NetworkChannel(listener);\n\n    networkChannel.StartListening();\n    //Some more work... fake callback etc., verfify expectations,...\n}\n</code></pre>\n\n<p>If I comment all the manualresetevents, the test passes just fine but this cannot be the solution because the server tries to create duplicate sockets continuously ;-)</p>\n\n<p>Any hints for me? Would be very much appreciated!</p>\n\n<p>Regards,\nMartin</p>\n"},{"tags":["java","unit-testing","junit","data-driven-tests"],"answer_count":11,"favorite_count":6,"up_vote_count":5,"down_vote_count":0,"view_count":4578,"score":5,"question_id":1822315,"title":"Data-driven tests with jUnit","body":"<p>What do you use for writing data-driven tests in jUnit?</p>\n\n<p>(My definition of) a data-driven test is a test that reads data from some external source (file, database, ...), executes one test per line/file/whatever, and displays the results in a test runner as if you had separate tests - the result of each run is displayed separately, not in one huge aggregate.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13285224,"title":"Cache memory does not update but my database updates","body":"<p>I have a problem in my test case for create, edit, delete. Specifically in my edit part. Here's the code.</p>\n\n<p>Test Case:</p>\n\n<pre><code>[TestClass]\npublic class UserCRUD\n{\n    [TestMethod]\n    public void TestMethod1()\n    {\n        taskModelContainer db = new taskModelContainer();\n        TaskMgr.Models.User UserEntity = new TaskMgr.Models.User();\n        UserController User = new UserController();\n        try\n        {\n            string Username = \"789zxc@t.cm\";\n            string Password = \"sdff34\";\n            string Role = \"User\";\n            string Name = \"lykers\";\n            int subsiteID = 1;\n\n            UserEntity.Username = Username;\n            UserEntity.Password = Password;\n            UserEntity.Role = Role;\n            UserEntity.Name = Name;\n            UserEntity.subsiteID = subsiteID;\n\n            ActionResult result = User.Create(UserEntity);\n\n            int id = Convert.ToInt32(User.ViewBag.id);\n            User Users = db.Users.Single(e =&gt; e.userID == id);\n\n            Assert.AreEqual(UserEntity.Username, Users.Username);\n            Assert.AreEqual(UserEntity.Password, Users.Password);\n            Assert.AreEqual(UserEntity.Role, Users.Role);\n            Assert.AreEqual(UserEntity.Name, Users.Name);\n            Assert.AreEqual(UserEntity.subsiteID, Users.subsiteID);\n\n            //Edit\n            //var qry = from e in db.Users orderby e.userID descending select e.userID;\n            //int eID = qry.First();\n\n\n            UserEntity.userID = id;\n            UserEntity.Username = \"dfsd56@y.c\";\n            UserEntity.Password = \"asc45k\";\n            UserEntity.Role = \"Administrator\";\n            UserEntity.Name = \"sfscf\";\n            UserEntity.subsiteID = 3;\n\n            ActionResult result2 = User.Edit(UserEntity);\n\n\n            //set viewbag to int\n            //int id1 = Convert.ToInt32(User.ViewBag.id);\n            //return data from database\n            User Users1 = db.Users.Single(e =&gt; e.userID == id);\n\n            //Users1.Username = UserEntity.Username;\n            //Users1.Password = UserEntity.Password;\n            //Users1.Role = UserEntity.Role;\n            //Users1.Name = UserEntity.Name;\n            //Users1.subsiteID = UserEntity.subsiteID;\n\n            Assert.AreEqual(UserEntity.userID, Users1.userID);\n            Assert.AreEqual(UserEntity.Username, Users1.Username);\n            Assert.AreEqual(UserEntity.Password, Users1.Password);\n            Assert.AreEqual(UserEntity.Role, Users1.Role);\n            Assert.AreEqual(UserEntity.Name, Users1.Name);\n            Assert.AreEqual(UserEntity.subsiteID, Users1.subsiteID);\n\n            //delete\n            //int userID = eID;\n        }\n        finally\n        {\n            ActionResult result3 = User.DeleteConfirmed(UserEntity.userID);\n\n            var del = from e in db.Users where e.userID == UserEntity.userID select e;\n            var delete = del.Count();\n\n            Assert.AreEqual(0, delete);\n        }\n    }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(User user)\n{\n    if (ModelState.IsValid)\n    {\n        db.Entry(user).State = EntityState.Modified;\n        db.SaveChanges();\n        //var qry = from e in db.Users orderby e.userID descending select e.userID;\n        //int eID = qry.First();\n        //ViewBag.id = user.userID;\n        return RedirectToAction(\"Index\");\n    }\n    ViewBag.subsiteID = new SelectList(db.Subsites, \"subsiteID\", \"subsite\", user.subsiteID);\n    return View(user);\n}\n</code></pre>\n\n<p>Whenever I go through <code>Assert.AreEqual(UserEntity.Username, Users1.Username);</code>, I'm receiving an error message that says <code>UserEntity.Username</code> does not match <code>Users1.Username</code>. Which is true whenever I hover those fields.</p>\n\n<p>Could someone/anyone help me figure out how to update the cache memory? What line of code/s should I use? In addition, I use DbContext. Not ObjectContext.</p>\n"},{"tags":["unit-testing","jersey"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13283542,"title":"What's the difference between the different Jersey test containers?","body":"<p>According to <a href=\"http://jersey.java.net/nonav/apidocs/latest/jersey/jersey-test-framework/jersey-test-framework-core/com/sun/jersey/test/framework/JerseyTest.html\" rel=\"nofollow\">http://jersey.java.net/nonav/apidocs/latest/jersey/jersey-test-framework/jersey-test-framework-core/com/sun/jersey/test/framework/JerseyTest.html</a> users may choose between two kinds of test containers:</p>\n\n<ol>\n<li>Low-level container that does not support servlets</li>\n<li>Web-based container that does support servlets</li>\n</ol>\n\n<p>I have the following questions:</p>\n\n<ol>\n<li>What's the advantage/disadvantage of each kind of container? For example, I assume low-level containers are faster but are missing some sort of functionality.</li>\n<li>What is meant by the fact that low-level containers do not support servlets? I thought that JAX-RS is based on top of Servlets. What aren't low-level containers able to do?</li>\n</ol>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>Upon further research I discovered that low-level containers are faster but they really run without servlets. When clients make requests,a the appropriate Resources are constructed and the response is passed back to the client, all in-memory. This is similar to running an embedded database versus a conventional network-based JDBC connection.</p>\n\n<p>There is no mechanism to supply a ServletContextListener, register servlets or filters. I'm guessing the request scope isn't supported either.</p>\n\n<p>My question is, can you really test anything meaningful under these restrictions?</p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13265532,"title":"How to skip tests containing certain text in their docstring?","body":"<p>I would like to store hints inside each test method's docstring, so the testloader can include or exclude the test based on those hints. Something like this:</p>\n\n<pre><code>def test_login_with_valid_credentials(self):\n    '''#functional #security #nondestructive'''\n    # code goes here\n</code></pre>\n\n<p>Then the testloader would discover all tests containing the substring '#functional' or whatever.</p>\n\n<p>I'm trying to avoid using decorators for this purpose, because I think using docstrings would be more flexible. (Maybe I'm wrong.)</p>\n\n<p>Being new to nose, I would appreciate any help. Thanks!</p>\n"},{"tags":["java","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13282042,"title":"Testing no modifier method in Java using junit","body":"<p>I have the following method with no modifier declared exactly in my Column class.</p>\n\n<pre><code>float maximumActiveDutyCycle(ArrayList&lt;Column&gt; columns)\n{\n    // TODO: change public back to default\n    float maximumActiveDutyCycle = 0.0f;\n    for (Column column : columns)\n    {\n        if (column.activeDutyCycle &gt; maximumActiveDutyCycle)\n        {\n            maximumActiveDutyCycle = column.activeDutyCycle;\n        }\n    }\n    return maximumActiveDutyCycle;\n}\n</code></pre>\n\n<p>But I also have the following test method in class TestColumn. I was wondering if someone could tell me how I should test my method since I don't know how to access it from the Test class. Thanks!</p>\n\n<pre><code>public void testMaximumActiveDutyCycle()\n{\n    this.column00.setActiveDutyCylce(1.1f);\n    this.column01.setActiveDutyCylce(1.3f);\n    this.column33.setActiveDutyCylce(1.35f);\n    this.column57.setActiveDutyCylce(1.355f);\n    Set&lt;Column&gt; columns = new HashSet&lt;Column&gt;();\n    columns.add(column00);\n    columns.add(column01);\n    columns.add(column33);\n    columns.add(column57);\n\n\n\n}\n</code></pre>\n"},{"tags":["c#","unit-testing","asp.net-mvc-3","session"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":586,"score":2,"question_id":6990019,"title":"How can I properly Mock the KeysCollection in HttpSessionStateBase?","body":"<p>I setup this mock session object from the example here: <a href=\"http://stackoverflow.com/questions/340827/how-to-moq-an-indexed-property\">How to MOQ an Indexed property</a></p>\n\n<pre><code>/// &lt;summary&gt;\n/// HTTP session mockup.\n/// &lt;/summary&gt;\ninternal sealed class HttpSessionMock : HttpSessionStateBase\n{\n    private readonly Dictionary&lt;string, object&gt; objects = new Dictionary&lt;string, object&gt;();\n\n    public override object this[string name]\n    {\n        get { return (objects.ContainsKey(name)) ? objects[name] : null; }\n        set { objects[name] = value; }\n    }\n}\n</code></pre>\n\n<p>some sample code to produce an error...</p>\n\n<pre><code>var mockSession = new HttpSessionMock();\nvar keys = mockSession.Keys;\n</code></pre>\n\n<p>Error: <strong>The method or operation is not implemented.</strong></p>\n\n<p>I need to implement the Keys property, but can't create a KeysCollection object.</p>\n\n<p>What is the best way to do this?</p>\n\n<p>EDIT: [SOLUTION]</p>\n\n<p>I ended up changing the HttpSessionMock based on the answer given.  This is what I ended up with.  (I also added a reference to System.Linq).</p>\n\n<pre><code>internal sealed class HttpSessionMock : HttpSessionStateBase\n{\n    private readonly NameValueCollection objects = new NameValueCollection();\n\n    public override object this[string name]\n    {\n        get { return (objects.AllKeys.Contains(name)) ? objects[name] : null; }\n        set { objects[name] = (string)value; }\n    }\n\n    public override NameObjectCollectionBase.KeysCollection Keys\n    {\n        get { return objects.Keys; }\n    }\n}\n</code></pre>\n\n<p>note: this mock session will only store strings, not objects.</p>\n"},{"tags":["c++","unit-testing","googletest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13279015,"title":"What libraries do I need to link to build a googlemock example?","body":"<p>I'm able to compile googlemock v1.6.x in VS2010 and produce both release and debug libraries. In other words, the issue I have is NOT this <a href=\"http://stackoverflow.com/questions/3141835/googlemock-and-googletest-in-visual-studio-2010\">GoogleMock and GoogleTest in Visual Studio 2010</a></p>\n\n<p>Now I'm following the example here <a href=\"http://code.google.com/p/googlemock/wiki/ForDummies\" rel=\"nofollow\">http://code.google.com/p/googlemock/wiki/ForDummies</a>, and I'm having these errors. I did link the generated *.lib files and added the correct library directory in VS2010. So what else do I need to link?</p>\n\n<pre><code>1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __thiscall std::_Container_base12::~_Container_base12(void)\" (??1_Container_base12@std@@QAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __thiscall std::_Container_base12::_Container_base12(void)\" (??0_Container_base12@std@@QAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: void __thiscall std::_Container_base12::_Orphan_all(void)\" (?_Orphan_all@_Container_base12@std@@QAEXXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp; __thiscall std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::operator&lt;&lt;(int)\" (??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@H@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: virtual __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::~basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??1?$basic_ios@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: virtual __thiscall std::basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::~basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??1?$basic_iostream@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __thiscall std::basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;(class std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt; *)\" (??0?$basic_iostream@DU?$char_traits@D@std@@@std@@QAE@PAV?$basic_streambuf@DU?$char_traits@D@std@@@1@@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??0?$basic_ios@DU?$char_traits@D@std@@@std@@IAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: virtual __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::~basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??1?$basic_streambuf@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::gptr(void)const \" (?gptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::setg(char *,char *,char *)\" (?setg@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD00@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::setp(char *,char *)\" (?setp@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD0@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::eback(void)const \" (?eback@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::_Pninc(void)\" (?_Pninc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::setp(char *,char *,char *)\" (?setp@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD00@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::pbase(void)const \" (?pbase@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::epptr(void)const \" (?epptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::pptr(void)const \" (?pptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::gbump(int)\" (?gbump@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXH@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::egptr(void)const \" (?egptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::pbump(int)\" (?pbump@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXH@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??0?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: struct std::_Iterator_base12 * * __thiscall std::_Container_base12::_Getpfirst(void)const \" (?_Getpfirst@_Container_base12@std@@QBEPAPAU_Iterator_base12@2@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: void __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::setstate(int,bool)\" (?setstate@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __int64 __thiscall std::ios_base::width(__int64)\" (?width@ios_base@std@@QAE_J_J@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __int64 __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::sputn(char const *,__int64)\" (?sputn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAE_JPBD_J@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: int __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::sputc(char)\" (?sputc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAEHD@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt; * __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::rdbuf(void)const \" (?rdbuf@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_streambuf@DU?$char_traits@D@std@@@2@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: char __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::fill(void)const \" (?fill@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEDXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: int __thiscall std::ios_base::flags(void)const \" (?flags@ios_base@std@@QBEHXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __int64 __thiscall std::ios_base::width(void)const \" (?width@ios_base@std@@QBE_JXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp; __thiscall std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::flush(void)\" (?flush@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV12@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; * __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::tie(void)const \" (?tie@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_ostream@DU?$char_traits@D@std@@@2@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: bool __thiscall std::ios_base::good(void)const \" (?good@ios_base@std@@QBE_NXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: void __thiscall std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::_Osfx(void)\" (?_Osfx@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEXXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp; __thiscall std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::operator&lt;&lt;(unsigned int)\" (??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@I@Z) already defined in gmockd.lib(gtest-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::locale::facet * __thiscall std::locale::facet::_Decref(void)\" (?_Decref@facet@locale@std@@QAEPAV123@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;libcpmtd.lib(ios.obj) : error LNK2005: \"private: static void __cdecl std::ios_base::_Ios_base_dtor(class std::ios_base *)\" (?_Ios_base_dtor@ios_base@std@@CAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(ios.obj) : error LNK2005: \"public: static void __cdecl std::ios_base::_Addstd(class std::ios_base *)\" (?_Addstd@ios_base@std@@SAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"private: static void __cdecl std::locale::facet::_Facet_Register(class std::locale::facet *)\" (?_Facet_Register@facet@locale@std@@CAXPAV123@@Z) already defined in msvcprtd.lib(locale0_implib.obj)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"private: static class std::locale::_Locimp * __cdecl std::locale::_Getgloballocale(void)\" (?_Getgloballocale@locale@std@@CAPAV_Locimp@12@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"private: static class std::locale::_Locimp * __cdecl std::locale::_Init(void)\" (?_Init@locale@std@@CAPAV_Locimp@12@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"public: static void __cdecl std::_Locinfo::_Locinfo_ctor(class std::_Locinfo *,char const *)\" (?_Locinfo_ctor@_Locinfo@std@@SAXPAV12@PBD@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"public: static void __cdecl std::_Locinfo::_Locinfo_dtor(class std::_Locinfo *)\" (?_Locinfo_dtor@_Locinfo@std@@SAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(xlock.obj) : error LNK2005: \"public: __thiscall std::_Lockit::_Lockit(int)\" (??0_Lockit@std@@QAE@H@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(xlock.obj) : error LNK2005: \"public: __thiscall std::_Lockit::~_Lockit(void)\" (??1_Lockit@std@@QAE@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;LIBCMTD.lib(_file.obj) : error LNK2005: ___iob_func already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(setlocal.obj) : error LNK2005: __configthreadlocale already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dbgheap.obj) : error LNK2005: __free_dbg already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dbgheap.obj) : error LNK2005: __CrtSetCheckCount already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(osfinfo.obj) : error LNK2005: __open_osfhandle already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dosmap.obj) : error LNK2005: __errno already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: _exit already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: __exit already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: __cexit already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: __amsg_exit already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: __initterm_e already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(fflush.obj) : error LNK2005: _fflush already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(lconv.obj) : error LNK2005: _localeconv already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dbghook.obj) : error LNK2005: __crt_debugger_hook already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(mlock.obj) : error LNK2005: __lock already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(mlock.obj) : error LNK2005: __unlock already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(winxfltr.obj) : error LNK2005: __XcptFilter already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xi_a already defined in MSVCRTD.lib(cinitexe.obj)\n1&gt;LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xi_z already defined in MSVCRTD.lib(cinitexe.obj)\n1&gt;LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xc_a already defined in MSVCRTD.lib(cinitexe.obj)\n1&gt;LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xc_z already defined in MSVCRTD.lib(cinitexe.obj)\n1&gt;LIBCMTD.lib(hooks.obj) : error LNK2005: \"void __cdecl terminate(void)\" (?terminate@@YAXXZ) already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(invarg.obj) : error LNK2005: __invalid_parameter already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(invarg.obj) : error LNK2005: __invoke_watson already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(sprintf.obj) : error LNK2005: _sprintf_s already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(tolower.obj) : error LNK2005: _tolower already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(strtol.obj) : error LNK2005: _strtol already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(strtoq.obj) : error LNK2005: __strtoui64 already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dbgrptw.obj) : error LNK2005: __CrtDbgReportW already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(vsnprnc.obj) : error LNK2005: __vsnprintf_s already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(printf.obj) : error LNK2005: _printf already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(vprintf.obj) : error LNK2005: _vprintf already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LINK : warning LNK4098: defaultlib 'MSVCRTD' conflicts with use of other libs; use /NODEFAULTLIB:library\n1&gt;LINK : warning LNK4098: defaultlib 'LIBCMTD' conflicts with use of other libs; use /NODEFAULTLIB:library\n1&gt;LIBCMTD.lib(crt0.obj) : error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup\n1&gt;C:\\Documents and Settings\\fouts\\My Documents\\Visual Studio 2010\\GMockTest\\Debug\\GMockTest.exe : fatal error LNK1120: 1 unresolved externals\n1&gt;\n</code></pre>\n"},{"tags":["ruby","unit-testing","garbage-collection","jruby"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":9,"score":2,"question_id":13280233,"title":"JRuby Garbage Collection throws error when running Unit and Functional tests in Rails","body":"<p>I'm running into an issue with JRuby and Garbage Collection in my tests in a Rails app (3.2.8). When I run my unit tests, I'm just fine, but when I run both unit and functional or just functional, it tends to blow up with a strange stacktrace as below.</p>\n\n<p>I have no idea what is going on. This only started happening when I upgraded Rails and upgraded JRuby from 1.6.3 to 1.6.7.2.</p>\n\n<pre><code> /home/mbridges/.rbenv/versions/jruby-1.6.7.2/bin/jruby -I\"lib:test\" -I\"/home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib\" \"/home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb\" \"test/unit/**/*_test.rb\"\n   * WARNING: 'test: #channel_id should return the correct channel id. ' is already defined\n Loaded suite /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader\n Started\n ...............................................................................\n ...............................................................................\n ...............................................................................\n ...............................................................................\n ...............................................................................\n ...............................................................................\n ...........................................................\n\n Finished in 156.993 seconds.\n\n 533 tests, 1030 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications\n 0% passed\n\n 3.40 tests/s, 6.56 assertions/s\n /home/mbridges/.rbenv/versions/jruby-1.6.7.2/bin/jruby -I\"lib:test\" -I\"/home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib\" \"/home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb\" \"test/functional/**/*_test.rb\"\n LoadError: No such file to load -- java.lang.OutOfMemoryError: GC overhead limit exceeded\n            depend_on at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:317\n            depend_on at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:313\n   require_dependency at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:225\n          eager_load! at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:439\n                 each at org/jruby/RubyArray.java:1615\n          eager_load! at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:438\n                 each at org/jruby/RubyArray.java:1615\n          eager_load! at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:436\n             Finisher at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application/finisher.rb:53\n        instance_exec at org/jruby/RubyBasicObject.java:1757\n                  run at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:30\n     run_initializers at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:55\n                 each at org/jruby/RubyArray.java:1615\n     run_initializers at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:54\n          initialize! at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application.rb:136\n             __send__ at org/jruby/RubyBasicObject.java:1698\n                 send at org/jruby/RubyKernel.java:2097\n       method_missing at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30\n               (root) at /home/mbridges/admin_tools/mbridges_dev/customer_service_tool/config/environment.rb:12\n              require at org/jruby/RubyKernel.java:1042\n               (root) at /home/mbridges/admin_tools/mbridges_dev/customer_service_tool/config/environment.rb:2\n              require at org/jruby/RubyKernel.java:1042\n               (root) at /home/mbridges/admin_tools/mbridges_dev/customer_service_tool/test/test_helper.rb:1\n              require at org/jruby/RubyKernel.java:1042\n             __file__ at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10\n                 each at org/jruby/RubyArray.java:1615\n             __file__ at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9\n               select at org/jruby/RubyArray.java:2395\n               (root) at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4\n rake aborted!\n Command failed with status (1): [/home/mbridges/.rbenv/versions/jruby-1.6.7...]\n\n Tasks: TOP =&gt; without_schema_dump:functionals\n (See full trace by running task with --trace)\n</code></pre>\n\n<p>The Rakefile is a bit different since we are not actually in control of the database. We have to skip migrations.</p>\n\n<p># Add your own tasks in files placed in lib/tasks ending in .rake,\n    # for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.</p>\n\n<pre><code>require File.expand_path('../config/application', __FILE__)\nrequire 'rake'\n\nCustomerService::Application.load_tasks\n\nnamespace :without_schema_dump do\n  Rake::TestTask.new(:units) do |t|\n    t.libs &lt;&lt; \"test\"\n    t.pattern = 'test/unit/**/*_test.rb'\n    t.verbose = true\n  end\n  Rake::TestTask.new(:functionals) do |t|\n    t.libs &lt;&lt; \"test\"\n    t.pattern = 'test/functional/**/*_test.rb'\n    t.verbose = true\n  end\n  task :run_tests =&gt; :environment do\n    Rake::Task['without_schema_dump:units'].invoke\n    Rake::Task['without_schema_dump:functionals'].invoke\n  end\nend\n\nRake::Task[:default].prerequisites.clear\nRake::Task[:default].actions.clear\ntask :default do\n  puts 'WARNING: Default rake overwritten because of foreign key constraints (see Rakefile)'\n  Rake::Task['without_schema_dump:run_tests'].invoke\nend\n</code></pre>\n\n<p>Help? Any help would be appreciated!</p>\n"},{"tags":["java","unit-testing","mockito"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13279617,"title":"Mockito's ArgumentCaptor: One method name, two method definitions","body":"<p>I am trying to write a test that verifies the calls of the same method name that can accept two different parameters.  The code snippet I tried originally:</p>\n\n<pre><code>ArgumentCaptor&lt;Label&gt; labelCaptor = ArgumentCaptor.forClass(Label.class);\nMockito.verify(fakeSheet, Mockito.times(4)).addCell(labelCaptor.capture());\n\nArgumentCaptor&lt;Number&gt; numberCaptor = ArgumentCaptor.forClass(Number.class);\nMockito.verify(fakeSheet, Mockito.times(2)).addCell(numberCaptor.capture());\n</code></pre>\n\n<p>However, Mockito complains that addCell was run 6 times on the first verify.  So, I tried this:</p>\n\n<pre><code>ArgumentCaptor&lt;Label&gt; labelCaptor = ArgumentCaptor.forClass(Label.class);\nMockito.verify(fakeSheet, Mockito.times(6)).addCell(labelCaptor.capture());\n\nArgumentCaptor&lt;Number&gt; numberCaptor = ArgumentCaptor.forClass(Number.class);\nMockito.verify(fakeSheet, Mockito.times(6)).addCell(numberCaptor.capture());\n</code></pre>\n\n<p>Which runs, but gives me all 6 argument calls in both ArgumentCaptors, storing the information of all 6 objects I am expecting into both ArgumentCaptor instances.</p>\n\n<p>This feels so very wrong- sure, I could write a test with it, but the fact that my captor isn't distinguishing between the two classes feels dirty.  Is there a way to get Mockito to distinguish between the two?</p>\n"},{"tags":["android","ios","unit-testing","mobile","automated-tests"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13167405,"title":"Automation frameworks for mobile devices","body":"<p>I am trying to use automation frameworks similar to Selenium to test native apps (both android and IOS apps). Does anyone have a list of frameworks that is suitable for the tasks. Java based frameworks are preferred but others are welcome too. I want to go over the merits of each framework and make a final determination</p>\n"},{"tags":["visual-studio","unit-testing","debugging","resharper","mstest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13278846,"title":"Why is referenced dll getting locked while debugging under Resharper/MSTest?","body":"<p>I have an integration test for a method in assembly <code>A</code>. Assembly <code>A</code> references assembly <code>B</code> via project reference. I run them under the Visual Studio 2010 debugger in a Resharper 6.1 unit testing scenario. The testing engine is Microsoft's native MSTest.</p>\n\n<p>I get the infamous</p>\n\n<blockquote>\n  <p>The process cannot access the file <code>...\\B.dll</code> because it is being used by another process.</p>\n</blockquote>\n\n<p>message. I have verified that no other process has a handle on that file (e.g. via Sysinternal's Process Explorer).</p>\n\n<p>Running the test out of the debugger works fine. Any ideas why it happens under the debugger and what I can do to fix it?</p>\n"},{"tags":["ios","unit-testing","nsurlconnection","ocmock","nsurlconnectiondelegate"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":930,"score":1,"question_id":9908547,"title":"how to unit test a NSURLConnection Delegate?","body":"<p>How can I unit test my NSURLConnection delegate?\nI made a ConnectionDelegate class which conforms to different protocols to serve data from the web to different ViewControllers. Before I get too far I want to start writing my unit tests.\nBut I don't know how to test them as a unit without the internet connection. I would like also what I should do to treat the asynchronous callbacks.</p>\n"},{"tags":["java","unit-testing","mocking","jmockit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13259856,"title":"jmockit capturing mocked method arguments","body":"<p>I am using JMockit for unit test a data service that calls different web services and populates the database.  I am mocking each web service call, and using Expectations/results to feed the service my return data. </p>\n\n<p>I am having a problem where I have to iterate over a list of objects and call a web service each time using a different argument. I want to capture the argument so I can feed it into a CreateTestData method that will return what I want.\nThe dataSets are somewhat dependent on each other </p>\n\n<p>The test Class:</p>\n\n<pre><code>public class testDataService {  \n\n@Mocked \nprivate WebService1 webServiceClientMocked1;\n\n@Mocked \nprivate WebService2 webServiceClientMocked2;\n\n@Autowired\nprivate DataService dataService;\n\n@Test\npublic void createTestData() {\n\nfinal DataSet1 dataSet1 = CreateMyTestData.createDataSet1();\nfinal DataSet1 dataSet2 = CreateMyTestData.createDataSet2();\n\n // these are populated using other methods not shown\nfinal List&lt;String&gt; listStrings = new ArrayList&lt;String&gt;();\nfinal List&lt;String&gt; entities = new ArrayList&lt;String&gt;();  \n\nnew Expectations() {{\n        webServiceClientMocked1.getDataSet1(\"stringA\", true);\n        result = dataSet1;\n    }};\n\nnew Expectations() {{\n        webServiceClientMocked2.getDataSet2(\"stringB\");\n        result = dataSet2;\n    }};\n\nnew Expectations() {{\nfor(String s : listStrings){\n    webServiceClientMocked1.getDataSet4(s,(List&lt;String&gt;) any);\n    returns(CreateMyTestData.createDataSet4(s, entities));\n        }\n\n    }};\n\n\n//doesnt work       \n//new Expectations() {{\n//webServiceClientMocked1.findDataPerParamters(anyString, (List&lt;String&gt;) any );\n//result = CreateMyTestData.createDataSet4(capturedString, capturedListStrings);\n//}};\n\n//call data service to test\ndataService.doSaveData();\n}\n</code></pre>\n\n<p>Data Service class:</p>\n\n<pre><code>public class DataServiceImpl implements DataService\n{\n\npublic void doSaveData() {\n\n  //do a bunch of stuff\n  dataSet1 =webServiceClientMocked1.getDataSet1(\"stringA\", true);\n  //do more stuff\n  dataSet2 = webServiceClientMocked2.getDataSet2(\"stringB\");\n  Collection&lt;Stuff&gt; dataSet3 = saveToDB(dataSet2);   //save data and return a different set of data\n\n  for(Stuff data : dataSet3) {\n\n  //take dataSet3, iterate over it and call another webservice\n  dataSet4 = webServiceClientMocked1.getDataSet4(data.getStringX(), data.getListStrings());\n\n // keep doing more junk\n\n}\n}\n</code></pre>\n\n<p>Is this possible?</p>\n"},{"tags":["unit-testing","scala","comparison","scalatest"],"answer_count":4,"favorite_count":9,"up_vote_count":44,"down_vote_count":0,"view_count":6509,"score":44,"question_id":2220815,"title":"What’s the difference between ScalaTest and Scala Specs unit test frameworks?","body":"<p>Both are BDD (Behavior Driven Development) capable unit test frameworks for Scala written in Scala. And <a href=\"http://code.google.com/p/specs/\">Specs</a> <strike>is built upon</strike> may also involve the <a href=\"http://www.scalatest.org/\">ScalaTest</a> framework. But what does Specs offer ScalaTest doesn't? What are the differences?</p>\n"},{"tags":["c++","unit-testing","googlemock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13273924,"title":"Mocking internal calls of a function being tested using googlemock","body":"<p>I am new to Google Mock and based on my understanding of the documentation and online resources, I could not identify a solution to my problem:</p>\n\n<p>I have the following classes:</p>\n\n<pre><code>class A\n{\n    public:\n        A() { }\n        int fun1()\n        {\n            //Some code\n            B b;\n            x = b.fun2();\n            //Some other code\n        }\n};\nclass B\n{\n    public:\n        B() { }\n        int fun2()\n        {\n            //Some code\n            y = C::fun3();\n            //Some code\n        }\n};\nclass C\n{\n    public:\n        static int fun3()\n        {\n            //Read a file and provide success if a certain pattern is found\n        }\n};\n</code></pre>\n\n<p>Now I am trying to write a Google test for A::fun1(). But because of the structure of the code (all the calls are through objects and I do not have a base class using which I can initialize a mock etc., I am not able to mock this successfully. </p>\n\n<p>Can someone help me understand if this is mockable with Google Mock in its current form? Please note that I am not allowed to change the original source code. </p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13274799,"title":"Unit-test a method wrapper","body":"<p>I've got a set of actions which share some base checks. My code looks like this:</p>\n\n<pre><code>def is_valid(param): …some pretty complex things unit-tested on their own…\n\nclass BaseAction(object):\n    def run(self, param):\n        if not is_valid(param):\n            raise ValueError(…)\n\n        return self.do_run(param)\n\nclass Jump(BaseAction):\n    def do_run(self, param): …\n\nclass Sing(BaseAction):\n    def do_run(self, param): …\n</code></pre>\n\n<p>How should I unit-test the fact that BaseAction.run performs validation?</p>\n\n<p>I think I could unit-test Jump.run and Sing.run, but then to do it properly I'd need to write tests for each subclass of BaseAction, potentially quite a lot of cases. Also this means coupling test for subclasses with a test for base class' method.</p>\n"},{"tags":["spring","unit-testing","eclipselink","dao","hsqldb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13274548,"title":"Testing DAOs with hsqldb, eclipselink and spring","body":"<p>I'm a newbie at Spring data &amp; transactions as well as at unit testing... I got from a Spring training a working example of Spring DAO testing using a on the flow-generated HSQL database and Hibernate as JPA.\nIn my case, I'm using EclipseLink so I just wanted to adapt the example to this. Unfortunately I cannot make it work and I really don't see anymore how to fix it that's why I need your help.</p>\n\n<p>Here is my Test class :</p>\n\n<pre><code>public class BasicDAOTests {\n\n  private BasicDAO&lt;Projet&gt; basicDAO;//my BasicDAO is generic so I decided to test it on the type \"Projet\"\n\n  private PlatformTransactionManager transactionManager;\n\n  private TransactionStatus transactionStatus;\n\n@Before\n  public void setUp() throws Exception {\n    EntityManagerFactory entityManagerFactory = createEntityManageFactory();\n    basicDAO = new BasicDAO&lt;Projet&gt;(Projet.class);\n    basicDAO.setEmf(entityManagerFactory);\n    // begin a transaction\n    transactionManager = new JpaTransactionManager(entityManagerFactory);\n    transactionStatus = transactionManager.getTransaction(new DefaultTransactionDefinition());\n\n }\n\n private EntityManagerFactory createEntityManageFactory() {\n    // create a FactoryBean to help create a JPA EntityManagerFactory\n    LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\n    factoryBean.setJpaVendorAdapter(new EclipseLinkJpaVendorAdapter());\n    factoryBean.setDataSource(createTestDataSource());\n\n    /*Class[] annotatedClasses = new Class[] { Restaurant.class };\n    factoryBean..setAnnotatedClasses(annotatedClasses);\n    factoryBean.setHibernateProperties(createHibernateProperties());*/\n    // initialize according to the Spring InitializingBean contract\n    factoryBean.afterPropertiesSet();\n    // get the created session factory\n    return (EntityManagerFactory)factoryBean.getObject();\n}\n\n\n@SuppressWarnings(\"deprecation\")\n@Test\npublic void testFindProjectById() {\n    Projet project = basicDAO.findById(1);\n    assertNotNull(\"the project should never be null\", project);\n    assertEquals(\"the project id is wrong\", \"1\", project.getIdProjet());\n    assertEquals(\"the name is wrong\", \"Porc demain\", project.getNomProjet());\n    assertEquals(\"the data is wrong\", new Date(\"2012-07-30\"), project.getDtCreation());\n}\n\n@After\npublic void tearDown() throws Exception {\n    // rollback the transaction to avoid corrupting other tests\n    transactionManager.rollback(transactionStatus);\n}\n\n\nprivate DataSource createTestDataSource() {\n    return new EmbeddedDatabaseBuilder()\n    .setName(\"meansTest\")\n    .addScript(\"/folder/schema.sql\")\n    .addScript(\"/folder/test-data.sql\")\n    .build();\n}\n\n}\n</code></pre>\n\n<p>In all cases it just seems that it cannot create a proper EntityManagerFactory bean so I guess either I'm using the wrong Spring classes either I don't set their properties correctly... Do you have any suggestions to correct it?</p>\n\n<p>Thanks in advance for your help!</p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13274510,"title":"persisting variable value in unit testing in visual studio 2010","body":"<p>I'm just getting started doing some unit testing in vs2010.  I have a test method that sets a private int variable and then a couple of other test methods that attempt to use that variable.  The variable does correctly get set when the first test executes but when it then moves to the next test the variable is reset to 0.  How can I keep the value of that variable for all tests?  Here's some example code.</p>\n\n<pre><code>public MyClassFixture{\n  private Controller controller;\n  private int id;\n\n  public MyClassFixture(){\n    controller = new Controller();\n  }\n\n  [TestMethod]\n  public void Should_Generate_New_Id(){\n    id = controller.GenerateNewId();\n    Assert.IsTrue(id &gt; 0);\n  }\n\n  [TestMethod]\n  public void Should_Get_New_Record(){\n    var record = controller.GetNewRecord(id);\n    Assert.IsNotNull(record);\n  }\n\n}\n</code></pre>\n"},{"tags":["java","unit-testing","junit"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":6465,"score":6,"question_id":330901,"title":"Is running tests with JUnit 3.x vs JUnit 4.x still a best practice?","body":"<p>I haven't looked at this in a while, but if I recall correctly both ant and maven still rely on JUnit 3 for unit tests (as of maven 2.09 the default POM file still has JUnit 3.81). </p>\n\n<p>Does it still make sense to stick to JUnit 3 instead of using the latest and greatest? Any good reason I might be missing?</p>\n"},{"tags":["unit-testing","performance","mstest"],"answer_count":6,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":782,"score":9,"question_id":3824762,"title":"How slow is too slow for unit tests?","body":"<p>Michael Feathers, in <em>Working Effectively With Legacy Code</em>, on pages 13-14 mentions:</p>\n\n<blockquote>\n  <p>A unit test that takes 1/10th of a\n  second to run is a slow unit test...\n  If [unit tests] don't run fast, they\n  aren't unit tests.</p>\n</blockquote>\n\n<p>I can understand why 1/10th a second is too slow if one has 30,000 tests, as it would take close to an hour to run. However, does this mean 1/11th of a second is any better? No, not really (as it's only 5 minutes faster). So a hard fast rule probably isn't perfect.</p>\n\n<p>Thus when considering how slow is too slow for a unit tests, perhaps I should rephrase the question. <strong>How long is too long for a developer to wait for the unit test suite to complete?</strong></p>\n\n<p>To give an example of test speeds. Take a look at several MSTest unit test duration timings:</p>\n\n<pre><code>0.2637638 seconds\n0.0589954\n0.0272193\n0.0209824\n0.0199389\n0.0088322\n0.0033815\n0.0028137\n0.0027601\n0.0008775\n0.0008171\n0.0007351\n0.0007147\n0.0005898\n0.0004937\n0.0004624\n0.00045\n0.0004397\n0.0004385\n0.0004376\n0.0003329\n</code></pre>\n\n<p>The average for all 21 of these unit tests comes to 0.019785 seconds. Note the slowest test is due to it using Microsoft Moles to mock/isolate the file system. </p>\n\n<p>So with this example, if my unit test suite grows to 10,000 tests, it <em>could</em> take over 3 minutes to run. </p>\n"},{"tags":["c#",".net","visual-studio-2010","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":538,"score":1,"question_id":8921064,"title":"Unit test project not building from build server","body":"<p>My VS2010 solution has a test project in it.  The unit tests themselves reference the following namespace:</p>\n\n<pre><code>using Microsoft.VisualStudio.TestTools.UnitTesting;\n</code></pre>\n\n<p>which is accessed via the following assembly on my PC:</p>\n\n<pre><code>Assembly Microsoft.VisualStudio.QualityTools.UnitTestFramework\n    C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\\n    PublicAssemblies\\Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll\n</code></pre>\n\n<p>When I build the solution on my PC I have no issues; the tests will build and run okay.</p>\n\n<p>We have an intranet page which we can use to kick off builds on a build server.  When I build via this page, the build fails with the following errors:</p>\n\n<pre><code>Generator.cs(3,17): error CS0234: The type or namespace name 'VisualStudio' \ndoes not exist in the namespace 'Microsoft' (are you missing an assembly\nreference?)\n</code></pre>\n\n<p>The obvious problem would be that the <code>Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll</code> mentioned above is not present on the build server.  I thought this was would be installed with VS2010, and since the projects in my solution build .NET 4.0 targets, I would expect this to be installed on the build server.</p>\n\n<p>What is the easiest way to resolve this?  The build server is out of my jurisdiction and I don't particular want to log a job to get new libraries installed on to it.</p>\n"},{"tags":["python","django","unit-testing","selenium","webdriver"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2040,"score":0,"question_id":9103837,"title":"How do I create a Selenium Webdriver test to verify an element is not present?","body":"<p>I am creating unit tests for my Django app in Selenium Webdriver.</p>\n\n<p>I have an AJAX method that deletes a Topic from the database.\nI'm trying to figure out how to verify that the deleted Topic is no longer present on the page.</p>\n\n<p>I am trying to catch the Exception that the should be generated when Webdriver can't find an element:\nselenium.common.exceptions.NoSuchAttributeException  </p>\n\n<p>Instead I see an error:  </p>\n\n<pre><code>*** URLError: &lt;urlopen error timed out&gt;\n</code></pre>\n\n<p>Here is how I have setup the tests:  </p>\n\n<pre><code>from selenium import webdriver\nfrom django.utils import unittest  \n\nclass TestAuthentication(unittest.TestCase):    \n    scheme = 'http'    \n    host = 'localhost'    \n    port = '4444'    \n\n\n    def setUp(self):    \n        self._driver = webdriver.Firefox()    \n        self._driver.implicitly_wait(10)    \n\n    def login_as_Kallie(self):    \n        # Kallie has manual login    \n        self._driver.get('http://localhost:8000/account/signin/')    \n        user = self._driver.find_element_by_id('id_username')    \n        user.send_keys(\"Kallie\")    \n        password = self._driver.find_element_by_id('id_password')    \n        password.send_keys('*********')    \n        submit = self._driver.find_element_by_id('blogin')    \n        submit.click()    \n\n    def test_Kallie_can_delete_topic(self):    \n        self.login_as_Kallie()    \n        self._driver.find_element_by_link_text(\"Topic to delete\").click()    \n        self._driver.find_element_by_xpath(\"/html/body/div/div[4]/div/div/div[2]/div/table/tbody/tr/td[2]/div/div[3]/span[5]/a\").click()    \n        self._driver.find_element_by_class_name('dialog-yes').click()    \n        self._driver.get(\"http://localhost:8000/questions/\")    \n        # this is the Python exception to catch: selenium.common.exceptions.NoSuchAttributeException    \n        self.assertRaises('selenium.common.exceptions.NoSuchAttributeException', self._driver.find_element_by_link_text(\"Topic to delete\"))    \n\n    def tearDown(self):    \n        self._driver.quit()    \n</code></pre>\n\n<p>How can I test that a Element of the page is absent?   </p>\n"},{"tags":["c#","visual-studio-2010","unit-testing"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":49,"score":4,"question_id":13270860,"title":"visual studio 2010 c# unit tests","body":"<p>Trying to create unit tests for my methods and can't seem to get the configuration right.\nI go New Test -> Unit Test Wizard -> Pick my method -> fill in test method values but I always get Assert.Inconclusive failed. Verify the correctness of this test method.</p>\n\n<p>Here is a sample method:</p>\n\n<pre><code>namespace ConsoleApplication\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n        }\n\n        public int Mult(int a, int b)\n        {\n            return a * b;\n        }\n    }\n}\n</code></pre>\n\n<p>and the test method:</p>\n\n<pre><code>[TestMethod()]\n        public void MultTest()\n        {\n            Program target = new Program(); // TODO: Initialize to an appropriate value\n            int a = 4; // TODO: Initialize to an appropriate value\n            int b = 5; // TODO: Initialize to an appropriate value\n            int expected = 20; // TODO: Initialize to an appropriate value\n            int actual;\n            actual = target.Mult(a, b);\n            Assert.AreEqual(expected, actual);\n            Assert.Inconclusive(\"Verify the correctness of this test method.\");\n        }\n</code></pre>\n\n<p>Seems straight forward enough, but am I missing something trivial?</p>\n"},{"tags":["unit-testing","mocking","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1657,"score":4,"question_id":1285316,"title":"Moq Match and Verify Array / IEnumerable parameters in method setup","body":"<p>I'm having problems verifying Ienumerable / Array type parameters when setting up expectation for methods call on my mock objects.  I think since it's matching different references it doesn't consider it a match.  I just want it to match the contents of the array, sometimes I don't even care about the order.</p>\n\n<pre><code>mockDataWriter.Setup(m =&gt; m.UpdateFiles(new string[]{\"file2.txt\",\"file1.txt\"} ) );\n</code></pre>\n\n<p>Ideally I want something that works like the following, I could probably write an extension method to do this.</p>\n\n<pre><code>It.Contains(new string[]{\"file2.txt\",\"file1.txt\"})\n\nIt.ContainsInOrder(new string[]{\"file2.txt\",\"file1.txt\"})\n</code></pre>\n\n<p>The only built in way I can match these right now is with the predicate feature, but it seems this problem is common enough it should be built in.</p>\n\n<p>Is there a built in way to match these types, or extension library I can use.  If not I'll just write an extension method or something.</p>\n\n<p>Thanks </p>\n"},{"tags":["c#","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13267723,"title":"NUnit - common assertions after each test","body":"<p>I'm writing service tests with database(without mocks).</p>\n\n<p>I have a new requirement to perform common database \"health\" checks* after each test in our test suits.</p>\n\n<p>The question is: where can I put this kind of tests/checks?</p>\n\n<p>At first I thought about TearDown, but AFAIK it was supposed(designed) to perform cleanup not assertions.\nWould it be ok to put it there? </p>\n\n<p>I'm not doing anything on teardown right now (and that is probably not going to change) - the database is cleaned on SetUp and each and every test is responsible for preparing the environment for itself.</p>\n\n<p>*- the database design is inherited from another company and unfortunately its very poor - we've discovered inconsistencies in data and that's why we need to perform 'health checks' to identify places where they occur</p>\n"},{"tags":["c#","unit-testing","mocking","moq","stub"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13267799,"title":"What to use mock parameter or instance parameter in test method?","body":"<p>What is the best practice to pass object parameter in the test method?\nWhat to use in this case?(Mocks, Stubs or create instance of object and fill it)</p>\n\n<p>For example:</p>\n\n<pre><code>[Test]\npublic void LoadContentsFor_ValidUser_ReturnsEmptyList()\n{\n    var user = new User {Id = 1, FirstName = \"Test\"};\n    var contents = this.contentPresentationService.LoadContentsFor(user);\n    Assert.IsTrue(contents.Count == 0);\n}\n</code></pre>\n\n<p>Or using mocks:</p>\n\n<pre><code>[Test]\npublic void LoadContentsFor_ValidUser_ReturnsEmptyList()\n{\n    var user = new Mock&lt;User&gt;();\n    user.Setup(x =&gt; x.Id).Returns(1);\n    user.Setup(x =&gt; x.FirstName).Returns(\"Test\");\n    var contents = this.contentPresentationService.LoadContentsFor(user.Object);\n    Assert.IsTrue(contents.Count == 0);\n}\n</code></pre>\n"},{"tags":["php","unit-testing","phpt"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13269326,"title":".phpt: Check exit code?","body":"<p>We're using <a href=\"http://qa.php.net/phpt_details.php\" rel=\"nofollow\">.phpt</a> to test our PHP code.</p>\n\n<p>To verify its behavior, I need to check the <strong>exit code of a CLI tool</strong> that uses <code>exit()</code> calls.</p>\n\n<p>How can I do that? I don't see such a section in the <a href=\"http://qa.php.net/phpt_details.php\" rel=\"nofollow\">phpt spec</a>. The <code>php-src</code> unit tests also don't have an example</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","nunit","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":207,"score":0,"question_id":10401409,"title":"using moq to populate httpcontext.request","body":"<p>I am using the <a href=\"http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx\" rel=\"nofollow\">hanselman tutorial</a> to use Moq to create unit tests for methods that take httpcontext as input parameter. </p>\n\n<pre><code>public static class MvcMockHelpers\n{\n\n    public static HttpContextBase FakeHttpContext()\n    {\n        var context = new Mock&lt;HttpContextBase&gt;();\n        var request = new Mock&lt;HttpRequestBase&gt;();\n        var response = new Mock&lt;HttpResponseBase&gt;();\n        var session = new Mock&lt;HttpSessionStateBase&gt;();\n        var server = new Mock&lt;HttpServerUtilityBase&gt;();\n\n        context.Setup(ctx =&gt; ctx.Request).Returns(request.Object);\n        context.Setup(ctx =&gt; ctx.Response).Returns(response.Object);\n        context.Setup(ctx =&gt; ctx.Session).Returns(session.Object);\n        context.Setup(ctx =&gt; ctx.Server).Returns(server.Object);\n\n        return context.Object;\n    }\n\n    public static HttpContextBase FakeHttpContext(string url)\n    {\n        var context = FakeHttpContext();\n        context.Request.SetupRequestUrl(url);  &lt;---- error here\n        return context;\n    } \n\n\n\n}\n</code></pre>\n\n<p>I am getting the following error on <strong>context.Request.SetupRequestUrl(url);</strong></p>\n\n<p><em>Error  1   'System.Web.HttpRequestBase' does not contain a definition for 'SetupRequestUrl' and no extension method 'SetupRequestUrl' accepting a first argument of type 'System.Web.HttpRequestBase' could be found (are you missing a using directive or an assembly reference?)</em></p>\n\n<p>Please help. </p>\n\n<p>I am trying to find a very simple easy to follow tutorial on setting up httpcontext request object and pass into method with context input parameter and be able to create unit test but all the examples in google either do not work or are complicated. please help.</p>\n"},{"tags":["javascript","unit-testing","js-test-driver","headless-browser"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":299,"score":2,"question_id":11144537,"title":"Run Headless JsTestDriver?","body":"<p>Is there a way to use jsTestDriver in a headless state where it loads the browsers but does so headlessly (you can't see the browser) or it loads them minimized?</p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing","moq","mspec"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":791,"score":3,"question_id":7596426,"title":"How to test HTTP status code set by an ASP.NET MVC action with MSpec","body":"<p>I have the following controller:</p>\n\n<pre><code>public sealed class SomeController : Controller\n{\n    public ActionResult PageNotFound()\n    {\n        Response.StatusCode = 404;\n\n        return View(\"404\");\n    }\n}\n</code></pre>\n\n<p>I have created an MSpec specification:</p>\n\n<pre><code>[Subject(typeof (SomeController))]\npublic class when_invalid_page_is_requested : SomeControllerSpec\n{\n    Because of = () =&gt; result = Controller.PageNotFound();\n\n    It should_set_status_code_to_404 = \n        () =&gt; Controller.Response.StatusCode.ShouldEqual(404);\n}\n\npublic abstract class SomeControllerSpec\n{\n    protected static HomeController Controller;\n\n    Establish context = () =&gt; { Controller = new SomeController(); };\n}\n</code></pre>\n\n<p>But because of how I instantiate the controller, HttpContext is null.\nWhat would be the best way to test status code set by the <code>PageNotFound</code> action?</p>\n\n<p><strong>EDIT: Posted an answer below</strong></p>\n"},{"tags":[".net","xml","unit-testing","nunit","xmlunit"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":362,"score":3,"question_id":5897481,"title":".net Xml comparer for UnitTesting","body":"<p>I have a few unit tests where I need to make sure that XML generated by a method contains the same elements/values as an expected Xml document.</p>\n\n<p>I used <a href=\"http://xmlunit.sourceforge.net/\" rel=\"nofollow\">xmlunit</a> in Java, and although they have a .net version it doesn't seem to support namespaces. Are there any alternatives within .net for doing this?</p>\n\n<p>As long as I can just compare 2 Xml strings and get a true/false result to tell me if they match as far as the data contained is concerned I am happy...</p>\n"},{"tags":["c#","unit-testing","enterprise-library"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":15338,"score":4,"question_id":4030436,"title":"Activation error occured while trying to get instance of type Database, key \"\" <-- blank","body":"<p>I'm trying out the Enterprise Library 5.0 and was doing some unit-tests on my BL, do I need to have a app.config on the DL or on the Test project?</p>\n\n<p>note: I already have the configuration settings on my web.config on my web project.</p>\n\n<p><strong>how I use the DAAB:</strong></p>\n\n<pre><code>private static Database db = DatabaseFactory.CreateDatabase();\n\ndb.ExecuteNonQuery(\"spInsertSalesman\", salesman.Fullname);\n</code></pre>\n\n<p><strong>my app.config on DL:</strong></p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;configSections&gt;\n        &lt;section name=\"dataConfiguration\" type=\"Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" requirePermission=\"false\" /&gt;\n    &lt;/configSections&gt;\n    &lt;dataConfiguration defaultDatabase=\"DBTEST\" /&gt;\n    &lt;connectionStrings&gt;\n        &lt;add name=\"DBTEST\" connectionString=\"Data Source=[dbsource];Initial Catalog=[dbname];User Id=sa;Password=password;\"\n            providerName=\"System.Data.SqlClient\" /&gt;\n    &lt;/connectionStrings&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["java","unit-testing","junit","naming-conventions"],"answer_count":8,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":2450,"score":9,"question_id":3146821,"title":"Naming convention JUnit suffix or prefix Test","body":"<p>Class under test MyClass.java\nJUnit test case name alternatives: </p>\n\n<pre><code>TestMyClass.java\nMyClassTest.java\n</code></pre>\n\n<p><a href=\"http://moreunit.sourceforge.net\">http://moreunit.sourceforge.net</a> seems to use \"Test\" as prefix default but I have seen both uses. Both seems to be recognized when running the entire project as unit test in eclipse as it is the annotation inside classes that are parsed for @Test. I guess maven does the same thing. </p>\n\n<p>Which is preferred? </p>\n"},{"tags":["visual-studio-2010","unit-testing","testing","crash","bug"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13261961,"title":"Strange Visual Studio 2010 crash in very simple project containing unit tests","body":"<p>I've found surprisingly simple way to crash <strong>Visual Studio 2010</strong> using auto generating <em>Unit Tests</em>. </p>\n\n<p>This is the way I made it: <code>File</code> => <code>New Project</code> => <code>Class Library</code> <em>[.NET Framework 4]</em>. <br />\nThis is complete source code of the program (15 lines of <strong>C#</strong> code):</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>namespace UnitTestsCrash\n{\n    class ClassA&lt;T&gt;\n    {\n        private T a;\n    }\n\n    class ClassB : ClassA&lt;ClassB&gt;\n    {\n        private void FooA()\n        {\n            return;\n        }\n    }\n}\n</code></pre>\n\n<p><code>Build it</code> and than click <code>Right Mouse Button</code> inside <code>ClassB</code> body => <code>Create Unit Tests...</code> => <code>OK</code> => <code>Create</code> => <code>Yes</code>. The result is <em>Visual Studio <strong>crashing</em></strong> (<a href=\"http://oi50.tinypic.com/2z4bade.jpg\" rel=\"nofollow\">screenshot</a>)!</p>\n\n<p>I discovered this odd crash in more complex solution. I extracted this problem from bigger project and simplified to above sample. <br />I'm not quite sure if it's <em>Visual Studio 2010</em> fault or mine. Please verify and explain if it's my fault. </p>\n\n<p>I need to test big class which inherits in similar manner as <code>ClassB</code> but I can't do it in automated way. </p>\n"},{"tags":["java","unit-testing","ftp","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13243039,"title":"How to Make MockFTPServer Throw an Exception","body":"<p>I have some code that connects to an FTP server and I'm trying to write test cases for that code. In doing that, I've been trying to use MockFtpServer to mock out the FTP server so I can test my interactions.</p>\n\n<p><a href=\"http://mockftpserver.sourceforge.net/index.html\" rel=\"nofollow\">http://mockftpserver.sourceforge.net/index.html</a></p>\n\n<p>In one particular case, I'm trying to test my \"connect\" method with a test case that looks something like this:</p>\n\n<pre><code>public class FTPServiceTestWithMock {\n\n    private FakeFtpServer server;\n    private FTPService service;\n    private int controllerPort;\n\n    @Before\n    public void setup() {\n        server = new FakeFtpServer();\n        server.setServerControlPort(0); // Use free port - will look this up later\n\n        FileSystem fileSystem = new WindowsFakeFileSystem();\n        fileSystem.add(new DirectoryEntry(\"C:\\\\temp\"));\n        fileSystem.add(new FileEntry(\"C:\\\\temp\\\\sample.txt\", \"abc123\"));\n        server.setFileSystem(fileSystem);\n        server.addUserAccount(new UserAccount(\"user\", \"pass\", \"C:\\\\\"));\n        server.start();\n        controllerPort = server.getServerControlPort();\n\n        service = new FTPService();\n    }\n\n    @After\n    public void teardown() {\n        server.stop();\n    }\n\n    @Test\n    public void testConnectToFTPServer() throws Exception {\n        String testDomain = \"testdomain.org\";\n        String expectedStatus = \n            \"Connected to \" + testDomain + \" on port \" + controllerPort;\n\n        assertEquals(\n            expectedStatus, \n            service.connectToFTPServer(testDomain, controllerPort)\n        );\n    }\n\n}\n</code></pre>\n\n<p>This code works perfectly - it sets up a fake FTP server and puts my code under test to make sure it can connect and returns an appropriate message.</p>\n\n<p>However, the API spec for my FTP client shows that exceptions can be thrown when I try to connect. </p>\n\n<p><a href=\"http://commons.apache.org/net/api-3.1/org/apache/commons/net/SocketClient.html#connect%28java.lang.String%29\" rel=\"nofollow\">http://commons.apache.org/net/api-3.1/org/apache/commons/net/SocketClient.html#connect%28java.lang.String%29</a></p>\n\n<p>I would like to write a second test case that tests for an exception being thrown, which is likely should the domain name be incorrect or the FTP server is down. I want to ensure that, in such a case, my software responds appropriately. I found information in the Mock FTP Server site about \"custom command handlers\", but I can't figure out how to make one throw an exception. This is what I have:</p>\n\n<pre><code>public void testConnectToFTPServerConnectionFailed() throws Exception {\n    ConnectCommandHandler connectHandler = new ConnectCommandHandler();\n    connectHandler.handleCommand(/* Don't know what to put here */);\n    server.setCommandHandler(CommandNames.CONNECT, connectHandler);\n}\n</code></pre>\n\n<p>The handleCommand method requires a Command object and a Session object, but I can't figure out, from the documentation, how to get valid objects to send in. Does anyone know how to go about this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","unit-testing"],"answer_count":8,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2270,"score":3,"question_id":4095319,"title":"Unittest tests order","body":"<p>How do I be sure of the unittest methods order? Is the alphabetical or numeric prefixes the proper way?</p>\n\n<pre><code>class TestFoo(TestCase):\n    def test_1(self):\n        ...\n    def test_2(self):\n        ...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class TestFoo(TestCase):\n    def test_a(self):\n        ...\n    def test_b(self):\n        ...\n</code></pre>\n"},{"tags":["python","unit-testing","google-app-engine"],"answer_count":6,"favorite_count":23,"up_vote_count":30,"down_vote_count":0,"view_count":1863,"score":30,"question_id":1753897,"title":"What approach(es) have you used for lightweight Python unit-tests on App Engine?","body":"<p>I'm about to embark on some large Python-based App Engine projects, and I think I should check with Stack Overflow's \"wisdom of crowds\" before committing to a unit-testing strategy.  I have an existing unit-testing framework (based on <a href=\"http://docs.python.org/library/unittest.html?highlight=unittest#module-unittest\" rel=\"nofollow\">unittest</a> with custom runners and extensions) that I want to use, so anything \"heavy-weight\"/\"intrusive\" such as <a href=\"http://code.google.com/p/python-nose/\" rel=\"nofollow\">nose</a>, <a href=\"http://pythonpaste.org/webtest/\" rel=\"nofollow\">webtest</a>, or  <a href=\"http://code.google.com/p/gaeunit/\" rel=\"nofollow\">gaeunit</a> doesn't seem appropriate.  The crucial unit tests in my worldview are extremely lightweight and fast ones, ones that run in an extremely short time, so I can keep running them over and over all the time without breaking my development rhythm (e.g., for a different project, I get 97% or so coverage for a 20K-lines project with several dozens of super-fast tests that take 5-7 seconds, elapsed time, for a typical run, overall -- that's what I consider a decent suite of small, fast unit-tests).  I'll have richer/heavier tests as well of course, all the way to integration tests with selenium or windmill, that's <strong>not</strong> what I'm asking about;-) -- my focus in this question (and in most of my development endeavors;-) is on the small, lightweight unit-tests that lightly and super-rapidly cover my code, not on the deeper ones.</p>\n\n<p>So I think what I need is essentially a set of small, very lightweight simulations of the various key App Engine subsystems -- data store, memcache, request/response objects and calls to webapp handlers, user handling, mail, &amp;c, roughly in this order of priority.  I haven't found exactly what I'm looking for, so it seems to me that I should either rely on <a href=\"http://code.google.com/p/pymox/\" rel=\"nofollow\">mox</a>, as I've done often in the past, which basically means mocking each subsystem used in a given test and setting up all expectations &amp;c (strong, but lots of work each time, and very sensitive to the tested-code's internals, i.e. very \"white-box\"y), or rolling my own simulation of each subsystem (and doing asserts on the simulated subsystems' states as part of the unit tests). The latters seems feasible, given GAE's Python-side strong \"stubs\" architecture... but I can't believe I need to roll my own, i.e., that nobody's already written such simple-minded simulators!-)  E.g., for the datastore, it looks like what I need is more or less the \"datastore on file\" stub that's already part of the SDK, plus a way to mark it readonly and easy-to-use accessors for assertions about the datastore's state; and so forth, subsystem by subsystem -- each seems to need \"just a bit more\" than what's already in the SDK, \"perched on top\" of the existing \"stubs\" architecture.</p>\n\n<p>So, before diving in and spending a day or two of precious development time \"rolling my own\" simulations of GAE subsystems for unit testing purposes, I thought I'd double check with the SO crowd and see what y'all think of this... or, if there's already some existing open source set of such simulators that I can simply reuse (or minimally tweak!-), and which I've just failed to spot in my searching!-)</p>\n\n<p><strong>Edit</strong>: to clarify, if I do roll my own, I do plan to leverage the SDK-supplied stubs where feasible; but for example there's no stub for a datastore that gets initially read in from a file but then not saved at the end, so I need to subclass and tweak the existing one (which also doesn't offer particularly convenient ways to do asserts on its state -- same for the mail service stub, etc). That's what I mean by \"rolling my own\" -- not \"rewriting from scratch\"!-)</p>\n\n<p><strong>Edit</strong>: \"why not GAEUnit\" -- GAEUnit is nice for its own use cases, but running dev_appserver and seeing results in my browser (or even via urllib.urlopen) is definitely not what I'm after -- I want to use a fully automated setup, suitable for running within an existing test-running framework which is based on extending unittest, and no HTTP in the way (said framework defines a \"fast\" test as one that among other thing does no sockets and minimal disk I/O -- we simulate or mock these -- so via gaeunit I could do no better than \"medium\" tests) + no convenient way to prepopulate datastore for each test (and no OO structure to help customize things).</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","testing","tdd"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":17,"score":2,"question_id":13242587,"title":"Error between validate method in Model and Test:Unit assertion results","body":"<p>Ruby Noob - I've searched SO, read the <a href=\"http://guides.rubyonrails.org/testing.html\" rel=\"nofollow\">Rails Guide on Testing</a>, and watched a <a href=\"http://railscasts.com/episodes/275-how-i-test\" rel=\"nofollow\">RailsCast</a> without luck. </p>\n\n<p>I'm unable to reconcile method associations with tests I've written. Currently (code below), both tests, one checking for presence of name and one checking for presence of email, pass without failure or error -- ok, seems good. </p>\n\n<p>If I remove both validates statements from the model, both tests fail -- also, makes sense. </p>\n\n<p>However, if I remove only <strong>ONE</strong> of either </p>\n\n<pre><code>validates :name, :presence =&gt; true\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<pre><code>validates :email, :presence =&gt; true\n</code></pre>\n\n<p>from the model, <strong>BOTH</strong> tests pass without failure. This result does not make sense to me. Have I created faulty tests? </p>\n\n<hr>\n\n<p>user.rb model:      </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  attr_accessible :email, :name \n\n  has_many :connections\n\n  validates :name, :presence =&gt; true\n  validates :email, :presence =&gt; true\nend\n</code></pre>\n\n<p>test/unit/user_test.rb</p>\n\n<pre><code>require 'test_helper'\n\nclass UserTest &lt; ActiveSupport::TestCase\n  test \"a user should have a name\" do\n    user = User.new\n    assert !user.save\n  end\n\n  test \"a user should have an email\" do\n    user = User.new\n    assert !user.save\n  end\nend\n</code></pre>\n"},{"tags":["unit-testing","maven","command","pom.xml"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13259395,"title":"maven profile argument for skipping unit test execution","body":"<p>I have some unit tests in my application. A I need to skip prat of them.\nIn pom.xml I have defined if test has specific class - then skip it.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profile&gt;\n  &lt;id&gt;skip-unit-tests&lt;/id&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.11&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;excludes&gt;\n            &lt;exclude&gt;**/*.class&lt;/exclude&gt;\n          &lt;/excludes&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/profile&gt;\n</code></pre>\n\n<p>So, if I do <code>package -Pskip-unit-tests</code> everything works, but if I do <code>clean compile -Pskip-unit-tests test</code> then maven executes them. What is wrong with last command?</p>\n"},{"tags":["unit-testing","neo4j"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13257806,"title":"[Neo4j] Impermanet database stored in filesystem","body":"<p>there's a problem with my Neo4j-Test-Setup-Environment and the org.neo4j.test.ImpermanentGraphDatabase...\nI have a class, TestGraphPopulator, for setting up some dummy data for my unit tests.</p>\n\n<p>Because of adding, delete, update operations in my tests, I populate the graph in every test case in init-method annotated via @Before.</p>\n\n<p>But there is some really strange behavior sometimes.\nSome of my test fail, because there are more or less entities as expected. In a second, or third, etc. run, everything is fine, ..or not.</p>\n\n<p>AND, in my /target directory of my project, there is a folder \\target\\test-data\\impermanent-db with all the Neo4J database data...</p>\n\n<p>I'm not sure of what my problem results of, but should NOT ImpermanentGraphDatabase only reside in memory??</p>\n\n<p>For me, it looks like a bug, could anyone share some experience?? This seems very important to me, and maybe others...</p>\n\n<p>Thanks a lot in advance!\nMarkus</p>\n\n<p>P.S.:\nNeo4J 1.8, Spring Data Neo4J 2.1 ..</p>\n"},{"tags":["unit-testing","maven"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13257987,"title":"Run maven test not in default src/test/java folder","body":"<p>I have a project containing <code>pom.xml</code> and some <code>JUnit</code> tests. Both <code>pom.xml</code> and unit tests are corrects. But problem is that tests are not in src/test/java folder (I cannot use this folder). Is it possible to tell maven to execute tests from another source folder (which is also in this project)?</p>\n"},{"tags":["ios","osx","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13241285,"title":"STAssertEqualObjects can I check for two accepted values?","body":"<p>I'd like to unit test an <code>NSString</code> for it's value, but I need to be able to accept two \"correct\" values. not just one. How would I do this ?</p>\n\n<p>I know I can do something like: </p>\n\n<pre><code>STAssertEqualObjects(node.name, @\"attachment\", @\"invalid name\");\n</code></pre>\n\n<p>But how do I accept, for example, <code>@\"attachment\"</code> AND <code>@\"table\"</code> values as correct and not fail the unit test if the <code>NSString</code> equals to either one.</p>\n\n<p>Thank you.</p>\n"},{"tags":["unit-testing","grails","junit","grails-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13256897,"title":"Grails: Unit test domain class constraint gives wrong result","body":"<p>I'm trying to write unit tests for my domain class to test constraints but I got unexpected result. Here is my domain class:</p>\n\n<pre><code>class Student {\n    String firstName\n    String lastName\n\n    static constraints = {\n        firstName blank:false,minSize:2,maxSize:20,validator: { val, obj -&gt;\n                      def similarUser = Student.findByFirstNameIlikeAndLastNameIlike(obj.firstName, obj.lastName)\n                      if(!similarUser || obj.id == similarUser.id){\n                      return ['Student.invalid.unique.message']\n                      }\n                    }\n        lastName blank:false, minSize:2,maxSize:20\n    }\n\n}\n</code></pre>\n\n<p>and here is my unit tests:</p>\n\n<pre><code>@TestFor(Student)\n@Mock(Student)\nclass StudentTests {\n    def st\n\n    @Before\n    void setUp(){       \n        mockForConstraintsTests(Student)        \n        st=new Student(firstName:\"FerasO\",lastName:\"Ahmad\")     \n\n    }\n\n\n    @Test\n    void testMinSize() {                \n        assertTrue student.validate() // I guess this should return true but It returns false\n\n    }\n\n}\n</code></pre>\n\n<p>What is going wrong with that? How could I solve it?</p>\n\n<p>Thanks,</p>\n"},{"tags":["objective-c","ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12487375,"title":"CoverStory reporting 0% coverage after running iPhone app","body":"<p>I have just started to use the unit testing features in Xcode 4.4.1 with the LLVM Compiler. I have created some basic unit tests. I have attempted to turn on code coverage by turning on the \"Instrument Program Flow\" and \"Generate Test Coverage Files\" in the Product section. Also, I have looked through and can't see anything written in the prefix header section. From what I have read in XCode 4.4.1 this is all you have to do to get it to work and it should generate .gcno and .gcda files in the objects-normal/i386 folder which can be opened with CoverStory to view the code coverage. After I quit my app the .gcno files are getting updated but I am not getting any .gcda files. I open the .gcno file in CoverStory which is showing a 0% coverage</p>\n\n<p>Any help would be greatly appreciated</p>\n"},{"tags":["java","unit-testing","code-coverage","sonar","results"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13253472,"title":"Where Sonar is storing test results?","body":"<p>I was working with Sonar and I was confused, when I've connected to Sonar DB. I was trying to find scan results (for example, code coverage or test success %) and I've failed with that. As my sonar web app is down, I cannot check them, but I want to see them.</p>\n\n<p>What i have found, that Sonar has MEASURE_DATA table, which have measure Id's and results in BLOB. But how can i find which one is the one I need? In DB there are no foreign keys connected to these fields.</p>\n\n<p>Thanks!</p>\n"},{"tags":["javascript","unit-testing","tdd"],"answer_count":21,"favorite_count":342,"up_vote_count":417,"down_vote_count":0,"view_count":77907,"score":417,"question_id":300855,"title":"Looking for a better JavaScript unit test tool","body":"<p>Let's consider the state of JavaScript unit tests and testing tools.</p>\n\n<h2><a href=\"http://www.jsunit.net\">JsUnit</a></h2>\n\n<p>We already use it for some of our js code.</p>\n\n<h3>Pros</h3>\n\n<ul>\n<li>can be invoked from an ant build file</li>\n<li>launches browser to run the tests</li>\n<li>Eclipse plug-in</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>launches browser to run the tests</li>\n<li>Does not support js file to write the unit test code: it has to be embedded inside an html file</li>\n<li>it has not been updated for a few years</li>\n</ul>\n\n<p>Notes:\n<ul>\n<li>There is a JsUnit (2).</li>\n<li>An 'ant' is an open source build tool; \"Ant\" because it is a little thing that can build big things.</li>\n</ul><br></p>\n\n<h2><a href=\"http://code.google.com/p/rhinounit\">RhinoUnit</a></h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>ant driven</li>\n<li>supports js file</li>\n<li>very simple to use</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>Simulation of JavaScript engine: not advanced enough to support our code: I tried to run test code working with JsUnit: I encountered issue when loading our common JavaScript files</li>\n</ul>\n\n<h2>crosscheck</h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>Can be invoked from ant build file</li>\n<li>Simulates real browser behaviour</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>Simulation of JavaScript engine from a limited number of browser versions</li>\n<li>No activity for 2 years: it does not support Firefox versions 2.x nor 3.x</li>\n</ul>\n\n<h2>jsspec</h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>Runs on actual browser</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>JavaScript only framework: cannot be called from ant build file</li>\n</ul>\n\n<h2>jspec</h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>Runs on actual browser</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>Does not seem to support our code:  I tried to run test code running with js unit: I encountered issue when loading our common JavaScript files</li>\n<li>JavaScript only framework: cannot be called from ant build file,</li>\n</ul>\n\n<h2>Screw.unit</h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>Runs on actual browser</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>JavaScript only framework: cannot be called from ant build file</li>\n</ul>\n\n<p>Note: I did not try it but it is very similar to jsspec and jspec.</p>\n\n<p>It looks like JsUnit is the only choice we have. Please note it is already used in other components. It is not perfect though because it does not provide an easy way to apply the Test-Driven Development (TDD) process for the following reasons:\n - It does not provide a simple and integrated way to run JavaScript unit test\n - It forces you to write the unit tests in a html file instead of a .js file,\n - It forces you to have a local installation of the JsUnit framework in order to avoid absolute hard coded path to reference js unit files.</p>\n\n<p>As a consequence, you have to switch back and forth from you IDE and all the browsers we want to support while \"TDDing\" in JavaScript. It is feasible but I do not think it is very effective (I may be wrong here).</p>\n\n<p>Also I still need to look at a proper JavaScript editor or Eclipse plug-in allowing easy referencing and refactoring. There is the JSTD one which is part of WTP, however I have not played with it enough in order to have a good idea of it.</p>\n\n<p>As a conclusion, I do not think we have the tools to be fully \"TDD\" compliant.  We can be TOD (Test Oriented Development), but I have not found any tool that allows us to work with JavaScript as efficiently as with Java. Once again, the ideal solution would be to have something identical to JUnit.</p>\n\n<p>What JavaScript unit testing tools do you use?</p>\n\n<p>Recent Entries: </p>\n\n<ul>\n<li><a href=\"http://www.notesfromatooluser.com/\">Mark Levison's Blog</a>:</li>\n<li><a href=\"http://www.notesfromatooluser.com/2008/06/agilescrum-smells.html\">Agile/Scrum Smells</a>:  </li>\n<li><a href=\"http://www.notesfromatooluser.com/2008/10/agile-games-for-making-retrospectives-interesting.html\">Agile Games for Making Retrospectives Interesting</a>: </li>\n</ul>\n"},{"tags":["javascript","unit-testing","code-coverage","requirejs","js-amd"],"answer_count":5,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":319,"score":4,"question_id":11065119,"title":"JavaScript code coverage in RequireJS / AMD modules","body":"<p>Short and seemingly stupid question because so simple and you'd think ubiquitous: has anyone gotten any kind of code coverage to work within a RequireJS front-end project (non NodeJS)?</p>\n\n<p>Seems like a stupid question because of the prevalence of TDD approaches in the JS world and the take-over of AMD development.</p>\n\n<p>I've tried a million approaches, all are lacking. My project is a Backbone project with Jasmine Unit Tests:</p>\n\n<p>1) JSTD with Coverage plugin. JSTD has trouble properly loading and instrumenting AMD modules. If I run JSTD on a single js file (combined by RequireJS optimizer) then code coverage works beautifully, EXCEPT that coverage is then collected and metrics defined on the ENTIRE file. Great, that's useless because that includes 3rd party libraries, and because I can't target a single unit to help test development. Argh.</p>\n\n<p>2) JSCoverage - total fail, doesn't like AMD modules.\n3) Chrome specific &amp; Firebug specific 'live' instrumenters - fail, don't like AMD modules.</p>\n\n<p>...</p>\n\n<p>Every approach I try seems to require massive amounts of custom work.\nSo maybe I need to spin a custom solution from scratch?</p>\n\n<p>How about the following approach: expand the RequireJS optimizer to instrument code and create coverage. It would be in-memory instrumentation which can be enabled with a require.config({ instrument: true }) flag. Every time require loads a module it automatically instruments it and places it in its module repository. Coverage statistics are collected in an object underneath the global require object and accessible from anywhere, say, after a Jasmine test-run.</p>\n\n<p>Input?</p>\n"},{"tags":["oracle","unit-testing","plsql","refactoring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13254006,"title":"What can i do in Oracle in order to preserve the savepoint if internal commit occurs?","body":"<p><strong>background:</strong>\ni'm doing some Oracle plsql refactoring; The first think that i want to accomplish is to have unit test for the principal components.</p>\n\n<p>For this i'm using ruby with the gem plsq-spec <a href=\"https://github.com/rsim/ruby-plsql-spec\" rel=\"nofollow\">https://github.com/rsim/ruby-plsql-spec</a></p>\n\n<p>In order to execute the tests several times, i'm using Oracle Savepoints after open the database conection, and doing a rollback to the savepoint before close the connection</p>\n\n<p><strong>Problem:</strong>\nSome test can't be executed more than one time, because some procedures had internal commits.</p>\n\n<p><em>What can i do in Oracle in order to preserve the savepoint if internal commit/rollback occurs?</em></p>\n\n<p>With this information in the note apparently what I want is impossible\n<a href=\"http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/savepoint_statement.htm\" rel=\"nofollow\">http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/savepoint_statement.htm</a></p>\n\n<blockquote>\n  <p>A simple rollback or commit erases all savepoints. When you roll back\n  to a savepoint, any savepoints marked after that savepoint are erased.\n  The savepoint to which you roll back remains.</p>\n</blockquote>\n\n<p>so, the only solutions are?:</p>\n\n<ul>\n<li>modify the procedures</li>\n<li>erase all data before execute the tests?</li>\n</ul>\n\n<p>tks</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13254411,"title":"How would I unit test a method with side effects?","body":"<p>Given the following implementation:</p>\n\n<pre><code>class Foo {\n    public function helper() {\n        // Does something with external side effects, like updating\n        // a database or altering the file system.\n    }\n\n    public function bar() {\n        if ($this-&gt;helper() === FALSE) {\n            throw new Exception(/* ... */);\n        }\n    }\n}\n</code></pre>\n\n<p>How would I unit test <code>Foo::bar()</code> without incurring the side effects of <code>Foo::helper()</code> during testing?</p>\n\n<p>I know I can mock <code>Foo</code> and stub <code>Foo::helper()</code>:</p>\n\n<pre><code>public function testGoodBar() {\n    $mock = $this-&gt;getMock('Foo', array('helper'));\n    $this-&gt;expects($this-&gt;once())\n        -&gt;method('helper')\n        -&gt;will($this-&gt;returnValue(TRUE));\n\n    $this-&gt;assertTrue($mock-&gt;bar());\n}\n</code></pre>\n\n<p>...but this leaves the test wide open for code changes that introduce other methods which may have side effects.  Then if the test is run again without being updated, the test itself will have permanent side effects.</p>\n\n<p>I could also mock <code>Foo</code>, such that all its methods get mocked and won't produce side effects:</p>\n\n<pre><code>public function testGoodBar() {\n    $mock = $this-&gt;getMock('Foo');\n    $this-&gt;expects($this-&gt;once())\n        -&gt;method('helper')\n        -&gt;will($this-&gt;returnValue(TRUE));\n\n    $this-&gt;assertTrue($mock-&gt;bar());\n}\n</code></pre>\n\n<p>...but then even <code>Foo::bar()</code> gets mocked, which is bad, since that's the method we want to test.</p>\n\n<p>The only solution I could come up with is explicitly mocking all methods <em>except</em> the one under test:</p>\n\n<pre><code>public function testGoodBar() {\n    $mock = $this-&gt;getMock('Foo', array_diff(\n        get_class_methods('Foo'),\n        'bar'\n    ));\n\n    $this-&gt;expects($this-&gt;once())\n        -&gt;method('helper')\n        -&gt;will($this-&gt;returnValue(TRUE));\n\n    $this-&gt;assertTrue($mock-&gt;bar());\n}\n</code></pre>\n\n<p>...but this seems kludgy, and I feel like I'm missing something obvious.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":321,"score":1,"question_id":6918061,"title":"How to unittest factory method?","body":"<p>I have a question regarding unit-testing of factory method.\nLet say we have following code and want to test Foo.ToBar method.</p>\n\n<pre><code>class Bar\n{\n    public Bar(int someparam)\n    {\n    }\n}\n\nclass Foo\n{\n    int m_someprivate;\n\n    public Foo()\n    {\n        m_someprivate = 1;\n    }\n\n    public Bar TooBar()\n    {\n        return new Bar(m_someprivate);\n    }\n}\n</code></pre>\n\n<p>I saw two different methods. One of them will be something like that</p>\n\n<pre><code>[Test]\nvoid TooBarTest()\n{\n    Foo foo = new Foo();\n\n    Bar result = foo.TooBar();\n\n    Assert.AreEqual(new Bar(1), result);\n}\n</code></pre>\n\n<p>It's very straight forward. However, I don't like it for two reasons</p>\n\n<p>a) We inadvertent test part of Bar class while testing Foo class. As example, if Bar constructor throws than our test will fail, which is kind of wrong, because\nFoo class is fine. It's a Bar class which have a problem.</p>\n\n<p>b) I don't like that production code is used in Assert new Bar(1). I would rather prefer to use some constant than some code which \nmay as example return different results depending on some external state (etc).</p>\n\n<p>The other method which I saw is based on creation of standalone factory, which will create Bar</p>\n\n<pre><code>class Bar \n{\n    public Bar(int someparam)\n    {\n    }\n}\n\ninterface IBarFactory\n{\n    Bar create(int someparam);\n}\n\nclass BarFactory : IBarFactory\n{\n    public Bar create(int someparam)\n    {\n        return new Bar(someparam);\n    }\n}\n\nclass Foo\n{\n    int m_someprivate;\n    BarFactory m_barFactory;\n\n    public Foo()\n    {\n        m_someprivate = 1;\n        m_barFactory = new BarFactory();\n    }\n\n    public Bar TooBar()\n    {\n        return m_barFactory.create(m_someprivate);\n    }\n\n    public void setBarFactory(BarFactory barFactory)\n    {\n        m_barFactory = barFactory;\n    }\n}\n\n\n[Test]\nvoid TooBarTest()\n{\n    Mockery mockery = new Mockery()\n    IBarFactory barFactoryMock = mockery.NewMock&lt;IBarFactory&gt;();\n    Expect.Once.On(barFactoryMock).Method(\"create\").With(new Object[] { 1 }).Will(Return.Value(new Bar(1)); \n\n    Foo foo = new Foo();\n    foo.setBarFactory(barFactoryMock);\n\n    foo.ToBar();\n}\n</code></pre>\n\n<p>It looks like it's better way. However, I don't like that we have to create factory interface, factory, factory setter and make test more complex, just to test 1 line of code. </p>\n\n<p>What are your thoughts on that? What do you prefer? Do you have any other method of testing it?</p>\n"},{"tags":["android","unit-testing","maven"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13253906,"title":"Android Maven Plugin: Choose packages for testcases to be executed","body":"<p>I am executing unit testing of my Android App with Maven on a Jenkins server.</p>\n\n<p>Everything works as expected, but when I want to specify multiple packages for testing the unit tests are not executed anymore. Maybe it's just my misunderstanding of the syntax in the pom.xml? I thought that you could add multiple packages for unit testing.</p>\n\n<pre><code>&lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;com.jayway.maven.plugins.android.generation2&lt;/groupId&gt;\n            &lt;artifactId&gt;android-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;test&gt;\n                    &lt;createReport&gt;true&lt;/createReport&gt;\n                    &lt;packages&gt;\n&lt;!-- just one package works without problem --&gt;\n                        &lt;package&gt;a.b.c&lt;/package&gt;\n                        &lt;package&gt;a.b.d&lt;/package&gt;\n                    &lt;/packages&gt;\n                &lt;/test&gt;\n            &lt;/configuration&gt;\n            &lt;extensions&gt;true&lt;/extensions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n</code></pre>\n"},{"tags":["php","unit-testing","yii","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":7,"down_vote_count":2,"view_count":47,"score":5,"question_id":13249180,"title":"YII fixture issue:Exception: Unknown method: 'issues'","body":"<p>I have discovered Yii recently and am working through the book (agile web application development with yii 1.1 and php5 : <a href=\"http://rads.stackoverflow.com/amzn/click/1847199585\" rel=\"nofollow\">link</a>) now as well.</p>\n\n<ul>\n<li>I am using Yii 1.1.12, in order to follow the book with minimum problems </li>\n<li>the fixture file is in place and not returns the neccesary array</li>\n<li>fixture is added to the database    </li>\n<li>I am using a seperate test database (per the book) which is working\nfine up to this point </li>\n</ul>\n\n<p>Here is the code that I have.</p>\n\n<p><strong>protected/models/Issue.php</strong></p>\n\n<pre><code>&lt;?php\n\n/**\n * This is the model class for table \"tbl_issue\".\n */\nclass Issue extends CActiveRecord\n{\n        /**\n        **strong text** * The followings are the available columns in table 'tbl_issue':\n         * @var integer $id\n         * @var string $name\n         * @var string $description\n         * @var integer $project_id\n         * @var integer $type_id\n         * @var integer $status_id\n         * @var integer $owner_id\n         * @var integer $requester_id\n         * @var string $create_time\n         * @var integer $create_user_id\n         * @var string $update_time\n         * @var integer $update_user_id\n         */\n\n         const TYPE_BUG = 0;\n         const TYPE_FEATURE = 1;\n         const TYPE_TASK = 2;\n         const STATUS_NOT_YET_STARTED = 0;\n         const STATUS_STARTED = 1;\n         const STATUS_FINISHED = 2;\n\n        // ... GII generated stuff omitted for clarity\n\n        public function getTypeOptions()\n        {\n            return array(\n                self::TYPE_BUG =&gt; 'Bug',\n                self::TYPE_FEATURE =&gt; 'Feature',\n                self::TYPE_TASK =&gt; 'Task',\n            );\n       }\n\n        public function getStatusOptions()\n        {\n            return array(\n            self::STATUS_NOT_YET_STARTED =&gt; 'Not yet started',\n            self::STATUS_STARTED =&gt; 'Started',\n            self::STATUS_FINISHED =&gt; 'Finished',\n        );\n    }\n\n    public function getStatusText()\n    {\n        $statusOptions = $this-&gt;statusOptions;\n        return isset($statusOptions[$this-&gt;status_id]) ?\n                $statusOptions[$this-&gt;status_id] :\n                \"unknown status ({$this-&gt;status_id})\";\n    }\n\n    public function getTypeText()\n    {\n        $typeOptions = $this-&gt;typeOptions;\n        return isset($typeOptions[$this-&gt;type_id]) ?\n                $typeOptions[$this-&gt;type_id] :\n                \"unknown type ({$this-&gt;type_id})\";\n    }\n}\n</code></pre>\n\n<p><strong>protected/tests/unit/IssueTest.php</strong></p>\n\n<pre><code>&lt;?php\nclass IssueTest extends CDbTestCase\n{\n    public $fixtures = array(\n    'projects' =&gt; 'Project',\n    'issues' =&gt; 'Issue',\n    );\n\n    public function testGetTypes()\n    {\n        $options = Issue::model()-&gt;typeOptions;\n        $this-&gt;assertTrue(is_array($options));\n        $this-&gt;assertTrue(3 == count($options));\n        $this-&gt;assertTrue(in_array('Bug', $options));\n        $this-&gt;assertTrue(in_array('Feature', $options));\n        $this-&gt;assertTrue(in_array('Task', $options));\n    }\n\n    public function testGetStatuses()\n    {\n        $options = Issue::model()-&gt;statusOptions;\n        $this-&gt;assertTrue(is_array($options));\n        $this-&gt;assertTrue(3 == count($options));\n        $this-&gt;assertTrue(in_array('Not yet started', $options));\n        $this-&gt;assertTrue(in_array('Started', $options));\n        $this-&gt;assertTrue(in_array('Finished', $options));\n    }\n\n    public function testGetStatusText()\n    {\n        $this-&gt;assertTrue('Started' == $this-&gt;issues('issueBug')-&gt;getStatusText());\n    }\n\n    public function testGetTypeText()\n    {\n        $this-&gt;assertTrue('Bug' == $this-&gt;issues('issueBug')-&gt;getTypeText());\n\n    }\n}\n</code></pre>\n\n<p>It's probably some really silly typo, but I can't seem to find it. Any help would be much appreciated. Thanks! </p>\n"},{"tags":["unit-testing","scala","servlets","initialization","scalatra"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13250475,"title":"Scalatra Servlet init() during test (Jetty ServletTester)","body":"<p>I am testing a Scalatra servlet that does some important initialization in its <code>init(context: ServletContext)</code> method.</p>\n\n<p>During tests (with <a href=\"http://www.scalatra.org/guides/testing.html\" rel=\"nofollow\">ScalatraSuite</a>) that <code>init</code> is not executed.\nHow should I do my <em>important</em> initialization when I am testing?</p>\n\n<p>That <a href=\"http://www.scalatra.org/guides/testing.html\" rel=\"nofollow\">Scalatra testing page</a> (section \"Testing FAQ\") does not reveal that.</p>\n\n<p><strong>Extra Info:</strong><br/>\nThe \"Testing FAQ\" section states</p>\n\n<blockquote>\n  <p>scalatra-test is built on Jetty's [ServletTester][3]</p>\n</blockquote>\n\n<p>but I also could not extract any information from the internet on how to run the init if I were coding in java.</p>\n"},{"tags":["unit-testing","sharepoint2007"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":6,"score":1,"question_id":13250408,"title":"Is it possible to get sharepoint context through moles in moss 2007?","body":"<p>My project is created in moss 2007 with VSTS 2008. Now we are planning to automate unit testing,\nIs it possible to get sharepoint context through moles in moss 2007? because we are not able to get any sharepoint object in unite testing.</p>\n\n<p>Thanks\nSaurabh </p>\n"},{"tags":["unit-testing","scala","object","initialization","scalatra"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13250044,"title":"cake pattern + library dependency + tests = object recreation madness","body":"<p><strong>Why is my <code>Aggregator</code> object being recreated</strong> multiple times?</p>\n\n<p>I have a multi-module sbt project.<br/>\nOne project contains a scalatra servlet, and it depends on another (library-) project, with does something with akka actors.</p>\n\n<p>The library is written using the cake pattern (as described in the 2nd half of <a href=\"http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/\" rel=\"nofollow\">this post</a>), because that makes injecting \"fake\" implementations of complicated actors easier for testing.</p>\n\n<p>Now I want to use this library in my scalatra web project. Therefor I continue with the cake pattern in my scalatra web project:</p>\n\n<pre><code>package web\nimport library.{ComponentRegistry =&gt; LibraryComponentRegistry}\ntrait ComponentRegistry extends\n    LibraryComponentRegistry //taking the default/non-test ComponentRegistry from the library (includes reference to Aggregator object)\n{\n    //No web-project-internal dependencies so far\n}\n</code></pre>\n\n<p>In this project I am using <a href=\"http://www.scalatra.org/guides/testing.html\" rel=\"nofollow\">SclatraSuite</a> to test if web requests are answered by the proper responses. During such requests, code from my library is executed. This is done by calling the <code>retrieve</code> method on an <code>Aggregator</code> object in my library. A reference to this object is mixed in with the servlet via the cake pattern:</p>\n\n<pre><code>class Scalatra extends LifeCycle with\n    ComponentRegistry //&lt;= makes aggregator accessible\n{\n    override def init(context: ServletContext) {\n    aggregator.start()\n        context.mount(new WebServlet, \"/web/*\")\n    }\n}\nclass WebServlet extends ScalatraServlet with ScalateSupport with\n    ComponentRegistry //&lt;= makes aggregator accessible\n{\n    get(\"/\") {\n        aggregator.retrieve() //call to library functionality\n        //...\n    }\n    //more request handlers that do not invoke library code\n}\n</code></pre>\n\n<p>Since the <code>override def init</code> is not executed during test, I used <code>with BeforeAndAfterAll</code> to do the <code>aggregator.start()</code> myself.<br/>\n<strong>During testing with ScalatraSuite, I found out that the <code>Aggregator</code> object is recreated for every web request that invokes library code.</strong> As a result, the <code>aggregator.start()</code> initialization (which sets a few internal references) is then omitted, but the complex Akka actor system stays initialized from the first time it <em>was</em> executed, meaning I cannot just blindly re-<code>start()</code> the <code>aggregator</code>. With the internal references not properly set, I essentially get a null ref exception from my library's code.</p>\n\n<p>Does this object recreation not violate scala's principles? How can I combat this/work around it?</p>\n"},{"tags":["unit-testing","scala","tdd"],"answer_count":3,"favorite_count":7,"up_vote_count":27,"down_vote_count":0,"view_count":8351,"score":27,"question_id":741390,"title":"Unit testing Scala","body":"<p>I just recently started learning the Scala language and would like to do it in <a href=\"http://en.wikipedia.org/wiki/Test-driven%5Fdevelopment\" rel=\"nofollow\">TDD</a>-way. Could you share your experiences on the unit testing frameworks there are for Scala and the pros/cons of them.</p>\n\n<p>I'm using IntelliJ IDEA for Scala development, so it would be nice to be able to run the tests with IDE-support.</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13247434,"title":"db.Refresh(System.Data.Objects.RefreshMode.StoreWins, db.Users);","body":"<p>I can't figure out why I'm receiving an error in my <code>db.Refresh(System.Data.Objects.RefreshMode.StoreWins, db.Users);</code> line.</p>\n\n<pre><code>Error   1   'TaskMgr.Models.taskModelContainer' does not contain a definition for 'Refresh' and no extension method 'Refresh' accepting a first argument of type 'TaskMgr.Models.taskModelContainer' could be found (are you missing a using directive or an assembly reference?)\n</code></pre>\n\n<p>Here's my test method where the error exists:</p>\n\n<pre><code>[TestMethod]\n    public void TestMethod1()\n    {\n        try\n        {\n\n        taskModelContainer db = new taskModelContainer();\n\n        string Username = \"789zxc@t.cm\";\n        string Password = \"abc123rt\";\n        string Role = \"User\";\n        string Name = \"lykers\";\n        int subsiteID = 1;\n\n        TaskMgr.Models.User UserEntity = new TaskMgr.Models.User();\n\n        UserEntity.Username = Username;\n        UserEntity.Password = Password;\n        UserEntity.Role = Role;\n        UserEntity.Name = Name;\n        UserEntity.subsiteID = subsiteID;\n\n        UserController User = new UserController();\n\n        ActionResult result = User.Create(UserEntity);\n\n        int id = Convert.ToInt32(User.ViewBag.id);\n        User Users = db.Users.Single(e =&gt; e.userID == id);\n\n        Assert.AreEqual(UserEntity.Username, Users.Username);\n        Assert.AreEqual(UserEntity.Password, Users.Password);\n        Assert.AreEqual(UserEntity.Role, Users.Role);\n        Assert.AreEqual(UserEntity.Name, Users.Name);\n        Assert.AreEqual(UserEntity.subsiteID, Users.subsiteID);\n\n       //Edit\n        var qry = from e in db.Users orderby e.userID descending select e.userID;\n        int eID = qry.First();\n\n\n\n        UserEntity.Username = \"456zxc@asj.v\";\n        UserEntity.Password = \"asc45k\";\n        UserEntity.Role = \"Administrator\";\n        UserEntity.Name = \"sfscf\";\n        UserEntity.subsiteID = 3;\n\n        //get latest\n        db.Refresh(System.Data.Objects.RefreshMode.StoreWins, db.Users);\n        //db.Load(MergeOption.OverwriteChanges);\n\n\n        ActionResult result2 = User.Edit(UserEntity);\n\n\n        int id1 = Convert.ToInt32(User.ViewBag.id);\n        User Users1 = db.Users.Single(e =&gt; e.userID == id1);\n\n        Assert.AreEqual(UserEntity.Username, Users1.Username);\n        Assert.AreEqual(UserEntity.Password, Users1.Password);\n        Assert.AreEqual(UserEntity.Role, Users1.Role);\n        Assert.AreEqual(UserEntity.Name, Users1.Name);\n        Assert.AreEqual(UserEntity.subsiteID, Users1.subsiteID);\n\n        //delete\n\n        int userID = eID;\n\n        ActionResult result3 = User.DeleteConfirmed(UserEntity.userID);\n\n        var del = from e in db.Users where e.userID == UserEntity.userID select e;\n        var delete = del.Count();\n\n        Assert.AreEqual(0, delete);\n\n        }\n</code></pre>\n\n<p>The code does unit test for create, edit, delete controller. I wanted to refresh my database so that the <code>Assert.AreEqual</code> below Edit will not get an exception/error. Any ideas about the issue?</p>\n"},{"tags":["unit-testing","angularjs","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13236570,"title":"Testing AngularJS code that running inside the main module .run method","body":"<p>So I am start to write unit test for an AngularJS application I wrote.  This application is protected with a login page so that if the username in not logged in, any request to any page except the login page will redirect the login page.  This logic is executed from the main modules .run() method since it only needs to run once, when the application starts, however is there a way to test code that is executed from within the main modules .run() method?  I ahve the follow test code:</p>\n\n<pre><code>describe('Login Controller', function(){\n    'use strict';\n\n    var scope, controller, $httpBackend, $resource, callback;\n\n    beforeEach(module('application'));\n\n    beforeEach(inject(function($injector, $rootScope, $controller, $http, $location, authentication, session) {\n        $httpBackend = $injector.get('$httpBackend');\n        $httpBackend.expectGET('/api/v1/authentication').respond({status: 'success', data: null});\n        $resource = $injector.get('$resource');\n        callback = jasmine.createSpy();\n        scope = $rootScope.$new();\n        controller = new $controller('Login', {\n            $scope: scope,\n            $http: $http,\n            $location: $location,\n            authentication: authentication,\n            session: session\n        });\n    }));\n\n    afterEach(function() {\n        $httpBackend.verifyrifyNoOutstandingExpectation();\n        $httpBackend.verifyNoOutstandingRequest();\n    });\n\n    it('should verify all default values for controller', function() {\n        expect(scope.username).toEqual('');\n        expect(scope.password).toEqual('');\n        expect(scope.displayApplicationLoad).toEqual(false);\n        expect(angular.isFunction(scope.login)).toEqual(true);\n        expect(angular.isFunction(scope.logout)).toEqual(true);\n        expect(scope.loggedIn).toEqual(false);\n        expect(scope.headerTemplate).toEqual('/templates/core/header.html');\n        expect(scope.footerTemplate).toEqual('/templates/core/footer.html');\n    });\n});\n</code></pre>\n\n<p>The issue is that the code running inside the main modules .run() method is not taking into account the</p>\n\n<pre><code>$httpBackend.expectGET('/api/v1/authentication').respond({status: 'success', data: null});\n</code></pre>\n\n<p>line.  Should I be placing this logic somewhere else so that I can unit test this code?</p>\n"},{"tags":["unit-testing","selenium","automated-tests"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":166,"score":4,"question_id":10655324,"title":"Sauce labs alternative","body":"<p>We're looking into automating our web ui using either Microsoft's coded ui tests or Telerik TestStudio framework.  I would love to run our tests using a service like Sauce Labs however, sauce labs requires selenium tests.  Is anyone aware of some service similar to sauce labs to run web tests other than selenium?</p>\n"},{"tags":["mysql","ruby-on-rails","ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13240175,"title":"How to change test database schema (rails unit test)","body":"<p>I am running into a frustrating issue when trying to unit test a specific function of my app.</p>\n\n<p>The process is carried out as such:</p>\n\n<ol>\n<li>Create a temporary 'audience' table</li>\n<li>Call function foo, which inserts certain user data into the 'audience' table</li>\n<li>Drop the 'audience' table</li>\n</ol>\n\n<p>In order to test function foo, I need to create the temporary table within my unit test.  My plan is to create the table within the setup method, and drop it within the teardown method.  I'll call function foo, and depending on if data is inserted into 'audience', that will determine if my test passed or failed.  There's only one problem.  Changing the database schema within the unit test file seems to cause problems.  The error that I get is:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: Mysql2::Error: SAVEPOINT active_record_1 does not exist: ROLLBACK TO SAVEPOINT active_record_1\n</code></pre>\n\n<p>It seems like changing the schema ruins the rollback feature that Rails implements in the unit tests.  Is there any way that I can create and drop this table outside of the rollback scope? One idea I had to get around this was to create a migration that added the 'audience' table to my test database, but I'd like to keep everything contained within the same unit test file.</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13241809,"title":"PHPUnit stub method returning NULL?","body":"<p>I'm trying to mock a singleton using <a href=\"http://sebastian-bergmann.de/archives/882-Testing-Code-That-Uses-Singletons.html\" rel=\"nofollow\">this method described by the author of PHPUnit</a> and stub one of its methods:</p>\n\n<pre><code>public function setUp() {\n    $this-&gt;_foo = $this-&gt;getMockBuilder('Foo')\n        -&gt;disableOriginalConstructor()\n        -&gt;getMock();\n\n    $this-&gt;_foo-&gt;expects($this-&gt;any())\n        -&gt;method('bar')\n        -&gt;will($this-&gt;returnValue('bar'));\n\n    var_dump($this-&gt;_foo-&gt;bar());\n}\n</code></pre>\n\n<p>The problem is that this dumps <code>NULL</code> every time.  As I understand it, when you mock an object, all the methods are replaced with stubs that return <code>NULL</code> unless explicitly stubbed like I'm doing.  So, since I've stubbed the <code>bar()</code> method, why is it not dumping the expected <code>'bar'</code> string?  What have I done wrong?</p>\n"},{"tags":["visual-studio-2010","unit-testing","asp.net-membership","membership-provider","roleprovider"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":587,"score":1,"question_id":10939815,"title":"\"The role manager feature has not been enabled\" error during unit testing of SQL Server Role Provider","body":"<p>I have a class library I'm using to wrap the SQL Server Membership and Role provider API's. I attempted to test my first method in my MSTest unit test class, but I got the error, \"The role manager feature has not been enabled\".</p>\n\n<p>I've added a couple different types of config files to the test project hoping that would wire up everything, but it doesn't seem to like it.</p>\n\n<p>How do I wire up a config file with all the provider information to the test project properly?</p>\n"},{"tags":["unit-testing","testng","dbunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13240260,"title":"DBUnit duplicate rows removal","body":"<p>Need to know how to remove duplicate rows in dataset .\nI am gathering data from two different databases (all columns are same in both of them) and they have some same rows.</p>\n\n<p>I use QueryDataSet two times. I merge them by using CompositeDataSet.\nThing I get is list of all rows and some of them are duplicate.</p>\n\n<p>Is there an easy way to delete those duplicates and to order them somehow? \nThanks in advance.</p>\n"}]}
{"total":15322,"page":2,"pagesize":100,"questions":[{"tags":["java","unit-testing","junit","powermock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13240186,"title":"PowerMock - IllegalStateException: Must replay Class XXX to get configured expectation","body":"<pre><code>@PrepareForTest({...,..., XXX.class})\n...\n@Test\npublic void testMethodToBeTested(){\n    XXX mockInstance = PowerMock.createMock(XXX.class); \n    ...\n    PowerMock.expectNew(XXX.class, p1, p2, p3, p4, p5).andReturn(mockInstance);\n    mockInstance.methodWithNoReturnVal();\n    expect(mockInstance.getSearchVal()).andReturn(1);\n    PowerMock.replay(mockInstance);\n    Whitebox.invokeMethod(objInstance, \"methodToBeTested\");\n\n    PowerMock.verify(mockInstance);\n}\n</code></pre>\n\n<p>Essentially, I want to test a private method: methodToBeTested(). This method instantiates an object (using the new operator) of type XXX.class and stores it into an instance variable; I mocked this object. Then, it calls methodWithNoReturnVal() via the mock, and then a getter method which I configured to return 1.</p>\n\n<p>I get the error \"IllegalStateException: Must replay class XXX.class to get configured expectation.\" </p>\n\n<p>Any help is appreciated. I am still new to PowerMock and EasyMock; since I needed to use the expectNew(...) method, I made sure to use all PowerMock api inside of the test method.   </p>\n"},{"tags":["android","unit-testing","functional-testing"],"answer_count":1,"favorite_count":4,"up_vote_count":3,"down_vote_count":0,"view_count":736,"score":3,"question_id":4140776,"title":"UnitTesting and Functional Testing on Android","body":"<p>I have created an app that sends intents among multiple activities.  After doing some research I have found that the <code>ActivityUnitTestCase</code> class is designed for unit testing while the <code>ActivityInstrumentationTestCase2</code> is designed for functional testing.  I understand the use of methods such as <code>setUp()</code>, <code>tearDown()</code>, and <code>testPreConditions()</code>.  However I am having a little difficulty in trying to figure out what <em>user-defined-tests</em> to create in the previously mentioned classes.  I know that there are a few methods that cannot be called in certain classes.  </p>\n\n<p>To be more specific, if I am in <strong>activity A</strong> and I click a button then it calls <code>startActivityForResult()</code> which starts <strong>activity B</strong>.  I then send an intent back to <strong>activity A</strong> which is handled in the <code>onActivityResult()</code> method.  How can i test that the actual result in <code>onActivityResult()</code> is equal to the expected result? </p>\n\n<p>I have been looking extensively for any kind of examples that would help clear up this confusion.  If anyone could provide any assistance i would greatly appreciate it.  </p>\n"},{"tags":["javascript","unit-testing","exception-handling","tdd"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13239547,"title":"Can someone please provide a really simple full example of assertException using jsTestDriver.js","body":"<p>I come from a heavy C# background and am currently learning my way through ASP.NET MVC with Knockout.js and JavaScript. I'm very much a TDD based person and have hit a number of snags which I seem to be struggling with. I've read a number of examples of jsTestDriver and all seem fairly straightforward until put to the test...</p>\n\n<p>Basically, what I'm trying to unit test (using JetBrains WebStorm 5.0.4 in conjunction with JsTestDriver) is a simple assertion that an exception is thrown when a certain case is met. This should be simple right? </p>\n\n<p>My actual test case looks like this in jsTestDriver (having removed any underlying basic code and simply raised the exception in the unit test function itself):</p>\n\n<pre><code>GridControllerTest.prototype.testBasicExceptionType = function () {\n\nassertException(function() {\n    throw \"InvalidDataSourceException\";\n}, \"InvalidDataSourceException\");\n</code></pre>\n\n<p>};</p>\n\n<p>Which is a test case that asserts that my function throws an exception \"InvalidDataSourceException\" doesn't it? Initially I tried this with a function that declared the type:</p>\n\n<pre><code>function InvalidDataSourceException (){}\n\nGridControllerTest.prototype.testBasicExceptionType = function () {\n\nassertException(function() {\n    throw new InvalidDataSourceException();\n}, \"InvalidDataSourceException\");\n</code></pre>\n\n<p>};</p>\n\n<p>Can anyone point out the blindingly obvious to me and tell me why I can't get such a simple test to pass? Am I misundertanding the structure of the unit test function?</p>\n"},{"tags":["java","unit-testing","junit","junit4"],"answer_count":6,"favorite_count":3,"up_vote_count":21,"down_vote_count":0,"view_count":10435,"score":21,"question_id":3693626,"title":"How to run test methods in spec order in JUnit4?","body":"<p>I want to execute test methods which are annotated by <code>@Test</code> in spec order.</p>\n\n<p>For example:</p>\n\n<pre><code>public class MyTest{\n    @Test public void test1(){}\n    @Test public void test2(){}\n}\n</code></pre>\n\n<p>I want to ensure to run <code>test1()</code> before <code>test2()</code> each time I run <code>MyTest</code>, but I couldn't find annotation like <code>@Test(order=xx)</code>.</p>\n\n<p>I think it's quite important feature for JUnit, if author of JUnit doesn't want the <strong>order feature</strong>, why? </p>\n\n<p>Thanks!</p>\n"},{"tags":["iphone","ios","ipad","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":48,"score":3,"question_id":13239398,"title":"How can I access the name of the selector that's attached to a UIGestureRecognizer?","body":"<p>I have a gesture recognizer attached to a view and I'd like to be able to unit test which method it calls when the tap occurs.  My gesture recognizer is created like so...</p>\n\n<pre><code>- (void)setupMyView {\n    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myViewTapped)];\n    self.myView.userInteractionEnabled = YES;\n    [self.myView addGestureRecognizer:tap];\n}\n</code></pre>\n\n<p>How can I access the name of the selector (myViewTapped) that is called when the tap occurs?</p>\n\n<p>Thanks so much in advance for your wisdom!</p>\n"},{"tags":["javascript","unit-testing","coffeescript","ember.js","mocha"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13239112,"title":"Looking for an example of testing Ember with Mocha","body":"<p>I can't find any examples online. It would be great to see an Ember based git repo that is using Mocha as the test framework. </p>\n"},{"tags":["unit-testing","scala","reflection","pattern-matching","case-class"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13210251,"title":"Reflection code in Scala doesn't drill down into Vector","body":"<p>This part of my application parses to and from a JSON into my objects. I created a unit test that creates a 'PurchaseOrder', transforms it into JSON and transforms it back into the same type of object, and uses reflection to check both the original and the final PurchaseOrder are identical:</p>\n\n<pre><code>val purchaseOrderJson = PurchaseOrderJson.toJson(purchaseOrder)\nval clientPurchaseOrder = PurchaseOrderJson.fromJson(purchaseOrderJson)\n\nval reflectionCheck = classOf[PurchaseOrder].getMethods.forall {\n (method: Method) =&gt;\n    if (!method.invoke(purchaseOrder).equals(method.invoke(clientPurchaseOrder))) {\n      println(\"%s unequal: %s vs %s\".format(method.getName, method.invoke(purchaseOrder), method.invoke(clientPurchaseOrder)))\n      false\n    } else {\n      true\n    }\n}\n</code></pre>\n\n<p>This is the JSON:</p>\n\n<pre><code>\"purchaseOrders\": [{\n    \"id\": \"522423\",\n    \"lineItems\": [{\n        \"notes\": \"Important item\",\n        \"origin\": \"Spain\"\n      },{\n        \"notes\":null,\n        \"origin\": \"Italy\"\n    }]\n}]\n</code></pre>\n\n<p>I have the objects defined as traits:</p>\n\n<pre><code>trait PurchaseOrder {\n  def id: String\n  def lineItems: Vector[LineItem]\n}\n\ntrait LineItem {\n  def notes: Option[String]\n  def origin: String\n}\n</code></pre>\n\n<p>And the implementations as follows:</p>\n\n<pre><code>class PurchaseOrderJson(\n    @(JsonProperty @field) override val id: String,\n    @(JsonProperty @field) override val lineItems: Vector[LineItemImpl]\n) extends PurchaseOrder {\n    def this() = this(\"\",Vector.empty[LineItemImpl])\n}\n\ncase class LineItemImpl(notes: Option[String]) extends LineItem\n</code></pre>\n\n<p>Now :) my problem is I have to add a LOT of fields to LineItem and the compiler complains that I can't have more than 22 params in a case class. So what I did is rewrite LineItemImpl to look like this:</p>\n\n<pre><code>class LineItemImpl(\n    @(JsonProperty @field) override val notes: Option[String] = None\n) extends LineItem {\n    def this() = this(None)\n}\n</code></pre>\n\n<p>But now I get an error in my reflection unit test:</p>\n\n<pre><code>lineItems unequal: Vector(com.giltgroupe.purchaseorder.core.json.LineItemImpl@5b6ca395) vs Vector(com.giltgroupe.purchaseorder.core.json.LineItemImpl@3967ba17)\n</code></pre>\n\n<p>That means the two Vectors in the two objects being compared differ in the element inside. I understand this is because when I change the case class to standard class it looses some pattern match properties so now it's comparing the object address instead of the content.</p>\n\n<p>Is there any way to fix this adding some more properties or annotations to LineItemImpl? Or the only thing I can do is modify my reflection check to drill down into the Vectors? Ideally I don't want to modify the unit test.</p>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","computer-science"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13237860,"title":"Interview - Test Values","body":"<p>Ok, let's assume that I have a function that checks to see which is the most repeated number in a given array. </p>\n\n<p>This function then needs to be tested, and, need to be tested using particular values in order to make sure that the function worked correctly (Unit testing) - What are these values? I'm confused.</p>\n\n<p>P.s Why should I need to use these values, why couldn't I just debug the code, or, write it on pen and paper to see what the result SHOULD be and then match it against the value outputted?</p>\n"},{"tags":["unit-testing","zend-framework","zend-db","zend-db-table","zend-test"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12886643,"title":"using zend test dbadapter with zend db table abstract","body":"<p>Has anyone been able to to use Zend_Test_DbAdapter with Zend_Db_Table_Abstract?</p>\n\n<p>I'm trying to test a Model I created that extends Zend_Db_Table_Abstract and I get an exception regarding the primary key not being set if I use a Zend_Test_DbAdapter (other adapters like mysql or sqlite) work fine.</p>\n\n<hr>\n\n<pre><code>class Model_Category extends Zend_Db_Table_Abstract\n{\n    protected $_name = 'categories';\n\n    protected $_dependentTables = array('Model_Video');\n\n    public function getMap()\n    {\n        $map = array();\n        $rows = $this-&gt;fetchAll();\n        foreach($rows as $row)\n        {\n            $map[$row-&gt;id] = $row-&gt;name;\n        }\n\n        return $map;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Snippet from a PHPUnit test class:</p>\n\n<pre><code>protected function setUp()\n{\n    $adapter = new Zend_Test_DbAdapter();\n    $stmt = Zend_Test_DbStatement::createSelectStatement(array(\n        array('id' =&gt; 1, 'name' =&gt; 'pranks'),\n        array('id' =&gt; 1, 'name' =&gt; 'physical_feats'),\n        array('id' =&gt; 1, 'name' =&gt; 'art'),\n        array('id' =&gt; 1, 'name' =&gt; 'cute'),\n        array('id' =&gt; 1, 'name' =&gt; 'philanthropy')\n    ));\n    $adapter-&gt;appendStatementToStack($stmt);\n\n    $this-&gt;fixture = new Model_Category($adapter);\n}\n</code></pre>\n\n<p>Exceptions are thrown when exercising the Model's methods:</p>\n\n<pre><code>public function testGetMap()\n{\n    $expected = array(\n        '1' =&gt; 'pranks',\n        '2' =&gt; 'physical_feats',\n        '3' =&gt; 'art',\n        '4' =&gt; 'cute',\n        '5' =&gt; 'philanthropy'\n    );\n    $actual = $this-&gt;fixture-&gt;getMap();\n    $this-&gt;assertEquals($expected, $actual);\n}\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>Model_CategoryTest::testGetMap()\nZend_Db_Table_Exception: A table must have a primary key, but none was found\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:876\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:969\nZendFramework-1.10.6/library/Zend/Db/Table/Select.php:100\nZendFramework-1.10.6/library/Zend/Db/Table/Select.php:78\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1005\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1303\napplication/models/Category.php:35\ntests/unit/application/models/CategoryTest.php:90\n</code></pre>\n\n<hr>\n\n<p>Forcing a primary key does not work either:</p>\n\n<pre><code>protected function setUp()\n{\n    $adapter = new Zend_Test_DbAdapter();\n    $stmt = Zend_Test_DbStatement::createSelectStatement(array(\n        array('id' =&gt; 1, 'name' =&gt; 'pranks'),\n        array('id' =&gt; 1, 'name' =&gt; 'physical_feats'),\n        array('id' =&gt; 1, 'name' =&gt; 'art'),\n        array('id' =&gt; 1, 'name' =&gt; 'cute'),\n        array('id' =&gt; 1, 'name' =&gt; 'philanthropy')\n    ));\n    $adapter-&gt;appendStatementToStack($stmt);\n\n    $this-&gt;fixture = new Model_Category(array(\n        'db' =&gt; $adapter,\n        'primary' =&gt; 'id'\n    ));\n}\n</code></pre>\n\n<p>Executing the same unit test, from above results in:</p>\n\n<pre><code>Model_CategoryTest::testGetMap()\nZend_Db_Table_Exception: Primary key column(s) (id) are not columns in this table ()\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:888\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:969\nZendFramework-1.10.6/library/Zend/Db/Table/Select.php:100\nZendFramework-1.10.6/library/Zend/Db/Table/Select.php:78\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1005\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1303\napplication/models/Category.php:35\ntests/unit/application/models/CategoryTest.php:93\n</code></pre>\n"},{"tags":["unit-testing","jpa","spring-roo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13234672,"title":"How do I create a test in Spring Roo to populate a database with test data?","body":"<p>I tried modifying test cases that were generated for my entities, but when I run the tests, it doesn't leave the data in the tables.  I tried modifying the persistence.xml (changing the persistence from none to create-tables) but when I run the tests, it throws exceptions because it's trying to update/delete stuff that has foreign key dependencies.  </p>\n\n<p>Am I using the wrong tool for this?  I was hoping I'd be able to run my tests and be left with a database in a known state.  Am I using the tool wrong?</p>\n"},{"tags":["unit-testing","cppunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13162226,"title":"CppUnit - advantages and disadvantages with the xUnit based design?","body":"<p>CppUnit is designed to be similar to JUnit and other XUnit frameworks.</p>\n\n<p>What are the advantages/disadvantages of this?\nWhen should it be selected for this reason?<br>\nAnd should a different framework be preferred if the similarity has no advantages.\nIs actual use when you get started easy and intuitive?</p>\n\n<hr>\n\n<p>To start with <strong>advantages</strong>.\nDoes it plat better with some tools?\nTools for continuous integration for example?</p>\n\n<p>Is it better in a mixed environment (Like C# and C++)?</p>\n\n<p><strong>Disadvantages</strong>:\nI know it is slightly more complex to build, and thus less cross-platform than other frameworks.\nPersonally I have the impression it is easy (for a beginner) to get stuck in compile and link errors, it seems difficult to follow the actual code (In a debugger for example), and also it is not so natural to use with functions (C style interfaces).</p>\n"},{"tags":["python","unit-testing","dynamic"],"answer_count":3,"favorite_count":5,"up_vote_count":13,"down_vote_count":0,"view_count":2173,"score":13,"question_id":1193909,"title":"Python's unittest and dynamic creation of test cases","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/32899/how-to-generate-dynamic-parametrized-unit-tests-in-python\">How to generate dynamic (parametrized) unit tests in python?</a>  </p>\n</blockquote>\n\n\n\n<p>Is there a way to dynamically create <code>unittest</code> test cases? I have tried the following..</p>\n\n<pre><code>class test_filenames(unittest.TestCase):\n\n    def setUp(self):\n        for category, testcases in files.items():\n            for testindex, curtest in enumerate(testcases):\n                def thetest():\n                    parser = FileParser(curtest['input'])\n                    theep = parser.parse()\n                    self.assertEquals(theep.episodenumber, curtest['episodenumber'])\n\n                setattr(self, 'test_%s_%02d' % (category, testindex), thetest)\n</code></pre>\n\n<p>..which creates all the methods correctly (they show up in <code>dir()</code> and are callable), but unittest's test detector, nor <code>nosetest</code> executes them (\"Ran 0 tests in ...\")</p>\n\n<p>Since I may be asking the wrong question - what I am trying to achieve:</p>\n\n<p>I have a file containing test data, a list of input filenames, and expected data (simplified to <code>episodenumber</code> in the above code), stored in a Python dictionary. The key is the category, the value is a list of test cases, for example..</p>\n\n<pre><code>test_cases = {}\ntest_cases['example_1'] = [\n    {'input': 'test.01',\n    'episodenumber': 1},\n    {'input': 'test.02',\n    'episodenumber': 2}\n]\n\ntest_cases['example_2'] = [\n    {'input': 'another.123',\n    'episodenumber': 123},\n    {'input': 'test.e42',\n    'episodenumber': 32}\n]\n</code></pre>\n\n<p>Currently I just loop over all the data, call <code>self.assertEquals</code> on each test. The problem is, if one fails, I don't see the rest of the failures as they are also grouped into one test, which aborts when an assertion fails.</p>\n\n<p>The way around this, I thought, would be to (dynamically) create a function for each test case, perhaps there is a better way?</p>\n"},{"tags":["c#","unit-testing","private-methods"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13234836,"title":"how to unittest private method in c# with PrivateObject","body":"<p>Im trying to make a simple unit test of a private method and I let VS2010 autogenerate the method stubb and add the missing info: This is the code I have</p>\n\n<pre><code>[TestMethod()]\n        [DeploymentItem(\"MyPackage.Language.dll\")]\n        public void getValidCultureWithValidInputCulture()\n        {\n            CultureInfo culture = new CultureInfo(\"sv-SE\", false);\n            PrivateObject param0 = new PrivateObject(culture, new PrivateType(typeof(CultureInfo)));\n            GlobalResourceProvider_Accessor target = new GlobalResourceProvider_Accessor(param0);\n            CultureInfo expected = new CultureInfo(\"sv-SE\", false); \n            CultureInfo actual = target.getValidCulture(culture);\n            Assert.AreEqual(expected, actual);\n            Assert.Inconclusive(\"Verify the correctness of this test method.\");\n        }\n</code></pre>\n\n<p>When I run this I get a exception:</p>\n\n<pre><code>System.ArgumentException: \n      The member specified (getValidCulture) could not be found. You might need to regenerate your private accessor,\n      or the member may be private and defined on a base class. If the latter is true, you need to pass the type\n      that defines the member into PrivateObject's constructor.\n</code></pre>\n\n<p>Does anyone know what i´m doing wrong here? My Objective is to learn how to use the PrivateType and PrivateObject for private methods testing.</p>\n\n<p>EDIT:</p>\n\n<p>Im not not looking to use the PrivateObject.Invoke (it's not refactor friendly).</p>\n"},{"tags":["unit-testing","grails","junit","grails-2.0"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13232506,"title":"Grails: NPE in Unit Test","body":"<p>I'm writing a unit test for my domain class but I get a NPE when I tried to run the following test:</p>\n\n<pre><code>def st\n\nvoid setUp(){\n    super.setUp()\n    mockForConstraintsTests(Student)        \n    st=new Student(firstName:\"Feras\",lastName:\"Ahmad\")\n\n\n}\n\nvoid testMinSize() {        \n    st.firstName=\"J\"\n    assertFalse st.validate();              \n}\n</code></pre>\n\n<p>I got the NPE on the first line of testMinSize method. what is wrong with that? I think setUp method is called before every test. Is this true?</p>\n\n<p>Thanks,</p>\n"},{"tags":["xcode","unit-testing","linker-error","xcode4.5","command-line-tool"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13198130,"title":"How to set up logic unit tests target in Xcode 4.5 \"Command Line Tool\" project and avoid linker error?","body":"<p>Having trouble getting unit tests set up for a specific scenario.  Here's what I'm trying:</p>\n\n<ul>\n<li><p>In Xcode 4.5, I created a simple OSX <strong>\"Command Line Tool\"</strong> application project (Foundation).<br>\nNote that Xcode <em>does not</em> provide the option to add unit tests to a \"Command Line Tool\" project automatically &ndash; so please don't suggest ticking the ticky-box; it ain't there :-/</p></li>\n<li><p>In my project, I created a trivial example class that I'd like to test; e.g. \"Shape\".</p></li>\n<li><p>I followed instructions in Apple's <em>Xcode Unit Testing Guide</em> for <strong><a href=\"http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html\" rel=\"nofollow\">Setting Up Unit-Testing in a Project</a></strong>:</p>\n\n<ul>\n<li><p>I added a unit test target to my project, and</p></li>\n<li><p>I edited the \"Test\" scheme to run the tests in the new target.</p></li>\n</ul></li>\n<li><p>In the test project's implementation (.m) file, I added an import for <code>Shape.h</code> and code in the <code>setUp()</code> method to instantiate a shape and assign it to an instance variable.</p></li>\n</ul>\n\n<p>At that point, I decided to see if things would build and if the default test would run still.  However, when I selected <strong>Product...Test</strong> from the menu, the build failed with the following error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_OBJC_CLASS_$_Shape\", referenced from:\n      objc-class-ref in ExampleTests.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Interpreting this error is not the issue. I grok that the unit test target isn't being linked to the binary containing Shape's implementation.  However, I don't (yet) grok Xcode unit testing &amp; target configuration. So:</p>\n\n<p>What do I need to do in order to get the test target linking against the command line tool's resulting output?  Can I link to a command-line executable from the unit test target?  Apple's documentation looks specific to regular OSX applications (<code>*.app</code>) and iOS applications, and this is neither.</p>\n\n<p>I have business logic classes that I'd like to develop in a command-line tool setting (to begin with), so I'd like to understand what I need to do to get a unit test target running in a \"Command Line Tool\" type of project.  <em>Thank you!</em></p>\n\n<p>(p.s. Note that I'm <em>not</em> interested in running my unit tests <em>from</em> the command line &ndash; Stack Overflow already suggested \"similar\" questions on how to do that &ndash; but rather running unit tests <em>on</em> a \"Command Line Tool\" type <em>project</em>, and still from within Xcode.)</p>\n"},{"tags":["c++","unit-testing","eclipse-cdt","boost-test"],"answer_count":0,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":25,"score":4,"question_id":13234709,"title":"Where to find the parsed Boost.Test output in Eclipse","body":"<p>There is already a thread <a href=\"http://stackoverflow.com/questions/2491380/how-to-process-boost-test-output-with-eclipse\" title=\"How to process Boost.Test output with Eclipse\">here</a> that partially answers my question .</p>\n\n<p>On Eclipse 3.7.2 I followed the approach provided there and I could successfully accomplish the steps creating and setting up a new error parser and adding it to my current project. After executing my Boost.Test (boost rel. 1.48.0) Unit Test, on the Eclipse console I get the same output as the output I get when no parsing is done (e.g. when executing the Unit Test outside Eclipse (e.g. on a Linux terminal)). I searched for a new Eclipse console where the parsed Unit Test output could be displayed (similar to the consoles by e.g. gcov, gprof or cppcheck in Eclipse) but found nothing alike.</p>\n\n<p>Where should the parsed unit test output be displayed? In case the parsed output shall be displayed in the Eclipse Console view, are there any suggestions what might have gone wrong with the parsing in my case?</p>\n\n<p>P.S.: Thanks to casperOne and kleopatra for teaching me manners.</p>\n"},{"tags":["c++","unit-testing","eclipse-cdt","boost-test"],"answer_count":1,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":1451,"score":6,"question_id":2491380,"title":"How to process Boost.Test output with Eclipse","body":"<p>I'm using Eclipse CDT and Boost.Test(with Boost.Build). \nI would like Eclipse to parse output of Boost.Test generated during by run of test suites during build.<br>\nDoes anybody know how to  achieve this? \nThanks in advance</p>\n"},{"tags":["java","unit-testing","rest","jetty"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13233180,"title":"Unit testing a REST-Service","body":"<p>I have a REST-Service based on the <a href=\"http://sparkjava.com/\" rel=\"nofollow\">spark-framework</a>. Looks like this(simplyfied):</p>\n\n<pre><code>public void init() {\n\n    get(new Route(\"spark/favorites\") {\n        @Override\n        public Object handle(Request request, Response response) {\n            ExternalService exS= new ExternalService();             \n\n            ArrayList&lt;String&gt; favs= exS.getFavorites();\n\n            Gson gson = getGson();\n            return gson.toJson(favs);\n        }\n    });\n }\n</code></pre>\n\n<p>Now I want to write some tests for my service to see if my get/post/put/delete does what I want. \nTherefor I deploy it on an embedded Jetty during my tests.</p>\n\n<p>The problem I a facing now is that my service depends on external REST-Services. I would like to mock all calls to those (to have a fast unit test). But I have no idea how to mock inside the running service.</p>\n\n<p>Is that even possible? Should I switch to another REST-Framework?\nSuggestions?</p>\n"},{"tags":["c#","wpf","unit-testing","mvvm","icommand"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":624,"score":1,"question_id":6864233,"title":"WPF MVVM - Unit Testing a command - Private vs Public methods?","body":"<p>Basically, If I use MVVM and expose public ICommands, should my delegates be public or private?</p>\n"},{"tags":["unit-testing","visual-studio-2012","mstest"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13042671,"title":"MSTest Environment.CurrentDirectory incorrect VS 2012","body":"<p>I am using MSTest and Visual Studio 2012 for unit testing and am encountering a difference in how it runs on two different machines with regards to Environment.CurrentDirectory calls. Both machines are running the exact same tests and using the exact same .testsettings file (with all deployment turned off) yet on one the Environment.CurrentDirectory returns the bin/debug of the project (like I want) and the other returns the TestResults/.../Out as the current working directory.</p>\n\n<p>In the one that runs in the bin/debug folder the TestResults folder for the run is empty but on the other machine the TestResults folder has an AgentReset file in it and I don't know where it came from. Does anyone know why this would be occurring and if there is a config or setting somewhere where?</p>\n"},{"tags":["unit-testing","visual-studio-2012","asmx","integration-testing","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13231747,"title":"Writing unit test compatible for both asmx & wcf","body":"<p>How should I do automated unit testing of a web service(asmx) using visual studio 2012?.My web service contains lots of methods(108) with a dependency of some function to be executed before executing others. Secondly, same unit test will be used for unit testing WCF service(almost same counterpart) in future.so how to take care while writing unit test?</p>\n"},{"tags":["unit-testing","grails","metaprogramming"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13230823,"title":"Grails metaclass modification not reliable within unit tests","body":"<p>In a grails 2 project I'm using groovy's metaclass programming to add some methods to my domain classes.</p>\n\n<p>Everything is working fine at runtime and I can run my integration tests fine.</p>\n\n<p>But for unit tests I have some issues.</p>\n\n<p>I have created a test mixin that is in charge of initializing the metaclass programming part.    </p>\n\n<p>This mixin is not running reliably: \nthe methods added to the metaclass are not available, or they are available after a first call, or they are available only after a previous <code>grails test-app unit:</code> command has been called.<br>\nThis is quite a problem for continuous build.  </p>\n\n<p>You should be able to reproduce this issue (at least with grails 2.0.4) by<br>\n<strong>0) create a new grails projects</strong></p>\n\n<p><strong>1) add a domain object</strong></p>\n\n<pre><code>create-domain-class playground.Data\n</code></pre>\n\n<p><strong>2) add this class to your src/groovy/playground dir</strong></p>\n\n<pre><code>    package playground\n\nimport grails.test.mixin.domain.DomainClassUnitTestMixin\nimport grails.test.mixin.support.GrailsUnitTestMixin\nimport org.codehaus.groovy.grails.commons.GrailsApplication\nimport org.codehaus.groovy.grails.commons.GrailsDomainClass\nimport org.junit.Before\n\nclass EnhanceDomainTestMixin {\n\n  boolean enhancerMethodCalled = false;\n  GrailsApplication application\n  MetaMethod mockDomainMethod\n\n  //replace the mockDomain Method from DomainClassUnitTestMixin with this closure\n  def enhancedMockDomain = { Class cl, List list -&gt;\n    def enhanced =cl.metaClass.getMetaMethod(\"isEnhanced\")\n    try {\n      //run the mockDomain method to have the mocked domain class registered in the grails application\n      mockDomainMethod.invoke(delegate, cl, list)\n    }\n    finally {\n      //enhance the grails domain with a new method\n      def domain = application.getDomainClass(cl.name) as GrailsDomainClass\n      domain.metaClass.isEnhanced = { return true; }\n      assert domain.newInstance().isEnhanced();\n    }\n  }\n\n  @Before void runDomainEnhancer() {\n    enhancerMethodCalled = true;\n    //GrailsUnitTestMixin.initGrailsApplication() should have already been called. (at least this was not an issue here)\n    application = GrailsUnitTestMixin.grailsApplication\n\n    //pick the mockDomain method\n    mockDomainMethod = DomainClassUnitTestMixin.metaClass.pickMethod(\"mockDomain\", Class, List)\n\n    //if the picked mockDomain has never been enhanced, wrap it.\n    if(mockDomainMethod != enhancedMockDomain) {\n      DomainClassUnitTestMixin.metaClass.mockDomain = enhancedMockDomain\n    }\n  }\n}\n</code></pre>\n\n<p><strong>3) Add this small utils class (in test/unit/playground)</strong></p>\n\n<pre><code>package playground\n\nclass TestSetup {\n\n  static Data d1\n\n  static void setup() {\n    d1 = new Data()\n    assert d1.isEnhanced()\n  }\n}\n</code></pre>\n\n<p><strong>4) Add these tests into the unit test already created by grails DataTests</strong></p>\n\n<pre><code>package playground\n\nimport grails.test.mixin.*\n\n@TestFor(Data)\n@TestMixin(EnhanceDomainTestMixin)\nclass DataTests {\n\n  void testIsEnhancedLocal() {\n    assert enhancerMethodCalled\n    Data d = new Data()\n    assert d.isEnhanced()\n  }\n\n  void testIsEnhancedLocalSecondTime() {\n    assert enhancerMethodCalled\n    Data d = new Data()\n    assert d.isEnhanced()\n  }\n\n  void testIsEnhancedGlobalFirstTime() {\n    assert enhancerMethodCalled\n    TestSetup.setup()\n    assert TestSetup.d1 != null\n  }\n\n  void testIsEnhancedGlobalSecondTime() {\n    assert enhancerMethodCalled\n    TestSetup.setup()\n    assert TestSetup.d1 != null\n  }\n\n}\n</code></pre>\n\n<p>Now run this command:\n<code>grails test-app unit:</code></p>\n\n<p>you should have something like this output:</p>\n\n<pre><code>| Completed 4 unit tests, 4 failed in 1651ms\n| Tests FAILED  - view reports in target\\test-reports\n</code></pre>\n\n<p>Now run the this command again (sometime one more is needed):<br>\n<code>grails test-app unit: playground.DataTests</code></p>\n\n<pre><code>testMixin&gt; grails test-app unit: playground.DataTests\n| Completed 4 unit tests, 0 failed in 1384ms\n| Tests PASSED - view reports in target\\test-reports\n</code></pre>\n\n<p>So does anyone has a clue of why the metaClass modification is not reliable while running unit tests ? And how to workaround this issue ?</p>\n"},{"tags":[".net","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13230375,"title":"SetUp is not working for NUnit","body":"<p>I have following NUnit code. I am using a switch case statement inside [SetUp]</p>\n\n<p>Before the test is run it is expected to insert data into database; but it is not inserting data. What need to be corrected here?</p>\n\n<p>REFERENCE:</p>\n\n<ol>\n<li><a href=\"http://programmers.stackexchange.com/questions/173651/nunit-setup-and-teardown\">http://programmers.stackexchange.com/questions/173651/nunit-setup-and-teardown</a></li>\n</ol>\n\n<p>CODE</p>\n\n<pre><code>     [SetUp]\n    public void TestSetUp()\n    {\n        switch (TestContext.CurrentContext.Test.FullName)\n        {\n            case \"GetApplicationsTest\":\n                GetApplicationsTestSETUPHElper();\n                break;\n\n            case \"DeleteApplicationTest\":\n                GetApplicationsTestSETUPHElper();\n                break;\n\n        }\n\n\n    }\n\n    private void GetApplicationsTestSETUPHElper()\n    {\n        SqlConnection connection = new SqlConnection(connectionString);\n        using (connection)\n        {\n            string commandText = \"INSERT INTO Status_Type VALUES (889,'s2','UT s2')\";\n            SqlCommand command = new SqlCommand(commandText, connection);\n            command.CommandType = System.Data.CommandType.Text;\n            connection.Open();\n            command.ExecuteNonQuery();\n        }\n    }\n\n    private void DeleteApplicationTestSETUPHElper()\n    {\n        SqlConnection connection = new SqlConnection(connectionString);\n        using (connection)\n        {\n            string commandText = \"INSERT INTO Status_Type VALUES (890,'s3','UT s3')\";\n            SqlCommand command = new SqlCommand(commandText, connection);\n            command.CommandType = System.Data.CommandType.Text;\n            connection.Open();\n            command.ExecuteNonQuery();\n        }\n    }\n\n    [Test]\n    public void GetApplicationsTest()\n    {\n\n        ApplicationBL application = new ApplicationBL(connectionString);\n        ApplicationSearch applicationSearch = new ApplicationSearch();\n        applicationSearch.ApplicationID = 1;\n        //applicationSearch.ApplicationName = \"Test1\";\n        //applicationSearch.ApplicationURL = \"Test1\";\n        //applicationSearch.StatusCode = 1;\n        Collection&lt;Application&gt; applications =  application.GetApplications(applicationSearch);\n    }\n\n    [Test]\n    public void DeleteApplicationTest()\n    {\n\n        ApplicationBL application = new ApplicationBL(connectionString);\n        ApplicationSearch applicationSearch = new ApplicationSearch();\n        applicationSearch.ApplicationID = 1;\n        //applicationSearch.ApplicationName = \"Test1\";\n        //applicationSearch.ApplicationURL = \"Test1\";\n        //applicationSearch.StatusCode = 1;\n        Collection&lt;Application&gt; applications = application.GetApplications(applicationSearch);\n    }\n</code></pre>\n"},{"tags":["c#",".net","unit-testing","garbage-collection"],"answer_count":4,"favorite_count":11,"up_vote_count":16,"down_vote_count":1,"view_count":1658,"score":15,"question_id":578967,"title":"How can I write a unit test to determine whether an object can be garbage collected?","body":"<p>In relation to <a href=\"http://stackoverflow.com/questions/578593/castle-windsor-will-my-transient-component-be-garbage-collected\">my previous question</a>, I need to check whether a component that will be instantiated by Castle Windsor, can be garbage collected after my code has finished using it. I have tried the suggestion in the answers from the previous question, but it does not seem to work as expected, at least for my code. So I would like to write a unit test that tests whether a specific object instance can be garbage collected after some of my code has run.</p>\n\n<p>Is that possible to do in a reliable way ? </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I currently have the following test based on Paul Stovell's answer, which succeeds:</p>\n\n<pre><code>     [TestMethod]\n    public void ReleaseTest()\n    {\n        WindsorContainer container = new WindsorContainer();\n        container.Kernel.ReleasePolicy = new NoTrackingReleasePolicy();\n        container.AddComponentWithLifestyle&lt;ReleaseTester&gt;(LifestyleType.Transient);\n        Assert.AreEqual(0, ReleaseTester.refCount);\n        var weakRef = new WeakReference(container.Resolve&lt;ReleaseTester&gt;());\n        Assert.AreEqual(1, ReleaseTester.refCount);\n        GC.Collect();\n        GC.WaitForPendingFinalizers();\n        Assert.AreEqual(0, ReleaseTester.refCount, \"Component not released\");\n    }\n\n    private class ReleaseTester\n    {\n        public static int refCount = 0;\n\n        public ReleaseTester()\n        {\n            refCount++;\n        }\n\n        ~ReleaseTester()\n        {\n            refCount--;\n        }\n    }\n</code></pre>\n\n<p>Am I right assuming that, based on the test above, I can conclude that Windsor will not leak memory when using the NoTrackingReleasePolicy ?</p>\n"},{"tags":["visual-studio","unit-testing","nunit","build-automation"],"answer_count":1,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":1529,"score":5,"question_id":3475256,"title":"Visual Studio and NUnit - automatic running of unit tests on build","body":"<p>I would love to know if there is a way I can get Visual Studio to run unit tests corresponding to a given assembly whenever I build it.</p>\n\n<p>Given a solution containing projects structured like this:</p>\n\n<pre><code>Assembly1\n\nAssembly1.Tests \n\nAssembly2 \n\nAssembly2.Tests\n</code></pre>\n\n<p>Is there a way I can get the unit tests in <code>Assembly2.Tests</code> to run whenever <code>Assembly2</code> is built?</p>\n\n<p>That would be amazing.</p>\n\n<p>I'm using Visual Studio 2008 Standard Edition.</p>\n"},{"tags":["sqlite","unit-testing","fluent-nhibernate","automapping"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13178629,"title":"NHibnernate SQL Lite in memory unit testing doesn't work the same as a physical db","body":"<p>I am in the process of building a \"get to know NHibernate project).</p>\n\n<p>My unit tests (nunit) provide the repository layer the same configuration as the normal mvc site but using \"SQLiteConfiguration.Standard.InMemory()\" instead of \"MsSqlConfiguration.MsSql2008\".  My hope is that I can use fluent nhibernate and automapping exactly the same way but have a quick in memory db for tests and a real db for the app.</p>\n\n<p>In the repository constructor it creates the Session object for all queries to use and also implements IDisposable which will ensure the session is dealt with correctly.  For example a save article method would look like:</p>\n\n<pre><code>    public void SaveArticle(Article article)\n    {            \n        Session.SaveOrUpdate(article);      \n        Session.Flush();\n    }\n</code></pre>\n\n<p>So far the MVC site all seems to work correctly, and my tests are passing.  I think I have come across an issue that must be a problem with my design.</p>\n\n<p>So far I have two objects:</p>\n\n<pre><code>class Article\n{\n    public virtual int Id {get; set; }\n    public virtual IList&lt;Tag&gt; Tags {get; set; }\n }\n\n class Tag\n {\n    public virtual int Id {get; set; }\n    public virtual string Text {get; set; }\n }\n</code></pre>\n\n<p>I only want the DB to store ONE instance of each tag.  So many articles could use the same tag.  So I wrote this test:</p>\n\n<pre><code>    [Test]\n    public void TestDeletingTagWillNotDeleteOthersTagV2()\n    {\n        Article article = new Article();\n        article.Tags.Add(new Tag { Text = \"C#\" });\n        article.Tags.Add(new Tag { Text = \"VB\" });\n        Service.SaveArticle(article);\n\n        Article article2 = new Article();\n        article2.Tags.Add(new Tag { Text = \"C#\" });\n        Service.SaveArticle(article2);\n\n        Guid article1Id = article.Id;\n        Guid article2Id = article2.Id;\n\n        article = null;\n        article2 = null;\n\n        Article article3 = Service.GetArticle(article1Id);\n        Article article4 = Service.GetArticle(article2Id);\n\n        Assert.AreEqual(2, article3.Tags.Count);\n        Assert.AreEqual(1, article4.Tags.Count);\n\n        Assert.AreEqual(2, Service.Tags.Count);\n\n        article3.Tags.RemoveAt(0);\n        Service.SaveArticle(article3);\n\n        Article article5 = Service.GetArticle(article1Id);\n        Article article6 = Service.GetArticle(article2Id);\n\n        Assert.AreEqual(1, article5.Tags.Count);\n        Assert.AreEqual(1, article6.Tags.Count);\n\n        Assert.AreEqual(2, Service.Tags.Count);\n    }\n</code></pre>\n\n<p>This test passes, but I believe it should fail.  (it does when you run the MVC site i.e. the first article only has one tag, \"VB\" not \"C#\" and \"VB\".</p>\n\n<p>I believe its because as the session is still open nhibernate is still holding onto everything and remembers what there was.</p>\n\n<p>My main question is how do I test this with the in memory db?  How do I ensure that after the saves and removal of a shared tag the articles still have what they should have?</p>\n\n<p>The table structure it has created is, (which I feel is wrong, should have a link table):</p>\n\n<pre><code>Article:\n    Id (PK, uniqueid, not null)\n     ...........\n\n Tag\n    Id (PK, uniqueid, not null)\n    Text (nvarchar, null)\n    Article_id (FK, uniqueid, null)\n</code></pre>\n\n<p>Not sure how to use the fluent automapping to setup a link table so that one tag can be shared across multiple Articles and one article can have many tags </p>\n\n<p>Believe I found how to ensure that the Tags and articles have a link table:</p>\n\n<pre><code>        configuration.Mappings(m =&gt; m.AutoMappings.Add((AutoMap.AssemblyOf&lt;Article&gt;())\n                            .Override&lt;Article&gt;(map =&gt; map.IgnoreProperty(x =&gt; x.IsPublished))\n                            .Override&lt;Article&gt;(map =&gt; map.HasManyToMany(a =&gt; a.Tags).Cascade.All())\n                            .Conventions.Add(DefaultCascade.All()))\n</code></pre>\n"},{"tags":["java","php","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13227898,"title":"junit integration with php based application","body":"<p>I am exploring <a href=\"http://www.junit.org/\" rel=\"nofollow\">junit</a> for unit testing. I have seen that it is java based. I have explored it and I have still some questions</p>\n\n<ol>\n<li>Can I integrate junit with php based applications for unit testing?</li>\n<li>Test cases will only be written in java? Can I write test cases in PHP using junit?</li>\n</ol>\n\n<p>I have explored tutorials and I have seen all test cases are written in Java. But I have someone who is saying it can be done. So any guide will be much appreciated.</p>\n\n<p>Regards</p>\n"},{"tags":["unit-testing","qt4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13227901,"title":"How to correctly integrate Qt's testlib with my project?","body":"<p>I checked the sample Qt Testlib project, but it seems to be a separate project.</p>\n\n<p>Now I would like to integrate that project with my current project, e.g when I finished <code>make</code>, I'd like to run <code>make test</code>, but how should I add a new make parameter by adding some lines to the <code>.pro</code> file?</p>\n\n<p>Or what's the right way to integrate it?</p>\n"},{"tags":["unit-testing","nunit"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":552,"score":4,"question_id":7114604,"title":"Nunit parameterized tests with datetime","body":"<p>Could someone tell me is it not possible with nunit to go:</p>\n\n<pre><code>[TestCase(new DateTime(2010,7,8), true)]\n        public void My Test(DateTime startdate, bool expectedResult)\n        {\n....\n}\n</code></pre>\n\n<p>I really want to put a <code>datetime</code> in there but it doesn't seem to like it. The error is:</p>\n\n<p>An attribute argument must be a constant expression, typeof expression or array creation expression of an attribute parameter type</p>\n\n<p>Some documentation I read seems to suggest you should be able to but I can't find any examples.</p>\n"},{"tags":["python","unit-testing","makefile"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":353,"score":3,"question_id":5529195,"title":"How to combine unittest results using a Makefile?","body":"<p>I want to use a Makefile to run individual test files or a combined version of all tests or a coverage report.</p>\n\n<p>I'm pretty new to Makefiles so I borrowed one and adapted it. The result is <a href=\"http://code.google.com/p/tipfy/source/browse/Makefile\" rel=\"nofollow\">here</a>.</p>\n\n<p>The problem is that <code>make test</code> will run each test in sequence and it is hard to see which ones failed when you have a bunch and the screen scrolls a lot. I like that each one uses a separate process so they don't interfere with each other, though.</p>\n\n<p>Question is: can I combine the results more nicely using only the Makefile or I need a separate script? Do you know some good examples of Makefiles to run tests?</p>\n\n<p>(I want to use Makefile + unittest + coverage only, and no other dependencies)</p>\n"},{"tags":["iphone","ios","unit-testing","ocunit","gh-unit"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13223852,"title":"iOS: How can I write a unit test that checks to see if a timer fired?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12463733/objective-c-unit-testing-dispatch-async-block\">Objective C - Unit testing dispatch_async block?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a view controller that changes the background color of my view after one second has passed, like so...</p>\n\n<pre><code>@implementation MyViewController\n- (void)viewDidLoad{\n    [super viewDidLoad];\n    [self setBackgroundColorAndTimer];\n}\n\n- (void)setBackgroundColorAndTimer\n{\n    self.view.backgroundColor = [UIColor white];\n    self.myColorTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f\n                                                         target:self\n                                                       selector:@selector(changeBackgroundColor:)\n                                                       userInfo:nil\n                                                        repeats:NO];\n}\n\n- (void)changeBackgroundColor:(NSTimer*)timer{\n    self.view.backgroundColor = [UIColor black];\n}\n@end\n</code></pre>\n\n<p>How can I write a unit test, using OCUnit or GHUnit, that tests to make sure the background color is black after one second (i.e. the timer fired)?  </p>\n\n<p>Looking at the <a href=\"http://gabriel.github.com/gh-unit/docs/appledoc_include/guide_testing.html\" rel=\"nofollow\">GHUnit async test example</a>, it's unclear to me how to take advantage of GHUnit's asynchronous testing abilities since it relies on the test code throwing notifications.  I'd like to keep my application code separate from my test code, but I can't figure out how to write a unit test to test this without adding code to my application logic to throw a notification.  </p>\n\n<p>Thanks so much in advance for your wisdom!</p>\n"},{"tags":["ruby-on-rails","unit-testing","variable-types"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13222364,"title":"why are brackets used in this assert_equal statement","body":"<p>In the book Agile Web Development with Rails, they're teaching how to write test unit cases:</p>\n\n<pre><code>test \"product price must be positive\" do\n  product = Product.new(title: \"By Book Title\",\n                        description: \"yyy\",\n                        image_url: \"zzz.jpg\")\n  product.price = -1\n  assert product.invalid?\n  assert_equal [\"must be greater than or equal to 0.01\"], product.errors[:price]\nend\n</code></pre>\n\n<p>Concerning the assert_equal statement, why are brackets needed around the \"must be greater than...\" string.  I'm assuming variable types are coming into play here, but need some clarification on why.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","android","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13218568,"title":"ActivityUnitTestCase getActionBar() returns null","body":"<p>My <code>FragmentActivity</code> calls <code>getActionBar()</code> in <code>onCreate()</code>:</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_new_expense);\n    getActionBar().setDisplayHomeAsUpEnabled(true);\n}\n</code></pre>\n\n<p>This works fine when running the app normally on the emulator or on a device.  However, when I test the Activity with a <code>ActivityUnitTestCase</code>, <code>getActionBar()</code> always returns null.</p>\n\n<pre><code>public class NewTransactionTest extends ActivityUnitTestCase&lt;TransactionEditActivity&gt; { \n\n    private RenamingDelegatingContext myContext;\n    private DatabaseHelper myHelper;\n    private RuntimeExceptionDao&lt;Account,Long&gt; myDao;\n    private Account myBankAccount1;\n    private Account myBankAccount2;\n    private Account myCategory1;\n    private Account myCategory2;\n    private Budget myBudget;\n\n    public NewTransactionTest() {\n        super(TransactionEditActivity.class);\n    }\n\n    @Override\n    protected void setUp() throws Exception {\n        super.setUp();\n\n        myContext = new RenamingDelegatingContext(getInstrumentation().getTargetContext(), \"test\");\n        myContext.deleteDatabase(DatabaseHelper.DATABASE_NAME);\n    }\n\n    @UiThreadTest\n    public void testPreConditions() throws Throwable {\n        setActivityContext(myContext);\n        final TransactionEditActivity activity = startActivity(new Intent(), null, null);\n    }\n</code></pre>\n\n<p>Does anyone know why <code>getActionBar()</code> returns null for unit tests?</p>\n"},{"tags":["objective-c","cocoa-touch","unit-testing","floating-point","nsstring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13220531,"title":"How can I check if a float has two significant figures?","body":"<p>I am writing a unit test to determine if a string value appears with 2 significant figures, ie. \"N.NN\"</p>\n\n<pre><code>    strokeValue = [NSString stringWithFormat:@\"%.2f\",someFloatValue];\n</code></pre>\n\n<p>How can I write a test that asserts, my string always has 2 decimal places?</p>\n"},{"tags":["iphone","ios","xcode","unit-testing","xcode4"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1021,"score":5,"question_id":6865735,"title":"Adding Unit Tests to an already existing project?","body":"<p>When you create an XCode 4 project, it asks you if you want to include unit testing. But how do you add it to a project that's been created without them? </p>\n\n<p>I started a project with Unit Tests to try to figure it out, and it looks like the only difference between it and my existing project are the Test.h and Test.m files in the new project.</p>\n\n<p>But when I move them into my old project and try to build, it says no such file or directory: SenTestingKit/SenTestingKit.h. That looks like a framework to me, but if I go to build phases and try to add the framework, there isn't one available called SenTestingKit :( And the new project only links the usual suspects: UIKit, CoreGraphics, and Foundation, but no SenTestingKit.</p>\n"},{"tags":["c#","unit-testing","mocking"],"answer_count":6,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":550,"score":7,"question_id":6382262,"title":"How do you unit test a mail sending function","body":"<p>i have a function which creates a report and sends it to a user.\nWhat i've done is create a mock for the email function, and verify if the 'send' function of the email class was called.</p>\n\n<p>So now i know that the function is called, but how do you unit test the body of the Send() function? How can i proove that the subject and body are correct and an attachment is attached to the email?</p>\n\n<p>Michel</p>\n"},{"tags":["python","api","unit-testing","rest","wrapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13216555,"title":"Unit testing an API wrapper","body":"<p>I'm writing a Python wrapper for an authenticated RESTful API. I'm writing up my test suite right now (Also first time test-writer here) but have a few questions:</p>\n\n<p>1.a) How can I make a call, but not have to hardcode credentials into the tests since I'll be throwing it on Github?</p>\n\n<p>1.b) I kind of know about mocking, but have no idea how to go about it. Would this allow me to not have to call the actual service? What would be the best way to go about this?</p>\n\n<p>2) What do I test for - Just ensure that my methods are passing certains items in the dictionary?</p>\n\n<p>3) Any best practices I should be following here?</p>\n"},{"tags":["unit-testing","flexunit","puremvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8,"score":1,"question_id":13217201,"title":"Possible Mocking Framework for Unit Testing a SingleCore PureMVC project","body":"<p>I have an old and large PureMVC Singlecore project that I am joining.\nI'm trying to help my team create unit tests for what we have and to teach them how to write unit tests as we go forward.</p>\n\n<p>I'm encountering a bunch of mocking problems with vague references to display objects, Notifications, and the fact that most of the functions which have testable code are private functions.</p>\n\n<p>Searching the internet for mock utilities or tools for unit testing puremvc results mainly in projects that appear to be no longer supported (from 2008 or 2010)</p>\n\n<p>I'm asking which tools exist to solve this sort of problem today, from people who are active in the community.</p>\n\n<p>Thanks.</p>\n\n<p>If this is not the right place to ask this question, please point me to a place where this question can get answered.</p>\n"},{"tags":["unit-testing","exception-handling","ada"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13073793,"title":"Exception Handling in Ada during Unit Test","body":"<p>I am attempting to write some unit tests for some Ada code I recently wrote, I have a particular case where I am expecting to get an Exception (if the code worked correctly I wouldn't but in this case all I'm doing is testing, not writing code). If I handle the exception in the Testing routine then I don't see how I can continue testing in that procedure.</p>\n\n<p>I.E. (This is very much an example and NOT compilable code)</p>\n\n<pre><code>procedure Test_Function is\nbegin\n  from -20 to 20\n     Result := SQRT(i);\n\n if Result = (Expected) then\n     print \"Passed\";\n end_if;\n\nexception:\n  print \"FAILED\";\nend Test_Function\n</code></pre>\n\n<p>My first thought is if I had a \"deeper function\" which actually did the call and the exception returned through that.</p>\n\n<p>I.E. (This is very much an example and NOT compilable code)</p>\n\n<pre><code>procedure Test_Function is\nbegin\n  from -20 to 20\n     Result := my_SQRT(i);\n\n if Result = (Expected) then\n     print \"Passed\";\n end_if;\n\nexception:\n  print \"FAILED\";\nend Test_Function\n\nfunction my_SQRT(integer) return Integer is\nbegin\n   return SQRT(i);\nexception:\n   return -1;\nend my_SQRT;\n</code></pre>\n\n<p>And in theory I expect that would work, I just hate to have to keep writing sub functions when my test_function, is expected to do the actual testing.</p>\n\n<p>Is there a way to continue execution after hitting the exception IN Test_Function, rather than having to write a wrapper function and calling through that?\nOR\nIs there a easier/better way to handle this kind of scenario?</p>\n\n<p>*Sorry for the poor code example, but I think the idea should be clear, if not I'll re-write the code.</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","unit-testing","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":76,"score":0,"question_id":13213507,"title":"Unit testing a controller in ASP.NET MVC 3","body":"<pre><code>public Double Invert(Double? id)\n{\n    return (Double)(id / id);\n}\n</code></pre>\n\n<p>I have done this for this test but fails please can anyone help with this cos just started with unit testing</p>\n\n<pre><code>/* HINT:  Remember that you are passing Invert an *integer* so\n * the value of 1 / input is calculated using integer arithmetic. \n * */\n//Arrange\nvar controller = new UrlParameterController();\nint input = 7;\nDouble expected = 0.143d;\nDouble marginOfError = 0.001d;\n\n//Act\nvar result = controller.Invert(input);\n\n//Assert\nAssert.AreEqual(expected, result, marginOfError);\n\n/* NOTE  This time we use a different Assert.AreEqual() method, which\n * checks whether or not two Double values are within a specified\n * distance of one another.  This is a good way to deal with rounding\n * errors from floating point arithmetic.  Without the marginOfError \n * parameter the assertion fails.\n * */  \n</code></pre>\n"},{"tags":["java","unit-testing","gui","mocking"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":58,"score":6,"question_id":13212935,"title":"Should my unit tests of GUI components contain many more lines than the code under test?","body":"<p>This is a sanity check because I'm finding this to be true in our code. Unlike our functional code, the tests of stateful GUIs have an unfortunate amount of weight due to state setup, combinatorial case analysis, and mocking/faking neighbors/collaborators/listeners/etc. Am I missing something? Thanks for your feedback.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>The tests are running in the JVM, everything is a POJO.</li>\n<li>So far we've gotten some simplification by increasing unit size: testing more pieces glued together.</li>\n</ul>\n\n<p>New Notes:</p>\n\n<ul>\n<li>We're using jUnit and Mockito. </li>\n</ul>\n"},{"tags":["c++","unit-testing","cppunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13210248,"title":"CppUnit creating a simple test","body":"<p>First whats the class I use if I want to setup a test like: </p>\n\n<pre><code>class MyClassTests \n    setup()\n    teardown()\n    testDoingSomething()\n    testDoingA()\n</code></pre>\n\n<p>Seems like the class to use is TestSuite? </p>\n\n<hr>\n\n<p>So now I just created a very simple class: </p>\n\n<pre><code># ParserUnitTests.h\n#include &lt;cppunit\\TestFixture.h&gt;;\n#include &lt;cppunit\\extensions\\HelperMacros.h&gt;\n\nclass ParserUnitTests : public CppUnit::TestFixture {\n\npublic:\n    void testCanDoUnitTest();\n};\n</code></pre>\n\n<p>And its corresponding cpp: </p>\n\n<pre><code>#include \"ParserUnitTests.h\"\n\nCPPUNIT_TEST_SUITE(ParserUnitTests);\n\nvoid ParserUnitTests::testCanDoUnitTest() {\n    CPPUNIT_ASSERT_EQUAL(1, 2, \"Expected failure\");\n}\n\nCPPUNIT_TEST(ParserUnitTests::testCanDoUnitTest);\n</code></pre>\n\n<p>I am getting errors like \"<em>expected a declaration</em>\" on the <code>CPPUNIT_TEST_SUITE</code> line... seems very different from where I come from ... more modern languages ... like JS/Python ... Seems like here its more explicit? I must tell CppUnit which class/test cases to run? Ok, but whats causing the errors? </p>\n\n<p>The code in the CppUnit cookbook is mainly snipplets and its hard to figure out what are the imports required and what should go where ... perhaps someone can guide me? </p>\n"},{"tags":["java","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":51,"score":-2,"question_id":13213162,"title":"Java junit testing with assertions on objects","body":"<p>the following code is in the setUp() method of class TestSegment:</p>\n\n<pre><code>    this.inputSource11 = new InputCell(1, 1);\n    this.activeSynapseObject = new Synapse(this.inputSource11);\n    this.inputSource11.setActiveState(true);\n    this.segmentObject.addSynapse(this.activeSynapseObject);\n</code></pre>\n\n<p>The following is the error in line 95 of TestSegment: </p>\n\n<pre><code>public void testGetSynapse()\n{\n    assertEquals(\n        this.activeSynapseObject,\n        this.segmentObject.getSynapse(inputSource11));\n}\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/RNvMN.jpg\" alt=\"\"></p>\n"},{"tags":["c#","unit-testing","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":457,"score":2,"question_id":5601679,"title":"How can I unit test that Windsor can resolve Asp.net MVC3 controller dependencies?","body":"<p>Currently I have Windsor controller factory that is working well.  However, I am changing my controllers a bit and having Windsor instantiate more data for controllers.  I forgot to update my Installer class and it failed.</p>\n\n<p>Thus, I realized this is a perfect instance for unit testing, so every time I run my unit tests it will verify that Windsor is set up correctly.</p>\n\n<p>Thus I created the following unit test:</p>\n\n<pre><code>    [TestMethod]\n    public void Windsor_Can_Resolve_HomeController_Dependencies()\n    {\n        // Setup\n        WindsorContainer container = new WindsorContainer();\n\n        // Act\n        HomeController controller = (HomeController)container.Kernel.Resolve(typeof(HomeController));\n    }\n</code></pre>\n\n<p>This is exactly the same code that exists in my <code>WindsorControllerFactory.GetControllerInstance()</code> method so I am not sure why this isn't working.  When this runs I get:</p>\n\n<pre><code>Test method MyApp.Tests.Controllers.HomeControllerTest.Windsor_Can_Resolve_HomeController_Dependencies threw exception: \nCastle.MicroKernel.ComponentNotFoundException: No component for supporting the service MyApp.Controllers.HomeController was found\n</code></pre>\n\n<p>I'm not sure how to tackle this.  The only thing I can think of is that since it's in my test project, and not my Asp.net MVC project it might not be automatically picking up my <code>CommandAndQueryInstaller</code> class, which contains all of my windsor type registration.</p>\n\n<p>Any advice for unit testing windsor dependency configuration?</p>\n"},{"tags":["java","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":31,"score":-2,"question_id":13213477,"title":"Java assertEquals error with objects","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13213162/java-junit-testing-with-assertions-on-objects\">Java junit testing with assertions on objects</a>  </p>\n</blockquote>\n\n\n\n<p>the following code is in the setUp() method of class TestSegment:</p>\n\n<pre><code>    this.inputSource11 = new InputCell(1, 1);\n    this.activeSynapseObject = new Synapse(this.inputSource11);\n    this.inputSource11.setActiveState(true);\n    this.segmentObject.addSynapse(this.activeSynapseObject);\n</code></pre>\n\n<p>The following is the error in line 95 of TestSegment: </p>\n\n<pre><code>public void testGetSynapse()\n{\n    assertEquals(\n        this.activeSynapseObject,\n        this.segmentObject.getSynapse(inputSource11));\n}\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/RNvMN.jpg\" alt=\"\"></p>\n"},{"tags":["unit-testing","symfony2","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13212118,"title":"PHPUnit + Symfony does nothing","body":"<p>I just installed PHPUnit on OS X + MAMP. (My phpunit was installed in my MAMP folder, so I copied it to /usr/bin because I couldn't use the \"phpunit\" command in terminal without the path)</p>\n\n<h3>New Symfony folder</h3>\n\n<p>When I go to a new Symfony2 folder and I try <code>phpunit -c App/</code>the tests start and I get a green confirmation that all tests passed. </p>\n\n<pre><code>PHPUnit 3.7.8 by Sebastian Bergmann.\n\nConfiguration read from     \n/Users/username/Dropbox/www/symfonydev/Symfony/App/phpunit.xml.dist\n.\nTime: 0 seconds, Memory: 15.50Mb\nOK (1 test, 1 assertion)\n</code></pre>\n\n<p><br /> </p>\n\n<h3>Own symfony website</h3>\n\n<p>But when I go to my own little Symfony2 project and execute the same command, <strong>nothing happens! He doesn't even load the phpunit.xml.dist</strong>. I get no output at all on my terminal window.</p>\n\n<p><strong>The test file, however, does exist and is readable, I can start it by explicitly specifying it on the command line of phpunit:</strong></p>\n\n<p><code>phpunit -c app/ src/MatchTracker/Bundle/Tests/Controller/AuthenticationControllerTest.php</code>and this works. </p>\n\n<p>It seems that something is wrong with the phpunit.xml.dist. It's the default phpunit.xml.dist and I tried renaming it to phpunit.xml. But nothing happens. What could be the problem? I think he can't find my xml or use it, or maybe he can read the phpunit.xml but doesn't find my tests.</p>\n\n<p>Here's an <strong>example from my terminal</strong>: You see that the phpunit command doesn't do anything, except when I specify the test file...</p>\n\n<pre><code>MacBook-Pro:www username$ ls\nLICENSE     app     composer.json   composer.lock   composer.phar   src     vendor      web\nMacBook-Pro:www username$ ls app/\nAppCache.php        SymfonyRequirements.php cache           console         phpunit.xml.dist\nAppKernel.php       autoload.php        check.php       logs\nResources       bootstrap.php.cache config          phpunit.xml\nMacBook-Pro:www username$ phpunit -c app/\nMacBook-Pro:www username$ phpunit -c app/ src/MatchTracker/Bundle/Tests/Controller/AuthenticationControllerTest.php\nPHPUnit 3.7.8 by Sebastian Bergmann.\n\nConfiguration read from /Users/username/Dropbox/www/matchtracker.be/www/app/phpunit.xml\n\nF\n\nTime: 1 second, Memory: 21.75Mb\n\nThere was 1 failure:\n\n1) MatchTracker\\Bundle\\Tests\\Controller\\DefaultControllerTest::testIndex\nFailed asserting that 404 matches expected 200.\n\n/Users/username/Dropbox/www/matchtracker.be/www/src/MatchTracker/Bundle/Tests/Controller/AuthenticationControllerTest.php:28\n\nFAILURES!\nTests: 1, Assertions: 1, Failures: 1.\nMacBook-Pro:www username$\n</code></pre>\n"},{"tags":["asp.net",".net","unit-testing","user","identity"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":63,"score":4,"question_id":12780185,"title":"Writing Unit Test for methods that use User.Identity.Name in ASP.NET MVC","body":"<p>I am writing test cases using the Unit Test for ASP.NET MVC 4 with Web Api.</p>\n\n<p>Now I have an action which makes a call to some method I have defined in the service layer, where I have used the following line of code.</p>\n\n<pre><code>string username = User.Identity.Name;\n// do something with username\n// return something\n</code></pre>\n\n<p>Now how to I create unit test method for this, I am getting null reference exceptions. I am kinda new to writing unit test and stuff.</p>\n\n<p>And I want to use Unit Test only for this.</p>\n\n<p>Please help me out on this. Thanks.</p>\n"},{"tags":["php","unit-testing","yii"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":34,"score":4,"question_id":13209812,"title":"YII - unit testing not working","body":"<p>When I run PHP unit test with YII framework I got following error:</p>\n\n<pre><code>PHP Fatal error:  Uncaught exception 'LogicException' with message 'Function 'phpunit_autoload' not found (function 'phpunit_autoload' not found or invalid function name)' in /var/www/yii/framework/YiiBase.php:628\n</code></pre>\n\n<p>Does anyone know how to fix this problem?</p>\n"},{"tags":["python","django","unit-testing","self"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":58,"score":4,"question_id":13210072,"title":"When I create a test method in Django, what exactly is 'self' referring to?","body":"<p>My understanding of 'self' is that it means something like \"an instance of the class which contains this method\". Thus, when the default django test reads:</p>\n\n<pre><code>class SimpleTest(TestCase):\n    def test_basic_addition(self):\n</code></pre>\n\n<p>we are in some sense passing to test_basic_addition an instance of SimpleTest, to which at some point the actions defined in the setUp method (if any) have been applied. Presumably <code>manage.py test</code> creates this instance somehow, but I don't really understand what it is! What's really going on here?</p>\n"},{"tags":["unit-testing","mstest","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13201566,"title":"How to get test result status from MSTest?","body":"<p>In NUnit, I can get the test result from <code>context.Result.State</code>. If its <code>NUnit.Framework.TestState.Success</code>, then I know the test passed.</p>\n\n<p>In MSTest, how do I get that info?</p>\n\n<p>I saw <code>context.Properties.Keys</code>, but none of them speak of the status of the test result.</p>\n"},{"tags":["unit-testing","naming-conventions"],"answer_count":7,"favorite_count":30,"up_vote_count":83,"down_vote_count":1,"view_count":15330,"score":82,"question_id":96297,"title":"What are some popular naming conventions for Unit Tests?","body":"<h2>General</h2>\n\n<ul>\n<li>Follow the same standards for all tests.</li>\n<li>Be clear about what each test state is.</li>\n<li>Be specific about the expected behavior.</li>\n</ul>\n\n<h2>Examples</h2>\n\n<p>1) MethodName_StateUnderTest_ExpectedBehavior</p>\n\n<pre><code>Public void Sum_NegativeNumberAs1stParam_ExceptionThrown() \n\nPublic void Sum_NegativeNumberAs2ndParam_ExceptionThrown () \n\nPublic void Sum_simpleValues_Calculated ()\n</code></pre>\n\n<p>source: <a href=\"http://weblogs.asp.net/rosherove/archive/2005/04/03/TestNamingStandards.aspx\">http://weblogs.asp.net/rosherove/archive/2005/04/03/TestNamingStandards.aspx</a></p>\n\n<p>2) Separating Each Word By Underscore</p>\n\n<pre><code>Public void Sum_Negative_Number_As_1st_Param_Exception_Thrown() \n\nPublic void Sum_Negative_Number_As_2nd_Param_Exception_Thrown () \n\nPublic void Sum_Simple_Values_Calculated ()\n</code></pre>\n\n<h2>Other</h2>\n\n<ul>\n<li>End method names with <em>Test</em></li>\n<li>Start method names with class name</li>\n</ul>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13195151,"title":"Unit Testing issue in Visual Studio 2012","body":"<p>Whenever I try to run any of the test from my test suite in Visual Studio 2012 I get </p>\n\n<blockquote>\n  <p>Test Failed - [test method name]</p>\n  \n  <p>Message: Failed to set up the execution context to run the test</p>\n</blockquote>\n\n<p>and my test is not even started (i.e. the source of the test failure is pointing at the beginning of the test method: </p>\n\n<blockquote>\n  <p>here--> TEST_METHOD([test method name])\n  {</p>\n  \n  <p>}</p>\n</blockquote>\n\n<p>What does this message mean, what could be the cause for it to appear and what should I do for my test to run correctly?</p>\n"},{"tags":["java","unit-testing","design-patterns","chain"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13208185,"title":"chain of responsibility pattern","body":"<p>I am trying to implement the chain of responsibility pattern, but it seems i am missing something because in the concrete classes the setnexthandler is not setting the next but is always the same. I guess my mistake is in the concrete classes in the processMalfunction() method in the else statems next.setNextHandler(next); i think it should be next.setNextHandler(Severity.Medium) for the first one. So here is the code if you could take a look. Here is the code.</p>\n\n<pre><code>public interface MalfunctionHandler \n{\n    public void processMalfunction(Malfunction malfunciton);\n    public void setNextHandler(MalfunctionHandler handler);\n}\n\npublic enum Severity \n{\n    TRIVIAL, LOW, MEDIUM, HIGH\n}\n\npublic class Malfunction\n{\n    /**\n     * severity is a type of Severity \n     */\n    Severity severity;\n\n    /**\n     * @param description describes the severity of the problem\n     */\n    String description;\n\n    Malfunction(Severity severity, String description)\n    {\n        if(description == null)\n        {\n            description = \"No description available. Probably serious.\";\n        }\n\n        if(description.isEmpty())\n        {\n            description = \"No description available. Probably serious.\";\n        }\n\n        this.severity = severity;\n        this.description = description;\n    }\n\n    public Severity getSeverity() \n    {\n        return severity;\n    }\n\n    public String getDescription()\n    {\n        return description;\n    }\n\n    public void setSeverity(Severity severity)\n    {\n        this.severity = severity;\n    }\n\n    public void setDescription(String description)\n    {\n        this.description = description;\n    }\n}\n\npublic class SpaceMonkey implements MalfunctionHandler \n{\n\n    Severity severity;\n    MalfunctionHandler next;\n    File read = new File(\"expected-bronze.txt\");\n    File f = new File(\"log-bronze.txt\");\n\n    SpaceMonkey(Severity severity)\n    {\n        this.severity = severity;\n        System.out.println(FileUtility.readFile(read));\n    }\n\n    @Override\n    public void processMalfunction(Malfunction malfunction)\n    {\n        if (malfunction.getSeverity() == Severity.LOW)\n        {\n           final String[] splits = FileUtility.readFile(read).split(\"problem.\");\n            for (String asset : splits)\n            {\n                if (asset.contains(\"Space monkey\"))\n                {\n                     FileUtility.writeFile(f, asset + \"problem.\"); \n                     System.out.println(asset + \"problem.\");\n                }\n            }\n        }\n        else\n        {\n            next.setNextHandler(next);\n        }\n    }\n\n    @Override\n    public void setNextHandler(MalfunctionHandler next)\n    {\n        this.next = next;\n    }\n}\n\npublic class ServiceRobot implements MalfunctionHandler\n{\n\n    Severity severity;\n    MalfunctionHandler next;\n     File read = new File(\"expected-bronze.txt\");\n      File f = new File(\"log-bronze.txt\");\n\n    ServiceRobot(Severity severity)\n    {\n        this.severity = severity;\n    }\n\n\n    @Override\n    public void processMalfunction(Malfunction malfuntion) \n    {\n\n\n        if (this.severity == severity)\n        {\n            String[] splits = FileUtility.readFile(read).split(\"problem.\");\n         for(String asset : splits)\n        {\n            if(asset.contains(\"Service robot\"))\n            {                  \n                 FileUtility.writeFile(f, asset + \"problem.\"); \n                 System.out.println(asset + \"problem.\");\n\n            }\n        }\n        }\n        else\n        {\n            next.setNextHandler(next);\n        }\n    }\n\n    @Override\n    public void setNextHandler(MalfunctionHandler next)\n    {\n        this.next = next;\n    }\n\n}\n\npublic class Engineer implements MalfunctionHandler\n{\n\n    Severity severity;\n    MalfunctionHandler next;\n    File read = new File(\"expected-bronze.txt\");\n\n    Engineer(Severity severity)\n    {\n        this.severity = severity;\n    }\n\n\n    @Override\n    public void processMalfunction(Malfunction malfuntion)\n    {\n        File f = new File(\"log-bronze.txt\");\n\n        if (this.severity == severity)\n        {\n            String[] splits = FileUtility.readFile(read).split(\"problem.\");\n         for(String asset : splits)\n        {\n            if(asset.contains(\"Engineer\"))\n            {\n                 FileUtility.writeFile(f, asset + \"problem.\"); \n                 System.out.println(asset + \"problem.\");\n\n            }\n        }\n        }\n        else\n        {\n            next.setNextHandler(next);\n        }\n    }\n\n    @Override\n    public void setNextHandler(MalfunctionHandler next)\n    {\n        this.next = next;\n    }\n\n}\n\npublic class Captain implements MalfunctionHandler\n{\n    Severity severity;\n    MalfunctionHandler next;\n    File read = new File(\"expected-bronze.txt\");\n\n    Captain(Severity severity)\n    {\n        this.severity = severity;\n    }\n    @Override\n    public void processMalfunction(Malfunction malfuntion)\n    {\n        File f = new File(\"log-bronze.txt\");\n\n        if (this.severity == severity)\n        {\n            String[] splits = FileUtility.readFile(read).split(\"problem.\");\n         for(String asset : splits)\n        {\n            if(asset.contains(\"Captain\"))\n            {\n                 FileUtility.writeFile(f, asset + \"problem.\"); \n                 System.out.println(asset + \"problem.\");\n\n            }\n        }\n        }\n        else\n        {\n            next.setNextHandler(next);\n        }\n    }\n\n    @Override\n    public void setNextHandler(MalfunctionHandler next)\n    {\n        this.next = next;\n    }\n\n}\n\npublic class FileUtility \n{\n\n    /** This method appends a single string to a text file.\n     * \n     * @param f The file to write to\n     * @param entry The string to append\n     */\n    public static void writeFile(File f, String entry) \n    {\n        try \n        {\n            final BufferedWriter out = new BufferedWriter(new FileWriter(f, true));\n            out.write(entry);\n            out.close();\n        } catch (IOException e) \n        {\n            System.err.println(\"Problem writing to the file\");\n        }\n    }\n\n    /** This method resets the named text file.\n     * \n     * @param f The file to reset\n     */\n    public static void resetFile(File f) {\n        try {\n            final BufferedWriter out = new BufferedWriter(new FileWriter(f, false));\n            out.write(\"\");\n            out.close();\n        } catch (IOException e) {\n            System.err.println(\"Problem reset the file\");\n        }\n    }\n\n    /** This method reads the contents of a text file.\n     * \n     * @param f The file to read from\n     * @return the contents of the text file as a single string\n     */\n    public static String readFile(File f) {\n        final StringBuilder sb = new StringBuilder();\n        try {\n            final Scanner scanner = new Scanner(f);\n            while (scanner.hasNextLine()) {\n                sb.append(scanner.nextLine());\n            }\n            scanner.close();\n        } catch (FileNotFoundException e) {\n            System.err.println(\"Problem reading from file\");\n        }\n        return sb.toString();\n    }\n}\n\n\npublic class MalfunctionHandlerTest {\n\n    /**\n     * No-args constructor.\n     */\n    public MalfunctionHandlerTest() {\n    }\n\n    /**\n     * Test of processMalfunction method.\n     */\n    @Test\n    public void testProcessMalfunction() {\n\n        // Instanciate malfunction handlers\n        final SpaceMonkey sm = new SpaceMonkey(Severity.TRIVIAL);\n        final ServiceRobot sr = new ServiceRobot(Severity.LOW);\n        final Engineer e = new Engineer(Severity.MEDIUM);\n        final Captain c = new Captain(Severity.HIGH);\n\n        // Construct chain of responsbility\n        sm.setNextHandler(sr); \n        sr.setNextHandler(e);\n        e.setNextHandler(c);\n\n        // Create malfunctions\n        final Malfunction m1 = new Malfunction(Severity.HIGH, \"Life support error. Oxygen \"\n                 + \"Recycling unit damaged, running at half efficiency\");      \n        final Malfunction m2  = new Malfunction(Severity.LOW, \"Communications error. Cannot \"\n                + \"find Jazz FM\");\n        final Malfunction m3 = new Malfunction(Severity.MEDIUM, \"Power supply error. Solar Panel \"\n                + \"2 damaged, running at 31.3333% efficiency\");\n        final Malfunction m4 = new Malfunction(Severity.MEDIUM, \"Thermal regulation error. Sensor \"\n                + \"damaged, manual temperature regulation needed\");\n        final Malfunction m5 = new Malfunction(Severity.TRIVIAL, \"Trash can full on C-Desk.\");\n        final Malfunction m6 = new Malfunction(Severity.LOW, \"Shower plug hole full of monkey hair\");\n        final Malfunction m7 = new Malfunction(Severity.HIGH, \"Proximity alert. Collision imminent\");\n\n        // Clean log file\n        FileUtility.resetFile(new File(\"log-bronze.txt\"));\n\n        // Process malfunctions\n        sm.processMalfunction(m1);\n        sm.processMalfunction(m2);\n        sm.processMalfunction(m3);\n        sm.processMalfunction(m4);\n        sm.processMalfunction(m5);\n        sm.processMalfunction(m6);\n        sm.processMalfunction(m7);\n\n        // Check log file\n        final String actualOutput = FileUtility.readFile(new File(\"log-bronze.txt\"));\n        final String expectedOutput = FileUtility.readFile(new File(\"expected-bronze.txt\"));\n        assertEquals(actualOutput, expectedOutput);\n    }\n}\n</code></pre>\n"},{"tags":["ruby","unit-testing","api"],"answer_count":3,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":1421,"score":8,"question_id":4812132,"title":"Writing unit tests in Ruby for a REST API","body":"<p>I've written a basic REST API using sinatra.</p>\n\n<p>Does anyone know the best way to write tests for it? I would like to do so using Ruby.</p>\n\n<p>I've done my initial testing using curl. But I'd like to do something more robust. This is my first API - is there anything specific I should be testing?</p>\n"},{"tags":["java","unit-testing","testing","tdd","webserver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13206194,"title":"How would I test a web server in Java?","body":"<p>I am basically practicing with Java socket programming by building client and server (not necessarily HTTP server). In brief, the clients are sending request through sockets to server and server adds requests to task queue. The thread pool initially has certain number of threads and each free one is assigned to one runnable task in the task queue. My web server also has a simple storage that stores and retrieves data from a file from disk. In this project, I have to take care of several concurrency issues. </p>\n\n<p>Basically, I have to build client, server, thread pool, handler, storage. However, I want to test thoroughly in a good systematic way (unit test, integration test, etc.). I don't have much experience in testing so I am looking for pointers, methodologies, frameworks, or tutorials. (I use Ant to automate building, and initially consider JUnit and EasyMock for testing) </p>\n\n<p><img src=\"http://i.stack.imgur.com/AGak3.png\" alt=\"architecture\"></p>\n"},{"tags":["python","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13206012,"title":"Can someone explain addTypeEqualityFunc in unittest to me?","body":"<p>I'm trying very hard to implement a custom comparison method with unittest, but no matter how hard I try, I can't seem to get it to work.</p>\n\n<p>I define my <code>__equals__</code> class in the custom object, and make sure it screams bloody murder onto the console. I call <code>addTypeEqualityFunc</code> in the <code>setUp</code> method of the test case class. I <code>assertEquals</code> on the output of a function against what's supposed to come out. I run my tests.</p>\n\n<p>An the tests fail. What gives?</p>\n"},{"tags":["unit-testing","mocking","moq","mstest"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":94,"score":4,"question_id":8651901,"title":"Generate mocked repository objects quickly using live data? Moq","body":"<p>I'm not even sure if there is a utility that allows this, but it seems like such a common need?</p>\n\n<p>Is there a program/library/component that will generate mocked .NET objects (repositories) that will yield some mocked data as certain database calls.</p>\n\n<p>Allow me to elaborate:\nIf I'm testing a repository (not unit testing, simply testing in a console window) and when I pass a selection criteria to my repository, it returns a list of objects.  I would /love/ for an ability to capture that list of objects and convert it to static setup C# code that would serve as a setup for a unit test.  My objects are quiet complex and it takes a long time to set them up properly.</p>\n\n<p>Is this possible?  My team is using Moq &amp; Ninject</p>\n"},{"tags":["javascript","unit-testing","geolocation","jasmine"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":113,"score":3,"question_id":11106008,"title":"How to fake return calls from the geolocator in jasmine","body":"<p>I have a function that calls the geolocator and i don't know how to test this function. I've tried spying on the geolocator and returning fake data but with no success, the original function is still used and so i would have to wait and i couldn't use mock data.</p>\n\n<pre><code>// this doesn't work        \nvar navigator_spy = spyOn( navigator.geolocation, 'getCurrentPosition' ).andReturn( {\n    coords : {\n        latitude : 63,\n        longitude : 143\n    }\n} );\n</code></pre>\n\n<p>anyone knows how i can do this?</p>\n"},{"tags":["unit-testing","moq","httppostedfile","httppostedfilebase"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":182,"score":1,"question_id":8810798,"title":"Moq'ing HttpPostedFile for 3rd Party API","body":"<p>I'm building a custom module by extending ActiveSocial for DotNetNuke and using ActiveSocial's  API that I have no control over... and I'm trying to unit test my code (using C#).</p>\n\n<p>In using this API - I can save images to AmazonS3 by calling their method and passing some info - including an HttpPostedFile object.</p>\n\n<p>So in my unit testing (far from expert) I was thinking of just making sure the file type of the HttpPostedFile is what I want (jpg/png) before passing to the API.  But I cannot mock out an HttpPostedFile.</p>\n\n<p>I've google'd and msdn'd and seen where some people were using HttpPostedFileBase - but I cannot pass nor cast that to an HttpPostedFile to the API.</p>\n\n<p>Granted - RIGHT NOW - my code doesn't do anything very complicated so I could just skip these types of test - but this beast is growing and will someday take over the world (fingers crossed) and I would therefore just like the confidence of the tests for if/when the complexity does change - nothing get's botched.</p>\n\n<p>Any ideas/suggestions?</p>\n"},{"tags":["objective-c","ios","unit-testing","ocunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13165581,"title":"Why is my class crashing my OCUnit test case with error code 138?","body":"<p>A class I wrote is crashing my test case with error code 138. The class returns an NSString with the user agent string from UIWebView:</p>\n\n<pre><code>@interface MyWebViewUserAgent : NSObject &lt;UIWebViewDelegate&gt; {\n    NSString* userAgent;\n    UIWebView* webView;\n}\n\n- (NSString*) userAgentString;\n\n@end\n\n#import \"MyWebViewUserAgent.h\"\n\n@implementation MyWebViewUserAgent\n\n- (NSString*) userAgentString {\n    if (userAgent != nil) return userAgent;\n\n    webView = [[UIWebView alloc] init];\n    webView.delegate = self;\n    [webView loadRequest: [NSURLRequest requestWithURL: [NSURL URLWithString: @\"http://127.0.0.1\"]]];\n\n    // Wait for the web view to load our bogus request and give us the secret user agent.\n        while (userAgent == nil) {\n        // This executes another run loop. \n        [[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate: [NSDate distantFuture]];\n    }\n\n    NSString *currentDeviceType = [[UIDevice currentDevice] model];\n    NSRange range = [userAgent rangeOfString:currentDeviceType];\n\n    if (range.location == NSNotFound) {\n\n        // Should only happen when iPhone-targeted app is running on an iPad.\n        NSRange rangeToReplace = [userAgent rangeOfString:@\"iPhone;\"];\n        if (rangeToReplace.length &gt; 0) {\n            userAgent = [userAgent stringByReplacingCharactersInRange:rangeToReplace withString:@\"iPad;\"];\n        }\n    }\n    return userAgent;\n}\n\n- (BOOL) webView: (UIWebView*) web_view shouldStartLoadWithRequest: (NSURLRequest*) request navigationType: (UIWebViewNavigationType) navigation_type {\n    userAgent = [request valueForHTTPHeaderField: @\"User-Agent\"];\n    [webView release];\n    return NO; // Return no, we don't care about executing an actual request.\n}\n\n- (void) dealloc {\n    [super dealloc];\n}\n\n@end\n</code></pre>\n\n<p>Now, here is my test case:</p>\n\n<pre><code>#import &lt;SenTestingKit/SenTestingKit.h&gt;\n#import &lt;UIKit/UIKit.h&gt;\n#import \"MyWebViewUserAgent.h\"\n\n@interface MyUnitTests : SenTestCase {\n    MyWebViewUserAgent *ua;\n}\n\n@end\n\n@implementation MySDKUnitTests\n\n- (void)setUp\n{\n    [super setUp];\n}\n\n- (void)tearDown\n{\n    // Tear-down code here.\n    [super tearDown];\n}\n\n- (void)testUserAgentString {\n    ua = [[MyWebViewUserAgent alloc] init];\n    STAssertNotNil(ua, @\"User agent object is nil.\");\n    STAssertNotNil([ua userAgentString], @\"user agent string is nil\");\n    [ua release];\n}\n\n@end\n</code></pre>\n\n<p>The first <code>STAssertNotNil</code> in the <code>testUserAgentString</code> test works fine but the second <code>STAssertNotNil</code> is the line that crashes the test. Any ideas?</p>\n"},{"tags":["unit-testing","unittest++"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13203922,"title":"Linking Error with UnitTest++","body":"<p>I am getting an odd Unit Test ++ linking error using Xcode as my ide.\nNow I did set the project up with two targets. one target that will do the test the other will do nothing for now.</p>\n\n<p>Note I did link the library and ran the simple working example from the tutorial.\nand I compiled it using gcc 4.2.1 from macports.</p>\n\n<p>\"std::string::c_str() const\", referenced from:\n      UnitTest::MemoryOutStream::GetText() const in libUnitTest++.a(MemoryOutStream.o)\n  \"std::basic_ostringstream, std::allocator >::str() const\", referenced from:\n      UnitTest::MemoryOutStream::GetText() const in libUnitTest++.a(MemoryOutStream.o)\n  \"std::basic_ostream >::~basic_ostream()\", referenced from:\n      construction vtable for std::ostream-in-UnitTest::MemoryOutStream in libUnitTest++.a(TestRunner.o)\n      construction vtable for std::ostream-in-UnitTest::MemoryOutStream in libUnitTest++.a(Test.o)\n  \"std::basic_ostream >::~basic_ostream()\", referenced from:\n      construction vtable for std::ostream-in-UnitTest::MemoryOutStream in libUnitTest++.a(TestRunner.o)\n      construction vtable for std::ostream-in-UnitTest::MemoryOutStream in libUnitTest++.a(Test.o)</p>\n"},{"tags":["java","unit-testing","collections"],"answer_count":2,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":251,"score":8,"question_id":7068503,"title":"Is there a testsuite for Java custom collections implementation?","body":"<p>Out of curiosity, I wrote an own simple implementation of <code>Set</code> for a special case (where the set of all possible entries is fixed, but it's no <code>enum</code>). It was actually quite easy, but obviously, my implementation is unusable without a lot of tests (and maybe even then, but that's another topic; it was mainly an exercise).</p>\n\n<p>So is there any testsuite available I could use for unit-testing it?</p>\n"},{"tags":["android","unit-testing","testing","cts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13201926,"title":"Android CTS Run String Of Tests","body":"<p>I know you can run test packages and individual tests in CTS. How can I run multiple tests from different packages? Specifically, I have 4 existing tests I want to run- 3 from androidmedia and 1 from androidmediastress. How can I run just those tests? Do I need to copy and paste those tests in their own app and add that app to a package?</p>\n\n<p>I'm new to CTS so the more detail you can include, the better. Thanks!</p>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13199848,"title":"Placement of success and failure test cases of the same method","body":"<p>Suppose I have a method named <code>foo</code> which, for certain set of input values, is expected to complete successfully and return a result, and for some other set of values, is expected to throw a certain exception. This method requires some things to have set up before it can be tested.</p>\n\n<p>Given these conditions, is it better to club success and failure tests in one test, or should I maintain these cases in separate test methods?</p>\n\n<p>In other words, which of the following two approaches is preferable?</p>\n\n<p><strong>Approach 1:</strong></p>\n\n<pre><code>@Test\npublic void testFoo() {\n  setUpThings();\n  // testing success case\n  assertEquals(foo(s), y);\n  // testing failure case\n  try {\n    foo(f);\n    fail(\"Expected an exception.\")\n  } catch (FooException ex) {\n  }\n}\n</code></pre>\n\n<p><strong>Approach 2:</strong></p>\n\n<pre><code>@Test\npublic void testFooSuccess() {\n  setUpThings();\n  assertEquals(foo(s), y);\n}\n\n@Test\npublic void testFooFailure() {\n  setUpThings();\n  try {\n    foo(f);\n    fail(\"Expected an exception.\")\n  } catch (FooException ex) {\n  }\n}\n</code></pre>\n"},{"tags":["ruby-on-rails","unit-testing","automated-tests"],"answer_count":6,"favorite_count":6,"up_vote_count":14,"down_vote_count":0,"view_count":3889,"score":14,"question_id":274349,"title":"running single rails unit/functional test","body":"<p>As title. </p>\n\n<p>ruby test/functionals/whatevertest.rb doesn't work, that requires me to replace all <code>require 'test_helper'</code> to <code>require File.dirname(__FILE__) + '/../test_helper'</code>. For some reason most of those test templates have such issue, so I rather to see if there is a hack I could get around it.</p>\n"},{"tags":["javascript","unit-testing","coffeescript","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13197628,"title":"how to dry up these tests with jasmin.js","body":"<p>I have a lot of tests like the following :</p>\n\n<pre><code>it \"Should call togglePadding if df-padding is checked\", -&gt;\n        spyOn(App.columnsSetupBuildingBlockController.content, 'togglePadding')\n        App.view.set(\"paddingChecked\", null)\n\n        Em.run -&gt;\n            App.view.set(\"paddingChecked\", true)\n\n        expect(App.columnsSetupBuildingBlockController.content.togglePadding).toHaveBeenCalledWith(true)\n\n    it \"Should call togglePadding if df-padding is unchecked\", -&gt;\n        spyOn(App.columnsSetupBuildingBlockController.content, 'togglePadding')\n        App.view.set(\"paddingChecked\", true)\n\n        Em.run -&gt;\n            App.view.set(\"paddingChecked\", null)\n\n        expect(App.columnsSetupBuildingBlockController.content.togglePadding).toHaveBeenCalledWith(null)\n</code></pre>\n\n<p>There is only a fews different values in each test that are different.   How can i write a shared function to dry up the duplicated bits and make it look a lot cleaner ?</p>\n\n<p>I also have the same tests for testing margin, border etc</p>\n\n<p>Please help.</p>\n\n<p>Thanks\nRick</p>\n"},{"tags":["c#","unit-testing","datetime","reflection",".net-assembly"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":49,"score":-1,"question_id":13197885,"title":"How to find out if DateTime.Now was used to set the value in certain assemblies?","body":"<p>how to find out if DateTime.Now was used to set the value in certain assemblies?</p>\n\n<p>I'm trying to write a test here which will tell if DateTime.Now was used in given assembly list or not? If DateTime.Now was used to set value for any kind of field or property test will fail if not it will pass. </p>\n\n<p>How could i write something like that? Thank you all for any help on this one.</p>\n"},{"tags":["c#","unit-testing","visual-studio-2012","stub"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13121079,"title":"Test behavior in vs2012 unit test framework","body":"<p>Below is my test:</p>\n\n<pre><code>   [TestMethod]\n    public void GetSubscribers()\n    {\n\n        stubSubscriptionMng.GetModelSubscribersInt32String = (mgr, i) =&gt; new List&lt;IModel&gt;() { modelStub };\n        var dispatcher = UnitySingleton.Instance.UnityContainer.Resolve&lt;Dispatcher&gt;();\n        IDispatchingMessage message = new DispatchingMessage(Guid.NewGuid().ToString(), \"MessageName\", \"MessageVal\", 1);\n        dispatcher.Publish(message);\n\n    }\n</code></pre>\n\n<p>This is the method being tested:</p>\n\n<pre><code>  if (message.UniverseId &gt; 0 &amp;&amp; !string.IsNullOrEmpty(message.EntityId) &amp;&amp; !string.IsNullOrWhiteSpace(message.MessageName))\n            {\n                //the modelMgr will forword the the relevant Data to the relevant Models\n                IList&lt;IModel&gt; models = subscriptionService.GetModelSubscribers(message.UniverseId, message.MessageName);\n                Parallel.ForEach(models, (model) =&gt;\n                {\n                    try\n                    {\n                        model.Update(message);\n                    }\n                    catch (Exception ex)\n                    {\n                        ResourceManager.Instance.Logger.LogException(ex);\n                    }\n                });\n            }\n</code></pre>\n\n<p>Each model is being called with the <code>void Update()</code> method. Is there a way to verify this behavior? To verify the method had been called?\nSomething equivalent to <code>Expect()</code> and <code>verifyAllExpectations()</code> in <a href=\"http://ayende.com/wiki/Rhino%20Mocks%203.5.ashx?AspxAutoDetectCookieSupport=1\" rel=\"nofollow\">Rhino mocks</a>?</p>\n\n<hr>\n\n<p>I found a workaround solution in the <a href=\"http://stackoverflow.com/questions/10390422/how-can-i-verify-that-a-microsoft-fakes-beta-stub-shim-was-called-like-assert\">following post</a>.</p>\n"},{"tags":["c++","unit-testing","cross-platform","code-coverage","cppunit"],"answer_count":5,"favorite_count":5,"up_vote_count":9,"down_vote_count":0,"view_count":5971,"score":9,"question_id":33042,"title":"How can I measure CppUnit test coverage (on win32 and Unix)?","body":"<p>I have a very large code base that contains extensive unit tests (using CppUnit). <b>I need to work out what percentage of the code is exercised by these tests</b>, and (ideally) generate some sort of report that tells me on a per-library or per-file basis, how much of the code was exercised.</p>\n\n<p>Here's the kicker: this has to run completely unnatended (eventually inside a continuous integration build), and has to be cross platform (well, WIN32 and *nix at least).</p>\n\n<p>Can anyone suggest a tool, or set of tools that can help me do this? I can't change away from CppUnit (nor would I want to - it kicks ass), but otherwise I'm eager to hear any recommendations you might have.</p>\n\n<p>Cheers,</p>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-mvc-4","moq","modelmetadataprovider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13192697,"title":"Using a custom ModelMetadataProvider in a unit test","body":"<p>Pretty new to MVC so hopefully this is a simple question.</p>\n\n<p>I have written a custom binding attribute that requires access to the <code>httpContext</code>. In order to inject a mock <code>httpContext</code> during unit tests, I have written an <code>InjectingMetadataProvider</code> that populates the <code>Context</code> property on any of my custom attributes.</p>\n\n<p>I have managed to get this to work in the following test:</p>\n\n<pre><code>[TestMethod]\npublic void Marker_ShouldBind_Id()\n{\n    // Arrange\n    var formCollection = new NameValueCollection \n    { \n        { \"id\", \"2\" }\n    };\n\n    var context = new Mock&lt;HttpContextBase&gt;();\n    context.Setup(c =&gt; c.User).Returns((IPrincipal)null); \n\n    var metaProvider = new InjectingMetadataProvider(context.Object);\n    ModelMetadataProviders.Current = metaProvider;  //why do I need this?\n\n    var bindingContext = new ModelBindingContext\n    {\n        ModelName     = string.Empty,\n        ValueProvider = new NameValueCollectionValueProvider(formCollection, null),\n        ModelMetadata = metaProvider.GetMetadataForType(null, typeof(Marker)),\n    };\n\n    var binder = new DefaultModelBinder();\n\n    // Act\n    var marker = (Marker)binder.BindModel(new ControllerContext(), bindingContext);\n\n    // Assert\n    marker.Id.Should().Be(2);\n}\n</code></pre>\n\n<p>However, if I comment out the line that sets my <code>InjectingMetadataProvider</code> to <code>ModelMetadataProviders.Current</code>, then my <code>InjectingMetadataProvider.CreateMetadata()</code> override gets handed a blank list of attributes, and so the test fails because my custom attributes don't get their context set.</p>\n\n<p>Why do I need to set it to <code>Current</code> when I'm using it explicitly anyway? I don't want to be setting static stuff in my tests.</p>\n\n<p>I may be doing something stupid because I'm feeling in the dark a bit at the moment due to my unfamiliarity with the framework.</p>\n"},{"tags":["java","unit-testing","wicket","read-only","wicket-tester"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13192669,"title":"How do you test Wicket TextFields for read-only?","body":"<p>I want to test that my Wicket <code>TextField</code> is set to <code>readonly</code>. I have set up my <code>WicketTester</code> but that just supports <code>assertDisabled()</code> which is useless and fails in my case. </p>\n\n<p>I already tried <code>tester.getComponentFromLastRenderedPage(compName).getString(\"readonly\")</code> and \n<code>tester.getComponentFromLastRenderedPage(compName).getMarkupAttributes().get(\"readonly\")</code> which both sounded somewhat promising to me but failed to deliver. </p>\n"},{"tags":["javascript","unit-testing","integration-testing","angularjs","angular"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13197272,"title":"Confusion between E2E testing, Unit testing and mocking data with $httpBackend","body":"<p>We've just started developing a web app with Angular and we're having some problems with testing it properly so we could use some advice. </p>\n\n<p>Generally, there are the following components to test:</p>\n\n<ol>\n<li>Web API</li>\n<li>Angular Controllers</li>\n<li>Angular routing</li>\n<li>HTML rendering and Angular binding of Controllers to the HTML elements</li>\n</ol>\n\n<p>How does one test all of this with minimum effort and none, if possible overlap?</p>\n\n<p>For any database-centric application, complete integration testing (i.e. with a live server, connected to a database loaded with data) would be particularly messy because there would have to be a process that generates sufficient data for all tests and resets the DB and tests would have to be careful not to modify each other's data. (if I'm missing something here please let me know)</p>\n\n<p>Given the above point, I'm assuming it is best to severe the link between server and client and run the Angular tests using mock data only.</p>\n\n<p>Also, I'm assuming that if E2E testing takes care of all possible scenarios, unit testing controllers is redundant as their values are bound to the model (and would thus be testing all of 2, 3 and 4 above). Unit testing would only be helpful in very complex controllers or to test services and directives.</p>\n\n<p>However, we could not find any information on how to mock stuff with <code>$httpBackend</code> on a per-test basis like you would do in unit tests, using <code>expect*()</code>. Angular docs seem to suggest using <code>when*()</code> plus the occasional <code>passthrough()</code> when necessary. </p>\n\n<p>But, this poses the aforementioned problem of creating test data for all scenarios and you'd probably need to reset the in-memory DB before each test to be sure the tests are not affected. Also, you're losing the safety of using <code>$httpBackEnd.expect*()</code> which checks there are no missing or redundant calls to the server - which would suggest to me that it would require unit testing controllers also to check this.</p>\n\n<p>Can someone provide a detailed testing strategy for AngularJS apps that addresses the testing of the 4 components above as well as the concerns written above?</p>\n"},{"tags":["unit-testing","ocmock"],"answer_count":2,"favorite_count":4,"up_vote_count":3,"down_vote_count":0,"view_count":1148,"score":3,"question_id":5658501,"title":"How can the return value of an OCMock stub be changed?","body":"<p>It seems that the first time I add <em>andReturnValue</em> on an OCMock stub, that return value is set in stone. For example:</p>\n\n<pre><code>id physics = [OCMockObject niceMockForClass:[DynamicPhysicsComponent class]\nEntity *testEntity = [Entity entityWithPhysicsComponent:physics];\nCGPoint velocity1 = CGPointMake(100, 100);\nCGPoint velocity2 = CGPointZero;\n[[[physics stub] andReturnValue:OCMOCK_VALUE(velocity1)] getCurrentVelocity];\n[testEntity update:0.1];\n[[[physics stub] andReturnValue:OCMOCK_VALUE(velocity2)] getCurrentVelocity];\n[testEntity update:0.1];\n</code></pre>\n\n<p>The stubbed method is called in [testEntity update]. But each time the stubbed method is returning the velocity1 value, so I guess the second attempt to set the methods return value isn't honoured.</p>\n\n<p>Is there a way to do do this in OCMock?</p>\n"},{"tags":["unit-testing","ejb","jersey","jax-rs"],"answer_count":1,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":285,"score":9,"question_id":11562367,"title":"hooking into @EJB or @PersistenceContext injection in JAX-RS unit tests","body":"<p>I'm enjoying learning JAX-RS and Jersey, but I've hit a roadblock trying to test a simple resource that needs a DAO injected, something like this:</p>\n\n<pre><code>@Stateless\n@Path(\"simple\")\npublic class SimpleResource {\n\n    @PersistenceContext\n    private EntityManager em;\n\n// @GET, etc...\n\n}\n</code></pre>\n\n<p>(I'll be moving to a more abstracted DAO pattern, but the problem is the same, i.e., how do I inject the @EJB DAO?)</p>\n\n<p>In my unit tests I'm using a embedded Jetty server that configures Jersey in its web.xml, and I'd like to hook into the resource's lifecycle so that I can inject a mock EntityManager, but I've not found a clean answer after a lot of searching. Can you help? Some possible directions I've come across:</p>\n\n<p><strong>1) Use JNDI context lookup in my code to get the DAO bean, and register the mock object in the tests.</strong></p>\n\n<p>Instead of @EJB or @PersistenceContext, use something like this in the resource's constructor:</p>\n\n<pre><code>  theDAO = (DAOImpl) new InitialContext().lookup(\"java:global/EJB/DAOImpl\");\n</code></pre>\n\n<p>However, that means my test environment needs to support JNDI, and doing so in Jetty will probably involve some pain. Plus, it doesn't use the clean annotation approach.</p>\n\n<p><strong>2) Use method injection.</strong></p>\n\n<p>Inject into the method so that I can set the DAO post-instantiation, e.g.,</p>\n\n<pre><code>@PersistenceContext(name = \"persistence/pu00\")\npublic void setPersistenceUnit00(final EntityManager em) {\n    em00 = em;\n}\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>private MyEjbInterface myEjb;\n@EJB(mappedName=\"ejb/MyEjb\")\npublic void setMyEjb(MyEjb myEjb) {\n    this.myEjb = myEjb;\n}\n</code></pre>\n\n<p>However, to do this I need the Jersey-instantiated instance, e.g., SimpleResource. How do I get that?</p>\n\n<p><strong>3) Use reflection.</strong></p>\n\n<p>A kind of DIY injection, something like:</p>\n\n<pre><code>public static void setPrivateField(Class&lt;? extends Object&gt; instanceFieldClass, Object instance, String fieldName, Object fieldValue) {\n    Field setId = instanceFieldClass.getDeclaredField(fieldName);\n    setId.setAccessible(true);\n    setId.set(instance, fieldValue);\n}\n</code></pre>\n\n<p>Again, I need the Jersey-instantiated instance.</p>\n\n<p><strong>4) Use an Injection Provider.</strong></p>\n\n<p>I'm still sketchy on how this works, but it looks like Jersey provides a means of defining customized injectable annotations, e.g.,</p>\n\n<pre><code>    @Provider\n    public class EJBProvider implements InjectableProvider&lt;EJB, Type&gt; {\n\n    public ComponentScope getScope() {\n    return ComponentScope.Singleton;\n    }\n\n    public Injectable getInjectable(ComponentContext cc, EJB ejb, Type t) {\n    if (!(t instanceof Class)) {\n        return null;\n    }\n    try {\n        Class c = (Class) t;\n        Context ic = new InitialContext();\n        final Object o = ic.lookup(c.getName());\n        return new Injectable&lt;Object&gt;() {\n        public Object getValue() {\n            return o;\n        }\n        };\n    } catch (Exception e) {\n        e.printStackTrace();\n        return null;\n    }\n    }\n}\n</code></pre>\n\n<p>A variation using a helper class:</p>\n\n<pre><code>Server server = new Server(8080);\nContext root = new Context(server,\"/\",Context.SESSIONS);\n\nResourceConfig rc = new PackagesResourceConfig(\"edu.mit.senseable.livesingapore.platform.restws.representations\");\nrc.getSingletons().add(new SingletonTypeInjectableProvider&lt;javax.ws.rs.core.Context, Myobj&gt;(Myobj.class, new Myobj(12,13)){});\n\nroot.addServlet(new ServletHolder(new ServletContainer(rc)), \"/\");\nserver.start();\n</code></pre>\n\n<p>With this use:</p>\n\n<pre><code>@Path(\"/helloworld\")\npublic class HelloWorldResource {\n    @Context Myobj myClass;\n    ....\n}\n</code></pre>\n\n<p>Is this viable for @EJB or @PersistenceContext?</p>\n\n<p><strong>5) Extend javax.ws.rs.core.Application.</strong></p>\n\n<p>Sketchy on this, but:</p>\n\n<pre><code>@javax.ws.rs.ApplicationPath(\"application\")\npublic class InjectionApplication extends javax.ws.rs.core.Application {\n\n  private Set&lt;Object&gt; singletons = new HashSet&lt;Object&gt;();\n  private Set&lt;Class&lt;?&gt;&gt; classes = new HashSet&lt;Class&lt;?&gt;&gt;();\n\n  public InjectionApplication() {\n    // no instance is created, just class is listed\n    classes.add(BookResource.class);\n  }\n\n  @Override\n  public Set&lt;Class&lt;?&gt;&gt; getClasses() {\n    return classes;\n  }\n\n  @Override\n  public Set&lt;Object&gt; getSingletons() {\n    return singletons;\n  }\n}\n</code></pre>\n\n<p><strong>6) Extend ServletContainer.</strong></p>\n\n<p>An older style of using InjectableProvider? Looks more complex:</p>\n\n<pre><code>public class ServletAdapter extends ServletContainer {\n\n@Override\nprotected void configure(ServletConfig servletConfig, ResourceConfig rc, WebApplication wa) {\n    super.configure(servletConfig, rc, wa);\n\n    rc.getSingletons().add(new InjectableProvider&lt;Resource, Type&gt;() {\n\n        public ComponentScope getScope() {\n            return ComponentScope.Singleton;\n        }\n\n        public Injectable&lt;Object&gt; getInjectable(ComponentContext ic, Resource r, Type c) {\n            final Holder value = new Holder();\n\n                Context ctx = new InitialContext();\n                try {\n                    value.value = ctx.lookup(r.name());\n                } catch (NamingException ex) {\n\n                    value.value = ctx.lookup(\"java:comp/env/\" + r.name());\n                }\n\n            return new Injectable&lt;Object&gt;() {\n                public Object getValue() {\n                    return value.value;\n                }\n            };\n        }\n    });\n}\n}  \n</code></pre>\n\n<p><strong>7) Use an embedded EJB container.</strong></p>\n\n<p>E.g., <a href=\"http://openejb.apache.org\">http://openejb.apache.org</a>. This is pretty heavy, and I expect it's going to be messy to get working. (In fact, what started me down the \"Jetty + Jersey\" route was a bug in GlassFish Embedded around security logins. I also looked at other Java EE 6 application containers like JBoss AS, but each had problems in embedded mode, with limited user community support.)</p>\n\n<p><strong>8) Use a third-party IoC library like Spring or Guice.</strong></p>\n\n<p>Spring is apparently commonly used for solving these kinds of problems (injecting mocks when unit testing), but I wanted to avoid having to learn another big set of APIs - pure Java EE has been enough of a challenge! But I'm game if it's the best solution. I haven't yet looked carefully into Spring or Guice.</p>\n\n<p>Have you used any of these successfully? Any other solutions you like? I'm really looking forward to your advice on this. Thanks in advance -- matt</p>\n"},{"tags":["python","unit-testing","sockets","simplehttpserver"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13195536,"title":"Executing an asynchronous test in Python","body":"<p>I need to do the following test:</p>\n\n<ul>\n<li>send a GET request to a server (http://remote/...)</li>\n<li>wait for the server to send a POST request in response (http://local/...)</li>\n<li>parse the POST data and do some assertions</li>\n</ul>\n\n<p>Selenium does not fit this case: it can't listen to connections, and I can send a GET without Selenium as well.</p>\n\n<p>so, I make a unit test:</p>\n\n<pre><code>class MobiMoneyTestCase(TestCase):\ndef test_can_send_response(self):\n    resp = requests.post('http://url/api/', data={'callback': 'http://localhost:8000'})\n\n    class Handler(SimpleHTTPRequestHandler):\n        def do_GET(self):\n            assert self.path == '...'\n\n    httpd = SocketServer.ThreadingTCPServer(('localhost', 8000),Handler)\n</code></pre>\n\n<p>The test has to wait 5 seconds for the POST request and then fail if nothing happened. How can I merge these items in the test? If I put <code>sleep(5)</code> in the <code>test_can...</code>, the <code>httpd</code> handler does not reply until the countdown ends.</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","generics"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13195821,"title":"Visual Studio 2010 - UnitTest - Exception while using generics and AssemblyInitialize","body":"<p>I have a problem with unit tests in Visual Studio 2010. I've pasted the simplified code below.</p>\n\n<pre><code>[TestClass]\npublic class TestClassA&lt;T&gt;\n{\n    [AssemblyInitialize()]\n    public static void Initialize(TestContext testContext) {}\n}\n\n[TestClass]\npublic class TestClassB : TestClassA&lt;String&gt;\n{\n    [TestMethod]\n    public void TestMethod()\n    {\n       Assert.IsTrue(true);\n    }\n}\n</code></pre>\n\n<p>When I run <code>TestMethod()</code>, I get the following exception:</p>\n\n<pre><code>Assembly Initialization method TestProject.TestClassA`1.Initialize threw exception. System.InvalidOperationException: System.InvalidOperationException: Late bound operations cannot be performed on types or methods for which ContainsGenericParameters is true.. Aborting test execution.\n\nat System.Reflection.RuntimeMethodInfo.ThrowNoInvokeException()\nat System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)\nat System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\nat Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestExecuter.RunAssemblyInitializeMethod()\n</code></pre>\n\n<p>When I google this bug, I can find advice how to fix code that uses reflection to call the <a href=\"http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.90%29.aspx\" rel=\"nofollow\">[AssemblyInitialize]</a> method. But that code is not mine, it's:          </p>\n\n<pre><code>Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestExecuter.RunAssemblyInitializeMethod()\n</code></pre>\n\n<p>I can use <a href=\"http://msdn.microsoft.com/en-us/library/ms245248%28v=vs.90%29.aspx\" rel=\"nofollow\">[ClassInitialize]</a> method instead of <a href=\"http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.90%29.aspx\" rel=\"nofollow\">[AssemblyInitialize]</a> and it works, but still I would like to use [AssemblyInitialize] method.</p>\n\n<p>Thank you in advance for any suggustions.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12860609,"title":"Visual Studio 2012 ExcludeFromCodeCoverage Method Shows In Results","body":"<p>I have the following method:</p>\n\n<pre><code>[ExcludeFromCodeCoverage]\nprivate static string GetAuthorizationToken(HttpActionContext actionContext)\n{\n    var authorization = actionContext.Request.Headers.FirstOrDefault(h =&gt; h.Key.Equals(\"Authorization\"));\n    // ... removed for brevity\n}\n</code></pre>\n\n<p>The <code>ExcludeFromCodeCoverage</code> attribute works for the whole method, except for <code>h.Key.Equals(\"Authorization\")</code>, which shows as uncovered despite the attribute on the method.</p>\n\n<p>How can I exclude this symbol from code coverage results?</p>\n"},{"tags":["unit-testing","nunit","mstest","mbunit","xunit.net"],"answer_count":8,"favorite_count":58,"up_vote_count":158,"down_vote_count":0,"view_count":33015,"score":158,"question_id":261139,"title":"NUnit vs. MbUnit vs. MSTest vs. xUnit.net","body":"<p>There are quite a lot of unittesting frameworks out there for .NET. I found this little feature comparison: <a href=\"http://xunit.codeplex.com/wikipage?title=Comparisons\" rel=\"nofollow\">http://xunit.codeplex.com/wikipage?title=Comparisons</a></p>\n\n<p>Now I am to choose the best one for us. But how? Does it matter? Which one is most future proof and has a decent momentum behind it? Should I care about the features? While xUnit seems to be most modern and specifically designed for .NET, NUnit again seems to be the one that is widely accepted. MSTest again is already integrated into Visual Studio ...</p>\n"},{"tags":["c++","unit-testing","callback","cppunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13192665,"title":"how to unit test an exception thown from a call back function","body":"<p>I am trying to unit test a function which returns instantly and then returns the actual result by a callback function. Can anybody help me in how to unit test this function using cppunit.</p>\n\n<p>for eg .</p>\n\n<p>MyFunction(callback call)\n{\n  .....</p>\n\n<p>}</p>\n\n<p>MyFunction returns success instantly and then the actual result in a callback function, from the callback an exception myexception is thrown how can I unit test to make sure that  myexception  is thrown?</p>\n"},{"tags":["c#",".net","unit-testing","naudio"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12803619,"title":"Unit Test NAudio using WaveInEvent and WaveOutEvent","body":"<h2>The Error</h2>\n\n<pre><code>The test adapter 'UnitTestAdapter' threw an exception while running test 'TestMP3CompressionFileNameMissingExtension'. Exception has been thrown by the target of an invocation.\nAttempted to read or write protected memory. This is often an indication that other memory is corrupt.\n</code></pre>\n\n<h2>Reproduction Steps</h2>\n\n<p>Simply run all tests in the solution and <strong><em>one</em></strong> of the test will fail with this error.</p>\n\n<h2>The Tests</h2>\n\n<p>Below is a couple of the tests. All of the tests kind of follow a similar pattern, sure they do differen things, but the test that it fails on is about as consistent as the weather so it doesn't really matter.</p>\n\n<pre><code>[TestClass]\npublic class Mp3CompressionTests\n{\n    [TestMethod]\n    public void TestMP3Compression()\n    {\n        var compressor = new Mp3Compressor();\n\n        var session = RecordingSessionHelper.Instance.GetRecordedSession(compressor: compressor);\n        var directoryBuilder = new Mp3TempFileNameBuilder();\n        var deploymentPath = Path.Combine(directoryBuilder.DirectoryPath, \"compressed\");\n\n        if (!Directory.Exists(deploymentPath))\n        {\n            Directory.CreateDirectory(deploymentPath);\n        }\n\n        session.CurrentRecording.Deploy(deploymentPath);\n\n        var filePath = Path.Combine(directoryBuilder.DirectoryPath, \"compressed\", session.CurrentRecording.DeployedFileName);\n\n        Assert.IsTrue(File.Exists(filePath));\n        Assert.IsTrue(File.Exists(Path.ChangeExtension(filePath, \"idx\")));\n    }\n\n    [TestMethod]\n    public void TestMP3CompressionFileNameMissingExtension()\n    {\n        var compressor = new Mp3Compressor();\n\n        var session = RecordingSessionHelper.Instance.GetRecordedSession(compressor: compressor);\n        var directoryBuilder = new Mp3TempFileNameBuilder();\n        var deploymentPath = Path.Combine(directoryBuilder.DirectoryPath, \"compressed\");\n\n        if (!Directory.Exists(deploymentPath))\n        {\n            Directory.CreateDirectory(deploymentPath);\n        }\n\n        compressor.CompressFile(session.CurrentRecording.TempFileName, Path.GetFileNameWithoutExtension(session.CurrentRecording.DeployedFileName));\n\n        var filePath = Path.Combine(Path.GetDirectoryName(session.CurrentRecording.TempFileName), session.CurrentRecording.DeployedFileName);\n\n        Assert.IsTrue(File.Exists(filePath));\n    }\n}\n</code></pre>\n\n<h2>The RecordingSessionHelper Class</h2>\n\n<p>I built this class just to make it easier to construct a recording session during unit testing.</p>\n\n<pre><code>internal class RecordingSessionHelper\n{\n    internal static RecordingSessionHelper Instance\n    {\n        get\n        {\n            return new RecordingSessionHelper();\n        }\n    }\n\n    internal IRecordingSession GetRecordingSession(\n        IAggregator aggregator = null,\n        ITempFileNameBuilder fileBuilder = null,\n        IRecordingDeployer deployer = null,\n        IRecordingCompressor compressor = null)\n    {\n        aggregator = aggregator ?? new SampleAggregator();\n        fileBuilder = fileBuilder ?? new WavTempFileNameBuilder();\n        deployer = deployer ?? new SharedDirectoryDeployer();\n        compressor = compressor ?? new GsmCompressor();\n\n        return new RecordingSession(aggregator, fileBuilder, deployer, compressor);\n    }\n\n    internal IRecordingSession GetRecordedSession(\n        IAggregator aggregator = null,\n        ITempFileNameBuilder fileBuilder = null,\n        IRecordingDeployer deployer = null,\n        IRecordingCompressor compressor = null)\n    {\n        aggregator = aggregator ?? new SampleAggregator();\n        fileBuilder = fileBuilder ?? new WavTempFileNameBuilder();\n        deployer = deployer ?? new SharedDirectoryDeployer();\n        compressor = compressor ?? new GsmCompressor();\n\n        ManualResetEvent eventRaised = new ManualResetEvent(false);\n\n        var session = GetRecordingSession(aggregator, fileBuilder, deployer, compressor);\n        session.RecordingStopped += (s, args) =&gt; { eventRaised.Set(); };\n\n        session.StartRecording(\"1\", \"01\", \"Test Name\", new WaveInEvent(), new WaveFileWriter(fileBuilder.FileName, compressor.RecordingFormat));\n        Thread.Sleep(1000);\n        session.StopRecording();\n\n        eventRaised.WaitOne();\n\n        return session;\n    }\n}\n</code></pre>\n\n<h2>The RecordingSession Class</h2>\n\n<p>This is where I'm obviously doing something wrong. In the tests I'm using the <code>WaveInEvent</code> class instead of the <code>WaveIn</code> because the <code>WaveInEvent</code> class doesn't use <code>windowed events</code>.</p>\n\n<pre><code>public class RecordingSession : IRecordingSession\n{\n    private IWaveIn _input;\n    private WaveFormat _waveFormat;\n    private Stream _writer;\n    private IAggregator _aggregator;\n    private ITempFileNameBuilder _tempFileNameBuilder;\n    private IRecordingDeployer _recordingDeployer;\n    private IRecordingCompressor _recordingCompressor;\n\n    public RecordingSession(\n        IAggregator aggregator,\n        ITempFileNameBuilder tempFileNameBuilder,\n        IRecordingDeployer recordingDeployer,\n        IRecordingCompressor recordingCompressor)\n    {\n        this.Recordings = new List&lt;RecordingTrack&gt;();\n\n        _aggregator = aggregator;\n        _tempFileNameBuilder = tempFileNameBuilder;\n        _recordingDeployer = recordingDeployer;\n        _recordingCompressor = recordingCompressor;\n\n        _waveFormat = _recordingCompressor.RecordingFormat;\n\n        _aggregator.NotificationCount = _waveFormat.SampleRate / 10;\n        _aggregator.MaximumCalculated += (s, args) =&gt; { OnMaximumCalculated(args); };\n    }\n\n    public event EventHandler&lt;WaveInEventArgs&gt; DataAvailable;\n\n    public event EventHandler RecordingStopped;\n\n    public event EventHandler&lt;MaxSampleEventArgs&gt; MaximumCalculated;\n\n    public RecordingTrack CurrentRecording\n    {\n        get\n        {\n            return this.Recordings.LastOrDefault();\n        }\n    }\n\n    public RecordingTrack LastRecording\n    {\n        get\n        {\n            if (this.Recordings.Count &lt;= 1)\n            {\n                return null;\n            }\n\n            return this.Recordings[this.Recordings.Count - 2];\n        }\n    }\n\n    public List&lt;RecordingTrack&gt; Recordings { get; private set; }\n\n    public bool IsRecording { get; private set; }\n\n    public float MicrophoneLevel { get; set; }\n\n    public WaveFormat RecordingFormat { get { return _waveFormat; } }\n\n    public void StartRecording(string claimNo, string ip_no, string ip_name, IWaveIn input, Stream writer)\n    {\n        if (this.IsRecording)\n        {\n            return;\n        }\n\n        if (_input != null)\n        {\n            _input.Dispose();\n            _input = null;\n        }\n        _input = input;\n\n        _input.WaveFormat = _waveFormat;\n        _input.DataAvailable += (s, args) =&gt;\n        {\n            _writer.Write(args.Buffer, 0, args.BytesRecorded);\n            byte[] buffer = args.Buffer;\n            for (int index = 0; index &lt; args.BytesRecorded; index += 2)\n            {\n                short sample = (short)((buffer[index + 1] &lt;&lt; 8) | buffer[index + 0]);\n                float sample32 = sample / 32768f;\n                _aggregator.Add(sample32);\n            }\n\n            OnDataAvailable(args);\n        };\n        _input.RecordingStopped += (s, args) =&gt;\n        {\n            _input.Dispose();\n            _input = null;\n\n            _writer.Dispose();\n            _writer = null;\n\n            OnRecordingStopped(args);\n        };\n\n        if (this.CurrentRecording != null)\n        {\n            _tempFileNameBuilder.GenerateNewFileName();\n        }\n\n        this.Recordings.Add(new RecordingTrack(claimNo, ip_no, ip_name,\n            _tempFileNameBuilder.FileName,\n            _recordingDeployer,\n            _recordingCompressor));\n        if (this.MicrophoneLevel == default(float))\n        {\n            this.MicrophoneLevel = .75f;\n        }\n\n        _aggregator.Reset();\n        _writer = writer;\n\n        _input.StartRecording();\n        this.IsRecording = true;\n    }\n\n    public void StopRecording()\n    {\n        if (!this.IsRecording)\n        {\n            return;\n        }\n\n        this.CurrentRecording.Stop();\n\n        _input.StopRecording();\n        this.IsRecording = false;\n    }\n\n    protected virtual void OnDataAvailable(WaveInEventArgs e)\n    {\n        // Make a temporary copy of the event to avoid possibility of \n        // a race condition if the last subscriber unsubscribes \n        // immediately after the null check and before the event is raised.\n        EventHandler&lt;WaveInEventArgs&gt; handler = DataAvailable;\n\n        // Event will be null if there are no subscribers \n        if (handler != null)\n        {\n            // Use the () operator to raise the event.\n            handler(this, e);\n        }\n    }\n\n    protected virtual void OnRecordingStopped(EventArgs e)\n    {\n        // Make a temporary copy of the event to avoid possibility of \n        // a race condition if the last subscriber unsubscribes \n        // immediately after the null check and before the event is raised.\n        EventHandler handler = RecordingStopped;\n\n        // Event will be null if there are no subscribers \n        if (handler != null)\n        {\n            // Use the () operator to raise the event.\n            handler(this, e);\n        }\n    }\n\n    protected virtual void OnMaximumCalculated(MaxSampleEventArgs e)\n    {\n        // Make a temporary copy of the event to avoid possibility of \n        // a race condition if the last subscriber unsubscribes \n        // immediately after the null check and before the event is raised.\n        EventHandler&lt;MaxSampleEventArgs&gt; handler = MaximumCalculated;\n\n        // Event will be null if there are no subscribers \n        if (handler != null)\n        {\n            // Use the () operator to raise the event.\n            handler(this, e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["visual-studio","unit-testing","tdd","visual-studio-extensions"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12563745,"title":"Visual Studio plug in to jump to test class","body":"<p>I was wondering if there is a plugin that allows me to jump directly to the test for the current class (Or create it if it doesn't exist). </p>\n\n<p>I guess this should be based on the convention that the test project is named like the project being tested + \"test\" and the test class is named like the class being tester + \"test\".</p>\n\n<p>A feature like that would really help in projects with many files and foldes, where scrolling the solution explorer to find the associated test project can be quite annoying.</p>\n"},{"tags":["java","unit-testing","testing","mocking","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":420,"score":3,"question_id":8003278,"title":"Is it possible to do strict mocks with Mockito?","body":"<p>I'd like to use strict mocks, at least when developing for the first time some tests against old code, so any methods invoked on my mock will throw an exception if I didn't specifically define expectations.</p>\n\n<p>From what I've come to see, Mockito if I didn't define any expectations will just return null, which will later on cause a NullPointerException in some other place.</p>\n\n<p>Is it possible to do that? If yes, how?</p>\n"},{"tags":["java","unit-testing","design","inheritance","lsp"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":13194154,"title":"Is it a good practice to unit test the Liskov Substitution principle's compliance?","body":"<p>Assume a class named <code>Sprinter</code>:</p>\n\n<pre><code>public class Sprinter {\n\n    protected int travelMeters;\n\n    public void run(int seconds) {\n        this.travelMeters = 9 * seconds;\n    }\n\n    public int getTravelMeters(){\n        return travelMeters;\n    }\n}\n</code></pre>\n\n<p>And a <code>SprintGenius</code> type inheriting <code>Sprinter</code>:</p>\n\n<pre><code>class SprintGenius extends Sprinter {\n\n    public void run(int seconds) {\n        this.travelMeters = 10 * seconds;\n    }\n}\n</code></pre>\n\n<p>Logically, 2 unit-tests class have to be created, one for each type.</p>\n\n<p>Within <code>Sprinter</code> unit-test, I would end up with:</p>\n\n<pre><code>@Before\npublic void setUp() {\n  Sprinter sprinter = new Sprinter();\n}\n\npublic void testSprinterShouldRun90metersWithin10Seconds() {\n  sprinter.run(10);\n  assertEquals(sprinter.getTraveledMeters(),90);\n}\n</code></pre>\n\n<p>Within <code>SprintGenius</code> unit-test, I would end up with:</p>\n\n<pre><code>@Before\npublic void setUp() {\n  Sprinter sprinter = new SprintGenius();\n}\n\npublic void testSprinterShouldRun100metersWithin10Seconds() {\n  sprinter.run(10);\n  assertEquals(sprinter.getTraveledMeters(),100);\n}\n</code></pre>\n\n<p>In both test above, I would test the amount of traveled meters within 10 seconds.</p>\n\n<p>Obviously, these both tests would be green.</p>\n\n<p><strong>However, what about the violation of Liskov Substitution principle?</strong></p>\n\n<p>Indeed, any client code should expect any sprinter to run exactly 10 meters within 9 seconds.</p>\n\n<p>3 solutions (the first two solutions being signaled RULES to ALL team's developer and would have to be admit and keeped, even if not everybody well master the concept of Liskov)</p>\n\n<p>1) In <code>Sprinter</code> class, duplicating each test but this time based on a <code>Sprinter sprinter = new SuperGenius()</code> and expect the 90 meters. => what should fail and this is precisely what we'd want! => prevent from violating Liskov principle.</p>\n\n<p>2) In <code>SprintGenius</code> class, always add a similar \"clone\" of each test based on the base class, based on the exactly same expectations.\nSo, if you have 2 distinct tests, we'd end up with 4 tests. 2 declaring Sprinter as a <code>Sprinter</code> and 2 declaring <code>Sprinter</code> as a <code>SprintGenius</code>.</p>\n\n<p>3) Never inheriting from concrete class (I imagine that it was your first reaction by reading this post:)), prefer composition if it fits! So that this issue doesn't happen. </p>\n\n<p>What is the best-practice to prevent from Liskov Substitution principle violation based on the fact that many many developers ignore Liskov principle and are often tempted to inherit from concrete classes instead of using another better way like composition or different inheritance hierarchy?</p>\n\n<p>I don't want to be trouble by the fact that a developer inherits from my written class (without telling me..), injecting it within a shared huge list of heterogeneous <code>Sprinter</code> list and facing me with 'hello the weird behavior !' and hours of debug time...</p>\n\n<p>I don't want of course to declare ALL my concrete classes 'final' :)</p>\n"},{"tags":["c#","unit-testing","constants","mstest"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13178395,"title":"Testing for all of the possible values of a constant","body":"<p>I have a constant in my application which determines the operation of some other parts of the program. I change this constant to quickly and easily alter the operation of the program.</p>\n\n<p>In my case, the constant is a <code>bool</code> so it can have one of two values.</p>\n\n<p>I want to write a test that will make sure my code is working whether the constant is set to true or not.</p>\n\n<p>For example, say my method is this:</p>\n\n<pre><code>public boolean IsEqual(float a, float b) {\n    var epsilon = 0.0001;\n\n    if (Constants.Exact) return (Math.Abs(a-b) &lt; epsilon);\n    else return (Math.Floor(a) == Math.Floor(b)); \n}\n</code></pre>\n\n<p><code>Constants</code> looks like this:</p>\n\n<pre><code>public static class Constants {\n    /// &lt;summary&gt;\n    /// Determines whether an exact comparison should be made, or whether fractional parts should be disregarded.\n    /// &lt;/summary&gt;\n    public const bool Exact = true;\n}\n</code></pre>\n\n<p>And the test method is:</p>\n\n<pre><code>[TestMethod]\npublic void TestEquality() {\n    var five = 5;\n    var three = 3;\n\n    Assert.True(Equals(five, three));\n}\n</code></pre>\n\n<p>Solutions I could come up with:</p>\n\n<ul>\n<li>Write the test as if the constant doesn't exist, set the constant to <code>true</code> and run tests, then set it to false and run tests. Bad because if I have 8 constants like this, I don't want to run the tests 256 times.</li>\n<li>Don't make it a constant. Inside the test method, first set constant to true, assert, then false, assert again. However, the reason I made it a constant in the first place is so that it's guaranteed not to change at run-time.</li>\n</ul>\n\n<p>I guess what I really want is a way to make it constant as far as the application proper is concerned, but not a constant as far as the test project is concerned.</p>\n\n<p>So how can I make a situation like this work?</p>\n"},{"tags":["objective-c","unit-testing","ocmock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12902256,"title":"PartialMock for Init method","body":"<p>I've tried swizzling out the init method for a partial mock and was wondering if this was possible.</p>\n\n<p>I've had no luck with:</p>\n\n<pre><code>SomeClass *foo = [SomeClass alloc];\nmock = [OCMockObject partialMockForObject:foo];\n[[[mock stub] andCall:@selector(mockInit) onObject:self] init];\n</code></pre>\n\n<p>...</p>\n\n<pre><code>[foo init];\n</code></pre>\n"},{"tags":["wcf","unit-testing","nunit"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":45,"score":3,"question_id":13190635,"title":"How to UnitTest WCF .SVC files","body":"<p>I am planning to unit test WCF Services that are exposed as <code>.svc</code> files. What are the best practices available to unit test them.</p>\n\n<p>As for as i know this is the option available:</p>\n\n<p>Create a seperate project and have proxy classes created for the .svc files and add them to the project and do unit testing on those proxy classes.\n   Proxy classes can be created using:</p>\n\n<ol>\n<li>svcutil.exe</li>\n<li>\"Add Service Reference\" option of visual studio.</li>\n</ol>\n\n<p>are there any other best option available to unit test my wcf <code>.svc</code> file using nunit?</p>\n"},{"tags":["visual-studio-2010","unit-testing","build","vs-unit-testing-framework"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13183583,"title":"Is it possible to avoid the build before running the unit testcase in visual studio or resharpher","body":"<p>Consider that i am changing only one test/unittest project,  and if i try to run that it builds the unit test project(accepted) and all the other dev projects(which is not  really required).</p>\n\n<p>how can i avoid this? i have 100+ projects in the solution so each unit test case run taking really long time because of the project build.</p>\n"},{"tags":["entity-framework","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13132601,"title":"Unit test Entity Framework using moq","body":"<p>I'm using entity framework and trying to unit test my data services which are using EF.\nI'm not using repository and unit of work patterns.\nI tried the following approach to mock the context and DbSet:</p>\n\n<pre><code>private static Mock&lt;IEFModel&gt; context;\nprivate static Mock&lt;IDbSet&lt;CountryCode&gt;&gt; idbSet;\n\n    [ClassInitialize]\n    public static void Initialize(TestContext testContext)\n    {\n        context = new Mock&lt;IEFModel&gt;();\n\n        idbSet = new Mock&lt;IDbSet&lt;CountryCode&gt;&gt;();\n\n        context.Setup(c =&gt; c.CountryCodes).Returns(idbSet.Object);\n\n    }\n</code></pre>\n\n<p>I get null \"Object reference not set to an instance of an object\" error for idbSet \"Local\".\nIs there any way to mock idbSet like this?\nThanks</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","inclusion"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13181083,"title":"Rails unit testing model validation :inclusion fails","body":"<p>Model order.rb</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n    attr_accessible :address, :email, :name, :payment_type_id\n    belongs_to :payment_type\n\n    PAYMENT_TYPES = PaymentType.pluck(:id)\n\n    validates :name, :address, :email, :payment_type_id, :presence =&gt; true\n    validates :payment_type_id, :inclusion =&gt; {:in =&gt; PAYMENT_TYPES}\nend\n</code></pre>\n\n<p>Model payment_type.rb</p>\n\n<pre><code>class PaymentType &lt; ActiveRecord::Base\n  attr_accessible :name, :id\n\n  has_many :order\nend\n</code></pre>\n\n<p>From browser, validation works fine, if it is wrong it give an error, else go forward.\nBut problem is when I run <code>rake test:functionals</code> from terminal. Test didn't pass the validation. If I comment this line:</p>\n\n<pre><code>validates :payment_type_id, :inclusion =&gt; {:in =&gt; PAYMENT_TYPES}\n</code></pre>\n\n<p>all is ok. I don't understand why it is working in one plase, but in tests not ? ... </p>\n\n<p>Fixtures are all ok.</p>\n\n<p>Please help.</p>\n"},{"tags":["c++","xml","unit-testing","googletest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13187896,"title":"Create xml reports in Google Tests in main()","body":"<p>Is it possible to make GoogleTest output an xml file by asking it to, in <code>main()</code> ?</p>\n\n<p>I know I can change the system environment variables (does anybody actually do that ?), or use a command line argument </p>\n\n<blockquote>\n  <p>--gtest_output=\"xml:_path_to_output_file_\".</p>\n</blockquote>\n\n<p>What I would like to do is have my program automatically generate the xml, every time, using a file name based on the project name. And of course - it would not happen on my computer...</p>\n\n<p>I looked in InitGoogleTest, but I can't see anything I can touch.</p>\n\n<p>(I would like to write actual code, not run my program in a postbuild).</p>\n\n<p>Are there any options for this ?</p>\n"},{"tags":["c++","unit-testing","circular-dependency","googletest","private-members"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13171077,"title":"FRIEND_TEST in Google Test - possible circular dependency?","body":"<p>I am trying to figure out how FRIEND_TEST works in Google Tests. \n<a href=\"http://code.google.com/p/googletest/wiki/AdvancedGuide#Private_Class_Members\" rel=\"nofollow\">http://code.google.com/p/googletest/wiki/AdvancedGuide#Private_Class_Members</a></p>\n\n<p>I am looking at the following item, trying to implement it in my code:</p>\n\n<pre><code>// foo.h\n#include \"gtest/gtest_prod.h\"\n\n// Defines FRIEND_TEST.\nclass Foo {\n  ...\n private:\n  FRIEND_TEST(FooTest, BarReturnsZeroOnNull);\n  int Bar(void* x);\n};\n\n// foo_test.cc\n...\nTEST(FooTest, BarReturnsZeroOnNull) {\n  Foo foo;\n  EXPECT_EQ(0, foo.Bar(NULL));\n  // Uses Foo's private member Bar().\n}\n</code></pre>\n\n<p>In the code above, the piece that I can't see, is that foo_test.cc must include foo.h, in order to have access to Foo and Bar(). [Perhaps it works differently for Google ? in my code, I must include it]</p>\n\n<p>That will result in circular dependency...</p>\n\n<p>Am I missing something ?</p>\n\n<p><strong>Edit:</strong> code sample: (re-edited after fixing - solution being changing test file from *.h to *.cpp):</p>\n\n<p>Project ppppp - file myfile.h:</p>\n\n<pre><code>class INeedToBeTested\n{\npublic:\n  extern friend class blah_WantToTestThis_Test;\n  INeedToBeTested();\n  INeedToBeTested(INeedToBeTested* item);\n  INeedToBeTested(OtherClass* thing, const char* filename);\n  ~INeedToBeTested();\n  bool Testable();\n  std::string MoreTestable();\n\nprivate:\n  int WantToTestThis();\n};\n</code></pre>\n\n<p>Project ppppp_gtest, file myFile_gtest.cpp:</p>\n\n<pre><code>#pragma once\n#include \"gtest/gtest.h\"\n#include \"myfile.h\" //property sheet adds include locations\n#include \"otherclass.h\"\n\n  class blah: public ::testing::Test{\n  // declarations, SetUp, TearDown to initialize otherclass thing, std::string filename\n  }\n  TEST_F(blah, WantToTestThis)\n      {\n        INeedToBeTested item(thing, filename.c_str());\n        item.WantToTestThis();   // inaccessible when this content is in header file\n      }\n</code></pre>\n\n<p>During my efforts to get this to work, I also experimented with creating a wrapper class (this also works only if in a cpp, not in header); while it requires changing <strong>private</strong> to <strong>protected</strong>, it doesn't require additional declarations inside tested code which each new test:  </p>\n\n<pre><code>// option: create wrapper (change private to protected first) \n  class INeedToBeTestedWrapper:public INeedToBeTested \n      {\n      public:\n         INeedToBeTestedWrapper(OtherClass* thing, std::string filename):\n            INeedToBeTested(OtherClass* thing, filename.c_str());\n      public:\n         using INeedToBeTested::WantToTestThis;\n      };\n\n      TEST_F(blah, WantToTestThis)\n      {\n        INeedToBeTestedWrapper item(thing, filename);\n        item.WantToTestThis();   \n      }\n</code></pre>\n"},{"tags":["c++","unit-testing","mocking","cppunit"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13179701,"title":"What mock frameworks work with cppunit?","body":"<p>I'm in the middle of implementing a unit test infrastructure for a large <code>C++</code> project, and due to political reasons I'm almost sure <a href=\"http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page\" rel=\"nofollow\"><code>CppUnit</code></a> will be pushed as the unit testing framework.</p>\n\n<p>I'm trying to identify mock frameworks that blend with <a href=\"http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page\" rel=\"nofollow\">CppUnit</a>. I've found <a href=\"http://mockpp.sourceforge.net/index-en.html\" rel=\"nofollow\">mockpp</a>, and I've heard that <a href=\"http://code.google.com/p/googlemock/\" rel=\"nofollow\"><code>Google Mock</code></a> should work.</p>\n\n<p>What frameworks work alongside <a href=\"http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page\" rel=\"nofollow\"><code>CppUnit</code></a>?</p>\n"},{"tags":["unit-testing","scala","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13168411,"title":"JUnit test categories in Scala?","body":"<p>I got it working! I literally translated the Java here into Scala line by line:</p>\n\n<p><a href=\"http://kentbeck.github.com/junit/doc/ReleaseNotes4.8.html\" rel=\"nofollow\">http://kentbeck.github.com/junit/doc/ReleaseNotes4.8.html</a></p>\n\n<p>Mostly it meant doing Array(classOf[ClassName]), removing \"public\" keywords, etc. My IntelliJ IDE helped a lot with suggestions.</p>\n\n<hr>\n\n<p>I want to be able to run categories of tests, so I might tag one class of tests as \"Version2dot3\" and \"SlowTest\" and then be able to run just \"slow tests\", or run \"slow tests AND 2.3 tests\".</p>\n\n<p>I've been trying to adapt this article to my Scala tests:</p>\n\n<p><a href=\"http://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0\" rel=\"nofollow\">http://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0</a></p>\n\n<p>I have a basic shell setup that almost works, but I'm getting <code>java.lang.Exception: No runnable methods</code> errors when I try to run the testSuite.</p>\n\n<p>Ideas? I've successfully been able to run only certain test classes with SuiteClasses, but have not been able to run categories of tests (@Category annotation).</p>\n\n<pre><code>import org.junit.experimental.categories.{Categories, Category}\nimport org.junit.runners.Suite.SuiteClasses\nimport org.scalatest.FunSuite\nimport org.junit.runner.RunWith\nimport org.scalatest.junit.JUnitRunner\n\n@RunWith(classOf[JUnitRunner])\n@Category(Array(classOf[SlowTests]))\nclass FunSuiteTest extends FunSuite with DemoHelpers {\n  test(\"demoTest1\") {\n    println(\"\\n\\nrunning DemoTest1...\\n\\n\")\n  }\n}\n\n@RunWith(classOf[JUnitRunner])\n@Category(Array(classOf[SlowTests]))\nclass FunSuiteTest2 extends FunSuite with DemoHelpers {\n  test(\"demoTest2\") {\n    println(\"\\n\\nrunning DemoTest2...\\n\\n\")\n  }\n}\n\n@RunWith(classOf[Categories])\n@SuiteClasses(Array(classOf[SlowTests]))\nclass testSuite {\n\n}\n</code></pre>\n"},{"tags":["unit-testing","iis","integration-testing","web-based"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13164222,"title":"Pragmatic choice for running \"unit\" tests on IIS servers","body":"<p>I have a couple of integration tests expressed as test classes under the Microsoft Unit Testing Framework. This is because my company has not yet decided on a(nother) integration testing framework. These \"unit\" tests check for things like certificates being installed in the right places, firewall permeability, etc. It's of course easy to run them on a development machine, but what counts is their behavior on staging and production servers. So what I need is a unit test runner suitable for those environments. Here are some options:</p>\n\n<ol>\n<li>Run them from command line using MSTest.exe. Con: Don't want to install VS20xx on staging and production servers.</li>\n<li>Use Maven. Con: Haven't climbed its initial learning curve yet. Maybe not the right use case to start with (despite e.g. Failsafe plugin). Pro: Seems to have enough scope to (also) cover a variety of integration scenarios.</li>\n<li>My initial favorite (pragmatic) choice is the following: install a service into IIS that acts as a unit test runner. It should present a web-based UI for pointing to DLLs with test classes, etc., and for visualizing test results. A \"thin\", web-based unit test runner (wrapper) so to speak, mainly for use at deployment and error analysis time.</li>\n</ol>\n\n<p>My question is: Do you know whether such beasts (for Microsoft Unit Test Framework) exist and if so, can you recommend a particular one (or a better way to go about this overall)? Thanks for your attention.</p>\n"},{"tags":["c#","unit-testing","moq","lazy-loading","lazy-evaluation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13185539,"title":"Moq Using Lazy Loading in Constructor","body":"<p>I ran into a strange problem today - I was writing a unit test around a SIM object. It asserts that when the SIM object is updated and the PIN attempts remaining has changed, it will call a particular method. The test looks like this:</p>\n\n<pre><code>        [Test]\n    public void TestUpdateSimInfoWithPinAttemptsChangedCallsOnPinAttemptsRemaining()\n    {\n        var info = new SimPinInfo {PinAttemptsRemaining = 10};\n\n        var sim = new Mock&lt;Sim&gt;(info);\n\n        info.PinAttemptsRemaining = 2;\n\n        sim.Object.UpdateSimInfo(info);\n\n        sim.Verify(s =&gt; s.FireOnPinAttemptsRemaining(), Times.Once());\n    }\n</code></pre>\n\n<p>So the mock SIM object is created with 10 PIN attempts remaining. The <code>SimPinInfo</code> object then has the <code>PinAttemptsRemaining</code> value reduced to 2 before being passed to the <code>UpdateSimInfo()</code> method.</p>\n\n<p>SIM constructor (trimmed for clarity):</p>\n\n<pre><code>internal Sim(SimPinInfo info) : this()\n    {\n        _pinAttemptsRemaining = info.PinAttemptsRemaining;\n        _pukAttemptsRemaining = info.PukAttemptsRemaining;\n     ......\n    }\n</code></pre>\n\n<p>And the <code>UpdateSimInfo()</code> method (trimmed):</p>\n\n<pre><code>internal void UpdateSimInfo(SimPinInfo info)\n    {\n        lock(_locker)\n        {\n            if (_pinAttemptsRemaining != info.PinAttemptsRemaining)\n            {\n                Log(\"PinAttemptsRemaining changed\");\n                _pinAttemptsRemaining = info.PinAttemptsRemaining;\n                FireOnPinAttemptsRemaining();\n            }\n         .....\n        }\n    }\n</code></pre>\n\n<p>A pretty simple test - what should happen is the above if statement will be true (pin attempts remaining has changed) so the <code>OnPinAttemptsRemaining</code> event will be fired. However, the test failed (although not all the time - it passed when I slowly stepped through the code!). What was happening was the if statement was false - both <code>_pinAttemptsRemaining</code> and <code>info.PinAttemptsRemaining</code> were 2. It appears that the SIM mock is not actually created when expected - when the <code>info.PinAttemptsRemaining</code> was 10.</p>\n\n<p>To demonstrated this, I added a comment:</p>\n\n<pre><code>var sim = new Mock&lt;Sim&gt;(info);\ninfo.PinAttemptsRemaining = 2;\nConsole.WriteLine(\"SIM's pin attempts = \" + sim.Object.PinAttemptsRemaining);\n</code></pre>\n\n<p>I also put a breakpoint in the SIM object's constructor. The breakpoint was hit when stepping over the <code>Console.WriteLine</code> line, not the <code>new Mock...</code> line. So the object is not being created until needed.</p>\n\n<p>I believe this is called lazy-loading or lazy-evaluation.</p>\n\n<p>There were various workaround to this behaviour - I ended up creating a new <code>SimPinInfo</code> object to pass to <code>UpdateSimInfo()</code>.</p>\n\n<p>Has anyone come across this behaviour before? I couldn't find any references to it.</p>\n"},{"tags":["java","unit-testing","junit","powermock","white-box"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13185784,"title":"PowerMock: Using Whitebox.invokeMethod(...) properly for a method taking an Object[] as a param","body":"<pre><code>private boolean isEmpty(Object[] array) {\n    if (array == null || array.length == 0) \n        return true;\n    for (int i = 0; i &lt; array.length; i++) {\n    if (array[i] != null) \n        return false;\n    }           \n\n    return true;\n}\n\n@Test\npublic void testIsEmpty() {\n        //where is an instance of the class whose method isEmpty() I want to test.\n    try {\n        Object[] arr = null;\n        assertTrue((Boolean)(Whitebox.invokeMethod(where, \"isEmpty\", new Class&lt;?&gt;[]{Object[].class},  arr)));\n\n        arr = new Object[0];\n        assertTrue((Boolean)(Whitebox.invokeMethod(where, \"isEmpty\", new Class&lt;?&gt;[]{Object[].class}, arr)));\n\n        arr = new Object[]{null, null};\n        assertTrue((Boolean)(Whitebox.invokeMethod(where, \"isEmpty\", new Class&lt;?&gt;[]{Object[].class}, arr)));\n\n        arr = new Object[]{1, 2};\n        assertFalse((Boolean)(Whitebox.invokeMethod(where, \"isEmpty\", new Class&lt;?&gt;[]{Object[].class}, arr)));\n    } catch (Exception e) {\n        fail(e.getMessage());\n    }       \n}\n</code></pre>\n\n<p>Problem: java.lang.AssertionError: wrong number of arguments</p>\n\n<p>Research:\n1. Initially, I tried:\n        invokeMethod(Object tested, String methodToExecute, Object... arguments) </p>\n\n<p>It failed for the 2nd, 3rd, and 4th invokeMethod(). (Error: method not found with given parameters)</p>\n\n<p>I thought this was potentially due to a problem of PowerMock not being to infer the correct method; hence, I switched to:\n        invokeMethod(Object tested, String methodToExecute, Class[] argumentTypes, Object... arguments)</p>\n\n<ol>\n<li><p>The parent class has an isEmpty() method that is overrode in the child class with an exact duplicated isEmpty() method. (legacy code) There are no other isEmpty() methods of differing signatures. There are many methods that take parameters, but none others that take an Object[] (e.g. no methods that take an Integer[] as a parameter). </p></li>\n<li><p>Prior to the second assertTrue statement above, changing to arr = new Object[1] makes that assert statement pass.</p></li>\n</ol>\n\n<p>Any help is greatly appreciated. Thanks! </p>\n"},{"tags":["java","unit-testing","junit4","code-reuse"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13185566,"title":"Reusing test implementations in JUnit 4?","body":"<p>I have an interface, e.g.:</p>\n\n<pre><code>public interface Thing {\n  FrobResult frob(FrobInput); \n}\n</code></pre>\n\n<p>And several implementations of that interface (e.g. <code>NormalThing</code>, <code>ImmutableThing</code>, <code>AsyncThing</code>) that I am trying to test.</p>\n\n<p>Many of my test methods are really about ensuring that the interface is implemented correctly, and thus are duplicated across each <code>Thing</code> implementation.  In JUnit 3 a common solution to this would be to create a base class (extending <code>TestCase</code>) that is then subclassed by each implementation class.  But is this the correct approach for JUnit 4?</p>\n\n<p>Possible alternatives in (I believe) ascending order of preference:</p>\n\n<ol>\n<li><p>Cut'n'paste the duplicated test methods.  Not DRY at all, but I guess less worrisome in tests than it would be in production code.</p></li>\n<li><p>Create an abstract class with <code>@Test</code> methods, and subclass it for each implementation test class.  (Commonly seen with JUnit 3 tests -- is this still a good way to go in JUnit 4?)</p></li>\n<li><p>Put the common test methods into a helper class, and invoke it on each implementation.  (Composition instead of inheritance.)</p></li>\n</ol>\n\n<p>What's the best practice for doing #3?  Maybe a <code>@RunWith(Parameterized.class)</code> test that is parameterized with each implementation?  Or is there a better way to accomplish this?</p>\n"},{"tags":["c#","linq","unit-testing","moq"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13185385,"title":"How to debug this or possible causes? System.NullReferenceException was unhandled by user code on Moq.Verify","body":"<p>I have something like this in my unit test</p>\n\n<pre><code>public class MyTestClass()\n{\n      private Mock&lt;IAccountRepo&gt; accountRepo;\n       private AdminService adminService;\n\n      [Setup]\n      public void Setup()\n      {\n        accountRepo = fixture.Freeze&lt;Mock&lt;IAccountRepo&gt;&gt;();\n        adminService = fixture.CreateAnonymous&lt;AdminService&gt;();\n      }\n\n      [Test]\n      public Test()\n      {\n          accountRepo.Setup(x =&gt; x.Insert(It.IsAny&lt;IUnitOfWork&gt;(), It.IsAny&lt;MyDomainObject&gt;()));\n\n            adminService.ApplyAdminFee(1, 1, today);\n\n            accountRepo.Verify(x =&gt; x.Insert(It.IsAny&lt;IUnitOfWork&gt;(), It.Is&lt;MyDomainObject&gt;(a =&gt; a.Id == 1)));\n      }\n}\n</code></pre>\n\n<p>I get this error.</p>\n\n<pre><code>System.NullReferenceException was unhandled by user code\n  Message=Object reference not set to an instance of an object.\n  Source=Anonymously Hosted DynamicMethods Assembly\n  StackTrace:\n       at lambda_method(Closure , MyDomainObject )\n       at Moq.It.&lt;&gt;c__DisplayClass2`1.&lt;Is&gt;b__1(TValue value)\n       at Moq.Match`1.Matches(Object value)\n       at Moq.Matcher.Matches(Object value)\n       at Moq.MethodCall.Matches(IInvocation call)\n       at Moq.Mock.&lt;&gt;c__DisplayClassc.&lt;VerifyCalls&gt;b__b(IInvocation i)\n       at System.Linq.Enumerable.WhereListIterator`1.MoveNext()\n       at System.Linq.Enumerable.Count[TSource](IEnumerable`1 source)\n       at Moq.Mock.VerifyCalls(Interceptor targetInterceptor, MethodCall expected, Expression expression, Times times)\n       at Moq.Mock.Verify[T](Mock mock, Expression`1 expression, Times times, String failMessage)\n       at Moq.Mock`1.Verify(Expression`1 expression, Times times)\n       at Test() in 383\n  InnerException: \n</code></pre>\n\n<p>I am not sure why.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I think I know what is happening. in my method I have 3 calls to the insert method(the insert method takes in an object).</p>\n\n<p>So I have like</p>\n\n<pre><code>accountRepo.Insert(MyDomainObject);\naccountRepo.Insert(MyOtherDomainObject);\naccountRepo.Insert(MyOtherOtherDomainObject);\n</code></pre>\n\n<p>So maybe those 2 other inserts are overriding it? how can I get around this?</p>\n"},{"tags":["java","unit-testing","junit4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":129,"score":-1,"question_id":9782167,"title":"Running a JUnit test case concurrently","body":"<p>I followed <em><a href=\"http://blog.mycila.com/2010/05/concurrent-junit-tests-with.html\" rel=\"nofollow\">Concurrent JUnit tests with RunnerScheduler</a></em>. It says I need to use the Java code in <a href=\"http://mycila.googlecode.com/svn/sandbox/src/main/java/com/mycila/sandbox/junit/runner/ConcurrentJunitRunner.java\" rel=\"nofollow\">ConcurrentJunitRunner.java</a>.</p>\n\n<p>But then part of the code in <code>ConcurrentJunitRunner.java</code></p>\n\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(\n                    klass.isAnnotationPresent(Concurrent.class) ?\n                            klass.getAnnotation(Concurrent.class).threads() :\n                            (int) (Runtime.getRuntime().availableProcessors() * 1.5),\n                    new NamedThreadFactory(klass.getSimpleName()));\n</code></pre>\n\n<p>generates the error</p>\n\n<blockquote>\n  <p>The method isAnnotationPresent(Class) in the type Class is not applicable for the arguments (Class)\"</p>\n</blockquote>\n\n<p>What should I do to remove the error?</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":92,"score":3,"question_id":13148669,"title":"Unit Testing Magic Methods","body":"<p>When it comes to unit-testing implementations of magic methods in PHP, what is the recommended means of invoking those methods?</p>\n\n<p>I see three options available:</p>\n\n<ul>\n<li><p>Invoking them explicitly/directly:</p>\n\n<p><code>$object-&gt;__get('someValue');</code></p></li>\n<li><p>Invoking them indirectly (using whatever action is intended to trigger them):</p>\n\n<p><code>$object-&gt;someValue; \\\\ Where __get() is implemented.</code></p></li>\n<li><p>Invoking them using both methods.</p></li>\n</ul>\n\n<p>Are there any unit testing veterans that could explain which (if any) would be the obvious choice, and why that might be?</p>\n\n<p><em>(This may be dancing close to subjective/debate territory, but I will ask in the hopes that there are some generally accepted principles I should consider when approaching this question.)</em></p>\n"}]}
{"total":15322,"page":3,"pagesize":100,"questions":[{"tags":["java","android","unit-testing","robotium"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13053060,"title":"How to Disable User Interaction in Robotium","body":"<p>I've coded some GUI unit tests with Robotium, but during the execution the touchscreen still remains responsive to user events. If I don't touch the screen, all the tests pass ok, but the all-green box is easily sabotaged if someone interacts with the screen at the same time the automated interaction is taking place (for instance, if I show a dialog but I close it manually, a test checking the dialog is displayed will fail).</p>\n\n<p>Is there a way to programmatically disable the user-input?</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":2,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":571,"score":2,"question_id":2581005,"title":"Django TestCase testing order","body":"<p>If there are several methods in the test class, I found that the order to execute is alphabetical. But I want to customize the order of execution. How to define the execution order?</p>\n\n<p>For example: testTestA will be loaded first than testTestB.</p>\n\n<pre><code>class Test(TestCase):\n    def setUp(self):\n        ...\n\n    def testTestB(self):\n        #test code\n\n    def testTestA(self):\n        #test code\n</code></pre>\n"},{"tags":["objective-c","ios","unit-testing","ocmock"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13152039,"title":"GHUnit, OCMock: how to test if one of two specified block is called?","body":"<p>I have a method that takes a response block and an error block, I write unit test by giving it valid data and invalid data so it will call response block and error block respectively, but with GHUnit and OCMock, how do I test if the correct block is called?</p>\n\n<p>I was thinking:</p>\n\n<p>for valid data:\nresponse\n{\n    GHAssertTrue(YES, @\"\");\n}\nerror\n{\n    GHAssertTrue(NO, @\"Valid data should not call error block\");\n}</p>\n\n<p>and vice-versa for invalid data.</p>\n\n<p>Is what I did correct?</p>\n"},{"tags":["java","unit-testing","java-ee","junit","ejb"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13180688,"title":"Need advices regarding EJB3 bean types vs unit testing","body":"<p>First off, here is my setup:</p>\n\n<ul>\n<li>App server: jBoss 4.2.3GA </li>\n<li>Frameworks used: Struts 2, EJB3 </li>\n<li>DBMS: PostgreSQL 9.0.3</li>\n</ul>\n\n<p>By default, I always set my beans to @Local for security purpose. I don't want to open doors to other application within the same container when there is no need for it.</p>\n\n<p>Now, I am focusing on driving my development with tests (test driven development). So, I created a separate project (a kind of test project) for my tests in order to avoid coding my tests and installing tests instruments (EasyMock, jUnit, StrutsTest, etc.) in the same project as the application.</p>\n\n<p>So... that means I set my beans to @Remote to be able to access them from my jUnit test classes. </p>\n\n<p>My question is: Is there any way to switch from @Local to @Remote using a sort of conditional compiling/building? Having to set my beans back to Local everytime is quite cumbersome and boring. Every developer knows that refactoring brings problems so I am trying to find a proper way to manage my bean's visibility. Another idea would be from a property or XML file so I would only need to turn one thing on or off depending on my needs.</p>\n\n<p>For every bean to test, I need to:\n - Set the interface to @Remote\n - Add the implements item for the remote interface in the session bean</p>\n\n<p>Any idea?</p>\n\n<p>Thank you very much</p>\n\n<p>Charles</p>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":382,"score":2,"question_id":11994396,"title":"Run/Debug Test in Current Context with Visual Studio 2012","body":"<p>In VS2010, one can Run or Debug Tests <em>in Current Context</em>.</p>\n\n<p>That made it easy to click on a test I had just added or modified and run it (<kbd>Ctrl</kbd>-<kbd>R</kbd> <kbd>T</kbd>) or debug it (<kbd>Ctrl</kbd>-<kbd>R</kbd> <kbd>Ctrl</kbd>-<kbd>T</kbd>). (or with my gaming keyboard... <kbd>G1</kbd> ;-)</p>\n\n<p>The only way I can find to run a specific test is to locate it in Test Explorer and run it from there. That requires shifting my focus away from the code I'm working on.</p>\n\n<p>Is there something equivalent to <em>Current Context</em> in Visual Studio 2012?</p>\n"},{"tags":["c#","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13182385,"title":"Mapping Unit Tests to methods","body":"<p>We're using Microsoft's Unit Test program and we use the Unit Test Wizard to create one-to-one mapping for methods in each class from the business layer. The issue is the amount of work needed go through and determine if we are missing any tests after the initial tests were created. </p>\n\n<p>Currently I have to run the wizard and look for tests that have a \"1\" appended to the default name [method][test]. Those with that name mean we have already have a test for that method. The ones without an append 1 mean those are methods that don't have a Unit Test that follow the default naming convention. </p>\n\n<p>I'm wondering if there is away to map Unit Test to a method with attribute on the Method so it doesn't take as much work. And yes, I know if we were following TDD we would write the Unit Test first. We write the test in parallel to development (but sometimes in rush it is missed).</p>\n"},{"tags":["php","unit-testing","tdd","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13176950,"title":"PHPUnit mock interface and class at the same time","body":"<p>I have some code that looks like this:</p>\n\n<pre><code>public function foo(Bar $bar) {\n    if ($bar instanceof Iterator) {\n        //...\n    }\n}\n</code></pre>\n\n<p>To test this I'm using:</p>\n\n<pre><code>$this-&gt;getMock('Bar');\n</code></pre>\n\n<p>However, because my code is looking for an instance of Bar that implements Iterator it essentially has two types. By calling getMock('Bar') or getMock('Iterator') the code is untestable. </p>\n\n<p>How can I make a mock implement an interface? This must be possible, surely?</p>\n"},{"tags":["unit-testing","visual-studio-2012","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12688562,"title":"ExpectedExceptionBaseAttribute in VS2012","body":"<p>I ran into an issue this morning after upgrading to Visual Studio 2012.</p>\n\n<p>Specifically, I have a class that extends ExpectedExceptionBaseAttribute. The test passes in Visual Studio 2010 but fails in 2012. </p>\n\n<p>The issue on Microsoft Connect is <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/758875/-testtools-unittesting-class-derived-from-expectedexceptionbaseattribute-fails\" rel=\"nofollow\">here</a> which has been closed as \"by design\" but in my opinion, this is a bug. Whilst there is a resolution provided by Microsoft, it requires me to force the new version of MSTest into a legacy mode.</p>\n\n<p>I have not included sample code here because there is a small sample project available for download on the Connect issue.</p>\n\n<p>If, as they state in the comments, the new version of MSTest is leaner and more performant, then I want to use it without putting it into a legacy mode.</p>\n\n<p>So the question is how do get it to work without resorting to that?</p>\n"},{"tags":[".net","vb.net","web-services","unit-testing","visual-studio-debugging"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13179621,"title":"Is it possible to interactively debug a web service while it's being executed in a Unit Test in VS2010?","body":"<p>Basically, I've got a pretty standard web service call, in a DLL project, running under the built debug server.</p>\n\n<p>Looks something like this</p>\n\n<pre><code>&lt;WebInvoke(Method:=\"POST\", BodyStyle:=WebMessageBodyStyle.Bare, UriTemplate:=\"\")&gt;\nPublic Function POSTOrder(httpPostOrder As Contract.APIOrder) As Contract.Response.Order\n    ....\n    Return (httpResponse)\nEnd Function\n</code></pre>\n\n<p>If I RUN the project, I can send XML POST requests to it using fiddler just fine, and if I set a breakpoint  in the above function, it gets hit.</p>\n\n<p>Now, I'd like to set up a simple unit test for this function, so I added a test project and this test:</p>\n\n<pre><code>&lt;TestMethod()&gt;\nPublic Sub TestPostOrder()\n    Dim r As String\n    Dim w As New Net.WebClient\n\n    W.Headers.Add(\"Content-Type\", \"application/xml\")\n    Dim x =\n            &lt;?xml version=\"1.0\"?&gt;\n            &lt;order_info&gt;\n                &lt;event_id&gt;103153&lt;/event_id&gt;\n                &lt;id&gt;1&lt;/id&gt;\n                .....\n            &lt;/order_info&gt;\n    r = w.UploadString(\"http://localhost:15034/orders/?api_key={sometext}\", \"POST\", x.ToString)\nEnd Sub\n</code></pre>\n\n<p>I know, not the greatest Unit Test in the world, but that's not the point right now.</p>\n\n<p>So, When I run this test, it DOES run through and it's successful. I can even debug the unit test, step through it, and see that the UPLOADSTRING call does succeed and return valid information.</p>\n\n<p>BUT, if I set a breakpoint in the actual function being tested, it's never hit.</p>\n\n<p>I found this question </p>\n\n<p><a href=\"http://stackoverflow.com/questions/5200758/can-i-debug-while-running-a-vs-unit-test\">Can I debug while running a VS Unit Test?</a></p>\n\n<p>but I tried that and no dice.</p>\n\n<p>I'm guessing I don't have something configured quite right with the unit test, and so it's not starting the actual DLL in a context that can be debugged, but so far, I've turned up nothing.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13139977,"title":"Is it possible to define a Jasmine spec inside a function and still have beforeEach apply to it?","body":"<p>I have a lot of tests which are virtually the same. In the interests of DRY and scanability I'd like to abstract the tests into a single function and then call that function with a few parameters. The function would then call <code>it</code> and add the spec to the suite.</p>\n\n<p>It seems to work, except the specs don't get run in the same way as the other specs and <code>beforeEach</code> is not called before the specs defined in the common function.</p>\n\n<pre><code>define(['modules/MyModule','jasmine/jasmine'], function(MyModule) {\n\n    describe('myModule', function() {\n\n        function commonTests(params) {\n            it('should pass this test OK', function() {\n                expect(true).toBe(true);\n            });\n\n            it('should fail because module is undefined', function() {\n                expect(module[params.method]()).toBe('whatever');\n            });\n        }\n\n        var module;\n\n        beforeEach(function() {\n            module = new MyModule();\n        });\n\n        describe('#function1', function() {\n            commonTests({\n                method: 'function1'\n            });\n        });\n\n        describe('#function2', function() {\n            commonTests({\n                method: 'function2'\n            });\n        });\n\n    });\n\n});\n</code></pre>\n\n<p>Is there any way of doing this and maintaining the functionality of <code>beforeEach</code> and <code>afterEach</code>?</p>\n\n<p><strong>UPDATE:</strong> </p>\n\n<p>Looks like I got my example wrong, sorry. Here's the case that fails:</p>\n\n<pre><code>define(['modules/MyModule'], function(MyModule) {\n\n    function commonTests(params) {\n        it('will fail because params.module is undefined', function() {\n            expect(typeof params.module).toBe('object');\n            expect(typeof params.module[params.method]).toBe('function');\n        });\n\n        it('has a few tests in here', function() {\n            expect(true).toBe(true);\n        });\n    }\n\n\n    describe('MyModule', function() {\n\n        var module;\n\n        beforeEach(function() {\n            module = new MyModule();\n        });\n\n        describe('#function1', function() {\n            commonTests({\n                module: module,\n                method: 'function1'\n            });\n        });\n\n        describe('#function2', function() {\n            commonTests({\n                module: module,\n                method: 'function2'\n            });\n        });\n\n    });\n});\n</code></pre>\n\n<p>I think it fails because the value of <code>module</code> is preserved as part of the call to <code>commonTests</code> instead of always using the current value of <code>module</code> as in the first example. I'll post my solution when I get there...</p>\n"},{"tags":["java","unit-testing","equals"],"answer_count":8,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":378,"score":1,"question_id":6877947,"title":"Why .equals method is failing on two same value objects?","body":"<p>I have created a value object <code>MarketVO</code> and two instances of this value object have same elements and same value for each element. </p>\n\n<p>My value object class is:</p>\n\n<pre><code>public class MarketVO {\n\n    private double floatAmt;\n    private Date marketDate;\n    private long marketCap;\n}\n</code></pre>\n\n<p>Here are the values:</p>\n\n<p>returnedData:</p>\n\n<pre><code>FloatAmt: 247657.5418618201, MarketCap: 5249164,\nMarketDate: 2011-07-29 00:00:00.0 \n</code></pre>\n\n<p>expectedData:</p>\n\n<pre><code>FloatAmt: 247657.5418618201, MarketCap: 5249164, \nMarketDate: 2011-07-29 00:00:00.0\n</code></pre>\n\n<p>Now in my unit test class, I want to assert that my returned and expected type is same containing same value in same order so am doing something like </p>\n\n<p><code>assertTrue(returnedData.equals(expectedData))</code>, now this is returning <code>false</code> value but if I do </p>\n\n<pre><code>assertEquals(testObject.getfloatAmt(), testObject2.getfloatAmt());\nassertEquals(testObject.getmarketCap(), testObject2.getmarketCap());\nassertEquals(testObject.getmarketDate(), testObject2.getmarketDate());\n</code></pre>\n\n<p>this test passes and so am not sure as to why <code>.equals</code> method is not working in here? Any suggestions?</p>\n\n<p><strong>Update:</strong> I want to put emphasize here that we are using this for doing <strong><em>Unit Testing</em></strong>. </p>\n"},{"tags":["java","unit-testing","rest","jersey","integration-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13178810,"title":"comparing two REST services to each other","body":"<p>Does anyone have any tips on writing tests that compare two REST services?  We are doing this as a form of regression testing.</p>\n\n<p>I was hoping to do something along the lines of:</p>\n\n<ol>\n<li>send a GET for \"/1\" to both services and compare the results</li>\n<li>send a POST to both services, and compare the results</li>\n<li>send a PUT to both services, and compare the results</li>\n</ol>\n\n<p>The idea is that:</p>\n\n<ul>\n<li>every operation is sent to both services</li>\n<li>the results should be identical</li>\n</ul>\n\n<p>The REST services are written in Java/Jersey, so using that would be ideal, but what have people found to be useful?</p>\n"},{"tags":["unit-testing","hadoop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12639621,"title":"MRUnit: Tests fail with custom writable","body":"<p>I am trying to implement unit test for my hadoop jobs using <a href=\"http://mrunit.apache.org/\" rel=\"nofollow\">MRUnit</a>.</p>\n\n<p>For my own Writable, the assertions in</p>\n\n<pre><code>withOutput(K2 k2, V2 v2)\n</code></pre>\n\n<p>fail. I have tried overriding the equals(Object o) method from Object, but that doesn't help. Any ideas how to tell MRUnit when two Writables are actually the same?</p>\n"},{"tags":["unit-testing","testng"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13174538,"title":"TestNG automatically disable tests","body":"<p>I am currently working on getting the Flexmojos project to build with the new Adobe Flex 4.8. The problem is, that with 4.8 one feature is no longer available. If I run the unittests against this sdk, the build will fail. I could disable the failling tests alltogether, but I would like to keep them in place, as they test important features of older Flex SDKs.</p>\n\n<p>Is there a way to automatically have tests skipped if a precondition is not met? I was thinking of some method being called to decide if a test should be executed. Alternatively I could set an environment variable. If there is any other option I would be glad to hear.</p>\n\n<p>Chris</p>\n"},{"tags":["c#","unit-testing","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13177476,"title":"Mocking System.Threading.Thread in .NET","body":"<p>My issue is - I have a class that has a <code>System.Threading.Thread</code> dependancy, and it will <code>Start()</code> the Thread once a certain condition is met.  I am having an issue Mocking a <code>System.Threading.Thread</code>.  </p>\n\n<p>I generally use <strong>Moq</strong> for mock objects, but I can't Mock a <code>Thread</code> (because it is sealed).</p>\n\n<p>I do realize I could write some wrapper that contains a Thread, then mock that wrapper - but I would like to avoid that if possible.</p>\n\n<p>Thanks in advance for any ideas!</p>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-web-api","repository-pattern"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13174184,"title":"Is the Repository Pattern valid for a ASP.Net WebAPI project which just calls remote services","body":"<p>I'm developing something similar to a service facade using the ASP.Net WebAPI. The objective is to create a RESTful middle layer between a backend system and a mobile application.</p>\n\n<p>The code inside these service operations does not contain any logic which accesses data from a database. i.e. the EF framework, Linq to SQL, etc. Instead data is selected and updated by calling another set of remote services offered by a back end system.</p>\n\n<p>I need to implement some sort of unit testing for each service operation. Almost all WebAPI unit testing tutorial I visited online contains data access via Entity Framework and a repository class just wraps a single EF entity. </p>\n\n<p>Hence in my case</p>\n\n<ol>\n<li>Does it make sense to have unit tests when there is no data access logic inside the service operations as I mentioned above?</li>\n<li><p>If so is the Repository pattern the way to go? Please link an example which tests against a MVC project that accesses data via remote service calls if possible. </p></li>\n<li><p>Am I confusing integration testing with unit testing?</p></li>\n<li>If so should I just go for integration testing and forget about unit tests.</li>\n</ol>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","visual-studio","unit-testing","scope","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13175576,"title":"What is the scope of a test class when running unit tests?","body":"<p>When Visual Studio is running unit tests, it runs many tests simultaneously. What exactly is the scope of the test class while these are running. Are they all run in separate app domains or is data shared at all?</p>\n\n<p>For instance if I have the following test class:</p>\n\n<pre><code>[TestClass]\npublic class FooTests\n{\n    Mock&lt;ISomeInterface1&gt; _complexMock1;\n    Mock&lt;ISomeInterface2&gt; _complexMock2;\n\n    public void CreateComplexMocks()\n    {\n        //set up _complexMock1 &amp; _complexMock2\n    }\n\n    [TestMethod]\n    public void Test1()\n    {\n        CreateComplexMocks();\n\n        //use _complexMock1 &amp; _complexMock2 in test\n    }\n\n    [TestMethod]\n    public void Test2()\n    {\n        CreateComplexMocks();\n\n        //use _complexMock1 &amp; _complexMock2 in test\n    }\n}\n</code></pre>\n\n<p>The tests utilise the <code>CreateComplexMocks()</code> helper to construct some mocks. These are exposed as members rather than being passed back to the test (there would probably be many more in a real world example)</p>\n\n<p>My question is, if both tests run at the same time, will they be sharing the state of <code>_complexMock1</code> and <code>_complexMock2</code>?</p>\n\n<p>What if the complexMocks were static?</p>\n"},{"tags":["c#","asp.net","unit-testing"],"answer_count":7,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1035,"score":2,"question_id":3705908,"title":"How to test asp.net email is being sent","body":"<p>I have some code in my asp.net which sends an email:</p>\n\n<pre><code>public void SendEmail(string message)\n{\n    var body = message;\n\n    var email = new MailMessage(ConfigurationManager.AppSettings[\"SenderEmail\"],\n                            ConfigurationManager.AppSettings[\"RecipientEmail\"],\n                            \"Email Test\", body);\n\n    var client = new SmtpClient();\n    client.Host = Properties.Settings.Default.smtp;\n    client.DeliveryMethod = SmtpDeliveryMethod.Network;\n    client.Credentials = CredentialCache.DefaultNetworkCredentials;\n\n    client.Send(email);\n}\n</code></pre>\n\n<p>I'm wanting to know how to test this. Whether it is a unit test or integration test I really just don't care. I'm NOT wanting to mock this out. I'm actually wanting to write a test that an email is sent with the correct message.</p>\n\n<p>Can anyone help me with this?</p>\n"},{"tags":["unit-testing","gui","functional-programming"],"answer_count":13,"favorite_count":13,"up_vote_count":15,"down_vote_count":0,"view_count":5103,"score":15,"question_id":92059,"title":"GUI Testing","body":"<p>I'm working on the issue of testing my GUI and I'm not entirely sure of the best approach here. My GUI is built using a traditional MVC framework so I am easily able to test the logic parts of the GUI without bringing up the GUI itself. However, when it comes to testing the functionality of the GUI, I'm not really sure if I should worry about individually testing GUI components or if I should mainly just focus on functional testing the system. It's a pretty complex system in which testing the GUI frequently involves sending a message to the server and then observing the response on the GUI. My initial thoughts are that functional testing is the way to go here since I need a whole system running to really test the UI. Comments on this issue would be appreciated.</p>\n\n<p>Thanks,\nJeff</p>\n"},{"tags":["c#",".net","unit-testing","moq","autofixture"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13168106,"title":"How to debug verify in moq?","body":"<p>I am using NPoco that comes with IDatabase class for the database call methods. I want to verify that the object going into the NPoco Insert method has the correct data(in the form of a domain object).</p>\n\n<pre><code>   public interface IUnitOfWorkProvider\n    {\n        IUnitOfWork GetUnitOfWork();\n    }\n\n    public interface IUnitOfWork : IDisposable \n        {\n            void Commit();\n            IDatabase Db { get; }\n            void SetOneTimeCommandTimeout(int timeout);\n            void SetGlobalCommandTimeout(int timeout);\n        }\n    public interface IDatabase : IDatabaseQuery\n    {\n        IDbConnection Connection { get; }\n        IDbTransaction Transaction { get; }\n\n        void AbortTransaction();\n        void BeginTransaction();\n        void BeginTransaction(IsolationLevel? isolationLevel);\n        void CompleteTransaction();\n        IDataParameter CreateParameter();\n        int Delete(object poco);\n        int Delete&lt;T&gt;(object pocoOrPrimaryKey);\n        int Delete&lt;T&gt;(Sql sql);\n        int Delete&lt;T&gt;(string sql, params object[] args);\n        int Delete(string tableName, string primaryKeyName, object poco);\n        int Delete(string tableName, string primaryKeyName, object poco, object primaryKeyValue);\n        void Dispose();\n        Transaction GetTransaction();\n        Transaction GetTransaction(IsolationLevel? isolationLevel);\n        object Insert(object poco);\n        object Insert(string tableName, string primaryKeyName, object poco);\n        object Insert(string tableName, string primaryKeyName, bool autoIncrement, object poco);\n        void Save(object poco);\n        void Save(string tableName, string primaryKeyName, object poco);\n        IDatabase SetTransaction(IDbTransaction tran);\n        int Update(object poco);\n        int Update&lt;T&gt;(Sql sql);\n        int Update(object poco, IEnumerable&lt;string&gt; columns);\n        int Update(object poco, object primaryKeyValue);\n        int Update&lt;T&gt;(string sql, params object[] args);\n        int Update(object poco, object primaryKeyValue, IEnumerable&lt;string&gt; columns);\n        int Update(string tableName, string primaryKeyName, object poco);\n        int Update(string tableName, string primaryKeyName, object poco, IEnumerable&lt;string&gt; columns);\n        int Update(string tableName, string primaryKeyName, object poco, object primaryKeyValue);\n        int Update(string tableName, string primaryKeyName, object poco, object primaryKeyValue, IEnumerable&lt;string&gt; columns);\n    }\n\n // my test class file\n private IFixture fixture;\n  private Mock&lt;IUnitOfWork&gt; unitOfWork;\n  private MyService myService;\n     private Mock&lt;IDatabase&gt; database; // new based on responses\n\n    [SetUp]\n        public void Setup()\n        {\n            fixture = new Fixture().Customize(new AutoMoqCustomization());\n database = fixture.Freeze&lt;Mock&lt;IDatabase&gt;&gt;();// new based on responses \n            unitOfWork = fixture.Freeze&lt;Mock&lt;IUnitOfWork&gt;&gt;();\n            myService = fixture.CreateAnonymous&lt;MyService&gt;();\n        }\n\n        [Test]\n        public MyTest()\n        {       \n              // fails\n            unitOfWork.Setup(x =&gt; x.Db.Insert(It.IsAny&lt;MyDomainObject&gt;()));\n            myService.CallMyMethod();\n            unitOfWork.Verify(x =&gt; x.Db.Insert(It.IsAny&lt;MyDomainObject&gt;()));\n\n            // fails\n            unitOfWork.Setup(x =&gt; x.Db.Insert(It.IsAny&lt;object&gt;()));\n            myService.CallMyMethod();\n            unitOfWork.Verify(x =&gt; x.Db.Insert(It.IsAny&lt;object&gt;()));\n// fails (this was a try based on responses)\n database.Setup(x =&gt; x.Insert(It.IsAny&lt;object&gt;()));       \n myService.CallMyMethod();        \n database.Verify(x =&gt; x.Insert(It.IsAny&lt;object&gt;()));\n\n            // passes\n            unitOfWork.Setup(x =&gt; x.Db.Insert(It.IsAny&lt;object&gt;()));\n            myService.CallMyMethod();\n            unitOfWork.Verify();\n        }\n\npublic class MyDomainObject\n{\n   public void Id {get; set;}\n}\n</code></pre>\n\n<p>The code being called(what should trigger the verify)</p>\n\n<pre><code> using (var unitOfWork = unitOfWorkProvider.GetUnitOfWork())\n            {\n       MyDomainObject myDomain = anotherService.getMyDomain(DateTime.Now, 100);\n       unitOfWork.Db.Insert(myDomain); \n\n}\n</code></pre>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","rspec"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13167638,"title":"RSpec test if all models respond_to attribute","body":"<p>I'm trying to write an RSpec test for what seems like a relatively simple test, but it's proving pretty tricky (though I am new to RSpec).</p>\n\n<p>In simple terms, I want to test that all models in my application respond_to :owner or :owners.</p>\n\n<p>My first problem is looping through all of the models - how to do this in RSpec? I can normally loop through the models like:</p>\n\n<pre><code>ActiveRecord::Base.descendants.each { |model|\n    model.should respond_to :owner\n}\n</code></pre>\n\n<p>But not sure how to do this correctly in RSpec? I can't find much documentation about using loops within tests.</p>\n\n<p>My second question is about an \"OR\" clause - how can I achieve \"responds to owner or owners\"? Something like:</p>\n\n<pre><code>model.should respond_to :owner || :owners\n</code></pre>\n\n<p>But again I can find much documentation about using or clauses.</p>\n\n<p>Thanks!</p>\n"},{"tags":["android","unit-testing","android-emulator","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13169260,"title":"Why does my test using sendKeys() not animate in the Android emulator?","body":"<p>When I run the following test in the Android emulator, the input value doesn't show up in the EditText. Why doesn't it? And what do I need to change so that I can see the input in the emulator? (The test passes, so in the end, it probably doesn't matter. I just would like to be able to see it actually happen in the emulator.)</p>\n\n<pre><code>public void testOkButtonOnClickWithUserInputNumber() throws Throwable {\n    this.sendKeys(Integer.toString(this.testNumber)); // 123\n\n    this.runTestOnUiThread(new Runnable() {\n        @Override\n        public void run() {\n            Assert.assertTrue(NumberFilterTest.this.okButton.performClick());\n        }\n    });\n\n    this.getInstrumentation().waitForIdle(new Runnable() {\n        @Override\n        public void run() {\n            Assert.assertTrue(NumberFilterTest.this.activity.isFinishing());\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","android","unit-testing","junit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13169235,"title":"Preferred way to test EditText input in an Android JUnit class","body":"<p>I have an Activity with EditText and Button widgets. Clicking the button prints an error message if the EditText is empty or calls <code>setResult()</code> to send the value back to another Activity which launched this one.</p>\n\n<p>I am writing some simple unit tests to check that this interaction works. I have two different versions of the same test:</p>\n\n<pre><code>@UiThreadTest\npublic void testOkButtonOnClickWithNumber() {\n    this.numberText.setText(Integer.toString(this.testNumber));\n    Assert.assertTrue(this.okButton.performClick());\n    Assert.assertTrue(this.activity.isFinishing());\n}\n\npublic void testOkButtonOnClickWithUserInputNumber() throws Throwable {\n    this.sendKeys(Integer.toString(this.testNumber));\n\n    this.runTestOnUiThread(new Runnable() {\n        @Override\n        public void run() {\n            Assert.assertTrue(NumberFilterTest.this.okButton.performClick());\n        }\n    });\n\n    this.getInstrumentation().waitForIdle(new Runnable() {\n        @Override\n        public void run() {\n            Assert.assertTrue(NumberFilterTest.this.activity.isFinishing());\n        }\n    });\n}\n</code></pre>\n\n<p>As you can see, one test simply calls <code>setText()</code> on the EditText widget. The other uses <code>sendKeys()</code>. Is there a preferred best practice which of these two options to use during testing? Or should I keep both tests?</p>\n"},{"tags":["php","unit-testing","stub","utilities"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":19,"score":3,"question_id":13168640,"title":"Ideal stubs utility for php unit testing","body":"<p>I am looking utility for the stubs for unit testing in php.\nStub must meet typehinting. Must be able to check the method calls with parameters. Must be able to return values ​​according to the specified parameters.\nDo you know any?</p>\n"},{"tags":["unit-testing","dynamic","reflection","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13145030,"title":"Run unit tests on dynamically created DLL","body":"<p>I am thinking on how to implement this , and seems like my knowledge is too poor to understand the implementation.</p>\n\n<p>I have a code that compiles source code to DLL.</p>\n\n<p>Then I need somehow to run Unit test on this Dll , and check 3-4 methods inside.</p>\n\n<p>I am trying to run unit tests this way.</p>\n\n<pre><code>CompilerResults compileResults = codeProvider.CompileAssemblyFromSource(compilerParameters, new string[] { sourceCode });\n\n            Assembly myAssembly = compileResults.CompiledAssembly;\n\n            TestPackage testPackage = new TestPackage(@\"TestingProject.dll\");\n            testPackage.Assemblies.Add(myAssembly);\n\n            RemoteTestRunner remoteTestRunner = new RemoteTestRunner();\n            remoteTestRunner.Load(testPackage);\n            TestResult testResult = remoteTestRunner.Run(new NullListener(),TestFilter.Empty,false,LoggingThreshold.All);\n</code></pre>\n\n<p>And this for example Test</p>\n\n<pre><code>   [Test]\n    public void AddTest(IDynamicScript s)\n    {            \n        Assert.AreEqual(10, s.Add(5,5));\n        Assert.AreNotEqual(10,s.Add(4,5));\n\n    }\n</code></pre>\n\n<p>Since Assembly is compiled dynamically , I can't reference it to unit test Project , and it will not compile , any suggestions please on how to implement this please</p>\n"},{"tags":["forms","unit-testing","testing","symfony2","symfony-forms"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13158732,"title":"Testing symfony 2 forms","body":"<p>I develop new type, but I don't know how I can test it.\nAssert annotation is not load and validations is not called.\nCould any one please help me?</p>\n\n<pre><code>class BarcodeType extends AbstractType\n{\n    public function buildForm(FormBuilderInterface $builder, array $options)\n    {\n        $builder-&gt;\n            add('price');\n    }\n\n    public function setDefaultOptions(OptionsResolverInterface $resolver)\n    {\n        $resolver-&gt;setDefaults(array(\n            'data_class' =&gt; 'Bundles\\MyBundle\\Form\\Model\\Barcode',\n            'intention'  =&gt; 'enable_barcode',\n        ));\n    }\n\n    public function getName()\n    {\n        return 'enable_barcode';\n    }\n}\n</code></pre>\n\n<p>A have following model for storing form data.</p>\n\n<pre><code>namepspace Bundles\\MyBundle\\Form\\Model;\nclass Barcode\n{\n    /**\n     * @Assert\\Range(\n     *      min = \"100\",\n     *      max = \"100000\",\n     *      minMessage = \"...\",\n     *      maxMessage = \"...\"\n     * )\n     */\n    public $price;\n}\n</code></pre>\n\n<p>I develop some test like this, the form didn't get valid data but it is valid! (Because annotation is not applied)\nI try adding ValidatorExtension but I dont know how can I set constructor paramaters</p>\n\n<pre><code>    function test...()\n    {\n        $field = $this-&gt;factory-&gt;createNamed('name', 'barcode');\n        $field-&gt;bind(\n                array(\n                    'price'         =&gt; 'hello',\n        ));\n\n        $data = $field-&gt;getData(); \n\n        $this-&gt;assertTrue($field-&gt;isValid()); // Must not be valid \n\n    }\n</code></pre>\n"},{"tags":["unit-testing","visual-studio-2012","code-coverage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13136950,"title":"Visual Studio 2012 code coverage partially touched area","body":"<p>I have a problem with Visual Studio 2012 unit testing, more precisely - with code coverage.\nHere is a target code:</p>\n\n<pre><code>var someDeals = allDeals\n            .Where(i =&gt; i.Number != null &amp;&amp; !i.Number.StartsWith(SomeString))\n            .Select(i =&gt; new DealInfoDto\n            {\n                CurrentDebtAmount = i.CurrentDebtAmount,\n                Date = i.Date,\n                NextMonthlyPaymentDate = i.NextMonthlyPaymentDate,\n                Number = i.Number,\n                AccountNumber = i.AccountNumber,\n            })\n            .ToArray();\n</code></pre>\n\n<p>When I run analyze code coverage it shows me that lambda expression in second line (<code>i.Number != null &amp;&amp; !i.Number.StartsWith(SomeString)</code>) is partially touched area and I can't get 100% coverage. But I'm sure that this expression is evaluated (expression inside SELECT is OK, so expression inside WHERE is true and that's mean that both parts of &amp;&amp; statement were touched, also I've checked data and I'm sure that <code>i.Number != null</code> and <code>!i.Number.StartsWith(SomeString)</code>.</p>\n\n<p>Why this block is not covered?</p>\n\n<p>P.S. I splitted <code>Where</code> into two expressions and everything became OK. But it looks smth ugly and would be better just one <code>Where</code>:</p>\n\n<pre><code>allDeals\n    .Where(i =&gt; i.Number != null)\n    .Where(i =&gt; !i.Number.StartsWith(CardAccountIdentifier))\n</code></pre>\n"},{"tags":["c#","unit-testing","dependency-injection","asp.net-mvc-4","visual-studio-2012"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13152268,"title":"Dependent (Procedural) Unit Testing in Visual Studio 2012","body":"<p>In an MVC4 C# website, we are using Unit Testing to test our code. What we are currently doing is creating a mock database, then testing each layer:</p>\n\n<ol>\n<li>Test the Database - connecting, initializing, load, etc.</li>\n<li>Test the code accessing the database</li>\n<li>Test the view layer</li>\n</ol>\n\n<p>I want these three categories to be run in order and only if the previous one passed. Is this the right way to go about it? The old way we were doing it was using a Dependency Injection framework was a weird approach to mock testing. We actually created a mock class for each data accessor, which sucks because we have to re implement the logic of each method, and it didn't really add any value because if we made a mistake with the logic the first time, we'll make it a second.</p>\n"},{"tags":["jquery","unit-testing","jquery-ajax","jasmine","sinon"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13148356,"title":"How to properly unit test jQuery's .ajax() promises using Jasmine and/or Sinon?","body":"<p>I've got a fairly straightforward function which returns a jQuery .ajax() promise as such:</p>\n\n<pre><code>CLAW.controls.validateLocation = function(val, $inputEl) {\n    return $.ajax({\n        url: locationServiceUrl + 'ValidateLocation/',\n        data: {\n            'locationName': val\n        },\n        beforeSend: function() {\n            $inputEl.addClass('busy');\n        }\n    }).done(function(result) {\n        // some success clauses\n    }).fail(function(result) {\n        // some failure clauses\n    }).always(function() {\n        // some always clauses\n    });\n}\n</code></pre>\n\n<p>For the most part, this new promises interface works like a dream, and eliminating callback pyramids when using jQuery's .ajax() is great. However, I cannot for the life of me figure out how to properly test these promises using Jasmine and/or Sinon:</p>\n\n<ol>\n<li><p>All of Sinon's documentation assumes you're using old-school\ncallbacks; I don't see a single example of how to use it with\npromises/deferreds</p></li>\n<li><p>When attempting to use a Jasmine or Sinon spy to spy on $.ajax, the\nspy is effectively overwriting the promise, so its <code>done</code>, <code>fail</code>,\nand <code>always</code> clauses no longer exist on the ajax function, so the promise never resolves and tosses an error instead</p></li>\n</ol>\n\n<p>I'd really just love an example or two of how to test these new jQuery .ajax() promises with the aforementioned testing libs. I've scoured the 'net fairly intensely and haven't really dredged up anything on doing so. The one resource I did find mentioned using Jasmine.ajax, but I'd like to avoid that if possible, seeing as Sinon provides most of the same capabilities out-of-the-box.</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13162237,"title":"Mocking foreach loop with Moq","body":"<p>I want to loop throug a XmlNodeList. How do you mock a XmlNodeList in Moq, so you can loop through it like in a foreach loop:</p>\n\n<pre><code>        foreach (XmlNode xmlNode in nodes)\n        {\n            //Do something with node\n        }\n</code></pre>\n\n<p>I have tried to set up via a the <code>SetupSequence</code> method, but I haven't been able to create the desired mock. </p>\n"},{"tags":["c#","unit-testing","microsoft-metro","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13162958,"title":"Windows 8 Appx installation timeout during unit test execution","body":"<p>We're running our Win8 Metro unit tests from powershell using vstest.console.exe, which is included with Visual Studio 2012. The way the process uses the unit test appx-package created by msbuild, and runs it: </p>\n\n<p><code>\\install\\location\\vstest.console.exe path\\to\\unittest.appx /InIsolation</code></p>\n\n<p>From time to time the execution fails with a timeout. </p>\n\n<pre><code>Starting test execution, please wait...\nError: Installation of package \n'\\absolute\\path\\to\\unittest.appx' \nfailed with Error: (0x5B4) Operation timed out. \nUnable to install Windows app package in 15 sec.\n\nFor more details look into Event Viewer under \nApplications and Services Logs -&gt; Microsoft -&gt; Windows \n  -&gt; AppXDeployment-Server -&gt; Microsoft-Windows-AppXDeploymentServer/Operational.\n</code></pre>\n\n<p>If checking the logs, as suggested by the tool, one can indeed see that there are some errors, but the package actually does seem to install after roughly 35 seconds. There is no real indication on the root cause of this problem though. Fierce googling didn't reveal anything, so maybe this category of problems would've been better solved with bing...</p>\n\n<p>Is this a known issue? Are there some normal reasons for appx installation to fail with a timeout, and that can be fixed easily? The error seems to be related specifically to installation, not the unit testing as such. Normally the whole test execution with install and uninstall finishes in a few seconds. </p>\n\n<p>If the answers to the questions above are no, then is it possible to increase the installation timeout either for the process, or system wide?  </p>\n"},{"tags":["sql","django","oracle","unit-testing","django-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13162771,"title":"django how to see sql query when running tests?","body":"<p>One of my django application unit test fails with</p>\n\n<pre><code>DatabaseError: ORA-00942: table or view does not exist\n</code></pre>\n\n<p>I would like to see actual SQL query that caused this error. Do you know how to achieve that?</p>\n"},{"tags":["android","unit-testing","junit","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13159006,"title":"Am I correct that Robolectric doesn't support Spinner right now","body":"<p>Tried to test Dialog with Spinner and got:</p>\n\n<pre><code>NullPointerException: can't get shadow for null\n</code></pre>\n\n<p>Am I correct that Robolectric doesn't support Spinner right now?</p>\n\n<p>As well it's not possible to register shadow for it?</p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":125,"score":2,"question_id":12181578,"title":"Visual Studio 2010 Not Recognizing Unit Test","body":"<p>In an existing solution I added a new Test Project.  In my Test Project .cs file I have a class decorated with the [TestClass] attribute and a method decorated with the [TestMethod] attribute.  I have verified that in Configuration Manager the build check box is checked for the Test Project (as my google search has revealed was the problem for others with this issue).  I have set Test Project as my start up project for the solution.  When I try to start the test I get \"Can not start test project because the project does not contain any tests\".  I am really new to unit testing.  What am I missing?</p>\n\n<pre><code>[TestClass]\npublic class UnitTest1\n{\n    [TestMethod]\n    public void TestMethod1()\n    {\n       Whole bunch of stuff\n       Assert.Inconclusive(\"Done\");\n    }\n }\n</code></pre>\n\n<p>Update:  So I opened a new instance of VS, went to File => New => Project => Test Project.  Did not touch or edit anything.  Went straight to the cs file and here are its contents in its entirety:</p>\n\n<pre><code>using Microsoft.VisualStudio.TestTools.UnitTesting;\n\nnamespace TestProject2\n{\n public class Inspection\n {\n    public bool SubmitInsp()\n    {\n        return true;\n    }\n }\n\n [TestClass]\n public class UnitTest1\n {\n    [TestMethod]\n    public void TestMethod1()\n    {\n        Inspection insp = new Inspection();\n        bool result = insp.SubmitInsp();\n\n        Assert.IsTrue(result);\n    }\n }\n}\n</code></pre>\n\n<p>Same error about the project not containing any test when I try to start it. Also found this in the build output \"Could not load file or assembly '~\\my documents\\visual studio 2010\\Projects\\TestProject2\\bin\\Debug\\TestProject2.dll' or one of its dependencies. Operation is not supported. (Exception from HRESULT: 0x80131515)\"</p>\n\n<p>I don't know that units tests get much simpler than this.  What the heck???</p>\n"},{"tags":["visual-studio-2010","unit-testing","output"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13157733,"title":"Visual Studio 2010: test runtime directory","body":"<p>In order to get a rather tedious third party library to work, I need my unit tests to be executed in a specific, prepared directory with a large set of resource files there (~ 500MB). The reason for this is that aforesaid third party library will only work when all resources, libraries and executables of my program are located in that same directory.</p>\n\n<p>When running Visual Studio 2010 unit tests, however, the test runner always creates a new directory (e.g. \"default[1]\") per test run. How can I get it to always use the same, fixed directory?</p>\n"},{"tags":["c#","unit-testing","testing","lambda","fluentvalidation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13148825,"title":"Validating enums with a custom FluentValidator validator","body":"<p>I created a custom validator, which tests that a value is within an enum's range of valid values:</p>\n\n<pre><code>public class IsInEnumValidator&lt;T&gt; : PropertyValidator {\n  public IsInEnumValidator() : base(\"Property {PropertyName} it not a valid enum value.\") { }\n  protected override bool IsValid(PropertyValidatorContext context) {\n    if (!typeof(T).IsEnum) return false;\n    return Enum.IsDefined(typeof(T), context.PropertyValue);\n  }\n}\n</code></pre>\n\n<p>And an extension method for chaining validators:</p>\n\n<pre><code>public static IRuleBuilderOptions&lt;T, TProperty&gt; IsInEnum&lt;T, TProperty&gt;(this IRuleBuilder&lt;T, TProperty&gt; ruleBuilder) {\n  return ruleBuilder.SetValidator(new IsInEnumValidator&lt;TProperty&gt;());\n}\n</code></pre>\n\n<p>I want to use use it like this:</p>\n\n<pre><code>RuleFor(x =&gt; x.Day).IsInEnum&lt;DayOfWeek&gt;();\n</code></pre>\n\n<p><strong>My questions:</strong></p>\n\n<ol>\n<li><p>This doesn't work as expected, as I need to speficy <code>....IsInEnum&lt;T, DayOfWeek&gt;()</code> instead of the desired <code>....IsInEnum&lt;DayOfWeek&gt;();</code>. How do I achieve this?</p></li>\n<li><p>I want to test this custom validator - not to test my data with this validator, but to test the validator itself. The library's docs explain how to test your data, not how to test a custom validator. There seems to be lots of testing code in the library, is there anything I can reuse? I use NUnit.</p></li>\n</ol>\n"},{"tags":["unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12486847,"title":"Are for loops that test a condition OK in unit tests?","body":"<p>I am starting to play around with xUnit and Moq and was wondering if I am doing it right.</p>\n\n<p>Should I write tests like this:</p>\n\n<pre><code>[Fact]\npublic void ForWebShouldReturnDev()\n{\n    // Arrange\n    var server = new Mock&lt;HttpServerUtilityBase&gt;();\n    server.SetupSequence(s =&gt; s.MachineName).Returns(\"t11466\").Returns(\"localhost\").Returns(\"webdev\");\n\n    var context = new Mock&lt;HttpContextBase&gt;();\n    context.SetupGet(c =&gt; c.Server).Returns(server.Object);\n\n    var service = new EnvironmentService(context.Object, null);\n\n    // Act / Assert\n    service.GetApplicationEnvironment().Should().Be(ApplicationEnvironment.Dev);\n    service.GetApplicationEnvironment().Should().Be(ApplicationEnvironment.Dev);\n    service.GetApplicationEnvironment().Should().Be(ApplicationEnvironment.Dev);\n}\n</code></pre>\n\n<p>Or more like this:</p>\n\n<pre><code>[Fact]\npublic void ForWebShouldReturnDev()\n{\n    // Arrange\n    var server = new Mock&lt;HttpServerUtilityBase&gt;();\n\n    var context = new Mock&lt;HttpContextBase&gt;();\n    context.SetupGet(c =&gt; c.Server).Returns(server.Object);\n\n    var service = new EnvironmentService(context.Object, null);\n\n    // Act / Assert\n    foreach (var name in new string[] { \"t11466\", \"localhost\", \"webdev\" })\n    {\n        server.Setup(s =&gt; s.MachineName).Returns(name);\n        service.GetApplicationEnvironment().Should().Be(ApplicationEnvironment.Dev);\n    }\n}\n</code></pre>\n\n<p>I know you are only supposed to test one unit of code per test, but when there are variables to the test is it OK to loop through asserts?</p>\n\n<p>I am having trouble figuring out the best way to test these types of things.</p>\n\n<p>For the record, below is the actual code under test:</p>\n\n<pre><code>// The constructor for the application environment\npublic EnvironmentService(HttpContextBase httpContext, IEnvironment environment)\n{\n    this.environment = environment;\n    this.httpContext = httpContext;\n}\n\nprivate readonly Dictionary&lt;ApplicationEnvironment, string&gt; applicationEnvironments = new Dictionary&lt;ApplicationEnvironment, string&gt;() {\n    { ApplicationEnvironment.Dev, \"DEV\" },\n    { ApplicationEnvironment.Test, \"TEST\" },\n    { ApplicationEnvironment.QA, \"QA\" },\n    { ApplicationEnvironment.Prod, \"PROD\" }\n};\n\npublic ApplicationEnvironment GetApplicationEnvironment()\n{\n    var machine = IsWeb ? httpContext.Server.MachineName : environment.GetCommandLineArgs().First();\n\n    return applicationEnvironments.FirstOrDefault(x =&gt; machine.ToUpper().Contains(x.Value)).Key;\n}\n</code></pre>\n\n<p>I have another question out there <a href=\"http://stackoverflow.com/questions/12484241/setup-moq-to-return-multiple-values\">here</a> regarding more specifics with Moq.</p>\n\n<p>Are there any good resources out there for Moq, their documentation is pretty thin.</p>\n"},{"tags":["unit-testing","configuration","xsd","visual-studio-2012","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12928436,"title":"Are there any xsd schemas available for the .runsettings file in Visual Studio 2012 unit tests?","body":"<p>Based on this msdn article <a href=\"http://msdn.microsoft.com/en-us/library/jj635153.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/jj635153.aspx</a>, in Visual Studio 2012 you need to use an xml file named .runsettings to configure your deployment,code coverage, framework settings etc. </p>\n\n<p>On first glance this looks great as you can hook in adapter settings from any test adapter, e.g. NUnit,MSTest,MBUnit etc. However in my installation of Visual Studio 2012 Premium there are no xsd schemas for creating this file, but there are of course the old schemas for the VS2010 .testsettings file. (xmlns=\"http://microsoft.com/schemas/VisualStudio/TeamTest/2010\" aka %programfiles%\\Microsoft Visual Studio 11.0\\Xml\\Schemas\\vstst.xsd)</p>\n\n<p>Has anyone found anything other than the sample on the link above to go for creating the run settings file? </p>\n\n<p>Also have you found how to reference the legacy VS2010 .testsettings file from the .runsettings file as there are no specifics on whether it should be relative or absolute in the \"SettingsFile\" node?</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13155796,"title":"how to test django project","body":"<p>I wrote some test case to test my django project, when I run them in jenkins it always create a <strong>default database</strong>, I want to test my project with my own database, how to do?</p>\n"},{"tags":["sql","tsql","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12171214,"title":"SQL Unit Testing Creating test for Stored procedure that does not necessarily return a value","body":"<p>I am new to sql unit testing but I have written my first test and trying to make sure this is a sensible test. So I have a stored procedure that does a simply Update(if exists) or insert(if not exists). Using TSQLUnit, I wrote the test below to test my stored procedure called <strong>spModifyData</strong>. What the test is designed to do is verify that when an existing ID is passed, a new record is not created in the database. </p>\n\n<pre><code>ALTER PROCEDURE [dbo].[ut_TestspModifyData] \nAS\nBEGIN \n    SET NOCOUNT ON;\n     -- Setup the test conditions by inserting test data\n     DECLARE \n                @newidone uniqueidentifier,\n                @newidtwo uniqueidentifier,\n                @newidthree uniqueidentifier,\n                @ExpectedID uniqueidentifier,\n                @ActualID uniqueidentifier\n\n                SET @ActualID = '13E7C741-9A04-4E84-B604-141874A6A9B4'\n                SET @ExpectedID = '13E7C741-9A04-4E84-B604-141874A6A9B4'\n                SET @newidone = newID()\n                SET @newidtwo = newID()\n                SET @newidthree = newID()\n\n                 INSERT INTO DataSource( [DataSourcePrimarySource],[DataSourceName],[DataSourceRecordCreateDate] \n          ,[DataSourceStatus] ,[DataSourceIsActive]) VALUES ('PRIMARY SOURCE ONE', 'XYZ', GETDATE() , @newidone, 1)\n\n  -- Exercise the test\n EXEC  spModifyDataSource @ActualID , 'PRIMARY SOURCE ONETWO', 'BBB', @newIDone, 0  \n\n -- Assert expectations\n IF (@ExpectedID != @ActualID)\n                EXEC dbo.tsu_Failure 'ModifyData failed.' \n\n-- Teardown\n -- Implicitly done via ROLLBACK TRAN\n\nEND\n</code></pre>\n"},{"tags":["ruby","unit-testing","class","instance-variables"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13152158,"title":"Unit testing sameness/equality of instances of the same class in Ruby","body":"<p>\nI'm trying to unit test sameness of two instances of one class in Ruby:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def test_example\n    a = Object.new\n    b = Object.new\n\n    assert_equal a, b\nend\n</code></pre>\n\n<p>I understand that this fails because the instances are distinct variables each with its own memory pointer. What I'm after is to get this test to pass if the instances are identical in all respects but their reference pointers.</p>\n\n<p>Here's a more involved (if contrived) example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Let's stir up something...\nclass FooBar\n    attr_accessor :seed, :foo, :bar\n\n    def foo_the_bar()\n        @bar = @seed + @foo * 3\n    end\nend\n\nf = FooBar.new\nf.seed = \"Mountains \"\nf.foo  = \"are just mountains \"\nf.bar = \"obliterate me!\"\nf.foo_the_bar\np f.bar # \"Mountains are just mountains are just mountains are just mountains \"\n\n\n# So far so good, now let's test if one FooBar is same as another...\n\nrequire 'test/unit'\nclass FooBarTest &lt; Test::Unit::TestCase\n\n    # Test fails: &lt;#&lt;FooBar:0x9a40d18&gt;&gt; expected but was &lt;#&lt;FooBar:0x9a40d04&gt;&gt;.\n    # But what we really want is a way to make this pass\n    # since the objects are exactly the same in every respect,\n    # besides their pointers.\n    def test_foobar_1_init\n        f1 = FooBar.new\n        f2 = FooBar.new\n\n        assert_equal f1, f2\n    end\n\n    # Again, test fails, but we want it to pass,\n    # since the instance variables are the same.\n    def test_foobar_2_instance_var\n        f1 = FooBar.new\n        f2 = FooBar.new\n\n        f1.seed = \"Santa says \"\n        f1.foo = \"ho \"\n        f1.bar = \"something\"\n        f1.foo_the_bar\n\n        f2.seed = f1.seed\n        f2.foo = f1.foo\n        f2.foo_the_bar\n\n        assert_equal f1, f2\n    end\n\n    # This test fails for the wrong reason.\n    # We want this to fail because the instance variables are different.\n    # This test should also fail if we add a method to one of the instances,\n    # or make the instances differ from each some other way.\n    def test_foobar_3_diff\n        f1 = FooBar.new\n        f2 = FooBar.new\n\n        f1.seed = \"Kitty goes \"\n        f1.foo = \"meow \"\n        f1.foo_the_bar\n\n        f2.seed = \"Doggies goes \"\n        f2.foo = \"woof \"\n        f2.foo_the_bar\n\n        assert_equal f1, f2\n    end\nend\n</code></pre>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":9,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":711,"score":5,"question_id":190007,"title":"Automagic unit tests for upholding Object method contracts in Java?","body":"<p>When developing Java applications, I often override Object methods (usually equals and hashCode).  I would like some way to systematically check that I'm adhering to the contract for Object methods for every one of my classes.  For example, I want tests that assert that for equal objects, the hash code is also equal.  I'm using the JUnit test framework, so preferably I'd like some JUnit solution where I can automatically generate these tests, or some test case that can somehow visit all of my classes and make sure that the contract is upheld.</p>\n\n<p>I'm using JDK6 and JUnit 4.4.</p>\n"},{"tags":["asp.net","unit-testing","testing","automated-tests","web-testing"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":163,"score":1,"question_id":4721129,"title":"Web Testing Software","body":"<p>I am working as a web developer in a company. I am not aware of anything related to testing. Our company is planning to buy some testing softwares. Presently we are working on ASP.NET. We will be working on PHP and JAVA in future. I need your help to find out the best but cost effective testing sofwares. I have got some suggestions on TFS and Visual Studio Testing tool. Don't know what to do. Please suggest me.</p>\n"},{"tags":["c#","unit-testing","design-patterns","moq"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":13139131,"title":"A generic testdata builder -- does it obscure the beauty of the pattern?","body":"<p>I have made a generic databuilder for unit test, because I got tired of implementing constructors and Build methods again and again. Does this obscure the beauty of the pattern (that I really DO love)? </p>\n\n<p>Here is my generic builder (built in C# with Moq): </p>\n\n<pre><code>public class GenericMockBuilder&lt;T&gt; where T: class\n{\n    private readonly Mock&lt;T&gt; _objectMock = new Mock&lt;T&gt;(); \n\n    protected Mock&lt;T&gt; ObjectMock\n    {\n        get { return _objectMock; }\n    }\n\n    public T Build()\n    {\n        return _objectMock.Object; \n    }\n}\n</code></pre>\n\n<p>And here is an example interface and its concrete builder that inherrits the generic one: </p>\n\n<pre><code>public interface IFoo\n{\n    int Bar();\n}\n\npublic class FooBuilder: GenericMockBuilder&lt;IFoo&gt;\n{\n    public FooBuilder WithBar(int barValue)\n    {\n        base.ObjectMock.Setup(x =&gt; x.Bar()).Returns(barValue);\n        return this;\n    }\n\n}\n</code></pre>\n\n<p>The builder will construct a foo mock like this: </p>\n\n<pre><code>        IFoo fooMock = new FooBuilder().WithBar(12).Build();\n</code></pre>\n\n<p>I would love to hear oppinions and suggestions for improvement. </p>\n\n<p><strong>EDIT (Eventraising example added):</strong> </p>\n\n<pre><code>public class FooBuilderWithEvent: GenericMockBuilder&lt;IFoo&gt;\n{\n\n    public FooBuilderWithEvent RaiseEvent(FooEventArgs fooEventArgs)\n    {\n        base.ObjectMock.Raise(m =&gt; m.FooEvent += null, fooEventArgs); \n        return this; \n    }\n\n}\n</code></pre>\n\n<p>Building Mock and raising event would look like this: </p>\n\n<pre><code>        FooBuilderWithEvent fooBuilderWithEvent = new FooBuilderWithEvent(); \n        IFoo fooMock = fooBuilderWithEvent.Build();\n\n        //Create testobject and prepare for event here\n\n        fooBuilderWithEvent.RaiseEvent(new FooEventArgs()); \n</code></pre>\n"},{"tags":["python","perl","unit-testing","nose"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":36,"score":-1,"question_id":13150963,"title":"How can we extend Test::Harness \"prove\" to have features like nosetest (Python) or vice versa","body":"<p>Here are some of the features provided by nose:</p>\n\n<ol>\n<li>nose supports fixtures (setup and teardown methods) at the package, module, class, and test level.</li>\n<li>In addition to passing command-line options, you may also put configuration options in your project’s setup.cfg file, or a .noserc or nose.cfg file in your home directory. </li>\n<li>There are numerous nose plugins available via easy_install and elsewhere. To use a plugin, just install it. The plugin will add command line options to nosetests.</li>\n<li>--verbosity=VERBOSITY option</li>\n<li>--testmatch=REGEX command line option</li>\n<li>--debug=DEFAULT command line option</li>\n<li>--log-config=FILE </li>\n<li>--ignore-files=REGEX</li>\n<li>--exclude=REGEX</li>\n<li>--include=REGEX</li>\n<li>--attr=ATTR Run only tests that have attributes specified by ATTR [NOSE_ATTR]</li>\n<li>--with-coverage</li>\n<li>--cover-min-percentage=DEFAULT</li>\n<li>--cover-xml</li>\n<li>--cover-xml-file=FILE</li>\n<li>--no-deprecated</li>\n<li>--with-id</li>\n<li>--with-xunit</li>\n<li>--collect-only</li>\n<li>nose allows tests to be grouped into test packages. </li>\n<li>provides a few convenience functions to make writing tests easier. </li>\n<li><p>nose includes a number of builtin plugins that can make testing faster and easier.\n <a href=\"https://nose.readthedocs.org/en/latest/plugins/builtin.html\" rel=\"nofollow\">built-in plugins</a></p></li>\n<li><p><a href=\"https://nose-plugins.jottit.com/\" rel=\"nofollow\">nose's 3rd party plugins</a></p></li>\n<li><p><a href=\"https://nose.readthedocs.org/en/latest/plugins.html#writing-plugins\" rel=\"nofollow\">How to write plugins for nose</a></p></li>\n</ol>\n\n<p>Now as for prove:</p>\n\n<p>Test::Harness provides a command, prove , which runs a TAP based test suite and prints a report.</p>\n\n<ol>\n<li>Attributes\nAfter command line parsing the following attributes reflect the values of the corresponding command line switches. They may be altered before calling run .</li>\n<li>archive</li>\n<li>argv</li>\n<li>backwards</li>\n<li>blib</li>\n<li>color</li>\n<li>directives</li>\n<li>dry</li>\n<li>exec</li>\n<li>extensions</li>\n<li>failures</li>\n<li>comments</li>\n<li>formatter</li>\n<li>harness</li>\n<li>ignore_exit</li>\n<li>includes</li>\n<li>jobs</li>\n<li>lib</li>\n<li>merge</li>\n<li>modules</li>\n<li>parse</li>\n<li>plugins</li>\n<li>quiet</li>\n<li>really_quiet</li>\n<li>recurse</li>\n<li>rules</li>\n<li>show_count</li>\n<li>show_help</li>\n<li>show_man</li>\n<li>show_version</li>\n<li>shuffle</li>\n<li>state</li>\n<li>state_class</li>\n<li>taint_fail</li>\n<li>taint_warn</li>\n<li>test_args</li>\n<li>timer</li>\n<li>verbose</li>\n<li>warnings_fail</li>\n<li>warnings_warn</li>\n<li>tapversion</li>\n<li>trap</li>\n</ol>\n\n<p>Some questions/Wish list:</p>\n\n<ol>\n<li>How can we ensure that tests run in alphabetical order, in prove ?</li>\n<li>How can we have prove results in XML/xUnit Style , so it can be rendered by Jenkins</li>\n<li>How can we have decorators / Annotations in prove like in Junit 4.x, or <a href=\"http://testng.org/doc/documentation-main.html\" rel=\"nofollow\">testng</a></li>\n<li>Provide extended assertions like <a href=\"https://github.com/easytesting/fest-assert-core.git\" rel=\"nofollow\">FEST</a></li>\n<li>prove to provide some examples on how to write plugins, which actually work (other than foo/bar type examples)</li>\n</ol>\n"},{"tags":["android","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13022706,"title":"Using custom InstrumentationTestRunner in Eclipse causes Error","body":"<p>I have a seperate Test Project in Eclipse that has been running successfully for a while in both command line and Eclipse.  While using Jenkins to run my tests, I've run into the issue where the standard InstrumentationTestRunner does not output in a Jenkins supported xml format.  I've read on the internet to use a custom InstrumentationTestRunner.  This works in the command line using ADB, but fails in Eclipse when running as Android Test Case.</p>\n\n<p>I've downloaded a custom instrumentation test runner (com.neenbedankt.android.test) and added it to the AndroidManifest like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.testedapplication.test\"\n    android:versionCode=\"1\"\n    android:versionName=\"1.0\" &gt;\n\n    &lt;uses-sdk android:minSdkVersion=\"7\" /&gt;\n\n    &lt;instrumentation\n        android:name=\"com.neenbedankt.android.test.InstrumentationTestRunner\"\n        android:targetPackage=\"com.testedapplication\" /&gt;\n\n    &lt;application\n        android:icon=\"@drawable/ic_launcher\"\n        android:label=\"@string/app_name\" &gt;\n        &lt;uses-library android:name=\"android.test.runner\" /&gt;\n    &lt;/application&gt;    \n&lt;/manifest&gt;\n</code></pre>\n\n<p>Here is the error that I get in Eclipse:</p>\n\n<p>[Test Project] is not configured correctly for running tests:\nA targetPackage attribute for instrumentation android.test.InstrumentationTestRunner in its AndroidManifest.xml could not be found!</p>\n\n<p>You can see that i've set the targetPackage there, so I'm not sure what else I can do?</p>\n"},{"tags":["unit-testing","junit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13147020,"title":"object cache for java unit testing","body":"<p>I am not sure what the correct technical term for the test scenario I am thinking about; but here are the features that I want to be able to do during mu unit testing:</p>\n\n<ol>\n<li><p>Instead of going to database I want a frame work that will store (serialized to disk) objects that I can pass to my unit test methods.</p></li>\n<li><p>I should be able to create these objects from a DB source and save them to use later in my UNIT test cases.</p></li>\n<li><p>The object store should be portable (like hsqldb file based DB that I can move around from system to system).</p></li>\n</ol>\n\n<p>Is there a technical term for framework/library for such requirement? Object Database/Object store etc? Please note that I am not trying to install/configure an entire database rather I want to be able to re-create an already created complex Object structure and pass it onto a junit test method.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13145493,"title":"how to unit test service call","body":"<p>how to test method that calls a service and passess in an object.</p>\n\n<pre><code>long AddFileDownloadEntry(FileDownloadEntry fde);\n</code></pre>\n\n<p>I understand how to unit test when there is some logic involved, but this service just passes in an object and the data in the object is inserted into the database.</p>\n\n<p>Edit:</p>\n\n<p>Sorry I wasn't clear , I'm trying to test the method in the service.</p>\n"},{"tags":["java","unit-testing","junit","jvm"],"answer_count":1,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":45,"score":8,"question_id":13144502,"title":"Is there a portable way to find out how many files a JVM has open from inside the VM?","body":"<p>I am writing tests for some Java file handling code and want to make sure all files are closed properly. I don't want to run 'lsof' as that will open more files and make the test suite non-portable. Anyone know a way to do this? </p>\n"},{"tags":["unit-testing","maven-2","scala"],"answer_count":4,"favorite_count":2,"up_vote_count":14,"down_vote_count":0,"view_count":3265,"score":14,"question_id":1093520,"title":"Is there a Scala unit test tool that integrates well with Maven?","body":"<p>My company is beginning to write some code using Scala.  I've been moved onto this project, and am a big fan of TDD, so I would like to get a unit-testing framework in place.  However, the build system we're using for this project is Maven, and that's not going to change, for a variety of reasons.</p>\n\n<p>I've looked at both ScalaTest and ScalaCheck, and both seem to have issues with Maven integration.  Various forum posts I've seen in Google searches indicate that some of the Suites included with ScalaTest won't run under the maven-scala-plugin, and I haven't been able to find any information at all on running ScalaCheck in Maven's test goal.</p>\n\n<p>Can anyone either point me at a way to get ScalaTest/ScalaCheck running reliably with Maven, or suggest an alternative?</p>\n"},{"tags":["unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1490,"score":2,"question_id":4422837,"title":"MS Unit testing example","body":"<p>I'm struggling to get my head around unit testing. I've been following examples from both Nerd dinner and pro asp.net MVC framework, but as soon as I attempt my own quickly become stuck. As a test I have tried to build a validation class that simply using login information - usename and password to return a user from a repository. I've used this example as it's pretty simple to imagine what tests one might perform: Is_Password_Valid, Is_Username_Valid etc. </p>\n\n<p>I've spent far too long trying to get my noggin around this. Could any one provide an example of how they might approach this as a unit test? I think once I've cracked this I'll be away.</p>\n\n<pre><code>//Arrange\nstring email = \"test@test.com\";\nstring password = \"test\";\n\n//Arrange\nList&lt;Customer&gt; customer = new List&lt;Customer&gt;();\n\ncustomer.Add(new Customer { CustomerId = 1, Email = email, Password = \"best\", FirstName = \"test\", LastName = \"wods\", Sex = true });\nmockRepos = new Moq.Mock&lt;ICustomerRepository&gt;();\nmockRepos.Setup(x =&gt; x.GetCustomerByPasswordUsername(email, password)).Returns(customer.First());\nAuthenticate auth = new Authenticate(mockRepos.Object);\n\n//Act\nvar result = auth.Login(email, password);\n\n//Assert\n//this is where I start to become unstuck??????\n</code></pre>\n"},{"tags":["unit-testing","matlab","continuous-integration","simulink","stateflow"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":662,"score":6,"question_id":7335266,"title":"Unit testing/continuous integration with Simulink/Stateflow","body":"<p>How can I perform unit testing in Simulink, or preferably, Stateflow?</p>\n\n<p>I'm a fan of agile software methods, including test driven development. I'm responsible for the development of safety critical control software and we're using Matlab/Simulink/Stateflow for the development of it. This toolset is selected because of the link with plant (hardware) models. (model-in-the-loop, hardware-in-the-loop)</p>\n\n<p>I have found some links on Stackoverflow: <a href=\"http://stackoverflow.com/questions/3992295/unit-testing-framework-for-matlab\">Unit-testing framework for MATLAB</a>: <a href=\"http://www.mathworks.com/matlabcentral/fileexchange/22846-matlab-xunit-test-framework\">xunit</a>, <a href=\"http://sourceforge.net/projects/mlunit/\">slunit</a> and <a href=\"http://www.mathworks.com/matlabcentral/fileexchange/28862-doctest-embed-testable-examples-in-your-functions-help-comments\">doctest</a>.</p>\n\n<ul>\n<li>Does anyone have experience in using those or different unit test frameworks?</li>\n<li>How to link this to continuous integration systems (i.e. Hudson)?</li>\n</ul>\n"},{"tags":["c#",".net","unit-testing","mocking"],"answer_count":19,"favorite_count":131,"up_vote_count":318,"down_vote_count":0,"view_count":57857,"score":318,"question_id":37359,"title":"What C# mocking framework to use?","body":"<p>I want to start using <a href=\"http://en.wikipedia.org/wiki/Mock_object\">mock objects</a> on my next C# project.</p>\n\n<p>After a quick Google search I've found there are many:</p>\n\n<ul>\n<li><a href=\"http://www.nmock.org/\">NMock</a>  </li>\n<li><a href=\"http://sourceforge.net/projects/easymocknet/\">EasyMock.NET</a></li>\n<li><a href=\"http://www.typemock.com\">TypeMock Isolator</a>  <strong><em>Commercial / Paid</em></strong></li>\n<li><a href=\"http://hibernatingrhinos.com/open-source/rhino-mocks\">Rhino Mocks</a></li>\n<li><a href=\"http://code.google.com/p/moq/\">Moq</a></li>\n<li><a href=\"http://nsubstitute.github.com/\">NSubstitute</a></li>\n<li><a href=\"http://www.telerik.com/products/mocking.aspx\">JustMock</a> <strong><em>Commercial / Paid</em></strong></li>\n<li><a href=\"https://github.com/fakeiteasy\">FakeItEasy</a></li>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/hh549175%28v=vs.110%29.aspx\">Microsoft Fakes</a> (formerly Moles) <strong><em>Commercial (included with Visual Studio 2012 Ultimate)</em></strong></li>\n</ul>\n\n<p>So my question is: <strong>what one is your favourite .NET mocking framework and why?</strong></p>\n"},{"tags":["unit-testing","junit","cq5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13120001,"title":"How to write JUnit test cases for CQ5 components?","body":"<p>Please help me in writing JUnit test cases for CQ5 components. I want to mock the Pages, Nodes and iterate RequestParameterMap.</p>\n"},{"tags":["unit-testing","grails","conventions"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13129227,"title":"Grails project setup and convention - testing a spring component that is not really a service","body":"<p>At first I have to say that I have more background with Spring than grails, and the later convention over configuration is a bit disturbing, when you don't have the cards.</p>\n\n<p>Considering a grails project.</p>\n\n<p>If I have a 'Component' (Spring term for a POJO that will be in the spring context) that is not really a service, but more a part of another object, where should I put it ? In the src/groovy or in grails/services ? \nIt is looking like the second option give me more power for writing my tests and since Grails views Service as:</p>\n\n<blockquote>\n  <p>Services in Grails are the place to put the majority of the logic in\n  your application</p>\n</blockquote>\n\n<p>I feel like the grails/services dir is a kind of a bag for all Springified beans...</p>\n\n<p>Next question, how can I <strong>unit</strong> test my Component/Service if I need some companions bean in the Spring context for that said Service.\nThis companions are not services, but rather other components that are mandatory at runtime but for which I can use default implementations.</p>\n\n<p>With spring I can simply use this kind of annotation to create a small context for my tests:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"/simple-job-launcher-context.xml\", \n                                    \"/jobs/skipSampleJob.xml\" })\n</code></pre>\n\n<p>How to do the same with Grails ? \nI want to know if there is a prefered way to create a small Spring context, that can be reused and composed, for the tests as I can do with the <strong>@ContextConfiguration</strong> annotation.</p>\n\n<p>With all the hidden conventions of grails I fear to not use the right way (if one exists) but the lake of clear explanation about them drive me toward direct usage of Spring.</p>\n"},{"tags":["unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13130226,"title":"Unit Testing - do edge cases require separate test methods?","body":"<p>When unit testing, should edge cases testing the same method each require a separate test method.  For example, testing for an empty string passed to the following function:</p>\n\n<pre><code>public function add($numbers)\n{\n    $numbers = preg_replace('/\\s/', '', $numbers);\n    if ($numbers === \"\") {\n        return 0;\n    }\n}\n</code></pre>\n\n<p>i obviously want to catch edge cases such as:</p>\n\n<pre><code>\"\"\n\" \" \n\"\\t \\n\"\n\"asd\"\n</code></pre>\n\n<p>etc</p>\n\n<p>So how many test methods would be required to prove this method works?</p>\n\n<pre><code>public function testAddEmptyString()\n{\n    $stringCalculator = new StringCalculator();\n    $this-&gt;assertSame(0, $stringCalculator-&gt;add(\"\"));\n}\n\npublic function testAddEmptyStringWithSpaces()\n{\n    $stringCalculator = new StringCalculator();\n    $this-&gt;assertSame(0, $stringCalculator-&gt;add(\"  \"));\n}\n\npublic function testAddEmptyStringWithCharacters()\n{\n    $stringCalculator = new StringCalculator();\n    $this-&gt;assertSame(0, $stringCalculator-&gt;add(\"asd\"));\n}\n</code></pre>\n\n<p>This seems like the test class would contain massive amounts of methods for anything non trivial</p>\n"},{"tags":["java","unit-testing","observer-pattern"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13138964,"title":"Observer pattern imp","body":"<p>I am doing a observer pattern as a homework but i am failing the Test.\nI have been stacked for quite a while. If you could have a look at my code and give me an advice where I am wrong and what I am not doing as supposed. Cheers. Here is the code.</p>\n\n<pre><code>public class Share \n{\n    /**@param poundsAndPences stores the monetary unit for the share.\n     * @unique a  instance of the Share class responsible for the observer pattern*/\n    private double poundsAndPences = 1.00;\n    ArrayList&lt;ShareWatcher&gt; list = new ArrayList&lt;ShareWatcher&gt;();\n\n    public boolean addShareWatcher(ShareWatcher sw)\n    {\n            list.add(sw); \n            if (list.contains(sw))\n            {\n                return true;\n            }\n        return false;\n    }\n\n    public boolean removeShareWatcher(ShareWatcher sw)\n    {\n        if(list.contains(sw))\n        {\n             list.remove(sw);\n            return true;\n        }\n        else\n        {\n          return false;  \n        } \n\n\n    }\n\n    /** Share(double poundsAndPences) private constructor.\n     * 1-st pre-requisite for the multiple pattern \n     * takes and double value and initialized the local\n     * variable with the one that have been passed\n     * @param poundsAndPences sets the local variable with the current value*/\n     Share()\n    {\n//        this.poundsAndPences = poundsAndPences;\n//          changeState();\n//        System.out.println(\"test: \" + list);\n    }\n\n    /**getPoundsAndPences() is a getter method to. \n     * @return the poundsAndPences\n     */\n    public double getPrice() \n    {\n        return poundsAndPences;\n    }\n\n    /**setPoundsAndPences(int poundsAndPences) is a mutator method.\n     * @param poundsAndPences set the poundsAndPences passed to the\n     * methods to the local ones \n     */\n    public void setPrice(double poundsAndPences) \n    {\n        this.poundsAndPences = poundsAndPences;\n        changeState();\n        updateShareWatcher();\n    }\n\n    public void changeState()\n    {\n        poundsAndPences = getPrice() ;\n    }\n\n    public void updateShareWatcher()\n    {\n//       System.out.println(\"list: \" + list);\n        int counter = 0;\n        for(ShareWatcher sw: list)\n        {\n//            System.out.println(\"list test: \"+ counter++  + \"  %%% \" + sw);\n            sw.updatePrice(poundsAndPences);\n//            System.out.println(list.toString());\n        }\n    }\n}\n</code></pre>\n\n<p>this is the interface</p>\n\n<pre><code>public interface ShareWatcher \n{\n    void updatePrice(double price);\n\n}\n\npublic class BankManager implements ShareWatcher\n{\n     int portfolio = 0;\n    /**\n     * Buy value for bank manager.\n     */\n     static double BM_BUY = 1.00;\n\n    /**\n     * Sell value for bank manager.\n     */\n     static double BM_SELL = 4.00;\n\n    /**\n     * Increment value for bank manager.\n     */\n     static int BM_INCREMENT = 100;\n\n\n    public BankManager(double BM_BUY, double BM_SELL, int BM_INCREMENT)\n    {\n        this.BM_BUY = BM_BUY;\n        this.BM_SELL = BM_SELL;\n        this.BM_INCREMENT = BM_INCREMENT;\n\n        portfolio = 0;\n\n//        updatePrice(portfolio);\n    }\n\n\n    public  int getPortfolio()\n    {\n        return portfolio;\n    }\n\n    public  void setPortfolio(int portfolio)\n    {\n        this.portfolio = portfolio;\n//        updatePrice(portfolio);\n    }\n\n    public void  updatePrice(double price)\n    {\n        if(price &lt; 1.00)\n        {\n            BM_BUY = price;\n            System.out.println(\"BankManager buy shares at: \" + BM_BUY);\n\n        }\n\n        if(price &gt; 4.00)\n        {\n            BM_SELL = price;\n            System.out.println(\"BankManager sell shares at:\" + BM_SELL);\n        }\n//        portfolio = price;\n//        System.out.println(\"Update BankManager\");\n//        System.out.println(\"New value is: \" + portfolio);\n    }\n}\n\n\npublic class StockBroker implements ShareWatcher\n{\n      int portfolio = 1;\n     /**\n     * Buy value for stock broker.\n     */\n     static double SB_BUY = 2.00;\n\n    /**\n     * Sell value for stock broker.\n     */\n     static double SB_SELL = 3.00;\n\n    /**\n     * Increment value for stock broker.\n     */\n     static int SB_INCREMENT = 500;\n\n    StockBroker(double SB_BUY, double SB_SELL, int SB_INCREMENT)\n    {\n//        this.price = portfolio;\n//        updatePrice(portfolio);\n        this.SB_BUY = SB_BUY;\n        this.SB_SELL = SB_SELL;\n        this.SB_INCREMENT = SB_INCREMENT;\n        portfolio = 0;\n\n//        updatePrice(portfolio);\n    }\n    public  int getPortfolio() \n    {\n        return portfolio ;\n    }\n\n    public  void setPortfolio(int portfolio) \n    {\n        this.portfolio = portfolio;\n    }\n\n    public void updatePrice(double price)\n    {\n//        StockBroker sb = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);\n\n        if(price &lt; 2.00)\n        {\n           SB_BUY = price;\n            System.out.println(\"StockBroker buy shares at: \" + SB_BUY);\n        }\n\n        if(price &gt; 3.00)\n        {\n            SB_SELL= price;\n            System.out.println(\"StockBroker sell shares at:\" + SB_SELL);\n        }\n        portfolio = SB_INCREMENT;\n//        System.out.println(\"Update StockBroker\");\n//        System.out.println(\"New value is: \" + portfolio);\n    }\n\n}\n</code></pre>\n\n<p>and here is the testing class </p>\n\n<pre><code>import org.junit.Test;\nimport static org.junit.Assert.*;\nimport org.junit.Ignore;\n\n/** A set of unit tests that check the solution to the SILVER task.\n *\n */\npublic class ShareTest {\n\n/**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE1 = 4.01;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE2 = 0.99;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE3 = 2.12;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE4 = 1.89;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE5 = 1.83;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE6 = 2.78;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE7 = 14.12;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE8 = 6.99;\n\n    /**\n     * Buy value for bank manager.\n     */\n    final static double BM_BUY = 1.00;\n\n    /**\n     * Sell value for bank manager.\n     */\n    final static double BM_SELL = 4.00;\n\n    /**\n     * Increment value for bank manager.\n     */\n    final static int BM_INCREMENT = 100;\n\n    /**\n     * Buy value for stock broker.\n     */\n    final static double SB_BUY = 2.00;\n\n    /**\n     * Sell value for stock broker.\n     */\n    final static double SB_SELL = 3.00;\n\n    /**\n     * Increment value for stock broker.\n     */\n    final static int SB_INCREMENT = 500;\n  public ShareTest(){\n  }\n\n  @Test\n    public void testChangePrice1() {\n        final Share share = new Share();\n        final BankManager bankManager = new BankManager(BM_BUY, BM_SELL, BM_INCREMENT);\n        final StockBroker stockBroker = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);\n        assertTrue(share.addShareWatcher(bankManager));\n        assertTrue(share.addShareWatcher(stockBroker));\n        share.setPrice(PRICE5);\n        final int expectedValue1 = 0;\n//        System.out.println(\"*****BankManager \" + bankManager.getPortfolio());\n        assertEquals(bankManager.getPortfolio(), expectedValue1);\n        final int expectedValue2 = 500;\n        System.out.println(\"*****StockBroker \" + stockBroker.getPortfolio());\n        assertEquals(stockBroker.getPortfolio(), expectedValue2);\n    }\n\n    /**\n     * Test of changePrice method, of class Share. A similar test to above. More \n     * changes this time.\n     */\n//    @Ignore\n    @Test\n    public void testChangePrice2() {\n        final Share share = new Share();\n        final BankManager bankManager = new BankManager(BM_BUY, BM_SELL, BM_INCREMENT);\n        final StockBroker stockBroker = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);\n        assertTrue(share.addShareWatcher(bankManager));\n        assertTrue(share.addShareWatcher(stockBroker));\n        share.setPrice(PRICE3);\n        share.setPrice(PRICE6);\n        share.setPrice(PRICE8);\n        final int expectedValue1 = 0;\n        assertEquals(bankManager.getPortfolio(), expectedValue1);\n        final int expectedValue2 = 0;\n        assertEquals(stockBroker.getPortfolio(), expectedValue2);\n    }\n\n\n    /**\n     * Test of changePrice method, of class Share. A similar test to above. More\n     * changes this time.\n     */\n//    @Ignore\n    @Test\n    public void testChangePrice3() {\n        final Share share = new Share();\n        final BankManager bankManager = new BankManager(BM_BUY, BM_SELL, BM_INCREMENT);\n        final StockBroker stockBroker = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);\n        assertTrue(share.addShareWatcher(bankManager));\n        assertTrue(share.addShareWatcher(stockBroker));\n        share.setPrice(PRICE1);\n        share.setPrice(PRICE4);\n        share.setPrice(PRICE7);\n        share.setPrice(PRICE2);\n        final int expectedValue1 = 100;\n        assertEquals(bankManager.getPortfolio(), expectedValue1);\n        final int expectedValue2 = 500;\n        assertEquals(stockBroker.getPortfolio(), expectedValue2);\n    }\n}\n</code></pre>\n"},{"tags":["python","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13137917,"title":"unit testing embedded python","body":"<p>I have a third party software which is able to run some python scripts using something like:</p>\n\n<pre><code>software.exe -script pythonscript.py\n</code></pre>\n\n<p>My company is heavily dependent on this software as well as on the scripts we develop for it. Currently we have some QA that checks the output of the scripts, but we really want to start unit testing the scripts to make it easier to find bugs and make the test system more complete.</p>\n\n<p>My problem is how is it possible to run \"embedded\" unit tests? We use pydev+eclipse and I tried to use it's <a href=\"http://pydev.org/manual_adv_remote_debugger.html\" rel=\"nofollow\">remote debbuging</a> to make it work with the unit tests, but I cannot really make it work. How can I make the server connection \"feed\" the unit test?</p>\n\n<p>The other idea would be to parse the stdout of the software, but that would not really be a unit test... And the added complexity it seems to bring makes this approach less interesting.</p>\n\n<p>I would expect that something like this has already been done somewhere else and I tried googling for it, but maybe I am just not using the correct keywords. Could anyone give me a starting point?</p>\n\n<p>Thank you</p>\n"},{"tags":["c++","unit-testing","private-members","private-methods"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1001,"score":5,"question_id":6778496,"title":"How to do unit testing on private members (and methods) of C++ classes","body":"<p>I am very new to unit testing and I am a little confused.</p>\n\n<p>I am trying to do unit testing (using the Boost unit testing framework) on a C++ class called <code>VariableImpl</code>. Here are the details.</p>\n\n<pre><code>class Variable\n{\npublic:\n  void UpdateStatistics (void) {\n    // compute mean based on m_val and update m_mean;\n    OtherClass::SendData (m_mean);\n    m_val.clear ();\n  }\n  virtual void RecordData (double) = 0;\n\nprotected:\n  std::vector&lt;double&gt; m_val;\n\nprivate:\n  double m_mean;\n};\n\nclass VariableImpl : public Variable\n{\npublic:\n  virtual void RecordData (double d) {\n    // put data in m_val\n  }\n};\n</code></pre>\n\n<p>My question is how can I check that the mean is computed correctly? Note that 1) <code>m_mean</code> is protected and 2) <code>UpdateStatistics</code> calls a method of another class and then clears the vector.</p>\n\n<p>The only way I can see would be to add a getter (for instance, <code>GetMean</code>), but I don't like this solution at all, nor I think it is the most elegant.</p>\n\n<p>How should I do?</p>\n\n<p>And what should I do if I were to test a private method instead of a private variable?</p>\n\n<p>TIA,</p>\n\n<p>Jir</p>\n"},{"tags":["ruby","unit-testing","rspec","dsl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13136377,"title":"The proper style to test a function over a variety of inputs","body":"<p>I need to test a following line:</p>\n\n<pre><code>result = handle(streamOfMessages)\n</code></pre>\n\n<p>Where <code>messages</code> and <code>context</code> are well-populated hashes. I could write the <code>it</code> like this:</p>\n\n<pre><code>messages1 = [ {\"type\"=&gt;\"someType1\",\"value\"=&gt;\"someBigHash1\"}, {\"type\"=&gt;\"someType2\",\"value\"=&gt;\"someBigHash2\"}, {\"type\"=&gt;\"someType1\",\"value\"=&gt;\"someBigHash3\"} ]\nresult1 = handle(messages1)\nresult1.should == [someValue1, someOtherValue1]\n\nmessages2 = [ {\"type\"=&gt;\"someType1\",\"value\"=&gt;\"someBigHash1\"}, {\"type\"=&gt;\"someType2\",\"value\"=&gt;\"someBigHash2\"}, {\"type\"=&gt;\"someType1\",\"value\"=&gt;\"someBigHash3\"} ]\nresult2 = handle(messages1)\nresult2.should == [someValue2, someOtherValue2]\n\n// same about messages3, result3 etc\n</code></pre>\n\n<p>I could make an array of arrays and refer to <code>messages[i]</code> in the loop. However, it all looks to me as a pretty oldskul approach, hence I am looking for a more inspiring (or even should I say <em>DSL</em>-based) programming style. It would be great to have a better syntax both for constructing a stream of messages and for iterating over several streams while expecting different results.</p>\n"},{"tags":["php","unit-testing","php-5.3"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":11095983,"title":"Does php have any fixtures alternatives?","body":"<p>I have been working with Ruby on Rails for a while. It has a wonderful lib called factory_girl which helps a lot building a test data. Recently I have been searching for similar alternatives in PHP. The only library I came into was <a href=\"http://phactory.org\" rel=\"nofollow\">Phactory</a>.</p>\n\n<p>I ask to share your experience on PHP testing data frameworks and recommend any handy libraries.</p>\n"},{"tags":["python","unit-testing","simplehttpserver"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":1314,"score":7,"question_id":1985197,"title":"Using SimpleHTTPServer for unit testing","body":"<p>I'm writing a Python module that wraps out a certain web service API. It's all REST, so relatively straightforward to implement. </p>\n\n<p>However, I found a problem when it comes to unit testing: as I don't run the services I made this module for, I don't want to hammer them, but at the same time, I need to retrieve data to run my tests. I looked at SimpleHTTPServer, which would be OK. </p>\n\n<p>I solved part of the issue I had, but now, since I can't seem to terminate the thread, I get issues with \"address already in use\" when launching the test application more than once.</p>\n\n<p>Here's some sample code</p>\n\n<pre><code>PORT = 8001\n\nhandler = SimpleHTTPServer.SimpleHTTPRequestHandler\n\nhttpd = SocketServer.TCPServer((\"\", PORT), handler)\n\nhttpd_thread = threading.Thread(target=httpd.serve_forever)\nhttpd_thread.setDaemon(True)\nhttpd_thread.start()\n\napi_data = urllib.urlopen(\"http://localhost:8001/post/index.json\")\nprint \"Data start:\"\nprint json.load(api_data)\n</code></pre>\n\n<p>Where \"index.json\" is a mock JSON file I made which substitutes the real thing. How can I clean things gracefully after the program terminates?</p>\n"},{"tags":["ruby","unit-testing","jar","warbler"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13136219,"title":"warbler unit tests","body":"<p>I'm using Warbler to build .jar file from my jruby code and run it on platform that does not have ruby installed. \nI want to execute acceptance tests -> for that i use ruby minitest unit tests.\nThe only option i found is to require_relevant this test class from entry point class, but it does not call test methods.</p>\n\n<p>In my unit test class i use require 'minitest/autorun'.\nWhen i execute them in IDE - i get test run log.\nWhen i run them from jar - i get no result/flow.</p>\n\n<p>So question is:\nhow to correctly run unit tests from jar/jruby ?\nhow to point at other entry point.</p>\n\n<p>Thanks. </p>\n"},{"tags":["unit-testing","mstest","deploymentitem"],"answer_count":4,"favorite_count":21,"up_vote_count":31,"down_vote_count":0,"view_count":5352,"score":31,"question_id":3738819,"title":"Do MSTest deployment items only work when present in the project test settings file?","body":"<p>I can't seem to grasp how MSTest deployment items are supposed to be configured. I have been able to get them working properly by modifying the project's test settings file, but this is less then ideal -- the deployment item configuration is separated from individual tests, and the file paths appear to be stored as absolute paths unless the files are under the solution folder.</p>\n\n<p>Am I not supposed to be able to add a deployment item using the <code>[DeploymentItem]</code> attribute on either a <code>[TestClass]</code> or <code>[TestMethod]</code> without having to create/modify a project test settings file? How do I accomplish this?</p>\n\n<p>(Frankly, I don't understand the need for a separate deployment item configuration -- why not just use the existing 'Copy to Output Directory' settings for project files that should be deployment items?)</p>\n"},{"tags":["java","unit-testing","ant","compiler-errors","zxing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":28,"score":0,"question_id":13134848,"title":"Running the unit test for zxing fails","body":"<p>I'm trying to run the unit tests for <a href=\"http://code.google.com/p/zxing/\" rel=\"nofollow\">zxing</a>. I'm running </p>\n\n<pre><code>ant test-blackbox\n</code></pre>\n\n<p>This fails, however, with the output:</p>\n\n<pre><code>Buildfile: c:\\Workspace\\zxing-2.1\\core\\build.xml\n\ninit:\n\nbuild:\n\nbuild-test:\n    [javac] Compiling 109 source files to c:\\Workspace\\zxing-2.1\\core\\build-test\n    [javac] c:\\Workspace\\zxing-2.1\\core\\test\\src\\com\\google\\zxing\\client\\result\\URIParsedResultTestCase.java:73: error: unmappable character for encoding Cp1252\n    [javac]                  \"\\u0013\\u0013Â¬Ã¦Z{âˆšÏ€âˆšÃ©âˆšÃ¹âˆšÃ¶Â¬Ã³ZÂ¬ÃŸÂ¬Â®+y_zbâˆšÂ±k\\u00117Â¬âˆ?\\u000EÂ¬ÃœâˆšÃº\\u0000\\u0000\\u0000\\u0000\" +\n    [javac]                                                                                            ^\n    [javac] 1 error\n\nBUILD FAILED\nc:\\Workspace\\zxing-2.1\\core\\build.xml:54: Compile failed; see the compiler error output for details.\n\nTotal time: 0 seconds\n</code></pre>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13129993,"title":"PHPUnit test suite include path","body":"<p>Using phpunit and I am having some trouble with include paths, not for phpunit itself, but for my code and tests directory.</p>\n\n<p>I have the following code structure:</p>\n\n<pre><code>Application\n  -StringCalculator.php\n\ntests\n  -StringCalculatorTest.php\n</code></pre>\n\n<p>Inside my StringCalculatorTest.php i have a require statement:</p>\n\n<pre><code>require_once('../StringCalculator.php');\n</code></pre>\n\n<p>Running <code>phpunit StringCalculatorTest.php</code> from  inside the tests folder works perfectly.</p>\n\n<p>However, when i then introduce a phpunit.xml configuration file in the root directory i.e.</p>\n\n<pre><code>Application\n  -StringCalculator.php\n\ntests\n  -StringCalculatorTest.php\n\nphpunit.xml\n</code></pre>\n\n<p>the include path is screwed.  I have to replace the require_once to </p>\n\n<pre><code>require_once('StringCalculator.php');\n</code></pre>\n\n<p>What is the correct way to set include paths between the application and the test directory?</p>\n"},{"tags":["java","web-services","unit-testing","testing","jax-ws"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":3274,"score":5,"question_id":2570896,"title":"Web service unit testing","body":"<p>I'm using JAX-WS web services (client and exposed services), is there any API to test these web services?</p>\n"},{"tags":["java","spring","hibernate","unit-testing","transactions"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13131242,"title":"How to test transactional work performed on `POST_COMMIT_INSERT` callback","body":"<p>I'm having difficulty debugging and diagnosing an issue within my application.</p>\n\n<p>I have a JPA event listener wired in to perform work in a <code>POST_COMMIT_INSERT</code>.  The work that is performed is also transactional.</p>\n\n<p>I'm having difficulty writing a test that captures the work that occurred in the post-transactional transaction.</p>\n\n<p>My current test performs it's assertions in a <code>@PostTransaction</code> method.  However, although I see the data being persisted (using log statements), the postTransaction-transaction work isn't available to me.</p>\n\n<p>I suspect it's because in my <code>@PostTransaction</code> method, I'm still too early - and that there's another transaction in progress.</p>\n\n<p>Here's a sample that roughly demonstrates the scenario:</p>\n\n<blockquote>\n  <p>After a <code>Foo</code> has been created &amp; saved, create and save a <code>Bar</code>.</p>\n</blockquote>\n\n<pre><code>// Step 1.  The factory that responds to creation of the Foo, and build a bar.\n@Component\nclass BarFactory implements PostInsertEventListener\n{\n     // Note:  I've tried various versions of @Transactional on different points\n     // within this class, and none have worked.\n\n     @Autowired\n     private BarRepository repository;\n\n     @Override\n     public void onPostInsert(PostInsertEvent event) \n     {\n         if (event.getEntity() instanceof Foo)\n         {\n             createBar();\n         }\n     }\n     @Transactional\n     public createBar()\n     {\n         Bar bar = new Bar();\n         repository.save(bar);\n         log.info(\"Bar was created: \" + bar.getId());\n     }\n }\n\n // Step 2:  Register the BarFactory\n @Component\n class LifecycleListenerFactory {\n    // This is a spring bean, and the listeners are also spring beans\n    // so we have to use a somewhat long-winded approach to register them\n    // with the EntityManager\n    @Autowired\n    public LifecycleListenerFactory(EntityManager em, BarFactory barFactory)\n    {\n        SessionFactory sessionFactory = getSessionFactory(em);\n        EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(EventListenerRegistry.class);\n        EventListenerGroup&lt;PostInsertEventListener&gt; eventListenerGroup = registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT);\n        eventListenerGroup.appendListener(barFactory);\n    }\n\n\n   SessionFactory getSessionFactory(EntityManager entityManager) {\n       Session session = (Session) entityManager.getDelegate();\n       SessionFactory sessionFactory = session.getSessionFactory();\n       return sessionFactory;\n   }\n } \n\n\n// Step 3:  Test.\n@RunWith(SpringJUnit4ClassRunner.class)\n@Transactional\n@TransactionConfiguration(defaultRollback=false)\nclass MyTest {\n   @Autowired\n   private FooRepository fooRepo;\n   @Autowired\n   private BarRepository barRepo;\n\n   @Test\n   public void test()\n   {\n       fooRepo.save(new Foo());\n   }\n\n   @AfterTransaction\n   public void assert()\n   {\n       assertThat(barRepo.findAll().size(),equalTo(1));\n   }\n}\n</code></pre>\n\n<p>In this scenario, I see the following output:</p>\n\n<p><code>INFO:  Bar was created: 1</code></p>\n\n<p>But the test fails.</p>\n\n<p>Am I correct in my assumption that my <code>@AfterTransaction</code> is running after the wrong transaction, or is something else wrong here?</p>\n\n<p>If so, how do I test this?</p>\n\n<p>I've tried moving the <code>@Transaction</code> boundaries around in the <code>BarFactory</code>, but that hasn't had any effect.</p>\n"},{"tags":["ios","xcode","unit-testing","ocunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13130498,"title":"STAssertEqualObjects not working with NSString using OCUnit in Xcode","body":"<p>Can't figure out whats going on here . . . </p>\n\n<p>I've got a simple unit test thats designed to test a parser. Test case looks like this:</p>\n\n<pre><code>[parser didStartElement:@\"mobileresponse\" attributes:[NSDictionary dictionaryWithObject:@\"http://www.espn.com/\" forKey:@\"rooturl\"]];\n[parser didStartElement:@\"content\" attributes:[NSDictionary dictionaryWithObject:@\"/soccer\" forKey:@\"mobileFriendlyUrl\"]];\nNSString *mobileFriendlyURL = [parser valueForKey:@\"mobile_friendly_url\"];\nSTAssertEqualObjects(@\"http://www.espn.com/soccer\", mobileFriendlyURL, @\"url path should be appended to root url\");\n</code></pre>\n\n<p>now this is failing every time, but here is the output</p>\n\n<pre><code>'http://www.espn.com/soccer' should be equal to 'http://www.espn.com/soccer' url path should be appended to root url\n</code></pre>\n\n<p>Am I going crazy or are those the exact same?? Does anyone have any idea why this is throwing an error?</p>\n"},{"tags":["unit-testing","salesforce","apex-code","force.com"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":12911480,"title":"Is there a good way to get a Code Coverage Report for Apex Code?","body":"<p>We're developing alot of enhancements to salesforce using Visualforce and Apex as part of a larger system, as part of our quality metrics we have to provide a report to management on our Code Coverage. </p>\n\n<p>I'd like to get a report similar to the one produced by Run All Tests in the Force.com IDE but in HTML so I can display it easily via a web interface. </p>\n\n<p>For the rest of our system we use Sonar <a href=\"http://www.sonarsource.org/\" rel=\"nofollow\">http://www.sonarsource.org/</a> to produce the reports. </p>\n\n<p>Does anybody know the best approach to this? </p>\n\n<p>I've explored the API documentation but am unable to find out if the Coverage Percentages is stored against the classes so querying that isn't an option. </p>\n\n<p>Any help or pointers would be greatly appreciated. </p>\n"},{"tags":["iphone","ios","unit-testing","dependency-injection"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":11543942,"title":"Proper dependency injection when unit testing in iOS","body":"<p>I have finally started to test my code while developing iOS applications. However, I am curious to hear more about how others are creating testable code, especially when it comes to injection of fake objects into the class under test. So far this is how I do it:</p>\n\n<p>// 1) Init CUT with fakes (constructor injection)\nA *a = [[A alloc] initWithB:C:D:.....];</p>\n\n<p>// 2) Expose dependencies as properties (property injection)\na.B = myB;</p>\n\n<p>I prefer 1) since I don't like to expose any internal data as properties unless I really need to.</p>\n\n<p>My questions is: Are there any alternatives/better/more efficient ways to do property injection when dealing with objective-c and iOS test frameworks?</p>\n"},{"tags":["ios","unit-testing","testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13128809,"title":"Testing iOS peer to peer communication/Bonjour","body":"<p>I am currently starting a project that deals with iOS devices that do p2p communication in the local area network using Bonjour.</p>\n\n<p>I am wondering how one can test the Bonjour and other networked components of an iOS app, whether it be automatic or even manual (ad hoch tests). </p>\n"},{"tags":["c#","visual-studio-2010","entity-framework","unit-testing","rhino-mocks"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13109192,"title":"shouldn't I mock the entities of EF when unittesting?","body":"<p>I use EF4.</p>\n\n<p>I read this post about mocking EF</p>\n\n<p><a href=\"http://www.codeproject.com/Articles/447988/How-to-Mock-Test-an-Entity-Framework-Model-First-P\" rel=\"nofollow\">http://www.codeproject.com/Articles/447988/How-to-Mock-Test-an-Entity-Framework-Model-First-P</a></p>\n\n<p>Sholdn't we abstract the entities types as well? </p>\n\n<p>In order to keep dicupling between the DAL and the BL?</p>\n\n<p>in the post above I see he used EF concrete generated entities types:</p>\n\n<pre><code>[TestMethod]\npublic void GetCustomer()\n{\n    ContextContainerMock container = new ContextContainerMock();\n    IMyEntities en = container.Current;\n\n\n**Customer c = new Customer { ID = 1, FirstName = \"John\", LastName = \"Doe\" };**\n    en.Customers.AddObject(c);\n\n    CustomerService service = new CustomerService(container);\n    var a = service.GetCustomer(1);\n\n    Assert.AreEqual(c.FirstName, a.FirstName);\n    Assert.AreEqual(c.LastName, a.LastName);\n}\n</code></pre>\n"},{"tags":["r","unit-testing","autotest","s4","testthat"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":28,"score":3,"question_id":13128061,"title":"testthat::auto_test() seems to fail when S4 code is involved","body":"<p>Over the last couple of weeks, I've been integrating the unit-test functionality of the <a href=\"http://cran.r-project.org/web/packages/testthat/index.html\" rel=\"nofollow\">testthat</a> package more and more into my daily work and really have to say: this package rocks! </p>\n\n<p>I specifically like the autotest-feature which will automatically run all of your unit tests <strong>every time</strong> you make a change somewhere in your code. However, I think I came across a little bug or at least some undesired behavior when using <a href=\"http://cran.r-project.org/web/packages/testthat/index.html\" rel=\"nofollow\">testthat</a>'s <code>auto_test()</code> function in situations when your code directory contains S4 definitions (classes, generic methods, custom methods).</p>\n\n<h2>Question</h2>\n\n<p>Is this behavior illustrated below a bug or am I doing something wrong when using <code>auto_test()</code>?</p>\n\n<p>Below you'll find an illustration that requires to create some example files first</p>\n\n<h2>Preliminaries</h2>\n\n<p>Set working directory</p>\n\n<pre><code>setwd(\"testthat_autotest\")\n</code></pre>\n\n<p>Ensure directories</p>\n\n<pre><code>dir.create(\"src\", showWarnings=FALSE)\ndir.create(\"tests\", showWarnings=FALSE)\n</code></pre>\n\n<h2>Create S4 Reference Class Definition</h2>\n\n<p>Creates file <code>classes.R</code> in directory <code>src</code></p>\n\n<pre><code>def &lt;- c(\n    \"setRefClass(\",\n    \"   Class=\\\"MyClass\\\",\",\n    \"   fields=list(\",\n    \"       name=\\\"character\\\"\",\n    \"   ),\",\n    \"   methods=list(\",\n    \"       getName=function(...) {\",\n    \"           getName_ref(.self=.self, ...)\",\n    \"       },\",\n    \"       setName=function(...) {\",\n    \"           setName_ref(.self=.self, ...)\",\n    \"       }\",\n    \"   )\",\n    \")\"\n)\nwrite(def, file=\"src/classes.R\")\n</code></pre>\n\n<h2>Create Generic Method Definitions</h2>\n\n<p>Creates file <code>generics.R</code> in directory <code>src</code></p>\n\n<pre><code>def &lt;- c(\n    \"setGeneric(\",\n    \"    name=\\\"getName_ref\\\",\",\n    \"    signature=c(\\\".self\\\"),\",\n    \"    def=function(\",\n    \"        .self,\",\n    \"        ...\",\n    \"    ) {\",\n    \"standardGeneric(\\\"getName_ref\\\")\",    \n    \"   }\",\n    \")\",\n    \"\",\n    \"setGeneric(\",\n    \"   name=\\\"setName_ref\\\",\",\n    \"   signature=c(\\\".self\\\"),\",\n    \"   def=function(\",\n    \"       .self,\",\n    \"       value,\",\n    \"       ...\",\n    \"   ) {\",\n    \"   standardGeneric(\\\"setName_ref\\\")\",    \n    \"   }\",\n    \")\"\n)\nwrite(def, file=\"src/generics.R\")\n</code></pre>\n\n<h2>Create Custom Method Definitions</h2>\n\n<p>Creates file <code>methods.R</code> in directory <code>src</code></p>\n\n<pre><code>def &lt;- c(\n    \"require(\\\"compiler\\\")\",\n    \"\",\n    \"setMethod(\",\n    \"   f=\\\"getName_ref\\\",\", \n    \"   signature=signature(.self=\\\"MyClass\\\"),\", \n    \"   definition=cmpfun(function(\",\n    \"       .self,\",\n    \"       ...\",\n        \") {\",\n        \"out &lt;- .self$name\",\n        \"return(out)\",\n        \"}, options=list(suppressAll=TRUE))\",  \n    \")\",\n    \"setMethod(\",\n    \"   f=\\\"setName_ref\\\",\", \n    \"   signature=signature(.self=\\\"MyClass\\\"),\", \n    \"   definition=cmpfun(function(\",\n    \"       .self,\",\n    \"       ...\",\n    \"   ) {\",\n    \"   .self$field(name=\\\"name\\\", value=value)\",\n    \"   return(TRUE)\",\n    \"   }, options=list(suppressAll=TRUE))\",  \n    \")\"\n)\nwrite(def, file=\"src/methods.R\")\n</code></pre>\n\n<h2>Create Unit Tests</h2>\n\n<p>Creates files <code>test_getName_ref.R</code> and <code>test_setName_ref.R</code> in directory <code>tests</code></p>\n\n<pre><code>test &lt;- c(\n    \"require(\\\"testthat\\\")\",\n    \"\",\n    \"test_that(desc=\\\"test_getName_ref,.self=MyClass\\\",\",\n    \"   code={\",\n    \"       x.target &lt;- \\\"some value\\\"\",\n    \"       expect_that(\",\n    \"            .self &lt;- new(\\\"MyClass\\\", name=x.target),\",\n    \"            is_a(\\\"MyClass\\\")\",\n    \"        )\",\n    \"        expect_that(\",\n    \"            x.test &lt;- .self$getName(),\",\n    \"            is_a(\\\"character\\\")\",\n    \"        )\",\n    \"        expect_that(\",\n    \"            x.test,\",\n    \"            is_identical_to(x.target)\",\n    \"        )\",\n    \"    }\",\n    \")\"\n)\nwrite(test, file=\"tests/test_getName_ref.R\")\n\ntest &lt;- c(\n    \"require(\\\"testthat\\\")\",\n    \"\",\n    \"test_that(desc=\\\"test_setName_ref,.self=MyClass\\\",\",\n    \"   code={\",\n    \"       x.target &lt;- \\\"some value\\\"\",\n    \"       expect_that(\",\n    \"            .self &lt;- new(\\\"MyClass\\\"),\",\n    \"            is_a(\\\"MyClass\\\")\",\n    \"        )\",\n    \"        expect_that(\",\n    \"            .self$setName(value=x.target),\",\n    \"            is_identical_to(TRUE)\",\n    \"        )\",\n    \"        expect_that(\",\n    \"            .self$getName(),\",\n    \"            is_identical_to(x.target)\",\n    \"        )\",\n    \"    }\",\n    \")\"\n)\nwrite(test, file=\"tests/test_setName_ref.R\")\n</code></pre>\n\n<h2>Illustration</h2>\n\n<p>Running <code>auto_test()</code> will result in errors:</p>\n\n<pre><code>require(\"testthat\")\n\nauto_test(\n    code_path=\"src\",\n    test_path=\"tests\"\n)\nLoading required package: compiler\n.1.2\n\n1. Error: test_getName_ref,.self=MyClass ---------------------------------------\ncould not find function \"getName_ref\"\n1: expect_that(x.test &lt;- .self$getName(), is_a(\"character\"))\n2: condition(object)\n3: str_c(class(x), collapse = \", \")\n4: Filter(function(x) length(x) &gt; 0, list(...))\n5: sapply(x, f)\n6: lapply(X = X, FUN = FUN, ...)\n7: .self$getName()\n\n2. Error: test_setName_ref,.self=MyClass ---------------------------------------\ncould not find function \"setName_ref\"\n1: expect_that(.self$setName(value = x.target), is_identical_to(TRUE))\n2: condition(object)\n3: all.equal(expected, actual)\n4: all.equal.default(expected, actual)\n5: all.equal.raw(target, current, ...)\n6: attr.all.equal(target, current, ...)\n7: mode(current)\n8: .self$setName(value = x.target)\n</code></pre>\n\n<p>My first guess is that it might have something to do with the the way <code>testthat::source_dir()</code> handles the sourcing, maybe due to argument <code>env</code>?</p>\n\n<p>In order to continue, we need to turn off autotesting with CRTL + BREAK (on Windows; see <a href=\"http://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf\" rel=\"nofollow\">section \"Autotest\" in this article</a> if you're on other platforms)</p>\n\n<p>Now, when we first source the code manually and run <code>test_dir()</code>, everything seems to work fine:</p>\n\n<pre><code>require(\"testthat\")\n\nsapply(list.files(\"src\", full.names=TRUE), source)\n\ntest_dir(\"tests\")\n\n......\nYou are a coding rockstar! \n&gt; \n</code></pre>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","tdd","dry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13124410,"title":"Rails: Repeating unit test - DRY?","body":"<p>Is there any standard practice to DRY-out the repeating unit test cases in rails. For e.g. I have many models with the \"name\" attribute, I want to do same kind of unit tests for each model. I vaguely see that i need to create modules are reuse? Is that possible/correct?</p>\n\n<p>Any pointers/practice to creating DRY unit test? </p>\n\n<p><strong>Example code:</strong> I want to do same kind of testing for many other models with the same named attribute.</p>\n\n<pre><code>require 'test_helper'\n\n\n# Factory class\nclass UserFactory\n\n  # Creates a valid template user\n  def self.create\n    user = User.new do |u|\n      u.name = \"Test User #{rand}\"\n      u.notes = \"test notes\"\n    end\n    user\n  end\n\nend\n\nclass UserTest &lt; ActiveSupport::TestCase\n  # ------------\n  # Init\n  # ------------\n\n  def setup\n    @valid_usr = UserFactory.create\n  end\n\n  def teardown\n    @valid_usr.destroy if @valid_usr.persisted?\n    @valid_usr = nil\n  end\n\n\n  # ------------\n  # Name\n  # ------------\n\n  test \"should not have a dummy user object\" do\n    user = User.new\n    assert !user.save\n  end\n\n  test \"unique user name must be saved\" do\n    assert UserFactory.create.save!, \"First entry must be saved\"\n\n    user = UserFactory.create\n    user.name = \"Different name\"\n    assert user.save!, \"Unique user must be saved\"\n    user.destroy\n  end\n\n  test \"non unique user names must not be saved\" do\n    user1 = UserFactory.create\n    user2 = UserFactory.create\n    user1.name = \"Same User name\"\n    user2.name = \"Same User name\"\n\n    assert user1.save!, \"First entry must be saved\"\n    assert !user2.save, \"Duplicate name should not be saved\"\n\n    user1.destroy\n    user2.destroy\n  end\n\n  test \"should not have user without a valid name\" do\n    # Invalid name\n    @valid_usr.name = \" \"\n    assert !@valid_usr.save\n  end\nend\n</code></pre>\n"},{"tags":["android","unit-testing","maven","m2e","jmockit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":13087832,"title":"What is the difference between running JUnit tests with \"Run As\" and Maven's test?","body":"<p>I have some problems I don't understand exactly. I have some class called ApplicationContext which extends android.app.Application. This class will be mocked by JMockIt's <code>MockUp&lt;T&gt;</code>. When I let my JUnit tests run by <code>mvn install</code>, everything works well, but when I run my tests with <code>Run As-&gt;JUnit Test</code> I get exceptions like this (only with this one test which extends android.app.Application)...  </p>\n\n<pre><code>java.lang.TypeNotPresentException: Type [unknown] not present\n</code></pre>\n\n<p>I guess that this has something to do with the fact that android must be in provided scope:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.android&lt;/groupId&gt;\n        &lt;artifactId&gt;android&lt;/artifactId&gt;\n        &lt;version&gt;${platform.version}&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Maybe the tests don't have this package at runtime or something. But I wonder why they just have it at <code>mvn install</code>, since the package is always linked as Maven dependency. I need to understand why classes from android.app.Application are not found when I run test with \"Run As\". Here are some of my configuration settings:</p>\n\n<p><img src=\"http://i.stack.imgur.com/MiExn.png\" alt=\"Build path\"></p>\n\n<p><strong>.classpath</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;classpath&gt;\n    &lt;classpathentry kind=\"con\" path=\"com.android.ide.eclipse.adt.ANDROID_FRAMEWORK\"/&gt;\n    &lt;classpathentry kind=\"con\" path=\"com.android.ide.eclipse.adt.LIBRARIES\"/&gt;\n    &lt;classpathentry kind=\"src\" output=\"bin/classes\" path=\"src/main/java\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute name=\"optional\" value=\"true\"/&gt;\n            &lt;attribute name=\"maven.pomderived\" value=\"true\"/&gt;\n        &lt;/attributes&gt;\n    &lt;/classpathentry&gt;\n    &lt;classpathentry kind=\"src\" path=\"gen\"/&gt;\n    &lt;classpathentry kind=\"src\" output=\"bin/classes\" path=\"src/test/java\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute name=\"maven.pomderived\" value=\"true\"/&gt;\n        &lt;/attributes&gt;\n    &lt;/classpathentry&gt;\n    &lt;classpathentry exported=\"true\" kind=\"con\" path=\"org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute name=\"maven.pomderived\" value=\"true\"/&gt;\n        &lt;/attributes&gt;\n    &lt;/classpathentry&gt;\n    &lt;classpathentry kind=\"output\" path=\"bin/classes\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p><strong>.project</strong>  </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;projectDescription&gt;\n    &lt;name&gt;net.devgems.android.kurzparkzonewien-TRUNK&lt;/name&gt;\n    &lt;comment&gt;&lt;/comment&gt;\n    &lt;projects&gt;\n    &lt;/projects&gt;\n    &lt;buildSpec&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;com.android.ide.eclipse.adt.ResourceManagerBuilder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;com.android.ide.eclipse.adt.PreCompilerBuilder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;com.android.ide.eclipse.adt.ApkBuilder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;org.eclipse.m2e.core.maven2Builder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n    &lt;/buildSpec&gt;\n    &lt;natures&gt;\n        &lt;nature&gt;com.android.ide.eclipse.adt.AndroidNature&lt;/nature&gt;\n        &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;\n        &lt;nature&gt;org.eclipse.m2e.core.maven2Nature&lt;/nature&gt;\n    &lt;/natures&gt;\n&lt;/projectDescription&gt;\n</code></pre>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;net.devgems.android&lt;/groupId&gt;\n    &lt;artifactId&gt;kurzparkzonewien&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;apk&lt;/packaging&gt;\n    &lt;name&gt;kurzparkzonewien&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;platform.version&gt;1.6_r2&lt;/platform.version&gt;\n        &lt;android.sdk.path&gt;/opt/android-sdk-linux&lt;/android.sdk.path&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.android&lt;/groupId&gt;\n            &lt;artifactId&gt;android&lt;/artifactId&gt;\n            &lt;version&gt;${platform.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;junit&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.jmockit&lt;/groupId&gt;\n            &lt;artifactId&gt;jmockit&lt;/artifactId&gt;\n            &lt;version&gt;0.999.17&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.8.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.android&lt;/groupId&gt;\n            &lt;artifactId&gt;support-v4&lt;/artifactId&gt;\n            &lt;version&gt;r6&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;outputDirectory&gt;bin/classes&lt;/outputDirectory&gt;\n        &lt;testOutputDirectory&gt;bin/test-classes&lt;/testOutputDirectory&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.jayway.maven.plugins.android.generation2&lt;/groupId&gt;\n                &lt;artifactId&gt;android-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;androidManifestFile&gt;${project.basedir}/AndroidManifest.xml&lt;/androidManifestFile&gt;\n                    &lt;assetsDirectory&gt;${project.basedir}/assets&lt;/assetsDirectory&gt;\n                    &lt;resourceDirectory&gt;${project.basedir}/res&lt;/resourceDirectory&gt;\n                    &lt;nativeLibrariesDirectory&gt;${project.basedir}/src/main/native&lt;/nativeLibrariesDirectory&gt;\n                    &lt;sdk&gt;\n                        &lt;platform&gt;4&lt;/platform&gt;\n                        &lt;path&gt;${android.sdk.path}&lt;/path&gt;\n                    &lt;/sdk&gt;\n                    &lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;\n                &lt;/configuration&gt;\n                &lt;extensions&gt;true&lt;/extensions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>If you need more additional information, please tell me, because I'm not sure where to isolate the problem properly.  </p>\n"},{"tags":["java","android","unit-testing","junit","instrumentation"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":72,"score":1,"question_id":13105202,"title":"Starting another Activity in a JUnit test by simulating a button press","body":"<p>To illustrate my latest problem with writing JUnit tests for my Android app, I wrote a simple example with two activities, <code>StartActivityForResult</code> and <code>ChildActivity</code>. The former contains a <code>TextView</code> (for display purposes) and a <code>Button</code> while the later contains just a <code>Button</code>. The <code>onClickListener</code> for the button in <code>StartActivityForResult</code> simply starts an instance of <code>ChildActivity</code>.</p>\n\n<pre><code>private View.OnClickListener onStart = new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        Log.d(TAG, \"Start button clicked\");\n        Intent intent = new Intent(StartActivityForResult.this, ChildActivity.class);\n\n        StartActivityForResult.this.startActivityForResult(intent, R.id.child_request);\n    }\n};\n</code></pre>\n\n<p>Now I want to test this method using JUnit. So I wrote the following test:</p>\n\n<pre><code>package codeguru.startactivityforresult;\n\nimport android.app.Activity;\nimport android.app.Instrumentation;\nimport android.content.Intent;\nimport android.test.ActivityInstrumentationTestCase2;\nimport android.test.UiThreadTest;\nimport android.util.Log;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport junit.framework.Assert;\n\npublic class StartActivityForResultTest extends ActivityInstrumentationTestCase2&lt;StartActivityForResult&gt; {\n\n    public StartActivityForResultTest() {\n        super(StartActivityForResult.class);\n    }\n\n    @Override\n    public void setUp() throws Exception {\n        super.setUp();\n\n        Log.d(TAG, \"setUp()\");\n\n        this.setActivityInitialTouchMode(false);\n\n        this.activity = this.getActivity();\n        this.resultText = (TextView) this.activity.findViewById(R.id.result_text);\n        this.startButton = (Button) this.activity.findViewById(R.id.start_button);\n\n        Intent data = new Intent();\n        data.putExtra(this.activity.getString(R.string.result), RESULT);\n        Instrumentation.ActivityResult result = new Instrumentation.ActivityResult(Activity.RESULT_OK, data);\n\n        this.childMonitor = new Instrumentation.ActivityMonitor(ChildActivity.class.getName(), result, true);\n        this.getInstrumentation().addMonitor(this.childMonitor);\n    }\n\n    @Override\n    public void tearDown() throws Exception {\n        this.activity.finish();\n\n        super.tearDown();\n    }\n\n    @UiThreadTest\n    public void testStartButtonOnClick() {\n        Assert.assertTrue(this.startButton.performClick());\n\n        Activity childActivity = this.getInstrumentation().waitForMonitorWithTimeout(this.childMonitor, TIME_OUT);\n        Assert.assertNotNull(childActivity); // &lt;------ Line 51\n\n        Button resultButton = (Button) childActivity.findViewById(R.id.result_button);\n        Assert.assertTrue(resultButton.performClick());\n\n        Assert.assertEquals(Integer.toString(RESULT), this.resultText.getText().toString());\n    }\n    private Activity activity = null;\n    private TextView resultText = null;\n    private Button startButton = null;\n    private Instrumentation.ActivityMonitor childMonitor = null;\n    private static final int TIME_OUT = 5 * 1000; // 5 seconds\n    private static final int RESULT = 69;\n    private static final String TAG = StartActivityForResultTest.class.getName();\n}\n</code></pre>\n\n<p>Running this test gives the following output:</p>\n\n<pre><code>codeguru@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ adb logcat -c\ncodeguru@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ adb shell am instrument -w -e class codeguru.startactivityforresult.StartActivityForResultTest codeguru.startactivityforresult.tests/android.test.InstrumentationTestRunner\n\ncodeguru.startactivityforresult.StartActivityForResultTest:\nFailure in testStartButtonOnClick:\njunit.framework.AssertionFailedError\n    at codeguru.startactivityforresult.StartActivityForResultTest.testStartButtonOnClick(StartActivityForResultTest.java:51)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)\n    at android.test.InstrumentationTestCase.access$000(InstrumentationTestCase.java:36)\n    at android.test.InstrumentationTestCase$2.run(InstrumentationTestCase.java:189)\n    at android.app.Instrumentation$SyncRunnable.run(Instrumentation.java:1602)\n    at android.os.Handler.handleCallback(Handler.java:615)\n    at android.os.Handler.dispatchMessage(Handler.java:92)\n    at android.os.Looper.loop(Looper.java:137)\n    at android.app.ActivityThread.main(ActivityThread.java:4745)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\n    at dalvik.system.NativeStart.main(Native Method)\n\nTest results for InstrumentationTestRunner=.F\nTime: 3.248\n\nFAILURES!!!\nTests run: 1,  Failures: 1,  Errors: 0\n\n\ncodeguru@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ adb logcat -d codeguru.startactivityforresult.StartActivityForResultTest:D codeguru.startactivityforresult.StartActivityForResult:D codeguru.startactivityforresult.ChildActivity:D *:S\nD/codeguru.startactivityforresult.StartActivityForResultTest(  954): setUp()\nD/codeguru.startactivityforresult.StartActivityForResult(  954): onCreate()\nD/codeguru.startactivityforresult.StartActivityForResult(  954): Start button clicked\nlayne@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ \n</code></pre>\n\n<p>As far as I can tell, calling <code>startButton.performClick()</code> doesn't start an instance of <code>ChildActivity</code>. What gives?</p>\n"},{"tags":["unit-testing","intersystems-cache","objectscript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13124696,"title":"How to delete generated unit test data only?","body":"<p>I use this code to create data:</p>\n\n<pre><code>Method OnBeforeAllTests() As %Status\n{\n    // Create one MyClass row   \n    Do ##class(MyClass).Populate(1)\n    Quit $$$OK\n}\n</code></pre>\n\n<p>and this to delete data:</p>\n\n<pre><code>Method OnAfterAllTests() As %Status\n{\n    Do ##class(MyClass).%KillExtent()\n    Quit $$$OK\n}\n</code></pre>\n\n<p>How do I change <code>OnAfterAllTests</code> to only delete the data I populated using <code>OnBeforeAllTests</code> and not delete any other data?</p>\n"},{"tags":["ios","unit-testing","restkit"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13106144,"title":"RestKit: Testing object mapping, 'failure when mapping from...'","body":"<p>As the title of this question indicates, I am using RestKit and I would like to test my object mapping using the build-in testing classes. I have written a tiny application that fetches a User object as json from a (local) web api. This part works but, my test case tells me that it doesn't - hm!</p>\n\n<p>I am following Blake Watters <a href=\"https://github.com/RestKit/RestKit/wiki/Unit-Testing-with-RestKit\" rel=\"nofollow\">Unit Testing With RestKit Guide</a>, but I am not able to succeed. Let me clarify once more that the actual application works fine (I am able to map json from API to User object without problems), but the test case fails with the error shown below. Therefore I suspect my test to be wrong, somehow.</p>\n\n<p>Here's some code:</p>\n\n<h3>Error Message</h3>\n\n<pre><code>&lt;RKMappingTest: 0xa242130&gt;: failure when mapping from {\nuser =     {\n    \"first_name\" = Kasper;\n    id = 21;\n    \"last_name\" = Fueled;\n};\n} to &lt;User: 0xa23d730&gt; with mapping &lt;RKObjectMapping:0xa23d250 objectClass=User keyPath mappings =&gt; (\n\"RKObjectKeyPathMapping: id =&gt; userID\",\n\"RKObjectKeyPathMapping: first_name =&gt; first_name\",\n\"RKObjectKeyPathMapping: last_name =&gt; last_name\",\n)&gt;. \n</code></pre>\n\n<p>I notice that the id key is not quoted, while first_name and last_name are, but I am not sure if it makes any difference.</p>\n\n<h3>user.json (updated: removed comma)</h3>\n\n<pre><code>{ \"user\": {\n       \"id\":21,\n       \"first_name\":\"Kasper\",\n       \"last_name\":\"Fueled\"\n       }\n}\n</code></pre>\n\n<h3>user.json (old)</h3>\n\n<pre><code>{ \"user\": {\n       \"id\":21,\n       \"first_name\":\"Kasper\",\n       \"last_name\":\"Fueled\",\n       }\n}\n</code></pre>\n\n<h3>User.h</h3>\n\n<pre><code>@property (strong, nonatomic) NSNumber *userID;\n@property (strong, nonatomic) NSString *first_name;\n@property (strong, nonatomic) NSString *last_name;\n</code></pre>\n\n<h3>User mapping</h3>\n\n<pre><code>+ (RKObjectMapping *)objectMapping {\n    return [RKObjectMapping mappingForClass:[User class] usingBlock:^(RKObjectMapping *mapping) {\n        [mapping mapKeyPath:@\"id\" toAttribute:@\"userID\"];\n        [mapping mapKeyPath:@\"first_name\" toAttribute:@\"first_name\"];\n        [mapping mapKeyPath:@\"last_name\" toAttribute:@\"last_name\"];\n    }];\n}\n</code></pre>\n\n<h3>Test Case</h3>\n\n<pre><code>- (void)testMapping {\n    id parsedJSON = [RKTestFixture parsedObjectWithContentsOfFixture:@\"user.json\"];\n    RKMappingTest *test = [RKMappingTest testForMapping:[User objectMapping] object:parsedJSON];\n\n    [test expectMappingFromKeyPath:@\"user.first_name\" toKeyPath:@\"first_name\"];\n\n    STAssertNoThrow([test verify], nil);\n}\n</code></pre>\n\n<p>Fixture is created as per described in Blake's guide.</p>\n"},{"tags":["javascript","html5","unit-testing","htmlunit","jasmine-maven-plugin"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":156,"score":0,"question_id":11315455,"title":"Does HtmlUnit and jasmine-maven-plugin support HTML5 sessionStorage?","body":"<p>I am trying to test a JavaScript function that uses HTML5 sessionStorage on jasmine-maven-plugin. Jasmine uses HtmlUnit to emulate a web browser.</p>\n\n<p>The problem is that when the automated tests are running during maven build, it says:</p>\n\n<blockquote>\n  <ul>\n  <li>Error: Expected a spy, but got Function.</li>\n  </ul>\n</blockquote>\n\n<p>I have tried this <a href=\"http://stackoverflow.com/questions/9428210/how-to-deal-with-sessionstorage-locally-in-ff-for-testing\">How to deal with sessionStorage locally in FF (for testing)</a> and then I've got this error:</p>\n\n<blockquote>\n  <ul>\n  <li>TypeError: Expected argument of type object, but instead had type object in file: ...</li>\n  </ul>\n</blockquote>\n\n<p>But if I try to run Jasmine on a web page importing jasmine.js, the test works perfectly. \nI have tried this too <a href=\"http://stackoverflow.com/questions/9217182/can-i-access-html5-storages-using-htmlunit\">Can I access HTML5 storages using HTMLUnit</a> , but without success.</p>\n\n<p>An example of code that works on <a href=\"http://tryjasmine.com/\" rel=\"nofollow\">http://tryjasmine.com/</a> and not in jasmine-maven-plugin:</p>\n\n<pre><code>function alertItem(id) {\nconsole.log(\"start\");\nvar x = sessionStorage.getItem(id);\nalert(x);\n}\n\ndescribe(\"sessionStorage test\", function () {    \nconsole = {\n    log : function() {},\n    error : function() {},\n    warn : function() {}\n};\n\nvar mockup = function() {\n    var table = {};\n    return {\n        getItem: function(key) {\n            return table[key];\n        },\n        setItem: function(key, value) {\n            table[key] = value.toString();\n        },\n        removeItem: function(key) {\n            table.pop();\n        },      \n        clear: function() {\n            table = {};\n        }\n    };\n}();\n\nObject.defineProperty(window, 'sessionStorage', {\n    value: mockup\n});\n\n\nit(\"must work\", function () {\n    console.log(\"testing...\");\n    spyOn(sessionStorage, 'getItem').andReturn(\"my value\");\n    alertItem(\"id\");\n    expect(sessionStorage.getItem).toHaveBeenCalled();\n});\n});\n</code></pre>\n\n<p>Does anyone have an idea?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","unit-testing","sql-server-2005"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13123082,"title":"SQL script compatible SQL Server 2005","body":"<p>I have an application and this will \"install\" some stored procedures into a local database.</p>\n\n<p>I want to make a unit test to validate the stored procedures so that the will be valid from SQL Server 2005 and up.</p>\n\n<p>Is there a way to do this with / without SQL Server?</p>\n"},{"tags":["unit-testing","xsl-fo"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13122570,"title":"Unit testing framework for xsl-fo","body":"<p>I need to run unit tests on xsl-fo. I wanted to know if there are any frameworks I can use.\nutf-x seems to be very complicated</p>\n"},{"tags":["java","unit-testing","collections"],"answer_count":2,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":53,"score":5,"question_id":13122764,"title":"Test case library for java.util.List implementations","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7068503/is-there-a-testsuite-for-java-custom-collections-implementation\">Is there a testsuite for Java custom collections implementation?</a>  </p>\n</blockquote>\n\n\n\n<p>Is there a test case library available that I can use to ensure a custom implementation of <code>java.util.List</code> is done correctly?</p>\n\n<p>I can certainly write my one test cases, but given the nature of all of the <code>List</code> methods, it seems tricky to ensure that the tests are comprehensive.</p>\n\n<p>Similarly, it'd be great to have test cases for the entire set of Java collections interfaces.</p>\n"},{"tags":["c#",".net","unit-testing","app-config","visual-studio-team-system"],"answer_count":7,"favorite_count":4,"up_vote_count":31,"down_vote_count":0,"view_count":20685,"score":31,"question_id":344069,"title":"Can a unit test project load the target application's app.config file?","body":"<p>I am unit testing a .NET application (.exe) that uses an app.config file to load configuration properties.  The unit test application itself does not have an app.config file.  </p>\n\n<p>When I try to unit test a method that utilizes any of the configuration properties, they return <em>null</em>.  I'm assuming this is because the unit test application is not going to load in the target application's app.config.</p>\n\n<p>Is there a way to override this or do I have to write a script to copy the contents of the target app.config to a local app.config?  </p>\n\n<p><a href=\"http://stackoverflow.com/questions/168931/unit-testing-the-appconfig-file-with-nunit\">This</a> post kind-of asks this question but the author is really looking at it from a different angle than I am.</p>\n\n<p><strong>EDIT:</strong> I should mention that I'm using VS08 Team System for my unit tests.</p>\n"},{"tags":["database","unit-testing","mvvm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13121924,"title":"How to test database frontend application written with MVVM pattern?","body":"<p>I wrote a desktop application which basically is a front end for database. It is used for create, read, update operations of different linked objects and performs some simple calculation and data aggregation. The MVVM pattern was followed in order to simplify testing.\nThis morning I tried writing the first test and realized it was not simple as expected.\nUnit tests are great for checking the result of a single operation, but unfortunately I have to deal with complex objects which are linked together.\nI will try to explain my problems better.\n1) I can create and test an object of class A. If I repeat the test 100 times my database becomes polluted. I need automatic procedures to clean it. \n2) Objects of class B needs an object of class A for some operations. I don't think it is a good idea to write a test where both objects A and B are created. what I supposed to be the right way is to use the object created at point 1 as a prerequisites for this test. </p>\n\n<p>I switched to visual studio 2012 express because it has basic support for unit tests but I need some guidelines on how to better use it for my special needs.</p>\n\n<p>Thanks\nFilippo</p>\n"},{"tags":["ios","unit-testing","continuous-integration","ocunit","sfhfkeychainutils"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":402,"score":7,"question_id":9996578,"title":"OCUnit tests fail from the command line but work in Xcode when using Keychain Services","body":"<p>I'm using SFHFKeychainUtils to use Keychain Services in my app. I've written some OCUnit tests that verify the funcionality of this code. Everything works fine when I run the unit tests from Xcode on the iOS simulator or my device. However now I'm trying to set up a CI server and the test is failing when it is run via the command line with error code -25291. Looking that up on Apple's documentation tells me: No trust results are available (errSecNotAvailable). I've linked the Security.framework to my unit test project, it seems like from what I have read on the web this is all I should need to get this working. Here is the command I am invoking in the console:</p>\n\n<p><code>/usr/bin/xcodebuild -target [Test_Target] -sdk /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ -configuration Debug\n</code></p>\n\n<p>Does anyone have any experience or suggestions for getting unit testing and Keychain Services to play nicely together from the command line?</p>\n"},{"tags":["unit-testing","nunit","xunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13062975,"title":"xunit programmatically add new tests/\"[Facts]\"?","body":"<p>We have a folder full of JSON text files that need to be set to a single URI. Currently it's all done with a single xUnit \"[Fact]\" as below</p>\n\n<pre><code>[Fact]\npublic void TestAllCases()\n{\n    PileOfTests pot = new PileOfTests();\n    pot.RunAll();\n}\n</code></pre>\n\n<p>pot.RunAll() then parses the folder, loads the JSON files (say 50 files). Each is then hammered against the URI to see is each returns HTTP 200 (\"ok\"). If any fail, we're currently printing it as a fail by using </p>\n\n<pre><code>System.Console.WriteLine(\"\\n &gt;&gt; FAILED ! &lt;&lt; \" + testname + \"\\n\");\n</code></pre>\n\n<p>This does ensure that failures catch our eye but xUnit thinks all tests failed (understandably). Most importantly, we can't specify to xunit \"here, run only <em>this</em> specific test\". It's all or nothing the way it's currently built.</p>\n\n<p>How can I programmatically add test cases? I'd like to add them when I read the number and names of the *.json files. </p>\n"},{"tags":["flash","unit-testing","testing","frameworks","open-source"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":559,"score":1,"question_id":4888860,"title":"Cross-platform web-GUI test automation suite, capable of simulating system level events (click, keypress, etc)?","body":"<p>I'm basically looking for a tool to automate testing of web applications, having components of various nature (Flash among them). The perfect candidate would be an independent (but scriptable) cross-platform program (written in Java), which can among other things, simulate system-level mouse and keyboard events (since Flash for example doesn't allow to trigger file dialog programmatically).</p>\n\n<p>Does anyone know of such tool or framework, open-source or not?</p>\n"},{"tags":["entity-framework","unit-testing","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13072860,"title":"How do you mock adding items to a repository or DbContext using moq?","body":"<p>The examples I've seen for using moq for a repository only show how to mock things being returned. I have a somewhat strange requirement: when a query is executed, if a condition exists, a certain item should be added to the repository. I am wondering how to test this without querying the database. I know how to mock the condition existing, but then how do you setup the mock so that you can test that the certain item is added?</p>\n"},{"tags":["unit-testing","ssdt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13036080,"title":"sqlpackage.exe \"Cannot open database\" randomly occurs","body":"<p>I am using sqlpackage.exe to create dynamic databases to run unit tests against. This work locally 100% of the time, but not in TFS. All the unit tests use integrated security for locahost\\sqlexpress. TFS will randomly cause sqlpackage.exe to return the following error.</p>\n\n<p>For the unit tests, I am using the pattern described <a href=\"http://nicholas.piasecki.name/blog/2010/01/integration-testing-with-sql-server-express-2008-nhibernate-and-mstest/\" rel=\"nofollow\">here</a>, but with some modifications to use a dacpac with sqlpackage as oppose to the schema export feature of nhibernate.</p>\n\n<pre><code>sqlpackage error    : *** Could not deploy package.\nsqlpackage error    : Cannot open database \"MessagesRepositoryTests\" requested by the login. The login failed.\nsqlpackage error    : Login failed for user 'DOMAIN\\TFSService'.\n</code></pre>\n\n<p>Other (random) errors include another line mentioning that it failed to import the target model.</p>\n\n<pre><code>sqlpackage error    : *** Could not deploy package.\nsqlpackage error    : Failed to import target model MessagesRepositoryTests. Detailed message Cannot open database \"MessagesRepositoryTests\" requested by the login. The login failed.\nsqlpackage error    : Login failed for user 'DOMAIN\\TFSService'.\nsqlpackage error    : Cannot open database \"MessagesRepositoryTests\" requested by the login. The login failed.\nsqlpackage error    : Login failed for user 'DOMAIN\\TFSService'.\n</code></pre>\n\n<p>\"DOMAIN\\TFSService\" has been granted every server role (sysadmin, public, etc).</p>\n\n<p>Does anyone have a clue why this would show up intermitently throughout all of my tests? Remember, this occurs only from the TFS build automated unit tests.</p>\n"},{"tags":["unit-testing","ejb-3.0","mockito","ejb-3.1","openejb"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1216,"score":5,"question_id":7765698,"title":"Unit Testing EJB 3.1","body":"<p>I am doing a small research on Unit Testing of EJB 3.1.  At the end my goal is to produce a easy to use solution for Unit Testing EJB 3.1.</p>\n\n<ol>\n<li>I do not have much knowledge with big EJB implementations and hence I would like to first get some experienced hands (You) to just pool in your ideas on what is difficult in Unit Testing EJBs.  </li>\n<li>With the initial research I have already done, I can understand the advantages of using mocking frameworks for Unit Testing rather than using embedded containers.  Though both are good, mocking frameworks stands a little above when it comes to Unit Testing.  The embedded containers are ofcourse very good and have their own advantages, but may be a different phase of unit testing.  I still believe that there should be some shortfalls at least in some scenarios in using such frameworks which can be improved.</li>\n</ol>\n\n<p>I hope I could make a complete solution for Unit Testing EJB which I can share in this forum once done.</p>\n\n<p>Thanks for your support.</p>\n"},{"tags":["c++","unit-testing"],"answer_count":5,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":1963,"score":7,"question_id":1460703,"title":"Comparison of arrays in google test?","body":"<p>I am looking to compare two arrays in google test. In UnitTest++ this is done through CHECK_ARRAY_EQUAL. How do you do it in google test?</p>\n"},{"tags":["c#",".net","unit-testing","dependency-injection","code-cleanup"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":13111775,"title":"Problems with Dependency Injection – how to clean up my implementation?","body":"<p>I’m using Dependency Injection to mock out classes in order to unit test other classes that depend on them:</p>\n\n<pre><code>class Foo : IFoo\n{\n    // production code\n}\n\nclass MockFoo : IFoo\n{\n    // mock so other classes that depend on Foo can be unit tested\n}\n\nclass Bar\n{\n    public DoSomething()\n    {\n        var barValue = 20;\n        // use dependency injection to get Foo instance.\n        DependencyInjection.Instance.Foo.ExampleMethod(barValue);\n    }\n}\n</code></pre>\n\n<p>However, setting up my dependency injection class is getting unwieldy, labyrinthine and complicated:</p>\n\n<pre><code>public class DependencyInjection\n{\n    public Setup()\n    {\n        this.Foo = new Foo();\n        this.Bar = new Bar(\"example constructor string\");\n        this.Bat = new Bat(123,234);\n        // for every single class in my application!\n    }\n}\n</code></pre>\n\n<p>(simplified for clarity, but you can imagine the real implementation with dozens of classes and their constructors).</p>\n\n<p>There are also a number of other problems: </p>\n\n<ul>\n<li>DependencyInjection and each of its class instances are a <strong>huge global\nvariable</strong> passed around my application. </li>\n<li>I’m initializing all of my classes at the same time.</li>\n<li>I have to provide an interface\nfor every class I write for unit testing – I’m allowing unit testing\nto dictate the design of my program (most of the classes I write\nwould be concrete implementations with no interface if it weren’t for\nthis constraint).</li>\n</ul>\n\n<p>Advice on how to solve these problems would be appreciated!</p>\n"},{"tags":["python","unit-testing","code-organization"],"answer_count":3,"favorite_count":25,"up_vote_count":36,"down_vote_count":0,"view_count":4871,"score":36,"question_id":1849311,"title":"How should I organize Python source code?","body":"<p>I'm getting started with Python (it's high time I give it a shot), and I'm looking for some best practices.</p>\n\n<p>My first project is a queue which runs command-line experiments in multiple threads. I'm starting to get a very long <code>main.py</code> file, and I'd like to break it up. In general, I'm looking for: <strong>How do python programmers organize multiple source files?</strong> Is there a particular structure that works for you?</p>\n\n<p>My specific questions include:</p>\n\n<ol>\n<li>Should each class be in a separate file?</li>\n<li>How should I organize unit tests relative to source code?</li>\n<li>Where should I put doc comments, specifically those for command-line operation?</li>\n<li>If I use multiple directories, how do I import classes between them?</li>\n</ol>\n\n<p>I can probably draw some of my own conclusions here by trial and error, but I'd rather start from something <em>good</em>.</p>\n"},{"tags":["unit-testing","c++-cli","white-box","white-box-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":40,"score":-1,"question_id":13110893,"title":"White Box Testing doesn't Work (Visual Studio 2010 in C++/C)","body":"<p>I want only to construct a little White Box Test. I get a lot of Errors for a simple Assert Testing. Can sombody implement <strong>one</strong> correct test in my source. I think somethin with my clips are not right. I just want to test my functions.</p>\n\n<p>My Header Files:</p>\n\n<p><strong>resource.h</strong></p>\n\n<pre><code>//{{NO_DEPENDENCIES}}\n// Microsoft Visual C++ generated include file.\n// Used by app.rc\n</code></pre>\n\n<p><strong>stdafx.h</strong></p>\n\n<pre><code>// stdafx.h : Includedatei für Standardsystem-Includedateien\n// oder häufig verwendete projektspezifische Includedateien,\n// die nur in unregelmäßigen Abständen geändert werden.\n//\n\n#pragma once\n\n#include \"targetver.h\"\n\n#include &lt;stdio.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;bthdef.h&gt;\n#include &lt;BluetoothAPIs.h&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;conio.h&gt;\n\nstd::wstring menu();\nvoid localBluetoothDevices ();\nvoid externBluetoothDevices(int);\nvoid refreshALL();\nvoid searchId (std::vector&lt;std::wstring&gt;, std::wstring);\n</code></pre>\n\n<p><strong>targetver.h</strong></p>\n\n<pre><code>    #pragma once\n\n    // Durch Einbeziehen von\"SDKDDKVer.h\" wird die höchste verfügbare Windows-Plattform definiert.\n\n    // Wenn Sie die Anwendung für eine frühere Windows-Plattform erstellen möchten, schließen Sie \"WinSDKVer.h\" ein, und\n    // legen Sie das _WIN32_WINNT-Makro auf die zu unterstützende Plattform fest, bevor Sie \"SDKDDKVer.h\" einschließen.\n\n    #include &lt;SDKDDKVer.h&gt;\n</code></pre>\n\n<p><strong>SourceCode.\nWhieBox.cpp</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#define WIN32_LEAN_AND_MEAN\n\nusing namespace std;\n\n#pragma comment(lib, \"Irprops.lib\")\n\nBLUETOOTH_FIND_RADIO_PARAMS m_bt_find_radio = {\n  sizeof(BLUETOOTH_FIND_RADIO_PARAMS)\n};\n\nBLUETOOTH_RADIO_INFO m_bt_info = {\n  sizeof(BLUETOOTH_RADIO_INFO),\n  0,\n};\n\nBLUETOOTH_DEVICE_SEARCH_PARAMS m_search_params = {\n  sizeof(BLUETOOTH_DEVICE_SEARCH_PARAMS),\n  1,\n  0,\n  1,\n  1,\n  1,\n  15,\n  NULL\n};\n\nBLUETOOTH_DEVICE_INFO m_device_info = {\n  sizeof(BLUETOOTH_DEVICE_INFO),\n  0,\n};\n\nHANDLE m_radio = NULL;\nHBLUETOOTH_RADIO_FIND m_bt = NULL;\nHBLUETOOTH_DEVICE_FIND m_bt_dev = NULL;\n\nusing namespace System;\nusing namespace System::Text;\nusing namespace System::Collections::Generic;\nusing namespace Microsoft::VisualStudio::TestTools::UnitTesting;\n\nnamespace UnitTest\n{\n    [TestClass]\n    public ref class WhiteBox\n    {\n\n    public: \n        [TestMethod]\n        void TestMethod1()\n        {\n  int wmain(int argc, wchar_t **args) {\n  wstring targetId;\n\n  targetId=menu();\n\n  while(true) {\n    m_bt = BluetoothFindFirstRadio(&amp;m_bt_find_radio, &amp;m_radio);\n\n    do {\n      vector&lt;wstring&gt; vec;\n      int m_device_id = 0;      \n\n      localBluetoothDevices ();   \n      refreshALL();\n\n      do {\n       wostringstream tmp;\n       ++m_device_id;\n\n       externBluetoothDevices(m_device_id);\n\n       //Konvertiere Byte in String\n       for (int i = 0; i &lt; 6; i++) {\n        tmp &lt;&lt; hex &lt;&lt; m_device_info.Address.rgBytes [i];\n        if (i &lt; 5)\n         tmp &lt;&lt; L':';\n       }\n\n       //Verfügbarkeitsliste\n       vec.push_back(tmp.str());\n\n      } while(BluetoothFindNextDevice(m_bt_dev, &amp;m_device_info));\n\n      searchId(vec, targetId); \n      BluetoothFindDeviceClose(m_bt_dev);\n      Sleep(10000);\n\n    } while(BluetoothFindNextRadio(&amp;m_bt_find_radio, &amp;m_radio));\n    BluetoothFindRadioClose(m_bt);\n  }\n  return 0;\n}\n}\n\n//Konsole Menu\nwstring menu(){\n  int menuId;\n  wstring targetId;\n\n  wcout&lt;&lt;\"==============================BLUE*Smart==============================\"&lt;&lt;endl&lt;&lt;endl;\n  wcout&lt;&lt;\"Start Example with test ID \\t(1) \\n\";\n  wcout&lt;&lt;\"Start with special ID \\t\\t(2) \\n\";\n  wcout&lt;&lt;\"EXIT \\t\\t\\t\\t(3) \\n \\n\";\n  wcout&lt;&lt;\"Selection: \"; wcin&gt;&gt;menuId; cout&lt;&lt;endl&lt;&lt;endl;\n\n  switch (menuId){\n  case 1: targetId = (L\"18:22:85:d8:3:98\"); break;\n  case 2: wcout&lt;&lt;L\"Target ID: \"; wcin&gt;&gt;targetId; cout&lt;&lt;endl&lt;&lt;endl; break;\n  case 3: exit(EXIT_FAILURE);\n  default: cout&lt;&lt;\"Wrong Input!!! Starting Testprogramm\"&lt;&lt;endl&lt;&lt;endl; targetId = (L\"18:22:85:d8:3:98\"); break;\n  }\n\n  return targetId;\n}\n\n//Lokal verfügbare bzw. angeschlossene Bluetooth-Devices\nvoid localBluetoothDevices (){\n      int m_radio_id = 0;\n      m_radio_id++;\n      BluetoothGetRadioInfo(m_radio, &amp;m_bt_info);      \n      //Lokaler Bluetoothadapter\n      wprintf(L\"====================================================================== \\n\");\n      wprintf(L\"\\tLocal Device Nr. %d\\r\\n\", m_radio_id);\n      wprintf(L\"\\t\\tName: %s\\r\\n\", m_bt_info.szName);\n      wprintf(L\"\\t\\tAddress: %02x:%02x:%02x:%02x:%02x:%02x\\r\\n\", m_bt_info.address.rgBytes[0], m_bt_info.address.rgBytes[1], m_bt_info.address.rgBytes[2], m_bt_info.address.rgBytes[3], m_bt_info.address.rgBytes[4], m_bt_info.address.rgBytes[5]);\n\n}\n\n//Extern verfügbare bzw. anwesende Bluetooth-Devices\nvoid externBluetoothDevices(int mt_counter){\n       int m_device_id=mt_counter;\n       wprintf(L\"********************************************************************** \\n\");\n       wprintf(L\"\\tDevice %d:\\r\\n\", m_device_id);\n       wprintf(L\"\\t\\tName: %s\\r\\n\", m_device_info.szName);\n       wprintf(L\"\\t\\tAddress: %02x:%02x:%02x:%02x:%02x:%02x\\r\\n\", m_device_info.Address.rgBytes[0], m_device_info.Address.rgBytes[1], m_device_info.Address.rgBytes[2], m_device_info.Address.rgBytes[3], m_device_info.Address.rgBytes[4], m_device_info.Address.rgBytes[5]);\n       wprintf(L\"====================================================================== \\n\");\n}\n\n//Memory Refresh\nvoid refreshALL(){\n      m_search_params.hRadio = m_radio;\n      ::ZeroMemory(&amp;m_device_info, sizeof(BLUETOOTH_DEVICE_INFO));\n      m_device_info.dwSize = sizeof(BLUETOOTH_DEVICE_INFO);\n      m_bt_dev = BluetoothFindFirstDevice(&amp;m_search_params, &amp;m_device_info);\n}\n\n//Prüfe Vector Liste nach ID, ob vorhanden ist\nvoid searchId (vector&lt;wstring&gt; vec, wstring targetId){    \n      vector&lt;wstring&gt;::iterator it = find(vec.begin(), vec.end(), targetId);\n\n      if(it != vec.end()) {   \n       cout &lt;&lt; \"Found it!\\t\" &lt;&lt; endl;\n       cout&lt;&lt;\"======================================================================\"&lt;&lt;endl;\n       cout&lt;&lt;endl&lt;&lt;endl;\n      } else {\n       cout &lt;&lt; \"Not Found! (HARDWARE OFF)\\t\" &lt;&lt; endl;\n       cout&lt;&lt;\"======================================================================\"&lt;&lt;endl;\n       cout&lt;&lt;endl&lt;&lt;endl;\n      }\n}\n\n};\n}\n</code></pre>\n"},{"tags":[".net","unit-testing","nunit","app-config","configurationmanager"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":3303,"score":4,"question_id":1412235,"title":"How do you instruct NUnit to load an assembly's dll.config file from a specific directory?","body":"<p>If an assembly contains an app.config file, <code>ConfigurationManager</code> will load it as long as it is in the same directory as the NUnit project that is executing through NUnit-Gui.  To illustrate consider the following folder structure.</p>\n\n<pre><code>+ TestFolder\n    testProject.nunit\n  + AssemblyAFolder\n      assemblyA.dll\n      assemblyA.dll.config\n  + AssemblyBFolder\n      assemblyB.dll\n      assemblyB.dll.config\n</code></pre>\n\n<p>Both <code>AssemblyA</code> and <code>AssemblyB</code> exercise code that calls into <code>ConfigurationManager</code>.  If I run these test assemblies independently in NUnit-Gui, <code>ConfigurationManager</code> will correctly resolve the local configuration files.</p>\n\n<p>However, if I load <code>testProject.nunit</code> into NUnit-Gui (which contains references to both <code>AssemblyA</code> and <code>AssemblyB</code>), <code>ConfigurationManager</code> looks for the configuration file in <code>TestFolder</code> regardless of which assembly is currently executing.</p>\n\n<p>Is there a way to direct NUnit to reload the application configuration to the one present in the current assembly's directory?</p>\n\n<p>Here are the contents of <code>testProject.nunit</code>:</p>\n\n<pre><code>&lt;NUnitProject&gt;\n  &lt;Settings activeconfig=\"Debug\" /&gt;\n  &lt;Config name=\"Debug\" binpathtype=\"Auto\"&gt;\n    &lt;assembly path=\"AssemblyAFolder\\assemblyA.dll\" /&gt;\n    &lt;assembly path=\"AssemblyBFolder\\assemblyB.dll\" /&gt;\n  &lt;/Config&gt;\n&lt;/NUnitProject&gt;\n</code></pre>\n"},{"tags":["c#","visual-studio-2010","unit-testing","testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13110496,"title":"Visual Studio does not run all the unit tests in a test class","body":"<p>I have 3 test methods in my unit test class, but Visual Studio only runs the second test, ignoring the others</p>\n\n<p>These are the 3 test methods: </p>\n\n<pre><code>[TestClass()]\npublic class InsertionSortTest\n{\n\n    [TestMethod()]\n    public void sortTest()\n    {\n        InsertionSort target = new InsertionSort(); // TODO: Initialize to an appropriate value\n        int[] n = new int[] { 2, 1, 4 };\n        int[] nExpected = new int[] { 1, 2, 4 };\n        target.sort(ref n);\n        CollectionAssert.AreEqual(nExpected, n);\n\n    }\n\n    [TestMethod()]\n    public void sortTest2()\n    {\n        InsertionSort target = new InsertionSort(); // TODO: Initialize to an appropriate value\n        int[] n = new int[] { 1, 2 };\n        int[] nExpected = new int[] { 1, 2 };\n        target.sort(ref n);\n        CollectionAssert.AreEqual(nExpected, n);\n\n    }\n\n    [TestMethod()]\n    public void sortTest3()\n    {\n        InsertionSort target = new InsertionSort(); // TODO: Initialize to an appropriate value\n        int[] n = new int[] { 1, 2 };\n        int[] nExpected = new int[] { 1, 2 };\n        target.sort(ref n);\n        CollectionAssert.AreEqual(nExpected, n);\n\n    }\n}\n</code></pre>\n\n<p>So when I run the test only sortTest2 is executed? I am expecting 3 results from this. I am getting Results 1/1 passed. TestName: sortTest2. </p>\n\n<p>What happened with the other two tests I made?</p>\n"},{"tags":["c++","visual-studio-2010","unit-testing","white-box-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13110049,"title":"Visual Studio 2010 Unit Test","body":"<p>I want to test a couple of functions in my source code with unit tests. Now If I run my test I don't get any test results.</p>\n\n<p>Here is a simple Code Snippet what I try to do:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nnamespace UnitTest\n{\n    [TestClass]\n    public ref class UnitTestBlueSmart\n\n        int main(){\n        public:\n        [TestMethod()]\n        hello();\n        }\n}\n\nvoid hello(){\n cout&lt;&lt;\"Hello World!\";\n}\n</code></pre>\n\n<p>Does anyone know why this is not working?</p>\n"},{"tags":["c#","entity-framework","unit-testing","orm"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13107882,"title":"mocking EF without repository pattern","body":"<p>I'm using Entity Framework 4.</p>\n\n<p>I have read this post:</p>\n\n<p><a href=\"http://www.nogginbox.co.uk/blog/mocking-entity-framework-data-context\" rel=\"nofollow\">http://www.nogginbox.co.uk/blog/mocking-entity-framework-data-context</a></p>\n\n<p>But in my code I don't see anything like  <code>EFContext</code> <code>Attach() Detach()</code> and other stuff that appears there.</p>\n\n<p>Mine is more like this diagram:</p>\n\n<p><a href=\"http://blogofrab.blogspot.co.il/2010/08/maintenance-free-mocking-for-unit.html\" rel=\"nofollow\">http://blogofrab.blogspot.co.il/2010/08/maintenance-free-mocking-for-unit.html</a></p>\n\n<p>and then I don't understand how mocking the Icontext will help mocking?</p>\n\n<p>The ORM to the DB lays inside <code>get property</code> and <code>AddTo methods</code></p>\n"},{"tags":["python","unit-testing","class-method"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13107823,"title":"No such test method / unbound error","body":"<p>I have overridden the unittest.TestCase class to include some additional functionality like this</p>\n\n<pre><code>class TestCase(unittest.TestCase):\n    def foo(self):\n        return 4711\n</code></pre>\n\n<p>which I am going to use in the <code>setUpClass</code> call in a Test Case like this</p>\n\n<pre><code>class MyTest(TestCase):\n    @classmethod\n    def setUpClass(cls):\n        value = cls.foo() #1 \n        value = MyTest.foo() #2\n        value = MyTest().foo() #3\n        value = TestCase().foo() #4\n</code></pre>\n\n<p>where I fail to access the function <code>foo()</code> I have implemented in the modified unitest class. </p>\n\n<p>I can see that try #2 will fail because I try to access a method of a class which is not instantiated, and foo is not a classmethod.\nI can see that try #1 also does not work, as I am trying to access a non-class method from the classmethod level (or how this ever is correctly described).\nBut why is try #3/#4 giving me an <code>no such test method</code> error? </p>\n\n<p>How is it possible to access the <code>foo()</code> method WITHOUT making it a classmethod (because I cannot change this as it is something external)? </p>\n"}]}
{"total":15322,"page":4,"pagesize":100,"questions":[{"tags":["python","unit-testing","doctest"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":63,"score":3,"question_id":13106118,"title":"object reuse in python doctest","body":"<p>I have a sample doctest like this one.</p>\n\n<pre><code>\"\"\"\nThis is the \"iniFileGenerator\" module.\n&gt;&gt;&gt; hintFile = \"./tests/unit_test_files/hint.txt\"\n&gt;&gt;&gt; f = iniFileGenerator(hintFile)\n&gt;&gt;&gt; print f.hintFilePath\n./tests/unit_test_files/hint.txt\n\"\"\"\nclass iniFileGenerator:\n    def __init__(self, hintFilePath):\n        self.hintFilePath = hintFilePath\n    def hello(self):\n        \"\"\"\n        &gt;&gt;&gt; f.hello()\n        hello\n        \"\"\"\n        print \"hello\"\nif __name__ == \"__main__\":\n    import doctest\n    doctest.testmod()\n</code></pre>\n\n<p>When I execute this code, I got this error.</p>\n\n<pre><code>Failed example:\n    f.hello()\nException raised:\n    Traceback (most recent call last):\n      File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/doctest.py\", line 1254, in __run\n        compileflags, 1) in test.globs\n      File \"&lt;doctest __main__.iniFileGenerator.hello[0]&gt;\", line 1, in &lt;module&gt;\n        f.hello()\n    NameError: name 'f' is not defined\n</code></pre>\n\n<p>This error is caused by accessing 'f' which was not accessible when testing <code>hello()</code> method.</p>\n\n<p>Is there any way to share the object which is created before? Without it, one need to create object all the time when it's necessary.</p>\n\n<pre><code>def hello(self):\n    \"\"\"\n    hintFile = \"./tests/unit_test_files/hint.txt\"\n    &gt;&gt;&gt; f = iniFileGenerator(hintFile)\n    &gt;&gt;&gt; f.hello()\n    hello\n    \"\"\"\n    print \"hello\"\n</code></pre>\n"},{"tags":["asp.net",".net","unit-testing","mocking","httpcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13106037,"title":"Is using HttpContext directly a bad thing?","body":"<p>I have a little alternative MVC framework built atop ASP.Net(though not strictly tied to it). One of the things I mess around with a whole lot is <code>HttpContext</code> instances and <code>HttpContext.Current</code>. Recently, I've went to trying to put in a few unit tests for my framework and found that HttpContext is notoriously hard to test against. Because my application isn't necessarily tied to ASP.Net, I've tried reimplementing a more basic version of HttpContext, HttpRequest, and friends, but this is a massive undertaking for the shear amount of information that must be contained in these classes. </p>\n\n<p>What exactly should I do? Find a work around for testing with HttpContext or restructure my code to not explicitly depend on it so much? Or is there a better way? Is using HttpContext directly a lot a bad thing? </p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":3,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":1882,"score":9,"question_id":4332877,"title":"PHPUnit - Running a particular test suite via the command line test runner","body":"<p>Is it possible to specify which test suite to run from a configuration file via the command line test runner? For example, if I have the following xml configuration:</p>\n\n<pre><code>&lt;phpunit ...&gt;\n    &lt;testsuites&gt;\n        &lt;testsuite name=\"My Test Suite 1\"&gt;\n            &lt;directory&gt;./MyTestSuite1/&lt;/directory&gt;\n        &lt;/testsuite&gt;\n        &lt;testsuite name=\"My Test Suite 2\"&gt;\n            &lt;directory&gt;./MyTestSuite2/&lt;/directory&gt;\n        &lt;/testsuite&gt;\n    &lt;/testsuites&gt;\n    ...\n&lt;/phpunit&gt;\n</code></pre>\n\n<p>Can I have it run only \"My Test Suite 1\"?</p>\n"},{"tags":["unit-testing","session","grails","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":349,"score":0,"question_id":8611810,"title":"Grails 2.0: MissingPropertyException when setting attribute on Session","body":"<p>Since upgrading to Grails 2.0.0 from 2.0.0.RC1 There's some really strange behaviour in my controller when setting the user attribute on the session.</p>\n\n<p>My test is under integration and when running <code>grails --integration test-app</code> or from an IDE all tests pass but when running <code>grails test-app</code> <strong>with the unit tests first, it fails.</strong> </p>\n\n<p>I am simply setting the user on the session in my UserController.login() action:</p>\n\n<pre><code>session.user = user\n</code></pre>\n\n<p>My test looks like that:</p>\n\n<pre><code>params.userName = testUser1.userName  // some user domain instance\nparams.password = testUser1.password\ncontroller.doLogin()\nassert null != session.user\n</code></pre>\n\n<p>When running <code>grails test-app</code> I receive the following error on the <code>session.user=user</code> line:</p>\n\n<pre><code>groovy.lang.MissingPropertyException: No such property: user for class: org.codehaus.groovy.grails.web.servlet.mvc.GrailsHttpSession\nPossible solutions: new\n</code></pre>\n\n<p>Replacing the controller code with the following works:</p>\n\n<pre><code>session.setAttribute('user',user)\n</code></pre>\n\n<p>and the test with:</p>\n\n<pre><code>assert null != session.getAttribute('user')\n</code></pre>\n\n<p>As mentioned above, this only happens when running the full test suite. If running <code>--integration</code> it's fine. <code>run-app</code> is ok too.</p>\n\n<p>A bug?</p>\n\n<p>Regards</p>\n\n<p>Jonas</p>\n"},{"tags":["iphone","unit-testing","ios-simulator"],"answer_count":27,"favorite_count":99,"up_vote_count":268,"down_vote_count":1,"view_count":106221,"score":267,"question_id":788277,"title":"iPhone - strange error when testing on simulator","body":"<p>I was testing my app on the simulator when it crashed on clicking a button of a UIAlertView. I stopped debugging there, made some changes to the code and built the app again. Now when I run the application, I get this error in the console</p>\n\n<blockquote>\n  <p><strong>Couldn't register com.myApp.debug with the bootstrap server. Error: unknown error code.\n  This generally means that another instance of this process was already running or is hung in the debugger.Program received signal:  “SIGABRT”.</strong></p>\n</blockquote>\n\n<p>I tried removing the app from the simulator, doing a clean build but I still get this error when I try to run the app.</p>\n\n<p>What should I do to be able to run the app on my simulator again?</p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":178,"score":0,"question_id":9266144,"title":"python unit test nested testcase","body":"<p>I wrote a script based on python unittest2, it's structure like this:</p>\n\n<pre><code>testCase\n  |_setup() --&gt; call testCase1\n  |_runTest() --&gt; call testCase2\n  |_teardown() --&gt; call testCase3\n</code></pre>\n\n<p>that is when testcase1,2,3 is nested in the testcase.</p>\n\n<p>The problem is when sub testcase (1,2,3) has exception such as assert failure, the failure catched by sub testcase itself, the top testCase cannot catch, so any way to let the exception in sub testcase  raise to top top testcase?</p>\n\n<p>Another related question is: is it possible let top testcase and sub testcase share a same 'testResult' object? Then they can show in same report.</p>\n\n<p>Thanks in advance for reading and answering.</p>\n\n<p>------ Reply questions in comments ---------</p>\n\n<p><strong>1. why need add test in test</strong></p>\n\n<p>That's because I have <strong>.ini</strong> format configuration file to <strong>represent</strong> a testcase, has 'setup','execute','teardown' sections.  </p>\n\n<p>What I do is </p>\n\n<pre><code>1. read each section from ini file, \n2. then create testcase objects for each section (that is testcase1,2,3,), \n3. then assemble all three sections in to a top testcase object, \n4. then run the top testcase object.  \n</code></pre>\n\n<p>please let me know if have better approach for this kind of 'ini' implementation.</p>\n\n<p><strong>2. The code</strong></p>\n\n<pre><code>#the class test classes properties as expected.\nclass tSmis(cim.cimBase):\n\n    def __init__(self,methodName,setupObj=None,exeObj=None,teardownObj=None,clsSetupObj=None,clsTeardownObj=None):\n        setattr(self,methodName,self.exeute)\n        unittest.TestCase.__init__(self, methodName)\n\n        #self.writeHtml(\"info\", \"Class tSmis __init__,one class Instance created, tc is {}\".format(methodName))\n        self.setupObj=setupObj\n        self.exeObj=exeObj\n        self.teardownObj=teardownObj\n\n        self.clsSetupObj=clsSetupObj\n        self.clsTeardownObj=clsTeardownObj    \n\n\n\n    def exeute(self):\n        if self.exeObj:\n            self.exeObj()\n\n\n\n    def setUp(self):\n        if self.setupObj:\n            #self.setupObj() #run case.__call__, eval run case.run\n\n#ASSERT FAILURE CANNOT BE CATCHED IN BELOW LINE\n    unittest.TextTestRunner(verbosity=5,resultclass=resultclassG).run(self.setupObj)\n\n            #ASSERT CAN BE CATCHED\n            self.assertEqual(1,0,\"This is a debug  message \")\n\n    def tearDown(self):\n        if self.teardownObj:\n            self.teardownObj()\n</code></pre>\n"},{"tags":["unit-testing","testing","code-coverage","mutation-testing"],"answer_count":3,"favorite_count":4,"up_vote_count":17,"down_vote_count":1,"view_count":1653,"score":16,"question_id":242650,"title":"Is mutation testing useful in practice?","body":"<p>It exists the technology of <a href=\"http://en.wikipedia.org/wiki/Mutation_testing\" rel=\"nofollow\">mutation testing</a>. It checks, if the tests are running even if you change the code. If not all is OK, if the tests are running they don't cover all eventualities. There is some theoretical work about it, but I'm interested in the question, if it is useful in practice? Do you have any examples of real life applications of mutation testing? Does it work better than simple test-coverage-tools? Or is it useless?</p>\n\n<p>What are the advantages/disadvantages of mutation testing in the real world?</p>\n"},{"tags":["php","unit-testing","recursion","multidimensional-array","phpunit"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1516,"score":3,"question_id":2937176,"title":"Does PHPUnit have some inbuilt recursive array comparison function?","body":"<p>Some of the testing I will need to do will require comparing a known array with the result I am getting from the functions I will be running.  </p>\n\n<p>For comparing arrays recursively:</p>\n\n<ul>\n<li>Does PHPUnit have an inbuilt function?</li>\n<li>Does someone here have some code they have constructed to share?</li>\n<li>Will this be something I will have to construct on my own?</li>\n</ul>\n"},{"tags":["python","unit-testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13093526,"title":"Mocking the super class calls on python","body":"<p>I am doing some unit testing and at some point I need to mock a <code>super</code> call to throw an error, for example:</p>\n\n<pre><code>@classmethod\ndef myfunc(cls, *args, **kwargs)\n    try:\n        super(MyClass, cls).my_function(args, kwargs)\n    except MyException as e:\n        #...\n</code></pre>\n\n<p>I am using the <a href=\"http://labix.org/mocker#head-83d80b643ee8544628ee7a8301a72443ac51a173\" rel=\"nofollow\">mocker</a> library to mock my objects in general but I haven't found a way to mock this.</p>\n"},{"tags":["web-services","unit-testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13092780,"title":"Testing web services with JUnit","body":"<p>I'm developing an application to perform a series of tests on various web services. These web services consume and produce json, and for each of them we have a class to model the json request and response. For example:</p>\n\n<p>If the json request for serviceX is something like this:</p>\n\n<pre><code>{\n  \"name\":\"Alex\",\n  \"id\":\"123\"\n}\n</code></pre>\n\n<p>We have a class <code>serviceXrequest</code> like this:</p>\n\n<pre><code>public class serviceXrequest {\n\n   String name;\n   String id;\n\n   //Constructor, getters/setters, etc\n   ...\n}\n</code></pre>\n\n<p>With an object of that class as the starting point, we can perform a series of test on the web service. The idea is to make those test as generic as possible so they can be used with any web service by just writing a class that models it's request and a class to model the response.</p>\n\n<p>For that reason, all of the test methods developed so far work with plain java objects. This is an example of what I want to have:</p>\n\n<pre><code>public class WebServiceTest {\n\n    String serviceURL;\n    String requestJson;\n    String requestClass;\n    String responseClass;\n\n    public WebServiceTest() {}\n\n    @Test\n    public static void Test1() { ... }\n\n    @Test\n    public static void Test2() { ... }\n\n    ....\n\n    @Test\n    public static void TestN() { ... }\n}\n</code></pre>\n\n<p>And then, from another class, invoke those tests with doing something like this:</p>\n\n<pre><code>public class LoginTest { //To test the login web service, for example\n\n    public static void main(String[] args) {\n\n        WebServiceTest loginTest = New WebServiceTest();\n\n        loginTest.setServiceURL(\"172.0.0.1/services/login\");\n        loginTest.setRequestJson(\"{\"user\":\"ale\",\"pass\":\"1234\"}\");\n        ...\n        loginTest.runTests();\n    }\n}\n</code></pre>\n\n<p>I know it's not that simple, but any ideas on how to get there?\nThanks in advance!!</p>\n"},{"tags":["python","unit-testing","logging"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":8607767,"title":"How to run initialization code before tests when using Python's unittest module as a testrunner?","body":"<p>How can a user of a library run his own initialization code (setting debug levels of loggers for example) before running tests supplied with the library? Python's <code>unittest</code> module is used as a testrunner.</p>\n"},{"tags":["c#","unit-testing","generics"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13088837,"title":"Unit Tests for Methods that use Generic Types","body":"<p>I'm using Microsoft Unit Test for unit testing my .NET Classes. I have method that I uses generic types and when I use the wizard, it creates two methods, one is a helper using a GenericParameterHelper. </p>\n\n<p>I can update the test to a specific type but I'm wondering what the best approach to test generics would be.</p>\n\n<p>Here are the two test methods that the Unit Test Wizard produced:</p>\n\n<pre><code> public void ContainsKeyTestHelper&lt;TKey, TValue&gt;()\n    {\n        IDictionary&lt;TKey, TValue&gt; dictionaryToWrap = null; // TODO: Initialize to an appropriate value\n        ReadOnlyDictionary&lt;TKey, TValue&gt; target = new ReadOnlyDictionary&lt;TKey, TValue&gt;(dictionaryToWrap); // TODO: Initialize to an appropriate value\n        TKey key = default(TKey); // TODO: Initialize to an appropriate value\n        bool expected = false; // TODO: Initialize to an appropriate value\n        bool actual;\n        actual = target.ContainsKey(key);\n        Assert.AreEqual(expected, actual);\n    }\n\n    [TestMethod()]\n    public void ContainsKeyTest()\n    {\n        ContainsKeyTestHelper&lt;GenericParameterHelper, GenericParameterHelper&gt;();\n    }\n</code></pre>\n\n<p>The method I'm testing (from the custom ReadOnlyDictionary (<a href=\"http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=29\" rel=\"nofollow\">http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=29</a>)):</p>\n\n<pre><code>/// &lt;summary&gt;Determines whether the &lt;see cref=\"T:ReadOnlyDictionary`2\" /&gt;\n/// contains the specified key.&lt;/summary&gt;\n/// &lt;returns&gt;\n/// True if the &lt;see cref=\"T:ReadOnlyDictionary`2\" /&gt; contains\n/// an element with the specified key; otherwise, false.\n/// &lt;/returns&gt;\n/// &lt;param name=\"key\"&gt;The key to locate in the\n/// &lt;see cref=\"T:ReadOnlyDictionary`2\"&gt;&lt;/see&gt;.&lt;/param&gt;\n/// &lt;exception cref=\"T:System.ArgumentNullException\"&gt;\n/// Thrown when the key is null.\n/// &lt;/exception&gt;\npublic bool ContainsKey(TKey key)\n{\n    return this.source.ContainsKey(key);\n}\n</code></pre>\n\n<p>What value should I use to initialize each of the values that have a TODO? </p>\n"},{"tags":["unit-testing","mocking","moq","visual-studio-2012"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":241,"score":2,"question_id":12269409,"title":"Visual Studio 2012 Fakes - How do I verify a method was called?","body":"<p>Coming from using Moq, I'm used to being able to Setup mocks as Verifiable.  As you know, this is handy when you want to ensure your code under test actually called a method on a dependency.</p>\n\n<p>e.g. in Moq:</p>\n\n<pre><code>// Set up the Moq mock to be verified\nmockDependency.Setup(x =&gt; x.SomethingImportantToKnow()).Verifiable(\"Darn, this did not get called.\");\ntarget = new ClassUnderTest(mockDependency);\n// Act on the object under test, using the mock dependency\ntarget.DoThingsThatShouldUseTheDependency();\n// Verify the mock was called.\nmockDependency.Verify();\n</code></pre>\n\n<p>I've been using VS2012's \"Fakes Framework\" (for lack of knowing a better name for it), which is quite slick and I'm starting to prefer it to Moq, as it seems a bit more expressive and makes Shims easy.  However, I can't figure out how to reproduce behavior similar to Moq's Verifiable/Verify implementation.  I found the InstanceObserver property on the Stubs, which sounds like it might be what I want, but there's no documentation as of 9/4/12, and I'm not clear how to use it, if it's even the right thing.</p>\n\n<p>Can anyone point me in the right direction on doing something like Moq Verifiable/Verify with VS2012's Fakes?</p>\n\n<p>-- 9/5/12 Edit --\nI realized a solution to the problem, but I'd still like to know if there's a built-in way to do it with VS2012 Fakes.  I'll leave this open a little while for someone to claim if they can.  Here's the basic idea I have (apologies if it doesn't compile).</p>\n\n<pre><code>[TestClass]\npublic class ClassUnderTestTests\n{\n    private class Arrangements\n    {\n        public ClassUnderTest Target;\n        public bool SomethingImportantToKnowWasCalled = false;  // Create a flag!\n        public Arrangements()\n        {\n            var mockDependency = new Fakes.StubIDependency  // Fakes sweetness.\n            {\n                SomethingImportantToKnow = () =&gt; { SomethingImportantToKnowWasCalled = true; }  // Set the flag!\n            }\n            Target = new ClassUnderTest(mockDependency);\n        }\n    }\n\n    [TestMethod]\n    public void DoThingThatShouldUseTheDependency_Condition_Result()\n    {\n        // arrange\n        var arrangements = new Arrangements();\n        // act\n        arrangements.Target.DoThingThatShouldUseTheDependency();\n        // assert\n        Assert.IsTrue(arrangements.SomethingImportantToKnowWasCalled);  // Voila!\n    }\n}\n</code></pre>\n\n<p>-- 9/5/12 End edit --</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","unit-testing","mocking","phpunit"],"answer_count":5,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":2508,"score":11,"question_id":3367513,"title":"PHPUnit \"Mocked method does not exist.\" when using $mock->expects($this->at(...))","body":"<p>I've run into a strange issue with PHPUnit mock objects. I have a method that should be called twice, so I'm using the \"at\" matcher. This works for the first time the method is called, but for some reason, the second time it's called, I get \"Mocked method does not exist.\". I've used the \"at\" matcher before and have never run into this.</p>\n\n<p>My code looks something like:</p>\n\n<pre><code>class MyTest extends PHPUnit_Framework_TestCase\n{\n    ...\n\n    public function testThis()\n    {\n        $mock = $this-&gt;getMock('MyClass', array('exists', 'another_method', '...'));\n        $mock-&gt;expects($this-&gt;at(0))\n             -&gt;method('exists')\n             -&gt;with($this-&gt;equalTo('foo'))\n             -&gt;will($this-&gt;returnValue(true));\n\n        $mock-&gt;expects($this-&gt;at(1))\n             -&gt;method('exists')\n             -&gt;with($this-&gt;equalTo('bar'))\n             -&gt;will($this-&gt;returnValue(false));\n    }\n\n    ...\n}\n</code></pre>\n\n<p>When I run the test, I get:</p>\n\n<pre><code>Expectation failed for method name is equal to &lt;string:exists&gt; when invoked at sequence index 1.\nMocked method does not exist.\n</code></pre>\n\n<p>If I remove the second matcher, I do not get the error.</p>\n\n<p>Has anyone run into this before?</p>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","dependency-injection","erlang","mocking"],"answer_count":4,"favorite_count":6,"up_vote_count":15,"down_vote_count":0,"view_count":1274,"score":15,"question_id":1202539,"title":"How do I do dependency injection and mocks in erlang?","body":"<p>When writing code in Java, it is very helpful to embrace <a href=\"http://en.wikipedia.org/wiki/Object%5Fcomposition\" rel=\"nofollow\">composition</a> and <a href=\"http://en.wikipedia.org/wiki/Dependency%5Finjection\" rel=\"nofollow\">dependency injection</a> to make it possible and easy to do pure unit testing by mocking collaborating objects.</p>\n\n<p>I find that doing the same in Erlang is less straightforward and makes for dirtier code.</p>\n\n<p>That's likely to be my fault, as I'm quite new to Erlang and quite addicted to JUnit, EasyMock and java interfaces...</p>\n\n<p>Let's say I have this stupid function:</p>\n\n<pre><code>%% module mymod\nhandle_announce(Announce) -&gt;\n    AnnounceDetails = details_db:fetch_details(Announce),\n    AnnounceStats = stats_db:fetch_stats(Announce),\n    {AnnounceDetails, AnnounceStats}.\n</code></pre>\n\n<p>When unit testing <code>mymod</code>, I only want to prove that <code>details_db</code> and <code>stats_db</code> are invoked with the right parameters, and that the return values are the used correctly.\nThe ability od <code>details_db</code> and <code>stats_db</code> to generate correct value is tested in other places.</p>\n\n<p>To solve the problem I could refactor my code this way:</p>\n\n<pre><code>%% module mymod\nhandle_announce(Announce, [DetailsDb, StatsDb]) -&gt;\n    AnnounceDetails = DetailsDb:fetch_details(Announce),\n    AnnounceStats = StatsDb:fetch_stats(Announce),\n    {AnnounceDetails, AnnounceStats}.\n</code></pre>\n\n<p>And test it this way (basically stubbing the calls directly into the test module):</p>\n\n<pre><code>%% module mymod_test\nhandle_announce_test() -&gt;\n    R = mymod:handle_announce({announce, a_value}, [?MODULE, ?MODULE, ?MODULE]),\n    ?assertEqual({details,stats}, R).\n\nfetch_details({announce, a_value}) -&gt;\n    details.\n\nfetch_stats({announce, a_value}) -&gt;\n    stats.\n</code></pre>\n\n<p>It works, but the application code becomes dirty and I always have to carry around that ugly list of modules.</p>\n\n<p>I've tried a couple of mock libraries (<a href=\"http://sheyll.blogspot.com/2009/02/erlang-mock-erlymock.html\" rel=\"nofollow\">erlymock</a> and (<a href=\"http://charpi.net/blog/2008/10/09/enhanced-erlang-mock-implementation/\" rel=\"nofollow\">this other one</a>) but I wasn't satisfied.</p>\n\n<p>How do you unit test your erlang code? </p>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","resharper","jasmine"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":348,"score":1,"question_id":11245016,"title":"Stack trace for Jasmine test with the Resharper 7 test runner","body":"<p>How do you get the Resharper 7 test runner to show the stacktrace for Jasmine tests.</p>\n\n<p>My setup is Resharper 7 (build in Jasmine) testrunner and PhantomJs. When executing any failing test the error message always ends with:</p>\n\n<pre><code>Exception doesn't have a stacktrace\n</code></pre>\n\n<p>In the 1.6 \"Lavender\" version of Phantom has added the feature to print the stacktrace when an error occurs. </p>\n\n<p>To replicate this just create a mytest.js file and add the following code to it:</p>\n\n<pre><code>describe(\"A suite\", function() {\n  it(\"contains spec with an expectation\", function() {\n    expect(true).toBe(false);\n  });\n});\n</code></pre>\n"},{"tags":["java","eclipse","unit-testing","junit","eclemma"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12757559,"title":"Code coverage in Java with EclEmma not scanning expecting exception methods","body":"<p>I'm trying to get my code coverage in java, using Eclipse and EclEmma.</p>\n\n<p>My tests are using JUnit 4 and I've got some tests looking like this :</p>\n\n<pre><code>    @Test(expected = IllegalArgumentException.class)\n    public void createTime_withInvalidMinuteUnder0_throws(){\n    //Arrange\n    ...\n    //Act\n    Something triggering IllegalArgumentException Here       \n}\n</code></pre>\n\n<p>And EclEmma says that the test fails because there's an IllegalArgumentException being thrown. So it drops my code coverage indicator even though it's supposed to throw something. Is there an option to make it see that JUnit expected exception tag ?</p>\n\n<p>edit: I've found out that if you add the throw to the declaration of the test aswell, it works!</p>\n"},{"tags":["php","database","unit-testing","tdd","simpletest"],"answer_count":9,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":2375,"score":4,"question_id":175153,"title":"How do you set up database testing using the PHP SimpleTest framework","body":"<p>I am using SimpleTest, a PHP-based unit testing framework. I am testing new code that will handle storing and retrieving website comments from a database. I am at a loss for how to structure the project to test the database access code.</p>\n\n<p>I am looking for any suggestions as to best practices for testing db code in a PHP application. Examples are really great. Sites for further reading are great.</p>\n\n<p>Thank you kindly. :)</p>\n"},{"tags":["delphi","unit-testing","mocking"],"answer_count":5,"favorite_count":20,"up_vote_count":32,"down_vote_count":0,"view_count":2550,"score":32,"question_id":293755,"title":"What is your favorite Delphi mocking library?","body":"<p>I want to start using mock objects on my Delphi projects.</p>\n\n<p>After a quick google I've found those:</p>\n\n<ul>\n<li><a href=\"http://code.google.com/p/delphi-mock-wizard/\" rel=\"nofollow\">Delphi Mock Wizard</a> </li>\n<li><a href=\"http://sourceforge.net/projects/pascalmock/\" rel=\"nofollow\">PascalMock</a></li>\n</ul>\n\n<p>So my question is what one is your favourite and why?</p>\n"},{"tags":["c#","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13078105,"title":"How to Unit Test SaveInfo method without saving to the Database","body":"<p>Here is my class:</p>\n\n<pre><code>public class AuditInfo\n{\n    public String ActionDescription { get; set; }\n    public String ActionWho { get; set; }\n    public BasicProjectProfile Project { get; set; }\n\n\n    public AuditInfo ()\n    { }\n\n    public void SaveInfo ()\n    {\n        using (CIHEntities _dbContext = new CIHEntities())\n        {\n            AuditInfoEntity aie = new AuditInfoEntity();\n            aie.ActionDescription = this.ActionDescription;\n            aie.ActionWhen = DateTime.Now;\n            if (this.ActionWho != null)\n            {\n                aie.ActionWho = this.ActionWho;\n            }\n            else\n            {\n                aie.ActionWho = \"Not Specified\";\n            }\n            aie.ProjectAssoc = _dbContext.ProjectEntity\n                .Where(r =&gt; r.Id == this.Project.Id)\n                .First();\n            _dbContext.SaveChanges();\n        }\n    }\n}\n</code></pre>\n\n<p><code>CIHEntities</code> is a Entity Framework Database.</p>\n\n<p>I would like to unit test the SaveInfo method but it shouldn't actually save to the Database. How Can this be done?</p>\n\n<p>Thanks</p>\n\n<p>Eric</p>\n"},{"tags":["unit-testing","tfs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13087884,"title":"What is the Connection between test case and unit test in TFS2012","body":"<p>Please help me to findout what is the relation between test cases and .net unit test? How we can uning the test cases to implement the unit testing in VS 2012? I am a new comer in .NET  please help me.</p>\n"},{"tags":["unit-testing","testing","rest","automated-tests"],"answer_count":9,"favorite_count":5,"up_vote_count":15,"down_vote_count":0,"view_count":14869,"score":15,"question_id":414875,"title":"Best tool/framework for testing a RESTful service","body":"<p>I'm looking for a framework or tool for testing RESTful services.  This seems like it shouldn't be hard, but the tools that I've found thus far assume things about my service that they probably shouldn't.</p>\n\n<p>What would be great is something that could make a request (like, HTTP POST) and then compare the result with an expected result.  I know that you can string together a few tools to do this but there has to be something easier since HTTP is super basic.</p>\n"},{"tags":[".net","unit-testing","internet-explorer","automation","watin"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1504,"score":4,"question_id":2464877,"title":"ASP.NET Unit Testing - WatiN and Windows 7 / Internet Explorer 8","body":"<p>Any tricks in getting WatiN to run on Win7/IE8?</p>\n\n<p>My code:</p>\n\n<pre><code>    browser = new IE();\n    browser.GoTo(\"http://testserver\");\n    browser.TextField(Find.ByName(\"txtUser\")).TypeText(\"tyndall\");\n</code></pre>\n\n<p>The third line never really runs and I get an error back:</p>\n\n<p>System.Runtime.InteropServices.COMException : The RPC server is unavailable. (Exception from HRESULT: 0x800706BA)</p>\n\n<p>The second line seems to run. IE8 appears and is navigated to the correct URL.</p>\n"},{"tags":["unit-testing","testing","tdd","mocking"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1432,"score":2,"question_id":396442,"title":"Strategies for Using Mock Objects when Unit Testing DAOs","body":"<p>I am curious what strategies folks have found for unit testing a data access class that does not involve loading (and presumably unloading) a real database for each test method? Are you using mock objects to represent the database connection? If so, are you required to pass the mock object into every method-under-test, and thus forcing the API to require a real db connection as a parameter to every method? Or, are you passing a mock object into the constructor at setup()?</p>\n\n<p>I have a class that is implementing what I believe is a Data Mapper (or maybe gateway) pattern. It is the class responsible for encapsulating SQL and returning (or saving) \"business objects\". The rest of the code can interact with this mapper layer and the business objects, with total disregard for the persistence model. This code needs to have/maintain, or just know about, a live db connection in the real system. Emulating this under test is tricky.</p>\n\n<p>The problem is how to unit test one of these mapper classes. The practice for creating a unit test under xUnit that I have seen most often is using the setup() method of the test to instantiate the SUT (system under test), usually your object that you're testing, and store it in a local variable in the test class. Then each of your test methods, interact with a unique instance of that SUT.</p>\n\n<p>The assumption though is that whatever you're doing in the setup() method will presumably be replicated somewhere in your real code. So, you have to think about the setup process as \"is this something I will want to repeatedly reproduce every time I need to use this object in the real world.\" If I am passing a db connection into the mapper's constructor in the setup that's fine, but doesn't that mean I'll have to pass a live db connection into the mapper object's constructor every time I want to really use one? Imagine that you'll have all kinds of places where you need to retrieve or store a business object and that to use a data mapper object, you need to pass in the db connection every time?</p>\n\n<p>In my case, I am trying to establish tests for these data mapper objects that achieve the following:</p>\n\n<ol>\n<li>Do not require the database connection object to be instantiated and passed into every method of the mapper class.</li>\n<li>Do not require that the test case either connect to a real db or create a real, but \"test\", db on the fly for each test method.</li>\n</ol>\n\n<p>I have basically seen two suggestions, pass the connection object as a parameter (which I have already addressed) or extend the SUT class just for the test and override whatever db connection setup process you have in the real world to use a mock system instead.</p>\n\n<p>I am curious if anyone else is facing these issues, with any language, and what you have done to solve them? Maybe there is something obvious that I am missing?</p>\n"},{"tags":["unit-testing","testing","phpunit"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":41,"score":3,"question_id":13074551,"title":"Why are specific asserts better than generic asserts, in PHPUnit?","body":"<p>Please excuse my ignorance; I am still new to the unit testing realm.</p>\n\n<p>Can someone explain why..</p>\n\n<p><code>$this-&gt;assertGreaterThan( 2, $result );</code></p>\n\n<p>..is better than..</p>\n\n<p><code>$this-&gt;assertTrue( $result &gt; 2 );</code></p>\n\n<p>..(and likewise, all the other specific assert methods)?</p>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","java-ee","aop","spring-aop"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":14,"score":2,"question_id":13083074,"title":"Spring AbstractTransactionalDataSourceSpringContextTests - does not rollback data after test a method","body":"<blockquote>\n  <p>After running a unit test, data is not getting deleted from the\n  database.</p>\n</blockquote>\n\n<p>I have a problem with either AOP configuration or spring.\nI have written a unit test that extends class AbstractTransactionalDataSourceSpringContextTests.\nFor AOP configuration I have made a point-cut on the methods that are going to be tested , I have given this advice to the point-cut: </p>\n\n<pre><code>&lt;tx:advice id=\"newTxAdvice\" transaction-manager=\"transactionManager\"&gt;\n    &lt;tx:attributes&gt;\n        &lt;tx:method name=\"*\" propagation=\"REQUIRES_NEW\" /&gt;\n    &lt;/tx:attributes&gt;\n&lt;/tx:advice&gt;\n</code></pre>\n\n<p>please tell me why data is not getting deleted, any help will be appreciable.\nThanks.</p>\n"},{"tags":["ruby-on-rails","unit-testing","rake"],"answer_count":5,"favorite_count":8,"up_vote_count":9,"down_vote_count":0,"view_count":2671,"score":9,"question_id":2645022,"title":"Rails - Populate test database with development data","body":"<p>Is there any trivial way to copy the data from developmenet database into the test one? I know theres a way to copy schema and recreate database, but is there any rake task to populate test database with development one?</p>\n"},{"tags":["unit-testing","selenium","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13058768,"title":"Is it possible to use Selenium / PHPUnit outside the browser?","body":"<p>Right now this is my workflow to write tests for a website:</p>\n\n<ol>\n<li>Record using Selenium IDE plugin in Firefox</li>\n<li>Export Test Case As >> PHP (PHP Unit)</li>\n<li>Run the tests on a Windows machine that has PHPUnit installed as well as the Selenium extension for it using this command:</li>\n</ol>\n\n<p><code>phpunit --verbose --log-junit some\\path\\result.xml some\\path\\test.php</code></p>\n\n<p>What this command does is runs the test and saves the output (assertions and failures) in a log file called result.xml. And all has been good.</p>\n\n<p>But now I have run into a need to test a part of the site that involves flash and I am using an application called Arthropod to capture the requests and responses coming to and from the flash component on the site.</p>\n\n<p><strong>Is there any way I can get selenium to to capture the text that appears on this program's interface?</strong></p>\n"},{"tags":["android","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":229,"score":2,"question_id":2765672,"title":"IntentFilter for address book","body":"<p>I have a question regarding the creation of an <code>IntentFilter</code>. I'm currently writing JUnit-tests for an Android application and want to make use of <code>ActivityMonitors</code>. To be more specific: I want to  create an <code>ActivityMonitor</code> which listens for calls to the address book as our Application requests the user to choose a contact from the address book. So I want to mock this by using an <code>ActivityMonitor</code>. This is what I have done so far:</p>\n\n<pre><code>ActivityMonitor addressBookMonitor = null;\ntry {\n        addressBookMonitor = getInstrumentation().addMonitor(new IntentFilter(Intent.ACTION_PICK,\"content://contacts/people/\"), null, false);\n    } catch (MalformedMimeTypeException e) {\n        e.printStackTrace();\n    }\n//code to open the address book\nActivity addressBook = getInstrumentation().waitForMonitorWithTimeout(addressBookMonitor, 250);\nassertNotNull(addressBook);\n</code></pre>\n\n<p>The problem is, that the assertion always fails although I can see the address book opening in front of our application. Even increasing the timeout value doesn't help. This leads me to the assumption, that my <code>ActivityMonitor</code>/<code>IntentFilter</code> is set up with wrong values.</p>\n\n<p>Maybe someone can help?</p>\n"},{"tags":["unit-testing","continuous-integration","jasmine","fixtures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13019215,"title":"Error while integrating html with testacularjs","body":"<p>How do I integrate (html) fixtures with testacular?  Is there any recommendation for performing DOM based tests or is it an anti-pattern?</p>\n\n<p>Objective : I am trying to test a custom module which parses the DOM tree and creates a new data structure. The DOM tree can be dynamic (like contents of a html/markdown editor) and hence is not a good candidate for end to end testing </p>\n\n<p>Problem : I am trying to use jasmine-jquery for this DOM testing  and in my testacular.conf.js, I have the section to allow loading of html files into the browser.  </p>\n\n<pre>\n<code>\n// list of files / patterns to load in the browser\nfiles = [\n  JASMINE,\n  JASMINE_ADAPTER,\n  'test/spec/**/*.js',\n  'test/fixtures/*.html' **/* Needs to be included here to be served */**\n];\n</code>\n</pre>\n\n<p>However in my test runner on the command line, I get the following error message when I drop the html fixture(even before I write any jasmine-jquery code to load the fixture):</p>\n\n<pre>\n<code>\nChrome 22.0 **ERROR**\n    Uncaught SyntaxError: Unexpected token &lt; at /Users/myUser/myProject/test/fixtures/fixture_template.html:1 Chrome 22.0: Executed 0 of 0 ERROR (0.143 secs / 0 secs)\n</code>\n</pre>\n\n<p><em><strong>EDIT</em></strong> : Another way to ask the same question : How do I get testacular to serve html and not blow up the test runner?</p>\n\n<p>As I mentioned above, I need to include the 'test/fixtures/*.html\" in the config but the test runner just blows up.</p>\n"},{"tags":["android","unit-testing"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":4490,"score":2,"question_id":4577091,"title":"com.example.helloandroid.R.id cannot be resolved","body":"<p>I followed the <a href=\"http://developer.android.com/resources/tutorials/testing/helloandroid_test.html#CreateSetUp\" rel=\"nofollow\">Hello, Testing tutorial</a> to the letter.</p>\n\n<p>Yet, the following line produces a \"com.example.helloandroid.R.id cannot be resolved\" error:</p>\n\n<pre><code>  mView = (TextView) mActivity.findViewById(com.example.helloandroid.R.id.textview);\n</code></pre>\n\n<p>Eclipse amazingly suggests 2 quick fixes:</p>\n\n<ol>\n<li>Create field 'id' in type 'R'</li>\n<li>Create constant 'id' in type 'R'</li>\n</ol>\n\n<p>Can you help me understand what these fixes mean? Are these really the correct fixes? (why didn't the tutorial provide them, too?)</p>\n"},{"tags":["ios","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13080487,"title":"iOS: how to do indeterminate asynchronous unit test with GHUnit?","body":"<p>I use GHUnit for unit testing, and wrote subclasses of GHAsyncTestCase, but in my case, the web service is not like an active service request where you send request and expect to receive an answer, instead of this, my web service is a passive type service where you subscribe to a channel then it can send you message, but there is no guarantee about how frequent the server pushes messages to subscribers, in this case, say 50 secs after subscribing, server pushes a message and another message after 30 secs, then should I do:</p>\n\n<pre><code>[self waitForStatus:kGHUnitWaitStatusSuccess timeout:50.0f];\n</code></pre>\n\n<p>to verify the first message, or is there any smart way for doing this?</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":180,"score":1,"question_id":9526932,"title":"PHPunit: How to mock a method that has a parameter AND a returned value","body":"<p>Using PHPUnit, I wonder if we can mock an object to test if a method is called with an expected parameter, <strong>and</strong> a returned value?</p>\n\n<p>In the <a href=\"http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.mock-objects\" rel=\"nofollow\">doc</a>, there are examples with passing parameter, or returned value, but not <strong>both</strong>...</p>\n\n<p>I tried using this:</p>\n\n<pre>\n// My object to test\n$hoard = new Hoard();\n// Mock objects used as parameters\n$item = $this->getMock('Item');\n$user = $this->getMock('User', array('removeItem'));\n...\n$user->expects($this->once())\n     ->method('removeItem')\n     ->with($this->equalTo($item));\n$this->assertTrue($hoard->removeItemFromUser($item, $user));\n</pre>\n\n<p><strong>My assertion fails</strong> because Hoard::removeItemFromUser() should return the returned value of User::removeItem(), which is true.</p>\n\n<pre>\n$user->expects($this->once())\n     ->method('removeItem')\n     ->with($this->equalTo($item), $this->returnValue(true));\n$this->assertTrue($hoard->removeItemFromUser($item, $user));\n</pre>\n\n<p>Also fails with the following message: \"<strong>Parameter count for invocation User::removeItem(Mock_Item_767aa2db Object (...)) is too low.</strong>\"</p>\n\n<pre>\n$user->expects($this->once())\n     ->method('removeItem')\n     ->with($this->equalTo($item))\n     ->with($this->returnValue(true));\n$this->assertTrue($hoard->removeItemFromUser($item, $user));\n</pre>\n\n<p>Also fails with the following message: \"<strong>PHPUnit_Framework_Exception: Parameter matcher is already defined, cannot redefine</strong>\"</p>\n\n<p>What should I do to test this method correctly.</p>\n\n<p>thank you.</p>\n"},{"tags":["c#","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13079067,"title":"How do you nunit TestFixture in same cs file as project?","body":"<p>In class they taught us to add a test fixture to the same namespace as the project we're testing. For example:</p>\n\n<pre><code>namespace Project\n{\n    class Decrypt : Cipher\n    {\n        public string Execute()\n        {\n            //Code here\n        }\n    }\n    [TestFixture]\n    {\n        [Test]\n        public void test1()\n        {\n            //Code here\n        }\n    }\n}\n</code></pre>\n\n<p>I noticed in the c# menu on my uni computer, there was a 'Test' section (I couldn't get it to run there either, I don't know how). On this old 32b computer there isn't. I've installed NUnit-2.6.2.msi but when I try to run it, it says \"Unable to find a version of runtime to run this application\"\nSo I think I have two problems: </p>\n\n<ul>\n<li><p>installing Nunit (I already have referenced the .dlls from my project separately)</p></li>\n<li><p>using Nunit (even on a computer with it installed properly)</p></li>\n</ul>\n"},{"tags":["python","django","unit-testing","testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":67,"score":5,"question_id":13073281,"title":"How to mock python's datetime.now() in a class method for unit testing?","body":"<p>I'm trying to write tests for a class that has methods like:</p>\n\n<pre><code>import datetime\nimport pytz\n\nclass MyClass:\n    def get_now(self, timezone):\n        return datetime.datetime.now(timezone)\n\n    def do_many_things(self, tz_string='Europe/London'):\n        tz = pytz.timezone(tz_string)\n        localtime_now = self.get_now(tz)\n        ...\n        return things\n</code></pre>\n\n<p>I want to test it, and to do so I need to make sure that the <code>datetime.datetime.now()</code> call returns something predictable.</p>\n\n<p>I've been reading lots of examples of using <a href=\"http://www.voidspace.org.uk/python/mock/\">Mock</a> in tests, but haven't found anything quite like what I need, and I can't work out how to use it in my tests.</p>\n\n<p>I separated the <code>get_now()</code> method out in case it's easier to mock that, instead of <code>datetime.datetime.now()</code>, but I'm still stumped. Any thoughts on how to write UnitTests for this using Mock? (This is all in Django, fwiw; I'm not sure if this makes a difference in this case.)</p>\n"},{"tags":["python","unit-testing","sockets"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":120,"score":3,"question_id":12925227,"title":"How to kill a socket in unit tests for reconnect test","body":"<p>I'm trying to test some code that reconnects to a server after a disconnect. This works perfectly fine outside the tests, but it fails to acknowledge that the socket has disconnected when running the tests.</p>\n\n<p>I'm using a Gevent Stream Server to mock a real listening server:</p>\n\n<pre><code>import gevent.server\nfrom gevent import queue\n\n\nclass TestServer(gevent.server.StreamServer):\n\n    def __init__(self, *args, **kwargs):\n        super(TestServer, self).__init__(*args, **kwargs)\n        self.sockets = {}\n\n    def handle(self, socket, address):\n        self.sockets[address] = (socket, queue.Queue())\n        socket.sendall('testing the connection\\r\\n')\n        gevent.spawn(self.recv, address)\n\n    def recv(self, address):\n        socket = self.sockets[address][0]\n        queue = self.sockets[address][1]\n        print 'Connection accepted %s:%d' % address\n        try:\n            for data in socket.recv(1024):\n                queue.put(data)\n        except:\n            pass\n\n    def murder(self):\n        self.stop()\n        for sock in self.sockets.iteritems():\n            print sock\n            sock[1][0].shutdown(socket.SHUT_RDWR)\n            sock[1][0].close()\n        self.sockets = {}\n\n\ndef run_server():\n    test_server = TestServer(('127.0.0.1', 10666))\n    test_server.start()\n    return test_server\n</code></pre>\n\n<p>And my test looks like this:</p>\n\n<pre><code>def test_can_reconnect(self):\n    test_server = run_server()\n    client_config = {'host': '127.0.0.1', 'port': 10666}\n    client = Connection('test client', client_config, get_config())\n    client.connect()\n    assert client.socket_connected\n    test_server.murder()\n    #time.sleep(4) #tried sleeping. no dice.\n    assert not client.socket_connected\n    assert client.server_disconnect\n    test_server = run_server()\n    client.reconnect()\n    assert client.socket_connected\n</code></pre>\n\n<p>It fails at <code>assert not client.socket_connected</code>.</p>\n\n<p>I detect for \"not data\" during recv. If it's None, then I set some variables so that other code can decide whether or not to reconnect (don't reconnect if it was a user_disconnect and so on). This behavior works and has always worked for me in the past, I've just never tried to make a test for it until now. Is there something odd with socket connections and local function scopes or something? it's like the connection still exists even after stopping the server.</p>\n\n<p>The code I'm trying to test is open: <a href=\"https://github.com/kyleterry/tenyks.git\" rel=\"nofollow\">https://github.com/kyleterry/tenyks.git</a></p>\n\n<p>If you run the tests, you will see the one I'm trying to fix fail.</p>\n"},{"tags":["javascript","unit-testing","javascript-events","buster.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13077477,"title":"How to fire DOM events when testing with busterjs","body":"<p>How can I trigger DOM events on an element when running in an headless browser. I know I could use jquerys <code>trigger</code> but as I dont used for this project I don't want to use it in the test too.</p>\n"},{"tags":["unit-testing","maven-2","testng","junit4","maven-surefire-plugin"],"answer_count":4,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":5268,"score":11,"question_id":1232853,"title":"How to execute JUnit and TestNG tests in same project using maven-surefire-plugin?","body":"<p>Right now I have both type of tests but when I say \"mvn test\" it only executes TestNG tests and not Junit. I want to execute both one after another. Any Idea ?</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":36,"score":4,"question_id":13076506,"title":"Looking for assertURLEquals","body":"<p>During a unittest I would like to compare a generated URL with a static one defined in the test. For this comparison it would be good to have a TestCase.assertURLEqual or similar which would let you compare two URLs in string format and result in True if all query and fragment components were present and equal but not necessarily in order.</p>\n\n<p>Before I go implement this myself, is this feature around already?</p>\n"},{"tags":["spring","unit-testing","spring-mvc","spring-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":317,"score":0,"question_id":11649036,"title":"@ExceptionHandler not working with Spring MVC 3.1 unit test","body":"<p>I'm able to do nearly all of the unit test on my Spring MVC controller by instantiating the object outside of the normal servlet context. But I would like to be able to run some tests to insure that my object serialization is working properly, headers are being generated, etc.</p>\n\n<p>To run a test inside the servlet context, I create a modified context file so that various beans are NOT constructed, then I create mocked versions of those beans in my test case using EasyMock. I then invoke my handler with code like this, and get most of what I need from the MockHttpServletResponse.</p>\n\n<p>I think this gets the essence of it:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"file:root-context.xml\",\n                                    \"file:junit-servlet-context.xml\" } )\n\npublic class HomeControllerConfigHandlerHttp {\n@Autowired\nprivate RequestMappingHandlerAdapter handlerAdapter;\n\n@Autowired\nprivate RequestMappingHandlerMapping handlerMapping;\n    ... //miscellaneous setup\npublic void someTest() throws Exception\n{\n    MockHttpServletRequest request = new MockHttpServletRequest();\n    request.setMethod(\"GET\");\n    request.setRequestURI(\"/config\");\n    request.addParameter(\"foo\", \"bar\");\n    request.addParameter(\"device\", \"oakmont\");\n    MockHttpServletResponse response = new MockHttpServletResponse();\n    Object handler = handlerMapping.getHandler(request).getHandler();\n    replay(dblient);\n    expect(serviceClient.checkDevice(\"oakmont\")).andReturn( true );\n    serviceClient.destroy();\n    replay(serviceClient);\n    ModelAndView modelAndView = handlerAdapter.handle(request, response, handler);\n    String content = new String( response.getContentAsByteArray() );\n    Assert.assertEquals(content, \"Expected configuration\");\n    String content_type = response.getHeader(\"Content-type\");\n    Assert.assertEquals( content_type, \"text/plain\");\n    int status = response.getStatus();\n    Assert.assertEquals(status,  200 );\n</code></pre>\n\n<p>This does what I expect it to do, but there is one catch. I do a lot of error handling in my controller with an @ExceptionHandler. It is an easy way to back out of an error case in any handler, and it gives me a consistent way of exposing errors.</p>\n\n<p>The @ExceptionHandler works fine in normal servlet deployment, but in this unit test mockup it does not get invoked when I throw an exception. Stepping into the Spring code is a bit of a challenge for me, I'm new to it and so I get lost pretty quickly. However, it looks like in the normal servlet environment, there is an exception handler that looks for an annotated handler. When running under SpringJUnit4ClassRunner, the exception isn't processed the same way.</p>\n\n<p>If there is a way to fix this, I'd like to do it. I've avoided spring-test-mvc because of a lack of pioneer spirit, but if someone tells me that it can manage this just fine, I'll try that instead.</p>\n\n<p>The contents of my junit-servlet-context.xml file are nearly identical to the servlet-context.xml file created by the Spring Template MVC wizard. The only difference is the addition of an exclude-filter that is used to prevent instantiation of a @Component that creates a few singletons used by my controller.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/mvc\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:beans=\"http://www.springframework.org/schema/beans\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n&lt;!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure --&gt;\n\n&lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n&lt;annotation-driven /&gt;\n\n&lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory --&gt;\n&lt;resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n&lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\n&lt;beans:bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;beans:property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n    &lt;beans:property name=\"suffix\" value=\".jsp\" /&gt;\n&lt;/beans:bean&gt;\n&lt;context:component-scan base-package=\"com.cisco.onplus.home.dmz\" &gt;\n&lt;context:exclude-filter type=\"regex\" expression=\".*InitDatabase.*\"/&gt;\n&lt;/context:component-scan&gt;   \n&lt;/beans:beans&gt;\n</code></pre>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":42,"score":4,"question_id":13036641,"title":"Is it possible to have multiple fixture files per model in rails 3.2?","body":"<p>In Rails 3.2, is it possible to have multiple fixture files for a given ActiveRecord object? </p>\n\n<p>The client is requiring the test data be written in fixtures but also wants them to be manageable. I'd like to split up the fixtures a bit by introducing a 2nd set that the originals would include/require/render whatever. </p>\n\n<p>I haven't been able to find anything via Google on how to do it and fixtures are not my cup of tea. Thanks in advance.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13003377,"title":"How to test with deferred execution?","body":"<p>There is a <code>IEnumerable&lt;IDomainInterface&gt;</code> passed into my class and I want to test whether a specific method was called for every item:</p>\n\n<pre><code>// in class\nvar result = _items.SelectMany (x =&gt; x.Get (something));\n\n// in test\ndomainInterfaceMock.Expect(x =&gt; x.Get (something));\n</code></pre>\n\n<p>The test only passes if I append <code>ToArray()</code> to the <code>SelectMany()</code> statement...</p>\n\n<p>How should I deal with such situations?</p>\n"},{"tags":["unit-testing","monotouch","nunit","touch.unit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13071839,"title":"MonoTouch and NUnitLite: what is the \"Host\" setting for?","body":"<p>I'm using NUnitLite quite a lot but have always been wondering what the host settings are about in the options menu. The options aren't explained in the documentation here: </p>\n\n<p><a href=\"http://docs.xamarin.com/ios/tutorials/Unit_Testing\" rel=\"nofollow\">http://docs.xamarin.com/ios/tutorials/Unit_Testing</a></p>\n\n<p>Can somebody shed some light on this feature that might maybe change my life forever, if only I knew about it? </p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13074303,"title":"Mock void Method That Sets Private Setter in Implementations","body":"<p>I have an interface that looks like this...</p>\n\n<pre><code>public interface ITempFileNameBuilder\n{\n    string DirectoryPath { get; }\n\n    string FileName { get; }\n\n    void GenerateNewFileName();\n}\n</code></pre>\n\n<p>... and I want to mock the <code>GenerateNewFileName</code> method so that it sets the <code>FileName</code> property to something new. I know this is an odd request because obviously there is no <code>set</code> defined in the interface because it's declared as <code>private set;</code> in the two implementations. I did that so you <strong>must</strong> call <code>GenerateNewFileName</code> to set the <code>FileName</code> property to something new.</p>\n\n<p>Is this possible?</p>\n\n<h2>Edit</h2>\n\n<p>Here is the unit of work I'm trying to test.</p>\n\n<pre><code>public void StartRecording(string claimNo, string ip_no, string ip_name, IWaveIn input, Stream writer)\n{\n    if (this.IsRecording)\n    {\n        return;\n    }\n\n    if (_input != null)\n    {\n        _input.Dispose();\n    }\n    _input = input;\n\n    _input.WaveFormat = _waveFormat;\n    _input.DataAvailable += (s, args) =&gt;\n    {\n        _writer.Write(args.Buffer, 0, args.BytesRecorded);\n        byte[] buffer = args.Buffer;\n        for (int index = 0; index &lt; args.BytesRecorded; index += 2)\n        {\n            short sample = (short)((buffer[index + 1] &lt;&lt; 8) | buffer[index + 0]);\n            float sample32 = sample / 32768f;\n            _aggregator.Add(sample32);\n        }\n\n        OnDataAvailable(args);\n    };\n    _input.RecordingStopped += (s, args) =&gt;\n    {\n        _input.Dispose();\n        _writer.Dispose();\n\n        OnRecordingStopped(args);\n    };\n\n    if (this.CurrentRecording != null)\n    {\n        _tempFileNameBuilder.GenerateNewFileName();\n    }\n\n    this.Recordings.Add(new RecordingTrack(claimNo, ip_no, ip_name,\n        _tempFileNameBuilder.FileName,\n        _recordingDeployer,\n        _recordingCompressor));\n    if (this.MicrophoneLevel == default(float))\n    {\n        this.MicrophoneLevel = .75f;\n    }\n\n    _aggregator.Reset();\n    _writer = writer;\n\n    _input.StartRecording();\n    this.IsRecording = true;\n}\n</code></pre>\n\n<p>And the goal of this unit test is to ensure that the <code>FileName</code> of the <code>CurrentRecording</code> and <code>LastRecording</code> are in fact different. It's a regression test based on a bug we found earlier. The bug was happening because the <code>FileName</code> property on the <code>RecordingTrack</code> was not being <strong>set</strong> but rather was just returning the current <code>FileName</code> from the <code>ITempFileNameBuilder</code> instance and so the idea is to ensure that <code>GenerateNewFileName</code> was called <strong>and</strong> ensure that the <strong>set</strong> for the <code>TempFileName</code> on the recording track was called.</p>\n\n<p>However, the <strong>set</strong> on the <code>TempFileName</code> on the <code>RecordingTrack</code> is private too, it's done in the constructor, so maybe this isn't really a unit test and more so an integration test?</p>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13073419,"title":"JUnit: Run one test with different configurations","body":"<p>I have 2 test methods, and i need to run them with different configurations</p>\n\n<pre><code>myTest() {\n    .....\n    .....\n}\n\n@Test\nmyTest_c1() {\n    setConf1();\n    myTest();\n}\n\n@Test\nmyTest_c2() {\n    setConf2();\n    myTest();\n}\n\n//------------------\n\nnextTest() {\n    .....\n    .....\n}\n\n@Test\nnextTest_c1() {\n    setConf1();\n    nextTest();\n}\n\n@Test\nnextTest_c2() {\n    setConf2();\n    nextTest();\n}\n</code></pre>\n\n<p>I cannot run them both from one config (as in code below) because i need separate methods for tosca execution.</p>\n\n<pre><code>@Test\ntests_c1() {\n    setConf1();\n    myTest()\n    nextTest();\n}\n</code></pre>\n\n<p>I don't want to write those 2 methods to run each test, how can i solve this?</p>\n\n<p>First i thought to write custom annotation</p>\n\n<pre><code>@Test\n@RunWithBothConf\nmyTest() {\n   ....\n}\n</code></pre>\n\n<p>But maybe there are any other solutions for this? </p>\n"},{"tags":["java","unit-testing","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13061581,"title":"Reusing mock behavior / best practice in Mockito?","body":"<p>I'll preface this with the background that I am very green and don't have much experience with testing in general, and have never used a mocking framework before.</p>\n\n<p>I am writing unit tests for code that hits a lot of different web services, which I have mocked.  Many of my tests verify the result of a call where all of my service calls are successful except a call to ServiceX.  My first instinct was to set up happy-path behavior for all mocks in a @Before block and then modify the mock behavior for each test.</p>\n\n<pre><code>@Before\npublic void init(){\n    when(serviceA.doSomething()).thenReturn(true);\n    when(serviceB.doSomething()).thenReturn(true);\n    when(serviceC.doSomething()).thenReturn(true);\n    when(serviceD.doSomething()).thenReturn(true);\n    when(serviceE.doSomething()).thenReturn(true);\n}\n\n@Test\npublic void testDoBusinessSuccess(){\n    String result = businessLogic.doBusiness();\n    assertThat(result, is(\"success\"));\n}\n\n@Test\npublic void testDoBusinessFailureWhenServiceAFails(){\n    when(serviceA.doSomething()).thenReturn(false);\n\n    String result = businessLogic.doBusiness();\n    assertThat(result, is(\"service A is down!\"));\n}\n\n@Test\npublic void testDoBusinessFailureWhenServiceBFails(){\n    when(serviceB.doSomething()).thenReturn(false);\n\n...\n</code></pre>\n\n<p>which makes each test case succinct, and it is easy to see what is being tested, since I only specify the behavior which deviates from the norm.  </p>\n\n<p>But I suspect that this is not how Mockito wants me to set up mock behaviors, because when I tried to verify that a failure in ServiceB means that ServiceC is never hit, I realized that my calls to <code>when(serviceC.doSomething())</code> in the @Before counted as invocations on serviceC.  That is, my <code>verifyZeroInteractions(serviceC)</code> always failed because I had called <code>when(serviceC.doSomething()).thenReturn(true)</code>, even when the test case never touched serviceC otherwise.</p>\n\n<p>So what is the best practice?  Am I better off just explicitly setting up the behavior for every mock in every test, even though I'd be repeating nearly the same 5 lines all over the place? </p>\n"},{"tags":["unit-testing","nunit","moq"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13072725,"title":"How to properly fake IQueryable<T> from Repository using Moq?","body":"<p>I have a Class that takes an IRepository in its constructor like this. </p>\n\n<pre><code>    public class UserService\n    {\n       public IRepository&lt;User&gt; _repo { get; set; }\n\n       public UserService(IRepository&lt;User&gt; repo = null)\n       {\n        _repo = repo ?? new UserRepository();\n       }\n</code></pre>\n\n<p>and has a method that looks like this</p>\n\n<pre><code>public bool IsUserActive(email string)\n{\n   //The method actually does more but to keep it simple lets imagine it does this\n   User user = _repo.Find(u =&gt; u.Email == email).First();\n   return user.IsActive;\n}\n</code></pre>\n\n<p>the IRepository looks like this.</p>\n\n<pre><code>public interface IRepository&lt;T&gt; : IDisposable where T : IEntity\n{\n    void InsertOrUpdate(T entity);\n    void Delete(T entity);\n    IQueryable&lt;T&gt; Find(Func&lt;T, bool&gt; query);\n    T Find(int id);\n    void Save();\n}\n</code></pre>\n\n<p>I would like to Test the IsUserActive method and make sure it retuns false it the IsActive field of the user is false and vice versa.</p>\n\n<p>I am try the following. </p>\n\n<pre><code>    [Test]\n    public void IsUserActive_EmailThatWillReturnInactiveUser_ReturnsFalse()\n    {\n        //Arrange\n        var fakeUserRepo = new Mock&lt;IRepository&lt;User&gt;&gt;();\n        var query = new Func&lt;User, bool&gt;(u =&gt; u.Email == \"AnyString\");\n        var listOfMatchingUsers = new List&lt;User&gt;() \n        {\n                    new User \n                    { \n                        Email = \"AnyString\", \n                        IsActive = False \n                    }\n        };\n\n        IQueryable&lt;User&gt; queryableUsers = listOfMatchingUsers.AsQueryable();\n\n        fakeUserRepo.Setup(r =&gt; r.Find(query)).Returns(queryableUsers);\n\n        var userService = new UserService(fakeUserRepo.Object);\n\n        //Act\n        var result = userService.IsUserActive(\"AnyString\");\n\n        //Assert\n        Assert.IsFalse(result);\n    }\n</code></pre>\n\n<p>When I run in NUnit I get the Error \"Sequence Contains No Elements\" on this line</p>\n\n<pre><code>var result = userService.IsUserActive(\"AnyString\");\n</code></pre>\n\n<p>Where am I going wrong?</p>\n"},{"tags":["unit-testing","scala","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":11871124,"title":"Mock not recognized in IntelliJ while using Scala","body":"<pre><code>@RunWith(classOf[MockitoJUnitRunner])\nclass ScalaTest {\n\n  var x  = mock[java.util.Map]\n  val y  = mock[ClassA]\n  val z  = mock[ClassB]\n}\n</code></pre>\n\n<p>No matter what dependencies I set in my pom file I am not able to get the Mock to work. The compiler just says cannot resolve the symbol <code>Mock</code> and <code>ClassOf</code>. I have shown my dependencies below:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.scalamock&lt;/groupId&gt;\n  &lt;artifactId&gt;scalamock-scalatest-support_${scala.version}&lt;/artifactId&gt;\n  &lt;version&gt;2.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.scalamock&lt;/groupId&gt;\n  &lt;artifactId&gt;scalamock-junit3-support_${scala.version}&lt;/artifactId&gt;\n  &lt;version&gt;2.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And the test dependency is:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.scalatest&lt;/groupId&gt;\n  &lt;artifactId&gt;scalatest_${scala.version}&lt;/artifactId&gt;\n  &lt;version&gt;2.0.M3&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n  &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n  &lt;version&gt;1.9.0&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>These are my imports:</p>\n\n<pre><code>import org.junit.{Test, Before}\nimport org.junit.runner.RunWith\nimport org.mockito.runners.MockitoJUnitRunner\n</code></pre>\n\n<p>Any suggestions??</p>\n"},{"tags":["sqlite","unit-testing","nhibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13069866,"title":"Prepopulating in memory SQLite database for Nhibernate testing","body":"<p>Currently, I have a unit test framework where I'm using a SQLite database in memory with NHibernate for unit testing. Each unit test runs in it's own session to ensure independence. For the most part, this works awesome, but as I'm approaching 150 tests, it's starting to run a little slow. The main reason for this, is that prior to each test I have to insert a good bit of data in the database.</p>\n\n<p>Basically my application is a workflow app, and we store alot of information about the workflow (number of steps, fields on each step, etc.) in the database. The application can't run unless this stuff is there, so it's required for my tests.</p>\n\n<p>At this point about 4 minutes of my total test time is spent on populating the database before each unit test. I'd love to make this population happen once per test execution, but since the in memory database is destroyed when the session is closed, I'm not sure how. Any suggestions?</p>\n"},{"tags":["java","unit-testing","junit","tdd","testng"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":13068954,"title":"considering NullPointerException as a unit test failure: is it good practice?","body":"<p>assume you have a unit test that contains these lines</p>\n\n<pre><code>assertNotNull(someVal);\nassertNotEmpty(someVal);\n</code></pre>\n\n<p>This obviously checks that someVal is not null and is populated with something.</p>\n\n<p>The question is, is the first line necessary and does it add anything to the test? Should we not just have the second line, and if it's null it will throw a null pointer exception which still indicates a failing unit test (but not a failing assertion).</p>\n\n<p>What's the best practice in such simple cases?</p>\n"},{"tags":["python","unit-testing","testing","subclass","stack-trace"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12583015,"title":"How can I hide my stack frames in a TestCase subclass?","body":"<p>I want to add a custom assert method to a <code>TestCase</code> subclass.  I tried to copy my implementation from the <code>unittest</code> module so that it would match the behaviour of the regular <code>TestCase</code> as closely as possible.  (I would prefer to just delegate to <code>self.assertEqual()</code> but this causes even more backtrace noise, see below.)  The <code>unittest</code> module seems to automatically hide some internal details of its implementation when reporting failed assertions.</p>\n\n<pre><code>import unittest\n\nclass MyTestCase(unittest.TestCase):\n    def assertLengthIsOne(self, sequence, msg=None):\n        if len(sequence) != 1:\n            msg = self._formatMessage(msg, \"length is not one\")\n            raise self.failureException(msg)\n\nclass TestFoo(MyTestCase):\n    seq = (1, 2, 3, 4, 5)\n\n    def test_stock_unittest_assertion(self):\n        self.assertEqual(len(self.seq), 1)\n\n    def test_custom_assertion(self):\n        self.assertLengthIsOne(self.seq)\n\n\nunittest.main()\n</code></pre>\n\n<p>The output of this is as such:</p>\n\n<pre><code>amoe@vuurvlieg $ python unittest-demo.py\nFF\n======================================================================\nFAIL: test_custom_assertion (__main__.TestFoo)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"unittest-demo.py\", line 16, in test_custom_assertion\n    self.assertLengthIsOne(self.seq)\n  File \"unittest-demo.py\", line 7, in assertLengthIsOne\n    raise self.failureException(msg)\nAssertionError: length is not one\n\n======================================================================\nFAIL: test_stock_unittest_assertion (__main__.TestFoo)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"unittest-demo.py\", line 13, in test_stock_unittest_assertion\n    self.assertEqual(len(self.seq), 1)\nAssertionError: 5 != 1\n\n----------------------------------------------------------------------\nRan 2 tests in 0.000s\n\nFAILED (failures=2)\n</code></pre>\n\n<p>Note that the custom assert method causes a stack trace with two frames, one inside the method itself, whereas the stock <code>unittest</code> method only has one frame, the relevant line in the user's code.  How can I apply this frame-hiding behaviour to my own method?</p>\n"},{"tags":["c#","visual-studio-2010","wcf","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13064946,"title":"Load Testing with async calls to WCF","body":"<p>I'm new when it comes to using VS2010's unit tests. I tried making a unit test that makes a  call to the WCF hosted. The code looks like this:</p>\n\n<pre><code>...\n[TestMethod]\npublic void TestMethod1()\n{\n   WcfClient client = new WcfClient(\"BasicHttpBinding_IWcf\");\n   client.GetDataCompleted += new EventHandler&lt;GetDataCompletedEventArgs&gt;(OnGetDataCompleted);\n   client.GetDataAsync(arg1, arg2);\n}\n\nvoid OnGetDataCompleted(object sender, GetDataCompletedEventArgs e)\n{\n   Assert.IfNull(e.Error);\n}\n\n...\n</code></pre>\n\n<p>It seems like it's never started or completed when I run it. I was thinking of adding this to a load test. Am I missing anything to test async calls to the WCF? I've heard of WCF Load Test in codeplex but I'll leave that for another time.</p>\n\n<p>a variation to peer's answer: <a href=\"http://justgeeks.blogspot.com/2010/05/unit-testing-asynchronous-calls-in.html\" rel=\"nofollow\">http://justgeeks.blogspot.com/2010/05/unit-testing-asynchronous-calls-in.html</a></p>\n"},{"tags":["ios","unit-testing","xsd","dtd","sentestingkit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13068416,"title":"How do I run a script from within an iOS unit test?","body":"<p>I've written a class for parsing a custom XML format, which can also output DTDs and XSDs for the format that it recognises.  We've got some example XML, and I'd like to write a test that confirms that the example XML is valid according to the produced DTD and XSD.  I've been doing this by hand using <code>xmllint</code>, but I can't see how to do that from within my unit test since <code>NSTask</code> is mission on iOS.  How do I run a script from within an iOS unit test?</p>\n"},{"tags":["c++","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":120,"score":2,"question_id":13064006,"title":"Testing constructor initialization list","body":"<p>I am working on a test which checks if all class attributes are initialized in a constructor.\nMy current solution works for non pointer attributes:</p>\n\n<pre><code>void CSplitVectorTest::TestConstructorInitialization()\n{\n    const size_t memorySize = sizeof(CSplitVector);\n    char* pBuffer1 = (char*) malloc(memorySize);\n    char* pBuffer2 = (char*) malloc(memorySize);\n    memset(pBuffer1,'?',memorySize);\n    memset(pBuffer2,'-',memorySize);\n    new(pBuffer1) CSplitVector;\n    new(pBuffer2) CSplitVector;\n    const bool bObjectsAreEqual = memcmp(pBuffer1,pBuffer2,memorySize)==0;\n    if (!TEST(bObjectsAreEqual))\n    {\n        COMMENT(\"Constructor initialization list not complete!\");\n    }\n    free(pBuffer1);\n    free(pBuffer2);\n}\n</code></pre>\n\n<p>Do you have an idea how could it be improved to test if pointers are initialized?</p>\n"},{"tags":["php","unit-testing","codeigniter","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13067989,"title":"Is there a way other than manually creating a CI mock when testing a library for CodeIgniter?","body":"<p>I am attempting to write a few unit tests for IonAuth, and as a first step I would like to test its public API.</p>\n\n<p>Since the library of course uses the CodeIgniter object quite extensively, I need a $ci object. How do I get this?</p>\n\n<ul>\n<li>Make a new repository altogether, with the entire CI directory included, and install Ion_auth in there and write tests out there.</li>\n<li>Or just mock the CI object, and supply it to the tested functions.</li>\n</ul>\n\n<p>If I am going with the latter option, I need a mock. I have noticed in the phpunit docs that I can use the <code>getMock()</code> function when the class is available and get an automated mock. But since CI is not directly available in the IonAuth library repo, what are my options? Do I need to manually define a Mock CI object (and the other CI library objects as necessary) and establish a fake API?</p>\n"},{"tags":["android","unit-testing","robolectric","android-dialogfragment"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13067735,"title":"Testing DialogFragments with Robolectric","body":"<p>I have a couple of questions about testing <code>DialogFragment</code> classes with Robolectric, as I've encountered a total lack of information on this topic in Internet.</p>\n\n<ol>\n<li>What are the right arguments to pass to <code>onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</code>?</li>\n<li><p>I have trouble passing arguments to <code>DialogFragment</code>, I'm using the following approach:</p>\n\n<p>activity = new Activity();\n        dialog = new DialogFragment();\n        Bundle bundle = new Bundle();\n        dialog.setArguments(bundle);\n        FragmentManager fm = activity.getSupportFragmentManager();\n        FragmentTransaction ft = fm.beginTransaction();\n        ft.add(dialog, \"fragment\");\n        ft.commit();</p></li>\n</ol>\n\n<p>Whenever the code tries to access arguments it crashes with a <code>NullPointerException</code>. </p>\n\n<p>Will highly appreciate any ideas on these topics.</p>\n\n<p><strong>P.S.</strong> Sorry for the poor code formatting, just cannot get it right, think Stackoverflow team should consider some work on it.</p>\n"},{"tags":["silverlight","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13067284,"title":"Issue with popup in Silverlight unit tests","body":"<p>I have a complex custom control, with has a function to resize and reposition itself according to the available space.</p>\n\n<p>The custom control contains a popup ui element, which works fine within the application.</p>\n\n<p>I've tried to write unit tests but the issue is that the rendering via the TestPanel does not seem to be the same as the productive rendering. </p>\n\n<p>I rely heavily on LayoutUpdate or Loaded events and they either get not fired or sometimes the sender object parameter in the respective event handler is just a nullpointer when running the stuff in unit tests.</p>\n\n<p>I also tried to call UpdateLayout() on the TestPanel. This improves the situation but still the rendering and layout update ist not correct.</p>\n\n<p>I suspect the popup ui element behaves strangely during unit tests (but this is just a guess).</p>\n\n<p>The question is if anybody had similar problems and has found a workaround? Are they any known limitations when it comes to rendering and the TestPanel? Unfortunately it seems there is hardly any documentation about Silverlight Unit Tests, which deals with such issues.</p>\n\n<p>Is there any other possiblity (out of the box) to test complex rendering stuff in Silverlight? To test this manually is a nightmare.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","unit-testing","nunit","async-await"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":13056716,"title":"Async unit tests not working as expected","body":"<p>I am using the latest version of NUnit (2.6.2) in Visual Studio 2012 using both resharper and the visual studio test runner. I have the follow sample tests in which I am attempting to verify that an exception is raised on an expected asynchronous method call.</p>\n\n<p>Unfortuantely, this doesn't seem to be working as expected. The first test <code>AsyncTaskCanceledSemiWorking</code> only works because i have the expectedexception attribute. The actual assert is completely ignored (as you can see by the ArgumentOutOfRange exception which is just a fake to get it to fail).</p>\n\n<p>The <code>AsyncTaskCanceledWorking</code> works fine, but doesnt test that the exception is thrown on a specified line, hence less useful.</p>\n\n<p>The third fails majestically with the below....</p>\n\n<pre><code>System.Threading.Tasks.TaskCanceledException : A task was canceled.\nException doesn't have a stacktrace\n</code></pre>\n\n<p>Any ideas on how I can test for the TaskCanceledException from a specific line would be very useful.</p>\n\n<p>Thanks</p>\n\n<pre><code>    [Test]\n    [ExpectedException(typeof(TaskCanceledException))]\n    public async Task AsyncTaskCanceledSemiWorking()\n    {\n        CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();\n        CancellationToken token = cancellationTokenSource.Token;\n\n        cancellationTokenSource.Cancel();\n\n        Assert.That(await LongRunningFunction(token), Throws.InstanceOf&lt;ArgumentOutOfRangeException&gt;());\n\n\n    }\n\n    [Test]\n    [ExpectedException(typeof(TaskCanceledException))]\n    public async Task AsyncTaskCanceledWorking()\n    {\n        CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();\n        CancellationToken token = cancellationTokenSource.Token;\n\n        cancellationTokenSource.Cancel();\n\n        int i = await LongRunningFunction(token);\n    } \n\n\n    [Test]\n    public async Task AsyncTaskCanceledFailed()\n    {\n        CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();\n        CancellationToken token = cancellationTokenSource.Token;\n\n        cancellationTokenSource.Cancel();\n\n        Assert.That(await LongRunningFunction(token), Throws.InstanceOf&lt;TaskCanceledException&gt;());\n\n    }\n\n    public async Task&lt;int&gt; LongRunningFunction(CancellationToken token)\n    {\n        token.ThrowIfCancellationRequested();\n\n        await Task.Delay(1000, token);\n\n        return 5;\n    } \n</code></pre>\n"},{"tags":["unit-testing",".net-4.0",".net-3.5","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13064489,"title":"Moq Release 4: What's the difference between NET35 and NET40","body":"<p>I am new to Moq and want to use the <a href=\"http://moq.googlecode.com/files/Moq.4.0.10827.Final.zip\" rel=\"nofollow\">latest Release</a>. In the download there are 3 variants, one for .NET 3.5 and two for .NET 4. What is the difference between the .NET versions? <strong>Does the 3.5 version miss any features compared to 4?</strong></p>\n\n<p>Note: The difference between the two version for .NET 4 are already <a href=\"http://stackoverflow.com/q/12104769/79485\">covered in this question</a> and not asked here.</p>\n"},{"tags":["java","unit-testing","maven-2","spring-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":3188,"score":9,"question_id":2699181,"title":"Unit Test in Maven requires access to the src/main/webapp Directory","body":"<p>I am trying to unit test a webapp that I am developing in Maven/Eclipse. It is a Spring MVC webapp, and I need some unit tests to test my model controller.</p>\n\n<p>To do this, I need to use my webapp config .xml files to inject the controller, however, all my configuration (and other associated files that the configs reference) are in the src/main/webapp directory (as per Maven convention) - there are a lot of files in here that i need to reference in my tests, but they are not available when running the test as they are not on the classpath (Maven only seems to be adding src/main/java, src/test/java, src/main/resources, src/test/resources to the classpath but not src/main/webapps)</p>\n\n<p>I do not want to have to copy my entire webapp in to my src/test/resources folder just for the purpose of testing - is there any other way to be able to access them?</p>\n\n<p>I can get around this by changing the Eclipse \"Run Configurations\" to include this folder on the classpath, but that will not work when running the tests from the command line?</p>\n\n<p>Has anyone else encountered this? is there a know solution?</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","unit-testing","mocking"],"answer_count":10,"favorite_count":7,"up_vote_count":38,"down_vote_count":0,"view_count":7294,"score":38,"question_id":1087351,"title":"How do you mock out the file system in C# for unit testing?","body":"<p>Are there any libraries or methods to mock out the file system in C# to write unit tests? In my current case I have methods that check whether certain file exists and read the creation date. I may need more than that in future.</p>\n"},{"tags":["wpf","unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12357568,"title":"How to mock DragEventArgs","body":"<p>I am trying to unit test this method that is called from my ViewModel:</p>\n\n<pre><code>  public virtual string[] ExtractFilePaths(DragEventArgs dragEventArgs)\n  {\n     string[] droppedPaths = null;\n\n     if (dragEventArgs.Data.GetDataPresent(DataFormats.FileDrop))\n     {\n        droppedPaths = dragEventArgs.Data.GetData(DataFormats.FileDrop, true) as string[];\n     }\n\n     return droppedPaths;\n  }\n</code></pre>\n\n<p>I have this method wired up with Caliburn. I know it's a pretty simple method that almost exclusively uses framework classes, but I feel it still needs testing. The problem is, Moq cannot mock the DragEventArgs. Is there a way around this or should I just not bother testing this method?</p>\n"},{"tags":["python","unit-testing","import"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":222,"score":2,"question_id":4761041,"title":"Python import src modules when running tests","body":"<p>My source files are located under src and my test files are located under tests. When I want to run a test file, say python myTest.py, I get an import error: \"No module named ASourceModule.py\".</p>\n\n<p>How do I import all the modules from source needed to run my tests?</p>\n"},{"tags":["c++","unit-testing","tdd","googletest","cppunit"],"answer_count":3,"favorite_count":15,"up_vote_count":29,"down_vote_count":1,"view_count":2802,"score":28,"question_id":7922289,"title":"GoogleTest vs CppUnit: The facts","body":"<p>In the process of setting our C++ unit testing framework for the next years we shortlisted <strong>GoogleTest</strong> and <strong>CppUnit</strong>. I have some experience with both and my heavy preference is GoogleTest. Anyways to convince my boss I need some <strong>facts</strong> so I did some reading on the Internet, including the manuals, wiki pages and some of the sources. I came up with a list of GoogleTest advantages and a single CppUnit advantage(graphic test runners). Here they are ordered by <strong>perceived</strong> usefulness: </p>\n\n<ul>\n<li>INSTANTIATE_TEST_CASE_P to instantiate a test case with any set of parameters you want, including Cartesian products </li>\n<li>FRIEND_TEST for testing private class members(for all the legacy code) </li>\n<li>turning asserts into breakpoints </li>\n<li>non-fatal asserts </li>\n<li>\"out of the box\" googlemock integration </li>\n<li>automatic tests detection, no need to enumerate them</li>\n<li>tests can be disabled and enabled </li>\n<li>tests to run can be selected using name patterns </li>\n<li>value/type-parameterized tests </li>\n<li>user-defined predicate asserts </li>\n<li>death tests </li>\n<li>much richer set of asserts </li>\n<li>type asserts  </li>\n<li>asserting on subroutines </li>\n<li>additional debug info can be added to asserts using &lt;&lt;  </li>\n<li>RecordProperty emits last value of property to the XML output </li>\n<li>SCOPED_TRACE helps understand the context of an assertion failure coming from inside a sub-routine or loop. </li>\n<li>xUnit XML output, can be shown by Jenkins right away without a XSLT transformation in between </li>\n<li>supports custom types printers</li>\n<li>time consumed by test indication(I suspect this is also possible with CppUnit but I haven figured it out yet)   </li>\n<li>test event listener API (user-defined plug-ins) </li>\n<li>test shuffling </li>\n<li>no exceptions and RTTI </li>\n</ul>\n\n<p>Am I correct in assuming that all of the above are not supported by CppUnit? Is there an useful GoogleTest feature <strong>not available</strong> in CppUnit I am missing?  </p>\n\n<p>And last but not least: Are there any nice CppUnit features that GoogleTest <strong>lacks</strong>?   </p>\n\n<p>Thanks!</p>\n"},{"tags":["c++","unit-testing","cppunit","googletest","boost-test"],"answer_count":12,"favorite_count":37,"up_vote_count":44,"down_vote_count":0,"view_count":17944,"score":44,"question_id":242926,"title":"Comparison of c++ unit test frameworks","body":"<p>I know there are already a few questions regarding recomendations for c++ unit test frameworks, but all the answers did not help as they just recomend one of the frameworks but do not provide any information about a (feature) comparison.</p>\n\n<p>I think the most interesting frameworks are CppUnit, Boost and the new Google testing framework. Has anybody done any comparison yet?</p>\n"},{"tags":["xcode","unit-testing","ocunit","sentestingkit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13047546,"title":"XCode 4 Unit test: Is it possible to ignore certain test cases?","body":"<p>Is there a way of ignoring a specific test case without commenting it out?</p>\n\n<p>Some tests are written before the implementation exists, so before commiting any code I'd like to first flag these tests to be ignored so it doesn't appal any of my colleagues.</p>\n\n<p>Commenting them out results in loosing track of failing, incomplete tests.</p>\n"},{"tags":["unit-testing","visual-studio-2012","tfs2012"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":168,"score":1,"question_id":13048879,"title":"VS2012 & TFS2012 Unit Test major issues","body":"<p>We are using VS2012 and TFS2012 and write unit tests for our code. We want to report code coverage, and also using .config files in our unit tests for test appsettings, and also some other settings for logging, MS Enterprise library settings etc. etc. </p>\n\n<hr>\n\n<p><strong>App.config not working in new test framework</strong></p>\n\n<p>New test framework of MS should be great, but to me it is not so great at all.\nHow I'm i suppose to set some basic configuration in config files, when the new framework does not use config files anymore?</p>\n\n<p>We had a problem with mixed mode dlls, and found a fix: adding</p>\n\n<pre><code>&lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt; \n</code></pre>\n\n<p>to the app.config. But this did not work for our unit test project. Becuase config files are not there anymore. Searching the internet came up with a solution </p>\n\n<p>'<a href=\"http://www.diaryofaninja.com/blog/2012/09/13/net-20-mixed-mode-assemblies-in-visual-studio-net-45-test-projects#.UFFl43wdOYw.dotnetkicks\" rel=\"nofollow\">Problems with .Net 2.0 Mixed Mode Assemblies inside Visual Studio .Net 4.5 Test Projects</a>'</p>\n\n<p>This means editing a file of Visual Studio 11 itself in the program files directory, not a great solution i think....</p>\n\n<p>And how about some basic appsetting? How am I supposed to set this?</p>\n\n<hr>\n\n<p><strong>Do not use the .testSettings file</strong></p>\n\n<p>Using the old .testsettings file is also not recommended by MS, becuase then the old test framework is used. And if I use the .testsettings file, i cannot setup Code Coverage on my tfs2012 build service. </p>\n\n<p>Another issue is that we have code that need a dll (system.data.sqlite.dll), but only at runtime the unit test code needs this dll. So a reference is not needed. We fixed this by using the Deployment tab on the testsettings file. But in the new framework, you should not use the testsettings file. You have the [deploymentitem] attribute if you need files. But the deploymentitem attribute can only be used on a [testmethod] not on a [testinitialize] or [assemblyinitialize] method. But our code needs the dll in the [testinitialize] method. So there is no way to get the dll in place. </p>\n\n<p>Just copy it with File.Copy in the [assemblyinitialize] (or testinitialize) method does not work.</p>\n\n<p>Adding the dll as file to the project, and set the 'copy to output directory' to 'Copy Always' as mentioned in '<a href=\"http://msdn.microsoft.com/en-us/library/ee256991.aspx\" rel=\"nofollow\">Configuring Unit Tests by using a .runsettings File</a>' also does not work at all.</p>\n\n<p>The (really not great) solution for this is to add the dll as a reference, then instantiate a class and do nothting with it. This way the dll is needed otherwise it is not building, and thus the dll will deploy itself to the right directories.</p>\n\n<hr>\n\n<p><strong>how to solve my problem(s)???</strong>\n- I want to use config files in my unit test.\n- I want to deploy some files that are neede in the 'assemblyinitialise' and/or 'classinitialize' methods.\n- I want Code Coverage on my TFS2012 nightly build enabled.</p>\n"},{"tags":["php","unit-testing","mocking","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13050263,"title":"Is it possible to use mocking on a procedural (non-oo) function?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4725194/php-override-existing-function\">PHP - override existing function</a>  </p>\n</blockquote>\n\n\n\n<p>I want to use mocking to unit test some of my functions that have external dependencies. </p>\n\n<p>So here goes... Below is a simplified model of what I'm working with. A lot of the code I have inherited is written in this way, so I would like to be able to write some simple tests without having to rewrite if possible:</p>\n\n<pre><code>function display_tasks($id)\n{\n    $tasks = call_some_function_that_runs_a_database_query($id);\n\n    $html = \"&lt;some html&gt;\";\n\n    foreach ($tasks as $task)\n    {\n        // Some operations here\n    }\n\n    $html .= \"&lt;/some html&gt;\";\n\n    return $html;\n}\n</code></pre>\n\n<p>The code that my function is calling is not wrapped in an object, so I am having trouble putting the various examples into practice, as 99% of the examples on the internet are based on object-oriented code. Is it even possible to mock procedural functions directly from PHPunit?</p>\n\n<p>I would like to be able to mock out whatever <code>call_some_function_that_runs_a_database_query</code> is returning. I have had a go at using the built-in PHPunit mocking methods, but doing this doesn't override the result from the original call in my function.</p>\n\n<p>Any help or examples would be really appreciated.</p>\n"},{"tags":["visual-studio","web-services","unit-testing","debugging","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12056316,"title":"How to run a test while attached to a process in Visual Studio","body":"<p>I'm trying to debug some web services. I have a number of integration tests setup. I want to attach the debugger to my web process and then execute one of my tests. The problem is Visual Studio doesn't seem to allow me to run a test while I'm already attached to a process. Is there any way around this? The only way I've been able to do it is set a breakpoint in the test prior to calling the webservice, debug the unit test, and then once it hits the breakpoint attach the debugger to my webservice process. That's too many steps.</p>\n"},{"tags":["visual-studio","unit-testing","testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12867798,"title":"UI Tests Visual Studio 2012","body":"<p>I am recording tests in visual studio 2012 for one of my project, it recorded the first one and after that I paused generated a method and after resuming and while generating code for this it says Coded UI Test Builder \"Value cannot be null parameter name:Key\" </p>\n\n<p>Does anyone know whats the problem ?</p>\n"},{"tags":["unit-testing","visual-studio-2012","test-explorer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12964198,"title":"Use Multiple Filters in VS 2012 test explorer","body":"<p>I would like to filter on multiple criteria in Visual Studio 2012 test explorer search filter box.\nI would like to get tests with trait \"A\" OR \"B\"\nI have tried several versons of the below with no luck:\n Trait:\"Integration\"|\"UnitTest\" Trait:\"Integration\"|Trait:\"UnitTest\"</p>\n\n<p>Searching for 1 trait alone works just fine.\nI have loaded the latest VS 2012 CTP, that is why I can search by trait.</p>\n"},{"tags":["visual-studio-2010","unit-testing","visual-studio-2012","load-testing","visual-studio-team-system"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":86,"score":2,"question_id":12729202,"title":"Unable to run unit/webperformance/load test remotely after installing Visual Studio 2012","body":"<p>After installing Visual Studio 2012 for testing, I can not run tests remotely (using remote test controller) from Visual Studio 2010. I start test from Visual Studio 2010 because our dev team have not migrated yet, and because our test rig is also still using VS 2010 Test Agents &amp; Controller (2010 &amp; 2012 version are incompatible)</p>\n\n<p>The run is still pending.\n<img src=\"http://i.stack.imgur.com/jn6FB.png\" alt=\"pending\"></p>\n\n<p>After enabling Logs on Test Controller, I have this message (also in EventLog)</p>\n\n<pre><code>E, 1360, 4, 2012/10/04, 15:40:02.080, FR-VMRD-CTRL\\QTController.exe, ControllerSpooledJob.AddMessage: Failed calling event listener \n    Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer`1[Microsoft.VisualStudio.TestTools.Controller.IControllerEvents]: System.Runtime.Remoting.RemotingException: Le serveur a rencontré une erreur interne. Pour plus d'informations, désactivez customErrors dans le fichier .config du serveur.\n\n    Server stack trace: \n\n    Exception rethrown at [0]: \n       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)\n       at Microsoft.VisualStudio.TestTools.Controller.IControllerEvents.ControllerEvent(TestMessage report)\n       at Microsoft.VisualStudio.TestTools.Controller.ControllerSpooledJob.&lt;&gt;c__DisplayClass6.&lt;AddMessage&gt;b__3(IControllerEvents eventListener)\n       at Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer`1.InvokeAsRemoteUser(Action`1 invoke)\n       at Microsoft.VisualStudio.TestTools.Controller.ControllerSpooledJob.AddMessage(TestMessage message) \n</code></pre>\n\n<p>The Test Rig is unchanged and there are no errors on another machine without VS2012.</p>\n\n<p>Is there any way to solve this ?</p>\n"},{"tags":["unit-testing","visual-studio-2012","coded-ui-tests"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":169,"score":4,"question_id":12891370,"title":"Visual Studio 2012 Coded UI Testing of Web Application - Code coverage","body":"<p>I have a web application. I am using VS 2012 Coded UI for testing the web application. I have recorded the test and running it, and it works fine. But the code coverage window gives code coverage of the test project only, it doesnt give code coverage of the website project and other dll project which is referred in the web project.</p>\n\n<p>I have added the testsetting file in the solution and selected the same.</p>\n\n<p>Any clue? </p>\n"},{"tags":["unit-testing","node.js","mocha"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":186,"score":0,"question_id":10753288,"title":"How to specify test directory for mocha?","body":"<p><a href=\"http://visionmedia.github.com/mocha/\" rel=\"nofollow\">Mocha</a> tries to find test files under <code>test</code> by default, how to specify another dir, e.g. <code>server-test</code>?</p>\n"},{"tags":["java","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13057422,"title":"code block after the new operator in Java JUnit code","body":"<p>This is the sample JUnit test code included in JUNIT4. It shows two cases: the type safe way and the dynamic way. I tried to use the type safe way. </p>\n\n<pre><code>import junit.framework.Test;\nimport junit.framework.TestCase;\nimport junit.framework.TestSuite;\n\n/**\n * Some simple tests.\n */\npublic class SimpleTest extends TestCase {\n    protected int fValue1;\n    protected int fValue2;\n\n    SimpleTest(String string)\n    {\n        super(string);\n    }\n\n    @Override\n    protected void setUp() {\n        fValue1 = 2;\n        fValue2 = 3;\n    }\n\n    public static Test suite() {\n\n          /*\n           * the type safe way\n           */\n          TestSuite suite= new TestSuite();\n          suite.addTest(\n              new SimpleTest(\"add\") {\n                   protected void runTest() { testAdd(); }\n              }\n          );\n\n          suite.addTest(\n              new SimpleTest(\"testDivideByZero\") {\n                   protected void runTest() { testDivideByZero(); }\n              }\n          );\n          return suite;\n    }\n\n    ...\n\n    public static void main(String[] args) {\n        junit.textui.TestRunner.run(suite());\n    }\n}\n</code></pre>\n\n<p>I'm not sure about this code snippet. </p>\n\n<pre><code>suite.addTest(\n    new SimpleTest(\"add\") {\n        protected void runTest() { testAdd(); }\n        }\n    );\n</code></pre>\n\n<ul>\n<li>How does new Simple(\"add\") {...} works? I mean, how code block can follow the new operator?</li>\n<li>Why {...} block is needed? I tried without it, and I got no compilation/runtime errors.</li>\n</ul>\n"},{"tags":[".net","unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13053977,"title":"How do I call a predicate passed as a parameter in Moq?","body":"<p>I've got an interface which has a method named:</p>\n\n<pre><code>IEnumerable&lt;string&gt; GetFilesInADirectoryWhere(\n     string directory, \n     string wildcard, \n     Predicate&lt;string&gt; filter);\n</code></pre>\n\n<p>I want to <code>Setup</code> this method and actually <strong>call</strong> the <code>filter</code>.  So I declared it like this:</p>\n\n<pre><code>myMock.Setup( x =&gt; x.GetFilesInADirectoryWhere(\n    @\"My Folder\", \n    @\"FooFile*.*\", \n    It.IsAny&lt;Predicate&lt;string&gt;&gt;()))\n\n    .Returns((Predicate&lt;string&gt; filter) =&gt;  \n        cannedFileNames.Where(filename=&gt;filter(filename)));\n</code></pre>\n\n<p>This compiles, but when this mocked method is called, I get the following runtime exception:</p>\n\n<pre><code>    SetUp : System.Reflection.TargetParameterCountException : Parameter count mismatch.\n       at System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\n       at System.Delegate.DynamicInvokeImpl(Object[] args)\n       at Moq.Extensions.InvokePreserveStack(Delegate del, Object[] args)\n       at Moq.MethodCallReturn`2.Execute(ICallContext call)\n       at Moq.Interceptor.Intercept(ICallContext invocation)\n       at Moq.Proxy.CastleProxyFactory.Interceptor.Intercept(IInvocation invocation)\n       at Castle.DynamicProxy.AbstractInvocation.Proceed()\n       at Castle.Proxies.IDiskProxy.GetFilesInADirectoryWhere(String directory, String filter, Predicate`1 predicate)\n</code></pre>\n\n<p>Any idea what I'm doing wrong?</p>\n"},{"tags":["c#","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":76,"score":7,"question_id":13057040,"title":"Holding a Value in Unit tests","body":"<p>I have a Question for you guys.I have 2 unit tests which are calling webservices .The value that one unit-test returns should be used for another unit test method</p>\n\n<p>Example   </p>\n\n<pre><code>namespace TestProject1\n{\n    public class UnitTest1\n    {\n        String TID = string.empty;\n\n        public void test1\n        {\n           //calling webservices and code\n\n           Assert.AreNotEqual(HoID, hID);\n           TID = hID;\n        }\n\n        public void test2\n        {\n           //calling webservices and code            \n           string HID = TID  // I need the TID value from the Above testcase here\n\n           Assert.AreNotEqual(HID, hID);            \n        }\n    }\n}\n</code></pre>\n\n<p>How can i store a value in one unittest and use that value in another unittest.</p>\n"},{"tags":["c++","unit-testing","iostream"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":13056799,"title":"Unit testing operator<< in C++","body":"<p>I'm trying to figure out a nice way to unit test my implementation of the <code>operator&lt;&lt;</code> in C++. I have a class which implements the operator, and given an instance with a specific state, I'd like to check that the output is what I want it to be.</p>\n\n<p>This is my code (the header file):</p>\n\n<pre><code>class Date {\n    virtual int year() const { return 1970; };\n    virtual int month() const { return 1; };\n    virtual int day() const { return 1; };\n    friend  std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const Date &amp;d);\n};\n\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const Date &amp;d) {\n    os &lt;&lt; d.year() &lt;&lt; \"-\" &lt;&lt; d.month() &lt;&lt; \"-\" &lt;&lt; d.day();\n    return os;\n};\n</code></pre>\n\n<p>Now, in my unit test method, I could just do <code>Date d; cout &lt;&lt; d;</code> and verify when I run the tests that the output is correct. However, I'd much rather programmatically verify this, so I don't have to look at the test output more than at the final report (which hopefully says \"0 failed tests!\").</p>\n\n<p>I'm fairly new with C++, so I've never really used streams for anything but input and output.</p>\n\n<p>How do I accomplish this?</p>\n"},{"tags":["c#","unit-testing","db4o"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13054680,"title":"Db4o database for automatic tests","body":"<p>we are using Db4o in our project.</p>\n\n<p>I have some automatic tests where is tested persistence of objects.\nThe problem is, I can't open/create the database twice.\nI have two helper methods for geting the object container. But when the method is called second time the \"ArgumentException: Configuration already used.\" is thrown. I closed and disposed the previous objectcontainer ofcourse.</p>\n\n<p>What I do wrong?</p>\n\n<p><strong>CODE:</strong></p>\n\n<pre><code>public static IObjectContainer GetEmptyTestingDatabase() {\n    var tempDir = Environment.GetFolderPath(Environment.SpecialFolder.InternetCache);\n    string dbFilePath = Path.Combine(tempDir, \"UNIT-TESTING.db4o\");\n    if (File.Exists(dbFilePath)) {\n        File.Delete(dbFilePath);\n    }\n\n    var cfg = Db4oFactory.Configure();\n    cfg.Add(new TransparentPersistenceSupport(new DeactivatingRollbackStrategy()));\n    cfg.Add(new TransparentActivationSupport());\n\n    var db = Db4oFactory.OpenFile(cfg, dbFilePath);\n    return db;\n}\npublic static IObjectContainer GetMemoryDatabase() {\n    string dbFileName = Guid.NewGuid().ToString().ToString();\n\n    var cfg = Db4oFactory.Configure();\n    cfg.Storage = new Db4objects.Db4o.IO.PagingMemoryStorage();\n    cfg.Add(new TransparentPersistenceSupport(new DeactivatingRollbackStrategy()));\n    cfg.Add(new TransparentActivationSupport());\n\n    var db = Db4oFactory.OpenFile(cfg, dbFileName);\n    return db;\n}\n</code></pre>\n"},{"tags":["ruby","unit-testing","rspec","mocking","tdd"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13052650,"title":"How do I mock %x in a test?","body":"<p>I've got something like this : </p>\n\n<pre><code>class Something\n  def some_method\n    %x{xyz}\n  end\nend\n</code></pre>\n\n<p>And in the spec :</p>\n\n<pre><code>describe Something do\n  describe \"#some_method\" do\n    it \"should execute xyz command in a subshell\" do\n      x = Something.new\n      #What should come here?\n      x.some_method\n    end\n  end\nend\n</code></pre>\n\n<p>I know how I can mock \"system\" . But my question is specific to \"%x\" . So how to mock %x ?</p>\n"},{"tags":["unit-testing","moles","stub"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12827698,"title":"Create a Partial Stub in Microsoft Moles","body":"<p>I am pulling my hair out with this one.  I have looked and cannot find a simple, clear example of creating and using a partial stub with Microsoft Moles.  Maybe I'm missing somethimg, or have my code architected poorly, but I can't seem to get this to work.</p>\n\n<p>Here's my class (simplified):</p>\n\n<pre><code>public class AccountService : IAccountService {\n        private readonly webServiceProxy IExternalWebServiceProxy;\n\n    public AccountService(IExternalWebServiceProxy webServiceProxy) {\n        this.webServiceProxy = webServiceProxy;\n    }\n\n    public List&lt;AccountModel&gt; GetAccounts(string customerId) {\n         var returnList = new List&lt;AccountModel&gt;();\n         var xmlResponse = webServiceProxy.GetAllCustomerAccounts(customerId);\n\n         var accountNodes = xmlResponse.SelectNodes(\"//AccountNodes\");\n            if (accountNodes != null)\n            {\n                foreach (XmlNode node in accountNodes)\n                {\n                    var account = this.MapAccountFromXml(node);\n\n                    if (!string.IsNullOrEmpty(account.AccountNumber))\n                    {\n                        returnList.Add(account);\n                    }\n                }\n            }\n\n            return returnList;\n    }\n\n    public AccountModel MapAccountFromXml(XmlNode node) {\n        if (!IsValidAccount(node) {\n            return null;\n        }\n\n        // This performs a lot of XML manipulation getting nodes based on attributes \n        // and mapping them to the various properties of the AccountModel. It's messy \n        // and I didn't want it inline with the other code.\n\n        return populatedAccountModel;\n    {\n\n    public bool IsValidAccount(XmlNode node) \n    {\n        var taxSelectValue = node.SelectSingleNode(\"//FORMAT/Field[@taxSelect='1']\").First().Value;\n        var accountStatus = // similar to first line in that it gets a single node using a specific XPath\n        var maturityDate = // similar to first line in that it gets a single node using a specific XPath\n        var maturityValue = // similar to first line in that it gets a single node using a specific XPath\n\n        return taxSelectValue != string.Empty &amp;&amp; taxSelectValue != \"0\" &amp;&amp; (accountStatusValue != \"CL\" || (maturityDate.Year &gt;= DateTime.Now.AddYears(-1).Year));\n    }\n}\n</code></pre>\n\n<p>What I want to do is test my GetAccounts() method. I can stub out the IExternalWebServiceProxy call and return fake XML, but I have internal calls happening in my service since my GetAccounts() method calls MapAccountFromXml() which in turn calls IsValidAccount().</p>\n\n<p>Perhaps the solution is to not worry about breaking out the long and involved MapAccountFromXml() and IsValidAccount() code and just put them inline into the GetAccount() call, but I would rather leave them broken out for code readability.</p>\n\n<p>I have my Moles assembly created, and know I can create a stub version of my class like this</p>\n\n<pre><code>var stubWebService = SIExternalWebServiceProxy {\n       GetAllCustomerAccounts = delegate {\n            return SomeHelper.GetFakeXmlDocument();\n       }\n}\n\nvar stubAccountService = new SAccountService() { callsBase = true; }\n</code></pre>\n\n<p>My problem is I don't know how to then override the internal calls to MapAccountFromXml and IsValidAccount and I don't want my Unit Test to be testing thos methods, I'd like to isolate GetAccounts for the test.  I read somewhere the methods need to be virtual to be overriden in a partial stub, but could not find anything that then showed how to create a stub that overrides a few methods while calling the base for the one I want to test.</p>\n"},{"tags":["java","unit-testing","maven","war","stringtemplate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13054564,"title":"Loading WAR resources during unit test","body":"<p>(The context is a Maven JavaEE project that is deployed as a WAR.)\n<p>My application class loads resources (using the StringTemplate 3.2.1 library) from a package in the <code>src/main/resources</code> directory. - This works like a charm, because the application class files and resources all end up in a subdirectory of <code>WEB-INF/classes</code>. The <code>new FileInputStream(path)</code> inside StringTemplate can find the resources using a simple relative path.\n<p>When testing my class using JUnit this simple setup does not work: Unit tests run from the <code>test-classes</code> directory, and the relative path then points to the wrong location (which is typically populated by resources from <code>src/test/resources</code>).\n<p>How can I pass StringTemplate a relative path that will work in both environments?</p>\n"},{"tags":["java","eclipse","unit-testing","junit","jndi"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":138,"score":6,"question_id":13052944,"title":"Unit Testing Dilemma: Using a JNDI data source without running JBoss or Spring","body":"<h2>Problem Statement</h2>\n\n<p>I want to be able to run junit tests on methods that connect to a database.</p>\n\n<h2>Current setup</h2>\n\n<p><b>Eclipse Java EE IDE</b> – Java code is using no framework. The developers (me included) want more robust testing of current legacy code BEFORE attempting to move the code into a Spring framework so that we can prove along the way that the behavior is still correct. </p>\n\n<p><b>JBoss 4.2</b> – Version limitation by vendor software (<b>Adobe LiveCycle ES2</b>); Our Java web application uses this setup of JBoss to run and makes use of the Adobe LiveCycle API.</p>\n\n<p><i>We have been unable to successfully run the vendor configured JBoss within Eclipse</i> – we have spent weeks attempting this, including contacting the company that provides our support for the configuration of JBoss for Adobe LiveCycle.  Supposedly the problem is a memory limitation issue with settings in Eclipse, but changing the memory settings has thus far failed in a successful JBoss server start within Eclipse.  For now, attempting to get JBoss to run inside of Eclipse is on hold.</p>\n\n<p>The database connection is defined in a JNDI data source that JBoss loads on start up.  Both our web application and Adobe LiveCycle need to create connections to this data source.</p>\n\n<h2>Code</h2>\n\n<p>I am glossing over error checking and class structure in this code snippet to focus on the heart of the matter.  Hopefully that does not cause problems for others.  Text in square brackets is not actual text.</p>\n\n<p>Our code to create the connection is something like this:</p>\n\n<pre><code>Properties props = new Properties();\nFileInputStream in = null;\nin = new FileInputStream(System.getProperty(\"[Properties File Alias]\"));\nprops.load(in);\nString dsName = props.getProperty(“[JNDI data source name here]”); \nInitialContext jndiCntx = new InitialContext();\nDataSource ds = (DataSource) jndiCntx.lookup(dsName);\nDs.getConnection();\n</code></pre>\n\n<p>I want to be able to test methods dependent upon this code without making any changes to it.</p>\n\n<p>Reference to properties file alias in properties-service.xml file:</p>\n\n<pre><code>  &lt;!-- ==================================================================== --&gt;\n  &lt;!-- System Properties Service                                            --&gt;\n  &lt;!-- ==================================================================== --&gt;\n\n  &lt;!-- Allows rich access to system properties.--&gt;\n\n&lt;mbean code=\"org.jboss.varia.property.SystemPropertiesService\" \n name=\"jboss:type=Service,name=SystemProperties\"&gt;\n  &lt;attribute name=\"Properties\"&gt;\n    [Folder Alias]=[filepath1]\n    [Properties File Alias]=[filepath2]\n  &lt;/attribute&gt;\n&lt;/mbean&gt;\n</code></pre>\n\n<p>Snippet from properties file located at filepath2</p>\n\n<pre><code>[JNDI data source name]=java:/[JNDI data source name]\n</code></pre>\n\n<p>The JNDI xml file for this data source is set up like this:</p>\n\n<pre><code>&lt;datasources&gt;\n  &lt;local-tx-datasource&gt;\n    &lt;jndi-name&gt;[JNDI data source name here]&lt;/jndi-name&gt;\n    &lt;connection-url&gt;jdbc:teradata://[url]/database=[database name]&lt;/connection-url&gt;\n    &lt;driver-class&gt;com.teradata.jdbc.TeraDriver&lt;/driver-class&gt;\n    &lt;user-name&gt;[user name]&lt;/user-name&gt;\n    &lt;password&gt;[password]&lt;/password&gt;\n    &lt;!-- sql to call on an existing pooled connection when it is obtained from pool --&gt;\n    &lt;check-valid-connection-sql&gt;SELECT 1+1&lt;/check-valid-connection-sql&gt;\n  &lt;/local-tx-datasource&gt;\n&lt;/datasources&gt;\n</code></pre>\n\n<h2>My thoughts of where the solution may be</h2>\n\n<p>Is there something I can do in a @BeforeClass method in order to make the properties the above code is looking for available without JBoss?  Maybe somehow using the setProperty method of the java.util.Properties class?  I would also like to use the same JNDI xml file that JBoss reads from, if possible, in order to reduce duplicate configuration settings.  </p>\n\n<p>So far all of my research ends with the advice “Use Spring”, but I don’t think we’re ready to open that can of worms yet. I am not an expert in JBoss, but if more details of our JBoss setup are needed for a helpful answer, I will do my best to get them, though I will likely need some pointers on where to look.</p>\n\n<p><strong>Stackoverflow Research references:</strong><br/>\n<a href=\"http://stackoverflow.com/questions/9696195/jndi-lookup-in-junit-using-spring\">Jndi lookup in junit using spring</a> <br/>\n<a href=\"http://stackoverflow.com/questions/1615417/out-of-container-jndi-data-source\">Out of container JNDI data source</a> <br/>\n<strong>Other research references:</strong><br/>\n<a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html\" rel=\"nofollow\">http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html</a> <br/>\n<a href=\"http://docs.oracle.com/javase/jndi/tutorial/basics/prepare/initial.html\" rel=\"nofollow\">http://docs.oracle.com/javase/jndi/tutorial/basics/prepare/initial.html</a> <br/></p>\n"},{"tags":["django","unit-testing","testing","django-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13039358,"title":"Django testing json dump view","body":"<p>Hi I have a view like so:</p>\n\n<pre><code>def AjaxPopulate(request):\n    colour = request.GET.get('colour_id')\n    if colour is None:\n        return HttpResponseBadRequest()\n\n    qs = Thing.objects.select_related()\n    things = get_list_or_404(qs, colour=colour)\n    data = []\n    for x in things:\n        data.append({\n            'id': x.id,\n            'name': unicode(x),\n        })\n    return HttpResponse(simplejson.dumps(data), mimetype='application/json'\n</code></pre>\n\n<p>which is hooked into this url:</p>\n\n<pre><code>url(r'^ajax_populate/$', 'colours.views.AjaxPopulate', name='ajax_populate'),\n</code></pre>\n\n<p>in my test I have:</p>\n\n<pre><code>def setUp(self):\n    self.client = Client()\n    user = User.objects.create_superuser('foo', 'myemail@test.com', 'bar')\n    colour1 = Colour.objects.create(colour='Green')\n    thing1 = Thing.objects.create(name='Leaf', colour=colour1, description='foo')\n\ndef test_ajax_populate(self):\n    response = self.client.get('/colours/ajax_populate/', {'colour_id': 1}) \n    self.assertEqual(response.status_code, 200)\n</code></pre>\n\n<p>However, I am getting a <code>AssertionError: 404 != 200</code> error. </p>\n\n<p>What am I doing wrong?</p>\n\n<p>Any help much appreciated. </p>\n"},{"tags":["django","unit-testing","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13034946,"title":"Django - getting user objects in tests","body":"<p>I have a models.py like so:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\n\n# everything has a colour...\nclass Colour(models.Model):\n    colour = models.CharField(max_length=100)\n\n    def __unicode__(self):\n        return self.colour\n\n\n# a thing can have a colour...\nclass Thing(models.Model):\n    name = models.CharField(max_length=155)\n    colour = models.ForeignKey(Colour)\n    description = models.CharField(max_length=255)\n\n    def __unicode__(self):\n        return self.name\n\n\n# a user can save his choices\nclass UserLikes(models.Model):\n    user = models.ForeignKey(User)\n    colour = models.ForeignKey(Colour)\n    thing = models.ForeignKey(Thing)\n\n    class Meta:\n        verbose_name_plural = \"User Likes\"\n\n    def __unicode__(self):\n        return '%d - %s' % (self.pk, self.user)\n</code></pre>\n\n<p>And in my views:</p>\n\n<pre><code>def ThingPicker(request):\n    if request.method == 'POST':\n        form = ThingForm(request.POST)\n        if form.is_valid():\n            colour = form.cleaned_data['colour']\n            thing = form.cleaned_data['thing']\n            likes = UserLikes(user=request.user, colour=colour, thing=thing)\n            likes.save()\n            return HttpResponseRedirect('/profile/')\n        else:\n            return render_to_response('thing_picker.html', {\n                'form': form,\n            }, RequestContext(request))\n    else:\n        form = ThingForm()\n        return render_to_response('thing_picker.html', {\n            'form': form,\n        }, RequestContext(request))\n</code></pre>\n\n<p>And in my tests.py I want to do something like this (<strong>EDITED</strong>):</p>\n\n<pre><code>class ViewTests(TestCase):\n    def setUp(self):\n        self.client = Client()      \n\n    def test_thingpicker(self):\n        User.objects.create_superuser('foo', 'myemail@test.com', 'bar')\n        self.client.login(username='foo', password='bar') # request.user is now user foo\n\n        response = self.client.post('/colours/things/', {'colour': 1, 'thing': 2})\n        userlike = UserLikes.objects.get(pk=1)\n        self.assertEqual(userlike.colour_id, 1)\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>DoesNotExist: UserLikes matching query does not exist.\n</code></pre>\n\n<p>If I try with the test client in shell (<strong>EDITED</strong>):</p>\n\n<pre><code>&gt;&gt;&gt;  c = Client()\n&gt;&gt;&gt;  user1 = User.objects.create_superuser('foo', 'myemail@test.com', 'bar')\n&gt;&gt;&gt;  c.login(username='foo', password='bar')\n&gt;&gt;&gt;  c.post('/colours/things/', {'user': user1, 'colour': 1, 'thing': 2})\n&gt;&gt;&gt;  userlike = UserLikes.objects.get(pk=1)\n&gt;&gt;&gt;  userlike.colour_id\n1L\n</code></pre>\n\n<p>I get he expected result.</p>\n\n<p>What am I doing wrong here?</p>\n\n<p>Any help much appreciated.</p>\n"},{"tags":["javascript","unit-testing","private","qunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":9615597,"title":"While unit testing I frequently require to test internal (private) logic, what is the best practice for this?","body":"<p>I believe everyone encounters a case when there's necessity to test internal wiring of the class/object. I know that in compiled languages this could be done through conditional compiling. Is this what I should do for JavaScript as well? What's the usual way to accomplish such task? Maybe I should just treat the class/object as a Black Box and only test it's outcomes?</p>\n"},{"tags":[".net","unit-testing","tdd","private"],"answer_count":24,"favorite_count":48,"up_vote_count":184,"down_vote_count":0,"view_count":52542,"score":184,"question_id":250692,"title":"How do you unit test private methods?","body":"<p>I'm building a class library that will have some public &amp; private methods. I want to be able to unit test the private methods (mostly while developing, but also it could be useful for future refactoring).</p>\n\n<p>What is the best way to do this?</p>\n"},{"tags":["unit-testing","tfsbuild","tfs2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13052374,"title":"Where to put 'useLegacyV2RuntimeActivationPolicy' for build in TFS2012","body":"<p>While i'm locally get the error in a unit test:</p>\n\n<pre><code>Mixed mode assembly is built against version 'v2.0.50727' of \nthe runtime and cannot be loaded in the 4.0 runtime without \nadditional configuration information\n</code></pre>\n\n<p>And the solution is to add </p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;\n        &lt;supportedRuntime version=\"v4.0\"/&gt;\n   &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>to the config file located in </p>\n\n<pre><code>c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Common7\\IDE\n\\CommonExtensions\\Microsoft\\TestWindow\\vstest.executionengine.x86.exe.config\n</code></pre>\n\n<p>This still is going wrong on our TFS2012 build server. I also added the startup tags to the file on the TFS2012, but the build server reports the error.</p>\n\n<p>How do I get this to work on a unit test project (using the new unit test framework of VS2012 &amp; TFS2012) in a build definition?</p>\n"},{"tags":["perl","unit-testing","code-coverage"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":9934816,"title":"Can I include an argument within a code reference when calling Test::Output::stdout_like()","body":"<p>I'm writing unit tests using Test::More and Test::Output.  I use Test::More to validate the return values and I plan to use Test::Output to validate the stdout produced by my subroutines. </p>\n\n<p>I am attempting to write test cases for a subroutine whose stdout is dependent on the arguments sent. Test::Output::stdout_like(code reference, regexp, test description) looks to have the functionality I want, however I am struggling to construct a code reference which contains an argument.  </p>\n\n<p>I presume this is a common practice within Perl unit testing scripts.  Can anyone offer an example?   </p>\n\n<p>Side note, thanks to Kurt W. Leucht for his Perl unit testing introduction: <a href=\"http://stackoverflow.com/questions/533553/perl-build-unit-testing-code-coverage-a-complete-working-example\">Perl build, unit testing, code coverage: A complete working example</a></p>\n"},{"tags":["unit-testing","mocking","phpunit"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13049993,"title":"PHP library similar to REST-driver in Java","body":"<p>I found this <a href=\"https://github.com/rest-driver/rest-driver/wiki/Client-driver\" rel=\"nofollow\">little library</a> to be perfect solution for my problem. It allows you to stub REST service responses easily. \nNow i need to replicate the same set of test cases in PHP version of our library. Do you know any similar library/framework in PHP?</p>\n"},{"tags":["javascript","unit-testing","qunit"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13049359,"title":"Is it possible to test height and width of controls on a page","body":"<p>When using multiple browsers some controls appear out of the range of a page and some seems scattered using different browsers. Is there any way to write unit tests for all these layouts. I am exploring jquery testing with qunit, js-test-driver. But i don't know how to do this.</p>\n"},{"tags":[".net","xml","linq","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":352,"score":1,"question_id":7318157,"title":"Best way to compare XElement objects","body":"<p>in a unit test I'm comparing an XElement object with the one I expect. The method I use is to invoke .ToString() on the XElement object and compare it witha hard-codeds string value. This method turned out to be quite uncomfortable since I always have to pay attention on the formattin in the string.</p>\n\n<p>I checked out the XElement.DeepEquals() method but for any reason it doesn't help.</p>\n\n<p>Does anyone has an idea what is the best method I should use?</p>\n\n<p>Thanx in advance,\nllasarov</p>\n"},{"tags":["unit-testing","salesforce"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13047544,"title":"Failure in pkb_Controller when running the unit tests on SalesForce","body":"<p>We are attempting to deploy some code into a production SalesForce instance. But deployement fail because already installed third party packages are failing the unit test requirements. We get the following error on all existing unit tests.</p>\n\n<blockquote>\n  <p>line -1, column -1: Previous load of class failed: pkb_Controller: line 1, column 24: Entity is not org-accessible</p>\n</blockquote>\n\n<p>Can you please advice us on how to fix this? And what is causing this error?</p>\n"},{"tags":["c++","unit-testing","teamcity","multiple-projects"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13034149,"title":"Unit-test multiple c++ projects and export results to TeamCity","body":"<p>I am introducing unit testing with Google Tests in my c++ projects. </p>\n\n<p>The projects are organized in multiple solutions, each solution containing one (main) project and its dependencies. There is also one build solution, containing all projects.</p>\n\n<p>Each project will add its own [project]_test project to the solution. </p>\n\n<p>The unit tests can be run locally for each project, for each solution.</p>\n\n<p>The build solution will have to be built using TeamCity.</p>\n\n<p><strong>The problem:</strong></p>\n\n<p>Google Tests provide an xml output that can be imported by TeamCity, to get test reports. But TeamCity is only capable of importing a single xml. </p>\n\n<p>Manufacturing a compound xml from all the reports from different projects changes the formatting expected by TeamCity, so the xml is no longer read.</p>\n\n<p>So far I have been unable to find anything that is capable of running multiple c++ projects, running tests, and obtaining test results, in TeamCity.</p>\n\n<p>What are my options ? Thank you.</p>\n"},{"tags":["c#","unit-testing","junit","nunit"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13012850,"title":"I always use xUnit's Assert.True(bool condition) for all of my unit tests. Is there a reason why I should use other asserts too?","body":"<p>I am unable to understand what other Asserts can offer that Assert.True cannot and why we should even use other Asserts in our unit tests.</p>\n"},{"tags":["android","unit-testing","mocking","android-activity"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13035134,"title":"Fastest way to create a mock Activity for testing","body":"<p>I'm currently unit-testing a library. In certain classes, I need to pass an activity as parameter in some static methods. The library itself contains no activities. I need to somehow obtain an instance of a mock activity to use in each individual method test. </p>\n\n<p>I've already read the <a href=\"http://developer.android.com/tools/testing/activity_testing.html\" rel=\"nofollow\">Activity Testing Tutorial</a> and the <a href=\"http://developer.android.com/tools/testing/testing_android.html\" rel=\"nofollow\">Testing Fundamentals</a> section. Most of what it is said there only makes sense if you are about to test Activities already existing in the project to be tested. But I just need a mock one to do things like showing dialogs and run short tasks in the Ui thread.</p>\n\n<p>What would the fastest, simplest way to achieve this? Should I create the mock activity in my test project and also provide xml layout resources for the dummy UI? </p>\n\n<hr>\n\n<p>UPDATE<br>\nSince I've not found any way of creating a mock activity automatically I decided to provide it by myself. I've created inside the test project a dummy activity doing nothing and provided a dummy layout via xml. Then I coded my test extending <code>ActivityInstrumentationTestCase2</code>:<br></p>\n\n<pre><code>    public class LibraryTest extends ActivityInstrumentationTestCase2&lt;MockActivity&gt; {\n\n        public LibraryTest(String name) {\n            super(MockActivity.class);\n        }\n\n        protected void setUp() throws Exception {\n            super.setUp();\n        }\n\n        public void testAMethodFromLibrary() {\n            fail(\"Not yet implemented\");\n        }\n    }\n</code></pre>\n\n<p>Where <code>MockActivity</code> is the aforementioned mock activity I've created in this test project. However, seems that the Android test framework is having trouble launching the activity and it comes up with this exception:</p>\n\n<pre><code>        java.lang.RuntimeException: Exception during suite construction\n        at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:239)\n        at java.lang.reflect.Method.invokeNative(Native Method)\n        at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)\n        at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)\n        at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:520)\n        at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1447)\n        Caused by: java.lang.NullPointerException: Method name must not be null.\n        at java.lang.ClassCache.findMethodByName(ClassCache.java:297)\n        at java.lang.Class.getMethod(Class.java:985)\n        at android.test.suitebuilder.TestMethod.getAnnotation(TestMethod.java:60)\n        at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:39)\n        at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:30)\n        at com.android.internal.util.Predicates$OrPredicate.apply(Predicates.java:106)\n        at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:42)\n        at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:31)\n        at com.android.internal.util.Predicates$NotPredicate.apply(Predicates.java:122)\n        at android.test.suitebuilder.TestSuiteBuilder.satisfiesAllPredicates(TestSuiteBuilder.java:254)\n        at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:190)\n        at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:373)\n        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4218)\n        at android.app.ActivityThread.access$3000(ActivityThread.java:125)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:123)\n        at android.app.ActivityThread.main(ActivityThread.java:4627)\n        at java.lang.reflect.Method.invokeNative(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)\n        at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>Now I'm totally lost here. How can this be so complicated? Have I chosen the correct way? I just want to launch a dialog in a test method. Maybe the framework is messing up because the activity to test is not in the target project?</p>\n\n<p>Any help here would be much appreciated. I'm getting out of time and if I can't find the proper way to do this I'd have to create a second project using my library, move the mock activity there and test from the test project. This is a lot of code because I'd have to include a method in a (now not generic) mock activity just to call every library method I want to test.</p>\n"},{"tags":["unit-testing","phpunit","assert"],"answer_count":4,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":2625,"score":8,"question_id":3838288,"title":"PHPUnit: assert two arrays are equal, but order of elements not important","body":"<p>What is a good way to assert that two arrays of objects are equal, when the order of the elements in the array is unimportant, or even subject to change?</p>\n"},{"tags":["entity-framework","unit-testing","mocking","tdd"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13045499,"title":"Testing repository with DbContext - mocking issue concerning IDbSet","body":"<p>I am trying to test a repository that uses DbContext</p>\n\n<p>The issue I am running into is that DbCOntext wants to return DbSet for certain types</p>\n\n<p>I can't even mock IDbSet as it has a PRIVATE CTOR?!?!?!</p>\n\n<p>How is everyone getting over this?</p>\n"},{"tags":["c#","unit-testing","mstest"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":61,"score":2,"question_id":13032717,"title":"How to initialize some tests and not others?","body":"<p>Using <code>TestInitialize()</code>, I can initialize all the tests in the <code>TestClass</code>. But if I want only some tests to be initialize and not others, how can I achieve this?</p>\n"},{"tags":["c#",".net","excel","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":13037362,"title":"Read Rows in Excel File using c#","body":"<p>I have  added an Excel file to provide unit test values. </p>\n\n<p>Below is a example about what I was doing before  </p>\n\n<pre><code>public void test1()\n{\n    try\n    {\n        var Service = new Service.ServiceClient();\n        var Cid = testContextInstance.DataRow[\"CId\"].ToString();\n        var MNumber = testContextInstance.DataRow[\"MNumber\"].ToString();\n        var VID = testContextInstance.DataRow[\"VID\"].ToString();\n        var isVisit = new Service.ISVisit()\n        {\n        };\n\n    var first = Service.Medis(isVisit).Cast&lt;Service.ISMedi&gt;().FirstOrDefault();\n    // Assert\n    Assert.AreEqual(\"12345678\", first.Proc.ProcID);\n    }\n</code></pre>\n\n<p>.i am using excel sheet to provide values for the untitest.</p>\n\n<p><img src=\"http://i.stack.imgur.com/9MPVE.png\" alt=\"enter image description here\"></p>\n\n<p>By using the sample code above i am able to loop through each row in the excel and set values to the variables.But the Requirement is not to attach excel as a Data Driven Source and not to use Oledb way to query things in Excel.They said me to use Microsoft.Office.Interop.Excel; .</p>\n\n<p>Can any one help me with how to change the code to retrive the data in excel , row by row and assign cells to respective variables using  different approach.??? This is a c# Unittest framework</p>\n"}]}
{"total":15322,"page":5,"pagesize":100,"questions":[{"tags":["unit-testing","event-handling"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":12825018,"title":"Using Mock for event listeners in unit-testing","body":"<p>I keep getting to test this kind of code (language irrelevant) : </p>\n\n<pre><code>public class Foo() {\n\n   public Foo(Dependency1 dep1) {\n      this.dep1 = dep1;\n   }\n\n   public void setUpListeners() {\n      this.dep1.addSomeEventListener(.... some listener code ...);\n   }\n}\n</code></pre>\n\n<p>Typically, you want to test what when the dependency fires the event, the class under tests reacts appropriately (in some situation, the <em>only</em> purpose of such classes is to wire lots of other components, that can be independently tested.</p>\n\n<p>So far, to test this, I always end up doing something like : </p>\n\n<ul>\n<li>creating a 'stub' that implements both a <code>addXXXXListener</code>, that simply stores the callback, and a <code>fireXXXX</code>, that simply calls any registered listener. This is a bit tedious since you have to create the mock with the right interface, but that can do</li>\n<li>use an introspective framework that can 'spy' on a method, and inject the real dependency in tests</li>\n</ul>\n\n<p>Is there a cleaner way to do this kind of things ? </p>\n"},{"tags":["python","unit-testing","multiprocessing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13040739,"title":"Unit testing a blocking call on a different process (python)","body":"<p>I'm trying to unit test a call that blocks. Since it blocks, I was thinking of running the blocking command in another process and then killing it.</p>\n\n<pre><code>from multiprocessing import Process\nimport time\n\ndef foo():\n    # do blocking command\n\np = Process(target=foo)\np.start()\ntime.sleep(1)\np.terminate()\np.join()\nassert p.is_alive() == False\n# test foo has done something\n</code></pre>\n\n<p>The process seems to be killed and the test passes but the issue is that the blocking call seems to continue to run after the test is finished. I'm not sure what's happening. Any guidance would be appreciated.</p>\n"},{"tags":["unit-testing","symfony2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13040104,"title":"Symfony2 getting config params in unit test","body":"<p>I have a Symfony2 service that is constructed using a parameter from config.yml using dependency injection. I'm now trying to unit test it and find that the unit test does not have access to the container and therefore the service. So I should built one myself using mock data. It would make sense to me if I could now read the config parameter (going first to config_test.yml then config.yml etc etc) but it appears that isn't possible either. This appears to make unit testing a service cumbersome as I would need to code the initialisation parameters into the test instead of the config files.</p>\n\n<p>If there really is no way to construct a service with parameters from config.yml during a unit test, does anyone know the logic as to why it is a Bad Thing™?</p>\n"},{"tags":["javascript","unit-testing","qunit","typescript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13040167,"title":"QUnit Won't Run Tests","body":"<p>I'm just starting to use QUnit and having issues.</p>\n\n<p>I'm currently using TypeScript, which is a JavaScript compiler. I have my Tests in classes which parallel the structure of my main classes.</p>\n\n<p>In each of those classes, I have a function called runTests().</p>\n\n<p>To execute these tests, I loop through and get all the classes which end in \"Test\", and then call their runTests() function.</p>\n\n<p>An example of the runTests() function is:</p>\n\n<pre><code>runTests = function() {\n  QUnit.test(\"5 = 5\", function() {\n    QUnit.ok(5 == 5, \"okay\");\n  });\n}\n</code></pre>\n\n<p>I know all of the runTests() work (as in they are called, confirmed because of console output), but at most it only ever shows me one test. It seems to always be the last test called (even with multiple tests in the same runTests()).</p>\n\n<p>Is there some weird thing where QUnit resets itself which is why I'm only seeing one, or am I missing something even more fundamental?</p>\n\n<p>Thanks.</p>\n\n<hr>\n\n<p>The HTML I use is here, in case it matters:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;QUnit Example&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"qunit-git.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div id=\"qunit\"&gt;&lt;/div&gt;\n&lt;script src=\"qunit-1.10.0.js\"&gt;&lt;/script&gt;\n&lt;script src=\"mycode.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    function runTest() {\n        var testClasses = getClassesRecurse(Test, []);\n\n        function getClassesRecurse(target, testClasses) {\n            if (typeof target == 'function' &amp;&amp; /Test$/.test(target.name)) {\n                testClasses.push(target);\n            } else if (typeof target == 'object') {\n                for (var i in target) {\n                    getClassesRecurse(target[i], testClasses);\n                }\n            }\n\n            return testClasses;\n        }\n\n        for (var i in testClasses) {\n            var testObj = new testClasses[i]();\n\n            if (testObj.runTests) {\n                console.log('Testing: ' + testClasses[i].name, testObj);\n                testObj.runTests();\n            }\n        }\n    }\n\n    runTest();\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["unit-testing","testing"],"answer_count":12,"favorite_count":4,"up_vote_count":12,"down_vote_count":0,"view_count":2107,"score":12,"question_id":363596,"title":"Unit testing a method that calls another method","body":"<p>What is the best way to unit test a method that calls into multiple methods, for example:</p>\n\n<pre><code>modify(string value)\n{\n    if(value.Length &gt; 5)  replaceit(value);\n\n    else changeit(value);\n}\n</code></pre>\n\n<p>This pseudo code has a modify method that (currently) calls either replaceit() or changeit().  I have already wrote tests for replaceit and changeit, so writing a new test for modify will be 99% the same set of code.  I need to test it thought because it may change in the future.  </p>\n\n<p>So do I copy paste the existing test code?  Move the test code to a common function?  Any other ideas?  I'm not sure of the best practice here.</p>\n"},{"tags":[".net","asp.net-mvc-3","unit-testing","moq","app-globalresources"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13013075,"title":"How do you Moq a .resx that lives in App_GlobalResource?","body":"<p>I'm writing unit tests for a controller in an MVC3 web project, but my tests throw exceptions when they try and access a resource like this:</p>\n\n<pre><code>return Index(Resources.Strings.MyStringResource);\n</code></pre>\n\n<p>The resource is a <code>.resx</code> file titled <code>Strings</code>.</p>\n\n<p>I'm using the <a href=\"http://code.google.com/p/moq/\" rel=\"nofollow\">Moq</a> libraries to achieve unit test for <code>HttpContextBase</code> functionality, so I was wondering how I would go about using the Moq libraries to access an App_GlobalResource.</p>\n\n<p>Any help or pointers would be greatly appreciated!</p>\n"},{"tags":["c#","unit-testing","unity","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12998732,"title":"how to register a rihno stub in MS unity?","body":"<p>I'm using Ms <code>unity container</code> and <code>rihno mock</code> for creating stubs.</p>\n\n<p>I try to create stube and register it in my unity container</p>\n\n<pre><code>IUnityContainer container = ContainerManager.GetDefaultContainer;\n\nvar loggerStub = MockRepository.GenerateStub&lt;ILogger&gt;();\n\ncontainer.RegisterType&lt;ILogger, loggerStub&gt;();\n</code></pre>\n\n<p>however, only class type can be registered.</p>\n\n<p>How can I register stub (like logger stub) inorder to rn my unit-test? </p>\n"},{"tags":["android","unit-testing","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":12544262,"title":"Robolectric 1.2 : “WARNING: Unable to find path to Android SDK”","body":"<p>I used </p>\n\n<blockquote>\n  <p>Robolectric 1.1 jar-with-dependencies</p>\n</blockquote>\n\n<p>in my project and succeed to get it work, however when I changed the jar to </p>\n\n<blockquote>\n  <p>1.2-SNAPSHOT jar-with-dependencies</p>\n</blockquote>\n\n<p>I get the following warning:  </p>\n\n<blockquote>\n  <p>WARNING: Unable to find path to Android SDK</p>\n</blockquote>\n\n<ol>\n<li>Both jars downloaded from <a href=\"https://oss.sonatype.org/index.html#nexus-search;quick~robolectric\" rel=\"nofollow\">Sonatype</a> (I didn't use maven).</li>\n<li>I tried the solution from <a href=\"http://stackoverflow.com/questions/9352903/robolectric-warning-unable-to-find-path-to-android-sdk\">this</a> question and still get the warning. </li>\n</ol>\n"},{"tags":["unit-testing","ruby-1.9.1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13033977,"title":"Failed to define a simple unit test testcase","body":"<p>I am trying to do a simple test case with Test Unit, in Ruby 1.9.1 (Ubuntu Linux 12.04 64 bits) : but it says me that the initialize method of my TestCase is missing arguments. And when I look further at the error, it says me that it tried to launch /usr/lib/ruby/1.9.1/minitest.</p>\n\n<p>However, I installed the Test Unit gem before.</p>\n\n<p>This is the first source file :\nRun.rb</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire \"test/unit\"\nrequire_relative \"NumbersSet.rb\"\n\ndef draw_result\n    the_drawn_result = nil\n    loop do\n        the_drawn_result = rand(1000)\n        break if the_drawn_result &gt;= 100\n    end\n    the_drawn_result\nend\n\ndef do_operation(operation, number_1, number_2)\n    return nil if number_1 &lt; 1 or number_2 &lt; 1\n    number_1, number_2 = number_2, number_1 if  number_1 &lt; number_2\n    case operation\n        when :add\n            result = number_1 + number_2\n            return \"#{number_1} + #{number_2} = #{result}\", result\n        when :sub\n            return nil if number_1 == number_2 # A zero result will not help us\n            result = number_1 - number_2\n            return \"#{number_1} - #{number_2} = #{result}\", result\n        when :mul\n            return nil if number_1 == 1 or number_2 == 1 # Otherwise, this would be identity operation\n            result = number_1 * number_2\n            return \"#{number_1} * #{number_2} = #{result}\", result\n        when :div\n            return nil if number_1 == 1 or number_2 == 1 # Otherwise, this could be identity operation\n            return nil if number_1 % number_2 != 0\n            result = number_1 / number_2\n            return \"#{number_1} / #{number_2} = #{result}\", result\n        else\n            raise \"Unknown operation #{operation} !\"\n    end\nend\n\ndef play\n    drawn_numbers = NumbersSet.draw\n    puts drawn_numbers.inspect, draw_result\nend\n\nclass DrawTest &lt; Test::Unit::TestCase\n    def draw_test\n\n        assert_equal(nil, do_operation(:add, -3, 1))\n        assert_equal(nil, do_operation(:add, 1, -1))\n        assert_equal(nil, do_operation(:add, 5, 0))\n        assert_equal(nil, do_operation(:add, 0, 5))\n        assert_equal(nil, do_operation(:add, 3, 5))\n        assert_equal(nil, do_operation(:add, 5, 3))\n\n        assert_equal(nil, do_operation(:sub, 5, 3))\n        assert_equal(nil, do_operation(:sub, 3, 5))\n        assert_equal(nil, do_operation(:sub, 3, 3))\n\n        assert_equal(nil, do_operation(:mul, 3, 5))\n        assert_equal(nil, do_operation(:mul, 5, 3))\n        assert_equal(nil, do_operation(:mul, 3, 1))\n        assert_equal(nil, do_operation(:mul, 1, 3))\n\n        assert_equal(nil, do_operation(:div, 20, 3))\n        assert_equal(nil, do_operation(:div, 3, 20))\n        assert_equal(nil, do_operation(:div, 20, 1))\n        assert_equal(nil, do_operation(:div, 1, 20))\n        assert_equal(nil, do_operation(:div, 20, 4))\n        assert_equal(nil, do_operation(:div, 5, 20))\n\n    end\nend\n\nOPERATIONS = [:add, :sub, :mul, :div]\n\nDrawTest.new.draw_test\n</code></pre>\n\n<p>This is the second file : NumbersSet.rb</p>\n\n<pre><code>class NumbersSet\n\n    def self.draw\n        plaques = {}\n        (1..10).each { |value| plaques[value] = 2}\n        [25,50,75,100].each { |value| plaques[value] = 1}\n\n        draw_possibilities = (1..10).to_a &lt;&lt; 25 &lt;&lt; 50 &lt;&lt; 75 &lt;&lt; 100\n        the_draw = []\n        6.times do |loop_index|\n            drawn_number_index = nil\n            loop do\n                drawn_number_index = rand(draw_possibilities.size)\n                break if plaques[draw_possibilities[drawn_number_index]] &gt; 0\n            end\n            the_draw &lt;&lt; draw_possibilities[drawn_number_index]\n            plaques[draw_possibilities[drawn_number_index]] -= 1\n        end\n        the_draw\n    end\n\nend\n</code></pre>\n\n<p>And this this the terminal error :</p>\n\n<pre><code>$ ./Run.rb \n/usr/lib/ruby/1.9.1/minitest/unit.rb:971:in `initialize': wrong number of arguments (0 for 1) (ArgumentError)\n    from ./Run.rb:77:in `new'\n    from ./Run.rb:77:in `&lt;main&gt;'\n</code></pre>\n\n<p>So, is this really a bad coding from myself, or an installation issue ?\nThanks in advance.</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13034207,"title":"unittest: increase module's verbosity when tested","body":"<p>I have a module <code>mymodule</code> that I test with <code>unittest</code>. The module logs to stdout diagnostics messages when is in <em>verbose mode</em> (e.g. <code>mymodule.set_verbose(True)</code>) and remains silent otherwise. I would like that when I import the module in the main program it is in the <em>silent mode</em> and when the <code>unittest</code> runs, it is verbose.</p>\n\n<p>I tried to hack it in the unittest main loop, but it doesn't work</p>\n\n<pre><code>if __name__ == \"__main__\":\n  mymodule.set_verbose( True )\n  unittest.main() \n# apparently, modules are loaded on each test separately\n</code></pre>\n\n<p><a href=\"http://stackoverflow.com/questions/6429577/how-to-increase-verbosity-in-python-unittest\">How to increase verbosity in python unittest?</a> was not helpful.</p>\n"},{"tags":["c++","unit-testing","boost","statechart","boost-statechart"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13033282,"title":"boost statechart, unit-testing fraction of a state-machine","body":"<p>I'm looking for a way to execute (for unit-testing purposes) only fractions of a complex state -machine. For that purpose I'm evaluating boost::statechart framework.</p>\n\n<p>One way that I considered was to design a hierarchical state machine, where each state is defined as a nested state-machine, that should be tested separately.</p>\n\n<p>Consider the FSM definition from the following code snippet:</p>\n\n<pre><code>struct Fsm: boost::statechart::state_machine&lt; Fsm, StateA &gt;\n{\n  ...\n}\n\nstruct StatA : boost::simple_state&lt; StateA, Fsm, StateA1 &gt;\n{\n  ...\n}\n\nstruct StateB : boost::simple_state&lt; StateB, Fsm, StateB1 &gt;  \n{\n  ....\n}\n\nstruct StateA1 : boost::simple_state&lt; StateA1, StateA &gt;\n{\n  ....\n}\n\nstruct StateA2 : boost::simple_state&lt; StateA2, StateA &gt;\n{\n  ....\n}\n\nstruct StateB1 : boost::simple_state&lt; StateB1, StateB &gt;  \n{\n  ....\n}\n\nstruct StateB2 : boost::simple_state&lt; StateB2, StateB &gt;  \n{\n  ....\n}\n</code></pre>\n\n<p>Is it possible to unit-test the logic defined inside state B i.e. B1 and B2 inner states, without executing or even compiling the logic defined for state A including its inner A1 and A2 states?</p>\n\n<p>Thanks in advance,\nAmirH</p>\n"},{"tags":["unit-testing","windows-phone","portable-class-library","windows-phone-8"],"answer_count":2,"favorite_count":5,"up_vote_count":3,"down_vote_count":0,"view_count":211,"score":3,"question_id":12970194,"title":"Windows Phone development and Unit Testing","body":"<p>I'm looking to start a project targeting Windows Phone, but I'm slightly put off by the lack of unit testing support[1].</p>\n\n<p>I'm used to using NUnit/ XUnit for most of my testing needs, with something like NSubstitute for mocking. Near as I can tell, you can't use these frameworks for Windows Phone projects...</p>\n\n<p>Given some investigation, I was wondering if the following scenario would work:</p>\n\n<ul>\n<li>Use Visual Studio 2012</li>\n<li>Create a Portable Class Library project(s) for the View Models and other logic</li>\n<li>Create other Portable Class Library project(s) for the unit tests</li>\n<li>Wait for Windows Phone 8 SDK[2], then create the views using that.</li>\n</ul>\n\n<p>By using a Portable Class Library, I'm hoping that the unit tests will be as close as possible to running on the device, without having to crack open the emulator.</p>\n\n<p>Another plus point is that I can see that this solution working within a TFS build environment - so running the tests are part of a CI build...</p>\n\n<p>I was hoping to gauge peoples opinion on if this is a sensible move, or a fools errand... </p>\n\n<p>Thanks,<br />\nKieron</p>\n\n<p>[1] I know there are solutions out there, but none that seem as integrated as full framework testing - I'm talking specifically about support in VS2012/ Resharper for running unit tests without the need for an emulator.<br /></p>\n\n<p>[2] Does anyone know if you can target Windows Phone 7.x using the WP8 SDK?</p>\n"},{"tags":["javascript","internet-explorer","unit-testing","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":11323691,"title":"Using jasmine to compare arrays fails in ie8","body":"<p>Apparently ie8 has three properties that get appended to the resulting array from a call to <code>String.prototype.match()</code>: </p>\n\n<p><code>input</code>, <code>index</code> and <code>lastIndex</code></p>\n\n<p>(<a href=\"http://msdn.microsoft.com/en-us/library/7df7sf4x%28v=vs.94%29.aspx\" rel=\"nofollow\">MSDN Documentation</a>)</p>\n\n<p>The result is that array comparison fails when using Jasmine's <code>.toEqual()</code> matcher.</p>\n\n<p>I'm still working my way up the learning curve on unit testing, so I'm just curious of what the right way is to do deal with this failure.</p>\n\n<p>The following works but seems a bit lame:</p>\n\n<pre><code> numArray = str.match(/\\d+(\\.\\d+)?/g);\n if (numArray &amp;&amp; numArray.input) {\n      delete numArray.index;\n      delete numArray.input;\n      delete numArray.lastIndex;\n }\n</code></pre>\n"},{"tags":["c#","unit-testing","continuous-integration","nunit","finalbuilder"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13034307,"title":"Continuous Integration - Tests Categorization","body":"<p>The current set up uses FinalBuilder for Continuous Integration &amp; builds of a enterprise wide suite of ASP.NET applications &amp; Services.  </p>\n\n<p>I intend to have NUnit hooked to the CI build process.</p>\n\n<p>What should be my top priority category of tests - which if failed - should halt the process?</p>\n\n<p>I plan to get with the Product Owners to find out the top functionalities that they cannot do without. But from a generic perspective what would/should be considered critical enough to halt the process?</p>\n"},{"tags":[".net","wcf","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":497,"score":2,"question_id":920412,"title":"Test project and config file","body":"<p>I have this kind of setup in my Visual Studio 2008 solution: One WCF service project (WCFService) which uses library (Lib1, which requires some configuration entries in app.config file). I have a unit test project (MSTest) which contains tests related to Lib1. In order to run those tests, I need a config file in test project. Is there any way to load it automatically from WCFService, so I do not need to change config entries on two places?</p>\n"},{"tags":["c#",".net","unit-testing","nunit"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13032056,"title":"How do I make nunit-console look in \\bin\\Debug\\ rather than \\bin\\x86\\Debug for assemblies?","body":"<p>I am trying to set up a build machine and want to run nunit (on several relatively big and dynamic solutions) from a batch script. I ran the following command lines</p>\n\n<pre><code>\"C:\\Program Files (x86)\\NUnit 2.6.1\\bin\\nunit-console-x86.exe\" \"C:\\MySolutionPath\\MySolution.sln\"\n\"C:\\Program Files (x86)\\NUnit 2.6.1\\bin\\nunit-console.exe\" \"C:\\MySolutionPath\\MySolution.sln\"\n</code></pre>\n\n<p>Both gave a System.IO.DirectoryNotFoundException:</p>\n\n<pre><code>NUnit-Console version 2.6.1.12217\nCopyright (C) 2002-2012 Charlie Poole.\nCopyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.\nCopyright (C) 2000-2002 Philip Craig.\nAll Rights Reserved.\n\nRuntime Environment -\n   OS Version: Microsoft Windows NT 6.1.7601 Service Pack 1\n  CLR Version: 2.0.50727.5456 ( Net 3.5 )\n\nProcessModel: Default    DomainUsage: Default\nExecution Runtime: net-3.5\nUnhandled Exception:\nSystem.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\\MyProjectPath\\bin\\x86\\Debug\\MyAssembly.dll'.\n   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)\n   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean\n useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, St\nring msgPath, Boolean bFromProxy)\n   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access)\n   at NUnit.Core.AssemblyReader.CalcHeaderOffsets()\n   at NUnit.Core.AssemblyReader..ctor(String assemblyPath)\n   at NUnit.Util.RuntimeFrameworkSelector.SelectRuntimeFramework(TestPackage package)\n   at NUnit.Util.DefaultTestRunnerFactory.GetTargetProcessModel(TestPackage package)\n   at NUnit.Util.DefaultTestRunnerFactory.MakeTestRunner(TestPackage package)\n   at NUnit.ConsoleRunner.ConsoleUi.Execute(ConsoleOptions options)\n   at NUnit.ConsoleRunner.Runner.Main(String[] args)\n</code></pre>\n\n<p>To me it looks like it is looking in the wrong folder: </p>\n\n<pre><code>C:\\MyProjectPath\\bin\\x86\\Debug\\MyAssembly.dll\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>C:\\MyProjectPath\\bin\\Debug\\MyAssembly.dll\n</code></pre>\n\n<p>Is there a way to specify this in NUnit (or if must be in the solution)?</p>\n"},{"tags":["eclipse","unit-testing","scala","junit"],"answer_count":5,"favorite_count":0,"up_vote_count":11,"down_vote_count":0,"view_count":3015,"score":11,"question_id":2984192,"title":"How do you unit test Scala in Eclipse?","body":"<p>I am learning Scala and would like to set up integrated unit testing in Eclipse.\nAs far as I can tell from googling, ScalaTest is the way to go, possibly in combination with JUnit.</p>\n\n<p>What are your experiences with unit testing Scala in Eclipse? Should I use the JUnit runner or something else?</p>\n"},{"tags":["asp.net",".net","asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13032575,"title":"Testing MVC Controller Action from raw POST data","body":"<p>I have a 3rd party vendor I want to integrate with my web site. I have a sample of the POST data they will be sending to me and I want to be able to write a unit test to verify I can process it from my controller action.</p>\n\n<p>Ideally I could have a unit test that loads the raw POST data from a file and I can invoke the action using that as input.</p>\n\n<p>What is the best approach? Or perhaps a testing framework for this?</p>\n"},{"tags":["unit-testing","rest","mocking","mockito"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13031901,"title":"How to mock test REST client?","body":"<p>T have a Rest Service Client which i am trying to Test.\nThis is the client method im trying to test:</p>\n\n<pre><code>public RestPriceRow getPriceRow(String customer, String product, String qt)\n    throws Exception {\n    // Prepare acceptable media type\n    List&lt;MediaType&gt; acceptableMediaTypes = new ArrayList&lt;MediaType&gt;();\n    acceptableMediaTypes.add(MediaType.APPLICATION_XML);\n\n    // Prepare header\n    HttpHeaders headers = new HttpHeaders();\n    headers.setAccept(acceptableMediaTypes);\n    HttpEntity&lt;PriceRowDto&gt; entity = new HttpEntity&lt;PriceRowDto&gt;(headers);\n\n    // Prepare response\n    RestPriceRow res = new RestPriceRow();\n\n    // Send the request as GET\n    try {\n        ResponseEntity&lt;PriceRowDto&gt; result =\n          restTemplate.exchange(baseURL + \"{customerId}/{productId}/{quantity}\",\n          HttpMethod.GET, entity, PriceRowDto.class, customer,product,qt);\n        PriceRowDto response = result.getBody();\n        return response;\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>And this is my test class:</p>\n\n<pre><code>@Before\npublic void setUp() {\n    RestTemplate r = mock(RestTemplate.class);\n    restPriceService = new RestPriceServiceImpl();\n    restPriceService.setRestTemplate(r);\n    restPriceService.setBaseURL(\"url\");\n}\n\n@Test\npublic void prueba() {\n    PriceRowDto r = new PriceRowDto(\"100\",\"200\",\"9\",\"10\",\"0\",\"19/11/2012\");\n    try {\n        when(restPriceService.getPriceRow(\"100\",\"200\",\"16\")).thenReturn(r);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>My problem is that when i run this test, it throws me a <code>NullPointerException</code> when executing <code>result.getBody()</code>. (result is null)</p>\n"},{"tags":["unit-testing","compiler-errors","intellij-idea"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13031595,"title":"Run unit tests in intellij with errors in classes","body":"<p>Hi i am new to using Intellij and i like it very much. I have only one grievance and thats the compiler. I prefer the way the eclipse compiler will compile a project and skip classes with errors in them. </p>\n\n<p>This is particularly a problem for if i want to write a unit test for a method i have to fix all errors in the entire project for running a single unit test!</p>\n\n<p>You might say fix your project but im working on a project where people have already committed code with errors in it. How can i get around this, i saw there's an option to use the eclipse compiler in the settings but this has made no difference/i dont know the argument to skip errors.</p>\n"},{"tags":["php","unit-testing","phpunit","pear"],"answer_count":4,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":17537,"score":7,"question_id":4091862,"title":"Getting PHPUnit Working - Include Path not set correctly?","body":"<p>I'm trying to get PHPUnit working on my development environment but I've hit a bit of a roadblock when it comes to including PHPUnit in my scripts. I know that I need to set the include path on PHP but every combination I've tried fails without the compiler seeing the PHPUnit_Framework_TestCase class.</p>\n\n<p>I just ran updates on PHP and PEAR and PHPUnit is installed on the computer because I can access it through the command line just fine.</p>\n\n<p>PHPUnit is installed at <strong>/usr/share/php/PHPunit</strong></p>\n\n<p>Pear is at <strong>/usr/share/php/PEAR</strong></p>\n\n<p>Is there something I'm missing? This is my first time trying to use PHPUnit or even something from PEAR for that matter. I'm on Ubuntu 10.10. Any help would be appreciated.</p>\n\n<p>Edit - There is nothing in the include path in my PHP ini. Right now the code is just</p>\n\n<pre><code>&lt;?php\nclass Stacktest extends PHPUnit_Framework_TestCase\n{\n\n}\n</code></pre>\n\n<p>I have no idea what to include or what to set in the include path because it seems that for all the info on the web about PHPUnit, this little bit of information is critically absent.</p>\n"},{"tags":["unit-testing","node.js","testing","tdd","mongoose"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":13002506,"title":"What could I do to improve my testing?","body":"<p>Lately I've tried to get my head around good test driven development in Node JS with Mongoose as MongoDB wrapper. </p>\n\n<p>My question is am I doing it right. Am I testing the right stuff, should I do more test that cover empty values etc. What of the things do you think I could improve? Feel free to criticize as much as you like.</p>\n\n<p><strong>Test:</strong></p>\n\n<pre><code>var assert = require(\"assert\"),\n    mongoose = require(\"mongoose\"),\n    sugar = require(\"sugar\"),\n    Factory = require(\"factory-lady\"),\n    Timekeeper = require(\"timekeeper\"),\n    Link = require(\"./../app/models/link\");\n\nmongoose.connect(\"mongodb://localhost/link_test\");\n\nFactory.define(\"link\", Link, {\n  createdAt: new Date(\"2012-04-04\"),\n  title: \"Example\",\n  updatedAt: new Date(\"2012-04-05\"),\n  url: \"http://www.example.com\"\n});\n\ndescribe(\"Link\", function() {\n\n  describe(\"validation for\", function() {\n\n    [\"url\", \"title\"].forEach(function(property) {\n      it(\"must have a \" + property, function(done) {\n        Factory.build(\"link\", function(link) {\n          link[property] = null;\n          link.validate(function(err) {\n            assert.notEqual(err, null);\n            assert.notEqual(err.errors[property], null);\n            done();\n          });\n        });\n      });\n    });\n\n    it(\"should default the title to url if missing\", function(done) {\n      Factory.build(\"link\", function(link) {\n        link.title = undefined;\n        link.validate(function(err) {\n          assert.equal(link.title, link.url);\n          done();\n        });\n      });\n    });\n\n    describe(\"url\", function() {\n\n      [\"http://example.com\", \"http://www.example.com\",\n       \"http://nodejs.org/api/assert.html#assert_assert_deepequal_actual_expected_message\"].forEach(function(url) {\n        it(url + \" should be valid url\", function(done) {\n          Factory.build(\"link\", { url: url }, function(link) {\n            link.validate(function(err) {\n              assert.equal(err, null);\n              done();\n            });\n          });\n        });\n      });\n\n      [\"Invalid url\", \"example.com\"].forEach(function(url) {\n        it(url + \" should be invalid url\", function(done) {\n          Factory.build(\"link\", { url: url }, function(link) {\n            link.validate(function(err) {\n              assert.notEqual(err, null);\n              assert.notEqual(err.errors.url, null);\n              done();\n            });\n          });\n        });\n      });\n\n    });\n\n    describe(\"missing createdAt or updatedAt\", function() {\n\n      beforeEach(function() {\n        Timekeeper.freeze(new Date());\n      });\n\n      afterEach(function() {\n        Timekeeper.reset();\n      });\n\n      [\"createdAt\", \"updatedAt\"].forEach(function(property) {\n        it(\"should default the \" + property + \" to now if missing\", function(done) {\n          Factory.build(\"link\", function(link) {\n            link[property] = undefined;\n            link.validate(function(err) {\n              assert.deepEqual(link[property], new Date());\n              done();\n            });\n          });\n        });\n      });\n\n      [\"createdAt\", \"updatedAt\"].forEach(function(property) {\n        it(\"should leave the \" + property + \" unchanged if it's given\", function(done) {\n          Factory.build(\"link\", function(link) {\n            var date = new Date(\"2012-01-01\");\n            link[property] = date;\n            link.validate(function(err) {\n              assert.deepEqual(link[property], date);\n              done();\n            });\n          });\n        });\n      });\n\n      it(\"should default the updatedAt to now if missing when performing an update\", function(done) {\n        Factory(\"link\", function(link) {\n          link.validate(function(err) {\n            assert.equal(link.updatedAt, new Date());\n            done();\n          });\n        });\n      });\n\n      it(\"should leave the updatedAt unchanged if it's given when performing an update\", function(done) {\n        Factory(\"link\", function(link) {\n          var date = new Date(\"2012-01-01\");\n          link.updatedAt = date;\n          link.validate(function(err) {\n            assert.deepEqual(link.updatedAt, date);\n            done();\n          });\n        });\n      });\n\n    });\n\n  });\n\n});\n</code></pre>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>var mongoose = require(\"mongoose\"),\n    Schema = mongoose.Schema;\n\nvar linkSchema = new Schema({\n  createdAt: { type: Date, required: true },\n  title: { type: String, required: true },\n  updatedAt: { type: Date, required: true },\n  url: { type: String, required: true, validate: [validUrl, \"invalid url\"] }\n});\n\nfunction validUrl(url) {\n  if ((url instanceof String || typeof url == 'string') &amp;&amp; url.length) {\n    return url.match(/^\\b((?:https?:\\/\\/|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()&lt;&gt;]+|\\(([^\\s()&lt;&gt;]+|(\\([^\\s()&lt;&gt;]+\\)))*\\))+(?:\\(([^\\s()&lt;&gt;]+|(\\([^\\s()&lt;&gt;]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,&lt;&gt;?«»“”‘’]))$/i); \n  }\n}\n\nlinkSchema.pre(\"validate\", function (next) {\n  if (typeof this.title === \"undefined\" &amp;&amp; typeof this.url !== \"undefined\") {\n    this.title = this.url;\n  }\n  if (typeof this.createdAt === \"undefined\") {\n    this.createdAt = new Date();\n  }\n  if (typeof this.updatedAt === \"undefined\" || !this.isModified(\"updatedAt\")) {\n    this.updatedAt = new Date();\n  }\n  next();\n});\n\nmodule.exports = mongoose.model(\"Link\", linkSchema);\n</code></pre>\n"},{"tags":["unit-testing","akka"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13020761,"title":"Testkit, TestActorRef and TestProbbe","body":"<p>kind of new to akka actors </p>\n\n<p>but will like the know the use and differences between the TestKit , TastActorRef and TestProbe</p>\n\n<p>as used in akka unit testing.</p>\n\n<p>I have seen them used for unit testing akka systems but do not seem to understand the concept</p>\n\n<p>tried searching the internet but looks like documentation is sparse.</p>\n\n<p>Any brief explanation is welcomed.</p>\n\n<p>thanks ll .</p>\n"},{"tags":["java","web-services","unit-testing","jax-ws"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12977867,"title":"Is mocking an essential part of unit testing?","body":"<p>I have a web service which calls a third party web service.</p>\n\n<p>Now I want to unit-test my web service. For this, should I mock the third party web service or is it fine to call it during the tests?</p>\n\n<p>Is there any standard document on unit testing?</p>\n"},{"tags":["c#","xml","unit-testing","nunit"],"answer_count":13,"favorite_count":2,"up_vote_count":15,"down_vote_count":0,"view_count":3766,"score":15,"question_id":503784,"title":"Unit testing XML Generation","body":"<p>What unit testing strategies do people recommend for testing xml is being generated correctly.</p>\n\n<p>The my current tests seem abit primitive, something along the lines of:</p>\n\n<pre><code>[Test]\npublic void pseudo_test()\n{\n   XmlDocument myDOC = new XmlDocument();\n   mydoc = _task.MyMethodToMakeXMLDoc();\n\n   Assert.AreEqual(myDoc.OuterXML(),\"big string of XML\")\n}\n</code></pre>\n"},{"tags":["c#",".net","unit-testing","nunit","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13026340,"title":"Really basic moq example fails","body":"<p>I am trying out Moq, and I've gotten stuck in a very basic example. I want to mock a very simple interface IInput:</p>\n\n<pre><code>namespace Example\n{\n    public interface IInput\n    {\n        int SomeProperty { get; set; }\n    }\n} \n</code></pre>\n\n<p>This seems like a very easy job. However, I get a compilation error when I try to mock it in the following test code: </p>\n\n<pre><code>using Moq;\nusing NUnit.Framework;\n\nnamespace FirstEniro._Test\n{\n\n    [TestFixture]\n    class TestFirstClass\n    {\n        [Test]\n        public void TestConstructionOk()\n        {\n            var mock = new Mock&lt;IInput&gt;();\n            mock.Setup(r =&gt; r.SomeProperty).Returns(3);\n\n            var x = new FirstClass(mock);\n\n            Assert.That(x, Is.EqualTo(3));\n        }\n    }\n}\n</code></pre>\n\n<p>The compiler says \"cannot convert from <code>Moq.Mock&lt;Example.IInput&gt;</code> to <code>&lt;Example.IInput&gt;</code>. \nI can't see what I am doing wrong. Please help me </p>\n"},{"tags":["unit-testing","grails","gorm"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":13025820,"title":"Grails Unit Test \"CreateAlias\" doesn´t work","body":"<p>I am trying to make a unit test over a namedquery method and it´s not working as I am using the method grails.orm.HibernateCriteriaBuilder.createAlias which doesn´t seem to be found by Grails: \" No signature of method: grails.gorm.CriteriaBuilder.createAlias()\"</p>\n\n<p>I guess the problem is that when making a unit test and mocking the class, it´s trying to find the method around \"<strong>grails.gorm.CriteriaBuilder</strong>\" class and not <strong>grails.orm.HibernateCriteriaBuilder</strong> class,  why ??  any ideas to solve it?</p>\n\n<pre><code>class Book{\n  static namedQueries = {     \n      testMethod()\n      {\n         createAlias('name', 'james')\n      }\n   }\n}\n\n\n\n@Mock([Book])\nclass BookTests{\n  @Test\n  void myTest() {\n      Book.testMethod();\n   }\n}\n</code></pre>\n\n<p><strong>Error :  No signature of method: grails.gorm.CriteriaBuilder.createAlias()</strong></p>\n"},{"tags":["php","unit-testing","phpunit","ubuntu-11.10"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1633,"score":2,"question_id":8991620,"title":"Error when running PHPUnit","body":"<p>I get the following error when I try to run <code>phpunit .</code> from within my project's tests folder:</p>\n\n<pre><code>PHP Fatal error:  Call to undefined method PHP_CodeCoverage_Filter::getInstance() in /usr/share/php/PHPUnit/Framework.php on line 46\n</code></pre>\n\n<p>I installed PHPUnit via these commands:</p>\n\n<pre><code>sudo pear channel-discover pear.symfony-project.com\nsudo pear channel-discover components.ez.no\nsudo pear install --alldeps phpunit/PHPUnit\n</code></pre>\n\n<p>As none of the other methods seem to work, including <code>apt-get</code>.</p>\n\n<p>I <em>think</em> CodeCoverage changed their singleton pattern at some point in time and hence removed <code>getInstance</code> but I don't know how to fix this error. How can I either downgrade CodeCoverage or upgrade PHPUnit? </p>\n\n<p>I tried manually installing the latest versions of everything via the following commands:</p>\n\n<pre><code>sudo apt-get install git\nmkdir phpunit &amp;&amp; cd phpunit\ngit clone git://github.com/sebastianbergmann/phpunit.git\ngit clone git://github.com/sebastianbergmann/dbunit.git\ngit clone git://github.com/sebastianbergmann/php-file-iterator.git\ngit clone git://github.com/sebastianbergmann/php-text-template.git\ngit clone git://github.com/sebastianbergmann/php-code-coverage.git\ngit clone git://github.com/sebastianbergmann/php-token-stream.git\ngit clone git://github.com/sebastianbergmann/php-timer.git\ngit clone git://github.com/sebastianbergmann/phpunit-mock-objects.git\ngit clone git://github.com/sebastianbergmann/phpunit-selenium.git\ngit clone git://github.com/sebastianbergmann/phpunit-story.git\ngit clone git://github.com/sebastianbergmann/php-invoker.git\nsudo cp -r dbunit/PHPUnit /usr/share/php/\nsudo cp -r php-code-coverage/PHP /usr/share/php/\nsudo cp -r php-file-iterator/File /usr/share/php/\nsudo cp -r php-invoker/PHP /usr/share/php/\nsudo cp -r php-text-template/Text /usr/share/php/\nsudo cp -r php-timer/PHP /usr/share/php/\nsudo cp -r php-token-stream/PHP /usr/share/php/\nsudo cp -r phpunit/PHPUnit /usr/share/php/\nsudo cp -r phpunit-mock-objects/PHPUnit /usr/share/php/\nsudo cp -r phpunit-selenium/PHPUnit /usr/share/php/\nsudo cp -r phpunit-story/PHPUnit /usr/share/php/\nsudo cp -r phpunit/phpunit.php /usr/share/php/\n</code></pre>\n\n<p>But that didn't help any. Now I just have a bunch of junk all over the place :\\</p>\n\n<hr>\n\n<p>Version info:</p>\n\n<pre><code>PEAR Version: 1.9.4\nPHP Version: 5.3.6-13ubuntu3.3\nZend Engine Version: 2.3.0\nPHPUnit 3.6.9 by Sebastian Bergmann.\n</code></pre>\n\n<hr>\n\n<pre><code>Installed packages, channel pear.phpunit.de:\n============================================\nPackage            Version State\nFile_Iterator      1.3.1   stable\nPHPUnit            3.6.9   stable\nPHPUnit_MockObject 1.1.1   stable\nPHP_CodeCoverage   1.1.1   stable\nPHP_Invoker        1.1.0   stable\nPHP_Timer          1.0.2   stable\nPHP_TokenStream    1.1.2   stable\nText_Template      1.1.1   stable\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc","unit-testing","anonymous-types"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":519,"score":1,"question_id":8465121,"title":"Casting anonymous type to dynamic","body":"<p>I have a function that returns an anonymous type which I want to test in my Mvc controller.</p>\n\n<pre><code>function JsonResult Foo()\n{\n    var data = new\n                  {\n                      details = \"something\",\n                      more = \"More\"\n                  };\n    return Json(data);\n}\n</code></pre>\n\n<p>I want to verify the data I get from the Foo function, What I'm doing now is get the data type and get his properties values with reflection. </p>\n\n<pre><code>[Test]\npublic void TestOne()\n{\n    var data = _controller.Foo().Data;\n    var details = data.GetType().GetProperty(\"details\").GetValue(data, null);\n    var more = data.GetType().GetProperty(\"more\").GetValue(data, null);\n\n    Assert.AreEquals(\"something\", details);\n    Assert.AreEquals(\"More\", more);\n}\n</code></pre>\n\n<p>Is there a simple way similar to this to check the anonymous properties?</p>\n\n<pre><code>[Test]\npublic void TestTwo()\n{\n    var data = (dynamic) _controller.Foo().Data;\n    var details = data.details; // RunTimeBinderException object does not contain definition for details\n    var more = data.more;\n\n    Assert.AreEquals(\"something\", details);\n    Assert.AreEquals(\"More\", more);\n}\n</code></pre>\n"},{"tags":["delphi","dunit","unit-testing"],"answer_count":6,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":358,"score":7,"question_id":4906955,"title":"How to access fields of a TTestCase in a TTestSetup class","body":"<p>I am creating unit tests with DUnit. I have a class that takes quite a long time to initialize. </p>\n\n<p>I derive a class TMyTestSetup from TTestSetup and override its Setup method. This SetUp method is only called once for all the tests in my TTestCase. I put the Initialization process in the TMyTestSetup.SetUp routine to increase performance.</p>\n\n<p>My problem is how can I access the object I want to initialize, which is a field of my TMyTest in the TestSetup class? Is the only way to do it declaring it globally?</p>\n\n<p>untested short example:</p>\n\n<pre><code>TMyTestSetup = class(TTestSetup)\n  protected\n    procedure SetUp; override;\nend;\n\nTMyTest = class(TTestcase)\npublic\n    fTakes4Ever2Init : TInits4Ever2Init;\npublished\n  procedure Test1;     \nend;\n\nimplementation\n\nprocedure TMyTestSetup.Setup;\nbegin\n   // How can I access fTakes4Ever2Init from here?\n  fTakes4Ever2Init.create // This is the call that takes long\nend;\n\nprocedure TMyTest.Test1;\nbegin\n  fTakes4Ever2Init.DoSomething;\nend;\n\ninitialization\n  RegisterTest(TMyTestSetup.Create(TMyTest.Suite));\n</code></pre>\n"},{"tags":["unit-testing","mocking"],"answer_count":4,"favorite_count":3,"up_vote_count":27,"down_vote_count":0,"view_count":4190,"score":27,"question_id":2665812,"title":"What is Mocking?","body":"<p>What is Mocking?                                                                                                    .</p>\n"},{"tags":["java","security","unit-testing","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13018059,"title":"How do I set the AccessControlContext in Java?","body":"<p>I'm fairly new to Java security stuff and I'm having a hard time figuring out how to google the right answer to this.</p>\n\n<p>I have a line of code that reads <code>AccessController.getContext()</code>.  </p>\n\n<p>I want to run a test where I mock the result of this.  Unfortunately, I have no idea what I'm doing.  </p>\n\n<p>How do I set the <code>AccessControlContext</code> returned by <code>AccessController.getContext()</code>?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Just to clarify, I know how to mock interfaces.  AccessController is a Java security feature.  I'm having trouble finding out how to set my own context so that when a method calls <code>AccessController.getContext()</code> it returns a AccessControlContext of my choosing.</p>\n"},{"tags":["unit-testing","profiling","visual-studio-2012"],"answer_count":2,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":350,"score":7,"question_id":12027885,"title":"How to profile unit tests in Visual Studio 2012?","body":"<p>Is it possible to <strong>profile</strong> MSTest unit tests in <strong>Visual Studio 2012 Ultimate</strong> without using any external profiling tools?</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":75,"score":5,"question_id":13017966,"title":"Mocking a C# timer with Moq","body":"<p>I'm attempting to create a WPF MVVM View Model that has a dependency injected <code>System.Timing.Timer</code>, and wish to test the view model with Moq.</p>\n\n<p>I wrote a thin wrapper around the <code>Timer</code> class that has a interface <code>ITimer</code>, but am unsure of the best way to really test the timer's contribution to the class.  Is there a good way to 'force' a mock elapsed event? Does somebody else have a better technique?</p>\n"},{"tags":["unit-testing","mvc","html-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":609,"score":2,"question_id":3946273,"title":".net mvc2 custom HtmlHelper extension unit testing","body":"<p>My goal is to be able to unit test some custom HtmlHelper extensions - which use RenderPartial internally.</p>\n\n<p><a href=\"http://ox.no/posts/mocking-htmlhelper-in-asp-net-mvc-2-and-3-using-moq\" rel=\"nofollow\">http://ox.no/posts/mocking-htmlhelper-in-asp-net-mvc-2-and-3-using-moq</a></p>\n\n<p>I've tried using the method above to mock the HtmlHelper.  However, I'm running into Null value exceptions.\n\"Parameter name: view\"</p>\n\n<p>Anyone have any idea??  Thanks.</p>\n\n<p>Below are the ideas of the code:</p>\n\n<pre><code>    [TestMethod]\n    public void TestMethod1()\n    {\n        var helper = CreateHtmlHelper(new ViewDataDictionary());\n        helper.RenderPartial(\"Test\");  // supposingly this line is within a method to be tested\n        Assert.AreEqual(\"test\", helper.ViewContext.Writer.ToString());\n    }\n\n\n    public static HtmlHelper CreateHtmlHelper(ViewDataDictionary vd)\n    {\n        Mock&lt;ViewContext&gt; mockViewContext = new Mock&lt;ViewContext&gt;(\n            new ControllerContext(\n                new Mock&lt;HttpContextBase&gt;().Object,\n                new RouteData(),\n                new Mock&lt;ControllerBase&gt;().Object),\n            new Mock&lt;IView&gt;().Object,\n            vd,\n            new TempDataDictionary(),\n            new StringWriter());\n        var mockViewDataContainer = new Mock&lt;IViewDataContainer&gt;();\n        mockViewDataContainer.Setup(v =&gt; v.ViewData)\n            .Returns(vd);\n        return new HtmlHelper(mockViewContext.Object,\n                                mockViewDataContainer.Object);\n    }\n</code></pre>\n"},{"tags":["unit-testing","grails","groovy","spock","geb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13017050,"title":"Using Spock, how do you run a particular feature via the grails command line?","body":"<p>I am running Spock tests for unit and functional tests. Awesome library.</p>\n\n<p>I am wondering how to run a specific feature of a Spock Spec from the grails command line.</p>\n\n<p>I know how to run all spock tests or run a specific spec but I don't know how to run a specific feature.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","unit-testing","nunit"],"answer_count":5,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":128,"score":7,"question_id":13014385,"title":"NUnit test Bug? Expected <MyType> But was <MyType>","body":"<pre><code>[Test]\npublic void testMultiplication()\n{\n    var five=new Dollar(5);\n    Assert.AreEqual(new Dollar(10), five.times(2));\n    Assert.AreEqual(new Dollar(15), five.times(3));\n}\n</code></pre>\n\n<p>Dollar class</p>\n\n<pre><code>public class Dollar\n{\n    private int amount;\n\n    public Dollar(int amount)\n    {\n        this.amount = amount;\n    }\n\n    public Dollar times(int multiplier)\n    {\n        return new Dollar(amount * multiplier);\n    }\n\n    public bool equals(Object theObject)\n    {\n       Dollar dollar = (Dollar) theObject;\n\n       return amount == dollar.amount;\n    }\n}\n</code></pre>\n\n<p>On line  Assert.AreEqual(new Dollar(10), five.times(2)); test fail with error:</p>\n\n<p>Expected: TDDbooks.Dollar</p>\n\n<p>But was:  TDDbooks.Dollar</p>\n"},{"tags":["javascript","unit-testing","mocha","zombie.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13014866,"title":"Bind Code to ZombieJS HTML in Unit Test","body":"<p>I have some unit tests for client-side JS which I run. These tests include lots of jQuery code which assumes a certain document and certain elements in that document. I would like to mock the HTML using ZombieJS and then assert certain things about the state of the document.</p>\n\n<p>I cannot figure out how to get the ZombieJS document to stand-in for an HTML document in my tests. Zombie does have an \"evaluate\" feature which lets you run JS in the Zombie document. Is there any easier way to do this?</p>\n"},{"tags":["android","unit-testing","adb"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":492,"score":1,"question_id":4191285,"title":"How to start Android test unit from command line","body":"<p>Im writing automatic test for my program. I have completed writing it on Android. However, now I want to write a script to run it from command line adb shell. Do you know how to do it? As I test many components of my program, running it from script will save lots of my effort.</p>\n\n<p>Thanks.</p>\n\n<p>Here is my manifest file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; &lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n  package=\"com.wsandroid.test\"\n  android:versionCode=\"1\"\n  android:versionName=\"1.0\"&gt;\n&lt;application android:icon=\"@drawable/icon\" android:label=\"@string/app_name\"&gt;\n&lt;uses-library android:name=\"android.test.runner\" /&gt;\n&lt;/application&gt;\n&lt;uses-sdk android:minSdkVersion=\"3\" /&gt;\n&lt;instrumentation android:targetPackage=\"com.wsandroid\" android:name=\"android.test.InstrumentationTestRunner\" /&gt;\n</code></pre>\n\n<p> </p>\n\n<p>Thanks</p>\n"},{"tags":["unit-testing","frameworks","mutation-testing"],"answer_count":11,"favorite_count":8,"up_vote_count":13,"down_vote_count":0,"view_count":1384,"score":13,"question_id":246495,"title":"What mutation-testing frameworks exist?","body":"<p>In another <a href=\"http://stackoverflow.com/questions/242650/is-mutation-testing-useful-in-practice\">question</a> I asked if <a href=\"http://en.wikipedia.org/wiki/Mutation_testing\" rel=\"nofollow\">mutation-testing</a> is useful in practice. As I didn't get any answers that satisfy me, I want to check the current tools myself. So I need an overview about current existing mutation-test-frameworks. Which of them are most usable and why?</p>\n\n<ul>\n<li>I program in Java, so I would prefer Java-tools, but I would risk a look at interesting frameworks for different languages.</li>\n<li>I want to integrate in an automatic build-process, so I would prefer tools that can be executed through command-line.</li>\n</ul>\n"},{"tags":["java","unit-testing","mocking","final"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13012477,"title":"Is it possible to mock a private static final String literal?","body":"<p>My guess for the question above is that it is not possible but I need a confirmation. So the problem is that there is an Oracle specific SELECT (ROWNUM and FOR UPDATE SKIP LOCKED keywords are used) in a private static final String.</p>\n\n<pre><code>private static final String REC_QUERY_SELECT = \"SELECT * FROM ... WHERE ROWNUM &lt;=1 for update skip locked\";\n</code></pre>\n\n<p>I want to unittest it whit HSQL but HSQL doesn't know these Oracle keywords. I would like to modify the REC_QUERY_SELECT variable (modify the SELECT to a simpler one) but I cannot as it is final and String literal.\nIs there a way to modify it? (I mustn't change the codebase, I just have to write unit tests). I tried this code too:</p>\n\n<pre><code>field.setAccessible(true);\nField modifiersField = Field.class.getDeclaredField(\"modifiers\");\nmodifiersField.setAccessible(true);\nmodifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\nfield.set(null, newValue);\n</code></pre>\n"},{"tags":["c#","unit-testing","resharper","signalr","ncrunch"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":136,"score":0,"question_id":12896726,"title":"Unit tests running in NCrunch but not in Resharper","body":"<p>I've got a set of unit tests that used to work very nicely in NCrunch and the Resharper 7 (in VS2012) test runner. I added SignalR and SignalR.Ninject through NuGet, and now my unit tests work in NCrunch, but no longer run in Resharper.</p>\n\n<p>The TestFixtureSetUp failed with the following error: </p>\n\n<pre><code>SetUp : System.IO.FileLoadException : Could not load file or assembly \n'Ninject, Version=2.2.0.0,    Culture=neutral, PublicKeyToken=c7192dc5380945e7' \nor one of its dependencies. The located assembly's manifest definition does \nnot match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nat ProjectName.Infrastructure.SiteResolver.BindSignalR(IKernel kernel)\nat ProjectName.Infrastructure.SiteResolver.RegisterServices(IKernel kernel) in SiteResolver.cs: line 29\nat ProjectName.Tests.Unit.DataTests.Init() in DataTests.cs: line 48\n</code></pre>\n\n<p>In App.Config, I have </p>\n\n<pre><code>&lt;runtime&gt;\n  &lt;assemblyBinding&gt;\n    &lt;dependentAssembly&gt;\n      &lt;assemblyIdentity name=\"Ninject\" publicKeyToken=\"c7192dc5380945e7\" culture=\"neutral\" /&gt;\n      &lt;bindingRedirect oldVersion=\"0.0.0.0-3.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n    &lt;/dependentAssembly&gt;\n  &lt;/assemblyBinding&gt;\n&lt;/runtime&gt;\n</code></pre>\n\n<p>The equivalent in Web.Config works in the actual MVC project. </p>\n\n<p>Any ideas how to fix it?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I've tried with shadow-copying on and off, with no difference in outcome.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Output from log file generated from Jim Skim's answer:</p>\n\n<pre><code>*** Assembly Binder Log Entry  (15/10/2012 @ 16:43:47) ***\n\nThe operation failed.\nBind result: hr = 0x80131040. No description available.\n\nAssembly manager loaded from:  C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\clr.dll\nRunning under executable  C:\\Program Files (x86)\\JetBrains\\ReSharper\\v7.0\\Bin\\JetBrains.ReSharper.TaskRunner.CLR4.MSIL.exe\n--- A detailed error log follows. \n\n=== Pre-bind state information ===\nLOG: User = ######\\simon\nLOG: DisplayName = Ninject, Version=2.2.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7\n (Fully-specified)\nLOG: Appbase = file:///Z:/ProjectName/ProjectName.Tests.Unit/bin/Debug\nLOG: Initial PrivatePath = NULL\nLOG: Dynamic Base = NULL\nLOG: Cache Base = NULL\nLOG: AppName = ProjectName.Tests.Unit\nCalling assembly : ProjectName.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.\n===\nLOG: This bind starts in default load context.\nLOG: Using application configuration file: Z:\\ProjectName\\ProjectName.Tests.Unit\\bin\\Debug\\ProjectName.Tests.Unit.dll.config\nLOG: Using host configuration file: \nLOG: Using machine configuration file from C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\config\\machine.config.\nLOG: Post-policy reference: Ninject, Version=2.2.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7\nLOG: GAC Lookup was unsuccessful.\nLOG: Attempting download of new URL file:///Z:/ProjectName/ProjectName.Tests.Unit/bin/Debug/Ninject.DLL.\nLOG: Assembly download was successful. Attempting setup of file: Z:\\ProjectName\\ProjectName.Tests.Unit\\bin\\Debug\\Ninject.dll\nLOG: Entering run-from-source setup phase.\nLOG: Assembly Name is: Ninject, Version=3.0.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7\nWRN: Comparing the assembly name resulted in the mismatch: Major Version\nERR: The assembly reference did not match the assembly definition found.\nERR: Run-from-source setup phase failed with hr = 0x80131040.\nERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated.\n</code></pre>\n"},{"tags":["c++","python","unit-testing","boost","boost-test"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12731079,"title":"How to write a script to perform automatic test with boost::unit_test?","body":"<p>I am a newbie of automatic unit test in C++. I have followed the instruction of boost::unit_test and finished a test scheme by calling function <code>unit_test_main</code> in boost::unit_test. It is no problem for me to run the test program. However, I have problems with pass the arguments to the test function. Maybe, the following codes can illustrate my problem much better:</p>\n\n<pre><code>#ifndef MAIN_CPP_\n#define MAIN_CPP_\n\n\n\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;assert.h&gt;\n\n#include &lt;boost/program_options.hpp&gt;\n#include &lt;boost/test/test_tools.hpp&gt;\n#include &lt;boost/test/execution_monitor.hpp&gt;\n#include &lt;boost/test/unit_test.hpp&gt;\n\n\n\n\nusing namespace boost::program_options;\nusing namespace std;\nusing namespace boost;\nusing namespace boost::unit_test;\n\n\n\n\n/**\n* the global test suite\n*/\n\nboost::unit_test::test_suite* get_feelfree_test_suite();\nboost::unit_test::test_suite* main_global_test_suite;\n\n/**\n* name of the test suite\n*/\nstd::string current_global_test_suite_name;\n\n#ifdef BOOST_TEST_ALTERNATIVE_INIT_API\n\nbool  run_global_test_suite () {\n    boost::unit_test::test_suite&amp; masterTestSuite = framework::master_test_suite();\n\n    if(masterTestSuite.size() != 0) {\n        test_unit_id formerTestSuite = masterTestSuite.get(current_global_test_suite_name);\n        masterTestSuite.remove(formerTestSuite);\n\n    }\n    masterTestSuite.add(main_global_test_suite);\n    current_global_test_suite_name = main_global_test_suite-&gt;p_name.get();\n\n    return true;\n}\n#else\n    test_suite* run_global_test_suite(int, char* []) {\n    return main_global_test_suite;\n}\n#endif\n\n/**\n* Obtain test program options\n*/\nint obtain_options(char **optionLine, int argc, char** argv); \n\n\n\n\n\n/**\n* This function is used to run the test program, and the procedure is really standard.\n*/\nint main( int argc, char* argv[] )\n{\n    try \n    {\n        /**\n        * Step 1. obtain options\n        */\n        char* optionLine[1024];\n        int len ;\n        len = obtain_options(optionLine, argc, argv);\n        /**\n        * Step 2. perform unit test based on user's options\n        */\n        int test_status=0; \n        main_global_test_suite =   get_feelfree_test_suite();\n        test_status = unit_test_main(run_global_test_suite, len, optionLine);\n        return test_status;\n    } \n    catch(std::exception&amp; e)\n    {\n        std::cout &lt;&lt; e.what() &lt;&lt; std::endl;\n        return 1;\n    }   \n    catch (const std::string&amp; s) \n    {\n        std::cout &lt;&lt; s &lt;&lt; std::endl;\n        return 1;\n    }\n    catch (...)\n    {\n        return 1;\n    }\n\n\n}\n/** @} */ \n\n\nint obtain_options(char **optionLine, int argc,  char* argv[])\n{\n    // 1. All the options for testing the program\n        options_description desc(\"Allowed options\");\n        desc.add_options()(\"help\", \"produce help message\")\n        (\"detect_memory_leaks\", value&lt;bool&gt;()-&gt;default_value(false), \"test configuration option (option of boost framework)\");\n        // 2. Perform parsing \n        variables_map vm;\n        store(parse_command_line(argc, argv, desc), vm);\n        notify(vm);\n        // 3. Illustrate the input \n        std::vector&lt;const char*&gt; options;\n        std::string testSuiteToRun;\n        if(vm.count(\"test_suite\")){  \n            testSuiteToRun = vm[\"test_suite\"].as&lt;string&gt;(); \n        }\n        else {\n            testSuiteToRun = \"main\";\n        }   \n\n        options.push_back(argv[0]);\n        if(vm.count(\"detect_memory_leaks\")) {  \n            bool detect = vm[\"detect_memory_leaks\"].as&lt;bool&gt;();\n            if(detect) {\n                options.push_back(\"--detect_memory_leaks=1\");\n            }\n            else {\n            options.push_back(\"--detect_memory_leaks=0\");\n            }\n        }\n        else {\n            options.push_back(\"--detect_memory_leaks=0\");\n        }\n\n        // 4. Obtain all the parameters in the format of char** \n\n        assert(options.size() &lt; 1024);\n        std::copy(options.begin(), options.end(), const_cast&lt;const char**&gt;(optionLine));\n\n        return options.size();\n\n}\n\nvoid Testsub(const std::string &amp;name)\n{\n    cout&lt;&lt;\"File_name: \"&lt;&lt;name&lt;&lt;endl;\n}\nvoid Testabc( )\n{\n    std::vector&lt;std::string &gt; name_array;\n    name_array.push_back(\"name 1\");\n    name_array.push_back(\"name 2\");\n    for(int i=0; i&lt;name_array.size(); i++)\n        Testsub(name_array[i]);\n}\n\n\nboost::unit_test::test_suite* get_feelfree_test_suite()\n{\n    test_suite* ts = BOOST_TEST_SUITE( \"unit_geometric\" );\n    ts-&gt;add( BOOST_TEST_CASE(&amp;Testabc) ); \n    return ts;\n}\n\n\n#endif\n</code></pre>\n\n<p>As you can see, in this test framework, the main function I want to test is <strong>Testsub</strong>, which relies on the input argument <strong>const std::string &amp;name</strong>. However, I can not pass any arguments via the test suite function <strong>get_feelfree_test_suite</strong>. Therefore, in this test program, I wrote another test function <strong>Testabc</strong>, where all the possible file test lists are given and passed to <strong>Testsub</strong>. This is definitely not the best solution. I am wondering whether there are other solutions. Several solutions are in my mind, but I do not know whether they are good solutions:</p>\n\n<ul>\n<li>Solution 1: try to figure out a way to pass arguments to\n<strong>get_feelfree_test_suite</strong> from the main function ( <code>int main( int argc, char* argv[]</code> ). After that, write a script to run the program\nseveral times. In windows, one possible script is .bat script. For\nthis solution, I do not know how to implement it. </li>\n<li>Solution 2:    write a list file, where all the possible input\nfile test names are    given, and then read the list file in the\nprogram. This is much    easier to implement.</li>\n</ul>\n\n<p>I also hear that Python can be very easily incorporated in the test framework, but I have no idea about that. Anyway, I am open to all the possible solutions, and thanks! </p>\n"},{"tags":["java","unit-testing","gwt","junit","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":13007839,"title":"Mocking chained method calls using mockito?","body":"<p>I need to mock this:<br></p>\n\n<pre><code> void handleCellPreview(CellPreviewEvent&lt;List&lt;String&gt;&gt; event) {\n    Element cellElement = event.getNativeEvent().getEventTarget().cast();\n }\n</code></pre>\n\n<p>I am doing this:</p>\n\n<pre><code>CellPreviewEvent&lt;List&lt;String&gt;&gt; cellPreviewEvent = Mockito.mock(\n        CellPreviewEvent.class, Mockito.RETURNS_DEEP_STUBS);\nElement cellElement = Mockito.mock(Element.class, Mockito.RETURNS_DEEP_STUBS);\nEventTarget eventTarget = Mockito.mock(EventTarget.class);\n  Mockito.when(cellPreviewEvent.getNativeEvent().getEventTarget().cast()).thenReturn(cellElement);\n</code></pre>\n\n<p><br></p>\n\n<p>And I am getting following error:</p>\n\n<pre><code>testHandleCellPreview(client.view.MyViewTest)java.lang.NullPointerException\n    at com.google.gwt.dom.client.NativeEvent.getEventTarget(NativeEvent.java:137)\n    atclient.view.MyViewTest.testHandleCellPreview(MyViewTest.java:76)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n</code></pre>\n\n<p><br>I've also seen, the same question below:\n<br>\n<a href=\"http://stackoverflow.com/q/7926891/768894\">mock or stub for chained call</a><br><br>\nCan anybody please point out what I am missing?\n<br><br>\nThanks,<br>\nMohit</p>\n"},{"tags":["java","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13009706,"title":"Interface used to make it more testable","body":"<p>I was looking at android source code and i found this code.</p>\n\n<pre><code>/**\n * Interface used in {@link #createUniqueFile} instead of {@link File#createNewFile()} to make\n * it testable.\n */\n/* package */ interface NewFileCreator {\n    public static final NewFileCreator DEFAULT = new NewFileCreator() {\n                @Override public boolean createNewFile(File f) throws IOException {\n                    return f.createNewFile();\n                }\n    };\n    public boolean createNewFile(File f) throws IOException ;\n}\n</code></pre>\n\n<p>How is it more testable? And can anybody redirect me to the place where i can see more examples?</p>\n"},{"tags":["c#","unit-testing","xunit.net"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1082,"score":2,"question_id":9006615,"title":"Are there any good documentations / books / tutorials for xUnit.NET?","body":"<p>On my search for a Unit-Testing tool for C# i have found xUnit.NET. Untill now, i read most of the articles on <a href=\"http://xunit.codeplex.com//\" rel=\"nofollow\">http://xunit.codeplex.com/</a> and even tried out the examples given at <a href=\"http://xunit.codeplex.com/wikipage?title=HowToUse&amp;referringTitle=Home\" rel=\"nofollow\">How do I use xUnit.net?</a>. </p>\n\n<p>But sadly, on the offical page i could just find the basic informations to xUnit.NET. Is there any further information avadible for it?</p>\n\n<p>Thank you!<br>\nBirgit</p>\n"},{"tags":["asp.net","unit-testing","nunit","watin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":162,"score":0,"question_id":4444275,"title":"Verifying binary content with WatiN","body":"<p>I'm testing a site that serves up some binary (i.e. non-HTML) content. Some links directly deliver custom images, other links custom PDF's.</p>\n\n<p>I'm building test cases in WatiN and NUnit. Wondering if there's a way, using WatiN to get it load a page and then get the byte[] contents of that page.</p>\n\n<p>Currently, I'm just launching a WebClient to grab the content, rather than through WatiN but that's more untested code in my test suite.</p>\n\n<p>Anyone else doing this and have suggestions?</p>\n"},{"tags":["django","unit-testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12150169,"title":"Mocking Django Model ImageField backend","body":"<p>I have a model with an ImageField that is backed by django-storages' S3Boto.  I have a test the exercises the \"upload image\" view, but the fact that it is uploading the image to S3 is slowing down my test suite.</p>\n\n<p>In the interest of speeding up my tests, what is the best practice for dealing with this issue?  Should I mock out S3Boto?  Perhaps there is a memory backed storage backend that works well for testing (automatic cleanup would be nice!)?</p>\n"},{"tags":["unit-testing","spring","embedded-database","h2"],"answer_count":4,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":9698,"score":7,"question_id":2012292,"title":"Spring configuration for embedded H2 database for tests","body":"<p>What does your Spring configuration for a datasource with embedded <a href=\"http://www.h2database.com/html/main.html\" rel=\"nofollow\">h2 database</a> that you use for integration (JUnit-)tests look like? My first try with a <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/datasource/SingleConnectionDataSource.html\" rel=\"nofollow\">SingleConnectionDataSource</a> basically worked, but failed on more complicated tests where you need several connections at the same time or suspended transactions. You might start h2 in <a href=\"http://stackoverflow.com/questions/1503079/start-the-h2-database-in-server-mode-via-spring\">tcp based server mode</a> as well, but this is probably not the fastest communication mode for a temporary embedded database in memory. What are the possibilities and their advantages / disadvantages? And how do you create the tables / populate the database?</p>\n\n<p>Update: Let's specify some concrete requirements that are important for such tests.</p>\n\n<ul>\n<li>The database should be temporary and in memory</li>\n<li>The connection should probably not use tcp to be fast</li>\n<li>It would be nice if I could use a database tool to inspect the content of the database during debugging</li>\n<li>We have to define a datasource since we can't use the application servers datasource in Unittests</li>\n</ul>\n"},{"tags":["android","unit-testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":274,"score":0,"question_id":8688252,"title":"What does testAndroidTestCaseSetUpProperly do","body":"<p>I know that in Android, the extra test testAndroidTestCaseSetUpProperly is often added to test cases (not sure whether it happens all the time). I've never needed to give it much though before, but whilst analysing some tests which use a ContentProvider I noticed something strange.</p>\n\n<p>When I added the following logging in my ContentProvider:</p>\n\n<pre><code>static\n{\n    Log.d(\"UKMPG\", \"Initialising URIMatcher\");\n    uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);\n    //add uris\n}\n\n    @Override\npublic boolean onCreate()\n{\n    Log.d(\"UKMPG\", \"onCreate() called in ContentProvider\");\n    //set up db\n}\n</code></pre>\n\n<p>I notice that these logs appear twice in logcat (blank lines added by me):</p>\n\n<pre><code>    12-31 13:00:07.112: D/AndroidRuntime(1135): &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; AndroidRuntime START &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n12-31 13:00:07.112: D/AndroidRuntime(1135): CheckJNI is ON\n12-31 13:00:07.333: D/AndroidRuntime(1135): --- registering native functions ---\n12-31 13:00:07.342: I/jdwp(1135): received file descriptor 21 from ADB\n12-31 13:00:07.592: D/ddm-heap(1135): Got feature list request\n12-31 13:00:08.072: D/ActivityManager(52): Uninstalling process com.fastplanet.ukmpgtracker\n12-31 13:00:08.112: I/ActivityManager(52): Start proc com.fastplanet.ukmpgtracker for added application com.fastplanet.ukmpgtracker: pid=1142 uid=10028 gids={1015}\n12-31 13:00:08.162: I/jdwp(1142): received file descriptor 10 from ADB\n12-31 13:00:08.222: D/ddm-heap(1142): Got feature list request\n12-31 13:00:08.502: I/TestRunner(1142): started: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:08.512: I/ActivityThread(1142): Publishing provider com.fastplanet.ukmpgtracker.data.UKMPG: com.fastplanet.ukmpgtracker.data.UKMPGContentProvider\n\n12-31 13:00:08.512: D/UKMPG(1142): Initialising URIMatcher\n12-31 13:00:08.522: D/UKMPG(1142): onCreate() called in ContentProvider\n\n12-31 13:00:08.552: I/TestRunner(1142): finished: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:08.552: I/TestRunner(1142): passed: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:08.582: D/ActivityManager(52): Uninstalling process com.fastplanet.ukmpgtracker\n12-31 13:00:08.582: D/ActivityManager(52): Force removing process ProcessRecord{43879630 1142:com.fastplanet.ukmpgtracker/10028} (com.fastplanet.ukmpgtracker/10028)\n12-31 13:00:08.582: I/Process(52): Sending signal. PID: 1142 SIG: 9\n12-31 13:00:08.602: D/ActivityManager(52): Received spurious death notification for thread android.os.BinderProxy@4394fed0\n12-31 13:00:08.612: D/AndroidRuntime(1135): Shutting down VM\n12-31 13:00:08.612: D/dalvikvm(1135): DestroyJavaVM waiting for non-daemon threads to exit\n12-31 13:00:08.622: D/dalvikvm(1135): DestroyJavaVM shutting VM down\n12-31 13:00:08.622: D/dalvikvm(1135): HeapWorker thread shutting down\n12-31 13:00:08.622: D/dalvikvm(1135): HeapWorker thread has shut down\n12-31 13:00:08.622: D/jdwp(1135): JDWP shutting down net...\n12-31 13:00:08.622: D/jdwp(1135): Got wake-up signal, bailing out of select\n12-31 13:00:08.622: I/dalvikvm(1135): Debugger has detached; object registry had 1 entries\n12-31 13:00:08.632: D/dalvikvm(1135): VM cleaning up\n12-31 13:00:08.642: D/dalvikvm(1135): LinearAlloc 0x0 used 684532 of 4194304 (16%)\n12-31 13:00:09.042: D/AndroidRuntime(1155): &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; AndroidRuntime START &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n12-31 13:00:09.042: D/AndroidRuntime(1155): CheckJNI is ON\n12-31 13:00:09.272: D/AndroidRuntime(1155): --- registering native functions ---\n12-31 13:00:09.282: I/jdwp(1155): received file descriptor 21 from ADB\n12-31 13:00:09.552: D/ddm-heap(1155): Got feature list request\n12-31 13:00:10.062: D/ActivityManager(52): Uninstalling process com.fastplanet.ukmpgtracker\n12-31 13:00:10.082: I/ActivityManager(52): Start proc com.fastplanet.ukmpgtracker for added application com.fastplanet.ukmpgtracker: pid=1162 uid=10028 gids={1015}\n12-31 13:00:10.133: I/jdwp(1162): received file descriptor 10 from ADB\n12-31 13:00:10.172: D/ddm-heap(1162): Got feature list request\n12-31 13:00:10.472: I/TestRunner(1162): started: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n\n\n12-31 13:00:10.512: D/UKMPG(1162): Initialising URIMatcher\n12-31 13:00:10.512: D/ActivityThread(1162): Loading provider com.fastplanet.ukmpgtracker.data.UKMPG: com.fastplanet.ukmpgtracker.data.UKMPGContentProvider\n12-31 13:00:10.522: D/UKMPG(1162): onCreate() called in ContentProvider\n\n\n12-31 13:00:10.532: I/ActivityThread(1162): Publishing provider com.fastplanet.ukmpgtracker.data.UKMPG: com.fastplanet.ukmpgtracker.data.UKMPGContentProvider\n12-31 13:00:10.532: D/UKMPG(1162): onCreate() called in ContentProvider\n12-31 13:00:10.812: I/TestRunner(1162): finished: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:10.822: I/TestRunner(1162): passed: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:10.842: D/ActivityManager(52): Uninstalling process com.fastplanet.ukmpgtracker\n12-31 13:00:10.852: D/ActivityManager(52): Force removing process ProcessRecord{4395a680 1162:com.fastplanet.ukmpgtracker/10028} (com.fastplanet.ukmpgtracker/10028)\n12-31 13:00:10.852: I/Process(52): Sending signal. PID: 1162 SIG: 9\n12-31 13:00:10.872: D/ActivityManager(52): Received spurious death notification for thread android.os.BinderProxy@4395fe78\n12-31 13:00:10.872: D/AndroidRuntime(1155): Shutting down VM\n12-31 13:00:10.872: D/dalvikvm(1155): DestroyJavaVM waiting for non-daemon threads to exit\n12-31 13:00:10.882: D/dalvikvm(1155): DestroyJavaVM shutting VM down\n12-31 13:00:10.882: D/dalvikvm(1155): HeapWorker thread shutting down\n12-31 13:00:10.892: D/dalvikvm(1155): HeapWorker thread has shut down\n12-31 13:00:10.892: D/jdwp(1155): JDWP shutting down net...\n12-31 13:00:10.892: D/jdwp(1155): Got wake-up signal, bailing out of select\n12-31 13:00:10.892: I/dalvikvm(1155): Debugger has detached; object registry had 1 entries\n12-31 13:00:10.892: D/dalvikvm(1155): VM cleaning up\n12-31 13:00:10.912: D/dalvikvm(1155): LinearAlloc 0x0 used 684532 of 4194304 (16%)\n</code></pre>\n\n<p>The first time they are logged, the application column is blank, but the second time my top level package appears.</p>\n\n<p>Any ideas what this extra test does?</p>\n"},{"tags":["unit-testing","testing","emulation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":146,"score":1,"question_id":6953763,"title":"Gameboy emulator testing strategies?","body":"<p>I'm writing a gameboy emulator, and am struggling with making sure opcodes are emulated correctly. Certain operations set flag registers, and it can be hard to track whether the flag is set correctly, and where.</p>\n\n<p>I want to write some sort of testing framework, but thought it'd be worth asking here for some help. Currently I see a few options:</p>\n\n<p>Unit test each and every opcode with several test cases. Issues are there are 256 8 bit opcodes and 50+ (can't remember exact number) 16 bit opcodes. This would take a long time to do properly.</p>\n\n<p>Write some sort of logging framework that logs a stacktrace at each operation and compares it to other established emulators. This would be pretty quick to do, and allows a fairly rapid overview of what exactly went wrong. The log file would look a bit like this:</p>\n\n<pre><code>...\nPC = 212 Just executed opcode 7c - Register: AF: 5 30 BC: 0 13 HL: 5 ce DE: 1 cd SP: ffad\nPC = 213 Just executed opcode 12 - Register: AF: 5 30 BC: 0 13 HL: 5 ce DE: 1 cd SP: ffad\n...\n</code></pre>\n\n<p>Cons are I need to modify the source of another emulator to output the same form. And there's no guarantee the opcode is correct as it assumes the other emulator is.</p>\n\n<p>What else should I consider?</p>\n\n<p>Here is my code if it helps: <a href=\"https://github.com/dbousamra/scalagb\" rel=\"nofollow\">https://github.com/dbousamra/scalagb</a></p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12796880,"title":"Is there a test framework for Python that supports test dependencies?","body":"<p>I'm looking for something similar to <a href=\"http://scg.unibe.ch/research/jexample\" rel=\"nofollow\">JExample</a>, where you can create tests that depend one upon the other. Is there a python testing framework out there that supports this concept?</p>\n"},{"tags":["python","unit-testing","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12998908,"title":"Is it possible to mock Python's built in print function?","body":"<p>I've tried </p>\n\n<pre><code>from mock import Mock\nimport __builtin__\n\n__builtin__.print = Mock()\n</code></pre>\n\n<p>But that raises a syntax error. I've also tried patching it like so</p>\n\n<pre><code>@patch('__builtin__.print')\ndef test_something_that_performs_lots_of_prints(self, mock_print):\n\n    # assert stuff\n</code></pre>\n\n<p>Is there any way to do this? </p>\n"},{"tags":["ruby-on-rails","ruby","ruby-on-rails-3","api","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12999344,"title":"Grab Rails requests/responses to test API client","body":"<p>I have a Rails API and an iPhone app. I'd like to add tests to the iPhone app to verify the API client functionality. The tests will have to work offline, i.e. without the Rails API server. I was thinking about capturing requests and responses from Rails API to produce an offline mock API server. Ideally, I'd like to automate that process (e.g. starting up a Rails server and using cURL won't work).</p>\n"},{"tags":["asp.net-mvc","unit-testing","mocking","rhino-mocks","moq"],"answer_count":6,"favorite_count":19,"up_vote_count":45,"down_vote_count":0,"view_count":9087,"score":45,"question_id":970198,"title":"How to mock the Request on Controller in ASP.Net MVC?","body":"<p>I have a controller in C# using the ASP.Net MVC framework</p>\n\n<pre><code>public class HomeController:Controller{\n  public ActionResult Index()\n    {\n      if (Request.IsAjaxRequest())\n        { \n          //do some ajaxy stuff\n        }\n      return View(\"Index\");\n    }\n}\n</code></pre>\n\n<p>I got some tips on mocking and was hoping to test the code with the following and RhinoMocks</p>\n\n<pre><code>var mocks = new MockRepository();\nvar mockedhttpContext = mocks.DynamicMock&lt;HttpContextBase&gt;();\nvar mockedHttpRequest = mocks.DynamicMock&lt;HttpRequestBase&gt;();\nSetupResult.For(mockedhttpContext.Request).Return(mockedHttpRequest);\n\nvar controller = new HomeController();\ncontroller.ControllerContext = new ControllerContext(mockedhttpContext, new RouteData(), controller);\nvar result = controller.Index() as ViewResult;\nAssert.AreEqual(\"About\", result.ViewName);\n</code></pre>\n\n<p>However I keep getting this error:</p>\n\n<blockquote>\n  <p>Exception\n    System.ArgumentNullException:\n  System.ArgumentNullException : Value\n  cannot be null.   Parameter name:\n  request   at\n  System.Web.Mvc.AjaxRequestExtensions.IsAjaxRequest(HttpRequestBase\n  request)</p>\n</blockquote>\n\n<p>Since the <code>Request</code> object on the controller has no setter. I tried to get this test working properly by using recommended code from an answer below.</p>\n\n<p>This used Moq instead of RhinoMocks, and in using Moq I use the following for the same test:</p>\n\n<pre><code>var request = new Mock&lt;HttpRequestBase&gt;();\n// Not working - IsAjaxRequest() is static extension method and cannot be mocked\n// request.Setup(x =&gt; x.IsAjaxRequest()).Returns(true /* or false */);\n// use this\nrequest.SetupGet(x =&gt; x.Headers[\"X-Requested-With\"]).Returns(\"XMLHttpRequest\");\n\nvar context = new Mock&lt;HttpContextBase&gt;();\ncontext.SetupGet(x =&gt; x.Request).Returns(request.Object);\nvar controller = new HomeController(Repository, LoginInfoProvider);\ncontroller.ControllerContext = new ControllerContext(context.Object, new RouteData(), controller);\nvar result = controller.Index() as ViewResult;\nAssert.AreEqual(\"About\", result.ViewName);\n</code></pre>\n\n<p>but get the following error:</p>\n\n<blockquote>\n  <p>Exception     System.ArgumentException:\n  System.ArgumentException : Invalid\n  setup on a non-overridable member:    x\n  => x.Headers[\"X-Requested-With\"]  at Moq.Mock.ThrowIfCantOverride(Expression\n  setup, MethodInfo methodInfo)</p>\n</blockquote>\n\n<p>Again, it seems like I cannot set the request header.\nHow do I set this value, in RhinoMocks or Moq?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":48,"score":-2,"question_id":12978522,"title":"controller mvc3 unit test","body":"<p>How to write unit test for</p>\n\n<pre><code>public ActionResult Details()\n{\n    EmployeeDTO employee = this.EmployeeService.GetLoggedInEmployee();\n    EmployeeModel model = assembler.ToEmployeeModel(employee);\n    model.Title = GetEmployeeNameTitle(employee);\n    model.Controller = \"LoanProcessor\";\n    model.SelectedTab = MainNavTabs.LoanProcessor;\n    return View(model);\n}\n</code></pre>\n\n<p>I have no idea how to solve it.</p>\n"},{"tags":["unit-testing","code-organization"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":504,"score":5,"question_id":3843171,"title":"Unit-testing with dependencies between tests","body":"<p>How do you do unit testing when you have</p>\n\n<ul>\n<li>some general unit tests</li>\n<li>more sophisticated tests checking edge cases, depending on the general ones</li>\n</ul>\n\n<p>To give an example, imagine testing a CSV-reader (I just made up a notation for demonstration),</p>\n\n<pre><code>def test_readCsv(): ...\n\n@dependsOn(test_readCsv)\ndef test_readCsv_duplicateColumnName(): ...\n\n@dependsOn(test_readCsv)\ndef test_readCsv_unicodeColumnName(): ...\n</code></pre>\n\n<p>I expect sub-tests to be run only if their parent test succeeds. The reason behind this is that running these tests takes time. Many failure reports that go back to a single reason wouldn't be informative, either. Of course, I could shoehorn all edge-cases into the main test, but I wonder if there is a more structured way to do this.</p>\n\n<p>I've found these related but different questions,</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/1838262/how-to-structure-unit-tests-that-have-dependencies\">How to structure unit tests that have dependencies?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/1368900/unit-testing-is-it-bad-form-to-have-unit-test-calling-other-unit-tests\">Unit Testing - Is it bad form to have unit test calling other unit tests</a></li>\n</ul>\n\n<p>UPDATE:</p>\n\n<p>I've found <a href=\"http://testng.org/doc/documentation-main.html#dependent-methods\" rel=\"nofollow\">TestNG</a> which has great built-in support for test dependencies.  You can write tests like this,</p>\n\n<pre><code>@Test{dependsOnMethods = (\"test_readCsv\"))\npublic void test_readCsv_duplicateColumnName() {\n   ...\n}\n</code></pre>\n"},{"tags":["unit-testing","events","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":789,"score":4,"question_id":4124054,"title":"Raising events from a mock/stub using Rhino Mocks","body":"<p>How can I raise an event from a mock/stub using Rhino Mocks?</p>\n\n<p>I've found some answers to this question on the web, but they all seem to use the Record/Replay-syntax, but I'm using the Arrange/Act/Assert syntax.</p>\n\n<p>Any suggestions?</p>\n\n<p>A little example...</p>\n\n<p>Let's say I'm using the MVVM pattern and have this model class:</p>\n\n<pre><code>public class MyModel\n{\n    private int _myValue;\n\n    public event EventHandler ValueChanged;\n\n    public void SetValue(int newValue)\n    {\n        _myValue = newValue;\n        if (ValueChanged != null)\n        {\n            ValueChanged(this, null);\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see the class has an integer value and a method that sets it. When the value is set, a <code>ValueChanged</code> event is raised.</p>\n\n<p>This model class is used by a viewmodel:</p>\n\n<pre><code>public class MyViewModel\n{\n    private MyModel _myModel;\n\n    public MyViewModel(MyModel myModel)\n    {\n        _myModel = myModel;\n        _myModel.ValueChanged += ValueChangedHandler;\n    }\n\n    private void ValueChangedHandler(object sender, EventArgs e)\n    {\n        MyString = \"Value has changed\";\n    }\n\n    public string MyString { get; set; }\n}\n</code></pre>\n\n<p>This viewmodel listen to the <code>ValueChanged</code> event on the model and updates when it is raised.</p>\n\n<p>Now I want to test that the viewmodel is updated when the model  raises the event.</p>\n\n<pre><code>[TestMethod]\npublic void MyViewModel_ModelRaisesValueChangedEvent_MyStringIsUpdated()\n{\n    //Arrange.\n    var modelStub = MockRepository.GenerateStub&lt;MyModel&gt;();\n    MyViewModel viewModel = new MyViewModel(modelStub);\n\n    //Act\n    -HERE I WANT TO RAISE THE VALUE CHANGED EVENT FROM modelStub.\n\n    //Assert.\n    Assert.AreEqual(\"Value has changed\", viewModel.MyString);\n}\n</code></pre>\n\n<p>Note that this is just an example and not my actual code (which is more complex). I hope you can disregard any typos and other small mistakes.</p>\n"},{"tags":["java","unit-testing","java-ee","jboss-arquillian"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12991384,"title":"Using a different persistence.xml file in tests with Arquillian","body":"<p>I am using a standard Maven project and I have one persistence.xml in the java resources folder and another persistence.xml in the test folder. How can I use the persistence.xml from the test folder in the arquillian test? Or isn't that a normal thing to do? </p>\n"},{"tags":["unit-testing","grails","grails-2.0","hibernate-criteria"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12834724,"title":"Grails 2 'order' criteria not working in unit tests","body":"<p>I'm using grails 2.1.0 and groovy 1.8. I have the following code in a service:</p>\n\n<pre><code>def listServerPartners() {\n    ServerModel.withCriteria {\n        partner {\n            order('name', 'asc')\n        }\n        projections {\n            distinct('partner')\n        }\n    }\n}\n</code></pre>\n\n<p>This works fine for both the running application and integration tests. However, when I try to use with unit tests, I get a blank list as a result. </p>\n\n<p>I noticed that if I changed the above code to the code below and implement the <strong>comparable</strong> interface in the object partner, the unit tests work, but then the application and integration tests don't. </p>\n\n<pre><code>def listServerPartners() {\n    ServerModel.withCriteria {\n        projections {\n            distinct('partner')\n        }\n        order('partner', 'asc')\n    }\n}\n</code></pre>\n\n<p>Looking at the SQL when running the application, I notice that for the first code, I get a <pre>\"order by partner_al1_.PartnerName asc\"</pre> and for the second one, I get a <pre>\"order by partner_al1_.Partner_Id asc\"</pre>, what is obviously what I don't want.</p>\n\n<p>Any suggestions about how to mock the correctly behavior that I have when running the application and integration tests for the unit tests?</p>\n\n<p><strong>Updated: Output from Unit test:</strong></p>\n\n<pre><code>assert Partner.list() == results\n               |      |  |\n               |      |  []\n               |      false\n               [Partner 4, Partner 3, Partner 2, Partner 1]\n</code></pre>\n\n<p>-- Thanks</p>\n"},{"tags":["java","unit-testing","collections"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":118,"score":6,"question_id":12023734,"title":"Are there any publically available java collections unit tests?","body":"<p>Tests which i can plug-in my implementation of Set and ListIterator specifically.</p>\n"},{"tags":["c#","unit-testing","reflection","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12992899,"title":"RhinoMocks.GenerateMock with generic type, GetGenericArguments is empty","body":"<p>Can anyone shed any light on how I can achieve this with RhinoMocks? I want to create a mock of a generic type (with two TypeParams) and in the code-under test I am calling GetType().GetGenericArguments(), expecting two Types. </p>\n\n<p>e.g. I expect the following test to pass, but it fails:</p>\n\n<pre><code>    [Test]  \n    public void Test()\n    {\n        // Mocking IDictionary&lt;THash, T&gt; fails, but new Dictionary&lt;THash, T&gt; passes\n        var myMock = MockRepository.GenerateStub&lt;IDictionary&lt;int, float&gt;&gt;();\n        var args = myMock.GetType().GetGenericArguments();\n        Assert.That(args, Is.EquivalentTo(new Type[] {typeof(int), typeof(float)}));\n    }\n</code></pre>\n"},{"tags":["java","unit-testing","tdd","noise-generator"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":72,"score":2,"question_id":12992742,"title":"Is splitting a class to make it easier to test an acceptable behavior?","body":"<p>I know this is somewhat of a subjective question, but I could find no answer to it. I'll give details, though:</p>\n\n<p>I have a class that has a lot of configuration methods, so that you can run a specific algorithm with very different settings. After you properly configure it, you can just call a method \"generate()\", and it returns a filled 2d array. That's the method that is hard to test. It is that hard because it returns a <a href=\"http://en.wikipedia.org/wiki/Heightmap\" rel=\"nofollow\" title=\"heightmap\">heightmap</a>, which contains randomness and a large amout of data. Generally, I would split it, but that would break encapsulation, because in practice the data and the steps of the algorithm changes for the same reason, and no one would use one separeted from the other. I know I can mock the randomness (which I'm actually doing), but in either way it is too much data to be practical to writes tests for (for instance a mere 32 by 32 map would require 1024 assertions on a single test). Besides that, generating a big map can take up to 3 or 4 seconds, which is obviously not good in a test ambient.</p>\n\n<p>Also, I tried first to separate the data from the algorithm, and make the algorithm pure functional (no data, only arguments). While this was testable (because I split the algorithm), this lead to lots of arguments being passed all around and a rather procedural-looking code.</p>\n\n<p>So I'm not sure how to procede here. Splitting the class makes it easier to test and to understand, but also breaks encapsulation really bad. I would appreciate any thoughs on the subject, either practical or theoretical.</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>Edit:</strong> This is the code that I wrote and is procedural-like.</p>\n\n<p>JavaRandom, Attenuation and RandomNumberProcessor are classes that I should have kept together.</p>\n\n<p>This is the data used by the algorithm:</p>\n\n<pre><code>package noise;\n\nimport noise.attenuation.DefaultAttenuation;\n\npublic final class DiamondSquareSettings {\n\n    public static final class Builder {\n\n            private static final double NEVER_ASSIGNED = 1.1;\n            private static final long DEFAULT_RNG_SEED = 33609606l;\n            private static final JavaRandom DEFAULT_RANDOM = new JavaRandom(DEFAULT_RNG_SEED);\n            private static final double DEFAULT_RANGE = 1;\n            private static final Attenuation defaultAttenuation = new DefaultAttenuation(0.7);\n\n            private Random builderRandom = DEFAULT_RANDOM;\n            private final double[] builderSeeds = {NEVER_ASSIGNED , NEVER_ASSIGNED , NEVER_ASSIGNED , NEVER_ASSIGNED};\n            private double builderRange = DEFAULT_RANGE;\n            private Attenuation builderAttenuation = defaultAttenuation;\n\n            public Builder attenuation(final Attenuation attenuation) {\n                    validateAttenuation(attenuation);\n                    builderAttenuation = attenuation;\n                    return this;\n            }\n\n            public DiamondSquareSettings build(final int side) {\n                    validateSize(side);\n                    return new DiamondSquareSettings(side, builderRandom, builderSeeds, builderRange, builderAttenuation);\n            }\n\n            public Builder random(final long seed) {\n                    return random(new JavaRandom(seed));\n            }\n\n            public Builder randomRange(final double range) {\n                    validateRange(range);\n                    builderRange = range;\n                    return this;\n            }\n\n            public Builder seed(final int seedPosition, final double seedValue) {\n                    validateSeeds(seedPosition, seedValue);\n                    builderSeeds[seedPosition] = seedValue;\n                    return this;\n            }\n\n            Builder random(final Random random) {\n                    validateRandom(random);\n                    builderRandom = random;\n                    return this;\n            }\n\n            private void validateAttenuation(final Attenuation attenuation) {\n                    if (attenuation == null)\n                            throw new IllegalArgumentException(\"attenuation == null!\");\n            }\n\n            private void validateRandom(final Random random) {\n                    if (random == null)\n                            throw new IllegalArgumentException(\"random == null!\");\n            }\n\n            private void validateRange(final double range) {\n                    if (range &lt; 0)\n                            throw new IllegalArgumentException(\"range &lt; 0\" + \"\\nrange: \" + range);\n            }\n\n            private void validateSeeds(final int seedPosition, final double seedValue) {\n                    if (seedValue &gt; 1 || seedValue &lt; 0)\n                            throw new IllegalArgumentException(\"Invalid seed\" + \"\\nseedPosition: \" + seedPosition + \" seed: \"\n                                            + seedValue);\n            }\n\n            private void validateSize(final int side) {\n                    final double doubleExpoent = Math.log(side - 1) / Math.log(2);\n                    final int integerExpoent = (int) doubleExpoent; //TODO simplify more\n                    if (doubleExpoent != integerExpoent)\n                            throw new IllegalArgumentException(\"side is not a (power of two) plus one\" + \"\\nside: \" + side);\n            }\n    }\n\n    private final int side;\n    private final Random random;\n    private final double[] seeds;\n    private final double range;\n    private final Attenuation attenuation;\n\n    private DiamondSquareSettings(final int side, final Random random, final double[] seeds, final double range,\n                    final Attenuation attenuation) {\n            this.side = side;\n            this.random = random;\n            this.seeds = randomizeNeverAssignedSeeds(random, seeds, range);\n            this.range = range;\n            this.attenuation = attenuation;\n    }\n\n    public String getAttenuationInfo() {\n            return attenuation.toString();\n    }\n\n    public String getRandomInfo() {\n            return random.toString();\n    }\n\n    public double getRandomRange() {\n            return range;\n    }\n\n    public double getSeed(final int seedPosition) {\n            return seeds[seedPosition];\n    }\n\n    public int getSide() {\n            return side;\n    }\n\n    Attenuation getAttenuation() {\n            return attenuation;\n    }\n\n    Random getRandom() {\n            return random;\n    }\n\n    private double[] randomizeNeverAssignedSeeds(final Random random, final double[] seeds, final double range) {\n            final double[] properlyRandomizingSeeds = seeds;\n            for (int i = 0 ; i &lt; seeds.length ; i++)\n                    if (seeds[i] == Builder.NEVER_ASSIGNED)\n                            properlyRandomizingSeeds[i] = random.nextRandomValueInside(range);\n\n            return properlyRandomizingSeeds;\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>This is the bulk of the algorithm:</p>\n\n<pre><code>    package noise;\n\n    public final class DiamondSquare {\n\n    public static Noise generate(final DiamondSquareSettings settings) {\n            validateSettings(settings);\n            final DiamondSquareStep stepper = new DiamondSquareStep();\n            double[][] noiseArray = new double[settings.getSide()][settings.getSide()];\n            setupSeeds(settings, noiseArray);\n            final RandomNumberProcessor processor =\n                            new RandomNumberProcessor(settings.getRandomRange(), settings.getRandom(), settings.getAttenuation());\n            noiseArray = processDiamondSquare(settings, stepper, noiseArray, processor);\n            return new Noise(noiseArray);\n    }\n\n    private static double[][] processDiamondSquare(final DiamondSquareSettings settings,\n                    final DiamondSquareStep stepper, double[][] noiseArray, final RandomNumberProcessor processor) {\n            int stepSize = settings.getSide() - 1;\n            while (stepSize &gt;= 1) {\n                    noiseArray = stepper.diamondSquare(stepSize, noiseArray, processor);\n                    processor.nextStage();\n                    stepSize /= 2;\n            }\n            return noiseArray;\n    }\n\n    private static void setupSeeds(final DiamondSquareSettings settings, final double[][] noiseArray) {\n            noiseArray[0][0] = settings.getSeed(0);\n            noiseArray[settings.getSide() - 1][0] = settings.getSeed(1);\n            noiseArray[0][settings.getSide() - 1] = settings.getSeed(2);\n            noiseArray[settings.getSide() - 1][settings.getSide() - 1] = settings.getSeed(3);\n    }\n\n    private static void validateSettings(final DiamondSquareSettings settings) {\n            if (settings == null)\n                    throw new IllegalArgumentException(\"settings == null!\");\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>This are the other steps of the algorithm:</p>\n\n<pre><code>package noise;\n\n\nfinal class DiamondSquareResolver {\n\n    private static final double OUT_OF_RANGE = 0; //TODO this code smells. It alters slightly the final result. Should be gone.\n    private static final double DISAMBIGUATION = 0.00001;\n\n    public double diamondStep(final int i, final int j, final int halfStep, final double[][] noise,\n                    final RandomNumberProcessor processor) {\n            final double left = initializeLeft(i - halfStep, j, noise);\n            final double right = initializeRight(i + halfStep, j, noise);\n            final double top = initializeTop(i, j - halfStep, noise);\n            final double bot = initializeBot(i, j + halfStep, noise);\n            final int divisor = processDivisor(left, right, top, bot);\n            return (left + right + top + bot) / divisor + processor.generateNumber();\n    }\n\n    public double squareStep(final int i, final int j, final int halfStep, final double[][] noise,\n                    final RandomNumberProcessor processor) {\n            final double topLeft = noise[i - halfStep][j - halfStep];\n            final double topRight = noise[i + halfStep][j - halfStep];\n            final double bottomLeft = noise[i - halfStep][j + halfStep];\n            final double bottomRight = noise[i + halfStep][j + halfStep];\n            return (topLeft + topRight + bottomLeft + bottomRight) / 4 + processor.generateNumber();\n    }\n\n    private double initializeBot(final int i, final int bottomCoordinate, final double[][] noise) {\n            final int height = noise[0].length;\n            if (! (bottomCoordinate &gt;= height))\n                    return validatedPosition(noise[i][bottomCoordinate]);\n            else\n                    return OUT_OF_RANGE;\n    }\n\n    private double initializeLeft(final int leftCoordinate, final int j, final double[][] noise) {\n            if (! (leftCoordinate &lt; 0))\n                    return validatedPosition(noise[leftCoordinate][j]);\n            else\n                    return OUT_OF_RANGE;\n    }\n\n    private double initializeRight(final int rightCoordinate, final int j, final double[][] noise) {\n            final int width = noise.length;\n            if (! (rightCoordinate &gt;= width))\n                    return validatedPosition(noise[rightCoordinate][j]);\n            else\n                    return OUT_OF_RANGE;\n    }\n\n    private double initializeTop(final int i, final int topCoordinate, final double[][] noise) {\n            if (! (topCoordinate &lt; 0))\n                    return validatedPosition(noise[i][topCoordinate]);\n            else\n                    return OUT_OF_RANGE;\n    }\n\n    private int processDivisor(final double ... sides) { //TODO remove varagrs argument, as it is not proper.\n            int divisor = 4;\n            for (final double side : sides)\n                    if (side == OUT_OF_RANGE)\n                            divisor--;\n            return divisor;\n    }\n\n    private double validatedPosition(final double value) {\n            return value != OUT_OF_RANGE ? value : value + DISAMBIGUATION;\n    }\n</code></pre>\n\n<p>}</p>\n\n<pre><code>final class DiamondSquareStep {\n\n    public double[][] diamondSquare(final int step, final double[][] noise, final RandomNumberProcessor processor) {\n            final double[][] steppedNoise = copyNoise(noise);\n            final DiamondSquareResolver solver = new DiamondSquareResolver();\n            final int halfStep = step / 2;\n            performSquareSteps(step, steppedNoise, processor, solver, halfStep);\n            performDiamondSteps(step, steppedNoise, processor, solver, halfStep);\n            return steppedNoise;\n    }\n\n    private double[][] copyNoise(final double[][] noise) {\n            final double[][] steppedNoise = new double[noise.length][noise[0].length];\n            for (int i = 0 ; i &lt; noise.length ; i++)\n                    for (int j = 0 ; j &lt; noise[0].length ; j++)\n                            steppedNoise[i][j] = noise[i][j];\n            return steppedNoise;\n    }\n\n    private void performDiamondSteps(final int step, final double[][] noise, final RandomNumberProcessor processor,\n                    final DiamondSquareResolver solver, final int halfStep) {\n            for (int i = 0 ; i &lt; noise.length ; i += step)\n                    for (int j = 0 ; j &lt; noise[0].length ; j += step) {\n                            if (i + halfStep &lt; noise.length)\n                                    noise[i + halfStep][j] = solver.diamondStep(i + halfStep, j, halfStep, noise, processor);\n                            if (j + halfStep &lt; noise[0].length)\n                                    noise[i][j + halfStep] = solver.diamondStep(i, j + halfStep, halfStep, noise, processor);\n\n                    }\n    }\n\n    private void performSquareSteps(final int step, final double[][] noise, final RandomNumberProcessor processor,\n                    final DiamondSquareResolver solver, final int halfStep) {\n            for (int i = halfStep ; i &lt; noise.length ; i += step)\n                    for (int j = halfStep ; j &lt; noise[0].length ; j += step)\n                            noise[i][j] = solver.squareStep(i, j, halfStep, noise, processor);\n    }\n</code></pre>\n\n<p>}</p>\n"},{"tags":["unit-testing","testing","interview"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12991702,"title":"Testing a function: what more should be tested?","body":"<p>I am writing a function that takes three integer inputs and based on a relation between the three, it returns a value or error. To test this, I have written some test cases which include testing illegal values, boundary conditions for integers including overflows and some positive tests too. I am wondering what else should be tested for this simple function? </p>\n\n<p>Can testing on different platforms make sense as a test case for such a small function?\nAlso, testing execution times is another thing that I wanted to add as a test case. \nCan doing static and dynamic analysis be a part of the test cases? \nAnything else that should be tested?</p>\n\n<pre><code>int foo(int a, int b, int c) {\n   return a value based on a, b, and c. \n}\n</code></pre>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":228,"score":0,"question_id":4812572,"title":"Mock created using PHPUnit return \"NULL\" when class was called","body":"<p>Code:</p>\n\n<pre>\n\n$mockObject = $this->getMock('ORM_User');\n\n$mockObject->expects($this->at(0))\n    ->method('xxx')\n    ->with($this->equalTo('a'))\n    ->will($this->returnValue('aaa'));\n\n$mockObject->expects($this->at(1))\n    ->method('xxx')\n    ->with($this->equalTo('b'))\n    ->will($this->returnValue('bbb'));\n\nvar_dump(\"-\".$mockObject->xxx('a'));\nvar_dump($mockObject->xxx('b'));  \n\n$tmp = new ORM_User();\nvar_dump($tmp->xxx('a'));\nvar_dump($tmp->xxx('b'));\n</pre>\n\n<p>Output:</p>\n\n<pre>\n\n\nstring(4) \"-aaa\"\nstring(3) \"bbb\"\nNULL\nNULL\n\n</pre>\n"},{"tags":["c","unit-testing","tdd","pthreads","testability"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12991361,"title":"Testable C application using posix threads","body":"<p>I have to write code that would look do something like that (of course much more complicated):</p>\n\n<pre><code>int stop;\nint isStopped;\n\nvoid workerFunction(){\n    while(!stop){\n        //...\n    }\n    isStopeed = 1;\n}\n\nstartThread(){\n    int newThreadPid = pthread_create(..., NULL, workerFunction, NULL);\n}\n\nstopThread(){\n    stop = 1;\n}\n</code></pre>\n\n<p>My question is: are there any techniques that can make such code testable? I don't think writing tests like :</p>\n\n<pre><code>startThread();\nstopThread();\nsleep(1);\nASSERT(isStopped);\n</code></pre>\n\n<p>is the best idea. How to test stopThread() function without calling system function? Is there any way to mock pthread_create?</p>\n"},{"tags":["visual-studio","unit-testing","winrt","windows-store-apps","ui-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12983903,"title":"Unit testing a custom control in a windows store project","body":"<p>I want to unit test the custom controls I create for a windows store project. Just simple things like \"there is a button when X is true\".</p>\n\n<p>However, I can't seem to even instantiate the controls in a testing context. Whenever I try to invoke the constructor, I get an exception related to not being run in the UI context. I've also been unable to create coded UI test projects that target windows store projects.</p>\n\n<ul>\n<li>How do I programmatically instantiate a control to test? How do I create a WinRT UI synchronization context?</li>\n<li>How do I programmatically send \"user\" command events to a control?</li>\n<li>How do I programmatically instantiate/teardown the entire application?</li>\n</ul>\n"},{"tags":["python","django","unit-testing","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12981990,"title":"Django debug tests","body":"<p>How do I debug my tests? For example, I POST to create an entry and expect it to validate and return a particular page. It works in the browser and in the shell, but the test is the only thing that fails (ironically!). I would like to print the response to the console or something so I could read errors or what have you. But I can only see things that I <code>print</code> in e.g. the view.</p>\n\n<p>Not sure it's necessary, but here's the test code in question from <code>tests.py</code>:</p>\n\n<pre><code>    resp = self.client.post('/meal/invite/', \n        {'summary': 'Test munch', 'when': now(), 'max_diners': '1', 'description': 'Munchies'}, follow=True)\n    self.assertEqual(resp.status_code, 200)\n    self.assertContains(resp, 'Test munch', 1)\n    self.assertContains(resp, 'You are hosting this meal', 1)\n</code></pre>\n\n<p>The final assertion is incorrect. If I change it to a value present in the original form page showing 'field required' errors, it passes. I just can't see what I'm missing.</p>\n\n<p>I have a few other tests working, but I just don't know how to debug this.</p>\n\n<p>How's it done?\nThanks</p>\n"},{"tags":["asp.net-mvc","unit-testing","integration-testing","asp.net-mvc-3"],"answer_count":3,"favorite_count":5,"up_vote_count":16,"down_vote_count":0,"view_count":1012,"score":16,"question_id":4278790,"title":"MvcIntegrationTestFramework or an alternative updated for ASP.NET MVC 3","body":"<p>I'm interested in using Steve Sanderson’s <a href=\"http://blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/\" rel=\"nofollow\">MvcIntegrationTestFramework</a> <strong>or a very similar alternative</strong> with ASP.NET MVC 3 Beta.</p>\n\n<p>Currently when compiling <strong>MvcIntegrationTestFramework</strong> against MVC 3 Beta I get the following error due to changes in MVC:</p>\n\n<p><code>Error  6</code>\n<code>'System.Web.Mvc.ActionDescriptor.GetFilters()' is obsolete: '\"Please call System.Web.Mvc.FilterProviders.Providers.GetFilters() now.\"'</code>    <code>\\MvcIntegrationTestFramework\\Interception\\InterceptionFilterActionDescriptor.cs Line 18</code></p>\n\n<h2>Questions</h2>\n\n<h3>1. Can anybody provide the MvcIntegrationTestFramework working for ASP.NET MVC 3 Beta?</h3>\n\n<p>--- and / or ---</p>\n\n<h3>2. Are there similar alternatives you would recommend?</h3>\n\n<hr>\n\n<p><strong>EDIT #1:</strong> Note I have e-mailed Steve the creator of MvcIntegrationTestFramework, also hoping for some feedback there.</p>\n\n<p><strong>EDIT #2 &amp; #3:</strong> I have received a message from Steve. Quoted for your reference:<br>\n<em>I haven't needed to use that project with MVC 3, so sorry, I don't have an updated version of it. As far as I'm aware it should be possible to update it to work on MVC 3, but you'd need to figure that out perhaps by inspecting the MVC 3 source code to notice any changes in how actions, filters, etc are invoked now. If you do update it, and if you decide to adopt it as an ongoing project (e.g., putting it on Github or similar), let me know and I'll post a link to it!</em> (Thanks Steve!)</p>\n\n<p><strong>EDIT #4:</strong> Honestly had a quick stab at using <code>System.Web.Mvc.FilterProviders.Providers.GetFilters()</code> didn't get anywhere fast and simply adding the <code>[Obsolete]</code> found that there was an error in the internals of the MVC requests. Anybody else had a dabble?</p>\n\n<p><strong>EDIT #5:</strong> Please comment if you are using an alternative Integration Test Framework with MVC 3. </p>\n"},{"tags":["unit-testing","symfony2","phpunit","symfony-2.1"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":135,"score":1,"question_id":12355821,"title":"Best Bundle for Selenium 2 (WebDriver) and Phpunit with Symfony 2.1","body":"<p>I have a question about Selenium V2 (Webdriver) and phpUnit,so what the best between this bundles to use it : </p>\n\n<ul>\n<li><a href=\"https://github.com/Nearsoft/PHP-SeleniumClient.git\" rel=\"nofollow\">PHP-Selenium</a></li>\n<li><a href=\"https://github.com/fbrnc/Menta.git\" rel=\"nofollow\">Menta</a></li>\n<li><a href=\"https://github.com/facebook/php-webdriver.git\" rel=\"nofollow\">Facbook-php-webdriver</a></li>\n</ul>\n\n<p>I want to know your opinion about the good and rish one to use it in my project developed with symfony 2.1?</p>\n"},{"tags":["android","unit-testing","testing","monkey","android-monkey"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1258,"score":0,"question_id":4798950,"title":"Android Test Monkey - Set Verbosity?","body":"<p>How can I change the verbosity level when running Test Monkey from the command line?</p>\n\n<p>These two commands work:\nadb shell monkey -p com.my.package 5000\nadb shell monkey -p com.my.package -v 5000</p>\n\n<p>The Developer docs say, \"Each -v on the command line will increment the verbosity level. Level 0 (the default) provides little information beyond startup notification, test completion, and final results. Level 1 provides more details about the test as it runs, such as individual events being sent to your activities. Level 2 provides more detailed setup information such as activities selected or not selected for testing.\"</p>\n\n<p>However, when I try:  adb shell monkey -p com.my.package -v -v 5000</p>\n\n<p>I get a \"segmentation fault    monkey -p com.my...\" when I try the following:</p>\n\n<p>I tried adb shell monkey -p com.my.package -v 2 5000, but monkey reads \"2\" as the count, rather than the value for -v.</p>\n\n<p>Help?  :)</p>\n"},{"tags":["java","unit-testing","exception","junit"],"answer_count":7,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":366,"score":1,"question_id":10140517,"title":"Junit: Testing for an exception of certain type","body":"<p>I am wanting to know if I can test (using JUnit) that a specific message generated by an exception gets thrown rather than just \"whether or not\" an exception was thrown.\nFor example the JunitTest.java code will actually pass the test because an exception was thrown but if I also wanted to test that the string generated by the exception was equal to: <em>\"Test Exception: Integer may not be negative..\"</em> is this possible?</p>\n\n<p><strong>TestException.java</strong></p>\n\n<pre><code>public class TestException extends Exception {  \n    /**\n     * @param message informative message about the problem found\n     */\n    public TestException (String message) {\n    super(\"Test Exception: \" + message);\n    }\n}\n</code></pre>\n\n<p><strong>Test.java</strong></p>\n\n<pre><code>public void function(Integer mustBePositive) throws TestException {\n    if (mustBePositive &lt; 0) {\n        throw new TestException(\"Integer may not be negative..\");\n    }\n    else {\n        mustBePositive = myNum\n    }\n</code></pre>\n\n<p><strong>JunitTest.java</strong></p>\n\n<pre><code>  import org.junit.*;\n\n  public class JUnitTest {\n\n  @Test(expected = TestException.class)\n  public void functionTest() throws TestException {\n  function(-1);\n}\n</code></pre>\n"},{"tags":["unit-testing","embedded","arduino","avr","avr-gcc"],"answer_count":13,"favorite_count":24,"up_vote_count":30,"down_vote_count":0,"view_count":14985,"score":30,"question_id":780819,"title":"How can I unit test Arduino code?","body":"<p>I'd like to be able to unit test my Arduino code. Ideally, I would be able to run any tests without having to upload the code to the Arduino. What tools or libraries can help me with this?</p>\n\n<p>There is an <a href=\"http://radpartbrainmat.blogspot.com/search/label/arduemu\" rel=\"nofollow\">Arduino emulator in development</a> which could be useful, but it doesn't yet seem to be ready for use.</p>\n\n<p><a href=\"http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=2725\" rel=\"nofollow\">AVR Studio</a> from Atmel contains a chip simulator which could be useful, but I can't see how I would use it in conjunction with the Arduino IDE.</p>\n"},{"tags":["javascript","unit-testing","testing","selenium"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12977684,"title":"Programatically retrieve count of javascript errors on page","body":"<p>I'd like to write a test case (using Selenium, but not the point of this question) to validate that my web application has no script errors\\warnings or unhanded exceptions at certain points in time (like after initializing a major library).</p>\n\n<p>This information can easily be seen in the debug consoles of most browsers. Is it possible to execute a javascript statement to get this information programatically?</p>\n\n<p>It's okay if it's different for each browser, I can deal with that.</p>\n"},{"tags":["java","unit-testing","netbeans","ant","rmic"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12984478,"title":"ant task to rmic test class","body":"<p>I am working on a java project that MUST use rmic (so automatic stub generation provided by java 1.5+ is NOT an option).\nAs part of the developing process, I created several JUnit tests, and used the rmic ant task to create the stubs and skeletons as a post-compile task.\nThe problem I am facing is that rmic does not create stubs and skeletons for test classes. Is there any way I can achieve that?\nI am posting a link with a tiny Netbeans project with classes with no body that shows my problem. I created an ant task call 'clean-and-compile-all' that does trigger the rmic ant task, but it is not working as I expect: it just creates the stubs and skeletons for the source directory, nothing for the classes implementing Remote that are in the test one.\nI don't want to clutter my source code with test classes.\nI will really appreciate if any of you can tell me what I am doing wrong here.</p>\n\n<hr>\n\n<p>link to test project: <a href=\"https://dl.dropbox.com/u/7707848/Netbeans/RmicTest.zip\" rel=\"nofollow\">NetBeans Test Project link...</a></p>\n"},{"tags":["unit-testing","nunit","fixtures"],"answer_count":7,"favorite_count":3,"up_vote_count":19,"down_vote_count":0,"view_count":6423,"score":19,"question_id":212718,"title":"When do I use the TestFixtureSetUp attribute instead of a default constructor?","body":"<p>The NUnit documentation doesn't tell me when to use a method with a testfixturesetup en when to do the setup in  the constructor</p>\n\n<pre><code>public class MyTest\n{\n    private MyClass myClass;\n\n    public MyTest()\n    {\n        myClass = new MyClass();\n    }\n\n    [TestFixtureSetUp]\n    public void Init()\n    {\n        myClass = new MyClass();\n    }\n}\n</code></pre>\n\n<p>Are there any good/bad practices about the TestFixtureSetup versus default constructor or isn't there any difference?</p>\n"},{"tags":["unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":157,"score":2,"question_id":3014566,"title":"How to copy resource (any content) files to output folder when NUnit's shadow copying is turned on?","body":"<p>Of course there is an option to turn it off (by default it is on.) However I like to be able to make incremental changes to the DLL while a copy of NUnit GUI is up.</p>\n\n<p>However I couldn't find much documentation for this feature (apart from <a href=\"http://osdir.com/ml/windows.dotnet.nunit.devel/2004-04/msg00005.html\" rel=\"nofollow\">the need</a>)\nSo the problem is like this</p>\n\n<p>With Shadow copy enabled in NUnit,<br>\nmy SUT (Dll) invokes an executable (also in the output folder ; via references). Now this executable needs certain configuration/modifier files to be in the same folder as the executable. How do I ensure that my reference modifier files are reachable by the executable during the test ? </p>\n\n<p>Does NUnit shadow copy just the SUT dll or all the linked/referenced dlls/execs ? What do I need to do in the test setup such that any supporting files for the SUT are copied correctly?</p>\n\n<p>I see that </p>\n\n<ul>\n<li>executingAssembly.Codebase gives me the original output folder </li>\n<li>executingAssembly.Location gives me the shadow copy folder.</li>\n</ul>\n\n<p>I'm not sure if I am being lucid here - let me know if I need to update </p>\n"},{"tags":["unit-testing","visual-studio-2012","mbunit","gallio","resharper-7.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12982978,"title":"How to support MBUnit tests in Resharper 7","body":"<p>Since I upgraded to VS2012, my R#5 license was not useful anymore. After downloading the R#7.0.1 and installing I realized that MbUnit no longer had builtin support for R#7.</p>\n\n<p>Since I spent some time figuring out how to get the plugin running, I will post here to save anyone else the time (And in order for myself to find it back if I need to do it again...)</p>\n"},{"tags":["javascript","unit-testing","qunit","phantomjs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12981822,"title":"PhantomJS QUnitTeamCityDriver QUnit test run","body":"<p>I would like to use unit testing for JavaScript in TeamCity.</p>\n\n<p>I am using QUnit, and I have seen a  couple of places that suggest using phantomjs and QUnitTeamCityDriver.  I just have not been able to get it to work...</p>\n\n<p>I don't have a lot of experience in this, and can't seem to even get phantomjs to run unit tests in command line.</p>\n\n<p>I literally copied the example from QUnitTeamCityDriver: simple_test.html</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;title&gt;QUnit Example&lt;/title&gt;\n  &lt;link rel=\"stylesheet\" href=\"test_tools/qunit-1.10.0.css\"&gt;\n  &lt;script type=\"text/javascript\" src=\"resources/jquery-1.8.1.js\"&gt;&lt;/script&gt;\n  &lt;script type=\"text/javascript\" src=\"test_tools/qunit-1.10.0.js\"&gt;&lt;/script&gt;\n  &lt;script type=\"text/javascript\" src=\"qunit_teamcity_driver/QUnitTeamCityDriver.js\"&gt;&lt;/script&gt; \n  &lt;script type=\"text/javascript\" src=\"tests.js\"&gt;&lt;/script&gt; \n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=\"qunit\"&gt;&lt;/div&gt;\n  &lt;h1 id=\"qunit-header\"&gt;QUnit example&lt;/h1&gt;\n  &lt;h2 id=\"qunit-banner\"&gt;&lt;/h2&gt;\n  &lt;div id=\"qunit-testrunner-toolbar\"&gt;&lt;/div&gt;\n  &lt;h2 id=\"qunit-userAgent\"&gt;&lt;/h2&gt;\n  &lt;ol id=\"qunit-tests\"&gt;&lt;/ol&gt;\n  &lt;div id=\"qunit-fixture\"&gt;test markup, will be hidden&lt;/div&gt;   \n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>tests.js has some simple tests that work or not, if I try it with the simple_test.html.</p>\n\n<p>The other referenced files, in the html, are in the respective folders, of course.</p>\n\n<p>phantomjs.exe, tests.js and simple_test.html are in the root of the directory I am calling from.</p>\n\n<p>The directions for TeamCity build are:</p>\n\n<pre><code>Add a \"Command Line\" Build Step to your build in TeamCity which executes Tests.htm via PhantomJS\nCommand executable: C:\\PhamtomJS\\phantomjs.exe\nCommand parameters: \\Scripts\\QUnitTeamCityDriver.phantom.js Tests.htm\n</code></pre>\n\n<p>(which doesn't work, so I want to test on actual command line before putting in the command line inside TeamCity)</p>\n\n<p>Some things I have tried:</p>\n\n<pre><code>phantomjs.exe tests.js\nphantomjs.exe tests.js simple_test.html\nphantomjs.exe simple_test.html\nphantomjs.exe test_tools\\qunit-1.10.0.js tests.js simple_test.html\nphantomjs.exe qunit_teamcity_driver/QUnitTeamCityDriver.phantom.js simple_test.html\n</code></pre>\n\n<p>result: either Parse error or Can't find variable: test</p>\n\n<p>Please, can someone point me in the right direction, give me an example, tell me what I am doing wrong ? Thank you very much.</p>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12780725,"title":"Unit testing data access layer using Shims Visual Studio 2012","body":"<p>I have lagecy ASP.Net code which accesses database. There is data access layer which forms sqlcommands and executes on the database.</p>\n\n<p>What is the best way to unit test the data access layer? Should we actually connect to database and execute test case or just use fakes?</p>\n\n<p>Is it a good idea to use shim (described in below post)?</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/hh549176.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/hh549176.aspx</a></p>\n"},{"tags":["c#",".net","unit-testing","guid"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":60,"score":1,"question_id":12981633,"title":"Unit tests with GUID","body":"<p>Is it possible to create GUIDS with a manually defined value? </p>\n\n<p>I need to know the value of the GUID in advance to do some unit tests.</p>\n"},{"tags":["c#","wpf","unit-testing","mvvm","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":129,"score":0,"question_id":12920824,"title":"Why does this unit test pass on my machine but fail on the build server?","body":"<p>I am using VS2010, writing unit tests with MSTest. My project uses WPF, MVVM and the PRISM framework. I am also using Moq to mock interfaces.</p>\n\n<p>I am testing the interaction between a command and a selected item in a list. The interaction is encapsulated in a ViewModel according to the MVVM pattern. Basically, when the SelectedDatabase is set, I want the Command to raise CanExecute. I have written this test for the behaviour:</p>\n\n\n\n<pre class=\"lang-cs prettyprint-override\"><code>public void Test()\n{\n    var databaseService = new Mock&lt;IDatabaseService&gt;();\n    var databaseFunctionsController = new Mock&lt;IDatabaseFunctionsController&gt;();\n\n    // Create the view model\n    OpenDatabaseViewModel viewModel\n         = new OpenDatabaseViewModel(databaseService.Object, databaseFunctionsController.Object);\n\n    // Mock up the database and its view model\n    var database = TestHelpers.HelpGetMockIDatabase();\n    var databaseViewModel = new DatabaseViewModel(database.Object);\n\n    // Hook up the can execute changed event\n    var resetEvent = new AutoResetEvent(false);\n    bool canExecuteChanged = false;\n    viewModel.OpenDatabaseCommand.CanExecuteChanged += (s, e) =&gt;\n        {\n             resetEvent.Set();\n             canExecuteChanged = true;\n        };\n\n    // Set the selected database\n    viewModel.SelectedDatabase = databaseViewModel;\n\n    // Allow the event to happen\n    resetEvent.WaitOne(250);\n\n    // Check that it worked\n    Assert.IsTrue(canExecuteChanged,\n        \"OpenDatabaseCommand.CanExecuteChanged should be raised when SelectedDatabase is set\");\n}\n</code></pre>\n\n<p>On the <code>OpenDatabaseViewModel</code>, the <code>SelectDatabase</code> property is as follows:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>    public DatabaseViewModel SelectedDatabase\n    {\n        get { return _selectedDatabase; }\n        set\n        {\n            _selectedDatabase = value;\n            RaisePropertyChanged(\"SelectedDatabase\");\n            // Update the can execute flag based on the save\n            ((DelegateCommand)OpenDatabaseCommand).RaiseCanExecuteChanged();\n        }\n    }\n</code></pre>\n\n<p>And also on the viewmodel:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>    bool OpenDatabaseCanExecute()\n    {\n        return _selectedDatabase != null;\n    }\n</code></pre>\n\n<p><code>TestHelpers.HelpGetMockIDatabase()</code> just gets a mock <code>IDatabase</code> with some properties set.</p>\n\n<p>This test passes when I run the test from VS2010, but fails when executed as part of an automated build on the server. I put in the <code>AutoResetEvent</code> to try to fix the problem, but it's had no effect.</p>\n\n<p>I discovered that the automated tests were using the <code>noisolation</code> flag in the MSTest command line, so I removed that. However, that produced a 'pass' once, but a 'fail' the next.</p>\n\n<p>I think I am missing something important in all of this, but I can't figure out what it is. Can anyone help by telling me what I'm doing wrong?</p>\n"},{"tags":["c#","visual-studio","unit-testing","tdd","bdd"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":61,"score":1,"question_id":12981046,"title":"Run unit test before check in","body":"<p>Using Visual Studio and TFS &amp; preferably Specflow or standard unit test.</p>\n\n<p>I want devs to run ALL unit test as a policy before check in. If a unit test breaks, then vS should stop them from checking in, just like when running across a merge conflict.</p>\n\n<p>I know there're post build scripts that will do this, but really if unit test breaks, I rather that it doesn't get into source control at all. Plus the turn around is rather slow to wait for the full build. And then there's the bickering on who breaks whose stuff.</p>\n\n<p>So no, I want unit test to pass locally before a check in. How would I do that? Yes they can just hit the button, but I like to get them a bit more \"incentive\" than that.</p>\n"},{"tags":["c#","unit-testing","mocking","fakeiteasy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12980631,"title":"FakeItEasy - Is it possible to intercept a method and replace it with my own implementation?","body":"<p>I'm not sure how I should ask this question so feel free to edit the title. I have the following interface :</p>\n\n<pre><code>public interface IOuputDestination\n{\n    void Write(String s);\n}\n</code></pre>\n\n<p>In my unit test, I mock it like so :</p>\n\n<pre><code>var outputDestination = A.Fake&lt;IOutputDestination&gt;();\n</code></pre>\n\n<p>What I want to do, is intercept the Write method so that it uses my custom implementation that I define in my test. Something like this :</p>\n\n<pre><code>String output = \"\";\nA.CallTo(() =&gt; outputDestination.Write(A&lt;String&gt;.Ignored)).Action(s =&gt; output += s);\n              //Is something like this even possible ? ----^\n</code></pre>\n\n<p>Here the <code>Action</code> method does not exist, but what I would like to happen is that any parameter passed into <code>outputDestination.Write</code> be redirected to my custom action. Is this possible using FakeItEasy? If not, is there another mocking framework that allows this kind of behavior ?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","controller","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3866,"score":4,"question_id":5670902,"title":"Moq - Why does the property i want to mock need to be virtual?","body":"<p>I'm doing some unit testing, and mocking some properties using <strong>Moq</strong>.</p>\n\n<p>Now, this is a <strong>Controller</strong> test (ASP.NET MVC 3). My Controllers derive from an <em>abstract</em> controller, called <strong>AbstractController</strong>.</p>\n\n<p>This controller has a dependency on the Http Context (in order to do things like theming, domain-specific logic based on HTTP HOST headers, etc).</p>\n\n<p>This is done via a property called <strong>WebSiteSettings</strong>:</p>\n\n<pre><code>public abstract class AbstractController : Controller\n{\n   public WebSiteSettings WebSiteSettings { get; private set; }\n\n   // other code\n}\n</code></pre>\n\n<p>Notice the private set - the ctor sets it up. So, i changed it to used an interface, and that's what i've mocked:</p>\n\n<pre><code>public IWebSiteSettings WebSiteSettings { get; private set; }\n</code></pre>\n\n<p>I then created a \"FakeWebSiteSettings\", which mocks the Http Context in order for it to read the HTTP headers.</p>\n\n<p>The problem is, when i run the test, i get a <strong>NotSupportedException:</strong></p>\n\n<blockquote>\n  <p>Invalid setup on a non-virtual (overridable in VB) member: x => x.WebSiteSettings</p>\n</blockquote>\n\n<p>Here's the relevant mocking code:</p>\n\n<pre><code>var mockWebSiteSettings = new Mock&lt;FakeWebSiteSettings&gt;();\nvar mockController = new Mock&lt;MyController&gt;(SomeRepository);\nmockController.Setup(x =&gt; x.WebSiteSettings).Returns(mockWebSiteSettings.Object);\n\n_controller = mockController.Object;\n\nvar httpContextBase = MvcMockHelpers.FakeHttpContext();\nhttpContextBase.Setup(x =&gt; x.Request.ServerVariables).Returns(new NameValueCollection\n    {\n        {\"HTTP_HOST\",\"localhost.www.mydomain.com\"}, \n});\n_controller.SetFakeControllerContext(httpContextBase.Object);\n</code></pre>\n\n<p>If i make the <code>WebsiteSettings</code> property <strong>virtual</strong> - the test passes.</p>\n\n<p>But i can't understand why i need to do this. I'm not actually <em>overriding</em> the property, i'm simply mocking how it is setup. </p>\n\n<p>Am i missing something, or doing this wrong?</p>\n"},{"tags":["c#","unit-testing","c#-4.0","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":62,"score":3,"question_id":12957537,"title":"How do I Moq a method that has an optional argument in its signature without explicitly specifying it or using an overload?","body":"<p>Given the following interface:</p>\n\n<pre><code>public interface IFoo\n{\n    bool Foo(string a, bool b = false);\n}\n</code></pre>\n\n<p>Attempting to mock it using Moq:</p>\n\n<pre><code>var mock = new Mock&lt;IFoo&gt;();\nmock.Setup(mock =&gt; mock.Foo(It.IsAny&lt;string&gt;())).Returns(false);\n</code></pre>\n\n<p>gives the following error at compile time:</p>\n\n<pre><code>An expression tree may not contain a call or invocation that uses optional arguments\n</code></pre>\n\n<p>I've found the issue above raised as an <a href=\"http://code.google.com/p/moq/issues/detail?id=284\" rel=\"nofollow\">enhancement</a> in Moq's list of issues and it appears to be assigned to the 4.5 release (whenever that is).</p>\n\n<p>My question is: what should I do given that the above is not going to be fixed anytime soon? Are my options only to either explicitly set the default value of the optional parameter everytime I mock it (which kinda defeats the point of specifying one in the first place) or to create an overload without the bool (like what I would have done prior to C# 4)?</p>\n\n<p>Or has anyone come across a more clever way to overcome this issue?</p>\n"},{"tags":["unit-testing","testing","c++builder"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":12972509,"title":"How to test application in borland c++ 6?","body":"<p>I am using Borland C++ Builder 6. Does anybody know what unit-test library works in this IDE? </p>\n"},{"tags":["android","unit-testing","junit"],"answer_count":1,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":2148,"score":6,"question_id":5395216,"title":"Creating an Android JUnit Test project in Eclipse","body":"<p>How do I create an Android Test project in Eclipse in the target project's <code>/test</code> directory?</p>\n\n<p>Note: I'm just doing my own Q+A for people according to the Stackoverflow FAQ on answering your own question.</p>\n"},{"tags":["unit-testing","http","rest","jax-rs","resteasy"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12976102,"title":"Resteasy, Make a Http-Put or Http-Post with Server-side Mock Framework of RestEasy","body":"<p>I wrote a Rest-Service which i would like to test.\nI wanna run a JUnit test without having my server run. For this I am using the Server-side Mock Framework of RestEasy. </p>\n\n<p>My question is, how can I make a Http-Put or Http-Post request with this framework with an marshalled Java Object in the Http-Body???</p>\n\n<p>The Code below runs fine for an Http-Get, but how to make a Put or Post, maybe someone got some example code for this???</p>\n\n<pre><code>@Test\npublic void testClient() throws Exception {\n\n    Dispatcher dispatcher = MockDispatcherFactory.createDispatcher();\n\n    POJOResourceFactory noDefaults = new POJOResourceFactory(\n            MyClass.class);\n    dispatcher.getRegistry().addResourceFactory(noDefaults);\n\n    {\n        MockHttpRequest request = MockHttpRequest.get(\"/message/test/\"\n                + requestParam);\n        MockHttpResponse response = new MockHttpResponse();\n\n        dispatcher.invoke(request, response);\n        assertEquals(HttpServletResponse.SC_OK, response.getStatus());\n\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","corona","coronasdk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12951166,"title":"Corona unit testing on linux","body":"<p>I want to create automatic unit tests for Corona on every push to a git repository. These unit tests should run on a Linux server. However, there is no Linux version of the Corona SDK. Is it possible to run unit tests for Corona on Linux? And if so, how?</p>\n"},{"tags":["c#",".net","visual-studio-2010","unit-testing"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":96,"score":4,"question_id":12973631,"title":"How to unit test a project outside visual studio","body":"<p>I have made a project in visual studio and also implemented unit testing.\nThe code working fine with the unit testing.</p>\n\n<p>Now I have a doubt that is it possible to implement unit testing outside the visual studio environment such that I only use the exe generated by my project and test it for multiple cases?</p>\n\n<p>I am looking for an option which can utilise my current unit testing implementation</p>\n\n<p>I am new to unit testing, so any help would be appreciated</p>\n\n<p>thanks in advance</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12973847,"title":"Method isn't invoked in Moq","body":"<p>I'm quite lost in trying to understand why a method doesn't get invoked.\nI created a little test code that reproduces the problem.</p>\n\n<pre><code>public interface ILoader\n{\n    IEnumerable&lt;string&gt; LoadAll();\n\n    string LoadItem(int key);\n}\n\npublic interface IStore\n{\n    IQueryable&lt;string&gt; Items { get; }\n}\n\npublic abstract class StoreBase : IStore\n{\n    public void Load()\n    {\n        Items = LoadItems().ToArray().AsQueryable();\n    }\n\n    protected abstract IEnumerable&lt;string&gt; LoadItems();\n\n    public IQueryable&lt;string&gt; Items { get; private set; }\n}\n\npublic abstract class StoreBase2 : StoreBase\n{\n    private readonly ILoader _loader;\n\n    protected StoreBase2(ILoader loader)\n    {\n        _loader = loader;\n    }\n\n    protected override IEnumerable&lt;string&gt; LoadItems()\n    {\n        return _loader.LoadAll();\n    }\n}\n</code></pre>\n\n<p>end here is the body of the test</p>\n\n<pre><code>Mock&lt;ILoader&gt; mockLoader = new Mock&lt;ILoader&gt;();\nmockLoader.Setup(p =&gt; p.LoadAll()).Returns(() =&gt; Enumerable.Range(1, 10).Select(i =&gt; string.Format(\"Item: {0}\", i)));\nmockLoader.Setup(p =&gt; p.LoadItem(It.IsAny&lt;int&gt;())).Returns((int i) =&gt; string.Format(\"Item: {0}\", i));\n\nMock&lt;StoreBase2&gt; mockStore = new Mock&lt;StoreBase2&gt;(mockLoader.Object);\nmockStore.Object.Load();\n\nmockLoader.Verify(p =&gt; p.LoadAll());\n</code></pre>\n\n<p>If I introduce a concrete implementation of StoreBase2 (sorry for the naming), and I use it instead of mocking the base class, it works.</p>\n\n<pre><code>public class StoreBaseImpl : StoreBase2\n{\n    public StoreBaseImpl(ILoader loader) : base(loader) {}\n}\n\nvoid MyTest() \n{\n    Mock&lt;ILoader&gt; mockLoader = new Mock&lt;ILoader&gt;();\n    mockLoader.Setup(p =&gt; p.LoadAll()).Returns(() =&gt; Enumerable.Range(1, 10).Select(i =&gt; string.Format(\"Item: {0}\", i)));\n    mockLoader.Setup(p =&gt; p.LoadItem(It.IsAny&lt;int&gt;())).Returns((int i) =&gt; string.Format(\"Item: {0}\", i));\n\n    var store = new StoreBaseImpl(mockLoader.Object);\n    store.Load();\n    mockLoader.Verify(p =&gt; p.LoadAll());\n}   \n</code></pre>\n\n<p>Am I missing something?</p>\n\n<p>EDIT: added on paste bin for easier access to the code: <a href=\"http://pastebin.com/ggV20wAw\" rel=\"nofollow\">http://pastebin.com/ggV20wAw</a></p>\n"},{"tags":["c++","linux","eclipse","unit-testing","boost"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":495,"score":0,"question_id":5914632,"title":"eclipse and boost unit_test_framework failing syntax check using c++","body":"<p>i have the following Problem.\nI started to use the boost library version 1.40, for unit testing. \nSince some other people working on the project and not all of them are using eclipse, the program has to be compilable with a makefile. So we used cmake to generate one. \nThe good thing is, the test is building and working perfectly fine.</p>\n\n<p>But the problem is, when using eclipse (created a c++ makefile project), it complains about several syntax errors (in the sourcecode view). \nSomething like:<BR>\n    <code>BOOST_AUTO_TEST_CASE( my_test )\n{ some code }</code>     <BR>\nwill be detected as a syntax error by eclipse. It is really annoying having all these error messages in the IDE. Since after the first line nearly every line in the <code>some code</code> block is marked as having syntax errors as well.<BR><BR>\nSo here is what i tried already: <BR></p>\n\n<ul>\n<li> I added    `/usr/include/boost/`     to the GNU C++ path options. (properties->C/C++ General->Path and Symbols->Path). This works normally for other external libs that are included by FindPkgConfig in the cmake file. So that the auto completion in eclipse can find the correct classes and function names.</li>\n<li>Same way included     `/usr/include/boost/test/`    directly.</li>\n<li>Adding     `/usr/lib/libboost_unit_test_framework.so.1.40.0`    to the Libraries list. </li>\n<li>Adding    `/usr/lib`     to the Library Paths.</li>\n</ul>\n\n<p>So anyone has a hint how to teach eclipse that the syntax of the boost Macros is correct??</p>\n\n<p><strong>Update</strong>:<br>\nI forgot:<br>\nSystem is Linux and Eclipse Version is 3.6.1, CDT Version is:<br>\nVersion: 1.0.0.201009141542<br>\nBuild id: 201009141542  </p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","unit-testing","razor","razorgenerator"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":11792971,"title":"How can I install RazorGeneratorSupportForVbhtmlFiles?","body":"<p>I read David Ebbo's <a href=\"http://blog.davidebbo.com/2011/06/unit-test-your-mvc-views-using-razor.html\" rel=\"nofollow\">blog post</a> about precompiling razor views for use in unit testing.  The original project only supports C# (cshtml) files, but there is a fork <a href=\"http://razorgenerator.codeplex.com/SourceControl/network/forks/1QuickNick/RazorGeneratorSupportForVbHtmlFiles\" rel=\"nofollow\">fork</a> by 1QuickNick which is supposed to have added support for VB (vbhtml) files to the project.</p>\n\n<p>There's no nuget package for the fork that I see, so I'm not quite sure how to install it.  I cloned the fork with hg on my machine and built it, but I cannot figure out how to make it available as a custom tool.  I put the generated DLL's (RazorGenerator.Core.dll and RazorGenerator.dll) into my web project's lib folder and added a reference, but I get an error when I try to use <code>RazorGenerator</code> as a custom tool.</p>\n"},{"tags":["unit-testing","cmake","googletest"],"answer_count":3,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":2671,"score":3,"question_id":8507723,"title":"How to start working with GTest and CMake","body":"<p>I have recently been sold on using CMake for compiling my C++ projects, and would now like to start writing some unit tests for my code. I have decided to use the Google Test utility to help with this, but require some help in getting started.</p>\n\n<p>All day I have been reading various guides and examples include the <a href=\"http://code.google.com/p/googletest/wiki/V1_6_Primer\" rel=\"nofollow\">Primer</a>, an <a href=\"http://www.ibm.com/developerworks/aix/library/au-googletestingframework.html?ca=drs-\" rel=\"nofollow\">introduction at IBM</a> and some questions on SO (<a href=\"http://stackoverflow.com/a/4222169/769220\">here</a> and <a href=\"http://stackoverflow.com/a/5901489/769220\">here</a>) as well as other sources I've lost track of. I realise there's plenty out there but somehow I am still having difficulties.</p>\n\n<p>I'm currently trying to implement the most basic test, to confirm I've compiled/installed gtest right and it's not working. The only source file (testgtest.cpp) is taken almost exactly from <a href=\"http://stackoverflow.com/a/4222169/769220\">this</a> previous answer:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include \"gtest/gtest.h\"\n\nTEST(sample_test_case, sample_test)\n{\n    EXPECT_EQ(1, 1);\n}\n</code></pre>\n\n<p>and my associated CMakeLists.txt is as follows:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\nproject(basic_test)\n\n# Setup testing\nenable_testing()\nfind_package(GTest REQUIRED)\ninclude_directories(${GTEST_INCLUDE_DIR})\n\n# Add test cpp file\nadd_executable(runUnitTests\n    testgtest.cpp\n)\n\n# Link test executable against gtest &amp; gtest_main\ntarget_link_libraries(runUnitTests ${GTEST_LIBRARY_DEBUG} ${GTEST_MAIN_LIBRARY_DEBUG})\n\nadd_test(\n    NAME runUnitTests\n    COMMAND runUnitTests\n)\n</code></pre>\n\n<p>Note that I have chosen to link against gtest_main instead of providing the main at the end of the cpp file as I believe this will allow me to scale testing up more easily to multiple files.</p>\n\n<p>When building the generated .sln file (in Visual C++ 2010 Express) I unfortunately get a long list of errors of the form</p>\n\n<pre><code>2&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: virtual __thiscall std::basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::~basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??1?$basic_iostream@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gtestd.lib(gtest-all.obj)\n</code></pre>\n\n<p>which I think means that I'm not successfully linking to the gtest libraries. I have made sure that when linking against the debug libraries, I have then tried to build in debug mode.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Having done some more digging, I think my issue is something to do with the type of library I am building gtest into. When building gtest with CMake, if <code>BUILD_SHARED_LIBS</code> is un-checked, and I link my program against these .lib files I get the errors mentioned above. However, if <code>BUILD_SHARED_LIBS</code> is checked then I produce a set of .lib and .dll files. When now linking against these .lib files the program compiles, but when run complains that it can't find gtest.dll.</p>\n\n<p>What are the differences between a <code>SHARED</code> and a not <code>SHARED</code> library, and if I choose not shared, why doesn't it work? Is there an option in the CMakeLists.txt for my project that I am missing?</p>\n\n<p><strong>EDIT - Solution</strong></p>\n\n<p>I've included the working CMakeLists.txt below if it is helpful to anyone. This involves putting the gtest source directory as a subdirectory of your project.</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\nproject(basic_test)\n\n################################\n# GTest\n################################\nADD_SUBDIRECTORY (gtest-1.6.0)\nenable_testing()\ninclude_directories(${gtest_SOURCE_DIR}/include ${gtest_SOURCE_DIR})\n\n################################\n# Unit Tests\n################################\n# Add test cpp file\nadd_executable( runUnitTests testgtest.cpp )\n# Link test executable against gtest &amp; gtest_main\ntarget_link_libraries(runUnitTests gtest gtest_main)\nadd_test( runUnitTests runUnitTests )\n</code></pre>\n"},{"tags":["java","unit-testing","junit","junit4"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":2623,"score":5,"question_id":1646671,"title":"Is it possible to programmatically generate JUnit test cases and suites?","body":"<p>I have to write a very large test suite for a complex set of business rules that are currently captured in several tabular forms (e.g., if parameters X Y Z are such and such, the value should be between V1 and V2). Each rule has a name and its own semantics.</p>\n\n<p>My end goal is to have a test suite, organized into sub test suites, with a test case to each rule.</p>\n\n<p>One option is to actually hard code all these rules as tests. That is ugly, time consuming, and inflexible.</p>\n\n<p>Another is to write a Python script that would read the rule files and generate Java classes with the unit tests. I'd rather avoid this if I can. Another variation would be to use Jython.</p>\n\n<p>Ideally, however I would like to have a test suite that would read the files, and would then define sub-suites and tests within them. Each of these tests might be initialized with certain values taken from the table files, run fixed entry points in our system, and then call some validator function on the results based on the expected value. </p>\n\n<p>Is there a reasonable way to pull this off using only Java?</p>\n\n<p>Update: I may have somewhat simplified our kind of rules. Some of them are indeed tabular (excel style), others are more fuzzy. The general question though remains as I'm probably not the first person to have this problem.</p>\n"},{"tags":["unit-testing","jsf","tomcat"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12971961,"title":"managed beans not instantiated with embedded tomcat 7","body":"<p>I have a fairly small JSF 2 application using myfaces and primefaces. It is setup as a as a tomcat 7 service in Eclipse and works fine, including ajax and the works.</p>\n\n<p>However, I want to unit test it, so I've added Tomcat 7 as a test dependency and create the appropriate startup code.</p>\n\n<pre><code>// create tomcat\nTomcat tomcat = new Tomcat();\ntomcat.setPort(HTTP_PORT);\n\n// add \"web\" as a webapp, all classes that are in the current classpath (all in eclipse) are available\nContext ctx = tomcat.addWebapp(\"/\" + CONTEXT_PREFIX, new File(\"src/main/webapp\").getAbsolutePath());\n\n// start the server (but do not wait)\ntomcat.start();\n</code></pre>\n\n<p>This also starts correctly, but the managed beans are not loaded. So even though the pages look good, there is no behavior. The problems seems to be similar to this Jetty blog, talking about how Jetty only searches for managed beans in a certain location.</p>\n\n<p><a href=\"http://musingsofaprogrammingaddict.blogspot.com.au/2009/12/running-jsf-2-on-embedded-jetty.html\" rel=\"nofollow\">http://musingsofaprogrammingaddict.blogspot.com.au/2009/12/running-jsf-2-on-embedded-jetty.html</a></p>\n\n<p>The web deployment assembly in Eclipse for the Tomcat server has it place all the class files in WEB-INF/classes, so that probably is the problem. </p>\n\n<p>Is it possible for embedded Tomcat 7 to use addWebapp (in order to unit test the web.xml) but redirect WEB-INF/classes to the correct directory?</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":12961380,"title":"using Moq to verify a CommandHandler method call with correct Command Parameters","body":"<p>I have the following test case:</p>\n\n<pre><code>    [Test]\n    public void MarkAsSuccessfulTest()\n    {\n        //setup data\n        var payment = Util.DbUtil.CreateNewRecurringProfilePayment();\n\n        //unit test\n\n        var mockNotificationSender = new Mock&lt;IMarkAsSuccessfulNotificationSender&gt;();\n        var mockCommandHandler = new Mock&lt;IDbCommandHandler&lt;RecurringPaymentMarkAsSuccessfulCommand&gt;&gt;();\n\n        var classUnderTest = new RecurringProfileMarkLastPaymentAsSuccessful(mockCommandHandler.Object, mockNotificationSender.Object);\n\n        classUnderTest.MarkAsSuccessful(payment.RecurringProfile);\n        mockCommandHandler.Verify(x=&gt;x.Handle(It.IsAny&lt;RecurringPaymentMarkAsSuccessfulCommand&gt;()), Times.Once());\n        mockNotificationSender.Verify(x=&gt;x.SendNotification(payment), Times.Once());\n\n    }\n</code></pre>\n\n<p>The issue is with the line:</p>\n\n<pre><code>mockCommandHandler.Verify(x=&gt;x.Handle(It.IsAny&lt;RecurringPaymentMarkAsSuccessfulCommand&gt;()), Times.Once())\n</code></pre>\n\n<p>This verifies that the <code>.Handle()</code> method was called. However, this is not enough for the test - This <code>.Handle()</code> takes a command parameter, which has one property - <code>Payment</code>.  I would like to verify that this parameter was actually matching the <code>payment</code> variable.</p>\n\n<p>Is this possible, or is there an issue with some of the code-design?</p>\n"},{"tags":["python","django","unit-testing","factory-boy"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12970932,"title":"Rewrite model @property in Factory Boy's object factory","body":"<p>I want to find a way to properly test my code with Factory Boy.</p>\n\n<p>There are a model, like this:</p>\n\n<pre><code>from django.db import models\n\nclass MyModel(models.Model):\n    param1 = &lt;some field&gt;\n    param1 = &lt;some field&gt;\n    param1 = &lt;some field&gt;\n\n    @property\n    def is_smth(self):\n        &lt;some complicated code that returns boolean&gt;\n</code></pre>\n\n<p>There is a factory for this model:</p>\n\n<pre><code>import factory\n\nclass MyModelFactory(factory.DjangoModelFactory):\n    param1 = &lt;some value&gt;\n    param2 = &lt;some value&gt;\n    param3 = &lt;some value&gt;\n\n    # And here i need to \"rewrite\" property of the model\n    # so that it would always return true\n</code></pre>\n\n<p>Can anyone help me with that? I didn't found mentions about this in factory boy's documentation, and various variants i've tried doesn't seem to work.</p>\n"},{"tags":["java","unit-testing","netbeans"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12967726,"title":"Testing Java with NetBeans","body":"<p>I have a project named JavaProject2 which contains one package named <code>some.myPackage</code>. That package contains three .java files. Now I want to add a .java file (ie Mytest.java) that does testing with JUnit. \nWhere should I put that file? I put it on the source files but there are no testing results. If I place it on a Test Package then I will not be able to use the public classes and functions I have made in the other files. \nIn the beginning of the source file it has <code>package some.myPackage;</code>. Whenever I run test it always gives me an error.</p>\n\n<p>ERROR \n<code>Unknown caused an error (0.0 s)</code></p>\n\n<p>It displays the same error whether I have or not the Mytest.java file is present.</p>\n\n<p>Can anyone help me resolve this error? Please don't give me a downvote, I have been trying to figure this out for the last 4 hours. </p>\n\n<p>Can I remain having one and only source package? Or have I got to make an additional test package? </p>\n"}]}
{"total":15322,"page":6,"pagesize":100,"questions":[{"tags":["java","unit-testing","testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12965423,"title":"why have JUnit MethodRule and TestWatchman have been deprecated?","body":"<p>org.junit.rules.MethodRule and org.junit.rules.TestWatchman have been deprecated.</p>\n\n<p>one interesting note was at: <a href=\"https://github.com/KentBeck/junit/pull/519\" rel=\"nofollow\">https://github.com/KentBeck/junit/pull/519</a> , in part:\n\"Many developers are legitimate reasons to stick with MethodRule and the JUnit team has no plans to remove support for MethodRule...\"</p>\n\n<p><a href=\"http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/TestWatchman.html\" rel=\"nofollow\">http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/TestWatchman.html</a> documents:\n\"Deprecated. MethodRule is deprecated. Use TestWatcher implements TestRule instead.\" and provides some example code.</p>\n\n<p>What is the reasoning behind marking these deprecated? \nWhat is the tradeoff between TestWatcher and the deprecated TestWachman?\nDo you have a good link for a synopsis or overview on this specific topic?</p>\n"},{"tags":["unit-testing","junit","selenium-rc","testng"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":192,"score":0,"question_id":8134331,"title":"Reports Generation for Web Based Application Using Selenium Tool","body":"<p>Currently we are generating HTML Reports for  Automation, but those reports are not good enough to explain number of scenario which we cover in Automation, Is there anything we can use with Selenium to generate a proper reports which can give a complete overview and can easily understand by anyone</p>\n\n<p>First Thing we can show a complete pie charts which cover number of test case passed and Failed.\nSecond thing we  can show, what are test cases are there in this build.</p>\n"},{"tags":["visual-studio-2010","unit-testing","sql-server-2008-r2","sqlclr"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":339,"score":0,"question_id":9470150,"title":"CREATE ASSEMBLY in SQLCLR using assembly byte string failed because it could not open the physical file","body":"<p>I am trying to add <a href=\"http://technet.microsoft.com/en-us/library/ms131057%28v=sql.105%29.aspx\" rel=\"nofollow\">user-defined aggregates</a> to a SQL Server 2008 database whose schema is defined in my Visual Studio 2010 solution file.  The code for this custom aggregate lives in a SQLCLR project within the same solution, but I am having a lot of difficulty getting my unit tests to pass.  For unit testing this project, I am using a method similar to the one <a href=\"http://stackoverflow.com/questions/2885335/clr-sql-assembly-get-the-bytestream\">here</a> to get the byte string of the assembly.  The test suite or a post-build event needs to automatically update my script to create the assembly each time, because after any sort of MSBuild (from the command line or Visual Studio), the assembly bits change.</p>\n\n<p>The script seems to be updating its assembly bit string to correctly match the current assembly bits for each run.  But the unit test still fails, with an underlying SQLException saying, \"CREATE ASSEMBLY failed because it could not open the physical file \"0xDEADBEEF\": 3(The system cannot find the path specified.).  (I've removed the real assembly bits from that message.)  Why would this error come up when the assembly bits appear to be correct?  How should I fix this?</p>\n\n<p>The length of the actual assembly bit string is about 16 KB.  Would this be a problem?  Does CREATE ASSEMBLY need to have the bits for the whole assembly or just a header, and how would I get only the header?</p>\n\n<p>We already have the unit test infrastructure in place to deploy this database, including running pre- and post-deployment scripts.  We also have an authorization set up that our user-defined functions and aggregates need to have.</p>\n\n<p>Here is my post-deployment script:</p>\n\n<pre><code>IF EXISTS (SELECT name FROM sys.assemblies WHERE name = 'foo')\n   DROP ASSEMBLY foo\ngo\n\n-- The assembly bits change after every build from the command line or Visual Studio.  \n-- This variable needs to change each time the foo assembly changes.\ndeclare @assemblyBits as varchar(max)\n-- This string is really about 15000 characters, including some newlines which are removed\n-- in the next block.  Word-wrapping this line or not word-wrapping it seems to have no \n-- effect.\nset @assemblyBits = '0x42'\n\n-- Trim whitespace from assembly bits.\ndeclare @sanitizedBits as varchar(max)\nset @sanitizedBits = Replace(Replace(Replace(@assemblyBits, Char(10), ''), Char(13), ''), Char(9), '')\n\nCREATE ASSEMBLY foo\nAUTHORIZATION bar\nfrom @sanitizedBits \nGO\n\nIF EXISTS (SELECT name FROM sysobjects WHERE name = 'Product')\n   DROP AGGREGATE Product\ngo\n\nCREATE AGGREGATE [Aggregations].[Product]\n    (@value float,\n    @weight float)\n    RETURNS float\n    EXTERNAL NAME foo.[foo.Product]\ngo\n</code></pre>\n"},{"tags":["visual-studio-2010","unit-testing","xaml","visual-studio-2012","code-analysis"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12950163,"title":"Creating custom Code Analysis rules for XAML","body":"<p>I'm interested in creating custom rules for Code Analysis (Visual Studio 2010) <em>which target the XAML specifically</em>.</p>\n\n<p>I've read about <a href=\"http://blogs.msdn.com/b/codeanalysis/archive/2010/03/26/how-to-write-custom-static-code-analysis-rules-and-integrate-them-into-visual-studio-2010.aspx\" rel=\"nofollow\">creating custom rules</a> and even about FXCop + <a href=\"http://archive.msdn.microsoft.com/XAML\" rel=\"nofollow\">XAML Toolkit</a>, but the latest is now archived and doesn't support latest versions of FXCop (i.e. the version that Code Analysis works with).\nI've also looked at other tools such as <a href=\"http://www.ndepend.com/Features.aspx\" rel=\"nofollow\">NDepend</a> but it doesn't seem to support this either.</p>\n\n<p>An example for a custom rule I'd like to make:\n<em>Make sure no elements in the XAML have the <strong>Width</strong> property set to a constant.</em></p>\n\n<p>Any ideas on how to do this in VS 2010/VS 2012 (any external tool that integrates with Visual studio is also an option)?</p>\n"},{"tags":["c++","unit-testing","cppunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":12967948,"title":"How to display hex value when cppunit assert failed","body":"<p>I use CPPUNIT_ASSERT_EQUAL(a, b) to check the value a and b. The a and b are unsigned char type. So, when this assertion failed it will display the expected and actual value. Because the type is unsigned char, the expected and actual value will be displayed as characters. For example, 35 will be displayed as #. But this is not what I want. Of course, CPPUNIT_ASSERT_EQUAL((int)a, (int)b) may be a solution but it looks like strange. In addition, it would be better if the values are displayed as hex format. But I don't know how to reach this. It would be highly appreciated if somebody gives a answer.</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":12964956,"title":"How to use a spy with toHaveBeenCalledWith and a mutable array in Jasmine.js?","body":"<p>I have some code which calls a callback function with an array as single argument. After calling the callback, the code changes the array contents. It is similar to this code:</p>\n\n<pre><code>function myCode( callback ) {\n    var someArray = [ 1, 2, 3, 4 ];\n    callback( someArray );\n\n    // change someArray in arbitrary ways\n    someArray.splice( 2 );\n    ...\n}\n</code></pre>\n\n<p>Now, I want to verify that the callback is called with the correct array content. Using Jasmine.js I would write my spec like this:</p>\n\n<pre><code>describe( \"My code\", function() {\n    var callback;\n\n    beforeEach( function() {\n        callback = jasmine.createSpy( \"My callback\" );\n        myCode( callback );\n    });\n\n    it( \"calls the callback and passes the correct array\", function() {\n        expect( callback ).toHaveBeenCalledWith( [ 1, 2, 3, 4 ] );\n    });\n});\n</code></pre>\n\n<p>This fails. The problem is, that Jasmine.js records the array but does not make a copy of it. Since the array is changed after the call, the expect()-Line fails, even though the actual call fulfilled the expectation. The same problem occurs with mutable objects.</p>\n\n<p>How can I test such code?</p>\n"},{"tags":["c#","unit-testing","mstest","code-coverage"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":67,"score":3,"question_id":12947507,"title":"MSTest Shows Partial Code Coverage on Compound Boolean Expressions","body":"<p>From Microsoft's documentation, partially covered code is <em>\"...where some of the code blocks within the line were not executed.\"</em> I'm pretty stumped on this one (simplified for brevity):</p>\n\n<p>Given this method:</p>\n\n<pre><code>public List&lt;string&gt; CodeUnderTest()\n{\n    var collection = new List&lt;string&gt; { \"test1\", \"test2\", \"test3\" };\n    return collection.Where(x =&gt; x.StartsWith(\"t\") &amp;&amp; x == \"test2\").ToList();\n}\n</code></pre>\n\n<p>And this test:</p>\n\n<pre><code>[TestMethod]\npublic void Test()\n{\n    var result = new Class1().CodeUnderTest();\n    CollectionAssert.Contains(result, \"test2\");\n}\n</code></pre>\n\n<p>Code coverage results shows that the expression <code>x.StartsWith(\"t\") &amp;&amp; x == \"test2</code> is only partially covered. I'm not sure how that's possible unless the compiler or CLR has some sort of eager condition matching stuff, but maybe I just need to have it explained.</p>\n"},{"tags":["python","unit-testing","decorator","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12965067,"title":"Python Unit-Testing: Nose @with_setup failing","body":"<p>I'm doing some tests. A bunch of my test functions have common setups, so I decided I should use <code>@with_setup</code> decorator from <code>nose.tools</code>. I've simplified my problem down to this:</p>\n\n<pre><code>from nose.tools import with_setup\n\nclass TestFooClass(unittest.TestCase):\n   def setup_foo_value(self):\n      self.foo = 'foobar'\n\n   @with_setup(setup_foo_value)\n   def test_something(self):\n      print self.foo\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>$ python manage.py test tests/test_baz.py\n\nE\n======================================================================\nERROR: test_something (project.tests.test_baz.TestFooClass)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/user/Coding/project-backend/project/../project/tests/test_baz.py\", line 17, in test_something\n    print self.foo\nAttributeError: 'TestFooClass' object has no attribute 'foo'\n\n----------------------------------------------------------------------\n</code></pre>\n\n<p>It's like <code>setup_foo_value</code> is not being run at all. Any help would be really appreciated!</p>\n"},{"tags":["unit-testing","frameworks","fortran"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":11931853,"title":"Find out the parts of my FORTRAN project which were not unit-tested","body":"<p>i am currently switching to funit to fully test my rather big Fortran-Project. \nIs there a tool that allows me to find out which lines of my project were not \nyet tested? I use emacs, so is there a simple script that would allow me to \neasily see which parts of my file are not yet tested?</p>\n\n<p>I could imagine recruiting the -prof compiler for something like that, but \ni am just starting out. So i definitely cannot do this on my own. </p>\n"},{"tags":["c#","unit-testing","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12963744,"title":"Rhino Mocks' AssertWasCalled on a mock's property assignment in a tested method","body":"<p>Using Rhino Mocks 3.6, given the code below I would expect the AssertWasCalled assertion to pass, but it does not. Instead there is the failed assertion message: </p>\n\n<blockquote>\n  <p>\"Rhino.Mocks.Exceptions.ExpectationViolationException:\n  IBar.set_Model(7); Expected #1, Actual #0.\"</p>\n</blockquote>\n\n<p>Trying IgnoreArguments() does not change the result, but changing the IBar property to a method and asserting the method is called with the argument does work.</p>\n\n<p>What am I missing here?</p>\n\n<pre><code>using Microsoft.VisualStudio.TestTools.UnitTesting;\nusing Rhino.Mocks;\n\npublic interface IFoo { }\npublic interface IBar { int Model { get; set; } }\npublic class Bar : IBar { public int Model { get; set; } }\n\npublic class Foo : IFoo\n{\n    public void MyMethod(IBar bar)\n    {\n        bar.Model = 7;\n    }\n}\n\n[TestClass]\npublic class TestFoo\n{\n    [TestMethod]\n    public void MyMethod()\n    {\n        var foo = new Foo();\n\n        var mockBar = MockRepository.GenerateStub&lt;IBar&gt;();\n        foo.MyMethod(mockBar);\n\n        mockBar.AssertWasCalled(b =&gt; b.Model = 7);\n    }\n}\n</code></pre>\n"},{"tags":["mysql","sql","unit-testing","hsqldb","group-concat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12963700,"title":"How to add group_concat to hsqldb with distinct?","body":"<p>I am trying to add the group_concat function to hsqldb so that I can properly test a query as a unit/integration test. The query works fine in mysql, so I need it to work in hsqldb (hopefully).</p>\n\n<pre><code>        // GROUP_CONCAT\n        jdbcTemplate.update(\"DROP FUNCTION GROUP_CONCAT IF EXISTS;\");\n        jdbcTemplate.update(\n            \"create aggregate function group_concat(in val varchar(100), in flag boolean, inout buffer varchar(1000), inout counter int) \" +\n            \"   returns varchar(1000) \" +\n            \"   contains sql \" +\n            \"begin atomic \" +\n            \"   if flag then\" +\n            \"      return buffer;\" +\n            \"   else\" +\n            \"      if val is null then return null; end if;\" +\n            \"      if buffer is null then set buffer = ''; end if;\" +\n            \"      if counter is null then set counter = 0; end if;\" +\n            \"      if counter &gt; 0 then set buffer = buffer || ','; end if;\" +\n            \"      set buffer = buffer + val;\" +\n            \"      set counter = counter + 1;\" +\n            \"      return null;\" +\n            \"   end if;\" +\n            \"end;\"\n        );\n</code></pre>\n\n<p>Adding this aggregation function solves most of the problem. It will correctly behave like mysql's group_concat. However, what it won't do is let me use the distinct keyword like this:</p>\n\n<pre><code>group_concat(distinct column)\n</code></pre>\n\n<p>Is there any way to factor in the distinct keyword? Or do I rewrite the query to avoid the distinct keyword altogether?</p>\n"},{"tags":["unit-testing","mef","system.componentmodel"],"answer_count":3,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":2315,"score":4,"question_id":2851140,"title":"MEF and unit testing with NUnit","body":"<p>A few weeks ago I jumped on the MEF (ComponentModel) bandwagon, and am now using it for a lot of my plugins and also shared libraries.  Overall, it's been great aside from the frequent mistakes on my part, which result in frustrating debugging sessions.</p>\n\n<p>Anyhow, my app has been running great, but my MEF-related code changes have caused my automated builds to fail.  Most of my unit tests were failing simply because the modules I was testing were dependent upon other modules that needed to be loaded by MEF.  I worked around these situations by bypassing MEF and directly instantiating those objects.</p>\n\n<p>In other words, via MEF I would have something like</p>\n\n<pre><code>[Import]\npublic ICandyInterface ci { get; set; }\n</code></pre>\n\n<p>and </p>\n\n<pre><code>[Export(typeof(ICandyInterface))]\npublic class MyCandy : ICandyInterface\n{\n    [ImportingConstructor]\n    public MyCandy( [Import(\"name_param\")] string name) {}\n    ...\n}\n</code></pre>\n\n<p>But in my unit tests, I would just use</p>\n\n<pre><code>CandyInterface MyCandy = new CandyInterface( \"Godiva\");\n</code></pre>\n\n<p>In addition, the CandyInterface requires a connection to a database, which I have worked around by just adding a test database to my unit test folder, and I have NUnit use that for all of the tests.</p>\n\n<p>Ok, so here are my questions regarding this situation:</p>\n\n<ol>\n<li>Is this a Bad Way to do things?</li>\n<li>Would you recommend composing parts in [SetUp]</li>\n<li>I haven't yet learned how to use mocks in unit testing -- is this a good example of a case where I might want to mock the underlying database connection (somehow) to just return dummy data and not really require a database?</li>\n<li>If you've encountered something like this before, can you offer your experience and the way you solved your problem?  (or should this go into the community wiki?)</li>\n</ol>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12962772,"title":"How to stop Python unittest from printing test docstring?","body":"<p>I've noticed that, when my Python unit tests contain documentation at the top of the function, sometimes the framework prints them in the test output. Normally, the test output contains one test per line:</p>\n\n<pre><code>&lt;test name&gt; ... ok \n</code></pre>\n\n<p>If the test has a docstring of the form</p>\n\n<pre><code>\"\"\"\ntest that so and so happens\n\"\"\"\n</code></pre>\n\n<p>than all is well. But if the test has a docstring all on one line:</p>\n\n<pre><code>\"\"\"test that so and so happens\"\"\"\n</code></pre>\n\n<p>then the test output takes more than one line and includes the doc like this:</p>\n\n<pre><code>&lt;test name&gt;\ntest that so and so happens ... ok\n</code></pre>\n\n<p>I can't find where this is documented behavior. Is there a way to turn this off?</p>\n"},{"tags":["java","android","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12890030,"title":"Test app lifecycle, destruction and creation","body":"<p>I need to test my apps lifecycle and its destruction and re-creation, because when the keyboard slides in/out (or is rotated), the app is destroyed and re-created. I also need to test for memory leaks when it does this.</p>\n\n<p>I saw in the tutorial <a href=\"http://developer.android.com/tools/testing/activity_test.html#StateManagementTests\" rel=\"nofollow\">http://developer.android.com/tools/testing/activity_test.html#StateManagementTests</a></p>\n\n<pre><code>Terminate the activity and restart it:\nmActivity.finish();\nmActivity = this.getActivity();\n</code></pre>\n\n<p>However this is very simplified. My logging seems to indicate that calling finish() spawns a background thread with a different thread id which then calls onPause(), finish(), onStop(), and onDestroy(). I even tried <code>getInstrumentation().waitForIdleSync();</code> to try to wait for that background thread to complete, but I still get race conditions when I test for expected values.</p>\n\n<p>Not only that, but when it re-creates the Activity (when the 1st race condition doesn't occur or I comment out the assert), with getActivity(), then it just returns the exact same object that I just finished! I can tell because I log <code>this</code> in my onXXX...() methods. </p>\n\n<p>This differs from the orientation rotation / keyboard sliding app lifecycle, which always creates a new Activity object.</p>\n\n<p>So how can I test this destruction / reincarnation scenario?</p>\n"},{"tags":["unit-testing"],"answer_count":22,"favorite_count":4,"up_vote_count":29,"down_vote_count":0,"view_count":1543,"score":29,"question_id":2933391,"title":"Any good arguments for not writing unit tests?","body":"<p>I have read a lot of threads about the joys and awesome points of unit testing. My question is, does anyone have a good argument against unit testing?</p>\n"},{"tags":["visual-studio-2010","unit-testing","c#-4.0","dynamics-crm-2011"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12961900,"title":"Unit Test Project Accessor does not create all private methods","body":"<p>I had a project that I had previously created a unit test for which required the autogenerated Accessor class.  Everything worked great.  But then I created a new class in the same project, that I needed to unit test.  When I looked at the Accessor class, the new method wasn't there (although some other proetected methods were).</p>\n\n<p>I went to the class file and right clicked and selected Created Private Accessor, but was greeted by two error messageboxes, \"Private accessor creation failed for 'Foo'.\", and \"A reference to the component 'Foo' already exists in the project.\"</p>\n\n<p>A little more trouble shooting and I discovered that if any private method had a parameter that was one of my auto generated CRM entity types it wouldn't show up in the Accessor class.  (not sure if it was CRM related, or just the dll itself).  Why won't my methods show up?</p>\n"},{"tags":["c","unit-testing","embedded"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12960905,"title":"Unit testing procedural C code","body":"<p>I just went through this <a href=\"http://www.youtube.com/watch?v=wEhu57pih5w\" rel=\"nofollow\">video</a> on unit testing. It gives good pointers on unit testing object oriented code. Are there any good documents / books / tips to write a unit testable procedural <code>C</code> code ?</p>\n"},{"tags":["ios","unit-testing","core-data","gh-unit"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12960816,"title":"iOS GHUnit and Core Data","body":"<p>ers,</p>\n\n<p>I recently integrated CoreData into my existing iOS application.  I have previously existing tests written around some domain and network functionality; that now needs to be retrofitted to use CoreData (instead of storing in userDefaults).</p>\n\n<p>I have <code>GHUnitIOS.framework</code> included in my project.  However, all my tests are failing because the TestAppDelegate knows nothing about CoreData's <code>managedObjectContext</code>.  For reference as to what I'm seeing:</p>\n\n<p><code>[GHUnitIOSAppDelegate managedObjectContext]: unrecognized selector sent to instance</code></p>\n\n<p>This makes sense - the test app delegate doesn't have managedObjectContext as a property.  I'd love to add it, but since I only have access to the header files when using the framework, I can't really modify it for my needs.  I could download the GHUnit source and modify the implementation files, but I'd rather not do that if there's another option.</p>\n\n<p><em>How have others solved this problem?  IE, how can I fix my tests to support CoreData using GHUnit?</em></p>\n\n<p>Much thanks.</p>\n"},{"tags":["java","unit-testing","swing"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":861,"score":3,"question_id":3086607,"title":"unit test for Java Swing application","body":"<p>I'm looking to Unit Test a Swing application and was wondeing what would eb the best(easiest) approach to achieve this objective with almost full line coverage. If it matters, I'm using Eclipse Galileo for developemnt.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","unit-testing","java-ee"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12960094,"title":"Automated integration tests on deployed j2ee environment?","body":"<p>Our team is currently introducing automated testing to an existing J2EE web application that is deployed on Weblogic. We've had success with unit testing using JUnit and Mockito which are automatically run when our app is built and deployed by Jenkins.</p>\n\n<p>Integration testing has been more challenging because our application relies on components provided by the J2EE container such as WorkManager. There are several Spring beans which require these components to initialize properly. One way we've been able to get around it is to create custom application context configuration files which create mocks of the components that we don't really need for testing but still require to initialize the bean. This has been somewhat of a maintenance nightmare because each integration test needs it's own config and some can be quite involved.</p>\n\n<p>What we really want is to be able to have the entire application initialized with the normal configuration used in a deployed environment when running our integration tests. Is there a way to have integration tests automatically execute after deployment through Jenkins or another tool? </p>\n"},{"tags":["unit-testing","scala","parallel-processing","mpi","scalacheck"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12883741,"title":"Scalacheck, unit testing multi-process algorithms","body":"<p>I am currently developing a Scala framework for multi-process, parallel algorithms using MPJ-Express (i.e. a Java MPI-variant).</p>\n\n<p>MPJ-Express, and basically all MPI-variants, work by starting many processes with the same program. Since I have no control over the processes at runtime (my program does not spawn processes), I can't use standard unit testing frameworks due to the following reasons:</p>\n\n<ol>\n<li><p>Not all processes will own a local copy of the results after execution (ideally, the results should be collected at an arbitrary root-process)</p></li>\n<li><p>Lack of control over standard-output. It is not easily possible to get output only from a single process.</p></li>\n<li>Lack of flow control. All processes must enter the same test at the same time to allow single-program multiple data algorithms.</li>\n</ol>\n\n<p>Number 2 is mainly the problem, as 3 might work as expected and 1 can be fixed with an extra communication operation. Does anyone have practical experience, or know of better unit testing strategies for multi-process algorithms?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Right now, I seem to be having luck with the following code using <em>scalacheck</em>:</p>\n\n<pre><code>package it.vigtig.thesis.collection.scalacheck\n\nimport java.io.OutputStream\nimport java.io.PrintStream\n\nimport org.scalacheck.Prop.forAll\nimport org.scalacheck.Properties\n\nimport it.vigtig.thesis.env.DistEnv.globalRank\nimport it.vigtig.thesis.env.DistEnv.parallelize\n\nobject CollectionCheck {\n\n  def main(args: Array[String]) {\n\n    parallelize(args) {\n\n      if (globalRank &gt; 0) {\n        Console.setOut(new PrintStream(new OutputStream() {\n          def write(b: Int) { //nop    \n          }\n        }))\n      }\n\n      ST.main(Array())\n    }\n\n  }\n\n}\n\nobject ST extends Properties(\"String\") {\n\n  //  def println(a: String*) = gprintln(a)\n  property(\"startsWith\") = forAll((a: String, b: String) =&gt; (a + b).startsWith(a))\n\n  property(\"concatenate\") = forAll((a: String, b: String) =&gt;\n    (a + b).length &gt; a.length &amp;&amp; (a + b).length &gt; b.length)\n\n  property(\"substring\") = forAll((a: String, b: String, c: String) =&gt;\n    (a + b + c).substring(a.length, a.length + b.length) == b)\n\n}\n</code></pre>\n\n<p>The above code reroutes the scala-println method to a nop-operation for all other processes than p=0. I should be able to run the test-suites with parallel-methods, allowing only the root process to verify the results. The above yields the following output:</p>\n\n<pre><code>MPJ Express (0.38) is started in the multicore configuration\nrank-0: 0.212437745 time taken for initialize\n+ String.startsWith: OK, passed 100 tests.\n! String.concatenate: Falsified after 0 passed tests.\n&gt; ARG_0: \n&gt; ARG_1: \n+ String.substring: OK, passed 100 tests.\n</code></pre>\n"},{"tags":["ruby","unit-testing","time"],"answer_count":11,"favorite_count":7,"up_vote_count":29,"down_vote_count":0,"view_count":4372,"score":29,"question_id":1215245,"title":"Ruby unit testing: how to fake Time.now?","body":"<p>What's the best way to set Time.now for the purpose of testing time-sensitive methods in a Unit test?  Thanks!</p>\n"},{"tags":["c#","unit-testing","rest","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":442,"score":4,"question_id":7363021,"title":"Unit testing a REST client","body":"<p>I'm fairly new to unit testing but I'm trying to incorporate it into my development process for any new code I write (including bug fixes). </p>\n\n<p>I'm working a REST client to communicate with Highrise (37Signals). How can I unit test this without relying on the external dependency? (The REST service). </p>\n\n<p>For instance I'll have a method called <code>GetPeople()</code></p>\n\n<p>Things I'll want to unit test...</p>\n\n<ol>\n<li>The method returns the correct number of people in the account.</li>\n<li>The method returns null if there are no people in the account</li>\n<li>The method throws an exception if it can't connect to the service. </li>\n</ol>\n\n<p>What do I do to test that the service still functions the same. I.E person still has a First Name? Can I unit test this or is this more of an integration test? </p>\n"},{"tags":["wpf","unit-testing","nunit","codebehind"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12957518,"title":"Performing unit tests in a code behind file","body":"<p>I'm implementing a WPF application using the MVVM pattern.</p>\n\n<p>The application is basically a communications panel (comms panel) with control widgets laid on top of it (e.g., dial pads, intercom lines, etc). The control widgets have also been implemented using the MVVM pattern, as this allows us to easily test them on an individual basis.</p>\n\n<p>A few hours ago, I posted <a href=\"http://stackoverflow.com/questions/12952871/binding-a-variable-inside-a-viewmodel-to-a-different-variable-in-another-viewmod\">here</a> because I was having problems in order to link things between a DialPad and CommsPanels viewmodels. After a long chat with another SO member, I managed to get the link working. However, in doing that, I made heavy modifications in the DialPad code, such as getting rid of its model and moving the viewmodel code to the codebehind file. The problem is, not my unit tests are not working, mainly because NUnit is throwing an exception everytime I tried to instantiate a DialPad codebehind's class, which inherits from UserControl. Is there any way to write unit tests for a class that inherits from a WPF class (such as UserControl)?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["unit-testing","ruby-on-rails-3","tutorials","rspec","video-tutorials"],"answer_count":4,"favorite_count":8,"up_vote_count":20,"down_vote_count":0,"view_count":11103,"score":20,"question_id":5255506,"title":"Good tutorial for RSpec With Rails 3","body":"<p>I am looking for a good <em>free</em> tutorial which implements RSpec with Rails 3. I have found many tutorials which work for Rails 2.x but leads you into issues when trying the same in Rails 3. Rspec Gem also has updated , coming off the age.. Leading into compatibility issues.</p>\n\n<p>I am able to setup RSpec in my app but I can't fix issues I am getting into. Its like i am implementing a customized app without get an overall idea of what changes I would have to carefully incorporate due to usage of the latest Rails ( say 3.0 ) and the latest RSpec gem 2.5. I am also making use of rspec-rails 2.5 gem.</p>\n\n<p>Such tutorials( based on earlier versions of Rails and Rspec ) I have seen so far include:</p>\n\n<p><a href=\"http://fr.ivolo.us/posts/rspec-tutorial-part-2-a-simple-test\" rel=\"nofollow\">http://fr.ivolo.us/posts/rspec-tutorial-part-2-a-simple-test</a></p>\n\n<p><a href=\"http://blog.davidchelimsky.net/2007/05/14/an-introduction-to-rspec-part-i/\" rel=\"nofollow\">http://blog.davidchelimsky.net/2007/05/14/an-introduction-to-rspec-part-i/</a></p>\n\n<p>I am unable to find Part 2 of David's tutorial also. I wonder where I could find that.</p>\n\n<p>I also have seen a similar questions on stackoverflow.com like:-</p>\n\n<p><a href=\"http://stackoverflow.com/questions/4618241/rails-good-rspec2-example-usage-also-cucumber-pickle-capybara/4618392#4618392\">Rails: Good Rspec2 example usage? (Also: Cucumber, Pickle, Capybara)</a></p>\n\n<p>The only free tutorial relevant to Rspec with Rails 3 that I could find so far is:-</p>\n\n<p><a href=\"http://ruby.railstutorial.org/ruby-on-rails-tutorial-book\" rel=\"nofollow\">http://ruby.railstutorial.org/ruby-on-rails-tutorial-book</a></p>\n\n<p>I am using ruby 1.9.2 and rails 3.0.3 along with Ubuntu 10.04 .</p>\n\n<p>Thanks for any suggestions you can help me with.</p>\n"},{"tags":["unit-testing","monotouch","nunit","monodevelop","touch.unit"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":71,"score":4,"question_id":12369434,"title":"Best way for Unit Testing MonoTouch Projects?","body":"<p>Is there actually a good way to unit test MonoTouch projects using NUnit and the MonoDevelop test runner? </p>\n\n<p>I know there is the official MonoTouch unit tests project type, but running tests within the simulator isn't the way I want to go. For now I want to run tests with the MonoDevelop test runner, later everything should work with Jenkins (CI).</p>\n\n<p>I know the limitations about UI specific code, so everything I want to test has nothing to do with MonoTouch itself, it's all about business logic placed within separete projects.</p>\n\n<p>By adding tests to MonoTouch Library type projects, I am getting System.IO.FileNotFoundException's as described here: <a href=\"http://ben.phegan.name/index.php/2011/02/28/monotouch-and-unit-testing/\" rel=\"nofollow\">http://ben.phegan.name/index.php/2011/02/28/monotouch-and-unit-testing/</a></p>\n\n<p>By using a separate NUnit test project, I can't reference my system under test, because its project type is of type MonoTouch library project, which, of course, has an incompatible target framework (vMonoTouch).</p>\n\n<p>So, there isn't any real alternative to Touch.Unit, is it?</p>\n"},{"tags":["unit-testing","node.js","gruntjs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12952506,"title":"How do I run the GruntJS tests?","body":"<p>I just cloned the <a href=\"https://github.com/gruntjs\" rel=\"nofollow\">gruntjs repository</a>.</p>\n\n<p>How do I actually run the tests for GruntJS?</p>\n\n<p>(I don't mean I want to run my own tests using GruntJS. I mean that I want to run the tests for GruntJS itself.)</p>\n"},{"tags":["unit-testing","tdd","mocking","moq","typemock"],"answer_count":2,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":619,"score":7,"question_id":2376405,"title":"Any teams out there using TypeMock? Is it worth the hefty price tag?","body":"<p>I hope this question is not 'controversial' - I'm just basically asking - has anyone here purchased TypeMock and been happy (or unhappy) with the results?</p>\n\n<p>We are a small dev shop of only 12 developers including the 2 dev managers. We've been using NMock so far but there are limitations. I have done research and started playing with TypeMock and I love it. It's super clean syntax and lets you basically mock everything, which is great for legacy code.</p>\n\n<p>The problem is - how do I justify to my boss spending 800-1200$ per license for an API which has 4-5 competitors that are completly free? 800-1200$ is how much Infragistrics or Telerik cost per license - and there sure as hell isn't 4-5 open source comparable UI frameworks... Which is why I find it a bit overpriced, albeit an awesome library...</p>\n\n<p>Any opinions / experiences are greatly appreciated.</p>\n\n<p><em><strong>EDIT: after finding MOQ I thought I fell in love - until I found out that it's not fully supported in VB.NET because VB lacks lambda sub routines =(. Is anyone using MOQ for VB.NET? The problem is we are a mixed shop - we use C# for our CRM development and VB for everything else. Any guidence is greatly appreciated again</em></strong></p>\n\n<p><em><strong>Edit: hmm.. I can't find Isolate.WhenCalled() equivalen in Moq... Any help here? I want to stub/mock out a ReadOnly property of a CONCRETE object (not of a mocked object)... I could easily do this with Isolate.WhenCalled with TM. How with Moq???</em></strong></p>\n"},{"tags":[".net","unit-testing","telerik","typemock","justmock"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":658,"score":3,"question_id":3319125,"title":"JustMock vs. TypeMock vs. Other","body":"<p>With Telerik's JustMock product newly available, it has a lot of similarities to TypeMock, in the ability to mock concrete classes, not just abstract classes or interfaces.  I was just curious your opinion on one or both of the products.  What do you like or dislike?</p>\n\n<p>Seems like JustMock might be shy on some of the features (TypeMock has been around for a while), but it had some good features.  Or if you have any others you feel are similar in features.</p>\n"},{"tags":["c#","sql-server-2008","unit-testing","teamcity","business-intelligence"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":244,"score":0,"question_id":10519736,"title":"Unit test (connect to Analysis Services) fails on TeamCity - but not on VS 2010 on the same machine","body":"<p>I've written some code that runs an MDX query against an SQL Server Analysis services. Unit tests on my dev machine work fine - however the TeamCity installation also runs the unit tests and only the ones connecting to the analysis services give an exception stating:</p>\n\n<pre><code>Test method GetNumCompaniesPerIndustryTest threw exception: \nMicrosoft.AnalysisServices.AdomdClient.AdomdConnectionException: The connection either timed out or was lost. \n---&gt; System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. \n---&gt; System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host\n</code></pre>\n\n<p>This is the error I was getting before when my connection string wasn't right. The weird thing is that the server with TeamCity also has a VS 2010 installation so I can open the solution form the /buildAgent/work folder and run the unit tests. All tests work fine from VS - so there's no connection problem it seems.\nConnection string is in a settings file inside the DLL in application scope.</p>\n"},{"tags":["java","eclipse","unit-testing","junit"],"answer_count":4,"favorite_count":7,"up_vote_count":17,"down_vote_count":0,"view_count":316,"score":17,"question_id":12513184,"title":"Solid Java unit test automation? (JUnit/Hamcrest/...)","body":"<h2>Intent</h2>\n\n<p>I am looking for the following:</p>\n\n<ul>\n<li>A solid unit testing methodology\n<ol>\n<li>What am I missing from my approach?</li>\n<li><strong>What am I doing wrong</strong>?</li>\n<li><em>What am I doing which is unnecessary?</em></li>\n</ol></li>\n<li>A way to get as much as possible done automatically</li>\n</ul>\n\n<h2>Current environment</h2>\n\n<ul>\n<li><strong><a href=\"http://eclipse.org/\">Eclipse</a></strong> as IDE</li>\n<li><strong><a href=\"http://www.junit.org/\">JUnit</a></strong> as a testing framework, integrated into Eclipse</li>\n<li><strong><a href=\"http://code.google.com/p/hamcrest/\">Hamcrest</a></strong> as a \"matchers\" library, for better assertion readability</li>\n<li><strong><a href=\"http://code.google.com/p/guava-libraries/\">Google Guava</a></strong> for precondition validation</li>\n</ul>\n\n<h2>Current approach</h2>\n\n<h3>Structure</h3>\n\n<ul>\n<li>One test class per class to test</li>\n<li>Method testing grouped in static nested classes</li>\n<li>Test method naming to specify behaviour tested + expected result</li>\n<li>Expected exceptions specified by Java <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Annotation.html\">Annotation</a></strong>, not in method name</li>\n</ul>\n\n<h3>Methodology</h3>\n\n<ul>\n<li>Watch out for <code>null</code> values</li>\n<li>Watch out for empty <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html\">List&lt;E&gt;</a></strong></li>\n<li>Watch out for empty <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html\">String</a></strong></li>\n<li>Watch out for empty arrays</li>\n<li>Watch out for object state invariants altered by code (post-conditions)</li>\n<li>Methods accept documented parameter types</li>\n<li>Boundary checks (e.g. <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE\">Integer.MAX_VALUE</a></strong>, etc...)</li>\n<li>Documenting immutability through specific types (e.g. <strong>Google Guava <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html\">ImmutableList&lt;E&gt;</a></strong>)</li>\n<li><em>... is there a list for this? Examples of nice-to-have testing lists:</em>\n<ul>\n<li>Things to check in database projects (e.g. CRUD, connectivity, logging, ...)</li>\n<li>Things to check in multithreaded code</li>\n<li>Things to check for EJBs</li>\n<li>... ?</li>\n</ul></li>\n</ul>\n\n<h2>Sample code</h2>\n\n<p><em>This is a contrived example to show some techniques.</em></p>\n\n<hr>\n\n<h3>MyPath.java</h3>\n\n<pre><code>import static com.google.common.base.Preconditions.checkArgument;\nimport static com.google.common.base.Preconditions.checkNotNull;\nimport java.util.Arrays;\nimport com.google.common.collect.ImmutableList;\npublic class MyPath {\n  public static final MyPath ROOT = MyPath.ofComponents(\"ROOT\");\n  public static final String SEPARATOR = \"/\";\n  public static MyPath ofComponents(String... components) {\n    checkNotNull(components);\n    checkArgument(components.length &gt; 0);\n    checkArgument(!Arrays.asList(components).contains(\"\"));\n    return new MyPath(components);\n  }\n  private final ImmutableList&lt;String&gt; components;\n  private MyPath(String[] components) {\n    this.components = ImmutableList.copyOf(components);\n  }\n  public ImmutableList&lt;String&gt; getComponents() {\n    return components;\n  }\n  @Override\n  public String toString() {\n    StringBuilder stringBuilder = new StringBuilder();\n    for (String pathComponent : components) {\n      stringBuilder.append(\"/\" + pathComponent);\n    }\n    return stringBuilder.toString();\n  }\n}\n</code></pre>\n\n<hr>\n\n<h3>MyPathTests.java</h3>\n\n<pre><code>import static org.hamcrest.Matchers.is;\nimport static org.hamcrest.collection.IsCollectionWithSize.hasSize;\nimport static org.hamcrest.collection.IsEmptyCollection.empty;\nimport static org.hamcrest.collection.IsIterableContainingInOrder.contains;\nimport static org.hamcrest.core.IsEqual.equalTo;\nimport static org.hamcrest.core.IsNot.not;\nimport static org.hamcrest.core.IsNull.notNullValue;\nimport static org.junit.Assert.assertThat;\nimport org.junit.Test;\nimport org.junit.experimental.runners.Enclosed;\nimport org.junit.runner.RunWith;\nimport com.google.common.base.Joiner;\n@RunWith(Enclosed.class)\npublic class MyPathTests {\n  public static class GetComponents {\n    @Test\n    public void componentsCorrespondToFactoryArguments() {\n      String[] components = { \"Test1\", \"Test2\", \"Test3\" };\n      MyPath myPath = MyPath.ofComponents(components);\n      assertThat(myPath.getComponents(), contains(components));\n    }\n  }\n  public static class OfComponents {\n    @Test\n    public void acceptsArrayOfComponents() {\n      MyPath.ofComponents(\"Test1\", \"Test2\", \"Test3\");\n    }\n    @Test\n    public void acceptsSingleComponent() {\n      MyPath.ofComponents(\"Test1\");\n    }\n    @Test(expected = IllegalArgumentException.class)\n    public void emptyStringVarArgsThrows() {\n      MyPath.ofComponents(new String[] { });\n    }\n    @Test(expected = NullPointerException.class)\n    public void nullStringVarArgsThrows() {\n      MyPath.ofComponents((String[]) null);\n    }\n    @Test(expected = IllegalArgumentException.class)\n    public void rejectsInterspersedEmptyComponents() {\n      MyPath.ofComponents(\"Test1\", \"\", \"Test2\");\n    }\n    @Test(expected = IllegalArgumentException.class)\n    public void rejectsSingleEmptyComponent() {\n      MyPath.ofComponents(\"\");\n    }\n    @Test\n    public void returnsNotNullValue() {\n      assertThat(MyPath.ofComponents(\"Test\"), is(notNullValue()));\n    }\n  }\n  public static class Root {\n    @Test\n    public void hasComponents() {\n      assertThat(MyPath.ROOT.getComponents(), is(not(empty())));\n    }\n    @Test\n    public void hasExactlyOneComponent() {\n      assertThat(MyPath.ROOT.getComponents(), hasSize(1));\n    }\n    @Test\n    public void hasExactlyOneInboxComponent() {\n      assertThat(MyPath.ROOT.getComponents(), contains(\"ROOT\"));\n    }\n    @Test\n    public void isNotNull() {\n      assertThat(MyPath.ROOT, is(notNullValue()));\n    }\n    @Test\n    public void toStringIsSlashSeparatedAbsolutePathToInbox() {\n      assertThat(MyPath.ROOT.toString(), is(equalTo(\"/ROOT\")));\n    }\n  }\n  public static class ToString {\n    @Test\n    public void toStringIsSlashSeparatedPathOfComponents() {\n      String[] components = { \"Test1\", \"Test2\", \"Test3\" };\n      String expectedPath =\n          MyPath.SEPARATOR + Joiner.on(MyPath.SEPARATOR).join(components);\n      assertThat(MyPath.ofComponents(components).toString(),\n          is(equalTo(expectedPath)));\n    }\n  }\n  @Test\n  public void testPathCreationFromComponents() {\n    String[] pathComponentArguments = new String[] { \"One\", \"Two\", \"Three\" };\n    MyPath myPath = MyPath.ofComponents(pathComponentArguments);\n    assertThat(myPath.getComponents(), contains(pathComponentArguments));\n  }\n}\n</code></pre>\n\n<hr>\n\n<h2>Question, phrased explicitly</h2>\n\n<ul>\n<li><p>Is there a list of techniques to use to build a unit test? Something much more advanced than my oversimplified list above (e.g. check nulls, check boundaries, check expected exceptions, etc.) perhaps available in a book to buy or a URL to visit?</p></li>\n<li><p>Once I have a method that takes a certain type of parameters, can I get any <strong><a href=\"http://eclipse.org/\">Eclipse</a></strong> plug-in to generate a stub for my tests for me? Perhaps using a Java <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Annotation.html\">Annotation</a></strong> to specify metadata about the method and having the tool materialise the associated checks for me? (e.g. @MustBeLowerCase, @ShouldBeOfSize(n=3), ...)</p></li>\n</ul>\n\n<p>I find it tedious and robot-like to have to remember all of these \"QA tricks\" and/or apply them, I find it error-prone to copy and paste and I find it not self-documenting when I code things as I do above. Admittedly, Hamcrest <a href=\"http://code.google.com/p/hamcrest/wiki/MatcherLibraries\">libraries</a> go in the general direction of specialising types of tests (e.g. on <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html\">String</a></strong> objects using RegEx, on <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/File.html\">File</a></strong> objects, etc) but obviously do not auto-generate any test stubs and do not reflect on the code and its properties and prepare a harness for me.</p>\n\n<p>Help me make this better, please.</p>\n\n<h2>PS</h2>\n\n<p><em>Do not tell me that I am just presenting code which is a silly wrapper around the concept of creating a Path from a list of path steps supplied in a static factory method please, this is a totally made-up example but it shows a \"few\" cases of argument validation... If I included a much longer example, who would really read this post?</em></p>\n"},{"tags":["c#","unit-testing","autofixture"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":94,"score":4,"question_id":12930963,"title":"Creating a struct with autofixture throws no public constructor error","body":"<p>I have a struct e.g.:</p>\n\n<pre><code>public struct Foo\n{\n    public int Bar;\n    public string Baz;\n}\n</code></pre>\n\n<p>and would like to create it in my unit tests using autofixture. I tried using the following:</p>\n\n<pre><code>IFixture fixture = new Fixture();\nvar f = fixture.CreateAnonymous&lt;Foo&gt;();\n</code></pre>\n\n<p>But this throws an <code>AutoFixture was unable to create an instance</code> error. Is it possible to auto create a struct with autofixture? How could this be done? Please note, that I am working on legacy code and thus need to deal with structs. :)</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Changed </p>\n\n<pre><code>IFixture fixture = new Fixture().Customize(new AutoMoqCustomization());\n</code></pre>\n\n<p>To</p>\n\n<pre><code>IFixture fixture = new Fixture();\n</code></pre>\n\n<p>Since it wasn't relevant for the question.</p>\n"},{"tags":["hibernate","unit-testing","transactions","junit4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12916014,"title":"Test DAO in java using Junit4 and Hibernate","body":"<p>Testing DAO'm using junit and mainly what I do is start a transaction in hibernate, call the compare function, and then roll back the transaccion.El problem is that if I'm Testing function is a transaction error I can not strip nest, I thought about the idea of ​​implementing DBUnit xml but management does not seem a good idea and less in this instance that I did enough test cases with this method.\nAnyone have any idea how to fix it without having to use anything other than Junit or hibernate?</p>\n\n<p>This is a example</p>\n\n<pre><code>@Test\npublic void Test1GetByCodigo(){\n    String cod = \"999999999\";\n    DBTenant dbTenant = null; \n    Session sess = null;\n    Transaction trans = null;\n    ClienteBO cli = null;\n    Clientes clie = null;\n    try{\n        try{\n            dbTenant = new DBTenant();\n            sess = dbTenant.getTenantSession();\n            trans = sess.beginTransaction();\n        }\n        catch(Exception e){\n            fail(\"Error en la carga de la transaccion.Quedo alguna transaccion abierta?\");\n        }   \n        clie  = CargaCliente(cod);\n        sess.save(clie);\n        cli = cliBL.getByCodigo(cod);\n    }\n    catch(Exception e){\n        trans.rollback();\n        dbTenant.closeSession();\n        fail(\"Error la carga del cliente.Se modifico la bse de datos Clientes??\");\n    }\n    trans.rollback();\n    sess.clear();\n    dbTenant.closeSession();\n    ClienteBO clieEsp = CargaClienteBO(clie);\n    assertNotNull(clieEsp);\n    assertNotNull(cli);\n    assertEquals(\"Error el cliente no coincide\",clieEsp,cli);\n}\n</code></pre>\n\n<p>if cliBL.getbycodigo function () tubiera a transaction would have a bug, thank you for your help thanks</p>\n"},{"tags":["objective-c","ios","unit-testing","testing","software-tools"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":43,"score":-1,"question_id":12949905,"title":"Test Case Generation Tools for Objective-C","body":"<p>I am looking for a tool that can generate test cases automatically for Objective-C. I know some existing tools like <a href=\"http://www.agitar.com/solutions/products/automated_junit_generation.html\" rel=\"nofollow\">AgitarOne</a>\n for Java and <a href=\"http://research.microsoft.com/en-us/projects/pex/\" rel=\"nofollow\">Pex</a> for .NET, but none of these tools work for objective-c. </p>\n\n<p>Is there any similar tools for Objective-C?</p>\n"},{"tags":["android","multithreading","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12945376,"title":"Android Unit testing - Have a test wait on a response","body":"<p>So I've got an Android library that I need to do unit testing on. You pass the library some handlers, and I need to unit test based on the messages sent to those handlers from the library.</p>\n\n<p>The problem is, I don't know how to tell a test to wait until I get a response back. I have a timer checking the response every 10 seconds in my test method and if it sees a response is does an assert, but the test method schedules the timer task and then finishes as successful instead of waiting for an assert in the timer task.</p>\n\n<p>Is there a way to have the test explicitly wait until it runs into an assert before finishing? Or some other way of accomplishing this?</p>\n\n<p>Thanks!</p>\n"},{"tags":["javascript","unit-testing","phantomjs","casperjs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":127,"score":1,"question_id":12920828,"title":"Using jquery with casperJs test","body":"<p>I have a web application which is not relying on jquery.</p>\n\n<p>I am doing functional tests thanks to (the great :) ) casperjs.</p>\n\n<p>Now I would like to use jquery in my tests. So I tried to inject it as indicated here <a href=\"http://casperjs.org/faq.html#faq-jquery\" rel=\"nofollow\">http://casperjs.org/faq.html#faq-jquery</a>. Well, it's not working.</p>\n\n<p>Here is my code if you can help me - is there something wrong? :</p>\n\n<pre><code>casper.start('http://localhost:8080/xxxxxx/xxxxxDialogTests.html');\n\ncasper.echo(\"page = \" + casper.page); // -&gt; it works, the page is there \ncasper.page.injectJs(\"../tools/jquery-1.7.2.js\");\n\ncasper.waitFor(function check()\n{\n   return this.visible('#button_create');\n},\nfunction then()\n{\n   this.click('#button_create');\n   casper.waitFor(function check()\n   {\n        return this.visible('#dialog_document_name');\n   },\n   function then()\n   {\n           console.log(\"element : \", this.evaluate(function ()\n           {\n               var el = $(\"input#dialog_document_name\");\n\n               return el;\n           }));  \n   });\n});\n</code></pre>\n\n<p>I removed the test as it is not the point...</p>\n\n<p>thanks!</p>\n"},{"tags":["c#","unit-testing","mstest","moles"],"answer_count":6,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":3765,"score":3,"question_id":4105604,"title":"How To Read UnitTest Project's App.Config From Test With HostType(\"Moles\")","body":"<p>I have the folowing tests:</p>\n\n<pre><code>[TestClass]\npublic class GeneralTest\n{\n    [TestMethod]\n    public void VerifyAppDomainHasConfigurationSettings()\n    {\n        string value = ConfigurationManager.AppSettings[\"TestValue\"];\n        Assert.IsFalse(String.IsNullOrEmpty(value), \"No App.Config found.\");\n    }\n\n    [TestMethod]\n    [HostType(\"Moles\")]\n    public void VerifyAppDomainHasConfigurationSettingsMoles()\n    {\n        string value = ConfigurationManager.AppSettings[\"TestValue\"];\n        Assert.IsFalse(String.IsNullOrEmpty(value), \"No App.Config found.\");\n    }\n}\n</code></pre>\n\n<p>The only difference between them is <code>[HostType(\"Moles\")]</code>. But the first passes and the second fails. How can I read App.config from the second test?</p>\n\n<p>Or may be I can add some another config file in other place?</p>\n"},{"tags":["eclipse","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12933565,"title":"JUnit Fork-Mode in Java Classes","body":"<p>There's support for <code>forkMode</code> in Ant and Maven and occasionally we use it with value <code>perTest</code>. However, the JUnit-tests in Eclipse still fail when we run the tests on a class or on a project (Run As -> JUnit Test). Obviously JUnit uses default settings or behaviour and executes the tests in parallel causing some red crosses in the JUnit-view.</p>\n\n<ol>\n<li>Is there a way to code something into the test-class that lets JUnit behave like the <code>forkMode</code> setting? We don't mind if there's an Eclipse-only solution for this.</li>\n<li>Or can this be done with a Run Configuration in Eclipse?</li>\n</ol>\n\n<p>EDIT:<br>\nI understand that the problems are based on data remaining after tests and further tests will fail due to that. While this makes sense, please understand that this doesn't answer my question. Think of my situation as being part of some sort of a Tiger Team. We have a bunch of issues and fixing that part of existing tests is just one of them. Trust me, we will try to cover everything... (<em>I haven't heard that in a while</em>)</p>\n"},{"tags":["java","unit-testing","mocking","abstract-class","mockito"],"answer_count":7,"favorite_count":12,"up_vote_count":24,"down_vote_count":0,"view_count":11624,"score":24,"question_id":1087339,"title":"Using Mockito to test abstract classes","body":"<p>I'd like to test an abstract class. Sure, I can <a href=\"http://stackoverflow.com/questions/243274/best-practice-unit-testing-abstract-classes\">manually write a mock</a> that inherits from the class.</p>\n\n<p>Can I do this using a mocking framework (I'm using Mockito) instead of hand-crafting my mock? How?</p>\n"},{"tags":["unit-testing","node.js","rest","mongoose","expressjs"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":153,"score":1,"question_id":12245624,"title":"How to unit test a NodeJs REST API server built using Express + Mongoose?","body":"<p>I have a REST API server that uses Express, Mongoose and <a href=\"https://github.com/lorenwest/node-config\" rel=\"nofollow\">config</a>. I want to unit test my API. Basically, bring up a temporary web server on port x, an empty mongo-database on port y, do some API calls (both gets and puts) and validate what I get back and then shutdown temporary server and drop test database once my tests finish. What is the best way to do this? I have been looking at <a href=\"http://visionmedia.github.com/mocha/\" rel=\"nofollow\">mocha</a>/<a href=\"http://jhnns.github.com/rewire/\" rel=\"nofollow\">rewire</a> but not sure how to set up temporary server and db and not sure what the best practices are.</p>\n"},{"tags":["unit-testing","appharbor","xunit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12930045,"title":"How does AppHarbor select what to unit-test?","body":"<p>I have just created a small project with AppHarbor, composed of a single .csproj that uses xUnit. It's using NuGet to recover the xUnit framework. AppHarbor recognized it was a test project and executed the tests that were present.</p>\n\n<p>I want to know how AppHarbor select which projects to unit test. Does it look at the referenced assemblies of the dll/exe (perhaps through reflection)? (for example if the dll/exe references xunit.dll then it's probably a test project). Does it look at the .csproj file looking for the references? Does it run all the assemblies through all the runners?</p>\n"},{"tags":["unit-testing","jasmine","snapshot","phantomjs"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":309,"score":4,"question_id":10522773,"title":"Taking snapshots of the webpage while unit testing using phantomjs and jasmine","body":"<p>I can't seem to get communication of jasmine and phantomjs working.  I'm using the run-jasmine.js file in the examples folder for phantomjs.  The problem I get is that the file can't find system so it can't require it.</p>\n\n<p>This is the specific message:</p>\n\n<pre><code>undefined:0 Unknown module system for require()\n</code></pre>\n\n<p>On top of that, I was wondering how to get dom manipulation of the html file working with jasmine.</p>\n\n<p>EDIT: It looks like the DOM issue was simple since it's just using phantom js's headless browser functionality.  I still have the system problem, and I'm wondering how to call render page in between each test rather than when the page is done loading.</p>\n"},{"tags":["android","sqlite","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12943230,"title":"Testing a SQLite database on Android","body":"<p>I am working on JUnit tests for my Android app which uses a SQLite database. I need to create  a test database which can be manipulated by test cases. The database needs to start in a known configuration and reset for each test case. I figured out that I can use an in-memory database by passing the SQLiteOpenHelper a <code>null</code> value as the file name for the database (<a href=\"http://attakornw.wordpress.com/2012/02/25/using-in-memory-sqlite-database-in-android-tests/\" rel=\"nofollow\">see this article for details</a>). Now I also want to populate the database table for some of my tests. I have a CSV file on my local file system with some data that I can use for testing. How do I get this data into my SQLite database on an emulator or other device for testing?</p>\n"},{"tags":["unit-testing","selenium","ui-testing"],"answer_count":5,"favorite_count":16,"up_vote_count":14,"down_vote_count":0,"view_count":2858,"score":14,"question_id":99876,"title":"Selenium Critique","body":"<p>I just wanted some opinions from people that have run Selenium (<a href=\"http://selenium.openqa.org\" rel=\"nofollow\">http://selenium.openqa.org</a>) I have had a lot of experience with WaTiN and even wrote a recording suite for it. I had it producing some well structured code but being only maintained by me it seems my company all but abandoned it. If you have run selenium have you had a lot of success? I will being using .NET 3.5, does Selenium work well with it? Is the code produced clean or simply a list of all the interaction? (<a href=\"http://blogs.conchango.com/richardgriffin/archive/2006/11/14/Testing-Design-Pattern-for-using-WATiR_2F00_N.aspx\" rel=\"nofollow\">http://blogs.conchango.com/richardgriffin/archive/2006/11/14/Testing-Design-Pattern-for-using-WATiR_2F00_N.aspx</a>) How well does the distributed testing suite fair?</p>\n\n<p>Any other gripes or compliments on the system would be greatly appreciated!</p>\n"},{"tags":["android","eclipse","unit-testing","ant"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12905452,"title":"Running unit tests with ant on an eclipse project","body":"<p>Alright, so I've spent a good 3 days now combing the net trying to figure out how to run some unit tests with ant from the command line for my eclipse project.</p>\n\n<p>I can run the tests in Eclipse via \"Run As\" -> \"Android JUnit Test\"</p>\n\n<p>What I want now is to be able to run the tests via the command line. That's it.</p>\n\n<p>I can't seem to find any guides on this that were not written in 2010, but trying to follow them nonetheless I have gotten as far as installing ant and creating a build.xml file inside my project that I copy-pasta'd from a guide. Since I can only guess at what is going on in the build file (have never worked with ant before), when a problem rears its ugly head I'm pretty much SOL.</p>\n\n<p>Currently when I try and run it, it says \"package android.app does not exist\" (I'm using the Activity class), and the same for a library jar file I've included in the project's \"/libs\" folder.</p>\n\n<p>It seems pretty clear that somewhere I'm missing some kind of path declaration, but nothing I try seems to work.</p>\n\n<p>EDIT (added code):\nThis is MockTester.java -</p>\n\n<pre><code>package com.android.mocksdktester;\n\nimport static org.junit.Assert.*;\nimport android.app.Activity;    \nimport android.test.AndroidTestCase;\n\nimport com.mock.android.lib.*;\n\npublic class MockTester extends AndroidTestCase\n{\n    Activity mActivity;\n    MockFeature mFeature;\n\n    public MockTester()\n    {   \n    }\n\n\n    public void testExists()\n    {\n        String test = null;\n        assertNull(test);\n    }\n}\n</code></pre>\n\n<p>As you can see, not a lot going on. \nThis is the build.xml file I've got, and as I mentioned, I can only make guesses as to what it's doing.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!-- to save as \"build.xml\" --&gt;\n&lt;project name=\"Mock Unit Tests\" default=\"run\" basedir=\".\"&gt;\n    &lt;path id=\"junit_classpath\"&gt; \n        &lt;pathelement location=\"C:\\eclipse\\plugins\\org.junit_4.8.2.v4_8_2_v20110321-1705\\junit.jar\"/&gt;\n    &lt;/path&gt;\n\n    &lt;!-- Library Project Here --&gt;\n    &lt;fileset dir=\"libs\" includes=\"*.jar\"/&gt;\n\n\n    &lt;!-- build all classes in this directory --&gt;\n    &lt;!-- To run this: use \"ant build\" --&gt;\n    &lt;!-- need to include junit.jar in the classpath --&gt;\n    &lt;target name=\"build\"&gt;   \n        &lt;javac srcdir=\"${basedir}\"/&gt;\n        &lt;echo message=\"Build done\" /&gt;\n    &lt;/target&gt;\n\n    &lt;!-- Test and build all files  --&gt;\n    &lt;!-- To run this: use \"ant\" (default) or \"ant run\" --&gt;\n    &lt;target name=\"run\" depends=\"build\"&gt;\n        &lt;java taskname=\"Test\" classname=\"MockTester\" fork=\"true\" failonerror=\"true\" /&gt;\n        &lt;echo message=\"Unit Tests done\" /&gt;\n    &lt;/target&gt;\n\n    &lt;!-- delete all class files --&gt;\n    &lt;!-- To run this: use \"ant clean\" --&gt;\n    &lt;target name=\"clean\"&gt;\n        &lt;delete&gt;\n            &lt;fileset dir=\"${basedir}\" includes=\"*.class\" /&gt;\n        &lt;/delete&gt;\n        &lt;echo message=\"clean done\" /&gt;\n    &lt;/target&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>It was complaining about not seeing junit in the past but I managed to fix that. I'm just not sure what to do when it's missing Android-related classes, and a jar file included in the project (though I've read this is a bug).</p>\n\n<p>Errors:</p>\n\n<pre><code>build:\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\build.xml:16: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds\n[javac] Compiling 3 source files\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:14:error: package android.app does not exist\n[javac] import android.app.Activity;\n[javac]                   ^\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:15:error: package android.test does not exist\n[javac] import android.test.AndroidTestCase;\n[javac]                    ^\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:18:error: package com.mock.android.lib does not exist\n[javac] import com.mock.android.lib.*;\n[javac] ^\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:20:error: cannot find symbol\n[javac] public class MockTester extends AndroidTestCase\n[javac]                                  ^\n[javac]   symbol: class AndroidTestCase\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:22:error: cannot find symbol\n[javac]     Activity mActivity;\n[javac]     ^\n[javac]   symbol:   class Activity\n[javac]   location: class MockTester\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:23:error: cannot find symbol\n[javac]     MockFeature mFeature;\n[javac]     ^\n[javac]   symbol:   class MockFeature\n[javac]   location: class MockTester\n[javac] 6 errors\n\nBUILD FAILED\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["unit-testing","gwt","testing","maven"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12826026,"title":"In a multi-module GWT application with one entry point, is there a way to run GWT tests from sub modules only in the entry point GWT module?","body":"<p>As an additional note, we manage our project builds with Maven.</p>\n\n<p>Let's say we have three GWT modules, only one of which has an entry point. The other two modules are inherited by the module containing the entry point. </p>\n\n<p>We practice MVP and strive to keep the majority of our testing as normal JUnit tests, but some integration tests require us to use GWTTest. We keep these to a minimum.</p>\n\n<p>We would like to keep the actual tests with the modules containing the code they are testing. My thought was to ensure that maven only executes JUnit tests for the sub-module builds. The GWTTests in the submodules would be rolled up into a test suite. Then, the entry point project would contain a GWTTestSuite which rolls up the submodule test suites along with and other GWTTests that the entry point module may have.</p>\n\n<p>At this point, my problem is that the entry point GWTTestSuite can't resolve the tests from the submodules (<code>\"no source code is available........did you forget to inherit a required module\"</code>). I've tried creating the test-jars for the submodules and adding them as dependencies to the test scope, but when GWT is executing the primary GWTTestSuite, it can't find the submodule test suites (or their underlying gwt tests). I can see the GWTTests in the .m2 repo test jars.</p>\n\n<p>So, how do I get the GWT compiler to \"see\" the submodule tests?</p>\n\n<p>Update:\nI have not yet been able to figure out how to do this. The cleanest thing I can manage is to keep the normal JUnit tests co-located with the submodules, but keep all GWT Tests for all modules in the main module.</p>\n"},{"tags":["unit-testing","signals","ironpython"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12922336,"title":"IronPython.Modules.PythonSignal Throwing Exception when importing unittest module","body":"<p>Interesting case here:  I'm using IronPython 2.7.3 on my home machine and at work.  Import unittest works fine at home but not at work:</p>\n\n<p><img src=\"http://i.stack.imgur.com/qUJPf.png\" alt=\"Iron Python error\"></p>\n\n<p>Any idea what's going on?  The odd thing is the fact I un-installed Iron Python, re-installed, and I was able to import unittest for an hour with no problems.  I stepped out for a bit and tried to run additional tests but it is broken again.  Any idea what could be the cause?</p>\n\n<p>Edit:  Followed Jeff's suggestion and the base exceptions are:\n<img src=\"http://i.stack.imgur.com/XtuE8.png\" alt=\"enter image description here\"></p>\n"},{"tags":["unit-testing","typescript"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":997,"score":1,"question_id":12695934,"title":"Unittesting in TypeScript","body":"<p>I know, TypeScript is one day old. But I`m curious if is here somekind unit test framework or way how to write and run unit tests for TypeScript?</p>\n\n<p>TypeScript can be compiled to JavaScript and I can write test for that JavaScript, but it`s not what I want.</p>\n"},{"tags":[".net","unit-testing","web-api","url-parameters","controller-action"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12918328,"title":"Unit Testing Action Parameters in the WebAPI","body":"<p>I'm writing some unit tests for WebAPI controllers, and one of the aspects that I want to assert is that the parameters match.</p>\n\n<p>I've followed the method used in <a href=\"http://www.strathweb.com/2012/08/testing-routes-in-asp-net-web-api/\" rel=\"nofollow\">Filip Wojcieszyn's blog</a>, which is working fine, but I'm now looking to extend its assertions.</p>\n\n<p>I have three actions on a controller (all three of which have been verified through actual use):</p>\n\n<pre><code>[HttpGet]\npublic IEnumerable&lt;Task&gt; Get()\n\n[HttpGet]\npublic IEnumerable&lt;Task&gt; Get(string elementType)\n\n[HttpGet]\npublic Task Get(long id)\n</code></pre>\n\n<p>And I have the following code</p>\n\n<pre><code>var actionSelector = new ApiControllerActionSelector();\nvar descriptor = actionSelector.SelectAction(_controllerContext);\nreturn descriptor.GetParameters();\n</code></pre>\n\n<p>The problem is that when I call descriptor.GetParameters() on the parameterless route it returns a collection containing 1 parameter - the \"long id\" param.</p>\n\n<p>Can anyone explain why it returns only this and neither of the other two overloads, and if it's possible to obtain the overload possibilities?</p>\n"},{"tags":["unit-testing","testing","language-agnostic"],"answer_count":20,"favorite_count":11,"up_vote_count":45,"down_vote_count":0,"view_count":7009,"score":45,"question_id":105007,"title":"Should I test private methods or only public ones?","body":"<p>I have read <a href=\"http://stackoverflow.com/questions/34571/whats-the-best-way-of-unit-testing-private-methods\">this post</a> about how to test private methods. I usually do not test them, because I always thought it's faster to test only public methods that will be called from outside the object. Do you test private methods? Should I always test them?</p>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio-2010","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12910232,"title":"Finding difficulty in unit testing a Controller Action method using NUnit","body":"<p>I want to Unit test the method ExecLogin() using NUnit testing framework. But I'm having problem while writing code for the testing because the GenerateInput() method is declared as internal virtual. So, I'm not being able pass the SessionUserId parameter to it which I think is needed. Please guide me how to write the unit test code for ExecLogin(). I'm new to testing.</p>\n\n<p>This is related to ASP.NET MVC3 testing controller actions.</p>\n\n<pre><code>    public class BaseController : Controller\n    {\n        public string SessionUserId\n        {\n            get { return Session[\"UserId\"] as string; }\n            set { Session[\"UserId\"] = value; }\n        }\n\n        internal virtual SomeType GenerateInput(SomeType inputData)\n        {\n             var finalInput = new StringBuilder(600);\n\n             finalInput.Append(\"&lt;Root&gt;\")\n             .Append(\"&lt;UserId&gt;\")\n             .Append(SessionUserId)\n             .Append(\"&lt;/UserId&gt;\")\n             .Append(\"&lt;IPAddress&gt;\")\n             .Append(this.GetClientIpAddress())\n             .Append(\"&lt;/IPAddress&gt;\")\n             .Append(inputData.InputValue)\n             .Append(\"&lt;/Root&gt;\");\n\n             inputData.InputValue = finalInput.ToString();\n             return inputData;\n        }\n    }\n\n    public class LoginController : BaseController\n    {\n        [HttpPost]\n        public JsonResult ExecLogin(JsonRequest&lt;LoginModel&gt; request)\n        {\n            var loginObj = request.InputObject;\n\n            var login = new StringBuilder(300);\n            login.Append(\"&lt;UserName&gt;\").Append(loginObj.UserName).Append(\"&lt;/UserName&gt;\")\n                .Append(\"&lt;Password&gt;\").Append(EncodingHelper.GetHashedPassword(loginObj.Password)).Append(\"&lt;/Password&gt;\")\n                .Append(\"&lt;RememberMe&gt;\").Append(loginObj.RememberMe).Append(\"&lt;/RememberMe&gt;\")\n                ;\n        var input = new SomeType { Operation = request.Operation, PageName = ActionName, InputValue = login.ToString() };\n\n        var returnValue = SomeDelegate.Instance.ExecuteOperation(GenerateInput(input));\n        return Json(new JsonResponse&lt;string&gt; { Status = returnValue.Status, Result = this.PopulateSession(returnValue) });\n        }\n    }\n</code></pre>\n\n<p>This is our model classes:</p>\n\n<pre><code>   public class LoginModel\n   {\n       public string UserId { get; set; }\n       public string UserName { get; set; }\n       public string Password { get; set; }\n       public bool RememberMe { get; set; }\n       public bool IsValidUser { get; set; }\n   }\n\n   public class JsonRequest&lt;T&gt;\n   where T : class\n   {\n       public string Operation { get; set; }\n       public T InputObject { get; set; }\n   }\n</code></pre>\n\n<p>While learning Dependency Injection pattern I came to know that use of concrete classes makes code more tightly coupled. And the more tightly coupled the code the harder it becomes to test. Is this why I'm not being able to test it properly? Please help.</p>\n"},{"tags":["python","unit-testing","exception-handling","warnings"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":339,"score":5,"question_id":3892218,"title":"How to test with Python's unittest that a warning has been thrown?","body":"<p>I have a following function in Python and I want to test with unittest that if the function gets 0 as argument, it throws a warning. I already tried assertRaises, but since I don't raise the warning, that doesn't work. </p>\n\n<pre><code>   def isZero( i):\n       if i != 0:\n         print \"OK\"\n       else:\n         warning = Warning( \"the input is 0!\") \n         print warning\n       return i\n</code></pre>\n\n<p>Thank you, Tomas</p>\n"},{"tags":["android","unit-testing","broadcastreceiver","intentservice","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":182,"score":3,"question_id":11677320,"title":"Robolectric and IntentServices","body":"<p>Using Robolectric, how would one go about testing an IntentService that broadcasts intents as a response?</p>\n\n<p>Assuming the following class:</p>\n\n<pre><code>class MyService extends IntentService {\n    @Override\n    protected void onHandleIntent(Intent intent) {\n        LocalBroadcastManager.getInstance(this).sendBroadcast(new Intent(\"action\"));\n    }\n}\n</code></pre>\n\n<p>In my test case, I'm attempting to do something like this:</p>\n\n<pre><code>@RunWith(RobolectricTestRunner.class)\npublic class MyServiceTest{\n    @Test\n    public void testPurchaseHappyPath() throws Exception {\n\n        Context context = new Activity();\n\n        // register broadcast receiver\n        BroadcastReceiver br = new BroadcastReceiver() {\n\n            @Override\n            public void onReceive(Context context, Intent intent) {\n                // test logic to ensure that this is called\n            }\n\n        };\n        context.registerReceiver(br, new IntentFilter(\"action\"));\n\n        // This doesn't work\n        context.startService(new Intent(context, MyService.class));\n\n    }\n\n}\n</code></pre>\n\n<p>MyService is never started using this approach. I'm relatively new to Robolectric, so I'm probably missing something obvious. Is there some sort of binding I have to do before calling startService? I've verified that broadcasting works by just calling sendBroadcast on the context. Any ideas?</p>\n"},{"tags":["unit-testing","grails","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12931018,"title":"Grails: Returning a mocked object from a mocked service","body":"<p>I have a problem trying to unit test a service in Grails (1.3.6).</p>\n\n<p>The service has an instance of another service which it uses to create an object.  I am trying to mock the creator service and also the object that it returns.</p>\n\n<p>In the test class:</p>\n\n<pre><code>mockMyService = new MyService() // service under test\n\n// Fake Asset object to 'create'\nasset = mockFor(Asset)\nasset.createMock()\n\n// Mock the CreatorService and return the mocked asset\nmockCreatorService = mockFor(CreatorService)\nmockCreatorService.demand.generateAsset(){Section s, Date d, User u, AssetStatus a, String name -&gt; return asset}\n\nmockMyService = new MyService()\nmockMyService.assetService = mockCreatorService.createMock()\n</code></pre>\n\n<p>From debugging and inspecting I'm fairly sure that the mock object is created ok and the service is mocked correctly and faking the generateAsset call.</p>\n\n<p>In MyService, the call to the other (creator) service is:</p>\n\n<pre><code>Asset asset = creatorService.generateAsset(section, date, author, status, assetName)\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<p>Cannot cast object 'grails.test.GrailsMock@56c88357' with class 'grails.test.GrailsMock' to class 'com.xxxxxx.Asset</p>\n\n<p>Which I think is due to the assigning of the mocked Asset in the call to generateAsset by MyService. </p>\n\n<p>Can anyone shed light on this?  If the reason is due to the assignment, is there a way around it?  Or am I approaching this wrongly or have I missed something obvious.</p>\n\n<p>It's grails 1.3.6 (the port to Grails 2 won't be complete for a while so stuck with this version this for a while).</p>\n\n<p>Thanks.</p>\n\n<p>Update:</p>\n\n<p>OK so I've got around the cast exception by declaring the mocked objects like:  </p>\n\n<pre><code>def testAssets = [\n new Asset(id:123, name:......)]\nmockDomain(Asset, testAssets)\n</code></pre>\n\n<p>But now it seems I have to declare <em>all</em> the non-null properties for the test Asset.  This doesn't seem right.  For testing, I don't care about the Asset at all, apart from the Id it has.</p>\n"},{"tags":["visual-studio","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":225,"score":3,"question_id":3654528,"title":"How to play sound after running unit tests in Visual Studio","body":"<p>When I am developing on my local machine, I want Visual Studio to play a happy sound when I run my unit tests and they pass and a sad sound when one fails and a <em>really</em> sad one when more than one fails. How do I do this?</p>\n\n<p>I assume that I need to write a macro, but I can't find any environment events that relate to unit tests. I am using Visual Studio 2010, but it would be nice to have a general solution for most or all versions of Visual Studio.</p>\n"},{"tags":["ruby","unit-testing","rspec","mocking","tdd"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":95,"score":3,"question_id":9217615,"title":"How to test subject with dependency?","body":"<p>I want to develop a card-base game in Ruby, and I want to do it in <strong>TDD</strong> way.</p>\n\n<p>The first class I want to write is <strong>Player</strong>.\nEach player has a <strong>hand</strong> with 13 cards and on his/her turn can choose and play 1 card to pass.</p>\n\n<p>I have not developed any other classes (like card, hand, ..), I want to know how I can test this subject which has dependency to other classes?</p>\n\n<p>I know about Mocks but I don't know how can I use them.</p>\n\n<p>For example in this scenario we know that when a player <strong>plays</strong> one card that card should have to be removed from his/her hand.</p>\n\n<p>This is my code :</p>\n\n<pre><code>require \"rspec\"\nrequire \"lib/player\"\n\ndescribe Player do\n  before(:each) do\n    hand=mock(\"Hand\")\n    hand.should_receive(:count).and_return(13)\n    subject.hand=hand\n  end\n\n  it \"should choose and play a card from her/his hand\" do\n      subject.hand.count.should==13\n      card_selected=subject.play(2)      # card #2 in his/her hand\n      subject.hand.count.should=12\n   end\nend\n</code></pre>\n\n<p>Also, in the implementation we are dependent to the Hand class, how can I handle it ?</p>\n"},{"tags":["java","unit-testing","tdd","mocking"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":8520207,"title":"Tests granularity when using mock object","body":"<p>I have Struts 1 action and want to test it in isolation.\nWhat this action do is as follows:</p>\n\n<ul>\n<li>load data using parameters from request</li>\n<li>build xml-based representation of this data</li>\n<li>send this response directly to client</li>\n</ul>\n\n<p>I use jMock for testing but have one doubt here.\nMy first test is</p>\n\n<pre><code>public void shouldActionInvocationPrintValidResponse() {\n    ProcessingAction action = new ProcessingAction();\n\n    DBService service = mock(DBService.class);\n    List records = new ArrayList();\n    when(service.loadData()).thenReturn(records);\n\n    ResponseBuilder builder = mock(ResponseBuilder.class);\n    when(builder.buildResponse(records)).thenReturn(\"fake response\");\n\n    action.execute(null, null, null, null);\n\n    assertEquals(\"fake response\", writer.getContentWritten());\n}\n</code></pre>\n\n<p>And my prod code evaluated to this:</p>\n\n<pre><code>public String execute(...) {\n    List recordsList = service.loadData();\n    String response = responseBuilder.buildResponse(recordsList);\n    response.getWriter().print(response);\n}\n</code></pre>\n\n<p>My doubt here is if such test isn't too big here. I check whole succesful flow here. Shouldn't there be separate tests for checking every single dependency call in their own tests?</p>\n\n<p>I wonder because I had troubles with this test's name. My ideas at the beginning were something like</p>\n\n<pre><code>shouldFetchDataThenFormatThemAndSendResponse\n</code></pre>\n\n<p>As this is all the tests does, the name shows it probably does too much (look at the \"and\" e.g. in the test name)</p>\n\n<p>And should I have whole test written at once, or just add dependencies calls step-by-step?</p>\n\n<p>EDIT: \nDetailed code for test and action provided.</p>\n"},{"tags":["unit-testing","tdd","mocking"],"answer_count":3,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":373,"score":6,"question_id":1595952,"title":"How to write tests without so many mocks?","body":"<p>I am a heavy advocate of proper Test Driven Design or Behavior Driven Design and I love writing tests. However, I keep coding myself into a corner where I need to use 3-5 mocks in a particular test case for a single class. No matter which way I start, top down or bottom up I end up with a design that requires at least three collaborators from the highest level of abstraction. </p>\n\n<p>Can somebody give good advice on how to avoid this pitfall? </p>\n\n<p>Here's a typical scenario. I design a Widget that produces a Midget from a given text value. It always starts really simple until I get into the details. My Widget must interact with several hard to test things like file systems, databases, and the network. </p>\n\n<p>So, instead of designing all that into my Widget I make a Bridget collaborator. The Bridget takes care of one half of the complexity, the database and network, allowing me to focus on the other half which is multimedia presentation. So, then I make a Gidget that performs the multimedia piece. The entire thing needs to happen in the background, so now I include a Thridget to make that happen. When all is said and done I end up with a Widget that hands work to a Thridget which talks over a Bridget to give its result to a Gidget.</p>\n\n<p>Because I'm working in CocoaTouch and trying to avoid mock objects I use the self-shunt pattern where abstractions over collaborators become protocols that my test adopts. With 3+ collaborators my test balloons and become too complicated. Even using something like OCMock mock objects leaves me with an order of complexity that I'd rather avoid. I tried wrapping my brain around a daisy-chain of collaborators (A delegates to B who delegates to C and so on) but I can't envision it.</p>\n\n<p><em><strong>Edit</em></strong>\nTaking an example from below let's assume we have an object that must read/write from sockets and present the movie data returned.</p>\n\n<pre><code>//Assume myRequest is a String param...\nInputStream   aIn  = aSocket.getInputStram();\nOutputStream  aOut = aSocket.getOutputStram();\nDataProcessor aProcessor = ...;\n\n// This gets broken into a \"Network\" collaborator.\nfor(stuff in myRequest.charArray()) aOut.write(stuff);\nObject Data = aIn.read(); // Simplified read\n\n//This is our second collaborator\naProcessor.process(Data);\n</code></pre>\n\n<p>Now the above obviously deals with network latency so it has to be Threaded. This introduces a Thread abstraction to get us out of the practice of threaded unit tests. We now have</p>\n\n<pre><code>AsynchronousWorker myworker = getWorker(); //here's our third collaborator\nworker.doThisWork( new WorkRequest() {\n//Assume myRequest is a String param...\nDataProcessor aProcessor = ...;\n\n// Use our \"Network\" collaborator.\nNetworkHandler networkHandler = getNetworkHandler();\nObject Data = networkHandler.retrieveData(); // Simplified read\n\n//This is our multimedia collaborator\naProcessor.process(Data);\n})\n</code></pre>\n\n<p>Forgive me for working backwards w/o tests but I'm about to take my daughter outside and I'm rushing thru the example. The idea here is that I'm orchestrating the collaboration of several collaborators from behind a simple interface that will get tied to a UI button click event. So the outter-most test reflects a Sprint task that says given a \"Play Movie\" button, when it is clicked, the movie will play.\n<strong><em>Edit</em></strong>\nLets discuss.</p>\n"},{"tags":["c#","unit-testing","mocking","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12919969,"title":"Mocking up a list of Moqs that sits on a parent object","body":"<p>I'm doing some unit testing with Moq and I'd like to do the equivalent of:            </p>\n\n<pre><code>Location location = new Location();\nLocationTimes locationTimes = new LocationTimes();\nlocation.LocationTimes.Add(locationTimes);\n</code></pre>\n\n<p>So I tried this:</p>\n\n<pre><code>var mockLocation = new Mock&lt;Location&gt;();\nvar mockLocationTime = new Mock&lt;LocationTimes&gt;();\n\nmockLocationTime.SetupProperty(f =&gt; f.isEarlyHoursSupported, true);\nmockLocationTime.SetupProperty(f =&gt; f.isEarlyHoursSupportedManual, true);\n\nvar mockLocationTimeList = new List&lt;Mock&lt;LocationTimes&gt;&gt;();\nmockLocationTimeList.Add(mockLocationTime);\n\nthis.mockLocation1 = new Mock&lt;Location&gt;();\nmockLocation1.SetupProperty(f =&gt; f.LocationTimes, mockLocationTimeList);\n</code></pre>\n\n<p>...but I'm getting an error on the last line, as mockLocationTimeList is now a list of moqs.</p>\n\n<p>How am I supposed to be doing this?</p>\n"},{"tags":["c#","unit-testing","mocking","tdd","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12927118,"title":"mocking a method with an anonymous type argument","body":"<p>I have the following code:</p>\n\n<pre><code>var connector = new Mock&lt;IConector&gt;();\n\nconnector\n    .Setup(cn =&gt; cn.listar(\"FetchEstandar\", new Estandar(), new {Id = 1}))\n    .Returns(new List&lt;Estandar&gt;{ new Estandar {Id = 1} });\n\n var entidad = connector.Object\n     .listar(\"FetchEstandar\", new Estandar(), new {Id = 1});\n</code></pre>\n\n<p>when I call <code>listar</code> on the connector Object, I get an <code>\"Expression Cannot Contain an Anonymouse Type\"</code> error. I've tried with rhino mocks and moq. </p>\n\n<p>Is there any way I can mock this method? am I doing something wrong? alternatively, I could ignore this parameter but I don't know how. I really just need to test the value of the first parameter and ignorearguments works but I have no idea whether or how I can get this value if I use it</p>\n"},{"tags":["c#",".net","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12871897,"title":"How to setup a method twice for different parameters with mock","body":"<p>I would like to setup a method with Moq twice but it seems that the last one overrides the previous ones. Here's my initial setup:</p>\n\n<pre><code>string username = \"foo\";\nstring password = \"bar\";\n\nvar principal = new GenericPrincipal(\n    new GenericIdentity(username),\n    new[] { \"Admin\" });\n\nvar membershipServiceMock = new Mock&lt;IMembershipService&gt;();\nmembershipServiceMock.Setup(ms =&gt;\n    ms.ValidateUser(username, password)\n).Returns(new ValidUserContext { \n    Principal = principal\n});\n</code></pre>\n\n<p>This works out fine but I want this to return <code>new ValidUserContext()</code> if the username or password is rather than the <code>username</code> and <code>password</code> variables as above. To do that, I added another setup but this time it overrides the above one and always applies it:</p>\n\n<pre><code>membershipServiceMock.Setup(ms =&gt;\n    ms.ValidateUser(It.IsAny&lt;string&gt;(), It.IsAny&lt;string&gt;())\n).Returns(\n    new ValidUserContext()\n);\n</code></pre>\n\n<p>What is the most elegant way of handling this type of situations with Moq?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I solved the problem with the below approach but I guess there is a better way of handling this:</p>\n\n<pre><code>var membershipServiceMock = new Mock&lt;IMembershipService&gt;();\nmembershipServiceMock.Setup(ms =&gt;\n    ms.ValidateUser(It.IsAny&lt;string&gt;(), It.IsAny&lt;string&gt;())\n).Returns&lt;string, string&gt;((u, p) =&gt; \n    (u == username &amp;&amp; p == password) ?\n    new ValidUserContext { \n        Principal = principal\n    }\n    : new ValidUserContext()\n);\n</code></pre>\n"},{"tags":["unit-testing","code-coverage","gcov"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1729,"score":2,"question_id":4643158,"title":"Code coverage with GCOV can't produce .gcda file","body":"<p>I want to get code coverage with GCOV, I set build setting by  <a href=\"http://developer.apple.com/library/mac/#qa/qa2007/qa1514.html\" rel=\"nofollow\">http://developer.apple.com/library/mac/#qa/qa2007/qa1514.html</a></p>\n\n<ul>\n<li>add \"-lgcov\" to \"Other Linker Flags\"</li>\n<li>check \"Instrument Program Flow\"</li>\n<li>check \"Generate Test Coverage Files\"</li>\n</ul>\n\n<p>but I can't produce the .gcda file, could anyone help?</p>\n"},{"tags":["iphone","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12927764,"title":"iOS FrameWork UnitTesting","body":"<p>I have created a iOS framework and want to use that framework in one of my application. </p>\n\n<p>My question is about the UnitTesting of the framework. \nI have read about the inbuilt xcode unittest framework, but not sure how to get started on testing the framework.</p>\n\n<p>Or do I have to import the framework in one of my apps and then perform the testing of the framework via </p>\n\n<p>Regards,</p>\n\n<p>Nirav</p>\n"},{"tags":["perl","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":12923821,"title":"Perl release tests vs install time tests","body":"<p>I'm writing a Perl module that I want to upload to CPAN soon.  I have written a test suite for it to make sure I don't break anything between releases.  What kind of tests should be run at install time versus only at release time?  The only ones I can really nail down that are release time only are POD checkers, Perl critic checks, etc.</p>\n"},{"tags":["php","unit-testing","mvc","activerecord","fuelphp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12926411,"title":"Unit Testing a FuelPHP Model","body":"<p>So I have a very simple (at least right now it is) model that returns a contact via it's primary key ID:</p>\n\n<pre><code>class Model_Contact extends \\Fuel\\Core\\Model\n{\n    public function get_by_id($contact_id)\n    {\n        return Entity_Contact::find_by_pk($contact_id);\n    }\n}\n</code></pre>\n\n<p>The <code>Entity_Contact</code> class looks like this (irrelevant array content omitted):</p>\n\n<pre><code>class Entity_Contact extends \\Core\\Entity_Base\n{\n    protected static $_table_name = 'contacts';\n    protected static $_properties = array(...);\n    protected static $_public_settable_properties = array(...);\n    protected static $_rules = array(...);\n}\n</code></pre>\n\n<p>Note: <code>\\Core\\Entity_Base</code> extends <code>\\Fuel\\Core\\Model_Crud</code></p>\n\n<p>I might use this in a controller like so:</p>\n\n<pre><code>$model = new Model_Contact();\n$contact = $model-&gt;get_by_id(4);\n</code></pre>\n\n<p>I know that in order to unit test this, I should mock out the actual database call (<code>Entity_Contact::find_by_pk</code>), but I'm not sure how to do this. Since I'm using Fuel's <code>Model_crud</code> functionality (where the DB accessors are actually a part of the domain object model), I'm not sure that I can completely mock the database---or maybe I'm missing something.</p>\n\n<p>So the question: how would you write a test for <code>Model_Contact::get_by_id()</code>?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["c#",".net","unit-testing","nunit","nunit-2.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12876423,"title":"How to run test method by the testfixture parameter?","body":"<p>I have a test class and a class like below.</p>\n\n<pre><code>public class Foo\n{\n    private IDbOjbect _db;\n\n    public Foo(string conn)\n    {\n        _db = new DbOjbect(conn);\n    }\n\n    internal Foo(IDbObject db)\n    {\n        _db= db;\n    }\n\n    internal bool TestOne()\n    {\n        if (_db.CurrentDbType == DBType.Oracle)\n        {\n            //do something\n            return true;\n        }\n        return false;\n    }\n\n    internal bool TestTwo()\n    {\n        if (_db.CurrentDbType == DBType.SqlServer || \n            _db.CurrentDbType == DBType.SqlServerCE)\n        {\n            //do something\n            return true\n        }\n        return false;\n    }\n\n    internal bool TestThree()\n    {\n        if (_db.CurrentDbType == DBType.MySql || \n            _db.CurrentDbType == DBType.PostgreSQL || \n            _db.CurrentDbType == DBType.SQLite)\n        {\n            //do something\n            return true\n        }\n        return false;\n    }\n\n    public void RunProcesses()\n    {\n         TestOne();\n         TestTwo();\n         TestThree();\n    }\n}\n\n[TestFixture(\"sqlserver\")]\n[TestFixture(\"sqlserverce\")]\n[TestFixture(\"oracle\")]\n[TestFixture(\"mysql\")]\n[TestFixture(\"sqlite\")]\n[TestFixture(\"postgre\")]\npublic class Tests\n{\n   private string _conn;\n   private Foo f;\n\n   public Tests(string conn)\n   {\n       _conn = conn;\n   }\n\n    [SetUp]\n    public void SetUp()\n    {\n        db = new Mock&lt;IDbObject&gt;();\n        switch (_conn)\n        {\n            case \"sqlserver\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.SqlServer);\n                break;\n            case \"sqlserverce\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.SqlServerCE);\n                break;\n            case \"mysql\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.MySql);\n                break;\n            case \"postgre\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.PostgreSQL);\n                break;\n            case \"sqlite\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.SQLite);\n                break;\n            case \"oracle\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.Oracle);\n                break;\n        }\n\n        f = new Foo(db.Object);\n    }\n\n   [Test]\n   public void TestOne()\n   {\n       Assert.IsTrue(f.TestOne());\n   }\n\n   [Test]\n   public void TestTwo()\n   {\n       Assert.IsTrue(f.TestTwo());\n   }\n\n   [Test]\n   public void TestThree()\n   {\n       Assert.IsTrue(f.TestThree());\n   }\n}\n</code></pre>\n\n<p>When the _conn is oracle, I want to be run the TestOne method.\nWhen the _conn is sqlserver or sqlserverce, I want to be run the TestThree method.\nWhen the _conn is mysql,sqlite or postgre, I want to be run the TestTwo method.\nHow can I do this ? Is there an attribute of nunit for this ? </p>\n"},{"tags":[".net","unit-testing","moq","mocking","typemock"],"answer_count":17,"favorite_count":23,"up_vote_count":72,"down_vote_count":1,"view_count":14716,"score":71,"question_id":64242,"title":"Rhino Mocks, TypeMock, Moq, or NMock? Which one do you use and why?","body":"<p>Which one do you use (if you use the listed ones) and what do you love and even hate about it?</p>\n"},{"tags":["c#",".net","unit-testing","c#-4.0","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":746,"score":6,"question_id":6669623,"title":"C# Mocking Framework that supports optional parameters and .Net 4.0","body":"<p>Is there a mocking framework that exists for C# that supports .Net 4.0 and C# completely.  Specifically, I'm looking for it to support optional parameters.</p>\n"},{"tags":["c#","sqlite","unit-testing","visual-studio-2012","dispose"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":148,"score":1,"question_id":12919447,"title":"SQLite.Interop.dll locked after running Visual Studio 2012 Unit Test Framework tests","body":"<ul>\n<li>Visual Studio 2012</li>\n<li>SQLite 1.0.82.0 (from nuget)</li>\n</ul>\n\n<p>I am trying to use the \"Run All\" command in the \"Test Explorer\"\nThe following error happens after you run the test once ... after that it will not build anymore, until you restart visual studio</p>\n\n<p>Here is the build error </p>\n\n<blockquote>\n  <p>The Process cannot access the file 'SQLite.Interop.dll' because it is\n  being used by another process</p>\n</blockquote>\n\n<p>here is the code</p>\n\n<pre><code>using System.Data.SQLite;\nusing Microsoft.VisualStudio.TestTools.UnitTesting;\n\nnamespace Test.Sqlite\n{\n    [TestClass]\n    public class Test_Sqlite_Locking\n    {\n        [TestMethod]\n        public void can_create_table()\n        {\n            using(var fact = new SQLiteFactory())            \n            using (var conn = fact.CreateConnection())\n            {\n                conn.ConnectionString = \"Data Source=:memory:;Version=3;New=True;\";\n                conn.Open();\n                //conn.Close();                \n            }\n\n            //SQLiteConnection.ClearAllPools();\n            //GC.Collect();\n        }\n    }\n}\n</code></pre>\n\n<p>I have tried, closing connection, calling ClearAllPools, GC.Collect, and creating the SQLiteConnection directly (instead of the Factory) ... still same issue</p>\n\n<p>This DOES work if you DEBUG ALL TESTS ... but it is when you just Run the tests that this seems to lock it up</p>\n"},{"tags":["unit-testing","functional-programming","functional-testing","solid-principles","srp"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":11852173,"title":"Functional Programming, SRP, testability and classes with static and instance mutable fields","body":"<p>I hope I can phrase this question correctly. I have a concern when dealing with state and test-ability in classes with static and instance mutable fields.</p>\n\n<p>Do the static fields essentially constitute a different class/responsibility/instance due to the difference in their lifetime/scope?</p>\n\n<p>If so: then shouldn't the instance fields also be a separate class/data structure?</p>\n\n<p>And then: and if that is so, then shouldn't all classes be stateless only receiving their dependencies on construction and should all then be immutable?</p>\n\n<p>And finally, would this mean that functional programming is the right way to do object oriented programming as well?</p>\n"},{"tags":["unit-testing","google-app-engine","go"],"answer_count":1,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":285,"score":7,"question_id":7858711,"title":"How to run unit tests for code that uses App Engine services in Go?","body":"<p>I was told the best solution to run unit tests for code that uses App Engine services such as datastore or memcache was to run the development server in a child process, but I'm not sure how. Anybody successfully ran this kind of test and can share a solution?</p>\n\n<p>App Engine SDK for Go uses the Python dev_appserver; <a href=\"http://groups.google.com/group/google-appengine-go/msg/d0cb913f1f03155c\" rel=\"nofollow\">see this thread</a>.</p>\n"},{"tags":["unit-testing","dry","code-duplication"],"answer_count":11,"favorite_count":6,"up_vote_count":26,"down_vote_count":0,"view_count":1233,"score":26,"question_id":129693,"title":"Is duplicated code more tolerable in unit tests?","body":"<p>I ruined several unit tests some time ago when I went through and refactored them to make them more <a href=\"http://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow\">DRY</a>--the intent of each test was no longer clear.  It seems there is a trade-off between tests' readability and maintainability.  If I leave duplicated code in unit tests, they're more readable, but then if I change the <a href=\"http://en.wikipedia.org/wiki/System_Under_Test\" rel=\"nofollow\">SUT</a>, I'll have to track down and change each copy of the duplicated code.</p>\n\n<p>Do you agree that this trade-off exists?  If so, do you prefer your tests to be readable, or maintainable?</p>\n"},{"tags":["visual-studio-2010","unit-testing","visual-studio-2012","shim","microsoft-fakes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":12228118,"title":"How to resolve method name conflict in VS2012 Fakes framework","body":"<p>I am using VS2012 Fakes and MSTEST framework to do unit test. I have a third party dll and I need to fake it. However there is a method (getItemAt(int)) in the dll that seems to conflict with a method that exits in Fakes. </p>\n\n<p>The error message I get during compile is:</p>\n\n<blockquote>\n  <p><strong>Error   2</strong> The type 'MyObject.Fakes.ShimList' already contains a\n  definition for 'get_ItemAtInt32'\n  [D:\\Dev\\Test\\obj\\Debug\\Fakes\\o\\f.csproj]  D:\\Dev\\Teste\\f.cs   6933    111 Test</p>\n</blockquote>\n\n<p>Any solution to pass by this error to continue work with Fakes?</p>\n"},{"tags":["c#","unit-testing","visual-studio-2012","microsoft-fakes"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":157,"score":2,"question_id":12243989,"title":"How do I remove a Fakes assembly from a Visual Studio 2012 project?","body":"<p>I've added a <a href=\"http://www.peterprovost.org/blog/2012/04/15/visual-studio-11-fakes-part-1\" rel=\"nofollow\">Fakes assembly</a> to a Visual Studio 2012 C# unit test project, via the \"Add Fakes Assembly\" reference context menu option. What's the procedure to completely remove the Fakes assembly, i.e. to undo my adding it to the project?</p>\n"},{"tags":["ios","unit-testing","tdd","ios6"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12921007,"title":"Unit testing (Kiwi): Property is always nil in test after loadView and viewDidLoad are called","body":"<p>I am writing a unit test template project for my own reference's sake. This includes template code for all the basic tasks, such as verifying that a UILabel's text property is set as expected after viewDidLoad. </p>\n\n<p>I have a storyboard with a ViewController with one UILabel. In viewDidLoad I set it's text. The test then asserts whether or not the text has been set as expected, but for some reason, the UILabel is always nil. Everything works as expected (thank god) when I run the app; a white view is shown with a label with the expected text.</p>\n\n<p>I am using Kiwi as my test framework and Xcode v4.5.</p>\n\n<p>Here's some code:</p>\n\n<p><strong>ViewController.h:</strong></p>\n\n<pre><code>@property (strong, nonatomic) IBOutlet UILabel *myLabel;\n</code></pre>\n\n<p><strong>ViewController.m:</strong></p>\n\n<pre><code>- (void)viewDidLoad {\n    myLabel.text = @\"test\";\n}\n</code></pre>\n\n<p><strong>ViewControllerTests.m:</strong></p>\n\n<pre><code>ViewController *vc = [[ViewController alloc] init];\n\n// create view in memory by calling view's getter\n[vc view];\n\n// set myLabel.text to \"test\"\n[vc viewDidLoad];\n\n[vc.myLabel shouldNotBeNil];\n[[vc.myLabel.text should] equal:@\"test\"];\n</code></pre>\n\n<p>The above test fails, telling me that myLabel is nil.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/8687378/iphone-testing-testing-iboutlets\">This StackOverflow answer</a> states that calling loadView will create the view hierarchy in memory and thereby prepare any subviews for use. <a href=\"http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html\" rel=\"nofollow\">According to the documentation</a>, simply calling a ViewController view's getter will call loadView for you and create all views. Therefore, I find it extremely odd that myLabel = nil at the time of testing.</p>\n"},{"tags":["unit-testing"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1485,"score":6,"question_id":6197370,"title":"Should unit tests be written for getter and setters?","body":"<p>Are we supposed to write tests for our getters and setters or is it overkill?</p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12921279,"title":"Are unittest attributes mutable in Python?","body":"<p>Suppose I have this integration test</p>\n\n<pre><code>class TestClass(unittest.TestCase):\n    @classmethod\n    def setUpClass(cls):\n        cls.key = '123'\n\n    def test_01_create_acc(self):\n       user = create_account(...)\n       self.key = user.key\n\n    def test_02_check_account(self):\n       user = check_account(..)\n       self.assertEqual(self.key, user.key)\n</code></pre>\n\n<p>It looks like the attribute <code>self.key</code> is not mutable. It stays with the old value from <code>setUpClass</code>. But isn't <code>setUpClass</code> only called once? </p>\n\n<p>The account function creates a key randomly for security reason, so I am not allowed to pass in my secret key. It returns the key, so I need to modify that attribute. Can I?</p>\n\n<p>It looks like each <code>test_</code> case is isolated. </p>\n\n<pre><code>my_gloabl = None\n\ndef setUpClass(cls):\n    cls.key = my_global\n</code></pre>\n\n<p>If I change <code>my_global</code> in test1, test2 will get <code>None</code>.</p>\n"},{"tags":["unit-testing","mocking","nsubstitute","microsoft-fakes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12839158,"title":"Is it OK to use MS Fakes shims with NSubstitute mocks?","body":"<p>We are using <a href=\"http://nsubstitute.github.com/\" rel=\"nofollow\">NSubstitute</a> to mock external objects for our unit tests. However many legacy classes are not called via interfaces and can't be easily replaced with mocks.</p>\n\n<p>I've considered to use <a href=\"http://richonsoftware.cloudapp.net/post/2012/04/05/Using-Stubs-and-Shim-to-Test-with-Microsoft-Fakes-in-Visual-Studio-11.aspx\" rel=\"nofollow\">Microsoft Fakes</a>, but according to <a href=\"http://stackoverflow.com/questions/9677445/mock-framework-vs-ms-fakes-frameworks/9684782#9684782\">the answer</a>  for the question <a href=\"http://stackoverflow.com/questions/9677445/mock-framework-vs-ms-fakes-frameworks/9684782#9684782\">\"Mock framework vs MS Fakes frameworks</a>\"</p>\n\n<blockquote>\n  <p>\" if you're already using a more full-featured mocking framework, you\n  might feel like there are some important pieces missing from Fakes\n  stubs.\"</p>\n</blockquote>\n\n<p>Would it be possible to use MS Fakes shims  with NSubstitute mocks in the same tests? </p>\n\n<p>Should we expect any compatibility problems?</p>\n"},{"tags":["unit-testing","naming-conventions","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12900507,"title":"Visual Studio Test Explorer wildcard or pattern filter","body":"<p>Everybody mentions that you can \"organize\" tests in the new VS2012 with filters, but I've yet to google an actual <em>example</em> of said filtering.</p>\n\n<p><strong>Background</strong></p>\n\n<p>Because of the lack of \"useful\" grouping, you can no longer rely on the actual test structure, <a href=\"http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx\" rel=\"nofollow\">as sometimes recommended</a>.  In VS2012 Test Explorer you have to rely on a naming scheme for your test <em>methods</em> to organize them visually in the Explorer.  Something like:</p>\n\n<p><code>{class}_{method}_{scenario}</code></p>\n\n<p>e.g.</p>\n\n<ul>\n<li><code>StringService_InsertString_NormalUsage</code></li>\n<li><code>StringService_InsertString_AttemptedEmpty</code></li>\n<li><code>StringService_InsertString_TooLong</code></li>\n<li><code>BaseballService_PlayBall</code></li>\n<li><code>BaseballService_PlayBall_TeamUnavailable</code></li>\n<li><code>Integration_BaseballService_PlayBall</code></li>\n<li><code>Integration_BaseballService_PlayBall_TeamUnavailable</code></li>\n<li>etc</li>\n</ul>\n\n<p>My scenario: One file per tested class, one class per tested class, multiple test methods correspond to each tested method.  Integration tests in different file than unit tests, integration test methods prefixed with \"Integration_\".</p>\n\n<p><strong>The Question</strong></p>\n\n<p>Given that you could/would/should end up with multiple tests in multiple files, how do you filter the tests so that only a specific functional subset is run?  How do you filter so a specific subset is <strong>not</strong> run?</p>\n\n<p>I just want to run all my unit tests (across multiple files) but not my integration tests (also across multiple files), which would be simple(r) if I could use wildcards and/or patterns in the existing filters.</p>\n\n<p>Similar to these questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/12507570/how-can-i-filter-unit-test-in-visual-studio-2012-by-category\">how can I filter unit test in visual studio 2012 by category?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/11783969/visual-studio-2012-rc-run-unit-tests-after-build-specify-test-categories-to\">Visual Studio 2012 RC - Run Unit Tests after build - Specify test categories to run</a></li>\n<li><a href=\"http://stackoverflow.com/questions/11057658/visual-studio-2012-test-explorer\">Visual Studio 2012 Test Explorer</a></li>\n</ul>\n"},{"tags":["java","android","unit-testing","testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12917323,"title":"How to simulate client-side delay on Android without hanging the UI?","body":"<p>I have an Androd application that talks to a back-end web service.  As part of the testing, I need to simulate different lengths of client-side delay when a submit button is pressed.</p>\n\n<p>Right now, I am using a Thread.sleep() in my OnClickListener for my submit button, but sleeping the UI thread like this has the unintended consequence of causing the app to appear to \"freeze\" completely - the button stays highlighted until the thread wakes up and my ProgressBar is likewise completely frozen.  Here is my code:</p>\n\n<pre><code>public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_checkout);\n\n    pBar = (ProgressBar) findViewById(R.id.progressBar1);\n    pBar.setVisibility(View.INVISIBLE);\n\n    Button submitButton = (Button) findViewById(R.id.btnSubmit);\n    submitButton.setOnClickListener(new OnClickListener() {\n\n        @Override\n        public void onClick(View v) {\n            pBar.setVisibility(View.VISIBLE);\n            try {\n                Thread.sleep(3000); //eventually this delay will be random\n                                    //right now it obviously hangs the UI\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            performMyAppSpecificWorkHere();\n            pBar.setVisibility(View.INVISIBLE);\n            CheckoutActivity.this.finish();\n        }\n    });  \n}\n</code></pre>\n\n<p>I'm looking for ways I could simulate a delay without hanging the entire UI.  Any ideas are welcome.  Thanks!</p>\n\n<p><strong>edit</strong></p>\n\n<p>Some clarification here!  Part of what I need to do is make simulate a delay and allow the user interface to handle it cleanly (which is what's NOT happening now).</p>\n\n<p>ie...if there is a delay on either the client or the web service, the client should handle it by letting the spinner spin while it waits.  The ability to simulate a back-end delay is already done and that works the way I want it to, but I want to simulate a delay on the client without hanging the UI thread.</p>\n"},{"tags":["c#",".net","unit-testing","selenium","webdriver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12912011,"title":"Selenium RemoteWebDriver memory issues","body":"<p>I'm running a Selenium Standalone Server, version 2.25.0</p>\n\n<p>I run a program in c# executing the driver by:</p>\n\n<pre><code>DesiredCapabilities capabilities = DesiredCapabilities.HtmlUnit();\ncapabilities.IsJavaScriptEnabled = false;\nIWebDriver driver = new RemoteWebDriver(new Uri(\"http://127.0.0.1:4444/wd/hub\"), capabilities);\n</code></pre>\n\n<p>Then I collect some information via <code>driver.FindElement(By.)</code>.</p>\n\n<p>everything works fine.</p>\n\n<p>After i executed all</p>\n\n<p>I quit the driver by:</p>\n\n<pre><code>driver.Quit();\n</code></pre>\n\n<p>The test works fine. But when I take a look into the task-manager while executing I can see \"java.exe\" (the selenium server) grabbing memory and afterwards not releasing it.</p>\n\n<p>How can i solve this problem? Any Ideas?</p>\n"},{"tags":["javascript","unit-testing","coffeescript"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":96,"score":3,"question_id":12904317,"title":"How to start testing javascript code","body":"<p>What parts of code should I be testing? How do I test DOM-specific things?</p>\n\n<p>What framework would you recommend?</p>\n\n<p>As I understand it, I should be using <a href=\"https://github.com/ariya/phantomjs\" rel=\"nofollow\" title=\"phantomjs\">phantomjs</a> with a testing framework.</p>\n\n<p>I know the question's rather vague, but I'd really appreciate some info from js-testing developers.</p>\n\n<p>I am writing Coffeescript @ Ubuntu</p>\n"},{"tags":["javascript","jquery","unit-testing","qunit","sinon"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12902652,"title":"Sinon.js stub and test external function call with object as parameter later modified by ref","body":"<p>I'm looking to test the call my function makes to another function, particularly an argument that is an object.  </p>\n\n<p>The issue is that sinon.js seems to store a reference to the object parameter given in its arguments array, which is naturally expected.  However, this creates a problem when the parameter is later modified by ref, which changes the <em>apparent</em> value of those parameters at the time the function was called.</p>\n\n<p>What's the best way to unit test a situation like this?</p>\n\n<p>Here is a contrived example:</p>\n\n<h2><a href=\"http://jsfiddle.net/xtfQu/\" rel=\"nofollow\">http://jsfiddle.net/xtfQu/</a></h2>\n\n<pre><code>var view = Backbone.View.extend({\n    initialize: function () {\n        _.bindAll(this);    \n    },\n\n    dostuff: function () {\n        var coords = { x: 0, y: 0 };\n        for (var i = 0; i &lt; 10; i++) {\n            this.otherstuff(coords);\n\n            coords.x += 10;\n        }\n    },\n\n    otherstuff: function (coord) {\n        // Stubbed\n    }\n});\n\ntest(\"a test\", function() {\n    // Arrange\n    var blah = new view();\n\n    sinon.stub(blah, 'otherstuff');\n\n    // Act\n    blah.dostuff();\n\n    // Assert\n    var expectedFirstCallCoords = { x: 0, y: 0 };\n\n    // All assertions on the value of x for a particular call would seem to be impossible.\n    // blah.otherstuff.firstCall.args[0].x --&gt; 100\n    deepEqual(blah.otherstuff.firstCall.args[0], expectedFirstCallCoords, 'parameter changed by ref, untestable?');\n});​\n</code></pre>\n\n<p>I can think of various hacks around this 'issue'.  Is there a cleaner approach that doesn't involve cloning the object or modifying my production code simply for the sake of getting sinon to work?</p>\n"},{"tags":["django","unit-testing","django-views","django-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":162,"score":2,"question_id":3669345,"title":"Django Testing: determine which view was executed","body":"<p>In the Django <a href=\"http://docs.djangoproject.com/en/dev/topics/testing/#module-django.test.client\" rel=\"nofollow\">testing documentation</a> they promise that you can \"Test that the correct view is executed for a given URL.\"</p>\n\n<p>However I didn't find any possibility how to test which view was executed. I would expect that in the <a href=\"http://docs.djangoproject.com/en/dev/topics/testing/#django.test.client.Response\" rel=\"nofollow\"><code>Response</code> class</a> but there's nothing about the executed view. </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing","abap"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":127,"score":3,"question_id":12753341,"title":"Can ABAP UNIT tests be used in classic ABAP programs?","body":"<p>I would like to implement Abap Unit tests into my ABAP programs.  My first report is a classic form ABAP--no OO classes, etc. </p>\n\n<p>Is this even possible?  Is ABAP UNIT meant explicitly test OO classes? </p>\n\n<p>Or, can it also test typical forms?  So, if I had a form called \n\"PERFORM get_date_range using sy-date changing lv_fromdate lv_todate.\"  Can I write a ABAP Unit test for that?  Or must it be a method in a class?</p>\n\n<p>Btw.. I'm a long time Java developer learning ABAP, and wanting to use ABAP UNIT.</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","asp.net-mvc-4","asp.net-web-api"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":632,"score":2,"question_id":9789944,"title":"How can I test a custom DelegatingHandler in the ASP.NET MVC 4 Web API?","body":"<p>I've seen this question come up in a few places, and not seen any great answers. As I've had to do this myself a few times, I thought I'd post my solution. If you have anything better, please post.</p>\n\n<p>N.B. This is using ASP.NET MVC 4 Beta 2 version of Web API - future versions may change!</p>\n\n<p>Update: This still works in ASP.NET MVC 4 RC</p>\n"},{"tags":["c#","unit-testing","dependency-injection","ninject"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":119,"score":1,"question_id":12896480,"title":"unit testing & constructor dependency injection","body":"<p>I have an issue regarding how one would go about designing an application suited for unit-testing.</p>\n\n<p>I am trying to implement the SRP (Single-Responsibility Principle), and from what I understood this involves splitting out most functionality in seperate, dedicated classes to keep code more organised.  For example, I have this specific scenario.</p>\n\n<p>A class <code>RecurringProfile</code>, which has a method <code>.ActivateProfile()</code>.  What this method does is mark the status as activated, and create the next (first) recurring payment for the next due date.  I was going to split out the functionality to create the next recurring payment in a seperate class, for example <code>RecurringProfileNextPaymentCreator</code>.    My instant idea is to have this class take the <code>'RecurringProfile'</code> as a parameter in it's constructor:</p>\n\n<pre><code>RecurringProfileNextPaymentCreator(IRecurringProfile profile)\n</code></pre>\n\n<p>However, I think this would be problematic for unit-testing.   I would like to create a unit-test which tests out the <code>ActivateProfile</code> functionality.  This method would get an instance of an <code>IRecurringProfileNextPaymentCreator</code> via dependency injection (Ninject), and call the method <code>.CreateNextPayment</code>.</p>\n\n<p>My idea to create a unit-test was to create a mock of an <code>IRecurringProfileNextPaymentCreator</code>, and substitue that so that I can verify that the <code>.ActivateProfile()</code> actually called the method.  However, due to the constructor parameter, this would not fit as a default constructor for NInject.  Having to create a custom NInject provider just for such a case (where I can have many such classes all over the solution) would be a bit overkill.</p>\n\n<p>Any ideas / best practices how one would go about this?</p>\n\n<p>--\nBelow is a sample code regarding the above example: (Please note that the code is hand-written, and is not syntactically 100% correct)</p>\n\n<pre><code>public class RecurringProfile\n{\n    public void ActivateProfile()\n    {\n        this.Status = Enums.ProfileStatus.Activated;\n        //now it should create the first recurring payment\n        IRecurringProfileNextPaymentCreator creator = NInject.Get&lt;IRecurringProfileNextPaymentCreator&gt;();\n        creator.CreateNextPayment(this); //this is what I'm having an issue about \n    }\n}\n</code></pre>\n\n<p>And a sample unit-test:</p>\n\n<pre><code>public void TestActivateProfile()\n{   \n    var mockPaymentCreator = new Mock&lt;IRecurringProfileNextPaymentCreator&gt;();\n    NInject.Bind&lt;IRecurringProfileNextPaymentCreator&gt;(mockPaymentCreator.Object);\n\n    RecurringProfile profile = new RecurringProfile();\n    profile.ActivateProfile();\n    Assert.That(profile.Status == Enums.ProfileStatus.Activated);\n    mockPayment.Verify(x =&gt; x.CreateNextPayment(), Times.Once());\n\n}\n</code></pre>\n\n<p>Going up to the sample code, my issue is whether it is a good practice to pass over the RecurringProfile as a parameter to the <code>creator.CreateNextPayment()</code> method, or whether it makes more sense to somehow pass the <code>RecurringProfile</code> to the DI-framework, when getting an instance of an <code>IRecurringProfileNextPaymentCreator</code>, considering that the <code>IRecurringProfileNextPaymentCreator</code> will always act on an <code>IRecurringProfile</code> to create the next payment. Hope this makes the question a bit more clear.</p>\n"},{"tags":["java","hibernate","unit-testing","tdd"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":108,"score":3,"question_id":12899103,"title":"How to test the hibernate generic dao pattern","body":"<p>I'm starting a project using Google Guice and Hibernate and, in the way to configure the database access layer, I got troubled with several doubts along this process.</p>\n\n<p>I'm using JPA annotations in my POJOs and my Generic DAO implementation uses an EntityManager object to communicate with the database. I did several \"manual\" tests and I saw it was working fine but I prefer to follow a TDD methodology to enforce my knowledge in this kind of methodologies. I'm not sure what is the best way to test generics in java and even less the best solution for testing the Hibernate Generic DAO pattern.</p>\n\n<p>I have read several solutions but I don't feel really comfortable with none of them:</p>\n\n<ul>\n<li>One of them is to make an abstract class to test the Generic DAO and use abstract methods to get the specific DAO and to get the instances to persist, etc.</li>\n<li>Another solution consist on use an abstract class (like the previous solution) and use factories instead of abstract methods: With these two solutions I don't know if it's worth to have a method to get an entity to test every each case in my project.</li>\n<li>Another one solution could be to test every functionality in the specific DAO better than in the generic dao: I think this is the worst solution because, in the most of cases, I will have to repeat a lot of code to test the same thing.</li>\n</ul>\n\n<p>Apart from that, I have read that it could be better to remove the DAO layer and use the entity manager directly from services: I don't think this is the best way because you are mixing the database layer with the service layer.</p>\n\n<p>Anyone who could help me please?!</p>\n"},{"tags":["java","unit-testing","mocking","mockito","superclass"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12826871,"title":"Does any mocking framework allow spying on a super classes method?","body":"<p>We are using spring oauth and there are several places where we need to use inheritance.</p>\n\n<p>In the immediate case we are extending TokenEndpoint</p>\n\n<pre><code>public class MyTokenEndpoint extends TokenEndpoint {\n    //...\n    public ResponseEntity&lt;OAuth2AccessToken&gt; getAccessToken(\n            Principal principal,\n            MyParams myParams,\n            @RequestParam Map&lt;String, String&gt; allParams) {\n\n        // .. Stuff Happens\n\n        updateParamsWithStuff(allParams);\n\n        return super.getAccessToken(\n        principal, myParams.grantType(), allParams);\n    }\n    //...\n}\n</code></pre>\n\n<p>Now what I want to test is if the map passed to super.getAcccessToken has been filled with Stuff.  My simple way was to spy on the map passed in, but this relies on implemetation details and does not actually insure that stuff is in the map passed super.getAccessToken</p>\n\n<p>We are using Mockito, I have seen comments that this will not work, and one that implies it may.  Can this be done in any of the mocking frameworks?</p>\n\n<p>See both answers on ( <a href=\"http://stackoverflow.com/questions/9957102/can-i-mock-a-superclasss-constructor-with-mockito-powermock\">Can I mock a superclass&#39;s constructor with Mockito/Powermock?</a>, the checked one says impossible, but given the discussion on the second answer I just had to try.)</p>\n\n<p>After reading that I tried the following:</p>\n\n<pre><code>MyTokenEndpoint spyEndpoint = Mockito.spy(endpoint); //endpoint Set-up previously\n\nMockito.doAnswer(new Answer&lt;ResponseEntity&lt;OAuth2AccessToken&gt;&gt;() {\n    @Override\n    public ResponseEntity&lt;OAuth2AccessToken&gt; \n           answer(InvocationOnMock invocation) {\n       Object[] args = invocation.getArguments();\n       Map&lt;String, String&gt; params = (Map&lt;String, String&gt;) args[2];\n       System.out.printf(\"%s\\n\", params.toString());\n       return new ResponseEntity&lt;OAuth2AccessToken&gt;(HttpStatus.ACCEPTED);\n    }\n}).when(((TokenEndpoint) spyEndpoint))\n.getAccessToken(any(Principal.class), \n                anyString(), (Map&lt;String, String&gt;) anyMap());\n\ntheResponse = spyEndpoint\n                .getAccessToken(principal, \n                                myPrams,\n                                currentMap);\n</code></pre>\n\n<p>But the code in answer never gets called.</p>\n\n<p>Am I barking up the wrong tree??  Is this possible in any mocking framework?</p>\n"},{"tags":["c#","unit-testing","tdd","vs-unit-testing-framework"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12880460,"title":"Best Practice for Unit Testing valid characters","body":"<p>Given that a method accepts a string as input parameter and given that this string must only contain numbers from 1 to 8 and a dash (\"/\").</p>\n\n<p>When developing test driven, how would you write a unit test to validate that the method does a proper argument check?</p>\n\n<p>My first thought was reversing the requirement and testing for an ArgumentException, i.e. having a data driven unit test that calls the method with every other possible character and expects an ArgumentException. However,... that feels a little like cracking nuts with a sledgehammer... </p>\n\n<p>Are there any best practices for situations like that?</p>\n"},{"tags":[".net","visual-studio-2010","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12899202,"title":"Why does NUnit expect an older version of the framework?","body":"<p>This is the first time I'm attempting to use NUnit.  I've installed NUnit into my Visual Studio project, using NuGet.  As you can see in the image below, it references nunit.framework, version 2.6.1.12217...</p>\n\n<p><img src=\"http://i.stack.imgur.com/E2U7q.jpg\" alt=\"Visual Studio project\"></p>\n\n<p>... then I installed the latest Windows app (NUnit-2.6.1.msi)....</p>\n\n<p><img src=\"http://i.stack.imgur.com/aRwqn.jpg\" alt=\"Windows App\"></p>\n\n<p>... and tried to load my test assembly... </p>\n\n<p><img src=\"http://i.stack.imgur.com/Pobrb.jpg\" alt=\"Load fail\"></p>\n\n<p>... but for some reason, it's expecting version 2.5.10.11092 of nunit.framework.</p>\n\n<p>Any idea if I'm doing something wrong?</p>\n"},{"tags":["java","unit-testing","java-ee","mocking","ejb"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12891869,"title":"EJB 3.1 Unit Test, two Beans, one @DependsOn the other, exchange through mock","body":"<p>I currently working on my first EJB project with Glassfish 3.1.2.2. I have two beans:</p>\n\n<pre><code>@Singleton\n@Startup\npublic class ABean implements AInterface {\n//implementation\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@DependsOn(\"ABean\")\n@Startup\n@Singleton\n@EJB(name = \"ABean\", beaninterface = AInterface)\npublic class BBean implements BInterface {\n//implementation\n}\n</code></pre>\n\n<p>I want to unit test the \"BBean\" and mock the \"ABean\". Currently, when I'm starting the JUnitTest the \"ABean\" will be started but <strong>is there a way to exchange the \"ABean\" with a \"ABeanMock\"?</strong> </p>\n\n<p>I need a automatic mechanism to exchange the implementation with the mock as these tests will be run on a jenkins server. So a manual adoption of the code is ok for single manual test but cannot be made for automatic testing.</p>\n\n<p>I'm using the Glassfish Embedded API for unit tests.</p>\n\n<p>Thanks for help.</p>\n"},{"tags":["php","unit-testing","dependency-injection"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12906910,"title":"Is this the right way to write code aimed for better unit test?","body":"<p>I'm trying to find out the best way to write my code for better unit testing and such. Currently I have 2 main concerns:</p>\n\n<ol>\n<li>I use the service container to get the service I need within a class method, I'm concerned that this may not be the best way to do it as I rely on those services to be ready first</li>\n<li>I also use a main \"settings\" class which I can access many settings across modules/plugins. I'm also concerned that this creates an unnecessary dependency on this settings</li>\n</ol>\n\n<p>Some sample code to clarify my issues:</p>\n\n<pre><code>class ABC\n{\n    function someFunction(){\n        if(Container::get('settings')-&gt;get('status'))\n        {\n            Container::get('mailer')-&gt;send();\n        }\n    }\n}\n</code></pre>\n\n<p>Perhaps all I should do is to inject these via the constructor method first?</p>\n"},{"tags":["ruby-on-rails","unit-testing","rspec","controller"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":212,"score":0,"question_id":7859032,"title":"RSpec controller test fails for simple route","body":"<p>This is probably a very basic error, but I am still learing. =)</p>\n\n<p>My routes.rb consists only of</p>\n\n<pre><code>WebPortal::Application.routes.draw do\n  resources :categories\nend\n</code></pre>\n\n<p>If I understand this correctly, this should (among others) map <code>/categories</code> to <code>CategoriesController.index</code>. This controller looks like</p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n  def index\n  end\nend\n</code></pre>\n\n<p>The corresponding view file exists, and rails server serves this page fine. But my RSpec test</p>\n\n<pre><code>describe CategoriesController do\n  describe \"GET :index\" do\n    it \"should be succesful\" do\n      get :index\n      response.should be_succes\n    end\n  end\nend\n</code></pre>\n\n<p>fails with the message </p>\n\n<pre><code>Failure/Error: get :index\n    ActionController::RoutingError:\n    No route matches {:controller=&gt;\"categories\"}\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n\n<p><strong>Edit:</strong> </p>\n\n<p>The command <code>rake routes</code> gives</p>\n\n<pre><code> rake routes\n   categories GET    /categories(.:format)          {:action=&gt;\"index\", :controller=&gt;\"categories\"}\n              POST   /categories(.:format)          {:action=&gt;\"create\", :controller=&gt;\"categories\"}\n new_category GET    /categories/new(.:format)      {:action=&gt;\"new\", :controller=&gt;\"categories\"}\nedit_category GET    /categories/:id/edit(.:format) {:action=&gt;\"edit\", :controller=&gt;\"categories\"}\n     category GET    /categories/:id(.:format)      {:action=&gt;\"show\", :controller=&gt;\"categories\"}\n              PUT    /categories/:id(.:format)      {:action=&gt;\"update\", :controller=&gt;\"categories\"}\n              DELETE /categories/:id(.:format)      {:action=&gt;\"destroy\", controller=&gt;\"categories\"}\n</code></pre>\n"},{"tags":["python","unit-testing","wsgiref"],"answer_count":5,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1040,"score":2,"question_id":634485,"title":"using wsgiref.simple_server in unittests","body":"<p>I have some functions like this one:</p>\n\n<pre>\n<code>\nURL = 'http://localhost:8080'\ndef func():\n    response = urlopen(URL)\n    return process(response)\n</code>\n</pre>\n\n<p>And i want to test it with unittest.</p>\n\n<p>I did something like this:</p>\n\n<pre><code>\nfrom wsgiref.simple_server import make_server\ndef app_200_hello(environ,start_response):\n    stdout = StringIO('Hello world')\n    start_response(\"200 OK\", [('Content-Type','text/plain')])\n    return [stdout.getvalue()]\n\ns = make_server('localhost', 8080, app_200_hello)\n\nclass TestFunc(unittest.TestCase):\n    def setUp(self):\n        s.handle_request()\n\n    def test1(self):\n        r = func()\n        assert r, something\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>At setUp() my tests stop because s.handle_request() waits for request. How i can get around that? Run s.handle_request() in another thread? or maybe there is another \nsolution?</p>\n\n<p>EDIT:\nI want to test \"func\" function, not \"app_200_hello\"</p>\n"},{"tags":["c#","visual-studio","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1326,"score":4,"question_id":3777970,"title":"Visual Studio Unit Test: why test run inconclusive whereas testing same float values?","body":"<p>I'm learning VS Unit test and tried this:</p>\n\n<pre><code>    [TestMethod()]\n    public void calcTest()\n    {\n        double expected = 1.234F; // TODO: Initialize to an appropriate value\n        double actual;\n        actual = 1.234F;\n        Assert.AreEqual(expected, actual);\n        Assert.Inconclusive(\"Verify the correctness of this test method.\");\n    }\n</code></pre>\n\n<p>When running this test method, it says inconclusive ??? Why ?</p>\n\n<p>Update: Hi Guys ok to tell don't compare floats but Business Requirements are what they are so what should I do if I need to compare them ?</p>\n\n<p>Do you mean it's impossible to test floating calculation without headache ? Then if testing is such a headache in financial calculation isn't it better to not do testing at all ?</p>\n\n<p>Seems like a huge bug or design flaw in vs test framework rather :) as it is said here\n<a href=\"http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assert.inconclusive%28VS.80%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assert.inconclusive%28VS.80%29.aspx</a></p>\n\n<p>Indicates that an assertion cannot be proven true or false.</p>\n\n<p>Since I compare 2 same litterals sure it is true !</p>\n"},{"tags":["java","unit-testing","testing","tdd"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12900613,"title":"testing a huge decomposed method and its inner helper methods","body":"<p>I've been writing a lot of unit tests recently. There's a scenario to which I cannot find a clean solution...</p>\n\n<p>Let's say you have a beast of a method:</p>\n\n<pre><code>public void bigMethod() {\n    // a lot of code goes in here\n}\n</code></pre>\n\n<p>To make your life easier and your code cleaner you'd usually decompose such a beast into smaller inner methods:</p>\n\n<pre><code>public void bigMethod() {\n    a();\n    b();\n    c();\n    // etc.\n}\n</code></pre>\n\n<p>You can test all of the inner methods (a(), b(), c() etc.) independently. The problem is the bigMethod() which should also be tested but the only thing it's doing is chaining calls of some other methods and those have been thoroughly tested already!</p>\n\n<p>How do you approach such a scenario? You cannot just leave bigMethod() untested because you need to be sure that a(), b() and c() are called in there IN PROPER ORDER. But writing a test for bigMethod() will lead to a lot of DUPLICATION IN TESTS. And reducing this duplication there every time is a lot of hassle since you'll be doing that OFTEN.</p>\n\n<p>One idea that comes to my mind is:</p>\n\n<pre><code>public void bigMethod() {\n    helperA.a();\n    helperB.b();\n    helperC.c();\n    // etc.\n}\n</code></pre>\n\n<p>In this scenario you test every helper class and then make sure bigMethod() calls them inOrder. Nice and clean but introduces a lot of very small classes into the project.</p>\n\n<p>Help test ninjas!</p>\n"},{"tags":["eclipse","unit-testing","swt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12910528,"title":"Mocking eclipse SWT/JFACE dialogs and widgets","body":"<p>Is there a way how to unit test eclipse dialogs and SWT/Jface widgets? Or even better - is there some jar/framework which can help me mock Shell or Composite (in that way so I wouldn't have to mock too many their methods) ?</p>\n"},{"tags":["php","unit-testing","testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":12909550,"title":"How would you write a test for such class?","body":"<pre><code>class Documentation\n{\n    private $_text;\n\n    public function __construct($text)\n    {\n        $this-&gt;_text = $text;\n    }\n\n    public function generate()\n    {\n        return new \\DOMElement('documentation', $this-&gt;_text);\n    }\n}\n</code></pre>\n\n<p>The obvious solution I can think of is to create new <code>DOMDocument</code>, append the result of <code>generate()</code> function call and to compare with expected element using <code>$this-&gt;assertEqualXMLStructure</code>, but for some reason I don't like it and am sure there are alternatives.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>UPD</strong>: seems like I've missed something important: what I want to make sure of is that the element of a particular type with a particular content is returned. How to do that?</p>\n\n<p><strong>UPD 2</strong>:</p>\n\n<p>this is what I currently could create, but it's ugly, isn't it?</p>\n\n<pre><code>public function testGenerate()\n{\n    $expected = new \\DOMDocument();\n    $expected-&gt;loadXML('&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;documentation&gt;foo&lt;/documentation&gt;');\n\n    $documentation = new Documentation('foo');\n    $actual = new \\DOMDocument('1.0', 'utf-8');\n    $actual-&gt;appendChild($documentation-&gt;generate());\n\n    $this-&gt;assertEqualXMLStructure($expected, $actual);\n}\n</code></pre>\n"},{"tags":["unit-testing","testing","tdd","private-methods"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12887692,"title":"Unit testing private methods seems to make the whole solution easier","body":"<p>Let's suppose there is an utility class (no data) with one complex (as in, hard-to-test) public method. It uses random number generation, return large arrays of data and that fun stuff. However, if you implement it in small private methods, every private method would be easy to test, and thus the whole thing would be easier to test. From the application point of view, only the big method needs to be public, and the other should be private. Yet, testing the private methods results in an easier to test class. How should I approach this problem?</p>\n"}]}
{"total":15322,"page":7,"pagesize":100,"questions":[{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":152,"score":2,"question_id":12888562,"title":"How to run the same unittest suite with several backends","body":"<p>I have a JSON parser library (<a href=\"https://github.com/isagalaev/ijson\" rel=\"nofollow\">ijson</a>) with a test suite using unittest. The library actually has several parsing implementations — \"backends\" — in the form of a modules with the identical API. I want to automatically run the test suite several times for each available backend. My goals are:</p>\n\n<ul>\n<li>I want to keep all tests in one place as they are backend agnostic.</li>\n<li>I want the name of the currently used backend to be visible in some fashion when a test fails.</li>\n<li>I want to be able to run a single TestCase or a single test, as unittest normally allows.</li>\n</ul>\n\n<p>So what's the best way to organize the test suite for this? Write a custom test runner? Let TestCases load backends themselves? Imperatively generate separate TestCase classes for each backend?</p>\n\n<p>By the way, I'm not married to unittest library in particular and I'm open to try another one if it solves the problem. But unittest is preferable since I already have the test code in place.</p>\n"},{"tags":["unit-testing","design-patterns","java-ee-5"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12892524,"title":"How can I refactor and unit test complex legacy Java EE5 EJB methods?","body":"<p>My colleagues and I are currently introducing unit tests to our legacy Java EE5 codebase. We use mostly JUnit and Mockito. In the process of writing tests, we have noticed that several methods in our EJBs were hard to test because they did a lot of things at once.</p>\n\n<p>I'm fairly new to the whole testing business, and so I'm looking for insight in how to better structure the code or the tests. My goal is to write good tests without a headache.</p>\n\n<p>This is an example of one of our methods and its logical steps in a service that manages a message queue:</p>\n\n<ul>\n<li><p>consumeMessages</p>\n\n<ul>\n<li><p>acknowledgePreviouslyDownloadedMessages</p></li>\n<li><p>getNewUnreadMessages</p></li>\n<li><p>addExtraMessages (depending on somewhat complex conditions)</p></li>\n<li><p>markMessagesAsDownloaded</p></li>\n<li><p>serializeMessageObjects</p></li>\n</ul></li>\n</ul>\n\n<p>The top-level method is currently exposed in the interface, while all sub-methods are private. As far as I understand it, it would be bad practice to just start testing private methods, as only the public interface should matter.</p>\n\n<p>My first reaction was to just make all the sub-methods public and test them in isolation, then in the top-level method just make sure that it calls the sub-methods. But then a colleague mentioned that it might not be a good idea to expose all those low-level methods at the same level as the other one, as it might cause confusion and other developers might start using when they should be using the top-level one. I can't fault his argument.</p>\n\n<p>So here I am.</p>\n\n<p>How do you reconcile exposing easily testable low-level methods versus avoiding to clutter the interfaces? In our case, the EJB interfaces.</p>\n\n<p>I've read in other unit test questions that one should use dependency injection or follow the single responsibility principle, but I'm having trouble applying it in practice. Would anyone have pointers on how to apply that kind of pattern to the example method above?</p>\n\n<p>Would you recommend other general OO patterns or Java EE patterns?</p>\n"},{"tags":["c#","unit-testing","windows-8","async-await"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":130,"score":3,"question_id":12837128,"title":"Unit testing async method for specific exception","body":"<p>Does anyone have an example of how to unit test an async method in a Windows 8 Metro application, to ensure that it throws the required exception?</p>\n\n<p>Given a class with an async method</p>\n\n<pre><code>public static class AsyncMathsStatic\n{\n    private const int DELAY = 500;\n\n    public static async Task&lt;int&gt; Divide(int A, int B)\n    {\n        await Task.Delay(DELAY);\n        if (B == 0)\n            throw new DivideByZeroException();\n        else\n            return A / B;\n    }\n}\n</code></pre>\n\n<p>I want to write a test method using the new Async.ExpectsException construction. I've tried :-</p>\n\n<pre><code>[TestMethod]\npublic void DivideTest1()\n{\n    Assert.ThrowsException&lt;DivideByZeroException&gt;(async () =&gt; { int Result = await AsyncMathsStatic.Divide(4, 0); });\n}\n</code></pre>\n\n<p>but of course the test doesn't wait for the async method to complete, and so results in a failed test that the exception hasn't been thrown.</p>\n"},{"tags":["c#","visual-studio","unit-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":108,"score":2,"question_id":10011606,"title":"Different Test Settings per project in same solution Visual Studio","body":"<p><strong><b>Tools:</b></strong></p>\n\n<p>1.Visual Studio 2010</p>\n\n<p>2.Visual Studio Unit tests.</p>\n\n<p><strong><B>Story:</B></strong></p>\n\n<p>We develop a solution that has <b>several projects</b>, \nfor each project there is a test project. \nEach test project has its <b>deployment items</b> that it needs. That's why every test project has its <b>own test settings</b>. </p>\n\n<p><strong>Question:</strong></p>\n\n<p>I would like to be able to run all the test projects at once to get statistics for all the solution (code coverage, etc..). </p>\n\n<p>Is there any way to do this without merging all test settings into one (this solution maybe problematic)?</p>\n\n<p><strong>EDITED</strong></p>\n\n<p>Any other solution to test all the solution will be highly appreciated.</p>\n"},{"tags":["unit-testing","visual-studio-2008","continuous-integration","tfs2008","team-build"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":84,"score":2,"question_id":10142647,"title":"How can I get unit tests to run as part of a TFS2008 build?","body":"<p>I'm trying to get my continuous integration setup to run my unit tests for me, so I've set </p>\n\n<pre><code>&lt;RunTest&gt;true&lt;/RunTest&gt;\n</code></pre>\n\n<p>And I've setup the tests to auto-discover:</p>\n\n<pre><code>&lt;ItemGroup&gt;\n  &lt;TestContainer Include=\"$(OutDir)%2a.Test.dll\" /&gt;\n&lt;/ItemGroup&gt;\n</code></pre>\n\n<p>Running the build on my development machine runs my unit tests, and reports that the Build succeeded; When run as an automated build, the tests run (according to the BuildLog), but I'm seeing this in the log:</p>\n\n<blockquote>\n  <p>Publishing results of test run tfs_service@TFS-BUILD 2012-04-13 14:13:59_Any CPU_Release to <a href=\"http://mycompany-tfs:8080/Build/v1.0/PublishTestResultsBuildService2.asmx\" rel=\"nofollow\">http://mycompany-tfs:8080/Build/v1.0/PublishTestResultsBuildService2.asmx</a>...</p>\n  \n  <p>.The drop share directory \"\\tfs-build\\Builds\\Test\\MyProduct Test_20120413.2\" could not be accessed.</p>\n  \n  <p>The drop share directory \"\\tfs-build\\Builds\\Test\\MyProduct Test_20120413.2\" could not be accessed.</p>\n  \n  <p>MSBUILD : warning MSB6006: \"MSTest.exe\" exited with code 1.</p>\n  \n  <p>The previous error was converted to a warning because the task was called with ContinueOnError=true.</p>\n</blockquote>\n\n<p>This is odd, as the binaries publish quite merrily.</p>\n\n<p>I tried to diagnose the issue, by logging on to the console of the build server, running up a Visual Studio 2008 Command Prompt, navigating to the source location, and invoking MSBuild, it doesn't appear to even attempt to invoke the unit tests?</p>\n\n<p>Ultimately, I'm more interested in playing \"guess why the drop of the results failed\" - could it be the embedded space in my build definition name? What else could I check, given the binaries publish OK?</p>\n"},{"tags":["c#","web-services","unit-testing","soap","automated-tests"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12899531,"title":"Exporting the C# Unitest Results to a Textfile","body":"<p>I am Fresher in c# testing.. I am writing unit tests for web services testing. I have added a service reference to the C# unit tests solution and started consuming the classes in the web services for the testing. I have also added an Excel file to provide unit test values. </p>\n\n<p>Below is a example about what I was doing before  </p>\n\n<pre><code>[DataSource(\"System.Data.Odbc\"\n ,\"Dsn=Excel Files;dbq=|DataDirectory|\\\\TestData.xlsx;defaultdir=C:\\\\TestData;driverid=1046;maxbuffersize=2048;pagetimeout=5\"\n ,\"Sheet1$\"\n ,DataAccessMethod.Sequential)\n ,DeploymentItem(\"TestProject1\\\\TestData.xlsx\")\n ,Owner(\"\")\n ,Description(\"\")\n ,TestMethod()]\npublic void test1()\n{\n    try\n    {\n        var Service = new Service.ServiceClient();\n        var Cid = testContextInstance.DataRow[\"CId\"].ToString();\n        var MNumber = testContextInstance.DataRow[\"MNumber\"].ToString();\n        var VID = testContextInstance.DataRow[\"VID\"].ToString();\n        var isVisit = new Service.ISVisit()\n        {\n            CID = Cid,\n            MNum = MNumber,\n            VCode = VID\n        };\n\n    var first = Service.Medis(isVisit).Cast&lt;Service.ISMedi&gt;().FirstOrDefault();\n    // Assert\n    Assert.AreEqual(\"12345678\", first.Proc.ProcID);\n    }\n    catch (Exception ex1)\n    {\n        if (ex1.InnerException != null)\n            Debug.WriteLine(ex1.InnerException.Message);\n        Assert.Fail(ex1.Message);\n    }\n}\n</code></pre>\n\n<p>.Medis()<code>,</code>IsVisit` are classes in the services.i am using excel sheet to provide values for the untitest.</p>\n\n<p><img src=\"http://i.stack.imgur.com/9MPVE.png\" alt=\"enter image description here\"></p>\n\n<p>And the unit is passed</p>\n\n<p><img src=\"http://i.stack.imgur.com/fiWKJ.png\" alt=\"enter image description here\"></p>\n\n<p>Now the requirement is to Export this test results to a Txt file or CSV or Excel file in this order </p>\n\n<p>Test 1 : Test result + Duration + Output Soap Message.</p>\n\n<p>Test 2 : Test result + Duration + Output Soap Message. </p>\n\n<p>Test 3 : Test result + Duration + Output Soap Message.  </p>\n\n<p>Please help me with this. I am using Visual Studio team system to write the unittests .</p>\n"},{"tags":["c#","unit-testing","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":1,"view_count":4174,"score":4,"question_id":3702461,"title":"C# - Unit test, Mock?","body":"<p>The builtin unit test generator(VS) for the target classes should that be used or should I learn myself how to write a unit test? And whats this \"Mock\" thing? I hear it over and over but none cares to give a good explanation.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing","testing","exception-handling","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12904224,"title":"JUnit test passes whether I throw exception or not","body":"<p>I am just starting to learn JUnit.  I tried looking elsewhere for this answer but I couldn't find it.  Suppose I write a JUnit test method that expects an exception, something like this:  (math being an instance of the class I wrote)</p>\n\n<pre><code> @Test(expected = NumberFormatException.class)\n    public void testAdd_String() {\n        System.out.println(\"testing add number to string\");\n        double result = math.add(\"lakd\", \"2\");\n    }\n</code></pre>\n\n<p>Now for the method I would like to test: </p>\n\n<pre><code>public double add(String operand1, String operand2) {\n    int num1 = Integer.parseInt(operand1);\n    int num2 = Integer.parseInt(operand2);\n    return num1 + num2;\n}\n</code></pre>\n\n<p>My test passes both when I have <code>throws NumberFormatException</code> on the method header and when it is not there.  Is this the expected behavior or JUnit?  Is there a way through a JUnit test to ensure that the throws clause is present in my method?</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","rspec","capybara"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12905609,"title":"Determining Form Submission with RSpec/Capybara","body":"<p>I have a project in which I am using RSpec and Capybara to do unit testing. I have fully flushed out model and controller tests which are passing nicely and handle the heavy lifting for pre-database validation.</p>\n\n<p>I am now testing user experience and front end items and want to know how i could verify that a form did NOT submit. If a user mismatches passwords or some other erred data, I have script to set the error and prevent submission. </p>\n\n<p>I know i could search for error text but where there a way to check that the 'submit' never happened and feel confident that no server trip was made.</p>\n\n<p>I want something like:</p>\n\n<pre><code>it \"should not sumbit if user name is less than 3 characters\" do\n  visit /edit_account_settings(@user)\n  fill_in \"username\", :with =&gt; \"fo\"\n  click_button \"SAVE\"\n\n  # HOW DO I DO THIS?\n  expect( ... ).not_to submit_to_server \nend\n</code></pre>\n"},{"tags":["asp.net","vb.net","unit-testing","usercontrols"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12905377,"title":"Unit testing custom user controls - Why is the control not initialized?","body":"<p>With a custom control (lets call it TwoLists) that contains two <code>asp:DropDownList</code> (defined in .ascx), I create an instance of TwoLists in my unit test, to find its child lists are nothing. </p>\n\n<pre><code>Public Sub test_TwoLists()\n    Dim instance As TwoLists = New TwoLists()\n    Dim list1 As DropDownList = instance.FindControl(\"list1\")\n    Dim list2 As DropDownList = instance.FindControl(\"list2\")\n    Assert.IsNotNull(list1)\n    Assert.IsNotNull(list2)\nEnd Sub\n</code></pre>\n\n<p>Why is the control not initialized with it's child controls?</p>\n\n<p>Note: This control is created/intialised and works fine when being used in an .aspx and I navigate to the page. </p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12901338,"title":"Python unittest: cancel all tests if a specific test fails","body":"<p>I'm using <code>unittest</code> to test my Flask application, and <code>nose</code> to actually run the tests. My first set of tests is to ensure the testing environment is clean and prevent running the tests on the Flask app's configured database. I'm confident that I've set up the test environment cleanly, but I'd like some assurance of that without running all the tests.</p>\n\n<pre><code>import unittest\n\nclass MyTestCase(unittest.TestCase):\n    def setUp(self):\n        # set some stuff up\n        pass\n\n    def tearDown(self):\n        # do the teardown\n        pass\n\nclass TestEnvironmentTest(MyTestCase):\n    def test_environment_is_clean(self):\n        # A failing test\n        assert 0 == 1\n\nclass SomeOtherTest(MyTestCase):\n    def test_foo(self):\n        # A passing test\n        assert 1 == 1\n</code></pre>\n\n<p>I'd like the <code>TestEnvironmentTest</code> to cause <code>unittest</code> or <code>nose</code>to bail if it fails, and prevent <code>SomeOtherTest</code> and any further tests from running. Is there some built-in method of doing so in either <code>unittest</code> (preferred) or <code>nose</code> that allows for that?</p>\n\n<h2>Update</h2>\n\n<p>With Colleen's help I've updated my example with a kinda-working solution:</p>\n\n<pre><code>import unittest\n\nclass MyTestCase(unittest.TestCase):\n    def setUp(self):\n        # set some stuff up\n        self.environment_is_clean()\n\n    def tearDown(self):\n        # do the teardown\n        pass\n\n    def environment_is_clean(self):\n        try:\n            # A failing test\n            assert 0 == 1\n        except Exception as e:\n            print \"Test environment is not clean!\"\n            raise e\n\nclass SomeTest(MyTestCase):\n    def test_foo(self):\n        # A passing test\n        assert 1 == 1\n\nclass SomeOtherTest(MyTestCase):\n    def test_bar(self):\n        # A passing test\n        self.assertIn('foo', 'foobar')\n</code></pre>\n\n<p>All the tests still run, but if the test environment for any of them isn't clean (all in this case), all of the tests will fail before actually running their test code. This isn't perfect, but it does give me some assurance if my test environment is sane.</p>\n"},{"tags":["javascript","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12903189,"title":"Options for automated JS unit testing with proprietary embedded browser","body":"<p>I am trying to introduce a unit testing framework as part of our CI process with JavaScript that runs within a proprietary browser on an embedded platform. I've seen the well written JS Test Framework comparison thread on Stackoverflow already, but wanted to see what my options were with having a proprietary browser...Basic desires are:</p>\n\n<ul>\n<li>Must be runnable via on a linux server so Jenkins can run them on demand as part of the build</li>\n</ul>\n\n<p>Is there a way for me to leverage something like Googles JSTestDriver so that the unit tests can execute in this custom browser or will that only work for main stream browsers such as Firefox, IE, Chrome, etc? How easy is it to automated the execution of this into an automated headless build process with Jenkins?</p>\n\n<p>Currently I'm looking into using Casperjs + Phantomjs, which seems like a great solution. I won't be able to test any custom browser extensions, but that's ok as those will be tested with integration tests anyway...my thought with unit testing is that they should just test pure JS. This solution was also very easy to integrate with Jenkins and seems to cover my needs, wanted to see if anyone had any thoughts on this?</p>\n"},{"tags":["unit-testing","spring-mvc","controller","nullpointerexception"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":149,"score":0,"question_id":12902247,"title":"Spring 3.1 Dependency Injection - JUnit Testing","body":"<p>I'm using Spring MVC 3.1 and I am attempting to test a controller class called LoginController. I get a null pointer exception in the authenticate method when the method attempts to make a call using reference authenticationService, which is Autowired in the LoginController class. I have referenced this <a href=\"http://stackoverflow.com/questions/4396786/spring-ioc-dependency-injection-nullpointerexception\"> link </a> as well as <a href=\"http://stackoverflow.com/questions/3133544/autowire-throws-a-nullpointerexception\">this one</a> .   Please see code below for clarity</p>\n\n<p><strong>LoginControllerTest.java</strong></p>\n\n<pre><code> @RunWith(SpringJUnit4ClassRunner.class)\n @ContextConfiguration(locations = {\"classpath:servlet-context.xml\"})\npublic class LoginControllerTest extends DatabaseSupport {\n\n@Autowired\nprivate ApplicationContext applicationContext;\n\n@Autowired\nprivate LoginController loginController;\n\n @Autowired\nprivate AuthenticationService authenticationService;\n\nprivate MockHttpServletRequest request;\nprivate MockHttpServletResponse response;\nprivate RequestMappingHandlerAdapter handlerAdapter;\n\nprivate LoginForm loginForm;\n\n\n@Before\npublic void setUp() {\n    request = new MockHttpServletRequest();\n    response = new MockHttpServletResponse();\n\n    handlerAdapter = applicationContext.getBean(RequestMappingHandlerAdapter.class);\n    authenticationService = applicationContext.getAutowireCapableBeanFactory()\n                           .createBean(AuthenticationService.class);\n    loginController = new LoginController();\n    loginForm = new LoginForm();\n\n}\n\n\n@Test\npublic void loginTest() throws Exception {\n    final String expectedMessage = \"login\";\n    final String requestUri = \"/\";\n    final HandlerMethod expectedHandlerMethod;\n\n    final MockHttpServletRequest request;\n    final MockHttpServletResponse response;\n\n    request = new MockHttpServletRequest();\n    response = new MockHttpServletResponse();\n    request.setMethod(\"GET\");\n\n    request.setRequestURI(requestUri);\n\n    expectedHandlerMethod = new HandlerMethod(loginController, \"login\");\n    ModelAndView mav = handlerAdapter.handle(request, response, expectedHandlerMethod); //this.getHandler(request);\n\n\n    assertViewName(mav, expectedMessage);\n}\n\n\n@Test\npublic void logoutTest() throws Exception {\n    final String expectedMessage = \"login\";\n    final String requestUri = \"/\";\n    final HandlerMethod expectedHandlerMethod;\n\n    final MockHttpServletRequest request;\n    final MockHttpServletResponse response;\n\n    request = new MockHttpServletRequest();\n    response = new MockHttpServletResponse();\n    request.setMethod(\"GET\");\n\n    request.setRequestURI(requestUri);\n\n    expectedHandlerMethod = new HandlerMethod(loginController, \"logout\");\n    ModelAndView mav = handlerAdapter.handle(request, response, expectedHandlerMethod); //this.getHandler(request);\n\n\n    assertViewName(mav, expectedMessage);\n}\n\n\n@Test\npublic void authenticateTest() throws Exception {\n    //final String expectedMessage = \"redirect:search/\";\n    final String requestUri = \"/\";\n    final HandlerMethod expectedHandlerMethod;\n    final Map mav;\n\n    final MockHttpServletRequest request;\n    final MockHttpServletResponse response;\n\n    loginForm.setUserName(\"abell\");\n    loginForm.setPassWord(\"PassW0rd\");\n\n    request = new MockHttpServletRequest();\n    response = new MockHttpServletResponse();\n    request.setMethod(\"GET\");\n    request.setRequestURI(requestUri);\n    mav = new HashMap();\n\n      //authenticate(@ModelAttribute(\"loginForm\") LoginForm loginForm, Map model, HttpServletRequest request)\n    //expectedHandlerMethod = new HandlerMethod(loginController, \"authenticate\");\n    //ModelAndView mav = handlerAdapter.handle(request, response, expectedHandlerMethod); //this.getHandler(request);\n    String expectedMessage = loginController.authenticate(loginForm, mav, request);\n\n    assertTrue(expectedMessage.equalsIgnoreCase(\"redirect:search/\"));\n}\n\n\nprivate Object getHandler(MockHttpServletRequest request) throws Exception {\n    HandlerExecutionChain chain = null;\n\n    Map&lt;String, HandlerMapping&gt; map = applicationContext.getBeansOfType(HandlerMapping.class);\n    Iterator&lt;HandlerMapping&gt; itt = map.values().iterator();\n\n\n    while (itt.hasNext()) {\n        HandlerMapping mapping = itt.next();\n        chain = mapping.getHandler(request);\n        if (chain != null) {\n            break;\n        }\n    }\n\n    if (chain == null) {\n        throw new InvalidParameterException(\"Unable to find handler for request URI: \" + request.getRequestURI());\n    }\n\n    return chain.getHandler();\n   }\n}\n</code></pre>\n\n<p><br/>\n<strong>LoginController.java</strong></p>\n\n<pre><code>@Controller\n@SessionAttributes\n@RequestMapping(\"/\")\npublic class LoginController {\n\n    private static final Logger logger = LoggerFactory.getLogger(LoginController.class);\n\n    @Autowired\n    private AuthenticationService authenticationService;\n\n    @Autowired\n    private WloanInfoDao wloanInfoDao;\n\n    @Autowired\n    private UserProfile userProfile;\n\n\n    @RequestMapping(value = \"/\", method = RequestMethod.GET)\n    public String login() {\n\n            return \"login\";\n    }\n\n    @RequestMapping(value = \"/logout\", method = RequestMethod.GET)\n    public String logout() {\n            logger.info(\"Logout\");\n            return \"login\";\n\n    }\n\n    @RequestMapping(value=\"/authenticate\", method = RequestMethod.POST)\n    public String authenticate(@ModelAttribute(\"loginForm\") LoginForm loginForm, Map    model, HttpServletRequest request) throws AuthenticationException {\n            try {\n                    boolean authenticated = authenticationService.authenticate(loginForm.getUserName(), loginForm.getPassWord());\n\n                    if (authenticated) {\n                            userProfile.setUsername(loginForm.getUserName());\n                            userProfile.setAuthenticated(true);\n                            return \"redirect:search/\";\n                    }\n\n                    model.put(\"loginForm\", loginForm);\n                    request.setAttribute(\"errorMessage\",\"Invalid username or password.\");\n            } catch (AuthenticationException e) {\n                    logger.error(\"Error occurring during login: \" + e.getMessage(), e);\n                    throw new AuthenticationException(e);\n            }\n            return \"login\";\n            }\n\n             }\n</code></pre>\n\n<p><br/>\n<strong>AuthenticationService.java</strong>\n<br/></p>\n\n<pre><code> @Service(\"authenticationService\")\n public class AuthenticationService {\n\nprivate static final Logger logger =    LoggerFactory.getLogger(AuthenticationService.class);\nprivate static final String APPNAME = \"ULDD\";\n\npublic boolean authenticate(String username, String password) throws AuthenticationException {\n    try {\n        final ServiceConnectionInfo sci = new ServiceConnectionInfo();\n\n        PropertyManager props = new DbPropertyManager(APPNAME);\n\n        logger.info(\"Calling service authentication webservice: \" + props.getString(\"auth.url\"));\n        logger.info(\"Authentication user \" + username);\n\n        sci.setUrl(props.getString(\"auth.url\"));\n        sci.setUsername(props.getString(\"auth.username\"));\n        sci.setPassword(props.getString(\"auth.password\"));\n\n        final IServiceClient serviceClient = new Axis1ServiceClient(sci);\n        final AuthenticationServiceClient asc = new AuthenticationServiceClient(serviceClient, \"AuthenticationServiceClientTest\");\n\n        final AuthServiceResponse ret;\n\n        ret = asc.authenticate(username, password, AuthServiceRequest.Domain.INTERNAL, Arrays.asList(new String[] { APPNAME }));\n        ret.next();\n\n        return ret.isAuthenticated();\n\n    } catch (ServiceClientException e) {\n        throw new AuthenticationException(\"Error calling authentication service\", e);\n    } catch (Exception e) {\n        throw new AuthenticationException(\"Error authenticating username: \" + username, e);\n    }\n   }\n  }\n</code></pre>\n\n<p><br/>\n<strong>servlet-context.xml</strong></p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n &lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xmlns:p=\"http://www.springframework.org/schema/p\"\n   xmlns:context=\"http://www.springframework.org/schema/context\"\n   xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n   xmlns:aop=\"http://www.springframework.org/schema/aop\"\n   xmlns:tx=\"http://www.springframework.org/schema/tx\"\n   xsi:schemaLocation=\"\n   http://www.springframework.org/schema/beans\n   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n   http://www.springframework.org/schema/context\n   http://www.springframework.org/schema/context/spring-context-3.0.xsd\n   http://www.springframework.org/schema/mvc\n   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n   http://www.springframework.org/schema/aop\n   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n   http://www.springframework.org/schema/tx\n   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"&gt;\n\n    &lt;!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure --&gt;\n\n    &lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n    &lt;mvc:annotation-driven/&gt;\n\n    &lt;aop:aspectj-autoproxy proxy-target-class=\"true\"/&gt;\n\n    &lt;import resource=\"hibernate-context.xml\"/&gt;\n\n    &lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory --&gt;\n    &lt;mvc:resources mapping=\"/media/**\" location=\"/media/\"/&gt;\n\n    &lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\n    &lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n            &lt;property name=\"prefix\" value=\"/WEB-INF/views/\"/&gt;\n            &lt;property name=\"suffix\" value=\".jsp\"/&gt;\n    &lt;/bean&gt;\n    &lt;!-- Spring is retarded, --&gt;\n    &lt;bean class=\"org.springframework.beans.factory.config.CustomScopeConfigurer\"&gt;\n            &lt;property name=\"scopes\"&gt;\n                    &lt;map&gt;\n                            &lt;entry key=\"session\"&gt;\n                                    &lt;bean class=\"org.springframework.context.support.SimpleThreadScope\"/&gt;\n                            &lt;/entry&gt;\n                    &lt;/map&gt;\n            &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"multipartResolver\"\n          class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"&gt;\n\n            &lt;!-- one of the properties available; the maximum file size in bytes --&gt;\n            &lt;property name=\"maxUploadSize\" value=\"100000\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;context:component-scan base-package=\"com.everbank.uldd\" scoped-proxy=\"targetClass\"/&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["python","unit-testing","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12901941,"title":"How to properly make unit tests cleanup a socket","body":"<p>I've been working with some sockets lately, and while writing some unit test cases with a listening socket I repeatedly get <code>error: [Errno 98] Address already in use</code>.</p>\n\n<p>This is some example code that shows the error.</p>\n\n<pre><code>import unittest\nimport socket\n\nclass TestUnit(unittest.TestCase):\n    def setUp(self):\n        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        self.socket.bind((socket.gethostname(), 10000))\n        self.socket.listen(10)\n        self.addCleanup(self.clean)\n\n    def test_nothing(self):\n        self.assertEqual(False, False)\n\n    def test_something(self):\n        self.assertEqual(True, True)\n\n    def clean(self):\n        self.socket.close()\n</code></pre>\n\n<p>It seems to occur when one of the tests throw an exception. Without an exception it works as expected. But that kinda makes the test useless since all tests after the first that throws an exception also throw an exception.</p>\n"},{"tags":["c#","web-services","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12789391,"title":"Using Excel file to retrieve data for Unit testing c#","body":"<p>I am writing unit tests for web services testing. I have added a service reference to the C# unit tests solution and started consuming the classes in the web services for the testing. I have also added an Excel file to provide unit test values. </p>\n\n<p>Below is a example about what I was doing before  </p>\n\n<pre><code>[DataSource(\"System.Data.Odbc\"\n ,\"Dsn=Excel Files;dbq=|DataDirectory|\\\\TestData.xlsx;defaultdir=C:\\\\TestData;driverid=1046;maxbuffersize=2048;pagetimeout=5\"\n ,\"Sheet1$\"\n ,DataAccessMethod.Sequential)\n ,DeploymentItem(\"TestProject1\\\\TestData.xlsx\")\n ,Owner(\"\")\n ,Description(\"\")\n ,TestMethod()]\npublic void test1()\n{\n    try\n    {\n        var Service = new Service.ServiceClient();\n        var Cid = testContextInstance.DataRow[\"CId\"].ToString();\n        var MNumber = testContextInstance.DataRow[\"MNumber\"].ToString();\n        var VID = testContextInstance.DataRow[\"VID\"].ToString();\n        var isVisit = new Service.ISVisit()\n        {\n            CID = Cid,\n            MNum = MNumber,\n            VCode = VID\n        };\n\n    var first = Service.Medis(isVisit).Cast&lt;Service.ISMedi&gt;().FirstOrDefault();\n    // Assert\n    Assert.AreEqual(\"12345678\", first.Proc.ProcID);\n    }\n    catch (Exception ex1)\n    {\n        if (ex1.InnerException != null)\n            Debug.WriteLine(ex1.InnerException.Message);\n        Assert.Fail(ex1.Message);\n    }\n}\n</code></pre>\n\n<p>This test1 has passed <code>.Medis()</code>, <code>IsVisit</code> are classes in the services. Until now I just had one row in the Excel file and I was able to retrieve the data and test it.</p>\n\n<p><img src=\"http://i.stack.imgur.com/aqpIq.png\" alt=\"enter image description here\"></p>\n\n<p>But now the requirement is that if there are more than one row in the excel file, the unit test should loop through each row and test each row to see pass/fail.</p>\n\n<p><img src=\"http://i.stack.imgur.com/9MPVE.png\" alt=\"enter image description here\"></p>\n\n<p>Please Help me with this.How to loop through each row in the excel file in and check the test results.How to handle this situation in c# unitesting.Thank you</p>\n"},{"tags":["python","unit-testing","assertraises"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12889366,"title":"Exception statement not covered by self.assertRaises in python unit test cases","body":"<p>This is my function:</p>\n\n<pre><code>def get_value(request, param):\n  s = get_string(request, param)\n  value = re.search('(\\\\d\\\\d\\\\d\\\\d)-(\\\\d\\\\d)-(\\\\d\\\\d)', s)\n  if not value:\n    print 'match not found!'  \n    raise Exception('incorrect format: %s' % param)\n</code></pre>\n\n<p>test function:</p>\n\n<pre><code>def test_get_value(self):\n    m = test_mocks.HttpRequestMock(REQUEST = {'start_date': '2011.07.31'})\n    print '*************************'\n    print 'date format changed'\n    self.assertRaises(Exception, get_value, (m, 'start_date'))\n    print '*********************\n</code></pre>\n\n<p><code>get_value</code> doesn't print: <em>match not found</em>!</p>\n"},{"tags":["unit-testing","wicket","guice"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12762423,"title":"Wicket and Guice, injection in the webpage, and testabilitiy","body":"<p>I've been trying to get wicket and guice working together, more specifically injecting a facade (or a controller, whatever) into the webpage, with guice. The problem seems to be that I cannot do any other injection than field injection, in the webpage. If I try to use setter injection, the setter just doesn't get called. Constructor injection into the webpage doesn't seem to be possible (or I didn't find how). </p>\n\n<p>So, I seem to be left with field injection as the only possibility when injecting in the webpage.</p>\n\n<p>Can anybody, first of all, confirm that this is correct? I seem to have found on the site of apache that setter injection doesn't work as of wicket 1.5 (I'm on 6 by the way) but haven't found any more information about it.</p>\n\n<p>Secondly, if, indeed, it's only possible to do field injection in the webpage, how can I cleanly unit test field injection with guice? (I'm thinking about a mock test, all I need to know is that the facade in question is correctly called with the correct arguments after pressing a button, the facade itself can be tested in another unit test).</p>\n\n<p>Didn't supply any code, because the question seems to be rather basic. If needs be, I'll put in some snippets</p>\n\n<p>Kasper</p>\n"},{"tags":["php","unit-testing","phpunit","simpletest"],"answer_count":9,"favorite_count":23,"up_vote_count":64,"down_vote_count":0,"view_count":13286,"score":64,"question_id":34312,"title":"Simple test vs PHPunit","body":"<p>I was wondering if anyone that have experience in both these stuff can shed some light on the <em>significant</em> difference between the two, if any?</p>\n\n<p>Any specific strength of each that makes it suitable for any specific case?</p>\n"},{"tags":["objective-c","cocoa-touch","unit-testing","ios-simulator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12898655,"title":"iOS Simulator access test resources","body":"<p>I'm currently implementing some simple Unit Tests for my app.</p>\n\n<p>One simple Testcase is instantiating an AVAudioPlayer with a predefined file. This test works perfectly on the device. However if I use the Simulator to test the App, apparently an other folder structure is used, because the Test Resources are not copied to the tmp folder.</p>\n\n<p>This is the path used on the phone:</p>\n\n<pre><code>soundPath = [[NSString alloc] initWithFormat:@\"%@Tests.octest/%@\", NSTemporaryDirectory(), fileName];\n</code></pre>\n\n<p>I have implemented a simple check if I'm on the simulator:</p>\n\n<pre><code> if (TARGET_IPHONE_SIMULATOR)\n        soundPath = @\"\";\n    else\n      ...\n</code></pre>\n\n<p>So which path should I use if I'm on the Simulator? (I know I could use the hardcoded Path to the resource, but this project will run on different Computers, so I can't put it in there..)</p>\n\n<p>Thanks for your help...</p>\n"},{"tags":["c#",".net","unit-testing","pex"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":66,"score":6,"question_id":12880966,"title":"Can Pex automatically discover type overflow / underflow conditions?","body":"<p>Suppose there is a method like this (C#):</p>\n\n<pre><code>public static int Add(int x, int y)\n{\n    return x + y;\n}\n</code></pre>\n\n<p>If the sum does not fit into the <code>int</code> data type it is probably an error situation which is worth a unit test. Is Pex able to identify such errors and generate unit tests for those?</p>\n"},{"tags":["c#","unit-testing","asp.net-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":126,"score":2,"question_id":12891229,"title":"How can you unit test ASP.NET Web API routing?","body":"<p>I'm trying to write some unit tests to ensure that requests made to my Web API are routed to the expected API controller action with the expected arguments.</p>\n\n<p>I've tried to create a test using the <code>HttpServer</code> class, but I get 500 responses from the server and no information to debug the problem.</p>\n\n<p>Is there a way to create a unit tests for the routing of an ASP.NET Web API site?</p>\n\n<p>Ideally, I'd like to create a request using <code>HttpClient</code> and have the server handle the request and pass it through the expected routing process.</p>\n"},{"tags":["unit-testing","moles"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12896993,"title":"Moles framework: How does it drill through?","body":"<p>When Moles framework is used, it allows any function call to be mocked up. This is aquote from here: <a href=\"http://msdn.microsoft.com/en-us/library/ff798308.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ff798308.aspx</a></p>\n\n<blockquote>\n  <p>When execution enters a method, such as the DateTime.Now property\n  getter, the Moles framework checks to see whether the test class has\n  defined a detour for that method. If a detour is defined, the\n  framework redirects the call to the detour delegate. If a detour is\n  not defined, the call is directed to the real implementation of the\n  method.</p>\n</blockquote>\n\n<p>My question is: <em>How do you define a detour in the test class?</em></p>\n\n<p>FYI:\n<a href=\"http://stackoverflow.com/questions/3021797/how-moles-isolation-framework-is-implemented\">This</a> question addresses how Moles is internally implemented.</p>\n"},{"tags":["php","unit-testing","dependencies","legacy-code"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12896342,"title":"Unit testing legacy PHP class with heavy DB dependency","body":"<p>I am trying to implement some unit tests into a legacy PHP application.</p>\n\n<p>There have been a number of challenges with this, but in particular for this question, I am currently looking at a small class that manages the app config.</p>\n\n<p>The class interface is pretty simple; it does the following:</p>\n\n<ul>\n<li>The constructor calls a Populate method, that uses our Recordset class to load the config for the requested module from the database.</li>\n<li>Get method, which returns a specified config value.</li>\n<li>Set method, which sets the config value in memory.</li>\n<li>Save method, which writes the config update(s) back to the DB.</li>\n</ul>\n\n<p>Testing the Get/Set methods is straightforward; they map directly to private array, and work pretty much as you'd expect.</p>\n\n<p>The problem I have is with testing the database handling. The class uses a number of fields on the config table (module name, language, etc) to determine which config items to load and in what priority. In order to do so, it constructs a series of elaborate SQL strings, and then makes direct calls to the DB to get the correct config data.</p>\n\n<p>I have no idea how to go about writing a unit test for this. Aside from the Get/Set methods, the class consists pretty much entirely of building SQL strings and running them.</p>\n\n<p>I can't see a way to test it sensibly without actually running it against a real DB, and all the issues that go with that -- if nothing else, the complexity of the config loader would mean I'd need at least seven or eight test databases populated with slightly different config. It seems like it would be unmanageable and fragile, which would defeat the point somewhat.</p>\n\n<p>Can anyone suggest how I should proceed from here? Is it even possible to unit test this kind of class?</p>\n\n<p>Many thanks.</p>\n"},{"tags":["unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12895709,"title":"Coded UI Test Method failed inconsistently","body":"<p>The following exception failing my UI automation test.</p>\n\n<pre><code>Message: Test method\nCodedUITestMethod1 throw exception:\nThe playback failed to find the control with the given search properties. Additional Details:\n TechnologyName:  'UIA'\n ControlType:  'MenuItem'\n Name:  'MyViewModel' ---&gt; system.runtime.interopservices.comexception error hresult e_fail has been returned from a call to a COM component\n</code></pre>\n\n<p>please any one give me a solution for these type of exceptions.</p>\n"},{"tags":["unit-testing","testing","user-interface"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":368,"score":3,"question_id":8642846,"title":"Is it possible to run a CodedUI test with the screen locked?","body":"<p>I wrote a auto UI test project (using Coded UI framework) and deployed it on a server.<br/>\nI want to schedule the testing task, to run every night say 12:00.</p>\n\n<p>My problem is when the server is locked (the user is still logged on), it cannot run successfully and the error message is:</p>\n\n<blockquote>\n  <p>Automation engine is unable to playback the test because it is not\n  able to interact with the desktop.  This could happen if the computer\n  running the test is locked or it’s remote session window is minimized.</p>\n</blockquote>\n\n<p>Is there any way I can schedule the Coded UI test on the server too always run?</p>\n"},{"tags":["ruby-on-rails-3","unit-testing","actioncontroller"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12894013,"title":"How can I test ActionController extensions within Rails 3.2?","body":"<p>I wrote an extension for ActionController::Base in Rails 3.2. Now I want to test it. But because the gem I created is no application it has neither specific controllers nor routes, so I cannot use \"get\" or \"post\" to call any action.<br>\nIs there any module which can create generic controllers on the fly (like <a href=\"https://github.com/nakajima/acts_as_fu\" rel=\"nofollow\">acts_as_fu</a> does with ActiveRecord models)? Or is there any testing pattern I can relate to?</p>\n\n<p>I have found this <a href=\"http://stackoverflow.com/questions/251225/how-to-test-controller-filters-in-ruby-on-rails-and-testunit\">article</a> which explains how to test a before_filter. So far so good although the solutions are to some extend heavy-weight or unclean.</p>\n\n<p>Edit: In particular I want to test an around_filter (if it works and if it redirects correctly) which is created by my extension.</p>\n\n<p>I'm looking forward to your answers.<br>\nThanks and kind regards.</p>\n"},{"tags":[".net","database","unit-testing","transactions"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":257,"score":2,"question_id":6258187,"title":"Using TransactionScope does not reseed identity column","body":"<p>I've started using <a href=\"http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx\" rel=\"nofollow\">TransactionScope</a> to help with my unit tests, in order to put my test database back to it's previous state. Using this with SpecFlow, I have a base class like so:</p>\n\n<pre><code>public class TransactionScopedFeature\n{\n    private TransactionScope Scope { get; set; }\n\n    [BeforeScenario]\n    public void BaseSetup()\n    {\n        this.Scope = new TransactionScope(TransactionScopeOption.RequiresNew);\n    }\n\n    [AfterScenario]\n    public void BaseCleanup()\n    {\n        if (this.Scope != null)\n        {\n            this.Scope.Dispose();\n        }\n    }\n}\n</code></pre>\n\n<p>All of the above works, in that when I add records to the database, when I then query the tables after the tests have finished, those tables are empty. Great stuff, and very clever indeed!</p>\n\n<p>My question relates to identity columns in these tables. What I've noticed is that, when I run my tests numerous times, the ID column of my test table increases by 1. I assumed that since the TransactionScope would rollback the changes, that the identity seed would also be rolled back.</p>\n\n<p>Am I wrong in making this assumption - is this just how databases work? If that is the case, I could also run a SQL script before each of my scenarios that does this:</p>\n\n<p><code>DBCC CHECKIDENT ('dbo.Items', reseed, 0)</code></p>\n\n<p>I just wanted to check in case I was doing something wrong, or this is normal database behaviour.</p>\n\n<p>Cheers.\nJas.</p>\n"},{"tags":["unit-testing","windows-phone-7"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12843487,"title":"Where is library Microsoft.Silverlight.Testing.dll in Silverlight Toolkit?","body":"<p>I am watching <a href=\"http://msdn.microsoft.com/en-us/hh849671.aspx\" rel=\"nofollow\">this video</a> about Silverlight unit tests. But I cannot find necessary libraries. Even if I install Silverlight Toolkit, Windows cannot find Microsoft.Silverlight.Testing.dll file.</p>\n\n<p>So where can I get it?</p>\n\n<hr>\n\n<p>Ok. <strong>Do not ever use Windows system to find a file</strong>! (I have Windows 7)\nI have wasted 2 hours finding solution in Internet! Never trust your Windows system :)</p>\n\n<p>File Microsoft.Silverlight.Testing.dll is here \n<strong>C:\\Program Files (x86)\\Microsoft SDKs\\Silverlight\\v5.0\\Toolkit\\dec11\\Testing</strong></p>\n\n<hr>\n\n<p>One more, very important thing. Windows Phone 7.1 uses Silverlight 4.0 and special Microsoft.Silverlight.Testing.dll for Windows Phone. So, if you want to develop Windows 7.1 application and have UT, you must use <a href=\"http://www.jeff.wilcox.name/2011/06/updated-ut-mango-bits\" rel=\"nofollow\">this</a></p>\n"},{"tags":["asp.net-mvc","unit-testing","c#-4.0","asp.net-mvc-4","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12889673,"title":"Write a Ninject test with mvc4","body":"<p>I am really new to ninject and testing too.</p>\n\n<p>I have an mvc4 application that I want to start writing tests for. (Yes I know I am meant to write them as I go:) )</p>\n\n<p>Within my NinjectWebCommon</p>\n\n<pre><code>  private static IKernel CreateKernel()\n    {\n        var kernel = new StandardKernel();\n        kernel.Bind&lt;Func&lt;IKernel&gt;&gt;().ToMethod(ctx =&gt; () =&gt; new Bootstrapper().Kernel);\n        kernel.Bind&lt;IHttpModule&gt;().To&lt;HttpApplicationInitializationHttpModule&gt;();\n\n        RegisterServices(kernel);\n        return kernel;\n    }\n\n    private static void RegisterServices(IKernel kernel)\n    {\n        kernel.Bind&lt;IConsumerRepository&gt;().To&lt;ConsumerRepository&gt;();\n    }\n</code></pre>\n\n<p>I have written everything in repository's within my application for example I have</p>\n\n<pre><code>public interface IConsumerRepository\n{\n    ConsumerModel GetConsumerByUserId(Guid userId);\n}\npublic ConsumerModel GetConsumerByUserId(Guid userId)\n    {\n        if (HttpContext.Current.Session[\"ConsumerInfo\"] == null)\n        {\n            var data = RestSharperHelper.GetById&lt;ConsumerModel&gt;(\"id\", userId, ApiEndPointConstants.GetConsumerById);\n            LogMessage(data.UserName);\n            HttpContext.Current.Session[\"ConsumerInfo\"] = data;\n            return data;\n        }\n        else\n        {\n            return (ConsumerModel)HttpContext.Current.Session[\"ConsumerInfo\"];\n        }\n    }\n</code></pre>\n\n<p>Whats the best way for me to write a test to check that a ConsumerModel is returned from web applications repository? I want it be flexible as in time I want to write more complicated tests and provide a mock ConsumerModel instead of calling the api like the above everytime</p>\n\n<p>Thank you for any suggestions!</p>\n"},{"tags":["python","regex","json","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":66,"score":-1,"question_id":12890652,"title":"check whether data is in json format or not in python","body":"<blockquote>\n  <p>This is my test class  and i am trying to unittest my method that is createaccount()</p>\n</blockquote>\n\n<pre><code>class CreateAccountTest1(unittest.TestCase):\n    def testCreateAccount_1(self,data):\n        text = \"{'user_id':'abc123','action':'add','names':['hello','world']}\"\n        regex = !(/[^,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t]/.test(text.replace(/\"(\\\\.|   [^\"\\\\])*\"/ g, ''))) &amp;&amp; eval('(' + text + ')')\n        self.assertRegexpMatches(text, reg, 'my msg')\n</code></pre>\n\n<blockquote>\n  <p>createaccount() method is </p>\n</blockquote>\n\n<pre><code>class CreateAccountClass():\n    def CreateAccount(self,data):\n</code></pre>\n\n<p>Now i have to check whether the parameter of the <code>createaccount()</code> is in json format or not.</p>\n\n<p>if i pass <code>data=</code></p>\n\n<pre><code> { \"_id\" : \"user@gmail.com\", \"H_id\" : \"smsg0\", \"name\" : \"vish\", \"passwrd\" : \"xj45cd\" }\n</code></pre>\n\n<p>it should check whether it is json or not,\nand i am sure that this is in json format.\nnow in my method <code>createaccount()</code> it should check whether the <code>data</code> is in json format or not,\nif not it should print error message, if it works with <code>regex</code> ? or any suggestions,\nThanks, </p>\n"},{"tags":["unit-testing","teamcity","mspec"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12889051,"title":"Why do i get MissingMethodException when I use MSpec on my TeamCity build server?","body":"<p>Lately I've been having problems running my MSpec tests in the TeamCity build. This is happening on two different (unrelated) projects. Everything will work fine locally, but when the TeamCity build runs I get MissingMethodExceptions for some of the MSpec types.</p>\n\n<p>The build then goes on to run all 5 (so far) of my specs, <em>all of which pass</em>. the build fails though, because the step finishes with an error.</p>\n\n<p>If it makes any difference, I'm targetting .NET 4.5 and using mspec-clr4.exe to run the tests on the TeamCity server. I use MSpec 0.5.9 and use TeamCity's NuGet installer to pull it directly from NuGet. We're on TeamCity 7.1</p>\n\n<p>Here's my build step configuration\n<img src=\"http://i.stack.imgur.com/ldOFB.png\" alt=\"TeamCity build step configuration for MSpec test runner\"></p>\n\n<p>An here's a segment of the log file output:</p>\n\n<pre>[04:27:12]Step 3/4: Unit test and Code Coverage (MSpec) (47s)\n[04:27:12]Starting: C:\\BuildAgent\\plugins\\dotnetPlugin\\bin\\JetBrains.BuildServer.NUnitLauncher.exe #TeamCityImplicit\n[04:27:12]in directory: C:\\BuildAgent\\work\\13af8c5b6a6273c6\n[04:27:22]JetBrains dotCover Console Runner v2.0.425.72. Copyright (c) 2009-2012 JetBrains s.r.o. All rights reserved.\n[04:27:22]\n[04:27:39][JetBrains dotCover] Coverage session started [15/10/2012 04:25:58]\n[04:27:45]Running specifications.\n[04:27:47]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]Running specifications in Tigra.Graffiti.Specifications\n[04:27:48]Tigra.Graffiti.Specifications (2s)\n[04:27:50]CalendarFunctions CSS based formatting, when building calendar day listitem > should produce expected html\n[04:27:50]CalendarFunctions CSS based formatting, when building calendar day listitem for event day > should produce html with event date css class\n[04:27:51]CalendarFunctions CSS based formatting, when building calendar day listitem for day with events > should produce html with hasEvents css class\n[04:27:51]CalendarFunctions CSS based formatting, when building calendar day listitem for day with events and is event date > should produce html with event date css class\n[04:27:51]CalendarFunctions CSS based formatting, when building calendar day listitem for day with events and events are included > should produce html with event date css class\n[04:27:51]Runner failure: System.Runtime.Serialization.SerializationException: Type is not resolved for member 'Machine.Specifications.Runner.RunOptions,Machine.Specifications, Version=0.5.9.0, Culture=neutral, PublicKeyToken=null'.\n[04:27:51]   at System.AppDomain.CreateInstanceAndUnwrap(String assemblyName, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, Evidence securityAttributes)\n[04:27:51]   at Machine.Specifications.Runner.Impl.AppDomainRunner.CreateRunnerAndUnloadAppDomain(String runMethod, AppDomain appDomain, Assembly assembly, Object[] args)\n[04:27:51]Type is not resolved for member 'Machine.Specifications.Runner.RunOptions,Machine.Specifications, Version=0.5.9.0, Culture=neutral, PublicKeyToken=null'.\n[04:27:57][JetBrains dotCover] Coverage session finished [15/10/2012 04:26:16]\n[04:27:57][JetBrains dotCover] Analysed application exited with code '-1'</pre>\n"},{"tags":["objective-c","unit-testing","nsurlconnection","gh-unit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12888776,"title":"GHUnit test with async HTTP get action","body":"<p>I want to test async HTTP get action.</p>\n\n<pre><code>@interface Sender : NSObject&lt;NSURLConnectionDataDelegate, NSURLConnectionDelegate&gt;\n{\n    NSMutableData       *buffer;\n    NSString            *_html\n}\n\n- (void)getHtml;\n\n@end\n\n@implementation Sender\n\n- (void)getHtml\n{\n    NSString *urlstr = @\"http://www.yahoo.co.jp\";\n    NSURL *url = [NSURL URLWithString:urlstr];\n    NSURLRequest *request = [NSURLRequest requestWithURL:url];\n    NSURLConnection *conn = [NSURLConnection connectionWithRequest:request delegate:self];\n    if (conn) {\n        buffer = [NSMutableData data];\n    } else {\n        // error handling\n    }\n}\n\n- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data\n{\n    [buffer appendData:data];\n}\n\n-(void)connectionDidFinishLoading:(NSURLConnection *)connection\n{\n    NSLog(@\"Succeed!! Received %d bytes of data\", [buffer length]);\n    _html = [[NSString alloc] initWithData:buffer encoding:NSUTF8StringEncoding];\n    NSLog(@\"%@\", _html);\n}\n\n@end\n</code></pre>\n\n<p>I have to let <code>_html</code> <strong>property</strong> ?</p>\n\n<pre><code>#import \"SenderTestCase.h\"\n#import \"Sender.h\"\n\n@implementation SenderTestCase\n\n- (void)setUpClass\n{\n    sender = [[Sender alloc] init];\n}\n\n- (void)testGetHtml\n{\n    [self prepare];\n    [sender getHtml];\n    [self performSelector:@selector(_succeedGetHtml) withObject:nil afterDelay:3.0];\n    [self waitForStatus:kGHUnitWaitStatusSuccess timeout:4.0];\n}\n\n- (void)_succeedGetHtml\n{\n    if (sender.html != nil) {\n        [self notify:kGHUnitWaitStatusSuccess forSelector:@selector(testGetHtml)];\n    };\n}\n\n@end\n</code></pre>\n\n<p>If there is more nice way, please tell me.\nThank you for your kindness.</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12713156,"title":"How to separate TestCases by used storage?","body":"<p>I have a test for testing data model:</p>\n\n<pre><code>&lt;?php\nnamespace Tests\\Model\\SQL;\n\n/**\n * @group Model_Users\n * @group Model\n */\nclass UsersTest extends TestCase {\n\n/** @var Users */\nprivate $model;\n\npublic function setUp() {\n    parent::setUp();\n    $this-&gt;connection-&gt;execute( file_get_contents(\n        __DIR__ . '/fixtures/countries.sql' ) );\n    $this-&gt;model = new \\Users(\n        $this-&gt;connection\n    );\n}\n\n    public function testUserExists() {\n            $exists = $this-&gt;model-&gt;userExists( 'johndoe' );\n            $this-&gt;assertTrue( $exists );\n    }\n\n}\n</code></pre>\n\n<p>The <code>Tests\\Model\\SQL\\TestCase</code> uses <strong>SQLite</strong> as a database to keep tests as fast as possible.\nAnyway, as you may expect, SQLite is not the same database as <strong>Postgres</strong>, therefore there could be some specialites, which will fail on SQLite and pass on PostgreSQL and vice versa.</p>\n\n<p><strong>My question is</strong>:</p>\n\n<p>How to effectively (when keeping DRY in mind) design the architecture to be able to run tests only with SQLite and then only with Postgres.</p>\n\n<p>When I am saying <a href=\"http://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow\">DRY</a>, I mean ideally case, when I write only one testcase for one model and the architecture of my tests will take care of that, so I will be able to run tests like this:</p>\n\n<pre><code>php tests/run.php --group=MockedDbWithSqlite # fast way, prefered, default\n\nphp tests/run.php --group=RealDb # slower way, but with more precise results\n</code></pre>\n"},{"tags":["php","wordpress","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12718974,"title":"PHPUnit 3.4.15, PHP 5.2.6, and the WordPress Core Tests - Will this even work?","body":"<ul>\n<li>PHP: 5.2.6</li>\n<li>PHPUnit: 3.4.15</li>\n<li>XAMPP Stack</li>\n<li>Windows 7</li>\n<li>User experience: Little to none</li>\n<li>Frustration level:  Severe</li>\n</ul>\n\n<p>Let me cut to the chase.  I'm trying to get the WordPress core tests to run, and they won't.  I'm not sure if its even possible with my versions... </p>\n\n<p>Here's what I've done so far:  I created a very simple test in test_unit.php:</p>\n\n<pre><code>require_once ('PHPUnit\\Framework.php');\nclass SimpleTest extends PHPUnit_Framework_TestCase\n{\n    public function testSomething()\n    {\n        $this-&gt;assertEquals(true, false);\n    }\n}\n</code></pre>\n\n<p>I run <code>phpunit test_unit.php</code> and it works (1 test, 1 assertion, 1 failure).</p>\n\n<p>I still have some confusion about how PHPUnit is included, and I think someone said it changed to an autoloader of some kind in a newer version.</p>\n\n<p>When I go to the wordpress tests folder, the directions say just run <code>phpunit</code> in that dir.  This does not work.  I've tried targeting specific files, using --configuration and --bootstrap flags to target those files specifically, and all that happens is the same thing:  It gives me 1 blank line, and then returns to the command prompt.</p>\n\n<p>Is there a specific file I need to include somewhere to get the WP test to run?  A more important question:  Will the WP tests even run w/ my outdated version of PHPUnit?</p>\n\n<p>Your help is greatly appreciated!</p>\n"},{"tags":["java","unit-testing","testng","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12886452,"title":"Making inherited getters to return mock objects","body":"<p>I want the inherited getters in class A to return Mock of MyObject. How can I do that without directly stubbing getMyObject() method in A (i.e. via using some MockBase class) ?</p>\n\n<pre><code>     public class Base {\n         @Autowired\n         private MyObject obj;\n         public MyObject getMyObject(){\n            return obj;\n         }\n     }\n\n\n    public class A extends Base {\n     @Autowired\n     private SomeObject xyz; \n\n     public void myMethod(){\n       MyObject  obj = getMyObject();\n       //do something here\n      }\n\n    }\n\n  public void MockBase {\n      @Mock\n      protected MyObject obj;\n\n      public MyObject getMyObject(){\n            return obj;\n      }\n  }\n\n  public class ATest extends MockBase  {\n    @InjectMocks\n    private A a;\n\n    @Mock\n    private SomeObject xyz;\n\n\n    @BeforeMethod\n    public void setUp(){\n        MockitoAnnotations.initMocks(this);\n    } \n\n    public void MyMethod_SomeCondition_ExpectedResult{\n       a.myMethod();\n    }\n   }\n</code></pre>\n"},{"tags":["android","unit-testing","testing","gps","integration-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12887035,"title":"How to test location based android app?","body":"<p>I've been working on an Android app that helps detect speed traps. It works a little like this:</p>\n\n<ul>\n<li>It gets the user's GPS location (speed and bearing too)</li>\n<li>It sends that to the server, and the server responds with a list of speed traps within a certain radius</li>\n<li>The application repeatedly sleeps and wakes up to get the user's lat and long only and then: \n<ul>\n<li>warns the user</li>\n<li>sleeps for some more time, or</li>\n<li>figures out that the traps are out of date and goes back to step 1</li>\n</ul></li>\n</ul>\n\n<p>The code is organized into \"modules\" that communicate with intents, i.e. there is a location services modules, a trap getting module, etc.</p>\n\n<p>The problem is that, while I know most of the individual modules work separately (communication with the server, location grabbing, direction calculations), I can't think of a way to test them all together besides just getting in my car and doing manual testing. </p>\n\n<p>I know there are some android testing frameworks out there that can mock locations but it seems like there are many states the app could be in at any time, how could I be sure that I would be testing all the corner cases?</p>\n\n<p>Any advice from experienced testers? How do you test long running applications that seem messy?</p>\n\n<p>My app code is all posted here: <a href=\"https://github.com/Android-CMD-Group/Radar-Detector\" rel=\"nofollow\">https://github.com/Android-CMD-Group/Radar-Detector</a></p>\n\n<p>My server code is here: <a href=\"https://github.com/Android-CMD-Group/Radar-Server-in-Python\" rel=\"nofollow\">https://github.com/Android-CMD-Group/Radar-Server-in-Python</a></p>\n"},{"tags":["unit-testing","maven-2","junit4"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":416,"score":1,"question_id":8210269,"title":"Can't run single test method with maven","body":"<p>i know how to run <strong>Junit test class:</strong></p>\n\n<pre><code>mvn test -Dtest=classname\n</code></pre>\n\n<p>but when i tried to run a <strong>single unit test method</strong> as follows:</p>\n\n<pre><code>mvn test -Dtest=classname#methodname\n</code></pre>\n\n<p>i always get the error: that <strong>no test were executed</strong></p>\n\n<p>References:</p>\n\n<p><a href=\"http://maven.apache.org/plugins/maven-surefire-plugin/examples/single-test.html\" rel=\"nofollow\">http://maven.apache.org/plugins/maven-surefire-plugin/examples/single-test.html</a>\nhttp://stackoverflow.com/questions/1873995/run-a-single-test-method-with-maven</p>\n\n<p>please advise why my test method is not getting execusted, i am using <strong>maven 2</strong> and <strong>junit 4.7</strong> .</p>\n"},{"tags":["java","unit-testing","maven-2"],"answer_count":8,"favorite_count":16,"up_vote_count":45,"down_vote_count":0,"view_count":20305,"score":45,"question_id":1873995,"title":"Run a single test method with maven","body":"<p>I know you can run all the tests in a certain class using:</p>\n\n<p>mvn test -Dtest=classname</p>\n\n<p>But I want to run an individual method and -Dtest=classname.methodname  doesn't seem to work.</p>\n\n<p>Thanks\n-Bill</p>\n"},{"tags":["linux","unit-testing","ioctl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12886772,"title":"Trapping ioctl()s on virtual filehandle","body":"<h2>Question:</h2>\n\n<p>How do I create a filehandle such that I could trap ioctl()s called on it?</p>\n\n<h2>Background:</h2>\n\n<p>I have code which pushes and pulls data to/from /dev/random on Linux using the RNDADDENTROPY ioctl. I wish to write unit tests for it.</p>\n\n<p>Now, the problem is, it doesn't make sense for me to feed data into the kernel entropy pool and then ask what the value is in that entropy pool; I have to expect that any number of other things might be pushing or pulling data on that pool. I'd <em>prefer</em> to have a stub filehandle I can provide the code, and then trap the ioctl() call the code uses to add the entropy.</p>\n\n<p>But how do I do that?</p>\n\n<p>Among other things, I have at my disposal \"The Linux Programming Interface\" and all the manpages one might expect to find on Gentoo, Debian or Ubuntu...so if there's a particular place in any of those I should read, I'd be happy for a pointer to dereference...</p>\n"},{"tags":["python","unit-testing","subclass"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12885748,"title":"Python TypeError when attempting to pass parameters to unittest subclass","body":"<p>I'm attempting to pass parameters to unittest subclass methods.  Please forgive my ignorance - I've only started coding in Python a few days ago.  I could obviously just hardcode the parameters in the subclass itself but that would eliminate its reuse with other username/password combos.  When I run run_tests.py below, I get the error \"TypeError: runTest() takes exactly 3 arguments (4 given)\". </p>\n\n<p>Here is run_tests.py:</p>\n\n<pre><code>from selenium import webdriver\nimport unittest\nfrom testcases import login\n\n\ndef my_suite():\n\n    suite = unittest.TestSuite()\n    suite.addTest (login.Login().runTest(\"username1\", \"password1\", \"page title\"))\n    return suite\n\n\nif __name__ == '__main__':\n    runner = unittest.TextTestRunner()\n    runner.run(my_suite())\n</code></pre>\n\n<p>Here is testcases/basetestcase.py:</p>\n\n<pre><code>from selenium import webdriver\nimport unittest\n\nclass BaseTestCase (unittest.TestCase):\n\ndef setUp(self):\n    self.driver = webdriver.Firefox()\n\n    self.driver.implicitly_wait(30)\n    self.base_url = \"http://website\"\n\ndef tearDown(self):\n    self.driver.quit()\n</code></pre>\n\n<p>Here is testcases/login.py</p>\n\n<pre><code>import common_page_elements\nfrom basetestcase import BaseTestCase\n\nclass Login (BaseTestCase):\n    def runTest(username, password, verification):\n        \"\"\" Test logging in. \"\"\"\n        driver = self.driver\n        driver.get(self.base_url)\n        driver.find_element_by_id(common_page_elements.textfield_username).clear()\n        driver.find_element_by_id(common_page_elements.textfield_username).send_keys(username)\n        driver.find_element_by_id(common_page_elements.textfield_password).clear()\n        driver.find_element_by_id(common_page_elements.textfield_password).send_keys(password)\n        driver.find_element_by_name(common_page_elements.button_submit).click()        \n\n        self.assertTrue(verification in self.driver.title)\n</code></pre>\n"},{"tags":["java","unit-testing","spring","spring-mvc","spring-annotations"],"answer_count":3,"favorite_count":6,"up_vote_count":7,"down_vote_count":0,"view_count":3678,"score":7,"question_id":2314377,"title":"Testing Spring @MVC annotations","body":"<p>I ran into a problem the other day where a @Valid annotation was accidentally removed from a controller class.  Unfortunately, it didn't break any of our tests.  None of our unit tests actually exercise the Spring <code>AnnotationMethodHandlerAdapter</code> pathway.  We just test our controller classes directly.</p>\n\n<p>How can I write a unit or integration test that will correctly fail if my @MVC annotations are wrong?  Is there a way I can ask Spring to find and exercise the relevant controller with a MockHttpServlet or something?</p>\n"},{"tags":["unit-testing","maven-plugin","maven-3","js-test-driver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":11433352,"title":"JsTestDriver - Missing artifact error","body":"<p>I'm trying to integrate <strong>JsTestDriver</strong> to <strong>Maven</strong> to test also my scripts before deploying.\nActually I follow up the steps described at Google Code <a href=\"http://code.google.com/p/jstd-maven-plugin/wiki/GettingStarted\" rel=\"nofollow\">here</a>. But unfortunately I'm not able to resolve dependency. Despite I added repository and plugin-repository to my Maven <strong>settings.xml</strong>, I still get error '<strong>Missing artifact com.googlecode.jstd-maven-plugin:jstd-maven-plugin:jar:1.3.2.5</strong>'. </p>\n\n<p>I'll be so happy if someone can corrent/guide me.</p>\n\n<p>Thanks in advance.</p>\n\n<p>With regards.</p>\n\n<p><strong>settings.xml</strong></p>\n\n<pre><code>// ..................\n&lt;repository&gt;\n    &lt;id&gt;jstd-maven-plugin google code repo&lt;/id&gt;\n    &lt;url&gt;http://jstd-maven-plugin.googlecode.com/svn/maven2&lt;/url&gt;\n&lt;/repository&gt;\n&lt;pluginRepository&gt;\n    &lt;id&gt;jstd-maven-plugin google code repo&lt;/id&gt;\n    &lt;url&gt;http://jstd-maven-plugin.googlecode.com/svn/maven2&lt;/url&gt;\n&lt;/pluginRepository&gt;\n// ..................\n</code></pre>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>// ..................\n&lt;properties&gt;\n    &lt;jstd.version&gt;1.3.2.5&lt;/jstd.version&gt;\n&lt;/properties&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.jstd-maven-plugin&lt;/groupId&gt;\n    &lt;artifactId&gt;jstd-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${jstd.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;plugin&gt;\n&lt;groupId&gt;com.googlecode.jstd-maven-plugin&lt;/groupId&gt;\n&lt;artifactId&gt;jstd-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;${jstd.version}&lt;/version&gt;\n&lt;configuration&gt;\n    &lt;port&gt;9876&lt;/port&gt;\n    &lt;reset&gt;true&lt;/reset&gt;\n    &lt;verbose&gt;true&lt;/verbose&gt;\n    &lt;server&gt;localhost:9876&lt;/server&gt;\n    &lt;runnerMode&gt;INFO&lt;/runnerMode&gt;\n    &lt;config&gt;src/test/resources/jsTestDriver.conf&lt;/config&gt;\n    &lt;jar&gt;src/test/resources/JsTestDriver-1.3.4.b.jar&lt;/jar&gt;\n&lt;/configuration&gt;\n&lt;executions&gt;\n    &lt;execution&gt;\n        &lt;id&gt;run-tests&lt;/id&gt;\n        &lt;phase&gt;test&lt;/phase&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;test&lt;/goal&gt;\n        &lt;/goals&gt;\n    &lt;/execution&gt;\n&lt;/executions&gt;\n&lt;/plugin&gt;\n// ..................\n</code></pre>\n"},{"tags":["unit-testing","apache-mina"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12097634,"title":"Unit testing of an apache mina client","body":"<p>I have a mina client whose connector is a NioSocketConnector. I have written integration tests of this client with real server. However, I could not find a way to do <strong>unit tests</strong>. For example, I want to test my custom decoder and encoder works correctly without opening a real socket. And, I want to test my messages are queued correctly in the buffer etc.</p>\n\n<p>I found a DummySession class for testings but I am not sure if this class is enough for a complete unit testing of the client.</p>\n\n<p>Mina suggests unit testing is easy with it so I really wonder how can I do this. Please help with your ideas or links to sample code.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":12880726,"title":"How do you write your unit tests?","body":"<p>Do you follow any specific naming conventions? How do you structure your tests? Do you use nested test fixtures or just a flat structure? Do you have one test class per class to test? <em>Why</em> do you write them like this?</p>\n"},{"tags":["java","hibernate","unit-testing","hsqldb","schemaexport"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12867383,"title":"Hsqldb errors during SchemaExport using Hibernate 4.1","body":"<p>How do I get rid of these errors below when running Hibernate's SchemaExport? It doesn't seem to cause a problem actually - my tests still run just fine - but I don't like seeing the errors and having to scroll down a lot just to see what went wrong with a test.</p>\n\n<p>Is there any way to get rid of them - by either solving the error or just making it quiet?</p>\n\n<pre><code>17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C588CBB8DB5\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C5885AC11C60\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C58841979673\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C588430DFF29\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C588B6909BE1\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table comment drop constraint FK38A5EE5FCBB8DB5\n</code></pre>\n"},{"tags":["java","unit-testing","reflection","junit"],"answer_count":4,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":2761,"score":5,"question_id":1230706,"title":"running a subset of JUnit @Test methods","body":"<p>We're using JUnit 4 to test: we have classes that don't are a subclass of <code>TestCase</code>, and they have public methods annotated with <code>@Test</code>. We have one file with many <code>@Test</code> methods. It would be nice to be able to run a subset of them via Ant from the command line, in the style of this recipe for JUnit 3:</p>\n\n<pre><code>ant runtest -Dtest=MyTest -Dtests=testFoo,testBar\n</code></pre>\n\n<p><a href=\"http://today.java.net/pub/a/today/2003/09/12/individual-test-cases.html\" rel=\"nofollow\">http://today.java.net/pub/a/today/2003/09/12/individual-test-cases.html</a></p>\n\n<p>I've been trying to think of ways to achieve this with Java reflection, etc. Since there doesn't seem to be any way to \"hide\" <code>@Test</code> methods or remove their annotations at runtime, the only option seems to be using the ClassLoader's <code>defineClass</code> method, which seems quite difficult.</p>\n\n<p>P.S. The Right Thing in this situation would be to split up the file, but are there alternatives?</p>\n\n<p>Thanks for your time.</p>\n"},{"tags":["performance","spring","hibernate","unit-testing","dbunit"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":144,"score":2,"question_id":12876278,"title":"Improving performance of database tests using Spring 3.1, Hibernate 4.1, Dbunit, etc","body":"<p>I'm currently starting a new project, and I've got around 190 repository tests. One thing I've noticed - and I am not entirely sure why this happening - is that the integration tests against HSQLDB (2.2.8) are running a lot slower than I think they should be.</p>\n\n<p>I think I've tracked the bottleneck to the insertion of data before each test. For most tests, it ranges from .15 to .38 seconds just to setup the database. This is unacceptable. I would have imagined that an in-memory database would be much faster :(</p>\n\n<p>Here is the database test class that all of my repository tests extend from:</p>\n\n<pre><code>@ContextConfiguration(locations = {\"classpath:applicationContext.xml\"})\n@RunWith(SpringJUnit4ClassRunner.class)\n@TransactionConfiguration(defaultRollback=true)\n@Transactional\npublic abstract class DatabaseTest {\n\n    public static final String TEST_RESOURCES = \"src/test/resources/\";\n\n    @Autowired\n    protected SessionFactory sessionFactory;\n\n    @Autowired\n    protected UserRepository userRepository;\n\n    @Autowired\n    protected DataSource dataSource;\n\n    protected IDatabaseTester databaseTester;\n\n    protected Map&lt;String, Object&gt; jdbcMap;\n    protected JdbcTemplate jdbcTemplate;\n\n    @PostConstruct\n    public void initialize() throws SQLException, IOException, DataSetException {\n        jdbcTemplate = new JdbcTemplate(dataSource);\n\n        setupHsqlDb();\n\n        databaseTester = new DataSourceDatabaseTester(dataSource);\n        databaseTester.setSetUpOperation(DatabaseOperation.CLEAN_INSERT);\n        databaseTester.setTearDownOperation(DatabaseOperation.NONE);\n        databaseTester.setDataSet(getDataSet());\n    }\n\n    @Before\n    public void insertDbUnitData() throws Exception {\n        long time = System.currentTimeMillis();\n\n        databaseTester.onSetup();\n\n        long elapsed = System.currentTimeMillis() - time;\n        System.out.println(getClass() + \" Insert DB Unit Data took: \" + elapsed);\n    }\n\n    @After\n    public void cleanDbUnitData() throws Exception {\n        databaseTester.onTearDown();\n    }\n\n    public IDataSet getDataSet() throws IOException, DataSetException {\n        Set&lt;String&gt; filenames = getDataSets().getFilenames();\n\n        IDataSet[] dataSets = new IDataSet[filenames.size()];\n        Iterator&lt;String&gt; iterator = filenames.iterator();\n        for(int i = 0; iterator.hasNext(); i++) {\n            dataSets[i] = new FlatXmlDataSet(\n                new FlatXmlProducer(\n                    new InputSource(TEST_RESOURCES + iterator.next()), false, true\n                )\n            );\n        }\n\n        return new CompositeDataSet(dataSets);\n    }\n\n    public void setupHsqlDb() throws SQLException {\n        Connection sqlConnection = DataSourceUtils.getConnection(dataSource);\n        String databaseName = sqlConnection.getMetaData().getDatabaseProductName();\n        sqlConnection.close();\n\n        if(\"HSQL Database Engine\".equals(databaseName)) {\n            jdbcTemplate.update(\"SET DATABASE REFERENTIAL INTEGRITY FALSE;\");\n\n            // MD5\n            jdbcTemplate.update(\"DROP FUNCTION MD5 IF EXISTS;\");\n            jdbcTemplate.update(\n                \"CREATE FUNCTION MD5(VARCHAR(226)) \" +\n                    \"RETURNS VARCHAR(226) \" +\n                    \"LANGUAGE JAVA \" +\n                    \"DETERMINISTIC \" +\n                    \"NO SQL \" +\n                    \"EXTERNAL NAME 'CLASSPATH:org.apache.commons.codec.digest.DigestUtils.md5Hex';\"\n            );\n        } else {\n            jdbcTemplate.update(\"SET foreign_key_checks = 0;\");\n        }\n    }\n\n    protected abstract DataSet getDataSets();\n\n    protected void flush() {\n        sessionFactory.getCurrentSession().flush();\n    }\n\n    protected void clear() {\n        sessionFactory.getCurrentSession().clear();\n    }\n\n    protected void setCurrentUser(User user) {\n        if(user != null) {\n            Authentication authentication = new UsernamePasswordAuthenticationToken(user,\n                user, user.getAuthorities());\n\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n        }\n    }\n\n    protected void setNoCurrentUser() {\n        SecurityContextHolder.getContext().setAuthentication(null);\n    }\n\n    protected User setCurrentUser(long userId) {\n        User user = userRepository.find(userId);\n\n        if(user.getId() != userId) {\n            throw new IllegalArgumentException(\"There is no user with id: \" + userId);\n        }\n\n        setCurrentUser(user);\n\n        return user;\n    }\n\n    protected User getCurrentUser() {\n        return (User) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n    }\n\n}\n</code></pre>\n\n<p>Here is the relevant beans on my application context:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n    &lt;property name=\"locations\" value=\"classpath:applicationContext.properties\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\"\n      destroy-method=\"close\"&gt;\n    &lt;property name=\"driverClass\" value=\"${database.driver}\"/&gt;\n    &lt;property name=\"jdbcUrl\" value=\"${database.url}\"/&gt;\n    &lt;property name=\"user\" value=\"${database.username}\"/&gt;\n    &lt;property name=\"password\" value=\"${database.password}\"/&gt;\n    &lt;property name=\"initialPoolSize\" value=\"10\"/&gt;\n    &lt;property name=\"minPoolSize\" value=\"10\"/&gt;\n    &lt;property name=\"maxPoolSize\" value=\"50\"/&gt;\n    &lt;property name=\"idleConnectionTestPeriod\" value=\"100\"/&gt;\n    &lt;property name=\"acquireIncrement\" value=\"2\"/&gt;\n    &lt;property name=\"maxStatements\" value=\"0\"/&gt;\n    &lt;property name=\"maxIdleTime\" value=\"1800\"/&gt;\n    &lt;property name=\"numHelperThreads\" value=\"3\"/&gt;\n    &lt;property name=\"acquireRetryAttempts\" value=\"2\"/&gt;\n    &lt;property name=\"acquireRetryDelay\" value=\"1000\"/&gt;\n    &lt;property name=\"checkoutTimeout\" value=\"5000\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sessionFactory\"\n      class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;property name=\"mappingResources\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;...&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"namingStrategy\"&gt;\n        &lt;bean class=\"org.hibernate.cfg.ImprovedNamingStrategy\"/&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"javax.persistence.validation.mode\"&gt;none&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2ddl.auto}\n            &lt;/prop&gt;\n            &lt;prop key=\"hibernate.generate_statistics\"&gt;false&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.show_sql\"&gt;false&lt;/prop&gt;\n            &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.cache.use_second_level_cache\"&gt;false&lt;/prop&gt;\n            &lt;prop key=\"hibernate.cache.provider_class\"&gt;\n\n            &lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean class=\"org.springframework.orm.hibernate4.HibernateExceptionTranslator\"/&gt;\n\n&lt;bean id=\"transactionManager\"\n      class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>In order to try and insert less data, I allow each test class to pick a DataSet enum that only loads the data it needs. It's specified like this:</p>\n\n<pre><code>public enum DataSet {\n    NONE(create()),\n    CORE(create(\"core.xml\")),\n    USERS(combine(create(\"users.xml\"), CORE)),\n    TAGS(combine(create(\"tags.xml\"), USERS)),\n</code></pre>\n\n<p>Could this be causing it to run slower rather than faster? The idea is that if I only want the core xml (languages, provinces, etc.), I only have to load those records. I thought this would make the test suite faster, but it's still too slow.</p>\n\n<p><strong>I can save some time by creating a separate xml dataset specifically designed for each test class. This chops out some of the insert statements. But even when I have 20 insert statements in a single xml dataset (thus, the minimum I/O loss other than in-lining the dataset right into java code directly), each test still takes .1 to .15 seconds during the initialization of the database data!</strong> I am in disbelief that it takes .15 seconds to insert 20 records into memory.</p>\n\n<p>In my other project using Spring 3.0 and Hibernate 3.x, it takes 30 milliseconds to insert everything before each test, but it's actually inserting 100 or more rows per test. For the tests that only have 20 inserts, they are flying as if there was no delay at all. This is what I expected. I'm starting to think the problem is with Spring's annotations - or the way I have them setup in my <code>DatabaseTest</code> class. This is basically the only thing different now.</p>\n\n<p>Also, my repositories are using the sessionFactory.getCurrentSession() instead of the HibernateTemplate. This is the first time I started using the annotation-based unit test stuff from Spring, since the Spring test classes are deprecated. Could that be the reason they are going slow?</p>\n\n<p>If there's anything else you need to know to help figure it out, please let me know. I am sort of stumped.</p>\n\n<p>EDIT: I put in the answer. The problem was hsqldb 2.2.x. Reverting to 2.0.0 fixes the problem.</p>\n"},{"tags":["unit-testing","testing","random","tdd","fractals"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":67,"score":3,"question_id":12877260,"title":"Unit testing algorithms that involve random numbers","body":"<p>I'm writting some code about fractals and random terrain generation. Specifically, I'm using the Diamond-Square algorithm as of now. For those of you who don't know, it basically obtains the average of four values, and adds a random number, every step. How wouldI go about testing the result? Should I use a known seed and calculate by hand the average plus the random value, or what? Should I, instead, calculate the result in the code, using the random numbers? Or is there another way? Also, some thought on the reverse process (a.k.a. TDD, writting tests before code) would be much appreciated).</p>\n"},{"tags":["c#",".net","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12875337,"title":"How do I make it so I can write unit tests for this code that relies on System.Random?","body":"<p>The below code lives in an instance class with no constructor, I don't know from where to start writing unit tests for it.</p>\n\n<p><em>E.g price is \"2/9\" so secondPart is 9</em> also the _random is an object of Random class</p>\n\n<pre><code>    public string RefreshPrice(string price, out bool isUpOrDown, out bool isChanged)\n    {\n        if (string.IsNullOrEmpty(price))\n        {\n            isUpOrDown = false;\n            isChanged = false;\n            return price;\n        }\n\n        int secondPart;\n        string[] priceParts = price.Split('/');\n        int newPrice = 0;\n        if(int.TryParse(priceParts[1], out secondPart))\n        {\n            newPrice = secondPart &gt;= 2 ? _random.Next(2, 20) : 2;\n        }\n\n        isUpOrDown = (newPrice &gt; secondPart);\n        isChanged = (newPrice != secondPart);\n\n        secondPart = newPrice;\n        return string.Format(\"{0}/{1}\", priceParts[0], secondPart);\n    }\n</code></pre>\n"},{"tags":["ios","unit-testing","xcode4","ocunit","sentestingkit"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":11832473,"title":"iOS Application Test static library initialization","body":"<p>I'm trying to write tests for an iOS app with a legacy C++ library dependency. The legacy library has initialization routines and static variables that must be run/set once per app cycle.</p>\n\n<p>I've created a test target that is working correctly. My test target is set to use my app as a Test Host through the Bundle Loader. This launches the iOS app and then uses [SenTestCase invoke test] to run the tests. Given this setup, I am hoping to let the app initialize the library and let the tests run in a \"library already initialized\" state. This seems to fit the Apple Application Test paradigm. However, the legacy libraries' static variables initialized during app launch are NULL when the tests are run. There is no user code that would reset the variables.</p>\n\n<p>I am expecting my Application Tests to be able to access my app's static variables. Is there something I can configure to allow this? Am I missing something?</p>\n\n<hr>\n\n<p>To clarify, the troublesome static variables are in the linked c++ library. The app and unit tests do not seem to share the same application scope.</p>\n"},{"tags":["c#","asp.net","unit-testing","moq"],"answer_count":3,"favorite_count":2,"up_vote_count":16,"down_vote_count":0,"view_count":7361,"score":16,"question_id":2416362,"title":"Mock static property with moq","body":"<p>I am pretty new to use <a href=\"http://code.google.com/p/moq/\" rel=\"nofollow\">moq</a>. I am into creating some unit test case to <code>HttpModule</code> and everything works fine until I hit a <code>static</code> property as follows           </p>\n\n<pre><code>this.applicationPath = (HttpRuntime.AppDomainAppVirtualPath.Length &gt; 1) ? HttpRuntime.AppDomainAppVirtualPath : String.Empty;\n</code></pre>\n\n<p>I do not know how create mocks for <code>static</code> class and property like <code>HttpRuntime.AppDomainAppVirtualPath</code>. The <code>context</code>, <code>request</code> and <code>response</code> have been mocked well with sample code I get from moq.  I will appreciate if somebody can help me on this.</p>\n\n<p>Thanks in advance.  </p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answer_count":2,"favorite_count":9,"up_vote_count":30,"down_vote_count":1,"view_count":30705,"score":29,"question_id":2276271,"title":"How to make mock to void methods with mockito","body":"<p>How to make  mock  void  methods.I performed  observer pattern but i cant mock  with mockito because i dont know the  mock way with  mockito.And i search from the internet i cant find properly sample.\nMy class  looks like</p>\n\n<pre><code>public class World{\n\n    List&lt;Listener&gt; listeners;\n    void addListener(Listener item)\n    {\n        listeners.add(item);\n    }\n    void doAction(Action goal,Object obj){\n        setState(\"i received\");\n        goal.doAction(obj);\n        setState(\"i finished\");\n    }\n    private string state;\n    //setter getter state\n} \n\npublic class WorldTest implements Listener{\n\n    @Test public void word{\n    World  w= mock(World.class);\n    w.addListener(this);\n    ...\n    ...\n\n    }\n}\n\ninterface Listener{\n    void doAction();\n}\n</code></pre>\n\n<p>The system are not triggered with mock. =(\nI want to show abovementioned system state. and i make   assertion according to them.\nPls  show me some  way for solving this problem...</p>\n"},{"tags":["java","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12860657,"title":"Unit testing \"glue\" code or code without any real logic","body":"<p>My question will be at the hand of a simplified example (in Java):</p>\n\n<pre><code>public class VehicleRepository {\n  // DAOs responsible for fetching objects from data store (injected)\n  private IChassisDAO chassisDAO;\n  private IEngineDAO engineDAO;\n  private IWheelDAO wheelDAO;\n  private IAccessoryDAO accessoryDAO;\n\n  public Vehicle getLuxuryCar() {\n    VehicleBuilder builder = getVehicleBuilder();\n    builder.setChassis(chassisDAO.findBySize(ChassisSize.NORMAL));\n    builder.setEngine(engineDAO.findByPower(EnginePower.HIGH));\n    builder.setWheelTemplate(wheelDAO.findBySize(WheelSize.NORMAL));\n    builder.setAccessories(accessoryDAO.findByType(Accessory.LUXURY));\n    return builder.build();\n  }\n\n  public Vehicle getOffroadCar() {\n    VehicleBuilder builder = getVehicleBuilder();\n    builder.setChassis(chassisDAO.findBySize(ChassisSize.LARGE));\n    builder.setEngine(engineDAO.findByPower(EnginePower.HIGH));\n    builder.setWheelTemplate(wheelDAO.findBySize(WheelSize.LARGE));\n    return builder.build();\n  }\n\n  // Similar operations ...\n}\n</code></pre>\n\n<p>How would you go about unit testing this class?\nI've thought on this for a bit, and I've identified a few options:</p>\n\n<p><strong>Test against the returned Vehicle without mocking the builder</strong><br>\nFrom an interface perspective this is the best option, but it won't be an isolated unit test on VehicleRepository. I can't see any real advantage to testing the VehicleRepository along with the VehicleBuilder as opposed to only testing the VehicleBuilder. The VehicleBuilder might also have complex logic (such as checks against which Accessories are present), which leads to multiple execution paths and which would make VehicleRepository's test very complex.</p>\n\n<p><strong>Refactor the code in order to test the state of the builder</strong><br>\nAn example would be splitting the getLuxuryCar operation into two operations:</p>\n\n<pre><code>public Vehicle getLuxuryCar() {\n  VehicleBuilder builder = getLuxuryCarBuilder();\n  return builder.build();\n}\n\n// Visible for testing in the same package\nprotected VehicleBuilder getLuxuryCarBuilder() {\n  VehicleBuilder builder = getVehicleBuilder();\n  builder.setChassis(chassisDAO.findBySize(ChassisSize.NORMAL));\n  builder.setEngine(engineDAO.findByPower(EnginePower.HIGH));\n  builder.setWheelTemplate(wheelDAO.findBySize(WheelSize.NORMAL));\n  builder.addAccessory(accessoryDAO.findByType(Accessory.LUXURY));\n  return builder;\n}\n</code></pre>\n\n<p>I prefer the state testing to behaviour testing, and the test will probably be more resilient, but I'm not very fond of the resulting code (especially the getLuxuryCar() method which doesn't really do anything).</p>\n\n<p><strong>Mock the VehicleBuilder and test the behaviour</strong><br>\nI believe that such a unit test will just be a replica of the actual operation being tested, and won't add any real benefit. It would also be very fragile and completely dependent on the internals of the operation being tested. A likely unit test (using JMock) would be something like:</p>\n\n<pre><code>@Test\npublic void shouldBuildLuxuryCar() {\n  context.checking(new Expectations() {{\n    oneOf(chassisDAOmock).findBySize(ChassisSize.NORMAL);\n    oneOf(vehicleBuilderMock).setChassis(with(any(Chassis.class)));\n\n    oneOf(engineDAOmock).findByPower(EnginePower.HIGH);\n    oneOf(vehicleBuilderMock).setEngine(with(any(Engine.class)));\n\n    oneOf(wheelDAOmock).findBySize(WheelSize.NORMAL));\n    oneOf(vehicleBuilderMock).setWheelTemplate(with(any(Wheel.class)));\n\n    oneOf(accessoryDAOmock).findByType(Accessory.LUXURY));\n    oneOf(vehicleBuilderMock).setAccessories(with(any(Set.class)));\n\n    oneOf(vehicleBuilderMock).build();\n  }});\n\n  context.assertIsSatisfied();\n}\n</code></pre>\n\n<p><strong>Don't unit test it</strong><br>\nI'm leaning towards this option as I'm not happy with any of the alternatives, and as the operations don't seem to really require any testing. To clarify, I'll still unit test the VehicleBuilder in isolation, but not the VehicleRepository. This doesn't seem to be the prevailing opinion however, as can be seen for example with this question: <a href=\"http://stackoverflow.com/questions/1316848/unit-testing-what-not-to-test\">Unit Testing - What not to test</a></p>\n"},{"tags":["asp.net-mvc-3","unit-testing","entity-framework-4.1","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12863452,"title":"ASP.NET MVC 3 - Unit Test in Respository","body":"<p>I'm using a class test that checks login entity that is being done correctly, but an error occurs that does not seem to return the query in the database, but the application developed in ASP.NET MVC 3 Code First query returns data, I would to know what is wrong and what can be done to solve it.</p>\n\n<p>Upon return of the query gives the following message in the variable:\n<strong><em>\"Enumeration yielded no results\"</em></strong></p>\n\n<p>Test Method:</p>\n\n<pre><code>[TestMethod()]\npublic void efetuarLoginTest()\n{\n            EntidadeRepository target = new EntidadeRepository();\n            string cnpj = \"12345678\";\n            string senha = \"lalado\";\n            Entidade expected = null; // TODO: Initialize to an appropriate value\n            Entidade actual;\n            actual = target.efetuarLogin(cnpj, senha);\n            Assert.AreNotEqual(expected, actual);\n}\n</code></pre>\n\n<p>Method repository of the entity with the task of returning to the login query:</p>\n\n<pre><code>public Entidade efetuarLogin(string cnpj, string senha)\n        {\n\n            var consulta = from usu in bd.Entidades\n                           where usu.cnpj == cnpj &amp;&amp; usu.senha == senha\n                           select usu;\n\n            if (consulta.Count() &gt; 0)\n            {\n                Entidade e = new Entidade();\n                e.id_entidade = consulta.First().id_entidade;\n                e.razao_social = consulta.First().razao_social;\n                e.cnpj = consulta.First().cnpj;\n                e.senha = consulta.First().senha;\n\n                return e;\n            }\n            else\n            {\n                return null;\n            }\n        }\n</code></pre>\n\n<p>Class persistence database using the Entity Framework 4.1:</p>\n\n<pre><code>internal class BancoDados: DbContext\n    {\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            modelBuilder.Conventions.Remove&lt;System.Data.Entity.ModelConfiguration.Conventions.PluralizingEntitySetNameConvention&gt;();\n            modelBuilder.Conventions.Remove&lt;System.Data.Entity.ModelConfiguration.Conventions.PluralizingTableNameConvention&gt;();\n\n            base.OnModelCreating(modelBuilder);\n        }\n\n        public DbSet&lt;Entidade&gt; Entidades { get; set; }\n        public DbSet&lt;Estado&gt; Estados { get; set; }\n        public DbSet&lt;Administrador&gt; Administradores { get; set; }\n        public DbSet&lt;Leilao&gt; Leiloes { get; set; }\n        public DbSet&lt;Lance&gt; Lances { get; set; }\n    }\n</code></pre>\n\n<p>Thank You.</p>\n"},{"tags":["unit-testing","moles","microsoft-fakes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":218,"score":0,"question_id":12017711,"title":"Moles/Fakes: How do I implement a test setup?","body":"<p>I have been recently working with Moles and I am now switching to Fakes. In my old test project I had a test setup, which looked like this:</p>\n\n<pre><code>[TestInitialize]\npublic void Setup()\n{\n    //...\n}\n</code></pre>\n\n<p>In there I did some necessary setup just like setting up some of my moles objects. </p>\n\n<p>A test method in moles looked somehow like that (with also the [HostType(\"Moles\")] specifying that it uses the moles objects.</p>\n\n<pre><code>[TestMethod]\n[HostType(\"Moles\")]\npublic void MolesTestMethod()\n{\n    //...\n}\n</code></pre>\n\n<p>Now, in Fakes they do not use the HostType Attribute anymore. Instead they use a ShimsContext in which you can use your \"mocked\" classes. It looks somehow like this:</p>\n\n<pre><code>[TestMethod]\npublic void FakesTestMethod()\n{\n    using (ShimsContext.Create())\n    {\n        //...\n    }\n}\n</code></pre>\n\n<p>If you do not use this context you might end up with an error message. It basically says that there was an ShimInvalidOperationException in the FakesTestMethod and you have to use the ShimsContext.Create() in the way described below)</p>\n\n<pre><code>-- C#:\nusing Microsoft.QualityTools.Testing.Fakes;\n\nusing(ShimsContext.Create())\n{\n    // your test code using Shims here\n}\n\n-- VisualBasic.NET\nImports Microsoft.QualityTools.Testing.Fakes\n\nUsing ShimsContext.Create\n    ' your test code using Shims here\nEnd Using  \n</code></pre>\n\n<p>So I tried to put my setup calls into that context and ended up with something like this:</p>\n\n<pre><code>[TestInitialize]\npublic void Setup()\n{\n    using(ShimsContext.Create())\n    {\n        //...\n    }\n}\n</code></pre>\n\n<p>Now, if I use this context in my Setup method, all the setup that is done there, will run out of context afterwards and will not be valid anymore when the unit tests are actually about to run, which is not really what I want from a test setup method.</p>\n\n<p>I fixed this issue by putting the using inside the test method itself and just call a private setup method right inside this context and before the test code. This setup method now does all the handling, which before the [TestInitialize] setup method did. The code looks somehow like this:</p>\n\n<pre><code>[TestMethod]\npublic void PerformActionFromConfigActionStateActionIdIsSet()\n{\n    using (ShimsContext.Create())\n    {\n        Setup();\n\n        //...\n    }\n}\n</code></pre>\n\n<p>My problem with this issue is now, that this solution completely \"kills\" the idea of the [TestInitialize] setup method. I have to duplicate this code into EACH test method and the most important part: the objects created in this Setup() method will be created and destroyed for EACH test, which is not ideal at all!</p>\n\n<p>Is there any other way to setup test data in Fakes? Any help is appreciated!</p>\n"},{"tags":["unit-testing","testing","nunit","monodevelop"],"answer_count":2,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":987,"score":8,"question_id":4868276,"title":"How to debug unit test with MonoDevelop?","body":"<p>I have MonoDevelop 2.4.2 on OSX. I have a failing unit test that I would like to debug. Is there a way to do it? I found a <a href=\"http://lists.ximian.com/pipermail/monodevelop-list/2009-July/010039.html\">reference</a> on MonoDevelop mailing list but my version  does not have mentioned option. </p>\n\n<p>Am I missing something?</p>\n"},{"tags":["python","unit-testing","gdb","pretty-print"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12870256,"title":"How can I unit test a GDB pretty-printer written in Python?","body":"<p>I have written a pretty-printer using the GDB Python interface for a (C) struct that has a tendency to change between software releases. Since the format is fluctuating I have tried to make the printer dynamic enough to adapt and always try to print something useful instead of throwing a Python exception.</p>\n\n<p>Right now there are two major formats that I need to support but there is likely to be a few more in the future. I would like to write some unit tests for the printer to avoid having to manually load coredumps from different releases to test it.</p>\n\n<p>I thought that maybe I could serialize the gdb.Value from within a debugging session and load them in my unit tests but I wasn't able to do it (pickle didn't work with gdb.Value). The core-dumps are really large so storing them with the pretty-printer and script GDB for the tests is not an option.</p>\n\n<p>How can I unit-test my pretty printer without keeping huge core-dumps around?</p>\n"},{"tags":["c#",".net","unit-testing","tdd","bdd"],"answer_count":7,"favorite_count":1,"up_vote_count":17,"down_vote_count":0,"view_count":533,"score":17,"question_id":12846428,"title":"Is it good practise to do unit test coverage for even plain classes","body":"<p>Here is an example of an class with no behaviour at all. So the question is should I be doing unit test coverage for it, as I see it as unnecessary for it does have any behaviour in it.</p>\n\n<pre><code>public class Employee\n{\n    public int Id { get; set; }\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n    public Address Address { get; set; }\n}\n</code></pre>\n\n<p><em><strong>My code coverage result complains that I have not done any coverage for the class</em></strong></p>\n"},{"tags":[".net","unit-testing","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12864968,"title":"Differences between copies of Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll","body":"<p>I created a console app in VS2012 and tried to add the MS unit test dll. But there are 5 of them. Which one should I use for .NET 4.0 with VS2012 and what are the other ones anyways?</p>\n\n<pre><code>Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll\n\nVersion:  9.0.0.0         File Version:  9.0.30729.1\nVersion: 10.0.0.0         File Version: 11.0.30319.1\nVersion: 10.0.0.0         File Version: 11.0.50727.1\n\nVersion: 10.1.0.0         File Version: 11.0.40219.1\nVersion: 10.1.0.0         File Version: 11.0.50727.1\n</code></pre>\n"},{"tags":["python","unit-testing","import"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":237,"score":1,"question_id":6925050,"title":"How do I import a module from a parent directory? (unittest purposes)","body":"<p>I have just finished writing the core section of a project I am working on and I want to write test for it using unittest before I continue. I am aware that I should have done this before, but when I started I didn't know Python, so.. whatever..</p>\n\n<p>What I would like to achieve: I have a sub-package of the main package which contains all the modules I want to test inside it. I want to put a subsubpackage inside that called 'tests' or something which then contains all of my test cases, which I'd like to be able to aggregate into a test suite from outside the package so eventually I can run all the test for the entire project in one go.</p>\n\n<p>The structure is something like this:</p>\n\n<pre><code>/projectPackage\n/projectPackage/package\n/projectPackage/package/\\__init__.py (empty)\n/projectPackage/package/someModule.py\n/projectPackage/package/... (more modules)\n/projectPackage/package/testing.py (runs all the tests in /tests/)\n/projectPackage/package/tests\n/projectPackage/package/tests/\\__init__.py (empty)\n/projectPackage/package/tests/someModuleTests.py\n</code></pre>\n\n<p>Problem I am having:</p>\n\n<p>someModuleTests has to import someModule from the parent package so it can test its methods. This doesn't seem to work. I get various errors like:</p>\n\n<pre><code>Attempted relative import beyond toplevel package\n</code></pre>\n\n<p>Anyway, I expect it's just because I am a Python noob! I have my own ideas on how I am going to do it for this project, because of course each is different, but any general advice on the structuring of medium-large python projects is also appreciated.</p>\n"},{"tags":["unit-testing","microsoft-fakes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12114964,"title":"Using Microsoft Fakes to Shim a method with ref parameters","body":"<p>I have a static method with ref parameters in my legacy (untestable) dll. I am trying to write unit tests for a class that calls into this method. </p>\n\n<pre><code>public static class Branding\n{\n    ...\n    ...\n\n    static public bool GetBranding(Int32 providerId,\n        Int32 employerId,\n        string brandingElement,\n        ref string brandingValue)\n\n    ...\n    ...\n}\n</code></pre>\n\n<p>I need help writing a shim statement for this call</p>\n\n<pre><code>ShimBranding.GetBrandingInt32Int32StringStringRef = \n    ( providerId, employerId, element, { ====&gt; WHAT GOES HERE &lt;===== } )\n    =&gt; \n    true;\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["python","unit-testing","google-app-engine"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":76,"score":0,"question_id":11909377,"title":"client-side unit testing on Google App Engine","body":"<p>Is there a simple and straightforward tutorial on client-side (as in on your development workstation, using testbed and checking both backend functionality and rendered HTML) unit and integration testing on the Google App Engine Python SDK? Something I can point other developers to?</p>\n"},{"tags":["c++","visual-studio-2010","unit-testing","clr","code-coverage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12859476,"title":"VS2010: Code coverage for c++ DLL (/clr)","body":"<p>According to <a href=\"http://msdn.microsoft.com/en-us/library/ms243171(v=vs.100).aspx\" rel=\"nofollow\">Microsoft</a> project which has been compiled with <i>/clr</i> and <i>/clr:pure</i> options doesn't support unit testing.</p>\n\n<p>However, I can create unit test project and use it for testing <i>/clr</i> and <i>/clr:pure</i> project. But <b><i>code coverage</i></b> is not supported at this time.</p>\n\n<p>How can I determine code coverage for C++ project which compiled into DLL with <i>/clr</i> option?</p>\n"},{"tags":["unit-testing","node.js","jasmine","mocha"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":454,"score":0,"question_id":11429332,"title":"Unit Tests of Node.js REST services with Mocha or Jasmine","body":"<p>I have node module that exports REST methods for express.js (index, show, update, delete)..</p>\n\n<p>What is the best approach to test mocha or jasmine unit test framework?</p>\n\n<p>How should I describe my test? </p>\n\n<p>Thanks. </p>\n"},{"tags":["c#","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12867069,"title":"Unit test insert method","body":"<p>How do you unit test a method that inserts data into the database?</p>\n\n<p>I have a service I'm creating and don't know how to Unit test it.</p>\n\n<pre><code>public class EnterpriseDownloadRepository : IEnterpriseDownloadRepository\n{\n    public int AddFileDownloadEntry(Contract.Data.FileDownloadEntry fileDownloadEntry)\n    {\n        using (var context = new EFFileDownloadEntryEntitites()) \n        {\n            int returnValue =context.FileDownloadEntries.AddObject(fileDownloadEntry);\n            context.SaveChanges();\n            return returnValue;\n        }\n\n\n\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":815,"score":5,"question_id":12171933,"title":"Running unit tests","body":"<p>In our solution we have several test projects. Most of them contain unit tests that run fast but some are for integration, acceptance and UI tests which take quite some time to finish.\nNow I'd like to have a convenient way of running only the unit tests. Either by using the hotkey to run all or using the new feature to run tests after each build.</p>\n\n<p>Unfortunately VS also runs all the slow tests as well. In VS10 I grouped the tests in Test View by project and selected only the ones containing unit tests. It's not as easy as I wished it to be but at least it was possible. Now there doesn't seem to be a way around running all tests in a solution.</p>\n\n<p>The only alternative that I see at the moment is to remove all but the unit tests from the solution but this would limit the refactoring capabilities.</p>\n\n<p>So does anyone know how to easily group and run only unit tests in the new VS?</p>\n"},{"tags":["c#",".net","sql","unit-testing","linq-to-sql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12866988,"title":"\"Cannot find data type Variant\" error on Linq-to-SQL CreateDatabase","body":"<p>I'm Unit Testing a repository that implements a Linq-to-sql Data Context.  As part of the class initialize, I'm creating the db:</p>\n\n<pre><code>using (var setupContainer = new MyDataContext(MyConnectionString))\n            {\n                if (setupContainer.DatabaseExists())\n                {\n                    setupContainer.DeleteDatabase();\n                }\n                setupContainer.CreateDatabase();\n            }\n</code></pre>\n\n<p>The problem is that Data Context has a table which contains a Variant data type. On CreateDatabase() I get this error:</p>\n\n<blockquote>\n  <p>{System.Data.SqlClient.SqlException (0x80131904): Column, parameter, or variable #6: Cannot find data type Variant.}</p>\n</blockquote>\n\n<p>I should state that I don't have the ability to change the field from Variant, as my impression is that's the first problem...</p>\n\n<p>Hope this is enough info to go by, can add anything else if needed. Thanks!</p>\n"},{"tags":["java","unit-testing","dbunit","unitils"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":545,"score":1,"question_id":5713433,"title":"Unitils/DBunit and database test","body":"<p>I want to try to make unit test with DBUnit but I have a problem with my dataset.</p>\n\n<p>Here is my persistence object:</p>\n\n<pre><code>@Entity\n@Table(name = \"personnes\")\npublic class Personne implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Integer pk;\n\n    @Column\n    private String name;\n}\n</code></pre>\n\n<p>And my dataset:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;dataset&gt;\n    &lt;personnes name=\"toto\"  pk=\"1\" /&gt;\n&lt;/dataset&gt;\n</code></pre>\n\n<p>My problem is with the name column, I get this error:</p>\n\n<pre><code>org.dbunit.dataset.NoSuchColumnException: personnes.NAME -  (Non-uppercase input column: name) in ColumnNameToIndexes cache map. Note that the map's column names are NOT case sensitive.\n</code></pre>\n\n<p>I don't understand why dbunit search a column \"NAME\" whereas my column is \"name\".</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["c#",".net","unit-testing"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":12792593,"title":"unit testing public methods with tested internal methods","body":"<p>I find myself falling into this pattern quite a lot, I write a class composed of very small methods which are completely exercised by my unit tests. Then I find I need to build another method that calls these methods and I have to write a more complicated unit test for that – a simple example would be illustrative:</p>\n\n<pre><code>namespace FooRequest\n{\n    static public class Verifier\n    {\n        static public bool IsValid(string request)\n        {\n            return (!IsAllCaps(request) &amp;&amp; !ContainsTheLetterB(request));\n        }\n\n        static internal bool IsAllCaps(string request)\n        {\n            return (request.Equals(request.ToUpper()));\n        }\n\n        static internal bool ContainsTheLetterB(string request)\n        {\n            return request.ToLower().Contains(\"b\");\n        }\n    }\n}\n</code></pre>\n\n<p>For code I’d write unit tests to cover the two internal methods like this:</p>\n\n<pre><code>namespace UnitTest\n{\n    using Microsoft.VisualStudio.TestTools.UnitTesting;\n    using FooRequest;\n\n    public class VerifierTest\n    {\n        [TestClass]\n        public class ContainsTheLetterB\n        {\n            [TestMethod]\n            public void ShouldReturnTrueForStringContainsB()\n            {\n                Assert.IsTrue(Verifier.ContainsTheLetterB(\"burns\"));\n            }\n\n            [TestMethod]\n            public void ShouldReturnFakseForStringDoesNotContainB()\n            {\n                Assert.IsFalse(Verifier.ContainsTheLetterB(\"urns\"));\n            }\n        }\n\n        [TestClass]\n        public class IsAllCaps\n        {\n            [TestMethod]\n            public void ShouldReturnTrueForStringIsAllCaps()\n            {\n                Assert.IsTrue(Verifier.IsAllCaps(\"IAMALLCAPS\"));\n            }\n\n            [TestMethod]\n            public void ShouldReturnFakseForStringDoesNotContainB()\n            {\n                Assert.IsFalse(Verifier.IsAllCaps(\"IAMnotALLCAPS\"));\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>For the public method I really just want to test “if the methods you call return false, then return false” – it’s annoying that I have to set up the input in such a way to force my internal methods to return true or false – my test for this method shouldn’t care about the internal methods it calls (right?)</p>\n\n<pre><code>    [TestClass]\n    public class IsValid\n    {\n        [TestMethod]\n        public void ShouldReturnFalseForInvalidStringBecauseContainsB()\n        {\n            Assert.IsFalse(Verifier.IsValid(\"b\"));\n        }\n\n        [TestMethod]\n        public void ShouldReturnFalseForInvalidStringBecauseIsAllCaps()\n        {\n            Assert.IsFalse(Verifier.IsValid(\"CAPS\"));\n        }\n\n        [TestMethod]\n        public void ShouldReturnTrueForValidString()\n        {\n            Assert.IsTrue(Verifier.IsValid(\"Hello\"));\n        }\n    }\n</code></pre>\n\n<p>Obviously for this example, that’s not too bad, but when there are lots of internal methods and the input is non-trivial to configure, testing my public “Is This Input Valid” method gets complicated.</p>\n\n<p>Should I create an interface for all my internal methods then stub it out for the tests or is there a neater way?</p>\n"},{"tags":["java","android","unit-testing","junit","powermock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":145,"score":0,"question_id":11313656,"title":"VerifyError with PowerMock on Android","body":"<p>I'm trying to use PowerMock to mock some classes used in testing our Android app (BluetoothSocket for example).</p>\n\n<p>I have downloaded the zip file on PowerMock's google code page with all dependencies and added them to my Android test project (including build path).</p>\n\n<p>However when I try to use PowerMock like this:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class )\n@PrepareForTest( NetworkUtil.class )\npublic class TestSendAck extends TestCase{\n\n    @Test\n    public void testGenerateURL() {\n         PowerMock.mockStatic( NetworkUtil.class );\n\n         EasyMock.expect( NetworkUtil.getLocalHostname() ).andReturn( \"triumph\" );\n\n         PowerMock.replayAll();\n         PowerMock.verifyAll();\n    }\n}\n</code></pre>\n\n<p>I get the following stack trace:</p>\n\n<pre><code>java.lang.ExceptionInInitializerError\nat org.easymock.internal.ClassProxyFactory.createEnhancer(ClassProxyFactory.java:249)\nat org.easymock.internal.ClassProxyFactory.createProxy(ClassProxyFactory.java:159)\nat org.easymock.internal.MocksControl.createMock(MocksControl.java:59)\nat org.powermock.api.easymock.PowerMock.doCreateMock(PowerMock.java:2212)\nat org.powermock.api.easymock.PowerMock.doMock(PowerMock.java:2163)\nat org.powermock.api.easymock.PowerMock.mockStatic(PowerMock.java:287)\nat se.metrima.mafield.test.TestSendAck.testGenerateURL(TestSendAck.java:19)\nat java.lang.reflect.Method.invokeNative(Native Method)\nat android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)\nat android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)\nat android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)\nat android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448)\nCaused by: java.lang.VerifyError: net.sf.cglib.core.ReflectUtils\nat net.sf.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:166)\nat net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\nat net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\nat net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)\nat net.sf.cglib.core.KeyFactory.create(KeyFactory.java:116)\nat net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)\nat net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)\nat net.sf.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:69)\n... 19 more\n</code></pre>\n\n<p>I only get this error when running the test project as an Android JUnit Test, if I run it as a regular JUnit test powermock works, but then all my tests that needs the Android framework naturally fails.</p>\n\n<p>How can I solve this? I'm very new to unit testing so I don't really understand all concepts yet.</p>\n"},{"tags":["c++","unit-testing","boost"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12863889,"title":"boost Unit test doesn't fail","body":"<p>I am learning about boost unit tests, I found out, happily, that it can detect memory leaks, so I am testing it. I created the following horrible method:</p>\n\n<pre><code>int ForTest::Compare(const ForTest item)\n{\n    ForTest* existing_item = this;\n    char* x=new char[1024];\n    m_name = std::string(x);\n    if (existing_item-&gt;m_count * existing_item-&gt;m_price == item.m_count * item.m_price) return 0;\n    if (existing_item-&gt;m_count * existing_item-&gt;m_price &gt; item.m_count * item.m_price) return 1;    \n    return -1;\n}\nBOOST_AUTO_TEST_CASE( a_test_case)\n{\n    BOOST_TEST_CHECKPOINT(\"weird...\");\n\n    ForTest alpha(\"Pen\", 4, 4.3);\n    ForTest beta;\n\n    BOOST_CHECK_EQUAL(alpha.Compare(beta), 1);  \n}\n</code></pre>\n\n<p>I am obviously creating 2 memory leaks here. Why doesn't the tester care ? My test passes with flying colors.</p>\n\n<p>I don't want to have to modify actual code, as I saw here: <a href=\"http://www.boost.org/doc/libs/1_35_0/libs/test/example/exec_mon_example.cpp\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_35_0/libs/test/example/exec_mon_example.cpp</a></p>\n\n<p>Why am I not getting an error ?</p>\n"},{"tags":["asp.net-mvc-3","unit-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":12859172,"title":"Why Unit test fails using mstest command line but not in VS2010 Professional?","body":"<p>I have a little problem with UnitTests for asp.net mvc3 application.</p>\n\n<p>If I run some unit-tests in Visual Studio 2010 <strong>Professional</strong>, they have been passed successfully.</p>\n\n<p>If I use the Visual Studio 2010 Professional command line</p>\n\n<pre><code>mstest /testcontainer:MyDLL.dll /detail:errormessage /resultsfile:\"D:\\A Folder\\res.trx\"\n</code></pre>\n\n<p>Then the error occurred:</p>\n\n<pre><code>[errormessage] = Test method MyDLL.AController.IndexTest threw exception:\nSystem.NullReferenceException: Object reference not set to an instance of an object.\n</code></pre>\n\n<p>and <strong>my controller</strong>:</p>\n\n<pre><code>public ActionResult Index(){\n   RedirectToAction(\"AnotherView\");\n}\n</code></pre>\n\n<p>and in the <strong>test</strong></p>\n\n<pre><code>AController myController = new AController();\nvar result = (RedirectToRouteResult)myController.Index();\n\nAssert.AreEqual(\"AnotherView\", result.RouteValues[\"action\"]);\n</code></pre>\n\n<p>How to solve this to work properly in both situations (VS2010 and mstest.exe) ?</p>\n\n<p>Thank you</p>\n\n<p>PS: I read <a href=\"http://stackoverflow.com/questions/2761587/test-run-errors-with-mstest-in-vs2010\">Test run errors with MSTest in VS2010</a> but that could solve if I have VS2010 Ultimate/Premium.</p>\n"},{"tags":["javascript","unit-testing","mocking","yui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12863935,"title":"YUI Testing Mocks - Can I verify a method is called 3x with 3 different values?","body":"<p>I am using the latest version of YUI Test for testing my project.</p>\n\n<p>I have a situation where I create a Mock with method Foo.  I expect that Foo will be called three times.  The first time, it will be called with value \"A\", the second time, it will be called with value \"B\", and the third time, it will be called with value \"C\".  The third time it is called, it should return true.</p>\n\n<p>Here is an example of what I would like to write, however this doesn't appear to work, and only the last condition is validated.</p>\n\n<pre><code>var mock = Y.Mock();\nY.Mock.expect(mock, { method: \"foo\", args: [\"A\"] });\nY.Mock.expect(mock, { method: \"foo\", args: [\"B\"] });\nY.Mock.expect(mock, { method: \"foo\", args: [\"C\"], returns: true });\n</code></pre>\n"},{"tags":["unit-testing","winrt"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":36,"score":0,"question_id":12864822,"title":"How can i export the test result of WinRT Unit testing report?","body":"<p>I have written the unit test cases for WinRT, but I am not able to export the test result into HTML or XML format which I can use for further process. Please suggest me where I can find the test result details. </p>\n"},{"tags":["ruby","windows","unit-testing","rubymine"],"answer_count":3,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":220,"score":9,"question_id":11819770,"title":"Rake tests running very slow","body":"<p>After running some tests, I'm convinced there has to be something wrong with my setup (windows, rubymine and latest ruby versions). My times right now are:</p>\n\n<pre><code>Finished tests in 14.289817s, 0.0700 tests/s, 0.3499 assertions/s.\n\n1 tests, 5 assertions, 0 failures, 0 errors, 0 skips\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>With 5 VERY easy tests (just checking if validation on empty fields works). The total time for these 5 unit tests is 160 seconds, over 2 minutes.</p>\n\n<p>What could I do to improve this speed?</p>\n\n<p>Here are the tests:</p>\n\n<pre><code>require 'test_helper'\n\nclass ItemTest &lt; ActiveSupport::TestCase\n  test 'item attributes must not be empty' do\n    item = Item.new\n    assert item.invalid?\n    assert item.errors[:name].any?\n    assert item.errors[:description].any?\n    assert item.errors[:image_url].any?\n    assert item.errors[:rating].any?\n  end\nend\n</code></pre>\n"},{"tags":["c#","unit-testing","fakeiteasy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12846484,"title":"MustHaveHappened fails when called twice on the same object","body":"<p>Given the following class under test (and associated DTO class and interface):</p>\n\n<pre><code>public class Foo\n{\n    private readonly IBar _bar;\n\n    public Foo(IBar bar) { _bar = bar; }\n\n    public void DoStuff()\n    {\n        var dto = new DTO();\n\n        dto.Num = 1;\n        _bar.Test(dto);\n\n        dto.Num = 2;\n        _bar.Test(dto);\n    }\n}\n\npublic class DTO { public int Num { get; set; } }\n\npublic interface IBar { void Test(DTO dto); }\n</code></pre>\n\n<p>And this test method (which attempts to verify that IBar.Test() gets called twice: once with Num = 1 and once with Num = 2):</p>\n\n<pre><code>public void TestMethod1()\n{\n    var bar = A.Fake&lt;IBar&gt;();\n    var foo = new Foo(bar);\n    foo.DoStuff();\n\n    A.CallTo(() =&gt; bar.Test(A&lt;DTO&gt;.That.Matches(x =&gt; x.Num == 1))).MustHaveHappened();\n    A.CallTo(() =&gt; bar.Test(A&lt;DTO&gt;.That.Matches(x =&gt; x.Num == 2))).MustHaveHappened();\n}\n</code></pre>\n\n<p>The first 'MustHaveHappened' call fails. I have discovered that it is because the DTO used by both calls to IBar.Test() is the same instance.  If I change the code to call IBar.Test() with two different DTO's it works as expected.</p>\n\n<p>My question is: is this a bug in FakeItEasy or am I doing something wrong?</p>\n"},{"tags":["python","unit-testing","import","python-module"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":7460363,"title":"re-import module-under-test to lose context","body":"<p>Many Python modules preserve an internal state without defining classes, e.g. <code>logging</code> maintains several loggers accessible via <code>getLogger()</code>.</p>\n\n<p><strong>How do you test such a module?</strong><br> Using the standard <a href=\"http://docs.python.org/library/unittest.html\" rel=\"nofollow\"><code>unittest</code></a> tools, I would like the various tests inside a <code>TestCase</code> class to re-import my module-under-test so that each time it loses its context. Can this be done?</p>\n"},{"tags":["objective-c","unit-testing","grand-central-dispatch"],"answer_count":3,"favorite_count":13,"up_vote_count":16,"down_vote_count":0,"view_count":4432,"score":16,"question_id":4326350,"title":"How do I wait for an asynchronously dispatched block to finish?","body":"<p>I am testing some code that does asynchronous processing using Grand Central Dispatch. The testing code looks like this:</p>\n\n<pre><code>[object runSomeLongOperationAndDo:^{\n    STAssert…\n}];\n</code></pre>\n\n<p>The tests have to wait for the operation to finish. My current solution looks like this:</p>\n\n<pre><code>__block BOOL finished = NO;\n[object runSomeLongOperationAndDo:^{\n    STAssert…\n    finished = YES;\n}];\nwhile (!finished);\n</code></pre>\n\n<p>Which looks a bit crude, do you know a better way? I could expose the queue and then block by calling <code>dispatch_sync</code>:</p>\n\n<pre><code>[object runSomeLongOperationAndDo:^{\n    STAssert…\n}];\ndispatch_sync(object.queue, ^{});\n</code></pre>\n\n<p>…but that’s maybe exposing too much on the <code>object</code>.</p>\n"},{"tags":["ios","unit-testing","core-data"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12861319,"title":"Error while creating coredata file in unit test","body":"<p>I have a coredata file in a static library and I'm creating unit tests for it. I get this error when i try to create the sqlite file in the following step during the unit test execution</p>\n\n<pre><code>_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];\n    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType\n                                                   configuration:nil\n                                                             URL:storeURL\n                                                         options:nil\n                                                           error:&amp;error])\n    { [...] }\n</code></pre>\n\n<blockquote>\n  <p>Test Case '-[PersonTest testAddPerson]' started. 2012-10-12\n  07:19:23.989 otest[11852:7e03] Unresolved error Error\n  Domain=NSCocoaErrorDomain Code=512 \"The operation couldn’t be\n  completed. (Cocoa error 512.)\" UserInfo=0x216a320 {reason=Failed to\n  create file; code = 2}, {\n      reason = \"Failed to create file; code = 2\"; }</p>\n</blockquote>\n"},{"tags":["java","multithreading","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12861330,"title":"Unit testing blocking processes","body":"<p>I have a worker processes working on a data queue. A <code>training worker</code> reads and processes data from the <code>training queue</code>. It continues to poll and on the look out for new data written to the queue.</p>\n\n<p>I have implemented the worker as follows:</p>\n\n<pre><code>public static void main(String[] args) {\n  startTraining()\n}\n\npublic static boolean startTraining() {\n  trainingWorker = new WorkerImpl(config);\n  final Thread workerThread = new Thread(trainingWorker);\n\n  WorkerListener listener = new WorkerListener() {\n    public void onEvent(WorkerEvent event, Worker worker, String queue, Job job, \n                        Object runner, Object result, Exception ex) {\n      if(event.equals(WorkerEvnet.JOB_SUCCESS) {\n        //get data\n        //process data\n        //send data\n      }\n    }\n  }\n\n  trainingWorker.addListener(listener, WorkerEvent.JOB_SUCCESS, WorkerEvent.JOB_FAILURE,\n                     WorkerEvent.WORKER_ERROR, WorkerEvent.WORKER_POLL);\n  workerThread.start();\n  workerThread.join();\n}\n</code></pre>\n\n<p>I want unit tests to see if the worker read the data properly, processed it correctly and successfully sent it. The problem is because of <code>Thread.join()</code>; the call to the main function never returns (as the worker is suppose to run continuously). In this case should I not write unit tests for it? If yes, how can I write some other form of test that will ensure the worker is working  as desired?</p>\n"},{"tags":["unit-testing","compact-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":11866011,"title":".NET CF UnitTesting with emulator - Test run error","body":"<p>Test run error:</p>\n\n<p>The test adapter ('Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestAdapter, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.Adapter, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a') required to execute this test could not be loaded. Check that the test adapter is installed properly. Error: Smart device host adapter failed to initialize.</p>\n\n<p>Actual situation:\nKnown issue \"Exceptions in unit tests in secondary threads kills vstesthost\"</p>\n\n<p>has been solved with adding to \nC:\\Program Files\\Microsoft Visual Studio 9.0\\Common7\\IDE\\VSTestHost.exe.config</p>\n\n<p>the following line:</p>\n\n<p></p>\n\n<p>Microsoft.VisualStudio.SmartDevice.UnitTestFramework.dll has been added to GAC:</p>\n\n<p>\"C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\bin\\gacutil.exe\" -i \"C:\\Program Files\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PublicAssemblies\\Microsoft.VisualStudio.SmartDevice.UnitTestFramework.dll\"</p>\n\n<p>But I still receive error message and can not run unit tests on emulator.</p>\n\n<p>Or may be this is still unresolved issue of Visual Studio 2008 and I should try another tools/possibilities?</p>\n\n<p><img src=\"http://i.stack.imgur.com/27Qbw.png\" alt=\"enter image description here\"></p>\n\n<p>System.IO.FileNotFoundException was unhandled</p>\n\n<p>System can not find file</p>\n\n<p>Source=\"Device Connection Manager\"\n  StackTrace:\n       at Microsoft.VisualStudio.DeviceConnectivity.Interop.ConManServerClass.DownloadPackage(String pwszPackageId)\n       at Microsoft.SmartDevice.Connectivity.FileDeployer.DownloadPackage(ObjectId packageId)\n       at Microsoft.VisualStudio.SmartDevice.TestHostAdapter.DeviceAgent.RunConfigDevice.InitializeStreamingWithDevice()\n       at Microsoft.VisualStudio.SmartDevice.TestHostAdapter.DeviceAgent.DeviceHostAdapter.initializeInternal()\n       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)\n       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n       at System.Threading.ThreadHelper.ThreadStart()\n  InnerException: </p>\n\n<p><a href=\"http://img688.imageshack.us/img688/2025/20120808testrunerrorexc.gif\" rel=\"nofollow\">http://img688.imageshack.us/img688/2025/20120808testrunerrorexc.gif</a></p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":8,"favorite_count":9,"up_vote_count":41,"down_vote_count":0,"view_count":12506,"score":41,"question_id":473401,"title":"Get name of currently executing test in JUnit 4","body":"<p>In JUnit 3, I could get the name of the currently running test like this:</p>\n\n<pre><code>public class MyTest extends TestCase\n{\n    public void testSomething()\n    {\n        System.out.println(\"Current test is \" + getName());\n        ...\n    }\n}\n</code></pre>\n\n<p>which would print \"Current test is testSomething\". </p>\n\n<p>Is there any out-of-the-box or simple way to do this in JUnit 4?</p>\n\n<p>Background: Obviously, I don't want to just print the name of the test. I want to load test-specific data that is stored in a resource with the same name as the test. You know, <a href=\"http://en.wikipedia.org/wiki/Convention_over_Configuration\" rel=\"nofollow\">convention over configuration</a> and all that.</p>\n\n<p>Thanks!</p>\n"},{"tags":["javascript","unit-testing","testing","cookies","browser-extension"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12858848,"title":"How to test Javascript that triggers 3rdparty cookies being set","body":"<p>I want to run automated tests that will execute a Javascript file. The JS calls a number of URLs through AJAX calls and image loads, each of which leads to the site being called dropping a cookie.</p>\n\n<p>Since I cannot read those cookies with Javascript, I don't know whether I can actually test this script.</p>\n\n<p>What is the best way of approaching this problem? Browser extensions?</p>\n"},{"tags":["unit-testing","powershell","tdd","pester"],"answer_count":6,"favorite_count":11,"up_vote_count":26,"down_vote_count":1,"view_count":3257,"score":25,"question_id":940497,"title":"How to do TDD and unit testing in powershell?","body":"<p>With MS ramming powershell into all new server products, I'm starting to (reluctantly) think I need to take it seriously. Part of \"taking it seriously\" is TDD. Have you found good methods to unit test power shell scripts? </p>\n\n<p>I've found samples of mocking from <a href=\"http://www.peterprovost.org/blog/post/TDD-with-PowerShell-Mocking-Things.aspx\">Mr Geek Noise</a> - but I'd really like something like <a href=\"http://ayende.com/projects/rhino-mocks.aspx\">RhinoMocks</a>. <a href=\"http://blog.brianhartsock.com/2009/03/27/tdd-with-powershell-from-the-client-perspective/\">Brian Hartsock</a> has a sample of running tests on powershell strings from MS Test. A little hacky, but it seems to work. </p>\n\n<p>What I want is a Powershell TDD experience that is as clean as it is in \"real\" languages. </p>\n\n<p><hr /></p>\n\n<p><strong>Update to clarify:</strong></p>\n\n<p>The first two answers attempt to steer me away from testing Powershell. The opinions are interesting. I don't want to know if it's a good idea to test in powershell. That's a subjective question that should be asked in a different forum. I want a solution to unit testing powershell. I you think it's a bad idea (might be), treat it as a fun academic question.</p>\n\n<ul>\n<li>Yes, scripting languages glue together disparate systems. However, as already pointed out, it's also easy to mock and break seams in a dynamic language. </li>\n<li>I'm not asking about \"debugging\". Debugging is an extremely useful topic. I'll let someone else ask it. </li>\n<li>Maybe PS scripts should be simple. The language supports modularity and it is inevitable that complex processes will be implemented in PS (even if a bad idea). </li>\n<li>The answer to this question is not \"You can't\". I can see (from linked blogs - which are a little old) that some people have made headway on the problem.  </li>\n</ul>\n\n<p>To re-state: <strong>How do you implement an automated testing of Powershell logic in the style of xUnit?</strong>  Integration tests are interesting, unit tests that break dependencies most interesting. </p>\n"},{"tags":["c#","visual-studio-2010","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12744546,"title":"Unit testing a method that returns a collection","body":"<p>I'm trying to write some unit tests for a service which returns collections of complex objects (<code>IQueriable&lt;MyObject&gt;</code> to give an idea) and I'm not sure how to approach the problem.</p>\n\n<p>Consider this:</p>\n\n<p><code>public IQueriable&lt;MyObject&gt; GetMyObjects(int someParameterA, int someParameterB)\n{...}</code></p>\n\n<p>Basically, a method that, depending on the passed parameters, will output a collection of rather complex objects.</p>\n\n<p>Since the application is under development, I can use a local SQL instance and I've created a method which will populate this DB with some sample data, so the service has something to work with.</p>\n\n<p>I don't have much experience in writing unit tests. OK, I'll be honest, I don't have ANY experience in writing unit tests. -_- And most of the examples I saw were for methods that do some calculations and return a single result. It is thus possible to attach a data source for the test with test cases. If a method was to return the sum of two numbers, the data source would consist of three columns: the two numbers and the expected result.</p>\n\n<p>So, with my limited knowledge about unit tests, I'm trying to apply the same logic to test a method that returns a collection... and I've no idea what the test should consist of (I know I could easily test the number of returned elements), let alone what the test data source with test cases should look like.</p>\n\n<p>I know the VS2010 has <code>CollectionAssert</code>, but I guess my problem is that I don't know how to create the \"expected\" values in this case.</p>\n\n<p>What's the best way to approach unit tests for such methods?</p>\n"},{"tags":["java","spring","unit-testing","rest","servlets"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12815883,"title":"Passing an HTTP call inside a test context","body":"<p>I am trying to unit test a Spring bean I implemented, but come across a difficulty here. This bean is to call a distant REST service on certain occasions.</p>\n\n<p>However, in my tests, I would like it to call a mock servlet <em>inside</em> my test context, not a distant server.</p>\n\n<p>The call is made using Apache's httpclient library, the URL is set in the applicationContext (so I can provide any fake URI to the bean when testing). The service should return a stream.</p>\n\n<p>The call looks like the following:</p>\n\n<pre><code>HttpClient client = new DefaultHttpClient();\nURIBuilder builder = new URIBuilder(theURIProvidedInContext);\n// set parameters on builder\nURI uri = builder.build();\n\nHttpGet get = new HttpGet(uri);\nHttpEntity entity = client.execute(get).getEntity();\nreturn entity.getContent();\n</code></pre>\n\n<p>I searched Google all morning but only found how to unit-test servlets. Can anybody give some insight here?</p>\n"},{"tags":["java","multithreading","unit-testing","powermock"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12853828,"title":"how to test a thread using powermock?","body":"<p>There's a piece of code im trying to test,</p>\n\n<p>which goes something like this:</p>\n\n<pre><code>class Foo {\n    //do some operations\n    SwingUtilities.invokeLater(new Runnable() {\n        public void run() {\n            //some piece of code\n        }\n    }\n}\n</code></pre>\n\n<p>So how do i test the code within the run function.\nI am using powermock, </p>\n\n<p>The thread is started in another class so i should not invoke it there right??</p>\n\n<p>im still a beginner.</p>\n"},{"tags":["php","unit-testing","testing","correctness"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":509,"score":3,"question_id":762192,"title":"Assert multiple conditions in a single test, or split into multiple tests?","body":"<p>If you were testing a count function like the one below, is it considered to be 'right' or 'wrong' to test multiple things for the function in one function vs having a test function for each of the tests?</p>\n\n<pre><code>    function testGetKeywordCount()\n    {\n        $tester = $this-&gt;getDatabaseTester($this-&gt;CompleteDataFile);\n\n        $tester-&gt;onSetUp();\n\n        $KeywordID = 0;\n\n        $this-&gt;setExpectedException('InvalidArgumentException');\n        $this-&gt;keyword-&gt;getKeywordCount($KeywordID,'Active');\n\n        $KeywordID = 1;\n\n        $this-&gt;setExpectedException('InvalidArgumentException');\n        $this-&gt;keyword-&gt;getKeywordCount($KeywordID,'InvalidStatus');\n\n        $this-&gt;assertEquals(1, $this-&gt;keyword-&gt;getKeywordCount($KeywordID,'Active'));\n\n        $tester-&gt;onTearDown();\n    }\n</code></pre>\n"},{"tags":["c#","unit-testing","delegates","moq"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":152,"score":4,"question_id":10998455,"title":"Verifying a delegate was called with Moq","body":"<p>i got a class that gets by argument a delegate.\nThis class invokes that delegate, and i want to unit test it with Moq.\nhow do i verify that this method was called ?</p>\n\n<p>example class :</p>\n\n<pre><code>public delegate void Foo(int number);\n\npublic class A\n{\n   int a=5;\n\n   A (Foo myFoo)\n   {\n      Foo(a);\n   }\n}\n</code></pre>\n\n<p>and I want to check that Foo was called.\nThank you.</p>\n"},{"tags":["php","linux","unit-testing","netbeans","phpunit"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":4050,"score":6,"question_id":6063045,"title":"Problems with PHPUnit (Linux) - PHP Fatal Error","body":"<p>I successfully installed PHPUnit on my desktop PC and decided to have it on my laptop PC, but... then I try to create PHPUnit test Netbeans throws an error \"Selected PHPUnit (version ?.?.?) is to old, upgrade it if possible (the minimum version is 3.3.0).\".</p>\n\n<p>Of course my PHPUnit version is newer - 3.5.5-2. Where is the problem?</p>\n\n<p>I am using </p>\n\n<ul>\n<li>Ubuntu 11.04</li>\n<li>Netbeans 6.9</li>\n<li>PEAR Version: 1.9.1</li>\n<li>PHP Version: 5.3.5-1ubuntu7.2</li>\n<li>Zend Engine Version: 2.3.0</li>\n</ul>\n\n<p>As I understand the problem is with PHPUnit. When I try to call \"phpunit\" command in terminal I receive PHP Fatal error:</p>\n\n<pre><code>root@ubuntu:~# phpunit –version\nPHP Warning:  require_once(PHP/CodeCoverage/Filter.php): failed to open stream: No such file or directory in /usr/bin/phpunit on line 38\nPHP Stack trace:\nPHP   1. {main}() /usr/bin/phpunit:0\nPHP Fatal error:  require_once(): Failed opening required 'PHP/CodeCoverage/Filter.php' (include_path='.:/usr/share/php:/usr/share/pear') in /usr/bin/phpunit on line 38\nPHP Stack trace:\nPHP   1. {main}() /usr/bin/phpunit:0\nroot@ubuntu:~# find / -name CodeCov*\nroot@ubuntu:~#\n</code></pre>\n\n<p>As you can see there is no such file or folder in my PC. What to do?</p>\n\n<p>I tried to reinstall it many times (with apt-get, pear, Synaptic PM...), but always get the same result.</p>\n"},{"tags":["unit-testing","ios5"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12588544,"title":"DIfficulty mocking core data objects","body":"<p>I am running unit testing for a model file which uses core data. The test target builds successfully, but i am seeing the following errors : </p>\n\n<p>error: testThatDistinguishedFolderTypeForTheAccountExists (FolderDALTests) failed: +entityForName: could not locate an entity named 'Folder' in this model.</p>\n\n<p>error: testThatFindByExchageAccountReturnsFolders (FolderDALTests) failed: +entityForName: could not locate an entity named 'ExchangeAccount' in this model.</p>\n\n<p>However, i feel that the problem is caused due to the \"setup\" method, where the NSManagedObjectModel is not created using merging all the models found in bundles.</p>\n\n<pre><code>-(void)testThatDistinguishedFolderTypeForTheAccountExists\n {\n   Folder *inbox = [NSEntityDescription insertNewObjectForEntityForName:@\"Folder\" \n   inManagedObjectContext:self.context];\n   inbox.distinguishedFolderType = @\"inbox\";\n   ExchangeAccount *account = [NSEntityDescription insertNewObjectForEntityForName:@\"ExchangeAccount\" inManagedObjectContext:self.context];\n   id&lt;FolderProtocol&gt; folder = [FolderDAL findWithAccount:account DistinguishedFolderType:@\"inbox\" withManagedContext:self.context];\n\nSTAssertTrue([folder.folderDistinguishedFolderType isEqualToString:@\"inbox\"], @\"Unable to find the folder with the given distinguished type\");\n</code></pre>\n\n<p>}</p>\n\n<p>And the other method is : </p>\n\n<pre><code>- (void)testThatFindByExchageAccountReturnsFolders\n  {\n      ExchangeAccount *account = [NSEntityDescription          insertNewObjectForEntityForName:@\"ExchangeAccount\" inManagedObjectContext:self.context];\n\n     Folder *inbox = [NSEntityDescription insertNewObjectForEntityForName:@\"Folder\"     inManagedObjectContext:self.context];\n     inbox.displayName = @\"Inbox\";\n     inbox.exchangeAccount = account;\n\n     Folder *calendars = [NSEntityDescription insertNewObjectForEntityForName:@\"Folder\" inManagedObjectContext:self.context];\n     calendars.displayName = @\"Calendars\";\n     calendars.exchangeAccount = account;\n\n     NSArray *folders = [FolderDAL findByExchangeAccount:account withContext:self.context];\n\n     STAssertTrue([folders count] &gt; 0, @\"No folders were returned\");\n  }\n</code></pre>\n\n<p>The setup method is : </p>\n\n<pre><code>- (void)setUp\n{\n  [super setUp];\n\n  NSManagedObjectModel *objectModel = [NSManagedObjectModel mergedModelFromBundles:[NSArray arrayWithObject:[NSBundle mainBundle]]];\n  NSPersistentStoreCoordinator *storeCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:objectModel];\n  STAssertTrue([storeCoordinator addPersistentStoreWithType:NSInMemoryStoreType configuration:nil URL:nil options:nil error:NULL] ? YES : NO, @\"Should be able to add in-memory store\");\n  self.context = [[NSManagedObjectContext alloc] init];\n  self.context.persistentStoreCoordinator = storeCoordinator;\n</code></pre>\n\n<p>}</p>\n\n<p>Here, \"Folder\" and \"ExchangeAccount\" are the core data entities. And their corresponding DAL(Data Access Layer) files have some of their business logic</p>\n"},{"tags":["python","string","unit-testing","subprocess","pyunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12852764,"title":"Error comparing long string output in Python test","body":"<p>I'm testing a Python script who throws a bunch of bytes (as a string) as the result of his execution.</p>\n\n<p>Firstly, I get the result with: </p>\n\n<pre><code>myOutput = subprocess.check_output([\"python\",\"../src/myScript.py\"])\n</code></pre>\n\n<p>With this, I execute the script and get the output.  </p>\n\n<p>Then I compare this result with a really long expected output:</p>\n\n<pre><code>expOutput = \"382d006e756c6c2c7465737453657450726f706572747953823c75652c6c75614170702c63617074696f6e2c486f6c61206d756e646f203200\"\nself.assertEqual(myOutput, expOutput, \"Script output is not the expected\") \n</code></pre>\n\n<p>(It's just a silly test, I'm trying the get things to work).</p>\n\n<p><strong>Problem:</strong> My test FAILS. Debugging I founded the values are equal.</p>\n\n<p>Can anyone help me? </p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net","unit-testing","testing","automated-tests"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12851409,"title":"UnitTest .Net with Ajax Application","body":"<p>I need make some unit test or some kind of testing which make me help to every time easily to check all my forms are working correctly. </p>\n\n<p>I am developing all application in .Net with c#. but with HTML controls only not a single .Net control.</p>\n\n<p>Mostly work with jQuery Ajax for posting form.</p>\n\n<p>How do I make some testing which help me for all validation. and all front validation is working good and database entry is going good.</p>\n"},{"tags":["c","unit-testing","design","hashmap"],"answer_count":3,"favorite_count":6,"up_vote_count":3,"down_vote_count":0,"view_count":3450,"score":3,"question_id":838404,"title":"Implementing a HashMap","body":"<p>How to go about creating a Hashmap in C from scratch ? \nWhat would be the parameters taken into consideration and what how would you test the hashmap as to how good it is ? As in what would be benchmark test cases which you require to run before you say that your hash map is complete.</p>\n"},{"tags":["unit-testing","tfs2010","continuous-integration","build-automation"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":548,"score":4,"question_id":9071807,"title":"TFS Build and Test Impact","body":"<p>I'm playing around with the Test Impact feature of TFS build.\nIt seems like you cannot use this feature if you are using a .vsdmi file, but only if you use a .testsettings file (although the VSDMI file includes a reference to the test settings file).</p>\n\n<p>I have allowed Test Impact in the test settings file, and so on the TFS build configuration.\nThe reason I need to use the VSDMi file is that I created a test  list that i want to be executed in CI. The problem is that all builds show \"No Impacted Test\" though I know there are some.</p>\n\n<p>Am I missing something here? Please find attached the vsdmi file, the testsettings file and a snapshot of the TFS build configuration.</p>\n\n<p><img src=\"http://i.stack.imgur.com/wejl7.png\" alt=\"Config\"></p>\n\n<p>Here is the content of the .testsettings file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;TestSettings name=\"Master\" id=\"68af9170-92f5-49d8-83dd-827359a79042\" xmlns=\"http://microsoft.com/schemas/VisualStudio/TeamTest/2010\"&gt;\n  &lt;Description&gt;These are default test settings for a local test run.&lt;/Description&gt;\n  &lt;Deployment&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Data.Test\\TpEnvFileParser\\InputFiles\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Fake\\FakeData\\HSW\\Resources\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Tpie.Engines.Build\\Tpie.Engines.Build.Test\\ExpectedFiles\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Tpie.Engines.Build\\Tpie.Engines.Build.Test\\Resources\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Model\\bin\\Debug\\TerraEntitiesModel.ssdl\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Model\\bin\\Debug\\TerraEntitiesModel.csdl\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Data.Test\\PListFileParser\\InputFiles\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Model\\bin\\Debug\\TerraEntitiesModel.msl\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Tpie.Client\\Tpie.Client.Common.Test\\ExcelParsers\\InputFiles\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Tpie.Engines.Build\\Tpie.Engines.Build.TestProgram\\Templates\\\" /&gt;\n  &lt;/Deployment&gt;\n  &lt;Execution&gt;\n    &lt;ExecutionThread apartmentState=\"MTA\" /&gt;\n    &lt;Timeouts runTimeout=\"1800000\" testTimeout=\"300000\" /&gt;\n    &lt;TestTypeSpecific&gt;\n      &lt;UnitTestRunConfig testTypeId=\"13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b\"&gt;\n        &lt;AssemblyResolution&gt;\n          &lt;TestDirectory useLoadContext=\"true\" /&gt;\n        &lt;/AssemblyResolution&gt;\n      &lt;/UnitTestRunConfig&gt;\n      &lt;WebTestRunConfiguration testTypeId=\"4e7599fa-5ecb-43e9-a887-cd63cf72d207\"&gt;\n        &lt;Browser name=\"Internet Explorer 7.0\"&gt;\n          &lt;Headers&gt;\n            &lt;Header name=\"User-Agent\" value=\"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)\" /&gt;\n            &lt;Header name=\"Accept\" value=\"*/*\" /&gt;\n            &lt;Header name=\"Accept-Language\" value=\"{{$IEAcceptLanguage}}\" /&gt;\n            &lt;Header name=\"Accept-Encoding\" value=\"GZIP\" /&gt;\n          &lt;/Headers&gt;\n        &lt;/Browser&gt;\n      &lt;/WebTestRunConfiguration&gt;\n    &lt;/TestTypeSpecific&gt;\n    &lt;AgentRule name=\"LocalMachineDefaultRole\"&gt;\n      &lt;DataCollectors&gt;\n        &lt;DataCollector uri=\"datacollector://Microsoft/TestImpact/1.0\" assemblyQualifiedName=\"Microsoft.VisualStudio.TraceCollector.TestImpactDataCollector, Microsoft.VisualStudio.TraceCollector, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\"&gt;\n        &lt;/DataCollector&gt;\n      &lt;/DataCollectors&gt;\n    &lt;/AgentRule&gt;\n  &lt;/Execution&gt;\n&lt;/TestSettings&gt;\n</code></pre>\n\n<p>And here is the .vsmdi file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;TestLists xmlns=\"http://microsoft.com/schemas/VisualStudio/TeamTest/2010\"&gt;\n  &lt;TestList name=\"TPIE Auto Build\" id=\"2cbc1525-8079-4959-a126-4d4fb8fdb803\" parentListId=\"8c43106b-9dc1-4907-a29f-aa66a61bf5b6\"&gt;\n    &lt;TestLinks&gt;\n      &lt;TestLink id=\"ee8dae77-c23e-df6b-c6b5-4be930087750\" name=\"LevelTestConditionGroupCheckCalculationDataTypeVoltageTest\" storage=\"..\\tpie.client\\tpie.client.common.test\\bin\\debug\\tpie.client.common.test.dll\" type=\"Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestElement, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.ObjectModel, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n      &lt;TestLink id=\"74441000-f8e5-ac1b-fbd6-bb94da0bf3ce\" name=\"LevelPowerSequenceBlockCheckSequenceElementTest\" storage=\"..\\tpie.client\\tpie.client.common.test\\bin\\debug\\tpie.client.common.test.dll\" type=\"Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestElement, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.ObjectModel, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n      &lt;TestLink id=\"afb21bed-4eff-9f9f-7e58-c72e7d133b32\" name=\"TestGetMiscEnvironmentVariables\" storage=\"..\\server\\terra.binmatrix.server.test\\bin\\debug\\terra.server.bl.test.dll\" type=\"Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestElement, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.ObjectModel, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n    &lt;/TestLinks&gt;\n  &lt;/TestList&gt;\n  &lt;TestList name=\"Lists of Tests\" id=\"8c43106b-9dc1-4907-a29f-aa66a61bf5b6\"&gt;\n    &lt;RunConfiguration id=\"68af9170-92f5-49d8-83dd-827359a79042\" name=\"Master\" storage=\"master.testsettings\" type=\"Microsoft.VisualStudio.TestTools.Common.TestRunConfiguration, Microsoft.VisualStudio.QualityTools.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n  &lt;/TestList&gt;\n&lt;/TestLists&gt;\n</code></pre>\n\n<p>Thanks,\nBusi</p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12822886,"title":"Individual timeout in nose multiprocessing plugin","body":"<p>I have started using nose to run tests. I discovered the multiprocessing plugin has a timeout, that I can change on the command line.</p>\n\n<p>Is there a way to extend the timeout for individual tests (in the test code) so I don't have a massive global timeout?</p>\n"},{"tags":["ruby-on-rails-3","unit-testing","rspec-rails","rails-postgresql","pg"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12847945,"title":"Cannot create test database in rails 3.2 with postgres","body":"<p>This is an extremely strange one.  Im trying to do a simple <code>rake db:test:clone</code> or create and no matter what I do, from clearing the gemset to trying all sorts of database.yml configs, Im getting the oddest error:</p>\n\n<pre><code>LINE 1: CREATE DATABASE \"tdt_test\"0.0\n</code></pre>\n\n<p>Has anyone ever seen anything like this before?  WTF is that \"0.0!?\" Im running Rails 3.2, RSpec and pg gem 0.14.1</p>\n\n<pre><code> 04:15 PM ~/projects/dmvcs (feature/helpdesk) =&gt; RAILS_ENV=test rake db:create\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require': iconv will be deprecated in the future, use String#encode instead.\n  Notice: for 10x faster LSI support, please install http://rb-gsl.rubyforge.org/\n  PG::Error: ERROR:  syntax error at or near \"0.0\"\n  LINE 1: CREATE DATABASE \"tdt_test\"0.0\n                                    ^\n  : CREATE DATABASE \"tdt_test\"0.0\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:654:in `async_exec'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:654:in `block in execute'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:653:in `execute'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:768:in `create_database'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:107:in `rescue in create_database'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:51:in `create_database'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (3 levels) in &lt;top (required)&gt;'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `each'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (2 levels) in &lt;top (required)&gt;'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'\n  /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `&lt;top (required)&gt;'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `&lt;main&gt;'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/bin/ruby_noexec_wrapper:14:in `eval'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/bin/ruby_noexec_wrapper:14:in `&lt;main&gt;'\n  Couldn't create database for {\"adapter\"=&gt;\"postgresql\", \"encoding\"=&gt;\"unicode\", \"database\"=&gt;\"tdt_test\", \"username\"=&gt;\"jlippiner\", \"pool\"=&gt;5, \"password\"=&gt;nil}\n  /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:167:in `block in non_options': file not found: db:create (ArgumentError)\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:146:in `map!'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:146:in `non_options'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:207:in `non_options'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:52:in `process_args'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:891:in `_run'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:21:in `run'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'\n</code></pre>\n"},{"tags":["c++","unit-testing","boost"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12847709,"title":"How to pause a Boost unit test?","body":"<p>I'm writing a unit test for a timer I created and I'm running into a problem I encounter often with other projects. I would like to create a unit test that starts my timer, waits a few moments, and then checks the value of my timer after the timer has been run. I could then test all the functionality I have in my timer. </p>\n\n<p>Is there a way to do this? I don't see anything in the documentation. If this is not a good practice, please advise what I should do instead.</p>\n"},{"tags":["javascript","unit-testing","confirm","js-test-driver"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":167,"score":0,"question_id":7965292,"title":"How to handle Confirm Box within JsTestDriver","body":"<p>I am using JsTestDriver for unit tests in JS. One section of my code uses a confirm box to allow users to confirm or cancel a decision.</p>\n\n<p>How to I test both the confirm and cancel selections of this confirm box automatically within the scope of JsTestDriver</p>\n"},{"tags":["c#","unit-testing","visual-studio-2008","binaryfiles"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12847773,"title":"How to UnitTest in VisualStudio 2008 looking up records from a DataSet (created by reading a binary file)","body":"<p>I am writing a unit test for how to build retrieval strings from selected records.  I want to initialize my test method so it can get records from the DataSource.  However, my application doesn't use SQL.  It is a desktop C# .NET application that creates a DataTable from binary files.  Should I find some other way besides unit testing to test building the retrieval strings?  The application always creates the DataTable by reading the files.  We don't have a SQL database.  Should I be creating one for testing?  Then how can I test whether the DataSource is created properly if I can't read the files in my unit test?  And how do all the developers who run unit tests get the same file (where to deploy the SQL file and/or the binary files used to create it).</p>\n"}]}
{"total":15322,"page":8,"pagesize":100,"questions":[{"tags":["java","unit-testing","struts2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12838521,"title":"Unit testing in struts 2: Not able to inherit protected variables","body":"<p>I have a weird problem. I created a test class by extending <code>StrutsTestCase</code>.</p>\n\n<pre><code>   public class MyActionTest extends StrutsTestCase{\n\n      public void helloTest()\n      {\n\n      }\n  }\n</code></pre>\n\n<p>The struts documentation says <code>request</code> of <code>MockHttpServletRequest</code> will be available by extending <code>StrutsTestCase</code>. Fair enough, it's a protected variable in <code>StrutsTestCase</code> so we should have access to it once we extend the class.</p>\n\n<p>But for some reason, NO protected attribute or method of <code>StrutsTestCase</code> is visible in my <code>MyActionTest</code>.</p>\n\n<p>I don't know if I am missing something, but everything seems straight forward, but yet doesn't work.</p>\n\n<p>Any idea as to why the protected methods of super class are not accessible in subclass ? Should I use some specific package or something ?</p>\n\n<p>List of jars I use for this task :</p>\n\n<ol>\n<li>spring-2.5.3.jar</li>\n<li>spring-mock-1.2.6.jar</li>\n<li>struts2-core-2.0.11.jar</li>\n<li>xwork-core-2.3.1.jar</li>\n</ol>\n\n<p>Am I missing  something ?</p>\n"},{"tags":[".net","visual-studio-2010","unit-testing","mstest"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12845394,"title":"Unable to execute test","body":"<p>Any one got any ideas on whats going on. Visual Studio does not execute my tests, the test runner just sits there. \nSee image below where i created a new project, a new test project with a single test. </p>\n\n<p><img src=\"http://i.stack.imgur.com/FLn05.jpg\" alt=\"Screen shoot of test run\"></p>\n"},{"tags":["unit-testing","grails","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3260,"score":0,"question_id":1209080,"title":"Grails domain unit testing - mockFor()","body":"<p>This is the domain class:</p>\n\n<pre><code>class Registration {\n\n  String email\n  String generatedKey\n\n  def beforeInsert = {\n      String newToken = GlobalHelper.getRandomString()\n      generatedKey = newToken\n  }\n}\n</code></pre>\n\n<p>and this is the relevant part of the unit test:</p>\n\n<pre><code>    def c = mockFor(GlobalHelper)\n    c.demand.static.getRandomString {-&gt; return \"nestoABC\" }\n    c.createMock()\n    reg.beforeInsert()\n</code></pre>\n\n<p>When running the test, I get this error:</p>\n\n<p><hr /></p>\n\n<p>No such property: GlobalHelper for class: RegistrationTests</p>\n\n<p>groovy.lang.MissingPropertyException: No such property: GlobalHelper for class: RegistrationTests\nat RegistrationTests.testConstraints(RegistrationTests.groovy:57)</p>\n\n<p><hr /></p>\n\n<p>The GlobalHelper class is located in Groovy source folder, and the mentioned line 57 is the line with the mockFor() method.</p>\n\n<p>Grails Testing docs were not very helpfull regarding this issue...</p>\n\n<p>I know this would be easily solved using integration tests, but I think it should also work this way.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["unit-testing","embedded","continuous-integration","embedded-linux"],"answer_count":5,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":1055,"score":10,"question_id":5904335,"title":"Continuous Integration/ Unit testing in embedded C++ systems","body":"<p>What tools are generally used for unit testing and especially continuous integration for embedded systems?</p>\n\n<p>I am especially thinking that you usually have to cross-compile and deploy, and also that you can't easily visualize the target platform.  Also it can be difficult to run test-code and frameworks.</p>\n\n<p>What could I use too alleviate these difficulties?</p>\n\n<p>(I think it should be some kind of dual targeting, where the build server runs its tests on a easier target) </p>\n"},{"tags":["c#","unit-testing","asynchronous","task-parallel-library"],"answer_count":3,"favorite_count":6,"up_vote_count":12,"down_vote_count":0,"view_count":299,"score":12,"question_id":7852960,"title":"How to write unit tests with TPL and TaskScheduler","body":"<p>Imagine a function like this:</p>\n\n<pre><code>private static ConcurrentList&lt;object&gt; list = new ConcurrentList&lt;object&gt;();\npublic void Add(object x)\n{\n   Task.Factory.StartNew(() =&gt;\n   {\n      list.Add(x); \n   }\n}\n</code></pre>\n\n<p>I don't care WHEN exactly the fentry is added to the list, but i need it to be added in the end ( obviously ;) )</p>\n\n<p>I don't see a way to properly unittest stuff like this without returning any callback-handler or sth. and therefor adding logic that's not required for the program</p>\n\n<p>How would you do it?</p>\n"},{"tags":["asp.net","visual-studio-2010","unit-testing"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2858,"score":3,"question_id":5713926,"title":"VS2010 and ASP.NET unit test problems / WebHostAdapter exception","body":"<p>I've spent half a day trying to get an ASP.NET unit test to work as described in <a href=\"http://www.gangleri.net/2007/12/29/UnitTestingASPNetApplicationsWithVisualStudio2008.aspx\" rel=\"nofollow\">Alan's Development Blog</a>. I don't have VS2008 but VS2010 with SP1 and Resharper 5.1, and no matter what I try I just run into different kinds of errors. </p>\n\n<p>When I add a test project with a test method as follows and specify .NET 4 as target framework, I run into exception</p>\n\n<p><strong>Updated to show more detailed information about the exception</strong></p>\n\n<p><em>\"The test adapter 'WebHostAdpater' threw an exception while running test 'TestMethod1'. The web site could not be configured correctly; getting ASP.NET process information failed. Requesting 'http://localhost:49676/VSEnterpriseHelper.axd' returned an error: The remote server returned an error: (500) Internal Server Error...\"</em></p>\n\n<pre><code>[TestMethod]\n[HostType( \"ASP.NET\" )]\n[UrlToTest( \"http://localhost:49676/Default.aspx\" )]\n[AspNetDevelopmentServerHost( @\"C:\\...\\Projects\\ProjectX\\ProjectX\\\", \"/Default.aspx\") ]\npublic void TestMethod1()\n{\n\n}\n</code></pre>\n\n<p>I've performed numerous searches on the internet regarding this error message, but never really found a solution - I tried adding a section so all users would be allowed access to \"VSEnterpriseHelper.axd\" which is also mentioned in the error message, but it didn't help.</p>\n\n<p>Trying to set the test project's target framework to .NET 3.5 also doesn't help and returns the same error.</p>\n\n<p>While playing around with different settings I also happened to get the error message that the assembly \"Microsoft.VisualStudio.QualityTools.CommandLine\" couldn't be loaded, even though I added the correct version (with the correct public key token) as reference.</p>\n\n<p>Maybe the combination of things (ReSharper, .NET target framework, ...) messes things up, but I also tried disabling the ReSharper unit testing so that MSTest would be used, unfortunately to no avail.</p>\n\n<p>The description in Alan's blog post seems to be quite straightforward, but it doesn't want to work for me.</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>I also tried to run the example projects from Alan's page in VS2008, but the error is still the same as in VS2010 SP1.</p>\n\n<p><strong>Update 3</strong></p>\n\n<p>Still no luck, but I've added the file <em>Microsoft.VisualStudio.Enterprise.AspNetHelper.dll</em> (located in <em>%PROGRAMFILES%\\Microsoft Visual Studio 10.0\\Common7\\IDE\\PrivateAssemblies</em>) to the web.config as a <em>ConfigurationErrorException</em> in the Windows Event Log indicated that this file was not found:</p>\n\n<pre><code>&lt;dependentAssembly xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n    &lt;assemblyIdentityVersion name=\"Microsoft.VisualStudio.Enterprise.AspNetHelper\" publicKeyToken=\"b03f5f7f11d50a3a\" culture=\"neutral\" /&gt;\n    &lt;codeBase version=\"10.0.0.0\" href=\"file:///C:/Program%20Files%20(x86)/Microsoft%20Visual%20Studio%2010.0/Common7/IDE/PrivateAssemblies/Microsoft.VisualStudio.Enterprise.AspNetHelper.dll\" /&gt;\n&lt;/dependentAssembly&gt;\n</code></pre>\n\n<p>This fixed the problem with the AspNetHelper.dll, but I get the same error message for the <em>AspNetAdatpter</em>, but amending the web.config in the same way doesn't work as the error persists. Within Visual Studio I can also see that (when I try to add a handler entry as shown below) the <em>QualityTools.HostAdapters.ASPNETAdapter</em> part is shown in red, indicating in a tooltip \"Cannot resolve symbol 'QualityTools'\":</p>\n\n<pre><code>&lt;add name=\"HostAdapter\" verb=\"GET\" path=\"ASPNETAdapter\" type=\"Microsoft.VisualStudio.QualityTools.HostAdapters.ASPNETAdapter, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n</code></pre>\n\n<p>This is all a big mess, and it seems I've completely lost track, why does it seem to be impossible to run ASP.NET unit tests within VS2010? Is there nobody else who's got the same kind of problems (or, ask the question differently, is there anybody who can run ASP.NET unit test in VS2010 without problems)?</p>\n\n<p>Still trying to get things working...</p>\n\n<p><strong>Update 4</strong></p>\n\n<p>Still no luck, am I the only one? Who can run such tests?</p>\n\n<p><strong>End of update</strong></p>\n\n<p>Any ideas what I'm doing wrong here? Thanks in advance for any pointers into the right direction</p>\n\n<p>G.</p>\n"},{"tags":["java","unit-testing","struts2","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12839655,"title":"How to test struts 2.0.x applications","body":"<p>How do we test action classes of Applications written in 2.0.x version?</p>\n\n<p>I read through <a href=\"http://struts.apache.org/2.x/docs/junit-plugin.html\" rel=\"nofollow\">this link</a> and found out that, struts-junit plugin is only available for struts 2.1.1 or later.</p>\n\n<p>My application is written using struts 2.0.11 and I don't think upgrading the version is easy in my project.</p>\n\n<p>How do we unit test Action classes,given these limitations ?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12840020,"title":"Why visual studio perform skipping tests?","body":"<p>I try to run Visual Studio tests in ASP.NET MVC by pressing \"Run All\" but all tests was skipped, why it happend, how to run all tests? Here is screenshot:</p>\n\n<p><img src=\"http://i.stack.imgur.com/M89Mt.png\" alt=\"enter image description here\"></p>\n"},{"tags":["unit-testing","node.js","requirejs","require","mocha"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12836030,"title":"What is the cost of require() in node.js?","body":"<p>I have a test suite using <code>mocha.js</code> that I run to ensure that everything works as it should. For every module I require, I notice about 100ms increase in testing time. And that's on a powerful quad-core machine with 8GB of memory.</p>\n\n<p>What is the real cost of calling <code>require</code> and does it affect application performance or only testing performance?</p>\n\n<p>Version of node is <code>0.8.11</code> if that's relevant.</p>\n"},{"tags":[".net","unit-testing","collections","autofixture","semantic-comparison"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":164,"score":7,"question_id":11718761,"title":"Applying [AutoFixture] SemanticComparison OfLikeness to sequences / collections / arrays / IEnumerable","body":"<p>We have written a test which looks like the following. This test requires that we have created en <code>Equal</code>-overload for the <code>CodeTableItem</code>-class:</p>\n\n<pre><code>ICollection&lt;CodeTableItem&gt; expectedValutaList = new List&lt;CodeTableItem&gt;();\nexpectedValutaList.Add(new CodeTableItem(\"DKK\", \"DKK\"));\nexpectedValutaList.Add(new CodeTableItem(\"EUR\", \"EUR\"));\nRepoDac target = new RepoDac(); \n\nvar actual = target.GetValutaKd();\n\nCollectionAssert.AreEqual(expectedValutaList.ToList(),actual.ToList());\n</code></pre>\n\n<p>The test works fine, but has the unfortunate dependency to the <code>Equality</code>-function, meaning if I extend the <code>CodeTableItem</code>-class with one more field, and forgets to extend the <code>Equals</code>-function, the unit test still runs green, although we do not test for all fields. We want to avoid this <code>Equality</code> pollution (see <a href=\"http://xunitpatterns.com/test-specific%20equality.html\" rel=\"nofollow\">Test Specific Equality</a>), which has been written only  to conform to the test.</p>\n\n<p>We have tried using <code>OfLikeness</code>, and have rewritten the test in this way:</p>\n\n<pre><code>ICollection&lt;CodeTableItem&gt; expectedValutaList = new List&lt;CodeTableItem&gt;();\nexpectedValutaList.Add(new CodeTableItem(\"DKK\", \"DKK\"));\nexpectedValutaList.Add(new CodeTableItem(\"EUR\", \"EUR\"));\nvar expectedValutaListWithLikeness = \n          expectedValutaList.AsSource().OfLikeness&lt;List&lt;CodeTableItem&gt;&gt;();\n\nRepoDac target = new RepoDac(); \nICollection&lt;CodeTableItem&gt; actual;\n\nactual = target.GetValutaKd();\n\nexpectedValutaListWithLikeness.ShouldEqual(actual.ToList());\n</code></pre>\n\n<p>But the test fails because the <code>Capacity</code> is not equal. I have written code that runs through reflection many times, and typically ended up implementing overloads for ignoring fields. Is there a way to ignore certain fields with the <code>OfLikeness</code> or <code>ShouldEqual</code>? Or is there some other way of solving this issue?</p>\n"},{"tags":["ruby-on-rails","unit-testing","rspec","factory-girl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12836677,"title":"Factory Girl: can one reopen factory definitions and complete them?","body":"<p>Hi have this special use case, in which I have to define a factory in one file without a certain parameter, and then insert it in the factory definition later. This is a case where I am importing factory definitions from an external dependency (gem, plugin, whtv) and I need to extend it in my project. Something like: </p>\n\n<pre><code># external def\nFactoryGirl.define do\n  factory :user do\n    email \"somebody@somebodysworld.com\"\n  end\nend\n\n\n# proj def\nFactoryGirl.define do\n  factory :user do\n    password \"qwerty\"\n  end\nend\n</code></pre>\n\n<p>this code doesn't work, cuz factory girl thinks I'm redefining the factory. But what I'd really want would be extending it. Is this possible?</p>\n"},{"tags":["spring","hibernate","unit-testing","cucumber","hibernate-4.x"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12836548,"title":"How to exposeTransactionAware on a 2nd sessionFactory in hibernate4 + spring?","body":"<p>The test below was working in my application with Hibernate3. When I upgraded it to hibernate4, it started failing.</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(inheritLocations=false,locations={\n\"/hibernate/spring-SF-tests.xml\",\n\"/hibernate/spring-transaction.xml\",\n\"/hibernate/testBeans.xml\"\n,\"/hibernate/spring-audit.xml\",\n\"/hibernate/iwrs-mail-beans-test.xml\",\n\"/hibernate/fake-audit-meaning.xml\"\n})\n@TransactionConfiguration(transactionManager=\"txManager\", defaultRollback=true)\npublic class CodeAuditIntegrationTest extends CodeIntegrationTest {\n\n@Autowired\nprivate SessionFactory auditFactory;\n\n\n@Before\npublic void cleanAudit(){\nauditFactory.getCurrentSession().createQuery(\"delete from AuditLogRecord\").executeUpdate();\n}\n\n@Test\npublic void clinicalTrialAssociationTest() {\nsuper.clinicalTrialAssociationTest();\n}\n\n}\n</code></pre>\n\n<p>Which is failing with:</p>\n\n<blockquote>\n  <p>org.hibernate.HibernateException: No Session found for current thread\n    at\n  org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)\n    at\n  org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:881)</p>\n</blockquote>\n\n<p>I have 2 different session factories in my app: sessionFactory and auditFactory. Both are configured in spring (see [1]).</p>\n\n<p>The problem is that in an hibernate4 configuration <strong>the property exposeTransactionAwareSessionFactory was removed</strong>. I had that set to true for my auditFactory. I believe removing this property makes the injected auditFactory not being able to pick up the session in the transaction (as txManger is configured for sessionFactory), therefore yielding the error.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li><strong>how can I make the auditFactory have transactions managed by spring on this test?</strong></li>\n<li><strong>Is that what was happening with the exposeTransactionAwareSessionFactory property in hibernate 3?</strong></li>\n</ol>\n\n<p>The only alternative I see is to wrap all the code that uses auditFactory in a Helper class annotated with @Transactional(otherTxManager). I did try that, but I got a couple of additional problems there:</p>\n\n<ol>\n<li>I needed to use a separate DataSource (else I'd get [2])</li>\n<li>Using 2 separate datasources I'll get a similar error on my Cucumber tests, now related with the transactionManager [3]</li>\n</ol>\n\n<p>[1] The relavant XML configuration:</p>\n\n<pre><code>&lt;bean id=\"txManager\"\nclass=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n&lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"txManager\" /&gt;\n\n        &lt;bean id=\"sessionFactory\" scope=\"singleton\"\nclass=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n&lt;property name=\"hibernateProperties\"&gt;\n&lt;props&gt;\n&lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2dll}&lt;/prop&gt;\n&lt;prop key=\"hibernate.hbm2ddl.import_files\"&gt;${hibernate.sql_scripts}&lt;/prop&gt;\n&lt;/props&gt;\n&lt;/property&gt;\n&lt;property name=\"packagesToScan\"&gt;...&lt;/property&gt;\n&lt;property name=\"annotatedPackages\"&gt;...&lt;/property&gt;\n&lt;property name=\"mappingLocations\"&gt;...&lt;/property&gt;\n\n&lt;property name=\"dataSource\" ref=\"c3p0DataSource\" /&gt;\n&lt;property name=\"entityInterceptor\" ref=\"auditInterceptor\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"auditFactory\" scope=\"singleton\"\nclass=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n&lt;property name=\"exposeTransactionAwareSessionFactory\"&gt; --&gt;needs to be removed in hibernate4!\n&lt;value&gt;true&lt;/value&gt;\n&lt;/property&gt;\n&lt;property name=\"mappingLocations\"&gt;...&lt;/property&gt;\n&lt;property name=\"packagesToScan\"&gt;...&lt;/property&gt;\n&lt;property name=\"hibernateProperties\"&gt;\n&lt;props&gt;\n&lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2dll}&lt;/prop&gt;\n&lt;/props&gt;\n&lt;/property&gt;\n&lt;property name=\"dataSource\" ref=\"c3p0DataSource\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>[2] Problem with using the same dataSource for the two factories:</p>\n\n<blockquote>\n  <p>org.springframework.transaction.IllegalTransactionStateException: Pre-bound JDBC Connection found! HibernateTransactionManager does not support running within DataSourceTransactionManager if told to manage the DataSource itself. It is recommended to use a single HibernateTransactionManager for all transactions on a single DataSource, no matter whether Hibernate or JDBC access.\n      at org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:329)</p>\n</blockquote>\n\n<p>[3] Problem in cucumber tests due to declaring 2 transaction managers:</p>\n\n<blockquote>\n  <p>org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [org.springframework.transaction.PlatformTransactionManager] is defined: expected single bean but found 2: txAudit,txManager</p>\n</blockquote>\n"},{"tags":["unit-testing","grails"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12835257,"title":"Grails unit testing and bootstrap","body":"<p>I wrote an unit test for a controller.</p>\n\n<p>I have a Bootstrap file which alter the metaclass of domain classes by adding a method <code>asPublicMap()</code>. I use this method in the controller to return domain classes as json but only some selected <em>public</em> fields.</p>\n\n<p>My unit test failed because of <code>MissingMethodException</code> for <code>asPublicMap()</code>. As I understood, bootstrap classes are not loaded for unit tests, only for integration tests. That's why I got this error.</p>\n\n<p>My question is : Is there another place to put metaclass manipulation in order to take them into account during unit tests ?</p>\n"},{"tags":["unit-testing","testing","googletest","gmock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12836287,"title":"gmock unit test","body":"<p>Consider this situation</p>\n\n<pre><code>class A\n{\n   A(){}\n   virtual int Method1(){return 0;}\n};\n\nclass B\n{\n   static int Method2(){ return a.Method1();}\n   A a;\n};\n</code></pre>\n\n<p>I need to test class B, so I want to use mocked Method1 to replace real Method1 but not changing class B's code. variable a of class B is neither pointer nor reference, so is there any ways or walk-around to solve this problem. </p>\n"},{"tags":["html","css","unit-testing","cross-browser","automated-tests"],"answer_count":5,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":2121,"score":1,"question_id":4043706,"title":"Automated testing of CSS and HTML front-end coding","body":"<p>I'm a front-end developer coding CSS, HTML and Javascript (in that order) and most of the work I do is design-lead.  Whilst the quality of the <em>designs</em> I create with CSS is subjective, much of the coding is purely functional / layout and I am interested in any way to automate the testing of my page.</p>\n\n<p>My question can be split into two parts</p>\n\n<ol>\n<li><p>Does anyone have any existing\ntechniques or suggestions for\nautomatically testing CSS or HTML,\nparticularly with regard\ncross-browser compatibility?</p></li>\n<li><p>As CSS can be roughly divided\ninto properties that control layout\nand those that control design, is\nautomated testing only viable for\n<strong>layout</strong> (it can't be possible to\nautomatically and valuably test that\na <em>colour</em> is correct, for example)?  If so, what\nsort of CSS values might be suitable\nfor boolean acceptance tests?</p></li>\n</ol>\n\n<p>Here are my initial examples of boolean layout values that could be tested - there must be others? </p>\n\n<ul>\n<li>Does a pop-up appear above other content (z-index)</li>\n<li>Does a footer clear all other content (float)</li>\n</ul>\n\n<p>Thanks for your help.  Part three of the question is of course \"Am I wasting my time going down this route?\".</p>\n\n<p><em><strong></em>* edit <em>*</em></strong></p>\n\n<p>I have found this article that asks the same questions I've asked, but more in depth and perhaps a little more eloquently.  </p>\n\n<p><a href=\"http://morethanseven.net/2008/10/13/unit-testing-css-looking-solution.html\" rel=\"nofollow\">http://morethanseven.net/2008/10/13/unit-testing-css-looking-solution.html</a></p>\n\n<p>Moving forward I am trying to isolate some examples from my work where CSS alone has caused functional errors however those that I've found so far are bugs with JS <strong>and</strong> CSS combined.  I would still like to automatically test these sorts of errors, but appreciate that with javascript used it is beyond the scope of my original question.</p>\n\n<p><em><strong></em>* edit 2 <em>*</em></strong></p>\n\n<p>I've since blogged about how I set about solving this problem, available here:</p>\n\n<p><a href=\"http://blog.ajcw.com/2010/12/automated-css-testing-or-how-one-css-coder-is-now-responsible-for-breaking-%E2%80%93-and-fixing-%E2%80%93-the-build/\" rel=\"nofollow\">http://blog.ajcw.com/2010/12/automated-css-testing-or-how-one-css-coder-is-now-responsible-for-breaking-%E2%80%93-and-fixing-%E2%80%93-the-build/</a></p>\n"},{"tags":["ios","xcode","unit-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":12363319,"title":"Error running 'Cedar' unit tests from command line","body":"<p>I'm using the cedar testing framework and trying to run the tests from command line.\nThe build crashes with this error:</p>\n\n<pre><code>Unresolved error Error Domain=NSCocoaErrorDomain Code=512 \"The operation couldn’t be completed. (Cocoa error 512.)\" UserInfo=0x6c5c6c0 {reason=Failed to create file; code = 2}, {\nreason = \"Failed to create file; code = 2\";\n}\n</code></pre>\n\n<p>The tests run from xcode without any problems, I just can't get them to work from command line.\nAny ideas?\nThanks</p>\n"},{"tags":["c++","visual-studio-2010","unit-testing","console","visual-studio-express"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1084,"score":4,"question_id":6137009,"title":"Microsoft Visual Studio: How to keep the console open without manually reading input?","body":"<p>I'm writing some C++ with Microsoft Visual Studio 2010 Express, and I'm wondering if there is a way to display command output somewhere in the IDE instead of an external console window, or at least keep that window open.</p>\n\n<p>Reading something from STDIN would work for a console application, but this is a unit test case and I don't want to modify the generated main function. Is there another way?</p>\n"},{"tags":["android","unit-testing","android-resources","android-library"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12822183,"title":"Accessing resource of a library referenced by a referenced project","body":"<p>I have a test project X that tests project Y. Project Y has library Z as reference. library Z has a raw resource R1 which I'm trying to open but I keep getting resource not found. The raw resource is in res/raw folder within the library.</p>\n\n<p>I tried openRawResource with the relevant packageManager but it did not seem to help.\nAny idea? Is there any logical mistake in my resource allocation?</p>\n\n<p>didn't work:</p>\n\n<pre><code>PackageManager pmMgr = getInstrumentation().getTargetContext().getPackageManager();\nResources rMgr = pmMgr.getResourcesForApplication(\"PROJECT.Y.PACKAGE\");\nInputStream is = rMgr.openRawResource(package.library.z.raw.R1);\n</code></pre>\n\n<p>neither did</p>\n\n<pre><code>PackageManager pmMgr = getInstrumentation().getContext().getPackageManager();\nResources rMgr = pmMgr.getResourcesForApplication(\"PROJECT.Y.PACKAGE\");\nInputStream is = rMgr.openRawResource(package.library.z.raw.R1);\n</code></pre>\n\n<p>P.S.\nI verified that R1 is wrapped into the .apk of the referenced project (Y) under res/raw as well.</p>\n"},{"tags":["unit-testing","cakephp","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":103,"score":4,"question_id":11579508,"title":"Cakephp 2.0 mock auth","body":"<p>I am developing an app in Cake 2.2,\nand am currently writing some unit tests.\nThe model tests are working fine, i have some issues with the controller tests in general.</p>\n\n<p>The situation:\n- most of the actions require a user login\n- there are custom components and vendor libraries\n- I have fixtures for all tables</p>\n\n<p>The problem:\n- Many actions use the \"$this->Auth->user()\" method to get the user-data\n- If i write a test for that action, the user-data is (obviously) not existant</p>\n\n<p>My (not working) solution:\n - I tried to mock the auth component, so that it would contain the user-method and always return a static array containing the user data, but it returns null, here's the code:</p>\n\n<pre><code>$Days = $this-&gt;generate('Days', array('components' =&gt; 'Auth'));\n$Days-&gt;Auth-&gt;expects($this-&gt;once())-&gt;method('user')-&gt;will($this-&gt;returnValue(array(..userdata etc.)));\n$result = $this-&gt;testAction('/days/settings');\n</code></pre>\n\n<p>It just keeps saying that the method was not called (altough the settings method inside the Days controller calls it exactly one time).\nWhat is wrong with the mockup? Hmmm..</p>\n\n<p>Any help would be appreciated!</p>\n\n<p>-edit-\nThe code of the method that is being tested:</p>\n\n<pre><code>public function myDays()\n{\n   $user = $this-&gt;Auth-&gt;user();\n   $days = $this-&gt;Day-&gt;find('all', array('conditions' =&gt; array('user_id' =&gt; $user['id'], 'active' =&gt; 1)));\n   $this-&gt;set('days', $days);\n}\n</code></pre>\n"},{"tags":["unit-testing","testing","nunit","signalr"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":347,"score":6,"question_id":10797368,"title":"Unittest SignalR Hubs","body":"<p>I Would like to test my Hub in SignalR, what is the best approach? </p>\n\n<p>Possible solutions I have thought about so far:</p>\n\n<ul>\n<li>Create a testable Hub</li>\n<li>Abstract logic to separate class</li>\n<li>Selenium (would like to test smaller units)</li>\n<li>Or is it some SignalR testing features have overlooked</li>\n</ul>\n\n<p>Currently using SignalR 0.4, and NUnit as the testing framework.</p>\n"},{"tags":["objective-c","unit-testing","mocking","class-method","ocmock"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1001,"score":1,"question_id":5600145,"title":"OBjective C & OC Mock - Mocking a class method?","body":"<p>I need to be able to determine whether a class method was called or not.\nHow can I do this with OCMock?</p>\n"},{"tags":["ruby-on-rails","unit-testing","rspec","jbuilder"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":209,"score":2,"question_id":9946326,"title":"How to use RSpec with JBuilder?","body":"<p>I'm looking for a clean way to use <a href=\"https://github.com/rails/jbuilder\" rel=\"nofollow\">JBuilder</a> and test the json output with RSpec. The popular way for JSON testing is to implement the as_json method, and then in RSpec compare the received object with the object.to_json method. But a large reason I'm using JBuilder is that I don't want all the attributes that to_json spits out; so this breaks comparison.</p>\n\n<p>Currently with JBuilder I'm having to do the following to test the RSpec results:</p>\n\n<p>1) Create a Factory object: @venue</p>\n\n<p>2) Create a hash inside my RSpec test that contains the \"expected\" JSON string back</p>\n\n<pre><code>@expected =&gt; {:id =&gt; @venue.id,:name=&gt;@venue.name..........}\n</code></pre>\n\n<p>2) Compare the @expected string to the results.response.body that is returned from the JSON call.</p>\n\n<p>This seems simple, except I have objects being rendered with 15+ attributes, and building the @expected hash string is cumbersome and very brittle. Is there a better way to do this?</p>\n"},{"tags":["javascript","unit-testing","mstest","jasmine"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":368,"score":4,"question_id":6526959,"title":"Does anyone have an mstest runner for Jasmine?","body":"<p>Given the rather extensive existing library of tests in MStest, I would like to add jasime for testign javascript and inbclude those new test in the MSTesting framework so that there is minimal disruption to current TDD patterns...</p>\n\n<p>If anyone knows of an existing mstest runner for Jasmine, I would appreciate it.  Would save time now having ot build one myself.  Also opne to other MSTest integration ideas as well, just in case I'm chasing the wrong solution...</p>\n\n<p>Our current continuos integration/source control solution is TFS 2010.</p>\n\n<p>Development is with VS 2010 and the resharper plugin.</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12796813,"title":"Nunit execution Process","body":"<p>I am running my unit test using nunit.exe. The first time it runs successfully. When I click the run button the second time it gives the following error.</p>\n\n<p>In The first route in the global.aspx file.</p>\n\n<p>Error</p>\n\n<pre><code>UnitTestSample.Tests.Controllers.DownloadControllerTest.TestEvalstart:\nSystem.ArgumentException : A route named 'GoogleNotification' is already in the route collection. Route names must be unique.\nParameter name: name\n</code></pre>\n\n<p>Can you please let me know how to resolve this problem?</p>\n"},{"tags":["android","unit-testing","bundle","parcelable"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12829700,"title":"Android Unit Testing: Bundle/Parcelable","body":"<p>How do you unit test Parcelable?  I created a Parcelable class, and wrote this unit test</p>\n\n<pre><code>TestClass test = new TestClass();\nBundle bundle = new Bundle();\nbundle.putParcelable(\"test\", test);\n\nTestClass testAfter = bundle.getParcelable(\"test\");\nassertEquals(testAfter.getStuff(), event1.getStuff());\n</code></pre>\n\n<p>I purposely try to fail the test by returning null in the <code>createFromParcel()</code>, but it seems to succeed. It looks like it doesn't get parceled until it's needed. How do I force the Bundle to..bundle?</p>\n"},{"tags":["python","unit-testing","pyunit"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":5793,"score":2,"question_id":1230498,"title":"python unittest assertRaises throws exception when assertRaises fails","body":"<p>I've got code where assertRaises throws an exception when assertRaises fails.  I thought that if assertRaises fails then the test would fail and I'd get a report at the end that says the test failed.  I wasn't expecting the exception to be thrown.  Below is my code.  I'm I doing something wrong?  I'm using Python 2.6.2.</p>\n\n<pre><code>import unittest\n\nclass myClass:\n\n    def getName(self):\n\n        raise myExcOne, \"my exception one\"\n        #raise myExcTwo, \"my exception two\"\n        #return \"a\"\n\nclass myExcOne(Exception):\n    \"exception one\"\n\nclass myExcTwo(Exception):\n    \"exception two\"\n\n\nclass test_myClass(unittest.TestCase):\n\n    def setUp(self):\n\n        self.myClass = myClass()\n\n    def testgetNameEmpty(self):\n        #self.assertRaises(myExcOne,self.myClass.getName)\n        #self.assertRaises(myExcTwo,self.myClass.getName)\n\n        try:\n            self.assertRaises(myExcTwo,self.myClass.getName)\n        except Exception as e:\n            pass\n\nif __name__ == \"__main__\":\n\n    #unittest.main()\n\n    suite = unittest.TestLoader().loadTestsFromTestCase(test_myClass)\n    unittest.TextTestRunner(verbosity=2).run(suite)\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","unit-testing","acceptance-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":12826440,"title":"ATDD - Where do acceptance tests start?","body":"<p>I am trying to understand acceptance tests, but I am confused where it starts or what kind of test/s is/are involved.\nDo I have to use automating GUI test frameworks or do I have to use unit tests? What is the boundary of an acceptance test?</p>\n\n<p>Edit: My question is about <strong>automated</strong> acceptance tests.</p>\n"},{"tags":["unit-testing","mocking","tdd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12827580,"title":"Mocking vs. Spying in mocking frameworks","body":"<p>In mocking frameworks, you can mock an object or spy on it. What's the difference between the two and when would/should I use one over the other? Looking at mockito, for example, I see similar things being done using spies and mocks, but I am unsure as to the distinction between the two.</p>\n"},{"tags":["unit-testing","node.js","integration-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12823813,"title":"How should I organize my unit & integration tests?","body":"<p>I am working with whats going to turn into quite a big <code>node.js</code>-based javascript application and started to think about how I should organize my testing.<br>\nThe application is basically a REST API, so requests are authenticated, user submitted data is validated and then persisted in a database.</p>\n\n<p>I am completely unfamiliar on how to organize the testing of a project of this size. </p>\n\n<p>Should I test each resource separately starting with modular unit testing, ending with full scale integration testing?<br>\nOr should I test layerwise - ie authentication, validation, persistence &amp; integration separately for each resource?</p>\n\n<p><strong>What is common sense?</strong></p>\n"},{"tags":["java","spring","unit-testing","spring-mvc","spring-test-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12820053,"title":"Easier way to test with Spring-test-mvc in IntelliJ IDEA? Alternatives?","body":"<p>I've been recently trying out spring-test-mvc since using the handlerAdapter and handlerMapping objects in the application context no longer support session attributes when you pass objects in that way like they used to in Spring 3.0.</p>\n\n<p>Is there any way to ease the coding of these tests from IntelliJ IDEA? Having to import so many static methods is rather time-consuming, and to be honest, I preferred my older method of testing a lot more (but I can no longer do it that way in 3.1). Is there any way to tell IntelliJ IDEA: \"If I type <code>get()</code>, automatically import that method statically\" ?</p>\n\n<p>Are there any other alternatives to spring-test-mvc that are easier to code against but also test request mappings in addition to controller logic? I also need to support session attributes.</p>\n\n<p>In addition to the weird syntax of writing tests in spring-test-mvc, it seems really odd to pass in session attributes into the controller. They seem to encourage creating an object constructor where you pass the session objects in that way... but I don't want to make this constructor on my controllers when it is not used during production. That's gotta be a testing anti-pattern, but I don't see any other way to pass in a session object as part of the request and their examples encourage making this object constructor.</p>\n\n<p>Thanks</p>\n"},{"tags":["c","unit-testing","automated-tests","automated-testing"],"answer_count":8,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":500,"score":3,"question_id":3252883,"title":"Creating a test case for a buffer overflow error (C/c++)","body":"<p>How do you create a unit test case in c for a buffer overflow that does not cause a memory error such as a segfault?</p>\n\n<p>I.e. Given a simple buffer overflow, such as</p>\n\n<pre><code>int function () {\n    int exampleArray[10];\n    exampleArray[10] = 5;\n    return 0;\n}\n</code></pre>\n\n<p>How do you create a unit test for this code? There is clearly an error, we are writing past the end of an array. However, you can run a function like this without any evidence of the error.</p>\n\n<p>Note: I need to be able to create test cases for when the index to the array is supplied at run time by the user as well as the above simplified case.</p>\n\n<p>In a managed language like Java the code will throw an exception (ArrayIndexOutOfBoundsException) which can be caught. So creating a test case is straightforward (a try-catch block for the exception).</p>\n\n<p>How would such a test be created in c? Can any of the unit testing frameworks for C handle such a situation?</p>\n\n<p>Background Information:  I'm trying to do automatic test case generation. I know where the errors are and would like to be able to create a unit test to fail on these bugs.</p>\n\n<p>However I wouldn't have the faintest idea how to create a test case that fails for a buffer overflow bug that doesn't crash the application.</p>\n"},{"tags":["c#",".net","unit-testing","nunit","testcasesource"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12821867,"title":"TestCaseSource in N-Unit","body":"<p>I'm writing some N-Unit tests and I'm having a little difficulty. I'm trying to wire up a Test to a <code>TestCaseSource</code> in my code, but it doesn't seem to be constructing the objects correctly.</p>\n\n<p>Here is my Test Method:</p>\n\n<pre><code>    [Test, TestCaseSource(typeof(TestCaseStuff), \"GetTestCases\", Category = \"Release\")]\n    public void WithdrawMoney(TestCaseStuff tc)\n    {\n        double newBalance = AccountBalance - tc.amt;\n        if (newBalance &lt; 0)\n        {\n            Assert.Fail(String.Format(\"You can't withdraw {0}! You've maxed\" +\n                \"out your bank account.\", tc.amt.ToString(\"C2\")));\n        }\n\n        AccountBalance = newBalance;\n        Assert.Pass(String.Format(\"Your new balance is {0}.\", \n        (AccountBalance).ToString(\"C2\")));\n    }\n</code></pre>\n\n<p>And my <code>TestCaseSource</code>:</p>\n\n<pre><code>public class TestCaseStuff\n{\n    public double amt { get; set; }\n\n    public TestCaseStuff()\n    {\n        Random rnd = new Random();\n        this.amt = rnd.Next(0, 20);\n    }\n\n    [Category(\"Release\")]\n    public IEnumerable&lt;TestCaseData&gt; GetTestCases()\n    {\n        for (int i = 0; i &lt; 500; i++)\n        {\n            yield return new TestCaseData(this);\n        }\n    }\n}\n</code></pre>\n\n<p>The is mostly serving as proof of concept, so that when it comes time to write an actual test with complex objects, I'll know that I can just write a loop like the one above and put random values in my object. However, every instance of <code>TestCaseStuff</code> that is returned to my test method is the same.</p>\n\n<p>Update:</p>\n\n<p>The answer below is correct. When I was passing it into N-Units <code>TestCaseData</code> object, I assumed (incorrectly) that it would simply pass that instance in by value. Apparently, it is done by reference which is why the value was always the same. </p>\n\n<p>On top of that, I was using the <code>Random</code> class incorrectly. It isn't something I deal with usually, but I failed to read up on it properly. As explained in the link below, when using <code>Random</code> with it's default constructor, the seed value is derived from the system clock. As a result, if you instantiate several <code>Random</code> objects in quick succession they will share the same default seed value and produce the same values.</p>\n\n<p>So, as a result of these developments, my code now reads:</p>\n\n<pre><code>public class TestCaseStuff\n{\n    public double amt { get; set; }\n    private static readonly Random rnd = new Random();\n\n    public TestCaseStuff()\n    {\n        this.amt = rnd.Next(0, 20);\n    }\n\n    [Category(\"Release\")]\n    public IEnumerable&lt;TestCaseData&gt; GetTestCases()\n    {\n        for (int i = 0; i &lt; 500; i++)\n        {\n            yield return new TestCaseData(new TestCaseStuff());\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["unit-testing","maven-2"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":902,"score":3,"question_id":2978471,"title":"How to use maven resources also as test resources","body":"<p>I have a maven project that loads an xslt file and executes the transformation along with other processing on the result. Normally when the user runs the application, the user provides the xslt file path to be loaded. But I include some default xslt files bundled inside my application that the user can use without loading any external xslt file. I do this by adding them to src/main/resources/xslt. My problem is that I want to run tests against those xslt files in testing phase. How can I achieve this? Should I copy the src/main/resources/xslt contents to target/somewhere and load these in my test classes code? Which plugin is used for that?</p>\n"},{"tags":["python","unit-testing","functional-testing","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":61,"score":1,"question_id":12824282,"title":"print statement is not working in python proboscis","body":"<p>We started writing our functional and unit test cases in python using nose framework. We started  learning python while writing these tests. Since there are lot of dependencies between our test classes/functions, we decided to use <a href=\"http://packages.python.org/proboscis/\" rel=\"nofollow\">proboscis framework</a> on top of nose to control order of execution.</p>\n\n<p>We have quite a few 'print' statements in our tests and proboscis seems to be ignoring these! Tests are running in expected order and testing them all but not printing our print statement data to console. Any idea what we are missing here?</p>\n\n<p>BTW, we stopped deriving our classes from 'unittest.TestCase' once we moved to proboscis and decorated all classes and their member functions with @test.</p>\n"},{"tags":["c#",".net","unit-testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":118,"score":4,"question_id":12716777,"title":"Test Explorer > Run All : System.Exception: Failed to find the main application assembly","body":"<p>When I run a selected test, the test run correctly in Test Explorer. However, when use the <code>Run All</code> button, VS2012 throws a <code>System.Exception</code> that states </p>\n\n<blockquote>\n  <p>Failed to find the main application assembly...</p>\n</blockquote>\n\n<p>Is there a place that I can configure the Test Explorer to find the application assembly?</p>\n\n<p>An example would be greatly appreciated.</p>\n"},{"tags":["unit-testing","legacy-code"],"answer_count":6,"favorite_count":7,"up_vote_count":20,"down_vote_count":0,"view_count":1848,"score":20,"question_id":1541568,"title":"Adding unit tests to legacy code","body":"<p>Have you ever added unit tests, after the fact, to legacy code?  How complicated was code and how difficult to stub and mock everything?  Was the end result worthwhile?</p>\n"},{"tags":[".net","unit-testing","anonymous-types"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12801259,"title":"How can I Assert on anonymous types in c#","body":"<p>I have a logic type that returns an array of anonymous types. Is there a way for me to assert on the value of these types? Here's what I'm thinking but that doesn't work.</p>\n\n<pre><code>[TestMethod]\npublic void TestStuff()\n{\n    var actual = GetAnonymousThings();\n    // how can I assert the first b is \"one\"?\n    Assert.AreEqual(\"one\", actual[0].b); // does not compile natch\n}\n// this is just a stub example of the code under test\nprivate static object[] GetAnonymousThings()\n{\n    return new object[] { new { a = 1, b = \"one\" }, new { a = 2, b = \"two\" } };\n}\n</code></pre>\n\n<p>Thanks for the comments guys. I would like to add this comment under yours as appropriate but I don't seem to have sufficient reputation!  And now I can't see them from this edit page, so bear with me.\nAs for how the anonymous types are used... they are serialized to JSON for the client so I could test them there I suppose is your point.</p>\n"},{"tags":["visual-studio","unit-testing","visual-studio-2012","gallio","test-runner"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":195,"score":3,"question_id":12730640,"title":"How do I configure VS2012 test runner to pick up and run Gallio unit tests?","body":"<p>I've recently upgraded to VS2012 to iron out problems ahead of my team.  We use Gallio 3.3 as a unit tests framework and have numerous tests written which work in VS2010.  However, VS2012 does not appear to recognise them.</p>\n\n<p>The VS2012 Test Explorer windows says \"Build your solution to discover all available tests\".  I have done several clean builds, and the system runs in VS2012, but no tests appear.</p>\n\n<p>Is there any configuration I need to put in, or any way I can get these tests to run in VS2012?</p>\n"},{"tags":["html5","unit-testing","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12823029,"title":"Unit Testing AJAX-y UI with Visual Studio","body":"<p>I have a UI that is going to leverage HTML 5, css, jquery, and kendo very heavily. Ideally, I'd really like to write tests that simulate a user performing actions. I'm kind of new to this whole unit testing thing. I understand how it works with procedural code. However, I'm not sure how it works with event-based code such as a HTML 5 UI.</p>\n\n<p>Can someone give me some ideas of how to automate testing a HTML UI with visual studio?</p>\n\n<p>Thank you!</p>\n"},{"tags":["python","unit-testing","monkeypatching"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":63,"score":4,"question_id":12822355,"title":"How do I unit test a monkey patch in Python","body":"<p>I have a utility method that behaves like this</p>\n\n<pre><code>def my_patch_method(self):\n    pass\n\ndef patch_my_lib():\n    from mylib import MyClass\n    MyClass.target_method = my_patch_method\n    return MyClass()\n</code></pre>\n\n<p>This test fails:</p>\n\n<pre><code>self.assertEqual(my_patch_method, patch_my_lib().target_method)\n</code></pre>\n\n<p>Whereas this one works:</p>\n\n<pre><code>self.assertEqual(my_patch_method.__name__, patch_my_lib().target_method.__name__)\n</code></pre>\n\n<p>As the patch method does not have the same name, this is still acceptable proof that <code>patch_my_lib()</code> is doing what it's payed for but why doesn't the first work as I would expect ? And, is there a way to \"fix\" it ?</p>\n"},{"tags":["unit-testing","cakephp","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12712865,"title":"Use a different email config during unit testing in CakePHP","body":"<p>I'm sending an email using the CakeEmail class in an action of one of my controllers. I have a unit test for this controller that was working fine before adding the email code. After adding the email I get this error:</p>\n\n<blockquote>\n  <p>SocketException: Could not send email.</p>\n</blockquote>\n\n<p>This is down to the fact that I don't have any way of sending emails off my local machine.</p>\n\n<p>So I thought that maybe a good idea would be to have two different configuration options inside the EmailConfig class in Config/email.php (Similar to how the database config file works). The default using the Mail transport, and a test using the Debug transport. The issue with this is that, unlike the database config, Cake doesn't automatically switch between the two during testing.</p>\n\n<p>The only thing I have thought of is to add a constructor to the EmailConfig class and test if we're unit testing, but I'm not sure what the check should be.</p>\n\n<p>Something along the lines of this:</p>\n\n<pre><code>class EmailConfig {\n\n    public $default = array(\n        'transport' =&gt; 'Mail'\n    );\n\n    public $test = array(\n        'transport' =&gt; 'Debug'\n    );\n\n    public function __construct() {\n        if ($isUnitTesting) {\n            $this-&gt;default = $this-&gt;test;\n        }\n    }\n\n}\n</code></pre>\n\n<p>Would my way suggested above be a good idea? If not, what other ways can I use a different transport for the email during unit testing?</p>\n\n<hr>\n\n<p><strong>Update - 4/10/2012</strong></p>\n\n<p>I think I was going about this the wrong way. Looking at <a href=\"http://stackoverflow.com/a/8600556/343465\">this answer</a> it seems that even the <code>$default</code> config isn't loaded by default, you have to specify it by calling the <code>CakeEmail::config()</code> method or give it in the constructor. So I think this leaves me two options now:</p>\n\n<ol>\n<li>In the controller check if we're unit testing (somehow?) and then use the 'test' config.</li>\n<li>Set up my computer to be able to send emails.</li>\n</ol>\n\n<p>I'd rather do the first but unsure how this can be done without bloating the controller action with checks if we're unit testing, it seems wrong to do this.</p>\n"},{"tags":["python","unit-testing","python-2.7","python-mock"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12821090,"title":"How to assert a mock was invoked with a specific type rather than instance?","body":"<p>I'm using the latest version of mock and python 2.7.3</p>\n\n<p>I'm building my first flask app and I'm testing some basic middleware to see if flask.abort() happens (and when it does, I assert a method was called with the Unauthorized exception)</p>\n\n<pre><code>    def test_invokes_raise_http_exception_when_apply_blows_up(self):\n        start_response = mock.Mock()\n        self.sut = BrokenMiddleware(self.app)\n        with mock.patch.object(self.sut, 'raise_http_exception') as raise_up:\n            self.sut.__call__({}, start_response)\n        raise_up.assert_called_once_with(Unauthorized(), start_response)\n\nclass BrokenMiddleware(Middleware):\n\n    def apply_middleware(self, environ):\n        flask.abort(401) \n</code></pre>\n\n<p>Here is my production code</p>\n\n<pre><code>class Middleware(object):\n    def __call__(self, environ, start_response):                                                                               \n        try:\n            self.apply_middleware(environ)\n        except Exception as e:\n            return self.raise_http_exception(e, start_response)\n\n    def raise_http_exception(self, exception, start_response):\n        pass\n</code></pre>\n\n<p>The issue I'm having is that mock fails the assert because the 401 raised is not the same as the one I'm expecting in the assertion itself.</p>\n\n<p>If I only care about the type, not the actual instance how could i rewrite the assertion?</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","moq","elmah"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":341,"score":1,"question_id":10657961,"title":"Elmah error logging FromCurrentContext breaks when unit testing","body":"<p>When writing unit tests using Moq anytime I call the <code>Elmah.ErrorSignal.FromCurrentContext</code> it fails with a null reference exception. I am able to mock the <code>ControllerContext</code> and I would like to just use an error log command like this..</p>\n\n<pre><code>Elmah.ErrorSignal.FromContext(ControllerContext.HttpContext).Raise(e);\n</code></pre>\n\n<p>but unfortunately the <code>ControllerContext.HttpContext</code> is of type <code>HttpContextBase</code> and won't work with this error logging method. </p>\n\n<p>Is there a better way to call the Elmah error logging directly? Unfortunately the <code>Application.HttpContext</code> object cannot be mocked (below example) or that would also serve the purpose. </p>\n\n<p>Mock <code>Application</code> and <code>Application.HttpContext</code>:</p>\n\n<pre><code>ctrlCtx.SetupGet(x =&gt; x.HttpContext.ApplicationInstance)\n           .Returns(new Mock&lt;HttpApplication&gt;().Object);\nctrlCtx.SetupGet(x =&gt; x.HttpContext.ApplicationInstance.Context)\n           .Returns(new Mock&lt;HttpContext&gt;().Object);\n</code></pre>\n\n<p>Error Produced:</p>\n\n<p>Invalid setup on a non-virtual (overridable in VB) member</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":6,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":2997,"score":8,"question_id":2463232,"title":"PHPUnit: force display of asserted values","body":"<p>When in PHPUnit test fails, actual and expected values are displayed.<br>\nBut when the test passes, this information is not displayed.</p>\n\n<p>How to force PHPUnit to always display expected and actual assertion result?</p>\n"},{"tags":["visual-studio-2008","unit-testing","nunit","mstest","integration-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":575,"score":0,"question_id":2901219,"title":"Ms Test or NUnit?","body":"<p>Is there any advantage to picking NUnit for unit/integration testing vs the built in MsTest?  </p>\n"},{"tags":["java","unit-testing"],"answer_count":6,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":108,"score":3,"question_id":12820935,"title":"How to make all unit tests fail","body":"<p>I would like to find unit tests (written with JUnit) which never fail. I.e. tests which have something like </p>\n\n<pre><code>try {\n// call some methods, but no assertions\n} catch(Throwable e) {\n// do nothing\n}\n</code></pre>\n\n<p>Those tests are basically useless, because they will never find a problem in the code. So is there a way to make each (valid) unit test fail? For instance each call to any assert method would throw an exception? Then tests which still remain green are useless.</p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12820881,"title":"There are an execution context for unit tests in C#?","body":"<p>I know that <code>HttpContext</code> is for ASP.NET service and <code>OperationContext</code> is for WCF service method.</p>\n\n<p>What is the execution context for Unit test methods ?</p>\n\n<p>I have a function which construct an url based on given controller and action but it is used inside unit test method.</p>\n\n<pre><code>[TestMethod]\npublic void GetUrlFromSpecificController(){\n   Assert.IsTrue(string.IsNullOrEmpty(MyClass.TransformUrl(\"AController\", \"AnAction\")));\n}\n</code></pre>\n\n<p>And the method:</p>\n\n<pre><code>public static string GetUrlFromSpecificController(string controller, string action)\n{\n   UriBuilder urlBuilder = null;\n\n   if(HttpContext.Current != null){\n      UrlHelper urlHelper = new UrlHelper(HttpContext.Current.Request.RequestContext);\n      urlBuilder = new UriBuilder(HttpContext.Current.Request.Url.AbsoluteUri) {\n         Path = urlHelper.Action(action, controller)\n      }; \n   } else {\n      string url = OperationContext.Current.IncomingMessageHeaders.To.AbsoluteUri; // for WCF service\n      urlBuilder = new UriBuilder(url);\n      urlBuilder.Path = string.Concat(urlBuilder.Path, \"/\", controller, \"/\", action);\n   }\n\nreturn HttpUtility.UrlDecode(urlBuilder.ToString());\n}\n</code></pre>\n\n<p>How if is possible to construct the request url using UnitTest (by calling HttpContext or OperationContext) ?</p>\n\n<p>I have to set up something in UnitTests before ?</p>\n\n<p>I have also put in UnitTest using the <a href=\"http://stackoverflow.com/users/250230/anton\">Anton</a>'s advice here: <a href=\"http://stackoverflow.com/questions/3234693/using-httpcontext-in-unit-test\">Using httpcontext in unit test</a> but without success.</p>\n"},{"tags":["c#","sql-server","sqlite","unit-testing","unity"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12819728,"title":"Leaving a Database Connection Open?","body":"<p>My web application has the following class:</p>\n\n<pre><code>public class DatabaseProvider {\n    private readonly IDbConnection _cn;\n\n    public DatabaseProvider(IDbConnection cn) {\n        _cn = cn;\n    }\n\n    public void ExecuteNonQuery(string query) {\n        // Execute the query\n        var cmd = _cn.CreateCommand();\n        cmd.CommandText = query;\n        cmd.ExecuteNonQuery();\n    }\n}\n</code></pre>\n\n<p>Where the IDbConnection dependency is declared using the following code (with Microsoft Unity):</p>\n\n<pre><code>container.RegisterType&lt;IDbConnection&gt;(new InjectionFactory(c =&gt; {\n    var cn = new SqlConnection(\"...\");\n    cn.Open();\n    return cn;\n}));\n</code></pre>\n\n<p>This allows me to swap out the connection to SQLite like so:</p>\n\n<pre><code>container.RegisterType&lt;IDbConnection&gt;(new InjectionFactory(c =&gt; {\n    var cn = new SQLiteConnection(\"Data Source=:memory:;Version=3;\");\n    cn.Open();\n    return cn;\n}));\n</code></pre>\n\n<p>I use SQLite when testing and the connection must remain open otherwise the data is lost. Therefore I can't just open and close the connection when needed.</p>\n\n<p>I have always opened the connection to the database when it was needed and was wondering whether this will scale for large applications?</p>\n\n<p>I'd appreciate any advice on how this can be improved. Thanks</p>\n"},{"tags":["java","unit-testing","google-app-engine","memcached","testng"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12809336,"title":"NullPointerException calling tearDown() on Google App Engine LocalSErviceTestHelper","body":"<p>I am writing tests (integration and unit) for a Google App Engine Java app that relies heavily on Google App Engine services such as Memcache and Datastore. In order to test my application locally using these services, I have this line in the parent class of all my test cases:</p>\n\n<pre><code>private final LocalServiceTestHelper helper = new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig(), new LocalMemcacheServiceTestConfig());\n</code></pre>\n\n<p>I begin every test with this function call (via TestNG's <code>@BeforeMethod</code> annotation):</p>\n\n<pre><code>helper.setUp();\n</code></pre>\n\n<p>And I end every test with this function call (via TestNG's <code>@AfterMethod</code> annotation):</p>\n\n<pre><code>helper.tearDown();\n</code></pre>\n\n<p>(Here's a reference to <a href=\"http://testng.org/doc/documentation-main.html#annotations\" rel=\"nofollow\">TestNG annotations</a> and <a href=\"https://developers.google.com/appengine/docs/java/tools/localunittesting\" rel=\"nofollow\">local unit testing for Google App Engine's Java Runtime</a>, in case you need it. Especially for the latter link, note that my code strictly follows the examples given by Google)</p>\n\n<p>One thing to note is that one of my servlets in the Java app uses an instance of MemcacheService. It is injected into the servlet's constructor by Guice.</p>\n\n<p>Now, I build my code and run it via a call to <code>mvn clean install</code>, which will start an instance of <em>Jetty</em> and run my tests after the code has been compiled. <strong>Much to my chagrin,</strong> I get this stack trace printed before TestNG reports mass test failure:</p>\n\n<pre><code>SEVERE: Received exception tearing down config of type com.google.appengine.tools.development.testing.LocalMemcacheServiceTestConfig\njava.lang.NullPointerException\nat com.google.appengine.tools.development.testing.LocalServiceTestHelper.getLocalService(LocalServiceTestHelper.java:495)\nat com.google.appengine.tools.development.testing.LocalMemcacheServiceTestConfig.getLocalMemcacheService(LocalMemcacheServiceTestConfig.java:71)\nat com.google.appengine.tools.development.testing.LocalMemcacheServiceTestConfig.tearDown(LocalMemcacheServiceTestConfig.java:47)\nat com.google.appengine.tools.development.testing.LocalServiceTestHelper.tearDown(LocalServiceTestHelper.java:438)\nat com.ea.pogosocial.AbstractTest.tearDown(AbstractTest.java:65)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:616)\nat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)\nat org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:564)\nat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)\nat org.testng.internal.Invoker.invokeMethod(Invoker.java:796)\nat org.testng.internal.Invoker.invokeTestMethod(Invoker.java:907)\nat org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1237)\nat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)\nat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\nat java.lang.Thread.run(Thread.java:679)\n</code></pre>\n\n<p>I have tried almost everything I can thnk of to fix the problem, but I still run into this tearDown() problem, which is really stumping me. Beside put() and get(), I don't do anything fancy with the memcache instance in my servlet. Does anyone have any ideas as to what I should do?</p>\n\n<p>If more information or code is needed, I will be glad to provide. One thing to note: when I instead start my Jetty server with <code>mvn gae:run</code> and I execute the TestNG tests through Eclipse, I do not run into this issue. Perhaps this is because my servlet is being injected a non-local unit test helper instance of memcache, but rather an actual version of a memcache service.</p>\n"},{"tags":["java","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":78,"score":-1,"question_id":12814821,"title":"How to verify that a superclass' constructor is being called","body":"<p>Let's say there is a super-class </p>\n\n<pre><code>class SuperClass {\n    SuperClass(Foo foo) {\n        this.foo = foo;\n    }\n\n    SuperClass() {\n        this.foo = new DefaultFoo();\n    }\n}\n</code></pre>\n\n<p>And there's a sub-class</p>\n\n<pre><code>class SubClass extends SuperClass {\n     SubClass(Foo foo) {\n        super(foo);\n    }\n}\n</code></pre>\n\n<p>The class under test is <code>SubClass</code>. I want to verify that <code>SubClass'</code> constructor is indeed invoking it's superclass' non-empty constructor. Is there any way to achieve this? </p>\n"},{"tags":["c#",".net","unit-testing","automapper"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12457516,"title":"AutoMapper IsSourceValueNull Condition doesn't work","body":"<p>I'm using this <a href=\"http://stackoverflow.com/questions/3704512\">Automapper - Using DynamicMap() and ignore null source value</a> approach to make the mapper ignore properties with NULL values on the source, but this doesn't appear to work in version <strong>2.1.267.0</strong> (current).</p>\n\n<p>Here's my mapping config:</p>\n\n<pre><code>Mapper.CreateMap&lt;PersonDTO, Person&gt;().ForAllMembers(\n    opt =&gt; opt.Condition(srs =&gt; !srs.IsSourceValueNull));\n</code></pre>\n\n<p>Here's my test:</p>\n\n<pre><code>// Arrange   \nvar Person = new Person { FirstName = \"Bruce\", Surname = \"Lee\"};\nvar PersonDto = new PersonDTO { FirstName = \"Jet\", Surname = null };\n\n// Act\nMapper.Map(PersonDto, Person);\n\n// Assert\nAssert.AreEqual(\"Jet\", Person.FirstName); // Assert.AreEqual failed. Expected:&lt;Jet&gt;. Actual:&lt;Bruce&gt;. \nAssert.AreEqual(\"Lee\", Person.Surname, \"Surname field with NULL value should not have been mapped\");\n</code></pre>\n\n<p>Does it work for you? And if so, can you spot the problem in my code?</p>\n"},{"tags":["asp.net","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12816473,"title":"Unit testing ASP.NET Legacy code","body":"<p>I have list of ASP.NET legacy projects. In these projects business logic is tightly bound with the Pages. All the authentication and other stuff is written in load and click events in the code behind. I am using Visual Studio 2012.</p>\n\n<p>What is the best way to unit testing these projects?</p>\n"},{"tags":["unit-testing","nunit","moq","moles","pex"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12816320,"title":"Can I use PEX with a differnet mocking framework then moles/fakes?","body":"<p>Currently I am using Nunit and Moq for unit testing in my C# projects. Now I want to try the automatic unit-test generation tool PEX. \nI read some articles and watched the videos on channel9. As I understand PEX will automatic generate nUnit tests for me, but there are still some unanswered questions. </p>\n\n<p>My main issue is that, as i said, I am using moq and I can not change this. Is moles/fakes needed to run PEX properly, or could I also use PEX in comibination with a different mocking framework ? </p>\n"},{"tags":["python","unit-testing","migration","tornado","cyclone"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":12807992,"title":"How do I write tests for Cyclone in the style of Tornado?","body":"<p>I have been googling and asking on IRC to no avail. <a href=\"http://cyclone.io/\" rel=\"nofollow\">Cyclone</a> is supposed to be a Tornado-like protocol for Twisted. But, there are no tests in the Cyclone repository and no-one has written up how to convert <code>tornado.testing.AsyncHTTPTestCase</code> tests to exercise code written against Cyclone.</p>\n\n<ol>\n<li>How do I start a server to test the web interface?</li>\n<li>Where is the <code>self.fetch()</code>?</li>\n<li>Where is the documentation in Cyclone to describe how to convert an existing Tornado app?</li>\n</ol>\n"},{"tags":["asp.net-mvc","unit-testing","c#-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12815749,"title":"Amazon email delivery notification","body":"<p>I am using Amazon Simple Email service to send email. Can i get email delivery notification in case of failure occur in sending process when use Amazon webservices? If so can you please tell me how to get the notification in amazon web service.</p>\n\n<p>Thanks</p>\n"},{"tags":[".net","asp.net","unit-testing","sitemap"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":448,"score":2,"question_id":5120352,"title":"Could not load type 'MapProvider' from assembly during .Net unit test","body":"<p>I'm receiving a <code>System.Configuration.ConfigurationErrorsException</code> with the message <code>Could not load type 'XxxSiteMapProvider' from assembly 'System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'.</code> </p>\n\n<p>I'm trying to unit test a separate class in the the same project as the <code>XxxSiteMapProvider</code> custom class. The error message indicates the proper point of the App.config for picking up the custom SiteMapProvider and I did a search across the solution and the class name is not duplicated anywhere. (I saw from searches that conflicting class names may cause this error.)</p>\n\n<p>Any suggestions on how to debug this?</p>\n"},{"tags":["unit-testing","exception","resharper","code-contracts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12754678,"title":"Code Contracts throws MethodAccess Exception when unit testing","body":"<p>I'm not quite sure why, but when I enable runtime contract checking, I'm getting a <code>MethodAccessException</code> during unit testing. I use the <em>Machine.Specifications</em> test framework and the ReSharper/dotCover test runner. When I test my assembly containing code contracts, I get this <code>MethodAccessException</code>:</p>\n\n<pre><code>Machine.Specifications.SpecificationException Should be of type System.ArgumentNullException but is of type System.MethodAccessException\n    at BusinessLogic.Specifications.When_testing_whether_a_set_of_cart_items_contains_a_product_and_a_null_set_is_passed.&lt;.ctor&gt;b__3()\n    in CartItemQuerySpecs.cs: line 66\n</code></pre>\n\n<p>The specification looks like this:</p>\n\n<pre><code>[Subject(typeof(ShoppingCartQueries), \"Cart contains product\")]\npublic class When_testing_whether_a_set_of_cart_items_contains_a_product_and_a_null_set_is_passed\n    : with_fake_shopping_cart_repository\n    {\n    Establish context = () =&gt; QueryResult = CartItems.AsQueryable().ForUser(UserWithNoProductsInCart);\n    Because of = () =&gt; Thrown = Catch.Exception(() =&gt; result = QueryResult.ContainsProduct(100));\n    It should_throw = () =&gt; Thrown.ShouldBeOfType&lt;ArgumentNullException&gt;();\n    static bool result;\n    }\n</code></pre>\n\n<p>The unit under test looks like this:</p>\n\n<pre><code>[Pure]\npublic static bool ContainsProduct(this IQueryable&lt;CartItem&gt; items, int id)\n    {\n    Contract.Requires&lt;ArgumentNullException&gt;(items != null);\n    return (items.Any(item =&gt; item.ProductId.Equals(id)));\n    }\n</code></pre>\n\n<p>Why would I get a <code>MethodAccessException</code>?</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12813633,"title":"How to assert two list contain the same elements in Python?","body":"<p>When writing test cases, I often need to assert that two list contain the same elements without regard to their order.</p>\n\n<p>I have been doing this by converting the lists to sets.</p>\n\n<p>Is there any simpler way to do this?</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>As @MarkDickinson pointed out, I can just use <a href=\"http://docs.python.org/library/unittest.html#unittest.TestCase.assertItemsEqual\" rel=\"nofollow\">TestCase.assertItemsEqual</a>.</p>\n\n<p>Notes that <code>TestCase.assertItemsEqual</code> is new in Python2.7.\nIf you are using an older version of Python, you can use <a href=\"http://pypi.python.org/pypi/unittest2\" rel=\"nofollow\">unittest2</a> - a backport of new features of Python 2.7.</p>\n"},{"tags":[".net","visual-studio-2010","unit-testing","mstest","ordered-test"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12815051,"title":"How to get the name of the currently executing OrderedTest","body":"<p>I have some ordered tests containing test methods. Some test methods are used in multiple ordered tests.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;OrderedTest name=\"orderedtest_A\" ...&gt;\n  ...\n  &lt;TestLinks&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_A\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_B\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_G\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_Z\" ... /&gt;\n  &lt;/TestLinks&gt;\n&lt;/OrderedTest&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;OrderedTest name=\"orderedtest_B\" ...&gt;\n  ...\n  &lt;TestLinks&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_A\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_M\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_E\" ... /&gt;\n  &lt;/TestLinks&gt;\n&lt;/OrderedTest&gt;\n</code></pre>\n\n<p>As you can see, <code>testmethod_A</code> is used in <code>orderedtest_A</code> and in <code>orderedtest_B</code>\nAt execution time, I need to get <strong>the name of the ordered test</strong> that is currently running, e.g. <code>orderedtest_B</code>.</p>\n\n<p>I know that I can get the name of currently running <strong>test mehod</strong> by reading the <code>TestContext.TestName</code> property (e.g. <code>testmethod_B</code>)</p>\n\n<p>This would be fine if each test method was only used in one ordered test (then I could read all <code>*.orderedtest</code> xml-files and search for the test method with the given name) - but this is not the case! (as described above: see <code>testmethod_A</code>)</p>\n\n<p>In VS2010, the name of the ordered test is used quite often:</p>\n\n<ul>\n<li>In the test list editor</li>\n<li>In the test results list</li>\n<li>In the test view</li>\n</ul>\n\n<p>So maybe there <em>is</em> a possibility to read the name of the ordered test but is there also a way to get it at runtime?</p>\n\n<p><em>(BTW - To be exact, I want the name of the test as it is shown in the test results list.)</em></p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":12801740,"title":"Getting started with JUnit 4","body":"<p>because my project wants to start test-driven development I decided to write a small tutorial about Junit 4 (currently JUnit 4.10 with Eclipse Juno) for my project.</p>\n\n<p><strong>Bill.java</strong></p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\n/**\n * @author funkymonkey\n * \n *         Class Bill can store an id and a priceList (List&lt;Float&gt;)\n *         - id with setter and getter\n *         - prices can be added to the priceList\n *         - getter for priceList\n *         - total amount of price in priceList can be calculated\n */\n\npublic class Bill {\n   private Integer     id;       // invoice number (one for every Bill)\n\n   private List&lt;Float&gt; priceList; // list will contain prices of the products\n\n   public Bill() {\n      priceList = new ArrayList&lt;Float&gt;();\n   }\n\n   public Bill(Integer id) {\n      this.id = id;\n\n      priceList = new ArrayList&lt;Float&gt;();\n   }\n\n   public Integer getId() {\n      return id;\n   }\n\n   public void setId(Integer id) {\n      this.id = id;\n   }\n\n   public List&lt;Float&gt; getPriceList() {\n      return priceList;\n   }\n\n   public void addPrice(Float price) {\n      if (price &lt;= 0) {\n         throw new IllegalArgumentException(\"Value is less or equal zero\");\n      }\n\n      priceList.add(price);\n   }\n\n   public float getTotalPrice() {\n      float totalPrice = 0;\n\n      for (Float p : priceList) {\n         totalPrice = totalPrice + p;\n      }\n      return totalPrice;\n   }\n}\n</code></pre>\n\n<p><strong>BillTest.java</strong></p>\n\n<pre><code>import static org.junit.Assert.assertArrayEquals;\nimport static org.junit.Assert.assertEquals;\nimport static org.junit.Assert.assertThat;\nimport static org.junit.Assert.assertTrue;\nimport static org.junit.matchers.JUnitMatchers.hasItems;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\n\npublic class BillTest {\n\n   private static Bill       jBill1;\n   private static final float FLOAT_1        = (float) 1;\n   private static final float FLOAT_20       = (float) 20;\n   private static final float FLOAT_3P345    = (float) 3.345;\n   private static final float FLOAT_0P000001 = (float) 0.000001;\n\n   @Before\n   // initialize objects before running tests\n   public void setUp() throws Exception {\n      jBill1 = new Bill();\n   }\n\n   @After\n   // something which should be done after running a single test\n   public void tearDown() throws Exception {\n   }\n\n   @Test\n   // test addPrice()\n   public final void testAddPrice_priceIsGreaterThanZero() {\n      jBill1.addPrice(FLOAT_1);\n      jBill1.addPrice(FLOAT_20);\n      jBill1.addPrice(FLOAT_3P345);\n      jBill1.addPrice(FLOAT_0P000001);\n\n      // check if expected values == results\n\n      // we are comparing lists so we are using assertEquals(expected, result)\n      List&lt;Float&gt; expectedList = new ArrayList&lt;Float&gt;();\n      expectedList.add(FLOAT_1);\n      expectedList.add(FLOAT_20);\n      expectedList.add(FLOAT_3P345);\n      expectedList.add(FLOAT_0P000001);\n      List&lt;Float&gt; resultList = jBill1.getPriceList();\n\n      assertEquals(expectedList, resultList);\n\n      // we are comparing arrays so we can use assertArrayEquals(expected, result)\n      Object[] expectedArray = { FLOAT_1, FLOAT_20, FLOAT_3P345, FLOAT_0P000001 };\n      Object[] resultArray = jBill1.getPriceList().toArray();\n\n      assertArrayEquals(expectedArray, resultArray);\n\n      // we are comparing strings to we can use assertEquals(expected, result)\n      String expectedString = expectedList.toString();\n      String resultString = jBill1.getPriceList().toString();\n\n      assertEquals(expectedString, resultString);\n\n      // let us compare the size of the lists using assertTrue (boolean condition)\n      Integer expectedLength = expectedList.size();\n      Integer resultLength = jBill1.getPriceList().size();\n\n      assertTrue(expectedLength == resultLength);\n      // or use assertTrue(expectedLength.equals(resultLength));\n\n      // you can also use your own matchers by using assertThat(result, matcher)\n      assertThat(resultList, hasItems(expectedList.toArray(new Float[expectedList.size()])));\n      // or assertThat(resultList, hasItems(FLOAT_1, FLOAT_20, FLOAT_3P345, (float)\n      // 0.000001));\n\n   }\n\n   @Test(expected = IllegalArgumentException.class)\n   // test will pass if exception is thrown from addPrice()\n   public final void testAddPrice_priceIsZero() {\n      // this will throw the exception IllegalArgumentException\n      jBill1.addPrice((float) 0);\n   }\n\n   @Test(expected = IllegalArgumentException.class)\n   // test will pass if exception is thrown from addPrice()\n   public final void testAddPrice_priceIsLessThanZero() {\n      // this will throw the exception IllegalArgumentException\n      jBill1.addPrice((float) -1);\n   }\n\n   @Test\n   // test if calculating works via getTotalPrice()\n   public final void testGetTotalPrice() {\n      jBill1.addPrice(FLOAT_1);\n      jBill1.addPrice(FLOAT_20);\n      jBill1.addPrice(FLOAT_3P345);\n      jBill1.addPrice(FLOAT_0P000001);\n\n      Float expectedValue = FLOAT_1 + FLOAT_20 + FLOAT_3P345 + FLOAT_0P000001;\n      Float resultValue = jBill1.getTotalPrice();\n\n      // we are comparing float values so we can use assertEquals(expected, result)\n      assertEquals(expectedValue, resultValue);\n   }\n}\n</code></pre>\n\n<p>My questions are:</p>\n\n<ul>\n<li>how to explain an old fashioned coder (waterfall model) how he/she could benefit from JUnit</li>\n<li>additional package which could be useful (mocking frameworks?)</li>\n<li>most important methods in JUnit?</li>\n<li>is the example code useful to explain somebody the functionality of junit?</li>\n</ul>\n"},{"tags":["unit-testing","cakephp","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":10575962,"title":"Multiple calls to staticExpects on mocked objects","body":"<p>I am tring to write test cases for my controller in cakephp, so far i have managed to mock the controller and include the auth component which is used in my controller function. the problem is it seems that i can call staticExpects only once, which means that i can define a return value for only one function call, i don't want that, i need to call staticExpects more than once within the same test case.</p>\n\n<p>Here is a part of my code.</p>\n\n<pre><code>$this-&gt;TasksController = $this-&gt;generate('Tasks', array(\n'components' =&gt; array('Session','Auth' =&gt; array('User'), ) ));\n\n  $this-&gt;TasksController-&gt;Auth-&gt;staticExpects($this-&gt;any())\n    -&gt;method('User')\n    -&gt;with('userID')\n    -&gt;will($this-&gt;returnValue(224));\n     $this-&gt;TasksController-&gt;Auth-&gt;staticExpects($this-&gt;any())\n    -&gt;method('User')\n    -&gt;with('accID')\n    -&gt;will($this-&gt;returnValue('some ID here'));\n</code></pre>\n\n<p>whenever i do this and run the test it gives me this error</p>\n\n<p>Expectation failed for method name is equal to  when invoked zero or more times\nParameter 0 for invocation AuthComponent::user('userID') does not match expected value.\nFailed asserting that two strings are equal.</p>\n\n<p>Please help :)</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12742726,"title":"Jasmine: How to get name of current test","body":"<p>Is there a way of getting the name of the currently running test?</p>\n\n<p>Some (heavily simplified) code may help explain. I want to avoid the duplication of <code>\"test1\" / \"test2\"</code> in the calls to <code>performTest</code>:</p>\n\n<pre><code>describe(\"some bogus tests\", function () {\n\n    function performTest(uniqueName, speed) {\n        var result = functionUnderTest(uniqueName, speed);\n        expect(result).toBeTruthy;\n    }\n\n    it(\"test1\", function () {\n        performTest(\"test1\", \"fast\");\n    });\n\n    it(\"test2\", function () {\n        performTest(\"test2\", \"slow\");\n    });\n});\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE</strong>\nI see the information I need is in:</p>\n\n<pre><code>jasmine.currentEnv_.currentSpec.description\n</code></pre>\n\n<p>or probably better:</p>\n\n<pre><code>jasmine.getEnv().currentSpec.description\n</code></pre>\n"},{"tags":["unit-testing","scala","maven","scalatest","scala-2.9"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":108,"score":0,"question_id":12812458,"title":"Getting started with Scala, Scalatest, and Maven","body":"<p>I created a new scala project with the following:</p>\n\n<pre><code>mvn org.apache.maven.plugins:maven-archetype-plugin:2.2:generate \n    -DarchetypeGroupId=org.scala-tools.archetypes \n    -DarchetypeArtifactId=scala-archetype-simple \n    -DarchetypeVersion=1.3 \n    -DgroupId=myGroup \n    -DartifactId=myProject\n    -Dversion=0.1.0 \n    -DinteractiveMode=false\n</code></pre>\n\n<p>Which gives me the following POM:</p>\n\n<pre><code> &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;groupId&gt;myGroup&lt;/groupId&gt;\n   &lt;artifactId&gt;myProject&lt;/artifactId&gt;\n   &lt;version&gt;0.1.0&lt;/version&gt;\n   &lt;name&gt;${project.artifactId}&lt;/name&gt;\n   &lt;description&gt;My wonderfull scala app&lt;/description&gt;\n   &lt;inceptionYear&gt;2010&lt;/inceptionYear&gt;\n   &lt;licenses&gt;\n     &lt;license&gt;\n       &lt;name&gt;My License&lt;/name&gt;\n       &lt;url&gt;http://....&lt;/url&gt;\n       &lt;distribution&gt;repo&lt;/distribution&gt;\n     &lt;/license&gt;\n   &lt;/licenses&gt;\n\n   &lt;properties&gt;\n     &lt;maven.compiler.source&gt;1.5&lt;/maven.compiler.source&gt;\n     &lt;maven.compiler.target&gt;1.5&lt;/maven.compiler.target&gt;\n     &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n     &lt;scala.version&gt;2.8.0&lt;/scala.version&gt;\n   &lt;/properties&gt;\n\n &lt;!--\n   &lt;repositories&gt;\n     &lt;repository&gt;\n       &lt;id&gt;scala-tools.org&lt;/id&gt;\n       &lt;name&gt;Scala-Tools Maven2 Repository&lt;/name&gt;\n       &lt;url&gt;http://scala-tools.org/repo-releases&lt;/url&gt;\n     &lt;/repository&gt;\n   &lt;/repositories&gt;\n\n   &lt;pluginRepositories&gt;\n     &lt;pluginRepository&gt;\n       &lt;id&gt;scala-tools.org&lt;/id&gt;\n       &lt;name&gt;Scala-Tools Maven2 Repository&lt;/name&gt;\n       &lt;url&gt;http://scala-tools.org/repo-releases&lt;/url&gt;\n     &lt;/pluginRepository&gt;\n   &lt;/pluginRepositories&gt;\n --&gt;\n   &lt;dependencies&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n       &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\n       &lt;version&gt;${scala.version}&lt;/version&gt;\n     &lt;/dependency&gt;\n\n     &lt;!-- Test --&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;junit&lt;/groupId&gt;\n       &lt;artifactId&gt;junit&lt;/artifactId&gt;\n       &lt;version&gt;4.8.1&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n     &lt;/dependency&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;org.scala-tools.testing&lt;/groupId&gt;\n       &lt;artifactId&gt;specs_${scala.version}&lt;/artifactId&gt;\n       &lt;version&gt;1.6.5&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n     &lt;/dependency&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;org.scalatest&lt;/groupId&gt;\n       &lt;artifactId&gt;scalatest&lt;/artifactId&gt;\n       &lt;version&gt;1.2&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n     &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n\n   &lt;build&gt;\n     &lt;sourceDirectory&gt;src/main/scala&lt;/sourceDirectory&gt;\n     &lt;testSourceDirectory&gt;src/test/scala&lt;/testSourceDirectory&gt;\n     &lt;plugins&gt;\n       &lt;plugin&gt;\n         &lt;groupId&gt;org.scala-tools&lt;/groupId&gt;\n         &lt;artifactId&gt;maven-scala-plugin&lt;/artifactId&gt;\n         &lt;version&gt;2.15.0&lt;/version&gt;\n         &lt;executions&gt;\n           &lt;execution&gt;\n             &lt;goals&gt;\n               &lt;goal&gt;compile&lt;/goal&gt;\n               &lt;goal&gt;testCompile&lt;/goal&gt;\n             &lt;/goals&gt;\n             &lt;configuration&gt;\n               &lt;args&gt;\n                 &lt;arg&gt;-make:transitive&lt;/arg&gt;\n                 &lt;arg&gt;-dependencyfile&lt;/arg&gt;\n                 &lt;arg&gt;${project.build.directory}/.scala_dependencies&lt;/arg&gt;\n               &lt;/args&gt;\n             &lt;/configuration&gt;\n           &lt;/execution&gt;\n         &lt;/executions&gt;\n       &lt;/plugin&gt;\n       &lt;plugin&gt;\n         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n         &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n         &lt;version&gt;2.6&lt;/version&gt;\n         &lt;configuration&gt;\n           &lt;useFile&gt;false&lt;/useFile&gt;\n           &lt;disableXmlReport&gt;true&lt;/disableXmlReport&gt;\n           &lt;!-- If you have classpath issue like NoDefClassError,... --&gt;\n           &lt;!-- useManifestOnlyJar&gt;false&lt;/useManifestOnlyJar --&gt;\n           &lt;includes&gt;\n             &lt;include&gt;**/*Test.*&lt;/include&gt;\n             &lt;include&gt;**/*Suite.*&lt;/include&gt;\n           &lt;/includes&gt;\n         &lt;/configuration&gt;\n       &lt;/plugin&gt;\n     &lt;/plugins&gt;\n   &lt;/build&gt;\n &lt;/project&gt;\n</code></pre>\n\n<p>I can run <code>mvn test</code> and the sample tests run successfully.  I'd like to use the most recent version of scala (I downloaded / installed 2.9.2...), but the <a href=\"http://mvnrepository.com/artifact/org.scala-tools.testing\" rel=\"nofollow\">most recent version of the org.scala-tools.testing scala_VERSION dependency seems to be 2.9.1</a>.  I made the following changes in my POM:</p>\n\n<pre><code>    &lt;scala.version&gt;2.9.1&lt;/scala.version&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>    &lt;dependency&gt;\n       &lt;groupId&gt;org.scala-tools.testing&lt;/groupId&gt;\n       &lt;artifactId&gt;specs_${scala.version}&lt;/artifactId&gt;\n       &lt;version&gt;1.6.5&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Now, running <code>mvn test</code> gives </p>\n\n<pre><code> -------------------------------------------------------\n  T E S T S\n -------------------------------------------------------\n Running samples.ListSuite\n Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.674 sec &lt;&lt;&lt; FAILURE!\n initializationError(samples.ListSuite)  Time elapsed: 0.003 sec  &lt;&lt;&lt; ERROR!\n java.lang.ClassCastException: scala.collection.immutable.Set$EmptySet$ cannot be\n  cast to scala.collection.generic.Addable\n         at org.scalatest.FunSuite$class.test(FunSuite.scala:1039)\n         at samples.ListSuite.test(scalatest.scala:59)\n         at samples.ListSuite.&lt;init&gt;(scalatest.scala:61)\n         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\n         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n         at java.lang.reflect.Constructor.newInstance(Constructor.java:525)\n         at java.lang.Class.newInstance0(Class.java:372)\n         at java.lang.Class.newInstance(Class.java:325)\n         at org.scalatest.junit.JUnitRunner.&lt;init&gt;(JUnitRunner.scala:62)\n         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\n         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n         at java.lang.reflect.Constructor.newInstance(Constructor.java:525)\n         at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)\n         at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)\n         at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)\n         at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)\n         at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)\n         at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)\n         at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:51)\n         at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:120)\n         at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:103)\n         at org.apache.maven.surefire.Surefire.run(Surefire.java:169)\n         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n         at java.lang.reflect.Method.invoke(Method.java:601)\n         at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:350)\n         at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)\n\n Running samples.StackSuite\n Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.12 sec\n Running samples.AppTest\n Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec\n\n Results :\n\n Tests in error:\n   initializationError(samples.ListSuite)\n\n Tests run: 4, Failures: 0, Errors: 1, Skipped: 0\n\n [INFO] ------------------------------------------------------------------------\n [INFO] BUILD FAILURE\n [INFO] ------------------------------------------------------------------------\n [INFO] Total time: 6.880s\n [INFO] Finished at: Wed Oct 10 01:10:56 ADT 2012\n [INFO] Final Memory: 9M/112M\n [INFO] ------------------------------------------------------------------------\n [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.6:test (default-test) on project myProject: There are test failures.\n [ERROR]\n [ERROR] Please refer to C:\\Dropbox\\work\\dev\\scalasandbox\\target\\surefire-reports for the individual test results.\n [ERROR] -&gt; [Help 1]\n [ERROR]\n [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n [ERROR]\n [ERROR] For more information about the errors and possible solutions, please read the following articles:\n [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n\n<p>I presumably have some of the most simple tests possible (samples created by the maven archetype plugin), and bumping scala by a single minor version is breaking them?  Should I just stick with scala 2.8 until the maven tools catch up?</p>\n"},{"tags":["unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12813169,"title":"Unit testing for Javascript","body":"<p>Can any one tell me is it possible to create nunit test case for javascript and jquery? if it is possible how to unit test the javascript and jquery?</p>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","tdd","visual-studio-2012","coded-ui-tests"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":312,"score":1,"question_id":12582025,"title":"How To Exclude Tests From VS2012 Test Runner","body":"<p>I am using Visual Studio 2012 and am keen to take advantage of the new features.</p>\n\n<p>I have attributes on certain tests that I ideally don't want to run on every build. Most of my tests are normal unit tests and I do want them to run on every build.</p>\n\n<p>So how can I exclude a test by category or project type?</p>\n\n<p>For example, exclude Coded UI tests:</p>\n\n<pre><code>[CodedUITest]\npublic class SearchViewTests\n</code></pre>\n\n<p>Or exclude tests in a given Test Category:</p>\n\n<pre><code>[TestMethod]\n[TestCategory(\"Database Integration\")]\npublic void ContactRepositoryGetByIdWithIdExpectCorrectContact()\n</code></pre>\n\n<p>I particularly want to exclude the coded UI tests as they disrupt my ability to continue working, whereas all the other tests will happily run in the background without disturbing me.</p>\n"},{"tags":["java","spring","hibernate","unit-testing","exception"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":131,"score":0,"question_id":12808388,"title":"Spring 3.1 and Hibernate 4: \"HibernateException: No Session found for current thread\" When calling DAO method from unit test","body":"<p>I'm using Spring 3.1 and Hibernate 4.1, and I'm currently getting the following exception when I run a repository test:</p>\n\n<pre><code>Caused by: org.hibernate.HibernateException: No Session found for current thread\n    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)\n    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1041)\n</code></pre>\n\n<p>Here's what a DAO looks like. It uses the same generics dao pattern that basically everyone else is using:</p>\n\n<pre><code>@Repository\npublic class UserRepository extends RepositorySupport&lt;User&gt; {\n\n    public UserRepository() {\n        super(User.class);\n    }\n\n    public User findByUsername(final String username) {\n        Query query = getCurrentSession().createQuery(\n            \"from User user \" +\n            \"where user.username = :username\"\n        );\n\n        return (User) query.setParameter(\"username\", username)\n            .uniqueResult();\n    }\n</code></pre>\n\n<p>The only thing different here that I normally wouldn't do is that I am not using <code>getHibernateTemplate()</code> anymore - and that's why I suspect things aren't working. I'd rather not use this method if I can avoid it, as the resultant code looks horrible.</p>\n\n<p>My hibernate beans look like this:</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\"\n      class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;property name=\"mappingResources\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;hibernate/tag.hbm.xml&lt;/value&gt;\n            &lt;value&gt;hibernate/address.hbm.xml&lt;/value&gt;\n            &lt;value&gt;hibernate/user.hbm.xml&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"namingStrategy\"&gt;\n        &lt;bean class=\"org.hibernate.cfg.ImprovedNamingStrategy\"/&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"javax.persistence.validation.mode\"&gt;none&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2ddl.auto}\n            &lt;/prop&gt;\n            &lt;prop key=\"hibernate.generate_statistics\"&gt;false&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.show_sql\"&gt;false&lt;/prop&gt;\n            &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.cache.use_second_level_cache\"&gt;false&lt;/prop&gt;\n            &lt;prop key=\"hibernate.cache.provider_class\"&gt;\n\n            &lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean class=\"org.springframework.orm.hibernate4.HibernateExceptionTranslator\"/&gt;\n\n&lt;bean id=\"transactionManager\"\n      class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;!--\n&lt;bean id=\"hibernateInterceptor\"\n      class=\"org.springframework.orm.hibernate4.HibernateInterceptor\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n--&gt;\n\n&lt;tx:advice id=\"transactionAdvice\" transaction-manager=\"transactionManager\"&gt;\n    &lt;tx:attributes&gt;\n        &lt;tx:method name=\"find*\" read-only=\"true\" propagation=\"REQUIRED\"/&gt;\n        &lt;tx:method name=\"get*\" read-only=\"true\" propagation=\"REQUIRED\"/&gt;\n        &lt;tx:method name=\"*\" propagation=\"REQUIRED\"/&gt;\n    &lt;/tx:attributes&gt;\n&lt;/tx:advice&gt;\n\n&lt;aop:config&gt;\n    &lt;aop:advisor advice-ref=\"transactionAdvice\"\n                 pointcut=\"execution(* *..service.*.*(..))\" order=\"1\"/&gt;\n    &lt;!-- gets sub packages like service.user --&gt;\n    &lt;aop:advisor advice-ref=\"transactionAdvice\"\n                 pointcut=\"execution(* *..service.*.*.*(..))\" order=\"2\"/&gt;\n&lt;/aop:config&gt;\n\n&lt;bean id=\"validator\"\n      class=\"org.springframework.validation.beanvalidation.LocalValidatorFactoryBean\"/&gt;\n\n&lt;context:annotation-config/&gt;\n&lt;context:spring-configured/&gt;\n&lt;context:component-scan base-package=\"com.realtywebsite.repositories,com.realtywebsite.service\"/&gt;\n\n&lt;task:annotation-driven /&gt;\n</code></pre>\n\n<p>My test code looks something like this (I have to flatten it because my tests extend from a common parent test class):</p>\n\n<pre><code>@ContextConfiguration(locations = {\n    ObjectMother.APPLICATION_CONTEXT,\n    ObjectMother.WEB_CONTEXT\n})\npublic abstract class DatabaseTest extends AbstractTransactionalJUnit4SpringContextTests {\n\n\n    @Test\n    public void delete() {\n        userRepository.delete(1);\n        flush();\n\n        assertFalse(userRepository.exists(1));\n    }\n\n    ...\n</code></pre>\n\n<p>Thanks for the help!</p>\n"},{"tags":["visual-studio-2010","unit-testing","testing","tfs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12812118,"title":"Coded UI: assertion on password","body":"<p>i m working on login Screen in CodeUI. i have done assertion on UserName and Password Textbox. But Password assertion is no working. Because it don't contain Any text property like username.</p>\n\n<p>Please guide me if i m wrong...</p>\n\n<p>Thanks,\nJohn </p>\n"},{"tags":["php","unit-testing","routes","phpunit","zend-framework2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":12783622,"title":"Routing tests in ZF2 / ZF2 equivalent of Zend_Test_PHPUnit_Controller_TestCase?","body":"<p>Thus far I've been testing my ZF2 controllers as follows:</p>\n\n<pre><code>namespace Application\\Controller;\n\nuse Application\\Controller\\IndexController;\nuse Zend\\Http\\Request;\nuse Zend\\Http\\Response;\nuse Zend\\Mvc\\MvcEvent;\nuse Zend\\Mvc\\Router\\RouteMatch;\nuse PHPUnit_Framework_TestCase;\n\nclass IndexControllerTest extends PHPUnit_Framework_TestCase\n{\n    public function testIndexActionCanBeAccessed()\n    {\n        $this-&gt;routeMatch-&gt;setParam('action', 'index');\n\n        $result   = $this-&gt;controller-&gt;dispatch($this-&gt;request);\n        $response = $this-&gt;controller-&gt;getResponse();\n\n        $this-&gt;assertEquals(200, $response-&gt;getStatusCode());\n        $this-&gt;assertInstanceOf('Zend\\View\\Model\\ViewModel', $result);\n    }\n\n    protected function setUp()\n    {\n        \\Zend\\Mvc\\Application::init(include 'config/application.config.php');\n\n        $this-&gt;controller = new IndexController();\n        $this-&gt;request    = new Request();\n        $this-&gt;routeMatch = new RouteMatch(array('controller' =&gt; 'index'));\n        $this-&gt;event      = new MvcEvent();\n        $this-&gt;event-&gt;setRouteMatch($this-&gt;routeMatch);\n        $this-&gt;controller-&gt;setEvent($this-&gt;event);\n    }\n\n    protected $controller = null;\n    protected $event = null;\n    protected $request = null;\n    protected $response = null;\n    protected $routeMatch = null;\n}\n</code></pre>\n\n<p>This allows me to test that the ViewModel is having the correct data (if any) assigned to it before the view is rendered. This serves that purpose just fine, but what it doesn't do is test that my routing is working correctly like the ZF1 <code>Zend_Test_PHPUnit_Controller_TestCase</code> tests would.</p>\n\n<p>In those, I'd kick off the test by running <code>$this-&gt;dispatch('/some/relative/url')</code> and only get positive test results if the routes were set up correctly. With these ZF2 tests, I'm specifically telling it which route to use, which doesn't necessarily mean that a real request will be routed correctly.</p>\n\n<p>How do I test that my routing is working correctly in ZF2?</p>\n"},{"tags":["ruby-on-rails","ruby","ruby-on-rails-3","unit-testing","rspec"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12811207,"title":"comparison of Date with ActiveSupport::TimeWithZone failed","body":"<p>I have an <code>age</code> method on my <code>Waiver</code> model that looks like:</p>\n\n<pre><code>  def age(date = nil)\n\n    if date.nil?\n      date = Date.today\n    end\n    age = 0\n    unless date_of_birth.nil?\n      age = date.year - date_of_birth.year\n      age -= 1 if date &lt; date_of_birth + age.years #for days before birthday\n    end\n    return age\n  end\n</code></pre>\n\n<p>I then have a spec that looks like:</p>\n\n<pre><code>it \"calculates the proper age\" do\n waiver = FactoryGirl.create(:waiver, date_of_birth: 12.years.ago)\n waiver.age.should == 12\nend\n</code></pre>\n\n<p>When I run this spec I get <code>comparison of Date with ActiveSupport::TimeWithZone failed</code>. What am I doing wrong?</p>\n\n<pre><code>Failures:\n\n  1) Waiver calculates the proper age\n     Failure/Error: waiver.age.should == 12\n     ArgumentError:\n       comparison of Date with ActiveSupport::TimeWithZone failed\n     # ./app/models/waiver.rb:132:in `&lt;'\n     # ./app/models/waiver.rb:132:in `age'\n     # ./spec/models/waiver_spec.rb:23:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n"},{"tags":["python","unit-testing","parameters"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12809970,"title":"python, unittest, test a script with command line args","body":"<p>I've written a python script that takes command line arguments and plays one round of Tic Tac Toe.<br>\nrunning it looks like this...</p>\n\n<blockquote>\n  <p>run ttt o#xo##x## x 0 1 </p>\n</blockquote>\n\n<p>If the move is legal it then prints the new board layout and whether anyone won the game</p>\n\n<p>I have to write tests for it using unittest. I dont know how to test the whole script with various command line parameters, all the examples I've seen seem to just test individual functions within the script.\nAlso the script uses <code>argparse</code> to parse the parameters</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","unit-testing","spring-mvc","controller"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":119,"score":1,"question_id":12775539,"title":"With Spring 3.1, How do you test urls for your controllers?","body":"<p>In prior versions of spring (3.0), it was possible to test your controllers via the correct urls using the RequestMappingHandlerAdapter and HandlerMapping objects in the ApplicationContext. However, in Spring 3.1, things have changed and the code I used to use to make this work no longer functions.</p>\n\n<p>How do you test Spring controller urls in Spring 3.1? For example, I'd like to write code that looks like this:</p>\n\n<pre><code>ModelAndView modelAndView = handle(\"GET\", \"/businesses\");\n</code></pre>\n\n<p>That way I'm testing my mappings in addition to the controller's action logic.</p>\n\n<p>In particular, I am most interested in making sure that I can pass session attributes and have them correctly passed to my controller actions's @Valid annotation.</p>\n\n<p>Is there any way to accomplish this with Spring 3.1?</p>\n\n<p>This is the code I was using:</p>\n\n<pre><code>protected ModelAndView handle(HttpServletRequest request, HttpServletResponse response) throws Exception {\n    final HandlerMapping handlerMapping = applicationContext.getBean(RequestMappingHandlerMapping.class);\n\n    final HandlerExecutionChain handler = handlerMapping.getHandler(request);\n    assertNotNull(\"No handler found for request, check you request mapping\", handler);\n\n    final Object controller = handler.getHandler();\n\n    final HandlerInterceptor[] interceptors = handlerMapping.getHandler(request).getInterceptors();\n    for (HandlerInterceptor interceptor : interceptors) {\n        final boolean carryOn = interceptor.preHandle(request, response, controller);\n        if (!carryOn) {\n            return null;\n        }\n    }\n\n    return handlerAdapter.handle(request, response, controller);\n}\n\nprotected ModelAndView handle(String method, String path, String queryString) throws Exception {\n    request.setMethod(method);\n    request.setRequestURI(path);\n\n    if(queryString != null) {\n        String[] parameters = queryString.split(\"&amp;\");\n        for(String parameter : parameters) {\n            String[] pair = parameter.split(\"=\");\n            if(pair.length == 2) {\n                request.setParameter(pair[0], pair[1]);\n            } else {\n                request.setParameter(pair[0], \"\");\n            }\n        }\n    }\n\n    return handle(request, response);\n}\n\nprotected ModelAndView handle(String method, String path, String attribute, Object object) throws Exception {\n    MockHttpSession session = new MockHttpSession();\n    session.setAttribute(attribute, object);\n    request.setSession(session);\n\n    return handle(method, path, null);\n}\n\nprotected ModelAndView handle(String method, String path) throws Exception {\n    return handle(method, path, null);\n}\n\nprotected void assertContentType(ModelAndView modelAndView, String contentType) {\n    assertEquals(contentType, modelAndView.getView().getContentType());\n}\n</code></pre>\n"},{"tags":["javascript","unit-testing","node.js"],"answer_count":4,"favorite_count":8,"up_vote_count":38,"down_vote_count":0,"view_count":7218,"score":38,"question_id":7254025,"title":"Node.js Unit Testing","body":"<p>Are there any good node.js (server side js) unit testing frameworks currently out there?  I'm looking for something a little deeper than the Assert module provided.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","unit-testing","tdd"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":12809517,"title":"Initializing class C#","body":"<p>What is the best way of initiating the class and hold that initialization in a variable for other method to use instead of initiating every time.</p>\n\n<p>here is my code:</p>\n\n<pre><code>private Employee employee;\npublic Employee SystemUnderTest\n{\n   get \n   {\n       if (employee == null)\n       {\n          employee = new Employee();\n       }\n      return employee;\n   }\n}\n\n//..method1 Test1\n   public void TestMethod1()\n   {\n     Assert.IsTrue(SystemUnderTest.IsActive());\n   }\n\n   //..method2 Test   \n   public void TestMethod2()\n   {\n     Assert.IsTrue(SystemUnderTest.IsEmployeeExists());\n   }\n</code></pre>\n\n<p>PS: when debugging I noticed that it does initialize Employee object with every method.</p>\n\n<p>using 3.5 framework.</p>\n"},{"tags":[".net","unit-testing","asynchronous","nunit","async-await"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":308,"score":5,"question_id":12191831,"title":"How do I test an async method with NUnit, eventually with another framework?","body":"<p>I have an ASP.NET Web API application, with an ApiController that features asynchronous methods, returning <code>Task&lt;&gt;</code> objects and marked with the <code>async</code> keyword.</p>\n\n<pre><code>public class MyApiController : ApiController\n{\n    public async Task&lt;MyData&gt; GetDataById(string id)\n    {\n        ...\n    }\n}\n</code></pre>\n\n<p>How can I write NUnit tests for the ApiController's asynchronous methods? If I need to use another testing framework I'm open for that too. I'm fairly new to .NET unit testing in general, so I'm interested in learning best practices.</p>\n"},{"tags":["javascript","unit-testing","automated-tests","yui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12809338,"title":"Where do I get the jar files for YUI Test code coverage?","body":"<p>The <a href=\"https://github.com/yui/yuitest/wiki/Code-Coverage\" rel=\"nofollow\">YUI Test -Code Coverage Utility documentation</a> suggests that we need some jar files to instrument the code:</p>\n\n<pre><code>yuitest-coverage-x.y.z.jar - used to instrument JavaScript code.\nyuitest-coverage-report-x.y.z.jar - used to generate reports from the JSON code coverage output.\n</code></pre>\n\n<p>where do I get these jar files?  Please tell me there is a bin somewhere that I can download.</p>\n"},{"tags":["unit-testing","testing","grails","spring-security"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":12806931,"title":"Grails Spring Security Testing","body":"<p>I use the Grails Spring Security Plugin for my project and now want to unit test my code. I have the following code in my controller:</p>\n\n<pre><code>def index() {\n    redirect action: 'show', params: [id: springSecurityService.currentUser.id]\n}\n</code></pre>\n\n<p>My Test Class has the following code:</p>\n\n<pre><code>void testIndex() {      \n    controller.index()\n    assert \"/user/list\" == response.redirectedUrl\n}\n</code></pre>\n\n<p>This test fails:</p>\n\n<pre><code>| Running 8 unit tests... 1 of 8\n| Failure:  testIndex(xxx.UserControllerTests)\n|  java.lang.NullPointerException: Cannot get property 'currentUser' on null object\n    at xxx.UserController.index(UserController.groovy:12)\n    at xxx.UserControllerTests.testIndex(UserControllerTests.groovy:19)\n</code></pre>\n\n<p>How can I authenticate a spring security user in a test case? How would you write the unit test?</p>\n"},{"tags":["java","unit-testing","junit","junit4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12805305,"title":"How to embed a JUnit Test Suite in another Suite","body":"<p>I have an old Junit3 TestSuite I am trying to upgrade. I see this in the setup...</p>\n\n<p>suite.addTest(AllSubTests.suite());</p>\n\n<p>What is the equivalent in Junit 4?</p>\n"},{"tags":["java","unit-testing","testing","null","guava"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12791737,"title":"guava-testlib future version JAR","body":"<p>Today, the current Guava version seems to be:</p>\n\n<p><code>release is 13.0.1, August 3, 2012.</code></p>\n\n<p>but I checked out the source off of:</p>\n\n<p><code>git clone https://code.google.com/p/guava-libraries/</code></p>\n\n<p>and got intrigued by what seems like an <em>extremely</em> useful testing tool to me:</p>\n\n<p><a href=\"http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java\" rel=\"nofollow\">http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java</a></p>\n\n<p>I am trying to verify that all of my methods detest <code>null</code> just as much as Doug Lea ( <a href=\"http://gee.cs.oswego.edu/dl/html/vita.html\" rel=\"nofollow\">http://gee.cs.oswego.edu/dl/html/vita.html</a> ) seems to do, unless Joshua Bloch misquotes him ( <a href=\"http://www.youtube.com/watch?v=ZeO_J2OcHYM#t=26m35s\" rel=\"nofollow\">http://www.youtube.com/watch?v=ZeO_J2OcHYM#t=26m35s</a> ) in being \"null-hostile\".</p>\n\n<p>Anyway, <code>NullPointerTester.java</code> seems to be just perfect so I am trying to build it into my project.</p>\n\n<p>Following the dependencies (<code>NullPointerTester</code> -> <code>Invokable&lt;?, ?&gt;</code>, -> ... for example) is tedious as I run into classes that are <code>@since 14.0</code>, basically belong to a future version.</p>\n\n<p>What's the best way to build a self-contained JAR of the next/future version of Guava, with all dependencies being taken care of for me? Note: the sources seem to be \"all\" on <code>git</code>...</p>\n\n<hr>\n\n<p><em>You can stop reading here.</em></p>\n\n<p>I can't wait to be doing stuff like this, which is really cool I think:</p>\n\n<ul>\n<li><a href=\"http://www.massapi.com/class/nu/NullPointerTester.html\" rel=\"nofollow\">http://www.massapi.com/class/nu/NullPointerTester.html</a></li>\n</ul>\n\n<p>Note: what's missing are \"security checks\", as in \"if the constructor has been made private, check that I cannot reflect-invoke it anyway...</p>\n\n<p>If I were a better coder I'd contribute, but this is all I can do and it's very poor, although the intent should be clear?</p>\n\n<pre><code>static boolean isDefaultConstructorDisabled(Class&lt;?&gt; type) {\n  boolean isDefaultConstructorDisabled = false;\n  Constructor&lt;?&gt;[] declaredConstructors = type.getDeclaredConstructors();\n  Constructor&lt;?&gt; defaultContructor = declaredConstructors[0];\n  defaultContructor.setAccessible(true);\n  try {\n    defaultContructor.newInstance();\n  } catch (InvocationTargetException invocationTargetException) {\n    Throwable cause = invocationTargetException.getCause();\n    if (cause instanceof UnsupportedOperationException\n        &amp;&amp; cause.getMessage().contains(\n            ErrorMessage.DefaultConstructor.DISABLED)) {\n      isDefaultConstructorDisabled = true;\n    }\n  } catch (Throwable throwable) {\n    throwable.printStackTrace();\n  }\n  return isDefaultConstructorDisabled;\n}\n</code></pre>\n"},{"tags":["c#",".net","unit-testing","mongodb","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":103,"score":4,"question_id":12804662,"title":"Mongodb unit testing in .NET","body":"<p>I am trying to do tdd and use mongodb as database. But i cant resolve problem of mocking mongodb. Is there any ability to mock mongodb for unit testing in .NET? </p>\n\n<hr>\n\n<p>Update</p>\n\n<p>I found very good soltion reading blog.\nYou can find it <a href=\"http://thoai-nguyen.blogspot.com/2012/06/how-i-mock-mongo-collection.html\" rel=\"nofollow\">here</a>:</p>\n"},{"tags":["c","unit-testing","makefile"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12778430,"title":"creating unit testing using makefile","body":"<pre><code>gcc 4.7.2\nc89\n</code></pre>\n\n<p>Hello,</p>\n\n<p>I am wondering does any one know of any tutorials or text books that cover using makefile to create some simple unit testing for my c programs.</p>\n\n<p>I would like to run some automated testing that will create a test suite and add this to my Makefile.</p>\n\n<p>Just want some ideas on how to get started. </p>\n\n<p>Many thanks for any suggestions</p>\n"},{"tags":["c#",".net","unit-testing"],"answer_count":5,"favorite_count":7,"up_vote_count":28,"down_vote_count":0,"view_count":9310,"score":28,"question_id":358196,"title":"C# \"internal\" access modifier when doing unit testing","body":"<p>I'm new in unit testing and I'm trying to figure out if I should start using more of 'internal' access modifier. I know that if we use 'internal' and set the assembly variable  'InternalsVisibleTo', we can test functions that we don't want to declare public from the testing project. This makes me think that I should just always use 'internal' because at least each project (should?) has it's own testing project. Can you guys tell me a reason why I shouldn't do this? When should I use 'private'?</p>\n"},{"tags":["visual-studio-2010","unit-testing",".net-4.0","mstest"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":12799289,"title":"Setting test settings within unit test class","body":"<p>Is there a way to programatically set which test settings to use within the TestClass or TestMethods themselves? Currently i've been switching the test settings manually, but would prefer to switch with code if possible.</p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12797092,"title":"Unexpected behavior at the IDE","body":"<p>MS Visual Studio 2010 SP1.</p>\n\n<p>I have wrote some class. Then I have wrote unit tests for it. Please, look at the my first screen:</p>\n\n<p><img src=\"http://i.stack.imgur.com/OctDC.png\" alt=\"enter image description here\"></p>\n\n<p>If I run unit test via \"1\" button, then  a code works as I have expect, but if I run unit test via \"2\" button, then I have unexpected behavior. Please, look at the my second screen:</p>\n\n<p><img src=\"http://i.stack.imgur.com/LjN83.png\" alt=\"enter image description here\"></p>\n\n<p>When the condition </p>\n\n<pre><code>if (null == acadRegistryKey)\n</code></pre>\n\n<p>is true, I press the <kbd>F10</kbd> key and go to row number 175. I press <kbd>F10</kbd> key again, and... I go to row number 177. Why it happens??? After row number 175 I must have return from method, because exception must occur.</p>\n\n<p>Best Regards, \nAndrey</p>\n"},{"tags":["ruby-on-rails","unit-testing","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12794528,"title":"Test the number of activerecord queries in ruby unit test","body":"<p>Is there a way to test for the number of mysql queries made by a specific function ? Just want to keep a check on the query limit, as a minor change in the function would trigger 1000 queries in place of just one. </p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":144,"score":2,"question_id":12792378,"title":"System.ArgumentNullException: Value cannot be null","body":"<p>I'm creating a Unit Test for my CRUD and receiving this kind of error in my Delete test method: </p>\n\n<pre><code>System.ArgumentNullException: Value cannot be null.\n</code></pre>\n\n<p>I checked and found out that whenever I'm running the test, the contents under my userID was already deleted but receiving a \"Failed\" status in my Test Results bar. Can anyone help me resolve my issue?</p>\n\n<pre><code>Error Message: Test method TestProject1.UserTest.Delete threw exception: \nSystem.ArgumentNullException: Value cannot be null.\nParameter name: entity\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>[TestMethod]\npublic void Delete()\n{\ntaskModelContainer db = new taskModelContainer();\n\nint userID = 7;\n\nTaskMgr.Models.User UserEntity = new TaskMgr.Models.User();\n\nUserEntity.userID = userID;\n\nUserController User = new UserController();\n\nActionResult result = User.DeleteConfirmed(UserEntity.userID);\nint id = Convert.ToInt32(User.ViewBag.id);\nUser Users = db.Users.Single(e =&gt; e.userID == id);\n\n\nAssert.IsNull(Users.userID);\n\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>[HttpPost, ActionName(\"Delete\")]\n    public ActionResult DeleteConfirmed(int id)\n    {\n        User user = db.Users.Find(id);\n        db.Users.Remove(user);\n        db.SaveChanges();\n        var qry = from e in db.Users orderby e.userID descending select e.userID;\n        int eID = qry.First();\n        ViewBag.id = user.userID;\n        return RedirectToAction(\"Index\");\n    }\n</code></pre>\n\n<p>It stops at this line of the controller: db.Users.Remove(user);</p>\n"},{"tags":["unit-testing","testing","testng","jmock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12778616,"title":"Why do TestNG tests passe individually but, fail when run in suite?","body":"<p>My TestNG tests passes individually, but fails when running in suite.I use JMock as my mock framework. I downloaded the source of TestNG and JMock, in order to be able to debug the code.</p>\n\n<p>When I debug the code of the testing framework (the code that runs the tests) I noticed that the assertions that JMock verifies were 13 assertions but, my test has 2 assertions.</p>\n"},{"tags":["ruby-on-rails","unit-testing","testcase"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12636119,"title":"What's the difference between \"setup do\" and \"def setup\" in ActiveSupport::TestCase?","body":"<p>I'm using Ruby 1.8.7 and Rails 2.3.6. While creating a couple of unit tests, I got curious about the difference between <code>setup</code> block and <code>setup</code> method in a test.</p>\n\n<p>First, I used setup block:</p>\n\n<pre><code>setup do                   \n  attr = {:title =&gt; \"Untitled\", :content =&gt; \"content\"} \n  @post = Post.create!(attr)\nend\n\ntest \"title\" do\n  assert_equal \"Untitled\", @post.title\nend\n</code></pre>\n\n<p>The test failed because <code>@post</code> was nil.</p>\n\n<p>Then I used setup method:</p>\n\n<pre><code>def setup                    \n  attr = {:title =&gt; \"Untitled\", :content =&gt; \"content\"} \n  @post = Post.create!(attr)\nend\n\ntest \"title\" do\n  assert_equal \"Untitled\", @post.title\nend\n</code></pre>\n\n<p>And the test passed.</p>\n\n<p>What makes the result different? I read <a href=\"http://blog.tddium.com/tag/activesupporttestcase/\" rel=\"nofollow\">this post</a> but I can't understand the difference clearly. How can I pass the test using <code>setup</code> block? </p>\n\n<p>Thanks for any advices/corrections.</p>\n"},{"tags":["unit-testing","clojure"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":12787193,"title":"Is it possible to tweak the output of clojure.test?","body":"<p>I have this test:</p>\n\n<pre><code>(ns opengltuts.core-test\n  (:use clojure.test\n        opengltuts.util)\n  (:import (org.lwjgl.opengl\n             GL11 GL12 GL13 GL14 GL15 GL20 GL21 GL30 GL31 GL32 GL33)))\n\n(def gl-classes [GL11 GL12 GL13 GL14 GL15 GL20 GL21 GL30 GL31 GL32 GL33])\n\n(deftest find-method-test\n  (testing \"find-method finds method in single class\"\n    (is (= (find-method \"toString\" Object)\n           [\"public java.lang.String java.lang.Object.toString()\"])))\n  (testing \"find-method finds all methods in list of classes\"\n    (is (= (apply find-method \"glShaderSource\" gl-classes)\n           (comment \"Omitted a 'p' to trigger failure\")\n           [\"ublic static void org.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)\"\n            \"public static void org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)\"\n            \"public static void org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])\"]))))\n</code></pre>\n\n<p>Now I made sure this fails, I get output like</p>\n\n<pre><code>lein test opengltuts.core-test\n\nFAIL in (find-method-test) (core_test.clj:14)\nfind-method finds all methods in list of classes\nexpected: (= (apply find-method \"glShaderSource\" gl-classes) [\"ublic static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])\"])\n      actual: (not (= (\"public static void org.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])\") [\"ublic static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])\"]))\n\nRan 1 tests containing 2 assertions.\n1 failures, 0 errors.\nTests failed.\n</code></pre>\n\n<p>I find this fairly unreadable. Rather than that, I would prefer output like:</p>\n\n<pre><code>&lt;all that info stuff, like the name of the test&gt;\nExpected: [something]\nGot: [something-else]\n</code></pre>\n\n<p>As is, I have troubles just figuring out what I was comparing with what.</p>\n"},{"tags":["javascript","unit-testing","qunit"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":41,"score":4,"question_id":12791155,"title":"How to have a real atomic test in QUnit?","body":"<p>Say that I have two classes called <code>Book</code> and <code>Library</code> as follow:</p>\n\n<pre><code>var Book = function(title, author)\n{\n   this.title = title;\n   this.author = author;\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>var Library = function()\n{\n   var dbName = 'test';\n\n   this.getLibrary = function() {\n      return JSON.parse(window.localStorage.getItem(dbName));\n   };\n\n   this.save = function(library) {\n      window.localStorage.setItem(dbName, JSON.stringify(library));\n   };\n}\n\nLibrary.prototype.addBook = function(book) {\n   var library = this.getLibrary();\n   library.push(book);\n\n   this.save(library);\n\n   return library;\n};\n\nLibrary.prototype.removeBook = function(book) {\n   var library = this.getLibrary();\n\n   // Find and delete the right book\n\n   this.save(library);\n\n   return library;\n};\n</code></pre>\n\n<p>My question is: How can I Unit testing the <code>Library</code> class using QUnit to have a real atomic and independent test?</p>\n\n<p>I wrote this test function but it has not satisfied me. It does not seem to be very atomic and independent since it mix several functions that I think should be tested independently. I'd like to know if there's a better way or I'm testing it good already.</p>\n\n<pre><code>test(\"test\", function() {\n   var library = new Library();\n\n   deepEqual(library.getLibrary(), []);\n\n   // Add book1\n   var book1 = new Book(\"A book\", \"An author\");\n   deepEqual(library.addBook(book1), [book1]);\n   deepEqual(library.getLibrary(), [book1]);\n\n   // Add book2    \n   book2 = new Result(\"A new book\", \"Another author\");\n   deepEqual(library.addBook(book2), [book2, book1]);\n   deepEqual(library.getLibrary(), [book2, book1]]);\n\n   // Remove book1\n   deepEqual(library.removeResult(book1), [book2]);\n   deepEqual(library.getLibrary(), [book2]);\n\n   // Remove book2\n   deepEqual(library.removeResult(book2), []);\n   deepEqual(library.getLibrary(), []);\n});\n</code></pre>\n"},{"tags":["c++","multithreading","unit-testing","concurrency","boost-test"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":157,"score":3,"question_id":12304927,"title":"Is there a way to run C++ Unit Tests tests in parallel?","body":"<p>I'm using Boost Test for a long time now and I ends up having my tests running too slowly. As each test is highly parallel, I want them to run concurrently with all my cores. </p>\n\n<p>Is there a way to do that using the Boost Test Library ? I didn't found any solution. I tried to look a how to write custom test runner, but I didn't much documentation on that point :(</p>\n\n<p>If there is no way, does someone know a good C++ Test Framework to achieve that goal ? I was thinking that Google Test would do the job but apparently it cannot run test in parallel either. Even if the framework has less features than other more known framework, it is not a problem, I just need simple assertions and multi-threaded execution. </p>\n\n<p>Thanks</p>\n"},{"tags":["c#",".net","unit-testing","naudio"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12780411,"title":"Unit Testing NAudio with ManualResetEvent Locks Up Test","body":"<p>Alright, I'm trying to unit test NAudio against a wrapper I created for a recording session, here is the code that starts and stops a recording session ...</p>\n\n<pre><code>public void StartRecording(string claimNo, string ip_no, string ip_name)\n{\n    if (this.IsRecording)\n    {\n        return;\n    }\n\n    this.Recordings.Add(new RecordingTrack(claimNo, ip_no, ip_name));\n    if (this.MicrophoneLevel == default(float))\n    {\n        this.MicrophoneLevel = .75f;\n    }\n\n    _aggregator.Reset();\n\n    _input = new WaveIn();\n    _input.WaveFormat = _waveFormat;\n\n    _input.DataAvailable += (s, args) =&gt;\n        {\n            _writer.Write(args.Buffer, 0, args.BytesRecorded);\n            byte[] buffer = args.Buffer;\n            for (int index = 0; index &lt; args.BytesRecorded; index += 2)\n            {\n                short sample = (short)((buffer[index + 1] &lt;&lt; 8) | buffer[index + 0]);\n                float sample32 = sample / 32768f;\n                _aggregator.Add(sample32);\n            }\n\n            if (this.DataAvailable != null)\n            {\n                this.DataAvailable(s, args);\n            }\n\n            if (!this.IsRecording)\n            {\n                _writer.Close();\n                _writer.Dispose();\n                _writer = null;\n            }\n        };\n    _input.RecordingStopped += (s, args) =&gt;\n        {\n            _input.Dispose();\n            _input = null;\n\n            if (this.RecordingStopped != null)\n            {\n                this.RecordingStopped(s, args);\n            }\n        };\n\n    _writer = new WaveFileWriter(this.CurrentRecording.FileName, _input.WaveFormat);\n\n    _input.StartRecording();\n    this.IsRecording = true;\n}\n\npublic void StopRecording()\n{\n    if (!this.IsRecording)\n    {\n        return;\n    }\n\n    this.CurrentRecording.Stop();\n\n    this.IsRecording = false;\n    _input.StopRecording();\n}\n</code></pre>\n\n<p>... and below is my unit test. I'm using a <code>ManualResetEvent</code> to assert the success of the event being fired and it's declared like this ...</p>\n\n<pre><code>private ManualResetEvent _eventRaised = new ManualResetEvent(false);\n</code></pre>\n\n<p>... however, the issue is that the test below simply locks up and the event is never fired. <strong>Can you confirm that the issue is that the <code>WaitOne</code> is not allowing the event to fire because it's locking the same thread?</strong></p>\n\n<pre><code>bool success = false;\n_eventRaised.Reset();\n\nvar target = new RecordingSession();\ntarget.StartRecording(\"1\", \"01\", \"Test Name\");\n\ntarget.RecordingStopped += (s, args) =&gt;\n    {\n        success = (target.CurrentRecording.Duration.TotalSeconds &gt; 4);\n        _eventRaised.Set();\n    };\n\nThread.Sleep(4000);\ntarget.StopRecording();\n\n_eventRaised.WaitOne();\n\nAssert.IsTrue(success);\n</code></pre>\n\n<p><strong>And if so, can you help me with this test?</strong> I need some enlightenment.</p>\n\n<p>I've used the <code>ManualResetEvent</code> many times to test events on other classes and it's worked, but something is different here.</p>\n"},{"tags":["android","unit-testing"],"answer_count":7,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1073,"score":2,"question_id":4116604,"title":"Android Test Automation","body":"<p>How can i automate Android Apis for better quality ? How can i test the android applications to get a better quality of this software..? </p>\n"},{"tags":["visual-studio-2010","unit-testing","specflow"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":583,"score":3,"question_id":6086889,"title":"SpecFlow - running parallel tests","body":"<p>I'm implementing tests using SpecFlow that have nothing to do with each other. Is there config option for SpecFlow that enables parallel test execution? I'm using VS10 and MSTest runner that supports running \"up to 5 parallel unit tests\" as they claim in documentation.</p>\n\n<p>Thanks,\nmax.yz</p>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-mvc-4","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":91,"score":3,"question_id":12783277,"title":"Mocking static method in ASP.NET MVC Test project","body":"<p>I have a method which looks like the one below</p>\n\n<pre><code>public List&lt;Rajnikanth&gt; GetRajnis()\n{\n    string username = Utility.Helpers.GetLoggedInUserName();\n    return _service.GetRajni(username);\n}   \n</code></pre>\n\n<p>Utility.Helper is a static class,\npublic static class Helpers\n{</p>\n\n<pre><code>public static String GetLoggedInUserName()\n{\n    string username = \"\";\n    if (System.Web.HttpContext.Current.User.Identity.IsAuthenticated)\n    {\n        username = ((System.Web.Security.FormsIdentity)HttpContext.Current.User.Identity).Ticket.Name;\n    }\n    return username;\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I want to <strong>test</strong> : GetRajnis()</p>\n\n<p>I want to <strong>mock</strong> : GetLoggedInUserName()</p>\n\n<p>So my test method looks something like...</p>\n\n<pre><code>[TestMethod]\npublic void TestGetRajnis()\n{\n    SomeController s = new SomeController(new SomeService());\n    var data = s.GetRajnis();\n    Assert.IsNotNull(data);\n}\n</code></pre>\n\n<p>how do I mock the static method GetLoggedInUserName() ?</p>\n"},{"tags":["c#","entity-framework","unit-testing","dbcontext"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":100,"score":4,"question_id":12786254,"title":"Should unit test project has reference to EF dll when context is abstracted","body":"<p>I am abstracting my DbContext in an attempt to address Separate of Concerns and make my code unit-testable. In order to do that I have come up with following interface.</p>\n\n<p>This interface below is hosted in Assembly named <strong>AllInterfaces</strong>. This project has a reference to EF dll due to IDbSet in declaration below.</p>\n\n<pre><code>public interface ISalesContext : IDisposable   \n{   \n  IDbSet&lt;Customer&gt; Customers { get; }   \n  IDbSet&lt;Order&gt; Orders { get; }   \n  IDbSet&lt;Product&gt; Products { get; }    \n}    \n</code></pre>\n\n<p>I also created a fake db set as follows.</p>\n\n<pre><code>public class FakeDataSet&lt;T&gt; : IDbSet&lt;T&gt; where T: class, new()\n{\n .......\n}\n</code></pre>\n\n<p>So for my Customer object, this fake dataset look like below.</p>\n\n<pre><code>public class FakeCustomerDbSet : FakeDbSet&lt;Customer&gt;\n    {\n     ..............\n    }\n</code></pre>\n\n<p>Then I created my fake context as follows.</p>\n\n<pre><code>public class FakeSalesContext : ISalesContext \n    {\n        public FakeSalesContext ()\n        {\n            Customers = new FakeCustomerDbSet ();\n\n        }\n\n        public IDbSet&lt;Customer&gt; Customers { get; set; }\n        public IDbSet&lt;Order&gt; Orders{ get; private set; }\n        public IDbSet&lt;Product&gt; Products { get; private set; }\n\n        public void Dispose()\n        {\n\n        }\n    }\n</code></pre>\n\n<p>All the above classes (FakeDataSet,  FakeCustomerDbSet and FakeSalesContext ) related to fake objects live in an assembly <strong>AllFakes</strong>. I had to add a reference to EF dll as IDbSet interface is referred in these fake classes as well.</p>\n\n<p>Then I have my unit test project where I am using fake objects for performing unit testing. </p>\n\n<pre><code>ISalesContext Context = new FakeSalesContext ();\nContext.Customers.Add(new Customer() { Id = 1, LastName = \"Karen\" } );\n</code></pre>\n\n<p>Problem is that this unit test requires me to add reference to Entity framework dll. If I remove EF reference, I get following compilation error.</p>\n\n<blockquote>\n  <p>The type 'System.Data.Entity.IDbSet`1' is defined in an assembly\n  that is not referenced. You must add a reference to assembly\n  'EntityFramework, Version=4.4.0.0, Culture=neutral,\n  PublicKeyToken=b77a5c561934e089'.</p>\n</blockquote>\n\n<p>If I remove EF dll reference from AllFakes assembly, I get following  error. </p>\n\n<blockquote>\n  <p>The type or namespace name 'IDbSet' could not be found (are you \n  missing a using directive or an assembly reference?)</p>\n</blockquote>\n\n<p>Does it make sense to add a reference to EF dll to all these assemblies? To me, since I have abstracted my db context, it should not be needed here. Any suggestions on how to accomplish that?</p>\n"},{"tags":["unit-testing","boost","clang","libc++"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12732997,"title":"boost unit test framework aborts with clang and libc++","body":"<p>I am using:</p>\n\n<p>SLES 11 x86_64</p>\n\n<p><strong>Boost 1.51.0</strong> compiled with the following:\n./b2 toolset=clang cxxflags=\"-stdlib=libc++ -std=c++11\" linkflags=\"-stdlib=libc++\" </p>\n\n<p><strong>clang</strong> from svn (around two weaks old)</p>\n\n<p><strong>libc++</strong> from svn (nearly the latest)</p>\n\n<p>The test is aborted(SIGABORT) just at the end:</p>\n\n<pre><code>./unitTest\nRunning 3 test cases...\nModelTest.cpp(28): error in \"GameField_added_correctly\": check objects.size() == std::size_t{1} failed [0 != 1]\nModelTest.cpp(37): error in \"Spaceship_added_correctly\": check objects.size() == std::size_t{1} failed [0 != 1]\nModelTest.cpp(52): error in \"Spaceship_out_of_GameField_is_demolished_after_tick\": check objects.size() == std::size_t{2} failed [0 != 2]\nModelTest.cpp(59): error in \"Spaceship_out_of_GameField_is_demolished_after_tick\": check objects.size() == std::size_t{1} failed [0 != 1]\n\nAborted\n</code></pre>\n\n<p>Here is a very interesting backtrace:</p>\n\n<pre><code>Program received signal SIGABRT, Aborted.\n0x00007ffff7183945 in *__GI_raise (sig=&lt;optimized out&gt;) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n64      ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n        in ../nptl/sysdeps/unix/sysv/linux/raise.c\n(gdb) bt\n#0  0x00007ffff7183945 in *__GI_raise (sig=&lt;optimized out&gt;) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n#1  0x00007ffff7184f21 in *__GI_abort () at abort.c:92\n#2  0x00007ffff796020f in std::uncaught_exception () at ../src/exception.cpp:110\n#3  0x00007ffff7968784 in std::__1::basic_ostream&lt;char&gt;::sentry::~sentry (this=0x7fffffffcd18) at ../include/ostream:243\n#4  0x000000000042a348 in std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt; &lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char) ()\n#5  0x000000000042b85f in boost::unit_test::results_reporter::make_report(boost::unit_test::report_level, unsigned long) ()\n#6  0x0000000000431e22 in boost::unit_test::unit_test_main(boost::unit_test::test_suite* (*)(int, char**), int, char**) ()\n#7  0x00007ffff716fbc6 in __libc_start_main (main=0x432110 &lt;main&gt;, argc=1, ubp_av=0x7fffffffced8, init=0x45d380 &lt;__libc_csu_init&gt;, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, stack_end=0x7fffffffcec8) at libc-start.c:226\n#8  0x0000000000405ec9 in _start () at ../sysdeps/x86_64/elf/start.S:113\n(gdb)\n</code></pre>\n\n<p>It fails when it wants to print out the test results. The same happens when all the test cases passes.\nIt can be seen, that somehow during the destruction of std::ostream there is an exception.\nIt is strange, that the std::uncaught_exception is not from libc++ inline namespace (__1).</p>\n\n<p>Have any of you met similar problem before? What could be wrong?</p>\n\n<p>Update:\nPossible bug in libcxx:\n<a href=\"http://llvm.org/bugs/show_bug.cgi?id=13669\" rel=\"nofollow\">http://llvm.org/bugs/show_bug.cgi?id=13669</a></p>\n"},{"tags":["iphone","objective-c","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":127,"score":0,"question_id":12781589,"title":"Adding Logic Tests to the project in Xcode 4.5","body":"<p>I'm using xcode 4.5 and trying to add logic tests to the project. (This is actually a test, newly created project without unit tests). I'm following this guide:\n<a href=\"http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html\" rel=\"nofollow\">http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html</a>\nSo, what i've done so far:</p>\n\n<ol>\n<li>Created a new project (View Based Application template)</li>\n<li>Click on File -> New- CocoaTouchUnitTestBundle\nThat's it. The tests (as documentation states) are ready to use.\nBut I have the following problems:\nThe SenTestinKit.framework appears in red\n<img src=\"http://i.stack.imgur.com/S1Ss2.png\" alt=\"enter image description here\"></li>\n</ol>\n\n<p>If I press Test button issue navigator shows nothing:\n<img src=\"http://i.stack.imgur.com/gDcgE.png\" alt=\"enter image description here\"></p>\n\n<p>If I select another debugger here(LLDB by default, trying to select GDB):</p>\n\n<p><img src=\"http://i.stack.imgur.com/ocmzW.png\" alt=\"enter image description here\"></p>\n\n<p>Xcode just hangs out:\n<img src=\"http://i.stack.imgur.com/oxb4W.png\" alt=\"enter image description here\"></p>\n\n<p>P.S I also tried to remove SenTestingKit.framework (which is in red) and add new. Nothing changed.</p>\n\n<p>What am I doing wrong ?? I suppose to see something like this(screenshot from apple guide):\n<img src=\"http://i.stack.imgur.com/D7L15.png\" alt=\"enter image description here\"></p>\n\n<p>Any help will be greatly appriciated!</p>\n"},{"tags":["unit-testing","spring","dependency-injection"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1668,"score":6,"question_id":2843281,"title":"How to override the behavior of Spring @Autowired","body":"<p>a little background:</p>\n\n<p>I am Using Spring 2.5, and specifically spring IOC and annotations.</p>\n\n<p>I am using @Autowired in my code (the Autowiring is done by type)\nand use  @Component for exposing Classes to the Automatic wiring.</p>\n\n<p>The situation described bellow arose while i tried to test my code.</p>\n\n<p>now to the problem:</p>\n\n<p>Note: i use a different Spring Context for the Test environment.</p>\n\n<p>I have a class FOO which is @Autowired but in the test context i want to use a different class of the same type MockFoo (extends FOO)</p>\n\n<p>The Spring Setup of course fails do so automatically due to multiple options for the Dependency Injection of the FOO class (both FOO and MockFOO comply to the Type check)</p>\n\n<p>I am looking for a way to inject the test bean instead of the original bean.</p>\n\n<p>I expected Spring to allow using the Context configurion file to override a bean injection or to order Spring not to autowire a specific bean </p>\n\n<p>BUT </p>\n\n<p>All these option seem to exists only for the beans which were originally defined in the Spring Context Configuration file</p>\n"},{"tags":["django","unit-testing","django-forms"],"answer_count":8,"favorite_count":10,"up_vote_count":9,"down_vote_count":0,"view_count":3635,"score":9,"question_id":2257958,"title":"Django unit testing for form edit","body":"<p>Someone has probably already developed a technique for relieving the tedium for the following idiomatic unit test:</p>\n\n<ol>\n<li>GET a url with form data already populated</li>\n<li>POST a revised form with one or more fields edited</li>\n<li>Check response (profit!)</li>\n</ol>\n\n<p>Step 2 is the most tedious, cycling through the form fields.  Are there any time-saving hacks for testing Django forms?</p>\n\n<p>[<em>Update</em>: I'm not testing Django forms handling.  I'm verifying that my application produces correct responses when a user makes changes to a form.  This is an application which processes clinical information, hence a lot of possible responses to test.]</p>\n"},{"tags":["android","unit-testing","junit","guice","roboguice"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12781209,"title":"Roboguice Not Working in JUnit Testing","body":"<p>I am trying to write some tests with classes that use roboguice. Unfortunately it seems that guice is not injecting anything at all.</p>\n\n<p>My setup is like so...</p>\n\n<ul>\n<li>I am using Intellij</li>\n<li>I have 2 intellij modules (1 for code, 1 for tests)</li>\n<li>I have 2 seperate module classes that extends AbstractModule(roboguice class) that define the bindings</li>\n<li>I have 2 roboguice.xml files that point to the package like this...</li>\n</ul>\n\n<blockquote>\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n         &lt;resources&gt;\n             &lt;string-array name=\"roboguice_modules\"&gt;\n                &lt;item&gt;com.evertaletest&lt;/item&gt;\n             &lt;/string-array&gt;\n         &lt;/resources&gt;\n</code></pre>\n</blockquote>\n\n<p>Does this setup seems correct? Any class that is injected is null at the moment</p>\n"}]}
{"total":15322,"page":9,"pagesize":100,"questions":[{"tags":["unit-testing","sha","sha-3","keccak"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":416,"score":1,"question_id":12716204,"title":"Have Keccak (SHA-3) example hashes (test vectors) been made available?","body":"<p>I'm interested in implementing Keccak (SHA-3) and would like a set of input/expected output pairs to test against. Have any official test vectors been released? I recall having some for the other SHA routines and they were very helpful.</p>\n"},{"tags":["unit-testing","gwt","mocking","junit4","httpsession"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":227,"score":0,"question_id":6028003,"title":"How can I mock a container-provided object (e.g HttpSession) when Unit testing a GWT app?","body":"<p>I am currently trying to unit test my Service layer (all *Impl.java classes) in a GWT app. Well the problem is that in the code, I have a dependency which targets an object provided by the Httpsession. Actually, I'm storing a User object (the currently logged in user) in the httpSession.</p>\n\n<p>In order to get it back from the HttpSession (in the *Impl.java class), I am using this :</p>\n\n<blockquote>\n  <p><strong>User user = ServiceUtil.getUser(getThreadLocalRequest().getSession());</strong></p>\n</blockquote>\n\n<p>How can I mock this object from my Unit test code ?</p>\n\n<p>thanks a lot,</p>\n"},{"tags":["python","eclipse","unit-testing","pydev"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":12779784,"title":"How do I connect PostgreSQL with PyDev in Eclipse","body":"<p>I'm developing a module for Tryton, and when I'm trying to run unittest test in Eclipse with PostgreSQL and PyDev, Eclipse is not enable to connect to PostgreSQL, so test fails and raises this message: OperationalError: fe_sendauth: no password supplied</p>\n\n<p>The unittest test file is correct because if I run it in a Python console, it works correctly.</p>\n\n<p>How can I integrate unittest test in Eclipse with PostgreSQL and PyDev?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","unit-testing","nunit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":100,"score":2,"question_id":12012044,"title":"TryUpdateModel fails only in unit tests to update child objects","body":"<p>I am able to get the following code to work on the server, but not in a unit test. In the unit test, the simple properties are set correctly, but the child objects are not. I've been beating my head against the wall for too long, so any advice would be welcome.</p>\n\n<h3>Controller:</h3>\n\n<pre><code>[HttpPost]\npublic bool Save(int id)\n{\n        var itemFromRepository = this.itemRepository.FetchById(id);\n\n        if (itemFromRepository != null)\n        {\n            this.TryUpdateModel(\n                itemFromRepository,\n                \"Item\",\n                new[] { \n                    \"AnIntProperty\", \n                    \"AStringProperty\",\n                    \"Category.Id\"\n                });\n\n            if (itemFromRepository.Category!= null)\n            {\n                itemFromRepository.Category= this.categoryRepository.FetchById(itemFromRepository.Category.Id);\n            }\n\n            if (ModelState.IsValid)\n            {\n                this.itemRepository.Update(itemFromRepository);\n                return true;\n            }\n        }\n\n        return false;\n}\n</code></pre>\n\n<h3>UnitTest:</h3>\n\n<pre><code>    this._controller.ControllerContext = new ControllerContext();\n    Item item = this.items.First();\n    var updatedCategory = this.categories.Last();\n    var updatedStringProperty = \"Fake Value\";\n    var updatedIntProperty = 4;\n\n    var formValues = new FormCollection {\n        { \"Item.AnIntProperty\", updatedStringProperty},\n        { \"Item.Category.Id\", updatedCategory.Id.ToString() },\n        { \"Item.AStringProperty\", updatedIntProperty.ToString() }\n    };\n\n    var result = this._controller\n        .WithIncomingValues(formValues)\n        .Save(item.Id);\n</code></pre>\n\n<p>This passes:</p>\n\n<pre><code>    Assert.That(\n        item.AStringProperty,\n        Is.EqualTo(updatedStringProperty));\n    Assert.That(\n        item.AnIntProperty,\n        Is.EqualTo(updatedIntProperty));\n</code></pre>\n\n<p>This doesn't:</p>\n\n<pre><code>    Assert.That(\n        item.Category,\n        Is.Not.Null);\n    Assert.That(\n        item.Category.Name,\n        Is.EqualTo(updatedCategory.Name));\n</code></pre>\n"},{"tags":["asp.net-mvc","unit-testing","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12776594,"title":"Unittesting with ASP MVC: Validator.TryValidateObject returns always true","body":"<p>I'm trying to validate a MVC-model with Validator.TryValidateObject. \nThis works in production mode, but not in the unittest code.\nValidator.TryValidateObject give me alwasy true.</p>\n\n<p>The code parts: </p>\n\n<p>In the Controller-Constructor, I inject the Model:</p>\n\n<pre><code>private IEmailModel model;  \npublic JoggenController(IEmailModel m)  \n{  \n this.model = m;  \n}  \n</code></pre>\n\n<p>In the action-methode I validate the model, works fine in production mode, isValid is true or false:        </p>\n\n<pre><code>public ViewResult AddEmail(String email)  \n{  \nmodel.Email = email;  \nvar context = new ValidationContext(model, null, null);  \nvar list = new List&lt;ValidationResult&gt;();   \nvar isValid = Validator.TryValidateObject(model, context, list, true);              \n //...\n</code></pre>\n\n<p>Now I will test my AddEmail() and use this testcode:        </p>\n\n<pre><code>var emailModel = new Mock&lt;IEmailModel&gt;();  \nemailModel  \n     .Setup(p =&gt; p.Email)  \n     .Returns(\"xxx\");  \n\nvar controller = new Controller(emailModel.Object);  \n\n//should Faking ModelState.IsValid = false             \ncontroller.ModelState.Add(\"testError\", new ModelState());  \ncontroller.ModelState.AddModelError(\"testError\", \"test\");  \n\nvar result = controller.AddEmail(\"xxx\") as ViewResult;      \n//...  \n</code></pre>\n\n<p>If I debug the testcode, var isValid = Validator.TryValidateObject returns always true.\nWhats the Problem?</p>\n\n<p>Thanks</p>\n"},{"tags":["unit-testing","vc6"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":405,"score":2,"question_id":2430613,"title":"unit testing framework for Microsoft Visual C++ 6.0","body":"<p>Is there a unit testing framework for Microsoft Visual C++ 6.0?</p>\n"},{"tags":["c#",".net","unit-testing","mstest"],"answer_count":3,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":1269,"score":9,"question_id":5194966,"title":"MSTest: CollectionAssert.AreEquivalent failed. The expected collection contains 1 occurrence(s) of","body":"<p><strong>Question</strong>:</p>\n\n<p>Can anyone tell me why my unit test is failing with this error message?</p>\n\n<blockquote>\n  <p>CollectionAssert.AreEquivalent failed. The expected collection contains 1\n      occurrence(s) of . The actual\n      collection contains 0 occurrence(s).</p>\n</blockquote>\n\n<p><strong>Goal</strong>:</p>\n\n<p>I'd like to check if two lists are identical. They are identical if both contain the same elements with the same property values. The order is irrelevant.</p>\n\n<p><strong>Code example</strong>:</p>\n\n<p>This is the code which produces the error. <code>list1</code> and <code>list2</code> are identical, i.e. a copy-paste of each other.</p>\n\n<pre><code>[TestMethod]\npublic void TestListOfT()\n{\n    var list1 = new List&lt;MyPerson&gt;()\n    {\n        new MyPerson()\n        {\n            Name = \"A\",\n            Age = 20\n        },\n        new MyPerson()\n        {\n            Name = \"B\",\n            Age = 30\n        }\n    };\n    var list2 = new List&lt;MyPerson&gt;()\n    {\n        new MyPerson()\n        {\n            Name = \"A\",\n            Age = 20\n        },\n        new MyPerson()\n        {\n            Name = \"B\",\n            Age = 30\n        }\n    };\n\n    CollectionAssert.AreEquivalent(list1.ToList(), list2.ToList());\n}\n\npublic class MyPerson\n{\n    public string Name { get; set; }\n    public int Age { get; set; }\n}\n</code></pre>\n\n<p>I've also tried this line (<a href=\"http://stackoverflow.com/questions/2441188/mstest-collectionassert-use-with-generics/2441448#2441448\">source</a>)</p>\n\n<pre><code>CollectionAssert.AreEquivalent(list1.ToList(), list2.ToList());\n</code></pre>\n\n<p>and this line (<a href=\"http://stackoverflow.com/questions/662458/unittesting-ilist-with-collectionassert/662474#662474\">source</a>)</p>\n\n<pre><code>CollectionAssert.AreEquivalent(list1.ToArray(), list2.ToArray());\n</code></pre>\n\n<p>P.S.</p>\n\n<p>Related Stack Overflow questions:</p>\n\n<p>I've seen both these questions, but the answers didn't help.</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/2441188/mstest-collectionassert-use-with-generics\"> CollectionAssert use with generics?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/662458/unittesting-ilist-with-collectionassert\">Unittesting IList with CollectionAssert</a></li>\n</ul>\n"},{"tags":["unit-testing","testing","testng","jmock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12777095,"title":"Why does this TestNG test pass although the mock method is not invoked?","body":"<p>I user TestNG and jMock for my unit test but, I have a problem with TestNG. It marks the test as passed when I expect mock object method to be invoked and it is not!</p>\n\n<pre><code>public class SomeTestTest {\n\n\n  Mockery mocker = new Mockery();\n\n  SomeInterface someInterface = mocker.mock(SomeInterface.class);\n\n  @Test\n  public void testName() throws Exception {\n    mocker.checking(new Expectations() {{\n      oneOf(someInterface).someMethod();\n    }});\n  }\n}\n</code></pre>\n\n<p>and this is the report I get </p>\n\n<pre><code>Custom suite\nTotal tests run: 1, Failures: 0, Skips: 0\n</code></pre>\n"},{"tags":["javascript","unit-testing"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1068,"score":6,"question_id":716207,"title":"Testing private functions in javascript","body":"<p>I'm using the module pattern in Javascript to separate my public interface from the private implementation. To simplify what I'm doing, my code generates a chart. The chart consists of multiple parts (axises, labels, plot, legend, etc.) My code looks like:</p>\n\n<pre><code>var Graph = function() {\n  var private_data;\n  function draw_legend() { ... }\n  function draw_plot() { ... }\n  function helper_func() { ... }\n  ...\n\n  return {\n    add_data: function(data) {\n      private_data = data;\n    },\n    draw: function() {\n      draw_legend()\n      draw_plot()\n    }\n  }\n}\n</code></pre>\n\n<p>Some people advocate only testing the public interface of your classes, which makes sense, but I'd really like to get in some tests to test each of the components separately. If I screw up my draw_legend() function, I'd like that test to fail, not a test for the public draw() function. Am I on the wrong track here?</p>\n\n<p>I could separate each of the components in different classes, for example make a Legend class. But it seems silly to create a class for what's sometimes just 5-10 lines of code, and it would be uglier because I'd need to pass in a bunch of private state. And I wouldn't be able to test my helper functions. Should I do this anyway? Should I suck it up and only test the public draw()? Or is there some other solution?</p>\n"},{"tags":["unit-testing","visual-studio-2012","test-runner","test-explorer"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12772528,"title":"How do you disable the test explorer in Visual Studio 2012","body":"<p>I use ReSharper to run unit tests from within Visual Studio 2012.</p>\n\n<p>Every now and then I accidentally invoke the in-built test explorer by accident when running unit tests, instead of the ReSharper test runner.</p>\n\n<p>How do you disable the test explorer in Visual Studio 2012, so I can not accidentally invoke it?</p>\n"},{"tags":["unit-testing","testing","tdd","software-engineering"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":12724679,"title":"Software methodologies based on partial unit testing","body":"<p>Considering that there are so many names for so many software methodologies out there, I would like to know if there is any recommending only partial unit testing.</p>\n\n<p>I am a TDD believer, but sometimes I get the feeling of these two things:</p>\n\n<ol>\n<li><p>Most of the thinking for a better and more maintainable structure/design is achieved mostly with the first tests of a class.</p></li>\n<li><p>Unit tests are more important when working on someone else code</p></li>\n</ol>\n\n<p>Therefore I suppose that out there, some people is writing about their experiences using a mid approach. I would like to do some self research on the topic and find out if I can get a \"plan B\" when pushing some TDD practices.</p>\n\n<p>Is there any software methodology or trend based on partial unit testing?</p>\n"},{"tags":["java","unit-testing","testing","junit","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":247,"score":2,"question_id":11071652,"title":"Unit Test Best Practices: Empty Constructor or Mock Object?","body":"<p>Let's suppose I've to test this Java <code>ClassA</code> that depends on the difficult to instantiate <code>ClassB</code>:</p>\n\n<pre><code>public class ClassA\n{\n    public ClassA()\n    {\n        String configFile = \"config_file.xml\";\n\n        // I have to pass configFile to instantiate ClassB.\n        // And for example if configFile does not exists in the testing machine?\n        // Wouldn't it be easier to have an empty constructor for classB to test ClassA?\n        ClassB classB = new ClassB(configFile);\n    }\n\n    // ...\n}\n</code></pre>\n\n<p><code>ClassB</code>:</p>\n\n<pre><code>class ClassB\n{\n    ClassB(String configFile)\n    {\n        // Set up configs.\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>Is it bad practice to create an empty constructor inside <code>classB</code> only for testing purposes?\nOr is it better to rewrite a simplified mock <code>ClassB</code> for that?</p>\n"},{"tags":["javascript","unit-testing","testing","test-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":187,"score":1,"question_id":9142838,"title":"What is a pure in-browser JavaScript test framework?","body":"<p>I want a unit-test framework for JavaScript which <em>runs in the browser</em>. Not with an external browser-automation system as in Selenium, or a non-browser JS environment, but just one .html which loads the test framework and test suite and displays the results in that page. My searches have found only the other two kinds.</p>\n\n<p>I am primarily interested in testing JavaScript code for expected results and not crashing, not DOM/events or visual appearance.</p>\n\n<p>Nice-to-haves:</p>\n\n<ul>\n<li>Performance testing/benchmarking as well as correctness testing.</li>\n<li><em>Optional</em> external automation so a shell command can run the test suite and check if it succeeded.</li>\n</ul>\n\n<p>The motivation for the requirements is:</p>\n\n<ul>\n<li>My application under test is currently itself pure JavaScript, and I'd like to keep it that way (without platform or other-language dependencies).</li>\n<li>I am using many newer or bleeding-edge features such as ECMAScript 5, Typed Arrays, WebGL, and Local Storage. I want to test the actual interaction with these facilities, not stubs.</li>\n</ul>\n"},{"tags":["unit-testing","intellij-idea"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12771472,"title":"How to create test stub for a new method using IDEA?","body":"<p>Suppose you have a new Main class, with 2 methods a and b</p>\n\n<p>Pressing <code>Control-Shift-T</code> allows us to create new test class and create stubs for both methods</p>\n\n<p><img src=\"http://i.stack.imgur.com/Fjgop.png\" alt=\"enter image description here\"></p>\n\n<p>Ok, now if i add 1 more method <code>c</code>, i'd like to add a test for it in already existing MainTest class</p>\n\n<p>How can this be done please using IDEA? <code>Control-Shift-T</code> does not work as it attempts to create an already existing test class. </p>\n"},{"tags":["python","unit-testing","sqlalchemy","flask","flask-sqlalchemy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12766078,"title":"How to properly test a Python Flask system based on SQLAlchemy Declarative","body":"<p><strong>Update: Based on what I found and how I got it working, here is a template solution that works for testing the underlying SQLAlchemy systems using the Declarative extension.</strong></p>\n\n<pre><code>import unittest\nfrom database import Base\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import scoped_session, sessionmaker\n\nimport models\n\nclass StopsTestCase(unittest.TestCase):\n\n    def setUp(self):\n        self.engine = create_engine('sqlite:///:memory:')\n        self.session = scoped_session(sessionmaker(autocommit=False,\n                                         autoflush=False,\n                                         bind=self.engine))\n        Base.query = self.session.query_property()\n\n        Base.metadata.create_all(bind=self.engine)\n\n        #Create objects here\n        #These will likely involve something like the following for one of my stops\n\n        # stop1 = models.Stop(id=1, name=\"Stop 1\")\n        # self.session.add(stop1)\n        # self.session.commit()\n\n        # But adding a stop to the database here will break the test below. Just saying.\n\n\n    def test_empty_db(self):\n        stops = self.session.query(models.Stop).all()\n        assert len(stops) == 0\n\n    def tearDown(self):\n        self.session.remove()\n</code></pre>\n\n<hr>\n\n<p>I have a project that I've been working on for a while, which is written in Flask, and uses SQLAlchemy with the Declarative extension <a href=\"http://flask.pocoo.org/docs/patterns/sqlalchemy/\" rel=\"nofollow\">http://flask.pocoo.org/docs/patterns/sqlalchemy/</a>. I've recently decided to start unit testing my project, but for the life of me, I can't seem to figure out how to make it work. </p>\n\n<p>I looked at <a href=\"http://flask.pocoo.org/docs/testing/\" rel=\"nofollow\">http://flask.pocoo.org/docs/testing/</a>, but I can't seem to make it work. </p>\n\n<p>I tried a mix of things from different websites, but am unable to find something that works correctly. </p>\n\n<pre><code>class StopsTestCase(unittest.TestCase):\n\n    def setUp(self):\n        self.engine = create_engine('sqlite:///:memory:')\n        self.session = scoped_session(sessionmaker(autocommit=False,\n                                         autoflush=False,\n                                         bind=self.engine))\n        models.Base = declarative_base()\n        models.Base.query = self.session.query_property()\n\n        models.Base.metadata.create_all(bind=self.engine)\n\n    def test_empty_db(self):\n        stops = session.query(models.Stop).all()\n        assert len(stops) == 0\n\n    def tearDown(self):\n        session.remove()\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>Unfortunately, the best I can seem to get, causes the following error.</p>\n\n<pre><code>OperationalError: (OperationalError) no such table: stops u'SELECT stops.agency_id AS stops_agency_id, stops.id AS stops_id, stops.name AS stops_name, stops.\"desc\" AS stops_desc, stops.lat AS stops_lat, stops.lon AS stops_lon, stops.zone_id AS stops_zone_id \\nFROM stops' ()\n\n----------------------------------------------------------------------\nRan 1 test in 0.025s\n\nFAILED (errors=1)\n</code></pre>\n\n<p>Any help on this would be greatly appreciated. If someone has ever been through this before, and made it work, I would like some pointers! Thanks in advance.</p>\n"},{"tags":["unit-testing","design-by-contract"],"answer_count":9,"favorite_count":24,"up_vote_count":45,"down_vote_count":0,"view_count":1906,"score":45,"question_id":2965483,"title":"Unit tests - The benefit from unit tests with contract changes?","body":"<p>Recently I had an interesting discussion with a colleague about unit tests. We were discussing when maintaining unit tests became less productive, when your contracts change.</p>\n\n<p>Perhaps anyone can enlight me how to approach this problem. Let me elaborate:<br></p>\n\n<p>So lets say there is a class which does some nifty calculations. The contract says that it should calculate a number, or it returns -1 when it fails for some reason.</p>\n\n<p>I have contract tests who test that. And in all my other tests I stub this nifty calculator thingy.</p>\n\n<p>So now I change the contract, whenever it cannot calculate it will throw a CannotCalculateException. </p>\n\n<p>My contract tests will fail, and I will fix them accordingly. But, all my mocked/stubbed objects will still use the old contract rules. These tests will succeed, while they should not!</p>\n\n<p>The question that rises, is that with this faith in unit testing, how much faith can be placed in such changes... The unit tests succeed, but bugs will occur when testing the application. The tests using this calculator will need to be fixed, which costs time and may even be stubbed/mocked a lot of times...</p>\n\n<p>How do you think about this case? I never thought about it thourougly. In my opinion, these changes to unit tests would be acceptable. If I do not use unit tests, I would also see such bugs arise within test phase (by testers). Yet I am not confident enough to point out what will cost more time (or less).</p>\n\n<p>Any thoughts?</p>\n"},{"tags":["unit-testing","node.js","mocha","apn"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1663,"score":3,"question_id":8360318,"title":"global leak errors in mocha","body":"<p>Was trying to unit test the apple push notification library </p>\n\n<p><a href=\"https://github.com/argon/node-apn\" rel=\"nofollow\">https://github.com/argon/node-apn</a></p>\n\n<p>but I get a global leak error when I try to open up an APN connection.  Is that a configuration error on my part or an error in node-apn or mocha?</p>\n\n<p>I'm not sure I understand what checkGlobals is doing... is it just checking to see if any global variable are being set?</p>\n\n<p>0) Feed \"before all\" hook:\n     Error: global leak detected: hasCert\n      at Runner.checkGlobals (/usr/lib/node_modules/mocha/lib/runner.js:96:21)\n      at Runner. (/usr/lib/node_modules/mocha/lib/runner.js:41:44)\n      at Runner.emit (events.js:64:17)\n      at /usr/lib/node_modules/mocha/lib/runner.js:159:12\n      at Hook.run (/usr/lib/node_modules/mocha/lib/runnable.js:114:5)\n      at next (/usr/lib/node_modules/mocha/lib/runner.js:157:10)\n      at Array. (/usr/lib/node_modules/mocha/lib/runner.js:165:5)\n      at EventEmitter._tickCallback (node.js:126:26)</p>\n"},{"tags":["ios","unit-testing","xcode4","apple"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":166,"score":0,"question_id":9227384,"title":"Linker error for unit test Xcode 4","body":"<p>my application builds fine when i run it and unit tests built fine as well</p>\n\n<p>unit tests failed(application still fine) when i added some code for CGAffineTransform</p>\n\n<p>behaviour is the same for both simulator and device</p>\n\n<p>error message:</p>\n\n<pre><code>Undefined symbols for architecture i386:\n  \"_CGAffineTransformMakeTranslation\", referenced from:\n      -[PhysicsObject hasPoint:] in PhysicsObject-23B4A02B8F0621AD.o\n  \"_CGAffineTransformMakeRotation\", referenced from:\n      -[PhysicsObject hasPoint:] in PhysicsObject-23B4A02B8F0621AD.o\n  \"_CGAffineTransformConcat\", referenced from:\n      -[PhysicsObject hasPoint:] in PhysicsObject-23B4A02B8F0621AD.o\nld: symbol(s) not found for architecture i386\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>I have tried suggestions from </p>\n\n<p><a href=\"http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/\" rel=\"nofollow\">http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/</a>\n<a href=\"http://sealedabstract.com/code/tired-of-getting-mach-o-linker-errors-when-unit-testing/\" rel=\"nofollow\">http://sealedabstract.com/code/tired-of-getting-mach-o-linker-errors-when-unit-testing/</a>\n<a href=\"http://stackoverflow.com/questions/5329001/apple-mach-o-linker-error-when-compiling-for-device\">Apple Mach-O Linker Error when compiling for device</a></p>\n\n<p>and nothing works :( i suspect this is related to a framework in particular not being found. I cant seem to identify which though. help is much appreciated.</p>\n"},{"tags":["unit-testing","hudson","automated-tests"],"answer_count":4,"favorite_count":6,"up_vote_count":19,"down_vote_count":0,"view_count":1413,"score":19,"question_id":947376,"title":"Are there any free hosters of continuous integration servers?","body":"<p>I have just started up a simple open source project and hosted it on google but I would love it if there was a free CI server I could create a job on to monitor my source.</p>\n\n<p>I've had a little search around and couldn't find anything.</p>\n\n<p>Ideally, I'd like a Hudson server somewhere that is free for me to use that I can create a Job on to monitor my google subversion repository.</p>\n\n<p>I doubt any exist since I could write malicious code, or just poor, slow code with infinite loops etc.</p>\n\n<p>I work on this code from multiple machines and I don't have my own server on 24/7 which is why such a service would be handy.</p>\n"},{"tags":["javascript","ios","unit-testing","automated-tests","ui-automation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12384444,"title":"UIAutomation [UITextField resignFirstResponder]","body":"<p>How can I get the keyboard dismissed when using UI Automation tests?\nI've been looking at <a href=\"http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIAElementClassReference/UIAElement/UIAElement.html#//apple_ref/doc/uid/TP40009903\" rel=\"nofollow\">UIAElement</a> and <a href=\"http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIATextFieldClassReference/UIATextField/UIATextField.html#//apple_ref/doc/uid/TP40009925\" rel=\"nofollow\">UIATextField</a> documentation but couldn't find something that suggests so.</p>\n\n<pre><code>var textField = toolbar.textFields()[0];\nvar textView = toolbar.textViews()[0];\nfunction testFeature1() {\n    if (textField.hasKeyboardFocus() || textView.hasKeyboardFocus()) {\n        // Resign first responder .. How?\n    }\n    // Do my tests\n}\n</code></pre>\n"},{"tags":["unit-testing","microsoft-fakes"],"answer_count":4,"favorite_count":2,"up_vote_count":10,"down_vote_count":1,"view_count":1295,"score":9,"question_id":9677445,"title":"Mock framework vs MS Fakes frameworks","body":"<p>A bit confused on the differences of Mock frameworks like NMock vs the VS 2011 Fakes Framework.\nGoing through MSDN, what I understand is that Fakes allow you to mock your dependencies just like RhinoMock or NMock, however the approach is different, Fakes generates code to achive this functionality but Mocks framework does not. So is my understanding correct?  Is Fakes just another Mock framework</p>\n"},{"tags":["java","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":34,"score":0,"question_id":12763648,"title":"Test Cases: Need to figure out how to make two test cases that test my methods that round double(s)","body":"<p>I'm trying to make a test case that enables me to check if my methods work. One method accepts  a double and converts it into a string that is rounded to two decimal places and the other rounds the double to a whole number. If anyone has any advice or can help me out please let me know. Thank you!</p>\n"},{"tags":["c#","unit-testing","windows-8","mediaelement"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":171,"score":2,"question_id":12754755,"title":"Unit testing MediaElement in Windows 8 (C#/XAML)","body":"<p>I've got a class with a MediaElement that I'm trying to write unit tests for, but I can't figure out how to unit test the parts that interact with the MediaElement. Specifically, I want to ensure that opening a file triggers the right code, and that my own class's state is updating along with the MediaElement's.</p>\n\n<p>I'm using the ExecuteOnUIThread() trick mentioned <a href=\"http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/57815826-8cbb-4206-b2a6-3a3383dfe6ad\" rel=\"nofollow\">here</a> to create and work with the MediaElement, since I will get an RPC_E_WRONG_THREAD exception otherwise.</p>\n\n<p>Then I use <a href=\"http://www.philosophicalgeek.com/2007/12/27/easily-unit-testing-event-handlers/\" rel=\"nofollow\">this trick</a> to be able to test my own class's events, which connect to the MediaElement's own MediaOpened and CurrentStateChanged events.</p>\n\n<p>However, I'm not seeing anything getting activated when I open an MP3 file from the internet, no matter how long I set the WaitOne to be. I've tried just bypassing my own class and testing MediaElement directly, but the events do not seem to fire at all.</p>\n\n<p>Here is the test method I'm working with:</p>\n\n<pre><code>[TestMethod]\npublic async Task TestMethod1()\n{\n    await ExecuteOnUIThread(() =&gt;\n    {\n        var me = new MediaElement();\n        bool opened = false;\n        var mre = new ManualResetEvent(false);\n        me.MediaOpened += delegate\n        {\n            opened = true;\n            mre.Set();\n        };\n        me.Source = new Uri(\"http://dl.dropbox.com/u/52389/test-song.mp3\");\n        mre.WaitOne(5000);\n\n        Assert.IsTrue(opened);\n    });\n}\n</code></pre>\n"},{"tags":["c#","unit-testing","tdd","moq","mstest"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12760930,"title":"Mock extension methods as an interface","body":"<p>Its already researched about it and found several interesting links <a href=\"http://stackoverflow.com/questions/2295960/mocking-extension-methods-with-moq\">like this</a>.\n<strong>But to my problem, they have not helped me.</strong></p>\n\n<h1>Code</h1>\n\n<p><strong>I have the following interface</strong></p>\n\n<pre><code>public interface IViewFolderReference\n{\n    string FolderName { get; set; }\n}\n</code></pre>\n\n<p><strong>Extension</strong></p>\n\n<pre><code>public static ICollection&lt;TFile&gt; GetFiles&lt;TFile&gt;(this IViewFolderReference view)\n    where TFile: class, IFile\n{\n    var folder = view.GetFolder();\n    return folder.Exists ? \n        Mapper.Map&lt;ICollection&lt;TFile&gt;&gt;(folder.GetFiles())\n        : null;\n}\n</code></pre>\n\n<p><strong>Concret class</strong></p>\n\n<pre><code>public class ProcessoViewModel : IViewFolderReference\n{\n    public string FolderName { get; set; }\n    public ICollection&lt;File&gt; Arquivos { get; set; }    \n    ...\n}\n</code></pre>\n\n<p><strong>Test method</strong></p>\n\n<pre><code>[TestMethod]\npublic void Ao_salvar_processo_adicionar_dois_itens()\n{\n    // Arrange\n    var vm = new Mock&lt;ProcessoViewModel&gt;();\n    vm.Object.Arquivos = new List&lt;File&gt;() {\n        new File { FileName = \"Arquivo 1.jpg\", DisplayName = \"Arquivo 1\" }\n        ,new File { FileName = \"Arquivo 2.doc\", DisplayName = \"Arquivo 2\" }\n    };\n\n    //Act\n    controller.salvar(vm.Object); // Problem here!! (GetFiles is called, How can mock the result??)\n\n    //Assert\n    var processoDb = repositorio.Query&lt;Processo&gt;().SingleOrDefault(p =&gt; p.Imovel == vm.Object.Imovel &amp;&amp; vm.Object.DataEntrada == p.DataEntrada);\n    Assert.IsNotNull(processoDb.Arquivos);\n    Assert.AreEqual(processoDb.Arquivos.Count, 2);\n}\n</code></pre>\n"},{"tags":["python","unit-testing","google-app-engine","webapp2","babel"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12753595,"title":"Python Unit test with i18 but without webapp2","body":"<p>I encountered a problem with unit tests when use i18 in my project.\nMy project uses framewoks i18 and webapp2\nThe function uses the translation by i18. But when I test, I get the error - missing global variable request.\nFor example it is:\n<code></p>\n\n<pre><code>from unittest import TestCase, main\nfrom webapp2_extras.i18n import lazy_gettext as _\n\ndef Hello(a):\n    if a &gt; 0:\n       message = _('My great message!11 a &gt; 0')\n    else:\n       message = _('My great message!11 a =&lt; 0')\n    return message\n\nclass TestHandler(TestCase):\n\n    def testHello0(self):\n        self.assertEqual(Hello(0), 'My great message!11 a =&lt; 0')\n\n    def testHello3(self):\n        self.assertEqual(Hello(3), 'My great message!11 a &gt; 0')\n\nif __name__ == '__main__':\n     main()\n</code></pre>\n\n<p>and I have message:</p>\n\n<pre><code>FAIL: testHello0 (text3.TestHandler)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/text3.py\", line 14, in testHello0\n    self.assertEqual(Hello(0), 'My great message!11 a =&lt; 0')\nAssertionError: Request global variable is not set.\n</code></pre>\n\n<p>I have a solution to this problem, but I do not like it. This is a crutch. How can you test my function without using framewoks on similarity webapp2</p>\n\n<pre><code>from unittest import TestCase, main\nfrom webapp2_extras.i18n import lazy_gettext as _\nimport webapp2\n\ndef Hello(a):\n    if a &gt; 0:\n        message = _('My great message!11 a &gt; 0')\n    else:\n        message = _('My great message!11 a =&lt; 0')\n    return message\n\n\nclass OneHandler(webapp2.RequestHandler):\n    def get(self):\n        myNumber = self.request.get('myNumber')\n        myNumber = int(myNumber)\n        message = Hello(myNumber)\n        self.response.write(message)\n\n\nroutes = [('/One', OneHandler)]\napp = webapp2.WSGIApplication(routes = routes)\n\nclass TestHandler(TestCase):\n\n    def testHello0(self):\n        myNumber = 0\n        URL = '/One?myNumber=%s' % myNumber\n\n        self.response = app.get_response(URL)\n        self.mess = self.response.body\n        self.assertEqual(self.mess, 'My great message!11 a =&lt; 0') \n\n    def testHello3(self):\n        myNumber = 3\n        URL = '/One?myNumber=%s' % myNumber\n\n        self.response = app.get_response(URL)\n        self.mess = self.response.body\n        self.assertEqual(self.mess, 'My great message!11 a &gt; 0') \n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>and well done!</p>\n\n<pre>Ran 2 tests in 0.047s\n\nOK\n</code></pre>\n\n<p>But it's not a good solution. How I can testing my function and dont use webapp2, etc?</p>\n"},{"tags":["php","unit-testing","yii"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12760644,"title":"Fatal error: Class 'CDbTestCase' not found yii framework","body":"<p>I'm following the \"Agile web application development with yii 1.1 and php5\" book and i'm at the testing with fixtures section. I followed their code but i can't access to the fixture...</p>\n\n<p>I'm running my unit test at chapter 6 after configuring fixture with PHPunit and it returns me this</p>\n\n<pre><code>Last login: Sat Oct  6 20:09:36 on ttys000\nxyz-MacBook-Pro:~ inganious$ /usr/local/bin/phpunit/phpunit /Applications/MAMP/htdocs/trackstar/protected/tests/unit/ProjectTest.php\n\nFatal error: Class 'CDbTestCase' not found in /Applications/MAMP/htdocs/trackstar/protected/tests/unit/ProjectTest.php on line 3\nxyz-MacBook-Pro:~ inganious$ \n</code></pre>\n\n<p>Here is my ProjectTest.php file</p>\n\n<pre><code>class ProjectTest extends CDbTestCase\n{\n\n    public $fixtures=array\n    (\n            'projects'=&gt;'Project',\n    );\n\n    public function testCreate()\n      {\n        //CREATE a new Project\n        $newProject=new Project;\n        $newProjectName = 'Test Project Creation';\n        $newProject-&gt;setAttributes(array(\n        'name' =&gt; $newProjectName,\n        'description' =&gt; 'This is a test for new project creation',\n        'createTime' =&gt; '2009-09-09 00:00:00',\n        'createUser' =&gt; '1',\n        'updateTime' =&gt; '2009-09-09 00:00:00',\n        'updateUser' =&gt; '1',\n        )\n      );\n        $this-&gt;assertTrue($newProject-&gt;save(false));\n        //READ back the newly created Project to ensure the creation worked\n\n        $retrievedProject=Project::model()-&gt;findByPk($newProject-&gt;id);\n        $this-&gt;assertTrue($retrievedProject instanceof Project);\n        $this-&gt;assertEquals($newProjectName,$retrievedProject-&gt;name);\n      }\n        public function testRead()\n      {\n        $retrievedProject = $this-&gt;projects('project1');\n        $this-&gt;assertTrue($retrievedProject instanceof Project);\n        $this-&gt;assertEquals('Test Project 1',$retrievedProject-&gt;name);\n      }\n        public function testUpdate()\n      {\n        $project = $this-&gt;projects('project2');\n        $updatedProjectName = 'Updated Test Project 2';\n        $project-&gt;name = $updatedProjectName;\n        $this-&gt;assertTrue($project-&gt;save(false));\n        //read back the record again to ensure the update worked\n        $updatedProject=Project::model()-&gt;findByPk($project-&gt;id);\n        $this-&gt;assertTrue($updatedProject instanceof Project);\n        $this-&gt;assertEquals($updatedProjectName,$updatedProject-&gt;name);\n      }\n        public function testDelete()\n      {\n        $project = $this-&gt;projects('project2');\n        $savedProjectId = $project-&gt;id;\n        $this-&gt;assertTrue($project-&gt;delete());\n        $deletedProject=Project::model()-&gt;findByPk($savedProjectId);\n        $this-&gt;assertEquals(NULL,$deletedProject);\n    }\n}\n</code></pre>\n\n<p>Can anyone help please ?</p>\n"},{"tags":["ruby-on-rails","unit-testing","ruby-on-rails-3.2","minitest","counter-cache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12760609,"title":"How can I ensure that counter_cache is updated correctly in rails unit tests?","body":"<p>I've got a normal <code>counter_cache</code> set up for my Rails 3.2.6 model. It works flawlessly in the webapp, but fails in unit tests.</p>\n\n<p>The following snippet illustrates the issue at hand:</p>\n\n<pre><code>test \"counter_cache ...\" do\n    u = FactoryGirl.create(:customer)\n    FactoryGirl.create(:order, :customer =&gt; u)\n\n    # u.orders.count == 1; rest is always 0\n    assert_equal u.orders.count, u.orders_count  # FAILS!\n    assert_equal u.orders.count, u.orders.size   # FAILS!\n    assert_equal u.orders.count, u.orders.length # FAILS!\nend\n</code></pre>\n\n<p><em>Note that I tried the same without the use of FactoryGirl, which still failed.</em></p>\n\n<p><strong>How can I ensure that counter_cache is updated correctly in unit tests?</strong></p>\n"},{"tags":["c#","unit-testing","nunit","expectedexception"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":6925354,"title":"Is there a way to provide failure message with ExpectedException attribute?","body":"<p>I want to provide a message when assertion has failed but I can't figure out a way to do it.</p>\n\n<pre><code>[Test]\npublic void CreateInstanceTest()\n{\n    SomeClass someClass = new SomeClass();\n    Assert.IsNotNull(someClass, \"Constructor could not return an instance\");\n    //provide failure message here\n}\n</code></pre>\n\n<p>How do I do it in this test?</p>\n\n<pre><code>[Test]\n[ExpectedException(typeof(ArgumentNullException))]\npublic void EmptyNameInConstructorThrowsExceptionTest()\n{\n    SomeClass someClass = new SomeClass(null);\n}\n</code></pre>\n"},{"tags":["git","unit-testing","git-bisect"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12760450,"title":"How to use git bisect: Using unit tests for determining the errorneous commit?","body":"<p>I'm new to git and just discovered \"git bisect\". How is it generally used when you can check for the error using a newly written unit test (that wasn't there beforehand)?</p>\n\n<p>Say we have a repository containing unit tests, but - as so often - they weren't complete. In some version we discover that a feature isn't working, but we know it was in some version before. Unfortunately that feature wasn't checked by a unit test. What I'd like to do now is:</p>\n\n<ol>\n<li>Write the test case (that fails at first of course)</li>\n<li>Look for the commit introducing the error using git bisect using this test case</li>\n<li>Correcting the error and committing the fix (and the test case)</li>\n</ol>\n\n<p>This use case has one problem. As git bisect checks out old versions, the just inserted test case won't be there, so I can't use it to check for the error. I can try to not commit the test, but to keep the it as local change. But imagining that the tests file was changed in some version inbetween, I'm likely to run into merge conflicts.</p>\n\n<p>So what to do? How is git bisect generally used?</p>\n"},{"tags":["python","django","unit-testing","tdd"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1121,"score":4,"question_id":3817213,"title":"Proper way to test Django signals","body":"<p>I'm trying to test sent signal and it's providing_args. Signal triggered inside <code>contact_question_create</code> view just after form submission.</p>\n\n<p>My TestCase is something like:</p>\n\n<pre><code>    def test_form_should_post_proper_data_via_signal(self):\n        form_data = {'name': 'Jan Nowak'}\n        signals.question_posted.send(sender='test', form_data=form_data)\n        @receiver(signals.question_posted, sender='test')\n        def question_posted_listener(sender, form_data):\n            self.name = form_data['name']\n        eq_(self.name, 'Jan Nowak')\n</code></pre>\n\n<p>Is this the proper way to test this signal? Any better ideas?</p>\n"},{"tags":["algorithm","unit-testing","tdd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":11418003,"title":"TDD Naïve Text Search Algorithm","body":"<p>I need to test drive Naïve string search algorithm.\n<a href=\"http://en.wikipedia.org/wiki/String_searching_algorithm\" rel=\"nofollow\">http://en.wikipedia.org/wiki/String_searching_algorithm</a></p>\n\n<p>Can someone shed some light on how I could approach the issue.</p>\n\n<p>should my tests only be testing outside behaviour? (i.e. the pattern occuring indexes irrespective of the algorithm used? )</p>\n\n<p>Or should I be algorithm specific and test drive algorithm specific implementations?</p>\n"},{"tags":["unit-testing","cakephp","netbeans","phpunit","assertion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12745760,"title":"Displaying Result and Expected values of an Assertion in CakePHP testing","body":"<p>Does anyone know if there is a way to force CakePHP TestSuite to view the Expected and Result values of an assertion when it fails? Typical PHPUnit tests are showing it by default in the output but not Cake's TestSuite (which uses PHPUnit). A side from that, when i debug a test case in NetBeans i get some kind of Socket Exception whenever i try to set a watch for a variable, and it only happens in CakePHP test cases, it works fine in evry other source file. Is there a solution for this aswell?</p>\n"},{"tags":["unit-testing","versioning"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":12756535,"title":"unit testing with Alienbrain","body":"<p>We use Alienbrain at my company and have a custom Python access script to allow us to more easily work with it from our Python code. We're not very good at maintaining this script, yet everything is built around it. I'd like full unit test coverage of this script, but haven't figured out yet how to handle in a script the spawning of a repository, creating of multiple users, and testing things like trying to check out a file by two users in a repo that doesn't allow concurrent checkouts. I've been thinking of setting up a repo somewhere, copying it, using it in the unit tests, then copying that back over the original to refresh it after each test, but I'd prefer to hear more solid workarounds others may have found.</p>\n"},{"tags":["unit-testing","mstest","rowtest","datadriven"],"answer_count":4,"favorite_count":3,"up_vote_count":18,"down_vote_count":0,"view_count":2112,"score":18,"question_id":347535,"title":"How to RowTest with MSTest?","body":"<p>I know that MSTest doens't support RowTest and similar tests.</p>\n\n<p>What MSTests users do? How is it possible to live without RowTest support? </p>\n\n<p>I've seen DataDriven test features but sounds like too much overhead, is there any 3rd patch or tool which allow me to do RowTest similar tests in MSTest ?</p>\n"},{"tags":["python","unit-testing","testing","mocking","mox"],"answer_count":0,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12755510,"title":"Why do I get ValueError(\"There must be at least one expected method\") from mox, when I know that the function I've mocked out is getting called?","body":"<p>I'm using mox to stub out an email-sending function in my code. I want to verify that the function is called N times, with a certain set of params each time. </p>\n\n<p>Mox is raising ValueError(\"There must be at least one expected method\") as if the function calls that I've stubbed out are not happening, but they actually seem to be happening.</p>\n\n<p>Watching my logs, I can see the functions being called and see all the log messages / updates in my DB that tell me the code being tested is in fact working. I also have 14 other unit tests verifying that, so I'm confident this is a problem with the test rather than the underlying code.</p>\n\n<p>Here is my test: </p>\n\n<pre><code>class MyTestSuite(mox.MoxTestBase):\n    def test_my_send_function(self):\n        self.mox.StubOutWithMock(module_path, \"my_send_function\")\n        for state in SEQUENCE: # defined elsewhere, assume 5 states in sequence\n            module_path.my_send_function(to_email_address, subject, IgnoreArg())\n    self.mox.ReplayAll()\n\n    module_path.my_send_function_parent() # loops over the 5 states in SEQUENCE and calls my_send_function()\n\n    # Verify() and UnsetStubs() are done automatically because I subclasses MoxTestBase\n</code></pre>\n\n<p>Why is mox saying the calls never happened when they are? I could not find anything about this in the mox docs or elsewhere here on SO.</p>\n"},{"tags":["java","unit-testing","maven","junit","maven-failsafe-plugin"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":261,"score":4,"question_id":11542530,"title":"Using JUnit Categories with Maven Failsafe plugin","body":"<p>I'm using JUnit Categories to separate integration tests from unit tests. The Surefire plugin configuration works - it skips the tests annotated with my marker interface IntegrationTest.</p>\n\n<p>However, the Failsafe plugin doesn't pick the integration tests. I've even tried to specify the junit47 provider, but zero tests are run in the integration-test phase.</p>\n\n<p>Here is the pom.xml fragment:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.12&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;integration-test&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;groups&gt;com.mycompany.test.IntegrationTest&lt;/groups&gt;\n                &lt;excludedGroups&gt;com.mycompany.test.UnitTest&lt;/excludedGroups&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\n                    &lt;artifactId&gt;surefire-junit47&lt;/artifactId&gt;\n                    &lt;version&gt;2.12&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>Here is the Failsafe part of the log:</p>\n\n<pre><code>[INFO] --- maven-failsafe-plugin:2.12:integration-test (default) @ MyProject.war ---\n[INFO] Failsafe report directory: /home/stoupa/MyProject/war/target/failsafe-reports\n[INFO] Using configured provider org.apache.maven.surefire.junitcore.JUnitCoreProvider\n\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nConcurrency config is parallel='none', perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false\n\nResults :\n\nTests run: 0, Failures: 0, Errors: 0, Skipped: 0\n</code></pre>\n\n<p>Is the provider org.apache.maven.surefire.junitcore.JUnitCoreProvider that can be seen in the log output the right one?</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12753373,"title":"Testing timer with Moq","body":"<p>I'm trying to learn TDD and Unit Testing and I'm building a small application for the purpose. </p>\n\n<p>I'm building a timer class but I can't make a test pass. I want to test that a method is called when the time on the timer is elapsed.</p>\n\n<p>I have the following class:</p>\n\n<pre><code>public class TimeOutTimer\n{\n    private readonly ISubscriber _subscriber;\n    private Timer _timer;\n\n    public TimeOutTimer(ISubscriber subscriber)\n    {\n        _subscriber = subscriber;\n    }\n\n    public void Start()\n    {\n        _timer = new Timer(1000);\n        _timer.Start();\n        _timer.Elapsed += TimerOnElapsed;\n    }\n\n    private void TimerOnElapsed(object sender, ElapsedEventArgs elapsedEventArgs)\n    {\n        _subscriber.TimeReached();   \n    }\n}\n</code></pre>\n\n<p>And the test, using Moq:</p>\n\n<pre><code>[Test]\npublic void Start_WithValidParameters_TriggersTimeReached()\n{\n    var subscriberMock = new Mock&lt;ISubscriber&gt;();\n    var timer = new TimeOutTimer(subscriberMock.Object);\n\n    timer.Start();\n\n    subscriberMock.Verify(subscriber =&gt; subscriber.TimeReached());\n}\n</code></pre>\n\n<p>If I take the Timer out and make a direct call to _subscriber.TimeReached(), it works.</p>\n\n<p>Am I doing something wrong?</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["ruby-on-rails","unit-testing","configuration","deprecated","shoulda"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1232,"score":4,"question_id":4901306,"title":"How can I mute Rails 3 deprecation warnings selectively?","body":"<p>I am upgrading a Rails 2 to Rails 3 application (code not written by me).\nThe (well tested code) uses shoulda and Test::Unit, and extensively uses the macros should_create and should_change.</p>\n\n<p>I understand from <a href=\"http://robots.thoughtbot.com/post/731871832/this-should-change-your-mind\" rel=\"nofollow\">this discussion</a> that the shoulda maintainers want to get rid of both methods but that people using Test::Unit don't find it necessary (not sure I am grasping the whole discussion though).</p>\n\n<p>Anaway, is there a way to selectively turn of the deprecation warnings for specified macros?  I already know from <a href=\"http://stackoverflow.com/questions/2689377/silencing-deprecation-warnings-in-rails-3\">this posting</a> that you can turn off the deprecation warnings in the Rake test output entirely by setting:</p>\n\n<pre><code>ActiveSupport::Deprecation.silenced = true\n</code></pre>\n\n<p>in your the test environment file and I also know that you can put specific pieces of code in a block to get them silenced:</p>\n\n<pre><code>ActiveSupport::Deprecation.silence do\n# no warnings for any use of deprecated methods here\nend\n</code></pre>\n\n<p>The latter is an option but would require me to go over all the tests and enclose the should_create macros in such a block.  So I was wondering there was a way to eliminate warnings for specific macros entirely with one configuration setting?</p>\n"},{"tags":["java","unit-testing","junit","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":113,"score":2,"question_id":12750193,"title":"how to unit test a class which creates new objects","body":"<p>I'm using JUnit and Mockito to test some classes. The class itself creates an object from another class. A list called testList. Here my code:</p>\n\n<pre><code>public class A {\n       private List&lt;B&gt; bList;\n\n       //returns the bList\n       public List&lt;B&gt; getBList() {\n          return bList;\n       }\n\n       //checks the status by calling getStatus in class B\n       public Status getStatus() {\n          //status is an enum consists of PASSED and FAILED\n          Status finalStatus = Status.PASSED;\n          for (B be : this.getTestList()) {\n             if (be.getStatus() != Status.PASSED) {\n                finalStatus = Status.FAILED;\n                break;\n             }\n          }\n          return status;\n       }\n    }\n\n\n    public Class B {\n       private Status status = Status.FAILED;   \n\n       public getStatus() {\n          return status;\n       }\n\n       public void setStatus(Status status) {\n          this.status = status;\n       }\n    }\n</code></pre>\n\n<p>What would be the best way to test the getStatus and getTestList methods in the class called Test.</p>\n\n<p>Thank you very much....</p>\n"},{"tags":["objective-c","unit-testing","testing","assert"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12750407,"title":"Using SenTest to test an assertion","body":"<p>I have code in method which asserts( ) that a parameter falls within a given range. I'd like to test illegal parameters using a SenTest test case.</p>\n\n<p>My first assumption was that I should use STAssertThrows( ... ) however this reports no exception is thrown when the assert fails. Can I catch assert() fails with an STAssert... macro?</p>\n\n<p>[updated to provide an example]</p>\n\n<p>In class Foo.m</p>\n\n<pre><code>@interface Foo : NSObject {\n    NSUInteger count;\n    NSUInteger max;\n}\n@end\n\n@implementation Foo\n-(void) bar:(char) c {\n    assert( count &lt; max );\n    ...\n}\n@end\n</code></pre>\n\n<p>In class TestFoo.m</p>\n\n<pre><code>@interface TestFoo : SenTestCase {\n    Foo testFoo_;\n}\n@end\n\n@implementation TestFoo\n    -(void) testBar {\n        STAssertXXX( YYY );\n    }\n@end\n</code></pre>\n\n<p>What XXX and YYY can I use to test the failure or otherwise of the assertion in method bar: ?</p>\n"},{"tags":["python","unit-testing","scrapy","nose"],"answer_count":3,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":500,"score":9,"question_id":6456304,"title":"Scrapy Unit Testing","body":"<p>I'd like to implement some unit tests in a Scrapy (screen scraper/web crawler).  Since a project is run through the \"scrapy crawl\" command I can run it through something like nose.  Since scrapy is built on top of twisted can I use its unit testing framework Trial? If so, how? Other wise I'd like to get nose working.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I've been talking on <a href=\"http://groups.google.com/group/scrapy-users/browse_thread/thread/ba1fadfd40916e71\">Scrapy-Users</a> and I guess I am supposed to \"build the Response in the test code, and then call the method with the response and assert that [I] get the expected items/requests in the output\".  I can't seem to get this to work though.</p>\n\n<p>I can build a unit-test test class and in a test:</p>\n\n<ul>\n<li>create a response object</li>\n<li>try to call the parse method of my\nspider with the response object</li>\n</ul>\n\n<p>However it ends up generating <a href=\"https://gist.github.com/1044924\">this</a> traceback.  Any insite as to why?</p>\n"},{"tags":["c++","python","unit-testing","exception","quickfix"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12697269,"title":"Catching C++ exceptions from python while building quickfix 1.13.3","body":"<p>I'm building Quickfix 1.13.3 on Linux Fedora. The python unit tests are failing. The test passes erroneous FIX messages to python, and python is supposed to catch the errors, and throw the appropriate exception. Whats' happening, is that the c++ layer is catching the error, throwing a c++ exception, and the test fails with a c++ core dump. I'm assuming that python is supposed to be catching these exceptions, but it isn't </p>\n\n<p>Anyone have any experience with this?</p>\n"},{"tags":["c#",".net","unit-testing","exception"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":897,"score":5,"question_id":6125143,"title":"How can a unit test confirm an exception has been thrown","body":"<p>Im writing a unit test for a c# class, One of my tests should cause the method to throw an exception when the data is added. How can i use my unit test to confirm that the exception has been thrown?</p>\n"},{"tags":["unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":12719976,"title":"Why the unit test frameworks/tools show first the amount of tests passed or total instead of failures?","body":"<p>I know several unit tests frameworks and tools (for .net, java and javascript) and I don't remember one that shows first the amount of tests failed, several of them shows the results in this order: passed, failed and total (or some variations, but keeping failed with a poor evidence)</p>\n\n<p>I think that the amount of test failed should always be in evidence, so showed at least first.</p>\n\n<p>Why a lot of them do this (showing the passed or total tests first) ? </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>As this isn't a isolated aspect or feature of one or two framework or tool, <strong>my curiosity was aroused and then, I'm asking if there is a known reason for them to be so</strong>.</p>\n\n<p>Search for \"unit test result\" in internet (try google images), you will see a lot of output samples where rarely the amount of failed cases are in a good highlight, several of them are in the format PASSED, TOTAL, FAILED, or some others variations but the passed or total amount usually are shown as the more important information in the results. </p>\n\n<p>With the exception of those that aren't thus and show the FAILED in a good evidence/highlight, <strong>I thought that the others may follow a simple way to show the amount from total: \"AMOUNT/TOTAL\"</strong>, being the amount the one that reach the total, so the PASSED TESTS, but this isn't totally true, so now I guess that my question has no answer.</p>\n\n<p>But, following is a short list of some samples found now from a simple search in the internet, look that even those that has a good or some highlight that signs that some was wrong, the amount of failures rarely is the one that is showed as the more important information:</p>\n\n<ul>\n<li><a href=\"http://www.jetbrains.com/idea/webhelp/test-runner-tab.html#\" rel=\"nofollow\">IntelliJ IDEA</a> - Amount/Total, and Failed at the end, but has a nice graphical highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/fMKaS.png\" alt=\"IntelliJ IDEA\"></p>\n\n<ul>\n<li><a href=\"http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/unit_test_runner.xml\" rel=\"nofollow\">DevExpress in Visual Studio</a> - Total, Passed, and Failed at the end, but has a nice graphical highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/J9POk.png\" alt=\"DevExpress in Visual Studio\"></p>\n\n<ul>\n<li><a href=\"http://httpcode.google.compfrizionewikiTestService\" rel=\"nofollow\">Frizione</a> - Total, Failures and errors at the end, poor highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/qYed7.png\" alt=\"Frizione\"></p>\n\n<ul>\n<li><a href=\"http://community.sharpdevelop.net/blogs/mattward/archive/2010/06/01/UnitTestingWithIronPython.aspx\" rel=\"nofollow\">IronPhyton</a> - Total, and Failures at the end, but has a nice highlight at the last line.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/mQjNc.png\" alt=\"IronPhyton\"></p>\n\n<ul>\n<li><a href=\"http://pivotal.github.com/jasmine/\" rel=\"nofollow\">Jasmine</a> - Total, and Failures at the end, but has a nice graphical highlight when has failures.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/n3BLH.png\" alt=\"Jasmine\"></p>\n\n<ul>\n<li><a href=\"http://code.google.com/p/js-test-driver/\" rel=\"nofollow\">jsTestDriver</a> - Total, Passed, and Failed at the end, very poor highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/kQt6u.png\" alt=\"jsTestDriver\"></p>\n\n<ul>\n<li><a href=\"http://www.jsunit.net/runner/testRunner.html\" rel=\"nofollow\">jsUnit Test Runner</a> - Total, Errors and Failed at the end.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/gTLSs.png\" alt=\"jsUnit Test Runner\"></p>\n\n<ul>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/ms182527%28v=vs.90%29.aspx\" rel=\"nofollow\">MSTest</a> - Passed / Total (I don't remember if it shows the failed amount), but has a nice failure highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/6UFVg.png\" alt=\"MSTest\"></p>\n\n<ul>\n<li><a href=\"http://community.sharpdevelop.net/blogs/mattward/archive/2012/05/06/UsingMSTestWithSharpDevelop.aspx\" rel=\"nofollow\">MSTest - Text output</a> - Passed / Total, and the Failed at the end (poor highlight).</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/vSkAi.png\" alt=\"MSTest - Text output\"></p>\n\n<ul>\n<li><a href=\"http://www.nunit.org/index.php?p=nunit-gui&amp;r=2.4\" rel=\"nofollow\">NUnit GUI Runner</a> </li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/Leohy.png\" alt=\"NUnit GUI Runner\"></p>\n\n<ul>\n<li><a href=\"http://visualstudiogallery.msdn.microsoft.com/c8164c71-0836-4471-80ce-633383031099\" rel=\"nofollow\">Visual NUnit</a></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/vrXSn.png\" alt=\"Visual NUnit\"></p>\n\n<ul>\n<li><a href=\"http://qunitjs.com/intro/\" rel=\"nofollow\">QUnit</a></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/e8IuZ.png\" alt=\"QUnit\"></p>\n\n<p><a href=\"http://www.codeproject.com/Articles/11812/Unit-Test-s-Reporter\" rel=\"nofollow\">Unit Test's Reporter</a></p>\n\n<p><img src=\"http://i.stack.imgur.com/Zda67.png\" alt=\"Unit Test's Reporter\"></p>\n"},{"tags":[".net","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":830,"score":3,"question_id":1342918,"title":"Should I unit test event handlers","body":"<p>I tend to veer towards the opinion that only public interfaces should be tested, thereby covering testing of private procedures. However, an interesting question arose yesterday - should one test event handlers? My gut instinct is that logic should be stored in self-contained procedures invoked by the handlers themselves, but this is subjective and would more than likely result in private procedures rather than public ones that are being tested. Should I be unit testing event handlers and, if so, what are the best practices for doing so?</p>\n"},{"tags":["java","unit-testing","spring","junit4","spring-aop"],"answer_count":1,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":3629,"score":5,"question_id":4278788,"title":"injecting mock beans into spring context for testing","body":"<p>I know similar questions have been asked, e.g. <a href=\"http://stackoverflow.com/questions/565334/spring-beans-redefinition-in-unit-test-environment\">here</a>, but having done a search, I've come upon a solution I'm much happier with <a href=\"http://forum.springsource.org/archive/index.php/t-46824.html\">here</a></p>\n\n<p>My only problem however, is that I'm not sure how to implement this solution.</p>\n\n<p>What I want to be able to do is via the HotswappableTargetSource override the bean definitions of select beans in my application context with my test versions and then run the test. </p>\n\n<p>Then for each test case I'd like to specify which beans I want to be hot swappable and then each test  must be able to create its own mock versions and swap those in, and be able to swap back again.</p>\n\n<p>I am able to get the Application Context the test is running with but what I don't know is how to configure a bean to be hot swappable. I know how to do it when configuring beans with xml but I don't want to go back to using xml to configure beans.</p>\n"},{"tags":["c#",".net","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12745742,"title":"Error Setting up Property During Unit Testing Using Moq","body":"<p>Alright, let's assume I have a class like the following ...</p>\n\n<pre><code>public class Foo : IFoo\n{\n    public string Bar\n    {\n        get { ... }\n    }\n\n    public void Initialize()\n    {\n        ...\n    }\n}\n</code></pre>\n\n<p>... and as you can see it implements an interface so I can mock it. Now, in my unit test I'm building the mock like this ...</p>\n\n<pre><code>var mock = new Mock&lt;IFoo&gt;();\nmock.SetupProperty(p =&gt; p.Bar).SetReturnsDefault(\"Some static value here.\");\n</code></pre>\n\n<p>... however, when the test runs I get the following error ...</p>\n\n<blockquote>\n  <p>System.ArgumentException: Property IFoo.Bar is read-only.\n  Parameter name: expression</p>\n</blockquote>\n\n<p>So, three questions:</p>\n\n<ol>\n<li>What am I doing wrong?</li>\n<li>What do I need to do?</li>\n<li>Can you please explain how I misunderstood <code>SetReturnsDefault</code>?</li>\n</ol>\n\n<p>Thanks all!</p>\n"},{"tags":[".net","unit-testing","resharper","testdriven.net"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":830,"score":1,"question_id":5034050,"title":"Why use TestDriven.net when you have Resharper?","body":"<p>As far as I can tell, TestDriven.net is focused on giving direct access to running tests from within Visual Studio. Yet, Resharper, while being a more general tool, provides this functionality as well. If one uses Resharper, is there any point in using TestDriven.net?</p>\n"},{"tags":["unit-testing","system.reactive"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12508657,"title":"How does the TestScheduler in Reactive Extensions v2 work","body":"<p>I have been reading this: <a href=\"http://blogs.msdn.com/b/rxteam/archive/2012/06/14/testing-rx-queries-using-virtual-time-scheduling.aspx\" rel=\"nofollow\">Testing Rx Queries using Virtual Time Scheduling</a></p>\n\n<p>I got to the part \"Using Unit Test projects\" (about halfway down the page) and tried it myself (using VS2012 &amp; MSTest) but my results are not the same as in the document. Specifically, my assertions fail.</p>\n\n<p>Here is my test code:</p>\n\n<pre><code>[TestMethod]\npublic void TestMethod1()\n{\n    var scheduler = new TestScheduler();\n\n    var xs = scheduler.CreateColdObservable(\n        OnNext(10, 42),\n        OnCompleted&lt;int&gt;(20));\n\n    var observer1 = scheduler.CreateObserver&lt;int&gt;();\n    scheduler.Schedule(TimeSpan.FromTicks(190), \n                       (s, t) =&gt; xs.Subscribe(observer1));\n\n    var observer2 = scheduler.CreateObserver&lt;int&gt;();\n    scheduler.Schedule(TimeSpan.FromTicks(220), \n                       (s, t) =&gt; xs.Subscribe(observer2));\n\n    scheduler.Start();\n\n    observer1.Messages.AssertEqual(\n        OnNext(200, 42),\n        OnCompleted&lt;int&gt;(210));\n\n    observer2.Messages.AssertEqual(\n        OnNext(230, 42),\n        OnCompleted&lt;int&gt;(240));\n}\n</code></pre>\n\n<p>One change I had to make was this:</p>\n\n<pre><code>scheduler.Schedule(TimeSpan.FromTicks(190),\n                   () =&gt; xs.Subscribe(observer1));\n</code></pre>\n\n<p>became:</p>\n\n<pre><code>scheduler.Schedule(TimeSpan.FromTicks(190), \n                   (s, t) =&gt; xs.Subscribe(observer1));\n</code></pre>\n\n<p>To be perfectly honest I don't grasp the impact of this change (I haven't been coding in C# that long!).</p>\n\n<p>And here are the results:</p>\n\n<pre><code>Assert.Fail failed. \nExpected: [OnNext(42)@200, OnCompleted()@210]\nActual..: [OnNext(42)@11, OnCompleted()@21]\n</code></pre>\n\n<p>The way I understand it is that I am creating a cold observable that will return the value 42 on the 10th tick and the sequence completes on the 20th tick. I then create and observer that subscribes to this observable indicating that I want the schedule to start at tick 190. Hence the test for value 42 at tick 200 (190 + 10) and the completion time at tick 210. I however get ticks 11 and 21 respectively.</p>\n\n<p>The document is based on a pre-RTM of V2 so I am not sure if the behavior of the TestScheduler has been changed in the RTM or whether I made a mistake somewhere. I'd appreciate if someone could explain what is happening.</p>\n"},{"tags":["visual-studio-2010","unit-testing","templates","silverlight-5.0","silverlight-toolkit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12743907,"title":"Silverlight Toolkit UT Template installation in Visual Studio 2010 Express","body":"<p>I just have installed Visual Studio 2010 Express for Windows Phone developers. This version has some limitations.</p>\n\n<p>I noticed, there are UT templates in Silverlight Toolkit. I have found toolkit library. Templates were here: <em>C:\\Program Files (x86)\\Microsoft SDKs\\Silverlight\\v5.0\\Toolkit\\dec11\\Source</em> as ZIP file</p>\n\n<p>But I cannot install templates into <em>C:\\Users\\user\\Documents\\Visual Studio 2010\\Templates\\ItemTemplates\\Visual C# (and ProjectTemplates\\Visual C#)</em>. </p>\n\n<p>I have tried also to make a shortcuts with parameter\n<em>\"C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\VPDExpress.exe\" /installvstemplates</em> and execute...</p>\n\n<p>but nothing happend.</p>\n\n<p>What should I do to install Windows Phone UT templates?</p>\n"},{"tags":["eclipse","unit-testing","proxy","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":873,"score":2,"question_id":1497957,"title":"Failed web service unit tests behind a proxy in Eclipse","body":"<p>I have a problem executing unit tests in Eclipse behind a proxy, as the classes used by the unit tests call some web services, which are behind a proxy. In Tomcat I can of course specify a proxy to be used, but when I run unit tests directly from Eclipse, the proxy configuration of Eclipse seems to be ignored. How can I configure my unit tests or Eclipse to use a proxy in this case? </p>\n"},{"tags":["javascript","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":36,"score":5,"question_id":12743015,"title":"Unit tests with Javascript","body":"<p>I want to start Unit tests in javascript, But i never done this before. <br />\nSo I start with this code:</p>\n\n<pre><code>window.onload = function(){\n        var color = document.getElementById('wrapper').style.backgroundColor;   \n             if(color == \"red\"){\n                  alert(\"The Background color is correct\");\n              } };\n</code></pre>\n\n<p>But it's too complicated in my version, so how you do unit tests in javascript? <br />\nAnywhere a good tutorial?</p>\n"},{"tags":["unit-testing","asynchronous","synchronous","await"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12641147,"title":"How to unit test a synchronous method calling asynchronous method?","body":"<p>What is the correct way to write a unit test for a synchronous method calling async methods. \nRight now my unit test are passing, but when I try to open the page, it never returns.\nWhy isn't my unit test failing? How can I make it fail?</p>\n\n<p>I replicated my problem with this simple code:</p>\n\n<p>My passing test:</p>\n\n<pre><code>   [TestMethod]\n   public void DoSomeWork_WhenWeDoSomeWork_ShouldReturnDone()\n   {\n      var service = new SyncService();\n\n      const string expected = \"Done\";\n      var actual = service.DoSomeWork();\n\n      Assert.AreEqual(expected, actual);\n\n   }\n</code></pre>\n\n<p>My view that never returns:</p>\n\n<pre><code>    public ActionResult Index()\n    {\n       var syncService = new SyncService();\n\n        return View((object)syncService.DoSomeWork());\n    }\n</code></pre>\n\n<p>My service that never returns to view:</p>\n\n<pre><code>    public class SyncService\n    {\n       public string DoSomeWork()\n       {\n          return SomeWork().GetAwaiter().GetResult();\n       }\n\n       private async Task&lt;string&gt; SomeWork()\n       {\n          var task1 = Task.Delay(1000);\n          var task2 = Task.Delay(1000);\n\n          await Task.WhenAll(task1, task2);\n\n          return \"Done\";\n       }\n    }\n</code></pre>\n"},{"tags":["python","unit-testing","parameterized-unit-test"],"answer_count":3,"favorite_count":6,"up_vote_count":13,"down_vote_count":0,"view_count":2351,"score":13,"question_id":32899,"title":"How to generate dynamic (parametrized) unit tests in python?","body":"<p>I have some kind of test data and want to create an unit test for each item. My first idea was to do it like this:</p>\n\n<pre><code>import unittest\n\nl = [[\"foo\", \"a\", \"a\",], [\"bar\", \"a\", \"b\"], [\"lee\", \"b\", \"b\"]]\n\nclass TestSequence(unittest.TestCase):\n    def testsample(self):\n        for name, a,b in l:\n            print \"test\", name\n            self.assertEqual(a,b)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>The downside of this is that it handles all data in one test. I would like to generate one test for each item on the fly. Any suggestions?</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12734289,"title":"weird issue with python unittest","body":"<p>the following super simple unit test runs fine under python2.7, but gave the following error\n\"no method runTest()\" in 2.6, why is that?</p>\n\n<p>thanks!\nyang</p>\n\n<pre><code>myuser@myhost /tmp $ python26 -m unittest a.AA\nTraceback (most recent call last):\n  File \"/usr/lib64/python2.6/runpy.py\", line 122, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/usr/lib64/python2.6/runpy.py\", line 34, in _run_code\n    exec code in run_globals\n  File \"/usr/lib64/python2.6/unittest.py\", line 874, in &lt;module&gt;\n    main(module=None)\n  File \"/usr/lib64/python2.6/unittest.py\", line 815, in __init__\n    self.parseArgs(argv)\n  File \"/usr/lib64/python2.6/unittest.py\", line 842, in parseArgs\n    self.createTests()\n  File \"/usr/lib64/python2.6/unittest.py\", line 848, in createTests\n    self.module)\n  File \"/usr/lib64/python2.6/unittest.py\", line 612, in loadTestsFromNames\n    suites = [self.loadTestsFromName(name, module) for name in names]\n  File \"/usr/lib64/python2.6/unittest.py\", line 597, in loadTestsFromName\n    test = obj()\n  File \"/usr/lib64/python2.6/unittest.py\", line 215, in __init__\n    (self.__class__, methodName)\nValueError: no such test method in &lt;class 'a.AA'&gt;: runTest\nmyuser@myhost /tmp $ vi a.py\nmyuser@myhost /tmp $ cat a.py\nimport unittest\n\nclass AA(unittest.TestCase):\n    pass\n</code></pre>\n"},{"tags":["python","tdd","unit-testing"],"answer_count":7,"favorite_count":10,"up_vote_count":17,"down_vote_count":0,"view_count":3022,"score":17,"question_id":2798956,"title":"Python unittest: Generate multiple tests programmatically?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/32899/how-to-generate-dynamic-parametrized-unit-tests-in-python\">How to generate dynamic (parametrized) unit tests in python?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a function to test, <code>under_test</code>, and a set of expected input/output pairs:</p>\n\n<pre><code>[\n(2, 332),\n(234, 99213),\n(9, 3),\n# ...\n]\n</code></pre>\n\n<p>I would like each one of these input/output pairs to be tested in its own <code>test_*</code> method. Is that possible?</p>\n\n<p>This is sort of what I want, but forcing every single input/output pair into a single test:</p>\n\n<pre><code>class TestPreReqs(unittest.TestCase):\n\n    def setUp(self):\n        self.expected_pairs = [(23, 55), (4, 32)]\n\n    def test_expected(self):\n        for exp in self.expected_pairs:\n            self.assertEqual(under_test(exp[0]), exp[1])\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>(Also, do I really want to be putting that definition of <code>self.expected_pairs</code> in <code>setUp</code>?)</p>\n\n<p><strong>UPDATE:</strong> Trying <strong>doublep</strong>'s advice:</p>\n\n<pre><code>class TestPreReqs(unittest.TestCase):\n\n    def setUp(self):\n        expected_pairs = [\n                          (2, 3),\n                          (42, 11),\n                          (3, None),\n                          (31, 99),\n                         ]\n\n        for k, pair in expected_pairs:\n            setattr(TestPreReqs, 'test_expected_%d' % k, create_test(pair))\n\n    def create_test (pair):\n        def do_test_expected(self):\n            self.assertEqual(get_pre_reqs(pair[0]), pair[1])\n        return do_test_expected\n\n\nif __name__ == '__main__':\n    unittest.main()   \n</code></pre>\n\n<p>This does not work. 0 tests are run. Did I adapt the example incorrectly?</p>\n"},{"tags":["python","unit-testing","testcase","parameterized-unit-test"],"answer_count":6,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":683,"score":5,"question_id":1676269,"title":"Writing a re-usable (parametrized) unittest.TestCase method","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/32899/how-to-generate-dynamic-parametrized-unit-tests-in-python\">How to generate dynamic (parametrized) unit tests in python?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm writing tests using the unittest package, and I want to avoid repeated code. I am going to carry out a number of tests which all require a very similar method, but with only one value different each time. A simplistic and useless example would be:</p>\n\n<pre><code>class ExampleTestCase(unittest.TestCase):\n\n    def test_1(self):\n        self.assertEqual(self.somevalue, 1)\n\n    def test_2(self):\n        self.assertEqual(self.somevalue, 2)\n\n    def test_3(self):\n        self.assertEqual(self.somevalue, 3)\n\n    def test_4(self):\n        self.assertEqual(self.somevalue, 4)\n</code></pre>\n\n<p>Is there a way to write the above example without repeating all the code each time, but instead writing a generic method, e.g.</p>\n\n<pre><code>    def test_n(self, n):\n        self.assertEqual(self.somevalue, n)\n</code></pre>\n\n<p>and telling unittest to try this test with different inputs?</p>\n"},{"tags":["ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":12739389,"title":"How to use Test:Unit on a ruby file without classes (only methods)","body":"<p>I have to write code for an homework and I wish to do TDD from the start.\nThe homework consists of one ruby file with methods in it, no class.</p>\n\n<p>All examples I find on the Internet test against classes.  How could I test the following method?</p>\n\n<p><strong>homework.rb</strong></p>\n\n<pre><code>#!/usr/bin/env ruby\n\ndef count_words(str)\n  # SOME CODE HERE\nend\n</code></pre>\n\n<p>There is an auto-grading system that take one ruby file with the methods defined for the homework as an input.  So, I have to write my tests in a separate file (test_homework.rb) or comment out my test before submitting (which I found counter productive...). </p>\n\n<p>How will I test the count_words method using Test:Unit?</p>\n"},{"tags":["unit-testing","codeigniter","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12739470,"title":"Auto genarate testcases for codeigniter","body":"<p>How to genarate testcases for codeigniter or any other MVC based project using the command <strong>phpunit-skelgen</strong> and I have to create testcases with assertions automatically.</p>\n\n<p>Thank u all.</p>\n"},{"tags":["string","unit-testing","data-structures","index","googletest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12701675,"title":"Unit testing a Text Index","body":"<p>Consider a text index such as a suffix tree or a suffix array supporting <em>Count</em> queries (number of occurrences of a pattern) and <em>Locate</em> queries (the positions of all the occurrences of a pattern). How   would you go about unit testing such a class ?</p>\n\n<p>What I have in mind is to generate a <em>big</em> random string then extract a random substring from this big string and compare the results of both queries with naive implementations (such as string::find). Another idea I have is to find the most frequent substring of length <code>l</code> appearing in the original string (using perhaps a naive method) and use these substrings for testing the index.</p>\n\n<p>This isn't the best way, so what would be a good design of the unit tests for a text index ?</p>\n\n<p>In case it matters, this is in C++ using googletest.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","wcf","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":183,"score":2,"question_id":11991232,"title":"How to unit test WCF ServiceHost.Faulted event","body":"<p>Lets say I have the following classes (removing exception handling, etc):</p>\n\n<pre><code>[ServiceBehavior(InstanceContextMode = ..., ConcurrencyMode = ..., etc)]\npublic class MyService : IMyService  \n{\n    ServiceReferenceMethodsHere....\n}\n\npublic class HostStartup : IHostStartup\n{\n    private ServiceHost _myHost;\n\n    public ServiceHost myHost\n    {\n       get { return _myHost; }\n       set { _myHost= value; }\n    }\n\n    public void StartService(IMyService instance)\n    {\n        _myHost = new ServiceHost(instance);\n    }\n\n    public void StopService()\n    }\n        _myHost.Close();\n    {\n}\n</code></pre>\n\n<p>Now, subscribe to the <code>ServiceHost.Faulted</code> event:</p>\n\n<pre><code>// Note: Interfaces are registered via unity container and dependency injection.\n// Unity bootstrapper class not shown. \npublic class TestHost : ITestHost\n{\n    private IHostStartup _hostStartup;\n    private IMyService _myService\n\n    public TestHost(IHostStartup hostStartup, IMyService myService)\n    {\n        _hostStartup = hostStartup;\n        _myService = myService;\n        hostStartup.StartService(_myService);\n        hostStartup.myHost.Faulted += HandleHostFault;\n    }\n\n    private void HandleHostFault(object sender, EventArgs e)\n    {\n        HandleFaultHere.....\n    }\n}\n</code></pre>\n\n<p>Okay, great, now I have code to handle a <code>ServiceHost.Faulted</code> event. (Of course I have not shown all the other WCF guts that really make my service work...)</p>\n\n<p><strong>My question is</strong>, how to unit test my private HandleHostFault method without cheating and setting it to public (we all want to do that at times).<br>\nIn other words, is it possible to raise <code>ServiceHost.Faulted</code> event in unit testing environment?</p>\n\n<p>I prefer to use NSubstitute for my unit testing.  I have tried the following:</p>\n\n<pre><code>private IHostStartup _hostStartup;\nprivate IMyService _myService;\nprivate TestHost _testHost;\n\npublic void MyTestInitialize()\n{\n    _hostStartup = Substitute.For&lt;IHostStartup&gt;();\n    _myService = Substitute.For&lt;IMyService&gt;();\n    _hostStartup.When(x =&gt; x.StartService(Arg.Any&lt;IMyService&gt;())).Do(x =&gt;\n                 {\n                    _hostStartup.myHost = Substitute.For&lt;ServiceHost&gt;();\n                 });\n    _testHost  = new TestHost(_hostStartup, _myService);\n}\n\npublic void HandleHostFault_InitializeHost_ServiceHostStatusOpen()\n{\n     // Arrange\n\n     // Act\n     hostStartup.myHost.Faulted += Raise.Event();\n\n\n     // Assert\n}\n</code></pre>\n\n<p><code>hostStartup.myHost.Faulted += Raise.Event()</code> does not raise the faulted event. </p>\n\n<p><strong>Any ideas how to raise this servicehost.faulted event?  Is it possible?</strong> </p>\n\n<p>** UPDATE **</p>\n\n<p>I decided not to test ServiceHost communication object directly. I decided it was \"not testable using NSubstitute\". I now handle the ServiceHost.Faulted event from my HostStartup class.</p>\n\n<pre><code>public class HostStartup : IHostStartup\n{\n    public event EventHandler&lt;EventArgs&gt; OnHostFault;\n\n    public ServiceHost MyHost { get; private set; }\n\n    public void StartService(IMyService instance)\n    {\n        MyHost = new ServiceHost(instance);\n        MyHost.Faulted += HandleFault;\n    }\n\n    public void StopService()\n    }\n        _myHost.Close();\n    {\n\n    private void InvokeOnServiceHostFault(EventArgs eventArgs)\n    {\n        EventHandler&lt;EventArgs&gt; handler = OnHostFault;\n        if (handler != null) handler(this, eventArgs);\n    }\n\n    private void HandleFault(object sender, EventArgs eventArgs)\n    {\n        InvokeOnServiceHostFault(eventArgs);\n    }\n}\n\n// Note: Interfaces are registered via unity container and dependency injection.\n// Unity bootstrapper class not shown. \npublic class TestHost : ITestHost\n{\n    private IHostStartup _hostStartup;\n    private IMyService _myService\n\n    public TestHost(IHostStartup hostStartup, IMyService myService)\n    {\n        _hostStartup = hostStartup;\n        _myService = myService;\n        hostStartup.StartService(_myService);\n        hostStartup.OnHostFault += HandleHostFault;\n    }\n\n    private void HandleHostFault(object sender, EventArgs e)\n    {\n        HandleFaultHere.....\n    }\n}\n</code></pre>\n\n<p>and finally the unit test action works great:</p>\n\n<pre><code>public void HandleHostFault_InitializeHost_ServiceHostStatusOpen()\n{\n     // Arrange\n\n     // Act\n     hostStartup.OnHostFault += Raise.Event();  // works great!! :)\n\n\n     // Assert\n}\n</code></pre>\n"},{"tags":["java","android","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12311774,"title":"null point exception when I segregate the code in different files to run the test case using robotium","body":"<p>I am new to Android world and Android automation. I am working on test automation for banking app, where first is login page after login successful there will be transaction page and setting pages. I wrote 3 classes, one for instrumentation with <code>ActivityInstrumentation</code> class which creates the handle of <code>msolo</code>, 2nd is <code>AppTest</code> which is my test class where I will write my test cases, and 3rd is <code>AppUIHelper</code> where I will have my test helper methods.</p>\n\n<p>Below is my error that I am getting.</p>\n\n<pre><code>java.lang.NullPointerException\n    at com.androidApp.Business.AppUILayer.PendingDevice(AppUILayer.java:34)\n    at com.androidApp.Test.AppTest.testPendingDevice(AppTest.java:72)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:204)\n    at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:194)\n    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)\n    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)\n    at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:520)\n    at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1447)\n</code></pre>\n\n<p>Where am I making a mistake? Please help me solve this issue please.</p>\n\n<p>Below are my class files:</p>\n\n<p><strong>Used for android activity instrumentation: Instrumentation class:</strong>  </p>\n\n<pre><code>public class InstrumentationHandle extends ActitvityInstrumentationTestCase2\n{\n    protected Solo msolo;\n    private static final String TARGET_PACKAGE_ID=\"com.android.mobileandroidapp\";\n    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME=\"com.android.mobileandroidapp.LoginActivity\";\n    private static Class launcherActivityClass;\n    Logger log = new Logger();\n    public AppUILayer appUI = null;\n\n    static {\n\n        try {\n            launcherActivityClass=Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);\n        } catch (ClassNotFoundException e)  {\n            throw new RuntimeException(e);\n        }\n    }\n\n    /// Constructer\n    public InstrumentationHandle() throws ClassNotFoundException {\n        super(TARGET_PACKAGE_ID,launcherActivityClass);\n    }\n\n    protected void setUp() {\n        msolo = new Solo(getInstrumentation(), getActivity());\n    }\n\n    public Solo getSolo() {\n        return msolo;\n    }\n}\n</code></pre>\n\n<p><strong>Second file is: <code>AppTest</code> (where I am thinking to write all the test cases)</strong></p>\n\n<pre><code>public class AppTest extends InstrumentationHandle {\n    public boolean result;\n    public AppUILayer app= new AppUILayer();\n\n    public AppTest() throws ClassNotFoundException {\n        super();\n    }\n\n    protected void setUp() { \n        super.setUp();\n    }\n\n    public void testPendingDevice() throws InterruptedException {\n        String loginID=\"MobileCNP1\";\n        String password=\"CNPMobile1\";\n        result= app.PendingDevice(loginID, password);\n        assertTrue(result);\n    }\n\n    public void tearDown() throws Exception {\n        //solo.finishOpenedActivities();\n    }\n}\n</code></pre>\n\n<p><strong>3rd is the Helper class for test cases: <code>AppUIHelper</code></strong></p>\n\n<pre><code>public class AppUIHelper extends InstrumentationHandle {\n    public AppUILayer() throws ClassNotFoundException {\n    }\n\n    public boolean result= false;\n\n    public boolean PendingDevice(String login, String password) throws InterruptedException {\n        msolo.enterText(0, login); \n        msolo.enterText(1, password);\n        //Click on Login button\n        msolo.clickOnButton(0);\n        Thread.sleep(5000);\n        result=msolo.waitForText(\"The mobile Device has already been registered but is pending approval by the account administrator\");\n        msolo.clickOnButton(\"OK\");\n        return result;\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","cakephp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":12736869,"title":"Checking the HTTP Response status in a CakePHP controller unit test","body":"<p>I want to write a unit test that checks to verify that my CakePHP Controller will return a successful HTTP status code.  The <a href=\"http://book.cakephp.org/2.0/en/development/testing.html#testing-controllers\" rel=\"nofollow\">manual</a> does not make the process for doing this obvious.  How exactly can I test that assertion?</p>\n"},{"tags":["java","unit-testing","integration-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":71,"score":4,"question_id":12735874,"title":"How do I skip a section of code when unittesting in java","body":"<p>I am working on a Java web app with unit/integration tests. App gets deployed to Jetty and uses H2 db while running the integration test phase of maven. I've one oracle function which is called from dao layer which can not be migrated to H2 db, hence i want to mock/skip this part in code while running the test cases. </p>\n\n<p>I thought of having a flag which can tell if i'm running application in test mode and put the condition in code for it, but doesn't look like cleaner approach to me. Please suggest best approach to achieve this.</p>\n"},{"tags":["c#","unit-testing","reflection"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12734724,"title":"Get Assemblies with Attribute in Unit Test Project","body":"<p>Is it possible to get all the referenced assemblies (within a Unit Test project) that have a custom attribute applied. I use the following code withing my application which works successfully:</p>\n\n<pre><code>var assemblies = System.Web.Compilation.BuildManager.GetReferencedAssemblies().Cast&lt;Assembly&gt;().Where(a =&gt; a.GetCustomAttributes(false).OfType&lt;AssemblyCategoryAttribute&gt;().Any()).ToList();\n</code></pre>\n\n<p>However System.Web.Compilation.BuildManager doesn't work in my test project so I tried:</p>\n\n<pre><code>Assembly.GetExecutingAssembly().GetReferencedAssemblies().Select(a =&gt; Assembly.ReflectionOnlyLoad(a.FullName).Where(a =&gt; a.GetCustomAttributes(false).OfType&lt;AssemblyCategoryAttribute&gt;().Any()).ToList();\n</code></pre>\n\n<p>But this threw the error:</p>\n\n<blockquote>\n  <p>It is illegal to reflect on the custom attributes of a Type loaded via\n  ReflectionOnlyGetType (see Assembly.ReflectionOnly) -- use\n  CustomAttributeData instead.</p>\n</blockquote>\n\n<p>I'd appreciate it if someone could show me how to do this. Thanks</p>\n"},{"tags":["c#",".net","unit-testing","nunit","moq"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":104,"score":2,"question_id":12731386,"title":"How to unit test this? Big foreach with lots of db calls","body":"<p>I have to make a program that basically reads x lines from a file and then tries to find it in the db then take some of the info in the file and update the info of the row in the db.</p>\n\n<p>If all else fails insert it as a new row in db. </p>\n\n<p>So basically alot of inserting and updating.</p>\n\n<p>I trying to unit test as I am updating a lot of fields I want to make sure that each piece of info is going to right spot(ie not email address is being set with firstname or something like that).</p>\n\n<p>However I am not sure how to do it as I see this being the program method</p>\n\n<pre><code>// get records from file\n\nforeach record in file\n{\n   db record = find if it is in db\n\n   if(record != null)\n   {\n        if(do another logic check)\n         {\n             // update record\n         }\n         else if(do another logic check)\n         { \n            // update record\n         }\n        else\n        {\n           // do some more logic \n\n            if(do another check)\n             {\n               // update record\n             }\n        }\n   }\n   else\n   {\n      // do some more logic checks and do inserts.\n   }\n}\n</code></pre>\n\n<p>I see this in a void method with maybe some private methods(for say update record part). Now how should I be unit testing this? I want to unit test the first if(do another logic check) and if say some record I send in meets those conditions.</p>\n\n<p>However since those would be private methods I can't unit test them, right now I don't see the the method returning anything since it will go through hundreds of records and I probably will be printing out most of stuff into a error log file or something.</p>\n\n<p>the code I showed you is in a service layer. I would mock out the db method calls with moq.</p>\n\n<p>The application is a console app.</p>\n\n<p>Any suggestions how I could better break this up so I could check the logic?</p>\n"},{"tags":["java","unit-testing","testng"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1404,"score":1,"question_id":3677271,"title":"TestNG: How to test for mandatory exceptions?","body":"<p>I'd like to write a TestNG test to make sure an exception is thrown under a specific condition, and fail the test if the exception is not thrown. Is there an easy way to do this without having to create an extra boolean variable?</p>\n\n<p>A related blog post on this subject: <a href=\"http://konigsberg.blogspot.com/2007/11/testng-and-expectedexceptions-ive.html\" rel=\"nofollow\">http://konigsberg.blogspot.com/2007/11/testng-and-expectedexceptions-ive.html</a></p>\n"},{"tags":["xcode","unit-testing","ios6"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1180,"score":5,"question_id":11688720,"title":"Unit Test target doesn't run on XCode 4.5","body":"<p>I'm on the latest beta version of Xcode (Xcode 4.5 with iOS 6.0). I've got an xcode project for an iphone app and I want to add a Unit Test target on it. I've followed carefully the instructions given on <a href=\"http://developer.apple.com/library/ios/#DOCUMENTATION/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html\">this page</a>  but I can't run the tests. Here's the message I read in the console:  </p>\n\n<pre><code>Failed to find SDK: '6.0'  \nerror: failed to attach to process ID 0\n</code></pre>\n\n<p>The target corresponding to the main application runs perfectly well on the iPhone 6.0 simulator though. </p>\n\n<p>Where can I have made a mistake?</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","file-io"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12726472,"title":"Can we do unit testing for the file I/o operations","body":"<p>Can we do unit testing for the file I/o operations in C# using VS2010? Since the unit testing is not efficient to access the data layer, do we need to unit test operation or is there any mock or fake operations to do so</p>\n"},{"tags":["xcode","osx","unit-testing","command-line","breakpoints"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12727385,"title":"Xcode 4, breakpoints not working in unit tests for Mac OS command line tool","body":"<p>I have a simple <em>Mac OS X</em> <strong>Command Line Tool</strong> project in Xcode 4.5. I manually added a unit test target off of the <strong>Cocoa Unit Testing Bundle</strong> template (the Command Line Tool template doesn't have an <em>Include Unit Tests</em> switch). The problem: I can't get the debugger to stop on a breakpoint when running tests (Product > Test).</p>\n\n<p>As I did a google search before asking, these are some things I already tried/checked:</p>\n\n<ul>\n<li>The unit tests do run (they correctly fail on e.g. STFail()).</li>\n<li>The master <em>Breakpoints</em> switch on the top bar is on (turning it off and on doesn't help).</li>\n<li><em>Build Configuration</em> is set to <em>Debug</em> on the test target (debugger is LLDB, changing to GDB doesn't help).</li>\n<li>Debugging in general works. In the main console app target breakpoints are hit just fine so it's just the unit tests that have a problem. Also, I made a test iOS app with unit tests included -- both the app and unit tests break fine.</li>\n<li>The build settings look fine (let me know if there are other I ought to check):\n<ul>\n<li>Generate Debug Symbols = Yes</li>\n<li>Optimization Level = None [-O0] (for Debug)</li>\n</ul></li>\n<li>Setting a symbolic breakpoint (on -[NSException raise] or objc_exception_throw) doesn't help.</li>\n<li>Reloading project or restarting Xcode doesn't help.</li>\n</ul>\n\n<p>What else can I do to hit a breakpoint in my unit tests?</p>\n"},{"tags":["visual-studio-2010","visual-studio","unit-testing","load-testing","data-driven-tests"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12710732,"title":"Visual Studio Load Test to simulate many users in Data Driven fashion?","body":"<p>I'm trying to load test a web service.</p>\n\n<p>I've got a simple method that takes 2 params that get sent to the web service and returns the response, and I created a Unit Test from this method.</p>\n\n<p>Because I <strike>want</strike> <strong>need</strong> to test various different inputs to effectively test the service, I setup a CSV with ~1000 rows as a DataSource for the Unit Test.</p>\n\n<p>I can run this one Unit Test and it will spin through all the rows, sequentially calling the web service with different values. </p>\n\n<p><strong>However</strong>, this is not what I need. I <strong>need</strong> each row to correspond to a different user on a different thread, using the Load Test configuration to include think times, ramp up users with step load, test mix config, etc. </p>\n\n<p>I can achieve this by removing my data source from the unit test and hard-coding values .. <strong><em>but this is a fundamentally flawed test:</em></strong> In order to <em>really</em> test the web service, I need each <strong>user</strong> to be sending different values and getting different results. </p>\n\n<p>...</p>\n\n<p>So, how can I hook a data source to a load test and have that load test start each user's instance of a unit test with different values?</p>\n"},{"tags":["unit-testing","triggers","salesforce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12714959,"title":"Writing a test class on a Trigger in Salesforce","body":"<p>I am a complete code noob and need help writing a test class for a trigger in Salesforce.  Any help would be greatly appreciated.</p>\n\n<p>Here is the trigger:</p>\n\n<pre><code>trigger UpdateWonAccounts on Opportunity(before Update) {\n  Set &lt; Id &gt; accountIds = new Set &lt; Id &gt; ();\n\n  //Collect End user Ids which has won Opportunities\n  for (Opportunity o : Trigger.new) {\n    if (o.isWon &amp;&amp; o.EndUserAccountName__c != null) {\n      accountIds.add(o.EndUserAccountName__c);\n    }\n  }\n\n  List &lt; Account &gt; lstAccount = new List &lt; Account &gt; ();\n\n  //Iterate and collect all the end user records\n  for (Account a : [Select Id, Status__c From Account where Id IN : accountIds]) {\n    lstAccount.add(new Account(Id = a.Id, Status__c = true));\n  }\n\n  //If there are any accounts then update the records\n  if (!lstAccount.isEmpty()) {\n    update lstAccount;\n  }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","unit-testing","orm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12728491,"title":"Developing Unit Tests around an ORM-based MVC project","body":"<p>I'm a bit lost as to how unit tests could tie in to my current project's design.  My current tests are all integration tests which end up pretty much just testing the third party ORM.  I was thinking I needed to use the Repository pattern but its not clear to me how exactly how to add that as a layer in my application.  Here is a basic object I am working with for an example:</p>\n\n<pre><code>public class Venue : ModelBase&lt;Venue&gt;\n{\n    public Venue ()\n        : base()\n    {\n    }\n\n    public virtual string VenueName { get; set; }\n}\n</code></pre>\n\n<p>And its actions:</p>\n\n<pre><code>    [HttpGet]\n    public ActionResult Create ()\n    {\n        return View();\n    }\n\n    public ActionResult Create ([ModelBinder(typeof(VenueBinder))]Venue Venue)\n    {\n        Venue.Save();\n        return RedirectToAction(\"List\", \"Venue\");\n    }\n\n    [HttpGet]\n    public ActionResult Edit (long id) \n    {\n        return View(Venue.Load(id));    \n    }\n\n    [HttpPost]\n    public ActionResult Edit ([ModelBinder(typeof(VenueBinder))]Venue v, long id)\n    {\n        VenueBinder.EditModel(v, id);\n        return RedirectToAction(\"List\", \"Venue\");\n    }\n\n    public ActionResult Delete (long id)\n    {\n        Venue temp = Venue.Load(id);\n        var eventController = new EventController();\n        foreach (var e in Event.All().ToList().FindAll(x =&gt; x.Venue.ID == id))\n        {\n            eventController.Delete(e.ID);\n        }\n        temp.Delete();\n        return RedirectToAction(\"List\", \"Venue\");\n\n    }       \n</code></pre>\n\n<p>and model binder:</p>\n\n<pre><code>public class VenueBinder : IModelBinder\n{\n    /// &lt;summary&gt;\n    /// bind form data to Venue model\n    /// &lt;/summary&gt;\n    public object BindModel (ControllerContext controllerContext, ModelBindingContext bindingContext)\n    {\n        return new Venue\n        {\n            VenueName = bindingContext.ValueProvider.GetValue(\"name\").AttemptedValue\n        };\n    }\n\n    /// &lt;summary&gt;\n    /// edits an existing Venue object\n    /// &lt;/summary&gt;\n    public static void EditModel (Venue v, long id)\n    {\n        Venue temp = Venue.Load(id);\n        temp.VenueName = v.VenueName;\n        temp.Save();\n    }\n}\n</code></pre>\n"},{"tags":["wordpress","unit-testing","selenium"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":12728563,"title":"Can I get at my application code from inside a Selenium test?","body":"<p>I'm writing unit and integration tests for a WordPress site, using PHPUnit and Selenium. There's a useful WP test library for PHPUnit, used by extending a special WP_UnitTestCase instead of PHPUnit_TestCase.</p>\n\n<p>So far so good. What would be truly useful, though, would be if my Selenium tests could also execute code in the context of WordPress. So for example, I could build and manipulate users, posts etc while testing client-side behaviour, much in the way you can do with a Rails integration test.</p>\n\n<p>Is there any way I can use the features of a WP_UnitTestCase in the context of a Selenium test?</p>\n"},{"tags":["java","unit-testing","servlets","testng","mockrunner"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2672,"score":3,"question_id":2570875,"title":"Servlet unit test","body":"<p>Currently I'm using TestNG framework for testing application business logic, i added some Servlet classes recently.</p>\n\n<p>How do I unit test these Servlet classes in TestNg framework? </p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":12727877,"title":"Path not found at \"Out\\Foldername\\\" on unit test run in VS2010","body":"<p>I am using VS2010 for development and unit testing. one of my module reads some dlls from specific folder (say \".\\Plugin\"). When I run unit test , it fails saying part of path not found \"\\TestResult\\Out\\Plugin\". This is because I dont have \"Plugin\" in out directory. </p>\n\n<p>How do I create \"Plugin\" folder in Out directory on every test run.</p>\n"},{"tags":["java","unit-testing","junit","spring-webflow","spring-webflow-2"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":561,"score":6,"question_id":2945494,"title":"Unit testing nested subflows (subflows of subflows)","body":"<p>I'm trying to write unit test for a flow, which has subflow, which, itself, has another subflow.</p>\n\n<p>I register first flow using\n<code>FlowDefinitionResource getResource(FlowDefinitionResourceFactory resourceFactory)</code>.</p>\n\n<p>Then I register subflow definitions during test execution in <code>FlowDefinitionRegistry</code> before transitioning to them.</p>\n\n<p>Transitioning to \"first level\" subflow goes ok. The result of transitioning to subflow of current subflow - <code>NoSuchFlowDefinitionException</code>.</p>\n\n<p>The problem is that subflow definitions are all seem attached to the primary flow of the test and subflow can't be found within another subflow.</p>\n\n<p>Is there any way to attach subflow definition to another subflow in tests, which extend <code>AbstractXmlFlowExecutionTests</code>?</p>\n"},{"tags":["java","unit-testing","tdd","mvp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":12719650,"title":"MVP, testing, and private methods","body":"<p>I've switched to an MVP architecture and am trying to test it.  I have some question on how to structure my Presenter.</p>\n\n<pre><code>public class Presenter\n{\n    public void onResume()\n    {\n        doA();\n        doB();\n        doC();\n    }\n\n    protected void doA() {};\n    protected void doB() {};\n    protected void doC() {};\n}\n\npublic class MyScreen implements MyScreenView\n{\n    private Presenter presenter;\n\n    public MyScreen()\n    {\n        presenter = new Presenter(this);\n    }\n\n    public OnResume()\n    {\n        presenter.OnResume();\n    }\n}\n</code></pre>\n\n<p>In the above code, when the view is resumed, the view simply calls the presenter OnResume().  The presenter internally calls 3 methods, doA(), doB(), and doC() to do whatever it has to do.</p>\n\n<p>Alternatively, I can just call doA(), doB() and doC() in the view directly like so:</p>\n\n<pre><code>public class Presenter\n{\n    public void doA() {};\n    public void doB() {};\n    public void doC() {};\n}\n\npublic class MyScreen implements MyScreenView\n{\n    private Presenter presenter;\n\n    public MyScreen()\n    {\n        presenter = new Presenter(this);\n    }\n\n    public OnResume()\n    {\n        presenter.doA();\n        presenter.doB();\n        presenter.doC();\n    }\n}\n</code></pre>\n\n<p>My question is, its easier for me to test the second solution, since the presenter is cleanly broken up into 3 seperate public methods of individual responsibility, I can write tests for doA, doB and doC individually instead of one monolithic test for the presenter.onResume() method of solution 1.</p>\n\n<p>In the first solution, I have to write tests for onResume(), which has a combined responsibility of calling these 3 methods.  This means its harder to test, as its much easier to test smaller functions of individual responsibility than fucntions that call other private functions.  However, the second solution doesn't feel like a good MVP in my belief, since it seems to know what the presenter is doing and is just not letting the presenter do what it should do in the onResume() method of the first solution.</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12700415,"title":"NullReferenceException when calling UrlHelper.Content(string) in a unit test","body":"<p>I have a few <code>UrlHelper</code> extension methods that I'd like to unit test.  However, I'm getting a <code>NullReferenceException</code> from the <code>UrlHelper.Content(string)</code> method when the path begins with \"~/\".  Anyone know what the issue is?</p>\n\n<pre><code>[Test]\npublic void DummyTest()\n{\n    var context = new Mock&lt;HttpContextBase&gt;();\n    RequestContext requestContext = new RequestContext(context.Object, new RouteData());\n    UrlHelper urlHelper = new UrlHelper(requestContext);\n\n    string path = urlHelper.Content(\"~/test.png\");\n\n    Assert.IsNotNullOrEmpty(path);\n}\n</code></pre>\n"},{"tags":["unit-testing","grails","classpath"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12500389,"title":"Can I configure Grails to see test classes in my plugin?","body":"<p>I have a large grails project split into several 'in place' plugins to keep things nice and modular.  One of my plugins, called 'core services', contains all my domain classes, and also some nice set up work in an abstract test class (adding mock domain instances, etc) that is shared by a number of unit tests.</p>\n\n<p>This is all great for unit tests that also live in the plugin, but I'd like to use that abstract test class to set up mock data in other grails projects' tests that uses that plugin.  It doesn't seem that plugins' test classes are included on the classpath when running tests.  Is there a way I can tell Grails to include them?:</p>\n\n<pre><code>//this abstract test class is in the core service plugin's test directory.  My IDE has no problem with this import\nimport com.myproject.coreservices.service.AbstractGiftInstanceRelatedUnitTest \n\n//this test class is in the project that uses the plugin\nclass ClaimGiftControllerTests extends AbstractGiftInstanceRelatedUnitTest { \n\n.. my tests\n}\n</code></pre>\n\n<p>And the output (non important parts removed):</p>\n\n<pre><code>| Error Compilation error compiling [unit] tests: startup failed:\n...../test/unit/com/myproject/ClaimGiftControllerTests.groovy: 3: unable to resolve class com.myproject.coreservices.service.AbstractGiftInstanceRelatedUnitTest\n @ line 3, column 1.\n   import com.myproject.coreservices.service.AbstractGiftInstanceRelatedUnitTest\n   ^\n</code></pre>\n"},{"tags":["unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":38,"score":-2,"question_id":12708153,"title":"How to run Nunit test?","body":"<p>Can any one please tell me what is the result in Nunit Test?\nWhether it will produce pass or fail (with error message) or it will give in which point it will produce the error and more details?\nCan we store the error results in an XML file?</p>\n"},{"tags":["python","unit-testing","py.test"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12582503,"title":"Test gathering/identification failure.","body":"<p>Using py.test, two test called the same in different directory causes py.test to fail. Why is that?  How can I change this without renaming all the tests? </p>\n\n<p>To duplicate do:</p>\n\n<pre><code>; cd /var/tmp/my_test_module\n; mkdir -p ook/test           \n; mkdir -p eek/test\n; touch ook/test/test_proxy.py\n; touch eek/test/test_proxy.py\n; py.test\n============================= test session starts ==============================\nplatform linux2 -- Python 2.7.3 -- pytest-2.2.4\ncollected 0 items / 1 errors \n\n==================================== ERRORS ====================================\n___________________ ERROR collecting ook/test/test_proxy.py ____________________\nimport file mismatch:\nimported module 'test_proxy' has this __file__ attribute:\n  /home/ygolanski/code/junk/python/mymodule/eek/test/test_proxy.py\nwhich is not the same as the test file we want to collect:\n  /home/ygolanski/code/junk/python/mymodule/ook/test/test_proxy.py\nHINT: remove __pycache__ / .pyc files and/or use a unique basename for your test file modules\n=========================== 1 error in 0.01 seconds ============================\n</code></pre>\n"},{"tags":["c++","unit-testing","function-pointers","googletest","member-function-pointers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12723163,"title":"C++ GoogleTest using fixture - function pointer definition not accessible","body":"<p>I implemented a googletest, with fixture class <code>UnitTest_solver</code>. Implementation for the fixture is the following. It contains helper functions </p>\n\n<pre><code>class UnitTest_solver : public ::testing::Test\n{\n\nprotected:\n\n    static void SetUpTestCase()\n    {\n        // setup table with data\n        m_col = 2; \n        m_row = 100;\n        //  other things to initialize m_test_data \n    }\n\n\n\n    static void TearDownTestCase()\n    {\n        for(int i = 0 ; i &lt; m_row ; i++)\n            delete[] m_test_data[i];\n        delete[] m_test_data;\n    }\n\n\n\n    static double chi_sqr(double* x)\n    {\n        if(m_col &lt; 2)\n            return 0;\n\n        double fx = 0;\n\n        double * row_i = new double[m_col - 1];\n\n        for(int i = 0 ; i &lt; m_row ; i++)\n        {\n            for(int j = 0 ; j &lt; m_col - 1 ; j++)\n                row_i[j] = m_test_data[i][j];\n\n            fx += pow(m_test_data[i][0] - func_1(x, row_i, m_col - 1), 2.0); \n        }\n    return fx;\n    }\n\n\n    static double func_1(double* x, double* dbl, int nb_param)\n    {\n        if(nb_param != 2)\n            return 0;\n\n        return x[0] * exp(-1 * x[1] * dbl[0]);\n    }\n\n    static double UnitTest_solver::functPtr( double * parameters, void * userinfo)\n    {\n        return  chi_sqr(parameters);\n    }\n\n    static ofstream thing;\n    static double** m_test_data;\n    static int m_col, m_row;\n\n };\n</code></pre>\n\n<p>Also, out of the fixture scope, i initialize static variables. Last is function pointer. is definition syntax ok ?</p>\n\n<pre><code>double** UnitTest_solver::m_test_data = 0;\nint UnitTest_solver::m_col = 0;\nint UnitTest_solver::m_row = 0;\n\ndouble (UnitTest_solver::*functPtr)(double * , void *) = 0;\n</code></pre>\n\n<p>then, i have a test case, with link to fixture UnitTest_solver. </p>\n\n<pre><code>TEST_F(UnitTest_solver, testFunc1)\n{\n    Solver* solversqp = new Solver();\n    solversqp-&gt;set_pointer_to_function(UnitTest_solver::functPtr, (void*)0);\n    //...\n}\n</code></pre>\n\n<p>second line show compile time error with <code>UnitTest_solver::functPtr</code> : when mouse is over the error, info is 'function defined at line xxx is unacessible', with xxx pointing to <code>functPtr</code> definition inside the fixture.</p>\n\n<p>If i run the ggltest commenting the last line, <code>solversqp-&gt;set_pointer_to_function(UnitTest_solver::functPtr, (void*)0);</code>, test is finishing (if i put a trivial ASSERT, it is successful).</p>\n\n<p>Whats wrong with my function pointer definition.</p>\n"},{"tags":["java","unit-testing","clover"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12723451,"title":"clover: how does it work?","body":"<p>I am evaluating clover currently and wonder how to use it best. First I'd like to understand how it works conceptually.</p>\n\n<p>1) What does instrumentation mean? Are the test-calls attached to implementation's statements? </p>\n\n<p>2) How is this done? Are the tests actually executed with some fancy execution context (similar to JRebel e.g.) for this? Or is it more like static analysis ?</p>\n\n<p>3) After a \"clover-run\", some DB is saved to disk, and based on this, reports are generated right? Is the DB-Format accessible? I mean Can I launch my own analysis on it, e.g. using my own reporting tools ? What information does the DB contain exactly? Can I see the mapping between test and implementation there ?</p>\n\n<p>4) Are there other tools that find the mapping between test and implementation? Not just the numbers, but which test, actually covers a line of code ...</p>\n\n<p>Thanks, Bastl.</p>\n"},{"tags":["c++","eclipse","unit-testing","googletest","cunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12719186,"title":"Setting Up Google Test to Run through C/C++ Test Runner Plug-In in Eclipse on Ubuntu 12.04","body":"<p>Here's what I've tried:</p>\n\n<p>In project properties I have included libgtest_main.a and libgtest.a under the libaries tab.</p>\n\n<p>In run configurations under the C++ Unit tab, I have set C/C++ testing to Google Tests Runner.</p>\n\n<p>In run configs, under the main tab, the C/C++ application is set as the binary file that was created during the build of my project. </p>\n\n<p>I have created a test folder as part of my project and written my tests in there.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include \"../src/agent.h\"\n#include \"../src/agent.cpp\"\n#include \"gtest/gtest.h\"\n\nTEST(AgentTest, voidConstructorWorksProperly) {\nAgent testAgent = Agent();\nASSERT_EQ(0, testAgent.getBrain());\n}\n\n\nint main(int argc, char **argv) {\n    testing::InitGoogleTest(&amp;argc, argv);\n    return RUN_ALL_TESTS();\n\n}\n</code></pre>\n\n<p>I'm getting a syntax error on on the TEST function and a \"could not be resolved\" on the InitGoogleTest and RUN_ALL_TESTS.</p>\n\n<p>Hope someone can help - I've been at this for hours and it seems like something simple I've missed.</p>\n"},{"tags":["iphone","objective-c","ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12718057,"title":"Can't test my class in basic Unit Test setup","body":"<p>I've successfully added a normal Unit Testing Bundle to my project, <a href=\"https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html\" rel=\"nofollow\">following these instructions</a>. I can build and run my test target and the one sample test works fine.</p>\n\n<p>Things start to go downhill when I try to test a specific class.</p>\n\n<p>In my App, many of my .h files are included in the .pch file. Also, MyModel interacts with other classes. Because of this, when I import MyModel.h and use it in my test, I get a bunch of errors pertaining to the fact that other files couldn't be loaded. My workaround to this is to simply add the same files in my test target's .pch file and also add those files to the test target's \"compile sources\" list.</p>\n\n<p>So I add those classes to the test target and to the .pch, try to run, and I just end up in an endless loop, always needing to require more files. When I finally add every .m to my project, running the tests still fails spectacularly.</p>\n\n<p>Any idea how I need to set up my project correctly so that I can just simply <code>#import \"MyModel.h\"</code> into my test file and write/run my tests? Is it possible that my project is configured in a way that will make testing impossible?</p>\n\n<p><strong>Update 1</strong>\nFollowed Carl's suggestions but can't get past step 2. I get:</p>\n\n<pre><code>Undefined symbols for architecture i386:\n  \"_OBJC_CLASS_$_MyModel\", referenced from:\n      objc-class-ref in BaseUnitTests.o\nld: symbol(s) not found for architecture i386\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>It's at this point where I would then add MyModel.m to \"Build Phases/Compile Sources\" and go down the endless path of adding every other .m file to the test target's \"Compile Sources\".</p>\n"},{"tags":["unit-testing","visual-studio-2010","asp.net-mvc-2","vsts2010"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1639,"score":1,"question_id":3908368,"title":"Cannot find any coverage data (ASP.NET MVC2)","body":"<p>I am having some issues with getting Code Coverage working with an out-of-the-box ASP.NET MVC2 Web App</p>\n\n<p>VS2010 Ultimate, File > New Project > ASP.NET MVC 2 Web Application > Yes, Create unit test project with Visual Studio Unit Test.  I then Rebuild All, Run All Unit Tests, Go to Code Coverage and get the following message:</p>\n\n<blockquote>\n  <p>Cannot find any coverage data (.coverage or .coveragexml) files.  Check test run details for possible errors.</p>\n</blockquote>\n\n<p>All the unit tests passed.  (And I haven't touched a line of code yet)</p>\n\n<p>I did find the following on the web:<br>\n<a href=\"http://www.vbforums.com/showthread.php?t=615377\" rel=\"nofollow\">http://www.vbforums.com/showthread.php?t=615377</a><br>\nwhich says to do the following:</p>\n\n<blockquote>\n  <p>Test -> Edit Test Settings -> Local<br>\n  In the test settings dialog, click\n  \"Data and Diagnostics\"   Ensure \"Code\n  Coverage\" are checked, and\n  double-click on it Check of the dll's\n  you want code coverage enabled for.</p>\n</blockquote>\n\n<p>But, when I go to Test > Edit Test Seetings, all I see is the grayed out menu item stating \"No Test Settings Available\".</p>\n\n<p>Any ideas?</p>\n\n<p>Edit: slowly gaining traction. See: <a href=\"http://stackoverflow.com/questions/1155743/how-to-create-the-vsmdi-testrunconfig-file-when-importing-a-visual-studio-test-pr\">How to create the vsmdi/testrunconfig file when importing a Visual Studio test project?</a></p>\n"},{"tags":["iphone","ios","unit-testing"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":101,"score":4,"question_id":12714980,"title":"When to use unit tests?","body":"<p>I understand how to implement unit tests, I'm just struggling figure out when to use them.</p>\n\n<p>Let's say I have a basic Reminders App. A user can add/edit/delete reminders and view them in a tableview. What parts of the app would I want to set up unit tests for?</p>\n"},{"tags":["unit-testing","visual-studio-2008"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12715343,"title":"Visual Studio 2008 Unit Test failing on static function call of external dll","body":"<p>I am new to unit testing in visual studio 2008. I am using the integrated test project method for my unit tests. I have a class I am trying to run unit tests against, but when I debug the unit test and step into the function call of that class, I get an \"Object reference not set to the instance of an object\" when I hit the line of code that calls a static method from an externally referenced library. </p>\n\n<p>I have references to that same library in my unit test project. I dont understand what else I need to configure so that the static method of that library does not throw this exception. </p>\n\n<p>Thanks for any help.</p>\n"},{"tags":["unit-testing","node.js","mongoose","winston"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":12715392,"title":"How to log errors in mongoose, but unit testable?","body":"<p>I would like to log errors in my data access layer which uses mongoose. </p>\n\n<p>How do I make it easy to unit test? What is the best way to integrate <strong>mongoose</strong>(data access + middleware) with <strong>winston</strong>(logger). </p>\n\n<p>Thank you,</p>\n\n<p>Pavel</p>\n"},{"tags":["unit-testing","class","for-loop","salesforce"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12713407,"title":"How do you properly test for loop queries within test classes?","body":"<p>I have a Schedulable class which will get called once per night.  I have run the code anonymously and everything works as it should.  The problem I am having is that I cannot get proper test coverage on it!  I have written a test class that I believe should work, but for some reason any lines within my for-loops are not being covered.</p>\n\n<p>I assume that it is because no data is being returned from these queries, however there are thousands of records that should be returned.  I have run the queries on the production environment without any issues.</p>\n\n<p>Is there a separate process for running queries in a schedulable class?</p>\n\n<p><strong>Here's part of my class:</strong></p>\n\n<pre><code>global class UpdateUnitPrice  implements Schedulable{\n\n    global void execute(SchedulableContext sc){\n\n        // OwnerId -&gt; List of Strings with Row Contents\n        Map&lt;Id,Map&lt;Id,Map&lt;String,String&gt;&gt;&gt; updateContainer = new Map&lt;Id,Map&lt;Id,Map&lt;String,String&gt;&gt;&gt;{};  // Covered\n\n        List&lt;Id&gt; ownerContainer = new List&lt;Id&gt;{};  // Covered\n\n        String EmailMessage;     // Covered\n        String EmailLine;        // Covered\n        String EmailAddedLines;  // Covered\n\n        String CurrentEmailLine; // Covered\n        String NewEmailLine;     // Covered\n\n        List&lt;Id&gt; opportunityList = new List&lt;Id&gt;{};  // Covered\n\n        for(Opportunity thisOpp :[SELECT Id,Name FROM Opportunity WHERE Order_Proposed__c = null])\n        {\n            // Thousands of records should be returned\n\n            opportunityList.add(thisOpp.Id); // NOT COVERED!!\n\n        }\n\n        List&lt;OpportunityLineItem&gt; OppLineItemList = new List&lt;OpportunityLineItem&gt;{};  // Covered\n\n        for(OpportunityLineItem thisOppProd : [SELECT Id,OpportunityId,Opportunity.OwnerId,Opportunity.Name,Product_Name__c,UnitPrice,ListPrice \n                                               FROM OpportunityLineItem \n                                               WHERE OpportunityId IN :opportunityList\n                                               AND UnitPrice_lt_ListPrice__c = 'True'\n                                               ORDER BY OpportunityId ASC])\n        {\n\n            . . . // NO LINES COVERED WITHIN THIS LOOP\n\n        }\n\n\n      . . .\n\n    }\n\n}\n</code></pre>\n\n<p><strong>Here's my test class:</strong></p>\n\n<pre><code>@isTest\nprivate class UpdateUnitPriceTest {\n\n    static testMethod void myUnitTest() {\n\n        Test.startTest();\n\n        // Schedule the test job \n        String jobId = System.schedule('UpdateUnitPrice','0 0 0 3 9 ? 2022',new UpdateUnitPrice());\n\n        // Get the information from the CronTrigger API object\n        CronTrigger ct = [SELECT Id, CronExpression, TimesTriggered, NextFireTime FROM CronTrigger WHERE id = :jobId];\n\n        // Verify the expressions are the same\n        System.assertEquals(ct.CronExpression,'0 0 0 3 9 ? 2022');\n\n        // Verify the job has not run\n        System.assertEquals(0, ct.TimesTriggered);\n\n        // Verify the next time the job will run\n        System.assertEquals('2022-09-03 00:00:00', String.valueOf(ct.NextFireTime));\n\n        Test.stopTest();\n\n    }\n}\n</code></pre>\n\n<p>Am I supposed to specifically reference something within these for-loops for them to fire?  This Class should be able to just run everything on it's own without inserting records for testing.  What am I missing?</p>\n\n<p>Thanks in advance for any help given!</p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12707609,"title":"How to match null passed to parameter of Class<T> with Mockito","body":"<p>I have methods like these: </p>\n\n<pre><code>public &lt;T&gt; method(String s, Class&lt;T&gt; t) {...}\n</code></pre>\n\n<p>That I need to check that <code>null</code> is passed to the second argument when using matchers for the other parameters, I have been doing this : </p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\nverify(client).method(eq(\"String\"), any(Class.class));\n</code></pre>\n\n<p>But is there a better way (without suppress warnings) ? <code>T</code> represents the return type of some other method, which is sometimes <code>void</code> and in these cases <code>null</code> is passed in.</p>\n"},{"tags":["unit-testing","testing","tdd","sencha-touch-2"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":188,"score":3,"question_id":11411500,"title":"Testing Sencha touch 2 apps","body":"<p>I'm looking for best practices to test Sencha Touch 2 apps. ideally, i would like to automate the execution of test sets (Via CI for example).</p>\n\n<p>I've Looked for test frameworks like Jasmine, JSTestdriver. There is not a lot of feedback about using those frameworks with ST2.</p>\n\n<p>Any ideas ?</p>\n"},{"tags":["unit-testing","testing","automated-tests"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12711715,"title":"Test Optimization","body":"<p>We've just inherited a new codebase which has a bunch of automated tests. We've been 'going with the flow' and running them before each merge and deployment. Some of our staff have even been adding to the collection of tests when they write new functionality.</p>\n\n<p>I've been trying my best to convince the team that we need to drop these things like a hot potatoe but there is a lot of internal bickering about it.</p>\n\n<p>As I see it, the problem is as follows - these tests take a very long time to run (up to 10 minutes on one developer's older machine!). They keep breaking - I don't know about you but I hate it when my software breaks. If we just got rid of all this buggy code, we would reduce the number of bugs by a factor of 10 at the least. The developers who have been writing new ones are taking at least twice as long to do anything as the others. This is ridiculous, we are already working with tight deadlines and now progress is slowing down even further, for this project, at least. I was looking at one of the commits made by one of these devs and the feature was just over 100 LOC, the tests were close to 250 LOC!</p>\n\n<p>My question is how can we strip out all of this buggy, unmaintanable code which breaks every five minutes (I don't just want to do a search and replace in case actual features start breaking as a result of it) and convince our developers to stop wasting time?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12713623,"title":"How would I reference a viewModel in a unit test?","body":"<p>I have the following action:</p>\n\n<pre><code>public ViewResult Index()\n{\n    var model = new MyIndexViewModel { TotalTips = (decimal)7.51 };\n    return View(model);\n}\n</code></pre>\n\n<p>I would like to write a unit test that verifies that model.TotalTips is 7.51.</p>\n\n<p>I am trying something like this:</p>\n\n<pre><code>[TestMethod]\npublic void Test()\n{\n    // Arrange\n    var controller = new MyController(_mockRepository.Object);\n    MyIndexViewModel test = new MyIndexViewModel{TotalTips = (decimal)7.51};\n\n    // Action\n    ViewResult result = controller.Index();\n\n    // Assert\n    Assert.AreEqual(result.ViewData.Model.TotalTips, test.TotalTips); // Problem line\n}\n</code></pre>\n\n<p>But I cannot resolve <code>TotalTips</code> on <code>result.ViewData.Model.TotalTips</code>.  </p>\n\n<p>I know this is wrong, but cannot figure out how to properly resolve the model I am posting to the Index view.</p>\n"},{"tags":["ruby-on-rails","unit-testing","validation","mocking","ruby-on-rails-3.2"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":11796683,"title":"Temporarily setting system time with Ruby for unit testing","body":"<p>I've created a custom validation on a Apt model that verifies that an appointment can't be booked for the next day if the form submission is done after 3 PM and I'm trying to determine the best way to run the unit tests to verify that my custom validation is working correctly.</p>\n\n<p>Currently, my test contains an if statement to to check if the test is run before or after 3 PM and uses a different test based on the current system time. However, I'd like to be able to test both cases no matter what the system time is.</p>\n\n<pre><code>test \"booking appointment for tomorrow before/after three pm\" do\n  a = appointments(:aptone)\n\n  # Set appointment date to tomorrow\n  a.apt_date = DateTime.current + 1.day\n\n  if (Time.current.hour &gt;= 12)\n    assert(a.invalid?, 'Appointment CANNOT be booked after 3 PM')\n  elsif\n    assert(a.valid?, 'Appointment CAN be booked before 3 PM')\n  end\nend\n</code></pre>\n\n<p>I'm wondering if there is a way to temporarily set the system time while running the test so that I can test both assertions regardless of when the tests are ran.</p>\n"},{"tags":["c#","visual-studio-2010","visual-studio","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12708943,"title":"How tear down integration tests","body":"<p>I want to do some integration tests on my project. Now I am looking for a mechanism that allow me execute some code before all tests begin and execute some code after all tests ends.</p>\n\n<p>Note that I can have set up methods and tear down method for each tests but I need the same functionality for all tests as a whole.</p>\n\n<p>Note that I using Visual Studio, C# and NUnit.</p>\n"},{"tags":["objective-c","unit-testing","ocunit"],"answer_count":3,"favorite_count":4,"up_vote_count":3,"down_vote_count":0,"view_count":2236,"score":3,"question_id":6190486,"title":"SenTestingKit in Xcode 4: Asynchronous testing?","body":"<p>I have been searching for a way to use SenTestingKit to do some integration testing between my client-side code and our server. I haven't had any luck. It seems that once the code is run in a method, the object gets destroyed. This means that any asynchronous responses never call the selectors.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li>Is there a way to keep the object instantiated until such time as I see fit to destroy it - ie. after the tests have completed?</li>\n<li>If not, how could I create a class that blocks (ie. acts synchronously) until the tests are completed?</li>\n</ol>\n\n<p>FYI, I'm running a test server where I know the expected results.</p>\n\n<p>I've done a fair bit of Googling but haven't seen proof one way or another about this. I'm sure others would be interested as well.</p>\n"},{"tags":["c++","unit-testing","testing","fixtures","googletest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12709353,"title":"C++ ggltest - static helper function defined in fixture is unknown in TEST_F","body":"<p>I have implemented a test class, using a fixture. In fixture, i define several static member functions. </p>\n\n<p>in the body of one TEST_F, i would like to call these static functions. however, at compile time these functions are not bound to scope of TEST_F. i dont know why and cannot find relative ggltest doc. </p>\n\n<p>is these any possibility to define functions inside the fixture? how should i do if not? </p>\n\n<p>i paste here the whole code for my ggltest class. </p>\n\n<pre><code>#include \"solver.h\"\n\n#include &lt;math.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n\nclass UnitTest_solver : public ::testing::Test\n{\nprotected:\n\n    static void SetUpTestCase()\n    {\n        // setup table with data\n        m_col = 2; \n        m_test_data = new double*[m_row];\n        for(int i = 0 ; i &lt; m_col ; i++)\n            m_test_data[i] = new double[m_row];\n\n        ifstream data_x;\n        data_x.open(\"exponential2X.txt\");\n\n        // etc... : i setup table m_test_data in a few more lines\n}\n\n\n\nstatic void TearDownTestCase()\n{\n    for(int i = 0 ; i &lt; m_row ; i++)\n        delete[] m_test_data[i];\n    delete[] m_test_data;\n}\n\n\n\n double chi_sqr(double* x, double(*func)(double*, double*, int))\n {\n    if(ncol &lt; 2)\n        return;\n\n    double fx = 0;\n\n    double * row_i = new double[ncol - 1];\n\n    for(int i = 0 ; i &lt; nrow ; i++)\n    {\n        for(int j = 0 ; j &lt; ncol - 1 ; j++)\n            row_i[j] = data[i][j];\n\n        fx += pow(data[i][0] - (*func)(x, row_i, ncol - 1), 2.0); \n    }\n\n    return fx;\n }\n\n\n double func_1(double* x, double* dbl, int nb_param)\n {\n    if(nb_param != 2)\n         return 0;\n\n    return x[0] * exp(-1 * x[1] * dbl[0]);\n }\n\n\n double warpPt2apply_func(double * parameters, int ncol, void * userinfo, int nb_p)\n {\n      return  chi_sqr(parameters, (ncol - 1), (*func_1));\n }\n\n  static double** m_test_data;\n  static int m_col, m_row;\n\n};\n\n\nTEST_F(UnitTest_solver, testFunc1)\n{\n    Solver* solver = new Solver();\n    solver-&gt;set_pointer(warpPt2apply_func, (void*)NULL);\n}\n</code></pre>\n\n<p>i have a fixture, with three 'helper functions' : <code>chi_sqr(...)</code>, <code>func_1(...)</code>, <code>warpPt2apply_func</code></p>\n\n<p>i could define these functions outside the scope of the ficture. however, then, i cannot access ficture members (or can i?). then, i struggle with signatures handling.</p>\n\n<p>preferably, i would like to keep helper functions in the fixture. is that possible?</p>\n\n<p>thanks!</p>\n\n<p>EDIT</p>\n\n<p>more precisely: in <code>solver-&gt;set_pointer(warpPt2apply_func, (void*)NULL);</code>, <code>warpPt2apply_func</code> is undefined identifier.</p>\n\n<p>Any clue? </p>\n\n<p>i find my example close to example: <a href=\"http://code.google.com/p/googletest/source/browse/trunk/samples/sample3_unittest.cc\" rel=\"nofollow\">http://code.google.com/p/googletest/source/browse/trunk/samples/sample3_unittest.cc</a></p>\n\n<p>but it seems to me that it stick to this example...</p>\n"},{"tags":["c#","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12709441,"title":"TestContext in Unit Testing","body":"<p>I generated the unit test for my project using MS Visual Studio. I need a clear explanation for using TestContext class. Some of the links I found are:</p>\n\n<ul>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/ms404699%28v=vs.80%29.aspx\" rel=\"nofollow\">Using the TestContext Class</a></li>\n<li><a href=\"http://blogs.msdn.com/b/vstsqualitytools/archive/2006/01/10/511030.aspx\" rel=\"nofollow\">Using TestContext in Unit Tests</a></li>\n</ul>\n\n<p>But I didn't find examples that are clear for me.\nWhere can I find a clear material about this class?</p>\n"}]}
{"total":15322,"page":10,"pagesize":100,"questions":[{"tags":["c#","java","unit-testing","junit","nunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12706525,"title":"How to unit test methods that use threads?","body":"<p>How to write unit tests for methods that use threads.</p>\n\n<p>In example below how to test someMethod method ?</p>\n\n<pre><code>    public class SomeClass {\n\n    private final SomeOtherClass someOtherClassInstance = IoC.getInstance(SomeOtherClass.class);\n\n    private final ExecutorService executorService = Executors.newCachedThreadPool();\n\n    public void someMethod() {\n        executorService.execute(new Runnable() {\n            @Override\n            public void run() {\n                someOtherClassInstance.someOtherMethod();\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>Are there any solutions in java and .net for this purpose?</p>\n"},{"tags":["unit-testing","refactoring","nunit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12639624,"title":"How to unit test public methods that use same private methods?","body":"<p>I need some guidance with my software testing.</p>\n\n<p>I'm over-complicating things, but I'm too fixated to see what I'm doing wrong, or an alternate way of doing things.</p>\n\n<p>I have several public methods that are using the same private method.</p>\n\n<p>The private method itself:</p>\n\n<ul>\n<li>has to handle many scenarios for its specific role</li>\n<li>works closely with fields/properties/methods in the same instance</li>\n</ul>\n\n<p>Say that the private method needs 5 tests to cover all scenarios, and is used by 6 public methods.</p>\n\n<p><strong>Question</strong></p>\n\n<ul>\n<li><p><em>Do I then need at least <code>5x6</code> tests?</em></p></li>\n<li><p><em>How can I re-use the private method's tests for each public method?</em></p></li>\n<li><p><em>Are there any examples/articles out there on refactoring repeated tests?</em></p></li>\n</ul>\n\n<p><strong>Example</strong></p>\n\n<p><em>OnStartup()</em></p>\n\n<pre><code>- if_file_exists_load_entries           ()\n- if_file_missing_load_last             ()\n- if_no_files_create_new_entries        ()\n- if_exception_clear_entries_and_log    ()\n- loaded_entries_init_called            ()\n- Other tests\n</code></pre>\n\n<p><em>OnUserLoadCustom()</em></p>\n\n<pre><code>- if_file_exists_load_entries           _AND_STORE_AS_LAST()\n- if_file_missing_load_last             _AND_STORE_AS_LAST_AND_WARNING_MESSAGE()\n- if_no_files_create_new_entries        _AND_WARNING_MESSAGE()\n- if_exception_clear_entries_and_log    _AND_ERROR_MESSAGE()\n- loaded_entries_init_called            _AND_SUCCESS_MESSAGE()\n- Other tests\n</code></pre>\n\n<p><em>OnRecover()</em></p>\n\n<pre><code>- if_file_exists_load_entries           _AND_INFO_MESSAGE()\n- if_file_missing_load_last             _AND_INFO_MESSAGE()\n- if_no_files_create_new_entries        _AND_INFO_MESSAGE()\n- if_exception_clear_entries_and_log    _AND_ERROR_MESSAGE_AND_SHUTDOWN()\n- loaded_entries_init_called            _AND_SUCCESS_MESSAGE()\n- Other tests\n</code></pre>\n\n<p>I'm considering encapsulating the private method using the Strategy pattern, so I can test it (and the public methods) in isolation.</p>\n\n<p>However, I don't feel right using one because:</p>\n\n<ul>\n<li>I do not intend to have interchangeable behaviours at runtime</li>\n<li>Using the pattern for the sake of easier testing seems wrong</li>\n</ul>\n\n<p><strong>Update #1</strong></p>\n\n<p>My question pertains to testing the public interface for the private method's behaviour. But I end up with lots of duplicate test methods (see my examples above). </p>\n\n<p>With a strategy pattern, I reckon all I need are:</p>\n\n<ul>\n<li>Test all the paths in the strategy (essentially, testing the private\nmethod) </li>\n<li>Verify that all public methods invokes the strategy (Can easily use a mock object here, and verify that it's been called)</li>\n</ul>\n\n<p>But like I mentioned, I don't think I should introduce a pattern just for the sake of easier testing. I'm holding off on this approach unless I really have to.</p>\n\n<p><hr>\n<strong>Update #2</strong></p>\n\n<p>First attempt at reducing duplication:</p>\n\n<ul>\n<li><p>Private method tests grouped into its own class (Behaviour1Test)</p>\n\n<ul>\n<li>GetTestCases() returns list of test cases related to this behaviour</li>\n</ul></li>\n<li><p>All public methods that needs this test implements interface that exposes</p>\n\n<ul>\n<li>Arrange()</li>\n<li>Act()</li>\n<li>Assert()</li>\n</ul></li>\n</ul>\n\n<p>For example:</p>\n\n<pre><code>// Public method tests\n[TestFixture]\npublic class PublicMethodTests: IBehaviour1Test\n{\n    // Behaviour 1\n    Behaviour1Test _behaviour1;\n    IEnumerable&lt;TestCaseData&gt; Behaviour1TestCases{ get { return _behaviour1.GetTestCases(); } }\n    [Test]\n    [TestCaseSource(\"Behaviour1TestCases\")]\n    public void RunBehaviour1Test(Action&lt;IBehaviour1Test&gt; runTestCase)\n    {\n        runTestCase(this);\n    }\n\n    // ==============================\n    // Behaviour 1 Arrange/act/assert\n    void IBehaviour1Test.Arrange(){}\n    void IBehaviour1Test.Assert(object result){}\n    object IBehaviour1Test.Act()\n    {\n        return _model.PublicMethod();        \n    }\n\n    // Other tests\n}\n\n// Implement this in order to run Behaviour1 test cases\ninterface IBehaviour1Test\n{\n    void Arrange(); \n    object Act();\n    void Assert(object retValue);\n}\n\n// Collection of tests for behaviour 1\npublic class Behaviour1Test\n{\n    // Generate test cases\n    IEnumerable&lt;TestCaseData&gt;() GetTestCases()\n    {\n        yield return new TestCaseData((Action&lt;IBehaviour1Test&gt;)Test_1);\n        yield return new TestCaseData((Action&lt;IBehaviour1Test&gt;)Test_2);\n        yield return new TestCaseData((Action&lt;IBehaviour1Test&gt;)Test_3);\n    }\n\n    void Test_1(IBehaviour1Test impl)\n    {\n        // Arrange\n        impl.Arrange(); // public method's arrange\n        Test1Setup(); // Arrange for this test\n\n        // Act\n        var result = impl.Act();\n\n        // Assert\n        Test1Assert(result); // Assert for this test\n        impl.Assert(result); // Assert on public method\n\n    }\n\n    void Test_2(IBehaviour1Test impl){}\n    void Test_3(IBehaviour1Test impl){}\n}\n</code></pre>\n\n<p>This way, if I need to add a new test case for the private method's behaviour, I just need to add it once in the BehaviourTest, and all public method tests that contains it will be updated.</p>\n\n<p><img src=\"http://i.stack.imgur.com/ocBzi.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c#","unit-testing","mocking","inversion-of-control","umbraco"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12476209,"title":"Unit testing umbraco based sites","body":"<p>Is there a way to test code which relies on umbraco. i.e. within my model i'm calling getNode or using uquery to get nodes but i can't test those classes because they rely on umbraco...</p>\n\n<p>i guess one way to resolve this issue is by mocking, but how can you mock uquery or nodefactory?</p>\n"},{"tags":["asp.net-mvc","unit-testing","moq","repository-pattern"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12706809,"title":"Unit testing method in service layer","body":"<p>I have started thinking about adding some unit tests around some business logic in my project.</p>\n\n<p>The first method that I would like to test is a method in my service layer that returns a list of child nodes for a given node. </p>\n\n<p>The method looks like this:</p>\n\n<pre><code>public List&lt;Guid&gt; GetSubGroupNodes(string rootNode)\n{\n    List&lt;Tree&gt; tree = ssdsContext.Trees.ToList();\n    Tree root = ssdsContext.Trees.Where(x =&gt; x.UserId == new Guid(rootNode)).FirstOrDefault();\n    return GetChildNodeIds(root, tree);\n} \n\nprivate List&lt;Tree&gt; GetChildNodes(Tree rootNode, List&lt;Tree&gt; tree)\n{\n    kids.Add(rootNode);\n    foreach (Tree t in FindChilden(rootNode, tree))\n    {\n        GetChildNodes(t, tree);\n    }\n     return kids;\n}\n</code></pre>\n\n<p>The way I'd imaginge testing something like this is to provide a fake Tree structure and then test that a providing a node returns the correct subnodes.</p>\n\n<p><code>ssdsContext</code> is an <code>ObjectContext</code>.</p>\n\n<p>I've seen that its possible to extract and interface for the <code>ObjectContext</code> <a href=\"http://stackoverflow.com/questions/415432/how-to-mock-objectcontext-or-objectqueryt-in-entity-framework\">How to mock ObjectContext or ObjectQuery&lt;T&gt; in Entity Framework?</a> but I've also read that mocking a <code>DBContext</code> is a waste of time <a href=\"http://stackoverflow.com/questions/6766478/unit-testing-dbcontext\">Unit Testing DbContext</a>.</p>\n\n<p>I have also read that as Entity Framework is an implementation of the repository pattern and unit of work patten here: <a href=\"http://stackoverflow.com/questions/5625746/generic-repository-with-ef-4-1-what-is-the-point\">Generic Repository With EF 4.1 what is the point</a>.</p>\n\n<p>This has all left me a bit confused...is the only real way to test a method like this to create a Repository Layer? Is it even worth unit testing this method?</p>\n"},{"tags":["unit-testing","warnings","xcode4.4"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":335,"score":2,"question_id":11774400,"title":"Xcode4.4 unittest did not finish","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12308297/some-of-my-unit-tests-tests-are-not-finishing-in-xcode-4-4\">Some of my unit tests tests are not finishing in XCode 4.4</a>  </p>\n</blockquote>\n\n\n\n<p>I've just upgraded to XCode 4.4. I've created a new project and included unittesting. When running the tests I get a warning \"All tests did not finish\".</p>\n\n<p>Colleagues with clean installs of xcode 4.4 have exactly the same problem. They did not type a single letter of code and only created a new project that included unittests.</p>\n\n<p>What did we do wrong and how can we solve the problem?</p>\n\n<p><img src=\"http://i.stack.imgur.com/zt51p.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","unit-testing","mocking","spring-roo"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":118,"score":2,"question_id":12583978,"title":"Mocking a persistence layer generated with Roo","body":"<p>I have some Roo-generated entities, with dynamic finders.</p>\n\n<p>I'm trying to unit test a class that, basically, loads some data from different tables on the DB, runs some calculations and then outputs a structured object made of the results of these calculations, and i'd like to mock the persistence layer in order to be able to run the test without the DB (e.g. on Jenkins).</p>\n\n<p>However, i can't find a simple solution to do this: i tried adding <code>@MockStaticEntityMethods</code>, but the static methods for finders created by Roo return <code>TypedQuery</code> instead of the actual entities, so i'm unable to pass the mocked objects to <code>AnnotationDrivenStaticEntityMockingControl.expectReturn</code>.</p>\n\n<p>I also tried using Mockito and Powermock, but i still can't seem to get over the problem that static finder methods return <code>TypedQuery</code> and not the real entities.</p>\n\n<p>What is the standard way of mocking Roo-generated finders, then?</p>\n"},{"tags":["ruby","unit-testing","cucumber"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":12651444,"title":"Testing ruby script","body":"<p>I'm creating a Ruby (not Rails) script and I have to test using standard Rails unit tests and Cucumber. I can't use RSpec. </p>\n\n<p>So how do I test a ruby script with Cucumber and Rails Test::Unit? Is it possible?</p>\n"},{"tags":["ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":12701643,"title":"ruby koans comment","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1972266/obj-nil-vs-obj-nil\">obj.nil? vs. obj == nil</a>  </p>\n</blockquote>\n\n\n\n<p>Working through ruby koans now and found this comment embedded in one of the .rb files:</p>\n\n<pre><code>    # THINK ABOUT IT:\n#\n# Is it better to use\n#    obj.nil?\n# or\n#    obj == nil\n# Why?\n</code></pre>\n\n<p>I know from convention the answer is obj.nil? but I could not tell you why.  Anyone have any ideas?</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","unity","automocking"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12700988,"title":"Unit test MVC Controller with UnityAutoMoq resolving an interface that takes constructor parameteres","body":"<p>As the title says, I'm attempting to resolve an interface that implements a concrete class that also takes a constructor.</p>\n\n<p>Here's the concrete service class as an example:</p>\n\n<pre><code>public class MessageService : IMessageService\n{\n    private readonly IMessageGenerator _messageGenerator;\n\n    public MessageService(IMessageGenerator messageGenerator)\n    {\n        _messageGenerator = messageGenerator;\n    }\n\n    public string GetMessage()\n    {\n        return string.Concat(_messageGenerator.GetMessage(), \"\");\n    }\n}\n</code></pre>\n\n<p>As you can see this service class also requires an interface as a constructor parameter. The MVC controller constructor looks like this:</p>\n\n<pre><code>    private readonly IMessageService _messageSvc;\n\n    public HomeController(IMessageService messageSvc)\n    {\n        _messageSvc = messageSvc;\n    }\n</code></pre>\n\n<p>I have resolved the interfaces in a Bootstrapper thanks to Unity.Mvc3</p>\n\n<pre><code>var container = new UnityContainer();\n\ncontainer\n        .RegisterType&lt;IMessageService, MessageService&gt;()\n        .RegisterType&lt;IMessageGenerator, MessageGenerator&gt;();\n</code></pre>\n\n<p>So the main issue I'm having is how can I pass a mocked instance of the IMessageGenerator interface to the IMessageService inside a unit test using UnityAutoMoq? I would think that something like this would work, but it doesn't:</p>\n\n<pre><code>    [TestMethod]\n    public void Index()\n    {\n        var container = new UnityAutoMoqContainer();\n        var controllerContext = container.Resolve&lt;ControllerContext&gt;();\n        var nMsgSvc = container.Resolve&lt;IMessageService&gt;(container.Resolve&lt;IMessageGenerator&gt;);\n        var sut = new HomeController(nMsgSvc) { ControllerContext = controllerContext };\n\n        ViewResult result = sut.Index() as ViewResult;\n\n        Assert.AreEqual(\"Hello from the MessageGenerator via the MessageService\", result.ViewBag.Message);\n    }\n</code></pre>\n"},{"tags":["c","unit-testing","hudson","cunit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":139,"score":2,"question_id":10623800,"title":"CUnit failures in hudson show success","body":"<p>i put unit tests in C running over hudson, but when i have a test that failures it shows a success in the build, but must to appear fail!</p>\n\n<p>I'm using gcc to compile and run the executable in hudson like that:</p>\n\n<pre><code>gcc -lcunit test_ctesting.c -o testing\n./testing\n</code></pre>\n\n<p>it's in a shell command, how can i get the failures and show it?</p>\n"},{"tags":["python","unit-testing","testing","sqlalchemy","flask"],"answer_count":2,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":1840,"score":8,"question_id":5025720,"title":"How do you set up a Flask application with SQLAlchemy for testing?","body":"<p>It seems common practice in Flask to start like this:</p>\n\n<pre><code>from flask import Flask\nfrom flaskext.sqlalchemy import SQLAlchemy\napp = Flask(__name__)\nSQLALCHEMY_DATABASE_URI = 'something'\napp.config.from_object(__name__)\ndb = SQLAlchemy(app)\n</code></pre>\n\n<p>And then import and use <code>app</code> and <code>db</code> everywhere.  But when you create <code>db</code> like this, it grabs configuration from the app, and it seems that this configuration can't ever be overridden once it happens.  There are some pages on Flask's website about making application factories, but it's not clear how I would be able to still use <code>app</code> and <code>db</code> everywhere if I did that.</p>\n\n<p>How do I write a script to test my Flask application with a different database?  How should I structure my application to make this possible?  Do I have to use <code>module</code>s ?</p>\n"},{"tags":["cocoa","unit-testing","core-data","ocmock","mogenerator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12697058,"title":"OCMock with Core Data/Mogenerator throws exception NSInvalidArgumentException [NSProxy doesNotRecognizeSelector]","body":"<p>I am using OCMock to mock NSManagedObjects in my unit tests. I use Mogenerator to generate machine and human readable files for my core data objects. I am trying to mock an NSManagedObject to return a boolean value and a string. Both are attributes on my core data entity. When I mock the <code>BOOL</code>, the value is returned from the object correctly, my class uses it, and the test passes successfully. When I attempt to stub an <code>NSString</code> property on the same object, it throws an <code>NSInvalidArgumentException [NSProxy doesNotRecognizeSelector]</code>.</p>\n\n<p>Here is the calling code:</p>\n\n<pre><code>id biller = [OCMockObject mockForClass:[Biller class]];\n// passes\n[[[biller stub] andReturnValue:OCMOCK_VALUE((BOOL){NO})] billerValidatedValue];\n// throws exception\n[[[biller stub] andReturn:@\"Test\"] name];\n</code></pre>\n\n<p>Here is the exception:</p>\n\n<pre><code>*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSProxy doesNotRecognizeSelector:name] called!'\n</code></pre>\n\n<p>I know there are <a href=\"http://iamleeg.blogspot.com/2009/09/unit-testing-core-data-driven-apps.html\" rel=\"nofollow\">some recommendations</a> to have an interface that sits in front of the NSManagedObject for testing purposes, but this seems to be adding complexity on top of the Mogenerator machine/human files. </p>\n\n<p>Are there any other suggestions around this without completely reconfiguring this code? This code is already in production, and we are trying to add unit tests in as we develop new features.</p>\n"},{"tags":["c#","unit-testing","mocking","mspec"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":12693395,"title":"Unit test performancemonitor functionality using a network card","body":"<p>I have written a class which wraps up various calls to the PerformanceMonitor Api to do with the Network Interface.</p>\n\n<p>Currently to test various calls which calculate the video on demand bandwidth, utilization etc I have to copy a large file manually to a shared drive and then run my test.</p>\n\n<p>Clearly not ideal.</p>\n\n<p>How can I automate this or is there some sort of tool/emulator which hits the network card so that I can run my unit tests under load so that the correct values are produced?</p>\n"},{"tags":["unit-testing","vb6"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12697175,"title":"Visual Basic 6 and unit testing","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/467789/are-there-any-good-tdd-tools-or-resources-for-vb6\">Are there any good TDD tools or resources for VB6?</a>  </p>\n</blockquote>\n\n\n\n<p>I have been tasked with creating some upgrades for a older VB6 application.\nAre there any unit testing solutions that VB6 could easily implement?</p>\n\n<p>I honestly haven't looked at any VB6 since 1999!</p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":1,"favorite_count":14,"up_vote_count":32,"down_vote_count":0,"view_count":3491,"score":32,"question_id":5696884,"title":"Python nose vs. unittest","body":"<p>What are the advantages and disadvantages of Python's nose library versus unittest.</p>\n"},{"tags":["python","unit-testing","pyunit"],"answer_count":4,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":3736,"score":11,"question_id":1068246,"title":"Python unittest: how to run only part of a test file?","body":"<p>I have a test file that contains tests taking quite a lot of time (they send calculations to a cluster and wait for the result). All of these are in specific TestCase class.</p>\n\n<p>Since they take time and furthermore are not likely to break, I'd want to be able to choose whether this subset of tests does or doesn't run (the best way would be with a command-line argument, ie \"<code>./tests.py --offline</code>\" or something like that), so I could run most of the tests often and quickly and the whole set once in a while, when I have time.</p>\n\n<p>For now, I just use <code>unittest.main()</code> to start the tests.</p>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","postgresql","jpa","continuous-integration"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":11473452,"title":"How can I make unit tests for my JPA code without requiring that the presence of our postgres server?","body":"<p>Our database is a postgresql.  We use the JPA to manage our persistence tasks.  Currently, our tests require the presence of a postgres server in order to execute.  This makes our running our tests on a dev box as  hassle, because the dev has to first install a postgres server, and it makes portability to various build server environments, from CI to our release build environment, difficult.  </p>\n\n<p>It seems to me that I should be able to switch out the heavy weight db server for a lightweight in memory version.  We dont do any postgres specific things.  Our code is mostly pure JPA with a touch of hibernate specific functionality accessed.  </p>\n"},{"tags":["unit-testing","qt","googletest","qtestlib","qttest"],"answer_count":8,"favorite_count":6,"up_vote_count":13,"down_vote_count":0,"view_count":7970,"score":13,"question_id":1524390,"title":"What unit-testing framework should I use for Qt?","body":"<p>I am just starting up a new project that needs some cross-platform GUI, and we have chosen Qt as the GUI-framework.</p>\n\n<p>We need a unit-testing framework, too. Until about a year ago we used an in-house developed unit-testing framework for C++-projects, but we are now transitioning to using Google Test for new projects.</p>\n\n<p>Does anyone have any experience with using Google Test for Qt-applications? Is QtTest/QTestLib a better alternative?</p>\n\n<p>I am still not sure how much we want to use Qt in the non-GUI parts of the project - we would probably prefer to just use STL/Boost in the core-code with a small interface to the Qt-based GUI.</p>\n\n<p><em>EDIT:</em> It looks like many are leaning towards QtTest. Is there anybody who has any experience with integrating this with a continous integration server? Also, it would seem to me that having to handle a separate application for each new test case would cause a lot of friction. Is there any good way to solve that? Does Qt Creator have a good way of handling such test cases or would you need to have a project per test case?</p>\n"},{"tags":["java","eclipse","unit-testing","testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12692126,"title":"How to trace the values in a junit test?","body":"<p>I am running a simple test case where I test if there is no id in the db and i get an expected exception back.</p>\n\n<p>But it does not work. So my question is how to trace the values of a test in junit? Any good solutions?</p>\n\n<p>I appreaciate your answer!!!</p>\n\n<p>UPDATE:\ntest case:</p>\n\n<pre><code>@Test(expected = SQLException.class)\npublic void testDeleteID(){\n    ArrayList&lt;Produkt&gt; queryResult=new ArrayList&lt;Produkt&gt;();\n    shandler.deleteProdukt(666);\n    queryResult=shandler.findAll();\n\n}\n</code></pre>\n\n<p>IDE: eclipse</p>\n"},{"tags":["unit-testing","rhino-mocks","mvccontrib","mvccontrib-testhelper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":143,"score":1,"question_id":11075186,"title":"MVCContrib TestHelper and User.Identity.Name, Server.MapPath and Form Collection","body":"<p>I am new to MVCContrib Testhelper and mocking with Rhino.</p>\n\n<p>I am needing assistance with unit testing a controller which relies on User.Identity.Name, Server.MapPath and Form Collection.</p>\n\n<p>I started off with </p>\n\n<pre><code>var controller = new SubmitController();\nvar builder = new TestControllerBuilder();\nbuilder.InitializeController(controller);\n</code></pre>\n\n<p>I found <a href=\"http://www.mfranc.com/tag/mvc-contrib/\" rel=\"nofollow\">this post</a> for setting User.Identity.Name </p>\n\n<pre><code>controller.ControllerContext = TestHelper.MockControllerContext(controller).WithAuthenticatedUser(\"domain\\\\username\");\n</code></pre>\n\n<p>At this point, in my controller i am now able to get to the User.Identity.  The problem then became how to i set Form Collection variables.  Setting</p>\n\n<pre><code>builder.Form.Add(\"testvar\",\"1\");\n</code></pre>\n\n<p>no longer worked.  It seemed that now I had to access via </p>\n\n<pre><code>controller.HttpContext.Request.Form.Add(\"testvar\",\"1)\n</code></pre>\n\n<p>This seemed to work, but at this point, i was no longer using builder(TestControllerBuilder) above.</p>\n\n<p>I then had to mock Server which raised up more issues.  How can I continue to use builder but use mocks or stubs for httpContext, HttpRequest, Server etc.  I was sort of expecting that builder would have methods for setting expected values for HttpRequest, Server etc.</p>\n\n<p>Thanks</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":1695,"score":7,"question_id":7672389,"title":"Testing DOM manipulating in Jasmine test","body":"<p>I'm creating a js widget and first part is to add scipt width javascript, some thing like this (example from google analytics):</p>\n\n<pre><code>(function() {\n    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</code></pre>\n\n<p>I don't know how to test it with jasmine (using fixtures?) does any one can help?</p>\n"},{"tags":["c++","unit-testing","googletest","googlemock"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12689052,"title":"Creating a unit test mock for a C like interface","body":"<p>I receive a C interface from a C API containing a set of function pointers:</p>\n\n<pre><code>struct Interface\n{\n   int (*get)(const char *name)\n   void (*set)(const char *name)\n   ...\n};\n</code></pre>\n\n<p>I have a C++ Wrapper class which wraps this interface (takes a copy via its constructor) and I'm trying to unit test this wrapper.</p>\n\n<p>I need to assign functionA with a mock. A naive approach is as follows:</p>\n\n<pre><code>int mockGet(const char *name)\n{\n  names.push_back(name);\n  return mockGetReturnValue;\n}\n</code></pre>\n\n<p>but the global <code>names</code> and <code>mockFunctionAReturnValue</code> objects will need to be reset between each test and this is really nasty.</p>\n\n<p>How should I do this? I'd like to do this using Google Mock if possible.</p>\n"},{"tags":["java","svn","unit-testing","code-coverage","sonar"],"answer_count":3,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":457,"score":9,"question_id":5173455,"title":"Ensure minimal coverage on new Subversion commits","body":"<p>We have a massive project with almost no unit tests at all. I would like to ensure from now on that the developers commit new features (or bugs!) without minimal coverage for corresponding unit tests.</p>\n\n<p>What are some ways to enforce this?</p>\n\n<p>We use many tools, so perhaps I can use a plugin (jira, greenhopper, fisheye, sonar, hudson). I was also thinking perhaps a Subversion pre-commit hook, the Commit Acceptance Plugin for jira, or something equivalent.</p>\n\n<p>Thoughts?</p>\n"},{"tags":["javascript","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12687102,"title":"In JS how can inner functions be unit tested?","body":"<p>Consider function <code>f</code> defined as follows:</p>\n\n<pre><code>(function() {\n\n    var f = function(x) {\n        return x;\n    }\n\n    return f(1);\n})();\n</code></pre>\n\n<p>How can I unit test <code>f</code>, or what is the recommended way to refactor this code so <code>f</code> can be unit tested?</p>\n"},{"tags":["java","unit-testing","static-analysis","emma"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":105,"score":4,"question_id":12673912,"title":"Java test coverage: who covers what?","body":"<p>Is there a tool similar to emma, that reports <em>which</em> test covers a specific implementation ?</p>\n"},{"tags":["c++","visual-studio-2010","unit-testing","marmalade"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":92,"score":2,"question_id":12670014,"title":"Unit testing in Visual Studio that support Marmalade SDK","body":"<p>We are working with <a href=\"http://www.madewithmarmalade.com/\" rel=\"nofollow\">Marmalade SDK</a> in Visual Studio and sharing files via git with a team. And we would love to use unit tests.</p>\n\n<p>There are many possibilities</p>\n\n<ul>\n<li><p>We tried to implement unit tests with built-in function of Visual Studio, so we just created a new test project in same solution. Everything looked fine until we try to included Marmalade SDK files. There was a problem with compiler. Marmalade SDK generates his own project properties, there are compilers like \"ARM (x86) Debug\" and many more, and in Test project are just defaults like Debug, Release. So the code can't be compiled correctly. Can I just copy those properties to Test project? Will it work?  It will be much better if we will find answer on this option.</p></li>\n<li><p>But also, we can use some unit test c++ framework. Link it in same main project as Marmalade SDK create. But which framework will be the best? There are plenty of them and I couldn't find out what will be the best. Also, we will need to do special main.cpp for running unit tests, right? If you can provide best test framework for easy to implement in Visual Studio with some tutorial I will really appreciate it.</p></li>\n</ul>\n\n<p>Thank you for any answer!</p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":12686360,"title":"VS2010 Unit test “Pending” and the test cannot be completed","body":"<p>I'm using VS2010 (with windows 7).</p>\n\n<p>Every time I try to run a unit test it stays on \"Pending\" and the test cannot be completed.</p>\n\n<p>I tried to follow this <a href=\"http://msdn.microsoft.com/en-us/library/ms182532%28v=vs.100%29.aspx\" rel=\"nofollow\">msdn instructions</a>.</p>\n\n<p>I tried debugging test method (test view/debug selection), set breakpoints, but VS2010 indicates: the breakpoint will not currently be hit... I'm in debug configuration.</p>\n\n<p>Any advice?</p>\n"},{"tags":["php","unit-testing","zend-framework","session","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12667254,"title":"Unit testing with Zend_Session_Namespace","body":"<p>I'm writing unit tests for a login system - but having difficulties with interacting with the Zend_Session_Namespace object. I'm using the Zend_Test extensions to the PHPUnit framework (ZF 1.10, PHPUnit 3.4.5)</p>\n\n<p>Test</p>\n\n<pre><code>public function testAuthFailure()\n{\n  $request = $this-&gt;getRequest();\n  $request-&gt;setMethod(\"POST\");\n  $request-&gt;setPost(\"username\", \"testUser\");\n  $request-&gt;setPost(\"password\", \"testPassword\");\n\n  $this-&gt;dispatch(\"/auth/login\");\n\n  $this-&gt;assertModule(\"auth\");\n  $this-&gt;assertController(\"login\");\n  $this-&gt;assertAction(\"validate\");\n\n  $loginSession = new Zend_Session_Namespace(\"login\");\n  $this-&gt;assertFalse(is_null($loginSession));\n  $this-&gt;assertObjectHasAttribute(\"messages\", $loginSession);\n  $this-&gt;assertFalse(empty($loginSession-&gt;messages));\n  $this-&gt;arrayHasKey(\"error\", $loginSession-&gt;messages[\"error\"]);\n  $this-&gt;assertEquals($loginSession-&gt;messages[\"error\"], \"Could not log you in with that username and/or password\");\n}\n</code></pre>\n\n<p>Current controller/action code</p>\n\n<pre><code>public function validateAction()\n{\n  $loginSession = new Zend_Session_Namespace(\"login\");\n\n  if (!$this-&gt;buildForm()-&gt;isValid($this-&gt;getRequest()-&gt;getPost())) {\n    $loginSession-&gt;messages[\"error\"][] = \"Please enter your username and password\";\n  }\n\n  $loginSession-&gt;messages[\"error\"][] = \"Could not contact the authentication server\";\n\n  $this-&gt;getResponse()\n    -&gt;setHttpResponseCode(303)\n    -&gt;setHeader(\"Location\", \"/auth/login\");\n}\n</code></pre>\n\n<p>My unit test is failing at <code>$this-&gt;assertObjectHasAttribute(\"messages\", $loginSession);</code> - whereas I would expect it to fail on the actual content of the message.</p>\n\n<p>I have these lines in my phpunit bootstrap:</p>\n\n<pre><code>Zend_Session::$_unitTestEnabled = true;\nZend_Session::start();\n</code></pre>\n\n<p>How do I confirm that the session message is correctly set?</p>\n"},{"tags":["c#","unit-testing","integration-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12684452,"title":"Should I make copies of my unit tests that use mocks and change them to a real database for integration testing?","body":"<p>I am currently unit testing my code with a mocking library. I am now at the point where I want to test that everything plays nicely with the database and works as expected.</p>\n\n<p>Does it make sense to copy a lot of my unit tests and adjust them to use a test database?</p>\n"},{"tags":["c++","unit-testing","googletest"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12610239,"title":"Grouping googletest unit tests by categories","body":"<p>Can googletest unit tests be grouped by categories?  For example \"SlowRunning\", \"BugRegression\", etc.  The closest thing I have found is the --gtest_filter option.  By appending/prepending category names to the test or fixture names I can simulate the existence of groups.  This does not allow me to create groups that are not normally run.</p>\n\n<p>If categories do not exist in googletest, is there a good or best practice workaround?</p>\n\n<p>Edit: Another way is to use the --gtest_also_run_disabled_tests.  Adding DISABLED_ in front of tests gives you exactly one conditional category, but I feel like I'm misusing DISABLED when I do it.</p>\n"},{"tags":["python","unit-testing","nosetests","python-nose"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":1734,"score":7,"question_id":4219717,"title":"How to assert output with nosetest/unittest in python?","body":"<p>I'm writing tests for a function like next one:</p>\n\n<pre><code>def foo():\n    print 'hello world!'\n</code></pre>\n\n<p>so when i want to test this function the code will be like this:</p>\n\n<pre><code>import sys\nfrom foomodule import foo\ndef test_foo():\n    foo()\n    output = sys.stdout.getline().strip() # because stdout is an StringIO instance\n    assert output == 'hello world!'\n</code></pre>\n\n<p>but if i run nosetests with -s parameter the test crashes. How can i catch the output with unittest or nose module?</p>\n"},{"tags":["unit-testing","ios6","xcodebuild","xcode4.5"],"answer_count":3,"favorite_count":13,"up_vote_count":14,"down_vote_count":0,"view_count":1489,"score":14,"question_id":12557935,"title":"Xcode 4.5 command line unit testing","body":"<p>Having an issue since updating to Xcode 4.5 when running my unit tests via command line.\nThe following is the output i'm seeing when i try to run my tests</p>\n\n<pre><code>Unknown Device Type. Using UIUserInterfaceIdiomPad based on screen size\nTerminating since there is no workspace.\n/Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include:334: note: Passed tests for architecture 'i386' (GC OFF)\n\n/Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include:345: note: Completed tests for architectures 'i386'\n</code></pre>\n\n<p>Even though it does say the tests have passed and completed, I don't think they have actually have been run. </p>\n\n<p>I'm using the following command to run the tests\nxcodebuild -workspace MyApp.xcworkspace -scheme MyAppTests -sdk iphonesimulator -configuration Debug clean build TEST_AFTER_BUILD=YES</p>\n\n<p>Has anyone run into the same problem and can offer a solution?</p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12682255,"title":"python unittests, do I need to import from the tests/__init__.py?","body":"<p>I have my code organized like this:</p>\n\n<p>base_project_dir/src\n                /tests\n                      /test1.py\n                      /test2.py</p>\n\n<p>in test1.py and test2.py I have the classes extending unittest.TestCase</p>\n\n<p>according to python API doc, I should be able to run</p>\n\n<p>python -m unittest tests   from base dir and run all tests.\nbut doing so shows that it finds 0 tests.  so I added \nfrom test1 import *\nfrom test2 import *</p>\n\n<p>into tests/<strong>init</strong>.py</p>\n\n<p>now the above command works. but when I want to run individual tests, it sources the module <strong>init</strong>, which forcefully run all tests.</p>\n\n<p>what is the correct way to organize this?</p>\n\n<p>thanks\nYang</p>\n"},{"tags":["java","unit-testing","google-app-engine","channel-api"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":12678384,"title":"How to unit test code relying on Channel API (Google App Engine, Java)","body":"<p>I have Java servlets that rely on the Channel API, from Google App Engine. I am trying to write unit tests for that code, but I am quite stumped with how to write a stub client to receive a response message from the servlet, instead of me always having to rely on using an actual web page as my test client. My servlet is quite simple:</p>\n\n<pre><code>ChannelService channelService = ChannelServiceFactory.getChannelService();\nchannelService.sendMessage(new ChannelMessage(someKey, \"ECHO: \" + someMsg));\n</code></pre>\n\n<p>Usually, I read this in my test client, which is a web page. But, I want to write unit tests that I can test using a framework like jUnit or TestNG. After reading Google's <a href=\"https://developers.google.com/appengine/docs/java/tools/localunittesting\" rel=\"nofollow\">page about unit testing their Java services</a>, I tried stuff such as using a <a href=\"https://developers.google.com/appengine/docs/java/tools/localunittesting/javadoc/com/google/appengine/tools/development/testing/LocalServiceTestHelper\" rel=\"nofollow\">LocalServiceTestHelper</a> object in my test class and configure it with a <a href=\"https://developers.google.com/appengine/docs/java/tools/localunittesting/javadoc/com/google/appengine/tools/development/testing/LocalChannelServiceTestConfig\" rel=\"nofollow\">LocalChannelServiceTestConfig</a> object. The result of this is that my test class can create an instance of <code>LocalChannelService</code>, a class which seems to implement the same methods as <code>ChannelService</code>.</p>\n\n<p><strong>However:</strong></p>\n\n<ul>\n<li>Neither classes have any robust relationship to each other (don't implement a similar interface, are not in the same class hierarchy...). Makes it impossible for me to inject a LocalChannelService object into my servlet as a mock object.</li>\n<li>No documentation whatsoever on LocalChannelService API (Thanks a lot, Google).</li>\n<li>Also no documentation on their Local Unit Testing page for how to test the Channel API (again, thanks a lot Google)</li>\n</ul>\n\n<p>So then I came across this <a href=\"http://stackoverflow.com/questions/11172174/how-can-i-unit-test-the-appengine-channel-service\">post</a> about how to test <code>ChannelService</code> in Java code. Unfortunately, the only relevant answer given was for <em>Python</em>. Well, lo and behold, Google indeed does provide Python GAE server developers with tools for writing stub clients for Google services, as outline in their <a href=\"https://developers.google.com/appengine/docs/python/tools/localunittesting?hl=en\" rel=\"nofollow\">Python Local Unit Testing guide</a>. Unbelievable how they neglected to do the same for Java!</p>\n\n<hr/>\n\n<p>Now that I've gotten all that off my chest (apologies if I sounded a bit too flustered), I would really like to know, what is the best way for testing Java code relying on Google App Engine's Channel API? I really wish to rely on testing tools instead of web pages. do I have to somehow call Google's <a href=\"https://developers.google.com/appengine/docs/java/channel/javascript\" rel=\"nofollow\">Javascript Client for Channel API</a> from Java? There must be a better way in which I can use a mock object or stub.</p>\n\n<hr/>\n\n<h3>Update 1</h3>\n\n<p>Used a better name, \"Google App Engine\" instead of just \"App Engine\"</p>\n"},{"tags":["unit-testing","f#","signature"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":123,"score":4,"question_id":12675808,"title":"Learning F#: Is it possible to create a test case to verify a signature?","body":"<p>With unit-testing several hundred lines of F# code I realized that it would be advantageous to not only check the output but also the signatures. The reason being if the code is validated for a release and then changes are made after the release that modify the signature, one would want to know why the signature changed so that either the test case can be updated for the new signature or to flag the change as causing a problem. </p>\n\n<p>Is it possible to create a test case to verify a signature? If so, how?</p>\n"},{"tags":["android","unit-testing","junit","android-testing"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12676539,"title":"How can I to write unit-test for my android method?","body":"<p>I wrote some code. Now I need to write unit-test for it. I do not know how to write it for this method:</p>\n\n<pre><code>    public void parceAuthResult()\n{\n    NodeList nodeList = baseDocElement.getElementsByTagName(\"LoginResult\");\n    if(nodeList != null &amp;&amp; nodeList.getLength() &gt; 0)\n    {\n        for(int i = 0 ; i &lt; nodeList.getLength();i++)\n        {\n            Element el = (Element)nodeList.item(i);\n            NodeList rootResults = el.getElementsByTagName(\"a:RootResults\");\n            if (rootResults.getLength() != 0)\n                authResult = true;\n            else\n                authResult = false;\n        }\n    }\n}\n</code></pre>\n\n<p>baseDocElement and authResult is defined as</p>\n\n<pre><code>private Element     baseDocElement;\nprivate Boolean     authResult;\n</code></pre>\n\n<p>some other methods I tested using <strong>junit</strong> and <strong>reflection</strong></p>\n\n<p>help please, I have no idea how to test that.</p>\n"},{"tags":["java","eclipse","unit-testing","testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12675975,"title":"JUnit - IllegalArgumentException.class failes?","body":"<p>I have created an extremely simple junit test, which creates a null product in the product table in the db.</p>\n\n<pre><code>@Test(expected = IllegalArgumentException.class)\npublic void testCreate_NULL() {\n    Product p = null;\n    createProduct(p);\n}\n</code></pre>\n\n<p>but when I do the junit test it turns blue.</p>\n\n<p>btw. other tests like creating a product, deleting ect. are all green...</p>\n\n<p>I appreciate your answer!!!</p>\n\n<p>PS.: I am using hsql db!</p>\n\n<p>PPS.: The error is:</p>\n\n<blockquote>\n  <p>java.lang.AssertionError: Expected exception:\n  java.lang.IllegalArgumentException    at\n  org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:35)\n    at\n  org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n    at\n  org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)  at\n  org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)   at\n  org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)     at\n  org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)   at\n  org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)  at\n  org.junit.runners.ParentRunner.run(ParentRunner.java:300)     at\n  org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at\n  org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)</p>\n</blockquote>\n\n<p>UPDATE:</p>\n\n<p>my createProduct Method justs inserts a product into the db and before it checks:</p>\n\n<pre><code>    if(p==null) {\n        throw new IllegalArgumentException(\"null objects impossible\");\n    }\n</code></pre>\n"},{"tags":["xcode","unit-testing","jenkins","xcodebuild"],"answer_count":0,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":429,"score":4,"question_id":12604628,"title":"Running iOS Unit Tests from Command Line with Xcode 4.5","body":"<p>While running Unit Tests from command line (necessary for Jenkins) used to work until Xcode 4.4.1 with <a href=\"http://www.raingrove.com/2012/03/28/running-ocunit-and-specta-tests-from-command-line.html\" rel=\"nofollow\">this hack</a>, it does not seem to work anymore with Xcode 4.5.</p>\n\n<p>Now I get the following error message:</p>\n\n<pre><code>....MyTests.build/Script-641C6E0115D3BECD004175F...: line 3: 16669 Segmentation fault: 11  \"${SYSTEM_DEVELOPER_DIR}/Tools/RunUnitTests\"\n</code></pre>\n\n<p>Any ideas how to make it work again?</p>\n"},{"tags":["python","unit-testing","discover"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12674167,"title":"Python unittest discovery with subfolders","body":"<p>My unittest folder is organized this way.</p>\n\n<pre><code>.\n|-- import\n|   |-- import.kc\n|   |-- import.kh\n|   `-- import_test.py\n|-- module\n|   |-- module.kc\n|   |-- module.kh\n|   `-- module_test.py\n`-- test.py\n</code></pre>\n\n<p>I'd want to simply run <code>test.py</code> to run each of my <code>*_test.py</code> using unittest python module.\nCurrently, my test.py contains</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport unittest\n\nif __name__ == \"__main__\":\n    suite = unittest.TestLoader().discover('.', pattern = \"*_test.py\")\n    unittest.TextTestRunner(verbosity=2).run(suite)\n</code></pre>\n\n<p>The python documentation says that it should automatically discover my test in the subfolders. But it does not.</p>\n\n<p>At the moment, it only outputs</p>\n\n<pre><code>----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\n</code></pre>\n\n<p>I'm sure it is not a problem with my <code>*_test.py</code> file, because when I move them into the root directory, it works fine..\nWhat am I doing wrong ?</p>\n"},{"tags":["ruby-on-rails","unit-testing","fixtures","rubymine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12666811,"title":"Errro while running test cases in RubyMine 4.3.5 Rails 3.2","body":"<p>I am unable to run any single test case in RubyMine 4.3.5 Rails 3.2 .\nI have done <code>db:migrate</code> to test environment.\nTried doing <code>test:clone:structure</code> and selected development and I get this error:</p>\n\n<blockquote>\n  <p>'sqlite3' is not recognized as an internal or external command</p>\n</blockquote>\n\n<p>Also a <code>structure.sql</code> file gets created instead in the db folder.\nAlso, when I generate the <code>test.sqlite3</code> file and do <code>test:clone:structure</code>, I get the <code>permission denied</code> error on <code>test.sqlite3</code>.\nAnd when I run any test case, I get the following error:</p>\n\n<blockquote>\n  <p>Error:Fixture:Format</p>\n</blockquote>\n"},{"tags":["java","unit-testing","tree","tdd"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":451,"score":1,"question_id":1415013,"title":"Unit test proper data structure creation","body":"<p>How would one test whether data structure built properly? I'm implementing kind of modified radix tree, and been wondering how do you check if your data structure builds up correctly.</p>\n\n<p>Consider a tree of <code>TreeNode {String, Int}</code> nodes.\nYou always want to append new child to deepest node of value equal to 0, as in following example:</p>\n\n<pre>\nRoot, 0\n- Child_1, 5\n- Child_2, 0\n   - Child_3, 1\n</pre>\n\n<p>Question is, how to unit test if <strong>tree structure</strong> builds up as you wished? TreeNode only has one method, which would be <code>insert</code>.</p>\n\n<p>My idea so far was to write <code>TreeVisitor</code> that would walk through tree and convert each node to string. \nTree from example above, could look like this:</p>\n\n<pre>\n[Root, 0 [Child_1, 5][Child_2, 0 [Child_3, 1]]]\n</pre>\n\n<p>Knowing algorithm that builds tree, I can create such string manually if I have idea what elements I'm inserting. My unit test would look like this (using same example).</p>\n\n<pre><code>TreeNode root = new TreeNode(\"Root\", 0);\nroot.insert(new TreeNode(\"Child_1\", 5));\nroot.insert(new TreeNode(\"Child_2\", 0));\nroot.insert(new TreeNode(\"Child_3\", 1));\nTreeVisitor visitor = new TreeVisitor();\nString expected = \"[Root, 0 [Child_1, 5][Child_2, 0 [Child_3, 1]]]\";\nasssertEquals(expected, visitor.visit(root));</code></pre>\n\n<p>I got the feeling it's not best approach. To start of, as soon as visitor changes, all tests will fail (simply put change <code>[ ]</code> to <code>( )</code>). Also, this approach allows me to test pretty small trees (as big as I can compute manually). How would you test bigger ones?</p>\n\n<p>General question is, <strong>how to write tests checking whether data structure builds up correctly</strong>? </p>\n\n<p>I assume I might be getting whole testing idea wrong, as I'm fresh from dozen tutorials where people test whether .Sum(a, b) works as expected :-) </p>\n"},{"tags":["c","unit-testing","stdin"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":179,"score":0,"question_id":5740176,"title":"How do I write a testing function for another function that uses stdin input?","body":"<p>I have the following functions as part of a college assignment:</p>\n\n<pre><code>int readMenuOption()\n{\n   /* local declarations */\n   char option[2];\n   /* read in 1 char from stdin plus 1 char for string termination character */\n   readStdin(1 + 1, option);\n   return (int)option[0] &lt;= ASCII_OFFSET ? 0 : (int)option[0] - ASCII_OFFSET;\n}\n\nint readStdin(int limit, char *buffer) \n{\n   char c;\n   int i = 0;\n   int read = FALSE;\n   while ((c = fgetc(stdin)) != '\\n') {\n      /* if the input string buffer has already reached it maximum\n       limit, then abandon any other excess characters. */\n      if (i &lt;= limit) {\n         *(buffer + i) = c;\n         i++;\n         read = TRUE;\n      }\n   }\n   /* clear the remaining elements of the input buffer with a null character. */\n   for (i = i; i &lt; strlen(buffer); i++) {\n      *(buffer + i) = '\\0';\n   }\n   return read;\n}\n</code></pre>\n\n<p>It works perfectly for what I need it to do (take in input from keyboard).  I've had to do it using stdin (like I have) because of a number of requirements outlined by my professor.</p>\n\n<p>I want to write a series of \"unit tests\" for the assignment, but I dont know how to get my testing functions to call <code>readMenuOption()</code> and pass in input to it (without having to do it at run-time).</p>\n\n<p>Is this possible, and if so, how can I do it? (i.e., is it possible to write to stdin)?</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":48,"score":4,"question_id":12666479,"title":"How to bundle PHPUnit with my code?","body":"<p>I would like to:</p>\n\n<ul>\n<li>Run tests with PHPUnit regardless of my environment (and if PHPUnit or PEAR is installed or not)</li>\n<li>Show test results on screen if possible</li>\n</ul>\n\n<p>How can I do this? I tried downloading the code <a href=\"http://pear.phpunit.de/\" rel=\"nofollow\">here</a> and including <code>Autoload.php</code> but it still have some dependencies. Maybe there's some better approach for this than trying to bundle it with my code...?</p>\n"},{"tags":["asp.net","unit-testing","events","event-handling","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12669408,"title":"event expected not to raise is raising","body":"<p>I have an <strong>event</strong> and a <strong>raising method</strong> as below :</p>\n\n<pre><code>public class Events {\n\n    public event EventHandler&lt;CustomEventArgs&gt; Succeed;\n\n    public virtual void OnSucceed(object sender, params object[] data)\n    {\n        CustomEventArgs args = new CustomEventArgs(data);\n\n        EventHandler&lt;CustomEventArgs&gt; _succeed = Succeed;\n\n        if (_succeed != null)\n        {\n            _succeed(sender, args);\n        }\n\n    }}\n</code></pre>\n\n<p>I have created a <strong>unit test</strong> for the <strong>OnSucceed</strong> method (using <a href=\"http://fluentassertions.codeplex.com/\" rel=\"nofollow\">FluentAssertions</a> ):</p>\n\n<pre><code>    [Test]\n    public void SucceedShouldNotBeRaisedTest()\n    {\n        Events events = new Events();\n\n        events.MonitorEvents();\n\n        events.OnSucceed(this,\"somedata\");\n\n        events.ShouldNotRaise(\"Succeed\");\n    }\n</code></pre>\n\n<p>as there is no subscriber to the event then I expect it not to raise Succeed event  </p>\n\n<p>but the test fails as Succeed event <strong>is raised</strong> . what's wrong with this ?!</p>\n"},{"tags":["c#","unit-testing"],"answer_count":6,"favorite_count":12,"up_vote_count":40,"down_vote_count":0,"view_count":53545,"score":40,"question_id":2101,"title":"What are some good unit testing examples?","body":"<p>I've now found out <a href=\"http://stackoverflow.com/questions/1383/#1393\">what unit testing is</a>. Is there an example of unit testing in C#?</p>\n"},{"tags":["unit-testing","android-intent","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12651865,"title":"robolectric, no intent matches for `receiveResult`","body":"<p>See my code:</p>\n\n<pre><code>doSomeActionWillStartNewIntentToSelectImage();\n\n// check started intent\nIntent intent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.INTERNAL_CONTENT_URI);\nAssert.assertThat(activity, new StartedMatcher(intent));\n\n// simulate the returning result\nshadowOf(activity).receiveResult(\n        new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.INTERNAL_CONTENT_URI),\n        Activity.RESULT_OK,\n        new Intent().setData(activity.drawableId2Uri(R.drawable.icon_ok)));\n</code></pre>\n\n<p>But it reports an error:</p>\n\n<pre><code>java.lang.RuntimeException: No intent matches \n    Intent{action=android.intent.action.PICK, data=content://media/internal/images/media} among \n   [Intent{action=android.intent.action.PICK, data=content://media/internal/images/media}]\nat com.xtremelabs.robolectric.shadows.ShadowActivity.receiveResult(ShadowActivity.java:381)\n</code></pre>\n\n<p>It's strange that <code>Intent{action=android.intent.action.PICK, data=content://media/internal/images/media}</code> is exactly the same as the later one.</p>\n\n<p>Where is wrong and how to fix it?</p>\n"},{"tags":["c++","windows","unit-testing","boost-test","divide-by-zero"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":251,"score":2,"question_id":8482490,"title":"How to handle Integer Division By Zero exception using Boost.Test library?","body":"<p>I'm writing unit tests using Boost.Test against some old C math library. One of tested functions in known to raise Integer Division By Zero system exception for some specified input. Let's say it's desired behavior and I want to write negative test for this case.</p>\n\n<p><code>BOOST_REQUIRE_THROW(statement, exception);</code> is not working for me as it is not C++ style exception (this macro is using <code>try {} catch {}</code> internally). </p>\n\n<p>What is the correct way to handle case when I'm expecting failure on system level?</p>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":73,"score":-1,"question_id":12662690,"title":"How to create Unit-test Project in Visual Studio 2012 RC","body":"<p>I have a Project, and now I want to create new unittest project for it. But I don't know the way to do this. I have been add new Test Project to solution, how to point this test project to my target. Please help :)</p>\n"},{"tags":["c#","asp.net","unit-testing","events"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":74,"score":4,"question_id":12665159,"title":"How should events be unit tested in ASP.Net?","body":"<p>I have defined two events with custom event arguments and associated raising methods.  Now I wonder what and how the event should be tested.  How should I analyze the code to find candidates for unit testing?</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12664966,"title":"uninitialized constant Test::Unit::UI::XML (NameError) in Rails (or Ruby)","body":"<p>I'm trying to create an xml runner to make a result report of Rails unit testing. Here is a code I have:</p>\n\n<pre><code>require 'test/unit'\nrequire 'test/unit/ui/console/testrunner'\n\nclass FastFailRunner &lt; Test::Unit::UI::Console::TestRunner\n  def add_fault(fault)\n    @faults &lt;&lt; fault\n    nl\n    output(\"%3d) %s\" % [@faults.length, fault.long_display])\n    output(\"--\")\n    @already_outputted = true\n  end\n\n  def finished(elapsed_time)\n    nl\n    output(\"Finished in #{elapsed_time} seconds.\")\n    nl\n    output(@result)\n  end\nend\n\nTest::Unit::AutoRunner::RUNNERS[:fastfail] = proc do |r|\n  FastFailRunner\nend\n</code></pre>\n\n<p>When I run it as <code>TESTOPTS=\"/home/alex/RubymineProjects/app2/test/unit/runner.rb --runner=xml\" rake test</code> </p>\n\n<p>... I get an error (pretty weird error)</p>\n\n<pre><code>/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing': uninitialized constant Test::Unit::UI::XML (NameError)\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/runner/xml.rb:5:in `block in &lt;module:Unit&gt;'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `[]'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `run'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:58:in `run'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit.rb:501:in `block in &lt;top (required)&gt;'\ngem install minitest\n/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/runner/xml.rb:5:in `block in &lt;module:Unit&gt;': uninitialized constant Test::Unit::UI::XML (NameError)\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `[]'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `run'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:58:in `run'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit.rb:501:in `block in &lt;top (required)&gt;'\nErrors running test:units! #&lt;RuntimeError: Command failed with status (1): [/home/alex/.rvm/rubies/ruby-1.9.3-p194/bin...]&gt;\nErrors running test:functionals! #&lt;RuntimeError: Command failed with status (1): [/home/alex/.rvm/rubies/ruby-1.9.3-p194/bin...]&gt;\n</code></pre>\n\n<p>I tried to require <code>test/unit/ui/xml/testrunner.rb</code> but no luck.\nAny thoughts?</p>\n"},{"tags":["java","unit-testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12665049,"title":"Patching Java classes with a mock implementation in a unit test","body":"<p>I have a class A which instantiates an object from class B internally.  That second class has lots of external side-effects, e.g. it uses a network connection.</p>\n\n<pre><code>public class A {\n  private B b;\n  public A() {\n    b = new B(); // 3rd party class that calls out externally (e.g. to a db)\n  }\n}\n</code></pre>\n\n<p>I would like to unit test class A by providing a mock implementation of class B.  I can easily create a mocked version of B by writing my own class or using something like Mockito and other frameworks, but how do I inject this mock implementation into class A's code?</p>\n\n<p>I guess I could ask for an instance of class B in class A's constructor, but that seems ugly.  No one really needs to know how class A does it's  business.</p>\n\n<p>Python has a \"mock\" library that allows you to \"patch\" functions at run time during a test.  Does Java have something similar?</p>\n"},{"tags":["android","unit-testing","android-service"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12309185,"title":"Accessing raw resource from ServiceTestCase","body":"<p>I am trying to write a <code>ServiceTestCase</code> that requires access to my target project's raw resources and use them before passing an intent to start a service. </p>\n\n<p>I read about using <code>ActivityTestCase</code> from a solution given on stackoverflow, which has a procedure as given below:</p>\n\n<pre><code>Context testContext = getInstrumentation().getTargetContext();\nResources testRes = testContext.getResources();\nInputStream ts = testRes.openRawResource(com.my.example.R.raw.proplist);\n</code></pre>\n\n<p>I get a <code>ResourceNotFoundException</code> with those steps. </p>\n\n<p>Is there a way to make it work in an <code>ActivityTestCase</code> and also replicate it for a <code>ServiceTestCase</code>?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","unit-testing","junit","mocking"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12661989,"title":"Mockito how do I mock this method?","body":"<p>I am new to mocking and so I'm playing around with this scenario. I have a method <code>MyClass.process()</code> which calls <code>MyClass.getFactory()</code>. I want to mock <code>getFactory()</code> to fail so that I can assure <code>process()</code> recovers correctly.</p>\n\n<p>It seems that if I call <code>getFactory()</code> after the mock it throws the exception correctly, but if it is called through the original <code>process()</code> method the exception is not thrown.</p>\n\n<pre><code>public class MyClass {\n\n    public MyFactory getFactory() throws FactoryException {\n        return ...\n    }\n\n    public String process() {\n        try {\n            MyFactory factory = getFactory();\n            ...\n        }\n        catch(FactoryException ex) {\n            ...\n        }\n    }\n\n}\n</code></pre>\n\n<p>Test class:</p>\n\n<pre><code>public class MyClassTest {\n\n    @Test\n    public void testGetFactoryFails() {\n        try {\n            MyClass mockMyClass = mock(MyClass.class);\n            when(mockMyClass.getFactory()).thenThrow(new FactoryException());\n            mockMyClass.process();\n            fail(\"FactoryException should have been thrown.\");\n        }\n        catch(FactoryException ex) {\n            // all good\n        }\n    }\n\n}\n</code></pre>\n\n<p>Thanks for all the feedback. I can see how mocking single methods under more complex environments would quickly become unmanageable. The contents of getFactory() is not important as this is concept code, not production code.</p>\n\n<p>One way I tried that works well:</p>\n\n<pre><code>public class MyClassTest {\n\n    class MyClassMock1 extends MyClass {\n\n        @Override\n        public MyFactory getFactory() throws FactoryException {\n            throw new FactoryException(\"Bad factory instance.\");\n        }\n\n    }\n\n    @Test\n    public void testGetFactoryFails() {\n        try {\n            MyClassMock1 mockMyClass = new MyClassMock1();\n            mockMyClass.process();\n            fail(\"FactoryException should have been thrown.\");\n        }\n        catch(FactoryException ex) {\n            assertEquals(\"Bad factory instance.\", ex.getMessage());\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["unit-testing","jenkins","mocha"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12624030,"title":"Unit tests sometimes failing, sometimes passing","body":"<p>I have a mocha unit test suite.</p>\n\n<p>When I run them locally, everything works fine. When I run them on our Jenkins CI server, they sometimes fail, sometimes pass.</p>\n\n<p>I'm just not able to reproduce why they fail. What might cause this behavior?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","reflection","custom-attributes"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":1,"view_count":86,"score":2,"question_id":12658949,"title":"How to check if method has an attribute (with interfaces, casting and abstract)","body":"<p>After reading the post \"<a href=\"http://stackoverflow.com/questions/8817031/how-to-check-if-method-has-an-attribute\">How to check if method has an attribute</a>\" I'm one step to solve a problem that keeps me awake. </p>\n\n<h1>I present the situation :</h1>\n\n<p>( I'm working with ASP.Net MVC 4 )</p>\n\n<p><strong>These interfaces</strong>:</p>\n\n<pre><code>public interface IFlyable\n{\n    ActionResult Fly();\n}    \n\npublic interface IRunnable\n{\n    ActionResult Run();\n}\n</code></pre>\n\n<p><strong>This abstract class</strong> :</p>\n\n<pre><code>public abstract class SuperHero : Controller\n{\n    public void SavePeople()\n    {\n    }    \n}\n</code></pre>\n\n<p><strong>This controller :</strong></p>\n\n<pre><code>public class SuperManController : SuperHero,IFlyable,IRunnable {\n\n    [Authorize]\n    public ActionResult Fly(){\n        // Flying...\n    }    \n\n    [Authorize]\n    public ActionResult Run(){\n        // Running...\n    }    \n\n}\n</code></pre>\n\n<p><strong>This abstract class ( for tests )</strong></p>\n\n<pre><code>[TestClass]\npublic abstract class SuperHeroTest&lt;TSuperHero&gt;{\n\n    protected abstract TSuperHero GetSuperHero();\n\n    [TestMethod]\n    public void IfSuperHeroCanFlyMustHaveAuthorizeAttribute(){\n\n        var superHero=GetSuperHero();\n\n        if(superHero is IFlyable)\n        {\n            var superHeroFlyable = (IFlyable) superHero;\n\n            var have = MethodHasAuthorizeAttribute(() =&gt; superHeroFlyable.Fly());\n\n            Assert.IsTrue(have);\n        }\n\n    }\n}\n</code></pre>\n\n<p><strong>And finally this class inherited from <code>SuperHeroTest</code> to test <code>SuperManController</code>:</strong></p>\n\n<pre><code>[TestClass]\npublic class SuperManControllerTest : SuperHeroTest&lt;SuperManController&gt;{\n\n    private SuperManController _superManController;\n\n    public SuperManControllerTest(){\n        _superManController=new SuperManController();\n    } \n\n\n    protected override SuperManController GetSuperHero()\n    {\n        return _superManController;\n    }\n\n}\n</code></pre>\n\n<p><strong>Method <code>MethodHasAuthorizeAttribute</code> is :</strong> (from the post above)</p>\n\n<pre><code>public static MethodInfo MethodOf(Expression&lt;System.Action&gt; expression)\n{\n    MethodCallExpression body = (MethodCallExpression)expression.Body;\n    return body.Method;\n}\n\npublic static bool MethodHasAuthorizeAttribute( Expression&lt;System.Action&gt; expression )\n{\n    var method = MethodOf( expression );\n\n    const bool includeInherited = false;\n    return method.GetCustomAttributes(typeof(AuthorizeAttribute),includeInherited).Any();\n}\n</code></pre>\n\n<h1>My problem is:</h1>\n\n<p>The call <code>MethodHasAuthorizeAttribute(() => superHeroFlyable.Fly())</code> in <code>SuperHeroTest</code> class return <code>false</code> when it should return <code>true</code>.</p>\n\n<p>(The implemented method <code>Fly</code> in class <code>SuperManController</code> has the attribute <code>Authorize</code> ).</p>\n\n<p>I added the attribute <code>Authorize</code> in method <code>Fly</code> into <code>IFlyable</code> and then returns <code>true</code>.</p>\n\n<pre><code>public interface IFlyable\n{\n    [Authorize]\n    ActionResult Fly();\n}  \n</code></pre>\n\n<p>How I can do to make <code>MethodHasAuthorizeAttribute</code> inspect the implementation rather than the interface?</p>\n"},{"tags":["python","unit-testing","google-app-engine","datastore","testbed"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12653980,"title":"gae python changing datastore in testing proces","body":"<p>I solve the problem:</p>\n\n<p>I'm trying to test my app using <code>testbed</code> and <code>webtest</code>. And I want to see how handler method changing my datastore. Then after I start testing, I initialise <code>MyModel</code> instance object testmodel using <code>Testbed</code> and send it to <code>MyHandler</code> <code>MyMethod</code>.</p>\n\n<p>It's going there, <code>MyMethod</code> finds it by gql request and changes it. However, when it returns to test after response - <code>testmodel</code> stand without this changes.</p>\n\n<p>I suppose that this is due to <code>Testbed</code> and <code>init_datastore_v3_stub()</code> and its settings, but cant find any documents for exactly this case.  Can someone help me fix this problem?</p>\n\n<p>My code:</p>\n\n<pre><code>class MyModel(db.Model):\n    name = db.StringProperty()\n    code = db.IntegerProperty()\n\nclass MyHandler(webapp2.RequestHandler):\n\n    def MyMethod(self, name):\n        if self.request.method == 'POST':\n            model = MyModel.gql(\"WHERE name=:1\", name).get()\n            model.code = SOME_CODE\n            model.put()\n</code></pre>\n\n<p>And my tests code:</p>\n\n<pre><code>from google.appengine.ext import testbed\nimport unittest\nimport webtest\nimport MyModel\nfrom main import api_routes '''my WSGIapplication routes '''\n\nclass MyTestClass(unittest.TestCase):\n\n    def setUp(self):\n        app = webapp2.WSGIApplication(routes=api_routes)\n        self.testapp = webtest.TestApp(app)\n        self.testbed = testbed.Testbed()\n        self.testbed.activate()\n        self.testbed.init_datastore_v3_stub()\n        self.testmodel = MyModel(name='testname')\n        self.testmodel.put()\n\n    def tearDown(self):\n        self.testbed.deactivate()\n\n    def testOne(self):\n        url = SOME_URL # which call MyHandler MyMethod\n        params = {'name':'testname'}\n        response = self.testapp.post(url,params)\n        SOMEASSERTS\n</code></pre>\n\n<p>For solving I added get() reques after any response:</p>\n\n<pre><code>def testOne(self):\n        url = SOME_URL # which call MyHandler MyMethod\n        params = {'name':'testname'}\n        response = self.testapp.post(url,params)\n        model = MyModel.gql(\"WHERE name=:1\",'testname').get()\n        self.assertTrue(model.code == SOME_CODE)          \n</code></pre>\n"},{"tags":["database","unit-testing","node.js","mongodb","mocking"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":163,"score":2,"question_id":12526160,"title":"Mocking database in node.js?","body":"<p>How would I mock out the database in my node.js application, which in this case uses <code>mongodb</code> as the backend for a blog REST API ?</p>\n\n<p>Sure, I could set the database to a specific <code>testing</code> -database, but I would still save data and not test my code only, but also the database, so I am actually not doing unit testing but integration testing.<br>\n So what should one do? Create database wrappers as a middle layer between application and db and replace the DAL when in testing?</p>\n\n<pre><code>// app.js  \nvar express = require('express');\n    app = express(),\n    mongo = require('mongoskin'),\n    db = mongo.db('localhost:27017/test?auto_reconnect');\n\napp.get('/posts/:slug', function(req, res){\n    db.collection('posts').findOne({slug: req.params.slug}, function (err, post) {\n        res.send(JSON.stringify(post), 200);\n    });\n});\n\napp.listen(3000);\n</code></pre>\n\n<hr>\n\n<pre><code>// test.js\nr = require('requestah')(3000);\ndescribe(\"Does some testing\", funtion() {\n\n  it(\"Fetches a blogpost by slug\", function(done) {\n    r.get(\"/posts/aslug\", function(res) {\n      expect(res.statusCode).to.equal(200);\n      expect(JSON.parse(res.body)[\"title\"]).to.not.equal(null);\n      return done();\n    });\n\n  });\n));\n</code></pre>\n"},{"tags":["c++","unit-testing","unix","cmake","googletest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":124,"score":1,"question_id":12657596,"title":"Gtest: Undefined References","body":"<p>I am trying to use GoogleTest to test a simple function, but as I run <code>make</code> in my build folder, the compiler throws <code>Undefined Reference</code> error messages at me. I've referenced the gtest header file, so I'm not sure what is wrong. Any ideas? I'm new to the entire subject of both unix and unit testing , so I could very well be missing something simple. Thanks in advance!</p>\n\n<p>Error Messages:</p>\n\n<pre><code>CMakeFiles/Proj2.dir/main.cpp.o: In function `main':\nmain.cpp:(.text+0x1e): undefined reference to `testing::InitGoogleTest(int*, char**)'\nmain.cpp:(.text+0x23): undefined reference to `testing::UnitTest::GetInstance()'\nmain.cpp:(.text+0x2b): undefined reference to `testing::UnitTest::Run()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n\nint main(int argc, char **argv) {\n    ::testing::InitGoogleTest(&amp;argc, argv);\n    return RUN_ALL_TESTS();\n}\n</code></pre>\n\n<p>Test.cpp</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n#include \"Testable.h\"\n\nTEST(GetTwoTest, Two) {\n    EXPECT_EQ(2, GetTwo());\n}\n</code></pre>\n\n<p>Testable.cpp</p>\n\n<pre><code>#include \"Testable.h\"\n\nint GetTwo() {\n    return 3;\n}\n</code></pre>\n\n<p>Here is my CMakeLists.txt file:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\n\nSET(CMAKE_CXX_FLAGS \"-std=gnu++11\") #Turn on C++11 Support\n\nset(FILES_TO_TEST Testable.cpp)\nset(UNIT_TESTS Test.cpp)\nset(MAIN_FILE main.cpp)\n\nadd_subdirectory(gtest) #Build all the gtest stuff\ninclude_directories(gtest/include)\ninclude_directories(.)\nadd_library(codeToTest ${FILES_TO_TEST})\n\nadd_executable(Proj2 ${MAIN_FILE})\ntarget_link_libraries(Proj2 codeToTest)\n\nadd_executable(unit-test ${UNIT_TESTS})\ntarget_link_libraries(unit-test gtest gtest_main rt pthread codeToTest)\n</code></pre>\n"},{"tags":["unit-testing","maven","logging","solr","solrj"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12570154,"title":"How to disable solr logging with SolrJ?","body":"<p>I am using SolrJ for the purposes of an embedded solr server for my unit tests.</p>\n\n<p>The problem is that my maven output is littered with solr logs that I don't really want. For example, I am purposefully triggering a bad query as part of my test. My test passes, but it's very hard to see that because the screen is filled with Solr errors.</p>\n\n<p>I'm not clear how to get around this with SolrJ. I'd like to do this as part of my POM file so that if a test fails, a dev can edit the POM to expose more information.</p>\n\n<p>EDIT:</p>\n\n<p>Solr is instantiated this way:</p>\n\n<pre><code>System.setProperty(\"solr.solr.home\", \"solr/\")\ndef coreInitter = new CoreContainer.Initializer()\ndef core = coreInitter.initialize()\nthis.server = new EmbeddedSolrServer(core, \"\")\n</code></pre>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","rspec"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12656707,"title":"Get extra info within after(:each) in RSpec","body":"<p>I'm using RSpec and I want to get result (passed or not), class name, test name (or description) <strong>and error message</strong> (if present) of each test after once it finished.</p>\n\n<p>So here is a pretty simple code </p>\n\n<pre><code>  describe MyClass do\n\n    after :each do\n      #how do I know a test passed, its name, class name and error message?\n    end\n\n    it \"should be true\" do \n        5.should be 5\n    end\n\n    it \"should be false\" do \n        5.should be 6\n    end\n\n   end\n</code></pre>\n\n<p>Your suggestions?</p>\n"},{"tags":["android","unit-testing","robotium"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":11684346,"title":"How to Type Chars From Android KeyBoard(Virtual) in Robotium","body":"<p>please give any suggestion except than solo.clickOnText(). It doesn't work.</p>\n\n<p>and also I don't want to use enterText() either, as that is not a good alternative.</p>\n"},{"tags":["unit-testing","tdd","anti-patterns"],"answer_count":30,"favorite_count":130,"up_vote_count":133,"down_vote_count":3,"view_count":8371,"score":130,"question_id":333682,"title":"TDD Anti-patterns catalogue","body":"<p><strong><a href=\"http://en.wikipedia.org/wiki/Anti-pattern\" rel=\"nofollow\">anti-pattern</a></strong> : there must be at least two key elements present to formally distinguish an actual anti-pattern from a simple bad habit, bad practice, or bad idea:</p>\n\n<ul>\n<li>Some repeated pattern of action, process or structure that initially appears to be beneficial, but ultimately produces more bad consequences than beneficial results, and</li>\n<li>A refactored solution that is clearly documented, proven in actual practice and repeatable.</li>\n</ul>\n\n<p>Vote for the TDD anti-pattern that you have seen \"in the wild\" one time too many.<br />\n<a href=\"http://blog.james-carr.org/2006/11/03/tdd-anti-patterns/\" rel=\"nofollow\">The blog post by James Carr</a> and   <a href=\"http://tech.groups.yahoo.com/group/testdrivendevelopment/message/20745\" rel=\"nofollow\">Related discussion on testdrivendevelopment yahoogroup</a></p>\n\n<p>If you've found an 'unnamed' one.. post 'em too. <strong>One post per anti-pattern please</strong> to make the votes count for something.</p>\n\n<p><em>My vested interest is to find the top-n subset so that I can discuss 'em in a lunchbox meet in the near future.</em></p>\n"},{"tags":["javascript","unit-testing","qunit"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":586,"score":2,"question_id":9431597,"title":"Unit testing AJAX requests with QUnit","body":"<p>We are trying to implement QUnit JavaScript tests for a JS-heavy web app. We are struggling to find a way to successfully test methods that involve jQuery AJAX requests. For example, we have the following constructor function (obviously this is a very simplistic example):</p>\n\n<pre><code>var X = function() {\n    this.fire = function() {\n        $.ajax(\"someURL.php\", {\n            data: {\n                userId: \"james\"\n            },\n            dataType: \"json\",\n            success: function(data) {\n                //Do stuff\n            }\n        });\n    };\n};\nvar myX = new X();\nmyX.fire();\n</code></pre>\n\n<p>We are trying to find a way to test the <code>fire</code> method, preferably with a stubbed URL instead of the real <code>someURL.php</code>. </p>\n\n<p>The only obvious solution to me at the moment is add the URL, and the <code>success</code> callback, as arguments to the constructor function. That way, in the test, we can create a new instance of <code>X</code> and pass in the stub URL, and a callback to run when the stub returns a response. For example:</p>\n\n<pre><code>test(\"Test AJAX function\", function() {\n    stop();\n    var myX = new X();\n    //Call the AJAX function, passing in the stub URL and success callback\n    myX.fire(\"stub.php\", function(data) {\n        console.log(data);\n        start();\n    });\n});\n</code></pre>\n\n<p>However, this doesn't seem like a very nice solution. Is there a better way?</p>\n"},{"tags":["c++","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":205,"score":1,"question_id":3665089,"title":"How to write unit tests for widget code?","body":"<p>Now I'm experiencing a problem about in testing,\nWe have developed a platform with C++, and this platform include 2 layers, one is engine layer, the other one is widget layer, and I'm a dev in widget layer, \nThe widget layer used by client app (those app is our product), now the problem is this:</p>\n\n<p>1, We want to add some unit test for widget layer to enhance our whole platform quality and reliability, but in fact, this platform has been release for several versions, so now, what's kind of unit test could be most suitable for our project? To add some unit test in kinds of validation/bad input/path cover/stress or to add some unit test that simulate the client scenario? I think the former one will enhance code coverage very well, but i also think about that if we can simulate how our client using those api in their application, those unit test maybe more make sense for our platform, right?</p>\n\n<p>2, just as i mentioned before, i'm in widget layer which is above and depended on engine layer, but we has no authority for engine layer code, and almost all widget API could call in engine layer, so it's difficult for us to implement good path cover unit test for those api, because we have no idea(and no document)about engine layer code, but i still want to ask, is there any ways, tools or frameworks could make someone write high quality unit test to cover path for those black box API?</p>\n"},{"tags":["c#","visual-studio","unit-testing","network-drive","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12655187,"title":"Test Explorer Not Showing List of Unit Tests with Network Drive","body":"<p>I had a simple C# program that had a set of Unit Tests.  This was developed on Visual Studio 2010.  Now on another computer I tried to reload this solution with Visual Studio 2012 and run the tests.  I was able to rebuild the solution successfully however none of the unit tests show up in Test Explorer.  The Visual Studio project (solution) was located on a LaCie Ethernet network drive.  I copied the entire solution to my local C: drive, closed the solution from the network drive and reopened the copied one on local C: drive.  Now when I build solution Test Explorer shows all tests.  I went back and opened the copy on the network drive and again Test Explorer shows no tests. It says to build the solution to see a list of tests, but after successfully building the solution which includes the main project and the unit test project it still displays the same message. See image below:\n<img src=\"http://i.stack.imgur.com/DErA0.png\" alt=\"enter image description here\"></p>\n\n<p>Why is it having project located on network drive causes Unit Testing to fail like this with no failure message at all?</p>\n"},{"tags":["unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":7337603,"title":"Organizing JUnit tests","body":"<p>In the past I would make a test suite per package, that would hold all of the tests in that package.\nthen I would roll up all of the package test suites into a master test suite, which would hold all of the package test suites.\nAnyone know of a better idea?</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","testunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12652714,"title":"Handle any error in Ruby Test::Unit","body":"<p>A question is similar to <a href=\"http://stackoverflow.com/questions/12542073/handle-any-error-in-nunit/12542135\">Handle any error in NUnit</a></p>\n\n<p>Now I'm using Ruby <code>Test::Unit</code> framework and want to handle a result of <strong>each</strong> test at <code>teardown</code>. By handle I mean getting a test's name, a status (success/fail) and a message if a test failed. Of course, I want to do that <strong>without</strong> modifying the body of a test method.</p>\n\n<p>How can I reach it?</p>\n\n<p><strong>UPDATE</strong>: Here is what could do. The only difficult I have is that I'm not aware how to get error message (like <code>&lt;15&gt; expected but was &lt;151&gt;</code>)</p>\n\n<pre><code>  def teardown\n     super\n     puts \"self.passed? - #{self.passed?}\" \n     puts \"self.class.name - #{self.class.name}\"\n     puts \"self.method.name - #{self.__name__}\"\n     #puts \"self.message - #{self.message.methods}\" #is not what I need!\n\n  end\n</code></pre>\n"},{"tags":["ruby-on-rails-3","unit-testing","testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":12651476,"title":"strategy to add tests to a no-tests rails 3.0 app prior to migrating to 3.2?","body":"<p>For a new client I'm going to be (a) converting a Rails 3.0/ruby 1.9.2 app to Rails 3.2 and (b) moving their app from mysql to postgres and (c) moving the hosting to Heroku, then (d) adding a fair number of features. The current code base is moderate size (12K lines of code, 500 methods).</p>\n\n<p>The app has no tests... it's been a very small team manually testing as they code. </p>\n\n<p>It seems the majority of posts on SO and elsewhere say that trying to add test coverage to existing, working code is pointless, and that failing tests should be added when fixing bugs and adding features.</p>\n\n<p>But it seems to me that prior to migrating the platform would be the right time to introduce SOME degree of test coverage. There's a lot of stuff that could get broken en route from 3.0 to 3.2, so at a minimum I'd like to devote time up front to (at a minimum) putting some 'smoke tests' in place before the transition.</p>\n\n<p>I'm not going to be able to introduce a lot of test coverage at this stage... but I have a budget of 120 hours to pre-migration test development... so what will give me the most bang for the buck (given a working app that is about to significant changes to its running environment &amp; platform)?</p>\n\n<p>Should I stick to building some integration test scenarios of factory users creating accounts and using the system (create account, add some data, browse the 20-something different screens)? </p>\n\n<p>Or should I take the opposite approach and focus on unit tests for the more complex models and methods?</p>\n"},{"tags":[".net","unit-testing","moles"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":298,"score":4,"question_id":5514318,"title":"How to run unit tests written with Microsoft Moles without installing it?","body":"<p>Our team is working on writing unit tests for a big .Net project, using “Visual Studio 2010” IDE and “NUnit” (v. 2.5.9) unit-testing framework. Also we use “Microsoft Moles” type-isolating framework. After we finished writing tests for specific module we have to build all the modules and run unit tests on different machine where the Moles is not installed.</p>\n\n<p>Is it possible to run unit tests written with moles without actually installing moles framework but only by copying and/or registering (in GAC or in System Registry) specific components? And if so, what are these components?</p>\n\n<hr>\n\n<p>For example, we have found out that it needs to register “Microsoft.ExtendedReflection.ClrMonitor.x86” in the Windows registry in order to run unit tests.</p>\n"},{"tags":["java","bash","unit-testing","input","io-redirection"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12648101,"title":"Bash input redirection with newlines","body":"<p>So for an assignment at school I am required to make a program in java that manages some students at a college, the user may invoke a number of function, but I started by testing 'add'.</p>\n\n<p>My prof recommends that I use input redirection, because I can easily test the program over and over, without much typing.  Now here is the issue.</p>\n\n<pre><code>echo `&lt; input.txt`\nadd Student Name 123 Street,City,Province,Postal Code q\n#Input rediraction ate my newlines\ncat input.txt\nadd\nStudent Name\nStreet,City,Province,Postal Code\nq\n#What I actually want to run\njava -cp . TestCollege &lt; input.txt #fail horribly\n</code></pre>\n\n<p>As you can see bash removes the newline characters I use to delimit my input, and thus my program crashes, because when you run it in interactive mode, Scanner.getLine() just blocks until input occurs.</p>\n\n<p>Any idea how I can give my program the input with the newlines, it seems to work fine in windows \"cmd\" but not in \"bash\".</p>\n"},{"tags":["php","html","unit-testing","templates"],"answer_count":5,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":493,"score":7,"question_id":3429218,"title":"Unit tests for HTML Output?","body":"<p>This may be a dumb question, but do you make unit tests for the HTML output of your PHP functions/scripts?</p>\n\n<p>I try to keep my HTML and my PHP separate - i.e. HTML includes with placeholders, and functions for certain recurring elements (tabular data / any sort of looped output) - but I'm not sure how to go about verifying this.</p>\n\n<p>Is there a standard way to go about such things, or is it mainly a matter of using regular unit tests on functions which <em>create</em> the inserted content, and then making sure it looks correct in the browser/W3C Validator?</p>\n\n<p>Thanks.</p>\n\n<p>Edit: I guess a corollary to this would be: are these sorts of unit tests even worth having? If you're keeping your content and structure properly separated, then you would really only be testing a handful of includes in very limited scenarios (presumably, anyway). Is it really worth it to semi-hand-craft full pages just to have a file to compare to?</p>\n"},{"tags":["unit-testing","language-agnostic","tdd","mocking"],"answer_count":9,"favorite_count":7,"up_vote_count":27,"down_vote_count":0,"view_count":6396,"score":27,"question_id":6484,"title":"How do you mock a Sealed class?","body":"<p><a href=\"http://www.google.com/search?q=how%20to%20mock%20sealed%20class\" rel=\"nofollow\">Mocking sealed classes</a> can be quite a pain.  I currently favor an <a href=\"http://en.wikipedia.org/wiki/Adapter_pattern\" rel=\"nofollow\">Adapter pattern</a> to handle this, but something about just keeps feels weird.  </p>\r\n\r\n<p><strong>So, What is the best way you mock sealed classes?</strong></p>\r\n\r\n<p><em>Java answers are more than welcome</em>.  In fact, I would anticipate that the Java community has been dealing with this longer and has a great deal to offer.</p>\r\n\r\n<p>But here are some of the .NET opinions:</p>\r\n\r\n<ul>\r\n<li><a href=\"http://haacked.com/archive/2007/08/19/why-duck-typing-matters-to-c-developers.aspx\" rel=\"nofollow\">Why Duck Typing Matters for C#\r\nDeveloepers</a> </li>\r\n<li><a href=\"http://cs.rthand.com/blogs/blog_with_righthand/archive/2008/07/22/Creating-wrappers-for-sealed-and-other-types-for-mocking.aspx\" rel=\"nofollow\">Creating wrappers\r\nfor sealed and other types for\r\nmocking</a></li>\r\n<li><a href=\"http://weblogs.asp.net/cibrax/archive/2008/05/16/unit-tests-for-wcf.aspx\" rel=\"nofollow\">Unit tests for WCF (and Moq)</a></li>\r\n</ul>"},{"tags":["c#","unit-testing","tdd"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":84,"score":6,"question_id":12281927,"title":"How can I keep my unit tests independent of each other in this simple case?","body":"<p>I'm writing a small game in C# using Test Driven Development approach. I'm facing a problem:</p>\n\n<p>I have a class <code>CheckersBoard</code>:</p>\n\n<pre><code>public class CheckersBoard\n{\n    private const string InitialBoardPattern = \"B-B-B-B-\" +\n                                               \"-B-B-B-B\" +\n                                               \"B-B-B-B-\" +\n                                               \"--------\" +\n                                               \"--------\" +\n                                               \"-W-W-W-W\" +\n                                               \"W-W-W-W-\" +\n                                               \"-W-W-W-W\";\n\n    public SquareStatus[,] Squares { get; private set; }\n\n    public CheckersBoard(IBoardGenerator boardGenerator)\n    {\n        Squares = boardGenerator.GenerateFromPattern(InitialBoardPattern, 8, 8);\n    }\n\n    //....\n}\n</code></pre>\n\n<p>And a class <code>BoardGenerator</code>:</p>\n\n<pre><code>public class BoardGenerator : IBoardGenerator\n{\n\n    public SquareStatus[,] GenerateFromPattern(string pattern, int width, int height)\n    {\n        //....\n    }\n\n}\n</code></pre>\n\n<p><code>BoardGenerator</code> allows me to initialize <code>CheckersBoard</code> in a very readable way. So, I really would like to use <code>BoardGenerator</code> in my unit tests to avoid ugly array initialization. </p>\n\n<p>But it's against the rule that says that I must keep all my unit tests independent of each other. If the test of <code>GenerateFromPattern</code> fails, that will produce a \"cascade\" effect and all the tests which use <code>GenerateFromPattern</code> will fail too.</p>\n\n<p>This is the first time I have ever used unit tests so I'm a little bit confused. How can I avoid this problem? Is there something wrong with my design? </p>\n"},{"tags":["ruby-on-rails","unit-testing","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12643913,"title":"Rails \"validates inclusion\" strange behavior in unit test","body":"<p>I have a model, Address, with a type attribute and the following validations:</p>\n\n<pre><code>class Address &lt; ActiveRecord::Base\n\n  TYPES = {\n    main: 1,\n    warehouse: 2,\n    invoicing: 3 \n  }\n\n  attr_accessible :type\n\n  # validations\n  validates :type, presence: true\n  validates :type, :inclusion =&gt; { :in =&gt; Address::TYPES.values,:message =&gt; \"%{value} is not a valid address type\" }\nend\n</code></pre>\n\n<p>The fact is that when I run this validation in rails console, I woks as expected:</p>\n\n<pre><code>1.9.3p194 :001 &gt; a = Address.first\n1.9.3p194 :007 &gt; a.address_type = 4\n=&gt; 4 \n1.9.3p194 :008 &gt; a.valid?\n=&gt; false \n</code></pre>\n\n<p>I have created a unit test to test this, as follows:</p>\n\n<pre><code>test \"address type should have a valid value\" do\n  address = Address.first\n  address.address_type = 4\n  assert address.invalid?, \"address is valid with an invalid type value\"\nend\n</code></pre>\n\n<p>But the test is executing just OK with no failures.\nIs there something I'm missing or doing wrong in the test so it's not working as when I try it on the rails console?</p>\n\n<p>Tank you very much in advance.</p>\n"},{"tags":["python","django","unit-testing","nose","django-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":12487337,"title":"optimizing setup and teardown for sample django model using django_nose and django-dynamic-fixture","body":"<p>Given my model is following:</p>\n\n<pre><code>class Author(models.Model):\n    name = models.CharField(max_length=100)\n    description = models.TextField()\n\nclass Book(models.Model):\n    title = models.CharField(max_length=100)\n    author = models.ManyToManyField(Author) \n</code></pre>\n\n<p>I am using <a href=\"https://github.com/paulocheque/django-dynamic-fixture\" rel=\"nofollow\">django-dynamic-fixture</a> to generate model fixtures easily for the test. I am also using <a href=\"https://github.com/jbalogh/django-nose\" rel=\"nofollow\">django_nose</a> which helps me run and manage tests pretty nicely.\nHaving setup the test_runner in settings.py file and putting all installables at place. </p>\n\n<p>To generate a model as above the test should be </p>\n\n<pre><code>from django_dynamic_fixture import G\n\n\nclass BookModelTest(TestCase):\n\n     def test_book_creation(self):\n         author1 = G(Author)\n         author2 = G(Author)\n         book = G(Book, author=[author1])\n         book_obj = Book.objects.all()\n         self.assertEquals(book_obj.count(), 1)\n         self.assertEquals(list(book_obj[0].author), [author1])\n         self.assertEquals(book_obj[0].title, book.title)\n         self.assertNotEquals(list(book_obj[0].author), [author1])\n\n    def another_test(self):\n       \"Here as well i need the same, author1, author2 and book\n</code></pre>\n\n<p>Also if i write      </p>\n\n<pre><code>class AuthorModelTest(TestCase):\n\n   def test_some_stuff()             \n</code></pre>\n\n<p>I would be needing some fixture value. \nSo following are the queries i had:</p>\n\n<p>How do i keep my fixture generation DRY. Meaning not creating book and author fixtures from <code>G</code> in each of the functions?</p>\n\n<p>django_nose helps to optimize the setUp and tearDown methods and improves speed, how can I use them here? Just putting *django_nose.FastFixtureTestCase* will take care of setUp tearDown pains? Or do I need to use <em>TransactionTestCase</em>? How do I optimize the above fixture and test? </p>\n"},{"tags":["java","unit-testing","ampq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":353,"score":0,"question_id":2710270,"title":"Simple Java AMPQ server","body":"<p>Are there any simple AMPQ server/broker implementation written in Java?</p>\n\n<p>I need to use it for local integration tests.  I would like to start it from ant/maven, and I don't need any features like clustering, persistence, performance and so on. Just a mock RabbitMQ-like instance, without installation (just as a dependency at maven pom) and configuration.</p>\n"},{"tags":["unit-testing","grails","groovy","httpbuilder"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12534335,"title":"Groovy HTTPBuilder Mocking the Client","body":"<p>This question is closely related to <a href=\"http://stackoverflow.com/questions/9101084/groovy-httpbuilder-mocking-the-response\">this question</a>. The difference is that I'd like to follow the recommended approach of mocking the client. So, I have the following HTTPBuilder defined:</p>\n\n<pre><code>protected readUrl() {\n    def http = new HTTPBuilder(\"http://example.com\")\n    def status = http.request(Method.GET, ContentType.JSON) {req -&gt;\n        response.success = {resp, json -&gt;\n            result = json.toString()\n            new Success&lt;String&gt;(result)\n        }\n        response.'401' = {resp -&gt;\n            final String errMsg = \"Not Authorized\"\n            new Failed(Failable.Fail.ACCESS_DENIED, errMsg)\n        }\n        response.failure = {resp -&gt;\n            final String errMsg = \"General failure ${resp.statusLine}\"\n            new Failed(Failable.Fail.UNKNOWN, errMsg)\n        }\n    }\n}\n</code></pre>\n\n<p>What I'd like to do is find a way to unit test this code block. I wanted to mock the response so I could specifically set the response codes, if possible.  Could someone please show me a way to do this?</p>\n"},{"tags":["unit-testing","phpunit","code-coverage"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":12641870,"title":"Generate new code coverage for a single file without clearing all other coverage reports in PHPUnit","body":"<p><strong>First the question:</strong>\nIn PHPUnit 3.5, is there a way to generate a coverage report for a single test without the report for the entire test suite being overwritten. I.e. only update the coverage report for the affected files? I still want the output to go to the same folder.</p>\n\n<p><strong>For those that want a bit of background:</strong></p>\n\n<p>Working with PHPUnit 3.5, I have a project which retroactively needs to be covered with unit tests. Now in order to know which classes still need tests I run the entire test suite and generate a html coverage report on it. Because running the complete suite takes some time, I would like to avoid having to run it every time I want to check which tests still need to be implemented. But at the same time I also want the coverage report for the unit test that I'm currently working on, so that I can make sure I'm executing each line of code in a class (this of course is very fast back and forth, so it makes no sense to run the entire suite just to generate this report). I can generate the report for a single test, and I can generate it for the entire suite. But what I'm looking for is a hybrid, which would allow me to first generate a report for the entire suite, and then just update the report with coverage information for the test I'm currently working on.</p>\n\n<p>I've set up a ruby script which will simply run the test for the current file I'm working on and generate a coverage report on that file. But working like that, it always resets the coverage report for all other files also, even if the test did not execute anything in those classes.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","unit-testing","python-mock"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12621049,"title":"Patching a function with Mock only for one module?","body":"<p>I need to patch <code>os.listdir</code> and other <code>os</code> functions to test my Python function. But when they're patched, the <code>import</code> statement fails. Is it possible to patch this function only inside that single module, the real one, and leave tests.py work normally?</p>\n\n<p>Here's an example that breaks <code>import</code>:</p>\n\n<pre><code>import os\nfrom mock import patch\n\n# when both isdir and isfile are patched\n# the function crashes\n@patch('os.path.isdir', return_value=False)\n@patch('os.path.isfile', return_value=False)\ndef test(*args):\n    import ipdb; ipdb.set_trace()\n    real_function(some_arguments)\n    pass\n\ntest()\n</code></pre>\n\n<p>I want <code>real_function</code> to see a patched <code>os.path</code>, and tests to see normal functions.</p>\n\n<p><strong><a href=\"http://pastebin.com/Vp1p511V\" rel=\"nofollow\">here's the traceback</a></strong></p>\n"},{"tags":["visual-studio-2010","wcf","unit-testing","mstest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12640791,"title":"Missing app.config when running test with MSTest.exe","body":"<p>For my web application I have a test for login users. The login is achieved with a WCF service that asks the backend database. For using the WCF service I need an endpoint that is defined in the <code>web.config</code> of my web application. For running the test I need the same endpoint in the test project's <code>app.config</code>.  </p>\n\n<p>So far it works when I run the test within Visual Studio. But when I run that same test on our CruiseControl server the test fails with <code>Could not find default endpoint element that references contract...</code>. So actually the <code>app.config</code> is not loaded.    </p>\n\n<p>I have the same behavior locally when calling the <code>MSTest.exe</code>.    </p>\n\n<p>I tried a lot of things like using <code>[DeploymentItem(\"app.config\")]</code>, using <code>testsettings</code>, copying the <code>app.config</code> by <code>Copy to Output Directory</code> and so on. No success.    </p>\n\n<p>Anyone having an idea?    </p>\n\n<p>Simon</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":12640275,"title":"Exit tests on condition in setUp","body":"<p>I have a set of tests implemented with unittest, which are run automatically. I would like to run them at most once an hour and I have a method checking this condition, and returns True (if it's ok to run them) or False (if should exit tests).</p>\n\n<p>How can I integrate this with unittest such that setUpClass or setUp methods exit (and do not fail) if the check function returns False?</p>\n\n<p>PS: I am using python 2.6, so I can't use <a href=\"http://docs.python.org/py3k/library/unittest.html#skipping-tests-and-expected-failures\" rel=\"nofollow\">these</a></p>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010","unit-testing","process"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12579500,"title":"Exe Process only works in VS2010 unit tests, not from MVC app","body":"<p>I have a class which handles execution of an exe process, which is a console application (written in Fortran!). When running this program, the user must first enter the name of an input file (which must exist in the same location as the exe), and an output file (which does not yet exist, but is produced by the exe.</p>\n\n<p>In my unit tests for the Execute method (see below), everything works fine. The output file is produced correctly. However when I hit this method from my MVC application, the exe fails to find the input file, even though it does exist. The only explanation I can think of for this is that the \"TestResults\" folders automatically created by VS2010 are different somehow in terms of permissions, or that the unit testing process is different somehow.</p>\n\n<pre><code>    public void Execute(string inputFileName, string outputFileName, int timeoutMilliseconds)\n    {\n        if (outputFileName == null)\n            throw new ArgumentNullException(\"outputFileName\");\n        else if (inputFileName == null)\n            throw new ArgumentNullException(\"inputFileName\");\n\n        if (outputFileName == string.Empty)\n            throw new ArgumentException(\"outputFileName must not be an empty string\");\n        else if (inputFileName == string.Empty)\n            throw new ArgumentException(\"inputFileName must not be an empty string\");\n\n        if (!File.Exists(ConfigurationManager.AppSettings[\"dataPath\"]  + inputFileName))\n            throw new FileNotFoundException(\"File not found.\", inputFileName);            \n\n        Process p = new Process();\n        p.StartInfo = GetProcessStartInfo();\n        p.Start();\n\n        string output = \"\";\n\n        // Read up to line where program asks for input file name.\n        while (output == \"\")            \n            output = p.StandardOutput.ReadLine();            \n\n        // Write the input file name.\n        p.StandardInput.WriteLine(inputFileName);\n\n        // Read up to line where program asks for output file name.\n        output = \"\";\n        while (output == \"\")            \n            output = p.StandardOutput.ReadLine();            \n\n        // Write the output file name.\n        p.StandardInput.WriteLine(outputFileName);\n\n        if(!p.WaitForExit(timeoutMilliseconds))\n            throw new ApplicationException(\"The process timed out waiting for a response.\");            \n    }\n\n    private ProcessStartInfo GetProcessStartInfo()\n    {\n        var startInfo = new ProcessStartInfo();\n        startInfo.CreateNoWindow = true;\n        startInfo.UseShellExecute = false;\n        startInfo.RedirectStandardOutput = true;\n        startInfo.RedirectStandardInput = true;\n        startInfo.FileName = _exeFileLocation;\n        startInfo.WindowStyle = ProcessWindowStyle.Hidden;            \n        return startInfo;\n    }\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I have discovered that the unit test also fails if I try to run the process from a location on my C drive. In the code below if I set \"dataPath\" to a hard disk location (e.g. \"C:\\DATALOCATION\"), the process fails saying it can't locate the input file. However if I leave \"dataPath\" in the config to an empty string, the unit test automatically runs the process from a subdirectory of the TestResults folder, and all works!</p>\n\n<pre><code>    [TestMethod]\n    public void ExeRunnerTest()\n    {\n        var studyData = // populate study data here\n        var writer = new StudyDataFileWriter(studyData);\n\n        // Write input\n        string fileName = writer.WriteToFile();\n\n        // Run \n        var exeRunner = new ExeRunner(ConfigurationManager.AppSettings[\"dataPath\"] + \"myProcess.exe\");\n        exeRunner.Execute(fileName, \"outputFile\", 10000);\n\n        // Read output\n        IStudyOutputFileReader reader = new StudyOutputFileReader(ConfigurationManager.AppSettings[\"dataPath\"] + \"outputFile\");\n        StudyOutput output = reader.Read();\n\n        // Tests\n        Assert.AreEqual(1, output.ConsumerSummary.ConsumerTypes.Count());\n    }\n</code></pre>\n"},{"tags":["java","unit-testing","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12625002,"title":"Unit test for method that calls multiple other methods using Mockito","body":"<p>Perhaps I have completely fallen short in my search, but I cannot locate any documentation or discussions related to how to write a unit test for a Java class/method that in turn calls other non-private methods.  Seemingly, Mockito takes the position that there is perhaps something wrong with the design (not truly OO) if a spy has to be used in order to test a method where mocking internal method calls is necessary.  I'm not certain this is always true.  But using a spy seems to be the only way to accomplish this.    For example, why could you not have a \"wrapper\" style method that in turn relies on other methods for primitive functionality but additionally provides functionality, error handling, logging, or different branches dependent on results of the other methods, etc.?</p>\n\n<p>So my question is two-fold:</p>\n\n<ol>\n<li>Is it poorly designed and implemented code to have a method that internally calls other methods?</li>\n<li>What is the best practice and/or approach in writing a unit test for such a method (assuming it is itself a good idea) if one has chosen Mockito as their mocking framework? </li>\n</ol>\n\n<p>This might be a difficult request, but I would prefer for those who decide to answer to not merely re-publish the Mockito verbiage and/or stance on spies as I already am aware of that approach and ideology.  Also, I've used Powermockito as well.  To me, the issue here is that Mockito developed this framework where additional workarounds had to be created to support this need.  So I suppose the question I am wanting an answer to is if spies are \"bad\", and Powermockito were not available, how is one supposed to unit test a method that calls other non-private methods?   </p>\n"},{"tags":["unit-testing","mocking","moq"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":119,"score":4,"question_id":12580015,"title":"How to mock static methods in c# using MOQ framework?","body":"<p>I have been doing unit testing recently and i successfully mocked various scenario with using MOQ framework and MS Tests by creating unit testing. As i know we can't do test private methods but using reflection but i want to know how can we test and mock unit tests by using MOQ framework.</p>\n"},{"tags":["unit-testing","testing","integration-testing","system-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":64,"score":-2,"question_id":11729836,"title":"Types of techniques used in each testing method","body":"<p>I have been research on what is unit testing, integration testing and system testing.</p>\n\n<p>I am writing a thesis on an exam system I am creating using php, jquery, javascript and mysqli programming. It is basically an exam system which connects to the database where the teachers are able to create exams and students take the created exams.</p>\n\n<p>Anyway what my question is that does anyone have an examples or know any useful websites of different techniques to use to be able to fulfil these types of testing methods. If you can name these procedures then I will be more than happy to research those methods and be able to include those in my testing methods in my thesis.</p>\n\n<p>When you provide an example or name the techniques, can you state if they are either unit testing, integration testing and system testing.</p>\n\n<p>Thank you very much :)</p>\n"},{"tags":["java","unit-testing","testing"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":151,"score":1,"question_id":11731053,"title":"Code testing for beginners - how to do?","body":"<p>Lets say that I have a lot of nested loops (3-4 levels) in a java method and each of these loops can have some if-else blocks. How can I check if all these things are working properly ? I am looking for a logical way to test this instead of using a brute force approach like substituting illegal values.</p>\n\n<p>EDIT:\nCan you also suggest some good testing books for beginners ?  </p>\n"},{"tags":[".net","unit-testing","code-coverage"],"answer_count":13,"favorite_count":24,"up_vote_count":63,"down_vote_count":0,"view_count":10482,"score":63,"question_id":38360,"title":"Can you recommend an alternative for NCover?","body":"<p>I'm looking for a good .Net code coverage alternative to NCover (insufficient .Net 3.5 coverage and now pay-for) or VSTS (way too expensive).</p>\n\n<p>We currently test with NUnit, but could switch to something with a similar 'layout' for its text fixtures if it were better integrated.</p>\n"},{"tags":["visual-studio-2010","unit-testing","relative-path","absolute-path"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12633534,"title":"Data Driven Unit Testing","body":"<p>Following code is used to inject data to the unit test from a CSV file. </p>\n\n<p>[DataSource(\"Microsoft.VisualStudio.TestTools.DataSource.CSV\", \"|DataDirectory|\\CalculatePowerInputFraction05.csv\", \"CalculatePowerInputFraction05#csv\", DataAccessMethod.Sequential), DeploymentItem(\"Simulation.Test\\CalculatePowerInputFraction05.csv\"), TestMethod]</p>\n\n<p>public void CalculatePowerTest3()\n{  }</p>\n\n<p>I am setting the above properties by</p>\n\n<p>Right Click on the test in test view -> Properties -> Connection String -> Choose CSV file</p>\n\n<p>The problem I am facing is, |DataDirectory| contains absolute path. I am unable to run the tests in any other system. Is there any other way to provide input to TestContext so that problem with absolute path can be solved by giving relative path? </p>\n"},{"tags":["vb.net","unit-testing","events"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12599835,"title":"How to manupilate parameters/arguments parsed through Raised Events?","body":"<p>I have this text loader class that I'm trying to write tests for. And one of it's methods does a RaiseEvent with a CancelEventArgs parsed in as an argument, so something like this:</p>\n\n<pre><code>Private Sub FireThisEvent()\n    cancelEvent created here\n    RaiseEvent HelloWorld(cancelEvent)\n\n    If cancelEvent.Cancel Then\n        'do smthg\n    End If\nEnd Sub\n</code></pre>\n\n<p>The handler for <code>HelloWorld</code> event is my UI class that makes a pop-up for the user to \ndecide Yes or No, which then sets <code>cancelEvent.Cancel</code> to either <code>True</code> or <code>False</code>. And then the above method checks on <code>cancelEvent</code> and does an action accordingly.</p>\n\n<p>My question is, since I'm only testing the loader class (and not the UI), how do I manipulate the <code>cancelEvent</code> after the event is raised so that I can test for when <code>cancelEvent.Cancel</code> is <code>True</code> and then , when it is <code>False</code>. Thank you.</p>\n\n<p>Would I have mock the UI class?</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","mediator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12633065,"title":"Unit Test methods that contain a mediator using c#","body":"<p>I am currently unit testing a university register system, while it always has error when a method I am going to test contains a mediator which will contact to the University with served as a mediator. Is there any ideas of how to test this method? </p>\n\n<p>The method is:</p>\n\n<pre><code>public void SelectCourse(List&lt;Course&gt; courses)\n    {\n        if (this.IsFullTime)\n        {\n            while (_CurrentCourses.Count &lt; LEAST_NUM_OF_COURSES_FULLTIME)\n            {\n                Random rand = new Random();\n                byte[] b = new byte[1];\n                rand.NextBytes(b);\n                int i = rand.Next(courses.Count);\n                Course c = courses.ToArray()[i];\n                ((University)mediator).RegisterStudentForCourse(this, c);\n            }\n        }\n        else\n        {\n            while (_CurrentCourses.Count &lt; LEAST_NUM_OF_COURSES_PARTTIME)\n            {\n                Random rand = new Random();\n                byte[] b = new byte[1];\n                rand.NextBytes(b);\n                int i = rand.Next(courses.Count);\n                Course c = courses.ToArray()[i];\n\n                // I always //has unit test error with this line!!:\n                ((University)mediator).RegisterStudentForCourse(this, c);\n            }\n        }\n        System.Console.WriteLine(\"Student: \"\n                                 + this.Name \n                                 + \", with student number: (\" \n                                 + this.StudentNumber \n                                 +  \") registered.\");\n    }\n</code></pre>\n"},{"tags":["unit-testing","integration-testing","qa"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":1034,"score":2,"question_id":477911,"title":"What are the challenges you have faced in writing integration tests?","body":"<p>What are the challenges you have faced in writing integration tests? Does writing unit tests help in writing integration tests?</p>\n"},{"tags":["spring","unit-testing","spring-mvc","spring-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12622979,"title":"Trying to pass objects to controller(Spring MVC)","body":"<p>I am trying to test my controller. Spring populates my Profile object but it is empty. I can set the email before the call bu it still is null. How to jag pass a Profile in a proper way?</p>\n\n<pre><code>    private MockHttpServletRequest request;\n    private MockHttpServletResponse response;\n\n    @Autowired\n    private RequestMappingHandlerAdapter handlerAdapter;\n\n    @Autowired\n    private RequestMappingHandlerMapping handlerMapping;\n\n    @Before\n    public void setUp() throws Exception {\n        this.request = new MockHttpServletRequest();\n        request.setContentType(\"application/json\");\n        this.response = new MockHttpServletResponse();\n    }\n\n    @Test\n    public void testPost() {\n        request.setMethod(\"POST\");\n        request.setRequestURI(\"/user/\"); // replace test with any value\n\n        final ModelAndView mav;\n        Object handler;\n\n        try {\n\n            Profile p = ProfileUtil.getProfile();\n            p.setEmail(\"test@mail.com\");\n\n            request.setAttribute(\"profile\", p);\n\n            System.out.println(\"before calling the email is \" + p.getEmail());\n\n            handler = handlerMapping.getHandler(request).getHandler();\n            mav = handlerAdapter.handle(request, response, handler);\n            Assert.assertEquals(200, response.getStatus());\n            // Assert other conditions.\n        } catch (Exception e) {\n\n        }\n    }\n</code></pre>\n\n<p>This is the controller</p>\n\n<pre><code>@RequestMapping(value = \"/\", method = RequestMethod.POST)\npublic View postUser(ModelMap data, @Valid Profile profile, BindingResult bindingResult) {\n\n    System.out.println(\"The email is \" + profile.getEmail());\n\n\n}\n</code></pre>\n"},{"tags":["java","web-services","unit-testing","junit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":409,"score":2,"question_id":8538913,"title":"Unit testing web service calls","body":"<p>I am working on a Java project that is split up into a web project and a back-end project.  The web talks to the back-end via web service calls.  </p>\n\n<p>There is one class in the web project that makes all of the web service calls and I would like to add testing around this class.  I want to do unit testing, and not functional testing, so I do not want to have to have the web service actually running to run the tests. If this class were simply passing the calls through to the back-end, I might be willing to overlook testing it, however there is caching happening at this point, so I want to test that it is working correctly.</p>\n\n<p>When the web service is generated jax-ws wsgen it creates an interface that the front end uses.  I have used this generated interface in order to create a fake object for testing.  This works pretty well, but there are issues with this approach.</p>\n\n<p>I am currently the only one on my team that is doing unit testing, and so am the only one maintaining the test code.  I would like to be able to have the test code be built when the rest of the code is built, but if someone else introduces a new method into one of the web service classes, then the interface will have the new method on it, and my fake object will not implement it, and will therefor be broken.</p>\n\n<p>The web and the back end code projects are not dependent on one another, and I do not want to introduce a dependency between them.  So, introducing an interface on top of the web service endpoint does not seem plausible since if I put it in the back-end, my web code needs to reference it, and if I put it in the front-end, my back-end code needs to reference it.  I also cannot extend the endpoint since this will also introduce a dependency between the projects.</p>\n\n<p>I am unfamiliar with how web services work, and how the classes are generated for the web project to be able to refer to them.  So, I do not know how to create an interface in the back end that will be available for me to use in the web project.</p>\n\n<p>So, my question is, how would I get the interface available to my front-end project without introducing a project dependency (in Eclipse build path)?  Or, is there another, better way to fake out the back-end web service that I am calling?</p>\n"},{"tags":["unit-testing","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12630720,"title":"Unit Testing: Is it valid to do a minimal test?","body":"<p>I have a basic question about unit tests.  I found a crash in my code, and I wrote a test to reproduce the bug.  I then fixed the bug and verified that it passes the test.  My question, is if I took the best approach.  Here is a simplified example:</p>\n\n<pre><code>public class ClassC\n{\n    private int internalFlag;\n\n    void all(Dependency dep1, Dependency dep2, Dependency dep3, Dependency dep4)\n    {\n        a(dep1);\n        b(dep2)\n        c(dep3)\n        d(dep4)\n        e();\n        f();\n    }\n\n    void e()\n    {\n        if (some logic based on dep3)\n        {\n            internalFlag = 2;\n        }\n    }\n\n    void f()\n    {\n        if (internalFlag == 2)\n        {\n            Log(\"All is well\");\n        }\n        else\n        {\n            Log(\"Crash occurs\")\n        }\n    }\n}\n</code></pre>\n\n<p>In the above example, I have a method called \"all\" that calls methods a, b, c, d, e, f.  Now, I found a crash in \"f\" because the \"internalVar\" was not an expected value.  This 'internalVar\" was set in \"e\", but as you can see \"e\" does not set the internalFalg to anything if the condition is false.  So the bug is in e.</p>\n\n<p>I was able to write the test to isolate the bug.  Then I fixed the bug and found that the test past.  Thats great, but in order to do it I had to do something like:</p>\n\n<pre><code>void testAll()\n{\n    mockDep1 = mock(dep1);\n    mockDep2 = mock(dep2);\n    mockDep3 = mock(dep3);\n    mockDep4 = mock(dep4);\n\n    all(mockDep1, mockDep2, mockDep3, mockDep4);\n}\n</code></pre>\n\n<p>Now the part where I make mockDep1..4 is very simple here in this example, but it was actually very long laborious code.  My question is, is it valid instead just to do the minimal calls to reproduce the crash:</p>\n\n<pre><code>void testCrash()\n{\n   mockDep3 = mock(dep3);\n   c(mockDep3)    \n   e()\n   f();\n}\n</code></pre>\n\n<p>This would be all I would be required to do to reproduce and test the crash, except that its not exactly how the code would be called in the actual method \"all\", that calls each method.  It just seems like writing testAll above including all the mocks over and over again for each bug is a bit tedius.  But then again, thats how the actual method \"all\" would work.  So is it better instead to isolate the bug, even if the isolation is not exactly how it would work if the full method was called?</p>\n"},{"tags":["android","edittext","unit-testing"],"answer_count":1,"favorite_count":3,"up_vote_count":17,"down_vote_count":0,"view_count":5413,"score":17,"question_id":3216294,"title":"android: programatically add id to R.id","body":"<p>i am creating an EditText object which i then try to reference in a unit test.  what is the best way to add a new 'id' to R.id for this dynamically created object so that i can later reference it via findViewById() in the unit test?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":522,"score":0,"question_id":6044376,"title":"How do I unit test private controller methods in ASP.NET MVC?","body":"<p>What is the best practice to unit-test private methods inside a controller in ASP.NET MVC? The Currently, if I want to unit-test a private method inside a controller I have to set it to public but when I do, that method is exposed to the web.</p>\n\n<p>Is the best way to move the method to a helper class?</p>\n"},{"tags":["php","unit-testing","testing","symfony2","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":12623797,"title":"PHPUnit test always succeeds, both with $this->once() and $this->never()?","body":"<p>I know I'm doing something wrong because this is very strange, I'm learning PHPUnit since a few days. The test subject is <code>receive()</code> controller action:</p>\n\n\n\n<pre class=\"lang-php prettyprint-override\"><code>class ReportController\n{\n    /**\n     * @var \\Symfony\\Component\\EventDispatcher\\EventDispatcherInterface\n     */\n    private $dispatcher;\n\n    public function __construct(EventDispatcherInterface $dispatcher)\n    {\n        $this-&gt;dispatcher = $dispatcher;\n    }\n\n    /**\n     * @param \\Gremo\\SkebbyBundle\\Message\\InboudSkebbyMessage $message\n     * @return \\Symfony\\Component\\HttpFoundation\\Response\n     */\n    public function receive(InboudSkebbyMessage $message)\n    {\n        $this-&gt;dispatcher-&gt;dispatch(SkebbyEvents::MESSAGE_RECEIVED,\n            new InboundMessageEvent($message)\n        );\n\n        return new Response();\n    }\n}\n</code></pre>\n\n<p>As the controller throws an event, I need to mock an event subscriber (implements <a href=\"https://github.com/symfony/symfony/blob/master/src/Symfony/Component/EventDispatcher/EventSubscriberInterface.php\" rel=\"nofollow\"><code>Symfony\\Component\\EventDispatcher\\EventSubscriberInterface</code></a>). There is a static method <code>getSubscribedEvents()</code>. Test method helper (to get the mock):</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>public function getMockSubscriber(array $events)\n{\n    $class = $this-&gt;getMockClass(\n        'Symfony\\Component\\EventDispatcher\\EventSubscriberInterface',\n        array_merge(array_values($events), array('getSubscribedEvents'))\n    );\n\n    // Static stub method\n    $class::staticExpects($this-&gt;once())\n        -&gt;method('getSubscribedEvents')\n        -&gt;will($this-&gt;returnValue($events))\n    ;\n\n    return new $class;\n}\n</code></pre>\n\n<p>Then in my test method I'm registering the (mock) subscriber, making the request and checking that <code>onMessageReceived()</code> is invoked exactly one time. The (big, actually) problem is <strong>test always succeeds</strong>, even if i change the mock to <code>$subscriber-&gt;expects($this-&gt;never())-&gt;method('onMessageReceived')</code>. Implementation:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>public function testApiCall()\n{\n    $client = $this-&gt;createClient();\n\n    // Router (for route generation) and dispatcher (for subscribing the mock)\n    $router    = $client-&gt;getContainer()-&gt;get('router');\n    $dispatcer = $client-&gt;getContainer()-&gt;get('event_dispatcher');\n\n    // Get mock event subscriber\n    $subscriber = $this-&gt;getMockSubscriber(array(\n        'messsage.received' =&gt; 'onMessageReceived'\n    ));\n\n    // Register the mock subscriber with the dispatcher\n    $subscriber-&gt;expects($this-&gt;once())-&gt;method('onMessageReceived');\n    $dispatcer-&gt;addSubscriber($subscriber);\n\n    // Make the request\n    $request  = Request::create(\n        $router-&gt;generate('controller_receive'),\n        'POST',\n        array(\n            'sender'    =&gt; 'sender',\n            'receiver'  =&gt; 'receiver',\n            'text'      =&gt; 'text',\n            'timestamp' =&gt; time(),\n            'smsType'   =&gt; 'smsType'\n        )\n    );\n\n    $client-&gt;getKernel()-&gt;handle($request);\n}\n</code></pre>\n\n<p><strong>EDIT</strong>: mock subscriber is correctly registered with the dispatcher. <code>var_dump($dispatcher-&gt;getListeners())</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>array(7) {\n  'messsage.received' =&gt;\n  array(1) {\n    [0] =&gt;\n    array(2) {\n      [0] =&gt;\n      class Mock_EventSubscriberInterface_19b191af#34 (2) {\n        ...\n      }\n      [1] =&gt;\n      string(17) \"onMessageReceived\"\n    }\n  }\n</code></pre>\n"},{"tags":["c++","string","unit-testing","visual-c++","std"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":12628927,"title":"Why doesn't Assert::AreEqual in the VS UnitTesting framework work with std::string?","body":"<p>I am trying to do a unit test on some c++ code but am running into some trouble.</p>\n\n<p>I have something similar to the following lines of code...</p>\n\n<pre><code>std::string s1 = obj-&gt;getName();\nstd::string s2 = \"ExpectedName\";\nAssert::AreEqual(s1, s2, \"Unexpected Object Name\");\n</code></pre>\n\n<p>And I'm getting the following compiler error...</p>\n\n<pre><code>error C2665: 'Microsoft::VisualStudio::TestTools::UnitTesting::Assert::AreEqual' :\nnone of the 15 overloads could convert all the argument types\n</code></pre>\n\n<p>It seems like it should be a match with <a href=\"http://msdn.microsoft.com/en-us/library/ms243446%28v=vs.80%29.aspx\" rel=\"nofollow\">the following overload</a>:</p>\n\n<pre><code>AreEqual&lt;(Of &lt;(T&gt;)&gt;)(T, T, String) \n</code></pre>\n\n<p>Isn't the above overload a template overload that should support any object, as long as arguments 1 and 2 are of the same type? Or am I missing something?</p>\n\n<p>Is there some other way that I can accomplish this Assert?</p>\n"},{"tags":["unit-testing","maps","biztalk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":67,"score":-1,"question_id":12582291,"title":"BizTalk Test Flat-File Map","body":"<p>I've written a unit test for a map which has XML as the source and a flat file schema as the target. </p>\n\n<p>I can set the \"TestMap Output\" property of the map to XML or native. When I then right-click the map in solution explorer and select Test Map, it works great, I get either an XML file or a flat file depending in the value I selected for the \"TestMap Output\" property. In both cases all expected fields are populated with the correct value from the input XML document. </p>\n\n<p>My problem comes when I execute a unit test using the TestMap method of the class Microsoft.BizTalk.TestTools.Mapper.TestableMapBase. I am getting the error \"Object reference not set to an instance of an object\", here is the stack trace:</p>\n\n<pre><code>at Microsoft.BizTalk.TOM.CXSDSchemaTree.CreateNativeInstance(String strXMLInstFileName, String strNativeInstanceOutputFileName, InstanceGenerationOptions options, ITOMErrorInfo[]&amp; errInstanceCreationErrors)\nat Microsoft.BizTalk.TOM.CXSDSchemaTree.CreateNativeInstanceFromXMLInstance(String strXMLInstFileName, String strNativeInstFileName, ITOMErrorInfo[]&amp; errInstCreationErrors)\nat Microsoft.BizTalk.TestTools.Mapper.TestableMapBase.TestMap(String inputInstanceFilename, InputInstanceType inputType, String outputInstanceFilename, OutputInstanceType outputType)\nat x.Int.WMS.Testing.Unit.UnitTests.FromAx.UnitTest_CanonicalCustomer_2_MLS_MRE.CallMap(TestableMapBase target) in C:\\Development\\x.Int.WMS\\Dev\\V1.0\\Src\\Solutions\\WMS\\x.Int.WMS.Testing.Unit\\UnitTests\\FromCanonical\\UnitTest_CanonicalCustomer_2_MLS_MRE.cs:line 68\nat x.Int.WMS.Testing.Unit.UnitTests.FromAx.UnitTest_CanonicalCustomer_2_MLS_MRE.SetupTest() in C:\\Development\\x.Int.WMS\\Dev\\V1.0\\Src\\Solutions\\WMS\\x.Int.WMS.Testing.Unit\\UnitTests\\FromCanonical\\UnitTest_CanonicalCustomer_2_MLS_MRE.cs:line 33\nat x.Int.WMS.Testing.Unit.UnitTests.FromAx.UnitTest_CanonicalCustomer_2_MLS_MRE.RecordID_IsMapped() in C:\\Development\\x.Int.WMS\\Dev\\V1.0\\Src\\Solutions\\WMS\\x.Int.WMS.Testing.Unit\\UnitTests\\FromCanonical\\UnitTest_CanonicalCustomer_2_MLS_MRE.cs:line 45\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","unit-testing","generics","type-conversion"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":12625995,"title":"Assert.AreEqual<T> (and Related Generic Functions) Don't Enforce Their Argument Types","body":"<p>I am writing some unit tests, well actually I'm fixing unit tests after a refactor, and I noticed some very odd behavior. The original assertion used the non-generic flavor of the AreEqual method.</p>\n\n<pre><code>Assert.AreEqual(Foo.Do(...), Bar.Do(...).Conversion(...));\n</code></pre>\n\n<p>After some refactoring, Foo.Do() no longer returned the same type and needed additional conversion to maintain the equivalence. However, the AreEquals function happily takes any objects so the tests failed at run-time instead of compile-time like one would hope.</p>\n\n<p>So, I decided to change the assertions to their generic counterparts to enforce that changes like this in the future would turn into compile-time errors.</p>\n\n<pre><code>Assert.AreEqual&lt;X&gt;(Foo.Do(...), Bar.Do(...).Conversion(...));\n</code></pre>\n\n<p>At this point, I haven't changed Foo.Do() to return the correct type, so I should get a compile error that Foo.Do()'s return is not a X. To my surprise, nothing happens. The compile succeeds just fine. I assume there must be an implicit conversion between the types somewhere, but a little experimenting shows there isn't. I have tried a few other mock examples to see if having non-generic and generic flavors of functions would interact this way, but I can't reproduce this behavior except with this class.</p>\n\n<p>Why does the compiler not enforce that both values be of type X, even if that is what it appears to imply if you hover over the function in Visual Studio?</p>\n"}]}
{"total":15323,"page":11,"pagesize":100,"questions":[{"tags":["c#","unit-testing","generics","type-conversion"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":12625995,"title":"Assert.AreEqual<T> (and Related Generic Functions) Don't Enforce Their Argument Types","body":"<p>I am writing some unit tests, well actually I'm fixing unit tests after a refactor, and I noticed some very odd behavior. The original assertion used the non-generic flavor of the AreEqual method.</p>\n\n<pre><code>Assert.AreEqual(Foo.Do(...), Bar.Do(...).Conversion(...));\n</code></pre>\n\n<p>After some refactoring, Foo.Do() no longer returned the same type and needed additional conversion to maintain the equivalence. However, the AreEquals function happily takes any objects so the tests failed at run-time instead of compile-time like one would hope.</p>\n\n<p>So, I decided to change the assertions to their generic counterparts to enforce that changes like this in the future would turn into compile-time errors.</p>\n\n<pre><code>Assert.AreEqual&lt;X&gt;(Foo.Do(...), Bar.Do(...).Conversion(...));\n</code></pre>\n\n<p>At this point, I haven't changed Foo.Do() to return the correct type, so I should get a compile error that Foo.Do()'s return is not a X. To my surprise, nothing happens. The compile succeeds just fine. I assume there must be an implicit conversion between the types somewhere, but a little experimenting shows there isn't. I have tried a few other mock examples to see if having non-generic and generic flavors of functions would interact this way, but I can't reproduce this behavior except with this class.</p>\n\n<p>Why does the compiler not enforce that both values be of type X, even if that is what it appears to imply if you hover over the function in Visual Studio?</p>\n"},{"tags":[".net","unit-testing"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1132,"score":4,"question_id":601075,"title":"What's the difference between the .NET Unit Testing framework out there?","body":"<p>I've heard many different opinions as to what makes one better than another. But can anyone provide a technical explanation as to why I should choose one unit testing framework over another. For example, I use Visual Studio Team System. Why would I choose an Open Source testing framework (NUnit, xUnit, MbUnit, etc) over Visual Studio's built-in unit testing capabilities? Does it matter?</p>\n\n<p>Edit: To be clear, I'm not looking for an opinion on \"Which unit testing framework is best\"...I'm looking for technical details as to how they are different,.</p>\n"},{"tags":["c#",".net","unit-testing","list"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12620367,"title":"List value comparison","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6196526/how-to-find-out-whether-two-string-arrays-are-equal-to-other\">How to find out whether two string arrays are equal to other</a>  </p>\n</blockquote>\n\n\n\n<p>how to assert that both lists contain same items?</p>\n\n<pre><code>string[] arr1 = listvalue.ToArray();\nstring[] arr2 = listvalueMain.ToArray();\nfor (int i = 0; i &lt; 5; i++)\n{\n    Assert.AreEqual(arr1[i], arr2[i]);\n}\n</code></pre>\n\n<p>This shows an error.</p>\n"},{"tags":["unit-testing","testing","ruby-on-rails-3.2","rails-migrations","test-environments"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12608928,"title":"Running migration script on test environment only","body":"<p>Is there a way to only run migrations in the test environment?</p>\n\n<p>I'd like to create tables and seed the data in only the test environment since the staging and production databases already exist.</p>\n"},{"tags":["java","unit-testing","hamcrest"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12606196,"title":"What is the alternative to using the Deprecated Hamcrest method is()?","body":"<p>I use the following code at the moment to assert on a <code>boolean</code> value, however the method <code>org.hamcrest.Matchers.is()</code> is deprecated.</p>\n\n<pre><code>assertThat(someValue, is(false));\n</code></pre>\n\n<p>Is there a simple alternative syntax to test for boolean values without resorting to <code>assertTrue()</code> which gives you poor failure messages like \"java.lang.AssertionError\"</p>\n\n<hr>\n\n<p><strong>Edit</strong> after receiving comments/answers</p>\n\n<p>My initial concerns were raised because Eclipse shows the following import statement as deprecated </p>\n\n<p><img src=\"http://i.stack.imgur.com/2fvDL.png\" alt=\"enter image description here\"></p>\n\n<p>On viewing the <a href=\"http://www.jarvana.com/jarvana/view/org/hamcrest/hamcrest-library/1.2.1/hamcrest-library-1.2.1-javadoc.jar!/org/hamcrest/Matchers.html\" rel=\"nofollow\">Hamcrest API</a> docs there are 3 overloaded variations of the <code>is()</code> method, only one of which is deprecated.</p>\n\n<p>Therefore, to clarify the comment from @mark and the answer from @matt, the use of <code>is()</code> that I have posted above is valid and not deprecated.</p>\n"},{"tags":["unit-testing","grails","groovy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12567485,"title":"Grails set System property for test","body":"<p>Is it possible to directly set a System.property for a particular method of a Grails unit test class?</p>\n\n<p>I've got a Filters class that blocks some actions if a system property is set in Config.groovy:</p>\n\n<pre><code>class MyFilters {\ndef filters = \n{\n    if ('true'.equals(System.properties.getProperty('myProperty', 'false'))){\n        writeFilter(controller: \"myController\", action: \"update\")\n        {\n            before =\n            {\n                response.sendError(HttpServletResponse.SC_FORBIDDEN);\n                return false;\n</code></pre>\n\n<p>In MyControllerTests, I'm trying to implement a test for the filter:</p>\n\n<pre><code>void testMyFilter(){\n    System.properties.setProperty('myProperty', 'true')\n    withFilters(action:\"update\") {\n        controller.update()\n    }\n    assert response.status ==  HttpServletResponse.SC_FORBIDDEN\n}\n</code></pre>\n\n<p>But the filter class is already mocked at this stage (using the default 'false' property value from Config) so the change of the property in the test has no effect.</p>\n\n<p>Is there a way around this, or a way to force Grails to reload the Filters class after the prop is changed?  I can't change the default property in Config as the other controller tests will break, it's just for a particular environment where this prop will be set so I'd like the scenario covered by a test that checks the Filter will kick in.</p>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","visual-studio-2010","c++-cli","code-coverage","testrunconfig"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":462,"score":0,"question_id":2872158,"title":"Why don't I get code coverage results for C++/CLI project in Visual Studio 2010?","body":"<p>I've recently upgrade my solution to Visual Studio 2010.</p>\n\n<p>I have 4 projects I want to cover using unit tests - 3 C# and 1 C++/CLI.</p>\n\n<p>I get coverage for the C# projects but not for the C++/CLI project.</p>\n\n<p>I did get for all of them in Visual Studio 2008.</p>\n\n<p>I've configured the assemblies using testrunconfig -> Data and Diagnostics -> Code Coverage -> Configure.</p>\n\n<p>Why don't I get code coverage result for the C++/CLI project?</p>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","session","integration-testing"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":520,"score":1,"question_id":8156559,"title":"How to access session from Rails Integration Test?","body":"<p>Consider the following integration test:</p>\n\n<pre><code>test \"if there is no user in session, redirect to index and flash message\" do\n  open_session do |sess|\n    post '/login', :email =&gt; users(:client).email, :password =&gt; 'rumpelstiltskin'\n    sess[:user] = nil\n    get '/user_page'\n    assert_redirected_to index_path\n    assert_equal \"Your session has expired. Please log in again\", flash[:notice]\n  end    \nend\n</code></pre>\n\n<p>This generates error: <code>undefined method '[]='</code></p>\n\n<p>And, changing to <code>sess.session[:user] = nil</code> generates an error as well: <code>NoMethodError: undefined method 'session' for nil:NilClass</code></p>\n\n<p>How do you modify the session params from an integration test in Rails?</p>\n\n<p>Working in Rails 3.0.7, Ruby 1.9.2p180, Unit test framework.</p>\n\n<p>EDIT:<br>\n<code>get '/user_page', nil, {:user =&gt; nil}</code> and <code>get ('/user_page', nil, {:user =&gt; nil} )</code> generate errors.</p>\n"},{"tags":["java","eclipse","unit-testing","testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12625080,"title":"JUnit testing - Whats wrong with a test that`s expected result should be passed?","body":"<p>I am testing a simple thing in my DB-Application. To create a product. For this I use Junit tests and here is the test that always fail, instead the expected result to turn green(passes)...</p>\n\n<pre><code>@Test\npublic void testCreate(){\n    Produkt test = new Produkt(20, \"junit\", \"junitk\", false, 900.67, true, true);\n    handler.createProdukt(test);\n}\n</code></pre>\n\n<p>when I try it out simply with a main method(just creating a new Produkt and look if that works...) the create function works great and created this Produkt.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>PS.: here is the code where I set up the tests:</p>\n\n<pre><code>@Before\npublic void setUp() throws SQLException, ClassNotFoundException{\n    try {\n        this.shandler = new ServiceHandler();\n        this.setServiceHandler(shandler);\n        manager.getConnection();\n        manager.getConnection().setAutoCommit(false);\n    } catch (SQLException ex) {\n        System.err.println(\"ERROR:\");\n        ex.printStackTrace();\n    }\n\n}\n\n@After\npublic void tearDown() throws SQLException, ClassNotFoundException{\n    manager.getConnection().rollback();\n    manager.closeConnection();\n}\n</code></pre>\n\n<p><strong>UPDATE</strong>\nI guess you mean the failure trace:</p>\n\n<blockquote>\n  <p>java.lang.NullPointerException    at\n  tests.JUnitAbstractTests.testCreate(JUnitAbstractTests.java:35)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)     at\n  org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n    at\n  org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at\n  org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n    at\n  org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)  at\n  org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)   at\n  org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)     at\n  org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)   at\n  org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)  at\n  org.junit.runners.ParentRunner.run(ParentRunner.java:300)     at\n  org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at\n  org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)</p>\n</blockquote>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":113,"score":0,"question_id":12614502,"title":"Unit Tests Not Appearing","body":"<p>Right now, I'm using the Visual Studio Express 2012 on the Windows release preview and I can't seem to get my unit tests to appear in the test explorer... Is there something special that I need to do before they appear? The test explorer simply says that I need to do \"Run All\" and they'll appear.</p>\n\n<p>I have a class called TestApp.Entity, and TestApp.EntityTest... </p>\n\n<p>Here is my code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing Microsoft.VisualStudio.TestPlatform.UnitTestFramework;\nusing System.Net.Http;\nusing TestApp.Domain;\n\nnamespace TestApp.Entity.Test\n{\n[TestClass]\npublic class EntityTests\n{\n    [TestMethod]\n    public async void TestObject1Deserialize()\n    {\n        Uri agencyUri = new Uri(\"*removed*\");\n        HttpClient httpClient = new HttpClient();\n        HttpResponseMessage response = await httpClient.GetAsync(agencyUri);\n\n        string responseBodyAsText = await response.Content.ReadAsStringAsync();\n        List&lt;Agency&gt; agencyList = Deserializers.AgencyDeserialize(responseBodyAsText);\n\n        CollectionAssert.Contains(agencyList, new Agency() { Tag = \"*removed*\", Title = \"*removed*\", ShortTitle = \"\", RegionTitle = \"*removed*\" });\n    }\n\n}\n}\n</code></pre>\n\n<p>I assume that's all I needed to do, but they still don't appear in the test explorer. Any advice would be helpful.</p>\n"},{"tags":["python","unit-testing","foreign-keys","sqlalchemy","elixir"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12598050,"title":"UnitTest : Can't add many to many relations : Integrity error (seems delete do not do his job)","body":"<p>I have two tables : Person &amp; Team ; each has a ManyToMany relation with the other.</p>\n\n<p>I do this in the <code>setUp</code> function (called <strong>before</strong> each function of testing, 3 times in my case)</p>\n\n<pre><code>p = Person(fname=u\"John\", lname=u\"Doe\")\nTeam(name=u\"Anon\", persons=[p])\nsession.commit()\n</code></pre>\n\n<p>And my <code>tearDown</code> function (called <strong>after</strong> each function of testing)</p>\n\n<pre><code>Person.query.delete()\nTeam.query.delete()\nsession.commit()\n</code></pre>\n\n<p>The first test passes, but when <code>setUp</code> is called the second time, I got this :\n<code>IntegrityError: (IntegrityError) columns person_id, team_id are not unique u'INSERT INTO team_persons__person_teams (person_id, team_id) VALUES (?, ?)' (5, 1)</code></p>\n\n<p>It seems like delete did not really delete the rows the first time...\nI can't figure out why this happens.</p>\n\n<p>Any ideas ?\nThank you !</p>\n"},{"tags":[".net","unit-testing","resharper","mstest","team-build"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1383,"score":4,"question_id":4733592,"title":"Assert.Inconclusive and IgnoreAttribute","body":"<p>What is the right way to use <code>Assert.Inconclusive</code> and <code>IgnoreAttribute</code> in MS Unit test framework?</p>\n\n<p>We are using <code>Assert.Inconclusive</code> mainly for tests which are:</p>\n\n<ul>\n<li>Not implemented yet</li>\n<li>Somehow broken or incomplete = requires futher attention</li>\n<li>When test body is for any reason commented out</li>\n</ul>\n\n<p>We are doing this because:</p>\n\n<ul>\n<li>Inconclusive test can have message</li>\n<li>We want to see such tests in test results on TFS</li>\n</ul>\n\n<p>Our problem is that <code>Inconclusive</code> tests are marked as error in both TFS and Resharper. If we use <code>IgnoreAttribute</code> instead we will see these tests in Resharper but MS Test runner and TFS will ignore them at all. Using <code>IgnoreAttribute</code> in TFS and MS Test runner is same like commenting whole test which is useless.</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","routing","mvccontrib"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12620121,"title":"Unit Test ASP MVC Route with Constraint","body":"<p>I have a route that is defined like this:</p>\n\n<pre><code>routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional, area = \"\" }, // Parameter defaults\n            new { home = new HomePageConstraint() }\n        );\n\npublic class HomePageConstraint : IRouteConstraint\n{\n    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)\n    {\n        return !httpContext.Request.RawUrl.StartsWith(\"/home\", StringComparison.InvariantCultureIgnoreCase);\n    }\n}\n</code></pre>\n\n<p>And I am trying to test it like this:</p>\n\n<pre><code>[Test]\npublic void Home_Load_Homepage()\n{\n    \"~/\".ShouldMapTo&lt;HomeController&gt;(x =&gt; x.Index());\n}\n</code></pre>\n\n<p>The problem I have is that the <code>httpContext</code> is null, so the test fails. how can I inject http context into a constraint?</p>\n"},{"tags":["unit-testing","testing","grails","intellij-idea"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12620503,"title":"Slow Grails test starting in Intellij IDEA","body":"<p>IDEA is starting a new Grails instance every time I wan't to run a single test.</p>\n\n<p>Is there a way to use regular Grails runner but using interactive mode?\nRunning tests in interactive mode id blazing fast :-)</p>\n"},{"tags":["c#",".net","visual-studio-2010","unit-testing","mstest"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12619911,"title":"Generate runnable exe from MSTest test","body":"<p>I have a [TestMethod] in a visual studio test project. If I build the project, I get a dll. I dont want to run the tests from the visual studio User Interface.</p>\n\n<ol>\n<li><p>Is there any way to generate an exe of a test project so that i can run the tests from command prompt?</p></li>\n<li><p>If I change the project type from Class Library to Console Application, then it requires a Main function. Is there any way to call a TestMethod from the Main() </p></li>\n</ol>\n"},{"tags":["eclipse","unit-testing","maven","maven-plugin","classnotfoundexception"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3467,"score":1,"question_id":5974432,"title":"ClassNotFoundException when running JUnit unit tests within Eclipse (using Maven)","body":"<p>I have just upgraded my SpringSource Tools Suite (STS, a variant IDE of Eclipse) to the latest version (v3.6.1). Then all my JUnit unit tests can not be run again. I am getting this error:</p>\n\n<pre><code>Class not found ClassToTest\njava.lang.ClassNotFoundException: ClassToTest\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)\n</code></pre>\n\n<p>According to this blog:\n<a href=\"http://blog.andrewbeacock.com/2008/11/classnotfoundexception-when-running.html\" rel=\"nofollow\">ClassNotFoundException when running JUnit unit tests within Eclipse (using Maven)</a>,\nit is because of some misconfiguration of Maven plugin in Eclipse. However, in STS 3.6.2 I cannot find this option \"Include Modules\" in the Maven plugin. How can I fix this problem and re-enable my unit tests?</p>\n"},{"tags":["java","eclipse","unit-testing","testing","junit"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12617391,"title":"JUnit - assertFalse does not except == Operator?","body":"<p>I am currently writing junit tests for my program.</p>\n\n<p>One of my tests updated an existing product. Here`s the code:</p>\n\n<pre><code>@Test\npublic void testUpdate(){\n    Produkt p = new Produkt(1, \"apple\", \"food\", true, 2.00, false, true);\n    assertFalse(handler.updateProdukt(p)==0);;  \n} \n</code></pre>\n\n<p>but eclispe always says:</p>\n\n<blockquote>\n  <p>The operator == is undefined for the argument type(s) void, int</p>\n</blockquote>\n\n<p>if I write null nothing changes...</p>\n\n<p>Is there a possibility to test whether the updatedProdukt is null or not?</p>\n\n<p>I really appreaciate your answer!!!</p>\n"},{"tags":["java","unit-testing","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12606148,"title":"passing Parameterized input using Mockitos","body":"<p>I am using Mockito for unit testing. I am wondering if its possible to send Parametrized input parameters with as in Junit testing<br>\ne.g</p>\n\n<pre><code>@InjectMocks\nMockClass mockClass = new MockClass();\n\n@Test\npublic void mockTestMethod()\n    {\n    mockClass.testMethod(stringInput); \n// here I want to pass a list of String inputs \n// this is possible in Junit through Parameterized.class.. \n// wondering if its can be done in Mockito\n    } \n</code></pre>\n"},{"tags":["c++","unit-testing","mocking","virtual"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":112,"score":5,"question_id":12614870,"title":"Should I make a member function virtual just to make a class testable?","body":"<p>I'm working on a class whose simplified version looks like this:</p>\n\n<pre><code>class Http_server {\npublic:\n    void start(int port)\n    {\n        start_server();\n        std::string content_type = extract_content_type(get_request());\n    }\n\nprivate:\n    void start_server()\n    {\n        ...\n    }\n\n    std::string get_request()\n    {\n        ...\n    }\n\n    std::string extract_content_type(const std::string&amp; request) const\n    {\n        ...\n    }\n};\n</code></pre>\n\n<p>Now I want to write a test case for <code>extract_content_type</code>. The problem is: it's private, so I cannot call it from the outside. The only function I can test is <code>start</code>, but that one would actually start the server (<code>start_server</code>) and wait for a request (<code>get_request</code>).</p>\n\n<p>How I see it, I've got three options:</p>\n\n<ol>\n<li>Make <code>extract_content_type</code> public</li>\n<li>Extract <code>extract_content_type</code> into a utility class or namespace</li>\n<li>Make <code>start_server</code> and <code>get_request</code> virtual and create a mock object that overrides them</li>\n</ol>\n\n<p>I don't want to make anything public or move to a utility namespace that's just used once in a single class, so the least evil is option 3.</p>\n\n<p>I've seen at least one example of this in the V8 code base:\n<a href=\"http://code.google.com/p/v8/source/browse/trunk/test/cctest/test-date.cc\">http://code.google.com/p/v8/source/browse/trunk/test/cctest/test-date.cc</a></p>\n\n<p>Still, I'm not sure if it's a good idea. <code>virtual</code> isn't the default in C++ for two reasons:</p>\n\n<ol>\n<li>It would induce performance/memory overhead (probably won't matter in my case though)</li>\n<li>Not every class is supposed to be used as a base class, making it explicit was also a design decision</li>\n</ol>\n\n<p>What would you do? Live with the useless virtual? Or rather not test the function at all? I'm not into TDD, nor do I want to be, but it's just easier to develop functions like <code>extract_content_type</code> against a test.</p>\n"},{"tags":["unit-testing","language-agnostic","tdd"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12569363,"title":"unit-test the template method design pattern","body":"<p>Suppose the following template method implementation:  </p>\n\n<pre><code>public abstract class Abs\n  {\n    void DoYourThing()\n    {\n      log.Info(\"Starting\");\n      try\n      {\n        DoYourThingInternal();\n        log.Info(\"All done\");\n      }\n      catch (MyException ex)\n      {\n        log.Error(\"Something went wrong here!\");\n        throw;\n      }\n    }\n\n    protected abstract void DoYourThingInternal();\n\n  }\n</code></pre>\n\n<p>Now, there are plenty of info around on how to test the <code>Abs</code> class, and make sure that <code>DoYourThingInternal</code> is called.<br>\nHowever, suppose I want to test my <code>Conc</code> class:</p>\n\n<pre><code> public class Conc : Abs\n  {\n    protected override void DoYourThingInternal()\n    {\n      // Lots of awesome stuff here!\n    }\n  }\n</code></pre>\n\n<p>I wouldn't want to do <code>conc.DoYourThing()</code>, since this will invoke the parent method, which was already tested separately.   </p>\n\n<p>I would like to test only the overriding method.   </p>\n\n<p>Any ideas?  </p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12604067,"title":"Hook into PHPUnit overall test state at runtime","body":"<p>I have a PHPUnit bootstrap file that creates a test DB used for DB-related unit tests, and registers a shutdown function to destroy the DB once the tests complete. A fresh database for every run!</p>\n\n<p>The problem: when tests fail, I want to hold onto the database for debugging purposes. At present, I have to manually disable my <code>register_shutdown_function()</code> call and then rerun the tests.</p>\n\n<p><strong>If I could access PHPUnit's final success/fail state for the run, I could dynamically trigger the database destruction process based on a switch within the PHPUnit bootstrap file.</strong></p>\n\n<p>PHPUnit stores this info somewhere in order to trigger the proper outcome event, i.e. the output <code>OK</code> vs <code>FAILURES!</code>. However from what I've uncovered, this information is not exposed to a user-level bootstrap file. Anyone ever done anything like this?</p>\n\n<p>If you want to explore, here's a stack trace of PHPUnit that occurs when you run PHPUnit from the command line...</p>\n\n<pre><code>PHP   1. {main}() /usr/bin/phpunit:0\nPHP   2. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46\nPHP   3. PHPUnit_TextUI_Command-&gt;run() /usr/share/php/PHPUnit/TextUI/Command.php:130\nPHP   4. PHPUnit_TextUI_Command-&gt;handleArguments() /usr/share/php/PHPUnit/TextUI/Command.php:139\nPHP   5. PHPUnit_TextUI_Command-&gt;handleBootstrap() /usr/share/php/PHPUnit/TextUI/Command.php:620\nPHP   6. PHPUnit_Util_Fileloader::checkAndLoad() /usr/share/php/PHPUnit/TextUI/Command.php:867\nPHP   7. PHPUnit_Util_Fileloader::load() /usr/share/php/PHPUnit/Util/Fileloader.php:79\nPHP   8. include_once() /usr/share/php/PHPUnit/Util/Fileloader.php:95\nPHP   9. [YOUR PHPUNIT BOOTSTRAP RUNS HERE]\n</code></pre>\n"},{"tags":["unit-testing","testing","windows-services","instrumentation","moles"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1087,"score":1,"question_id":5954043,"title":"Moles VS2010 Unit Testing of Windows Service Fails","body":"<p>I am writing a relatively small and simple Windows Service, and using Moles to mock unit tests.  Due to the small code, I decided to use Moles instrumentation, rather than segmenting the code with stubs.  When I execute any unit test against the moled assembly, I receive an error:</p>\n\n<blockquote>\n  <p>InitilaizationDetectsMissingMonitorDirectory\n  has failed:   Test method\n  FtpDirWatcher.Test.FileWatcherTest.InitilaizationDetectsMissingMonitorDirectory\n  threw exception:\n  Microsoft.Moles.Framework.Moles.MoleInvalidOperationException:</p>\n  \n  <p><strong>Moles requires tests to be IN an instrumented process.</strong> </p>\n  \n  <p>In Visual Studio Test, add the following attribute your unit test method:  </p>\n  \n  <p>[TestMethod]</p>\n  \n  <p>[HostType(\"Moles\")] // add this attribute</p>\n  \n  <p>public void\n  Test()    { ... }</p>\n</blockquote>\n\n<p>I'm not sure what it means that \"Moles requires tests to be <strong>IN</strong> an instrumented process.\"  Note the \"IN\" means this is not the usual \"Moles requires tests to be an instrumented process.\"  I have looked back through documentation, to see if there is anything I have missed.  I am obviously still missing something important.</p>\n\n<p>The target assembly (\"FtpDirWatcher\") is indeed instrumented by Moles (evidenced by the presence of the MFileWatcher object), and I have the proper attributes in place on the test method.  I even tried converting the target property to a method, to no avail.  So, what's going on?</p>\n\n<p>This is condensed code, so no criticisms!</p>\n\n<pre><code>using System;\nusing System.IO;\nusing System.Linq;\nusing FtpDirWatcher.Moles;\nusing Microsoft.Moles.Framework;\nusing Microsoft.VisualStudio.TestTools.UnitTesting;\n[assembly: MolesAssemblySettings(Bitness = MolesBitness.AnyCPU)]\n\nnamespace .Test  // Test project namespace\n{\n    [TestClass]\n    public class FileWatcherTest\n    {\n        readonly string _invalidDirectory = @\"B:\\invaliddirectory\";\n\n        [TestMethod]\n        [DeploymentItem(\"FileWatcher.exe\")]\n        [HostType(\"Moles\")]\n        public void InitilaizationDetectsMissingMonitorDirectory()\n        {\n            Assert.IsFalse(Directory.Exists(_invalidDirectory));\n\n            // THE FOLLOWING LINE OF CODE THROWS THE ERROR.\n            // Use moles to detour the MonitorDirectory property's Get\n            // method to a delegate.\n            MFileWatcher.AllInstances.MonitorDirectoryGet = watcher =&gt; \n                new DirectoryInfo(_invalidDirectory);\n\n            // Don't use the accessor -- no private fields are accessed.\n            var target = new FileWatcher();\n            Assert.IsFalse(target.IsConfigurationOk);\n        }\n    }\n}\n</code></pre>\n\n<p>Any help is appreciated!  </p>\n\n<p><strong>UPDATE:</strong> Added the following build output. Included the bitness setting in the code, above, to show that it should not be an issue.</p>\n\n<blockquote>\n  <p>------ Rebuild All started: Project: Common, Configuration: Debug x86 ------</p>\n  \n  <p>Common -> C:...\\Common\\bin\\x86\\Debug\\Common.dll</p>\n  \n  <p>------ Rebuild All started: Project: FtpDirWatcher, Configuration: Debug x86 ------</p>\n  \n  <p>FtpDirWatcher -> C:...\\FtpDirWatcher\\bin\\Debug\\FtpDirWatcher.exe</p>\n  \n  <p>------ Rebuild All started: Project: FtpDirWatcher.Test, Configuration: Debug x86 ------</p>\n  \n  <p>Microsoft Moles v0.94.51023.0 - <a href=\"http://research.microsoft.com/moles\" rel=\"nofollow\">http://research.microsoft.com/moles</a> - .NET v4.0.30319</p>\n  \n  <p>Copyright (c) Microsoft Corporation 2007-2010. All rights reserved.</p>\n  \n  <p>00:00:00.00> moles</p>\n\n<pre><code>Moles : info : metadata : ignoring reference C:\\...\\FtpDirWatcher.Test\\MolesAssemblies\\FtpDirWatcher.Moles.dll\n\nMoles : info : metadata : incompatible assembly bitness, using reflection only\n\nMoles : info : metadata : loading C:\\...\\FtpDirWatcher\\bin\\Debug\\FtpDirWatcher.exe (reflection only)\n\nMoles : info : compilation : output assembly name: FtpDirWatcher.Moles\n\nMoles : info : code : found 4 types\n\nMoles : info : code : visibility: exported or assembly(FtpDirWatcher.Moles)\n\n00:00:00.37&gt; code generation\n\n  Moles : info : code : generating code at C:\\...\\FtpDirWatcher.Test\\obj\\x86\\Debug\\Moles\\befw\\m.g.cs\n\n  00:00:00.52&gt; stubs generation\n\n    Moles : info : code : generated 2 stub types\n\n  00:00:00.89&gt; moles generation\n\n    Moles : info : code : generated 2 mole types\n\n00:00:01.45&gt; compiling\n\n  Moles : info : compilation : Moles assembly: C:\\...\\FtpDirWatcher.Test\\MolesAssemblies\\FtpDirWatcher.Moles.dll\n</code></pre>\n  \n  <p>00:00:02.37> moles generator 0 errors, 0 warnings</p>\n  \n  <p>FtpDirWatcher.Test -> C:...\\FtpDirWatcher.Test\\bin\\x86\\Debug\\FtpDirWatcher.Test.dll\n  ========== Rebuild All: 3 succeeded, 0 failed, 0 skipped ==========</p>\n</blockquote>\n"},{"tags":["visual-studio-2010","unit-testing","c#-4.0","moles","pex"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":2,"question_id":12594514,"title":"Moles not Woking with VS2010 Framework 4 Client Profile","body":"<p>I have build a solution in .net4 Client Profile. Now i have add the test project &amp; tried to add Moles assembly for the my dll.it gives an error saying that</p>\n\n<p>\"The Command \"path to the Mole.exe\" @\"path of Mole.args\" exited with code - 1008</p>\n\n<p>\"Error  210 The command \"\"C:\\Program Files\\Microsoft Moles\\bin\\moles.exe\" @\"D:\\Fdi_MainTrack_SCA\\FDI UID Renderring\\Main_Track\\FDI UID Renderer\\Fdi.UidRenderer\\Fdi.UidRenderer.ObjectManager.Tests\\obj\\Debug\\Moles\\moles.args\"\" exited with code -1008.\"</p>\n\n<p>can you any one know why this is happening ?</p>\n"},{"tags":["ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":12611232,"title":"Can you include phone shutdown in iOS unit testing?","body":"<p>I was wondering if it was possible to test iOS phone state in your unit testing? Is it possible to shutdown the phone and then turn it back on in your unit test? Is there a third party software that could test this?</p>\n\n<p>thanks in advance!!</p>\n"},{"tags":["c#","unit-testing"],"answer_count":10,"favorite_count":8,"up_vote_count":27,"down_vote_count":0,"view_count":2752,"score":27,"question_id":347156,"title":"Do you put unit tests in same project or another project?","body":"<p>Do you put unit tests in the same project for convenience or do you put them in a separate assembly?</p>\n\n<p>If you put them in a separate assembly like we do, we end up with a number of extra projects in the solution.  It's great for unit testing while coding but how do you release the application without all of these extra assemblies?</p>\n"},{"tags":["c#","unit-testing","rhino-mocks"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":329,"score":3,"question_id":9435140,"title":"Rhino Mocks IgnoreArguments() and testing if a lambda was called correctly","body":"<p>Here's what I have:</p>\n\n<pre><code>   public interface IDataCenterMsmqWriter\n   {\n      void UpdateData(Action&lt;DataCenterWcfProxy&gt; action);\n   }\n</code></pre>\n\n<p>System under test:</p>\n\n<pre><code>public class WcfService : IWcfService\n{\n    private readonly IDataCenterMsmqWriter _writer;\n\n    public WcfService(IDataCenterMsmqWriter writer)\n    {\n        _writer = writer;\n    }\n\n    #region IWcfService members\n\n    public void SendData(SomeData data)\n    {\n        _writer.UpdateData(d =&gt; d.SendVarData(data));\n    }\n\n    // other members of IWcfService elided\n    #endregion\n}\n</code></pre>\n\n<p>How do I test with Rhino Mocks setting the _writer as a Mock and want to test that the correct Action was called in the UpdateData method.</p>\n\n<p>I've tried this:</p>\n\n<pre><code>// _writer is setup as a mock\nvar data = new SomeData();\n_wcfServiceSUT.SendData(data);\n_writer.AssertWasCalled(d =&gt; d.UpdateData(x =&gt; x.SendVarData(data));\n</code></pre>\n\n<p>doesn't work.</p>\n\n<p>I can add the:</p>\n\n<p>, p => p.IgnoreArguments() after the UpdateData inside the AssertWasCalled, but that does not give me what I want, to make sure SendVarData was called with the data variable.</p>\n\n<p>I've looked at this:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/6413040/rhino-mocks-how-to-assert-that-an-action-was-called\">Rhino Mocks- How to assert that an action was called</a></p>\n\n<p>but my Action isn't mocked like mockDialogService in his example.</p>\n\n<p>Is there a way to test if an Action or Func was called properly with the right input parameters, etc?</p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12604197,"title":"how to throw IOException while reading a file using Mockito?","body":"<p>I have to throw an <code>IOException</code> using Mockito for a method, which is reading an input stream like given below. Is there any way to do it?</p>\n\n<pre><code>public void someMethod(){\n try{\n  BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));\n  firstLine = in.readLine();\n }catch(IOException ioException){\n  //Do something\n }\n</code></pre>\n\n<p>I tried mocking like</p>\n\n<pre><code>  BufferedReader buffReader = Mockito.mock(BufferedReader.class);\n  Mockito.doThrow(new IOException()).when(buffReader).readLine();\n</code></pre>\n\n<p>but didn't work out :(</p>\n"},{"tags":["oracle","unit-testing","plsql","sql-developer"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":176,"score":2,"question_id":12594478,"title":"Validating a PL/SQL Stored Procedure OUT REF CURSOR in SQL Developer's Unit Testing framework","body":"<p>I am developing a series of PL/SQL Stored Procedures in a package that open REF CURSORs that are passed to the caller as OUT parameters for purposes of interoperability with another framework. I am using SQL Developer and recently started looking into using the testing features built into it.</p>\n\n<p>I am looking for a way to validate the results of a REF CURSOR using SQL Developer's Unit Testing framework. I developed some paging logic, and I want to ensure that it is operating correctly so I was hoping I could verify that I have the correct number of rows and that their row numbers are within the range of the appropriate page.</p>\n\n<p>I found a similar question <a href=\"https://forums.oracle.com/forums/thread.jspa?threadID=2131008\" rel=\"nofollow\">here</a>, but that solution renders the unit tests absolutely useless (at least as far as I can tell) because it doesn't actually perform any validation after running the procedure. If someone could explain how to validate it or show me what I'm missing from the solution from Oracle's Forums, I would appreciate it.</p>\n"},{"tags":["ruby-on-rails","unit-testing","testing","functional-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":12608862,"title":"How to use dom_id on non-saved/mock objects in Rails?","body":"<p><strong>Note: I'm only posting this question so that others may find it if they ever need to, as I have found a good solution.</strong></p>\n\n<p>In my controller tests, I don't want to commit to the database, but I still want the controllers to use finder methods to get mock objects (by mocking the <code>find</code> method), but then I want to use <code>dom_id</code> on those mocks in <code>assert_select</code>, to verify that they're being displayed.</p>\n\n<p>However, since they're non-saved objects, <code>dom_id</code> keeps returning <code>new_object</code> instead of <code>object_1</code>, <code>object_2</code>, et cetera.</p>\n\n<p>Is there any quick way to get it to work? I really don't want to persist real records in tests.</p>\n"},{"tags":["java","unit-testing","xmlunit"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":12606959,"title":"Using RecursiveElementNameAndTextQualifier(XMLUnit)","body":"<p>I need to compare two XML files where both have different order of entities.  </p>\n\n<pre><code> &lt;root&gt; \n  &lt;parent1&gt; \n   &lt;parent2&gt; \n     &lt;value&gt;1&lt;/value&gt;  \n   &lt;/parent2&gt; \n   &lt;parent2&gt; \n    &lt;value&gt;2&lt;/value&gt;  \n   &lt;/parent2&gt; \n  &lt;/parent1&gt;  \n  &lt;parent1&gt; \n   &lt;parent2&gt; \n     &lt;value&gt;3&lt;/value&gt;  \n   &lt;/parent2&gt; \n   &lt;parent2&gt; \n     &lt;value&gt;4&lt;/value&gt;  \n   &lt;/parent2&gt; \n  &lt;/parent1&gt; \n&lt;/root&gt;\n</code></pre>\n\n<p>As in the above example, if I swap the position of 1 and 2 in the other xml file, the test should pass. I am using <code>diff.overrideElementQualifier(new RecursiveElementNameAndTextQualifier())</code> for this purpose but it keeps failing the test!</p>\n\n<p>Could you please advise on what the problem is?</p>\n"},{"tags":["unit-testing","asp.net-web-api","moq","xunit","autofixture"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":66,"score":3,"question_id":12605977,"title":"Autofixture and WebApi Controller","body":"<p>I am using AutoFixture to try to test my controllers for a WebApi site.  I am using the AutoData feature with Moq as noted on <a href=\"http://blog.ploeh.dk/2010/10/08/AutoDataTheoriesWithAutoFixture.aspx\" rel=\"nofollow\">Ploeh's blog</a>.</p>\n\n<p>My controller takes an IDepartmentManager in the constructor.  Here is my test:</p>\n\n<pre><code>[Theory, AutoMoqData]\npublic void GetCallsManagerCorrectly(\n    [Frozen]Mock&lt;IDepartmentManager&gt; departmentManagerMock,\n    DepartmentsController sut)\n{\n    // Fixture setup\n    // Exercise system\n    sut.Get();\n    // Verify outcome\n    departmentManagerMock.Verify(d =&gt; d.GetAllDepartments(), Times.Exactly(1));\n    // Teardown\n}\n</code></pre>\n\n<p>When I run this test it fails with the following:</p>\n\n<blockquote>\n  <p>GetCallsManagerCorrectly has failed:<br>\n  System.InvalidOperationException : An exception was thrown while\n  getting data for theory\n  Provision.Tests.WebApiControllerTests.DepartmentControllerTests.GetCallsManagerCorrectly:\n  System.Reflection.TargetInvocationException: Exception has been thrown\n  by the target of an invocation. ---> System.ArgumentException: Only\n  'http' and 'https' schemes are allowed.   Parameter name: value   at\n  System.Net.Http.HttpRequestMessage.set_RequestUri(Uri value)</p>\n</blockquote>\n\n<p>First of all, is this still a valid and recommended way to write these tests?  I love how small it makes everything.</p>\n\n<p>Secondly, what should I do to fix this?  If I change my test to this:</p>\n\n<pre><code>[Theory, AutoMoqData]\npublic void GetCallsManagerCorrectly(\n    [Frozen]Mock&lt;IDepartmentManager&gt; departmentManagerMock)\n{\n    // Fixture setup\n    DepartmentsController sut =\n        new DepartmentsController(departmentManagerMock.Object);\n    // Exercise system\n    sut.Get();\n    // Verify outcome\n    departmentManagerMock.Verify(d =&gt; d.GetAllDepartments(), Times.Exactly(1));\n    // Teardown\n}\n</code></pre>\n\n<p>it passes, but then I lose the ability to have the controller built up automatically and still be ok if I add parameters to the constructor.</p>\n"},{"tags":["php","unit-testing","testing","constructor","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12606232,"title":"If testing accessors is a waste of time, what about testing the constructor logic?","body":"<p>It seems that many people think that unit testing setters and getters is just a waste of time, and the accessors should be tested only when contain some sort of logic. I agree.</p>\n\n<p>But what about properties that require some (small amout of) logic?</p>\n\n\n\n<pre class=\"lang-php prettyprint-override\"><code>class DeliveryReportEvent extends Event\n{\n    private static $reasonMap = array(\n        '401' =&gt; \"Message expired (device off/not reachable)\",\n        '201' =&gt; \"Operator network malfunctioning\",\n        '203' =&gt; \"Recipient unreachable (in roaming)\",\n        '301' =&gt; \"Invalid recipient (nonexistent/on portability/not enabled)\",\n        '302' =&gt; \"Wrong number\",\n        '303' =&gt; \"SMS service not enabled\",\n    );\n\n    private $errorCode;\n\n    public function __construct($errorCode)\n    {\n        $this-&gt;errorCode = $errorCode;\n\n        if(array_key_exists($errorCode, self::$reasonMap)) {\n            $this-&gt;errorReason = self::$reasonMap;\n        }\n    }\n\n    public function getErrorCode()\n    {\n        return $this-&gt;errorCode;\n    }\n\n    public function getErrorReason()\n    {\n        return $this-&gt;errorReason;\n    }\n}\n</code></pre>\n\n<p>While testing <code>getErrorCode()</code> may sound stupid (because the absence of logic and IDE features), do you thing that testing <code>getErrorReason()</code> makes sense?</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>/**\n * @dataProvider getKnownErrorCodesAndReasons\n */\npublic function testErrorReasonWithKnownErrorCodes($knownErrorCode,\n    $expectedErrorReason)\n{\n    $event = $this-&gt;getMockDeliveryReportEvent($knownErrorCode);\n\n    $actualErrorReason = $event-&gt;getErrorReason();\n\n    $this-&gt;assertNotNull($errorReason);\n    $this-&gt;assertContains($expectedErrorReason, $actualErrorReason, '', true);\n}\n\npublic function getKnownErrorCodesAndReasons()\n{\n    return array(\n        array('401', \"expired\"),\n        array('201', \"network malfunctioning\"),\n        array('203', \"unreachable\"),\n        array('301', \"invalid recipient\"),\n        array('302', \"wrong number\"),\n        array('303', \"not enabled\"),\n    );\n}\n</code></pre>\n"},{"tags":["c#","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":89,"score":2,"question_id":12606214,"title":"Why the test 'Assert.AreEqual' has failed when I compare two empty list?","body":"<p>I have a class MyCustomClass:</p>\n\n<pre><code>public MyCustomClass\n{\n    public MyCustomClass()\n    {\n        MyObject = new List&lt;MyCustomObject&gt;();\n    }\n\n    public List&lt;MyCustomObject&gt; MyObject {get; set;}\n}\n</code></pre>\n\n<p>In the Test:</p>\n\n<pre><code>List&lt;MyCustomObject&gt; aux = new List&lt;MyCustomObject&gt;();\nMyCustomClass oClass = new MyCustomClass();\nAssert.AreEqual(aux, oClass.MyObject)\n</code></pre>\n\n<p>The test has failed, why? Every property, static member, etc are the same.</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1821,"score":4,"question_id":7493102,"title":"PHPUnit: CLI output during test debugging possible?","body":"<p>When running a PHPUnit test, I would like to be able to dump output so I can debug one or two things.</p>\n\n<p>I have tried the following (similar to the <a href=\"http://www.phpunit.de/manual/current/en/fixtures.html#fixtures.examples.TemplateMethodsTest.php\" rel=\"nofollow\">PHPUnit Manual example</a>);</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>class theTest extends PHPUnit_Framework_TestCase\n{\n    /**\n     * @outputBuffering disabled\n     */\n    public function testOutput() {\n        print_r(\"Hello World\");\n        print \"Ping\";\n        echo \"Pong\";\n        $out = \"Foo\";\n        var_dump($out);\n    }   \n}\n</code></pre>\n\n<p>With the following result:</p>\n\n<pre><code>PHPUnit @package_version@ by Sebastian Bergmann.\n\n.\n\nTime: 0 seconds, Memory: 3.00Mb\n\nOK (1 test, 0 assertions)\n</code></pre>\n\n<p>Notice there is none of the expected output.</p>\n\n<p>I'm using the HEAD versions of the <a href=\"https://github.com/sebastianbergmann/phpunit\" rel=\"nofollow\">git repos</a> as of September 19th, 2011.</p>\n\n<p>Output of <code>php -version</code>:</p>\n\n<pre><code>$ php -version\nPHP 5.2.9 (cli) (built: Dec  8 2010 11:36:37) \nCopyright (c) 1997-2009 The PHP Group\nZend Engine v2.2.0, Copyright (c) 1998-2009 Zend Technologies\n    with Xdebug v2.1.0, Copyright (c) 2002-2010, by Derick Rethans\n</code></pre>\n\n<p>Is there anything I'm doing wrong, or is this potentially a PHPUnit bug?</p>\n"},{"tags":["visual-studio-2010","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12599728,"title":"Calling a method twice with different values Unit testing using MOQ","body":"<p>I want to test a construct which calls a method within it twice to get two different values</p>\n\n<pre><code>public class  stubhandler\n{\n\npublic stubhandler()\n{\n\nstring codetext = model.getValueByCode(int a,string b); // 1,\"High\"    result Canada\nstring datatext = model.getValueByCode(int a,string b); // 10, \"Slow\"   result Motion\n\n}\n\n}\n</code></pre>\n\n<p>To test the above i use a unit test class</p>\n\n<pre><code>[TestMethod]\npublic void StubHandlerConstructor_Test()\n{\nMock&lt;Model&gt; objMock = new Mock&lt;&gt;(Model);\nobjMock.Setup(m =&gt; m.getValueByCode(It.IsAny&lt;int&gt;,It.IsAny&lt;string&gt;)).Returns(\"Canada\");\n\nobjMock.Setup(m =&gt; m.getValueByCode(It.IsAny&lt;int&gt;,It.IsAny&lt;string&gt;)).Returns(\"Motion\");\n\nstubhandler  classstubhandler = new stubhandler();\n\n}\n</code></pre>\n\n<p>The above method pass but codetext and datatext contains same value Motion\ni want them to set to </p>\n\n<pre><code>codetext = Canada\ndatatext = Motion\n</code></pre>\n\n<p>How can i achieve this?</p>\n\n<p>I have tried <code>objMock.VerifyAll()</code> which fails the test ??</p>\n"},{"tags":["c#","unit-testing","events","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12605044,"title":"Using Moq to test events that are not in an interface","body":"<p>Is there a way to unit test raising an event with moq if an event that is used in an interface implementation does not appear in the interface you are mocking? </p>\n\n<p>Note: My interface doesn't have anything to do with my UI and my events are just used for UI notifications, so I wanted to decouple that behavior from the actual interface as the repository is in a separate library from the client/UI. </p>\n\n<p>For example:</p>\n\n<pre><code>    [Test]\n    public void TestRaiseBarProcessed()\n    {\n        ManualResetEvent barProcessedEvent = new ManualResetEvent(false);\n        bool called = false;\n\n        //Arrange\n        Mock&lt;IFooRepository&gt; mockFooRepository = new Mock&lt;IFooRepository&gt;();\n\n        mockSourceRepository\n            .Setup(a =&gt; a.SearchForBar(barsToFind))\n            .Returns(barsFound)\n            .Raises(\n                a =&gt; a.BarProcessed += null, \n                new BarFoundEventArgs(It.IsAny&lt;string&gt;()));\n\n        IList&lt;IFooRepository&gt; mockFooRepositories = \n            new List&lt;IFooRepository&gt;();\n\n        mockFooRepositories.Add(mockFooRepository.Object);\n\n        FooBar fooBar = new FooBar(mockFooRepositories, FooList);\n\n        fooBar.CurrentBarBeingProcessedInfo += (sender, e) =&gt;\n            {\n                barProcessedEvent.Set();\n                called = true;\n            };\n\n        //Act\n        fooBar.CallFooRepositoryMethod();\n\n        barProcessedEvent.WaitOne(25, false);\n\n        //Assert\n        mockFooRepository.Verify(\n            a =&gt; a.SearchForBar(barsToFind),\n            Times.Once());\n\n        Assert.AreEqual(true, called);\n    }\n</code></pre>\n\n<p>Let me know if any of this needs more clarification. </p>\n"},{"tags":["javascript","unit-testing","visual-studio-2012","chutzpah"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12604648,"title":"JavaScript test fails in Visual Studio 2012 test explorer but succeeds in resharper","body":"<p>I've come across a very annoying problem writing my JavaScript test for the present project I'm in.</p>\n\n<p>Chutzpah Test Adapter for Visual Studio 2012 is installed (uninstalled and installed once a again)</p>\n\n<p>All other JavaScript tests runs smoothly except one (the reason why I'm asking for help here)</p>\n\n<p>The JavaScript tests succeeded if I run them in Resharper, but when I run them in Visual Studio 2012 test explorer one of them as mentioned above) won't succeed.</p>\n\n<p>I've debugged the whole code, restarted Visual Studio, restarted my computer, deleted my project and downloaded it again from our Team Foundation Server, I also deleted and created new a workspace, but nothing helps, this is really frustrating. I've search all over internet but haven't found anything or anyone who stumbled upon this problem...</p>\n\n<p>the build is fine and the application runs perfectly...</p>\n\n<p>If you have any idea why this one doesn't work, pls let me know!</p>\n"},{"tags":["ios","unit-testing","core-animation","core-graphics","instruments"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12602758,"title":"Automating Core Graphics with Instruments to measure average/max/min FPS when tweaking settings","body":"<p>I'm wondering if there is any way to automate testing my UI when making small changes to see what yields better FPS. When I'm doing the testing myself there are always small discrepencies with each test that could alter my results. I'm talking about trying to squeeze 1-2 fps out of minor, incremental changes.</p>\n\n<p>Is there a way in Instruments or a third-party resource to do any UI automation so that I can get a consistant test to measure average/max/min FPS?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","api","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12597925,"title":"Unit testing Web API consumer module","body":"<p>My code is the consumer of an API (www.abc.com/public/news/apple.json). I get a json array in return which I then parse and populate in my own data structure. the code responsible for doing this is:</p>\n\n<pre><code>    public Map&lt;String,List&lt;NewsItem&gt;&gt; populateNewsArray() throws Exception\n        {\n            url = domain + newsApiStr;\n            InputStream stream = getNews(url, true);\n\n           //jackson library object mapper\n           ObjectMapper mapper = new ObjectMapper();\n\n          //NewsApiObject class implements the structure of the json array returned.\n           List&lt;NewsApiObject&gt; mappedData = mapper.readValue(stream, NewsApiObject.class));\n\n           //populate the properties in a HashMap.\n          //return HashMap\n     }\n\n     public InputStream getNews(String request, boolean bulk) throws Exception\n     {\n        URL url = new URL(request); \n        connection = (HttpURLConnection) url.openConnection();           \n        connection.setDoOutput(true);\n        connection.setInstanceFollowRedirects(false);\n        connection.setRequestMethod(\"GET\"); \n        connection.setRequestProperty(\"Content-Type\", \"text/plain\"); \n        connection.setRequestProperty(\"charset\", \"utf-8\");\n        connection.connect();\n\n        return connection.getInputStream();\n     }\n</code></pre>\n\n<p>As you can see I am not the controller of the api, only the consumer. It is said that in unit tests, one is not suppose to make http requests. In this scenario, how can I unit test the populateNewsArray() function to see if the object mapping was correct (without any exceptions) and a valid hashmap was returned? </p>\n"},{"tags":["sql-server","unit-testing","tsqlt"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":12600488,"title":"tsqlt error handling trumping stored procedure (unit) error handler","body":"<p>When trying to validate a user supplied GUID within a stored procedure a simple approach was used; take the user input as a CHAR(36) then explicitly CAST it as a UNIQUEIDENTIFIER within a TRY CATCH. The CATCH then bubbles the error with a custom error description using a RAISERROR.</p>\n\n<p>Running the stored procedure manually everything performs as expected and the error is raised.</p>\n\n<p>Create a tSQLt test to call the unit (the procedure with GUID validation) and handle the error that is output and compare with the expected error continually fails with a transaction error; tSQLt has detected an error and handled within the tSQLt framework.</p>\n\n<p>This suggests to me that the severity of a failure to CAST to a different datatype is being handled by tSQLt and it is preventing the TRY/CATCH within the stored procedure to handle it. Much like nested procedures sometimes ignore the TRY/CATCH within the child procedure and bubble up to the parent procedure; example being if the child proc. references a table that doesn't exist.</p>\n\n<p>Has anyone had a similar issue? Just simply to validate my current line of thinking.</p>\n\n<p>I've removed the test and it's being tested elsewhere, but this has caused me a 'hole' it my DB unit tests.</p>\n\n<p>Finally, I think I should mention that I know I can perform a different validation on a supplied CHAR parameter, other than a CAST, and raise an error that way, but this is a tSQLt query and not a tSQL query.</p>\n\n<p>EDIT</p>\n\n<p>Example of the code:</p>\n\n<p>@sGUID is a CHAR(36) and is a parameter passed to the procedure.</p>\n\n<pre><code>BEGIN TRY\n    SELECT CAST(@sGUID AS UNIQUEIDENTIFIER)\nEND TRY \nBEGIN CATCH\n    RAISERROR('Invalid GUID format',16,1)\nEND CATCH\n</code></pre>\n\n<p>The SELECT line never triggers the CATCH tSQLt appears to intervene before hand and throws the ROLLBACK transaction error.</p>\n"},{"tags":["c#","unit-testing","nunit","mocking"],"answer_count":11,"favorite_count":11,"up_vote_count":22,"down_vote_count":0,"view_count":14666,"score":22,"question_id":489819,"title":"Unit test HttpContext.Current.Cache or other server-side methods in C#?","body":"<p>When creating a unit test for a class that uses the <a href=\"http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx\"><code>HttpContext.Current.Cache</code> class</a>, I get an error when using NUnit.  The functionality is basic - check if an item is in the cache, and if not, create it and put it in:</p>\n\n<pre><code>if (HttpContext.Current.Cache[\"Some_Key\"] == null) {\n    myObject = new Object();\n    HttpContext.Current.Cache.Insert(\"Some_Key\", myObject);\n}\nelse {\n    myObject = HttpContext.Current.Cache.Get(\"Some_Key\");\n}\n</code></pre>\n\n<p>When calling this from a unit test, it fails with at <code>NullReferenceException</code> when encountering the first <code>Cache</code> line.  In Java, I would use <a href=\"http://jakarta.apache.org/cactus/index.html\">Cactus</a> to test server-side code.  Is there a similar tool I can use for C# code?  <a href=\"http://stackoverflow.com/questions/244280/creating-a-system-web-cachcing-cache-object-in-a-unit-test\">This SO question</a> mentions mock frameworks - is this the only way I can test these methods?  Is there a similar tool to run tests for C#?</p>\n\n<p>Also, I don't check if the <code>Cache</code> is null as I don't want to write code specifically for the unit test and assume it will always be valid when running on a server.  Is this valid, or should I add null checks around the cache?</p>\n"},{"tags":["php","unit-testing","symfony2","mocking","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12599957,"title":"Undefined method on mock object implementing a given interface in PHPUnit?","body":"<p>I'm new to unit testing and PHPUnit.</p>\n\n<p>I need a mock, on which I have a full control, implementing <code>ConfigurationInterface</code> interface. Test subject is <code>ReportEventParamConverter</code> object and test must check the interaction between my object and the interface.</p>\n\n<p><code>ReportEventParamConverter</code> object (here simplified):</p>\n\n\n\n<pre class=\"lang-php prettyprint-override\"><code>class ReportEventParamConverter implements ParamConverterInterface\n{\n    /**\n     * @param Request $request\n     * @param ConfigurationInterface $configuration\n     */\n    function apply(Request $request, ConfigurationInterface $configuration)\n    {\n        $request-&gt;attributes-&gt;set($configuration-&gt;getName(), $reportEvent);\n    }\n\n    /**\n     * @param ConfigurationInterface $configuration\n     * @return bool\n     */\n    function supports(ConfigurationInterface $configuration)\n    {\n        return 'My\\Namespaced\\Class' === $configuration-&gt;getClass();\n    }\n}\n</code></pre>\n\n<p>And this is the way I'm trying to mock the interface:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>$cls = 'Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\ConfigurationInterface';\n$mock = $this-&gt;getMock($mockCls);\n</code></pre>\n\n<p>I need to simulate the returned values for two methods: <code>getClass()</code> and <code>getName()</code>. For example:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>$mock-&gt;expects($this-&gt;any())\n    -&gt;method('getClass')\n    -&gt;will($this-&gt;returnValue('Some\\Other\\Class'))\n;\n</code></pre>\n\n<p>When i create a new <code>ReportEventParamConverter</code> and test <code>supports()</code> method, i get the following PHPUnit error:</p>\n\n<blockquote>\n  <p>Fatal error: Call to undefined method\n  Mock_ConfigurationInterface_21e9dccf::getClass().</p>\n</blockquote>\n\n<pre class=\"lang-php prettyprint-override\"><code>$converter = new ReportEventParamConverter();\n$this-&gt;assertFalse($converter-&gt;supports($mock));\n</code></pre>\n"},{"tags":["ios","xcode","unit-testing"],"answer_count":3,"favorite_count":5,"up_vote_count":16,"down_vote_count":0,"view_count":2635,"score":16,"question_id":6302362,"title":"xcode 4 fails to initiate unit tests (with linker error) after I created a new scheme","body":"<p>My unit tests worked fine in xcode4 until I had to create a new schema to compile a package to run on my device for testing. </p>\n\n<p>All I did was creating  a new Target and a new Scheme, now I try to run the unit tests and get the following error: </p>\n\n<p><strong>The test bundle at [...]Tests.octest could not be loaded because a link error occurred.  It is likely that dyld cannot locate a framework framework or library that the the test bundle was linked against, possibly because the framework or library had an incorrect install path at link time.</strong></p>\n\n<p>What did I break?</p>\n"},{"tags":["asp.net-mvc","unit-testing","httpwebrequest","nunit","rhino-mocks"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12600118,"title":"Unit testing using multiple Http Requests vs multiple threads","body":"<p><strong>Summary</strong>:<br>\nI want to be able to mimic multiple Http Requests in my Unit Tests (as opposed to multiple threads).  </p>\n\n<p><strong>Detail</strong>:<br>\nI had a TCP client that had been held in the web cache - the problem was that when one Web Request finished it cleaned up it's resources, and closed/disposed the TCP client's connection.  Another Request was using the same instance of the TCP client and therefore threw an exception because it had been disposed.</p>\n\n<p>I therefore moved the TCP Client into the HttpContext's Current Items collection (which is \"Request Safe\").  I now want to create some unit tests to show that when one Request finishes it does NOT affect the TCP client being used by the other Request.</p>\n\n<p>If my Unit test spawns different worker threads, then these effectively operate in the same request, not different requests.  Any ideas on how best to approach this?</p>\n\n<p>Thanks</p>\n\n<p>Griff</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12597432,"title":"PHPUnit - Running all tests twice with cache on/off?","body":"<p>I'd like to make sure my code always works as intended whether a memcached server is available or not.</p>\n\n<p>Most of my functions look like this:</p>\n\n<pre><code>function foo($parameter,$force = FALSE)\n{\n    $result = Cache::get('foo_'.$parameter);\n\n    if (empty($result) || $force)\n    {\n        // Do stuff with the DB...\n        $result = \"something\";\n        Cache::put('foo_'.$parameter,$result,$timeout);\n    }\n\n    return $result;\n}\n</code></pre>\n\n<p>Now in a TestCase I'm doing this:</p>\n\n<pre><code>class MyClassTest extends PHPUnit_Framework_TestCase {\n    function testFoo()\n    {\n        $result = MyClass-&gt;foo($parameter);\n        $this-&gt;assertSomething($result);\n    }\n}\n</code></pre>\n\n<p>I can disable caches globally during PHPUnit's <code>setUp()</code> like this:</p>\n\n<pre><code>class MyClassTest extends PHPUnit_Framework_TestCase {\n\n    protected function setUp()\n    {\n        Cache-&gt;disable();\n    }\n}\n</code></pre>\n\n<p>After calling <code>Cache-&gt;disable()</code>, all calls to <code>Cache-&gt;get()</code> will return <code>false</code> during that request. Now, I want to run all tests in this class twice, once with <code>Cache-&gt;disable();</code> and once without.</p>\n\n<p>Any ideas on how to do that?</p>\n"},{"tags":["eclipse","unit-testing","cppunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":12579483,"title":"How to let eclipse ignore specific sub-folder","body":"<p>I'm not familiar with eclipse. I have a question as this topic title. The scenario is that I want create a sub-folder \"test\" (for unit test) in folder src. But after the creation of folder \"test\", eclipse will automatically add this \"test\" folder and its content to current project. This leads to an error of multiple definition of \"main\" function because under \"test\" folder there is also a cpp file that contains main function. What I want is that put the \"test\" folder in src folder but this folder is not belong to current project, this means that when I compile current project the files under \"test\" won't be compiled (There is another test project do this). Anybody know? Thank you in advance!</p>\n"},{"tags":["python","unit-testing","python-3.x","arguments","software-design"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":82,"score":4,"question_id":12576724,"title":"file name vs file object as a function argument","body":"<p>If a function takes as an input the name of a text file, I can refactor it to instead take a file object (I call it \"stream\"; is there a better word?). The advantages are obvious - a function that takes a stream as an argument is:</p>\n\n<ul>\n<li>much easier to write a unit test for, since I don't need to create a temporary file just for the test</li>\n<li>more flexible, since I can use it in situations where I somehow already have the contents of the file in a variable</li>\n</ul>\n\n<p>Are there any disadvantages to streams? Or should I always refactor a function from a file name argument to a stream argument (assuming, of course, the file is text-only)?</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":12598551,"title":"How to check the data are entered into 3rd party website using unit test?","body":"<p>I am using MVC application for my website. In my website i am pushing some information to 3rd party website from my website. Can we check whether the data are entered into 3rd party website or not using unit tests?</p>\n\n<p>Also can we check the data are entered in to my own database using unit tests?</p>\n"},{"tags":["database","visual-studio","unit-testing","options","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12598274,"title":"\"Create Unit Test\" option greyed out in Visual Studio Premium 2010","body":"<p>Unitll couple of days before, every thing was working and today \"Create Unit Test\" option in the Database schema view is greyed out. I have checked all the references and are in place properly. Any suggestions please?</p>\n"},{"tags":["unit-testing","maven","jenkins","sonar"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":12598086,"title":"Unit test results not showing in Sonar when building child projects in Jenkins","body":"<p>I have some maven projects configured in Jenkins, and I execute them from a parent project (which have them as <code>&lt;modules</code>> in its pom.xml, the children have this project defined as <code>&lt;parent</code>>). </p>\n\n<p>The unit tests execute successfully for each project in Jenkins and it shows the results, but then in Sonar all projects appear as having no unit tests.</p>\n\n<p>The sonar configuration for each project is</p>\n\n<pre><code>sonar.projectKey=project:key\nsonar.projectName=project_name\nsonar.projectVersion=1.0\nsources=src/main/java\ntests=src/test/java\nbinaries=target/classes\n</code></pre>\n\n<p>Do I have to do anything else in order for Sonar to pick up the results of the unit tests being executed?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing","fitnesse","fitsharp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12578554,"title":"FitNesse value comparison fails even though the actual and expected is the same","body":"<p>I run a function in SQL Server that returns some calculated values. When testing the results in FitNesse using dbFit it claims that the values are not the same (see the screenshot below). </p>\n\n<p>The values are returned as floats and fails on the comparison of all decimals - even though it only displays two. Is there a way to limit the range of decimals that gets compared?</p>\n\n<p><img src=\"http://i.stack.imgur.com/ZXij6.png\" alt=\"FitNesse values that are mismatched\"></p>\n"},{"tags":["java","unit-testing","hudson","testng","sonar"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12588917,"title":"Is there an way to get an accurate count of testng tests via Sonar or Hudson?","body":"<p>Hudson and/or Sonar seem to report the number of test invocations, but not the number of tests.</p>\n\n<p>So if you have </p>\n\n<pre><code>@Test(invocationCount=1000)\ntestFoo() {}\n</code></pre>\n\n<p>Both hudson and sonar will say there are 1000 tests when there really is only one.  Other than wc'ing the number of @Test tags, is there a way to see this value?</p>\n"},{"tags":["c#","unit-testing","mocking","ews","exchangewebservices"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12563499,"title":"Best Strategy for Testing Exchange Web Services API","body":"<p>I'm developing a new C# 3.5 app that needs to monitor an Exchange mailbox and perform some operations when emails are received. I'm aware that Microsoft now <a href=\"http://msdn.microsoft.com/en-us/library/exchange/bb204040%28v=exchg.140%29.aspx\" rel=\"nofollow\">recommends</a> using Exchange Web Services to perform operations on Exchange servers so I've decided to use that.</p>\n\n<p>I also found the <a href=\"http://msdn.microsoft.com/en-us/library/dd633709%28v=exchg.80%29.aspx\" rel=\"nofollow\">Exchange Web Services Managed API</a> (using version 1.2.1) which definitely seems to make the task of calling these web services much easier.</p>\n\n<p>My question is, does anyone have any experience in creating automated unit/integration tests using the Managed API? </p>\n\n<p>At the moment I have no Exchange server so really I'd like to create some kind of mock (I usually use Moq) but <code>Microsoft.Exchange.WebServices.Data.ExchangeService</code> doesn't implement any kind of interface that I can mock. My code is all coded to interface and designed for dependency injection, but I can't think of a good way to abstract out the EWS API dependency.</p>\n"},{"tags":["unit-testing","lambda","rhino-mocks"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12595972,"title":"RhinoMocks and Lambda Expression","body":"<p>With the interface below:</p>\n\n<pre><code>public interface IRepository&lt;T&gt;\n{\n    T FirstOrDefault(Func&lt;T, bool&gt; predicate);\n}\n</code></pre>\n\n<p>Implemented like so:</p>\n\n<pre><code>private IRepository&lt;Foo&gt; Repository {get;set;}\npublic FooService(IRepository&lt;Foo&gt; repository)\n{\n    Repository = repository;\n}    \n\npublic void Foo(int bar)\n{\n    var result = Repository.FirstOrDefault(x =&gt; x.Id.Equals(bar));\n    if (result == null)\n    {\n        throw new Exception(\"Returned null, not what I expected!\");\n    }\n}\n</code></pre>\n\n<p>If I write a test like this:</p>\n\n<pre><code>repos = MockRepository.GenerateMock&lt;IRepository&lt;Foo&gt;&gt;(null);\nrepos.Expect(x =&gt; x.FirstOrDefault(y =&gt; y.Id.Equals(Arg&lt;int&gt;.Is.Anything))).Throw(new Exception(\"This exception should be thrown!\"));\n\nFooService f = new FooService(repos);\nf.Foo(1);\n//expecting exception to be thrown\n</code></pre>\n\n<p>I do not get the expected exception thrown, so I am presuming that mocked call is being ignored/not called.</p>\n\n<p>However if I add <code>IgnoreArguments()</code> it <em>is</em> called and I do get the expected exception.</p>\n\n<pre><code>repos.Expect(x =&gt; x.FirstOrDefault(y =&gt; y.Id.Equals(Arg&lt;int&gt;.Is.Anything))).IgnoreArguments().Throw(new Exception(\"This exception should be thrown!\"));\n</code></pre>\n\n<p>Any thoughts as to what it is I am doing wrong?</p>\n"},{"tags":["php","unit-testing","zend-framework","dependency-injection","phpunit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":262,"score":2,"question_id":6273541,"title":"How to inject mock classes into controllers (without having the controller aware of the tests)","body":"<p>This is a follow-on from a previous question I had: <a href=\"http://stackoverflow.com/questions/6222001/how-to-decouple-my-data-layer-better-and-restrict-the-scope-of-my-unit-tests\">How to decouple my data layer better and restrict the scope of my unit tests?</a></p>\n\n<p>I've read around on Zend and DI/IoC and came up with the following changes to my code:</p>\n\n<p><strong>Module Bootstrap</strong></p>\n\n<pre><code>class Api_Bootstrap extends Zend_Application_Module_Bootstrap\n{\n    protected function _initAllowedMethods()\n    {\n        $front = Zend_Controller_Front::getInstance();\n        $front-&gt;setParam('api_allowedMethods', array('POST'));\n    }\n\n    protected function _initResourceLoader()\n    {\n        $resourceLoader = $this-&gt;getResourceLoader();\n        $resourceLoader-&gt;addResourceType('actionhelper', 'controllers/helpers', 'Controller_Action_Helper');\n    }\n\n    protected function _initActionHelpers()\n    {\n        Zend_Controller_Action_HelperBroker::addHelper(new Api_Controller_Action_Helper_Model());\n    }\n}\n</code></pre>\n\n<p><strong>Action Helper</strong></p>\n\n<pre><code>class Api_Controller_Action_Helper_Model extends Zend_Controller_Action_Helper_Abstract\n{\n    public function preDispatch()\n    {\n        if ($this-&gt;_actionController-&gt;getRequest()-&gt;getModuleName() != 'api') {\n            return;\n        }\n\n        $this-&gt;_actionController-&gt;addMapper('account', new Application_Model_Mapper_Account());\n        $this-&gt;_actionController-&gt;addMapper('product', new Application_Model_Mapper_Product());\n        $this-&gt;_actionController-&gt;addMapper('subscription', new Application_Model_Mapper_Subscription());\n    }\n}\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class Api_AuthController extends AMH_Controller\n{\n    protected $_mappers = array();\n\n    public function addMapper($name, $mapper)\n    {\n        $this-&gt;_mappers[$name] = $mapper;\n    }\n\n    public function validateUserAction()\n    {\n        // stuff\n\n        $accounts = $this-&gt;_mappers['account']-&gt;find(array('username' =&gt; $username, 'password' =&gt; $password));\n\n        // stuff\n    }\n}\n</code></pre>\n\n<p>So, now, the controller doesn't care what specific classes the mappers are - so long as there is a mapper...</p>\n\n<p>But <strong>how do I now replace those classes with mocks for unit-testing without making the application/controller aware that it is being tested?</strong> All I can think of is putting something in the action helper to detect the current application enviroment and load the mocks directly:</p>\n\n<pre><code>class Api_Controller_Action_Helper_Model extends Zend_Controller_Action_Helper_Abstract\n{\n    public function preDispatch()\n    {\n        if ($this-&gt;_actionController-&gt;getRequest()-&gt;getModuleName() != 'api') {\n            return;\n        }\n\n        if (APPLICATION_ENV != 'testing') {\n            $this-&gt;_actionController-&gt;addMapper('account', new Application_Model_Mapper_Account());\n            $this-&gt;_actionController-&gt;addMapper('product', new Application_Model_Mapper_Product());\n            $this-&gt;_actionController-&gt;addMapper('subscription', new Application_Model_Mapper_Subscription());\n        } else {\n            $this-&gt;_actionController-&gt;addMapper('account', new Application_Model_Mapper_AccountMock());\n            $this-&gt;_actionController-&gt;addMapper('product', new Application_Model_Mapper_ProductMock());\n            $this-&gt;_actionController-&gt;addMapper('subscription', new Application_Model_Mapper_SubscriptionMock());\n        }\n    }\n}\n</code></pre>\n\n<p>This just seems wrong...</p>\n"},{"tags":["javascript","unit-testing","node.js"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":12595325,"title":"JavaScript unit tests: where to keep test/specs files (Client and Node)","body":"<p>Is it ok to store test file in the location of module itself:</p>\n\n<p>Lets say I have a structure:</p>\n\n<pre><code>project\\\n  module1\\\n    submodule\\\n       submodule.js\n       submodule.test.js\n</code></pre>\n\n<p>Or it is better to make a separate location that will repeat the structure of the project:</p>\n\n<pre><code>project\\\n  module1\\\n    submodule\\\n       submodule.js\ntests\\\n  module1\\\n    submodule\\\n       submodule.js\n</code></pre>\n\n<p>I've seen both variants. What considerations should be taken?</p>\n"},{"tags":["c#","unit-testing","visual-studio-2012","class-library"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":258,"score":2,"question_id":12594018,"title":"Cannot debug a unit testing project in Visual Studio 2012","body":"<p>I couldn't find a post similar to this, so I hope this isn't a duplicate. </p>\n\n<p>I have a c# class library that I'm trying to run unit tests on in Visual Studio 2012. I've added a new Unit Test Project to my solution, and added my main project as a reference there. I've set my unit test project as the Startup Project. When I try to debug, I get an error message </p>\n\n<p>\"A project with an Output Type of Class Library cannot be started directly. In order to debug this project, add an executable project to this solution which references the library project. Set the executable project as the startup project.\"</p>\n\n<p>According to the walkthrough at <a href=\"http://msdn.microsoft.com/en-us/library/ms182532.aspx\" rel=\"nofollow\">msdn</a>, it should be running the tests when I hit debug. Any thoughts? Here is my unit test code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\n\nusing Microsoft.VisualStudio.TestTools.UnitTesting;\nusing Common;\nusing Messages;\n\nnamespace MessageUnitTests\n{\n    [TestClass]\n    class RegistrationTester\n    {\n        [TestMethod]\n        public void RegistrationRequest_TestConstructorsAndFactories()\n        {\n            RegistrationRequest rr1 = new RegistrationRequest(\"myhandle\");\n            Assert.AreEqual(\"myhandle\", rr1.Handle);\n\n            rr1 = new RegistrationRequest(\"longHandle-ABCDEFGHIJKLMNOPQRSTUVWXYZ-0123456789'|;:',.=-_+!@#$%^&amp;*()\");\n            Assert.AreEqual(\"longHandle-ABCDEFGHIJKLMNOPQRSTUVWXYZ-0123456789'|;:',.=-_+!@#$%^&amp;*()\", rr1.Handle);\n\n            rr1 = new RegistrationRequest(\"\");\n            Assert.AreEqual(\"\", rr1.Handle);\n\n            rr1 = new RegistrationRequest(null);\n            Assert.AreEqual(null, rr1.Handle);\n\n            rr1 = new RegistrationRequest(\"myhandle\");\n            ByteList bytes = new ByteList();\n            rr1.Encode(bytes);\n\n            RegistrationRequest rr2 = RegistrationRequest.Create(bytes);\n            Assert.IsNotNull(rr2);\n            Assert.AreEqual(rr1.IsARequest, rr2.IsARequest);\n            Assert.AreEqual(rr1.MessageNr.ProcessId, rr2.MessageNr.ProcessId);\n            Assert.AreEqual(rr1.MessageNr.SeqNumber, rr2.MessageNr.SeqNumber);\n            Assert.AreEqual(rr1.ConversationId.ProcessId, rr2.ConversationId.ProcessId);\n            Assert.AreEqual(rr1.ConversationId.SeqNumber, rr2.ConversationId.SeqNumber);\n            Assert.AreEqual(rr1.RequestType, rr2.RequestType);\n            Assert.AreEqual(rr1.SessionId, rr1.SessionId);\n            Assert.AreEqual(rr1.Handle, rr2.Handle);\n        }\n\n        //[TestMethod]\n        //public void RegistrationRequest_EncodingDecoding()\n        //{\n        //    Message m1 = new RegistrationRequest(\"myhandle\");\n        //    m1.MessageNr = MessageNumber.Create(10, 14);\n        //    m1.ConversationId = MessageNumber.Create(10, 12);\n        //    ByteList bytes = new ByteList\n        //}\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","dependency-injection","requirejs","jasmine","testr.js"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":127,"score":4,"question_id":12519470,"title":"JavaScript dependency injection using RequireJS, Jasmine and testr","body":"<p>I've just looking for dependency injection in my unit test strategy using RequireJS and Jasmine. I really like the idea behind <a href=\"https://github.com/mattfysh/testr.js\" rel=\"nofollow\">testr</a> and I have tried to setup testr following the examples in github but I can't figure out what is wrong. I always get the error</p>\n\n<blockquote>\n  <p>Error: module has not been loaded: <strong>today</strong></p>\n</blockquote>\n\n<p>when testr tries to load the module that is going to be tested.</p>\n\n<p>Here some context..</p>\n\n<p><strong>index.html</strong>\n..</p>\n\n<pre><code>&lt;script data-main=\"config\" src=\"../../assets/js/libs/require.js\"&gt;&lt;/script&gt;\n&lt;script src=\"vendor/testr.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p><strong>config.js</strong>\n..</p>\n\n<pre><code>require.config({\n\n  // Initialize specs.\n  deps:[\"main\"],\n...\n...\n});\n</code></pre>\n\n<p><strong>main.js</strong>\n..</p>\n\n<pre><code>require([\n  // Load the example spec, replace this and add your own spec\n  \"spec/today\"\n], function() {\n  var jasmineEnv = jasmine.getEnv();\n  jasmineEnv.execute();\n});\n</code></pre>\n\n<p><strong>spec\\today.js</strong>\n..</p>\n\n<pre><code>describe('Today print', function() {\n  var date = {}, today;\n  beforeEach(function() {\n     date.today = new Date(2012, 3, 30);\n     today = testr('today', {'util/date': date});  //Here is where the error is thrown\n  });\n\n  it('is user-friendly', function() {\n     expect(today.getDateString()).toBe('Today is Monday, 30th April, 2012');\n  });\n});\n</code></pre>\n\n<p><strong>today.js</strong>\n.. </p>\n\n<pre><code>define(['string', 'util/date'], function(string, date) {\n  return {\n    getDateString: function() {\n      return string.format('Today is %d', date.today);\n    }\n  }\n});\n</code></pre>\n\n<p>Is there anybody that have been with the same kind of trouble? . I'm using RequireJS 2.0.6</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","unit-testing","discover"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12591832,"title":"python unittest discover","body":"<p>I don't understand something, with the python unittest discover.\nI made this project:</p>\n\n<pre><code>project/\n    __init__.py\n    src/\n        __init__.py\n        criteria.py\n    tests/\n        __init__.py\n        criteria_test.py\n</code></pre>\n\n<p>And to be able to know if I loaded the test correctly I ensure myself to make it fail with the code below</p>\n\n<pre><code># coding: utf-8\nimport unittest\n\nclass TestCriteria(unittest.TestCase):\n    def setUp(self):\n        pass\n    def test_criteriaFailure(self):\n        self.assertTrue(False)\n</code></pre>\n\n<p>When I do the command in the command-line, I'm at the file project (the root of my packages), I guess everything can be imported.</p>\n\n<p>I tried:</p>\n\n<pre><code>python -m unittest discover\npython -m unittest discover -s tests -p '*_test.py'\n</code></pre>\n\n<p>but it always return me this output:</p>\n\n<pre><code>Ran 0 tests in 0.000s\n\nOk\n</code></pre>\n\n<p>I'd like to understand how to use this feature (I'm using python3.2.3) without having to download and install Nose. </p>\n\n<p>Thanks you</p>\n"},{"tags":["android","unit-testing","applicationcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12590048,"title":"Android Unit Test, context is passed between activities in tests","body":"<p>I want to run a number of unit tests on a clean instance of my application and thought I could do that by creating an instance with getActivity and finish it at the end of the test. However, I noticed that the actions in the previous test had effect on the next one. I wrote the following simple application to reproduce the issue.</p>\n\n<p>The test setup shows a number of tests where I get the activity and finish it in each test. During the creation of the activity a counter is incremented in the onCreate. I expect that it is 1 at all 3 tests but I see that it is 3 at the latest test. Somehow the context is reused.</p>\n\n<p>Can somebody explain and show how I can test an application from scratch in each test?</p>\n\n<pre><code>import com.example.activitykeepscontext.MainActivity;\n\npublic class MainActivityTest  extends ActivityInstrumentationTestCase2&lt;MainActivity&gt; {\n\n   public MainActivityTest() {\n        super(\"com.example.activitykeepscontext\", MainActivity.class);\n    }\n\n   public void testCount1() {\n       MainActivity mainActivity = getActivity();\n       mainActivity.finish();\n   }\n\n   public void testCount2() {\n       MainActivity mainActivity = getActivity();\n       mainActivity.finish();\n   }\n\n   public void testCount3() {\n       MainActivity mainActivity = getActivity();\n       mainActivity.finish();\n   }\n\n}\n</code></pre>\n\n<p>This is the application:</p>\n\n<pre><code>package com.example.activitykeepscontext;\n\nimport android.os.Bundle;\nimport android.app.Activity;\nimport android.content.Context;\nimport android.util.Log;\nimport android.view.Menu;\n\npublic class MainActivity extends Activity {\n\n    private static final String TAG = \"MainActivity\";\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        AppData appData = (AppData)getApplicationContext();\n        appData.count++;\n\n        Log.i(TAG, \"Count: \" + appData.count);\n    }\n}\n</code></pre>\n\n<p>and this is the class used to pass the data via the application context.</p>\n\n<pre><code>package com.example.activitykeepscontext;\n\nimport android.app.Application;\n\npublic class AppData  extends Application {\n    public int count;\n}\n</code></pre>\n"},{"tags":["unit-testing","nunit","resharper"],"answer_count":2,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":1648,"score":10,"question_id":1479075,"title":"ReSharper Unit Test Runner - TestCase","body":"<p>I like using the ReSharper unit test runner, but it doesn't support the TestCase attribute that was added in NUnit 2.5. Is there any hack to get round this?</p>\n\n<p>I can obviously use another test runner, but I like the ReSharper one.</p>\n"},{"tags":["c++","unit-testing","winrt","visual-studio-2012","c++-cx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":156,"score":0,"question_id":12581714,"title":"Why my C++/CX unit-test does not fail?","body":"<p>I have the following \"Windows Store/Metro Style\" test methods in VS 2012 C++/CX</p>\n\n<p>This one succeeds, which is ok</p>\n\n<pre><code>TEST_METHOD(TestMethod)\n{\n    bool passed = false;\n    concurrency::event finished;\n    finished.reset();                                   \n    auto testTask = concurrency::create_task( [&amp;finished, &amp;passed]()\n    {   \n        passed = true;\n        finished.set();\n    }); \n    finished.wait(100000);\n    Assert::IsTrue(passed);\n}\n</code></pre>\n\n<p>This one fails, which is also ok:</p>\n\n<pre><code>TEST_METHOD(TestMethod)\n{\n    bool passed = true;\n    concurrency::event finished;\n    finished.reset();                                   \n    auto testTask = concurrency::create_task( [&amp;finished, &amp;passed]()\n    {   \n        passed = false;\n        finished.set();\n    }); \n    finished.wait(100000);\n    Assert::IsTrue(passed);\n}\n</code></pre>\n\n<p>But for some reason, this test does not fail:</p>\n\n<pre><code>TEST_METHOD(FailedTest)\n{\n    concurrency::event finished;\n    finished.reset();                                   \n    auto testTask = concurrency::create_task( [&amp;finished]()\n    {   \n        Assert::IsTrue(false);\n        finished.set();\n    });\n    finished.wait(100000);          \n}\n</code></pre>\n\n<p>Am I doing something wrong?</p>\n\n<p>As a side note, a possible work-around could be to put all the results of my tests in variables and \"test\" them all after <code>finished.wait(100000);</code>, but I still would like to know if there is something actually wrong whit what I am doing.</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","asp.net-mvc-4","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":137,"score":1,"question_id":12587108,"title":"How do you set ApiController.User","body":"<p>In my apicontroller I use base.user to identify the authenticated user to use in a lookup.  Now I am writing a unit test for this but I cannot figure out how to mock apicontroller.user.  Do I need to create a request and set the user there?  Or is there another way to set the controller.user?</p>\n\n<p>Here is my controller; I have already mocked repository and membershipservice.</p>\n\n<pre><code>[Authorize]\npublic class DocumentController : ApiController\n{\n    DocumentRepository _repository;\n    IStaticMembershipService _membership;\n\n\n    public IEnumerable&lt;Document&gt; GetDocuments()\n    {\n\n        MembershipUser userAccount = _membership.GetUser(base.User);\n        IEnumerable&lt;Document&gt; docs = null;\n\n        if (userAccount != null)\n        {\n            docs = _repository.GetDocumentsByUserId((Guid)userAccount.ProviderUserKey);\n        }\n\n        return docs;\n    }\n</code></pre>\n\n<p>Here is my unit test:</p>\n\n<pre><code>[TestClass]\npublic class DocumentControllerWebService\n{\n    private DocumentsContext _context;\n    private DocumentRepository _repository;\n    private DocumentController _controller;\n    private FakeMembershipService _membership;\n    private TestContext testContextInstance;\n\n    [TestInitialize]\n    public void MyTestInitialize()\n    {\n        // Create a context with a fake data set provider\n        _context = new DocumentsContext(new FakeDbSetProvider());\n\n        _repository = new DocumentRepository(_context);\n\n        _membership = new FakeMembershipService();\n\n        _controller = new DocumentController(_repository, _membership);\n\n    }\n\n    public void GetDocumentsTest()\n    {\n\n        string userName = \"someUser\";\n\n        MembershipUser userAccount = _membership.GetUser(userName);\n\n        Guid userId = (Guid)userAccount.ProviderUserKey;\n        Guid anotherUserId = Guid.NewGuid();\n\n        // Get some dummy data and insert it into the fake repository\n        List&lt;Document&gt; forms = DocumentDummyData.GetListOfDummyData(userId, anotherUserId);\n        forms.ForEach(f =&gt; _repository.InsertDocument(f));\n\n        // I would like to do this but User is readonly\n        _controller.User = userName;\n\n        List&lt;Document&gt; docs = _controller.GetDocuments().ToList();\n        foreach (Document expected in forms.Where(d =&gt; d.UserId == userId))\n        {\n            Document actual = docs.Where(d =&gt; d.DocumentID == expected.DocumentID).FirstOrDefault();\n            Assert.IsNotNull(actual);\n            Assert.AreEqual(expected.DocumentID, actual.DocumentID);\n        }\n\n\n    }\n</code></pre>\n\n<p>}</p>\n"},{"tags":["asp.net-mvc-3","sql-server-2008","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12584729,"title":"C# test project Wipe database before the tests are run","body":"<p>I have a ASP.NET MVC3 application, where i need to test a database wrapper class. This is up and running. But i need to recreate the database, when the test starts. I need to wipe all data in database. The database is a test double.</p>\n\n<p>I have the SQL script creating the database. For now im running this manualy in \"SQL Server Manager\" and it works. But I would like to have the script run before a new test run.</p>\n\n<p>Anyone know how to do this?</p>\n"},{"tags":["unit-testing","batch-file","automated-tests"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":165,"score":5,"question_id":6612415,"title":"Is there a unit-test framework for Windows batch files?","body":"<p>I need just something very simple like \"run this command and succeed if there is 'this string' somewhere in the console output, fail otherwise\". Is there such a tool?</p>\n"},{"tags":[".net","wcf","unit-testing","mocking","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":582,"score":0,"question_id":4149982,"title":"Mocking WCF client's IQueryable members","body":"<p>I have a WCF data service that exposes interfaces:</p>\n\n<pre><code>public interface IAccountService\n{\n    IQueryable&lt;Account&gt; Accounts { get; }\n    IQueryable&lt;Contract&gt; Contracts { get; }\n}\n\n[DataServiceKey(\"ID\")]\npublic class Account\n{\n    public virtual Guid ID { get; set; }\n    public virtual string AccountName { get; set; }\n    public virtual string Address1 { get; set; }\n    public virtual string Address2 { get; set; }\n    public virtual string City { get; set; }\n    public virtual string State { get; set; }\n    public virtual string Zip { get; set; }\n    public virtual string Phone { get; set; }\n    public virtual string Fax { get; set; }\n    public virtual string Status { get; set; }\n    public virtual DateTime StartDate { get; set; }\n    public virtual IEnumerable&lt;Contract&gt; Contracts { get; set; }\n}\n\n[DataServiceKey(\"ID\")]\npublic class Contract \n{\n    public virtual Guid ID { get; set; }\n    public virtual string ContractCode { get; set; }\n    public virtual string ContractName { get; set; }\n    public virtual DateTime StartDate { get; set; }\n    public virtual int UnitQty { get; set; }\n    public virtual double UnitPrice { get; set; }\n}\n</code></pre>\n\n<p>I want to mock the service client for unit testing. I would like to write a test like:</p>\n\n<pre><code>[Test]\npublic void MockContractsFromAccount()\n{\n    var acctSvc = new Mock&lt;IAccountService&gt;();\n    var blah = new Contract[] { new Contract { ContractCode = \"BLAH001\", ContractName = \"blah 1\" }, \n        new Contract { ContractCode = \"BLAH002\", ContractName = \"blah 2\" } };\n    var blee = new Contract[] { new Contract { ContractCode = \"BLEE001\", ContractName = \"blee 1\" } };\n    var accts = new Account[] { new Account { AccountName = \"blah\", State = \"WY\", Contracts = new DataServiceCollection&lt;Contract&gt;(blah) }, \n        new Account { AccountName = \"blee\", State = \"CO\", Contracts = new DataServiceCollection&lt;Contract&gt;(blee) } };\n    acctSvc.SetupGet(x =&gt; x.Accounts).Returns(accts.AsQueryable());\n\n    var result = from x in acctSvc.Object.Accounts\n                 where x.State == \"CO\"\n                 select x;\n    Assert.That(result, Has.Count.EqualTo(1));\n    Assert.That(result.First().Contracts, Has.Count.EqualTo(2));\n    Assert.That(result, Is.All.EquivalentTo(blah));\n}\n</code></pre>\n\n<p>But the code fails at <code>new DataServiceCollection&lt;Contract&gt;(blah)</code> with the error message </p>\n\n<blockquote>\n  <p>SomeTests.MockContractsFromAccount:\n  System.ArgumentException : The DataServiceContext to which the DataServiceCollection instance belongs could not be determined. The DataServiceContext must either be supplied in the DataServiceCollection constructor or be used to create the DataServiceQuery or QueryOperationResponse object that is the source of the items in the DataServiceCollection</p>\n</blockquote>\n\n<p>This seems like it is getting very complicated. Is there a way to just have Visual Studio generate interfaces for Account &amp; Contract or to have <code>accts.Contracts</code> return an <code>IQueryable&lt;Contract&gt;</code> instead of <code>DataServiceCollection&lt;Contract&gt;</code>? Maybe some other simple solution to mock this service?</p>\n\n<hr>\n\n<p>For the sake of clarity, svcUtil.exe is generating an Account class that looks something like this:</p>\n\n<pre><code>public class Account \n{\n    public Guid ID { get; set; }\n    public string AccountName { get; set; }\n    public string Address1 { get; set; }\n    public string Address2 { get; set; }\n    public string City { get; set; }\n    public string State { get; set; }\n    public string Zip { get; set; }\n    public string Phone { get; set; }\n    public string Fax { get; set; }\n    public string Status { get; set; }\n    public DateTime StartDate { get; set; }\n    // It descends from IEnumerable&lt;Contract&gt;\n    public DataServiceCollection&lt;Contract&gt; Contracts { get; set; }\n}\n</code></pre>\n"},{"tags":["objective-c","xcode","unit-testing","ios-simulator","ocunit"],"answer_count":4,"favorite_count":12,"up_vote_count":7,"down_vote_count":0,"view_count":2744,"score":7,"question_id":6596741,"title":"OCUnit Application Test with Simulator in terminal","body":"<p>Is it possible to start an application test that runs in the simulator with a terminal command(s)?</p>\n\n<p>Thanks</p>\n"},{"tags":["ruby","unit-testing","testunit"],"answer_count":11,"favorite_count":15,"up_vote_count":10,"down_vote_count":0,"view_count":8875,"score":10,"question_id":255969,"title":"In Ruby's Test::Unit::TestCase, how do I override the initialize method?","body":"<p>I'm struggling with Test::Unit.  When I think of unit tests, I think of one simple test per file.  But in Ruby's framework, I must instead write:  </p>\n\n<pre><code>class MyTest &lt; Test::Unit::TestCase \n   def setup \n   end\n\n   def test_1 \n   end\n\n   def test_1 \n   end\nend\n</code></pre>\n\n<p>But setup and teardown run for every invocation of a test_* method.  This is exactly what I don't want.  Rather, I want a setup method that runs just once for the whole class.  But I can't seem to write my own initialize() without breaking TestCase's initialize.</p>\n\n<p>Is that possible?  Or am I making this hopelessly complicated?</p>\n"},{"tags":["java","unit-testing","maven","eclipse-plugin","code-coverage"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12584544,"title":"Eclipse, Maven and code coverage","body":"<p><strong>Is there any Eclipse plug-in that gives the code coverage</strong> directly within the Eclipse JAVA editor, just like <a href=\"http://ecobertura.johoop.de/\" rel=\"nofollow\">eCobertura</a> or <a href=\"http://www.eclemma.org/\" rel=\"nofollow\">EclEmma</a>, but that launches the tests <strong>using the Maven goal <code>test</code> (i.e. <code>mvn test</code>)?</strong></p>\n\n<p>I need to specify a Maven profile to get some properties filtered (i.e. <code>mvn -P dev test</code>), but the two solutions given above don't allow us to work with Maven (AFAIK).</p>\n\n<p>PS: I know I could use the <code>clean site</code> Maven goals (i.e. <code>mvn -P dev clean site</code>) or the Cobertura Maven Plugin (i.e. <code>mvn -P dev cobertura:cobertura</code>) to get a code coverage report, but I would like to get the coverage directly within the Eclipse JAVA editor. <em>Convenience-addict</em>.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12583868,"title":"Testing code which uses preprocessor constants","body":"<p>Currently I'm doing Unit testing of some project and all is fine except for the places where developers used something like this: </p>\n\n<pre><code>#if USING_EMULATOR\n{ do nothing }\n#else\n{ do a lot of things }\n#endif\n</code></pre>\n\n<p>or </p>\n\n<pre><code>#if USING_EMULATOR\n  return;\n#endif\n{ do a lot of things }\n</code></pre>\n\n<p>Where the code under <code>USING_EMULATOR</code> was done for debug purposes I think. Also sometimes <code>#if DEBUG</code> appears. How can I check the actual piece of code if now the one for the debugging purposes only is trying to execute? \n<code>#undef USING_EMULATOR</code> doesn't help. I don't understand very clearly preprocessor constants and in C# they are even can't be set only defined/undefined so maybe I just do smth wrong?</p>\n"},{"tags":["java","spring","unit-testing","maven","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12583073,"title":"Specifying a Maven profile when running JUnit tests within a Spring webapp","body":"<p><strong>Background</strong></p>\n\n<p>/pom.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>...\n&lt;properties&gt;\n    ...\n    &lt;jdbc.driver&gt;com.mysql.jdbc.Driver&lt;/jdbc.driver&gt;\n    &lt;jdbc.url&gt;jdbc:mysql://${database.host}/${database.name}&lt;/jdbc.url&gt;\n    &lt;jdbc.user&gt;${database.user}&lt;/jdbc.user&gt;\n    &lt;jdbc.password&gt;${database.password}&lt;/jdbc.password&gt;\n    ...\n&lt;/properties&gt;\n...\n&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;dev&lt;/id&gt;\n        &lt;properties&gt;\n            ...\n            &lt;database.name&gt;database&lt;/database.name&gt;\n            &lt;database.host&gt;localhost&lt;/database.host&gt;\n            &lt;database.user&gt;root&lt;/database.user&gt;\n            &lt;database.password&gt;&lt;/database.password&gt;\n            ...\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n...\n</code></pre>\n\n<p>/src/main/resources/database.properties</p>\n\n<pre><code>...\njdbc.driver=${jdbc.driver}\njdbc.url=${jdbc.url}\njdbc.user=${jdbc.user}\njdbc.password=${jdbc.password}\n...\n</code></pre>\n\n<p>/src/main/resources/spring/applicationContext.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;beans ... xmlns:p=\"http://www.springframework.org/schema/p\" ...&gt;\n    ...\n    &lt;bean\n        id=\"dataSource\"\n        ...\n        p:driverClassName=\"${jdbc.driver}\"\n        p:url=\"${jdbc.url}\"\n        p:username=\"${jdbc.user}\"\n        p:password=\"${jdbc.password}\"\n        ... /&gt;\n    ...\n&lt;/beans&gt;\n</code></pre>\n\n<p>/src/<strong>test</strong>/java/com/company/project/service/MyItemServiceImplTest.java</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"/spring/applicationContext.xml\" })\npublic class MyItemServiceImplTest {\n\n    @Resource\n    private MyItemService myItemService;\n\n    @Test\n    public void testSave() {\n        MyItem myItem = new MyItem();\n        myItemService.save(myItem);\n        ...\n    }\n\n}\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>When running the tests, it throws an exception:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n...\nCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [spring/applicationContext.xml]: Could not resolve placeholder 'database.password'\n...\n</code></pre>\n\n<p>I guess it's because I need to run the tests while specifying the <code>dev</code> profile like I do when I launch the webapp (using <code>-P dev</code>). But I can't make it work. Is it even possible?</p>\n\n<p><strong>PS</strong></p>\n\n<p>The filtered applicationContext.xml file (i.e. the one in /target/classes/spring/applicationContext.xml) is identical to the one in /src/*, but the filtered database.properties file (i.e. /target/classes/database.properties) looks like</p>\n\n<pre><code>jdbc.driver=com.mysql.jdbc.Driver\njdbc.url=jdbc:mysql://${database.host}/${database.name}\njdbc.user=${database.user}\njdbc.password=${database.password}\n</code></pre>\n\n<p>It means that from the pom.xml file to the .properties one, the properties have been well filtered, but within the pom.xml itself, the properties that depend on the chosen profile won't get filtered. Probably because I want to specify anywhere the profile I need when launching the tests. But as I said before, <code>-P dev</code> doesn't seem work with JUnit...</p>\n"},{"tags":["asp.net-mvc-3","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12470278,"title":"How to unit test the ASP.NET MVC view?","body":"<p>Can any one give me the example to unit test the ASP.NET MVC view? IS it possible to unit test the view page?</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12579403,"title":"The source is not working when use mock in unit test project","body":"<p>when i use mock concepts to initialize httpcontext.Request.Url in unit test project then source project is not initialized. So it throws null refernce exception. Can you please let me know how to fix this issue?</p>\n\n<p>Ex:</p>\n\n<p>Actual Code</p>\n\n<pre><code>class sample\n\n{\n    public void sample_method()\n    {\n        string url=Request.Url.ToString();\n    }\n}\n</code></pre>\n\n<p>Updated Code for unit test</p>\n\n<pre><code>​\n\nclass sample: IRequestAttr\n{\n    private readonly IRequestAttr _attr;\n\n    public sample(IRequestAttr attr)\n    {\n        _attr=attr;\n    }\n\n    public string URL\n    {\n        return HttpContext.Request.Url.ToString();\n    }\n\n    public void sample_method()\n    {\n        string url=_attr.URL();\n    }\n}\n\npublic interface IRequestAttr\n{\n    string URL();\n}\n</code></pre>\n"},{"tags":["javascript","unit-testing","testing","jasmine","jasmine-jquery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12577905,"title":"Testing AJAX calls with Jasmine-Maven","body":"<p>For my current project, I'm setting up JS testing with Jasmine. We want our tests to run automatically on each build, so I plugged it into our Maven build. I can run some basic tests of the Javascript, and everything is working peachy. So far so good! </p>\n\n<p>However, we are building a rich client interface, and doing a lot of callbacks to the server - so, we have a lot of $.ajax calls in our code. Whenever I try to load our JS files that contain the call (<em>not</em> execute tests, the processing isn't even there yet), the Maven build crashes each time, because it tries to do the callback already: </p>\n\n<pre><code>[ERROR] Caused by: java.io.FileNotFoundException: F:\\Users\\gjoris\\Development\\Source\\xxx\\xxx-war\\target\\jasmine\\rest\\xxx\\search (The system cannot find the path specified)\n</code></pre>\n\n<p>So, just to make it very clear: I'm <em>not</em> running tests here, I'm just loading the sources. This is the configuration for my plugin thusfar:</p>\n\n<pre><code>            &lt;plugin&gt;\n            &lt;groupId&gt;com.github.searls&lt;/groupId&gt;\n            &lt;artifactId&gt;jasmine-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.2.0.0&lt;/version&gt;\n            &lt;extensions&gt;true&lt;/extensions&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;test&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;sourceIncludes&gt;\n                    &lt;include&gt;sorting*.js&lt;/include&gt;\n                    &lt;include&gt;*blabla*.js&lt;/include&gt;\n                &lt;/sourceIncludes&gt;\n                &lt;jsSrcDir&gt;${project.basedir}/src/main/webapp/resources/scripts/&lt;/jsSrcDir&gt;\n                &lt;jsTestSrcDir&gt;${project.basedir}/src/test/javascript&lt;/jsTestSrcDir&gt;\n                &lt;timeout&gt;300&lt;/timeout&gt;\n                &lt;preloadSources&gt;\n                    &lt;!-- Load basic libraries for application--&gt;\n                    &lt;source&gt;${project.basedir}/src/main/webapp/resources/scripts/libs/knockout-2.1.0.js&lt;/source&gt;\n                    &lt;source&gt;${project.basedir}/src/main/webapp/resources/scripts/libs/jquery-1.7.2.min.js&lt;/source&gt;\n                    &lt;!-- Load all necessary Jasmine plugins --&gt;\n                    &lt;source&gt;${project.basedir}/src/test/javascript/libs/jasmine-ajax/mock-ajax.js&lt;/source&gt;\n                    &lt;source&gt;${project.basedir}/src/test/javascript/libs/jasmine-jquery/jasmine-jquery.js&lt;/source&gt;\n                    &lt;!-- Load our own mocks --&gt;\n                    (some of our mocks in JS go here)\n                    &lt;!-- Load additional libraries, application specific, which are needed to run --&gt;\n                    (some general JS, which are used everywhere)\n                &lt;/preloadSources&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>Anybody any experience with this, and knows how I have to configure it? </p>\n"},{"tags":["android","unit-testing","shell"],"answer_count":5,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":5881,"score":7,"question_id":3299006,"title":"Running android unit tests from the command line?","body":"<p>I'm trying to run unit tests on the android platform in accordance with <a href=\"http://developer.android.com/guide/topics/testing/testing_android.html\">tutorial</a>. Say, for example, I want to run tests for Email application. I open <code>/apps/Email/tests/AndroidManifest.xml</code> file, look for the <code>&lt;manifest&gt;</code> element, and look at the <code>package</code> attribute, which is <code>com.android.email.tests</code>, and in the <code>&lt;instrumentation&gt;</code> element I look at the <code>android:name</code> attribute, which is <code>android.test.InstrumentationTestRunner</code>. Now I open the console, and run</p>\n\n<pre><code>$ . build/envsetup.sh\n$ lunch 1\n$ adb shell am instrument -w com.android.email.tests/android.test.InstrumentationTestRunner\n</code></pre>\n\n<p>But that fails:</p>\n\n<pre><code>INSTRUMENTATION_STATUS: id=ActivityManagerService\nandroid.util.AndroidException: INSTRUMENTATION_FAILED: com.android.email.tests/android.test.InstrumentationTestRunner\nINSTRUMENTATION_STATUS: Error=Unable to find instrumentation info for: ComponentInfo{com.android.email.tests/android.test.InstrumentationTestRunner}\n</code></pre>\n\n<p>So.. What am I doing wrong?</p>\n"},{"tags":["unit-testing","code-analysis","quality"],"answer_count":34,"favorite_count":14,"up_vote_count":47,"down_vote_count":2,"view_count":2838,"score":45,"question_id":1076575,"title":"Why is code quality not popular?","body":"<p>I like my code being in order, i.e. properly formatted, readable, designed, tested, checked for bugs, etc. In fact I am fanatic about it. (<a href=\"http://en.wikipedia.org/wiki/Obsessive-compulsive_disorder\">Maybe even more than fanatic...</a>) But in my experience actions helping code quality are hardly implemented. (By code quality I mean the quality of the code you produce day to day. The whole topic of software quality with development processes and such is much broader and not the scope of this question.)</p>\n\n<p>Code quality does not seem popular. Some examples from my experience include</p>\n\n<ul>\n<li><p>Probably every Java developer knows JUnit, almost all languages implement xUnit frameworks, but in all companies I know, only very few proper unit tests existed (if at all). I know that it's not always possible to write unit tests due to technical limitations or pressing deadlines, but in the cases I saw, unit testing would have been an option. If a developer wanted to write some tests for his/her new code, he/she could do so. My conclusion is that developers do not want to write tests.</p></li>\n<li><p>Static code analysis is often played around in small projects, but not really used to enforce coding conventions or find possible errors in enterprise projects. Usually even compiler warnings like potential null pointer access are ignored.</p></li>\n<li><p>Conference speakers and magazines would talk a lot about EJB3.1, OSGI, Cloud and other new technologies, but hardly about new testing technologies or tools, new static code analysis approaches (e.g. SAT solving), development processes helping to maintain higher quality, how some nasty beast of legacy code was brought under test, ... (I did not attend many conferences and it probably looks different for conferences on agile topics, as unit testing and CI and such has a higher value there.)</p></li>\n</ul>\n\n<p>So why is code quality so unpopular/considered boring?</p>\n\n<p><strong>EDIT:</strong><br>\nThank your for your answers. Most of them concern unit testing (and has been discussed in a <a href=\"http://stackoverflow.com/questions/557764/if-unit-testing-is-so-great-why-arent-more-companies-doing-it\">related question</a>). But there are lots of other things that can be used to keep code quality high (see <a href=\"http://stackoverflow.com/questions/534624/how-do-you-ensure-code-quality\">related question</a>). Even if you are not able to use unit tests, you could use a daily build, add some static code analysis to your IDE or development process, try pair programming or enforce reviews of critical code. </p>\n"},{"tags":["javascript","jquery","unit-testing","mocking","qunit"],"answer_count":14,"favorite_count":23,"up_vote_count":30,"down_vote_count":0,"view_count":6930,"score":30,"question_id":209418,"title":"What are some JavaScript Unit Testing and Mocking Frameworks you have used?","body":"<p>My main JavaScript framework is <a href=\"http://jquery.com/\" rel=\"nofollow\">jQuery</a> so I would like my unit test and mocking frameworks to be compatible with that. I'd rather not have to introduce another JavaScript framework.</p>\n\n<p>I am currently using <a href=\"http://docs.jquery.com/QUnit\" rel=\"nofollow\">QUnit</a> for unit testing and <a href=\"http://boss.bekk.no/display/BOSS/Jack\" rel=\"nofollow\">Jack</a> for mocking, but I am pretty new to the whole unit testing of JavaScript.</p>\n\n<p>Does anyone else have a better tool to suggest? What has worked for you? </p>\n"},{"tags":["javascript","unit-testing","jsunit"],"answer_count":4,"favorite_count":2,"up_vote_count":14,"down_vote_count":0,"view_count":4325,"score":14,"question_id":1692873,"title":"Javascript Unit Testing Frameworks?","body":"<p>Can anybody recommend a Javascript unit testing framework. I've found JsUnit (<a href=\"http://www.jsunit.net/\" rel=\"nofollow\">http://www.jsunit.net/</a>) and will start evaluating it. I just thought it would be good to get some input from the community.</p>\n"},{"tags":["javascript","jquery","unit-testing","ant","automation"],"answer_count":12,"favorite_count":30,"up_vote_count":41,"down_vote_count":0,"view_count":12695,"score":41,"question_id":96066,"title":"Automated Unit Testing with JavaScript","body":"<p>I'm trying to incorporate some JavaScript unit testing into my automated build process.  Currently JSUnit works well with JUnit, but it seems to be abandonware and lacks good support for AJAX, debugging, and timeouts.  </p>\n\n<p>Has anyone had any luck automating (with ANT) a unit testing library such as YUI test, JQuery's QUnit, or jQUnit (<a href=\"http://code.google.com/p/jqunit/\" rel=\"nofollow\">http://code.google.com/p/jqunit/</a>)?</p>\n\n<p>Note:  I use a custom built AJAX library, so the problem with Dojo's DOH is that it requires you to use their own AJAX function calls and event handlers to work with any AJAX unit testing.</p>\n"},{"tags":["c#",".net","unit-testing","code-generation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12565137,"title":"How effective / dangerous is it to use code generation for unit tests for a simple finite state machine?","body":"<p>In a current project, I am dealing with a client who insists that code generation is evil for unit testing. Some of the technical/evaluation staff on their team are extremely experienced developers so this surprises me. So much so, that after seeing their profiles, I am soliciting community opinion on a subject I would not otherwise question (i.e. automation).</p>\n\n<p>The title refers to code generation for creating unit tests. That can be done to various extents depending on the scenario. I wrote this particular library myself and consider it to be very simple in terms of branching, complexity, maintainability, etc. An abstract is listed below to illustrate the same.</p>\n\n<p>The library in question is a generic finite state machine that makes use of two enumerations to determine a list of possible <code>states</code> and <code>commands</code>. Commands are used to specify an abstract transaction while an explicit arbitrary state may also be requested without a command as long as it is legal. Examples of states include Processing, Cancelled, WaitingForUserInput, etc. Examples of commands include WakeUp, Sleep, StartProcessing, etc.</p>\n\n<p>The decleration is as follows:</p>\n\n<pre><code>// Both [TState] and [TCommand] will ALWAYS be enumerations.\npublic abstract class StateMachineBase&lt;TState, TCommand&gt;: IDisposable\n{\n    public delegate void DelegateStart (StateMachineBase&lt;TState, TCommand&gt; sender, EventArgs e);\n    public delegate void DelegateStop (StateMachineBase&lt;TState, TCommand&gt; sender, EventArgs e);\n    public delegate void DelegateTransitionRequest (StateMachineBase&lt;TState, TCommand&gt; sender, TransitionRequestEventArgs&lt;TState, TCommand&gt; e);\n    public delegate void DelegateTransitionComplete (StateMachineBase&lt;TState, TCommand&gt; sender, TransitionCompletedEventArgs&lt;TState, TCommand&gt; e);\n\n    public event DelegateStart OnStart = null;\n    public event DelegateStop OnStop = null;\n    public event DelegateTransitionRequest OnTransitionRequest = null;\n    public event DelegateTransitionComplete OnTransitionComplete = null;\n\n    private readonly object _SyncRoot = new object(); // Thread safety.\n    public bool Running { get; private set; }\n    public TState State { get; private set; }\n    private TCommand Command { get; set; }\n    private List&lt;Transition&lt;TState, TCommand&gt;&gt; AllowedTransitions { get; set; }\n\n    // Will not work if the machine is running.\n    protected void AddTransition (TState from, TState to, TCommand command) { ... }\n    public void Start () { ... }\n    public void Stop () { ... }\n    public bool CanTransit (TState state) { ... }\n    public bool CanTransit (TCommand command) { ... }\n    public bool Request (TState state) { ... }\n    public bool Request (TCommand command) { ... }\n}\n</code></pre>\n\n<p>I do realize that in some cases, using code generation may defeat the purpose of writing unit tests but I am sure many developers do use it in specific scenarios. I figure, if I have written the library myself, I should be able to get the unit tests right whether by hand or reflection.</p>\n\n<p>The question is, is it wise to use code generation in this case? If not, what unintended consequences could I be overlooking?</p>\n"},{"tags":["javascript","unit-testing","debugging","phantomjs","chutzpah"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12561362,"title":"How do I debug my JavaScript that is being executed by Chutzpah/PhantomJS","body":"<p>I am using Chutzpah to execute my JavaScript unit tests.</p>\n\n<p>I reference paths to my source files and below have a series of tests. Text Explorer in Visual Studio lists my tests and I can execute them directly from the IDE, so everything seems to be working correctly.</p>\n\n<p>However I would like to step into the source code that is being executed when my tests are run.</p>\n\n<p>Is this possible?</p>\n"},{"tags":["c#","unit-testing","nunit","projects-and-solutions"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12573127,"title":"Referencing Main Project from a separate NUnit Test Library","body":"<p>I'm brand new to Unit Testing, fresh out of college, and suddenly responsible for developing and maintaining a fairly large application by myself. The previous developer (who just left the company) included NUnit with the project references, wrote a few empty test fixtures at the bottom of a couple classes, and never did anything else with it.</p>\n\n<p>I'm afraid if I don't start writing unit tests now, while I'm refactoring and learning the system, I'll never get them done, but I'm having trouble understanding how to properly set up my test project.</p>\n\n<p>I was told that I should keep my test project as a separate <code>Class Library</code> within the same solution, so I've made an OurApplication.Test Library project. I don't know how I reference the project that I'll be testing within it, though. </p>\n\n<p>Guides online say to point it to my <strong>main project's .DLL</strong>... but there <strong>isn't</strong> one. Our project is a standalone application that doesn't generate a dll, and I'm not sure what I'm supposed to do in this case. </p>\n\n<p>Any advice on what's wrong here, or pointers to more comprehensive guides would be greatly appreciated. I'd like to get this done the right way, and as soon as I can.</p>\n"},{"tags":["c#",".net","unit-testing","testing","console-application"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12572053,"title":"Simple console app tests","body":"<p>I'm currently doing some trainee work &amp; looking for a bit of advice.</p>\n\n<p>I've been set a pretty simple task of writing some unit tests for a service application in C#. The service mainly has methods which query and look up and SQL database for various things. I've been asked to write unit tests for the majority of these methods and other things like simply checking the connection and stuff. I've been told to keep it simple and probably just write the tests in a Console application. I'm wondering what the best way to go about this would be?</p>\n\n<p>Would simply calling the methods from a console app with hardcoded input be suitable? Then just check what the output is &amp; write whether is passes in the console? Or is this too simple and nasty?</p>\n"},{"tags":["c#","unit-testing","compilation","strong-typing"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":126,"score":1,"question_id":12565690,"title":"How to unit test C# code that's expected to fail compilation for negative testing?","body":"<p>We're meant to generate a string output that's required to adhere to a particular set of syntactical rules. I created an object model in order to enforce that syntax via C#'s strong-typing with the intent to prevent the possibility of generating invalid output.</p>\n\n<p>I can create positive tests, i.e. valid C# generating valid output. What I'm unable to do is run negative tests, i.e. ensuring that attempting to generate invalid output will throw errors at compilation.</p>\n\n<p>Explicit example:</p>\n\n<pre><code>namespace Abstract\n{\n    public interface FooType { }\n    public interface FooString : FooType { }\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>public interface Integer : Abstract.FooType { }    \npublic interface SingleLine : Abstract.FooString { }\npublic interface MultiLine : Abstract.FooString { }\n\npublic class Bar&lt;T&gt;\n    where T : Abstract.FooType\n{\n    public Bar(string s) {\n        // do stuff with s and T, where T is SingleLine or MultiLine\n    }\n\n    public Bar(int i) {\n        // do stuff with i and T, where T is Integer\n    }\n}\n\npublic static class Foo\n{\n    public static Bar&lt;T&gt; Bar&lt;T&gt;(int i) where T : Integer {\n        return new Bar&lt;T&gt;(i);\n    }\n\n    public static Bar&lt;SingleLine&gt; Bar(string s) {\n        return new Bar&lt;SingleLine&gt;(s);\n    }\n\n    public static Bar&lt;T&gt; Bar&lt;T&gt;(string s) where T : Abstract.FooString {\n        return new Bar&lt;T&gt;(s);\n    }\n}\n</code></pre>\n\n<p>All of that just so I can do:</p>\n\n<pre><code>Foo.Bar&lt;SingleLine&gt;(\"some string\");  // ok\nFoo.Bar(\"another string\");           // ok\nFoo.Bar&lt;MultiLine&gt;(\"more\\nstrings\"); // still ok\nFoo.Bar&lt;Integer&gt;(24)                 // also ok\n\n// How to test these lines for compilation failure?\nFoo.Bar&lt;Integer&gt;(\"no good\");\nFoo.Bar&lt;MultiLine&gt;(-1);\n</code></pre>\n\n<p>In case it matters, I'm using VS2012 Express for Desktop.</p>\n"},{"tags":["c#","asp.net","unit-testing","testing"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":1,"view_count":63,"score":1,"question_id":12519259,"title":"Testing asp.net pages programmatically","body":"<p>Suggest a testing framework, which could autofill forms, simulate a button click and navigate to next page.</p>\n\n<p>I am trying to automate this task to reduce development time.</p>\n\n<p>EDIT :\nFrom the list suggested by Arran, Coded UI seems to be the most feasible option. (Considering enterprise restrictions, I cannot install new softwares). </p>\n\n<p>Please suggest some directions to write something on my own or using Microsoft Coded UI.</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","unit-testing","testing","junit","junit4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12568764,"title":"JUnit Tests With and Without Certain Classpath File","body":"<p>The Java library that I'm currently working on can be configured with a <code>.properties</code> file in the classpath. Now I want to write JUnit tests that do the following:</p>\n\n<ol>\n<li>If the file exists, assert that the values in there are loaded.</li>\n<li>If the file does <em>not</em> exit, assert that the default values are loaded.</li>\n</ol>\n\n<p>Is that sort of thing possible?</p>\n"},{"tags":["unit-testing","junit","jenkins"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12559010,"title":"Collect running time of each JUnit test","body":"<p>Is there a way to easily collect running times of each unit test (for example with either  surefire or some Jenkins plugin) so that I could for example list my Top 10 slowest unit tests?</p>\n"},{"tags":["c#","unit-testing","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":62,"score":1,"question_id":12569099,"title":"How to make this Unit Testable","body":"<p>Below I have some code that that I cannot Unit test because it tries to read settings from IIS7 and unfortunately our nightly build machine does not have IIS7. The only thing I can think of is to pass the ServerManager into the method, but then again in the caller I will have a ServerManager that will make that method unable to be unit tested. We use MOQ for our Mock library.</p>\n\n<pre><code>        public ISection GetCurrentSettings(string location, Action&lt;string&gt; status)\n    {\n        #region Sanity Checks\n\n        if (string.IsNullOrEmpty(location))\n        {\n            throw new ArgumentNullException(\"location\");\n        }\n        if (status == null)\n        {\n            throw new ArgumentNullException(\"status\");\n        }\n        #endregion\n\n        ISection section = null;\n\n        _logger.Debug(string.Format(\"Retrieving current IIS settings for app at {0}.\", location));\n        status(\"Getting current IIS settings.\");\n        using (ServerManager manager = new ServerManager())\n        {\n            var data = (from site in manager.Sites\n                        from app in site.Applications\n                        from vdir in app.VirtualDirectories\n                        where vdir.PhysicalPath.Equals(location, StringComparison.CurrentCultureIgnoreCase)\n                        select new {Website = site, App = app}).SingleOrDefault();\n\n            if (data == null)\n            {\n                _logger.Debug(string.Format(\"Could not find an application at {0} in IIS. Going to load the defaults instead.\", location));\n                //ToDo possibly load defaults\n            }\n            else\n            {\n               _logger.Debug(string.Format(\"Application found in IIS with website: {0} and a path of {1}\", data.Website.Name, data.App.Path));\n                int port =\n                    data.Website.Bindings.Where(b =&gt; b.EndPoint != null).Select(b =&gt; b.EndPoint.Port).Single();\n\n\n                section = new IISSection\n                    {\n                        ApplicationPoolName = data.App.ApplicationPoolName,\n                        VirtualDirectoryAlias = data.App.Path,\n                        WebsiteName = data.Website.Name,\n                        WebsiteRoot = data.App.VirtualDirectories[0].PhysicalPath,\n                        Port = port.ToString(CultureInfo.InvariantCulture),\n                        WillApply = true,\n                        AnonymousUser = _userService.GetUserByType(UserType.Anonymous)\n                    };\n            }\n\n            return section;\n\n        }\n</code></pre>\n"},{"tags":["objective-c","unit-testing","xcode4"],"answer_count":2,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":1271,"score":11,"question_id":6720557,"title":"\"Test After Build\" option in XCode 4 not working","body":"<p>So, I am having a bear of a time figuring this one out.  I have looked around, and cannot seem to find any information on this.</p>\n\n<p>What I want to do is have my unit tests ALWAYS run EVERY time I build my code in XCode.  I have read a number of posts, including <a href=\"http://stackoverflow.com/questions/6673333/how-do-i-automatically-perform-unit-tests-on-each-build\">this question</a> here.  I have followed the instructions to the letter, and the build will not run the tests.</p>\n\n<p>What I have done:</p>\n\n<ul>\n<li>My Test suite is a target dependency of my main build</li>\n<li>My main build has \"Test After Build\" set to Yes</li>\n<li>All of the tests under the \"test\" phase in the Scheme are there, and checked</li>\n</ul>\n\n<p>If I run the tests manually - through cmd+U or the menu - the tests run.  I have added a failing test to try and force the build to fail - so I can be sure they are running.  The build continues to pass fine, and the tests are never run.</p>\n\n<p>I am positive I have missed a step in here, but for the life of me I cannot find any documentation related to it.  Anyone have any other advice or steps I should be doing?</p>\n"},{"tags":["unit-testing","maven","junit","junit4","junit3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12567991,"title":"Do we have a @beforeTests method which can run once, before all the tests starts","body":"<p>In Junit, I know there is a @beforeclass  , @before annotation, do we have a annotation or design, \nallow us to write a method to run ONLY once before the whole testing process?</p>\n\n<p>we have a script, which setup some database data (config, static, lookup table etc.....) for the test, but its too expensive to run before each individual test, we would like it to set it, only once before start running any test.</p>\n\n<p>thanks!</p>\n"},{"tags":["c++","linux","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":72,"score":0,"question_id":12565603,"title":"Proper way to test for readability/writability of a folder","body":"<p>I have written a function to test for the readability/writability of a folder.</p>\n\n<p>For unit testing it, I need to produce the different cases:</p>\n\n<ul>\n<li>a folder with readable and writable files</li>\n<li>a folder with readable files (not writable)</li>\n<li>a folder not writable and not readable.</li>\n</ul>\n\n<p>Here is the code for the function I came to, up to this point:</p>\n\n<pre><code>void FileUtils::checkPath(std::string path, bool &amp;readable, bool &amp;writable)\n{\n   namespace bf = boost::filesystem;\n   std::string filePath = path + \"/test.txt\";\n\n   // remove a possibly existing test file\n   remove(filePath.c_str());\n\n   // check that the path exists\n   if(!bf::is_directory(path))\n   {\n      readable = writable = false;\n      return;\n   }\n\n   // try to write in the location\n   std::ofstream outfile (filePath.c_str());\n   outfile &lt;&lt; \"I can write!\" &lt;&lt; std::endl;\n   outfile.close();\n\n   if(!outfile.fail() &amp;&amp; !outfile.bad())\n   {\n      writable = true;\n   }\n\n   // look for a file to read\n   std::ifstream::pos_type size;\n   char * memblock;\n   for (bf::recursive_directory_iterator it(path); it != bf::recursive_directory_iterator(); ++it)\n   {\n      if (!is_directory(*it))\n      {\n         std::string sFilePath = it-&gt;path().string();\n         std::ifstream file(sFilePath.c_str(), std::ios::in|std::ios::binary|std::ios::ate);\n         if (file.is_open())\n         {\n           size = file.tellg();\n           if(size &gt; 0)\n           {\n              memblock = new char [1];\n              file.seekg (0, std::ios::beg);\n              file.read (memblock, 1);\n              file.close();\n              delete[] memblock;\n              if(!file.fail() &amp;&amp; !file.bad())\n              {\n                 readable = true;\n              }\n              break;\n           }\n         }\n         else\n         {\n            // there is a non readable file in the folder\n            // readable = false;\n            break;\n         }\n      }\n   }\n\n   // delete the test file\n   remove(filePath.c_str());\n}\n</code></pre>\n\n<p>Now with the tests (done with Google tests):</p>\n\n<pre><code>TEST_F(FileUtilsTest, shouldCheckPath)\n{\n   // given an existing folder\n   namespace fs = boost::filesystem;\n   fs::create_directory(\"/tmp/to_be_deleted\");\n\n   bool readable = false, writable = false;\n\n   FileUtils::checkPath(\"/tmp/to_be_deleted\",readable, writable);\n\n   fs::boost::filesystem::remove_all(\"/tmp/to_be_deleted\");\n\n   EXPECT_TRUE(readable &amp;&amp; writable);\n}\n</code></pre>\n\n<p>I will add more for the other cases when I will have gone further.</p>\n\n<p>Now the game is open to propose a better solution :-)</p>\n"},{"tags":["sqlite","unit-testing","fluent-nhibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12566254,"title":"Handling \"schema\" in SQLite Unit Tests","body":"<p>I have a project where I'm using Fluent NHibernate to map an SQL Server database and I generate data from another Fluent NHibernate mapped SQL Server database which is our source.</p>\n\n<p>I'm currently writing some unit tests which is to check the functions that read from one database and create records in the other.\nI've created an in-memory SQLite database of my db for creating records, and it works fine. But when I try to create a similar SQLite database for my \"source\" database I get failures which claim \"no such table\".</p>\n\n<p>This seems to be because in the Fluent NHibernate dll for the source database they've given names like \"dbo.table\" and since there's no schema in my SQLite test database it's not able to create a test table.</p>\n\n<p>Is there a way to handle this \"dbo.\" name in SQLite when creating the test database?</p>\n"},{"tags":["python","unit-testing","python-3.x","unittest2","python-3.1"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12566993,"title":"python -m unittest2 discover not working","body":"<p>I'm using the excellent Tox tool to test my code. Here is my <code>tox.ini</code>:</p>\n\n<pre><code>[tox]\nenvlist = py26,py27,py31,py32,py33\n\n[testenv]\ndeps = ParamUnittest\ncommands = python -m unittest discover tests\ndownloadcache = build\n\n[testenv:py26]\ndeps = https://github.com/rik0/ParamUnittest/tarball/master\n       unittest2\n       importlib\ncommands = python -m unittest2.__main__ discover tests\n\n[testenv:py31]\ndeps = https://github.com/rik0/ParamUnittest/tarball/master\n       unittest2py3k\ncommands = python -m unittest2 discover tests\n</code></pre>\n\n<p>When running it all tests are executed on all versions except 3.1. Tox shows:</p>\n\n<pre><code>py31 sdist-reinst: /home/miki/exp/radon/.tox/dist/radon-0.1.zip\npy31 runtests: commands[0]\n\n----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\n</code></pre>\n\n<p>Why tests are not executed? System layout is as follows:</p>\n\n<pre><code>tests/\n    test_internals.py\n    test_complexity.py\n    ...\nradon/\n...\nsetup.py\ntox.ini\n</code></pre>\n"},{"tags":["java","android","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12567004,"title":"AndroidTestCase test: loading text file that isn't part of the project under test","body":"<p>I am writing a simple Android unit test to verify that a parser I have written works correctly on a given input string.  The test needs to parse ~1500 lines of text.  Because Java has poor support for multi-line strings in source code, I want to load this text from a file <code>a_test_plist.txt</code> that I've pasted the text into.  My question is, how does one load this <code>.txt</code> file in the test, given that this is not a file I want to actually include as a resource in the project under test?</p>\n\n<p>Below is my test class.  At the moment it generates a <code>FileNotFoundException</code> in the test setup:</p>\n\n<pre><code>package com.brycestrosoft.jcunav.places.parsers.test;\n\nimport java.io.File;\nimport java.util.ArrayList;\n\nimport com.brycestrosoft.jcunav.places.Building;\nimport com.brycestrosoft.jcunav.places.Place;\nimport com.brycestrosoft.jcunav.places.parsers.BuildingParser;\nimport com.brycestrosoft.jcunav.places.parsers.PlaceParser;\nimport com.dd.plist.NSDictionary;\nimport com.dd.plist.PropertyListParser;\n\nimport android.test.AndroidTestCase;\n\npublic class BuildingParserTest extends AndroidTestCase {\n\n    NSDictionary rootDict;\n\n    public BuildingParserTest() {\n        super();\n    }\n\n    @Override\n    public void setUp() throws Exception {\n        super.setUp();\n\n        // java has lousy support for multiline strings, so we \n        // take the more error-prone approach of reading the\n        // string from a file\n        File file = new File(\"src/com/brycestrosoft/jcunav/places/parsers/test/a_test_plist.txt\");\n        rootDict = (NSDictionary)PropertyListParser.parse(file);\n    }\n\n\n    public void testParsePlaces() {\n        PlaceParser parser = new BuildingParser();\n        ArrayList&lt;Place&gt; places = parser.parsePlaces(rootDict);\n        for (Place p: places) {\n            Building b = (Building)p;\n            if (b.getNumber() == 27) {\n                assertEquals(b.getName(), \"Law, Business &amp; Creative Arts\");\n            }\n        }\n    }\n\n\n    @Override\n    public void tearDown() throws Exception {\n        super.tearDown();\n    }\n\n}\n</code></pre>\n"},{"tags":[".net","unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12349069,"title":"moq: How do I setup behaviour of constructor in generated proxy?","body":"<p>I have an abstract class (let's call it <code>AbstractOutputter</code>). When I derive from it, I make calls to a protected method in the constructor of the derived class. </p>\n\n<p><strong>AbstractOutputter</strong></p>\n\n<pre><code>public abstract class IOutputter&lt;T&gt;\n{\n  protected void Write(Func&lt;T, string&gt; output)\n  {\n   ... \n  }\n}\n</code></pre>\n\n<p><strong>Derived class</strong></p>\n\n<pre><code>public class WotsitOutputter: AbstractOutputter&lt;Wotsit&gt;\n{\n  public WotsitOutputter()\n  {\n    Write(x =&gt; x.Property1.ToString());\n    Write(x =&gt; x.Property2.ToString());\n  }\n}\n</code></pre>\n\n<p>The pattern is identical to creating validator classes in FluentValidation:</p>\n\n<p><a href=\"http://fluentvalidation.codeplex.com/\" rel=\"nofollow\">http://fluentvalidation.codeplex.com/</a></p>\n\n<p>I would like Moq to create me a class deriving from <code>AbstractOutputter</code>, in order to unit test how it responds to various permutations of calls to <code>Write()</code>.. I would need to do something like this:</p>\n\n<pre><code>Mock&lt;AbstractOutputter&lt;Wotsit&gt;&gt; mockOutputter = new Mock&lt;AbstractOutputter&lt;Wotsit&gt;&gt;();\n// Instruct Moq to make various calls to protected method in constructor of mock class\n</code></pre>\n\n<p>Is it possible to do this? Can I somehow tell Moq to perform certain actions within the constructor of the proxy it creates? Or will I need to define real classes extending <code>AbstractOutputter</code> just for unit testing?</p>\n"},{"tags":["asp.net","unit-testing","nunit","moq","nmock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12565944,"title":"NMock with Unity framework","body":"<p>I'm trying to write some Unit Tests in my ASP.Net application using NUnit and NMock.\nI Used MOQ and i wrote a test like below.</p>\n\n<pre><code>[Test]\n    public void ExecutePostProcessingAsyncAndFileCountTest()\n    {\n        var storage=new Mock&lt;IStorageService&gt;();\n        storage.Setup(x=&gt;x.UploadContent(\"\"));\n        var uc = new UnityContainer();\n        uc.RegisterInstance(typeof (IStorageService), storage.Object);\n        var mprovider=uc.Resolve&lt;StorageMultipartProvider&gt;();\n        mprovider.ExecutePostProcessingAsync();\n        Assert.True(mprovider.Files.Count&gt;0);\n    }\n</code></pre>\n\n<p>Here as u can see, I am using Unity framework with MOQ. What I want to do is to do the same thing with NMock. Is this possible? I mean, does NMock supports Unity framework?</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Thank you.</p>\n"},{"tags":["c++","unit-testing","testing","image-processing"],"answer_count":10,"favorite_count":5,"up_vote_count":15,"down_vote_count":0,"view_count":711,"score":15,"question_id":1283147,"title":"Is it possibile to use TDD with image processing algorithms?","body":"<p>Recently, I have worked in a project were TDD (Test Driven Development) was used. The project was a web application developed in Java and, although unit-testing web applications <a href=\"http://codebetter.com/blogs/ian%5Fcooper/archive/2008/07/07/tdd-and-hard-to-test-areas-part1.aspx\" rel=\"nofollow\">may not be trivial</a>, it was possible using mocking (we have used the Mockito framework).</p>\n\n<p>Now I will start a project where I will use C++ to work with image processing (mostly image segmentation) and I'm not sure whether using TDD is a good idea. The problem is that is very hard to tell whether the result of a segmentation is right or not, and the same problem applies to many other image processing algorithms.</p>\n\n<p>So, what I would like to know is if someone here have successfully used TDD with image segmentation algorithms (not necessarily segmentation algorithms).</p>\n"},{"tags":["java","unit-testing","junit","intellij-idea","lombok"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":226,"score":4,"question_id":10643936,"title":"Can't seem to get Lombok to work in unit tests","body":"<p>We've been putting together some (really simple) code in order to test out and introduce Lombok annotations into our project to make our code a bit nicer. Unfortunately, seems to break in testing, both through Maven and when the tests are run through IntelliJ.</p>\n\n<p>Our domain classes look something like:</p>\n\n<pre><code>package foo.bar;\n\nimport lombok.Data;\n\n@Data\npublic class Noddy {\n\n    private int id;\n    private String name;\n\n}\n</code></pre>\n\n<p>With a corresponding test:</p>\n\n<pre><code>package foo.bar;\n\nimport org.junit.Test;\nimport static org.junit.Assert.assertEquals;\n\npublic class NoddyTest {\n\n    @Test\n    public void testLombokAnnotations(){\n        Noddy noddy = new Noddy();\n        noddy.setId(1);\n        noddy.setName(\"some name\");\n        assertEquals(noddy.getName(), \"some name\");\n    }\n}\n</code></pre>\n\n<p>We have the aspectjrt dependency in Maven (as well as the relevant plugin in IntelliJ), and the aspectj-maven-plugin.</p>\n\n<p>We're running with Maven 2-style POMs, JSDK 1.6.0_31, Lombok 0.11.0:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;version&gt;0.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Are we doing something stupid or missing something obvious?</p>\n\n<p>It would be great if we can get this working, as I've had an eye to using Lombok in production for some time now.</p>\n\n<p>Many thanks,</p>\n\n<p>P.</p>\n\n<p>(FWIW, IntelliJ 11.1.2 has the Lombok plugin 0.4 and seems to be using ACJ for this project)</p>\n"},{"tags":["unit-testing","language-agnostic","dependency-injection"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12512985,"title":"Getting rid of 'new' operators for subcomponents objects","body":"<p>I've been reading Misko Hevery's <a href=\"http://misko.hevery.com/2008/10/21/dependency-injection-myth-reference-passing/\" rel=\"nofollow\">classic</a> <a href=\"http://misko.hevery.com/2008/07/08/how-to-think-about-the-new-operator/\" rel=\"nofollow\">articles</a> about Dependency injection, and basically 'separating the object graph creation code from the code logic'. </p>\n\n<p>The main idea seems to be \"get rid of the 'new' operators\", put them in dedicated objects ('Factories') and inject everything you depend on.\" </p>\n\n<p>Now, I can't seem to wrap my head about how to make this works with objects that are composed of several other components, and whose job is to isolate those components to the outerworld. </p>\n\n<h2>Lame example</h2>\n\n<p>A View class to represent a combination of a few fields, and a button. All the components depend on a graphical ui context, but you want to hide it behind the interfaces of each sub-component. </p>\n\n<p>So something like (in pseudo-code, language does not really matter I guess): </p>\n\n<pre><code>\nclass CustomView() {\n\n   public CustomView(UIContext ui) {\n        this.ui = ui\n   }\n\n   public void start() {\n\n      this.field = new Field(this.ui);\n      this.button = new Button(this.ui, \"ClickMe\");\n\n      this.button.addEventListener(function () {\n           if (field.getText().isEmtpy()) {\n              alert(\"Field should not be empty\");\n           } else {\n              this.fireValueEntered(this.field.getText());\n           }\n      });\n   }\n\n   // The interface of this component is that callers\n   // subscribe to \"addValueEnteredListener\"..)\n   public void addValueEnteredListener(Callback ...) {\n   }\n\n   public void fireValueEnteredListener(text) {\n     // Would call each listeners in turn\n   }\n}\n</code></pre>\n\n<p>The callers would do something like : </p>\n\n<pre><code>\n\n// Assuming a UIContext comes from somewhere...\nui = // Wherever you get UI Context from ?\nv = new CustomView(ui);\nv.addValueEnteredListener(function (text) {\n // whatever...\n});\n\n</code></pre>\n\n<p>Now, this code has three 'new' operators, and I'm not sure which one Misko (and other DI proponents) are advocating to rid off, or how.  </p>\n\n<h2>Getting rid of new Field() and new Button()</h2>\n\n<h3>Just Inject it</h3>\n\n<p>I don't think the idea here is to actually <em>inject</em> the instances of Field and Button , which could be done this way : </p>\n\n<pre><code>\nclass CustomView() {\n\n   public CustomView(Field field, Button button) {\n        this.field = field;\n        this.button = button;\n   }\n\n   public void start() {\n\n      this.button.addEventListener(function () {\n           if (field.getText().isEmtpy()) {\n              alert(\"Field should not be empty\");\n           } else {\n              this.fireValueEntered(this.field.getText());\n           }\n      });\n   }\n\n   // ... etc ... \n</code></pre>\n\n<p>This makes the code of the component lighter, surely, and it actually hides the notion of UI, so the MetaForm component has clearly been improved in terms of readability and testability.</p>\n\n<p><em>However</em>, the burden is now on the client to create those things : </p>\n\n<pre><code>\n\n// Assuming a UIContext comes from somewhere...\n\nui = // wherever ui gets injected from \n\nform = new Form(ui);\nbutton = new Button(ui);\n\nv = new CustomView(form, button);\nv.addValueEnteredListener(function (text) {\n // whatever...\n});\n\n</code></pre>\n\n<p>That sounds really troubling to me, espacially since the client know has to all the inners of the class, which sounds silly.</p>\n\n<h3>Mama knows, inject her instead</h3>\n\n<p>What the articles seems to advocate is instead injecting a Factory to create the components elements.</p>\n\n<pre><code>\nclass CustomView() {\n\n   public CustomView(Factory factory) {\n      this.factory = factory;\n   }\n\n   public void start() {\n\n      this.field = factory.createField();\n      this.button = factory.createButton();\n\n      this.button.addEventListener(function () {\n           if (field.getText().isEmtpy()) {\n              alert(\"Field should not be empty\");\n           } else {\n              this.fireValueEntered(this.field.getText());\n           }\n      });\n   }\n\n   // ... etc ... \n</code></pre>\n\n<p>And then everything gets nice for the caller, because its just has to get <em>the factory</em> from somewhere (and this factory will be the only to know about the UI context, so hurray for decoupling.)</p>\n\n<pre><code>\n\n// Assuming a UIContext comes from somewhere...\n\nfactory = // wherever factory gets injected from \n\nv = new CustomView(factory);\nv.addValueEnteredListener(function (text) {\n // whatever...\n});\n\n</code></pre>\n\n<p>A possible drawback is that when testing the MetaForm, you will typically have to use a 'Mock' Factory that ... create Mocks version of the Field &amp; Button classes. But obviously there is another drawback ... </p>\n\n<h3>Yo' Factory so fat!!</h3>\n\n<p>How big will the Factory get ? If you follow the pattern rigorously, then every single frigging component you ever want to create in you application at runtime (wich is typically the case for UI, right) will have to get its own createXXXXX methods in at least one factory. </p>\n\n<p>Because now you need : </p>\n\n<ul>\n<li>Factory.createField to create the field</li>\n<li>Factory.createButton to create the button</li>\n<li>Factory.createMetaForm to create the field, the button and the MetaForm when a client (say the MetaEditPage wants to use one)</li>\n<li>And obviously a Factory.createMetaEditPage for the client..</li>\n<li>... and its turtles all the way. </li>\n</ul>\n\n<p>I can see some strategies to simplify this : </p>\n\n<ul>\n<li>As much as possible, separate the parts of the graph that are created at \"startup\" time from the parts that are created at runtime (using an DI framework like Spring for the former, and factories for the latter)</li>\n<li>Layer the factories, or collocate related objects in the same factories (a UIWidgetFactory would make sense for Field and Button, but where would you put the other ones ? In a Factory linked to the Application ? To some other logical level ?)</li>\n</ul>\n\n<p><i>I can almost hear all the jokes from C guys that no Java app can do anything without calling a ApplicationProcessFactoryCreator.createFactory().createProcess().startApplication() chain of nonsense...</i></p>\n\n<p>So my questions are : </p>\n\n<ul>\n<li>I am completely missing a point here ? </li>\n<li>If not, which strategy would you suggest to make the things bearable ?</li>\n</ul>\n\n<h2>Addendum : why I'm not sure dependency injection would help</h2>\n\n<p>Assume I decide to use dependency injection, with a guice-like framework. I would end up writing code like this : </p>\n\n<pre><code>\nclass CustomView\n\n    @Inject\n    private Field fiedl;\n\n    @Inject\n    private Button button;\n\n    public void start() {\n      this.button.addEventListener(....\n\n// etc...\n</code></pre>\n\n<p>And then what ? </p>\n\n<p>How would my \"Composition Root\" make use of that ? I can certainely not configure a \"singleton\" (with a lowercase 's', as in 'the single instance of a class) for the Field and the Button (since I want to create as many instances of them as instances of MetaForm ? </p>\n\n<p>It would not make sense to use a Provider, since my problem is not which instance of buttons I want to create, but just that I want to create it lately, with some configuration (for example its text) that only makes sense for this form. </p>\n\n<p>To me DI is not going to help because I am new-ing <em>parts</em> of <em>my</em> component rather than Dependencies. And I suppose I could turn any subcomponent into a dependency, and let a framework inject them. It's just that injecting subcomponents looks <em>really</em> artificial and couter-intuitive to me, in this case... so again, I must be missing something ;)</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":39,"score":-2,"question_id":12558739,"title":"How to unit test the global.asax file?","body":"<p>In my application some variables are initialized when application start .i.e in global.aspx file</p>\n\n<pre><code>Application_start() \n{\n    //velocityhelper.TemplateLocatio is static class.\n    VelocityHelper.TemplateLocation = ConfigurationHelper.ContentLocation + \"/\"\n        + ConfigurationHelper.CultureId + \"/\" + \"Templates/\";    \n}\n</code></pre>\n\n<p>When we access the templatelocation variable it will returns null always. Can you please let me know how to initailze this template location.</p>\n"}]}
{"total":15323,"page":12,"pagesize":100,"questions":[{"tags":["java","unit-testing","junit","mockito","guidelines"],"answer_count":3,"favorite_count":0,"up_vote_count":10,"down_vote_count":0,"view_count":145,"score":10,"question_id":12539365,"title":"When to use Mockito.verify()","body":"<p>I write JUnits for 3 purposes:</p>\n\n<ol>\n<li>To ensure that my code satisfies all of the required functionality, under all (or most of) the input combinations/values.</li>\n<li>To ensure that I can change the implementation, and relay on JUnits to tell me that all my functionality is still satisfied.</li>\n<li>As a documentation of all the usecases my code handles, and act as a spec for refactoring - should the codeset ever needs to be rewritten. (Refactor the code, and if my jUnits fail - you probably missed some usecase).</li>\n</ol>\n\n<p>I do not understand why or when <em>Mockito.verify()</em> should be used. When I see <em>verify()</em> being called, it is telling me that my JUnit is becoming aware of the implementation. (Thus changing my implementation would break my jUnits, even though my functionality was unaffected). </p>\n\n<p>I'm looking for:</p>\n\n<ol>\n<li><p>What should be the guidelines for appropriate usage of <em>Mockito.verify()</em></p></li>\n<li><p>Is it fundamentally correct for jUnits to be aware of/tighty coupled to the implementation of the class under test?</p></li>\n</ol>\n"},{"tags":["javascript","eclipse","unit-testing"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1694,"score":2,"question_id":1968950,"title":"Javascript unit testing in eclipse","body":"<p>I am doing a firefox extension using eclipse and need to know how I can do unit testing for that project.</p>\n"},{"tags":["unit-testing","tdd"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":126,"score":0,"question_id":12489394,"title":"Is test driven development a form of unit testing","body":"<p>Our company is in the process of improving the code quality and processes to adopt when delivering a piece of code. My question is concerned to unit testing and I wanted to gather information on the processes you adopt when you are asked to implement a functionality.</p>\n\n<p>Is TDD a form of unit test. From what i understand in TDD, you write your test first (which fails), write your code and then run your test which should pass. It may be that the code will make external method call. But how are we suppose to know about the stubbing required when we are writing our test first?</p>\n\n<p>When you are building your application prior release, what kind of test do you include in the build? Does the build run your integration test or does it run only your unit test?</p>\n\n<p>Apart from TDD, do you write any other kind of test. Sorry if the question are slightly distorted. Your experience on how you undertake development is highly appreciated. Thanks</p>\n"},{"tags":["ios","unit-testing","core-data","nsfetchedresultscontrolle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12561309,"title":"Why is NSFetchedResultsController not calling controllerDidChangeContent: in my Kiwi test?","body":"<p><strong>What I Want</strong></p>\n\n<ul>\n<li>I want to test that when I set dependent properties on my Core Data object, NSFetchedResultsController updates correctly</li>\n</ul>\n\n<p><strong>The Problem</strong></p>\n\n<ul>\n<li>The controllerDidChangeContent: method is never called</li>\n</ul>\n\n<p><strong>What I've Tried</strong></p>\n\n<ul>\n<li>Simplified test - I was testing on a calculated dependent attribute. Now testing on isActive which is a simple Core Data attribute</li>\n</ul>\n\n<p><strong>The Setup</strong></p>\n\n<ul>\n<li>Kiwi for testing</li>\n<li>Core Data and mogenerator</li>\n<li><p>RestKit gives me helper methods</p>\n\n<ul>\n<li><code>object</code></li>\n<li><code>fetchAllSortedBy:ascending:withPredicate:groupBy:</code></li>\n</ul></li>\n<li><p>A dummy test delegate that waits until it's sent a <code>controllerDidChangeContent:</code> call</p></li>\n</ul>\n\n<p><strong>Code</strong></p>\n\n<p><strong>Kiwi Test - KPClientSpec</strong></p>\n\n<pre><code>describe(@\"#billAndPayBeingUpdated\", ^{\n    __block KPClient *clientA;\n    __block NSFetchedResultsController *controller;\n    context(@\"with two bill and pay clients\", ^{\n        beforeEach(^{\n            [KPCoreDataStoreResetter deleteAllObjects];\n\n            clientA = [KPClient object];\n            [clientA setName:@\"\"];\n            [clientA setIsSelfBillingValue:NO];\n            [clientA setIsScheduledValue:NO];\n            [clientA setIsActiveValue:YES];\n        });\n\n        // *** This passes.\n        it(@\"fetched objects result controller should show all self billing clients\", ^{\n            controller = [KPClient fetchAllSortedBy:@\"name\" ascending:NO withPredicate:[KPPredicateFactory activeClientsPredicate] groupBy:nil];\n            [[[controller fetchedObjects] should] haveCountOf:1];\n        });\n\n        // *** This fails.\n        it(@\"fetched results controller should change the number of clients when one is changed\", ^{\n            KPTestFetchedResultsControllerDelegate *testDelegate = [KPTestFetchedResultsControllerDelegate new];\n\n            controller = [KPClient fetchAllSortedBy:@\"name\" ascending:NO withPredicate:[KPPredicateFactory activeClientsPredicate] groupBy:nil];\n            [controller setDelegate:testDelegate];\n\n            [clientA setIsActiveValue:NO];\n            [testDelegate waitForControllerDidChangeContent];\n            [[[testDelegate latestObjects] should] haveCountOf:0];\n        });\n    });\n\n});\n</code></pre>\n\n<p><strong>KPPredicateFactory</strong></p>\n\n<pre><code>@implementation KPPredicateFactory\n\n+(NSPredicate *)shownTimesheetsPredicate {\n    NSPredicate *activeBillAndPayAgenciesPredicate = [NSPredicate predicateWithFormat:@\"isArchived == 0 AND client.isActive == 1 AND client.isBillAndPay == 1\"];\n    return activeBillAndPayAgenciesPredicate;\n}\n\n+(NSPredicate *)activeClientsPredicate {\n    NSPredicate *activeBillAndPayAgenciesPredicate = [NSPredicate predicateWithFormat:@\"isActive == 1 AND isBillAndPay == 1\"];\n    return activeBillAndPayAgenciesPredicate;\n}\n\n@end\n</code></pre>\n\n<p><strong>KPTestFetchedResultsControllerDelegate</strong></p>\n\n<pre><code>@implementation KPTestFetchedResultsControllerDelegate\n\n-(id)init {\n    self = [super init];\n    if (self) {\n        [self setTimeout:4];\n        _waitingForControllerDidChangeContent = YES;\n        _latestObjects = [NSArray array];\n    }\n\n    return self;\n}\n\n-(void)waitForControllerDidChangeContent {\n    NSDate *startDate = [NSDate date];\n\n    RKLogTrace(@\"%@ Awaiting response loaded from for %f seconds...\", self, self.timeout);\n    while (_waitingForControllerDidChangeContent) {\n        [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.01]];\n        if ([[NSDate date] timeIntervalSinceDate:startDate] &gt; self.timeout) {\n            [NSException raise:NSInternalInconsistencyException format:@\"*** Operation timed out after %f seconds...\", self.timeout];\n        }\n    }\n}\n\n-(void)controllerDidChangeContent:(NSFetchedResultsController *)controller {\n    _waitingForControllerDidChangeContent = NO;\n    _latestObjects = [controller fetchedObjects];\n}\n\n@end\n</code></pre>\n"},{"tags":["c#","asp.net","unit-testing","generic-handler"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":12560213,"title":"Unit Testing ASP.NET Generic Handlers without using HttpWebRequest","body":"<p>I need to create Unit test cases for my ASP.NET generic Handler. My Handler code is as below:</p>\n\n<pre><code>    public class MyHandler : IHttpHandler\n    {\n\n        public void ProcessRequest(HttpContext context)\n        {\n            context.Response.ContentType = \"text/plain\";\n            context.Response.Write(\"Hello World\");\n            var data = context.Request.InputStream;\n            //Here logic read the context.Request.InputStream\n            //All the data will be posted to this Stream\n            //Calling of business logic layer Methods\n        }\n\n        public bool IsReusable\n        {\n            get\n            {\n                return false;\n            }\n        }\n    }\n</code></pre>\n\n<p>Now, I need to create the Unit test cases for this Handler. I have tried following ways to do unit test cases.</p>\n\n<ul>\n<li>Making an <code>HttpWebRequest</code> to this handle and writing all the data to request stream. I don't want to proceed with this as we have separate tool which makes <code>HttpWebRequest</code> to test all handlers </li>\n<li>Creating Unit test cases for Business methods but in this i am unable to check some logic written in handler level.</li>\n</ul>\n\n<p>I have tried to Mock the HttpContext but it's not allowing to mock this (is it possible to to Mock HttpContent?). I tried<br>\n<a href=\"http://www.mattwrock.com/post/2011/12/07/Unit-Testing-ASPNet-Http-Handlers-and-a-discussion-of-Auto-Mocking-and-the-Testable-pattern.aspx\" rel=\"nofollow\">this</a> way but this needs modification to my handler also but i don't have provision to do this.</p>\n\n<p>Finally my questions is, Is there any other way to unit test handler?</p>\n\n<p>Thanks in Advance.</p>\n"},{"tags":["c#","unit-testing","mocking","vsto","nsubstitute"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":305,"score":1,"question_id":9816243,"title":"Mocked object doesn't have all properties shown in Intellisense - in one project but has them in the other","body":"<p>I'm mocking VSTO objects and in one project (I didn't write) it has this code:</p>\n\n<pre><code>var listOfSheets = new List&lt;Worksheet&gt;();\nvar mockSheets = Substitute.For&lt;Sheets&gt;();\nmockSheets.Count.Returns(listOfSheets.Count);\n</code></pre>\n\n<p>The Intellisense ToolTip for the mockSheets shows 6 properties:</p>\n\n<p><img src=\"http://i.stack.imgur.com/tc36r.png\" alt=\"NSubstitute All Properties\"></p>\n\n<p>The line with the break  point works in this project.</p>\n\n<p>However I have the same code in a different project (same references, namespaces, etc.), yet the Intellisense ToolTip for the mockSheets only shows 1 property: </p>\n\n<p><img src=\"http://i.stack.imgur.com/Ikp1O.png\" alt=\"NSubstitute Only one Property\"></p>\n\n<p>I know this is the root cause that I'm trying to solve, but fyi the actual problem is: </p>\n\n<blockquote>\n  <p>Cannot perform runtime binding on a null reference</p>\n</blockquote>\n\n<p><img src=\"http://i.stack.imgur.com/R1IVD.png\" alt=\"Cannot perform runtime binding on a null reference\"></p>\n\n<p>EDIT:</p>\n\n<p>The Sheet Object is mocked:</p>\n\n<pre><code>public static Worksheet Sheet\n{\n    get\n    {\n        var mockSheet = Substitute.For&lt;Worksheet&gt;();\n        mockSheet.Name = MockSheetName;\n        mockSheet.Visible = XlSheetVisibility.xlSheetVisible;\n\n        return mockSheet;\n    }\n}\n\npublic static Workbook Workbook()\n{\n    return Workbook(1);\n}\n</code></pre>\n"},{"tags":["unit-testing","productivity"],"answer_count":14,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":882,"score":6,"question_id":1264568,"title":"How does unit testing improve productivity?","body":"<p>I'm currently looking for ways to improve the productivity of our team. I've read in a number of places that unit testing can be used to improve productivity. I can imagine writing unit tests now can be helpful in the future, but does it help in the short term too? Because I don't understand how writing more code (=more potential bugs) can help us meet deadlines. </p>\n"},{"tags":["unit-testing","phpunit","zend-studio","zend-debugger"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12557676,"title":"Running PHPUnit Tests is Separate Processes","body":"<p>I'm working on an AOP framework so I need to redeclare some environment variables and re-include files which are re-compiled by the framework on each test. I'm trying to run each test in a separate process so that I can do this but I'm not sure of how to do this in Zend Studio.</p>\n\n<p>I've added the <code>@runTestsInSeparateProcesses</code> annotation to my tests but this causes the tests to fail with the error message:</p>\n\n<pre><code>testName: [Zend Debugger] Cannot receive start command\n</code></pre>\n\n<p>Has anyone been able to solve this error or find another way to run each test in a separate process in Zend?</p>\n"},{"tags":["python","unit-testing","template-method-pattern"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12545539,"title":"Template method invocation order in python","body":"<p>What would be the simplest way to unit-test <em>run</em> function? Here I'm not interested in what <em>fun</em>* functions do, but only if the order of their invocation is correct.</p>\n\n<pre><code>from mock import Mock\n\n(many, arguments, four, fun) = ('many', 'arguments', 'four', 'fun') \n\nclass TemplateMethod(object):\n\n    def fun1(self, many, parameters, go, here):\n        raise NotImplementedError()\n\n    @classmethod\n    def fun2(cls, many, parameters, go, here):\n        pass\n\n    @staticmethod\n    def fun3(many, parameters, go, here):\n        pass\n\n    def run(self):\n        result1 = self.fun1(many, arguments, four, fun)\n        result1.do_something()\n\n        self.fun2(many, arguments, four, fun)\n        self.fun3(many, arguments, four, fun)\n</code></pre>\n\n<p>The only requirement for the solution is non-intrusiveness towards the class under test.</p>\n\n<p><strong>SOLUTION:</strong></p>\n\n<p>This is somewhat of a draft, actually, and this simple class could be fixed and extended in so many ways that I don't care even to think about it. The point is that you can now simply record all the invocations of all the methods in a template method. You can also specify a list of object that shouldn't be mocked by the class (i.e. the function you are recording invocations for).</p>\n\n<p>Special thanks go to @Damian Schenkelman, who gave me some important pointers.</p>\n\n<pre><code>class MockingInvocationRecorder(object):\n\n    FUNCTION_TYPES = ('function', 'classmethod', 'staticmethod')\n\n    def __init__(self, obj, dont_mock_list):\n        self._invocation_list = []\n\n        name_list = [exc.__name__ for exc in dont_mock_list]\n        self._wrap_memfuns(obj, name_list)\n\n    @property\n    def invocations(self):\n        return tuple(self._invocation_list)\n\n    def _wrap_single(self, memfun, exclude_list):\n        def wrapper(*args, **kwargs):\n            self._invocation_list.append(memfun.__name__)\n\n            if memfun.__name__ in exclude_list:\n                return memfun(*args, **kwargs)\n            else:\n                return Mock()\n\n        return wrapper\n\n    def _wrap_memfuns(self, obj, exclude_list):\n        for (mem_name, mem) in type(obj).__dict__.iteritems():\n            if type(mem).__name__ in self.FUNCTION_TYPES:\n                wrapper = self._wrap_single(getattr(obj, mem_name), exclude_list)\n                setattr(obj, mem_name, wrapper)\n</code></pre>\n\n<p>You can now test invocation order by something like this:</p>\n\n<pre><code>tm = TemplateMethod()\nir = MockingInvocationRecorder(tm, [tm.run])\n\ntm.run()\n\nprint ir.invocations =&gt; ('run', 'fun1', 'fun2', 'fun3')\n</code></pre>\n\n<p>You can reference a member by class name:</p>\n\n<pre><code>ir = MockingInvocationRecorder(tm, [TemplateMethod.run])\n</code></pre>\n\n<p>Just be careful that you enlist all the methods that shouldn't be mocked away.</p>\n"},{"tags":["objective-c","unit-testing","gh-unit"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":236,"score":4,"question_id":5542430,"title":"How start GHUnit tests without tapping Run button?","body":"<p>I use GHUnit framework for testing static library. At this moment I need tap the button Run to start my tests. But I would like to start tests when application launched because I need teamcity launch my testApp. So how can I modified standart UI and start tests automatic?</p>\n"},{"tags":["unit-testing","mocking","tdd","winrt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12549162,"title":"TDD for Windows Store app development without mocks","body":"<p>Has anyone come up with a good TDD setup for Windows Store App development? I'm so used to using mocking frameworks, but this is no-longer an option since dynamic assembly generation is missing in WinRT. </p>\n\n<p>I have seen the alpha MoqRT framework, but I am hoping to avoid something in such experimental stages. I have also been so spoiled with using mock objects that I balk at using the stubs or shims offered as an alternative from Microsoft (Microsoft Fakes).</p>\n\n<p>Have any of you successfully figured out good techniques for doing Windows Store App development using DI and properly-isolated TDD-style unit tests? If so, what have you done?</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>I also notice that the \"Add Fakes Assembly\" option isn't present in my \"Windows Store App\" unit test project, so that maybe isn't an option.</p>\n"},{"tags":["unit-testing","inversion-of-control","integration-testing","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12504371,"title":"Using IOC To Configure Unit and Integration Tests","body":"<p>I have a unit test project which uses Ninject to mock the database repositories. I would like to use these same tests as integration tests and use Ninject to bind my real database repositories back into their respective implementations so as to test/stress the application into the DB.</p>\n\n<p>Is there a way to do this with Visual Studio 2012 or is there another test framework, other than MSTest, which allows for this type of configuration?</p>\n\n<p>I would really hate to rewrite/copy these unit tests into an integration test project but I suspect I could copy the files in as links and have a single test file compiled into two projects (Unit and Integration).</p>\n\n<p>Thanks\nTodd</p>\n"},{"tags":["asp.net","unit-testing","mocking","webformsmvp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12555415,"title":"is there any way to mock an implemented class","body":"<p>I want to <strong>unit test</strong> a <strong>MVP</strong> presenter class . but its interaction to the <strong>service</strong> is not through interface ( it uses a concrete class ) . now I wonder is there anyway to <strong>mock</strong> service class without being have to change the structure ? </p>\n"},{"tags":["unit-testing","gmock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":11133758,"title":"how to use gmock to mock this class that its instance as a class member in other class","body":"<p>I am a new user with gmock.\ni don't know how to use gmock to mock this class that its instance as a class member in other class.\nThe codes looks like below:</p>\n\n<pre><code>classs B\n{\n    B_fun();\n};\nclass A\n{\n    B b;\n    A_fun()\n    {\n    if( b.B_fun() === XXX )\n    {\n     doXXXXX...\n    }\n}\n</code></pre>\n\n<p>Now,I want to use gmock to mock B and then use mockB in the A's UnitTest.\nCould you please tell me how to do it.\nThanks!</p>\n"},{"tags":["java","unit-testing","testing","mocking","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":1526,"score":6,"question_id":3793791,"title":"Final method mocking","body":"<p>I need mock some class with final method using mockito. I have wrote something like this </p>\n\n<pre><code>@Test\npublic void test() {\n    B b = mock(B.class);\n    doReturn(\"bar called\").when(b).bar();   \n    assertEquals(\"must be \\\"overrided\\\"\", \"bar called\", b.bar());\n    //bla-bla\n}\n\n\nclass B {\n    public final String bar() {\n        return \"fail\";\n    }\n}\n</code></pre>\n\n<p>But it fails. \nI tried some \"hack\" and it works.</p>\n\n<pre><code>   @Test\n   public void hackTest() {\n        class NewB extends B {\n            public String barForTest() {\n                return bar();\n            }\n        }\n        NewB b = mock(NewB.class);\n        doReturn(\"bar called\").when(b).barForTest();\n        assertEquals(\"must be \\\"overrided\\\"\", \"bar called\", b.barForTest());\n    }\n</code></pre>\n\n<p>It works, but \"smells\".</p>\n\n<p>So, Where is the right way?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","unit-testing","google-app-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12504938,"title":"ATDD Google App Engine with Python - Trouble with Keys","body":"<p>My approach to this question might be completely wrong, so please don't hesitate to correct it. I also added ATDD in the question title, because I am trying to test the output of my web api which is bigger than just a unit test.</p>\n\n<p>I am using:</p>\n\n<ul>\n<li>Google App Engine 1.7.1</li>\n<li>GAE High Replication Datastore </li>\n<li>Python 2.7.3</li>\n</ul>\n\n<p>I setup my tests using the boilerplate code:</p>\n\n<pre><code>self.testbed = testbed.Testbed()\nself.testbed.activate()\nself.policy = datastore_stub_util.PseudoRandomHRConsistencyPolicy(probability=0)\nself.testbed.init_datastore_v3_stub()\n</code></pre>\n\n<p>Then I call a mock object setup to setup my entities and persist them to the testbed datastore. I use a counter to add 5 artists with artist_id 1 - 5:</p>\n\n<pre><code>def add_mock_artist_with(self, artist_id, link_id, name):\n    new_artist = dto.Artist(key_name=str(artist_id),\n        name=name,\n        link_id= str(link_id))\n    new_artist.put()\n</code></pre>\n\n<p>My test is that my web api returns:</p>\n\n<pre><code>{\n    \"artists\": [\n            {\n            \"artist\": {\n                \"name\": \"Artist 1\",\n                \"links\": {\n                    \"self\": {\n                        \"href\": \"https://my_server.com/artist/1/\"\n                    }\n                }\n            }\n        },\n.\n.\n.      \n            {\n            \"artist\": {\n                \"name\": \"Artist 5\",\n                \"links\": {\n                    \"self\": {\n                        \"href\": \"https://my_server.com/artist/5/\"\n                    }\n                }\n            }\n        }\n    ],\n    \"links\": {\n        \"self\": {\n            \"href\": \"https://my_server.com/artists/\"\n        }\n    }\n}\n</code></pre>\n\n<p>Initially I thought that if I were to startup a new test bed every time I run the tests, I could count on my artists being entered sequentially into the data store and therefore would get ids 1 - 5. My tests passed initially, but over time started to fail because of ids not matching (I would get a link like:  \"href\": \"https://my_server.com/artist/78/\"). I felt a little guilty relying on ids being generated sequentially, so I resolved to fix it. I stumbled upon the concept of a key being either a name or a generated id. I updated my templates for the returned JSON to use:   </p>\n\n<pre><code>artist.key().id_or_name()\n</code></pre>\n\n<p>In the case of a mock object, I supplied the key name on construction with:</p>\n\n<pre><code>key_name=str(artist_id) \n</code></pre>\n\n<p>For non-mock construction, I did not include that line of code and let GAE assign the id. </p>\n\n<p>Since my template used key().id_or_name() to output the property, all went well and the tests passed. </p>\n\n<p>However, now when I test the return of an individual artist which would be available by following <a href=\"http://my_server.com/artist/5/\" rel=\"nofollow\">http://my_server.com/artist/5/</a>, my test fails. To grab the artist out of the datastore, I use the following code:</p>\n\n<pre><code>def retrieve_artist_by(id):\n    artist = dto.Artist.get_by_id()\n</code></pre>\n\n<p>In production, this will work fine because it will all be id based. However, in my test, it is not finding anything because I have used the key_name=str(artist_id) in my mock construction, and the name is not the same as the id.</p>\n\n<p>I was hoping for something similar to:</p>\n\n<pre><code>artist = dto.Artist.get_by_id_or_name()\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["c#",".net","wpf","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12541027,"title":"Unit testing of WPF application","body":"<p>Here is a part of a code of a simple WPF application: 3 textboxes, a dropdownList and a button. By clicking a button, there will be checking of input values. </p>\n\n<pre><code>   private void Button_Click_1(object sender, RoutedEventArgs e)\n    {\n        if (textBox1.Text.Length&gt;127)\n            throw new ArgumentException();\n        if (string.IsNullOrEmpty(textBox2.Text))\n            errorsList.Add(\"You must to fill out textbox2\");\n        else if (string.IsNullOrEmpty(textBox3.Text))\n           errorsList.Add(\"You must to fill out textbox3\"); \n       else if\n        {\n            Regex regex = new Regex(@\".........\");\n            Match match = regex.Match(emailTxt.Text);\n            if (!match.Success)\n                errorsList.Add(\"e-mail is inlvalid\");\n        }\n        //.....\n     }\n</code></pre>\n\n<p>I have to test it by using any Unit testing Framework. I wonder is it possible to do Unit testing here? I guess it is not, right?</p>\n"},{"tags":["java","unit-testing","junit","text-files"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":739,"score":5,"question_id":3715743,"title":"How can I compare files in a JUnit test case?","body":"<p>I want to implement JUnit on a small project I'm working on because I want to learn a little bit about it.</p>\n\n<p>The tutorials that I read all make reference to methods that have a particular output.</p>\n\n<p>In my case my output are files, how can I do this? any simple example?\nany approach that could help me with this?</p>\n\n<p>The files are raw text files that are build by a void private method.</p>\n"},{"tags":["unit-testing","mocking","data-access-layer"],"answer_count":8,"favorite_count":3,"up_vote_count":18,"down_vote_count":0,"view_count":3296,"score":18,"question_id":310307,"title":"Mocking vs. Test DB?","body":"<p>Earlier I asked this question <a href=\"http://stackoverflow.com/questions/309708/how-to-correctly-unit-test-my-dal\">How to correctly unit test my DAL?</a>, one thing left unanswered for me is if to really test my DAL is to have a Test DB, then what is the role of mocking vs. a testing DB?</p>\n\n<p>To add on this, another person suggested to \"use transactions and rollback at the end of the unit test, so the db is clean\", test db that is.  What do you guys think of this testing + test DB + transaction rollback (so db is not really written) approach to test DAL?</p>\n\n<p>To be complete, my DAL is built with Entity Framework, there is no stored proc in DB.  Since EF is so new, I really need to test DAL to make sure they work correctly.</p>\n"},{"tags":["c++","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":7738549,"title":"Microsoft::VisualStudio::TestTools::UnitTesting to test c++ projects","body":"<p>Can I use Microsoft::VisualStudio::TestTools::UnitTesting to test C++ code?\nI mean I already have an existing C++ project which doesn't use .NET.</p>\n\n<p>Now I want to write unit tests to test this code.</p>\n\n<p>Can I use UnitTesting framework from Microsoft to test this native Cpp code?</p>\n\n<p>Thanks a lot </p>\n\n<p>Best Regards,\nMarc</p>\n"},{"tags":["c++","unit-testing","boost"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12536590,"title":"Using Boost C++ unit tests with visual studio and can't find .cpp files in other project","body":"<p>I have a solution where I've added and setup boost unit tests. The problem is that I have another project I'd like to test that has some classes in it. In fact, that project is the main reason I added boost.</p>\n\n<p>My project that needs testing is set to output as a .dll. And the problem is that, whenever my tests project needs to access code from the other projects, it can access the header just fine. However, if the header has unresolved code in it that's otherwise resolved in a .cpp file of the project with the objects, I receive a linking error. Is there a way around this? I'd ideally like to keep my objects in my other dll and then test them in my tests project. </p>\n"},{"tags":["unit-testing","testing","language-agnostic","white-box-testing","on-unit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":12538420,"title":"What is an ON-unit?","body":"<p><a href=\"http://rads.stackoverflow.com/amzn/click/1118031962\" rel=\"nofollow\">The Art of Software Testing</a> contains several references to \"<em>ON</em>-units\". Here is an example from the section on test-case design:</p>\n\n<blockquote>\n  <p>Decision coverage usually can satisfy statement coverage. Since every statement is on some subpath emanating either from a branch statement or from the entry point of the program, every statement must be executed if every branch direction is executed. There are, however, at least three exceptions:</p>\n  \n  <ul>\n  <li>Programs with no decisions.</li>\n  <li>Programs or subroutines/methods with multiple entry points. A given statement might be executed only if the program is entered at a particular entry point.</li>\n  <li>Statements within <em>ON</em>-units. Traversing every branch direction will not necessarily cause all <em>ON</em>-units to be executed.</li>\n  </ul>\n</blockquote>\n\n<p>I haven't seen the term <em>ON</em>-unit before, and I'm having trouble finding a definition on google. What is an <em>ON</em>-unit?</p>\n"},{"tags":["perl","unit-testing","perl-module"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":12523453,"title":"Test::Base::Filter arguments","body":"<p>In the <a href=\"http://search.cpan.org/perldoc?Test%3a%3aBase#Rolling_Your_Own_Filters\" rel=\"nofollow\">POD for Test::Base</a>, there is an example on rolling my own filters, which the documentation says is \"self explanatory\". I am having trouble understanding it and I think it may be a problem in my filter writing. The code is reproduced below:</p>\n\n<pre><code>use Test::Base;\n\nfilters 'foo', 'bar=xyz';\n\nsub foo {\n    transform(shift);\n}\n\nsub Test::Base::Filter::bar {\n    my $self = shift;       # The Test::Base::Filter object\n    my $data = shift;\n    my $args = $self-&gt;current_arguments;\n    my $current_block_object = $self-&gt;block;\n    # transform $data in a barish manner\n    return $data;\n}\n</code></pre>\n\n<p>The <code>filters</code> function sets the named subroutines as filters on the incoming data. The declared filters are 'foo' and 'bar', which has arguments. </p>\n\n<p>My question is why the structure of foo and bar are so different. Why is foo in the current namespace while bar is declared in the Test::Base::Filter namespace? And why does foo alter its first argument, while bar must grab the data from the second argument?</p>\n\n<p>Another example. In MyTest.pm:</p>\n\n<pre><code>package t::MyTest;\nuse Test::Base -Base;\n#some stuff here\n\npackage t::MyTest::Filter;\nuse base 'Test::Base::Filter';\n\nsub choose {\n    print @_;\n    return {foo =&gt; 'bar'} if($_[0] eq '1');\n    return undef;\n}\nsub is_defined{ \n    print @_;\n    defined $_[0];\n}\n</code></pre>\n\n<p>And in test.t:</p>\n\n<pre><code>use t::MyTest;\n\nfilters {input =&gt; [qw(choose is_defined)] };\n__END__\n=== First\n--- input\n1\n--- expected: 1\n=== Second\n--- input\n0\n--- expected: 0\n</code></pre>\n\n<p>If you place both of those in a \"t\" folder and run <code>prove -v</code>, this is the output:</p>\n\n<pre><code>t\\01-test.t .. Use of uninitialized value $_[1] in print at t/MyTest.pm line 14,\n &lt;DATA&gt; line 1.\n\n1\nt::MyTest::Filter=HASH(0x2af1670)ok 1 - First\n1..1\nFailed 1/1 subtests\n\nTest Summary Report\n-------------------\nt\\01-test.t (Wstat: 0 Tests: 0 Failed: 0)\n  Parse errors: Bad plan.  You planned 1 tests but ran 0.\nFiles=1, Tests=0,  1 wallclock secs ( 0.06 usr +  0.23 sys =  0.30 CPU)\nResult: FAIL\n</code></pre>\n\n<p>Nevermind the warning (which I don't completely understand the root of). Why is the first filter passed the input (like it's supposed to be), but the second one is passed some Filter object? Shouldn't the input of the second filter be the output of the first? If it isn't, then I have to worry about filter ordering all over the place.</p>\n"},{"tags":["c++","unit-testing","parsing","stub"],"answer_count":9,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":2022,"score":7,"question_id":236086,"title":"Parsing C++ to generate unit test stubs","body":"<p>I've recently been trying to create units tests for some legacy code.</p>\n\n<p>I've been taking the approach of using the linker to show me which functions cause link errors, greping the source to find the definition and creating a stub from that. </p>\n\n<p>Is there an easier way? \nIs there some kind of C++ parser that can give me class definitions, in some easy to use form, from which I can generate stubs?</p>\n"},{"tags":["c#","unit-testing","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12468330,"title":"VS2012 run new instance of program after test method is run","body":"<p>I have a static configuration class that gets loaded up with values when the program starts, and any further attemps to modify it throw exceptions.</p>\n\n<p>Unfortunately, VS2012's unit testing suite retains the same instance of the program running throughout tests, and on different tests I want to test different configurations. Is there a way to force the runner to \"reset\" the program or run further tests in a new instance of it? I'd like to do this in a way that avoids adding workaround code to the configuration class just to fit this scenario.</p>\n"},{"tags":["c++","unit-testing","gmock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12543274,"title":"GMOCK Error: Is MOCK_METHOD11 not allowed","body":"<p>When I am mocking a function that has 11 parameters it gives an error message:</p>\n\n<blockquote>\n  <p>error: 'function_name' is not a type</p>\n</blockquote>\n\n<p>I am using</p>\n\n<pre><code>MOCK_METHOD11(function_name,int(param1,param2,....,param11);\n</code></pre>\n\n<p>Is it that functions with 11 parameters cant be mocked?</p>\n"},{"tags":["unit-testing","ruby-on-rails-3.2","depot"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":10270379,"title":"Why is my image_url Unit Test failing? (from Agile Web Development with Rails 'Depot' tutorial)","body":"<p>I'm new and trying to learn Rails using the book <em>Agile Web Development with Rails, Fourth Edition</em> (for Rails 3.2). Been able to get through all of the chapters so far without hiccups. If there were errors, it was usually my sloppy code (forgetting a comma, 'end' statement, etc.). But now I've hit a snag in the chapter on Unit Testing for Models. At the part where we're validating that the image URL ends with either .gif, .jpg, or .png.</p>\n\n<p>I copied the code verbatim from the book for the depot/test/product_test.rb file:</p>\n\n<pre><code>    test \"image url\" do\n    ok = %w{ fred.gif fred.jpg fred.png FRED.JPG FRED.Jpg http://a.b.c/x/y/z/fred.gif }\n    bad = %w{ fred.doc fred.gif/more fred.gif.more }\n\n    ok.each do |name|\n        assert new_product(name).valid?, \"#{name} shouldn't be invalid\"\n    end\n    bad.each do |name|\n        assert new_product(name).invalid?, \"#{name} shouldn't be valid\"\n    end\n</code></pre>\n\n<p>But when I run the <strong>rake test:units</strong> command, I get the following failure...</p>\n\n<pre><code>1) Failure:\ntest_image_url(ProductTest)[../depot/test/unit/product_test.rb:46]:\nfred.gif shouldn't be invalid\n\n4 tests, 13 assertions, 1 failures, 0 errors, 0 skips\nrake aborted!\n</code></pre>\n\n<p>Does this mean that the image URL it's testing is invalid? Why is the test failing if what it says \"fred.gif shouldn't be invalid\" is correct?</p>\n\n<p>I'm pretty confident that it's this part of the test that must be incorrect because the other tests I have in there (ex. \"product attributes must not be empty\", \"product price must be positive\", etc.) run just fine. I get no failures if I take out the \"test image url\" code block.</p>\n\n<p>Please let me know what I'm doing wrong. If you need me to post the entirety of the ProductTest, I can.</p>\n"},{"tags":["php","unit-testing","tdd","phpunit"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":955,"score":6,"question_id":3917909,"title":"How to indicate that a PHPUnit test is expected to fail?","body":"<p>Is it possible to mark a test as \"expected to fail\" with PHPUnit?  This would be useful when performing TDD, and you want to distinguish between genuinely failed tests, and tests that happen to fail because the associated code hasn't been written yet.</p>\n"},{"tags":["ruby-on-rails-3","unit-testing","multiple-databases"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12543602,"title":"unit test with multiple database is not clearing test data","body":"<p>I am using multiple database in my application and I started to write unit test case(some of the model belongs to test and some other belongs to test_lis).\nwhen I run test case for model the test database defined in database.yml is cleared down between each test however test databases used with <strong>establish_connection</strong> in the AR models are not cleared down.For example</p>\n\n<p>database.yml.</p>\n\n<pre><code>test:\n   adapter: mysql2\n   database: mul_db_test\n   host: localhost\n   username: \n   password: \n\ntest_lis:\n   adapter: mysql2\n   database: mul_db_lis_test\n   host: localhost\n   username: \n   password: \n</code></pre>\n\n<p>model</p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\nend\n\nclass User &lt; ActiveRecord::Base\n  establish_connection Rails.configuration.database_configuration[\"#{Rails.env}_lis\"]\nend\n</code></pre>\n\n<p>I have written test case for Student and User model.\n<strong>Student</strong> test data is cleared after executing test case. But <strong>User</strong> test data is persist in table even after executing User test case</p>\n\n<p>same problem was posted in <a href=\"https://github.com/rspec/rspec-rails/issues/390\" rel=\"nofollow\">https://github.com/rspec/rspec-rails/issues/390</a></p>\n\n<p>Please any one help me to solve this problem</p>\n"},{"tags":["unit-testing","using","windows-store-apps"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12543130,"title":"How to add namespace in Unit Test Library(Windows store apps)?","body":"<p>I have some test class</p>\n\n<pre><code>using System;\nusing Microsoft.VisualStudio.TestPlatform.UnitTestFramework;\nusing Praktyka.Models;\n\nnamespace PraktykaTest\n{\n    [TestClass]\n    public class PictureManagerTest\n    {\n        [TestMethod]\n        public void LoadImagesTest()\n        {\n           var pic = new PictureManager();\n            pic.LoadImages(new List&lt;String&gt;\n                                               {\n                                                   \"1.jpg\",\n                                                   \"2.jpg\"\n                                               });\n\n          // Assert.AreEqual(@\"dataImages\\1.jpg\",pic.Current().UriSource);\n           Assert.AreEqual(\"test\",\"test\");\n        }\n    }\n}\n</code></pre>\n\n<p>I have compile error</p>\n\n<pre><code>The type or namespace name 'List' could not be found (are you missing a using directive or an assembly reference?)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>Cannot initialize object of type 'List&lt;string&gt;' with a collection initializer\n</code></pre>\n\n<p>How to add reference for correct working with Lists ?</p>\n"},{"tags":["c#",".net","unit-testing","junit","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12542073,"title":"Handle any error in NUnit","body":"<p>I have got a standard NUnit unit test. </p>\n\n<pre><code>    [TestFixture]\n    public class MyTest\n    {\n        [SetUp]\n        public virtual void Setup()\n        {   \n        }\n\n        [TearDown]\n        public void CleanUp()\n        {\n        }\n\n        [Test]\n        public void Test01()\n        {\n            Assert.AreEqual(10, 10);\n        }\n\n        [Test]\n        public void Test02()\n        {\n            Assert.AreEqual(4, 1);\n        }\n\n        [Test]\n        public void Test03()\n        {\n            Assert.AreEqual(1, 51);\n        }\n\n        //......a huge amount of Tests\n        [Test]\n        public void TestN()\n        {\n            Assert.AreEqual(1, 1);\n        }\n }\n</code></pre>\n\n<p>As you see, there are a lot of tests here. What I need to do is to handle any error in each test and to get the information about the error <strong>without</strong> modifying the body of a test method.</p>\n\n<p>So in <code>JUnit</code> there is an interface called <code>TestListener</code> which allows to handle any test error, see the error message, see the name of the test,  etc.</p>\n\n<p>I didn't find something similar in <code>NUnit</code>. Does it exist? Or is there is a way to do it?</p>\n"},{"tags":["objective-c","xcode","unit-testing","ocunit","xcode4.4"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":281,"score":2,"question_id":12308297,"title":"Some of my unit tests tests are not finishing in XCode 4.4","body":"<p>I have seen people posting about this here and elsewhere, but I haven't found any solution that works. I am using XCode 4.4 and have a bunch of unit tests set up. I have ran them all before on this project, so I know that they do pass/fail when they are supposed to if they are actually ran.</p>\n\n<p>I have about 15 test suits, and each one contains 1-7 tests. On most attempts, all of the test suits finished (and passed) except for 1 (FooTests). It gives the warning:</p>\n\n<pre><code>FooTests did not finish\n    testFoo did not finish\n</code></pre>\n\n<p>XCode will report that testing was successful, regardless of what happens in unfinished tests. Another thing to note, sometimes it is a different test that will not finish, and sometimes multiple suites will not finish. I have not noticed a case where all tests do finish, but judging by this seemingly random behaviour I believe that it is possible.</p>\n\n<p>So, is this a bug in XCode? I can't think of any other reason that tests randomly don't finish and then cause XCode to report that everything was successful. Are there any solutions?</p>\n"},{"tags":["python","django","unit-testing","tornado"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":125,"score":3,"question_id":10754912,"title":"Tornado. Django-like testrunner and test database","body":"<p>I like django unit tests, cause they create and drop test database on run. </p>\n\n<p>What ways to create test database for tornado exists? </p>\n\n<p><strong>UPD:</strong> I'm interested in postgresql test database creation on test run. </p>\n"},{"tags":["c++","unit-testing","boost"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12529470,"title":"Boost unit testing main function?","body":"<p>How do I define my own <code>main()</code> function when testing with boost?</p>\n\n<p>Boost is using it's own main function, but I'm using a custom memory manager and it needs to be initialized before any memory is allocated, otherwise I'll get errors.</p>\n"},{"tags":["python","unit-testing","debugging","return"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12540503,"title":"Function not returning what is expected, even when it appears to in debugger","body":"<p>Just a little background: This is for a STRIPS like program.\nThis test keeps returning false, even though it should be true. From what I can see in the debugger it should be true, and I can't see why it would be returning false.</p>\n\n<p><img src=\"http://i.stack.imgur.com/aaq1W.png\" alt=\"enter image description here\"></p>\n\n<p>Thanks for your help.\nDebugger image:</p>\n\n<p>World:</p>\n\n<pre><code>def __init__(self):\n    self.logic = {}\n    self.actions = {}\n    self.goals = set()\n    self.curr_state = set()\n</code></pre>\n\n<p>Testcase:</p>\n\n<pre><code>def setUp(self):\n    self.world = World()\n\ndef testWorldis_true(self):\n     pred = \"on\"\n     params = (\"A\", \"B\")\n     self.assertFalse(self.world.is_true(pred, params))\n     self.world.logic[pred] = params\n     self.assertTrue(self.world.is_true(pred, params))\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>======================================================================\nFAIL: testWorldis_true (objorstrippertests.TestWorldFunctions)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \".stripperAssignment\\src\\objorstrippertests.py\", line 54, in testWorldis_true\n    self.assertTrue(self.world.is_true(pred, params))\nAssertionError: False is not true\n</code></pre>\n"},{"tags":["iphone","objective-c","ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":9609850,"title":"performSelector not working in unit test Objective-C","body":"<p>I am trying to make a unit test for my application but performSelector doesn't work.\nI've tried</p>\n\n<p><code>[self performSelector:@selector(checkIDs:) withObject:nil];</code></p>\n\n<p>and performSelectorOnMainThread but for some reason the method doesn't get called.</p>\n\n<pre><code> [self checkIDs:nil] \n</code></pre>\n\n<p>seems to work fine but performSelector doesn't. Getting this method to get called is not my main concern. The reason for me asking is because I have a bigger problem but I think the reason is because performSelector isn't working.</p>\n\n<p>Am I missing something? Once again, this is for a Unit Test. Thanks!</p>\n"},{"tags":["c++","qt","unit-testing","cppunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12540244,"title":"CppUnit testing with existing project","body":"<p>I'm new to CppUnit testing and I have a basic set of questions.</p>\n\n<p>So, CppUnit tests need a main function to run.  However, I want this main to be separate from the main of the project I want to test.  So, since you can't have 2 main functions in one project I created a subproject (I'm using Qt by the way) which will house all of my test classes.  However, this seems to be causing its own set of issues since in Qt I can specify which subproject I want to run.  This may mean I can't make them subprojects and keep them separate.</p>\n\n<p>I'm used to JUnit, where there is a 1-to-1 pairing of classes to test classes and when I want to run a test case on a class, I would right-click it and run.  No main function needed.</p>\n\n<p>I guess I'm looking for an explanation of how to test a preexisting, mature project that doesn't currently have testing.  Everything I find assumes you're developing parallel the project and its testing.</p>\n\n<p>Thank you!</p>\n"},{"tags":["python","unit-testing","google-app-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":78,"score":3,"question_id":12474804,"title":"Running unit tests on production google app engine","body":"<p>Has anyone done tests on production (or on staging) as opposed to local tests on the dev server? is it a bad idea to try?</p>\n\n<blockquote>\n  <p>At first glance, App Engine and unit tests aren't a great fit. App\n  Engine requests can only be driven by http or xmpp. Unit tests are\n  typically initiated via command-line or IDE. App Engine requests are\n  limited to 30 seconds. A unit test suite may contain thousands of\n  tests that take far longer than 30 seconds to execute. How do we\n  bridge the gap?</p>\n</blockquote>\n\n<p>is there a python equivalent to <a href=\"http://code.google.com/p/cloudcover/\" rel=\"nofollow\">cloud cover</a>?</p>\n\n<p>I would love my app to have a webpage of checkbox's which allows me to select which tests to run and displays recent results for each test. (preferably without me writing my own version of unittest / unittest2</p>\n\n<p>While some of my tests may be local only, I think I may need to run some of these tests on production also. I may also have additional \"live only tests\".</p>\n\n<p>I guess my concern is how to run the local tests on live without having to maintain two separate sets of tests. And also how to run some tests on live without messing up the live data in the datastore. (yes some tests may use stubs or mocks but I might wanna check the production datastore or a staged version of it?)</p>\n\n<p>I haven't tried running a unit test on live, I assume via stdout unittest would log results to the <a href=\"https://developers.google.com/appengine/articles/logging\" rel=\"nofollow\">administration console</a> which probably wouldn't be as useful as having the results show up on a webpage that is used for running the tests.</p>\n\n<p>I would also want to <a href=\"http://stackoverflow.com/questions/3793860/how-to-set-up-a-staging-environment-on-google-app-engine\">set up staging before production</a> by changing the version number in app.yaml (combined with Namespaces, Versions and Multitenancy.. ). I could run tests on staging also.</p>\n\n<p>Anyone got a basic approach I should try?</p>\n"},{"tags":["unit-testing","garbage-collection","lua","pass-by-reference"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12539100,"title":"Will repeatedly passing a table to a function allocate more memory?","body":"<p>i have a function in Lua that operates on a table, repeatedly adding entries to the table:</p>\n\n<pre><code>function DoStuff()\n    local table = {};\n\n    for i = 1, 1000 do\n        local name, value = GetSomething(i);\n\n        if (CheckSomething(name, value))\n           table[name] = value\n        end;\n    end;\nend;\n</code></pre>\n\n<p>i know this is fast; Lua has a good hash table algorithm. But now i need to split out part of my function, so i may unit test it:</p>\n\n<pre><code>function DoStuff()\n    local table = {};\n\n    for i = 1, 1000 do\n        local name, value = GetSomething(i);\n\n        --split out checking so it's testable\n        table = ParseTheThing(table, name, value); \n    end;\nend;\n</code></pre>\n\n<p>i know that <a href=\"http://lua-users.org/lists/lua-l/2004-06/msg00257.html\" rel=\"nofollow\">Lua does not support passing paramters by <strong>reference</strong></a>, instead if i need to add an item to my <strong><code>table</code></strong>, Lua will make a copy and i must return that copy:</p>\n\n<pre><code>--Core checking function\nfunction ParseTheThing(table, name, value)\n   if (CheckSomething(name, value))\n      table[name] = value\n   end;\n\n   return table;\nend;\n</code></pre>\n\n<p>So it seems to me that every time i call <strong><code>CheckSomething</code></strong> Lua will create <em>another</em> table, that needs to be garbage collected.</p>\n\n<p>Or maybe not. Maybe Lua <strong>does</strong> support passing parameters by reference, and i can simply call:</p>\n\n<pre><code>ParseTheThing(table, name, value); \n\n--Core checking function\nfunction ParseTheThing(table, name, value)\n   if (CheckSomething(name, value))\n      table[name] = value\n   end;\nend;\n</code></pre>\n\n<hr>\n\n<p>Will Lua's garbage collector be forced into doing a lot more work if i refactor my code as i have done?</p>\n\n<hr>\n\n<p><strong>Notes</strong>: </p>\n\n<ul>\n<li>Don't confuse the simplified example used in the question with the question i'm asking.</li>\n<li>i don't have any way to measure memory usage, or number of collections, so i cannot <em>try it</em>.</li>\n</ul>\n"},{"tags":["java","unit-testing","junit","tdd","private"],"answer_count":30,"favorite_count":143,"up_vote_count":355,"down_vote_count":0,"view_count":57196,"score":355,"question_id":34571,"title":"What's the proper way to test a class with private methods using JUnit?","body":"<p>How do I use JUnit to test a class that has internal private methods? It seems bad to change the access modifier for a method just to be able to run a test. </p>\n"},{"tags":["c#",".net","unit-testing","mocking","moq"],"answer_count":2,"favorite_count":3,"up_vote_count":21,"down_vote_count":0,"view_count":7396,"score":21,"question_id":347818,"title":"Using Moq to determine if a method is called","body":"<p>Im very new to mocking frameworks, but I have decided to take a look at Moq. It is my understanding that I can test that a method call will occur if I call a higher level method i.e. </p>\n\n<pre><code>public abstract class SomeClass()\n{    \n    public void SomeMehod()\n    {\n        SomeOtherMethod();\n    }\n\n    internal abstract void SomeOtherMethod();\n}\n</code></pre>\n\n<p>Basically, all I want to test is that if I call SomeMethod() than I expect that SomeOtherMethod() will be called. </p>\n\n<p>Am I right in thinking this sort of test is available in a mocking framework?</p>\n"},{"tags":["visual-studio","unit-testing","resharper"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":137,"score":3,"question_id":12530602,"title":"Why resharper 7 tests session window does not show unit tests total execution time in Visual Studio 2012?","body":"<p>When I run unit tests and enabling test execution time display by pressing </p>\n\n<p><img src=\"http://i.stack.imgur.com/VYfkm.png\" alt=\"enter image description here\"></p>\n\n<p>this button, Resharper shows me execution time of each of the tests, but not the summary execution time, as on the next screen shot. My question is why and how can I fix or setup that?</p>\n\n<p><img src=\"http://i.stack.imgur.com/bVGjC.png\" alt=\"enter image description here\"></p>\n"},{"tags":["unit-testing"],"answer_count":16,"favorite_count":88,"up_vote_count":113,"down_vote_count":0,"view_count":20615,"score":113,"question_id":504737,"title":"Best unit test tutorials for beginners","body":"<p>Most decent programmers know that unit testing is important, but may not know where to begin.  For a long time I knew the benefits of unit testing, but could never seem to figure out where a good starting point was.</p>\n\n<p>Most articles I read on the subject dealt with the high level theoretical, rather than the down-and-dirty practical.  I've noticed that recently, some articles are appearing that create an application and then walk through where, and why, unit tests are applied to it.</p>\n\n<p>These articles still haven't fully risen to the surface yet; after all, the theoretical articles <em>are</em> good, but they may not be the best thing to start with when trying to learn a new concept.  What I want to know is, <strong>what is the best <em>practical</em> unit testing article or tutorial you know of?</strong>  (language doesn't matter)</p>\n\n<p>EDIT: I'm actually interested in amassing a list of tutorials, not complete books.</p>\n"},{"tags":["php","unit-testing","testing","phpunit"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":70,"score":4,"question_id":12526763,"title":"Does this PHPUnit test make any sense (or I'm testing the framework/PHP)?","body":"<p>I'm just beginning with PHPUnit and TDD.</p>\n\n<p>Among others, I can't really answer to this question: <em>Is this a good test? Am i actually testing my code or something already tested (i.e. the framework or PHP itself)?</em></p>\n\n<p>Little example, this is the test subject:</p>\n\n\n\n<pre class=\"lang-php prettyprint-override\"><code>class DateMax extends Constraint\n{\n    /**\n     * @var string\n     */\n    public $limit;\n\n    /**\n     * @var string\n     */\n    private $invalidLimit = 'Option \"limit\" should be a valid date/time string.';\n\n    public function __construct($options = null)\n    {\n        parent::__construct($options);\n\n        if(false === strtotime($this-&gt;limit)) {\n            throw new InvalidOptionsException($this-&gt;invalidLimit, ['limit']);\n        }\n    }\n}\n</code></pre>\n\n<p>I want to test that <code>InvalidOptionsException</code> is expected when invalid \"limit\" options are passed, otherwise <code>$constraint-&gt;limit</code> holds the correct value:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>/**\n * @dataProvider getInvalidLimits\n * @expectedException InvalidOptionsException\n */\npublic function testInvalidLimits($testLimit)\n{\n    new DateMax($testLimit);\n}\n\n/**\n * @dataProvider getValidLimits\n */\npublic function testValidLimits($testLimit)\n{\n    $constraint = new DateMax($testLimit);\n    $this-&gt;assertEquals($testLimit, $constraint-&gt;limit);\n}\n\n/**\n * @return array[]\n */\npublic function getInvalidLimits()\n{\n    return array(array('invalid specification'), array('tomorr'));\n}\n\n/**\n * @return array[]\n */\npublic function getValidLimits()\n{\n    return array(array('now'), array('+1 day'),array('last Monday'));\n}\n</code></pre>\n\n<p>So <strong>question is</strong> does this make any sense or I'm testing the framework/PHP itself?</p>\n"},{"tags":["unit-testing","phpunit","invocation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12507523,"title":"PHPUnit - When is a method counted as 'executed'/'called' by invocation count?","body":"<p>I got a problem with my PHPUnit test. I have a method like:</p>\n\n<pre><code>public function bla() \n{\n    $this-&gt;blub();\n}\n</code></pre>\n\n<p>$_testObject is a mocked instance of Foo, like this:</p>\n\n<pre><code>public function setUp()\n{\n    $this-&gt;_testObject = $this-&gt;getMockBuilder('Foo')\n                              -&gt;setMethods(array('blub'))\n                              -&gt;getMock();\n}\n</code></pre>\n\n<p>My test method is like:</p>\n\n<pre><code>/**\n * @test\n * @covers Foo::bla\n */\npublic function shouldCallBlubOnce() \n{\n    $this-&gt;_testObject-&gt;expects($this-&gt;once())\n                      -&gt;method('blub');\n\n    //forgot this one :D\n    $this-&gt;_testObject-&gt;bla();\n}\n</code></pre>\n\n<p>Result of this test delivers:</p>\n\n<pre><code>PHPUnit_Framework_ExpectationFailedException : \nExpectation failed for method name is equal to &lt;string:blub&gt; when invoked 1 time(s).\nMethod was expected to be called 1 times, actually called 0 times.\n</code></pre>\n\n<p>Thanks in advance. :)</p>\n"},{"tags":["iphone","objective-c","xcode","unit-testing","code-coverage"],"answer_count":3,"favorite_count":12,"up_vote_count":13,"down_vote_count":0,"view_count":3660,"score":13,"question_id":5852002,"title":"XCode - Code Coverage?","body":"<p>I need code coverage for my iphone app.</p>\n\n<p>Can anyone provide detailed information on how to get code coverage for Xcode 4?</p>\n\n<p>Thanks</p>\n"},{"tags":["javascript","jquery","unit-testing","qunit","zombie.js"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12526889,"title":"Verifying Qunit's results with Zombie.js","body":"<p>I am doing test-driven development with <a href=\"http://qunitjs.com/\" rel=\"nofollow\"><code>Qunit</code></a>: when creating a new function, I write tests for it, create the function, reload the page, and if all the tests pass I move on... Whilst this works fine at the beginning, it starts to become a time consuming process after a while as all the tests take several seconds to run, and that's the time I have to wait for every time I refresh my browser.</p>\n\n<p>In an attempt to workaround that problem, I thought about introducing <a href=\"http://zombie.labnotes.org/\" rel=\"nofollow\"><code>Zombie.js</code></a> to perform head-less testing: the idea is to have <code>Zombie.js</code> continuously check the webpage (e.g. <code>$ watch -n1 \"node queryTheWebpage.js\"</code>) and report to me <code>Qunits</code>'s results while coding (once in a while, as <code>Zombie.js</code> isn't a \"real\" browser, I would open up a browser and check the page manually to validate).</p>\n\n<p>So far here is what I have for my node/Zombie piece of code:</p>\n\n<pre><code>browser.visit(\"http://localhost/mywebpage.html\", function () {\n        var qunit_tests = browser.query('body');\n        console.log(qunit_tests.innerHTML);\n});\n</code></pre>\n\n<p>In the console output I do see the <code>Qunit</code> tests container <code>&lt;ol id=\"qunit-tests\"&gt;&lt;/ol&gt;</code> but it is empty which means when the <code>visit</code> callback function is called, the tests haven't run.</p>\n\n<p>I've tried to use the <code>wait</code> function to wait for the tests to run, but unsuccessfully:</p>\n\n<pre><code>function waitForQunitToEnd(window) {\n    var last = window.document.querySelector('selectorOfMyLastTest');\n    var first_failed = window.document.querySelector('li.failed');\n    return (last || first_failed);\n}\n\nbrowser.visit(\"http://localhost/mywebpage.html\", function () {\n    browser.wait(waitForQunitToEnd, function() {\n        var qunit_tests = browser.query('body');\n        console.log(qunit_tests.innerHTML); // still gives me empty &lt;ol id=\"qunit-tests\"&gt;&lt;/ol&gt;\n    });    \n});\n</code></pre>\n\n<p>I tried to play with the <code>waitFor</code> option (e.g. set to <code>5000</code>ms) but that didn't help either.</p>\n\n<p><strong>Q1: Is what I'm trying to do making sense, or is there a much simpler way of doing something similar?</strong></p>\n\n<p><strong>Q2: Do you know how I could get Zombie.js to wait for the Qunit tests to run?</strong></p>\n"},{"tags":["javascript","unit-testing","highcharts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12524768,"title":"Using OEM libraries in JS Unit testcases","body":"<p>I am writing a JS Unit Testcase for a Javascript which uses the Highcharts library.\nI am importing the required Javascript files. Still I am not able to create the Highcharts library functions inside my testcase.\nCan anyone please suggest a better way to do it?</p>\n"},{"tags":["unit-testing","powershell","psunit","pester"],"answer_count":0,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":56,"score":4,"question_id":12529632,"title":"Unit Testing frameworks for Powershell","body":"<p>There was a question asked 3 years ago about Powershell Unit Testing Frameworks, <a href=\"http://stackoverflow.com/questions/940497/how-to-do-tdd-and-unit-testing-in-powershell\">How to do TDD and unit testing in powershell?</a>, and all the frameworks were quite new at that moment:</p>\n\n<ul>\n<li>PSUnit: <a href=\"http://www.psunit.org/\" rel=\"nofollow\">http://www.psunit.org/</a> </li>\n<li>Pester: <a href=\"https://github.com/scottmuc/Pester\" rel=\"nofollow\">https://github.com/scottmuc/Pester</a> </li>\n<li>PowerSpec: at github /shishkin/PowerSpec</li>\n</ul>\n\n<p>After 3 years I suppose they've evolved and get mature. Now I would like to do TDD (never done before) and I don't know which one to use. Searching on Internet, it looks like PSUnit and Pester are the most used.</p>\n\n<p>Are you using them? Which are the pros and cons of each of them? Any recomendation?</p>\n\n<p>Thanks,</p>\n"},{"tags":["unit-testing","nunit","nant","parallel-processing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":586,"score":2,"question_id":1797119,"title":"Running NUnit Tests in parallel using NANT","body":"<p>We have different categories of tests under various assemblies. What is the best possible way to run them in parallel? I am aware of a  task in ant, is there any such task in NANT?</p>\n"},{"tags":["android","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":11329070,"title":"What is the best way to collect code coverage in android?","body":"<p>Sorry for such silly question, but anyway What is the best way to collect code coverage in android? I saw some posts here, but the last answers where from 2011, maybe there is some new up-to-date information already.</p>\n\n<p>The perfect solution for me is to find something like EMMA plug-in to eclipse.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing","maven"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":157,"score":1,"question_id":9496534,"title":"Test default values and expressions of Mojos using Maven Plugin Testing Harness:","body":"<p>I have a problem using the Maven Plugin Testing Harness (2.0-alpha1): When I want to test my Mojo, the default values and expressions for parameters are not applicable.\nI have the following parameter:</p>\n\n<pre><code>/**\n * &lt;p&gt;The output file to write the settings to.&lt;/p&gt;\n *\n * @parameter default-value=\"${project.build.directory}/myProperties.properties\" expression=\"${properties.file}\"\n */\n\nprivate String file;\n</code></pre>\n\n<p>When I run my unit tests this property is always null. I tried to inject a MavenProjectStub which returns <code>${project.build.directory}</code> successfully but this is not applied to my Mojo parameter.</p>\n\n<p>Is there any way to enable default values and expressions like <code>${project.build.directory}</code> inside my Mojos during the tests?</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12527370,"title":"AppDomain.CurrentDomain.BaseDirectory returns unit test project root location instead of source project","body":"<p>In my application project i have used AppDomain.CurrentDomain.BaseDirectory to get the file path. When i include the unit test in my project, the AppDomain.CurrentDomain.BaseDirectory returns unit test project directory instead of my source project while debugg. Can you please let me know how to resolve this issue?</p>\n\n<p>Thanks.</p>\n"},{"tags":["spring","hibernate","unit-testing","google-app-engine","google-cloud-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":312,"score":0,"question_id":10447117,"title":"unit testing spring/jpa/hibernate and google-appengine with cloud SQL : API package rdbms missing","body":"<p>I try to make a simple test with spring/jpa/hibernate and GAE/Google Cloud SQL.</p>\n\n<p>But I can't find the right configuration and I always keep getting :</p>\n\n<pre><code>Caused by: com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'rdbms' or call 'OpenConnection()' was not found.\n    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:98) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]\n    at com.google.appengine.api.rdbms.RdbmsApiProxyClient$ApiProxyBlockingInterface.makeSyncCall(RdbmsApiProxyClient.java:95) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]\n    at com.google.appengine.api.rdbms.RdbmsApiProxyClient$ApiProxyBlockingInterface.openConnection(RdbmsApiProxyClient.java:73) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]\n    at com.google.cloud.sql.jdbc.internal.SqlProtoClient.openConnection(SqlProtoClient.java:58) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]\n    at com.google.cloud.sql.jdbc.Driver.connect(Driver.java:66) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]\n    at com.google.cloud.sql.jdbc.Driver.connect(Driver.java:26) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]\n    at java.sql.DriverManager.getConnection(DriverManager.java:579) ~[na:1.7.0]\n    at java.sql.DriverManager.getConnection(DriverManager.java:190) ~[na:1.7.0]\n    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:192) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Final]\n</code></pre>\n\n<hr>\n\n<p>versions :</p>\n\n<ul>\n<li>Spring framework : 3.1.1 </li>\n<li>Hibernate : 4.1.2 </li>\n<li>Google App Engine : 1.6.4.1</li>\n</ul>\n\n<hr>\n\n<p>persistence.xml :</p>\n\n<pre><code>&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence\n      http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"\n    version=\"2.0\"&gt;\n\n    &lt;persistence-unit name=\"gae-test\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n        &lt;class&gt;com.gro.gae.domainmodel.user.UserEntity&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.MySQLDialect\"&gt;&lt;/property&gt;\n            &lt;property name=\"hibernate.show_sql\" value=\"true\"&gt;&lt;/property&gt;\n            &lt;property name=\"hibernate.hbm2ddl.auto\" value=\"update\"&gt;&lt;/property&gt;\n            &lt;property name=\"hibernate.connection.url\" value=\"jdbc:google:rdbms://sqlpetstocks:petstocks/dngdatabase\"&gt;&lt;/property&gt;\n            &lt;property name=\"hibernate.connection.driver_class\" value=\"com.google.appengine.api.rdbms.AppEngineDriver\"&gt;&lt;/property&gt;\n            &lt;property name=\"hibernate.connection.driver_class\" value=\"com.google.cloud.sql.Driver\"&gt;&lt;/property&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n\n&lt;/persistence&gt;\n</code></pre>\n\n<hr>\n\n<p>applicationContext.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:jpa=\"http://www.springframework.org/schema/data/jpa\"\n    xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\"&gt;\n\n    &lt;jpa:repositories base-package=\"com.gro.gae.persistence\"\n        factory-class=\"com.gro.gae.persistence.CustomJpaRepositoryFactoryBean\" /&gt;\n\n    &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"gae-test\" /&gt; \n    &lt;/bean&gt;\n\n    &lt;bean name=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;context:annotation-config /&gt;\n\n    &lt;tx:annotation-driven /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<hr>\n\n<p>unit test :</p>\n\n<pre><code>@RunWith(org.springframework.test.context.junit4.SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"classpath:applicationContext-persistence.xml\" })\n@TestExecutionListeners( { DependencyInjectionTestExecutionListener.class, TransactionalTestExecutionListener.class })\n@TransactionConfiguration(defaultRollback = true)\n@Transactional\npublic class ConfigurationTest  {\n\n    @Test\n    public void testConfig(){\n\n    }\n\n}\n</code></pre>\n\n<p>Any ideas ? </p>\n\n<p>Thanks</p>\n\n<p>Guillaume</p>\n"},{"tags":["python","unit-testing","mocking","closures"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12523189,"title":"How to mock nested functions?","body":"<p>The mocking library I use is ... <a href=\"http://www.voidspace.org.uk/python/mock/\" rel=\"nofollow\">mock</a>.</p>\n\n<p>I came across this \"mock nested functions\" problem when I tried to write test case for a function(legacy code).</p>\n\n<p>This function used a very complex nested function with heavy dependencies on other modules.</p>\n\n<p>I wonder if it's possible to mock nested functions with <code>mock</code>.</p>\n"},{"tags":["django","unit-testing","django-models","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":403,"score":4,"question_id":3690022,"title":"How to test Models in Django with Foreign Keys","body":"<p>I want to make sure I am testing Models/Objects in isolation and not as one huge system.</p>\n\n<p>If I have an Order object and it has Foreign Keys to Customers, Payments, OrderItems, etc. and I want to test Order functionality, I need to create fixtures for all of that related data, or create it in code. I think what I really need to be doing is mocking out the other items, but I don't see an easy (or possible) solution for that if I am doing queries on these Foreign Keys.</p>\n\n<p>The common solutions (fixtures) don't really let me test one Object at a time. I am sure this is partly caused by my app being <em>way</em> over coupled.</p>\n\n<p>I am trying my darndest to adopt TDD as my main method of working, but the way things work with Django, it seems you can either run very trivial unit tests, or these massive integration tests.</p>\n\n<p><strong>[Edit]</strong> Better explicit example and a some more humility</p>\n\n<p>What I mean is that <strong>I seem</strong> to be able to only run trivial unit tests. I have seen people with very well tested and granular modules. I am certain some of this can be followed back to poor design.</p>\n\n<p>Example:</p>\n\n<p>I have a model call Upsell which is linked to a Product model. Then I have a Choices model which are children of Upsell (do you want what's behind door #1, #2, #3).</p>\n\n<p>The Upsell model has several methods on it that derive items necessary to render the template from their choices. The most important one is that it creates a URL for each choice. It does this through some string mangling etc. If I wanted to test the Upsell.get_urls() method, I want to have it not depend on the values of choices in the fixtures, and I want to not have it depend on the value of Product in the fixtures.</p>\n\n<p>Right now I populate the db in the setUp method for the tests, and that works well with the way Django backs out the transaction every time, but only outside of setUp and tearDown. This works fairly well except some of the Models are fairly complex to set up, while I actually only need to get one attribute for it.</p>\n\n<p>I can't give you an example of that, since I can't accomplish it, but here is the type of thing I am doing now. Basically I input an entire order, create the A/B experiment it was attached to, etc. And that's not counting Product, Categories, etc. all set up by fixtures. It's not the extra work I am concerned as I can't even test one database-based object at a time. The Tests below are important, but they are integration tests. I would like to be building up to something like this by testing each item separately. As you pointed out, maybe I shouldn't have chosen a framework so closely tied to the db. Does any sort of dependency injection exist with something like this? (beyond my testing, but the code itself as well)</p>\n\n<pre><code>class TestMultiSinglePaySwap(TestCase):\n    fixtures = ['/srv/asm/fixtures/alchemysites.json','/srv/asm/fixtures/catalog.json','/srv/asm/fixtures/checkout_smallset.json','/srv/asm/fixtures/order-test-fixture.json','/srv/asm/fixtures/offers.json']\n\ndef setUp(self):\n    self.o = Order()\n    self.sp = SiteProfile.objects.get(pk=1)\n    self.c = Customer.objects.get(pk=1)\n    signals.post_save.disconnect(order_email_first, sender=Order)\n    self.o.customer = self.c\n    p = Payment()\n    p.cc_number = '4444000011110000'\n    p.cc_exp_month = '12'\n    p.cc_type = 'V'\n    p.cc_exp_year = '2020'\n    p.cvv2 = '123'\n    p.save()\n    self.o.payment = p\n    self.o.site_profile = self.sp\n    self.o.save()\n    self.initial_items = []\n    self.main_kit = Product.objects.get(pk='MOA1000D6')\n    self.initial_items.append(self.main_kit)\n    self.o.add_item('MOA1000D6', 1, False)\n    self.item1 = Product.objects.get(pk='MOA1041A-6')\n    self.initial_items.append(self.item1)\n    self.o.add_item('MOA1041A-6', 1, False)\n    self.item2 = Product.objects.get(pk='MOA1015-6B')\n    self.initial_items.append(self.item2)\n    self.o.add_item('MOA1015-6B', 1, False)\n    self.item3 = Product.objects.get(pk='STP1001-6E')\n    self.initial_items.append(self.item3)\n    self.o.add_item('STP1001-6E', 1, False)\n    self.swap_item1 = Product.objects.get(pk='MOA1041A-1')\n\ndef test_single_pay_swap_wholeorder(self):\n    o = self.o\n    swap_all_skus(o)\n    post_swap_order = Order.objects.get(pk = o.id)\n    swapped_skus = ['MOA1000D','MOA1041A-1','MOA1015-1B','STP1001-1E']\n    order_items = post_swap_order.get_all_line_items()\n    self.assertEqual(order_items.count(), 4)\n    pr1 = Product()\n    pr1.sku = 'MOA1000D'\n    item = OrderItem.objects.get(order = o, sku = 'MOA1000D') \n    self.assertTrue(item.sku.sku == 'MOA1000D')\n    pr2 = Product()\n    pr2.sku = 'MOA1015-1B'\n    item = OrderItem.objects.get(order = o, sku = 'MOA1015-1B') \n    self.assertTrue(item.sku.sku == 'MOA1015-1B')\n    pr1 = Product()\n    pr1.sku = 'MOA1041A-1'\n    item = OrderItem.objects.get(order = o, sku = 'MOA1041A-1') \n    self.assertTrue(item.sku.sku == 'MOA1041A-1')\n    pr1 = Product()\n    pr1.sku = 'STP1001-1E'\n    item = OrderItem.objects.get(order = o, sku = 'STP1001-1E') \n    self.assertTrue(item.sku.sku == 'STP1001-1E')\n</code></pre>\n\n<p>Note that I have never actually used a Mock framework though I have tried. So I may also just be fundamentally missing something here.</p>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":83,"score":3,"question_id":12519423,"title":"Will JUnit ever run test in parallel?","body":"<p>I was writting JUnit test. I would like to know if the tests within a test class can run in parallel.</p>\n\n<pre><code>class TestMyClass {\n\n    @Test\n    public void test1() {\n    }\n\n    @Test\n    public void test2() {\n    }\n\n}\n</code></pre>\n\n<p>Will Junit ever run test1() and test2() in parallel?</p>\n"},{"tags":["c#","unit-testing","verification","test-data","nbuilder"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":12315702,"title":"How to automatically create test data with builder that will take verifications into account","body":"<p>I am using <a href=\"http://nbuilder.org/\" rel=\"nofollow\">NBuilder</a> to create test data and my classes have a large number of properties so manual creation is out of question. Before I used NBuilder I copy pasted some SQL selects to csv files and recreated them in tests using automatic mapping. Now I want to use NBuilder or something else and I face the problem of Entity/DB restrictions.</p>\n\n<p>Is there any way I can tell some of those builders to take into account my Mapping file when generating data. For instance, if there is a mapping</p>\n\n<pre><code>  this.Property(t =&gt; t.SomeId)\n                .IsFixedLength()\n                .HasMaxLength(3);\n</code></pre>\n\n<p>I would expect the framework to generate test data for that property according to those requirements.</p>\n"},{"tags":["php","unit-testing","symfony2"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":366,"score":6,"question_id":10457247,"title":"Practices for database testing in Symfony2? How to isolate?","body":"<p>What are the current best practices for testing database interaction with Symfony2? I have a simple CRUD setup and i want to make sure my testing is OK. Right now, i have 4 tests, each one making sure that create, update, delete and list actions are occurring ok.</p>\n\n<p>I have two magic methods, __construct and __destruct, on my test case. Inside them, i call exec() with 'php app/console ...' in order to create the database, create the schema and later on drop the database. However, this is SLOW as hell and it happens all the time when i have more than one test case.</p>\n\n<p>How should i proceed when it comes to database testing and isolating such tests?</p>\n"},{"tags":["java","unit-testing","junit","junit4"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":238,"score":1,"question_id":4152539,"title":"How do I test exceptions in a parameterized test?","body":"<p>In JUnit4 you can write parameterized unit tests by providing parameters collection in one method, which will be passed to the constructor of the test and testing in another method. If I have a parameter for which I expect an exception to be thrown, how do I specify that?</p>\n"},{"tags":["unit-testing","asp.net-mvc-4","asp.net-4.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":156,"score":0,"question_id":12503403,"title":"Unit Testing MVC 4 RedirectToAction","body":"<p>I am trying to unit test the redirection of my controller in MVC 4 .Net 4.5. Here is an example:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>    [TestMethod]\n    public void Register_PassValidModel_RedirectToHomeIndexShouldBeTrue()\n    {\n        //Arrange\n        var registerModel = new RegisterModel\n        {\n            Email = \"validEmailAddress@domain.com\",\n            Password = \"password\"\n        };\n\n        //Assign\n        var result = _controller.Register(registerModel) as RedirectToRouteResult;\n\n        //Assert\n        result.RouteValues[\"Action\"].ShouldBeEqual(\"Index\");\n        result.RouteValues[\"Controller\"].ShouldBeEqual(\"Home\");\n    }\n</code></pre>\n\n<p>Here is the controller: </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>    [HttpPost]\n    public ActionResult Register(RegisterModel model)\n    {\n         if (ModelState.IsValid)\n        {\n            var userToRegister = new User { Email = model.Email, Password = model.Password };\n            var service = new UserService(_userRepository);\n\n            User user = service.RegisterUser(userToRegister);\n\n            if (user.UserErrorMessages.Count != 0)\n            {\n                user.UserErrorMessages.ForEach(x =&gt; ModelState.AddModelError(\"\", x));\n                return View(model);\n            }\n\n            SetCookie(model.Email);\n\n            return RedirectToAction(\"Index\", \"Home\");\n        }\n        return View(model);\n    }\n</code></pre>\n\n<p>The issue the variable <code>result</code> in the Unit Test is <code>null</code>. I found this code from someone who was working on a MVC 2 project and it seemed to work for him. Has something changed with MVC 4?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":33,"score":3,"question_id":12516881,"title":"assertRaises fails, even the callable raises the required exception (python, unitest)","body":"<p>I have the following test-code checking for an exception raising in a function. I expect the test to pass, but a failure is indicated instead. Here is the test code:</p>\n\n<pre><code>import unittest\n\n# define a user-defined exception\nclass MyException(Exception):\n    def __str__(self):\n        return repr(\"ERROR: Just raised my exception!\")\n\n# this is my main class with a method raising this exception\nclass MyMainObject(object):\n\n    def func(self):\n        raise MyException()\n\n# the test class\nclass TestConfig(unittest.TestCase):\n\n    def test_1(self):\n\n        other = MyMainObject()\n        self.assertRaises(MyException, other.func())\n\n# calling the test\nif __name__ == '__main__':    \n    unittest.main()\n</code></pre>\n\n<p>When <code>other.func()</code> is called in the assert statement, <code>MyException</code> is raised (can be checked easily). So, the <code>assertRaises</code> test should pass the test, as <code>other.func()</code> failes with <code>MyException</code>, BUT:</p>\n\n<pre><code>....\nMyException: 'ERROR: Just raised my exception!'\n\n----------------------------------------------------------------------\nRan 1 test in 0.001s\n\nFAILED (errors=1)\n</code></pre>\n\n<p>I do not see something wrong, so I would appreciate some input on this problem.</p>\n"},{"tags":["r","unit-testing","testthat"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12507229,"title":"How to make a test fail with the testthat package?","body":"<p>I have a test for which if the prerequisites are not met (e.g., missing file or something) I would like to make it fail.</p>\n\n<p>Just for clarification, here's an example I'd like to do:</p>\n\n<pre><code>test_that(\"...\", {\n    if ( ... precondition to execute the test is not met... ) {\n        expect_true(FALSE) # Make it fail without going further\n    }\n\n    expect_that( ... real test here ...)\n})\n</code></pre>\n\n<p><strong>Now my question is:</strong> Is there any <code>fail()</code>-like expectation in the <em>testthat</em> package or I have to write <code>expect_true(FALSE)</code> all the time?</p>\n"},{"tags":["javascript","unit-testing","testing","angularjs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":198,"score":1,"question_id":12515480,"title":"Inject Controller and Mock AngularJS Services","body":"<p>I've finally managed to complete a very simple end to end test, i.e.</p>\n\n<p>In <strong>scenarios.js:</strong></p>\n\n<pre><code>describe('My app', function () {\n    beforeEach(function () {\n        browser().navigateTo('/');\n    });\n\n    describe('On Load', function () {\n        it('Textbox should be blank', function () {\n            expect(input('textbox').val()).toBe('');\n        });\n    });\n});\n</code></pre>\n\n<p>And my <strong>runner.html</strong> looks like this:</p>\n\n<pre><code>&lt;head&gt;\n    &lt;title&gt;End2end Test Runner&lt;/title&gt;\n    &lt;script src=\"/js/libs/angular-scenario.js\" ng-autotest&gt;&lt;/script&gt;\n    &lt;script src=\"/js/libs/angular-mocks.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/js/test/e2e/scenarios.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>This boots up my site, navigates, and checks an input is blank. Ace.</p>\n\n<p><strong>However</strong> I would like to now add this test which expands on what I have so far:</p>\n\n<pre><code>describe('Click on Add', function () {\n    it('will add new item if valid', function () {\n        input('newItemName').enter('Test Item');\n        element('#add').click();\n        expect(input('newItemName').val()).toBe('');\n        expect(repeater('#items li').count()).toEqual(1);\n    });\n});\n</code></pre>\n\n<p>But before I run this test I want to Mock the storage service my app is dependant on.</p>\n\n<p>Here is my <strong>controller definition</strong>:</p>\n\n<pre><code>myapp.controller('MyController', ['$scope', '$routeParams', '$filter', 'storage',\n    function ($scope, $routeParams, $filter, storage) { \n        . . . . \n    }\n]);\n</code></pre>\n\n<p>And this is causing me problems (I think), because I want to do something like this:</p>\n\n<pre><code>describe('Controller Unit Tests', function(){\n    var ctrl;\n\n    beforeEach(function(){\n        ctrl = new MyController();\n    });\n\n    it('should ....', function() {\n        expect(true).toBe(true);\n    });\n});\n</code></pre>\n\n<p>But can't because of the way I am declaring my Controller. And the reason I am declaring my controller that way is for minification purposes...</p>\n\n<p>Does anyone have an advice on how this problem could be solved?!</p>\n"},{"tags":["c","windows","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12514408,"title":"Building CUnit on Windows","body":"<p>Has anyone managed to build the CUnit library for Windows?</p>\n\n<p>I want to run the same unit tests under Windows that I have currently developed under linux, so I need a windows version of the cunit shared library to link to</p>\n\n<p>I'm struggling badly</p>\n\n<p>have MinGW and MinGW MSYS tools installed so have a gcc compiler and Make and all that</p>\n\n<p>but trying the standard:</p>\n\n<pre><code>./configure\nmake\nmake install\n</code></pre>\n\n<p>fails on <code>./configure</code></p>\n\n<p>I've tried installing ftjam and following the instructions in the CUnit README  but its failing with:</p>\n\n<pre><code>jam -f Jambase install\nJambase: No such file or directory\ndon't know how to make install\n...found 1 target(s)...\n...can't find 1 target(s)...\n</code></pre>\n\n<p>fast running out of ideas here - any assistance gratefully receveived</p>\n"},{"tags":["python","unit-testing","function"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12513567,"title":"Python unittest for testing contents of a folder","body":"<p>I have a projects where I need to write a module containing a function to examine the contents of the current working directory and print out a count of how many files have each extension (\".txt\", \".doc\", etc.)</p>\n\n<p>Then I need to write a separate module to verify by testing that the function gives correct results.</p>\n\n<pre><code>import os\nfrom collections import Counter\n\nfilenames = {}\nextensions = []\nfile_counts = {}\nextensions2 = {}\n\ndef examine(): \n\n    for filename in filenames:\n        f = open(filename, \"w\")\n        f.write(\"Some text\\n\")\n        f.close()\n        name, extension = filename.split('.')\n        extensions.append(extension)\n\n    extensions2 = dict(Counter(extensions))\n\n    return extensions2\n</code></pre>\n\n<p>And this is the test:</p>\n\n<pre><code>import unittest\nimport tempfile\nimport os\nimport shutil\nimport examine_directory as examdir\n\nclass TestExamine(unittest.TestCase):\n    def setUp(self):\n        self.origdir = os.getcwd()\n        self.dirname = tempfile.mkdtemp(\"testdir\")\n        os.chdir(self.dirname)\n\n    examdir.filenames = {\"this.txt\", \"that.txt\", \"the_other.txt\",\"this.doc\",\"that.doc\",\"this.pdf\",\"first.txt\",\"that.pdf\"}\n\ndef test_dirs(self):\n    expected = {'pdf': 2, 'txt': 4, 'doc': 2}\n    self.assertEqual(examdir.extensions2, expected, \"Creation of files not possible\")\n\ndef tearDown(self):\n    os.chdir(self.origdir)\n    shutil.rmtree(self.dirname) \n\nif __name__ == \"__main__\":\n    unittest.main()\n</code></pre>\n\n<p>I'm stuck and I need some help. I'm getting an assertEqual error. </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing","grails","groovy","gorm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12513210,"title":"Mock dynamic finder","body":"<p>In tests i need to override function of some domain class, like this</p>\n\n<pre><code>SomeDomain.countBySomeField(Paramater)\n</code></pre>\n\n<p>To solve this i tried</p>\n\n<pre><code>@Mock([SomeDomain])\nclass SomeDomainTests ...\n...\n    void test() {\n        SomeDomain.metaClass.static.countBySomeField = { -&gt; 1}\n    }\n</code></pre>\n\n<p>But when this method invoke in controller(that was invoked by test), what i expet not happen. Probably, you say go read documentation, but i didnt find someting that will tell me how to do this. I will be grateful for any article or example that can say me where im wrong.    </p>\n"},{"tags":["unit-testing","strict-weak-ordering"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":12512969,"title":"generic algorithm to proof strict weak ordering","body":"<p>Shaving of my beard, I recovered some shards of torn up parchment containing a faulty <code>less_than</code> implementation.  Assembling the jigsaw, I found this:</p>\n\n<pre><code>struct MyStruct {\n  A a;\n  B b;\n  ...\n  Z z;\n};\n\nbool operator&lt;( MyStruct lhs, MyStruct rhs ) {\n   return ( lhs.a &lt; rhs.a ) || (lhs.b &lt; rhs.b);\n}\n</code></pre>\n\n<p>Of course, with this implementation, { 1,2 } &lt; { 2,1 }, but { 2,1 } &lt; { 1,2 } too, which makes it unsuitable for sorting algorithms (or anything else, for that matter).</p>\n\n<p>And it seems that I'm not the only one making mistakes.</p>\n\n<p>So I was thinking up an algorithm to test strict total ordering implementations.  Is it enough to compose an ordered list, and check whether every element compares less than it's successors?</p>\n\n<pre><code>for( A a=0; a != a_max; ++a )\nfor( B b=0; b != b_max; ++b )\n...\nfor( Z z=0; z != z_max; ++z )\n  elements.push_back( X(a,b,...,z) );\n\nfor( auto itFirst=begin(elements); itFirst !=end(elements); ++itFirst ) {\n   const auto&amp; first=*itFirst;\n   assert(!(first&lt;first));\n\n   for(auto itSecond=itFirst+1;itSecond!=end(elements);++itSecond){\n     const auto &amp; second=*itSecond;\n     assert(first&lt;second);\n     assert(!(second&lt;first));\n   }\n}\n</code></pre>\n\n<p>Would this be enough to proof the comparison operator?</p>\n"},{"tags":["unit-testing","testing","angularjs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":136,"score":0,"question_id":12509073,"title":"AngularJS Test Example","body":"<p>I don't know why but I'm finding it really difficult to get my head around setting up a JavaScript test using AngularJS.</p>\n\n<p>I have my app.js, controller.js plus a number of other files for Ajax, Storage services, filters etc. My app works fine but I want to learn how to do E2E and unit testing.</p>\n\n<p>I think I need to create a standalone HTML page that runs my tests, but I'm not sure, I'm also not sure which extra JavaScript files/libraries I might need.</p>\n\n<p>Is there an AngularJS test example I could use to get the initial set-up?</p>\n\n<p><em>Ideally I'd like to run the JS tests I create from within Visual Studio 2012...but that's a nice to have!</em></p>\n"},{"tags":["unit-testing","scala","specs","specs2"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12511310,"title":"Seq empty test with specs2","body":"<p>How can I check if a <code>Seq[String]</code> is empty or not using specs2 in Scala ? I am using <code>seq must be empty</code> or <code>seq.length must be greaterThan(0)</code> but I end up always with type mismatch errors.</p>\n\n<p>ret is Seq[String]</p>\n\n<pre><code>ret.length must be greaterThan(0)\n\n[error] ApiTest.scala:99: type mismatch;\n[error]  found   : Int\n[error]  required: org.specs2.matcher.Matcher[String]\n[error]         ret.length must be greaterThan(0)\n</code></pre>\n"},{"tags":["php","unit-testing","symfony2"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":621,"score":3,"question_id":8972737,"title":"Access Symfony 2 container via Unit test?","body":"<p>How do I access the Symfony 2 container within a Unit test? My libraries need it so it's essential.</p>\n\n<p>The test classes extend <code>\\PHPUnit_Framework_TestCase</code> so there is no container.</p>\n"},{"tags":[".net","unit-testing","nunit","code-coverage","opencover"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":335,"score":1,"question_id":9609760,"title":"NUnit tests failing within OpenCover","body":"<p>My tests work just fine when executed directly with NUnit, but when executed through OpenCover (still with NUnit as the test runner), I get following errors:</p>\n\n<pre><code>ProcessModel: Default    DomainUsage: Single\nExecution Runtime: Default\n\n.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F\n.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F. F.F.F.F.F.F.F.F.F.F.F.F.F.F.F\n.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F\n.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F.F\nTests run: 200, Errors: 0, Failures: 200, Inconclusive: 0, Time: 0,5410309 seconds\n   Not run: 0, Invalid: 0, Ignored: 0, Skipped: 0\n\nErrors and Failures:\n1) SetUp Error : GeoGen.Studio.PlugInLoader.LoaderTests\n   SetUp : System.MissingMethodException : Method not found: 'VoidSystem.CannotUnloadAppDomainException.SafeVisited(Int32)'.\n       at GeoGen.Studio.PlugInLoader.LoaderTests..ctor()\n\n2) Parent Failure : GeoGen.Studio.PlugInLoader.LoaderTests.AddPlugIn_ValidPlugIn_CreatesInstance\n   TestFixtureSetUp failed in LoaderTests\n</code></pre>\n\n<p>The error 2 is repeated for every test. All the tests are supposed to pass (and they pass in NUnit). Coverage was working correctly with NCover, but its trial expired and I can't afford the license.</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["unit-testing","web-applications","tdd"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":196,"score":2,"question_id":20511,"title":"How do you unit test web apps hosted remotely?","body":"<p>I'm familiar with TDD and use it in both my workplace and my home-brewed web applications.  However, every time I have used TDD in a web application, I have had the luxury of having full access to the web server.  That means that I can update the server then run my unit tests directly from the server.  My question is, if you are using a third party web host, how do you run your unit tests on them?</p>\n\n<p>You could argue that if your app is designed well and your build process is sound and automated, that running unit tests on your production server isn't necessary, but personally I like the peace of mind in knowing that everything is still \"green\" after a major update.</p>\n\n<hr>\n\n<p>For everyone who has responded with \"just test before you deploy\" and \"don't you have a staging server?\", I understand where you're coming from.  I do have a staging server and a CI process set up.  My unit tests do run and I make sure they all pass before an an update to production.  </p>\n\n<p>I realize that in a perfect world I wouldn't be concerned with this.  But I've seen it happen before.  If a file is left out of the update or a SQL script isn't run, the effects are immediately apparent when running your unit tests but can go unnoticed for quite some time without them.</p>\n\n<p>What I'm asking here is if there is any way, if only to satisfy my own compulsive desires, to run a unit test on a server that I cannot install applications on or remote into (e.g. one which I will only have FTP access to in order to update files)?</p>\n"},{"tags":["android","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":402,"score":1,"question_id":10384386,"title":"java.lang.UnsatisfiedLinkError: dbopen","body":"<p>I am trying to write an Android test case on a block of code in the android application.the block of code will interact with the database (sqlcipher library functions) specifically dbopen() function. When running the application, it is working fine. When we were trying to execute the test case for that block of code(which involves database interaction). It is giving following error: java.lang.UnsatisfiedLinkError: dbopen</p>\n\n<p>Could any look into this and suggest.</p>\n\n<p>Can't a test case has authority to call a function which is calling sqlcipher library functions.\n Any permissions required, or Any specific procedure is there for this type of test cases ?</p>\n\n<p>complete Error log:</p>\n\n<pre><code>            04-30 12:08:33.997: I/TestRunner(2169): started: teststateMachine(com.americanlogistics.mdd.rhapsody.view.test.SigninViewsateMachineTest)\n            04-30 12:08:34.147: W/dalvikvm(2169): No implementation found for native Linfo/guardianproject/database/sqlcipher/SQLiteDatabase;.dbopen (Ljava/lang/String;I)V\n            04-30 12:08:34.164: I/TestRunner(2169): failed: teststateMachine(com.americanlogistics.mdd.rhapsody.view.test.SigninViewsateMachineTest)\n            04-30 12:08:34.164: I/TestRunner(2169): ----- begin exception -----\n            04-30 12:08:34.184: I/TestRunner(2169): java.lang.UnsatisfiedLinkError: dbopen\n            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteDatabase.dbopen(Native Method)\n            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteDatabase.&lt;init&gt;(SQLiteDatabase.java:1870)\n            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteDatabase.openDatabase(SQLiteDatabase.java:863)\n            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:897)\n            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:107)\n            04-30 12:08:34.184: I/TestRunner(2169):     at com.americanlogistics.mdd.rhapsody.database.SendQueueDBAdapter.open(SendQueueDBAdapter.java:45)\n            04-30 12:08:34.184: I/TestRunner(2169):     at com.americanlogistics.mdd.rhapsody.database.SendQueueDBAdapter.databaseHelperInstance(SendQueueDBAdapter.java:38)\n            04-30 12:08:34.184: I/TestRunner(2169):     at com.americanlogistics.mdd.rhapsody.common.ApplicationController.startDatabase(ApplicationController.java:530)\n            04-30 12:08:34.184: I/TestRunner(2169):     at com.americanlogistics.mdd.rhapsody.view.test.SigninViewsateMachineTest.teststateMachine(SigninViewsateMachineTest.java:61)\n            04-30 12:08:34.184: I/TestRunner(2169):     at java.lang.reflect.Method.invokeNative(Native Method)\n            04-30 12:08:34.184: I/TestRunner(2169):     at java.lang.reflect.Method.invoke(Method.java:507)\n            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestCase.runTest(TestCase.java:154)\n            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestCase.runBare(TestCase.java:127)\n            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestResult$1.protect(TestResult.java:106)\n            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestResult.runProtected(TestResult.java:124)\n            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestResult.run(TestResult.java:109)\n            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestCase.run(TestCase.java:118)\n            04-30 12:08:34.184: I/TestRunner(2169):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)\n            04-30 12:08:34.184: I/TestRunner(2169):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)\n            04-30 12:08:34.184: I/TestRunner(2169):     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)\n            04-30 12:08:34.184: I/TestRunner(2169):     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448)\n            04-30 12:08:34.184: I/TestRunner(2169): ----- end exception -----\n</code></pre>\n\n<p>Code:</p>\n\n<p>The below line in the test case is indirectly calling sqlcipher library function.</p>\n\n<p>ApplicationController.getInstance().startDatabase(this.getContext().getApplicationContext());</p>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","rails-engines"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12281397,"title":"Integration testing of spree (alongside refinery)","body":"<p>I have just started a new rails app. So far there are no controllers or models there is simply the two engines: refinery and spree working next to each other.</p>\n\n<p>They are mounted as following:</p>\n\n<pre><code>Store::Application.routes.draw do\n\n  mount Spree::Core::Engine, :at =&gt; '/shop'\n  mount Refinery::Core::Engine, :at =&gt; '/'\n\nend\n</code></pre>\n\n<p>Now i have set up a few pages using refinery so when I go to / then i see the refinery home page and can click the about us page etc. When i go to /shop then i see the spree section of the site which is also working well.</p>\n\n<p>Now i would like to write a small test that the spree engine is correctly mounted at '/shop'. I tried with the following test:</p>\n\n<pre><code>require 'test_helper'\n\nclass SpreeEngineTest &lt; ActionDispatch::IntegrationTest\n\n  test \"has been correctly mounted\" do\n    get \"/shop\"\n    assert_response :success\n  end\n\nend\n</code></pre>\n\n<p>But it fails with the result:</p>\n\n<pre><code>Expected response to be a &lt;:success&gt;, but was &lt;302&gt;\n</code></pre>\n\n<p>I looked into the body of the request and it contains the following:</p>\n\n<pre><code>\"&lt;html&gt;&lt;body&gt;You are being &lt;a href=\\\"http://www.example.com/refinery/users/register\\\"&gt;redirected&lt;/a&gt;.&lt;/body&gt;&lt;/html&gt;\"\n</code></pre>\n\n<p>I am using the standard testunit package and rails 3.2</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["unit-testing","c++-cli","nunit","category"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12510366,"title":"How do I set a category attribute for NUnit C++/CLI tests?","body":"<p>I'm trying to set a category so I can exclude hardware tests on our build server:</p>\n\n<pre><code>namespace MyNamespace\n{\n    using namespace NUnit::Framework;\n\n    [TestFixture]\n    [Category(\"RequiresHardware\")]\n    public ref class UnitTest_SomeHardwareTests\n    {\n        ...\n    };\n}\n</code></pre>\n\n<p>...but I get an error when I try and use categories:</p>\n\n<pre><code>1&gt;c:\\projects\\testing\\UnitTest_MainSystem.h(14) : error C2872: 'CategoryAttribute' : ambiguous symbol\n1&gt;        could be 'c:\\program files (x86)\\nunit 2.5.9\\bin\\net-2.0\\framework\\nunit.framework.dll : NUnit::Framework::CategoryAttribute'\n1&gt;        or       'c:\\windows\\microsoft.net\\framework\\v2.0.50727\\system.dll : System::ComponentModel::CategoryAttribute'\n</code></pre>\n\n<p>How do I tell it to use NUnit?</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12510412,"title":"Python unittest: Reporting Exception as Failure","body":"<p>I want to check for an exception in Python unittest, with the following requirements:</p>\n\n<ul>\n<li>Needs to be reported as a failure, NOT an error</li>\n<li>Must not swallow the original exception</li>\n</ul>\n\n<p>I've seen lots of solutions of the form:</p>\n\n<pre><code>try:\n    something()\nexcept:\n    self.fail(\"It failed\")\n</code></pre>\n\n<p>Unfortunately these solutions swallow the original exception.  Any way to retain the original exception?</p>\n\n<p>I ended up using a variant of Pierre GM's answer:</p>\n\n<pre><code>try:\n   something()\nexcept:\n    self.fail(\"Failed with %s\" % traceback.format_exc())\n</code></pre>\n"},{"tags":[".net","unit-testing","code-generation","pex"],"answer_count":2,"favorite_count":8,"up_vote_count":21,"down_vote_count":0,"view_count":1798,"score":21,"question_id":2704669,"title":"Is Pex (Test generation) really useful tool?","body":"<p>Yes, it is possible to generate tests on boundary values for functions like \"Sum\" or \"Divide\". Pex is a good tool here.</p>\n\n<p>But more often we create tests on business behaviour. Let's consider example from classic Beck's tdd book:</p>\n\n<pre><code>[Test]\npublic void ShouldRoundOnCreation()\n{\n  Money money = new Money(20.678);\n  Assert.AreEqual(20.68,money.Amount);\n  Assert.AreEqual(2068,money.Cents);\n}\n</code></pre>\n\n<p>Can this test be generated? No :) 95 % of tests in my projects check business logic, and can not be generated. </p>\n\n<p>Pex (Especially in pair with Moles) can give 100% code coverage, but a high code coverage rate of a test suite does never indicate, that code is well tested - It only gives false confidence that everything is tested. And this is very dangerous.</p>\n\n<p>So, the question is - Is Pex really useful tool?</p>\n"},{"tags":["python","unit-testing"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":132,"score":3,"question_id":12487532,"title":"How do I skip a whole Python unittest module at run-time?","body":"<p>I would like my Python unittest module to tell the test runner to skip its entirety under some situations (such as being unable to import a module or locate a critical resource).</p>\n\n<p>I can use <code>@unittest.skipIf(...)</code> to skip a unittest.TestCase class, but how do I skip the <strong>entire module</strong>? Applying skips to every class is not sufficient because the class definitions themselves could cause exceptions if a module fails to import.</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","code-first"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":71,"score":3,"question_id":12510001,"title":"How does the MVC framework validate a code first POCO with DataAnnotations?","body":"<p>In my unit tests, I would like to force the validation of a code first POCO that has DataAnnotations on it.</p>\n\n<p>The MVC framework bust be doing it behind the scenes, and basically I would like to know how, so I can hopefully make use of it.</p>\n"},{"tags":["javascript","unit-testing","resharper","qunit","resharper-7.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12496879,"title":"ReSharper does not recognize custom qunit tests","body":"<p>I want to use ReSharper to run my javascript unit tests. But I don't get ReSharper to detect my custom test functions.</p>\n\n<pre><code>customTest(\"my test\", function() {\n  // do some stuff to test my code\n  ok(\"The test run successfully\");\n}\n\nfunction customTest(testName, testFunc) {\n  // do some stuff to initialize the test object\n  // this is supposed to happen for every test\n  test(testName, testFunc);\n}\n</code></pre>\n\n<p>When running this file all tests are executed, but the tests aren't added to the ReSharper testrunner. Any ideas?</p>\n"},{"tags":["visual-studio","unit-testing","nunit","breakpoints"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":826,"score":1,"question_id":2988172,"title":"How to set a breakpoint in a Nunit test and step through with Visual WebDeveloper 2008?","body":"<p>I have written a NUnit test in Visual Web Developer 2008 Express. But when I run the test, it doesn't pause at the breakpoint I had set. It just keeps on running but at the breakpoint, I need a step-by-step view on the test.</p>\n\n<p>Could anyone please tell me how I can use breakpoints with NUnit?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":206,"score":2,"question_id":4186595,"title":"Test Method order: lower level tests first?","body":"<p>Case in point:</p>\n\n<p>1) One particular Test Method tests a low-level feature. Let's say it tests an instance factory.\n2) A LOT of functions depend on this one low-level thing.</p>\n\n<p>Now, the low-level thing is broken, and its Test Method fails.</p>\n\n<p>Do I want to see it buried under hundreds of other failed tests of functionality that relies on it? Or do I want to see that one primary failure?</p>\n\n<p>Just an instance of where I think you'd want to have <em>some</em> ordering of test method execution, namely: lower levels before higher ones.</p>\n\n<p>Note that I do <em>NOT</em> imply a dependency for the order of Test Methods execution. No test method needs a result or state from any other test.</p>\n"},{"tags":["iphone","ios","xcode","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12505991,"title":"Unit Testing for iOS","body":"<p>I am new to unit testing and am trying things out.</p>\n\n<p>I created a view controller with 1 button (get sum), and 3 textfields (input 2 numbers and output the sum).</p>\n\n<pre><code>int aNum = [self.firstNumber.text intValue];\nint bNum = [self.secondNumber.text intValue];\n\nsum = aNum + bNum;\nself.total.text = [NSString stringWithFormat:@\"%i\", sum];\n[self dismissKeyboard];\n</code></pre>\n\n<p>And my testing codes:</p>\n\n<pre><code>vc = [[TestingViewController alloc] init];\nvc.firstNumber.text = @\"1\";\nvc.secondNumber.text = @\"2\";\n\n[vc getSum:nil];\n\nSTAssertTrue([vc.total.text isEqualToString:@\"3\"], @\"total should be 3\");\n</code></pre>\n\n<p>The test failed because I have tried to work with UI elements.</p>\n\n<p>My questions is: is it possible to test with UI elements like this? How would I write a test to achieve this?</p>\n\n<p>Thanks guys!</p>\n"},{"tags":["unit-testing","lua","first-class-functions"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12504434,"title":"Lua: how to verify that a table contains a specific function","body":"<p>I'm developing a module that returns a  table full of functions based on the arguments that are passed in.  Specifically, the module returns a set of data transformation rules (functions) that need to be applied to a data set depending on which customer is sending it. </p>\n\n<p>I decided to decouple my rule library (biz logic) from the code that decides which of the rules should be applied (config logic).</p>\n\n<p>Here's the unit test I'm writing to verify that the ruleBuilder is adding the correct rule (function) based on one of my scenarios:</p>\n\n<pre><code>ruleBuilder = require(\"ruleBuilder\")\nruleLibrary = require(\"ruleLibrary\")\nlocal rules = ruleBuilder.assembleRules(\"Customer1231\")\n\nassert(rules[1] == ruleLibrary.missingSSNRule)\n</code></pre>\n\n<p>Is this the correct way to do that verification?  Will this work even if the <code>ruleLibrary.missingSSNRule</code> function has references to several other functions via a closure or parameter?</p>\n"},{"tags":["android","unit-testing","http","mocking","robotium"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12503537,"title":"How to properly mock HttpGet call on Android test","body":"<p>I've got an application that performs HTTP GET calls using <a href=\"http://developer.android.com/reference/org/apache/http/client/methods/HttpGet.html\" rel=\"nofollow\"><code>HttpGet</code></a> and I would like to mock the response in order to test different scenarios without having to setup any specific local server that would act like the remote one.</p>\n\n<p>The goal is to have very high level tests that acts like a real user (<a href=\"http://code.google.com/p/robotium/\" rel=\"nofollow\">Robotium</a>) and fake the response that the application would obtain calling the real server. Much like testing a Twitter client, if you need an example.</p>\n"},{"tags":["unit-testing","moq","onion-architecture"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":12498909,"title":"Unit Testing The Onion","body":"<p>I have an architecture based on the Onion Architecture. I'm curious about unit testing the system. This is how the system flows:</p>\n\n<pre><code>MVC -&gt; Services -&gt; Repositories -&gt; NHibernate -&gt; Database\n</code></pre>\n\n<p>These are my thoughts on testing. I would like to set up a way to test my repositories. Either using SQLite or SQL Express. The unit tests would test the entire repository. So, given a UserRepository, it would test all of its methods (Get, Save, Count, etc). These tests should also test my mappings and entities.</p>\n\n<p>Next, I would like to test my Services. The test would use Moq to mock out my repositories. I would then make tests that call my Services. Any time a Repository is used, it would use the Moq implementation. Any other critical pieces of code would probably need to be stubbed, such as calling an external web service, sending an email, and the like.</p>\n\n<p>The last part I would like to test would be my web side. I would start off by writing test controllers that talk to mocked services. At some point in the future, I would consider using Selenium to test the UI.</p>\n\n<p>Considering my architecture is wired up for testing (using the interface approach), does this look like a standard way to unit test? Also, what about some thoughts on testing with my IoC (Ninject)? Any thoughts or advice would be very appreciated.</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":1046,"score":6,"question_id":9486087,"title":"How to mock ConfigurationManager.AppSettings with moq","body":"<p>I am stuck at this point of code that I do not know how to mock:</p>\n\n<pre><code>ConfigurationManager.AppSettings[\"User\"];\n</code></pre>\n\n<p>I have to mock the ConfigurationManager, but I don't have a clue, I am using <a href=\"http://code.google.com/p/moq/.\" rel=\"nofollow\">Moq</a>.</p>\n\n<p>Someone can give me a tip? Thanks!</p>\n"},{"tags":["django","unit-testing","django-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12500338,"title":"Django's AUTH_PROFILE_MODULE Unit Test Fails - AttributeError: 'UserSettingsHolder' object has no attribute 'AUTH_PROFILE_MODULE'","body":"<p>I am setting the AUTH_PROFILE_MODULE in my settings file like so:</p>\n\n<pre><code>AUTH_PROFILE_MODULE = 'api.AccountProfile'\n</code></pre>\n\n<p>And the API app is added to the installed apps like so:</p>\n\n<pre><code>INSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n\n    #3rd party apps\n    'south',\n    'allauth',\n    'allauth.account',\n    'allauth.socialaccount',\n    'allauth.socialaccount.providers.facebook',\n    'allauth.socialaccount.providers.twitter',\n\n    #Our apps\n    'ourproject.apps.api',\n    # Uncomment the next line to enable the admin:\n    # 'django.contrib.admin',\n    # Uncomment the next line to enable admin documentation:\n    # 'django.contrib.admindocs',\n)\n</code></pre>\n\n<p>I run <code>./manage.py syncdb</code> and <code>./manage.py migrate</code> without difficulty, and then I run the django unit tests with <code>./manage.py test</code>. The first test that fails is the AUTH_PROFILE_MODULE test, which is located at <code>django.contrib.auth.tests.models.ProfileTestCase</code>.</p>\n\n<p>This particular test fails right at the beginning:</p>\n\n<pre><code>def test_site_profile_not_available(self):\n    # calling get_profile without AUTH_PROFILE_MODULE set\n    if hasattr(settings, 'AUTH_PROFILE_MODULE'):\n        del settings.AUTH_PROFILE_MODULE    #&lt;----Fails here\n</code></pre>\n\n<p>Further down the stack, I find that the error is occurring in the <code>__delattr__</code> method of <code>django.utils.functional.LazyObject</code> when <code>delattr</code> is eventually called on the wrapper:</p>\n\n<pre><code>def __delattr__(self, name):\n    if name == \"_wrapped\":\n        raise TypeError(\"can't delete _wrapped.\")\n    if self._wrapped is empty:\n        self._setup()\n    delattr(self._wrapped, name)    #&lt;----Fails here\n</code></pre>\n\n<p>And here's the Traceback:</p>\n\n<pre><code>File \"/path/to/python/files/django/contrib/auth/tests/models.py\", line 30, in test_site_profile_not_available\n    del settings.AUTH_PROFILE_MODULE\nFile \"/path/to/python/files/django/utils/functional.py\", line 211, in __delattr__\n    delattr(self._wrapped, name)\nAttributeError: 'UserSettingsHolder' object has no attribute 'AUTH_PROFILE_MODULE'\n</code></pre>\n\n<p>So I dug into the django source and added a few print statements to see what was going on:</p>\n\n<p>django.contrib.auth.tests.models.ProfileTestCase:</p>\n\n<pre><code>def test_site_profile_not_available(self):\n    # calling get_profile without AUTH_PROFILE_MODULE set\n    if hasattr(settings, 'AUTH_PROFILE_MODULE'):\n        print '*******', type(settings), '********'\n        del settings.AUTH_PROFILE_MODULE\n\nOutput: ******* &lt;class 'django.conf.LazySettings'&gt; ********\n</code></pre>\n\n<p>django.utils.functional.LazyObject:</p>\n\n<pre><code>def __delattr__(self, name):\n    if name == \"_wrapped\":\n        raise TypeError(\"can't delete _wrapped.\")\n    if self._wrapped is empty:\n        print 'Here I am. Rock you like a hurricane'\n        self._setup()\n    print '*************', hasattr(self._wrapped, name)\n    print '*************', name\n    print '*************', self._wrapped.AUTH_PROFILE_MODULE\n    delattr(self._wrapped, name)\n\nOutput: ************* True\n************* AUTH_PROFILE_MODULE\n************* api.AccountProfile\n</code></pre>\n\n<p>Note that <code>LazySettings</code> inherits from <code>LazyObject</code> and has no <strong>delattr</strong> method of its own.</p>\n\n<p>Here's the full output of <code>./manage.py test</code>: <a href=\"https://dl.dropbox.com/u/20560722/TestOutput.txt\" rel=\"nofollow\">https://dl.dropbox.com/u/20560722/TestOutput.txt</a> . Note that the test in question is only being run once, and the print statements are only showing up once.</p>\n"},{"tags":["ruby","unit-testing","minitest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":58,"score":0,"question_id":12499259,"title":"Why does MiniTest::Spec have no wont_raise assertion?","body":"<p>Ruby's <code>Test::Unit</code> has <code>assert_nothing_raised</code>. <code>Test::Unit</code> has been replaced by <a href=\"https://github.com/seattlerb/minitest\" rel=\"nofollow\">MiniTest</a>. Why don't MiniTest's assertions / expectations have anything parallel to this? For example you can expect <code>must_raise</code> but not <code>wont_raise</code>.</p>\n"},{"tags":["unit-testing","nunit","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12499472,"title":"Starting to NUnit in ASP.NET MVC 4","body":"<p>I'm a new guy to unit testing in .NET and I want to start with NUnit. I'm using ASP.NET MVC 4 for creating my project. Where can I start to learning NUnit? Can you suggest me some tutorials please?</p>\n\n<p>NOTE: I'm <strong>NOT</strong> new in ASP.NET and ASP.NET MVC and C#</p>\n\n<p>NOTE: I have some experiences with unit testing in RoR.</p>\n"},{"tags":["ruby","unit-testing","testunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":775,"score":2,"question_id":4843858,"title":"Ruby: how do I use assert_nothing_raised?","body":"<pre><code> assert_nothing_raised do\n   @board.make_move(0,0,Board::HUMAN)\n end\n</code></pre>\n\n<p>and the docs say:</p>\n\n<pre><code>Passes if block does not throw anything.\n\nExample:\n\n assert_nothing_thrown do\n   [1, 2].uniq\n end\n</code></pre>\n\n<p>my make_move method:</p>\n\n<pre><code>def make_move(x, y, player)\n    return false\n end\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>test_can_make_valid_move_in_the_first_row(BoardTest):\nArgumentError: wrong number of arguments (1 for 2)\n</code></pre>\n"},{"tags":[".net","unit-testing","mocking","rhino-mocks","stubbing"],"answer_count":5,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":2824,"score":11,"question_id":2388033,"title":"Rhino Mocks stubs and mocks are only good for interfaces?","body":"<p>Is it correct that Rhino Mocks stubs and mocks are only good for interfaces, not concrete classes? I spent quite a time trying to make this piece of code working. I did not expect the stubbed pubSubClient to always call Send method from the class. That method has some dependencies and throws exception.</p>\n\n<pre><code>[Test]\npublic void Test01()\n{\n    PubSubMessage psm = new PubSubMessage(); \n    var pubSubClient = MockRepository.GenerateStub&lt;PubSubClient&gt;();\n    pubSubClient.Stub(x =&gt; x.Send(psm)).IgnoreArguments().Return(null);\n    // actual PubSubClient Send method throws exception\n    // the rest of the test is skipped...\n}\n</code></pre>\n\n<p>However, when I have extracted the interface and run the same test with IPubSubClient, it seems to be working as expected.</p>\n\n<p>Does it mean that I have to extract the interface for every class I want to mock/stub with Rhino? Or I am missing something, technically or conceptually?</p>\n\n<p><strong>UPDATE</strong>: OK, It seems I figured out what part I was missing:\n<strong>Rhino Mocks cannot intercept calls to non-virtual methods</strong>. So, I guess I have either use interfaces or make every method on the concrete class virtual. Please correct me if there's another option.</p>\n"},{"tags":["unit-testing","testing","symfony2","symfony-2.1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12491764,"title":"Testing Unit of DependencyInjection","body":"<p>I'm using this example <a href=\"https://gist.github.com/3249173\" rel=\"nofollow\">here</a> to do my test unit of DependencyInjection, but, when I'm testing, I get the following error : </p>\n\n<pre><code>Myapp\\MyBundle\\Tests\\DependencyInjection\\MybundleExtensionTest::test Load\nArgument 1 passed to Myapp\\MyBundle\\DependencyInjection\\Configuration::buil\ndPathNode() must be an instance of Myapp\\MyBundle\\DependencyInjection\\NodeD\nefinition, instance of Symfony\\Component\\Config\\Definition\\Builder\\ArrayNodeDefi\nnition given, called in E:\\wamp\\www\\testingUnit\\src\\Myapp\\MyBundle\\Dependen\ncyInjection\\Configuration.php on line 33 and defined\n</code></pre>\n\n<p>DependencyInjection/MyappMybundleExtensions.php</p>\n\n<pre><code>&lt;?php\nnamespace Myapp\\Mybundle\\DependencyInjection;\n\nuse Symfony\\Component\\DependencyInjection\\ContainerBuilder;\nuse Symfony\\Component\\Config\\FileLocator;\nuse Symfony\\Component\\HttpKernel\\DependencyInjection\\Extension;\nuse Symfony\\Component\\DependencyInjection\\Loader;\nuse Symfony\\Component\\Config\\Definition\\Processor;\n\n\nclass MybundleExtension extends Extension\n{\n/**\n * Build the extension services\n *\n * @param array $configs\n * @param ContainerBuilder $container\n */\n\npublic function load(array $configs, ContainerBuilder $container)\n{\n    $processor = new Processor();\n    $configuration = new Configuration();\n\n    $config = $this-&gt;processConfiguration($configuration, $configs);\n\n    $loader = new Loader\\YamlFileLoader($container, new FileLocator(__DIR__ . '/../Resources/config'));\n    $loader-&gt;load('file.yml');\n\n    $config = $processor-&gt;processConfiguration($configuration, $configs);\n\n\n    $container-&gt;setParameter('FashionWeb\\ProductBundle\\Controller\\FamilyController::showFamilyAction', $config['action']);\n}\n\n}\n</code></pre>\n\n<p>Tests/DependencyInjection/MyappMyBundleExtensionsTest.php</p>\n\n<pre><code> namespace Myapp\\Mybundle\\Tests\\DependencyInjection;\n\n  use Symfony\\Component\\DependencyInjection\\ContainerBuilder;\n\n  class Myapp\\MybundleExtensionTest extends \\PHPUnit_Framework_TestCase\n {\npublic function testLoad()\n{\n\n    $container = new ContainerBuilder();\n\n    $extension = new MyappMybundleExtension();\n\n    $extension-&gt;load(array(), $container);\n\n\n    $this-&gt;assertEquals('FashionWeb\\ProductBundle\\Controller\\FamilyController::showFamilyAction', $container-&gt;getParameter('myapp_mybundle.action'), sprintf('%s parameter is correct', 'myapp_mybundle.action'));\n\n}\n\n}\n</code></pre>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12406821,"title":"Why doesn't nosetests find anything?","body":"<p>I am switching from python's unittest framework to nosetests, trying to reuse my <code>unittest.TestCase</code>s</p>\n\n<p>After <code>cd</code>ing into my tests package I started nosetests <a href=\"http://nose.readthedocs.org/en/latest/index.html\" rel=\"nofollow\">as described on their homepage</a>:</p>\n\n<pre><code>./test/$ nosetests\n\n----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\n</code></pre>\n\n<p>Why do I need to specify each module to have nose discover its tests like in the following example?</p>\n\n<pre><code>./test/$ nosetests test_all.py\n.......\n----------------------------------------------------------------------\nRan 7 tests in 0.002s\n\nOK\n</code></pre>\n\n<p>Also running the tests one folder above doesn't change anything.</p>\n\n<pre><code>./tests/$ cd ..\n./$ nosetests\n\n----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\n</code></pre>\n"},{"tags":["c#","unit-testing","moq","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12496279,"title":"Mocking complex 3rd party libraries","body":"<p>I have a class that uses 3rd party FTP library <a href=\"http://ftps.codeplex.com/\" rel=\"nofollow\">http://ftps.codeplex.com/</a> and I would like to mock it so that I can unit test just that class and not the FTP library. I have done it but it feels messy to me. In detail, the class uses these methods of AlexPilotti.FTPS.Client.FTPSClient class:</p>\n\n<pre><code>public string Connect(string hostname, ESSLSupportMode sslSupportMode)\npublic ulong PutFile(\n    string localFileName, string remoteFileName,\n    FileTransferCallback transferCallback)\n</code></pre>\n\n<p>Delegate AlexPilotti.FTPS.Client.FileTransferCallback looks like this:</p>\n\n<pre><code>public delegate void FileTransferCallback(\n    FTPSClient sender, ETransferActions action, \n    string localObjectName, string remoteObjectName,\n    ulong fileTransmittedBytes, ulong? fileTransferSize, ref bool cancel);\n</code></pre>\n\n<p>You can see a problem because PutFile takes the delegate from FTP library and that delegate takes two different types from the library as well. I decided to use generics to decouple from these types.</p>\n\n<p>To be able to create a mock object, I created an interface and then a derived class which is a wrapper of the FTP library functionality.</p>\n\n<pre><code>// Interface so that dependency injection can be used.\npublic delegate void FileTransferCallback&lt;T1, T2&gt;(T1 sender, T2 action,\n    string localObjectName, string remoteObjectName,\n    ulong fileTransmittedBytes, ulong? fileTransferSize,\n    ref bool cancel);\n\npublic interface IFTPClient&lt;T1, T2&gt; : IDisposable\n{\n    string Connect(string hostname, System.Net.NetworkCredential credential);\n    ulong PutFile(\n        string localFileName, string remoteFileName,\n        FileTransferCallback&lt;T1, T2&gt; transferCallback);\n}\n\n// Derived class, the wrapper\nusing FTPSClient = FTPS.Client.FTPSClient;\nusing ETransferActions = FTPS.Client.ETransferActions;\n\npublic class FTPClient : IFTPClient&lt;FTPSClient, ETransferActions&gt;\n{\n    public FTPClient()\n    {\n        client = new AlexPilotti.FTPS.Client.FTPSClient();\n    }\n\n    public ulong PutFile(\n        string localFileName, string remoteFileName,\n        FileTransferCallback&lt;FTPSClient, ETransferActions&gt; transferCallback)\n    {\n        callback = transferCallback;\n        return client.PutFile(localFileName, remoteFileName, TransferCallback);\n    }\n\n    public void Dispose()\n    {\n        client.Dispose();\n    }\n\n    public string Connect(\n        string hostname, System.Net.NetworkCredential credential)\n    {\n        return client.Connect(hostname, credential, \n            FTPS.Client.ESSLSupportMode.ClearText);\n    }\n\n    void TransferCallback(\n        FTPS.Client.FTPSClient sender, FTPS.Client.ETransferActions action, \n        string localObjectName, string remoteObjectName,\n        ulong fileTransmittedBytes, ulong? fileTransferSize, \n        ref bool cancel)\n    {\n        callback.Invoke(sender, action, localObjectName, remoteObjectName,\n            fileTransmittedBytes, fileTransferSize, ref cancel);\n    }\n\n    private AlexPilotti.FTPS.Client.FTPSClient client;\n    private FileTransferCallback&lt;FTPSClient, ETransferActions&gt; callback;\n}\n</code></pre>\n\n<p>Here goes a class that uses this interface and which I unit test. I stripped it down a bit so only the Connect method is used but I hope it still illustrates my problem.</p>\n\n<pre><code>public class FTPServerConnection&lt;T1, T2&gt;\n{\n    public void Init(\n        IFTPClient&lt;T1, T2&gt; client, string serverName,\n        string userName, string passwd)\n    {\n        IsConnected = false;\n\n        ServerName = serverName;\n        UserName = userName;\n        Passwd = passwd;\n\n        ftpClient = client;\n\n        Connect();\n    }\n\n    public void Connect()\n    {\n        ftpClient.Connect(\n           ServerName,\n           new System.Net.NetworkCredential(UserName, Passwd));\n    }\n\n    public string ServerName { protected set; get; }\n    public string UserName { protected set; get; }\n    public string Passwd { protected set; get; }\n\n    public bool IsConnected { protected set; get; }\n\n    private IFTPClient&lt;T1, T2&gt; ftpClient;\n}\n</code></pre>\n\n<p>And finally the unit test:</p>\n\n<pre><code>[TestMethod()]\npublic void FTPServerConnectionConstructorTest()\n{\n    var ftpClient = new Mock&lt;IFTPClient&lt;object, object&gt;&gt;();\n    var ftpServer = new FTPServerConnection&lt;object, object&gt;();\n    ftpServer.Init(ftpClient.Object, \"1.2.3.4\", \"user\", \"passwd\");\n\n    Assert.AreEqual(\"1.2.3.4\", ftpServer.ServerName);\n    Assert.AreEqual(\"user\", ftpServer.UserName);\n    Assert.AreEqual(\"passwd\", ftpServer.Passwd);\n}\n</code></pre>\n\n<p>What is the usual approach in situations like this one? My approach seems to be messy and I am wondering if there is easier way of doing it. Thanks.</p>\n"},{"tags":["unit-testing","mocking","guidelines"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":25,"score":1,"question_id":12496561,"title":"Development guidelines for Unit testing and mocking","body":"<p>After development i need to implement the unit testing and mocking for checking my code . Aim is to achieve 100% code coverage . I want to know for the development team that what can be the guidelines for writing code so that later on we can write test cases &amp; apply mock on that pre written code by developers. So what can be the guidelines from development point of view if we want our code to be mocked later. </p>\n\n<p>Please reply </p>\n"},{"tags":["java","unit-testing","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12492566,"title":"Mockito: How to get the state of an argument","body":"<p>The scenario is I am trying to validate a  domain object and store the validation messages in another object. The class is <code>Validator</code> and the method looks like:</p>\n\n<pre><code>public void validate (Domain domain, ValidationInfo info)\n</code></pre>\n\n<p>And the <code>ValidationInfo</code> object has: </p>\n\n<pre><code>List&lt;String&gt; messages = new ArrayList&lt;String&gt; messages ()\n</code></pre>\n\n<p>The <code>Validator</code> class is called from a service class. Whatever validation fails for the domain object the failure messages will be stored in the list in the <code>ValidationInfo</code> class. </p>\n\n<p>In the service test class in one of the test case i wrote the following to test the validation failure:</p>\n\n<pre><code>@Test\npublic void testvalidation () throws Exception { \n    Domain domain = createDomainWithInvalidData();\n    service.create (domain);\n    verify(mockValidator).validate(domain, validationInfo);\n    assertFalse (validationInfo.getMessages().isEmpty());\n</code></pre>\n\n<p>Now What I want is to get the failure messages from the <code>validationInfo</code> object so that I can write some asserts based on that. But it's not working.</p>\n\n<p>Can anybody shed some light on this.</p>\n"},{"tags":["php","unit-testing","testing","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12460815,"title":"Why is this PHPUnit comparison wrong? ( .. $mock->with($this->identicalTo($foo) )","body":"<p>I have a problem with PhpUnit. I want to use the <code>isIdentical</code> method of PHPUnit to ensure that a method is called with a specific object as a parameter. \nGiven is a mock object with method \"setBar\":</p>\n\n<pre><code>    $bar = new Bar();\n    $someMock\n        -&gt;expects($this-&gt;any())\n        -&gt;method('setBar')\n        -&gt;with($this-&gt;identicalTo($bar));\n\n    $someMock-&gt;setBar($bar);\n</code></pre>\n\n<p>This is of course only an example. It should work, but it doesn't. To get some hints, i  wrote some echo code in the <code>PHPUnit_Framework_Constraint_IsIdentical</code> method:</p>\n\n<pre><code>public function evaluate($other, $description = '', $returnResult = FALSE)\n{\n    //...\n    echo \"\\n\";\n    echo spl_object_hash($other) . \"/\". spl_object_hash($this-&gt;value). \" - \". get_class($this-&gt;value) .\"/\". get_class($other);\n    echo \" -&gt;&gt; \";  \n    var_dump($other === $this-&gt;value);\n}\n</code></pre>\n\n<p>The object hash of <code>$other</code> is <strong>not the same</strong> as <code>$this-&gt;value</code> (while the hash of <code>$this-&gt;value</code> is actually the correct one)</p>\n\n<p><strong>In the meantime, i found the reason for this error here. It's an issue of PHPUnit. Objects getting cloned by PHPUnit. I leave the question If someone knows a good workaround for this issue.</strong></p>\n\n<p><a href=\"https://github.com/sebastianbergmann/phpunit-mock-objects/issues/41\" rel=\"nofollow\">https://github.com/sebastianbergmann/phpunit-mock-objects/issues/41</a></p>\n"},{"tags":["c#","unit-testing","nhibernate","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12490906,"title":"Can I sensibly mock this NHibernate query?","body":"<p>I've been working on a project where we use a Fluent NHibernate ORM to access an SQL Server database and show and manipulate data.</p>\n\n<p>In the initial development phase we've been writing unit tests against the actual database; which has been helpful in learning NHibernate, but this is not ideal as the database won't always have what we need to test and the time to run tests starts to be too long.</p>\n\n<p>So I'm hoping to try to use Mock Objects in the Unit Testing, I have little Mock experience, and right now I can't always see how to change the functionality to allow me to do this.</p>\n\n<p>Here's a function I wrote yesterday (re-written to a more 'abstract' concept. But basically my code with different class names:</p>\n\n<pre><code> public static IList&lt;Order&gt; GetAllOrders(long parentCompanyId)\n    {\n        using (var session = DbSetup.GetSession())\n            {\n                var idList =\n                    (from p in session.Query&lt;ParentCompanyList&gt;() \n                     where p.ParentCompanyId == parentCompanyId \n                     select p.CompanyId)\n                     .ToList&lt;long&gt;();\n\n                IQuery q = session.CreateQuery(\"from Order as o where o.CompanyId in (:ids)\");\n                q.SetParameterList(\"ids\", idList);\n\n                var results = q.List&lt;Order&gt;();\n                return results;\n            }\n    }\n</code></pre>\n\n<p>So I have an  NHibernate.ISession which connects to the database, I'm running a query to find against a ParentCompanyList (Class fluently mapped to a database table) to fetch a list of CompanyIds for companies that are connected to the parent company, and then use this to fetch all olders from all companies associated with the parent company.</p>\n\n<p>What I'm not sure of whether there is any good way to test this without going to the database. </p>\n\n<p>Can I create mock objects that allow me to test this? How would I set that up?\nDo I need to create a mock ISession which will return the appropriate List and IOrder results? At that point it seems I'm not actually testing anything of any value if I give back what I'm actually asking for...</p>\n\n<p>Am I just misunderstanding something basic here?</p>\n"}]}
{"total":15323,"page":13,"pagesize":100,"questions":[{"tags":["c#","visual-studio-2010","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":12494829,"title":"Unit Tests re-organization","body":"<p>Normally we work with one Visual Studio solution that contains the product project and the unit testing project.</p>\n\n<p>Our unit testing project is growing fast (2000+ unit tests) and it becomes slow to load/rebuild and difficult to browse. Consider also that - AFAIK - in Visual Studio 2012 test categories are not visible anymore.</p>\n\n<p>We are thinking to split it in multiple unit testing projects:</p>\n\n<ol>\n<li>Would it be possible to load multiple unit test projects in the same Visual Studio solution?</li>\n<li>What is the best approach when the number of unit tests grows so much?</li>\n</ol>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":10167325,"title":"Unit testing a Java method","body":"<p>Excuse what may be a fairly trivial question:</p>\n\n<p>I'm unit testing a 'setPercentage(int percent){...}' method. The requirements don't state anything about there being an 'acceptable range' or allowable values... but I know from the application in question that the percentage should only ever be between 0 and 100.</p>\n\n<p>Should I be testing if the value being set makes sense (in the context of unit testing?)</p>\n\n<p>i.e. should I write unit tests that fail if percentage is set > 100 or &lt; 0?</p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":5,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":136,"score":7,"question_id":2542574,"title":"Is there an automated way to make sure that all parts of code is unit tested?","body":"<p>I have written JUnit tests for my class, and would like it to tell me if there is any part of my code that is not unit tested. Is there a way to do this?</p>\n"},{"tags":["unit-testing","wif"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":204,"score":0,"question_id":8948753,"title":"Federated Identity: how to I inject the httpContext for testing purposes?","body":"<p>I am unit testing asp.net mvc code by creating an object that inherits HttpContextBase and is injected into my controllers.  </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>myfooController.ControllerContext.HttpContext = new FakeHttpContext();\n</code></pre>\n\n<p>By doing this, I can mock a wide variety of asp.net properies: url, referrer, user agent, cookies, etc.  It works great.</p>\n\n<p>I'm writing unit tests to cover our FederatedIdentity controller that decodes RelyingPArty signing requests and handles them appropriately.  My FakeHttpContext lets me test a wide variety of scenarios: null signIn requests, bad shared secrets, etc.  </p>\n\n<p>On our current WIF project, we need to make a call to the static class  FederatedAuthentication.SessionAuthenticationModule.CookieHandler to do some cookie stuff.</p>\n\n<p>When I do this from my unit test, it blows up because the HttpContext.Current is null. The SessionAuthenticationModule appears to use HttpContext.Current, which cannot be set to my fake context.  Since HttpContext.Current does not inherit from HttpContextBase, I cannot set any relevant properties to do useful testing things.  </p>\n\n<p>Am I right in my conclusion that in 2011, someone at Microsoft created enormously important authentication code that is completely and utterly not unit-testable?  Really?</p>\n"},{"tags":["unit-testing","f#","functional-programming","tdd"],"answer_count":6,"favorite_count":18,"up_vote_count":48,"down_vote_count":0,"view_count":5036,"score":48,"question_id":1989487,"title":"F# development and unit testing?","body":"<p>I just got started with F#, which is my first functional language. I have been working quasi-exclusively with C#, and enjoy a lot how F# leads me to re-think how I write code. One aspect I find a bit disorienting is the change in the process of writing code. I have been using TDD for years in C# now, and really appreciate to have unit tests to know where I am at. So far, my process with F# has been to write some functions, play with them with the interactive console until I am \"reasonably\" sure they work, and tweak &amp; combine. This works well on small-scale problems like the Euler Project, but I can't imagine building something large that way.<br>\nHow do people approach unit testing and building a test suite for a F# program? Is there an equivalent to TDD? Any pointers or thoughts are appreciated.</p>\n"},{"tags":["unit-testing","testing","tcl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12489567,"title":"How Do You Test a Private Method in TCl","body":"<p>I am very sorry if this question seems stupid, i am a newbie to TCL and TCLtest, I am trying to perform unit test on a few TCLOO programs, and i am having difficulties testing the private methods  ( the methods called using keyword 'my' ). Guidance needed</p>\n"},{"tags":["unit-testing","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12484241,"title":"Setup Moq To Return Multiple Values","body":"<p>I am new to Moq and I want to have a test like this:</p>\n\n<pre><code>[Fact]\n        public void IsClientExternalForWebShouldReturnFalse()\n        {\n            // Arrange\n            var request = new Mock&lt;HttpRequestBase&gt;();\n            request.Setup(r =&gt; r.UserHostAddress).Returns(new Queue&lt;string&gt;(new[] { \"127.0.0.1\", \"10.1.10.1\" }).Dequeue);\n\n            var context = new Mock&lt;HttpContextBase&gt;();\n            context.SetupGet(c =&gt; c.Request).Returns(request.Object);\n\n            var service = new EnvironmentService(context.Object, null);\n\n            // Act / Assert\n            service.IsClientExternal.Should().BeFalse();\n            service.IsClientExternal.Should().BeFalse();\n        }\n</code></pre>\n\n<p>It throws this:</p>\n\n<pre><code>------ Test started: Assembly: SAIF.Services.Tests.dll ------\n\nTest 'SAIF.Services.Tests.EnvironmentServiceTests.IsClientExternalForWebShouldReturnFalse' failed: System.InvalidOperationException : Queue empty.\n    at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)\n    at System.Collections.Generic.Queue`1.Dequeue()   at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)\n    at System.Collections.Generic.Queue`1.Dequeue()   at Moq.Extensions.InvokePreserveStack(Delegate del, Object[] args)\n    at Moq.MethodCallReturn`2.Execute(ICallContext call)\n    at Moq.Interceptor.Intercept(ICallContext invocation)\n    at Moq.Proxy.CastleProxyFactory.Interceptor.Intercept(IInvocation invocation)\n    at Castle.DynamicProxy.AbstractInvocation.Proceed()\n    at Castle.Proxies.HttpRequestBaseProxy.get_UserHostAddress()\n    Services\\EnvironmentService.cs(54,0): at SAIF.Services.EnvironmentService.&lt;get_IsClientExternal&gt;b__3(String ip)\n    at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)\n    Services\\EnvironmentService.cs(54,0): at SAIF.Services.EnvironmentService.get_IsClientExternal()\n    EnvironmentServiceTests.cs(25,0): at SAIF.Services.Tests.EnvironmentServiceTests.IsClientExternalForWebShouldReturnFalse()\n\n0 passed, 1 failed, 0 skipped, took 0.69 seconds (xUnit.net 1.9.1 build 1600).\n</code></pre>\n\n<p>The actual code under test:</p>\n\n<pre><code>public bool IsClientExternal\n        {\n            get { return IsWeb &amp;&amp; !internalAddressRoots.Any(ip =&gt; httpContext.Request.UserHostAddress.StartsWith(ip)); }\n        }\n</code></pre>\n\n<p>But if I only call to the service once it works, but the service only gets the first value.</p>\n\n<p>Also if I debug and mouse over the <code>httpContext.Request.UserHostAddress</code>, the value changes.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>Edit #1</strong></p>\n\n<p>So I found the issue I think. This issue is that the actual code under test loops through all the ip's and doing that calls the <code>UserHostAddress</code>. I just really need to figure out how to supply an array of strings into the <code>Returns()</code> function of the mock.</p>\n"},{"tags":["android","unit-testing","mockito","robolectric"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12489510,"title":"How to write unit test for Android using Mockito to check count down time delay?","body":"<p>Here, is the code, without adding Mock object</p>\n\n<pre><code>@Before\npublic void setUp() throws Exception {\nTimer timer = new Timer();\n}\n\n@Test\npublic void testMinForValid() {\ntimer.startTimer(System.currentTimeMillis()/1000,99, null);\nassertEquals(timer.getTime(), \"13\");\n}\n</code></pre>\n"},{"tags":["php","unit-testing","testing","symfony2"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":116,"score":5,"question_id":12282806,"title":"Use crawler in controller","body":"<pre><code>// src/Acme/DemoBundle/Tests/Controller/DemoControllerTest.php\nnamespace Acme\\DemoBundle\\Tests\\Controller;\n\nuse Symfony\\Bundle\\FrameworkBundle\\Test\\WebTestCase;\n\nclass DemoControllerTest extends WebTestCase\n{\n    public function testIndex()\n    {\n        $client = static::createClient();\n\n        $crawler = $client-&gt;request('GET', '/demo/hello/Fabien');\n\n        $this-&gt;assertGreaterThan(0, $crawler-&gt;filter('html:contains(\"Hello Fabien\")')-&gt;count());\n    }\n}\n</code></pre>\n\n<p>this working OK in my tests, but i would like use this crawler also in controller. How can i do it?</p>\n\n<p>i make route, and add to controller:</p>\n\n<pre><code>&lt;?php\n\n// src/Ens/JobeetBundle/Controller/CategoryController\n\nnamespace Acme\\DemoBundle\\Controller;\nuse Symfony\\Bundle\\FrameworkBundle\\Controller\\Controller;\nuse Acme\\DemoBundle\\Entity\\Category;\nuse Symfony\\Bundle\\FrameworkBundle\\Test\\WebTestCase;\n\nclass CategoryController extends Controller\n{   \n  public function testAction()\n  {\n    $client = WebTestCase::createClient();\n\n    $crawler = $client-&gt;request('GET', '/category/index');\n  }\n\n}\n</code></pre>\n\n<p>but this return me error:</p>\n\n<pre><code>Fatal error: Class 'PHPUnit_Framework_TestCase' not found in /acme/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Test/WebTestCase.php on line 24\n</code></pre>\n"},{"tags":["php","regex","unit-testing","symfony2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12283929,"title":"Filter in crawler - symfony 2 test","body":"<p>I learn Symfony 2 from this: <a href=\"http://www.ens.ro/2012/04/25/symfony2-jobeet-day-9-the-functional-tests/\" rel=\"nofollow\">http://www.ens.ro/2012/04/25/symfony2-jobeet-day-9-the-functional-tests/</a></p>\n\n<p>Here is:</p>\n\n<pre><code>$this-&gt;assertTrue($crawler-&gt;filter('.category_programming tr')-&gt;first()-&gt;filter(sprintf('a[href*=\"/%d/\"]', $this-&gt;getMostRecentProgrammingJob()-&gt;getId()))-&gt;count() == 1);\n</code></pre>\n\n<p>but:</p>\n\n<pre><code>$crawler-&gt;filter('.category_programming tr')-&gt;first()-&gt;filter(sprintf('a[href*=\"/%d/\"]', $this-&gt;getMostRecentProgrammingJob()-&gt;getId()))-&gt;count()\n</code></pre>\n\n<p>still return 0. This position is on page. Maybe regular expression is wrong?</p>\n\n<p>$this->getMostRecentProgrammingJob()->getId() return 1.</p>\n"},{"tags":["ruby-on-rails","oracle","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":45,"score":3,"question_id":12408379,"title":"Switch DB-Connection for one TestCase in Rails","body":"<p>I try to switch the db connection for one testcase within the setup and teardown.\nBut somehow the tests return me this message: </p>\n\n<pre><code>RuntimeError: executing in another thread\n</code></pre>\n\n<p>And thats the testcase code:</p>\n\n<pre><code>def setup\n  Example.establish_connection(ActiveRecord::Base.configurations['oracle'])\nend\n\ndef teardown\n  Example.establish_connection(Rails.env)\nend\n</code></pre>\n\n<p>The test db is sqlite and db I try to use for the testcase is oracle because of a PLSQL function.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","unit-testing","nunit","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12388939,"title":"Test if ActionMethod exists in Controller","body":"<p>I have about a dozen different mail forms as part of a complex Asp.Net MVC-3 web site. </p>\n\n<p>Each form has significantly different processing logic, so each form has a different ActionMethod within my FormsController.</p>\n\n<p>Each form can be accessed by a URL defined in one route-mapping:</p>\n\n<pre><code>routes.MapRoute(\n    \"Forms\",\n    \"forms/{action}\",\n    new { controller = \"Forms\", action = \"Index\" }\n);\n</code></pre>\n\n<p>I am holding a list of the action-names in a List, which is set up for DRY purposes (to populate a nav of the forms, etc). I will need to update this set of forms frequently, and I may want to refactor the form-names as they appear in the URLs (and therefore as they are defined as Action Names). I want to test that list corresponds to names of defined action-methods</p>\n\n<p>It's easy to test if each form URL getting caught by the correct route-mapping. I am using NUnit with Moq:  </p>\n\n<pre><code>MockHttpContext.Setup(x =&gt; x.Request.AppRelativeCurrentExecutionFilePath)\n     .Returns(\"~/Forms/\" + formUrlName);\nvar routeData = Routes.GetRouteData(MockHttpContext.Object);\n\nAssert.AreEqual(\"Forms\", routeData.Values[\"Controller\"].ToString());            \nAssert.AreEqual(formUrlName, routeData.Values[\"Action\"].ToString());\n</code></pre>\n\n<p>But this does not guarantee that the named action-methods are themselves defined in the Froms controller. </p>\n\n<p>Note also: to allow dashes in my form urls and still map to action-method names, I am defining action-names with a filter, e.g.: </p>\n\n<pre><code>[ActionName(\"blog-subscription-request\")]\npublic ActionResult BlogSubscriptionRequest() {...\n</code></pre>\n\n<p>So... </p>\n\n<p><strong>QUESTION:</strong> How can I test if each item in my list of action-method names corresponds to an actual ActionMethod that exists within my FormsController?**</p>\n"},{"tags":["visual-studio","unit-testing","mstest","vs-unit-testing-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12391387,"title":"Visual Studio unit testing - multiple cases like Nunit","body":"<p>In <a href=\"http://nunit.org/?p=testCase&amp;r=2.5\" rel=\"nofollow\">Nunit</a> one can reuse a test method for multiple cases.</p>\n\n<pre><code>[TestCase(12,3,4)]\n[TestCase(12,2,6)]\n[TestCase(12,4,3)]\npublic void DivideTest(int n, int d, int q)\n{\n  Assert.AreEqual( q, n / d );\n}\n</code></pre>\n\n<p>How can I do this in Visual Studio's test framework?</p>\n"},{"tags":["unit-testing","junit","classpath","inputstream"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12487085,"title":"JUnit Classpath for InputStream","body":"<p>I have a JUnit test located within my project package in the location:</p>\n\n<pre><code>Java Resources &gt; unittests &gt; ActionTest.java\n</code></pre>\n\n<p>I am trying to use an InputStream in one of my tests that would take in a static file located in another part of my project package:</p>\n\n<pre><code>WebRoot &gt; TestFiles &gt; sampleFile.txt\n</code></pre>\n\n<p>Is there a way to go about passing the classpath of the file to the InputStream somehow? Or will I need to move the sampleFile.txt somewhere else within my project?</p>\n\n<p>I have tried defining the InputStream like so:</p>\n\n<pre><code>InputStream fileStream = getClass().getResourceAsStream(\"sampleValidPatientList.txt\");\n</code></pre>\n"},{"tags":["java","unit-testing","integration-testing"],"answer_count":11,"favorite_count":13,"up_vote_count":26,"down_vote_count":0,"view_count":13389,"score":26,"question_id":284774,"title":"Can we use JUNIT for Automated Integration Testing?","body":"<p>How do you automate <a href=\"http://en.wikipedia.org/wiki/Integration_testing\" rel=\"nofollow\">integration testing</a>? I use JUnit for some of these tests. This is one of the solutions or is totally wrong? What do you suggest?</p>\n"},{"tags":["unit-testing","tdd","design-by-contract"],"answer_count":7,"favorite_count":10,"up_vote_count":11,"down_vote_count":0,"view_count":2020,"score":11,"question_id":481312,"title":"Design By Contract vs Test Driven Development?","body":"<p>You may think this question is like <a href=\"http://stackoverflow.com/questions/394591/design-by-contract-and-test-driven-development\">this</a> question asked on StackOverflow earlier. But I am trying to look at things differently.</p>\n\n<p>In TDD we write tests that include different conditions, criteria, verification code. If a class passes all these tests we are good to go. It is a way of making sure that the class actually does what its supposed to do and nothing else.</p>\n\n<p>If you follow Bertrand Meyers' book Object Oriented Software Construction word by word, the class itself has internal and external contracts so that it only does what its supposed to do and nothing else, No external tests required because the to code to ensure contract is followed is the part of the class.</p>\n\n<p>Quick example to make things clear-</p>\n\n<blockquote>\n  <p><strong>TDD-</strong></p>\n  \n  <ol>\n  <li>Create test  to ensure that in all cases a value ranges from\n  (0-100)</li>\n  <li>Create class containing method that passes the test.</li>\n  </ol>\n  \n  <p><strong>DBC-</strong></p>\n  \n  <ol>\n  <li>Create a class, create a contract for that member var to range from\n  (0-100), set contract for contract\n  breach, define method.</li>\n  </ol>\n</blockquote>\n\n<p>I personally like DBC.</p>\n\n<p><hr /></p>\n\n<p><strong>Is there a reason why pure DBC is not so popular?? Is it the languages or tools or being Agile or is it just me who likes to have code responsible for itself?</strong></p>\n\n<p>If you think I am not thinking right, I would be more than willing to learn.</p>\n"},{"tags":["hibernate","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12483394,"title":"Session seems to exist even when mysqld is not up","body":"<p>Something a little bit strange is happening to me. I have a project in which i'm testing my data access layer, ok? But i ran the test and he had passed. Later i discovered that my Mysql Diamond wasn't running. What might be happening?</p>\n\n<p>// Test Code</p>\n\n<pre><code>public class AppTest {\n\nstatic final Logger log = Logger.getLogger(AppTest.class);\n\n@Test\npublic void sessionTest() { // Passed\n    Session s = HibernateUtil.getSessionFactory().openSession();\n    Assert.assertTrue(s.isOpen());\n}\n\n@Test\npublic void fetchEvent() { // Failed\n    EventDao edao = new EventDao();\n    Event e = null;\n    try {\n        e = edao.find(1);\n    } catch (Exception ex) {\n        log.fatal(ex.getMessage());\n    }\n    Assert.assertNotNull(e);\n}\n\n@Test\npublic void fetchAll() { // Failed\n    EventDao edao = new EventDao();\n    List&lt;Event&gt; e = null;\n    try {\n        e = edao.all(); // I have 6 rows on the Event table\n    } catch (Exception ex) {\n        log.fatal(ex.getMessage());\n    }\n    Assert.assertEquals(e.size(), 6);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>// HibernateUtil</p>\n\n<pre><code>public class HibernateUtil {\n\nprivate static final SessionFactory sessionFactory;\n\nstatic {\n    try {\n        // Create the SessionFactory from standard (hibernate.cfg.xml) \n        // config file.\n        sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();\n    } catch (Throwable ex) {\n        // Log the exception. \n        System.err.println(\"Initial SessionFactory creation failed.\" + ex);\n        throw new ExceptionInInitializerError(ex);\n    }\n}\n\npublic static SessionFactory getSessionFactory() {\n    return sessionFactory;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>// src/main/resources/hibernate.cfg.xml Code</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\" \"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd\"&gt;\n&lt;hibernate-configuration&gt;\n&lt;session-factory&gt;\n    &lt;!-- Connection settings --&gt;\n    &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.driver_class\"&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.url\"&gt;jdbc:mysql://localhost:3306/MyDB&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.username\"&gt;root&lt;/property&gt;\n\n    &lt;!-- Class mappings --&gt;\n    ...\n    &lt;mapping class=\"br.siseventos.siseventosmaventest.model.Event\"/&gt;\n    ...\n&lt;/session-factory&gt;\n</code></pre>\n\n<p></p>\n\n<p>// EventDao Code</p>\n\n<pre><code>public class EventDao extends BaseDao&lt;Event&gt; {\n\n}\n</code></pre>\n\n<p>// BaseDao Code</p>\n\n<pre><code>public abstract class BaseDao&lt;T&gt; implements Dao&lt;T&gt; {\n// Fields\n\nprivate Class actualClass;\n\n// Constructor\npublic BaseDao() {\n\n    // Fetching generic class parameter\n    actualClass = (Class) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];\n}\n\n// Getters e Setters\npublic Class getActualClass() {\n    return actualClass;\n}\n\npublic void setActualClass(Class actualClass) {\n    this.actualClass = actualClass;\n}\n\n// Service\npublic T find(int id) throws Exception {\n    Session session = HibernateUtil.getSessionFactory().openSession();\n    Transaction t = null;\n    T o = null;\n    try {\n        t = session.beginTransaction();\n        o = (T) session.get(actualClass, new Integer(id));\n        t.commit();\n    } catch (Exception e) {\n        if (t != null) {\n            try {\n                t.rollback();\n            } catch (Exception ex) {\n            }\n        }\n        throw e;\n    } finally {\n        if (session != null) {\n            session.close();\n        }\n    }\n    return o;\n}\n\npublic List&lt;T&gt; all() throws Exception {\n    Session session = HibernateUtil.getSessionFactory().openSession();\n    Transaction t = null;\n    List&lt;T&gt; o = null;\n    try {\n        t = session.beginTransaction();\n        o = (List&lt;T&gt;) session.createQuery(\"from \" + getActualClassName()).list();\n        t.commit();\n    } catch (Exception e) {\n        if (t != null) {\n            try {\n                t.rollback();\n            } catch (Exception ex) {\n            }\n        }\n        throw e;\n    } finally {\n        if (session != null) {\n            session.close();\n        }\n    }\n\n    return o;\n}\n\n// Util\npublic String getActualClassName() {\n    return getActualClass().getSimpleName();\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","mocking","query-string","value-provider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":240,"score":0,"question_id":9945353,"title":"Mock MVC3 ControllerContext query string collection and ValueProvider","body":"<p>I followed code sample in <a href=\"http://www.apress.com/9781430234043\" rel=\"nofollow\">Steve Sanderson's MVC3 book</a>, there is a piece of ControlContext mock code there I can setup form and query string values.</p>\n\n<p>In order to support TryUpdateModel in unit test I made some change to the code, for example I have changed data type of formValues to <code>FormCollection formValues</code> and I added following codes to make it work:</p>\n\n<pre><code>        // form Values values setup\n        this.Request.Setup(x =&gt; x.Form).Returns(formValues);\n\n        // wire up form with value provider\n        if (formValues != null)\n        {\n            onController.ValueProvider = formValues.ToValueProvider();\n        }\n</code></pre>\n\n<p>Meanwhile I would like to do the same thing to querystring collection, but could not find equivalent class to support such a function.</p>\n\n<p>Who has any idea what shall I do to query string?</p>\n"},{"tags":["django","sqlite","unit-testing","couchdb","django-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12479063,"title":"replacing default sqlite with couchdb database for django test optimization","body":"<p><a href=\"https://docs.djangoproject.com/en/dev/topics/db/multi-db/#topics-db-multi-db-routing\" rel=\"nofollow\">Django allows auto database routing</a>. It is possible to have different databases for test and production. The default for test is sqlite3. Will migrating from <code>sqlite3</code> to <code>couchdb</code> will have any significant time improvement for unittests which take more than 10 mins. to run?</p>\n\n<p>What other if any test db optimization can be done?</p>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","postgresql","transactions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12481652,"title":"Warning while testing specs on postgres: there is no transaction in progress","body":"<p>For each step of test occurs 2 lines: </p>\n\n<pre><code>WARNING:  there is already a transaction in progress\nNOTICE:  there is no transaction in progress\n</code></pre>\n\n<p>With Spork lines following triples:</p>\n\n<pre><code>NOTICE:  there is no transaction in progress\nNOTICE:  there is no transaction in progress\nNOTICE:  there is no transaction in progress\nWARNING:  there is already a transaction in progress\nWARNING:  there is already a transaction in progress\nWARNING:  there is already a transaction in progress\n</code></pre>\n\n<p>I don't know maybe it's important, just warned. GemFile:</p>\n\n<pre><code>group :test do\n  gem 'rspec-rails'\n  gem 'factory_girl_rails'\n  gem 'spork-rails'\n  gem 'capybara'\n  gem 'database_cleaner'\nend\n</code></pre>\n\n<p>all customized, so there is no need for develop group, and it not helps anyway. <a href=\"https://gist.github.com/3744332\" rel=\"nofollow\">this is spec_helper</a>.I found, that it is PostgreSQL feature, but I could not find how to fix it.\nI will be grateful for the assistance</p>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","activerecord","rspec"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12480919,"title":"Testing Rails ActiveRecord before_create method with Rspec","body":"<p>I found <a href=\"http://stackoverflow.com/questions/993941/rails-unit-testing-a-before-create\">that stackoverflow old post</a> that suggests <code>model_entity.send(:before_create)</code> but now it doesn't work. So, how can I test method that should execute <code>before create, update, destroy</code>.There is another <a href=\"http://stackoverflow.com/questions/6605199/testing-before-create-method-in-rspec-and-rails-3\">post</a> but i can't figure out, what I should do in my case.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  before_create do |user|\n    user.secure_token = UUID.new.generate\n  end\nend\n</code></pre>\n\n<p>The point is I can just make a method with this code, and call it. Is there any other ways?</p>\n\n<p>In general, if I want to test after_create method, that only have in my model at all, I should create Model Object and check it. But, I guess, it's unnecessary actions. I could just check this method without creation any instances.</p>\n"},{"tags":["unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12464145,"title":"How do i unit test for invalid arguments with phpunit?","body":"<p>I'm just learning unit testing. This php code</p>\n\n<pre><code>class Foo {\n    public function bar($arg) {\n        throw new InvalidArgumentException();\n    }\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>class FooTest extends PHPUnit_Framework_TestCase {\n    public function testBar() {\n        $this-&gt;setExpectedException('InvalidArgumentException');\n        $dummy = Foo::bar();\n    }\n}\n</code></pre>\n\n<p>fails with <code>Failed asserting that exception of type \"PHPUnit_Framework_Error_Warning\" matches expected exception \"InvalidArgumentException\".</code> from phpunit. If any value is placed within the <code>Foo::bar()</code> test then it, of course, works as expected. Is there a way to test for empty arguments? Or am I erroneously trying to create a test for something that shouldn't be within the scope of a unit test?</p>\n"},{"tags":["php","unit-testing","cakephp","cakephp-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12480681,"title":"CakePHP shell unit tests","body":"<p>I want to write unit tests for a CakePHP shell that I'm creating, but they aren't mentioned in the <a href=\"http://book.cakephp.org/2.0/en/development/testing.html\" rel=\"nofollow\">testing documentation</a> or bake:</p>\n\n<pre><code>---------------------------------------------------------------\nBake Tests\nPath: /home/brad/sites/farmlogs/app/Test/\n---------------------------------------------------------------\n---------------------------------------------------------------\nSelect an object type:\n---------------------------------------------------------------\n1. Model\n2. Controller\n3. Component\n4. Behavior\n5. Helper\nEnter the type of object to bake a test for or (q)uit (1/2/3/4/5/q) \n</code></pre>\n\n<p>Since CakePHP doesn't appear to have a default shell testing setup, what should the structure of my basic shell tests look like?</p>\n"},{"tags":["ruby","unit-testing","rspec","io","rspec2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12478133,"title":"Write test for accepting input from command line","body":"<p>I am fairly new to rspec and want to write test in <code>rspec</code> for getting input from command line in <code>Ruby</code>. How do I go about it? Also, explain the test. Thanks</p>\n"},{"tags":["c#","unit-testing","streamwriter"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":12480563,"title":"C# Unit Test a StreamWriter parameter","body":"<p>Have a bunch of classes that all an Interface and one of the parameters is a StreamWriter.</p>\n\n<p>I need to check the contents of the StreamWriter.</p>\n\n<p>Trying to find a way to avoid writing text files on the test server, and openning them to check the contents.</p>\n\n<p>Wondering if there is a way to quickly convert the StreamWriter contents/stream to a StringBuilder variable?</p>\n"},{"tags":["java","unit-testing","junit4","easymock","matcher"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12462055,"title":"PreparedStatementSetter custom Matcher","body":"<p>I'm using Junit test, to test my application, and I'm using custom matchers of Easy Mock to validate parameters of mock expects. But I can't access inner parameters of PreparedStatementSetter to make a custom matcher.</p>\n\n<p>This is what I'm mocking:</p>\n\n<pre><code>List&lt;AIMActorBean&gt; listBean = getDdfService()\n     .query(sql, new PreparedStatementSetter() {\n        public void setValues(PreparedStatement ps) throws SQLException {\n        ps.setLong(1, Long.valueOf(actorInfo.getInternalIdentifier()));\n       ps.setInt(2, Integer.valueOf(actorInfo.getPartitionIdentifier().toString()));\n      },\n  new ActorMapper());\n</code></pre>\n\n<p>actually has no validation in unit test:</p>\n\n<pre><code>expect(ddfService.query((String) anyObject(),\n  (PreparedStatementSetter) anyObject(),\n  (ActorMapper) anyObject())).andReturn(listBean)\n.once();\n</code></pre>\n\n<p>I need to know how to compare two PreparedStatementSetters for validation.</p>\n"},{"tags":["ios","xcode","unit-testing","linker-error"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":12480442,"title":"Apple Mach-O linker error in Xcode test","body":"<p>I have to include the unit test in my project. If I exclude the ApplicatioTest from target dependencies(in build phases), the application works fine. But if I include the ApplicationTest, and then build the application for run, it gives \"Apple Mach-O linker error\" at times(but not every time) and then after some tries, without any changes, the application builds again. \nThe number of errors are 25 at some time and 1 at some other times.\nPlease advise me.</p>\n\n<p>Regards</p>\n"},{"tags":["iphone","ios","unit-testing","file-io"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":441,"score":3,"question_id":8378712,"title":"NSHomeDirectory in iPhone unit test","body":"<p>When using <code>NSHomeDirectory()</code> inside a unit test I get:</p>\n\n<pre><code>/Users/hgpc/Library/Application Support/iPhone Simulator/5.0\n</code></pre>\n\n<p>I expected the actual home directory of the current application. Something like:</p>\n\n<pre><code>/Users/hgpc/Library/Application Support/iPhone Simulator/5.0/Applications/6D1091C6-02AE-4803-A7DF-D623D0F89579\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["java","unit-testing","tdd","mockito","verification"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12421014,"title":"Mockito: How do you verify the group order of certain groups of method calls?","body":"<p>I'm using Mockito to verify orders of method calls with the <code>InOrder</code> object. But I am not interested in a total ordering of the calls, only that a certain group of method calls all happen before some other methods are invoked. For example like this</p>\n\n<pre><code>@Test\npublic void testGroupOrder() {\n    Foo foo1 = mock(Foo.class);\n    Foo foo2 = mock(Foo.class);\n    Bar underTest = new Bar();\n    underTest.addFoo(foo1);\n    underTest.addFoo(foo2);\n\n    underTest.fire()\n\n    InOrder inOrder = inOrder(foo1,foo2);\n\n    inorder.verify(foo1).doThisFirst();\n    inorder.verify(foo2).doThisFirst();\n\n    inorder.verify(foo1).beforeDoingThis();\n    inorder.verify(foo2).beforeDoingThis();\n}\n</code></pre>\n\n<p>But this test does test too much, since it tests the order of the <code>Foo</code> instances. But I'm only interested in the order of the different methods. In fact I want <code>underTest</code> to not differentiate the instances of <code>Foo</code>, it may have an internal order on them or not, so it does not matter in which order the foos are called. I'd like to keep that as an implementation detail.</p>\n\n<p>But it is important that <code>doThisFirst()</code> has been called on <em>all</em> of the foos before <code>beforeDoingThis()</code> is invoked on <em>any</em> other foo. Is it possible to express that with Mockito? How?</p>\n"},{"tags":["unit-testing","testing","selenium"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12476295,"title":"Selenium -- wait for event","body":"<p>I am new to Selenium and i need to create a test case , which is having a facebook login.\nSo how can i force the test user  for login with facebook  for the test to continue.</p>\n\n<p>here is the procedure i want</p>\n\n<p>1.User click on a link</p>\n\n<p>2.It redirect to Fb for login</p>\n\n<p>3.Check the content of the page </p>\n\n<p>Please help me</p>\n"},{"tags":["c#",".net","unit-testing"],"answer_count":5,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":759,"score":9,"question_id":10949,"title":"Unit tests for deep cloning","body":"<p>Let's say I have a complex .NET class, with lots of arrays and other class object members.  I need to be able to generate a deep clone of this object - so I write a Clone() method, and implement it with a simple BinaryFormatter serialize/deserialize - or perhaps I do the deep clone using some other technique which is more error prone and I'd like to make sure is tested.</p>\n\n<p>OK, so now (ok, I should have done it first) I'd like write tests which cover the cloning.  All the members of the class are private, and my architecture is so good (!) that I haven't needed to write hundreds of public properties or other accessors.  The class isn't IComparable or IEquatable, because that's not needed by the application.  My unit tests are in a separate assembly to the production code.</p>\n\n<p>What approaches do people take to testing that the cloned object is a good copy?   Do you write (or <em>rewrite</em> once you discover the need for the clone) all your unit tests for the class so that they can be invoked with <em>either</em> a 'virgin' object <em>or</em> with a clone of it?   How would you test if part of the cloning wasn't deep enough - as this is just the kind of problem which can give hideous-to-find bugs later?</p>\n"},{"tags":["unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":254,"score":1,"question_id":7614,"title":"Testing a function that throws on failure","body":"<p>What is the best way of testing a function that throws on failure? Or testing a function that is fairly immune to failure?</p>\n\n<p>For instance; I have a I/O Completion Port class that throws in the constructor if it can't initialise the port correctly. This uses the Win32 function of CreateIoCompletionPort in the initialiser list. If the handle isn't set correctly - a non-null value - then the constructor will throw an exception. I have never seen this function fail.</p>\n\n<p>I am pretty certain that this (and other functions like it in my code) if they fail will behave correctly, the code is 50 lines long including white-space, so my questions are</p>\n\n<p>a) is it worth testing that it will throw<br>\nb) and if it is worth testing, how to?<br>\nc) should simple wrapper classes as these be unit-tested?  </p>\n\n<p>For b) I thought about overriding CreateIoCompletionPort and passing the values through. In the unit test override it and cause it to return 0 when a certain value is passed in. However since this is used in the constructor then this needs to be static. Does this seem valid or not?</p>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12472828,"title":"SetUp, initilize Junit testing","body":"<p>Hello there I am trying to test my 3 classes that sorts string arrays in different ways!</p>\n\n<p>I know that there is a method that intilize an array and then uses them in every single of my tests.</p>\n\n<p>So far this is my code:</p>\n\n<pre><code>public class SortingTest {\n\n    public insertionSort is = new insertionSort();\n    public bubbleSort bs = new bubbleSort();\n    @Test\n    public void testBubbleSort() {\n        String [] sortedArray ={\"Chesstitans\", \"Ludo\", \"Monkey\", \"Palle\"};\n        bs.sort(sortedArray);\n        assertArrayEquals(sortedArray, x);\n    }\n    @Test\n    public void testInsertionSort() {\n\n\n    }\n    @Test\n    public void testMergeSort() {\n\n\n    }\n    @Test\n    public void testSelectionSort() {\n\n\n    }\n    @Before\n    protected void setUp() throws Exception{\n        String[]x ={\"Ludo\", \"Chesstitans\", \"Palle\", \"Monkey\"};\n    }\n\n}\n</code></pre>\n\n<p>Eventhough I have tried both setUp and initilize method it doesnt seem to find x what have I done wrong?</p>\n\n<p>Best regards</p>\n\n<p>Marc Rasmussen</p>\n"},{"tags":["unit-testing","teamcity","artifacts"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12475062,"title":"Copy Output from Unit test to artifacts","body":"<p>Some of my unit tests produce output files. The question is: Is it possible to copy these files to the artifacts?</p>\n\n<p>I already tried to locate the generated files and I found them in the TeamCity Buildagent Temp folder.</p>\n"},{"tags":["java","spring","unit-testing","spring-batch"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12475951,"title":"Problems with testing batch:split","body":"<p>I have spring batch job like this.</p>\n\n<pre><code>&lt;batch:job id=\"jobId\"&gt;\n    &lt;batch:step id=\"step1\" next=\"step2\"&gt;...&lt;/batch:step&gt;\n    &lt;batch:step id=\"step2\" next=\"step3\"&gt;...&lt;/batch:step&gt;\n    &lt;batch:split id=\"step3\" next=\"step4\"&gt;\n        ...\n    &lt;/batch:split&gt;\n    &lt;batch:step id=\"step4\" next=\"step2\"&gt;...&lt;/batch:step&gt;    \n&lt;/batch:job&gt;\n</code></pre>\n\n<p>And I need to test split with id \"step3\" separatly. I have unit tests for every step (step1, step2 and step4).\nI there anyway to do it? (spring-batch:2.1.1.RELEASE)</p>\n\n<p>I have tried few ways.\nFirst way, I externilized split into flow, and call it inside step. Something like this:</p>\n\n<pre><code>&lt;batch:job id=\"jobId\"&gt;\n    &lt;batch:step id=\"step1\" next=\"step2\"&gt;...&lt;/batch:step&gt;\n    &lt;batch:step id=\"step2\" next=\"step3\"&gt;...&lt;/batch:step&gt;\n    &lt;batch:step id=\"step3\" next=\"step4\"&gt;\n        &lt;batch:flow parent=\"split\"/&gt;\n    &lt;/batch:step&gt;\n    &lt;batch:step id=\"step4\" next=\"step2\"&gt;...&lt;/batch:step&gt;    \n&lt;/batch:job&gt;\n\n&lt;batch:flow&gt;\n    &lt;batch:split id=\"split\"&gt;\n        ...\n    &lt;/batch:split&gt;\n&lt;/batch:flow&gt;\n</code></pre>\n\n<p>But I was unable to load Application context, (NullPointerException inside SplitParser:parse:96).</p>\n\n<p>And tried to externilize using another job:</p>\n\n<pre><code>&lt;batch:job id=\"jobId\"&gt;\n    &lt;batch:step id=\"step1\" next=\"step2\"&gt;...&lt;/batch:step&gt;\n    &lt;batch:step id=\"step2\" next=\"step3\"&gt;...&lt;/batch:step&gt;\n    &lt;batch:step id=\"step3\" next=\"step4\"&gt;\n        &lt;batch:job1 ref=\"job1\"/&gt;\n    &lt;/batch:step&gt;\n    &lt;batch:step id=\"step4\" next=\"step2\"&gt;...&lt;/batch:step&gt;    \n&lt;/batch:job&gt;\n\n&lt;batch:job id=\"job1\"&gt;\n    &lt;batch:split id=\"split\"&gt;\n        ...\n    &lt;/batch:split&gt;\n&lt;/batch:job&gt;\n</code></pre>\n\n<p>But here I got problem with job context.</p>\n"},{"tags":["android","unit-testing","android-service"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":234,"score":3,"question_id":7583697,"title":"Is it possible to mock android services under unit tests?","body":"<p>I'm trying to write unit tests for my android application and I want to mock my service class. I want to test some error behaviors in the service, such as connection errors or file not found.</p>\n\n<p>To simplify my question, I started a new Android Project and created an Activity and a Service class:</p>\n\n<p><strong>MyAndroidProjectActivity.java</strong></p>\n\n<pre><code>package br.org.venturus.android;\n\nimport android.app.Activity;\nimport android.content.ComponentName;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.ServiceConnection;\nimport android.os.Bundle;\nimport android.os.IBinder;\nimport android.view.View;\nimport android.widget.TextView;\nimport br.org.venturus.android.service.MyService;\n\npublic class MyAndroidProjectActivity extends Activity {\n    private MyService service;\n    private ServiceConnection mConnection = new ServiceConnection() {\n\n        public void onServiceConnected(ComponentName className, IBinder binder) {\n            service = ((MyService.MyBinder) binder).getService();\n\n        }\n\n        public void onServiceDisconnected(ComponentName className) {\n            service = null;\n        }\n    };\n    /** Called when the activity is first created. */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n\n        {\n            Intent service = new Intent(this, MyService.class);\n            startService(service);\n\n            bindService(service, mConnection, Context.BIND_AUTO_CREATE);\n        }\n\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        // stop MyService\n        {\n            Intent svc = new Intent(this, MyService.class);\n            stopService(svc);\n        }\n    }\n\n    public void doChange(View view) {\n        TextView tv = (TextView) findViewById(R.id.tvHello);\n\n        tv.setText(service.getNewString());\n    }\n}\n</code></pre>\n\n<p><strong>MyService.java</strong></p>\n\n<pre><code>package br.org.venturus.android.service;\n\nimport br.org.venturus.android.R;\nimport android.app.Service;\nimport android.content.Intent;\nimport android.os.Binder;\nimport android.os.IBinder;\n\npublic class MyService extends Service {\n\n    private IBinder binder;\n\n    public MyService() {\n        this.binder = new MyBinder();\n    }\n    @Override\n    public IBinder onBind(Intent intent) {\n        return binder;\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n\n    }\n\n    public class MyBinder extends Binder {\n        public MyService getService() {\n            return MyService.this;\n        }\n    }\n\n    public String getNewString() {\n        return getString(R.string.change);\n    }\n\n}\n</code></pre>\n\n<p>And I created a new Android Test Project with this unit class:</p>\n\n<p><strong>MyAndroidProjectActivityTest.java</strong></p>\n\n<pre><code>package br.org.venturus.android.test;\n\nimport android.test.ActivityInstrumentationTestCase2;\nimport android.test.UiThreadTest;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport br.org.venturus.android.MyAndroidProjectActivity;\nimport br.org.venturus.android.R;\n\npublic class MyAndroidProjectActivityTest extends\n        ActivityInstrumentationTestCase2&lt;MyAndroidProjectActivity&gt; {\n\n    private MyAndroidProjectActivity mActivity;\n    private TextView tvHello;\n    private Button btChange;\n\n    public MyAndroidProjectActivityTest() {\n        super(\"br.org.venturus.android\", MyAndroidProjectActivity.class);\n    }\n\n    @Override\n    protected void setUp() throws Exception {\n        super.setUp();\n\n        // Get the activity and components\n        {\n            mActivity = this.getActivity();\n            tvHello = (TextView) mActivity\n                    .findViewById(br.org.venturus.android.R.id.tvHello);\n            btChange = (Button) mActivity\n                    .findViewById(br.org.venturus.android.R.id.btChange);\n        }\n\n    }\n\n    public void testPreconditions() {\n        assertNotNull(tvHello);\n        assertNotNull(btChange);\n    }\n\n    @UiThreadTest\n    public void testChangeButton() {\n        assertEquals(tvHello.getText(), getActivity().getString(R.string.hello));\n        btChange.performClick();\n        assertEquals(tvHello.getText(), getActivity()\n                .getString(R.string.change));\n    }\n}\n</code></pre>\n\n<p>When I run the unit tests, the pre conditions and the change button tests are fine. What I want to do, for instance, is to create a MyServiceMock and override the MyService.getNewString to return other value, and mock this object in the test.</p>\n\n<p>Something like this:</p>\n\n<p><strong>MyServiceMock.java</strong></p>\n\n<pre><code>package br.org.venturus.android.test.service;\n\nimport br.org.venturus.android.service.MyService;\n\npublic class MyServiceMock extends MyService {\n    @Override\n    public String getNewString() {      \n        return \"This is the new value!\";\n    }\n}\n</code></pre>\n\n<p>Is that possible?</p>\n"},{"tags":["unit-testing","angularjs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12474571,"title":"UnitTest for nested controllers","body":"<p>I'm trying to write a unittest for a controller that's nested, but can't figure out how to mock the same behaviour in my unittest.</p>\n\n<p>I have 2 controllers:</p>\n\n<pre><code>function FirstController ($scope) {\n    $scope.childs = [{\n         title : 'Hello, earth!'\n    }];\n};\n\nfunction SecondController ($scope) {\n    $scope.child.title = $scope.child.title + $scope.$index;\n};\n</code></pre>\n\n<p>And in my HTML:</p>\n\n<pre><code>&lt;div data-ng-controller=\"FirstController\"&gt;\n    &lt;div data-ng-repeat=\"child in childs\" data-ng-controller=\"SecondController\"&gt;\n        {{ child.title }}\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And this works as expected (http://jsfiddle.net/tcayp/1/)</p>\n\n<p>The unittests:</p>\n\n<pre><code>// FirstController\nit('Should have childs', function () {\n    scope = {};\n    ctrl = new FirstController(scope);\n    expect(scope.childs.length).toBeGreaterThan(0);\n});\n// SecondController\nit('Should have inherited a child', function () {\n    scope = {};\n    ctrl = new SecondController(scope);\n    expect(scope.child.title).toEqual('Hello, earth!0');\n});\n</code></pre>\n\n<p>In the SecondController-test I can't figure out how to mock the inherit chain from ng-repeat.</p>\n"},{"tags":["unit-testing","testing","integration-testing","rabbitmq","automated-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12453639,"title":"How to write unit/integration tests in python with rabbitmq?","body":"<p>I have a python project written using rabbitmq, and I'm wondering how I should write unit tests for it/what are best practices. </p>\n\n<p>Since the code requires a rabbitmq server to be running in the background these are the three options I've come up with:</p>\n\n<ol>\n<li>write some checker that checks at the start of a test suite whether rabbit is running and fails if it doesn't - not ideal because it requires the manual starting of rabbitmq</li>\n<li>automatically start a process with rabbitmq on each test setUp and kill it on tearDown - for some reason this creates connection errors</li>\n<li>mock out rabbitmq - does anyone have any suggestions or tips on this one?</li>\n</ol>\n\n<p>Thanks!</p>\n\n<p>Jon</p>\n"},{"tags":["c#","unit-testing","structuremap"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12472389,"title":"Testing StructureMap convention","body":"<p>I have a convention for StructureMap that looks like this:</p>\n\n<pre><code>public class FakeRepositoriesConvention : IRegistrationConvention\n{\n    public void Process(Type type, global::StructureMap.Configuration.DSL.Registry registry)\n   {\n        if (type.Name.StartsWith(\"Fake\") &amp;&amp; type.Name.EndsWith(\"Repository\"))\n        {\n            string interfaceName = \"I\" + type.Name.Replace(\"Fake\", String.Empty);\n            registry.AddType(type.GetInterface(interfaceName), type);\n        }\n    }\n}\n</code></pre>\n\n<p>I want to implement unit tests for this, but I don't know how to do that. </p>\n\n<p>My first thought was to send in a mocked Registry and just test that AddType() is called with the right parameters. I can't get that to work though, probably because AddType() is not virtual. Registry implements IRegistry but that doesn't help me since the Process method doesn't accept an interface.</p>\n\n<p><strong>So my question is - how can I test this?</strong></p>\n\n<p><em>(I'm using nUnit and RhinoMocks)</em></p>\n"},{"tags":["ruby-on-rails-3","unit-testing","rspec","integration-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12471419,"title":"verifying contents of a response: is that a controller test or an integration test?","body":"<p>Assume I have a list of named widgets.  Somewhere in my test code, I want to verify that</p>\n\n<pre><code>widget = FactoryGirl.create(:widget)\nget :index\n</code></pre>\n\n<p>generates a page that contains the string #{widget.name} somewhere on it.</p>\n\n<p>My question: do I write this as a controller test or as an integration test?</p>\n\n<p><em>(Aside #1: This seems outside the scope of a controller test, since it is assuming knowledge about what view is rendered.  But writing it as an integration test feels too heavyweight, since it only requires a single request / response transaction.)</em></p>\n\n<p><em>(Aside #2, my general question is \"how do you decide what goes in controller tests and what goes in integration tests?\"  But this is arguably too broad for a Stack Overflow question.)</em></p>\n"},{"tags":["java","eclipse","unit-testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":65,"score":4,"question_id":12471667,"title":"How to find classes without unit tests?","body":"<p>Following the standard convention I keep my source code and unit tests in separate folders.\nI follow the same package structure when creating the test.</p>\n\n<p>For example, if there is a class <code>OrderGenerator</code> in package <code>com.kshitiz</code> in folder <code>src</code> my unit test would be <code>OrderGeneratorTest</code> in <code>com.kshitiz</code> in folder <code>test</code>.</p>\n\n<p>In my current setup this type of organization becomes unmanageable after a while. I cannot write the unit tests before the code. Some other developer is responsible for writing the code and I am supposed to followup with test cases. (Yes I know it should be the other way around but I can't help it)</p>\n\n<p>Since the test cases are written second I must go through all the packages looking for classes and look for methods in those classes to ensure that I've got a test for them. With 100s of classes and 1000s of methods its quite painful.</p>\n\n<p>Is there a way to make sure that your test case coverage is in line with the code? Is there a simple way to find the classes that don't have a corresponding test case somewhere?</p>\n\n<p>I am using Java, Eclipse and Junit 4.</p>\n"},{"tags":["iphone","ios","cocoa-touch","cocoa","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":12471418,"title":"Cocoa unit test,how to change system date?","body":"<p>I'm testing a method inside which calls <code>-[NSDate date]</code>, and use system time as a reference to do some logic stuff. I need to test if the logic is right on some specific days in a year, but I can't wait till that day. So can I change System date pragmatically when unit testing.</p>\n"},{"tags":["unit-testing","testing","terminology"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":738,"score":2,"question_id":5975843,"title":"implementation testing and unit testing","body":"<p>Hi Guys i just wondered what the differences with unit testing and implementation testing are.  I know unit testing is testing your modules/class/objects using defined inputs and checking the results against some defined outputs but what does implementation testing do and how do you do it? Also where does implementation testing fit in the development lifecycle?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12470555,"title":"how to redirect the page in mvc unit test?","body":"<p>Can any once tell how to redirect the link in mvc Nunit test?\nFor ex:\nif(Request.URL==\"www.abc.com\"){ return RedirecttoAction(\"Index\");}</p>\n\n<p>How to unit test the above code?</p>\n"},{"tags":["php","unit-testing"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12458381,"title":"Unit testing in plain PHP","body":"<p>I am curious to know how we can test our code using unit test in plain PHP.</p>\n\n<p>Is their any guideline for this.</p>\n\n<p>And how we can do unit testing when we use MVC architecture to create website.</p>\n"},{"tags":["unit-testing","nunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":12469222,"title":"change nunit testName","body":"<p>I want to change the testName when I SET THE properties outside the program,</p>\n\n<p>but the testname is just as the method name inside the code.</p>\n\n<p>I use context to set the name but it said it's readonly.</p>\n\n<p>how can I change the testname showed in the nunit GUI?</p>\n"},{"tags":["spring","hibernate","unit-testing","integration-testing","crud"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":125,"score":1,"question_id":12467966,"title":"Should I write Unit-Tests for CRUD operations when I have already Integration-Tests?","body":"<p>In our recent project Sonar was complaining about a weak test coverage. We noticed that it didn't consider integration tests by default. Beside the fact that you can configure Sonar, so it will consider them (JaCoCo plugin), we were discussing the question in our team if there really is the need to write Unit Tests, when you cover all your service and database layer with integration tests anyway. </p>\n\n<p>What I mean with integration tests is, that all our tests run against a dedicated Oracle instance of the same type we use in production. We don't mock anything. If a service depends on another service, we use the real service. Data we need before running a test, we construct through some factory classes that use our Services/Repositories (DAOs).</p>\n\n<p>So from my point of view - writing integration tests for simple CRUD operations especially when using frameworks like Spring Data/Hibernate is not a big effort. It is sometimes even easier, because you don't think of what and how to mock. </p>\n\n<p><strong>So why should I write Unit Tests for my CRUD operations that are less reliable as the Integration Tests I can write?</strong> </p>\n\n<p>The only point I see is that integration tests will take more time to run, the bigger the project gets. So you don't want to run them all before check-in. But I am not so sure if this is so bad, if you have a CI environment with Jenkins/Hudson that will do the job. </p>\n\n<p>So - any opinions or suggestions are highly appreciated!     </p>\n"},{"tags":["android","unit-testing","robotium"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":305,"score":2,"question_id":11630134,"title":"Test launch failed due to internal error: Running tests on UI thread","body":"<p>I am creating a unit testing project for my application. It was working fine before. but I had updated the <strong>ADT plugin</strong> and <strong>android SDK</strong>. after that I could launch this project but cannot separately run the <strong>test cases</strong>. It will execute first test case and then stop. Before I could manually execute the second testcase.  But now when I tried to do that I got error \"Test launch failed due to internal error: Running tests on UI thread\".please help me to solve this...<br>\nnote:using robotium 3.2.1</p>\n"},{"tags":["ruby","unit-testing","shell","rspec"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12396744,"title":"How do you unit test code that generates or uses shell commands?","body":"<p>I'm writing a Ruby library that will automate some shell commands. The commands will depend on quite a complex set of business logic.</p>\n\n<p>I want to unit test the code that generates those shell commands. I'm not sure how would I do that; I don't care much about the exact text of the commands, but I want to make sure the commands are affected by logic - which is of course the purpose of the unit tests.</p>\n\n<p>My current idea is to encapsulate the command generation into very thin template-like objects (or just templates), and have logic code call those objects when it needs to produce a shell command, and then I can check that logic code calls expected methods on the template code. This still leaves the template code untested, but that's not as important as verifying the logic. Basically</p>\n\n<pre><code>class DirectoryMaker\n  def initialize(generator)\n    @generator = generator\n  end\n  def make_directory(name)\n    if name=='baz'\n      raise 'YOURE NOT ALLOWED TO DO THAT'\n    else\n      @generator.mkdir(name)\n    end\n  end\nend\n\ndescribe DirectoryMaker do\n  it 'should produce a mkdir command' do \n    generator = double('Generator')\n    generator.should_receive('mkdir').with('foo').and_return('')\n\n    described_class.new(generator).make_directory('foo')\n  end\n\n  it 'should raise an exception when passed baz as a name' do\n    expect {\n      described_class.new(double('Generator')).make_directory('baz')\n    }.to raise_error\n  end\nend\n</code></pre>\n\n<p>Ah, it seems I've answered my question, but if you have better suggestions I'd be happy to hear them.</p>\n"},{"tags":["c++","unit-testing","unittest++"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":594,"score":2,"question_id":5923538,"title":"Getting Started with UnitTest++","body":"<p>This is the current code I have from their fundamental example: <a href=\"http://unittest-cpp.sourceforge.net/UnitTest++.html\" rel=\"nofollow\">http://unittest-cpp.sourceforge.net/UnitTest++.html</a></p>\n\n<pre><code>#include &lt;unittest++/UnitTest++.h&gt;\n\nTEST(FailSpectacularly)\n{\n    CHECK(false);\n}\n\nint main() {\n    return UnitTest::RunAllTests();\n}\n</code></pre>\n\n<p>The include exists but I'm receiving errors: <code>undefined reference to UnitTest::Test::*</code> and <code>UnitTest::*</code> where <code>*</code> is some arbitrary class/method within the UnitTest++ library.</p>\n\n<p>How can I get this to compile properly?</p>\n"},{"tags":["perl","unit-testing","asynchronous","anyevent"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":114,"score":3,"question_id":10130717,"title":"is there a way to view the AnyEvent event queue","body":"<p>I'm working on a perl project written asynchronously using AnyEvent... during testing, I had a situation where a bug in my code caused blocked code to be called after my test had completed... so the test looked like it passed, but the blocked call ended up polluting other tests later on.  What I'd like to have happen is in the teardown for the test, verify that AnyEvent isn't waiting on any other blocked calls.  Is this possible to check AnyEvent if it has any calls that haven't yet been executed?</p>\n"},{"tags":["c#","unit-testing","mstest","opencover","reportgenerator"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12466290,"title":"How to exclude classes from an OpenCover report","body":"<p>In generating coverage reports with OpenCover (and then generating an HTML report with ReportGenerator) for an MSTest suite, I am trying to exclude framework generated classes. In particular, classes generated under the project's namespace by a service reference.</p>\n\n<p>The command I am using to generate the XML files looks like:</p>\n\n<pre><code>OpenCover.Console.exe -register:user \"-target:MyProject.Tests.dll\" -targetargs:\"/testcontainer:MyContainer\" -output:coverage.xml -mergebyhash -filter:-*.AWebService.*\n</code></pre>\n\n<p>I have also tried to exclude by file:</p>\n\n<pre><code>OpenCover.Console.exe -register:user \"-target:MyProject.Tests.dll\" -targetargs:\"/testcontainer:MyContainer\" -output:coverage.xml -mergebyhash  -excludebyfile:*Reference.cs \n</code></pre>\n\n<p>but the service reference classes still show up in the XML file.</p>\n\n<p>Is there a way to exclude only those specific classes generated by Visual Studio?</p>\n"},{"tags":[".net","unit-testing","mocking","moq-3"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":12453107,"title":"Can I use Moq in this situation?","body":"<p>What possible work-around do I have for mocking this object using Moq.  The error message returned is:\n\"Invalid setup on a non-virtual (overridable in VB) member: p => p.Certificate.SubjectName.Name\"</p>\n\n<pre><code>        var st = new Mock&lt;X509SecurityToken&gt;();\n        st.SetupGet(p =&gt; p.Certificate.SubjectName.Name).Returns(\"test1\");\n        var target = new X509IssuerNameRegistry(\"test1\", \"test2\");\n\n        var actual = target.GetIssuerName(st.Object);\n\n        Assert.AreEqual&lt;string&gt;(\"test1\", actual, \"Actual security token did not equal expected security token\");\n</code></pre>\n\n<p>Note: I am trying to Mock <a href=\"http://msdn.microsoft.com/en-us/library/vstudio/system.identitymodel.tokens.x509securitytoken%28v=vs.100%29.aspx\" rel=\"nofollow\">X509SecurityToken</a>.\nHere is the class under test:</p>\n\n<p>public class X509IssuerNameRegistry : IssuerNameRegistry\n{\n    readonly List _trustedSubjectNames = new List();</p>\n\n<pre><code>public X509IssuerNameRegistry(params string[] trustedSubjectNames)\n{\n    _trustedSubjectNames = new List&lt;string&gt;(trustedSubjectNames);\n}\n\npublic override string GetIssuerName(SecurityToken securityToken)\n{\n    var x509Token = securityToken as X509SecurityToken;\n    if (x509Token != null)\n    {\n        if (_trustedSubjectNames.Contains(x509Token.Certificate.SubjectName.Name))\n        {\n            return x509Token.Certificate.SubjectName.Name;\n        }\n    }\n    throw new SecurityTokenException(\"Untrusted issuer.\");\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Any work-rounds for this (using Moq) or should I look to another mocking framework to accomplish this?  </p>\n"},{"tags":["objective-c","unit-testing","dispatch-async"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":122,"score":1,"question_id":12463733,"title":"Objective C - Unit testing dispatch_async block?","body":"<p>I read other posts that come up with solutions to this question. However, their solutions require hacky code to be added to my application in order to be able to test it. To me clean code is more important than unit test.</p>\n\n<p>I use dispatch_async in my app regularly, and I'm having trouble unit testing it. The problem is the block executes after my test is already done, since it's running asynchronously on the main queue. Is there a way to somehow wait until the block is executed and then continue with the test.</p>\n\n<p><strong>I DON'T want to pass a completion to the block only because of unit-testing</strong></p>\n\n<pre><code>- (viod)viewDidLoad\n{\n   [super viewDidLoad];\n\n   // Test passes on this\n   [self.serviceClient fetchDataForUserId:self.userId];\n\n\n   // Test fails on this because it's asynchronous\n   dispatch_async(dispatch_get_main_queue(), ^{\n      [self.serviceClient fetchDataForUserId:self.userId];\n   });\n}\n\n- (void)testShouldFetchUserDataUsingCorrectId\n{\n   static NSString *userId = @\"sdfsdfsdfsdf\";\n   self.viewController.userId = userId;\n   self.viewController.serviceClient = [[OCMockObject niceMockForClass:[ServiceClient class]];\n\n   [[(OCMockObject *)self.viewController.serviceClient expect] fetchDataForUserId:userId];\n   [self.viewController view]; \n   [(OCMockObject *)self.viewController.serviceClient verify];\n}\n</code></pre>\n"},{"tags":["java","unit-testing","junit","mocking","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":91,"score":2,"question_id":12459041,"title":"How to test method with nested for loops","body":"<p>I am beginer in unit testing. \nI use JUnit and Mockito. This is one example method which I want to test. </p>\n\n<pre><code>public List&lt;Person&gt; getPeopleList(List&lt;Aggregate&lt;Person&gt;&gt; aggregateList) {\n    List&lt;Person&gt; resultList = new ArrayList&lt;Person&gt;();\n    for (Aggregate&lt;Person&gt; aggregate : aggregateList) {\n        resultList.add(aggregate);\n\n        for (Person person : aggregate) {\n            resultList.add(person);\n        }\n    }\n    return resultList; // the result is person and aggregate list\n}\n</code></pre>\n\n<p>I tried to many ways, but I can't do it well. Example:</p>\n\n<pre><code>@Test\npublic void getPeopleListTest(){\n    ClassUnderTest testedClass = new ClassUnderTest();\n\n    Aggregate aggregate = mock(Aggregate.class);\n    Iterator&lt;Aggregate&lt;Person&gt;&gt; aggregateIterator = mock(Iterator.class);\n    when(aggregateIterator.hasNext()).thenReturn(true, false);\n    when(aggregateIterator.next()).thenReturn(aggregate);\n\n    List&lt;Aggregate&lt;Person&gt;&gt; aggregateList = mock(List.class);\n\n    aggregateList.add(aggregate);\n\n    List&lt;Person&gt; list = testedClass.getPeopleList(aggregateList);\n\n    assertEquals(1, list.size());\n}\n</code></pre>\n\n<p>Thank you in advance.</p>\n"},{"tags":["python","unit-testing","python-3.x"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12463528,"title":"For unittest.TestCase subclass, unable to get class attribute when testcases are executed by run method","body":"<p>I want to set a value to a class attribute inside a test method and use the value with same class attribute in another test method. When I tried in normal way by executing test cases with <code>run</code> method, got error as <code>AttributeError: 'Unit' object has no attribute 'b'</code>. Anyway, I found other solutions by using <code>global</code> variable and one more by assigning the class to a variable. May I know the reason why I am not able to retrieve class attribute which I had set the same using another method? Also, could you help me explaining the actual process with <code>run</code> method... Thanks in advance.</p>\n\n<p>Here is a sample code which I tried:</p>\n\n<pre><code>import unittest\nclass Unit(unittest.TestCase):\n    def test_i(self):\n        self.b=20\n    def test_j(self):\n        print self.b\n\n\nsuite=unittest.TestLoader().loadTestsFromTestCase(Unit)\nunittest.TextTestRunner(verbosity=2).run(suite)\ntest_i (__main__.Unit) ... ok\ntest_j (__main__.Unit) ... ERROR\n\n======================================================================\nERROR: test_j (__main__.Unit)\n----------------------------------------------------------------------\nTraceback (most recent call last):\nFile \"&lt;pyshell#52&gt;\", line 5, in test_j\nAttributeError: 'Unit' object has no attribute 'b'\n\n----------------------------------------------------------------------\nRan 2 tests in 0.078s\n\nFAILED (errors=1)\n&lt;unittest.runner.TextTestResult run=2 errors=1 failures=0&gt;\n\n\n    #The two ways which I solved...\n    #1.By Assinging class to a variable\n import unittest\n class Unit(unittest.TestCase):\n         def test_i(self):\n        Class=Unit\n        Class.b=20\n         def test_j(self):\n    print self.b\n\n\nsuite=unittest.TestLoader().loadTestsFromTestCase(Unit)\nunittest.TextTestRunner(verbosity=2).run(suite)\ntest_i (__main__.Unit) ... ok\ntest_j (__main__.Unit) ... 20\nok\n\n----------------------------------------------------------------------\nRan 2 tests in 0.094s\n\nOK\n&lt;unittest.runner.TextTestResult run=2 errors=0 failures=0&gt;\n\n\n\n#2.By using global attribute,but I need the class attribute value to be set and        retrieved\n\n import unittest\n class Unit(unittest.TestCase):\n     def test_i(self):\n     global b,\n     b=20\n     def test_j(self):\n     print b\n\n\nsuite=unittest.TestLoader().loadTestsFromTestCase(Unit)\nunittest.TextTestRunner(verbosity=2).run(suite)\ntest_i (__main__.Unit) ... ok\ntest_j (__main__.Unit) ... 20\nok\n\n----------------------------------------------------------------------\nRan 2 tests in 0.063s\n\nOK\n&lt;unittest.runner.TextTestResult run=2 errors=0 failures=0&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","unit-testing","tdd","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12464775,"title":"Testing protected method of AccountController","body":"<p>I am testing Account Controller in asp.net mvc project. I tested all methods and I looked the code coverage results, I noticed the Initialize method is not coveraged. </p>\n\n<p>How can I test this method?</p>\n\n<pre><code>public class AccountController : Controller\n{\n\n    public IFormsAuthenticationService FormsService { get; set; }\n    public IMembershipService MembershipService { get; set; }\n\n    protected override void Initialize(RequestContext requestContext)\n    {\n        if (FormsService == null) { FormsService = new FormsAuthenticationService(); }\n        if (MembershipService == null) { MembershipService = new AccountMembershipService(); }\n\n        base.Initialize(requestContext);\n    }\n</code></pre>\n\n<p>I tried this test method but error occured.</p>\n\n<pre><code>           [TestMethod]\n        public void Constructor_ReturnsController()\n        {\n            RequestContext requestContext = new RequestContext(new MockHttpContext(), new RouteData());\n            AccountController controller = new AccountController\n            {\n                FormsService = null,\n                MembershipService = null,\n                Url = new UrlHelper(requestContext),\n            };\n\n            IController cont = controller;\n            cont.Execute(requestContext);\n        }\n</code></pre>\n\n<p>Error Message:</p>\n\n<p>Test method MVC3Project.Tests.Controllers.AccountControllerTests+AccountControllerTest.Constructor_ReturnsController threw exception: \nSystem.NotImplementedException: The method or operation is not implemented.</p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing","tdd","code-coverage"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12341568,"title":"Unit testing asp.net mvc controller action tryupdate","body":"<p>I wanna test the controller action, but one point is not coveraged by visual studio Code coverage tool.</p>\n\n<pre><code>    public ActionResult Activate(int? id)\n    {\n        if (id == null)\n            return View(\"PageNotFound\");\n\n        var city = repository.GetCityById(id.Value);\n\n        if (city == null)\n            return View(\"PageNotFound\");\n\n\n        city.IsActive = !city.IsActive;\n\n        if (TryUpdateModel(city))\n        {\n            repository.Save();\n            return RedirectToAction(\"MyCities\");\n        }\n\n        ***return View(\"PageNotFound\");***\n    }\n</code></pre>\n\n<p>in the code coverage, <strong>*</strong><em>return View(\"PageNotFound\");<strong></em>*</strong> is not coveraged.\nBecause, I can not simulate the TryUpdateModel false stuation. TryUpdateModel can get false if model can not updated. Can u help about this?</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","nunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12453275,"title":"How to unit test the Private Actions in MVC application?","body":"<p>Can we unit test the action which are having access specifier as private? If possible how can we unit test the private actions?</p>\n"},{"tags":["entity-framework","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12431912,"title":"Entity Framework issue when creating unit tests","body":"<p>I am specifically getting the following error:</p>\n\n<p>\"The specified named connection is either not found in the configuration, not intended to be used with the EntityClient provider, or not valid.\"</p>\n\n<pre><code>[TestMethod()]\n        public void salesOrderFillListTest()\n        {\n            SalesOrderController_Accessor target = new SalesOrderController_Accessor(); \n            string orderNumber = \"1954120\";\n\n            SalesOrderData result;\n            result = target.FillingOrder(orderNumber);\n            Assert.AreEqual(null, result.ErrorMessage);\n            Assert.AreEqual(32, result.LineItems.Count);\n            Assert.AreEqual(\"WRA-24-NFL-CLEV\", result.LineItems[7].ItemNumber);\n            Assert.AreEqual(2, result.LineItems[7].OrderQuantity);\n            Assert.AreEqual(1, result.LineItems[7].FillingFilledQty);\n            Assert.AreEqual(1, result.LineItems[7].FillingRemainQty);\n        }\n</code></pre>\n\n<p>The error is coming up on the line:</p>\n\n<pre><code>result = target.FillingOrder(orderNumber);\n</code></pre>\n\n<p>I'm a junior developer and haven't had much experience with the many possible causes for this error. My App.config page contains the appropriate connection strings. Any ideas where to look for this one?</p>\n\n<p>Thanks!</p>\n"},{"tags":[".net","unit-testing"],"answer_count":5,"favorite_count":15,"up_vote_count":43,"down_vote_count":0,"view_count":3137,"score":43,"question_id":51950,"title":"How do I allow assembly (unit testing one) to access internal properties of another assembly?","body":"<p>I would like my Core assembly to not expose a certain class and I would still like to be able to test it. How can I do that ?</p>\n"},{"tags":["wpf","unit-testing","task-parallel-library"],"answer_count":1,"favorite_count":7,"up_vote_count":8,"down_vote_count":0,"view_count":1489,"score":8,"question_id":8078169,"title":"TaskScheduler.FromCurrentSynchronizationContext - how to use WPF dispatcher thread when unit testing","body":"<p>I've got code in a ViewModel that calls a service through a task.\nWhen the task finishes, it'll populate an ObservableCollection.\nThe problem is that it's waiting on the task to finish by using the ContinueWith method and providing TaskScheduler.FromCurrentSynchronizationContext as task scheduler, so that the OC gets updated on the UI thread.</p>\n\n<p>So far so good, but when it comes to unit testing, it throws an exception saying that \"the current SynchronizationContext may not be used as a TaskScheduler.\"\nIf I use a mock SynchronizationContext on the unit test, then the ObservableCollection throws an error because it's being updated based from the dispatcher thread.</p>\n\n<p>Is there any way to work around this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","nunit"],"answer_count":2,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":3176,"score":8,"question_id":492843,"title":"Is there a way to Execute NUnit Tests in a Specific Order?","body":"<p>When I am testing my DAL I need to create some database entities before others because of dependencies, is there a way via method attributes or something I can make NUnit execute my tests in the order I specify ?</p>\n"},{"tags":["php","unit-testing","tdd","mocking","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":974,"score":6,"question_id":7432458,"title":"PHPUnit: expects method meaning","body":"<p>When I create a new mock I need to call the expects method. What exactly it does? What about its arguments?</p>\n\n<pre><code>$todoListMock = $this-&gt;getMock('\\Model\\Todo_List');\n        $todoListMock-&gt;expects($this-&gt;any())\n            -&gt;method('getItems')\n            -&gt;will($this-&gt;returnValue(array($itemMock)));\n</code></pre>\n\n<p>I can't find the reason anywhere (I've tried docs). I've read the sources but I can't understand it. Thanks.</p>\n"},{"tags":["c#","unit-testing","moq","abstract-class"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":89,"score":3,"question_id":12450768,"title":"Unit testing a class that inherits from an abstract class","body":"<p>My problem is that I want to stub a property in my abstract class, because my class in test uses that property. I'm currently using latest version of Moq.</p>\n\n<p>My abstract class looks like this:</p>\n\n<pre><code>public abstract class BaseService\n{\n    protected IDrawingSystemUow Uow { get; set; }\n}\n</code></pre>\n\n<p>And my class in test looks like this:</p>\n\n<pre><code>public class UserService : BaseService, IUserService\n{\n    public bool UserExists(Model model)\n    {\n        var user = this.Uow.Users.Find(model.Id);\n        if(user == null) { return false; }\n\n        reurn true;\n    }\n}\n</code></pre>\n\n<p>I can't figure out how I can stub the <code>Uow</code> property. Does anybody have any clue? Or is my design that bad that I need to move to <code>Uow</code> property to my class in test?</p>\n"},{"tags":["python","unit-testing","google-app-engine","nose"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12456263,"title":"Python unit-testing with nose + GAE plugin","body":"<p>Since today morning I'm having some weird problem with Python's unit-testing tool Nose + NoseGAE. I want to run unit-tests for my GAE project in terminal and it ends with this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/local/bin/nosetests\", line 8, in &lt;module&gt;\n    load_entry_point('nose==1.2.1', 'console_scripts', 'nosetests')()\n  File \"/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/core.py\", line 118, in __init__\n    **extra_args)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/main.py\", line 94, in __init__\n    self.parseArgs(argv)\n  File \"/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/core.py\", line 135, in parseArgs\n    self.config.configure(argv, doc=self.usage())\n  File \"/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/config.py\", line 338, in configure\n    self.plugins.configure(options, self)\n  File \"/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/plugins/manager.py\", line 284, in configure\n    cfg(options, config)\n  File \"/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/plugins/manager.py\", line 99, in __call__\n    return self.call(*arg, **kw)\n  File \"/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/plugins/manager.py\", line 167, in simple\n    result = meth(*arg, **kw)\n  File \"build/bdist.macosx-10.7-intel/egg/nosegae.py\", line 84, in configure\n  File \"/usr/local/google_appengine/google/appengine/tools/dev_appserver.py\", line 61, in &lt;module&gt;\n    import simplejson\nImportError: No module named simplejson\n</code></pre>\n\n<p>It's weird because I'm not even using <code>simplejson</code> anywhere. I know it's part of Django, but I'm not using it either.</p>\n\n<p>OS X 10.7.4<br>\nPython 2.7.1<br>\nNose 1.2.1<br>\nNoseGAE 0.2.0</p>\n\n<p>Do you have any idea what might be wrong?</p>\n"},{"tags":["java","unit-testing","gwt","tomcat","war"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12328159,"title":"server-side test cases while gwt dev mode is running","body":"<p>So I have this (a bit) weird idea - there is The System being developed which is communicating with outside world through various services, but it's entirely server-side and is deployed as a single war. I'd like to write a basic UI (dev/debug-grade, not intended for production) for it. The main goals:</p>\n\n<ul>\n<li>Avoid calling The System services, instead call methods directly on the java objects</li>\n<li>Use GWT</li>\n<li>Must work both from test-cases (testng) and as a deployed war on tomcat (preferably both in development and production gwt modes)</li>\n<li>keep it seperate, limit changes to The System</li>\n</ul>\n\n<p>So... How to do this with gwt?\nWhen deploying to tomcat, I'd put both into the same war. (because different wars have different classloaders).\nWhen running testcases (integration, they use db and everything) I'd start embedded jetty during initialization and register new gwt servlet.</p>\n\n<p>Ok, this sounds doable. But what about dev mode? I'd like to be able to start regular dev mode which would allow to </p>\n\n<ul>\n<li>modify UI code (it would obviously do), and </li>\n<li>modify serverside code (which I would normally achieve with jrebel) - but how to run testcases in this case? I will not rewrite them for sure. </li>\n</ul>\n\n<p>Dropping the idea to run UI and The System in the same jvm would help and would allow nice separation, but would also force me to write some pointless RPC/RMI/something stuff.</p>\n\n<p>Any insights on how to approach this?</p>\n\n<p>Btw - this is just an after-hours project, so crazy-I-would-never-do-that-in-a-real-system ideas are welcome.</p>\n"},{"tags":["wpf","unit-testing","mvvm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12453924,"title":"How to unit test App.OnStartup","body":"<p>I'm writing a WPF application using MVVM, so I'm overriding OnStartup in App to set the View's ViewModel. Soon, at work, definition of done will include 100% code coverage so I'm trying to get in habit now at home on my own projects. I can't figure out how to test this function:</p>\n\n<pre><code>public partial class App : Application\n{\n  protected override void OnStartup(StartupEventArgs e)\n  {\n    base.OnStartup(e);\n\n    ViewModel.MainViewModel vm = new ViewModel.MainViewModel();\n    View.MainView v = new View.MainView();\n    v.DataContext = vm;\n    v.Show();\n  }\n}\n</code></pre>\n"},{"tags":["php","unit-testing","phpunit","simpletest","laravel"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":244,"score":2,"question_id":11479200,"title":"Laravel and Simpletest","body":"<p>I am trying to use Simpletest for unit-testing with Laravel.</p>\n\n<p>I know Laravel comes integrated with PHPUnit support and I know that PHPUnit is the industry standard, but having worked with simpletest in my last project, (CakePHP 1.3) I was hoping I could use in with Laravel too.</p>\n\n<p>As of now, there is no mention of Simpletest in Laravel documentation. Links to blogs/tutorials will be appreciated.</p>\n"},{"tags":["unit-testing","pycharm","nose","nosetests"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12452330,"title":"In PyCharm, I have an unresolved reference when calling nose.tools.assert_equals?","body":"<p>When I try to use pycharm with nose, I get red underlines with \"unresolved reference\" when calling assert_raises. I'm using a virtualenv interpreter, but nose is installed and can be run from ipython. Also, running nosetests on actual tests shows no error.</p>\n\n<p>The code I'm running is:</p>\n\n<pre><code>from nose.tools import *\n\ndef test1():\n    assert_equals(1,1)\n</code></pre>\n\n<p>Again, nose runs fine, but the linting mechanism in pycharm thinks this is an error. Any help on configuring pycharm?</p>\n"},{"tags":["java","unit-testing","dto"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":76,"score":5,"question_id":12454855,"title":"What is the best way to mock DTOs in Java?","body":"<p>When writing unit tests I need some objects with sample data. For example suppose I have an Order object. One needs to write code like this - </p>\n\n<pre><code>Order o = new Order();\no.setId(3);\no.setAmount(2830.9);\n\nList&lt;Item&gt; items = new ArrayList&lt;Item&gt;();\nItem i = new Item();\ni.setId(3);\ni.setCost(34);\nitems.add(i);\n\no.setItems(items);\n</code></pre>\n\n<p>It is a lot more frustrating and redundant than it looks here because a real object is likely to have lot more attributes and nested objects.</p>\n\n<p>And if one needs multiple orders ...</p>\n\n<p>What is the best way to create mock data objects for testing?</p>\n\n<p>Off the top of my head I'm thinking about deserializing my objects from Json. Is there a standard, efficient way to do this?</p>\n"},{"tags":["unit-testing","visual-studio-2012","xunit.net"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12453367,"title":"Why do my test functions appear in code coverage? (or how to make them 100%?)","body":"<p>I'm using xUnit to test my C# code and I'm using Visual Studio Premium 2012.</p>\n\n<p>In my solution I have my main project that I'm testing and a 2nd project that contains all of my tests. I'm supposesd to be at 100% code coverage, but there are some functions in my Test project that I cannot get to 100%. Can I just exclude that project from appearing in Code Coverage results?</p>\n\n<p>Or... does anyone now how to get a test function to 100% when you have a test where you are expecting an exception to be thrown? Here are some of the ways I've tried to write a test for a method that should throw an exception and what isn't being covered. MyBusinessLogic has a function named GenerateNameLine that accepts an object of type MyViewModel. if the Name property of MyViewModel is an empty string, it should throw an exception of type RequiredInformationMissingException.</p>\n\n<pre><code>[Fact]\npublic void TestMethod1()\n{\n  var vm = new MyViewModel();\n  vm.Name = string.Empty;\n\n  Assert.Throws&lt;RequiredInformationMissingException&gt;(delegate { MyBusinessLogic.GenerateNameLine(vm); });\n}\n</code></pre>\n\n<p>This test passes, but code coverage with color highlighting it showing me that <code>MyBusinessLogic.GenerateNameLine(vm);</code> is not getting hit.</p>\n\n<p>I've also tried:</p>\n\n<pre><code>[Fact]\npublic void TestMethod1\n{\n  bool fRequiredInfoExceptionThrown = false;\n  var vm = new MyViewModel();\n  vm.Name = string.Empty;\n\n  try\n  {\n    MyBusinessLogic.GenerateNameLine(vm);\n  }\n  catch (Exception ex)\n  {\n    if (ex.GetType() == typeof(RequiredInformationMissingException))\n      fRequiredInfoExceptionThrown = true;\n  }\n\n  Assert.True(fRequiredInfoExceptionThrown, \"RequiredInformationMissingException was not thrown.\");\n}\n</code></pre>\n\n<p>This test also passes. But code coverage says the <code>}</code> right before my <code>catch</code> is never hit.</p>\n\n<p>I don't know how to write a test for an exception that gets 100%. I know it doesn't even really matter, but at work 100% code coverage is part of our definition of done, so I don't know what to do here.</p>\n"},{"tags":["android","unit-testing","tdd"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":170,"score":1,"question_id":7701131,"title":"Can i use TDD in android developing process?","body":"<p>I am a newbie to android. And feels like TDD can reduce developing time a lot. But after learning android's junit test framework, find it a bit difficult to achieve the goal that write test before coding. Especially when i want to test module like adapters, views and databases. So i wonder it's because i am not familiar with android test framework enough or android is not suitable for TDD.</p>\n"},{"tags":["php","unit-testing","design-patterns","dependency-injection"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":204,"score":2,"question_id":896068,"title":"Where can I find large php5 best practises project?","body":"<p>I'm trying to find a project that incorporates the \"best practices\" that are discussed and debated on a daily basis for almost all languages but I'm trying to focus on php5.</p>\n\n<p>Is there a php5 open source project that I can comb through to see working examples of project that exemplifies Units Tests, Dependency Injection and other best practices</p>\n\n<p>I'm basically researching for a new large project and wanted to see a shining example project in all it's glory instead of the snippets of code that are endlessly debated.  Since this project will not inherit a whole bunch of legacy code I'm really trying to get things right from the start.</p>\n"},{"tags":["php","unit-testing","dependency-injection","dependencies"],"answer_count":1,"favorite_count":9,"up_vote_count":13,"down_vote_count":0,"view_count":357,"score":13,"question_id":6094744,"title":"Dependency Hell — how does one pass dependencies to deeply nested objects?","body":"<p>Here is a generic imaginary example made up for this post. Consider 6 classes</p>\n\n<pre><code>TableFactory, TableData, TableCRUD, TableSchema, DBConnect, Logger. \n</code></pre>\n\n<p><code>TableFactory</code> is the outer class, let's say it holds a <code>TableData</code> object for a  DB table.</p>\n\n<p>In this <code>TableFactory</code>,  there are no calls to <code>TableSchema</code> or <code>DBConnect</code> or <code>logger</code>.  I am aiming for an example of inner objects not needed in outer scope.</p>\n\n<p><code>TableData</code> is an inner fetches and operates on the data, so it needs <code>TableCrud</code>, <code>DBConnect</code> and <code>Logger</code>.</p>\n\n<p><code>TableCrud</code>  contains <code>TableSchema</code> and needs <code>DBConnect</code>, and <code>Logger</code>.</p>\n\n<p><code>DbConnect</code> itseld, to make things fun, needs a Logger. My example is now 3 scopes deep.</p>\n\n<p><strong>My Question is pretty simple, if you have an object 3 (or more) scopes in that are not called upon by objects on outer scope, how does one send those objects from outer to inner scope without breaking the Interface Segregation Principle -> TableFactory shouldn't have to deal with DBConnect or Logger needed by inner objects.</strong></p>\n\n<p>If one respects basic OOP principles and aims for easy testability -> you would have outer objects needing injection of the 5 objects, and then have getter methods that woud pass the objects needed further up the chain.  And inner scoped objects would in turn require injection of the dependencies of their inner  3-scope-deep objects, with getters for those too.  This makes for outer scoped objects requiring many dependencies, and getters just to pass those on.</p>\n\n<p>Is there an alternative to this object-passing methodology,  something I missed along the way? Please share! Any links/comments appreciated.</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","associations","factory-girl"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":107,"score":4,"question_id":12320984,"title":"How could I create factories for a cyclic association in FactoryGirl?","body":"<p>I've been having trouble trying to create factories for some objects and associations that I have defined in my project. I have a cyclic kind of association, where an object is associates with two other objects that afterwards join together. </p>\n\n<pre><code>+--------------+           +-------------+\n|              |           |             |\n| TestCase     +---------&gt; | TestDataGrid|\n|              |           |             |\n+------+-------+           +------+------+\n       |                          |\n       |                          |\n       |                          |\n       v                          v\n+--------------+           +--------------+\n|              |           |              |\n|              |           |              |\n| TestVariable |           | TestDataSet  |\n|              |           |              |\n+------+-------+           +------+-------+\n       |                          |\n       |                          |\n       |                          |\n       |                          |\n       |     +---------------+    |\n       |     |               |    |\n       |     |               |    |\n       +---&gt; | TestDataValue |&lt;---+\n             |               |\n             +---------------+\n</code></pre>\n\n<hr>\n\n<pre><code>class TestCase &lt; ActiveRecord::Base\n  has_many :test_variables, dependent: :destroy\n  has_many :test_data_grids\n  #...omitted code...\nend\n\nclass TestVariable &lt; ActiveRecord::Base\n  belongs_to :test_case\n  has_many :test_data_values\n  #...omitted code...\nend\n\nclass TestDataValue &lt; ActiveRecord::Base\n  belongs_to :test_variable\n  belongs_to :test_data_set\n  #...omitted code...\nend\n\nclass TestDataSet &lt; ActiveRecord::Base\n  belongs_to :test_data_grid\n  has_many :test_data_values\n  #...omitted code...\nend\n\nclass TestDataGrid &lt; ActiveRecord::Base\n  belongs_to :test_case\n  has_many :test_data_sets\n  #...omitted code...\nend\n</code></pre>\n\n<p>Basically the association splits in TestCase and is joined again in TestDataValue, how could I create a Factory that opens and closes the circle with the same objects?</p>\n"},{"tags":["java","xml","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":106,"score":3,"question_id":12351512,"title":"Good java library to compare xml files for unit testing?","body":"<p>I am looking for a good java library to compare xml files in unit tests. Currenly we are using a simple string compare, but this requires that the xml file is printed the same way (currenly on 1 line). </p>\n\n<p>I have found the following on the net: <a href=\"http://xmlunit.sourceforge.net/\" rel=\"nofollow\">http://xmlunit.sourceforge.net/</a>. But i looks old (latest version from  September 2009). Does somebody knows a more recent library or is this still the one to use?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12421698,"title":"Junit | comparing dynamic objects","body":"<p>How do I compare dynamic object types in Junit for example:-</p>\n\n<pre><code>while (objList.hasNext()) {\n      Object&lt;String&gt; obj = objList.next();\n      Assert.assertEquals(\"expected\", obj); \n}\n</code></pre>\n\n<p>In this scenario if one occurrence is failed the whole test will fail. Is it a good approach if I use a condition before the assert test to pin point the expected String </p>\n\n<p>like this:</p>\n\n<pre><code>while (objList.hasNext()) {\n      Object&lt;String&gt; obj = objList.next();\n      if (obj.equals(\"expected\")) {\n           Assert.assertEquals(\"expected\", obj); \n      }\n}\n</code></pre>\n\n<p>but in this case there's no point of having a Junit assert test. Because I'm already doing what Junit is intended to do\nThanks.     </p>\n"},{"tags":["python","unit-testing","python-3.x","nose"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":12376598,"title":"Conflicts between unittest and nose frameworks","body":"<p>Nose <a href=\"http://nose.readthedocs.org/en/latest/writing_tests.html#test-generators\" rel=\"nofollow\">supports test generators</a>. But the documentation says:</p>\n\n<blockquote>\n  <p>Please note that method generators are not supported in\n  unittest.TestCase subclasses</p>\n</blockquote>\n\n<p>This means all my test generators must be outside of <code>unittest</code> framework.</p>\n\n<p>Question: should I still use the <code>unittest</code> framework for those tests where I can? Or should I, for consistency reasons, abandon <code>unittest</code> entirely?</p>\n\n<p>And why doesn't <code>nose</code> support test generators within <code>unittest.TestCase</code>? It seems to destroy the biggest advantage of <code>nose</code>: that it is an <em>extension</em> rather than a <em>replacement</em> for <code>unittest</code>, thus offering additional benefits without taking away any of the features provided by <code>unittest</code>. Or am I missing something?</p>\n\n<p>And a related question. If I ditch <code>unittest</code> entirely, should I put my tests into global functions or into some new class hierarchy?</p>\n"},{"tags":["asp.net","unit-testing","caching"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":12446895,"title":"how to unit testing cache layer","body":"<p>I have added a <strong>cache layer</strong> to my project . now I wonder if I could <strong>unit test</strong> methods that manipulate cache ? or is there a better way to test Layer's logic ?</p>\n\n<p>I just want to check the process , for example :</p>\n\n<p>1- when the item is not in the cache , method should hit the database</p>\n\n<p>2- the next time method should use cache</p>\n\n<p>3- when a change is made to database , cache should be cleared</p>\n\n<p>4- if data retrieved from databse is null , it shouldn't be added to cache </p>\n\n<p>I want to ensure that the logic I have placed into the methods are working as expected .</p>\n"},{"tags":["python","unit-testing","google-app-engine","nosetests"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12398927,"title":"App Engine Unit Testing with nosetests gae issue","body":"<p>I've been unit testing my application using <code>nosetests</code> with the <code>with-gae</code> plugin. </p>\n\n<p>However, I've wrapped many of my get/post handlers with decorators that check certain items in the datastore and put them in os.environ for use in the handlers. </p>\n\n<p>So I might have a decorator that does something like:</p>\n\n<pre><code>os.environ[\"user\"] = User()\n</code></pre>\n\n<p>where User() is an ndb.Model instance. However, when I run nosetests, this will always fail and will give me an error like:</p>\n\n<pre><code>os.environ[\"user\"] = user\nFile \"C:\\Python27\\lib\\os.py\", line 420, in __setitem__\n   putenv(key, item)\nTypeError: must be string, not User\n</code></pre>\n\n<p>I had a similar thread here:</p>\n\n<p><a href=\"https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/1KR7UIPHoQM\" rel=\"nofollow\">https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/1KR7UIPHoQM</a></p>\n\n<p>I was told App Engine doesn't actually call getenv/putenv in the os module. </p>\n\n<p>The error is because in Python's normal <code>os</code> module, you cannot insert anything but strings into <code>os.environ</code> and <code>nosetests</code> is using the regular Python <code>os</code> module apparently. </p>\n\n<p>However, App Engine uses <code>request_environment.py</code> to handle <code>os.environ</code> calls. </p>\n\n<p>How can I mitigate this so nosetests will behave with <code>os.environ</code> calls?</p>\n"},{"tags":["unit-testing","testing","code-coverage"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":125,"score":5,"question_id":12398494,"title":"Is branch coverage the same as decision coverage?","body":"<p>I'm learning software testing right now, and I found that there are a lot of coverage criterias out there. And something just confused me.</p>\n\n<p><strong>Is branch coverage equals to decision coverage?</strong>\nwiki said it's not the same <a href=\"http://en.wikipedia.org/wiki/Code_coverage#Modified_condition.2Fdecision_coverage\">here</a>, I read the reference document, but I didn't found something such as: <code>branch coverage</code> is not <code>decision coverage</code>, maybe it's because my poor English...</p>\n\n<p>But other tutors all says <code>branch coverage</code> is <code>decision coverage</code>. So can anyone give me a clear answer about this? thanks a lot.</p>\n"},{"tags":["java","unit-testing","junit","hamcrest"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":97,"score":4,"question_id":11941810,"title":"Hamcrest library for date","body":"<p>I have been looking around but I have not found anything useful.  Are there any 3rd party libraries that work with hamcrest that have extensive date matching?</p>\n\n<p>Specifically I am looking for matchers along the lines of:</p>\n\n<pre><code>assertThat(myDate, is(withinMinutes(sourceDate, 10)));\nassertThat(myDate, is(afterDate(sourceDate)));\nassertThat(myDate, is(betweenDates(startDate, endDate)));\n</code></pre>\n\n<p>I wanted to see if there was anything out there before I rolled my own.</p>\n"},{"tags":["c#","unit-testing","properties"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12414485,"title":"How to UnitTest if all Properties are Set. There is no Duplication","body":"<p>Hello I'm trying to test a class that represents layout theme of GUI. It has color and size properties and a method that sets the default values.</p>\n\n<pre><code>public class LayoutTheme : ILayoutTheme\n{\n    public LayoutTheme()\n    {\n        SetTheme();\n    }\n\n    public void SetTheme()\n    {\n        WorkspaceGap = 4;\n        SplitBarWidth = 4;\n        ApplicationBack = ColorTranslator.FromHtml(\"#EFEFF2\");\n        SplitBarBack = ColorTranslator.FromHtml(\"#CCCEDB\");\n        PanelBack = ColorTranslator.FromHtml(\"#FFFFFF \");\n        PanelFore = ColorTranslator.FromHtml(\"#1E1E1E \");\n        // ...\n    }\n\n    public int WorkspaceGap { get; set; }\n    public int SplitBarWidth{ get; set; }\n    public Color ApplicationBack { get; set; }\n    public Color SplitBarBack { get; set; }\n    public Color PanelBack { get; set; }\n    public Color PanelFore { get; set; }\n    // ...\n}\n</code></pre>\n\n<p>I need to test:\n1. If all of the properties are set by the SetTheme method.\n2. If there is no duplication in setting a property. </p>\n\n<p>For the first test, I first cycle through all properties and set an unusual value. After that I call SetTheme method and cycle again to check if all properties are changed.</p>\n\n<pre><code>[Test]\npublic void LayoutTheme_IfPropertiesSet()\n{\n    var theme = new LayoutTheme();\n    Type typeTheme = theme.GetType();\n\n    PropertyInfo[] propInfoList = typeTheme.GetProperties();\n\n    int intValue = int.MinValue;\n    Color colorValue = Color.Pink;\n\n    // Set unusual value\n    foreach (PropertyInfo propInfo in propInfoList)\n    {\n        if (propInfo.PropertyType == typeof(int))\n            propInfo.SetValue(theme, intValue, null);\n        else if (propInfo.PropertyType == typeof(Color))\n            propInfo.SetValue(theme, colorValue, null);\n        else\n            Assert.Fail(\"Property '{0}' of type '{1}' is not tested!\", propInfo.Name, propInfo.PropertyType);\n    }\n\n    theme.SetTheme();\n\n    // Check if value changed\n    foreach (PropertyInfo propInfo in propInfoList)\n    {\n        if (propInfo.PropertyType == typeof(int))\n            Assert.AreNotEqual(propInfo.GetValue(theme, null), intValue, string.Format(\"Property '{0}' is not set!\", propInfo.Name));\n        else if (propInfo.PropertyType == typeof(Color))\n            Assert.AreNotEqual(propInfo.GetValue(theme, null), colorValue, string.Format(\"Property '{0}' is not set!\", propInfo.Name));\n    }\n}\n</code></pre>\n\n<p>Actually the test works well and I even found two missed settings, but I don't think it is written well.\nProbably it can be don with Moq of the interface and check if all properties are set.</p>\n\n<p>About the second test, don't have idea how to do it. Probably mocking and checking the number of calls can do it. Any help?</p>\n\n<p>Thank you!</p>\n"},{"tags":["c++","unit-testing","boost","boost-test"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12445729,"title":"testing new operator fail","body":"<p>I've created a class in which there's some <strong>new</strong> operator in the constructor. I've created the guard into the constructor to manage new operator failing, but now I want to test it.</p>\n\n<p>As example, I've a constructor that is like this:</p>\n\n<pre><code>Function::Function()\n{\n  try\n  {\n    m_pxArgument = new Argument();\n  }\n  catch(std::bad_alloc)\n  {\n    throw MemoryException();\n  }\n}\n</code></pre>\n\n<p>Is it possible to create a test in which I can tell the new operator to fail, to test my catch code?</p>\n"},{"tags":["python","unit-testing","sqlalchemy","rollback"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":159,"score":2,"question_id":12440044,"title":"How to rollback the database in SQL Alchemy?","body":"<p>For my database project, I am using SQL Alchemy. I have a unit test that adds the object to the table, finds it, updates it, and deletes it. After it goes through that, I assumed I would call the <strong>session.rollback</strong> method in order to revert the database changes. It does not work because my sequences are not reverted. My plan for the project is to have one database, I do not want to create a test database.</p>\n\n<p>I could not find in the documentation on SQL Alchemy on how to properly rollback the database changes. Does anyone know how to rollback the database transaction?</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12412601,"title":"PHPUnit: Writing tests for custom assertions","body":"<p>For our PHPUnit testing,  we sometimes write custom assertions. Today I found a custom assertion that wasn't asserting quite what it ought to have been. It seems that this problem could have been avoided if I had written a unit test for the assertion itself.</p>\n\n<p>The only problem I see is that I'm not quite sure how to handle writing tests for an assertion that it ought to fail, without having that lead to the test itself failing.  In other words, for a test that expects a string, 'foo', I want to do something like:</p>\n\n<pre><code>public function testAssertFoo()\n{\n   $var = 'bar';\n   $callable = array( $this, \"assertFoo\" );\n   $this-&gt;assertTestFails( $callable, $var );\n}\n</code></pre>\n\n<p>Of course, there is no assertTestFails assertion. But is there a clean way to do something like that?</p>\n"},{"tags":["unit-testing","mstest"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":12441565,"title":"Unit testing checking for nulls","body":"<p>This is a very basic question but I still cannot find the appropriate answer. In my test there is a possibility to have null values and because of that the last stage (Act) starts looking a little bit strange (it is no longer act only). What I mean is the following:</p>\n\n<pre><code>Assert.IsNotNull(variable);\n\nvar newVariable = variable.Property;\nAssert.IsNotNull(newVariable);\n\nvar finalVariable = newVariable.AnotherProperty;\nAssert.AreEqual(3, finalVariable.Count);\n</code></pre>\n\n<p>Now they are obviously related and I have to be sure that the values are not null, but also there are three asserts in one test and the act part starts to look not right. </p>\n\n<p>So what is the general solution in such cases? Is there anything smarter than 3 tests with one assert each and checks for null before the asserts of the last 2?</p>\n"},{"tags":["javascript","unit-testing","dependencies","stub","raytracing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12439646,"title":"What Are My Options For Unit-Testing This Method?","body":"<p>My Ray module:</p>\n\n<pre><code>define(['Util', 'Vector3f'], function (Util, Vector3f) {\n  var Ray = {}\n  Ray.o = null;\n  Ray.d = null;\n  Ray.depth = 0;\n  Ray.mint = 0.03;\n  Ray.maxt = null;\n  return Ray;\n});\n</code></pre>\n\n<p>My unit test:</p>\n\n<pre><code>describe(\".moveAlong(Number t)\", function(){\n  it(\"returns a point at distance t in the direction of the ray\", \n  function(){\n    expect(4).toBe(null); //unimplemented unit test always fails\n  });\n});\n</code></pre>\n\n<p>Ray.o is the ray's origin. Ray.d is the ray's direction. I want Ray.moveAlong(t) to return a point q such that q = o + d*t.</p>\n\n<p>My understanding of unit-testing is that if I actually include my Vector3f module in my unit-test so that I can give the Ray an origin and a direction, what I'm actually doing it integration-testing. But I'll need the add() and mulScalar() methods from my Vector3f module in order to calculate ray.d + ray.d*t in moveAlong(t).</p>\n\n<p>What are my options for handling my Vector3f-dependency here? I don't see how I can reasonably stub it out, but stubbing out dependencies and testing only one method at a time is the point of unit-testing.</p>\n"},{"tags":["php","unit-testing","session","login"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12288601,"title":"$_SESSION never getting set","body":"<p>I'm working on an assignment on a PHP course, and I'm stucked at the last part of it.</p>\n\n<p>The assignment is to create a simple login form and use a session as well as hardcoded usernames and passwords (i.e. no db).</p>\n\n<p>What I have problems with is the class that handles the login, and sessions especially. There's a lot of code and I didn't know what I could remove and therefore I've put it on Pastebin instead, hope that's alright.</p>\n\n<p>Thing is that the unit tests that's built into the class passes except for nr. 4, the one that's checking that the user is logged in. The problem seems to be that $_SESSION[$this->loginSession] doesn't get set, and this is what I need help with.</p>\n\n<p>The variable $loginSession is declared in the beginning of the class, and should be set to \"isLoggedIn\" when a user types a correct username and password, but that doesn't happen (no error message).</p>\n\n<p>My class is:</p>\n\n<pre><code>&lt;?php\n\nclass LoginHandler {\n\n        private $loginSession;\n\n        public function IsLoggedIn() {\n                if($_SESSION[$this-&gt;loginSession] == \"isLoggedIn\") {\n                        return true;\n                }\n                else {\n                        return false;\n                }\n        }\n\n        public function DoLogin($username, $password){\n\n                if ($username != null &amp;&amp; $password != null){\n                        switch ($username){\n                                case \"hello\";\n                                if ($password == \"1234\"){\n                                        $_SESSION[$this-&gt;loginSession] == \"isLoggedIn\";\n                                        return true;\n                                }\n                                else return false;\n                                case \"hello2\";\n                                if ($password == \"12345\"){\n                                        $_SESSION[$this-&gt;loginSession] == \"isLoggedIn\";\n                                        return true;\n                                }\n                                else return false;\n                        }\n                }\n                else {\n                        return false;\n                }\n        }\n\n        public function DoLogout(){\n                unset($_SESSION[$this-&gt;loginSession]);\n        }\n\n        public function Test() {\n\n                $this-&gt;DoLogout();\n\n                // Test 1: Check so you're not logged in.\n                if($this-&gt;IsLoggedIn() == true){\n                        echo \"Test 1 failed\";\n                        return false;\n                }\n\n                // Test 2: Check so that it's not possible to login with wrong password.\n                if ($this-&gt;DoLogin(\"hello\", \"4321\") == true){\n                        echo \"Test 2 failed\";\n                        return false;\n                }\n\n                // Test 3: Check that it's possible to log in.\n                if ($this-&gt;DoLogin(\"hello\", \"1234\") == false){\n                        echo \"Test 3 failed\";\n                        return false;\n                }\n\n                // Test 4: Check that you're logged in\n                if ($this-&gt;IsLoggedIn() == false){\n                        echo \"Test 4 failed\";\n                        return false;\n                }\n\n                return true;\n        }\n}\n\n?&gt;\n</code></pre>\n\n<p>I hope it's enough to include the class and not all the other files, otherwise I'll put them up.</p>\n"},{"tags":["c#","unit-testing","events","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12438400,"title":"C# and Moq - How to Assert an Event is Not Raised","body":"<p>I have an application that raises events depending on the state of a Sim object. In particular, if the state of the Sim changes - i.e. from PinRequired to Accessible - an OnStatus event will be raised. The events notify listeners on a new thread.</p>\n\n<p>I am using Moq in my unit tests and am able to assert that OnStatus is raised like so:</p>\n\n<pre><code>        [Test]\n    public void TestOnStatusIsRaised()\n    {\n        Sim sim = new Sim();\n\n        sim.OnStatus += OnStatus;\n\n        lock (this)\n        {\n            sim.UpdateSimInfo(new Info(\"a new status\"));\n            Monitor.Wait(this);\n        }\n\n        Assert.IsTrue(_onStatusCalled);\n    }\n\n    private void OnStatus(SimStatus obj)\n    {\n        lock (this)\n        {\n            _onStatusCalled = true;\n            Monitor.Pulse(this);\n        }\n    }\n</code></pre>\n\n<p>As you can see, using the Monitor class I can wait until the event is raised before proceeding and asserting that the _onStatusCalled flag has been set to true.</p>\n\n<p>My difficulty arises when I want to assert that an event is not raised. I can't use Monitor to wait for the event not to be raised as the test would wait forever! I could added a timeout to the wait, but that seems like a dirty hack.</p>\n\n<p>I have tried the following:</p>\n\n<pre><code>        [Test]\n    public void TestOnStatusIsNotFired()\n    {\n        Sim sim = new Sim();\n        sim.OnStatus += onStatus =&gt; Assert.Fail(\"OnStatus Was called\");\n\n        sim.UpdateSimInfo(new Info(\"the same status\"));\n    }\n</code></pre>\n\n<p>but it doesn't work - before fixing the code to ensure the event is not raised, the test always passes. I have even stepped through the code and observed an exception being thrown by the <code>Assert.Fail()</code>, but this does not cause the test to fail as my event is raised in a try/catch block and the NUnit exception is caught.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["unit-testing","mocking","terminology","definition","stub"],"answer_count":3,"favorite_count":53,"up_vote_count":71,"down_vote_count":0,"view_count":6939,"score":71,"question_id":346372,"title":"What's the difference between faking, mocking, and stubbing?","body":"<p>I know how I use these terms, but I'm wondering if there are accepted definitions for <strong>faking</strong>, <strong>mocking</strong>, and <strong>stubbing</strong> for unit tests?  How do you define these for your tests?  Describe situations where you might use each.</p>\n\n<p>Here is how I use them:</p>\n\n<p><strong>Fake</strong>: a class that implements an interface but contains fixed data and no logic.  Simply returns \"good\" or \"bad\" data depending on the implementation.</p>\n\n<p><strong>Mock</strong>: a class that implements an interface and allows the ability to dynamically set the values to return/exceptions to throw from particular methods and provides the ability to check if particular methods have been called/not called.</p>\n\n<p><strong>Stub</strong>: Like a mock class, except that it doesn't provide the ability to verify that methods have been called/not called.</p>\n\n<p>Mocks and stubs can be hand generated or generated by a mocking framework.  Fake classes are generated by hand.  I use mocks primarily to verify interactions between my class and dependent classes.  I use stubs once I have verified the interactions and am testing alternate paths through my code.  I use fake classes primarily to abstract out data dependencies or when mocks/stubs are too tedious to set up each time.</p>\n"},{"tags":["asp.net-mvc","unit-testing","session-variables","httpcontext"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12423360,"title":"how to unit test for session variable in controller in mvc","body":"<p>I am unit-testing my controller.</p>\n\n<p>In one of my controller methods I am setting Session variables:</p>\n\n<pre><code>public void Index()\n{       Session[\"foo\"] = \"bar\";\n        return View();\n}\n</code></pre>\n\n<p>How can I unit-test this? The problem is that the Session property is null when testing. Injecting is not possible because the Session property is readonly.</p>\n\n<p>I don't want to use any third-party tool or mocking.</p>\n"},{"tags":["c#","unit-testing","session","httpcontext"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12430696,"title":"Unit testing code that relies on a SessionManager class with a dependency on HttpContext.Current","body":"<p>I have a SessionManager class in an existing application that looks like this:</p>\n\n<pre><code>public class SessionManagerBase&lt;TKey&gt;\n{\n    public static void AddItem(TKey key, object item)\n    {\n        _httpContext.Session[key.ToString()] = item;\n    }\n\n    public static T GetItem&lt;T&gt;(TKey key)\n    {\n        object item = _httpContext.Session[key.ToString()];\n        return item == null ? default(T) : (T) Convert.ChangeType(item, typeof (T));\n    }\n\n    // etc...\n\n    private static HttpContextBase _httpContext\n    {\n        get\n        {\n            return new HttpContextWrapper(HttpContext.Current);\n        }\n    }\n}\n</code></pre>\n\n<p>In my HomeController, I have code like the following:</p>\n\n<pre><code>public ActionResult Landing(string id)\n{\n    SessionManager.GetItem&lt;Campaign&gt;(SessionKeys.Campaign)\n\n    // commented for brevity\n\n    return View(\"Index\");\n}\n</code></pre>\n\n<p>When I run a unit test on the Landing method, the test fails because HttpContext.Current is null. I've mocked the Session object in my unit tests, and if I attempt to access Session directly in the Landing method (i.e. Session[\"SomeValue\"]) it works, but any code that relies on the SessionManager is broken.</p>\n\n<p>Bottom line is that I want a class I can use to access Session values in a generic, strongly typed manner, but that can also be unit tested. Anyone have any suggestions on how I can modify this code to achieve that?</p>\n"},{"tags":["java","android","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":44,"score":3,"question_id":12427959,"title":"Android unit testing and class member visibility","body":"<p>Have created an android test project and currently trying to write android unit tests</p>\n\n<p>now if you have a bunch of classes whose methods you are trying to test and you've been good and applied the principle of least access and made all your member variables private how do you then write effective unit tests?</p>\n\n<p>In other words, my unit tests sit in a class outside of the class i am trying to test, so I can't access any of the member variables in my assert statements</p>\n\n<p>is there a workaround for this scenario where you want access to everything for testing purposes</p>\n\n<p>please don't tell me i have to write getters and setters for every member variable just so I can write some unit tests</p>\n\n<p>(thinking about it, this is more a Java question than an android specific question)</p>\n"},{"tags":["c#","unit-testing","assert","test-class"],"answer_count":10,"favorite_count":23,"up_vote_count":106,"down_vote_count":0,"view_count":38284,"score":106,"question_id":933613,"title":"C#: How do I use Assert (Unit Testing) to verify that an exception has been thrown?","body":"<p>How do I use Assert (or other Test class?) do verify that an exception has been thrown?</p>\n"},{"tags":["c#","unit-testing","repository-pattern"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12430998,"title":"Unit test with HttpWebClient or RestSharp","body":"<p>I am trying to find a way to write the unit test for the \"CheckSomething\" method, but i am having a very difficult time figuring out what to do with the RestClient object i am instantiating in the method. </p>\n\n<p>Should I abstract away the RestClient, and put the Interface dependency at the class level and injected from withint he constructor?? If i go with this route, does that mean I have to interface out all the dependencies ??</p>\n\n<pre><code>public class SomeRepository : IXRepository\n{\n    public SomeRepository()\n    {\n    }\n\n    public bool CheckSomething()\n    {\n        var client = new RestClient(\"someurl\");\n\n        var request = new RestRequest(\"resourceX/{name}\", Method.GET);\n        request.AddUrlSegment(\"name\", \"ABC\");\n        var response = client.Execute(request);\n\n        if (response.StatusCode == HttpStatusCode.NotFound) return false;\n        if (response.StatusCode == HttpStatusCode.OK) return true;\n\n        throw new Exception(\"Something is messed up\");\n    }\n}\n</code></pre>\n"},{"tags":["javascript","unit-testing","dojo","jenkins","doh"],"answer_count":3,"favorite_count":3,"up_vote_count":13,"down_vote_count":0,"view_count":887,"score":13,"question_id":5256334,"title":"How to run Dojo DOH unit-tests through Jenkins?","body":"<p>Has anyone tried integrating Dojo DOH unit-tests with Jenkins?</p>\n\n<p>I'd like to do the following, but don't want to reinvent it if this has already been done. So, I'm thinking:</p>\n\n<ol>\n<li>Kick off the DOH-tests from a post-build step in Jenkins and wait for the results</li>\n<li>Run the tests themselves in a headless-browser (e.g. Crowbar)</li>\n<li>Parse the succes/error-count from the HTML returned by Crowbar</li>\n<li>Find (or write) a Jenkins plugin that will (a) fail the build if there are failing tests, (b) render the test results, (c) possibly integrate results into the CI game plugin</li>\n</ol>\n\n<h1>Questions:</h1>\n\n<ol>\n<li>Has this been done before?</li>\n<li>Do you see any issues with the outline above?</li>\n<li>Do you know of a Jenkins plugin that will help, or will I have to build my own?</li>\n</ol>\n"},{"tags":["c#","unit-testing","rhino-mocks"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12208538,"title":"Rhino Mocks Why Can't I Mock a Property?","body":"<p>I spent a few days writing a test, then had to add a property at the last minute to fix one of the issues I found in writing my test. Since adding that property I have been stuck just trying to get the mocking framework to function.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>using (_mockRepository.Record())\n        {\n            _mockBattleDao.Expect(b =&gt; b.GetUnprocessedActions(gameId, round)).Return(roundResolvingItems);\n            _mockDao.Expect(b =&gt; b.GetMidGameCharacterStats(gameId, round)).Return(midGameCharacterStats);\n            _mockBattleDao.Expect(b =&gt; b.GetAmbientCharacterBuffs(_mockTiersHelper, gameId, round)).Return(new List&lt;Buff&gt;());\n            _mockBattleDao.Expect(b =&gt; b.GetActiveTriggerBuffs(_mockTiersHelper, gameId, round)).Return(triggerBuffs);\n            _mockBattleDao.Expect(b =&gt; b.GetActiveAmbientBuffs(_mockTiersHelper, gameId, round)).Return(new List&lt;Buff&gt;());\n            _mockDao.Expect(b =&gt; b.GetGame(gameId)).Return(new Common.Entities.Game { CompletionType = \"single party down\" });\n            _mockDao.Expect(b =&gt; b.GetAbilityById(1337)).Return(ability).Repeat.Times(3);\n            _mockDao.Expect(b =&gt; b.GetAbilityById(1727)).Return(attackAbility).Repeat.Times(4);\n            _mockTiersHelper.Expect(b =&gt; b.AddStatistic(Arg&lt;StatAndCount&gt;.Is.Anything)).Repeat.Times(3);\n            SetupResult.For(_mockTiersHelper.Round).Return(round);\n        }\n\n        TiersCalculationContainer container;\n\n        using (_mockRepository.Playback())\n        {\n            container = engine.ProcessTiers();\n        }\n</code></pre>\n\n<p>I Know the AAA syntax is the new hotness but I have a large test that is complete but for this and I don't want to go back and rewrite.</p>\n\n<p>When code execution reaches the closing \"}\" of the \"Playback\" using I get this exception:</p>\n\n<p>ExpectationViolationException</p>\n\n<p>TiersCalculationContainer.get_Round(); Expected #1, Actual #0.</p>\n\n<p>When debugging the test the property \"Round\" is read correctly and retursn the value I mocked for it so I know it was called.</p>\n\n<p>I can't find any information online about this. There seems to be about 100 ways to mock a property in Rhino mocks. None of them are working and this is getting really frustrating.</p>\n\n<p>I have also tried mocking all of these ways as well (and more)</p>\n\n<pre><code>_mockTiersHelper.Expect(b =&gt; b.Round).Return(round);\nExpect.Call(_mockTiersHelper.Round).PropertyBehavior();\n_mockTiersHelper.Round = round;\n</code></pre>\n"},{"tags":[".net","visual-studio","unit-testing","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":468,"score":3,"question_id":9289503,"title":"MsTest DeploymentItem OutputDirectory in testsettings","body":"<p>How can I specify output directory when I create DeploymentItem in testsettings? It is easy when you apply DeploymentItem attribute to method or class (there is a special constructor parameter) but I don't see a way to apply it in testsettings (and even UI doesn't contain anything like this).</p>\n"}]}
{"total":15323,"page":14,"pagesize":100,"questions":[{"tags":["unit-testing","nose","python-3.2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":11385256,"title":"An alternative to nosetests which works well with Python 3.2","body":"<p>I'm porting my JenkinsAPI project to Python3.</p>\n\n<p>Previously I used a utility called \"nose\" which has a versatile test-runner which is capable of generating junit XML output when I run a suite of unit-tests.</p>\n\n<p>I've noticed that nose does not seem to run that well on Python 3.x. I often get errors like the one in this issue (https://github.com/nose-devs/nose/issues/134). </p>\n\n<p>Is there an alternative? What's the best way to run unit-tests and get junit-style XML output given that I am using Python 3.2?</p>\n\n<p>I'd like to only use official releases - I want other people to be able to easily verify my test-suite. That means even though it might be possible to clone the latest version from git or apply simple patches, it's going to be a nightmare for others to follow me. So I'm only interested (initially) in packages which are cross-platform and easily available from pypi.</p>\n\n<p>For now my primary development platform us Ubuntu 12.4 64bit, however eventually I need my product to work on just about any kind of computer that supports python 3.x.</p>\n"},{"tags":["asp.net-mvc","entity-framework","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12424379,"title":"Create a fake DbContext","body":"<p>I am creating an MVC application with EF and currently have used the generic repository pattern, like this one: <a href=\"http://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle\" rel=\"nofollow\">Generic Repository Pattern</a>. Everything worked great except for the fact that for each repository a new context was created and working with two or more repositories is needed in my application. As I am using StructureMap I added </p>\n\n<pre><code>x.For&lt;IDbContext&gt;().HttpContextScoped().Use(context =&gt; new MyContext());\n</code></pre>\n\n<p>where IDbContext has the respective methods and is no longer generic but is passed through the constructor.</p>\n\n<p>The problem comes when I have to test things - I want to create an in memory storage (faster than db, custom, easy to control data), something like a HashTable or HashSet for example. What I cannot figure out is how to make a fake implementation of IDbContext that retreives the data from that HashTable. For reference IDbContext looks like this (only the methods used by the DbContext in the generic repository):</p>\n\n<pre><code>    public interface IDbContext : IDisposable\n    {\n        IDbSet&lt;TEntity&gt; Set&lt;TEntity&gt;() where TEntity : class;\n        DbEntityEntry&lt;TEntity&gt; Entry&lt;TEntity&gt;(TEntity entity) where TEntity : class;\n        int SaveChanges();\n    }\n</code></pre>\n\n<p>In the current situation I suppose I have made a major mistake as creating a fake context does not seem to be a regular routine. Any advices on how to improve the architecture of my application and make it more testable are appreciated.</p>\n"},{"tags":["unit-testing","sqlite","nunit","ioexception"],"answer_count":11,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":1633,"score":6,"question_id":374567,"title":"NUnit [TearDown] fails -- what process is accessing my files?","body":"<p><strong>Final Edit:</strong> I found a solution to the problem (at the bottom of the question).</p>\n\n<p>I've got an Nunit problem that's causing me grief. <strong>Edit:</strong> actually it looks more like a SQLite problem, but I'm not 100% certain yet.</p>\n\n<p>My TestFixture has a setup that generates a random filename that's used as a SQLite database in each of my tests.</p>\n\n<pre><code>[Setup]\npublic void Setup()\n{\n    // \"filename\" is a private field in my TestFixture class\n    filename = ...; // generate random filename\n}\n</code></pre>\n\n<p>Each of my tests use this construct in each method that accesses the database:</p>\n\n<pre><code>[Test]\npublic void TestMethod()\n{\n    using (var connection = Connect())\n    {\n        // do database activity using connection\n\n        // I've tried including this line but it doesn't help\n        // and is strictly unnecessary:\n        connection.Close();\n    }\n}\n\nprivate DbConnection Connect()\n{\n    var connection = DbProviderFactories.GetFactory(\"System.Data.SQLite\").CreateConnection();\n    connection.ConnectionString = \"Data Source=\" + filename;\n    connection.Open();\n    return connection;\n}\n</code></pre>\n\n<p>So that one helper method <code>Connect()</code> is used by all the methods. I'm assuming that the <code>using() { }</code> construct is calling <code>Dispose()</code> on the connection at the end of <code>TestMethod()</code> and freeing up the connection to the SQLite database file.</p>\n\n<p>The problem I have is in my [TearDown] method:</p>\n\n<pre><code>    [TearDown]\n    public void Cleanup()\n    {\n        File.Delete(filename); // throws an IOException!\n    }\n</code></pre>\n\n<p>With every test I get an exception:</p>\n\n<pre><code>System.IO.IOException: The process cannot access the file 'testdatabase2008-12-17_1030-04.614065.sqlite' because it is being used by another process.\n</code></pre>\n\n<p>All of the tests fail when they get to the [TearDown], so I end up with a directory full of temporary databse files (one per test, each with a different name) and a whole bunch of failed tests.</p>\n\n<p>What process is accessing the file? I don't get how a second process could be accessing the file. The <code>connection</code> has completely gone out of scope and been Dispose()d by the time I'm trying to delete the file, so it can't be something SQLite related. Can it?</p>\n\n<p>Note that I get the same result if I run all the tests or just a single test.</p>\n\n<p><strong>Update:</strong> So I tried Dispose()ing of my DbCommand objects as well, since I wasn't doing that (I assumed that every other ADO.NET provider that Dispose()ing the DbConnection also Dispose()s any commands on that connection.) So now they look like:</p>\n\n<pre><code>[Test]\npublic void TestMethod()\n{\n    using (var connection = Connect())\n    {\n        using (var command = connection.CreateCommand())\n        {\n        // do database activity using connection\n\n        }\n    }\n}\n</code></pre>\n\n<p>It didn't make any difference -- the File.Delete() line still throws an IOException. :-(</p>\n\n<p>If I remove that one line in [TearDown] then all my tests pass, but I'm left with a whole bunch of temporary database files.</p>\n\n<p><strong>Another Update:</strong>\nThis works just fine:</p>\n\n<pre><code>var filename = \"testfile.sqlite\";\nusing (var connection = BbProviderFactories.GetFactory(\"System.Data.SQLite\").CreateConnection())\n{\n    connection.ConnectionString = \"Data Source=\" + filename;\n    connection.Open();\n    var createCommand = connection.CreateCommand();\n    createCommand.CommandText =\n        \"CREATE TABLE foo (id integer not null primary key autoincrement, bar text not null);\";\n    createCommand.ExecuteNonQuery();\n    var insertCommand = connection.CreateCommand();\n    insertCommand.CommandText = \"INSERT INTO foo (bar) VALUES (@bar)\";\n    insertCommand.Parameters.Add(insertCommand.CreateParameter());\n    insertCommand.Parameters[0].ParameterName = \"@bar\";\n    insertCommand.Parameters[0].Value = \"quux\";\n    insertCommand.ExecuteNonQuery();\n}\nFile.Delete(filename);\n</code></pre>\n\n<p>I don't understand!</p>\n\n<p><strong>Update:</strong> Solution found:</p>\n\n<pre><code>    [TearDown]\n    public void Cleanup()\n    {\n        GC.Collect();\n        File.Delete(filename);\n    }\n</code></pre>\n\n<p>I ran the unit tests through the debugger, and when the <code>[TearDown]</code> method starts there are definitely no references to the SQLite DbConnection around any more. Forcing a GC must clean them up though. There must be a bug in SQLite.</p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":3,"favorite_count":20,"up_vote_count":37,"down_vote_count":0,"view_count":8983,"score":37,"question_id":358802,"title":"JUnit test with dynamic number of tests","body":"<p>In our project I have several <a href=\"http://www.junit.org/\" rel=\"nofollow\">JUnit</a> tests that e.g. take every file from a directory and run a test on it. If I implement a testEveryFileInDirectory method in the TestCase this shows up as only one test that may fail or succeed. But I am interested in the results on each individual file. How can I write a TestCase / TestSuite such that each file shows up as a separate test e.g. in the graphical testrunner of eclipse? (Coding an explicit test method for each file is not an option.)</p>\n\n<p>Compare also the question <a href=\"http://stackoverflow.com/questions/385925/parameterizedtest-with-a-name-in-eclipse-testrunner\">ParameterizedTest with a name in Eclipse Testrunner</a>.</p>\n"},{"tags":["android","unit-testing","junit-ee"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12420633,"title":"How to test just one line source in Android?","body":"<p>I have to make a Android Junit Test.\nAnd the source just like this way:</p>\n\n<pre><code>public class A extends Activity{\n\n    private classB mB;\n    private int mType = 2; \n\n    somebutton.setOnClickListener(new View.OnClickListener() {\n                public void onClick(View v) {\n                       mB.showDialog(\n                            new DialogInterface.OnClickListener() {\n                                public void onClick(DialogInterface dialog, int which) {\n                                 //next line is the modified and I have to make test file                               \n                                  mB.setType(mType);\n                                }\n                            }\n                       )\n                }\n        }\n  }\n</code></pre>\n\n<p>And I could let the test click button and prepare all other needed things, but I want to how to assertTrue? And there is no \"getType()\" and the \"Type\" in \"mB\" is private.</p>\n\n<p>Thank you for your time.</p>\n"},{"tags":["ruby-on-rails","unit-testing","validation"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":896,"score":0,"question_id":1481502,"title":"Simple syntax for testing Validation errors","body":"<p>I'm looking for clean and short code to test validations in Rails Unittests.</p>\n\n<p>Currently I do something like this</p>\n\n<pre><code>test \"create thing without name\" do\n    assert_raise ActiveRecord::RecordInvalid do\n        Thing.create! :param1 =&gt; \"Something\", :param2 =&gt; 123\n    end\nend\n</code></pre>\n\n<p>I guess there is a better way that also shows the validation message?</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>My current solution without an additional frameworks is:</p>\n\n<pre><code>test \"create thing without name\" do\n    thing = Thing.new :param1 =&gt; \"Something\", :param2 =&gt; 123\n    assert thing.invalid?\n    assert thing.errors.on(:name).any?\nend\n</code></pre>\n"},{"tags":["database","oracle","unit-testing","junit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12411513,"title":"Testing multiple methods in a file using JUnit","body":"<p>I am quite new to Java and JUnit. \nWe have loads of procedures in the database which we want to test, so we were thinking of the possibility of using JUnit to test them if it is feasible.</p>\n\n<p>The database procs/functions which need to be tested along with the parameters, output expected will all be passed through a file.\nI am not sure whether this is something where JUnit would help as we are looking at getting the information from the file, run the tests for each proc and then provide an output which specifies how many had failed along with the error messages.</p>\n\n<p>Based on my understanding when I read few posts and internet search, it seems that I need a separate method with @Test to test every database procedure which would mean that we need to create Java methods in advance. But the test would be to help database developers who don't have much knowledge in Java, to just specify the proc to be bested in a file and JUnit framework will take care of the rest.</p>\n\n<p>Is this feasible with JUnit, any advice please? </p>\n"},{"tags":["javascript","unit-testing","dom"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12420498,"title":"How can I test JavaScript output in the DOM without a browser?","body":"<p>I would like to test the output generated by some functions which are responsible to generate new content in the dom.\nThe problem is that I need to test such scenarios without using a browser and by running xpath queries against the generated output. (something like HTMLUnit in Java).\nHow can I write such tests? Which framework/technology can I use? </p>\n"},{"tags":["android","unit-testing","intellij-idea","apk","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":31,"score":0,"question_id":12414106,"title":"Does IntelliJ packs \"test file\" along with the application in APK","body":"<p>I am trying to write Unit test for an Android application in IntelliJ Idea (which is a wonderful IDE) using Robolectric. I have created unit test in the same application as suggested in <a href=\"http://blog.chariotsolutions.com/2012/08/integrating-robolectric-with-intellij.html#comment-form\" rel=\"nofollow\">this blog</a>.</p>\n\n<p>Now my question does IntelliJ IDE pack the test classes also along with the application classes in the final APK?</p>\n"},{"tags":["ios","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12407944,"title":"iOS unit test run failure","body":"<p>In my app I perform a unit test the following way:</p>\n\n<p>.h file: </p>\n\n<pre><code>@interface MyAppTests : SenTestCase\n{\n    SMAppDelegate* _appDelegate;\n    SMMenuViewController* _menuViewController;\n    UIView* _mainView;\n}\n</code></pre>\n\n<p>.m file</p>\n\n<pre><code>- (void)setUp\n{\n    [super setUp];\n    _appDelegate = [[UIApplication sharedApplication]delegate];\n    _menuViewController = [[SMMenuViewController alloc]init];\n    _mainView = [_menuViewController view]; // to force the view to load\n}\n\n- (void)tearDown\n{\n    // Tear-down code here.\n    _mainView = nil;\n    _menuViewController = nil;\n    _appDelegate = nil;\n    [super tearDown];\n}\n\n- (void)testMenuViewisNotNil\n{\n    STAssertNotNil(_menuViewController, @\"menuViewController is nil\");\n}\n</code></pre>\n\n<p>When i run the app, it runs ok, but when i test it get an error saying the following:</p>\n\n<blockquote>\n  <p>Thread 1: EXC_BREAKPOINT (code=EXC_I386_BPT, subcode=0x0)</p>\n</blockquote>\n\n<p>it points to this line in ViewDidLoad()</p>\n\n<pre><code>messageTextView = [[UITextView alloc]init];\n</code></pre>\n\n<p>messageTextView is declared in the .h file, it's not created with Interface Builder, i add it to the view with the addSubview method. i declare it like this:</p>\n\n<pre><code>@interface SMMenuViewController : UIViewController &lt;UITextFieldDelegate&gt;\n{\n}\n@property (strong, nonatomic) UITextView *messageTextView;\n</code></pre>\n\n<p>messageTextView get synthesized, and i \"nil\" it in viewDidUnload. Still i don't know why it fails at the unit test.</p>\n\n<p>Can anyone tell me why?</p>\n\n<p>Any help is very much appreciated!</p>\n\n<p>Sincerely,</p>\n\n<p>Zoli</p>\n"},{"tags":["silverlight","unit-testing","testing","nunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12418301,"title":"How to test the event trigger function in the Silverlight Application","body":"<p>In my application some are button click event and some functions. for this i need to write the test case. I wrote  test for function but i don't know how to write test case for the button click events. please help me.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["eclipse","unit-testing","testing","junit"],"answer_count":4,"favorite_count":4,"up_vote_count":13,"down_vote_count":0,"view_count":5722,"score":13,"question_id":5131897,"title":"How to create unit tests easily in eclipse","body":"<p>I want to create unit tests easily by just selecting method. Is there a tool in eclipse that does that. It should support templates. I should be able to create positive test as well as negative tests.</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","rspec"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12417018,"title":"Testing Net::HTTP.get_Response()","body":"<p>I'm trying to test a method I have on one of my rails models. I am returning the HTTP status from a url and don't know how I can stub the return to test out different return codes to make sure my code works for different situations.</p>\n\n<p>Here's the line of code I want to mock:</p>\n\n<pre><code>response = Net::HTTP.get_response(URI.parse(self.url))\n</code></pre>\n\n<p>I want to have the <code>Net:HTTP.get_response</code> to return a specific HTTPResponse for each of the tests I have in my spec.  </p>\n\n<pre><code>describe Site do\n  before :each do\n    FactoryGirl.build :site\n  end\n  context \"checking site status\" do\n    it \"should be true when 200\" do\n      c = FactoryGirl.build :site, url:\"http://www.example.com/value.html\"\n      #something to mock the Net::HTTP.get_response to return and instance of Net::HTTPOK\n      c.ping.should == true\n    end      \n    it \"should be false when 404\" do\n      c = FactoryGirl.build :site, url:\"http://www.example.com/value.html\"\n      #something to mock the Net::HTTP.get_response to return and instance of Net::HTTPNotFound\n      c.ping.should == false       \n    end\n  end\nend\n</code></pre>\n\n<p>How would I stub out the return values from get_response?</p>\n"},{"tags":["unit-testing","testing","backbone.js","mocha"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":137,"score":0,"question_id":12134752,"title":"Testing Backbone View with Mocha","body":"<p>I have a simple Backbone View and a simple unit test written in Mocha.</p>\n\n<p>View code: </p>\n\n<pre><code>var MyView = Backbone.View.extend({\nel: '#myDiv',\ninitialize: function(options) {\n  if(options.model)\n    this.model = options.model;\n  }\n});\n</code></pre>\n\n<p>My test code:</p>\n\n<pre><code>var view;\ndescribe('myView Test', function(){\n  before(function(done){\n    view = new MyView();\n  });\n});\n</code></pre>\n\n<p>When I try to create a new View, I receive;</p>\n\n<pre><code>Application View \"before all\" hook:\nTypeError: Expecting a function in instanceof check, but got #myDiv\nat backbone.js line 1203\n</code></pre>\n\n<p>I am not so sure what is missing here, any insights?</p>\n\n<p>Thank you,\nsakal</p>\n"},{"tags":["python","unit-testing","python-3.x"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12399809,"title":"Asking unittest to raise an exception on first failure","body":"<p>I am trying to debug a failing test. Is there a way to ask <code>unittest</code> to not catch an exception from a test, but rather let it go through to the debugger?</p>\n\n<p>It seems <code>unittest</code> just added <code>--failfast</code> option, but it still catches the exception inside <code>unittest</code>, and only stops it from running any further tests.</p>\n"},{"tags":[".net","unit-testing","moq"],"answer_count":6,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":2169,"score":4,"question_id":2772621,"title":"How to Mock the Internal Method of a class?","body":"<p>I have a class which has a internal method and i want to mock the internal method . But i am unable to mock it i.e. it is not calling the mocked function but calling the original function. Is there any way to achieve this ? </p>\n\n<p>Edit:Actually i am a novice to the Moq. I have many classes and methods of the classes to test using the Moq. Many classes are internal , many have internal methods, many have not-virtual methods . And can not change the signature on the methods and classes. Can anyone please let me know how to go about testing this scenario using Moq. Or else please suggest me some other testing framework which is easy to learn and easy to work with .  </p>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12414597,"title":"Test generation in Visual Studio 2012","body":"<p>Visual Studio 2010 had a feature with which it was possible to generate a test method for each public method or property of a class. Even I know that the result was more or less use less, I was wondering if this feature still exists in VS2012 because I didn't find it.</p>\n"},{"tags":["java","spring","unit-testing","autowired"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12413640,"title":"How to Unit Test an interface that is always Autowired (Java)","body":"<p>So I have an interface, let's call it X</p>\n\n<p>So in the regular code i have:</p>\n\n<pre><code>public class doStuff()\n{\n@Autowired\nprivate X x;\n\npublic stuff()\n{\nx.doYourThing();\n}\n}\n</code></pre>\n\n<p>I have no idea how to test this though.</p>\n\n<p>If i try:</p>\n\n<pre><code>public class XTest()\n{\n  @Autowired\n  private X x;\n  public void test(){\n  string val = x.FillUpVal();\n  assertTrue(\"It didn't work\",val==\"hi\");\n  }\n\n}\n</code></pre>\n\n<p>I get x as null so it immediately throws a NullPointerException and fails the test.  I'm looking for some guidance as to the proper way to go about this.</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12412958,"title":"Django Package tests not found","body":"<p>I have a weird problem at hand.</p>\n\n<p>I'm creating a django package and would like to provide some test cases for it.</p>\n\n<p>The package is named ajax_forms and the full path is part of my PYTHONPATH.\nThis directory also contains a tests directory (with the <strong>__<em>init</em>__</strong>.py file) a tests.py file (containing the tests) and a urls.py file.</p>\n\n<p>Now I want to run the tests.</p>\n\n<p>The ajax_forms parent directory has an example project setup with ajax_forms in INSTALLED_APPS.</p>\n\n<p>But I can't seem to let the tests run:</p>\n\n<pre><code> &gt;&gt; ./manage.py test ajax_forms\nCreating test database for alias 'default'...\n\n----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\nDestroying test database for alias 'default'...\n</code></pre>\n\n<p>No tests are found so I try to be more specific:</p>\n\n<pre><code> &gt;&gt; ./manage.py test ajax_forms.tests\n....\nraise ValueError(\"Test label '%s' does not refer to a test\" % label)\nValueError: Test label 'ajax_forms.tests' does not refer to a test\n(ajax-validation)\n</code></pre>\n\n<p>Even ./manage.py ajax_forms.tests.tests.AjaxFormViewTest will not find the tests and gives the same error as above.</p>\n\n<p>But trying to import the test case from the ./manage.py shell works fine</p>\n\n<pre><code>In [2]: from ajax_forms.tests.tests import AjaxFormViewTest\n</code></pre>\n\n<p>I'm kinda clueless here, on what's going on.</p>\n"},{"tags":["c++","unit-testing","floating-point","signal-processing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12404214,"title":"Error bounds when unit testing floating point signal processing library","body":"<p>I have a signal processing library that functions to spec. However, I have identified some good places for refactoring. I have been meaning to incorporate unit testing into my workflow for some time and this looks like a good opportunity to experiment with non-trivial code. This is so I can test that the output is near-identical after refactoring.</p>\n\n<p>I am experimenting with <a href=\"http://www.levelofindirection.com/journal/2010/12/28/unit-testing-in-c-and-objective-c-just-got-easier.html\" rel=\"nofollow\">catch</a> as a test framework, however, this detail might be irrelevant as (from what I can gather) all test frameworks hinge around results from operators, i.e.</p>\n\n<pre><code>REQUIRE(i_x == 2)\n</code></pre>\n\n<p>However, with floating point data, some form of error bounds checking is required . .  </p>\n\n<pre><code>const float target = 2.000f;\nconst float tolerance = 0.000005f;\nconst float err = target*tolerance;\nREQUIRE( (f_x &gt; target-err) &amp;&amp; (f_x &lt; target+err) )\n</code></pre>\n\n<p>This would quickly get ugly for every test written, so I could, of course, make a (templatized) global function that returns a <code>bool</code> given <code>x</code>, <code>target</code>and <code>tolerance</code> as parameters. </p>\n\n<p>Is this the way that everyone else does this? Is this best practice or am I missing a trick?</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","rspec"],"answer_count":2,"favorite_count":5,"up_vote_count":21,"down_vote_count":0,"view_count":5357,"score":21,"question_id":1063073,"title":"RSpec controller testing - blank response.body","body":"<p>I am stuck with a problem when testing my controllers with RSpec - the response.body call always returns an empty string. In browser everything renders correctly, and cucumber feature tests seem to get it right, but RSpec fails each and every time.</p>\n\n<p>Other expectations on the response object, such as <code>response.should render_template('index')</code> pass without any problems.</p>\n\n<p>Have any of you encountered this problem before? Perhaps the response html can be obtained in some other way?</p>\n\n<p>As for versions, Rails 2.1.0, RSpec 1.2.7.</p>\n"},{"tags":["unit-testing","ios5","xcode4","ocunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12407951,"title":"tearDown at Unit Testing of Xcode","body":"<pre><code>- (void) tearDown \n{\n  // tear-down code here\n  [super tearDown];\n}\n</code></pre>\n\n<p>What is the functionality of tearDown here?</p>\n\n<p>Does \"<code>tearDown</code>\" only used to release the memory?\nor something else?</p>\n"},{"tags":["silverlight","unit-testing","selenium","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12406038,"title":"How to do the unit testing for the simple silverlight application","body":"<p>I am having simple Calculator application. In this i have one Method. I don't know how to test that method nu? Can you please any one help me.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["visual-studio-2010","unit-testing","deployment"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":353,"score":1,"question_id":10162436,"title":"Visual Studio 2010 - Does not copy folder on deployment to \"Out\" directory","body":"<p>Hi I need copy folder which contains XML configuration files for IoC in Unit Test Projects to TestResults \"output\" directory. I use Visual Studio 2010.</p>\n\n<p>Visual Studion solution has this structure:</p>\n\n<ul>\n<li>MyProject (Solution)\n<ul>\n<li>MyProject.Tests (Unit Test Project)\n<ul>\n<li>CoreSettings (folder which contains XML files, I need copy this folder to <strong>MyProject.Tests\\bin\\debug\\TestResults\\test_XXX\\out</strong>)</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>First I tried edit this two files:</p>\n\n<ul>\n<li>Local.testsettings</li>\n<li>TraceAndTestImpact.testsettings</li>\n</ul>\n\n<p>I opened these two configuration files in VS and:</p>\n\n<ul>\n<li>chose Deployment >> Add Directory and  added in both configuration files folder  CorreSettings.</li>\n</ul>\n\n<p>I ran test but <strong>folder CoreSettings</strong> was not copy to <strong>MyProject.Tests\\bin\\debug\\TestResults\\test_XXX\\out</strong>.</p>\n\n<p>I google it and found this <a href=\"http://stackoverflow.com/a/3588829/1110195\">http://stackoverflow.com/a/3588829/1110195</a>.</p>\n\n<p>So I edited these files :</p>\n\n<ul>\n<li>Local.testsettings</li>\n<li>TraceAndTestImpact.testsettings</li>\n</ul>\n\n<p>And added this:</p>\n\n<pre><code>&lt;DeploymentItem filename=\"MyProject.Tests\\CoreSettings\\\" outputDirectory=\"CoreSettings\\\"&gt;\n</code></pre>\n\n<p>But it didn’t help.</p>\n\n<p>I tried used attribute way.</p>\n\n<p>on test class I added.</p>\n\n<pre><code> [DeploymentItem(@\"MyProject.Tests\\CoreSettings, @\"CoreSettings\\\")]\n</code></pre>\n\n<p>But also this way didn’t copy folder CoreSettings to TestRestults\\test_XXX\\out.</p>\n\n<p>In TestRestults\\test_XXX\\out I found and DLL’s but not CoreSettings folder.</p>\n\n<p>All XML files in CoreSettings folder has:</p>\n\n<ul>\n<li>Build Action: Content</li>\n<li>Copy to Output Directory: Copy always</li>\n</ul>\n\n<p>What I do bad? Thank you for help.</p>\n"},{"tags":["ruby-on-rails","unit-testing","postgresql","rake"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":174,"score":0,"question_id":10609217,"title":"Why is PostgreSQL telling me a schema doesn't exist?","body":"<p>I am on Chapter 7 of Agile Web Development with Rails (4th edition), and when I run rake test:units, I get the following error:</p>\n\n<pre><code>rake aborted!\nPG::Error: ERROR: invalid value for parameter \"search_path\": \"public\" \nDETAIL: schema \"public\" does not exist\n: SET search_path TO public\n\nTasks: TOP =&gt; db:test:load =&gt; db:test:purge\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I am on a MacBook Pro with OSX 10.7.4. I have Ruby 1.9.3, Rails 3.1.0, Rake 0.9.2.2, and PostgreSQL 9.1. My production, development, and test databases all exist, have been migrated to, and match the names, user, and password in my config/database.yml file. The schema for all of them is public.</p>\n\n<p>Can anyone help me?</p>\n"},{"tags":["ios","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12405873,"title":"iOS error during test","body":"<p>I'm trying to test (not to run) my app, but i get the following error: </p>\n\n<blockquote>\n  <p>Thread 1: EXC_BREAKPOINT (code=EXC_I386_BPT, subcode=0x0)</p>\n</blockquote>\n\n<p>and it points to a line in my viewcontroller's initWithNibName.</p>\n\n<pre><code>@synthesize messageTextView;\n\n- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil\n{\n    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];\n    if (self) \n    {\n        /*\n        some code\n        */\n     //This is the line where the exception points:\n     messageTextView = [[UITextView alloc]initWithFrame:CGRectMake(0, 306, 320, 110)];\n        /*\n        some other code\n        */\n\n\n    }\n    return self;\n}\n</code></pre>\n\n<p>My viewcontroller's .h file looks like this:</p>\n\n<pre><code>@interface SMMenuViewController : UIViewController &lt;UITableViewDelegate, UITableViewDataSource, UITextFieldDelegate ,UITextViewDelegate&gt; \n{\n        /*\n        some code\n        */\n\n}\n\n@property (retain, nonatomic) IBOutlet UITextView *messageTextView;\n</code></pre>\n\n<p>And i also \"nil\" messageTextView in viewDidUnload.</p>\n\n<p>I don't know exactly what's wrong, because it works fine when i run it, it only fails during the test.</p>\n\n<p>Any help is very much appreciated!</p>\n\n<p>Sincerely,</p>\n\n<p>Zoli </p>\n"},{"tags":["c#","unit-testing"],"answer_count":8,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":464,"score":6,"question_id":2284279,"title":"How to test logic which is dependent on current date","body":"<p>I have this method which is dependent on current date. It checks if today is Sun, Mon, Tue or Wed, then it gives 5 days of lead time for arrival of shipped items. If its Thur, Fri or Sat then it gives 6 days of lead time to account for the weekend. </p>\n\n<pre><code>private DateTime GetEstimatedArrivalDate()\n{\n    DateTime estimatedDate; \n    if (DateTime.Now.DayOfWeek &gt;= DayOfWeek.Thursday)\n    {\n        estimatedDate = DateTime.Now.Date.AddDays(6);\n    }\n    else\n    {\n        estimatedDate = DateTime.Now.Date.AddDays(5);\n    }\n    return estimatedDate; \n}\n</code></pre>\n\n<p>The actual estimation logic is more complex. I have simplified it for the purpose of this question. My question is how do I write a unit test for something like this which depends on todays date? </p>\n"},{"tags":["c#","asp.net-mvc","visual-studio","unit-testing","xunit.net"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":593,"score":1,"question_id":4121016,"title":"Adding xUnit.NET ASP.NET MVC unit tests to an existing project/solution","body":"<p>I downloaded xUnit.NET today, along with TestDriven.NET, and installed the ASP.NET MVC unit test templates. I have an existing ASP.NET MVC solution that I want to add an xUnit unit test project to, but it seems that the only way to create such a project is with the \"Create Unit Tests?\" dialog that appears when you first create an ASP.NET MVC project.</p>\n\n<p><strong>Is it possible to add xUnit tests to an existing ASP.NET MVC project/solution?</strong></p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing","moq","html-helper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":171,"score":0,"question_id":12401749,"title":"How to unit test my HtmlHelper extension method if I get an exception at System.Web.UI.Util while testing?","body":"<p>Well... the problem is more complex, then the question title says. First of all, I have an extension method for HtmlHelper, which generates html link with parameters, based on current route parameters. Namely, if I am on page <code>.../page?param1=val1&amp;param2=val2</code>, when I call my method <code>ActionQuryLink</code> to generate link for example <code>@Html.ActionQuryLink(\"link text\", \"action\", new { param3 = \"value3\" })</code> I will get a link to <code>&lt;a href=\".../page?param1=val1&amp;param2=val2&amp;param3=value3\"&gt;link text&lt;/a&gt;</code>. Well, the extension class itself is:</p>\n\n<pre><code>public static class ActionLinkHelper\n    {\n        public static MvcHtmlString ActionQueryLink(this HtmlHelper htmlHelper, string linkText, string action)\n        {\n            return (ActionQueryLink(htmlHelper, linkText, action, null, null));\n        }\n        public static MvcHtmlString ActionQueryLink(this HtmlHelper htmlHelper, string linkText, string action, object routeValues)\n        {\n\n            /*line 16*/return (ActionQueryLink(htmlHelper, linkText, action, routeValues, null));\n        }\n\n        public static MvcHtmlString ActionQueryLink(this HtmlHelper htmlHelper, string linkText, string action, object routeValues, IDictionary&lt;string, object&gt; htmlAttributes)\n        {\n            var queryString = htmlHelper.ViewContext.HttpContext.Request.QueryString;\n\n            var newRoute = routeValues == null\n                ? htmlHelper.ViewContext.RouteData.Values\n                : new RouteValueDictionary(routeValues);\n\n            foreach(string key in queryString.Keys)\n            {\n                if(!newRoute.ContainsKey(key))\n                    newRoute.Add(key, queryString[key]);\n            }\n            /*line 32*/string generatedLink = HtmlHelper.GenerateLink(\n                htmlHelper.ViewContext.RequestContext,\n                htmlHelper.RouteCollection,\n                linkText,\n                null,\n                action,\n                null,\n                newRoute,\n                htmlAttributes);\n\n            return new MvcHtmlString(generatedLink);\n        }\n    }\n</code></pre>\n\n<p><strong>The main problem is to test  this extension method</strong></p>\n\n<p>my unit test looks like:</p>\n\n<pre><code>[TestClass]\n    public class ActionLinkHeplerTests\n    {\n        #region ActionQueryLink\n        [TestMethod]\n        public void ActionLinkHeplerShouldGenerateCorrectActionLink()\n        {\n            var mockHttpContext = new Mock&lt;HttpContextBase&gt;();\n            mockHttpContext.Setup(c =&gt; c.Request.QueryString).Returns(new NameValueCollection { { \"param1\", \"value1\" } });\n            mockHttpContext.Setup(c =&gt; c.Request.AppRelativeCurrentExecutionFilePath).Returns(\"~/\");\n            mockHttpContext.Setup(c =&gt; c.Request.ApplicationPath).Returns(\"~/\");\n            mockHttpContext.Setup(c =&gt; c.Request.CurrentExecutionFilePath).Returns(\"~/\");\n\n            var mockProductRepository = new Mock&lt;IProductRepository&gt;();\n            mockProductRepository.Setup(p =&gt; p.GetCategory(It.IsAny&lt;string&gt;())).Returns(new Category());\n            var mockSettings = new Mock&lt;ISettings&gt;();\n            var categoryController = new CategoryController(mockProductRepository.Object, mockSettings.Object);\n\n            var mockViewDataContainer = new Mock&lt;IViewDataContainer&gt;();\n            mockViewDataContainer.Setup(e =&gt; e.ViewData).Returns(new ViewDataDictionary { { \"action\", \"action\" } });\n\n            var viewContext = new ViewContext\n                                  {\n                                      HttpContext = categoryController.HttpContext,\n                                      RequestContext = new RequestContext\n                                                           {\n                                                               HttpContext = mockHttpContext.Object,\n                                                               RouteData = new RouteData()\n                                                           }\n                                  };\n\n            var mockRouteHandler = new Mock&lt;IRouteHandler&gt;();\n            var helper = new HtmlHelper(viewContext, mockViewDataContainer.Object, new RouteCollection { { \"action\", new Route(\"controller/action\", mockRouteHandler.Object) } });\n\n            var expected = new MvcHtmlString(\"\");\n            /*line 51*/var actual = helper.ActionQueryLink(\"link text\", \"action\", new {view = \"list\"});\n\n            Assert.AreEqual(expected, actual);\n        }\n        #endregion\n    }\n</code></pre>\n\n<p>And I get such exception: </p>\n\n<pre><code>Test method TestSite.UnitTests.Helpers.ActionLinkHeplerTests.ActionLinkHeplerShouldGenerateCorrectActionLink threw exception: \nSystem.NullReferenceException: Object reference not set to an instance of an object.\n</code></pre>\n\n<p>and stack trace:</p>\n\n<pre><code>at System.Web.UI.Util.GetUrlWithApplicationPath(HttpContextBase context, String url)\n   at System.Web.Routing.RouteCollection.NormalizeVirtualPath(RequestContext requestContext, String virtualPath)\n   at System.Web.Routing.RouteCollection.GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)\n   at System.Web.Mvc.RouteCollectionExtensions.GetVirtualPathForArea(RouteCollection routes, RequestContext requestContext, String name, RouteValueDictionary values, ref Boolean usingAreas)\n   at System.Web.Mvc.UrlHelper.GenerateUrl(String routeName, String actionName, String controllerName, RouteValueDictionary routeValues, RouteCollection routeCollection, RequestContext requestContext, Boolean includeImplicitMvcValues)\n   at System.Web.Mvc.UrlHelper.GenerateUrl(String routeName, String actionName, String controllerName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues, RouteCollection routeCollection, RequestContext requestContext, Boolean includeImplicitMvcValues)\n   at System.Web.Mvc.HtmlHelper.GenerateLinkInternal(RequestContext requestContext, RouteCollection routeCollection, String linkText, String routeName, String actionName, String controllerName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues, IDictionary`2 htmlAttributes, Boolean includeImplicitMvcValues)\n   at System.Web.Mvc.HtmlHelper.GenerateLink(RequestContext requestContext, RouteCollection routeCollection, String linkText, String routeName, String actionName, String controllerName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues, IDictionary`2 htmlAttributes)\n   at System.Web.Mvc.HtmlHelper.GenerateLink(RequestContext requestContext, RouteCollection routeCollection, String linkText, String routeName, String actionName, String controllerName, RouteValueDictionary routeValues, IDictionary`2 htmlAttributes)\n   at Core.Helpers.ActionLinkHelper.ActionQueryLink(HtmlHelper htmlHelper, String linkText, String action, Object routeValues, IDictionary`2 htmlAttributes) in ActionLinkHelper.cs: line 32\n   at Core.Helpers.ActionLinkHelper.ActionQueryLink(HtmlHelper htmlHelper, String linkText, String action, Object routeValues) in ActionLinkHelper.cs: line 16\n   at TestSite.UnitTests.Helpers.ActionLinkHeplerTests.ActionLinkHeplerShouldGenerateCorrectActionLink() in ActionLinkHeplerTests.cs: line 51\n</code></pre>\n\n<p><strong>Well, I'm really sorry for such batch of code.</strong>\nBut I'm working on this problem about 3 days. As You can see error occurs even not in some MVC library but at <code>System.Web.UI.Util</code>. Even if I could find <code>System.Web.UI.Util</code> sources and add it to my solution as one more project, I couldn't force MVC framework to use this project instead of <code>System.Web.UI.Util</code> from global assembly cash. To be honest it is even very difficult to replace MVC from GAC to MVC's sources project in my solution because it is very complex, there a lot of dependencies, and when I tried to do that I got a lot of errors, and most of them was of external libraries which already use MVC assembly from global assembly cash. Also the most important thing is, that my helper method works fine in my project, it calls exceptions only while testing. So my suggestion is that testing conditions for helper are not full or probably wrong. Summary, <em>my question is how can I mock correct conditions for my html helper extension method using Moq, or, maybe, is there some other problem?</em></p>\n"},{"tags":["java","unit-testing","mocking","powermock"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":476,"score":0,"question_id":7549712,"title":"Power Mock - Assertion error when mocking final class","body":"<p>I was trying to mock certain scenarios using Power Mock. </p>\n\n<p>I am getting assertion error on below test method - <code>returnSevenTest()</code>. </p>\n\n<p><strong>Class to be Tested</strong></p>\n\n<pre><code>package tutorial.one;\n\n    public class TutorialOne {\n\n    //fields \n\n    private int number;\n\n    private String name;\n\n    private final DependentFinalClass finalObj;\n\n\n    public TutorialOne (DependentFinalClass dep) {\n        this.finalObj= dep ; \n    }\n\n    public TutorialOne(int number, String name) {\n        super();\n        this.number = number;\n        this.name = name;\n        finalObj = new DependentFinalClass();\n    }\n\n    public static int returnTwo()\n    {       \n    return 2;   \n    }\n\n    public int returnThree()\n    {\n        return (returnTwo()+1);\n    }\n\n\n    public final int returnFour()\n    {   \n        return (returnThree()+1);\n    }\n\n    private final int returnFive(int addOne)\n    {   \n        return (returnFour()+addOne);\n    }\n\n    public int returnSix(int addOne)\n    {\n        return (returnFive(1)+addOne);\n    }\n\n    public int returnSeven()\n    {\n        final int addValue= finalObj.callMeToAddOne(true);\n        return (returnSix(1)+ addValue);\n    }\n}\n</code></pre>\n\n<p><strong>Final Class</strong></p>\n\n<pre><code>package tutorial.one;\n\npublic final class DependentFinalClass {\n\n    final int callMeToAddOne(Boolean need)\n    {\n        if(need.equals(true))\n            return 1;\n    else\n            return 1;\n    }\n}\n</code></pre>\n\n<p><strong>Test performing Class using Power Mock+ Easy Mock</strong></p>\n\n<pre><code>package tutorial.one;\n\nimport  stmts ....\n\n\n@RunWith(PowerMockRunner.class)\n\n//We prepare the IdGenerator for test because the static method is normally not\n//mockable\n@PrepareForTest({TutorialOne.class, DependentFinalClass.class}) public class TutorialOneTests {\n\n    @Test\n    public void returnSevenTest()  throws Exception \n    {\n        int expected=7;\n        TutorialOne privateTest =createPartialMock(TutorialOne.class,\"returnFive\" );\n\n        DependentFinalClass finalDependentTest = createPartialMock(DependentFinalClass.class,\"callMeToAddOne\" );\n        expect(finalDependentTest.callMeToAddOne(true)).andReturn(1);\n\n\n        expectNew(TutorialOne.class, finalDependentTest).andReturn(privateTest);\n        expectPrivate(privateTest, \"returnFive\", 1).andReturn(5);\n\n\n        replayAll(TutorialOne.class,finalDependentTest,privateTest);\n        int actual = privateTest.returnSeven();\n        verifyAll();\n        assertEquals(\"Expected and actual did not match\", expected, actual);\n        resetAll();\n   }\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Error Recieved:</strong></p>\n\n<p><code>java.lang.AssertionError: \n  Expectation failure on verify:\n    tutorial.one.TutorialOne(tutorial.one.DependentFinalClass$$EnhancerByCGLIB$$fa2e41a0@5a9de6): expected: 1, actual: 0\n    at org.powermock.api.easymock.internal.invocationcontrol.NewInvocationControlAssertionError.throwAssertionErrorForNewSubstitutionFailure(NewInvocationControlAssertionError.java:20)\n    at org.powermock.api.easymock.PowerMock.verifyClass(PowerMock.java:2279)\n    at org.powermock.api.easymock.PowerMock.verify(PowerMock.java:1646)\n    at org.powermock.api.easymock.PowerMock.verifyAll(PowerMock.java:1586)\n    at tutorial.one.TutorialOneTests.returnSevenTest(TutorialOneTests.java:174)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)</code></p>\n\n<p>Any help is well appreciated!! Thanks</p>\n"},{"tags":["spring","unit-testing","application-lifecycle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":11841334,"title":"Spring startup listener which works in junit","body":"<p>Hi i have an web application unsing spring and hibernate.\nI'm looking for a possiblity to call some startup functions which are executed when running tests, too.</p>\n\n<p>I uste the AbstractTransactionalJUnit4SpringContextTests class and tried the following interfaces</p>\n\n<ul>\n<li>ApplicationListener  </li>\n<li>Lifecycle  </li>\n<li>ServletContextListener</li>\n</ul>\n\n<p>but none of them is called under junit.</p>\n\n<p>Any tips (hibernate-database-acces should be available at this time)? </p>\n"},{"tags":["java","unit-testing","junit","junit4"],"answer_count":1,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":92,"score":7,"question_id":12404650,"title":"Assert an object is a specific type","body":"<p>Is it possible in junit to assert an object is an instance of a class? For various reasons I have an object in my test that I want to check the type of. Is it a type of Object1 or a type of Object2?</p>\n\n<p>Currently I have</p>\n\n<pre><code>assertTrue(myObject instanceof Object1);\nassertTrue(myObject instanceof Object2);\n</code></pre>\n\n<p>This works but I was wondering if there is a more expressive way of doing this.</p>\n\n<p>For example something like</p>\n\n<pre><code>assertObjectIsClass(myObject, Object1);\n</code></pre>\n\n<p>I could do this</p>\n\n<pre><code>assertEquals(myObject.class, Object1.getClass());\n</code></pre>\n\n<p>Sometimes I think junit could be more expressive. I think assertEquals should really be asssertExpectedEqualsActual(...) although I can see argurments both ways for shorter method names.</p>\n\n<p>My question really is:</p>\n\n<p>Is there a specific assert method that allows me to test a type of an object.</p>\n\n<p>Thanks</p>\n"},{"tags":["ios","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":12404016,"title":"iOS application unit test criterias","body":"<p>I'm writing my fist unit test in iOS and i want to do an application test (test the UI only, not the logic) and i would like to collect all the criterias that needs to be tested for a ui.</p>\n\n<p>Here are the things i read that should be tested:</p>\n\n<ul>\n<li>create UIViewController and assert it's not nil</li>\n<li>reload UIViewController and assert it's not nil</li>\n<li>test all the subviews and assert they're not nil</li>\n<li>test all the button actions</li>\n</ul>\n\n<p>Anything else? Or are any of the mentioned above unnecessary? </p>\n\n<p>Any help is very much appreciated. Maybe at the end i'll write a post where i collect every criteria.</p>\n\n<p>Sincerely, Zoli</p>\n"},{"tags":["ios","unit-testing","ocmock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12401233,"title":"mockForClass or partialMockForObject or niceMockForClass","body":"<p>When should we use  one out of these functions, while Unit Testing? </p>\n\n<pre><code>+ (id)mockForClass:(Class)aClass;\n+ (id)partialMockForObject:(NSObject *)anObject;\n+ (id)niceMockForClass:(Class)aClass;\n</code></pre>\n"},{"tags":["unit-testing","java-ee","testing","selenium","junit"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":967,"score":2,"question_id":10577254,"title":"First steps with Selenium and jUnit - any good tutorials?","body":"<p>Anyone knows a good tutorial for a beginner in <code>Selenium</code> and <code>jUnit</code> ?<br>\nI already have a background in <code>unit testing</code> and <code>acceptance testing</code> (<strong>RSpec</strong> and <strong>Capybara</strong> on <strong>Rails 3</strong>), and now I'm starting this new project with <strong>JavaEE</strong> and I'm looking for a quick start with both of this technologies.<br>\nThanks.</p>\n"},{"tags":["objective-c","unit-testing","ios5","xcode4","runtime"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12381740,"title":"XCode 4 Unit Test: Test a Game on Runtime","body":"<p>Is it possible to do a unit-test during runtime? And how to do it? I've already done research and all I can do is doing logical tests.</p>\n\n<p>There are events where UIs will popup, do this and that. I want to test features that needs to do that, poping UI and such. So I want it to be simulated and be tested if it will pass.</p>\n\n<p>Any solution?</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","unit-testing"],"answer_count":10,"favorite_count":40,"up_vote_count":89,"down_vote_count":0,"view_count":11986,"score":89,"question_id":842,"title":"Best way to implement unit testing in PHP","body":"<p>I'd really like to start implementing Unit Testing in my projects.  I don't know how viable this is to do in PHP.  If anyone has done this, how was it implemented?  Did it increase productivity?</p>\n"},{"tags":["c++","unit-testing","constructor","factory"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12401057,"title":"Object creation in constructor","body":"<p>I somehow read that it is bad style to do object-creation in a constructor ... however, I forgot why it was considered to be bad style (especially when using dependency injection).</p>\n\n<p>Here an example of object-creation in the constructor as pseudo-code:</p>\n\n<pre><code>Myclass\n{\n    Myclass(MyMemberFactory&amp; fac)\n    {\n        for(Some criteria)\n            push_back(fac.createMyMemberType());\n    }\n\n    vector&lt;MyMemberType*&gt; getMyMember();\n    {\n        return myMember_;\n    }\n    ...\n\nprivate:\n    vector&lt;MyMemberType*&gt; myMember_;\n}\n</code></pre>\n\n<p>So you can use unit-testing without problems, because you can mock-away the MyMemberFactory.\nIf I would move the for-loop in an seperated initialize-method, it would be necesarry to check for double-initialisation, and all getters would need first to ckeck, if initialisation already was done. Here the code, by using a seperate initialisation:</p>\n\n<pre><code>Myclass\n{\n    Myclass() : isInitialized_(false)\n    {\n\n    }\n\n    void initialize(MyMemberFactory&amp; fac);\n    {\n        if(isInitialized_)\n            throw \"Error: Double-Init is not permitted.\";\n\n        for(Some criteria)\n            push_back(fac.createMyMemberType());\n\n        isInitialized_ =true;\n    }\n\n    vector&lt;MyMemberType*&gt; getMyMember();\n    {\n        if(isInitialized_)\n            throw \"Initialize first!\";\n\n        return myMember_;\n    }\n    ...\n\nprivate:\n    vector&lt;MyMemberType*&gt; myMember_;\n    bool isInitialized_;\n}\n</code></pre>\n\n<p>So do know any reason, why I should use the second approach over the first approach? Or maybe I just had something wrong in mind, and the first approach is perfectly ok?</p>\n"},{"tags":["unit-testing","scala","hadoop","hbase","sbt"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12308980,"title":"How can I get HBaseTestingUtility to find classes in map reduce jobs?","body":"<p>We're using cdh3u4, Hadoop and HBase. I'm trying to run a unit test that kicks off a MapReduce job after starting up the miniMapReduceCluster provided by the HBaseTestingUtility.</p>\n\n<p>The jobs fail with this in the map and reducer task stderr logs:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/hadoop/mapred/Child\nCaused by: java.lang.ClassNotFoundException: org.apache.hadoop.mapred.Child\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)\n Could not find the main class: org.apache.hadoop.mapred.Child.  Program will exit.\njava.lang.Throwable: Child Error\n</code></pre>\n\n<p>I've been trying to figure this out for days. I'm guessing its a mis - Configuration and that the cluster is not finding any of my jars due to misconfigured fs / hdfs config values.\nMy test setup code looks like this (excuse typos as this is translation from Scala):</p>\n\n<pre><code>HBaseTestingUtility htest = new HBaseTestingUtility();\nConfiguration c = htest.getConfiguration();\nc.set(\"hadoop.log.dir\", \"/tmp/hadoop-test-logs\"); // required or else can't start the miniMapReduceCluster\nhtest.startMiniCluster();\nhtest.startMiniMapReduceCluster();\n\n// create and run a MapReduce job that works in production but not in test\n</code></pre>\n\n<p>In case this is important, we are using Play! framework 2.0 (which uses SBT) with Specs2 testing framework and Scala. I don't think it should matter (that we aren't using Java + JUnit).</p>\n\n<p>Has anyone seen this before? Any pointers on where to look? </p>\n\n<p>Thanks in advance, </p>\n\n<p>Mark</p>\n"},{"tags":["unit-testing","data","data-integrity"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":40,"score":0,"question_id":12367673,"title":"What unit-testing framework can I use for testing quality of data in database","body":"<p>I am having a Database using which we show reports that is group by applying count etc.\nI just need to have the best unit test framework in place which can help me out in quering the database automatically and verifying the result.</p>\n"},{"tags":["unit-testing","visual-studio-2012","xunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":153,"score":1,"question_id":12082238,"title":"Mixed Mode Assembly with Xunit Test runner extension for Visual Studio 2012","body":"<p>I am unable to get the Xunit test runner extension for Visual Studio 2012 RTM to load my x64 Mixed Mode Assembly.  </p>\n\n<p>The error is: System.IO.FileLoadException: Mixed mode assembly is build against version 'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information.</p>\n\n<p>A similar question is here: <a href=\"http://stackoverflow.com/questions/11970686/visual-studio-2012-test-project-mixed-mode-runtime-net-2-0\">Visual Studio 2012 Test Project Mixed Mode Runtime .NET 2.0</a></p>\n\n<p>I have added the following line to all .config files in this folder: C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow</p>\n\n<pre><code>&lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;\n    &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.5\"/&gt;\n&lt;/startup&gt;\n</code></pre>\n\n<p>I even added it to this folder: C:\\Users\\Alex\\AppData\\Local\\Microsoft\\VisualStudio\\11.0\\Extensions\\zuclypws.1z3 that contains xunit.runner.visualstudio.dll.. I named it xunit.runner.visualstudio.dll.config</p>\n\n<p>Does anyone know how to get this working?  I wish this wasn't so unnecessarily complicated.</p>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":52,"score":1,"question_id":12399004,"title":"Junit | How to test parameters in a method","body":"<p>How do I test parameters inside a method itself. For example </p>\n\n<pre><code>class TestClass {\n\npublic void paraMethod(String para1, String para2) {\n         String testPara1 = para1;\n         String testPara2 = para2; \n}\n}\n\nclass TestingClass {\n\n   @Test\n   public void testParaMethod () throws Exception {\n             String myPara1 = \"MyPara1\"; \n             String myPara2 = \"MyPara2\";\n\n             new TestClass().paraMethod(myPara1, myPara2);\n\n   }\n}\n</code></pre>\n\n<p>Ok, so is it possible to test if the <code>testPara1</code> and <code>testPara2</code> are properly set to the values that I have passed?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","eclipse","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":70,"score":3,"question_id":12397464,"title":"why java code coverage still show yellow color when enable assertions","body":"<p><img src=\"http://i.stack.imgur.com/PgHe7.jpg\" alt=\"enter image description here\"></p>\n\n<p>I run code coverage for the code in eclipse by setting the jvm paramter : -ea,  but the statements still show yellow color. and test2 show red, why?</p>\n\n<p>what's more,  when I use -ea, if the system assertions(-esa) be enable? It seems that when I use -esa, -ea can't work.</p>\n"},{"tags":["c#","unit-testing","testing","functional-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":88,"score":3,"question_id":12394920,"title":"How to test APIs","body":"<p>I've started unit testing and I'm trying to perform unit tests on an API wrapper I built for a WSDL Resource I'm using.</p>\n\n<p>I can unit test my classes just fine, but what are the best practices for testing the external API? Should I ever bother testing it? Aside from the tests I to verify connection and parameters and stuff, what are the best methods for making sure my data got properly updated(if I should even be doing that)?</p>\n"},{"tags":["objective-c","unit-testing","mocking","tdd"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12395933,"title":"How to mock class methods in objective c to use with TDD","body":"<p>I am using a third party framework to send data to a server. I am mocking that third party framework to isolate and test how my code interacts with it. This is to avoid to avoid waiting to get back data from the network while unit testing, and because I want to test the error handling code that I've written.</p>\n\n<p>I am not using OCMock or anything like it, I am writing my own mock object by subclassing the 3rd party framework.</p>\n\n<p>My method looks like this-</p>\n\n<pre><code>- (void)loginWithCredentials:(NSDictionary *)credentials\n{\n    NSDictionary *credentials = [self credentials];\n    NSString *username = [credentials objectForKey:kUserCredintialUsername];\n    NSString *password = [credentials objectForKey:kUserCredintialPassword];\n\n    [ThirdPartyClass loginWithUsername:username \n                           andPassword:password \n                                 block:^(ThirdPartyClass *user, NSError *error){\n    if (user) {\n        NSLog(@\"We logged in\");\n    }\n    else if (error) {\n        NSLog(@\"%@\", [error errorString]);\n    }\n}];\n}\n</code></pre>\n\n<p>What I'd like to do is to is to call <code>loginWithUsername:andPassword:block:</code> on my mock in my unit tests. The current method is, obviously, untestable because it doesn't follow \"tell, don't ask\" (I'm not telling <code>loginWithCredentials:</code> which class to call <code>loginWithUser...block:</code> on). The only way that I can think to solve this is to add a class variable to my instance or class or add an argument to <code>loginWithCredentials:</code> so I can substitute my mock in. The production code doesn't gain any clarity by doing so - it is already being written as an adapter to the 3rd party library. Instead, I would prefer to try to refactor the <code>loginWithCredentials:</code> method.</p>\n"},{"tags":["php","unit-testing","zend-framework","netbeans","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":212,"score":0,"question_id":7533304,"title":"Reports PHPUnit ZendFramework","body":"<p>I'm running phpunit tests with zendframework using netbeans but the reports are not being generated. The folder was created however no reports.</p>\n\n<p>My directoty struture:</p>\n\n<pre><code>-application\n--models\n--modules\n-library\n-log\n--report\n-bootstrap.php\n-phpunit.xml\n</code></pre>\n\n<p>phpunit.xml</p>\n\n<pre><code>&lt;phpunit bootstrap=\"./bootstrap.php\"&gt;\n&lt;testsuite name=\"Application Test Suite\"&gt;\n    &lt;directory&gt;./application&lt;/directory&gt;\n&lt;/testsuite&gt;\n&lt;testsuite name=\"Library Test Suite\"&gt;\n    &lt;directory&gt;./library&lt;/directory&gt;\n&lt;/testsuite&gt;\n\n&lt;filter&gt;\n    &lt;!-- If Zend Framework is inside your project's library, uncomment this filter --&gt;\n    &lt;!-- \n    &lt;whitelist&gt;\n        &lt;directory suffix=\".php\"&gt;../../library/Zend&lt;/directory&gt;\n    &lt;/whitelist&gt;\n    --&gt;\n&lt;/filter&gt;\n\n&lt;logging&gt;\n    &lt;log type=\"coverage-html\" target=\"./log/report\" charset=\"UTF-8\" yui=\"true\" highlight = \"true\" lowUpperBound=\"50\" highLowerBound=\"80\" /&gt;\n    &lt;log type=\"testdox\" target=\"./log/testdox.html\" /&gt;\n&lt;/logging&gt;\n</code></pre>\n\n<p></p>\n\n<p>The tests are running correctly but How should I configure my phpunit.xml to generate the reports?</p>\n\n<p>My PHPUnit version is 3.5.15</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":11136588,"title":"How to run unit tests without creating the test database again","body":"<p>I need to create a testing environment to test my Rails app, but my current application is a little different than a normal Rails application database.</p>\n\n<p>My current app has:</p>\n\n<ol>\n<li>Legacy database(s) - So the tables are stuff is not as rails convention.</li>\n<li>No migrations.</li>\n<li>My application connects to two databases at the same time.</li>\n</ol>\n\n<p>So when I try to run the app in the test environment, it doesn't know how to create two databases. (In my test environment also I specified two databases.)</p>\n\n<p>I think I should be able to solve this issue by telling rails <em>NOT</em> to create the test database, but I don't know how to do this in Rails testing command.</p>\n\n<p>Can someone help me with how to run tests without creating the test database?</p>\n"},{"tags":["unit-testing","testing","language-agnostic","constants"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":72,"score":4,"question_id":12356070,"title":"Should a unit test rely on constants defined by the application?","body":"<p>Consider the following pseudocode. It is designed to determine whether a grade is a passing grade.</p>\n\n<pre><code>class Student:\n    int grade\n\n    boolean IsStudentPassing():\n        return grade &gt;= MIN_PASSING_GRADE\n\n\n...\n\n// In another file\nconstant int MIN_PASSING_GRADE = 70\n</code></pre>\n\n<p>If we were writing a unit test for <code>IsStudentPassing</code>, we could use the constant value:</p>\n\n<pre><code>ensure that IsStudentPassing is false when grade is MIN_PASSING_GRADE - 1\nensure that IsStudentPassing is true when grade is MIN_PASSING_GRADE\n</code></pre>\n\n<p>Or, we could hand-pick the values:</p>\n\n<pre><code>ensure that IsStudentPassing is false when grade is 69\nensure that IsStudentPassing is true when grade is 70\n</code></pre>\n\n<p>For the second approach, our test must be re-written if <code>MIN_PASSING_GRADE</code> changes. The first approach is more flexible, but relies on <code>MIN_PASSING_GRADE</code> having a correct value.</p>\n\n<p>I'm not entirely sure which approach to prefer, and general choose on a case-by-case basis. On the one hand, ensuring that <code>MIN_PASSING_GRADE</code> is sane should be taken care of by a different test. On the other hand, I worry about a supposedly \"unit\" test touching too many other places in the code base.</p>\n\n<p>This is a contrived example, but similar situations occur often in real programs. What is the best approach to address them?</p>\n"},{"tags":["c#","unit-testing","sql-server-2005"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":97,"score":3,"question_id":12177818,"title":"Avoid restore stuck when restoring SQL server under unittesting","body":"<p>I am currently building unit tests that tests if some classes are editing a sql server 2005 database correctly. To do this I have created a small subset of data from our production and are storing it as a backup file. Whenever a unit test needs to be sure it has a clean database state it calls a restore routine that basically call the following sql:</p>\n\n<pre><code>RESTORE DATABASE database FROM DISK = 'c:\\test\\backup.bak' WITH REPLACE, NORECOVERY\n</code></pre>\n\n<p>This normally works, and has decent speed. When I say normally it's because sometimes the database gets stuck in 'restore' mode result in error messages that looks like this (assuming it's a Alter command):</p>\n\n<pre><code>ALTER DATABASE is not permitted while a database is in the Restoring state.\n</code></pre>\n\n<p>This means that if the first fail, every test fails. I can get the database out of it stuck state, but it's rather irritating to do it every single time, it's very time consuming and the whole point of unit testing was so I didn't need anything when I activate the test.</p>\n\n<p>I tried to see if I could avoid it by the RESTORE syntax, but can't kind any options or flags that sound like it could resolve the issue. </p>\n\n<p>Is there any other method I could use that is a lot safer that the RESTORE command?</p>\n\n<p><strong>Update:</strong>\nI discovered that the restore fail happens mostly when a connection was still active. I usually handled that issue with the following structure:</p>\n\n<pre><code>ALTER DATABASE MyDatabase SET Single_User WITH Rollback Immediate\n\n-- Restore logic here\n\nALTER DATABASE MyDatabase SET Multi_User\n</code></pre>\n\n<p>The problem with this is that it only limits all the connections to one. Sometimes one of the connections that is forced to close jumps over to the only one free, disrupting the restore and making it fail (or that is what I can gather from the documents and pages I have been reading).</p>\n\n<p>I am instead trying to do the following SQL command before I start on my restore logic:</p>\n\n<pre><code>Declare @spid int\nSelect @spid = min(spid) from master.dbo.sysprocesses\nwhere dbid = db_id('Mydatabase')\nWhile @spid Is Not Null\nBegin\n        Execute ('Kill ' + @spid)\n        Select @spid = min(spid) from master.dbo.sysprocesses\n        where dbid = db_id('Mydatabase') and spid &gt; @spid\nEnd\n\n-- Do Restore Logic\n</code></pre>\n\n<p><a href=\"http://geekswithblogs.net/AngelEyes/archive/2010/02/24/kill-connections-to-resote-db---sql-server.aspx\" rel=\"nofollow\">http://geekswithblogs.net/AngelEyes/archive/2010/02/24/kill-connections-to-resote-db---sql-server.aspx</a></p>\n\n<p>This section of code goes in and actively closes all connections, which gives the restore logic room to execute. I am, however, not entirely sure that this is the best way to go, simply because it does not prevent connections to reestablish, potentially disrupting the restore process again. But so far I haven't seen evidence that this has happened yet.</p>\n"},{"tags":["python","unit-testing"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":718,"score":4,"question_id":2490715,"title":"Unit testing in python?","body":"<p>Hey - I'm new to python , and I'm having a hard time grasping the concept of Unit testing in python.</p>\n\n<p>I'm coming from Java - so unit testing makes sense because - well , there you actually have a unit - A Class. But a Python class is not necessarily the same as a Java class , and the way I use Python - as a scripting language - is more functional then OOP - So what do you \"unit test\" in Python ? A flow? </p>\n\n<p>Thanks!</p>\n"},{"tags":["javascript","unit-testing","user-interface","extjs"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":997,"score":4,"question_id":3740946,"title":"How to unit test ExtJS or similar JavaScript based interfaces?","body":"<p>I am using PHPUnit to test my PHP source code, but I need a way to test client-side code, too. I use ExtJS to build rather complex interfaces that call the server for data. I am wondering here is how does one test the UI?</p>\n"},{"tags":["unit-testing","extjs","selenium","web-testing"],"answer_count":12,"favorite_count":47,"up_vote_count":45,"down_vote_count":0,"view_count":28528,"score":45,"question_id":107314,"title":"Any suggestions for testing extjs code in a browser, preferably with selenium?","body":"<p>We've been using selenium with great success to handle high-level website testing (in addition to extensive python doctests at a module level).  However now we're using extjs for a lot of pages and its proving difficult to incorporate Selenium tests for the complex components like grids. </p>\n\n<p>Has anyone had success writing automated tests for extjs-based web pages?  Lots of googling finds people with similar problems, but few answers.  Thanks!</p>\n"},{"tags":["c++","unit-testing","cmake","build-automation","googletest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12388062,"title":"Selectively building gtest tests with cmake and showing gtest output","body":"<p>I've got cmake working with a test file similar to \" <a href=\"http://stackoverflow.com/questions/8507723/how-to-start-working-with-gtest-and-cmake\">How to start working with GTest and CMake</a> \" but the problem is that gtest and the test binary gets built each time I make rather than just when I run make test. And when running make test, only the ctest summary output is shown, not the actual gtest output.\nHow can I change this behaviour so that the tests and gtest library is only built when I run make test, and running make test actually shows the proper output?</p>\n"},{"tags":["unit-testing","testing","groovy","junit","spock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12370442,"title":"Classical unit test as Groovy Spock method","body":"<p>I have a Groovy Spock method that has the following pattern:</p>\n\n<pre><code>def \"My test\"() {\n  def a = createA();\n  assert a.fieldLevel1.isValid()\n  def b = a.fieldLevel1\n  assert b.fieldLevel2.isValid()\n  def c = b.fieldLevel2\n  assert c.fieldLevel3.isValid()\n  ...\n}\n</code></pre>\n\n<p>As you can see it's hard to break it on blocks as assertions and variables definitions are mixed together. What would be the \"spock\" approach to write such kind of test?</p>\n\n<p>UPDATE:</p>\n\n<p>The test has the following structure because <code>c.fieldLevel3.isValid()</code> is actually <code>c.fieldLevel3 instanceof A</code>, so I can't proceed if the field is invalid.</p>\n"},{"tags":["spring","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12385042,"title":"Mocking AOP method implementation for unit tests","body":"<p>I've a java application which has multiple modules - (GWT-)RPC services, <code>perf-library</code>, <code>remote-client</code> (All java code written/owned by my team). The <code>perf-library</code> contains Spring AOP aspects related code and it's primarily used to push intercepted method logs to a data store. Now, <code>perf-library</code> is dependent on another remote-client which actually maintains a queue and handles the job of pushing logs to the data store. So, in a way, <code>perf-library</code> just delegates the task to remote-client. \nThe business logic code calls intercepted methods which have AOP logic and hence there is a dependency on remote-client. Obviously, I don't want to connect to the remote-client from within unit tests. I think I need to mock the implementation of method <code>push()</code> which connects to remote-client. What I'm unable to figure out is how to use the mock implementation for the business logic code package unit tests.</p>\n\n<p>To clarify things, I've modules like this -</p>\n\n<ul>\n<li><code>RPC service module</code> - e.g. method <code>login()</code> is intercepted.</li>\n<li><code>perf-library</code> - Has aspects (to intercept methods like <code>login()</code>) and implementation to call <code>remote-client</code></li>\n<li><code>remote-client</code> - Push data to some data-store</li>\n</ul>\n\n<p>Now, for writing the unit tests for RPC service methods, how do I get the mock implementation of <code>push()</code> as it is internal to perf-library. Let's say, I've an interface <code>LogClient</code> (having method <code>push()</code>) which is implemented by two classes (one for production and another for test). I can use this Test implementation for unit tests of perf-library itself, but how do I make the RPC unit tests use it. I'm new to Spring, so not sure if this can be done easily with Spring or anything else. Any help will be nice.</p>\n\n<p>Note: We're using Spring for maintaining beans and DI. </p>\n"},{"tags":["java","unit-testing","junit","osgi"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":12372730,"title":"OSGi unit testing and bundle exports","body":"<p>What's the best way to balance declared exports of packages from a bundle and the requirements of unit testing?</p>\n\n<p>Consider a bundle 'mybundle' for which you want to write unit tests. The bundle's source is stored in an IDE's 'project' concept. For instance:</p>\n\n<pre><code>mybundle\n  src/java\n    mybundle.package1\n      ...java\n  bnd.bnd\n</code></pre>\n\n<p>By <em>unit tests</em> I mean tests of individual POJOs, irrelevant to the wider OSGi context in which these classes may be used within a bundle. Where possible, the tests should be runnable with 'vanilla' classloading, such as by the JUnit runner in Eclipse.</p>\n\n<p>At development time, here are a few ways of packaging the unit tests:</p>\n\n<h2>Unit tests in the bundle source</h2>\n\n<p>Here, the unit tests are added to a source folder in the project:</p>\n\n<pre><code>mybundle\n  src/java\n    mybundle.package1\n      ...java\n  test/java\n    mybundle.package1.test\n      ...java\n  bnd.bnd\n</code></pre>\n\n<p>Note the appended '.test' to differentiate packages and avoid split package problems.</p>\n\n<p>Typically there will be some measure to ensure test classes don't end up in the built bundle JAR.</p>\n\n<h2>Unit tests in a separate bundle</h2>\n\n<p>Here a separate bundle is added, name suffixed with '.test' as is the general convention.</p>\n\n<pre><code>mybundle\n  src/java\n    mybundle.package1\n      ...java\nmybundle.test\n  test/java\n    mybundle.package1.test\n      ...java\n  bnd.bnd\n</code></pre>\n\n<p>The trouble with this is that because the classes are separated, and the running of unit tests may not be knowledgeable of the OSGi environment (e.g. using the Eclipse JUnit runner) you will have to decorate the runtime classpath of the JUnit runner.</p>\n\n<h2>Unit tests in a fragment</h2>\n\n<p>(Thanks @HollyCummins). Here a separate bundle fragment is created:</p>\n\n<pre><code>mybundle.fragment\n  test/java\n    mybundle.package1.test\n      ...java\n  bnd.bnd\n</code></pre>\n\n<p>The fragment declares 'mybundle' as its host, thus allowing it to share the classes in 'mybundle' without the need of the packages being exported.</p>\n\n<p>The disadvantage of this is that because fragment loading is an OSGi concept, you need to run with an OSGi container or decorate the classpath.</p>\n\n<h1>Export problems</h1>\n\n<p>The problem comes when considering how bundles perform Export-Package. <a href=\"http://wiki.osgi.org/wiki/Export_Only_APIs\" rel=\"nofollow\">It is considered good practice to export as few packages as possible</a>. And yet it seems that unit testing forces extra packages to be exported.</p>\n\n<p>This is most obvious for the second option, having a separate testing bundle. The tests in the testing bundle must Import-Package the classes under test, and the bundle under test must also Export-Package all said classes under test.</p>\n\n<p>So the obvious solution is to lean toward having unit tests in the bundle source, but problems soon crop up in non-trivial situations. You may want to share testing code, for instance you might have OSGi integration tests in a separate bundle. To share code you end up having to Export-Package the testing packages, and then of course you also end up with testing code in the built bundle!</p>\n\n<p><strong>What is the best way to organise OSGi bundles/projects for testing?</strong></p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","nlog"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12348990,"title":"No Source Available Error (Nlog Logger.cs) while debugging an own method","body":"<p>First things first: </p>\n\n<p>I'm using Visual Studio 2010 with the logger NLog in version 2.0.0.</p>\n\n<p>When i try to debug one of my methods while using my unit test project one specific error occurs:</p>\n\n<pre><code>`Locating source for 'c:\\NLogBuild\\src\\NLog\\Logger.cs'. (No checksum.)\nThe file 'c:\\NLogBuild\\src\\NLog\\Logger.cs' does not exist.\nLooking in script documents for 'c:\\NLogBuild\\src\\NLog\\Logger.cs'...\nLooking in the projects for 'c:\\NLogBuild\\src\\NLog\\Logger.cs'.\nThe file was not found in a project.\nLooking in directory 'c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\crt\\src\\'...\nLooking in directory 'c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\atlmfc\\src\\mfc\\'...\nLooking in directory 'c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\atlmfc\\src\\atl\\'...\nLooking in directory 'c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\atlmfc\\include\\'...\nThe debug source files settings for the active solution indicate that the debugger will not ask the user to find the file: c:\\NLogBuild\\src\\NLog\\Logger.cs.\nThe debugger could not locate the source file 'c:\\NLogBuild\\src\\NLog\\Logger.cs'`\n</code></pre>\n\n<p>I've tried to find this error here on stackoverflow, but the found solutions to this problem did not solved it. I have tried several things:</p>\n\n<ul>\n<li>reinstalling the logger NLog</li>\n<li>updating the references to the Nlog.dll and to the NLogExtended.dll</li>\n<li>restarting my operating system after excluding the references and deinstalling nlog</li>\n<li>Excluding the file from the project, including it again and rebuilding the project like said in this question <a href=\"http://stackoverflow.com/questions/6905012/visual-studio-2010-debugger-build-correctly-compiler-pdb-and-linker-pdb-not-in\">Link on Stackoverflow</a></li>\n</ul>\n\n<p>The error occurs not in all of my methods. I can debug into some method, but if i try to go into some other method´s, i get this error. </p>\n\n<p><strong>EDIT:</strong> When i try to get into the method <code>Check(outputPath, append)</code> the error occurs. \nI have to tuse the logger in this case and i am using the logger in some other methods, where i don't get the error.</p>\n\n<pre><code>[TestMethod()]\n   public void RunMethodCheckTest()\n   {\n       string[] cmdArgs = { };\n       WebserviceReader.RunMethodCheck(cmdArgs);\n   }\n\npublic static void RunMethodCheck(string [] cmdArgs)\n    {\n        string xmlPath = null;\n        string outputPath = null;\n        bool noRun = false;\n        bool append = false;\n\n        if (cmdArgs != null)\n        {\n            for (int i = 0; i &lt; cmdArgs.Length; i++)\n            {\n                cmdArgs[i] = cmdArgs[i].ToLowerInvariant();\n\n                if (cmdArgs[i].Equals(\"/?\"))\n                {\n                    ShowHelpText();\n                    return;\n                }\n                if (cmdArgs[i].Substring(0, 7).Equals(\"/output:\"))\n                {\n                    outputPath = cmdArgs[i].Substring(cmdArgs[i].Length - 4).Equals(\".xml\") ? cmdArgs[i].Substring(8) : cmdArgs[i].Substring(8) + \".xml\";\n                }\n                else if (cmdArgs[i].Substring(0, 7).Equals(\"/input:\"))\n                {\n                    outputPath = cmdArgs[i].Substring(cmdArgs[i].Length - 4).Equals(\".xml\") ? cmdArgs[i].Substring(8) : cmdArgs[i].Substring(8) + \".xml\";\n                }\n                else if (cmdArgs[i].Substring(0, 10).Equals(\"/changeout\"))\n                {\n                    Properties.Settings.Default.OutputDefaultFileName = cmdArgs[i].Substring(cmdArgs[i].Length - 4).Equals(\".xml\") ? cmdArgs[i].Substring(11) : cmdArgs[i].Substring(11) + \".xml\";\n                    noRun = true;\n                }\n                else if (cmdArgs[i].Substring(0, 9).Equals(\"/changein\"))\n                {\n                    Properties.Settings.Default.InputDefaultFileName = cmdArgs[i].Substring(cmdArgs[i].Length - 4).Equals(\".xml\") ? cmdArgs[i].Substring(10) : cmdArgs[i].Substring(10) + \".xml\";\n                    noRun = true;\n                }\n                else if (cmdArgs[i].Substring(0, 7).Equals(\"/append\")) { append = true; }\n\n            }\n        }\n\n        if (noRun) { return; }\n\n        if (String.IsNullOrEmpty(xmlPath))\n        {\n            xmlPath = MethodCheck.WebserviceReader.GetApplicationFolderName() + \"\\\\\" + MethodCheck.Properties.Settings.Default.InputDefaultFileName;\n        }\n        if (String.IsNullOrEmpty(outputPath))\n        {\n            outputPath = MethodCheck.WebserviceReader.GetApplicationFolderName() + @\"\\\" + MethodCheck.Properties.Settings.Default.OutputDefaultFileName;\n        }\n\n        MethodCheckType methodCheck = new MethodCheckType(xmlPath);\n\n        methodCheck.Check(outputPath,append);\n    }\n\npublic void Check(string outputPath, bool append)\n{\n    System.Diagnostics.Stopwatch watch = new System.Diagnostics.Stopwatch();\n    double time;\n    StringBuilder output = new StringBuilder();\n    String valueExecute;\n    String newLine = Environment.NewLine;\n\n    for (int i = 0; i &lt; this.WebService.Length; i++)\n    {\n        try\n        {\n            watch.Reset();\n\n            watch.Start();\n            valueExecute = this.WebService[i].Execute();\n            watch.Stop();\n\n            time = watch.ElapsedMilliseconds;\n\n            output.Append(\"Executed:\\n\" + this.WebService[i].URL + newLine + \"Time: \" + time + \" Milliseconds\");\n\n            Console.WriteLine(output.ToString());\n\n            output.Append(newLine + \"Expected:\\t\" + this.WebService[i].ReturnValue + newLine + \"Got:\");\n            output.Append(newLine + valueExecute + newLine + newLine);\n        }\n        catch (Exception ex)\n        {\n            output.Append(\"Failed Webservice:\\n\" + this.WebService[i].URL + newLine);\n\n            Console.WriteLine(output.ToString());\n\n            logger.LogException(LogLevel.Error, \"Failed Webservice:\\t\" + this.WebService[i].URL, ex);\n            continue;\n        }\n    }\n\n    MethodCheck.WebserviceReader.WriteToFile(output.ToString(),outputPath,append);\n}\n</code></pre>\n\n<p>If i don't use the logger in the method <code>Check(string, bool)</code> the error occurs, too.</p>\n"},{"tags":["android","xml","unit-testing","android-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":194,"score":0,"question_id":6547783,"title":"Storing test files in the test project","body":"<p>I wrote some tests that use XML files. I have two project one with code, the second with tests. I would like to store this XML files (they contain some data used during the tests) in the test project. But it is not possible because it seems that only files from src project are loaded to a device. Does anyone know the way to solve this problem ? </p>\n"},{"tags":["unit-testing","coffeescript"],"answer_count":3,"favorite_count":0,"up_vote_count":19,"down_vote_count":0,"view_count":5022,"score":19,"question_id":3130067,"title":"CoffeeScript unit testing?","body":"<p>I'm using CoffeeScript in a Rails application, and I would like to unit test it. Google didn't turn up anything, is there any way to do it short of writing my own testing framework or testing the JavaScript that CoffeeScript outputs? </p>\n"},{"tags":["c#","unit-testing","testing","projects-and-solutions","solutions"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12379599,"title":"C# Test Assembly","body":"<p>I am new to C# and am having a particularly difficult time figuring out how test assemblies work. This is my Solution directory (with a single project MyProject inside of it):</p>\n\n<pre><code>MySolution/MySolutionFile.sln     -- My Solution File\nMySolution/packages               -- My Packages Directory\nMySolution/MyProject/Properties   -- My Project Properties\n\nMySolution/MyProject/src                    -- My Source Code\n                    /src/MyClass1.cs\n                    /src/MyClass2.cs\n\nMySolution/MyProject/test                   -- My NUnit Tests\n                    /test/MyClass1Test.cs\n                    /test/MyClass2Test.cs\n\nMySolution/MyProject/TheMainClass.cs\n</code></pre>\n\n<p>Now I can run all the tests in the test folder from visual studio. However I want to run the tests from a CI system like TeamCity, in which case I need an assembly path. How do I generate just the test folder into an assembly to be run.</p>\n\n<p>Do I need to add to the main class a method that runs each test in the MySolution/test folder?</p>\n"},{"tags":["visual-studio","visual-studio-2010","unit-testing","debugging","vstesthost"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":855,"score":6,"question_id":6833092,"title":"ERROR: Test host process exited unexpectedly. - VS10 debugger problem","body":"<p>I have been having some problems with the test debugger in VS10. All tests are running without error, but when debugging it aborts itself when I try to read the object data. Afterwards this error is displayed in the summary: <strong>Test host process exited unexpectedly.</strong></p>\n\n<p>I'm not able to see anymore details about the error. How do I access/generate test-log files?</p>\n\n<p>OR even better... Has anyone experienced a simular problem? and found a solution...?</p>\n\n<p><strong>Additional information:</strong></p>\n\n<p>The runtime-test-data is available on objects from same libary assemblie, it's just one class I can't get access to in runtime mode. </p>\n\n<p>If I use breakpoints at:</p>\n\n<ul>\n<li>every line that affects the object: - I can see the runtime-data and the test passes</li>\n<li>only one place: - the test will abort and no data is visible</li>\n<li>no breakpoints: - the test runs and passes.</li>\n</ul>\n\n<p>The test used to work fine until reasonly. Just before the problem accoured I made some solution changes, with dividing the projects into solution folders. I didn't make any changes that should effect the code. Moving the projects back to their original placed don't solve the problem, So i'm thinking this might be a visual studio bug?</p>\n\n<p>This is what I've tried so far:</p>\n\n<p>Rebuildning and cleaning the solution.\nclosing visual studio + reboot system\ninstalled VS10 Service Pack 1\nreinstalled Visual Studio 10\ntested on VS10 Ultimate and Premium\nRemoving and regenerating solutions files\nRemoving all break points\nTraceAndTestImpact/Local.testsettings: Test Timeout > timeout and abort set to 30 minuts.\nTraceAndTestImpact/Local.testsettings: Unit Test >assemblie folders defined\nTraceAndTestImpact/Local.testsettings: Deployment > Enable deplyment - directories and files</p>\n\n<p><strong>ANY suggestions are welcome!</strong></p>\n\n<p>Thanks for your time :)</p>\n"},{"tags":["unit-testing","tfs","tfsbuild"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":713,"score":1,"question_id":9360403,"title":"Excluding tests from tfs build","body":"<p>I want to exclude some tests from my continuous integration build but I haven't found a way to do so.</p>\n\n<p>One of the things I've tried was to set up the priority of those tests to -2 and then on the build I specified Minimum Test Priority = -1 but it still run those tests.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["javascript","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12377817,"title":"How to properly unit test number conversion","body":"<p>I am trying to figure out how to properly write unit tests for number conversion to have 100% test coverage and to cover all possibilities.</p>\n\n<p>Let's say, I have a function which converts integer to roman numeral. It works from 1 to 3999:</p>\n\n<pre><code>function integerToRoman(integer) { ... }\n</code></pre>\n\n<p>How can I make sure it actually works? Writing 4000 unit tests for every number between 1 and 3999 doesn't seem like a good option. On the other hand, if I just pick some random numbers and write tests for them, then I cannot be 100% sure the function is working.</p>\n"},{"tags":["c#","unit-testing","mocking","tdd","rhino-mocks"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":1,"view_count":145,"score":4,"question_id":12359479,"title":"Rhino Mocks - Do we really need stubs?","body":"<p>If it's possible to change mock behaviour in Rhino Mocks using mock.Stub().Return(), why do we need Stubs anyway?</p>\n\n<p>What do we lose by always using MockRepository.GenerateMock()?</p>\n\n<p>One big benefit of using Mocks instead of Stubs is that we will be able to reuse the same instance among all the tests keeping them cleaner and straightforward.</p>\n\n<p>The moq framework works in a similar way... we don't have different objects for mocks and stubs.</p>\n\n<p>(please, don't answer with a link to Fowler's \"Mocks aren't stubs\" article)</p>\n"},{"tags":["c#",".net","unit-testing","mocking","moq"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1117,"score":4,"question_id":4806909,"title":"Moq property with protected setter","body":"<p>I want to Moq next object:</p>\n\n<pre><code>abstract class Foo\n{\n    public string Bar { get; protected set; }\n}\n</code></pre>\n\n<p>so that <code>new Mock&lt;Foo&gt;().Bar</code> return <code>\"Blah\"</code>.</p>\n\n<p>How can I do that?</p>\n\n<hr>\n\n<pre><code>fooMock.SetupGet&lt;string&gt;(s =&gt; s.Bar).Returns(\"Blah\");\n</code></pre>\n\n<p>throws</p>\n\n<blockquote>\n  <p>Failure: System.NotSupportedException : Invalid setup on a non-virtual member: s => s.Date</p>\n</blockquote>\n\n<p>and</p>\n\n<pre><code>fooMock.Protected().SetupGet&lt;string&gt;(\"Bar\").Returns(\"Blah\");\n</code></pre>\n\n<p>throws</p>\n\n<blockquote>\n  <p>To specify a setup for public property StatementSection.Date, use the typed overloads</p>\n</blockquote>\n"},{"tags":["java","eclipse","unit-testing","tdd","ncrunch"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":122,"score":6,"question_id":12369704,"title":"Equivalent of NCrunch for Java in Eclipse","body":"<p>I'm looking for a tool that does continuous testing while I'm writing code (such as NCrunch for Visual Studio) for Java in Eclipse. Is there something like that available for free?</p>\n\n<p>Ideally, it would test continuously, but also give me a feedback in real time of which lines pass and which don't.</p>\n"},{"tags":["unit-testing","windows-phone-7","command-line"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12359041,"title":"Windows Phone 7 unit tests from command line","body":"<p>I need to run my Windows Phone 7 unit tests from the command line, as in, not having to interact with any GUI elements. Is this possible?</p>\n\n<p>EDIT:\nI am using the silverlight testing framework here <a href=\"http://www.jeff.wilcox.name/2010/05/sl3-utf-bits/\" rel=\"nofollow\">http://www.jeff.wilcox.name/2010/05/sl3-utf-bits/</a></p>\n"},{"tags":["python","unit-testing","selenium"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":12373316,"title":"How do I structure my tests with Python unittest module?","body":"<p>I'm trying to build a test framework for automated webtesting in <code>selenium</code> and <code>unittest</code>, and I want to structure my tests into distinct scripts. So I've organised it as following:</p>\n\n<p><strong>base.py</strong> - This will contain, for now, the base selenium test case class for setting up a session.</p>\n\n<pre><code>import unittest\nfrom selenium import webdriver\n\n# Base Selenium Test class from which all test cases inherit.\nclass BaseSeleniumTest(unittest.TestCase):\n    def setUp(self):\n        self.browser = webdriver.Firefox()\n    def tearDown(self):\n        self.browser.close()\n</code></pre>\n\n<p><strong>main.py</strong> - I want this to be the overall test suite from which all the individual tests are run.</p>\n\n<pre><code>import unittest\nimport test_example\n\nif __name__ == \"__main__\":\n    SeTestSuite = test_example.TitleSpelling()\n    unittest.TextTestRunner(verbosity=2).run(SeTestSuite)\n</code></pre>\n\n<p><strong>test_example.py</strong> - An example test case, it might be nice to make these run on their own too.</p>\n\n<pre><code>from base import BaseSeleniumTest\n\n# Test the spelling of the title\nclass TitleSpelling(BaseSeleniumTest):\n    def test_a(self):\n        self.assertTrue(False)\n\n    def test_b(self):\n        self.assertTrue(True)\n</code></pre>\n\n<p>The problem is that when I run main.py I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"H:\\Python\\testframework\\main.py\", line 5, in &lt;module&gt;\n    SeTestSuite = test_example.TitleSpelling()\n  File \"C:\\Python27\\lib\\unittest\\case.py\", line 191, in __init__\n    (self.__class__, methodName))\nValueError: no such test method in &lt;class 'test_example.TitleSpelling'&gt;: runTest\n</code></pre>\n\n<p>I suspect this is due to the very special way in which <code>unittest</code> runs and I must have missed a trick on how the docs expect me to structure my tests. Any pointers?</p>\n"},{"tags":["unit-testing","cpputest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12374286,"title":"Linker errors when attempting to use TEST_GROUP_BASE shared test group when testing legacy C code","body":"<p>We have attempted to reduce code duplication through the use of the TEST_GROUP_BASE to create a shared base class. When we attempt to use this TEST_GROUP_BASE in more than one test class, we get linker warnings complaining about 'getwchar'and 'putwchar': inconsistent dll linkage and errors reporting multiple definitions of both these functions, and a number of other 'char'/'wchar' pairs (e.g. strchr/wcschr, strpbrk/wcspbrk). If I only include one test file that makes use of the TEST_GROUP_BASE macro, the linker errors don't appear.</p>\n\n<p>The base class is defined as a TEST_BASE in a .h file with all the member functions inlined. This .h file is then included in the derived test files with the TEST_GROUP_BASE macro used to incorporate the shared TEST_BASE. Have I missed anything?</p>\n\n<p>I've not managed to find any examples of TEST_GROUP_BASE being used so I'm not sure whether I've missed a critical piece of configuration. We are testing legacy C code, but all references to the production code are made within extern \"C\" braces, since our simple tests pass that would suggest that the c/c++ is linking OK. </p>\n\n<p>Can anyone suggest any possible causes, or point me in the direction of any opensource examples of how TEST_GROUP_BASE is being used elsewhere?</p>\n\n<p>The development environment is VS2010.</p>\n"},{"tags":["python","unit-testing","google-app-engine","pycharm"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12353974,"title":"Using pycharms unit test runner with a GAE project","body":"<p>Within our project, we have historically used an ant command to run the projects unit tests. This ant command simply invokes a manage.py file (which essentially ties together GAE and django). </p>\n\n<blockquote>\n  <p>Example usage: python manage.py test </p>\n</blockquote>\n\n<pre><code>from appengine_django import InstallAppengineHelperForDjango\nInstallAppengineHelperForDjango(version='1.2')\n\nfrom django.core.management import execute_manager\ntry:\n    import settings # Assumed to be in the same directory.\nexcept ImportError:\n    import sys\n    sys.stderr.write(\"\"\"Error: Can't find the file 'settings.py' in the directory containing %r. \nIt appears you've customized things.\nYou'll have to run django-admin.py, passing it your settings module.\n(If the file settings.py does indeed exist, it's causing an ImportError somehow.)\n\"\"\" % __file__)\n    sys.exit(1)\n\nif __name__ == \"__main__\":\n    execute_manager(settings)\n</code></pre>\n\n<p>In terms of IDE's the team has switched over to using pycharm sparked out of desire to increase developer productivity. However, we are having trouble getting pycharm's unit test runner working. </p>\n\n<p>Pycharms attempt to running tests is resulting in an error:</p>\n\n<blockquote>\n  <p>The Google App Engine SDK could not be found!</p>\n</blockquote>\n\n<p>The runner is being called as follows: </p>\n\n<blockquote>\n  <p>python \\pycharm\\django_test_manage.py\" test visibility</p>\n</blockquote>\n\n<p>Within the pycharm project settings:</p>\n\n<ul>\n<li>the google app engine sdk has been added and enabled </li>\n<li>I have tried extending the python interpreter's to include the path to GAE</li>\n<li>modifying the django_test_manage.py file to include the path to GAE</li>\n</ul>\n\n<p>All results end with the App Engine SDK error. Am I overlooking something trivial?</p>\n"},{"tags":["unit-testing","testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":12373141,"title":"Does Junit works with Hibernate?","body":"<p>I have a java application with Hibernate as ORM. Now is time to test the application. I want to use Junit (I used time ago and I thought I knew how its works :s).\nThe first problem I find is creating an instance of a DaoImpl class where the method which retrieve data is (and I want to test this method). \nThe error I got doing \"new\" is: java.Lang.ExceptionInitializerError. I think its come because of the class of the instance has Hibernate classes, try to connect to the DataBase and so on... and probaly I cannot create a instance of this class as easy because of hibernate in back.</p>\n\n<p>If this, can annyone give a reference to configure for junit works with Hibernate. All I find is Hiberante with Spring. Is not valid to me because spring is not implemented in my application.</p>\n\n<p>thanks all!!</p>\n"},{"tags":["unit-testing","map","biztalk"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1664,"score":1,"question_id":874356,"title":"BizTalk testing maps with multiple input xml or is it Inline C# that is the problem?","body":"<p>Can anyone explain how to get unit tests of BizTalk maps with multiple inputs to work?</p>\n\n<p>I've been happily using the examples on Michael Stephenson <a href=\"http://geekswithblogs.net/michaelstephenson/archive/2008/03/30/120851.aspx\" rel=\"nofollow\">blog</a> to test my maps, but I've just tried my first multiple input map and it's failing  :-(</p>\n\n<p>I've used the VS2005 \"Test Map\" to first generate an input instance with the two input messages, then used varieties of that file as test inputs ...</p>\n\n<pre><code>&lt;ns0:Root xmlns:ns0=\"http://schemas.microsoft.com/BizTalk/2003/aggschema\"&gt;\n  &lt;InputMessagePart_0&gt;\n    ...\n  &lt;/InputMessagePart_0&gt;\n  &lt;InputMessagePart_1&gt;\n    ...\n  &lt;/InputMessagePart_1&gt;\n&lt;/ns0:Root&gt;\n</code></pre>\n\n<p>These test messages generate the expected output when I use the VS Test Map, but a section is missing when I try the unit tests. </p>\n\n<p>The only thing I can think of is the map has some functoids in ... <em>Scripting, Table Extractor and Table Looping</em> ... </p>\n\n<p>The unit test calls the StreamingTransform.ScalableTransform ...</p>\n\n<pre><code>// This is the BizTalk Server 2006 way of calling \nmapInstance.StreamingTransform.Transform(inputStream, \n    mapInstance.TransformArgs, outputStream, resolver);\n// This is the R2 way of calling\nXmlReader xmlRdr = new XmlTextReader(inputStream);\nmapInstance.StreamingTransform.ScalableTransform(xmlRdr, \n    mapInstance.TransformArgs, outputStream, \n    resolver, whitespaceCorrect);\n</code></pre>\n\n<p>and the alternative approach of using the Transform.Transform doesn't work either ...</p>\n\n<pre><code>XPathDocument doc = new XPathDocument(inputStream);\nmapInstance.Transform.Transform(doc, mapInstance.TransformArgs, outputStream);\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing","view","partial-views"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":119,"score":4,"question_id":12370532,"title":"How to test PARTIAL view was rendered in C# ASP .NET MVC","body":"<p>I have a view and it has partial view rendering inside:</p>\n\n<pre><code>&lt;div class=\"partialViewDiv\"&gt;\n    @Html.RenderPartial(\"partial\", Model.SomeModelProperty);\n&lt;/div&gt;\n</code></pre>\n\n<p>And a controller, which returns this view</p>\n\n<pre><code>public ActionResult Action()\n        {\n            ...\n            var model = new SomeModel(){SomeModelProperty = \"SomeValue\"}\n            return View(\"view\", model);\n        }\n</code></pre>\n\n<p>How to test view was rendered i know:</p>\n\n<pre><code>[TestMethod]\npublic void TestView()\n{\n   ...\n   var result = controller.Action();\n\n   // Assert\n   result.AssertViewRendered().ForView(\"view\").WithViewData&lt;SomeModel&gt;();\n}\n</code></pre>\n\n<p>but when I call </p>\n\n<pre><code>result.AssertPartialViewRendered().ForView(\"partial\").WithViewData&lt;SomeModelPropertyType&gt;();\n</code></pre>\n\n<p>I get this error message </p>\n\n<pre><code>Expected result to be of type PartialViewResult. It is actually of type ViewResult.\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["php","unit-testing","design-patterns","phpunit"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":106,"score":4,"question_id":2108521,"title":"Unit tests separation","body":"<p>This question is related to PHPUnit, although it <em>should</em> be a global xUnit design question.</p>\n\n<p>I'm writing a Unit test case for a class <code>Image</code>.</p>\n\n<p>One of the methods of this class is <code>setBackgroundColor()</code>.</p>\n\n<p>There are 4 different behaviors I need to test for this method,</p>\n\n<ol>\n<li>Trying to set an invalid background color. Multiple invalid parameters will be tested.</li>\n<li>Trying to set a valid background color using a short hand RGB array, e.g. <code>array(255,255,255)</code></li>\n<li>Trying to set a valid background color using a standard RGB array, e.g. <code>array('red' => 255, 'green' => 255, 'blue' => 255)</code> (this is the output format of the GD function <code>imagecolorsforindex()</code>)</li>\n<li>Trying to set a valid background color using the transparent constant <code>IMG_COLOR_TRANSPARENT</code></li>\n</ol>\n\n<p>At the moment, I have all this contained within 1 test in my test case called <code>testSetBackgroundColor()</code>, however I'm getting the feeling these should be 4 separate tests as the test is getting quite long and doing a lot.</p>\n\n<p>My question is, what should I do here? Do I encapsulate all this into 1 test of the Image test case, or do I split the above into separate tests like,</p>\n\n<ul>\n<li><code>testSetBackgroundColorErrors</code></li>\n<li><code>testSetBackgroundColorShorthandRGB</code></li>\n<li><code>testSetBackgroundColorRGB</code></li>\n<li><code>testSetBackgroundColorTransparent</code></li>\n</ul>\n\n<p>I've put the test in question here <a href=\"http://pastebin.com/f561fc1ab\" rel=\"nofollow\">http://pastebin.com/f561fc1ab</a>.</p>\n\n<p>Thank</p>\n"},{"tags":["c++","visual-studio","unit-testing","visual-studio-2005","googletest"],"answer_count":6,"favorite_count":15,"up_vote_count":31,"down_vote_count":0,"view_count":16712,"score":31,"question_id":531941,"title":"How to setup Google C++ Testing Framework (gtest) on Visual Studio 2005","body":"<p>It is not documented on the web site and people seems having problem setting up the framework. Can someone please show step by step introduction to a sample project setup.</p>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","rspec","rspec2"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":350,"score":4,"question_id":7361036,"title":"Rspec2 testing a before_validation method","body":"<p>I have the following to remove the spaces on a specific attribute.</p>\n\n<pre><code>#before_validation :strip_whitespace\n\nprotected\n  def strip_whitespace\n    self.title = self.title.strip\n  end\n</code></pre>\n\n<p>And I want to test it. For now, I've tried:</p>\n\n<pre><code>it \"shouldn't create a new part with title beggining with space\" do\n   @part = Part.new(@attr.merge(:title =&gt; \" Test\"))\n   @part.title.should.eql?(\"Test\")\nend\n</code></pre>\n\n<p>What am I missing?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12367771,"title":"How test Model Logic class with Unit Test in asp.net mvc4 without run webserver?","body":"<p>I have logic class: MyUtil.cs inside Models folder for asp.net mvc4 app.</p>\n\n<p>Auto generated unit tests for MyUtils.cs create unit test that working with webserver (use attr:[HostType(\"ASP.NET\")][UrlToTest(\"http://localhost:1139/\") etc..]).</p>\n\n<p>What should I change for make this unit test run without server?</p>\n\n<p>Thanks,</p>\n\n<p>Yosef</p>\n"},{"tags":[".net","unit-testing","visual-studio-2010","ide","mstest"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2110,"score":3,"question_id":3104428,"title":"Failed to queue test run: Unable to start the agent process(Visual Studio 2010)","body":"<p>While trying to run all the unit tests in my solution(Visual Studio 2010) I am getting a 'Failed to queue test run xxxx@MACHINENAME 2010-06-23 14:01:36': Unable to start the agent process' error. Does anyone know what causes this particular error to occur and how to resolve it so that I can run my unit tests?</p>\n\n<p>Thanks</p>\n"},{"tags":["spring","unit-testing","junit"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":2757,"score":6,"question_id":8601536,"title":"Junit to test Spring service and DAO layer","body":"<p>I am working on a spring application (Spring 3.0) and following layered architecture i.e. Controller -> Service -> DAO layers.I want to write unit test cases for service and DAO layer using Junit.<br>\nI checked Spring official site and also tried many other sites but couldn't figure out easy and simple way of doing it.<br>\nCan anybody provide me some helpful resources ?     </p>\n\n<hr>\n\n<p><strong>EDIT :</strong><br>\nLooks like <a href=\"http://code.google.com/p/mockito/\" rel=\"nofollow\">Mockito</a> is the good option. Any good link to use it in Spring.Thank you Alex for suggesting it.<br>\n <a href=\"http://cagataycivici.wordpress.com/2006/08/23/mocking_hibernate_daos_to_test/\" rel=\"nofollow\">Mocking Hibernate DAO</a><br>\n<a href=\"http://www.reverttoconsole.com/blog/spring/mock-unit-testing-services-and-daos-with-mockito-and-spring-3/\" rel=\"nofollow\">Mocking service layer</a> .</p>\n"},{"tags":["python","unit-testing","python-3.x"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12367299,"title":"Performing an action whenever a unit test fails","body":"<p>I'm using <code>unittest</code>.</p>\n\n<p>In case on of my tests in the testcase fails, I like to do something (e.g., save the erroneous output to a temporary folder for later review, etc.). </p>\n\n<p>Where does this code belong?</p>\n\n<p>At first, I thought I could check <code>if self.assertEqual(...)</code>, but it turns out this function doesn't return any value. It makes sense now, since it is intended to kick the execution out of the test function once failure is detected.</p>\n\n<p><code>tearDown</code> is called regardless of the test success, so it doesn't seem to help either.</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","testing","automated-tests"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12366751,"title":"Testing my simple WPF application","body":"<p>I am wishing to teach myself how to effectively test using VS2010 and C# for an upcoming interview. <em>Any resources on learning this would be greatly appreciated (especially a quick and dirty \"here is how you create a test project/run it/make assertions\" document - I just need to get my hands dirty!). :)</em></p>\n\n<p>What I am trying to learn with is a small project which I have written. I have a few comboboxes with criteria/keywords which queries certain columns in a table to see if the right values are returned. So, for instance, I have a column <code>\"Colour\"</code> and a corresponding combo box in my WPF application for <code>\"Colour\"</code>. When <code>\"Red\"</code> is selected, I want to return all the cols with the <code>\"Red\"</code> value in its row etc. etc. </p>\n\n<p>I've randomised my db data and want to create some assertions now (eg for \"Red\" combobox value, \"Red\" rows only are returned).</p>\n\n<p>What is the most effective and best way I can test an application of this nature?</p>\n\n<p>Theoretically, I know it's about creating some test data, feeding <code>\"Red\"</code> into the search function and asserting that only <code>\"Red\"</code> columns are returned. However, practically, how do I do this with VS2010 and C#? Resources for this are, surprisingly, hard to come by.</p>\n\n<p>Do I open the project, add a new test project, create a standalone project, where do I go from there...? A simple beginners intro to adding a test project and some guidelines for the best ways to make assertions would really help me out.</p>\n\n<p>Thanks very much.</p>\n"},{"tags":["visual-studio-2010","unit-testing","mstest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12365914,"title":"How to trap a System.Diagnostics.TraceSource's output inside a class library and log its output in MS Unit Test?","body":"<p>I have a TraceSource with name \"MyLib.Example\", but when I create a unit test, it's output doesn't show up in the test result.</p>\n\n<p>I've tried adding a custom TraceListener located inside the test project, and added the app.config to point to the trace listener, I even added the MyLib.dll.config but still nothing.</p>\n\n<p>So how can I capture the output of my TraceSource inside a class library that is being unit tested with MS Unit?</p>\n"},{"tags":["python","unit-testing","py.test"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12345164,"title":"How can I auto run py.test once a relative command has been change?","body":"<p>Via autonose or nosy, it will automatically run the nosetests once the some tests file or the relative files have been changes. I would like to ask that whether py.test provides the similar function for is there any other tools can automatically excite py.test.</p>\n"},{"tags":["java","unit-testing","nntp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":12365632,"title":"Know any embeddable NNTP servers?","body":"<p>I'm writing a bit of code that uses the <a href=\"http://commons.apache.org/net/api-3.1/org/apache/commons/net/nntp/NNTPClient.html\" rel=\"nofollow\">Apache NNTP Client</a> to fetch articles from an NNTP server. Once the code ships, we'll use an Apache James server to read the articles from. But to test the code, I'm looking for an embedded Java NNTP server, so I don't have to mock every server call. Are there any good ones I can use? Google seems to have failed me.</p>\n\n<p>My requirements are as follows:</p>\n\n<ol>\n<li>A server I can start from within the code.</li>\n<li>Tests can be run out-of-the-box on different machines without additional setup. (Once I commit the code, a remote build machine needs to be able to run the test cases).</li>\n</ol>\n\n<p>Any other inspired suggestions are also welcome.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":938,"score":1,"question_id":2356342,"title":"junit test suites","body":"<p>I have a script(test.bat) that allows me to launch one java test by command line :\n-java -cp() org.junit.runner.JUnitCore package.Class</p>\n\n<p>Now I want to do the same for several java tests ?\nhow could I do it? should I have to add the byte code for each java test?\ncould I have an example , please?</p>\n"},{"tags":["javascript","unit-testing","velocity","jasmine"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12365117,"title":"How to install Jasmin: the javascript test tool on Velocity project","body":"<p>I am searching the web for installing jasmine in order to test my javascript files. Most places assumes I will install it as a gem in a ruby project. But I am running velocity / Java project.</p>\n\n<p>How do I install it? And is there a nice and easy guide to explain step-by-step how to make it work?</p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":60,"score":-1,"question_id":12351803,"title":"Junit . How to test a method that return a class object","body":"<p>The Myclass has a method getdata(String name). which return the Student class object after calling the setter method So how to write the test for this the code is here....</p>\n\n<pre><code>class Myclass { \n    Student st = new Student();\n    public Student getdata(String name){\n        st.setName(name);\n        return st;\n    }\n}\n</code></pre>\n\n<p>I want to test weather the st is null or not</p>\n"},{"tags":["unit-testing","cmake"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12313258,"title":"CMake how to install test files with unit tests","body":"<p>I am using CMake to build my system and my unit tests.</p>\n\n<p>I am also doing an out-of-source build. </p>\n\n<p>I've found with the ADD_TEST() command, that you don't need to install the test executable (it will just be run when you run make install, which is great).</p>\n\n<p>However, my unit tests depend on some input files, which need to be copied to where the executable is built.  </p>\n\n<p>As far as I am aware, I can't use INSTALL() to copy the files there, because I haven't specified where <em>there</em> is - it depends on where the build command is called.</p>\n\n<p>Is there some way I can tell CMake to copy my test files to the same location that it builds the executable?</p>\n"},{"tags":["java","unit-testing","tdd"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":12361485,"title":"What kind of tests should I write?","body":"<p><strong>BACKGROUND</strong></p>\n\n<p>I'm writing a little game using Java, slick2d and other frameworks. Slick2d does not make it easy to write unit tests, but that's something I can't get around. One of the goals of the project was to have some test coverage but...</p>\n\n<p><strong>THE PROBLEM</strong></p>\n\n<p>Well... I wrote a 200-line test case, with 15 tests, and all for a class with only a single method.</p>\n\n<p>I tested everything I could think of: invalid arguments, combinations of invalid arguments, swapping method calls and so on. I know I can't test everything, and I know I don't need to test code from libraries (Java API, slick2d API, logback API, etc.), but even in that case, I can get pretty crazy with tests, and I believe that I won't be able to finish it if I write 15 tests for every method I create. So...</p>\n\n<p><strong>THE QUESTION</strong></p>\n\n<p>Where does good TDD draw the line at writing tests? Exactly what should I test, and what can I safely ignore?</p>\n\n<p>OBS: For those of you wondering, the single-method class for which I wrote 15 tests was loading some strings into an array, and its method would retrieve the string, given the line and file as argument.</p>\n\n<p>OBS2: I'm not skeptical of unit testing at all. I actually want to incorporate them in my project (whenever my API allows me) from the ground up. I just want to finish the project too, and don't die writing tests all day long.</p>\n"},{"tags":["python","unit-testing","python-3.x","refactoring"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12361990,"title":"Repetitive code in unittest testcase","body":"<p>I have a testcase that looks like this:</p>\n\n<pre><code>def MyTestCase(unittest.Testcase):\n  def test_input01(self):\n    input = read_from_disk('input01')\n    output = run(input)\n    validated_output = read_from_disk('output01')\n    self.assertEquals(output, validated_output)\n  def test_input02(self):\n    input = read_from_disk('input02')\n    # ...\n  # and so on, for 30 inputs, from input01 to input30\n</code></pre>\n\n<p>Now, I understand that test code can be a bit repetitive, since simplicity is more important than conciseness. But this is becoming really error-prone, since when I decided to change the signature of some functions used here, I had to make the change in all 30 places.</p>\n\n<p>I could refactor this into a loop over the known inputs, but I do want each input to remain a separate test, so I thought I should be making the <code>test_inputxx</code> methods.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["c#","java","unit-testing","testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":96,"score":0,"question_id":12359753,"title":"How to test a class full of constants","body":"<p>There is a class in my project which is just constants as follows:</p>\n\n<pre><code>public class AppConstants\n{\n  public static String Foo = \"Foo\";\n  public static String Bar = \"Bar\";\n  // so on...\n}\n</code></pre>\n\n<p>Ok these can be marked <code>readonly/final</code> etc.</p>\n\n<p>How can i test this class or make it testable? same idea for a <code>Enum</code> ?</p>\n\n<p>I dont see anything to test but for the sake of testability how can i improve it? </p>\n"},{"tags":["objective-c","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":10996952,"title":"Objc Equivalent of STFail but stopping the test","body":"<p>i'm looking for equivalent of STAssertTrue, STAssertFail...</p>\n\n<p>but they can stop the test when it's wrong (like in Java).</p>\n\n<p>They have something like that in objc?</p>\n"},{"tags":["spring","hibernate","unit-testing","jpa-2.0"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":210,"score":1,"question_id":12358783,"title":"Class not eligible for getting processed by all BeanPostProcessors","body":"<p>I'm having a lot of trouble to set up a configuration of Spring + Spring Data JPA + QueryDSL + JPA 2.0 + Hibernate in Maven. I already solved a lot of problems, but this one is giving me headache =/.</p>\n\n<p>I'm getting the following exception:</p>\n\n<pre><code>Bean 'dataSource' of type [class org.springframework.jdbc.datasource.DriverManagerDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n</code></pre>\n\n<p>I took a look in Google and most of times this problem is caused by the absence of the annotation \"@Transactional\". I tried to annotate my methods, but it didn't solve anything. I have absolutelly no idea about where it comes from =(.</p>\n\n<p>Here's the code of my test:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=\"/applicationContext.xml\")\npublic class BaseTest {\n\n    public BaseTest() {\n    }\n\n    @Before\n    public void setUp() throws IOException {\n        Dataset.loadDatabase();\n    }\n\n    @Test\n    public void load(){}\n}\n</code></pre>\n\n<p>The class DataSet just do some saves in the db to see if it's working.</p>\n\n<p>My ApplicationContext.xml:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:jpa=\"http://www.springframework.org/schema/data/jpa\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n       http://www.springframework.org/schema/context\n       http://www.springframework.org/schema/context/spring-context-3.1.xsd\n       http://www.springframework.org/schema/data/jpa\n       http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\n       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\"&gt;\n\n        &lt;context:annotation-config/&gt;\n        &lt;jpa:repositories base-package=\"com.ae.repository\" /&gt;\n        &lt;context:component-scan base-package=\"com.ae.service\" /&gt;\n\n        &lt;!-- Data Source --&gt;\n        &lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n            &lt;property name=\"driverClassName\"&gt;&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;&lt;/property&gt;\n            &lt;property name=\"url\"&gt;&lt;value&gt;jdbc:mysql://localhost:3306/academia&lt;/value&gt;&lt;/property&gt;\n            &lt;property name=\"username\"&gt;&lt;value&gt;root&lt;/value&gt;&lt;/property&gt;\n            &lt;property name=\"password\"&gt;&lt;value&gt;root&lt;/value&gt;&lt;/property&gt;\n        &lt;/bean&gt;\n\n        &lt;!-- JPA EntityManagerFactory --&gt;  \n        &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;  \n            &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;  \n            &lt;property name=\"jpaProperties\"&gt;\n                &lt;props&gt;\n                    &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n                    &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/prop&gt;\n                    &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n                    &lt;prop key=\"hibernate.cache.provider_class\"&gt;org.hibernate.cache.NoCacheProvider&lt;/prop&gt;\n                    &lt;prop key=\"hibernate.id.new_generator_mappings\"&gt;true&lt;/prop&gt;\n                &lt;/props&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;  \n\n        &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;  \n            &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt;  \n        &lt;/bean&gt; \n        &lt;tx:annotation-driven mode=\"aspectj\" transaction-manager=\"transactionManager\" /&gt;\n        &lt;bean class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\"/&gt;   \n        &lt;bean class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\"/&gt;  \n&lt;/beans&gt;\n</code></pre>\n\n<p>I'm not sure if my dependencies are correctly set either:</p>\n\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.10&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- hibernate + jpa --&gt;\n        &lt;dependency&gt;  \n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;  \n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;  \n            &lt;version&gt;4.1.6.Final&lt;/version&gt;\n        &lt;/dependency&gt;  \n        &lt;dependency&gt;  \n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;  \n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;  \n            &lt;version&gt;1.6.6&lt;/version&gt;  \n        &lt;/dependency&gt; \n        &lt;dependency&gt;  \n            &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;  \n            &lt;artifactId&gt;derby&lt;/artifactId&gt;  \n            &lt;version&gt;10.3.2.1&lt;/version&gt;  \n            &lt;scope&gt;test&lt;/scope&gt;  \n        &lt;/dependency&gt;\n\n        &lt;!-- Spring JPA --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.sql&lt;/groupId&gt;\n            &lt;artifactId&gt;jdbc-stdext&lt;/artifactId&gt;\n            &lt;version&gt;2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.transaction&lt;/groupId&gt;\n            &lt;artifactId&gt;jta&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- MySQL Connector --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.21&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Query DSL --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysema.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;\n            &lt;version&gt;2.7.2&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;    \n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysema.querydsl&lt;/groupId&gt;\n            &lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;\n            &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring Framework --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Apache commons lang --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n            &lt;version&gt;2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Apache commons IO --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Other --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n\n<p>Thank you for reading ;)</p>\n"},{"tags":["unit-testing","grails","groovy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12346417,"title":"Grails getErrorCount() returns more than 1 error, how to get the list of errors?","body":"<p>I have this constraint for this field in grails:</p>\n\n<pre><code>businessNumber(matches: '([0-9A-Z]*9)RA([0-9A-Z]*4)', maxSize: 15)\n</code></pre>\n\n<p>I am putting maxSize constraint so that grails embed a maxlength attribute on the html views. I make a unit test for the constraints that looks like this:</p>\n\n<pre><code>void testBusinessNumberExceedMaxSize(){\n        mockChildrenSpecialAllowancesForm.setBusinessNumber(\"F%G&amp;Hy934F4G6H%55\")\n        assertFalse (mockChildrenSpecialAllowancesForm.validate())\n        assertEquals (\"maxSize\",mockChildrenSpecialAllowancesForm.errors.businessNumber)\n        assertEquals (2, mockChildrenSpecialAllowancesForm.errors.getErrorCount())\n    }\n</code></pre>\n\n<p>Then, it generates this failure:</p>\n\n<pre><code>testBusinessNumberExceedMaxSize(com.ass.socialservicescm.ChildrenSpecialAllowancesTests)\n|  org.junit.ComparisonFailure: expected:&lt;ma[xSize]&gt; but was:&lt;ma[tches]&gt;\n    at org.junit.Assert.assertEquals(Assert.java:125)\n    at org.junit.Assert.assertEquals(Assert.java:147)\n    at com.ass.socialservicescm.ChildrenSpecialAllowancesTests.testBusinessNumberExceedMaxSize(ChildrenSpecialAllowancesTests.groovy:177)\n</code></pre>\n\n<p>I assume that it violates 2 constraints(because my error count is 2), one is maxSize and the other is matches. But how do i do an assertEquals for maxSize constraint?</p>\n\n<p>note: I'm using grails 2.0.0 </p>\n"},{"tags":["asp.net-mvc","unit-testing","action"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12342892,"title":"unit testing of very small asp.net mvc actions returning json","body":"<p>The first line of my action is tested with an extra integration test.\nThe second line is tested with an extra unit test for automapper mapping stuff\nThe third line is untested then.</p>\n\n<p>The below unit test does it test the third line? because it just tests the return type.</p>\n\n<p>This seems stupid or too trivial too me. What else should the method return????</p>\n\n<p>There is no if/else logic inside this action. Therefore just testing for type == JsonNetResult seems superfluid for me. I would not even realize in my unit test if someone removes the success = true anonymous type.</p>\n\n<p>Should I rather test the data of the JsonNetResult with QUnit?</p>\n\n<p>I would be glad about some guidance and tips because the actions returning Json data drive me crazy... Its just fetch data from db and put it inside the JsonNetResult object.</p>\n\n<p><strong>Action</strong></p>\n\n<pre><code>[HttpGet]\npublic ActionResult GetTemplateRootUnits(int templateId)\n{\n    IEnumerable&lt;Unit&gt; units = _dataProvider.GetTemplateRootUnits(templateId);\n    IEnumerable&lt;UnitTreeViewModel&gt; unitTreeViewModels = Mapper.Map&lt;IEnumerable&lt;Unit&gt;, IEnumerable&lt;UnitTreeViewModel&gt;&gt;(units);\n    return new JsonNetResult(new { data = unitTreeViewModels, success = true });\n}\n</code></pre>\n\n<p><strong>Unit test</strong></p>\n\n<pre><code>[Test]\npublic void GetTemplateRootUnits_TemplateExists_ReturnsJsonNetResult()\n{\n    // ARRANGE  \n    Mock&lt;IUnitDataProvider&gt; mock1 = new Mock&lt;IUnitDataProvider&gt;();\n    Mock&lt;IMappingEngine&gt; mock2 = new Mock&lt;IMappingEngine&gt;();\n    Mock&lt;ControllerContext&gt; mock3 = new Mock&lt;ControllerContext&gt;();\n    UnitController controller = new UnitController(mock1.Object, mock2.Object);\n    mock1.Setup(m =&gt; m.GetTemplateRootUnits(1)).Returns(new List&lt;Unit&gt; \n    { \n        new Unit{ UnitId = 1, Name = \"Name1\", HasChildren = false},\n        new Unit{ UnitId = 2, Name = \"Name2\", HasChildren = false},\n        new Unit{ UnitId = 3, Name = \"Name3\", HasChildren = false},\n    });\n\n    var unitTreeViewModels = new List&lt;UnitTreeViewModel&gt; \n    { \n        new UnitTreeViewModel { Id = 1, Name = \"Name1\", HasChildren = false},\n        new UnitTreeViewModel { Id = 2, Name = \"Name2\", HasChildren = false},\n        new UnitTreeViewModel { Id = 3, Name = \"Name3\", HasChildren = false},\n    };\n\n    // Thats the way AutoMapper is mocked\n    mock2.Setup(m =&gt; m.Map&lt;IEnumerable&lt;Unit&gt;, IEnumerable&lt;UnitTreeViewModel&gt;&gt;(It.IsAny&lt;IEnumerable&lt;Unit&gt;&gt;())).Returns(unitTreeViewModels);\n\n    // ACT\n    ActionResult result = controller.GetTemplateRootUnits(1);\n\n    // ASSERT - check that the dataProvider.GetTestplanRootUnits() was called\n    mock1.Verify(m =&gt; m.GetTemplateRootUnits(1));\n\n    // ASSERT\n    Assert.IsInstanceOfType(typeof(JsonNetResult), result);\n} \n</code></pre>\n\n<p><strong>JsonNetResult.cs</strong></p>\n\n<pre><code>public class JsonNetResult : ContentResult\n    {\n        private readonly object _data;\n        public JsonNetResult(object data)\n        {\n            _data = data;\n        }\n\n        public override void ExecuteResult(ControllerContext context)\n        {\n            Content = JsonConvert.SerializeObject(_data);\n            ContentType = \"application/json\";\n            base.ExecuteResult(context);\n        }\n        public object Data { get { return _data; } }\n    }\n</code></pre>\n"},{"tags":["unit-testing"],"answer_count":8,"favorite_count":13,"up_vote_count":35,"down_vote_count":0,"view_count":2146,"score":35,"question_id":1257560,"title":"When is a Test not a Unit-test?","body":"<p>I am looking for rules like:</p>\n\n<p>A test is not a unit-test if:</p>\n\n<ul>\n<li>it communicates with a database</li>\n<li>it cannot run in parallel with other tests</li>\n<li>uses the \"environment\" like registry or file system</li>\n</ul>\n\n<p>What else is there?</p>\n"},{"tags":["unit-testing","design-patterns","dependency-injection","tdd","solid-principles"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":12146281,"title":"SOLID/TDD encourages one implementation for one interface","body":"<p>I overheard the below and was asked to confirm this statement:</p>\n\n<p>\"SOLID/TDD encourages one implementation for one interface, this is not real world and goes against the point of interfaces doesn't it?\"</p>\n\n<p>I initially agreed as all online examples of TDD and DI all follow typical IRepository/MyRepository examples where there is only one implementation. After further thought I didn't agree.</p>\n\n<p>What I'm trying to do is provide proof that it doesn't and also an example of where there can be multiple implementations of one interface and show how it works in terms of DI.</p>\n\n<p>I was hoping people could help me with this.</p>\n\n<p><strong>UPDATE:</strong> Whilst I understand the concepts of DI and Unit Testing what I'm trying to show is how we can have multiple classes in production implementing one interface.</p>\n\n<p><strong>UPDATE2:</strong> Having thought of a simple example, here is a possible implementation of multiple implementations however it still doesn't really answer what I want. What if you had a constructor that had a single dependency on ILogger or IDataProvider or ISomething:</p>\n\n<pre><code>public interface ILogger\n{\n  void Write(string data);\n}\n\npublic class FileLogger : ILogger\n{\n  void Write(string data)\n  {\n    //\n  }\n}\n\npublic class DBLogger : ILogger\n{\n  void Write(string data)\n  {\n    //\n  }\n}\n\npublic class EventViewerLogger : ILogger\n{\n  void Write(string data)\n  {\n    //\n  }\n}\n\npublic class Calculator\n{\n    private IEnumberable&lt;ILogger&gt; loggers;\n\n    public Calculator(IEnumberable&lt;ILogger&gt; loggers)\n    {\n        this.loggers = loggers;\n    }\n\n    public int Add(int a, int b)\n    {\n      var result = a + b;\n\n      foreach(var logger in loggers)\n      {\n        logger.Write(\"Result was \" + logger);\n      }\n    }\n}\n</code></pre>\n"},{"tags":["c++","unit-testing","mocking"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":81,"score":2,"question_id":12354742,"title":"Is it safe to implement a static method in your executable, which is already implemented in a shared library?","body":"<p>We make use of a lot of shared libraries in our code. In this particular case a static method is implemented in one of these libraries. We call this method in different places in our code. However, if we want to test, we would like to isolate the process, so mock the implementation of that method.</p>\n\n<p>The way we are thinking to do this, is by re-implementing the method in the test binary. This would then make sure our implementation is taken instead of the one in the lib.</p>\n\n<p>The main question here is: Is this pure evil? If so, what is the preferred solution for such a case?</p>\n\n<p>An example...</p>\n\n<p>Header of the shared library:</p>\n\n<pre><code>static const bool theMethod(...);\n</code></pre>\n\n<p>Implementation of the method in the shared library:</p>\n\n<pre><code>static const bool theMethod(...){\n  //The real implemetation does some fancy stuff here\n  return theRealValue;\n}\n</code></pre>\n\n<p>Our test case:</p>\n\n<pre><code>#include &lt;headerOfTheMethod.hpp&gt;\n\n//Our own \"mocked\" implementation\nstatic const bool theMethod(...){\n  return true; //Lets say we always return true for the purpose of our test\n}\n\n//Here comes our code testing the class which is using that particular method\n</code></pre>\n\n<p>Side note: We are using gcc as compiler, libraries are dynamically linked.</p>\n\n<p>UPDATE: \n<em>If this would for static methods. That would be a good starter, but what would happen if it were a member function of a class?</em></p>\n"},{"tags":["javascript","unit-testing","continuous-integration","qunit","bamboo"],"answer_count":6,"favorite_count":23,"up_vote_count":35,"down_vote_count":0,"view_count":7565,"score":35,"question_id":2070499,"title":"Running JavaScript unit tests headlessly in a Continuous Integration build","body":"<p>I have a webapp build plan running on a Continuous Integration system (<a href=\"http://www.atlassian.com/software/bamboo/\" rel=\"nofollow\">Atlassian Bamboo</a> 2.5). I need to incorporate <a href=\"http://docs.jquery.com/QUnit\" rel=\"nofollow\">QUnit</a>-based JavaScript unit tests into the build plan so that on each build, the Javascript tests would be run and Bamboo would interpret the test results.</p>\n\n<p>Preferably I would like to be able to make the build process \"standalone\" so that no connections to external servers would be required. Good ideas on how to accomplish this? The CI system running the build process is on an Ubuntu Linux server.</p>\n"},{"tags":["java","eclipse","unit-testing","maven","junit"],"answer_count":5,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":245,"score":8,"question_id":12175848,"title":"Run JUnit tests from a dependency jar in Eclipse","body":"<p>I have some JUnit tests that contained in a <code>.jar</code> that is intended to be used as a library. The library contains some tests that should be run whenever the library is used in another project.</p>\n\n<p>However when I create a new project using the library and run JUnit on it in Eclipse then the tests in the dependency <code>.jar</code> don't run / don't get detected by the JUnit test runner. I get the message:</p>\n\n<blockquote>\n<pre><code>No tests found with test runner 'JUnit 4'.\n</code></pre>\n</blockquote>\n\n<p>Is there a way I can configure the dependency <code>.jar</code> so that the tests will run alongside any tests that might be contained in the main project?</p>\n\n<p>Basically I want the dependency .jar to \"export\" the tests to whatever projects it is used in.</p>\n\n<p>I'm using Eclipse Juno, JUnit 4.10, and Maven for the dependency management.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The point of this library is to be able to help test projects that use it - i.e. it runs some specialised tests. This is why I want to be able to import the library .jar and have it contribute the extra tests to the importing project.</p>\n"}]}
{"total":15323,"page":15,"pagesize":100,"questions":[{"tags":["objective-c","ios","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12353795,"title":"Objective C - Unit testing core functionality in private methods?","body":"<p>I've been in many situations where my core logic is in private methods.\nHow would you go about unit testing that, is there any kind of compile time manipulation to ignore compile errors for unknown/private methods? I know that for the second part of the code I could use performSelector, but is that a reasonable solution?</p>\n\n<p>For instance:</p>\n\n<pre><code>[[self.objectMock expect] privateMethod];\nor \n[self.object callPrivateMethodsToExpectSomeOtherBehaviour]\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Here is an example to demonstrate why I feel like I need to test some private methods.\nAre these tests not reasonable? How else would I test that calling clear actually does what it suppose to do?</p>\n\n<pre><code>- (void)clear\n{\n   self.orderNumber = nil;\n   [self.items removeAllObjects];\n   // Clear the rest of fields\n}\n\n- (void)testClearShouldRemoveOrderNumber\n{\n   Order *order = [[Order alloc] init];\n   OCMockObject *orderPartialMock = [OCmockObject partialMockForObject:order];\n\n   [[orderPartialMock.items expect] setOrderNumber:nil];\n   [orderPartialMock clear];\n   [orderPartialMock verify];\n}\n\n- (void)testClearShouldRemoveItems\n{\n    Order *order = [[Order alloc] init];\n    order.items = [[OCMockObject niceMockForClass:[NSMutableArray class]];\n\n    [[orderPartialMock.items expect] removeAllObjects];\n    [orderPartialMock performSelector@selector(clear)];\n    [orderPartialMock.items verify];\n}\n</code></pre>\n"},{"tags":["c#","unit-testing","http"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12352495,"title":"Is there a way to unit test for a timeout error?","body":"<p>I created a program to call thousands of urls, what I want to do is make sure if the url times out I can trace the timeout error back to the url. What I have in place is:</p>\n\n<pre><code>          string url = \"http://www.google.com\";\n          HttpWebRequest request = (HttpWebRequest)\n                                 WebRequest.Create(url);\n        request.Timeout = 5000;\n        request.ReadWriteTimeout = 5000;\n        request.UserAgent = \"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101        Firefox/14.0.1\";\n        //From Fiddler\n        DateTime giveUp = DateTime.UtcNow.AddSeconds(5);\n        if (DateTime.UtcNow &gt; giveUp)\n            throw new TimeoutException(\"The following url could not be reached: \" + url);\n</code></pre>\n\n<p>I want to make a unit to test that the timeout Exception works correctly. Let me know if you need more details but this should suffice.</p>\n"},{"tags":["unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12352803,"title":"Should I declare my test classes final?","body":"<p>What is the best practice for visibility of classes and attributes of unit Tests? Should I make all my Test final? Or just their attributes? Or neither? Please, point to resources (books, blogs, etc) to support your opinions. Thanks!!</p>\n"},{"tags":["c#","unit-testing","tdd"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":160,"score":3,"question_id":9939735,"title":"TDD and Unit Testing for Short Projects with Small Teams?","body":"<p>Is TDD good approach for small and short projects done by small teams up to 4 people ? Is that really a profitable effort ? </p>\n\n<p>What about Unit Testing ? TDD implies Unit Testing but no conversely. Wouldn't be Unit Testing sufficient, done from time to time during the project development life cycle, until reasonable code coverage ?</p>\n"},{"tags":["python","django","unit-testing","django-queryset","django-testing"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":391,"score":5,"question_id":7362952,"title":"Mocking a Django Queryset in order to test a function that takes a queryset","body":"<p>I have a utility function in my Django project, it takes a queryset, gets some data from it and returns a result. I'd like to write some tests for this function. Is there anyway to 'mock' a QuerySet? I'd like to create an object that doesn't touch the database, and i can provide it with a list of values to use (i.e. some fake rows) and then it'll act just like a queryset, and will allow someone to do field lookups on it/filter/get/all etc.</p>\n\n<p>Does anything like this exist already?</p>\n"},{"tags":["c++","unit-testing","googletest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12348063,"title":"Tools similar to Google Test for C++ unit testing?","body":"<p>Are there any tools similar to GoogleTest for the purpose of functional testing in C++.\nI plan to do them as part of Unit Testing and would like to know of other options available so that I can make an informed choice.</p>\n"},{"tags":["asp.net","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":126,"score":1,"question_id":12348335,"title":"Request.Querystring is null when use unit test","body":"<p>I want to create Nunit test case for ASP.NET MVC application. If the ASP.NET uses Request.QueryString or Request.Url. then the unit test case will return null reference exception since the Request.querystring will return the value if the control comes from UI only. </p>\n\n<p>So can you please help on this to create a unit test for MVC controller which uses Httpcontext.Request attributes.</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":25,"score":0,"question_id":12349876,"title":"Why does calling Controller.View with no arguments not clear the ViewData.Model","body":"<p>I use the same controller instance in all of my tests, and just discovered (because my tests run in an arbitrary order) that if you call <code>Controller.View</code> with no arguments, it will pass back the same <code>ViewDataDictionary</code> that was created by a previous call to <code>Controller.View</code> which had arguments!</p>\n\n<p>A trivial example (with NUnit and MvcContrib)</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>&lt;Test()&gt; _\nPublic Sub Test_A()\n    Dim r As ViewResult = MockController.MethodWhichReturnsViewData().AssertViewRendered()\n\n    Assert.IsNotNull(r.Model)\nEnd Sub\n\n&lt;Test()&gt; _\nPublic Sub Test_B()\n    Dim r As ViewResult = MockController.MethodWhichDoesNotReturnViewData().AssertViewRendered()\n\n    Assert.IsNull(r.Model) '&lt;==== fails, has the same view data as Test_A!\nEnd Sub\n</code></pre>\n\n<p>This is bad for my tests (obviously).  I can imagine two solutions, neither of which I like, any suggestions?  (As a bonus, can anyone understand why MS designed it this way?)</p>\n\n<ol>\n<li>Explicitly specify <code>Nothing</code> as the model for all empty calls to <code>Controller.View</code></li>\n<li>Add a method to <code>TestSetUp</code> which clears the model</li>\n</ol>\n"},{"tags":["java","unit-testing","junit4"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1127,"score":4,"question_id":3869954,"title":"whas the actual use of 'fail' in junit test case?","body":"<p>whas the actual use of 'fail' in junit test case?</p>\n"},{"tags":["java","android","unit-testing"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":527,"score":0,"question_id":1221774,"title":"Alternative to JUnit in Android","body":"<p>As there is JUnit test tool for Desktop java, is there some thing similiar in android so one can apply on android also?</p>\n"},{"tags":["multithreading","unit-testing","testing","background","nant"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12349029,"title":"Can Nant run background?","body":"<p>I want to run Nant at the same time ,</p>\n\n<p>so I pack the command line in a .bat file</p>\n\n<p>They can run success at the same time when I click them stimulaneously.</p>\n\n<p>But I put them background, they failed.</p>\n\n<p>Is it the restrict of  Nant???</p>\n\n<p>Any possible way to solve it?</p>\n"},{"tags":["entity-framework","unit-testing","integration-testing","repository-pattern"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":147,"score":2,"question_id":12338068,"title":"Implementing Repository pattern and doing Tests","body":"<p>I have read almost all articles about Repository pattern and different implementations of it. Many of them judged bad practices (ex: using <code>IQueryable&lt;T&gt;</code> instead of <code>IList&lt;T&gt;</code>) etc. that why i'm still stuck and couldn't end-up to the right one.</p>\n\n<p>So:</p>\n\n<ul>\n<li><p>Do I need Repository pattern to apply IoC in my MVVM applications ?</p></li>\n<li><p>If yes, What is the efficient IRepository implementation to EF Entities which is a good practice and better testable ?</p></li>\n<li><p>How can I test my Repositories and UnitofWork behavior ? Unit tests against in memory Repositories ? Integration tests ? </p></li>\n</ul>\n\n<p><strong>Edit</strong> : According to answers I added the first question.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12344234,"title":"Unit tests examples","body":"<p>I'm trying to learn writing unit tests. I followed the repository pattern and created a repository for my controller. Is supports both real and fake dbcontexts and now I'm ready to start writing tests. My problem is that I don't know what to test.</p>\n\n<ol>\n<li>Should I test the controller if most of it's job is to pass data to\nthe repository and than pass the the result to the view?</li>\n<li>In my repository I have methods like below. They are quite straightforward, should they be tested?</li>\n<li>Should I test conditions of validation?</li>\n<li><p>The most important thing. Can you give me some examples of unit test for asp mvc? I suppose that a list of statements like [method]ShouldDo[whatever] might be helpful. But I'm afraid it may be hard come up with something not so obvious offhand. Maybe there is somebody willing to share one of their test files/projects or recommend an open source project worth taking a look at?</p>\n\n<pre><code>        public virtual void Update(T entity) \n        {\n            Db.Attach(entity);\n            Db.SaveChanges();\n        }\n\n        public virtual void Save(T entity)\n        {\n            Db.Add(entity);\n            Db.SaveChanges();\n        }\n\n        public virtual void Remove(T entity)\n        {\n            Db.Delete(entity);\n            Db.SaveChanges();\n        }\n</code></pre></li>\n</ol>\n"},{"tags":["c#","unit-testing","app-config"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12338690,"title":"Unable to read configuration file in a test project","body":"<p>When running a unit test, the configuration file is not read properly.\nHowever, when running from a console appplication context, the config file is read.</p>\n\n<p>In the code below, when accessing <strong><em>var section</em></strong> after the assignment, it's null when running the test TestIoCInit() and not null when calling InitIoC() from console application.</p>\n\n<pre><code>    [TestMethod]\n    public void TestIocInit()\n    {\n        InitIoC();\n    }\n    internal static void InitIoC()\n    {\n        IUnityContainer unityContainer = new UnityContainer(); // the host app domain creates the unity container and pass it to the resolver, the resolver is a static member of IoC class, thus the container is static\n\n        ServiceLocator.SetLocatorProvider(unityContainer);\n\n        var section = (UnityConfigurationSection)ConfigurationManager.GetSection(\"unity\");\n        section.Configure(unityContainer);\n\n        var unityResolver = new UnityDependencyResolver(unityContainer);\n        IoC.Initialize(unityResolver);\n        new IoCTypeRegistrationTask(unityContainer).Execute();\n    }\n</code></pre>\n\n<p>Appreciate your help!</p>\n"},{"tags":["xcode","unit-testing","xcode4","xcodebuild","ocunit"],"answer_count":4,"favorite_count":17,"up_vote_count":21,"down_vote_count":0,"view_count":7944,"score":21,"question_id":5403991,"title":"Xcode 4: Run tests from the command line (xcodebuild)?","body":"<p>I've created a brand new iOS project in Xcode 4, and included unit tests. The default app has 2 targets, the main application and the unit test bundle. Using \"Product > Test\" (Command-U) builds the application, builds the unit test bundle, launches the iOS simulator and runs the tests. Now I'd like to be able to do the same thing from the command line. The command line tool (xcodebuild) doesn't have a \"test\" action, but it seems like I should be able to build the unit test bundle target directly, since it depends on the application itself. However, running:</p>\n\n<pre><code>xcodebuild -target TestAppTests -sdk iphonesimulator4.3 -configuration Debug build\n</code></pre>\n\n<p>gives the following message:</p>\n\n<pre><code>/Developer/Platforms/iPhoneSimulator.platform/Developer/Tools/Tools/RunPlatformUnitTests:95: warning: Skipping tests; the iPhoneSimulator platform does not currently support application-hosted tests (TEST_HOST set).\n</code></pre>\n\n<p>That seems like a lie, since Test Host is set for my unit test bundle target when I run Command-U from the GUI. I've seen previous posts about the separation between logic tests and application tests, but it seems like Xcode 4 does away with that distinction. Any clue how I can run my tests from the command line?</p>\n"},{"tags":["unit-testing","testing","rest","integration-testing","soapui"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":587,"score":4,"question_id":7583749,"title":"soapUI vs rest-assured for REST API testing","body":"<p>What's better for testing a REST API in built in Spring 3.1, <a href=\"http://www.soapui.org/\" rel=\"nofollow\">soapUI</a> or <a href=\"http://code.google.com/p/rest-assured/\" rel=\"nofollow\">rest-assured</a>?  oAuth 2.0 is used for authentication.</p>\n"},{"tags":["java","unit-testing","rest","testing","tdd"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":135,"score":2,"question_id":11829455,"title":"Testing rest service","body":"<p>I'm newbie in TDD, and now I'm trying to test rest service. What I need is somehow to test if the request to the server is sent right as it should be and looks good. Can you provide me any links or suggestions on how to achieve this.</p>\n\n<p>Also: if you can suggest any good book for reading on TDD topic - you are welcome!</p>\n\n<p>Thx!</p>\n"},{"tags":["unit-testing","testing","nunit"],"answer_count":5,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":5946,"score":3,"question_id":6806998,"title":"How to debug Nunit test in Visual Studio 2010","body":"<p>I have problem with debuing NUnit test from VisualStudio. I created empty project (Console Application) , then I added references to Nunit library and wrote simple test.</p>\n\n<pre><code>namespace ReimplementingLinq.Tests\n{\n\n    [TestFixture]\n    public class WhereTest\n    {\n        [Test]\n        public void SimpleFiltering()\n        {\n            int[] source = { 1, 2, 3, 4, 2, 8, 1 };\n            var result = source.Where(val =&gt; val &lt; 4);\n            int[] expected = {1,2,3,4};\n            CollectionAssert.AreEqual(expected, result);\n        }\n    }\n}\n</code></pre>\n\n<p>Nest I was folowing advices presented in this link \n<a href=\"http://stackoverflow.com/questions/759854/how-do-i-run-nunit-in-debug-mode-from-visual-studio\">How do I run NUnit in debug mode from Visual Studio?</a>\nhowever non of solutions in this topic work for me. None of my breakpoint are hit during performig the test. I was trying the solution with attaching to the process and alsow with runing project with external program with arguments. \nWhat can I do to debug my unit test ???</p>\n"},{"tags":["c#","visual-studio-2008","unit-testing","testing","nunit"],"answer_count":15,"favorite_count":19,"up_vote_count":56,"down_vote_count":0,"view_count":26763,"score":56,"question_id":759854,"title":"How do I run NUnit in debug mode from Visual Studio?","body":"<p>I've recently been building a test framework for a bit of C# I've been working on. I have NUnit set up and a new project within my workspace to test the component. All works well if I load up my unit tests from Nunit (v2.4), but I've got to the point where it would be really useful to run in debug mode and set some break points.</p>\n\n<p>I've tried the suggestions from several guides which all suggest changing the 'Debug' properties of the test project:</p>\n\n<pre><code>Start external program: C:\\Program Files\\NUnit 2.4.8\\bin\\nunit-console.exe\nCommand line arguments: /assembly: &lt;full-path-to-solution&gt;\\TestDSP\\bin\\Debug\\TestDSP.dll\n</code></pre>\n\n<p>I'm using the console version there, but have tried the calling the GUI as well. Both give me the same error when I try and start debugging:</p>\n\n<pre><code>Cannot start test project 'TestDSP' because the project does not contain any tests.\n</code></pre>\n\n<p>Is this because I normally load \\DSP.nunit into the Nunit GUI and that's where the tests are held?</p>\n\n<p>I'm beginning to think the problem may be that VS wants to run it's own test framework and that's why it's failing to find the NUnit tests?</p>\n\n<p><strong>Edit</strong>: To those asking about test fixtures, one of my .cs files in the TestDSP project looks roughly like this:</p>\n\n<pre><code>namespace Some.TestNamespace\n{\n    // Testing framework includes\n    using NUnit.Framework;\n\n    [TestFixture]\n    public class FirFilterTest\n    {\n        [Test]\n        public void Test01_ConstructorTest()\n        {\n            ...some tests...\n        }\n    }\n}\n</code></pre>\n\n<p>...I'm pretty new to C# and the NUnit test framework so it's entirely possible I've missed some crucial bit of information ;-)</p>\n\n<p><strong>Final Solution</strong>: The big problem was the project I'd used. If you pick <code>Other Languages -&gt; Visual C# -&gt; Test -&gt; Test Project</code> ...when you're choosing the project type, Visual Studio will try and use it's own testing framework as far as I can tell. You should pick a <strong>normal</strong> C# class library project instead and then the instructions in my selected answer will work.</p>\n"},{"tags":["unit-testing","asp.net-web-api","dotnet-httpclient"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12282354,"title":"Testing WebAPI actions that have authorization filters","body":"<p>I’ve got a Web API that I’ve added [Authorize] attributes to, which means that the unit tests I had previously now fail due to them being unauthorised. Here’s a sample of a basic test along with an initialiser method:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>[TestInitialize]\npublic void CreateServer() {\n    var config = new HttpConfiguration();\n    WebApiConfig.Configure(config); // Create the routes\n    var server = new HttpServer(config);\n    this.client = new HttpClient(server);\n}\n\n[TestMethod]\npublic void MyThings_GET_Returns_All_MyThings() {\n    var response = this.client.GetAsync(\"http://localhost/api/1.0/mythings\").Result;\n\n    var mythings = response.Content.ReadAsAsync&lt;IEnumerable&lt;MyThing&gt;&gt;().Result;\n\n    Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);\n    Assert.AreEqual(4, mythings.Count());\n}\n</code></pre>\n\n<p>What I’m wondering is if there’s any way that I can either make my test log in so that it passes the authorization filter, or if there’s any way that I can pass as ASPXAUTH cookie along with the HttpClient request? Or another way of passing authorization that I haven’t thought of?</p>\n\n<p>Nothing I’ve tried seems to work and I’m struggling to find any helpful info anywhere.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","wpf","unit-testing","mvvm","mvvm-light"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":194,"score":2,"question_id":12332123,"title":"WPF MVVM Light unit testing ViewModels","body":"<p>I am not a regular with the MVVM pattern and this is basically my first time playing with it.</p>\n\n<p>What I used to do (\"normal\" WPF), was creating my Views with a Business layer and perhaps a datalayer (which usually contains my entities created by a service or the Entity Framework).</p>\n\n<p>Now after some toying I created a standard template from MVVM Light and did this:</p>\n\n<p>Locator:</p>\n\n<pre><code>public class ViewModelLocator\n{\n    static ViewModelLocator()\n    {\n        ServiceLocator.SetLocatorProvider(() =&gt; SimpleIoc.Default);\n\n        if (ViewModelBase.IsInDesignModeStatic)\n        {\n            SimpleIoc.Default.Register&lt;IUserService, DesignUserService&gt;();\n        }\n        else\n        {\n            SimpleIoc.Default.Register&lt;IUserService, IUserService&gt;();\n        }\n\n        SimpleIoc.Default.Register&lt;LoginViewModel&gt;();\n    }\n\n    public LoginViewModel Login\n    {\n        get\n        {\n            return ServiceLocator.Current.GetInstance&lt;LoginViewModel&gt;();\n        }\n    }\n}\n</code></pre>\n\n<p>Login ViewModel:</p>\n\n<pre><code>public class LoginViewModel : ViewModelBase\n{\n    private readonly IUserService _userService;\n\n    public RelayCommand&lt;Object&gt; LoginCommand\n    {\n        get\n        {\n            return new RelayCommand&lt;Object&gt;(Login);\n        }\n    }\n\n    private string _userName;\n    public String UserName\n    {\n        get { return _userName; }\n        set\n        {\n            if (value == _userName)\n                return;\n\n            _userName = value;\n            RaisePropertyChanged(\"UserName\");\n        }\n    }\n\n    /// &lt;summary&gt;\n    /// Initializes a new instance of the LoginViewModel class.\n    /// &lt;/summary&gt;\n    public LoginViewModel(IUserService userService)\n    {\n        _userService = userService;\n\n        _closing = true;\n    }\n\n    private void Login(Object passwordBoxObject)\n    {\n        PasswordBox passwordBox = passwordBoxObject as PasswordBox;\n        if (passwordBox == null)\n            throw new Exception(\"PasswordBox is null\");\n\n        _userService.Login(UserName, passwordBox.SecurePassword, result =&gt;\n        {\n            if (!result)\n            {\n                MessageBox.Show(\"Wrong username or password\");\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>Binding and commands work fine so there is no questions. Business mockup class for design and test time:</p>\n\n<pre><code>public class DesignUserService : IUserService\n{\n    private readonly User _testUser;\n    private readonly IList&lt;User&gt; _users;\n\n    public void Login(String userName, SecureString password, Action&lt;Boolean&gt; callback)\n    {\n        var user = _users.FirstOrDefault(u =&gt; u.UserName.ToLower() == userName.ToLower());\n\n        if (user == null)\n        {\n            callback(false);\n            return;\n        }\n\n        String rawPassword = Security.ComputeHashString(password, user.Salt);\n        if (rawPassword != user.Password)\n        {\n            callback(false);\n            return;\n        }\n\n        callback(true);\n    }\n\n    public DesignUserService()\n    {\n        _testUser = new User\n        {\n            UserName = \"testuser\",\n            Password = \"123123\",\n            Salt = \"123123\"\n        };\n\n        _users = new List&lt;User&gt;\n        {\n            _testUser\n        };\n    }\n}\n</code></pre>\n\n<p>UserData is a static class which makes calls to the database (Entity Framework).</p>\n\n<p>Now I have my test:</p>\n\n<pre><code>[TestClass]\npublic class Login\n{\n    [TestMethod]\n    public void IncorrectUsernameCorrectPassword()\n    {\n        IUserService userService = new DesignUserService();\n\n        PasswordBox passwordBox = new PasswordBox\n        {\n            Password = \"password\"\n        };\n        userService.Login(\"nonexistingusername\", passwordBox.SecurePassword, b =&gt; Assert.AreEqual(b, false));\n    }\n}\n</code></pre>\n\n<p>Now my test is not on the ViewModel itself but directly to the Business layer.</p>\n\n<p>Basically I have 2 questions:</p>\n\n<ul>\n<li><p>Am I on the right path, or is there a fundamental flaw in my pattern implementation?</p></li>\n<li><p>How can I test my ViewModel?</p></li>\n</ul>\n"},{"tags":["javascript","unit-testing","jasmine","phantomjs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":229,"score":1,"question_id":12187669,"title":"How do I reliably execute Jasmine tests that utilize requirejs via phantomjs?","body":"<p>I am using phantomjs to run jasmine test. My jasmine tests are using require around the describe blocks to ensure all the right modules are loaded.</p>\n\n<p>My tests would not run because <code>page.evaluate -&gt; jasmine.getEnv().execute();</code> runs BEFORE requirejs finishes loading the modules.</p>\n\n<p>I was wondering if anyone knows a real good way around this. I have an answer I'm going to post below but would love to compare notes via other answers. If yours is better, I will def pick it as answer obviously :)</p>\n"},{"tags":["c#","unit-testing","xunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":12338962,"title":"What is the best way to test multiple derived types using Xunit?","body":"<p>I have a interface <code>IFoo</code></p>\n\n<pre><code>public interface IFoo\n{\n    void DoSomeStuff();\n}\n</code></pre>\n\n<p>And I have two derived types <code>FooImpl1</code> and <code>FooImpl2</code>:</p>\n\n<pre><code>public class FooImpl1 : IFoo\n{\n    public void DoSomeStuff()\n    {\n        //...\n    }\n}\n\npublic class FooImpl2 : IFoo\n{\n    public void DoSomeStuff()\n    {\n        //Should do EXACTLY the same job than FooImpl1.DoSomeStuff()\n    }\n}\n</code></pre>\n\n<p>I have a test class wich tests <code>IFoo</code> contract of <code>FooImpl1</code> :</p>\n\n<pre><code>    private static IFoo FooFactory()\n    {\n        return new FooImpl1();\n    }\n\n    [Fact]\n    public void TestDoSomeStuff()\n    {\n        IFoo foo = FooFactory();\n\n        //Assertions.\n    }\n</code></pre>\n\n<p>How can I reuse this test class to test both <code>FooImpl1</code> and <code>FooImpl2</code>?</p>\n\n<p>Thank you</p>\n"},{"tags":["unit-testing","junit","nunit","testcase","testcaseattribute"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":394,"score":3,"question_id":4554128,"title":"Is there a JUnit equivalent to NUnit's testcase attribute?","body":"<p>I've googled for JUnit test case, and it comes up with something that looks a lot more complicated to implement - where you have to create a new class that extends test case which you then call:</p>\n\n<pre><code>public class MathTest extends TestCase {\n    protected double fValue1;\n    protected double fValue2;\n\n    protected void setUp() {\n       fValue1= 2.0;\n       fValue2= 3.0;\n    }\n }\n\npublic void testAdd() {\n   double result= fValue1 + fValue2;\n   assertTrue(result == 5.0);\n}\n</code></pre>\n\n<p>but what I want is something really simple, like the NUnit test cases</p>\n\n<pre><code>[TestCase(1,2)]\n[TestCase(3,4)]\npublic void testAdd(int fValue1, int fValue2)\n{\n    double result= fValue1 + fValue2;\n    assertIsTrue(result == 5.0);\n}\n</code></pre>\n\n<p>Is there any way to do this in JUnit?</p>\n"},{"tags":["unit-testing","internationalization","sinatra"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12335676,"title":"Accessing 't' (from r18n) in a rack-unit test of a Sinatra app","body":"<p>When using <code>sinatra-r18n</code> to handle internationalisation, the <code>r18n</code> lib exposes a variable <code>t</code> for use within your helpers, routes and templates, as per <a href=\"https://github.com/ai/r18n/tree/master/sinatra-r18n\" rel=\"nofollow\">these instructions</a>.</p>\n\n<p>I have written a simple unit test using <code>rack-unit</code> to confirm that some of my pluralisations work but the test throws an error claiming <code>t</code> is nil.</p>\n\n<p>I've tried referencing it via <code>app.t</code>, <code>MySillyApp.t</code> (where MySillyApp is the name of my Sinatra app), <code>MySillyApp.settings.t</code> etc and none of them give me access to the <code>t</code> I need.</p>\n\n<p>What I am trying to achieve is a confirmation that my translation files include all the keys I need corresponding to plurals of various metric units my app needs to understand. Perhaps there is a more direct way of testing this without going via the Sinatra app itself. I'd welcome any insight here.</p>\n"},{"tags":["unit-testing","cakephp","netbeans","phpunit","xdebug"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":96,"score":2,"question_id":12301185,"title":"Custom PHPUnit Test Command in Netbeans","body":"<p>I am trying to get Code coverage highlighting working in Netbeans with my CakePHP project.</p>\n\n<p>To run tests normally in CakePHP you execute the cake CLI tool like so:</p>\n\n<pre><code>cake test app AllModels\n</code></pre>\n\n<p>This command accepts all the normal phpunit parameters like <code>--coverage-clover</code> etc. \nWhen ran, this command executes <code>Test/AllModelsTest.php</code> which contains a <code>AllModelsTest</code> which extends <code>PHPUnit_Framework_TestSuite</code>. Obviously by using the <code>cake</code> command, all prerequisites of the application are automatically loaded by Cake. This works completely fine from CLI and even from the web interface.</p>\n\n<p>The problem with running the unit tests from Netbeans, It seems the default behaviour in Netbeans is to pass the file directly to the PHPUnit command, which is failing as the first line of my test is a CakePHP method to autoload the model I'm testing: <code>App::uses('Inventory', 'Model');</code> - I've tried including the Model myself but then that itself extends another model and none of it is autoloading on its own.</p>\n\n<p><strong>Is there a way to adjust the command that Netbeans executes tests with?</strong></p>\n"},{"tags":["java","eclipse","unit-testing","junit","noclassdeffounderror"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12311263,"title":"Running Junit tests in Eclipse, constantly getting \"NoClassDefFoundError\"","body":"<p>I added a new test class. And tried to run it, but got the no class def found error.\nBut other test classes work fine.\nAnd I am sure the new test class is compiled, its .class file is in the right folder.</p>\n"},{"tags":["perl","unit-testing","mojolicious"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12328455,"title":"How to test for a redirect in Mojolicious?","body":"<p>I want to test a page with a form which, when submitted, will redirect to the resulting page for the submitted item.</p>\n\n<p>My Mojolicious controller contains:</p>\n\n<pre><code>sub submit_new {\n    my $self = shift;\n\n    my $new = $self-&gt;db-&gt;resultset('Item')-&gt;new( {\n        title       =&gt; $self-&gt;param('title'),\n        description =&gt; $self-&gt;param('description'),\n    } );\n    $new-&gt;insert;\n\n    # show the newly submitted item\n    my $id = $new-&gt;id;\n    $self-&gt;redirect_to(\"/items/$id\");\n}\n</code></pre>\n\n<p>The test script for this controller contains:</p>\n\n<pre><code>use Test::More;\nuse Test::Mojo;\n\nmy $t = Test::Mojo-&gt;new('MyApp');\n\nmy $tx = $t-&gt;ua-&gt;build_form_tx('/items/new/submit' =&gt; $data);\n$tx-&gt;req-&gt;method('POST');\n$t-&gt;tx( $t-&gt;ua-&gt;start($tx) )\n  -&gt;status_is(302);\n</code></pre>\n\n<p>My issue is that it stops with the <code>302</code> status. How do I proceed with the redirect so I can verify the resulting item page?</p>\n"},{"tags":["php","unit-testing","code-coverage","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":631,"score":2,"question_id":3586959,"title":"PHPUnit code coverage not working with configuration","body":"<p>I have my PHPUnit setup and coverage report working fine without a white list filter. Once I add one however, the report seems to only partially generate as if PHPUnit quit unexpectedly. I do not get any errors or warnings.</p>\n\n<p>My configuratoon looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;phpunit bootstrap=\"./bootstrap.php\"\n         colors=\"true\"&gt;\n    &lt;testsuites&gt;\n        &lt;testsuite name=\"...\"&gt;\n            &lt;testsuite name=\"...\"&gt;\n                &lt;directory&gt;./path/to/suite&lt;/directory&gt;\n            &lt;/testsuite&gt;\n            &lt;testsuite name=\"...\"&gt;\n                &lt;directory&gt;./path/to/suite2&lt;/directory&gt;\n            &lt;/testsuite&gt;\n            &lt;testsuite name=\"...\"&gt;\n                &lt;directory&gt;./path/to/suite3&lt;/directory&gt;\n            &lt;/testsuite&gt;\n        &lt;/testsuite&gt;\n    &lt;/testsuites&gt;\n\n    &lt;filter&gt;\n        &lt;whitelist&gt;\n            &lt;directory suffix=\".php\"&gt;../path/to/files&lt;/directory&gt;\n        &lt;/whitelist&gt;\n    &lt;/filter&gt;\n\n    &lt;logging&gt;\n        &lt;log type=\"coverage-html\" target=\"log/\" charset=\"UTF-8\" yui=\"true\" /&gt;\n    &lt;/logging&gt;\n&lt;/phpunit&gt;\n</code></pre>\n\n<p>Any idea on what could be going wrong?</p>\n"},{"tags":["android","unit-testing","junit"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":539,"score":1,"question_id":7002843,"title":"How to create Mock objects for Android Activities (Junit)","body":"<p>I am fairly new to unit testing, in android specifically.  I have written an application with numerous activities.  However, some of these activities rely on certain objects for them to populate the activity's views.  I guess my question is: Is there a way I can mock up the objects within the Activity and make the activity use that created mock object from my Junit tests?  Thanks in advance, I cant find the solution for this anywhere?</p>\n"},{"tags":["c#","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12316454,"title":"Passing parameters to built unit test DLL via console","body":"<p>Is it possible to pass parameters to a Microsoft unit test DLL via the console? I want to do this as I have a thousands of test cases stored in XML, I dont want to include the XML files as a resource in the visual studio project as I dont want to have to recompile the test solution every time we want to modify the test data. I am using VS 2010 and MSUnit testing framework.</p>\n"},{"tags":["unit-testing","setup","robolectric"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":9901039,"title":"How do I set up Robolectric in IntelliJ?","body":"<p>I know there are instructions <a href=\"http://pivotal.github.com/robolectric/intellij-quick-start.html\" rel=\"nofollow\">here</a>, but they are not clear to me at all. I have an existing project that's built using ANT, so I'm not Mavenized, and I'm not starting from scratch. An awesome tutorial with screenshots would be great, as I'm sure I'm not the only one who has had problems with this.</p>\n"},{"tags":["unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":11020567,"title":"PHPUnit: How to override and test a dependent method","body":"<p>I am trying to use PHPUnit to write a test on a method of a class, Mail. The method I am testing is saveMessage( $arguments).  saveMessage, in addition to saving, may also call a class method, <code>$this-&gt;emailMessage( $arguments )</code>. I'd like to write a test that tests saveMessage, and tests that emailMessage is correctly called (with the correct arguments), but does NOT call the actual emailMessage method.</p>\n\n<p>One way I could do it would be to subclass Mail, and override the emailMessage method. A more appealing way would be to Mock the Messages class, and override the emailMessage method, while testing the saveMessage method in the mocked object. However, then I would be testing the Mocked object itself; I've read that that is a bad idea, but I'm not entirely sure why, in this case. Is it safe to use a mock object for this purpose? Is there a better way to handle this?</p>\n"},{"tags":["python","unit-testing","nosetests"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":12323534,"title":"nosetest - get list of failed tests (without extra output)","body":"<p>Is it possible to have nose output only the <em>name</em> of the tests that fail to get a simple and compact list of failed tests?</p>\n\n<p>I have figured out how to discard the captured stdout:</p>\n\n<pre><code>nosetests -s\n</code></pre>\n\n<p>but the assertion that fails is still printed (for example, assertEqual prints both the expected &amp; actual values).  Ideally I just want to know the file and line that failed.</p>\n"},{"tags":["ruby-on-rails","ruby","ruby-on-rails-3","unit-testing","assertions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":238,"score":0,"question_id":8260796,"title":"How to extend Ruby Test::Unit assertions to include assert_false?","body":"<p>Apparently there is no <code>assert_false</code> in Test::Unit. How would you add it by extending assertions and adding the file <code>config/initializers/assertions_helper.rb</code>? </p>\n\n<p>Is this the best way to do it? I don't want to modify <code>test/unit/assertions.rb</code>.</p>\n\n<p>By the way, I don't think it is redundant. I was using <code>assert_equal false, something_to_evaluate</code>. The problem with this approach is that it is easy to accidentally use <code>assert false, something_to_evaluate</code>. This will always fail, doesn't throw an error or warning, and invites bugs into the tests.</p>\n"},{"tags":["c","eclipse","unit-testing"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12314728,"title":"Eclipse Add-on for unit testing in C","body":"<p>I know there is a Eclipse add-on for junit testing available. That bring up a question, is there also a tool for C unit testing available?</p>\n"},{"tags":["java","unit-testing","junit4","junit3"],"answer_count":2,"favorite_count":7,"up_vote_count":13,"down_vote_count":0,"view_count":4464,"score":13,"question_id":3089151,"title":"Specifying an order to junit 4 tests at the Method level (not class level)","body":"<p>I know this is bad practice, but it needs to be done, or I'll need to switch to testng. Is there a way, similar to JUnit 3's testSuite, to specify the order of the tests to be run in a class?</p>\n\n<p>Thanks for the help!</p>\n"},{"tags":["visual-studio","unit-testing","nunit"],"answer_count":11,"favorite_count":20,"up_vote_count":36,"down_vote_count":0,"view_count":11420,"score":36,"question_id":247900,"title":"Is there a free Visual Studio addin for Nunit?","body":"<p>I'm cheap and don't want to pay for ReSharper or TestDriven.NET, is there a free visual Studio addin for NUnit?</p>\n"},{"tags":["javascript","unit-testing","architecture","directory-structure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12319105,"title":"Where to put unit tests helper source files in my directory structure","body":"<p>I have the following directory structure in a javascript project</p>\n\n<pre><code>/src\n/test\n</code></pre>\n\n<p>The test directory is an image of src directory, where each file of the first has a related test file in the second. However I have some common helper source files that are used by the files under test directory in order to perform testing.</p>\n\n<p>Where should I put them? under test or src dir, or should I create another dir? I know it might be a matter of preference, just asking for best practices.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12318947,"title":"unit test for method that use other methods","body":"<p>I'm new to unit test and confusing how write unit test method like this:</p>\n\n<pre><code>public Boolean BeepInTime(Interfaces.IDateTime time,TimeSpan beepTime)\n{\n    Interfaces.IBeep beep= new Beep();\n    var h = time.GetTime();\n    if (h == beepTime)\n    {\n       return beep.Beeping();\n    }\n    else\n    {\n       return false;\n    }\n}\n\npublic Boolean Beeping()\n{\n    try\n    {\n      SystemSounds.Beep.Play();\n      return true;\n    }\n    catch\n    {\n      return false;\n    }\n}\n</code></pre>\n\n<p>When testing <code>BeepInTime</code> , I'd like (<code>beep.Beeping()</code>) not running. I read about stub and think in this case I should use stub but it is confusing about how to do this. \nCould you send some source with simple example about stub.</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":163,"score":7,"question_id":12277390,"title":"Does my unit test care about too much","body":"<p>I have 2 concerns about my unit test method:</p>\n\n<ol>\n<li>Do I test too much in one test method?</li>\n<li>How can my test method name reflect all test expectations?</li>\n</ol>\n\n<p>I asked myself when my method name says: <code>ReturnInvalidModelState</code>, then my 2 other <code>Asserts</code> are not correct. At least concerning the method name...</p>\n\n<pre><code>[Test]\npublic void Create_TemplateAlreadyExists_ReturnInvalidModelState()\n{\n    // ARRANGE\n    TemplateViewModel templateViewModel = new TemplateViewModel { \n        Name = \"MyTest\" \n    };\n\n    Mock&lt;ITemplateDataProvider&gt; mock1 = new Mock&lt;ITemplateDataProvider&gt;();\n    Mock&lt;IMappingEngine&gt; mock2 = new Mock&lt;IMappingEngine&gt;();\n\n    TemplateController controller = \n        new TemplateController(mock1.Object, mock2.Object);\n    mock1.Setup(m =&gt; m.TemplateExists(\"MyTest\")).Returns(true);\n    // Set ModelState.IsValid to false\n    controller.ModelState.AddModelError(\"Name\", \n                                        \"This name already exists.\");\n\n    // ACT\n    ActionResult result = controller.Create(templateViewModel);\n\n    // ASSERT\n    Assert.IsFalse(controller.ModelState.IsValid);\n    Assert.IsInstanceOfType(typeof(PartialViewResult), result);\n    Assert.AreEqual(templateViewModel, ((PartialViewResult)result).Model);\n}\n\n[HttpPost]\npublic ActionResult Create(TemplateViewModel templateViewModel)\n{\n    if (ModelState.IsValid\n        &amp;&amp; !_templateDataProvider.TemplateExists(templateViewModel.Name))\n    {\n\n        Template template = \n            Mapper.Map&lt;TemplateViewModel, Template&gt;(templateViewModel);\n\n        _templateDataProvider.AddTemplate(template);\n        return new JsonNetResult(new { success = true });\n    }\n    ModelState.AddModelError(\"Name\", \"This name already exists.\");\n    return PartialView(templateViewModel);\n}\n</code></pre>\n"},{"tags":["unit-testing","r","continuous-integration","hudson","jenkins"],"answer_count":3,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":355,"score":6,"question_id":7002764,"title":"Continuous Integration (Hudson/Jenkins) and R Programming","body":"<p>Does anyone know of a way to do continuous integration with R programming?  I'm aware of tools like the svUnit package to do the unit tests, but has anyone tried to run these with Hudson/Jenkins?  </p>\n"},{"tags":["unit-testing","tdd","qunit"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12306767,"title":"TDD duplicate assertions","body":"<p>The consensus seems to be not to test private methods when doing TDD.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/5601730/tdd-should-private-protected-methods-be-under-unit-test\">TDD - Should Private/Protected methods be under unit test?</a></p>\n\n<p>I keep hitting this same scenario.  I have a private method (as an example it switches all options to off).  It changes lots of state and is called by a few public methods.  The changes that the private method makes to the state will remain the same regardless of which public methods get called (all options get set to off).</p>\n\n<p>What's the best way to test the functionality of this private method without adding many tests that effectively do the same thing?</p>\n\n<p>btw, I'm using QUnit to test Javascript objects.</p>\n\n<p>Here is an overly simplified version of my class.</p>\n\n<p><a href=\"http://jsfiddle.net/twistedinferno/UMgAx/\" rel=\"nofollow\">http://jsfiddle.net/twistedinferno/UMgAx/</a></p>\n\n<p><strong>Edit</strong></p>\n\n<p>What I'm really trying ask here is not 'should I or shouldnt I test private methods' as that has already been answered and the answer to that is no.  I want to know how do I best test each public method bearing in mind that many of the assertions will be the same due to the use of my private method.  The same private method gets called by many public methods. Is it ok to have a lot of duplicate assertions to test the change of state that occurs when each one of many public methods call my private method?</p>\n\n<p>new fiddle with tests\n<a href=\"http://jsfiddle.net/twistedinferno/JHzWh/\" rel=\"nofollow\">http://jsfiddle.net/twistedinferno/JHzWh/</a></p>\n"},{"tags":["android","unit-testing","easymock"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":200,"score":4,"question_id":8834086,"title":"Unit test private functions in Android","body":"<p>Can we do unit testing of private functions and fields for Android Application using Android Mock ?</p>\n\n<p>If yes, please explain how ?</p>\n"},{"tags":["python","unit-testing","fixtures"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12316096,"title":"unittest housekeeping in python","body":"<p>I've got a <code>unittest</code> test file containing four test classes each of which is responsible for running tests on one specific class. Each test class makes us of exactly the same <code>set-up</code> and <code>teardown</code> methods. The <code>set-up</code> method is relatively large, initiating about 20 different variables, while the <code>teardown</code> method simply resets these twenty variables to their initial state. </p>\n\n<p>Up to now I have been putting the twenty variables in each of the four setUp classes. This works, but is not very easily maintained; if I decide to change one variable, I must change it in all four setUp methods. My search for a more elegant solution has failed however. Ideally I'd just like to enter my twenty variables once, call them up in each of my four <code>setup</code> methods, then tear them down after each of my test methods. With this end in mind I tried putting the variables in a separate module and importing this in each setUp, but of course the variables are then only available in the setup method (plus, though I couldn't put my finger on the exact reasons, this felt like a potentially problem-prone way of doing it</p>\n\n<pre><code>from unittest import TestCase\n\nclass Test_Books(TestCase):\n    def setup():\n        # a quick and easy way of making my variables available at the class level\n        # without typing them all in\n\n    def test_method_1(self):\n        # setup variables available here in their original state\n        # ... mess about with the variables ...\n        # reset variables to original state\n\n    def test_method_2(self):\n        # setup variables available here in their original state\n        # etc...\n\n    def teardown(self):\n        # reset variables to original state without having to type them all in\n\n\n\nclass Books():\n    def method_1(self):\n        pass\n\n    def method_2(self):\n        pass\n</code></pre>\n"},{"tags":["java","spring","hibernate","unit-testing","jpa"],"answer_count":2,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":94,"score":3,"question_id":11999825,"title":"@Transactional in unit test prevents @PostLoad from being invoked","body":"<p>I have the following test:</p>\n\n<pre><code>public class Book\n{\n     public boolean postLoadInvoked;\n     @PostLoad\n     private void onPostLoad()\n     {\n         postLoadInvoked = true;\n     }\n}\n\npublic class MyIntegrationTest extends AbstractIntegrationTest\n{\n     @Autowired\n     private BookDAO bookDAO;\n\n     @Test\n     public void loadBooks()\n     {\n          Book book = bookDAO.findOne(...);\n          assertTrue(book.postLoadInvoked);\n     }  \n}\n</code></pre>\n\n<p>This test passes as-is, but if I add the <code>@Transactional</code> annotations to the test class, it fails:</p>\n\n<pre><code>@Transactional\n@TransactionConfiguration(defaultRollback=true)\npublic class MyIntegrationTest extends AbstractIntegrationTest\n</code></pre>\n\n<p>Why does configuring the test with <code>@Transactional</code> affect the JPA callback methods?</p>\n\n<p><em><strong>EDIT</em></strong></p>\n\n<p>The DAO is just a Spring Data repository, so has no logic:</p>\n\n<pre><code>public interface BookDAO extends\n   JpaRepository&lt;Book, Long&gt;, \n   QueryDslPredicateExecutor&lt;Book&gt; {}\n</code></pre>\n\n<p>The transaction manager also has a standard configuration:</p>\n\n<pre><code>&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n    &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\" /&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"entityManagerFactory\"\n    class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"packagesToScan\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;com.mangofactory.example&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"persistenceUnitName\" value=\"spring-test\" /&gt;\n    &lt;property name=\"jpaVendorAdapter\"&gt;\n        &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n            &lt;property name=\"showSql\" value=\"true\" /&gt;\n            &lt;property name=\"generateDdl\" value=\"true\" /&gt;\n            &lt;property name=\"databasePlatform\" value=\"org.hibernate.dialect.H2Dialect\" /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"dataSource\"\n    class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"org.h2.Driver\" /&gt;\n    &lt;property name=\"url\" value=\"jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["python","unit-testing","mocking","decorator"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12315173,"title":"How to use python mock library and decorator with unittest lib?","body":"<p>I am trying to use mock python library, and decided to use a decorator to hide a few repetitive operations for setting mock side_effect vars with corresponding replacement methods.</p>\n\n<p>So far I have the following code, which does not enter the tests, it basically does nothing. Any ideas on how to fix this? Thanks!</p>\n\n<pre><code>import unittest\nfrom mock import patch\n\n# Replacement method for requests.get call\ndef mock_requests_get(url=None, **kwargs):\n    if url == URL1:\n        return {'url':url, 'status_code':200, 'status':'success'}\n\n    if url == URL2: A\n        return {'url':url, 'status_code':403}\n\n# Replacement method for requests.post call\ndef mock_requests_post(url, data=None, **kwargs):\n    if url == URL1 and data['data']=='go':\n        return {'url':url, 'status_code':200, 'status':'success'}\n\n    if url == URL2 and data['data']!='gogo':\n        return {'url':url, 'status_code':403}\n\n# Decorator which sets mock replacement methods\ndef mock_type(method=''):\n    def _mock(func):\n        def _decorator(mock_get, mock_post, *args, **kwargs):\n            print method\n            if method == 'GET':\n                mock_get.side_effect = mock_requests_get\n            if method == 'POST':\n                mock_post.side_effect = mock_requests_post\n            func(mock_get, mock_post, *args, **kwargs)\n        return _decorator\n    return _mock\n\n@patch('requests.post')\n@patch('requests.get')\nclass TestKeywordsApi(unittest.TestCase):\n\n    def setUp(self):\n        self.ka = KeywordsApi()\n\n    @mock_type('GET')\n    def test_get(self, mock_get, mock_post):\n        # Replace this code in mock_type decorator:\n        #mock_get.side_effect=mock_requests_get\n\n        print self.ka.get(URL1)\n        print self.ka.get(URL2)\n\n        # Do asserts\n\n    @mock_type('POST')\n    def test_post(self, mock_get, mock_post):\n        # Replace this code in mock_type decorator:\n        #mock_post.side_effect=mock_requests_post\n\n        print self.ka.post(URL1, {'data':'go'})\n        print self.ka.post(URL2, {'data':'go'})\n\n        # Do asserts\n</code></pre>\n"},{"tags":["c#","unit-testing","entity-framework-4","database-connection","system.data.sqlite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12314125,"title":"Instantiating an empty Entity Model without a DB connection for Unit Testing purposes","body":"<p>I want to write some unit tests for a method. However, the method references my entity framework. Here is a heavily contrived example of the method I want to test:</p>\n\n<pre><code>public int GetNumberWithName(string name, NWRevalDatabaseEntities entities)\n{\n    int number = (from n in entities.TableOfNumbers\n                    where n.Name == name\n                    select n).First();\n\n    return number;\n}\n</code></pre>\n\n<p><strong>The question:</strong></p>\n\n<p>Is there a way for me to instantiate a <code>NWRevalDatabaseEntities</code> object in my testing class <strong>without giving it a viable database connection</strong>, so all the tables are empty, and then just inserting the entities needed for the test, and never persisting them to a database?</p>\n\n<p>The store for <code>NWRevalDatabaseEntities</code> is a SQLite database, and the auto generated constructors available are:</p>\n\n<pre><code>/// &lt;summary&gt;\n/// Initializes a new NWRevalDatabaseEntities object using the connection string found in the 'NWRevalDatabaseEntities' section of the application configuration file.\n/// &lt;/summary&gt;\npublic NWRevalDatabaseEntities() : base(\"name=NWRevalDatabaseEntities\", \"NWRevalDatabaseEntities\")\n{\n    this.ContextOptions.LazyLoadingEnabled = true;\n    OnContextCreated();\n}\n\n/// &lt;summary&gt;\n/// Initialize a new NWRevalDatabaseEntities object.\n/// &lt;/summary&gt;\npublic NWRevalDatabaseEntities(string connectionString) : base(connectionString, \"NWRevalDatabaseEntities\")\n{\n    this.ContextOptions.LazyLoadingEnabled = true;\n    OnContextCreated();\n}\n\n/// &lt;summary&gt;\n/// Initialize a new NWRevalDatabaseEntities object.\n/// &lt;/summary&gt;\npublic NWRevalDatabaseEntities(EntityConnection connection) : base(connection, \"NWRevalDatabaseEntities\")\n{\n    this.ContextOptions.LazyLoadingEnabled = true;\n    OnContextCreated();\n}\n</code></pre>\n\n<p>All of which require a connection or connection string (or uses the stored connection string).</p>\n\n<p>If this is not possible, I will look into creating an in-memory SQLite database and then feed that connection to the <code>NWRevalDatabaseEntities</code> constructor. However, this seems like it would be much slower (since it hits the database engine) and unit testing should be fast, and also, will require me to get the database definition code into my application, where it was not previously needed.</p>\n\n<p>I know testing anything with entity frameworks usually go to integration testing, not unit testing. However, these tests don't really test integration - the database query is incredibly simplistic and might as well have been against an array - I just want to check that the right selection of query is made by my method.</p>\n"},{"tags":["c#","entity-framework","unit-testing","mocking","moq"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12314704,"title":"unit Testing EF DbUpdateConcurrencyException handling","body":"<p>I need help testing the following code</p>\n\n<pre><code>public virtual void Update(T entity)\n    {\n        if (entity == null)\n        {\n            throw new ArgumentNullException(\"entity\");\n        }\n\n        int iretries = 0;\n        bool success = false;\n\n        do\n        {\n            try\n            {\n                this.context.SaveChanges();\n                success = true;\n            }\n            catch (DbUpdateConcurrencyException ex)\n            {\n                // Get the current entity values and the values in the database\n                // as instances of the entity type\n                var entry = ex.Entries.Single();\n                var databaseValues = entry.GetDatabaseValues();\n\n                // Choose an initial set of resolved values. In this case we\n                // make the default be the values currently in the database: StoreWins\n                object resolvedValues = ResolveConcurrency(databaseValues.ToObject());\n\n                // Update the original values with the database values and\n                // the current values with whatever the user choose.\n                entry.OriginalValues.SetValues(databaseValues);\n                entry.CurrentValues.SetValues(resolvedValues);\n\n                // give up after n retries\n                if (++iretries == NUMBER_OF_CONC_RETRIES)\n                    throw;\n            }\n            catch (Exception)\n            {\n                //rethrow \n                throw;\n            }\n        } while (!success);\n    }\n</code></pre>\n\n<p>I want to unit test the <code>DbUpdateConcurrencyException</code> branch.</p>\n\n<p>So, one simple test scenario would be:</p>\n\n<ul>\n<li>Creating a new <code>DbUpdateConcurrencyException</code></li>\n<li>Mock the <code>SaveChanges</code> to throw the above exception</li>\n<li>Verify that <code>SaveChanges</code> was called a number of <code>NUMBER_OF_CONC_RETRIES</code></li>\n<li>Assert that the <code>Update</code> method re-throws the exception</li>\n</ul>\n\n<p>In the current state, the above test scenario cannot be tested, I cannot mock the exception to contain a <code>IEnumerable&lt;DbEntityEntry&gt;</code> with a single <code>DbEntityEntry</code>; I cannot mock the <code>GetDatabaseValues()</code>, etc.</p>\n\n<p>A simple solution would be to insert a new layer of abstraction; let's say using an interface to abstract the entire code that currently sits in the catch block, and to provide a mock that does nothing.</p>\n\n<p>But then I would end up in the situation when I would want to test the implementation of that interface, and would end up having the same questions as above. How can I mock the <code>DbUpdateConcurrencyException</code>, the <code>GetDatabaseValues</code>, etc.</p>\n\n<p>I am using moq for mocking.</p>\n\n<p>Thank you for your input</p>\n"},{"tags":["javascript","unit-testing","qunit","jscoverage"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12314979,"title":"How should I gauge unit test coverage for JS ? I can't be satisfied with jscoverage","body":"<p>I wanna gauge unit test coverage for Javascript.</p>\n\n<p>jscoverage is one of the most useful tool.\nHowever, jscoverage can only gauges which the code pass or not on unit test.\nI wanna gauge coverage including logic.</p>\n\n<p>How should I gauge unit test coverage for JS ?</p>\n"},{"tags":["silverlight","unit-testing","visual-studio-lightswitch"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":119,"score":3,"question_id":8335685,"title":"Unit Testing in Lightswitch","body":"<p>I'm thinking of running unit tests for the business logic in the Lightswitch application. I've added a Silverlight unit test project (from the Silverlight Toolkit), however I couldn't retrieve the code from Lightswitch to write tests on.</p>\n\n<p>Or is there really no way and the best way is to move the code out to another Silverlight class library?</p>\n"},{"tags":["c#","unit-testing","mocking","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12311115,"title":"How to mocking method that calling static class using moq.mock in c#","body":"<p>Say that I have the following code:</p>\n\n<pre><code>public class NumberClass\n{\n    public NumberClass()\n    {\n        DefaultNumber = 1;\n    }\n    public int DefaultNumber{set;get;}\n}\n\npublic static class NumberSetup\n{\n    public static NumberClass GetDefaultNumber()\n    {\n        return new NumberClass();\n    }\n}\n\npublic class NumberSetupImplementation\n{\n    int FinalNumber;\n    public void IncreaseNumber(int currentNumber)\n    {\n        FinalNumber = currentNumber + NumberSetup.GetDefaultNumber().DefaultNumber;\n    }\n}\n</code></pre>\n\n<p>I want to test method <code>NumberSetupImplementation.IncreaseNumber</code> using moq.mock in c#.net, the problem I face is that the method is calling static method.</p>\n\n<p>I have read <a href=\"http://stackoverflow.com/questions/2416362/mock-static-property-with-moq\">this</a>, but I don't know how to implement it in my case</p>\n"},{"tags":["java","unit-testing","interface","junit","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12311082,"title":"Difficulty Unit Testing a Factory with Interface","body":"<p>I have been pushing myself to learn more and more Unit Testing techniques as of late and ran into something I just can't figure out- namely, how to even get started. I am trying to unit test a factory with a very, very simple single method. I have simplified it using example names for you helpful folks.</p>\n\n<pre><code>public class HandlerFactory extends SecondHandlerFactory\n{\n    //To hold singleton of this class.\n    private static SecondHandler factoryInstance = null;\n\n    private HandlerFactory() throws HandlerCreationException\n    {\n            super();\n    }\n\n    protected InterfaceExample createSomethingByThisKey(String key) throws HandlerCreationException\n    {\n        InterfaceExample myNewHandler = null;\n\n        if (StringFunctions.isEqualIgnoreCase(key, \"Phone\"))\n        {\n            myNewHandler = new PhoneHandler();\n        }\n    }\n}\n</code></pre>\n\n<p>I'm having major trouble figuring out to set up this test to even fall into the createSomethingByKey(). Even then, I can't even figure out how I would do my assertEquals() method correctly.</p>\n\n<p>Right now, I have stuff set up to to do a createInstance(); but nothing seems to make any sense to me in how to fall into this. The added variable and interfaces are making me hella confused here. It seems simple to test and is a very, very short class- but not being exposed to this (Java isn't even my first language) is kind of a hard wall for me to get over).</p>\n\n<p>Any help on how to set up either a standard JUnit or Mockito (doesn't matter really) on how to set all this up? Also the fact that's protected is making me even more clueless since proper standard is to have Unit Tests in another package.</p>\n"},{"tags":["unit-testing","entity-framework","mocking"],"answer_count":2,"favorite_count":4,"up_vote_count":11,"down_vote_count":0,"view_count":4956,"score":11,"question_id":710383,"title":"Mocking Entity Framework Context","body":"<p>I'm using the entity framework to access my database and I want to mock the database context inside my unit tests so that I can test my middle tier classes free of their dependency on real data. I know that I'm not the first to ask about this <a href=\"http://stackoverflow.com/questions/604191/mocking-an-entity-framework-model\">(Mocking an Entity Framework Model)</a>, but after some googling I have an instinct that it might be possible to instantiate the context based on the model's metadata alone.</p>\n\n<p>Has anyone been able to do this?</p>\n"},{"tags":["javascript","jquery","unit-testing","mocking","sinon"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":163,"score":2,"question_id":9862124,"title":"Objects mocked with Sinon.js do not acknowledge having their methods executed via a jQuery.delegate callback","body":"<p>Basically, if you mock an object using Sinon.js which has a property that's passed as callback to jQuery.delegate your mock expectations will fail when you trigger the method being observed in jQuery.delegate. If you execute the method inside of the body of an anonymous function that you use as the callback to jQUery.delegate your expectations will pass.</p>\n\n<pre>\ntest(\"FAILS: Handler is invoked as callback from jQuery delegate method directly...\", function() {\n    var Controller,\n        View,\n        $el,\n        c,\n        v,\n        mock;\n\n    Controller = function() {\n        var self = {};\n\n        self.handler = function(e) {\n            console.log(\"got handled\");\n        };\n\n        return self;\n    };\n\n    View = function($el, controller) {\n        var self = {};\n\n        self.render = function() {\n            $el.html(\"\");\n\n            $el.delegate(\"#derp\", \"keyup\", controller.handler);\n        };\n\n        return self;\n    };\n\n    $el  = jQuery(\"\");\n    c    = new Controller();\n    v    = new View($el, c);\n    mock = this.mock(c);\n\n    v.render();\n\n    mock.expects(\"handler\").once();\n\n    $el.find(\"input\").val(\"bar\").trigger(\"keyup\");\n    equal($el.find(\"input\").val(), \"bar\"); // passes!\n\n    mock.verify();\n});\n</pre>\n\n<pre>\ntest(\"WINS: Handler is invoked inside anonymous function...\", function() {\n    var Controller,\n        View,\n        $el,\n        c,\n        v,\n        mock;\n\n    Controller = function() {\n        var self = {};\n\n        self.handler = function(e) {\n            console.log(\"got handled\");\n        };\n\n        return self;\n    };\n\n    View = function($el, controller) {\n        var self = {};\n\n        self.render = function() {\n            $el.html(\"\");\n\n            $el.delegate(\"#derp\", \"keyup\", function(e) {\n                controller.handler(e);\n            });\n        };\n\n        return self;\n    };\n\n    $el  = jQuery(\"\");\n    c    = new Controller();\n    v    = new View($el, c);\n    mock = this.mock(c);\n\n    v.render();\n\n    mock.expects(\"handler\").once();\n\n    $el.find(\"input\").val(\"bar\").trigger(\"keyup\");\n    equal($el.find(\"input\").val(), \"bar\"); // passes!\n\n    mock.verify();\n});\n\n</pre>\n\n<p>Am I doing something wrong here?</p>\n\n<p>Thanks,</p>\n\n<p>Erin</p>\n"},{"tags":["javascript","jquery","unit-testing","js-test-driver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":7740980,"title":"Testing jquery thats depend on version with Js-test.driver","body":"<p>im new to js-test-driver and have some questions</p>\n\n<p>how can i test this jquery event?</p>\n\n<p>ex verify that the event runs Search() if letter > 9</p>\n\n<pre><code>$(\"#search\").live('keydown', function () {\n//start search after 10 letters\nif ($(this).val().length &gt; 9) {\n    Search();\n}});\n</code></pre>\n\n<p>Does anybody has some documentation for js-test-driver?</p>\n\n<p>How does Js-test.driver handle functionality thats depends on versions of my jquery, if run Version 1.6?</p>\n\n<p>thanks /K</p>\n"},{"tags":["c#","unit-testing","testing","tdd"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":96,"score":2,"question_id":12303740,"title":"Public methods outside of an interface in a class","body":"<p>Example:</p>\n\n<pre><code>public interface IFoo\n{\n    bool DoSomething();\n}\n\npublic class Foo:IFoo\n{\n    public bool DoSomething()\n    {\n        var result = DoOtherThing();\n        ...\n        return result;\n    }\n\n    public bool DoOtherThing()\n    {\n        ...\n    }\n}\n</code></pre>\n\n<p>My normal TDD approach would be to write unit tests on both the <code>DoSomething()</code> and <code>DoOtherThing()</code> methods. But this would be very hard to do if <code>DoOtherThing</code> was a private method. I have also read that testing private methods is a no-no.</p>\n\n<p>Is it considered acceptable to have public methods on a class in order to facilitate code coverage and testing, even if the purpose of the class is only to be accessed through its (IFoo) interface? Normally I would put methods that are outside of the scope of the interface as private methods, but this does not allow you to efficiently test all of your code. Making the method public allows you to right tests on the <code>Foo</code> class, but it doesn't seem correct, at least to me, to have public methods that aren't called from outside the class. Is this way considered best for TDD or is there a better way?</p>\n"},{"tags":["javascript","jquery","unit-testing","buster.js"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":140,"score":2,"question_id":11286839,"title":"Buster.js dependency error with jQuery: window is not defined","body":"<p>Whenever I attempt to run my unit tests (written with buster and executed user <code>buster test</code>) and include jQuery (since my library depends on it). I get the following error:</p>\n\n<p><code>./test/deps/jquery-1.7.2.min.js: window is not defined</code></p>\n\n<p>Here's my buster.js config file:\nvar config = module.exports;</p>\n\n<pre><code>config[\"GitJs Tests\"] = {\n    rootPath: \"../\",\n    environment: \"node\",\n    sources: [\n        \"src/Gitjs.js\"\n    ],\n    deps: [\n        \"test/deps/*.js\" // Jquery is in here\n    ],\n    tests: [\n        \"test/test_constructor.js\"\n    ]\n};\n</code></pre>\n\n<p>Why do I get this error and how do I fix it?</p>\n"},{"tags":["python","unit-testing","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12301061,"title":"How to mock a Python class that is two imports deep?","body":"<p>How can I mock a Python class that's two imports deep, without changing code in either of the imported modules? Say I'm importing a library of web utilities, which imports an HTTPClient() - how can I write a unit test, that mocks the HTTPClient to return a value, without changing the file web_utils.py? I want to use the data manipulation in DataHandler (rather than mock <em>it</em> out), but I don't want the HTTPClient to actually connect to the web.</p>\n\n<p>Is this even possible? Given that Python has monkey-patching, it certainly seems like it should be. Or is there an alternative/better way? I'm still figuring out the mocking process, much less changing imports.</p>\n\n<pre><code># someLib/web_utils.py\nfrom abc.client import SomeHTTPClient # the class to replace\n\ndef get_client():\n    tc = SomeHTTPClient(endpoint='url') # fails when I replace the class\n    return tc\n\nclass DataHandler(object):\n    def post_data(someURL, someData):\n        newData = massage(someData)\n        client = get_client()\n        some_response = client.request(someURL, 'POST', newData)\n        return some_response\n\n# code/myCode.py\nfrom someLib.web_utils import DataHandler\n\ndh = DataHandler()\nreply = dh.post_data(url, data)\n\n# tests/myTests.py\nfrom django.test.testcases import TestCase\nfrom mock import Mock\n\nclass Mocking_Test(TestCase):\n    def test_mock(self):\n        from someLib import web_utils\n        fakeClient = Mock()\n        fakeClient.request = web_utils.SomeHTTPClient.request # just to see if it works\n        web_utils.SomeHTTPClient = fakeClient\n        dh = DataHandler()\n        reply = dh.post_data(url='somewhere', data='stuff')\n</code></pre>\n\n<p>Update - added the <code>get_client()</code> function. I think @spicavigo's answer is on the right track - it does appear to be replacing the <code>SomeHTTPClient</code> class. But for some reason the class doesn't instantiate an object (the error is, \"must be type, not Mock\"). I don't see how it could, either, being a <code>Mock()</code> object that has been created, rather than a class. So I'm not sure how to make that part work.</p>\n"},{"tags":["jquery","asp.net-mvc-3","unit-testing","qunit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":12303816,"title":"What to test using client-side testing (qunit)","body":"<p>I am looking into starting some client-side testing, but I can't seem to think of how to properly use qunit.  ALl of the documentation examples have unit tests such as \n<code>ok( 1 == \"1\", \"Passed!\" );</code></p>\n\n<p>Do we reference HTML in our project or re-write sections of the HTML mimicking it?</p>\n\n<p>Do re reference real Javascript functions or do we rewrite similar functions?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["objective-c","ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":12304823,"title":"Objective C - Unit testing target doesn't recognize classes?","body":"<p>I created a unit test target, that has a dependency on my main target.\nCorrect me if I'm wrong but adding a dependency should add all the classes from my main target to the unit test target.\nImporting classes in unit test target works, but as soon as I try to use these classes in my test target I get the following compile error:</p>\n\n<p><strong>Apple Match-O Linker (ID) Error - _OBJC_CLASS_$_LoginViewcontroller\", referenced from:</strong></p>\n\n<p>I know that I could manually add each file to my unit test target but that doesn't seem to be the proper way. Anyone know why adding the dependency doesn't work as expected? Or any way to get around this issue?</p>\n\n<p>I do <strong>NOT</strong> want to set a \"Test Host\".</p>\n"},{"tags":["unit-testing","google-app-engine","capability","testbed"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12186381,"title":"does the app engine capability_stub for unit testing allow disabling services?","body":"<p>When I was looking at the source code for capability_stub.py in app engine's testbed framework, I saw a comment stating that every service was always enabled. Now, is there a way to simmulate certain outages by disabling certain services, other than writing my own stub?</p>\n"},{"tags":[".net","visual-studio-2010","visual-studio","unit-testing","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12304494,"title":"run MSTests from windows command line","body":"<p>I have 5 solutions all using MSTest and I would like to have a cmd file in a root folder that will run all the tests </p>\n\n<p>so I would like to call the MsTests runner from the command line against </p>\n\n<pre><code>\\Solution1\\Tests\\Debug\\Test.dll\n...\n\\Solution5\\Tests\\Debug\\Test.dll\n</code></pre>\n\n<p>anybody knows how can this be done ?</p>\n"},{"tags":["unit-testing","grails","dependency-injection"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":96,"score":4,"question_id":12302880,"title":"Inject Services in Grails Unit Test","body":"<p>I know that you can simply inject a service in unit test method using:</p>\n\n<pre><code>defineBeans {\n   someService(SomeService)\n}\n</code></pre>\n\n<p>But when I need to inject service inside a service (the service <code>someService</code> calls itself another service <code>some2Service</code>). When I run the test with above code I receive:</p>\n\n<pre><code>Message: Cannot invoke method someMethod() on null object\n</code></pre>\n\n<p>Is it possible to inject a service into a service in the unit test?</p>\n\n<p>Thanks. ;-)</p>\n"},{"tags":["c#",".net","unit-testing","pex"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":112,"score":5,"question_id":12300604,"title":"Is Pex (and its output) suitable for an enterprise environment?","body":"<p>I love the idea of Pex - autogenerating unit tests through static code analysis - but the tests that are actually generated by the tool are horrible, ugly, tightly coupled to Pex modules, difficult to read and understand etc.</p>\n\n<p>Is a tool like that really suitable (in its current state) for use in an enterprise environment, where the emphasis must be on ease of maintenance? </p>\n\n<p>Or have I misunderstood the intended use of Pex?</p>\n"},{"tags":["java","unit-testing","jmock"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":3584,"score":3,"question_id":741186,"title":"Testing a concrete third-party class with JMock","body":"<p>I have class with a forwarding method <code>foo</code>:</p>\n\n<pre><code>void foo( Concrete c, String s ) { c.bar( s ); }\n</code></pre>\n\n<p>I wish to test whether <code>foo</code> does, in fact, forward. Unfortunately for me, <code>Concrete</code> is a class in a third-party library, and is a concrete type, not an interface. Thus I must use <code>ClassImposteriser</code> in JMock to mock <code>Concrete</code>, so in my test case, I do this:</p>\n\n<pre><code>@Test\npublic final void testFoo() {\n   Mockery context = new JUnit4Mockery() {{\n      setImposteriser(ClassImposteriser.INSTANCE);\n   }};\n\n  final Concrete c = context.mock(Concrete.class);\n  final String s = \"xxx\" ;\n\n  // expectations\n  context.checking(new Expectations() {{\n\n     oneOf (c).bar(s); // exception gets thrown from here\n  }});\n\n\n  new ClassUnderTest.foo( c, s );\n  context.assertIsSatisfied();\n</code></pre>\n\n<p>}</p>\n\n<p>Unfortunately, <code>Concrete.bar</code> in turn calls a method that throws. That method is final, so I can't override it. Further, even if I comment out the line <code>new ClassUnderTest.foo( c, s );</code>, the exception is thrown when JMock sets up exceptions, not when <code>foo</code> is called.</p>\n\n<p>So how can I test that method <code>ClassUnderTest.foo</code> does forward to <code>Concrete.bar</code>?</p>\n\n<p>Edit:<br>\nYes, bar is final.</p>\n\n<p>My solution, which is <em>not</em> a general one, was to use a \"Tester\" class in the third-party library to correctly set up <code>Concrete</code>.</p>\n"},{"tags":[".net","unit-testing","dispose","disposable","disposal"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12285370,"title":".NET - Why is disposing of standard output only allowed during unit tests?","body":"<p>First of all, I want to point out that I do not really want to dispose of the standard output...I just want to know why I'm seeing the described behavior. I didn't write the bad code described.</p>\n\n<p>I'm using .NET 4 for the unit tests and .NET 3.5 for the code being tested. I'm using MSTest for .NET 4 as my testing framework.</p>\n\n<p>Recently I have been working with a library that was throwing errors due to the blunder of disposing of the standard error output. (See <a href=\"http://stackoverflow.com/questions/12114992/libtiff-net-readdirectory-is-giving-system-objectdisposedexception-only-during-u/12117105\">LibTiff.NET ReadDirectory is giving System.ObjectDisposedException Only During Unit Tests</a>).</p>\n\n<p>This is relatively what their code looked like:</p>\n\n<pre><code>using (TextWriter stderr = Console.Error)\n{\n    ...\n}\n</code></pre>\n\n<p>Basically, when not running unit tests, the standard output is not disposed even if one specifically disposes of it, but when running unit tests, it is allowed.</p>\n\n<p><strong>Can anyone explain why the standard output is disposable only when doing so in the context of unit tests?</strong></p>\n"},{"tags":["unit-testing","haskell"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12301506,"title":"Selective running of tests in HUnit","body":"<p><code>Test.HUnit</code> provides a big red button to run a test:</p>\n\n<pre><code>runTestTT :: Test -&gt; IO Counts\n</code></pre>\n\n<p>As there is a need to structure large test suites, <code>Test</code> is not a single test but is actually a labelled rose tree with <code>Assertion</code> in leaves:</p>\n\n<pre><code>data Test\n  = TestCase Assertion | TestList [Test] | TestLabel String Test\n        -- Defined in `Test.HUnit.Base'\n</code></pre>\n\n<p>It's not abstract so it's possible to process it. One particularly useful processing is extraction of subtrees by paths:</p>\n\n<pre><code>byPath = flip $ foldl f where\n    f (TestList l) = (l !!)\n    f (TestLabel _ t) = const t\n    f t = const t     \n</code></pre>\n\n<p>So for example I can run a single subsuite <code>runTestTT $ byPath [1] tests</code> or a particular test <code>runTestTT $ byPath [1,7,3] tests</code> identified by test path instead of waiting for whole suite.</p>\n\n<p>One disadvantage of the homegrown tool is that test paths are not preserved (shortened).</p>\n\n<p>Is there such processing helper tool already on Hackage?</p>\n"},{"tags":["unit-testing","grails","spock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":59,"score":-1,"question_id":11405713,"title":"Spock Save Test","body":"<p>I m trying to test this method  </p>\n\n<pre><code>  def save() {\n\n        def activityArtifactInstance = new ActivityArtifact(params)\n        def activityInstance = Activity.get(params.activity.id)\n\n        def uploadedFile = request.getFile('myFile')\n        if (!uploadedFile.empty) {\n            def userDir = new File(ConfigurationHolder.config.getProperty(\"userfiles\").toString(), \"/files\")\n            userDir.mkdirs()\n            uploadedFile.transferTo(new File(userDir, uploadedFile.originalFilename))\n            activityArtifactInstance.fileName = uploadedFile.originalFilename\n        }\n\n        if (!activityArtifactInstance.save(flush: true)) {\n            render(view: \"create\", model: [activityArtifactInstance: activityArtifactInstance, activityInstance: activityInstance])\n            return\n        }\n\n        flash.message = message(code: 'default.created.message', args: [message(code: 'activityArtifact.label', default: 'ActivityArtifact'), activityArtifactInstance.id])\n        redirect(controller: \"activity\", action: \"show\", id: activityInstance.id, params: [phaseId:activityInstance.phase.id])\n    }\n</code></pre>\n\n<p>This is my test code:-</p>\n\n<pre><code> def 'save action: valid activity artifact'() {\n\n        setup:\n        mockDomain(ActivityArtifact)\n        mockI18N(ActivityArtifactController)\n        controller.params.name = \"Activity Artiface\"\n\n        when:\n        controller.save()\n\n        then:\n        redirectArgs.action == \"show\"\n        controller.flash.message != null\n\n\n    }\n</code></pre>\n\n<p>And i m getting this error:-</p>\n\n<p><strong>java.lang.NullPointerException: Cannot get property 'id' on null object</strong></p>\n\n<p>How can i call id of the activity object</p>\n"},{"tags":["c++","eclipse","unit-testing","boost"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12297476,"title":"Unit Testing with Boost and Eclipse","body":"<p>I can't work out how to get unit testing to work with Boost and Eclipse.\nI get lots of <em>different</em> errors depending on where I put the source files.</p>\n\n<p>Where are the tests supposed to go? (ie should I create a test folder in root, in src, no folder at all or what)</p>\n\n<p>Do I need to specify something somewhere if I don't intend to have a main(), and just lots of tests?</p>\n\n<p>I'm really confused, and I know I'm being quite lite on the details - hopefully you can show me the proper way to do Unit Testing with Boost in Eclipse rather than whatever I'm currently doing.</p>\n"},{"tags":["c#",".net","unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12299827,"title":"C# - Moq - Object of mocked Interface is a proxy instead of the exposed class","body":"<p>I am trying to Mock <code>SqlConnection</code>, which essentially is <code>IDbConnection</code>.</p>\n\n<p>For that I <strong>prepare</strong> my mock for my test:</p>\n\n<p><code>var dbConnectionMock = new Mock&lt;IDbConnection&gt;();</code></p>\n\n<p><code>dbConnectionMock.Setup(x =&gt; x.CreateCommand()).Returns(new SqlCommand());</code></p>\n\n<p><code>var repository = new XxxRepository(dbConnectionMock.Object);</code></p>\n\n<hr>\n\n<p>The <strong>Constructor</strong> of the repository sets this property:</p>\n\n<p><code>private IDbConnection Connection { get; set; }</code></p>\n\n<p>And then <code>Connection</code> is used when calling the Db.</p>\n\n<p><code>var command = Connection.CreateCommand();</code></p>\n\n<p><code>command.Connection = Connection;</code> // here it fails, because Connection is the proxy type of <code>IDbConnection</code>, <code>IDbConnectionProxy</code>.</p>\n\n<p>How can I avoid the use of the proxy?</p>\n\n<p>All I wanna test is that <code>command.ExecuteNonQuery()</code> was called.</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":114,"score":-1,"question_id":12298428,"title":"Unit Testing using Visual Studio 2010","body":"<p>I want to create a unit testing framework which has its own front end gui. The testing framework in which I want to create, should be able to insert a visual studio solution along with a pre-created XML file which contains test data and expected results for each unit test. My question is how would I go about finding declarations of test classes in the existing projects in which I would import? The idea behind this is that this can be left running over night if needs be to import a large number of solutions, extract the test classes and run the unit tests on each class. Behind the scenes I would like to use Microsofts Visual Studio own unit testing framework, it is not possible for us to use nunit. </p>\n\n<p>Whats the best way for me to go about this please?</p>\n"},{"tags":["c#",".net","visual-studio","unit-testing","visual-studio-2010"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":3077768,"title":"Is it possible to debug code that is being unit tested in Visual Studio 2010?","body":"<p>I have some code that is failing tests, but I can't understand why. I made the error of making a big chunck of code without making tests first / making tests during the coding. Now it simply doesn't work and I'd like to know if it is possible to put break points or something in the code that is failing so I can check on what is happening in there.</p>\n\n<p>Any other alternatives?</p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12296980,"title":"Why would unit testing a private method using reflection fail if obfusaction is used?","body":"<p>I have been through <a href=\"http://stackoverflow.com/questions/34571/whats-the-proper-way-to-test-a-class-with-private-methods-using-junit?lq=1\">this question on SO regarding unit testing private methods and fields</a> and <a href=\"http://stackoverflow.com/a/34658/1527084\">this answer</a> says that it can be done via reflection mechanism . But <a href=\"http://stackoverflow.com/questions/34571/whats-the-proper-way-to-test-a-class-with-private-methods-using-junit/34658#comment2146296_34658\">there is a commnent</a> saying that it would fail miserably in case of obfuscation .Why is it so ? </p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":67,"score":-1,"question_id":12296680,"title":"Junit test for data types","body":"<p>I am in school and about to learn how to use Junit test.</p>\n\n<p>my question is:</p>\n\n<p>If i have a method and i want to know wether or not this method returns an Integer or not how will do this? is there an Assert that allows me to check the data type of the output?</p>\n\n<p>Hope someone is able to help me</p>\n\n<p>Best regards</p>\n\n<p>Marc Rasmussen</p>\n"},{"tags":["java","unit-testing","junit","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12295891,"title":"How to use ArgumentCaptor for stubbing?","body":"<p>In mockito <a href=\"http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#captors\" rel=\"nofollow\">documentation</a> and <a href=\"http://docs.mockito.googlecode.com/hg/org/mockito/ArgumentCaptor.html\" rel=\"nofollow\">javadocs</a> it says </p>\n\n<blockquote>\n  <p>it is recommended to use ArgumentCaptor with verification but not\n  with stubbing</p>\n</blockquote>\n\n<p>but I dont't unserstand how ArgumentCaptor  can be used for stubbing. Can someone explain the above statement and show how ArgumentCaptor can be used for stubbing or provide a link that shows how it can be done?</p>\n"},{"tags":["c#","database","asp.net-mvc-3","unit-testing","mocking"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12293883,"title":"How to unit test a project without mocking but by using database?","body":"<p>We have developed an application using razor view, c#, MVC3, .net 4.0. We would like to unit test a controller without mocking. Our requirement is: The Repository methods need to be called and executed and the database is to be used for testing. Kindly, provide some solution.</p>\n"},{"tags":["spring","hibernate","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12292235,"title":"How to test hibernate lifecycle observers?","body":"<p>I'm having problems whilst trying to test a JPA entity lifecycle observer, registered as <code>POST_COMMIT_INSERT</code></p>\n\n<p>Because my observer is a spring bean, I wire it into the entity manager as follows:</p>\n\n<pre><code>private void configureHibernateHooks(HistoricEventListener&lt;?&gt; listener) {\n    SessionFactory sessionFactory = getSessionFactory();\n\n    EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(\n            EventListenerRegistry.class);\n\n    if (listener instanceof PostInsertEventListener)\n    {\n        registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT).appendListener((PostInsertEventListener) listener);\n    }\n}\n\nSessionFactory getSessionFactory() {\n    Session session = (Session) entityManager.getDelegate();\n    SessionFactory sessionFactory = session.getSessionFactory();\n    return sessionFactory;\n}\n</code></pre>\n\n<p>My test is annotated as <code>@Transactional</code>.  Therefore, as I understand it, each test runs within it's own transaction.  This is preventing my observer method from being invoked, as the transaction doesn't commit during my test, so the <code>POST_COMMIT_XXX</code> listeners are never observed.</p>\n\n<p>I've tried injecting the <code>EntityManager</code> and manually commiting transactions, but that resulted in exceptions.</p>\n\n<p>What's an appropriate strategy for testing these?</p>\n"},{"tags":["unit-testing","postgresql","scala","playframework-2.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12291942,"title":"How to specify custom database-connection parameters for testing purposes in Play Framework v2?","body":"<p>I want to run my tests against a distinct PostgreSQL database, as opposed to the in-memory database option or the default database configured for the local application setup (via the <code>db.default.url</code> configuration variable).  I tried using the <code>%test.db</code> and related configuration variables (as <a href=\"http://stackoverflow.com/questions/7477330/playframework-evolutions-files-compatible-with-both-postgres-and-h2\">seen here</a>), but that didn't seem to work; I think those instructions are intended for Play Framework v1.</p>\n\n<p>FYI, the test database will have it's schema pre-defined and will not need to be created and destroyed with each test run.  (Though, I don't mind if it is re-created and destroyed with each test run, but I don't want to use \"evolutions\" to do so; I have a single SQL schema file I'm using at this point.)</p>\n"},{"tags":["android","unit-testing","ant","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12287629,"title":"NoClassDefFoundError for library project classes ONLY when running tests with ANT","body":"<p>I added <code>ViewPagerIndicator</code> to my project (it's an Android library project), and my tests work fine from IntelliJ, but fail when I run them from ANT. To be clear, only the test that is referencing classes from this Android Library project is failing, the rest are passing without any issue. I'm guessing something isn't right in my build.xml? Anyone else run into this?</p>\n\n<p>Here's the stack trace:</p>\n\n<blockquote>\n  <p>java.lang.NoClassDefFoundError:\n  Lcom/viewpagerindicator/CirclePageIndicator;\n  com.google.inject.internal.util.$ComputationException:\n  java.lang.NoClassDefFoundError:\n  Lcom/viewpagerindicator/CirclePageIndicator;  at\n  com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:553)\n    at\n  com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:419)\n    at\n  com.google.inject.internal.util.$CustomConcurrentHashMap$ComputingImpl.get(CustomConcurrentHashMap.java:2041)\n    at\n  com.google.inject.internal.FailableCache.get(FailableCache.java:50)\n    at\n  com.google.inject.internal.MembersInjectorStore.get(MembersInjectorStore.java:65)\n    at\n  com.google.inject.internal.InjectorImpl.getMembersInjector(InjectorImpl.java:950)\n    at\n  com.google.inject.internal.InjectorImpl.getMembersInjector(InjectorImpl.java:957)\n    at\n  com.google.inject.internal.InjectorImpl.injectMembers(InjectorImpl.java:943)\n    at\n  roboguice.inject.ContextScopedRoboInjector.injectMembersWithoutViews(ContextScopedRoboInjector.java:243)\n    at roboguice.activity.RoboActivity.onCreate(RoboActivity.java:78)   at\n  com.mycompany.myproduct.activities.TutorialActivity.onCreate(TutorialActivity.java:36)\n    at\n  com.mycompany.myproduct.activities.TutorialActivityTest.setup(TutorialActivityTest.java:37)\n    at\n  com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:292)</p>\n</blockquote>\n"},{"tags":["unit-testing","class","multiple-projects"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":12291963,"title":"Accessing Classes from Other Programs within a Solution","body":"<p>I've already read posts about referencing the namespaces of the programs with the \"using\" statements at the top of the program <a href=\"http://stackoverflow.com/questions/3554658/how-to-use-a-class-from-one-c-sharp-project-with-another-c-sharp-project\">here</a> and <a href=\"http://stackoverflow.com/questions/2306652/how-can-i-refer-to-a-project-from-another-one-in-c\">here</a> and <a href=\"http://stackoverflow.com/questions/11383181/how-to-call-classes-from-one-project-in-another-project\">here</a>.  I've added the appropriate references, made the classes public, and referenced the appropriate namespaces.  I believe I've set it up right... and I honestly feel a bit silly asking such a basic question here, but I'm stumped.  I must be missing something, because it's still not working, and I can't figure it out. </p>\n\n<p>I'm trying to learn how to use Nunit to run unit tests while having separation of the tests from the main program.  Here's the code I've got so far:</p>\n\n<p>Program.cs and Account.cs are in the first project (NUnitTestProgramWithSeparation)</p>\n\n<p>Program.cs -- </p>\n\n<pre><code>    using System;\n    using System.Collections.Generic;\n    using System.Linq;\n    using System.Text;\n\n    namespace NUnitTestProgramWithSeparation\n    {\n        public class MyAccountingSoftware\n        {\n            public static void Main()\n            {\n                Account DemoAccount = new Account();\n                DemoAccount.Deposit(1000.00F);\n                DemoAccount.Withdraw(500.50F);\n                Console.WriteLine(\"Our account balance is {0}\", DemoAccount.Balance);\n            }\n        }\n    }\n</code></pre>\n\n<p>Account.cs -- </p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\n\nnamespace NUnitTestProgramWithSeparation\n{\n    public class Account\n    {\n        private float balance;\n        public void Deposit(float amount)\n        {\n            balance += amount;\n        }\n\n        public void Withdraw(float amount)\n        {\n            balance -= amount;\n        }\n\n        public void TransferFunds(Account destination, float amount)\n        {\n        }\n\n        public float Balance\n        {\n            get { return balance; }\n        }\n    }\n}\n</code></pre>\n\n<p>Then, in a second project called UnitTests I have UnitTests.cs:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing NUnit.Framework;\nusing NUnitTestProgramWithSeparation;\n\nnamespace UnitTests\n{\n    [TestFixture]\n    public class UnitTests\n    {\n        [Test]\n        public void TransferFunds()\n        {\n            Account source = new Account();\n            source.Deposit(200.00F);\n            Account destination = new Account();\n            destination.Deposit(150.00F);\n\n            source.TransferFunds(destination, 100.00F);\n            Assert.AreEqual(250.00F, destination.Balance);\n            Assert.AreEqual(100.00F, source.Balance);\n        }\n\n        [Test]\n        public void DepositFunds()\n        {\n            Account source = new Account();\n            source.Deposit(200.00F);\n            Assert.AreEqual(200.00F, source.Balance);\n        }\n    }\n}\n</code></pre>\n\n<p>When I go to compile, I get errors in for all the Account references in UnitTest.cs saying \"The type or namespace name 'Account' could not be found (are you missing a using directive or an assembly reference?)\"</p>\n\n<p>I really don't know where I'm going wrong here... any help at all would be appreciated.</p>\n"},{"tags":["python","unit-testing","selenium-webdriver"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":57,"score":6,"question_id":12290336,"title":"How to execute code only on test failures with python unittest2?","body":"<p>I have some class-based unit tests running in python's unittest2 framework. We're using Selenium WebDriver, which has a convenient <code>save_screenshot()</code> method. I'd like to grab a screenshot in tearDown() for every test failure, to reduce the time spent debugging <em>why</em> a test failed.</p>\n\n<p>However, I can't find any way to run code on test failures only. <code>tearDown()</code> is called regardless of whether the test succeeds, and I don't want to clutter our filesystem with hundreds of browser screenshots for tests that succeeded.</p>\n\n<p>How would you approach this?</p>\n"},{"tags":["c","eclipse","unit-testing","linker-error","check"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":12291166,"title":"Eclipse C Unit Testing with Check undefined reference error","body":"<p>I'm extremely new to C and I'm having the following problem: I made a very small program filecopy.c, and I want to make a unit test for it with Check, but when I make the unit test and build it I get a ton of undefined reference errors as if Eclipse cannot find the library libcheck (which I specified by adding 'check' to project - properties - C++ build - settings - libraries).</p>\n\n<p>Here is the relevant code from my files:</p>\n\n<p>filecopy.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint fileCopy()\n{\n  int c;\n\n  while ((c = getchar()) != EOF) {\n    putchar(c);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>filecopy.h</p>\n\n<pre><code>int fileCopy();\n</code></pre>\n\n<p>filecopyTest.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;check.h&gt;\n#include \"filecopy.h\"\n\nSTART_TEST (test_fileCopy)\n{\nint i;\nfor (i = 0; i &lt; 10; ++i) {\n    putchar(i);\n}\nfileCopy();\n//Fail if the last char put by fileCopy is not 9\nfail_unless(getchar()==9);\n}\nEND_TEST\n\nSuite *\nfileCopy_suite (void)\n{\n  Suite *s = suite_create (\"fileCopy\");\n\n  /* Core test case */\n  TCase *tc_core = tcase_create (\"Core\");\n  tcase_add_test (tc_core, test_fileCopy);\n  suite_add_tcase (s, tc_core);\n\n  return s;\n}\n\n int\n main (void)\n {\n int number_failed;\n  Suite *s = fileCopy_suite ();\n  SRunner *sr = srunner_create (s);\n  srunner_run_all (sr, CK_NORMAL);\n  number_failed = srunner_ntests_failed (sr);\n  srunner_free (sr);\n  return (number_failed == 0) ? EXIT_SUCCESS : EXIT_FAILURE;\n }\n</code></pre>\n\n<p>The test code is exactly as it should be according to the <a href=\"http://check.sourceforge.net/doc/check_html/check_3.html#SEC4\" rel=\"nofollow\">check tutorial</a>, and the filecopy program works on its own. Here is the Makefile that Eclipse generated using this setup:</p>\n\n<pre><code>################################################################################\n# Automatically-generated file. Do not edit!\n################################################################################\n\n-include ../makefile.init\n\nRM := rm -rf\n\n# All of the sources participating in the build are defined here\n-include sources.mk\n-include subdir.mk\n-include objects.mk\n\nifneq ($(MAKECMDGOALS),clean)\nifneq ($(strip $(C_DEPS)),)\n-include $(C_DEPS)\nendif\nendif\n\n-include ../makefile.defs\n\n# Add inputs and outputs from these tool invocations to the build variables \n\n# All Target\nall: Homework1\n\n# Tool invocations\nHomework1: $(OBJS) $(USER_OBJS)\n    @echo 'Building target: $@'\n    @echo 'Invoking: GCC C Linker'\n    gcc -o \"Homework1\" $(OBJS) $(USER_OBJS) $(LIBS)\n    @echo 'Finished building target: $@'\n    @echo ' '\n\n# Other Targets\nclean:\n    -$(RM) $(OBJS)$(C_DEPS)$(EXECUTABLES) Homework1\n    -@echo ' '\n\n.PHONY: all clean dependents\n.SECONDARY:\n\n-include ../makefile.targets\n</code></pre>\n\n<p>I tell Eclipse to build the filecopy.c file and then to build the filecopyTest.c file, and it gives me an 'undefined reference to [function_name]' for every function called inside of filecopyTest.c (including fileCopy which makes no sense because it includes the header for that function and it doesn't even have to import a library). The library file is in fact present in /usr/lib and installed properly (when running gcc manually, it compiles fine and seems to run (although maybe with some errors; it's difficult to tell)).</p>\n\n<p>Please help if you have any experience with unit testing with C inside Eclipse. I very much love Eclipse and want to use it for my new C projects, but I also love test-first programming and do not intend to develop projects for C without tests in them. I had this exact same problem with CUnit and thought maybe Check would work better, but it's clearly something I'm doing wrong that as a COMPLETE C noob I do not understand. I have scoured the internet and found multiple 'SOLVED' articles on similar situations, but implementing their solutions did not help me on Eclipse. I don't understand what Eclipse does with the make file or even fully what linking is and how it can fail, but I just want to program C in Eclipse with unit testing, and after hours trying to solve this problem, it seems like an insurmountable task. Please let me know if you need additional information; I'm using Eclipse Indigo for reference, which uses CDT 8.0.2.</p>\n\n<p>Thank you in advance for any help anyone might be able to give me. It's so depressing to learn about unit testing and how useful it is and then learn about C and how performant it is and then learn that I can't put the two together inside my favorite IDE.</p>\n"},{"tags":["python","unit-testing","testing","automation","automated-tests"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":77,"score":0,"question_id":12290800,"title":"i know basic python, whats next to learn web automation","body":"<p>background:I am a qa intern/tester for manual testing hourly crappy pay lol. I want to step it up and get into automation in the next few year(s). In the past few months ive gone through LPTHW up until ch 44, and skimmed through many other similar guides. I got to a stump where I cant learn even if its new material, so i need to start a project</p>\n\n<p>I am starting django and after that im not sure but..how does one get into test automation to become a qa engineer. I dont know how much programming knowledge i need but its basically NOVICE right now, within a year i want to be intermediate to advanced. Django is intimidating but im determined to finish it. I am thinking after django i will look up more about \"web crawlers\". Also i would love to be able to make a python bot. I know with python most of the coding involves using other peoples code, i dont mind that, as long as in the process i actually learn the code itself and can one day reproduce it from scratch</p>\n\n<p>I want to be able to create automation tests to do things like\nlog on to server\nclick module\ncreate report\nrun report\nclick other module\ncreate policy\nassign policy\netc..</p>\n\n<p>is it hard to learn? advanced coding? i know nothing about the field and to be honest i wont even learn it at my job because we dont do automation and im trying to look for other positions that will teach me even if its very low pay</p>\n"},{"tags":["android","unit-testing"],"answer_count":1,"favorite_count":5,"up_vote_count":6,"down_vote_count":0,"view_count":2753,"score":6,"question_id":2431457,"title":"Why do I get a Illegal Access Error when running my Android tests?","body":"<p>I get the following stack trace when running my Android tests on the Emulator:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: client.HttpHelper\nat client.Helper.&lt;init&gt;(Helper.java:14)  \nat test.Tests.setUp(Tests.java:15)\nat android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:164)\nat android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:151)\nat android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:425)\nat android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1520)\nCaused by: java.lang.IllegalAccessError: cross-loader access from pre-verified class\nat dalvik.system.DexFile.defineClass(Native Method)\nat dalvik.system.DexFile.loadClass(DexFile.java:193)  \nat dalvik.system.PathClassLoader.findClass(PathClassLoader.java:203)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:573)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:532)\n... 11 more\n</code></pre>\n\n<p>I run my tests from an extra project. And it seems there are some problems with loading the classes from the other project. I have run the tests before but now they are failing. The project under tests runs without problems.</p>\n\n<p>Line 14 of the Helper Class is:</p>\n\n<pre><code>this.httpHelper = new HttpHelper(userProfile);\n</code></pre>\n\n<p>I start a HttpHelper class that is responsible for executing httpqueries. I think somehow this helper class is not available anymore, but I have no clue why.</p>\n"},{"tags":["python","django","unit-testing","mocking"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12289861,"title":"Python - How to mock an instance inside a view","body":"<p>I'm testing my views and I need to make some assertions to a context dictionary before sending it to the HttpResponse object to make sure my view is making calculations as I expect. But how can I assert things? Here is an example of what I am trying to do in the view:</p>\n\n<pre><code># some_app/views.py\ndef my_view(request):\n    context = RequestContext(request)\n\n    if request.GET.get('something'):\n        value = # calculate the value somehow\n        context.update(some_value=value)\n\n    elif request.GET.get('something_else'):\n        value = # calculate the value in other way\n        context.update(some_value=value)\n    # other stuff the view does\n\n    return render_to_response('some_template.html', context_instance=context)\n</code></pre>\n\n<p>It occurs to me that maybe I could patch the view to have the context instance:</p>\n\n<pre><code># some_app/tests/unit/test_myview.py\nfrom some_app import views\nfrom mock import patch\nfrom django.test.client import RequestFactory\n\n\nclass MyTest(TestCase):\n    def test_my_view(self):\n        request = RequestFactory().get('some_url', data={\n            'param1': 'a',\n            'param2': 'b'\n        })\n        with patch('some_app.views', [WHAT DO I INCLUDE HERE?]) as context:\n            # by now, &lt;context&gt; should be the context instance created in the view\n            response = views.my_view(request)\n            self.assertTrue(context['some_value']['value1'])\n            self.assertFalse(context['some_value']['value2'])\n            self.assertRaises(IndexError, some_function,\n                              context['some_value']['value1'])\n</code></pre>\n\n<p>but I can't come up with a working ideas :(</p>\n\n<p>Is there any way that, <strong>in my test</strong>, I can have available the context instance that I created in my view?</p>\n\n<p>Thanks for any help :)</p>\n\n<p><strong>P.S. In-browser testing or checking the generated html is not an option in this case :(</strong></p>\n"},{"tags":["python","django","unit-testing","factory-boy"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":166,"score":4,"question_id":12205855,"title":"Lack of ROLLBACK within TestCase causes unique contraint violation in multi-db django app","body":"<p>I'm just getting started with the <a href=\"https://github.com/dnerdy/factory_boy\" rel=\"nofollow\">factory_boy</a> django library for test factories, and having an issue with a duplicate key constraint violation.</p>\n\n<h2>test_member_programme.py</h2>\n\n<pre><code>from datetime import date, timedelta\n\nfrom django.test import TestCase\n\nfrom app.test.factories import MemberFactory, ProgrammeFactory\nfrom app.models.member_programme import MemberProgramme\n\n\nclass MemberProgrammeTestCase(TestCase):\n\n    def member_programme(self):\n        yesterday = date.today() - timedelta(days=1)\n        return MemberProgramme.objects.create(\n                mem=MemberFactory(),\n                prg=ProgrammeFactory(),\n                date_registered=yesterday)\n\n    def date_registered_should_be_defined_test(self):\n        # This test passes\n        memprg = self.member_programme()\n        assert hasattr(memprg, 'date_registered')\n\n    def date_registered_should_be_in_past_test(self):\n        # This test fails\n        memprg = self.member_programme()\n        assert memprg.date_registered &lt; date.today()\n</code></pre>\n\n<h2>factories.py</h2>\n\n<pre><code>class CountryOfOriginFactory(factory.Factory):\n    \"\"\" Factory class for app.models.CountryOfOrigin\n    \"\"\"\n    FACTORY_FOR = CountryOfOrigin\n\n    code = 'UK'\n    the_country = 'United Kingdom'\n\nclass MemberFactory(factory.Factory):\n    \"\"\" Factory class for app.models.Member\n    \"\"\"\n    FACTORY_FOR = Member\n\n    first_name = 'Test'\n    surname = 'User'\n    sex = 'M'\n    date_of_birth = datetime.date(1990, 1, 1)\n    origin = factory.LazyAttribute(lambda a: CountryOfOriginFactory())\n</code></pre>\n\n<hr>\n\n<p>When running the first test passes successfully, but the second fails with the following error:</p>\n\n<pre><code>IntegrityError: duplicate key value violates unique constraint \"country_of_origin_code_key\"\n</code></pre>\n\n<p>My understanding is that every TestCase should run within a transaction, yet the creation of the foreign key does not appear to have rolled back before the second test runs. Clearly I'm doing something fundamentally wrong, but I'm a bit stumped! Thanks!</p>\n\n<hr>\n\n<p>I've tracked down the problem, but unfortunately don't know how to resolve it. The issue is that ROLLBACKs <strong>are</strong> occurring, but only on one database (this app has 2 databases). For legacy reasons, we have a separate database for django auth, flatpages etc and another db for our app.</p>\n\n<pre><code>dba test_app 127.0.0.1 2012-09-04 21:51:50.806 UTC LOG:  duration: 0.038 ms  statement: BEGIN; SET TRANSACTION ISOLATION LEVEL READ COMMITTED\ndba test_app 127.0.0.1 2012-09-04 21:51:50.808 UTC LOG:  duration: 0.903 ms  statement: INSERT INTO \"member_programme\" (\"mem_id\", \"prgm_id\", \"date_registered\", \"date_completed\", \"ordinality\") VALUES (1, 1, E'2012-09-04', NULL, 1)\ndba test_app 127.0.0.1 2012-09-04 21:51:50.808 UTC LOG:  duration: 0.150 ms  statement: SELECT CURRVAL(pg_get_serial_sequence('\"member_programme\"','id'))\ndba test_app 127.0.0.1 2012-09-04 21:51:50.810 UTC LOG:  duration: 1.796 ms  statement: COMMIT\ndba test_app_django 127.0.0.1 2012-09-04 21:51:50.811 UTC LOG:  duration: 0.056 ms  statement: ROLLBACK &lt;---- ROLLBACK ON DJANGO DB ONLY\ndba test_app_django 127.0.0.1 2012-09-04 21:51:50.814 UTC LOG:  disconnection: session time: 0:00:21.005 user=dba database=test_app_django host=127.0.0.1 port=60355\ndba test_app 127.0.0.1 2012-09-04 21:51:50.818 UTC LOG:  disconnection: session time: 0:00:04.751 user=dba database=test_app host=127.0.0.1 port=60357\ndba test_app 127.0.0.1 2012-09-04 21:54:00.796 UTC LOG:  connection authorized: user=dba database=test_app\ndba test_app 127.0.0.1 2012-09-04 21:54:00.802 UTC LOG:  duration: 0.243 ms  statement: SET DATESTYLE TO 'ISO'\ndba test_app 127.0.0.1 2012-09-04 21:54:00.802 UTC LOG:  duration: 0.156 ms  statement: SHOW client_encoding\ndba test_app 127.0.0.1 2012-09-04 21:54:00.803 UTC LOG:  duration: 0.047 ms  statement: SHOW default_transaction_isolation\ndba test_app 127.0.0.1 2012-09-04 21:54:00.803 UTC LOG:  duration: 0.068 ms  statement: BEGIN; SET TRANSACTION ISOLATION LEVEL READ COMMITTED\ndba test_app 127.0.0.1 2012-09-04 21:54:00.804 UTC LOG:  duration: 0.410 ms  statement: SET TIME ZONE E'Pacific/Auckland'\ndba test_app 127.0.0.1 2012-09-04 21:54:00.805 UTC ERROR:  duplicate key value violates unique constraint \"country_of_origin_code_key\"\n</code></pre>\n\n<hr>\n\n<p>Someone with a similar problem <a href=\"http://stackoverflow.com/questions/10121485/django-testcase-not-using-transactions-on-secondary-database\">here</a>.</p>\n"},{"tags":["unit-testing","grails","groovy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":217,"score":2,"question_id":11552053,"title":"JSON rendering fails for domain objects in ControllerUnitTestCase","body":"<p>I'm writing a unit test for a Grails controller that renders a domain class to a JSON response:</p>\n\n<pre><code>class MyController {\n    def find = {\n        def domainInst = MyDomainClass.get(params.id)\n        render ([data: domainInst] as JSON)\n    }\n}\n</code></pre>\n\n<p>The unit test extends ControllerUnitTestCase and provides a mock for the domain object:</p>\n\n<pre><code>class MyControllerTests extends ControllerUnitTestCase {\n    @Before\n    void setUp() {\n        super.setUp()\n        mockDomain(MyDomainClass, [new MyDomainClass(id: 7)])\n    }\n\n    @Test\n    void testFind() {\n        def inst = MyDomainClass.get(7)\n        controller.params.id = inst.id\n        controller.find()\n        assert(controller.response.json.data.id == inst.id)\n    }\n</code></pre>\n\n<p>This all seems to be working nicely except for the JSON rendering, which spits out a nasty stack trace:</p>\n\n<pre><code>| Failure:  testFind(MyControllerTests)\n|  org.apache.commons.lang.UnhandledException: \n        org.codehaus.groovy.grails.web.converters.exceptions.ConverterException: Error converting Bean with class MyDomainClass\n        Caused by: org.codehaus.groovy.grails.web.converters.exceptions.ConverterException: Error converting Bean with class MyDomainClass\nat grails.converters.JSON.value(JSON.java:199)\nat grails.converters.JSON.convertAnother(JSON.java:162)\nat grails.converters.JSON.value(JSON.java:199)\nat grails.converters.JSON.render(JSON.java:134)\n... 5 more\n        Caused by: java.lang.reflect.InvocationTargetException\n... 9 more\n        Caused by: groovy.lang.MissingMethodException: No signature of method: MyDomainClass.isAttached() is applicable for argument types: () values: []\n        Possible solutions: isAttached(), attach()\n... 9 more\n</code></pre>\n\n<p>Changing the return to a Map instead of a domain class works:</p>\n\n<pre><code>render ([data: [id: domainInst.id]] as JSON)\n</code></pre>\n\n<p>What's causing the JSON marshaller to die on the domain class? It works in a normal environment, but not in the mock test environment. Is there a way to make this test work?</p>\n"},{"tags":["objective-c","ios","unit-testing","objective-c-blocks","gcd"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":139,"score":0,"question_id":10733978,"title":"GCD + Unit Testing","body":"<p>I have written a simple test case that follows Apple's <a href=\"http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/dispatch_semaphore_signal.3.html\" rel=\"nofollow\">documentation</a> and I am not seeing the results that I'm expecting. </p>\n\n<p>Here's the code:</p>\n\n<pre><code>- (void)testExample2\n{\n    NSLog(@\"1\");\n\n    dispatch_semaphore_t semaphore = dispatch_semaphore_create(0); \n\n    dispatch_async(dispatch_get_main_queue(), ^{\n        NSLog(@\"3\");\n             dispatch_semaphore_signal(semaphore);\n        });\n\n    NSLog(@\"2\");\n    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);\n\n    NSLog(@\"4\");    \n    dispatch_release(semaphore);    \n}\n</code></pre>\n\n<p>I would expect to read: 1, 2, 3, 4 but instead my console just shows me 1, 3.</p>\n\n<p>I've been able to work around the issue using <code>DISPATCH_TIME_NOW</code> in a while loop together with a NSLoop hack but the code above should kind of work... right?</p>\n\n<p>Cheers...</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I just realised that I should be using a separate queue rather than <code>dispatch_main_queue()</code></p>\n"},{"tags":["unit-testing","github","github-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12251754,"title":"How can I determine what percentage of Github projects contain unit tests?","body":"<p>I'm working on a presentation about unit testing and TDD. One statistic I'd like to share is the percentage of Github projects that contain unit tests. Is this data available somewhere?</p>\n\n<p>If not, is it possible to obtain through a Github API? I was considering a simple file-based approach based on project type (see if a Java project has any files ending in <code>Test.java</code>, or <code>spec.rb</code> for Ruby), but I've never used their API and don't know how feasible this is.</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","json.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12285844,"title":"Should I mock the ControllerContext to unit test my JsonNetResult data","body":"<p>I am using the JsonNetResult class from here in my asp.net mvc 4.0 project:</p>\n\n<p><a href=\"http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx\" rel=\"nofollow\">http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx</a></p>\n\n<p>How can I unit test wether my c# classes are converted correctly to json format?</p>\n\n<p>The Json conversion is executed in the ExecuteResult method which seem to be impossible to </p>\n\n<p>mock according to www.</p>\n\n<p>Some people even say this is too much mock effort just for the json testing.</p>\n\n<p>Some people say why not directly test the JsonConvert.SerializeObject(_data); method.</p>\n\n<p>I would be grateful to hear some professional advises about that topic.</p>\n"},{"tags":["c#",".net","unit-testing","libtiff.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12114992,"title":"LibTiff.NET ReadDirectory is giving System.ObjectDisposedException Only During Unit Tests","body":"<p><strong>Edit:</strong> FYI for future readers, this issue has been fixed as of version 2.3.606.0 of BitMiracle's LibTiff.NET.</p>\n\n<p>I'm using BitMiracle's LibTiff.NET (version 2.3.605.0 and below) in my C# library (compiled at .NET 3.5 | x86) and keep getting this exception when I call <code>ReadDirectory</code>: <code>System.ObjectDisposedException: Cannot write to a closed TextWriter</code> </p>\n\n<p>I realize that this seems to indicate that I have already disposed of my image before making the call...but I have not specifically done so. Is this a bug in the library or am I really missing something here?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    public static bool IsTiffBiTonal(String tiffFilePath)\n    {\n        VerifyFileExistence(tiffFilePath);\n\n        using (Tiff tiff = Tiff.Open(tiffFilePath, \"r\"))\n        {\n            do\n            {\n                if (tiff.GetField(TiffTag.BITSPERSAMPLE)[0].ToInt() == 1)\n                {\n                    continue;\n                }\n                return false;\n            }\n            while (tiff.ReadDirectory()); //Error occurs here\n        }\n        return true;\n    }\n</code></pre>\n\n<p><strong>EDIT:</strong> Ok, I have more information after some further testing, this is only happening when I'm running my unit tests! Don't know why that would change anything though.</p>\n"},{"tags":["unit-testing","ios5","xcode4.3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12283706,"title":"How to do OCUnit testing for Xcode 4.3?","body":"<p>I am new to IOS development as well as unit testing,can anyone help me to implement sample unit test using OCUnit.Any example would be appreciated.thanks in advance.</p>\n"},{"tags":["entity-framework","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12281887,"title":"Unit Testing of void methods using Entity Framework","body":"<p>I'm trying to familiarize myself with unit testing. I've written a small application that parses data from the Internet and stores it into a db. For this I'm using Entity Framework.</p>\n\n<p>Since many of the methods are void methods such as</p>\n\n<pre><code>public void UpdateSiteValue(Site site, ObjectContext context)\n</code></pre>\n\n<p>This method could be used for updating some value in the db. So I'm basically wondering how to approach this from a unit testing perspective. Maybe I could mock the object context?</p>\n\n<p>Would appreciate any input.</p>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":371,"score":1,"question_id":12229509,"title":"VS2012 - add test missing?","body":"<p>In VS 2010, I could right click a method and have MSTest create a unit test for me.  Where is this feature in VS2012 pro?</p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12141170,"title":"Removing tests from unittest suite","body":"<p>In order to run all my unittests I use following script where test_files is a list of strings of my testfiles:</p>\n\n<pre><code>for test_file in test_files:\n    test_file = test_file[:-3]\n    module = __import__(test_file)\n    for name, obj in inspect.getmembers(module):\n        if inspect.isclass(obj):\n            if str(obj).startswith(\"&lt;class 'test_\"):\n                suite.addTest(unittest.TestLoader().loadTestsFromTestCase(obj))\n</code></pre>\n\n<p>How can I remove single tests from the suite afterwards (not all tests from a testfile)?</p>\n"},{"tags":["asp.net","unit-testing","linq-to-sql","repository-pattern","unit-of-work"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12278625,"title":"unit testing a class that uses linq to sql","body":"<p>I want to write unit test for a class that contains linq to sql codes . I mean inside each method I have created a new DbContext and done database jobs .</p>\n\n<p>I searched the web . first I came to use repository and Unit of Work patterns but I figured out that DbContext itself is a unit of work and its dbset works as repositories . another point is that I think there is no need to test Linq part because it works as it should ( tested by .net team ) . I want to test the logic I have added to the code . so I decided to create an interface with necessary methods with two implementations , one uses linqToSql while another is just a mock . something like this :</p>\n\n<pre><code>    public interface IDbManager\n    {\n        bool Insert(MyEntity newEntity);\n    }\n\n    public class RealDbManager:IDbManager\n    {\n        public bool Insert(MyEntity newEntity)\n        {\n            using (DbDataContext db = new DbDataContext())\n            {\n                db.MyEntities.InsertOnSubmit(newEntity);\n                db.SubmitChanges();\n            }\n        }\n    }\n\n    public class MockDbManager:IDbManager\n    {\n        public bool Insert(MyEntity newEntity)\n        {\n            return true;\n        }\n    }\n</code></pre>\n\n<p>is the whole idea correct ? if so is this a correct implementation ? </p>\n\n<p>is it possible to define DbDataContext as a class variable instead of creating new instance inside each method ?</p>\n"},{"tags":["unit-testing","grails","criteria","grails-2.1"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12278199,"title":"grails unit-testing criteria with orderBy child property","body":"<p>I have issues querying data based on the following (working code outside of the unit-test):</p>\n\n<pre><code>        return DataLogEntry.where {\n            eq('resolution', 1)\n            lt('tsp', to)\n            order('descriptor.id','desc')\n            order('tsp','desc')\n        }.list()\n</code></pre>\n\n<p>It produces an exception:</p>\n\n<pre><code>        |  groovy.lang.MissingPropertyException: No such property: descriptor.id for class: ioc.datalog.DataLogEntry\n        Possible solutions: descriptor\n</code></pre>\n\n<p>As an alternative approach I replaced the <code>order('descriptor.id','desc')</code> with:</p>\n\n<pre><code>        descriptor { \n            order('id','desc')\n        }\n</code></pre>\n\n<p>Which leads to an empty result set being returned (without an error). Am I doing something wrong or is it a bug/missing feature? As a workaround I put the criteria definition into a method, which I override (inside the unit test) to return an expected prepared result (without the order on the child property).</p>\n\n<pre><code>        service.metaClass.getWorkload { Date to -&gt; \n\n            return DataLogEntry.where {\n                eq('resolution', 1)\n                lt('tsp', to)\n                /*order('descriptor.id','desc')*/\n                order('tsp','desc')\n            }.list()\n        }\n</code></pre>\n\n<p>A simplified view of the domain model:</p>\n\n<pre><code>        class DataEntryLog {\n            Descriptor descriptor\n            Date tsp\n            Integer resolution\n        }\n\n        class Descriptor {\n        }\n</code></pre>\n"},{"tags":["unit-testing","tcl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12277236,"title":"Access value of the variable in TCL","body":"<p>I have similar code for writing unit test where I need to check the value of a variable.</p>\n\n<pre><code>#first.tcl\nproc test {a} {\n   if {$a &lt; 10} {\n      set sig 0\n   } else {\n      set sig 1\n   }\n} \n</code></pre>\n\n\n\n<pre><code>#second.tcl unit testing script\nsource \"first.tcl\"\ntest 10\nexpect 1 equal to $sig\ntest 5\nexpect 0 equal to $sig\n</code></pre>\n\n<p>Is there any way, that I can access the value of the variable \"sig\" as I can not change the first script.</p>\n"},{"tags":["ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":132,"score":0,"question_id":11268417,"title":"Xcode Unit Test and Writing Data to Disk","body":"<p>I am trying to write logic test to debug a a method that saves image data to disk.  I use the following lines to write image data to the documents directory:</p>\n\n<pre><code>docspath = [[NSString alloc] initWithString:[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, TRUE) objectAtIndex:0]];\nfullpath = [[NSString alloc] initWithFormat:@\"%@/%@\", docspath, _name]; \nBOOL written = [fileData writeToFile:fullpath options:NSDataWritingAtomic error:&amp;dataerror];\n</code></pre>\n\n<p>Except, the data is not written and the error description returns no such file or directory.  I am running this code under a test target in the iOS 5.1 simulator.  Do I need to create intermediate directories to get to the documents directory, or is there another issue with writing to disk under a test target?</p>\n\n<p>The error returned:</p>\n\n<pre><code>2012-06-29 16:13:31.819 otest[4597:7b03] /Users/myaccount/xcode_projects/myproject/myproject/myfolder/MMFileManager.m - 285: Error Domain=NSCocoaErrorDomain Code=4 \"The operation couldn’t be completed. (Cocoa error 4.)\" UserInfo=0x1e1e3a0 {NSUserStringVariant=Folder, NSFilePath=/Users/myaccount/Library/Application Support/iPhone Simulator/5.1/Documents/mmLogo.png, NSUnderlyingError=0x1e1b430 \"The operation couldn’t be completed. No such file or directory\"}\n</code></pre>\n"}]}
{"total":15323,"page":16,"pagesize":100,"questions":[{"tags":["unit-testing","symfony2","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12262413,"title":"$this->assertEquals error : Failed asserting that null matches expected","body":"<p>I'm doing test unit of my entity: </p>\n\n<pre class=\"lang-php prettyprint-override\"><code>namespace PathtomyBundle\\Tests;\n\nrequire_once dirname(__DIR__).'/../../../app/AppKernel.php';\n\nuse Doctrine\\ORM\\Tools\\SchemaTool;\n\nabstract class TestCase extends \\PHPUnit_Framework_TestCase\n{\n/**\n * @var Symfony\\Component\\HttpKernel\\AppKernel\n */\nprotected $kernel;\n\n/**\n * @var Doctrine\\ORM\\EntityManager\n */\nprotected $entityManager;\n\n/**\n * @var Symfony\\Component\\DependencyInjection\\Container\n */\nprotected $container;\n\npublic function setUp()\n{\n    // Boot the AppKernel in the test environment and with the debug.\n    $this-&gt;kernel = new \\AppKernel('test', true);\n    $this-&gt;kernel-&gt;boot();\n\n    // Store the container and the entity manager in test case properties\n    $this-&gt;container = $this-&gt;kernel-&gt;getContainer();\n    $this-&gt;entityManager = $this-&gt;container-&gt;get('doctrine')-&gt;getEntityManager();\n\n    // Build the schema for sqlite\n    //$this-&gt;generateSchema();\n\n    parent::setUp();\n}\n\npublic function tearDown()\n{\n    // Shutdown the kernel.\n    $this-&gt;kernel-&gt;shutdown();\n\n    parent::tearDown();\n}\n\nprotected function generateSchema()\n{\n    // Get the metadatas of the application to create the schema.\n    $metadatas = $this-&gt;getMetadatas();\n\n    if ( ! empty($metadatas)) {\n        // Create SchemaTool\n        $tool = new SchemaTool($this-&gt;entityManager);\n        $tool-&gt;createSchema($metadatas);\n    } else {\n        throw new Doctrine\\DBAL\\Schema\\SchemaException('No Metadata Classes to process.');\n    }\n}\n\n/**\n * Overwrite this method to get specific metadatas.\n *\n * @return Array\n */\nprotected function getMetadatas()\n{\n    return $this-&gt;entityManager-&gt;getMetadataFactory()-&gt;getAllMetadata();\n}\n}\n</code></pre>\n\n<p>and also: </p>\n\n<pre class=\"lang-php prettyprint-override\"><code> namespace pathtomybundle\\Tests\\Entity;\n use pathtomybundle\\Tests\\TestCase;\n use pathtomybundle\\Entity\\Calendars;\n\n require_once dirname(__DIR__).'/TestCase.php';\n\n class CalendarsDbTest extends TestCase\n {\n\nprotected $Calendars;\n\n    public function setUp()\n        {\n            parent::setUp();\n\n            $this-&gt;Calendars = new Calendars();\n        }\n\n\n    public function testGenerateCalendars()\n    {\n\n        $this-&gt;Calendars-&gt;setBeginDate(new \\DateTime('now'));\n        $this-&gt;Calendars-&gt;setDescription('Description');\n        $this-&gt;Calendars-&gt;setEndDate(new \\DateTime('now'));\n        $this-&gt;Calendars-&gt;setType('sur titre');\n\n        // Save the ExCalendars\n        $this-&gt;entityManager-&gt;persist($this-&gt;Calendars);\n        $this-&gt;entityManager-&gt;flush();\n\n\n\n    }\n\n       public function testUser(){\n\n     $this-&gt;assertEquals('Description', $this-&gt;Calendars-&gt;getDescription() );\n\n    }\n</code></pre>\n\n<p>So my questions are: </p>\n\n<ul>\n<li><p>Why does it raise this error \"Failed asserting that null matches expected\"?</p></li>\n<li><p>Why <code>getDescription()</code> returns <code>NULL</code>?</p></li>\n<li><p>How to test two table with One-to-Many relationship for example my Table Calendars with another table in database?</p></li>\n</ul>\n\n<p><strong>Edit</strong></p>\n\n<p>For the third question :</p>\n\n<p>For example I have two Tables Job and Calenders with Many-to-One relationship so I will have a Job_Id field in Calendars Table,so how I will do my test Unit with a foreign key \"job_id\"</p>\n\n<p>In Calendars Entity : </p>\n\n<pre><code> /**\n * @var Job\n *\n * @ORM\\ManyToOne(targetEntity=\"Job\")\n * @ORM\\JoinColumns({\n *   @ORM\\JoinColumn(name=\"job_id\", referencedColumnName=\"job_id\")\n * })\n */\nprivate $jobId;\n</code></pre>\n\n<p><strong>Edit-2-</strong></p>\n\n<p>when I run my phpunit test \"phpunit -c app\" to test setters function and persist in database so I have a  with every test a new data insered in databse, my question is it possible to do a lot of test but  I insert data in database just for one time because actually I must remove data from database with every test.</p>\n\n<p>2 - another question : to create a database_test i use \"$this->generateSchema();\n\" so after create a database for the first time and when the test call \"TestCase\"class (the code above) again so he tried to create the database_test again then I must remove the line after the first time and it's not good,so what I can do to run this line just for one time in the first time when i run my test?</p>\n\n<p><strong>Edit-3</strong></p>\n\n<pre><code>    /**\n * @var Job\n *\n * @ORM\\ManyToOne(targetEntity=\"Job\")\n * @ORM\\JoinColumns({\n *   @ORM\\JoinColumn(name=\"job_id\", referencedColumnName=\"id\")\n * })\n */\nprivate $job;\n</code></pre>\n\n<p>it's normal?</p>\n"},{"tags":["c#","unit-testing","azure"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":876,"score":2,"question_id":3291629,"title":"Unit Testing Code for Azure","body":"<p>I have an Azure application, and recently went gung-ho on the application settings. I realized putting pretty much every setting I needed into the ServiceConfiguration was the obvious way to go for anything you might even remotely want to change on the fly; which means web service URLs, smtp host information, etc is all in my ServiceConfiguration. </p>\n\n<p>Imagine my suprise when, after I made my changes, I tried to run my 200+ unit tests, only to smack straight into this error:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/2957938/why-am-i-getting-sehexception-when-calling-roleenvironment-getconfigurationsettin\">http://stackoverflow.com/questions/2957938/why-am-i-getting-sehexception-when-calling-roleenvironment-getconfigurationsettin</a></p>\n\n<p>Obviously, I have several options here... </p>\n\n<p>-I can write my own small class using RoleEnvironment.IsAvailable() to check where I should be getting my settings from, and get them from the app.config if i'm not in azure.</p>\n\n<p>-I could deploy my application to the test environment, and just test the externally-facing interfaces.</p>\n\n<p>But is there a \"built-in\" way? Are there any updates to the unit testing framework that would let me test the exact code that's running (within the environment it will be run in and with the settings that will be deployed)?</p>\n"},{"tags":["java","unit-testing","automated-tests","testng"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":410,"score":0,"question_id":5228131,"title":"Working With TestNG","body":"<p>I am working as a trainee in Automated Testing Environment.\nI have to know about TestNG and some examples of TestNG. What is meant by Test Suite? Can anybody please provide me some example coding?</p>\n"},{"tags":["javascript","jquery","unit-testing","testing","javascript-framework"],"answer_count":4,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":173,"score":7,"question_id":7409477,"title":"unit testing modular javascript","body":"<p>I am currently deriving a javascript framework pattern as an architecture for the client side development for an upcoming large scale application that I will developing.</p>\n\n<p>I am looking to go with a module observer pattern in which each control I develop will have its own javascript file, holding no knoweldge of the other controls.</p>\n\n<p>From designing this framework for my application, I am looking to integrate in a testing mechanism for my modules - a unit testing mechanism for javascript. I am not aware of any such frameworks or how I may set up such. Any suggestions?</p>\n\n<p>As part of such testing, I will also need to mock up http requests.</p>\n\n<p>The library I will be using in development is jquery.</p>\n"},{"tags":["unit-testing","actor","akka"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12263168,"title":"Akka - replace actor in running ActorSystem","body":"<p>I need to unit-test my application, involving sending a message to actor. I would like to get the whole system up and then replace some of actors with my \"mock\" instances, keeping original actors wrapped. The purpose of this is to get rid of Thread.sleep(xxxx) and make unit test more robust and not depending on JVM timings. Mocked actors supposed to \"intercept\" calls to actor. call the original actor and send notifcations back to unit test, so it can verify post-conditions.</p>\n\n<p>I don't want to update existing \"worker\" actors for sending back such kind of notifications. I could refactor the code in order to pass actors for being registered in ActorSystem, however it is not desired. So if there is a way to get actor and replace it with new one - it would be great.</p>\n"},{"tags":["c++","xcode","unit-testing","xcode4","googletest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12147000,"title":"What is the proper way to configure googletest with Xcode 4?","body":"<p>I am following the instructions located at <a href=\"http://code.google.com/p/googletest/wiki/XcodeGuide\" rel=\"nofollow\">http://code.google.com/p/googletest/wiki/XcodeGuide</a> to set up googletest to work with Xcode. However, these instructions seem to be written for Xcode 3. Many things that this article mentions have changed in Xcode 4. What is the proper way to get google test to work with Xcode 4?</p>\n"},{"tags":["java","android","unit-testing","roboguice","robolectric"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12266200,"title":"Robolectric and SQLite.getVersion","body":"<p>In my case getVersion in Robolectric SQLiteOpenHelper returns always 0.\nBecause of this onCreate is called in DBHelper if the current DATABASE_VERSION is for example greater than 0.</p>\n\n<p>Does anyone know how to configure/set the Database-Version in Robolectric?\nI am using robolectric-1.1-jar-with-dependencies.jar and roboguice-2.0b4.jar. \n(Read + write works so far...)</p>\n\n<p>thx</p>\n"},{"tags":["visual-studio-2010","unit-testing","building"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12260316,"title":"Visual Studio 2010 Rebuild All then run unit tests builds all again","body":"<p>In Visual Studio 2010 I do the following:</p>\n\n<ul>\n<li><p>Build > Rebuild Solutuion.</p>\n\n<p>No errors, no warnings.</p></li>\n<li><p>Solution > Run StyleCop (Rescan All)</p>\n\n<p>No errors, no warnings.</p></li>\n<li><p>Test > Run > All tests in solution.</p>\n\n<p>A build kicks off again - why is this?  Is there a way around it?</p></li>\n</ul>\n"},{"tags":[".net","unit-testing","testing","automated-tests","mbunit"],"answer_count":4,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":2034,"score":6,"question_id":881537,"title":"do you know any tutorial for MBUnit?","body":"<p>It looks a bit hard to find documentation about MBUnit.  Does anyone know of any tutorials?</p>\n"},{"tags":["java","unit-testing","mocking","jmock"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12211030,"title":"Capturing method parameter in jMock to pass to a stubbed implementation","body":"<p>I wish to achieve the following behavior.\nMy class under test has a dependency on some other class, I wish to mock this dependency with jMock. Most of the methods would return some standard values, but there is one method, where I wish to make a call to a stubbed implementation, I know I can call this method from the <code>will(...)</code> but I want the method to be called by the exact same parameters that were passed to the mocked method. </p>\n\n<p>Test</p>\n\n<pre><code>@Test\npublic void MyTest(){\n    Mockery context = new Mockery() {\n        {\n            setImposteriser(ClassImposteriser.INSTANCE);\n        }\n    };\n    IDependency mockObject = context.mock(IDependency.class);\n    Expectations exp = new Expectations() {         \n        {\n            allowing(mockObject).methodToInvoke(????);\n            will(stubMethodToBeInvokedInstead(????));\n        }       \n    };      \n}\n</code></pre>\n\n<p>Interface</p>\n\n<pre><code>public interface IDependency {\n    public int methodToInvoke(int arg);\n}\n</code></pre>\n\n<p>Method to be called instead</p>\n\n<pre><code>public int stubMethodToBeInvokedInstead(int arg){\n    return arg;\n}\n</code></pre>\n\n<p>So how do I capture the parameter that were passed to the method being mocked, so I could pass them to the stubbed method instead?</p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>Just to give another example, let's say I wish to mock the <code>INameSource</code> dependency in the following (C#) code, to test the class Speaker</p>\n\n<pre><code>public class Speaker\n{\n  private readonly string firstName;\n  private readonly string surname;\n  private INameSource nameSource ;\n public Speaker(string firstName, string surname, INameSource nameSource)\n  {\n    this.firstName = firstName;\n    this.surname = surname;\n    this.nameSource = nameSource;\n  }\n  public string Introduce()\n  {\n    string name = nameSource.CreateName(firstName, surname);\n    return string.Format(\"Hi, my name is {0}\", name);\n  }\n}\npublic interface INameSource\n{\n  string CreateName(string firstName, string surname);\n}\n</code></pre>\n\n<p><a href=\"http://ayende.com/wiki/Rhino+Mocks+The+Do%28%29+Handler.ashx\" rel=\"nofollow\">This is how it can be done in Rhino Mocks for C#</a> I understand it can't be as easy as this since delegates are missing in Java</p>\n"},{"tags":["javascript","unit-testing","qunit"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":12269411,"title":"Are there any open source web applications out there with good QUnit (or JSUnit) test cases?","body":"<p>For a research project we are looking for JavaScript-based web applications that come with unit tests in QUnit or JSUnit.</p>\n\n<p>Our search has only retrieved very simple uncomplete qunit test cases for JavaScript code on the web so far. Many thanks in advance.</p>\n"},{"tags":["c#","unit-testing","visual-studio-2012","microsoft-fakes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12217182,"title":"Can't build project with Fakes assembly","body":"<p>I've added a Fakes assembly to my Visual Studio 2012 unit test project, corresponding to my application project (the System Under Test), as described in <a href=\"http://www.peterprovost.org/blog/2012/04/15/visual-studio-11-fakes-part-1\" rel=\"nofollow\">Peter Provost's article</a>. However, the project will no longer build, on account of an unresolved type reference in the generated Fakes code:</p>\n\n<pre><code>The type or namespace name 'FieldDefinition' does not exist in the namespace 'bc::ProductStudio' (are you missing an assembly reference?)\n[C:\\Users\\arvek\\Projects\\Project\\Project.Tests\\obj\\Debug\\Fakes\\bc\\f.csproj]\nC:\\Users\\arvek\\Projects\\Project\\Project.Tests\\f.cs\n</code></pre>\n\n<p>What's going wrong here? From what I know, this is supposed to just work, so it would seem to me there's a bug in the Fakes facilities.</p>\n"},{"tags":["unit-testing","matlab","xunit","matlab-xunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":304,"score":0,"question_id":1457211,"title":"How to make MATLAB xUnit work on MATLAB R2008b (7.7)?","body":"<p>I copied the matlab_xunit folder to C:\\Program Files, and included it (and its subfolders) on the MATLAB path. Now MATLAB recognizes new commands such as</p>\n\n<pre><code>runtests\n</code></pre>\n\n<p>But this command does not find any tests on the current folder. What I have done wrong? What else can I do?</p>\n\n<pre><code>&gt;&gt; runtests \nStarting test run with 0 test cases.\n\nPASSED in 0.000 seconds.\n</code></pre>\n"},{"tags":["java","unit-testing","cobertura","clover"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":3154,"score":3,"question_id":4871647,"title":"cobertura vs clover","body":"<p>We are thinking about utilizing one of these tools in our development procedure. Our environment extensively uses mvn and eclipse. </p>\n\n<p>Which one in your opinion is the best utility for checking test coverage? I realize that it may depend on the situation to determine when it is better to use cobertura over clover and vice-versa.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["unit-testing","monodroid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12263908,"title":"Unit testing with monodroid and visual studio 2010","body":"<p>Has anyone managed to run unit tests created with vs2010 on an android device? Is there any other solution to unit testing android applications when using monodrod?</p>\n"},{"tags":["php","unit-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":1,"view_count":64,"score":4,"question_id":12264434,"title":"What should I test in phpunit?","body":"<p>I don't know if this is a too localized question, but I don't know what I should be unit testing with PHPUnit. Like for example on a simple user registration/login system, what should I be testing? </p>\n\n<p>I hope you understand what I meant and enlighten me.</p>\n"},{"tags":["entity-framework","unit-testing","testing","mocking","moq"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":161,"score":0,"question_id":12263514,"title":"Why DbContext doesn't implement IDbContext interface?","body":"<p>Why there is no <code>IDbContext</code> interface in the Entity Framework? Wouldn't it be easier to test things if there was an existing interface with methods like SaveChanegs() etc. from which you could derive your custom database context interface?</p>\n\n<pre><code>public interface ICustomDbContext : IDbContext\n{\n    // add entity set properties to existing set of methods in IDbContext\n    IDbSet&lt;SomeEntity&gt; SomeEntities { get; }\n}\n</code></pre>\n"},{"tags":["python","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":70,"score":4,"question_id":12262967,"title":"How do I make this test pass?","body":"<p>I'm trying to test the return type on <code>__repr__</code>. It's not a string so what is it? What's happening here?</p>\n\n<pre><code>import unittest\nclass MyClass(unittest.TestCase):\n    class Dog(object):\n            def __init__(self, initial_name):\n                self._name = initial_name\n\n            def get_self(self):\n                return self\n\n            def __repr__(self):\n                return \"Dog named '\" + self._name + \"'\"\n\n    def runTest(self):\n        fido = self.Dog(\"Fido\")\n        self.assertEqual(\"Dog named 'Fido'\", fido.get_self()) #Fails!\n\ntest=MyClass(\"runTest\")\nrunner=unittest.TextTestRunner()\nrunner.run(test)\n</code></pre>\n\n<p>Running this gives:</p>\n\n<pre><code>FAIL: runTest (__main__.MyClass)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n   File \"/home/xxxxx/fido.py\", line 15, in runTest\n     self.assertEqual(\"Dog named 'Fido'\", fido.get_self())\n   AssertionError: \"Dog named 'Fido'\" != Dog named 'Fido'\n\n ----------------------------------------------------------------------\n Ran 1 test in 0.006s\n\n FAILED (failures=1)\n</code></pre>\n\n<p>How can I get this test to pass?</p>\n"},{"tags":["php","unit-testing","phpunit","php-5.3"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":402,"score":5,"question_id":6135322,"title":"DI container for an object that contains an object that has injected dependency","body":"<p>Using <a href=\"https://github.com/fabpot/Pimple\">pimple</a> as my DI container, I have been bravely refactoring small classes to rely on DI injection, eliminating  the hard-coded dependecies I could see would be easily removed. </p>\n\n<p>My methodology for this task is <em>very</em> simple, but I have no clue if it is proper as I have very little experience with DI and Unit-testing aside from what I learned here in past month.  </p>\n\n<p>I created a class, ContainerFactory that subclasses pimple, and in that subclass have created methods that simply returns container for specific object. </p>\n\n<p>The constructor calls the proper creator method depending on type:</p>\n\n<pre><code>function __construct($type=null, $mode = null){\n\n if(isset($type)){  \n    switch ($type) {\n      case 'DataFactory':\n         $this-&gt;buildDataFactoryContainer($mode);     \n        break;\n      case 'DbConnect':\n         $this-&gt;buildDbConnectContainer($mode);  \n        break;\n     default:\n        return false;\n    }\n  }\n}\n</code></pre>\n\n<p>The method signature for conainer object creation is as follows:</p>\n\n<pre><code>public function buildDataFactoryContainer($mode=null)\n</code></pre>\n\n<p>The idea being that I can set $mode to test when calling this container, and have it load test values instead of actual runtime settings. I wanted to avoid writing seperate container classes for testing, and this is the an easy way I thought to not have test related code all over. </p>\n\n<p>I could instead have subclassed ContainerFactory ie: ContainerFactoryTesting extends ContainerFactory  and override in that instead of mixing test code with app code and cluttering method signatures with $mode=null, but that is not the point of this post. Moving on,  to create a container for a particular object, I simply do this:</p>\n\n<pre><code> // returns container with DataFactory dependencies, holds $db and $logger objects.\n $dataFactoryContainer = new ContainerFactory('DataFactory');\n\n// returns container with test settings.\n$dataFactoryTestContainer = new ContainerFactory('DataFactory','test');\n\n// returns container with DbConnect dependencies, holds dbconfig and $logger objects.\n$dbConnectContainer = new ContainerFactory('DbConnect');\n</code></pre>\n\n<p>I just ran into an issue that makes suspect the strategy I am building upon is flawed.</p>\n\n<p>Looking at the above, DataFactory contains $db object that holds database connections.\nI am now refactoring out this dbclass to remove its dependencies on a $registry object, \nbut how will I create $dataFactoryContainer, when I add $db object that needs $dbConnectContainer?</p>\n\n<p>For example, in datafactory container I add a dbconnect instance, but IT will now need a container passed to it ...</p>\n\n<p>I realise my english is not that great and hope I have explained well enough for a fellow SO'er to understand.</p>\n\n<p>My question is two-fold, how do you guys handle creating objects for dependencies that themselves contain dependencies, in a simple manner?</p>\n\n<p>And .. how do you seperate container configuration for creation of objects for testing purposes?</p>\n\n<p>As always, any comment or link to relevant post appreciated.</p>\n"},{"tags":["unit-testing","googletest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":142,"score":0,"question_id":10918056,"title":"C++ Google test Framework from shell script","body":"<p>We have a C++ application exe, which has some test cases and these test cases are written using Google Test framework and are running successfully.</p>\n\n<p>But this exe handles all the Google test option internally (within\ncode) and because of this we are not able to generate the report for the Google test cases using Google test option (<code>--gtest_output=”xml: report.xml”</code>) through command prompt.</p>\n\n<p>So our question is: if some exe handle the Google test within code and we want to get reports manually from the command prompt, then is there any option to do this?</p>\n\n<p>And can we write a shell script to invoke Google test from the command prompt rather than executing the exe?</p>\n"},{"tags":["c#",".net","unit-testing","moq","tablelayoutpanel"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12260027,"title":"Accessing a combobox's SelectedIndex from within a TableLayoutPanel","body":"<p>I have the following setup:</p>\n\n<pre><code>ComboBox cb1 = new ComboBox();\nComboBox cb2 = new ComboBox();\nComboBox cb3 = new ComboBox();\nComboBox cb4 = new ComboBox();\nComboBox cb5 = new ComboBox();\n\nTableLayoutPanel tlpComboBox = new TableLayoutPanel();\ntlpComboBox.ColumnCount = 5;\ntlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));\ntlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));\ntlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));\ntlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));\ntlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));\n\ntlpComboBox.Controls.Add(cb1, 4, 0);\ntlpComboBox.Controls.Add(cb2, 3, 0);\ntlpComboBox.Controls.Add(cb3, 2, 0);\ntlpComboBox.Controls.Add(cb4, 1, 0);\ntlpComboBox.Controls.Add(cb5, 0, 0);\n</code></pre>\n\n<p>I'm then trying to check the order of comboBoxes in tlpComboBox. To do this with textboxes, i did the following:</p>\n\n<pre><code>for (i = 0; i &lt; 5; i++)\n{\n    Assert.AreNotEqual(tlpText.Controls[i].Text.ToString(), i.ToString());\n}\n</code></pre>\n\n<p>Unfortunately SelectedIndex isnt accessible after Controls[i]. when working with the comboboxes and im a little confused as to why.</p>\n\n<pre><code>for (i = 0; i &lt; 5; i++)\n{\n    Assert.AreNotEqual(tlpComboBox.Controls[i]. \"SelectedIndex isnt accessible\", i.ToString());\n}\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>Edit:</p>\n\n<p><a href=\"http://i.imgur.com/7lhzE.jpg\" rel=\"nofollow\">http://i.imgur.com/7lhzE.jpg</a></p>\n"},{"tags":["java","ruby-on-rails","unit-testing","factory","factory-girl"],"answer_count":5,"favorite_count":5,"up_vote_count":8,"down_vote_count":0,"view_count":1596,"score":8,"question_id":986509,"title":"Does a framework like Factory Girl exist for Java?","body":"<p>Factory Girl is a handy framework in rails for easily creating instances of models for testing.</p>\n\n<p>From the <a href=\"http://www.thoughtbot.com/projects/factory_girl/\"> Factory Girl home page</a>:</p>\n\n<blockquote>\n  <p>factory_girl allows you to quickly define prototypes for each of your models and ask for instances with properties that are important to the test at hand.</p>\n</blockquote>\n\n<p>An example (also from the home page):</p>\n\n<pre><code>Factory.sequence :email do |n|\n    \"somebody#{n}@example.com\"\nend\n\n# Let's define a factory for the User model. The class name is guessed from the\n# factory name.\nFactory.define :user do |f|\n    # These properties are set statically, and are evaluated when the factory is\n    # defined.\n    f.first_name 'John'\n    f.last_name  'Doe'\n    f.admin      false\n    # This property is set \"lazily.\" The block will be called whenever an\n    # instance is generated, and the return value of the block is used as the\n    # value for the attribute.\n    f.email      { Factory.next(:email) }\nend\n</code></pre>\n\n<p>if I need a user a can just call</p>\n\n<pre><code>test_user = Factory(:user, :admin =&gt; true)\n</code></pre>\n\n<p>which will yield a user with all the properties specified in the factory prototype, <em>except</em> for the admin property which I have specified explicitly. Also note that the email factory method will yield a different email each time it is called.</p>\n\n<p>I'm thinking it should be pretty easy to implement something similar for Java, but I don't want to reinvent the wheel.</p>\n\n<p>P.S: I know about both JMock and EasyMoc, however I am not talking about a mocking framework here.</p>\n"},{"tags":["unit-testing","batch","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12247513,"title":"How to execute a unit test several times in a single test run?","body":"<p>One of my tests is intermittently failing. I now want to execute the test frequently.</p>\n\n<p>I wrote a little batch file</p>\n\n<pre><code>:loop\nmstest /testcontainer:\"path/test.dll\" /test:\"mytest\"\nset /a COUNT=%COUNT%+1\nif %COUNT GTR %MAX% goto end\ngoto loop\n</code></pre>\n\n<p>While this works fine, though the output isn't meaningful or telling. Let's assume I run this test 100 times I get 100 times a text saying </p>\n\n<pre><code>Loading ... \nStarting execution ...\nResults\nPassed/Failed 1\n--------\nTotal 1\n</code></pre>\n\n<p>And 100 .trx files will be created...</p>\n\n<p>What I actually want is having an output like this</p>\n\n<pre><code>Passed 97\nFailed 3\n--------\nTotal 100\n</code></pre>\n\n<p>and just one .trx file.</p>\n\n<p>I somehow doubt that it's possible to run a test several times in a single test run at all since I didn't find any parameter on <code>mstest /help</code> output.</p>\n\n<p>Is there a way to create an output as close as possible to the given request?</p>\n"},{"tags":["unit-testing","grails","groovy","mocking"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":819,"score":3,"question_id":4056653,"title":"How do you mock out a static method of a domain object in Grails?","body":"<p>have a Grails domain object that has a custom static function to grab data from the database</p>\n\n<pre><code>class Foo {\n    /* member variables, mapping, constraints, etc. */\n\n    static findByCustomCriteria(someParameter, List listParameter) {\n        /* code to get stuff from the database... */\n\n        /*\n            Return value is a map\n            [\"one\": \"uno\", \"two\": \"due\", \"three\": \"tre\"]\n        */\n    }\n\n}\n</code></pre>\n\n<p>The static function <code>findByCustomCriteria</code> uses <code>createCriteria()</code> to build the query that pulls data from the Foo table, which means <code>mockDomain(Foo)</code> does not work properly when unit testing.  What I'm trying to do to work around this is use one of the general purpose methods of mocking to mock out <code>findByCustomCriteria</code>, but I can't get the syntax quite right.</p>\n\n<p>I have a controller <code>BarController</code> that I'm trying to test, and buried in the call to <code>BarController.someFunction()</code> there is a call to <code>Foo.findByCustomCriteria()</code>.</p>\n\n<pre><code>class BarControllerTest extends ControllerUnitTestCase {\n\n    protected void setUp() {\n        super.setUp()\n    }\n\n    protected void tearDown() {\n        super.tearDown()\n    }\n\n    void testSomeFunction() {\n\n        /* Mocking for Foo goes here */\n\n        assertEquals(\"someValue\", controller.someFunction())\n    }\n}\n</code></pre>\n\n<p>What would be a way to mock this out?</p>\n\n<p>I've tried using <code>new MockFor()</code>, <code>mockFor()</code>, and <code>metaClass</code>, but I can't get it to work.</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>Every time I tried to mock this out, I tried to mock it like so...</p>\n\n<pre><code>Foo.metaClass.'static'.findByCustomCriteria = { someParam, anotherParam -&gt;\n    [\"one\": \"uno\", \"two\": \"due\", \"three\": \"tre\"]\n}\n</code></pre>\n\n<p>I guess I didn't include enough information initially.</p>\n"},{"tags":["unit-testing","mocking","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":61,"score":1,"question_id":12210287,"title":"Whether RhinoMocks died?","body":"<p>The last build was on 1/5/2010.</p>\n\n<p>I'm going to learn a mock framework and I don't want to learn a product is going to die.</p>\n"},{"tags":["django","unit-testing","django-registration"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12254080,"title":"django registration test fails on test_get_version","body":"<p>Also, what is this test for anyway?</p>\n\n<pre><code>======================================================================\nFAIL: test_get_version (registration.tests.RegistrationVersionInfoTests)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/arnar/Documents/git/liveproject/env/local/lib/python2.7/site-packages/registration/tests/__init__.py\", line 45, in test_get_version\n    self.assertEqual(registration.get_version(), version_dict['expected'])\nAssertionError: '1.0' != '1.0 pre-alpha'\n\n----------------------------------------------------------------------\nRan 55 tests in 7.332s\n\nFAILED (failures=1)\n</code></pre>\n"},{"tags":["xcode","unit-testing","import","protocols"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12254725,"title":"Xcode import and autocomplete behaving inconsistently","body":"<p>I am relatively new to Xcode (though not to programming) and need someone to explain the following...</p>\n\n<ol>\n<li>When I create a new Protocol (just a .h file File->New...Objective-C Protocol) in a project I can't\nget #import \"MyProtocol.h\" to work in another header file.  Do I\nneed to do something special to add it properly to the project?</li>\n<li>When I create a new Unit test in the MyProjectTests group I don't\nsee autocomplete for any imports from project header files. \nSometimes, I can't get autocomplete to work for items from those\nheader files.  However, the code does build and eventually\nautocomplete does start working.</li>\n<li>In MyProject, which is a library I am writing, I use things like\n#import \"SomeClass.h\" whereas in MyProjectTests I need to use #import .  I get that the build process will copy the header files to an include directory under the name\nMyProject.  What I'm confused about is how nested #import statements\nin my library code work with this scheme since the nested #imports\ndon't refer to the include hierarchy.</li>\n</ol>\n\n<p>The first two items reflect my ignorance of the proper workflow in Xcode to create new classes, protocols, and plain old header files.  I figured out that I have to manually add header files to the Copy Files list in Build Phases (seems like something that should be automatic).  Beyond that I'm totally confused and frustrated.  Help!</p>\n"},{"tags":["java","unit-testing","environment-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12252708,"title":"It's possible to unit test modifications in windows environment variable?","body":"<p>My process simply add some content to the system variable <code>PATH</code>. Actually I'm doing this with a <code>Process</code> that use the <code>setx.exe</code>:</p>\n\n<pre><code>public void changePath(String newPath ) {\n  String path = System.getenv(\"PATH\") + \";\";\n  String[] cmd = new String[]{\"C:\\\\Windows\\\\System32\\\\setx.exe\", \"PATH\", \n      path+newPath, \"-m\"};\n  ProcessBuilder builder = new ProcessBuilder(cmd);\n  ...\n}\n</code></pre>\n\n<p>So I tried to write a test case to it.</p>\n\n<pre><code>Class UpdatePathTest {\n\n  @Test\n  public void testUpdatePath() {\n    //call the method that update the path\n    changePath(\"C:\\\\somebin\");\n    assertTrue(System.getenv(\"PATH\").contains(\"C:\\\\somebin\")); //fails\n    // ProcessBuilder with command String[]{\"cmd\", \"/C\", \"echo\", \"%PATH%\"}; will fail too.\n    //and the above in a new Thread will fail too.\n  }\n\n}\n</code></pre>\n\n<p>So, is there any way to get the new PATH value? Writing the new path is the only option, because I'm developing a jar that will install a desktop application.</p>\n"},{"tags":["php","unit-testing","junit","pdo","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":538,"score":2,"question_id":5328105,"title":"in phpunit, is there a method similar to onconsecutivecalls for use inside the \"with\" method?","body":"<p>Using PHPUnit, I'm mocking the pdo, but I'm trying to find a way to prepare more than one database query statement.</p>\n\n<pre><code>$pdo = $this-&gt;getPdoMock();\n$stmt = $this-&gt;getPdoStatementMock($pdo);\n\n$pdo-&gt;expects($this-&gt;any())\n    -&gt;method('prepare')\n    -&gt;with($this-&gt;equalTo($title_query))\n    -&gt;will($this-&gt;returnValue($stmt));\n\n$title_stmt = $pdo-&gt;prepare($title_query);\n$desc_stmt = $pdo-&gt;prepare($desc_query);\n</code></pre>\n\n<p>I want to pass something similar to onConsecutiveCalls for the \"with\" method, so I can prepare multiple statements, as seen above.\nHow would you go about doing this?</p>\n"},{"tags":["php","database","unit-testing","phpunit"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12252823,"title":"PHPUnit - database testing, how to manage that","body":"<p>Well, as in the title, I can think of three ways to manage testing the database output (I'm using ORM in my application, and PDO in unit tests). Which is the best one? How do you handle this?:</p>\n\n<ol>\n<li>Create data set with the data I want specifically for testing, and change the code so that it reads xml instead of the ORM arrays (in tests classes).<br /><br /></li>\n<li>Create setUp() method, set the attribute containing the ORM array, and work on that.<br /><br /></li>\n<li>Same as the second point, but with another database, created specifically for testing</li>\n</ol>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12241667,"title":"in PHPUnit how to force tearDownAfterClass() to run in case of unexpected exceptions","body":"<p>So every time I encounter unexpected exceptions in PHPUnit (such as fails to insert into db because of an integrity check) my tests fail and it errors out without running <code>tearDownAfterClass()</code> function. This will leave my database in a messy state so I have to manually go and clean it up. Is there a way to ensure <code>tearDownAfterClass()</code> is always executed?</p>\n"},{"tags":["unit-testing","base64"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12069598,"title":"Is there a dataset available to fully test a base64 encode/decoder?","body":"<p>I see that there are many base64 implementations available in the opensource and I found multiple internal implementations in a product that I am maintaining. </p>\n\n<p>I'm trying to factor out duplicates but I am not 100% certain that all these implementations give identical output. Therfore I need to have a dataset that tests all possible combinations of input.</p>\n\n<p>Is that somewhere available ? google search did not really report it.</p>\n\n<p>I saw a similar question on stackoverflow but that one has not been fully answered and it is actually just asking for one phrase (in ascii) that would test all 64 chars. It does not handle padding with = for example. So one test string will certainly not fit the bill for a 100% test.</p>\n"},{"tags":["unit-testing","haskell","cabal","hunit"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":124,"score":5,"question_id":11874601,"title":"How to use HUnit and Cabal to do Automated Testing?","body":"<p>I've been fighting with Cabal for a good portion of a day trying to make its automated testing features work with HUnit. I've read the documentation <a href=\"http://www.haskell.org/cabal/users-guide/developing-packages.html#test-suites\">here</a> and <a href=\"http://hackage.haskell.org/packages/archive/Cabal/1.10.1.0/doc/html/Distribution-TestSuite.html\">here</a>, and I have my Test-Suite section set up like it shows, but whenever I try and build the package using <code>cabal build</code> Cabal says that the only Test-Suite type supported is <code>exitcode-stdio-1.0</code>. What gives?</p>\n"},{"tags":["unit-testing","integration-testing","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12245351,"title":"Integration testing - mimic expected delays","body":"<p><strong>In summary</strong>:</p>\n\n<p>How do I create \"integration\" tests that mimic expected delays from external systems?</p>\n\n<p><strong>In detail</strong>:</p>\n\n<p>I have an application \"Main\" that communicates with multiple external systems (via web services) which I'll call \"Partners\".</p>\n\n<p>I am disinterested in the inner workings of the Partners, but I need to fully test Main.</p>\n\n<p>For Main I currently have:</p>\n\n<ul>\n<li>Unit Tests for each individual testable block [so test every public method on every class at every \"level\" (n-tier) and stub every dependency]</li>\n<li>Integration tests that test from the top-down (so test all public methods on the Presentation tier and stub only these partner web services)</li>\n</ul>\n\n<p>What I would also like is to create some integration tests to ensure that the code in MAIN delivers the correct performance.  </p>\n\n<p>What is \"correct performance\"?  Well, the Product Manager can say \"all Views must return data within 2 seconds\".  I know that (on average) a call to a partner takes (say) 1.5 seconds so I could write my Integration test with a stop watch that passes if the Main code completed in 0.5 seconds (2 - 1.5).  However, in a discussion with a colleague it was suggested that the Stub for the partner should include the 1.5 second expected delay, and so my test should be that the Main code plus stub for partner should complete within the 2 seconds as specified by PM.</p>\n\n<p>QUs:</p>\n\n<ol>\n<li>What is the suggested behaviour?</li>\n<li>If as suggested, how is this achieved using Rino Mocks for stubbing?</li>\n</ol>\n\n<p>Thanks everyone</p>\n\n<p>Griff</p>\n"},{"tags":["unit-testing","phpunit","cli","php.ini"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":90,"score":0,"question_id":12241183,"title":"\"Fatal error: Call to undefined method PHPUnit_Util_Filter::addfiletofilter() in /usr/bin/phpunit on line 48\"","body":"<p>I have just installed phpunit using PEAR on our Ubuntu/Linux server\n( Linux mccoy 2.6.28-11-server #42-Ubuntu SMP Fri Apr 17 02:45:36 UTC 2009 x86_64 GNU/Linux )</p>\n\n<p>when I try to run a unit test I get the error:</p>\n\n<blockquote>\n  <p>\"Fatal error: Call to undefined method PHPUnit_Util_Filter::addfiletofilter() in /usr/bin/phpunit on line 48\"</p>\n</blockquote>\n\n<p>I have googled this and came across a few threads on it however none of these seem to fix my issue.</p>\n\n<p>I have added the following line to my </p>\n\n<pre><code>/etc/php5/cli/php.ini:\n\ninclude_path = \".:/usr/share/php/PHPUnit\"\n</code></pre>\n\n<p>(I've also tried it without the \"/PHPUnit\" folder included)</p>\n\n<p>But I still get this error.</p>\n\n<p>Any help would be greatly appreciated</p>\n\n<p>gvanto</p>\n\n<p>edit: this is what is in start of file /user/bin/phpunit:</p>\n\n<pre><code>// ...just comments prior to this\n\n if (extension_loaded('xdebug')) {\n     xdebug_disable(); }\n\n if (strpos('/usr/bin/php', '@php_bin') === 0) {\n     set_include_path(dirname(__FILE__) . PATH_SEPARATOR . get_include_path()); }\n\n require_once 'PHPUnit/Util/Filter.php';\n\n PHPUnit_Util_Filter::addFileToFilter(__FILE__, 'PHPUNIT'); //line 48\n\n require 'PHPUnit/TextUI/Command.php';\n\n define('PHPUnit_MAIN_METHOD', 'PHPUnit_TextUI_Command::main');\n</code></pre>\n"},{"tags":["unit-testing","qt","qt4","code-coverage"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":749,"score":0,"question_id":4483370,"title":"Qt and gcov, coverage files are not generated","body":"<p>I am trying to obtain code coverage for a component I am writing for the Arora browser, that is written using C++ and Qt framework.</p>\n\n<p>I am not able to use the gcov program, neither under Gnu/Linux nor Mac Os X. I tried everything I was able to find on the Internet, also by forcing things automatically editing the Makefile generated by the .pro file.</p>\n\n<p>Can somebody help me please? This is my very simple pro file:</p>\n\n<pre><code>TEMPLATE = app\nTARGET =\nDEPENDPATH += .\nINCLUDEPATH += .\nLIBS += -lgcov\nQMAKE_CXXFLAGS += -g -fprofile-arcs -ftest-coverage -O0\nQMAKE_LDFLAGS += -g -fprofile-arcs -ftest-coverage  -O0\n\n\ninclude(../autotests.pri)\n\n# Input\nSOURCES += tst_quickview.cpp\nHEADERS +=\n</code></pre>\n\n<p>The Makefile does correctly contain the flags. I also tried the <code>--coverage</code> option. But nothing happens. When I run the executable, no gcov files are generated. There are no errors and no warnings. I am using the QTestLib framework.</p>\n\n<p>Thank you</p>\n"},{"tags":["java","unit-testing","junit","hsqldb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":204,"score":0,"question_id":10916729,"title":"How to use setup datasource for HSQL for junit test","body":"<p>I have written a repository class that takes a <code>javax.sql.DataSource</code> as a constructor arg, and has some basic CRUD operations on it. I now want to write junit tests for it. I want to use HSQL as my DB for these tests, but I'm not sure how to set up the DB the way I want. With a Spring app, I've put something like this in my app-context for the test:</p>\n\n<pre><code>&lt;jdbc:embedded-database id=\"dataSource\"&gt;\n    &lt;jdbc:script location=\"classpath:mySQLForDB.sql\"/&gt;\n&lt;/jdbc:embedded-database&gt;\n</code></pre>\n\n<p>However, what I'm wanting to test isn't in a Spring app. Is there anyway in code to setup the datasource and setup up the DB from a sql file? Basically something that would be functionally equivalent to what Spring is doing with the <code>&lt;jdbc:embedded-database&gt;</code> tag.</p>\n"},{"tags":["c#","unit-testing","mocking","rhino-mocks","servicehost"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12249300,"title":"How can I confirm Open() was called on my ServiceHost in my Unit Test","body":"<p>I've got a windows service that is Opening two WCF services.  I want to unit test OnStart() and assert that service1.Open() and service2.Open() is being called.  OnStart() looks like this:</p>\n\n<pre><code>protected override void OnStart(string[] args)\n{\n    // host WCF services            \n    _service1.Open();           \n    _service2.Open();\n}\n</code></pre>\n\n<p>I'm injecting the services in a constructor overload as such:</p>\n\n<pre><code>public WinService(ServiceHostBase service1, \n                                  ServiceHostBase service2)\n{\n    _service1 = service1;\n    _service2 = service2;\n    InitializeComponent();\n}\n</code></pre>\n\n<p>I'm using RhinoMocks to generate a Stub of ServiceHostBase like this:</p>\n\n<pre><code>[TestMethod()]\npublic void WinServiceOnStartCallsDependenciesAsExpected()\n{\n    ServiceHostBase service1 = MockRepository.GenerateStub&lt;ServiceHostBase&gt;();\n    ServiceHostBase service2 = MockRepository.GenerateStub&lt;ServiceHostBase&gt;();\n    WinService target = new WinService(service1, service2);\n    WinService_Accessor privateTarget = new WinService_Accessor(new PrivateObject(target));     \n    privateTarget.OnStart(null);\n</code></pre>\n\n<p>When my test calls OnStart(), I get a null reference exception when it calls service1.Open().  I've confirmed that service1 is a mocked object at that point and that it is Open() that is throwing the null.  I know that Open() is actually a method on System.ServiceModel.Channels.CommunicationObject and I tried Stubbing or Mocking that as well, but I still get the object ref error.  It's not a virtual method, so I would think it's just not being overridden by the mocked version, but when I try to set up an Expectation <code>reportservice.Stub(r => r.Open())</code>, I get a different exception about there not being a default timeout, as if it's running the actual CommunicationObject Open() method instead of something RhinoMocky that is throwing the null ref.</p>\n\n<p>All this to say, I'm just looking for help on how to confirm that Open() is being called on my ServiceHost in a Unit Test.  =]</p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12243480,"title":"running @Test one by one using reflection","body":"<p>I’m trying to run a package with many unit tests (one by one, not as a class) using reflection,\nSo when I get all the @Test methods that needs to be run I try to do</p>\n\n<pre><code>Result result = new JUnitCore().run(Request.method(Class\n                                .forName(packageAndClass),getTestName()));\n</code></pre>\n\n<p>But the class returned in packageAndClass has\n@Before, @BeforeClass methods (that also might be in its superclass)</p>\n\n<p>So when running the code above I get all the tests running and fail(because some of their values are assigned in the @Before and @BeforeClass methods)\nBut when running it from eclipse (select the test method name -> right click -> run as -> Junit test)\nThey all pass (runing together or one by one)\nIs there an api of Request that will run the before methods?</p>\n"},{"tags":["c#","unit-testing","exception",".net-4.5","async-await"],"answer_count":4,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":186,"score":6,"question_id":12248674,"title":"How can I assert that a C# async method throws an exception in a unit test?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12191831/how-do-i-test-an-async-method-with-nunit-eventually-with-another-framework\">How do I test an async method with NUnit, eventually with another framework?</a>  </p>\n</blockquote>\n\n\n\n<p>What I would like to know is how I can assert that an asynchronous method throws an exception, in a C# unit test? I am able to write asynchronous unit tests with <code>Microsoft.VisualStudio.TestTools.UnitTesting</code> in Visual Studio 2012, but have not figured out how to test for exceptions. I know that xUnit.net also supports asynchronous test methods in this way, although I haven't tried that framework yet.</p>\n\n<p>For an example of what I mean, the following code defines the system under test:</p>\n\n<pre><code>using System;\nusing System.Threading.Tasks;\n\npublic class AsyncClass\n{\n    public AsyncClass() { }\n\n    public Task&lt;int&gt; GetIntAsync()\n    {\n        throw new NotImplementedException();\n    }\n}    \n</code></pre>\n\n<p>This code snippet defines a test <code>TestGetIntAsync</code> for <code>AsyncClass.GetIntAsync</code>. This is where I need input on how to accomplish the assertion that <code>GetIntAsync</code> throws an exception:</p>\n\n<pre><code>using Microsoft.VisualStudio.TestTools.UnitTesting;\nusing System.Threading.Tasks;\n\n[TestClass]\npublic class TestAsyncClass\n{\n    [TestMethod]\n    public async Task TestGetIntAsync()\n    {\n        var obj = new AsyncClass();\n        // How do I assert that an exception is thrown?\n        var rslt = await obj.GetIntAsync();\n    }\n}\n</code></pre>\n\n<p>Feel free to employ some other relevant unit test framework than the Visual Studio one, such as xUnit.net, if necessary or you would argue that it's a better option.</p>\n"},{"tags":["unit-testing","rhino-mocks","wcf-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":188,"score":3,"question_id":10693955,"title":"Stubbing or Mocking ASP.NET Web API HttpClient","body":"<p>I am using the new Web API bits in a project, and I have found that I cannot use the normal HttpMessageRequest, as I need to add client certificates to the request. As a result, I am using the HttpClient (so I can use WebRequestHandler). This all works well, except that it isn't stub/mock friendly, at least for Rhino Mocks. </p>\n\n<p>I would normally create a wrapper service around HttpClient that I would use instead, but I would like to avoid this if possible, as there are a lot of methods that I would need to wrap. I am hoping that I have missing something - any suggestions on how to stub HttpClient?</p>\n\n<p>Thanks!\nErick</p>\n"},{"tags":["c++","unit-testing","qt4","qtestlib"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":140,"score":0,"question_id":12125833,"title":"Unit testing with QTestLib","body":"<p>I'm trying to unit-testing my Qt application with QTestLib. I saw that the new Visual Studio 2012 has a built-in C++ test framework and googling for it I saw <a href=\"http://msdn.microsoft.com/it-it/library/hh419385.aspx\" rel=\"nofollow\">this</a> page that talks about different methods to test a native project. I would have two different projects, one for the normal program and one for the tests. Actually my application is not a DLL but it's a simple C++ exe. Is the best way to test it with another project to link against .obj files or against libs? I wouldn't export anything from the source code as mine is not a DLL</p>\n"},{"tags":["php","unit-testing","selenium","selenium-ide"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":214,"score":0,"question_id":8225679,"title":"wait for user action in Selenium?","body":"<pre><code>&lt;tr&gt;\n    &lt;td&gt;type&lt;/td&gt;\n    &lt;td&gt;id=login&lt;/td&gt;\n    &lt;td&gt;aaa&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n    &lt;td&gt;click&lt;/td&gt;\n    &lt;td&gt;id=password&lt;/td&gt;\n    &lt;td&gt;bbb&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n    &lt;td&gt;type&lt;/td&gt;\n    &lt;td&gt;id=captcha&lt;/td&gt;\n    &lt;td&gt;sdfgsdfg&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>is possible add for this Selenium IDE test for PHP, waiting for user action? i would like type captcha</p>\n"},{"tags":["python","unit-testing","py.test"],"answer_count":2,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":63,"score":8,"question_id":12190596,"title":"Use time elapsed as assertion in unit tests","body":"<p>I am facing a situation in which I want to ensure that if a method is modified it does not takes more than X ms to run (essentially if that function is slower, it will slow down the search results on our web page, and that has a bad impact on sales).</p>\n\n<p>We have unit tests (in particular the code is done under python and we use py.test), the first idea is to assert that if the function did not execute in less than X ms, then mark the test as failed (or raise a warning).</p>\n\n<p>However, this feels dangerous (not all computers are the same speed, for example), and also I am not quite sure that's the job of a unit test.</p>\n\n<p>Has someone faced a similar situation? For me speed is a feature, and I want to ensure that such feature is not lost in the future as the code evolves.</p>\n\n<p>If unit testing is not the answer, which other alternatives would you recommend?</p>\n\n<p>Thanks</p>\n"},{"tags":["unit-testing","mstest","visual-studio-2012","entity-framework-5","localdb"],"answer_count":0,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":444,"score":3,"question_id":12244495,"title":"How to set up LocalDb for unit tests in Visual Studio 2012 and Entity Framework 5","body":"<p>We have a Visual Studio 2012 ASP.NET MVC project using Entity Framework 5.</p>\n\n<p>There are some unit tests that depend on a database. Setting up the app.config file in the test project to use a central SQL Server database works fine.</p>\n\n<p>However, it would be much nicer to use a LocalDb, so that each developer has his/her own database when running the tests. Especially since we would like to have the tests set up to DropCreateDatabaseAlways when running.</p>\n\n<p>However, I can't get the setup to work. If I try this in app.config</p>\n\n<pre><code>&lt;add name=\"TestDb\" \n   connectionString=\"Data Source=(LocalDb)\\v11.0;Initial Catalog=unittestdb;\n     Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\\unittestdb.mdf\"\n   providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>I get </p>\n\n<blockquote>\n  <p>System.Data.SqlClient.SqlException: A file activation error occurred.\n  The physical file name '\\unittestdb.mdf' may be incorrect. Diagnose\n  and correct additional errors, and retry the operation. CREATE\n  DATABASE failed. Some file names listed could not be created. Check\n  related errors.</p>\n</blockquote>\n\n<p>It sounds like it wants the mdf file to exist already, which seems strange since it is trying to create the database. Creating a mdf file manually does not change the error message.</p>\n"},{"tags":["unit-testing","testing","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12217288,"title":"Mocking addProvider(Class<?> klass)","body":"<p>I am trying to get used Mockito.</p>\n\n<p>I have a class</p>\n\n<pre><code>@Provider\npublic class SessionProvider  implements InjectableProvider&lt;Bind, Type&gt;{\n\n\n   @Override\n   public ComponentScope getScope() {\n      return ComponentScope.PerRequest;\n   }\n\n   @Override\n   public Injectable getInjectable(ComponentContext ic, Bind bind, Type parameter) {\n      return new SessionInjectable();\n   }\n}\n</code></pre>\n\n<p>And trying to return null when getInjectable is called.</p>\n\n<p>My use case is like so</p>\n\n<pre><code>public void addProvider(Class&lt;?&gt; klass) {\n    providers.add(klass);\n}\n\naddProvider(SessionProvider.class);\n</code></pre>\n\n<p>How can I successfully mock SessionProvider.class? </p>\n\n<p>Thanks</p>\n\n<p>Edit:</p>\n\n<p>My class is like so:</p>\n\n<pre><code>@Path(\"message\")\n@Produces(MediaType.APPLICATION_JSON)\npublic class MessageResource {\n\n   @POST\n   @Path(\"post\")\n   public String testPostMessage(@Bind Session session, Message message) {\n       return \"posted\";\n   }\n}\n</code></pre>\n\n<p>Bind annotation is using my provider. But my current framework does not accept instances of SessionProvider. It is utilizing Class instances. </p>\n\n<p>By the way this is a web service. It is called by my client implementation. I would like to test my message with a mocked session. And for each request it is requested a new one. That is the reason the method is accepting Session Class instead of Session Instance.</p>\n\n<p>I really started to feel that there is something wrong but at where?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","unit-testing","dependency-injection"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12237454,"title":"How to unit test factory in python?","body":"<p>When unit testing class one should test only against public interface of its collaborators. In most cases, this is easily achieved replacing collaborators with <em>fake objects - Mocks</em>. When using dependency injection properly, this should be easy most times.</p>\n\n<p>However, things get complicated when trying to test factory class. Let us see example</p>\n\n<p>Module <code>wheel</code></p>\n\n<pre><code>class Wheel:\n    \"\"\"Cars wheel\"\"\"\n\n     def __init__(self, radius):\n         \"\"\"Create wheel with given radius\"\"\"\n\n         self._radius = radius #This is private property\n</code></pre>\n\n<p>Module <code>engine</code></p>\n\n<pre><code> class Engine:\n     \"\"\"Cars engine\"\"\"\n\n     def __init(self, power):\n     \"\"\"Create engine with power in kWh\"\"\"\n\n         self._power = power #This is private property\n</code></pre>\n\n<p>Module <code>car</code></p>\n\n<pre><code>class Car:\n    \"\"\"Car with four wheels and one engine\"\"\"\n\n    def __init__(self, engine, wheels):\n        \"\"\"Create car with given engine and list of wheels\"\"\"\n\n        self._engine = engine\n        self._wheels = wheels\n</code></pre>\n\n<p>Now let us have <code>CarFactory</code></p>\n\n<pre><code>from wheel import Wheel\nfrom engine import Engine\nfrom car import Car\n\nclass CarFactory:\n    \"\"\"Factory that creates wheels, engine and put them into car\"\"\"\n\n    def create_car():\n        \"\"\"Creates new car\"\"\"\n\n        wheels = [Wheel(50), Wheel(50), Wheel(60), Wheel(60)]\n        engine = Engine(500)\n        return Car(engine, wheels)\n</code></pre>\n\n<p>Now I want to write an unit test for the <code>CarFactory</code>. I want to test, the factory creates objects correctly. However, I should not test the private properties of objects, because they can be changed in future and that would break my tests. Imagine, <code>Wheel._radius</code> replaced by <code>Wheel._diameter</code> or <code>Engine._power</code> replaced by <code>Engine._horsepower</code>.</p>\n\n<p>So how to test the factory?</p>\n"},{"tags":["unit-testing","python-2.7","pycharm"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":192,"score":3,"question_id":10870116,"title":"How to make unit test in pyCharm","body":"<p>I want to make some unit tests, so I set up a list with values that all should be asserted true, just like <a href=\"http://stackoverflow.com/questions/32899/how-to-generate-dynamic-unit-tests-in-python\">this question</a>. But I want it to run in <a href=\"http://www.jetbrains.com/pycharm/\" rel=\"nofollow\"><code>PyCharm</code></a> (With pressing <code>Alt</code>+<code>Shift</code>+<code>F10</code>)</p>\n\n<p>If I just use the code from the answers, I just get <code>No tests were found</code></p>\n"},{"tags":["unit-testing","maven","jar"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12238149,"title":"How to configure pom to run tests packaged in a jar?","body":"<p>I have a maven build process that publishes executable jars and their tests to Nexus.\nI have another maven build process that needs to access these jars (executable + test) and run the tests. </p>\n\n<p>How do I go about it? So far I have managed to do this only if the jar is exploded to class files.\nI am new to maven and completely lost in the documentation.</p>\n"},{"tags":["c#","unit-testing","mono","nunit","xbuild"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":764,"score":1,"question_id":4879422,"title":"Can't build NUnit testing project under Mono and Linux","body":"<p>I have a complex solution (developed under Windows, deployed under GNU\\Linux) with a number of unit-testing projects, using NUnit 2.9.3.</p>\n\n<p>Here's a reference from project:</p>\n\n<pre><code>&lt;Reference Include=\"nunit.framework, Version=2.9.3.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77, processorArchitecture=MSIL\"&gt;\n  &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;\n  &lt;HintPath&gt;..\\..\\..\\..\\..\\Program Files\\NUnit 2.9.3\\bin\\net-4.0\\nunit.framework.dll&lt;/HintPath&gt;\n&lt;/Reference&gt;\n</code></pre>\n\n<p>I downloaded and built NUnit 2.9.3 from <a href=\"http://launchpad.net/nunit-3.0/trunk/2.9.3/+download/NUnit-2.9.3-src.zip\" rel=\"nofollow\">source</a>:</p>\n\n<pre><code>$ xbuild solutions/MonoDevelop/NUnit.Framework.sln /p:Configuration=Release\n</code></pre>\n\n<p>and installed into GAC:</p>\n\n<pre><code>$ gacutil /i solutions/MonoDevelop/bin/Release/nunit.framework.dll\n\n$ gacutil /l nunit.framework\nThe following assemblies are installed into the GAC:\nnunit.framework, Version=2.9.3.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77\nNumber of items = 1\n</code></pre>\n\n<p>and deleted local mono nunit installation:</p>\n\n<pre><code>$ rm /usr/lib/mono/2.0/nunit*\n$ rm /usr/lib/mono/4.0/nunit*\n</code></pre>\n\n<p>but when I try to build my solution:</p>\n\n<pre><code>$ xbuild MySolution.sln | grep error\n\n: error CS0006: Metadata file `/usr/lib/mono/2.0/nunit.framework.dll' could not be found\n</code></pre>\n\n<p>What do I wrong?</p>\n"},{"tags":["php","unit-testing","zend-framework","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":793,"score":1,"question_id":5099179,"title":"Phpunit skeleton generator cannot find extends class","body":"<p>I have an application based on the Zend Framework that I am trying to use phpunit to generate skeletons for the test cases.  Phpunit can't seem to find the parent classes of the classes I am trying to generate for:</p>\n\n<pre><code>phpunit --skeleton-test Default_Model_Person ../application/models/Person.php \nPHPUnit 3.5.11 by Sebastian Bergmann.\n\nPHP Fatal error:  Class 'X1_Db_Table_Auditable' not found in /path/to/application/models/Person.php on line 3\n\nFatal error: Class 'X1_Db_Table_Auditable' not found in /path/to/application/models/Person.php on line 3\n</code></pre>\n\n<p>So I have for example application/models/Person.php</p>\n\n<pre><code> &lt;?php\n\nclass Default_Model_Person extends X1_Db_Table_Auditable\n{       \n</code></pre>\n\n<p>In library/X1/Db/Table/Auditable.php is</p>\n\n<pre><code>&lt;?php\n\nclass X1_Db_Table_Auditable extends X1_Db_Table\n{\n\n...\n</code></pre>\n\n<p>I have other test cases written by hand that phpunit can run on this application without a problem.  I have also tried specifying the bootstrap file with --bootstrap and the config with --configuration to make sure that the path to the library should be found, but I can't seem to get this to work (the result is the same as above).  How can I get this library class to be found by phpunit to generate the skeleton?</p>\n\n<p>I am fairly new to PHP, phpUnit and Zend, so please forgive my beginner questions ;)\nThanks in advance!</p>\n"},{"tags":["javascript","unit-testing","buster.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12240155,"title":"Why do we do delete [object].[property] inside of tearDown (unit testing)","body":"<p><strong>Code:</strong></p>\n\n<pre><code>var buster = require('buster'),\n    NumberCruncher = require('../src/NumberCruncher');\n\nbuster.testCase('Number Cruncher', {\n    setUp: function() {\n        this.numberCruncher = new NumberCruncher();\n    },\n    tearDown: function() {\n        delete this.numberCruncher;\n    },\n    'constructor returns numberCruncher': function() {\n        assert(this.numberCruncher instanceof NumberCruncher);\n    },\n    'object constructor correct': function() {\n        assert.equals(this.numberCruncher.constructor, NumberCruncher);\n    },\n    'can add numbers': function() {\n        buster.assert.equals(this.numberCruncher.add(5,3), 8, 'NumberCruncher cannot add');\n    }\n});\n</code></pre>\n\n<p><strong>Background:</strong></p>\n\n<p>In <code>setUp</code>, we are creating an object and setting it as a property of <code>this</code> (the testcase). In <code>tearDown</code> we are deleting said property.</p>\n\n<p><strong>Question:</strong></p>\n\n<p>If you had to explain the thought or reason behind the practice of deleting object properties in the <code>tearDown</code> method, what would you say? Why is this a good thing? Does it have benefits? Does it only have benefits when scaled to really big objects?</p>\n\n<p><strong>My Thoughts:</strong></p>\n\n<p>My reasoning (which may be wrong), is that we are guaranteeing garbage collection after each test is run.</p>\n"},{"tags":["java","unit-testing","testing","ant","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12238932,"title":"JUnit run tests inside a JAR","body":"<p>I'm using pure JUnit 4 test and I have them compiled inside some jars that belongs to the classpath.\nI'd like to run all the tests in my classpath. </p>\n\n<p>Is there a way?</p>\n\n<p>My tasks looks like:</p>\n\n<pre><code>&lt;target name=\"test\" description=\"All the tests\"&gt;\n    &lt;junit fork=\"yes\"&gt;\n        &lt;classpath&gt; \n            &lt;path refid=\"test.classpath\" /&gt;\n            &lt;fileset dir=\"war/WEB-INF/lib/\"&gt;\n                &lt;include name=\"*.jar\"/&gt;\n            &lt;/fileset&gt;\n            &lt;fileset dir=\"war/WEB-INF\"/&gt;\n            &lt;fileset dir=\"war\"/&gt;\n        &lt;/classpath&gt;\n    &lt;formatter type=\"plain\" usefile=\"false\" /&gt;\n\n    &lt;/junit&gt;\n&lt;/target&gt;\n</code></pre>\n"},{"tags":["spring","unit-testing","initialization","embedded-database","spring-jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":111,"score":0,"question_id":12237106,"title":"How to generate sql script for Spring's embedded database?","body":"<p>I'm using Spring embedded database in my unit tests. From Spring documentantatio:</p>\n\n<pre><code>&lt;jdbc:embedded-database id=\"dataSource\"&gt;\n    &lt;jdbc:script location=\"classpath:schema.sql\"/&gt;\n    &lt;jdbc:script location=\"classpath:test-data.sql\"/&gt;\n&lt;/jdbc:embedded-database&gt;\n</code></pre>\n\n<p>There are many examples all over the web which basically tell the same tale. I am able to manually create the sql statements from the production database. I could use mysqldump for example (assuming the SQL produced is accepted by HSQL). But my tables are already defined in .hbm.xml files. Is there a way to generate them automatically into the .sql files?</p>\n\n<p>The purpose of all this is naturally to initialize the database. My immediate intent is to only setup the tables; I'll insert the necessary test data in the unit tests themselves.</p>\n"},{"tags":["c++","unit-testing","googletest","googlemock"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":177,"score":1,"question_id":8298907,"title":"Google Test/Mock test fail if expected call is over-saturated","body":"<p>How can I make google test fail if google mocked method is called more than expected times?</p>\n\n<p>Here is the example:</p>\n\n<pre><code>class MockIO : iIO\n{\n    MOCK_METHOD1(IO_Read, void (uint8_t));\n};\n\nTEST(case, test)\n{\n    MockIO io;\n    EXPECT_CALL(io, IO_Read(0x01)).Times(10);\n    for (i=0; i&lt;20; i++)\n        io.IO_Read(0x01);\n}\n</code></pre>\n\n<p>As I understand I should try </p>\n\n<pre><code>EXPECT_CALL(io, IO_Read(0x01)).Times(10).Throw(exception);\n</code></pre>\n\n<p>But in embedded projects exceptions not used.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12225244,"title":"nose.run() seems to hold test files open after the first run","body":"<p>I'm having the same problem on Windows and Linux. I launch any of various python 2.6 shells and run nose.py() to run my test suite. It works fine. However, the second time I run it, and every time thereafter I get exactly the same output, no matter how I change code or test files. My guess is that it's holding onto file references somehow, but even deleting the *.pyc files, I can never get the output of nose.run() to change until I restart the shell, or open another one, whereupon the problem starts again on the second run. I've tried both <code>del nose</code> and <code>reload(nose)</code> to no avail.</p>\n"},{"tags":["c#","unit-testing","moles"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12237005,"title":"Microsoft Moles and type casting","body":"<p>I tries some Unit Testing and ran into a problem of testing methods which use classes instances and not the interfaces. In that case I found that MS Moles can help me. But the it seems that they are not friendly with type casting situations. And I found no info and even no questions how to deal with this situation. Example:</p>\n\n<pre><code>public class ClassA\n{\n public int Number {get {return 10;}}\n}\n\npublic class ClassB\n{\n public int Count1(ClassA arg) { return arg.Number; } \n public int Count2(object arg) { return (arg as ClassA).Number; }\n}\n</code></pre>\n\n<p>and while testing</p>\n\n<pre><code>var cl = new MolesUnitTesting.Moles.MClassA();\nMolesUnitTesting.Moles.MClassA.AllInstances.NumberGet = t1 =&gt; 20;\n</code></pre>\n\n<p>The first <code>Count</code> works just fine and returns 20 but casting in the second returns <code>Null</code>. Is there any way to test such method without using interface and usual mocking? If there is other lib that can help me please provide me with it's name.</p>\n"},{"tags":["c","unit-testing","void-pointers"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12236980,"title":"How to send a lot of variables to a generic function?","body":"<p>I have a function <code>f</code>, defined as following:</p>\n\n<pre><code>struct s {\n    void *data;\n    struct s *next;\n};\n\nvoid\nf(struct s **p, void *q)\n{\n    /* ... */\n}\n\nvoid *\ng(struct s **p)\n{\n    /* ... */\n}\n</code></pre>\n\n<p>I have to test these functions, using a lot of different arguments. But pointers to <code>void</code> can contain only an object address, right ? So how can I automate operations as following, without using temporary variable (or maybe in a macro).</p>\n\n<pre><code>f(p, 2);\nf(p, 'c');\nf(p, 3.14);\n</code></pre>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12235298,"title":"Test multiple class with same PHPUnit test case","body":"<p>I have very simple php interface:</p>\n\n<pre><code>interface HasFormattableNumber {\n    function setNumber();\n    function setFormat();\n    function formatNumber();\n}\n</code></pre>\n\n<p>Next, I have many classes implementing this interface. Unfortunately, these classes cannot have a common ancestor (possibly an abstract one which would implement these methods only once). The class basically looks like this: </p>\n\n<pre><code>class A implements HasFormattableNumber {\n    private $_number;\n    private $_format;\n\n    public function setNumber($n) {\n        $this-&gt;_number = $n;\n    }\n    public function setFormat($f) {\n        $this-&gt;_format = $f;\n    }\n    public function formatNumber() {\n        return sprintf($this-&gt;_format, $this-&gt;_number);\n    }\n}\n</code></pre>\n\n<p>An unit test would look something like this:</p>\n\n<pre><code>class ATest extends \\PHPUnit_Framework_TestCase {\n    public function testShouldFormatNumber() {\n        $a = new A();\n        $a-&gt;setNumber(123);\n        $a-&gt;setFormat(\"xx-%d\");\n        $this-&gt;assertEquals(\"xx-123\", $a-&gt;formatNumber());\n    }\n}\n</code></pre>\n\n<p>Is it possible to somehow reuse this test case for all of interface implementations? I know I can copy&amp;paste testShouldFormatNumber() to all of my unit tests, but I prefer keeping it in one place if possible.</p>\n\n<p>Would php Traits help in any way? (I'm not using php 5.4 yet, however)</p>\n"},{"tags":["ruby-on-rails","unit-testing"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":1459,"score":6,"question_id":1639711,"title":"Outputting (puts, print) in Rails Unit Tests","body":"<p>How come commands like puts and print don't show up in the console when running ActiveSupport::TestCase tests?</p>\n\n<p>Makes it very hard to debug if I can't outputs some inspections in a couple of methods.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","unit-testing","fakeiteasy"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":416,"score":3,"question_id":5351350,"title":"How to mock protected virtual members in FakeItEasy?","body":"<p>Moq allows mocking protected virtual members (<a href=\"http://blogs.clariusconsulting.net/kzu/mocking-protected-members-with-moq/\" rel=\"nofollow\">see here</a>). Is it possible to do the same in FakeItEasy?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12225578,"title":"Moq - Setting HttpResponse","body":"<p>I am trying to Mock a HttpResponse for a ConrollerContext object using MVC 4, Moq 4 and C# 4.5</p>\n\n<p>My code is here:</p>\n\n<pre><code>var context = new Mock&lt;HttpContextBase&gt;();\nvar response = new Mock&lt;HttpResponseBase&gt;();\n\ncontext.SetupProperty(c =&gt; c.Response = response);\n</code></pre>\n\n<p>I have tried using <code>Setup().Returns()</code> and <code>SetupGet()</code> but I keep getting the following error:</p>\n\n<blockquote>\n  <blockquote>\n    <p>\"Property or Indexer 'System.Web.HttpContextBase.Response' cannot be assigned to -- it is read only.</p>\n  </blockquote>\n</blockquote>\n\n<p>I have tried Googling this and searching on this website, but I can't seem to find the answer.</p>\n\n<p>Thank you very much for your time and help,</p>\n\n<p>Richard Hughes</p>\n"},{"tags":["ruby-on-rails","unit-testing","rspec","routing","rspec2"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12225555,"title":"Testing subdomain constraint when routing to a mounted Rack app","body":"<p>I have a Sinatra app mounted in my <code>routes.rb</code>.</p>\n\n<pre><code>constraints ApiSubdomain do\n  mount API =&gt; '/'\nend\nroot :to =&gt; 'public#index'\n</code></pre>\n\n<p>The constraints class is very simple, allowing for <code>api.domain.com</code>, or <code>api.staging.domain.com</code> to route to the mounted app:</p>\n\n<pre><code>class ApiSubdomain\n  def self.matches?(request)\n     request.subdomain.present? &amp;&amp; request.subdomain == 'api' || /^api\\..*/.match(request.subdomain)\n  end\nend\n</code></pre>\n\n<p>How can I test this in RSpec? the <code>route_to</code> matcher expects a controller to be passed to it.</p>\n"},{"tags":["ruby-on-rails","unit-testing","fixtures"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":1630,"score":6,"question_id":2985125,"title":"Rail test case fixtures not loading","body":"<p>Rails appears to <strong>not</strong> be loading <strong>any</strong> fixtures for unit or functional tests. I have a simple 'products.yml' that parses and appears correct:</p>\n\n<pre><code>ruby:\n  title: Programming Ruby 1.9\n  description:\n    Ruby is the fastest growing and most exciting dynamic\n    language out there. If you need to get working programs\n    delivered fast, you should add Ruby to your toolbox.\n  price: 49.50\n  image_url: ruby.png\n</code></pre>\n\n<p>My controller functional test begins with:</p>\n\n<pre><code>require 'test_helper'\n\nclass ProductsControllerTest &lt; ActionController::TestCase\n  fixtures :products\n\n  setup do\n    @product = products(:one)    \n    @update = {\n      :title =&gt; 'Lorem Ipsum' ,\n      :description =&gt; 'Wibbles are fun!' ,\n      :image_url =&gt; 'lorem.jpg' ,\n      :price =&gt; 19.95\n    }\n  end\n</code></pre>\n\n<p>According to the book, Rails should \"magically\" load the fixtures (as my <code>test_helper.rb</code> has <code>fixtures :all</code> in it. I also added the explicit fixtures load (seen above). Yes Rails complains:</p>\n\n<pre><code>user @ host ~/Dropbox/Rails/depot &gt; rake test:functionals\n(in /Somewhere/Users/user/Dropbox/Rails/depot)\n/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby -Ilib:test \"/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader.rb\" \"test/functional/products_controller_test.rb\" \nLoaded suite /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake/rake_test_loader\nStarted\nEEEEEEE\nFinished in 0.062506 seconds.\n\n  1) Error:\ntest_should_create_product(ProductsControllerTest):\nNoMethodError: undefined method `products' for ProductsControllerTest:Class\n    /test/functional/products_controller_test.rb:7\n\n  2) Error:\ntest_should_destroy_product(ProductsControllerTest):\nNoMethodError: undefined method `products' for ProductsControllerTest:Class\n    /test/functional/products_controller_test.rb:7\n...\n</code></pre>\n\n<p>I did come across the other Rails test fixture question <a href=\"http://stackoverflow.com/questions/1547634/rails-unit-testing-doesnt-load-fixtures\">http://stackoverflow.com/questions/1547634/rails-unit-testing-doesnt-load-fixtures</a>, but that leads to a plugin issue (something to do with the order of loading fixtures).</p>\n\n<p>BTW, I am developing on Mac OS X 10.6 with Rail 2.3.5 and Ruby 1.8.7, no additional plugins (beyond the base install). </p>\n\n<p>Any pointers on how to debug, <strong>why</strong> the magic of Rails appears to be failing here? Is it a version problem? Can I trace code into the libraries and find the answer? There are so many \"mixin\" modules I can't find where the <code>fixtures</code> method really lives.</p>\n"},{"tags":[".net","unit-testing","mocking","nsubstitute"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12217474,"title":"How to substitute exception?","body":"<p>I want to substitute an exception and it's fields.</p>\n\n<p>Something like that:</p>\n\n<pre><code>var webExcetion = Substitute.For&lt;WebException&gt;();\nwebExcetion.Response.Returns(httpWebResponse);\nsubstituteForHttp.GetResponse(Arg.Any&lt;string&gt;()).Returns(x =&gt; { throw webExcetion; });\n</code></pre>\n\n<p>This code throws Castle.Proxies.ExceptionProxy or NSubstitute.Exceptions.CouldNotSetReturnException by NSubstitute.</p>\n\n<p>How can I do that?</p>\n"},{"tags":["unit-testing","testing","functional-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":56,"score":-2,"question_id":12191479,"title":"How to achieve Test Coverage OR Best Practices in Test coverage","body":"<p>Can anyone please tell me how we can achieve a complete test coverage.</p>\n"},{"tags":["python","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":11750437,"title":"Initializing logger in python unit test","body":"<pre><code>import logging\n\nclass TestMyClass(unittest.TestCase):\n       def __init__(self):\n            self.logger = logging.getLogger('MyClassLog')\n\n       def setUp(self):\n</code></pre>\n\n<p>I am trying to instantiate the logger in the constructor. But I get this error:\n            ...\nTypeError: <strong>init</strong>() takes exactly 1 argument (2 given)</p>\n\n<p>Why is this? How to instantiate logger correctly?</p>\n"},{"tags":["ruby-on-rails","ruby","ruby-on-rails-3","unit-testing","fixtures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12221820,"title":"Rails Fixtures that reference local path","body":"<p>I'm using fixtures and I'm running a test where I need to access a URL of a file from a certain person. I don't want to go over the internet to fetch this everytime so I have downloaded the file and put it in my test directory <code>\"/test/sample/somefile.html\"</code>.</p>\n\n<p>How do I write the local path in my fixture file so I can access <code>file_path</code> within my test.</p>\n\n<pre><code>#BEFORE\nthree: \n id: 3\n user: Joey\n file_path: http://www.google.com/somefile.html\n last_modified:\n\n\n\n#AFTER\nthree: \n id: 3\n user: Joey\n file_path: &lt;%= \"./test/sample/somefile.html\" %&gt;\n last_modified:\n</code></pre>\n"},{"tags":["iphone","unit-testing","nslocalizedstring"],"answer_count":5,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":983,"score":5,"question_id":3833128,"title":"Unit Testing iPhone Code That Uses NSLocalizedString","body":"<p>I have an iPhone iOS4.1 application that uses localized strings. I have just started building unit tests using the SenTestingKit. I have been able to successfully test many different types of values.</p>\n\n<p>I am unable to correctly test any of my code that uses NSLocalizedString calls, because when the code runs in my LogicTests target, all of my NSLocalizedString calls only return the string key.</p>\n\n<p>I have added my Localizable.strings file to the LogicTests target.</p>\n\n<p>My question is: How must I configure my LogicTests target so that calls to NSLocalizedString will return the localized string and not the string key.</p>\n"},{"tags":["unit-testing","hsqldb","junit4","spring-jdbc","database-independent"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":11792601,"title":"how can I make Spring JDBC queries independent of database?","body":"<p>I'm using Spring Jdbc 3.0.5 RELEASE, and we are using DB2 database as per our client's requirement. We want to run our tests against HSQL DB bcz we dont want to disturb the DB2 primary keys(which are implemented by creating sequences) with our tests.</p>\n\n<p>And I've used \"jdbc:embedded-database\" tag in ApplicationContext.xml related to tests to create the required tables and inserted dummy data for tests (which ran successfully) .</p>\n\n<p>But now obviously we are facing issues with the syntax of the queries we wrote in DB2 Dialect in the DAO Layer.</p>\n\n<p>What is the best possible solution to overcome this problem?</p>\n\n<p>And is there any 'Hibernate Criteria' like API that supports Spring jdbc to make our queries related to Joins(which are more painful when running against HSQL) run on any db</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["unit-testing","meteor"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":220,"score":5,"question_id":12198642,"title":"Is meteor code effectively unit testable?","body":"<p>I am currently looking into the meteor framework and this question immediately jumps to mind.\nIs code which I write (for example Template.xxx code or Template.xxx.events) actually testable in any way?</p>\n\n<p>Of course you can test code which is not bound to the meteor runtime as you would any other code, but my impression is that most code you will write inside of meteor is somehow scoped to meteor and its functions.</p>\n"},{"tags":["c++","unit-testing","c++builder","xunit","dunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12216718,"title":"What alternative to DUnit with C++ Builder?","body":"<p>I have some projects developed with <strong>C++ builder XE</strong>.<br>\nI would like to add some unit test, but the <strong>DUnit</strong> framework installed is nice for Delphi, but the integration with C++ builder is not so good (and very limited).</p>\n\n<p>What other xUnit framework can I easily work with ?</p>\n"},{"tags":["unit-testing","junit","attach","jmockit"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":120,"score":1,"question_id":12205354,"title":"AttachNotSupportedException while running jMockit tests on IBM JRE","body":"<p>I am getting the below exception when I try to run a simple jMockit/JUnit test using IBM JDK. Has anyone faced this issue? I tried given <code>-Dcom.ibm.tools.attach.enable=yes</code> as VM argument but no luck. The same code is working fine in Sun JDK.</p>\n\n<pre><code>java.lang.RuntimeException: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism\n    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:89)\n    at mockit.internal.startup.JDK6AgentLoader.loadAgent(JDK6AgentLoader.java:54)\n    at mockit.internal.startup.AgentInitialization.initializeAccordingToJDKVersion(AgentInitialization.java:21)\n    at mockit.internal.startup.Startup.initializeIfNeeded(Startup.java:98)\n    at mockit.internal.startup.Startup.initializeIfPossible(Startup.java:112)\n    at org.junit.runner.Runner.&lt;clinit&gt;(Runner.java:22)\n    at java.lang.J9VMInternals.initializeImpl(Native Method)\n    at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)\n    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)\n    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)\n    at org.junit.internal.builders.JUnit4Builder.runnerForClass(JUnit4Builder.java:13)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)\n    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)\n    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.&lt;init&gt;(JUnit4TestReference.java:33)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.&lt;init&gt;(JUnit4TestClassReference.java:25)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\nCaused by: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism\n    at sun.tools.attach.WindowsVirtualMachine.&lt;init&gt;(WindowsVirtualMachine.java:64)\n    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:73)\n    ... 22 more\njava.lang.NoClassDefFoundError: org.junit.internal.runners.ErrorReportingRunner (initialization failure)\n    at java.lang.J9VMInternals.initialize(J9VMInternals.java:140)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\n    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.&lt;init&gt;(JUnit4TestReference.java:33)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.&lt;init&gt;(JUnit4TestClassReference.java:25)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\nCaused by: java.lang.NoClassDefFoundError: org.junit.runner.Runner (initialization failure)\n    at java.lang.J9VMInternals.initialize(J9VMInternals.java:140)\n    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\n    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)\n    ... 9 more\nCaused by: java.lang.RuntimeException: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism\n    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:89)\n    at mockit.internal.startup.JDK6AgentLoader.loadAgent(JDK6AgentLoader.java:54)\n    at mockit.internal.startup.AgentInitialization.initializeAccordingToJDKVersion(AgentInitialization.java:21)\n    at mockit.internal.startup.Startup.initializeIfNeeded(Startup.java:98)\n    at mockit.internal.startup.Startup.initializeIfPossible(Startup.java:112)\n    at org.junit.runner.Runner.&lt;clinit&gt;(Runner.java:22)\n    at java.lang.J9VMInternals.initializeImpl(Native Method)\n    at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)\n    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)\n    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)\n    at org.junit.internal.builders.JUnit4Builder.runnerForClass(JUnit4Builder.java:13)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)\n    ... 11 more\nCaused by: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism\n    at sun.tools.attach.WindowsVirtualMachine.&lt;init&gt;(WindowsVirtualMachine.java:64)\n    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:73)\n    ... 22 more\n</code></pre>\n\n<p>I tried giving the VM argument <code>-javaagent:jmockit.jar</code> as suggested by Kevin Welker and I got the below exception.</p>\n\n<pre><code>Exception in thread \"main\" java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n    at java.lang.reflect.Method.invoke(Method.java:600)\n    at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:335)\n    at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:350)\nCaused by: java.lang.NullPointerException\n    at mockit.internal.annotations.MockClassSetup.validateRealClass(MockClassSetup.java:59)\n    at mockit.internal.annotations.MockClassSetup.&lt;init&gt;(MockClassSetup.java:38)\n    at mockit.internal.annotations.MockClassSetup.&lt;init&gt;(MockClassSetup.java:77)\n    at mockit.internal.annotations.MockClassSetup.&lt;init&gt;(MockClassSetup.java:99)\n    at mockit.internal.startup.JMockitInitialization.setUpInternalStartupMock(JMockitInitialization.java:56)\n    at mockit.internal.startup.JMockitInitialization.initialize(JMockitInitialization.java:29)\n    at mockit.internal.startup.Startup.initialize(Startup.java:68)\n    at mockit.internal.startup.Startup.premain(Startup.java:56)\n    ... 6 more\n\nFatal error: processing of -javaagent failed\n</code></pre>\n"},{"tags":["javascript","unit-testing","coffeescript","mocha","should.js"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12218842,"title":"callback being called twice when my unit test fails","body":"<p>I can't figure out why my save callback is being called twice in my mocha test when the callback fails.  It doesn't call the save twice, it only fires the callback for the save again but with the should error when my 2nd unit test fails.  If I take out the failing should assertion should.exist err from the second test it seems to work fine and doesn't trigger the save index callback twice.</p>\n\n<pre><code>class User\n\n  constructor : (@name, @email, @pwd) -&gt;\n  save : (callback) -&gt;\n    unless this.validate()\n      throw new Error('invalid data')\n    else\n      user = \n        name  : @name\n        email : @email\n        pwd   : @pwd\n\n      node = db.createNode user\n\n      node.save (err) -&gt;\n        unless err        \n          user.id = node.id;\n          node.index 'User', 'name', user.name.toLowerCase(), (err2) -&gt;\n            #why is this being fired twice when an assert in the callback fail?\n            console.log '----------- triggering the save callback'\n            callback err2, user\n\n        else\n          callback err\n</code></pre>\n\n<p>the mocha test</p>\n\n<pre><code>describe \"User\", -&gt;\n    it \"should be able to save\", (done) -&gt;\n        user = new User(\"quark\", \"quark@ds9.com\", \"profit\")\n        user.save (err, result) -&gt;\n            should.exist result\n            done err\n\n    #this second unit test should fail since the duplicate checking is not yet implemented\n    it \"should not allow duplicates to be saved\", (done) -&gt;\n        user = new User(\"quark\", \"quark@ds9.com\", \"profit\")\n        user.save (err, result) -&gt;\n            console.log err\n            should.exist err #this triggers the user.save callback to be fired twice\n            done null\n</code></pre>\n\n<p>And the test results</p>\n\n<pre><code>  User\n    ◦ should be able to save: ----------- triggering the save callback\n    ✓ should be able to save (43ms)\n    ◦ should not allow duplicates to be saved: ----------- triggering the save callback\nundefined\n----------- triggering the save callback\n{ name: 'AssertionError',\n  message: 'expected undefined to exist',\n  actual: undefined,\n  expected: undefined,\n  operator: undefined }\n    ✓ should not allow duplicates to be saved \n\n\n  ✔ 2 tests complete (69ms)\n</code></pre>\n"},{"tags":["android","unit-testing","tdd"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":102,"score":0,"question_id":12215003,"title":"TDD of android applications","body":"<p>I need some advices and guidance related to TDD of android applications</p>\n\n<p>I'm developing a complex android application (an automated robo player for a web game). Now i have a pilot for it, and before start continue with it's development, i want to make full TDD for it.</p>\n\n<p>The main purpose of this application is run as a background service that communicates with a http server - it will send http requests with json content</p>\n\n<p>It has to 2 modes of running: </p>\n\n<pre><code>- service mode - it will run in background- read some data configuration from database and communicate with the server \n- GUI mode - communication with server on demand + configuration for running in service mode.\n</code></pre>\n\n<p>GUI layer is designed as MVP, so all business done in a module (a MVP unit) is separated from view, therefore, all app logic is \"NON android dependent\".</p>\n\n<p>I have several big layers that i need to make unit tests for:</p>\n\n<pre><code>- domain data access : \n      database storage (ormlite)\n      android specific storage - shared prefs.., \n      files\n- server communication - http client (spring android rest template)\n                         http content conversion (gson)\n\n- background services - android services\n- GUI - activities\n- app business - android independent - algorithms, computations, ...\n</code></pre>\n\n<p>In conclusion will need TDD - for every of these layers individually, but also integration tests for a complete flow.</p>\n\n<p>tests included :</p>\n\n<pre><code>  - database DAO tests\n  - http client requests \n  - GSON conversion TDDs\n  - business logic - simple tests for methods\n  - unit testsfor running and scheduled background services\n  - activity unit testing\n  - test suites (service + DAO + json conversion + http requests)\n</code></pre>\n\n<p>My first question is what TDD frameworks would be best for my needs? Should i use mocking or not ?</p>\n\n<p>Please give me some directions to go for. Thanks</p>\n"},{"tags":["java","unit-testing","command-line","junit"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1579,"score":4,"question_id":9288107,"title":"Run single test from a JUnit class using command-line","body":"<p>I have been looking around but I have not found any approach that will allow me to run a single test from a JUnit class using only command-line.</p>\n\n<p>I can run the whole set of tests from the class using the following:</p>\n\n<p><code>java -cp .... org.junit.runner.JUnitCore org.package.classname</code></p>\n\n<hr>\n\n<p>What I really want to do is something like this:</p>\n\n<p><code>java -cp .... org.junit.runner.JUnitCore org.package.classname.method</code></p>\n\n<p>or</p>\n\n<p><code>java -cp .... org.junit.runner.JUnitCore org.package.classname#method</code></p>\n\n<hr>\n\n<p>I noticed that there might be ways to do this using JUnit annotations, but I would prefer to not modify the source of my test classes by hand (attempting to automate this). I did also see that Maven might have a way to do this, but if possible I would like to avoid depending on Maven.</p>\n\n<p>So I am wondering if there is any way to do this?</p>\n\n<hr>\n\n<p>Keypoints I'm looking for:</p>\n\n<ul>\n<li>Ability to run a single test from a JUnit test class</li>\n<li>Command Line (using JUnit)</li>\n<li>Avoid modifying the test source</li>\n<li>Avoid using additional tools</li>\n</ul>\n"},{"tags":["ruby-on-rails","ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12217483,"title":"Using Rails Test Syntax in Ruby","body":"<p>like most people, I have learned Rails before Ruby and now I would like to get a better knowlege of Ruby.<br>\nI am making some scripts and I would like to test them.<br>\nI was surprised by the fact that you can't use Rails' test syntax in plain ruby scripts. The following code does not work:  </p>\n\n<pre><code>require \"test/unit\"\nclass MyTest &lt; Test::Unit::TestCase\n  test \"one plus one should be equal to two\" do\n    assert_equal 1 + 1, 2\n  end\nend\n\n# Error: wrong number of arguments (1 for 2) (ArgumentError)\n</code></pre>\n\n<p>You have to use this code instead:</p>\n\n<pre><code>require \"test/unit\"\nclass MyTest &lt; Test::Unit::TestCase\n  def one_plus_one_should_be_equal_to_two\n    assert_equal 1 + 1, 2\n  end\nend\n</code></pre>\n\n<p>Which seems less readable to me.<br>\nIs it possible to use the \"declarative\" syntax in plain Ruby scripts?</p>\n\n<p>Thanks!</p>\n"},{"tags":["android","unit-testing","testing","networking"],"answer_count":5,"favorite_count":6,"up_vote_count":16,"down_vote_count":0,"view_count":23293,"score":16,"question_id":3002886,"title":"How to disable/enable network, switch to Wifi in Android emulator?","body":"<p>I'm working on a Push Notifications library for Android (<a href=\"http://deaconproject.org/\" rel=\"nofollow\">http://deaconproject.org/</a>) that needs to take action if network connectivity is interrupted or changed - namely, it needs to re-initiate a server connection or pause its operation until network connectivity is available. This seems to work fine using and Android BroadcastReceiver for \"android.net.ConnectivityManager.CONNECTIVITY_ACTION\".</p>\n\n<p>My problem is in testing the library - I would like to automatically test the library's response to a broken network connection, or a transition from 3G to WiFi, under various configuration conditions. The problem is, I don't want to sit with the emulator and hit F8 all day.</p>\n\n<p>Is there a way to programmatically manipulate network connections on Android from within a jUnit test without resorting to toggling Airplane Mode? I've already tried issuing commands to the emulator via the console, manipulating the GSM mode, etc, but while the phone state changes on the display, the Internet connection remains up.</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":814,"score":5,"question_id":3799061,"title":"Speeding up Django Testing","body":"<p>Im looking to learn more about your testing flows with Django.</p>\n\n<p>Background information\n<a href=\"http://docs.djangoproject.com/en/dev/topics/testing/\" rel=\"nofollow\">http://docs.djangoproject.com/en/dev/topics/testing/</a></p>\n\n<p>Im encountering difficulties when using test driven development.\nThe test runner of Django constantly creates all db models in a test db when starting.\nFor our current projects (between 40 and 240 models) this means it takes easily 20s for tests to start.</p>\n\n<p>This makes it completely unworkable for testing a new feature often.\nMy question, how do you guys work around this?</p>\n\n<p>I've tried a few things in the past\na.) - change the testloader to reuse the same test db every time and apply migrations when needed\nb.) - run my unit tests from within the <code>__main__</code> flow of python files</p>\n\n<p>option b is awkward with the sys.path, option a is doable but doesnt seem to be the django way.</p>\n\n<p>Update:\nOption A is indeed not such a bad solution. Its just quite a bit of effort. Which makes me believe people use a different workaround. SQL lite could be that workaround. But im guessing there are more.</p>\n"},{"tags":["unit-testing","mstest","gallio"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":918,"score":3,"question_id":3883180,"title":"Gallio: Cannot run tests because the MSTest executable was not found","body":"<p>I installed the newest Gallio release 3.2.603 on a box without Visual Studio that will be our CI server. The NAnt script successfully built the .Net 4.0 projects but when it tries to run MSTest tests the following error occurs.</p>\n\n<p>[gallio] Gallio NAnt Task - Version 3.2 build 601</p>\n\n<p>[gallio] [error] Assembly XXXXXXXXXXXXXX</p>\n\n<p>[gallio] Cannot run tests because the MSTest executable was not found</p>\n\n<p>Am I wrong to expect that Gallio is able to run MSTest tests without the MSTest executable or any other Visual Studio components installed?</p>\n"},{"tags":["unit-testing","maven","filtering","maven-resources-plugin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12192761,"title":"How to use maven filtering function from maven resources plugin","body":"<p>I have a java-project that is developed with help of maven. Part of the project is unit-testing. I plan to put all temporary files that are produced by unittests into maven's target directory. This might be a good idea, because if for whatever reason temporary files are not removed by unittests, target directory may be cleaned and with it all temporary files still lying around in the file-system. So i found <a href=\"http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html\" rel=\"nofollow\">filtering</a> function of the maven resources plugin and was wondering if it possible to instantiate it for my usecase. My plan is to have an entry in the properties file like this</p>\n\n<pre><code>targetdir = ${project.build.directory}\n</code></pre>\n\n<p>which should offer me a property that reveals the location of mavens target-directory. Now, caveeat is, the filtered property file is stored in the target directory by the maven resource plugin. <br>How can i find it there? I need the properties file to tell me where the target-directory is, but the properties-file is in the target directory?\nIs my approach still worth beeing done? Or is it not possible this way?</p>\n"},{"tags":["c#",".net","unit-testing","resharper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12213960,"title":"How to Clear the Output console in Resharper's Unit Test Runner Window","body":"<p>How do you programmatically clear the Output console in Resharper's <a href=\"http://www.jetbrains.com/resharper/documentation/help20/UnitTestSupport/runUnitTests.html\" rel=\"nofollow\">Unit Test Runner Window</a>?</p>\n\n<p>You can write to it by simply doing <code>Console.Write()</code> in your unit test, but if you call <code>Console.Clear()</code> you get the <code>IOException</code>.</p>\n\n<p>The problem is there appears to be some sort of limit of how many characters could be shown in that console and my test exceeds it.</p>\n"},{"tags":["android","unit-testing","frameworks","tdd","mocking"],"answer_count":2,"favorite_count":5,"up_vote_count":10,"down_vote_count":0,"view_count":1536,"score":10,"question_id":6261504,"title":"Android Test Driven Development","body":"<p>I have considerable experience in making Android applications. For my new project, we have decided to do Test Driven Development (TDD). I have been getting my hands wet on Robotium for User Scenario Testing, and it works fine and looks easy too. </p>\n\n<p>For unit testing, I tried to mock Context using (MockContext Android Class) but I am unable to do so. I went through this blog <a href=\"http://sites.google.com/site/androiddevtesting/\">http://sites.google.com/site/androiddevtesting/</a> and through this <a href=\"http://sdudzin.blogspot.com/2011/01/easy-unit-testing-for-android.html\">http://sdudzin.blogspot.com/2011/01/easy-unit-testing-for-android.html</a> , which suggests that mocking in Android apps is still very limited and hard, and have suggested to use PowerMock, jMockit, JeasyTest, or Roboelectric (in combination with Mockito and Maven) and even RoboGuice. </p>\n\n<p>I would like to get any suggestions from you guys on which unit testing framework in your opinion is the best for testing Android applications. (particularly testing Android classes, possibly giving mock Contexts and other mocking features so that I can make my test cases as independent as possible). Any suggestions or pointers would be helpful . Thanks </p>\n"},{"tags":["python","unit-testing","django-unittest","unittest2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12212136,"title":"How to test methods that compute relative time in python using unitttest?","body":"<p>I have a method in a django model that does a computation relative to the current time. Here is a snippet:</p>\n\n<pre><code>def next_date():\n    now = datetime.now()\n    trial_expires = max(self.date_status_changed + timedelta(self.trial_days), now)\n    return timezone.datetime(trial_expires.year, trial_expires.month+1, 1, tzinfo=trial_expires.tzinfo)\n</code></pre>\n\n<p>What's the proper way to test this in django/python using unittest? What I'd like to do is be able to hard code some values for \"now\" in the test so I can try the various edge cases. Ideally, I'd like to avoid relying on the current time and date in the test.</p>\n\n<p>One approach would be to modify my method to accept an optional parameter that would override the 'now' value it uses. Does python have any functions to do something similar without having to modify my method signature?</p>\n"},{"tags":["unit-testing","testing","nunit","teamcity-6.5"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":423,"score":5,"question_id":6947048,"title":"Running NUnit tests in TeamCity 6.5.X with NUnit addins","body":"<p>We are using TeamCity 6.5.1 to manage the compilation, testing and deployment of our builds.  Up until now we have been using the NUnit Build Runner from TeamCity to run our tests with NUnit 2.5.8 and had great success.</p>\n\n<p><a href=\"http://confluence.jetbrains.com/display/TCD65/NUnit\">http://confluence.jetbrains.com/display/TCD65/NUnit</a></p>\n\n<p>All of our tests are written in C# and .Net 4.0 using Visual Studio 2010.  The test projects are compiled into an assembly that we reference through the TeamCity interface.</p>\n\n<p>Now we are adding in a new test project for UI tests that require a custom NUnit addin that we developed to extend the native NUnit functionality.  When running the tests in a local development environment with NUnit 2.5.8 installed we are able to place the custom addin in the NUnit addins directory.  When NUnit is loaded our addin is picked up automatically.</p>\n\n<p>C:\\Program Files (x86)\\NUnit 2.5.8\\bin\\net-2.0\\addins</p>\n\n<p>Using the NUnit Build Runner in TeamCity 6.5.1 we cannot see of a way to install our addin.  Unlike the native installation of NUnit, TeamCity does not appear to pick up an addin just by placing it inside a sub directory of the NUnit installation.</p>\n\n<p>Does anyone know of a way to install/use an addin using the NUnit Build Runner?  Existing documentation discusses the NUnit command line console runner which we are not using.  We are using the NUnit Build Runner as the method to run all of our tests so it would be most ideal if we could maintain a standard testing mechanism.</p>\n\n<p>Thank you!</p>\n"},{"tags":["c#","linq","unit-testing","ef-code-first"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":210,"score":3,"question_id":12197046,"title":"How to unit test Entity Framework?","body":"<p>I'm trying to test my code using EntityFramework code first. In order to make it testable and to allow isolation testing, I created an interface which my <code>DbContext</code> implements. I'm not testing the <code>DbContext</code> class - I'm going to assume EF code works as expected.</p>\n\n<p>Now, consider the following method:</p>\n\n<pre><code>public IEnumerable&lt;User&gt; GetOddId()\n{\n    return context_.Users.Where((u, i) =&gt; i % 2 == 1).AsEnumerable();\n}\n</code></pre>\n\n<p>This method will pass with my mock <code>FakeDbSet</code> (because it would use the in-memory LINQ provider) whereas it would fail with an Exception when using the EF/LINQ to SQL drivers.</p>\n\n<p>Would you leave it as it is and hope people know enough not to write such queries? Would you give up isolation testing and test on an actual db?</p>\n\n<p>Would the LocalDb with DataMigrations (perhaps with appropriate seeds) help with testing on an actual db?</p>\n\n<p>Please justify the answer(s).</p>\n\n<p>TLDR: How to test EntityFramework code, considering the differences between in-memory LINQ and SQL LINQ?</p>\n"},{"tags":["python","unit-testing","monkeypatching"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12210910,"title":"Monkey patch a function in a module for unit testing","body":"<p>I have the following method in a module that calls another method imported from another module:</p>\n\n<pre><code>def imported_function():\n    do_unnecessary_things_for_unittest()\n</code></pre>\n\n<p>The actual method that needs to be tested, imports and uses the above function:</p>\n\n<pre><code>from somewhere import imported_function\n\ndef function_to_be_tested():\n    imported_function()\n    do_something_more()\n    return 42\n</code></pre>\n\n<p>The inner calls and related calculations inside <strong>imported_function</strong> are not important and they are not what I want to test so I just want to skip them while testing the actual function <strong>function_to_be_tested</strong>.</p>\n\n<p>Thus, I tried to monkey patch the module named <strong>somewhere</strong> inside the test method but no luck.</p>\n\n<pre><code>def test_function_to_be_tested(self):\n    import somewhere\n    somewhere.__dict__['imported_function'] = lambda : True\n</code></pre>\n\n<p>The question is, how can I monkey patch a method of a module while testing so that it will not be called during the test phase?</p>\n\n<p>Thanks.</p>\n"},{"tags":["delphi","unit-testing","freepascal","dunit","fpcunit"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":217,"score":3,"question_id":12204224,"title":"Single-source unit tests for Free Pascal and Delphi","body":"<p>Is there a way to write unit tests so that they can be compiled and run both with Delphi and Free Pascal? </p>\n\n<p>There are different unit test frameworks for Delphi and Free Pascal, which causes duplicate work for developers who target both compilers (for example, library and framework developers).</p>\n\n<p>So maybe there is a way, using either the DUnit or the FPCUnit framework and tweak the test case source code (or the framework itself) so that it also works with the other compiler.</p>\n\n<p>So essentially the question is:</p>\n\n<ul>\n<li>which framework (DUnit or FPCUnit) can be compiled with both compilers (Delphi and Free Pascal) with as little modifications as possible?</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>is there a third framework (Thanks to Arnaud for mentioning TSynTest) which works with Delphi and FPC?</li>\n</ul>\n"},{"tags":["unit-testing","scala","mocking","playframework-2.0","mockito"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":135,"score":1,"question_id":12182908,"title":"Mocking logger in Play! 2 Framework","body":"<p>I have a Play! 2 application (Scala) and there I have some classes that need to perform logging when they get errors.</p>\n\n<p>I would like to be able to unit test that these logging actions actually take place in the right conditions. To do so, I need to be able to mock the logger, but I am getting some issues with Mockito. What I have (simplified) looks like</p>\n\n<pre><code>import play.api.{ Logger, LoggerLike }\n\ntrait BaseService {\n  val log: LoggerLike\n\n  def fail(reason: String) {\n    log.error(reason)\n   }\n}\n\nobject Service extends BaseService {\n  val log = Logger\n}\n</code></pre>\n\n<p>and then in the tests</p>\n\n<pre><code>import org.specs2.mutable._\nimport org.specs2.mock._\nimport services.BaseService\n\nobject Service extends BaseService with Mockito {\n  val log = mock[play.api.Logger]\n\n  def verify(key: String) = {\n    there was one(log).error(key)\n  }\n}\n\nclass ServiceSpec extends Specification {\n  \"failures should be logged\" in {\n    Service.fail(\"foo\")\n    Service.verify(\"foo\")\n  }\n}\n</code></pre>\n\n<p>But I get the error</p>\n\n<pre><code>[error]     NullPointerException: null (Logger.scala:43)\n[error] play.api.LoggerLike$class.isErrorEnabled(Logger.scala:43)\n[error] play.api.Logger.isErrorEnabled(Logger.scala:147)\n[error] play.api.LoggerLike$class.error(Logger.scala:127)\n[error] play.api.Logger.error(Logger.scala:147)\n[error] services.BaseService$class.fail(Service.scala:19)\n[error] Service$.fail(ServiceSpec.scala:11)\n...\n</code></pre>\n\n<p>I tried adding</p>\n\n<pre><code>log.isErrorEnabled returns true\nlog.error(any[String]) returns {}\n</code></pre>\n\n<p>but then even the initialization of Service fails.</p>\n"},{"tags":["c#","database","unit-testing","nhibernate"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":12197250,"title":"unit testing a database query via nhibernate","body":"<p>I need to create a unit test for a method which loads data from the database. I was researching a bit into unit testing and databases, and most articles tell you that you should mock the database.  However, this method basically loads objects from a database, and performs some restrictions via SQL.</p>\n\n<p>Therefore, what I want to test is that the actual database query is working successful, hence I don't think one can mock the database. </p>\n\n<p>I am using NHibernate as my ORM, and the query is being built using <code>QueryOver</code>.  I find it extremely problematic to unit-test databases, due to the database being in an inconsistent state.  Any ideas / methods how one would go about doing such a test?</p>\n\n<p>This is the particular method I would like to unit-test:</p>\n\n<pre><code>public IEnumerable&lt;IArticlePanel&gt; LoadPanelsApplicableToArticle(ArticleModule.IArticle article, Enums.ARTICLE_PANEL_LOCATION location)\n   {\n       CS.General_v3.Util.ContractsUtil.RequiresNotNullable(article, \"Article must not be null\");\n\n       var articleList = Modules.Factories.ArticleFactory.GetAllParentsForAnArticle(article).ToList();\n       articleList.Add(article);\n\n       var q = GetQuery();\n       q = q.WhereRestrictionOn(x =&gt; x.Article).IsInG(articleList.ConvertAll&lt;long&gt;(x =&gt; ((IBaseDbObject)x).ID));\n       q = q.Where(x =&gt; x.Location == location);\n       return FindAll(q);\n }\n</code></pre>\n"},{"tags":[".net","asp.net-mvc-3","wcf","unit-testing","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12208091,"title":"for what layer need to write unit test?","body":"<p>I am new to unit testing / TDD.  We are developing a web application with the following architecture:</p>\n\n<ol>\n<li>MVC </li>\n<li>WCF service layer</li>\n<li>Business Logic Layer</li>\n<li>DAL with EF</li>\n</ol>\n\n<p>I have not done unit testing before but saw it in some projects so I have not a clear idea about it.</p>\n\n<p>Should we write unit test for every method of every layer or these are specific to some layer ?</p>\n\n<p>Secondly should we put one project and put all layers unit test in it ? I want to know how to manage unit tests for all layers in test project ?</p>\n"},{"tags":["python","unit-testing","gui","nose","nosetests"],"answer_count":3,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":695,"score":6,"question_id":2235701,"title":"Are there any visual tools for Python unit tests?","body":"<p>I'm writing quite a few unit tests and using <a href=\"http://somethingaboutorange.com/mrl/projects/nose/0.11.1/\" rel=\"nofollow\">nosetests</a> to run them.  Nose certainly makes it nice and easy to run tests, but the output can be pretty cluttered at the best of times, and a downright mess at others, depending on warnings and errors.</p>\n\n<p>I was wondering if there are any visual tools that wrap nose so that the feedback cleaner.  A results grid showing test names, run times and indicating success/failure status with colours would be a huge visual aide.  Better still, if it could split up the error messages and tracebacks on a case by case basis, it would <em>really</em> cut down on the amount of clutter when a large number of tests fail on a major change.</p>\n\n<p>This is starting to read like a wishlist, but does anything even <em>close</em> to this exist?</p>\n"},{"tags":["xml","unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":9350017,"title":"phpunit testing xml output","body":"<p>I have written an API which gets data from another API and converts it into XML. How do I use phpunit to test that the output is the expected XML and is valid?</p>\n\n<p>Should I create a sample xml with all the nodes and then check the output against it?</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12205360,"title":"Moq not calling method named Finalize","body":"<p>OK, I am baffled at this point. Moq is not calling my one method, yet the assert on verify does show it is calling all my other methods that are not parameterless. I have even added the following:</p>\n\n<pre><code>.Throws&lt;Exception&gt;()\n</code></pre>\n\n<p>just to see if it would even throw, and still nothing (but adding it to other methods works). I know the object being used is my mock because I added a call that IS being logged immediately after the call that is not.</p>\n\n<p>The method name is <code>Finalize()</code>. I doubt the naming of the method is the problem, but I have tried everything else.</p>\n\n<p>Code After simplifying down to simplest solution by making the main method public:</p>\n\n<pre><code>  var asyncRecognizerMock = new Mock&lt;AsyncRecognizer&gt;();\n  var asyncRecognizerFactoryMock = new Mock&lt;AsyncRecognizerFactory&gt;();\n  var trainerMock = new Mock&lt;Trainer&gt;();\n  trainerMock.Setup(trainer =&gt; trainer.Finalize()).Verifiable();\n  var trainerDataRepository = new TrainerDataRepository(asyncRecognizerFactoryMock.Object, asyncRecognizerMock.Object);\n\n  trainerDataRepository.FinalizeTrainer(trainerMock.Object);\n\n  trainerMock.Verify(trainer =&gt; trainer.Finalize(), Times.Once());\n</code></pre>\n\n<p>My method is now:</p>\n\n<pre><code>public void FinalizeTrainer(Trainer wordTrainer)\n{\n  wordTrainer.Finalize();\n}\n</code></pre>\n\n<p>Also, Moq is 4.0.10827.0 running against .Net 3.5</p>\n"},{"tags":["unit-testing","qt4","qt-creator"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":81,"score":2,"question_id":12194256,"title":"Qt: How to organize Unit Test with more than one class?","body":"<p>I have a Qt Unit test (sub)project, which generates me one class (with the main generated by <code>QTEST_APPLESS_MAIN</code>).I can start this from within Qt Creator as console app.</p>\n\n<p>Q: How would I add additional classes as test cases to this particular project.</p>\n\n<ol>\n<li>If these classes only have \"test\" slots (<code>private Q_SLOTS</code>), the methods are not called, but just the ones of the class with <code>QTEST_APPLESS_MAIN</code></li>\n<li>Since there can be only one <code>main(..)</code>, I cannot use <code>QTEST_APPLESS_MAIN</code> with more than one class in the project (is that correct?)</li>\n<li>Of course, I can manually \"wire\" the slots in the (additional) classes with the one class containing the <code>main</code>, but this is very tedious. </li>\n</ol>\n\n<p>So what is the best way to run unit test over several classes in a unit test project? </p>\n\n<p>PS:\nIn \" <a href=\"http://stackoverflow.com/questions/9780602/using-qt-unit-tests-in-a-project-conflicting-main-functions\">Using QT Unit Tests in a project - conflicting main(...) functions</a> \" a <a href=\"http://qtcreator.blogspot.ca/2010/04/sample-multiple-unit-test-project.html\" rel=\"nofollow\">Blog is mentioned</a>, however, I cannot download the zip describing the solution.</p>\n\n<p><img src=\"http://i.stack.imgur.com/PjbhV.png\" alt=\"Qt Unit Test subproject\"></p>\n"},{"tags":["c#","java","unit-testing","junit","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12205612,"title":"State of an Object with respect to unit testing","body":"<p>I have the following class:</p>\n\n<pre><code>class UserValidator{\n\n     // no constructor , default is fine. \n\n     void Validate(Request request, Response response){\n        // some validation logic on request\n        // if fails, add the message to response.\n     }\n\n}\n</code></pre>\n\n<p>Similarly I can do the same as follows:</p>\n\n<pre><code>class UserValidator{\n\n     private Request request;\n     private Response response;\n\n     UserValidator(Request _request, Response _response)\n     {\n         request = _request;\n         response = _response;\n     }\n\n     void Validate(){\n        // some validation logic for request\n        // if fails, add the message to response.\n     }\n\n}\n</code></pre>\n\n<p>For Testing which one is more preferable? Can i say that the second UserValidator class has a state and thus easier to test, whereas first one doesnt have a state and harder to test? Matter of the fact the first one can be a static class as well, which can not be passed to other methods, but if called statically it doest work.</p>\n\n<p>Which one is better in terms of testability? which one contains state? which is more ideal?</p>\n"},{"tags":["security","unit-testing","surefire"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12205400,"title":"SercurityManager not playing well with powermock running surefire","body":"<p>I want to restrict access to the file system and the network while running unit tests. I have gotten things pretty much working up until I use powermock and it gives me this error:</p>\n\n<pre><code>Tests in error: \n  initializationError({full.path.to.test.Class}): javassist.NotFoundException: org.powermock.api.extension.proxyframework.ProxyFrameworkImpl\n</code></pre>\n\n<p>I have give some permissions to the code base and other libraries that it depend on\nmy security policy looks as follows:</p>\n\n<pre><code>// all code gets the following permissions\ngrant {\npermission java.io.FilePermission \"${java.io.tmpdir}\", \"read,write\";\npermission java.io.FilePermission \"${basedir}/-\", \"read\";\npermission java.util.PropertyPermission \"*\", \"read,write\";\npermission java.lang.RuntimePermission \"createClassLoader\";\npermission java.lang.RuntimePermission \"getClassLoader\";\npermission java.lang.RuntimePermission \"setContextClassLoader\";\npermission java.lang.RuntimePermission \"shutdownHooks\";\npermission java.lang.RuntimePermission \"setIO\";\npermission java.lang.RuntimePermission \"modifyThread\";\npermission java.lang.RuntimePermission \"modifyThreadGroup\";\npermission java.lang.RuntimePermission \"getProtectionDomain\";\npermission java.lang.RuntimePermission \"readFileDescriptor\";\npermission java.lang.RuntimePermission \"accessDeclaredMembers\";\npermission java.lang.RuntimePermission \"reflectionFactoryAccess\";\npermission java.lang.RuntimePermission \"accessClassInPackage.sun.reflect\";\npermission java.lang.RuntimePermission \"accessClassInPackage.sun.reflect.*\";\npermission java.lang.RuntimePermission \"accessClassInPackage.org.powermock\";\npermission java.lang.RuntimePermission \"defineClassInPackage.org.powermock\";\npermission java.lang.RuntimePermission \"accessClassInPackage.org.powermock.*\";\npermission java.lang.RuntimePermission \"defineClassInPackage.org.powermock.*\";\npermission java.lang.RuntimePermission \"loadLibrary\";\npermission java.lang.reflect.ReflectPermission \"*\";\npermission java.io.SerializablePermission \"*\";\n};\n\n// maven, junit and testing libraries codebase get full permissions\ngrant codeBase \"file:/usr/share/maven/lib/-\" {\npermission java.security.AllPermission;\n};\ngrant codeBase \"file:${settings.localRepository}/org/apache/maven/-\" {\npermission java.security.AllPermission;\n};\ngrant codeBase \"file:${settings.localRepository}/junit/junit/-\" {\npermission java.security.AllPermission;\n};\ngrant codeBase \"file:${settings.localRepository}/org/powermock/-\" {\npermission java.security.AllPermission;\n};\ngrant codeBase \"file:${settings.localRepository}/org/mockito/-\" {\npermission java.security.AllPermission;\n};\ngrant codeBase \"file:${settings.localRepository}/javassist/-\" {\npermission java.security.AllPermission;\n};\n\n// spring codebase gets some additional permissions suitable for bean factory\ngrant codeBase \"file:${settings.localRepository}/org/springframework/-\" {\npermission java.lang.RuntimePermission \"*\";\npermission java.io.FilePermission \"${settings.localRepository}/-\", \"read\";\n};\n</code></pre>\n\n<p>Also, the parts of my pom that runs surefire with the security manager are as follows:</p>\n\n<pre><code>&lt;profile&gt;\n    &lt;id&gt;security-manager&lt;/id&gt;\n    &lt;activation&gt;\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n    &lt;/activation&gt;\n    &lt;properties&gt;\n        &lt;test.env&gt;-Dtest.basedir=${project.build.directory}/test-classes&lt;/test.env&gt;\n        &lt;policy.file&gt;${project.build.directory}/test-classes/unit testing.policy&lt;/policy.file&gt;\n        &lt;surefire.jvm.args&gt;-Djava.security.manager -Djava.security.policy=${policy.file} ${test.env}&lt;/surefire.jvm.args&gt;\n    &lt;/properties&gt;\n&lt;/profile&gt;\n\n...\n\n&lt;plugin&gt;\n     &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n     &lt;version&gt;2.12.2&lt;/version&gt;\n     &lt;configuration&gt;\n          &lt;failIfNoTests&gt;false&lt;/failIfNoTests&gt;\n          &lt;skipTests&gt;false&lt;/skipTests&gt;\n          &lt;reportsDirectory&gt;${surefire.and.failsafe.report.dir}&lt;/reportsDirectory&gt;\n          &lt;forkMode&gt;always&lt;/forkMode&gt;\n          &lt;argLine&gt;${surefire.jvm.args}&lt;/argLine&gt;\n     &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>If have tried giving:\n    permission java.security.AllPermission;\nto the top grant block and itt works, but obviously that defeats the purpose.</p>\n\n<p>Any ideas please help.\nThanks</p>\n"},{"tags":["java","unit-testing","easymock"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12204361,"title":"Using EasyMock to test a method that constructs another object","body":"<p>I have a method like this:</p>\n\n<pre><code>public void MyMethod(int p1, int p2) {\n  //some logic here\n  MyObject mo = new MyObject(var1,var2);\n  int returnedId = mo.doOperation(something);\n  //Do something with the returnedId;\n}\n</code></pre>\n\n<p>I want to test this method but I can't mock the constructor call, so a test around this would break modularity. I could do it with a factory method or something but since I only have one constructor there is no point.</p>\n\n<p>How is this generally done using EasyMock?</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","named-scope","testcase"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12204010,"title":"Rails Testing a named_scope with a date range","body":"<p><strong>SCENARIO</strong><br>\nI have a named_scope on a model called 'last_week'. All it does is it fetches the records from last week.  </p>\n\n<p>I want to test this and my approach is to test that the results coming back are within a certain range. I don't know if this is the right way of testing this functionality on a class method.</p>\n\n<p>I can't use RSpec, Shoulda or other 3rd party client plugin. I am only allowed to use Mocha if I want.</p>\n\n<pre><code># Model\n\nclass Article &lt; ActiveRecord::Base\n\n  scope :last_week,   :conditions =&gt; { :created_at =&gt; 1.week.ago..DateTime.now.end_of_day }\n\nend\n\n\n#Test\n\nclass ArticleTest &lt; ActiveSupport::TestCase\n\n  test \"named scope :last_week \" do\n    last_week_range = DateTime.now.end_of_day.to_i - 1.week.ago.to_i\n    assert_in_delta last_week_range, Article.last_week.first.created_at - Article.last_week.last.created_at,  last_week_range\n  end\n\nend\n</code></pre>\n\n<p>Looking for feedback on what's right or wrong about this approach.</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12204291,"title":"Moq - How to mock web service call?","body":"<p>The <code>using</code> below hits an external resource that I do not want to actually hit.  I want to test <code>someResult</code> and the code that uses it, but every time I run my unit test, this code still tries to hit the real web service.  How do I use moq to fake the real call to the web service, but not mock the rest of the code within the using?</p>\n\n<pre><code>public IMyInterface.SomeMethod()\n{    \n     // hits a web service\n     using ( mySoapClient client = new mySoapClient() )\n     {\n          var someResult = client.DoSomething();\n       ...\n       ...\n     }\n}\n\n\n[TestMethod()]\npublic void SomeMethodTest()\n{\n    IMyInterface target = new MyInterface();\n    target.SomeMethod();\n\n    // Assert....\n}\n</code></pre>\n"}]}
{"total":15323,"page":17,"pagesize":100,"questions":[{"tags":["python","unit-testing","python-2.6"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12202085,"title":"How to set up a resource shared by several unit tests?","body":"<p>In Python, how can I have one setup (which may contain expensive function calls) for a whole set of unit tests?</p>\n\n<p>Example:</p>\n\n<pre><code>import unittest\n\nclass Test1(unittest.TestCase):\n    def setUp(self):\n        print \"expensive call\"\n    def test1(self):\n        self.assertEqual(1, 1)\n    def test2(self):\n        self.assertEqual(1, 1)\n\nif __name__ == \"__main__\":\n    unittest.main()\n</code></pre>\n\n<p>Will run the expensive call twice:</p>\n\n<pre><code>$ python unittest.py\nexpensive call\n.expensive call\n.\n----------------------------------------------------------------------\nRan 2 tests in 0.000s\n\nOK\n</code></pre>\n\n<p>How can I change it so the expensive call is made only once and its resources accessible to all tests?</p>\n\n<p>UPDATE: I'm using Python 2.6.</p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12202771,"title":"Junit Test Null Point Excception","body":"<p>I am currently doing JUnit test for my hospital administration System. But When Attempt to check the boolean value of the insertDoctor Method Null Point Exception Came in JUnit Test. That point Statement stmt=con.createStatement. I Have attached all the Code Below. Pl check it.</p>\n\n<pre><code>public class JUnitTest extends TestCase {\n    private Connection con;\n    public JUnitTest(String testName) {\n        super(testName);\n        con=DBConnector.getConnection();\n    }\n\n    @Override\n    protected void setUp() throws Exception {\n        super.setUp();\n    }\n\n    @Override\n    protected void tearDown() throws Exception {\n        super.tearDown();\n    }\n    // TODO add test methods here. The name must begin with 'test'. For example:\n    // public void testHello() {}\n    public void testdeltePatient() throws SQLException{\n\n        Patients p=new Patients();\n       assertEquals(true, p.removePatient(333));\n\n    }\n    public void testdeleteDoctor() throws SQLException{\n\n        Doctors d=new Doctors();\n       d.setSpeciality(\"General\");\n       d.setSumOfQn(\"MBBS\");\n       d.setExp(\"3 Years\");\n\n\n        d.setDocId(678);\n        d.setEmpId(4344);\n\n        assertEquals(true, d.insertDoctor(d));\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><img src=\"http://i.stack.imgur.com/QtjCK.jpg\" alt=\"enter image description here\"></p>\n\n<hr>\n\n<pre><code>public class Doctors extends Employee  {\n\n    private int docId;\n    private String exp;\n    private String sumOfQn;\n    private int empId;\n    private String speciality;\n    private Connection con;\n\n    public String getSpeciality() {\n        return speciality;\n    }\n\n    public void setSpeciality(String speciality) {\n        this.speciality = speciality;\n    }\n\n    public Doctors() {\n\n        con = DBConnector.getConnection();\n    }\n\n    public int getDocId() {\n        return docId;\n    }\n\n    public void setDocId(int docId) {\n        this.docId = docId;\n    }\n\n    public String getExp() {\n        return exp;\n    }\n\n    public void setExp(String exp) {\n        this.exp = exp;\n    }\n\n    public String getSumOfQn() {\n        return sumOfQn;\n    }\n\n    public void setSumOfQn(String sumOfQn) {\n        this.sumOfQn = sumOfQn;\n    }\n\n    @Override\n    public int getEmpId() {\n        return empId;\n    }\n\n    @Override\n    public void setEmpId(int empId) {\n        this.empId = empId;\n    }\n\n    public Connection getCon() {\n        return con;\n    }\n\n    public void setCon(Connection con) {\n        this.con = con;\n    }\n\n    public ResultSet getEmployeeId() throws SQLException {\n\n        ResultSet rs;\n        String query = \"select * from employee\";\n        Statement stmt = con.createStatement();\n        rs = stmt.executeQuery(query);\n\n        return rs;\n\n    }\n\n    public boolean insertDoctor(Doctors d) throws SQLException {\n\n\n        PreparedStatement ps;\n        boolean result = false;\n        **Statement stmt = con.createStatement();**\n\n        String query = \"INSERT INTO doctors VALUES ('\" + d.getDocId() + \"','\" + d.getSpeciality() + \"','\" + d.getExp() + \"','\" + d.getEmpId() + \"',' \" + d.getSumOfQn() + \"')\";\n        ps = con.prepareStatement(query);\n        int res = ps.executeUpdate();\n        if (res &gt; 0) {\n            result = true;\n        }\n\n        return result;                       \n    }\n}\n</code></pre>\n"},{"tags":["c++","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":173,"score":1,"question_id":7460385,"title":"UnitTest++ and main","body":"<p>I want to give TDD a try and I've chosen the UnitTest++ framework, but the documentations is almost non-existent (to my knowledge).</p>\n\n<p>My concern is this: in all the tutorials I've seen, they put <code>UnitTest::RunAllTests()</code> in the <code>main()</code> function. I'm guessing they do it only to simplify the explanation, but I wouldn't want that with my software. Where should I put <code>UnitTest::RunAllTests()</code> so that I can have it executed every time I build the software but not when I run it?</p>\n"},{"tags":["python","unit-testing","code-coverage","nose","coverage.py"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12200528,"title":"How to exclude a file from coverage.py?","body":"<p>I use <code>nosetest</code>'s <code>coverage.py</code> plugin. Is it somehow possible to exclude entire files or folders from the coverage report? My use case is having an external library in my project folder that obviously isn't covered by my test suite.</p>\n"},{"tags":["python","django","unit-testing","requestfactory"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12200083,"title":"request.read() is an empty string using RequestFactory.delete()","body":"<p>I'm testing my application views using the <a href=\"https://docs.djangoproject.com/en/dev/topics/testing/#the-request-factory\" rel=\"nofollow\">RequestFactory</a>. One of my views expects the request to be made by AJAX and the method to be DELETE in order to process some actions.</p>\n\n<p>I'm using jQuery for ajax calls. When I do:</p>\n\n<pre><code>$.ajax({\n    url: '/some_url',\n    type: 'DELETE',\n    data: {\n        var1: 'value1',\n        var2: 'value2'\n    }\n});\n</code></pre>\n\n<p>in my view I get the parameters sent via <code>request.read()</code> and everything works perfeect, but when in my test I do:</p>\n\n<pre><code>def test_something(self):\n    url = reverse('some_url')\n    request = RequestFactory().delete(url, data={\n        'var1': 'value1',\n        'var2': 'value2'\n    }, HTTP_X_REQUESTED_WITH='XMLHttpRequest')\n    response = views.my_view(request)\n    # some assertions\n</code></pre>\n\n<p>I get that <code>request.read()</code> returns an empty string <code>''</code>. I know we can't expect to do something like <code>request.DELETE['key']</code> since such dict is not implemented in the request object.</p>\n\n<p>Does anyone know what is the proper way to use <code>RequestFactory().delete</code> method to send key-value pairs like I do in the aforementioned ajax call?</p>\n\n<p>Thanks in advance for any help! :)</p>\n"},{"tags":["python","unit-testing","testing","python-3.x","mocking"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":190,"score":1,"question_id":7060836,"title":"How to mock objects with constructors in Python3?","body":"<p>I'm new to Python (I'm from Java) and I'm facing an issue in using mocks in Python3.2.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>import gzip    \n\nclass MyClass:\n\n    _content = None\n\n    _gzipfile = gzip.GzipFile\n\n    def __init__(self, content):\n        self._content = content\n\n    def my_method(self):\n        # Code ...\n        gzipper = self._gzipfile(fileobj=data)\n        return gzipper.read()\n\n\nimport unittest\nfrom mockito import *\n\nclass MyClassTest(unittest.TestCase):\n\n    def my_method_test(self):\n        gzipfile = mock\n        myclass = MyClass()\n        myclass._gzipfile = mock\n        myclass.my_method\n</code></pre>\n\n<p>I would like to unit test my method (I'm using the mockito lib for mocks). But when I execute the test, I receive this:</p>\n\n<pre><code>TypeError: __init__() got an unexpected keyword argument 'fileobj'\n</code></pre>\n\n<p>In this case I'm forced to call the GzipFile object with a named parameter.</p>\n\n<p>Is there a nice way to mock this GzipFile object (and similar ones)?</p>\n"},{"tags":["entity-framework","unit-testing","ef-code-first","integration-testing","entity-framework-5"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12191241,"title":"How should I separate integration tests for an EF code first DAL and pure unit tests of the DAL clients?","body":"<p>Having seen some strong advice against testing EF against mocks, especially Code First, I have decided to go with integration testing against a SqlCe database dedicated to testing, and then use pure unit tests further downstream from the unit of work and repositories provided by DbContext and DbSet.</p>\n\n<p>I am just unclear where to draw the line and what to test where. I know I can mock the DAL in my service layer when I am confident the DAL specific integration tests cover its insides, but what do I test in the DAL? There doesn't seem to be much point testing to see if I can save and read an object, because EF is external and already tested. </p>\n"},{"tags":["c#","wpf","unit-testing","data-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":12195259,"title":"How can I automatically verify that all controls in my views are set with binding?","body":"<p>Looking for a way to automatically verify, using unit-tests for example, that all controls in my WPF application are set to Binding.</p>\n\n<p>I'm using data-binding to enable localization in the application.\nFor example, a TextBlock control in a view will have it's Text property binding to 'SomeLocalizedLabel' property in the view model.</p>\n\n<p>I need to make sure that I won't miss any control, and all my 'TextBlock' controls have their 'Text' property bound to something.</p>\n\n<ul>\n<li>I can check the correctness of the localization itself in the ViewModel level.</li>\n<li>I can check that all public ViewModel properties are bound to something in the view using the <a href=\"http://devlicio.us/blogs/rob_eisenberg/archive/2008/10/25/unit-test-wpf-data-bindings-with-caliburn.aspx\" rel=\"nofollow\">Caliburn.Testability assembly</a> or <a href=\"http://habanerolabs.com/Blogs/tabid/247/PostID/29/Unit-Testing-WPF-Bindings-Adding-a-Fluent-interface.aspx\" rel=\"nofollow\">some other method</a>.</li>\n</ul>\n\n<p>The thing that missing here is to test the View level.\nUI testing framework is not the solution I'm looking for, because I wish for something that can be written and executed fast.</p>\n"},{"tags":["unit-testing","asp.net-mvc-4","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":202,"score":0,"question_id":12190982,"title":"MVC WebApi - System.MissingMethodException : Method not found: 'Void System.Net.Http.ObjectContent","body":"<p>I updated to the final version of MVC4 and now my tests are failing with this error:</p>\n\n<pre><code>System.MissingMethodException : Method not found: 'Void System.Net.Http.ObjectContent`1..ctor(!0, System.Net.Http.Formatting.MediaTypeFormatter, System.Net.Http.Headers.MediaTypeHeaderValue)'. \nat System.Net.Http.HttpRequestMessageExtensions.CreateResponse(HttpRequestMessage request, HttpStatusCode statusCode, T value, HttpConfiguration configuration)\n</code></pre>\n\n<p>On my unit test I have (it was working with RC version):</p>\n\n<pre><code>var configuration = new HttpConfiguration(); \nvar request = new HttpRequestMessage(); \nvar controller = ClassUnderTest; \ncontroller.Request = request; \ncontroller.Request.Properties[\"MS_HttpConfiguration\"] = configuration;\n</code></pre>\n\n<p>When I run my test I have the exception on this line of code inside the controller:</p>\n\n<pre><code>return Request.CreateResponse(HttpStatusCode.Created, myObj);\n</code></pre>\n\n<p>I tried different things but I could not fix the tests. Any ideas?</p>\n"},{"tags":["algorithm","unit-testing","design","testing"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":177,"score":3,"question_id":12190091,"title":"random number generator test","body":"<p>How will you test if the random number generator is generating actual random numbers?</p>\n\n<p>My Approach: Firstly build a hash of size M, where M is the prime number. Then take the number\n             generated by random number generator, and take mod with M.\n             and see it fills in all the hash or just in some part.\n             That's my approach. Can we prove it with visualization?</p>\n\n<p>Since I have very less knowledge about testing. Can you suggest me a thorough approach of this question? Thanks in advance</p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12194696,"title":"How shall I inherit tests to avoid redundancy in defining test data?","body":"<p>Initially, I wrote a class (lets call it <code>RangeSet</code>) that operated on an <code>ArrayList</code> of intervals (the interval class defined by me as two Long values). The list was a collection of intervals, there was a <code>void add(Range range)</code> method which checked whether there was an overlap, overwriting, containment or adjacency with intervals already on the list. The point was to hold the list of non-overlaping intervals.</p>\n\n<p>I designed and wrote extensive tests for that class, checking the wide variety of cases that may occur.\nIt's a lot of code is what I'm saying.</p>\n\n<p>Now it turns out that (for whatever reason) I had to split that class into two seperate classes - <code>RangeSet</code> will be an abstract class with a couple of useful methods and inherited from it - <code>ArrayRangeSet</code> (holding the collection of intervals in <code>ArrayList</code>) and <code>TreeRangeSet</code> (holding the collection of intervals in a <code>TreeSet</code>). The implementation of <code>add(Range range)</code> method differs a lot between those two.</p>\n\n<p>How shall I inherit tests to avoid redundancy in defining test data?</p>\n\n<p>An example test looks like this:</p>\n\n<pre><code>@Test\nvoid testCase4(){\n    RangeSet set = new RangeSet();\n    Range r1 = new Range(4, 5);\n    Range r2 = new Range(13, 15);\n    Range r3 = new Range(19, 22);\n    set.add(r1);\n    set.add(r2);\n    set.add(r3);\n\n    Range testRange = new Range(11,100);\n    set.add(testRange);\n\n    assertEquals(2,set.iterator().size());\n    assertEquals(new Range(4,5),set.iterator().getAt(0));\n    assertEquals(new Range(11,100),set.iterator().getAt(1));\n}\n</code></pre>\n\n<p>I dont know whether I'm being clear: There's a lot of test data defining and tests for those two classes would look the same. How do I solve that?</p>\n\n<p>EDIT: Is there a way to pass those assert statements to inherited test classes? Afterall, those <code>add</code> methods are supposed to achieve the same goal, albeit by different operations.</p>\n"},{"tags":["c#",".net","linq","unit-testing","collections"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":100,"score":3,"question_id":12188634,"title":"How to test an IEnumerable<int>","body":"<p>in a test I need to test an object:</p>\n\n<pre><code>IEnumerable&lt;int&gt; Ids.\n</code></pre>\n\n<p>The collection contains the numbers 1,2 and 3.</p>\n\n<p>I basically wanted to test that there are three ids in Ids and that 1,2 and 3 are all present.</p>\n\n<p>The problem is there isn't a count on IEnumerable.</p>\n\n<p>I thought I was going to be able to go:</p>\n\n<pre><code>Assert.AreEqual(3, Ids.Count);\n</code></pre>\n\n<p>Anyone know how to do this and how to ensure 1,2 and 3 are the actual numbers in there?</p>\n"},{"tags":["android","unit-testing","jdbc","crud"],"answer_count":0,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12193704,"title":"Manipulate a SQLite database outside of Android to test CRUD functions","body":"<p>I would like to unit test my CRUD functions on a copy of my SQLite database, outside of Android.\nI have retrieved the database file of my emulator and i use <a href=\"http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC\" rel=\"nofollow\">JDBC drvier</a> </p>\n\n<p>Here is the tutorial that i followed (<a href=\"http://a-renouard.developpez.com/tutoriels/android/sqlite/\" rel=\"nofollow\">link</a>). I subclass SQLiteOpenHelper.</p>\n\n<pre><code> @Override\n public void setUp() throws Exception {\n Connection connection = null;\n ResultSet resultSet = null;\n statement = null;\n\n try {\n Class.forName(\"org.sqlite.JDBC\");\n connection = DriverManager\n .getConnection(\"jdbc:sqlite:C:\\\\test.db\");\n statement = connection.createStatement();\n } catch (Exception e) {\n e.printStackTrace();\n } finally {\n try {\n resultSet.close();\n statement.close();\n connection.close();\n } catch (Exception e) {\n e.printStackTrace();\n }\n }\n</code></pre>\n\n<p>I would like to apply my functions on that copy of my db, but i don't know how to do.</p>\n\n<pre><code>public CRUDoperation(Context context) {\n    bdSQLite = new BDSQLite(context, NAME_BDD, null, VERSION_BDD);\n}\n</code></pre>\n\n<p>it instanciates my subclass of SQLiteOpenHelper which is linked to my real DB.</p>\n\n<p>I am really lost, is my idea feasible ?\nAnd if it is, how could i do it ?</p>\n\n<p>Thx</p>\n"},{"tags":[".net","visual-studio","unit-testing","code-coverage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12192356,"title":"Peculiar CodeCoverage Highlighting","body":"<p>When you run tests in Visual Studio (with activated CodeCoverage) the code is highlighted to show which parts of code have been executed and which not.</p>\n\n<p>There are three different kinds of highlighting, <em>Not Touched Area</em>, <em>Touched Area</em> and <em>Partially Touched Area</em>. The following two pseudo codes shows examples in which the code will be partially touched.</p>\n\n<pre><code>if (true || false)\n\nif (false &amp;&amp; true)\n</code></pre>\n\n<p>However, when I run tests I wonder about the highlighting of my code. The blue background indicates that the code has been completely touched, while the dark orange indicates that the code has been partially touched. (The highlight on the last line is <em>current line</em>)</p>\n\n<p><img src=\"http://i.stack.imgur.com/kV5bD.png\" alt=\"enter image description here\"></p>\n\n<p>This does not make sense at all. Since the if statement is built up of a <em>logical AND</em> operation it must be completely touched to enter the code for the true statement.</p>\n\n<p>I reckon this is a bug, however, I just wanna be clear that I don't have any misconceptions. Do you see any reason why the if-statement can be partially touched, and though the true statement be raised?</p>\n"},{"tags":["java","unit-testing","static","tdd","easymock"],"answer_count":5,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":7227,"score":8,"question_id":3162551,"title":"How do I mock static methods in a class with easymock?","body":"<p>Suppose I have a class like so:</p>\n\n<pre><code>public class StaticDude{\n    public static Object getGroove() {\n        // ... some complex logic which returns an object\n    };\n}\n</code></pre>\n\n<p>How do I mock the static method call using easy mock? <code>StaticDude.getGroove()</code>.</p>\n\n<p>I am using easy mock 3.0</p>\n"},{"tags":["php","image","oop","unit-testing","image-processing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":110,"score":1,"question_id":6699958,"title":"What is a modern OOP php image processing library with engines?","body":"<p>We're evaluating if we have to re-invent the wheel because of the lack of good libraries or we simply can't find one. We have pretty clear and strict requirements:</p>\n\n<ul>\n<li>Must be MIT</li>\n<li>Must have Unit Tests (phpunit)</li>\n<li>Must support engines (gd, imagick, imagick shell...)</li>\n<li>Must be php 5+</li>\n</ul>\n\n<p>The best thing we've found so far is Asido but its pretty much outdated and abandoned.</p>\n\n<p>Any libraries you know that match our needs?</p>\n"},{"tags":["unit-testing","mocking","tdd"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12190863,"title":"Should I initialize mock objects in setup or in the test case?","body":"<p>In unit testing with help of mock/fake objects, I wonder whether it's more preferable to initialize the mocks in SetUp or in the test method itself, if my test class contains methods that test the same class (and thus, fake object needed should be the same for all test case). Something like this:</p>\n\n<pre><code>class FooTests\n{\n    Mock&lt;IBar&gt; mockBar;\n    Foo fooUnderTest;\n\n    [SetUp]\n    public void Setup()\n    {\n        mockBar = new Mock&lt;IBar&gt;();\n        fooUnderTest = new fooUnderTest(mockBar.Object);\n    }\n\n    [Test]\n    public void MyTest()\n    {\n        //setup mock methods\n        mockBar.SetUp( ... )\n\n        //test\n        fooUnderTest.TestSomething()\n\n        //assert something here\n\n    }\n}\n</code></pre>\n\n<p>It seems that this will prevent us from duplicating code to mockBar and fooUnderTest in each test case, but the downside is that I have to declare class variables mockBar and fooUnderTest (or is this really a downside?), and it will be problematic if I want to have some special setup (for example, if in some testcase I want to overriede some of the virtual methods of Foo). Any suggestion what is the best practice? </p>\n"},{"tags":["python","unit-testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12184911,"title":"Python: Mocking a module that's being used by a module I'm testing","body":"<p>I would like to mock a certain module in order to test a piece of code that is using the module.</p>\n\n<p>That is to say, I have a module <code>my_module</code> which I'd like to test. <code>my_module</code> imports an external module <code>real_thing</code> and calls <code>real_thing.compute_something()</code>:</p>\n\n<pre><code>#my_module\nimport real_thing\ndef my_function():\n    return real_thing.compute_something()\n</code></pre>\n\n<p>I need to mock <code>real_thing</code> so that in a test it will behave like <code>fake_thing</code>, a module that I've created:</p>\n\n<pre><code>#fake_thing\ndef compute_something():\n    return fake_value\n</code></pre>\n\n<p>The test calls <code>my_module.my_function()</code> which calls <code>real_thing.compute_something()</code>:</p>\n\n<pre><code>#test_my_module\nimport my_module\ndef test_my_function():\n    assert_something(my_module.my_function())\n</code></pre>\n\n<p>What should I add to the test code so that <code>my_function()</code> will call <code>fake_thing.compute_something()</code> within the test instead of <code>real_thing.compute_something()</code>?</p>\n\n<p>I was trying to figure out how to do so with <a href=\"http://www.voidspace.org.uk/python/mock/index.html\" rel=\"nofollow\">Mock</a>, but I haven't.</p>\n"},{"tags":["c#",".net","unit-testing","nunit","assertion"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":166,"score":2,"question_id":12171411,"title":"How to assert that two list contains elements with the same public properties in NUnit?","body":"<p>I want to assert that the elements of two list contains values that I expected, something like:</p>\n\n<pre><code>var foundCollection = fooManager.LoadFoo();\nvar expectedCollection = new List&lt;Foo&gt;() \n{\n    new Foo() { Bar = \"a\", Bar2 = \"b\" },\n    new Foo() { Bar = \"c\", Bar2 = \"d\" }\n};\n\n//assert: I use AreEquivalent since the order does not matter\nCollectionAssert.AreEquivalent(expectedCollection, foundCollection);\n</code></pre>\n\n<p>However the above code will not work (I guess because .Equals() does not return true for different objects with the same value). In my test, I only care about the public property values, not whether the objects are equal. What can I do to make my assertion? </p>\n"},{"tags":["unit-testing","mstest"],"answer_count":2,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":165,"score":7,"question_id":12149039,"title":"Can I force a unit test to fail if there are no Asserts?","body":"<p>Some programmers in my team sometimes write unit tests which call the method, gets the result but forget to call the proper <code>Assert</code> methods to actually check what's happening.</p>\n\n<p>I was wondering if there is any configuration I can do to force MSTest to fail the test if no verification is done. I remember seeing something like this in DUnit, but could not find it in Visual Studio.</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":231,"score":2,"question_id":6811902,"title":"Import arbitrary-named file as a Python module, without generating bytecode file","body":"<p>How can a Python program easily <strong>import a Python module from a file with an arbitrary name</strong>?</p>\n\n<p>The standard library import mechanism doesn't seem to help. An important constraint is that I <strong>don't want an accompanying bytecode file</strong> to appear; if I use <code>imp.load_module</code> on a source file named <code>foo</code>, a file named <code>fooc</code> appears, which is messy and confusing.</p>\n\n<p>The Python import mechanism expects that it knows best what the filename will be: module files are found at specific filesystem locations, and in particular that they names have particular suffixes (<code>foo.py</code> for Python source code, etc.).</p>\n\n<p>That clashes with another convention, at least on Unix: files which will be executed as a command should be <a href=\"https://secure.wikimedia.org/wikipedia/en/wiki/File_suffix#Command_name_issues\" rel=\"nofollow\">named without reference to the implementation language</a>. The command to do “foo”, for example, should be in a program file named <code>foo</code> with no suffix.</p>\n\n<p>Unit-testing such a program file requires importing it, though. I need the objects from the program file as a Python module object, ready for manipulation in the unit test cases, exactly as <code>import</code> would give me.</p>\n\n<p>What is the <strong>Pythonic way to import a module from a file whose name doesn't end with <code>.py</code></strong>, without a bytecode file appearing for that import?</p>\n"},{"tags":["unit-testing","d"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":264,"score":2,"question_id":10694994,"title":"rdmd is not running unit tests","body":"<p>I have a class file with a unit test block in it like so</p>\n\n<pre><code>class SomeClass {\n  // class stuff...\n  unittest {\n    // unit test stuff...\n  }\n}\n</code></pre>\n\n<p>and when I run <code>rdmd --main -unittest someclass.d</code> nothing happens. Just for good measure I made sure to have some failing assertions in the unit test block but again nothing happens. What am I missing?</p>\n\n<p>I'm running all of this on Ubuntu with rdmd build 20120401.</p>\n\n<p>Here's the output of <code>rdmd</code> with <code>--chatty</code>:</p>\n\n<pre><code>rdmd -unittest --main --chatty linkedlist.d\n'dmd' '-unittest' '-v' '-o-' 'linkedlist.d' '-I.'\n'/tmp/.rdmd-1000/home/david/D_Finger_Exercises/linkedlist.d.6374859E23D5272488D4E396AEDC7BE1'\n</code></pre>\n\n<p>Here's the link to the files I've been using : <a href=\"https://github.com/davidk01/D-Finger-Exercises/\" rel=\"nofollow\">https://github.com/davidk01/D-Finger-Exercises/</a></p>\n"},{"tags":["unit-testing","mocking","nsubstitute"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":136,"score":2,"question_id":12174304,"title":"Is it recommended to mock concrete class","body":"<p>Most of the examples given in mocking framework website is to mock Interface. Let say NSubstitute that I'm currently using, all their mocking examples is to mock interface.</p>\n\n<p>But in reality, I saw some developer mock concrete class instead. Is it recommended to mock concrete class?</p>\n"},{"tags":["python","unit-testing","mocking"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12188002,"title":"python StringIO with urlli2.urlopen mocked with unittest","body":"<p>I have an interesting problem.  I am mocking urllib2.urlopen with the python  mock library as follows:</p>\n\n<pre><code>def mock_url_open_conn_for_json_feed():\n    json_str = \"\"\"\n        {\"actions\":[{\"causes\":[{\"shortDescription\":\"Started by user anonymous\",\"userId\":null,\"userName\":\"anonymous\"}]}],\"artifacts\":[],\"building\":false,\"description\":null,\"duration\":54,\"estimatedDuration\":54,\n        \"fullDisplayName\":\"test3#1\",\n        \"id\":\"2012-08-24_14-10-34\",\"keepLog\":false,\"number\":1,\"result\":\"SUCCESS\",\"timestamp\":1345842634000,\n        \"url\":\"http://localhost:8080/job/test3/1/\",\"builtOn\":\"\",\"changeSet\":{\"items\":[],\"kind\":null},\"culprits\":[]}\n        \"\"\"\n    return StringIO(json_str)\n\ndef test_case_foo(self):\n    io = mock_url_open_conn_for_json_feed()\n    io.seek(0)\n    mylib.urllib2.urlopen = Mock(return_value=io)\n    test_obj.do_your_thing()\n\ndef test_case_foo_bar(self)\n    io = mock_url_open_conn_for_json_feed()\n    io.seek(0)\n    mylib.urllib2.urlopen = Mock(return_value=io)\n    test_obj.param = xyz\n    test_obj.do_your_thing()\n\nclass ObjUnderTest():\n    def do_your_thing(self):\n        conn = urllib2.urlopen(url)\n        simplejson.load(conn)\n</code></pre>\n\n<p>the first unit test \"test_case_foo\" runs without a problem.  But simplejson.load closes the StringIO, so \"test_case_foo_bar\" calls on do_your_thing() and it tries to simplejson.load the same StringIO object (even though I return the <em>constructor</em> of StringIO), and it's already been closed.  I get the following error:</p>\n\n<pre><code>json = simplejson.load(conn)\n File \"/Users/sam/Library/Python/2.7/lib/python/site-packages/simplejson/__init__.py\", line 391, in load\nreturn loads(fp.read(),\nFile \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/StringIO.py\", line 127, in read\n_complain_ifclosed(self.closed)\nFile \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/StringIO.py\", line 40, in _complain_ifclosed\nraise ValueError, \"I/O operation on closed file\"\nValueError: I/O operation on closed file\n</code></pre>\n\n<p>I have two questions:</p>\n\n<p>1) Why is the StringIO constructor not returning a new object?</p>\n\n<p>2) Is there a work around for this? Or a better way to achieve what I'm trying to achieve?</p>\n"},{"tags":["python","django","unit-testing","mocking","python-mock"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":113,"score":0,"question_id":12187122,"title":"Assert a function/method was not called using Mock","body":"<p>I'm using the Mock library to test my application, but I want to assert that some function was not called. Mock docs talk about methods like <code>mock.assert_called_with</code> and <code>mock.assert_called_once_with</code>, but I didn't find anything like <code>mock.assert_not_called</code> or something related to verify mock was <strong>NOT called</strong>.</p>\n\n<p>I could go with something like the following, though it doesn't seem cool nor pythonic:</p>\n\n<pre><code>def test_something:\n    # some actions\n    with patch('something') as my_var:\n        try:\n            # args are not important. func should never be called in this test\n            my_var.assert_called_with(some, args)\n        except AssertionError:\n            pass  # this error being raised means it's ok\n    # other stuff\n</code></pre>\n\n<p>Any ideas how to accomplish this?</p>\n\n<p>Thanks for any help :)</p>\n"},{"tags":["spring","unit-testing","inheritance","global-variables","subclass"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12144358,"title":"What would be a better implementation of shared variable among subclass","body":"<p>So currently I have a spring unit testing application. And it requires me to get a session cookie from a foreign authentication source. Problem what that is, this authentication process is fairly expensive and time consuming, and I am trying to create a structure where I am authenticate once, by any subclass, and any subsequent subclass is created, it will reuse this session cookie without hitting the authentication process again.</p>\n\n<p>My problem right now is, the static cookie is null each time another subclass is created. And I been reading that using static as a global variable is a bad idea, but I couldn't think of another way to do this because of Spring framework setting things during run time and how I would set the cookie so that all other classes can use it.</p>\n\n<p>Another piece of information. The variable is being use, but is change able during run time. It is not a single user being signed in and used across the board. But more like a Sub1 would call login, and we have a cookie. Then multiple test will be using that login until SubX will come in and say, I am using different credential, so I need to login as something else. And repeats.</p>\n\n<p>Here is a outline of my code:</p>\n\n<pre><code>public class Parent implements InitializingBean {\n  protected static String BASE_URL;\n  public static Cookie cookie;\n\n  ... All default InitializingBean methods ...\n\n  afterPropertiesSet() {\n    cookie = // login process returns a cookie\n  }\n}\n\npublic class Sub1 extends Parent {\n  @resource public String baseURL;\n\n  @PostConstruct\n  public void init() {\n    // set parents with my baseURL;\n    BASE_URL = baseURL;\n  }\n\n  public void doSomething() {\n    // Do something with cookie, because it should have been set by parent class\n  }\n}\n\npublic class Sub2 extends Parent {\n  @resource public String baseURL;\n\n  @PostConstruct\n  public void init() {\n    // set parents with my baseURL;\n    BASE_URL = baseURL;\n  }\n\n  public void doSomethingElse() {\n    // Do something with cookie, because it should have been set by parent class\n  }\n}\n</code></pre>\n"},{"tags":["python","unit-testing","nose","coverage.py"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":231,"score":3,"question_id":9352656,"title":"Python: AssertionError when running nose tests with coverage","body":"<p>I'm fairly green with python testing, so this might be something I'm doing wrong..</p>\n\n<p>When I run my tests, the test runners works fine and coverage too.. but between the two I get an assertion error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/local/bin/coverage\", line 9, in &lt;module&gt;\n    load_entry_point('coverage==3.5.1', 'console_scripts', 'coverage')()\n  File \"/usr/local/lib/python2.7/dist-packages/coverage/cmdline.py\", line 657, in main\n    status = CoverageScript().command_line(argv)\n  File \"/usr/local/lib/python2.7/dist-packages/coverage/cmdline.py\", line 526, in command_line\n    self.coverage.stop()\n  File \"/usr/local/lib/python2.7/dist-packages/coverage/control.py\", line 389, in stop\n    self.collector.stop()\n  File \"/usr/local/lib/python2.7/dist-packages/coverage/collector.py\", line 262, in stop\n    assert self._collectors[-1] is self\nAssertionError\n</code></pre>\n\n<p>To make thing more difficult, I'm trying to test a command line utility. Which means I had to tell coverage to cover subprocess calls.</p>\n\n<p>I think I got this part working since coverage is now reporting a % of cover for the script that is being run. But since I got coverage working I can't get rid of the AssertionError.</p>\n\n<p>Some help understanding what's wrong would be really appreciated. All my code is available on github:</p>\n\n<ul>\n<li><a href=\"https://github.com/h3/django-duke-client\" rel=\"nofollow\">repo</a></li>\n<li><a href=\"https://github.com/h3/django-duke-client/blob/master/setup.py\" rel=\"nofollow\">setup.py</a></li>\n<li><a href=\"https://github.com/h3/django-duke-client/blob/master/run_tests\" rel=\"nofollow\">run_tests</a></li>\n<li><a href=\"https://github.com/h3/django-duke-client/blob/master/tests/__init__.py\" rel=\"nofollow\">subprocess call</a></li>\n</ul>\n\n<p>Quick run:</p>\n\n<pre><code>cd /tmp/ &amp;&amp; git clone git://github.com/h3/django-duke-client.git \ncd django-duke-client &amp;&amp; chmod a+x run_tests &amp;&amp; ./run_tests\n</code></pre>\n\n<p>Thanks</p>\n\n<p><strong>Update</strong></p>\n\n<p>I've run the test on a different computer and I got the same AssertionError .. Plus a new TypeError. Again the tests runs correctly and coverage also seems to work properly even with those errors..</p>\n\n<pre><code>...\nRan 9 tests in 1.324s\n\nOK\nTraceback (most recent call last):\n  File \"/usr/local/bin/coverage\", line 9, in &lt;module&gt;\n    load_entry_point('coverage==3.5.1', 'console_scripts', 'coverage')()\n  File \"/usr/local/lib/python2.7/dist-packages/coverage/cmdline.py\", line 657, in main\n    status = CoverageScript().command_line(argv)\n  File \"/usr/local/lib/python2.7/dist-packages/coverage/cmdline.py\", line 526, in command_line\n    self.coverage.stop()\n  File \"/usr/local/lib/python2.7/dist-packages/coverage/control.py\", line 389, in stop\n    self.collector.stop()\n  File \"/usr/local/lib/python2.7/dist-packages/coverage/collector.py\", line 262, in stop\n    assert self._collectors[-1] is self\nAssertionError\nError in atexit._run_exitfuncs:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/atexit.py\", line 24, in _run_exitfuncs\n    func(*targs, **kargs)\n  File \"/usr/lib/python2.7/multiprocessing/util.py\", line 284, in _exit_function\n    info('process shutting down')\nTypeError: 'NoneType' object is not callable\nError in sys.exitfunc:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/atexit.py\", line 24, in _run_exitfuncs\n    func(*targs, **kargs)\n  File \"/usr/lib/python2.7/multiprocessing/util.py\", line 284, in _exit_function\n    info('process shutting down')\nTypeError: 'NoneType' object is not callable\n\nName                               Stmts   Miss Branch BrPart  Cover   Missing\n------------------------------------------------------------------------------\ndukeclient/__init__                   53     53      2      0     4%   1-93\ndukeclient/commands/__init__          41     33      6      2    26%   1-9, 12, 14-15, 17, 24-28, 34-43, 46-63\n...\n</code></pre>\n"},{"tags":["unit-testing","asp.net-mvc-4","asp.net-optimization","bundling-and-minification"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":338,"score":3,"question_id":11371710,"title":"Is it possible to unit test BundleConfig in MVC4?","body":"<p>As far as I can tell, the answer is no. The issue I'm seeing comes from the <code>Include(params string[])</code> method in the <code>System.Web.Optimization.Bundle</code> class. Internally this invokes <code>System.Web.Optimization.IncludeDirectory(string, string, bool)</code>, which in turn uses this code:</p>\n\n<pre><code>DirectoryInfo directoryInfo = new DirectoryInfo(\n    HttpContext.Current.Server.MapPath(directoryVirtualPath));\n</code></pre>\n\n<p>While it is possible to set <code>HttpContext.Current</code> during a unit test, I can't figure out how to make its <code>.Server.MapPath(string directoryVirtualPath)</code> return a non-null string. Since the <code>DirectoryInfo(string)</code> constructor throws an exception when passed a null argument, such a test will always fail.</p>\n\n<p>What is the .NET team's recommendation for this? Do we have to unit test bundling configurations as part of integration tests or user acceptance tests?</p>\n"},{"tags":["flash","flex","unit-testing","flexunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":464,"score":2,"question_id":2862844,"title":"Flex Unit testing of library and mxml using FlexUnit","body":"<p>I have some software classes(library) to run commands on any mxml file.\nThese classes(library) are wrapped in a SWC file. This SWC file is referenced by any sample mxml application (by adding as SWC file).\nMy problem is that I want to test these software classes(library) against my sample mxml file using FlexUnit. That is, I should test methods run by software classes on the mxml file.</p>\n"},{"tags":[".net","unit-testing","functional-testing","testdrivendesign"],"answer_count":8,"favorite_count":18,"up_vote_count":24,"down_vote_count":0,"view_count":2223,"score":24,"question_id":2230286,"title":"Unit Testing or Functional Testing?","body":"<p>I have recently heard of Functional Testing over Unit Testing.</p>\n\n<p>I understand that Unit Testing tests each of the possibilities of a given piece of code from its most atomic form. But what about Functional Testing?</p>\n\n<p>This sounds to me like only testing if the code works, but is it as reliable as Unit Testing?</p>\n\n<p>I've been told there was two school of thoughts for the matter. Certains would prefer Unit Testing, others Functional Testing.</p>\n\n<p>Is there any good resources, links, books, any references or one of you all who can explain and elighten my path on the subject?</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","unit-testing","magento"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":649,"score":3,"question_id":7375350,"title":"Magento - Unit Testing","body":"<p>I have been having some problems with a Magento site recently and am looking for a way to check the integrity of a Magento site at any given point.</p>\n\n<p>Unit Testing jumps out as one method of doing this but I would assume it would be a very big job to write a whole lot of tests to check everything in the site is working as it should.</p>\n\n<p>Can anyone involved in unit testing and magento advise on the following:</p>\n\n<ol>\n<li>Is it possible to test the whole site and not just custom modules -\nis so some examples of tests would be amazing.</li>\n<li>Given that the site is heavily linked to the database - how would it\nbe possible to fully test the site without disturbing the database</li>\n<li>Are there any better ways to automaticlly check the integrity of a\n    magento site</li>\n</ol>\n\n<p>When I say integrity i really mean that there are no faults on the site - shipping, payment etc are all working correctly.</p>\n"},{"tags":["multithreading","silverlight","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12163949,"title":"Thread renaming in Silverlight Unit Tests","body":"<p>In my silverlight unit tests, I have several unit test methods of a single unit test class where in each method, I'm setting Thread.Name to some string. Now this should crash after the first one  because the Thread.Name can't be set after it has already been assigned, I have also checked that each test method runs on a thread with the same managed id as the others, so I'm confused why it isn't throwing an error, are the threads somehow \"reset\" after each unit test is run?</p>\n"},{"tags":["php","unit-testing","testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12174602,"title":"PHPUnit test files using prefix","body":"<p>I need to test all classes in a range of subfolders. However, I do not want to test the other files in these subfolders until I have done a large refactoring.</p>\n\n<p>The files I want to test all start with <code>class.</code>, e.g. <code>class.apis.php</code>, <code>class.something.php</code>. </p>\n\n<p>So, in order to run my tests I have the folloring configuration for PHPUnit:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;phpunit backupGlobals=\"true\" backupStaticAttributes=\"true\" colors=\"true\"\n    convertErrorsToExceptions=\"true\"\n    convertNoticesToExceptions=\"true\" convertWarningsToExceptions=\"true\"\n    processIsolation=\"false\"\n    stopOnFailure=\"false\" syntaxCheck=\"true\" verbose=\"true\"\n    strict=\"true\"&gt;\n    &lt;php&gt;\n        &lt;includePath&gt;../&lt;/includePath&gt;\n    &lt;/php&gt;\n\n    &lt;testsuites&gt;\n        &lt;testsuite name=\"MSBO Test Suite\"&gt;\n            &lt;directory&gt;PHPUnit&lt;/directory&gt;\n        &lt;/testsuite&gt;\n    &lt;/testsuites&gt;\n\n    &lt;filter&gt;\n        &lt;whitelist addUncoveredFilesFromWhitelist=\"true\"&gt;\n            &lt;directory suffix=\".php\"&gt;../classes/&lt;/directory&gt;\n            &lt;directory suffix=\".php\"&gt;../modules/&lt;/directory&gt;\n            &lt;exclude&gt;\n                &lt;directory&gt;../classes/external/&lt;/directory&gt;\n            &lt;/exclude&gt;\n        &lt;/whitelist&gt;\n    &lt;/filter&gt;\n&lt;/phpunit&gt;\n</code></pre>\n\n<p>But I cannot find anything on how to add a prefix to the whitelisting. Any ideas?</p>\n"},{"tags":["java","unit-testing","testing","junit","temporary-directory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12182916,"title":"JUnit : When do I declare a TemporaryFolder object?","body":"<p>I am trying to test a method that copies a source file to a dest file using JUnit's <code>TemporaryFolder</code>. I get a Java <code>IOException</code> when I try run this test however. Does it matter where I make the declaration for the folder? (My test class has several different tests in it). And if so, what is the proper way to do it? I ask because I currently have several unit tests above this code, then I try to set up the testing for the file copying. Maybe the <code>@Rule</code>-<code>@Before</code>-<code>@Test</code> block needs to be in its own class? Here is the snippet where I have coded the test:</p>\n\n<pre><code>...other tests...then:\n\n@Rule\npublic static TemporaryFolder tmp = new TemporaryFolder();\nprivate File f1, f2;\n\n@Before\npublic void createTestData() throws IOException {\n    f1 = tmp.newFile(\"src.txt\");\n    f2 = tmp.newFile(\"dest.txt\");\n\n    BufferedWriter out = new BufferedWriter(new FileWriter(f1));\n    out.write(\"This should generate some \\n\" +\n            \"test data that will be used in \\n\" +\n            \"the following method.\");\n    out.close();\n}\n\n@Test\npublic void copyFileTest() {\n\n    out.println(\"file 1 length: \" + f1.length());\n    try {\n        copyFile(f1, f2);\n    } catch (IOException e) {\n        e.getMessage();\n        e.printStackTrace();\n    }\n\n    if (f1.length() != f2.length())\n        fail();\n    else if (!f1.equals(f2))\n        fail();\n    assertSame(f1, f2);\n}\n</code></pre>\n\n<p>When I run this test class, all 11 of my tests now fail (which previously passed) and I get <code>java.io.IOException: No such file or directory</code>.</p>\n"},{"tags":["unit-testing","zend-studio"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":12182964,"title":"Zend studio - run associated unit tests","body":"<p>Assume I have:</p>\n\n<ul>\n<li>MyClass.php which defines MyClass</li>\n<li>MyClassTest.php which defines MyClassTest which extends PHPUnit_Framework_TestCase.</li>\n</ul>\n\n<p>In netbeans (7.2) while in MyClass.php I can hit a keyboard shortcut to have it run any associated unit test. Netbeans will look for any class with the same name and Test as a suffix (e.g. MyClassTest for the class MyClass), and if it finds one it will then run it, if it finds many it will prompt me which one to run.</p>\n\n<p>I find this quite useful and I am wondering if it is possible to do the same in Zend Studio 9?</p>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":670,"score":2,"question_id":10881715,"title":"I cannot create or open a Unit Test Project in Visual Studio 2012 RC","body":"<p>I am consistently getting errors upon opening or creating a unit test project in Visual Studio 2012 RC. Where might I find answers on how to resolve this issue. I have tried multiple repair installations. I have tried uninstalling and re-installing. I have removed all but a handful of extensions that come with the product (NuGet). Any help either fixing this bug or finding out where I could get assistance would be welcome.</p>\n\n<pre><code>The 'Microsoft.VisualStudio.TestTools.Tips.TuipPackage.TuipPackage, Microsoft.VisualStudio.QualityTools.Tips.TuipPackage, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' package did not load correctly.\n\nThe problem may have been caused by a configuration change or by the installation of another extension. You can get more information by examining the file 'C:\\Users\\Me\\AppData\\Roaming\\Microsoft\\VisualStudio\\11.0\\ActivityLog.xml'.\n</code></pre>\n\n<p>I believe this is the relevant section from that file:</p>\n\n<pre><code>Entering function CVsPackageInfo::HrInstantiatePackage {52CBD135-1F97-2580-011F-C7CD052E44DE}\n\nBegin package loadBegin package load {52CBD135-1F97-2580-011F-C7CD052E44DE}\n\nERROR SetSite failed for packageSetSite failed for package {52CBD135-1F97-2580-011F-C7CD052E44DE} 80070057 - E_INVALIDARG\n\nERROR End package loadEnd package load {52CBD135-1F97-2580-011F-C7CD052E44DE} 80070057 - E_INVALIDARG\n\nEntering function CVsPackageInfo::HrInstantiatePackage {52CBD135-1F97-2580-011F-C7CD052E44DE}\n\nBegin package loadBegin package load {52CBD135-1F97-2580-011F-C7CD052E44DE}\n\nERROR SetSite failed for packageSetSite failed for package {52CBD135-1F97-2580-011F-C7CD052E44DE} 80070057 - E_INVALIDARG\n\nERROR End package loadEnd package load {52CBD135-1F97-2580-011F-C7CD052E44DE} 80070057 - E_INVALIDARG\n</code></pre>\n"},{"tags":["unit-testing","maven","junit","osgi","tycho"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":514,"score":1,"question_id":7257432,"title":"Tycho: How to prevent deployment in case of JUnit test failures?","body":"<p>I got an <code>eclipse-plugin</code> with some unit tests.<br>\nIn maven I kept the unit tests in the same bundle and specified junit as testing dependency in the <code>pom.xml</code>.<br>\nNow I want to switch to tycho and I read that tycho is looking for a bundle with the same name plus a postfix <code>\".tests\"</code> which gets executed. But I would like to keep my unit tests in the tested bundle so that the build of the bundle will fail if any test fails. Otherwise maven might install/deploy artifacts where the unit tests haven't completed successfully..</p>\n\n<p>Is there a way to keep the unit tests in the same bundle using tycho?<br>\nHow do you manage unit tests in tycho builds?</p>\n\n<p><strong>Update:</strong> Ok I got now two separate bundles an <code>eclipse-plugin</code> and an <code>eclipse-test-plugin</code>. Tycho builds them both in the same reactor but my <code>eclipse-plugin</code> gets deployed although the unit-tests have failed. Now I got a broken artifact in my nexus repo...<br>\nIs there a way to enforce a buildfailure when the unit tests didn't complete successfully?</p>\n"},{"tags":["python","django","unit-testing","testing","django-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":95,"score":2,"question_id":12166568,"title":"Django - Testing - Problems with @login_required decorator","body":"<h2>Problem</h2>\n\n<p><b>UPDATE</b>: This issue, it turns out, has little to do with the <code>@login_required</code> decorator!</p>\n\n<p>I am getting finicky behavior when I try to test views that are decorated with <code>@login_required</code>.</p>\n\n<p>I have one test that is actually able to go to a view decorated with <code>@login_required</code> (a password change view). A different test, however, always gets redirected to login. No matter which way I've tried to re-write it, it won't let my test user through, even though I am logging the user in and asserting that <code>user.is_authenticated()</code> beforehand. </p>\n\n<p>Here's the relevant snippet of the test that's having issues:</p>\n\n<pre><code># Log user in\nself.client.login(username=user.username, password=user.password)\nself.assertTrue(user.is_authenticated())\n\n# Go to account_edit view\nurl = reverse('account_edit')\nresponse = self.client.get(url)\nself.assertEqual(response.status_code, 200)\nself.assertTemplateUsed(response, 'users/account_edit_form.html')\n</code></pre>\n\n<p>This inevitably redirects to the login view, as if the user were not logged in.</p>\n\n<p>I can confirm that this behavior is not reflected in the \"normal\" functioning of the app; the decorator works exactly as expected when I actually run the server and then navigate to this view (i.e. it allows access when logged in, and redirects to login view).</p>\n\n<p>Using Django 1.3.1. I am using the testrunner from django-nose, but I can confirm that this issue happens regardless of which testrunner I use.</p>\n\n<p>Also, I found several previous questions, but the solutions suggested were either particular to older versions of Django, or not helpful in this case (see <a href=\"http://stackoverflow.com/questions/2705235/django-test-failing-on-a-view-with-login-required\">here</a> for example).</p>\n\n<h2>Solution (combining two good answers)</h2>\n\n<p>I received two very good answers to this question, both of which highlighted important oversights in the snippet I posted. The issue had nothing to do with <code>@login_required</code>'s behavior, and everything to do with (a) signing the user in wrong and (b) checking the user authentication wrong.</p>\n\n<p>I was having a hard time picking which answer to accept, but after a little thought, I've decided to accept Konrad Hałas's answer, since it pinpoints the crucial oversight on my part, that was the root of unexpected behavior.</p>\n\n<p>Nonetheless, I would have figured this out much sooner if I had not been using the faulty test line <code>self.assertTrue(user.is_authenticated())</code>. So to emphasize that the solution was actually two parts, here are the two steps to fixing the problematic code:</p>\n\n<pre><code># Log user in *NOTE: Password needs to be raw (from Konrad's answer)\nself.client.login(username=user.username, password=\"pass\")\nself.assertTrue(user.is_authenticated()) # &lt;-- still not correct\n</code></pre>\n\n<p>The assertion line is still faulty because a valid user always satisfies <code>user.is_authenticated()</code>. See Alasdair's info for an explanation of this gotcha. So step two of fixing this code is:</p>\n\n<pre><code># Log user in *NOTE: Password needs to be raw (from Konrad's answer)\nlogin_successful = self.client.login(username=user.username, password=\"pass\")\nself.assertTrue(login_successful) # Much better! (see Alasdair's answer)\n</code></pre>\n\n<p>Finally, should you need to test that your user was logged in <em>without</em> using <code>client.login</code> (i.e. testing a login form), this should work:</p>\n\n<pre><code>self.assertTrue(response.context['user'].is_authenticated())\n</code></pre>\n"},{"tags":["java","unit-testing","maven","intellij-idea","log4j"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":12180769,"title":"Log4j configurations for debug and tests","body":"<p>I want to have two Log4j config files in my web-application. \nThe first one I placed here: <em>conf/main/log4j.properties</em></p>\n\n<p>The second is here: <em>conf/test/resources/log4j-test.properties</em></p>\n\n<p>so my pom contains the following:</p>\n\n<pre><code>&lt;build&gt;....\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;conf/main&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;includes&gt;\n                &lt;include&gt;*.properties&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;testResources&gt;\n        &lt;testResource&gt;\n            &lt;directory&gt;conf/test/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;includes&gt;\n                &lt;include&gt;*.properties&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/testResource&gt;\n    &lt;/testResources&gt;\n    .......\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;systemPropertyVariables&gt;\n                    &lt;log4j.configuration&gt;file:${project.build.testOutputDirectory}/log4j-test.properties&lt;/log4j.configuration&gt;\n                &lt;/systemPropertyVariables&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n    .....\n</code></pre>\n\n<p>log4j.properties:</p>\n\n<pre><code>log4j.rootLogger=INFO, stdout, mainFile\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.Target=System.out\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n\n\nlog4j.appender.mainFile=org.apache.log4j.RollingFileAppender\nlog4j.appender.mainFile.File=../logs/main.log\nlog4j.appender.mainFile.MaxFileSize=1MB\nlog4j.appender.mainFile.MaxBackupIndex=1\nlog4j.appender.mainFile.layout=org.apache.log4j.PatternLayout\nlog4j.appender.mainFile.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n\n</code></pre>\n\n<p>and log4j-test.properties:</p>\n\n<pre><code>log4j.rootLogger=INFO, stdout\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.Target=System.out\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n\n</code></pre>\n\n<p>My goal - to write logs from tests only to my console.\nFor example I have a simple test method:</p>\n\n<pre><code>@Test(dataProvider = \"invalidCredentials\", threadPoolSize = 10, invocationCount = 1, invocationTimeOut = 1000)\npublic void testGetUserByLoginInvalid(String login, String password) {\n    LDAPUser user = LdapUtils.getUserByLogin(login, password);\n    assertNull(user);\n} \n</code></pre>\n\n<p>Class LdapUtils has logger definition: </p>\n\n<pre><code>private static final Logger logger = Logger.getLogger(LdapUtils.class);\n</code></pre>\n\n<p>and it can write some info-message: </p>\n\n<pre><code>public static LDAPUser getUserByLogin(String login, String password) {\n    ....\n    if (user == null) {\n        logger.info(INVALID_USER + login);\n        return null;\n    }\n    .....\n}\n</code></pre>\n\n<p>So the problem is: when I execute Maven install(or simply - test) it works fine because it reads log4j config from right place (conf/test/resources/log4j-test.properties) and writes nothing to file, only to console.</p>\n\n<p>But when I'm trying to run this test method in IntellijIDEA (righ click on testGetUserByLoginInvalid method and choose Run \"testGetUserByLoginInvalid()\" ) it fails with</p>\n\n<pre><code>log4j:ERROR setFile(null,true) call failed.\njava.io.FileNotFoundException: ..\\logs\\main.log (The system cannot find the path specified)\n</code></pre>\n\n<p>In this case it reads wrong config(log4j.properties instead of log4j-test.properties) and fails when trying to find ..\\logs\\main.log file </p>\n\n<p>log4j.appender.mainFile.File=../logs/main.log </p>\n\n<p>in case of web-application it seems to be just the same as</p>\n\n<p>log4j.appender.mainFile.File=${catalina.home}/logs/main.log</p>\n\n<p>But tests do not have to know something about ${catalina.home} at all, isn't it? Because they are not part of .war.   So my idea was to create its own log4j config for tests but I can't avoid this problem with reading wrong config when running test not with Maven but with IDEA as I've described above...</p>\n\n<p>Any idea's anyone? Or may be there's another way to do what I want?... Thank you very much in advance!</p>\n"},{"tags":["unit-testing","scala","scalatra","specs2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12180353,"title":"Unit testing a Scalatra POST service with specs2","body":"<p>I am trying to use this test to test my webservice:</p>\n\n<pre><code>  \"POST /phaseupdate\" should {\n    \"return status 200\" in {\n      put(\"/phaseupdate\", Map(\"filename\" -&gt; \"test1\", \"entryaddress\" -&gt; \"address 1\",\"name\" -&gt; \"starting\",\"percentcomplete\" -&gt; \"10\")) {\n        status must_== 200\n      }\n    }\n  }\n</code></pre>\n\n<p>And the webservice definition is:</p>\n\n<pre><code>  post(\"/phaseupdate/:filename/:entryaddress/:name/:percentcomplete\") {\n</code></pre>\n\n<p>But I am getting a 404 error, so it appears the way I am passing the parameters is wrong.</p>\n\n<p>What is the correct way to get this test to call my webservice?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>So this works, so my definition of the service is not what I expected:</p>\n\n<pre><code>put(\"/phaseupdate/test1/address1/starting/10\") {\n</code></pre>\n"},{"tags":[".net","visual-studio","unit-testing","ncrunch"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12148153,"title":"How can I see the the console output when running tests with NCrunch?","body":"<p>I don't know if it's implemented but there is an option for NCrunch output in the \nOutput window.</p>\n\n<p><img src=\"http://i.stack.imgur.com/NTIHA.png\" alt=\"enter image description here\"></p>\n\n<p>TestDriven.NET is already doing this while you are running the tests and I realized it was useful when trying out things quickly. Is there a way to make it work in NCrunch?</p>\n"},{"tags":["unit-testing","mocking","virtualization","stub"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12055654,"title":"Stubs / Mocks vs. Service Virtualization..? Yikes","body":"<p>I'm currently investigating unit testing in hard-to-reach areas (that's a very high-level view, I know) and I've come up against this question: stubs / mocks or service virtualization?</p>\n\n<p>I'm reading in pursuit of the answer, but the only resources I can find seem to come from SV vendors (who are obviously biased).</p>\n\n<p>Can anyone think of examples when one is absolutely more appropriate than the other, and why? If the answer is \"it depends\", then please suggest why / what on. It seems like the same results can be achieved either way - it's a question of time (to develop) or available funds (GreenHat etc. aren't cheap!).</p>\n\n<p>Thanks in advance!</p>\n\n<p>EDIT:</p>\n\n<p>Having checked one of the links(1) posted below, I think this is what I'm getting at:</p>\n\n<p>\"Virtual services are just test stubs that you can make yourself.</p>\n\n<p>While you can code your own stubs, once you get past very simplistic behaviors the effort and cost of mocking up all the systems you depend on throughout the software development lifecycle becomes overwhelming. Service Virtualization demands automation in that the simulation and modeling can be conducted by direct observation on the part of software rather than requiring manual coding and adjustment. Otherwise, you may be spending as much time maintaining your stub environments as you do building and testing the application functionality itself.\"</p>\n\n<p>Same as any tool then basically, eh?</p>\n\n<p>(1) <a href=\"http://servicevirtualization.com/top-10\" rel=\"nofollow\">http://servicevirtualization.com/top-10</a></p>\n"},{"tags":["java","unit-testing","testing","tdd"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":98,"score":2,"question_id":12161133,"title":"TDD with complicated algorithm.","body":"<p>I've got a problem with tests. There is an algorithm for some fancy procedure. This algorithm takes a random number from a range [-999,999; +999,999], treats it like an id number from a table and performs some random operations in the database. This means that I need to call the method huge number of times to be sure that the random number distribution is correct.</p>\n\n<p>I wanted to make all the code using TDD (just to learn it a little bit more).</p>\n\n<p>The problem is that I don't know how to test the algorithm with TDD principle in mind.</p>\n\n<p>According to TDD, no code should be run without writing a test first.</p>\n\n<p>One of the solutions I think of is to have a dummy method in the main class called debug(text). This method will do nothing in the production code. However then I'd make a subclass with this method being overloaded and this time it would store some interesting information. This information could be later used by test to find out if the function works properly. The database connection will be mocked and will do nothing.</p>\n\n<p>Another solution would be to create a mocked database connection which would store the interesting information, used later in tests. However it would be so huge amount of work to create such a connection that I don't think is worth spending time on it.</p>\n\n<p>There will be integration tests later to check if the database is changed properly. But integration tests are not part of TDD.</p>\n\n<p>Have I got into a place where TDD fails and is useless or too hard to use?</p>\n"},{"tags":["unit-testing","grails","grails-2.0","grails-controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":12179013,"title":"Unit test controller by calling multiple actions","body":"<p>I have a very similar problem to the one described in <a href=\"http://stackoverflow.com/questions/8862622/grails-how-to-test-controller-with-multiple-actions-and-multiple-redirects\">this question</a>. (The main difference being that i am using Grails 2.1).</p>\n\n<p>Basically i want to write a unit test which does sth like:</p>\n\n<pre><code>// set params so i can create an obj.\ndef results = controller.save()\n\n// validate results or model/view\nresults = controller.edit(id, version)\n</code></pre>\n\n<p>However, this doesn't work, because the first method action (save) has triggered a redirect and the second one would too, which leads to a CannotRedirectException.\nWith the message:</p>\n\n<pre><code>Cannot issue a redirect(..) here. A previous call to redirect(..) has already redirected the response.\n</code></pre>\n\n<p>The proposed solution for this (found in various places) is:</p>\n\n<pre><code>redirectArgs.clear()\n</code></pre>\n\n<p>However, this doesn't work, because since Grails 2, redirectArgs doesn't exist, there is only</p>\n\n<pre><code>response.redirectUr\n</code></pre>\n\n<p>which can only be read, not written to.</p>\n\n<p>I have also already tried these things (in various combinations):</p>\n\n<pre><code>response.reset()\nclearGrailsWebRequest()\nbindGrailsWebRequest()\ncleanupGrailsWeb()\ncontroller.redirect([:])\ncontroller.redirect(null)\ncontroller = new OfferObjectController()\ncontroller = mockController(OfferObjectController)\n</code></pre>\n\n<p>All without any luck.</p>\n\n<p>I have totally run out of ideas what else could work/help.\nAny suggestion is appreciated!</p>\n\n<p>==== EDIT ====</p>\n\n<p>i forgot to clarify that </p>\n\n<pre><code>response.reset()\n</code></pre>\n\n<p>kind of works, it lets me call another action, however it seems to undo/rollback the changes done by the previous action, which is exactly what i want to avoid (if i wanted that, i would put the call into its own test[method]).</p>\n"},{"tags":["c#","asp.net","web-services","unit-testing","web"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":73,"score":1,"question_id":12164852,"title":"How do I unit test a web service contained within an ASP web site?","body":"<p>I have an ASP site with web services that access outside libraries.  i.e. all of my web services are contained in the \"App_Code\" folder.</p>\n\n<p>I would like to unit test these web services, but I need to be authenticated in order to access them.</p>\n\n<p>Is there a way to unit test authenticated web services in an ASP web project?</p>\n\n<p>I found <a href=\"http://stackoverflow.com/questions/1198555/unit-testing-asp-net-web-site-project-code-stored-in-app-code\">this question</a> that seems to be asking a similar question, but I thought there may have been some developments in 3 years.</p>\n\n<p>I also found <a href=\"http://msujaws.wordpress.com/2010/06/13/unit-testing-code-behinds-in-asp-net-web-forms/\" rel=\"nofollow\">this project</a> that tests code behinds, which is ALMOST what I need, but not quite.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["python","unit-testing","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12176951,"title":"Renaming a builtin function for testing purposes","body":"<p>I was considering renaming some built-in functions in my testing suite, however I have found that doing so has a global effect (when I expected them to only have an effect locally). For example:</p>\n\n<pre><code>import time\ndef test():\n    time.sleep = \"hello\" #woah there! time is mutable so this won't just apply locally!\n\nprint time.sleep #prints &lt;built-in function sleep&gt;\ntest()\nprint time.sleep #prints hello (!)\n</code></pre>\n\n<p>Must I be revert <code>time.sleep</code> to what it was before at the end of <code>test()</code>?</p>\n\n<p>Is this something which is <strong>discouraged</strong>... How <em>should</em> I be doing this kind of testing?</p>\n"},{"tags":["sql","sql-server","tsql","unit-testing","tsqlunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12171283,"title":"SQL Unit Testing with TSQLUNIT","body":"<p>I noticed something weird while unit testing an update/insert stored procedure using TSQLUNIT on SQL Server 2012. when I call <strong>Exec tsu_RunTests</strong>, my test procedure runs but with unexpected behaviour. the line in the code that calls my original stored procedure is executed but no actual updates or inserts made to the database table as expected. Is there a valid reason for this behaviour? Or is this a bug I need to pay much attention to? I notice that when I execute the same original stored procedure outside of the test procedure, it works fine. </p>\n"},{"tags":["python","unit-testing","pyunit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12174093,"title":"Which Python testing framework to use?","body":"<p>I have lots of directories in which there are python files. All are plain python files. I have not used any sort of framework for the same. I want to test those py files from one central location. I should just fire one command and all the *_test.py files from each and every directory should be invoked.\nSo, is there any ready tool or framework available for my requirement ?</p>\n\n<p>I an looking for PyUnit for testing plain py files. And thinking of writing one shell script which will invoke all these *_test.py files by using regex to match the file names.</p>\n\n<p>Anyone can suggest any other approach. You are always welcome.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","swing","unit-testing","junit","powermock"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":178,"score":3,"question_id":11943703,"title":"Trying to mock static system class with PowerMock gives VerifyError","body":"<p>I am trying to mock JOptionPane static methods, and am stuck at a Java.lang.VerifyError.  All versions are current, since I just downloaded PowerMock for Mockito, and all their dependencies.</p>\n\n<p>I cannot use the answer given for a previous question, to wrap the class and subclass the wrapper - this is all over our application.  I've invested a fair amount of time in PowerMock at this point, and I don't want to start over with fest.</p>\n\n<p>Is there a way to resolve this error?  I've tried both \"Mocking Static Methods\" and \"Mocking System Classes\" in the instructions.  I can't go any farther since all I've done is @RunWith(PowerMockRunner.class) and @PrepareForTest(My.class).</p>\n\n<p>I found that I could reduce this to an issue with any reference to a class that extends JPanel.  Here is a minimum test to create the issue (I've gotten the same exception with PrepareForTest on Boffo and on JPanel):</p>\n\n<pre><code>import javax.swing.JPanel;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n@RunWith(PowerMockRunner.class)\n//@PrepareForTest(JPanel.class)\n@PrepareForTest(TestCase.Boffo.class)\npublic class TestCase {\n\n    @SuppressWarnings(\"serial\")\n    public static class Boffo extends JPanel {}\n\n    @Test\n    public void test() throws Exception {\n        new Boffo();\n    }\n}\n</code></pre>\n\n<p>Here is the exception I get when I try to run the test:</p>\n\n<pre><code>java.lang.VerifyError: (class: javax/swing/plaf/metal/MetalLookAndFeel, method: getLayoutStyle signature: ()Ljavax/swing/LayoutStyle;) Wrong return type in function\n    at javax.swing.UIManager.setLookAndFeel(Unknown Source)\n    at javax.swing.UIManager.initializeDefaultLAF(Unknown Source)\n    at javax.swing.UIManager.initialize(Unknown Source)\n    at javax.swing.UIManager.maybeInitialize(Unknown Source)\n    at javax.swing.UIManager.getUI(Unknown Source)\n    at javax.swing.JPanel.updateUI(Unknown Source)\n    at javax.swing.JPanel.&lt;init&gt;(Unknown Source)\n    at javax.swing.JPanel.&lt;init&gt;(Unknown Source)\n    at javax.swing.JPanel.&lt;init&gt;(Unknown Source)\n    at com.package.TestCase$Boffo.&lt;init&gt;(TestCase.java:17)\n    at com.package.TestCase.test(TestCase.java:21)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:66)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:312)\n    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:86)\n    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:94)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:296)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:284)\n    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)\n    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:209)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:148)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:122)\n    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\n    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:120)\n    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:102)\n    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)\n    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:42)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:46)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n</code></pre>\n"},{"tags":["java","android","unit-testing","junit","stdout"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12170429,"title":"How do I print the stdout for unit test in Android?","body":"<p>I need a quick way to do a few tests and don't want to look at the Dalvik Debug Monitor. I just want to create a quick <code>public static void main()</code> and print some results to experiment with for debugging. I thought I could use the unit testing framework to get some results on the console stdout, but <code>System.out.println()</code> still goes to the log (as well as <code>Log.d()</code>).</p>\n\n<p><strong>So is there a way to print the the stdout when running a unit test?</strong> </p>\n\n<pre><code>ant debug install test\ntest:\n [echo] Running tests ...\n [exec]\n [exec] com.MainTest:.\n [exec] Test results for InstrumentationTestRunner=.\n</code></pre>\n"},{"tags":["android","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":713,"score":1,"question_id":5451614,"title":"Android Test Case - how to view output?","body":"<p>I'm using AndroidTestCase for unit testing. I have a unit test which is failing, but I haven't figured out how to display output from it. For example, I don't see the values I print using Log.d or system.out.println in the console nor the logcat output.  How do I view the unit test console? </p>\n"},{"tags":["python","unit-testing","google-app-engine","google"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":545,"score":5,"question_id":6222528,"title":"UnitTesting the webapp.RequestHandler in GAE - Python","body":"<p>I'm struggling on how to setup my environment for TDD with Google App Engine - Python. (I'm also pretty new to Python). My environment is as follows:</p>\n\n<ul>\n<li>Google App Engine 1.5.0</li>\n<li>IntelliJ 10.2</li>\n<li>IntelliJ setup to use Python 2.5.4 for this project</li>\n</ul>\n\n<p>I am using IntelliJ with the Python plugin, so running unittests is as simple as hitting ctrl-shft-f10. </p>\n\n<p>I've also read the documentation on testbed and have successfully tested the datastore and memcache. However, where I am stuck is how do i unittest my RequestHandlers. I've scanned a lot of articles on Google and most of them seem to be pre merging of gaetestbed into gae as testbed.</p>\n\n<p>In the following code sample, i would like to know how to write a unit test (which is runnable in intellij) which tests that a call to '/' returns -> Home Page</p>\n\n<pre><code>from google.appengine.ext import webapp\nimport wsgiref.handlers\n\nclass MainHandler(webapp.RequestHandler):\n\n    def get(self):\n        self.response.out.write('Home Page')\n\npaths = [\n          ('/', MainHandler)\n        ]\n\napplication = webapp.WSGIApplication(paths, debug=True)\n\ndef main():\n    wsgiref.handlers.CGIHandler().run(application)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>From Nick Johnson's answer below, I added a new folder named test and added a file to that folder called unit_test.py. To that file I added the following code (Modified from Kris' answer below):</p>\n\n<pre><code>from StringIO import StringIO\nfrom main import MainHandler\nimport unittest\nfrom google.appengine.ext import webapp\n\nclass MyTestCase(unittest.TestCase):\n    def test_get(self):\n        request = webapp.Request({\n            \"wsgi.input\": StringIO(),\n            \"CONTENT_LENGTH\": 0,\n            \"METHOD\": \"GET\",\n                            \"PATH_INFO\": \"/\",\n        })\n        response = webapp.Response()\n        handler = MainHandler()\n        handler.initialize(request, response)\n        handler.get()\n        self.assertEqual(response.out.getvalue(), \"Home Page\")\n</code></pre>\n\n<p>And it now works!</p>\n"},{"tags":["java","unit-testing","junit4","hamcrest"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":125,"score":3,"question_id":12166415,"title":"How do I assert a List contains elements with a certain property?","body":"<p>Assume I want to unit test a method with this signature:</p>\n\n<pre><code>List&lt;MyItem&gt; getMyItems();\n</code></pre>\n\n<p>Assume MyItem is a pojo that has many properties, one of which is \"name\", accessed via getName().</p>\n\n<p>All I care about verifying is that the List contains two MyItem instances, whose \"name\" properties have the values \"foo\" and \"bar\".  If any other properties don't match, I don't really care for the purposes of this test.  If the names match, it's a successful test.</p>\n\n<p>I would like it to be one-liner if possible..  Here is some \"pseudo-syntax\" of the kind of thing I would like to do.  </p>\n\n<pre><code>assert(listEntriesMatchInAnyOrder(myClass.getMyItems(), property(\"name\"), new String[]{\"foo\", \"bar\"});\n</code></pre>\n\n<p>Would hamcrest be good for this type of thing?  If so, what exactly would be the hamcrest version of my pseudo-syntax above?</p>\n"},{"tags":["unit-testing","salesforce","apex-code"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":138,"score":0,"question_id":12152222,"title":"Salesforce Apex test class with null pointer exceptions","body":"<p>I am trying to write a test method that requires me to generate an opportunity and all records associated with the opportunity. I keep getting null pointer exceptions in the strangest places.</p>\n\n<pre><code>public static void createOpp() {\n    OpportunityEscalationtest.a = new Account(Name = 'SGC Test Account'\n                                            , Type = 'Customer'\n                                            , Phone = '(00) 0000 0000');\n\n    insert OpportunityEscalationtest.a;\n\n    OpportunityEscalationtest.c = new List&lt;Contact&gt;();      \n    Contact newC = new Contact( FirstName = 'Jack'\n                                , LastName = 'O\\'Neil'\n                                , Phone = '(00) 0000 0000'\n                                , AccountId = OpportunityEscalationtest.a.Id);\n\n    OpportunityEscalationtest.c.add(newC);\n\n    newC = new Contact( FirstName = 'Samantha'\n                        , LastName = 'Carter'\n                        , Phone = '(00) 0000 0000'\n                        , AccountId = OpportunityEscalationtest.a.Id);\n\n    OpportunityEscalationtest.c.add(newC);\n\n    newC = new Contact( FirstName = 'Daniel'\n                        , LastName = 'Jackson'\n                        , Phone = '(00) 0000 0000'\n                        , AccountId = OpportunityEscalationtest.a.Id);\n\n    OpportunityEscalationtest.c.add(newC);\n\n    insert OpportunityEscalationtest.c;\n\n    Contact priCont = [Select Id from Contact where FirstName = 'Jack' limit 1];\n    OpportunityEscalationtest.a.GillForce__Primary_Contact__c = priCont.Id;\n\n    OpportunityEscalationtest.o = new Opportunity( Name = 'Mountain Complex Water'\n                                                 , CloseDate = system.today()\n                                                 , StageName = 'Business Analysis'\n                                                 , AccountId = OpportunityEscalationtest.a.Id);\n\n    insert OpportunityEscalationtest.o;\n\n    for (Contact cont : c) {\n        OpportunityContactRole role = new OpportunityContactRole( ContactId = cont.Id\n                                                                , OpportunityId = OpportunityEscalationtest.o.Id\n                                                                , Role = 'Descision Maker');\n\n        role.IsPrimary = (OpportunityEscalationtest.a.GillForce__Primary_Contact__c == cont.Id);\n\n        insert role;\n    }\n}\n</code></pre>\n\n<p>The error is thrown somewhere between these 2 lines of code:</p>\n\n<pre><code>    insert OpportunityEscalationtest.c;\n\n    Contact priCont = [Select Id from Contact where FirstName = 'Jack' limit 1];\n</code></pre>\n\n<p>I'm a bit stumped, unless i am mistaken this piece of code should be self contained. Any ideas would be excellent.</p>\n"},{"tags":["java","unit-testing","easymock"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1245,"score":0,"question_id":7429997,"title":"Unexpected method call while doing the unit testing with EasyMock","body":"<p>I am testing mail functionality in my code with the UnitilsJUnit4 and EasyMock. </p>\n\n<p>My code is like this..</p>\n\n<pre><code>public void prepare(MimeMessage mimeMessage) {\n// some code ..\nMimeMessageHelper message = new MimeMessageHelper( mimeMessage, true );\n// some mail settings ..\n\n}\n</code></pre>\n\n<p>when I am testing the method <code>prepare</code>, it is giving the below exception.. but the method it is showing below is from the Spring framework class.</p>\n\n<pre><code>java.lang.AssertionError: \n  Unexpected method call setContent(javax.mail.internet.MimeMultipart@6e616e61):\n    setContent(javax.mail.internet.MimeMultipart@2dda2dda): expected: 1, actual: 0\n    at $javax.mail.internet.MimeMessage$$EnhancerByCGLIB$$614de43f.setContent(&lt;generated&gt;)\n    at org.springframework.mail.javamail.MimeMessageHelper.createMimeMultiparts(MimeMessageHelper.java:344)\n    at org.springframework.mail.javamail.MimeMessageHelper.&lt;init&gt;(MimeMessageHelper.java:290)\n    at org.springframework.mail.javamail.MimeMessageHelper.&lt;init&gt;(MimeMessageHelper.java:247)\n    at org.springframework.mail.javamail.MimeMessageHelper.&lt;init&gt;(MimeMessageHelper.java:226)\n</code></pre>\n\n<p>Please help me to resolve the above issue.. how to test my method?</p>\n"},{"tags":["ruby","unit-testing","rspec"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":12165249,"title":"Specify interaction with mocks that occurs in private methods","body":"<p>I am testing a public method that makes a request to a web service. I've mocked out this web service for the purposes of my tests. The problem is that the public method I am testing makes a call to a private method in its own instance that also makes a request to the web service. </p>\n\n<p>It feels strange to me to specify the interaction that the private method makes with this web service, but there doesn't seem to be a way around it. Does anyone have any experience with this type of a problem? Is there a better way to set this up?</p>\n"},{"tags":["unit-testing","mvc","expressions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12164584,"title":"Expression Equality or Equivalence from Multiple Projects","body":"<p>It is understood that:</p>\n\n<pre><code>Expression&lt;Func&lt;string, bool&gt;&gt; first = x =&gt; x.Length == 4;\nExpression&lt;Func&lt;string, bool&gt;&gt; second = x =&gt; x.Length == 4;\n\nConsole.WriteLine(first.Equals(second)); // Output is \"False\"\n</code></pre>\n\n<p>However, examining the strings of each expression does show equality:</p>\n\n<pre><code>Expression&lt;Func&lt;string, bool&gt;&gt; first = x =&gt; x.Length == 4;\nExpression&lt;Func&lt;string, bool&gt;&gt; second = x =&gt; x.Length == 4;\n\nConsole.WriteLine(first.ToString().Equals(second.ToString())); // Output is \"True\"\n</code></pre>\n\n<p>This idea was a culmination of different posts...</p>\n\n<p><a href=\"http://www.codethinked.com/Comparing-Simple-Lambda-Expressions-With-Moq\" rel=\"nofollow\">http://www.codethinked.com/Comparing-Simple-Lambda-Expressions-With-Moq</a>\nhttp://stackoverflow.com/questions/5196669/moqing-methods-where-expressionfunct-bool-are-passed-in-as-parameters\n<a href=\"http://stackoverflow.com/questions/3458406/verify-method-was-called-with-certain-linq-expression-moq\">Verify method was called with certain linq expression (moq)</a></p>\n\n<p>The intent:</p>\n\n<p>I am writing an MVC application using the repository pattern such that</p>\n\n<pre><code>public class MyController : Controller\n{\n    public Repository.IRepository Repository { get; set; }\n\n    public MyController()\n    {\n        this.Repository = new Repository.CommonRepository();\n    }\n\n    public MyController(Repository.IRepository repository)\n    {\n        this.Repository = repository;\n    }\n\n    [HttpPost]\n    public ActionResult Create(Domain.Common.Object1 o1)\n    {\n        if (ModelState.IsValid)\n        {\n            // Additional validation\n            o1.Name = o1.Name.Trim();\n\n            if (this.Repository.Any&lt;Domain.Common.Object1&gt;(a =&gt; a.Name.ToLower() == plant.Name.ToLower()))\n                this.ModelState.AddModelError(\"Name\", \"Duplicate found.\");\n        }\n\n        if (ModelState.IsValid)\n        {\n            var entity = this.Repository.Add(o1);\n\n            if (Request.IsAjaxRequest())\n                return this.Json(new { Completed = true, Id = entity.Id });\n\n            return RedirectToAction(\"Details\", new { id = entity.Id });\n        }\n\n        if (Request.IsAjaxRequest())\n            return PartialView(\"_Create\", o1);\n\n        return View(\"Create\", o1);\n    }\n}\n</code></pre>\n\n<p>Repository is a completely separate project as is the domain.  My repository code is setup so that I can use the one repository to query any object based upon the generic:</p>\n\n<pre><code>public IQueryable&lt;T&gt; GetAll&lt;T&gt;() where T : AbstractEntity\n{\n    return this.DbContext.Set&lt;T&gt;();\n}\n</code></pre>\n\n<p>Note: AbstractEntity is a domain abstract class all of my POCO objects inherit from.</p>\n\n<p>Everything is fine when using Moq to unit test the controller :</p>\n\n<pre><code>[TestMethod]\npublic void Create_Post_DuplicateNameAddsError()\n{\n    // Arrange\n    var repository = new Mock&lt;Repository.IRepository&gt;();\n\n    repository.Setup(a =&gt; a.Any&lt;Domain.Common.Object1&gt;(It.IsAny&lt;System.Linq.Expressions.Expression&lt;Func&lt;Domain.Common.Object1, bool&gt;&gt;&gt;()))\n              .Returns(true);\n\n    var controller = ControllerFactory&lt;MyController&gt;.GetController();\n    controller.Repository = repository.Object;\n\n    var model = new Domain.Common.Object1()\n    {\n        Id = Guid.NewGuid()\n        ,\n        Name = \"Name\"\n    };\n\n\n\n    // Act\n    var result = controller.Create(model) as ViewResult;\n\n\n\n    // Assert\n    Assert.IsFalse(controller.ModelState.IsValid);\n\n    Assert.IsNotNull(result);\n    Assert.AreEqual(\"Create\", result.ViewName, false);\n\n    Assert.AreEqual(model, result.Model);\n}\n</code></pre>\n\n<p>Note: ControllerFactory is a way to generate a controller with certain properties filled, such as Request, Response, User, Request.Headers ect...</p>\n\n<p>Where this fails is if I have to use IRepository.Any(predicate) more than once, or any method that uses expressions that is called more than once.  I need it to say true for one and false for another.  If the expression strings were a match, this would be a non-issue, but as everything is in different projects the expression strings come out as:</p>\n\n<pre><code>a =&gt; (a.Name.ToLower() == value(foo.Web.Tests.Controllers.Object1ControllerTests+&lt;&gt;c__DisplayClass3).ob1.Name.ToLower())\na =&gt; (a.Name.ToLower() == value(foo.Controllers.MyController+&lt;&gt;c__DisplayClass1).ob1.Name.ToLower())\n</code></pre>\n\n<p>The difference lies in the value function.  I have tried matching from Regular Expressions, which works, but is ugly as you have to escape every .&lt;>(), which in turn makes it very difficult to maintain.</p>\n\n<p>I tried using <a href=\"http://www.codethinked.com/Comparing-Simple-Lambda-Expressions-With-Moq\" rel=\"nofollow\">Matt Meber's Expression Equality Comparer</a>, but they are not equal due to that value function (my belief).</p>\n\n<p>Suggestions?</p>\n"},{"tags":["unit-testing","testing"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":47,"score":3,"question_id":12160760,"title":"What is the responsibility of the test department?","body":"<p>I know that many companies have their test department, and I'm asking this question because I can't get some concepts clear.</p>\n\n<p><strong>1, Are the unit test supposed to be done by the test department/third party enterprise?</strong></p>\n\n<p>For my own feeling I think this should be done by the developer himself/herself. But there is a saying that said: </p>\n\n<p><em>You will tend to test your code in the way you wrote it. So it's better for us to do the unit test. And you are not a professional tester, so you can't make sure your unit test is the best.</em></p>\n\n<p>If this is wrong, is there anything official that said a programmer should do the unit test himself?</p>\n\n<p><strong>2, despite of the unit test, what other tests does the test department do?</strong></p>\n\n<p>This is kind of a simple question. Maybe there are some random tests, some stress tests, but could anyone give me a list of what the test department do normally?</p>\n"},{"tags":["java","unit-testing","testng","reportng"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":11622365,"title":"TestNG - How to only output one Pass/Fail result when test is rerun?","body":"<p>I'm using the IRetryAnalyzer class in TestNG in order to relaunch tests that fail (up to 5 attempts).  Right now if I run a test and it fails three times before passing, it says: </p>\n\n<blockquote>\n  <p>Tests run: 4, Failures: 3, Errors 0, Skipped 0. </p>\n</blockquote>\n\n<p>What I want the results to show is:</p>\n\n<blockquote>\n  <p>Tests run: 1, Failures: 0, Errors 0, Skipped 0.</p>\n</blockquote>\n\n<p>Basically, don't want it to count as a failure unless it fails all 5 reruns. How do I do this? </p>\n"},{"tags":["unit-testing","testing","tdd","software-engineering","bdd"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":125,"score":2,"question_id":12041175,"title":"Is BDD mainly used in integration test?","body":"<p>A common story</p>\n\n<pre><code>Story: User logging in\n  As a user\n  I want to login with my details\n  So that I can get access to the site\n</code></pre>\n\n<p>Given such a broad coverage, it is useless if I <strong>mock</strong> the system components such as DB in order to perform the test, so can I say that people mainly use BDD in integration test?</p>\n"},{"tags":["c#","unit-testing","dependency-injection","spring.net"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12163372,"title":"Programatical \"Spring.Net\" Configuration","body":"<p>I have started work on a project which uses Spring.Net, and i'm coming at it from a Unity background. I'm trying to set up an integration test for part of the solution, and need to setup Spring to build all my classes on demand. I don't want to use configuration files.</p>\n\n<p>I want to do the following:</p>\n\n<ul>\n<li><p>Register My Types</p></li>\n<li><p>Configure the root instance</p></li>\n<li><p>Have all types populated when I pull them from the container</p></li>\n</ul>\n\n<p>I've populated my types (Including mocks) in the container, and configured my root instance, but no types get populated. There don't appear to be any attributes to specify what I want, and type mappings are done by string names.</p>\n\n<p>I was looking at building up a MutablePropertyValues collection, but they only seem to take instances of the class I want to populate, rather than a reference, which breaks lazy loading. Is there a reference type class I can use?</p>\n\n<p>Appologies if this is a bit vague, but I know what I want to achieve, and am unsure as to what the best way to achieve it would be.</p>\n"},{"tags":["java","unit-testing","junit","dbunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":554,"score":0,"question_id":1275967,"title":"dbUnit data types","body":"<p>I'm using dBUnit and am trying to assert a row of my pre-defined FlatXmlDataSet with the actual DB dataset. The problem is the getValue for my Verification Code field returns a string when that data originates from the FlatXmlDataSet and as an Integer when its from the actual live database. This is true with any data type that isn't a String. I could write something to convert everything to a string before compare but is there a better way?</p>\n\n<p>My code:</p>\n\n<pre><code>\tIDataSet initialSet = setupDBWithData(\"test.xml\", true);\n\tITable initialTable = initialSet.getTable(\"USER\");\n\n\tString response = doTestSendVerificationPin();\n\tassertOKResponse(response);\n\n\tITable userTable = _databaseTester.getConnection().createTable(\"USER\");\n\n\t// Make sure old user row is left unchanged\n\tassertRowsEqual(initialTable, 0, userTable, 0);\n</code></pre>\n\n<p>... (further down)</p>\n\n<pre><code>protected void assertRowsEqual(ITable expected, int rowExpected, ITable actual, int rowActual) throws Exception\n{\n\tITableMetaData metaData = expected.getTableMetaData();\n\tColumn [] cols = metaData.getColumns();\n\n\tfor (int i = 0; i &lt; cols.length; i++)\n\t{\n\t\tString colName = cols[i].getColumnName();\n\t\tassertEquals(expected.getValue(rowExpected, colName), actual.getValue(rowActual, colName));\n\t}\n\n}\n</code></pre>\n\n<p>This the test.xml that I slurp in: </p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;!DOCTYPE dataset SYSTEM \"../Tests/testdata/common/some.dtd\"&gt; \n\n&lt;dataset&gt;\n  &lt;USER ID=\"132\" FIRST_NAME=\"Joe\" LAST_NAME=\"Bob\" VERIFICATION_CODE=\"1869\" /&gt;\n&lt;/dataset&gt;\n</code></pre>\n"},{"tags":["android","unit-testing","mocking","android-testing"],"answer_count":6,"favorite_count":13,"up_vote_count":19,"down_vote_count":0,"view_count":3387,"score":19,"question_id":3337505,"title":"Mocking library/framework that works best in Android?","body":"<p>I'm developing Android application using third party libraries (Twitter4j). I want to be able mock those objects (also objects created by me) in JUnit and functional tests.</p>\n\n<p>Do you have any good experiences using some mocking libraries and you can recommend them?</p>\n"},{"tags":["unit-testing","magento","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12162239,"title":"Magento module examples that have unit tests","body":"<p>Are there any modules on github that have completed unit tests with them?</p>\n\n<p>I am looking to start using unit test with some modules but it seems a little more tricky in magento.</p>\n\n<p>I am using modman so my modules are seperated</p>\n\n<p>I am not sure how to structure and how to proceed.</p>\n"},{"tags":["asp.net-mvc","unit-testing","mstest"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":826,"score":5,"question_id":8318845,"title":"How to Unit Test JsonResult and Collections in MSTest","body":"<p>I am very new to unit testing even though i have been coding for a very long time. I want to make this a part of my way of development. I run into blocks on how to unit test things like a collection. I generally have my jQuery script calling ASP.Net Server side methods to get data and populate tables and the like. They look like </p>\n\n<pre><code>Get_*Noun*() \n</code></pre>\n\n<p>which generally returns a JsonResult. Any ideas on what and how to test these using Unit tests using MSTest?</p>\n"},{"tags":["c++","eclipse","unit-testing","eclipse-cdt","eclipse-juno"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12160308,"title":"Eclipse include paths with virtual directories","body":"<p>I have a C++ project in Eclipse Juno and I'm using the Boost Unit Test Framework. I am new to formal Unit Testing, so I am still working on my workflow.</p>\n\n<p>My workspace contains two projects:</p>\n\n<p>(1) my C++ Project</p>\n\n<p>(2) unit test project to test the classes in (1)</p>\n\n<p>As I write each unit test I import the necessary directories and files from (1) into (2) as <em>virtual directories</em>.</p>\n\n<p>This works OK for the source files, but it doesn't seem to work for the header files. </p>\n\n<p>e.g. compiling unit_test.cpp with</p>\n\n<p><code>#include \"foo/bar.h\"</code></p>\n\n<p>returns</p>\n\n<p><code>../unit_tests.cpp:8:30: error: foo/bar.h: No such file or directory</code></p>\n\n<p>even though there is a <em>virtual directory</em> <code>foo</code> with <code>bar.h</code> in it.</p>\n\n<p>If I use the Eclipse \"Open Declaration\" command (F3) on: <code>#include \"foo/bar.h\"</code> it will open the file, but the compiler can't find the file because it doesn't actually exist in the folder (I guess).</p>\n\n<p>I noticed that the compiler compiles the \"real\" source files with a non-virtual directory path, but obviously this isn't done automatically for the header files.</p>\n\n<p>I solved my problem by adding a Workspace referenced include path to the compiler. e.g.\n<code>${workspace_loc:/my C++ Project}</code> and this solved the problem, but what was the point of having virtual files when I have to create a reference to a real file anyway?</p>\n\n<p>My questions are:</p>\n\n<p>(*) Is this a good work flow?</p>\n\n<p>(*) How can my workflow be improved?</p>\n\n<p>(*) How do other people use Eclipse/IDEs to manage unit tests?</p>\n"},{"tags":["eclipse","unit-testing","maven","classpath","persistence.xml"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":505,"score":0,"question_id":6856855,"title":"How can I exclude one persistence.xml from the test classpath in Eclipse without using Maven/Ant?","body":"<p>While running JUnit integration tests inside Eclipse, I have two persistence.xml files on the classpath - one containing the configuration for the test cases and another one for production. I need to find a way to exclude the persistence.xml for production from the test classpath.</p>\n\n<p>Constraints: I am not allowed to use Maven or Ant, just Eclipse Helios SR1 (with JUnit). The JPA 2 persistence provider is EclipseLink 2.2.0. As I have to use ClearCase 7.0 as VCS, no linked resources are possible, <a href=\"http://stackoverflow.com/questions/1130400/eclipse-classpath-entries-only-used-for-tests\">as described here</a>, for example.</p>\n\n<p>Here is the rough project structure:</p>\n\n<pre><code>project-datamodel (containing the Entity beans)\n\\- src/resources/META-INF/persistence.xml (for production; want to exclude it)\n\\- test/resources/META-INF/persistence.xml (for test)\n\nproject-service (containing the Session beans)\n\\- ejbModule\n\nproject-service-it (containing the JUnit integration tests for the Session beans)\n\\- test\n</code></pre>\n"},{"tags":["unit-testing","restkit","cocoapods"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":12081644,"title":"Setting up RestKit 0.10.1 for testing while using CocoaPods?","body":"<p>I am trying to setup a testing environment for RestKit while using CocoaPods and I can't seem to be able to include RestKit's testing framework.</p>\n\n<p>I followed <a href=\"https://github.com/RestKit/RestKit/wiki/Unit-Testing-with-RestKit\" rel=\"nofollow\">Unit Testing with RestKit</a> but I wasn't able to include any of my podfiles.</p>\n\n<p>Then I found this <a href=\"http://www.irvinruz.com/en/posts/using-cocoapods-to-manage-your-ios-project-dependencies\" rel=\"nofollow\">article</a> about setting up CocoaPods with a small section about testing:</p>\n\n<blockquote>\n  <p>When trying to execute the unit tests of CookPix, I got this issue</p>\n  \n  <p>LoggerClient.h not found As described above, pod install changes your\n  Xcode project main target (I guess it takes the one named like the\n  project) to base the target configuration on the Pods.xcconfig file.\n  This lets Xcode found the headers of your dependencies and compile\n  your project with the right flags as well.</p>\n  \n  <p>However it does not change the configuration of all targets and in our\n  case, the unit tests target. To fix that, click on your Xcode project,\n  then again on the Xcode project on the secondary panel, then on the\n  Info tab. Change the \"Based on Configuration file\" attribute of your\n  unit tests target to Pods. This should fix the dependencies of your\n  unit tests target.</p>\n</blockquote>\n\n<p>This fixed the issue of including my pod files but I can't get RestKit's test framework installed. The compiler can't find this file because the pod doesn't install it. </p>\n\n<pre><code>#import &lt;RestKit/Testing.h&gt;\n</code></pre>\n\n<p>By looking at the CocoaPod spec it looks like it should be included. This is the relevant line in my Podfile.</p>\n\n<pre><code>pod 'RestKit', '0.10.1'\n</code></pre>\n\n<p>I also tried:</p>\n\n<pre><code>pod 'RestKit/Testing', '0.10.1'\n</code></pre>\n\n<p>With the same results.</p>\n"},{"tags":["c#",".net","visual-studio","unit-testing","waithandle"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":759,"score":5,"question_id":3246207,"title":"Unit testing WaitHandler.WaitAll","body":"<p>Is there a way to unit test <code>WaitHandle.WaitAll()</code> when using Visual Studio's built-in unit testing solution.   When I try and run a test that uses this function within Visual Studio the test fails and when examining the test results the following error is displayed:</p>\n\n<pre><code>WaitAll for multiple handles on a STA thread is not supported\n</code></pre>\n\n<p>I'd like to be able to unit test the use of <code>WaitAll()</code> since an increasing amount of my API's code base is now moving to an <code>IAsyncResult</code> pattern as opposed to other means of doing multi-threaded operations.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Based on Anthony's suggestion here is a simple helper method that can be used to invoke such code in a unit test environment:</p>\n\n<pre><code>    public static void TestInMTAThread(ThreadStart info)\n    {\n        Thread t = new Thread(info);\n        t.SetApartmentState(ApartmentState.MTA);\n        t.Start();\n        t.Join();\n    }\n</code></pre>\n"},{"tags":["java","multithreading","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":89,"score":2,"question_id":12159932,"title":"how many threads to use in unit tests?","body":"<p>I'm unit testing a class for thread safety. I'm calling its methods from different threads, to make sure all of them receive the same result (in a nutshell). This is how I decide how many threads to use:</p>\n\n<pre><code>int threads = Runtime.getRuntime().availableProcessors() * 4;\n</code></pre>\n\n<p>Is it a good practice? How many should I use? The more the better?</p>\n"},{"tags":["unit-testing","dbcontext"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12160111,"title":"Working with fake DbContext","body":"<p>Main project uses SQL Server and test data are simply copy/pasted from Sql Server Management query result table (with headers) into text file. There is one data file for several tables that are required in operation to be tested. I use code-first Entity Framework 5 as ORM to generate POCO classes. </p>\n\n<p>In the test project I populate database from the test data using very simple class and some conventions. When adequate object is reconstructed from the text file row, I add it in adequate set in the database using <code>db.Set(entityType).Add(obj)</code>where entity type is determined by the file name and populated using reflection. I see that it complains here about missing connection string but I ignored that. </p>\n\n<p>I can access this data only using <code>db.MyType.Local</code> which makes me a problem since main application doesn't use local sets.</p>\n\n<p>Is there any way I can make this kind of fake database behave the same as real one (apart from obvious entity to sql vs entity to objects differences). The only thing that comes to my mind is also using local colections by Load()-ing a query but what if I can't modify the original code ?</p>\n"},{"tags":["python","unit-testing","sockets","pyunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12156969,"title":"Python Client-Server Script Unit Testing Error","body":"<p>I have client and server scripts that serves/reads some data.</p>\n\n<p>When i tried to write unit tests with using PyUnit, there raises a error that i cannot reason it.</p>\n\n<p>Here is the relevant code snippet:</p>\n\n<pre><code>class TestSequenceFunctions(unittest.TestCase):\ndef setUp(self):\n    #some set up operations\n\ndef testRecieve(self):\n    s = socket.socket()   \n    s.connect((FEED_SERVER_HOST, FEED_SERVER_PORT))\n    sock = socket.socket()    \n    #some recieve operations        \n    s.close()\n\n # When i write this code snippet below, i get error: [Errno 98] Address already in use\nerror. I tried closing 's' socket in tearDown function but still same error raising.\n\n    def testAnotherRecieve(self):\n        sock = socket.socket() # Results ERRNO 98.\n</code></pre>\n\n<p>As summary, i cannot create second socket in the unittest class. What may cause this error?</p>\n"},{"tags":["c#","unit-testing",".net-4.0","moq","mvp"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12144446,"title":"Instance of an object created in a method. How to mock that instance?","body":"<p>I have a method in my Presenter which creates a class which contains all the user inputs, called UserInputEntity. It implements the interface IUserInputEntity. I currently have it declared as a local variable, of type UserInputEntity, and thus cant mock it in the following method (simplified for brevity):</p>\n\n<pre><code>public void CompletionReportNotifier(object sender, VerificationStatusEventArgs e)\n{\n    _view.PermanentCsvFileVerificationCancellation = null;\n\n    string logMessage;\n    bool inputsVisible = false;\n\n    //Mocking inputs.NumberOfErrorsFound??\n    if (e.CarriedOutToCompletion != true || inputs.NumberOfErrorsFound &gt; 0)\n    {\n        inputsVisible = true;\n        _view.VerificationCompleted = false;\n        logMessage = \"failed to complete operation\";\n    }\n    else\n    {\n        _view.VerificationCompleted = true;\n        logMessage = \"Completed operation\";\n    }\n    _view.UIUpdate(logMessage, inputsVisible);\n}\n</code></pre>\n\n<p>What is the most appropriate way to get around this? The only possible solution i can think of is to declare another method which only calls the entity classes constructor, and returns an IUserInputEntity. I would then change the declaration of \"inputs\", in the presenter, to type IUserInputEntity. Would this be suitable or is there a better way?</p>\n\n<p>Below is a copy of the method where the instance of \"inputs\" is created atm (simlpified):</p>\n\n<pre><code>private void DataVerification(Object sender, EventArgs e)\n{\n    if (_view.VerifyingData != true)\n    {\n        inputs = new UserInputEntity(_view.DataTypeInputs, _view.ColumnNameInputs, _view.InitialRow, _view.FinalRow, _view.CurrencyPair, _view.CsvFilePath, _view.ErrorLogFilePath);\n\n        // ...\n\n        verification.VerifyDataTypesAsync();     \n    }\n    else\n    {\n        _view.PermanentCsvFileVerificationCancellation.Cancel();\n    } \n}\n</code></pre>\n"},{"tags":["c","unit-testing","open-source","standard-library","libc"],"answer_count":1,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":102,"score":6,"question_id":12150769,"title":"Comprehensive open-source test suite for the C Standard Library","body":"<p>I'm looking for a testsuite for the C Standard Library (mainly for the algorithms not contacting the \"outer world\", so <code>strcpy()</code>, <code>memcmp()</code>, <code>itoa()</code> &amp; likes).</p>\n\n<p>I tried downloading the GCC sources, but they're very large and I have trouble finding anything I could reuse in there...</p>\n\n<p>(To be clear, the question is meant about the ANSI C Standard Library, not POSIX or else. Also, I'd like for the tests to be rather portable.)</p>\n"},{"tags":["python","django","json","unit-testing","fixtures"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12156346,"title":"Is it possible to alter existing data with Django's fixtures?","body":"<p>I'm using Django's fixtures in my tests. I need to create UserProfile fixture. The first problem is that it's pointed to User entry. To deal with it, I'm using natural keys. So I just say that UserProfile fixture's user field is User fixture's actual username.</p>\n\n<pre><code>[\n    {\n        \"pk\": 8002,\n        \"model\": \"auth.user\",\n        \"fields\": {\n            \"date_joined\": \"2012-08-28 10:00:00.000000+00:00\",\n            \"email\": \"\",\n            \"first_name\": \"\",\n            \"groups\": [],\n            \"is_active\": true,\n            \"is_staff\": false,\n            \"is_superuser\": false,\n            \"last_login\": \"2012-08-28 10:00:00.000000+00:00\",\n            \"last_name\": \"\",\n            \"password\": \"pbkdf2_sha256$10000$ltmEKsdCPjuK$74ZwNUh8rqFAPZ6+Cmi3tc8A94ueeXTplFqOQKlY4hc=\",\n            \"user_permissions\": [],\n            \"username\": \"user8002\"\n        }\n    },\n    {\n        \"pk\": null,\n        \"model\": \"spam_and_eggs.userprofile\",\n        \"fields\": {\n            \"user\": [\"user8002\"],\n            \"language\": \"\",\n            \"email_activated\": true\n        }\n     }\n]\n</code></pre>\n\n<p>Unfortunately, it gives back an error:</p>\n\n<pre><code>IntegrityError: Could not load share4you.UserProfile(pk=None): column user_id is not unique\n</code></pre>\n\n<p>Here comes the second problem. I think that it may fail because UserProfile is automatically created when user is created using Django's signals and fixture fails because UserProfile for that User is already created. Can it be the reason? Are there any ways to fix it?</p>\n\n<p>Thanks in any advice!</p>\n\n<p><strong>Edit #1:</strong></p>\n\n<p>Model and signal:</p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.ForeignKey(User, unique=True)\n    language = models.CharField(max_length=255, null=True, blank=True)\n    email_activated = models.BooleanField()\n\n@receiver(post_save, sender=User)\ndef create_profile(instance, created, **kwargs):\n    if created:\n        UserProfile.objects.get_or_create(user=instance)\n</code></pre>\n\n<p>User models is <code>django.contrib.auth.models.User</code>.</p>\n"},{"tags":[".net","unit-testing","com","arcgis","esri"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12155942,"title":"Unit testing ArcGIS SOE throws COMException (Class not registered)","body":"<p>We're developing a Server Object Extension (SOE) for ArcGIS Server 10.1 and we try to unit test it. Tests run fine until some code tries to create a new instance of an ArcGIS class - then they fail with a COMException like this:</p>\n\n<pre><code>Retrieving the COM class factory for component\nwith CLSID {EF14FD40-8890-4674-9941-D00EB91B0E44}\nfailed due to the following error:\n\n80040154 Class not registered\n(Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).\n</code></pre>\n\n<p>The code that throws this exception looks like this:</p>\n\n<pre><code>IResultPortionInfo range = new ResultPortionInfo();\n</code></pre>\n\n<p>I manually registered every <b>ESRI.ArcGIS.*.dll</b> using <i>ESRIRegAsm.exe</i>. I also registered every <b>c:\\Program Files\\ArcGIS\\Server\\com\\*.olb</b> using <i>regsvr32.exe</i>. The test assembly is signed, as well as all production assemblies. Tests runs in 64-bit environment (Environment.Is64BitProcess returns true). I tried to run the tests using Resharper test runner and also using MSTest runner - in that case they run under QTAgent.exe (not QTAgent32.exe).</p>\n\n<p>Any ideas? <b>:-)</b> Thanks.</p>\n"},{"tags":["unit-testing","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12108772,"title":"How to raise delegate at Moq test?","body":"<p>Here is part of code implementation in parent class:</p>\n\n<p><code>\nhandler.FooUpdateDelegate += FooUpdate(OnFooUpdate);<br></p>\n\n<p>protected abstract void OnFooUpdate(ref IBoo boo, string s);\n</code></p>\n\n<p>Now, I have in test method mocked handler:\nMock mHandler = mockFactory.Create();</p>\n\n<p>This:\n<code>mHandler.Raise(x => x.FooUpdateDelegate += null, boo, s);</code><br>\nis not working. It sais: \n<code>System.ArgumentException : Could not locate event for attach or detach method Void set_FooUpdateDelegate(FooUpdate).\n</code></p>\n\n<p>and I want to raise OnFooUpdate so it triggers the code to be tested in child class.</p>\n\n<p><strong>How can I raise delegate (not common event handler) with Moq?</strong></p>\n\n<p>If I missed the point completely, please enligten me.</p>\n"},{"tags":["android","unit-testing","process"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12155081,"title":"Intent in process resolved to different process","body":"<p>There are two activities in my app A and B, Activity A is the mainactivity.\nIn <code>androidmanifest.xml</code> file, activity B describes with android:process property, like <code>android:process=\":C\"</code>.  </p>\n\n<p>In my unit testing project, I want to test activity B, I use startActivitySync method to start  activity B, but i got a <code>java.lang.runtimexception:Intent in process A resolved to different process A:C.</code>  </p>\n\n<p>I do not know how to solve it, somebody help me?</p>\n"},{"tags":["unit-testing","razor","nancy"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":88,"score":3,"question_id":11950126,"title":"Does Nancy.Testing support nested Razor views?","body":"<p>I have a unit test that attempts to sign-in with incorrect credentials and checks the resulting response body for some specific 'errorbox' html. This works just fine.</p>\n\n<pre><code>[Fact]\npublic void SignIn__Should_display_error_message_when_error_passed()\n{\n    var browser = Fake.Browser();\n    var response = browser.Get(\"/signin\", with =&gt; with.Query(\"error\", \"true\"));\n\n    response.Body[\"#errorBox\"]\n            .ShouldExistOnce()\n            .And.ShouldBeOfClass(\"floatingError\")\n            .And.ShouldContain(\"invalid\", StringComparison.InvariantCultureIgnoreCase);\n}\n</code></pre>\n\n<p>My pages were getting a bit repetitious so I re-organised things to create a simple set of nested razor views, like this:</p>\n\n<p><strong>The SignIn View</strong></p>\n\n<pre><code>@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase&lt;dynamic&gt;\n@{\n    Layout = \"_Master.cshtml\";\n}\n&lt;h3&gt;Sign In&lt;/h3&gt;\n&lt;form class=\"nice\" method=\"POST\"&gt;\n    ... [labels, inputs etc]\n&lt;/form&gt; \n@if (Model.HasError)\n{\n  &lt;div id=\"errorBox\" class=\"floatingError\"&gt;Invalid UserName or Password&lt;/div&gt;\n}\n</code></pre>\n\n<p><strong>The _Master View</strong></p>\n\n<pre><code>@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase&lt;dynamic&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"utf-8\" /&gt;\n        &lt;title&gt;@Model.Title&lt;/title&gt;  \n        ... [css javascript etc]\n        @RenderSection(\"Head\", required: false)      \n    &lt;/head&gt;\n\n    &lt;body&gt;\n        @RenderBody()        \n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This still works and my unit test still passes (bear with me). Time passes and the code gets more complex, so now I need to reorganise again. I have added another layer of nesting to my razor views. </p>\n\n<p><strong>The _Page View</strong></p>\n\n<pre><code>@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase&lt;dynamic&gt;\n@{\n    Layout = \"_Master.cshtml\";\n}\n@section Head{\n    [... shared javascript, css]\n    @RenderSection(\"Head\", required: false)  \n}\n[.. some shared content]\n@RenderBody()   \n</code></pre>\n\n<p>The double nesting looks like this: </p>\n\n<p><strong>SignIn -> _Page -> _Master</strong></p>\n\n<p>Now my unit test <em>fails</em> as the response does not contain the correct html. Running the code in an real browser (chrome) and manually supplying incorrect credentials produces the correct response, it is only the unit-test that fails. </p>\n\n<p>Drilling down to <code>response.Body.responseDocument.agilityPackDocumentInternal.DocumentNode.InnerHtml</code> shows this exception:</p>\n\n<p><em>Error Compiling Template: (15, 11) The type or namespace name 'XXXX' could not be found</em></p>\n\n<p>Re-pointing the SignIn view back to using _Master as its layout (cutting out the middle _Page view) makes the Unit Test pass again. </p>\n\n<p>Yet the _Page view does nothing code-wise, it just adds some <code>&lt;script&gt;</code> and <code>&lt;style&gt;</code> tags and passes on the baton. To test if those tags are the problem, I shifted them to the _Master view and kept the nesting at one level (SignIn -> _Master) and the test passed.</p>\n\n<p>So, does <code>Nancy.Testing</code> support two levels of razor layout nesting? Otherwise, can anybody spot my mistake?</p>\n\n<p>Thank You</p>\n\n<p><strong>P.S.</strong> I don't know if it is connected but I suspected that view caching might be the problem (after reading <a href=\"http://stackoverflow.com/questions/7365306/test-driving-nancy-modules\">Test driving Nancy Modules</a>) I checked the value of <code>Nancy.StaticConfiguration.DisableCaches</code> and sure enough, it was set to <code>false</code> (despite my <code>DEBUG</code> symbol being switched on and running the test in Debug mode). I set this value to true in my custom unit test BootStrapper class but this made no difference.</p>\n\n<pre><code>protected override void ConfigureApplicationContainer(TinyIoCContainer container)\n{\n    base.ConfigureApplicationContainer(container);\n    Nancy.StaticConfiguration.DisableCaches = true;\n}\n</code></pre>\n"},{"tags":["qt","unit-testing","qtestlib","qttest"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12154980,"title":"How to structure project while unit-testing Qt app by QTestLib","body":"<p>I got my Qt project and I'm using Qt Creator. I want to unit-test all my code.<br>\nHowever I'm quite new at QTestLib framework but everyone recommended it for testing Qt-based source. Now I'm a little confused how to structure test project with app project.</p>\n\n<ol>\n<li>Can I put all source and testing code in same project? If so, how could I manage them? I didn't find any option that let me start app or start test in one project.</li>\n<li>If I put app source and testing code in separate projects, the testing project will reference app project, that's not quite convenient.  </li>\n<li>For lots for classes required to be tested, how do I manage testing code?</li>\n</ol>\n\n<p>How do you guys manage testing code in such a situation? Thanks.</p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":166,"score":5,"question_id":12138065,"title":"Java - Unit Test","body":"<p>Given this method in a Java class: </p>\n\n<pre><code>public void execute(String command) {\n\n    ProcessBuilder processBuilder = new ProcessBuilder(command);\n    Process process = processBuilder.start();\n\n    int exitValue = process.waitFor();\n    if (exitValue != 0) {\n        throw new RuntimeException(\"a message here...\");\n    }\n}\n</code></pre>\n\n<p>I'm trying to come up with a proper <strong>cross platform</strong> unit test for this method.</p>\n\n<p>I'm looking for a common command across all operating systems (Win, Linux, Mac and ...) or a fake command that I can pass to this method in my unit tests.</p>\n\n<p>Any suggestion ? </p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":7,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":160,"score":6,"question_id":12147297,"title":"How do I assert equality on two classes without an equals method?","body":"<p>Say I have a class with no equals() method, to which do not have the source.  I want to assert equality on two instances of that class.</p>\n\n<p>I can do multiple asserts:</p>\n\n<pre><code>assertEquals(obj1.getFieldA(), obj2.getFieldA());\nassertEquals(obj1.getFieldB(), obj2.getFieldB());\nassertEquals(obj1.getFieldC(), obj2.getFieldC());\n...\n</code></pre>\n\n<p>I don't like this solution because I don't get the full equality picture if an early assert fails.</p>\n\n<p>I can manually compare on my own and track the result:</p>\n\n<pre><code>String errorStr = \"\";\nif(!obj1.getFieldA().equals(obj2.getFieldA())) {\n    errorStr += \"expected: \" + obj1.getFieldA() + \", actual: \" + obj2.getFieldA() + \"\\n\";\n}\nif(!obj1.getFieldB().equals(obj2.getFieldB())) {\n    errorStr += \"expected: \" + obj1.getFieldB() + \", actual: \" + obj2.getFieldB() + \"\\n\";\n}\n...\nassertEquals(\"\", errorStr);\n</code></pre>\n\n<p>This gives me the full equality picture, but is clunky (and I haven't even accounted for possible null problems).  A third option is to use Comparator, but compareTo() will not tell me which fields failed equality.</p>\n\n<p>Is there a better practice to get what I want from the object, without subclassing and overridding equals (ugh)?</p>\n"},{"tags":["python","django","unit-testing","manytomanyfield"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12151988,"title":"Django testing: DatabaseError: no such table for ManyToManyField","body":"<p>I've written a couple of tests for really simple blog app, but the many to many relationship fails when I run the test: <code>./manage.py test myblog</code></p>\n\n<pre><code>DatabaseError: no such table: myblog_post_tag\n</code></pre>\n\n<p>Yet when I do <code>./manage.py sql myblog</code>:</p>\n\n<pre><code>BEGIN;\nCREATE TABLE \"myblog_tag\" (\n    \"id\" integer NOT NULL PRIMARY KEY,\n    \"name\" varchar(50) NOT NULL\n)\n;\nCREATE TABLE \"myblog_post_tag\" (\n    \"id\" integer NOT NULL PRIMARY KEY,\n    \"post_id\" integer NOT NULL,\n    \"tag_id\" integer NOT NULL REFERENCES \"myblog_tag\" (\"id\"),\n    UNIQUE (\"post_id\", \"tag_id\")\n)\n;\nCREATE TABLE \"myblog_post\" (\n    \"id\" integer NOT NULL PRIMARY KEY,\n    \"title\" varchar(200) NOT NULL,\n    \"pub_date\" datetime NOT NULL,\n    \"content\" text NOT NULL\n)\n;\nCOMMIT;\n</code></pre>\n\n<p>It does create a table, yet it fails to do so while testing? Any help is appreciated.\nHere's my test:</p>\n\n<pre><code>class TagModelTest(TestCase):\n\n    def test_create_tags_for_posts(self):\n        # tests tagging posts, postodd will have tags 1 &amp; 3, posteven will be 2 &amp; 4\n        postodd = Post(\n            title=\"testing odd tags\",\n            pub_date=timezone.now(),\n            content='''hello everybody, we are testing some tagging\n                functionality here. This post should have odd tags.''',\n        )\n        posteven = Post(\n            title=\"test even tags\",\n            pub_date=timezone.now(),\n            content ='''hello everybody, we are testing some tagging\n                functionality here. This post should have even tags.''',\n        )\n        #save them to db\n        postodd.save()\n        posteven.save()\n\n        # create the  tags\n        tag1 = Tag(name=\"1\")\n        tag2 = Tag(name=\"2\")\n        tag3 = Tag(name=\"3\")\n        tag4 = Tag(name=\"4\")\n\n        # save all tags to db\n        tag1.save()\n        tag2.save()\n        tag3.save()\n        tag4.save()\n\n        # create the many2many relationship\n        postodd.tag.add(tag1)\n</code></pre>\n\n<p>And my models.py if needed:</p>\n\n<pre><code>from django.db import models\n\n\nclass Tag(models.Model):\n    name = models.CharField(max_length=50)\n\n    def __unicode__(self):\n        return self.name\n\n\nclass Post(models.Model):\n    tag = models.ManyToManyField(Tag)\n    title = models.CharField(max_length=200)\n    pub_date = models.DateTimeField(verbose_name=\"Date published\")\n    content = models.TextField()\n\n    def __unicode__(self):\n        return self.title\n</code></pre>\n"},{"tags":["ios","unit-testing","cucumber","frank"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":11746397,"title":"How to write Cucumber tests with frank","body":"<p>I am new to working with cucumber/frank/ruby and tried to follow the steps here <a href=\"http://blog.thepete.net/blog/2012/06/24/writing-your-first-frank-test/\" rel=\"nofollow\">http://blog.thepete.net/blog/2012/06/24/writing-your-first-frank-test/</a>\nI am trying to create a step definition. In the tutorial they give you the code to write your step definition. This is their code for the sample step definition is:</p>\n\n<pre><code>Then /^I should be on the Home screen$/ do\n  check_element_exists \"view view:'UIImageView' marked:'Icon512x512.png'\"\nend\nWhen /^I navigate to \"(.*?)\"$/ do |tab_name|\n  touch \"view:'UITabBarButton' marked:'#{tab_name}'\"\nend\nThen /^I should be on the Events screen$/ do\n  check_element_exists \"view:'UIScrollView' view:'UIButton' marked:'archery'\"\n  check_element_exists \"view:'UIScrollView' view:'UIButton' marked:'badminton'\"\n  check_element_exists \"view:'UIScrollView' view:'UIButton' marked:'boxing'\"\nend\n</code></pre>\n\n<p>I tried writing just the first part to apply to my application and wrote it like this:</p>\n\n<pre><code>Then /^I should be on the Map screen$/ do\n  check_element_exists \"view view:'UIButtonLabel' marked:'Photo View'\"\nend\n</code></pre>\n\n<p>It gives me the error \n Then I should be on the Map screen                            # features/step_definitions/navigation_steps.rb:1\n      frankly_map view view: 'UIButtonLabel' marked:'Photo View' accessibilityLabel failed because: invalid selector\n      <em>*</em> -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array (RuntimeError)\n      /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/timeout.rb:53:in <code>timeout'\n      ./features/step_definitions/navigation_steps.rb:1:in</code>/^I should be on the Map screen$/'\n      features/navigation.feature:5:in `Then I should be on the Map screen'</p>\n"},{"tags":["unit-testing","r","assertions"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":245,"score":6,"question_id":4897327,"title":"How to make assertions in R?","body":"<p>Is it recommendable to use <em>RUnit</em>'s check* functions to make preconditions/ postcondition statements or do this come with some penality in performance or other?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","unit-testing","modelstate"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":610,"score":5,"question_id":8165026,"title":"Testing ModelState is always valid in asp.net mvc","body":"<p>When testing my controller's actions the ModelState is always valid.</p>\n\n<pre><code>public class Product\n{\n    public int Id { get; set; }\n\n    [Required]\n    [StringLength(10)]\n    public string Name { get; set; }\n\n    [Required]\n    public string Description { get; set; }\n\n    [Required]\n    public decimal Price { get; set; }\n}\n</code></pre>\n\n<p>And my controller.</p>\n\n<pre><code>public class ProductController : Controller\n{\n      [HttpPost]\n      public ActionResult Create(Product product)\n      {\n            if (ModelState.IsValid)\n            {\n                   // Do some creating logic...\n                   return RedirectToAction(\"Display\");\n            }\n\n             return View(product);              \n      }\n }\n</code></pre>\n\n<p>And test:  </p>\n\n<pre><code>[Test]\npublic TestInvalidProduct()\n{\n     var product = new Product();\n     var controller = new ProductController();\n     controller.Create(product);\n     //controller.ModelState.IsValid == true\n}\n</code></pre>\n\n<p>Why the modelState is valid when the product doesn't have a name, Description and price?</p>\n"},{"tags":["javascript","unit-testing","extjs","jasmine","phantomjs"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":670,"score":0,"question_id":11933044,"title":"Using phantomjs to make ajax calls using extjs proxy on local file","body":"<p>I have a basic extjs store that uses a proxy to access a local json file.</p>\n\n<p>e.g.</p>\n\n<pre><code>...\nproxy: {\n    type: 'ajax',\n    api: {\n        read: 'data/mydata.json'\n    },\n    reader: {\n        type: 'json',\n        root: 'datas',\n        successProperty: 'success'\n    }\n} \n...\n</code></pre>\n\n<p>I want to use Maven, Jasmine and phantomjs to build and test my project via Atlassian Bamboo.</p>\n\n<p>When I execute phantomjs like so:</p>\n\n<pre><code>$ phantomjs \"c:\\phantomjs-1.6.1\\examples\\run-jasmine.js\" run-tests.html\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>'waitFor()' finished in 422ms.\n 4 specs, 2 failures in 0.075s\n</code></pre>\n\n<p>This is happening because phantomjs can't manage to load local files using file:// protocol for the proxy.</p>\n\n<p>I'm following <a href=\"http://docs.sencha.com/ext-js/4-0/#!/guide/testing\" rel=\"nofollow\">this</a> example, and am wondering whether it's possible to mock my proxies response so that I can use phantomjs locally (on my Bamboo server) with the test html file, rather than having to host the project in a web server like Apache (annoying external dependency I will have to manage with Maven).</p>\n\n<p>If not, are there any other mechanisms (built into Jasmine, phantomjs, or otherwise), that I can use to achieve this?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12152299,"title":"Assert.IsInstanceOfType fails even though it says both types are the same","body":"<p>How can this happen? And How can I fix it?</p>\n\n<p><img src=\"http://i.stack.imgur.com/Xtc7j.png\" alt=\"enter image description here\"></p>\n"},{"tags":["python","unit-testing"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":215,"score":2,"question_id":12136762,"title":"assertAlmostEqual in Python unit-test for collections of floats","body":"<p>The <a href=\"http://docs.python.org/library/unittest.html#unittest.TestCase.assertAlmostEqual\" rel=\"nofollow\">assertAlmostEqual(x, y)</a> method in <a href=\"http://docs.python.org/library/unittest.html\" rel=\"nofollow\">Python's unit testing framework</a> tests whether <code>x</code> and <code>y</code> are approximately equal assuming they are floats.</p>\n\n<p>The problem with <code>assertAlmostEqual()</code> is that it only works on floats. I'm looking for a method like <code>assertAlmostEqual()</code> which works on lists of floats, sets of floats, dictionaries of floats, tuples of floats, lists of tuples of floats, sets of lists of floats, etc.</p>\n\n<p>For instance, let <code>x = 0.1234567890</code>, <code>y = 0.1234567891</code>. <code>x</code> and <code>y</code> are almost equal because they agree on each and every digit except for the last one. Therefore <code>self.assertAlmostEqual(x, y)</code> is <code>True</code> because <code>assertAlmostEqual()</code> works for floats.</p>\n\n<p>I'm looking for a more generic <code>assertAlmostEquals()</code> which also evaluates the following calls to <code>True</code>:</p>\n\n<ul>\n<li><code>self.assertAlmostEqual_generic([x, x, x], [y, y, y])</code>.</li>\n<li><code>self.assertAlmostEqual_generic({1: x, 2: x, 3: x}, {1: y, 2: y, 3: y})</code>.</li>\n<li><code>self.assertAlmostEqual_generic([(x,x)], [(y,y)])</code>.</li>\n</ul>\n\n<p>Is there such a method or do I have to implement it myself?</p>\n\n<p><strong>Clarifications:</strong></p>\n\n<ul>\n<li><p><code>assertAlmostEquals()</code> has an optional parameter named <code>places</code> and the numbers are compared by computing the difference rounded to number of decimal <code>places</code>. By default <code>places=7</code>, hence <code>self.assertAlmostEqual(0.5, 0.4)</code> is False while <code>self.assertAlmostEqual(0.12345678, 0.12345679)</code> is True. My speculative <code>assertAlmostEqual_generic()</code> should have the same functionality.</p></li>\n<li><p>Two lists are considered almost equal if they have almost equal numbers in exactly the same order. formally, <code>for i in range(n): self.assertAlmostEqual(list1[i], list2[i])</code>.</p></li>\n<li><p>Similarly, two sets are considered almost equal if they can be converted to almost equal lists (by assigning an order to each set).</p></li>\n<li><p>Similarly, two dictionaries are considered almost equal if the key set of each dictionary is almost equal to the key set of the other dictionary, and for each such almost equal key pair there's a corresponding almost equal value.</p></li>\n<li><p>In general: I consider two collections almost equal if they're equal except for some corresponding floats which are just almost equal to each other. In other words, I would like to really compare objects but with a low (customized) precision when comparing floats along the way.</p></li>\n</ul>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12150353,"title":"PHPUnit - Mocking nested objects of the same type","body":"<p>Say I have an object of type Config, which more or less stores a bunch of key/value pairs. If the value is an array, it converts the array to a new Config instance, storing the array's values within. Naturally, this can go on indefinitely with multiple levels.</p>\n\n<p>What would be the best approach to mocking this type of object? I'm fairly new to PHPUnit, so it is very possible that a very straightforward solution exists, but currently I'm not sure how to proceed.</p>\n\n<p>Based on my experience so far, creating a mock of Config does not propagate to the contained Config objects as well (in my __set() magic method, it is basically calling <code>new self($array)</code> when it reaches the nested array in <code>$data</code>.</p>\n\n<p>Here's an example of how the object should behave:</p>\n\n<pre><code>$data = array(\n    'one' =&gt; 'unus',\n    'two' =&gt; 'duo',\n    'three' =&gt; array(\n        'a' =&gt; 'alpha',\n        'b' =&gt; 'beta'\n    )\n);\n\n$config = new Config($data);\n\n// I should be able to do this:\necho $config-&gt;three-&gt;a;          // Outputs \"alpha\"\necho get_class($config-&gt;three);  // Outputs \"Config\"\n</code></pre>\n"},{"tags":["javascript","unit-testing","v8"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":2,"question_id":11132430,"title":"Installing Google js test for unit testing","body":"<p>I am currently working on JavaScript and want to design unit test for JavaScript I am using google-JS-Test</p>\n\n<p><a href=\"http://code.google.com/p/google-js-test/\" rel=\"nofollow\">http://code.google.com/p/google-js-test/</a></p>\n\n<p>I have downloaded <strong>gjstest-1.0.7</strong></p>\n\n<p>I have installed all the prerequisites need. </p>\n\n<p><a href=\"http://code.google.com/p/google-js-test/wiki/Installing#Prerequisites\" rel=\"nofollow\">http://code.google.com/p/google-js-test/wiki/Installing#Prerequisites</a></p>\n\n<p>but when I install google js test using</p>\n\n<pre><code>$ cd gjstest-1.0.7 \n$ make\n</code></pre>\n\n<p>I got following errors</p>\n\n<pre><code>g++ -DHASH_NAMESPACE=__gnu_cxx -lrt -I. -I/usr/include/libxml2 -DDEFAULT_DATA_DIR=/usr/local/share/gjstest  -c -o gjstest/internal/cpp/v8_utils.o gjstest/internal/cpp/v8_utils.cc\ngjstest/internal/cpp/v8_utils.cc:33: error: ‘v8::StackFrame’ has not been declared\ngjstest/internal/cpp/v8_utils.cc:34: error: ‘v8::StackTrace’ has not been declared\ngjstest/internal/cpp/v8_utils.cc: In function ‘void gjstest::ConvertToStringVector(const v8::Handle&lt;v8::Value&gt;&amp;, std::vector&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::allocator&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt;*)’:\ngjstest/internal/cpp/v8_utils.cc:60: error: no matching function for call to ‘v8::Array::Get(uint32&amp;)’\n/usr/include/v8.h:1161: note: candidates are: v8::Local&lt;v8::Value&gt; v8::Object::Get(v8::Handle&lt;v8::Value&gt;)\nmake: *** [gjstest/internal/cpp/v8_utils.o] Error 1\n</code></pre>\n\n<p>It seems like v8 is not install correctly </p>\n\n<p>I have installed V8 using commands like</p>\n\n<pre><code>sudo apt-get install libv8-2.0.3 \nsudo apt-get install libv8-dbg \nsudo apt-get install libv8-dev \n</code></pre>\n\n<p>And also by downloading it </p>\n\n<pre><code>   svn checkout http://v8.googlecode.com/svn/trunk/ v8\n   cd v8\n   make dependencies\n   scons\n</code></pre>\n\n<p>But still getting these errors</p>\n\n<p>So if any one has installed and used Google Js or installed v8 Kindly guide me on how should I solve this problem.</p>\n\n<p>I am using ubuntu 10.04\nAny help will be appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","unit-testing","domain-driven-design","autofixture"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":203,"score":5,"question_id":12051087,"title":"How to simplify Unit Testing DDD Value objects Equality with AutoFixture","body":"<p>I'm currently writing Unit Tests for my Domain project with xUnit, Moq and AutoFixture. Let's have a look at this Test Method:</p>\n\n<pre><code>[Theory]\npublic void SameValueAs_OnOtherHasDifferentEmail_ReturnsFalse()\n{\n    Fixture fix = new Fixture();\n    var sut = fix.CreateAnonymous&lt;CoreAddress&gt;();\n\n    var other = new CoreAddress(\n        sut.Firstname,\n        sut.Lastname,\n        sut.Company,\n        sut.Street,\n        sut.City,\n        sut.ZIP,\n        \"other@email.com\");\n\n    Assert.False(sut.SameValueAs(other));\n}\n</code></pre>\n\n<p>As you can see I'm testing the class CoreAddress and its SameValueAs Method. To test every possible case, I'd have to create the Test methods <em>OnOtherHasDifferentFirstname</em> , <em>OnOtherHasDifferentLastname</em> etc. Is this pattern okay? Can I somehow simplify this with regards to AutoFixture usage?</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12095719,"title":"Jasmine spy which functions called a method","body":"<p>I know I can see if a method of function was called and with which parameters. But is it possible to see which which functions called it? So in fact I would like to find out from where in my code a function is being called.</p>\n"},{"tags":["unit-testing","razor","nancy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12052267,"title":"Why does Nancy.Testing fail when @using statements are included in razor layouts?","body":"<p>In a previous question <a href=\"http://stackoverflow.com/q/11950126/776476\">Does Nancy.Testing support nested Razor views?</a> I outlined the difficulties I was having with Nancy unit tests failing when presented with nested razor layouts.</p>\n\n<p>After investigation I can now refine that information. The problem is not related to nesting it is simply this: If you include a @using statement in a razor layout or view, then Nancy will fail to find that referenced namespace if accessed from a unit-test.</p>\n\n<p>For example:</p>\n\n<p><strong>Master Layout</strong></p>\n\n<pre><code>@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase&lt;dynamic&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n        &lt;title&gt;Test&lt;/title&gt;    \n    &lt;/head&gt;\n    &lt;body&gt;\n        @RenderBody()        \n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase&lt;dynamic&gt;\n@{\n    Layout = \"Master.cshtml\";\n}\nhello World \n</code></pre>\n\n<p>As you would expect, this works fine. However if we now add a bit of server side processing to the master layout, and so create the need for a @using statement, then unit tests fail (the code runs fine normally, only the unit tests fail) with:</p>\n\n<p><em>Error Compiling Template: (15, 11) The type or namespace name 'uMentor' could not be found.</em></p>\n\n<p><strong>Master Layout with server-side code</strong></p>\n\n<pre><code>@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase&lt;dynamic&gt;\n@using uMentor.Extensions\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n        &lt;title&gt;@Model.Title&lt;/title&gt;   \n    &lt;/head&gt;\n    &lt;body&gt;\n        @{\n            var user = Html.GetCurrentUser();\n        }\n        @RenderBody()        \n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I have ensured that my web.config (both the web-site project and the unit-test project) have the correct razor assemblies and namespaces mentioned:</p>\n\n<p><strong>Web.config</strong></p>\n\n<pre><code>&lt;configSections&gt;\n  &lt;section name=\"razor\" type=\"Nancy.ViewEngines.Razor.RazorConfigurationSection, Nancy.ViewEngines.Razor\" /&gt;\n&lt;/configSections&gt;\n&lt;razor disableAutoIncludeModelNamespace=\"false\"&gt;\n  &lt;assemblies&gt;\n    &lt;add assembly=\"System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n    &lt;add assembly=\"Nancy\" /&gt;\n    &lt;add assembly=\"uMentor\" /&gt;\n  &lt;/assemblies&gt;\n  &lt;namespaces&gt;\n    &lt;add namespace=\"Nancy\" /&gt;\n    &lt;add namespace=\"uMentor\" /&gt;\n    &lt;add namespace=\"uMentor.Domain\" /&gt;\n    &lt;add namespace=\"uMentor.Extensions\" /&gt;\n  &lt;/namespaces&gt;\n&lt;/razor&gt;\n</code></pre>\n\n<p>Stripping everything back, I can build the simplest 'hello world' view -> layout with nothing in it, no code. The unit test passes (the response body has the correct html in it). I then put in a redundant @using statement at the top of the view or the layout and the test fails (the response body contains the error message above).</p>\n\n<p><strong>Master Layout with @using only - Fails</strong></p>\n\n<pre><code>@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase&lt;dynamic&gt;\n@using uMentor.Extensions\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n        &lt;title&gt;Test&lt;/title&gt;   \n    &lt;/head&gt;\n    &lt;body&gt;\n        @RenderBody()        \n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Therefore, the evidence suggests that placing a @using statement into a razor view or layout causes a razor compilation error that silently fails, returning the error message in the response body. Only if your test happens to check the body content will you find out there has been a problem.</p>\n\n<p>Thank you for any help.</p>\n"},{"tags":["unit-testing","phpunit","kohana","cli","kohana-3.2"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":169,"score":2,"question_id":11285709,"title":"some problems with kohana unittest (cli and web access)","body":"<p>I've configured kohana (3.2) unittest module as described <a href=\"http://blog.lysender.com/2010/08/kohana-unit-testing-finally/\" rel=\"nofollow\">here</a>.\nSo I have:</p>\n\n<pre><code>APPPATH/tests/\n    phpunit.xml\n    sampletest.php\n</code></pre>\n\n<p>And last lines index.php file:</p>\n\n<pre><code>require APPPATH.'bootstrap'.EXT;\nif ( ! defined('SUPPRESS_REQUEST'))\n    Request::factory()-&gt;execute()-&gt;send_headers();\n</code></pre>\n\n<p>So the first problem is that in CLI next error appears:</p>\n\n<pre><code>ErrorException [ 8 ]: Undefined index: SERVER_NAME ~ SYSPATH/classes/kohana/url.php [ 79 ]\n</code></pre>\n\n<p>This happens because of E_STRICT enabled. So when I turn off E_STRICT nothing happens. I mean there's no output for phpunit in CLI, just empty line.</p>\n\n<p>And the second problem is that web access doesn't work at all (http://localhost/unittest). 404 error occurs. Maybe I should create some Route or anything?</p>\n\n<hr>\n\n<pre><code>Mac OS 10.7.4\nApache 1.3.41\nPHPUnit 3.6.11\nKohana 3.2.0\n</code></pre>\n"},{"tags":["c#",".net","unit-testing",".net-2.0","mstest"],"answer_count":2,"favorite_count":1,"up_vote_count":15,"down_vote_count":0,"view_count":391,"score":15,"question_id":12145510,"title":"How to fail a test that is stuck in an infinite loop?","body":"<p>Basically have some code that produces an infinite loop.  Now I need to write a test that will fail after about 200ms.  200ms will indicate that the code is in the infinite loop.</p>\n\n<p>For example:</p>\n\n<pre><code>public void CodeUnderTest()\n{\n   while(true)\n   {\n\n   }\n} \n</code></pre>\n"},{"tags":["java","unit-testing","junit","assert","hamcrest"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":3215,"score":6,"question_id":1960971,"title":"Hamcrest equal collections","body":"<p>Is there a matcher in Hamcrest to compare collections for equality?\nThere is <em>contains</em> and <em>containsInAnyOrder</em> but I need <em>equals</em> not bound to concrete collection type.\nE.g. I cannot compare Arrays.asList and Map.values with Hamcrest <em>equals</em>.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["security","unit-testing","cakephp","phpunit"],"answer_count":1,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":103,"score":6,"question_id":12117598,"title":"SecurityComponent black-holing my controller test case","body":"<p>Here's my <strong>UsersController</strong> test case:</p>\n\n<pre><code>&lt;?php\nApp::uses('UsersController', 'Controller');\n\nclass TestUsersController extends UsersController {\n\n    public $autoRender = false;\n\n    public function redirect($url, $status = null, $exit = true) {\n        $this-&gt;redirectUrl = $url;\n    }\n\n    public function render($action = null, $layout = null, $file = null) {\n        $this-&gt;renderedAction = $action;\n    }\n\n    public function _stop($status = 0) {\n        $this-&gt;stopped = $status;\n    }\n}\n\nclass UsersControllerTestCase extends ControllerTestCase {\n\n    public $fixtures = array('app.user');\n\n    public function setUp() {\n        parent::setUp();\n        $this-&gt;Users = new TestUsersController();\n        $this-&gt;Users-&gt;constructClasses();\n    }\n\n    public function tearDown() {\n        unset($this-&gt;Users);\n\n        parent::tearDown();\n    }\n\n    public function testAdminSearchStudents() {\n        $data = array('User' =&gt; array('search' =&gt; 'Ipsum'));\n        $result = $this-&gt;testAction('/admin', array('return' =&gt; 'vars', 'method' =&gt; 'post', 'data' =&gt; $data));\n        $this-&gt;assertCount(1, $result['users']);\n    }\n\n}\n</code></pre>\n\n<p>There's nothing special about my UsersController, but it uses the SecurityComponent (inherited from AppController).</p>\n\n<p>And when I run the tests, i get the infamous:</p>\n\n<blockquote>\n  <p>The request has been black-holed Test case:\n  UsersControllerTestCase(testAdminSearchStudents)</p>\n</blockquote>\n\n<p>I think it's because i'm forging a POST request without the CSRF token and referal?</p>\n\n<p>What should I do to make this work <strong>without removing the Security component</strong> from my Controller?</p>\n\n<p>I'm not sure if this will help, but here's the important part of the stack trace:</p>\n\n<pre><code>/var/www/source/cakephp/lib/Cake/Controller/Component/SecurityComponent.php : 230\nSecurityComponent::startup\n/var/www/source/cakephp/lib/Cake/Utility/ObjectCollection.php : 130\nObjectCollection::trigger\n/var/www/source/cakephp/lib/Cake/Event/CakeEventManager.php : 246\n/var/www/source/cakephp/lib/Cake/Controller/Controller.php : 671\n/var/www/source/cakephp/lib/Cake/Routing/Dispatcher.php : 183\n/var/www/source/cakephp/lib/Cake/Routing/Dispatcher.php : 161\n/var/www/source/cakephp/lib/Cake/TestSuite/ControllerTestCase.php : 271\nControllerTestCase::_testAction\n/var/www/source/cakephp/lib/Cake/TestSuite/ControllerTestCase.php : 189\n</code></pre>\n\n<p>Regards</p>\n"},{"tags":["java","unit-testing","junit","hsqldb"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":4473,"score":3,"question_id":3018066,"title":"starting and stopping hsqldb from unit tests","body":"<p>I'm trying to create integration tests using hsqldb in an in memory mode. At the moment, I have to start the hsqldb server from the command line before running the unit tests. I would like to be able to control the hsqldb server from my integration tests. I can't seem to get this to all work out though from code.</p>\n\n<p>Update:</p>\n\n<p>This appears to work along with having a hibernate.cfg.xml file in the classpath:</p>\n\n<pre><code>org.hsqldb.Server.main(new String[]{});\n</code></pre>\n\n<p>and in my hibernate.cfg.xml file:</p>\n\n<pre><code>&lt;property name=\"connection.driver_class\"&gt;org.hsqldb.jdbcDriver&lt;/property&gt;\n    &lt;property name=\"connection.url\"&gt;jdbc:hsqldb:mem:ww&lt;/property&gt;\n    &lt;property name=\"connection.username\"&gt;sa&lt;/property&gt;\n    &lt;property name=\"connection.password\"&gt;&lt;/property&gt;\n    &lt;property name=\"connection.pool_size\"&gt;1&lt;/property&gt;\n    &lt;property name=\"dialect\"&gt;org.hibernate.dialect.HSQLDialect&lt;/property&gt;\n    &lt;property name=\"current_session_context_class\"&gt;thread&lt;/property&gt;\n    &lt;property name=\"cache.provider_class\"&gt;org.hibernate.cache.NoCacheProvider&lt;/property&gt;\n    &lt;property name=\"hbm2ddl.auto\"&gt;update&lt;/property&gt;\n</code></pre>\n\n<p><strong>Update</strong> \nIt appears that this is only a problem when running the unit tests from within Eclipse using jUnit and the built in test runner. If I run </p>\n\n<pre><code> mvn test\n</code></pre>\n\n<p>they are executed correctly and there is no exception. Am I missing something as far as a dependency goes? I have generated the eclipse project using</p>\n\n<pre><code>mvn eclipse:eclipse\n</code></pre>\n\n<p>and my pom is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n</code></pre>\n\n<p>http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n    xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n    4.0.0</p>\n\n<pre><code>&lt;groupId&gt;com.myproject&lt;/groupId&gt;\n&lt;artifactId&gt;myproject&lt;/artifactId&gt;\n&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n\n&lt;name&gt;myproject&lt;/name&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;jstl&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;1.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;taglibs&lt;/groupId&gt;\n        &lt;artifactId&gt;standard&lt;/artifactId&gt;\n        &lt;version&gt;1.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;3.3.2.GA&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc14&lt;/artifactId&gt;\n        &lt;version&gt;10.1.0.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;1.6.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;version&gt;1.6.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n        &lt;version&gt;1.2.14&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javassist&lt;/groupId&gt;\n        &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n        &lt;version&gt;3.8.0.GA&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-annotations&lt;/artifactId&gt;\n        &lt;version&gt;3.4.0.GA&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Test Dependencies --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.8.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.easymock&lt;/groupId&gt;\n        &lt;artifactId&gt;easymock&lt;/artifactId&gt;\n        &lt;version&gt;3.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;hsqldb&lt;/groupId&gt;\n        &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n        &lt;version&gt;1.8.0.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;\n        &lt;artifactId&gt;jetty-servlet-tester&lt;/artifactId&gt;\n        &lt;version&gt;6.1.24&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;!-- Provided --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n        &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;6.0.26&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n        &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n        &lt;version&gt;6.0.26&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;finalName&gt;ww_main&lt;/finalName&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.6&lt;/source&gt;\n                &lt;target&gt;1.6&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>Update</strong> \nOk, well not sure what exactly was going wrong here, but I seemed to have fixed it. I deleted all the files that HSQLDB created, as well as all of the created files in my Maven target folder, did a clean, recreated my eclipse .project using maven and refreshed the project in eclipse. I think I may have had something left over from a previous configuration that was throwing it off.</p>\n\n<p>Thanks for everyone's help!</p>\n"},{"tags":["objective-c","xcode","unit-testing","testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":149,"score":0,"question_id":12142551,"title":"Xcode 4.4 unit test","body":"<p>First time trying to add unit test to my Xcode project. I added a test (LogicTests.h, LogicTests.m), linked it to a project in Target Dependencies. After that I created sample-class FDUnitTestClass and I want to test it with adding a simple math operation in it with logging result to Debug console. But I don't understand right way to do this. Do I need to define a method in .m of FDUnitTestClass, and if so how I can invoke it to see the log in console?</p>\n"}]}
{"total":15323,"page":18,"pagesize":100,"questions":[{"tags":["c#","visual-studio","unit-testing","automated-tests"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":241,"score":0,"question_id":825614,"title":"OrderedTest- Not keeping values from previous Test. - visualstudio208 - Unit Testing","body":"<p>I am trying to Unit Test the application using VSTS 2008 unit Testing.\nMy Problem is:\nI want to invoke two test case in an order.\nI am using the ordered Test case feature of VSTS 2008 for this.\nProblem i facing is I increment the value of one variable(X) in TestA and on the basis of that value i am chekcing something in TestB.\nBut when the control comes into TestB, I get the initial value of the X but not that which was incremented in TestA.\nI think for every test vsts create a new instance of the test class in memory.\nPlease suggest a solution to this except use of STATIC variables.</p>\n\n<p>Code for the same is as below</p>\n\n<pre><code>   [TestMethod()]\n   public void ff()\n    {\n        i = 11;\n    }\n\n    [TestMethod()]\n    public void gg()\n    {\n        if (i == 4)\n        {\n\n            System.Diagnostics.Debug.WriteLine(\"it is 4\");\n        }\n\n        else\n        {\n            System.Diagnostics.Debug.WriteLine(\"it is 7\");\n        }\n    }\n</code></pre>\n\n<p>Thanks in Advance</p>\n"},{"tags":["unit-testing","testing","gwt","gwt-platform"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":303,"score":1,"question_id":8461185,"title":"How to test GWT/GWTP project?","body":"<p>I am currently building a web application using GWT, GWTP.</p>\n\n<p>And I have some questions about testings: </p>\n\n<ul>\n<li>Is there a Lint-like tool for GWTP or GWT? </li>\n<li>How to test presenters? (<a href=\"http://code.google.com/p/gwt-platform/wiki/UnitTesting\" rel=\"nofollow\">GWTP with Mockito</a>)</li>\n<li>How to test views?</li>\n</ul>\n\n<p>Thanks.</p>\n"},{"tags":["spring","unit-testing","jndi"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":165,"score":3,"question_id":10444617,"title":"How to create JNDI for Unittests with Spring from XML Configuration?","body":"<p>Is there a simple way to configure a JNDI Environment for Unittests from a Spring XML File and export some stuff (e.g. Datasources)? There is <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/mock/jndi/SimpleNamingContextBuilder.html\" rel=\"nofollow\">SimpleNamingContextBuilder</a> for that, but this would require code to set up the JNDI Environment, and I would like to be able to just include an XML file into the @ContextConfiguration .</p>\n"},{"tags":["c++","unit-testing","destructor","cppunit"],"answer_count":7,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":1748,"score":7,"question_id":311949,"title":"Unit testing destructors?","body":"<p>Is there any good way to unit test destructors?  Like say I have a class like this (contrived) example:</p>\n\n<pre><code>class X\n{\nprivate:\n    int *x;\n\npublic:\n    X()\n    {\n         x = new int;\n    }\n\n    ~X()\n    {\n         delete x;\n    }\n\n    int *getX() {return x;}\n    const int *getX() const {return x;}\n};\n</code></pre>\n\n<p>Is there any good way to unit test this to make sure x gets deleted without cluttering up my hpp file with #ifdef TESTs or breaking encapsulation?  The main problem that I'm seeing is that it's difficult to tell if x really got deleted, especially because the object is out of scope at the time the destructor is called.</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":12117254,"title":"Organizing PHPUnit Tests in Namespaces","body":"<p>I see two options for organizing PHPUnit unit tests into a namespace hierarchy. What are the advantages/disadvantages to these two approaches? Are there any obvious flaws I haven't considered that would make one the obvious better choice?</p>\n\n<p>Consider a sample class like <code>\\SomeFramework\\Utilities\\AwesomeClass</code>:</p>\n\n<ul>\n<li><p><strong>Approach 1:</strong> Place each TestCase class into the same namespace as the covered class.</p>\n\n<pre><code>\\SomeFramework\\Utilities\\AwesomeClassTest\n</code></pre>\n\n<ul>\n<li><strong>Advantages</strong>\n<ul>\n<li>Consistent with the traditional approach to writing PHPUnit tests.</li>\n</ul></li>\n<li><strong>Disadvantages</strong>\n<ul>\n<li>Less flexibility.</li>\n<li>Seems to break the principle behind using namespaces - unrelated tests are grouped into the same namespace.\n<br />\n<br /></li>\n</ul></li>\n</ul></li>\n<li><p><strong>Approach 2:</strong> Place each TestCase in a namespace named after the covered class.</p>\n\n<pre><code>\\SomeFramework\\Utilities\\AwesomeClass\\Test\n</code></pre>\n\n<ul>\n<li><strong>Advantages</strong>\n<ul>\n<li>Provides a very easy/obvious way to group multiple related TestCase classes together, say for different test suites.</li>\n</ul></li>\n<li><strong>Disadvantages</strong>\n<ul>\n<li>Could result in a deeper, more complex hierarchy.</li>\n</ul></li>\n</ul></li>\n</ul>\n"},{"tags":["asp.net-mvc-3","unit-testing","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12092616,"title":"MVC .NET - Passing a user model to a razor view","body":"<p>I am trying to unit test razor views. In particular, I am trying to write for an Admin button - that appears on the main toolbar iff the user logged in is an Admin. </p>\n\n<p>Currently we do not have any tests, and the way it works is by setting up a static object called CurrentUser.</p>\n\n<p>Razor:</p>\n\n<pre><code>@if CurrentUser.IsAdmin()\n{\n     &lt;button&gt;admin&lt;/button&gt;\n}\n</code></pre>\n\n<p>However, since we are invoking CurrentUser - a static object set elsewhere in the project, I am not sure if we can not unit test this razor view independently. I would think we have to make a User object, have an instance of the user logged in, and inject it into the razor view. </p>\n\n<p>eg. </p>\n\n<pre><code>Controller\n{ \n    ActionResult Index(){\n        var currentUser = //somehow get current user\n        return View(currentUser);\n}\n</code></pre>\n\n<p>But what if the razor view I am test is a _Layout page? Would I have to inject the current user whenever I am rendering a page?</p>\n\n<p>Is there a way I can inject current user to the parent of View? Maybe I have to override the View method? Any ideas?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","unit-testing","coding-style"],"answer_count":2,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":81,"score":7,"question_id":12139167,"title":"A long definition of an object inside a Python unit test","body":"<p>I'm unit testing my application. What most of the tests do is calling a function with specific arguments and asserting the equality of the return value with an expected value.</p>\n\n<p>In some tests the expected return value is a relatively big object. One of them, for example, is a dictionary which maps 5 strings to lists of tuples. It takes 40-50 repetitive lines of code to define that object, but that object is an expected value of one of the functions I'm testing. I don't want to have a 40-50 lines of code defining an expected return value inside a test function because most of my test functions consist of 3-6 lines of code. I'm looking for a best practice for such situations. What is the right way of putting lengthy definitions inside a test?</p>\n\n<p>Here are the ideas I was thinking of to address the issue, ranked from the best to the worst as I see it:</p>\n\n<ul>\n<li><p><strong>Testing samples of the object:</strong> Making a few equality assertions based on a subset of the keys. This will sacrifice the thoroughness of the test for the sake of code elegance.</p></li>\n<li><p><strong>Defining the object in a separate module:</strong> Writing the lengthy 40-50 lines of code in a separate .py file, importing the module in the test and then make the equality assertion. This will make the test short and concise but I don't like having a separate file as a supplement to a test; the object definition is part of the test after all.</p></li>\n<li><p><strong>Defining the object inside the test function:</strong> This is the trivial solution which I wish to avoid. My tests are pretty simple and straightforward and the lengthy definition of that object doesn't fit.</p></li>\n</ul>\n\n<p>Maybe I'm too obsessed with clean code, but I like none of the above solutions. Is there another common practice I haven't thought of?</p>\n"},{"tags":["android","unit-testing","junit","mocking","stub"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12102720,"title":"Android unit testing with Junit: testing network/bluetooth resources","body":"<p>I am slowly becoming obsessed with unit testing. I am trying to develop as much software as I can using test-driven development. I am using JUnit to unit test my android applications.</p>\n\n<p>I have been working on an app that uses bluetooth and am having a hard time unit testing it. I have an Activity that uses BluetoothAdapter to obtain a list of paired and discovered devices.  Although it works, I would like to know how to unit test it.</p>\n\n<p>To get the list of paired devices, I call getBondedDevices() on the instance of BluetoothAdapter. The problem is I don't know how to stub or mock this method (or any other bluetoothAdapter method that my Activity calls) so I can't test my Activity against different lists of paired devices. </p>\n\n<p>I thought about using Mockito or trying to subclass BluetoothAdapter to somehow stub out the methods I'm interested in, but it's a final class so I can't do either. </p>\n\n<p>Any ideas on how I could test programs that use BluetoothAdapter or other resources that are (as far as I know) difficult or impossible to stub or mock? As another example, how would you test a program that uses sockets?</p>\n\n<p>thanks in advance for any help</p>\n\n<p>aleph_null</p>\n"},{"tags":["python","unit-testing","code-generation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12138719,"title":"Transform code (testcases) to multiple languages","body":"<p>I have a database library (in C++) with multiple language interfaces (e.g. C, Java, Python, PHP, Javascript, and more to come..). I wish to make unittests for the language-bindings, and since the API I wish to test is almost the same, I would like to only write the API testcases once (in some abstract form or in one language e.g. Python) and then generate the actual testcase code for all the languages automatically.</p>\n\n<p>I'm considering to write the testcases in some simple \"macro\" form or in Python. The language constructs I need for this are relatively simple - so I acutally don't need all of Python.</p>\n\n<p>One solution could be to cross-compile (a subset of) Python code to all the languages. I can't find any tools that support that, so it appears to require too much work, but give me a lot of expresiveness in writing the testcases.</p>\n\n<p>Another solution is to use a templating tool (like Cheetah for Python), and define a generic set of \"macros\", which gets expanded depending on the target language to the target code.</p>\n\n<p>Does anyone have other ideas for solving this problem or suggestions for tools that could help solve this with either of the above solution?  </p>\n"},{"tags":["jquery","jquery-ui","unit-testing","mocking","qunit"],"answer_count":2,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":193,"score":6,"question_id":12074913,"title":"How do I unit test this JavaScript function, including mocking of Ajax call?","body":"<p>As seen in this <a href=\"http://jsfiddle.net/aknuds1/bCNcj\" rel=\"nofollow\">jsFiddle</a>, I have a function 'init' that configures a button so that when clicked it opens a progress dialog and issues an Ajax call. I want to unit test this JavaScript code (using <a href=\"http://qunitjs.com/\" rel=\"nofollow\">QUnit</a>), and check the following cases:</p>\n\n<ol>\n<li>Ajax call succeeds</li>\n<li>Ajax call fails</li>\n</ol>\n\n<p>I need to mock out at least the Ajax call and the call to <code>window.open</code>, and other calls I'm sure, depending on unit test implementation.</p>\n\n<p>How can I write QUnit unit tests for my code that tests these two scenarios?</p>\n\n<p><strong>EDIT:</strong> The code that needs to be tested:</p>\n\n<pre><code>var statusmod = (function() {\n    var spinner = $(\"#spinner\");\n\n    var init = function(id) {\n        var progressDialog = $(\"#progressdialog-content\").dialog({\n            autoOpen: false,\n            title: \"Launching Status Page\"\n        });\n        var errorDialog = $(\"#errordialog-content\").dialog({\n            autoOpen: false,\n            modal: true,\n            buttons: {\n                \"OK\": function() {\n                    $(this).dialog(\"close\");\n                }\n            }\n        });\n\n        var btn = $(\"#button-status\");\n        btn.button().click(function() {\n            spinner.show();\n\n            progressDialog.dialog(\"open\");\n\n            var url = $.validator.format(\"/api/binid/?id={0}\", id);\n            // Call Web service to get binary ID\n            $.ajax({\n                url: url,\n                dataType: \"json\"\n            }).done(function(data) {\n                window.open($.validator.format(\"http://status/?Page=Status&amp;Id={0}\", data.Id), target = \"_newtab\");\n            }).fail(function(jqXHR, msg, errorThrown) {\n                errorDialog.dialog(\"open\");\n            }).always(function() {\n                progressDialog.dialog(\"close\");\n            });\n\n            return false;\n        });\n    };\n\n    return {\n        init: init,\n        _spinner: spinner\n    };\n}());\n</code></pre>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":245,"score":0,"question_id":12136095,"title":"unit testing custom actionresults in MVC4 not invoking executeresult","body":"<p>It appears that something has changed with the release version of MVC4 that is causing the ExecuteResult method in a custom actionresult to not be invoked when the action result is tested from a unit test.</p>\n\n<p>Here is a very contrived example that works in MVC3 and earlier versions of MVC4. Execute result is never \"executed\" when ran from a unit test. What am i missing here? Anyone else see this behavior?</p>\n\n<h3>Action result</h3>\n\n<pre><code>public class SomeActionResult : ActionResult\n{\n\n    public override void ExecuteResult(ControllerContext context)\n    {\n        if (context == null)\n        {\n            throw new ArgumentNullException(\"null context\");\n        }\n\n        var view = new ViewResult {ViewName = \"index\"};\n        view.ExecuteResult(context);\n\n    }\n\n}\n</code></pre>\n\n<h3>Controller Action</h3>\n\n<pre><code>    [HttpPost]\n    public ActionResult Index(string something)\n    {\n        return new SomeActionResult();\n    }\n</code></pre>\n\n<h3>Unit Test (Using MVCContrib)</h3>\n\n<pre><code>    [Test]\n    public void ShouldWork_but_doesnt_in_mvc4()\n    {\n\n        var controller = new HomeController();\n\n        var result = controller.Index(\"test\");\n\n        result.AssertViewRendered();\n\n    }\n</code></pre>\n"},{"tags":["c#","visual-studio-2010","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12135917,"title":"Prevent VS C# Unit Testing breaking on exceptions","body":"<p>I want to write a unit test for detecting a thrown exception. Using <a href=\"http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.expectedexceptionattribute.aspx\" rel=\"nofollow\"><code>ExpectedExceptionAttribute</code></a>, I run the test from inside MSVS and when the TestMethod hits the exception, the debugger breaks to the exception but the TestMethod correctly skips over and reports Passed.</p>\n\n<p>Is there a flag to tell VS not to break during unit testing?</p>\n"},{"tags":["unit-testing","mocking","windows-8"],"answer_count":2,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":176,"score":7,"question_id":12083462,"title":"What is the mocking framework of choice in Unit Test Library for Windows Store Applications?","body":"<p>When I write unit tests I like to use Rhino Mocks.  </p>\n\n<p>So when I started my first Windows Store application I naturally started with my unit tests first.  When I tried to add <a href=\"http://ayende.com/blog/tags/rhino-mocks\">RhinoMocks</a> via <a href=\"https://nuget.org/\">NuGet</a> I recieved the following error</p>\n\n<blockquote>\n  <p>Could not install package 'RhinoMocks 3.6.1'. You are trying to\n  install this package into a project that targets\n  '.NETCore,Version=v4.5', but the package does not contain any assembly\n  references that are compatible with that framework. For more\n  information, contact the package author.</p>\n</blockquote>\n\n<p>I had the same issue with Moq.  </p>\n\n<p>Is there a mocking framework for .NETCor,Version=v4.5?</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12134489,"title":"unit test for a file import export module","body":"<p>I am trying to write unit tests for a file import export module.</p>\n\n<p>One of my method checks that a filename passed exists.</p>\n\n<p>How would this be mocked and a test written to check if the file exists or not?</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":10362298,"title":"Want to take unit test in rails of 2.2.2, but failed. Could anyone tell me the reason and help me to get the solution?","body":"<p>I was following the Agile Web Development with Rails,Third Edition Chapter 14.</p>\n\n<p>I used the command line in windows and input the command of this:\n<strong>D:\\InstantRails-2.0-win\\rails_apps\\GraduateDesign\\depot>ruby  -I test test/unit/\nproduct_test.rb</strong></p>\n\n<p><strong>The error message shows below:</strong>  </p>\n\n<pre><code>D:/InstantRails-2.0-win/rails_apps/GraduateDesign/depot/app/controllers/users_co\nntroller.rb:48: warning: don't put space before argument parentheses\nD:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.2.2/lib/acti\nve_support/dependencies.rb:445:in `load_missing_constant': uninitialized constan\nt RUBY_COPYRIGHT (NameError)\n        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2\n.2.2/lib/active_support/dependencies.rb:77:in `const_missing'\n        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2\n.2.2/lib/active_support/dependencies.rb:89:in `const_missing'\n        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rbx-require-rel\native-0.0.9/lib/require_relative.rb:51\n        from D:/InstantRails-2.0-win/ruby/lib/ruby/site_ruby/1.8/rubygems/custom\n_require.rb:36:in `gem_original_require'\n        from D:/InstantRails-2.0-win/ruby/lib/ruby/site_ruby/1.8/rubygems/custom\n_require.rb:36:in `require'\n        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2\n.2.2/lib/active_support/dependencies.rb:155:in `require'\n        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/linecache-0.45-\nx86-mswin32/lib/linecache.rb:66\n        from D:/InstantRails-2.0-win/ruby/lib/ruby/site_ruby/1.8/rubygems/custom\n_require.rb:31:in `gem_original_require'\n         ... 16 levels...\n        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2\n.2.2/lib/active_support/dependencies.rb:155:in `require'\n        from D:/InstantRails-2.0-win/rails_apps/GraduateDesign/depot/test/test_h\nelper.rb:3\n        from test/unit/product_test.rb:1:in `require'\n        from test/unit/product_test.rb:1\n</code></pre>\n"},{"tags":["visual-studio","unit-testing","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12130127,"title":"Why must a ClassInitialize method be static?","body":"<p>I'm curious as to why the fixture setup must be static? It seems more intuitive to me to have instance variables per fixture that share the lifetime of the fixture. Yes, these can be initialized in the constructor , but then I assume they our out of reach of the control of the test runner.</p>\n\n<p>What design requirements or philosophies determined that the setup method should be static?</p>\n"},{"tags":["unit-testing","complexity","cyclomatic-complexity"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":256,"score":3,"question_id":12091959,"title":"Measuring Cyclomatic Complexity of Data Mapping Functions & Closures","body":"<p>According to the basic rules of cyclomatic complexity, the below code should have a complexity of 2 (only one branch point - the for loop).</p>\n\n<pre><code>function SumArray(array_to_sum) {\n    var sum = 0;\n    for (var i = 0; i &lt; array_to_sum.length; i++) {\n        sum += array_to_sum[i];\n    }\n    return sum;\n}\n</code></pre>\n\n<p>Many modern frameworks and so on provide data mapping functions, such as <code>jQuery.each()</code> or most methods in the <code>Underscore.js</code> framework.  Consider the following code:</p>\n\n<pre><code>function SumArray(array_to_sum) {\n    var sum = 0;\n    jQuery.each(array_to_sum, function(index, value) {\n        sum += value;\n    });\n    return sum;\n}\n</code></pre>\n\n<p>By typical rules of cyclomatic complexity, the second example has a CC measure of 1.  The work is exactly the same, the human complexity of the function has not changed at all.  All I did was exchange one means of looping data for a different means of looping data.</p>\n\n<p>Likewise consider this contrived example where we wrap the internals of our original function in a single self-calling closure, producing a cyclomatic complexity of 1 for the outer method while not actually changing how the method works:</p>\n\n<pre><code>function SumArray(array_to_sum) {\n    return (function() {\n        var sum = 0;\n        for (var i = 0; i &lt; array_to_sum.length; i++) {\n            sum += array_to_sum[i];\n        }\n        return sum;\n    })();\n}\n</code></pre>\n\n<p><strong>Should true measures of cyclomatic complexity include considerations for data mapping/reduction methods such as <code>jQuery.each()</code> particularly when using an anonymous local closure?</strong></p>\n\n<p>Perhaps closures should export their complexity to the closing parent.  Also perhaps methods in general should be able to define an export complexity that is added to the complexity of any function that calls it - for example perhaps <code>jQuery.each()</code> should have an export complexity of 1 so that using this in place of a normal loop counts complexity the same.</p>\n"},{"tags":["visual-studio","unit-testing","resharper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12102134,"title":"How can I share ReSharper Unit Test Sessions across a team?","body":"<p>I have set up two permanent test sessions in ReSharper 7 in Visual Studio 2010/2012 - \"Passing\" and \"Failing\". I run the Passing session daily and can quickly identify any regression failure since the last time in which case I move those tests into Failing, where I can work on it when I get time. It works and it's great.</p>\n\n<p>The problem is that I can't find any way to export those sessions as a \"Solution Team-Shared\" option, as suggested in the <a href=\"http://www.jetbrains.com/resharper/webhelp/Configuring_ReSharper__Sharing_Configuration_Options.html\" rel=\"nofollow\">ReSharper docs</a> for settings you might want to share across a team. Obviously, it'd be beneficial to be able to have others in the time avail of the same test session structure. But when I change my sessions, it only ever seems to update the 'PatientPortal.sln.DotSettings.user' file, not the 'PatientPortal.sln.DotSettings' one.</p>\n\n<p>In RESHARPER -> Options -> Unit Testing, I have checked 'Save and restore Unit Test Sessions' and have selected Save-To - 'Solution [name] Team-shared'</p>\n\n<p>Because of the difficulty I'm experiencing, I suspect that ReSharper unit test sessions are not designed to be something you check-in and share, but I'd find it productive to do so in this case, so does anyone know how to do this?</p>\n"},{"tags":["unit-testing","language-agnostic"],"answer_count":10,"favorite_count":6,"up_vote_count":27,"down_vote_count":0,"view_count":2320,"score":27,"question_id":1021007,"title":"Should it be \"Arrange-Assert-Act-Assert\"?","body":"<p>Regarding the classic test pattern of <a href=\"http://c2.com/cgi/wiki?ArrangeActAssert\" rel=\"nofollow\">Arrange-Act-Assert</a>, I frequently find myself adding a counter-assertion that precedes Act.  This way I know that the passing assertion is really passing as the result of the action.  </p>\n\n<p>I think of it as analogous to the red in red-green-refactor, where only if I've seen the red bar in the course of my testing do I know that the green bar means I've written code that makes a difference.  If I write a passing test, then <em>any</em> code will satisfy it; similarly, with respect to Arrange-Assert-Act-Assert, if my first assertion fails, I know that any Act would have passed the final Assert - so that it wasn't actually verifying anything about the Act.</p>\n\n<p>Do your tests follow this pattern?  Why or why not?</p>\n\n<p><strong>Update</strong> Clarification: the initial assertion is essentially the opposite of the final assertion.  It's not an assertion that Arrange worked; it's an assertion that Act hasn't yet worked.</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":523,"score":1,"question_id":5520484,"title":"test_helper don't load when I make a test","body":"<p>I need make a test of a model, but when I do this:</p>\n\n<pre><code>ruby test/unit/user_test.rb \n</code></pre>\n\n<p>I have also tried with other methods:</p>\n\n<pre><code>ruby -I test test/unit/user_test.rb\nrake test:units TEST=test/unit/user_test.rb\n</code></pre>\n\n<p>But anyone make the test and said:</p>\n\n<blockquote>\n  <p>test/unit/user_test.rb:1:in `require': no such file to load -- test_helper (LoadError)</p>\n</blockquote>\n\n<p>Or like.</p>\n\n<p>This is part of the code (only the beginning):</p>\n\n<pre><code>require 'test_helper'\n\nclass UserTest &lt; Test::Unit::TestCase\n  self.use_instantiated_fixtures  = true\n  fixtures :users\n\n  def test_auth \n    #check that we can login we a valid user \n    assert_equal  @bob, User.authenticate(\"bob\", \"test\")    \n    #wrong username\n    assert_nil    User.authenticate(\"nonbob\", \"test\")\n    #wrong password\n    assert_nil    User.authenticate(\"bob\", \"wrongpass\")\n    #wrong login and pass\n    assert_nil    User.authenticate(\"nonbob\", \"wrongpass\")\n  end\n</code></pre>\n\n<p>Yours sincerely</p>\n"},{"tags":["django","unit-testing","url","testcase"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":411,"score":4,"question_id":4892210,"title":"Django UrlResolver, adding urls at runtime for testing","body":"<p>I'm looking to do some tests and I'm not really familiar with the <code>URLResolver</code> quite yet but I'd like to solve this issue quickly.</p>\n\n<p>In a <code>TestCase</code>, I'd like to add a URL to the resolver so that I can then use <code>Client.get('/url/')</code> and keep it separate from <code>urls.py</code>.</p>\n"},{"tags":["unit-testing","doctrine2","symfony2"],"answer_count":2,"favorite_count":5,"up_vote_count":22,"down_vote_count":0,"view_count":1626,"score":22,"question_id":6626318,"title":"How to set up Doctrine2 fixtures when testing with PHPUnit?","body":"<p>I'm trying to get started with Symfony2 and have been trying to set up automated testing for the model layer of my application. The Symfony2 book talks about unit testing for controllers but I can't find many examples of model testing.</p>\n\n<p>I would like to have a clean data set to work with before each test runs and found these articles:</p>\n\n<ul>\n<li><a href=\"http://blog.sznapka.pl/fully-isolated-tests-in-symfony2/\" rel=\"nofollow\">http://blog.sznapka.pl/fully-isolated-tests-in-symfony2/</a></li>\n<li><a href=\"http://symfony.com/doc/current/cookbook/doctrine/doctrine_fixtures.html\" rel=\"nofollow\">http://symfony.com/doc/current/cookbook/doctrine/doctrine_fixtures.html</a></li>\n</ul>\n\n<p>Based on the sznapka.pl article I have a test actually running without errors, but although the test schema is created the fixtures don't load. I can't see why, or even a way to debug this.</p>\n\n<p>Background: I've previously worked with CakePHP where the loading of fixtures is largely handled automatically, maybe I have the wrong approach for Symfony/Doctrine?</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12107890,"title":"PHPUnit - Organizing Test Folder and autloading","body":"<p>I am new to unit testing so please bear with me if this is a dumb question.</p>\n\n<p>First of all should my test folder mimic my application folder?</p>\n\n<p>For example:</p>\n\n<pre><code>Application\n--Autoloader.php\n--Library\n----VendorA.php\n\nTests\n--Library\n----VendorATest.php\n</code></pre>\n\n<p>Secondly, I am finding myself writing large inlcude statements to get the relevant files included into my test classes.  Is there a better way to  do this?</p>\n\n<pre><code>&lt;?php\n\nrequire_once 'PHPUnit/Autoload.php';\nrequire_once(dirname(dirname(dirname(__DIR__))).'/Application/Library/VendorATest.php');\n\nclass Tests_Application_Library_VendorATest extends PHPUnit_Framework_TestCase\n{}\n</code></pre>\n"},{"tags":["unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12109253,"title":"Unit Testing Dates - if not week day","body":"<p>I have a small method which return true or false if a timestamp is a weekend day i.e. saturday or sunday.</p>\n\n<p>Now i am very new to unit testing and i am trying to write a unit test for this.</p>\n\n<p>In my test case, how would i proceed:</p>\n\n<p>Here is my inital thinking.</p>\n\n<pre><code>1. Pick any 1 week from the past and then...\n   1.1. Get a timestamp for all 5 week days (mon through fri) and pass each timestamp to the function being tested.  If they all return false then proceed...\n   1.2  Get the timestamp for both weekend days and pass each to function being tested.  If they both return true then we know the function is correct.\n</code></pre>\n\n<p>or </p>\n\n<pre><code>2  Simply pick 1 weekday from the past and 1 weekend day from the past and test with only those 2 dates\n</code></pre>\n\n<p>Am i correct in either of these approaches or is there a better way to test this?</p>\n"},{"tags":["unit-testing","grails","groovy","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":128,"score":0,"question_id":12078165,"title":"How to mock a java class inside a Grails unit test?","body":"<p>I have a java class, which I've added to my resources.groovy like this:</p>\n\n<pre><code>import persistentrep.ReasoningXMLLoader;\n// Place your Spring DSL code here\nbeans = {\nreasoningXMLLoader(ReasoningXMLLoader)\n}\n</code></pre>\n\n<p>I then use this class in my GrailsService:</p>\n\n<pre><code>class XMLService\n{\ndef reasoningXMLLoader\n\n    def someMethod()\n    {\n        reasoningXMLLoader.doSomething()\n    }\n}\n</code></pre>\n\n<p>Obviously, I want to write a unit test that mocks reasoningXMLLoader and injects it into the service. \nI tried using @Mock, MockFor and mockFor and I keep getting <em>org.codehaus.groovy.grails.exceptions.GrailsConfigurationException: Cannot add Domain class [class persistentrep.ReasoningXMLLoader]. It is not a Domain!</em> error :</p>\n\n<pre><code>org.codehaus.groovy.grails.exceptions.GrailsConfigurationException: Cannot add Domain class [class persistentrep.ReasoningXMLLoader]. It is not a Domain!\nat org.codehaus.groovy.grails.commons.DefaultGrailsApplication.addArtefact(DefaultGrailsApplication.java:916)\nat org.codehaus.groovy.grails.commons.DefaultGrailsApplication.addArtefact(DefaultGrailsApplication.java:615)\nat org.codehaus.groovy.grails.commons.GrailsApplication$addArtefact.call(Unknown Source)\nat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)\nat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)\nat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120)\nat grails.test.mixin.domain.DomainClassUnitTestMixin.mockDomain(DomainClassUnitTestMixin.groovy:131)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:601)\nat org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)\nat org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)\nat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)\nat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)\nat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145)\nat grails.test.mixin.domain.DomainClassUnitTestMixin.mockDomain(DomainClassUnitTestMixin.groovy:128)\nat com.vpundit.www.XMLServiceTests.mockDomain(XMLServiceTests.groovy)\nat com.vpundit.www.XMLServiceTests.setUp(XMLServiceTests.groovy)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:601)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)\nat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\nat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:300)\nat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n</code></pre>\n\n<p>Is there a way to mock this using the Grails built-in mocking framework, or do I need to use something like Mockito? </p>\n\n<p>What is the best way to inject the mock? Is there some Grails magic that can do it for me, or do I just use the exposed property - \n    service.reasoningXMLLoader = mock?</p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":200,"score":7,"question_id":11976914,"title":"How to fail a python unittest if the setUpClass throws exception","body":"<p>I am having little trouble using the python setUpClass.</p>\n\n<p>For example consider the following case</p>\n\n<pre><code>class MyTest(unittest.case.TestCase):\n\n    @classmethod\n    def setUpClass(cls):\n        print \"Test setup\"\n        try:\n            1/0\n        except:\n            raise\n\n    @classmethod\n    def tearDownClass(cls):\n        print \"Test teardown\"\n</code></pre>\n\n<p>A couple of questions</p>\n\n<ol>\n<li><p>Is the above code the right way to handle test setUpClass exceptions (by raising it so that the python unittest can take care of it), there are fail(), skip() methods, but those can only be used by test instances and not the test classes.</p></li>\n<li><p>When there is a setUpClass exception, how can we ensure that tearDownClass runs (unittest doesn't run it, should we manualy call it).</p></li>\n</ol>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","rspec","capybara"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12121850,"title":"How to count a loop using Rspec Capybara & Factory Girl in Ruby on rails","body":"<p>This question is about a <strong>test</strong> I make to verify that all 50 micropost in the user page are displayed</p>\n\n<p>I have this rspec code:</p>\n\n<pre><code>          before(:all) { 50.times {FactoryGirl.create(:micropost, \n                                   user:user, content: \"Lorem Ipsum\") } }\n</code></pre>\n\n<p>and I want to make each content be more dynamic such as:</p>\n\n<pre><code>\"Lorem Ispum 0\"\n\"Lorem Ipsum 1\"\n\"Lorem Ipsum 2\"\n...\n</code></pre>\n\n<p>I tried to write:</p>\n\n<pre><code>let(:count_helper) { 0 }\nbefore(:all) { 50.times {FactoryGirl.create(:micropost, \n                                       user:user, \n                                       content: \"Lorem Ipsum #{count_helper}\") \n                         count_helper += 1} }\n</code></pre>\n\n<p>and it fails here:</p>\n\n<pre><code>count_helper += 1 \n</code></pre>\n\n<p>How can I write it right?</p>\n"},{"tags":["c#","visual-studio","unit-testing","mstest","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":151,"score":0,"question_id":12115286,"title":"Custom Data Driven MSTest","body":"<p>I have XML spreadsheet files created from Excel that I need to use as the input for my data driven test. I can't use the <code>DataSource</code> attribute on my test method because of inconsistencies parsing the files with an Oledb provider. I was wondering if there is a way to have nested test results like the way the <code>DataSource</code> attribute does it?</p>\n\n<p>I'd prefer for MSTest to show the breakdown of each row that was iterated as opposed to me catching a failed assertion exception and keep a collection of the failures. I of course want the test to run against every row and not quit executing upon the first failed assertion.</p>\n\n<p>I'm not looking for answers that insist on loading the data via the DataSource attribute. Thanks</p>\n"},{"tags":["unit-testing","symfony2","phpunit","fosuserbundle"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":197,"score":2,"question_id":9182831,"title":"Symfony2 login FOS UserBundle in functional tests","body":"<p>How to login inside tests to be able to do user-specific actions?</p>\n"},{"tags":["ruby","unit-testing","ruby-koans"],"answer_count":11,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":1435,"score":8,"question_id":2082970,"title":"What's the best way to test this?","body":"<p>I'm going through the EdgeCase Ruby Koans.  In <a href=\"http://github.com/edgecase/ruby_koans/blob/9e799a71784e1112a048eb61b5a3acdf33418398/koans/about_dice_project.rb\" rel=\"nofollow\">about_dice_project.rb</a>, there's a test called \"test_dice_values_should_change_between_rolls\", which is straightforward:</p>\n\n<pre><code>  def test_dice_values_should_change_between_rolls\n    dice = DiceSet.new\n\n    dice.roll(5)\n    first_time = dice.values\n\n    dice.roll(5)\n    second_time = dice.values\n\n    assert_not_equal first_time, second_time,\n      \"Two rolls should not be equal\"\n  end\n</code></pre>\n\n<p>Except for this comment that appears there:</p>\n\n<pre><code># THINK ABOUT IT:\n#\n# If the rolls are random, then it is possible (although not\n# likely) that two consecutive rolls are equal.  What would be a\n# better way to test this.\n</code></pre>\n\n<p>Which (obviously) got me thinking: what is the best way to reliably test something random like that (specifically, and generally)?</p>\n"},{"tags":["c#","unit-testing","c#-4.0","moq","mvp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12075613,"title":"Unit testing methods in the Presenter, MVP","body":"<p>Im trying to test a method which composes a collection of controls. It calls two methods:</p>\n\n<ol>\n<li>Copies the original collection.</li>\n<li>Sorts the new collection.</li>\n</ol>\n\n<p>Ideally id like to be able to pass in a collection and test to see thats it sorts it correctly. Id also like to verify that method 1) is called twice, see below attempt based on the following:\n<a href=\"http://sqa.stackexchange.com/questions/1035/unit-testing-the-presenter-in-an-mvp-context-using-mock-objects\">Example using RhinoMock</a></p>\n\n<p>The following test is producing errors when i try to create an instance of MainPresenter. General jist of the errors are \"Can not convert from Moq.Mock to \"FrazerMann.CsvImporter.UserInterface.IMainForm. + a similar one for IFileDialog.</p>\n\n<pre><code>    [Test]\n    public void ComposeCollectionOfControls_CallSequence_4Calls()\n    {\n        var main = new Mock&lt;IMainForm&gt;();\n        var dialog = new Mock&lt;IFileDialog&gt;();\n        var temp = new Mock&lt;IMainPresenter&gt;();\n\n        temp.Setup(s =&gt; s.PopulateLists&lt;Control&gt;(It.IsAny&lt;TableLayoutPanel&gt;(), It.IsAny&lt;List&lt;Control&gt;&gt;()));\n\n        var testObject = new MainPresenter(main.Object, dialog.Object);\n        testObject.ComposeCollectionOfControls(It.IsAny&lt;object&gt;(), It.IsAny&lt;EventArgs&gt;());\n        temp.Verify(v =&gt; v.PopulateLists&lt;Control&gt;(It.IsAny&lt;TableLayoutPanel&gt;(), It.IsAny&lt;List&lt;Control&gt;&gt;()), Times.Once());          \n    }\n</code></pre>\n\n<p>I would like to test the ComposeCollectionOfControls to ensure PopulateList() is called twice.</p>\n\n<pre><code>public interface IMainPresenter\n{\n    void PopulateLists&lt;T&gt;(TableLayoutPanel userInputs, List&lt;T&gt; container) where T : Control;\n    int SortList&lt;T&gt;(T control1, T control2) where T : Control;\n}\n\npublic class MainPresenter:IMainPresenter\n{\n    UserInputEntity inputs;\n\n    IFileDialog _dialog;\n    IMainForm _view;\n\n    public MainPresenter(IMainForm view, IFileDialog dialog)\n    {\n        _view = view;\n        _dialog = dialog;\n        view.ComposeCollectionOfControls += ComposeCollectionOfControls;\n        view.SelectCsvFilePath += SelectCsvFilePath;\n        view.SelectErrorLogFilePath += SelectErrorLogFilePath;\n        view.DataVerification += DataVerification;\n    }\n\n    public void ComposeCollectionOfControls(object sender, EventArgs e)\n    {\n        PopulateLists&lt;TextBox&gt;(_view.ColumnNameCtrls, _view.SortedColumnNameCtrls);\n        _view.SortedColumnNameCtrls.Sort(SortList&lt;TextBox&gt;);\n        PopulateLists&lt;ComboBox&gt;(_view.ColumnDataTypeCtrls, _view.SortedColumnDataTypeCtrls);\n        _view.SortedColumnDataTypeCtrls.Sort(SortList&lt;ComboBox&gt;);\n    }\n}\n</code></pre>\n\n<p>Could someone please give me some pointers as to how this should be done?</p>\n"},{"tags":["java","unit-testing","mocking","mockito","partial-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":12116381,"title":"What is wrong with partial mocking in this case?","body":"<p>Let's say I have two methods, one of which is basically a wrapper for the other method with just a tiny bit of extra processing:</p>\n\n<pre><code>public class ItemRepositoryImpl implements ItemRepository {\n\n    ...\n\n    @Override\n    public void delete(UUID itemID) {\n\n        Item item = findOne(itemID);\n        delete(item);\n    }\n\n    @Override\n    public void delete(Item item) {\n\n        // Do a bunch of stuff that needs a lot of tests run on it, like\n        //    deleting from multiple data sources etc\n        ...\n    }\n}\n</code></pre>\n\n<p>What is wrong with writing a unit test for the delete(UUID) method that partially mocks ItemRepositoryImpl, and checks that delete(UUID) eventually calls delete(Item)?  If I did this, I would not have to write a bunch of duplicate tests for each delete method!</p>\n\n<p>In Mockito, I could implement such a test with a spy like this:</p>\n\n<pre><code>ItemRepository spyRepo = spy(repository);       // Create the spy\nwhen(spyRepo.findOne(itemID)).thenReturn(item); // Stub the findOne method\ndoNothing().when(spyRepo).delete(item);         // Stub the delete(Item) method\nspyRepo.delete(itemID);                         // Call the method under test\n\n// Verify that the delete(Item) method was called\nverify(spyRepo).delete(item);\n</code></pre>\n\n<p>However, the Mockito documentation strongly discourages the use of this type of partial mocking, basically stating that it should only be used on interim legacy code and 3rd party APIs.  What would be better solution?</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12098494,"title":"Tests failing because fixtures are not present","body":"<p>Django version 1.3.</p>\n\n<p>I am new to Django unit testing. I have written my first test but it fails because my login isn't working. I'm quite sure the reason for this is that the database doesn't contain my user account which is supposed to be provided by the <code>auth</code> fixture. </p>\n\n<p>The code I've written is:</p>\n\n<pre><code>from django.test import TestCase\nfrom django.test.client import Client\n\nclass OrderCreateTest(TestCase):\n    fixtures = ['auth']\n\n    def setUp(self):\n        self.client = Client()\n\n    def testSelectProduct(self):\n        self.assertTrue(self.client.login(user='chris', password='password'),\n            'Unexpected login failure.')\n\n        response = self.client.get('/order/new/')\n\n        print response\n\n        self.client.logout()\n\n    def tearDown(self):\n        pass\n\n    def runTest(self):\n        pass\n</code></pre>\n\n<p>The test failure I'm getting is:</p>\n\n<pre><code>Creating test database for alias 'default' ('test_proj')...\nCreating tables ...\n...\nRunning post-sync handlers for application admin\n...\nInstalling custom SQL ...\nInstalling indexes ...\nInstalling index for admin.LogEntry model\n...\nRunning post-sync handlers for application admin\n...\nLoading 'initial_data' fixtures...\nChecking '/usr/local/lib/python2.7/dist-packages/django/contrib/admin/fixtures' for fixtures...\nNo xml fixture 'initial_data' in '/usr/local/lib/python2.7/dist-packages/django/contrib/admin/fixtures'.\n...\nChecking absolute path for fixtures...\nNo xml fixture 'initial_data' in absolute path.\nNo xml fixture 'initial_data' in absolute path.\nNo xml fixture 'initial_data' in absolute path.\nNo xml fixture 'initial_data' in absolute path.\nNo json fixture 'initial_data' in absolute path.\nNo json fixture 'initial_data' in absolute path.\nNo json fixture 'initial_data' in absolute path.\nNo json fixture 'initial_data' in absolute path.\nNo yaml fixture 'initial_data' in absolute path.\nNo yaml fixture 'initial_data' in absolute path.\nNo yaml fixture 'initial_data' in absolute path.\nNo yaml fixture 'initial_data' in absolute path.\nNo xml fixture 'initial_data' in absolute path.\nNo xml fixture 'initial_data' in absolute path.\nNo xml fixture 'initial_data' in absolute path.\nNo xml fixture 'initial_data' in absolute path.\nNo json fixture 'initial_data' in absolute path.\nNo json fixture 'initial_data' in absolute path.\nNo json fixture 'initial_data' in absolute path.\nNo json fixture 'initial_data' in absolute path.\nNo yaml fixture 'initial_data' in absolute path.\nNo yaml fixture 'initial_data' in absolute path.\nNo yaml fixture 'initial_data' in absolute path.\nNo yaml fixture 'initial_data' in absolute path.\nNo fixtures found.\nDestroying test database for alias 'default' ('test_proj')...\ntestSelectProduct (orpheus.orders.tests.ordercreate.OrderCreateTest) ... FAIL\n\n======================================================================\nFAIL: testSelectProduct (orpheus.orders.tests.ordercreate.OrderCreateTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/path/to/ordercreate.py\", line 24, in testSelectProduct\n    'Unexpected login failure.')\nAssertionError: Unexpected login failure.\n\n----------------------------------------------------------------------\nRan 1 test in 2376.829s\n\nFAILED (failures=1)\nDestroying test database for alias 'default' ('test_proj')...\n</code></pre>\n\n<p>Snippet from my settings with the db:</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'project',\n        'USER': 'project',\n        'PASSWORD': 'projectdb',\n        'TEST_NAME': 'test_project' } }\n</code></pre>\n\n<p>I've stepped through the test code and I can see that it's finding my fixture <code>auth</code> and it's saving the data it finds... somewhere. I've suspended the test to drop into mysql and queried the relevant tables but they all stay empty (the test code has been skipping the sections dealing with transactions so I'm confident that i'm not supposed to wait for a commit). </p>\n\n<p>What am I doing or not doing that keeps my fixtures from loading correctly?</p>\n\n<p><strong>EDIT:</strong> I had the brilliant idea to test loading the fixture and it succeeded:</p>\n\n<pre><code>$ ./manage.py loaddata auth\nInstalled 8 object(s) from 1 fixture(s)\n</code></pre>\n\n<p>However, this doesn't give me any ideas on how to fix the fixture loading.</p>\n\n<p><strong>EDIT:</strong> supervacuo provided a clue when he suggested I try this:</p>\n\n<pre><code>./manage.py testserver -v 2 auth.json \n</code></pre>\n\n<p>The output is largely the same except that it correctly loads the fixture (mysql confirmed it):</p>\n\n<pre><code>...\nInstalled 8 object(s) from 1 fixture(s)\nValidating models...\n0 errors found\n\nDjango version 1.3, using settings 'project.settings'\nRunning django-devserver 0.1.4\n</code></pre>\n\n<p>I don't know where to go from there.</p>\n"},{"tags":["python","unit-testing","import","relative"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":11919620,"title":"Python: Unit Testing Module and Relative Imports","body":"<p>Currently have the following file hierarchy:</p>\n\n<pre><code>\\package\n    __init__.py\n    run_everything.py\n\n    \\subpackage\n        __init__.py\n        work.py\n        work1.py\n        work2.py\n\n    \\test\n        __init__.py\n        test_work.py\n        test_work1.py\n</code></pre>\n\n<p>My first question is regarding relative imports. Suppose in \\subpackage\\work.py I have a function called custom_function(), and I would like to test that function in test_work.py. For some reason I can not figure out how to make this import from one module to another. Trying <code>from .. subpackage.work1 import custom_function()</code> does not seem to work, and yields the error <code>Attempted relative import in non-package</code> Is there any way to resolve this?</p>\n\n<p>2)\nI would like to run all test files from run_everything.py with one function, would adding a suite() function in each test_work*.py file, which adds each unit_testing class to suite.addTest(unittest.makeSuite(TestClass)), and finally importing them into the top-level run_everything.py be the most <em>conventional way</em> in Python2.7?</p>\n"},{"tags":["eclipse","unit-testing","mocking","easymock","codepro"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12114785,"title":"Google CodePro test cases not generating easymock objects automatically","body":"<p>I have google CodePro Analytix tool installed for Eclipse Helios, when I generate unit tests using code pro, it generates the unit tests , but doesn't generate mock objects of interface, or in general doesn't create mock object, I do have some errors in my project, but if that would have been a problem I don't see how it would generate unit tests in the first place.?\nThanks in advance.</p>\n"},{"tags":["c#",".net","wcf","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12113250,"title":"hosting webservice in unitTest","body":"<p>I want to host WCF service inside unit Test using <code>ServiceHost</code>.</p>\n\n<p>And then running them in on a build machine.</p>\n\n<p>Is it possible to host web services like this ? if yes how it's done ?</p>\n\n<p>Thanks</p>\n"},{"tags":["unit-testing","testing","visual-studio-2012"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":365,"score":2,"question_id":12102482,"title":"VS2012 Making test results appear in the Test Results window","body":"<p>From the Menu I Choose Test->Run->All Tests</p>\n\n<p>I can see the results of the test run in the Test Explorer but I get nothing in the Test Results window.</p>\n\n<p>How do I get my test results there?</p>\n"},{"tags":["javascript","jquery","unit-testing","jquery-plugins"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":645,"score":4,"question_id":5750279,"title":"how to unit-test private methods in jquery plugins?","body":"<p>Perhaps this is a bit of a novice JQuery question but:</p>\n\n<ul>\n<li>proper jquery plugins are written inside a closure</li>\n<li>thus only methods defining the plugin interface are accessible from the outside</li>\n<li>sometimes (or many times) one may need helper methods that it doesn't make sense to expose as part of plugin interface (for example because they alter internal state). </li>\n<li><strong>how do those get unit-tested?</strong></li>\n</ul>\n\n<p>For example, looking at <a href=\"https://github.com/malsup/blockui/blob/master/jquery.blockUI.js\" rel=\"nofollow\">blockUI</a> plugin, how can methods install, remove, reset get unit-tested?</p>\n\n<p>To draw a parallel, in Java I would:</p>\n\n<ol>\n<li>create a BlockUI interface containing public methods only (by definition)</li>\n<li>create a BlockUIImpl class implementing the above interface. This class would contain install(), remove(), reset() methods that could be public, or (package) protected</li>\n</ol>\n\n<p>So, I would unit-test the Impl but client programmers would interact with the plugin via BlockUI interface. </p>\n"},{"tags":["asp.net-mvc","unit-testing","tdd","moq","unit-of-work"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":296,"score":0,"question_id":12038743,"title":"TDD Unit of Work Pattern Moq Cannot instantiate proxy of class error","body":"<p>I am new to test driven development, and trying to unit test an mvc application. I am using Moq and Ninject, and trying to follow the unit of work repository pattern. I am getting a System.ArgumentException Error for all of my tests. Here is the error message and error stack trace: </p>\n\n<pre><code>Test method LOMSv4.Tests.Controllers.AutobytelControllerTest.Index_Contains_All_Requests threw exception: \nSystem.ArgumentException: Can not instantiate proxy of class: LOMSv4_DAL.Autobytel.Concrete.RequestRepository.\nCould not find a parameterless constructor.\n</code></pre>\n\n<p>Parameter name: constructorArguments</p>\n\n<pre><code>Castle.DynamicProxy.ProxyGenerator.CreateClassProxyInstance(Type proxyType, List`1 proxyArguments, Type classToProxy, Object[] constructorArguments)\nCastle.DynamicProxy.ProxyGenerator.CreateClassProxy(Type classToProxy, Type[] additionalInterfacesToProxy, ProxyGenerationOptions options, Object[] constructorArguments, IInterceptor[] interceptors)\nMoq.Proxy.CastleProxyFactory.CreateProxy[T](ICallInterceptor interceptor, Type[] interfaces, Object[] arguments)\nMoq.Mock`1.&lt;InitializeInstance&gt;b__0()\nMoq.PexProtector.Invoke(Action action)\nMoq.Mock`1.InitializeInstance()\nMoq.Mock`1.OnGetObject()\nMoq.Mock.GetObject()\nMoq.Mock.get_Object()\nMoq.MockDefaultValueProvider.ProvideDefault(MethodInfo member)\nMoq.QueryableMockExtensions.FluentMock[T,TResult](Mock`1 mock, Expression`1 setup)\nlambda_method(Closure )\nMoq.Mock.GetInterceptor(Expression fluentExpression, Mock mock)\nMoq.Mock.&lt;&gt;c__DisplayClass1c`2.&lt;Setup&gt;b__1b()\nMoq.PexProtector.Invoke[T](Func`1 function)\nMoq.Mock.Setup[T,TResult](Mock mock, Expression`1 expression, Func`1 condition)\nMoq.Mock`1.Setup[TResult](Expression`1 expression)\n</code></pre>\n\n<p>Here is my test class:  </p>\n\n<pre><code>[TestClass]\npublic class AutobytelControllerTest\n{\n    Mock&lt;IUnitOfWork&gt; mock = new Mock&lt;IUnitOfWork&gt;();\n\n    [TestMethod]\n    public void Index_Contains_All_Requests()\n    {\n        //Arrange\n        AutobytelController controller = new AutobytelController(mock.Object);\n        mock.Setup(m =&gt; m.RequestRepository.SelectAll()).Returns(new abtRequest[] {\n            new abtRequest {RequestID = 1, Title = \"Request 1\", Description = \"Request Description1\", UserName = \"NewUser\", RequestStatus = 0},\n            new abtRequest {RequestID = 2, Title = \"Request 2\", Description = \"Request Description2\", UserName = \"ReturnUser\", RequestStatus = 1}\n        }.AsQueryable());\n\n        //Act\n        abtRequest[] result = ((AutobytelHomeViewModel)controller.Index().Model).Requests.ToArray();\n        //Assert\n        Assert.AreEqual(result.Length, 2);\n        Assert.AreEqual(\"Request 1\", result[0].Title);\n        Assert.AreEqual(\"Request 2\", result[1].Title);\n    }\n</code></pre>\n\n<p>I have an IUnitofWork interface and class, generic repository interface and class and a request repository that implements the generic repository</p>\n\n<pre><code>public interface IUnitOfWork\n{\n    RequestRepository RequestRepository { get; }\n    void Save();\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class UnitOfWorkRepository : IUnitOfWork, IDisposable\n{\n    private AutobytelEntities context = new AutobytelEntities();\n    private RequestRepository requestRepository;\n\n    public RequestRepository RequestRepository\n    {\n        get\n        {\n            if (this.requestRepository == null)\n            {\n                //this.requestRepository = new GenericRepository&lt;abtRequest&gt;(context);\n                this.requestRepository = new RequestRepository(context);\n            }\n            return requestRepository;\n        }\n    }\n\n    public void Save()\n    {\n        context.SaveChanges();\n    }\n\n    private bool disposed = false;\n\n    protected virtual void Dispose(bool disposing)\n    {\n        if (!this.disposed)\n        {\n            if (disposing)\n            {\n                context.Dispose();\n            }\n        }\n    }\n\n    public void Dispose()\n    {\n        Dispose(true);\n        GC.SuppressFinalize(this);\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class GenericRepository&lt;TEntity&gt; : IGenericRepository&lt;TEntity&gt; where TEntity : class\n{\n    internal AutobytelEntities context;\n    internal IObjectSet&lt;TEntity&gt; objectSet;\n\n\n    public GenericRepository(AutobytelEntities context)\n    {\n        this.context = context;\n        this.objectSet = context.CreateObjectSet&lt;TEntity&gt;();\n    }\n\n    public virtual IQueryable&lt;TEntity&gt; SelectAll()\n    {\n        return objectSet.AsQueryable();\n    }\n\n    public virtual TEntity Update(TEntity entity)\n    {\n        context.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Modified);\n        return entity;\n    }\n\n    public virtual void Delete(TEntity entity)\n    {\n        objectSet.DeleteObject(entity);\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>    public class RequestRepository : GenericRepository&lt;abtRequest&gt;, IGenericRepository&lt;abtRequest&gt;\n{\n    public RequestRepository(AutobytelEntities context) : base(context)\n    { }\n\n    public virtual abtRequest SelectByUserName(string username)\n    {\n        return context.abtRequests.FirstOrDefault(i =&gt; i.UserName == username &amp;&amp; (i.RequestStatus == 0 || i.RequestStatus == 1));\n    }\n\n    public virtual abtRequest SelectByRequestID(int requestID)\n    {\n        return context.abtRequests.FirstOrDefault(i =&gt; i.RequestID == requestID);\n    }\n</code></pre>\n\n<p>Using Ninject I am binding my IUnitofwork to UnitOfWork class. </p>\n\n<p>If I add a parameterless constructor to my request repository, My error is resolved- but because I don't want to create a new object context, I want to pass my context in from the unit of work repository.</p>\n\n<p>How can I resolve this error?</p>\n"},{"tags":["python","unit-testing","tdd"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":114,"score":3,"question_id":12096221,"title":"First steps with tdd","body":"<p>I am currently trying out the process of test-driven development on a hobby project and while I do understand the concept (write your unit test first, watch it fail, make it work, refactor your code) I still have some questions.</p>\n\n<p>The project I am working on is a MUD-client in Python. Right now I am busy with implementing the telnet protocol. (I know there is already a telnetlib in Python or an implementation in Twisted, but that's not the point)</p>\n\n<p>Right now I have a class TelnetHandler that implements the Telnet protocol (or at least parts of it) and various unit tests for it.\nSince they're rather large they are on pastebin: <a href=\"http://pastebin.com/DTBt1PYM\" rel=\"nofollow\">TelnetHandler</a> and the <a href=\"http://pastebin.com/FdKyi6d6\" rel=\"nofollow\">unit tests</a></p>\n\n<p>My issues now are the following:</p>\n\n<ul>\n<li>A lot of tests depend on each other: for instance if the <code>test_handle_read</code> tests fails then a lot of other tests will fail too.</li>\n<li>In the <code>TelnetOptionsTests</code> I add methods that my class is supposed to call to just check if they were called (the various <code>local_option_enabled</code> methods). Now, I don't have those methods in my class. Should I add unit tests just to check their presence?</li>\n<li>When I started writing my test I changed the <code>handle_read</code> method to also parse telnet commands. Afterwards, once I had my tests done I split the <code>handle_read</code> in various <code>_handle_do</code>, <code>_handle_dont</code>, etc... But I don't have unit tests for those as they're being tested in the original <code>handle_read</code>. Is this the proper way, or is it good practice to write unit tests also when you split a method in different methods?</li>\n</ul>\n\n<p>Basically, what I am asking is various hints and pointers that can help me improve my unit testing skills.</p>\n\n<p>Thank you!</p>\n"},{"tags":["cocoa-touch","unit-testing","cocoapods"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":516,"score":2,"question_id":10741183,"title":"How do I setup Kiwi with Cocoapods?","body":"<p>I am new to both Kiwi and Cocoapods. I have Cocoapods up and running however even before I start playing with Kiwi my testing target fails with errors like this:</p>\n\n<pre><code>Undefined symbols for architecture i386:\n  \"_CGRectZero\", referenced from:\n  -[EGOImageButton initWithPlaceholderImage:delegate:] in libPods.a(EGOImageButton.o)\n</code></pre>\n\n<p>This is my Podfile:</p>\n\n<pre><code>platform :ios\ndependency 'RestKit/Network', '~&gt;0.10.0'\ndependency 'RestKit/UI', '~&gt;0.10.0'\ndependency 'RestKit/ObjectMapping', '~&gt;0.10.0'\ndependency 'RestKit/ObjectMapping/XML', '~&gt;0.10.0'\ndependency 'RestKit/ObjectMapping/JSON', '~&gt;0.10.0'\ndependency 'RestKit/ObjectMapping/CoreData', '~&gt;0.10.0'\ndependency 'SVProgressHUD'\ndependency 'EGOImageLoading'\ndependency 'OHAttributedLabel'\ndependency 'SFHFKeychainUtils'\n\ntarget :test, :exclusive =&gt; true do\n    dependency 'Kiwi'\nend\n</code></pre>\n"},{"tags":["xml","unit-testing","grails","groovy","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12098289,"title":"Groovy Grails test case error when converting to xml","body":"<p>I am trying to write a test case for this method, which works when it is hit from non test case code...</p>\n\n<pre><code>import grails.converters.XML\nClass itemService(){\n\n    def getData(Map){\n        def helperBean = new HelperBean(Map)\n        def requestXml = helperBean as XML\n            -------- some code-------------\n        return requestXml\n        }\n    }\n</code></pre>\n\n<p>To test this method, I have a test case like this:</p>\n\n<pre><code> void testGetData(){\n\n            def service = new itemService()\n            def id=\"123\"\n            def map = [id:id.toLong()]\n            def result = service.getData(map)\n            assertNotNull(result)\n            assertEquals \"123\", result.id\n        }\n</code></pre>\n\n<p>But it keeps throwing this exception </p>\n\n<pre><code>org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'com.xyz.groovy.utils.helperBean@443acc67' with class 'com.xyz.groovy.utils.HelperBean' to class 'grails.converters.XML'\n</code></pre>\n\n<p>at this line in the getData(Map method)</p>\n\n<pre><code>   def requestXml = userBean as XML\n</code></pre>\n\n<p>Can anyone help me out with why it is throwing that exception when the getData(Map) is being hit from the test case only? It is working fine when that method is hit from non test case code.</p>\n"},{"tags":["android","unit-testing","file","copy","assets"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1053,"score":2,"question_id":3790963,"title":"How can I transfer a database test fixture to device from my unit test application","body":"<p>I'm writing an Android JUnit test and want to copy/reset a test fixture file (it's an SQLite database file.)  If I were within the main application, I know I could just place the file in the assets directory and use <code>getResources().getAssets().open(sourceFile)</code></p>\n\n<p>However, this API appears to be unavailable from the <code>ActivityInstrumentationTestCase2</code> class.</p>\n\n<p>Is there an easy way to copy a file over from the testing PC, or should I just keep a fresh copy of a test fixture on the device and copy it over a temporary file?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","unit-testing","tdd"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":83,"score":4,"question_id":12110610,"title":"How should I indicate that a test hasn't been written yet in Python?","body":"<p>I'm doing TDD using Python and the <code>unittest</code> module. In NUnit you can <code>Assert.Inconclusive(\"This test hasn't been written yet\")</code>.</p>\n\n<p>So far I haven't been able to find anything similar in Python to indicate that \"These tests are just placeholders, I need to come back and actually put the code in them.\"</p>\n\n<p>Is there a Pythonic pattern for this?</p>\n"},{"tags":["unit-testing","design","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12108577,"title":"Is it right to mock look up tables in a unit test?","body":"<p>when you write a test for the logic layer, you mock the data access layer that's used, because you don't want the test cases to be dependent on each other.</p>\n\n<p>But what about lookup tables ?\nlets say you have a logic that calculcates value depending on size in <strong>Sizes</strong> table:</p>\n\n<p>Small   1<br>\nMedium  2<br>\nLarge   3</p>\n\n<p>Now, do you mock this table somehow in your test? using a dictionary for ex.? when the table changes (<em>a real config table will contain hundreds of values, and sometimes will not be in simple key-value form</em>) how do you keep code and table insync?</p>\n\n<p>or you bend this rule... and get values directly from database?\nbut what if tomorrow i change the data source? or i cannot access the database somehow? aren't test cases supposed to run in whatever conditions ?</p>\n\n<p>what's the best approach?</p>\n"},{"tags":["c#","unit-testing","nunit"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":147,"score":0,"question_id":12104429,"title":"Best way to unit test console c# app","body":"<p>I have a simple console app. It's fired of with a normal main and the entire program recides in main. It uses the <a href=\"http://commandline.codeplex.com/\" rel=\"nofollow\">Command Line Parser Library</a>. Then I have a second project in the solution containing unit tests for the application. But I don't seem to find a good way to start processes of the main program from the tests. My current code for actually start the process looks something like this.</p>\n\n<pre><code>...\n\nprocess = new Process();\nprocess.StartInfo.FileName = \"FooBar\";\nprocess.StartInfo.Arguments = arguments;\n\n// use it to start from testing environment\nprocess.StartInfo.UseShellExecute = false;\n\n// redirect outputs to have it in testing console\nprocess.StartInfo.RedirectStandardOutput = true;\nprocess.StartInfo.RedirectStandardError = true;\n\n...\n</code></pre>\n\n<p>I have tried setting</p>\n\n<pre><code>process.StartInfo.WorkingDirectory\n</code></pre>\n\n<p>to</p>\n\n<pre><code>AppDomain.CurrentDomain.BaseDirectory\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Environment.CurrentDirectory;\n</code></pre>\n\n<p>But do I have to specify the entire relative path for the console applications executable or is there a refined way of starting processes of the \"tested\" application?\nFirst I had my tests as a class in the \"main\" program and then it worked just fine. The issues started when I moved the tests to their own project. That's why I suspect a path being the issue or something of that nature.</p>\n\n<p>I also tried Running Program.Main but that just feels so wrong :)</p>\n"},{"tags":["unit-testing","mstest","deploymentitem"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":577,"score":3,"question_id":7230514,"title":"MsTest: how to set the deployment item relative to either $(ProjectDir) or $(OutDir)","body":"<p>I want to add an deployment item to my test. As far as I understood up until now, the path is relative to the solution. I want the path to be relative to the project. Otherwise, the project can't be used in multiple solutions.\nHow can I configure the deployment Item to be relative to a project dependent variable?</p>\n\n<p>I was hoping for something like: <code>[DeploymentItem(@\"$(ProjectDir)..\\..\\bin\\$(Configuration)\")]</code> but I don't find any documentation and it does not seem to work.</p>\n\n<hr>\n\n<p>I just did a small test. Just plain wizard code and one deployment item:</p>\n\n<pre><code>[TestMethod]\n[DeploymentItem(\"stdafx.cpp\")]\nvoid TestMethod1()\n{\n    Assert::Fail();\n};\n</code></pre>\n\n<p>and the trx file shows the following line:</p>\n\n<blockquote>\n  <p>Warning: Test Run deployment issue: Failed to get the file for deployment item 'stdafx.cpp' specified by the test 'TestProject1.UnitTest1.TestMethod1': System.IO.FileNotFoundException: Could not find file 'd:\\Development\\Projects\\deploymentItemTest\\stdafx.cpp'.\n          System.IO.FileNotFoundException: Could not find file 'd:\\Development\\Projects\\deploymentItemTest\\stdafx.cpp'.\n  File name: 'd:\\Development\\Projects\\deploymentItemTest\\stdafx.cpp'</p>\n</blockquote>\n\n<p>which means that \"stdafx.cpp\" is searched relative to the solution directory (which is in ...\\depoymentItemTest) and not the project directory (which is in ...\\depolymentItemTest\\TestProject1)</p>\n"},{"tags":["unit-testing","moq"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1462,"score":4,"question_id":4163679,"title":"Reset mock verification in Moq?","body":"<p>Setup as so:</p>\n\n<pre><code>public interface IFoo\n{\n    void Fizz();\n}\n\n[Test]\npublic void A()\n{\n    var foo = new Mock&lt;IFoo&gt;(MockBehavior.Loose);\n\n    foo.Object.Fizz();\n\n    foo.Verify(x =&gt; x.Fizz());\n\n    // stuff here\n\n    foo.Verify(x =&gt; x.Fizz(), Times.Never()); // currently this fails\n}\n</code></pre>\n\n<p>Basically I'd like to enter some code at the <code>// stuff here</code> to make the <code>foo.Verify(x =&gt; x.Fizz(), Times.Never())</code> pass.</p>\n\n<p>And because this probably constitutes moq/unit testing abuse, my justification is so I can do something like this:</p>\n\n<pre><code>[Test]\npublic void Justification()\n{\n    var foo = new Mock&lt;IFoo&gt;(MockBehavior.Loose);\n    foo.Setup(x =&gt; x.Fizz());\n\n    var objectUnderTest = new ObjectUnderTest(foo.Object);\n\n    objectUnderTest.DoStuffToPushIntoState1(); // this is various lines of code and setup\n\n    foo.Verify(x =&gt; x.Fizz());\n\n    // reset the verification here\n\n    objectUnderTest.DoStuffToPushIntoState2(); // more lines of code\n\n    foo.Verify(x =&gt; x.Fizz(), Times.Never());\n}\n</code></pre>\n\n<p>Basically, I have a state object where a fair bit of work (both in terms of making various mock objects and other faffing around) is requires to push it into State1. Then I want to test the transition from State1 to State2. Instead of duplicating or abstracting the code I'd prefer to just re-use the State1 test, push it into State2 and perform my Asserts - all of which I can do except the verification calls.</p>\n"},{"tags":["unit-testing","integration-testing","ioc-container"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12061383,"title":"Can I use an IoC container in unit/integration tests?","body":"<p>I've got an IoC container doing some complicated object construction when resolving some interfaces. I want to use implementations of these interfaces in my unit/integration tests. Is there anything wrong with resolving these interfaces in the tests using the IoC container or is it expected that one should build up instances manually in this situation?</p>\n"},{"tags":["c#","unit-testing","tdd","rhino-mocks"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":133,"score":1,"question_id":12105060,"title":"Rhino Mocks, VerifyAllExpectations","body":"<p>I would like to track a call to a method with Rhino Mocks. Let's assume I have this code:</p>\n\n<pre><code>public class A\n{\n    protected IB _b;\n\n    public A(IB b)\n    {\n        _b = b;\n    }\n\n    public void Run( string name )\n    {            \n        _b.SomeCall(new C { Name = name });\n    }\n}    \n\npublic interface IB\n{\n    void SomeCall( C c );\n}    \n\npublic class C\n{\n    public string Name { get; set; }\n    // more attributes here\n}\n</code></pre>\n\n<p>And the test looks like:</p>\n\n<pre><code>// prepare\nvar bMock = Rhino.Mocks.MockRepository.GenerateStrictMock&lt;IB&gt;();\nbMock.Expect(x =&gt; x.SomeCall(new C { Name = \"myname\" }));\nvar sut = new A(bMock);\n\n// execute\nsut.Run(\"myname\");\n\n// assert\nbMock.VerifyAllExpectations();\n</code></pre>\n\n<p>The test fails with a <em>ExpectedViolationException</em> because Rhino Mocks framework detects 2 distinct C classes.</p>\n\n<p>How do I check the call if the subject under tests creates the object parameter into the method under test? Any chance to tell Rhino Mocks to check the parameter as \"Equals\"?</p>\n\n<p>Thanks a ton!</p>\n"},{"tags":["c#","unit-testing","srp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12096172,"title":"code adherence to single responsibility principle & unit testing","body":"<p>I have lately been reading on the <code>Single Responsibility Principle</code> concept, and in theory I agree a lot with it.  I am having difficulty coming to terms on which code can be exactly classified as violating the principle.  I would like to implement this principle, so as to gear towards Test-Driven Development.  </p>\n\n<p>Take for example the code below:</p>\n\n<pre><code>public void MarkAsSuccessful(PaymentMethodSpecific paymentMethod, bool requiresManualIntervention)\n    {\n            this.Paid = true;\n            this.PaidOn = CS.General_v3.Util.Date.Now;\n            this.PaidByPaymentMethod = paymentMethod;\n            this.RequiresManualIntervention = requiresManualIntervention;\n\n            this.Update();\n\n        this.CreateAndSendNotificationRegardingImmediatePayment();\n\n        this.SendPaymentSuccessfulEmails();\n\n    }\n</code></pre>\n\n<p>This is placed in a class called <code>PaymentRequest</code>, which basically is a class which handles logic related to payment in an e-commerce application.  The method above marks the request as 'successful'.  This must mark the columns paid, as well as other information, as well as send a notification that this was successful, and also send emails.</p>\n\n<p>For example, when it comes to unit testing - It is very difficult to unit-test this method as I have no way to know that the notification was actually created and sent, as well as the payment emails have been sent.  Would like to know how more experienced people on the SRP concept would approach such an example.  </p>\n"},{"tags":["java","unit-testing","maven","surefire"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":11996027,"title":"What is a good way in maven/surefire to clean up after unit tests, whether they pass or not?","body":"<p>We have some unit tests that unfortunately create memory-mapped NIO files that cannot be deleted by the process that created them (some windows issue).</p>\n\n<p>Regardless, I would like to run some sort of clean up after these tests, whether they passed or not.  I was going to run a small ant script at the <em>prepare-package</em> phase, but if any test fails, surefire exits immediately.</p>\n\n<p>Apart from going to the <strong>failsafe</strong> plugin which has a post-test phase, is there any clever way I can run my cleanup regardless of pass or fail?</p>\n\n<p>I suspect not - I've gone through all the <strong>surefire</strong> config options...</p>\n\n<p>edit:  memory-mapped nio files <a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4715154\" rel=\"nofollow\">cannot</a> be deleted in the same process, even by deleteOnExit.</p>\n"},{"tags":["javascript","unit-testing","javascriptmvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":161,"score":0,"question_id":9784306,"title":"How to make funcunit close the new browser window after tests","body":"<p>I'm using funcunit for testing my JavascriptMVC application. It opens a new browser window where it runs my application. I wish it also closed the window after tests.</p>\n\n<p>How to do that?</p>\n"},{"tags":["java","unit-testing","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12101796,"title":"Test suites for java - what is it?","body":"<p>I have to submit my project along with test suits. I would appreciate someone explaining best with example what is it, is there some other tools that build the test or is it a scenario written by myself? I have never written it before so please any info will be of a great help.</p>\n"},{"tags":["unit-testing","testing","erlang","mocking","tdd"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12085746,"title":"Meck and Test Driven Development workflow?","body":"<p>As to my knowledge, the typical workflow (W1) of TDD is as follows:</p>\n\n<ol>\n<li>Develop a test for a function;</li>\n<li>Run the test and watch it failing;</li>\n<li>Develop the function;</li>\n<li>Run the test again and watch it passing;</li>\n<li>Repeat 1.</li>\n</ol>\n\n<p>But with Meck and other mocking frameworks, the workflow (W2) could be the following:</p>\n\n<ol>\n<li>Write tests for all functions and watch them failing;</li>\n<li>Develop a complete system prototype (all functions and their interaction) with the help of mock objects;</li>\n<li>Run the tests again and watch them passing;</li>\n<li>Gradually change each mock function to a real one, step-by-step.</li>\n</ol>\n\n<p>I tend to think that W2 has some advantages over W1:</p>\n\n<ul>\n<li>faster to write;</li>\n<li>easier integration, since all tests (both unit and integration tests) will be written in advance; also they they will pass from the very beginning;</li>\n</ul>\n\n<p>So, the question is: </p>\n\n<p>Does W2 really have the advantages described above? If no, how can I incorporate Meck into my daily development as an established routine, i.e. what would be a workflow of using it? Or should I just use Meck randomly without any guidance?</p>\n"},{"tags":["unit-testing","testing","tfs2010","coded-ui-tests","microsoft-test-manager"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":127,"score":0,"question_id":10556079,"title":"MTM Coded UI Test Manual Execution: \"Recording Not Found\"","body":"<p>I have made a few coded UI tests to test the application I am working on. I followed the following post: <a href=\"http://msdn.microsoft.com/en-us/library/dd553270.aspx\" rel=\"nofollow\">How to run coded UI Tests from MTM</a> as a guidance and also the following post on how to create a fake build: <a href=\"http://blogs.msdn.com/b/jpricket/archive/2010/02/23/creating-fake-builds-in-tfs-build-2010.aspx\" rel=\"nofollow\">How to Create a Fake Build Definition and a Fake Build</a></p>\n\n<p>So after I set the infrastructure I attempted to run the tests from the Microsoft Test Manager (MTM). While MTM doesn't break or throw errors, the result it reports back to me is that it cannot find the Coded UI Test recordings.</p>\n\n<p>Upon looking the contents of the first link (How to run coded UI tests from MTM) I noticed that there was a small piece of text saying <code>\"You must create a build definition that just has a share location added that is where your assemblies for your tests are located.\"</code></p>\n\n<p>What exactly does that mean? How do I do this? My build definition drops the assemblies in <code>\\\\machine\\share</code>, so that's where I copied the coded ui tests, but I still get the same result.</p>\n\n<p>Is there anything I am missing?</p>\n\n<p>Thanks,\nMartin</p>\n"},{"tags":["python","unit-testing","discovery"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":2466,"score":4,"question_id":3295386,"title":"Python unittest and discovery","body":"<p>I have directories, which contain files named like:\n'test_foo.py'</p>\n\n<p>Each file is a test case.</p>\n\n<p>I would like to \n1) run all the tests in a directory from the command line. I am using unittest2, since we are running Python 2.5.1. From one of these directories I tried typing this at the commandline:</p>\n\n<pre><code>python -m unittest2 discover -p 'test_*.py'\n</code></pre>\n\n<p>and several different variants. I get no error, but nothing happens. I was expecting all the tests within all the test cases in that directory to run and get results.</p>\n\n<p>2) I also tried having a script in the directory where I did this:</p>\n\n<pre><code>loader = unittest2.TestLoader()\nt = loader.discover('.')\n</code></pre>\n\n<p>If I print the t variable, I can see my test cases, but from the docs I can't figure out what to do with the loader object once I have it.</p>\n"},{"tags":["sql","ruby-on-rails-3","unit-testing","scope","associations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12096224,"title":"How to set up this scope with association in Rails?","body":"<p>I'm having trouble writing and testing a scope involving a couple of joins and associations.  I'll try to keep my explanation brief but as thorough as possible.</p>\n\n<p>I have the following associations:</p>\n\n<p><code>ExpertTopic &gt; Topic &gt; Articles &gt; Posts</code></p>\n\n<p>and the following code:</p>\n\n<pre><code>class Topic &lt; ActiveRecord::Base\n  has_many :articles, :order =&gt; \"position\", :dependent =&gt; :destroy\n  has_many :posts, :through =&gt; :articles\n\n  has_many :expert_topic, :dependent =&gt; :delete_all\n  has_many :experts, :through =&gt; :expert_topic\nend\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>class ExpertTopic &lt; ActiveRecord::Base\n  belongs_to :topic, :inverse_of =&gt; :expert_topic\n  belongs_to :expert, :inverse_of =&gt; :expert_topic\n\n  scope :live, joins(:topic =&gt; {:articles =&gt; :post})\n    .where(\"topics.article_count &gt; ? AND posts.live = ?\", 0, true)\nend\n</code></pre>\n\n<p><strong>With the <code>live</code> scope in <code>ExpertTopic</code>, I'm trying to narrow down to those experts associated with topics with all live posts in them (through articles).</strong></p>\n\n<p>In the Rails console <code>ExpertTopic.live.to_sql</code> is:</p>\n\n<pre><code>\"SELECT `experts_topics`.* FROM `experts_topics` INNER JOIN \n`topics` ON `topics`.`id` = `experts_topics`.`topic_id` INNER JOIN\n`articles` ON `articles`.`topic_id` = `topics`.`id` INNER JOIN\n`posts` ON `posts`.`id` = `articles`.`post_id` WHERE\n(topics.article_count &gt; 0 AND posts.live = 1)\"\n</code></pre>\n\n<p>I'm testing my scope with the following code in <code>expert_topic_spec.rb</code>:</p>\n\n<pre><code>describe ExpertTopic do\n  before do\n    @post1 = FactoryGirl.create(:pending_post)\n    @post2 = FactoryGirl.create(:live_post)\n    @post3 = FactoryGirl.create(:pending_post)\n    @post4 = FactoryGirl.create(:live_post)\n    @non_live_topic = FactoryGirl.create(:topic_with_posts, :posts =&gt; [@post1, @post2, @post3])\n    @live_topic = FactoryGirl.create(:topic_with_posts, :posts =&gt; [@post2, @post4])\n    FactoryGirl.create(:expert_topic, topic_id: @non_live_topic.id)\n    FactoryGirl.create(:expert_topic, topic_id: @live_topic.id)\n  end\n\n  it 'finds and returns only expert with live topic' do\n    ExpertTopic.all.count.should == 2\n    ExpertTopic.live.uniq.count.should == 1\n  end\nend\n</code></pre>\n\n<p><strong>The logic is that since <code>@non_live_topic</code> contains at least one post that's not live it is not considered live and hence shouldn't be returned by a call to <code>ExpertTopic.live</code>.  However, the last assertion fails because <code>ExpertTopic.live.uniq.count</code> returns <code>2</code> instead of <code>1</code>.</strong></p>\n\n<p>I don't know if my scope is written incorrectly or if it's my test, and I'd really appreciate someone's help in debugging!</p>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","testing","junit","easymock"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":280,"score":0,"question_id":5865087,"title":"EasyMock condition and logic","body":"<p>Is there anyway to make EasyMock to work with conditionals? I have an if-else block in my method but the test only passes if I remove the conditional block. This might be a poblem with JUnit not EasyMock specifically. Anybody has any info on this?</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12082465,"title":"Weird behavior when calling load_tests()","body":"<p>When using the new discover feature in Python 2.7, I'm getting a weird error. I have some unit tests that require a bit of extra setup and some member data from a file. I'm trying to add my setup test cases to the current test suite that is passed to <code>load_tests()</code>. But because the test suite <code>tests</code> already contains the standard tests (including the <code>TestCase</code> objects in the current module), the proper setup for the automatically added testcase is not done and I get an AttributeError.</p>\n\n<p>In the code below, <code>load_tests()</code> is used to create one test case for each line of data in a csv file. The file has three lines, but for some reason a fourth testcase is being created.</p>\n\n<pre><code>#!/usr/bin/python\nimport unittest\n\nclass Foo(unittest.TestCase):    \n    def setup(self,bar):\n        print \"Foo.setup()\"\n        self.bar = bar \n    def runTest(self):\n        print self.bar\n\ndef load_tests(loader, tests, pattern):\n    f = open('data.csv')  # data.csv contains three lines: \"a\\nb\\nc\"\n    for line in f:\n        tc = Foo()\n        tc.setup(line)\n        tests.addTest(tc)\n    return tests\n\nunittest.main()\n</code></pre>\n\n<p>When I execute this code, the output shows that 4 tests were executed and one of them failed. The data file only contains three lines, and <code>Foo.setup()</code> was only called three times. So <code>load_tests()</code> created the three test cases as designed.  </p>\n\n<pre><code>Foo.setup()\nFoo.setup()\nFoo.setup()\nEa\n\n.b\n\n.c\n\n.\n======================================================================\nERROR: runTest (__main__.Foo)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"./foo.py\", line 11, in runTest\n    print self.bar\nAttributeError: 'Foo' object has no attribute 'bar'\n\n----------------------------------------------------------------------\nRan 4 tests in 0.002s\n</code></pre>\n\n<p>Is there a way to remove the TestCase that was automatically loaded in the suite? I cannot create a new empty TestSuite because I need all the other tests that are already there. I just want to add these tests to the suite.</p>\n\n<p>Edit: clarified my question and code examples. I was a bit ambiguous before.</p>\n"},{"tags":["javascript","unit-testing","mocking","requirejs"],"answer_count":5,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":627,"score":6,"question_id":11439540,"title":"How can I mock dependencies for unit testing in RequireJS?","body":"<p>I have an AMD module I want to test, but I want to mock out its dependencies instead of loading the actual dependencies. I am using requirejs, and the code for my module looks something like this:</p>\n\n<pre><code>define(['hurp', 'durp'], function(Hurp, Durp) {\n  return {\n    foo: function () {\n      console.log(Hurp.beans)\n    },\n    bar: function () {\n      console.log(Durp.beans)\n    }\n  }\n}\n</code></pre>\n\n<p>How can I mock out <code>hurp</code> and <code>durp</code> so I can effectively unit test?</p>\n"},{"tags":["unit-testing","windows-phone-7","async-ctp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":11755081,"title":"How to test async windows phone 7 code","body":"<p>I have a Windows Phone 7 library with public async functions (I'm using VS2010 &amp; Async CTP). How can I write unit-test for these functions?</p>\n"},{"tags":["unit-testing","postgresql","cakephp","cakephp-2.0","fixtures"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":141,"score":1,"question_id":12035885,"title":"Fixtures names in cakePHP (test)","body":"<p>i keep fixtures in:  app/test/fixture/ directory</p>\n\n<p>and for e.x.\napp/test/fixture/UserRoleHistoryFixture.php looks this way </p>\n\n<pre><code>&lt;?php\n\n class UserRoleHistoryFixture extends CakeTestFixture {\n    public $import = array('model' =&gt; 'UserRoleHistory', 'records' =&gt; false, 'connection' =&gt; 'test');\n}\n</code></pre>\n\n<p>app/Test/Fixture/UserFixture.php looks this way </p>\n\n<pre><code> class UserFixture extends CakeTestFixture {\n    public $import = array('model' =&gt; 'User', 'records' =&gt; true, 'connection' =&gt; 'test');\n}\n</code></pre>\n\n<p>All fixtures looks this (only difference is somtimes records are set true)\nThen in my UserTest.php(model) im using its this way: </p>\n\n<pre><code>class UserTest extends CakeTestCase {\npublic $fixtures = array('app.user', 'app.user_role','app.session', 'app.users_activity', 'app.user_role_history'\n    );\n public $autoFixtures = false;\n public function setUp() {\n    parent::setUp();\n\n\n    $this-&gt;loadFixtures('User','UserRoleHistory','Session','UserRole','UsersActivity');\n));\n</code></pre>\n\n<p>And what i get while trying to do some test i PDO error and stack trace , mayby i called sth wrong way ? Guess that it's problem with how i make my fixture but dont know ..\nThanks for ideas !</p>\n\n<p>Edit:\nmy problem changed a little, there is error and stack trace:</p>\n\n<pre><code>PDOException: SQLSTATE[23503]: Foreign key violation: 7 BŁĄD: modyfikacja lub usunięcie     na tabeli \"users\" narusza klucz obcy \"user_role_history_user_id\" tabeli \"user_role_history\"      DETAIL: Klucz (id)=(26381) ma wciąż odwołanie w tabeli \"user_role_history\".\nTest case: UserTest(testUserNameExists)\nStack trace:\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-    ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Model\\Datasource\\DboSource.php : 436\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Model\\Datasource\\DboSource.php : 403\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Model\\Datasource\\Database\\Postgres.php : 309\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\Fixture\\CakeTestFixture.php : 232\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\Fixture\\CakeFixtureManager.php : 236\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\CakeTestCase.php : 191\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\app\\Test\\Case\\Model\\UserTest.php : 16\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\vendors\\PHPUnit\\Framework\\TestCase.php : 801\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\app\\webroot\\test.php : 92\n</code></pre>\n\n<p>Also what i got is </p>\n\n<pre><code> Fatal Error (256): [PDOException] You cannot serialize or unserialize PDOStatement  instances\n #0 [internal function]: PDOStatement-&gt;__sleep()\n etc ;/\n</code></pre>\n\n<p>i see the first problem is about foregin key, and that when test is used to delete table users there is foregin key violation but is it problem about how the database is created ?</p>\n"},{"tags":["visual-studio","unit-testing","mstest","collectionviewsource"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":157,"score":0,"question_id":12087956,"title":"Unit Tests under VS2012 Fail: CollectionViewSource.GetDefaultView returns null","body":"<p>I have recently attempted to upgrade a solution from VS2010 to VS2012, and as part of that I have introduced the new <a href=\"http://msdn.microsoft.com/en-us/library/jj159530.aspx\" rel=\"nofollow\">.runsettings file</a> to generate code coverage results.</p>\n\n<p>In order to specify the run settings file I have had to un-select the .testsettings file that was working in VS2010.  As soon as I do this and run my tests, a large number of them start to fail because the <code>CollectionViewSource.GetDefaultView</code> method returns null instead of the expected default view.</p>\n\n<p>If I re-select the old .testsettings file then my tests all pass, but the code coverage settings are incorrect.</p>\n\n<p>Has anyone else experienced similar problems with the upgrade?</p>\n"},{"tags":["unit-testing","grails","groovy","junit","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12093862,"title":"Groovy-grails Mocking issue. Unable to Mock","body":"<p>I have a service class method in my grails porject which uses a helper class to fetch the response as xml. The xml is then send out as the response of the service class method.</p>\n\n<p>ServiceClass:-</p>\n\n<pre><code>class ItemService{\ndef getItem(Number) {\n        def HelperClass helper = new HelperClass()\n        def responseXml = helper.getMessage(Number)                 \n        return responseXml\n    }\n}\n</code></pre>\n\n<p>I writing a test case for this method. In my test case, i wish to mock </p>\n\n<pre><code>    def responseXml = helper.getMessage(Number) \n</code></pre>\n\n<p>The test case that i have written so far is:</p>\n\n<pre><code>class ItemServiceTest extends GroovyTestCase {\npublic final void testFindItem(){\n        def service = new ItemService()\n\n        def xml = \"&lt;Item&gt;&lt;Number&gt;123&lt;/Number&gt;&lt;/Item&gt;\"\n\n        def mockJobServiceFactory = new MockFor(HelperClass)\n        mockJobServiceFactory.demand.getMessage{ def str -&gt;\n            return xml\n        }\n        service.getItem().HelperClass =  mockJobServiceFactory.proxyInstance()\n\n        def item = service.getItem()(\"123\")\n        assertNotNull(item)\n    }\n</code></pre>\n\n<p>but still, the mock does not return the xml that I speicified in the test case.\nAny problems that you see in the above approach?...Advance Thanks</p>\n"},{"tags":["ios","unit-testing","mocking","ocunit","ocmock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12070652,"title":"Is it possible to OCMock a class call in a static method?","body":"<p>Am just getting started with OCMock so bear with me - I have been looking through the documentation and loads of examples but am yet to find a definitive answer - is it possible to  mock out an init call within a static method, for example:</p>\n\n<pre><code>+ (NSString *)addHeaderToRequest:(NSString *)request namespace:(NSString *)namespace\n{        \n    CTTeleInfo *netInfo = [[CTTeleInfo alloc] init];\n    CTCarrier *carrier = [netInfo subscriberCell;\n    NSString *mobileNetwork = [carrier carrierName];\n    if ( mobileNetwork == nil )\n        mobileNetwork = @\"Unknown\";\n\n}\n</code></pre>\n\n<p>Is it possible to mock out the CTTeleInfo object without changing the code?</p>\n"},{"tags":["unit-testing","easymock"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1456,"score":3,"question_id":3710717,"title":"Test that void method didn't get called with EasyMock","body":"<p>Is this possible?\nI tried with <code>EasyMock.expectLastCall().times(0);</code> but EasyMock complains that times must be >=1</p>\n"},{"tags":["unit-testing","mocking","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12088307,"title":"Mockito catch callback message","body":"<p>I have a mock callback object </p>\n\n<pre><code>Callback callback = mock(Callback.class);\n</code></pre>\n\n<p>This object has two methods, <code>done()</code> and <code>failed(String msg)</code>. </p>\n\n<p>I do a </p>\n\n<pre><code>verify(callback).done();\n</code></pre>\n\n<p>to see that <code>done()</code> was called, but when things dont turn up so well and <code>failed(String msg)</code> is called instead, how can i print <code>msg</code>?</p>\n"},{"tags":["unit-testing","magento","config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12085944,"title":"Mage_Core_Model_Config doesn't fetch value in unit-tests","body":"<p>I found a strange problem while doing some unit-testing on Magento.</p>\n\n<p>I have a test function which test a value from <code>core_config_data</code> table. So in order to have access to that value for test, in the setUp() function I am saving the config value in database:</p>\n\n<pre><code>public function setUp()\n{\n    parent::setUp();\n    $systemConfig = new Mage_Core_Model_Config();\n    $systemConfig-&gt;saveConfig(\n        'my/custom/path/config',\n        12\n    );\n}\n</code></pre>\n\n<p>and in my test method I am getting that value from database likeso:</p>\n\n<pre><code>$productsNo = Mage::getStoreConfig(my/custom/path/config);\n</code></pre>\n\n<p>but its value is null, and not a string as expected.</p>\n\n<p>This is strange, because if I am refreshing the database after running the test, the value it's existing in database. And if I'm running the test again, the test will work and the value it's not null anymore. </p>\n\n<p>What am I doing wrong? I don't save the value correctly, or I don't fetch it in a good way?</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12089206,"title":"MVC .NET How to test whether a link appears on a page","body":"<p>I was starting to write unit tests for my razor pages ( <a href=\"http://blog.davidebbo.com/2011/06/unit-test-your-mvc-views-using-razor.html\" rel=\"nofollow\">Check out this link</a> ). I was wondering, if I wanted to test whether a link exists for a particular page, I could parse the html and test whether the route \"Admin/Index\" appears on the page. But what if I change the controller method from Index to Home - it would break my gui unit tests. </p>\n\n<p>Is there a way to unit test whether a link appears on a page that's not coupled to the controllers?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","unit-testing","junit","junit4","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":118,"score":1,"question_id":12087944,"title":"Mockito: when Method A.a is called then execute B.b","body":"<p>I'm using Mockito for JUnit tests.\nSo there is a given class A that is used from the code i want to test:</p>\n\n<pre><code>class A{\n\n    public A(){}\n\n    public final String a(String x){\n        return \"A.a: \" + x;\n    }\n\n}\n</code></pre>\n\n<p>and i want to replace the Method call A.a with another method call with the same arguments and same type of return value. As you can see, its not possible to override the method a by extending the class as it is final. So what i have now is another class B with the method B.b:</p>\n\n<pre><code>class B{\n\n    public B(){}\n\n    public String b(String x){\n        return \"B.b: \" + x;\n    }\n\n}\n</code></pre>\n\n<p>Now i want to make sure every time when A.a is called from the code, the return value of B.b is used instead. Is there a possibility to achieve this with Mockito (something like <code>Mockito.when(A.a(x)).thenReturn(B.b(x));</code> ) but with the same parameter x, without knowing the value of x?</p>\n\n<p>Any help would be appreciated, thank you in advance!</p>\n"},{"tags":[".net","sql-server","unit-testing","transactionscope"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12086454,"title":"Is it possible to rollback only nested transaction for autotesting","body":"<p>Consider the following code:</p>\n\n<pre><code>ExecuteSQL(\"UPDATE ...\");\n\nusing (var t = new TransactionScope())\n{\n    ExecuteSQL(\"UPDATE ...\");\n\n    if (SomeCondition)\n        t.Commit();\n    else\n        t.Rollback();\n}\n\nvar result = ExecuteSQL(\"SELECT ...\");\n</code></pre>\n\n<p>Then we write an auto test using outer <em>TransactionScope</em> to rollback changes after each test:</p>\n\n<pre><code>[TestInitialize]\npublic override void Initialize()\n{\n    _transaction = new TransactionScope();\n}\n\n[TestCleanup]\npublic override void Cleanup()\n{\n    _transaction.Dispose();\n}\n</code></pre>\n\n<p>It's not possible to write a correct test for a case when <em>SomeCondition</em> is <em>false</em>. Because nested transaction ROLLBACK rollbacks the whole outer transaction including the first UPDATE statement.</p>\n\n<p>Do you know any workarounds?</p>\n"},{"tags":["unit-testing","angularjs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":283,"score":0,"question_id":12084410,"title":"AngularJS - Testing service method that uses $http service","body":"<p>I have a function on my service that looks like something this:</p>\n\n<pre><code>addStatement: function(user, action, object) {\n            var statement = {\n                    user: user,\n                    action: action,\n                    object: object\n            };\n            $http({\n                method: 'POST', \n                url: '/foo/bar', \n                data: statement, \n                headers: {Authorization: 'Basic YWxhZGRpbjpvcGVuIHNlc2FtZQ=='}\n            }).success(function(data) {\n                alert(\"success: \" + data);\n            });\n        }\n</code></pre>\n\n<p>I want to write a unit test for this method, but I'm not sure how to make it work. Basically, I want to test that the data sent up was correctly constructed from the function parameters and that the correct Authorization header was sent up.</p>\n\n<p>I've been reading over how to use <a href=\"http://docs.angularjs.org/api/ngMock.%24httpBackend\" rel=\"nofollow\">$httpBackend</a>, but the example there is testing a controller, and just stuff that changes on the $scope when the requests are made and returned. Is there a way to achieve the tests I want? Or am I going about something wrong?</p>\n"},{"tags":["android","unit-testing","junit","junit4","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":156,"score":0,"question_id":12069191,"title":"Android Library JUnit Test with Robolectric: java.lang.InstantiationException","body":"<p>When trying to run a JUnit test on an Android Library project with Robolectric i get the following error:</p>\n\n<pre><code>java.lang.RuntimeException: java.lang.InstantiationException\n    at com.xtremelabs.robolectric.ApplicationResolver.newApplicationInstance(ApplicationResolver.java:56)\n    at com.xtremelabs.robolectric.ApplicationResolver.resolveApplication(ApplicationResolver.java:36)\n    at com.xtremelabs.robolectric.RobolectricTestRunner.createApplication(RobolectricTestRunner.java:246)\n    at com.xtremelabs.robolectric.RobolectricTestRunner.setupApplicationState(RobolectricTestRunner.java:233)\n    at com.xtremelabs.robolectric.RobolectricTestRunner.internalBeforeTest(RobolectricTestRunner.java:177)\n    at com.xtremelabs.robolectric.RobolectricTestRunner.methodBlock(RobolectricTestRunner.java:157)\n    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\nCaused by: java.lang.InstantiationException\n    at sun.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at java.lang.Class.newInstance0(Unknown Source)\n    at java.lang.Class.newInstance(Unknown Source)\n    at com.xtremelabs.robolectric.ApplicationResolver.newApplicationInstance(ApplicationResolver.java:54)\n    ... 20 more\n</code></pre>\n\n<p>My first idea was that i made a mistake within the test, so i simplified the test run as much as possible:</p>\n\n<pre><code>import static org.junit.Assert.*;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\n\nimport com.xtremelabs.robolectric.RobolectricTestRunner;\n\n@RunWith(RobolectricTestRunner.class)\npublic class CommonDataTest {\n\n    @Test\n    public void test(){\n        assertTrue(true);\n    }\n\n}\n</code></pre>\n\n<p>but i still get the same error. I set up the Project as described here: <a href=\"http://pivotal.github.com/robolectric/eclipse-quick-start.html\" rel=\"nofollow\">http://pivotal.github.com/robolectric/eclipse-quick-start.html</a>\nThe strange thing is that it worked with other Android Library Projects without any problems.</p>\n\n<p>Any help would be appreciated! Thank you in advance!</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","testing","routes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12084073,"title":"How can I test arbitrary routes in Rails?","body":"<p>I'd like to write a Rails functional test for a non-RESTful route.</p>\n\n<p>I'm using Test::Unit.</p>\n\n<p>In <code>routes.rb</code> I have this route...</p>\n\n<pre><code>match '/contract_search' =&gt; 'contracts#contract_search', \\\n    :as =&gt; 'contract_search', \\\n    :via =&gt; :post\n</code></pre>\n\n<p>And in my Contracts controller I have this action...</p>\n\n<pre><code>def contract_search\n  # ...\nend\n</code></pre>\n\n<p>In <code>contracts_controller_test.rb</code> I tried...</p>\n\n<pre><code>test 'POST to contracts with search params.' do\n  post(:contract_search, {\n    :contract_search =&gt; {\n      :title_like =&gt; 'System'\n    }\n  }, unprivileged_internal_user_session_vars, { })\n\n  assert(\n    assigns(:contracts).length == 6,\n    \"@contracts.length #{assigns(:contracts).length} is incorrect.\"\n  )\n\nend\n</code></pre>\n\n<p>The action works as expected in the browser.</p>\n\n<p>But the test just errors out with...</p>\n\n<pre><code>  1) Error:\ntest_POST_to_contracts_with_search_params.(ContractsControllerTest):\nNoMethodError: undefined method `length' for nil:NilClass\n    test/functional/contracts_controller_test.rb:49:in `block in &lt;class:ContractsControllerTest&gt;'\n</code></pre>\n\n<p>My sense is that the Test::Unit is trying to post to <code>/contracts/contract_search</code>, I think.</p>\n\n<p>What is the correct way to do this?</p>\n"},{"tags":["javascript","unit-testing","closures","jasmine"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":12084590,"title":"How do you test javascipt methods only visible in the closure scope?","body":"<p>Say I have the following javascript:</p>\n\n<pre><code>function Foo() {\n\n    function privateStuff() {\n       //do private stuff\n    }\n\n    this.publicStuff = function() {\n        privateStuff();\n        //do other stuff\n    }\n\n}\n</code></pre>\n\n<p>It's easy enough to test <code>publicStuff()</code> by doing the following:</p>\n\n<pre><code>var myFoo = new Foo();\nmyFoo.publicStuff();\n//all the assertions\n</code></pre>\n\n<p>However, I want to be able to test the <code>privateStuff()</code> method as its own unit. I'm not sure how I could go about calling it on it's own. I know with Java (with which I am much more familiar) you can use reflection to test private methods, but I'm wondering if there's any way to test these functions on their own. If there's no general way of doing this, I've started playing around with <a href=\"http://pivotal.github.com/jasmine/\" rel=\"nofollow\">Jasmine</a> to run my unit tests. Does this framework provide any capability for this?</p>\n"},{"tags":["android","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":154,"score":0,"question_id":10784174,"title":"Instrumentation.ActivityMonitor not monitoring Intent.ACTION_CALL","body":"<p>I have a simple test case for testing whether an outgoing call is initiated on a button click or not.</p>\n\n<pre><code>public void testCalling(){\n    IntentFilter callFilter = new IntentFilter();\n    callFilter.addAction(Intent.ACTION_CALL);\n    callFilter.addCategory(Intent.CATEGORY_DEFAULT);\n    callFilter.addDataScheme(\"tel:\");\n    ActivityMonitor mMonitor = new ActivityMonitor(callFilter, null, false);\n    getInstrumentation().addMonitor(mMonitor);\n\n    mSolo.clickOnText(\"CALL\");\n\n    assertTrue(0 &lt; mMonitor.getHits());\n    sendKeys(KeyEvent.KEYCODE_ENDCALL); \n}\n</code></pre>\n\n<p>Although the Intent is called(the outgoing call is made), my ActivityMonitor fails to register it.\nThe Stack trace is </p>\n\n<pre><code>05-28 17:11:09.183: I/ActivityManager(71): Starting activity: Intent { act=android.intent.action.CALL dat=tel:+xxxxxxx cmp=com.android.phone/.OutgoingCallBroadcaster }\n</code></pre>\n\n<p>Please help</p>\n\n<p>The only other resource that i could find was <a href=\"https://groups.google.com/forum/?fromgroups#!topic/android-developers/5OLGwZRn3zk\" rel=\"nofollow\">this discussion which ended without any solution</a> on android developers group </p>\n"},{"tags":["c#",".net","unit-testing","system.reactive"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1078,"score":0,"question_id":3915707,"title":"Unit testing for an event using Reactive Extensions","body":"<p>I'm using <a href=\"http://msdn.microsoft.com/en-us/devlabs/ee794896.aspx\" rel=\"nofollow\">Reactive Extensions for .NET (Rx)</a> to expose events as <code>IObservable&lt;T&gt;</code>. I want to create an unit test where I assert that a particular event is fired. Here is a simplified version of the class I want to test:</p>\n\n<pre><code>public sealed class ClassUnderTest : IDisposable {\n\n  Subject&lt;Unit&gt; subject = new Subject&lt;Unit&gt;();\n\n  public IObservable&lt;Unit&gt; SomethingHappened {\n    get { return this.subject.AsObservable(); }\n  }\n\n  public void DoSomething() {\n    this.subject.OnNext(new Unit());\n  }\n\n  public void Dispose() {\n    this.subject.OnCompleted();\n  }\n\n}\n</code></pre>\n\n<p>Obviously my real classes are more complex. My goal is to verify that performing some actions with the class under test leads to a sequence of events signaled on the <code>IObservable</code>. Luckily the classes I want to test implement <code>IDisposable</code> and calling <code>OnCompleted</code> on the subject when the object is disposed makes it much easier to test.</p>\n\n<p>Here is how I test:</p>\n\n<pre><code>// Arrange\nvar classUnderTest = new ClassUnderTest();\nvar eventFired = false;\nclassUnderTest.SomethingHappened.Subscribe(_ =&gt; eventFired = true);\n\n// Act\nclassUnderTest.DoSomething();\n\n// Assert\nAssert.IsTrue(eventFired);\n</code></pre>\n\n<p>Using a variable to determine if an event is fired isn't too bad, but in more complex scenarios I may want to verify that a particular sequence of events are fired. Is that possible without simply recording the events in variables and then doing assertions on the variables? Being able to use a fluent LINQ-like syntax to make assertions on an <code>IObservable</code> would hopefully make the test more readable.</p>\n"},{"tags":["python","unit-testing","celery"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":166,"score":1,"question_id":12078667,"title":"How do you unit test a Celery task?","body":"<p>The Celery documentation <a href=\"http://docs.celeryproject.org/en/latest/django/unit-testing.html\" rel=\"nofollow\">mentions testing Celery within Django</a> but doesn't explain how to test a Celery task if you are not using Django. How do you do this?</p>\n"},{"tags":["unit-testing","grails","groovy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12080273,"title":"Metaclass delete domain method in Grails 2 unit test","body":"<p>I am trying to test the throwing of an exception in my unit test.  I tried to metaclass the delete method, but it doesn't want to stick.  Can you tell from the code what I'm doing wrong?</p>\n\n<p>Unit Test code:</p>\n\n<pre><code>@TestFor(ProductController)\n@TestMixin(DomainClassUnitTestMixin)\nclass ProductControllerTests {     \n  void testDeleteWithException() {\n    mockDomain(Product, [[id: 1, name: \"Test Product\"]])\n    Product.metaClass.delete = {-&gt; throw new DataIntegrityViolationException(\"I'm an       exception\")}\n    controller.delete(1)\n    assertEquals(view, '/show/edit')\n}\n</code></pre>\n\n<p>Controller action code:</p>\n\n<pre><code>def delete(Long id) {\n    def productInstance = Product.get(id)\n    if (!productInstance) {\n        flash.message = message(code: 'default.not.found.message', args: [message(code: 'product.label', default: 'Product'), id])\n        redirect(action: \"list\")\n        return\n    }\n\n    try {\n        productInstance.delete(flush: true)\n        flash.message = message(code: 'default.deleted.message', args: [message(code: 'product.label', default: 'Product'), id])\n        redirect(action: \"list\")\n    }\n    catch (DataIntegrityViolationException e) {\n        flash.message = message(code: 'default.not.deleted.message', args: [message(code: 'product.label', default: 'Product'), id])\n        redirect(action: \"show\", id: id)\n    }\n}    \n</code></pre>\n\n<p>When I run the test, <code>productInstance.delete(flush: true)</code> does not throw the exception I'm expecting. Instead it redirects to <code>action: \"list\"</code>. Does anyone know how to override the Product.delete() method so I can force the exception?  </p>\n"},{"tags":["unit-testing","mstest","fakeiteasy"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12080035,"title":"FakeItEasy throwing NullReferenceException on MustHaveHappened - but only sometimes","body":"<p>We have a method being unit tested. Here's the method:</p>\n\n<pre><code>protected override void DoWork()\n{\n    bool success = false;\n    string logMessage = String.Empty;\n\n    try\n    {\n        LoggingComponent.LogTaskStarting( TaskLogCode, \"Purging PasswordResetRequest...\" );\n\n        UserStoreComponent.PurgePasswordResetRequest();\n        success = true;\n    }\n    catch( Exception ex )\n    {\n        Exception exceptionToLog = ex;\n\n        while( exceptionToLog != null )\n        {\n            logMessage += exceptionToLog.Message + \"&lt;br&gt;\";\n            exceptionToLog = exceptionToLog.InnerException;\n        }\n\n        throw;\n    }\n    finally\n    {\n        logMessage += String.Format( \"Purge PasswordResetRequest {0}.\", success ? \"Completed\" : \"Failed\" );\n        LoggingComponent.LogTaskComplete( TaskLogCode, logMessage, success );\n    }\n}\n</code></pre>\n\n<p>And here's the unit test:</p>\n\n<pre><code>public void DoWork_Success()\n{\n    UserStoreComponent userStoreComponent = A.Fake&lt;UserStoreComponent&gt;();\n    ILoggingComponent loggingComponent = A.Fake&lt;ILoggingComponent&gt;();\n\n    PrivateObject po = new PrivateObject(\n        new PurgePasswordResetRequestTask( userStoreComponent, loggingComponent ) );\n\n    po.Invoke( \"DoWork\" );\n\n    A.CallTo( () =&gt; loggingComponent.LogTaskStarting( \"PURGERESETREQUEST\", \"Purging PasswordResetRequest...\" ) )\n        .MustHaveHappened();\n    A.CallTo( () =&gt; loggingComponent.LogTaskComplete( \"PURGERESETREQUEST\", \"Purge PasswordResetRequest Completed.\", true ) )\n        .MustHaveHappened();\n\n    A.CallTo( () =&gt; userStoreComponent.PurgePasswordResetRequest() )\n        .MustHaveHappened();\n}\n</code></pre>\n\n<p>Sometimes, on the first call to MustHaveHappened(), we get a NullReferenceException from inside of FakeItEasy. Here's the stack trace.</p>\n\n<pre><code>FakeItEasy.Expressions.ExpressionCallMatcher.Matches(IFakeObjectCall call)\nFakeItEasy.Expressions.ExpressionCallRule.OnIsApplicableTo(IFakeObjectCall fakeObjectCall)\nFakeItEasy.Configuration.BuildableCallRule.IsApplicableTo(IFakeObjectCall fakeObjectCall)\nFakeItEasy.Configuration.RuleBuilder.RuleMatcher.Matches(IFakeObjectCall call)\nSystem.Linq.Enumerable.Count[TSource](IEnumerable`1 source, Func`2 predicate)\nFakeItEasy.Core.FakeAsserter.AssertWasCalled(Func`2 callPredicate, String callDescription, Func`2    repeatPredicate, String repeatDescription)\nFakeItEasy.Configuration.RuleBuilder.MustHaveHappened(Repeated repeatConstraint)\nFakeItEasy.FakeExtensions.MustHaveHappened(IAssertConfiguration configuration)\nDoWork_Success() in PurgePasswordResetRequestTaskTests.cs: line 25\n</code></pre>\n\n<p>We haven't been able to find a pattern at all. Sometimes it works locally, sometimes it fails. Sometimes it works in our build environment, sometimes it fails.</p>\n\n<p>I'm not really expecting an answer of \"Oh, there's your problem\", but any ideas of where else to look would be appreciated.</p>\n"},{"tags":["android","unit-testing","tdd","android-testing"],"answer_count":3,"favorite_count":29,"up_vote_count":23,"down_vote_count":0,"view_count":4514,"score":23,"question_id":2336488,"title":"Resources for TDD on Android","body":"<p>Anyone know of any good resources to get me started with test driven development on the Android platform?</p>\n"},{"tags":["ruby-on-rails-3","unit-testing","rvm","sublimetext2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":183,"score":0,"question_id":12078850,"title":"Gem Conflict Running Tests Inside Sublime Text 2 -- RVM issue?","body":"<p>Not quite sure what's changed in my setup, running tests inside Sublime Text 2 was working until recently ... Now, when I run an Rspec test from within Sublime Text 2 I get the following error. </p>\n\n<p>This looks to me like an RVM issue, since I created a gemset a while ago. Any ideas?</p>\n\n<p>Here's the error:</p>\n\n<pre><code>/Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:31:in `block in setup': You have already activated spork 0.9.2, but your Gemfile requires spork 0.9.0. Using bundle exec may solve this. (Gem::LoadError)\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:17:in `setup'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler.rb:107:in `setup'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/setup.rb:17:in `&lt;top (required)&gt;'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'\n    from /Users/brettsanders/rails_projects/sample_app/config/boot.rb:6:in `&lt;top (required)&gt;'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from /Users/brettsanders/rails_projects/sample_app/config/application.rb:1:in `&lt;top (required)&gt;'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from /Users/brettsanders/rails_projects/sample_app/config/environment.rb:2:in `&lt;top (required)&gt;'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from /Users/brettsanders/rails_projects/sample_app/spec/spec_helper.rb:8:in `block in &lt;top (required)&gt;'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@rails3tutorial2ndEd/gems/spork-0.9.2/lib/spork.rb:24:in `prefork'\n    from /Users/brettsanders/rails_projects/sample_app/spec/spec_helper.rb:6:in `&lt;top (required)&gt;'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from /Users/brettsanders/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from /Users/brettsanders/rails_projects/sample_app/spec/requests/static_pages_spec.rb:1:in `&lt;top (required)&gt;'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run'\n    from /Users/brettsanders/.rvm/gems/ruby-1.9.3-p0@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun'\n[Finished in 0.8s with exit code 1]\n</code></pre>\n\n<p>Also, \nHere's my Gemfile</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '3.2.8'\n\n# Bundle edge Rails instead:\n# gem 'rails', :git =&gt; 'git://github.com/rails/rails.git'\n\ngroup :development, :test do\n  gem 'sqlite3', '1.3.5'\n  gem 'rspec-rails', '2.10.0'\n  gem 'guard-rspec', '0.5.5'\nend\n\n\n# Gems used only for assets and not required\n# in production environments by default.\ngroup :assets do\n  gem 'sass-rails',   '3.2.4'\n  gem 'coffee-rails', '3.2.2'\n  gem 'uglifier',     '1.2.3'\nend\n\ngem 'jquery-rails', '2.0.2'\n\ngroup :test do\n  gem 'capybara', '1.1.2'\n  gem 'rb-fsevent', '0.4.3.1', :require =&gt; false\n  gem 'growl', '1.0.3'\n  gem 'guard-spork', '0.3.2'\n  gem 'spork', '0.9.0'\nend\n\ngroup :production do\n  gem 'pg', '0.12.2'\nend\n\n# To use ActiveModel has_secure_password\n# gem 'bcrypt-ruby', '~&gt; 3.0.0'\n\n# To use Jbuilder templates for JSON\n# gem 'jbuilder'\n\n# Use unicorn as the app server\n# gem 'unicorn'\n\n# Deploy with Capistrano\n# gem 'capistrano'\n\n# To use debugger\n# gem 'debugger'\n</code></pre>\n"},{"tags":["unit-testing","testing","mocking","bdd"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12065260,"title":"Creating easy to maintain tests","body":"<p>During a proposal about implementing unit tests for our projects, my manager argued that it could be more expensive to create unit tests since you will be maintaining two sets of code. His argument is whenever there is a change in requirement/functionality, the unit tests can be obsolete, hence the developers should update the tests in order to pass the automated build. He said that it can be inconvenient for the developers since their coding time might be reduced and spent fixing the tests.</p>\n\n<p>The reason I wanted to implement unit tests is to minimize bug occurence especially the critical ones before the codes are turned to validation team for functional test. I also believe that the cost of creating unit tests can be recovered by having better quality systems.</p>\n\n<p>Right now, his challenge to me is to create easy to maintain tests that would be easy to modify or if possible tests that will not break easily. I am using xUnit testing frameworks like JUnit and mocking frameworks like mockito and powermock to help in testing.</p>\n\n<p>I'm looking for tips and techniques on how to write easy to maintain tests or how to avoid brittle test. Are there other tools which can come handy in creating such tests. I'm writing codes in Java and C++. Thanks.</p>\n"},{"tags":["java","unit-testing","mocking","mockito","jmockit"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":119,"score":1,"question_id":12058662,"title":"Jmockit: mocking an method on returned interface (Mockito spy() equivalent)","body":"<p>I'm quite new to JMockit and I'm trying to find a way to do something that either I can't do or I don't understand how to do form the documentation. The equivalent is quite easy in Mockito. </p>\n\n<p>I have a number of real concrete classes that return instances referenced by their interface. For example:</p>\n\n<pre><code>final IAmAnInterface interf = \n    someRealClass.createMeAnInterfaceInstance(param1, param2, param3)\n</code></pre>\n\n<p>I want to mock one of the methods of the implementation of interf out so that it does something specific, but only later on in the test case, e.g. if I was dealing with classes rather than interfaces I'd use:</p>\n\n<pre><code>new Mockup&lt;ConcreteClassOfIAmAnInterface&gt;() {\n    @Mock\n    int someMethod() throws SomeException {\n        return 1+2+3+4+5; // my special value\n    }\n}\n</code></pre>\n\n<p>which works fine if I <em>know</em> what someRealClass will return, but if I replace \"ConcreteClassOfIAmAnInterface\" with \"IAmAnInterface\" then the method isn't mocked.</p>\n\n<p>If I were to use Mockito I would do something like:</p>\n\n<pre><code>final IAmAnInterface mock = spy(interf);\nwhen(mock.someMethod()).thenReturn(1+2+3+4+5);\n</code></pre>\n\n<p>Is there a nice way/any way to do this in JMockit?</p>\n"},{"tags":["c#","unit-testing","spreadsheet"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":140,"score":1,"question_id":10923910,"title":"How can I unit test complex spreadsheet behavior?","body":"<p>I've got a C# project that has most of it's complex behavior implemented as event handlers for a spreadsheet that the user interacts with. </p>\n\n<p>I'm familiar with testing code, but I'm not sure how to test complex behavior of a spreadsheet (like adding and removing rows or calling 3rd party components when the user changes a cell's value). Not only is the coded behavior entangled with spreadsheet behavior, but I also can't get the spreadsheet events to fire when changing its values programmatically. I don't know what to mock since it's not really broken into different classes either. </p>\n\n<p>Is there a Selenium for WinForms or some other way to do this?</p>\n"},{"tags":["unit-testing","qt4","qt-creator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12071913,"title":"Qt: Linker error with QVERIFY (Qt Unit Tests)","body":"<p>Basically I am following the basic example <a href=\"http://doc.qt.nokia.com/4.7-snapshot/qtestlib-tutorial1.html\" rel=\"nofollow\">here</a>. My <code>.pro</code> file contains <code>QT += core network qtestlib</code>. [Solved] <strong>testlib</strong> instead of typo qtestlib</p>\n\n<p>When I include <code>QVERIFY</code>, It get the following linker error:</p>\n\n<pre><code>testwaypointlist.obj:-1: error: LNK2019: unresolved external symbol \"bool __cdecl\nQTest::qVerify(bool,char const *,char const *,char const *,int)\"\n(?qVerify@QTest@@YA_N_NPBD11H@Z) referenced in function \"private: void __thiscall\nTestWaypointList::fillWaypoints(void)\" (?fillWaypoints@TestWaypointList@@AAEXXZ)\n</code></pre>\n\n<p><strong>What files do I miss to link?</strong> Without <code>QVERIFY</code> the linker error disappears.</p>\n\n<p>Header file:</p>\n\n<pre><code>#include &lt;QObject&gt;\n#include &lt;QtTest/QtTest&gt;\n#include \"waypointlist.h\"\n\n//\n// Testing the waypoint list\n//\nclass TestWaypointList : public QObject\n{\n    Q_OBJECT\n\nprivate:\n    WaypointList _waypointList;\npublic:\n    explicit TestWaypointList(QObject *parent = 0);\nprivate slots:\n    void fillWaypoints();\n};\n</code></pre>\n\n<p>cpp:</p>\n\n<pre><code>//\n// Fill the waypoint list\n//\nvoid TestWaypointList::fillWaypoints()\n{\n    _waypointList = WaypointList();\n    .....\n\n    for (int i=0; i &lt; TESTWPLISTCOUNT; i++) {\n        .....\n        TestWaypointList::_waypointList.updateOrAppend(id, timeframe);\n    }\n    QVERIFY(TestWaypointList::_waypointList.count() == 1); // causing the linker error\n}\n</code></pre>\n"},{"tags":["visual-studio-2010","unit-testing","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":759,"score":6,"question_id":5439719,"title":"Is it possible to use the logical call context within a unit test in VS 2010?","body":"<p>Is it possible to make this test not throw an exception? It appears that adding any non-GACed class into the logical call context causes an exception to be thrown in line 2 of the test.</p>\n\n<blockquote>\n  <p>Test\n  'TestProject1.UnitTest1.TestMethod1'\n  failed: Test method\n  TestProject1.UnitTest1.TestMethod1\n  threw exception: \n  System.Configuration.ConfigurationErrorsException:\n  An error occurred loading a\n  configuration file: Type is not\n  resolved for member\n  'TestProject1.Bar,TestProject1,\n  Version=1.0.0.0, Culture=neutral,\n  PublicKeyToken=null'. --->\n  System.Runtime.Serialization.SerializationException:\n  Type is not resolved for member\n  'TestProject1.Bar,TestProject1,\n  Version=1.0.0.0, Culture=neutral,\n  PublicKeyToken=null'.</p>\n</blockquote>\n\n<pre><code>namespace TestProject1 {\n    [ Serializable]\n    public class Bar {\n\n    }\n\n    [TestClass]\n    public class UnitTest1 {\n        [TestMethod]\n        public void TestMethod1() {\n            CallContext.LogicalSetData(\"foo\", new Bar());\n            ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None );\n        }\n    }\n}\n</code></pre>\n\n<p>WHY?!?!?</p>\n"},{"tags":["objective-c","ios","unit-testing","automatic-ref-counting"],"answer_count":4,"favorite_count":4,"up_vote_count":11,"down_vote_count":0,"view_count":673,"score":11,"question_id":8675054,"title":"Why is my object's weak delegate property nil in my unit tests?","body":"<p>I have a pretty simple setup for this unit test. I have a class that has a delegate property:</p>\n\n<pre><code>@interface MyClass : NSObject\n...\n@property (nonatomic, weak) id&lt;MyDelegateProtocol&gt; connectionDelegate;\n...\n@end\n</code></pre>\n\n<p>and I set the delegate in my test:</p>\n\n<pre><code>- (void)testMyMethod_WithDelegate {\n  id delegate = mockDelegateHelper(); // uses OCMock to create a mock object\n  [[delegate expect] someMethod];\n  myClassIvar.connectionDelegate = delegate;\n  [myClass someOtherMethod];\n  STAssertNoThrow([delegate verify], @\"should have called someMethod on delegate.\");\n}\n</code></pre>\n\n<p>But the delegate is not actually set on line 3 of my unit test, so #someMethod is never called. When I change it to</p>\n\n<pre><code>myClassIvar.connectionDelegate = delegate;\nSTAssertNotNil(myClassIvar.connectionDelegate, @\"delegate should not be nil\");\n</code></pre>\n\n<p>it fails there. I'm using ARC, so my hunch was that the weak property was being deallocated. Sure enough, changing it to <code>strong</code> makes the <code>STAssertNotNil</code> pass. But I don't want to do that with a delegate, and I don't understand why that makes a difference here. From what I've read, all local references in ARC are <code>strong</code>, and <code>STAssertNotNil(delegate)</code> passes. Why is my weak delegate property nil when the same object in a local variable is not?</p>\n"},{"tags":["java","android","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12073348,"title":"Unit Test AutocompleteTextView - adapter objects missing","body":"<p>I am writing a <code>unit test</code> to verify my <code>AutocompleteTextView</code> is being populated and selected correctly.</p>\n\n<p>Every other run of my <code>unit test</code>, there is a value missing from the <code>adapter</code>. </p>\n\n<p>I'm expecting to see two strings <code>\"new consumable\"</code> and <code>\"test consumable\"</code></p>\n\n<p>When I debug, I can see the mObjects only has <code>0:\"test consumable\"</code> and <code>position 1 is nul</code>l.</p>\n\n<p>however the <code>ArrayAdapter</code> field mOriginalValues has both required strings.</p>\n\n<p>in my activity I create the adapter as such</p>\n\n<pre><code>List&lt;String&gt; names = Arrays.asList(\"new consumable\", \"test consumable\");\nArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_list_item_1, names);\ntView.setAdapter(adapter);\ntView.setThreshold(3);\n</code></pre>\n\n<p>in my unit test i do the following:</p>\n\n<pre><code>Instrumentation instrumentation = getInstrumentation();\nAutoCompleteTextView tView = (AutoCompleteTextView) activity.findViewById(R.id.et_consumable);\nArrayAdapter&lt;String&gt; adapter = (ArrayAdapter&lt;String&gt;) tView.getAdapter();\n\nLog.i(\"ingredient\", \"adapter size: \" + adapter.getCount());\nfor (int i = 0; i &lt; adapter.getCount(); i++) {\n  Log.i(\"consumable\", \"item at position \" + i + \": \" + adapter.getItem(i));\n}\n</code></pre>\n\n<p>and i can see there is only one item:\n    adapter size: 1\n    item at position 0: test consumable</p>\n\n<p>there are no filters attached to the adapter and as i say, the problem seems to be intermittent - some test executions work fine.</p>\n\n<p>thanks for any assistance.</p>\n"},{"tags":["c#","unit-testing","tdd","mstest"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12053361,"title":"Unit testing web service methods","body":"<p>I am currently writing an application which is kind of a proxy between the end-user and a web service.  </p>\n\n<p>The user requests a service, and the application calls the web service method with appropriate parameters set, and returns the result.  </p>\n\n<p>To make sure nothing went wrong, I have decided to create unit tests for the project (Yep! I know it's a bit late to do it <em>after</em> writing the code. I'll write the unit-tests first next time).  </p>\n\n<p>in these unit tests, I have to make real requests to the web service to be sure no permission exception, service-related exception, etc is raised. Therefore extracting an interface and mocking the service for testing is not going to help. Is it acceptable to write unit tests, that actually call the real web service?  </p>\n\n<p>Is it possible to have a delay between two tests if my web service just allows for example one request per minute?</p>\n"},{"tags":["unit-testing","solr","solrj"],"answer_count":3,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":5033,"score":7,"question_id":936723,"title":"Testing Solr via Embedded Server","body":"<p>I'm coding some tests for my solr-indexer application. Following testing best practices, I want to write code self-dependant, just loading the <code>schema.xml</code> and <code>solrconfig.xml</code> and creating a temporary data tree for the indexing-searching tests.\nAs the application is most written in java, I'm dealing with SolrJ library, but I'm getting problems (well, I'm lost in the universe of corecontainers-coredescriptor-coreconfig-solrcore ...)\nAnyone can place here some code to create an Embedded Server that loads the config and also writes to a parameter-pased data-dir?</p>\n"},{"tags":["unit-testing","ilog","jrules"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":196,"score":1,"question_id":11861803,"title":"How to test ILOG JRules Ruleset without using DVS?","body":"<p>I'm trying to use JRules BRMS 7.1 for a project. And I found out that DVS has some limitation in testing Ruleset. </p>\n\n<p>It is that it cannot test the content in <strong>collections of complex type</strong> in Excel scenario file templates. </p>\n\n<p>But I understand it is normal as that kind of content is too complex for an Excel table format.</p>\n\n<p>So anyone has any idea what is the best way to test a ruleset that need tons of test cases with lots of complex type input without using DVS?</p>\n"},{"tags":["java","unit-testing","testing","sleep"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1603,"score":5,"question_id":1868637,"title":"Testing with Thread.sleep","body":"<p>What are the recommended approaches to using <code>Thread.sleep()</code> to speed up tests.</p>\n\n<p>I am testing a network library with a retry functionality when connections are dropped or timeout errors occur, etc.  The library however, uses a <code>Thread.sleep()</code> between the retries (so it won't connect thousands times while the server is restarting).  The call is slowing the unit tests significantly, and I wonder what the options are to override it.</p>\n\n<p>Note, I'm open to actually changing the code, or using a mocking framework to mock Thread.sleep(), but would like to hear your opinions/recommendation first.</p>\n"},{"tags":["unit-testing","scala","playframework-2.0","specs2"],"answer_count":2,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":354,"score":5,"question_id":12028218,"title":"running multiple tests within the same FakeApplication() in play 2.0 scala","body":"<p>I am trying to learn the unit tests in Play scala, but I am running into some issues. I am trying to run several tests on my models layer like this:</p>\n\n<pre><code>\"User Model\" should {\n    \"be created and retrieved by username\" in {\n        running(FakeApplication()) {\n            val newUser = User(username = \"weezybizzle\",password = \"password\")\n            User.save(newUser)\n            User.findOneByUsername(\"weezybizzle\") must beSome\n        }\n    }\n    \"another test\" in {\n        running(FakeApplication()) {\n            // more tests involving adding and removing users\n        }\n    }\n}\n</code></pre>\n\n<p>However when doing things this way, I fail to connect to the database on the second unit test, saying that the connection is closed. I tried to solve this by enclosing all the code in a block that runs on the same fake application, but that didn't work either.</p>\n\n<pre><code>  running(FakeApplication()) {\n    \"be created and retrieved by username\" in {\n        val newUser = User(username = \"weezybizzle\",password = \"password\")\n        User.save(newUser)\n        User.findOneByUsername(\"weezybizzle\") must beSome\n    }\n    \"another test\" in {\n        // more tests involving adding and removing users\n    }\n  }\n</code></pre>\n"},{"tags":["c++","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":8691832,"title":"Isolating unit tests","body":"<p>Generally speaking good OO practices are enough to keep unit tests separate.  However, when things go really bad by causing a program crash, corrupting memory space, etc things can spill over to adjoining tests and give misleading results or simply be annoying in that it brings down the testing framework.  Does anyone know of any existing unit test frameworks that have a high level of isolation to protect against this sort of thing?  As an example, a simple approach would be to execute one fixture at a time on the command line but I'd be afraid it would be difficult to aggregate the results nicely.  The C++ project that I wanted this for currently is in cppunit but I'm not dead set on that framework if something like the Google Test Framework or CTest have this sort of support.  I briefly look at those two and I don't think i saw anything with that sort of strict isolation.  I'm mostly interested in Linux but cross-platform would be ideal.</p>\n\n<p>In any case I played around with a small Linux (and probably others) proof of concept using cppunit if someone is interested.  Find the files at \n<a href=\"https://github.com/JohnDMcMaster/uvudec/tree/master/uvudec/testing/framework\" rel=\"nofollow\">https://github.com/JohnDMcMaster/uvudec/tree/master/uvudec/testing/framework</a>\nYou'll want helper_macros.*, serialized_test_result.*, and test_caller.*</p>\n"},{"tags":["unit-testing","groovy","metaprogramming"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":12054575,"title":"Best way to mock filewriter","body":"<p>I want to test the following method and specifically that write and close methods were called (In the case of write check what was written was what I expected). The true source code is Java and I am writing my test in Groovy. I can't use map coercion because there is no default constructor. I tried mockFor and metaClass but I can only get those working when I change the source to groovy and my unit test in groovy. Do I have any groovy options to test this code? Code below is groovy but the java method source is very similar. A real header is generated, some date logic is performed, and then the results are written.</p>\n\n<pre><code>class TestWriter {\n    protected void writeResultToXMLFile(String response,FileWriter fw, Date today){\n        String header = \"header\";\n        try{\n            fw.write(header);\n            fw.close();\n        } catch (IOException ioe){\n            String errorMessage = \"Unable to write to file\";\n            try{\n                fw.close();\n            }catch (IOException ioException){\n                errorMessage += \", Error attempting to close the file\";\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12063201,"title":"Moq in unit Testing","body":"<p>Let us say I have a Service </p>\n\n<pre><code>public interface IAreaService\n{\n   int CalculateArea(int x,int y);\n   int CalculateAreaTimesX(int x, int y, int ammount);\n}\n\npublic class AreaService : IAreaService\n{\n    public int CalculateArea(int x,int y)\n    {\n        return x*y;\n    }\n\n    public int CalculateAreaTimesX(int x, int y, int ammount)\n    {\n        return CalculateArea(x, y)*ammount;\n    }\n}\n</code></pre>\n\n<p>With the relevant Unit tests</p>\n\n<pre><code>[TestMethod]\n    public void AreaService_GetArea_Test()\n    {\n        AreaService service = new AreaService();\n        int expected = 9;\n        int actual  = service.CalculateArea(3, 3);\n        Assert.AreEqual(expected,actual,\"The Calculate area does not work as expected\");\n    }\n\n    [TestMethod]\n    public void AreaService_GetAreaMultiplyByX_TestTrueValue()\n    {\n        AreaService service = new AreaService();\n        int expected = 27;\n        int actual = service.CalculateAreaTimesX(3, 3, 3);\n        Assert.AreEqual(expected,actual);\n    }\n</code></pre>\n\n<p>Ok, so after running the Unit tests. I am sure that my method in question is working and life should be great.</p>\n\n<p>But now I want to use the IAreaService in another class, and this is where i lose the light. Here is the implementation of the other class.</p>\n\n<pre><code>public class PriceCalculatorService\n{\n    private readonly IAreaService _areaService;\n    public PriceCalculatorService(IAreaService areaService)\n    {\n        _areaService = areaService;\n    }\n\n\n    public double GetPrice(int x, int y, int times, double price)\n    {\n       return  _areaService.CalculateAreaTimesX(x, y, times)*price;\n    }\n}\n</code></pre>\n\n<p>If I ran the following unit test (My idea might be wrong on mocking here, and this is where the question comes in.</p>\n\n<pre><code>[TestMethod]\n    public void PriceCalculatorService_GetPrice_Test()\n    {\n        var IAreaServiceMock = new Mock&lt;IAreaService&gt;();\n        IAreaServiceMock.Setup(ism =&gt; ism.CalculateAreaTimesX(2, 2, 2)).Returns(8);\n        PriceCalculatorService priceCalc = new PriceCalculatorService(IAreaServiceMock.Object);\n\n        double expected = 20;\n        double actual = priceCalc.GetPrice(2, 2, 2, 2.50);\n        Assert.AreEqual(expected,actual);\n    }\n</code></pre>\n\n<h1>Question</h1>\n\n<p>When i run all the unit tests mentioned above then everything is good. All of them pass. But let us say i need for some reason to change the AreaService.Calculate() method to the following </p>\n\n<pre><code>public int CalculateArea(int x,int y)\n{\n    return x*y+2;\n}\n</code></pre>\n\n<p>This means that my Unit test \"AreaService_GetArea_Test()\" will fail, like it should, but because of the Mocking used in the \"PriceCalculatorService_GetPrice_Test()\" test will still pass, because it seems that when you mock a Service then the actual code is not used(obviously). So my\nPriceCalculatorService_GetPrice_Test is useless. But I use a stub then the unit test will fail, because it should. </p>\n\n<p>So when to Mock, and when not to Mock ?</p>\n"},{"tags":["unit-testing","testing","tdd","integration-testing","bdd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12058594,"title":"Ruby - A pragmatic approach to software testing using TDD/BDD","body":"<p>Although TDD/BDD is ideal and as time is limited, you cannot always have 100% test coverage and always write test before implementing features, so, what is your approach to have a well tested project under a tight schedule?</p>\n\n<p>My initial thinking is:</p>\n\n<ol>\n<li>Acceptance tests using RSpec</li>\n<li>Development</li>\n<li>Back to 1</li>\n</ol>\n\n<p>After several iterations of Acceptance tests / development cycles then I will add</p>\n\n<ol>\n<li>Integration tests</li>\n</ol>\n\n<p>Finally ship to QA for manual testing, if a bug was found, then add </p>\n\n<ol>\n<li>Unit tests </li>\n</ol>\n\n<p>Do you think the above work flow reasonable?</p>\n"},{"tags":["unit-testing","boost","shared-ptr"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12061984,"title":"wield boost_check results","body":"<p>the same boost_check command gives me different results in different files.</p>\n\n<p>I have the same following code in three different files.</p>\n\n<pre><code> boost_check (\"bb\" &lt; \"bbb\" )  ;\n</code></pre>\n\n<p>While two of them pass, one of them failed.  the one that didn't pass associate with a class using boost::shared_ptr (v:1_41_0);</p>\n\n<p>Can anyone help me on this?  </p>\n"}]}
{"total":15323,"page":19,"pagesize":100,"questions":[{"tags":["c++","xcode","unit-testing","googletest"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":139,"score":3,"question_id":11925644,"title":"How do I view the colorized output of Google Test in Xcode in the \"All Output\" window?","body":"<p>I'm new to Xcode (and Macs in general) and am trying to port some of my code base over to run on both OS X and iOS.  I have a large set of unit tests written against the Google C++ Testing Framework (Google Test).  I successfully compiled the framework and I can run some tests, but I'm unsure how to view the colorized output from within Xcode.</p>\n\n<p>I'm used to hitting \"Run\" in Visual Studio and immediately seeing a console window (with colors) letting me know at a glance if the tests passed or failed.</p>\n\n<p>I've managed to set up a \"Run Script\" \"Build Phase\" but that seems to only output to the Log Navigator which obliterates the colors and even the fixed-width output making it very difficult to see at a glance if the tests pass.  I also can't find a way to display the log after running the tests.  When I do this nothing appears in the \"All Output\" window.</p>\n\n<p>I've played around with XcodeColors but that doesn't seem to work with scripts that use the ANSI color codes.</p>\n\n<p>At this point I wouldn't be surprised if this simply can't be done within Xcode.  That would be ideal, but if it isn't, is it possible to create a \"Run Script\" that will run the tests in an independent Terminal window?  Colors work fine there.</p>\n\n<p>Thanks for any help!</p>\n"},{"tags":["django","unit-testing","tdd","nosetests"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":738,"score":2,"question_id":3785369,"title":"Django load test fixtures with django-nose","body":"<p>How do you load test fixtures using the <a href=\"http://github.com/jbalogh/django-nose\" rel=\"nofollow\">django-nose</a> test runner?</p>\n"},{"tags":["unit-testing","hudson","gallio"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1023,"score":1,"question_id":5107537,"title":"Jenkins/Hudson and Gallio Unit-Testing Integration","body":"<p>I am struggling to get it to run my tests. In the Execute Windows batch command on Jenkins, I have put the following command:</p>\n\n<pre><code>C:\\Program Files (x86)\\Gallio\\bin\\Gallio.Echo.exe\" /report-type:Html /verbosity:quiet “Project.Tests\\bin\\Release\\*.Tests.dll\n</code></pre>\n\n<p>It doesn't like the <code>*.Tests.dll</code> bit, in that it says:</p>\n\n<p>Cannot find directory containing file pattern <code>Project.Tests\\bin\\Release\\*.Tests.dll</code>.</p>\n\n<p>My next question would be if I change the report-type to xml, is it straight forward to get my unit test reports published in hudson?</p>\n\n<p>many thanks.</p>\n"},{"tags":["spring","unit-testing","spring-webflow","easymock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":182,"score":0,"question_id":11705438,"title":"Testing Spring Webflow Action Classes","body":"<p>I am writing test case for my webflow using <code>org.springframework.webflow.test.execution.AbstractXmlFlowExecutionTests</code></p>\n\n<pre><code>public class MyFlowExecutionTests extends AbstractXmlFlowExecutionTests {\n}\n</code></pre>\n\n<p>In some cases my logic is simple, So I invoke my service layer directly from the Spring webflow.\nIn some cases I use an extenstion of  org.springframework.webflow.action.MultiAction classes and I invoke my service layer from the action classes.</p>\n\n<p>In the first scenario, wrting test case is straight forward. In the second scenario, I found it really complex to write the test cases using org.springframework.webflow.test.execution.AbstractXmlFlowExecutionTests for the Action class.\nIn the first scenario, I can mock all the service classes used from my flow. In the second scenario, using easy mock class extension, I can mock the action class. But then I need to mock the service layers used inside, which I think mock can't handle that well.</p>\n\n<p>I am now thinking of somehow moving the Action class code to Spring EL. Or Anybody have a better idea for testing the action class code along with webflow code?</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12046965,"title":"PHPUnit: Is it possible to add data sets containing the same tables into a composite data set?","body":"<p>According to the PHPUnit documentation (http://www.phpunit.de/manual/3.7/en/database.html#understanding-datasets-and-datatables), we can add datasets containing the same table into a composite data set, and \"When several datasets contain the same table the rows are appended in the specified order\".  However, within the PHPUnit_Extensions_Database_DataSet_CompositeDataSet::addDataSet() method, it has the following code:</p>\n\n<pre><code>    foreach ($dataSet-&gt;getTableNames() as $tableName)\n    {\n        if (in_array($tableName, $this-&gt;getTableNames()))\n        {\n            throw new InvalidArgumentException(\"DataSet contains a table that already exists: {$tableName}\");\n        }\n    }\n\n    $this-&gt;dataSets[] = $dataSet;\n</code></pre>\n\n<p>Am I missing something or is the documentation incorrect??</p>\n"},{"tags":["c#","unit-testing","nhibernate","fluent-nhibernate","moq"],"answer_count":4,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":722,"score":6,"question_id":4868469,"title":"Unit testing and nhibernate?","body":"<p>I am wondering how to get around this. I am using nhibernate and fluent.</p>\n\n<p>I have a domain class like this</p>\n\n<pre><code>public class User\n{\n   public virtual int UserId {get; private set;}\n}\n</code></pre>\n\n<p>this seems to be the convention when doing nhibernate as it stops people from setting and id as it is auto generated.</p>\n\n<p>Now the problem comes when I am unit testing.</p>\n\n<p>I have all my nhibernate code in a repo that I mock out so I am only testing my service layer. The problem comes when this happens.</p>\n\n<pre><code>User user = repo.GetUser(email);\n</code></pre>\n\n<p>this should return a user object.</p>\n\n<p>So I want to use moq to do this</p>\n\n<pre><code>repo.Setup(x =&gt; x.GetUser(It.IsAny&lt;string&gt;())).Return(/* UserObject here */)\n</code></pre>\n\n<p>now here is the problem </p>\n\n<p>I need to make that User object and put it in the Return part.</p>\n\n<p>So I would do something like</p>\n\n<pre><code>User user =  new User()\n{\n   UserId = 10,\n}\n</code></pre>\n\n<p>But this is where the problem lies I need to set the Id because I actually use it later on to do some linq on some collections(in the service layer as it is not hitting my db so it should not be in my repo) so I need to have it set but I can't set it because it is a private set.</p>\n\n<p>So what should I do? Should I just remove the private or is there some other way?</p>\n"},{"tags":["c#",".net","visual-studio-2010","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":109,"score":0,"question_id":12061774,"title":"Visual Studio Unit Testing Assert.AreEqual Fails with Identical Expected and Actual Values","body":"<p>I am a total newb when it comes to Unit Testing, so please pardon me if this is total ignorance.  But I can't get this method to pass a unit test even if I provide the exact same values for the expected and actual.  When I set breakpoints and step through, I have confirmed that both expected and actual variables are a string array containing two items, blah and blah.  But the test still fails every time stating that \"Assert.AreEqual failed. Expected: System.String[] Actual:System.String[]\"</p>\n\n<pre><code>namespace TestProject1\n\n{\n public class Testing\n {\n    public string[] PMDate(string lastPm)\n    {\n        if (string.IsNullOrEmpty(lastPm))\n            return new []{\"blah\", \"blah\"};\n        string[] results = lastPm.Split(new[] {\" \"}, StringSplitOptions.None);\n\n        if (results.Length &lt; 2)\n            return new[] {\"blah\", \"blah\"};\n\n        return results;\n    }\n }\n[TestClass()]\npublic class UnitTest1\n{\n    [TestMethod()]\n    public void PmDateTest()\n    {\n        Testing test = new Testing();\n        string[] expected = test.PMDate(\"01/01/1900\");\n        string[] actual = test.PMDate(\"01/01/1900\");\n        Assert.AreEqual(expected, actual);\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["php","javascript","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":224,"score":5,"question_id":10902544,"title":"Unit Testing Javascript Code Inlined Within PHP","body":"<p>At work I've been tasked with unit testing our Javascript code. I settled upon the Jasmine unit testing framework and began to learn how to use it when I was informed that we were now inline our Javascript code within PHP and not even using Javascript files any longer.</p>\n\n<p>Can Jasmine work around this? Is there another framework that could? Should I be using a PHP unit test and a Javascript unit test? What would be my best approach?</p>\n\n<p>Some example code from a fairly basic page to give you an idea:</p>\n\n<p><a href=\"http://pastebin.com/K3YP33id\">http://pastebin.com/K3YP33id</a></p>\n\n<p><a href=\"http://pastebin.com/QaR8zUh1\">http://pastebin.com/QaR8zUh1</a> &lt;---submit</p>\n\n<p>any sort of insight would be greatly appreciated</p>\n"},{"tags":["javascript","unit-testing","buster.js"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":12061654,"title":"A Good Example On How to Use BusterJs Resource Config Option?","body":"<p>I'm looking for a good example that shows how to use busterJS's <code>resource</code> property in the <code>buster.js</code> config file to include a .json file in a test case.</p>\n\n<p>From the documentation:</p>\n\n<blockquote>\n  <p><strong>resources</strong></p>\n  \n  <p>Additional resources that will be made available for test runs, but not explicitly loaded. Value is an array of resources. Resources are served from a context path on the server. To request a resource in your test runs, you need to scope resource paths with <code>buster.env.contextPath</code>. The resource /some/cookies.json can be requested as <code>jQuery.get(buster.env.contextPath + \"/some/cookies.json\")</code>;</p>\n</blockquote>\n\n<p><a href=\"http://busterjs.org/docs/configuration/#resource\" rel=\"nofollow\">It also states:</a></p>\n\n<blockquote>\n  <p>A \"resource\" is something exposed on the server when you run browser\n  tests using buster-server and buster-test. Exposing the resource\n  <code>/something.json</code> allows you to request it in your tests using e.g.\n  <code>jQuery.ajax({ url: \"something.json\" });</code>.</p>\n</blockquote>\n\n<p>And here's the example they give:</p>\n\n<pre><code>    config[\"Browser build tests\"] = {\n    environment: \"browser\",\n    libs: [\"lib/**.js\"],\n    resources: [\n        \"src/**.js\",\n        { path: \"/mylib.min.js\",\n          combine: [\"src/base.js\", \"src/dom.js\"] }\n    ],\n    sources: [\"/mylib.min.js\"],\n    tests: [\"test/**.js\"]\n};\n</code></pre>\n\n<p>However, they don't give a solid example of using the JSON file in a unit test. When I've tried following their examples, jQuery throws a 404 when I try doing <code>jQuery.ajax({ url: \"[my-file-name-here]\" })</code>.</p>\n\n<p>Has anyone ever successfully used this feature?</p>\n"},{"tags":["c++","unit-testing","boost","boost-test"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12061186,"title":"boost unit test cpp file can not see one object file in a library","body":"<p>I have a test.cpp file, written for using boost unit test.  </p>\n\n<pre><code>test.cpp :\n#define BOOST_TEST_DYN_LINK\n#include &lt;boost/test/unit_test.hpp&gt; \n.........\n</code></pre>\n\n<p>I am trying to linking this test.cpp with a library named liba.</p>\n\n<pre><code>g++ test.cpp -L/liba_directory -la  \n</code></pre>\n\n<p>keeps giving error message that one class in my liba is not declared.  At the same time, another class in the same library can be found.</p>\n\n<p>as a positive control, I linked this library with my main file, which works fine.</p>\n\n<pre><code>g++ main.cpp -L/liba_directory -la\n</code></pre>\n\n<p>passes compilation perfectly fine.  </p>\n\n<p>Looks like files for one specific class in my compiled library can't be seen by my test file, but perfectly accessible for my main file.  Can anyone give me some suggestions? </p>\n"},{"tags":["sqlite","unit-testing","sql-server-ce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12059340,"title":"Using SqlCe as a database and unit tests with Sqlite","body":"<p>At the moment I am using SqlCe as a database for my project and doing unit tests with Sqlite because of its simplicity(Such as allow to use Inmemory). I just wonder, in the future this may lead to a dispute or oddity?</p>\n"},{"tags":["java","unit-testing","xpath","selenium","selenium-xpath"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":4971,"score":2,"question_id":1711013,"title":"XPath, Selenium: Element is found in XPath checker but not in Selenium?","body":"<p>I have the following XPath:</p>\n\n<pre><code>//div[contains(@id, 'box')]/div/h4/small/a[contains(@href, 'google')]/@href\n</code></pre>\n\n<p>When I try out this XPath in XPath Checker (Firefox extension), it works perfectly all the time. But when I do the following in Selenium:</p>\n\n<pre><code>System.out.println(selenium.getAttribute(\"//div[contains(@id, 'box')]/div/h4/small/a[contains(@href, 'google')]/@href\"));\n</code></pre>\n\n<p>It keeps giving me the following log error:</p>\n\n<pre><code>14:30:56.311 INFO - Got result: OK on session 5a1401d374a04779bbe6f7fe9a0b4536\n14:30:56.315 INFO - Command request: getAttribute[//div[contains(@id, 'box')]/div/h4/small/a[contains(@href, 'google')]/@href, ] on session 5a1401d374a04779bbe6f7fe9a0b4536\n14:30:56.372 INFO - Got result: ERROR: Element //div[contains(@id, 'box')]/div/h4/small/a[contains(@href, 'google')]/ not found on session 5a1401d374a04779bbe6f7fe9a0b4536\n</code></pre>\n\n<p>I am going crazy to solve this problem. Does anyone see any mistake that I have in my code line?</p>\n"},{"tags":["spring","unit-testing","spring-mvc","spring-test"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1636,"score":1,"question_id":10636569,"title":"Unit testing REST Controller with spring-test-mvc","body":"<p>I have upgraded my Spring dependency to Spring 3.1.1.RELEASE and I'm trying to use <a href=\"https://github.com/SpringSource/spring-test-mvc\" rel=\"nofollow\">spring-test-mvc</a> to unit test a simple Controller.  I have been following the technique used in <a href=\"http://stackoverflow.com/questions/9155527/spring-rest-controller-test-with-spring-test-mvc-framework\">Spring REST Controller Test with spring-test-mvc framework</a>, since it seems to have worked for that person, but I have been unsuccessful so far.  I think there's some key configuration I\"m missing in my test context file.</p>\n\n<p>I get no errors.  The reason I know it's not working is because <code>Hello World</code> never gets printed (see Controller).  What am I missing here?</p>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>@Controller\n@RequestMapping(\"/debug\")\npublic class DebugOutputController {\n\n    @RequestMapping(method = RequestMethod.POST)\n    public void saveDebugOutput(@RequestBody DebugOutput debugOutput, HttpServletResponse response) {\n        System.out.println(\"Hello World\");\n    }\n}\n</code></pre>\n\n<p><strong>Test Class:</strong></p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class) //this lets tests access Spring beans defined in the context config file\n@ContextConfiguration(locations={\"file:src/test/resources/itest/restAPITestContext.xml\"}) //tells the test where to get configuration and beans to be used by the test.\n@TestExecutionListeners({DependencyInjectionTestExecutionListener.class,  TransactionalTestExecutionListener.class}) //overrides the default stack of listeners\npublic class ITRestAPI{\n\n@Autowired\nprivate DebugOutputController debugOutputController;\n\nprivate MockMvc mockMvc;\n\n@Before\npublic void setUp() throws Exception {\n    mockMvc = MockMvcBuilders.standaloneSetup(debugOutputController).build();\n}\n\n@After\npublic void tearDown() throws Exception {\n}\n\n@Test\npublic void shouldPerformPost() throws Exception {\n    this.mockMvc.perform(post(\"/debug\"));\n}\n}\n</code></pre>\n\n<p><strong>restAPITestContext.xml:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n   xmlns:context=\"http://www.springframework.org/schema/context\"\n   xsi:schemaLocation=\"\n    http://www.springframework.org/schema/mvc \n    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n    http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-3.1.xsd\"&gt;\n\n    &lt;mvc:annotation-driven /&gt;\n    &lt;mvc:default-servlet-handler /&gt;\n    &lt;context:component-scan resource-pattern=\"*DebugOutputController*\" base-package=\"com.company.project.servlet\" /&gt;    \n\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["ruby-on-rails","oracle","unit-testing","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12058173,"title":"Connecting to 2 databases during unit testing results in error","body":"<p>I've started a form that submits to a PostgresSQL database and I've done numerous tests on my models to verify my validation. However, I created a custom validator which checks a legacy Oracle database to verify that a license number provided in a form by an end-user exists in the legacy database. Via the command line debugger, I can verify that the library I created connects to the database and returns results and that the custom validator causes the model to be invalid if the criteria isn't met. However, when I run my unit tests against my model, an error occurs when the tests run. If I remove the custom validation, the tests run pass.</p>\n\n<pre><code>PG::Error: ERROR:  relation \"LICENSE\" does not exist\n      LINE 4:              WHERE a.attrelid = '\"LICENSE\"'::regclass\n                                              ^\n      :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull\n                    FROM pg_attribute a LEFT JOIN pg_attrdef d\n                      ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n                   WHERE a.attrelid = '\"LICENSE\"'::regclass\n                     AND a.attnum &gt; 0 AND NOT a.attisdropped\n                   ORDER BY a.attnum\n</code></pre>\n\n<p>From what I see, it appears as though the tests are trying to run the custom validation against the PostgresSQL database specified in the database.yml file instead of the Oracle database that is specified in the library I wrote. I'm not quite sure if this is the cause or if it is why it is occurring and how I can resolve the issue.</p>\n\n<p>Here is what my library file looks like:</p>\n\n<pre><code>module Legacy\n  DB_CONFIG = YAML::load(File.open(\"#{Rails.root}/config/legacy_database.yml\"))[Rails.env]\n\n  class Legacy::License &lt; ActiveRecord::Base\n    establish_connection DB_CONFIG\n\n    self.table_name = \"LICENSE\"\n    self.primary_key = \"LICENSE_ID\"\n  end\nend\n</code></pre>\n\n<p>This is my model:</p>\n\n<pre><code>require \"#{Rails.root}/lib/legacy.rb\"\n\nclass Vehicle &lt; ActiveRecord::Base\n  belongs_to :user\n\n  validates_presence_of :permit_license, :name\n  validate :validate_license\n\n  def validate_license\n    license = Legacy::License.where('license_number = ?', license_number)\n\n    if license.empty?\n      errors.add(:license_number, 'License not valid')\n    end\n  end\nend\n</code></pre>\n\n<p>Any insight into why this is occurring would be helpful and appreciated.</p>\n"},{"tags":["java","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":70,"score":5,"question_id":12058763,"title":"How to write a unit test in situations where it is obvious by \"looking\" that the test passed?","body":"<p>Sometimes, I encounter situations where all I need to test is whether the program's execution reaches a certain point without any exceptions being thrown or the program being interrupted or getting caught in an infinite loop or something. </p>\n\n<p>What I don't understand is how to write a unit test for that. </p>\n\n<p>For instance, consider the following \"unit test\" - </p>\n\n<pre><code>@Test\npublic void testProgramExecution()\n  {\n     Program program = new Program();\n     program.executeStep1();\n     program.executeStep2();\n     program.executeStep3();\n\n     // if execution reaches this point, that means the program ran successfully. \n     // But what is the best practice?\n     // If I leave it like this, the test will \"pass\", \n     // but I am not sure if this is good practice. \n  }\n</code></pre>\n\n<p>Usually, at the end of a test, I have a statement like-</p>\n\n<pre><code>assertEquals(expectedString, actualString);\n</code></pre>\n\n<p>But how to write an assertEquals or other type of test statement for the above case?</p>\n"},{"tags":["unit-testing","excel-vba","vsto"],"answer_count":1,"favorite_count":5,"up_vote_count":6,"down_vote_count":0,"view_count":837,"score":6,"question_id":4547487,"title":"How to unit test Excel VBA code","body":"<p>Does anyone have any experience with unit testing Excel VBA code?  I want to introduce unit tests into some legacy Excel VBA code as painlessly as possible. One idea I had would be to use VSTO to call code from inside the Excel workbook. I would like to know if others have tried this for the purpose of unit testing the Excel code, as well as any other methods they may have used for unit testing Excel VBA.</p>\n\n<p>I would appreciate some pointers as to any available frameworks and/or tips on unit testing Excel VBA code as well.</p>\n"},{"tags":["c++","unit-testing","qt4","qtestlib"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12030534,"title":"Writing unit tests with QTestLib","body":"<p>this is my first step into the world on unit-testing so please be patient. I'm writing a Qt 4.8.1 C++ program and as test framework I'm using the integrated QTestLib. I should test a class that inhrerits from a base one and that loads a certain XML file to read and parse it later with a function that will return a C++ class object with the xml values that I can retrieve and set via set/get functions. The class in the constructor instantiate a QFile object and in the readXml function I use it to parse with the QXmlStreamReader the file. What's the best way to test all this class with unit-tests? I don't see how I could bypass the file-read operation to inject a own string representing the file content. Or should I use as test content a different ad-hoc XML file?</p>\n"},{"tags":["asp.net-mvc","unit-testing","entity-framework-4","asp.net-mvc-4","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12043364,"title":"Entity Framework4.3 and Unit Testing. Access Violation Exception. Attempted to read or write protected memory","body":"<p>I am using EF4.3, ASP.NET MVC4, Microsoft.VisualStudio.TestTools.UnitTesting. </p>\n\n<p>Code works fine. I added Unit tests to test Controllers. The Unit tests fails with following exception : </p>\n\n<blockquote>\n  <p>Access Violation Exception. Attempted to read or write protected\n  memory. This is often an indication that other memory is corrupt.</p>\n  \n  <p>at\n  ((IObjectContextAdapter)this).ObjectContext.MetadataWorkspace.LoadFromAssembly(typeof(MyBusinessEntity).Assembly);</p>\n</blockquote>\n\n<p>I have added [assembly: InternalsVisibleTo(\"TestProject\")]  to my Web project AssemblyInfo.cs</p>\n\n<p>Any suggestions ?</p>\n\n<p>Unit test code:</p>\n\n<pre><code> [TestMethod]\n    public void GetEntity()\n    {\n        // Arrange\n        MyControllercontroller = new MyController();\n\n        // Act\n        var result = controller.GetEntity(\"737464305\") as JsonResult;\n\n        dynamic data = result.Data;\n\n        // Assert\n        Assert.IsNotNull(data);\n        Assert.AreEqual(\"0\", data.ProcessStatus);\n\n    }\n</code></pre>\n\n<p>Controller action invokes a Stored Procedure using  Entity Framework4.3 DBContext. The result of SP call is mapped to a Complex Type.  The DBContext code for the SP call is :</p>\n\n<pre><code>public virtual ObjectResult&lt;MyEntity&gt; MYSP(string inparam)\n    {\n        ((IObjectContextAdapter)this).ObjectContext.MetadataWorkspace.LoadFromAssembly(typeof(MyEntity).Assembly);\n\n        var inparamParameter = inparam != null ?\n            new ObjectParameter(\"inparam\", inparam) :\n            new ObjectParameter(\"inparam\", typeof(string));\n\n        return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction&lt;MyEntity&gt;(\"MYSP\", inparamParameter );\n    }\n</code></pre>\n\n<p><strong>In general code works fine. However, \nAccess Violation Error is thrown when Controller action is tested using Unit Test. in line ((IObjectContextAdapter)this).ObjectContext.MetadataWorkspace.LoadFromAssembly(typeof(MyEntity).Assembly);</strong></p>\n"},{"tags":["unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":11909148,"title":"Is there a web service that spits out the entire request that was sent?","body":"<p>I apologize if this isn't \"programming\" worthy. I'm wondering if a service exists that when the HTTP service is pinged, it echos back the exact same request you made as the response.</p>\n\n<p>The reason I want this is I want to UnitTest a class I made to build requests and send them over a socket. I realize I could just do a Mock object of some sort, but I think that involves more complexity than just making sure the request being sent was properly built.</p>\n\n<p>Ideally, the web service would send the content back as proper HTTP 1.1 with the request info I sent in the body of the response.</p>\n\n<p>Thanks!</p>\n\n<p>Kyle</p>\n\n<p>-- edit --</p>\n\n<p>Just a quick reference to the solution. Point your browser to: <a href=\"http://scooterlabs.com/echo.json\" rel=\"nofollow\">http://scooterlabs.com/echo.json</a> or <a href=\"http://scooterlabs.com/echo.xml\" rel=\"nofollow\">http://scooterlabs.com/echo.xml</a></p>\n"},{"tags":["unit-testing","testing","mocking","tdd","integration-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":63,"score":3,"question_id":12028481,"title":"Software testing: test remote API or just use a mock?","body":"<p>Let say your website need to call Twitter API to perform some tasks, you have several options:</p>\n\n<ol>\n<li>Only use mock</li>\n<li>Use mock in unit test, but use production api in integration test</li>\n<li>Only call production api, never use mock</li>\n</ol>\n\n<p>Which one is the best approach if your services depends on the external api?</p>\n"},{"tags":["django","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":11885211,"title":"How to write a unit test for a django view?","body":"<p>I have problems understanding how the unit tests should be designed for django.</p>\n\n<p>From my understanding testing the whole view in one go seems impossible. We need to distinguish between pre-post and post states of request. But I have no idea how to design this. Is there any real life example?</p>\n\n<p>Looking at the documentation the examples are too simplified and only focused on the model. </p>\n\n<pre><code>@login_required\ndef call_view(request, contact_id):\n    profile = request.user.get_profile()\n    if request.POST:        \n        form = CallsForm(profile.company, request.POST)           \n        if form.is_valid()\n        return HttpResponseRedirect('/contact/' + contact_id + '/calls/')\n    else:        \n        form = CallsForm(profile.company, instance=call)              \n    variables = RequestContext(request, {'form':form}\n    return render_to_response('conversation.html', variables)\n</code></pre>\n\n<p><strong>update:</strong></p>\n\n<p>trying to make a success test work, but it still fails:</p>\n\n<pre><code>def test_contact_view_success(self):\n    # same again, but with valid data, then\n    self.client.login(username='username1', password='password1')\n    response = self.client.post('/contact/add/', {u'last_name': [u'Johnson'], }) \n    self.assertRedirects(response, '/')\n</code></pre>\n\n<p><strong>error message:</strong></p>\n\n<pre><code>AssertionError: Response didn't redirect as expected: Response code was 200 (expected 302)\n</code></pre>\n\n<p>I think this is because the form.is_valid() fails and it doesn't redirect, correct?</p>\n"},{"tags":["delphi","unit-testing","delphi-7","dunit"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":151,"score":5,"question_id":12053573,"title":"How to deal with tangled uses dependencies in order to start unit testing?","body":"<p>I have a messy Delphi 7 legacy system to maintain and develop. I am already reading \"Working effectively with legacy code\" and I like this book very much. </p>\n\n<p>In order to start following the advices in the book, I created a test project and tried to write a single test. To do this I need to add some unit to the test project, but here lies the problem: the system under test has horrific uses dependencies. One unit uses some other unit, that uses some other unit and so on, and so on. It seems that most units directly or indirectly use one particular unit, and this unit in turn has 170 dependencies in its uses clause. There are indirect circular dependencies also. </p>\n\n<p>Currently I am trying to add all of the legacy system's units into the test project, but I am running into all kind of problems, like \"unit xxx was compiled with a different version of xxx\", and others.</p>\n\n<p>So I wonder if I am doing something wrong. I have used unit testing before, but in my own projects, that were smaller and with better structure and modularization. What are the options I have in this situation? Am I missing something?</p>\n"},{"tags":["unit-testing","mocking","stubbing"],"answer_count":5,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1171,"score":3,"question_id":1288168,"title":"When to use stubs and mocks?","body":"<p>I've this confusion all the time. If I write a code which uses fake code to assert some operation, how do i trust my real implementation when it is started really using the real objects instead of fake ones.</p>\n\n<p>For example, I've this code --</p>\n\n<pre><code>    [Test]\n    public void CanCreateContactsWithData()\n    {\n        using(ISession session = factory.OpenSession())\n        using (ITransaction trans = session.BeginTransaction())\n        {\n            _contactId = (long) session.Save(contact);\n            trans.Commit();\n        }\n\n        Assert.AreNotEqual(0, _contactId);\n    }\n</code></pre>\n\n<p>This code tests the implementation of a \"contact\" object whether that gets saved into database or not. If i happened to use a stub instead of a real database connection, do I need to have separate test for storing it in database? And, do you guys call that as integration testing? </p>\n\n<p>Answers are sincerely appreciated.</p>\n"},{"tags":["c#","unit-testing","xunit.net","approval-tests"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":94,"score":2,"question_id":12054138,"title":"How to add support for xunit's Theory attribute in Approvaltests","body":"<p>When I try to use approvals with my unit test decorated with <code>[Theory]</code> attribute it says:</p>\n\n<pre><code>System.Exception: System.Exception : Approvals is not set up to use your test framework.\nIt currently supports [NUnit, MsTest, MbUnit, xUnit.net]\nTo add one use ApprovalTests.StackTraceParsers.StackTraceParser.AddParser() method to add implementation of ApprovalTests.StackTraceParsers.IStackTraceParser with support for your testing framework.\nTo learn how to implement one see http://blog.approvaltests.com/2012/01/creating-namers.html\n   at ApprovalTests.StackTraceParsers.StackTraceParser.Parse(StackTrace stackTrace)\n   at ApprovalTests.Namers.UnitTestFrameworkNamer..ctor()\n   at ApprovalTests.Approvals.GetDefaultNamer()\n   at ApprovalTests.Approvals.Verify(IApprovalWriter writer)\n   at ApprovalTests.Approvals.Verify(Object text)\n</code></pre>\n\n<p>Seems like it recognizes <code>[Fact]</code> attributes only. I tried to follow the <a href=\"http://blog.approvaltests.com/2012/01/creating-namers.html\" rel=\"nofollow\">link from stacktrace</a>  but there is nothing about how to plug in your own namer/parser into approvals.</p>\n\n<p>Is there any entry point where I can add my own namer/parser? Itself it seems to be trivial, the only question is how to use it:</p>\n\n<pre><code> public class TheoryNamer : AttributeStackTraceParser\n    {\n        protected override string GetAttributeType()\n        {\n            return typeof(TheoryAttribute).FullName;\n        }\n\n        public override string ForTestingFramework\n        {\n            get { return \"xUnit Extensions\"; }\n        }\n    }\n</code></pre>\n"},{"tags":["c#","javascript","unit-testing","nunit","selenium-rc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":225,"score":0,"question_id":3203877,"title":"Running JS functions on Selenium RC .Net","body":"<p>I have a index.html file which includes scripts.js</p>\n\n<p>in scripts.js:</p>\n\n<p>function Add(arg1, arg2)</p>\n\n<p>{</p>\n\n<pre><code>if(typeof(arg1) == 'string') arg1 = parseInt(arg1);\n\nif(typeof(arg2) == 'string') arg2 = parseInt(arg2);\n\nreturn arg1 + arg2;\n</code></pre>\n\n<p>}</p>\n\n<p>in my C# code:</p>\n\n<p>[Test]</p>\n\n<p>public void Tescik()</p>\n\n<p>{</p>\n\n<pre><code>   Assert.AreEqual(sel.GetEval(@\"this.browserbot.getUserWindow().Add(2,3);\"), 5, \"Adding...\");\n</code></pre>\n\n<p>}</p>\n\n<p>when run in NUnit it fails with:</p>\n\n<p>ERROR: Threw an exception: this.browserbot.getUserWindow().Add is not a function</p>\n\n<p>any suggestions what's wrong? I have both sel.start() and stop()</p>\n"},{"tags":["ajax","unit-testing","bdd","jasmine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":494,"score":0,"question_id":8884060,"title":"How to create Stub for ajax function using Jasmine BDD","body":"<p>I'm struggling to find any examples on how to fake an ajax call using Jasmine BDD?</p>\n\n<p>I have a custom ajax function that works like so...</p>\n\n<pre><code>ajax({\n    url: 'JSON.php',\n    dataType: 'json',           \n    onSuccess: function(resp) {\n        console.log(resp);\n    }\n});\n</code></pre>\n\n<p>...and I've no idea how to create a stub to fake calling the actual ajax function.</p>\n\n<p>I want to avoid calling the ajax function as it could slow down my test suite if a real ajax call to the server takes some time to respond and I've loads of specs in my test suite.</p>\n\n<p>I've heard that you can use <code>spyOn(namespace, 'ajax')</code> but that is annoying straight away as it requires me to wrap my <code>ajax</code> function in an object just to use the <code>spyOn</code> function (but regardless I wasn't able to follow along as I couldn't find any specific examples to fake an ajax call).</p>\n\n<p>I've also heard that you can use <code>createSpy()</code> but again the documentation isn't very helpful (neither is the corresponding wiki on GitHub).</p>\n\n<p>Any help explaining how to use spies to create a fake ajax call would be greatly appreciated!</p>\n"},{"tags":["unit-testing","mvc","dependency-injection","unity","service-layer"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12050017,"title":"Using HttpContextBase in Service Layer","body":"<p>I recently started with TDD and dependency injection. This is one BIG Mindset change, and i am still trying to puzzle together all the pieces.</p>\n\n<p>I have a service layer for all the business logic to keep the controllers as thin as possible.Some of the services in my service requires HttpContext. What would be the best way to create the service so that unit testing can be done as well.</p>\n\n<p>Currently i have a ServiceBase that looks like this</p>\n\n<pre><code>public class HttpContextService \n{\n    private HttpContextBase _ServiceContext;\n    public HttpContextBase ServiceContext \n    { \n        get\n        {\n            if (_ServiceContext == null)\n                _ServiceContext = new HttpContextWrapper(HttpContext.Current);\n            return _ServiceContext;\n        }  \n        set { _ServiceContext = value; }  \n    }\n}\n</code></pre>\n\n<p>So this means that all my services can just inherit from this service. The reason i created a property for the HttpContextBase is so that I can set it, when unit testing the service. 1. Is there any way to rather inject the HttpContext into the service in Unity Bootstrap file. ?\n2. Is this the right approach or am i missing something ?</p>\n\n<p>thanks in advance. Like i said, i am struggeling to get my head around this whole TDD Dependency injection way of coding. </p>\n"},{"tags":["ruby-on-rails-3","unit-testing"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12053578,"title":"rails test makes Mysql2 complain about default value","body":"<p>I'm pretty confused about an error I get trying to unit test a model (User) I have.\nI have a fixture for the model in test/fixtures/users.yml</p>\n\n<pre><code>new_user_in_unavailable_country:\n  first_name: John\n  last_name: Lennon\n  email: john.lennon@pop.co.uk\n  password: YokoOn0\n  country: UNITED KINGDOM\n</code></pre>\n\n<p>Now in test/unit/user_test.rb I have</p>\n\n<pre><code>require 'test_helper'\n\nclass UserTest &lt; ActiveSupport::TestCase\n  test \"status_auto_fill_for_unavailable_country\" do\n     users(:new_user_in_unavailable_country).valid?\n     assert users(:new_user_in_unavailable_country).status == \"SUBSCRIBED\"\n  end\nend\n</code></pre>\n\n<p>So far so good. Now, here is what that generates upon rake:test:units :</p>\n\n<pre><code> Error:\ntest_status_auto_fill_for_available_country(UserTest):\nActiveRecord::StatementInvalid: Mysql2::Error: Field 'name' doesn't have a default value: INSERT INTO `countries` (`id`) VALUES (980190962)\n</code></pre>\n\n<p>Okay, if there is an hidden insert somewhere into table countries (which I never asked for!), I should be able to see that upon running the same code in a rails console.\nSo I tried:</p>\n\n<pre><code>&gt; usr = User.new(:first_name =&gt; \"John\", :last_name =&gt; \"Lennon\", :email =&gt; \"john.lennon@pop.co.uk\", :password =&gt; \"YokoOn0\", :country =&gt; \"UNITED KINGDOM\")\n#&lt;User id: nil, first_name: \"John\", last_name: \"Lennon\", email: \"john.lennon@pop.co.uk\", hashed_password: nil, password_salt: nil, created_at: nil, updated_at: nil, organization_id: nil, country: \"UNITED KINGDOM\", status: nil&gt;\n\n&gt;&gt; usr.valid?\n   (1.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'\n   (1.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'\n   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'\n   (1.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'\n   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'\n   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'\n   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'\n   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'\n   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'\n  User Exists (1.0ms)  SELECT 1 FROM `users` WHERE `users`.`email` = BINARY 'john.lennon@pop.co.uk' LIMIT 1\ntrue\n\n&gt;&gt; usr.status\n\"SUBSCRIBED\"\n</code></pre>\n\n<p>Okay, no insertion into countries table.</p>\n\n<p>Anyidea of what happens behind the scene that I am missing and that generates this error?</p>\n\n<pre><code>Create Country migration:\nclass CreateCountries &lt; ActiveRecord::Migration\n  def change\n     create_table :countries do |t|\n      t.string      :name , :null =&gt; false\n      t.string      :iso_2_letters_code , :null =&gt; false\n      t.string      :iso_3_letters_code , :null =&gt; false\n      t.integer     :phone_code\n    end\n\n    add_index :countries , :iso_2_letters_code , :unique =&gt; true\n    add_index :countries , :iso_3_letters_code , :unique =&gt; true\n  end\nend\n</code></pre>\n"},{"tags":["c#","unit-testing","visual-studio-2010","c#-4.0"],"answer_count":2,"favorite_count":1,"up_vote_count":16,"down_vote_count":0,"view_count":6468,"score":16,"question_id":4369861,"title":"Xml file not copying to test output directory","body":"<p>Visual Studio 2010, x64 machine, using the built-in web server to host a WCF service with a set of unit tests using the built-in test framework.</p>\n\n<p>I have an XML file that my tests need to load to run.  I've included this file in the test project, and have the file set to 'content' and 'always copy to output directory'.  This file copies to the bin\\debug directory fine.</p>\n\n<p>When I execute the tests, however, the xml file is not there.  Instead of looking in the  project's bin\\debug folder, it looks for it in the test's working directory, C:\\Projects\\SAP Reapprovals\\TestResults\\name_machine 2010-12-06 13_45_43\\Out\".  The file hasn't been copied there.</p>\n\n<p>Is there a way to force this file to copy, or do I need to fully qualify the reference from within the test?</p>\n\n<p>TIA!<br />\nJames</p>\n\n<p><br />\n<strong>Update</strong><br />\nI set the <code>DeploymentItem</code> attribute, but the file still doesn't copy.  But that sure looks like what I want... any ideas why that isn't working?</p>\n\n<p>My test code:</p>\n\n<pre><code>[TestMethod]\n[DeploymentItem(\"SAP - GS3 format.xml\")]\npublic void TestProcessSapRoles() {\n\n    //  I get a 'file not found' error here, and when \n    //  I check the output directory, it isn't there\n    XElement rolesRoot = XElement.Load(\"SAP - GS3 format.xml\");\n\n}\n</code></pre>\n\n<p><br />\n<strong>ANSWERS:</strong><br />\nThanks go out to CPedros, with his help I've zoomed in on this a bit.  I ran SysInternals' Process Monitor, to see where it was looking for my xml file.  Here's what I found:</p>\n\n<p>When I ran the tests using ctrl+r,ctrl+t (debug tests in current context), <i>visual studio </i><b>ignored</b><i> the </i><code>DeploymentItem</code><i> attribute completely</i> and did not even <i>try</i> to copy the file anywhere.  In this case I got a \"File Not Found\" exception when I tried to open it for reading.  Visual studio created a temporary working directory for the tests, but there was only one file in it, AgentRestart.dat.</p>\n\n<p>When I ran the tests using the 'Run Unit Tests' button in my toolbar (not sure what test option that is), Visual Studio did not copy the file over, but referenced it directly from the project directory.  The test passed, and no temporary working directory was created.  </p>\n\n<p>When I ran the test from the menu option \"run -> tests in current context\" (run, not debug), a temporary working directory was created, and the xml file and all executables were copied to it.  The test passed.  </p>\n\n<p>When I edited Local.testsettings (under a Solution Items folder under my tests folder), I chose 'Deployment' from the left menu, and added the xml file.  It was added as [solution directory]\\[project directory]\\file.xml.  I removed the <code>DeploymentItem</code> attribute.  Now I was able to debug the tests; the xml file and all executables were copied to the temporary directory created for the test.</p>\n\n<p><b>TLDR:</b>  Visual Studio is ignoring the <code>DeploymentItem</code> attribute for certain ways of running the test.  The solution is to edit <code>Local.testsettings</code>, the <code>Deployment</code> menu, and add the file by hand.  </p>\n\n<p>Thanks for the help!  I'm giving CPedros credit for his answer, as it was the most helpful in resolving this.</p>\n"},{"tags":["unit-testing","selenium","automated-tests","selenium-rc","selenium-ide"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":736,"score":1,"question_id":4188874,"title":"Selenium RC just run the first case in the suite","body":"<p>I'm trying to run an html testSuite with Selenium RC. \nThe browser starts, the first test runs, but nothing else. Selenium never start running the second test in my suite. Couldn't find anything related in Selenium's RC docs nor internet (except a forum's post without answer).\nCould anyone help me? What could I be doing wrong?</p>\n\n<p>If I run the same testsuite using Selenium IDE for firefox it runs perfectly. If I manually run the second testcase in the suite after seleniumRc launching the browser, it runs ok - by running manually I mean clicking in the second row in the left frame of the selenium test page and click in \"Run the selected test\".</p>\n\n<p>That's the command line I'm using:</p>\n\n<pre><code>java -jar selenium-server.jar -htmlsuite *chrome http://localhost:8088/ /home/devel/Dev/tests/TS_5.1.2 /home/devel/Dev/tests/log.html\n</code></pre>\n\n<p>Apreciate your help!\nFernando</p>\n"},{"tags":["xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":440,"score":1,"question_id":5032707,"title":"Unit Testing in XCode: Test rig '[...]/usr/bin/otest' exited abnormally with code 134","body":"<p>I have got a problem when unit testing a class. When running my test, it compiles without any errors but then it crashes (it does NOT fail in the sense of an assertion not being met), displaying the following error message:</p>\n\n<pre><code>/Developer/Tools/RunPlatformUnitTests.include:451:0 Test rig '/Developer/Platforms\n/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.2.sdk/Developer/usr/bin/otest'\nexited abnormally with code 134 (it may have crashed).\n</code></pre>\n\n<p>Here's my code:</p>\n\n<p>The class' interface:</p>\n\n<pre><code>@interface AbstractActionModel : NSObject  \n{\n  NSString* mName;\n  ActionType mType;   // enum           \n  float mDuration;\n  float mRepeatCount;\n  float mDelay;\n  NSArray* mTriggerAreas;\n}  \n</code></pre>\n\n<p>The implementation:</p>\n\n<pre><code>- (void) dealloc\n{\n  [mTriggerAreas release];\n\n  [super dealloc];\n}\n\n- (id) initWithConfigData: (NSDictionary*) theConfigData\n{\n  NSAssert(nil != theConfigData, @\"theConfigData cannot be nil\");\n  self = [super init];\n\n  if (self) \n  {\n    self.name = [theConfigData objectForKey:ACTION_NAME];\n    self.type = [[theConfigData objectForKey:ACTION_TYPE] intValue];\n    self.duration = [[theConfigData objectForKey:ACTION_DURATION] floatValue];\n    self.delay = [[theConfigData objectForKey:ACTION_DELAY] floatValue];\n    self.repeatCount = [[theConfigData objectForKey:ACTION_REPEAT_COUNT] floatValue];\n    self.triggerAreas = [theConfigData objectForKey:ACTION_TRIGGER_AREAS];\n  }\n\n  return self;\n}\n</code></pre>\n\n<p>Here's the test code:</p>\n\n<pre><code>- (void) testCreateAction\n{\n  SoundActionModel* testSoundAction = (SoundActionModel*)[SoundActionModelFactory createActionModel:self.actionConfig];\n  STAssertNotNil(testSoundAction, @\"returned object must not be nil\");\n}\n</code></pre>\n\n<p>The Factory's <code>createActionModel:</code> method:</p>\n\n<pre><code>+ (AbstractActionModel*) createActionModel:(NSDictionary *)config\n{\n  NSAssert(config != nil, @\"config must not be nil\");\n  SoundActionModel* retVal = [[[SoundActionModel alloc] initWithConfigData:config] autorelease];\n\n  return retVal;\n}\n</code></pre>\n\n<p>As previously mentioned: The code compiles, and it runs when <code>testCreateAction</code> is commented out. The problem does not seem to be the test itself (i.e. its assertion).</p>\n\n<p>Telling from these postings (<a href=\"http://stackoverflow.com/questions/3241175/unit-testing-core-data-exited-abnormally-with-code-134\">similar problem 1</a>, <a href=\"http://stackoverflow.com/questions/3400767/test-rig-exited-abnormally-with-code-134-with-ocmock-verify-on-ios-4\">similar problem 2</a>) it seems to be a bug in XCode, but these links point to problems which arise when using Core Data (which I don't) or OCMock (which I don't, either - at least not knowingly).</p>\n\n<p>Can someone tell me how to solve this kind of problem? If it turns out to be a bug, a workaround would be very much appreciated.</p>\n"},{"tags":["php","database","unit-testing"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":826,"score":6,"question_id":3560116,"title":"What are standard/best practices for creating unit tests for functionality using databases?","body":"<p>I get the idea behind unit testing however am trying to think of a clean simple way do it when it requires database functionality.  For instance I have a function that return result based off a database select query.  Would the database alway have to remain the same for me to properly see that only the correct results are being returned.  What is the best way to perform unit testing (in PHP) when it requires database inactivity (whether it be read, write, update, or delete)?</p>\n"},{"tags":["android","unit-testing","mocking","robolectric"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12034743,"title":"Robolectric (Android): Using ShadowLocationManager ? Is it configurable?","body":"<p>Can anyone help, i have been using Robolectric quite succesfully up until now :-)  </p>\n\n<p>I have an activity that gets the location manager. Now according to the documentation the robolectric framework incorporates a shadow class called \"ShadowLocationManager\" to make a kind of mock.</p>\n\n<p>My question really is, how can i control this mock, can i control what will be returned? If so how?</p>\n\n<p>Or do i have to create my \"OWN\" shadow class and implement \"ShadowLocationManager\".</p>\n\n<p>I have been searching for documentation but i just can't find anything to confirm what i am asking.</p>\n\n<p>If robolectric does contain a shadow for location manager how do i control what providers are enabled?</p>\n\n<p>I didn't want to implement my own shadow class if one already exists and can be configured and controlled.</p>\n\n<p>Any help really appreciated</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c","unit-testing","mocking"],"answer_count":6,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":2026,"score":5,"question_id":253013,"title":"How do I mock objects without inheritance (in C)?","body":"<p>We use a simple object model for our low level networking code at work where struct pointers are passed around to functions which are pretending to be methods. I've inherited most of this code which was written by consultants with passable C/C++ experience at best and I've spent many late nights trying to refactor code into something that would resemble a reasonable structure.</p>\n\n<p>Now I would like to bring the code under unit testing but considering the object model we have chosen I have no idea how to mock objects. See the example below:</p>\n\n<p>Sample header (foo.h):</p>\n\n<pre><code>#ifndef FOO_H_\n#define FOO_H_\n\ntypedef struct Foo_s* Foo;\nFoo foo_create(TcpSocket tcp_socket);\nvoid foo_destroy(Foo foo);\nint foo_transmit_command(Foo foo, enum Command command);\n\n#endif /* FOO_H_ */\n</code></pre>\n\n<p>Sample source (foo.c):</p>\n\n<pre><code>struct Foo_s {\n    TcpSocket tcp_socket;\n};\n\nFoo foo_create(TcpSocket tcp_socket)\n{   \n    Foo foo = NULL;\n\n    assert(tcp_socket != NULL);\n\n    foo = malloc(sizeof(struct Foo_s));\n    if (foo == NULL) {\n    \tgoto fail;\n    }\n    memset(foo, 0UL, sizeof(struct Foo_s));\n\n    foo-&gt;tcp_socket = tcp_socket;\n\n    return foo;\n\nfail:\n    foo_destroy(foo);\n    return NULL;\n}\n\nvoid foo_destroy(Foo foo)\n{\n    if (foo != NULL) {\n        \ttcp_socket_destroy(foo-&gt;tcp_socket);\n        \tmemset(foo, 0UL, sizeof(struct Foo_s));\n        \tfree(foo);\n    }\n}\n\nint foo_transmit_command(Foo foo, enum Command command)\n{\n    size_t len = 0;\n    struct FooCommandPacket foo_command_packet = {0};\n\n    assert(foo != NULL);\n    assert((Command_MIN &lt;= command) &amp;&amp; (command &lt;= Command_MAX));\n\n    /* Serialize command into foo_command_packet struct */\n    ...\n\n    len = tcp_socket_send(foo-&gt;tcp_socket, &amp;foo_command_packet, sizeof(foo_command_packet));\n    if (len &lt; sizeof(foo_command_packet)) {\n        \treturn -1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>In the example above I would like to mock the <em>TcpSocket</em> object so that I can bring *\"foo_transmit_command\"* under unit testing but I'm not sure how to go about this without inheritance. I don't really want to redesign the code to use vtables unless I really have to. Maybe there is a better approach to this than mocking?</p>\n\n<p>My testing experience comes mainly from C++ and I'm a bit afraid that I might have painted myself into a corner here. I would highly appreciate any recommendations from more experienced testers.</p>\n\n<p>Edit:<br />\nLike Richard Quirk pointed out it is really the call to *\"tcp_socket_send\"* that I want to override and I would prefer to do it without removing the real tcp_socket_send symbol from the library when linking the test since it is called by other tests in the same binary.</p>\n\n<p>I'm starting to think that there is no obvious solution to this problem..</p>\n"},{"tags":["spring","unit-testing","annotations"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12049228,"title":"Is it possible to use Spring without a configuration file?","body":"<p>In my unit tests I want to configure Spring in code (API, Annotations) so they will not depend on bean configuration files.</p>\n\n<p>Can this be done?</p>\n\n<p>For example:</p>\n\n<pre><code>Class Dependency {}\n\nClass A\n{\n    @AutoWired\n    Dependency d;\n}\n</code></pre>\n\n<p>When testing A, I want to be able to create an instance of it with the Dependency member resolved, without having to use configuration files.</p>\n\n<p>Thank you!</p>\n"},{"tags":["python","unit-testing","file-upload","cgi","webob"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12032807,"title":"How to create cgi.FieldStorage for testing purposes?","body":"<p>I am creating a utility to handle file uploads in webob-based applications. I want to write some unit tests for it.</p>\n\n<p>My question is - as webob uses <code>cgi.FieldStorage</code> for uploaded files I would like to create a <code>FieldStorage</code> instance in a simple way (without emulating a whole request). What it the minimum code I need to do it (nothing fancy, emulating upload of a text file with \"Lorem ipsum\" content would be fine). Or is it a better idea to mock it?</p>\n"},{"tags":["python","django","unit-testing","django-models"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":932,"score":2,"question_id":434700,"title":"Cleaning up a database in django before every test method","body":"<p>By default when Django runs against sqlite backend it creates a new in memory database for a test. That means for every class that derives from unittest.TestCase, I get a new database. Can this be changed so that it is cleared before every test method is run?</p>\n\n<p>Example: I am testing a manager class that provides additional abstraction on top of Django persistent objects. The code looks more-less like that</p>\n\n<pre><code>class TestForManager(unittest.TestCase):\n  def testAddingBlah(self):\n    manager = Manager()\n    self.assertEquals(manager.getBlahs(), 0)\n    manager.addBlah(...)\n    self.assertEquals(manager.getBlahs(), 1)\n\n  def testAddingBlahInDifferentWay(self):\n    manager = Manager()\n    self.assertEquals(manager.getBlahs(), 0)\n    manager.addBlahInDifferentWay(...)\n    self.assertEquals(manager.getBlahs(), 1)\n</code></pre>\n\n<p>Now, the first assertion of second test fails, because the state of the database is preserved between test calls and there already is an instance of <code>Blah</code> in the database.</p>\n"},{"tags":["javascript","unit-testing","testing","backbone.js","requirejs"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1129,"score":4,"question_id":8211804,"title":"Unit testing a modular Javascript web-app","body":"<p>I am building a web app using BackboneJS and RequireJS and need to implement some form of unit testing for UI interaction and data retrieval via AJAX. I have come across <a href=\"http://docs.jquery.com/QUnit\" rel=\"nofollow\">QUnit</a> and <a href=\"http://pivotal.github.com/jasmine/\" rel=\"nofollow\">Jasmine</a> but don't really know how I can integrate this into my app.</p>\n\n<p>If I am testing things such as:</p>\n\n<ul>\n<li>Is the user logged in alright?</li>\n<li>Has the data been received from the server ok?</li>\n<li>Does clicking a button trigger the expected response?</li>\n<li>Do click events work on dynamically loaded html content?</li>\n<li>Does the app respond correctly to changes in hash/push-state urls?</li>\n</ul>\n\n<p>I would imagine the testing has to be directly integrated into my app so as to have access to specific JS objects, work with session specific data and respond to changes in push state URLs. </p>\n\n<p><strong>How can I integrate QUnit or Jasmine (or other suggestions) into my modular app to unit test such features?</strong></p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":77,"score":1,"question_id":12044702,"title":"how do i run phpunit tests?","body":"<p><a href=\"https://github.com/phpseclib/phpseclib/tree/master/tests\" rel=\"nofollow\">https://github.com/phpseclib/phpseclib/tree/master/tests</a></p>\n\n<p>My familiarity with phpunit is pretty lacking.  How do I run those tests?  I installed phpunit using the following commands (per <a href=\"http://www.phpunit.de/manual/3.6/en/installation.html\" rel=\"nofollow\">this website</a>):</p>\n\n<pre><code>pear config-set auto_discover 1\npear install pear.phpunit.de/PHPUnit\n</code></pre>\n\n<p>I try doing <code>phpunit MD5Test</code> from the tests/Crypt/Hash directory and get the following:</p>\n\n<pre><code>PHP Fatal error:  Class 'Crypt_Hash_TestCase' not found in /root/phpseclib/trunk/tests/Crypt/Hash/MD5Test.php on line 9\n</code></pre>\n\n<p>That's not too surprising since Crypt_Hash_TestCase isn't included anywhere.  There's a bootstrap.php file but I don't know how to use that either.</p>\n"},{"tags":["android","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12041824,"title":"Using Service stub during Activity Junit test","body":"<p>I am writing a Junit test for activity which launching a service:</p>\n\n<pre><code>startService(new Intent(this, MyClass.class));\n</code></pre>\n\n<p>For the purpose of the test, I want to replace <code>MyClass.class</code> with a stub class <i>(MyStubClass.class)</i></p>\n\n<p>I did an extensive search on SOF but was unable to find a solution.\nIs it possible to make the swap without adding test related code to the application?</p>\n"},{"tags":["c#","unit-testing","static","dependency-injection"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1774,"score":6,"question_id":1293489,"title":"Dependency injection with a static logger, static helper class","body":"<p>I have a static class which calls a static Logger class,</p>\n\n<p>e.g</p>\n\n<pre><code>static class DoesStuffStatic\n{\n  public static void DoStuff()\n  {\n    try\n    {\n      //something\n    }\n    catch(Exception e)\n    {\n      //do stuff; \n      Logger.Log(e);\n    }\n  }\n}\n\nstatic class Logger\n{\n  public static void Log(Exception e)\n  {\n     //do stuff here\n  }\n}\n</code></pre>\n\n<p>How do I inject the Logger into my static class?</p>\n\n<p>Note: I've read <a href=\"http://stackoverflow.com/questions/743951/help-with-dependency-injection-in-net\">http://stackoverflow.com/questions/743951/help-with-dependency-injection-in-net</a>, but this seems to use an instance logger.</p>\n"},{"tags":["java","unit-testing","tomcat","junit","jax-rs"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":641,"score":5,"question_id":8878190,"title":"Running unit tests on the server (JAX-RS)","body":"<p>I am writing a JAX-RS (Jersey+Maven) application that does some tricky things (eg call native executables embedded in the WAR). I need to run [some of] my unit tests (JUnit4) on the server (Amazon Elastic Beanstalk running Tomcat 7.0.22) to check that everything is ok.</p>\n\n<p>Is there a standard, flexible way of doing this other than RYO (roll your own)? The things I found seem to have more to do with integration testing on the developer machine (ie, Jersey Test Framework). Even RYO is confusing me... how could I call code in the Test Packages from Source Packages?</p>\n\n<p>Basically, I want to create a /test resource that I can call that will return my unit test results from the server in a pretty format. Even better if I could do /test/{category}</p>\n"},{"tags":["unit-testing","asp.net-web-api"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":304,"score":1,"question_id":11779311,"title":"Testing WebApi Controller Url.Link","body":"<p>I have the following controller action</p>\n\n<pre><code>public void Post(Dto model)\n{\n    using (var message = new MailMessage())\n    {\n        var link = Url.Link(\"ConfirmAccount\", new { model.Id });\n\n        message.To.Add(model.ToAddress);\n        message.IsBodyHtml = true;\n        message.Body = string.Format(@\"&lt;p&gt;Click &lt;a href=\"\"{0}\"\"&gt;here&lt;/a&gt; to complete your registration.&lt;p&gt;&lt;p&gt;You may also copy and paste this link into your browser.&lt;/p&gt;&lt;p&gt;{0}&lt;/p&gt;\", link);\n\n        MailClient.Send(message);\n    }\n}\n</code></pre>\n\n<p>To test this I need to setup the controller context</p>\n\n<pre><code>var httpConfiguration = new HttpConfiguration(new HttpRouteCollection { { \"ConfirmAccount\", new HttpRoute() } });\nvar httpRouteData = new HttpRouteData(httpConfiguration.Routes.First());\nvar httpRequestMessage = new HttpRequestMessage(HttpMethod.Post, \"http://localhost\");\nsut = new TheController\n{\n    ControllerContext = new HttpControllerContext(httpConfiguration, httpRouteData, httpRequestMessage),\n    MailClient = new SmtpClient { PickupDirectoryLocation = location }\n};\n</code></pre>\n\n<p>This seems like a lot of setup to test the creation of a link. Is there a cleaner way to do this? I have read about in-memory servers but that looks like it applies more to the httpclient than testing the controller directly.</p>\n"},{"tags":["entity-framework","unit-testing","integration-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":12028270,"title":"What's the point of in memory IDbSet?","body":"<p>I see one of the ways people test solutions based on EntityFramework (code first) is to create interface for their custom context that contains properties of type IDbSet (instead of DbSet). Then in unit tests they use InMemoryDbSets.</p>\n\n<p>I'm new to EntityFramework and that seemed like great way to do it. But it doesn't work at all does it? When we are using InMemory DbSets we can create and run queries that use any of the properties of our entity objects. Even if those are calculated properties. But during runtime the same queries will throw \"The specified type member 'PropertyName' is not supported in LINQ to Entities. Only initializers, entity members, and entity navigation properties are supported.\".</p>\n\n<p>So either I don't understand something (probably) or it is not possible to unit test at all if you are using custom context with IDbSets.</p>\n"},{"tags":["php","unit-testing","zend-framework","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12031500,"title":"Re-using datasets in PHPUnit","body":"<p>I have a user object with property 1, property 2, and property 3.  I have a separate function to edit each property.  Therefore, I'll need to test each edit property function.  So I'll create 3 different expected datasets for the tests of successful property edits.  However, what if I end up adding a 4th property down the line?  Won't this force me to now add this property/value to all of the other datasets?  Should I just create 1 template dataset file, and then extract the data from the file and use a php array dataset?  This way, if I add a new property, I won't have to modify all of the previous datasets?</p>\n\n<p>Concrete example:</p>\n\n<p>Let's say I want to test that my edit email function works properly, and only changes the email.  My setup fixture would be:</p>\n\n<p>setup-fixture.xml:</p>\n\n<pre><code>&lt;dataset&gt;\n    &lt;table name=\"users\"&gt;\n        &lt;column&gt;id&lt;/column&gt;\n        &lt;column&gt;email&lt;/column&gt;\n        &lt;column&gt;password&lt;/column&gt;\n        &lt;row&gt;\n            &lt;value&gt;1&lt;/value&gt;\n            &lt;value&gt;user1@email.com&lt;/value&gt;\n            &lt;value&gt;password&lt;/value&gt;\n        &lt;/row&gt;\n    &lt;/table&gt;\n&lt;/dataset&gt;\n</code></pre>\n\n<p>And my expected dataset would be:</p>\n\n<p>edit-email-expected-dataset.xml:</p>\n\n<pre><code>&lt;dataset&gt;\n    &lt;table name=\"users\"&gt;\n        &lt;column&gt;id&lt;/column&gt;\n        &lt;column&gt;email&lt;/column&gt;\n        &lt;column&gt;password&lt;/column&gt;\n        &lt;row&gt;\n            &lt;value&gt;1&lt;/value&gt;\n            &lt;value&gt;user1-changed-his-email@email.com&lt;/value&gt;\n            &lt;value&gt;password&lt;/value&gt;\n        &lt;/row&gt;\n    &lt;/table&gt;\n&lt;/dataset&gt;\n</code></pre>\n\n<p>However, if I later added another property called \"notes\" to this user object, my setup fixture would now be:\nnew-setup-fixture.xml:</p>\n\n<pre><code>&lt;dataset&gt;\n    &lt;table name=\"users\"&gt;\n        &lt;column&gt;id&lt;/column&gt;\n        &lt;column&gt;email&lt;/column&gt;\n        &lt;column&gt;password&lt;/column&gt;\n        &lt;column&gt;notes&lt;/column&gt;\n        &lt;row&gt;\n            &lt;value&gt;1&lt;/value&gt;\n            &lt;value&gt;user1@email.com&lt;/value&gt;\n            &lt;value&gt;password&lt;/value&gt;\n            &lt;value&gt;notes&lt;/value&gt;\n        &lt;/row&gt;\n    &lt;/table&gt;\n&lt;/dataset&gt;\n</code></pre>\n\n<p>Therefore, I would also have to amend my expected dataset file in the edit e-mail function test to include this new \"notes\" property.</p>\n\n<p>edit-email-expected-dataset.xml:</p>\n\n<pre><code>&lt;dataset&gt;\n    &lt;table name=\"users\"&gt;\n        &lt;column&gt;id&lt;/column&gt;\n        &lt;column&gt;email&lt;/column&gt;\n        &lt;column&gt;password&lt;/column&gt;\n        &lt;column&gt;notes&lt;/column&gt;\n        &lt;row&gt;\n            &lt;value&gt;1&lt;/value&gt;\n            &lt;value&gt;user1-changed-his-email@email.com&lt;/value&gt;\n            &lt;value&gt;password&lt;/value&gt;\n            &lt;value&gt;notes&lt;/value&gt;\n        &lt;/row&gt;\n    &lt;/table&gt;\n&lt;/dataset&gt;\n</code></pre>\n\n<p>My question is, how do I avoid having to edit all my expected datasets everytime I add an extra field?</p>\n"},{"tags":["vb.net","unit-testing","reflection","anonymous-types"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":12040328,"title":"When getting types from an assembly, is there a way to determine if type is an Anonymous Type?","body":"<p>I added an Anonymous type to my project:</p>\n\n<pre><code>'Put the courses from the XML file in an Anonymous Type\nDim courses = From myCourse In xDoc.Descendants(\"Course\")\n              Select New With\n                  {\n                      .StateCode = myCourse.Element(\"StateCode\").Value, _\n                      .Description = myCourse.Element(\"Description\").Value, _\n                      .ShortName = myCourse.Element(\"ShortName\").Value, _\n                      .LongName = myCourse.Element(\"LongName\").Value, _\n                      .Type = myCourse.Element(\"Type\").Value, _\n                      .CipCode = CType(myCourse.Element(\"CIPCode\"), String) _\n                }\n\nFor Each course In courses\n    If Not UpdateSDECourseCode(acadYear, course.StateCode, course.Description, course.Type, course.ShortName, course.LongName, course.CipCode) Then errors.Add(String.Format(\"Cannot import State Course Number {0} with Year {1} \", course.StateCode, acadYear))\nNext\n</code></pre>\n\n<p>After doing so, a Unit Test failed:</p>\n\n<pre><code>Public Function GetAreaTypeList() As List(Of Type)\n    Dim types As New List(Of Type)\n    Dim asmPath As String = IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, \"My.Stuff.dll\")\n\n    For Each t As Type In Reflection.Assembly.LoadFrom(asmPath).GetTypes()\n        If t.Namespace.StartsWith(\"My.Stuff.BatchUpdater\") Then\n            If t.BaseType Is GetType(My.Stuff.BatchUpdater.Area) Then\n                types.Add(t)\n            End If\n        End If\n    Next\n\n    Return types\nEnd Function\n</code></pre>\n\n<p>It fails because a new type has been added to the project (<strong>VB$AnonymousType_0`6</strong>) and it does not have a property called <strong>Namespace</strong>.</p>\n\n<p>I fixed by making the following change to the IF Statement:</p>\n\n<pre><code>If Not t.Namespace Is Nothing AndAlso t.Namespace.StartsWith(\"My.Stuff.BatchUpdater\") Then\n</code></pre>\n\n<p>Since I don't fully understand what's happening, I feel leery about my code change.</p>\n\n<p>Why is the Namespace Nothing for the Anonymous type?</p>\n\n<p>Would you fix your Unit Test in the same fashion?  Or should it be something more specific (e.g.  <strong>If Not t.Names = \"VB$AnonymousType_0`6\"</strong>)</p>\n\n<hr>\n\n<h1>UPDATE</h1>\n\n<p>decyclone gave me the info I needed to create a better test:</p>\n\n<pre><code>For Each t As Type In Reflection.Assembly.LoadFrom(asmPath).GetTypes()\n    'Ignore CompilerGeneratedAttributes (e.g. Anonymous Types)\n    Dim isCompilerGeneratedAttribute = t.GetCustomAttributes(False).Contains(New System.Runtime.CompilerServices.CompilerGeneratedAttribute())\n\n    If Not isCompilerGeneratedAttribute AndAlso t.Namespace.StartsWith(\"My.Stuff.BatchUpdater\") Then\n         '...Do some things here\n    End If\nNext\n</code></pre>\n\n<p>Honestly, it could be improved more with a LINQ query, but this suits me.</p>\n"},{"tags":["java","unit-testing","junit","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":298,"score":0,"question_id":11969609,"title":"Junit mockito when(..).thenReturn() throws NullPointerException","body":"<p>Can anyone explain me the below scenario<br>\nCode to be tested <br>\nUserTransaction.java<br></p>\n\n<pre><code>@Override\npublic ServiceResponse&lt;User&gt; get(String name) {\n    ServiceResponse&lt;User&gt; response = new ServiceResponse&lt;User&gt;();\n    List&lt;Map&lt;String, Object&gt;&gt; exp = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();\n    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n    map.put(\"expression\", \"eq\");\n    map.put(\"property\", \"name\");\n    map.put(\"value\", name);\n    exp.add(map);\n    List&lt;User&gt; users = userDao.getByCriteria(exp);\n    if (!users.isEmpty()) {\n        response.setResponse(users.get(0));\n    } else {\n        response.setResponse(null);\n    }\n    return response;\n}   \n</code></pre>\n\n<p>UserDao.java</p>\n\n<pre><code>public List&lt;User&gt; getByCriteria(List&lt;Map&lt;String, Object&gt;&gt; exp) {\n  DetachedCriteria criteria = DetachedCriteria.forClass(User.class);\n  for (Integer i=0;i&lt;exp.size();i++){\n    String expression = (String) exp.get(i).get(\"expression\");\n    String property = (String) exp.get(i).get(\"property\");\n    if(expression.equals(\"eq\"){\n       criteria.add(Restrictions.eq(property,exp.get(i).get(\"value\")));\n    }\n  }\n  return hibernateTemplate.findByCriteria(criteria);\n }\n</code></pre>\n\n<p>UserTransactionTest.java<br></p>\n\n<pre><code>private UserTransaction userTransactions = new UserTransaction();\nprivate UserDao userDao = mock(UserDao.class);\n\n@Test\npublic void testGet() {\n   User user = new User();\n   user.setName(\"Raman\");\n    try {\n        when(userDao.getByCriteria(anyList())).thenReturn(user);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    ServiceResponse&lt;User&gt; response = userTransactions.get(\"raman\");\n    User result = response.getResponse();\n    assertEquals(\"Raman\", result.getName());\n    assertEquals(0, response.getErrors().size());\n}\n</code></pre>\n\n<p>works fine.</p>\n\n<p>But instead of \"anyList()\" I passed a user-defined list \"myList\"</p>\n\n<pre><code>List&lt;Map&lt;String,Object&gt;&gt; myList = new ArrayList&lt;Map&lt;String,Object&gt;&gt;();\nMap&lt;String,Object&gt; map = new HashMap&lt;String,Object&gt;();\nmap.put(\"expression\",\"eq\");\nmap.put(\"property\",\"name\");\nmap.put(\"value\",\"raman\");\nmyList.add(map);\nwhen(userTransactions.getByCriteria(myList)).thenReturn(user);\n</code></pre>\n\n<p>Throws <code>NullPointerException</code> at the line \"assertEquals()\". Why? What actually happens if anyList() is given?</p>\n"},{"tags":["unit-testing","scala","scalatest"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12041182,"title":"What is the easiest way to count my scala tests?","body":"<p>I want to be able to count all the scala tests in a directory or its sub-directory.</p>\n\n<p>I'm using org.scalatest.  Can anyone suggest a fast way to do this?  Either from the test source, or from test output?</p>\n"},{"tags":["database","android","unit-testing"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1496,"score":4,"question_id":2095695,"title":"Android Unit Tests Requiring Context","body":"<p>I am writing my first Android database backend and I'm struggling to unit test the creation of my database.</p>\n\n<p>Currently the problem I am encountering is obtaining a valid Context object to pass to my implementation of SQLiteOpenHelper.  Is there a way to get a Context object in a class extending TestCase?  The solution I have thought of is to instantiate an Activity in the setup method of my TestCase and then assigning the Context of that Activity to a field variable which my test methods can access...but it seems like there should be an easier way.</p>\n\n<p>Thanks for your input!</p>\n\n<p>Macy</p>\n"},{"tags":["javascript","jquery-ui","unit-testing","qunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12028669,"title":"QUnit mocking out Autocomplete","body":"<p>In my QUnit test I want to mock out autocomplete method (jQuery UI), but every time I'm runing test like:</p>\n\n<pre><code>test(\"Create_PassedContainer_RunsAutocompleteOnMatchingElement\",function(){\n    var $matchingInput = $('&lt;input data-autocomplete-url=\"some\"/&gt;');\n    var $dom = $('&lt;div&gt;&lt;input/&gt;&lt;/div&gt;');\n    $dom.append($matchingInput);\n    var autocompleteWasCalled = false;\n    $matchingInput.autocomplete = function(){ autocompleteWasCalled = true; };\n\n    new Autocomplete($dom);\n\n    ok(autocompleteWasCalled,\"Should call autocomplete.\");\n});\n</code></pre>\n\n<p>I'm getting result:</p>\n\n<pre><code>TypeError: Object [object Object] has no method 'autocomplete'.\n</code></pre>\n\n<p>Code under test:</p>\n\n<pre><code>function Autocomplete($container) {\n    var $self = this;\n\n    this.Initialize = function($container) {\n        $self.$container = $container;\n        $self.$text = $('*[data-autocomplete-url]', $container);\n        $self.$value = $('input[type=\"hidden\"]', $container);\n\n        $self.$text.autocomplete();\n    };\n\n    $self.Initialize($container);\n};\n</code></pre>\n\n<p>Anything would be helpful. </p>\n"},{"tags":["javascript","unit-testing","mocha"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":149,"score":2,"question_id":11235815,"title":"Is there a way to get Chai working with asynchronous Mocha tests?","body":"<p>I'm running some asynchronous tests in Mocha using the Browser Runner and I'm trying to use Chai's expect style assertions:</p>\n\n<pre><code>window.expect = chai.expect;\ndescribe('my test', function() {\n  it('should do something', function (done) {\n    setTimeout(function () {\n      expect(true).to.equal(false);\n    }, 100);\n  }\n}\n</code></pre>\n\n<p>This doesn't give me the normal failed assertion message, instead I get:</p>\n\n<pre><code>Error: the string \"Uncaught AssertionError: expected true to equal false\" was thrown, throw an Error :)\n    at Runner.fail (http://localhost:8000/tests/integration/mocha/vendor/mocha.js:3475:11)\n    at Runner.uncaught (http://localhost:8000/tests/integration/mocha/vendor/mocha.js:3748:8)\n    at uncaught (http://localhost:8000/tests/integration/mocha/vendor/mocha.js:3778:10)\n</code></pre>\n\n<p>So it's obviously catching the error, it's just not displaying it correctly. Any ideas how to do this? I guess I could just call \"done\" with an error object but then I lose all the elegance of something like Chai and it becomes very clunky...</p>\n"},{"tags":["android","unit-testing","tdd"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1228,"score":1,"question_id":2547508,"title":"Android unit testing & using a different database file","body":"<p>I'm trying to start unit testing on my application (should have done so from the beginning). I've got an Eclipse project structure set up and everything seems to work well, but...</p>\n\n<p>I'm subclassing <code>SQLiteOpenHelper</code> to access the application database. This works well for the application, but when using the same class in the unit tests, it <em>writes to the same database as the actual application</em>. This is obviously rather irritating, since unit test data shows up when developing and testing the actual application.</p>\n\n<p>What's the best way to make the <code>SQLiteOpenHelper</code> class write to a different database file when being called from the unit tests?</p>\n"},{"tags":["unit-testing","cakephp","timestamp","cakephp-2.0","fixtures"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":150,"score":0,"question_id":10155841,"title":"Add current timestamp at a fixture on CakePHP 2.0","body":"<p>I am trying to test a Model and i need to insert into the 'created' field the current time-stamp. </p>\n\n<p>I am using a Fixture for it but using 'NOW()' doesn't seem to work. It writes 0000-00-00 00:00:00.</p>\n\n<p>This is my fixture record:</p>\n\n<pre><code>public $records = array(\n        array(\n            'id' =&gt; 1,\n            'body' =&gt; 'esto es una prueba',\n            'idUser' =&gt; 2,\n            'created' =&gt; 'NOW()',\n            'ip' =&gt;'1.1.1.1',\n         )\n)\n</code></pre>\n\n<p>Any idea about this?\nThanks.</p>\n"},{"tags":["java","unit-testing","opengl","bdd"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12031326,"title":"How can I write a test for drawing a square in my openGL app?","body":"<p>Let's say this is my code:</p>\n\n<pre><code>public void render(){\n    GL11.glClearColor(0, 0, 1, 1);\n    GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);\n    GL11.glColor3f(.5f, .5f, 1.0f);\n    GL11.glBegin(GL11.GL_QUADS);\n        GL11.glVertex3f(0,0,0);\n        GL11.glVertex3f(50,0,0);\n        GL11.glVertex3f(50,50,0);\n        GL11.glVertex3f(0,50,0);\n    GL11.glEnd();\n}\n</code></pre>\n\n<p>How can I write a unit test to make sure the square was drawn where it should be and at the right color? Should I also be testing things like, the screen gets cleared on each frame? I was thinking that I'd abstract the openGL code away from the my square code. In other words, I'd create a class that creates \"vectors\" and then its render function would draw to screen and I wouldn't test that. However, you SHOULD test every public function. Sooo I guess it comes back to: well how can I tell what was drawn on screen in openGL?</p>\n\n<p>Also, now that I think about it, I shouldn't really be running my app every time I run the test, which presents another level of complexity potentially...</p>\n"},{"tags":["entity-framework","unit-testing"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":356,"score":2,"question_id":10940873,"title":"Unit testing EF - how to extract EF code out from BL?","body":"<p>I have read <strong>so much</strong> (dozens of posts) about one thing:</p>\n\n<p><strong>How to unit test business logic code that has Entity Framework code in it.</strong></p>\n\n<p>I have a WCF service with 3 layers :</p>\n\n<ul>\n<li>Service Layer</li>\n<li>Business Logic Layer</li>\n<li>Data Access Layer</li>\n</ul>\n\n<p>My business logic uses the <strong><em>DbContext</em></strong> for all the database operations.\nAll my entities are now POCOs (used to be ObjectContext, but I changed that).</p>\n\n<p>I have read <strong>Ladislav Mrnka's</strong> answer <a href=\"http://stackoverflow.com/a/5610685/1335129\">here</a> and <a href=\"http://stackoverflow.com/a/6768712/1335129\">here</a>  on the reasons why we should <strong>not</strong> mock \\ fake the <em>DbContext</em>.</p>\n\n<p>He said:\n<em>\"That is the reason why I believe that code dealing with context / Linq-to-entities should be covered with integration tests and work against the real database.\"</em></p>\n\n<p>and:\n<em>\"Sure, your approach works in some cases but unit testing strategy must work in all cases - to make it work you must move EF and IQueryable completely from your tested method.\"</em></p>\n\n<p>My question is - how do you achieve this ???</p>\n\n<pre><code>public class TaskManager\n{\n    public void UpdateTaskStatus(\n        Guid loggedInUserId,\n        Guid clientId,\n        Guid taskId,\n        Guid chosenOptionId,\n        Boolean isTaskCompleted,\n        String notes,\n        Byte[] rowVersion\n    )\n    {\n        using (TransactionScope ts = new TransactionScope())\n        {\n            using (CloseDBEntities entities = new CloseDBEntities())\n            {\n                User currentUser = entities.Users.SingleOrDefault(us =&gt; us.Id == loggedInUserId);\n                if (currentUser == null)\n                    throw new Exception(\"Logged user does not exist in the system.\");\n\n                // Locate the task that is attached to this client\n                ClientTaskStatus taskStatus = entities.ClientTaskStatuses.SingleOrDefault(p =&gt; p.TaskId == taskId &amp;&amp; p.Visit.ClientId == clientId);\n                if (taskStatus == null)\n                    throw new Exception(\"Could not find this task for the client in the database.\");\n\n                if (taskStatus.Visit.CustomerRepId.HasValue == false)\n                    throw new Exception(\"No customer rep is assigned to the client yet.\");\n                TaskOption option = entities.TaskOptions.SingleOrDefault(op =&gt; op.Id == optionId);\n                if (option == null)\n                    throw new Exception(\"The chosen option was not found in the database.\");\n\n                if (taskStatus.RowVersion != rowVersion)\n                    throw new Exception(\"The task was updated by someone else. Please refresh the information and try again.\");\n\n                taskStatus.ChosenOptionId = optionId;\n                taskStatus.IsCompleted = isTaskCompleted;\n                taskStatus.Notes = notes;\n\n                // Save changes to database\n                entities.SaveChanges();\n            }\n\n            // Complete the transaction scope\n            ts.Complete();\n        }\n    }\n}\n</code></pre>\n\n<p>In the code attached there is a demonstration of a function from my business logic.\nThe function has several 'trips' to the database.\nI don't understand how exactly I can <em>strip</em> the EF code from this function out to a separate assembly, so that I am able to <strong>unit test</strong> this function (by injecting some fake data instead of the EF data), and <strong>integrate test</strong> the assembly that contains the 'EF functions'.</p>\n\n<p>Can Ladislav or anyone else help out?</p>\n\n<p><strong>[Edit]</strong></p>\n\n<p>Here is another example of code from my business logic, I don't understand how I can 'move the EF and IQueryable code' out from my tested method :</p>\n\n<pre><code>public List&lt;UserDto&gt; GetUsersByFilters(\n    String ssn, \n    List&lt;Guid&gt; orderIds, \n    List&lt;MaritalStatusEnum&gt; maritalStatuses, \n    String name, \n    int age\n)\n{\n    using (MyProjEntities entities = new MyProjEntities())\n    {\n        IQueryable&lt;User&gt; users = entities.Users;\n\n        // Filter By SSN (check if the user's ssn matches)\n        if (String.IsNullOrEmusy(ssn) == false)\n            users = users.Where(us =&gt; us.SSN == ssn);\n\n        // Filter By Orders (check fi the user has all the orders in the list)\n        if (orderIds != null)\n            users = users.Where(us =&gt; UserContainsAllOrders(us, orderIds));\n\n        // Filter By Marital Status (check if the user has a marital status that is in the filter list)\n        if (maritalStatuses != null)\n            users = users.Where(pt =&gt; maritalStatuses.Contains((MaritalStatusEnum)us.MaritalStatus));\n\n        // Filter By Name (check if the user's name matches)\n        if (String.IsNullOrEmusy(name) == false)\n            users = users.Where(us =&gt; us.name == name);\n\n        // Filter By Age (check if the user's age matches)\n        if (age &gt; 0)\n            users = users.Where(us =&gt; us.Age == age);\n\n\n        return users.ToList();\n    }\n}\n\nprivate   Boolean   UserContainsAllOrders(User user, List&lt;Guid&gt; orderIds)\n{\n    return orderIds.All(orderId =&gt; user.Orders.Any(order =&gt; order.Id == orderId));\n}\n</code></pre>\n"},{"tags":["c#","unit-testing","automapper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12037986,"title":"Is AutoMapper AssertConfigurationIsValid enough to ensure good mapping?","body":"<p>I'd like to ask you a question about AutoMapper. We are unit testing our mapping like that :</p>\n\n<pre><code>var dtoFiltrePersonne = new DtoFiltrePersonne { Prop1 = \"Test\", Prop2 = 1234 };\nMapper.CreateMap&lt;FiltrePersonne, DtoFiltrePersonne&gt;();\nvar filtrePersonne = DtoAutoMappeur&lt;DtoFiltrePersonne, FiltrePersonne&gt;.Instance.MapFromDtoToEntity(dtoFiltrePersonne);\nAssert.AreEqual(dtoFiltrePersonne.Prop1, filtrePersonne.Prop1);\nAssert.AreEqual(dtoFiltrePersonne.Prop2, filtrePersonne.Prop2);\n</code></pre>\n\n<p>I'd like to know if this unit test provides the same coverage ?</p>\n\n<pre><code>Mapper.CreateMap&lt;FiltrePersonne, DtoFiltrePersonne&gt;();\nAutoMapper.AssertConfigurationIsValid()\n</code></pre>\n\n<p>I looked into the <a href=\"https://github.com/AutoMapper/AutoMapper/wiki/Configuration-validation\" rel=\"nofollow\">AutoMapper Configuration documentation</a> and it's not pretty clear for me. Do I need to unit test each mapping or just use the AssertConfigurationIsValid method ?  </p>\n\n<p>Thanks a lot !</p>\n"},{"tags":["java","unit-testing","mocking"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12037407,"title":"Creating a mock environment for an existing Java application","body":"<p>I have this java application that I need to test.\nThe problem is the application was intedned to run in a certein environment. i.e a linux machine containing all kinds of files and scripts in specific locations (which the java application runs using Runtime class).</p>\n\n<p>What I would like to do is make a mock classes for say the Runtime and System class.\nBut I do not want to add this code to the real application, nor have the application selecting in which mode to run at run-time.</p>\n\n<p>I would rather make the application <strong>compile</strong> in this different mode... somthing similar to ifdef in C maybe.\nI also thought about AspectJ as a possible solution...</p>\n\n<p>Am I on the right track at all? am I missing something fundamental?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","unit-testing","time"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12034755,"title":"Get python unit test duration in seconds","body":"<p>Is there any way to get the total amount of time that \"unittest.TextTestRunner().run()\" has taken to run a specific unit test.</p>\n\n<p>I'm using a for loop to test modules against certain scenarios (some having to be used and some not, so they run a few times), and I would like to print the total time it has taken to run all the tests.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["algorithm","unit-testing","visualization","brain"],"answer_count":1,"favorite_count":1,"up_vote_count":10,"down_vote_count":0,"view_count":383,"score":10,"question_id":8968410,"title":"How to do algorithm visualization?","body":"<p>I am looking for an algorithm visualization library/tool that is well documented and you can call from your source code.<br>\nI took a look at <a href=\"http://www.jhave.org\">jhave</a> -  <a href=\"http://www.youtube.com/watch?v=gudGmmBFFGw\">example of usage</a>. And I liked it, it seems it has some documentation but I do not trust its future.<br>\nI found this article about <a href=\"http://unt.academia.edu/IanParberry/Papers/210273/Algorithm_Explorer_Visualizing_Algorithms_In_a_3D_Multimedia_Environment\">Algorithm explorer</a> it has a nice idea. It is implemented as a c++ api but I cannot find it anywere.<br>\n<br>\nMy main idea is that I want to do some unit tests for the brain. <br>\nSo I construct various exercises and in future when I want to test my knowledge I redo them.<br>\nI found that images stick longer with me, so that is why I want to visualize algorithms in certain states. ( I might remember better a tricky case like what happens when data is sorted in reverse and I use quick sort if I view it.)\n<br><br>\nAn ideal tool:<br>\n1. Has to integrate with any language.<br>\n2. Has to be well documented with a growing comunity and examples. <br>\n3. Be implemented on top of a capable rendering engine(ogre, xna). <br></p>\n"},{"tags":["unit-testing","c#-3.0","tdd","extension-methods","rhino-mocks"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":651,"score":3,"question_id":918776,"title":"How do you make methods relying on extension methods testable?","body":"<p>I have an extension method with the following signature (in BuildServerExtensions class)::</p>\n\n<pre><code>public static IEnumerable&lt;BuildAgent&gt; GetEnabledBuildAgents(\n                                          this IBuildServer buildServer,\n                                          string teamProjectName)\n{\n    // omitted agrument validation and irrelevant code\n    var buildAgentSpec = buildServer.CreateBuildAgentSpec(teamProjectName);\n}\n</code></pre>\n\n<p>And another method which calls the first (in BuildAgentSelector class):</p>\n\n<pre><code>public BuildAgent Select(IBuildServer buildServer, string teamProjectName)\n{\n    // omitted argument validation\n    IEnumerable&lt;BuildAgent&gt; serverBuildAgents = \n        buildServer.GetEnabledBuildAgents(teamProjectName);\n\n    // omitted - test doesn't get this far\n}\n</code></pre>\n\n<p>And I am trying to test it using MSTest and Rhino.Mocks (v3.4) with:</p>\n\n<pre><code>[TestMethod]\npublic void SelectReturnsNullOnNullBuildAgents()\n{\n    Mocks = new MockRepository();\n    IBuildServer buildServer = Mocks.CreateMock&lt;IBuildServer&gt;();\n\n    BuildAgentSelector buildAgentSelector = new BuildAgentSelector();\n    using (Mocks.Record())\n    {\n        Expect.Call(buildServer.GetEnabledBuildAgents(TeamProjectName)).Return(null);\n    }\n\n    using (Mocks.Playback())\n    {\n        BuildAgent buildAgent = buildAgentSelector.Select(buildServer, TeamProjectName);\n\n        Assert.IsNull(buildAgent);\n    }\n}\n</code></pre>\n\n<p>When I run this test I get: </p>\n\n<blockquote>\n  <p><em><code>System.InvalidOperationException</code>:</em></p>\n  \n  <p><em>Previous method <code>IBuildServer.CreateBuildAgentSpec(\"TeamProjectName\");</code> requires a return value or an exception to throw.</em></p>\n</blockquote>\n\n<p>This is obviously calling the real extension method rather than the test implementation. My next inclination was to try:</p>\n\n<pre><code>Expect.Call(BuildServerExtensions.GetEnabledBuildAgents(buildServer, TeamProjectName))\n      .Return(null);\n</code></pre>\n\n<p>Then I noticed that my expectations for Rhino.Mocks to intercept this were probably misplaced.</p>\n\n<p>The question is: How do I eliminate this dependency and make the Select method testable?</p>\n\n<p>Note that the extension method and BuildAgentSelector classes are in the same assembly and I would prefer avoiding changing this or having to turn to something besides an extension method, though another mocking framework is something I would consider if I knew it would handle this situation.</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":1677,"score":8,"question_id":5875111,"title":"Running a specific test case in Django when your app has a tests directory","body":"<p>The Django documentation (<a href=\"http://docs.djangoproject.com/en/1.3/topics/testing/#running-tests\">http://docs.djangoproject.com/en/1.3/topics/testing/#running-tests</a>) says that you can run individual test cases by specifying them:</p>\n\n<pre><code>$ ./manage.py test animals.AnimalTestCase\n</code></pre>\n\n<p>This assumes that you have your tests in a tests.py file in your Django application. If this is true, then this command works like expected.</p>\n\n<p>I have my tests for a Django application in a tests directory:</p>\n\n<pre><code>my_project/apps/my_app/\n├── __init__.py\n├── tests\n│   ├── __init__.py\n│   ├── field_tests.py\n│   ├── storage_tests.py\n├── urls.py\n├── utils.py\n└── views.py\n</code></pre>\n\n<p>The <code>tests/__init__.py</code> file has a suite() function:</p>\n\n<pre><code>import unittest\n\nfrom my_project.apps.my_app.tests import field_tests, storage_tests\n\ndef suite():\n    tests_loader = unittest.TestLoader().loadTestsFromModule\n    test_suites = []\n    test_suites.append(tests_loader(field_tests))\n    test_suites.append(tests_loader(storage_tests))\n    return unittest.TestSuite(test_suites)\n</code></pre>\n\n<p>To run the tests I do:</p>\n\n<pre><code>$ ./manage.py test my_app\n</code></pre>\n\n<p>Trying to specify an individual test case raises an exception:</p>\n\n<pre><code>$ ./manage.py test my_app.tests.storage_tests.StorageTestCase\n...\nValueError: Test label 'my_app.tests.storage_tests.StorageTestCase' should be of the form app.TestCase or app.TestCase.test_method\n</code></pre>\n\n<p>I tried to do what the exception message said:</p>\n\n<pre><code>$ ./manage.py test my_app.StorageTestCase\n...\nValueError: Test label 'my_app.StorageTestCase' does not refer to a test\n</code></pre>\n\n<p>How do I specify an individual test case when my tests are in multiple files?</p>\n"},{"tags":["c","unit-testing","design-patterns","function-pointers","instance-variables"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12030261,"title":"Instance Level Abstractions in C","body":"<p>I am not a C expert. I haven't done any C since my CS1 &amp; 2 days in college. I have done a little C++ here and there but it's been a while. So what I'm asking about is the correct <em>pattern</em> to solve a problem I am perceiving.</p>\n\n<p>I have decided to take on a fairly ambitious challenge and I am doing it in C. One of the things I am (re)learning is the different abstraction techniques in C vs. the ones I am used to having in higher level languages. The problem I am encountering, and asking about, specifically has to do with testing and functions. </p>\n\n<p>For example, I have two functions <code>f</code> and <code>g</code> and <code>f</code> will call <code>g</code> if certain conditions are true.</p>\n\n<pre><code>void f(object* obj) {\n  // ...\n  if(obj-&gt;state)\n    g(obj);\n  // ...\n}\n</code></pre>\n\n<p>I need to verify that <code>g</code> is actually being called but I also don't want to actually execute it, since it can do all sorts of other things. This would normally be solved in a higher level language by means of interfaces or abstract classes or inheritance. But in C I don't have these techniques.</p>\n\n<p>In fact the only solution to this problem that I can think of is to utilize function pointers. Instead of calling <code>g</code> directly I think I should add a pointer to <code>object</code> such that it has a pointer to <code>g</code>, which I can replace with a pointer to a different function in tests.</p>\n\n<pre><code>typedef struct object {\n  int state;\n  void (*g)(object* obj);\n} object;\n\nvoid f(object* obj) {\n  // ...\n  if(obj-&gt;state)\n    obj-&gt;g(obj);\n  // ...\n}\n</code></pre>\n\n<p>Then normally I just point to <code>g</code> when allocating an instance of <code>g</code> but in my test I point obj->g to a different function, one that merely verifies the incoming values and notes that it was actually called. </p>\n\n<p>This is the idea I am having right now but I'm not sure if it's quite the correct C-ish way to solve this problem. Hopefully my description illustrates the problem I am encountering but what I am really wondering is how best to handle it.</p>\n\n<p>What are the recommended design patterns for solving this problem in C?</p>\n"},{"tags":["java","unit-testing","stream","pipe"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12031048,"title":"Connecting arbitrary streams to standard input","body":"<p>I have a program that needs to process data from Standard-In.  I can call it on the command line like so <code>java program &lt; input</code>.  I want to write a proper unit test for its main().  Is it possible to reassociate a method's System.in with some other stream? </p>\n\n<p>In the test, I can read the sample data, and then somehow run the original program with its stdin connected to some stream that i define (from the sample data) and verify that it returns what i expect. I considered using these classes:\n<a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/PipedInputStream.html\" rel=\"nofollow\">PipedInputStream</a> and \n<a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/PipedOutputStream.html\" rel=\"nofollow\">PipedOutputStream</a>. But it would require me to modify the original program to read from a PipedInputStream every time I test it.  Or I can isolate the stream reading into a function (eg. <code>parseStream(InputStream)</code> ) and pass a PipedInputStream which is already connected to the sample data.</p>\n\n<p>I can also write a shell script to pipe whatever i want into its stdin, but the method in question will be a part of a series of processing steps so it shouldn't itself write to stdout and actually returns ArrayList&lt;SomeCompositeType&gt;. Where SomeCompositeType contains the data that was read in a structured way (eg. some ints, arrays, Maps, etc..)</p>\n\n<p>So is it possible to call some method that reads from System.in with a different stream?</p>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","testing","ruby-on-rails-3.2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12030096,"title":"Error Testing Create Action","body":"<p>I am trying to use factory girl to test my create action in rails. I keep getting:</p>\n\n<pre><code>\"Event.count\" didn't change by 1.\n&lt;2&gt; expected but was\n&lt;1&gt;.\n</code></pre>\n\n<p>When I run my tests. I don't believe I've done anything to change my tests or the controller:</p>\n\n<p>My test looks like this:</p>\n\n<pre><code>test \"should get create\" do\n    assert_difference('Event.count') do\n      post :create, FactoryGirl.attributes_for(:event)\n    end\n    assert_not_nil assigns(:event)\n    assert_response :success\n  end\n</code></pre>\n\n<p>I've also tried using <code>FactoryGirl.build(:event)</code> as well. I've used that previously, and I think that is the right the method to be using from what I've read.</p>\n\n<p>Here is my factory:</p>\n\n<pre><code>   factory :event do\n        name 'First Event'\n        street '123 street'\n        city 'Chicago'\n        state 'IL'\n        date '1/12/2012'\n      end\n</code></pre>\n\n<p>Here is my controller action</p>\n\n<pre><code>def create\n    @event = Event.new(params[:event])\n    @event.save\nend\n</code></pre>\n\n<p>Any idea what I'm doing wrong?</p>\n"},{"tags":["python","unit-testing","stringio","stubs"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12028637,"title":"Python's StringIO doesn't do well with `with` statements","body":"<p>I need to stub <code>tempfile</code> and <code>StringIO</code> seemed perfect. Only that all this fails in an omission:</p>\n\n<pre><code>In [1]: from StringIO import StringIO\nIn [2]: with StringIO(\"foo\") as f: f.read()\n\n--&gt; AttributeError: StringIO instance has no attribute '__exit__'\n</code></pre>\n\n<p>What's the usual way to provide canned info instead of reading files with nondeterministic content?</p>\n"},{"tags":["unit-testing","open-source"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12028589,"title":"Unit test web service clients","body":"<p>I'm writing an open source .net wrapper for a web api. Should I write unit test for this library? What do I test for? For example, if I do not pass a key for a request, I should get an exception. But if I write a unit test that utilizes the actual web call, then I expose my key to the open source community.</p>\n\n<p>How do I go about writing tests for a webservice? Should I put my api key in a config file and not commit that to the source control?</p>\n"},{"tags":["python","unit-testing","mapreduce","code-coverage","distributed"],"answer_count":4,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":252,"score":9,"question_id":8936608,"title":"Distributed unit testing and code coverage in Python","body":"<p>My current project has a policy of 100% code coverage from its unit tests.  Our continuous integration service will not allow developers to push code without 100% coverage.</p>\n\n<p>As the project has grown, so has the time to run the full test suite.  While developers typically run a subset of tests relevant to the code they are changing, they will usually do one final full run before submitting to CI, and the CI server itself also runs the full test suite.</p>\n\n<p>Unit tests by their nature are highly parallelizable, as they are self-contained and stateless from test to test.  They return only two pieces of information: pass/fail and the lines of code covered.  A map/reduce solution seems like it would work very well.</p>\n\n<p>Are there any Python testing frameworks that will run tests across a cluster of machines with code coverage and combine the results when finished?</p>\n"},{"tags":["java","unit-testing","distributed-system"],"answer_count":1,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":1051,"score":8,"question_id":2672506,"title":"Framework or tool for \"distributed unit testing\"?","body":"<p>Is there any tool or framework able to make it easier to test distributed software written in Java? My system under test is a peer-to-peer software, and I'd like to perform testing using something like <a href=\"http://www.codicesoftware.com/opdownloads2/oppnunit.aspx\" rel=\"nofollow\">PNUnit</a>, but with Java instead of .Net.</p>\n\n<p>The system under test is a framework I'm developing to build P2P applications. It uses <a href=\"https://jxta.dev.java.net/\" rel=\"nofollow\">JXTA</a> as a lower subsystem, trying to hide some complexities of it. It's currently an academic project, so I'm pursuing simplicity at this moment. </p>\n\n<p>In my test, I want to demonstrate that a peer (running in its own process, possibly with multiple threads) can discover another one (running in another process or even another machine) and that they can exchange a few messages. I'm not using mocks nor stubs because I need to see both sides working simultaneously. I realize that some kind of coordination mechanism is needed, and PNUnit seems to be able to do that.</p>\n\n<p>I've bumped into some initiatives like <a href=\"http://sourceforge.net/projects/pisces/\" rel=\"nofollow\">Pisces</a>, which \"aims to provide a distributed testing environment that extends JUnit, giving the developer/tester an ability to run remote JUnits and create complex test suites that are composed of several remote JUnit tests running in parallel or serially\", but this project and a few others I have found seem to be long dead.</p>\n"},{"tags":["oop","unit-testing","terminology","encapsulation"],"answer_count":9,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":558,"score":7,"question_id":4157639,"title":"What is the antonym of encapsulation?","body":"<p>Using <a href=\"http://encarta.msn.com/thesaurus_561572459/encapsulate.html\" rel=\"nofollow\">online dictionary tools</a> doesn't really help.  I think the way encapsulate is use in computer science doesn't exactly match its meaning in plain English.</p>\n\n<p>What is the antonym of computer science's version of encaspulate?  More specifically, what is an antonym for encapsulate that would work as a function name.</p>\n\n<hr>\n\n<p>Why should I care?  Here's my motivation:</p>\n\n<pre><code>// A class with a private member variable;\nclass Private\n{\npublic:\n   // Test will be able to access Private's private members;\n   class Test;\nprivate:\n   int i;\n}\n\n// Make Test exactly like Private\nclass Private::Test : public Private\n{\npublic:\n   // Make Private's copy of i available publicly in Test\n   using Private::i;\n};\n\n// A convenience function to quickly break encapsulation on a class to be tested.\n// I don't have good name for what it does\nPrivate::Test&amp; foo( Private&amp; p )\n{ return *reinterpret_cast&lt;Private::Test*&gt;(&amp;p); } // power cast\n\nvoid unit_test()\n{\n   Private p;\n   // using the function quickly grab access to p's internals.\n   // obviously it would be evil to use this anywhere except in unit tests.\n   assert( foo(p).i == 42 );\n}\n</code></pre>\n"},{"tags":["python","unit-testing","qt4","pyside"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":146,"score":1,"question_id":11145583,"title":"Unit and functional testing a PySide-based application?","body":"<p>I'm building a PySide 1.1.0-based application, and have been looking for good examples to look at for unit and functional testing my application.  I want to be able to do functional testing of the UI (simulating clicks, key presses, etc), unit testing of UI slots that alter the layout of the UI (presumably using a partially-mocked sender and receiver), as well as unit testing of code that involves widgets, but without requiring any windows to be rendered.</p>\n\n<p>As one example, I dynamically create submenus of one menu in the menubar when an item is added to a model (QAbstractItemModel-derived object) that provides data to a QTreeView.  The model and submenu must stay in sync, so I want to be able to write a unit test that submits data to the controller that manages the model and submenu, and asserts that both the model and submenu were properly updated.</p>\n\n<p>I would prefer to NOT have to set up a QApplication in my test code if I can avoid it.  I also would like to not have to display any windows when I only care about validating data structures in widgets, not their visualization.</p>\n\n<p>I can't find anything of suitable value at <a href=\"http://www.pyside.org\" rel=\"nofollow\">http://www.pyside.org</a> or in my Google searches.  Does anyone have any experience or know of good sample code that I should look at?</p>\n"},{"tags":["unit-testing","tfs2010","tfsbuild"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":12008494,"title":"Unit Test Assets in TFS 2010 Build","body":"<p>I have a unit test that looks at a text file included in my test project.  I had to take this route, as I can't seem to properly duplicate the special characters in a C# string that the users are getting into the raw data itself (some other system).</p>\n\n<p>The unit test reads the content of the file during the arrange portion, then acts on the content to ensure things are working as planned.</p>\n\n<p>Locally, the test runs just fine--zero issues.</p>\n\n<p>We run TFS2010 Build, and my builds fail that test every time, as the text file itself isn't found when the test is run on the build server.</p>\n\n<p>My file is presently in a directory on the Test project itself called \"Assets\", the text file's properties are:</p>\n\n<ul>\n<li>Build Action: Content</li>\n<li>Copy To Output Directory: Copy Always</li>\n</ul>\n\n<p>The Test Code is</p>\n\n<pre><code>    [TestMethod]\n    public void Broken_First_Token_Ok_Second_Returns_Full_String()\n    {\n        string rawText = string.Empty;\n\n        // load the broken translation\n        using (StreamReader reader = new StreamReader(@\"Assets\\BrokenTranslation.txt\")){\n            rawText = reader.ReadToEnd();\n        }\n\n        string expected = rawText;\n\n        string actual = [Some code that should return the proper values]\n\n        Assert.AreEqual(expected, actual, \"Failed to return proper match\");\n\n    }\n</code></pre>\n\n<p>What have I missed?</p>\n"},{"tags":["visual-studio","unit-testing","visual-studio-2012"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":193,"score":1,"question_id":12024114,"title":"<HintPath> in *.csproj file doesn't work for VS2012","body":"<p>The following CodedUI Dlls are shipped with VS2012. What I did was just copy them to a separate folder and reference them from there. I checked the *.csproj file, it has the correct  info as below. But in VS2012 property window, I checked the reference path, they are STILL resolved the default locations like \"D:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Common7\\IDE\\ReferenceAssemblies\\v4.0\\Microsoft.VisualStudio.QualityTools.CodedUITestFramework.dll\"</p>\n\n<p>The  works for only one of the following DLLs, the \"Microsoft.VisualStudio.QualityTools.UnitTestFramework\". But I don't see anything different between how this DLL is referenced and the others.</p>\n\n<p>WTF is this happening?</p>\n\n<p>I see some other guy reported a bug about VS 2012 assembly binding.(http://social.msdn.microsoft.com/Forums/en/vsunittest/thread/ba271f86-ed33-49a5-9b52-99980e88d198)</p>\n\n<p>But I am using the RTM version!</p>\n\n<pre><code>&lt;Reference Include=\"Microsoft.VisualStudio.QualityTools.CodedUITestFramework, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL\"&gt;\n   &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;\n   &lt;HintPath&gt;..\\..\\Microsoft.VisualStudio.QualityTools.CodedUITestFramework.dll&lt;/HintPath&gt;\n &lt;/Reference&gt;\n &lt;Reference Include=\"Microsoft.VisualStudio.QualityTools.UnitTestFramework, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL\"&gt;\n   &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;\n   &lt;HintPath&gt;..\\..\\Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll&lt;/HintPath&gt;\n &lt;/Reference&gt;\n &lt;Reference Include=\"Microsoft.VisualStudio.TestTools.UITest.Common, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL\"&gt;\n   &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;\n   &lt;HintPath&gt;..\\..\\Microsoft.VisualStudio.TestTools.UITest.Common.dll&lt;/HintPath&gt;\n &lt;/Reference&gt;\n &lt;Reference Include=\"Microsoft.VisualStudio.TestTools.UITest.Extension, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL\"&gt;\n   &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;\n   &lt;HintPath&gt;..\\..\\Microsoft.VisualStudio.TestTools.UITest.Extension.dll&lt;/HintPath&gt;\n &lt;/Reference&gt;\n &lt;Reference Include=\"Microsoft.VisualStudio.TestTools.UITesting, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL\"&gt;\n   &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;\n   &lt;HintPath&gt;..\\..\\Microsoft.VisualStudio.TestTools.UITesting.dll&lt;/HintPath&gt;\n &lt;/Reference&gt;\n</code></pre>\n\n<p>A ticket has been submitted to MS Connect:  <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/758647/hintpath-in-csproj-file-doesnt-work-for-vs2012\" rel=\"nofollow\">https://connect.microsoft.com/VisualStudio/feedback/details/758647/hintpath-in-csproj-file-doesnt-work-for-vs2012</a></p>\n"},{"tags":["asp.net","asp.net-mvc","unit-testing","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12023517,"title":"Unit test controller that uses application scoped variables","body":"<p>I'm building an ASP.NET MVC4 app. I'm not using any mocking framework and, if possible, would prefer not to at this point.  My question is 2 parts.  </p>\n\n<p>I have a controller that uses a variable created in Global.asax.  In the controller I access the variable like this.</p>\n\n<pre><code>HttpContext.Application[\"MyVar\"]\n</code></pre>\n\n<p>1) Is this a best-practice for application wide variable usage?  If not, what's the best way?</p>\n\n<p>In an attempt to unit test this controller I added the following code (from <a href=\"http://stackoverflow.com/questions/9871700/mvc3-unit-testing-response-code\">here</a>) to my test method.</p>\n\n<pre><code>MyController target = new MyController();\nvar request = new HttpRequest(\"\", \"http://example.com/\", \"\");\nvar response = new HttpResponse(System.IO.TextWriter.Null);\nvar httpContext = new HttpContextWrapper(new HttpContext(request, response));\ntarget.ControllerContext = new ControllerContext(httpContext, new RouteData(), target);\ntarget.ControllerContext.HttpContext.Application[\"MyVar\"] = new MyVar();\n</code></pre>\n\n<p>The problem is I can't add anything to Application.  The last line of code doesn't seem to do anything and the collection remains empty.  I've also tried this in VS's Immediate Window without success.</p>\n\n<p>2) In the unit test, how can I add the application level variables the controller needs?</p>\n"},{"tags":["android","unit-testing","junit","android-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":137,"score":1,"question_id":9859488,"title":"Android Test testPreconditions","body":"<p>In Android developers I've seen that testPreconditions() method is supposed to be launch before all tests. But in my app test, it's acting like a normal test. It does not run before all tests. Is there something wrong ?</p>\n\n<p>Here is the description about testPreconditions() from android developer :\n\"A preconditions test checks the initial application conditions prior to executing other tests. It's similar to setUp(), but with less overhead, since it only runs once.\"</p>\n"},{"tags":["c#","unit-testing","testing"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12020201,"title":"\"Stubbing out\" a function for unit tests","body":"<p>I have various methods that I would like to unit test using Visual Studio's built in unit testing capability for C#.  Things have been going pretty smoothly, but I've run into a scenario where I want to \"stub out\" a dependency on a particular function call.</p>\n\n<p>Namely, I have some methods that are in the following format:</p>\n\n<pre><code>public class ClassWithMethodsIWantToUnitTest \n{\n    public void myFcn(object someArg)\n    {\n        ...\n        LoggerService.Instance.LogMessage(\"myMessage\");\n        ...\n    }\n}\n</code></pre>\n\n<p>So basically, I want my unit test to simply verify that the call to \"LogMessage\" has occurred.  I don't want to actually check a log file or anything.  I want a way to see if the LoggerService line has been hit and executed.  </p>\n\n<p>LoggerService is a singleton, and if possible, I don't want to modify the code just for unit testing.</p>\n\n<p>Based on the format of this problem, it seems to me that it should be possible to somehow take control of the code in my unit test.  In other words, is there a way for me to make a fake version of LogMessage such that I can use it for my unit test?  I don't want the \"real\" LogMessage function to be called if possible.  I just want to test that the code hit the path that called the function.</p>\n\n<p>Does this make any sense?  Is this possible?</p>\n"},{"tags":["javascript","html5","unit-testing","file-io","js-test-driver"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12020343,"title":"javascript Event Object initialization unit-tests","body":"<p>I'm trying to read some text files local to my machine using javascript.</p>\n\n<p>I'm inspiring myself from that site: <a href=\"http://www.html5rocks.com/en/tutorials/file/dndfiles/?redirect_from_locale=fr\" rel=\"nofollow\">http://www.html5rocks.com/en/tutorials/file/dndfiles/?redirect_from_locale=fr</a></p>\n\n<p>At the same time I'm trying to develop my application in a TDD way, so I'd like to make a unit-test that would test wheither or not the file has in fact being loaded and if the informations loaded are what I'm expecting.</p>\n\n<p>But for my test I'd need a kind of mock-up of the Event fired when we select a file. When I use Chrome with a breakline to see the Type of the 'evt' object, I see that's an Object.\nIn the Global I see the Object Event, it takes more than zero arguments but I can't figure out what are the arguments, and the Event.initEvent() doesn't seem to be recongnized as a function.</p>\n\n<p>I'd like to do something like that in my test:</p>\n\n<pre><code>var fileManager = new FileManager();\nvar evt = new Event();\n\n// set some evt attributes for the file handling\nfileManager.handleFileSelection(evt);\n</code></pre>\n\n<p>thanks!!</p>\n"},{"tags":["ruby-on-rails","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12015910,"title":"Functional tests in Ruby failing?","body":"<p>I am running the functional test in Ruby and they are failing.</p>\n\n<p>I'm getting this as result from running <code>rake test:functionals</code></p>\n\n<pre><code>  1) Failure:\ntest_should_create_user(UsersControllerTest) [test/functional/users_controller_t\nest.rb:20]:\n\"User.count\" didn't change by 1.\n&lt;3&gt; expected but was\n&lt;2&gt;.\n\n14 tests, 19 assertions, 1 failures, 0 errors\nErrors running test:functionals! #&lt;#&lt;Class:0x472b82e5&gt;: Command failed with stat\nus (1): [c:/jruby-1.6.7.2/bin/jruby.exe -I\"lib;test...]&gt;\n</code></pre>\n\n<p>I already check the log file looking for SQL errors but everything seems ok.</p>\n\n<p>Any idea why is this failing? </p>\n"},{"tags":["android","unit-testing","cobertura","emma","clover"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":256,"score":0,"question_id":10958776,"title":"What is the best android code coverage tool?","body":"<p>What is the best tool of evaluating android code coverage? It would be better if it works with jenkins.</p>\n"},{"tags":["c#","visual-studio-2008","unit-testing","coding-style"],"answer_count":10,"favorite_count":9,"up_vote_count":7,"down_vote_count":0,"view_count":1877,"score":7,"question_id":507000,"title":"Writing standards for unit testing","body":"<p>I plan to introduce a set of standards for writing unit tests into my team. But what to include?</p>\n\n<p>These two posts (<a href=\"http://stackoverflow.com/questions/155436/unit-test-naming-best-practices\">Unit test naming best practices</a> and <a href=\"http://stackoverflow.com/questions/377423/best-practices-for-file-system-dependencies-in-unit-integration-tests\">Best practices for file system dependencies in unit/integration tests</a>) have given me some food for thought already.</p>\n\n<p>Other domains that should be covered in my standards should be how test classes are set up and how to organize them. For example if you have class called OrderLineProcessor there should be a test class called OrderLineProcessorTest. If there's a method called Process() on that class then there should be a test called ProcessTest (maybe more to test different states).</p>\n\n<p>Any other things to include?</p>\n\n<p>Does your company have standards for unit testing?</p>\n\n<p>EDIT: I'm using Visual Studio Team System 2008 and I develop in C#.Net</p>\n"},{"tags":["c#","unit-testing","binding","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12002334,"title":"I want to test a self written module for bindings","body":"<p>I want to unit-test if my kernel-module has all bindings set to the right target. To easiest way I found was to create a kernel with the module loaded, get every bound-type and check if it is the right one:</p>\n\n<pre><code>this.kernel = new StandardKernel(new MainKernelModule());\nAssert.That(this.kernel.Get&lt;IMyClass&gt;() is MyClass);\n</code></pre>\n\n<p>But some classes depends on a connection to a server, which shouldn't be used in my unit-test. Thats why this classes can't be created by the kernel in the unit-test-environment.</p>\n\n<p>My Question: How can I get the target class of a IBinding?</p>\n\n<pre><code>var module = new MainKernelModule();\nvar kernel = new StandardKernel(module);\n\nforeach (IBinding binding in module.Bindings)\n{\n     // if (binding.BindingTarget is MyClass)\n     // Debug.WriteLine(\"Yeah\");\n}\n</code></pre>\n\n<p>I hope someone could help me. Unfortunately I found nothing with google.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing","phpunit","codeigniter-2"],"answer_count":2,"favorite_count":4,"up_vote_count":16,"down_vote_count":0,"view_count":3340,"score":16,"question_id":5791156,"title":"Has CodeIgniter 2.0 / PHPUnit happened yet?","body":"<p>So i've just had a pretty disappointing morning/weekend. It came in the form of setting up PHPUnit, Integrating Eclipse etc</p>\n\n<p>Now i've just discovered that there's no straightforward way to test CodeIgniter 2.0 applications directly from PHPUnit.</p>\n\n<p>I've spent a lot of time researching libraries (FooStack and CIUnit) but the development of these has ceased and aren't compatible with CI 2.0</p>\n\n<p>Before I jump in the inlcuded 2.0 Unit Testing class I need to ask, have I missed out on any major developments around CI 2.0 and PHPUnit.</p>\n\n<p>Any guidance greatly appreciated.</p>\n\n<p>Thanks,\nConor</p>\n"},{"tags":["unit-testing","gwt","junit","timer"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12012943,"title":"GWT Timer fires immediately, when running gwt-test-utils unit tests","body":"<p>I wrote an unit test using the gwt-test-utils framework, as described <a href=\"http://code.google.com/p/gwt-test-utils/wiki/SimpleUnitTest\" rel=\"nofollow\">here</a>.\nThe tested class internally uses a <code>com.google.gwt.user.client.Timer</code> (not the Java default Timer).</p>\n\n<p>Only when tested, though, the Timer instance doesn't behave correctly, as it fires as soon as it is scheduled.</p>\n\n<p>When I run this test</p>\n\n<pre><code>public class TimerTest extends GwtTest {\n  @Override\n  public String getModuleName() {\n    return \"com.whatevs\";\n  }\n\n  @Test\n  public void testTimer() {\n    final int[] counter = { 0 };\n\n    com.google.gwt.user.client.Timer t = new Timer() {\n      @Override\n      public void run() {\n        Log.info(\"firing timer\");\n        counter[0]++; // just increase the counter\n      }\n    };\n\n    Log.info(\"scheduling timer\");\n    t.schedule(1000000); // this should return immediately\n    Log.info(\"scheduling returns\");\n    assertEquals(0, counter[0]); // the counter shouldn't yet be incremented\n  }\n}\n</code></pre>\n\n<p>I get a failure</p>\n\n<pre><code>testTimer(com.whatevs.TimerTest): expected:&lt;0&gt; but was:&lt;1&gt;\n</code></pre>\n\n<p>And the debug output</p>\n\n<pre><code>22:37:44,075  INFO gwt-log:81 - scheduling timer\n22:37:44,075  INFO gwt-log:81 - firing timer\n22:37:44,075  INFO gwt-log:81 - scheduling returns\n</code></pre>\n\n<p>Please note that the test is run as a JUnit test, without being compiled to JavaScript first.</p>\n\n<p>Am I doing something wrong, or did I just hit a bug?\nIs there any other way to test such classes?</p>\n\n<p><strong>Update</strong>:</p>\n\n<p>I just found out that if in the above example i call scheduleRepeating, or I reschedule the timer using schedule inside the run method, the timer fires exactly 5 times before returning control to the caller.</p>\n\n<p>Something weird is going on, I just opened <a href=\"http://code.google.com/p/gwt-test-utils/issues/detail?id=157\" rel=\"nofollow\">a bug report</a> on gwt-test-utils.</p>\n"},{"tags":["python","unit-testing","regression-testing","test-suite","pyunit"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12011091,"title":"Trying to implement python TestSuite","body":"<p>I have two test cases (two different files) that I want to run together in a Test Suite. I can get the tests to run just by running python \"normally\" but when I select to run a python-unit test it says 0 tests run. Right now I'm just trying to get at least one test to run correectly.</p>\n\n<pre><code>import usertest\nimport configtest # first test\nimport unittest   # second test\n\ntestSuite = unittest.TestSuite()\ntestResult = unittest.TestResult()\nconfTest = configtest.ConfigTestCase()\ntestSuite.addTest(configtest.suite())\ntest = testSuite.run(testResult)\nprint testResult.testsRun # prints 1 if run \"normally\"\n</code></pre>\n\n<p>Here's an example of my test case set up</p>\n\n<pre><code>class ConfigTestCase(unittest.TestCase):\n    def setUp(self):\n\n        ##set up code\n\n    def runTest(self):\n\n        #runs test\n\n\ndef suite():\n    \"\"\"\n        Gather all the tests from this module in a test suite.\n    \"\"\"\n    test_suite = unittest.TestSuite()\n    test_suite.addTest(unittest.makeSuite(ConfigTestCase))\n    return test_suite\n\nif __name__ == \"__main__\":\n    #So you can run tests from this module individually.\n    unittest.main()\n</code></pre>\n\n<p>What do I have to do to get this work correctly?</p>\n"},{"tags":["unit-testing","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12012110,"title":"How do I unit test a non-generic method that calls a generic method in a sealed non-generic class?","body":"<p>using <code>[assembly:InternalsVisibleTo()]</code> and </p>\n\n<pre><code>public sealed class AppService\n{\n    //TODO: fix dev's spelling\n    //want to test this\n    public AddSubscribtionResponse AddSubscribtion(AddSubscribtionRequest request)\n    {\n        return ExecuteQueryProc&lt;AddSubscribtionResponse&gt;(\"spAddAppToUserGroup\", request).First();\n    }\n\n    //I want to stub or interaction test the call to here\n    #if DEBUG\n    internal\n    #endif\n    List&lt;T&gt; ExecuteQueryProc&lt;T&gt;(string query, object parameters = null)\n    {\n        var cn=GetConnection();\n        //DatabaseCommand is a static class =(\n        return DatabaseCommand.ExecuteQueryProc&lt;T&gt;(cn, query, parameters);\n    }\n}\n</code></pre>\n\n<p>Every attempt I've made at getting Rhino to stub or intercept the Execute Query proc method has failed.</p>\n\n<pre><code>var service = MockRepository.GeneratePartialMock&lt;AppService&gt;(null);\nservice.Stub(f =&gt; f.ExecuteQueryProc&lt;AddSubscribtionRequest&gt;(null, null)).IgnoreArguments().Return(new List&lt;AddSubscribtionRequest&gt;());\n\nvar expected = new AddSubscribtionRequest();\nvar actual = service.AddSubscribtion(expected);\n</code></pre>\n\n<p>Throws \n<code>System.InvalidOperationException: ExecuteReader: CommandText property has not been initialized</code></p>\n"},{"tags":[".net","wcf","unit-testing","dependency-injection"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":199,"score":2,"question_id":8854590,"title":"WCF and dependency injection","body":"<p>I have a set of WCF services implemented using dependency injection for testing purposes. </p>\n\n<p>Basically these services sometimes call each other, so on my Unit Tests I could mock both repositories and WCF services just using interfaces and injecting them as components in the service constructors.</p>\n\n<p>This is great as I can test these services properly without any dependency.</p>\n\n<p>I have also implemented my own proxies in order to avoid using Visual Studio  service reference (which creates a lot of rubbish), so I'm using ChannelFactory CreateChannel method.</p>\n\n<p>I'm a bit worried about what happens on the  live enviroment.</p>\n\n<p>What happens is that my WCF service that calls another WCF service has only one instance of this external component injected in the constructor and because of this I cannot dispose this object once used.</p>\n\n<p>Is this going to create troubles?\nWill garbage collector take care of it? \nWill connections remain open? \nIs this approach wrong?</p>\n\n<p>Thanks a lot.</p>\n"},{"tags":["javascript","unit-testing","event-handling","tdd","automated-tests"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":7725793,"title":"Unit testing event handlers in IE","body":"<p>Part of my application prevents the default action on an event only under certain circumstances. I'm working strictly TDD, and so I need to test that the default event is being prevented at the right time. This is easy in most modern browsers, as <code>dispatchEvent</code> et al will trigger both my event handler and the default, and I can test if the default event (hash change) has happened. IEs fireEvent doesn't do that though... It only triggers my handler, so there's no way to test if it's done as it should without a manual click happening somewhere.</p>\n\n<p>My event handler isn't exposed, and even if it was, testing if it returned false would be a bit too close to testing the implementation. Is there a textbook way for handling this that I'm missing?</p>\n"},{"tags":["django","unit-testing","messages","middleware"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":193,"score":3,"question_id":11938164,"title":"Why don't my Django unittests know that MessageMiddleware is installed?","body":"<p>I'm working on a Django project and am writing unittests for it. However, in a test, when I try and log a user in, I get this error:</p>\n\n<pre><code>MessageFailure: You cannot add messages without installing django.contrib.messages.middleware.MessageMiddleware\n</code></pre>\n\n<p>Logging in on the actual site works fine -- and a login message is displayed using the MessageMiddleware.</p>\n\n<p>In my tests, if I do this:</p>\n\n<pre><code>from django.conf import settings\nprint settings.MIDDLEWARE_CLASSES\n</code></pre>\n\n<p>Then it outputs this:</p>\n\n<pre><code>('django.middleware.cache.UpdateCacheMiddleware',\n'django.middleware.common.CommonMiddleware',\n'django.contrib.sessions.middleware.SessionMiddleware',\n'django.middleware.csrf.CsrfViewMiddleware',\n'django.contrib.auth.middleware.AuthenticationMiddleware',\n'django.contrib.messages.middleware.MessageMiddleware',\n'django.middleware.clickjacking.XFrameOptionsMiddleware',\n'django.middleware.cache.FetchFromCacheMiddleware',\n'debug_toolbar.middleware.DebugToolbarMiddleware')\n</code></pre>\n\n<p>Which appears to show the MessageMiddleware is installed when tests are run.</p>\n\n<p>Is there an obvious step I'm missing?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>After suggestions below, it does look like it's a settings thing.</p>\n\n<p>I currently have <code>settings/__init__.py</code> like this:</p>\n\n<pre><code>try:\n    from settings.development import *\nexcept ImportError:\n    pass\n</code></pre>\n\n<p>and <code>settings/defaults.py</code> containing most of the standard settings (including <code>MIDDLEWARE_CLASSES</code>). And then <code>settings.development.py</code> overrides some of those defaults like this:</p>\n\n<pre><code>from defaults import *\n\nDEBUG = True\n# etc\n</code></pre>\n\n<p>It looks like my dev site itself works fine, using the development settings. But although the tests seem to load the settings OK (both defaults and development) <code>settings.DEBUG</code> is set to <code>False</code>. I don't know why, or whether that's the cause of the problem. </p>\n"},{"tags":["ios","unit-testing","core-data","ocunit","core-data-migration"],"answer_count":1,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":183,"score":11,"question_id":11959447,"title":"How can I unit test a Core Data migration?","body":"<p>I'm building a mapping model for my migration with a custom entity migration policy, and I'd really like to build some unit tests for this migration. The migration seems to work correctly when I run the app, but my NSEntityMigrationPolicy subclass methods are not called at all when I run the migration via a unit test.</p>\n\n<p>I'm using Xcode's built-in OCUnit framework.</p>\n\n<p>My test code:</p>\n\n<pre><code>- (void)test1to2Migration_appIdentifierMoved {\n  [self createVersion1Store];\n\n  // TODO Perform migration\n  NSManagedObjectModel *version1Model = [self version1Model];\n  NSManagedObjectModel *version2Model = [self version2Model];\n\n  NSError *error = nil;\n  NSMappingModel *mappingModel = [NSMappingModel\n      inferredMappingModelForSourceModel:version1Model\n      destinationModel:version2Model error:&amp;error];\n  STAssertNotNil(mappingModel, @\"Error finding mapping model: %@\", error);\n\n  NSMigrationManager *migrationManager =\n      [[[NSMigrationManager alloc]\n        initWithSourceModel:version1Model\n        destinationModel:version2Model]\n       autorelease];\n\n  BOOL migrationSucceeded =\n      [migrationManager migrateStoreFromURL:self.version1StoreURL\n           type:NSSQLiteStoreType\n           options:nil\n           withMappingModel:mappingModel\n           toDestinationURL:self.version2StoreURL\n           destinationType:NSSQLiteStoreType\n           destinationOptions:nil\n           error:&amp;error];\n  STAssertTrue(migrationSucceeded, @\"Error migrating store: %@\", error);\n\n  // TODO Verify appIdentifier is moved from Project to its Tests\n\n  [self deleteTempStores];\n}\n</code></pre>\n\n<p>My mapping model specifies a custom NSEntityMigrationPolicy that defines the <code>-createRelationshipsForDestinationInstance:entityMapping:manager:error:</code> method, but my policy is never called from the unit test. When I run the migration, the model is modified to the new version -- the expected attributes show up in the right places.</p>\n\n<p>Any ideas how I can get my migration policy to work in a unit test?</p>\n"},{"tags":["javascript","unit-testing","google-chrome-extension","google-chrome-devtools"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":204,"score":1,"question_id":8579881,"title":"Chrome Extension to run javascript unit tests","body":"<p>is there currently any chrome / browser extension to unit test javascript on a page?</p>\n\n<p>just to be clear, i'm not looking to test the extension itself, rather a tool to run tests on the current page.</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","tdd","vsts2010"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12008782,"title":"Parallel.ForEach causing test to timeout","body":"<p>I am working with visual studio test tools and Rhino mocks.</p>\n\n<p>I am currently writing a unit test on a method that uses Parallel.ForEach to process data. This is the method I want to test:</p>\n\n<pre><code>    var exceptions = new ConcurrentQueue&lt;Exception&gt;();\n\nParallel.ForEach(messages, emailMessage =&gt;\n{\n    try\n        {\n            this.Insert(emailMessage)\n        }\n        catch (Exception exception)\n        {\n                exceptions.Enqueue(exception);\n        }\n});\n\nif (exceptions.Count &gt; 0)\n{\n    throw new AggregateException(exceptions);\n}\n</code></pre>\n\n<p>And this is my test:</p>\n\n<pre><code>[ExpectedException(typeof(AggregateException))]\npublic void MyTest()\n{\n    this.target = new MyClassToTest();\n\n    // stub the throwing of an exception\n    this.target.Stub(s =&gt; s.Insert(null)).IgnoreArguments().Throw(new ArgumentNullException());\n\n    // perform the test\n    this.target.Send();\n}\n</code></pre>\n\n<p>In my test, I stub the insert method and force it to throw and exception. The expectation on my test is that an AggregateException is thrown. If I run the test within Visual Studio it runs fine but on a continuous integration server, the test intemetently times out. I expect this is an issue around the nature of Parallel.ForEach where the iterations of the loop are done in parallel. </p>\n\n<p>Can anyone see where I am going wrong above or how I can alter my test to prevent it from timing out?</p>\n"},{"tags":["python","unit-testing","properties","variable-assignment","assertraises"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12009587,"title":"Testing failure of an assignment with unittest","body":"<p>One of my attributes is a property where the setter calls a validation function that raises an exception if the new value is invalid:</p>\n\n<pre><code>pos.offset = 0\n# @offset.setter calls validate(offset=0)\n# PositionError: Offset may not be 0.\n</code></pre>\n\n<p>I'm trying to add a test to ensure that this fails. However, I can't figure out how to get assertRaises to work with an assignment. </p>\n\n<p>The normal syntax of assertRaises requires a method, not an attribute/property:</p>\n\n<pre><code>self.assertRaises(PositionError, pos.offset, 0)\n# TypeError: 'int' object is not callable\n</code></pre>\n\n<p>The other forms I've tried are invalid Python:</p>\n\n<pre><code>self.assertRaises(PositionError, pos.offset = 0)\n# SyntaxError: Keyword can't be an expression\nself.assertRaises(PositionError, lambda: pos.offset = 0)\n# SyntaxError: lambda cannot contain assignment\n</code></pre>\n\n<p><strong>How do I test failure of assignment to a property?</strong></p>\n\n<p><em>Note: Python 2.6, I know unittest has some new features in 2.7</em></p>\n"},{"tags":["c#","unit-testing","visual-studio-2008","code-coverage","ncover"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12006716,"title":"Best way to get an accessable class in all of my projects","body":"<p>I need to declare an attribute for coverage exclusion in my code, the issue is that i have a project group and i wish to create it somewhere where i can access it from all projects when i need it, right now i have it outside of the namespaces so it would be easier to use,  and its declared in each project like:</p>\n\n<pre><code>public class CoverageExcludeAttribute : Attribute\n{\n\n}\n</code></pre>\n\n<p>is there any better way to achieve this goal in a way it could be access anywhere in my project group and declared only once, without having to add its namespace (<em>e.g</em> by using the global namespace) to each file i use the attribute in?</p>\n\n<p>Thank you</p>\n"},{"tags":["unit-testing","cakephp","testing","xdebug","before-filter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12006084,"title":"x-debug code coverage beforeRender function CakePHP","body":"<p>i have problem with function beforeRender to cover its by x debug and actually by my test. </p>\n\n<pre><code>public function beforeRender() {\n    parent::beforeRender();\n\n    $varArray = array();\n    if (isset($this-&gt;request-&gt;params['pass'][0])) {\n        $id = $this-&gt;request-&gt;params['pass'][0];\n        $varArray['articleId'] = $id;\n    }\n\n    $varArray['mayAdmin'] = $this-&gt;isAdmin;\n    $this-&gt;set('actions', $this-&gt;createActions($this-&gt;request-&gt;action, $varArray));\n}\n</code></pre>\n\n<p>As u see in this its make some $varArray wchich are later in use and while test is not running this part before every other action  thare are problems with rest ;/ </p>\n"},{"tags":["c#","unit-testing","c#-4.0","nunit"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":101,"score":3,"question_id":12004869,"title":"Unit testing a method having parameter of interface type","body":"<p>I have the following code:</p>\n\n<pre><code>public BooksInfo GetBookInfo(IBookMarket bookinfo)\n{\n    // Implementation omitted\n}\n</code></pre>\n\n<p>I can only post the method signature. Now I need to pass a null value as <code>bookinfo</code> and test whether exception is raised or not.</p>\n\n<p>Can someone explain briefly how can I do this unit test using NUnit?</p>\n\n<p><strong>Edit Question:</strong></p>\n\n<p><em><strong>My Unit Test Code</em></strong></p>\n\n<pre><code>[TestFixture]\n\npublic class FutureTests\n{\n    //[Test]\n    //[ExpectedException(typeof(NullReferenceException),\n    // ExpectedMessage = \"No value provided!\")]\n    public void GetPriceData_PassNull_ThrowsException()\n    {\n        Assert.That(\n                () =&gt; library.GetPriceData(null),\n                Throws.InstanceOf&lt;ArgumentNullException&gt;()\n                .With.Property(\"\").EqualTo(\"pricer\"));\n\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","naming-conventions"],"answer_count":13,"favorite_count":35,"up_vote_count":61,"down_vote_count":1,"view_count":16169,"score":60,"question_id":155436,"title":"Unit test naming best practices","body":"<p><strong>What are the best practices for naming unit test classes and test methods?</strong></p>\n\n<p>This was discussed on SO before, at <a href=\"http://stackoverflow.com/questions/96297/naming-conventions-for-unit-tests\">What are some popular naming conventions for Unit Tests?</a></p>\n\n<p>I don't know if this is a very good approach, but currently in my testing projects, I have one-to-one mappings between each production class and a test class, e.g. <code>Product</code> and <code>ProductTest</code>.</p>\n\n<p>In my test classes I then have methods with the names of the methods I am testing, an underscore, and then the situation and what I expect to happen, e.g. <code>Save_ShouldThrowExceptionWithNullName()</code>.</p>\n"},{"tags":["ruby","unit-testing","rspec","tdd"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":11988819,"title":"Avoiding duplication when testing mutator and accessor methods","body":"<p>Let's say you have a simple class like:</p>\n\n<pre><code>class Box\n  def initialize\n    @widgets = []\n  end\n\n  def add_widget(widget)\n    @widgets &lt;&lt; widget\n  end\n\n  def widgets\n    @widgets\n  end\nend\n</code></pre>\n\n<p>I would write a test which looks something like this:</p>\n\n<pre><code>describe Box do\n  describe \"#initialize\" do\n    it \"creates an empty box\"\n      Box.new.widgets.should == []\n    end\n  end\n\n  describe \"#add_widget\" do\n    it \"adds a widget to the box\"\n      widget = stub('widget')\n      box = Box.new\n      box.add_widget(widget)\n      box.widgets.should == [widget]\n    end\n  end\n\n  describe \"#widgets\" do\n    it \"returns the list of widgets\"\n      widget = stub('widget')\n      box = Box.new\n      box.add_widget(widget)\n      box.widgets.should == [widget]\n    end\n  end\nend\n</code></pre>\n\n<p>Note how the last two tests end up being identical. I'm struggling with how to avoid these overlapping cases. I'm implicitly testing #widgets in the first two cases but I feel there should be also be an explicit test. However, the code for this ends up being identical to the 2nd case.</p>\n\n<p>If a class has 3 public methods then I would expect at least one test corresponding to each of those methods. Am I wrong?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I found <a href=\"http://xprogramming.com/articles/contradiction-test-everything-but-not-accessors/\" rel=\"nofollow\">this article</a> by Ron Jeffries which advises against testing simple accessors.</p>\n"},{"tags":["java","unit-testing","testng"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":847,"score":4,"question_id":2952202,"title":"How do I get the name of the test method that was run in a testng tear down method?","body":"<p>Basically I have a tear down method that I want to log to the console which test was just run. How would I go about getting that string?</p>\n\n<p>I can get the class name, but I want the actual method that was just executed.</p>\n\n<pre><code>Class testSomething() {\n    @AfterMethod\n    public void tearDown() {\n        system.out.println('The test that just ran was....' + getTestThatJustRanMethodName()');\n    }\n    @Test\n    public void testCase() {\n       assertTrue(1==1);\n    }\n}\n</code></pre>\n\n<p>should output to the screen: \"The test that just ran was.... testCase\"</p>\n\n<p>However I don't know the magic that getTestThatJustRanMethodName should actually be.</p>\n"},{"tags":["unit-testing","testing","selenium","automated-tests"],"answer_count":7,"favorite_count":0,"up_vote_count":4,"down_vote_count":3,"view_count":1002,"score":1,"question_id":746118,"title":"testing with selenium","body":"<p>I'm a complete selenium newbie. Where should I start if I want to learn how to use it?</p>\n"},{"tags":["unit-testing","testing","selenium"],"answer_count":16,"favorite_count":15,"up_vote_count":24,"down_vote_count":0,"view_count":2835,"score":24,"question_id":616810,"title":"What's the Point of Selenium?","body":"<p>Ok, maybe I'm missing something, but I really don't see the point of Selenium. What is the point of opening the browser using code, clicking buttons using code, and checking for text using code? I read the website and I see how in theory it would be good to automatically unit test your web applications, but in the end doesn't it just take much more time to write all this code rather than just clicking around and visually verifying things work?</p>\n\n<p>I don't get it...</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":11995866,"title":"Unit Test ASP.Net View Function","body":"<p>In Razor, I can define a function within a view like this:</p>\n\n<pre><code>@functions{\n    internal string Foo(string text)\n    {\n        // Do Stuff\n    }\n}\n</code></pre>\n\n<p>Is it possible to unit test such a function?  If so, how?</p>\n"}]}
{"total":15323,"page":20,"pagesize":100,"questions":[{"tags":["java","unit-testing","junit","testng"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":232,"score":1,"question_id":6697834,"title":"How to look for JUnit and TestNG tests with no assertions?","body":"<p>I've been able to figure out how to go about looking for tests that aren't run.  Does anyone know how I can go about figuring out if a test that was run doesn't have an assertion?</p>\n"},{"tags":["c#","unit-testing","testing","tdd"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":103,"score":5,"question_id":11998967,"title":"Confused about why it's useful to unit test dummy objects","body":"<p>I'm reading <code>Clean Code: A Handbook of Agile Software Craftsmanship</code> and one of the examples involves a <code>Portfolio</code> class and a <code>TokyoStockExchange</code> class. However, <code>Portfolio</code> is not very testable because it depends on <code>TokyoStockExchange</code> as an external API to determine the value of the portfolio and such is quite a volatile lookup and not conducive to testing.</p>\n\n<p>So, they solve this by creating a common <code>StockExchange</code> interface and have <code>TokyoStockExchange</code> and <code>DummyStockExchange</code> both implement the base class. Thus, dependency inversion principle is attained and in the <code>PortfolioTest</code> class one can instantiate a <code>DummyStockExchange</code>, fix a stock price to a corporation, assign the <code>DummyStockExchange</code> instance to the portfolio, and add some stocks from that company to the portfolio, and then assert if the expected value is indeed the proper value. Here's the code:</p>\n\n<pre><code>public class PortfolioTest\n{\n    private DummyStockExchange exchange;\n    private Portfolio portfolio;\n\n    protected void setUp()\n    {\n        exchange = new DummyStockExchange();\n        exchange.fix(\"MSFT\", 100);\n        portfolio = new Portfolio(exchange);\n    }\n\n    public void GivenFiveMSFTTotalShouldBe500()\n    {\n        portfolio.add(5, \"MSFT\");\n        Assert.assertEquals(500, portfolio.value());\n    }\n}\n</code></pre>\n\n<p>My question, simply, is <em>why</em>?</p>\n\n<p>We were trying test if the <code>TokyoStockExchange</code> class worked in tandem with the <code>Portfolio</code> class. Obviously if we create another class with a new method that sets a stock price and then give the portfolio five of those stocks then everything will work. It just seems.. useless to test. I understand that <code>TokyoStockExchange</code> is basically impossible to test with <code>Portfolio</code> because of the changing stock prices but I don't understand how subbing in a rather useless test helps the situation.</p>\n\n<p>It all just seems akin to not knowing if our adder programs works but the only numbers available are randomly generated so we create a dummy class that gives us a 2 and test if <code>2 + 2 = 4</code>. Well yeah, obviously that is true. We can still break <code>TokyoStockExchange</code> and the test will still succeed because it's testing another class. If anything this all seems deceptive and it also results in having to write additional code just to test something we know is going to work.</p>\n\n<p>I think this is the biggest problem I have with understanding Unit Testing at this point. I know that I'm wrong I just have failed to see the light I guess. Hopefully someone can help me out.</p>\n"},{"tags":["unit-testing","wcf-client","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":347,"score":0,"question_id":11998918,"title":"WCF Web Service client unit test failed in Visual Studio 2012 when hosting on local IIS","body":"<p>So I tried to start writing Windows 8 Modern Style application in visual Studio 2012 using Test Driven approach.  I basically treat my Win8 WinRT as a client for tons of WCF Web service hosting on IIS.  So as for now, all of my unit tests are WCF Web service call.  </p>\n\n<p>All unit tests pass if the WCF web services are hosted in IIS on ANOTHER MACHINE.  However, all of them failed if I host the same set of web services on local IIS.  I already checked the manifest and made sure that the following items are checked:</p>\n\n<p>[x] Enterprise Authentication   </p>\n\n<p>[x] Internet (Client</p>\n\n<p>[x] Internet (Client and Server)</p>\n\n<p>[x] Private Networks (Client and Server)</p>\n\n<p>BTW:</p>\n\n<ul>\n<li>I wrote those tests in MSTest because it has native support to async and await, which is necessary for testing async web service call.</li>\n<li>I went ahead and start working on a simple Windows 8 Modern Style app and make Web Service (hosting in local IIS) call in the app, and I got NO ERROR.</li>\n</ul>\n\n<p>So I am very puzzled.  Does it have something to do with the Visual Studio 2012 Test Engine?  Is there something I can do to fix the problem.  I really want to continue doing the app in Test Driven style but I can't find another way to test my async unit tests.</p>\n\n<p>Any suggestion?</p>\n"},{"tags":["java","unit-testing","logging"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":11998713,"title":"Should we unit test logging?","body":"<p>It's usual to see logging functionality in the code</p>\n\n<pre><code>public class A {\n\nprivate static final Log LOG = LogFactory.getLog(A.class);\n</code></pre>\n\n<p>and usage </p>\n\n<pre><code>        } catch (Exception e) {\n           LOG.error(e.getMessage(), e);\n           throw e;\n        }\n</code></pre>\n\n<p>but I never saw even single unit test for such code. </p>\n\n<p>Off course I do test throwing exception and exception type, but should I write test for checking logging information ? I tend to think that logging is another part of system behavior, so it's quit logically to cover it in the tests.</p>\n\n<p>Assuming that I should cover it, means that I should change my original code to inject mock log and check that \"error\" method was invoked with expected message. But what to do if my original class is service and it's instantiated by spring, should I inject some logger as well as other dependencies ?</p>\n"},{"tags":["objective-c","unit-testing","xcode4.2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":53,"score":-1,"question_id":11997274,"title":"will apple refuse my none unit-testing application?","body":"<p>Well I'm new to Objective-C and programming at all (beginner) ... and I've done an iPhone app on Xcode .. I didn't knew about unit-testing before .. when I test my app it gives me error that includes the unit-tests are not implemented yet because I've checked the unit tests box in the start of making my application .. what if I've unchecked that box .. will apple refuse my application or what ?!</p>\n"},{"tags":["wcf","unit-testing","integration-testing","servicehost"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":11994846,"title":"How unit test WCF Services / Service Host initializes DI, AutoMapper, bootstrapping, global error handling properly?","body":"<p>I have several things that I haven't figured out how to test because they are tightly integrated to the WCF pipeline. Maybe I should ask how to integration test? Here's my situation, two parts:</p>\n\n<p>1) To bootstrap my DI (I'm using Unity Container), I have implemented a custom ServiceHostFactory. In this service host factory, I pass in my bootstrapper code (e.g. for AutoMapper and other things). </p>\n\n<p>How do I test all these items get <em>called</em> and that my configurations are correct? Granted, as I type this, maybe this should be considered integration testing? How do I host my service and test it with my tests?</p>\n\n<p>2) I also have a global error handler for my services. I'd like to write a mock test to throw an exception and verify that the global error handler is in fact catching them.</p>\n\n<p>Thanks!</p>\n\n<p>Update:\nMaybe my question isn't very clear, but after some more googling, I think <a href=\"http://www.typemock.com/blog/2009/06/11/wcf-tip-how-to-unit-test-an-errorprovider\" rel=\"nofollow\">this</a> is what I'm after</p>\n\n<p>Additional thoughts or pointers appreciated. Haven't tried it yet as I'm not sure which direction I should be going.</p>\n"},{"tags":["java","spring","unit-testing","spring-annotations"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":264,"score":0,"question_id":10434798,"title":"Spring annotations - good or bad?","body":"<p>I recently cam across a class like this:</p>\n\n<pre><code>public class SomeDao {\n   @Inject\n   private DataSource dataSource;\n\n   @Value(\"#{someMap['someDao.sql']}\")\n   private String sql;\n\n   private JdbcTemplate jdbcTemplate;\n\n   @PostConstruct\n   private void postConstruct() {\n      jdbcTemplate = new JdbcTemplate(dataSource);\n   }\n\n   ...\n}\n</code></pre>\n\n<p>Now I would like to unit test this class by injecting the DataSource and the SQL string. As far as I can see, there are two options for this:</p>\n\n<ol>\n<li>Load up an application context which will be slow and most likely load a whole lot of stuff that I don't need for the test</li>\n<li>Use reflection to set the private properties and call the private postConstruct() method</li>\n</ol>\n\n<p>In the days before spring annotations, the class would have been written like this:</p>\n\n<pre><code>public class SomeDao {\n   private String sql;\n   private JdbcTemplate jdbcTemplate;\n\n   public SomeDao(DataSource dataSource, String sql) {\n      this.jdbcTemplate = new JdbcTemplate(dataSource);\n      this.sql = sql;\n   }    \n   ...\n}\n</code></pre>\n\n<p>And I could have easily tested this class without the need for reflection or spring. My class was a pure pojo and had no spring dependencies.</p>\n\n<p>So, are spring annotations a good thing or are they a step backwards? Are there times where I shoulud be using them and times when I should use the old XML app context?</p>\n\n<p>Thanks,\nLance.</p>\n"},{"tags":[".net","unit-testing","nunit","task-parallel-library","testdriven.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":11977531,"title":"Using C# Task hang nunit and keep running in background with Testfligth. How unit test it?","body":"<p>I'm building a task-based server. My problem is how prove with unit test is working rigth:</p>\n\n<p>The method below is the core of the app, and need to be solid. I need it to execute the chain of task, sleep if the date to start it is in the future and so on. However when I run it with the nuni gui it hang-up forever, and with <a href=\"http://www.testdriven.net/\" rel=\"nofollow\">http://www.testdriven.net/</a> add-on it run, and get it running in the background, so I can't stop it from the VS IDE (ie, run, then finish according to the IDE, but keep running in the background and need to kill testdriven to stop it)</p>\n\n<pre><code>   public Task RunPlan(plan thePlan)\n        {\n            List&lt;BackupTask&gt; tasks = this.nextTasks(thePlan);\n            List&lt;Task&gt; backupTasks = new List&lt;Task&gt;();\n\n            TimeSpan wait;\n            int i = 1;\n            Task run = new Task(() =&gt;\n            {\n                Logging.Debug(\"Starting {0}\", thePlan);\n            });\n            //  Create a new token source\n            var primaryTokenSource = new CancellationTokenSource();\n            //  Create the cancellation token to pass into the Task\n            CancellationToken token = primaryTokenSource.Token;\n\n            workerTokens.GetOrAdd(run, primaryTokenSource);\n\n            backupTasks.Add(run);\n\n            foreach (var t in tasks)\n            {\n                BackupTask job = t;\n\n                Task next = backupTasks.Last().ContinueWith(x =&gt;\n                {\n                    //  Check to see if we've been cancelled\n                    if (token.IsCancellationRequested)\n                    {\n                        Logging.Debug(\"Cancelled\");\n                        return;\n                    }\n                    //Si es en el futuro, esperar\n                    wait = job.SuggestedDate - DateTime.Now;\n\n                    if (wait.TotalSeconds &gt; 0)\n                    {\n                        Logging.Debug(\"Sleeping {0} secs..\", wait.TotalSeconds);\n                        //http://stackoverflow.com/questions/1141617/thread-interrupt-to-stop-long-sleep-at-app-shutdown-is-there-a-better-approach\n                        //Thread.Sleep(TimeSpan.FromSeconds(wait.TotalSeconds));\n                        while (!stopping)\n                        {\n                            lock (padlock)\n                            {\n                                Monitor.Wait(padlock, TimeSpan.FromSeconds(wait.TotalSeconds));\n                            }\n                        }\n                    }\n\n                    //  Check to see if we've been cancelled\n                    if (token.IsCancellationRequested)\n                    {\n                        Logging.Debug(\"Cancelado\");\n                        return;\n                    }\n\n                    job.doWork();\n                },TaskContinuationOptions.LongRunning);\n                backupTasks.Add(next);\n            }\n\n            backupTasks.First().Start();\n\n            return backupTasks.Last();\n        }\n</code></pre>\n\n<p>And the test:</p>\n\n<pre><code>        [Test]\n        public void testFullBackup()\n        {\n            taskMgr.RunPlan(plans.First()).Wait();\n            Assert.AreEqual(0, taskMgr.workerTokens.Count());\n        }\n</code></pre>\n"},{"tags":["iphone","unit-testing","ocunit"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1116,"score":4,"question_id":4525394,"title":"running test Case using OCUnit not working?","body":"<p>when run the target for test cases nothing is happening instead it is showing warning message </p>\n\n<p>warning: Skipping tests; the iPhoneSimulator platform does not currently support application-hosted tests (TEST_HOST set).</p>\n\n<p>i am using xcode 3.2.5 and iOS4.2 ..........</p>\n"},{"tags":["python","unit-testing","email"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":69,"score":0,"question_id":11993671,"title":"Testing email implementation in Python","body":"<p>Assuming an email implementation as simple as the accepted answer on this <a href=\"http://stackoverflow.com/questions/348392/receive-and-send-emails-in-python\">post</a>, what can be the best way to write a unit test for the implementation? (I do not want to shoot emails to a valid recipient as part of testing the implementation)</p>\n"},{"tags":["asp.net-mvc","unit-testing","tdd","dataannotations"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":137,"score":4,"question_id":11835561,"title":"TDD: What is best practice to test DataAnnotations in ASP.NET MVC 3?","body":"<p>I'm participating in a project using ASP.NET MVC 3 and DataAnnotations. We have DataAnnotations in ViewModels classes. </p>\n\n<p>How do you write unit tests for these validations?</p>\n\n<p>ViewModel example:</p>\n\n<pre><code>public class AchievementVM\n{\n    [Required(ErrorMessage = \"The title field is required.\")]\n    [StringLength(100, ErrorMessage = \"Title must be 100 characters or less.\")]\n    public string Title { get; set; }\n}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","migration","yii","database-migration"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":146,"score":0,"question_id":9547473,"title":"Yii: how to perform db migration on test database?","body":"<p>Is there a command that performs migrations on test database in Yii?</p>\n"},{"tags":["ruby-on-rails","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":8013773,"title":"testing for method_defined? on ActiveRecord classes doesn't work until an instantiation","body":"<p>I'm having a problem testing for methods that correspond to the database columns of an ActiveRecord. Take any model you've got (in my case Document), and do the following:</p>\n\n<pre><code>$  rails c\nLoading development environment (Rails 3.0.9)\n&gt;&gt; Document.method_defined?(:id)\n=&gt; false\n&gt;&gt; Document.new\n=&gt; #&lt;Document id: nil, feed_id: nil &gt;\n&gt;&gt; Document.method_defined?(:id)\n=&gt; true\n</code></pre>\n\n<p>There is obviously some ActiveRecord lifecycle work going on as a prerequisite to .new() that's adding all the database columns as methods to the class.</p>\n\n<p>Where this really complicates things is during unit testing. I'd like have a class that in runtime accepts ActiveRecord classes and does some validation on them</p>\n\n<p>For example</p>\n\n<pre><code>class Foo &lt; ActiveRecord::Base\n  def work1\n    # something\n  end\nend\nclass Command\n  def operates_on(clazz, method)\n    # unless I add a \"clazz.new\" first, method_defined? will fail \n    # on things like :id and :created_at\n    raise \"not a good class #{clazz.name}\" if ! clazz.method_defined?(method)\n    # &lt;logic here&gt;\n  end\nend\n\ndescribe Command do\n  it \"should pass if given a good class\" do\n    Command.new.operates_on(Foo,:work1)\n  end\n  it \"should pass if given a database column\" do\n    # this FAILS\n    Command.new.operates_on(Foo,:id)\n  end\n  it \"should raise if given an invalid class/method combo\" do\n    lambda { Command.new.operates_on(Foo,:non_work) }.should raise_error\n  end\nend\n</code></pre>\n\n<p>What can I do to assert (other than making a junk instance with .new()) that the ActiveRecord has done its initialization? </p>\n"},{"tags":["windows","unit-testing","cakephp-2.0","xdebug"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":11987348,"title":"Installing x-debug code coverage - postgres","body":"<p>i tried to install xdebug few times, but still cant reach my goal. Will be gratefull for any ideas.Im working on postgres Database. I tried to :</p>\n\n<pre><code>zend_extension_ts=\"C:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\modules\\php_xdebug-2.2.1-5.3-vc9.dll\"\n; ;;;;;;;;;;;;;;;;;;\n; Module Settings ;\n[xdebug]\n; ;;;;;;;;;;;;;;;;;;\nxdebug.remote_host=\"localhost\"\nxdebug.remote_enable=1\nxdebug.remote_port=8080\nxdebug.remote_handler=\"dbgp\"\n</code></pre>\n"},{"tags":[".net","unit-testing","mocking","moq","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":11989717,"title":"All invocation on the mock must have a corresponding setup","body":"<p>Hej Hej, \nI am new at creating mock objects for unit tests. I have some legacy code I want to unit test. \nI created a first moq test but I am getting the following exception:</p>\n\n<p><strong>Moq.MockException:IConnection.SendRequest(ADF.Messaging.Contract.ConfigServer.GetDataVersionRequest) invocation failed with mock behavior Strict. All invocations on the mock must have a corresponding setup.</strong></p>\n\n<p>be aware this is a gigantic post ;-)</p>\n\n<p>Importand pieces of code:</p>\n\n<p>Property on class:</p>\n\n<pre><code>  Public Property Connection() As IConnection\n            Get\n                Return _connection\n            End Get\n            Set(ByVal value As IConnection)\n                _connection = value\n            End Set\n        End Property\n</code></pre>\n\n<p>The method that should be tested: (_connection) is a actually a class that creates a tcp socket and I want to mock that property so the SendRequest returns what I want.</p>\n\n<pre><code> Public Function GetVersion(ByVal appID As Contract.ApplicationID) As Contract.DataVersion\n        EnsureConnected()\n        Dim req As GetDataVersionRequest = New GetDataVersionRequest(appID)\n\n        Dim reply As CentralServiceReply = _connection.SendRequest(req) //code I want to mock\n        Utils.Check.Ensure(TypeOf reply Is GetDataVersionReply, String.Format(\"Unexpected type: {0}, expected GetDataVersionReply!\", reply.GetType()))\n\n        Dim version As Contract.DataVersion = CType(reply, GetDataVersionReply).Version\n        version.UpgradeOwners()\n        If (Not version.IsSupported) Then\n            Return Contract.DataVersion.UNSUPPORTED\n        End If\n\n        Return version\n    End Function\n</code></pre>\n\n<p>Test Method:</p>\n\n<pre><code>[TestMethod]\n        public void TestMethod2()\n        {\n            Contract.CentralServiceRequest req = new Contract.ConfigServer.GetDataVersionRequest(new ApplicationID(\"AMS\", \"QA\"));\n\n            DataVersion v = new DataVersion();\n            v.AppVersion = \"16\";\n            CentralServiceReply reply = new GetDataVersionReply(v);\n\n            var ConnectionMock = new Mock&lt;IConnection&gt;(MockBehavior.Strict);\n            ConnectionMock.Setup(f =&gt; f.SendRequest(req)).Returns(reply);\n\n            var proxy = new ConfigServerProxy(new ApplicationID(\"AMS\", \"QA\"), \"ws23545\", 8001);\n            proxy.Connection = ConnectionMock.Object; //assign mock object\n\n            DataVersion v2 = proxy.GetVersion(new ApplicationID(\"AMS\", \"QA\"));\n            Assert.AreEqual(v.AppVersion, v2.AppVersion);\n        }\n</code></pre>\n\n<p>When I debug the unit test I see that when proxy.GetVersion is executed on the line _connection.SendRequest we get the error. Also when I watch the variable (_connection) in the watch window I see it's the moq object. So I suppose that property assignment went well. </p>\n\n<p>Does anybody see where I went wrong? Or if you are having tip's feel free ;-)</p>\n\n<p>Kind regards, </p>\n\n<p>Jonathan</p>\n"},{"tags":["python","django","unit-testing","testing","django-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":11982638,"title":"How to separate test types using Django","body":"<p>I have a series of tests in Django that are categorised into various \"types\", such as \"unit\", \"functional\", \"slow\", \"performance\", ...</p>\n\n<p>Currently I'm annotating them with a decorator that is used to only run tests of a certain type (similar to @skipIf(...)), but this doesn't seem like an optimal approach.</p>\n\n<p>I'm wondering if there is a better way to do separation of tests into types?  I'm open to using different test runners, extending the existing django testing framework, building suites or even using another test framework if that doesn't sacrifice other benefits.</p>\n\n<p>The underlying reason for wanting to do this is to run an efficient build pipeline, and as such my priorities are to:</p>\n\n<ul>\n<li>ensure that my continuous integration runs check the unit tests first,</li>\n<li>possibly parallelise some test runs</li>\n<li>skip some classes of test altogether</li>\n</ul>\n"},{"tags":["ruby","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":11983199,"title":"How to test a method which uses caller in ruby?","body":"<p>I have a private method which returns something based on the caller method:</p>\n\n<pre><code>private\ndef aPrivateMethod\n  r = nil\n  caller_method = caller[0][/`([^']*)'/, 1]\n\n  case caller_method\n     when \"method_1\"\n        r = \"I was called by method_1\"\n     when \"method_2\"\n        r = \"I was called by method_2\"\n  end\n\n  return r\nend\n</code></pre>\n\n<p>When writing the test unit the method name calling this private method will not be method_1 nor method_2, it will be something beginning with test and I cannot find a solution to return a pass from the test.</p>\n"},{"tags":["unit-testing","blackberry","intellij-idea"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":11987108,"title":"Developing for BlackBerry with IntelliJ","body":"<p>I wonder if someone has idea about next.</p>\n\n<p>I'm developing for BlackBerry. IDEA doesn't recognize RIM installation as JSDK or Mobile SDK. So I have create project without SDK and attach RIM jar file as dependency. </p>\n\n<p>I'm trying to write as much as possible unit test with JUnit and Mockito but to run them IDEA requires JSDK. So I created additional module where I set JSDK, correct language level and it works. It's already hassle to create additional module (better if we could set JSDK and other compiler, runtime options for code and tests) but I was quite happy.</p>\n\n<p>I have also dependencies for some common libraries which we use in android and J2ME also. I added them as modules with JSDK 1.6 and language level 1.3. And I able to develop and run test on it also.</p>\n\n<p>But I got issue with LEDA EAP. IDEA now complaints about incompatibility with <code>java.lang</code> because it found them both in RIM jar and JSDK for libraries. And now I'm thinking about next hassle to fix my favorite ide. Sure it's EAP and things could be changed. </p>\n\n<p>But anyone has any recommendation or similar situation setup?</p>\n"},{"tags":["c#","unit-testing","oracle-coherence"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":452,"score":0,"question_id":885496,"title":"Testing an Oracle Coherence IPortableObject Implementation in .NET","body":"<p>In order to get good test coverage, I want to test the <code>WriteExternal</code> and <code>ReadExternal</code> methods of <code>IPortableObject</code> (as described at <a href=\"http://coherence.oracle.com/display/COH34UG/Configuration%2Band%2BUsage%2Bfor%2B.NET%2BClients#ConfigurationandUsagefor.NETClients-CreatinganIPortableObjectImplementation%28.NET%29\" rel=\"nofollow\">Creating an IPortableObject Implementation (.NET)</a> ).</p>\n\n<p>Here is code similar to what I have in my test method (which I like, and it works).</p>\n\n<pre><code>Person person = new Person { Name = \"John Doe\" };\nPerson personCopy = CoherenceTestHelper.CopyUsingPofSerialization&lt;Person&gt;(person);\nAssert.AreEqual(person, personCopy);\n</code></pre>\n\n<p>But to get this to work, I had do subclass <code>PofStreamWriter</code> to override <code>BeginProperty</code> and <code>PofStreamReader</code> to override <code>AdvanceTo</code>.  To me this smells a little funny, but I couldn't come up with a better solution.  Below is my actual code for my CoherenceTestHelper.</p>\n\n<p><strong>Question:</strong> Has anybody else unit tested their <code>IPortableObject</code> implementation a better way?  </p>\n\n<pre><code>public static class CoherenceTestHelper\n{\n    public static T CopyUsingPofSerialization&lt;T&gt;(T ipoIn) where T : IPortableObject, new()\n    {\n        T ipoOut = new T();\n\n        IPofContext context = new SimplePofContext();\n        using (MemoryStream ms = new MemoryStream())\n        {\n        IPofWriter writer = new MyPofStreamWriter(new DataWriter(ms), context);\n        ipoIn.WriteExternal(writer);\n\n        ms.Seek(0, 0);\n        IPofReader reader = new MyPofStreamReader(new DataReader(ms), context);\n        ipoOut.ReadExternal(reader);\n        }\n\n        return ipoOut;\n    }\n\n    private class MyPofStreamWriter : PofStreamWriter\n    {\n        public MyPofStreamWriter(DataWriter writer, IPofContext context)\n        : base(writer, context)\n        {\n        }\n\n        protected override void BeginProperty(int index)\n        {\n        }\n    }\n\n    private class MyPofStreamReader : PofStreamReader\n    {\n        public MyPofStreamReader(DataReader reader, IPofContext context)\n        : base(reader, context)\n        {\n        }\n\n        protected override bool AdvanceTo(int index)\n        {\n        return true;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["javascript","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":11985660,"title":"Fake Date object in Javascript test","body":"<p>I use <a href=\"http://busterjs.org/\" rel=\"nofollow\">buster.js</a> and I want to test a function returning the age of a person from her year of birth. My test look like this:</p>\n\n<pre><code>\"Should get correct age from year\": function () {\n    assert(getAgeFromYear(1990) === 22);\n}\n</code></pre>\n\n<p>This will only stay green until the end of 2012. How can I fake the date object in buster.js so that it will be valid in the next years?</p>\n"},{"tags":["unit-testing","node.js","unicode","console","mocha"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":96,"score":3,"question_id":11809598,"title":"Mocha test output fonts missing?","body":"<p>I am running my Mocha unit tests like below (with output)</p>\n\n<pre><code>[jiewmeng@JM Tickle]$ cake test-ui\npath.existsSync is now called `fs.existsSync`.\n\n\n  hello\n    ��� should pass \n    ��� should pass 2 \n\n  Home page\n    ��� should have a title of Express (72ms)\n\n\n  ��� 3 tests complete (77ms)\n</code></pre>\n\n<p>As you can see (hopefully), I am having \"?\" instead of ticks/crosses I'd expect? I think I am missing some fonts? Which are they? I am on Arch Linux</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>$ locale\nLANG=en_US.UTF-8\nLC_CTYPE=\"en_US.UTF-8\"\nLC_NUMERIC=\"en_US.UTF-8\"\nLC_TIME=\"en_US.UTF-8\"\nLC_COLLATE=\"en_US.UTF-8\"\nLC_MONETARY=\"en_US.UTF-8\"\nLC_MESSAGES=\"en_US.UTF-8\"\nLC_PAPER=\"en_US.UTF-8\"\nLC_NAME=\"en_US.UTF-8\"\nLC_ADDRESS=\"en_US.UTF-8\"\nLC_TELEPHONE=\"en_US.UTF-8\"\nLC_MEASUREMENT=\"en_US.UTF-8\"\nLC_IDENTIFICATION=\"en_US.UTF-8\"\nLC_ALL=\n</code></pre>\n\n<p>Font is DejaVu Sans Mono Book</p>\n"},{"tags":["unit-testing","ios5","ocunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":11820399,"title":"Unit test for comparing return string from server","body":"<p>I am trying to learn unit tests. Following is my first ever written unit test for comparing string returned from the server. I am sure it's not perfect the way I handled the internet connection's availability and nsnotification. Test testGetURLEncodedString always printed pass as there is no assert statement in it. I can't put assert there as I have to compare the returned result from the server after response is received. Could anyone please suggest me to correct way of doing this please.</p>\n\n<pre><code>#import \"MyAppTests.h\"\n\n@interface MyAppTests()\n    @property(nonatomic) AppDelegate *delegate;\n@end\n\n@implementation MyAppTests\n\n@synthesize delegate = _delegate;\n\n- (void)setUp\n{\n    [super setUp];\n\n    self.delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];\n    if(![self.delegate internetConnectionAvailable])\n    {\n      STFail(@\"Internet is not reachable.\");\n      exit(-1);\n    }\n}\n\n- (void)tearDown\n{\n    _delegate = nil;\n     [super tearDown];\n}\n\n- (void)testDelegate\n{\n     STAssertNotNil(self.delegate, @\"Cannot find the application delegate\");\n}\n\n- (void)testGetURLEncodedString\n{\n     [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getURLEncodedStringSuccess:) name:@\"getURLEncodedStringSuccess\" object:nil];\n     [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getURLEncodedStringFailed:) name:@\"getURLEncodedStringFailed\" object:nil];\n\n    [self.delegate getURLEncodedString:@\"Testing Text\"];\n}\n\n-(void)getURLEncodedStringSuccess:(NSNotification *)notification\n{\n    [[NSNotificationCenter defaultCenter] removeObserver:self name:@\"getURLEncodedStringSuccess\" object:nil];\n    [[NSNotificationCenter defaultCenter] removeObserver:self name:@\"getURLEncodedStringFailed\" object:nil];\n\n    STAssertTrue([[self.delegate getURLEncodedStringResponse] isEqualToString:@\"Testing Text\"], @\"testGetURLEncodedString failed - did not receive expected response\");\n }\n\n-(void)getURLEncodedStringFailed:(NSNotification *)notification\n{\n    [[NSNotificationCenter defaultCenter] removeObserver:self name:@\"getURLEncodedStringSuccess\" object:nil];\n    [[NSNotificationCenter defaultCenter] removeObserver:self name:@\"getURLEncodedStringFailed\" object:nil];\n\n    STFail(@\"testGetURLEncodedString failed - server failed returning result\");\n}\n</code></pre>\n"},{"tags":["iphone","ios","unit-testing","tdd","ocunit"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":11974138,"title":"How can I keep my app from creating a viewcontroller when running unit tests?","body":"<p>When I test my app using OCUnit, it sets up the AppDelegate, window and rootViewController as usual before running the tests. My rootViewController then adds itself as an observer for some NSNotifications.</p>\n\n<p>When I test these notifications with isolated test instances and mock observers, the notification handler of the automatically created rootViewController is called as well, which causes some of my tests to fail.</p>\n\n<p>Is there a way to keep OCUnit from creating the rootViewController or make it use a different ViewController class when runninng in test mode? It would be cool if this could be done without writing special test-related code in my app code.</p>\n"},{"tags":["python","unit-testing","flask","webassets"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":11981187,"title":"Flask-Assets and Flask-Testing throws RegisterError: Another bundle is already registered","body":"<p>I have my Flask app which uses Flask-Assets and while trying to run the unittest cases, except the first testcase, others fails with the following RegisterError.</p>\n\n<pre><code>======================================================================\nERROR: test_login_page (tests.test_auth.AuthTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/cnu/env/flenv/lib/python2.7/site-packages/nose/case.py\", line 133, in run\n    self.runTest(result)\n  File \"/Users/cnu/env/flenv/lib/python2.7/site-packages/nose/case.py\", line 151, in runTest\n    test(result)\n  File \"/Users/cnu/env/flenv/lib/python2.7/site-packages/flask_testing.py\", line 72, in __call__\n    self._pre_setup()\n  File \"/Users/cnu/env/flenv/lib/python2.7/site-packages/flask_testing.py\", line 80, in _pre_setup\n    self.app = self.create_app()\n  File \"/Users/cnu/Projects/Bookworm/App/tests/test_auth.py\", line 8, in create_app\n    return create_app('testing.cfg')\n  File \"/Users/cnu/Projects/Bookworm/App/bookworm/__init__.py\", line 118, in create_app\n    configure_extensions(app)\n  File \"/Users/cnu/Projects/Bookworm/App/bookworm/__init__.py\", line 106, in configure_extensions\n    assets.register('js_all', js)\n  File \"/Users/cnu/env/flenv/src/webassets/src/webassets/env.py\", line 374, in register\n    'as \"%s\": %s' % (name, self._named_bundles[name]))\nRegisterError: Another bundle is already registered as \"js_all\": &lt;Bundle output=assets/packed.js, filters=[&lt;webassets.filter.jsmin.JSMin object at 0x10fa8af90&gt;], contents=('js/app.js',)&gt;\n</code></pre>\n\n<p>My understanding of why this happens in before the first testcase is run, create_app creates an instance of app and this is maintained for all other testcases. </p>\n\n<p>I tried <code>del(app)</code> in the teardown method, but doesn't help.</p>\n\n<p>Is there some way to fix it?</p>\n"},{"tags":["c#",".net","unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1466,"score":2,"question_id":1218302,"title":"The right way to mock (with moq) methods that return mocked objects?","body":"<p>Which of these is correct?</p>\n\n<pre><code>var mockLogger = new Mock&lt;EntLibLogger&gt;();\nmockLogger.Setup(i =&gt; i.CreateTracer(It.IsAny&lt;string&gt;()))\n    .Returns((string operationName) =&gt;\n        {\n            var mockTracer = new Mock&lt;EntLibTracer&gt;(operationName);\n            mockTracer.Setup(i =&gt; i.IsTracingEnabled())\n                .Returns(true);\n            mockTracer.CallBase = true;\n\n            return mockTracer.Object;\n        });\nmockLogger.CallBase = true;\n\n//EntLibLogger.Current is a singleton that is shared across multiple threads.\n//This Initialize method will set EntLibLogger.Current to the mocked instance\n//instead of the default (non-mocked) configuration\nEntLibLogger.Initialize(mockLogger.Object);\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>var mockTracer = new Mock&lt;EntLibTracer&gt;(operationName);\nmockTracer.Setup(i =&gt; i.IsTracingEnabled())\n    .Returns(true);\nmockTracer.CallBase = true;\n\nvar mockLogger = new Mock&lt;EntLibLogger&gt;();\nmockLogger.Setup(i =&gt; i.CreateTracer(It.IsAny&lt;string&gt;()))\n    .Returns(mockTracer.Object);\nmockLogger.CallBase = true;\n\nEntLibLogger.Initialize(mockLogger.Object);\n</code></pre>\n\n<p>I believe the first approach is correct but I am not sure if Moq might be doing some magic under the hood and just wanted to validate :)</p>\n"},{"tags":["javascript","unit-testing","requirejs","modernizr","mocha"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":11786343,"title":"Unit Testing Code which uses Modernizr","body":"<p>My question is about unit testing javascript code using Mocha. Ultimately this may be a question about dependency-injection or Inversion of Control, I have a poor grasp on these concepts. </p>\n\n<p>I'm trying to write a test which simply creates an instance of header.js and tests that it is an object. However anytime I do so my test blows up when it loads Modernizr, with the following error message. It seems to occur because Modernizr is dependent on running inside the browser, but my unit tests need to run on the command line.</p>\n\n<pre><code>/lib/modernizr.js:8\n</code></pre>\n\n<p>\"MozAppearance\"in l.style,s=r&amp;&amp;!!b.createRange().compareNode,t=s?l:n.parentNod\n                                                                    ^\nTypeError: Cannot read property 'parentNode' of undefined\n    at /Users/devadmin/devenv/djscript/djscript-vendor/lib/modernizr.js:8:6291</p>\n\n<p>I have some requirejs modules which are in the following hierarchy:</p>\n\n<pre><code>lib\n└── pj\n    ├── module\n    │   └── header\n    │       └── header.js\n    ├── util\n    │   └── header\n    │       └── Util.js\n    └── widget\n        └── header\n            ├── Header.js\n            └── view\n                ├── HeaderView.js\n                └── NavView.js\n</code></pre>\n\n<p>header.js instantiates Header.js, which in turn creates a HeaderView and a NavView. Only HeaderView requires Modernizr. </p>\n\n<p>Any hints as to how I can get this code into a testable state? Would it help to see how I packaged Modernizr for use with requirejs?</p>\n"},{"tags":["python","unit-testing","properties","mocking","nested"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":11978945,"title":"Mocking nested properties with mock","body":"<p>I have a function call that returns an object:</p>\n\n<pre><code>r = Foo(x,y)\n</code></pre>\n\n<p>where <code>r</code> has a rich set of nested properties. For example, I can access <code>r.prop_a.prop_b.prop_c</code>. I would like to mock <code>Foo</code>, such that a specific leaf property of <code>r</code> is modified, i.e. such that <code>r.prop_a.prop_b.prop_c</code> returns a value under my control:</p>\n\n<pre><code>&gt;&gt; r = Foo(x,y)\n&gt;&gt; r.prop_a.prop_b.prop_c\n'fish'\n&gt;&gt; # some mock magic patching of Foo is taking place here\n&gt;&gt; r = Foo(x,y)\n&gt;&gt; r.prop_a.prop_b.prop_c\n'my_fish'\n</code></pre>\n\n<p>I do not care about intermediate properties much. </p>\n\n<p><b>Is there an elegant way to mock nested properties with <a href=\"http://www.voidspace.org.uk/python/mock/index.html\" rel=\"nofollow\">mock</a>?</b> </p>\n"},{"tags":["unit-testing","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":11967558,"title":"Create a single shared Mock Object or one per Unit Test","body":"<p>I'm currently broadening my Unit Testing by utilising Mock objects (nSubsitute in this particular case).  However I'm wondering what the current wisdom when creating a Mock objects. For instance, I'm working with an object that contains various routines to grab and process data - no biggie here but it will be utilised in a fair number of tests.</p>\n\n<p>Should I create a shared function that returns the Mock Object with all the appropriate methods and behaviours mocked for pretty much most of the Testing project and call that object into my Unit Tests?  Or shall I Mock the object into every Unit Test, only mocking the behaviour I need for that test (although there will be times I'll be mocking the same behaviour more than one occasion).</p>\n\n<p>Thoughts or advice is gratefully received...</p>\n"},{"tags":["c#",".net","unit-testing","mocking","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":132,"score":2,"question_id":11976996,"title":"Moq and throwing a SqlException","body":"<p>I have the following code to test that when a certain name is passed to my method, it throws a SQL exception (there is reason to that one, although it sounds a little odd).</p>\n\n<pre><code>   mockAccountDAL.Setup(m =&gt; m.CreateAccount(It.IsAny&lt;string&gt;(), \n\"Display Name 2\", It.IsAny&lt;string&gt;())).Throws&lt;SqlException&gt;();\n</code></pre>\n\n<p>However, this won't compile because SqlException's constructor is internal:</p>\n\n<blockquote>\n  <p>'System.Data.SqlClient.SqlException' must be a non-abstract type with\n  a public parameterless constructor in order to use it as parameter\n  'TException' in the generic type or method\n  'Moq.Language.IThrows.Throws()'</p>\n</blockquote>\n\n<p>Now, I could change this to state that it should throw Exception, but that wouldn't work for me, because my method should return one status code if it is a SqlException and another if it is any other exception. That's what my unit test is testing. </p>\n\n<p>Is there any way to achieve this without either changing the logic of the method I'm testing, or not testing this scenario?</p>\n"},{"tags":["django","unit-testing","slash"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":11977834,"title":"django unit test client with url that has double slashes","body":"<p>I have a test case that to test if the redirect works that url has double slashes like //pages/online%20banking</p>\n\n<p>while it works on a browser like <code>http://localhost:8000//pages/online%20banking</code> but it fails on running the unit test by using </p>\n\n<pre><code>self.client.get('//pages/online%20banking', follow=True)\n</code></pre>\n\n<p>my urlconf for this url is:</p>\n\n<pre><code>url(r'^(?:/)?pages/(?:/)?(?P&lt;what&gt;[^/]+)(?:/(?P&lt;where&gt;[^/]+))?(?:/)?$', 'web.views.url_mapping.search')\n</code></pre>\n\n<p>any ideas why?</p>\n"},{"tags":["unit-testing",".net-4.0",".net-2.0","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":431,"score":3,"question_id":11970686,"title":"Visual Studio 2012 Test Project Mixed Mode Runtime .NET 2.0","body":"<p>I'm currently working in the Visual Studio 2012 RC with a test project. I have included the following assemblies:</p>\n\n<ul>\n<li>Microsoft.SqlServer.Smo </li>\n<li>Microsoft.SqlServer.SmoExtend</li>\n<li>Microsoft.SqlServer.ConnectionInfo</li>\n<li>Microsoft.SqlServer.Management.Sdk.Sfc</li>\n</ul>\n\n<p>These assemblies are build in version 2.0.50727 and I have a test project in .NET 4.0. So based on this information I have added an app.config file into the project with the following lines:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n  &lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;\n    &lt;supportedRuntime version=\"v4.0\"/&gt;\n  &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>When I'm going to run this I receive all the time the following message:</p>\n\n<p>Mixed mode assembly is built against version 'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information.</p>\n\n<p>Is this a bug in a Visual Studio 2012 RC Test Project that it ignore's the app.config file or am I doing something completely wrong?</p>\n\n<p>For additional information I have included also my test code:</p>\n\n<pre><code>    var connectionString = new SqlConnectionStringBuilder()\n    {\n        DataSource = @\"(local)\",\n        IntegratedSecurity = true\n    }.ConnectionString;\n\n    var sql = \"alter database [Test] set single_user with rollback immediate go \";\n    sql += \"drop database [Test] go \";\n    sql += \"create database [Test] go \";\n    sql += Properties.Resources.Test;\n\n    var connection = new SqlConnection(connectionString);\n    var server = new Server(new ServerConnection(connection));\n\n    server.ConnectionContext.ExecuteNonQuery(sql);\n</code></pre>\n\n<p>Thank you in advance.</p>\n"},{"tags":["python","django","unit-testing","celery"],"answer_count":2,"favorite_count":6,"up_vote_count":18,"down_vote_count":0,"view_count":2351,"score":18,"question_id":4055860,"title":"Unit testing with django-celery?","body":"<p>I am trying to come up with a testing methodology for our <a href=\"http://celeryq.org/docs/django-celery/index.html#celery-integration-for-django\" rel=\"nofollow\">django-celery</a> project.  I have read the notes in the <a href=\"http://celeryq.org/docs/django-celery/cookbook/unit-testing.html#unit-testing\" rel=\"nofollow\">documentation</a>, but it didn't give me a good idea of what to actually do.  I am not worried about testing the tasks in the actual daemons, just the functionality of <strong>my</strong> code.  Mainly I am wondering:</p>\n\n<ol>\n<li>How can we bypass <code>task.delay()</code> during the test (I tried setting <code>CELERY_ALWAYS_EAGER = True</code> but it made no difference)?</li>\n<li>How do we use the test settings that are recommended (if that is the best way) without actually changing our settings.py?</li>\n<li>Can we still use <code>manage.py test</code> or do we have to use a custom runner?</li>\n</ol>\n\n<p>Overall any hints or tips for testing with celery would be very helpful.</p>\n"},{"tags":["unit-testing","clojure"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":225,"score":5,"question_id":7852092,"title":"How do I expect failure in a unit test?","body":"<p>We're writing unit tests for our code in Clojure using <a href=\"http://richhickey.github.com/clojure/clojure.test-api.html\" rel=\"nofollow\">clojure.test</a>.</p>\n\n<p>Some of our tests ignore the API and purposely break the code, in order to serve as documentation for latent deficiencies in the code.</p>\n\n<p>However, we want to distinguish between failures of these tests, and failures of normal tests.</p>\n\n<p>We haven't seen any suggestions in the <code>clojure.test</code> documentation -- only <code>(is (thrown? ...))</code>, which of course doesn't do what we need.</p>\n\n<p>Any suggestions?  Basically, we're looking for something like <code>(is (not &lt;condition&gt;))</code>, except that the test framework should record an expected failure.</p>\n\n<hr>\n\n<p>Edit:  we're looking for something like <a href=\"http://docs.python.org/library/unittest.html#skipping-tests-and-expected-failures\" rel=\"nofollow\">this</a>.</p>\n"},{"tags":["python","unit-testing","callable"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":11973095,"title":"using assertRaises call from unittest makes it seem like object no longer has attribute","body":"<p>I am trying to call an object's function. It works in one case and not in another. Can you explain why?</p>\n\n<p>Calling the function directly works as expected:</p>\n\n<pre><code>ser.register_emp_with_org(self._plain_emp, self._unregistered_id)\n</code></pre>\n\n<p>The function is successfully found, results in exception being thrown:</p>\n\n<blockquote>\n  <p>File\n  \"/home/chris/repos/all_my_code/google_app_engine_apps/cover-me/my_packages/datastore/registration_server.py\",\n  line 26, in register_emp_with_org\n      raise server_exceptions.OrgDoesntExist OrgDoesntExist</p>\n</blockquote>\n\n<hr>\n\n<p>But using the assertRaises function from the unittest module:</p>\n\n<pre><code>self.assertRaises(\n   server_exceptions.OrgDoesntExist,\n   ser.register_emp_wth_org,\n   self._plain_emp, self._unregistered_id) \n</code></pre>\n\n<p>The attribute is not found:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File \"all_tests.py\", line 134, in\n  test_register_emp_with_nonexistent_org\n      ser.register_emp_wth_org, AttributeError: 'RegistrationServer_GAE_NoSQL' object has no attribute\n  'register_emp_wth_org'</p>\n</blockquote>\n"},{"tags":["unit-testing","routes","asp.net-web-api"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":384,"score":5,"question_id":11851558,"title":"Testing route configuration in ASP.NET WebApi","body":"\n\n<p>I am trying to do some unit testing of my <a href=\"http://www.asp.net/web-api\" rel=\"nofollow\">WebApi</a> route configuration. I want to test that the route <code>\"/api/super\"</code> maps to the <code>Get()</code> method of my <code>SuperController</code>. I've setup the below test and am having a few issues.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public void GetTest()\n{\n    var url = \"~/api/super\";\n\n    var routeCollection = new HttpRouteCollection();\n    routeCollection.MapHttpRoute(\"DefaultApi\", \"api/{controller}/\");\n\n    var httpConfig = new HttpConfiguration(routeCollection);\n    var request = new HttpRequestMessage(HttpMethod.Get, url);\n\n    // exception when url = \"/api/super\"\n    // can get around w/ setting url = \"http://localhost/api/super\"\n    var routeData = httpConfig.Routes.GetRouteData(request);\n    request.Properties[HttpPropertyKeys.HttpRouteDataKey] = routeData;\n\n    var controllerSelector = new DefaultHttpControllerSelector(httpConfig);\n\n    var controlleDescriptor = controllerSelector.SelectController(request);\n\n    var controllerContext =\n        new HttpControllerContext(httpConfig, routeData, request);\n    controllerContext.ControllerDescriptor = controlleDescriptor;\n\n    var selector = new ApiControllerActionSelector();\n    var actionDescriptor = selector.SelectAction(controllerContext);\n\n    Assert.AreEqual(typeof(SuperController),\n        controlleDescriptor.ControllerType);\n    Assert.IsTrue(actionDescriptor.ActionName == \"Get\");\n}\n</code></pre>\n\n<p>My first issue is that if I don't specify a fully qualified URL <code>httpConfig.Routes.GetRouteData(request);</code> throws a <code>InvalidOperationException</code> exception with a message of \"This operation is not supported for a relative URI.\"</p>\n\n<p>I'm obviously missing something with my stubbed configuration. I would prefer to use a relative URI as it does not seem reasonable to use a fully qualified URI for route testing.</p>\n\n<p>My second issue with my configuration above is I am not testing my routes as configured in my RouteConfig but am instead using:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>var routeCollection = new HttpRouteCollection();\nrouteCollection.MapHttpRoute(\"DefaultApi\", \"api/{controller}/\");\n</code></pre>\n\n<p>How do I make use of the assigned <code>RouteTable.Routes</code> as configured in a typical Global.asax:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class MvcApplication : HttpApplication\n{\n    protected void Application_Start()\n    {\n        // other startup stuff\n\n        RouteConfig.RegisterRoutes(RouteTable.Routes);\n    }\n}\n\npublic class RouteConfig\n{\n    public static void RegisterRoutes(RouteCollection routes)\n    {\n        // route configuration\n    }\n}\n</code></pre>\n\n<p>Further what I have stubbed out above may not be the best test configuration. If there is a more streamlined approach I am all ears.</p>\n"},{"tags":["c#","unit-testing","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":11971059,"title":"TestMethod generates error CS0201","body":"<p>This may me a philosophical rant that I need to get out of my system, on the other hand I could be doing something wrong, if so please tell me!</p>\n\n<p>I have a unit test the looks something like this:</p>\n\n<pre><code>[TestMethod]\n[ExpectedException(typeof(NotImplementedException))]\npublic void Test_XXXAccess()\n{\n    ControlPoint.MyObject.XXXAccess;\n}\n</code></pre>\n\n<p>Which checks that the property XXXAccess is not implemented when the test is run in a particular context. This test generates a compile error CS0201: <strong>\"Only assignment, call, increment, decrement, and new object expressions can be used as a statement\"</strong> Which while I agree is an error in production code, I think is wrong applied to a unit test. Of course I can re-write the code to:</p>\n\n<pre><code>[TestMethod]\n[ExpectedException(typeof(NotImplementedException))]\npublic void Test_XXXAccess()\n{\n    MyType x = ControlPoint.MyObject.XXXAccess;\n}\n</code></pre>\n\n<p>But this (for me) seems more incorrect as you now have assigned it into a variable to do nothing more than mute the error. </p>\n\n<p>Is there a better way to write the test?</p>\n"},{"tags":["python","unit-testing","nose","py.test"],"answer_count":10,"favorite_count":43,"up_vote_count":82,"down_vote_count":0,"view_count":19971,"score":82,"question_id":191673,"title":"Preferred Python unit-testing framework","body":"<p>So far I've been using the built-in unittest module (pyUnit) for unit-testing Python code. However, for simple cases it seems like overkill. Being a derivative of xUnit, it appears a bit heavy for the dynamic nature of Python, where I would expect to write less to achieve the same effects. On the other hand, it is built-in, it makes you write your tests in an organized way, and it is tested by time.</p>\n\n<p>The major alternatives I've seen online are:</p>\n\n<ul>\n<li><a href=\"http://codespeak.net/py/dist/test.html\">py.test</a> </li>\n<li><a href=\"http://www.somethingaboutorange.com/mrl/projects/nose/\">nose</a></li>\n</ul>\n\n<p>Which of the frameworks do you prefer, and why? </p>\n\n<hr>\n\n<p><em>Update 10.12.2011:</em> with the recent addition of test auto-discovery and many new features in <code>unittest</code> (in Python 2.7 and 3.2), IMHO it makes less sense to use an external library.</p>\n\n<hr>\n\n<p>Regarding doctest:\nI don't consider it a <em>unit-testing framework</em> per-se. I definitely wouldn't use it to write a large suite of tests for a sizable application. doctest is more suitable for making sure that the examples you provide in the documentation work. It has its place for this need, but it isn't a competitor for unittest, py.test and other frameworks.</p>\n"},{"tags":["c#","string","unit-testing","bytearray","type-conversion"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":11969531,"title":"Error converting byte array to string in test","body":"<p>I have the following test that I've been trying to get working        </p>\n\n<pre><code>[Test]\npublic void Test()\n{\n    byte[] testArray = new byte[] { 1, 0, 0, 1 };\n\n    string number = System.Text.Encoding.ASCII.GetString(testArray);\n\n    Assert.That(number, Is.EqualTo(\"1001\"));\n}\n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>String lengths are both 4. Strings differ at index 0.\nExpected: \"1001\"\nBut was:  \"\\0\\0\"\n</code></pre>\n\n<p>This puzzles me because my production code that converts a byte array to a string uses the same method then I log out the string and it's what I would expect.</p>\n\n<p>Should I be doing something to the byte array before doing the conversion in this case?</p>\n\n<p>Thanks, Neil</p>\n"},{"tags":["unit-testing","integration-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":11951117,"title":"Are timed asserts good idea?","body":"<p>First of all apologies for weird title, but I dont know how to name what I want to talk about so i called it \"timed assert\".<br>\nBasically lets say that one wants to test certain class functionality but that class methods are async(aka for example instance.Start() returns immediately, but private member instance.Mode will change to enum Started after 2 seconds  ). So \nWould something like:</p>\n\n<pre><code>MyObject instance; \ninstance.start();\n// invented function, first part is the normal assert, 3000 is delay  in milliseconds \ntimed_assert(instance.GetMode()==MyObject::Mode::Started, 3000);\n</code></pre>\n\n<p>be a good idea?\nPlease not that implementing timed_assert as a blocking function is trivial (sleep + normal assert), making it nonblocking is beyond my skill lvl, but you are free to consider it as an option if you are sure it can be done.</p>\n"},{"tags":[".net","visual-studio","visual-studio-2010","unit-testing","compiler-errors"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1725,"score":3,"question_id":7993469,"title":"Unit test project cannot find assembly under test (or dependencies)","body":"<p>When I try to run my Unit Test project, I get the following error:</p>\n\n<blockquote>\n  <p>Could not load file or assembly 'ASSEMBLY_NAME, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. </p>\n  \n  <p>The system cannot find the file specified.</p>\n</blockquote>\n\n<p>The assembly under test is located in the same solution and every project target .NET 4.0 framework.\nIt worked for a while, but today I got this error again. \nI can't figure out what is wrong, because the error message doesn't tell me enough. (like; WHICH file could not be found..)</p>\n\n<p>I've tried to add a new Test project, but also that one worked for a while before it gave me this same error message.</p>\n\n<p>Is there anybody who can point me in the right direction?</p>\n\n<p><strong>Edit:</strong> In the diagnostic build log, the following error appears:</p>\n\n<pre><code>C:\\Program Files\\MSBuild\\Microsoft\\VisualStudio\\v10.0\\TeamTest\\\nMicrosoft.TeamTest.targets(14,5): \nerror : Could not load file or assembly 'ASSEMBLY_NAME, Version=1.0.0.0, \nCulture=neutral, PublicKeyToken=null' or one of its dependencies. \nThe system cannot find the file specified.\n\nDone executing task \"BuildShadowTask\" -- FAILED. (TaskId:671)\n\nDone building target \"ResolveTestReferences\" in \n      project \"ASSEMBLY_NAME.Tests.vbproj\" -- FAILED.: (TargetId:985)\n</code></pre>\n"},{"tags":["java","unit-testing","proxy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":361,"score":1,"question_id":3904724,"title":"Unit-test proxy code in Java","body":"<p>We want to unit-test http-proxy related code. Is there a Java package which can simulate a http proxy?</p>\n"},{"tags":["entity-framework","unit-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":149,"score":3,"question_id":11968203,"title":"Entity Framework (code first) in memory database for unit testing","body":"<p>For unit testing purposes, is it possible to do this:</p>\n\n<ul>\n<li>Have test data in some format (XML?) checked into source control</li>\n<li>When unit tests are run, instantiate some kind of in memory database from this test data</li>\n<li>Have EF run against this in memory database for the duration of the unit test run</li>\n</ul>\n\n<p>? </p>\n\n<p>We don't want our unit tests to rely on a specific external database being present, and in a specific state.</p>\n\n<p>We also don't want to maintain two different \"worlds\" in our code and tests, the real world where EF runs against a real db and a fake work where our tests run against some kind of EF mock.</p>\n"},{"tags":["javascript","jquery","unit-testing","keyboard-events"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":111,"score":0,"question_id":11948449,"title":"How to unit test arrow key navigation with javascript / jQuery","body":"<p>We're developing several widgets, and have a requirement that we must support keyboard navigation (accessibility).\nWe've added keyboard navigation as to the spec, and all is well, but we also want to test that it works using unit tests.</p>\n\n<p>What we have tried is testing it with </p>\n\n<ul>\n<li>selenium, but selenium does not seem to record arrow keys</li>\n<li>busterJS, using the solution given in thread <a href=\"http://stackoverflow.com/questions/5516600/simulate-left-and-right-arrow-key-event-with-javascript\">Simulate left and right arrow key event with javascript</a>. But here we get different exceptions indicating that we are doing something illegal.</li>\n<li>Triggering the event using jQuery trigger(), with the same results as the previous attempt.</li>\n</ul>\n\n<p>I can understand that fireing keyboard events with key codes can be viewed as dangerous by browser manufacturers, and thus prohibited (If thats the core problem here). If this is actually the case, is there some option to set in IE10, Chrome or Firefox to enable the possibility to fire the events?</p>\n\n<p>Any comments are welcomed, I might also be looking in the completely wrong direction here, so if you have some thoughts on how to unit test keyboard navigation in javascript, please feel free to enlighten me :)</p>\n"},{"tags":["c#","unit-testing","iterator","code-coverage","dotcover"],"answer_count":1,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":174,"score":9,"question_id":11918858,"title":"Weird test coverage results for iterator block, why are these statements not executed?","body":"<p>I'm using dotCover to analyze code coverage of my unit tests, and I'm getting some strange results... I have an iterator method for which the coverage is not complete, but the statements that are not covered are just the closing braces at the end of the method.</p>\n\n<p>Here's the method I'm testing:</p>\n\n<pre><code>    public static IEnumerable&lt;T&gt; CommonPrefix&lt;T&gt;(\n        this IEnumerable&lt;T&gt; source,\n        IEnumerable&lt;T&gt; other,\n        IEqualityComparer&lt;T&gt; comparer)\n    {\n        source.CheckArgumentNull(\"source\");\n        other.CheckArgumentNull(\"other\");\n\n        return source.CommonPrefixImpl(other, comparer);\n    }\n\n    private static IEnumerable&lt;T&gt; CommonPrefixImpl&lt;T&gt;(\n        this IEnumerable&lt;T&gt; source,\n        IEnumerable&lt;T&gt; other,\n        IEqualityComparer&lt;T&gt; comparer)\n    {\n        comparer = comparer ?? EqualityComparer&lt;T&gt;.Default;\n\n        using (IEnumerator&lt;T&gt; en1 = source.GetEnumerator(),\n                              en2 = other.GetEnumerator())\n        {\n            while (en1.MoveNext() &amp;&amp; en2.MoveNext())\n            {\n                if (comparer.Equals(en1.Current, en2.Current))\n                    yield return en1.Current;\n                else\n                    yield break;\n            }\n        } // not covered\n    } // not covered\n</code></pre>\n\n<p>The unit test:</p>\n\n<pre><code>    [Test]\n    public void Test_CommonPrefix_SpecificComparer()\n    {\n        var first = new[] { \"Foo\", \"Bar\", \"Baz\", \"Titi\", \"Tata\", \"Toto\" };\n        var second = new[] { \"FOO\", \"bAR\", \"baz\", \"tata\", \"Toto\" };\n\n        var expected = new[] { \"Foo\", \"Bar\", \"Baz\" };\n        var actual = first.CommonPrefix(second, StringComparer.CurrentCultureIgnoreCase);\n        Assert.That(actual, Is.EquivalentTo(expected));\n    }\n</code></pre>\n\n<p>And the coverage results:</p>\n\n<p><img src=\"http://i.stack.imgur.com/yqJdO.png\" alt=\"coverage results\"></p>\n\n<p>I assume the closing brace of the <code>using</code> block is actually the calls to <code>Dispose</code> on the enumerators; but then, why is it not executed? I first suspected that NUnit wasn't disposing the enumerators, but I get the same result if I do a foreach on <code>actual</code>.</p>\n\n<p>As for the second uncovered closing brace, I have no idea what it stands for... I guess it's related to how the compiler transforms the iterator block.</p>\n\n<p>Can anyone shed some light on what these two \"statements\" are, and why they are not executed ?</p>\n\n<hr>\n\n<p><em>EDIT: Peter raised a very good question: the results shown above were obtained when running the tests on a <strong>debug build</strong>. If I run the tests on a <strong>release build</strong>, coverage of the <code>CommonPrefixImpl</code> method is 100%, so it's probably related to compiler optimizations.</em></p>\n"},{"tags":["unit-testing","google-closure","jsunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":9819323,"title":"Google Closure Javascript testing, disable autodiscover tests","body":"<p>Currently i am implementing the Google closure testing possibilities.<br>\nIt works as a charm.<br>\nI Define the TestCase by hand, and add the test by hand. I also create a separate runner for the tests so I can catch all the results and pass them to another function.<br>\nThis function sends the results through ajax to PHP so the results can be logged in the database (also works as expected).  </p>\n\n<p>The problem however is that because I do this, and I load the page in the browser the tests get executed 2 times (one time because of the auto-discovery and once because i defined it in the testcase.  </p>\n\n<p>I would like to disable the auto-discovery, but I don't want to disable the flag in the closure library, this because when the library gets updated we need to reset the flag to false again.  </p>\n\n<p>So how can i disable auto-discovery without modifying the code in the closure library?  </p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["asp.net-mvc","unit-testing","moq"],"answer_count":1,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":1196,"score":6,"question_id":2770265,"title":"How to mock the Request.ServerVariables using MOQ for ASP.NET MVC?","body":"<p>i'm just learning to put in unit testing for my asp.net mvc when i came to learn about the mock and the different frameworks there is out there now.</p>\n\n<p>after checking SO, i found that MOQ seems to be the easiest to pick up.\nas of now i'm stuck trying to mock the Request.ServerVariables, as <a href=\"http://stackoverflow.com/questions/975276/asp-net-mvc-when-should-i-read-servervariables\">after reading this post</a>, i've learned that it's better to abstract them into property.</p>\n\n<p>as such:</p>\n\n<pre><code>/// &lt;summary&gt;\n        /// Return the server port\n        /// &lt;/summary&gt;\n        protected string ServerPort\n        {\n            get\n            {\n                return Request.ServerVariables.Get(\"SERVER_PORT\");\n            }\n        }\n</code></pre>\n\n<p>But i'm having a hard time learning how to properly mock this.\nI have a home controller ActionResult function which grabs the user server information and proceed to create a form to grab the user's information.</p>\n\n<p>i tried to use <a href=\"http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx\">hanselman's mvcmockhelpers class</a> but i'm not sure how to use it.</p>\n\n<p>this is what i have so far...</p>\n\n<pre><code>[Test]\n        public void Create_Redirects_To_ProductAdded_On_Success() \n        {\n\n            FakeViewEngine engine = new FakeViewEngine();\n\n            HomeController controller = new HomeController();\n            controller.ViewEngine = engine;\n\n            MvcMockHelpers.SetFakeControllerContext(controller);\n\n            controller.Create();\n\n            var results = controller.Create();\n\n            var typedResults = results as RedirectToRouteResult;\n\n            Assert.AreEqual(\"\", typedResults.RouteValues[\"action\"], \"Wrong action\");\n            Assert.AreEqual(\"\", typedResults.RouteValues[\"controller\"], \"Wrong controller\");\n        }\n</code></pre>\n\n<h2>Questions:</h2>\n\n<ol>\n<li>As of now i'm still getting null\nexception error when i'm running the\ntest. So what am i missing here?</li>\n<li>And if i use the mvcmockhelpers\nclass, how can i still call the\nrequest.verifyall function to ensure\nall the mocking are properly setup?</li>\n</ol>\n"},{"tags":["php","unit-testing","yii"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":11966090,"title":"Yii project unit testing: validators","body":"<p>We came to the point where our project has grown too big to be tested manually so we started covering it with unit tests. Now we are facing the dilemma of testing model validation process. </p>\n\n<p>On one hand, validation is a part of the model's logic so it needs to be tested, so we started out with tedious tests like the one below:</p>\n\n<pre><code>public function testNameRequired()\n{\n    $this-&gt;object-&gt;name = '';\n    $this-&gt;assertFalse($this-&gt;object-&gt;validate(array('name')));\n\n    $this-&gt;object-&gt;name = 'Franky';\n    $this-&gt;assertTrue($this-&gt;object-&gt;validate(array('name')));\n}\n</code></pre>\n\n<p>But on the other hand, validators (i mean build-in) are a part of the framework and are already tested, so we are basically testing static <code>rules</code> array (and it's VCS's task to track accidental code modifications).</p>\n\n<p>We also were thinking about creating some sort of reusable validator test, which would accept <code>rules</code> array, parse it and run tests like the one above, but again it's just rewriting framework tests.</p>\n\n<p>So the question is:</p>\n\n<p>Do you test validation in your code?\nAnd if you do then how?</p>\n"},{"tags":["unit-testing","automake"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":11335528,"title":"make distcheck and tests that need input files","body":"<p>I recently converted my build system to automake/autoconf. In my project I have a few unit tests that need some input data files in the direcory from where they are run. When I run make distcheck and it tries the VPATH build, these tests fail because they are apparently not run from the directory where the input files are. I was wondering if there is some quick fix for this. For example, can I somehow tell the system not to run these tests on make distcheck (but still run them on make check)? Or to cd to the directory where the files are before running the tests?</p>\n"},{"tags":["unit-testing","command-line","junit"],"answer_count":4,"favorite_count":5,"up_vote_count":20,"down_vote_count":0,"view_count":17591,"score":20,"question_id":2235276,"title":"How to run Junit testcases from command line?","body":"<p>I would like to run junit test cases from commandline. Im using eclipse</p>\n"},{"tags":["c#","unit-testing","testing","nunit","xunit"],"answer_count":2,"favorite_count":0,"up_vote_count":16,"down_vote_count":1,"view_count":4831,"score":15,"question_id":3273315,"title":"xUnit or NUnit? What advantages and disadvantages of each other?","body":"<p>What are the pluses and minuses of each framework, comparing to each other?\nHow well they work with ASP.NET MVC?\nHow well they support mocking?</p>\n"},{"tags":["unit-testing","continuous-integration","nunit","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":11963984,"title":"Multiple unit test run analysis tool","body":"<p>Is there any tool that analyzes test reports of particular unit test runs and shows differences between them? Basically, I'm interested in a \"graph of progress\":</p>\n\n<ul>\n<li>12 Aug 2012 10:00: 48/50 tests passed. Failed tests: \"MyTest13\", \"MyTest43\".</li>\n<li>12 Aug 2012 10:02: 47/50 tests passed. \"MyTest13\" now passed, but \"MyTest2\" and \"MyTest22\" started failing.</li>\n</ul>\n\n<p>NUnit is preferrable, however, unit testing framework is not that important.</p>\n\n<p>I'm looking for a completely automated tool, so that I can set it to run it after each build and instantly look at the results and compare them with previous results. The closest thing I've found is <a href=\"https://launchpad.net/nunit-results\" rel=\"nofollow\">nunit-results</a> and a hand-written batch file to call NUnit (with specified xml report path) and nunit-results as a post-build action. However, html file that it produces is not that informative.</p>\n\n<p>I'm really surprised that noone of the popular unit testing software is capable of storing test run information and analyzing series of runs in bulk. I've tried Resharper, NUnit GUI, Gallio and haven't found anything useful.</p>\n\n<p>I would be glad for a solution that does not require a setup of a complicated CI server. My projects are typically small, but I need a tool like this for every one of them.</p>\n"},{"tags":["unit-testing","osgi","apache-karaf","pax-exam"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":10989376,"title":"How do you make Pax Exam use an OBR to handle transitive dependencies?","body":"<p>In Karaf, I can install the OBR feature and use obr:addUrl to add a repository.xml and obr:deploy to deploy a bundle along with all the transitive dependencies.  I have documented it in <a href=\"http://stackoverflow.com/a/10989017/242042\">http://stackoverflow.com/a/10989017/242042</a></p>\n\n<p>However, now I want to create a JUnit test using PaxExam, but I can't seem to emulate what I did with Karaf on PaxExam.</p>\n\n<p>Any code snippet that would show how to point to an OBR repository and do a deploy with all the transitive calculations done automatically?</p>\n"},{"tags":["unit-testing","language-agnostic","phpunit"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":118,"score":5,"question_id":11924539,"title":"Should all unit tests be succesful?","body":"<p>Let's say you make an application that attempts to transliterate stuff from alphabet A into alphabet B, as closely as possible.</p>\n\n<p>Because language B is veeeery complex, this is not always successful. But you do get an approximate transliteration.</p>\n\n<p>How would you build unit tests in this case, considering that you expect 20-30% to fail?</p>\n"},{"tags":["c#","unit-testing","mocking","tdd","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":150,"score":2,"question_id":11905678,"title":"Mock (Moq) or override a readonly propery in a sealed class?","body":"<p>I have a situation where in MS Dynamics Crm it returns some objects using sealed classes and readonly properties (I can only presume using internal constructors or internal property sets). And these guys don't inherit from an interface I can use. Obviously, if I had control over this code I would have a lot more control, but because it's in the underlying MS Dynamics framework I'm a bit stuck.</p>\n\n<p>The class I'd like to mock/override is called <a href=\"http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.aliasedvalue.aspx\" rel=\"nofollow\">AliasedValue</a>. The reason I want to mock it is I'm trying to simulate a call to dynamics and want to pretend I'm getting returned some Aliased Values.</p>\n\n<p>So here's the scenario, I want to create a sample entity that Dynamics will return... something like this:</p>\n\n<pre><code>var new_entity = new Entity(\"new_entity\")\n    {\n        Attributes = new AttributeCollection\n            {\n                {\"new_name\", \"BR\"},\n                {\"createdon\", DateTime.Now.AddDays(-1).Date},\n                {\"new_field\", \"My field\"},\n                {\"new_contact\", new AliasedValue {*****} }\n            }\n    };\n</code></pre>\n\n<p>So I am referencing a \"contact\" entity (in real time this comes back as an AliasedValue). While testing I want to make sure my code handles certain values that might come back in this field (e.g. it knows how to deal with an aliased value, and that if no linked contact is returned it doesn't blow up, etc etc). </p>\n\n<p>So if you've clicked on the link to AliasedValue you'll notice the properties are read only... so I can't set up test data...</p>\n\n<p>Next up, I was going to create my own class and override the whole thing... but it's sealed...</p>\n\n<p>And on top of this, as you probably have guessed, Moq doesn't like trying to mock a sealed class.</p>\n\n<p>I've read I'll need to purchase some \"better\" mocking framework to do this, but I really don't want to have to fork out some extra money just to get around this 1 thing.</p>\n\n<p>Anyone got a nice neat little solution for me to get around this?</p>\n\n<p><strong>Update for Clarification</strong></p>\n\n<hr>\n\n<p>A sample of how this is returned is as follows. I have a service which will be mocked to return the above object. Or what it actually returns is a collection containing the above object. So this is like so:</p>\n\n<pre><code>var service = new Mock&lt;IOrganizationService&gt;();\nservice\n    .Setup(s =&gt; s.RetrieveMultiple(null))\n    .Returns(new EntityCollection (new List&lt;Entity&gt; {new_entity}));\n</code></pre>\n\n<p>This is great, I can return the above entity and do what I want with it. So, after I have created the above entity and I return it via my mocked service I get the above in my \"EntityCollection\". And once I have my entity I access the property as follows:</p>\n\n<pre><code>var aliasedContact = (AliasedValue)new_entity.Attributes[\"new_contact\"];\n</code></pre>\n\n<p>Maybe I'm being silly but I can't quite get how the answer (by Lunivore) will solve this... (adding a comment to get feedback...)</p>\n"},{"tags":["django","unit-testing","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":179,"score":2,"question_id":11874071,"title":"Unit Testing with Django Models and a lot of relations involved","body":"<p><strong>Edited</strong>: A better quetion could be: How to design your Database Schema for easy Unit testing?\nby the way there is a very similar question to this here:\n<a href=\"http://stackoverflow.com/questions/3690022/how-to-test-models-in-django-with-foriegn-keys\">How to test Models in Django with Foriegn Keys</a></p>\n\n<p>I'm trying to follow TDD methodology for a project that uses the framework Django.\nI'm creating and testing models and it's  functionality (save methods, signals,...)\nand other high level functions that relies on the models. </p>\n\n<p>I understand that unit testing must be as isolated as possible but I find myself\ncreating a lot of tables and relations using FactoryBoy for each test, so my test is not strong enough because if something changes in a model many tests could be broken.</p>\n\n<p>How to avoid all these dependencies and make the test cleaner?</p>\n\n<p>What do you guys recommend me to avoid all that boilerplate before the actual test?</p>\n\n<p>what are the best practices?</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","security","unit-testing"],"answer_count":9,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":1056,"score":9,"question_id":2558970,"title":"How to test a site rigorously?","body":"<p>I recently created a big portal site. It's time for putting it to test.</p>\n\n<p><strong>How do you guys test a site rigorously?<br>\nWhat are the ways and tools for that?<br>\nCan we sort of mimic hundreds of virtual users visiting the site to see its load handling?</strong></p>\n\n<p>The test should be for both security and speed</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python","unit-testing","logging","stringio"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":380,"score":1,"question_id":9534245,"title":"Python logging to StringIO handler","body":"<p>I have a python test in which I want to test if the logging works properly. For example I have a function that creates a user and at the end the logging writes to log file the response.</p>\n\n<pre><code>logger = logging.getLogger('mylogger')\nlogger.setLevel(logging.DEBUG)\nhandler = logging.handlers.WatchedFileHandler('mylogfile.log')\nformatter = logging.Formatter('%(asctime)s: %(message)s',\n                              '%d/%b/%Y:%H:%M:%S %z')\nhandler.setFormatter(formatter)\nlogger.addHandler(handler)\nlogger.info('Some log text')\n</code></pre>\n\n<p>In my test case I want to send the log output to the StringIO.</p>\n\n<pre><code>class MyTest(unittest.TestCase):\n    def setUp(self):\n        stream = StringIO()\n        self.handler = logging.StreamHandler(stream)\n        log = logging.getLogger('mylogger')\n        log.removeHandler(log.handlers[0])\n        log.addHandler(self.handler)\n\n    def tearDown(self):\n        log = logging.getLogger('mylogger')\n        log.removeHandler(self.handler)\n        self.handler.close()\n</code></pre>\n\n<p>The problem is that I'm not sure how should I test wheter or not my logger is working.</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":5,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":90,"score":4,"question_id":11943473,"title":"Is it bad to mock the object being tested in a unit test?","body":"<p>Here is the class I am unit testing.  Currently I am testing the <code>doSomething</code> function:</p>\n\n<pre><code>class FooClass {\n  public function doSomething( $user ) {\n    $conn = $this-&gt;getUniqueConnection( $user-&gt;id );\n    $conn-&gt;doSomethingDestructive();\n  }\n\n  private function getUniqueConnection( $id ) {\n    return new UniqueConnection( $id );\n  }\n}\n</code></pre>\n\n<p>As you can see, the <code>doSomething</code> function gets a new instance of <code>UniqueConnection</code> (a class I am not testing here) based on a property of the argument it receives.  The problem is that <code>UniqueConnection:: doSomethingDestructive</code> method is something I cannot call during tests due to its... destructiveness.  So I would like to stub/mock the <code>UniqueConnection</code> rather than use a real one.</p>\n\n<p>I don't see any way to inject my mocked <code>UniqueConnection</code>.  I would make the <code>UniqueConnection</code> a constructor argument for <code>FooClass</code> but, as you can see, a new one gets created based on the parameter to the <code>doSomething</code> function and all the unique ids it may be called with are not known ahead of time.</p>\n\n<p>My only option that I can see is to test a mock of <code>FooClass</code> instead of <code>FooClass</code> itself.  Then I would replace the <code>getUniqueConnection</code> function with one that returns a mock/stub.  This seems bad to test an mock, but I don't see any way to achieve what I am after otherwise.  <code>UniqueConnection</code> is a third party vendor library and cannot be modified.  </p>\n"},{"tags":["unit-testing","command-line","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":552,"score":2,"question_id":245176,"title":"Can VS.Net Unit Test be run outside the IDE?","body":"<p>Is there a way you can run your UnitTest project against a compiled DLL outside of the IDE?  Basically we have testing procedures to validate code before moving into production.<br>\nI would not want to run the tests inside the IDE.  I would want to have the compiled code ready to move to production and be able to run a final test against the .dll before the final copy.</p>\n\n<p>Is there some kind of Command-Line utility that could do this?  Just supply both .dlls and get a \"all good\" report of some kind.</p>\n"},{"tags":["java","unit-testing","easymock"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3112,"score":2,"question_id":1826173,"title":"How to test with easymock Capture","body":"<p>I have the following code</p>\n\n<pre><code>Record rd = registerNewRecord();\n&lt;do some processing&gt;\nrd.setFinished(true);\nupdateRecord(rd);\n</code></pre>\n\n<p>The registerNewRecord method calls the RecordDao insert method, and updateRecord calls the update method on the same DAO.</p>\n\n<p>I have the following easymock code:</p>\n\n<pre><code>Capture&lt;Record&gt; insertRc = new Capture&lt;Record&gt;();\nRecordDao.insert(capture(insertRc));\nCapture&lt;Record&gt; updateRc= new Capture&lt;Record&gt;();\nRecordDao.update(capture(updateRc));\n</code></pre>\n\n<p>Problem is since above rd the same instance of Record that was inserted is being updated, the insertRc Capture object is being updated too. So i cannot assert that the finished flag is set to false at insert time.</p>\n\n<p>What am i doing wrong?</p>\n"},{"tags":["java","unit-testing","mocking","powermock"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":119,"score":1,"question_id":11955270,"title":"Mocking behaviour resets after each test with PowerMock","body":"<p>I'm writing unit tests using PowerMock, mocking behaviour of some util classes. Defining behaviour once for test class (by @BeforeClass annotation) causes:</p>\n\n<ul>\n<li>first test invocation to return mocked value</li>\n<li>second test invocation to return real method return value</li>\n</ul>\n\n<p>Sample code:</p>\n\n<pre><code>import org.junit.Assert;\nimport org.junit.BeforeClass;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.powermock.api.mockito.PowerMockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest( {A.class, B.class})\npublic class TestMockedMethods {\n\nprivate static B b;\n\n@BeforeClass\npublic static void setUp() {\n    PowerMockito.mockStatic(A.class);\n    PowerMockito.when(A.getVal()).thenReturn(\"X\");\n\n    b = PowerMockito.mock(B.class);\n    PowerMockito.when(b.getVal()).thenReturn(\"Y\");\n}\n\n@Test\npublic void test1() { // PASS\n    Assert.assertEquals(\"X\", A.getVal());\n    Assert.assertEquals(\"Y\", b.getVal());\n}\n\n@Test\npublic void test2() { // FAIL\n    Assert.assertEquals(\"X\", A.getVal()); // actual=\"A\"\n    Assert.assertEquals(\"Y\", b.getVal()); // actual=\"B\"\n}\n\n}\nclass A {\n  static String getVal() {\n    return \"A\";\n  }\n}\nclass B {\n  String getVal() {\n    return \"B\";\n  }\n}\n</code></pre>\n\n<p>Any ideas why second test is failing?</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","mstest"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":2003,"score":6,"question_id":4589912,"title":"Add custom message to unit test result","body":"<p>Is there a way I can add a custom message to the result of a test method? I want to put a stopwatch on part of the code to see how long its running. I don't need to test that it's running within a certain time frame, just want to see in the result window what the elapsed time was.</p>\n"},{"tags":["sql-server","unit-testing","tdd"],"answer_count":9,"favorite_count":12,"up_vote_count":24,"down_vote_count":0,"view_count":2415,"score":24,"question_id":2046,"title":"How do I unit test persistence?","body":"<p>As a novice in practicing test-driven development, I often end up in a quandary as to how to unit test persistence to a database.</p>\n\n<p>I know that technically this would be an integration test (not a unit test), but I want to find out the best strategies for the following:</p>\n\n<ol>\n<li>Testing queries. </li>\n<li>Testing inserts. How do I know that the insert that has gone wrong if it fails? I can test it by inserting and then querying, but how can I know that the query wasn't wrong? </li>\n<li>Testing updates and deletes -- same as testing inserts</li>\n</ol>\n\n<p>What are the best practices for doing these?</p>\n\n<hr>\n\n<p>Regarding testing SQL: I am aware that this could be done, but if I use an O/R Mapper like NHibernate, it attaches some naming warts in the aliases used for the output queries, and as that is somewhat unpredictable I'm not sure I could test for that.</p>\n\n<p>Should I just, abandon everything and simply trust NHibernate? I'm not sure that's prudent.</p>\n"},{"tags":["unit-testing","cakephp","error-handling","cakephp-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":11952592,"title":"Cakephp exceptions","body":"<p>while writing tests to my Articlescontroller i've met problem, i cant deal with. When I turn on test, it runs and the next time throws cake's exepction and stack trace. ANy ideas ?    </p>\n\n<pre><code>urlencode() expects parameter 1 to be string, array given\nTest case: ArticlesControllerTest(testAdminIndex)\nStack trace:\nPHPUnit_Util_ErrorHandler::handleError\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\app\\Plugin\\DebugKit\\Controller\\Component\\ToolbarComponent.php : 478\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\app\\Plugin\\DebugKit\\Controller\\Component\\ToolbarComponent.php : 281\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\app\\Plugin\\DebugKit\\Controller\\Component\\ToolbarComponent.php : 216\nToolbarComponent::beforeRedirect\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Utility\\ObjectCollection.php : 104\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Controller\\Controller.php : 698\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Controller\\Component\\AuthComponent.php : 318\nAuthComponent::startup\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Utility\\ObjectCollection.php : 104\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Controller\\Controller.php : 606\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Routing\\Dispatcher.php : 101\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\Routing\\Dispatcher.php : 86\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\ControllerTestCase.php : 264\nControllerTestCase::_testAction\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\ControllerTestCase.php : 185\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\app\\Test\\Case\\Controller\\ArticlesControllerTest.php : 11\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\app\\Test\\Case\\Controller\\ArticlesControllerTest.php : 11\nArticlesControllerTest::testAdminIndex\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\vendors\\PHPUnit\\Framework\\TestCase.php : 942\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\vendors\\PHPUnit\\Framework\\TestCase.php : 804\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\vendors\\PHPUnit\\Framework\\TestResult.php : 649\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\vendors\\PHPUnit\\Framework\\TestCase.php : 751\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\CakeTestCase.php : 78\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\vendors\\PHPUnit\\Framework\\TestSuite.php : 772\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\vendors\\PHPUnit\\Framework\\TestSuite.php : 745\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\vendors\\PHPUnit\\TextUI\\TestRunner.php : 325\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\CakeTestRunner.php : 56\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\CakeTestSuiteCommand.php : 110\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\CakeTestSuiteDispatcher.php : 250\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\CakeTestSuiteDispatcher.php : 98\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\lib\\Cake\\TestSuite\\CakeTestSuiteDispatcher.php : 115\nC:\\Program Files (x86)\\PostgreSQL\\EnterpriseDB-ApachePHP\\apache\\www\\soig\\www\\konkursy2.0\\app\\webroot\\test.php : 92 \n</code></pre>\n"},{"tags":["unit-testing","cakephp","cakephp-2.2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":11950915,"title":"CakePHP test fixture to use different table name","body":"<p>I got a model which is defined with</p>\n\n<pre><code>class User extends AppModel{\n    public $useTable = 'members';\n    ....\n    ....\n</code></pre>\n\n<p>which works fine, now I want to use a fixture for a unit test on this model.</p>\n\n<p>I define the fixture as so</p>\n\n<pre><code>App::uses('User', 'Model');\n\nclass UserFixture extends CakeTestFixture {\n    public $useTable = 'members';\n\n    public $import = array('table' =&gt; 'members');\n    ....\n    ....\n</code></pre>\n\n<p>however the table it creates is called cake_users NOT cake_members - which then causes the test and controller and other code to fail since it can't find cake_members.</p>\n\n<p>How can I get the fixture the test db as cake_members</p>\n\n<p>This is the error </p>\n\n<pre><code>Table cake_members for model User was not found in datasource test.\n</code></pre>\n\n<p>This is using cake 2.2.1</p>\n"},{"tags":["ruby-on-rails","unit-testing","testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":11941945,"title":"Rails Test::Unit does not work. But app works, console works, even console in Test::Unit works","body":"<p>I have a method that simply updates an attribute. :</p>\n\n<pre><code>@objects.each do |thingamabobber|\n  thingamabobber.update_attributes( { attribute_one: false, attribute_two: true } )\nend\n</code></pre>\n\n<p>It does a little bit more, but for the most part, that's it. I place a debugger before that update part and after it. And I notice while running a Unit::Test, it doesn't update the attribute.</p>\n\n<p>But if in that same debugger, just copy and paste the code in the Test::Unit console, it will update with no errors. That goes for if I use Rails console, or if I use the app as a whole. Everything works fine. Except for the test. </p>\n\n<p>Note, nothing is getting stubbed in my test objects. I'm using Factory girl to create my objects.</p>\n\n<p>Further, if I were to throw the debugger in the tests, and run a collection on the attributes that I'm updating, they will return back <em>unchanged</em>, <strong>but still pass the tests</strong>, that is, except for one test that makes sure that attribute_one is updated.</p>\n\n<p>This tell me that..Test::Unit is silently processing the data, and that its failing, but not for any of the reasons its telling me.</p>\n\n<p>Does anyone know what this may be symptomatic of?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Here's it really simplified :</p>\n\n<pre><code>should \"update all items\" do\n  @item.items.last.update_all_recurring_items( {\"name\" =&gt; 'Ooooohhhh Yeeeeeea! Kooolaid Goooooood!'} )\n  assert_equal @item.name, @item.items.last.name\nend\n</code></pre>\n\n<p>Then the method in my model :</p>\n\n<pre><code>def update_all_recurring_items params = {}\n  parent = self.recurring_items.present? ? self : Item.find(self.recurring_item_id)\n  parent.recurring_items.each do |item|\n    # Everything ok up to here. If I run the below method it works.\n    item.update_attributes( params )\n    # But! The Test Suit just skips over this like nothing ever happened.\n  end\n  parent.update_attributes(params) if self != parent\nend\n</code></pre>\n"},{"tags":["java","database","unit-testing","spring-mvc","hsqldb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":11945434,"title":"\"Dump\" hql database when running integration test","body":"<p>I'm performing some integration test with dbunit on an in-memory HSQL database. A problem is that I don't have an user interface(like pgAdmin) to check on the data between the tests.</p>\n\n<p>Does dbunit support any mean by which I can \"dump\" a snapshot of the HSQL database, so that I can review it after the test complete?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":11949242,"title":"Use Cast as part of test or explicitly use Assert.IsInstanceOfType","body":"<p>I am pretty new to testing and have been writing my Controller tests as follows:</p>\n\n<pre><code>var result = myController.Create(It.IsAny&lt;int&gt;());\n\nAssert.IsInstanceOfType(result, typeof(ViewResult));\nAssert.AreEqual(string.Empty, ((ViewResult)result).ViewName, \"Default view expected.\");\nAssert.IsInstanceOfType(((ViewResult)result).ViewData.Model, typeof(FooBarCreateEditViewModel));\n</code></pre>\n\n<p>This works fine but is not as readable in that I am having to perform a cast for Tests 2 &amp; 3. An alternative approach might be to do the following:</p>\n\n<pre><code>var result = (ViewResult)myController.Create(It.IsAny&lt;int&gt;());\n\nAssert.AreEqual(string.Empty, result.ViewName, \"Default view expected.\");\nAssert.IsInstanceOfType(result.ViewData.Model, typeof(FooBarCreateEditViewModel));\n</code></pre>\n\n<p>This also seems to work and is more readable in my opinion. My problem with it is that it relies on the \"act\" part of the test to perform the IsInstanceOfType test, rather than explicitly defining an Assert to do the job.</p>\n\n<p>So is my second apporach ok to continue with? I am likely to run into issues with relying on the cast to throw an error should the method return a different type?</p>\n"},{"tags":["silverlight","unit-testing","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":160,"score":2,"question_id":8794970,"title":"Best mocking framework for Silverlight 5","body":"<p>What is the best mocking framework for Silverlight 5?</p>\n\n<p>I used to use Moq, but I found that it does not work with Silverlight 5.</p>\n"},{"tags":["unit-testing","cakephp-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":11948077,"title":"How to write edit/delete tests in cakephp","body":"<p>For ex. i have ArticlesController, i'd like to write :</p>\n\n<pre><code>public function testDelete(){\n    $data = array(\n      'Article' =&gt; array(\n         'id' =&gt; '1',           \n     ));\n$this-&gt;testAction('/articles/delete',  array(\n                'data' =&gt; '$data', \n                'method' =&gt; 'post'\n                ));\n}\n</code></pre>\n\n<p>cakephp throws exepction: \nurlencode() expects parameter 1 to be string, array given\nTest case: ArticlesControllerTest(testDelete)\nand test doesnt work even when i try:</p>\n\n<pre><code>$this-&gt;testAction('/articles/delete/1');\n</code></pre>\n\n<p>, same with edit . What do i do wrong? thx</p>\n"},{"tags":["silverlight","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":9390324,"title":"Unit Test for Shell and UI in Silverlight Prism","body":"<p>I need to add Unit Test Cases for Shell and UI for the project. I searched a lot, but didn't get anything heplful. Can any one provide me the samples for this??</p>\n\n<p>Thanks,</p>\n"},{"tags":["java","unit-testing","testing","junit","junit4"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":11857279,"title":"Is there a way to automate junit bean property tests?","body":"<p>Let's face it, writing bean property tests is possibly the worst use of time. But they need to be done.</p>\n\n<p>For example. If testing a <code>String</code> property for <code>propName</code> a call such as the following:</p>\n\n<pre><code>testProperty(target, \"propName\", String.class);\ntestProperty(target, \"propName\", String.class, \"expected initial\");\n</code></pre>\n\n<p>Would validate that:</p>\n\n<ul>\n<li><code>get</code> and <code>set</code> methods exist.</li>\n<li>If using expected value a test to <code>get</code> calls <code>assertEquals</code> for the given value.</li>\n<li>(<code>get</code>,<code>is</code>)/<code>set</code> methods behave as expected.</li>\n</ul>\n\n<p>I could go an start writing these implementations, but I want to know if there is something available to facilitate this. Other optional attributes could be used to validate that <code>null</code> is allowed or use JSR-303 bean validation to validate the field.</p>\n"},{"tags":["unit-testing","tsql","code-coverage"],"answer_count":3,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":569,"score":5,"question_id":1647165,"title":"is there a code-coverage tool for the TSQL sproc unit tests?","body":"<p>I am looking for a unitttest and code-coverage tool for TSQL sprocs.  Can anyone recommend a good one? Commercial or free.</p>\n"},{"tags":["jquery","ajax","unit-testing","qunit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":846,"score":2,"question_id":4923746,"title":"Problem of qUnit test order","body":"<p>I have build a web site with jQuery and lots of ajax request (json format).<br>\nI would like to make some unit test to verify request on server side.<br>\nAs I used jQuery, I use qUnit, but I have a problem of order of test...  </p>\n\n<p>For example, I wanted to test this:\n- create a user => could be possible<br>\n- rename the user with a valid name => could be possible<br>\n- rename the user with a used name => could not be possible<br>\n- remove the user => could be possible  </p>\n\n<p>My code:</p>\n\n<pre><code>  $(\"button#test\").button().click(function() {\n    module(\"Module Users\");\n    newName = 'newUserName';\n    userId = 0;\n\n    test(\"1 Add a user\", function() {\n      stop();\n      $.getJSON(Request,{'action':'add','table':'users'}\n        ,function(data) {\n          equal( data.status,\"OK\", \"Answer is OK\" );\n          notEqual( data.item,null, \"item is return\" );\n          userId = data.item.id;\n          start();\n      });\n    });\n\n    test(\"2 Rename user\", function() {\n      stop();\n      $.getJSON(Request,{'action':'modify','table':'users','id':userId,'field':'name','value':newName}\n        ,function(data) {\n          equal( data.status,\"OK\", \"Answer is OK\" );\n          equal( data.value,newName, \"Return value is OK\" );\n          start();\n      });\n    });\n\n    test(\"3 Rename user with use name\", function() {\n      stop();\n      badName = 'usedName'; // assert that a user with this name exists\n      $.getJSON(Request,{'action':'modify','table':'users','id':userId,'field':'name','value':badName}\n        ,function(data) {\n          equal( data.status,\"Fail\", \"Answer is Fail\" );\n          equal( data.value,newName, \"Return value is previous name\" );\n          start();\n      });\n    });\n\n    test(\"4 Remove the user\", function() {\n      stop();\n      $.getJSON(Request,{'action':'remove','table':'users','id':userId}\n        ,function(data) {\n          equal( data.status,\"OK\", \"Answer is OK\" );\n          start();\n      });\n    });\n</code></pre>\n\n<p>But the problem is that the 1 test is run, then the 4 and the 2 and 3...\n(Then, I think the problem is that my tests are not independant)</p>\n\n<p>How it is possible to solve this ?<br>\nI can cascade all the 4 tests in 1 but I think it will be less readable...  </p>\n\n<p>What do you think ?</p>\n"},{"tags":["ruby","unit-testing","rspec"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":11943564,"title":"Ruby RSpec unit test gives undefined method error","body":"<p>I have created a unit test using RSpec.</p>\n\n<p>The app.rb has:</p>\n\n<pre><code>module AppModule\n  class App\n    def get_item\n      str = self.get_string\n      puts \"in get_item - #{str}\"\n    end\n\n    def get_string\n      puts \"hello, world\"\n    end\n  end\nend\n</code></pre>\n\n<p>The app_test.rb has:</p>\n\n<pre><code>require 'test_helper'\nrequire 'env'\n\ndescribe App do\n  before :each do\n    @var = App.new\n  end\n\n  describe \"firsttest\" do\n    it \"should print string\" do\n      @var.get_item\n    end\n  end\nend\n</code></pre>\n\n<p>What I find is that get_item is called correctly.  But when it gets to get_string, I get an error:</p>\n\n<p>undefined method get_string for #App:0x2eaqc4600</p>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","sftp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":182,"score":0,"question_id":11837948,"title":"Using Apache Mina as a Mock/In Memory SFTP Server for Unit Testing","body":"<p>I am having a bit of trouble working out how to use Apache Mina. Their documentation is a bit scant for my talentless brain to work out. I have seen the helpful starting code at\n<a href=\"http://stackoverflow.com/questions/3076443/java-sftp-server-library\">Java SFTP Server Library?</a></p>\n\n<p>What I can't figure out is how to use it. I want to setup a unit test that checks my sftp code, using Mina as a kind of mock server, i.e., be able to write a unit test like:</p>\n\n<pre><code>@Before \npublic void beforeTestSetup() {\n    sshd = SshServer.setUpDefaultServer();\n    sshd.setPort(22);\n    sshd.setKeyPairProvider(new SimpleGeneratorHostKeyProvider(\"hostkey.ser\"));\n\n    List&lt;NamedFactory&lt;UserAuth&gt;&gt; userAuthFactories = new ArrayList&lt;NamedFactory&lt;UserAuth&gt;&gt;();\n    userAuthFactories.add(new UserAuthNone.Factory());\n    sshd.setUserAuthFactories(userAuthFactories);\n    sshd.setPublickeyAuthenticator(new PublickeyAuthenticator());\n\n\n    sshd.setCommandFactory(new ScpCommandFactory());\n\n    List&lt;NamedFactory&lt;Command&gt;&gt; namedFactoryList = new ArrayList&lt;NamedFactory&lt;Command&gt;&gt;();\n    namedFactoryList.add(new SftpSubsystem.Factory());\n    sshd.setSubsystemFactories(namedFactoryList);\n\n    try {\n        sshd.start();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\n@Test\npublic void testGetFile() {\n\n}\n</code></pre>\n\n<p>The question is what to put in testGetFile().</p>\n\n<p>I've been trawling through the test code wondering whether more configuration is needed in the above to specify a root directory, a user name and an authentication key file name. Then I'll need to get and pull files from it using a client, or my own SFTP api code?</p>\n\n<p>I'm sure this is an excellent API, there's just not a lot of instruction for it, can anyone help?</p>\n"},{"tags":["objective-c","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":11941890,"title":"Load a test image for unit testing","body":"<p>I'm writing a test for a class that loads an image and does some color manipulation.\nThe image is loaded with </p>\n\n<pre><code>    UIImage* image = [UIImage imageNamed:imageName];\n</code></pre>\n\n<p>If I run the app everything is fine and the images are loaded as expected. I added a unit test  that shall use a specific test image to be loaded during the test. If I run the test fixture the image is not loaded. What I read so far is that the method imageNamed always loads from the app bundle's resource folder. How can I change this to the bundle of my test? </p>\n"},{"tags":["java","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":326,"score":1,"question_id":5498412,"title":"test data builder for java","body":"<p>I recently came across <a href=\"https://bitbucket.org/tednaleid/grails-test-data/wiki/Home\" rel=\"nofollow\">Test Data Builder for grails</a></p>\n\n<p>I was wondering if we have something like that for Java.</p>\n\n<p>I am aware of make it easy and the builder pattern could help to a degree, but I think grails has taken to a different level, some thing like this in Java anyone ?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","unit-testing","bdd","nspec"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":10741104,"title":"Can anyone show me some examples of NSpec being used to test controllers (and other aspects of MVC site)?","body":"<p>I'm starting working with NSpec but would love a few pointers on the right way to use it to spec or test my controllers.  Basically a few examples would go a very long way. Are there any example projects out there? All help would be appreciated.</p>\n\n<p>Richard.</p>\n"},{"tags":["unit-testing","code-coverage"],"answer_count":21,"favorite_count":2,"up_vote_count":13,"down_vote_count":1,"view_count":951,"score":12,"question_id":555807,"title":"What type of errors could my code still contain even if I have 100% code coverage?","body":"<p>What type of errors could my code still contain even if I have 100% code coverage? I'm looking for concrete examples or links to concrete examples of such errors. </p>\n"},{"tags":["java","unit-testing","dependency-injection","junit","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":11933813,"title":"Working with Injectable Singletons","body":"<p>I recently stumbled upon this <a href=\"http://wiki.apidesign.org/wiki/Injectable_Singleton\" rel=\"nofollow\">interesting concept</a> that may save me much testing efforts.\nWhat I do not understand is how can the provider be injected in runtime?</p>\n\n<p>The scenario is trivial: I am constructing a mock object at run-time with my mocking framework of choice, but I do not know the name of the generated class in advance because it is a mock (so I can't configure it in advance, not do I want to). </p>\n\n<p>Did anybody make successful use of this technique in unit tests?</p>\n\n<p>Thank you.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":116,"score":1,"question_id":7119366,"title":"Visualize/list/check dependencies I have to mock in unit test?","body":"<p>Given a unit test for old, hard-to-read C# legacy code, what are the best ways to:</p>\n\n<ul>\n<li>find the dependencies (visualize them, or outoput a list for a single method)</li>\n<li>check after refactoring that all dependencies got broken, that the unit test is really isolated.  No hidden invocation of DateTime.Now, no Database/File/Service access, no calls to anything which is not a stub or mock (other than some trusted .NET framework stuff, etc.)</li>\n</ul>\n\n<p>Most probably a question about tooling.</p>\n\n<p>I could manually look through the code and assume I didn't forget to break all dependencies, but that's error-prone. The thing I do right now is marking (via some hidden resharper feature) all usings of certain (non-interface-only, custom) namespaces. But there are assemblies which mix interfaces and implementations, plus not all of my coworkers use Resharper, plus I have the gut feeling it could be even easier, e.g. simple yes/no check.</p>\n\n<p>If tehre is some great commercial tool for that, that's fine, too.</p>\n\n<p>EDIT: maybe I should expresse it in a cleaner way: how can I easily, within Visual Studio, see what non-interface dependencies my class/method depends on? There gotta be tools for that (I hope), money is a secondary concern.</p>\n"},{"tags":["c#","unit-testing","moq","moles"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":106,"score":1,"question_id":11930535,"title":"TypeInitializationException with Moq and Moles when using [HostType(\"Moles\")]","body":"<p>Moq throws a TypeInitializationException when using Moles with the <code>[HostType(\"Moles\")]</code> attribute. Code example and exception below. </p>\n\n<pre><code>[TestMethod]\n[HostType(\"Moles\")]\npublic void TestMethod()\n{\n    var mock = new Mock&lt;IAnything&gt;();\n}\n</code></pre>\n\n<p>The exception:</p>\n\n<pre><code>System.TypeInitializationException occurred\n  Message=The type initializer for 'Moq.Extensions' threw an exception.\n  Source=Moq\n  TypeName=Moq.Extensions\n  StackTrace:\n       at Moq.Extensions.IsMockeable(Type typeToMock)\n       at Moq.Mock`1.CheckParameters()\n       at Moq.Mock`1..ctor(MockBehavior behavior, Object[] args)\n       at Moq.Mock`1..ctor(MockBehavior behavior)\n       at Moq.Mock`1..ctor()\n       at BP.DFR.Common.Services.Network.DfrNetworkQueryTests.MyTestMethod()\n  InnerException: System.Security.VerificationException\n       Message=Operation could destabilize the runtime.\n       Source=Moq\n       StackTrace:\n            at Moq.Extensions..cctor()\n       InnerException:\n</code></pre>\n\n<p>The link below suggested it might be a moq version issue, but it happens in both version 3.1 and 4.0 for me.</p>\n\n<p><a href=\"http://code.google.com/p/moq/issues/detail?id=344\" rel=\"nofollow\">http://code.google.com/p/moq/issues/detail?id=344</a></p>\n\n<p>I'm using VS 2010 Premium SP1. Anybody had any luck resolving this?</p>\n"},{"tags":["unit-testing","repository-pattern"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":11864356,"title":"Losing my mind Unit testing","body":"<p>since i do not get my head around the unit tests.</p>\n\n<p>I have a service</p>\n\n<pre><code>public interface IMyService\n{\n    public List&lt;Person&gt; GetRandomPeople();\n}\n</code></pre>\n\n<p>And then in my MVC Project  I have the implementation of this service</p>\n\n<pre><code>public MyService : IMyService\n{\n    public List&lt;Person&gt; GetRandomPeople();\n    {\n         ...the actual logic the get the People here. This is what i want to test ?\n    }\n}\n</code></pre>\n\n<p>Then in my controller</p>\n\n<pre><code>public HomeController : Controller\n{\n     IMyService _myService;\n     public HomeController(IMyService myService)\n     {\n         _myService = myService\n     }\n}\n</code></pre>\n\n<p>Then in the Action Method I will use</p>\n\n<pre><code>public ActionResult CreateRandom()\n{\n    List&lt;Person&gt; people = _myService.GetRandomPeople();\n    return View(people)\n}\n</code></pre>\n\n<p>Note : The person repo is in my service, just typed this out quickly, so i have a repo.</p>\n\n<p>My Question : How would i test my Service implementation in my Tests projects. I am really stuck now, and i think this is going to the \"light goes on\" moment in my TDD future.</p>\n\n<p>thanks in advance.</p>\n"},{"tags":["objective-c","unit-testing","xcode4","getopt-long"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":11937665,"title":"How to write tests for getoptlong","body":"<p>I have written a small terminal application with objective-c on Mac that uses getoptlong to parse the command line arguments. The code that parses the command line is the following:</p>\n\n<pre><code>+ (void) parseCommandLine:(int) argc\n                     args:(char **) argv\n            outSocketPath:(NSURL **) socketPath\n          outSocketHandle:(int *) socketHandle\n          outTestModePath:(NSURL **) testModePath {\n\n    *socketPath = nil;\n    *testModePath = nil; \n    socketHandle = 0;\n\n    // are we running with launchd, the default is true\n    BOOL noLaunchdFlag = NO;\n    struct sockaddr_un un;\n\n    // description of the available options of the daemon\n    static struct option longopts[] = {\n        { \"no-launchd\", no_argument, NULL, 'l' },\n        { \"socket\", required_argument, NULL, 's' },\n        { \"testing\", required_argument, NULL, 't'},\n        { \"help\", no_argument, NULL, 'h'}\n    };\n\n    // parse the options and decide how to move\n    int ch;\n    while ((ch = getopt_long(argc, argv, \"lst:h\", longopts, NULL)) != -1){\n        switch (ch) {\n            case 'l':\n                noLaunchdFlag = YES;\n                break;\n            case 's':\n                *socketPath = [NSURL fileURLWithPath: [NSString \n                    stringWithCString:optarg encoding:NSUTF8StringEncoding]];\n                break;\n            case 't':\n                *testModePath = [NSURL fileURLWithPath: [NSString \n                    stringWithCString:optarg encoding:NSUTF8StringEncoding]];\n            case 'h':\n            default:\n                return [FSEventsDaemon usage];\n        } // switch\n    } // while looping through args\n    // assert the parameters\n    if(noLaunchdFlag) {\n        if(*socketPath == nil){\n            // we always need to have a socket path\n            [NSException raise:@\"Invalid Parameter\" format:@\"\"];\n        }\n        if([[*socketPath absoluteString] length] &gt; sizeof(un.sun_path) - 1) {\n            // socket path is too long    \n            [NSException raise:@\"Invalid Parameter\" format:@\"\"];\n        }\n        if(*testModePath == nil &amp;&amp; geteuid() != 0){\n            // if we are not running in test mode we must be root\n            [NSException raise:@\"\" format:@\"\"];\n        }\n        // all args are ok\n        return;\n    }\n    else {\n        if(testModePath != nil) {\n            [NSException raise:@\"Invalid Paramter\" \n                format:@\"You cannot use -t because testing is not supported via launchd\"];\n        }\n        // get the handle\n        *socketHandle = [FSEventsDaemon getLauchdSocketHandle];\n        // all args are ok\n        return;\n    }\n}\n</code></pre>\n\n<p>Having done that I'd like to use unit tests to assert that the operation is correctly done. I have for example written the following test:</p>\n\n<pre><code>- (void) testParseArgsNotTestNotRoot {\n    char * argv[] = {\"./FsEvents\", \"--socket=\", [self getPath], \"-l\"};\n    int argc = 4;\n    NSURL *sockPath = nil;\n    int handle;\n    NSURL *testPath = nil;\n    // should raise an exception because we are not root\n    STAssertThrows([FSEventsDaemon parseCommandLine:argc args:argv \n        outSocketPath:&amp;sockPath outSocketHandle:&amp;handle \n        outTestModePath:&amp;testPath], nil);\n}\n</code></pre>\n\n<p>When running the test via the debugger the getoptlong args parsing never gets the path. Is this the correct way to test the usage of getoptlong? Is there a better pattern used for testing the parsing of the command line arguments?</p>\n"},{"tags":["php","eclipse","unit-testing","zend-framework","zend-test"],"answer_count":4,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":661,"score":6,"question_id":1075480,"title":"Running PHP Zend Test in Eclipse","body":"<p>Is it possible to run PHP Zend test cases (those that extend Zend_Test_PHPUnit_ControllerTestCase, etc.) through Eclipse PDT?</p>\n\n<p>I would like to be able to run them in a similar fashion as you run JUnit tests in Eclipse, by right-clicking the test file and selecting \"Run as a JUnit test case.\" </p>\n\n<p>I'd love to see the green or red bar instead of having to go to the command line :).</p>\n\n<p>Thanks in advance. </p>\n"},{"tags":["unit-testing","yii","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":180,"score":2,"question_id":11338084,"title":"yii controller action unit testing without selenium","body":"<p>Suppose I have an action:</p>\n\n<pre><code>function actionShowItem($id)\n{\n    $item = Item::model()-&gt;findByPk($id);\n    $this-&gt;render(\"showitem\",array('model' =&gt; $id));\n}\n</code></pre>\n\n<p>What is the simple unit test for this action which will verify text in the view output. Its easy in zend framework without using selenium. We could create fake GET and POST too in zend. But I have not found same examples in Yii. Please suggest. </p>\n"},{"tags":["c","unit-testing","glib"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":11931422,"title":"How do I run unit tests using the GLib framework?","body":"<p>I'm trying to run simple unit tests for some C code I'm writing using GLib. I'm trying to do something like:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\n#include &lt;glib.h&gt;\n\nstatic void \ntest_stuff () \n{\n  g_assert (1 == 1); //Say\n}\n\nint main (int argc, char **argv)\n{\n  g_test_init (&amp;argc, &amp;argv);\n  g_test_add_func (\"/TestTest\", test_stuff);\n\n  return g_test_run();\n}\n</code></pre>\n\n<p>But when I compile (say to a binary called exec) and try to run this using gtester (or even running said binary directly), I get the following error:</p>\n\n<pre><code>me@laptop:tests$ gtester exec\nTEST: exec... (pid=6503)\n\n(process:6503): GLib-CRITICAL **: g_test_init: assertion `vararg1 == NULL' failed\nFAIL: exec\nTerminated\n</code></pre>\n\n<p>Is there something I'm missing, maybe variables I should pass as I run the tests? </p>\n"},{"tags":["java","unit-testing","testing","quality"],"answer_count":9,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":6180,"score":8,"question_id":412409,"title":"JUnit's @Ignore","body":"<p>I wonder if it is a good practice to use JUnit's @Ignore. And how people are using it? </p>\n\n<p>I came up with the following use case: Let's say I am developing a class and writing a JUnit test for it, which doesn't pass, because I'm not quite done with the class. Is it a good practice to mark it with @Ignore? </p>\n\n<p>I'm a little concerned that we might miss the ignored test case later on or that people start using it to \"force\" tests to pass CI.</p>\n"},{"tags":["unit-testing","mime","mime-message"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":11912842,"title":"MIME parser test data","body":"<p>I've just wrote MIME parser and tested it on 1000+ messages from my inbox, so looks like it's working well. However, most of these messages are private and I cannot use them in public unit tests or add them to VCS.</p>\n\n<p>Are there any well-known/public sets of mail messages to be used for MIME parser unit testing?</p>\n\n<p>I thought about extracting original MIME messages from public mailing lists by HTTP, but it will make test very slow and non-repeatable.</p>\n"},{"tags":["java","unit-testing","postgresql","testing","in-memory-database"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":201,"score":2,"question_id":11764487,"title":"unit testing with in-memory database","body":"<p>I have PostgreSQL database. It is used for unit testing. </p>\n\n<ul>\n<li>I want to speed the tests up so I want to use some kind of in-memory databases (e.g. H2). </li>\n<li>I want to dump the database (from PostgreSQL) and the import such a dump into in-memory database. </li>\n</ul>\n\n<p>Do you have any suggestion concerning in-memory database choice? I want that database to be compatible with PostgreSQL.</p>\n"},{"tags":["javascript","unit-testing","node.js","mocha"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":224,"score":0,"question_id":11927196,"title":"Supertest custom express server in node","body":"<p>Please be gentle with me. I'm new to async coding and have been thrown headfirst into an intensive project using node to develop and API server. I'm loving it but some things aren't coming naturally.</p>\n\n<p>Our project is built using express js. We have a file, server.js where we instantiate an express server which in turn instantiates our router and so on. I need to integration test this now (partially) complete server. Normally what I do is from the command line run '%node server.js' and then using either python requests or curl make requests and check the responses.</p>\n\n<p>Now I've been tasked with writing a unit and integration test suite so that we can automate our testing going forward. I've been using mocha and now am trying to use supertest for the integration testing. The problem is that supertest expects a server object which it then applies tests to however our file that builds our server object doesn't return anything. I don't want to modify that file so I am stumped as to how to access the server object to use for testing. </p>\n\n<p>My server file looks (in part) like this:</p>\n\n<pre><code>var express = require('express')\n\nvar app = express();\n\n// Express Configuration\napp.use(express.favicon()); //handles favicon request, which keeps it out of the log when using a browser :)\napp.use(express.bodyParser()); //slurps up the body in chunks the node.js way :)\n// ...and so on\n</code></pre>\n\n<p>and my mocha test file looks like this</p>\n\n<pre><code>var request = require('supertest')\n  , app     = require('../server.js')\n  , assert  = require(\"assert\");\n\ndescribe('POST /', function(){\n  it('should fail bad img_uri', function(done){\n    request(app)\n        .post('/')\n        .send({\n            'img_uri' : 'foobar'\n        })  \n        .expect(500)\n        .end(function(err, res){\n        console.dir(err)\n        console.dir(res)\n            done();\n        })  \n  })    \n})\n</code></pre>\n\n<p>when I run this test I get a complaint about the app object not having a method named address. My question is, is there a way I can require/call the server.js file so that the app object will be in scope? Or am I going about this wrong. I also played around a little bit with using http.js to make calls directly to the server but didn't have luck that way either. Thanks!</p>\n"},{"tags":["wordpress","unit-testing","plugins"],"answer_count":1,"favorite_count":12,"up_vote_count":11,"down_vote_count":0,"view_count":1581,"score":11,"question_id":9138215,"title":"Unit Testing WordPress Plugins","body":"<p>I'm looking into unit testing a WordPress plugin for better code reliability.</p>\n\n<p>I'm a little confused to how its all supposed to work however &amp; was wondering if anyone else has made the jump into unit testing their plugins &amp; could give a heads up any in-depth tutorials on the subject.</p>\n\n<p>FYI I have looked at the following resources:</p>\n\n<p><a href=\"http://wordpress.tv/2011/08/20/nikolay-bachiyski-unit-testing-will-change-your-life/\">http://wordpress.tv/2011/08/20/nikolay-bachiyski-unit-testing-will-change-your-life/</a></p>\n\n<p><a href=\"https://github.com/mines/mockpress\">https://github.com/mines/mockpress</a></p>\n\n<p><a href=\"http://codex.wordpress.org/Automated_Testing\">http://codex.wordpress.org/Automated_Testing</a></p>\n\n<p>Also checked out wordpress.stackxchange questions but no luck there.</p>\n\n<p>Probably my biggest hurdle is how you'd test each of the methods in a class like this one <a href=\"http://pastebin.com/ybzyXuQE\">http://pastebin.com/ybzyXuQE</a></p>\n\n<p>Hope you can help</p>\n"},{"tags":["asp.net-mvc","unit-testing","repository"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":11830911,"title":"Test if save method is hit in unit test","body":"<p>I'm starting with unit testing in the asp.net mvc 4 framework.</p>\n\n<p>I got a repository with basic crud methods and a save method. When I create a unit test I create a test repository and test if e.g. a item to the collection is added. That all goes smoothly but I cannot test if the save method is hit. </p>\n\n<p>I tried to add a boolean property to the test repository which will be set to true if .save() is hit. But then I need to change the interface, and also the database repository. Which is in my opinion neither practical nor best practice.</p>\n\n<p>What is the best method to test this? Thank you in advance for your answer.</p>\n\n<p>My code:</p>\n\n<p>the fake repository:</p>\n\n<pre><code>public class TestUserRepository : IUserManagementRepository\n    {\n        /// &lt;summary&gt;\n        /// entries used used for testing\n        /// &lt;/summary&gt;\n        private List&lt;User&gt; _entities;\n\n        /// &lt;summary&gt;\n        /// constructor\n        /// &lt;/summary&gt;\n        public TestUserRepository()\n        {\n            _entities = new List&lt;User&gt;();\n            _entities.Add(new User\n            {\n                Id = 1,\n                InsertDate = DateTime.Now,\n                LastUpdate = DateTime.Now,\n                Username = \"TestUserName\",\n                Password = \"TestPassword\"\n            });\n        }\n...\n\npublic void Create(User task)\n        {\n            _entities.Add(task);\n        }\n\npublic void Save()\n        {\n            //do nothing\n        }\n    }\n</code></pre>\n\n<p>the controller to test:</p>\n\n<pre><code>[HttpPost]\n        public ActionResult Create(User user)\n        {\n            if (ModelState.IsValid)\n            {\n                _repository.Create(user);\n                _repository.Save();\n                return RedirectToAction(\"Index\");\n            }\n            else\n            {\n                return View(user);\n            }\n\n        }\n</code></pre>\n\n<p>and the test</p>\n\n<pre><code>[TestMethod()]\n        public void CreateTest()\n        {\n            IUserManagementRepository repository = new TestUserRepository();\n            UserController controller = new UserController(repository);\n            User user = new User { Username = \"UnitTestUserName\", InsertDate = DateTime.Now, LastUpdate = DateTime.Now, Password = \"Password\" };\n            ActionResult actionResult = controller.Create(user);\n        User returnedUser = repository.FindBy(u =&gt; u.Username == \"UnitTestUserName\").First&lt;User&gt;();\n\n            Assert.IsNotNull(actionResult);\n            Assert.AreEqual(user, returnedUser);            \n        }\n</code></pre>\n"},{"tags":["unit-testing","mocking"],"answer_count":4,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":69,"score":7,"question_id":11924542,"title":"What is the point of testing whether a mocked method has been called?","body":"<p>Okay, so this might be a dangerous question to ask. I have been doing unit testing for a while, but for some reason, I woke up this morning and I asked myself this question. </p>\n\n<p>Say I have an interface UserFactory, and it has the method CreateUser. </p>\n\n<p>At some point I need to create a user right? So I create a test checking whether CreateUser was called for the UserFactory at the appropriate place. </p>\n\n<p>Now, unit tests are pretty coupled to the actual code - which is fine. But maybe a bit too much? As in, the only way to break the test is by not calling the call to CreateUser. We are not checking its implementation etc. but just checking the interface has been called. But whoever does remove that call, would have a failing test and ultimately remove the verify statement from the step to verify the CreateUser was called. </p>\n\n<p>I have seen this happen over and over again. </p>\n\n<p>Could someone bring the light back to me and explain why is it beneficial to verify mocked objects' methods have been called? I can see why it may be useful to set them up, say CreateUser should return a dummy user for later part of the code, but in places where we are simply and only verify if they have been called is the part that got me. </p>\n\n<p>Thanks!</p>\n"},{"tags":["python","unit-testing"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":439,"score":5,"question_id":4005695,"title":"changing order of unit tests in Python","body":"<p>How can I make it so unit tests in Python (using unittest) are run in the order in which they are specified in the file?</p>\n\n<p>thanks.</p>\n"},{"tags":["ruby","unit-testing","rspec"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":49,"score":4,"question_id":11923161,"title":"Should I run tests with Ruby 1.9.2 if they pass in 1.8.7 and 1.9.3?","body":"<p>I have a <a href=\"http://travis-ci.org/#!/beerlington/classy_enum\" rel=\"nofollow\">Ruby gem that is setup with Travis CI</a>, and <a href=\"https://github.com/beerlington/classy_enum/blob/master/.travis.yml\" rel=\"nofollow\">my configuration</a> currently runs the specs with Ruby 1.8.7, 1.9.2, and 1.9.3, as well as the latest versions of Rails 3.0, 3.1, and 3.2. If the tests are passing in 1.8.7 and 1.9.3, is there any reason to run them in 1.9.2? It seems like overkill if anything that works in both 1.8.7 and 1.9.3 will always work in 1.9.2. Is that assumption correct?</p>\n"},{"tags":["unit-testing"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3637,"score":1,"question_id":2783045,"title":"Unit Testing Error - The unit test adapter failed to connect to the data source or to read the data","body":"<p>I'm using VSTS 2K8 and I've set up a Unit Test Project.  In it, I have a test class with a method that does a simple assertion.  I'm using an Excel 2007 spreadsheet as my data source.</p>\n\n<p>My test method looks like this:</p>\n\n<pre><code>        [DataSource(\"System.Data.Odbc\", \n        \"Dsn=Excel Files;dbq=|DataDirectory|\\\\MyTestData.xlsx;defaultdir=C:\\\\TestData;driverid=1046;maxbuffersize=2048;pagetimeout=5\", \n        \"Sheet1\", \n        DataAccessMethod.Sequential)]\n    [DeploymentItem(\"MyTestData.xlsx\")]\n    [TestMethod()]\n    public void State_Value_Is_Set()\n    {\n        string expected = \"MD\";\n        string actual = TestContext.DataRow[\"State\"] as string;\n        Assert.AreEqual(expected, actual);\n    }\n</code></pre>\n\n<p>As indicated in the method decoration attributes, my Excel spreadsheet is on my local C:/ Drive.  In it, the sheet where all of my data is located is named \"Sheet1\".</p>\n\n<p>I've copied the Excel spreadsheet into my project and I've set its Build Action = \"Content\" and I've set its Copy to Output Directory = \"Copy if Newer\".</p>\n\n<p>When trying to run this simple unit test, I receive the following error:</p>\n\n<blockquote>\n  <p>The unit test adapter failed to connect to the data source or to read the data. For more information on troubleshooting this error, see \"Troubleshooting Data-Driven Unit Tests\" (http://go.microsoft.com/fwlink/?LinkId=62412) in the MSDN Library.\n  Error details: ERROR [42S02] [Microsoft][ODBC Excel Driver] The Microsoft Office Access database engine could not find the object 'Sheet1'.  Make sure the object exists and that you spell its name and the path name correctly.</p>\n</blockquote>\n\n<p>I've verified that the sheet name is spelled correctly (i.e. Sheet1) and I've verified that my data sources are set correctly.</p>\n\n<p>Web searches haven't turned up much at all.  And I'm totally stumped.  </p>\n\n<p>All help or input is appreciated!!!!</p>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010","linq","unit-testing","dbcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":11514226,"title":"Exception thrown when accessing DBContext from unit test","body":"<p>Any unit test the includes a call to SELECT (using LINQ) data from my DBContext throws the following error:</p>\n\n<blockquote>\n  <p>The model backing the 'MyDBContext' context has changed since the\n  database was created. Either manually delete/update the database, or\n  call Database.SetInitializer with an IDatabaseInitializer instance.\n  For example, the DropCreateDatabaseIfModelChanges strategy will\n  automatically delete and recreate the database, and optionally seed it\n  with new data.</p>\n</blockquote>\n\n<p>Doing a search for that specific error leads me to believe that I need to include the following line in my Global.asax Application_Start method:</p>\n\n<pre><code>System.Data.Entity.Database.SetInitializer&lt;MyDBContext&gt;( null );\n</code></pre>\n\n<p>This is suppose to fix a similar error when running the application itself. Unfortunately, I don't get this error when I run my application and there doesn't seem to be an Application_Start method for my unit test project. Is there any way to to the unit test project that I'm using a custom database back-end and to ignore any changes that have occurred in it?</p>\n\n<p>I added the unit test project after working on my main project for a while so it's possible I messed it up somehow, but I can't figure out for the life of me what to do. I'm using the built in unit testing in Visual Studio 2010.</p>\n"},{"tags":["python","django","unit-testing","django-forms","django-admin"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":11786626,"title":"Testing Django ModelForm __init__ in admin","body":"<p>How would you write an unittest for a <code>ModelForm</code> that overrides the <code>__init__</code> method? As far as i understand <code>get_form</code> returns the metaclass and in my code below <code>__init__</code> is never reached.</p>\n\n<pre><code>from django.contrib.admin.sites import AdminSite\nfrom django.db import models\nfrom django.contrib import admin\nfrom django.test import TestCase\n\nclass TranslationAdminTest(TestCase):\n    def test_custom_form_widget(self):\n        site = AdminSite()\n        request = None\n\n        class TestModel(models.Model):\n            text = models.TextField()\n\n        class TestModelForm(forms.ModelForm):\n            def __init__(self, *args, **kwargs):\n                print 'abc'  # &lt;-- Never reached\n                super(TestModelForm, self).__init__(*args, **kwargs)\n\n            class Meta:\n                model = TestModel\n\n        class TestModelAdmin(admin.ModelAdmin):\n            form = TestModelForm\n\n        ma = TestModelAdmin(TestModel, site)\n        self.failUnless(\n            isinstance(ma.get_form(request).base_fields['text_de'].widget,\n                       forms.Textarea))\n</code></pre>\n\n<p>The code is stripped down to demonstrate my problem. In the actual testcase i want to test the behaviour of a <code>ModelAdmin</code> subclass when a widget is changed in <code>__init__</code>.</p>\n"}]}
